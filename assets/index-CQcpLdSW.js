var C7=Object.defineProperty;var k7=(e,t,n)=>t in e?C7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var mi=(e,t,n)=>k7(e,typeof t!="symbol"?t+"":t,n);function A7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function li(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fx={exports:{}},_m={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KR;function T7(){if(KR)return _m;KR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return _m.Fragment=t,_m.jsx=n,_m.jsxs=n,_m}var ZR;function N7(){return ZR||(ZR=1,Fx.exports=T7()),Fx.exports}var y=N7(),Lx={exports:{}};function R7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vj={exports:{}},ia=Vj.exports={},Rs,Is;function n2(){throw new Error("setTimeout has not been defined")}function r2(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Rs=setTimeout:Rs=n2}catch{Rs=n2}try{typeof clearTimeout=="function"?Is=clearTimeout:Is=r2}catch{Is=r2}})();function Gj(e){if(Rs===setTimeout)return setTimeout(e,0);if((Rs===n2||!Rs)&&setTimeout)return Rs=setTimeout,setTimeout(e,0);try{return Rs(e,0)}catch{try{return Rs.call(null,e,0)}catch{return Rs.call(this,e,0)}}}function I7(e){if(Is===clearTimeout)return clearTimeout(e);if((Is===r2||!Is)&&clearTimeout)return Is=clearTimeout,clearTimeout(e);try{return Is(e)}catch{try{return Is.call(null,e)}catch{return Is.call(this,e)}}}var Dl=[],rh=!1,cd,zb=-1;function O7(){!rh||!cd||(rh=!1,cd.length?Dl=cd.concat(Dl):zb=-1,Dl.length&&Wj())}function Wj(){if(!rh){var e=Gj(O7);rh=!0;for(var t=Dl.length;t;){for(cd=Dl,Dl=[];++zb<t;)cd&&cd[zb].run();zb=-1,t=Dl.length}cd=null,rh=!1,I7(e)}}ia.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Dl.push(new Kj(e,t)),Dl.length===1&&!rh&&Gj(Wj)};function Kj(e,t){this.fun=e,this.array=t}Kj.prototype.run=function(){this.fun.apply(null,this.array)};ia.title="browser";ia.browser=!0;ia.env={};ia.argv=[];ia.version="";ia.versions={};function Kl(){}ia.on=Kl;ia.addListener=Kl;ia.once=Kl;ia.off=Kl;ia.removeListener=Kl;ia.removeAllListeners=Kl;ia.emit=Kl;ia.prependListener=Kl;ia.prependOnceListener=Kl;ia.listeners=function(e){return[]};ia.binding=function(e){throw new Error("process.binding is not supported")};ia.cwd=function(){return"/"};ia.chdir=function(e){throw new Error("process.chdir is not supported")};ia.umask=function(){return 0};var j7=Vj.exports;const Jr=R7(j7);var jn={},YR;function D7(){if(YR)return jn;YR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(U){return U===null||typeof U!="object"?null:(U=h&&U[h]||U["@@iterator"],typeof U=="function"?U:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function _(U,ee,J){this.props=U,this.context=ee,this.refs=b,this.updater=J||g}_.prototype.isReactComponent={},_.prototype.setState=function(U,ee){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ee,"setState")},_.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function x(){}x.prototype=_.prototype;function S(U,ee,J){this.props=U,this.context=ee,this.refs=b,this.updater=J||g}var E=S.prototype=new x;E.constructor=S,v(E,_.prototype),E.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function j(U,ee,J,ue,be,_e){return J=_e.ref,{$$typeof:e,type:U,key:ee,ref:J!==void 0?J:null,props:_e}}function O(U,ee){return j(U.type,ee,void 0,void 0,void 0,U.props)}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function z(U){var ee={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(J){return ee[J]})}var Y=/\/+/g;function F(U,ee){return typeof U=="object"&&U!==null&&U.key!=null?z(""+U.key):ee.toString(36)}function K(){}function q(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(K,K):(U.status="pending",U.then(function(ee){U.status==="pending"&&(U.status="fulfilled",U.value=ee)},function(ee){U.status==="pending"&&(U.status="rejected",U.reason=ee)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function fe(U,ee,J,ue,be){var _e=typeof U;(_e==="undefined"||_e==="boolean")&&(U=null);var Pe=!1;if(U===null)Pe=!0;else switch(_e){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(U.$$typeof){case e:case t:Pe=!0;break;case d:return Pe=U._init,fe(Pe(U._payload),ee,J,ue,be)}}if(Pe)return be=be(U),Pe=ue===""?"."+F(U,0):ue,C(be)?(J="",Pe!=null&&(J=Pe.replace(Y,"$&/")+"/"),fe(be,ee,J,"",function(Ce){return Ce})):be!=null&&(L(be)&&(be=O(be,J+(be.key==null||U&&U.key===be.key?"":(""+be.key).replace(Y,"$&/")+"/")+Pe)),ee.push(be)),1;Pe=0;var Ne=ue===""?".":ue+":";if(C(U))for(var Re=0;Re<U.length;Re++)ue=U[Re],_e=Ne+F(ue,Re),Pe+=fe(ue,ee,J,_e,be);else if(Re=p(U),typeof Re=="function")for(U=Re.call(U),Re=0;!(ue=U.next()).done;)ue=ue.value,_e=Ne+F(ue,Re++),Pe+=fe(ue,ee,J,_e,be);else if(_e==="object"){if(typeof U.then=="function")return fe(q(U),ee,J,ue,be);throw ee=String(U),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function te(U,ee,J){if(U==null)return U;var ue=[],be=0;return fe(U,ue,"","",function(_e){return ee.call(J,_e,be++)}),ue}function re(U){if(U._status===-1){var ee=U._result;ee=ee(),ee.then(function(J){(U._status===0||U._status===-1)&&(U._status=1,U._result=J)},function(J){(U._status===0||U._status===-1)&&(U._status=2,U._result=J)}),U._status===-1&&(U._status=0,U._result=ee)}if(U._status===1)return U._result.default;throw U._result}var X=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ee))return}else if(typeof Jr=="object"&&typeof Jr.emit=="function"){Jr.emit("uncaughtException",U);return}console.error(U)};function ae(){}return jn.Children={map:te,forEach:function(U,ee,J){te(U,function(){ee.apply(this,arguments)},J)},count:function(U){var ee=0;return te(U,function(){ee++}),ee},toArray:function(U){return te(U,function(ee){return ee})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},jn.Component=_,jn.Fragment=n,jn.Profiler=a,jn.PureComponent=S,jn.StrictMode=r,jn.Suspense=l,jn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,jn.__COMPILER_RUNTIME={__proto__:null,c:function(U){return k.H.useMemoCache(U)}},jn.cache=function(U){return function(){return U.apply(null,arguments)}},jn.cloneElement=function(U,ee,J){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ue=v({},U.props),be=U.key,_e=void 0;if(ee!=null)for(Pe in ee.ref!==void 0&&(_e=void 0),ee.key!==void 0&&(be=""+ee.key),ee)!R.call(ee,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&ee.ref===void 0||(ue[Pe]=ee[Pe]);var Pe=arguments.length-2;if(Pe===1)ue.children=J;else if(1<Pe){for(var Ne=Array(Pe),Re=0;Re<Pe;Re++)Ne[Re]=arguments[Re+2];ue.children=Ne}return j(U.type,be,void 0,void 0,_e,ue)},jn.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:i,_context:U},U},jn.createElement=function(U,ee,J){var ue,be={},_e=null;if(ee!=null)for(ue in ee.key!==void 0&&(_e=""+ee.key),ee)R.call(ee,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(be[ue]=ee[ue]);var Pe=arguments.length-2;if(Pe===1)be.children=J;else if(1<Pe){for(var Ne=Array(Pe),Re=0;Re<Pe;Re++)Ne[Re]=arguments[Re+2];be.children=Ne}if(U&&U.defaultProps)for(ue in Pe=U.defaultProps,Pe)be[ue]===void 0&&(be[ue]=Pe[ue]);return j(U,_e,void 0,void 0,null,be)},jn.createRef=function(){return{current:null}},jn.forwardRef=function(U){return{$$typeof:s,render:U}},jn.isValidElement=L,jn.lazy=function(U){return{$$typeof:d,_payload:{_status:-1,_result:U},_init:re}},jn.memo=function(U,ee){return{$$typeof:u,type:U,compare:ee===void 0?null:ee}},jn.startTransition=function(U){var ee=k.T,J={};k.T=J;try{var ue=U(),be=k.S;be!==null&&be(J,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(ae,X)}catch(_e){X(_e)}finally{k.T=ee}},jn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},jn.use=function(U){return k.H.use(U)},jn.useActionState=function(U,ee,J){return k.H.useActionState(U,ee,J)},jn.useCallback=function(U,ee){return k.H.useCallback(U,ee)},jn.useContext=function(U){return k.H.useContext(U)},jn.useDebugValue=function(){},jn.useDeferredValue=function(U,ee){return k.H.useDeferredValue(U,ee)},jn.useEffect=function(U,ee,J){var ue=k.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(U,ee)},jn.useId=function(){return k.H.useId()},jn.useImperativeHandle=function(U,ee,J){return k.H.useImperativeHandle(U,ee,J)},jn.useInsertionEffect=function(U,ee){return k.H.useInsertionEffect(U,ee)},jn.useLayoutEffect=function(U,ee){return k.H.useLayoutEffect(U,ee)},jn.useMemo=function(U,ee){return k.H.useMemo(U,ee)},jn.useOptimistic=function(U,ee){return k.H.useOptimistic(U,ee)},jn.useReducer=function(U,ee,J){return k.H.useReducer(U,ee,J)},jn.useRef=function(U){return k.H.useRef(U)},jn.useState=function(U){return k.H.useState(U)},jn.useSyncExternalStore=function(U,ee,J){return k.H.useSyncExternalStore(U,ee,J)},jn.useTransition=function(){return k.H.useTransition()},jn.version="19.1.0",jn}var XR;function TC(){return XR||(XR=1,Lx.exports=D7()),Lx.exports}var T=TC();const yt=li(T),Zj=A7({__proto__:null,default:yt},[T]);var $x={exports:{}},xm={},Bx={exports:{}},zx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JR;function M7(){return JR||(JR=1,function(e){function t(te,re){var X=te.length;te.push(re);e:for(;0<X;){var ae=X-1>>>1,U=te[ae];if(0<a(U,re))te[ae]=re,te[X]=U,X=ae;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var re=te[0],X=te.pop();if(X!==re){te[0]=X;e:for(var ae=0,U=te.length,ee=U>>>1;ae<ee;){var J=2*(ae+1)-1,ue=te[J],be=J+1,_e=te[be];if(0>a(ue,X))be<U&&0>a(_e,ue)?(te[ae]=_e,te[be]=X,ae=be):(te[ae]=ue,te[J]=X,ae=J);else if(be<U&&0>a(_e,X))te[ae]=_e,te[be]=X,ae=be;else break e}}return re}function a(te,re){var X=te.sortIndex-re.sortIndex;return X!==0?X:te.id-re.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],d=1,h=null,p=3,g=!1,v=!1,b=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(te){for(var re=n(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=te)r(u),re.sortIndex=re.expirationTime,t(l,re);else break;re=n(u)}}function k(te){if(b=!1,C(te),!v)if(n(l)!==null)v=!0,R||(R=!0,F());else{var re=n(u);re!==null&&fe(k,re.startTime-te)}}var R=!1,j=-1,O=5,L=-1;function z(){return _?!0:!(e.unstable_now()-L<O)}function Y(){if(_=!1,R){var te=e.unstable_now();L=te;var re=!0;try{e:{v=!1,b&&(b=!1,S(j),j=-1),g=!0;var X=p;try{t:{for(C(te),h=n(l);h!==null&&!(h.expirationTime>te&&z());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,p=h.priorityLevel;var U=ae(h.expirationTime<=te);if(te=e.unstable_now(),typeof U=="function"){h.callback=U,C(te),re=!0;break t}h===n(l)&&r(l),C(te)}else r(l);h=n(l)}if(h!==null)re=!0;else{var ee=n(u);ee!==null&&fe(k,ee.startTime-te),re=!1}}break e}finally{h=null,p=X,g=!1}re=void 0}}finally{re?F():R=!1}}}var F;if(typeof E=="function")F=function(){E(Y)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,q=K.port2;K.port1.onmessage=Y,F=function(){q.postMessage(null)}}else F=function(){x(Y,0)};function fe(te,re){j=x(function(){te(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(te){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var X=p;p=re;try{return te()}finally{p=X}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(te,re){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var X=p;p=te;try{return re()}finally{p=X}},e.unstable_scheduleCallback=function(te,re,X){var ae=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ae+X:ae):X=ae,te){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=X+U,te={id:d++,callback:re,priorityLevel:te,startTime:X,expirationTime:U,sortIndex:-1},X>ae?(te.sortIndex=X,t(u,te),n(l)===null&&te===n(u)&&(b?(S(j),j=-1):b=!0,fe(k,X-ae))):(te.sortIndex=U,t(l,te),v||g||(v=!0,R||(R=!0,F()))),te},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(te){var re=p;return function(){var X=p;p=re;try{return te.apply(this,arguments)}finally{p=X}}}}(zx)),zx}var QR;function P7(){return QR||(QR=1,Bx.exports=M7()),Bx.exports}var Ux={exports:{}},Qa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e3;function F7(){if(e3)return Qa;e3=1;var e=TC();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Qa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qa.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(l,u,null,d)},Qa.flushSync=function(l){var u=o.T,d=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=u,r.p=d,r.d.f()}},Qa.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},Qa.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Qa.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=s(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Qa.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=s(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},Qa.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=s(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Qa.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=s(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},Qa.requestFormReset=function(l){r.d.r(l)},Qa.unstable_batchedUpdates=function(l,u){return l(u)},Qa.useFormState=function(l,u,d){return o.H.useFormState(l,u,d)},Qa.useFormStatus=function(){return o.H.useHostTransitionStatus()},Qa.version="19.1.0",Qa}var t3;function Yj(){if(t3)return Ux.exports;t3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ux.exports=F7(),Ux.exports}var n3;function L7(){if(n3)return xm;n3=1;var e=P7(),t=TC(),n=Yj();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var f=c,m=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(m=f.return),c=f.return;while(c)}return f.tag===3?m:null}function o(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function s(c){if(i(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=i(c),f===null)throw Error(r(188));return f!==c?null:c}for(var m=c,w=f;;){var N=m.return;if(N===null)break;var P=N.alternate;if(P===null){if(w=N.return,w!==null){m=w;continue}break}if(N.child===P.child){for(P=N.child;P;){if(P===m)return s(N),c;if(P===w)return s(N),f;P=P.sibling}throw Error(r(188))}if(m.return!==w.return)m=N,w=P;else{for(var oe=!1,Se=N.child;Se;){if(Se===m){oe=!0,m=N,w=P;break}if(Se===w){oe=!0,w=N,m=P;break}Se=Se.sibling}if(!oe){for(Se=P.child;Se;){if(Se===m){oe=!0,m=P,w=N;break}if(Se===w){oe=!0,w=P,m=N;break}Se=Se.sibling}if(!oe)throw Error(r(189))}}if(m.alternate!==w)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?c:f}function u(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=u(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function F(c){return c===null||typeof c!="object"?null:(c=Y&&c[Y]||c["@@iterator"],typeof c=="function"?c:null)}var K=Symbol.for("react.client.reference");function q(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===K?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case v:return"Fragment";case _:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case R:return"SuspenseList";case L:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case g:return"Portal";case E:return(c.displayName||"Context")+".Provider";case S:return(c._context.displayName||"Context")+".Consumer";case C:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case j:return f=c.displayName||null,f!==null?f:q(c.type)||"Memo";case O:f=c._payload,c=c._init;try{return q(c(f))}catch{}}return null}var fe=Array.isArray,te=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ae=[],U=-1;function ee(c){return{current:c}}function J(c){0>U||(c.current=ae[U],ae[U]=null,U--)}function ue(c,f){U++,ae[U]=c.current,c.current=f}var be=ee(null),_e=ee(null),Pe=ee(null),Ne=ee(null);function Re(c,f){switch(ue(Pe,f),ue(_e,c),ue(be,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?xR(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=xR(f),c=SR(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}J(be),ue(be,c)}function Ce(){J(be),J(_e),J(Pe)}function Fe(c){c.memoizedState!==null&&ue(Ne,c);var f=be.current,m=SR(f,c.type);f!==m&&(ue(_e,c),ue(be,m))}function Qe(c){_e.current===c&&(J(be),J(_e)),Ne.current===c&&(J(Ne),gm._currentValue=X)}var Le=Object.prototype.hasOwnProperty,Ie=e.unstable_scheduleCallback,V=e.unstable_cancelCallback,me=e.unstable_shouldYield,Ae=e.unstable_requestPaint,se=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,Q=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Me=e.unstable_NormalPriority,Ee=e.unstable_LowPriority,We=e.unstable_IdlePriority,kt=e.log,at=e.unstable_setDisableYieldValue,_t=null,Dt=null;function jt(c){if(typeof kt=="function"&&at(c),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(_t,c)}catch{}}var Gt=Math.clz32?Math.clz32:G,ye=Math.log,I=Math.LN2;function G(c){return c>>>=0,c===0?32:31-(ye(c)/I|0)|0}var de=256,Oe=4194304;function ve(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function ke(c,f,m){var w=c.pendingLanes;if(w===0)return 0;var N=0,P=c.suspendedLanes,oe=c.pingedLanes;c=c.warmLanes;var Se=w&134217727;return Se!==0?(w=Se&~P,w!==0?N=ve(w):(oe&=Se,oe!==0?N=ve(oe):m||(m=Se&~c,m!==0&&(N=ve(m))))):(Se=w&~P,Se!==0?N=ve(Se):oe!==0?N=ve(oe):m||(m=w&~c,m!==0&&(N=ve(m)))),N===0?0:f!==0&&f!==N&&(f&P)===0&&(P=N&-N,m=f&-f,P>=m||P===32&&(m&4194048)!==0)?f:N}function le(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function ft(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var c=de;return de<<=1,(de&4194048)===0&&(de=256),c}function M(){var c=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),c}function Be(c){for(var f=[],m=0;31>m;m++)f.push(c);return f}function tt(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ge(c,f,m,w,N,P){var oe=c.pendingLanes;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=m,c.entangledLanes&=m,c.errorRecoveryDisabledLanes&=m,c.shellSuspendCounter=0;var Se=c.entanglements,ze=c.expirationTimes,dt=c.hiddenUpdates;for(m=oe&~m;0<m;){var Et=31-Gt(m),It=1<<Et;Se[Et]=0,ze[Et]=-1;var mt=dt[Et];if(mt!==null)for(dt[Et]=null,Et=0;Et<mt.length;Et++){var gt=mt[Et];gt!==null&&(gt.lane&=-536870913)}m&=~It}w!==0&&je(c,w,0),P!==0&&N===0&&c.tag!==0&&(c.suspendedLanes|=P&~(oe&~f))}function je(c,f,m){c.pendingLanes|=f,c.suspendedLanes&=~f;var w=31-Gt(f);c.entangledLanes|=f,c.entanglements[w]=c.entanglements[w]|1073741824|m&4194090}function Ke(c,f){var m=c.entangledLanes|=f;for(c=c.entanglements;m;){var w=31-Gt(m),N=1<<w;N&f|c[w]&f&&(c[w]|=f),m&=~N}}function Nt(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function pe(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function H(){var c=re.p;return c!==0?c:(c=window.event,c===void 0?32:UR(c.type))}function B(c,f){var m=re.p;try{return re.p=c,f()}finally{re.p=m}}var W=Math.random().toString(36).slice(2),he="__reactFiber$"+W,Te="__reactProps$"+W,He="__reactContainer$"+W,pt="__reactEvents$"+W,Vt="__reactListeners$"+W,ut="__reactHandles$"+W,At="__reactResources$"+W,Mt="__reactMarker$"+W;function Xt(c){delete c[he],delete c[Te],delete c[pt],delete c[Vt],delete c[ut]}function Tn(c){var f=c[he];if(f)return f;for(var m=c.parentNode;m;){if(f=m[He]||m[he]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(c=AR(c);c!==null;){if(m=c[he])return m;c=AR(c)}return f}c=m,m=c.parentNode}return null}function zn(c){if(c=c[he]||c[He]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function br(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function vr(c){var f=c[At];return f||(f=c[At]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Dn(c){c[Mt]=!0}var ui=new Set,us={};function ds(c,f){fs(c,f),fs(c+"Capture",f)}function fs(c,f){for(us[c]=f,c=0;c<f.length;c++)ui.add(f[c])}var Vr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hs={},ao={};function Wg(c){return Le.call(ao,c)?!0:Le.call(hs,c)?!1:Vr.test(c)?ao[c]=!0:(hs[c]=!0,!1)}function Io(c,f,m){if(Wg(f))if(m===null)c.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var w=f.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+m)}}function el(c,f,m){if(m===null)c.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+m)}}function $i(c,f,m,w){if(w===null)c.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttributeNS(f,m,""+w)}}var Nu,ps;function tl(c){if(Nu===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);Nu=f&&f[1]||"",ps=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nu+c+ps}var ec=!1;function Yd(c,f){if(!c||ec)return"";ec=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(f){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(gt){var mt=gt}Reflect.construct(c,[],It)}else{try{It.call()}catch(gt){mt=gt}c.call(It.prototype)}}else{try{throw Error()}catch(gt){mt=gt}(It=c())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(gt){if(gt&&mt&&typeof gt.stack=="string")return[gt.stack,mt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=w.DetermineComponentFrameRoot(),oe=P[0],Se=P[1];if(oe&&Se){var ze=oe.split(`
`),dt=Se.split(`
`);for(N=w=0;w<ze.length&&!ze[w].includes("DetermineComponentFrameRoot");)w++;for(;N<dt.length&&!dt[N].includes("DetermineComponentFrameRoot");)N++;if(w===ze.length||N===dt.length)for(w=ze.length-1,N=dt.length-1;1<=w&&0<=N&&ze[w]!==dt[N];)N--;for(;1<=w&&0<=N;w--,N--)if(ze[w]!==dt[N]){if(w!==1||N!==1)do if(w--,N--,0>N||ze[w]!==dt[N]){var Et=`
`+ze[w].replace(" at new "," at ");return c.displayName&&Et.includes("<anonymous>")&&(Et=Et.replace("<anonymous>",c.displayName)),Et}while(1<=w&&0<=N);break}}}finally{ec=!1,Error.prepareStackTrace=m}return(m=c?c.displayName||c.name:"")?tl(m):""}function Un(c){switch(c.tag){case 26:case 27:case 5:return tl(c.type);case 16:return tl("Lazy");case 13:return tl("Suspense");case 19:return tl("SuspenseList");case 0:case 15:return Yd(c.type,!1);case 11:return Yd(c.type.render,!1);case 1:return Yd(c.type,!0);case 31:return tl("Activity");default:return""}}function bp(c){try{var f="";do f+=Un(c),c=c.return;while(c);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function di(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function vp(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Ar(c){var f=vp(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),w=""+c[f];if(!c.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var N=m.get,P=m.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return N.call(this)},set:function(oe){w=""+oe,P.call(this,oe)}}),Object.defineProperty(c,f,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(oe){w=""+oe},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function ms(c){c._valueTracker||(c._valueTracker=Ar(c))}function tc(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var m=f.getValue(),w="";return c&&(w=vp(c)?c.checked?"true":"false":c.value),c=w,c!==m?(f.setValue(c),!0):!1}function Oo(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var wp=/[\n"\\]/g;function Za(c){return c.replace(wp,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function nc(c,f,m,w,N,P,oe,Se){c.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?c.type=oe:c.removeAttribute("type"),f!=null?oe==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+di(f)):c.value!==""+di(f)&&(c.value=""+di(f)):oe!=="submit"&&oe!=="reset"||c.removeAttribute("value"),f!=null?rc(c,oe,di(f)):m!=null?rc(c,oe,di(m)):w!=null&&c.removeAttribute("value"),N==null&&P!=null&&(c.defaultChecked=!!P),N!=null&&(c.checked=N&&typeof N!="function"&&typeof N!="symbol"),Se!=null&&typeof Se!="function"&&typeof Se!="symbol"&&typeof Se!="boolean"?c.name=""+di(Se):c.removeAttribute("name")}function _p(c,f,m,w,N,P,oe,Se){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(c.type=P),f!=null||m!=null){if(!(P!=="submit"&&P!=="reset"||f!=null))return;m=m!=null?""+di(m):"",f=f!=null?""+di(f):m,Se||f===c.value||(c.value=f),c.defaultValue=f}w=w??N,w=typeof w!="function"&&typeof w!="symbol"&&!!w,c.checked=Se?c.checked:!!w,c.defaultChecked=!!w,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(c.name=oe)}function rc(c,f,m){f==="number"&&Oo(c.ownerDocument)===c||c.defaultValue===""+m||(c.defaultValue=""+m)}function nl(c,f,m,w){if(c=c.options,f){f={};for(var N=0;N<m.length;N++)f["$"+m[N]]=!0;for(m=0;m<c.length;m++)N=f.hasOwnProperty("$"+c[m].value),c[m].selected!==N&&(c[m].selected=N),N&&w&&(c[m].defaultSelected=!0)}else{for(m=""+di(m),f=null,N=0;N<c.length;N++){if(c[N].value===m){c[N].selected=!0,w&&(c[N].defaultSelected=!0);return}f!==null||c[N].disabled||(f=c[N])}f!==null&&(f.selected=!0)}}function ac(c,f,m){if(f!=null&&(f=""+di(f),f!==c.value&&(c.value=f),m==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=m!=null?""+di(m):""}function xp(c,f,m,w){if(f==null){if(w!=null){if(m!=null)throw Error(r(92));if(fe(w)){if(1<w.length)throw Error(r(93));w=w[0]}m=w}m==null&&(m=""),f=m}m=di(f),c.defaultValue=m,w=c.textContent,w===m&&w!==""&&w!==null&&(c.value=w)}function ic(c,f){if(f){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=f;return}}c.textContent=f}var Wn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xd(c,f,m){var w=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?w?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":w?c.setProperty(f,m):typeof m!="number"||m===0||Wn.has(f)?f==="float"?c.cssFloat=m:c[f]=(""+m).trim():c[f]=m+"px"}function Kg(c,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,m!=null){for(var w in m)!m.hasOwnProperty(w)||f!=null&&f.hasOwnProperty(w)||(w.indexOf("--")===0?c.setProperty(w,""):w==="float"?c.cssFloat="":c[w]="");for(var N in f)w=f[N],f.hasOwnProperty(N)&&m[N]!==w&&Xd(c,N,w)}else for(var P in f)f.hasOwnProperty(P)&&Xd(c,P,f[P])}function Sp(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rl(c){return oc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var io=null;function Jd(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var al=null,Fr=null;function Bi(c){var f=zn(c);if(f&&(c=f.stateNode)){var m=c[Te]||null;e:switch(c=f.stateNode,f.type){case"input":if(nc(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Za(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var w=m[f];if(w!==c&&w.form===c.form){var N=w[Te]||null;if(!N)throw Error(r(90));nc(w,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(f=0;f<m.length;f++)w=m[f],w.form===c.form&&tc(w)}break e;case"textarea":ac(c,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&nl(c,!!m.multiple,f,!1)}}}var il=!1;function sc(c,f,m){if(il)return c(f,m);il=!0;try{var w=c(f);return w}finally{if(il=!1,(al!==null||Fr!==null)&&(Py(),al&&(f=al,c=Fr,Fr=al=null,Bi(f),c)))for(f=0;f<c.length;f++)Bi(c[f])}}function ol(c,f){var m=c.stateNode;if(m===null)return null;var w=m[Te]||null;if(w===null)return null;m=w[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(c=c.type,w=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!w;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ep=!1;if(ka)try{var Ya={};Object.defineProperty(Ya,"passive",{get:function(){Ep=!0}}),window.addEventListener("test",Ya,Ya),window.removeEventListener("test",Ya,Ya)}catch{Ep=!1}var oo=null,Qd=null,lc=null;function cc(){if(lc)return lc;var c,f=Qd,m=f.length,w,N="value"in oo?oo.value:oo.textContent,P=N.length;for(c=0;c<m&&f[c]===N[c];c++);var oe=m-c;for(w=1;w<=oe&&f[m-w]===N[P-w];w++);return lc=N.slice(c,1<w?1-w:void 0)}function uc(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Ru(){return!0}function Zg(){return!1}function oa(c){function f(m,w,N,P,oe){this._reactName=m,this._targetInst=N,this.type=w,this.nativeEvent=P,this.target=oe,this.currentTarget=null;for(var Se in c)c.hasOwnProperty(Se)&&(m=c[Se],this[Se]=m?m(P):P[Se]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Ru:Zg,this.isPropagationStopped=Zg,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ru)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ru)},persist:function(){},isPersistent:Ru}),f}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ef=oa(sl),gs=d({},sl,{view:0,detail:0}),tf=oa(gs),Iu,Cp,Ou,nf=d({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ll,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ou&&(Ou&&c.type==="mousemove"?(Iu=c.screenX-Ou.screenX,Cp=c.screenY-Ou.screenY):Cp=Iu=0,Ou=c),Iu)},movementY:function(c){return"movementY"in c?c.movementY:Cp}}),rf=oa(nf),kp=d({},nf,{dataTransfer:0}),Yg=oa(kp),af=d({},gs,{relatedTarget:0}),dc=oa(af),of=d({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),Xg=oa(of),X1=d({},sl,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),sf=oa(X1),Ap=d({},sl,{data:0}),lf=oa(Ap),Tp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Np={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Aa[c])?!!f[c]:!1}function ll(){return ju}var Jg=d({},gs,{key:function(c){if(c.key){var f=Tp[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=uc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Np[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ll,charCode:function(c){return c.type==="keypress"?uc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?uc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),cf=oa(Jg),Qg=d({},nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rp=oa(Qg),uf=d({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ll}),Ip=oa(uf),cl=d({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Op=oa(cl),jp=d({},nf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),df=oa(jp),Dp=d({},sl,{newState:0,oldState:0}),ey=oa(Dp),J1=[9,13,27,32],Du=ka&&"CompositionEvent"in window,ys=null;ka&&"documentMode"in document&&(ys=document.documentMode);var Q1=ka&&"TextEvent"in window&&!ys,ff=ka&&(!Du||ys&&8<ys&&11>=ys),hf=" ",ty=!1;function Mp(c,f){switch(c){case"keyup":return J1.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ny(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ul=!1;function ry(c,f){switch(c){case"compositionend":return ny(f);case"keypress":return f.which!==32?null:(ty=!0,hf);case"textInput":return c=f.data,c===hf&&ty?null:c;default:return null}}function e_(c,f){if(ul)return c==="compositionend"||!Du&&Mp(c,f)?(c=cc(),lc=Qd=oo=null,ul=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return ff&&f.locale!=="ko"?null:f.data;default:return null}}var ay={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pf(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!ay[c.type]:f==="textarea"}function Pp(c,f,m,w){al?Fr?Fr.push(w):Fr=[w]:al=w,f=Uy(f,"onChange"),0<f.length&&(m=new ef("onChange","change",null,m,w),c.push({event:m,listeners:f}))}var fc=null,Mu=null;function t_(c){yR(c,0)}function mf(c){var f=br(c);if(tc(f))return c}function Pu(c,f){if(c==="change")return f}var so=!1;if(ka){var Lr;if(ka){var hc="oninput"in document;if(!hc){var hi=document.createElement("div");hi.setAttribute("oninput","return;"),hc=typeof hi.oninput=="function"}Lr=hc}else Lr=!1;so=Lr&&(!document.documentMode||9<document.documentMode)}function iy(){fc&&(fc.detachEvent("onpropertychange",gf),Mu=fc=null)}function gf(c){if(c.propertyName==="value"&&mf(Mu)){var f=[];Pp(f,Mu,c,Jd(c)),sc(t_,f)}}function oy(c,f,m){c==="focusin"?(iy(),fc=f,Mu=m,fc.attachEvent("onpropertychange",gf)):c==="focusout"&&iy()}function dl(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return mf(Mu)}function Fp(c,f){if(c==="click")return mf(f)}function pc(c,f){if(c==="input"||c==="change")return mf(f)}function bs(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Xa=typeof Object.is=="function"?Object.is:bs;function A(c,f){if(Xa(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var m=Object.keys(c),w=Object.keys(f);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var N=m[w];if(!Le.call(f,N)||!Xa(c[N],f[N]))return!1}return!0}function D(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Z(c,f){var m=D(c);c=0;for(var w;m;){if(m.nodeType===3){if(w=c+m.textContent.length,c<=f&&w>=f)return{node:m,offset:f-c};c=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=D(m)}}function ne(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?ne(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function ce(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=Oo(c.document);f instanceof c.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)c=f.contentWindow;else break;f=Oo(c.document)}return f}function we(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var De=ka&&"documentMode"in document&&11>=document.documentMode,$e=null,Ge=null,Ye=null,nt=!1;function qe(c,f,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;nt||$e==null||$e!==Oo(w)||(w=$e,"selectionStart"in w&&we(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ye&&A(Ye,w)||(Ye=w,w=Uy(Ge,"onSelect"),0<w.length&&(f=new ef("onSelect","select",null,f,m),c.push({event:f,listeners:w}),f.target=$e)))}function it(c,f){var m={};return m[c.toLowerCase()]=f.toLowerCase(),m["Webkit"+c]="webkit"+f,m["Moz"+c]="moz"+f,m}var Ve={animationend:it("Animation","AnimationEnd"),animationiteration:it("Animation","AnimationIteration"),animationstart:it("Animation","AnimationStart"),transitionrun:it("Transition","TransitionRun"),transitionstart:it("Transition","TransitionStart"),transitioncancel:it("Transition","TransitionCancel"),transitionend:it("Transition","TransitionEnd")},et={},ot={};ka&&(ot=document.createElement("div").style,"AnimationEvent"in window||(delete Ve.animationend.animation,delete Ve.animationiteration.animation,delete Ve.animationstart.animation),"TransitionEvent"in window||delete Ve.transitionend.transition);function Xe(c){if(et[c])return et[c];if(!Ve[c])return c;var f=Ve[c],m;for(m in f)if(f.hasOwnProperty(m)&&m in ot)return et[c]=f[m];return c}var ht=Xe("animationend"),bt=Xe("animationiteration"),wt=Xe("animationstart"),St=Xe("transitionrun"),zt=Xe("transitionstart"),Kt=Xe("transitioncancel"),Ft=Xe("transitionend"),Ht=new Map,Zt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zt.push("scrollEnd");function Lt(c,f){Ht.set(c,f),ds(f,[c])}var Qt=new WeakMap;function pn(c,f){if(typeof c=="object"&&c!==null){var m=Qt.get(c);return m!==void 0?m:(f={value:c,source:f,stack:bp(f)},Qt.set(c,f),f)}return{value:c,source:f,stack:bp(f)}}var gn=[],Nn=0,Ua=0;function xn(){for(var c=Nn,f=Ua=Nn=0;f<c;){var m=gn[f];gn[f++]=null;var w=gn[f];gn[f++]=null;var N=gn[f];gn[f++]=null;var P=gn[f];if(gn[f++]=null,w!==null&&N!==null){var oe=w.pending;oe===null?N.next=N:(N.next=oe.next,oe.next=N),w.pending=N}P!==0&&Ta(m,N,P)}}function ta(c,f,m,w){gn[Nn++]=c,gn[Nn++]=f,gn[Nn++]=m,gn[Nn++]=w,Ua|=w,c.lanes|=w,c=c.alternate,c!==null&&(c.lanes|=w)}function sa(c,f,m,w){return ta(c,f,m,w),lo(c)}function jo(c,f){return ta(c,null,null,f),lo(c)}function Ta(c,f,m){c.lanes|=m;var w=c.alternate;w!==null&&(w.lanes|=m);for(var N=!1,P=c.return;P!==null;)P.childLanes|=m,w=P.alternate,w!==null&&(w.childLanes|=m),P.tag===22&&(c=P.stateNode,c===null||c._visibility&1||(N=!0)),c=P,P=P.return;return c.tag===3?(P=c.stateNode,N&&f!==null&&(N=31-Gt(m),c=P.hiddenUpdates,w=c[N],w===null?c[N]=[f]:w.push(f),f.lane=m|536870912),P):null}function lo(c){if(50<lm)throw lm=0,sx=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var vs={};function uz(c,f,m,w){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(c,f,m,w){return new uz(c,f,m,w)}function n_(c){return c=c.prototype,!(!c||!c.isReactComponent)}function fl(c,f){var m=c.alternate;return m===null?(m=zi(c.tag,f,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=f,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&65011712,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,f=c.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m.refCleanup=c.refCleanup,m}function nT(c,f){c.flags&=65011714;var m=c.alternate;return m===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,f=m.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function sy(c,f,m,w,N,P){var oe=0;if(w=c,typeof c=="function")n_(c)&&(oe=1);else if(typeof c=="string")oe=f7(c,m,be.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case L:return c=zi(31,m,f,N),c.elementType=L,c.lanes=P,c;case v:return Fu(m.children,N,P,f);case b:oe=8,N|=24;break;case _:return c=zi(12,m,f,N|2),c.elementType=_,c.lanes=P,c;case k:return c=zi(13,m,f,N),c.elementType=k,c.lanes=P,c;case R:return c=zi(19,m,f,N),c.elementType=R,c.lanes=P,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case x:case E:oe=10;break e;case S:oe=9;break e;case C:oe=11;break e;case j:oe=14;break e;case O:oe=16,w=null;break e}oe=29,m=Error(r(130,c===null?"null":typeof c,"")),w=null}return f=zi(oe,m,f,N),f.elementType=c,f.type=w,f.lanes=P,f}function Fu(c,f,m,w){return c=zi(7,c,w,f),c.lanes=m,c}function r_(c,f,m){return c=zi(6,c,null,f),c.lanes=m,c}function a_(c,f,m){return f=zi(4,c.children!==null?c.children:[],c.key,f),f.lanes=m,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var yf=[],bf=0,ly=null,cy=0,co=[],uo=0,Lu=null,hl=1,pl="";function $u(c,f){yf[bf++]=cy,yf[bf++]=ly,ly=c,cy=f}function rT(c,f,m){co[uo++]=hl,co[uo++]=pl,co[uo++]=Lu,Lu=c;var w=hl;c=pl;var N=32-Gt(w)-1;w&=~(1<<N),m+=1;var P=32-Gt(f)+N;if(30<P){var oe=N-N%5;P=(w&(1<<oe)-1).toString(32),w>>=oe,N-=oe,hl=1<<32-Gt(f)+N|m<<N|w,pl=P+c}else hl=1<<P|m<<N|w,pl=c}function i_(c){c.return!==null&&($u(c,1),rT(c,1,0))}function o_(c){for(;c===ly;)ly=yf[--bf],yf[bf]=null,cy=yf[--bf],yf[bf]=null;for(;c===Lu;)Lu=co[--uo],co[uo]=null,pl=co[--uo],co[uo]=null,hl=co[--uo],co[uo]=null}var pi=null,Yr=null,ir=!1,Bu=null,ws=!1,s_=Error(r(519));function zu(c){var f=Error(r(418,""));throw Bp(pn(f,c)),s_}function aT(c){var f=c.stateNode,m=c.type,w=c.memoizedProps;switch(f[he]=c,f[Te]=w,m){case"dialog":qn("cancel",f),qn("close",f);break;case"iframe":case"object":case"embed":qn("load",f);break;case"video":case"audio":for(m=0;m<um.length;m++)qn(um[m],f);break;case"source":qn("error",f);break;case"img":case"image":case"link":qn("error",f),qn("load",f);break;case"details":qn("toggle",f);break;case"input":qn("invalid",f),_p(f,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),ms(f);break;case"select":qn("invalid",f);break;case"textarea":qn("invalid",f),xp(f,w.value,w.defaultValue,w.children),ms(f)}m=w.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||w.suppressHydrationWarning===!0||_R(f.textContent,m)?(w.popover!=null&&(qn("beforetoggle",f),qn("toggle",f)),w.onScroll!=null&&qn("scroll",f),w.onScrollEnd!=null&&qn("scrollend",f),w.onClick!=null&&(f.onclick=Hy),f=!0):f=!1,f||zu(c)}function iT(c){for(pi=c.return;pi;)switch(pi.tag){case 5:case 13:ws=!1;return;case 27:case 3:ws=!0;return;default:pi=pi.return}}function Lp(c){if(c!==pi)return!1;if(!ir)return iT(c),ir=!0,!1;var f=c.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=c.type,m=!(m!=="form"&&m!=="button")||Sx(c.type,c.memoizedProps)),m=!m),m&&Yr&&zu(c),iT(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(m=c.data,m==="/$"){if(f===0){Yr=Mo(c.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;c=c.nextSibling}Yr=null}}else f===27?(f=Yr,Rc(c.type)?(c=Ax,Ax=null,Yr=c):Yr=f):Yr=pi?Mo(c.stateNode.nextSibling):null;return!0}function $p(){Yr=pi=null,ir=!1}function oT(){var c=Bu;return c!==null&&(Ai===null?Ai=c:Ai.push.apply(Ai,c),Bu=null),c}function Bp(c){Bu===null?Bu=[c]:Bu.push(c)}var l_=ee(null),Uu=null,ml=null;function mc(c,f,m){ue(l_,f._currentValue),f._currentValue=m}function gl(c){c._currentValue=l_.current,J(l_)}function c_(c,f,m){for(;c!==null;){var w=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),c===m)break;c=c.return}}function u_(c,f,m,w){var N=c.child;for(N!==null&&(N.return=c);N!==null;){var P=N.dependencies;if(P!==null){var oe=N.child;P=P.firstContext;e:for(;P!==null;){var Se=P;P=N;for(var ze=0;ze<f.length;ze++)if(Se.context===f[ze]){P.lanes|=m,Se=P.alternate,Se!==null&&(Se.lanes|=m),c_(P.return,m,c),w||(oe=null);break e}P=Se.next}}else if(N.tag===18){if(oe=N.return,oe===null)throw Error(r(341));oe.lanes|=m,P=oe.alternate,P!==null&&(P.lanes|=m),c_(oe,m,c),oe=null}else oe=N.child;if(oe!==null)oe.return=N;else for(oe=N;oe!==null;){if(oe===c){oe=null;break}if(N=oe.sibling,N!==null){N.return=oe.return,oe=N;break}oe=oe.return}N=oe}}function zp(c,f,m,w){c=null;for(var N=f,P=!1;N!==null;){if(!P){if((N.flags&524288)!==0)P=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var oe=N.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var Se=N.type;Xa(N.pendingProps.value,oe.value)||(c!==null?c.push(Se):c=[Se])}}else if(N===Ne.current){if(oe=N.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(c!==null?c.push(gm):c=[gm])}N=N.return}c!==null&&u_(f,c,m,w),f.flags|=262144}function uy(c){for(c=c.firstContext;c!==null;){if(!Xa(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Hu(c){Uu=c,ml=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Ja(c){return sT(Uu,c)}function dy(c,f){return Uu===null&&Hu(c),sT(c,f)}function sT(c,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},ml===null){if(c===null)throw Error(r(308));ml=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else ml=ml.next=f;return m}var dz=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(m,w){c.push(w)}};this.abort=function(){f.aborted=!0,c.forEach(function(m){return m()})}},fz=e.unstable_scheduleCallback,hz=e.unstable_NormalPriority,ga={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function d_(){return{controller:new dz,data:new Map,refCount:0}}function Up(c){c.refCount--,c.refCount===0&&fz(hz,function(){c.controller.abort()})}var Hp=null,f_=0,vf=0,wf=null;function pz(c,f){if(Hp===null){var m=Hp=[];f_=0,vf=px(),wf={status:"pending",value:void 0,then:function(w){m.push(w)}}}return f_++,f.then(lT,lT),f}function lT(){if(--f_===0&&Hp!==null){wf!==null&&(wf.status="fulfilled");var c=Hp;Hp=null,vf=0,wf=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function mz(c,f){var m=[],w={status:"pending",value:null,reason:null,then:function(N){m.push(N)}};return c.then(function(){w.status="fulfilled",w.value=f;for(var N=0;N<m.length;N++)(0,m[N])(f)},function(N){for(w.status="rejected",w.reason=N,N=0;N<m.length;N++)(0,m[N])(void 0)}),w}var cT=te.S;te.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&pz(c,f),cT!==null&&cT(c,f)};var qu=ee(null);function h_(){var c=qu.current;return c!==null?c:jr.pooledCache}function fy(c,f){f===null?ue(qu,qu.current):ue(qu,f.pool)}function uT(){var c=h_();return c===null?null:{parent:ga._currentValue,pool:c}}var qp=Error(r(460)),dT=Error(r(474)),hy=Error(r(542)),p_={then:function(){}};function fT(c){return c=c.status,c==="fulfilled"||c==="rejected"}function py(){}function hT(c,f,m){switch(m=c[m],m===void 0?c.push(f):m!==f&&(f.then(py,py),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,mT(c),c;default:if(typeof f.status=="string")f.then(py,py);else{if(c=jr,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(w){if(f.status==="pending"){var N=f;N.status="fulfilled",N.value=w}},function(w){if(f.status==="pending"){var N=f;N.status="rejected",N.reason=w}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,mT(c),c}throw Vp=f,qp}}var Vp=null;function pT(){if(Vp===null)throw Error(r(459));var c=Vp;return Vp=null,c}function mT(c){if(c===qp||c===hy)throw Error(r(483))}var gc=!1;function m_(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function g_(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function yc(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function bc(c,f,m){var w=c.updateQueue;if(w===null)return null;if(w=w.shared,(hr&2)!==0){var N=w.pending;return N===null?f.next=f:(f.next=N.next,N.next=f),w.pending=f,f=lo(c),Ta(c,null,m),f}return ta(c,w,f,m),lo(c)}function Gp(c,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var w=f.lanes;w&=c.pendingLanes,m|=w,f.lanes=m,Ke(c,m)}}function y_(c,f){var m=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var N=null,P=null;if(m=m.firstBaseUpdate,m!==null){do{var oe={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};P===null?N=P=oe:P=P.next=oe,m=m.next}while(m!==null);P===null?N=P=f:P=P.next=f}else N=P=f;m={baseState:w.baseState,firstBaseUpdate:N,lastBaseUpdate:P,shared:w.shared,callbacks:w.callbacks},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=f}var b_=!1;function Wp(){if(b_){var c=wf;if(c!==null)throw c}}function Kp(c,f,m,w){b_=!1;var N=c.updateQueue;gc=!1;var P=N.firstBaseUpdate,oe=N.lastBaseUpdate,Se=N.shared.pending;if(Se!==null){N.shared.pending=null;var ze=Se,dt=ze.next;ze.next=null,oe===null?P=dt:oe.next=dt,oe=ze;var Et=c.alternate;Et!==null&&(Et=Et.updateQueue,Se=Et.lastBaseUpdate,Se!==oe&&(Se===null?Et.firstBaseUpdate=dt:Se.next=dt,Et.lastBaseUpdate=ze))}if(P!==null){var It=N.baseState;oe=0,Et=dt=ze=null,Se=P;do{var mt=Se.lane&-536870913,gt=mt!==Se.lane;if(gt?(Kn&mt)===mt:(w&mt)===mt){mt!==0&&mt===vf&&(b_=!0),Et!==null&&(Et=Et.next={lane:0,tag:Se.tag,payload:Se.payload,callback:null,next:null});e:{var Sn=c,yn=Se;mt=f;var xr=m;switch(yn.tag){case 1:if(Sn=yn.payload,typeof Sn=="function"){It=Sn.call(xr,It,mt);break e}It=Sn;break e;case 3:Sn.flags=Sn.flags&-65537|128;case 0:if(Sn=yn.payload,mt=typeof Sn=="function"?Sn.call(xr,It,mt):Sn,mt==null)break e;It=d({},It,mt);break e;case 2:gc=!0}}mt=Se.callback,mt!==null&&(c.flags|=64,gt&&(c.flags|=8192),gt=N.callbacks,gt===null?N.callbacks=[mt]:gt.push(mt))}else gt={lane:mt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},Et===null?(dt=Et=gt,ze=It):Et=Et.next=gt,oe|=mt;if(Se=Se.next,Se===null){if(Se=N.shared.pending,Se===null)break;gt=Se,Se=gt.next,gt.next=null,N.lastBaseUpdate=gt,N.shared.pending=null}}while(!0);Et===null&&(ze=It),N.baseState=ze,N.firstBaseUpdate=dt,N.lastBaseUpdate=Et,P===null&&(N.shared.lanes=0),kc|=oe,c.lanes=oe,c.memoizedState=It}}function gT(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function yT(c,f){var m=c.callbacks;if(m!==null)for(c.callbacks=null,c=0;c<m.length;c++)gT(m[c],f)}var _f=ee(null),my=ee(0);function bT(c,f){c=Sl,ue(my,c),ue(_f,f),Sl=c|f.baseLanes}function v_(){ue(my,Sl),ue(_f,_f.current)}function w_(){Sl=my.current,J(_f),J(my)}var vc=0,Ln=null,wr=null,la=null,gy=!1,xf=!1,Vu=!1,yy=0,Zp=0,Sf=null,gz=0;function na(){throw Error(r(321))}function __(c,f){if(f===null)return!1;for(var m=0;m<f.length&&m<c.length;m++)if(!Xa(c[m],f[m]))return!1;return!0}function x_(c,f,m,w,N,P){return vc=P,Ln=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,te.H=c===null||c.memoizedState===null?tN:nN,Vu=!1,P=m(w,N),Vu=!1,xf&&(P=wT(f,m,w,N)),vT(c),P}function vT(c){te.H=Sy;var f=wr!==null&&wr.next!==null;if(vc=0,la=wr=Ln=null,gy=!1,Zp=0,Sf=null,f)throw Error(r(300));c===null||Na||(c=c.dependencies,c!==null&&uy(c)&&(Na=!0))}function wT(c,f,m,w){Ln=c;var N=0;do{if(xf&&(Sf=null),Zp=0,xf=!1,25<=N)throw Error(r(301));if(N+=1,la=wr=null,c.updateQueue!=null){var P=c.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}te.H=Sz,P=f(m,w)}while(xf);return P}function yz(){var c=te.H,f=c.useState()[0];return f=typeof f.then=="function"?Yp(f):f,c=c.useState()[0],(wr!==null?wr.memoizedState:null)!==c&&(Ln.flags|=1024),f}function S_(){var c=yy!==0;return yy=0,c}function E_(c,f,m){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~m}function C_(c){if(gy){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}gy=!1}vc=0,la=wr=Ln=null,xf=!1,Zp=yy=0,Sf=null}function Ci(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return la===null?Ln.memoizedState=la=c:la=la.next=c,la}function ca(){if(wr===null){var c=Ln.alternate;c=c!==null?c.memoizedState:null}else c=wr.next;var f=la===null?Ln.memoizedState:la.next;if(f!==null)la=f,wr=c;else{if(c===null)throw Ln.alternate===null?Error(r(467)):Error(r(310));wr=c,c={memoizedState:wr.memoizedState,baseState:wr.baseState,baseQueue:wr.baseQueue,queue:wr.queue,next:null},la===null?Ln.memoizedState=la=c:la=la.next=c}return la}function k_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yp(c){var f=Zp;return Zp+=1,Sf===null&&(Sf=[]),c=hT(Sf,c,f),f=Ln,(la===null?f.memoizedState:la.next)===null&&(f=f.alternate,te.H=f===null||f.memoizedState===null?tN:nN),c}function by(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Yp(c);if(c.$$typeof===E)return Ja(c)}throw Error(r(438,String(c)))}function A_(c){var f=null,m=Ln.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var w=Ln.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(f={data:w.data.map(function(N){return N.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=k_(),Ln.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(c),w=0;w<c;w++)m[w]=z;return f.index++,m}function yl(c,f){return typeof f=="function"?f(c):f}function vy(c){var f=ca();return T_(f,wr,c)}function T_(c,f,m){var w=c.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=m;var N=c.baseQueue,P=w.pending;if(P!==null){if(N!==null){var oe=N.next;N.next=P.next,P.next=oe}f.baseQueue=N=P,w.pending=null}if(P=c.baseState,N===null)c.memoizedState=P;else{f=N.next;var Se=oe=null,ze=null,dt=f,Et=!1;do{var It=dt.lane&-536870913;if(It!==dt.lane?(Kn&It)===It:(vc&It)===It){var mt=dt.revertLane;if(mt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),It===vf&&(Et=!0);else if((vc&mt)===mt){dt=dt.next,mt===vf&&(Et=!0);continue}else It={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(Se=ze=It,oe=P):ze=ze.next=It,Ln.lanes|=mt,kc|=mt;It=dt.action,Vu&&m(P,It),P=dt.hasEagerState?dt.eagerState:m(P,It)}else mt={lane:It,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(Se=ze=mt,oe=P):ze=ze.next=mt,Ln.lanes|=It,kc|=It;dt=dt.next}while(dt!==null&&dt!==f);if(ze===null?oe=P:ze.next=Se,!Xa(P,c.memoizedState)&&(Na=!0,Et&&(m=wf,m!==null)))throw m;c.memoizedState=P,c.baseState=oe,c.baseQueue=ze,w.lastRenderedState=P}return N===null&&(w.lanes=0),[c.memoizedState,w.dispatch]}function N_(c){var f=ca(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var w=m.dispatch,N=m.pending,P=f.memoizedState;if(N!==null){m.pending=null;var oe=N=N.next;do P=c(P,oe.action),oe=oe.next;while(oe!==N);Xa(P,f.memoizedState)||(Na=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),m.lastRenderedState=P}return[P,w]}function _T(c,f,m){var w=Ln,N=ca(),P=ir;if(P){if(m===void 0)throw Error(r(407));m=m()}else m=f();var oe=!Xa((wr||N).memoizedState,m);oe&&(N.memoizedState=m,Na=!0),N=N.queue;var Se=ET.bind(null,w,N,c);if(Xp(2048,8,Se,[c]),N.getSnapshot!==f||oe||la!==null&&la.memoizedState.tag&1){if(w.flags|=2048,Ef(9,wy(),ST.bind(null,w,N,m,f),null),jr===null)throw Error(r(349));P||(vc&124)!==0||xT(w,f,m)}return m}function xT(c,f,m){c.flags|=16384,c={getSnapshot:f,value:m},f=Ln.updateQueue,f===null?(f=k_(),Ln.updateQueue=f,f.stores=[c]):(m=f.stores,m===null?f.stores=[c]:m.push(c))}function ST(c,f,m,w){f.value=m,f.getSnapshot=w,CT(f)&&kT(c)}function ET(c,f,m){return m(function(){CT(f)&&kT(c)})}function CT(c){var f=c.getSnapshot;c=c.value;try{var m=f();return!Xa(c,m)}catch{return!0}}function kT(c){var f=jo(c,2);f!==null&&Gi(f,c,2)}function R_(c){var f=Ci();if(typeof c=="function"){var m=c;if(c=m(),Vu){jt(!0);try{m()}finally{jt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:c},f}function AT(c,f,m,w){return c.baseState=m,T_(c,wr,typeof w=="function"?w:yl)}function bz(c,f,m,w,N){if(xy(c))throw Error(r(485));if(c=f.action,c!==null){var P={payload:N,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){P.listeners.push(oe)}};te.T!==null?m(!0):P.isTransition=!1,w(P),m=f.pending,m===null?(P.next=f.pending=P,TT(f,P)):(P.next=m.next,f.pending=m.next=P)}}function TT(c,f){var m=f.action,w=f.payload,N=c.state;if(f.isTransition){var P=te.T,oe={};te.T=oe;try{var Se=m(N,w),ze=te.S;ze!==null&&ze(oe,Se),NT(c,f,Se)}catch(dt){I_(c,f,dt)}finally{te.T=P}}else try{P=m(N,w),NT(c,f,P)}catch(dt){I_(c,f,dt)}}function NT(c,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(w){RT(c,f,w)},function(w){return I_(c,f,w)}):RT(c,f,m)}function RT(c,f,m){f.status="fulfilled",f.value=m,IT(f),c.state=m,f=c.pending,f!==null&&(m=f.next,m===f?c.pending=null:(m=m.next,f.next=m,TT(c,m)))}function I_(c,f,m){var w=c.pending;if(c.pending=null,w!==null){w=w.next;do f.status="rejected",f.reason=m,IT(f),f=f.next;while(f!==w)}c.action=null}function IT(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function OT(c,f){return f}function jT(c,f){if(ir){var m=jr.formState;if(m!==null){e:{var w=Ln;if(ir){if(Yr){t:{for(var N=Yr,P=ws;N.nodeType!==8;){if(!P){N=null;break t}if(N=Mo(N.nextSibling),N===null){N=null;break t}}P=N.data,N=P==="F!"||P==="F"?N:null}if(N){Yr=Mo(N.nextSibling),w=N.data==="F!";break e}}zu(w)}w=!1}w&&(f=m[0])}}return m=Ci(),m.memoizedState=m.baseState=f,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:OT,lastRenderedState:f},m.queue=w,m=JT.bind(null,Ln,w),w.dispatch=m,w=R_(!1),P=P_.bind(null,Ln,!1,w.queue),w=Ci(),N={state:f,dispatch:null,action:c,pending:null},w.queue=N,m=bz.bind(null,Ln,N,P,m),N.dispatch=m,w.memoizedState=c,[f,m,!1]}function DT(c){var f=ca();return MT(f,wr,c)}function MT(c,f,m){if(f=T_(c,f,OT)[0],c=vy(yl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var w=Yp(f)}catch(oe){throw oe===qp?hy:oe}else w=f;f=ca();var N=f.queue,P=N.dispatch;return m!==f.memoizedState&&(Ln.flags|=2048,Ef(9,wy(),vz.bind(null,N,m),null)),[w,P,c]}function vz(c,f){c.action=f}function PT(c){var f=ca(),m=wr;if(m!==null)return MT(f,m,c);ca(),f=f.memoizedState,m=ca();var w=m.queue.dispatch;return m.memoizedState=c,[f,w,!1]}function Ef(c,f,m,w){return c={tag:c,create:m,deps:w,inst:f,next:null},f=Ln.updateQueue,f===null&&(f=k_(),Ln.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=c.next=c:(w=m.next,m.next=c,c.next=w,f.lastEffect=c),c}function wy(){return{destroy:void 0,resource:void 0}}function FT(){return ca().memoizedState}function _y(c,f,m,w){var N=Ci();w=w===void 0?null:w,Ln.flags|=c,N.memoizedState=Ef(1|f,wy(),m,w)}function Xp(c,f,m,w){var N=ca();w=w===void 0?null:w;var P=N.memoizedState.inst;wr!==null&&w!==null&&__(w,wr.memoizedState.deps)?N.memoizedState=Ef(f,P,m,w):(Ln.flags|=c,N.memoizedState=Ef(1|f,P,m,w))}function LT(c,f){_y(8390656,8,c,f)}function $T(c,f){Xp(2048,8,c,f)}function BT(c,f){return Xp(4,2,c,f)}function zT(c,f){return Xp(4,4,c,f)}function UT(c,f){if(typeof f=="function"){c=c();var m=f(c);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function HT(c,f,m){m=m!=null?m.concat([c]):null,Xp(4,4,UT.bind(null,f,c),m)}function O_(){}function qT(c,f){var m=ca();f=f===void 0?null:f;var w=m.memoizedState;return f!==null&&__(f,w[1])?w[0]:(m.memoizedState=[c,f],c)}function VT(c,f){var m=ca();f=f===void 0?null:f;var w=m.memoizedState;if(f!==null&&__(f,w[1]))return w[0];if(w=c(),Vu){jt(!0);try{c()}finally{jt(!1)}}return m.memoizedState=[w,f],w}function j_(c,f,m){return m===void 0||(vc&1073741824)!==0?c.memoizedState=f:(c.memoizedState=m,c=KN(),Ln.lanes|=c,kc|=c,m)}function GT(c,f,m,w){return Xa(m,f)?m:_f.current!==null?(c=j_(c,m,w),Xa(c,f)||(Na=!0),c):(vc&42)===0?(Na=!0,c.memoizedState=m):(c=KN(),Ln.lanes|=c,kc|=c,f)}function WT(c,f,m,w,N){var P=re.p;re.p=P!==0&&8>P?P:8;var oe=te.T,Se={};te.T=Se,P_(c,!1,f,m);try{var ze=N(),dt=te.S;if(dt!==null&&dt(Se,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var Et=mz(ze,w);Jp(c,f,Et,Vi(c))}else Jp(c,f,w,Vi(c))}catch(It){Jp(c,f,{then:function(){},status:"rejected",reason:It},Vi())}finally{re.p=P,te.T=oe}}function wz(){}function D_(c,f,m,w){if(c.tag!==5)throw Error(r(476));var N=KT(c).queue;WT(c,N,f,X,m===null?wz:function(){return ZT(c),m(w)})}function KT(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:X},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:m},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function ZT(c){var f=KT(c).next.queue;Jp(c,f,{},Vi())}function M_(){return Ja(gm)}function YT(){return ca().memoizedState}function XT(){return ca().memoizedState}function _z(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var m=Vi();c=yc(m);var w=bc(f,c,m);w!==null&&(Gi(w,f,m),Gp(w,f,m)),f={cache:d_()},c.payload=f;return}f=f.return}}function xz(c,f,m){var w=Vi();m={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},xy(c)?QT(f,m):(m=sa(c,f,m,w),m!==null&&(Gi(m,c,w),eN(m,f,w)))}function JT(c,f,m){var w=Vi();Jp(c,f,m,w)}function Jp(c,f,m,w){var N={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(xy(c))QT(f,N);else{var P=c.alternate;if(c.lanes===0&&(P===null||P.lanes===0)&&(P=f.lastRenderedReducer,P!==null))try{var oe=f.lastRenderedState,Se=P(oe,m);if(N.hasEagerState=!0,N.eagerState=Se,Xa(Se,oe))return ta(c,f,N,0),jr===null&&xn(),!1}catch{}finally{}if(m=sa(c,f,N,w),m!==null)return Gi(m,c,w),eN(m,f,w),!0}return!1}function P_(c,f,m,w){if(w={lane:2,revertLane:px(),action:w,hasEagerState:!1,eagerState:null,next:null},xy(c)){if(f)throw Error(r(479))}else f=sa(c,m,w,2),f!==null&&Gi(f,c,2)}function xy(c){var f=c.alternate;return c===Ln||f!==null&&f===Ln}function QT(c,f){xf=gy=!0;var m=c.pending;m===null?f.next=f:(f.next=m.next,m.next=f),c.pending=f}function eN(c,f,m){if((m&4194048)!==0){var w=f.lanes;w&=c.pendingLanes,m|=w,f.lanes=m,Ke(c,m)}}var Sy={readContext:Ja,use:by,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useInsertionEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useSyncExternalStore:na,useId:na,useHostTransitionStatus:na,useFormState:na,useActionState:na,useOptimistic:na,useMemoCache:na,useCacheRefresh:na},tN={readContext:Ja,use:by,useCallback:function(c,f){return Ci().memoizedState=[c,f===void 0?null:f],c},useContext:Ja,useEffect:LT,useImperativeHandle:function(c,f,m){m=m!=null?m.concat([c]):null,_y(4194308,4,UT.bind(null,f,c),m)},useLayoutEffect:function(c,f){return _y(4194308,4,c,f)},useInsertionEffect:function(c,f){_y(4,2,c,f)},useMemo:function(c,f){var m=Ci();f=f===void 0?null:f;var w=c();if(Vu){jt(!0);try{c()}finally{jt(!1)}}return m.memoizedState=[w,f],w},useReducer:function(c,f,m){var w=Ci();if(m!==void 0){var N=m(f);if(Vu){jt(!0);try{m(f)}finally{jt(!1)}}}else N=f;return w.memoizedState=w.baseState=N,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:N},w.queue=c,c=c.dispatch=xz.bind(null,Ln,c),[w.memoizedState,c]},useRef:function(c){var f=Ci();return c={current:c},f.memoizedState=c},useState:function(c){c=R_(c);var f=c.queue,m=JT.bind(null,Ln,f);return f.dispatch=m,[c.memoizedState,m]},useDebugValue:O_,useDeferredValue:function(c,f){var m=Ci();return j_(m,c,f)},useTransition:function(){var c=R_(!1);return c=WT.bind(null,Ln,c.queue,!0,!1),Ci().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,m){var w=Ln,N=Ci();if(ir){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),jr===null)throw Error(r(349));(Kn&124)!==0||xT(w,f,m)}N.memoizedState=m;var P={value:m,getSnapshot:f};return N.queue=P,LT(ET.bind(null,w,P,c),[c]),w.flags|=2048,Ef(9,wy(),ST.bind(null,w,P,m,f),null),m},useId:function(){var c=Ci(),f=jr.identifierPrefix;if(ir){var m=pl,w=hl;m=(w&~(1<<32-Gt(w)-1)).toString(32)+m,f=""+f+"R"+m,m=yy++,0<m&&(f+="H"+m.toString(32)),f+=""}else m=gz++,f=""+f+"r"+m.toString(32)+"";return c.memoizedState=f},useHostTransitionStatus:M_,useFormState:jT,useActionState:jT,useOptimistic:function(c){var f=Ci();f.memoizedState=f.baseState=c;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=P_.bind(null,Ln,!0,m),m.dispatch=f,[c,f]},useMemoCache:A_,useCacheRefresh:function(){return Ci().memoizedState=_z.bind(null,Ln)}},nN={readContext:Ja,use:by,useCallback:qT,useContext:Ja,useEffect:$T,useImperativeHandle:HT,useInsertionEffect:BT,useLayoutEffect:zT,useMemo:VT,useReducer:vy,useRef:FT,useState:function(){return vy(yl)},useDebugValue:O_,useDeferredValue:function(c,f){var m=ca();return GT(m,wr.memoizedState,c,f)},useTransition:function(){var c=vy(yl)[0],f=ca().memoizedState;return[typeof c=="boolean"?c:Yp(c),f]},useSyncExternalStore:_T,useId:YT,useHostTransitionStatus:M_,useFormState:DT,useActionState:DT,useOptimistic:function(c,f){var m=ca();return AT(m,wr,c,f)},useMemoCache:A_,useCacheRefresh:XT},Sz={readContext:Ja,use:by,useCallback:qT,useContext:Ja,useEffect:$T,useImperativeHandle:HT,useInsertionEffect:BT,useLayoutEffect:zT,useMemo:VT,useReducer:N_,useRef:FT,useState:function(){return N_(yl)},useDebugValue:O_,useDeferredValue:function(c,f){var m=ca();return wr===null?j_(m,c,f):GT(m,wr.memoizedState,c,f)},useTransition:function(){var c=N_(yl)[0],f=ca().memoizedState;return[typeof c=="boolean"?c:Yp(c),f]},useSyncExternalStore:_T,useId:YT,useHostTransitionStatus:M_,useFormState:PT,useActionState:PT,useOptimistic:function(c,f){var m=ca();return wr!==null?AT(m,wr,c,f):(m.baseState=c,[c,m.queue.dispatch])},useMemoCache:A_,useCacheRefresh:XT},Cf=null,Qp=0;function Ey(c){var f=Qp;return Qp+=1,Cf===null&&(Cf=[]),hT(Cf,c,f)}function em(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Cy(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function rN(c){var f=c._init;return f(c._payload)}function aN(c){function f(rt,Ze){if(c){var ct=rt.deletions;ct===null?(rt.deletions=[Ze],rt.flags|=16):ct.push(Ze)}}function m(rt,Ze){if(!c)return null;for(;Ze!==null;)f(rt,Ze),Ze=Ze.sibling;return null}function w(rt){for(var Ze=new Map;rt!==null;)rt.key!==null?Ze.set(rt.key,rt):Ze.set(rt.index,rt),rt=rt.sibling;return Ze}function N(rt,Ze){return rt=fl(rt,Ze),rt.index=0,rt.sibling=null,rt}function P(rt,Ze,ct){return rt.index=ct,c?(ct=rt.alternate,ct!==null?(ct=ct.index,ct<Ze?(rt.flags|=67108866,Ze):ct):(rt.flags|=67108866,Ze)):(rt.flags|=1048576,Ze)}function oe(rt){return c&&rt.alternate===null&&(rt.flags|=67108866),rt}function Se(rt,Ze,ct,Tt){return Ze===null||Ze.tag!==6?(Ze=r_(ct,rt.mode,Tt),Ze.return=rt,Ze):(Ze=N(Ze,ct),Ze.return=rt,Ze)}function ze(rt,Ze,ct,Tt){var nn=ct.type;return nn===v?Et(rt,Ze,ct.props.children,Tt,ct.key):Ze!==null&&(Ze.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===O&&rN(nn)===Ze.type)?(Ze=N(Ze,ct.props),em(Ze,ct),Ze.return=rt,Ze):(Ze=sy(ct.type,ct.key,ct.props,null,rt.mode,Tt),em(Ze,ct),Ze.return=rt,Ze)}function dt(rt,Ze,ct,Tt){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==ct.containerInfo||Ze.stateNode.implementation!==ct.implementation?(Ze=a_(ct,rt.mode,Tt),Ze.return=rt,Ze):(Ze=N(Ze,ct.children||[]),Ze.return=rt,Ze)}function Et(rt,Ze,ct,Tt,nn){return Ze===null||Ze.tag!==7?(Ze=Fu(ct,rt.mode,Tt,nn),Ze.return=rt,Ze):(Ze=N(Ze,ct),Ze.return=rt,Ze)}function It(rt,Ze,ct){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=r_(""+Ze,rt.mode,ct),Ze.return=rt,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case p:return ct=sy(Ze.type,Ze.key,Ze.props,null,rt.mode,ct),em(ct,Ze),ct.return=rt,ct;case g:return Ze=a_(Ze,rt.mode,ct),Ze.return=rt,Ze;case O:var Tt=Ze._init;return Ze=Tt(Ze._payload),It(rt,Ze,ct)}if(fe(Ze)||F(Ze))return Ze=Fu(Ze,rt.mode,ct,null),Ze.return=rt,Ze;if(typeof Ze.then=="function")return It(rt,Ey(Ze),ct);if(Ze.$$typeof===E)return It(rt,dy(rt,Ze),ct);Cy(rt,Ze)}return null}function mt(rt,Ze,ct,Tt){var nn=Ze!==null?Ze.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return nn!==null?null:Se(rt,Ze,""+ct,Tt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case p:return ct.key===nn?ze(rt,Ze,ct,Tt):null;case g:return ct.key===nn?dt(rt,Ze,ct,Tt):null;case O:return nn=ct._init,ct=nn(ct._payload),mt(rt,Ze,ct,Tt)}if(fe(ct)||F(ct))return nn!==null?null:Et(rt,Ze,ct,Tt,null);if(typeof ct.then=="function")return mt(rt,Ze,Ey(ct),Tt);if(ct.$$typeof===E)return mt(rt,Ze,dy(rt,ct),Tt);Cy(rt,ct)}return null}function gt(rt,Ze,ct,Tt,nn){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return rt=rt.get(ct)||null,Se(Ze,rt,""+Tt,nn);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case p:return rt=rt.get(Tt.key===null?ct:Tt.key)||null,ze(Ze,rt,Tt,nn);case g:return rt=rt.get(Tt.key===null?ct:Tt.key)||null,dt(Ze,rt,Tt,nn);case O:var Bn=Tt._init;return Tt=Bn(Tt._payload),gt(rt,Ze,ct,Tt,nn)}if(fe(Tt)||F(Tt))return rt=rt.get(ct)||null,Et(Ze,rt,Tt,nn,null);if(typeof Tt.then=="function")return gt(rt,Ze,ct,Ey(Tt),nn);if(Tt.$$typeof===E)return gt(rt,Ze,ct,dy(Ze,Tt),nn);Cy(Ze,Tt)}return null}function Sn(rt,Ze,ct,Tt){for(var nn=null,Bn=null,un=Ze,wn=Ze=0,Ia=null;un!==null&&wn<ct.length;wn++){un.index>wn?(Ia=un,un=null):Ia=un.sibling;var tr=mt(rt,un,ct[wn],Tt);if(tr===null){un===null&&(un=Ia);break}c&&un&&tr.alternate===null&&f(rt,un),Ze=P(tr,Ze,wn),Bn===null?nn=tr:Bn.sibling=tr,Bn=tr,un=Ia}if(wn===ct.length)return m(rt,un),ir&&$u(rt,wn),nn;if(un===null){for(;wn<ct.length;wn++)un=It(rt,ct[wn],Tt),un!==null&&(Ze=P(un,Ze,wn),Bn===null?nn=un:Bn.sibling=un,Bn=un);return ir&&$u(rt,wn),nn}for(un=w(un);wn<ct.length;wn++)Ia=gt(un,rt,wn,ct[wn],Tt),Ia!==null&&(c&&Ia.alternate!==null&&un.delete(Ia.key===null?wn:Ia.key),Ze=P(Ia,Ze,wn),Bn===null?nn=Ia:Bn.sibling=Ia,Bn=Ia);return c&&un.forEach(function(Mc){return f(rt,Mc)}),ir&&$u(rt,wn),nn}function yn(rt,Ze,ct,Tt){if(ct==null)throw Error(r(151));for(var nn=null,Bn=null,un=Ze,wn=Ze=0,Ia=null,tr=ct.next();un!==null&&!tr.done;wn++,tr=ct.next()){un.index>wn?(Ia=un,un=null):Ia=un.sibling;var Mc=mt(rt,un,tr.value,Tt);if(Mc===null){un===null&&(un=Ia);break}c&&un&&Mc.alternate===null&&f(rt,un),Ze=P(Mc,Ze,wn),Bn===null?nn=Mc:Bn.sibling=Mc,Bn=Mc,un=Ia}if(tr.done)return m(rt,un),ir&&$u(rt,wn),nn;if(un===null){for(;!tr.done;wn++,tr=ct.next())tr=It(rt,tr.value,Tt),tr!==null&&(Ze=P(tr,Ze,wn),Bn===null?nn=tr:Bn.sibling=tr,Bn=tr);return ir&&$u(rt,wn),nn}for(un=w(un);!tr.done;wn++,tr=ct.next())tr=gt(un,rt,wn,tr.value,Tt),tr!==null&&(c&&tr.alternate!==null&&un.delete(tr.key===null?wn:tr.key),Ze=P(tr,Ze,wn),Bn===null?nn=tr:Bn.sibling=tr,Bn=tr);return c&&un.forEach(function(E7){return f(rt,E7)}),ir&&$u(rt,wn),nn}function xr(rt,Ze,ct,Tt){if(typeof ct=="object"&&ct!==null&&ct.type===v&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case p:e:{for(var nn=ct.key;Ze!==null;){if(Ze.key===nn){if(nn=ct.type,nn===v){if(Ze.tag===7){m(rt,Ze.sibling),Tt=N(Ze,ct.props.children),Tt.return=rt,rt=Tt;break e}}else if(Ze.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===O&&rN(nn)===Ze.type){m(rt,Ze.sibling),Tt=N(Ze,ct.props),em(Tt,ct),Tt.return=rt,rt=Tt;break e}m(rt,Ze);break}else f(rt,Ze);Ze=Ze.sibling}ct.type===v?(Tt=Fu(ct.props.children,rt.mode,Tt,ct.key),Tt.return=rt,rt=Tt):(Tt=sy(ct.type,ct.key,ct.props,null,rt.mode,Tt),em(Tt,ct),Tt.return=rt,rt=Tt)}return oe(rt);case g:e:{for(nn=ct.key;Ze!==null;){if(Ze.key===nn)if(Ze.tag===4&&Ze.stateNode.containerInfo===ct.containerInfo&&Ze.stateNode.implementation===ct.implementation){m(rt,Ze.sibling),Tt=N(Ze,ct.children||[]),Tt.return=rt,rt=Tt;break e}else{m(rt,Ze);break}else f(rt,Ze);Ze=Ze.sibling}Tt=a_(ct,rt.mode,Tt),Tt.return=rt,rt=Tt}return oe(rt);case O:return nn=ct._init,ct=nn(ct._payload),xr(rt,Ze,ct,Tt)}if(fe(ct))return Sn(rt,Ze,ct,Tt);if(F(ct)){if(nn=F(ct),typeof nn!="function")throw Error(r(150));return ct=nn.call(ct),yn(rt,Ze,ct,Tt)}if(typeof ct.then=="function")return xr(rt,Ze,Ey(ct),Tt);if(ct.$$typeof===E)return xr(rt,Ze,dy(rt,ct),Tt);Cy(rt,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ze!==null&&Ze.tag===6?(m(rt,Ze.sibling),Tt=N(Ze,ct),Tt.return=rt,rt=Tt):(m(rt,Ze),Tt=r_(ct,rt.mode,Tt),Tt.return=rt,rt=Tt),oe(rt)):m(rt,Ze)}return function(rt,Ze,ct,Tt){try{Qp=0;var nn=xr(rt,Ze,ct,Tt);return Cf=null,nn}catch(un){if(un===qp||un===hy)throw un;var Bn=zi(29,un,null,rt.mode);return Bn.lanes=Tt,Bn.return=rt,Bn}finally{}}}var kf=aN(!0),iN=aN(!1),fo=ee(null),_s=null;function wc(c){var f=c.alternate;ue(ya,ya.current&1),ue(fo,c),_s===null&&(f===null||_f.current!==null||f.memoizedState!==null)&&(_s=c)}function oN(c){if(c.tag===22){if(ue(ya,ya.current),ue(fo,c),_s===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(_s=c)}}else _c()}function _c(){ue(ya,ya.current),ue(fo,fo.current)}function bl(c){J(fo),_s===c&&(_s=null),J(ya)}var ya=ee(0);function ky(c){for(var f=c;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||kx(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function F_(c,f,m,w){f=c.memoizedState,m=m(w,f),m=m==null?f:d({},f,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var L_={enqueueSetState:function(c,f,m){c=c._reactInternals;var w=Vi(),N=yc(w);N.payload=f,m!=null&&(N.callback=m),f=bc(c,N,w),f!==null&&(Gi(f,c,w),Gp(f,c,w))},enqueueReplaceState:function(c,f,m){c=c._reactInternals;var w=Vi(),N=yc(w);N.tag=1,N.payload=f,m!=null&&(N.callback=m),f=bc(c,N,w),f!==null&&(Gi(f,c,w),Gp(f,c,w))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var m=Vi(),w=yc(m);w.tag=2,f!=null&&(w.callback=f),f=bc(c,w,m),f!==null&&(Gi(f,c,m),Gp(f,c,m))}};function sN(c,f,m,w,N,P,oe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,P,oe):f.prototype&&f.prototype.isPureReactComponent?!A(m,w)||!A(N,P):!0}function lN(c,f,m,w){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,w),f.state!==c&&L_.enqueueReplaceState(f,f.state,null)}function Gu(c,f){var m=f;if("ref"in f){m={};for(var w in f)w!=="ref"&&(m[w]=f[w])}if(c=c.defaultProps){m===f&&(m=d({},m));for(var N in c)m[N]===void 0&&(m[N]=c[N])}return m}var Ay=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof Jr=="object"&&typeof Jr.emit=="function"){Jr.emit("uncaughtException",c);return}console.error(c)};function cN(c){Ay(c)}function uN(c){console.error(c)}function dN(c){Ay(c)}function Ty(c,f){try{var m=c.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(w){setTimeout(function(){throw w})}}function fN(c,f,m){try{var w=c.onCaughtError;w(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function $_(c,f,m){return m=yc(m),m.tag=3,m.payload={element:null},m.callback=function(){Ty(c,f)},m}function hN(c){return c=yc(c),c.tag=3,c}function pN(c,f,m,w){var N=m.type.getDerivedStateFromError;if(typeof N=="function"){var P=w.value;c.payload=function(){return N(P)},c.callback=function(){fN(f,m,w)}}var oe=m.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(c.callback=function(){fN(f,m,w),typeof N!="function"&&(Ac===null?Ac=new Set([this]):Ac.add(this));var Se=w.stack;this.componentDidCatch(w.value,{componentStack:Se!==null?Se:""})})}function Ez(c,f,m,w,N){if(m.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(f=m.alternate,f!==null&&zp(f,m,N,!0),m=fo.current,m!==null){switch(m.tag){case 13:return _s===null?cx():m.alternate===null&&Xr===0&&(Xr=3),m.flags&=-257,m.flags|=65536,m.lanes=N,w===p_?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([w]):f.add(w),dx(c,w,N)),!1;case 22:return m.flags|=65536,w===p_?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([w])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([w]):m.add(w)),dx(c,w,N)),!1}throw Error(r(435,m.tag))}return dx(c,w,N),cx(),!1}if(ir)return f=fo.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=N,w!==s_&&(c=Error(r(422),{cause:w}),Bp(pn(c,m)))):(w!==s_&&(f=Error(r(423),{cause:w}),Bp(pn(f,m))),c=c.current.alternate,c.flags|=65536,N&=-N,c.lanes|=N,w=pn(w,m),N=$_(c.stateNode,w,N),y_(c,N),Xr!==4&&(Xr=2)),!1;var P=Error(r(520),{cause:w});if(P=pn(P,m),sm===null?sm=[P]:sm.push(P),Xr!==4&&(Xr=2),f===null)return!0;w=pn(w,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,c=N&-N,m.lanes|=c,c=$_(m.stateNode,w,c),y_(m,c),!1;case 1:if(f=m.type,P=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Ac===null||!Ac.has(P))))return m.flags|=65536,N&=-N,m.lanes|=N,N=hN(N),pN(N,c,m,w),y_(m,N),!1}m=m.return}while(m!==null);return!1}var mN=Error(r(461)),Na=!1;function Ha(c,f,m,w){f.child=c===null?iN(f,null,m,w):kf(f,c.child,m,w)}function gN(c,f,m,w,N){m=m.render;var P=f.ref;if("ref"in w){var oe={};for(var Se in w)Se!=="ref"&&(oe[Se]=w[Se])}else oe=w;return Hu(f),w=x_(c,f,m,oe,P,N),Se=S_(),c!==null&&!Na?(E_(c,f,N),vl(c,f,N)):(ir&&Se&&i_(f),f.flags|=1,Ha(c,f,w,N),f.child)}function yN(c,f,m,w,N){if(c===null){var P=m.type;return typeof P=="function"&&!n_(P)&&P.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=P,bN(c,f,P,w,N)):(c=sy(m.type,null,w,f,f.mode,N),c.ref=f.ref,c.return=f,f.child=c)}if(P=c.child,!W_(c,N)){var oe=P.memoizedProps;if(m=m.compare,m=m!==null?m:A,m(oe,w)&&c.ref===f.ref)return vl(c,f,N)}return f.flags|=1,c=fl(P,w),c.ref=f.ref,c.return=f,f.child=c}function bN(c,f,m,w,N){if(c!==null){var P=c.memoizedProps;if(A(P,w)&&c.ref===f.ref)if(Na=!1,f.pendingProps=w=P,W_(c,N))(c.flags&131072)!==0&&(Na=!0);else return f.lanes=c.lanes,vl(c,f,N)}return B_(c,f,m,w,N)}function vN(c,f,m){var w=f.pendingProps,N=w.children,P=c!==null?c.memoizedState:null;if(w.mode==="hidden"){if((f.flags&128)!==0){if(w=P!==null?P.baseLanes|m:m,c!==null){for(N=f.child=c.child,P=0;N!==null;)P=P|N.lanes|N.childLanes,N=N.sibling;f.childLanes=P&~w}else f.childLanes=0,f.child=null;return wN(c,f,w,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&fy(f,P!==null?P.cachePool:null),P!==null?bT(f,P):v_(),oN(f);else return f.lanes=f.childLanes=536870912,wN(c,f,P!==null?P.baseLanes|m:m,m)}else P!==null?(fy(f,P.cachePool),bT(f,P),_c(),f.memoizedState=null):(c!==null&&fy(f,null),v_(),_c());return Ha(c,f,N,m),f.child}function wN(c,f,m,w){var N=h_();return N=N===null?null:{parent:ga._currentValue,pool:N},f.memoizedState={baseLanes:m,cachePool:N},c!==null&&fy(f,null),v_(),oN(f),c!==null&&zp(c,f,w,!0),null}function Ny(c,f){var m=f.ref;if(m===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(c===null||c.ref!==m)&&(f.flags|=4194816)}}function B_(c,f,m,w,N){return Hu(f),m=x_(c,f,m,w,void 0,N),w=S_(),c!==null&&!Na?(E_(c,f,N),vl(c,f,N)):(ir&&w&&i_(f),f.flags|=1,Ha(c,f,m,N),f.child)}function _N(c,f,m,w,N,P){return Hu(f),f.updateQueue=null,m=wT(f,w,m,N),vT(c),w=S_(),c!==null&&!Na?(E_(c,f,P),vl(c,f,P)):(ir&&w&&i_(f),f.flags|=1,Ha(c,f,m,P),f.child)}function xN(c,f,m,w,N){if(Hu(f),f.stateNode===null){var P=vs,oe=m.contextType;typeof oe=="object"&&oe!==null&&(P=Ja(oe)),P=new m(w,P),f.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=L_,f.stateNode=P,P._reactInternals=f,P=f.stateNode,P.props=w,P.state=f.memoizedState,P.refs={},m_(f),oe=m.contextType,P.context=typeof oe=="object"&&oe!==null?Ja(oe):vs,P.state=f.memoizedState,oe=m.getDerivedStateFromProps,typeof oe=="function"&&(F_(f,m,oe,w),P.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(oe=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),oe!==P.state&&L_.enqueueReplaceState(P,P.state,null),Kp(f,w,P,N),Wp(),P.state=f.memoizedState),typeof P.componentDidMount=="function"&&(f.flags|=4194308),w=!0}else if(c===null){P=f.stateNode;var Se=f.memoizedProps,ze=Gu(m,Se);P.props=ze;var dt=P.context,Et=m.contextType;oe=vs,typeof Et=="object"&&Et!==null&&(oe=Ja(Et));var It=m.getDerivedStateFromProps;Et=typeof It=="function"||typeof P.getSnapshotBeforeUpdate=="function",Se=f.pendingProps!==Se,Et||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(Se||dt!==oe)&&lN(f,P,w,oe),gc=!1;var mt=f.memoizedState;P.state=mt,Kp(f,w,P,N),Wp(),dt=f.memoizedState,Se||mt!==dt||gc?(typeof It=="function"&&(F_(f,m,It,w),dt=f.memoizedState),(ze=gc||sN(f,m,ze,w,mt,dt,oe))?(Et||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(f.flags|=4194308)):(typeof P.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=dt),P.props=w,P.state=dt,P.context=oe,w=ze):(typeof P.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{P=f.stateNode,g_(c,f),oe=f.memoizedProps,Et=Gu(m,oe),P.props=Et,It=f.pendingProps,mt=P.context,dt=m.contextType,ze=vs,typeof dt=="object"&&dt!==null&&(ze=Ja(dt)),Se=m.getDerivedStateFromProps,(dt=typeof Se=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(oe!==It||mt!==ze)&&lN(f,P,w,ze),gc=!1,mt=f.memoizedState,P.state=mt,Kp(f,w,P,N),Wp();var gt=f.memoizedState;oe!==It||mt!==gt||gc||c!==null&&c.dependencies!==null&&uy(c.dependencies)?(typeof Se=="function"&&(F_(f,m,Se,w),gt=f.memoizedState),(Et=gc||sN(f,m,Et,w,mt,gt,ze)||c!==null&&c.dependencies!==null&&uy(c.dependencies))?(dt||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(w,gt,ze),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(w,gt,ze)),typeof P.componentDidUpdate=="function"&&(f.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof P.componentDidUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=gt),P.props=w,P.state=gt,P.context=ze,w=Et):(typeof P.componentDidUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),w=!1)}return P=w,Ny(c,f),w=(f.flags&128)!==0,P||w?(P=f.stateNode,m=w&&typeof m.getDerivedStateFromError!="function"?null:P.render(),f.flags|=1,c!==null&&w?(f.child=kf(f,c.child,null,N),f.child=kf(f,null,m,N)):Ha(c,f,m,N),f.memoizedState=P.state,c=f.child):c=vl(c,f,N),c}function SN(c,f,m,w){return $p(),f.flags|=256,Ha(c,f,m,w),f.child}var z_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function U_(c){return{baseLanes:c,cachePool:uT()}}function H_(c,f,m){return c=c!==null?c.childLanes&~m:0,f&&(c|=ho),c}function EN(c,f,m){var w=f.pendingProps,N=!1,P=(f.flags&128)!==0,oe;if((oe=P)||(oe=c!==null&&c.memoizedState===null?!1:(ya.current&2)!==0),oe&&(N=!0,f.flags&=-129),oe=(f.flags&32)!==0,f.flags&=-33,c===null){if(ir){if(N?wc(f):_c(),ir){var Se=Yr,ze;if(ze=Se){e:{for(ze=Se,Se=ws;ze.nodeType!==8;){if(!Se){Se=null;break e}if(ze=Mo(ze.nextSibling),ze===null){Se=null;break e}}Se=ze}Se!==null?(f.memoizedState={dehydrated:Se,treeContext:Lu!==null?{id:hl,overflow:pl}:null,retryLane:536870912,hydrationErrors:null},ze=zi(18,null,null,0),ze.stateNode=Se,ze.return=f,f.child=ze,pi=f,Yr=null,ze=!0):ze=!1}ze||zu(f)}if(Se=f.memoizedState,Se!==null&&(Se=Se.dehydrated,Se!==null))return kx(Se)?f.lanes=32:f.lanes=536870912,null;bl(f)}return Se=w.children,w=w.fallback,N?(_c(),N=f.mode,Se=Ry({mode:"hidden",children:Se},N),w=Fu(w,N,m,null),Se.return=f,w.return=f,Se.sibling=w,f.child=Se,N=f.child,N.memoizedState=U_(m),N.childLanes=H_(c,oe,m),f.memoizedState=z_,w):(wc(f),q_(f,Se))}if(ze=c.memoizedState,ze!==null&&(Se=ze.dehydrated,Se!==null)){if(P)f.flags&256?(wc(f),f.flags&=-257,f=V_(c,f,m)):f.memoizedState!==null?(_c(),f.child=c.child,f.flags|=128,f=null):(_c(),N=w.fallback,Se=f.mode,w=Ry({mode:"visible",children:w.children},Se),N=Fu(N,Se,m,null),N.flags|=2,w.return=f,N.return=f,w.sibling=N,f.child=w,kf(f,c.child,null,m),w=f.child,w.memoizedState=U_(m),w.childLanes=H_(c,oe,m),f.memoizedState=z_,f=N);else if(wc(f),kx(Se)){if(oe=Se.nextSibling&&Se.nextSibling.dataset,oe)var dt=oe.dgst;oe=dt,w=Error(r(419)),w.stack="",w.digest=oe,Bp({value:w,source:null,stack:null}),f=V_(c,f,m)}else if(Na||zp(c,f,m,!1),oe=(m&c.childLanes)!==0,Na||oe){if(oe=jr,oe!==null&&(w=m&-m,w=(w&42)!==0?1:Nt(w),w=(w&(oe.suspendedLanes|m))!==0?0:w,w!==0&&w!==ze.retryLane))throw ze.retryLane=w,jo(c,w),Gi(oe,c,w),mN;Se.data==="$?"||cx(),f=V_(c,f,m)}else Se.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=ze.treeContext,Yr=Mo(Se.nextSibling),pi=f,ir=!0,Bu=null,ws=!1,c!==null&&(co[uo++]=hl,co[uo++]=pl,co[uo++]=Lu,hl=c.id,pl=c.overflow,Lu=f),f=q_(f,w.children),f.flags|=4096);return f}return N?(_c(),N=w.fallback,Se=f.mode,ze=c.child,dt=ze.sibling,w=fl(ze,{mode:"hidden",children:w.children}),w.subtreeFlags=ze.subtreeFlags&65011712,dt!==null?N=fl(dt,N):(N=Fu(N,Se,m,null),N.flags|=2),N.return=f,w.return=f,w.sibling=N,f.child=w,w=N,N=f.child,Se=c.child.memoizedState,Se===null?Se=U_(m):(ze=Se.cachePool,ze!==null?(dt=ga._currentValue,ze=ze.parent!==dt?{parent:dt,pool:dt}:ze):ze=uT(),Se={baseLanes:Se.baseLanes|m,cachePool:ze}),N.memoizedState=Se,N.childLanes=H_(c,oe,m),f.memoizedState=z_,w):(wc(f),m=c.child,c=m.sibling,m=fl(m,{mode:"visible",children:w.children}),m.return=f,m.sibling=null,c!==null&&(oe=f.deletions,oe===null?(f.deletions=[c],f.flags|=16):oe.push(c)),f.child=m,f.memoizedState=null,m)}function q_(c,f){return f=Ry({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Ry(c,f){return c=zi(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function V_(c,f,m){return kf(f,c.child,null,m),c=q_(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function CN(c,f,m){c.lanes|=f;var w=c.alternate;w!==null&&(w.lanes|=f),c_(c.return,f,m)}function G_(c,f,m,w,N){var P=c.memoizedState;P===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:N}:(P.isBackwards=f,P.rendering=null,P.renderingStartTime=0,P.last=w,P.tail=m,P.tailMode=N)}function kN(c,f,m){var w=f.pendingProps,N=w.revealOrder,P=w.tail;if(Ha(c,f,w.children,m),w=ya.current,(w&2)!==0)w=w&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&CN(c,m,f);else if(c.tag===19)CN(c,m,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}w&=1}switch(ue(ya,w),N){case"forwards":for(m=f.child,N=null;m!==null;)c=m.alternate,c!==null&&ky(c)===null&&(N=m),m=m.sibling;m=N,m===null?(N=f.child,f.child=null):(N=m.sibling,m.sibling=null),G_(f,!1,N,m,P);break;case"backwards":for(m=null,N=f.child,f.child=null;N!==null;){if(c=N.alternate,c!==null&&ky(c)===null){f.child=N;break}c=N.sibling,N.sibling=m,m=N,N=c}G_(f,!0,m,null,P);break;case"together":G_(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function vl(c,f,m){if(c!==null&&(f.dependencies=c.dependencies),kc|=f.lanes,(m&f.childLanes)===0)if(c!==null){if(zp(c,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,m=fl(c,c.pendingProps),f.child=m,m.return=f;c.sibling!==null;)c=c.sibling,m=m.sibling=fl(c,c.pendingProps),m.return=f;m.sibling=null}return f.child}function W_(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&uy(c)))}function Cz(c,f,m){switch(f.tag){case 3:Re(f,f.stateNode.containerInfo),mc(f,ga,c.memoizedState.cache),$p();break;case 27:case 5:Fe(f);break;case 4:Re(f,f.stateNode.containerInfo);break;case 10:mc(f,f.type,f.memoizedProps.value);break;case 13:var w=f.memoizedState;if(w!==null)return w.dehydrated!==null?(wc(f),f.flags|=128,null):(m&f.child.childLanes)!==0?EN(c,f,m):(wc(f),c=vl(c,f,m),c!==null?c.sibling:null);wc(f);break;case 19:var N=(c.flags&128)!==0;if(w=(m&f.childLanes)!==0,w||(zp(c,f,m,!1),w=(m&f.childLanes)!==0),N){if(w)return kN(c,f,m);f.flags|=128}if(N=f.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),ue(ya,ya.current),w)break;return null;case 22:case 23:return f.lanes=0,vN(c,f,m);case 24:mc(f,ga,c.memoizedState.cache)}return vl(c,f,m)}function AN(c,f,m){if(c!==null)if(c.memoizedProps!==f.pendingProps)Na=!0;else{if(!W_(c,m)&&(f.flags&128)===0)return Na=!1,Cz(c,f,m);Na=(c.flags&131072)!==0}else Na=!1,ir&&(f.flags&1048576)!==0&&rT(f,cy,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var w=f.elementType,N=w._init;if(w=N(w._payload),f.type=w,typeof w=="function")n_(w)?(c=Gu(w,c),f.tag=1,f=xN(null,f,w,c,m)):(f.tag=0,f=B_(null,f,w,c,m));else{if(w!=null){if(N=w.$$typeof,N===C){f.tag=11,f=gN(null,f,w,c,m);break e}else if(N===j){f.tag=14,f=yN(null,f,w,c,m);break e}}throw f=q(w)||w,Error(r(306,f,""))}}return f;case 0:return B_(c,f,f.type,f.pendingProps,m);case 1:return w=f.type,N=Gu(w,f.pendingProps),xN(c,f,w,N,m);case 3:e:{if(Re(f,f.stateNode.containerInfo),c===null)throw Error(r(387));w=f.pendingProps;var P=f.memoizedState;N=P.element,g_(c,f),Kp(f,w,null,m);var oe=f.memoizedState;if(w=oe.cache,mc(f,ga,w),w!==P.cache&&u_(f,[ga],m,!0),Wp(),w=oe.element,P.isDehydrated)if(P={element:w,isDehydrated:!1,cache:oe.cache},f.updateQueue.baseState=P,f.memoizedState=P,f.flags&256){f=SN(c,f,w,m);break e}else if(w!==N){N=pn(Error(r(424)),f),Bp(N),f=SN(c,f,w,m);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Yr=Mo(c.firstChild),pi=f,ir=!0,Bu=null,ws=!0,m=iN(f,null,w,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if($p(),w===N){f=vl(c,f,m);break e}Ha(c,f,w,m)}f=f.child}return f;case 26:return Ny(c,f),c===null?(m=IR(f.type,null,f.pendingProps,null))?f.memoizedState=m:ir||(m=f.type,c=f.pendingProps,w=qy(Pe.current).createElement(m),w[he]=f,w[Te]=c,Va(w,m,c),Dn(w),f.stateNode=w):f.memoizedState=IR(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Fe(f),c===null&&ir&&(w=f.stateNode=TR(f.type,f.pendingProps,Pe.current),pi=f,ws=!0,N=Yr,Rc(f.type)?(Ax=N,Yr=Mo(w.firstChild)):Yr=N),Ha(c,f,f.pendingProps.children,m),Ny(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&ir&&((N=w=Yr)&&(w=Qz(w,f.type,f.pendingProps,ws),w!==null?(f.stateNode=w,pi=f,Yr=Mo(w.firstChild),ws=!1,N=!0):N=!1),N||zu(f)),Fe(f),N=f.type,P=f.pendingProps,oe=c!==null?c.memoizedProps:null,w=P.children,Sx(N,P)?w=null:oe!==null&&Sx(N,oe)&&(f.flags|=32),f.memoizedState!==null&&(N=x_(c,f,yz,null,null,m),gm._currentValue=N),Ny(c,f),Ha(c,f,w,m),f.child;case 6:return c===null&&ir&&((c=m=Yr)&&(m=e7(m,f.pendingProps,ws),m!==null?(f.stateNode=m,pi=f,Yr=null,c=!0):c=!1),c||zu(f)),null;case 13:return EN(c,f,m);case 4:return Re(f,f.stateNode.containerInfo),w=f.pendingProps,c===null?f.child=kf(f,null,w,m):Ha(c,f,w,m),f.child;case 11:return gN(c,f,f.type,f.pendingProps,m);case 7:return Ha(c,f,f.pendingProps,m),f.child;case 8:return Ha(c,f,f.pendingProps.children,m),f.child;case 12:return Ha(c,f,f.pendingProps.children,m),f.child;case 10:return w=f.pendingProps,mc(f,f.type,w.value),Ha(c,f,w.children,m),f.child;case 9:return N=f.type._context,w=f.pendingProps.children,Hu(f),N=Ja(N),w=w(N),f.flags|=1,Ha(c,f,w,m),f.child;case 14:return yN(c,f,f.type,f.pendingProps,m);case 15:return bN(c,f,f.type,f.pendingProps,m);case 19:return kN(c,f,m);case 31:return w=f.pendingProps,m=f.mode,w={mode:w.mode,children:w.children},c===null?(m=Ry(w,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=fl(c.child,w),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return vN(c,f,m);case 24:return Hu(f),w=Ja(ga),c===null?(N=h_(),N===null&&(N=jr,P=d_(),N.pooledCache=P,P.refCount++,P!==null&&(N.pooledCacheLanes|=m),N=P),f.memoizedState={parent:w,cache:N},m_(f),mc(f,ga,N)):((c.lanes&m)!==0&&(g_(c,f),Kp(f,null,null,m),Wp()),N=c.memoizedState,P=f.memoizedState,N.parent!==w?(N={parent:w,cache:w},f.memoizedState=N,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=N),mc(f,ga,w)):(w=P.cache,mc(f,ga,w),w!==N.cache&&u_(f,[ga],m,!0))),Ha(c,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function wl(c){c.flags|=4}function TN(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!PR(f)){if(f=fo.current,f!==null&&((Kn&4194048)===Kn?_s!==null:(Kn&62914560)!==Kn&&(Kn&536870912)===0||f!==_s))throw Vp=p_,dT;c.flags|=8192}}function Iy(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?M():536870912,c.lanes|=f,Rf|=f)}function tm(c,f){if(!ir)switch(c.tailMode){case"hidden":f=c.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function Gr(c){var f=c.alternate!==null&&c.alternate.child===c.child,m=0,w=0;if(f)for(var N=c.child;N!==null;)m|=N.lanes|N.childLanes,w|=N.subtreeFlags&65011712,w|=N.flags&65011712,N.return=c,N=N.sibling;else for(N=c.child;N!==null;)m|=N.lanes|N.childLanes,w|=N.subtreeFlags,w|=N.flags,N.return=c,N=N.sibling;return c.subtreeFlags|=w,c.childLanes=m,f}function kz(c,f,m){var w=f.pendingProps;switch(o_(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gr(f),null;case 1:return Gr(f),null;case 3:return m=f.stateNode,w=null,c!==null&&(w=c.memoizedState.cache),f.memoizedState.cache!==w&&(f.flags|=2048),gl(ga),Ce(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(Lp(f)?wl(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,oT())),Gr(f),null;case 26:return m=f.memoizedState,c===null?(wl(f),m!==null?(Gr(f),TN(f,m)):(Gr(f),f.flags&=-16777217)):m?m!==c.memoizedState?(wl(f),Gr(f),TN(f,m)):(Gr(f),f.flags&=-16777217):(c.memoizedProps!==w&&wl(f),Gr(f),f.flags&=-16777217),null;case 27:Qe(f),m=Pe.current;var N=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==w&&wl(f);else{if(!w){if(f.stateNode===null)throw Error(r(166));return Gr(f),null}c=be.current,Lp(f)?aT(f):(c=TR(N,w,m),f.stateNode=c,wl(f))}return Gr(f),null;case 5:if(Qe(f),m=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==w&&wl(f);else{if(!w){if(f.stateNode===null)throw Error(r(166));return Gr(f),null}if(c=be.current,Lp(f))aT(f);else{switch(N=qy(Pe.current),c){case 1:c=N.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:c=N.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":c=N.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":c=N.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":c=N.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof w.is=="string"?N.createElement("select",{is:w.is}):N.createElement("select"),w.multiple?c.multiple=!0:w.size&&(c.size=w.size);break;default:c=typeof w.is=="string"?N.createElement(m,{is:w.is}):N.createElement(m)}}c[he]=f,c[Te]=w;e:for(N=f.child;N!==null;){if(N.tag===5||N.tag===6)c.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===f)break e;for(;N.sibling===null;){if(N.return===null||N.return===f)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}f.stateNode=c;e:switch(Va(c,m,w),m){case"button":case"input":case"select":case"textarea":c=!!w.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&wl(f)}}return Gr(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==w&&wl(f);else{if(typeof w!="string"&&f.stateNode===null)throw Error(r(166));if(c=Pe.current,Lp(f)){if(c=f.stateNode,m=f.memoizedProps,w=null,N=pi,N!==null)switch(N.tag){case 27:case 5:w=N.memoizedProps}c[he]=f,c=!!(c.nodeValue===m||w!==null&&w.suppressHydrationWarning===!0||_R(c.nodeValue,m)),c||zu(f)}else c=qy(c).createTextNode(w),c[he]=f,f.stateNode=c}return Gr(f),null;case 13:if(w=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(N=Lp(f),w!==null&&w.dehydrated!==null){if(c===null){if(!N)throw Error(r(318));if(N=f.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[he]=f}else $p(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Gr(f),N=!1}else N=oT(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=N),N=!0;if(!N)return f.flags&256?(bl(f),f):(bl(f),null)}if(bl(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=w!==null,c=c!==null&&c.memoizedState!==null,m){w=f.child,N=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(N=w.alternate.memoizedState.cachePool.pool);var P=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(P=w.memoizedState.cachePool.pool),P!==N&&(w.flags|=2048)}return m!==c&&m&&(f.child.flags|=8192),Iy(f,f.updateQueue),Gr(f),null;case 4:return Ce(),c===null&&bx(f.stateNode.containerInfo),Gr(f),null;case 10:return gl(f.type),Gr(f),null;case 19:if(J(ya),N=f.memoizedState,N===null)return Gr(f),null;if(w=(f.flags&128)!==0,P=N.rendering,P===null)if(w)tm(N,!1);else{if(Xr!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(P=ky(c),P!==null){for(f.flags|=128,tm(N,!1),c=P.updateQueue,f.updateQueue=c,Iy(f,c),f.subtreeFlags=0,c=m,m=f.child;m!==null;)nT(m,c),m=m.sibling;return ue(ya,ya.current&1|2),f.child}c=c.sibling}N.tail!==null&&se()>Dy&&(f.flags|=128,w=!0,tm(N,!1),f.lanes=4194304)}else{if(!w)if(c=ky(P),c!==null){if(f.flags|=128,w=!0,c=c.updateQueue,f.updateQueue=c,Iy(f,c),tm(N,!0),N.tail===null&&N.tailMode==="hidden"&&!P.alternate&&!ir)return Gr(f),null}else 2*se()-N.renderingStartTime>Dy&&m!==536870912&&(f.flags|=128,w=!0,tm(N,!1),f.lanes=4194304);N.isBackwards?(P.sibling=f.child,f.child=P):(c=N.last,c!==null?c.sibling=P:f.child=P,N.last=P)}return N.tail!==null?(f=N.tail,N.rendering=f,N.tail=f.sibling,N.renderingStartTime=se(),f.sibling=null,c=ya.current,ue(ya,w?c&1|2:c&1),f):(Gr(f),null);case 22:case 23:return bl(f),w_(),w=f.memoizedState!==null,c!==null?c.memoizedState!==null!==w&&(f.flags|=8192):w&&(f.flags|=8192),w?(m&536870912)!==0&&(f.flags&128)===0&&(Gr(f),f.subtreeFlags&6&&(f.flags|=8192)):Gr(f),m=f.updateQueue,m!==null&&Iy(f,m.retryQueue),m=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),w=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==m&&(f.flags|=2048),c!==null&&J(qu),null;case 24:return m=null,c!==null&&(m=c.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),gl(ga),Gr(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function Az(c,f){switch(o_(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return gl(ga),Ce(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return Qe(f),null;case 13:if(bl(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));$p()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return J(ya),null;case 4:return Ce(),null;case 10:return gl(f.type),null;case 22:case 23:return bl(f),w_(),c!==null&&J(qu),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return gl(ga),null;case 25:return null;default:return null}}function NN(c,f){switch(o_(f),f.tag){case 3:gl(ga),Ce();break;case 26:case 27:case 5:Qe(f);break;case 4:Ce();break;case 13:bl(f);break;case 19:J(ya);break;case 10:gl(f.type);break;case 22:case 23:bl(f),w_(),c!==null&&J(qu);break;case 24:gl(ga)}}function nm(c,f){try{var m=f.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var N=w.next;m=N;do{if((m.tag&c)===c){w=void 0;var P=m.create,oe=m.inst;w=P(),oe.destroy=w}m=m.next}while(m!==N)}}catch(Se){Tr(f,f.return,Se)}}function xc(c,f,m){try{var w=f.updateQueue,N=w!==null?w.lastEffect:null;if(N!==null){var P=N.next;w=P;do{if((w.tag&c)===c){var oe=w.inst,Se=oe.destroy;if(Se!==void 0){oe.destroy=void 0,N=f;var ze=m,dt=Se;try{dt()}catch(Et){Tr(N,ze,Et)}}}w=w.next}while(w!==P)}}catch(Et){Tr(f,f.return,Et)}}function RN(c){var f=c.updateQueue;if(f!==null){var m=c.stateNode;try{yT(f,m)}catch(w){Tr(c,c.return,w)}}}function IN(c,f,m){m.props=Gu(c.type,c.memoizedProps),m.state=c.memoizedState;try{m.componentWillUnmount()}catch(w){Tr(c,f,w)}}function rm(c,f){try{var m=c.ref;if(m!==null){switch(c.tag){case 26:case 27:case 5:var w=c.stateNode;break;case 30:w=c.stateNode;break;default:w=c.stateNode}typeof m=="function"?c.refCleanup=m(w):m.current=w}}catch(N){Tr(c,f,N)}}function xs(c,f){var m=c.ref,w=c.refCleanup;if(m!==null)if(typeof w=="function")try{w()}catch(N){Tr(c,f,N)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(N){Tr(c,f,N)}else m.current=null}function ON(c){var f=c.type,m=c.memoizedProps,w=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&w.focus();break e;case"img":m.src?w.src=m.src:m.srcSet&&(w.srcset=m.srcSet)}}catch(N){Tr(c,c.return,N)}}function K_(c,f,m){try{var w=c.stateNode;Kz(w,c.type,m,f),w[Te]=f}catch(N){Tr(c,c.return,N)}}function jN(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Rc(c.type)||c.tag===4}function Z_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||jN(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Rc(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Y_(c,f,m){var w=c.tag;if(w===5||w===6)c=c.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(c,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(c),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=Hy));else if(w!==4&&(w===27&&Rc(c.type)&&(m=c.stateNode,f=null),c=c.child,c!==null))for(Y_(c,f,m),c=c.sibling;c!==null;)Y_(c,f,m),c=c.sibling}function Oy(c,f,m){var w=c.tag;if(w===5||w===6)c=c.stateNode,f?m.insertBefore(c,f):m.appendChild(c);else if(w!==4&&(w===27&&Rc(c.type)&&(m=c.stateNode),c=c.child,c!==null))for(Oy(c,f,m),c=c.sibling;c!==null;)Oy(c,f,m),c=c.sibling}function DN(c){var f=c.stateNode,m=c.memoizedProps;try{for(var w=c.type,N=f.attributes;N.length;)f.removeAttributeNode(N[0]);Va(f,w,m),f[he]=c,f[Te]=m}catch(P){Tr(c,c.return,P)}}var _l=!1,ra=!1,X_=!1,MN=typeof WeakSet=="function"?WeakSet:Set,Ra=null;function Tz(c,f){if(c=c.containerInfo,_x=Yy,c=ce(c),we(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var N=w.anchorOffset,P=w.focusNode;w=w.focusOffset;try{m.nodeType,P.nodeType}catch{m=null;break e}var oe=0,Se=-1,ze=-1,dt=0,Et=0,It=c,mt=null;t:for(;;){for(var gt;It!==m||N!==0&&It.nodeType!==3||(Se=oe+N),It!==P||w!==0&&It.nodeType!==3||(ze=oe+w),It.nodeType===3&&(oe+=It.nodeValue.length),(gt=It.firstChild)!==null;)mt=It,It=gt;for(;;){if(It===c)break t;if(mt===m&&++dt===N&&(Se=oe),mt===P&&++Et===w&&(ze=oe),(gt=It.nextSibling)!==null)break;It=mt,mt=It.parentNode}It=gt}m=Se===-1||ze===-1?null:{start:Se,end:ze}}else m=null}m=m||{start:0,end:0}}else m=null;for(xx={focusedElem:c,selectionRange:m},Yy=!1,Ra=f;Ra!==null;)if(f=Ra,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,Ra=c;else for(;Ra!==null;){switch(f=Ra,P=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&P!==null){c=void 0,m=f,N=P.memoizedProps,P=P.memoizedState,w=m.stateNode;try{var Sn=Gu(m.type,N,m.elementType===m.type);c=w.getSnapshotBeforeUpdate(Sn,P),w.__reactInternalSnapshotBeforeUpdate=c}catch(yn){Tr(m,m.return,yn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,m=c.nodeType,m===9)Cx(c);else if(m===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Cx(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,Ra=c;break}Ra=f.return}}function PN(c,f,m){var w=m.flags;switch(m.tag){case 0:case 11:case 15:Sc(c,m),w&4&&nm(5,m);break;case 1:if(Sc(c,m),w&4)if(c=m.stateNode,f===null)try{c.componentDidMount()}catch(oe){Tr(m,m.return,oe)}else{var N=Gu(m.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(N,f,c.__reactInternalSnapshotBeforeUpdate)}catch(oe){Tr(m,m.return,oe)}}w&64&&RN(m),w&512&&rm(m,m.return);break;case 3:if(Sc(c,m),w&64&&(c=m.updateQueue,c!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{yT(c,f)}catch(oe){Tr(m,m.return,oe)}}break;case 27:f===null&&w&4&&DN(m);case 26:case 5:Sc(c,m),f===null&&w&4&&ON(m),w&512&&rm(m,m.return);break;case 12:Sc(c,m);break;case 13:Sc(c,m),w&4&&$N(c,m),w&64&&(c=m.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(m=Fz.bind(null,m),t7(c,m))));break;case 22:if(w=m.memoizedState!==null||_l,!w){f=f!==null&&f.memoizedState!==null||ra,N=_l;var P=ra;_l=w,(ra=f)&&!P?Ec(c,m,(m.subtreeFlags&8772)!==0):Sc(c,m),_l=N,ra=P}break;case 30:break;default:Sc(c,m)}}function FN(c){var f=c.alternate;f!==null&&(c.alternate=null,FN(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Xt(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Ur=null,ki=!1;function xl(c,f,m){for(m=m.child;m!==null;)LN(c,f,m),m=m.sibling}function LN(c,f,m){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(_t,m)}catch{}switch(m.tag){case 26:ra||xs(m,f),xl(c,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:ra||xs(m,f);var w=Ur,N=ki;Rc(m.type)&&(Ur=m.stateNode,ki=!1),xl(c,f,m),fm(m.stateNode),Ur=w,ki=N;break;case 5:ra||xs(m,f);case 6:if(w=Ur,N=ki,Ur=null,xl(c,f,m),Ur=w,ki=N,Ur!==null)if(ki)try{(Ur.nodeType===9?Ur.body:Ur.nodeName==="HTML"?Ur.ownerDocument.body:Ur).removeChild(m.stateNode)}catch(P){Tr(m,f,P)}else try{Ur.removeChild(m.stateNode)}catch(P){Tr(m,f,P)}break;case 18:Ur!==null&&(ki?(c=Ur,kR(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,m.stateNode),wm(c)):kR(Ur,m.stateNode));break;case 4:w=Ur,N=ki,Ur=m.stateNode.containerInfo,ki=!0,xl(c,f,m),Ur=w,ki=N;break;case 0:case 11:case 14:case 15:ra||xc(2,m,f),ra||xc(4,m,f),xl(c,f,m);break;case 1:ra||(xs(m,f),w=m.stateNode,typeof w.componentWillUnmount=="function"&&IN(m,f,w)),xl(c,f,m);break;case 21:xl(c,f,m);break;case 22:ra=(w=ra)||m.memoizedState!==null,xl(c,f,m),ra=w;break;default:xl(c,f,m)}}function $N(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{wm(c)}catch(m){Tr(f,f.return,m)}}function Nz(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new MN),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new MN),f;default:throw Error(r(435,c.tag))}}function J_(c,f){var m=Nz(c);f.forEach(function(w){var N=Lz.bind(null,c,w);m.has(w)||(m.add(w),w.then(N,N))})}function Ui(c,f){var m=f.deletions;if(m!==null)for(var w=0;w<m.length;w++){var N=m[w],P=c,oe=f,Se=oe;e:for(;Se!==null;){switch(Se.tag){case 27:if(Rc(Se.type)){Ur=Se.stateNode,ki=!1;break e}break;case 5:Ur=Se.stateNode,ki=!1;break e;case 3:case 4:Ur=Se.stateNode.containerInfo,ki=!0;break e}Se=Se.return}if(Ur===null)throw Error(r(160));LN(P,oe,N),Ur=null,ki=!1,P=N.alternate,P!==null&&(P.return=null),N.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)BN(f,c),f=f.sibling}var Do=null;function BN(c,f){var m=c.alternate,w=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Ui(f,c),Hi(c),w&4&&(xc(3,c,c.return),nm(3,c),xc(5,c,c.return));break;case 1:Ui(f,c),Hi(c),w&512&&(ra||m===null||xs(m,m.return)),w&64&&_l&&(c=c.updateQueue,c!==null&&(w=c.callbacks,w!==null&&(m=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=m===null?w:m.concat(w))));break;case 26:var N=Do;if(Ui(f,c),Hi(c),w&512&&(ra||m===null||xs(m,m.return)),w&4){var P=m!==null?m.memoizedState:null;if(w=c.memoizedState,m===null)if(w===null)if(c.stateNode===null){e:{w=c.type,m=c.memoizedProps,N=N.ownerDocument||N;t:switch(w){case"title":P=N.getElementsByTagName("title")[0],(!P||P[Mt]||P[he]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=N.createElement(w),N.head.insertBefore(P,N.querySelector("head > title"))),Va(P,w,m),P[he]=c,Dn(P),w=P;break e;case"link":var oe=DR("link","href",N).get(w+(m.href||""));if(oe){for(var Se=0;Se<oe.length;Se++)if(P=oe[Se],P.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&P.getAttribute("rel")===(m.rel==null?null:m.rel)&&P.getAttribute("title")===(m.title==null?null:m.title)&&P.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){oe.splice(Se,1);break t}}P=N.createElement(w),Va(P,w,m),N.head.appendChild(P);break;case"meta":if(oe=DR("meta","content",N).get(w+(m.content||""))){for(Se=0;Se<oe.length;Se++)if(P=oe[Se],P.getAttribute("content")===(m.content==null?null:""+m.content)&&P.getAttribute("name")===(m.name==null?null:m.name)&&P.getAttribute("property")===(m.property==null?null:m.property)&&P.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&P.getAttribute("charset")===(m.charSet==null?null:m.charSet)){oe.splice(Se,1);break t}}P=N.createElement(w),Va(P,w,m),N.head.appendChild(P);break;default:throw Error(r(468,w))}P[he]=c,Dn(P),w=P}c.stateNode=w}else MR(N,c.type,c.stateNode);else c.stateNode=jR(N,w,c.memoizedProps);else P!==w?(P===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):P.count--,w===null?MR(N,c.type,c.stateNode):jR(N,w,c.memoizedProps)):w===null&&c.stateNode!==null&&K_(c,c.memoizedProps,m.memoizedProps)}break;case 27:Ui(f,c),Hi(c),w&512&&(ra||m===null||xs(m,m.return)),m!==null&&w&4&&K_(c,c.memoizedProps,m.memoizedProps);break;case 5:if(Ui(f,c),Hi(c),w&512&&(ra||m===null||xs(m,m.return)),c.flags&32){N=c.stateNode;try{ic(N,"")}catch(gt){Tr(c,c.return,gt)}}w&4&&c.stateNode!=null&&(N=c.memoizedProps,K_(c,N,m!==null?m.memoizedProps:N)),w&1024&&(X_=!0);break;case 6:if(Ui(f,c),Hi(c),w&4){if(c.stateNode===null)throw Error(r(162));w=c.memoizedProps,m=c.stateNode;try{m.nodeValue=w}catch(gt){Tr(c,c.return,gt)}}break;case 3:if(Wy=null,N=Do,Do=Vy(f.containerInfo),Ui(f,c),Do=N,Hi(c),w&4&&m!==null&&m.memoizedState.isDehydrated)try{wm(f.containerInfo)}catch(gt){Tr(c,c.return,gt)}X_&&(X_=!1,zN(c));break;case 4:w=Do,Do=Vy(c.stateNode.containerInfo),Ui(f,c),Hi(c),Do=w;break;case 12:Ui(f,c),Hi(c);break;case 13:Ui(f,c),Hi(c),c.child.flags&8192&&c.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(ax=se()),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,J_(c,w)));break;case 22:N=c.memoizedState!==null;var ze=m!==null&&m.memoizedState!==null,dt=_l,Et=ra;if(_l=dt||N,ra=Et||ze,Ui(f,c),ra=Et,_l=dt,Hi(c),w&8192)e:for(f=c.stateNode,f._visibility=N?f._visibility&-2:f._visibility|1,N&&(m===null||ze||_l||ra||Wu(c)),m=null,f=c;;){if(f.tag===5||f.tag===26){if(m===null){ze=m=f;try{if(P=ze.stateNode,N)oe=P.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{Se=ze.stateNode;var It=ze.memoizedProps.style,mt=It!=null&&It.hasOwnProperty("display")?It.display:null;Se.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(gt){Tr(ze,ze.return,gt)}}}else if(f.tag===6){if(m===null){ze=f;try{ze.stateNode.nodeValue=N?"":ze.memoizedProps}catch(gt){Tr(ze,ze.return,gt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}w&4&&(w=c.updateQueue,w!==null&&(m=w.retryQueue,m!==null&&(w.retryQueue=null,J_(c,m))));break;case 19:Ui(f,c),Hi(c),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,J_(c,w)));break;case 30:break;case 21:break;default:Ui(f,c),Hi(c)}}function Hi(c){var f=c.flags;if(f&2){try{for(var m,w=c.return;w!==null;){if(jN(w)){m=w;break}w=w.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var N=m.stateNode,P=Z_(c);Oy(c,P,N);break;case 5:var oe=m.stateNode;m.flags&32&&(ic(oe,""),m.flags&=-33);var Se=Z_(c);Oy(c,Se,oe);break;case 3:case 4:var ze=m.stateNode.containerInfo,dt=Z_(c);Y_(c,dt,ze);break;default:throw Error(r(161))}}catch(Et){Tr(c,c.return,Et)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function zN(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;zN(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function Sc(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)PN(c,f.alternate,f),f=f.sibling}function Wu(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:xc(4,f,f.return),Wu(f);break;case 1:xs(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&IN(f,f.return,m),Wu(f);break;case 27:fm(f.stateNode);case 26:case 5:xs(f,f.return),Wu(f);break;case 22:f.memoizedState===null&&Wu(f);break;case 30:Wu(f);break;default:Wu(f)}c=c.sibling}}function Ec(c,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var w=f.alternate,N=c,P=f,oe=P.flags;switch(P.tag){case 0:case 11:case 15:Ec(N,P,m),nm(4,P);break;case 1:if(Ec(N,P,m),w=P,N=w.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(dt){Tr(w,w.return,dt)}if(w=P,N=w.updateQueue,N!==null){var Se=w.stateNode;try{var ze=N.shared.hiddenCallbacks;if(ze!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ze.length;N++)gT(ze[N],Se)}catch(dt){Tr(w,w.return,dt)}}m&&oe&64&&RN(P),rm(P,P.return);break;case 27:DN(P);case 26:case 5:Ec(N,P,m),m&&w===null&&oe&4&&ON(P),rm(P,P.return);break;case 12:Ec(N,P,m);break;case 13:Ec(N,P,m),m&&oe&4&&$N(N,P);break;case 22:P.memoizedState===null&&Ec(N,P,m),rm(P,P.return);break;case 30:break;default:Ec(N,P,m)}f=f.sibling}}function Q_(c,f){var m=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==m&&(c!=null&&c.refCount++,m!=null&&Up(m))}function ex(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Up(c))}function Ss(c,f,m,w){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)UN(c,f,m,w),f=f.sibling}function UN(c,f,m,w){var N=f.flags;switch(f.tag){case 0:case 11:case 15:Ss(c,f,m,w),N&2048&&nm(9,f);break;case 1:Ss(c,f,m,w);break;case 3:Ss(c,f,m,w),N&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Up(c)));break;case 12:if(N&2048){Ss(c,f,m,w),c=f.stateNode;try{var P=f.memoizedProps,oe=P.id,Se=P.onPostCommit;typeof Se=="function"&&Se(oe,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ze){Tr(f,f.return,ze)}}else Ss(c,f,m,w);break;case 13:Ss(c,f,m,w);break;case 23:break;case 22:P=f.stateNode,oe=f.alternate,f.memoizedState!==null?P._visibility&2?Ss(c,f,m,w):am(c,f):P._visibility&2?Ss(c,f,m,w):(P._visibility|=2,Af(c,f,m,w,(f.subtreeFlags&10256)!==0)),N&2048&&Q_(oe,f);break;case 24:Ss(c,f,m,w),N&2048&&ex(f.alternate,f);break;default:Ss(c,f,m,w)}}function Af(c,f,m,w,N){for(N=N&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var P=c,oe=f,Se=m,ze=w,dt=oe.flags;switch(oe.tag){case 0:case 11:case 15:Af(P,oe,Se,ze,N),nm(8,oe);break;case 23:break;case 22:var Et=oe.stateNode;oe.memoizedState!==null?Et._visibility&2?Af(P,oe,Se,ze,N):am(P,oe):(Et._visibility|=2,Af(P,oe,Se,ze,N)),N&&dt&2048&&Q_(oe.alternate,oe);break;case 24:Af(P,oe,Se,ze,N),N&&dt&2048&&ex(oe.alternate,oe);break;default:Af(P,oe,Se,ze,N)}f=f.sibling}}function am(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=c,w=f,N=w.flags;switch(w.tag){case 22:am(m,w),N&2048&&Q_(w.alternate,w);break;case 24:am(m,w),N&2048&&ex(w.alternate,w);break;default:am(m,w)}f=f.sibling}}var im=8192;function Tf(c){if(c.subtreeFlags&im)for(c=c.child;c!==null;)HN(c),c=c.sibling}function HN(c){switch(c.tag){case 26:Tf(c),c.flags&im&&c.memoizedState!==null&&p7(Do,c.memoizedState,c.memoizedProps);break;case 5:Tf(c);break;case 3:case 4:var f=Do;Do=Vy(c.stateNode.containerInfo),Tf(c),Do=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=im,im=16777216,Tf(c),im=f):Tf(c));break;default:Tf(c)}}function qN(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function om(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var w=f[m];Ra=w,GN(w,c)}qN(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)VN(c),c=c.sibling}function VN(c){switch(c.tag){case 0:case 11:case 15:om(c),c.flags&2048&&xc(9,c,c.return);break;case 3:om(c);break;case 12:om(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,jy(c)):om(c);break;default:om(c)}}function jy(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var w=f[m];Ra=w,GN(w,c)}qN(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:xc(8,f,f.return),jy(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,jy(f));break;default:jy(f)}c=c.sibling}}function GN(c,f){for(;Ra!==null;){var m=Ra;switch(m.tag){case 0:case 11:case 15:xc(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var w=m.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Up(m.memoizedState.cache)}if(w=m.child,w!==null)w.return=m,Ra=w;else e:for(m=c;Ra!==null;){w=Ra;var N=w.sibling,P=w.return;if(FN(w),w===m){Ra=null;break e}if(N!==null){N.return=P,Ra=N;break e}Ra=P}}}var Rz={getCacheForType:function(c){var f=Ja(ga),m=f.data.get(c);return m===void 0&&(m=c(),f.data.set(c,m)),m}},Iz=typeof WeakMap=="function"?WeakMap:Map,hr=0,jr=null,Hn=null,Kn=0,pr=0,qi=null,Cc=!1,Nf=!1,tx=!1,Sl=0,Xr=0,kc=0,Ku=0,nx=0,ho=0,Rf=0,sm=null,Ai=null,rx=!1,ax=0,Dy=1/0,My=null,Ac=null,qa=0,Tc=null,If=null,Of=0,ix=0,ox=null,WN=null,lm=0,sx=null;function Vi(){if((hr&2)!==0&&Kn!==0)return Kn&-Kn;if(te.T!==null){var c=vf;return c!==0?c:px()}return H()}function KN(){ho===0&&(ho=(Kn&536870912)===0||ir?vt():536870912);var c=fo.current;return c!==null&&(c.flags|=32),ho}function Gi(c,f,m){(c===jr&&(pr===2||pr===9)||c.cancelPendingCommit!==null)&&(jf(c,0),Nc(c,Kn,ho,!1)),tt(c,m),((hr&2)===0||c!==jr)&&(c===jr&&((hr&2)===0&&(Ku|=m),Xr===4&&Nc(c,Kn,ho,!1)),Es(c))}function ZN(c,f,m){if((hr&6)!==0)throw Error(r(327));var w=!m&&(f&124)===0&&(f&c.expiredLanes)===0||le(c,f),N=w?Dz(c,f):ux(c,f,!0),P=w;do{if(N===0){Nf&&!w&&Nc(c,f,0,!1);break}else{if(m=c.current.alternate,P&&!Oz(m)){N=ux(c,f,!1),P=!1;continue}if(N===2){if(P=f,c.errorRecoveryDisabledLanes&P)var oe=0;else oe=c.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){f=oe;e:{var Se=c;N=sm;var ze=Se.current.memoizedState.isDehydrated;if(ze&&(jf(Se,oe).flags|=256),oe=ux(Se,oe,!1),oe!==2){if(tx&&!ze){Se.errorRecoveryDisabledLanes|=P,Ku|=P,N=4;break e}P=Ai,Ai=N,P!==null&&(Ai===null?Ai=P:Ai.push.apply(Ai,P))}N=oe}if(P=!1,N!==2)continue}}if(N===1){jf(c,0),Nc(c,f,0,!0);break}e:{switch(w=c,P=N,P){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Nc(w,f,ho,!Cc);break e;case 2:Ai=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(N=ax+300-se(),10<N)){if(Nc(w,f,ho,!Cc),ke(w,0,!0)!==0)break e;w.timeoutHandle=ER(YN.bind(null,w,m,Ai,My,rx,f,ho,Ku,Rf,Cc,P,2,-0,0),N);break e}YN(w,m,Ai,My,rx,f,ho,Ku,Rf,Cc,P,0,-0,0)}}break}while(!0);Es(c)}function YN(c,f,m,w,N,P,oe,Se,ze,dt,Et,It,mt,gt){if(c.timeoutHandle=-1,It=f.subtreeFlags,(It&8192||(It&16785408)===16785408)&&(mm={stylesheets:null,count:0,unsuspend:h7},HN(f),It=m7(),It!==null)){c.cancelPendingCommit=It(rR.bind(null,c,f,P,m,w,N,oe,Se,ze,Et,1,mt,gt)),Nc(c,P,oe,!dt);return}rR(c,f,P,m,w,N,oe,Se,ze)}function Oz(c){for(var f=c;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var w=0;w<m.length;w++){var N=m[w],P=N.getSnapshot;N=N.value;try{if(!Xa(P(),N))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Nc(c,f,m,w){f&=~nx,f&=~Ku,c.suspendedLanes|=f,c.pingedLanes&=~f,w&&(c.warmLanes|=f),w=c.expirationTimes;for(var N=f;0<N;){var P=31-Gt(N),oe=1<<P;w[P]=-1,N&=~oe}m!==0&&je(c,m,f)}function Py(){return(hr&6)===0?(cm(0),!1):!0}function lx(){if(Hn!==null){if(pr===0)var c=Hn.return;else c=Hn,ml=Uu=null,C_(c),Cf=null,Qp=0,c=Hn;for(;c!==null;)NN(c.alternate,c),c=c.return;Hn=null}}function jf(c,f){var m=c.timeoutHandle;m!==-1&&(c.timeoutHandle=-1,Yz(m)),m=c.cancelPendingCommit,m!==null&&(c.cancelPendingCommit=null,m()),lx(),jr=c,Hn=m=fl(c.current,null),Kn=f,pr=0,qi=null,Cc=!1,Nf=le(c,f),tx=!1,Rf=ho=nx=Ku=kc=Xr=0,Ai=sm=null,rx=!1,(f&8)!==0&&(f|=f&32);var w=c.entangledLanes;if(w!==0)for(c=c.entanglements,w&=f;0<w;){var N=31-Gt(w),P=1<<N;f|=c[N],w&=~P}return Sl=f,xn(),m}function XN(c,f){Ln=null,te.H=Sy,f===qp||f===hy?(f=pT(),pr=3):f===dT?(f=pT(),pr=4):pr=f===mN?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,qi=f,Hn===null&&(Xr=1,Ty(c,pn(f,c.current)))}function JN(){var c=te.H;return te.H=Sy,c===null?Sy:c}function QN(){var c=te.A;return te.A=Rz,c}function cx(){Xr=4,Cc||(Kn&4194048)!==Kn&&fo.current!==null||(Nf=!0),(kc&134217727)===0&&(Ku&134217727)===0||jr===null||Nc(jr,Kn,ho,!1)}function ux(c,f,m){var w=hr;hr|=2;var N=JN(),P=QN();(jr!==c||Kn!==f)&&(My=null,jf(c,f)),f=!1;var oe=Xr;e:do try{if(pr!==0&&Hn!==null){var Se=Hn,ze=qi;switch(pr){case 8:lx(),oe=6;break e;case 3:case 2:case 9:case 6:fo.current===null&&(f=!0);var dt=pr;if(pr=0,qi=null,Df(c,Se,ze,dt),m&&Nf){oe=0;break e}break;default:dt=pr,pr=0,qi=null,Df(c,Se,ze,dt)}}jz(),oe=Xr;break}catch(Et){XN(c,Et)}while(!0);return f&&c.shellSuspendCounter++,ml=Uu=null,hr=w,te.H=N,te.A=P,Hn===null&&(jr=null,Kn=0,xn()),oe}function jz(){for(;Hn!==null;)eR(Hn)}function Dz(c,f){var m=hr;hr|=2;var w=JN(),N=QN();jr!==c||Kn!==f?(My=null,Dy=se()+500,jf(c,f)):Nf=le(c,f);e:do try{if(pr!==0&&Hn!==null){f=Hn;var P=qi;t:switch(pr){case 1:pr=0,qi=null,Df(c,f,P,1);break;case 2:case 9:if(fT(P)){pr=0,qi=null,tR(f);break}f=function(){pr!==2&&pr!==9||jr!==c||(pr=7),Es(c)},P.then(f,f);break e;case 3:pr=7;break e;case 4:pr=5;break e;case 7:fT(P)?(pr=0,qi=null,tR(f)):(pr=0,qi=null,Df(c,f,P,7));break;case 5:var oe=null;switch(Hn.tag){case 26:oe=Hn.memoizedState;case 5:case 27:var Se=Hn;if(!oe||PR(oe)){pr=0,qi=null;var ze=Se.sibling;if(ze!==null)Hn=ze;else{var dt=Se.return;dt!==null?(Hn=dt,Fy(dt)):Hn=null}break t}}pr=0,qi=null,Df(c,f,P,5);break;case 6:pr=0,qi=null,Df(c,f,P,6);break;case 8:lx(),Xr=6;break e;default:throw Error(r(462))}}Mz();break}catch(Et){XN(c,Et)}while(!0);return ml=Uu=null,te.H=w,te.A=N,hr=m,Hn!==null?0:(jr=null,Kn=0,xn(),Xr)}function Mz(){for(;Hn!==null&&!me();)eR(Hn)}function eR(c){var f=AN(c.alternate,c,Sl);c.memoizedProps=c.pendingProps,f===null?Fy(c):Hn=f}function tR(c){var f=c,m=f.alternate;switch(f.tag){case 15:case 0:f=_N(m,f,f.pendingProps,f.type,void 0,Kn);break;case 11:f=_N(m,f,f.pendingProps,f.type.render,f.ref,Kn);break;case 5:C_(f);default:NN(m,f),f=Hn=nT(f,Sl),f=AN(m,f,Sl)}c.memoizedProps=c.pendingProps,f===null?Fy(c):Hn=f}function Df(c,f,m,w){ml=Uu=null,C_(f),Cf=null,Qp=0;var N=f.return;try{if(Ez(c,N,f,m,Kn)){Xr=1,Ty(c,pn(m,c.current)),Hn=null;return}}catch(P){if(N!==null)throw Hn=N,P;Xr=1,Ty(c,pn(m,c.current)),Hn=null;return}f.flags&32768?(ir||w===1?c=!0:Nf||(Kn&536870912)!==0?c=!1:(Cc=c=!0,(w===2||w===9||w===3||w===6)&&(w=fo.current,w!==null&&w.tag===13&&(w.flags|=16384))),nR(f,c)):Fy(f)}function Fy(c){var f=c;do{if((f.flags&32768)!==0){nR(f,Cc);return}c=f.return;var m=kz(f.alternate,f,Sl);if(m!==null){Hn=m;return}if(f=f.sibling,f!==null){Hn=f;return}Hn=f=c}while(f!==null);Xr===0&&(Xr=5)}function nR(c,f){do{var m=Az(c.alternate,c);if(m!==null){m.flags&=32767,Hn=m;return}if(m=c.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(c=c.sibling,c!==null)){Hn=c;return}Hn=c=m}while(c!==null);Xr=6,Hn=null}function rR(c,f,m,w,N,P,oe,Se,ze){c.cancelPendingCommit=null;do Ly();while(qa!==0);if((hr&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if(P=f.lanes|f.childLanes,P|=Ua,ge(c,m,P,oe,Se,ze),c===jr&&(Hn=jr=null,Kn=0),If=f,Tc=c,Of=m,ix=P,ox=N,WN=w,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,$z(Me,function(){return lR(),null})):(c.callbackNode=null,c.callbackPriority=0),w=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||w){w=te.T,te.T=null,N=re.p,re.p=2,oe=hr,hr|=4;try{Tz(c,f,m)}finally{hr=oe,re.p=N,te.T=w}}qa=1,aR(),iR(),oR()}}function aR(){if(qa===1){qa=0;var c=Tc,f=If,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=te.T,te.T=null;var w=re.p;re.p=2;var N=hr;hr|=4;try{BN(f,c);var P=xx,oe=ce(c.containerInfo),Se=P.focusedElem,ze=P.selectionRange;if(oe!==Se&&Se&&Se.ownerDocument&&ne(Se.ownerDocument.documentElement,Se)){if(ze!==null&&we(Se)){var dt=ze.start,Et=ze.end;if(Et===void 0&&(Et=dt),"selectionStart"in Se)Se.selectionStart=dt,Se.selectionEnd=Math.min(Et,Se.value.length);else{var It=Se.ownerDocument||document,mt=It&&It.defaultView||window;if(mt.getSelection){var gt=mt.getSelection(),Sn=Se.textContent.length,yn=Math.min(ze.start,Sn),xr=ze.end===void 0?yn:Math.min(ze.end,Sn);!gt.extend&&yn>xr&&(oe=xr,xr=yn,yn=oe);var rt=Z(Se,yn),Ze=Z(Se,xr);if(rt&&Ze&&(gt.rangeCount!==1||gt.anchorNode!==rt.node||gt.anchorOffset!==rt.offset||gt.focusNode!==Ze.node||gt.focusOffset!==Ze.offset)){var ct=It.createRange();ct.setStart(rt.node,rt.offset),gt.removeAllRanges(),yn>xr?(gt.addRange(ct),gt.extend(Ze.node,Ze.offset)):(ct.setEnd(Ze.node,Ze.offset),gt.addRange(ct))}}}}for(It=[],gt=Se;gt=gt.parentNode;)gt.nodeType===1&&It.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof Se.focus=="function"&&Se.focus(),Se=0;Se<It.length;Se++){var Tt=It[Se];Tt.element.scrollLeft=Tt.left,Tt.element.scrollTop=Tt.top}}Yy=!!_x,xx=_x=null}finally{hr=N,re.p=w,te.T=m}}c.current=f,qa=2}}function iR(){if(qa===2){qa=0;var c=Tc,f=If,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=te.T,te.T=null;var w=re.p;re.p=2;var N=hr;hr|=4;try{PN(c,f.alternate,f)}finally{hr=N,re.p=w,te.T=m}}qa=3}}function oR(){if(qa===4||qa===3){qa=0,Ae();var c=Tc,f=If,m=Of,w=WN;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?qa=5:(qa=0,If=Tc=null,sR(c,c.pendingLanes));var N=c.pendingLanes;if(N===0&&(Ac=null),pe(m),f=f.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(_t,f,void 0,(f.current.flags&128)===128)}catch{}if(w!==null){f=te.T,N=re.p,re.p=2,te.T=null;try{for(var P=c.onRecoverableError,oe=0;oe<w.length;oe++){var Se=w[oe];P(Se.value,{componentStack:Se.stack})}}finally{te.T=f,re.p=N}}(Of&3)!==0&&Ly(),Es(c),N=c.pendingLanes,(m&4194090)!==0&&(N&42)!==0?c===sx?lm++:(lm=0,sx=c):lm=0,cm(0)}}function sR(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,Up(f)))}function Ly(c){return aR(),iR(),oR(),lR()}function lR(){if(qa!==5)return!1;var c=Tc,f=ix;ix=0;var m=pe(Of),w=te.T,N=re.p;try{re.p=32>m?32:m,te.T=null,m=ox,ox=null;var P=Tc,oe=Of;if(qa=0,If=Tc=null,Of=0,(hr&6)!==0)throw Error(r(331));var Se=hr;if(hr|=4,VN(P.current),UN(P,P.current,oe,m),hr=Se,cm(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(_t,P)}catch{}return!0}finally{re.p=N,te.T=w,sR(c,f)}}function cR(c,f,m){f=pn(m,f),f=$_(c.stateNode,f,2),c=bc(c,f,2),c!==null&&(tt(c,2),Es(c))}function Tr(c,f,m){if(c.tag===3)cR(c,c,m);else for(;f!==null;){if(f.tag===3){cR(f,c,m);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Ac===null||!Ac.has(w))){c=pn(m,c),m=hN(2),w=bc(f,m,2),w!==null&&(pN(m,w,f,c),tt(w,2),Es(w));break}}f=f.return}}function dx(c,f,m){var w=c.pingCache;if(w===null){w=c.pingCache=new Iz;var N=new Set;w.set(f,N)}else N=w.get(f),N===void 0&&(N=new Set,w.set(f,N));N.has(m)||(tx=!0,N.add(m),c=Pz.bind(null,c,f,m),f.then(c,c))}function Pz(c,f,m){var w=c.pingCache;w!==null&&w.delete(f),c.pingedLanes|=c.suspendedLanes&m,c.warmLanes&=~m,jr===c&&(Kn&m)===m&&(Xr===4||Xr===3&&(Kn&62914560)===Kn&&300>se()-ax?(hr&2)===0&&jf(c,0):nx|=m,Rf===Kn&&(Rf=0)),Es(c)}function uR(c,f){f===0&&(f=M()),c=jo(c,f),c!==null&&(tt(c,f),Es(c))}function Fz(c){var f=c.memoizedState,m=0;f!==null&&(m=f.retryLane),uR(c,m)}function Lz(c,f){var m=0;switch(c.tag){case 13:var w=c.stateNode,N=c.memoizedState;N!==null&&(m=N.retryLane);break;case 19:w=c.stateNode;break;case 22:w=c.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(f),uR(c,m)}function $z(c,f){return Ie(c,f)}var $y=null,Mf=null,fx=!1,By=!1,hx=!1,Zu=0;function Es(c){c!==Mf&&c.next===null&&(Mf===null?$y=Mf=c:Mf=Mf.next=c),By=!0,fx||(fx=!0,zz())}function cm(c,f){if(!hx&&By){hx=!0;do for(var m=!1,w=$y;w!==null;){if(c!==0){var N=w.pendingLanes;if(N===0)var P=0;else{var oe=w.suspendedLanes,Se=w.pingedLanes;P=(1<<31-Gt(42|c)+1)-1,P&=N&~(oe&~Se),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(m=!0,pR(w,P))}else P=Kn,P=ke(w,w===jr?P:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(P&3)===0||le(w,P)||(m=!0,pR(w,P));w=w.next}while(m);hx=!1}}function Bz(){dR()}function dR(){By=fx=!1;var c=0;Zu!==0&&(Zz()&&(c=Zu),Zu=0);for(var f=se(),m=null,w=$y;w!==null;){var N=w.next,P=fR(w,f);P===0?(w.next=null,m===null?$y=N:m.next=N,N===null&&(Mf=m)):(m=w,(c!==0||(P&3)!==0)&&(By=!0)),w=N}cm(c)}function fR(c,f){for(var m=c.suspendedLanes,w=c.pingedLanes,N=c.expirationTimes,P=c.pendingLanes&-62914561;0<P;){var oe=31-Gt(P),Se=1<<oe,ze=N[oe];ze===-1?((Se&m)===0||(Se&w)!==0)&&(N[oe]=ft(Se,f)):ze<=f&&(c.expiredLanes|=Se),P&=~Se}if(f=jr,m=Kn,m=ke(c,c===f?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w=c.callbackNode,m===0||c===f&&(pr===2||pr===9)||c.cancelPendingCommit!==null)return w!==null&&w!==null&&V(w),c.callbackNode=null,c.callbackPriority=0;if((m&3)===0||le(c,m)){if(f=m&-m,f===c.callbackPriority)return f;switch(w!==null&&V(w),pe(m)){case 2:case 8:m=xe;break;case 32:m=Me;break;case 268435456:m=We;break;default:m=Me}return w=hR.bind(null,c),m=Ie(m,w),c.callbackPriority=f,c.callbackNode=m,f}return w!==null&&w!==null&&V(w),c.callbackPriority=2,c.callbackNode=null,2}function hR(c,f){if(qa!==0&&qa!==5)return c.callbackNode=null,c.callbackPriority=0,null;var m=c.callbackNode;if(Ly()&&c.callbackNode!==m)return null;var w=Kn;return w=ke(c,c===jr?w:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w===0?null:(ZN(c,w,f),fR(c,se()),c.callbackNode!=null&&c.callbackNode===m?hR.bind(null,c):null)}function pR(c,f){if(Ly())return null;ZN(c,f,!0)}function zz(){Xz(function(){(hr&6)!==0?Ie(Q,Bz):dR()})}function px(){return Zu===0&&(Zu=vt()),Zu}function mR(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:rl(""+c)}function gR(c,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,c.id&&m.setAttribute("form",c.id),f.parentNode.insertBefore(m,f),c=new FormData(c),m.parentNode.removeChild(m),c}function Uz(c,f,m,w,N){if(f==="submit"&&m&&m.stateNode===N){var P=mR((N[Te]||null).action),oe=w.submitter;oe&&(f=(f=oe[Te]||null)?mR(f.formAction):oe.getAttribute("formAction"),f!==null&&(P=f,oe=null));var Se=new ef("action","action",null,w,N);c.push({event:Se,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Zu!==0){var ze=oe?gR(N,oe):new FormData(N);D_(m,{pending:!0,data:ze,method:N.method,action:P},null,ze)}}else typeof P=="function"&&(Se.preventDefault(),ze=oe?gR(N,oe):new FormData(N),D_(m,{pending:!0,data:ze,method:N.method,action:P},P,ze))},currentTarget:N}]})}}for(var mx=0;mx<Zt.length;mx++){var gx=Zt[mx],Hz=gx.toLowerCase(),qz=gx[0].toUpperCase()+gx.slice(1);Lt(Hz,"on"+qz)}Lt(ht,"onAnimationEnd"),Lt(bt,"onAnimationIteration"),Lt(wt,"onAnimationStart"),Lt("dblclick","onDoubleClick"),Lt("focusin","onFocus"),Lt("focusout","onBlur"),Lt(St,"onTransitionRun"),Lt(zt,"onTransitionStart"),Lt(Kt,"onTransitionCancel"),Lt(Ft,"onTransitionEnd"),fs("onMouseEnter",["mouseout","mouseover"]),fs("onMouseLeave",["mouseout","mouseover"]),fs("onPointerEnter",["pointerout","pointerover"]),fs("onPointerLeave",["pointerout","pointerover"]),ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var um="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(um));function yR(c,f){f=(f&4)!==0;for(var m=0;m<c.length;m++){var w=c[m],N=w.event;w=w.listeners;e:{var P=void 0;if(f)for(var oe=w.length-1;0<=oe;oe--){var Se=w[oe],ze=Se.instance,dt=Se.currentTarget;if(Se=Se.listener,ze!==P&&N.isPropagationStopped())break e;P=Se,N.currentTarget=dt;try{P(N)}catch(Et){Ay(Et)}N.currentTarget=null,P=ze}else for(oe=0;oe<w.length;oe++){if(Se=w[oe],ze=Se.instance,dt=Se.currentTarget,Se=Se.listener,ze!==P&&N.isPropagationStopped())break e;P=Se,N.currentTarget=dt;try{P(N)}catch(Et){Ay(Et)}N.currentTarget=null,P=ze}}}}function qn(c,f){var m=f[pt];m===void 0&&(m=f[pt]=new Set);var w=c+"__bubble";m.has(w)||(bR(f,c,2,!1),m.add(w))}function yx(c,f,m){var w=0;f&&(w|=4),bR(m,c,w,f)}var zy="_reactListening"+Math.random().toString(36).slice(2);function bx(c){if(!c[zy]){c[zy]=!0,ui.forEach(function(m){m!=="selectionchange"&&(Vz.has(m)||yx(m,!1,c),yx(m,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[zy]||(f[zy]=!0,yx("selectionchange",!1,f))}}function bR(c,f,m,w){switch(UR(f)){case 2:var N=b7;break;case 8:N=v7;break;default:N=Ox}m=N.bind(null,f,m,c),N=void 0,!Ep||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(N=!0),w?N!==void 0?c.addEventListener(f,m,{capture:!0,passive:N}):c.addEventListener(f,m,!0):N!==void 0?c.addEventListener(f,m,{passive:N}):c.addEventListener(f,m,!1)}function vx(c,f,m,w,N){var P=w;if((f&1)===0&&(f&2)===0&&w!==null)e:for(;;){if(w===null)return;var oe=w.tag;if(oe===3||oe===4){var Se=w.stateNode.containerInfo;if(Se===N)break;if(oe===4)for(oe=w.return;oe!==null;){var ze=oe.tag;if((ze===3||ze===4)&&oe.stateNode.containerInfo===N)return;oe=oe.return}for(;Se!==null;){if(oe=Tn(Se),oe===null)return;if(ze=oe.tag,ze===5||ze===6||ze===26||ze===27){w=P=oe;continue e}Se=Se.parentNode}}w=w.return}sc(function(){var dt=P,Et=Jd(m),It=[];e:{var mt=Ht.get(c);if(mt!==void 0){var gt=ef,Sn=c;switch(c){case"keypress":if(uc(m)===0)break e;case"keydown":case"keyup":gt=cf;break;case"focusin":Sn="focus",gt=dc;break;case"focusout":Sn="blur",gt=dc;break;case"beforeblur":case"afterblur":gt=dc;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=rf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=Yg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Ip;break;case ht:case bt:case wt:gt=Xg;break;case Ft:gt=Op;break;case"scroll":case"scrollend":gt=tf;break;case"wheel":gt=df;break;case"copy":case"cut":case"paste":gt=sf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=Rp;break;case"toggle":case"beforetoggle":gt=ey}var yn=(f&4)!==0,xr=!yn&&(c==="scroll"||c==="scrollend"),rt=yn?mt!==null?mt+"Capture":null:mt;yn=[];for(var Ze=dt,ct;Ze!==null;){var Tt=Ze;if(ct=Tt.stateNode,Tt=Tt.tag,Tt!==5&&Tt!==26&&Tt!==27||ct===null||rt===null||(Tt=ol(Ze,rt),Tt!=null&&yn.push(dm(Ze,Tt,ct))),xr)break;Ze=Ze.return}0<yn.length&&(mt=new gt(mt,Sn,null,m,Et),It.push({event:mt,listeners:yn}))}}if((f&7)===0){e:{if(mt=c==="mouseover"||c==="pointerover",gt=c==="mouseout"||c==="pointerout",mt&&m!==io&&(Sn=m.relatedTarget||m.fromElement)&&(Tn(Sn)||Sn[He]))break e;if((gt||mt)&&(mt=Et.window===Et?Et:(mt=Et.ownerDocument)?mt.defaultView||mt.parentWindow:window,gt?(Sn=m.relatedTarget||m.toElement,gt=dt,Sn=Sn?Tn(Sn):null,Sn!==null&&(xr=i(Sn),yn=Sn.tag,Sn!==xr||yn!==5&&yn!==27&&yn!==6)&&(Sn=null)):(gt=null,Sn=dt),gt!==Sn)){if(yn=rf,Tt="onMouseLeave",rt="onMouseEnter",Ze="mouse",(c==="pointerout"||c==="pointerover")&&(yn=Rp,Tt="onPointerLeave",rt="onPointerEnter",Ze="pointer"),xr=gt==null?mt:br(gt),ct=Sn==null?mt:br(Sn),mt=new yn(Tt,Ze+"leave",gt,m,Et),mt.target=xr,mt.relatedTarget=ct,Tt=null,Tn(Et)===dt&&(yn=new yn(rt,Ze+"enter",Sn,m,Et),yn.target=ct,yn.relatedTarget=xr,Tt=yn),xr=Tt,gt&&Sn)t:{for(yn=gt,rt=Sn,Ze=0,ct=yn;ct;ct=Pf(ct))Ze++;for(ct=0,Tt=rt;Tt;Tt=Pf(Tt))ct++;for(;0<Ze-ct;)yn=Pf(yn),Ze--;for(;0<ct-Ze;)rt=Pf(rt),ct--;for(;Ze--;){if(yn===rt||rt!==null&&yn===rt.alternate)break t;yn=Pf(yn),rt=Pf(rt)}yn=null}else yn=null;gt!==null&&vR(It,mt,gt,yn,!1),Sn!==null&&xr!==null&&vR(It,xr,Sn,yn,!0)}}e:{if(mt=dt?br(dt):window,gt=mt.nodeName&&mt.nodeName.toLowerCase(),gt==="select"||gt==="input"&&mt.type==="file")var nn=Pu;else if(pf(mt))if(so)nn=pc;else{nn=dl;var Bn=oy}else gt=mt.nodeName,!gt||gt.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?dt&&Sp(dt.elementType)&&(nn=Pu):nn=Fp;if(nn&&(nn=nn(c,dt))){Pp(It,nn,m,Et);break e}Bn&&Bn(c,mt,dt),c==="focusout"&&dt&&mt.type==="number"&&dt.memoizedProps.value!=null&&rc(mt,"number",mt.value)}switch(Bn=dt?br(dt):window,c){case"focusin":(pf(Bn)||Bn.contentEditable==="true")&&($e=Bn,Ge=dt,Ye=null);break;case"focusout":Ye=Ge=$e=null;break;case"mousedown":nt=!0;break;case"contextmenu":case"mouseup":case"dragend":nt=!1,qe(It,m,Et);break;case"selectionchange":if(De)break;case"keydown":case"keyup":qe(It,m,Et)}var un;if(Du)e:{switch(c){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else ul?Mp(c,m)&&(wn="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(wn="onCompositionStart");wn&&(ff&&m.locale!=="ko"&&(ul||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&ul&&(un=cc()):(oo=Et,Qd="value"in oo?oo.value:oo.textContent,ul=!0)),Bn=Uy(dt,wn),0<Bn.length&&(wn=new lf(wn,c,null,m,Et),It.push({event:wn,listeners:Bn}),un?wn.data=un:(un=ny(m),un!==null&&(wn.data=un)))),(un=Q1?ry(c,m):e_(c,m))&&(wn=Uy(dt,"onBeforeInput"),0<wn.length&&(Bn=new lf("onBeforeInput","beforeinput",null,m,Et),It.push({event:Bn,listeners:wn}),Bn.data=un)),Uz(It,c,dt,m,Et)}yR(It,f)})}function dm(c,f,m){return{instance:c,listener:f,currentTarget:m}}function Uy(c,f){for(var m=f+"Capture",w=[];c!==null;){var N=c,P=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||P===null||(N=ol(c,m),N!=null&&w.unshift(dm(c,N,P)),N=ol(c,f),N!=null&&w.push(dm(c,N,P))),c.tag===3)return w;c=c.return}return[]}function Pf(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function vR(c,f,m,w,N){for(var P=f._reactName,oe=[];m!==null&&m!==w;){var Se=m,ze=Se.alternate,dt=Se.stateNode;if(Se=Se.tag,ze!==null&&ze===w)break;Se!==5&&Se!==26&&Se!==27||dt===null||(ze=dt,N?(dt=ol(m,P),dt!=null&&oe.unshift(dm(m,dt,ze))):N||(dt=ol(m,P),dt!=null&&oe.push(dm(m,dt,ze)))),m=m.return}oe.length!==0&&c.push({event:f,listeners:oe})}var Gz=/\r\n?/g,Wz=/\u0000|\uFFFD/g;function wR(c){return(typeof c=="string"?c:""+c).replace(Gz,`
`).replace(Wz,"")}function _R(c,f){return f=wR(f),wR(c)===f}function Hy(){}function _r(c,f,m,w,N,P){switch(m){case"children":typeof w=="string"?f==="body"||f==="textarea"&&w===""||ic(c,w):(typeof w=="number"||typeof w=="bigint")&&f!=="body"&&ic(c,""+w);break;case"className":el(c,"class",w);break;case"tabIndex":el(c,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":el(c,m,w);break;case"style":Kg(c,w,P);break;case"data":if(f!=="object"){el(c,"data",w);break}case"src":case"href":if(w===""&&(f!=="a"||m!=="href")){c.removeAttribute(m);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(m);break}w=rl(""+w),c.setAttribute(m,w);break;case"action":case"formAction":if(typeof w=="function"){c.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(m==="formAction"?(f!=="input"&&_r(c,f,"name",N.name,N,null),_r(c,f,"formEncType",N.formEncType,N,null),_r(c,f,"formMethod",N.formMethod,N,null),_r(c,f,"formTarget",N.formTarget,N,null)):(_r(c,f,"encType",N.encType,N,null),_r(c,f,"method",N.method,N,null),_r(c,f,"target",N.target,N,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(m);break}w=rl(""+w),c.setAttribute(m,w);break;case"onClick":w!=null&&(c.onclick=Hy);break;case"onScroll":w!=null&&qn("scroll",c);break;case"onScrollEnd":w!=null&&qn("scrollend",c);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"multiple":c.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":c.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){c.removeAttribute("xlink:href");break}m=rl(""+w),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(m,""+w):c.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(m,""):c.removeAttribute(m);break;case"capture":case"download":w===!0?c.setAttribute(m,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(m,w):c.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?c.setAttribute(m,w):c.removeAttribute(m);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?c.removeAttribute(m):c.setAttribute(m,w);break;case"popover":qn("beforetoggle",c),qn("toggle",c),Io(c,"popover",w);break;case"xlinkActuate":$i(c,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":$i(c,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":$i(c,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":$i(c,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":$i(c,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":$i(c,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":$i(c,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":$i(c,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":$i(c,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Io(c,"is",w);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=fi.get(m)||m,Io(c,m,w))}}function wx(c,f,m,w,N,P){switch(m){case"style":Kg(c,w,P);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"children":typeof w=="string"?ic(c,w):(typeof w=="number"||typeof w=="bigint")&&ic(c,""+w);break;case"onScroll":w!=null&&qn("scroll",c);break;case"onScrollEnd":w!=null&&qn("scrollend",c);break;case"onClick":w!=null&&(c.onclick=Hy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!us.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(N=m.endsWith("Capture"),f=m.slice(2,N?m.length-7:void 0),P=c[Te]||null,P=P!=null?P[m]:null,typeof P=="function"&&c.removeEventListener(f,P,N),typeof w=="function")){typeof P!="function"&&P!==null&&(m in c?c[m]=null:c.hasAttribute(m)&&c.removeAttribute(m)),c.addEventListener(f,w,N);break e}m in c?c[m]=w:w===!0?c.setAttribute(m,""):Io(c,m,w)}}}function Va(c,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qn("error",c),qn("load",c);var w=!1,N=!1,P;for(P in m)if(m.hasOwnProperty(P)){var oe=m[P];if(oe!=null)switch(P){case"src":w=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:_r(c,f,P,oe,m,null)}}N&&_r(c,f,"srcSet",m.srcSet,m,null),w&&_r(c,f,"src",m.src,m,null);return;case"input":qn("invalid",c);var Se=P=oe=N=null,ze=null,dt=null;for(w in m)if(m.hasOwnProperty(w)){var Et=m[w];if(Et!=null)switch(w){case"name":N=Et;break;case"type":oe=Et;break;case"checked":ze=Et;break;case"defaultChecked":dt=Et;break;case"value":P=Et;break;case"defaultValue":Se=Et;break;case"children":case"dangerouslySetInnerHTML":if(Et!=null)throw Error(r(137,f));break;default:_r(c,f,w,Et,m,null)}}_p(c,P,Se,ze,dt,oe,N,!1),ms(c);return;case"select":qn("invalid",c),w=oe=P=null;for(N in m)if(m.hasOwnProperty(N)&&(Se=m[N],Se!=null))switch(N){case"value":P=Se;break;case"defaultValue":oe=Se;break;case"multiple":w=Se;default:_r(c,f,N,Se,m,null)}f=P,m=oe,c.multiple=!!w,f!=null?nl(c,!!w,f,!1):m!=null&&nl(c,!!w,m,!0);return;case"textarea":qn("invalid",c),P=N=w=null;for(oe in m)if(m.hasOwnProperty(oe)&&(Se=m[oe],Se!=null))switch(oe){case"value":w=Se;break;case"defaultValue":N=Se;break;case"children":P=Se;break;case"dangerouslySetInnerHTML":if(Se!=null)throw Error(r(91));break;default:_r(c,f,oe,Se,m,null)}xp(c,w,N,P),ms(c);return;case"option":for(ze in m)if(m.hasOwnProperty(ze)&&(w=m[ze],w!=null))switch(ze){case"selected":c.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:_r(c,f,ze,w,m,null)}return;case"dialog":qn("beforetoggle",c),qn("toggle",c),qn("cancel",c),qn("close",c);break;case"iframe":case"object":qn("load",c);break;case"video":case"audio":for(w=0;w<um.length;w++)qn(um[w],c);break;case"image":qn("error",c),qn("load",c);break;case"details":qn("toggle",c);break;case"embed":case"source":case"link":qn("error",c),qn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in m)if(m.hasOwnProperty(dt)&&(w=m[dt],w!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:_r(c,f,dt,w,m,null)}return;default:if(Sp(f)){for(Et in m)m.hasOwnProperty(Et)&&(w=m[Et],w!==void 0&&wx(c,f,Et,w,m,void 0));return}}for(Se in m)m.hasOwnProperty(Se)&&(w=m[Se],w!=null&&_r(c,f,Se,w,m,null))}function Kz(c,f,m,w){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,P=null,oe=null,Se=null,ze=null,dt=null,Et=null;for(gt in m){var It=m[gt];if(m.hasOwnProperty(gt)&&It!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":ze=It;default:w.hasOwnProperty(gt)||_r(c,f,gt,null,w,It)}}for(var mt in w){var gt=w[mt];if(It=m[mt],w.hasOwnProperty(mt)&&(gt!=null||It!=null))switch(mt){case"type":P=gt;break;case"name":N=gt;break;case"checked":dt=gt;break;case"defaultChecked":Et=gt;break;case"value":oe=gt;break;case"defaultValue":Se=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(r(137,f));break;default:gt!==It&&_r(c,f,mt,gt,w,It)}}nc(c,oe,Se,ze,dt,Et,P,N);return;case"select":gt=oe=Se=mt=null;for(P in m)if(ze=m[P],m.hasOwnProperty(P)&&ze!=null)switch(P){case"value":break;case"multiple":gt=ze;default:w.hasOwnProperty(P)||_r(c,f,P,null,w,ze)}for(N in w)if(P=w[N],ze=m[N],w.hasOwnProperty(N)&&(P!=null||ze!=null))switch(N){case"value":mt=P;break;case"defaultValue":Se=P;break;case"multiple":oe=P;default:P!==ze&&_r(c,f,N,P,w,ze)}f=Se,m=oe,w=gt,mt!=null?nl(c,!!m,mt,!1):!!w!=!!m&&(f!=null?nl(c,!!m,f,!0):nl(c,!!m,m?[]:"",!1));return;case"textarea":gt=mt=null;for(Se in m)if(N=m[Se],m.hasOwnProperty(Se)&&N!=null&&!w.hasOwnProperty(Se))switch(Se){case"value":break;case"children":break;default:_r(c,f,Se,null,w,N)}for(oe in w)if(N=w[oe],P=m[oe],w.hasOwnProperty(oe)&&(N!=null||P!=null))switch(oe){case"value":mt=N;break;case"defaultValue":gt=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:N!==P&&_r(c,f,oe,N,w,P)}ac(c,mt,gt);return;case"option":for(var Sn in m)if(mt=m[Sn],m.hasOwnProperty(Sn)&&mt!=null&&!w.hasOwnProperty(Sn))switch(Sn){case"selected":c.selected=!1;break;default:_r(c,f,Sn,null,w,mt)}for(ze in w)if(mt=w[ze],gt=m[ze],w.hasOwnProperty(ze)&&mt!==gt&&(mt!=null||gt!=null))switch(ze){case"selected":c.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:_r(c,f,ze,mt,w,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yn in m)mt=m[yn],m.hasOwnProperty(yn)&&mt!=null&&!w.hasOwnProperty(yn)&&_r(c,f,yn,null,w,mt);for(dt in w)if(mt=w[dt],gt=m[dt],w.hasOwnProperty(dt)&&mt!==gt&&(mt!=null||gt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:_r(c,f,dt,mt,w,gt)}return;default:if(Sp(f)){for(var xr in m)mt=m[xr],m.hasOwnProperty(xr)&&mt!==void 0&&!w.hasOwnProperty(xr)&&wx(c,f,xr,void 0,w,mt);for(Et in w)mt=w[Et],gt=m[Et],!w.hasOwnProperty(Et)||mt===gt||mt===void 0&&gt===void 0||wx(c,f,Et,mt,w,gt);return}}for(var rt in m)mt=m[rt],m.hasOwnProperty(rt)&&mt!=null&&!w.hasOwnProperty(rt)&&_r(c,f,rt,null,w,mt);for(It in w)mt=w[It],gt=m[It],!w.hasOwnProperty(It)||mt===gt||mt==null&&gt==null||_r(c,f,It,mt,w,gt)}var _x=null,xx=null;function qy(c){return c.nodeType===9?c:c.ownerDocument}function xR(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SR(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function Sx(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Ex=null;function Zz(){var c=window.event;return c&&c.type==="popstate"?c===Ex?!1:(Ex=c,!0):(Ex=null,!1)}var ER=typeof setTimeout=="function"?setTimeout:void 0,Yz=typeof clearTimeout=="function"?clearTimeout:void 0,CR=typeof Promise=="function"?Promise:void 0,Xz=typeof queueMicrotask=="function"?queueMicrotask:typeof CR<"u"?function(c){return CR.resolve(null).then(c).catch(Jz)}:ER;function Jz(c){setTimeout(function(){throw c})}function Rc(c){return c==="head"}function kR(c,f){var m=f,w=0,N=0;do{var P=m.nextSibling;if(c.removeChild(m),P&&P.nodeType===8)if(m=P.data,m==="/$"){if(0<w&&8>w){m=w;var oe=c.ownerDocument;if(m&1&&fm(oe.documentElement),m&2&&fm(oe.body),m&4)for(m=oe.head,fm(m),oe=m.firstChild;oe;){var Se=oe.nextSibling,ze=oe.nodeName;oe[Mt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||m.removeChild(oe),oe=Se}}if(N===0){c.removeChild(P),wm(f);return}N--}else m==="$"||m==="$?"||m==="$!"?N++:w=m.charCodeAt(0)-48;else w=0;m=P}while(m);wm(f)}function Cx(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Cx(m),Xt(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}c.removeChild(m)}}function Qz(c,f,m,w){for(;c.nodeType===1;){var N=m;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!w&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(w){if(!c[Mt])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(P=c.getAttribute("rel"),P==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(P!==N.rel||c.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||c.getAttribute("title")!==(N.title==null?null:N.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(P=c.getAttribute("src"),(P!==(N.src==null?null:N.src)||c.getAttribute("type")!==(N.type==null?null:N.type)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&P&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var P=N.name==null?null:""+N.name;if(N.type==="hidden"&&c.getAttribute("name")===P)return c}else return c;if(c=Mo(c.nextSibling),c===null)break}return null}function e7(c,f,m){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=Mo(c.nextSibling),c===null))return null;return c}function kx(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function t7(c,f){var m=c.ownerDocument;if(c.data!=="$?"||m.readyState==="complete")f();else{var w=function(){f(),m.removeEventListener("DOMContentLoaded",w)};m.addEventListener("DOMContentLoaded",w),c._reactRetry=w}}function Mo(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var Ax=null;function AR(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return c;f--}else m==="/$"&&f++}c=c.previousSibling}return null}function TR(c,f,m){switch(f=qy(m),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function fm(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);Xt(c)}var po=new Map,NR=new Set;function Vy(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var El=re.d;re.d={f:n7,r:r7,D:a7,C:i7,L:o7,m:s7,X:c7,S:l7,M:u7};function n7(){var c=El.f(),f=Py();return c||f}function r7(c){var f=zn(c);f!==null&&f.tag===5&&f.type==="form"?ZT(f):El.r(c)}var Ff=typeof document>"u"?null:document;function RR(c,f,m){var w=Ff;if(w&&typeof f=="string"&&f){var N=Za(f);N='link[rel="'+c+'"][href="'+N+'"]',typeof m=="string"&&(N+='[crossorigin="'+m+'"]'),NR.has(N)||(NR.add(N),c={rel:c,crossOrigin:m,href:f},w.querySelector(N)===null&&(f=w.createElement("link"),Va(f,"link",c),Dn(f),w.head.appendChild(f)))}}function a7(c){El.D(c),RR("dns-prefetch",c,null)}function i7(c,f){El.C(c,f),RR("preconnect",c,f)}function o7(c,f,m){El.L(c,f,m);var w=Ff;if(w&&c&&f){var N='link[rel="preload"][as="'+Za(f)+'"]';f==="image"&&m&&m.imageSrcSet?(N+='[imagesrcset="'+Za(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(N+='[imagesizes="'+Za(m.imageSizes)+'"]')):N+='[href="'+Za(c)+'"]';var P=N;switch(f){case"style":P=Lf(c);break;case"script":P=$f(c)}po.has(P)||(c=d({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:c,as:f},m),po.set(P,c),w.querySelector(N)!==null||f==="style"&&w.querySelector(hm(P))||f==="script"&&w.querySelector(pm(P))||(f=w.createElement("link"),Va(f,"link",c),Dn(f),w.head.appendChild(f)))}}function s7(c,f){El.m(c,f);var m=Ff;if(m&&c){var w=f&&typeof f.as=="string"?f.as:"script",N='link[rel="modulepreload"][as="'+Za(w)+'"][href="'+Za(c)+'"]',P=N;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=$f(c)}if(!po.has(P)&&(c=d({rel:"modulepreload",href:c},f),po.set(P,c),m.querySelector(N)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(pm(P)))return}w=m.createElement("link"),Va(w,"link",c),Dn(w),m.head.appendChild(w)}}}function l7(c,f,m){El.S(c,f,m);var w=Ff;if(w&&c){var N=vr(w).hoistableStyles,P=Lf(c);f=f||"default";var oe=N.get(P);if(!oe){var Se={loading:0,preload:null};if(oe=w.querySelector(hm(P)))Se.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},m),(m=po.get(P))&&Tx(c,m);var ze=oe=w.createElement("link");Dn(ze),Va(ze,"link",c),ze._p=new Promise(function(dt,Et){ze.onload=dt,ze.onerror=Et}),ze.addEventListener("load",function(){Se.loading|=1}),ze.addEventListener("error",function(){Se.loading|=2}),Se.loading|=4,Gy(oe,f,w)}oe={type:"stylesheet",instance:oe,count:1,state:Se},N.set(P,oe)}}}function c7(c,f){El.X(c,f);var m=Ff;if(m&&c){var w=vr(m).hoistableScripts,N=$f(c),P=w.get(N);P||(P=m.querySelector(pm(N)),P||(c=d({src:c,async:!0},f),(f=po.get(N))&&Nx(c,f),P=m.createElement("script"),Dn(P),Va(P,"link",c),m.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(N,P))}}function u7(c,f){El.M(c,f);var m=Ff;if(m&&c){var w=vr(m).hoistableScripts,N=$f(c),P=w.get(N);P||(P=m.querySelector(pm(N)),P||(c=d({src:c,async:!0,type:"module"},f),(f=po.get(N))&&Nx(c,f),P=m.createElement("script"),Dn(P),Va(P,"link",c),m.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(N,P))}}function IR(c,f,m,w){var N=(N=Pe.current)?Vy(N):null;if(!N)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=Lf(m.href),m=vr(N).hoistableStyles,w=m.get(f),w||(w={type:"style",instance:null,count:0,state:null},m.set(f,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){c=Lf(m.href);var P=vr(N).hoistableStyles,oe=P.get(c);if(oe||(N=N.ownerDocument||N,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(c,oe),(P=N.querySelector(hm(c)))&&!P._p&&(oe.instance=P,oe.state.loading=5),po.has(c)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},po.set(c,m),P||d7(N,c,m,oe.state))),f&&w===null)throw Error(r(528,""));return oe}if(f&&w!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=$f(m),m=vr(N).hoistableScripts,w=m.get(f),w||(w={type:"script",instance:null,count:0,state:null},m.set(f,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Lf(c){return'href="'+Za(c)+'"'}function hm(c){return'link[rel="stylesheet"]['+c+"]"}function OR(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function d7(c,f,m,w){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?w.loading=1:(f=c.createElement("link"),w.preload=f,f.addEventListener("load",function(){return w.loading|=1}),f.addEventListener("error",function(){return w.loading|=2}),Va(f,"link",m),Dn(f),c.head.appendChild(f))}function $f(c){return'[src="'+Za(c)+'"]'}function pm(c){return"script[async]"+c}function jR(c,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var w=c.querySelector('style[data-href~="'+Za(m.href)+'"]');if(w)return f.instance=w,Dn(w),w;var N=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return w=(c.ownerDocument||c).createElement("style"),Dn(w),Va(w,"style",N),Gy(w,m.precedence,c),f.instance=w;case"stylesheet":N=Lf(m.href);var P=c.querySelector(hm(N));if(P)return f.state.loading|=4,f.instance=P,Dn(P),P;w=OR(m),(N=po.get(N))&&Tx(w,N),P=(c.ownerDocument||c).createElement("link"),Dn(P);var oe=P;return oe._p=new Promise(function(Se,ze){oe.onload=Se,oe.onerror=ze}),Va(P,"link",w),f.state.loading|=4,Gy(P,m.precedence,c),f.instance=P;case"script":return P=$f(m.src),(N=c.querySelector(pm(P)))?(f.instance=N,Dn(N),N):(w=m,(N=po.get(P))&&(w=d({},m),Nx(w,N)),c=c.ownerDocument||c,N=c.createElement("script"),Dn(N),Va(N,"link",w),c.head.appendChild(N),f.instance=N);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(w=f.instance,f.state.loading|=4,Gy(w,m.precedence,c));return f.instance}function Gy(c,f,m){for(var w=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=w.length?w[w.length-1]:null,P=N,oe=0;oe<w.length;oe++){var Se=w[oe];if(Se.dataset.precedence===f)P=Se;else if(P!==N)break}P?P.parentNode.insertBefore(c,P.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(c,f.firstChild))}function Tx(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function Nx(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var Wy=null;function DR(c,f,m){if(Wy===null){var w=new Map,N=Wy=new Map;N.set(m,w)}else N=Wy,w=N.get(m),w||(w=new Map,N.set(m,w));if(w.has(c))return w;for(w.set(c,null),m=m.getElementsByTagName(c),N=0;N<m.length;N++){var P=m[N];if(!(P[Mt]||P[he]||c==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=P.getAttribute(f)||"";oe=c+oe;var Se=w.get(oe);Se?Se.push(P):w.set(oe,[P])}}return w}function MR(c,f,m){c=c.ownerDocument||c,c.head.insertBefore(m,f==="title"?c.querySelector("head > title"):null)}function f7(c,f,m){if(m===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function PR(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var mm=null;function h7(){}function p7(c,f,m){if(mm===null)throw Error(r(475));var w=mm;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var N=Lf(m.href),P=c.querySelector(hm(N));if(P){c=P._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(w.count++,w=Ky.bind(w),c.then(w,w)),f.state.loading|=4,f.instance=P,Dn(P);return}P=c.ownerDocument||c,m=OR(m),(N=po.get(N))&&Tx(m,N),P=P.createElement("link"),Dn(P);var oe=P;oe._p=new Promise(function(Se,ze){oe.onload=Se,oe.onerror=ze}),Va(P,"link",m),f.instance=P}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(w.count++,f=Ky.bind(w),c.addEventListener("load",f),c.addEventListener("error",f))}}function m7(){if(mm===null)throw Error(r(475));var c=mm;return c.stylesheets&&c.count===0&&Rx(c,c.stylesheets),0<c.count?function(f){var m=setTimeout(function(){if(c.stylesheets&&Rx(c,c.stylesheets),c.unsuspend){var w=c.unsuspend;c.unsuspend=null,w()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(m)}}:null}function Ky(){if(this.count--,this.count===0){if(this.stylesheets)Rx(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Zy=null;function Rx(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Zy=new Map,f.forEach(g7,c),Zy=null,Ky.call(c))}function g7(c,f){if(!(f.state.loading&4)){var m=Zy.get(c);if(m)var w=m.get(null);else{m=new Map,Zy.set(c,m);for(var N=c.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<N.length;P++){var oe=N[P];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(m.set(oe.dataset.precedence,oe),w=oe)}w&&m.set(null,w)}N=f.instance,oe=N.getAttribute("data-precedence"),P=m.get(oe)||w,P===w&&m.set(null,N),m.set(oe,N),this.count++,w=Ky.bind(this),N.addEventListener("load",w),N.addEventListener("error",w),P?P.parentNode.insertBefore(N,P.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(N,c.firstChild)),f.state.loading|=4}}var gm={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function y7(c,f,m,w,N,P,oe,Se){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=w,this.onUncaughtError=N,this.onCaughtError=P,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function FR(c,f,m,w,N,P,oe,Se,ze,dt,Et,It){return c=new y7(c,f,m,oe,Se,ze,dt,It),f=1,P===!0&&(f|=24),P=zi(3,null,null,f),c.current=P,P.stateNode=c,f=d_(),f.refCount++,c.pooledCache=f,f.refCount++,P.memoizedState={element:w,isDehydrated:m,cache:f},m_(P),c}function LR(c){return c?(c=vs,c):vs}function $R(c,f,m,w,N,P){N=LR(N),w.context===null?w.context=N:w.pendingContext=N,w=yc(f),w.payload={element:m},P=P===void 0?null:P,P!==null&&(w.callback=P),m=bc(c,w,f),m!==null&&(Gi(m,c,f),Gp(m,c,f))}function BR(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<f?m:f}}function Ix(c,f){BR(c,f),(c=c.alternate)&&BR(c,f)}function zR(c){if(c.tag===13){var f=jo(c,67108864);f!==null&&Gi(f,c,67108864),Ix(c,67108864)}}var Yy=!0;function b7(c,f,m,w){var N=te.T;te.T=null;var P=re.p;try{re.p=2,Ox(c,f,m,w)}finally{re.p=P,te.T=N}}function v7(c,f,m,w){var N=te.T;te.T=null;var P=re.p;try{re.p=8,Ox(c,f,m,w)}finally{re.p=P,te.T=N}}function Ox(c,f,m,w){if(Yy){var N=jx(w);if(N===null)vx(c,f,w,Xy,m),HR(c,w);else if(_7(N,c,f,m,w))w.stopPropagation();else if(HR(c,w),f&4&&-1<w7.indexOf(c)){for(;N!==null;){var P=zn(N);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var oe=ve(P.pendingLanes);if(oe!==0){var Se=P;for(Se.pendingLanes|=2,Se.entangledLanes|=2;oe;){var ze=1<<31-Gt(oe);Se.entanglements[1]|=ze,oe&=~ze}Es(P),(hr&6)===0&&(Dy=se()+500,cm(0))}}break;case 13:Se=jo(P,2),Se!==null&&Gi(Se,P,2),Py(),Ix(P,2)}if(P=jx(w),P===null&&vx(c,f,w,Xy,m),P===N)break;N=P}N!==null&&w.stopPropagation()}else vx(c,f,w,null,m)}}function jx(c){return c=Jd(c),Dx(c)}var Xy=null;function Dx(c){if(Xy=null,c=Tn(c),c!==null){var f=i(c);if(f===null)c=null;else{var m=f.tag;if(m===13){if(c=o(f),c!==null)return c;c=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return Xy=c,null}function UR(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case Q:return 2;case xe:return 8;case Me:case Ee:return 32;case We:return 268435456;default:return 32}default:return 32}}var Mx=!1,Ic=null,Oc=null,jc=null,ym=new Map,bm=new Map,Dc=[],w7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function HR(c,f){switch(c){case"focusin":case"focusout":Ic=null;break;case"dragenter":case"dragleave":Oc=null;break;case"mouseover":case"mouseout":jc=null;break;case"pointerover":case"pointerout":ym.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":bm.delete(f.pointerId)}}function vm(c,f,m,w,N,P){return c===null||c.nativeEvent!==P?(c={blockedOn:f,domEventName:m,eventSystemFlags:w,nativeEvent:P,targetContainers:[N]},f!==null&&(f=zn(f),f!==null&&zR(f)),c):(c.eventSystemFlags|=w,f=c.targetContainers,N!==null&&f.indexOf(N)===-1&&f.push(N),c)}function _7(c,f,m,w,N){switch(f){case"focusin":return Ic=vm(Ic,c,f,m,w,N),!0;case"dragenter":return Oc=vm(Oc,c,f,m,w,N),!0;case"mouseover":return jc=vm(jc,c,f,m,w,N),!0;case"pointerover":var P=N.pointerId;return ym.set(P,vm(ym.get(P)||null,c,f,m,w,N)),!0;case"gotpointercapture":return P=N.pointerId,bm.set(P,vm(bm.get(P)||null,c,f,m,w,N)),!0}return!1}function qR(c){var f=Tn(c.target);if(f!==null){var m=i(f);if(m!==null){if(f=m.tag,f===13){if(f=o(m),f!==null){c.blockedOn=f,B(c.priority,function(){if(m.tag===13){var w=Vi();w=Nt(w);var N=jo(m,w);N!==null&&Gi(N,m,w),Ix(m,w)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Jy(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var m=jx(c.nativeEvent);if(m===null){m=c.nativeEvent;var w=new m.constructor(m.type,m);io=w,m.target.dispatchEvent(w),io=null}else return f=zn(m),f!==null&&zR(f),c.blockedOn=m,!1;f.shift()}return!0}function VR(c,f,m){Jy(c)&&m.delete(f)}function x7(){Mx=!1,Ic!==null&&Jy(Ic)&&(Ic=null),Oc!==null&&Jy(Oc)&&(Oc=null),jc!==null&&Jy(jc)&&(jc=null),ym.forEach(VR),bm.forEach(VR)}function Qy(c,f){c.blockedOn===f&&(c.blockedOn=null,Mx||(Mx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,x7)))}var eb=null;function GR(c){eb!==c&&(eb=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){eb===c&&(eb=null);for(var f=0;f<c.length;f+=3){var m=c[f],w=c[f+1],N=c[f+2];if(typeof w!="function"){if(Dx(w||m)===null)continue;break}var P=zn(m);P!==null&&(c.splice(f,3),f-=3,D_(P,{pending:!0,data:N,method:m.method,action:w},w,N))}}))}function wm(c){function f(ze){return Qy(ze,c)}Ic!==null&&Qy(Ic,c),Oc!==null&&Qy(Oc,c),jc!==null&&Qy(jc,c),ym.forEach(f),bm.forEach(f);for(var m=0;m<Dc.length;m++){var w=Dc[m];w.blockedOn===c&&(w.blockedOn=null)}for(;0<Dc.length&&(m=Dc[0],m.blockedOn===null);)qR(m),m.blockedOn===null&&Dc.shift();if(m=(c.ownerDocument||c).$$reactFormReplay,m!=null)for(w=0;w<m.length;w+=3){var N=m[w],P=m[w+1],oe=N[Te]||null;if(typeof P=="function")oe||GR(m);else if(oe){var Se=null;if(P&&P.hasAttribute("formAction")){if(N=P,oe=P[Te]||null)Se=oe.formAction;else if(Dx(N)!==null)continue}else Se=oe.action;typeof Se=="function"?m[w+1]=Se:(m.splice(w,3),w-=3),GR(m)}}}function Px(c){this._internalRoot=c}tb.prototype.render=Px.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,w=Vi();$R(m,w,c,f,null,null)},tb.prototype.unmount=Px.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;$R(c.current,2,null,c,null,null),Py(),f[He]=null}};function tb(c){this._internalRoot=c}tb.prototype.unstable_scheduleHydration=function(c){if(c){var f=H();c={blockedOn:null,target:c,priority:f};for(var m=0;m<Dc.length&&f!==0&&f<Dc[m].priority;m++);Dc.splice(m,0,c),m===0&&qR(c)}};var WR=t.version;if(WR!=="19.1.0")throw Error(r(527,WR,"19.1.0"));re.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var S7={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nb.isDisabled&&nb.supportsFiber)try{_t=nb.inject(S7),Dt=nb}catch{}}return xm.createRoot=function(c,f){if(!a(c))throw Error(r(299));var m=!1,w="",N=cN,P=uN,oe=dN,Se=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(N=f.onUncaughtError),f.onCaughtError!==void 0&&(P=f.onCaughtError),f.onRecoverableError!==void 0&&(oe=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Se=f.unstable_transitionCallbacks)),f=FR(c,1,!1,null,null,m,w,N,P,oe,Se,null),c[He]=f.current,bx(c),new Px(f)},xm.hydrateRoot=function(c,f,m){if(!a(c))throw Error(r(299));var w=!1,N="",P=cN,oe=uN,Se=dN,ze=null,dt=null;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(N=m.identifierPrefix),m.onUncaughtError!==void 0&&(P=m.onUncaughtError),m.onCaughtError!==void 0&&(oe=m.onCaughtError),m.onRecoverableError!==void 0&&(Se=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ze=m.unstable_transitionCallbacks),m.formState!==void 0&&(dt=m.formState)),f=FR(c,1,!0,f,m??null,w,N,P,oe,Se,ze,dt),f.context=LR(null),m=f.current,w=Vi(),w=Nt(w),N=yc(w),N.callback=null,bc(m,N,w),m=w,f.current.lanes=m,tt(f,m),Es(f),c[He]=f.current,bx(c),new tb(f)},xm.version="19.1.0",xm}var r3;function $7(){if(r3)return $x.exports;r3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$x.exports=L7(),$x.exports}var B7=$7();const z7=li(B7);function a3(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Yc(...e){return t=>{let n=!1;const r=e.map(a=>{const i=a3(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():a3(e[a],null)}}}}function Cn(...e){return T.useCallback(Yc(...e),e)}function Xc(e){const t=U7(e),n=T.forwardRef((r,a)=>{const{children:i,...o}=r,s=T.Children.toArray(i),l=s.find(q7);if(l){const u=l.props.children,d=s.map(h=>h===l?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return y.jsx(t,{...o,ref:a,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return y.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var Xj=Xc("Slot");function U7(e){const t=T.forwardRef((n,r)=>{const{children:a,...i}=n;if(T.isValidElement(a)){const o=G7(a),s=V7(i,a.props);return a.type!==T.Fragment&&(s.ref=r?Yc(r,o):o),T.cloneElement(a,s)}return T.Children.count(a)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Jj=Symbol("radix.slottable");function H7(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Jj,t}function q7(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Jj}function V7(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{i(...s),a(...s)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function G7(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Qj(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Qj(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function e6(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Qj(e))&&(r&&(r+=" "),r+=t);return r}const i3=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,o3=e6,NC=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return o3(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const p=i3(d)||i3(h);return a[u][p]}),s=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...g}=d;return Object.entries(g).every(v=>{let[b,_]=v;return Array.isArray(_)?_.includes({...i,...s}[b]):{...i,...s}[b]===_})?[...u,h,p]:u},[]);return o3(e,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},RC="-",W7=e=>{const t=Z7(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(RC);return s[0]===""&&s.length!==1&&s.shift(),t6(s,t)||K7(o)},getConflictingClassGroupIds:(o,s)=>{const l=n[o]||[];return s&&r[o]?[...l,...r[o]]:l}}},t6=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?t6(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(RC);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},s3=/^\[(.+)\]$/,K7=e=>{if(s3.test(e)){const t=s3.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Z7=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)a2(n[a],r,a,t);return r},a2=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:l3(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(Y7(a)){a2(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{a2(o,l3(t,i),n,r)})})},l3=(e,t)=>{let n=e;return t.split(RC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Y7=e=>e.isThemeGetter,X7=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},i2="!",o2=":",J7=o2.length,Q7=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let o=0,s=0,l=0,u;for(let v=0;v<a.length;v++){let b=a[v];if(o===0&&s===0){if(b===o2){i.push(a.slice(l,v)),l=v+J7;continue}if(b==="/"){u=v;continue}}b==="["?o++:b==="]"?o--:b==="("?s++:b===")"&&s--}const d=i.length===0?a:a.substring(l),h=eU(d),p=h!==d,g=u&&u>l?u-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+o2,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},eU=e=>e.endsWith(i2)?e.substring(0,e.length-1):e.startsWith(i2)?e.substring(1):e,tU=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},nU=e=>({cache:X7(e.cacheSize),parseClassName:Q7(e),sortModifiers:tU(e),...W7(e)}),rU=/\s+/,aU=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(rU);let l="";for(let u=s.length-1;u>=0;u-=1){const d=s[u],{isExternal:h,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let _=!!b,x=r(_?v.substring(0,b):v);if(!x){if(!_){l=d+(l.length>0?" "+l:l);continue}if(x=r(v),!x){l=d+(l.length>0?" "+l:l);continue}_=!1}const S=i(p).join(":"),E=g?S+i2:S,C=E+x;if(o.includes(C))continue;o.push(C);const k=a(x,_);for(let R=0;R<k.length;++R){const j=k[R];o.push(E+j)}l=d+(l.length>0?" "+l:l)}return l};function iU(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=n6(t))&&(r&&(r+=" "),r+=n);return r}const n6=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=n6(e[r]))&&(n&&(n+=" "),n+=t);return n};function oU(e,...t){let n,r,a,i=o;function o(l){const u=t.reduce((d,h)=>h(d),e());return n=nU(u),r=n.cache.get,a=n.cache.set,i=s,s(l)}function s(l){const u=r(l);if(u)return u;const d=aU(l,n);return a(l,d),d}return function(){return i(iU.apply(null,arguments))}}const ba=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},r6=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,a6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,sU=/^\d+\/\d+$/,lU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,dU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bf=e=>sU.test(e),$n=e=>!!e&&!Number.isNaN(Number(e)),Pc=e=>!!e&&Number.isInteger(Number(e)),Hx=e=>e.endsWith("%")&&$n(e.slice(0,-1)),Cl=e=>lU.test(e),hU=()=>!0,pU=e=>cU.test(e)&&!uU.test(e),i6=()=>!1,mU=e=>dU.test(e),gU=e=>fU.test(e),yU=e=>!rn(e)&&!an(e),bU=e=>$h(e,l6,i6),rn=e=>r6.test(e),Yu=e=>$h(e,c6,pU),qx=e=>$h(e,SU,$n),c3=e=>$h(e,o6,i6),vU=e=>$h(e,s6,gU),rb=e=>$h(e,u6,mU),an=e=>a6.test(e),Sm=e=>Bh(e,c6),wU=e=>Bh(e,EU),u3=e=>Bh(e,o6),_U=e=>Bh(e,l6),xU=e=>Bh(e,s6),ab=e=>Bh(e,u6,!0),$h=(e,t,n)=>{const r=r6.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Bh=(e,t,n=!1)=>{const r=a6.exec(e);return r?r[1]?t(r[1]):n:!1},o6=e=>e==="position"||e==="percentage",s6=e=>e==="image"||e==="url",l6=e=>e==="length"||e==="size"||e==="bg-size",c6=e=>e==="length",SU=e=>e==="number",EU=e=>e==="family-name",u6=e=>e==="shadow",CU=()=>{const e=ba("color"),t=ba("font"),n=ba("text"),r=ba("font-weight"),a=ba("tracking"),i=ba("leading"),o=ba("breakpoint"),s=ba("container"),l=ba("spacing"),u=ba("radius"),d=ba("shadow"),h=ba("inset-shadow"),p=ba("text-shadow"),g=ba("drop-shadow"),v=ba("blur"),b=ba("perspective"),_=ba("aspect"),x=ba("ease"),S=ba("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...C(),an,rn],R=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],O=()=>[an,rn,l],L=()=>[Bf,"full","auto",...O()],z=()=>[Pc,"none","subgrid",an,rn],Y=()=>["auto",{span:["full",Pc,an,rn]},Pc,an,rn],F=()=>[Pc,"auto",an,rn],K=()=>["auto","min","max","fr",an,rn],q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],fe=()=>["start","end","center","stretch","center-safe","end-safe"],te=()=>["auto",...O()],re=()=>[Bf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...O()],X=()=>[e,an,rn],ae=()=>[...C(),u3,c3,{position:[an,rn]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ee=()=>["auto","cover","contain",_U,bU,{size:[an,rn]}],J=()=>[Hx,Sm,Yu],ue=()=>["","none","full",u,an,rn],be=()=>["",$n,Sm,Yu],_e=()=>["solid","dashed","dotted","double"],Pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>[$n,Hx,u3,c3],Re=()=>["","none",v,an,rn],Ce=()=>["none",$n,an,rn],Fe=()=>["none",$n,an,rn],Qe=()=>[$n,an,rn],Le=()=>[Bf,"full",...O()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Cl],breakpoint:[Cl],color:[hU],container:[Cl],"drop-shadow":[Cl],ease:["in","out","in-out"],font:[yU],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Cl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Cl],shadow:[Cl],spacing:["px",$n],text:[Cl],"text-shadow":[Cl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Bf,rn,an,_]}],container:["container"],columns:[{columns:[$n,rn,an,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[Pc,"auto",an,rn]}],basis:[{basis:[Bf,"full","auto",s,...O()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$n,Bf,"auto","initial","none",rn]}],grow:[{grow:["",$n,an,rn]}],shrink:[{shrink:["",$n,an,rn]}],order:[{order:[Pc,"first","last","none",an,rn]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:O()}],"gap-x":[{"gap-x":O()}],"gap-y":[{"gap-y":O()}],"justify-content":[{justify:[...q(),"normal"]}],"justify-items":[{"justify-items":[...fe(),"normal"]}],"justify-self":[{"justify-self":["auto",...fe()]}],"align-content":[{content:["normal",...q()]}],"align-items":[{items:[...fe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...fe(),{baseline:["","last"]}]}],"place-content":[{"place-content":q()}],"place-items":[{"place-items":[...fe(),"baseline"]}],"place-self":[{"place-self":["auto",...fe()]}],p:[{p:O()}],px:[{px:O()}],py:[{py:O()}],ps:[{ps:O()}],pe:[{pe:O()}],pt:[{pt:O()}],pr:[{pr:O()}],pb:[{pb:O()}],pl:[{pl:O()}],m:[{m:te()}],mx:[{mx:te()}],my:[{my:te()}],ms:[{ms:te()}],me:[{me:te()}],mt:[{mt:te()}],mr:[{mr:te()}],mb:[{mb:te()}],ml:[{ml:te()}],"space-x":[{"space-x":O()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":O()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[s,"screen",...re()]}],"min-w":[{"min-w":[s,"screen","none",...re()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...re()]}],h:[{h:["screen",...re()]}],"min-h":[{"min-h":["screen","none",...re()]}],"max-h":[{"max-h":["screen",...re()]}],"font-size":[{text:["base",n,Sm,Yu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,an,qx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Hx,rn]}],"font-family":[{font:[wU,rn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,an,rn]}],"line-clamp":[{"line-clamp":[$n,"none",an,qx]}],leading:[{leading:[i,...O()]}],"list-image":[{"list-image":["none",an,rn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",an,rn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._e(),"wavy"]}],"text-decoration-thickness":[{decoration:[$n,"from-font","auto",an,Yu]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[$n,"auto",an,rn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",an,rn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",an,rn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ae()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:ee()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Pc,an,rn],radial:["",an,rn],conic:[Pc,an,rn]},xU,vU]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:ue()}],"rounded-s":[{"rounded-s":ue()}],"rounded-e":[{"rounded-e":ue()}],"rounded-t":[{"rounded-t":ue()}],"rounded-r":[{"rounded-r":ue()}],"rounded-b":[{"rounded-b":ue()}],"rounded-l":[{"rounded-l":ue()}],"rounded-ss":[{"rounded-ss":ue()}],"rounded-se":[{"rounded-se":ue()}],"rounded-ee":[{"rounded-ee":ue()}],"rounded-es":[{"rounded-es":ue()}],"rounded-tl":[{"rounded-tl":ue()}],"rounded-tr":[{"rounded-tr":ue()}],"rounded-br":[{"rounded-br":ue()}],"rounded-bl":[{"rounded-bl":ue()}],"border-w":[{border:be()}],"border-w-x":[{"border-x":be()}],"border-w-y":[{"border-y":be()}],"border-w-s":[{"border-s":be()}],"border-w-e":[{"border-e":be()}],"border-w-t":[{"border-t":be()}],"border-w-r":[{"border-r":be()}],"border-w-b":[{"border-b":be()}],"border-w-l":[{"border-l":be()}],"divide-x":[{"divide-x":be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[..._e(),"hidden","none"]}],"divide-style":[{divide:[..._e(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[..._e(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$n,an,rn]}],"outline-w":[{outline:["",$n,Sm,Yu]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",d,ab,rb]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",h,ab,rb]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[$n,Yu]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":be()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",p,ab,rb]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[$n,an,rn]}],"mix-blend":[{"mix-blend":[...Pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$n]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ne()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Ne()}],"mask-image-t-to-pos":[{"mask-t-to":Ne()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Ne()}],"mask-image-r-to-pos":[{"mask-r-to":Ne()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Ne()}],"mask-image-b-to-pos":[{"mask-b-to":Ne()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Ne()}],"mask-image-l-to-pos":[{"mask-l-to":Ne()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Ne()}],"mask-image-x-to-pos":[{"mask-x-to":Ne()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Ne()}],"mask-image-y-to-pos":[{"mask-y-to":Ne()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[an,rn]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ne()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[$n]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ne()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ae()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:ee()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",an,rn]}],filter:[{filter:["","none",an,rn]}],blur:[{blur:Re()}],brightness:[{brightness:[$n,an,rn]}],contrast:[{contrast:[$n,an,rn]}],"drop-shadow":[{"drop-shadow":["","none",g,ab,rb]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",$n,an,rn]}],"hue-rotate":[{"hue-rotate":[$n,an,rn]}],invert:[{invert:["",$n,an,rn]}],saturate:[{saturate:[$n,an,rn]}],sepia:[{sepia:["",$n,an,rn]}],"backdrop-filter":[{"backdrop-filter":["","none",an,rn]}],"backdrop-blur":[{"backdrop-blur":Re()}],"backdrop-brightness":[{"backdrop-brightness":[$n,an,rn]}],"backdrop-contrast":[{"backdrop-contrast":[$n,an,rn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$n,an,rn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$n,an,rn]}],"backdrop-invert":[{"backdrop-invert":["",$n,an,rn]}],"backdrop-opacity":[{"backdrop-opacity":[$n,an,rn]}],"backdrop-saturate":[{"backdrop-saturate":[$n,an,rn]}],"backdrop-sepia":[{"backdrop-sepia":["",$n,an,rn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":O()}],"border-spacing-x":[{"border-spacing-x":O()}],"border-spacing-y":[{"border-spacing-y":O()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",an,rn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$n,"initial",an,rn]}],ease:[{ease:["linear","initial",x,an,rn]}],delay:[{delay:[$n,an,rn]}],animate:[{animate:["none",S,an,rn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,an,rn]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Ce()}],"rotate-x":[{"rotate-x":Ce()}],"rotate-y":[{"rotate-y":Ce()}],"rotate-z":[{"rotate-z":Ce()}],scale:[{scale:Fe()}],"scale-x":[{"scale-x":Fe()}],"scale-y":[{"scale-y":Fe()}],"scale-z":[{"scale-z":Fe()}],"scale-3d":["scale-3d"],skew:[{skew:Qe()}],"skew-x":[{"skew-x":Qe()}],"skew-y":[{"skew-y":Qe()}],transform:[{transform:[an,rn,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",an,rn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",an,rn]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[$n,Sm,Yu,qx]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},kU=oU(CU);function Rt(...e){return kU(e6(e))}const AU=NC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Bt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?Xj:"button";return y.jsx(i,{"data-slot":"button",className:Rt(AU({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),d3=e=>{const t=NU(e);return t.charAt(0).toUpperCase()+t.slice(1)},d6=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},l)=>T.createElement("svg",{ref:l,...RU,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:d6("lucide",a),...s},[...o.map(([u,d])=>T.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=(e,t)=>{const n=T.forwardRef(({className:r,...a},i)=>T.createElement(IU,{ref:i,iconNode:t,className:d6(`lucide-${TU(d3(e))}`,`lucide-${e}`,r),...a}));return n.displayName=d3(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],jU=sn("archive",OU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],MU=sn("arrow-down",DU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],FU=sn("bot",PU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],f6=sn("brain-circuit",LU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ks=sn("check",$U);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Zs=sn("chevron-down",BU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],h6=sn("chevron-right",zU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ad=sn("chevron-up",UU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],IC=sn("chevrons-up-down",HU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pd=sn("circle-alert",qU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],OC=sn("circle-check",VU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],p6=sn("circle",GU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],jC=sn("clipboard",WU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],m6=sn("cloud-upload",KU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],YU=sn("code",ZU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],JU=sn("cog",XU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ah=sn("download",QU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],tH=sn("file-archive",eH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],rH=sn("file-json",nH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],iH=sn("file-question",aH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],sH=sn("file-text",oH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],cH=sn("file",lH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],dH=sn("folder-git",uH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],DC=sn("folder-plus",fH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],pH=sn("folder-up",hH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Z0=sn("folder",mH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Hm=sn("git-branch",gH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],bH=sn("git-commit-horizontal",yH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],wH=sn("git-merge",vH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],g6=sn("git-pull-request",_H);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],SH=sn("grip-vertical",xH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EH=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],y6=sn("hard-drive",EH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],kH=sn("house",CH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],TH=sn("image",AH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],RH=sn("info",NH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],OH=sn("key",IH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Gn=sn("loader-circle",jH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],b6=sn("message-square-plus",DH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],PH=sn("message-square",MH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],LH=sn("music",FH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],BH=sn("panel-left-close",$H);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],UH=sn("panel-right-close",zH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],s2=sn("paperclip",HH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],MC=sn("pen",qH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Y0=sn("plus",VH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gw=sn("refresh-cw",GH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],KH=sn("rotate-ccw",WH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],X0=sn("save",ZH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],J0=sn("search",YH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],JH=sn("send-horizontal",XH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],v6=sn("settings",QH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],tq=sn("sliders-horizontal",eq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ub=sn("square-pen",nq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],aq=sn("square",rq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],oq=sn("text",iq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ho=sn("trash-2",sq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],PC=sn("triangle-alert",lq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],uq=sn("upload",cq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fq=sn("user",dq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],f3=sn("users",hq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],mq=sn("video",pq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],yq=sn("wrench",gq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zl=sn("x",bq),h3=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:y.jsx("div",{className:Rt(n),children:r.map(a=>{var o,s;const i=t==="trigger"?(o=a.triggerRenderer)==null?void 0:o.call(a):(s=a.renderer)==null?void 0:s.call(a);return i?y.jsx(yt.Fragment,{children:i},a.id):null})})},p3=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,p))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,a,s);return s},vq=e=>e?p3(e):p3,wq=e=>e;function _q(e,t=wq){const n=yt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return yt.useDebugValue(n),n}const m3=e=>{const t=vq(e),n=r=>_q(t,r);return Object.assign(n,t),n},rs=e=>e?m3(e):m3;var w6=Symbol.for("immer-nothing"),g3=Symbol.for("immer-draftable"),cr=Symbol.for("immer-state");function xo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fh=Object.getPrototypeOf;function hh(e){return!!e&&!!e[cr]}function Bl(e){var t;return e?_6(e)||Array.isArray(e)||!!e[g3]||!!((t=e.constructor)!=null&&t[g3])||bw(e)||vw(e):!1}var xq=Object.prototype.constructor.toString();function _6(e){if(!e||typeof e!="object")return!1;const t=fh(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===xq}function qm(e,t){yw(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function yw(e){const t=e[cr];return t?t.type_:Array.isArray(e)?1:bw(e)?2:vw(e)?3:0}function l2(e,t){return yw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function x6(e,t,n){const r=yw(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Sq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function bw(e){return e instanceof Map}function vw(e){return e instanceof Set}function ja(e){return e.copy_||e.base_}function c2(e,t){if(bw(e))return new Map(e);if(vw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=_6(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[cr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(fh(e),r)}else{const r=fh(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function FC(e,t=!1){return ww(e)||hh(e)||!Bl(e)||(yw(e)>1&&(e.set=e.add=e.clear=e.delete=Eq),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>FC(r,!0))),e}function Eq(){xo(2)}function ww(e){return Object.isFrozen(e)}var u2={};function md(e){const t=u2[e];return t||xo(0,e),t}function Cq(e,t){u2[e]||(u2[e]=t)}var Vm;function ev(){return Vm}function kq(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function y3(e,t){t&&(md("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function d2(e){f2(e),e.drafts_.forEach(Aq),e.drafts_=null}function f2(e){e===Vm&&(Vm=e.parent_)}function b3(e){return Vm=kq(Vm,e)}function Aq(e){const t=e[cr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function v3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[cr].modified_&&(d2(t),xo(4)),Bl(e)&&(e=tv(t,e),t.parent_||nv(t,e)),t.patches_&&md("Patches").generateReplacementPatches_(n[cr].base_,e,t.patches_,t.inversePatches_)):e=tv(t,n,[]),d2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==w6?e:void 0}function tv(e,t,n){if(ww(t))return t;const r=t[cr];if(!r)return qm(t,(a,i)=>w3(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return nv(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),qm(i,(s,l)=>w3(e,r,a,s,l,n,o)),nv(e,a,!1),n&&e.patches_&&md("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function w3(e,t,n,r,a,i,o){if(hh(a)){const s=i&&t&&t.type_!==3&&!l2(t.assigned_,r)?i.concat(r):void 0,l=tv(e,a,s);if(x6(n,r,l),hh(l))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(Bl(a)&&!ww(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;tv(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&nv(e,a)}}function nv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&FC(t,n)}function Tq(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ev(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=LC;n&&(a=[r],i=Gm);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var LC={get(e,t){if(t===cr)return e;const n=ja(e);if(!l2(n,t))return Nq(e,n,t);const r=n[t];return e.finalized_||!Bl(r)?r:r===Vx(e.base_,t)?(Gx(e),e.copy_[t]=Wm(r,e)):r},has(e,t){return t in ja(e)},ownKeys(e){return Reflect.ownKeys(ja(e))},set(e,t,n){const r=S6(ja(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=Vx(ja(e),t),i=a==null?void 0:a[cr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Sq(n,a)&&(n!==void 0||l2(e.base_,t)))return!0;Gx(e),Tl(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Vx(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Gx(e),Tl(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ja(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){xo(11)},getPrototypeOf(e){return fh(e.base_)},setPrototypeOf(){xo(12)}},Gm={};qm(LC,(e,t)=>{Gm[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Gm.deleteProperty=function(e,t){return Gm.set.call(this,e,t,void 0)};Gm.set=function(e,t,n){return LC.set.call(this,e[0],t,n,e[0])};function Vx(e,t){const n=e[cr];return(n?ja(n):e)[t]}function Nq(e,t,n){var a;const r=S6(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function S6(e,t){if(!(t in e))return;let n=fh(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=fh(n)}}function Tl(e){e.modified_||(e.modified_=!0,e.parent_&&Tl(e.parent_))}function Gx(e){e.copy_||(e.copy_=c2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Rq=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(l=i,...u){return o.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&xo(6),r!==void 0&&typeof r!="function"&&xo(7);let a;if(Bl(t)){const i=b3(this),o=Wm(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?d2(i):f2(i)}return y3(i,r),v3(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===w6&&(a=void 0),this.autoFreeze_&&FC(a,!0),r){const i=[],o=[];md("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else xo(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,l=>t(l,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Bl(e)||xo(8),hh(e)&&(e=Iq(e));const t=b3(this),n=Wm(e,void 0);return n[cr].isManual_=!0,f2(t),n}finishDraft(e,t){const n=e&&e[cr];(!n||!n.isManual_)&&xo(9);const{scope_:r}=n;return y3(r,t),v3(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=md("Patches").applyPatches_;return hh(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Wm(e,t){const n=bw(e)?md("MapSet").proxyMap_(e,t):vw(e)?md("MapSet").proxySet_(e,t):Tq(e,t);return(t?t.scope_:ev()).drafts_.push(n),n}function Iq(e){return hh(e)||xo(10,e),E6(e)}function E6(e){if(!Bl(e)||ww(e))return e;const t=e[cr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=c2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=c2(e,!0);return qm(n,(r,a)=>{x6(n,r,E6(a))}),t&&(t.finalized_=!1),n}function Oq(){class e extends Map{constructor(l,u){super(),this[cr]={type_:2,parent_:u,scope_:u?u.scope_:ev(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return ja(this[cr]).size}has(l){return ja(this[cr]).has(l)}set(l,u){const d=this[cr];return o(d),(!ja(d).has(l)||ja(d).get(l)!==u)&&(n(d),Tl(d),d.assigned_.set(l,!0),d.copy_.set(l,u),d.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const u=this[cr];return o(u),n(u),Tl(u),u.base_.has(l)?u.assigned_.set(l,!1):u.assigned_.delete(l),u.copy_.delete(l),!0}clear(){const l=this[cr];o(l),ja(l).size&&(n(l),Tl(l),l.assigned_=new Map,qm(l.base_,u=>{l.assigned_.set(u,!1)}),l.copy_.clear())}forEach(l,u){const d=this[cr];ja(d).forEach((h,p,g)=>{l.call(u,this.get(p),p,this)})}get(l){const u=this[cr];o(u);const d=ja(u).get(l);if(u.finalized_||!Bl(d)||d!==u.base_.get(l))return d;const h=Wm(d,u);return n(u),u.copy_.set(l,h),h}keys(){return ja(this[cr]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=l.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=l.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(s,l){return new e(s,l)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(l,u){super(),this[cr]={type_:3,parent_:u,scope_:u?u.scope_:ev(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return ja(this[cr]).size}has(l){const u=this[cr];return o(u),u.copy_?!!(u.copy_.has(l)||u.drafts_.has(l)&&u.copy_.has(u.drafts_.get(l))):u.base_.has(l)}add(l){const u=this[cr];return o(u),this.has(l)||(i(u),Tl(u),u.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const u=this[cr];return o(u),i(u),Tl(u),u.copy_.delete(l)||(u.drafts_.has(l)?u.copy_.delete(u.drafts_.get(l)):!1)}clear(){const l=this[cr];o(l),ja(l).size&&(i(l),Tl(l),l.copy_.clear())}values(){const l=this[cr];return o(l),i(l),l.copy_.values()}entries(){const l=this[cr];return o(l),i(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,u){const d=this.values();let h=d.next();for(;!h.done;)l.call(u,h.value,h.value,this),h=d.next()}}function a(s,l){return new r(s,l)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(l=>{if(Bl(l)){const u=Wm(l,s);s.drafts_.set(l,u),s.copy_.add(u)}else s.copy_.add(l)}))}function o(s){s.revoked_&&xo(3,JSON.stringify(ja(s)))}Cq("MapSet",{proxyMap_:t,proxySet_:a})}var no=new Rq,jq=no.produce;no.produceWithPatches.bind(no);no.setAutoFreeze.bind(no);no.setUseStrictShallowCopy.bind(no);no.applyPatches.bind(no);no.createDraft.bind(no);no.finishDraft.bind(no);const Dq=e=>(t,n,r)=>(r.setState=(a,i,...o)=>{const s=typeof a=="function"?jq(a):a;return t(s,i,...o)},e(r.setState,n,r)),as=Dq,Pr=rs(as((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const o={modId:r,callback:a,order:i};return e(s=>{s.middlewareRegistry[n]||(s.middlewareRegistry[n]=[]),s.middlewareRegistry[n].push(o),s.middlewareRegistry[n].sort((l,u)=>(l.order??0)-(u.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var o;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(s=>!(s.modId===r&&s.callback===a)),((o=i.middlewareRegistry[n])==null?void 0:o.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(o=>{o.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${o.tools[r].modId}". Overwriting with registration from mod "${n}".`),o.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var Hb={exports:{}},Mq=Hb.exports,_3;function Pq(){return _3||(_3=1,function(e,t){(function(n,r){e.exports=r()})(Mq,function(){var n=function(A,D){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,ne){Z.__proto__=ne}||function(Z,ne){for(var ce in ne)Object.prototype.hasOwnProperty.call(ne,ce)&&(Z[ce]=ne[ce])})(A,D)},r=function(){return(r=Object.assign||function(A){for(var D,Z=1,ne=arguments.length;Z<ne;Z++)for(var ce in D=arguments[Z])Object.prototype.hasOwnProperty.call(D,ce)&&(A[ce]=D[ce]);return A}).apply(this,arguments)};function a(A,D,Z){for(var ne,ce=0,we=D.length;ce<we;ce++)!ne&&ce in D||((ne=ne||Array.prototype.slice.call(D,0,ce))[ce]=D[ce]);return A.concat(ne||Array.prototype.slice.call(D))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ld,o=Object.keys,s=Array.isArray;function l(A,D){return typeof D!="object"||o(D).forEach(function(Z){A[Z]=D[Z]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function h(A,D){return d.call(A,D)}function p(A,D){typeof D=="function"&&(D=D(u(A))),(typeof Reflect>"u"?o:Reflect.ownKeys)(D).forEach(function(Z){v(A,Z,D[Z])})}var g=Object.defineProperty;function v(A,D,Z,ne){g(A,D,l(Z&&h(Z,"get")&&typeof Z.get=="function"?{get:Z.get,set:Z.set,configurable:!0}:{value:Z,configurable:!0,writable:!0},ne))}function b(A){return{from:function(D){return A.prototype=Object.create(D.prototype),v(A.prototype,"constructor",A),{extend:p.bind(null,A.prototype)}}}}var _=Object.getOwnPropertyDescriptor,x=[].slice;function S(A,D,Z){return x.call(A,D,Z)}function E(A,D){return D(A)}function C(A){if(!A)throw new Error("Assertion Failed")}function k(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function R(A,D){if(typeof D=="string"&&h(A,D))return A[D];if(!D)return A;if(typeof D!="string"){for(var Z=[],ne=0,ce=D.length;ne<ce;++ne){var we=R(A,D[ne]);Z.push(we)}return Z}var De=D.indexOf(".");if(De!==-1){var $e=A[D.substr(0,De)];return $e==null?void 0:R($e,D.substr(De+1))}}function j(A,D,Z){if(A&&D!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof D!="string"&&"length"in D){C(typeof Z!="string"&&"length"in Z);for(var ne=0,ce=D.length;ne<ce;++ne)j(A,D[ne],Z[ne])}else{var we,De,$e=D.indexOf(".");$e!==-1?(we=D.substr(0,$e),(De=D.substr($e+1))===""?Z===void 0?s(A)&&!isNaN(parseInt(we))?A.splice(we,1):delete A[we]:A[we]=Z:j($e=!($e=A[we])||!h(A,we)?A[we]={}:$e,De,Z)):Z===void 0?s(A)&&!isNaN(parseInt(D))?A.splice(D,1):delete A[D]:A[D]=Z}}function O(A){var D,Z={};for(D in A)h(A,D)&&(Z[D]=A[D]);return Z}var L=[].concat;function z(A){return L.apply([],A)}var _t="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(z([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(D){return D+A+"Array"})}))).filter(function(A){return i[A]}),Y=new Set(_t.map(function(A){return i[A]})),F=null;function K(A){return F=new WeakMap,A=function D(Z){if(!Z||typeof Z!="object")return Z;var ne=F.get(Z);if(ne)return ne;if(s(Z)){ne=[],F.set(Z,ne);for(var ce=0,we=Z.length;ce<we;++ce)ne.push(D(Z[ce]))}else if(Y.has(Z.constructor))ne=Z;else{var De,$e=u(Z);for(De in ne=$e===Object.prototype?{}:Object.create($e),F.set(Z,ne),Z)h(Z,De)&&(ne[De]=D(Z[De]))}return ne}(A),F=null,A}var q={}.toString;function fe(A){return q.call(A).slice(8,-1)}var te=typeof Symbol<"u"?Symbol.iterator:"@@iterator",re=typeof te=="symbol"?function(A){var D;return A!=null&&(D=A[te])&&D.apply(A)}:function(){return null};function X(A,D){return D=A.indexOf(D),0<=D&&A.splice(D,1),0<=D}var ae={};function U(A){var D,Z,ne,ce;if(arguments.length===1){if(s(A))return A.slice();if(this===ae&&typeof A=="string")return[A];if(ce=re(A)){for(Z=[];!(ne=ce.next()).done;)Z.push(ne.value);return Z}if(A==null)return[A];if(typeof(D=A.length)!="number")return[A];for(Z=new Array(D);D--;)Z[D]=A[D];return Z}for(D=arguments.length,Z=new Array(D);D--;)Z[D]=arguments[D];return Z}var ee=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},at=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],hi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(at),J={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ue(A,D){this.name=A,this.message=D}function be(A,D){return A+". Errors: "+Object.keys(D).map(function(Z){return D[Z].toString()}).filter(function(Z,ne,ce){return ce.indexOf(Z)===ne}).join(`
`)}function _e(A,D,Z,ne){this.failures=D,this.failedKeys=ne,this.successCount=Z,this.message=be(A,D)}function Pe(A,D){this.name="BulkError",this.failures=Object.keys(D).map(function(Z){return D[Z]}),this.failuresByPos=D,this.message=be(A,this.failures)}b(ue).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(_e).from(ue),b(Pe).from(ue);var Ne=hi.reduce(function(A,D){return A[D]=D+"Error",A},{}),Re=ue,Ce=hi.reduce(function(A,D){var Z=D+"Error";function ne(ce,we){this.name=Z,ce?typeof ce=="string"?(this.message="".concat(ce).concat(we?`
 `+we:""),this.inner=we||null):typeof ce=="object"&&(this.message="".concat(ce.name," ").concat(ce.message),this.inner=ce):(this.message=J[D]||Z,this.inner=null)}return b(ne).from(Re),A[D]=ne,A},{});Ce.Syntax=SyntaxError,Ce.Type=TypeError,Ce.Range=RangeError;var Fe=at.reduce(function(A,D){return A[D+"Error"]=Ce[D],A},{}),Qe=hi.reduce(function(A,D){return["Syntax","Type","Range"].indexOf(D)===-1&&(A[D+"Error"]=Ce[D]),A},{});function Le(){}function Ie(A){return A}function V(A,D){return A==null||A===Ie?D:function(Z){return D(A(Z))}}function me(A,D){return function(){A.apply(this,arguments),D.apply(this,arguments)}}function Ae(A,D){return A===Le?D:function(){var Z=A.apply(this,arguments);Z!==void 0&&(arguments[0]=Z);var ne=this.onsuccess,ce=this.onerror;this.onsuccess=null,this.onerror=null;var we=D.apply(this,arguments);return ne&&(this.onsuccess=this.onsuccess?me(ne,this.onsuccess):ne),ce&&(this.onerror=this.onerror?me(ce,this.onerror):ce),we!==void 0?we:Z}}function se(A,D){return A===Le?D:function(){A.apply(this,arguments);var Z=this.onsuccess,ne=this.onerror;this.onsuccess=this.onerror=null,D.apply(this,arguments),Z&&(this.onsuccess=this.onsuccess?me(Z,this.onsuccess):Z),ne&&(this.onerror=this.onerror?me(ne,this.onerror):ne)}}function ie(A,D){return A===Le?D:function(Z){var ne=A.apply(this,arguments);l(Z,ne);var ce=this.onsuccess,we=this.onerror;return this.onsuccess=null,this.onerror=null,Z=D.apply(this,arguments),ce&&(this.onsuccess=this.onsuccess?me(ce,this.onsuccess):ce),we&&(this.onerror=this.onerror?me(we,this.onerror):we),ne===void 0?Z===void 0?void 0:Z:l(ne,Z)}}function Q(A,D){return A===Le?D:function(){return D.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function xe(A,D){return A===Le?D:function(){var Z=A.apply(this,arguments);if(Z&&typeof Z.then=="function"){for(var ne=this,ce=arguments.length,we=new Array(ce);ce--;)we[ce]=arguments[ce];return Z.then(function(){return D.apply(ne,we)})}return D.apply(this,arguments)}}Qe.ModifyError=_e,Qe.DexieError=ue,Qe.BulkError=Pe;var Me=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ee(A){Me=A}var We={},kt=100,_t=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,u(A),A];var D=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[D,u(D),A]}(),at=_t[0],hi=_t[1],_t=_t[2],hi=hi&&hi.then,Dt=at&&at.constructor,jt=!!_t,Gt=function(A,D){le.push([A,D]),I&&(queueMicrotask(pe),I=!1)},ye=!0,I=!0,G=[],de=[],Oe=Ie,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Le,pgp:!1,env:{},finalize:Le},ke=ve,le=[],ft=0,vt=[];function M(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var D=this._PSD=ke;if(typeof A!="function"){if(A!==We)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ge(this,this._value))}this._state=null,this._value=null,++D.ref,function Z(ne,ce){try{ce(function(we){if(ne._state===null){if(we===ne)throw new TypeError("A promise cannot be resolved with itself.");var De=ne._lib&&H();we&&typeof we.then=="function"?Z(ne,function($e,Ge){we instanceof M?we._then($e,Ge):we.then($e,Ge)}):(ne._state=!0,ne._value=we,je(ne)),De&&B()}},ge.bind(null,ne))}catch(we){ge(ne,we)}}(this,A)}var Be={get:function(){var A=ke,D=At;function Z(ne,ce){var we=this,De=!A.global&&(A!==ke||D!==At),$e=De&&!zn(),Ge=new M(function(Ye,nt){Ke(we,new tt(ds(ne,A,De,$e),ds(ce,A,De,$e),Ye,nt,A))});return this._consoleTask&&(Ge._consoleTask=this._consoleTask),Ge}return Z.prototype=We,Z},set:function(A){v(this,"then",A&&A.prototype===We?Be:{get:function(){return A},set:Be.set})}};function tt(A,D,Z,ne,ce){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof D=="function"?D:null,this.resolve=Z,this.reject=ne,this.psd=ce}function ge(A,D){var Z,ne;de.push(D),A._state===null&&(Z=A._lib&&H(),D=Oe(D),A._state=!1,A._value=D,ne=A,G.some(function(ce){return ce._value===ne._value})||G.push(ne),je(A),Z&&B())}function je(A){var D=A._listeners;A._listeners=[];for(var Z=0,ne=D.length;Z<ne;++Z)Ke(A,D[Z]);var ce=A._PSD;--ce.ref||ce.finalize(),ft===0&&(++ft,Gt(function(){--ft==0&&W()},[]))}function Ke(A,D){if(A._state!==null){var Z=A._state?D.onFulfilled:D.onRejected;if(Z===null)return(A._state?D.resolve:D.reject)(A._value);++D.psd.ref,++ft,Gt(Nt,[Z,A,D])}else A._listeners.push(D)}function Nt(A,D,Z){try{var ne,ce=D._value;!D._state&&de.length&&(de=[]),ne=Me&&D._consoleTask?D._consoleTask.run(function(){return A(ce)}):A(ce),D._state||de.indexOf(ce)!==-1||function(we){for(var De=G.length;De;)if(G[--De]._value===we._value)return G.splice(De,1)}(D),Z.resolve(ne)}catch(we){Z.reject(we)}finally{--ft==0&&W(),--Z.psd.ref||Z.psd.finalize()}}function pe(){us(ve,function(){H()&&B()})}function H(){var A=ye;return I=ye=!1,A}function B(){var A,D,Z;do for(;0<le.length;)for(A=le,le=[],Z=A.length,D=0;D<Z;++D){var ne=A[D];ne[0].apply(null,ne[1])}while(0<le.length);I=ye=!0}function W(){var A=G;G=[],A.forEach(function(ne){ne._PSD.onunhandled.call(null,ne._value,ne)});for(var D=vt.slice(0),Z=D.length;Z;)D[--Z]()}function he(A){return new M(We,!1,A)}function Te(A,D){var Z=ke;return function(){var ne=H(),ce=ke;try{return Dn(Z,!0),A.apply(this,arguments)}catch(we){D&&D(we)}finally{Dn(ce,!1),ne&&B()}}}p(M.prototype,{then:Be,_then:function(A,D){Ke(this,new tt(null,null,A,D,ke))},catch:function(A){if(arguments.length===1)return this.then(null,A);var D=A,Z=arguments[1];return typeof D=="function"?this.then(null,function(ne){return(ne instanceof D?Z:he)(ne)}):this.then(null,function(ne){return(ne&&ne.name===D?Z:he)(ne)})},finally:function(A){return this.then(function(D){return M.resolve(A()).then(function(){return D})},function(D){return M.resolve(A()).then(function(){return he(D)})})},timeout:function(A,D){var Z=this;return A<1/0?new M(function(ne,ce){var we=setTimeout(function(){return ce(new Ce.Timeout(D))},A);Z.then(ne,ce).finally(clearTimeout.bind(null,we))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(M.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=ui(),p(M,{all:function(){var A=U.apply(null,arguments).map(br);return new M(function(D,Z){A.length===0&&D([]);var ne=A.length;A.forEach(function(ce,we){return M.resolve(ce).then(function(De){A[we]=De,--ne||D(A)},Z)})})},resolve:function(A){return A instanceof M?A:A&&typeof A.then=="function"?new M(function(D,Z){A.then(D,Z)}):new M(We,!0,A)},reject:he,race:function(){var A=U.apply(null,arguments).map(br);return new M(function(D,Z){A.map(function(ne){return M.resolve(ne).then(D,Z)})})},PSD:{get:function(){return ke},set:function(A){return ke=A}},totalEchoes:{get:function(){return At}},newPSD:Xt,usePSD:us,scheduler:{get:function(){return Gt},set:function(A){Gt=A}},rejectionMapper:{get:function(){return Oe},set:function(A){Oe=A}},follow:function(A,D){return new M(function(Z,ne){return Xt(function(ce,we){var De=ke;De.unhandleds=[],De.onunhandled=we,De.finalize=me(function(){var $e,Ge=this;$e=function(){Ge.unhandleds.length===0?ce():we(Ge.unhandleds[0])},vt.push(function Ye(){$e(),vt.splice(vt.indexOf(Ye),1)}),++ft,Gt(function(){--ft==0&&W()},[])},De.finalize),A()},D,Z,ne)})}}),Dt&&(Dt.allSettled&&v(M,"allSettled",function(){var A=U.apply(null,arguments).map(br);return new M(function(D){A.length===0&&D([]);var Z=A.length,ne=new Array(Z);A.forEach(function(ce,we){return M.resolve(ce).then(function(De){return ne[we]={status:"fulfilled",value:De}},function(De){return ne[we]={status:"rejected",reason:De}}).then(function(){return--Z||D(ne)})})})}),Dt.any&&typeof AggregateError<"u"&&v(M,"any",function(){var A=U.apply(null,arguments).map(br);return new M(function(D,Z){A.length===0&&Z(new AggregateError([]));var ne=A.length,ce=new Array(ne);A.forEach(function(we,De){return M.resolve(we).then(function($e){return D($e)},function($e){ce[De]=$e,--ne||Z(new AggregateError(ce))})})})}),Dt.withResolvers&&(M.withResolvers=Dt.withResolvers));var He={awaits:0,echoes:0,id:0},pt=0,Vt=[],ut=0,At=0,Mt=0;function Xt(A,D,Z,ne){var ce=ke,we=Object.create(ce);return we.parent=ce,we.ref=0,we.global=!1,we.id=++Mt,ve.env,we.env=jt?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},D&&l(we,D),++ce.ref,we.finalize=function(){--this.parent.ref||this.parent.finalize()},ne=us(we,A,Z,ne),we.ref===0&&we.finalize(),ne}function Tn(){return He.id||(He.id=++pt),++He.awaits,He.echoes+=kt,He.id}function zn(){return!!He.awaits&&(--He.awaits==0&&(He.id=0),He.echoes=He.awaits*kt,!0)}function br(A){return He.echoes&&A&&A.constructor===Dt?(Tn(),A.then(function(D){return zn(),D},function(D){return zn(),Vr(D)})):A}function vr(){var A=Vt[Vt.length-1];Vt.pop(),Dn(A,!1)}function Dn(A,D){var Z,ne=ke;(D?!He.echoes||ut++&&A===ke:!ut||--ut&&A===ke)||queueMicrotask(D?(function(ce){++At,He.echoes&&--He.echoes!=0||(He.echoes=He.awaits=He.id=0),Vt.push(ke),Dn(ce,!0)}).bind(null,A):vr),A!==ke&&(ke=A,ne===ve&&(ve.env=ui()),jt&&(Z=ve.env.Promise,D=A.env,(ne.global||A.global)&&(Object.defineProperty(i,"Promise",D.PromiseProp),Z.all=D.all,Z.race=D.race,Z.resolve=D.resolve,Z.reject=D.reject,D.allSettled&&(Z.allSettled=D.allSettled),D.any&&(Z.any=D.any))))}function ui(){var A=i.Promise;return jt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function us(A,D,Z,ne,ce){var we=ke;try{return Dn(A,!0),D(Z,ne,ce)}finally{Dn(we,!1)}}function ds(A,D,Z,ne){return typeof A!="function"?A:function(){var ce=ke;Z&&Tn(),Dn(D,!0);try{return A.apply(this,arguments)}finally{Dn(ce,!1),ne&&queueMicrotask(zn)}}}function fs(A){Promise===Dt&&He.echoes===0?ut===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+hi).indexOf("[native code]")===-1&&(Tn=zn=Le);var Vr=M.reject,hs="",ao="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wg="String expected.",Io=[],el="__dbnames",$i="readonly",Nu="readwrite";function ps(A,D){return A?D?function(){return A.apply(this,arguments)&&D.apply(this,arguments)}:A:D}var tl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ec(A){return typeof A!="string"||/\./.test(A)?function(D){return D}:function(D){return D[A]===void 0&&A in D&&delete(D=K(D))[A],D}}function Yd(){throw Ce.Type()}function Un(A,D){try{var Z=bp(A),ne=bp(D);if(Z!==ne)return Z==="Array"?1:ne==="Array"?-1:Z==="binary"?1:ne==="binary"?-1:Z==="string"?1:ne==="string"?-1:Z==="Date"?1:ne!=="Date"?NaN:-1;switch(Z){case"number":case"Date":case"string":return D<A?1:A<D?-1:0;case"binary":return function(ce,we){for(var De=ce.length,$e=we.length,Ge=De<$e?De:$e,Ye=0;Ye<Ge;++Ye)if(ce[Ye]!==we[Ye])return ce[Ye]<we[Ye]?-1:1;return De===$e?0:De<$e?-1:1}(di(A),di(D));case"Array":return function(ce,we){for(var De=ce.length,$e=we.length,Ge=De<$e?De:$e,Ye=0;Ye<Ge;++Ye){var nt=Un(ce[Ye],we[Ye]);if(nt!==0)return nt}return De===$e?0:De<$e?-1:1}(A,D)}}catch{}return NaN}function bp(A){var D=typeof A;return D!="object"?D:ArrayBuffer.isView(A)?"binary":(A=fe(A),A==="ArrayBuffer"?"binary":A)}function di(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var vp=(Ar.prototype._trans=function(A,D,Z){var ne=this._tx||ke.trans,ce=this.name,we=Me&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function De(Ye,nt,qe){if(!qe.schema[ce])throw new Ce.NotFound("Table "+ce+" not part of transaction");return D(qe.idbtrans,qe)}var $e=H();try{var Ge=ne&&ne.db._novip===this.db._novip?ne===ke.trans?ne._promise(A,De,Z):Xt(function(){return ne._promise(A,De,Z)},{trans:ne,transless:ke.transless||ke}):function Ye(nt,qe,it,Ve){if(nt.idbdb&&(nt._state.openComplete||ke.letThrough||nt._vip)){var et=nt._createTransaction(qe,it,nt._dbSchema);try{et.create(),nt._state.PR1398_maxLoop=3}catch(ot){return ot.name===Ne.InvalidState&&nt.isOpen()&&0<--nt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),nt.close({disableAutoOpen:!1}),nt.open().then(function(){return Ye(nt,qe,it,Ve)})):Vr(ot)}return et._promise(qe,function(ot,Xe){return Xt(function(){return ke.trans=et,Ve(ot,Xe,et)})}).then(function(ot){if(qe==="readwrite")try{et.idbtrans.commit()}catch{}return qe==="readonly"?ot:et._completion.then(function(){return ot})})}if(nt._state.openComplete)return Vr(new Ce.DatabaseClosed(nt._state.dbOpenError));if(!nt._state.isBeingOpened){if(!nt._state.autoOpen)return Vr(new Ce.DatabaseClosed);nt.open().catch(Le)}return nt._state.dbReadyPromise.then(function(){return Ye(nt,qe,it,Ve)})}(this.db,A,[this.name],De);return we&&(Ge._consoleTask=we,Ge=Ge.catch(function(Ye){return console.trace(Ye),Vr(Ye)})),Ge}finally{$e&&B()}},Ar.prototype.get=function(A,D){var Z=this;return A&&A.constructor===Object?this.where(A).first(D):A==null?Vr(new Ce.Type("Invalid argument to Table.get()")):this._trans("readonly",function(ne){return Z.core.get({trans:ne,key:A}).then(function(ce){return Z.hook.reading.fire(ce)})}).then(D)},Ar.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(s(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var D=o(A);if(D.length===1)return this.where(D[0]).equals(A[D[0]]);var Z=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&D.every(function(Ye){return 0<=$e.keyPath.indexOf(Ye)})){for(var Ge=0;Ge<D.length;++Ge)if(D.indexOf($e.keyPath[Ge])===-1)return!1;return!0}return!1}).sort(function($e,Ge){return $e.keyPath.length-Ge.keyPath.length})[0];if(Z&&this.db._maxKey!==hs){var we=Z.keyPath.slice(0,D.length);return this.where(we).equals(we.map(function(Ge){return A[Ge]}))}!Z&&Me&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(D.join("+"),"]"));var ne=this.schema.idxByName;function ce($e,Ge){return Un($e,Ge)===0}var De=D.reduce(function(qe,Ge){var Ye=qe[0],nt=qe[1],qe=ne[Ge],it=A[Ge];return[Ye||qe,Ye||!qe?ps(nt,qe&&qe.multi?function(Ve){return Ve=R(Ve,Ge),s(Ve)&&Ve.some(function(et){return ce(it,et)})}:function(Ve){return ce(it,R(Ve,Ge))}):nt]},[null,null]),we=De[0],De=De[1];return we?this.where(we.name).equals(A[we.keyPath]).filter(De):Z?this.filter(De):this.where(D).equals("")},Ar.prototype.filter=function(A){return this.toCollection().and(A)},Ar.prototype.count=function(A){return this.toCollection().count(A)},Ar.prototype.offset=function(A){return this.toCollection().offset(A)},Ar.prototype.limit=function(A){return this.toCollection().limit(A)},Ar.prototype.each=function(A){return this.toCollection().each(A)},Ar.prototype.toArray=function(A){return this.toCollection().toArray(A)},Ar.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ar.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,s(A)?"[".concat(A.join("+"),"]"):A))},Ar.prototype.reverse=function(){return this.toCollection().reverse()},Ar.prototype.mapToClass=function(A){var D,Z=this.db,ne=this.name;function ce(){return D!==null&&D.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof Yd&&(function(Ge,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function nt(){this.constructor=Ge}n(Ge,Ye),Ge.prototype=Ye===null?Object.create(Ye):(nt.prototype=Ye.prototype,new nt)}(ce,D=A),Object.defineProperty(ce.prototype,"db",{get:function(){return Z},enumerable:!1,configurable:!0}),ce.prototype.table=function(){return ne},A=ce);for(var we=new Set,De=A.prototype;De;De=u(De))Object.getOwnPropertyNames(De).forEach(function(Ge){return we.add(Ge)});function $e(Ge){if(!Ge)return Ge;var Ye,nt=Object.create(A.prototype);for(Ye in Ge)if(!we.has(Ye))try{nt[Ye]=Ge[Ye]}catch{}return nt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),A},Ar.prototype.defineClass=function(){return this.mapToClass(function(A){l(this,A)})},Ar.prototype.add=function(A,D){var Z=this,ne=this.schema.primKey,ce=ne.auto,we=ne.keyPath,De=A;return we&&ce&&(De=ec(we)(A)),this._trans("readwrite",function($e){return Z.core.mutate({trans:$e,type:"add",keys:D!=null?[D]:null,values:[De]})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{j(A,we,$e)}catch{}return $e})},Ar.prototype.update=function(A,D){return typeof A!="object"||s(A)?this.where(":id").equals(A).modify(D):(A=R(A,this.schema.primKey.keyPath),A===void 0?Vr(new Ce.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(D))},Ar.prototype.put=function(A,D){var Z=this,ne=this.schema.primKey,ce=ne.auto,we=ne.keyPath,De=A;return we&&ce&&(De=ec(we)(A)),this._trans("readwrite",function($e){return Z.core.mutate({trans:$e,type:"put",values:[De],keys:D!=null?[D]:null})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{j(A,we,$e)}catch{}return $e})},Ar.prototype.delete=function(A){var D=this;return this._trans("readwrite",function(Z){return D.core.mutate({trans:Z,type:"delete",keys:[A]})}).then(function(Z){return Z.numFailures?M.reject(Z.failures[0]):void 0})},Ar.prototype.clear=function(){var A=this;return this._trans("readwrite",function(D){return A.core.mutate({trans:D,type:"deleteRange",range:tl})}).then(function(D){return D.numFailures?M.reject(D.failures[0]):void 0})},Ar.prototype.bulkGet=function(A){var D=this;return this._trans("readonly",function(Z){return D.core.getMany({keys:A,trans:Z}).then(function(ne){return ne.map(function(ce){return D.hook.reading.fire(ce)})})})},Ar.prototype.bulkAdd=function(A,D,Z){var ne=this,ce=Array.isArray(D)?D:void 0,we=(Z=Z||(ce?void 0:D))?Z.allKeys:void 0;return this._trans("readwrite",function(De){var Ye=ne.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ce)throw new Ce.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var Ge=A.length,Ye=Ye&&$e?A.map(ec(Ye)):A;return ne.core.mutate({trans:De,type:"add",keys:ce,values:Ye,wantResults:we}).then(function(et){var qe=et.numFailures,it=et.results,Ve=et.lastResult,et=et.failures;if(qe===0)return we?it:Ve;throw new Pe("".concat(ne.name,".bulkAdd(): ").concat(qe," of ").concat(Ge," operations failed"),et)})})},Ar.prototype.bulkPut=function(A,D,Z){var ne=this,ce=Array.isArray(D)?D:void 0,we=(Z=Z||(ce?void 0:D))?Z.allKeys:void 0;return this._trans("readwrite",function(De){var Ye=ne.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ce)throw new Ce.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var Ge=A.length,Ye=Ye&&$e?A.map(ec(Ye)):A;return ne.core.mutate({trans:De,type:"put",keys:ce,values:Ye,wantResults:we}).then(function(et){var qe=et.numFailures,it=et.results,Ve=et.lastResult,et=et.failures;if(qe===0)return we?it:Ve;throw new Pe("".concat(ne.name,".bulkPut(): ").concat(qe," of ").concat(Ge," operations failed"),et)})})},Ar.prototype.bulkUpdate=function(A){var D=this,Z=this.core,ne=A.map(function(De){return De.key}),ce=A.map(function(De){return De.changes}),we=[];return this._trans("readwrite",function(De){return Z.getMany({trans:De,keys:ne,cache:"clone"}).then(function($e){var Ge=[],Ye=[];A.forEach(function(qe,it){var Ve=qe.key,et=qe.changes,ot=$e[it];if(ot){for(var Xe=0,ht=Object.keys(et);Xe<ht.length;Xe++){var bt=ht[Xe],wt=et[bt];if(bt===D.schema.primKey.keyPath){if(Un(wt,Ve)!==0)throw new Ce.Constraint("Cannot update primary key in bulkUpdate()")}else j(ot,bt,wt)}we.push(it),Ge.push(Ve),Ye.push(ot)}});var nt=Ge.length;return Z.mutate({trans:De,type:"put",keys:Ge,values:Ye,updates:{keys:ne,changeSpecs:ce}}).then(function(qe){var it=qe.numFailures,Ve=qe.failures;if(it===0)return nt;for(var et=0,ot=Object.keys(Ve);et<ot.length;et++){var Xe,ht=ot[et],bt=we[Number(ht)];bt!=null&&(Xe=Ve[ht],delete Ve[ht],Ve[bt]=Xe)}throw new Pe("".concat(D.name,".bulkUpdate(): ").concat(it," of ").concat(nt," operations failed"),Ve)})})})},Ar.prototype.bulkDelete=function(A){var D=this,Z=A.length;return this._trans("readwrite",function(ne){return D.core.mutate({trans:ne,type:"delete",keys:A})}).then(function(De){var ce=De.numFailures,we=De.lastResult,De=De.failures;if(ce===0)return we;throw new Pe("".concat(D.name,".bulkDelete(): ").concat(ce," of ").concat(Z," operations failed"),De)})},Ar);function Ar(){}function ms(A){function D(De,$e){if($e){for(var Ge=arguments.length,Ye=new Array(Ge-1);--Ge;)Ye[Ge-1]=arguments[Ge];return Z[De].subscribe.apply(null,Ye),A}if(typeof De=="string")return Z[De]}var Z={};D.addEventType=we;for(var ne=1,ce=arguments.length;ne<ce;++ne)we(arguments[ne]);return D;function we(De,$e,Ge){if(typeof De!="object"){var Ye;$e=$e||Q;var nt={subscribers:[],fire:Ge=Ge||Le,subscribe:function(qe){nt.subscribers.indexOf(qe)===-1&&(nt.subscribers.push(qe),nt.fire=$e(nt.fire,qe))},unsubscribe:function(qe){nt.subscribers=nt.subscribers.filter(function(it){return it!==qe}),nt.fire=nt.subscribers.reduce($e,Ge)}};return Z[De]=D[De]=nt}o(Ye=De).forEach(function(qe){var it=Ye[qe];if(s(it))we(qe,Ye[qe][0],Ye[qe][1]);else{if(it!=="asap")throw new Ce.InvalidArgument("Invalid event config");var Ve=we(qe,Ie,function(){for(var et=arguments.length,ot=new Array(et);et--;)ot[et]=arguments[et];Ve.subscribers.forEach(function(Xe){k(function(){Xe.apply(null,ot)})})})}})}}function tc(A,D){return b(D).from({prototype:A}),D}function Oo(A,D){return!(A.filter||A.algorithm||A.or)&&(D?A.justLimit:!A.replayFilter)}function wp(A,D){A.filter=ps(A.filter,D)}function Za(A,D,Z){var ne=A.replayFilter;A.replayFilter=ne?function(){return ps(ne(),D())}:D,A.justLimit=Z&&!ne}function nc(A,D){if(A.isPrimKey)return D.primaryKey;var Z=D.getIndexByKeyPath(A.index);if(!Z)throw new Ce.Schema("KeyPath "+A.index+" on object store "+D.name+" is not indexed");return Z}function _p(A,D,Z){var ne=nc(A,D.schema);return D.openCursor({trans:Z,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:ne,range:A.range}})}function rc(A,D,Z,ne){var ce=A.replayFilter?ps(A.filter,A.replayFilter()):A.filter;if(A.or){var we={},De=function($e,Ge,Ye){var nt,qe;ce&&!ce(Ge,Ye,function(it){return Ge.stop(it)},function(it){return Ge.fail(it)})||((qe=""+(nt=Ge.primaryKey))=="[object ArrayBuffer]"&&(qe=""+new Uint8Array(nt)),h(we,qe)||(we[qe]=!0,D($e,Ge,Ye)))};return Promise.all([A.or._iterate(De,Z),nl(_p(A,ne,Z),A.algorithm,De,!A.keysOnly&&A.valueMapper)])}return nl(_p(A,ne,Z),ps(A.algorithm,ce),D,!A.keysOnly&&A.valueMapper)}function nl(A,D,Z,ne){var ce=Te(ne?function(we,De,$e){return Z(ne(we),De,$e)}:Z);return A.then(function(we){if(we)return we.start(function(){var De=function(){return we.continue()};D&&!D(we,function($e){return De=$e},function($e){we.stop($e),De=Le},function($e){we.fail($e),De=Le})||ce(we.value,we,function($e){return De=$e}),De()})})}var ac=(xp.prototype.execute=function(A){var D=this["@@propmod"];if(D.add!==void 0){var Z=D.add;if(s(Z))return a(a([],s(A)?A:[],!0),Z).sort();if(typeof Z=="number")return(Number(A)||0)+Z;if(typeof Z=="bigint")try{return BigInt(A)+Z}catch{return BigInt(0)+Z}throw new TypeError("Invalid term ".concat(Z))}if(D.remove!==void 0){var ne=D.remove;if(s(ne))return s(A)?A.filter(function(ce){return!ne.includes(ce)}).sort():[];if(typeof ne=="number")return Number(A)-ne;if(typeof ne=="bigint")try{return BigInt(A)-ne}catch{return BigInt(0)-ne}throw new TypeError("Invalid subtrahend ".concat(ne))}return Z=(Z=D.replacePrefix)===null||Z===void 0?void 0:Z[0],Z&&typeof A=="string"&&A.startsWith(Z)?D.replacePrefix[1]+A.substring(Z.length):A},xp);function xp(A){this["@@propmod"]=A}var ic=(Wn.prototype._read=function(A,D){var Z=this._ctx;return Z.error?Z.table._trans(null,Vr.bind(null,Z.error)):Z.table._trans("readonly",A).then(D)},Wn.prototype._write=function(A){var D=this._ctx;return D.error?D.table._trans(null,Vr.bind(null,D.error)):D.table._trans("readwrite",A,"locked")},Wn.prototype._addAlgorithm=function(A){var D=this._ctx;D.algorithm=ps(D.algorithm,A)},Wn.prototype._iterate=function(A,D){return rc(this._ctx,A,D,this._ctx.table.core)},Wn.prototype.clone=function(A){var D=Object.create(this.constructor.prototype),Z=Object.create(this._ctx);return A&&l(Z,A),D._ctx=Z,D},Wn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Wn.prototype.each=function(A){var D=this._ctx;return this._read(function(Z){return rc(D,A,Z,D.table.core)})},Wn.prototype.count=function(A){var D=this;return this._read(function(Z){var ne=D._ctx,ce=ne.table.core;if(Oo(ne,!0))return ce.count({trans:Z,query:{index:nc(ne,ce.schema),range:ne.range}}).then(function(De){return Math.min(De,ne.limit)});var we=0;return rc(ne,function(){return++we,!1},Z,ce).then(function(){return we})}).then(A)},Wn.prototype.sortBy=function(A,D){var Z=A.split(".").reverse(),ne=Z[0],ce=Z.length-1;function we(Ge,Ye){return Ye?we(Ge[Z[Ye]],Ye-1):Ge[ne]}var De=this._ctx.dir==="next"?1:-1;function $e(Ge,Ye){return Un(we(Ge,ce),we(Ye,ce))*De}return this.toArray(function(Ge){return Ge.sort($e)}).then(D)},Wn.prototype.toArray=function(A){var D=this;return this._read(function(Z){var ne=D._ctx;if(ne.dir==="next"&&Oo(ne,!0)&&0<ne.limit){var ce=ne.valueMapper,we=nc(ne,ne.table.core.schema);return ne.table.core.query({trans:Z,limit:ne.limit,values:!0,query:{index:we,range:ne.range}}).then(function($e){return $e=$e.result,ce?$e.map(ce):$e})}var De=[];return rc(ne,function($e){return De.push($e)},Z,ne.table.core).then(function(){return De})},A)},Wn.prototype.offset=function(A){var D=this._ctx;return A<=0||(D.offset+=A,Oo(D)?Za(D,function(){var Z=A;return function(ne,ce){return Z===0||(Z===1?--Z:ce(function(){ne.advance(Z),Z=0}),!1)}}):Za(D,function(){var Z=A;return function(){return--Z<0}})),this},Wn.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),Za(this._ctx,function(){var D=A;return function(Z,ne,ce){return--D<=0&&ne(ce),0<=D}},!0),this},Wn.prototype.until=function(A,D){return wp(this._ctx,function(Z,ne,ce){return!A(Z.value)||(ne(ce),D)}),this},Wn.prototype.first=function(A){return this.limit(1).toArray(function(D){return D[0]}).then(A)},Wn.prototype.last=function(A){return this.reverse().first(A)},Wn.prototype.filter=function(A){var D;return wp(this._ctx,function(Z){return A(Z.value)}),(D=this._ctx).isMatch=ps(D.isMatch,A),this},Wn.prototype.and=function(A){return this.filter(A)},Wn.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},Wn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Wn.prototype.desc=function(){return this.reverse()},Wn.prototype.eachKey=function(A){var D=this._ctx;return D.keysOnly=!D.isMatch,this.each(function(Z,ne){A(ne.key,ne)})},Wn.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},Wn.prototype.eachPrimaryKey=function(A){var D=this._ctx;return D.keysOnly=!D.isMatch,this.each(function(Z,ne){A(ne.primaryKey,ne)})},Wn.prototype.keys=function(A){var D=this._ctx;D.keysOnly=!D.isMatch;var Z=[];return this.each(function(ne,ce){Z.push(ce.key)}).then(function(){return Z}).then(A)},Wn.prototype.primaryKeys=function(A){var D=this._ctx;if(D.dir==="next"&&Oo(D,!0)&&0<D.limit)return this._read(function(ne){var ce=nc(D,D.table.core.schema);return D.table.core.query({trans:ne,values:!1,limit:D.limit,query:{index:ce,range:D.range}})}).then(function(ne){return ne.result}).then(A);D.keysOnly=!D.isMatch;var Z=[];return this.each(function(ne,ce){Z.push(ce.primaryKey)}).then(function(){return Z}).then(A)},Wn.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},Wn.prototype.firstKey=function(A){return this.limit(1).keys(function(D){return D[0]}).then(A)},Wn.prototype.lastKey=function(A){return this.reverse().firstKey(A)},Wn.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var D={};return wp(this._ctx,function(ce){var ne=ce.primaryKey.toString(),ce=h(D,ne);return D[ne]=!0,!ce}),this},Wn.prototype.modify=function(A){var D=this,Z=this._ctx;return this._write(function(ne){var ce,we,De;De=typeof A=="function"?A:(ce=o(A),we=ce.length,function(Xe){for(var ht=!1,bt=0;bt<we;++bt){var wt=ce[bt],St=A[wt],zt=R(Xe,wt);St instanceof ac?(j(Xe,wt,St.execute(zt)),ht=!0):zt!==St&&(j(Xe,wt,St),ht=!0)}return ht});var $e=Z.table.core,qe=$e.schema.primaryKey,Ge=qe.outbound,Ye=qe.extractKey,nt=200,qe=D.db._options.modifyChunkSize;qe&&(nt=typeof qe=="object"?qe[$e.name]||qe["*"]||200:qe);function it(Xe,wt){var bt=wt.failures,wt=wt.numFailures;et+=Xe-wt;for(var St=0,zt=o(bt);St<zt.length;St++){var Kt=zt[St];Ve.push(bt[Kt])}}var Ve=[],et=0,ot=[];return D.clone().primaryKeys().then(function(Xe){function ht(wt){var St=Math.min(nt,Xe.length-wt);return $e.getMany({trans:ne,keys:Xe.slice(wt,wt+St),cache:"immutable"}).then(function(zt){for(var Kt=[],Ft=[],Ht=Ge?[]:null,Zt=[],Lt=0;Lt<St;++Lt){var Qt=zt[Lt],pn={value:K(Qt),primKey:Xe[wt+Lt]};De.call(pn,pn.value,pn)!==!1&&(pn.value==null?Zt.push(Xe[wt+Lt]):Ge||Un(Ye(Qt),Ye(pn.value))===0?(Ft.push(pn.value),Ge&&Ht.push(Xe[wt+Lt])):(Zt.push(Xe[wt+Lt]),Kt.push(pn.value)))}return Promise.resolve(0<Kt.length&&$e.mutate({trans:ne,type:"add",values:Kt}).then(function(gn){for(var Nn in gn.failures)Zt.splice(parseInt(Nn),1);it(Kt.length,gn)})).then(function(){return(0<Ft.length||bt&&typeof A=="object")&&$e.mutate({trans:ne,type:"put",keys:Ht,values:Ft,criteria:bt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<wt}).then(function(gn){return it(Ft.length,gn)})}).then(function(){return(0<Zt.length||bt&&A===Xd)&&$e.mutate({trans:ne,type:"delete",keys:Zt,criteria:bt,isAdditionalChunk:0<wt}).then(function(gn){return it(Zt.length,gn)})}).then(function(){return Xe.length>wt+St&&ht(wt+nt)})})}var bt=Oo(Z)&&Z.limit===1/0&&(typeof A!="function"||A===Xd)&&{index:Z.index,range:Z.range};return ht(0).then(function(){if(0<Ve.length)throw new _e("Error modifying one or more objects",Ve,et,ot);return Xe.length})})})},Wn.prototype.delete=function(){var A=this._ctx,D=A.range;return Oo(A)&&(A.isPrimKey||D.type===3)?this._write(function(Z){var ne=A.table.core.schema.primaryKey,ce=D;return A.table.core.count({trans:Z,query:{index:ne,range:ce}}).then(function(we){return A.table.core.mutate({trans:Z,type:"deleteRange",range:ce}).then(function(De){var $e=De.failures;if(De.lastResult,De.results,De=De.numFailures,De)throw new _e("Could not delete some values",Object.keys($e).map(function(Ge){return $e[Ge]}),we-De);return we-De})})}):this.modify(Xd)},Wn);function Wn(){}var Xd=function(A,D){return D.value=null};function Kg(A,D){return A<D?-1:A===D?0:1}function Sp(A,D){return D<A?-1:A===D?0:1}function fi(A,D,Z){return A=A instanceof al?new A.Collection(A):A,A._ctx.error=new(Z||TypeError)(D),A}function oc(A){return new A.Collection(A,function(){return Jd("")}).limit(0)}function rl(A,D,Z,ne){var ce,we,De,$e,Ge,Ye,nt,qe=Z.length;if(!Z.every(function(et){return typeof et=="string"}))return fi(A,Wg);function it(et){ce=et==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},we=et==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},De=et==="next"?Kg:Sp;var ot=Z.map(function(Xe){return{lower:we(Xe),upper:ce(Xe)}}).sort(function(Xe,ht){return De(Xe.lower,ht.lower)});$e=ot.map(function(Xe){return Xe.upper}),Ge=ot.map(function(Xe){return Xe.lower}),nt=(Ye=et)==="next"?"":ne}it("next"),A=new A.Collection(A,function(){return io($e[0],Ge[qe-1]+ne)}),A._ondirectionchange=function(et){it(et)};var Ve=0;return A._addAlgorithm(function(et,ot,Xe){var ht=et.key;if(typeof ht!="string")return!1;var bt=we(ht);if(D(bt,Ge,Ve))return!0;for(var wt=null,St=Ve;St<qe;++St){var zt=function(Kt,Ft,Ht,Zt,Lt,Qt){for(var pn=Math.min(Kt.length,Zt.length),gn=-1,Nn=0;Nn<pn;++Nn){var Ua=Ft[Nn];if(Ua!==Zt[Nn])return Lt(Kt[Nn],Ht[Nn])<0?Kt.substr(0,Nn)+Ht[Nn]+Ht.substr(Nn+1):Lt(Kt[Nn],Zt[Nn])<0?Kt.substr(0,Nn)+Zt[Nn]+Ht.substr(Nn+1):0<=gn?Kt.substr(0,gn)+Ft[gn]+Ht.substr(gn+1):null;Lt(Kt[Nn],Ua)<0&&(gn=Nn)}return pn<Zt.length&&Qt==="next"?Kt+Ht.substr(Kt.length):pn<Kt.length&&Qt==="prev"?Kt.substr(0,Ht.length):gn<0?null:Kt.substr(0,gn)+Zt[gn]+Ht.substr(gn+1)}(ht,bt,$e[St],Ge[St],De,Ye);zt===null&&wt===null?Ve=St+1:(wt===null||0<De(wt,zt))&&(wt=zt)}return ot(wt!==null?function(){et.continue(wt+nt)}:Xe),!1}),A}function io(A,D,Z,ne){return{type:2,lower:A,upper:D,lowerOpen:Z,upperOpen:ne}}function Jd(A){return{type:1,lower:A,upper:A}}var al=(Object.defineProperty(Fr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Fr.prototype.between=function(A,D,Z,ne){Z=Z!==!1,ne=ne===!0;try{return 0<this._cmp(A,D)||this._cmp(A,D)===0&&(Z||ne)&&(!Z||!ne)?oc(this):new this.Collection(this,function(){return io(A,D,!Z,!ne)})}catch{return fi(this,ao)}},Fr.prototype.equals=function(A){return A==null?fi(this,ao):new this.Collection(this,function(){return Jd(A)})},Fr.prototype.above=function(A){return A==null?fi(this,ao):new this.Collection(this,function(){return io(A,void 0,!0)})},Fr.prototype.aboveOrEqual=function(A){return A==null?fi(this,ao):new this.Collection(this,function(){return io(A,void 0,!1)})},Fr.prototype.below=function(A){return A==null?fi(this,ao):new this.Collection(this,function(){return io(void 0,A,!1,!0)})},Fr.prototype.belowOrEqual=function(A){return A==null?fi(this,ao):new this.Collection(this,function(){return io(void 0,A)})},Fr.prototype.startsWith=function(A){return typeof A!="string"?fi(this,Wg):this.between(A,A+hs,!0,!0)},Fr.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):rl(this,function(D,Z){return D.indexOf(Z[0])===0},[A],hs)},Fr.prototype.equalsIgnoreCase=function(A){return rl(this,function(D,Z){return D===Z[0]},[A],"")},Fr.prototype.anyOfIgnoreCase=function(){var A=U.apply(ae,arguments);return A.length===0?oc(this):rl(this,function(D,Z){return Z.indexOf(D)!==-1},A,"")},Fr.prototype.startsWithAnyOfIgnoreCase=function(){var A=U.apply(ae,arguments);return A.length===0?oc(this):rl(this,function(D,Z){return Z.some(function(ne){return D.indexOf(ne)===0})},A,hs)},Fr.prototype.anyOf=function(){var A=this,D=U.apply(ae,arguments),Z=this._cmp;try{D.sort(Z)}catch{return fi(this,ao)}if(D.length===0)return oc(this);var ne=new this.Collection(this,function(){return io(D[0],D[D.length-1])});ne._ondirectionchange=function(we){Z=we==="next"?A._ascending:A._descending,D.sort(Z)};var ce=0;return ne._addAlgorithm(function(we,De,$e){for(var Ge=we.key;0<Z(Ge,D[ce]);)if(++ce===D.length)return De($e),!1;return Z(Ge,D[ce])===0||(De(function(){we.continue(D[ce])}),!1)}),ne},Fr.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Fr.prototype.noneOf=function(){var A=U.apply(ae,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return fi(this,ao)}var D=A.reduce(function(Z,ne){return Z?Z.concat([[Z[Z.length-1][1],ne]]):[[-1/0,ne]]},null);return D.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(D,{includeLowers:!1,includeUppers:!1})},Fr.prototype.inAnyRange=function(ht,D){var Z=this,ne=this._cmp,ce=this._ascending,we=this._descending,De=this._min,$e=this._max;if(ht.length===0)return oc(this);if(!ht.every(function(bt){return bt[0]!==void 0&&bt[1]!==void 0&&ce(bt[0],bt[1])<=0}))return fi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ce.InvalidArgument);var Ge=!D||D.includeLowers!==!1,Ye=D&&D.includeUppers===!0,nt,qe=ce;function it(bt,wt){return qe(bt[0],wt[0])}try{(nt=ht.reduce(function(bt,wt){for(var St=0,zt=bt.length;St<zt;++St){var Kt=bt[St];if(ne(wt[0],Kt[1])<0&&0<ne(wt[1],Kt[0])){Kt[0]=De(Kt[0],wt[0]),Kt[1]=$e(Kt[1],wt[1]);break}}return St===zt&&bt.push(wt),bt},[])).sort(it)}catch{return fi(this,ao)}var Ve=0,et=Ye?function(bt){return 0<ce(bt,nt[Ve][1])}:function(bt){return 0<=ce(bt,nt[Ve][1])},ot=Ge?function(bt){return 0<we(bt,nt[Ve][0])}:function(bt){return 0<=we(bt,nt[Ve][0])},Xe=et,ht=new this.Collection(this,function(){return io(nt[0][0],nt[nt.length-1][1],!Ge,!Ye)});return ht._ondirectionchange=function(bt){qe=bt==="next"?(Xe=et,ce):(Xe=ot,we),nt.sort(it)},ht._addAlgorithm(function(bt,wt,St){for(var zt,Kt=bt.key;Xe(Kt);)if(++Ve===nt.length)return wt(St),!1;return!et(zt=Kt)&&!ot(zt)||(Z._cmp(Kt,nt[Ve][1])===0||Z._cmp(Kt,nt[Ve][0])===0||wt(function(){qe===ce?bt.continue(nt[Ve][0]):bt.continue(nt[Ve][1])}),!1)}),ht},Fr.prototype.startsWithAnyOf=function(){var A=U.apply(ae,arguments);return A.every(function(D){return typeof D=="string"})?A.length===0?oc(this):this.inAnyRange(A.map(function(D){return[D,D+hs]})):fi(this,"startsWithAnyOf() only works with strings")},Fr);function Fr(){}function Bi(A){return Te(function(D){return il(D),A(D.target.error),!1})}function il(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var sc="storagemutated",ol="x-storagemutated-1",ka=ms(null,sc),Ep=(Ya.prototype._lock=function(){return C(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},Ya.prototype._unlock=function(){if(C(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{us(A[1],A[0])}catch{}}return this},Ya.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},Ya.prototype.create=function(A){var D=this;if(!this.mode)return this;var Z=this.db.idbdb,ne=this.db._state.dbOpenError;if(C(!this.idbtrans),!A&&!Z)switch(ne&&ne.name){case"DatabaseClosedError":throw new Ce.DatabaseClosed(ne);case"MissingAPIError":throw new Ce.MissingAPI(ne.message,ne);default:throw new Ce.OpenFailed(ne)}if(!this.active)throw new Ce.TransactionInactive;return C(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||Z).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Te(function(ce){il(ce),D._reject(A.error)}),A.onabort=Te(function(ce){il(ce),D.active&&D._reject(new Ce.Abort(A.error)),D.active=!1,D.on("abort").fire(ce)}),A.oncomplete=Te(function(){D.active=!1,D._resolve(),"mutatedParts"in A&&ka.storagemutated.fire(A.mutatedParts)}),this},Ya.prototype._promise=function(A,D,Z){var ne=this;if(A==="readwrite"&&this.mode!=="readwrite")return Vr(new Ce.ReadOnly("Transaction is readonly"));if(!this.active)return Vr(new Ce.TransactionInactive);if(this._locked())return new M(function(we,De){ne._blockedFuncs.push([function(){ne._promise(A,D,Z).then(we,De)},ke])});if(Z)return Xt(function(){var we=new M(function(De,$e){ne._lock();var Ge=D(De,$e,ne);Ge&&Ge.then&&Ge.then(De,$e)});return we.finally(function(){return ne._unlock()}),we._lib=!0,we});var ce=new M(function(we,De){var $e=D(we,De,ne);$e&&$e.then&&$e.then(we,De)});return ce._lib=!0,ce},Ya.prototype._root=function(){return this.parent?this.parent._root():this},Ya.prototype.waitFor=function(A){var D,Z=this._root(),ne=M.resolve(A);Z._waitingFor?Z._waitingFor=Z._waitingFor.then(function(){return ne}):(Z._waitingFor=ne,Z._waitingQueue=[],D=Z.idbtrans.objectStore(Z.storeNames[0]),function we(){for(++Z._spinCount;Z._waitingQueue.length;)Z._waitingQueue.shift()();Z._waitingFor&&(D.get(-1/0).onsuccess=we)}());var ce=Z._waitingFor;return new M(function(we,De){ne.then(function($e){return Z._waitingQueue.push(Te(we.bind(null,$e)))},function($e){return Z._waitingQueue.push(Te(De.bind(null,$e)))}).finally(function(){Z._waitingFor===ce&&(Z._waitingFor=null)})})},Ya.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ce.Abort))},Ya.prototype.table=function(A){var D=this._memoizedTables||(this._memoizedTables={});if(h(D,A))return D[A];var Z=this.schema[A];if(!Z)throw new Ce.NotFound("Table "+A+" not part of transaction");return Z=new this.db.Table(A,Z,this),Z.core=this.db.core.table(A),D[A]=Z},Ya);function Ya(){}function oo(A,D,Z,ne,ce,we,De){return{name:A,keyPath:D,unique:Z,multi:ne,auto:ce,compound:we,src:(Z&&!De?"&":"")+(ne?"*":"")+(ce?"++":"")+Qd(D)}}function Qd(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function lc(A,D,Z){return{name:A,primKey:D,indexes:Z,mappedClass:null,idxByName:(ne=function(ce){return[ce.name,ce]},Z.reduce(function(ce,we,De){return De=ne(we,De),De&&(ce[De[0]]=De[1]),ce},{}))};var ne}var cc=function(A){try{return A.only([[]]),cc=function(){return[[]]},[[]]}catch{return cc=function(){return hs},hs}};function uc(A){return A==null?function(){}:typeof A=="string"?(D=A).split(".").length===1?function(Z){return Z[D]}:function(Z){return R(Z,D)}:function(Z){return R(Z,A)};var D}function Ru(A){return[].slice.call(A)}var Zg=0;function oa(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function sl(A,D,Ge){function ne(Xe){if(Xe.type===3)return null;if(Xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ve=Xe.lower,et=Xe.upper,ot=Xe.lowerOpen,Xe=Xe.upperOpen;return Ve===void 0?et===void 0?null:D.upperBound(et,!!Xe):et===void 0?D.lowerBound(Ve,!!ot):D.bound(Ve,et,!!ot,!!Xe)}function ce(it){var Ve,et=it.name;return{name:et,schema:it,mutate:function(ot){var Xe=ot.trans,ht=ot.type,bt=ot.keys,wt=ot.values,St=ot.range;return new Promise(function(zt,Kt){zt=Te(zt);var Ft=Xe.objectStore(et),Ht=Ft.keyPath==null,Zt=ht==="put"||ht==="add";if(!Zt&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var Lt,Qt=(bt||wt||{length:1}).length;if(bt&&wt&&bt.length!==wt.length)throw new Error("Given keys array must have same length as given values array.");if(Qt===0)return zt({numFailures:0,failures:{},results:[],lastResult:void 0});function pn(Ta){++Ua,il(Ta)}var gn=[],Nn=[],Ua=0;if(ht==="deleteRange"){if(St.type===4)return zt({numFailures:Ua,failures:Nn,results:[],lastResult:void 0});St.type===3?gn.push(Lt=Ft.clear()):gn.push(Lt=Ft.delete(ne(St)))}else{var Ht=Zt?Ht?[wt,bt]:[wt,null]:[bt,null],xn=Ht[0],ta=Ht[1];if(Zt)for(var sa=0;sa<Qt;++sa)gn.push(Lt=ta&&ta[sa]!==void 0?Ft[ht](xn[sa],ta[sa]):Ft[ht](xn[sa])),Lt.onerror=pn;else for(sa=0;sa<Qt;++sa)gn.push(Lt=Ft[ht](xn[sa])),Lt.onerror=pn}function jo(Ta){Ta=Ta.target.result,gn.forEach(function(lo,vs){return lo.error!=null&&(Nn[vs]=lo.error)}),zt({numFailures:Ua,failures:Nn,results:ht==="delete"?bt:gn.map(function(lo){return lo.result}),lastResult:Ta})}Lt.onerror=function(Ta){pn(Ta),jo(Ta)},Lt.onsuccess=jo})},getMany:function(ot){var Xe=ot.trans,ht=ot.keys;return new Promise(function(bt,wt){bt=Te(bt);for(var St,zt=Xe.objectStore(et),Kt=ht.length,Ft=new Array(Kt),Ht=0,Zt=0,Lt=function(gn){gn=gn.target,Ft[gn._pos]=gn.result,++Zt===Ht&&bt(Ft)},Qt=Bi(wt),pn=0;pn<Kt;++pn)ht[pn]!=null&&((St=zt.get(ht[pn]))._pos=pn,St.onsuccess=Lt,St.onerror=Qt,++Ht);Ht===0&&bt(Ft)})},get:function(ot){var Xe=ot.trans,ht=ot.key;return new Promise(function(bt,wt){bt=Te(bt);var St=Xe.objectStore(et).get(ht);St.onsuccess=function(zt){return bt(zt.target.result)},St.onerror=Bi(wt)})},query:(Ve=Ye,function(ot){return new Promise(function(Xe,ht){Xe=Te(Xe);var bt,wt,St,Ht=ot.trans,zt=ot.values,Kt=ot.limit,Lt=ot.query,Ft=Kt===1/0?void 0:Kt,Zt=Lt.index,Lt=Lt.range,Ht=Ht.objectStore(et),Zt=Zt.isPrimaryKey?Ht:Ht.index(Zt.name),Lt=ne(Lt);if(Kt===0)return Xe({result:[]});Ve?((Ft=zt?Zt.getAll(Lt,Ft):Zt.getAllKeys(Lt,Ft)).onsuccess=function(Qt){return Xe({result:Qt.target.result})},Ft.onerror=Bi(ht)):(bt=0,wt=!zt&&"openKeyCursor"in Zt?Zt.openKeyCursor(Lt):Zt.openCursor(Lt),St=[],wt.onsuccess=function(Qt){var pn=wt.result;return pn?(St.push(zt?pn.value:pn.primaryKey),++bt===Kt?Xe({result:St}):void pn.continue()):Xe({result:St})},wt.onerror=Bi(ht))})}),openCursor:function(ot){var Xe=ot.trans,ht=ot.values,bt=ot.query,wt=ot.reverse,St=ot.unique;return new Promise(function(zt,Kt){zt=Te(zt);var Zt=bt.index,Ft=bt.range,Ht=Xe.objectStore(et),Ht=Zt.isPrimaryKey?Ht:Ht.index(Zt.name),Zt=wt?St?"prevunique":"prev":St?"nextunique":"next",Lt=!ht&&"openKeyCursor"in Ht?Ht.openKeyCursor(ne(Ft),Zt):Ht.openCursor(ne(Ft),Zt);Lt.onerror=Bi(Kt),Lt.onsuccess=Te(function(Qt){var pn,gn,Nn,Ua,xn=Lt.result;xn?(xn.___id=++Zg,xn.done=!1,pn=xn.continue.bind(xn),gn=(gn=xn.continuePrimaryKey)&&gn.bind(xn),Nn=xn.advance.bind(xn),Ua=function(){throw new Error("Cursor not stopped")},xn.trans=Xe,xn.stop=xn.continue=xn.continuePrimaryKey=xn.advance=function(){throw new Error("Cursor not started")},xn.fail=Te(Kt),xn.next=function(){var ta=this,sa=1;return this.start(function(){return sa--?ta.continue():ta.stop()}).then(function(){return ta})},xn.start=function(ta){function sa(){if(Lt.result)try{ta()}catch(Ta){xn.fail(Ta)}else xn.done=!0,xn.start=function(){throw new Error("Cursor behind last entry")},xn.stop()}var jo=new Promise(function(Ta,lo){Ta=Te(Ta),Lt.onerror=Bi(lo),xn.fail=lo,xn.stop=function(vs){xn.stop=xn.continue=xn.continuePrimaryKey=xn.advance=Ua,Ta(vs)}});return Lt.onsuccess=Te(function(Ta){Lt.onsuccess=sa,sa()}),xn.continue=pn,xn.continuePrimaryKey=gn,xn.advance=Nn,sa(),jo},zt(xn)):zt(null)},Kt)})},count:function(ot){var Xe=ot.query,ht=ot.trans,bt=Xe.index,wt=Xe.range;return new Promise(function(St,zt){var Kt=ht.objectStore(et),Ft=bt.isPrimaryKey?Kt:Kt.index(bt.name),Kt=ne(wt),Ft=Kt?Ft.count(Kt):Ft.count();Ft.onsuccess=Te(function(Ht){return St(Ht.target.result)}),Ft.onerror=Bi(zt)})}}}var we,De,$e,nt=(De=Ge,$e=Ru((we=A).objectStoreNames),{schema:{name:we.name,tables:$e.map(function(it){return De.objectStore(it)}).map(function(it){var Ve=it.keyPath,Xe=it.autoIncrement,et=s(Ve),ot={},Xe={name:it.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ve==null,compound:et,keyPath:Ve,autoIncrement:Xe,unique:!0,extractKey:uc(Ve)},indexes:Ru(it.indexNames).map(function(ht){return it.index(ht)}).map(function(St){var bt=St.name,wt=St.unique,zt=St.multiEntry,St=St.keyPath,zt={name:bt,compound:s(St),keyPath:St,unique:wt,multiEntry:zt,extractKey:uc(St)};return ot[oa(St)]=zt}),getIndexByKeyPath:function(ht){return ot[oa(ht)]}};return ot[":id"]=Xe.primaryKey,Ve!=null&&(ot[oa(Ve)]=Xe.primaryKey),Xe})},hasGetAll:0<$e.length&&"getAll"in De.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Ge=nt.schema,Ye=nt.hasGetAll,nt=Ge.tables.map(ce),qe={};return nt.forEach(function(it){return qe[it.name]=it}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(it){if(!qe[it])throw new Error("Table '".concat(it,"' not found"));return qe[it]},MIN_KEY:-1/0,MAX_KEY:cc(D),schema:Ge}}function ef(A,D,Z,ne){var ce=Z.IDBKeyRange;return Z.indexedDB,{dbcore:(ne=sl(D,ce,ne),A.dbcore.reduce(function(we,De){return De=De.create,r(r({},we),De(we))},ne))}}function gs(A,ne){var Z=ne.db,ne=ef(A._middlewares,Z,A._deps,ne);A.core=ne.dbcore,A.tables.forEach(function(ce){var we=ce.name;A.core.schema.tables.some(function(De){return De.name===we})&&(ce.core=A.core.table(we),A[we]instanceof A.Table&&(A[we].core=ce.core))})}function tf(A,D,Z,ne){Z.forEach(function(ce){var we=ne[ce];D.forEach(function(De){var $e=function Ge(Ye,nt){return _(Ye,nt)||(Ye=u(Ye))&&Ge(Ye,nt)}(De,ce);(!$e||"value"in $e&&$e.value===void 0)&&(De===A.Transaction.prototype||De instanceof A.Transaction?v(De,ce,{get:function(){return this.table(ce)},set:function(Ge){g(this,ce,{value:Ge,writable:!0,configurable:!0,enumerable:!0})}}):De[ce]=new A.Table(ce,we))})})}function Iu(A,D){D.forEach(function(Z){for(var ne in Z)Z[ne]instanceof A.Table&&delete Z[ne]})}function Cp(A,D){return A._cfg.version-D._cfg.version}function Ou(A,D,Z,ne){var ce=A._dbSchema;Z.objectStoreNames.contains("$meta")&&!ce.$meta&&(ce.$meta=lc("$meta",Xg("")[0],[]),A._storeNames.push("$meta"));var we=A._createTransaction("readwrite",A._storeNames,ce);we.create(Z),we._completion.catch(ne);var De=we._reject.bind(we),$e=ke.transless||ke;Xt(function(){return ke.trans=we,ke.transless=$e,D!==0?(gs(A,Z),Ye=D,((Ge=we).storeNames.includes("$meta")?Ge.table("$meta").get("version").then(function(nt){return nt??Ye}):M.resolve(Ye)).then(function(nt){return it=nt,Ve=we,et=Z,ot=[],nt=(qe=A)._versions,Xe=qe._dbSchema=dc(0,qe.idbdb,et),(nt=nt.filter(function(ht){return ht._cfg.version>=it})).length!==0?(nt.forEach(function(ht){ot.push(function(){var bt=Xe,wt=ht._cfg.dbschema;of(qe,bt,et),of(qe,wt,et),Xe=qe._dbSchema=wt;var St=rf(bt,wt);St.add.forEach(function(Zt){kp(et,Zt[0],Zt[1].primKey,Zt[1].indexes)}),St.change.forEach(function(Zt){if(Zt.recreate)throw new Ce.Upgrade("Not yet support for changing primary key");var Lt=et.objectStore(Zt.name);Zt.add.forEach(function(Qt){return af(Lt,Qt)}),Zt.change.forEach(function(Qt){Lt.deleteIndex(Qt.name),af(Lt,Qt)}),Zt.del.forEach(function(Qt){return Lt.deleteIndex(Qt)})});var zt=ht._cfg.contentUpgrade;if(zt&&ht._cfg.version>it){gs(qe,et),Ve._memoizedTables={};var Kt=O(wt);St.del.forEach(function(Zt){Kt[Zt]=bt[Zt]}),Iu(qe,[qe.Transaction.prototype]),tf(qe,[qe.Transaction.prototype],o(Kt),Kt),Ve.schema=Kt;var Ft,Ht=ee(zt);return Ht&&Tn(),St=M.follow(function(){var Zt;(Ft=zt(Ve))&&Ht&&(Zt=zn.bind(null,null),Ft.then(Zt,Zt))}),Ft&&typeof Ft.then=="function"?M.resolve(Ft):St.then(function(){return Ft})}}),ot.push(function(bt){var wt,St,zt=ht._cfg.dbschema;wt=zt,St=bt,[].slice.call(St.db.objectStoreNames).forEach(function(Kt){return wt[Kt]==null&&St.db.deleteObjectStore(Kt)}),Iu(qe,[qe.Transaction.prototype]),tf(qe,[qe.Transaction.prototype],qe._storeNames,qe._dbSchema),Ve.schema=qe._dbSchema}),ot.push(function(bt){qe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(qe.idbdb.version/10)===ht._cfg.version?(qe.idbdb.deleteObjectStore("$meta"),delete qe._dbSchema.$meta,qe._storeNames=qe._storeNames.filter(function(wt){return wt!=="$meta"})):bt.objectStore("$meta").put(ht._cfg.version,"version"))})}),function ht(){return ot.length?M.resolve(ot.shift()(Ve.idbtrans)).then(ht):M.resolve()}().then(function(){Yg(Xe,et)})):M.resolve();var qe,it,Ve,et,ot,Xe}).catch(De)):(o(ce).forEach(function(nt){kp(Z,nt,ce[nt].primKey,ce[nt].indexes)}),gs(A,Z),void M.follow(function(){return A.on.populate.fire(we)}).catch(De));var Ge,Ye})}function nf(A,D){Yg(A._dbSchema,D),D.db.version%10!=0||D.objectStoreNames.contains("$meta")||D.db.createObjectStore("$meta").add(Math.ceil(D.db.version/10-1),"version");var Z=dc(0,A.idbdb,D);of(A,A._dbSchema,D);for(var ne=0,ce=rf(Z,A._dbSchema).change;ne<ce.length;ne++){var we=function(De){if(De.change.length||De.recreate)return console.warn("Unable to patch indexes of table ".concat(De.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=D.objectStore(De.name);De.add.forEach(function(Ge){Me&&console.debug("Dexie upgrade patch: Creating missing index ".concat(De.name,".").concat(Ge.src)),af($e,Ge)})}(ce[ne]);if(typeof we=="object")return we.value}}function rf(A,D){var Z,ne={del:[],add:[],change:[]};for(Z in A)D[Z]||ne.del.push(Z);for(Z in D){var ce=A[Z],we=D[Z];if(ce){var De={name:Z,def:we,recreate:!1,del:[],add:[],change:[]};if(""+(ce.primKey.keyPath||"")!=""+(we.primKey.keyPath||"")||ce.primKey.auto!==we.primKey.auto)De.recreate=!0,ne.change.push(De);else{var $e=ce.idxByName,Ge=we.idxByName,Ye=void 0;for(Ye in $e)Ge[Ye]||De.del.push(Ye);for(Ye in Ge){var nt=$e[Ye],qe=Ge[Ye];nt?nt.src!==qe.src&&De.change.push(qe):De.add.push(qe)}(0<De.del.length||0<De.add.length||0<De.change.length)&&ne.change.push(De)}}else ne.add.push([Z,we])}return ne}function kp(A,D,Z,ne){var ce=A.db.createObjectStore(D,Z.keyPath?{keyPath:Z.keyPath,autoIncrement:Z.auto}:{autoIncrement:Z.auto});return ne.forEach(function(we){return af(ce,we)}),ce}function Yg(A,D){o(A).forEach(function(Z){D.db.objectStoreNames.contains(Z)||(Me&&console.debug("Dexie: Creating missing table",Z),kp(D,Z,A[Z].primKey,A[Z].indexes))})}function af(A,D){A.createIndex(D.name,D.keyPath,{unique:D.unique,multiEntry:D.multi})}function dc(A,D,Z){var ne={};return S(D.objectStoreNames,0).forEach(function(ce){for(var we=Z.objectStore(ce),De=oo(Qd(Ye=we.keyPath),Ye||"",!0,!1,!!we.autoIncrement,Ye&&typeof Ye!="string",!0),$e=[],Ge=0;Ge<we.indexNames.length;++Ge){var nt=we.index(we.indexNames[Ge]),Ye=nt.keyPath,nt=oo(nt.name,Ye,!!nt.unique,!!nt.multiEntry,!1,Ye&&typeof Ye!="string",!1);$e.push(nt)}ne[ce]=lc(ce,De,$e)}),ne}function of(A,D,Z){for(var ne=Z.db.objectStoreNames,ce=0;ce<ne.length;++ce){var we=ne[ce],De=Z.objectStore(we);A._hasGetAll="getAll"in De;for(var $e=0;$e<De.indexNames.length;++$e){var Ge=De.indexNames[$e],Ye=De.index(Ge).keyPath,nt=typeof Ye=="string"?Ye:"["+S(Ye).join("+")+"]";!D[we]||(Ye=D[we].idxByName[nt])&&(Ye.name=Ge,delete D[we].idxByName[nt],D[we].idxByName[Ge]=Ye)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function Xg(A){return A.split(",").map(function(D,Z){var ne=(D=D.trim()).replace(/([&*]|\+\+)/g,""),ce=/^\[/.test(ne)?ne.match(/^\[(.*)\]$/)[1].split("+"):ne;return oo(ne,ce||null,/\&/.test(D),/\*/.test(D),/\+\+/.test(D),s(ce),Z===0)})}var X1=(sf.prototype._parseStoresSpec=function(A,D){o(A).forEach(function(Z){if(A[Z]!==null){var ne=Xg(A[Z]),ce=ne.shift();if(ce.unique=!0,ce.multi)throw new Ce.Schema("Primary key cannot be multi-valued");ne.forEach(function(we){if(we.auto)throw new Ce.Schema("Only primary key can be marked as autoIncrement (++)");if(!we.keyPath)throw new Ce.Schema("Index must have a name and cannot be an empty string")}),D[Z]=lc(Z,ce,ne)}})},sf.prototype.stores=function(Z){var D=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,Z):Z;var Z=D._versions,ne={},ce={};return Z.forEach(function(we){l(ne,we._cfg.storesSource),ce=we._cfg.dbschema={},we._parseStoresSpec(ne,ce)}),D._dbSchema=ce,Iu(D,[D._allTables,D,D.Transaction.prototype]),tf(D,[D._allTables,D,D.Transaction.prototype,this._cfg.tables],o(ce),ce),D._storeNames=o(ce),this},sf.prototype.upgrade=function(A){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Le,A),this},sf);function sf(){}function Ap(A,D){var Z=A._dbNamesDB;return Z||(Z=A._dbNamesDB=new so(el,{addons:[],indexedDB:A,IDBKeyRange:D})).version(1).stores({dbnames:"name"}),Z.table("dbnames")}function lf(A){return A&&typeof A.databases=="function"}function Tp(A){return Xt(function(){return ke.letThrough=!0,A()})}function Np(A){return!("from"in A)}var Aa=function(A,D){if(!this){var Z=new Aa;return A&&"d"in A&&l(Z,A),Z}l(this,arguments.length?{d:1,from:A,to:1<arguments.length?D:A}:{d:0})};function ju(A,D,Z){var ne=Un(D,Z);if(!isNaN(ne)){if(0<ne)throw RangeError();if(Np(A))return l(A,{from:D,to:Z,d:1});var ce=A.l,ne=A.r;if(Un(Z,A.from)<0)return ce?ju(ce,D,Z):A.l={from:D,to:Z,d:1,l:null,r:null},Qg(A);if(0<Un(D,A.to))return ne?ju(ne,D,Z):A.r={from:D,to:Z,d:1,l:null,r:null},Qg(A);Un(D,A.from)<0&&(A.from=D,A.l=null,A.d=ne?ne.d+1:1),0<Un(Z,A.to)&&(A.to=Z,A.r=null,A.d=A.l?A.l.d+1:1),Z=!A.r,ce&&!A.l&&ll(A,ce),ne&&Z&&ll(A,ne)}}function ll(A,D){Np(D)||function Z(ne,Ge){var we=Ge.from,De=Ge.to,$e=Ge.l,Ge=Ge.r;ju(ne,we,De),$e&&Z(ne,$e),Ge&&Z(ne,Ge)}(A,D)}function Jg(A,D){var Z=cf(D),ne=Z.next();if(ne.done)return!1;for(var ce=ne.value,we=cf(A),De=we.next(ce.from),$e=De.value;!ne.done&&!De.done;){if(Un($e.from,ce.to)<=0&&0<=Un($e.to,ce.from))return!0;Un(ce.from,$e.from)<0?ce=(ne=Z.next($e.from)).value:$e=(De=we.next(ce.from)).value}return!1}function cf(A){var D=Np(A)?null:{s:0,n:A};return{next:function(Z){for(var ne=0<arguments.length;D;)switch(D.s){case 0:if(D.s=1,ne)for(;D.n.l&&Un(Z,D.n.from)<0;)D={up:D,n:D.n.l,s:1};else for(;D.n.l;)D={up:D,n:D.n.l,s:1};case 1:if(D.s=2,!ne||Un(Z,D.n.to)<=0)return{value:D.n,done:!1};case 2:if(D.n.r){D.s=3,D={up:D,n:D.n.r,s:0};continue}case 3:D=D.up}return{done:!0}}}}function Qg(A){var D,Z,ne=(((D=A.r)===null||D===void 0?void 0:D.d)||0)-(((Z=A.l)===null||Z===void 0?void 0:Z.d)||0),ce=1<ne?"r":ne<-1?"l":"";ce&&(D=ce=="r"?"l":"r",Z=r({},A),ne=A[ce],A.from=ne.from,A.to=ne.to,A[ce]=ne[ce],Z[ce]=ne[D],(A[D]=Z).d=Rp(Z)),A.d=Rp(A)}function Rp(Z){var D=Z.r,Z=Z.l;return(D?Z?Math.max(D.d,Z.d):D.d:Z?Z.d:0)+1}function uf(A,D){return o(D).forEach(function(Z){A[Z]?ll(A[Z],D[Z]):A[Z]=function ne(ce){var we,De,$e={};for(we in ce)h(ce,we)&&(De=ce[we],$e[we]=!De||typeof De!="object"||Y.has(De.constructor)?De:ne(De));return $e}(D[Z])}),A}function Ip(A,D){return A.all||D.all||Object.keys(A).some(function(Z){return D[Z]&&Jg(D[Z],A[Z])})}p(Aa.prototype,((hi={add:function(A){return ll(this,A),this},addKey:function(A){return ju(this,A,A),this},addKeys:function(A){var D=this;return A.forEach(function(Z){return ju(D,Z,Z)}),this},hasKey:function(A){var D=cf(this).next(A).value;return D&&Un(D.from,A)<=0&&0<=Un(D.to,A)}})[te]=function(){return cf(this)},hi));var cl={},Op={},jp=!1;function df(A){uf(Op,A),jp||(jp=!0,setTimeout(function(){jp=!1,Dp(Op,!(Op={}))},0))}function Dp(A,D){D===void 0&&(D=!1);var Z=new Set;if(A.all)for(var ne=0,ce=Object.values(cl);ne<ce.length;ne++)ey(De=ce[ne],A,Z,D);else for(var we in A){var De,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(we);$e&&(we=$e[1],$e=$e[2],(De=cl["idb://".concat(we,"/").concat($e)])&&ey(De,A,Z,D))}Z.forEach(function(Ge){return Ge()})}function ey(A,D,Z,ne){for(var ce=[],we=0,De=Object.entries(A.queries.query);we<De.length;we++){for(var $e=De[we],Ge=$e[0],Ye=[],nt=0,qe=$e[1];nt<qe.length;nt++){var it=qe[nt];Ip(D,it.obsSet)?it.subscribers.forEach(function(Xe){return Z.add(Xe)}):ne&&Ye.push(it)}ne&&ce.push([Ge,Ye])}if(ne)for(var Ve=0,et=ce;Ve<et.length;Ve++){var ot=et[Ve],Ge=ot[0],Ye=ot[1];A.queries.query[Ge]=Ye}}function J1(A){var D=A._state,Z=A._deps.indexedDB;if(D.isBeingOpened||A.idbdb)return D.dbReadyPromise.then(function(){return D.dbOpenError?Vr(D.dbOpenError):A});D.isBeingOpened=!0,D.dbOpenError=null,D.openComplete=!1;var ne=D.openCanceller,ce=Math.round(10*A.verno),we=!1;function De(){if(D.openCanceller!==ne)throw new Ce.DatabaseClosed("db.open() was cancelled")}function $e(){return new M(function(it,Ve){if(De(),!Z)throw new Ce.MissingAPI;var et=A.name,ot=D.autoSchema||!ce?Z.open(et):Z.open(et,ce);if(!ot)throw new Ce.MissingAPI;ot.onerror=Bi(Ve),ot.onblocked=Te(A._fireOnBlocked),ot.onupgradeneeded=Te(function(Xe){var ht;nt=ot.transaction,D.autoSchema&&!A._options.allowEmptyDB?(ot.onerror=il,nt.abort(),ot.result.close(),(ht=Z.deleteDatabase(et)).onsuccess=ht.onerror=Te(function(){Ve(new Ce.NoSuchDatabase("Database ".concat(et," doesnt exist")))})):(nt.onerror=Bi(Ve),Xe=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,qe=Xe<1,A.idbdb=ot.result,we&&nf(A,nt),Ou(A,Xe/10,nt,Ve))},Ve),ot.onsuccess=Te(function(){nt=null;var Xe,ht,bt,wt,St,zt=A.idbdb=ot.result,Kt=S(zt.objectStoreNames);if(0<Kt.length)try{var Ft=zt.transaction((wt=Kt).length===1?wt[0]:wt,"readonly");if(D.autoSchema)ht=zt,bt=Ft,(Xe=A).verno=ht.version/10,bt=Xe._dbSchema=dc(0,ht,bt),Xe._storeNames=S(ht.objectStoreNames,0),tf(Xe,[Xe._allTables],o(bt),bt);else if(of(A,A._dbSchema,Ft),((St=rf(dc(0,(St=A).idbdb,Ft),St._dbSchema)).add.length||St.change.some(function(Ht){return Ht.add.length||Ht.change.length}))&&!we)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),zt.close(),ce=zt.version+1,we=!0,it($e());gs(A,Ft)}catch{}Io.push(A),zt.onversionchange=Te(function(Ht){D.vcFired=!0,A.on("versionchange").fire(Ht)}),zt.onclose=Te(function(Ht){A.on("close").fire(Ht)}),qe&&(St=A._deps,Ft=et,zt=St.indexedDB,St=St.IDBKeyRange,lf(zt)||Ft===el||Ap(zt,St).put({name:Ft}).catch(Le)),it()},Ve)}).catch(function(it){switch(it==null?void 0:it.name){case"UnknownError":if(0<D.PR1398_maxLoop)return D.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ce)return ce=0,$e()}return M.reject(it)})}var Ge,Ye=D.dbReadyResolve,nt=null,qe=!1;return M.race([ne,(typeof navigator>"u"?M.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(it){function Ve(){return indexedDB.databases().finally(it)}Ge=setInterval(Ve,100),Ve()}).finally(function(){return clearInterval(Ge)}):Promise.resolve()).then($e)]).then(function(){return De(),D.onReadyBeingFired=[],M.resolve(Tp(function(){return A.on.ready.fire(A.vip)})).then(function it(){if(0<D.onReadyBeingFired.length){var Ve=D.onReadyBeingFired.reduce(xe,Le);return D.onReadyBeingFired=[],M.resolve(Tp(function(){return Ve(A.vip)})).then(it)}})}).finally(function(){D.openCanceller===ne&&(D.onReadyBeingFired=null,D.isBeingOpened=!1)}).catch(function(it){D.dbOpenError=it;try{nt&&nt.abort()}catch{}return ne===D.openCanceller&&A._close(),Vr(it)}).finally(function(){D.openComplete=!0,Ye()}).then(function(){var it;return qe&&(it={},A.tables.forEach(function(Ve){Ve.schema.indexes.forEach(function(et){et.name&&(it["idb://".concat(A.name,"/").concat(Ve.name,"/").concat(et.name)]=new Aa(-1/0,[[[]]]))}),it["idb://".concat(A.name,"/").concat(Ve.name,"/")]=it["idb://".concat(A.name,"/").concat(Ve.name,"/:dels")]=new Aa(-1/0,[[[]]])}),ka(sc).fire(it),Dp(it,!0)),A})}function Du(A){function D(we){return A.next(we)}var Z=ce(D),ne=ce(function(we){return A.throw(we)});function ce(we){return function(Ge){var $e=we(Ge),Ge=$e.value;return $e.done?Ge:Ge&&typeof Ge.then=="function"?Ge.then(Z,ne):s(Ge)?Promise.all(Ge).then(Z,ne):Z(Ge)}}return ce(D)()}function ys(A,D,Z){for(var ne=s(A)?A.slice():[A],ce=0;ce<Z;++ce)ne.push(D);return ne}var Q1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(D){var Z=A.table(D),ne=Z.schema,ce={},we=[];function De(qe,it,Ve){var et=oa(qe),ot=ce[et]=ce[et]||[],Xe=qe==null?0:typeof qe=="string"?1:qe.length,ht=0<it,ht=r(r({},Ve),{name:ht?"".concat(et,"(virtual-from:").concat(Ve.name,")"):Ve.name,lowLevelIndex:Ve,isVirtual:ht,keyTail:it,keyLength:Xe,extractKey:uc(qe),unique:!ht&&Ve.unique});return ot.push(ht),ht.isPrimaryKey||we.push(ht),1<Xe&&De(Xe===2?qe[0]:qe.slice(0,Xe-1),it+1,Ve),ot.sort(function(bt,wt){return bt.keyTail-wt.keyTail}),ht}D=De(ne.primaryKey.keyPath,0,ne.primaryKey),ce[":id"]=[D];for(var $e=0,Ge=ne.indexes;$e<Ge.length;$e++){var Ye=Ge[$e];De(Ye.keyPath,0,Ye)}function nt(qe){var it,Ve=qe.query.index;return Ve.isVirtual?r(r({},qe),{query:{index:Ve.lowLevelIndex,range:(it=qe.query.range,Ve=Ve.keyTail,{type:it.type===1?2:it.type,lower:ys(it.lower,it.lowerOpen?A.MAX_KEY:A.MIN_KEY,Ve),lowerOpen:!0,upper:ys(it.upper,it.upperOpen?A.MIN_KEY:A.MAX_KEY,Ve),upperOpen:!0})}}):qe}return r(r({},Z),{schema:r(r({},ne),{primaryKey:D,indexes:we,getIndexByKeyPath:function(qe){return(qe=ce[oa(qe)])&&qe[0]}}),count:function(qe){return Z.count(nt(qe))},query:function(qe){return Z.query(nt(qe))},openCursor:function(qe){var it=qe.query.index,Ve=it.keyTail,et=it.isVirtual,ot=it.keyLength;return et?Z.openCursor(nt(qe)).then(function(ht){return ht&&Xe(ht)}):Z.openCursor(qe);function Xe(ht){return Object.create(ht,{continue:{value:function(bt){bt!=null?ht.continue(ys(bt,qe.reverse?A.MAX_KEY:A.MIN_KEY,Ve)):qe.unique?ht.continue(ht.key.slice(0,ot).concat(qe.reverse?A.MIN_KEY:A.MAX_KEY,Ve)):ht.continue()}},continuePrimaryKey:{value:function(bt,wt){ht.continuePrimaryKey(ys(bt,A.MAX_KEY,Ve),wt)}},primaryKey:{get:function(){return ht.primaryKey}},key:{get:function(){var bt=ht.key;return ot===1?bt[0]:bt.slice(0,ot)}},value:{get:function(){return ht.value}}})}}})}})}};function ff(A,D,Z,ne){return Z=Z||{},ne=ne||"",o(A).forEach(function(ce){var we,De,$e;h(D,ce)?(we=A[ce],De=D[ce],typeof we=="object"&&typeof De=="object"&&we&&De?($e=fe(we))!==fe(De)?Z[ne+ce]=D[ce]:$e==="Object"?ff(we,De,Z,ne+ce+"."):we!==De&&(Z[ne+ce]=D[ce]):we!==De&&(Z[ne+ce]=D[ce])):Z[ne+ce]=void 0}),o(D).forEach(function(ce){h(A,ce)||(Z[ne+ce]=D[ce])}),Z}function hf(A,D){return D.type==="delete"?D.keys:D.keys||D.values.map(A.extractKey)}var ty={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(D){var Z=A.table(D),ne=Z.schema.primaryKey;return r(r({},Z),{mutate:function(ce){var we=ke.trans,De=we.table(D).hook,$e=De.deleting,Ge=De.creating,Ye=De.updating;switch(ce.type){case"add":if(Ge.fire===Le)break;return we._promise("readwrite",function(){return nt(ce)},!0);case"put":if(Ge.fire===Le&&Ye.fire===Le)break;return we._promise("readwrite",function(){return nt(ce)},!0);case"delete":if($e.fire===Le)break;return we._promise("readwrite",function(){return nt(ce)},!0);case"deleteRange":if($e.fire===Le)break;return we._promise("readwrite",function(){return function qe(it,Ve,et){return Z.query({trans:it,values:!1,query:{index:ne,range:Ve},limit:et}).then(function(ot){var Xe=ot.result;return nt({type:"delete",keys:Xe,trans:it}).then(function(ht){return 0<ht.numFailures?Promise.reject(ht.failures[0]):Xe.length<et?{failures:[],numFailures:0,lastResult:void 0}:qe(it,r(r({},Ve),{lower:Xe[Xe.length-1],lowerOpen:!0}),et)})})}(ce.trans,ce.range,1e4)},!0)}return Z.mutate(ce);function nt(qe){var it,Ve,et,ot=ke.trans,Xe=qe.keys||hf(ne,qe);if(!Xe)throw new Error("Keys missing");return(qe=qe.type==="add"||qe.type==="put"?r(r({},qe),{keys:Xe}):r({},qe)).type!=="delete"&&(qe.values=a([],qe.values)),qe.keys&&(qe.keys=a([],qe.keys)),it=Z,et=Xe,((Ve=qe).type==="add"?Promise.resolve([]):it.getMany({trans:Ve.trans,keys:et,cache:"immutable"})).then(function(ht){var bt=Xe.map(function(wt,St){var zt,Kt,Ft,Ht=ht[St],Zt={onerror:null,onsuccess:null};return qe.type==="delete"?$e.fire.call(Zt,wt,Ht,ot):qe.type==="add"||Ht===void 0?(zt=Ge.fire.call(Zt,wt,qe.values[St],ot),wt==null&&zt!=null&&(qe.keys[St]=wt=zt,ne.outbound||j(qe.values[St],ne.keyPath,wt))):(zt=ff(Ht,qe.values[St]),(Kt=Ye.fire.call(Zt,zt,wt,Ht,ot))&&(Ft=qe.values[St],Object.keys(Kt).forEach(function(Lt){h(Ft,Lt)?Ft[Lt]=Kt[Lt]:j(Ft,Lt,Kt[Lt])}))),Zt});return Z.mutate(qe).then(function(wt){for(var St=wt.failures,zt=wt.results,Kt=wt.numFailures,wt=wt.lastResult,Ft=0;Ft<Xe.length;++Ft){var Ht=(zt||Xe)[Ft],Zt=bt[Ft];Ht==null?Zt.onerror&&Zt.onerror(St[Ft]):Zt.onsuccess&&Zt.onsuccess(qe.type==="put"&&ht[Ft]?qe.values[Ft]:Ht)}return{failures:St,results:zt,numFailures:Kt,lastResult:wt}}).catch(function(wt){return bt.forEach(function(St){return St.onerror&&St.onerror(wt)}),Promise.reject(wt)})})}}})}})}};function Mp(A,D,Z){try{if(!D||D.keys.length<A.length)return null;for(var ne=[],ce=0,we=0;ce<D.keys.length&&we<A.length;++ce)Un(D.keys[ce],A[we])===0&&(ne.push(Z?K(D.values[ce]):D.values[ce]),++we);return ne.length===A.length?ne:null}catch{return null}}var ny={stack:"dbcore",level:-1,create:function(A){return{table:function(D){var Z=A.table(D);return r(r({},Z),{getMany:function(ne){if(!ne.cache)return Z.getMany(ne);var ce=Mp(ne.keys,ne.trans._cache,ne.cache==="clone");return ce?M.resolve(ce):Z.getMany(ne).then(function(we){return ne.trans._cache={keys:ne.keys,values:ne.cache==="clone"?K(we):we},we})},mutate:function(ne){return ne.type!=="add"&&(ne.trans._cache=null),Z.mutate(ne)}})}}}};function ul(A,D){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!D.schema.primaryKey.outbound}function ry(A,D){switch(A){case"query":return D.values&&!D.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var e_={stack:"dbcore",level:0,name:"Observability",create:function(A){var D=A.schema.name,Z=new Aa(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(ne,ce,we){if(ke.subscr&&ce!=="readonly")throw new Ce.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return A.transaction(ne,ce,we)},table:function(ne){var ce=A.table(ne),we=ce.schema,De=we.primaryKey,qe=we.indexes,$e=De.extractKey,Ge=De.outbound,Ye=De.autoIncrement&&qe.filter(function(Ve){return Ve.compound&&Ve.keyPath.includes(De.keyPath)}),nt=r(r({},ce),{mutate:function(Ve){function et(Lt){return Lt="idb://".concat(D,"/").concat(ne,"/").concat(Lt),wt[Lt]||(wt[Lt]=new Aa)}var ot,Xe,ht,bt=Ve.trans,wt=Ve.mutatedParts||(Ve.mutatedParts={}),St=et(""),zt=et(":dels"),Kt=Ve.type,Zt=Ve.type==="deleteRange"?[Ve.range]:Ve.type==="delete"?[Ve.keys]:Ve.values.length<50?[hf(De,Ve).filter(function(Lt){return Lt}),Ve.values]:[],Ft=Zt[0],Ht=Zt[1],Zt=Ve.trans._cache;return s(Ft)?(St.addKeys(Ft),(Zt=Kt==="delete"||Ft.length===Ht.length?Mp(Ft,Zt):null)||zt.addKeys(Ft),(Zt||Ht)&&(ot=et,Xe=Zt,ht=Ht,we.indexes.forEach(function(Lt){var Qt=ot(Lt.name||"");function pn(Nn){return Nn!=null?Lt.extractKey(Nn):null}function gn(Nn){return Lt.multiEntry&&s(Nn)?Nn.forEach(function(Ua){return Qt.addKey(Ua)}):Qt.addKey(Nn)}(Xe||ht).forEach(function(Nn,ta){var xn=Xe&&pn(Xe[ta]),ta=ht&&pn(ht[ta]);Un(xn,ta)!==0&&(xn!=null&&gn(xn),ta!=null&&gn(ta))})}))):Ft?(Ht={from:(Ht=Ft.lower)!==null&&Ht!==void 0?Ht:A.MIN_KEY,to:(Ht=Ft.upper)!==null&&Ht!==void 0?Ht:A.MAX_KEY},zt.add(Ht),St.add(Ht)):(St.add(Z),zt.add(Z),we.indexes.forEach(function(Lt){return et(Lt.name).add(Z)})),ce.mutate(Ve).then(function(Lt){return!Ft||Ve.type!=="add"&&Ve.type!=="put"||(St.addKeys(Lt.results),Ye&&Ye.forEach(function(Qt){for(var pn=Ve.values.map(function(xn){return Qt.extractKey(xn)}),gn=Qt.keyPath.findIndex(function(xn){return xn===De.keyPath}),Nn=0,Ua=Lt.results.length;Nn<Ua;++Nn)pn[Nn][gn]=Lt.results[Nn];et(Qt.name).addKeys(pn)})),bt.mutatedParts=uf(bt.mutatedParts||{},wt),Lt})}}),qe=function(et){var ot=et.query,et=ot.index,ot=ot.range;return[et,new Aa((et=ot.lower)!==null&&et!==void 0?et:A.MIN_KEY,(ot=ot.upper)!==null&&ot!==void 0?ot:A.MAX_KEY)]},it={get:function(Ve){return[De,new Aa(Ve.key)]},getMany:function(Ve){return[De,new Aa().addKeys(Ve.keys)]},count:qe,query:qe,openCursor:qe};return o(it).forEach(function(Ve){nt[Ve]=function(et){var ot=ke.subscr,Xe=!!ot,ht=ul(ke,ce)&&ry(Ve,et)?et.obsSet={}:ot;if(Xe){var bt=function(Ht){return Ht="idb://".concat(D,"/").concat(ne,"/").concat(Ht),ht[Ht]||(ht[Ht]=new Aa)},wt=bt(""),St=bt(":dels"),ot=it[Ve](et),Xe=ot[0],ot=ot[1];if((Ve==="query"&&Xe.isPrimaryKey&&!et.values?St:bt(Xe.name||"")).add(ot),!Xe.isPrimaryKey){if(Ve!=="count"){var zt=Ve==="query"&&Ge&&et.values&&ce.query(r(r({},et),{values:!1}));return ce[Ve].apply(this,arguments).then(function(Ht){if(Ve==="query"){if(Ge&&et.values)return zt.then(function(pn){return pn=pn.result,wt.addKeys(pn),Ht});var Zt=et.values?Ht.result.map($e):Ht.result;(et.values?wt:St).addKeys(Zt)}else if(Ve==="openCursor"){var Lt=Ht,Qt=et.values;return Lt&&Object.create(Lt,{key:{get:function(){return St.addKey(Lt.primaryKey),Lt.key}},primaryKey:{get:function(){var pn=Lt.primaryKey;return St.addKey(pn),pn}},value:{get:function(){return Qt&&wt.addKey(Lt.primaryKey),Lt.value}}})}return Ht})}St.add(Z)}}return ce[Ve].apply(this,arguments)}}),nt}})}};function ay(A,D,Z){if(Z.numFailures===0)return D;if(D.type==="deleteRange")return null;var ne=D.keys?D.keys.length:"values"in D&&D.values?D.values.length:1;return Z.numFailures===ne?null:(D=r({},D),s(D.keys)&&(D.keys=D.keys.filter(function(ce,we){return!(we in Z.failures)})),"values"in D&&s(D.values)&&(D.values=D.values.filter(function(ce,we){return!(we in Z.failures)})),D)}function pf(A,D){return Z=A,((ne=D).lower===void 0||(ne.lowerOpen?0<Un(Z,ne.lower):0<=Un(Z,ne.lower)))&&(A=A,(D=D).upper===void 0||(D.upperOpen?Un(A,D.upper)<0:Un(A,D.upper)<=0));var Z,ne}function Pp(A,D,it,ne,ce,we){if(!it||it.length===0)return A;var De=D.query.index,$e=De.multiEntry,Ge=D.query.range,Ye=ne.schema.primaryKey.extractKey,nt=De.extractKey,qe=(De.lowLevelIndex||De).extractKey,it=it.reduce(function(Ve,et){var ot=Ve,Xe=[];if(et.type==="add"||et.type==="put")for(var ht=new Aa,bt=et.values.length-1;0<=bt;--bt){var wt,St=et.values[bt],zt=Ye(St);ht.hasKey(zt)||(wt=nt(St),($e&&s(wt)?wt.some(function(Lt){return pf(Lt,Ge)}):pf(wt,Ge))&&(ht.addKey(zt),Xe.push(St)))}switch(et.type){case"add":var Kt=new Aa().addKeys(D.values?Ve.map(function(Qt){return Ye(Qt)}):Ve),ot=Ve.concat(D.values?Xe.filter(function(Qt){return Qt=Ye(Qt),!Kt.hasKey(Qt)&&(Kt.addKey(Qt),!0)}):Xe.map(function(Qt){return Ye(Qt)}).filter(function(Qt){return!Kt.hasKey(Qt)&&(Kt.addKey(Qt),!0)}));break;case"put":var Ft=new Aa().addKeys(et.values.map(function(Qt){return Ye(Qt)}));ot=Ve.filter(function(Qt){return!Ft.hasKey(D.values?Ye(Qt):Qt)}).concat(D.values?Xe:Xe.map(function(Qt){return Ye(Qt)}));break;case"delete":var Ht=new Aa().addKeys(et.keys);ot=Ve.filter(function(Qt){return!Ht.hasKey(D.values?Ye(Qt):Qt)});break;case"deleteRange":var Zt=et.range;ot=Ve.filter(function(Qt){return!pf(Ye(Qt),Zt)})}return ot},A);return it===A?A:(it.sort(function(Ve,et){return Un(qe(Ve),qe(et))||Un(Ye(Ve),Ye(et))}),D.limit&&D.limit<1/0&&(it.length>D.limit?it.length=D.limit:A.length===D.limit&&it.length<D.limit&&(ce.dirty=!0)),we?Object.freeze(it):it)}function fc(A,D){return Un(A.lower,D.lower)===0&&Un(A.upper,D.upper)===0&&!!A.lowerOpen==!!D.lowerOpen&&!!A.upperOpen==!!D.upperOpen}function Mu(A,D){return function(Z,ne,ce,we){if(Z===void 0)return ne!==void 0?-1:0;if(ne===void 0)return 1;if((ne=Un(Z,ne))===0){if(ce&&we)return 0;if(ce)return 1;if(we)return-1}return ne}(A.lower,D.lower,A.lowerOpen,D.lowerOpen)<=0&&0<=function(Z,ne,ce,we){if(Z===void 0)return ne!==void 0?1:0;if(ne===void 0)return-1;if((ne=Un(Z,ne))===0){if(ce&&we)return 0;if(ce)return-1;if(we)return 1}return ne}(A.upper,D.upper,A.upperOpen,D.upperOpen)}function t_(A,D,Z,ne){A.subscribers.add(Z),ne.addEventListener("abort",function(){var ce,we;A.subscribers.delete(Z),A.subscribers.size===0&&(ce=A,we=D,setTimeout(function(){ce.subscribers.size===0&&X(we,ce)},3e3))})}var mf={stack:"dbcore",level:0,name:"Cache",create:function(A){var D=A.schema.name;return r(r({},A),{transaction:function(Z,ne,ce){var we,De,$e=A.transaction(Z,ne,ce);return ne==="readwrite"&&(De=(we=new AbortController).signal,ce=function(Ge){return function(){if(we.abort(),ne==="readwrite"){for(var Ye=new Set,nt=0,qe=Z;nt<qe.length;nt++){var it=qe[nt],Ve=cl["idb://".concat(D,"/").concat(it)];if(Ve){var et=A.table(it),ot=Ve.optimisticOps.filter(function(Qt){return Qt.trans===$e});if($e._explicit&&Ge&&$e.mutatedParts)for(var Xe=0,ht=Object.values(Ve.queries.query);Xe<ht.length;Xe++)for(var bt=0,wt=(Kt=ht[Xe]).slice();bt<wt.length;bt++)Ip((Ft=wt[bt]).obsSet,$e.mutatedParts)&&(X(Kt,Ft),Ft.subscribers.forEach(function(Qt){return Ye.add(Qt)}));else if(0<ot.length){Ve.optimisticOps=Ve.optimisticOps.filter(function(Qt){return Qt.trans!==$e});for(var St=0,zt=Object.values(Ve.queries.query);St<zt.length;St++)for(var Kt,Ft,Ht,Zt=0,Lt=(Kt=zt[St]).slice();Zt<Lt.length;Zt++)(Ft=Lt[Zt]).res!=null&&$e.mutatedParts&&(Ge&&!Ft.dirty?(Ht=Object.isFrozen(Ft.res),Ht=Pp(Ft.res,Ft.req,ot,et,Ft,Ht),Ft.dirty?(X(Kt,Ft),Ft.subscribers.forEach(function(Qt){return Ye.add(Qt)})):Ht!==Ft.res&&(Ft.res=Ht,Ft.promise=M.resolve({result:Ht}))):(Ft.dirty&&X(Kt,Ft),Ft.subscribers.forEach(function(Qt){return Ye.add(Qt)})))}}}Ye.forEach(function(Qt){return Qt()})}}},$e.addEventListener("abort",ce(!1),{signal:De}),$e.addEventListener("error",ce(!1),{signal:De}),$e.addEventListener("complete",ce(!0),{signal:De})),$e},table:function(Z){var ne=A.table(Z),ce=ne.schema.primaryKey;return r(r({},ne),{mutate:function(we){var De=ke.trans;if(ce.outbound||De.db._options.cache==="disabled"||De.explicit||De.idbtrans.mode!=="readwrite")return ne.mutate(we);var $e=cl["idb://".concat(D,"/").concat(Z)];return $e?(De=ne.mutate(we),we.type!=="add"&&we.type!=="put"||!(50<=we.values.length||hf(ce,we).some(function(Ge){return Ge==null}))?($e.optimisticOps.push(we),we.mutatedParts&&df(we.mutatedParts),De.then(function(Ge){0<Ge.numFailures&&(X($e.optimisticOps,we),(Ge=ay(0,we,Ge))&&$e.optimisticOps.push(Ge),we.mutatedParts&&df(we.mutatedParts))}),De.catch(function(){X($e.optimisticOps,we),we.mutatedParts&&df(we.mutatedParts)})):De.then(function(Ge){var Ye=ay(0,r(r({},we),{values:we.values.map(function(nt,qe){var it;return Ge.failures[qe]?nt:(nt=(it=ce.keyPath)!==null&&it!==void 0&&it.includes(".")?K(nt):r({},nt),j(nt,ce.keyPath,Ge.results[qe]),nt)})}),Ge);$e.optimisticOps.push(Ye),queueMicrotask(function(){return we.mutatedParts&&df(we.mutatedParts)})}),De):ne.mutate(we)},query:function(we){if(!ul(ke,ne)||!ry("query",we))return ne.query(we);var De=((Ye=ke.trans)===null||Ye===void 0?void 0:Ye.db._options.cache)==="immutable",qe=ke,$e=qe.requery,Ge=qe.signal,Ye=function(et,ot,Xe,ht){var bt=cl["idb://".concat(et,"/").concat(ot)];if(!bt)return[];if(!(ot=bt.queries[Xe]))return[null,!1,bt,null];var wt=ot[(ht.query?ht.query.index.name:null)||""];if(!wt)return[null,!1,bt,null];switch(Xe){case"query":var St=wt.find(function(zt){return zt.req.limit===ht.limit&&zt.req.values===ht.values&&fc(zt.req.query.range,ht.query.range)});return St?[St,!0,bt,wt]:[wt.find(function(zt){return("limit"in zt.req?zt.req.limit:1/0)>=ht.limit&&(!ht.values||zt.req.values)&&Mu(zt.req.query.range,ht.query.range)}),!1,bt,wt];case"count":return St=wt.find(function(zt){return fc(zt.req.query.range,ht.query.range)}),[St,!!St,bt,wt]}}(D,Z,"query",we),nt=Ye[0],qe=Ye[1],it=Ye[2],Ve=Ye[3];return nt&&qe?nt.obsSet=we.obsSet:(qe=ne.query(we).then(function(et){var ot=et.result;if(nt&&(nt.res=ot),De){for(var Xe=0,ht=ot.length;Xe<ht;++Xe)Object.freeze(ot[Xe]);Object.freeze(ot)}else et.result=K(ot);return et}).catch(function(et){return Ve&&nt&&X(Ve,nt),Promise.reject(et)}),nt={obsSet:we.obsSet,promise:qe,subscribers:new Set,type:"query",req:we,dirty:!1},Ve?Ve.push(nt):(Ve=[nt],(it=it||(cl["idb://".concat(D,"/").concat(Z)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[we.query.index.name||""]=Ve)),t_(nt,Ve,$e,Ge),nt.promise.then(function(et){return{result:Pp(et.result,we,it==null?void 0:it.optimisticOps,ne,nt,De)}})}})}})}};function Pu(A,D){return new Proxy(A,{get:function(Z,ne,ce){return ne==="db"?D:Reflect.get(Z,ne,ce)}})}var so=(Lr.prototype.version=function(A){if(isNaN(A)||A<.1)throw new Ce.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new Ce.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var D=this._versions,Z=D.filter(function(ne){return ne._cfg.version===A})[0];return Z||(Z=new this.Version(A),D.push(Z),D.sort(Cp),Z.stores({}),this._state.autoSchema=!1,Z)},Lr.prototype._whenReady=function(A){var D=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?A():new M(function(Z,ne){if(D._state.openComplete)return ne(new Ce.DatabaseClosed(D._state.dbOpenError));if(!D._state.isBeingOpened){if(!D._state.autoOpen)return void ne(new Ce.DatabaseClosed);D.open().catch(Le)}D._state.dbReadyPromise.then(Z,ne)}).then(A)},Lr.prototype.use=function(A){var D=A.stack,Z=A.create,ne=A.level,ce=A.name;return ce&&this.unuse({stack:D,name:ce}),A=this._middlewares[D]||(this._middlewares[D]=[]),A.push({stack:D,create:Z,level:ne??10,name:ce}),A.sort(function(we,De){return we.level-De.level}),this},Lr.prototype.unuse=function(A){var D=A.stack,Z=A.name,ne=A.create;return D&&this._middlewares[D]&&(this._middlewares[D]=this._middlewares[D].filter(function(ce){return ne?ce.create!==ne:!!Z&&ce.name!==Z})),this},Lr.prototype.open=function(){var A=this;return us(ve,function(){return J1(A)})},Lr.prototype._close=function(){var A=this._state,D=Io.indexOf(this);if(0<=D&&Io.splice(D,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new M(function(Z){A.dbReadyResolve=Z}),A.openCanceller=new M(function(Z,ne){A.cancelOpen=ne}))},Lr.prototype.close=function(Z){var D=(Z===void 0?{disableAutoOpen:!0}:Z).disableAutoOpen,Z=this._state;D?(Z.isBeingOpened&&Z.cancelOpen(new Ce.DatabaseClosed),this._close(),Z.autoOpen=!1,Z.dbOpenError=new Ce.DatabaseClosed):(this._close(),Z.autoOpen=this._options.autoOpen||Z.isBeingOpened,Z.openComplete=!1,Z.dbOpenError=null)},Lr.prototype.delete=function(A){var D=this;A===void 0&&(A={disableAutoOpen:!0});var Z=0<arguments.length&&typeof arguments[0]!="object",ne=this._state;return new M(function(ce,we){function De(){D.close(A);var $e=D._deps.indexedDB.deleteDatabase(D.name);$e.onsuccess=Te(function(){var Ge,Ye,nt;Ge=D._deps,Ye=D.name,nt=Ge.indexedDB,Ge=Ge.IDBKeyRange,lf(nt)||Ye===el||Ap(nt,Ge).delete(Ye).catch(Le),ce()}),$e.onerror=Bi(we),$e.onblocked=D._fireOnBlocked}if(Z)throw new Ce.InvalidArgument("Invalid closeOptions argument to db.delete()");ne.isBeingOpened?ne.dbReadyPromise.then(De):De()})},Lr.prototype.backendDB=function(){return this.idbdb},Lr.prototype.isOpen=function(){return this.idbdb!==null},Lr.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},Lr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Lr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Lr.prototype,"tables",{get:function(){var A=this;return o(this._allTables).map(function(D){return A._allTables[D]})},enumerable:!1,configurable:!0}),Lr.prototype.transaction=function(){var A=(function(D,Z,ne){var ce=arguments.length;if(ce<2)throw new Ce.InvalidArgument("Too few arguments");for(var we=new Array(ce-1);--ce;)we[ce-1]=arguments[ce];return ne=we.pop(),[D,z(we),ne]}).apply(this,arguments);return this._transaction.apply(this,A)},Lr.prototype._transaction=function(A,D,Z){var ne=this,ce=ke.trans;ce&&ce.db===this&&A.indexOf("!")===-1||(ce=null);var we,De,$e=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(De=D.map(function(Ye){if(Ye=Ye instanceof ne.Table?Ye.name:Ye,typeof Ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ye}),A=="r"||A===$i)we=$i;else{if(A!="rw"&&A!=Nu)throw new Ce.InvalidArgument("Invalid transaction mode: "+A);we=Nu}if(ce){if(ce.mode===$i&&we===Nu){if(!$e)throw new Ce.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ce=null}ce&&De.forEach(function(Ye){if(ce&&ce.storeNames.indexOf(Ye)===-1){if(!$e)throw new Ce.SubTransaction("Table "+Ye+" not included in parent transaction.");ce=null}}),$e&&ce&&!ce.active&&(ce=null)}}catch(Ye){return ce?ce._promise(null,function(nt,qe){qe(Ye)}):Vr(Ye)}var Ge=(function Ye(nt,qe,it,Ve,et){return M.resolve().then(function(){var ot=ke.transless||ke,Xe=nt._createTransaction(qe,it,nt._dbSchema,Ve);if(Xe.explicit=!0,ot={trans:Xe,transless:ot},Ve)Xe.idbtrans=Ve.idbtrans;else try{Xe.create(),Xe.idbtrans._explicit=!0,nt._state.PR1398_maxLoop=3}catch(wt){return wt.name===Ne.InvalidState&&nt.isOpen()&&0<--nt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),nt.close({disableAutoOpen:!1}),nt.open().then(function(){return Ye(nt,qe,it,null,et)})):Vr(wt)}var ht,bt=ee(et);return bt&&Tn(),ot=M.follow(function(){var wt;(ht=et.call(Xe,Xe))&&(bt?(wt=zn.bind(null,null),ht.then(wt,wt)):typeof ht.next=="function"&&typeof ht.throw=="function"&&(ht=Du(ht)))},ot),(ht&&typeof ht.then=="function"?M.resolve(ht).then(function(wt){return Xe.active?wt:Vr(new Ce.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ot.then(function(){return ht})).then(function(wt){return Ve&&Xe._resolve(),Xe._completion.then(function(){return wt})}).catch(function(wt){return Xe._reject(wt),Vr(wt)})})}).bind(null,this,we,De,ce,Z);return ce?ce._promise(we,Ge,"lock"):ke.trans?us(ke.transless,function(){return ne._whenReady(Ge)}):this._whenReady(Ge)},Lr.prototype.table=function(A){if(!h(this._allTables,A))throw new Ce.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},Lr);function Lr(A,D){var Z=this;this._middlewares={},this.verno=0;var ne=Lr.dependencies;this._options=D=r({addons:Lr.addons,autoOpen:!0,indexedDB:ne.indexedDB,IDBKeyRange:ne.IDBKeyRange,cache:"cloned"},D),this._deps={indexedDB:D.indexedDB,IDBKeyRange:D.IDBKeyRange},ne=D.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ce,we,De,$e,Ge,Ye={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:D.autoOpen};Ye.dbReadyPromise=new M(function(qe){Ye.dbReadyResolve=qe}),Ye.openCanceller=new M(function(qe,it){Ye.cancelOpen=it}),this._state=Ye,this.name=A,this.on=ms(this,"populate","blocked","versionchange","close",{ready:[xe,Le]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(qe){return function(it,Ve){Lr.vip(function(){var et,ot=Z._state;ot.openComplete?(ot.dbOpenError||M.resolve().then(it),Ve&&qe(it)):ot.onReadyBeingFired?(ot.onReadyBeingFired.push(it),Ve&&qe(it)):(qe(it),et=Z,Ve||qe(function Xe(){et.on.ready.unsubscribe(it),et.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(ce=this,tc(ic.prototype,function(ht,Xe){this.db=ce;var Ve=tl,et=null;if(Xe)try{Ve=Xe()}catch(bt){et=bt}var ot=ht._ctx,Xe=ot.table,ht=Xe.hook.reading.fire;this._ctx={table:Xe,index:ot.index,isPrimKey:!ot.index||Xe.schema.primKey.keyPath&&ot.index===Xe.schema.primKey.name,range:Ve,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:et,or:ot.or,valueMapper:ht!==Ie?ht:null}})),this.Table=(we=this,tc(vp.prototype,function(qe,it,Ve){this.db=we,this._tx=Ve,this.name=qe,this.schema=it,this.hook=we._allTables[qe]?we._allTables[qe].hook:ms(null,{creating:[Ae,Le],reading:[V,Ie],updating:[ie,Le],deleting:[se,Le]})})),this.Transaction=(De=this,tc(Ep.prototype,function(qe,it,Ve,et,ot){var Xe=this;this.db=De,this.mode=qe,this.storeNames=it,this.schema=Ve,this.chromeTransactionDurability=et,this.idbtrans=null,this.on=ms(this,"complete","error","abort"),this.parent=ot||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(ht,bt){Xe._resolve=ht,Xe._reject=bt}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(ht){var bt=Xe.active;return Xe.active=!1,Xe.on.error.fire(ht),Xe.parent?Xe.parent._reject(ht):bt&&Xe.idbtrans&&Xe.idbtrans.abort(),Vr(ht)})})),this.Version=($e=this,tc(X1.prototype,function(qe){this.db=$e,this._cfg={version:qe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Ge=this,tc(al.prototype,function(qe,it,Ve){if(this.db=Ge,this._ctx={table:qe,index:it===":id"?null:it,or:Ve},this._cmp=this._ascending=Un,this._descending=function(et,ot){return Un(ot,et)},this._max=function(et,ot){return 0<Un(et,ot)?et:ot},this._min=function(et,ot){return Un(et,ot)<0?et:ot},this._IDBKeyRange=Ge._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ce.MissingAPI})),this.on("versionchange",function(qe){0<qe.newVersion?console.warn("Another connection wants to upgrade database '".concat(Z.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Z.name,"'. Closing db now to resume the delete request.")),Z.close({disableAutoOpen:!1})}),this.on("blocked",function(qe){!qe.newVersion||qe.newVersion<qe.oldVersion?console.warn("Dexie.delete('".concat(Z.name,"') was blocked")):console.warn("Upgrade '".concat(Z.name,"' blocked by other connection holding version ").concat(qe.oldVersion/10))}),this._maxKey=cc(D.IDBKeyRange),this._createTransaction=function(qe,it,Ve,et){return new Z.Transaction(qe,it,Ve,Z._options.chromeTransactionDurability,et)},this._fireOnBlocked=function(qe){Z.on("blocked").fire(qe),Io.filter(function(it){return it.name===Z.name&&it!==Z&&!it._state.vcFired}).map(function(it){return it.on("versionchange").fire(qe)})},this.use(ny),this.use(mf),this.use(e_),this.use(Q1),this.use(ty);var nt=new Proxy(this,{get:function(qe,it,Ve){if(it==="_vip")return!0;if(it==="table")return function(ot){return Pu(Z.table(ot),nt)};var et=Reflect.get(qe,it,Ve);return et instanceof vp?Pu(et,nt):it==="tables"?et.map(function(ot){return Pu(ot,nt)}):it==="_createTransaction"?function(){return Pu(et.apply(this,arguments),nt)}:et}});this.vip=nt,ne.forEach(function(qe){return qe(Z)})}var hc,hi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",iy=(gf.prototype.subscribe=function(A,D,Z){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:D,complete:Z})},gf.prototype[hi]=function(){return this},gf);function gf(A){this._subscribe=A}try{hc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{hc={indexedDB:null,IDBKeyRange:null}}function oy(A){var D,Z=!1,ne=new iy(function(ce){var we=ee(A),De,$e=!1,Ge={},Ye={},nt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,De&&De.abort(),qe&&ka.storagemutated.unsubscribe(Ve))}};ce.start&&ce.start(nt);var qe=!1,it=function(){return fs(et)},Ve=function(ot){uf(Ge,ot),Ip(Ye,Ge)&&it()},et=function(){var ot,Xe,ht;!$e&&hc.indexedDB&&(Ge={},ot={},De&&De.abort(),De=new AbortController,ht=function(bt){var wt=H();try{we&&Tn();var St=Xt(A,bt);return St=we?St.finally(zn):St}finally{wt&&B()}}(Xe={subscr:ot,signal:De.signal,requery:it,querier:A,trans:null}),Promise.resolve(ht).then(function(bt){Z=!0,D=bt,$e||Xe.signal.aborted||(Ge={},function(wt){for(var St in wt)if(h(wt,St))return;return 1}(Ye=ot)||qe||(ka(sc,Ve),qe=!0),fs(function(){return!$e&&ce.next&&ce.next(bt)}))},function(bt){Z=!1,["DatabaseClosedError","AbortError"].includes(bt==null?void 0:bt.name)||$e||fs(function(){$e||ce.error&&ce.error(bt)})}))};return setTimeout(it,0),nt});return ne.hasValue=function(){return Z},ne.getValue=function(){return D},ne}var dl=so;function Fp(A){var D=bs;try{bs=!0,ka.storagemutated.fire(A),Dp(A,!0)}finally{bs=D}}p(dl,r(r({},Qe),{delete:function(A){return new dl(A,{addons:[]}).delete()},exists:function(A){return new dl(A,{addons:[]}).open().then(function(D){return D.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return D=dl.dependencies,Z=D.indexedDB,D=D.IDBKeyRange,(lf(Z)?Promise.resolve(Z.databases()).then(function(ne){return ne.map(function(ce){return ce.name}).filter(function(ce){return ce!==el})}):Ap(Z,D).toCollection().primaryKeys()).then(A)}catch{return Vr(new Ce.MissingAPI)}var D,Z},defineClass:function(){return function(A){l(this,A)}},ignoreTransaction:function(A){return ke.trans?us(ke.transless,A):A()},vip:Tp,async:function(A){return function(){try{var D=Du(A.apply(this,arguments));return D&&typeof D.then=="function"?D:M.resolve(D)}catch(Z){return Vr(Z)}}},spawn:function(A,D,Z){try{var ne=Du(A.apply(Z,D||[]));return ne&&typeof ne.then=="function"?ne:M.resolve(ne)}catch(ce){return Vr(ce)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(A,D){return D=M.resolve(typeof A=="function"?dl.ignoreTransaction(A):A).timeout(D||6e4),ke.trans?ke.trans.waitFor(D):D},Promise:M,debug:{get:function(){return Me},set:function(A){Ee(A)}},derive:b,extend:l,props:p,override:E,Events:ms,on:ka,liveQuery:oy,extendObservabilitySet:uf,getByKeyPath:R,setByKeyPath:j,delByKeyPath:function(A,D){typeof D=="string"?j(A,D,void 0):"length"in D&&[].map.call(D,function(Z){j(A,Z,void 0)})},shallowClone:O,deepClone:K,getObjectDiff:ff,cmp:Un,asap:k,minKey:-1/0,addons:[],connections:Io,errnames:Ne,dependencies:hc,cache:cl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,D,Z){return A+D/Math.pow(10,2*Z)})})),dl.maxKey=cc(dl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ka(sc,function(A){bs||(A=new CustomEvent(ol,{detail:A}),bs=!0,dispatchEvent(A),bs=!1)}),addEventListener(ol,function(A){A=A.detail,bs||Fp(A)}));var pc,bs=!1,Xa=function(){};return typeof BroadcastChannel<"u"&&((Xa=function(){(pc=new BroadcastChannel(ol)).onmessage=function(A){return A.data&&Fp(A.data)}})(),typeof pc.unref=="function"&&pc.unref(),ka(sc,function(A){bs||pc.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!so.disableBfCache&&A.persisted){Me&&console.debug("Dexie: handling persisted pagehide"),pc!=null&&pc.close();for(var D=0,Z=Io;D<Z.length;D++)Z[D].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!so.disableBfCache&&A.persisted&&(Me&&console.debug("Dexie: handling persisted pageshow"),Xa(),Fp({all:new Aa(-1/0,[[]])}))})),M.rejectionMapper=function(A,D){return!A||A instanceof ue||A instanceof TypeError||A instanceof SyntaxError||!A.name||!Fe[A.name]?A:(D=new Fe[A.name](D||A.message,A),"stack"in A&&v(D,"stack",{get:function(){return this.inner.stack}}),D)},Ee(Me),r(so,Object.freeze({__proto__:null,Dexie:so,liveQuery:oy,Entity:Yd,cmp:Un,PropModification:ac,replacePrefix:function(A,D){return new ac({replacePrefix:[A,D]})},add:function(A){return new ac({add:A})},remove:function(A){return new ac({remove:A})},default:so,RangeSet:Aa,mergeRanges:ll,rangesOverlap:Jg}),{default:so}),so})}(Hb)),Hb.exports}var Fq=Pq();const h2=li(Fq),x3=Symbol.for("Dexie"),rv=globalThis[x3]||(globalThis[x3]=h2);if(h2.semVer!==rv.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${h2.semVer} and ${rv.semVer}`);const{liveQuery:X1e,mergeRanges:J1e,rangesOverlap:Q1e,RangeSet:e_e,cmp:t_e,Entity:n_e,PropModification:r_e,replacePrefix:a_e,add:i_e,remove:o_e}=rv;class Lq extends rv{constructor(){super("LiteChatDatabase_Rewrite_v1");mi(this,"conversations");mi(this,"interactions");mi(this,"mods");mi(this,"appState");mi(this,"providerConfigs");mi(this,"apiKeys");mi(this,"syncRepos");mi(this,"projects");this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const dn=new Lq,Xu=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class Wt{static async loadConversations(){try{return(await dn.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Xu(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await dn.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await dn.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await dn.interactions.where({conversationId:t}).sortBy("index")).map(r=>Xu(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await dn.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await dn.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await dn.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await dn.mods.orderBy("loadOrder").toArray()).map(n=>Xu(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await dn.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await dn.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await dn.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await dn.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=dn.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Xu(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await dn.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await dn.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=dn.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Xu(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await dn.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await dn.transaction("rw",[dn.apiKeys,dn.providerConfigs],async()=>{const n=await dn.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>dn.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await dn.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await dn.syncRepos.toArray()).map(n=>Xu(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await dn.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await dn.transaction("rw",[dn.syncRepos,dn.conversations],async()=>{const n=await dn.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>dn.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await dn.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await dn.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Xu(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,metadata:t.metadata?{...t.metadata}:{}};return await dn.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await dn.projects.where("parentId").equals(r).toArray();for(const o of a)await n(o.id);const i=await dn.conversations.where("projectId").equals(r).toArray();if(i.length>0){const o=i.map(s=>dn.conversations.update(s.id,{projectId:null}));await Promise.all(o),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await dn.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await dn.transaction("rw",[dn.projects,dn.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async clearAllData(){try{await dn.transaction("rw",[dn.conversations,dn.interactions,dn.mods,dn.appState,dn.providerConfigs,dn.apiKeys,dn.syncRepos,dn.projects],async()=>{await dn.interactions.clear(),await dn.conversations.clear(),await dn.projects.clear(),await dn.mods.clear(),await dn.appState.clear(),await dn.providerConfigs.clear(),await dn.apiKeys.clear(),await dn.syncRepos.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}function $q(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ct=$q();var xt=(e=>(e.APP_LOADED="app:loaded",e.MOD_LOADED="mod:loaded",e.MOD_ERROR="mod:error",e.CONVERSATION_SELECTED="conversation:selected",e.CONVERSATION_ADDED="conversation:added",e.CONVERSATION_UPDATED="conversation:updated",e.CONVERSATION_DELETED="conversation:deleted",e.PROJECT_SELECTED="project:selected",e.PROJECT_ADDED="project:added",e.PROJECT_UPDATED="project:updated",e.PROJECT_DELETED="project:deleted",e.INTERACTION_STARTED="interaction:started",e.INTERACTION_STREAM_CHUNK="interaction:stream_chunk",e.INTERACTION_COMPLETED="interaction:completed",e.PROMPT_SUBMITTED="prompt:submitted",e.PROMPT_INPUT_CHANGE="prompt:input_change",e.SETTINGS_CHANGED="settings:changed",e.PROVIDER_CONFIG_CHANGED="provider:config_changed",e.API_KEY_CHANGED="provider:api_key_changed",e.MODEL_SELECTION_CHANGED="provider:model_selection_changed",e.VFS_FILE_WRITTEN="vfs:file_written",e.VFS_FILE_READ="vfs:file_read",e.VFS_FILE_DELETED="vfs:file_deleted",e.VFS_CONTEXT_CHANGED="vfs:context_changed",e.SYNC_REPO_CHANGED="sync:repo_changed",e.CONVERSATION_SYNC_STATUS_CHANGED="sync:conversation_status_changed",e.REPO_INIT_STATUS_CHANGED="sync:repo_init_status_changed",e.ATTACHED_FILES_CHANGED="input:attached_files_changed",e.PROMPT_PARAMS_CHANGED="input:prompt_params_changed",e.INTERACTION_STATUS_CHANGED="interaction:status_changed",e.CONTEXT_CHANGED="ui:context_changed",e))(xt||{}),av=(e=>(e.PROMPT_TURN_FINALIZE="middleware:prompt:turnFinalize",e.INTERACTION_BEFORE_START="middleware:interaction:beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware:interaction:processChunk",e))(av||{});const or=rs(as((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n}),r!=="loading"&&Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:"loading"});try{const a=await Wt.loadInteractionsForConversation(n);a.sort((i,o)=>i.index-o.index),e({interactions:a,status:"idle"}),Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:"idle"})}catch(a){console.error("InteractionStore: Error loading interactions",a),e({error:"Failed load interactions",status:"error"}),Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:"error"})}},_addInteractionToState:n=>{e(r=>{if(!r.interactions.some(a=>a.id===n.id))r.interactions.push(n),r.interactions.sort((a,i)=>a.index-i.index);else{console.warn(`InteractionStore: Interaction ${n.id} already exists. Updating instead.`);const a=r.interactions.findIndex(i=>i.id===n.id);a!==-1&&(r.interactions[a]={...r.interactions[a],...n})}})},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(o=>o.id===n);if(i!==-1){const o=a.interactions[i];let s={...o.metadata||{}};r.metadata&&(s={...s,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(s.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(s.toolResults=[...r.metadata.toolResults]));const l={...o,...r,metadata:s};"response"in r&&(l.response=r.response),a.interactions[i]=l}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r)})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(a=>a.id!==n)})},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions.");const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:"idle"})},setError:n=>{const r=t().status;let a="idle";e(i=>{i.error=n,n?(a="error",i.status="error"):i.status==="error"?(a=i.streamingInteractionIds.length>0?"streaming":"idle",i.status=a):a=i.status}),r!==a&&Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:a})},setStatus:n=>{t().status!==n&&(e({status:n}),Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:n}))},_addStreamingId:n=>{let r=!1;e(a=>{a.streamingInteractionIds.includes(n)||(a.streamingInteractionIds.push(n),a.activeStreamBuffers[n]="",a.streamingInteractionIds.length===1&&(a.status="streaming",r=!0),a.error=null)}),r&&Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:"streaming"})},_removeStreamingId:n=>{let r=!1;e(a=>{const i=a.streamingInteractionIds.indexOf(n);i!==-1&&(a.streamingInteractionIds.splice(i,1),delete a.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),a.streamingInteractionIds.length===0&&a.status==="streaming"&&(a.status=a.error?"error":"idle",r=!0))}),r&&Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:t().status})}}))),ha=rs(as(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,isVfsModalOpen:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})},toggleVfsModal:t=>{e(n=>{n.isVfsModalOpen=t??!n.isVfsModalOpen})}}))),Bq="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Co=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=Bq[n[e]&63];return t};const Jc=rs(as((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(a=>{if(a.attachedFilesMetadata.some(o=>o.source==="direct"&&n.source==="direct"?o.name===n.name&&o.size===n.size:o.source==="vfs"&&n.source==="vfs"?o.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const o={id:Co(),...n};a.attachedFilesMetadata.push(o),r=!0}}),r&&Ct.emit(xt.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(a=>{const i=a.attachedFilesMetadata.length;a.attachedFilesMetadata=a.attachedFilesMetadata.filter(o=>o.id!==n),r=a.attachedFilesMetadata.length<i}),r&&Ct.emit(xt.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&Ct.emit(xt.ATTACHED_FILES_CHANGED,{files:[]})}}))),C6=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(C6);const $C=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml")return!0;const r="."+n.split(".").pop();return C6.has(r)};var k6="vercel.ai.error",zq=Symbol.for(k6),A6,Uq=class T6 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[A6]=!0,this.name=t,this.cause=r}static isInstance(t){return T6.hasMarker(t,k6)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};A6=zq;var An=Uq,N6="AI_APICallError",R6=`vercel.ai.error.${N6}`,Hq=Symbol.for(R6),I6,wa=class extends An{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:N6,message:t,cause:s}),this[I6]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=u}static isInstance(t){return An.hasMarker(t,R6)}};I6=Hq;var O6="AI_EmptyResponseBodyError",j6=`vercel.ai.error.${O6}`,qq=Symbol.for(j6),D6,BC=class extends An{constructor({message:t="Empty response body"}={}){super({name:O6,message:t}),this[D6]=!0}static isInstance(t){return An.hasMarker(t,j6)}};D6=qq;function Q0(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var M6="AI_InvalidArgumentError",P6=`vercel.ai.error.${M6}`,Vq=Symbol.for(P6),F6,zC=class extends An{constructor({message:t,cause:n,argument:r}){super({name:M6,message:t,cause:n}),this[F6]=!0,this.argument=r}static isInstance(t){return An.hasMarker(t,P6)}};F6=Vq;var L6="AI_InvalidPromptError",$6=`vercel.ai.error.${L6}`,Gq=Symbol.for($6),B6,Al=class extends An{constructor({prompt:t,message:n,cause:r}){super({name:L6,message:`Invalid prompt: ${n}`,cause:r}),this[B6]=!0,this.prompt=t}static isInstance(t){return An.hasMarker(t,$6)}};B6=Gq;var z6="AI_InvalidResponseDataError",U6=`vercel.ai.error.${z6}`,Wq=Symbol.for(U6),H6,ih=class extends An{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:z6,message:n}),this[H6]=!0,this.data=t}static isInstance(t){return An.hasMarker(t,U6)}};H6=Wq;var q6="AI_JSONParseError",V6=`vercel.ai.error.${q6}`,Kq=Symbol.for(V6),G6,Qc=class extends An{constructor({text:t,cause:n}){super({name:q6,message:`JSON parsing failed: Text: ${t}.
Error message: ${Q0(n)}`,cause:n}),this[G6]=!0,this.text=t}static isInstance(t){return An.hasMarker(t,V6)}};G6=Kq;var W6="AI_LoadAPIKeyError",K6=`vercel.ai.error.${W6}`,Zq=Symbol.for(K6),Z6,ib=class extends An{constructor({message:t}){super({name:W6,message:t}),this[Z6]=!0}static isInstance(t){return An.hasMarker(t,K6)}};Z6=Zq;var Y6="AI_TooManyEmbeddingValuesForCallError",X6=`vercel.ai.error.${Y6}`,Yq=Symbol.for(X6),J6,UC=class extends An{constructor(t){super({name:Y6,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[J6]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return An.hasMarker(t,X6)}};J6=Yq;var Q6="AI_TypeValidationError",eD=`vercel.ai.error.${Q6}`,Xq=Symbol.for(eD),tD,Jq=class p2 extends An{constructor({value:t,cause:n}){super({name:Q6,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Q0(n)}`,cause:n}),this[tD]=!0,this.value=t}static isInstance(t){return An.hasMarker(t,eD)}static wrap({value:t,cause:n}){return p2.isInstance(n)&&n.value===t?n:new p2({value:t,cause:n})}};tD=Xq;var eu=Jq,nD="AI_UnsupportedFunctionalityError",rD=`vercel.ai.error.${nD}`,Qq=Symbol.for(rD),aD,Cr=class extends An{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:nD,message:n}),this[aD]=!0,this.functionality=t}static isInstance(t){return An.hasMarker(t,rD)}};aD=Qq;let eV=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var HC={},_w={};_w.byteLength=rV;_w.toByteArray=iV;_w.fromByteArray=lV;var Os=[],bo=[],tV=typeof Uint8Array<"u"?Uint8Array:Array,Wx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var zf=0,nV=Wx.length;zf<nV;++zf)Os[zf]=Wx[zf],bo[Wx.charCodeAt(zf)]=zf;bo[45]=62;bo[95]=63;function iD(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function rV(e){var t=iD(e),n=t[0],r=t[1];return(n+r)*3/4-r}function aV(e,t,n){return(t+n)*3/4-n}function iV(e){var t,n=iD(e),r=n[0],a=n[1],i=new tV(aV(e,r,a)),o=0,s=a>0?r-4:r,l;for(l=0;l<s;l+=4)t=bo[e.charCodeAt(l)]<<18|bo[e.charCodeAt(l+1)]<<12|bo[e.charCodeAt(l+2)]<<6|bo[e.charCodeAt(l+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=bo[e.charCodeAt(l)]<<2|bo[e.charCodeAt(l+1)]>>4,i[o++]=t&255),a===1&&(t=bo[e.charCodeAt(l)]<<10|bo[e.charCodeAt(l+1)]<<4|bo[e.charCodeAt(l+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function oV(e){return Os[e>>18&63]+Os[e>>12&63]+Os[e>>6&63]+Os[e&63]}function sV(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(oV(r));return a.join("")}function lV(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,s=n-r;o<s;o+=i)a.push(sV(e,o,o+i>s?s:o+i));return r===1?(t=e[n-1],a.push(Os[t>>2]+Os[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(Os[t>>10]+Os[t>>4&63]+Os[t<<2&63]+"=")),a.join("")}var qC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */qC.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,l=(1<<s)-1,u=l>>1,d=-7,h=n?a-1:0,p=n?-1:1,g=e[t+h];for(h+=p,i=g&(1<<-d)-1,g>>=-d,d+=s;d>0;i=i*256+e[t+h],h+=p,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=r;d>0;o=o*256+e[t+h],h+=p,d-=8);if(i===0)i=1-u;else{if(i===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(g?-1:1)*o*Math.pow(2,i-r)};qC.write=function(e,t,n,r,a,i){var o,s,l,u=i*8-a-1,d=(1<<u)-1,h=d>>1,p=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=p/l:t+=p*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=d?(s=0,o=d):o+h>=1?(s=(t*l-1)*Math.pow(2,a),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+g]=s&255,g+=v,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[n+g]=o&255,g+=v,o/=256,u-=8);e[n+g-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=_w,n=qC,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ye=new i(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,i.prototype),Object.setPrototypeOf(ye,I),ye.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(ye){if(ye>a)throw new RangeError('The value "'+ye+'" is invalid for option "size"');const I=new i(ye);return Object.setPrototypeOf(I,d.prototype),I}function d(ye,I,G){if(typeof ye=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ye)}return h(ye,I,G)}d.poolSize=8192;function h(ye,I,G){if(typeof ye=="string")return b(ye,I);if(o.isView(ye))return x(ye);if(ye==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye);if(at(ye,o)||ye&&at(ye.buffer,o)||typeof s<"u"&&(at(ye,s)||ye&&at(ye.buffer,s)))return S(ye,I,G);if(typeof ye=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const de=ye.valueOf&&ye.valueOf();if(de!=null&&de!==ye)return d.from(de,I,G);const Oe=E(ye);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ye[Symbol.toPrimitive]=="function")return d.from(ye[Symbol.toPrimitive]("string"),I,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye)}d.from=function(ye,I,G){return h(ye,I,G)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function p(ye){if(typeof ye!="number")throw new TypeError('"size" argument must be of type number');if(ye<0)throw new RangeError('The value "'+ye+'" is invalid for option "size"')}function g(ye,I,G){return p(ye),ye<=0?u(ye):I!==void 0?typeof G=="string"?u(ye).fill(I,G):u(ye).fill(I):u(ye)}d.alloc=function(ye,I,G){return g(ye,I,G)};function v(ye){return p(ye),u(ye<0?0:C(ye)|0)}d.allocUnsafe=function(ye){return v(ye)},d.allocUnsafeSlow=function(ye){return v(ye)};function b(ye,I){if((typeof I!="string"||I==="")&&(I="utf8"),!d.isEncoding(I))throw new TypeError("Unknown encoding: "+I);const G=R(ye,I)|0;let de=u(G);const Oe=de.write(ye,I);return Oe!==G&&(de=de.slice(0,Oe)),de}function _(ye){const I=ye.length<0?0:C(ye.length)|0,G=u(I);for(let de=0;de<I;de+=1)G[de]=ye[de]&255;return G}function x(ye){if(at(ye,i)){const I=new i(ye);return S(I.buffer,I.byteOffset,I.byteLength)}return _(ye)}function S(ye,I,G){if(I<0||ye.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(ye.byteLength<I+(G||0))throw new RangeError('"length" is outside of buffer bounds');let de;return I===void 0&&G===void 0?de=new i(ye):G===void 0?de=new i(ye,I):de=new i(ye,I,G),Object.setPrototypeOf(de,d.prototype),de}function E(ye){if(d.isBuffer(ye)){const I=C(ye.length)|0,G=u(I);return G.length===0||ye.copy(G,0,0,I),G}if(ye.length!==void 0)return typeof ye.length!="number"||_t(ye.length)?u(0):_(ye);if(ye.type==="Buffer"&&Array.isArray(ye.data))return _(ye.data)}function C(ye){if(ye>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ye|0}function k(ye){return+ye!=ye&&(ye=0),d.alloc(+ye)}d.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==d.prototype},d.compare=function(I,G){if(at(I,i)&&(I=d.from(I,I.offset,I.byteLength)),at(G,i)&&(G=d.from(G,G.offset,G.byteLength)),!d.isBuffer(I)||!d.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===G)return 0;let de=I.length,Oe=G.length;for(let ve=0,ke=Math.min(de,Oe);ve<ke;++ve)if(I[ve]!==G[ve]){de=I[ve],Oe=G[ve];break}return de<Oe?-1:Oe<de?1:0},d.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(I,G){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return d.alloc(0);let de;if(G===void 0)for(G=0,de=0;de<I.length;++de)G+=I[de].length;const Oe=d.allocUnsafe(G);let ve=0;for(de=0;de<I.length;++de){let ke=I[de];if(at(ke,i))ve+ke.length>Oe.length?(d.isBuffer(ke)||(ke=d.from(ke)),ke.copy(Oe,ve)):i.prototype.set.call(Oe,ke,ve);else if(d.isBuffer(ke))ke.copy(Oe,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=ke.length}return Oe};function R(ye,I){if(d.isBuffer(ye))return ye.length;if(o.isView(ye)||at(ye,o))return ye.byteLength;if(typeof ye!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ye);const G=ye.length,de=arguments.length>2&&arguments[2]===!0;if(!de&&G===0)return 0;let Oe=!1;for(;;)switch(I){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return xe(ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G*2;case"hex":return G>>>1;case"base64":return We(ye).length;default:if(Oe)return de?-1:xe(ye).length;I=(""+I).toLowerCase(),Oe=!0}}d.byteLength=R;function j(ye,I,G){let de=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0,I>>>=0,G<=I))return"";for(ye||(ye="utf8");;)switch(ye){case"hex":return J(this,I,G);case"utf8":case"utf-8":return re(this,I,G);case"ascii":return U(this,I,G);case"latin1":case"binary":return ee(this,I,G);case"base64":return te(this,I,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,I,G);default:if(de)throw new TypeError("Unknown encoding: "+ye);ye=(ye+"").toLowerCase(),de=!0}}d.prototype._isBuffer=!0;function O(ye,I,G){const de=ye[I];ye[I]=ye[G],ye[G]=de}d.prototype.swap16=function(){const I=this.length;if(I%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let G=0;G<I;G+=2)O(this,G,G+1);return this},d.prototype.swap32=function(){const I=this.length;if(I%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let G=0;G<I;G+=4)O(this,G,G+3),O(this,G+1,G+2);return this},d.prototype.swap64=function(){const I=this.length;if(I%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let G=0;G<I;G+=8)O(this,G,G+7),O(this,G+1,G+6),O(this,G+2,G+5),O(this,G+3,G+4);return this},d.prototype.toString=function(){const I=this.length;return I===0?"":arguments.length===0?re(this,0,I):j.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(I){if(!d.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I?!0:d.compare(this,I)===0},d.prototype.inspect=function(){let I="";const G=e.INSPECT_MAX_BYTES;return I=this.toString("hex",0,G).replace(/(.{2})/g,"$1 ").trim(),this.length>G&&(I+=" ... "),"<Buffer "+I+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(I,G,de,Oe,ve){if(at(I,i)&&(I=d.from(I,I.offset,I.byteLength)),!d.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(G===void 0&&(G=0),de===void 0&&(de=I?I.length:0),Oe===void 0&&(Oe=0),ve===void 0&&(ve=this.length),G<0||de>I.length||Oe<0||ve>this.length)throw new RangeError("out of range index");if(Oe>=ve&&G>=de)return 0;if(Oe>=ve)return-1;if(G>=de)return 1;if(G>>>=0,de>>>=0,Oe>>>=0,ve>>>=0,this===I)return 0;let ke=ve-Oe,le=de-G;const ft=Math.min(ke,le),vt=this.slice(Oe,ve),M=I.slice(G,de);for(let Be=0;Be<ft;++Be)if(vt[Be]!==M[Be]){ke=vt[Be],le=M[Be];break}return ke<le?-1:le<ke?1:0};function L(ye,I,G,de,Oe){if(ye.length===0)return-1;if(typeof G=="string"?(de=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,_t(G)&&(G=Oe?0:ye.length-1),G<0&&(G=ye.length+G),G>=ye.length){if(Oe)return-1;G=ye.length-1}else if(G<0)if(Oe)G=0;else return-1;if(typeof I=="string"&&(I=d.from(I,de)),d.isBuffer(I))return I.length===0?-1:z(ye,I,G,de,Oe);if(typeof I=="number")return I=I&255,typeof i.prototype.indexOf=="function"?Oe?i.prototype.indexOf.call(ye,I,G):i.prototype.lastIndexOf.call(ye,I,G):z(ye,[I],G,de,Oe);throw new TypeError("val must be string, number or Buffer")}function z(ye,I,G,de,Oe){let ve=1,ke=ye.length,le=I.length;if(de!==void 0&&(de=String(de).toLowerCase(),de==="ucs2"||de==="ucs-2"||de==="utf16le"||de==="utf-16le")){if(ye.length<2||I.length<2)return-1;ve=2,ke/=2,le/=2,G/=2}function ft(M,Be){return ve===1?M[Be]:M.readUInt16BE(Be*ve)}let vt;if(Oe){let M=-1;for(vt=G;vt<ke;vt++)if(ft(ye,vt)===ft(I,M===-1?0:vt-M)){if(M===-1&&(M=vt),vt-M+1===le)return M*ve}else M!==-1&&(vt-=vt-M),M=-1}else for(G+le>ke&&(G=ke-le),vt=G;vt>=0;vt--){let M=!0;for(let Be=0;Be<le;Be++)if(ft(ye,vt+Be)!==ft(I,Be)){M=!1;break}if(M)return vt}return-1}d.prototype.includes=function(I,G,de){return this.indexOf(I,G,de)!==-1},d.prototype.indexOf=function(I,G,de){return L(this,I,G,de,!0)},d.prototype.lastIndexOf=function(I,G,de){return L(this,I,G,de,!1)};function Y(ye,I,G,de){G=Number(G)||0;const Oe=ye.length-G;de?(de=Number(de),de>Oe&&(de=Oe)):de=Oe;const ve=I.length;de>ve/2&&(de=ve/2);let ke;for(ke=0;ke<de;++ke){const le=parseInt(I.substr(ke*2,2),16);if(_t(le))return ke;ye[G+ke]=le}return ke}function F(ye,I,G,de){return kt(xe(I,ye.length-G),ye,G,de)}function K(ye,I,G,de){return kt(Me(I),ye,G,de)}function q(ye,I,G,de){return kt(We(I),ye,G,de)}function fe(ye,I,G,de){return kt(Ee(I,ye.length-G),ye,G,de)}d.prototype.write=function(I,G,de,Oe){if(G===void 0)Oe="utf8",de=this.length,G=0;else if(de===void 0&&typeof G=="string")Oe=G,de=this.length,G=0;else if(isFinite(G))G=G>>>0,isFinite(de)?(de=de>>>0,Oe===void 0&&(Oe="utf8")):(Oe=de,de=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ve=this.length-G;if((de===void 0||de>ve)&&(de=ve),I.length>0&&(de<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let ke=!1;for(;;)switch(Oe){case"hex":return Y(this,I,G,de);case"utf8":case"utf-8":return F(this,I,G,de);case"ascii":case"latin1":case"binary":return K(this,I,G,de);case"base64":return q(this,I,G,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,I,G,de);default:if(ke)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),ke=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function te(ye,I,G){return I===0&&G===ye.length?t.fromByteArray(ye):t.fromByteArray(ye.slice(I,G))}function re(ye,I,G){G=Math.min(ye.length,G);const de=[];let Oe=I;for(;Oe<G;){const ve=ye[Oe];let ke=null,le=ve>239?4:ve>223?3:ve>191?2:1;if(Oe+le<=G){let ft,vt,M,Be;switch(le){case 1:ve<128&&(ke=ve);break;case 2:ft=ye[Oe+1],(ft&192)===128&&(Be=(ve&31)<<6|ft&63,Be>127&&(ke=Be));break;case 3:ft=ye[Oe+1],vt=ye[Oe+2],(ft&192)===128&&(vt&192)===128&&(Be=(ve&15)<<12|(ft&63)<<6|vt&63,Be>2047&&(Be<55296||Be>57343)&&(ke=Be));break;case 4:ft=ye[Oe+1],vt=ye[Oe+2],M=ye[Oe+3],(ft&192)===128&&(vt&192)===128&&(M&192)===128&&(Be=(ve&15)<<18|(ft&63)<<12|(vt&63)<<6|M&63,Be>65535&&Be<1114112&&(ke=Be))}}ke===null?(ke=65533,le=1):ke>65535&&(ke-=65536,de.push(ke>>>10&1023|55296),ke=56320|ke&1023),de.push(ke),Oe+=le}return ae(de)}const X=4096;function ae(ye){const I=ye.length;if(I<=X)return String.fromCharCode.apply(String,ye);let G="",de=0;for(;de<I;)G+=String.fromCharCode.apply(String,ye.slice(de,de+=X));return G}function U(ye,I,G){let de="";G=Math.min(ye.length,G);for(let Oe=I;Oe<G;++Oe)de+=String.fromCharCode(ye[Oe]&127);return de}function ee(ye,I,G){let de="";G=Math.min(ye.length,G);for(let Oe=I;Oe<G;++Oe)de+=String.fromCharCode(ye[Oe]);return de}function J(ye,I,G){const de=ye.length;(!I||I<0)&&(I=0),(!G||G<0||G>de)&&(G=de);let Oe="";for(let ve=I;ve<G;++ve)Oe+=Dt[ye[ve]];return Oe}function ue(ye,I,G){const de=ye.slice(I,G);let Oe="";for(let ve=0;ve<de.length-1;ve+=2)Oe+=String.fromCharCode(de[ve]+de[ve+1]*256);return Oe}d.prototype.slice=function(I,G){const de=this.length;I=~~I,G=G===void 0?de:~~G,I<0?(I+=de,I<0&&(I=0)):I>de&&(I=de),G<0?(G+=de,G<0&&(G=0)):G>de&&(G=de),G<I&&(G=I);const Oe=this.subarray(I,G);return Object.setPrototypeOf(Oe,d.prototype),Oe};function be(ye,I,G){if(ye%1!==0||ye<0)throw new RangeError("offset is not uint");if(ye+I>G)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(I,G,de){I=I>>>0,G=G>>>0,de||be(I,G,this.length);let Oe=this[I],ve=1,ke=0;for(;++ke<G&&(ve*=256);)Oe+=this[I+ke]*ve;return Oe},d.prototype.readUintBE=d.prototype.readUIntBE=function(I,G,de){I=I>>>0,G=G>>>0,de||be(I,G,this.length);let Oe=this[I+--G],ve=1;for(;G>0&&(ve*=256);)Oe+=this[I+--G]*ve;return Oe},d.prototype.readUint8=d.prototype.readUInt8=function(I,G){return I=I>>>0,G||be(I,1,this.length),this[I]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(I,G){return I=I>>>0,G||be(I,2,this.length),this[I]|this[I+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(I,G){return I=I>>>0,G||be(I,2,this.length),this[I]<<8|this[I+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(I,G){return I=I>>>0,G||be(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+this[I+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(I,G){return I=I>>>0,G||be(I,4,this.length),this[I]*16777216+(this[I+1]<<16|this[I+2]<<8|this[I+3])},d.prototype.readBigUInt64LE=jt(function(I){I=I>>>0,Ae(I,"offset");const G=this[I],de=this[I+7];(G===void 0||de===void 0)&&se(I,this.length-8);const Oe=G+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24,ve=this[++I]+this[++I]*2**8+this[++I]*2**16+de*2**24;return BigInt(Oe)+(BigInt(ve)<<BigInt(32))}),d.prototype.readBigUInt64BE=jt(function(I){I=I>>>0,Ae(I,"offset");const G=this[I],de=this[I+7];(G===void 0||de===void 0)&&se(I,this.length-8);const Oe=G*2**24+this[++I]*2**16+this[++I]*2**8+this[++I],ve=this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+de;return(BigInt(Oe)<<BigInt(32))+BigInt(ve)}),d.prototype.readIntLE=function(I,G,de){I=I>>>0,G=G>>>0,de||be(I,G,this.length);let Oe=this[I],ve=1,ke=0;for(;++ke<G&&(ve*=256);)Oe+=this[I+ke]*ve;return ve*=128,Oe>=ve&&(Oe-=Math.pow(2,8*G)),Oe},d.prototype.readIntBE=function(I,G,de){I=I>>>0,G=G>>>0,de||be(I,G,this.length);let Oe=G,ve=1,ke=this[I+--Oe];for(;Oe>0&&(ve*=256);)ke+=this[I+--Oe]*ve;return ve*=128,ke>=ve&&(ke-=Math.pow(2,8*G)),ke},d.prototype.readInt8=function(I,G){return I=I>>>0,G||be(I,1,this.length),this[I]&128?(255-this[I]+1)*-1:this[I]},d.prototype.readInt16LE=function(I,G){I=I>>>0,G||be(I,2,this.length);const de=this[I]|this[I+1]<<8;return de&32768?de|4294901760:de},d.prototype.readInt16BE=function(I,G){I=I>>>0,G||be(I,2,this.length);const de=this[I+1]|this[I]<<8;return de&32768?de|4294901760:de},d.prototype.readInt32LE=function(I,G){return I=I>>>0,G||be(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},d.prototype.readInt32BE=function(I,G){return I=I>>>0,G||be(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},d.prototype.readBigInt64LE=jt(function(I){I=I>>>0,Ae(I,"offset");const G=this[I],de=this[I+7];(G===void 0||de===void 0)&&se(I,this.length-8);const Oe=this[I+4]+this[I+5]*2**8+this[I+6]*2**16+(de<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(G+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24)}),d.prototype.readBigInt64BE=jt(function(I){I=I>>>0,Ae(I,"offset");const G=this[I],de=this[I+7];(G===void 0||de===void 0)&&se(I,this.length-8);const Oe=(G<<24)+this[++I]*2**16+this[++I]*2**8+this[++I];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+de)}),d.prototype.readFloatLE=function(I,G){return I=I>>>0,G||be(I,4,this.length),n.read(this,I,!0,23,4)},d.prototype.readFloatBE=function(I,G){return I=I>>>0,G||be(I,4,this.length),n.read(this,I,!1,23,4)},d.prototype.readDoubleLE=function(I,G){return I=I>>>0,G||be(I,8,this.length),n.read(this,I,!0,52,8)},d.prototype.readDoubleBE=function(I,G){return I=I>>>0,G||be(I,8,this.length),n.read(this,I,!1,52,8)};function _e(ye,I,G,de,Oe,ve){if(!d.isBuffer(ye))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>Oe||I<ve)throw new RangeError('"value" argument is out of bounds');if(G+de>ye.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(I,G,de,Oe){if(I=+I,G=G>>>0,de=de>>>0,!Oe){const le=Math.pow(2,8*de)-1;_e(this,I,G,de,le,0)}let ve=1,ke=0;for(this[G]=I&255;++ke<de&&(ve*=256);)this[G+ke]=I/ve&255;return G+de},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(I,G,de,Oe){if(I=+I,G=G>>>0,de=de>>>0,!Oe){const le=Math.pow(2,8*de)-1;_e(this,I,G,de,le,0)}let ve=de-1,ke=1;for(this[G+ve]=I&255;--ve>=0&&(ke*=256);)this[G+ve]=I/ke&255;return G+de},d.prototype.writeUint8=d.prototype.writeUInt8=function(I,G,de){return I=+I,G=G>>>0,de||_e(this,I,G,1,255,0),this[G]=I&255,G+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(I,G,de){return I=+I,G=G>>>0,de||_e(this,I,G,2,65535,0),this[G]=I&255,this[G+1]=I>>>8,G+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(I,G,de){return I=+I,G=G>>>0,de||_e(this,I,G,2,65535,0),this[G]=I>>>8,this[G+1]=I&255,G+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(I,G,de){return I=+I,G=G>>>0,de||_e(this,I,G,4,4294967295,0),this[G+3]=I>>>24,this[G+2]=I>>>16,this[G+1]=I>>>8,this[G]=I&255,G+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(I,G,de){return I=+I,G=G>>>0,de||_e(this,I,G,4,4294967295,0),this[G]=I>>>24,this[G+1]=I>>>16,this[G+2]=I>>>8,this[G+3]=I&255,G+4};function Pe(ye,I,G,de,Oe){me(I,de,Oe,ye,G,7);let ve=Number(I&BigInt(4294967295));ye[G++]=ve,ve=ve>>8,ye[G++]=ve,ve=ve>>8,ye[G++]=ve,ve=ve>>8,ye[G++]=ve;let ke=Number(I>>BigInt(32)&BigInt(4294967295));return ye[G++]=ke,ke=ke>>8,ye[G++]=ke,ke=ke>>8,ye[G++]=ke,ke=ke>>8,ye[G++]=ke,G}function Ne(ye,I,G,de,Oe){me(I,de,Oe,ye,G,7);let ve=Number(I&BigInt(4294967295));ye[G+7]=ve,ve=ve>>8,ye[G+6]=ve,ve=ve>>8,ye[G+5]=ve,ve=ve>>8,ye[G+4]=ve;let ke=Number(I>>BigInt(32)&BigInt(4294967295));return ye[G+3]=ke,ke=ke>>8,ye[G+2]=ke,ke=ke>>8,ye[G+1]=ke,ke=ke>>8,ye[G]=ke,G+8}d.prototype.writeBigUInt64LE=jt(function(I,G=0){return Pe(this,I,G,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=jt(function(I,G=0){return Ne(this,I,G,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(I,G,de,Oe){if(I=+I,G=G>>>0,!Oe){const ft=Math.pow(2,8*de-1);_e(this,I,G,de,ft-1,-ft)}let ve=0,ke=1,le=0;for(this[G]=I&255;++ve<de&&(ke*=256);)I<0&&le===0&&this[G+ve-1]!==0&&(le=1),this[G+ve]=(I/ke>>0)-le&255;return G+de},d.prototype.writeIntBE=function(I,G,de,Oe){if(I=+I,G=G>>>0,!Oe){const ft=Math.pow(2,8*de-1);_e(this,I,G,de,ft-1,-ft)}let ve=de-1,ke=1,le=0;for(this[G+ve]=I&255;--ve>=0&&(ke*=256);)I<0&&le===0&&this[G+ve+1]!==0&&(le=1),this[G+ve]=(I/ke>>0)-le&255;return G+de},d.prototype.writeInt8=function(I,G,de){return I=+I,G=G>>>0,de||_e(this,I,G,1,127,-128),I<0&&(I=255+I+1),this[G]=I&255,G+1},d.prototype.writeInt16LE=function(I,G,de){return I=+I,G=G>>>0,de||_e(this,I,G,2,32767,-32768),this[G]=I&255,this[G+1]=I>>>8,G+2},d.prototype.writeInt16BE=function(I,G,de){return I=+I,G=G>>>0,de||_e(this,I,G,2,32767,-32768),this[G]=I>>>8,this[G+1]=I&255,G+2},d.prototype.writeInt32LE=function(I,G,de){return I=+I,G=G>>>0,de||_e(this,I,G,4,2147483647,-2147483648),this[G]=I&255,this[G+1]=I>>>8,this[G+2]=I>>>16,this[G+3]=I>>>24,G+4},d.prototype.writeInt32BE=function(I,G,de){return I=+I,G=G>>>0,de||_e(this,I,G,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[G]=I>>>24,this[G+1]=I>>>16,this[G+2]=I>>>8,this[G+3]=I&255,G+4},d.prototype.writeBigInt64LE=jt(function(I,G=0){return Pe(this,I,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=jt(function(I,G=0){return Ne(this,I,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(ye,I,G,de,Oe,ve){if(G+de>ye.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function Ce(ye,I,G,de,Oe){return I=+I,G=G>>>0,Oe||Re(ye,I,G,4),n.write(ye,I,G,de,23,4),G+4}d.prototype.writeFloatLE=function(I,G,de){return Ce(this,I,G,!0,de)},d.prototype.writeFloatBE=function(I,G,de){return Ce(this,I,G,!1,de)};function Fe(ye,I,G,de,Oe){return I=+I,G=G>>>0,Oe||Re(ye,I,G,8),n.write(ye,I,G,de,52,8),G+8}d.prototype.writeDoubleLE=function(I,G,de){return Fe(this,I,G,!0,de)},d.prototype.writeDoubleBE=function(I,G,de){return Fe(this,I,G,!1,de)},d.prototype.copy=function(I,G,de,Oe){if(!d.isBuffer(I))throw new TypeError("argument should be a Buffer");if(de||(de=0),!Oe&&Oe!==0&&(Oe=this.length),G>=I.length&&(G=I.length),G||(G=0),Oe>0&&Oe<de&&(Oe=de),Oe===de||I.length===0||this.length===0)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),I.length-G<Oe-de&&(Oe=I.length-G+de);const ve=Oe-de;return this===I&&typeof i.prototype.copyWithin=="function"?this.copyWithin(G,de,Oe):i.prototype.set.call(I,this.subarray(de,Oe),G),ve},d.prototype.fill=function(I,G,de,Oe){if(typeof I=="string"){if(typeof G=="string"?(Oe=G,G=0,de=this.length):typeof de=="string"&&(Oe=de,de=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!d.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(I.length===1){const ke=I.charCodeAt(0);(Oe==="utf8"&&ke<128||Oe==="latin1")&&(I=ke)}}else typeof I=="number"?I=I&255:typeof I=="boolean"&&(I=Number(I));if(G<0||this.length<G||this.length<de)throw new RangeError("Out of range index");if(de<=G)return this;G=G>>>0,de=de===void 0?this.length:de>>>0,I||(I=0);let ve;if(typeof I=="number")for(ve=G;ve<de;++ve)this[ve]=I;else{const ke=d.isBuffer(I)?I:d.from(I,Oe),le=ke.length;if(le===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(ve=0;ve<de-G;++ve)this[ve+G]=ke[ve%le]}return this};const Qe={};function Le(ye,I,G){Qe[ye]=class extends G{constructor(){super(),Object.defineProperty(this,"message",{value:I.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ye}]`,this.stack,delete this.name}get code(){return ye}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${ye}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(ye){return ye?`${ye} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(ye,I){return`The "${ye}" argument must be of type number. Received type ${typeof I}`},TypeError),Le("ERR_OUT_OF_RANGE",function(ye,I,G){let de=`The value of "${ye}" is out of range.`,Oe=G;return Number.isInteger(G)&&Math.abs(G)>2**32?Oe=Ie(String(G)):typeof G=="bigint"&&(Oe=String(G),(G>BigInt(2)**BigInt(32)||G<-(BigInt(2)**BigInt(32)))&&(Oe=Ie(Oe)),Oe+="n"),de+=` It must be ${I}. Received ${Oe}`,de},RangeError);function Ie(ye){let I="",G=ye.length;const de=ye[0]==="-"?1:0;for(;G>=de+4;G-=3)I=`_${ye.slice(G-3,G)}${I}`;return`${ye.slice(0,G)}${I}`}function V(ye,I,G){Ae(I,"offset"),(ye[I]===void 0||ye[I+G]===void 0)&&se(I,ye.length-(G+1))}function me(ye,I,G,de,Oe,ve){if(ye>G||ye<I){const ke=typeof I=="bigint"?"n":"";let le;throw I===0||I===BigInt(0)?le=`>= 0${ke} and < 2${ke} ** ${(ve+1)*8}${ke}`:le=`>= -(2${ke} ** ${(ve+1)*8-1}${ke}) and < 2 ** ${(ve+1)*8-1}${ke}`,new Qe.ERR_OUT_OF_RANGE("value",le,ye)}V(de,Oe,ve)}function Ae(ye,I){if(typeof ye!="number")throw new Qe.ERR_INVALID_ARG_TYPE(I,"number",ye)}function se(ye,I,G){throw Math.floor(ye)!==ye?(Ae(ye,G),new Qe.ERR_OUT_OF_RANGE("offset","an integer",ye)):I<0?new Qe.ERR_BUFFER_OUT_OF_BOUNDS:new Qe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${I}`,ye)}const ie=/[^+/0-9A-Za-z-_]/g;function Q(ye){if(ye=ye.split("=")[0],ye=ye.trim().replace(ie,""),ye.length<2)return"";for(;ye.length%4!==0;)ye=ye+"=";return ye}function xe(ye,I){I=I||1/0;let G;const de=ye.length;let Oe=null;const ve=[];for(let ke=0;ke<de;++ke){if(G=ye.charCodeAt(ke),G>55295&&G<57344){if(!Oe){if(G>56319){(I-=3)>-1&&ve.push(239,191,189);continue}else if(ke+1===de){(I-=3)>-1&&ve.push(239,191,189);continue}Oe=G;continue}if(G<56320){(I-=3)>-1&&ve.push(239,191,189),Oe=G;continue}G=(Oe-55296<<10|G-56320)+65536}else Oe&&(I-=3)>-1&&ve.push(239,191,189);if(Oe=null,G<128){if((I-=1)<0)break;ve.push(G)}else if(G<2048){if((I-=2)<0)break;ve.push(G>>6|192,G&63|128)}else if(G<65536){if((I-=3)<0)break;ve.push(G>>12|224,G>>6&63|128,G&63|128)}else if(G<1114112){if((I-=4)<0)break;ve.push(G>>18|240,G>>12&63|128,G>>6&63|128,G&63|128)}else throw new Error("Invalid code point")}return ve}function Me(ye){const I=[];for(let G=0;G<ye.length;++G)I.push(ye.charCodeAt(G)&255);return I}function Ee(ye,I){let G,de,Oe;const ve=[];for(let ke=0;ke<ye.length&&!((I-=2)<0);++ke)G=ye.charCodeAt(ke),de=G>>8,Oe=G%256,ve.push(Oe),ve.push(de);return ve}function We(ye){return t.toByteArray(Q(ye))}function kt(ye,I,G,de){let Oe;for(Oe=0;Oe<de&&!(Oe+G>=I.length||Oe>=ye.length);++Oe)I[Oe+G]=ye[Oe];return Oe}function at(ye,I){return ye instanceof I||ye!=null&&ye.constructor!=null&&ye.constructor.name!=null&&ye.constructor.name===I.name}function _t(ye){return ye!==ye}const Dt=function(){const ye="0123456789abcdef",I=new Array(256);for(let G=0;G<16;++G){const de=G*16;for(let Oe=0;Oe<16;++Oe)I[de+Oe]=ye[G]+ye[Oe]}return I}();function jt(ye){return typeof BigInt>"u"?Gt:ye}function Gt(){throw new Error("BigInt not supported")}})(HC);const Yt=HC.Buffer,Dr=HC.Buffer;var Ju={exports:{}},S3;function cV(){if(S3)return Ju.exports;S3=1;const e=typeof Yt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,l,u){u==null&&l!==null&&typeof l=="object"&&(u=l,l=void 0),e&&Yt.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const d=JSON.parse(s,l);if(d===null||typeof d!="object")return d;const h=u&&u.protoAction||"error",p=u&&u.constructorAction||"error";if(h==="ignore"&&p==="ignore")return d;if(h!=="ignore"&&p!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return d}else if(h!=="ignore"&&p==="ignore"){if(t.test(s)===!1)return d}else if(n.test(s)===!1)return d;return a(d,{protoAction:h,constructorAction:p,safe:u&&u.safe})}function a(s,{protoAction:l="error",constructorAction:u="error",safe:d}={}){let h=[s];for(;h.length;){const p=h;h=[];for(const g of p){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(d===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const b=g[v];b&&typeof b=="object"&&h.push(b)}}}return s}function i(s,l,u){const d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,l,u)}finally{Error.stackTraceLimit=d}}function o(s,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=u}}return Ju.exports=i,Ju.exports.default=i,Ju.exports.parse=i,Ju.exports.safeParse=o,Ju.exports.scan=a,Ju.exports}var uV=cV();const is=li(uV);var dV={};function Us(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function fV(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function hV(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function pV(){let e="",t,n=[],r,a;function i(l,u){if(l===""){o(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){s(l,"");return}const h=l.slice(0,d),p=d+1,g=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);s(h,g)}function o(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=mV(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],u)},flush(l){i(e,l),o(l)}})}function mV(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function eg(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Td=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=eV(n,t);if(e==null)return a;if(n.includes(r))throw new zC({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},js=Td();function gV(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function yV(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function qb(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function bV({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new ib({message:`${r} API key must be a string.`});if(typeof Jr>"u")throw new ib({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=dV[t],e==null)throw new ib({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new ib({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var iv=Symbol.for("vercel.ai.validator");function vV(e){return{[iv]:!0,validate:e}}function wV(e){return typeof e=="object"&&e!==null&&iv in e&&e[iv]===!0&&"validate"in e}function _V(e){return wV(e)?e:xV(e)}function xV(e){return vV(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function SV({value:e,schema:t}){const n=zh({value:e,schema:t});if(!n.success)throw eu.wrap({value:e,cause:n.error});return n.value}function zh({value:e,schema:t}){const n=_V(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:eu.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:eu.wrap({value:e,cause:r})}}}function EV({text:e,schema:t}){try{const n=is.parse(e);return t==null?n:SV({value:n,schema:t})}catch(n){throw Qc.isInstance(n)||eu.isInstance(n)?n:new Qc({text:e,cause:n})}}function gd({text:e,schema:t}){try{const n=is.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=zh({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Qc.isInstance(n)?n:new Qc({text:e,cause:n})}}}function E3(e){try{return is.parse(e),!0}catch{return!1}}function CV({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=zh({value:t[e],schema:n});if(!r.success)throw new zC({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var kV=()=>globalThis.fetch,Zo=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>AV({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),AV=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=kV()})=>{try{const s=await o(e,{method:"POST",headers:yV(t),body:n.content,signal:i}),l=eg(s);if(!s.ok){let u;try{u=await a({response:s,url:e,requestBodyValues:n.values})}catch(d){throw qb(d)||wa.isInstance(d)?d:new wa({message:"Failed to process error response",cause:d,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(qb(u)||wa.isInstance(u))?u:new wa({message:"Failed to process successful response",cause:u,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(s){if(qb(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const l=s.cause;if(l!=null)throw new wa({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},oD=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=eg(r);if(o.trim()==="")return{responseHeaders:s,value:new wa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const l=EV({text:o,schema:e});return{responseHeaders:s,value:new wa({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:s,value:new wa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},VC=e=>async({response:t})=>{const n=eg(t);if(t.body==null)throw new BC({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(pV()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(gd({text:r,schema:e}))}}))}},Nd=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=gd({text:a,schema:e}),o=eg(t);if(!i.success)throw new wa({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:TV,atob:NV}=globalThis;function sD(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=NV(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function ph(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return TV(t)}function lD(e){return e==null?void 0:e.replace(/\/$/,"")}var Yn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Yn||(Yn={}));var m2;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(m2||(m2={}));const en=Yn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Nl=e=>{switch(typeof e){case"undefined":return en.undefined;case"string":return en.string;case"number":return isNaN(e)?en.nan:en.number;case"boolean":return en.boolean;case"function":return en.function;case"bigint":return en.bigint;case"symbol":return en.symbol;case"object":return Array.isArray(e)?en.array:e===null?en.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?en.promise:typeof Map<"u"&&e instanceof Map?en.map:typeof Set<"u"&&e instanceof Set?en.set:typeof Date<"u"&&e instanceof Date?en.date:en.object;default:return en.unknown}},Pt=Yn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),RV=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class eo extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(n(o))):s[u]=s[u]||{_errors:[]},s=s[u],l++}}};return a(this),r}static assert(t){if(!(t instanceof eo))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Yn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}eo.create=e=>new eo(e);const mh=(e,t)=>{let n;switch(e.code){case Pt.invalid_type:e.received===en.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Pt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Yn.jsonStringifyReplacer)}`;break;case Pt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Yn.joinValues(e.keys,", ")}`;break;case Pt.invalid_union:n="Invalid input";break;case Pt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Yn.joinValues(e.options)}`;break;case Pt.invalid_enum_value:n=`Invalid enum value. Expected ${Yn.joinValues(e.options)}, received '${e.received}'`;break;case Pt.invalid_arguments:n="Invalid function arguments";break;case Pt.invalid_return_type:n="Invalid function return type";break;case Pt.invalid_date:n="Invalid date";break;case Pt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Yn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Pt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Pt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Pt.custom:n="Invalid input";break;case Pt.invalid_intersection_types:n="Intersection results could not be merged";break;case Pt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Pt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Yn.assertNever(e)}return{message:n}};let cD=mh;function IV(e){cD=e}function ov(){return cD}const sv=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)s=u(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},OV=[];function Jt(e,t){const n=ov(),r=sv({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===mh?void 0:mh].filter(a=>!!a)});e.common.issues.push(r)}class ai{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return En;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return ai.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return En;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const En=Object.freeze({status:"aborted"}),Jf=e=>({status:"dirty",value:e}),vi=e=>({status:"valid",value:e}),g2=e=>e.status==="aborted",y2=e=>e.status==="dirty",yd=e=>e.status==="valid",Km=e=>typeof Promise<"u"&&e instanceof Promise;function lv(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function uD(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var cn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(cn||(cn={}));var Om,jm;class Hs{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const C3=(e,t)=>{if(yd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new eo(e.common.issues);return this._error=n,this._error}}};function On(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var l,u;const{message:d}=e;return o.code==="invalid_enum_value"?{message:d??s.defaultError}:typeof s.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:s.defaultError}},description:a}}class Mn{get description(){return this._def.description}_getType(t){return Nl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Nl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ai,ctx:{common:t.parent.common,data:t.data,parsedType:Nl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Km(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Nl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return C3(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Nl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return yd(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>yd(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Nl(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(Km(a)?a:Promise.resolve(a));return C3(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:Pt.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Yo({schema:this,typeName:Ut.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Vo.create(this,this._def)}nullable(){return au.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qo.create(this)}promise(){return yh.create(this,this._def)}or(t){return Jm.create([this,t],this._def)}and(t){return Qm.create(this,t,this._def)}transform(t){return new Yo({...On(this._def),schema:this,typeName:Ut.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new a0({...On(this._def),innerType:this,defaultValue:n,typeName:Ut.ZodDefault})}brand(){return new GC({typeName:Ut.ZodBranded,type:this,...On(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new i0({...On(this._def),innerType:this,catchValue:n,typeName:Ut.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return tg.create(this,t)}readonly(){return o0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const jV=/^c[^\s-]{8,}$/i,DV=/^[0-9a-z]+$/,MV=/^[0-9A-HJKMNP-TV-Z]{26}$/i,PV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,FV=/^[a-z0-9_-]{21}$/i,LV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,$V=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,BV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Kx;const UV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,HV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,VV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,GV=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,WV=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",KV=new RegExp(`^${dD}$`);function fD(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function ZV(e){return new RegExp(`^${fD(e)}$`)}function hD(e){let t=`${dD}T${fD(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function YV(e,t){return!!((t==="v4"||!t)&&UV.test(e)||(t==="v6"||!t)&&qV.test(e))}function XV(e,t){if(!LV.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function JV(e,t){return!!((t==="v4"||!t)&&HV.test(e)||(t==="v6"||!t)&&VV.test(e))}class zo extends Mn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==en.string){const i=this._getOrReturnCtx(t);return Jt(i,{code:Pt.invalid_type,expected:en.string,received:i.parsedType}),En}const r=new ai;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?Jt(a,{code:Pt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&Jt(a,{code:Pt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")BV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"email",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Kx||(Kx=new RegExp(zV,"u")),Kx.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"emoji",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")PV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"uuid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")FV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"nanoid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")jV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"cuid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")DV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"cuid2",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")MV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"ulid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Jt(a,{validation:"url",code:Pt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"regex",code:Pt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?hD(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?KV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?ZV(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?$V.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"duration",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?YV(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"ip",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?XV(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"jwt",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?JV(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"cidr",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?GV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"base64",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?WV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"base64url",code:Pt.invalid_string,message:i.message}),r.dirty()):Yn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Pt.invalid_string,...cn.errToObj(r)})}_addCheck(t){return new zo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...cn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...cn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...cn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...cn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...cn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...cn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...cn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...cn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...cn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...cn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...cn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...cn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...cn.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...cn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...cn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...cn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...cn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...cn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...cn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...cn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...cn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...cn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...cn.errToObj(n)})}nonempty(t){return this.min(1,cn.errToObj(t))}trim(){return new zo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}zo.create=e=>{var t;return new zo({checks:[],typeName:Ut.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...On(e)})};function QV(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class tu extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==en.number){const i=this._getOrReturnCtx(t);return Jt(i,{code:Pt.invalid_type,expected:en.number,received:i.parsedType}),En}let r;const a=new ai;for(const i of this._def.checks)i.kind==="int"?Yn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?QV(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.not_finite,message:i.message}),a.dirty()):Yn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,cn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,cn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,cn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,cn.toString(n))}setLimit(t,n,r,a){return new tu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:cn.toString(a)}]})}_addCheck(t){return new tu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:cn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:cn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:cn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:cn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:cn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:cn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:cn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:cn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:cn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Yn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}tu.create=e=>new tu({checks:[],typeName:Ut.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...On(e)});class nu extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==en.bigint)return this._getInvalidInput(t);let r;const a=new ai;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Yn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Jt(n,{code:Pt.invalid_type,expected:en.bigint,received:n.parsedType}),En}gte(t,n){return this.setLimit("min",t,!0,cn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,cn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,cn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,cn.toString(n))}setLimit(t,n,r,a){return new nu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:cn.toString(a)}]})}_addCheck(t){return new nu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:cn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:cn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:cn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:cn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:cn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}nu.create=e=>{var t;return new nu({checks:[],typeName:Ut.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...On(e)})};class Zm extends Mn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==en.boolean){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.boolean,received:r.parsedType}),En}return vi(t.data)}}Zm.create=e=>new Zm({typeName:Ut.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...On(e)});class bd extends Mn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==en.date){const i=this._getOrReturnCtx(t);return Jt(i,{code:Pt.invalid_type,expected:en.date,received:i.parsedType}),En}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Jt(i,{code:Pt.invalid_date}),En}const r=new ai;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Yn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new bd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:cn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:cn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}bd.create=e=>new bd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ut.ZodDate,...On(e)});class cv extends Mn{_parse(t){if(this._getType(t)!==en.symbol){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.symbol,received:r.parsedType}),En}return vi(t.data)}}cv.create=e=>new cv({typeName:Ut.ZodSymbol,...On(e)});class Ym extends Mn{_parse(t){if(this._getType(t)!==en.undefined){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.undefined,received:r.parsedType}),En}return vi(t.data)}}Ym.create=e=>new Ym({typeName:Ut.ZodUndefined,...On(e)});class Xm extends Mn{_parse(t){if(this._getType(t)!==en.null){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.null,received:r.parsedType}),En}return vi(t.data)}}Xm.create=e=>new Xm({typeName:Ut.ZodNull,...On(e)});class gh extends Mn{constructor(){super(...arguments),this._any=!0}_parse(t){return vi(t.data)}}gh.create=e=>new gh({typeName:Ut.ZodAny,...On(e)});class fd extends Mn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return vi(t.data)}}fd.create=e=>new fd({typeName:Ut.ZodUnknown,...On(e)});class zl extends Mn{_parse(t){const n=this._getOrReturnCtx(t);return Jt(n,{code:Pt.invalid_type,expected:en.never,received:n.parsedType}),En}}zl.create=e=>new zl({typeName:Ut.ZodNever,...On(e)});class uv extends Mn{_parse(t){if(this._getType(t)!==en.undefined){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.void,received:r.parsedType}),En}return vi(t.data)}}uv.create=e=>new uv({typeName:Ut.ZodVoid,...On(e)});class qo extends Mn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==en.array)return Jt(n,{code:Pt.invalid_type,expected:en.array,received:n.parsedType}),En;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,s=n.data.length<a.exactLength.value;(o||s)&&(Jt(n,{code:o?Pt.too_big:Pt.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Jt(n,{code:Pt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Jt(n,{code:Pt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>a.type._parseAsync(new Hs(n,o,n.path,s)))).then(o=>ai.mergeArray(r,o));const i=[...n.data].map((o,s)=>a.type._parseSync(new Hs(n,o,n.path,s)));return ai.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new qo({...this._def,minLength:{value:t,message:cn.toString(n)}})}max(t,n){return new qo({...this._def,maxLength:{value:t,message:cn.toString(n)}})}length(t,n){return new qo({...this._def,exactLength:{value:t,message:cn.toString(n)}})}nonempty(t){return this.min(1,t)}}qo.create=(e,t)=>new qo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ut.ZodArray,...On(t)});function Zf(e){if(e instanceof Wr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Vo.create(Zf(r))}return new Wr({...e._def,shape:()=>t})}else return e instanceof qo?new qo({...e._def,type:Zf(e.element)}):e instanceof Vo?Vo.create(Zf(e.unwrap())):e instanceof au?au.create(Zf(e.unwrap())):e instanceof qs?qs.create(e.items.map(t=>Zf(t))):e}class Wr extends Mn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Yn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==en.object){const u=this._getOrReturnCtx(t);return Jt(u,{code:Pt.invalid_type,expected:en.object,received:u.parsedType}),En}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof zl&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||s.push(u);const l=[];for(const u of o){const d=i[u],h=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Hs(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof zl){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of s)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")s.length>0&&(Jt(a,{code:Pt.unrecognized_keys,keys:s}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of s){const h=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Hs(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,p=await d.value;u.push({key:h,value:p,alwaysSet:d.alwaysSet})}return u}).then(u=>ai.mergeObjectSync(r,u)):ai.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return cn.errToObj,new Wr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,o,s;const l=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=cn.errToObj(t).message)!==null&&s!==void 0?s:l}:{message:l}}}:{}})}strip(){return new Wr({...this._def,unknownKeys:"strip"})}passthrough(){return new Wr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Wr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Wr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ut.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Wr({...this._def,catchall:t})}pick(t){const n={};return Yn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Wr({...this._def,shape:()=>n})}omit(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Wr({...this._def,shape:()=>n})}deepPartial(){return Zf(this)}partial(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Wr({...this._def,shape:()=>n})}required(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Vo;)i=i._def.innerType;n[r]=i}}),new Wr({...this._def,shape:()=>n})}keyof(){return pD(Yn.objectKeys(this.shape))}}Wr.create=(e,t)=>new Wr({shape:()=>e,unknownKeys:"strip",catchall:zl.create(),typeName:Ut.ZodObject,...On(t)});Wr.strictCreate=(e,t)=>new Wr({shape:()=>e,unknownKeys:"strict",catchall:zl.create(),typeName:Ut.ZodObject,...On(t)});Wr.lazycreate=(e,t)=>new Wr({shape:e,unknownKeys:"strip",catchall:zl.create(),typeName:Ut.ZodObject,...On(t)});class Jm extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new eo(s.ctx.common.issues));return Jt(n,{code:Pt.invalid_union,unionErrors:o}),En}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(l=>new eo(l));return Jt(n,{code:Pt.invalid_union,unionErrors:s}),En}}get options(){return this._def.options}}Jm.create=(e,t)=>new Jm({options:e,typeName:Ut.ZodUnion,...On(t)});const kl=e=>e instanceof t0?kl(e.schema):e instanceof Yo?kl(e.innerType()):e instanceof n0?[e.value]:e instanceof ru?e.options:e instanceof r0?Yn.objectValues(e.enum):e instanceof a0?kl(e._def.innerType):e instanceof Ym?[void 0]:e instanceof Xm?[null]:e instanceof Vo?[void 0,...kl(e.unwrap())]:e instanceof au?[null,...kl(e.unwrap())]:e instanceof GC||e instanceof o0?kl(e.unwrap()):e instanceof i0?kl(e._def.innerType):[];class xw extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==en.object)return Jt(n,{code:Pt.invalid_type,expected:en.object,received:n.parsedType}),En;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Jt(n,{code:Pt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),En)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const o=kl(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new xw({typeName:Ut.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...On(r)})}}function b2(e,t){const n=Nl(e),r=Nl(t);if(e===t)return{valid:!0,data:e};if(n===en.object&&r===en.object){const a=Yn.objectKeys(t),i=Yn.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const l=b2(e[s],t[s]);if(!l.valid)return{valid:!1};o[s]=l.data}return{valid:!0,data:o}}else if(n===en.array&&r===en.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],l=b2(o,s);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return n===en.date&&r===en.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Qm extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(g2(i)||g2(o))return En;const s=b2(i.value,o.value);return s.valid?((y2(i)||y2(o))&&n.dirty(),{status:n.value,value:s.data}):(Jt(r,{code:Pt.invalid_intersection_types}),En)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Qm.create=(e,t,n)=>new Qm({left:e,right:t,typeName:Ut.ZodIntersection,...On(n)});class qs extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==en.array)return Jt(r,{code:Pt.invalid_type,expected:en.array,received:r.parsedType}),En;if(r.data.length<this._def.items.length)return Jt(r,{code:Pt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),En;!this._def.rest&&r.data.length>this._def.items.length&&(Jt(r,{code:Pt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,s)=>{const l=this._def.items[s]||this._def.rest;return l?l._parse(new Hs(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ai.mergeArray(n,o)):ai.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new qs({...this._def,rest:t})}}qs.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qs({items:e,typeName:Ut.ZodTuple,rest:null,...On(t)})};class e0 extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==en.object)return Jt(r,{code:Pt.invalid_type,expected:en.object,received:r.parsedType}),En;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)a.push({key:i._parse(new Hs(r,s,r.path,s)),value:o._parse(new Hs(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?ai.mergeObjectAsync(n,a):ai.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Mn?new e0({keyType:t,valueType:n,typeName:Ut.ZodRecord,...On(r)}):new e0({keyType:zo.create(),valueType:t,typeName:Ut.ZodRecord,...On(n)})}}class dv extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==en.map)return Jt(r,{code:Pt.invalid_type,expected:en.map,received:r.parsedType}),En;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([s,l],u)=>({key:a._parse(new Hs(r,s,r.path,[u,"key"])),value:i._parse(new Hs(r,l,r.path,[u,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return En;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),s.set(u.value,d.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const l of o){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return En;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),s.set(u.value,d.value)}return{status:n.value,value:s}}}}dv.create=(e,t,n)=>new dv({valueType:t,keyType:e,typeName:Ut.ZodMap,...On(n)});class vd extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==en.set)return Jt(r,{code:Pt.invalid_type,expected:en.set,received:r.parsedType}),En;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Jt(r,{code:Pt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Jt(r,{code:Pt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const u=new Set;for(const d of l){if(d.status==="aborted")return En;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const s=[...r.data.values()].map((l,u)=>i._parse(new Hs(r,l,r.path,u)));return r.common.async?Promise.all(s).then(l=>o(l)):o(s)}min(t,n){return new vd({...this._def,minSize:{value:t,message:cn.toString(n)}})}max(t,n){return new vd({...this._def,maxSize:{value:t,message:cn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}vd.create=(e,t)=>new vd({valueType:e,minSize:null,maxSize:null,typeName:Ut.ZodSet,...On(t)});class oh extends Mn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==en.function)return Jt(n,{code:Pt.invalid_type,expected:en.function,received:n.parsedType}),En;function r(s,l){return sv({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ov(),mh].filter(u=>!!u),issueData:{code:Pt.invalid_arguments,argumentsError:l}})}function a(s,l){return sv({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ov(),mh].filter(u=>!!u),issueData:{code:Pt.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof yh){const s=this;return vi(async function(...l){const u=new eo([]),d=await s._def.args.parseAsync(l,i).catch(g=>{throw u.addIssue(r(l,g)),u}),h=await Reflect.apply(o,this,d);return await s._def.returns._def.type.parseAsync(h,i).catch(g=>{throw u.addIssue(a(h,g)),u})})}else{const s=this;return vi(function(...l){const u=s._def.args.safeParse(l,i);if(!u.success)throw new eo([r(l,u.error)]);const d=Reflect.apply(o,this,u.data),h=s._def.returns.safeParse(d,i);if(!h.success)throw new eo([a(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new oh({...this._def,args:qs.create(t).rest(fd.create())})}returns(t){return new oh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new oh({args:t||qs.create([]).rest(fd.create()),returns:n||fd.create(),typeName:Ut.ZodFunction,...On(r)})}}class t0 extends Mn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}t0.create=(e,t)=>new t0({getter:e,typeName:Ut.ZodLazy,...On(t)});class n0 extends Mn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Jt(n,{received:n.data,code:Pt.invalid_literal,expected:this._def.value}),En}return{status:"valid",value:t.data}}get value(){return this._def.value}}n0.create=(e,t)=>new n0({value:e,typeName:Ut.ZodLiteral,...On(t)});function pD(e,t){return new ru({values:e,typeName:Ut.ZodEnum,...On(t)})}class ru extends Mn{constructor(){super(...arguments),Om.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Jt(n,{expected:Yn.joinValues(r),received:n.parsedType,code:Pt.invalid_type}),En}if(lv(this,Om)||uD(this,Om,new Set(this._def.values)),!lv(this,Om).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Jt(n,{received:n.data,code:Pt.invalid_enum_value,options:r}),En}return vi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return ru.create(t,{...this._def,...n})}exclude(t,n=this._def){return ru.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Om=new WeakMap;ru.create=pD;class r0 extends Mn{constructor(){super(...arguments),jm.set(this,void 0)}_parse(t){const n=Yn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==en.string&&r.parsedType!==en.number){const a=Yn.objectValues(n);return Jt(r,{expected:Yn.joinValues(a),received:r.parsedType,code:Pt.invalid_type}),En}if(lv(this,jm)||uD(this,jm,new Set(Yn.getValidEnumValues(this._def.values))),!lv(this,jm).has(t.data)){const a=Yn.objectValues(n);return Jt(r,{received:r.data,code:Pt.invalid_enum_value,options:a}),En}return vi(t.data)}get enum(){return this._def.values}}jm=new WeakMap;r0.create=(e,t)=>new r0({values:e,typeName:Ut.ZodNativeEnum,...On(t)});class yh extends Mn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==en.promise&&n.common.async===!1)return Jt(n,{code:Pt.invalid_type,expected:en.promise,received:n.parsedType}),En;const r=n.parsedType===en.promise?n.data:Promise.resolve(n.data);return vi(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}yh.create=(e,t)=>new yh({type:e,typeName:Ut.ZodPromise,...On(t)});class Yo extends Mn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ut.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Jt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return En;const l=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return l.status==="aborted"?En:l.status==="dirty"||n.value==="dirty"?Jf(l.value):l});{if(n.value==="aborted")return En;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?En:s.status==="dirty"||n.value==="dirty"?Jf(s.value):s}}if(a.type==="refinement"){const o=s=>{const l=a.refinement(s,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?En:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?En:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!yd(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>yd(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:n.value,value:s})):o);Yn.assertNever(a)}}Yo.create=(e,t,n)=>new Yo({schema:e,typeName:Ut.ZodEffects,effect:t,...On(n)});Yo.createWithPreprocess=(e,t,n)=>new Yo({schema:t,effect:{type:"preprocess",transform:e},typeName:Ut.ZodEffects,...On(n)});class Vo extends Mn{_parse(t){return this._getType(t)===en.undefined?vi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Vo.create=(e,t)=>new Vo({innerType:e,typeName:Ut.ZodOptional,...On(t)});class au extends Mn{_parse(t){return this._getType(t)===en.null?vi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}au.create=(e,t)=>new au({innerType:e,typeName:Ut.ZodNullable,...On(t)});class a0 extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===en.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}a0.create=(e,t)=>new a0({innerType:e,typeName:Ut.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...On(t)});class i0 extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Km(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new eo(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new eo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}i0.create=(e,t)=>new i0({innerType:e,typeName:Ut.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...On(t)});class fv extends Mn{_parse(t){if(this._getType(t)!==en.nan){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.nan,received:r.parsedType}),En}return{status:"valid",value:t.data}}}fv.create=e=>new fv({typeName:Ut.ZodNaN,...On(e)});const eG=Symbol("zod_brand");class GC extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class tg extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?En:i.status==="dirty"?(n.dirty(),Jf(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?En:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new tg({in:t,out:n,typeName:Ut.ZodPipeline})}}class o0 extends Mn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(yd(a)&&(a.value=Object.freeze(a.value)),a);return Km(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}o0.create=(e,t)=>new o0({innerType:e,typeName:Ut.ZodReadonly,...On(t)});function k3(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function mD(e,t={},n){return e?gh.create().superRefine((r,a)=>{var i,o;const s=e(r);if(s instanceof Promise)return s.then(l=>{var u,d;if(!l){const h=k3(t,r),p=(d=(u=h.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...h,fatal:p})}});if(!s){const l=k3(t,r),u=(o=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...l,fatal:u})}}):gh.create()}const tG={object:Wr.lazycreate};var Ut;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ut||(Ut={}));const nG=(e,t={message:`Input not instance of ${e.name}`})=>mD(n=>n instanceof e,t),gD=zo.create,yD=tu.create,rG=fv.create,aG=nu.create,bD=Zm.create,iG=bd.create,oG=cv.create,sG=Ym.create,lG=Xm.create,cG=gh.create,uG=fd.create,dG=zl.create,fG=uv.create,hG=qo.create,pG=Wr.create,mG=Wr.strictCreate,gG=Jm.create,yG=xw.create,bG=Qm.create,vG=qs.create,wG=e0.create,_G=dv.create,xG=vd.create,SG=oh.create,EG=t0.create,CG=n0.create,kG=ru.create,AG=r0.create,TG=yh.create,A3=Yo.create,NG=Vo.create,RG=au.create,IG=Yo.createWithPreprocess,OG=tg.create,jG=()=>gD().optional(),DG=()=>yD().optional(),MG=()=>bD().optional(),PG={string:e=>zo.create({...e,coerce:!0}),number:e=>tu.create({...e,coerce:!0}),boolean:e=>Zm.create({...e,coerce:!0}),bigint:e=>nu.create({...e,coerce:!0}),date:e=>bd.create({...e,coerce:!0})},FG=En;var $=Object.freeze({__proto__:null,defaultErrorMap:mh,setErrorMap:IV,getErrorMap:ov,makeIssue:sv,EMPTY_PATH:OV,addIssueToContext:Jt,ParseStatus:ai,INVALID:En,DIRTY:Jf,OK:vi,isAborted:g2,isDirty:y2,isValid:yd,isAsync:Km,get util(){return Yn},get objectUtil(){return m2},ZodParsedType:en,getParsedType:Nl,ZodType:Mn,datetimeRegex:hD,ZodString:zo,ZodNumber:tu,ZodBigInt:nu,ZodBoolean:Zm,ZodDate:bd,ZodSymbol:cv,ZodUndefined:Ym,ZodNull:Xm,ZodAny:gh,ZodUnknown:fd,ZodNever:zl,ZodVoid:uv,ZodArray:qo,ZodObject:Wr,ZodUnion:Jm,ZodDiscriminatedUnion:xw,ZodIntersection:Qm,ZodTuple:qs,ZodRecord:e0,ZodMap:dv,ZodSet:vd,ZodFunction:oh,ZodLazy:t0,ZodLiteral:n0,ZodEnum:ru,ZodNativeEnum:r0,ZodPromise:yh,ZodEffects:Yo,ZodTransformer:Yo,ZodOptional:Vo,ZodNullable:au,ZodDefault:a0,ZodCatch:i0,ZodNaN:fv,BRAND:eG,ZodBranded:GC,ZodPipeline:tg,ZodReadonly:o0,custom:mD,Schema:Mn,ZodSchema:Mn,late:tG,get ZodFirstPartyTypeKind(){return Ut},coerce:PG,any:cG,array:hG,bigint:aG,boolean:bD,date:iG,discriminatedUnion:yG,effect:A3,enum:kG,function:SG,instanceof:nG,intersection:bG,lazy:EG,literal:CG,map:_G,nan:rG,nativeEnum:AG,never:dG,null:lG,nullable:RG,number:yD,object:pG,oboolean:MG,onumber:DG,optional:NG,ostring:jG,pipeline:OG,preprocess:IG,promise:TG,record:wG,set:xG,strictObject:mG,string:gD,symbol:oG,transformer:A3,tuple:vG,undefined:sG,union:gG,unknown:uG,void:fG,NEVER:FG,ZodIssueCode:Pt,quotelessJson:RV,ZodError:eo});function LG({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:o}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:o});break}case"developer":{r.push({role:"developer",content:o});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=n;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{if(o.length===1&&o[0].type==="text"){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map((s,l)=>{var u,d,h,p;switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(u=s.mimeType)!=null?u:"image/jpeg"};base64,${ph(s.image)}`,detail:(h=(d=s.providerMetadata)==null?void 0:d.openai)==null?void 0:h.imageDetail}};case"file":{if(s.data instanceof URL)throw new Cr({functionality:"'File content parts with URL data' functionality not supported."});switch(s.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:s.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:s.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(p=s.filename)!=null?p:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${s.data}`}};default:throw new Cr({functionality:`File content part type ${s.mimeType} in user messages`})}}}})});break}case"assistant":{let s="";const l=[];for(const u of o)switch(u.type){case"text":{s+=u.text;break}case"tool-call":{l.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)}});break}}if(t){if(l.length>1)throw new Cr({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:s,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:s,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const s of o)t?r.push({role:"function",name:s.toolName,content:JSON.stringify(s.result)}):r.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result)});break}default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return{messages:r,warnings:a}}function T3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function hv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var WC=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),iu=oD({errorSchema:WC,errorToMessage:e=>e.error.message});function pv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function $G({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice;if(t){const u=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):u.push({name:h.name,description:h.description,parameters:h.parameters});if(o==null)return{functions:u,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:u,function_call:void 0,toolWarnings:i};case"required":throw new Cr({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:u,function_call:{name:o.toolName},toolWarnings:i}}}const s=[];for(const u of a)u.type==="provider-defined"?i.push({type:"unsupported-tool",tool:u}):s.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters,strict:n?!0:void 0}});if(o==null)return{tools:s,tool_choice:void 0,toolWarnings:i};const l=o.type;switch(l){case"auto":case"none":case"required":return{tools:s,tool_choice:l,toolWarnings:i};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const u=l;throw new Cr({functionality:`Unsupported tool choice type: ${u}`})}}}var BG=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:v2(this.modelId)}get defaultObjectGenerationMode(){return HG(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var p,g,v,b,_,x,S,E;const C=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const R=this.settings.useLegacyFunctionCalling;if(R&&this.settings.parallelToolCalls===!0)throw new Cr({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(R&&this.supportsStructuredOutputs)throw new Cr({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:j,warnings:O}=LG({prompt:t,useLegacyFunctionCalling:R,systemMessageMode:qG(this.modelId)});k.push(...O);const L={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:(p=u.name)!=null?p:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:d,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(_=h==null?void 0:h.openai)==null?void 0:_.prediction,reasoning_effort:(S=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:j};switch(v2(this.modelId)&&(L.temperature!=null&&(L.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),L.top_p!=null&&(L.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),L.frequency_penalty!=null&&(L.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),L.presence_penalty!=null&&(L.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),L.logit_bias!=null&&(L.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),L.logprobs!=null&&(L.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),L.top_logprobs!=null&&(L.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),L.max_tokens!=null&&(L.max_completion_tokens==null&&(L.max_completion_tokens=L.max_tokens),L.max_tokens=void 0)),C){case"regular":{const{tools:z,tool_choice:Y,functions:F,function_call:K,toolWarnings:q}=$G({mode:e,useLegacyFunctionCalling:R,structuredOutputs:this.supportsStructuredOutputs});return{args:{...L,tools:z,tool_choice:Y,functions:F,function_call:K},warnings:[...k,...q]}}case"object-json":return{args:{...L,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:R?{...L,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...L,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const z=C;throw new Error(`Unsupported type: ${z}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,l;const{args:u,warnings:d}=this.getArgs(e),{responseHeaders:h,value:p,rawValue:g}=await Zo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Us(this.config.headers(),e.headers),body:u,failedResponseHandler:iu,successfulResponseHandler:Nd(zG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=u,_=p.choices[0],x=(t=p.usage)==null?void 0:t.completion_tokens_details,S=(n=p.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=_.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&_.message.function_call?[{toolCallType:"function",toolCallId:js(),toolName:_.message.function_call.name,args:_.message.function_call.arguments}]:(a=_.message.tool_calls)==null?void 0:a.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:js(),toolName:C.function.name,args:C.function.arguments}}),finishReason:hv(_.finish_reason),usage:{promptTokens:(o=(i=p.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(l=(s=p.usage)==null?void 0:s.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(u)},response:pv(p),warnings:d,logprobs:T3(_.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const S of b.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),x.enqueue({type:"tool-call",...S});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Zo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Us(this.config.headers(),e.headers),body:r,failedResponseHandler:iu,successfulResponseHandler:VC(UG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...s}=t,l=[];let u="unknown",d={promptTokens:void 0,completionTokens:void 0},h,p=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,_){var x,S,E,C,k,R,j,O,L,z,Y,F;if(!b.success){u="error",_.enqueue({type:"error",error:b.error});return}const K=b.value;if("error"in K){u="error",_.enqueue({type:"error",error:K.error});return}if(p&&(p=!1,_.enqueue({type:"response-metadata",...pv(K)})),K.usage!=null){const{prompt_tokens:X,completion_tokens:ae,prompt_tokens_details:U,completion_tokens_details:ee}=K.usage;d={promptTokens:X??void 0,completionTokens:ae??void 0},(ee==null?void 0:ee.reasoning_tokens)!=null&&(v.openai.reasoningTokens=ee==null?void 0:ee.reasoning_tokens),(ee==null?void 0:ee.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=ee==null?void 0:ee.accepted_prediction_tokens),(ee==null?void 0:ee.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=ee==null?void 0:ee.rejected_prediction_tokens),(U==null?void 0:U.cached_tokens)!=null&&(v.openai.cachedPromptTokens=U==null?void 0:U.cached_tokens)}const q=K.choices[0];if((q==null?void 0:q.finish_reason)!=null&&(u=hv(q.finish_reason)),(q==null?void 0:q.delta)==null)return;const fe=q.delta;fe.content!=null&&_.enqueue({type:"text-delta",textDelta:fe.content});const te=T3(q==null?void 0:q.logprobs);te!=null&&te.length&&(h===void 0&&(h=[]),h.push(...te));const re=g&&fe.function_call!=null?[{type:"function",id:js(),function:fe.function_call,index:0}]:fe.tool_calls;if(re!=null)for(const X of re){const ae=X.index;if(l[ae]==null){if(X.type!=="function")throw new ih({data:X,message:"Expected 'function' type."});if(X.id==null)throw new ih({data:X,message:"Expected 'id' to be a string."});if(((x=X.function)==null?void 0:x.name)==null)throw new ih({data:X,message:"Expected 'function.name' to be a string."});l[ae]={id:X.id,type:"function",function:{name:X.function.name,arguments:(S=X.function.arguments)!=null?S:""},hasFinished:!1};const ee=l[ae];((E=ee.function)==null?void 0:E.name)!=null&&((C=ee.function)==null?void 0:C.arguments)!=null&&(ee.function.arguments.length>0&&_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ee.id,toolName:ee.function.name,argsTextDelta:ee.function.arguments}),E3(ee.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=ee.id)!=null?k:js(),toolName:ee.function.name,args:ee.function.arguments}),ee.hasFinished=!0));continue}const U=l[ae];U.hasFinished||(((R=X.function)==null?void 0:R.arguments)!=null&&(U.function.arguments+=(O=(j=X.function)==null?void 0:j.arguments)!=null?O:""),_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:U.id,toolName:U.function.name,argsTextDelta:(L=X.function.arguments)!=null?L:""}),((z=U.function)==null?void 0:z.name)!=null&&((Y=U.function)==null?void 0:Y.arguments)!=null&&E3(U.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(F=U.id)!=null?F:js(),toolName:U.function.name,args:U.function.arguments}),U.hasFinished=!0))}},flush(b){var _,x;b.enqueue({type:"finish",finishReason:u,logprobs:h,usage:{promptTokens:(_=d.promptTokens)!=null?_:NaN,completionTokens:(x=d.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},vD=$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish(),prompt_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),completion_tokens_details:$.object({reasoning_tokens:$.number().nullish(),accepted_prediction_tokens:$.number().nullish(),rejected_prediction_tokens:$.number().nullish()}).nullish()}).nullish(),zG=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),function_call:$.object({arguments:$.string(),name:$.string()}).nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullish()})),usage:vD}),UG=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),function_call:$.object({name:$.string().optional(),arguments:$.string().optional()}).nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()})),usage:vD}),WC]);function v2(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function HG(e){return e.startsWith("gpt-4o-audio-preview")}function qG(e){var t,n;return v2(e)?(n=(t=VG[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var VG={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function GG({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new Al({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Cr({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Cr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new Cr({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function N3(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var WG=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h}){var p;const g=e.type,v=[];o!=null&&v.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:_}=GG({prompt:n,inputFormat:t}),x=[..._??[],...u??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:l,seed:h,prompt:b,stop:x.length>0?x:void 0};switch(g){case"regular":{if((p=e.tools)!=null&&p.length)throw new Cr({functionality:"tools"});if(e.toolChoice)throw new Cr({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new Cr({functionality:"object-json mode"});case"object-tool":throw new Cr({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Zo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Us(this.config.headers(),e.headers),body:t,failedResponseHandler:iu,successfulResponseHandler:Nd(KG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,l=a.choices[0];return{text:l.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:hv(l.finish_reason),logprobs:N3(l.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r,body:i},response:pv(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Zo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Us(this.config.headers(),e.headers),body:r,failedResponseHandler:iu,successfulResponseHandler:VC(ZG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(p,g){if(!p.success){l="error",g.enqueue({type:"error",error:p.error});return}const v=p.value;if("error"in v){l="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...pv(v)})),v.usage!=null&&(u={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=hv(b.finish_reason)),(b==null?void 0:b.text)!=null&&g.enqueue({type:"text-delta",textDelta:b.text});const _=N3(b==null?void 0:b.logprobs);_!=null&&_.length&&(d===void 0&&(d=[]),d.push(..._))},flush(p){p.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},KG=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()})}),ZG=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),WC]),YG=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new UC({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Zo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Us(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:iu,successfulResponseHandler:Nd(XG),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},XG=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),JG={"dall-e-3":1,"dall-e-2":10},QG=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:JG[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var l,u,d,h;const p=[];r!=null&&p.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&p.push({type:"unsupported-setting",setting:"seed"});const g=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:v,responseHeaders:b}=await Zo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Us(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:iu,successfulResponseHandler:Nd(eW),abortSignal:s,fetch:this.config.fetch});return{images:v.data.map(_=>_.b64_json),warnings:p,response:{timestamp:g,modelId:this.modelId,headers:b}}}},eW=$.object({data:$.array($.object({b64_json:$.string()}))});function tW({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=t;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{n.push({role:"user",content:i.map((o,s)=>{var l,u,d,h;switch(o.type){case"text":return{type:"input_text",text:o.text};case"image":return{type:"input_image",image_url:o.image instanceof URL?o.image.toString():`data:${(l=o.mimeType)!=null?l:"image/jpeg"};base64,${ph(o.image)}`,detail:(d=(u=o.providerMetadata)==null?void 0:u.openai)==null?void 0:d.imageDetail};case"file":{if(o.data instanceof URL)throw new Cr({functionality:"File URLs in user messages"});switch(o.mimeType){case"application/pdf":return{type:"input_file",filename:(h=o.filename)!=null?h:`part-${s}.pdf`,file_data:`data:application/pdf;base64,${o.data}`};default:throw new Cr({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const o of i)switch(o.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:o.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:o.toolCallId,name:o.toolName,arguments:JSON.stringify(o.args)});break}}break}case"tool":{for(const o of i)n.push({type:"function_call_output",call_id:o.toolCallId,output:JSON.stringify(o.result)});break}default:{const o=a;throw new Error(`Unsupported role: ${o}`)}}return{messages:n,warnings:r}}function R3({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function nW({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const l of r)switch(l.type){case"function":o.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":o.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:l});break}break;default:a.push({type:"unsupported-tool",tool:l});break}if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:o,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:o,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const l=s;throw new Cr({functionality:`Unsupported tool choice type: ${l}`})}}}var rW=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,seed:l,prompt:u,providerMetadata:d,responseFormat:h}){var p,g,v;const b=[],_=vW(this.modelId),x=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),o!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),s!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=tW({prompt:u,systemMessageMode:_.systemMessageMode});b.push(...E);const C=CV({provider:"openai",providerOptions:d,schema:wW}),k=(p=C==null?void 0:C.strictSchemas)!=null?p:!0,R={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,..._.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},..._.requiredAutoTruncation&&{truncation:"auto"}};switch(_.isReasoningModel&&(R.temperature!=null&&(R.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),R.top_p!=null&&(R.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:j,tool_choice:O,toolWarnings:L}=nW({mode:e,strict:k});return{args:{...R,tools:j,tool_choice:O},warnings:[...b,...L]}}case"object-json":return{args:{...R,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...R,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:b};default:{const j=x;throw new Error(`Unsupported type: ${j}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=this.getArgs(e),{responseHeaders:l,value:u,rawValue:d}=await Zo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Us(this.config.headers(),e.headers),body:o,failedResponseHandler:iu,successfulResponseHandler:Nd($.object({id:$.string(),created_at:$.number(),model:$.string(),output:$.array($.discriminatedUnion("type",[$.object({type:$.literal("message"),role:$.literal("assistant"),content:$.array($.object({type:$.literal("output_text"),text:$.string(),annotations:$.array($.object({type:$.literal("url_citation"),start_index:$.number(),end_index:$.number(),url:$.string(),title:$.string()}))}))}),$.object({type:$.literal("function_call"),call_id:$.string(),name:$.string(),arguments:$.string()}),$.object({type:$.literal("web_search_call")}),$.object({type:$.literal("computer_call")}),$.object({type:$.literal("reasoning")})])),incomplete_details:$.object({reason:$.string()}).nullable(),usage:wD})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),p=u.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(v=>{var b,_,x;return{sourceType:"url",id:(x=(_=(b=this.config).generateId)==null?void 0:_.call(b))!=null?x:js(),url:v.url,title:v.title}})),finishReason:R3({finishReason:(t=u.incomplete_details)==null?void 0:t.reason,hasToolCalls:p.length>0}),toolCalls:p.length>0?p:void 0,usage:{promptTokens:u.usage.input_tokens,completionTokens:u.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:l,body:d},request:{body:JSON.stringify(o)},response:{id:u.id,timestamp:new Date(u.created_at*1e3),modelId:u.model},providerMetadata:{openai:{responseId:u.id,cachedPromptTokens:(r=(n=u.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=u.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:s}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Zo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Us(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:iu,successfulResponseHandler:VC(dW),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let o="unknown",s=NaN,l=NaN,u=null,d=null,h=null;const p={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k,R,j;if(!v.success){o="error",b.enqueue({type:"error",error:v.error});return}const O=v.value;if(yW(O))O.item.type==="function_call"&&(p[O.output_index]={toolName:O.item.name,toolCallId:O.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:O.item.call_id,toolName:O.item.name,argsTextDelta:O.item.arguments}));else if(gW(O)){const L=p[O.output_index];L!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:L.toolCallId,toolName:L.toolName,argsTextDelta:O.delta})}else mW(O)?(h=O.response.id,b.enqueue({type:"response-metadata",id:O.response.id,timestamp:new Date(O.response.created_at*1e3),modelId:O.response.model})):fW(O)?b.enqueue({type:"text-delta",textDelta:O.delta}):hW(O)&&O.item.type==="function_call"?(p[O.output_index]=void 0,g=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:O.item.call_id,toolName:O.item.name,args:O.item.arguments})):pW(O)?(o=R3({finishReason:(_=O.response.incomplete_details)==null?void 0:_.reason,hasToolCalls:g}),s=O.response.usage.input_tokens,l=O.response.usage.output_tokens,u=(S=(x=O.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?S:u,d=(C=(E=O.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:d):bW(O)&&b.enqueue({type:"source",source:{sourceType:"url",id:(j=(R=(k=i.config).generateId)==null?void 0:R.call(k))!=null?j:js(),url:O.annotation.url,title:O.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:o,usage:{promptTokens:s,completionTokens:l},...(u!=null||d!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:u,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},wD=$.object({input_tokens:$.number(),input_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),output_tokens:$.number(),output_tokens_details:$.object({reasoning_tokens:$.number().nullish()}).nullish()}),aW=$.object({type:$.literal("response.output_text.delta"),delta:$.string()}),iW=$.object({type:$.enum(["response.completed","response.incomplete"]),response:$.object({incomplete_details:$.object({reason:$.string()}).nullish(),usage:wD})}),oW=$.object({type:$.literal("response.created"),response:$.object({id:$.string(),created_at:$.number(),model:$.string()})}),sW=$.object({type:$.literal("response.output_item.done"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string(),status:$.literal("completed")})])}),lW=$.object({type:$.literal("response.function_call_arguments.delta"),item_id:$.string(),output_index:$.number(),delta:$.string()}),cW=$.object({type:$.literal("response.output_item.added"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string()})])}),uW=$.object({type:$.literal("response.output_text.annotation.added"),annotation:$.object({type:$.literal("url_citation"),url:$.string(),title:$.string()})}),dW=$.union([aW,iW,oW,sW,lW,cW,uW,$.object({type:$.string()}).passthrough()]);function fW(e){return e.type==="response.output_text.delta"}function hW(e){return e.type==="response.output_item.done"}function pW(e){return e.type==="response.completed"||e.type==="response.incomplete"}function mW(e){return e.type==="response.created"}function gW(e){return e.type==="response.function_call_arguments.delta"}function yW(e){return e.type==="response.output_item.added"}function bW(e){return e.type==="response.output_text.annotation.added"}function vW(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var wW=$.object({metadata:$.any().nullish(),parallelToolCalls:$.boolean().nullish(),previousResponseId:$.string().nullish(),store:$.boolean().nullish(),user:$.string().nullish(),reasoningEffort:$.string().nullish(),strictSchemas:$.boolean().nullish(),instructions:$.string().nullish()}),_W=$.object({});function xW({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:_W}}var SW={webSearchPreview:xW};function _D(e={}){var t,n,r;const a=(t=lD(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",o=(r=e.name)!=null?r:"openai",s=()=>({Authorization:`Bearer ${bV({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(b,_={})=>new BG(b,_,{provider:`${o}.chat`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),u=(b,_={})=>new WG(b,_,{provider:`${o}.completion`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),d=(b,_={})=>new YG(b,_,{provider:`${o}.embedding`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),h=(b,_={})=>new QG(b,_,{provider:`${o}.image`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),p=(b,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return b==="gpt-3.5-turbo-instruct"?u(b,_):l(b,_)},g=b=>new rW(b,{provider:`${o}.responses`,url:({path:_})=>`${a}${_}`,headers:s,fetch:e.fetch}),v=function(b,_){return p(b,_)};return v.languageModel=p,v.chat=l,v.completion=u,v.responses=g,v.embedding=d,v.textEmbedding=d,v.textEmbeddingModel=d,v.image=h,v.imageModel=h,v.tools=SW,v}_D({compatibility:"strict"});var xD="vercel.ai.error",EW=Symbol.for(xD),SD,CW=class ED extends Error{constructor({name:t,message:n,cause:r}){super(n),this[SD]=!0,this.name=t,this.cause=r}static isInstance(t){return ED.hasMarker(t,xD)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};SD=EW;var ii=CW,CD="AI_APICallError",kD=`vercel.ai.error.${CD}`,kW=Symbol.for(kD),AD,Il=class extends ii{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:CD,message:t,cause:s}),this[AD]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=u}static isInstance(t){return ii.hasMarker(t,kD)}};AD=kW;var TD="AI_EmptyResponseBodyError",ND=`vercel.ai.error.${TD}`,AW=Symbol.for(ND),RD,TW=class extends ii{constructor({message:t="Empty response body"}={}){super({name:TD,message:t}),this[RD]=!0}static isInstance(t){return ii.hasMarker(t,ND)}};RD=AW;function ID(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var OD="AI_InvalidArgumentError",jD=`vercel.ai.error.${OD}`,NW=Symbol.for(jD),DD,MD=class extends ii{constructor({message:t,cause:n,argument:r}){super({name:OD,message:t,cause:n}),this[DD]=!0,this.argument=r}static isInstance(t){return ii.hasMarker(t,jD)}};DD=NW;var PD="AI_JSONParseError",FD=`vercel.ai.error.${PD}`,RW=Symbol.for(FD),LD,mv=class extends ii{constructor({text:t,cause:n}){super({name:PD,message:`JSON parsing failed: Text: ${t}.
Error message: ${ID(n)}`,cause:n}),this[LD]=!0,this.text=t}static isInstance(t){return ii.hasMarker(t,FD)}};LD=RW;var $D="AI_LoadAPIKeyError",BD=`vercel.ai.error.${$D}`,IW=Symbol.for(BD),zD,ob=class extends ii{constructor({message:t}){super({name:$D,message:t}),this[zD]=!0}static isInstance(t){return ii.hasMarker(t,BD)}};zD=IW;var UD="AI_TooManyEmbeddingValuesForCallError",HD=`vercel.ai.error.${UD}`,OW=Symbol.for(HD),qD,jW=class extends ii{constructor(e){super({name:UD,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[qD]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return ii.hasMarker(e,HD)}};qD=OW;var VD="AI_TypeValidationError",GD=`vercel.ai.error.${VD}`,DW=Symbol.for(GD),WD,MW=class w2 extends ii{constructor({value:t,cause:n}){super({name:VD,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${ID(n)}`,cause:n}),this[WD]=!0,this.value=t}static isInstance(t){return ii.hasMarker(t,GD)}static wrap({value:t,cause:n}){return w2.isInstance(n)&&n.value===t?n:new w2({value:t,cause:n})}};WD=DW;var gv=MW,KD="AI_UnsupportedFunctionalityError",ZD=`vercel.ai.error.${KD}`,PW=Symbol.for(ZD),YD,Vb=class extends ii{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:KD,message:n}),this[YD]=!0,this.functionality=t}static isInstance(t){return ii.hasMarker(t,ZD)}};YD=PW;let FW=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var LW={};function _2(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function $W(){let e="",t,n=[],r,a;function i(l,u){if(l===""){o(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){s(l,"");return}const h=l.slice(0,d),p=d+1,g=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);s(h,g)}function o(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=BW(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],u)},flush(l){i(e,l),o(l)}})}function BW(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Sw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var zW=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=FW(n,t);if(e==null)return a;if(n.includes(r))throw new MD({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},UW=zW();function HW(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Zx(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function qW({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new ob({message:`${r} API key must be a string.`});if(typeof Jr>"u")throw new ob({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=LW[t],e==null)throw new ob({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new ob({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var x2=Symbol.for("vercel.ai.validator");function VW(e){return{[x2]:!0,validate:e}}function GW(e){return typeof e=="object"&&e!==null&&x2 in e&&e[x2]===!0&&"validate"in e}function WW(e){return GW(e)?e:KW(e)}function KW(e){return VW(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function ZW({value:e,schema:t}){const n=KC({value:e,schema:t});if(!n.success)throw gv.wrap({value:e,cause:n.error});return n.value}function KC({value:e,schema:t}){const n=WW(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:gv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:gv.wrap({value:e,cause:r})}}}function YW({text:e,schema:t}){try{const n=is.parse(e);return t==null?n:ZW({value:n,schema:t})}catch(n){throw mv.isInstance(n)||gv.isInstance(n)?n:new mv({text:e,cause:n})}}function XD({text:e,schema:t}){try{const n=is.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=KC({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:mv.isInstance(n)?n:new mv({text:e,cause:n})}}}function XW({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=KC({value:t[e],schema:n});if(!r.success)throw new MD({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var JW=()=>globalThis.fetch,S2=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>QW({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),QW=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=JW()})=>{try{const s=await o(e,{method:"POST",headers:HW(t),body:n.content,signal:i}),l=Sw(s);if(!s.ok){let u;try{u=await a({response:s,url:e,requestBodyValues:n.values})}catch(d){throw Zx(d)||Il.isInstance(d)?d:new Il({message:"Failed to process error response",cause:d,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(Zx(u)||Il.isInstance(u))?u:new Il({message:"Failed to process successful response",cause:u,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(s){if(Zx(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const l=s.cause;if(l!=null)throw new Il({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}};async function E2(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var eK=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Sw(r);if(o.trim()==="")return{responseHeaders:s,value:new Il({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const l=YW({text:o,schema:e});return{responseHeaders:s,value:new Il({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:s,value:new Il({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},tK=e=>async({response:t})=>{const n=Sw(t);if(t.body==null)throw new TW({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough($W()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(XD({text:r,schema:e}))}}))}},JD=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=XD({text:a,schema:e}),o=Sw(t);if(!i.success)throw new Il({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:nK}=globalThis;function rK(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return nK(t)}function aK(e){return e==null?void 0:e.replace(/\/$/,"")}function vo(e){if(iK(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:o,anyOf:s,oneOf:l,format:u,const:d,minLength:h,enum:p}=e,g={};if(n&&(g.description=n),r&&(g.required=r),u&&(g.format=u),d!==void 0&&(g.enum=[d]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),p!==void 0&&(g.enum=p),a!=null&&(g.properties=Object.entries(a).reduce((v,[b,_])=>(v[b]=vo(_),v),{})),i&&(g.items=Array.isArray(i)?i.map(vo):vo(i)),o&&(g.allOf=o.map(vo)),s)if(s.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=s.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=vo(v[0]);typeof b=="object"&&(g.nullable=!0,Object.assign(g,b))}else g.anyOf=v.map(vo),g.nullable=!0}else g.anyOf=s.map(vo);return l&&(g.oneOf=l.map(vo)),h!==void 0&&(g.minLength=h),g}function iK(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function oK(e){var t,n;const r=[],a=[];let i=!0;for(const{role:o,content:s}of e)switch(o){case"system":{if(!i)throw new Vb({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break}case"user":{i=!1;const l=[];for(const u of s)switch(u.type){case"text":{l.push({text:u.text});break}case"image":{l.push(u.image instanceof URL?{fileData:{mimeType:(t=u.mimeType)!=null?t:"image/jpeg",fileUri:u.image.toString()}}:{inlineData:{mimeType:(n=u.mimeType)!=null?n:"image/jpeg",data:rK(u.image)}});break}case"file":{l.push(u.data instanceof URL?{fileData:{mimeType:u.mimeType,fileUri:u.data.toString()}}:{inlineData:{mimeType:u.mimeType,data:u.data}});break}}a.push({role:"user",parts:l});break}case"assistant":{i=!1,a.push({role:"model",parts:s.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new Vb({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new Vb({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:s.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function I3(e){return e.includes("/")?e:`models/${e}`}var sK=$.object({error:$.object({code:$.number().nullable(),message:$.string(),status:$.string()})}),C2=eK({errorSchema:sK,errorToMessage:e=>e.error.message});function lK(e,t,n,r){var a,i;const o=(a=e.tools)!=null&&a.length?e.tools:void 0,s=[],l=r.includes("gemini-2"),u=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!u||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:s};if(o==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const d=[];for(const g of o)g.type==="provider-defined"?s.push({type:"unsupported-tool",tool:g}):d.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:vo(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:s};const p=h.type;switch(p){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:s};default:{const g=p;throw new Vb({functionality:`Unsupported tool choice type: ${g}`})}}}function O3({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var cK=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var p,g;const v=e.type,b=[],_=XW({provider:"google",providerOptions:h,schema:hK}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:o,presencePenalty:s,stopSequences:l,seed:d,responseMimeType:(u==null?void 0:u.type)==="json"?"application/json":void 0,responseSchema:(u==null?void 0:u.type)==="json"&&u.schema!=null&&this.supportsStructuredOutputs?vo(u.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:_==null?void 0:_.responseModalities},{contents:S,systemInstruction:E}=oK(t);switch(v){case"regular":{const{tools:C,toolConfig:k,toolWarnings:R}=lK(e,(p=this.settings.useSearchGrounding)!=null?p:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...b,...R]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?vo(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:x,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:vo(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=await this.getArgs(e),l=JSON.stringify(o),u=_2(await E2(this.config.headers),e.headers),{responseHeaders:d,value:h,rawValue:p}=await S2({url:`${this.config.baseURL}/${I3(this.modelId)}:generateContent`,headers:u,body:o,failedResponseHandler:C2,successfulResponseHandler:JD(dK),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=o,b=h.candidates[0],_=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,x=j3({parts:_,generateId:this.config.generateId}),S=h.usageMetadata;return{text:D3(_),files:(t=M3(_))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:O3({finishReason:b.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:d,body:p},warnings:s,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:P3({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=_2(await E2(this.config.headers),e.headers),{responseHeaders:i,value:o}=await S2({url:`${this.config.baseURL}/${I3(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:C2,successfulResponseHandler:tK(fK),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...l}=t;let u="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const p=this.config.generateId;let g=!1;return{stream:o.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k;if(!v.success){b.enqueue({type:"error",error:v.error});return}const R=v.value,j=R.usageMetadata;j!=null&&(d={promptTokens:(_=j.promptTokenCount)!=null?_:NaN,completionTokens:(x=j.candidatesTokenCount)!=null?x:NaN});const O=(S=R.candidates)==null?void 0:S[0];if(O==null)return;const L=O.content;if(L!=null){const z=D3(L.parts);z!=null&&b.enqueue({type:"text-delta",textDelta:z});const Y=M3(L.parts);if(Y!=null)for(const K of Y)b.enqueue({type:"file",mimeType:K.inlineData.mimeType,data:K.inlineData.data});const F=j3({parts:L.parts,generateId:p});if(F!=null)for(const K of F)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:K.toolCallId,toolName:K.toolName,argsTextDelta:K.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:K.toolCallId,toolName:K.toolName,args:K.args}),g=!0}if(O.finishReason!=null){u=O3({finishReason:O.finishReason,hasToolCalls:g});const z=(E=P3({groundingMetadata:O.groundingMetadata,generateId:p}))!=null?E:[];for(const Y of z)b.enqueue({type:"source",source:Y});h={google:{groundingMetadata:(C=O.groundingMetadata)!=null?C:null,safetyRatings:(k=O.safetyRatings)!=null?k:null}}}},flush(v){v.enqueue({type:"finish",finishReason:u,usage:d,providerMetadata:h})}})),rawCall:{rawPrompt:s,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function j3({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function D3(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function M3(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function P3({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var QD=$.object({role:$.string(),parts:$.array($.union([$.object({text:$.string()}),$.object({functionCall:$.object({name:$.string(),args:$.unknown()})}),$.object({inlineData:$.object({mimeType:$.string(),data:$.string()})})])).nullish()}),uK=$.object({web:$.object({uri:$.string(),title:$.string()}).nullish(),retrievedContext:$.object({uri:$.string(),title:$.string()}).nullish()}),eM=$.object({webSearchQueries:$.array($.string()).nullish(),retrievalQueries:$.array($.string()).nullish(),searchEntryPoint:$.object({renderedContent:$.string()}).nullish(),groundingChunks:$.array(uK).nullish(),groundingSupports:$.array($.object({segment:$.object({startIndex:$.number().nullish(),endIndex:$.number().nullish(),text:$.string().nullish()}),segment_text:$.string().nullish(),groundingChunkIndices:$.array($.number()).nullish(),supportChunkIndices:$.array($.number()).nullish(),confidenceScores:$.array($.number()).nullish(),confidenceScore:$.array($.number()).nullish()})).nullish(),retrievalMetadata:$.union([$.object({webDynamicRetrievalScore:$.number()}),$.object({})]).nullish()}),tM=$.object({category:$.string(),probability:$.string(),probabilityScore:$.number().nullish(),severity:$.string().nullish(),severityScore:$.number().nullish(),blocked:$.boolean().nullish()}),dK=$.object({candidates:$.array($.object({content:QD.nullish().or($.object({}).strict()),finishReason:$.string().nullish(),safetyRatings:$.array(tM).nullish(),groundingMetadata:eM.nullish()})),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),fK=$.object({candidates:$.array($.object({content:QD.nullish(),finishReason:$.string().nullish(),safetyRatings:$.array(tM).nullish(),groundingMetadata:eM.nullish()})).nullish(),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),hK=$.object({responseModalities:$.array($.enum(["TEXT","IMAGE"])).nullish()}),pK=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new jW({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=_2(await E2(this.config.headers),t),{responseHeaders:a,value:i}=await S2({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:C2,successfulResponseHandler:JD(mK),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:a}}}},mK=$.object({embeddings:$.array($.object({values:$.array($.number())}))});function gK(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function nM(e={}){var t;const n=(t=aK(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":qW({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(s,l={})=>{var u;return new cK(s,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(u=e.generateId)!=null?u:UW,isSupportedUrl:gK,fetch:e.fetch})},i=(s,l={})=>new pK(s,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),o=function(s,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(s,l)};return o.languageModel=a,o.chat=a,o.generativeAI=a,o.embedding=i,o.textEmbedding=i,o.textEmbeddingModel=i,o}nM();var rM="vercel.ai.error",yK=Symbol.for(rM),aM,bK=class iM extends Error{constructor({name:t,message:n,cause:r}){super(n),this[aM]=!0,this.name=t,this.cause=r}static isInstance(t){return iM.hasMarker(t,rM)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};aM=yK;var La=bK,oM="AI_APICallError",sM=`vercel.ai.error.${oM}`,vK=Symbol.for(sM),lM,Ol=class extends La{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:oM,message:e,cause:o}),this[lM]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=s,this.data=l}static isInstance(e){return La.hasMarker(e,sM)}};lM=vK;var cM="AI_EmptyResponseBodyError",uM=`vercel.ai.error.${cM}`,wK=Symbol.for(uM),dM,_K=class extends La{constructor({message:e="Empty response body"}={}){super({name:cM,message:e}),this[dM]=!0}static isInstance(e){return La.hasMarker(e,uM)}};dM=wK;function fM(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var hM="AI_InvalidArgumentError",pM=`vercel.ai.error.${hM}`,xK=Symbol.for(pM),mM,SK=class extends La{constructor({message:t,cause:n,argument:r}){super({name:hM,message:t,cause:n}),this[mM]=!0,this.argument=r}static isInstance(t){return La.hasMarker(t,pM)}};mM=xK;var gM="AI_InvalidPromptError",yM=`vercel.ai.error.${gM}`,EK=Symbol.for(yM),bM,CK=class extends La{constructor({prompt:e,message:t,cause:n}){super({name:gM,message:`Invalid prompt: ${t}`,cause:n}),this[bM]=!0,this.prompt=e}static isInstance(e){return La.hasMarker(e,yM)}};bM=EK;var vM="AI_InvalidResponseDataError",wM=`vercel.ai.error.${vM}`,kK=Symbol.for(wM),_M,Yx=class extends La{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:vM,message:t}),this[_M]=!0,this.data=e}static isInstance(e){return La.hasMarker(e,wM)}};_M=kK;var xM="AI_JSONParseError",SM=`vercel.ai.error.${xM}`,AK=Symbol.for(SM),EM,yv=class extends La{constructor({text:e,cause:t}){super({name:xM,message:`JSON parsing failed: Text: ${e}.
Error message: ${fM(t)}`,cause:t}),this[EM]=!0,this.text=e}static isInstance(e){return La.hasMarker(e,SM)}};EM=AK;var CM="AI_LoadAPIKeyError",kM=`vercel.ai.error.${CM}`,TK=Symbol.for(kM),AM,sb=class extends La{constructor({message:e}){super({name:CM,message:e}),this[AM]=!0}static isInstance(e){return La.hasMarker(e,kM)}};AM=TK;var TM="AI_TypeValidationError",NM=`vercel.ai.error.${TM}`,NK=Symbol.for(NM),RM,RK=class k2 extends La{constructor({value:t,cause:n}){super({name:TM,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${fM(n)}`,cause:n}),this[RM]=!0,this.value=t}static isInstance(t){return La.hasMarker(t,NM)}static wrap({value:t,cause:n}){return k2.isInstance(n)&&n.value===t?n:new k2({value:t,cause:n})}};RM=NK;var bv=RK,IM="AI_UnsupportedFunctionalityError",OM=`vercel.ai.error.${IM}`,IK=Symbol.for(OM),jM,_o=class extends La{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:IM,message:t}),this[jM]=!0,this.functionality=e}static isInstance(e){return La.hasMarker(e,OM)}};jM=IK;let OK=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},F3=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function Xx(e){}function jK(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=Xx,onError:n=Xx,onRetry:r=Xx,onComment:a}=e;let i="",o=!0,s,l="",u="";function d(b){const _=o?b.replace(/^\xEF\xBB\xBF/,""):b,[x,S]=DK(`${i}${_}`);for(const E of x)h(E);i=S,o=!1}function h(b){if(b===""){g();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const _=b.indexOf(":");if(_!==-1){const x=b.slice(0,_),S=b[_+1]===" "?2:1,E=b.slice(_+S);p(x,E,b);return}p(b,"",b)}function p(b,_,x){switch(b){case"event":u=_;break;case"data":l=`${l}${_}
`;break;case"id":s=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):n(new F3(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:x}));break;default:n(new F3(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:_,line:x}));break}}function g(){l.length>0&&t({id:s,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),s=void 0,l="",u=""}function v(b={}){i&&b.consume&&h(i),o=!0,s=void 0,l="",u="",i=""}return{feed:d,reset:v}}function DK(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let o=-1;if(a!==-1&&i!==-1?o=Math.min(a,i):a!==-1?o=a:i!==-1&&(o=i),o===-1){n=e.slice(r);break}else{const s=e.slice(r,o);t.push(s),r=o+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class MK extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=jK({onEvent:o=>{i.enqueue(o)},onError(o){t==="terminate"?i.error(o):typeof t=="function"&&t(o)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var PK={};function vv(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Ew(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var FK=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=OK(n,t);if(e==null)return a;if(n.includes(r))throw new SK({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},lb=FK();function LK(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Jx(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function $K({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new sb({message:`${r} API key must be a string.`});if(typeof Jr>"u")throw new sb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=PK[t],e==null)throw new sb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new sb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var A2=Symbol.for("vercel.ai.validator");function BK(e){return{[A2]:!0,validate:e}}function zK(e){return typeof e=="object"&&e!==null&&A2 in e&&e[A2]===!0&&"validate"in e}function UK(e){return zK(e)?e:HK(e)}function HK(e){return BK(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function qK({value:e,schema:t}){const n=DM({value:e,schema:t});if(!n.success)throw bv.wrap({value:e,cause:n.error});return n.value}function DM({value:e,schema:t}){const n=UK(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:bv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:bv.wrap({value:e,cause:r})}}}function VK({text:e,schema:t}){try{const n=is.parse(e);return t==null?n:qK({value:n,schema:t})}catch(n){throw yv.isInstance(n)||bv.isInstance(n)?n:new yv({text:e,cause:n})}}function MM({text:e,schema:t}){try{const n=is.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=DM({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:yv.isInstance(n)?n:new yv({text:e,cause:n})}}}function Qx(e){try{return is.parse(e),!0}catch{return!1}}var GK=()=>globalThis.fetch,wv=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>WK({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),WK=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=GK()})=>{try{const s=await o(e,{method:"POST",headers:LK(t),body:n.content,signal:i}),l=Ew(s);if(!s.ok){let u;try{u=await a({response:s,url:e,requestBodyValues:n.values})}catch(d){throw Jx(d)||Ol.isInstance(d)?d:new Ol({message:"Failed to process error response",cause:d,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(Jx(u)||Ol.isInstance(u))?u:new Ol({message:"Failed to process successful response",cause:u,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(s){if(Jx(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const l=s.cause;if(l!=null)throw new Ol({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},KK=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Ew(r);if(o.trim()==="")return{responseHeaders:s,value:new Ol({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const l=VK({text:o,schema:e});return{responseHeaders:s,value:new Ol({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:s,value:new Ol({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},PM=e=>async({response:t})=>{const n=Ew(t);if(t.body==null)throw new _K({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new MK).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(MM({text:r,schema:e}))}}))}},FM=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=MM({text:a,schema:e}),o=Ew(t);if(!i.success)throw new Ol({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:ZK}=globalThis;function YK(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return ZK(t)}function XK(e){return e==null?void 0:e.replace(/\/$/,"")}var JK=Object.defineProperty,QK=Object.defineProperties,eZ=Object.getOwnPropertyDescriptors,_v=Object.getOwnPropertySymbols,LM=Object.prototype.hasOwnProperty,$M=Object.prototype.propertyIsEnumerable,L3=(e,t,n)=>t in e?JK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xi=(e,t)=>{for(var n in t||(t={}))LM.call(t,n)&&L3(e,n,t[n]);if(_v)for(var n of _v(t))$M.call(t,n)&&L3(e,n,t[n]);return e},Gb=(e,t)=>QK(e,eZ(t)),xv=(e,t)=>{var n={};for(var r in e)LM.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_v)for(var r of _v(e))t.indexOf(r)<0&&$M.call(e,r)&&(n[r]=e[r]);return n};function Cs(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function tZ(e){var t,n,r;const a=[];for(const{role:i,content:o,providerMetadata:s}of e)switch(i){case"system":{a.push({role:"system",content:o,cache_control:Cs(s)});break}case"user":{if(o.length===1&&((t=o[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:o[0].text,cache_control:(n=Cs(s))!=null?n:Cs(o[0].providerMetadata)});break}const l=Cs(s),u=o.map(d=>{var h,p,g,v;switch(d.type){case"text":return{type:"text",text:d.text,cache_control:(h=Cs(d.providerMetadata))!=null?h:l};case"image":return{type:"image_url",image_url:{url:d.image instanceof URL?d.image.toString():`data:${(p=d.mimeType)!=null?p:"image/jpeg"};base64,${YK(d.image)}`},cache_control:(g=Cs(d.providerMetadata))!=null?g:l};case"file":return{type:"text",text:d.data instanceof URL?d.data.toString():d.data,cache_control:(v=Cs(d.providerMetadata))!=null?v:l};default:{const b=d;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:u});break}case"assistant":{let l="";const u=[];for(const d of o)switch(d.type){case"text":{l+=d.text;break}case"tool-call":{u.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=d;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:l,tool_calls:u.length>0?u:void 0,cache_control:Cs(s)});break}case"tool":{for(const l of o)a.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=Cs(s))!=null?r:Cs(l.providerMetadata)});break}default:{const l=i;throw new Error(`Unsupported role: ${l}`)}}return a}function $3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function Sv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var ZC=$.object({error:$.object({message:$.string(),type:$.string(),param:$.any().nullable(),code:$.string().nullable()})}),Ev=KK({errorSchema:ZC,errorToMessage:e=>e.error.message});function nZ(e){return"parameters"in e}var rZ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:o,seed:s,stopSequences:l,responseFormat:u,topK:d,providerMetadata:h}){var p;const g=e.type,v=(p=h==null?void 0:h.openrouter)!=null?p:{},b=Xi(Xi(Xi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:o,seed:s,stop:l,response_format:u,top_k:d,messages:tZ(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return Xi(Xi({},b),oZ(e));case"object-json":return Gb(Xi({},b),{response_format:{type:"json_object"}});case"object-tool":return Gb(Xi({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const _=g;throw new _o({functionality:`${_} mode`})}}}async doGenerate(e){var t,n,r,a,i,o,s;const l=this.getArgs(e),{responseHeaders:u,value:d}=await wv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:vv(this.config.headers(),e.headers),body:l,failedResponseHandler:Ev,successfulResponseHandler:FM(aZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=l,{messages:p}=h,g=xv(h,["messages"]),v=d.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:d.id,modelId:d.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var _;return{toolCallType:"function",toolCallId:(_=b.id)!=null?_:lb(),toolName:b.function.name,args:b.function.arguments}}),finishReason:Sv(v.finish_reason),usage:{promptTokens:(i=(a=d.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(s=(o=d.usage)==null?void 0:o.completion_tokens)!=null?s:0},rawCall:{rawPrompt:p,rawSettings:g},rawResponse:{headers:u},warnings:[],logprobs:$3(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await wv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:vv(this.config.headers(),e.headers),body:Gb(Xi({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Ev,successfulResponseHandler:PM(iZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,o=xv(a,["messages"]),s=[];let l="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d;return{stream:r.pipeThrough(new TransformStream({transform(h,p){var g,v,b,_,x,S,E,C,k,R,j,O;if(!h.success){l="error",p.enqueue({type:"error",error:h.error});return}const L=h.value;if("error"in L){l="error",p.enqueue({type:"error",error:L.error});return}L.id&&p.enqueue({type:"response-metadata",id:L.id}),L.model&&p.enqueue({type:"response-metadata",modelId:L.model}),L.usage!=null&&(u={promptTokens:L.usage.prompt_tokens,completionTokens:L.usage.completion_tokens});const z=L.choices[0];if((z==null?void 0:z.finish_reason)!=null&&(l=Sv(z.finish_reason)),(z==null?void 0:z.delta)==null)return;const Y=z.delta;Y.content!=null&&p.enqueue({type:"text-delta",textDelta:Y.content}),Y.reasoning!=null&&p.enqueue({type:"reasoning",textDelta:Y.reasoning});const F=$3(z==null?void 0:z.logprobs);if(F!=null&&F.length&&(d===void 0&&(d=[]),d.push(...F)),Y.tool_calls!=null)for(const K of Y.tool_calls){const q=K.index;if(s[q]==null){if(K.type!=="function")throw new Yx({data:K,message:"Expected 'function' type."});if(K.id==null)throw new Yx({data:K,message:"Expected 'id' to be a string."});if(((g=K.function)==null?void 0:g.name)==null)throw new Yx({data:K,message:"Expected 'function.name' to be a string."});s[q]={id:K.id,type:"function",function:{name:K.function.name,arguments:(v=K.function.arguments)!=null?v:""},sent:!1};const te=s[q];if(te==null)throw new Error("Tool call is missing");((b=te.function)==null?void 0:b.name)!=null&&((_=te.function)==null?void 0:_.arguments)!=null&&Qx(te.function.arguments)&&(p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:te.id,toolName:te.function.name,argsTextDelta:te.function.arguments}),p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=te.id)!=null?x:lb(),toolName:te.function.name,args:te.function.arguments}),te.sent=!0);continue}const fe=s[q];if(fe==null)throw new Error("Tool call is missing");((S=K.function)==null?void 0:S.arguments)!=null&&(fe.function.arguments+=(C=(E=K.function)==null?void 0:E.arguments)!=null?C:""),p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:fe.id,toolName:fe.function.name,argsTextDelta:(k=K.function.arguments)!=null?k:""}),((R=fe.function)==null?void 0:R.name)!=null&&((j=fe.function)==null?void 0:j.arguments)!=null&&Qx(fe.function.arguments)&&(p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=fe.id)!=null?O:lb(),toolName:fe.function.name,args:fe.function.arguments}),fe.sent=!0)}},flush(h){var p;if(l==="tool-calls")for(const g of s)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(p=g.id)!=null?p:lb(),toolName:g.function.name,args:Qx(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},BM=$.object({id:$.string().optional(),model:$.string().optional(),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number(),total_tokens:$.number()}).nullish()}),aZ=BM.extend({choices:$.array($.object({message:$.object({role:$.literal("assistant"),content:$.string().nullable().optional(),reasoning:$.string().nullable().optional(),tool_calls:$.array($.object({id:$.string().optional().nullable(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).optional()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullable().optional(),finish_reason:$.string().optional().nullable()}))}),iZ=$.union([BM.extend({choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).optional(),content:$.string().nullish(),reasoning:$.string().nullish().optional(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()}))}),ZC]);function oZ(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>nZ(o)?{type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}}:{type:"function",function:{name:o.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function sZ({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new CK({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new _o({functionality:"images"});case"file":throw new _o({functionality:"file attachments"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new _o({functionality:"tool-call messages"});case"reasoning":throw new _o({functionality:"reasoning messages"});case"redacted-reasoning":throw new _o({functionality:"redacted reasoning messages"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new _o({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a}}function B3(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var lZ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:s,seed:l,responseFormat:u,topK:d,stopSequences:h,providerMetadata:p}){var g,v;const b=e.type,_=(g=p==null?void 0:p.openrouter)!=null?g:{},{prompt:x}=sZ({prompt:n,inputFormat:t}),S=Xi(Xi(Xi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:s,seed:l,stop:h,response_format:u,top_k:d,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),_);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new _o({functionality:"tools"});if(e.toolChoice)throw new _o({functionality:"toolChoice"});return S}case"object-json":throw new _o({functionality:"object-json mode"});case"object-tool":throw new _o({functionality:"object-tool mode"});default:{const E=b;throw new _o({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const o=this.getArgs(e),{responseHeaders:s,value:l}=await wv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:vv(this.config.headers(),e.headers),body:o,failedResponseHandler:Ev,successfulResponseHandler:FM(z3),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=o,{prompt:d}=u,h=xv(u,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const p=l.choices[0];if(!p)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=p.text)!=null?t:"",reasoning:p.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=l.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:Sv(p.finish_reason),logprobs:B3(p.logprobs),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:s},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await wv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:vv(this.config.headers(),e.headers),body:Gb(Xi({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Ev,successfulResponseHandler:PM(z3),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,o=xv(a,["prompt"]);let s="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){if(!d.success){s="error",h.enqueue({type:"error",error:d.error});return}const p=d.value;if("error"in p){s="error",h.enqueue({type:"error",error:p.error});return}p.usage!=null&&(l={promptTokens:p.usage.prompt_tokens,completionTokens:p.usage.completion_tokens});const g=p.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=Sv(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=B3(g==null?void 0:g.logprobs);v!=null&&v.length&&(u===void 0&&(u=[]),u.push(...v))},flush(d){d.enqueue({type:"finish",finishReason:s,logprobs:u,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},z3=$.union([$.object({id:$.string().optional(),model:$.string().optional(),choices:$.array($.object({text:$.string(),reasoning:$.string().nullish().optional(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullable().optional()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).optional().nullable()}),ZC]);function zM(e={}){var t,n,r;const a=(n=XK((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",o=()=>Xi({Authorization:`Bearer ${$K({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),s=(h,p={})=>new rZ(h,p,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(h,p={})=>new lZ(h,p,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,p)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?l(h,p):s(h,p)},d=function(h,p){return u(h,p)};return d.languageModel=u,d.chat=s,d.completion=l,d}zM({compatibility:"strict"});var Qu={},eS={},U3;function H3(){return U3||(U3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(eS)),eS}var q3;function cZ(){return q3||(q3=1,function(e){var t=Qu&&Qu.__createBinding||(Object.create?function(u,d,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(d,h);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,p,g)}:function(u,d,h,p){p===void 0&&(p=h),u[p]=d[h]}),n=Qu&&Qu.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&t(d,u,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=H3();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(H3(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function o(u,d=r.Allow.ALL){if(typeof u!="string")throw new TypeError(`expecting str, got ${typeof u}`);if(!u.trim())throw new Error(`${u} is empty`);return s(u.trim(),d)}e.parseJSON=o;const s=(u,d)=>{const h=u.length;let p=0;const g=k=>{throw new a(`${k} at position ${p}`)},v=k=>{throw new i(`${k} at position ${p}`)},b=()=>(C(),p>=h&&g("Unexpected end of input"),u[p]==='"'?_():u[p]==="{"?x():u[p]==="["?S():u.substring(p,p+4)==="null"||r.Allow.NULL&d&&h-p<4&&"null".startsWith(u.substring(p))?(p+=4,null):u.substring(p,p+4)==="true"||r.Allow.BOOL&d&&h-p<4&&"true".startsWith(u.substring(p))?(p+=4,!0):u.substring(p,p+5)==="false"||r.Allow.BOOL&d&&h-p<5&&"false".startsWith(u.substring(p))?(p+=5,!1):u.substring(p,p+8)==="Infinity"||r.Allow.INFINITY&d&&h-p<8&&"Infinity".startsWith(u.substring(p))?(p+=8,1/0):u.substring(p,p+9)==="-Infinity"||r.Allow._INFINITY&d&&1<h-p&&h-p<9&&"-Infinity".startsWith(u.substring(p))?(p+=9,-1/0):u.substring(p,p+3)==="NaN"||r.Allow.NAN&d&&h-p<3&&"NaN".startsWith(u.substring(p))?(p+=3,NaN):E()),_=()=>{const k=p;let R=!1;for(p++;p<h&&(u[p]!=='"'||R&&u[p-1]==="\\");)R=u[p]==="\\"?!R:!1,p++;if(u.charAt(p)=='"')try{return JSON.parse(u.substring(k,++p-Number(R)))}catch(j){v(String(j))}else if(r.Allow.STR&d)try{return JSON.parse(u.substring(k,p-Number(R))+'"')}catch{return JSON.parse(u.substring(k,u.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{p++,C();const k={};try{for(;u[p]!=="}";){if(C(),p>=h&&r.Allow.OBJ&d)return k;const R=_();C(),p++;try{const j=b();k[R]=j}catch(j){if(r.Allow.OBJ&d)return k;throw j}C(),u[p]===","&&p++}}catch{if(r.Allow.OBJ&d)return k;g("Expected '}' at end of object")}return p++,k},S=()=>{p++;const k=[];try{for(;u[p]!=="]";)k.push(b()),C(),u[p]===","&&p++}catch{if(r.Allow.ARR&d)return k;g("Expected ']' at end of array")}return p++,k},E=()=>{if(p===0){u==="-"&&v("Not sure what '-' is");try{return JSON.parse(u)}catch(R){if(r.Allow.NUM&d)try{return JSON.parse(u.substring(0,u.lastIndexOf("e")))}catch{}v(String(R))}}const k=p;for(u[p]==="-"&&p++;u[p]&&",]}".indexOf(u[p])===-1;)p++;p==h&&!(r.Allow.NUM&d)&&g("Unterminated number literal");try{return JSON.parse(u.substring(k,p))}catch{u.substring(k,p)==="-"&&g("Not sure what '-' is");try{return JSON.parse(u.substring(k,u.lastIndexOf("e")))}catch(j){v(String(j))}}},C=()=>{for(;p<h&&` 
\r	`.includes(u[p]);)p++};return b()},l=o;e.parse=l}(Qu)),Qu}var uZ=cZ();function tS(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new Cr({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(ph(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const o of n)switch(o.type){case"text":{a.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const s=o;throw new Error(`Unsupported part: ${s}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var dZ=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=uZ.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const o=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:js(),type:"function"});const s=this._toolCalls[a];s.function.arguments=o,e.enqueue({argsTextDelta:t,toolCallId:s.id,toolCallType:"function",toolName:s.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function fZ({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var hZ=$.object({error:$.object({code:$.string().nullable(),message:$.string(),param:$.any().nullable(),type:$.string()})}),T2=oD({errorSchema:hZ,errorToMessage:e=>e.error.message});function pZ({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const s of n)s.type==="provider-defined"?r.push({tool:s,type:"unsupported-tool"}):i.push({function:{description:s.description,name:s.name,parameters:s.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const o=a.type;switch(o){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const s=o;throw new Cr({functionality:`Unsupported tool choice type: ${s}`})}}}function mZ(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var gZ=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},yZ=e=>async({response:t})=>{const n=eg(t);if(t.body===null)throw new BC({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new gZ).pipeThrough(new TransformStream({transform(r,a){a.enqueue(gd({schema:e,text:r}))}}))}},bZ=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:o,stopSequences:s,temperature:l,topK:u,topP:d}){const h=n.type,p=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&p.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:mZ({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:s,temperature:l,tfs_z:this.settings.tfsZ,top_k:u,top_p:d,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=pZ({mode:n});return{args:{...g,messages:tS(a),tools:v},type:h,warnings:[...p,...b]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:tS(a)},type:h,warnings:p};case"object-tool":return{args:{...g,messages:tS(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:p};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:o,value:s}=await Zo({abortSignal:e.abortSignal,body:i,failedResponseHandler:T2,fetch:this.config.fetch,headers:Us(this.config.headers(),e.headers),successfulResponseHandler:Nd(vZ),url:`${this.config.baseURL}/chat`}),{messages:l,...u}=i,d=(t=s.message.tool_calls)==null?void 0:t.map(h=>{var p;return{args:JSON.stringify(h.function.arguments),toolCallId:(p=h.id)!=null?p:js(),toolCallType:"function",toolName:h.function.name}});return{finishReason:fZ({finishReason:s.done_reason,hasToolCalls:d!==void 0&&d.length>0}),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:o},request:{body:JSON.stringify(i)},text:(n=s.message.content)!=null?n:void 0,toolCalls:d,usage:{completionTokens:s.eval_count||0,promptTokens:s.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...g.response}),g.text&&b.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const _ of g.toolCalls)b.enqueue({argsTextDelta:_.args,toolCallId:_.toolCallId,toolCallType:"function",toolName:_.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",..._});b.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),b.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Zo({abortSignal:e.abortSignal,body:t,failedResponseHandler:T2,fetch:this.config.fetch,headers:Us(this.config.headers(),e.headers),successfulResponseHandler:yZ(wZ),url:`${this.config.baseURL}/chat`}),{messages:o,...s}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,u=new dZ({tools:l,type:n});let d="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:p=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:d,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const b=g.value;if(b.done){d=u.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}p&&u.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},vZ=$.object({created_at:$.string(),done:$.literal(!0),done_reason:$.string().optional().nullable(),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),message:$.object({content:$.string(),role:$.string(),tool_calls:$.array($.object({function:$.object({arguments:$.record($.any()),name:$.string()}),id:$.string().optional()})).optional().nullable()}),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()}),wZ=$.discriminatedUnion("done",[$.object({created_at:$.string(),done:$.literal(!1),message:$.object({content:$.string(),role:$.string()}),model:$.string()}),$.object({created_at:$.string(),done:$.literal(!0),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()})]),_Z=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new UC({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Zo({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:T2,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Nd(xZ),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},xZ=$.object({embeddings:$.array($.array($.number())),prompt_eval_count:$.number().nullable()});function UM(e={}){var t;const n=(t=lD(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(s,l={})=>new bZ(s,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(s,l={})=>new _Z(s,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),o=function(s,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(s,l)};return o.chat=a,o.embedding=i,o.languageModel=a,o.textEmbedding=i,o.textEmbeddingModel=i,o}UM();let SZ=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function bh(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function EZ(){let e="",t,n=[],r,a;function i(l,u){if(l===""){o(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){s(l,"");return}const h=l.slice(0,d),p=d+1,g=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);s(h,g)}function o(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=CZ(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],u)},flush(l){i(e,l),o(l)}})}function CZ(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Cw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var kZ=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=SZ(n,t);if(e==null)return a;if(n.includes(r))throw new zC({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},nS=kZ();function AZ(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function rS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var N2=Symbol.for("vercel.ai.validator");function TZ(e){return{[N2]:!0,validate:e}}function NZ(e){return typeof e=="object"&&e!==null&&N2 in e&&e[N2]===!0&&"validate"in e}function RZ(e){return NZ(e)?e:IZ(e)}function IZ(e){return TZ(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function OZ({value:e,schema:t}){const n=HM({value:e,schema:t});if(!n.success)throw eu.wrap({value:e,cause:n.error});return n.value}function HM({value:e,schema:t}){const n=RZ(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:eu.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:eu.wrap({value:e,cause:r})}}}function jZ({text:e,schema:t}){try{const n=is.parse(e);return t==null?n:OZ({value:n,schema:t})}catch(n){throw Qc.isInstance(n)||eu.isInstance(n)?n:new Qc({text:e,cause:n})}}function qM({text:e,schema:t}){try{const n=is.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=HM({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Qc.isInstance(n)?n:new Qc({text:e,cause:n})}}}function V3(e){try{return is.parse(e),!0}catch{return!1}}var DZ=()=>globalThis.fetch,vh=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>MZ({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),MZ=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=DZ()})=>{try{const s=await o(e,{method:"POST",headers:AZ(t),body:n.content,signal:i}),l=Cw(s);if(!s.ok){let u;try{u=await a({response:s,url:e,requestBodyValues:n.values})}catch(d){throw rS(d)||wa.isInstance(d)?d:new wa({message:"Failed to process error response",cause:d,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(rS(u)||wa.isInstance(u))?u:new wa({message:"Failed to process successful response",cause:u,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(s){if(rS(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const l=s.cause;if(l!=null)throw new wa({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},kw=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Cw(r);if(o.trim()==="")return{responseHeaders:s,value:new wa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const l=jZ({text:o,schema:e});return{responseHeaders:s,value:new wa({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:s,value:new wa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},VM=e=>async({response:t})=>{const n=Cw(t);if(t.body==null)throw new BC({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(EZ()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(qM({text:r,schema:e}))}}))}},Aw=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=qM({text:a,schema:e}),o=Cw(t);if(!i.success)throw new wa({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:PZ}=globalThis;function FZ(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return PZ(t)}function LZ(e){return e==null?void 0:e.replace(/\/$/,"")}function Em(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function $Z(e){const t=[];for(const{role:n,content:r,...a}of e){const i=Em({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Em(r[0])});break}t.push({role:"user",content:r.map(o=>{var s;const l=Em(o);switch(o.type){case"text":return{type:"text",text:o.text,...l};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${FZ(o.image)}`},...l};case"file":throw new Cr({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const s=[];for(const l of r){const u=Em(l);switch(l.type){case"text":{o+=l.text;break}case"tool-call":{s.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...u});break}}}t.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0,...i});break}case"tool":{for(const o of r){const s=Em(o);t.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...s})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return t}function Cv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function kv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var BZ=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),Tw={errorSchema:BZ,errorToMessage:e=>e.error.message};function zZ({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const l of r)l.type==="provider-defined"?a.push({type:"unsupported-tool",tool:l}):o.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const l=s;throw new Cr({functionality:`Unsupported tool choice type: ${l}`})}}}var UZ=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:Tw;this.chunkSchema=qZ(i.errorSchema),this.failedResponseHandler=kw(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,providerMetadata:l,stopSequences:u,responseFormat:d,seed:h}){var p,g;const v=e.type,b=[];i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),(d==null?void 0:d.type)==="json"&&d.schema!=null&&!this.supportsStructuredOutputs&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(d==null?void 0:d.type)==="json"?this.supportsStructuredOutputs===!0&&d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,name:(p=d.name)!=null?p:"response",description:d.description}}:{type:"json_object"}:void 0,stop:u,seed:h,...l==null?void 0:l[this.providerOptionsName],messages:$Z(t)};switch(v){case"regular":{const{tools:x,tool_choice:S,toolWarnings:E}=zZ({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:x,tool_choice:S},warnings:[...b,...E]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:b};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:b};default:{const x=v;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,l,u;const{args:d,warnings:h}=this.getArgs({...e}),p=JSON.stringify(d),{responseHeaders:g,value:v,rawValue:b}=await vh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:bh(this.config.headers(),e.headers),body:d,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Aw(HZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...x}=d,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:b});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:nS(),toolName:C.function.name,args:C.function.arguments}}),finishReason:kv(S.finish_reason),usage:{promptTokens:(s=(o=v.usage)==null?void 0:o.prompt_tokens)!=null?s:NaN,completionTokens:(u=(l=v.usage)==null?void 0:l.completion_tokens)!=null?u:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:_,rawSettings:x},rawResponse:{headers:g,body:b},response:Cv(v),warnings:h,request:{body:p}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const x of v.reasoning)x.type==="text"&&_.enqueue({type:"reasoning",textDelta:x.text});else _.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&_.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const x of v.toolCalls)_.enqueue({type:"tool-call",...x});_.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),_.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:o,value:s}=await vh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:bh(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:VM(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...u}=n,d=[];let h="unknown",p={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k,R,j,O,L,z,Y,F,K;if(!v.success){h="error",b.enqueue({type:"error",error:v.error});return}const q=v.value;if(i==null||i.processChunk(v.rawValue),"error"in q){h="error",b.enqueue({type:"error",error:q.error.message});return}g&&(g=!1,b.enqueue({type:"response-metadata",...Cv(q)})),q.usage!=null&&(p={promptTokens:(_=q.usage.prompt_tokens)!=null?_:void 0,completionTokens:(x=q.usage.completion_tokens)!=null?x:void 0});const fe=q.choices[0];if((fe==null?void 0:fe.finish_reason)!=null&&(h=kv(fe.finish_reason)),(fe==null?void 0:fe.delta)==null)return;const te=fe.delta;if(te.reasoning_content!=null&&b.enqueue({type:"reasoning",textDelta:te.reasoning_content}),te.content!=null&&b.enqueue({type:"text-delta",textDelta:te.content}),te.tool_calls!=null)for(const re of te.tool_calls){const X=re.index;if(d[X]==null){if(re.type!=="function")throw new ih({data:re,message:"Expected 'function' type."});if(re.id==null)throw new ih({data:re,message:"Expected 'id' to be a string."});if(((S=re.function)==null?void 0:S.name)==null)throw new ih({data:re,message:"Expected 'function.name' to be a string."});d[X]={id:re.id,type:"function",function:{name:re.function.name,arguments:(E=re.function.arguments)!=null?E:""},hasFinished:!1};const U=d[X];((C=U.function)==null?void 0:C.name)!=null&&((k=U.function)==null?void 0:k.arguments)!=null&&(U.function.arguments.length>0&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:U.id,toolName:U.function.name,argsTextDelta:U.function.arguments}),V3(U.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(R=U.id)!=null?R:nS(),toolName:U.function.name,args:U.function.arguments}),U.hasFinished=!0));continue}const ae=d[X];ae.hasFinished||(((j=re.function)==null?void 0:j.arguments)!=null&&(ae.function.arguments+=(L=(O=re.function)==null?void 0:O.arguments)!=null?L:""),b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:(z=re.function.arguments)!=null?z:""}),((Y=ae.function)==null?void 0:Y.name)!=null&&((F=ae.function)==null?void 0:F.arguments)!=null&&V3(ae.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(K=ae.id)!=null?K:nS(),toolName:ae.function.name,args:ae.function.arguments}),ae.hasFinished=!0))}},flush(v){var b,_;const x=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(b=p.promptTokens)!=null?b:NaN,completionTokens:(_=p.completionTokens)!=null?_:NaN},...x&&{providerMetadata:x}})}})),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:o},warnings:r,request:{body:a}}}},HZ=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),finish_reason:$.string().nullish()})),usage:$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish()}).nullish()}),qZ=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),finish_reason:$.string().nullish()})),usage:$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish()}).nullish()}),e]);function VZ({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new Al({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Cr({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Cr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new Cr({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var GZ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:Tw;this.chunkSchema=KZ(a.errorSchema),this.failedResponseHandler=kw(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h,providerMetadata:p}){var g;const v=e.type,b=[];o!=null&&b.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:_,stopSequences:x}=VZ({prompt:n,inputFormat:t}),S=[...x??[],...u??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:l,seed:h,...p==null?void 0:p[this.providerOptionsName],prompt:_,stop:S.length>0?S:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new Cr({functionality:"tools"});if(e.toolChoice)throw new Cr({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new Cr({functionality:"object-json mode"});case"object-tool":throw new Cr({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:o}=this.getArgs(e),{responseHeaders:s,value:l,rawValue:u}=await vh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:bh(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Aw(WZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:d,...h}=i,p=l.choices[0];return{text:p.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=l.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:kv(p.finish_reason),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:s,body:u},response:Cv(l),warnings:o,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await vh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:bh(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:VM(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,p){if(!h.success){l="error",p.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){l="error",p.enqueue({type:"error",error:g.error});return}d&&(d=!1,p.enqueue({type:"response-metadata",...Cv(g)})),g.usage!=null&&(u={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(l=kv(v.finish_reason)),(v==null?void 0:v.text)!=null&&p.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:l,usage:u})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},WZ=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),KZ=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),e]),ZZ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new UC({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await vh({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:bh(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:kw((r=this.config.errorStructure)!=null?r:Tw),successfulResponseHandler:Aw(YZ),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(o=>o.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},YZ=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),XZ=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var l,u,d,h,p;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:b,responseHeaders:_}=await vh({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:bh(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:kw((p=this.config.errorStructure)!=null?p:Tw),successfulResponseHandler:Aw(JZ),abortSignal:s,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:_}}}},JZ=$.object({data:$.array($.object({b64_json:$.string()}))});function QZ(e){const t=LZ(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:p})=>{const g=new URL(`${t}${p}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,p={})=>o(h,p),o=(h,p={})=>new UZ(h,p,{...a("chat"),defaultObjectGenerationMode:"tool"}),s=(h,p={})=>new GZ(h,p,a("completion")),l=(h,p={})=>new ZZ(h,p,a("embedding")),u=(h,p={})=>new XZ(h,p,a("image")),d=(h,p)=>i(h,p);return d.languageModel=i,d.chatModel=o,d.completionModel=s,d.textEmbeddingModel=l,d.imageModel=u,d}const qc=(e,t)=>`${e}:${t}`,Yl=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},Av=e=>e==="openai"||e==="openrouter"||e==="google",YC=e=>e==="ollama"||e==="openai-compatible",Qf=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",hd=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],eY={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},GM=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function WM(e,t,n){try{switch(e.type){case"openai":return _D({apiKey:n})(t);case"google":return nM({apiKey:n})(t);case"openrouter":return zM({apiKey:n})(t);case"ollama":return UM({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return QZ({baseURL:GM(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function XC(e,t,n){const a=Pn.getState().getAllAvailableModelDefsForProvider(e.id).find(o=>o.id===t);if(!a){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const i=WM(e,t,n);if(!i){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:qc(e.id,t),name:a.name,providerId:e.id,providerName:e.name,instance:i,metadata:a}}const KM={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]};var Ps=Yj();const ZM=li(Ps);function tY(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const nY=e=>{switch(e){case"success":return iY;case"info":return sY;case"warning":return oY;case"error":return lY;default:return null}},rY=Array(12).fill(0),aY=({visible:e,className:t})=>yt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},yt.createElement("div",{className:"sonner-spinner"},rY.map((n,r)=>yt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),iY=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),oY=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),sY=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),lY=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),cY=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},yt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),yt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),uY=()=>{const[e,t]=yt.useState(document.hidden);return yt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let R2=1;class dY{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:R2++,o=this.toasts.find(l=>l.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:s,title:r}):l):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const s=a.then(async u=>{if(o=["resolve",u],yt.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(hY(u)&&!u.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,v=typeof h=="object"&&!yt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(u instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(u):n.error,p=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!yt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(u):n.success,p=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!yt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:p,...v})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,g=typeof d=="object"&&!yt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,d)=>s.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||R2++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ni=new dY,fY=(e,t)=>{const n=(t==null?void 0:t.id)||R2++;return Ni.addToast({title:e,...t,id:n}),n},hY=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",pY=fY,mY=()=>Ni.toasts,gY=()=>Ni.getActiveToasts(),lt=Object.assign(pY,{success:Ni.success,info:Ni.info,warning:Ni.warning,error:Ni.error,custom:Ni.custom,message:Ni.message,promise:Ni.promise,dismiss:Ni.dismiss,loading:Ni.loading},{getHistory:mY,getToasts:gY});tY("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function cb(e){return e.label!==void 0}const yY=3,bY="24px",vY="16px",G3=4e3,wY=356,_Y=14,xY=45,SY=200;function ks(...e){return e.filter(Boolean).join(" ")}function EY(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const CY=e=>{var t,n,r,a,i,o,s,l,u;const{invert:d,toast:h,unstyled:p,interacting:g,setHeights:v,visibleToasts:b,heights:_,index:x,toasts:S,expanded:E,removeToast:C,defaultRichColors:k,closeButton:R,style:j,cancelButtonStyle:O,actionButtonStyle:L,className:z="",descriptionClassName:Y="",duration:F,position:K,gap:q,expandByDefault:fe,classNames:te,icons:re,closeButtonAriaLabel:X="Close toast"}=e,[ae,U]=yt.useState(null),[ee,J]=yt.useState(null),[ue,be]=yt.useState(!1),[_e,Pe]=yt.useState(!1),[Ne,Re]=yt.useState(!1),[Ce,Fe]=yt.useState(!1),[Qe,Le]=yt.useState(!1),[Ie,V]=yt.useState(0),[me,Ae]=yt.useState(0),se=yt.useRef(h.duration||F||G3),ie=yt.useRef(null),Q=yt.useRef(null),xe=x===0,Me=x+1<=b,Ee=h.type,We=h.dismissible!==!1,kt=h.className||"",at=h.descriptionClassName||"",_t=yt.useMemo(()=>_.findIndex(je=>je.toastId===h.id)||0,[_,h.id]),Dt=yt.useMemo(()=>{var je;return(je=h.closeButton)!=null?je:R},[h.closeButton,R]),jt=yt.useMemo(()=>h.duration||F||G3,[h.duration,F]),Gt=yt.useRef(0),ye=yt.useRef(0),I=yt.useRef(0),G=yt.useRef(null),[de,Oe]=K.split("-"),ve=yt.useMemo(()=>_.reduce((je,Ke,Nt)=>Nt>=_t?je:je+Ke.height,0),[_,_t]),ke=uY(),le=h.invert||d,ft=Ee==="loading";ye.current=yt.useMemo(()=>_t*q+ve,[_t,ve]),yt.useEffect(()=>{se.current=jt},[jt]),yt.useEffect(()=>{be(!0)},[]),yt.useEffect(()=>{const je=Q.current;if(je){const Ke=je.getBoundingClientRect().height;return Ae(Ke),v(Nt=>[{toastId:h.id,height:Ke,position:h.position},...Nt]),()=>v(Nt=>Nt.filter(pe=>pe.toastId!==h.id))}},[v,h.id]),yt.useLayoutEffect(()=>{if(!ue)return;const je=Q.current,Ke=je.style.height;je.style.height="auto";const Nt=je.getBoundingClientRect().height;je.style.height=Ke,Ae(Nt),v(pe=>pe.find(B=>B.toastId===h.id)?pe.map(B=>B.toastId===h.id?{...B,height:Nt}:B):[{toastId:h.id,height:Nt,position:h.position},...pe])},[ue,h.title,h.description,v,h.id]);const vt=yt.useCallback(()=>{Pe(!0),V(ye.current),v(je=>je.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},SY)},[h,C,v,ye]);yt.useEffect(()=>{if(h.promise&&Ee==="loading"||h.duration===1/0||h.type==="loading")return;let je;return E||g||ke?(()=>{if(I.current<Gt.current){const pe=new Date().getTime()-Gt.current;se.current=se.current-pe}I.current=new Date().getTime()})():(()=>{se.current!==1/0&&(Gt.current=new Date().getTime(),je=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},se.current))})(),()=>clearTimeout(je)},[E,g,h,Ee,ke,vt]),yt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function M(){var je;if(re!=null&&re.loading){var Ke;return yt.createElement("div",{className:ks(te==null?void 0:te.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Ee==="loading"},re.loading)}return yt.createElement(aY,{className:ks(te==null?void 0:te.loader,h==null||(je=h.classNames)==null?void 0:je.loader),visible:Ee==="loading"})}const Be=h.icon||(re==null?void 0:re[Ee])||nY(Ee);var tt,ge;return yt.createElement("li",{tabIndex:0,ref:Q,className:ks(z,kt,te==null?void 0:te.toast,h==null||(t=h.classNames)==null?void 0:t.toast,te==null?void 0:te.default,te==null?void 0:te[Ee],h==null||(n=h.classNames)==null?void 0:n[Ee]),"data-sonner-toast":"","data-rich-colors":(tt=h.richColors)!=null?tt:k,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":ue,"data-promise":!!h.promise,"data-swiped":Qe,"data-removed":_e,"data-visible":Me,"data-y-position":de,"data-x-position":Oe,"data-index":x,"data-front":xe,"data-swiping":Ne,"data-dismissible":We,"data-type":Ee,"data-invert":le,"data-swipe-out":Ce,"data-swipe-direction":ee,"data-expanded":!!(E||fe&&ue),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${_e?Ie:ye.current}px`,"--initial-height":fe?"auto":`${me}px`,...j,...h.style},onDragEnd:()=>{Re(!1),U(null),G.current=null},onPointerDown:je=>{ft||!We||(ie.current=new Date,V(ye.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(Re(!0),G.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,Ke,Nt;if(Ce||!We)return;G.current=null;const pe=Number(((je=Q.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),H=Number(((Ke=Q.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),B=new Date().getTime()-((Nt=ie.current)==null?void 0:Nt.getTime()),W=ae==="x"?pe:H,he=Math.abs(W)/B;if(Math.abs(W)>=xY||he>.11){V(ye.current),h.onDismiss==null||h.onDismiss.call(h,h),J(ae==="x"?pe>0?"right":"left":H>0?"down":"up"),vt(),Fe(!0);return}else{var Te,He;(Te=Q.current)==null||Te.style.setProperty("--swipe-amount-x","0px"),(He=Q.current)==null||He.style.setProperty("--swipe-amount-y","0px")}Le(!1),Re(!1),U(null)},onPointerMove:je=>{var Ke,Nt,pe;if(!G.current||!We||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const B=je.clientY-G.current.y,W=je.clientX-G.current.x;var he;const Te=(he=e.swipeDirections)!=null?he:EY(K);!ae&&(Math.abs(W)>1||Math.abs(B)>1)&&U(Math.abs(W)>Math.abs(B)?"x":"y");let He={x:0,y:0};const pt=Vt=>1/(1.5+Math.abs(Vt)/20);if(ae==="y"){if(Te.includes("top")||Te.includes("bottom"))if(Te.includes("top")&&B<0||Te.includes("bottom")&&B>0)He.y=B;else{const Vt=B*pt(B);He.y=Math.abs(Vt)<Math.abs(B)?Vt:B}}else if(ae==="x"&&(Te.includes("left")||Te.includes("right")))if(Te.includes("left")&&W<0||Te.includes("right")&&W>0)He.x=W;else{const Vt=W*pt(W);He.x=Math.abs(Vt)<Math.abs(W)?Vt:W}(Math.abs(He.x)>0||Math.abs(He.y)>0)&&Le(!0),(Nt=Q.current)==null||Nt.style.setProperty("--swipe-amount-x",`${He.x}px`),(pe=Q.current)==null||pe.style.setProperty("--swipe-amount-y",`${He.y}px`)}},Dt&&!h.jsx&&Ee!=="loading"?yt.createElement("button",{"aria-label":X,"data-disabled":ft,"data-close-button":!0,onClick:ft||!We?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:ks(te==null?void 0:te.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ge=re==null?void 0:re.close)!=null?ge:cY):null,(Ee||h.icon||h.promise)&&h.icon!==null&&((re==null?void 0:re[Ee])!==null||h.icon)?yt.createElement("div",{"data-icon":"",className:ks(te==null?void 0:te.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||M():null,h.type!=="loading"?Be:null):null,yt.createElement("div",{"data-content":"",className:ks(te==null?void 0:te.content,h==null||(i=h.classNames)==null?void 0:i.content)},yt.createElement("div",{"data-title":"",className:ks(te==null?void 0:te.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?yt.createElement("div",{"data-description":"",className:ks(Y,at,te==null?void 0:te.description,h==null||(s=h.classNames)==null?void 0:s.description)},typeof h.description=="function"?h.description():h.description):null),yt.isValidElement(h.cancel)?h.cancel:h.cancel&&cb(h.cancel)?yt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||O,onClick:je=>{cb(h.cancel)&&We&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,je),vt())},className:ks(te==null?void 0:te.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,yt.isValidElement(h.action)?h.action:h.action&&cb(h.action)?yt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||L,onClick:je=>{cb(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,je),!je.defaultPrevented&&vt())},className:ks(te==null?void 0:te.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function W3(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function kY(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?vY:bY;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=s:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(s)}),n}const AY=yt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:l,offset:u,mobileOffset:d,theme:h="light",richColors:p,duration:g,style:v,visibleToasts:b=yY,toastOptions:_,dir:x=W3(),gap:S=_Y,icons:E,containerAriaLabel:C="Notifications"}=t,[k,R]=yt.useState([]),j=yt.useMemo(()=>Array.from(new Set([a].concat(k.filter(ee=>ee.position).map(ee=>ee.position)))),[k,a]),[O,L]=yt.useState([]),[z,Y]=yt.useState(!1),[F,K]=yt.useState(!1),[q,fe]=yt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),te=yt.useRef(null),re=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=yt.useRef(null),ae=yt.useRef(!1),U=yt.useCallback(ee=>{R(J=>{var ue;return(ue=J.find(be=>be.id===ee.id))!=null&&ue.delete||Ni.dismiss(ee.id),J.filter(({id:be})=>be!==ee.id)})},[]);return yt.useEffect(()=>Ni.subscribe(ee=>{if(ee.dismiss){requestAnimationFrame(()=>{R(J=>J.map(ue=>ue.id===ee.id?{...ue,delete:!0}:ue))});return}setTimeout(()=>{ZM.flushSync(()=>{R(J=>{const ue=J.findIndex(be=>be.id===ee.id);return ue!==-1?[...J.slice(0,ue),{...J[ue],...ee},...J.slice(ue+1)]:[ee,...J]})})})}),[k]),yt.useEffect(()=>{if(h!=="system"){fe(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?fe("dark"):fe("light")),typeof window>"u")return;const ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:J})=>{fe(J?"dark":"light")})}catch{ee.addListener(({matches:ue})=>{try{fe(ue?"dark":"light")}catch(be){console.error(be)}})}},[h]),yt.useEffect(()=>{k.length<=1&&Y(!1)},[k]),yt.useEffect(()=>{const ee=J=>{var ue;if(i.every(Pe=>J[Pe]||J.code===Pe)){var _e;Y(!0),(_e=te.current)==null||_e.focus()}J.code==="Escape"&&(document.activeElement===te.current||(ue=te.current)!=null&&ue.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[i]),yt.useEffect(()=>{if(te.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,ae.current=!1)}},[te.current]),yt.createElement("section",{ref:n,"aria-label":`${C} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((ee,J)=>{var ue;const[be,_e]=ee.split("-");return k.length?yt.createElement("ol",{key:ee,dir:x==="auto"?W3():x,tabIndex:-1,ref:te,className:l,"data-sonner-toaster":!0,"data-sonner-theme":q,"data-y-position":be,"data-lifted":z&&k.length>1&&!o,"data-x-position":_e,style:{"--front-toast-height":`${((ue=O[0])==null?void 0:ue.height)||0}px`,"--width":`${wY}px`,"--gap":`${S}px`,...v,...kY(u,d)},onBlur:Pe=>{ae.current&&!Pe.currentTarget.contains(Pe.relatedTarget)&&(ae.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||ae.current||(ae.current=!0,X.current=Pe.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{F||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},k.filter(Pe=>!Pe.position&&J===0||Pe.position===ee).map((Pe,Ne)=>{var Re,Ce;return yt.createElement(CY,{key:Pe.id,icons:E,index:Ne,toast:Pe,defaultRichColors:p,duration:(Re=_==null?void 0:_.duration)!=null?Re:g,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Ce=_==null?void 0:_.closeButton)!=null?Ce:s,interacting:F,position:ee,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:U,toasts:k.filter(Fe=>Fe.position==Pe.position),heights:O.filter(Fe=>Fe.position==Pe.position),setHeights:L,expandByDefault:o,gap:S,expanded:z,swipeDirections:t.swipeDirections})})):null}))}),Cm=new Map,TY=5*60*1e3,NY=(e,t)=>{var i,o,s,l,u,d,h,p,g,v,b,_,x,S;const n=e.id||e.name,r=e.name||n,a={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((i=e.architecture)==null?void 0:i.modality)??"text->text",input_modalities:((o=e.architecture)==null?void 0:o.input_modalities)??["text"],output_modalities:((s=e.architecture)==null?void 0:s.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((u=e.architecture)==null?void 0:u.instruct_type)??null},pricing:{prompt:((d=e.pricing)==null?void 0:d.prompt)??"0",completion:((h=e.pricing)==null?void 0:h.completion)??"0",request:((p=e.pricing)==null?void 0:p.request)??"0",image:((g=e.pricing)==null?void 0:g.image)??"0",web_search:((v=e.pricing)==null?void 0:v.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((_=e.top_provider)==null?void 0:_.context_length)??e.context_length??null,max_completion_tokens:((x=e.top_provider)==null?void 0:x.max_completion_tokens)??null,is_moderated:((S=e.top_provider)==null?void 0:S.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??KM[t]??[]};return t==="ollama"?(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(a.context_length=8192),n.includes("gpt-4-32k")&&(a.context_length=32768),n.includes("gpt-4-turbo")&&(a.context_length=128e3),n.includes("gpt-4o")&&(a.context_length=128e3),n.includes("gpt-3.5-turbo")&&(a.context_length=16385),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?a.context_length=1048576:n.includes("gemini")&&(a.context_length=32768),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Google")):t==="openai-compatible"&&(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Compatible")),a};async function RY(e,t){const n=`${e.id}-${e.baseURL||""}`,r=Cm.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var s,l,u;let i;const o={Accept:"application/json"};t&&(o.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",o["HTTP-Referer"]=((s=globalThis.location)==null?void 0:s.origin)||"http://localhost:3000",o["X-Title"]="LiteChat";break;case"ollama":const d=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",d).toString(),delete o.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const h=GM(e.baseURL);i=new URL("models",h.endsWith("/")?h:h+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(d){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,d),lt.error(`Invalid Base URL for ${e.name}: ${d instanceof Error?d.message:String(d)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const d=await fetch(i,{headers:o});if(!d.ok){let v=`(${d.status} ${d.statusText})`;try{const b=await d.text();v=b||v;try{const _=JSON.parse(b);v=((u=_==null?void 0:_.error)==null?void 0:u.message)||(_==null?void 0:_.message)||v}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${v}`)}const h=await d.json();let p=[];if(e.type==="ollama"?p=h.models||[]:p=h.data||h||[],!Array.isArray(p))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,h),[];const g=p.map(v=>NY(v,e.type));return g.sort((v,b)=>(v.name||v.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${g.length} models for ${e.name}`),g}catch(d){const h=d instanceof Error?d.message:String(d);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),lt.error(`Failed to fetch models for ${e.name}: ${h}`),Cm.delete(n),[]}})();return Cm.set(n,a),setTimeout(()=>{Cm.get(n)===a&&(Cm.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},TY),a}const aS="provider:lastModelSelection",K3="provider:globalModelSortOrder",Pn=rs(as((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Wt.saveSetting("enableApiKeyManagement",n),Ct.emit(xt.SETTINGS_CHANGED,{key:"enableApiKeyManagement",value:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Wt.loadSetting("enableApiKeyManagement",!0),[r,a,i,o]=await Promise.all([Wt.loadProviderConfigs(),Wt.loadApiKeys(),Wt.loadSetting(K3,[]),Wt.loadSetting(aS,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const s=r.reduce((p,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{p.push(qc(g.id,v))}),p),[]),l=new Set(s),u=i.filter(p=>l.has(p));let d=o;d&&l.has(d)||(d=u[0]??null,d||(d=s[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${d}`)),e({globalModelSortOrder:u,selectedModelId:d,isLoading:!1}),await Wt.saveSetting(aS,d),console.log(`[ProviderStore] Emitting initial ${xt.MODEL_SELECTION_CHANGED} with payload:`,{modelId:d}),Ct.emit(xt.MODEL_SELECTION_CHANGED,{modelId:d})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),lt.error("Failed to load provider data")}},selectModel:n=>{const r=t().selectedModelId;console.log(`[ProviderStore] selectModel called. Current: ${r}, New: ${n}`),r!==n?(e({selectedModelId:n}),Wt.saveSetting(aS,n),console.log(`[ProviderStore] Emitting ${xt.MODEL_SELECTION_CHANGED} with payload:`,{modelId:n}),Ct.emit(xt.MODEL_SELECTION_CHANGED,{modelId:n})):console.log(`[ProviderStore] selectModel skipped: ID ${n} already selected.`)},addApiKey:async(n,r,a)=>{const i=Co(),o=new Date,s={id:i,name:n,value:a,providerId:r,createdAt:o,updatedAt:o};try{return await Wt.saveApiKey(s),e(l=>{l.dbApiKeys.push(s)}),lt.success(`API Key "${n}" added.`),Ct.emit(xt.API_KEY_CHANGED,{keyId:i,action:"added"}),i}catch(l){throw console.error("ProviderStore: Error adding API key",l),lt.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await Wt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(o=>o.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(o=>o.apiKeyId===n?{...o,apiKeyId:null}:o)}),lt.success(`API Key "${r}" deleted.`),Ct.emit(xt.API_KEY_CHANGED,{keyId:n,action:"deleted"})}catch(i){throw console.error("ProviderStore: Error deleting API key",i),lt.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=Co(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Wt.saveProviderConfig(i),e(o=>{o.dbProviderConfigs.push(i)}),lt.success(`Provider "${n.name}" added.`),Ct.emit(xt.PROVIDER_CONFIG_CHANGED,{providerId:r,config:i}),t().fetchModels(r).catch(o=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,o)}),r}catch(o){throw console.error("ProviderStore: Error adding provider config",o),lt.error(`Failed to add Provider: ${o instanceof Error?o.message:String(o)}`),o}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(o=>o.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await Wt.saveProviderConfig(i),e(h=>{const p=h.dbProviderConfigs.findIndex(g=>g.id===n);p!==-1&&(h.dbProviderConfigs[p]=i)}),Ct.emit(xt.PROVIDER_CONFIG_CHANGED,{providerId:n,config:i});const o=t().globalModelSortOrder,s=t().dbProviderConfigs;let l=[...o];const u=s.reduce((h,p)=>(p.isEnabled&&p.enabledModels&&p.enabledModels.forEach(g=>{h.push(qc(p.id,g))}),h),[]),d=new Set(u);l=o.filter(h=>d.has(h)),d.forEach(h=>{l.includes(h)||l.push(h)}),await t().setGlobalModelSortOrder(l)}catch(o){throw console.error("ProviderStore: Error updating provider config",o),lt.error(`Failed to update Provider: ${o instanceof Error?o.message:String(o)}`),o}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await Wt.deleteProviderConfig(n),e(d=>{d.dbProviderConfigs=d.dbProviderConfigs.filter(h=>h.id!==n),delete d.providerFetchStatus[n]}),Ct.emit(xt.PROVIDER_CONFIG_CHANGED,{providerId:n,config:{...r,isEnabled:!1}});const o=t().dbProviderConfigs.reduce((d,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(p=>{d.push(qc(h.id,p))}),d),[]),s=new Set(o),u=t().globalModelSortOrder.filter(d=>s.has(d));await t().setGlobalModelSortOrder(u),lt.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),lt.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){lt.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,o=(a=t().dbApiKeys.find(l=>l.id===i))==null?void 0:a.value,s=await RY(r,o);await t().updateProviderConfig(n,{fetchedModels:s,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),lt.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Wt.saveSetting(K3,r);const a=t().selectedModelId,o=t().dbProviderConfigs.reduce((l,u)=>(u.isEnabled&&u.enabledModels&&u.enabledModels.forEach(d=>{l.push(qc(u.id,d))}),l),[]),s=new Set(o);if(!a||!s.has(a)){const l=r.find(h=>s.has(h)),u=o[0]??null,d=l??u;d!==a&&(console.log(`[ProviderStore] Selection ${a} invalidated or missing. Selecting ${d}`),t().selectModel(d))}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:o}=Yl(n);if(!i||!o)return;const s=r.find(u=>u.id===i);if(!s)return;const l=a.find(u=>u.id===s.apiKeyId);return XC(s,o,l==null?void 0:l.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(o=>o.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const a=r.type;return(eY[a]||[]).map(o=>({id:o.id,name:o.name,context_length:4096,architecture:{modality:"text->text",input_modalities:["text"],output_modalities:["text"]},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:KM[r.type]??[]}))}}))),ub="system",Z3="You are a helpful AI assistant.",Y3=.7,X3=null,J3=null,Q3=null,eI=0,tI=0,nI=!0,db=!0,fb=!1,hb=!1,pb=15,rI=null,aI=null,iI=5,mb=null,Zr=rs(as(e=>({theme:ub,globalSystemPrompt:Z3,temperature:Y3,maxTokens:X3,topP:J3,topK:Q3,presencePenalty:eI,frequencyPenalty:tI,enableAdvancedSettings:nI,enableStreamingMarkdown:db,enableStreamingCodeBlockParsing:fb,foldStreamingCodeBlocks:hb,streamingRenderFPS:pb,gitUserName:rI,gitUserEmail:aI,toolMaxSteps:iI,prismThemeUrl:mb,setTheme:t=>{e({theme:t}),Wt.saveSetting("theme",t)},setGlobalSystemPrompt:t=>{e({globalSystemPrompt:t}),Wt.saveSetting("globalSystemPrompt",t)},setTemperature:t=>{e({temperature:t}),Wt.saveSetting("temperature",t)},setMaxTokens:t=>{e({maxTokens:t}),Wt.saveSetting("maxTokens",t)},setTopP:t=>{e({topP:t}),Wt.saveSetting("topP",t)},setTopK:t=>{e({topK:t}),Wt.saveSetting("topK",t)},setPresencePenalty:t=>{e({presencePenalty:t}),Wt.saveSetting("presencePenalty",t)},setFrequencyPenalty:t=>{e({frequencyPenalty:t}),Wt.saveSetting("frequencyPenalty",t)},setEnableAdvancedSettings:t=>{e({enableAdvancedSettings:t}),Wt.saveSetting("enableAdvancedSettings",t)},setEnableStreamingMarkdown:t=>{e({enableStreamingMarkdown:t}),Wt.saveSetting("enableStreamingMarkdown",t)},setEnableStreamingCodeBlockParsing:t=>{e({enableStreamingCodeBlockParsing:t}),Wt.saveSetting("enableStreamingCodeBlockParsing",t)},setFoldStreamingCodeBlocks:t=>{e({foldStreamingCodeBlocks:t}),Wt.saveSetting("foldStreamingCodeBlocks",t)},setStreamingRenderFPS:t=>{const n=Math.max(3,Math.min(60,t));e({streamingRenderFPS:n}),Wt.saveSetting("streamingRenderFPS",n)},setGitUserName:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserName:n}),Wt.saveSetting("gitUserName",n)},setGitUserEmail:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserEmail:n}),Wt.saveSetting("gitUserEmail",n)},setToolMaxSteps:t=>{const n=Math.max(1,Math.min(20,t));e({toolMaxSteps:n}),Wt.saveSetting("toolMaxSteps",n)},setPrismThemeUrl:t=>{const n=(t==null?void 0:t.trim())||null;e({prismThemeUrl:n}),Wt.saveSetting("prismThemeUrl",n)},loadSettings:async()=>{try{const[t,n,r,a,i,o,s,l,u,d,h,p,g,v,b,_,x]=await Promise.all([Wt.loadSetting("theme",ub),Wt.loadSetting("temperature",Y3),Wt.loadSetting("maxTokens",X3),Wt.loadSetting("topP",J3),Wt.loadSetting("topK",Q3),Wt.loadSetting("presencePenalty",eI),Wt.loadSetting("frequencyPenalty",tI),Wt.loadSetting("globalSystemPrompt",Z3),Wt.loadSetting("enableAdvancedSettings",nI),Wt.loadSetting("enableStreamingMarkdown",db),Wt.loadSetting("enableStreamingCodeBlockParsing",fb),Wt.loadSetting("foldStreamingCodeBlocks",hb),Wt.loadSetting("streamingRenderFPS",pb),Wt.loadSetting("gitUserName",rI),Wt.loadSetting("gitUserEmail",aI),Wt.loadSetting("toolMaxSteps",iI),Wt.loadSetting("prismThemeUrl",mb)]);e({theme:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,globalSystemPrompt:l,enableAdvancedSettings:u,enableStreamingMarkdown:d,enableStreamingCodeBlockParsing:h,foldStreamingCodeBlocks:p,streamingRenderFPS:g,gitUserName:v,gitUserEmail:b,toolMaxSteps:_,prismThemeUrl:x})}catch(t){console.error("SettingsStore: Error loading settings",t)}},resetGeneralSettings:async()=>{try{e({theme:ub,enableStreamingMarkdown:db,enableStreamingCodeBlockParsing:fb,foldStreamingCodeBlocks:hb,streamingRenderFPS:pb,prismThemeUrl:mb}),await Promise.all([Wt.saveSetting("theme",ub),Wt.saveSetting("enableStreamingMarkdown",db),Wt.saveSetting("enableStreamingCodeBlockParsing",fb),Wt.saveSetting("foldStreamingCodeBlocks",hb),Wt.saveSetting("streamingRenderFPS",pb),Wt.saveSetting("prismThemeUrl",mb)]),lt.success("General settings reset to defaults.")}catch(t){console.error("SettingsStore: Error resetting general settings",t),lt.error("Failed to reset general settings.")}}})));async function I2(e,t){const n=Pr.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}function IY(){const e=or.getState(),t=Pn.getState(),n=Zr.getState(),{providerId:r}=Yl(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function OY(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function oI(e){try{const t=e.type||"application/octet-stream",n=$C(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:OY(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),lt.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function sI(e){return e.flatMap(t=>{var a,i,o;const n=[],r=t.prompt;if(r){const s=[];r.content&&s.push({type:"text",text:r.content}),(a=r.metadata)!=null&&a.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{s.push({type:"text",text:`[User attached file: ${l.name}]`})}),s.length>0&&n.push({role:"user",content:s})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(i=t.metadata)!=null&&i.toolCalls&&Array.isArray(t.metadata.toolCalls)){const s=[];t.metadata.toolCalls.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-call"&&u.toolCallId&&u.toolName&&u.args!==void 0?s.push(u):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,u)}}),s.length>0&&n.push({role:"assistant",content:s})}if((o=t.metadata)!=null&&o.toolResults&&Array.isArray(t.metadata.toolResults)){const s=[];t.metadata.toolResults.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-result"&&u.toolCallId&&u.toolName&&u.result!==void 0?s.push(u):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,u)}}),s.length>0&&n.push({role:"tool",content:s})}return n})}const lI=e=>Symbol.iterator in e,cI=e=>"entries"in e,uI=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},jY=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function DY(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!lI(e)||!lI(t)?uI({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):cI(e)&&cI(t)?uI(e,t):jY(e,t)}function hn(e){const t=yt.useRef(void 0);return n=>{const r=e(n);return DY(t.current,r)?t.current:t.current=r}}const MY=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message..."})=>{const a=T.useRef(null),[i,o]=T.useState(!1),[s,l]=T.useState(!1),u=Pr(hn(C=>C.promptControls)),d=or(hn(C=>C.status==="streaming")),{focusInputOnNextRender:h,setFocusInputFlag:p}=ha(hn(C=>({focusInputOnNextRender:C.focusInputOnNextRender,setFocusInputFlag:C.setFocusInputFlag}))),{attachedFilesMetadata:g,clearAttachedFiles:v}=Jc(hn(C=>({attachedFilesMetadata:C.attachedFilesMetadata,clearAttachedFiles:C.clearAttachedFiles})));T.useEffect(()=>{h&&a.current&&(a.current.focus(),p(!1))},[h,p]);const b=T.useMemo(()=>Object.values(u).filter(C=>C.show?C.show():!0),[u]),_=T.useMemo(()=>b.filter(C=>C.renderer),[b]),x=T.useMemo(()=>b.filter(C=>C.triggerRenderer),[b]),S=T.useCallback(async()=>{var j;const k=(((j=a.current)==null?void 0:j.getValue())??"").trim(),R=Jc.getState().attachedFilesMetadata;if(!(!k&&R.length===0)&&!(d||i)){o(!0);try{let O={},L={};for(const K of b){if(K.getParameters){const q=await K.getParameters();q&&(O={...O,...q})}if(K.getMetadata){const q=await K.getMetadata();q&&(L={...L,...q})}}R.length>0&&(L.attachedFiles=[...R]);let z={id:Co(),content:k,parameters:O,metadata:L};Ct.emit(xt.PROMPT_SUBMITTED,{turnData:z});const Y=await I2(av.PROMPT_TURN_FINALIZE,{turnData:z});if(Y===!1){console.log("Prompt submission cancelled by middleware."),o(!1);return}const F=Y&&typeof Y=="object"?Y.turnData:z;await t(F),v(),b.forEach(K=>{K.clearOnSubmit&&K.clearOnSubmit()}),p(!0),l(!1)}catch(O){console.error("Error during prompt submission:",O),lt.error(`Failed to send message: ${O instanceof Error?O.message:String(O)}`)}finally{o(!1)}}},[d,i,b,t,v,p]),E=T.useCallback(C=>{l(C.trim().length>0),Ct.emit(xt.PROMPT_INPUT_CHANGE,{value:C})},[]);return y.jsxs("div",{className:Rt("p-4 space-y-3",n),children:[_.length>0&&y.jsx(h3,{controls:_,area:"panel",className:"flex flex-wrap gap-2 items-start mb-2"}),y.jsx(e,{ref:a,onSubmit:S,disabled:d||i,placeholder:r,onValueChange:E}),y.jsxs("div",{className:"flex items-center justify-between gap-2 mt-2",children:[y.jsx(h3,{controls:x,area:"trigger",className:"flex items-center gap-1 flex-shrink-0"}),y.jsx("div",{className:"flex-grow"}),y.jsx(Bt,{type:"button",size:"icon",onClick:S,disabled:d||i||!s&&g.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(JH,{className:"h-4 w-4"})})]})]})};function qt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function PY(e,t){const n=T.createContext(t),r=i=>{const{children:o,...s}=i,l=T.useMemo(()=>s,Object.values(s));return y.jsx(n.Provider,{value:l,children:o})};r.displayName=e+"Provider";function a(i){const o=T.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function _i(e,t=[]){let n=[];function r(i,o){const s=T.createContext(o),l=n.length;n=[...n,o];const u=h=>{var x;const{scope:p,children:g,...v}=h,b=((x=p==null?void 0:p[e])==null?void 0:x[l])||s,_=T.useMemo(()=>v,Object.values(v));return y.jsx(b.Provider,{value:_,children:g})};u.displayName=i+"Provider";function d(h,p){var b;const g=((b=p==null?void 0:p[e])==null?void 0:b[l])||s,v=T.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(o=>T.createContext(o));return function(s){const l=(s==null?void 0:s[e])||i;return T.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return a.scopeName=e,[r,FY(a,...t)]}function FY(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...s,...h}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var LY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tn=LY.reduce((e,t)=>{const n=Xc(`Primitive.${t}`),r=T.forwardRef((a,i)=>{const{asChild:o,...s}=a,l=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(l,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function YM(e,t){e&&Ps.flushSync(()=>e.dispatchEvent(t))}function Ma(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function $Y(e,t=globalThis==null?void 0:globalThis.document){const n=Ma(e);T.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var BY="DismissableLayer",O2="dismissableLayer.update",zY="dismissableLayer.pointerDownOutside",UY="dismissableLayer.focusOutside",dI,XM=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Uh=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...l}=e,u=T.useContext(XM),[d,h]=T.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=T.useState({}),v=Cn(t,j=>h(j)),b=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(_),S=d?b.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,C=S>=x,k=VY(j=>{const O=j.target,L=[...u.branches].some(z=>z.contains(O));!C||L||(a==null||a(j),o==null||o(j),j.defaultPrevented||s==null||s())},p),R=GY(j=>{const O=j.target;[...u.branches].some(z=>z.contains(O))||(i==null||i(j),o==null||o(j),j.defaultPrevented||s==null||s())},p);return $Y(j=>{S===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&s&&(j.preventDefault(),s()))},p),T.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(dI=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),fI(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=dI)}},[d,p,n,u]),T.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),fI())},[d,u]),T.useEffect(()=>{const j=()=>g({});return document.addEventListener(O2,j),()=>document.removeEventListener(O2,j)},[]),y.jsx(tn.div,{...l,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:qt(e.onFocusCapture,R.onFocusCapture),onBlurCapture:qt(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:qt(e.onPointerDownCapture,k.onPointerDownCapture)})});Uh.displayName=BY;var HY="DismissableLayerBranch",qY=T.forwardRef((e,t)=>{const n=T.useContext(XM),r=T.useRef(null),a=Cn(t,r);return T.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(tn.div,{...e,ref:a})});qY.displayName=HY;function VY(e,t=globalThis==null?void 0:globalThis.document){const n=Ma(e),r=T.useRef(!1),a=T.useRef(()=>{});return T.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let l=function(){JM(zY,n,u,{discrete:!0})};const u={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function GY(e,t=globalThis==null?void 0:globalThis.document){const n=Ma(e),r=T.useRef(!1);return T.useEffect(()=>{const a=i=>{i.target&&!r.current&&JM(UY,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function fI(){const e=new CustomEvent(O2);document.dispatchEvent(e)}function JM(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?YM(a,i):a.dispatchEvent(i)}var $a=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},WY=Zj[" useId ".trim().toString()]||(()=>{}),KY=0;function Wa(e){const[t,n]=T.useState(WY());return $a(()=>{n(r=>r??String(KY++))},[e]),t?`radix-${t}`:""}const ZY=["top","right","bottom","left"],ou=Math.min,Ji=Math.max,Tv=Math.round,gb=Math.floor,Bs=e=>({x:e,y:e}),YY={left:"right",right:"left",bottom:"top",top:"bottom"},XY={start:"end",end:"start"};function j2(e,t,n){return Ji(e,ou(t,n))}function Ul(e,t){return typeof e=="function"?e(t):e}function Hl(e){return e.split("-")[0]}function Hh(e){return e.split("-")[1]}function JC(e){return e==="x"?"y":"x"}function QC(e){return e==="y"?"height":"width"}function su(e){return["top","bottom"].includes(Hl(e))?"y":"x"}function ek(e){return JC(su(e))}function JY(e,t,n){n===void 0&&(n=!1);const r=Hh(e),a=ek(e),i=QC(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Nv(o)),[o,Nv(o)]}function QY(e){const t=Nv(e);return[D2(e),t,D2(t)]}function D2(e){return e.replace(/start|end/g,t=>XY[t])}function eX(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function tX(e,t,n,r){const a=Hh(e);let i=eX(Hl(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(D2)))),i}function Nv(e){return e.replace(/left|right|bottom|top/g,t=>YY[t])}function nX(e){return{top:0,right:0,bottom:0,left:0,...e}}function QM(e){return typeof e!="number"?nX(e):{top:e,right:e,bottom:e,left:e}}function Rv(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function hI(e,t,n){let{reference:r,floating:a}=e;const i=su(t),o=ek(t),s=QC(o),l=Hl(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,p=r[s]/2-a[s]/2;let g;switch(l){case"top":g={x:d,y:r.y-a.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Hh(t)){case"start":g[o]-=p*(n&&u?-1:1);break;case"end":g[o]+=p*(n&&u?-1:1);break}return g}const rX=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=hI(u,r,l),p=r,g={},v=0;for(let b=0;b<s.length;b++){const{name:_,fn:x}=s[b],{x:S,y:E,data:C,reset:k}=await x({x:d,y:h,initialPlacement:r,placement:p,strategy:a,middlewareData:g,rects:u,platform:o,elements:{reference:e,floating:t}});d=S??d,h=E??h,g={...g,[_]:{...g[_],...C}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=hI(u,p,l)),b=-1)}return{x:d,y:h,placement:p,strategy:a,middlewareData:g}};async function s0(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=Ul(t,e),v=QM(g),_=s[p?h==="floating"?"reference":"floating":h],x=Rv(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:u,rootBoundary:d,strategy:l})),S=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=Rv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:S,offsetParent:E,strategy:l}):S);return{top:(x.top-k.top+v.top)/C.y,bottom:(k.bottom-x.bottom+v.bottom)/C.y,left:(x.left-k.left+v.left)/C.x,right:(k.right-x.right+v.right)/C.x}}const aX=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:l}=t,{element:u,padding:d=0}=Ul(e,t)||{};if(u==null)return{};const h=QM(d),p={x:n,y:r},g=ek(a),v=QC(g),b=await o.getDimensions(u),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",E=_?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[g]-p[g]-i.floating[v],k=p[g]-i.reference[g],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let j=R?R[E]:0;(!j||!await(o.isElement==null?void 0:o.isElement(R)))&&(j=s.floating[E]||i.floating[v]);const O=C/2-k/2,L=j/2-b[v]/2-1,z=ou(h[x],L),Y=ou(h[S],L),F=z,K=j-b[v]-Y,q=j/2-b[v]/2+O,fe=j2(F,q,K),te=!l.arrow&&Hh(a)!=null&&q!==fe&&i.reference[v]/2-(q<F?z:Y)-b[v]/2<0,re=te?q<F?q-F:q-K:0;return{[g]:p[g]+re,data:{[g]:fe,centerOffset:q-fe-re,...te&&{alignmentOffset:re}},reset:te}}}),iX=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,..._}=Ul(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Hl(a),S=su(s),E=Hl(s)===s,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=p||(E||!b?[Nv(s)]:QY(s)),R=v!=="none";!p&&R&&k.push(...tX(s,b,v,C));const j=[s,...k],O=await s0(t,_),L=[];let z=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&L.push(O[x]),h){const q=JY(a,o,C);L.push(O[q[0]],O[q[1]])}if(z=[...z,{placement:a,overflows:L}],!L.every(q=>q<=0)){var Y,F;const q=(((Y=i.flip)==null?void 0:Y.index)||0)+1,fe=j[q];if(fe)return{data:{index:q,overflows:z},reset:{placement:fe}};let te=(F=z.filter(re=>re.overflows[0]<=0).sort((re,X)=>re.overflows[1]-X.overflows[1])[0])==null?void 0:F.placement;if(!te)switch(g){case"bestFit":{var K;const re=(K=z.filter(X=>{if(R){const ae=su(X.placement);return ae===S||ae==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ae=>ae>0).reduce((ae,U)=>ae+U,0)]).sort((X,ae)=>X[1]-ae[1])[0])==null?void 0:K[0];re&&(te=re);break}case"initialPlacement":te=s;break}if(a!==te)return{reset:{placement:te}}}return{}}}};function pI(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function mI(e){return ZY.some(t=>e[t]>=0)}const oX=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Ul(e,t);switch(r){case"referenceHidden":{const i=await s0(t,{...a,elementContext:"reference"}),o=pI(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:mI(o)}}}case"escaped":{const i=await s0(t,{...a,altBoundary:!0}),o=pI(i,n.floating);return{data:{escapedOffsets:o,escaped:mI(o)}}}default:return{}}}}};async function sX(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Hl(n),s=Hh(n),l=su(n)==="y",u=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=Ul(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return s&&typeof v=="number"&&(g=s==="end"?v*-1:v),l?{x:g*d,y:p*u}:{x:p*u,y:g*d}}const lX=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,l=await sX(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:o}}}}},cX=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...l}=Ul(e,t),u={x:n,y:r},d=await s0(t,l),h=su(Hl(a)),p=JC(h);let g=u[p],v=u[h];if(i){const _=p==="y"?"top":"left",x=p==="y"?"bottom":"right",S=g+d[_],E=g-d[x];g=j2(S,g,E)}if(o){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",S=v+d[_],E=v-d[x];v=j2(S,v,E)}const b=s.fn({...t,[p]:g,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[h]:o}}}}}},uX=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=Ul(e,t),d={x:n,y:r},h=su(a),p=JC(h);let g=d[p],v=d[h];const b=Ul(s,t),_=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const E=p==="y"?"height":"width",C=i.reference[p]-i.floating[E]+_.mainAxis,k=i.reference[p]+i.reference[E]-_.mainAxis;g<C?g=C:g>k&&(g=k)}if(u){var x,S;const E=p==="y"?"width":"height",C=["top","left"].includes(Hl(a)),k=i.reference[h]-i.floating[E]+(C&&((x=o.offset)==null?void 0:x[h])||0)+(C?0:_.crossAxis),R=i.reference[h]+i.reference[E]+(C?0:((S=o.offset)==null?void 0:S[h])||0)-(C?_.crossAxis:0);v<k?v=k:v>R&&(v=R)}return{[p]:g,[h]:v}}}},dX=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:l=()=>{},...u}=Ul(e,t),d=await s0(t,u),h=Hl(a),p=Hh(a),g=su(a)==="y",{width:v,height:b}=i.floating;let _,x;h==="top"||h==="bottom"?(_=h,x=p===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(x=h,_=p==="end"?"top":"bottom");const S=b-d.top-d.bottom,E=v-d.left-d.right,C=ou(b-d[_],S),k=ou(v-d[x],E),R=!t.middlewareData.shift;let j=C,O=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(O=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(j=S),R&&!p){const z=Ji(d.left,0),Y=Ji(d.right,0),F=Ji(d.top,0),K=Ji(d.bottom,0);g?O=v-2*(z!==0||Y!==0?z+Y:Ji(d.left,d.right)):j=b-2*(F!==0||K!==0?F+K:Ji(d.top,d.bottom))}await l({...t,availableWidth:O,availableHeight:j});const L=await o.getDimensions(s.floating);return v!==L.width||b!==L.height?{reset:{rects:!0}}:{}}}};function Nw(){return typeof window<"u"}function qh(e){return e8(e)?(e.nodeName||"").toLowerCase():"#document"}function to(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ys(e){var t;return(t=(e8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function e8(e){return Nw()?e instanceof Node||e instanceof to(e).Node:!1}function Xo(e){return Nw()?e instanceof Element||e instanceof to(e).Element:!1}function Vs(e){return Nw()?e instanceof HTMLElement||e instanceof to(e).HTMLElement:!1}function gI(e){return!Nw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof to(e).ShadowRoot}function ng(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Jo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function fX(e){return["table","td","th"].includes(qh(e))}function Rw(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function tk(e){const t=nk(),n=Xo(e)?Jo(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function hX(e){let t=lu(e);for(;Vs(t)&&!wh(t);){if(tk(t))return t;if(Rw(t))return null;t=lu(t)}return null}function nk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wh(e){return["html","body","#document"].includes(qh(e))}function Jo(e){return to(e).getComputedStyle(e)}function Iw(e){return Xo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function lu(e){if(qh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||gI(e)&&e.host||Ys(e);return gI(t)?t.host:t}function t8(e){const t=lu(e);return wh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Vs(t)&&ng(t)?t:t8(t)}function l0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=t8(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=to(a);if(i){const s=M2(o);return t.concat(o,o.visualViewport||[],ng(a)?a:[],s&&n?l0(s):[])}return t.concat(a,l0(a,[],n))}function M2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function n8(e){const t=Jo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Vs(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=Tv(n)!==i||Tv(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function rk(e){return Xo(e)?e:e.contextElement}function sh(e){const t=rk(e);if(!Vs(t))return Bs(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=n8(t);let o=(i?Tv(n.width):n.width)/r,s=(i?Tv(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const pX=Bs(0);function r8(e){const t=to(e);return!nk()||!t.visualViewport?pX:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mX(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==to(e)?!1:t}function wd(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=rk(e);let o=Bs(1);t&&(r?Xo(r)&&(o=sh(r)):o=sh(e));const s=mX(i,n,r)?r8(i):Bs(0);let l=(a.left+s.x)/o.x,u=(a.top+s.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(i){const p=to(i),g=r&&Xo(r)?to(r):r;let v=p,b=M2(v);for(;b&&r&&g!==v;){const _=sh(b),x=b.getBoundingClientRect(),S=Jo(b),E=x.left+(b.clientLeft+parseFloat(S.paddingLeft))*_.x,C=x.top+(b.clientTop+parseFloat(S.paddingTop))*_.y;l*=_.x,u*=_.y,d*=_.x,h*=_.y,l+=E,u+=C,v=to(b),b=M2(v)}}return Rv({width:d,height:h,x:l,y:u})}function ak(e,t){const n=Iw(e).scrollLeft;return t?t.left+n:wd(Ys(e)).left+n}function a8(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:ak(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function gX(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Ys(r),s=t?Rw(t.floating):!1;if(r===o||s&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Bs(1);const d=Bs(0),h=Vs(r);if((h||!h&&!i)&&((qh(r)!=="body"||ng(o))&&(l=Iw(r)),Vs(r))){const g=wd(r);u=sh(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const p=o&&!h&&!i?a8(o,l,!0):Bs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-l.scrollTop*u.y+d.y+p.y}}function yX(e){return Array.from(e.getClientRects())}function bX(e){const t=Ys(e),n=Iw(e),r=e.ownerDocument.body,a=Ji(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Ji(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+ak(e);const s=-n.scrollTop;return Jo(r).direction==="rtl"&&(o+=Ji(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function vX(e,t){const n=to(e),r=Ys(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,l=0;if(a){i=a.width,o=a.height;const u=nk();(!u||u&&t==="fixed")&&(s=a.offsetLeft,l=a.offsetTop)}return{width:i,height:o,x:s,y:l}}function wX(e,t){const n=wd(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Vs(e)?sh(e):Bs(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,l=a*i.x,u=r*i.y;return{width:o,height:s,x:l,y:u}}function yI(e,t,n){let r;if(t==="viewport")r=vX(e,n);else if(t==="document")r=bX(Ys(e));else if(Xo(t))r=wX(t,n);else{const a=r8(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Rv(r)}function i8(e,t){const n=lu(e);return n===t||!Xo(n)||wh(n)?!1:Jo(n).position==="fixed"||i8(n,t)}function _X(e,t){const n=t.get(e);if(n)return n;let r=l0(e,[],!1).filter(s=>Xo(s)&&qh(s)!=="body"),a=null;const i=Jo(e).position==="fixed";let o=i?lu(e):e;for(;Xo(o)&&!wh(o);){const s=Jo(o),l=tk(o);!l&&s.position==="fixed"&&(a=null),(i?!l&&!a:!l&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||ng(o)&&!l&&i8(e,o))?r=r.filter(d=>d!==o):a=s,o=lu(o)}return t.set(e,r),r}function xX(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Rw(t)?[]:_X(t,this._c):[].concat(n),r],s=o[0],l=o.reduce((u,d)=>{const h=yI(t,d,a);return u.top=Ji(h.top,u.top),u.right=ou(h.right,u.right),u.bottom=ou(h.bottom,u.bottom),u.left=Ji(h.left,u.left),u},yI(t,s,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function SX(e){const{width:t,height:n}=n8(e);return{width:t,height:n}}function EX(e,t,n){const r=Vs(t),a=Ys(t),i=n==="fixed",o=wd(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=Bs(0);if(r||!r&&!i)if((qh(t)!=="body"||ng(a))&&(s=Iw(t)),r){const p=wd(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else a&&(l.x=ak(a));const u=a&&!r&&!i?a8(a,s):Bs(0),d=o.left+s.scrollLeft-l.x-u.x,h=o.top+s.scrollTop-l.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function iS(e){return Jo(e).position==="static"}function bI(e,t){if(!Vs(e)||Jo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ys(e)===n&&(n=n.ownerDocument.body),n}function o8(e,t){const n=to(e);if(Rw(e))return n;if(!Vs(e)){let a=lu(e);for(;a&&!wh(a);){if(Xo(a)&&!iS(a))return a;a=lu(a)}return n}let r=bI(e,t);for(;r&&fX(r)&&iS(r);)r=bI(r,t);return r&&wh(r)&&iS(r)&&!tk(r)?n:r||hX(e)||n}const CX=async function(e){const t=this.getOffsetParent||o8,n=this.getDimensions,r=await n(e.floating);return{reference:EX(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function kX(e){return Jo(e).direction==="rtl"}const AX={convertOffsetParentRelativeRectToViewportRelativeRect:gX,getDocumentElement:Ys,getClippingRect:xX,getOffsetParent:o8,getElementRects:CX,getClientRects:yX,getDimensions:SX,getScale:sh,isElement:Xo,isRTL:kX};function s8(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function TX(e,t){let n=null,r;const a=Ys(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:p,height:g}=u;if(s||t(),!p||!g)return;const v=gb(h),b=gb(a.clientWidth-(d+p)),_=gb(a.clientHeight-(h+g)),x=gb(d),E={rootMargin:-v+"px "+-b+"px "+-_+"px "+-x+"px",threshold:Ji(0,ou(1,l))||1};let C=!0;function k(R){const j=R[0].intersectionRatio;if(j!==l){if(!C)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!s8(u,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return o(!0),i}function NX(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=rk(e),d=a||i?[...u?l0(u):[],...l0(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=u&&s?TX(u,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),u&&!l&&g.observe(u),g.observe(t));let v,b=l?wd(e):null;l&&_();function _(){const x=wd(e);b&&!s8(b,x)&&n(),b=x,v=requestAnimationFrame(_)}return n(),()=>{var x;d.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const RX=lX,IX=cX,OX=iX,jX=dX,DX=oX,vI=aX,MX=uX,PX=(e,t,n)=>{const r=new Map,a={platform:AX,...n},i={...a.platform,_c:r};return rX(e,t,{...a,platform:i})};var Wb=typeof document<"u"?T.useLayoutEffect:T.useEffect;function Iv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Iv(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Iv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function l8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function wI(e,t){const n=l8(e);return Math.round(t*n)/n}function oS(e){const t=T.useRef(e);return Wb(()=>{t.current=e}),t}function FX(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:l,open:u}=e,[d,h]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=T.useState(r);Iv(p,r)||g(r);const[v,b]=T.useState(null),[_,x]=T.useState(null),S=T.useCallback(X=>{X!==R.current&&(R.current=X,b(X))},[]),E=T.useCallback(X=>{X!==j.current&&(j.current=X,x(X))},[]),C=i||v,k=o||_,R=T.useRef(null),j=T.useRef(null),O=T.useRef(d),L=l!=null,z=oS(l),Y=oS(a),F=oS(u),K=T.useCallback(()=>{if(!R.current||!j.current)return;const X={placement:t,strategy:n,middleware:p};Y.current&&(X.platform=Y.current),PX(R.current,j.current,X).then(ae=>{const U={...ae,isPositioned:F.current!==!1};q.current&&!Iv(O.current,U)&&(O.current=U,Ps.flushSync(()=>{h(U)}))})},[p,t,n,Y,F]);Wb(()=>{u===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[u]);const q=T.useRef(!1);Wb(()=>(q.current=!0,()=>{q.current=!1}),[]),Wb(()=>{if(C&&(R.current=C),k&&(j.current=k),C&&k){if(z.current)return z.current(C,k,K);K()}},[C,k,K,z,L]);const fe=T.useMemo(()=>({reference:R,floating:j,setReference:S,setFloating:E}),[S,E]),te=T.useMemo(()=>({reference:C,floating:k}),[C,k]),re=T.useMemo(()=>{const X={position:n,left:0,top:0};if(!te.floating)return X;const ae=wI(te.floating,d.x),U=wI(te.floating,d.y);return s?{...X,transform:"translate("+ae+"px, "+U+"px)",...l8(te.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ae,top:U}},[n,s,te.floating,d.x,d.y]);return T.useMemo(()=>({...d,update:K,refs:fe,elements:te,floatingStyles:re}),[d,K,fe,te,re])}const LX=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?vI({element:r.current,padding:a}).fn(n):{}:r?vI({element:r,padding:a}).fn(n):{}}}},$X=(e,t)=>({...RX(e),options:[e,t]}),BX=(e,t)=>({...IX(e),options:[e,t]}),zX=(e,t)=>({...MX(e),options:[e,t]}),UX=(e,t)=>({...OX(e),options:[e,t]}),HX=(e,t)=>({...jX(e),options:[e,t]}),qX=(e,t)=>({...DX(e),options:[e,t]}),VX=(e,t)=>({...LX(e),options:[e,t]});var GX="Arrow",c8=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return y.jsx(tn.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});c8.displayName=GX;var WX=c8;function Ow(e){const[t,n]=T.useState(void 0);return $a(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,s=u.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var ik="Popper",[u8,yu]=_i(ik),[KX,d8]=u8(ik),f8=e=>{const{__scopePopper:t,children:n}=e,[r,a]=T.useState(null);return y.jsx(KX,{scope:t,anchor:r,onAnchorChange:a,children:n})};f8.displayName=ik;var h8="PopperAnchor",p8=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=d8(h8,n),o=T.useRef(null),s=Cn(t,o);return T.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(tn.div,{...a,ref:s})});p8.displayName=h8;var ok="PopperContent",[ZX,YX]=u8(ok),m8=T.forwardRef((e,t)=>{var Ne,Re,Ce,Fe,Qe,Le;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=e,_=d8(ok,n),[x,S]=T.useState(null),E=Cn(t,Ie=>S(Ie)),[C,k]=T.useState(null),R=Ow(C),j=(R==null?void 0:R.width)??0,O=(R==null?void 0:R.height)??0,L=r+(i!=="center"?"-"+i:""),z=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},Y=Array.isArray(u)?u:[u],F=Y.length>0,K={padding:z,boundary:Y.filter(JX),altBoundary:F},{refs:q,floatingStyles:fe,placement:te,isPositioned:re,middlewareData:X}=FX({strategy:"fixed",placement:L,whileElementsMounted:(...Ie)=>NX(...Ie,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[$X({mainAxis:a+O,alignmentAxis:o}),l&&BX({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?zX():void 0,...K}),l&&UX({...K}),HX({...K,apply:({elements:Ie,rects:V,availableWidth:me,availableHeight:Ae})=>{const{width:se,height:ie}=V.reference,Q=Ie.floating.style;Q.setProperty("--radix-popper-available-width",`${me}px`),Q.setProperty("--radix-popper-available-height",`${Ae}px`),Q.setProperty("--radix-popper-anchor-width",`${se}px`),Q.setProperty("--radix-popper-anchor-height",`${ie}px`)}}),C&&VX({element:C,padding:s}),QX({arrowWidth:j,arrowHeight:O}),p&&qX({strategy:"referenceHidden",...K})]}),[ae,U]=b8(te),ee=Ma(v);$a(()=>{re&&(ee==null||ee())},[re,ee]);const J=(Ne=X.arrow)==null?void 0:Ne.x,ue=(Re=X.arrow)==null?void 0:Re.y,be=((Ce=X.arrow)==null?void 0:Ce.centerOffset)!==0,[_e,Pe]=T.useState();return $a(()=>{x&&Pe(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...fe,transform:re?fe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(Fe=X.transformOrigin)==null?void 0:Fe.x,(Qe=X.transformOrigin)==null?void 0:Qe.y].join(" "),...((Le=X.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(ZX,{scope:n,placedSide:ae,onArrowChange:k,arrowX:J,arrowY:ue,shouldHideArrow:be,children:y.jsx(tn.div,{"data-side":ae,"data-align":U,...b,ref:E,style:{...b.style,animation:re?void 0:"none"}})})})});m8.displayName=ok;var g8="PopperArrow",XX={top:"bottom",right:"left",bottom:"top",left:"right"},y8=T.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=YX(g8,r),o=XX[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(WX,{...a,ref:n,style:{...a.style,display:"block"}})})});y8.displayName=g8;function JX(e){return e!==null}var QX=e=>({name:"transformOrigin",options:e,fn(t){var _,x,S;const{placement:n,rects:r,middlewareData:a}=t,o=((_=a.arrow)==null?void 0:_.centerOffset)!==0,s=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[u,d]=b8(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((x=a.arrow)==null?void 0:x.x)??0)+s/2,g=(((S=a.arrow)==null?void 0:S.y)??0)+l/2;let v="",b="";return u==="bottom"?(v=o?h:`${p}px`,b=`${-l}px`):u==="top"?(v=o?h:`${p}px`,b=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,b=o?h:`${g}px`):u==="left"&&(v=`${r.floating.width+l}px`,b=o?h:`${g}px`),{data:{x:v,y:b}}}});function b8(e){const[t,n="center"]=e.split("-");return[t,n]}var jw=f8,rg=p8,Dw=m8,Mw=y8,eJ="Portal",Vh=T.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=T.useState(!1);$a(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?ZM.createPortal(y.jsx(tn.div,{...r,ref:t}),o):null});Vh.displayName=eJ;function tJ(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var Ca=e=>{const{present:t,children:n}=e,r=nJ(t),a=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),i=Cn(r.ref,rJ(a));return typeof n=="function"||r.isPresent?T.cloneElement(a,{ref:i}):null};Ca.displayName="Presence";function nJ(e){const[t,n]=T.useState(),r=T.useRef(null),a=T.useRef(e),i=T.useRef("none"),o=e?"mounted":"unmounted",[s,l]=tJ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const u=yb(r.current);i.current=s==="mounted"?u:"none"},[s]),$a(()=>{const u=r.current,d=a.current;if(d!==e){const p=i.current,g=yb(u);e?l("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),$a(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=g=>{const b=yb(r.current).includes(g.animationName);if(g.target===t&&b&&(l("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},p=g=>{g.target===t&&(i.current=yb(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:T.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function yb(e){return(e==null?void 0:e.animationName)||"none"}function rJ(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var aJ=Zj[" useInsertionEffect ".trim().toString()]||$a;function Qo({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=iJ({defaultProp:t,onChange:n}),s=e!==void 0,l=s?e:a;{const d=T.useRef(e!==void 0);T.useEffect(()=>{const h=d.current;h!==s&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=s},[s,r])}const u=T.useCallback(d=>{var h;if(s){const p=oJ(d)?d(e):d;p!==e&&((h=o.current)==null||h.call(o,p))}else i(d)},[s,e,i,o]);return[l,u]}function iJ({defaultProp:e,onChange:t}){const[n,r]=T.useState(e),a=T.useRef(n),i=T.useRef(t);return aJ(()=>{i.current=t},[t]),T.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function oJ(e){return typeof e=="function"}var v8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sJ="VisuallyHidden",w8=T.forwardRef((e,t)=>y.jsx(tn.span,{...e,ref:t,style:{...v8,...e.style}}));w8.displayName=sJ;var lJ=w8,[Pw,C_e]=_i("Tooltip",[yu]),Fw=yu(),_8="TooltipProvider",cJ=700,P2="tooltip.open",[uJ,sk]=Pw(_8),x8=e=>{const{__scopeTooltip:t,delayDuration:n=cJ,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=T.useRef(!0),s=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),y.jsx(uJ,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:T.useCallback(u=>{s.current=u},[]),disableHoverableContent:a,children:i})};x8.displayName=_8;var c0="Tooltip",[dJ,ag]=Pw(c0),S8=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,l=sk(c0,e.__scopeTooltip),u=Fw(t),[d,h]=T.useState(null),p=Wa(),g=T.useRef(0),v=o??l.disableHoverableContent,b=s??l.delayDuration,_=T.useRef(!1),[x,S]=Qo({prop:r,defaultProp:a??!1,onChange:j=>{j?(l.onOpen(),document.dispatchEvent(new CustomEvent(P2))):l.onClose(),i==null||i(j)},caller:c0}),E=T.useMemo(()=>x?_.current?"delayed-open":"instant-open":"closed",[x]),C=T.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,S(!0)},[S]),k=T.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),R=T.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,S(!0),g.current=0},b)},[b,S]);return T.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),y.jsx(jw,{...u,children:y.jsx(dJ,{scope:t,contentId:p,open:x,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:T.useCallback(()=>{l.isOpenDelayedRef.current?R():C()},[l.isOpenDelayedRef,R,C]),onTriggerLeave:T.useCallback(()=>{v?k():(window.clearTimeout(g.current),g.current=0)},[k,v]),onOpen:C,onClose:k,disableHoverableContent:v,children:n})})};S8.displayName=c0;var F2="TooltipTrigger",E8=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=ag(F2,n),i=sk(F2,n),o=Fw(n),s=T.useRef(null),l=Cn(t,s,a.onTriggerChange),u=T.useRef(!1),d=T.useRef(!1),h=T.useCallback(()=>u.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(rg,{asChild:!0,...o,children:y.jsx(tn.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:l,onPointerMove:qt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:qt(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:qt(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:qt(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:qt(e.onBlur,a.onClose),onClick:qt(e.onClick,a.onClose)})})});E8.displayName=F2;var lk="TooltipPortal",[fJ,hJ]=Pw(lk,{forceMount:void 0}),C8=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=ag(lk,t);return y.jsx(fJ,{scope:t,forceMount:n,children:y.jsx(Ca,{present:n||i.open,children:y.jsx(Vh,{asChild:!0,container:a,children:r})})})};C8.displayName=lk;var _h="TooltipContent",k8=T.forwardRef((e,t)=>{const n=hJ(_h,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=ag(_h,e.__scopeTooltip);return y.jsx(Ca,{present:r||o.open,children:o.disableHoverableContent?y.jsx(A8,{side:a,...i,ref:t}):y.jsx(pJ,{side:a,...i,ref:t})})}),pJ=T.forwardRef((e,t)=>{const n=ag(_h,e.__scopeTooltip),r=sk(_h,e.__scopeTooltip),a=T.useRef(null),i=Cn(t,a),[o,s]=T.useState(null),{trigger:l,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,p=T.useCallback(()=>{s(null),h(!1)},[h]),g=T.useCallback((v,b)=>{const _=v.currentTarget,x={x:v.clientX,y:v.clientY},S=bJ(x,_.getBoundingClientRect()),E=vJ(x,S),C=wJ(b.getBoundingClientRect()),k=xJ([...E,...C]);s(k),h(!0)},[h]);return T.useEffect(()=>()=>p(),[p]),T.useEffect(()=>{if(l&&d){const v=_=>g(_,d),b=_=>g(_,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",b)}}},[l,d,g,p]),T.useEffect(()=>{if(o){const v=b=>{const _=b.target,x={x:b.clientX,y:b.clientY},S=(l==null?void 0:l.contains(_))||(d==null?void 0:d.contains(_)),E=!_J(x,o);S?p():E&&(p(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,o,u,p]),y.jsx(A8,{...e,ref:i})}),[mJ,gJ]=Pw(c0,{isInside:!1}),yJ=H7("TooltipContent"),A8=T.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,l=ag(_h,n),u=Fw(n),{onClose:d}=l;return T.useEffect(()=>(document.addEventListener(P2,d),()=>document.removeEventListener(P2,d)),[d]),T.useEffect(()=>{if(l.trigger){const h=p=>{const g=p.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),y.jsx(Uh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:y.jsxs(Dw,{"data-state":l.stateAttribute,...u,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(yJ,{children:r}),y.jsx(mJ,{scope:n,isInside:!0,children:y.jsx(lJ,{id:l.contentId,role:"tooltip",children:a||r})})]})})});k8.displayName=_h;var T8="TooltipArrow",N8=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Fw(n);return gJ(T8,n).isInside?null:y.jsx(Mw,{...a,...r,ref:t})});N8.displayName=T8;function bJ(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function vJ(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function wJ(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function _J(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],l=t[o],u=s.x,d=s.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(a=!a)}return a}function xJ(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),SJ(t)}function SJ(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var EJ=x8,CJ=S8,kJ=E8,AJ=C8,TJ=k8,NJ=N8;function er({delayDuration:e=0,...t}){return y.jsx(EJ,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function nr({...e}){return y.jsx(er,{children:y.jsx(CJ,{"data-slot":"tooltip",...e})})}function rr({...e}){return y.jsx(kJ,{"data-slot":"tooltip-trigger",...e})}function ar({className:e,sideOffset:t=0,children:n,...r}){return y.jsx(AJ,{children:y.jsxs(TJ,{"data-slot":"tooltip-content",sideOffset:t,className:Rt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,y.jsx(NJ,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var sS={exports:{}},_I;function RJ(){return _I||(_I=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,o={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof l?new l(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var k,R;switch(s.util.type(E)){case"Object":if(R=s.util.objId(E),C[R])return C[R];k={},C[R]=k;for(var j in E)E.hasOwnProperty(j)&&(k[j]=S(E[j],C));return k;case"Array":return R=s.util.objId(E),C[R]?C[R]:(k=[],C[R]=k,E.forEach(function(O,L){k[L]=S(O,C)}),k);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var k="no-"+E;S;){var R=S.classList;if(R.contains(E))return!0;if(R.contains(k))return!1;S=S.parentElement}return!!C}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(S,E){var C=s.util.clone(s.languages[S]);for(var k in E)C[k]=E[k];return C},insertBefore:function(S,E,C,k){k=k||s.languages;var R=k[S],j={};for(var O in R)if(R.hasOwnProperty(O)){if(O==E)for(var L in C)C.hasOwnProperty(L)&&(j[L]=C[L]);C.hasOwnProperty(O)||(j[O]=R[O])}var z=k[S];return k[S]=j,s.languages.DFS(s.languages,function(Y,F){F===z&&Y!=S&&(this[Y]=j)}),j},DFS:function S(E,C,k,R){R=R||{};var j=s.util.objId;for(var O in E)if(E.hasOwnProperty(O)){C.call(E,O,E[O],k||O);var L=E[O],z=s.util.type(L);z==="Object"&&!R[j(L)]?(R[j(L)]=!0,S(L,C,null,R)):z==="Array"&&!R[j(L)]&&(R[j(L)]=!0,S(L,C,O,R))}}},plugins:{},highlightAll:function(S,E){s.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var k={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),s.hooks.run("before-all-elements-highlight",k);for(var R=0,j;j=k.elements[R++];)s.highlightElement(j,E===!0,k.callback)},highlightElement:function(S,E,C){var k=s.util.getLanguage(S),R=s.languages[k];s.util.setLanguage(S,k);var j=S.parentElement;j&&j.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(j,k);var O=S.textContent,L={element:S,language:k,grammar:R,code:O};function z(F){L.highlightedCode=F,s.hooks.run("before-insert",L),L.element.innerHTML=L.highlightedCode,s.hooks.run("after-highlight",L),s.hooks.run("complete",L),C&&C.call(L.element)}if(s.hooks.run("before-sanity-check",L),j=L.element.parentElement,j&&j.nodeName.toLowerCase()==="pre"&&!j.hasAttribute("tabindex")&&j.setAttribute("tabindex","0"),!L.code){s.hooks.run("complete",L),C&&C.call(L.element);return}if(s.hooks.run("before-highlight",L),!L.grammar){z(s.util.encode(L.code));return}if(E&&r.Worker){var Y=new Worker(s.filename);Y.onmessage=function(F){z(F.data)},Y.postMessage(JSON.stringify({language:L.language,code:L.code,immediateClose:!0}))}else z(s.highlight(L.code,L.grammar,L.language))},highlight:function(S,E,C){var k={code:S,grammar:E,language:C};if(s.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=s.tokenize(k.code,k.grammar),s.hooks.run("after-tokenize",k),l.stringify(s.util.encode(k.tokens),k.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var k in C)E[k]=C[k];delete E.rest}var R=new h;return p(R,R.head,S),d(S,R,E,R.head,0),v(R)},hooks:{all:{},add:function(S,E){var C=s.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=s.hooks.all[S];if(!(!C||!C.length))for(var k=0,R;R=C[k++];)R(E)}},Token:l};r.Prism=s;function l(S,E,C,k){this.type=S,this.content=E,this.alias=C,this.length=(k||"").length|0}l.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function(z){k+=S(z,C)}),k}var R={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},j=E.alias;j&&(Array.isArray(j)?Array.prototype.push.apply(R.classes,j):R.classes.push(j)),s.hooks.run("wrap",R);var O="";for(var L in R.attributes)O+=" "+L+'="'+(R.attributes[L]||"").replace(/"/g,"&quot;")+'"';return"<"+R.tag+' class="'+R.classes.join(" ")+'"'+O+">"+R.content+"</"+R.tag+">"};function u(S,E,C,k){S.lastIndex=E;var R=S.exec(C);if(R&&k&&R[1]){var j=R[1].length;R.index+=j,R[0]=R[0].slice(j)}return R}function d(S,E,C,k,R,j){for(var O in C)if(!(!C.hasOwnProperty(O)||!C[O])){var L=C[O];L=Array.isArray(L)?L:[L];for(var z=0;z<L.length;++z){if(j&&j.cause==O+","+z)return;var Y=L[z],F=Y.inside,K=!!Y.lookbehind,q=!!Y.greedy,fe=Y.alias;if(q&&!Y.pattern.global){var te=Y.pattern.toString().match(/[imsuy]*$/)[0];Y.pattern=RegExp(Y.pattern.source,te+"g")}for(var re=Y.pattern||Y,X=k.next,ae=R;X!==E.tail&&!(j&&ae>=j.reach);ae+=X.value.length,X=X.next){var U=X.value;if(E.length>S.length)return;if(!(U instanceof l)){var ee=1,J;if(q){if(J=u(re,ae,S,K),!J||J.index>=S.length)break;var Pe=J.index,ue=J.index+J[0].length,be=ae;for(be+=X.value.length;Pe>=be;)X=X.next,be+=X.value.length;if(be-=X.value.length,ae=be,X.value instanceof l)continue;for(var _e=X;_e!==E.tail&&(be<ue||typeof _e.value=="string");_e=_e.next)ee++,be+=_e.value.length;ee--,U=S.slice(ae,be),J.index-=ae}else if(J=u(re,0,U,K),!J)continue;var Pe=J.index,Ne=J[0],Re=U.slice(0,Pe),Ce=U.slice(Pe+Ne.length),Fe=ae+U.length;j&&Fe>j.reach&&(j.reach=Fe);var Qe=X.prev;Re&&(Qe=p(E,Qe,Re),ae+=Re.length),g(E,Qe,ee);var Le=new l(O,F?s.tokenize(Ne,F):Ne,fe,Ne);if(X=p(E,Qe,Le),Ce&&p(E,X,Ce),ee>1){var Ie={cause:O+","+z,reach:Fe};d(S,E,C,X.prev,ae,Ie),j&&Ie.reach>j.reach&&(j.reach=Ie.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function p(S,E,C){var k=E.next,R={value:C,prev:E,next:k};return E.next=R,k.prev=R,S.length++,R}function g(S,E,C){for(var k=E.next,R=0;R<C&&k!==S.tail;R++)k=k.next;E.next=k,k.prev=E,S.length-=R}function v(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,k=E.code,R=E.immediateClose;r.postMessage(s.highlight(k,s.languages[C],C)),R&&r.close()},!1)),s;var b=s.util.currentScript();b&&(s.filename=b.src,b.hasAttribute("data-manual")&&(s.manual=!0));function _(){s.manual||s.highlightAll()}if(!s.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return s}(t);e.exports&&(e.exports=n),typeof ld<"u"&&(ld.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var o={};o["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};s["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var l={};l[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,_){return" Error "+b+" while fetching file: "+_},i=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",l="loading",u="loaded",d="failed",h="pre[data-src]:not(["+s+'="'+u+'"]):not(['+s+'="'+l+'"])';function p(b,_,x){var S=new XMLHttpRequest;S.open("GET",b,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?_(S.responseText):S.status>=400?x(a(S.status,S.statusText)):x(i))},S.send(null)}function g(b){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(_){var x=Number(_[1]),S=_[2],E=_[3];return S?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var _=b.element;if(_.matches(h)){b.code="",_.setAttribute(s,l);var x=_.appendChild(document.createElement("CODE"));x.textContent=r;var S=_.getAttribute("data-src"),E=b.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=o[C]||C}n.util.setLanguage(x,E),n.util.setLanguage(_,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),p(S,function(R){_.setAttribute(s,u);var j=g(_.getAttribute("data-range"));if(j){var O=R.split(/\r\n?|\n/g),L=j[0],z=j[1]==null?O.length:j[1];L<0&&(L+=O.length),L=Math.max(0,Math.min(L-1,O.length)),z<0&&(z+=O.length),z=Math.max(0,Math.min(z,O.length)),R=O.slice(L,z).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(L+1))}x.textContent=R,n.highlightElement(x)},function(R){_.setAttribute(s,d),x.textContent=R})}}),n.plugins.fileHighlight={highlight:function(_){for(var x=(_||document).querySelectorAll(h),S=0,E;E=x[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(sS)),sS.exports}var IJ=RJ();const OJ=li(IJ);var xI={},SI;function jJ(){return SI||(SI=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),xI}jJ();var EI={},CI;function DJ(){return CI||(CI=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),EI}DJ();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,o=0;o<a.length;o++)i[a[o]]=e.languages.bash[a[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(h){d!==h&&(e.languages.markdown[d].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function h(p){if(!(!p||typeof p=="string"))for(var g=0,v=p.length;g<v;g++){var b=p[g];if(b.type!=="code"){h(b.content);continue}var _=b.content[1],x=b.content[3];if(_&&x&&_.type==="code-language"&&x.type==="code-block"&&typeof _.content=="string"){var S=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var h="",p=0,g=d.classes.length;p<g;p++){var v=d.classes[p],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var _=e.languages[h];if(_)d.content=e.highlight(u(d.content),_,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(x);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var h=d.replace(o,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),l(v)}else{var b=s[g];return b||p}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(s,l){l=(l||"").replace(/m/g,"")+"m";var u=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return s});return RegExp(u,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(i),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var kI={},AI;function MJ(){return AI||(AI=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),kI}MJ();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const TI="prism-theme-link",lS="prism-default-light-theme-link",cS="prism-default-dark-theme-link",PJ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-material-light.min.css",FJ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-coldark-dark.min.css",NI=e=>e.replace("github.com","raw.githubusercontent.com").replace("/blob/","/"),ig=({lang:e,code:t,isStreaming:n=!1})=>{const{prismThemeUrl:r,theme:a,foldStreamingCodeBlocks:i}=Zr(hn(S=>({prismThemeUrl:S.prismThemeUrl,theme:S.theme,foldStreamingCodeBlocks:S.foldStreamingCodeBlocks}))),[o,s]=T.useState(!1),[l,u]=T.useState(n?i:!1),d=T.useRef(null),h=T.useMemo(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),p=a==="system"?h:a;T.useEffect(()=>{const S=(C,k)=>{const R=document.getElementById(k);if(R)R.href!==C&&(R.href=C);else{const j=document.createElement("link");j.id=k,j.rel="stylesheet",j.href=C,document.head.appendChild(j)}},E=C=>{const k=document.getElementById(C);k&&k.remove()};r?(S(r,TI),E(lS),E(cS)):(E(TI),p==="dark"?(S(NI(FJ),cS),E(lS)):(S(NI(PJ),lS),E(cS)))},[r,p]);const g=T.useCallback(()=>{if(d.current&&t)try{d.current.textContent=t,OJ.highlightElement(d.current)}catch(S){console.error("Prism highlight error:",S),d.current.textContent=t}else d.current&&(d.current.textContent="")},[t]);T.useEffect(()=>{l||g()},[t,e,l,g]);const v=async()=>{try{await navigator.clipboard.writeText(t),s(!0),lt.success("Code copied to clipboard!"),setTimeout(()=>s(!1),1500)}catch(S){lt.error("Failed to copy code."),console.error("Clipboard copy failed:",S)}},b=()=>{const S=l;u(E=>!E),S&&setTimeout(g,0)},_=e?`language-${e}`:"language-plaintext",x=T.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return y.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[y.jsxs("div",{className:"code-block-header",children:[y.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:b,"aria-label":l?"Unfold code":"Fold code",children:y.jsx(IC,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{side:"top",children:l?"Unfold":"Fold"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:v,"aria-label":"Copy code",children:o?y.jsx(Ks,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(jC,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{side:"top",children:"Copy"})]})})]})]}),!l&&y.jsx("div",{className:"overflow-hidden w-full",children:y.jsx("pre",{className:Rt("overflow-x-auto w-full relative"),children:y.jsx("code",{ref:d,className:_+" inline-block min-w-full",children:t})})}),l&&y.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:b,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:x})})]})};var st;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(st||(st={}));const RI={[st.EPERM]:"Operation not permitted",[st.ENOENT]:"No such file or directory",[st.EINTR]:"Interrupted system call",[st.EIO]:"Input/output error",[st.ENXIO]:"No such device or address",[st.EBADF]:"Bad file descriptor",[st.EAGAIN]:"Resource temporarily unavailable",[st.ENOMEM]:"Cannot allocate memory",[st.EACCES]:"Permission denied",[st.EFAULT]:"Bad address",[st.ENOTBLK]:"Block device required",[st.EBUSY]:"Resource busy or locked",[st.EEXIST]:"File exists",[st.EXDEV]:"Invalid cross-device link",[st.ENODEV]:"No such device",[st.ENOTDIR]:"File is not a directory",[st.EISDIR]:"File is a directory",[st.EINVAL]:"Invalid argument",[st.ENFILE]:"Too many open files in system",[st.EMFILE]:"Too many open files",[st.ETXTBSY]:"Text file busy",[st.EFBIG]:"File is too big",[st.ENOSPC]:"No space left on disk",[st.ESPIPE]:"Illegal seek",[st.EROFS]:"Cannot modify a read-only file system",[st.EMLINK]:"Too many links",[st.EPIPE]:"Broken pipe",[st.EDOM]:"Numerical argument out of domain",[st.ERANGE]:"Numerical result out of range",[st.EDEADLK]:"Resource deadlock would occur",[st.ENAMETOOLONG]:"File name too long",[st.ENOLCK]:"No locks available",[st.ENOSYS]:"Function not implemented",[st.ENOTEMPTY]:"Directory is not empty",[st.ELOOP]:"Too many levels of symbolic links",[st.ENOMSG]:"No message of desired type",[st.EBADE]:"Invalid exchange",[st.EBADR]:"Invalid request descriptor",[st.EXFULL]:"Exchange full",[st.ENOANO]:"No anode",[st.EBADRQC]:"Invalid request code",[st.ENOSTR]:"Device not a stream",[st.ENODATA]:"No data available",[st.ETIME]:"Timer expired",[st.ENOSR]:"Out of streams resources",[st.ENONET]:"Machine is not on the network",[st.EREMOTE]:"Object is remote",[st.ENOLINK]:"Link has been severed",[st.ECOMM]:"Communication error on send",[st.EPROTO]:"Protocol error",[st.EBADMSG]:"Bad message",[st.EOVERFLOW]:"Value too large for defined data type",[st.EBADFD]:"File descriptor in bad state",[st.ESTRPIPE]:"Streams pipe error",[st.ENOTSOCK]:"Socket operation on non-socket",[st.EDESTADDRREQ]:"Destination address required",[st.EMSGSIZE]:"Message too long",[st.EPROTOTYPE]:"Protocol wrong type for socket",[st.ENOPROTOOPT]:"Protocol not available",[st.EPROTONOSUPPORT]:"Protocol not supported",[st.ESOCKTNOSUPPORT]:"Socket type not supported",[st.ENOTSUP]:"Operation is not supported",[st.ENETDOWN]:"Network is down",[st.ENETUNREACH]:"Network is unreachable",[st.ENETRESET]:"Network dropped connection on reset",[st.ETIMEDOUT]:"Connection timed out",[st.ECONNREFUSED]:"Connection refused",[st.EHOSTDOWN]:"Host is down",[st.EHOSTUNREACH]:"No route to host",[st.EALREADY]:"Operation already in progress",[st.EINPROGRESS]:"Operation now in progress",[st.ESTALE]:"Stale file handle",[st.EREMOTEIO]:"Remote I/O error",[st.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(st[t],RI[st[t]],n,r)}constructor(t,n=RI[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=st[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var uS={exports:{}},II;function LJ(){return II||(II=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new a(d,h||l,p),v=n?n+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,v=new Array(g);p<g;p++)v[p]=h[p].fn;return v},s.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},s.prototype.emit=function(u,d,h,p,g,v){var b=n?n+u:u;if(!this._events[b])return!1;var _=this._events[b],x=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),x){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,h),!0;case 4:return _.fn.call(_.context,d,h,p),!0;case 5:return _.fn.call(_.context,d,h,p,g),!0;case 6:return _.fn.call(_.context,d,h,p,g,v),!0}for(E=1,S=new Array(x-1);E<x;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var C=_.length,k;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(u,_[E].fn,void 0,!0),x){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,d);break;case 3:_[E].fn.call(_[E].context,d,h);break;case 4:_[E].fn.call(_[E].context,d,h,p);break;default:if(!S)for(k=1,S=new Array(x-1);k<x;k++)S[k-1]=arguments[k];_[E].fn.apply(_[E].context,S)}}return!0},s.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},s.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},s.prototype.removeListener=function(u,d,h,p){var g=n?n+u:u;if(!this._events[g])return this;if(!d)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var b=0,_=[],x=v.length;b<x;b++)(v[b].fn!==d||p&&!v[b].once||h&&v[b].context!==h)&&_.push(v[b]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(uS)),uS.exports}var $J=LJ();const ck=li($J);var qj;let BJ=class extends ck{constructor(n){super();mi(this,qj,"List");mi(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),o=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),o}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(qj=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function OI(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function mr(e){throw e}const jI=Intl.NumberFormat("en",{notation:"compact"});jI.format.bind(jI);function Rd(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function zJ(e){try{return JSON.parse(e),!0}catch{return!1}}function L2(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function uk(e){return e.at(0).toUpperCase()+e.slice(1)}const UJ=new TextEncoder;function od(e){return UJ.encode(e)}const DI=new TextDecoder;function dk(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return DI.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),DI.decode(t)}function u0(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=u0(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function HJ(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var qJ={};let VJ="process"in globalThis&&"env"in globalThis.process&&qJ.U_DEBUG=="true";function d0(...e){VJ&&console.debug("[U]",...e)}const MI=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],GJ=[...MI,...MI.map(e=>uk(e)),"char"],fk=/^(u?int|float)(8|16|32|64|128)$/i;function R8(e){return e=="char"?"uint8":e.toLowerCase()}function hk(e){return fk.test(e.toString())}function $2(e){return e=="char"||fk.test(e.toString().toLowerCase())}function WJ(e){if(!$2(e))throw new TypeError("Not a valid primitive type: "+e)}const PI=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function I8(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function KJ(e){return e!=null&&typeof e=="object"&&"struct"in e}function Lw(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function Go(e){return typeof e=="function"&&Symbol.metadata in e&&KJ(e[Symbol.metadata])}function og(e){return e!=null&&typeof e=="object"&&Go(e.constructor)}function O8(e){if(!og(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function pk(e){return og(e)||Go(e)}function j8(e){if(!pk(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function mk(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function zr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=zr(e[i]);return a}if(typeof e=="string")return WJ(e),+R8(e).match(fk)[2]/8;if(mk(e))return e[Symbol.size];j8(e);const t=Go(e)?e:e.constructor;Lw(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(Go(e))return r;for(const a of n.members.values()){const i=e[a.name];if(og(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,zr(i)):r+=zr(i);continue}if(typeof a.length!="string")continue;let o=0;for(let s=0;s<e[a.length];s++)o+=zr(pk(i[s])?i[s]:a.type);n.isUnion?r=Math.max(r,o):r+=o}return r}function ZJ(e,t){var i;j8(e);const n=Go(e)?e:e.constructor;Lw(n);const{struct:r}=n[Symbol.metadata];if(Go(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??mr(new Error("Struct does not have member: "+t));let a=0;for(const o of r.members.values()){if(o.name==t)return a;const s=e[o.name];a+=zr(pk(s)?s:o.type)}throw new Error("Struct does not have member: "+t)}function YJ(e,t){return Math.ceil(e/t)*t}function Id(e={}){return function(n,r){const a=new Map;let i=0,o=!1;for(const{name:s,type:l,length:u}of I8(r)){if(!$2(l)&&!Go(l))throw new TypeError("Not a valid type: "+l);if(typeof u=="string"){const p=a.get(u);if(!p)throw new Error(`"${u}" is undefined or declared after "${s}"`);if(!hk(p.type))throw new Error(`"${u}" is not a number and cannot be used to count "${s}"`)}let d=`${typeof l=="string"?l:l.name} ${s}`;u!==void 0&&(d+=`[${u}]`),a.set(s,{name:s,staticOffset:e.isUnion?0:i,type:$2(l)?R8(l):l,length:u,decl:d});const h=typeof u=="string"||Go(l)&&l[Symbol.metadata].struct.isDynamic?0:zr(l)*(u||1);o||(o=Go(l)?l[Symbol.metadata].struct.isDynamic:typeof u=="string"),i=e.isUnion?Math.max(i,h):i+h,i=YJ(i,e.align||1),d0("define",n.name+"."+s)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:o,isUnion:e.isUnion??!1},n}}function f0(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return I8(r).push({name:a,type:e,length:t}),n}}function D8(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:mr(new Error("Array lengths must be natural numbers"))}function Ga(e){if(mk(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();O8(e),Lw(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=zr(e),a=new Uint8Array(r),i=new DataView(a.buffer);d0("serialize",e.constructor.name);let o=0,s=0;for(const l of n.values()){const u=D8(e,l);d0("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name][d]:e[l.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),o=s,s+=og(h)?zr(h):zr(l.type),!hk(l.type)){a.set(h?Ga(h):new Uint8Array(zr(l.type)),o);continue}const p=`set${uk(l.type)}`;if(p=="setInt64"){i.setBigInt64(o,BigInt(h),!t.bigEndian);continue}if(p=="setUint64"){i.setBigUint64(o,BigInt(h),!t.bigEndian);continue}if(p=="setInt128"){i.setBigUint64(o+(t.bigEndian?8:0),h&PI,!t.bigEndian),i.setBigInt64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setUint128"){i.setBigUint64(o+(t.bigEndian?8:0),h&PI,!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setFloat128"){i.setFloat64(o+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[p](o,Number(h),!t.bigEndian)}}return a}function $w(e,t){const n=HJ(t);if(mk(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);O8(e),Lw(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);d0("deserialize",e.constructor.name);let o=0,s=0;for(const l of a.values()){const u=D8(e,l);d0("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name]:e;const p=u!=-1?d:l.name,g=h[p]===null||h[p]===void 0,v=g&&Go(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(o=s,!og(h[p])&&!v&&(s+=zr(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,d)+String.fromCharCode(i.getUint8(o))+e[l.name].slice(d+1);continue}if(!hk(l.type)){if(v&&Go(l.type))h[p]??(h[p]=new l.type);else if(g)continue;$w(h[p],new Uint8Array(n.subarray(o))),s+=zr(h[p]);continue}u&&u!=-1&&(h||(h=[]));const b=`get${uk(l.type)}`;if(b=="getInt64"){h[p]=i.getBigInt64(o,!r.bigEndian);continue}if(b=="getUint64"){h[p]=i.getBigUint64(o,!r.bigEndian);continue}if(b=="getInt128"){h[p]=i.getBigInt64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[p]=i.getBigUint64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[p]=i.getFloat64(o+(r.bigEndian?8:0),!r.bigEndian);continue}h[p]=i[b](o,!r.bigEndian)}}}function XJ(e){function t(n,r){return typeof n=="number"||typeof n=="string"?f0(e,n):f0(e)(n,r)}return t}const _n=Object.fromEntries(GJ.map(e=>[e,XJ(e)]));function JJ(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const os={root:"/",pwd:"/",credentials:JJ({uid:0,gid:0}),descriptors:new Map};function M8(e,t){let n="",r=0,a=-1,i=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o=="/")break;o="/"}if(o=="/"){if(!(a===s-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}else if(n.length!==0){n="",r=0,a=s,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o==="."&&i!==-1?++i:i=-1}return n}function ql(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:os.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=M8(n,!r),r?`/${n}`:n.length?n:"/"}function QJ(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=M8(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function sr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?QJ(t):"."}function P8(e,t){if(e===t||(e=ql.call(this,e),t=ql.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,o=t.length-i,s=a<o?a:o;let l=-1,u=0;for(;u<s;u++){const h=e[n+u];if(h!==t[i+u])break;h==="/"&&(l=u)}if(u===s)if(o>s){if(t[i+u]==="/")return t.slice(i+u+1);if(u===0)return t.slice(i+u)}else a>s&&(e[n+u]==="/"?l=u:u===0&&(l=0));let d="";for(u=n+l+1;u<=r;++u)(u===r||e[u]==="/")&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(i+l)}`}function Xn(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function xh(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function Ns(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,o=-1,s=!0,l=e.length-1,u=0;for(;l>=r;--l){if(e[l]==="/"){if(!s){i=l+1;break}continue}o===-1&&(s=!1,o=l+1),e[l]==="."?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}if(o!==-1){const d=i===0&&t?1:i;a===-1||u===0||u===1&&a===o-1&&a===i+1?n.base=n.name=e.slice(d,o):(n.name=e.slice(d,a),n.base=e.slice(d,o),n.ext=e.slice(a,o))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var vn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(vn||(vn={}));vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";const eQ=new BJ;function tQ(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};eQ.add(n),cQ(n)}function nQ(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+sr(i,e.path)}function bu(e){return function(t,n={}){return tQ(e,nQ(t,n)),t}}bu(vn.EMERG);const rQ=bu(vn.ALERT),Bw=bu(vn.CRIT),Ri=bu(vn.ERR),ri=bu(vn.WARN),gk=bu(vn.NOTICE),F8=bu(vn.INFO),Lm=bu(vn.DEBUG);function aQ(e,t){return`\x1B[${t}m${e}\x1B[0m`}function iQ(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[aQ(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";let oQ=e=>[...iQ(e),e.message];function sQ(e){const t=oQ(e);return typeof t=="string"?[t]:Array.from(t)}let lQ=console.error;function cQ(e){e.level>uQ||lQ(...sQ(e))}let uQ=vn.ALERT;function yk(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function dQ(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function fQ(e,t){if(typeof t!="object"||t===null)throw Ri(new Ue(st.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){Lm("Using default for option: "+n);continue}throw Ri(new Ue(st.EINVAL,"Missing required option: "+n))}const i=(u,d=a)=>{var h;return typeof u=="function"?Symbol.hasInstance in u&&u.prototype?a instanceof u:u(a):typeof a===u||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===u};if(Array.isArray(r.type)?r.type.some(u=>i(u)):i(r.type))continue;const o=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,s=u=>typeof u=="function"?u.name!="type"?u.name:u.toString():u,l=Array.isArray(r.type)?`one of ${r.type.map(s).join(", ")}`:s(r.type);throw Ri(new Ue(st.EINVAL,`Incorrect type for "${n}": ${o} (expected ${l})`))}}function L8(e){return e!=null&&typeof e=="object"&&"backend"in e&&yk(e.backend)}const bk=0,xa=4,Qr=2,Kb=1,vk=1,hQ=2,pQ=4,$8=0,ti=1,Pl=2,zw=64,Uw=128,mQ=256,Hw=512,_d=1024,gQ=65536,yQ=262144,bQ=131072,qw=1052672,vQ=4096,wQ=32768,_Q=16384,xQ=2048,Sr=61440,Od=49152,Xl=40960,Wo=32768,jd=24576,da=16384,Dd=8192,Md=4096,sg=2048,lg=1024,SQ=512,EQ=448,B8=256,z8=128,U8=64,CQ=56,H8=32,q8=16,V8=8,kQ=7,G8=4,W8=2,K8=1,AQ=0,wi=4294967295,Z8=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:vk,COPYFILE_FICLONE:hQ,COPYFILE_FICLONE_FORCE:pQ,F_OK:bk,O_APPEND:_d,O_CREAT:zw,O_DIRECT:_Q,O_DIRECTORY:gQ,O_DSYNC:vQ,O_EXCL:Uw,O_NOATIME:yQ,O_NOCTTY:mQ,O_NOFOLLOW:bQ,O_NONBLOCK:xQ,O_RDONLY:$8,O_RDWR:Pl,O_SYMLINK:wQ,O_SYNC:qw,O_TRUNC:Hw,O_WRONLY:ti,R_OK:xa,S_IFBLK:jd,S_IFCHR:Dd,S_IFDIR:da,S_IFIFO:Md,S_IFLNK:Xl,S_IFMT:Sr,S_IFREG:Wo,S_IFSOCK:Od,S_IRGRP:H8,S_IROTH:G8,S_IRUSR:B8,S_IRWXG:CQ,S_IRWXO:kQ,S_IRWXU:EQ,S_ISGID:lg,S_ISUID:sg,S_ISVTX:SQ,S_IWGRP:q8,S_IWOTH:W8,S_IWUSR:z8,S_IXGRP:V8,S_IXOTH:K8,S_IXUSR:U8,UV_FS_O_FILEMAP:AQ,W_OK:Qr,X_OK:Kb,size_max:wi},Symbol.toStringTag,{value:"Module"})),bb=BigInt(1e3);class Y8{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:o,size:s,mode:l,ino:u,...d}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(o??0),this.size=this._convert(s??0),this.ino=this._convert(u??0),this.mode=this._convert(l??420&Wo),(this.mode&Sr)==0&&(this.mode=this.mode|this._convert(Wo)),Object.assign(this,d)}isFile(){return(this.mode&Sr)===Wo}isDirectory(){return(this.mode&Sr)===da}isSymbolicLink(){return(this.mode&Sr)===Xl}isSocket(){return(this.mode&Sr)===Od}isBlockDevice(){return(this.mode&Sr)===jd}isCharacterDevice(){return(this.mode&Sr)===Dd}isFIFO(){return(this.mode&Sr)===Md}toJSON(){return Rd(this,B2)}hasAccess(t,n){return dr(n,this._isBigint?new Jl(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*bb}get mtimeNs(){return BigInt(this.mtimeMs)*bb}get ctimeNs(){return BigInt(this.ctimeMs)*bb}get birthtimeNs(){return BigInt(this.birthtimeMs)*bb}}function X8(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<wi?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<wi?e.gid=n:r=!1,r}class Jl extends Y8{constructor(){super(...arguments),this._isBigint=!1}}class Pd extends Y8{constructor(){super(...arguments),this._isBigint=!0}}function TQ(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class NQ{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=wi,this.ffree=wi}}class RQ{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(wi),this.ffree=BigInt(wi)}}var Ir=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:d.get,set:d.set}:d[l],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(d.get=h),(h=o(_.set))&&(d.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),p=!0},bn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},wk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const Wi=0,IQ=1024;let FI=(()=>{var e,t;let n=[Id()],r,a=[],i,o,s=[],l=[],u,d=[],h=[],p,g=[],v=[],b,_=[],x=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=bn(this,s,0),this.valueSize=(bn(this,l),bn(this,d,0)),this._key=(bn(this,h),bn(this,g,"")),this._value=(bn(this,v),bn(this,_,new Uint8Array(IQ))),bn(this,x),S&&(this.key=S),E&&(this.value=E)}},wk(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[(e=_n).uint32.bind(e)],u=[(t=_n).uint32.bind(t)],p=[_n.char("keySize")],b=[_n.uint8("valueSize")],Ir(null,null,o,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},s,l),Ir(null,null,u,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},d,h),Ir(null,null,p,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},g,v),Ir(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},_,x),Ir(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),bn(i,a)})(),i})(),cu=(()=>{var e;let t=[Id()],n,r=[],a,i,o=[],s=[],l,u=[],d=[];return a=class{has(h){return this.data.some(p=>p.key==h)}get(h){return this.data.find(p=>p.key==h)}set(h,p){const g=this.get(h);if(g){g.value=p;return}this.data.push(new FI(h,p)),this.size++}remove(h){const p=this.data.findIndex(g=>g.key==h);return p===-1?!1:(this.data.splice(p,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=bn(this,o,0),this.data=(bn(this,s),bn(this,u,[])),bn(this,d)}},wk(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=_n).uint32.bind(e)],l=[f0(FI,"size")],Ir(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:p=>"size"in p,get:p=>p.size,set:(p,g)=>{p.size=g}},metadata:h},o,s),Ir(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:p=>"data"in p,get:p=>p.data,set:(p,g)=>{p.data=g}},metadata:h},u,d),Ir(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),bn(a,r)})(),a})();const B2=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],OQ=4;var Ii;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Ii||(Ii={}));let ua=(()=>{var e,t,n,r,a,i,o,s,l,u,d,h,p,g,v,b;let _=[Id()],x,S=[],E,C,k=[],R=[],j,O=[],L=[],z,Y=[],F=[],K,q=[],fe=[],te,re=[],X=[],ae,U=[],ee=[],J,ue=[],be=[],_e,Pe=[],Ne=[],Re,Ce=[],Fe=[],Qe,Le=[],Ie=[],V,me=[],Ae=[],se,ie=[],Q=[],xe,Me=[],Ee=[],We,kt=[],at=[],_t,Dt=[],jt=[],Gt,ye=[],I=[],G,de=[],Oe=[],ve,ke=[],le=[];var ft=E=class{constructor(vt){if(this.data=bn(this,k,L2(0,wi)),this.__data_old=(bn(this,R),bn(this,O,0)),this.size=(bn(this,L),bn(this,Y,0)),this.mode=(bn(this,F),bn(this,q,0)),this.nlink=(bn(this,fe),bn(this,re,1)),this.uid=(bn(this,X),bn(this,U,0)),this.gid=(bn(this,ee),bn(this,ue,0)),this.atimeMs=(bn(this,be),bn(this,Pe,Date.now())),this.birthtimeMs=(bn(this,Ne),bn(this,Ce,Date.now())),this.mtimeMs=(bn(this,Fe),bn(this,Le,Date.now())),this.ctimeMs=(bn(this,Ie),bn(this,me,Date.now())),this.ino=(bn(this,Ae),bn(this,ie,L2(0,wi))),this.__ino_old=(bn(this,Q),bn(this,Me,0)),this.flags=(bn(this,Ee),bn(this,kt,0)),this.__after_flags=(bn(this,at),bn(this,Dt,0)),this.version=(bn(this,jt),bn(this,ye,0)),this.__padding=(bn(this,I),bn(this,de,[])),this.attributes=(bn(this,Oe),bn(this,ke,new cu)),bn(this,le),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<zr(ft))throw Bw(new Ue(st.EIO,"Buffer is too small to create an inode"));$w(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...Rd(this,B2),attributes:this.attributes}}toStats(){return new Jl(this)}update(vt){if(!vt)return!1;let M=!1;for(const Be of B2)vt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==vt[Be]&&(Be=="atimeMs"&&this.flags&Ii.NoAtime||(this[Be]=vt[Be],M=!0)));return vt.attributes&&(this.attributes=vt.attributes,M=!0),M&&(this.ctimeMs=Date.now()),M}};return wk(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=_n).uint32.bind(e)],j=[(t=_n).uint32.bind(t)],z=[(n=_n).uint32.bind(n)],K=[(r=_n).uint16.bind(r)],te=[(a=_n).uint32.bind(a)],ae=[(i=_n).uint32.bind(i)],J=[(o=_n).uint32.bind(o)],_e=[(s=_n).float64.bind(s)],Re=[(l=_n).float64.bind(l)],Qe=[(u=_n).float64.bind(u)],V=[(d=_n).float64.bind(d)],se=[(h=_n).uint32.bind(h)],xe=[(p=_n).uint32.bind(p)],We=[(g=_n).uint32.bind(g)],_t=[(v=_n).uint16.bind(v)],Gt=[(b=_n).uint32.bind(b)],G=[_n.uint8(48)],ve=[f0(cu)],Ir(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:M=>"data"in M,get:M=>M.data,set:(M,Be)=>{M.data=Be}},metadata:vt},k,R),Ir(null,null,j,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:M=>"__data_old"in M,get:M=>M.__data_old,set:(M,Be)=>{M.__data_old=Be}},metadata:vt},O,L),Ir(null,null,z,{kind:"field",name:"size",static:!1,private:!1,access:{has:M=>"size"in M,get:M=>M.size,set:(M,Be)=>{M.size=Be}},metadata:vt},Y,F),Ir(null,null,K,{kind:"field",name:"mode",static:!1,private:!1,access:{has:M=>"mode"in M,get:M=>M.mode,set:(M,Be)=>{M.mode=Be}},metadata:vt},q,fe),Ir(null,null,te,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:M=>"nlink"in M,get:M=>M.nlink,set:(M,Be)=>{M.nlink=Be}},metadata:vt},re,X),Ir(null,null,ae,{kind:"field",name:"uid",static:!1,private:!1,access:{has:M=>"uid"in M,get:M=>M.uid,set:(M,Be)=>{M.uid=Be}},metadata:vt},U,ee),Ir(null,null,J,{kind:"field",name:"gid",static:!1,private:!1,access:{has:M=>"gid"in M,get:M=>M.gid,set:(M,Be)=>{M.gid=Be}},metadata:vt},ue,be),Ir(null,null,_e,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:M=>"atimeMs"in M,get:M=>M.atimeMs,set:(M,Be)=>{M.atimeMs=Be}},metadata:vt},Pe,Ne),Ir(null,null,Re,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:M=>"birthtimeMs"in M,get:M=>M.birthtimeMs,set:(M,Be)=>{M.birthtimeMs=Be}},metadata:vt},Ce,Fe),Ir(null,null,Qe,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:M=>"mtimeMs"in M,get:M=>M.mtimeMs,set:(M,Be)=>{M.mtimeMs=Be}},metadata:vt},Le,Ie),Ir(null,null,V,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:M=>"ctimeMs"in M,get:M=>M.ctimeMs,set:(M,Be)=>{M.ctimeMs=Be}},metadata:vt},me,Ae),Ir(null,null,se,{kind:"field",name:"ino",static:!1,private:!1,access:{has:M=>"ino"in M,get:M=>M.ino,set:(M,Be)=>{M.ino=Be}},metadata:vt},ie,Q),Ir(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:M=>"__ino_old"in M,get:M=>M.__ino_old,set:(M,Be)=>{M.__ino_old=Be}},metadata:vt},Me,Ee),Ir(null,null,We,{kind:"field",name:"flags",static:!1,private:!1,access:{has:M=>"flags"in M,get:M=>M.flags,set:(M,Be)=>{M.flags=Be}},metadata:vt},kt,at),Ir(null,null,_t,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:M=>"__after_flags"in M,get:M=>M.__after_flags,set:(M,Be)=>{M.__after_flags=Be}},metadata:vt},Dt,jt),Ir(null,null,Gt,{kind:"field",name:"version",static:!1,private:!1,access:{has:M=>"version"in M,get:M=>M.version,set:(M,Be)=>{M.version=Be}},metadata:vt},ye,I),Ir(null,null,G,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:M=>"__padding"in M,get:M=>M.__padding,set:(M,Be)=>{M.__padding=Be}},metadata:vt},de,Oe),Ir(null,null,ve,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:M=>"attributes"in M,get:M=>M.attributes,set:(M,Be)=>{M.attributes=Be}},metadata:vt},ke,le),Ir(null,x={value:E},_,{kind:"class",name:E.name,metadata:vt},null,S),ft=E=x.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),bn(E,S)})(),ft=E})();function jQ(e){return(e.mode&Sr)===Wo}function es(e){return(e.mode&Sr)===da}function Sh(e){return(e.mode&Sr)===Xl}function DQ(e){return(e.mode&Sr)===Od}function h0(e){return(e.mode&Sr)===jd}function p0(e){return(e.mode&Sr)===Dd}function MQ(e){return(e.mode&Sr)===Md}function dr(e,t,n){const r=(e==null?void 0:e.credentials)||os.credentials;if(Sh(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&B8&&(a|=xa),t.mode&z8&&(a|=Qr),t.mode&U8&&(a|=Kb)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&H8&&(a|=xa),t.mode&q8&&(a|=Qr),t.mode&V8&&(a|=Kb)),t.mode&G8&&(a|=xa),t.mode&W8&&(a|=Qr),t.mode&K8&&(a|=Kb),(a&n)===n}const LI=1;class Ov extends Map{constructor(){super(...arguments),this.maxSize=wi}toJSON(){return{version:LI,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*zr(ua);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&Sr)!=da)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())Xn(a)==t&&a!=t&&(r[xh(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&Sr)!=da)continue;const a={};for(const i of this.keys())Xn(i)==n&&i!=n&&(a[xh(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=LI)throw new Ue(st.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=L2(1,wi)),r=="/"&&(a.ino=0),this.set(r,new ua(a));return this}static parse(t){if(!zJ(t))throw new Ue(st.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new Ov;return r.fromJSON(n),r}}const dS=4096;let _k=class z2{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===z2.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===z2.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:o=a}=n;for(let s=i;s<o;s+=dS){const l=s+dS>o?o-s:dS,u=new Uint8Array(l);await this.read(t,u,s,s+l).catch(r.error.bind(r)),r.enqueue(u)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,o)=>{let s=!1;const l=d=>{s=!0,o.error(d)},{size:u}=await this.stat(t);await this.write(t,i,a).catch(l),!s&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(u,a)}).catch(l))}})}};function gi(e){return JSON.parse(dk(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function mo(e){return od(JSON.stringify(e))}function vu(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(st.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function jv(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(st.EINVAL,"Invalid time.")}}function fn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(st.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(st.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(st.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:ql(e)}function Fl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:vu("mode"in e?e==null?void 0:e.mode:null,r)}}class PQ{constructor(t,n,r,a){mi(this,"id");mi(this,"_size");mi(this,"options");mi(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,o)=>i.start-o.start),r.ranges=r.ranges.reduce((i,o)=>(!i.length||i.at(-1).end<o.start?i.push(o):i.at(-1).end=Math.max(i.at(-1).end,o.end),i),[]),r.data=u0(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const o of i.ranges)if(!(o.end<=t)){if(o.start>=n)break;r.push({start:Math.max(t,o.start),end:Math.min(n,o.end)})}}r.sort((i,o)=>i.start-o.start);const a=[];for(const i of r){const o=a.at(-1);o&&i.start<=o.end?o.end=Math.max(o.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=u0(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((s,l)=>s.start-l.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},o=this.regions.findIndex(s=>s.offset>n);return o==-1?this.regions.push(i):this.regions.splice(o,0,i),this.collect(),this}}var fS,hS,pS;(fS=Promise.withResolvers)!==null&&fS!==void 0||(Promise.withResolvers=(ri("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(hS=Symbol.dispose)!==null&&hS!==void 0||(Symbol.dispose=(ri("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(pS=Symbol.asyncDispose)!==null&&pS!==void 0||(Symbol.asyncDispose=(ri("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class J8{constructor(t){this.store=t}}class FQ extends J8{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class U2 extends J8{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new PQ(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const o=i.missing(n,r);for(const{start:l,end:u}of o)this.async(this.get(t,l,u));if(o.length)throw Ri(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const s=i.regionAt(n);if(!s){ri("Missing cache region for "+t);return}return s.data.subarray(n-s.offset,r-s.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class LQ{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof U2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const l of s.cached(n,a??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof U2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const l of s.cached(n,a??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Nr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Rr=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Q8 extends _k{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const o=P8(t,a);if(o.startsWith(".."))continue;let s=sr(n,o);s.endsWith("/")&&(s=s.slice(0,-1)),r.push({oldKey:a,newKey:s,ino:i})}for(const{oldKey:a,newKey:i,ino:o}of r){this._ids.delete(a),this._ids.set(i,o);const s=this._paths.get(o);if(!s){ri("Missing paths in table for ino "+o);continue}s.delete(a),s.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,Lm(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Nr(n,this.transaction(),!0),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),await r.set(o.ino,Ga(o)),a.has(i)&&await r.set(o.data,mo(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Rr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Nr(n,this.transaction(),!1),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),r.setSync(o.ino,Ga(o)),a.has(i)&&r.setSync(o.data,mo(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Rr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Ov,a=Nr(n,this.transaction(),!0),i=[["/",0]],o=OI(Ue.With("EDEADLK"));for(;i.length;){const[s,l]=i.shift(),u=new ua(await a.get(l));if(r.set(s,u),u.mode&da){const d=gi((t=await a.get(u.data))!==null&&t!==void 0?t:mr(Ue.With("ENODATA",s)));for(const[h,p]of Object.entries(d))i.push([sr(s,h),p])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Rr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Ov,a=Nr(n,this.transaction(),!1),i=[["/",0]],o=OI(Ue.With("EDEADLK"));for(;i.length;){const[s,l]=i.shift(),u=new ua(a.getSync(l));if(r.set(s,u),u.mode&da){const d=gi((t=a.getSync(u.data))!==null&&t!==void 0?t:mr(Ue.With("ENODATA",s)));for(const[h,p]of Object.entries(d))i.push([sr(s,h),p])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{Rr(n)}}async rename(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Nr(o,this.transaction(),!0),l=Ns(t),u=Ns(n),d=await this.findInode(s,l.dir,"rename"),h=gi((r=await s.get(d.data))!==null&&r!==void 0?r:mr(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const p=h[l.base];if(p!=this._ids.get(t)&&Ri(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(st.EBUSY,l.dir);const g=u.dir==l.dir,v=g?d:await this.findInode(s,u.dir,"rename"),b=g?h:gi((a=await s.get(v.data))!==null&&a!==void 0?a:mr(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const _=new ua((i=await s.get(b[u.base]))!==null&&i!==void 0?i:mr(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");await s.remove(_.data),await s.remove(b[u.base])}b[u.base]=p,await s.set(d.data,mo(h)),await s.set(v.data,mo(b)),await s.commit(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{const s=Rr(o);s&&await s}}renameSync(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Nr(o,this.transaction(),!1),l=Ns(t),u=Ns(n),d=this.findInodeSync(s,l.dir,"rename"),h=gi((r=s.getSync(d.data))!==null&&r!==void 0?r:mr(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const p=h[l.base];if(p!=this._ids.get(t)&&Ri(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(st.EBUSY,l.dir);const g=u.dir===l.dir,v=g?d:this.findInodeSync(s,u.dir,"rename"),b=g?h:gi((a=s.getSync(v.data))!==null&&a!==void 0?a:mr(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const _=new ua((i=s.getSync(b[u.base]))!==null&&i!==void 0?i:mr(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");s.removeSync(_.data),s.removeSync(b[u.base])}b[u.base]=p,s.setSync(d.data,mo(h)),s.setSync(v.data,mo(b)),s.commitSync(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{Rr(o)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Nr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Rr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Nr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Rr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Nr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ga(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Rr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Nr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ga(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Rr(r)}}async createFile(t,n){return n.mode|=Wo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=Wo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=da,await this.commitNew(t,n,od("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=da,this.commitNewSync(t,n,od("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Nr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(gi((n=await a.get(i.data))!==null&&n!==void 0?n:mr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Rr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Nr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(gi((n=a.getSync(i.data))!==null&&n!==void 0?n:mr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Rr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Nr(a,this.transaction(),!0),o=await this.findInode(i,t,"sync");n&&await i.set(o.data,n),o.update(r)&&(this._add(o.ino,t),await i.set(o.ino,Ga(o))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Rr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Nr(a,this.transaction(),!1),o=this.findInodeSync(i,t,"sync");n&&i.setSync(o.data,n),o.update(r)&&(this._add(o.ino,t),i.setSync(o.ino,Ga(o))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Rr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Nr(a,this.transaction(),!0),o=Xn(n),s=await this.findInode(i,o,"link"),l=gi((r=await i.get(s.data))!==null&&r!==void 0?r:mr(Ue.With("ENOENT",o,"link"))),u=await this.findInode(i,t,"link");u.nlink++,l[xh(n)]=u.ino,this._add(u.ino,n),await i.set(u.ino,Ga(u)),await i.set(s.data,mo(l)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Rr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Nr(a,this.transaction(),!1),o=Xn(n),s=this.findInodeSync(i,o,"link"),l=gi((r=i.getSync(s.data))!==null&&r!==void 0?r:mr(Ue.With("ENOENT",o,"link"))),u=this.findInodeSync(i,t,"link");u.nlink++,l[xh(n)]=u.ino,this._add(u.ino,n),i.setSync(u.ino,Ga(u)),i.setSync(s.data,mo(l)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Rr(a)}}async read(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Nr(o,this.transaction(),!0),l=await this.findInode(s,t,"read");if(l.size==0)return;const u=(i=await s.get(l.data,r,a))!==null&&i!==void 0?i:mr(Ue.With("ENODATA",t,"read")),d=s.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Ri(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(s){o.error=s,o.hasError=!0}finally{const s=Rr(o);s&&await s}}readSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Nr(o,this.transaction(),!1),l=this.findInodeSync(s,t,"read");if(l.size==0)return;const u=(i=s.getSync(l.data,r,a))!==null&&i!==void 0?i:mr(Ue.With("ENODATA",t,"read")),d=s.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Ri(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(s){o.error=s,o.hasError=!0}finally{Rr(o)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Nr(i,this.transaction(),!0),s=await this.findInode(o,t,"write");let l=n;o.flag("partial")||(l=u0((a=await o.get(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await o.set(s.data,l,r),this._add(s.ino,t),await o.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Rr(i);o&&await o}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Nr(i,this.transaction(),!1),s=this.findInodeSync(o,t,"write");let l=n;o.flag("partial")||(l=u0((a=o.getSync(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),o.setSync(s.data,l,r),this._add(s.ino,t),o.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Rr(i)}}transaction(){return new LQ(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Nr(t,this.transaction(),!0);if(await n.get(Wi))return;const r=new ua({ino:Wi,data:1,mode:511|da});await n.set(r.data,od("{}")),this._add(Wi,"/"),await n.set(Wi,Ga(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Rr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Nr(t,this.transaction(),!1);if(n.getSync(Wi))return;const r=new ua({ino:Wi,data:1,mode:511|da});n.setSync(r.data,od("{}")),this._add(Wi,"/"),n.setSync(Wi,Ga(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Rr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){ri("Attempted to populate tables after initialization");return}Lm("Populating tables with existing store metadata");const n=Nr(t,this.transaction(),!0),r=await n.get(Wi);if(!r){gk("Store does not have a root inode");const s=new ua({ino:Wi,data:1,mode:511|da});await n.set(s.data,od("{}")),this._add(Wi,"/"),await n.set(Wi,Ga(s)),await n.commit();return}if(r.length<zr(ua)){Bw("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const o=[["/",Wi]];for(;o.length>0;){i++;const[s,l]=o.shift();this._add(l,s);const u=await n.get(l);if(!u){ri("Store is missing data for inode: "+l);continue}if(u.length<zr(ua)){ri(`Invalid inode size for ino ${l}: ${u.length}`);continue}const d=new ua(u);if((d.mode&da)!=da||a.has(l))continue;a.add(l);const h=await n.get(d.data);if(!h){ri("Store is missing directory data: "+d.data);continue}const p=gi(h);for(const[g,v]of Object.entries(p))o.push([sr(s,g),v])}Lm(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Rr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ua((a=await t.get(i))!==null&&a!==void 0?a:mr(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ua((a=t.getSync(i))!==null&&a!==void 0?a:mr(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>wi)throw Ri(new Ue(st.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=Nr(o,this.transaction(),!0),{dir:l,base:u}=Ns(t),d=await this.findInode(s,l,a),h=gi((i=await s.get(d.data))!==null&&i!==void 0?i:mr(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new ua({...n,ino:p,data:p+1,size:r.byteLength});return await s.set(g.ino,Ga(g)),await s.set(g.data,r),h[u]=g.ino,await s.set(d.data,mo(h)),await s.commit(),g}catch(s){o.error=s,o.hasError=!0}finally{const s=Rr(o);s&&await s}}commitNewSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=Nr(o,this.transaction(),!1),{dir:l,base:u}=Ns(t),d=this.findInodeSync(s,l,a),h=gi((i=s.getSync(d.data))!==null&&i!==void 0?i:mr(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new ua({...n,ino:p,data:p+1,size:r.byteLength});return s.setSync(g.ino,Ga(g)),s.setSync(g.data,r),h[u]=g.ino,s.setSync(d.data,mo(h)),s.commitSync(),g}catch(s){o.error=s,o.hasError=!0}finally{Rr(o)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Nr(i,this.transaction(),!0),{dir:l,base:u}=Ns(t),d=await this.findInode(s,l,o),h=gi((r=await s.get(d.data))!==null&&r!==void 0?r:mr(Ue.With("ENOENT",l,o)));if(!h[u])throw Ue.With("ENOENT",t,o);const p=h[u],g=new ua((a=await s.get(p))!==null&&a!==void 0?a:mr(Ue.With("ENOENT",t,o)));if(delete h[u],!n&&es(g))throw Ue.With("EISDIR",t,o);await s.set(d.data,mo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await s.set(g.ino,Ga(g))):(await s.remove(g.data),await s.remove(p),this._remove(p)),await s.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Rr(i);o&&await o}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Nr(i,this.transaction(),!1),{dir:l,base:u}=Ns(t),d=this.findInodeSync(s,l,o),h=gi((r=s.getSync(d.data))!==null&&r!==void 0?r:mr(Ue.With("ENOENT",l,o))),p=h[u];if(!p)throw Ue.With("ENOENT",t,o);const g=new ua((a=s.getSync(p))!==null&&a!==void 0?a:mr(Ue.With("ENOENT",t,o)));if(delete h[u],!n&&es(g))throw Ue.With("EISDIR",t,o);s.setSync(d.data,mo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),s.setSync(g.ino,Ga(g))):(s.removeSync(g.data),s.removeSync(p),this._remove(p)),s.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Rr(i)}}}class $Q extends FQ{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class BQ extends Map{constructor(t=wi,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new $Q(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const zQ={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new Q8(new BQ(e,t));return n.checkRootSync(),n}},UQ=zQ;let Sa=!0;class $I extends ck{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let s=this._buffer.substring(0,o);s.endsWith("\r")&&(s=s.substring(0,s.length-1)),this._buffer=this._buffer.substring(o+1),this.line=s,s.trim()&&!s.trim().match(/^\s*$/)&&this._history.at(-1)!=s&&(this._history.push(s),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",s)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;go(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;go(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);vb(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);vb(this.output,0),go(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,go(this.output,-a.length,0),go(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;go(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(go(this.output,-this._cursor,0),go(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);vb(this.output,0),go(this.output,0,0),this.output.write(this._prompt+r),this.line=r,go(this.output,-r.length,0),go(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(vb(this.output,0),go(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return ri("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return ri("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function HQ(e,t,n,r){return"input"in e?new $I(e.input,e.output,e.completer,e.terminal):new $I(e,t,n,r)}function vb(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function go(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Dv{get position(){return this.flag&_d?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,o){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=o,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&qw||this.inode.flags&Ii.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&ti||this.flag&Pl))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&ti||this.flag&Pl))throw new Ue(st.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Ii.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!p0(this.inode)&&!h0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,this.fs.writeSync(this.internalPath,o,a),this._isSync&&this.sync(),o.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ti)throw new Ue(st.EPERM,"File not opened with a readable mode");this.inode.flags&Ii.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!p0(this.inode)&&!h0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>Sr?-61441:Sr)|t,(this._isSync||t>Sr)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,X8(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Ii.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Mv(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:os.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function ci(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:os.descriptors).get(t);if(!a)throw new Ue(st.EBADF);return a}function eP(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:os.descriptors).delete(t)}const qQ=/[rwasx]{1,2}\+?/;function Ll(e){if(typeof e=="number")return e;if(!qQ.test(e))throw new Ue(st.EINVAL,"Invalid flag string: "+e);return VQ(e)}function VQ(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(st.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?$8:zw;return e.includes("w")&&(t|=Hw),e.includes("a")&&(t|=_d),e.includes("+")?t|=Pl:e.includes("r")||(t|=ti),e.includes("s")&&(t|=qw),e.includes("x")&&(t|=Uw),t}function tP(e){let t=0;return e&ti||(t|=xa),(e&ti||e&Pl)&&(t|=Qr),t}const m0=new Map;xk("/",UQ.create({label:"root"}));function xk(e,t){if(e[0]!="/"&&(e="/"+e),e=ql.call(this,e),m0.has(e))throw Ri(new Ue(st.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,m0.set(e,t),F8(`Mounted ${t.name} on ${e}`),Lm(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function nP(e){if(e[0]!="/"&&(e="/"+e),e=ql.call(this,e),!m0.has(e)){ri(e+" is already unmounted");return}m0.delete(e),gk("Unmounted "+e)}function Fn(e,t){const n=(t==null?void 0:t.root)||os.root;e=fn(sr(n,e));const r=[...m0].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(WQ(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw rQ(new Ue(st.EIO,"No file system",e))}function mS(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function fr(e,t){typeof e.stack=="string"&&(e.stack=mS(e.stack,t));try{e.message=mS(e.message,t)}catch{}return e.path&&(e.path=mS(e.path,t)),e}function rP(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||wi),files:(t?BigInt:Number)(n.totalNodes||wi),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function GQ(e){var t,n,r,a,i,o,s;const l=this!==null&&this!==void 0?this:os;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=l.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(st.EPERM,"Can not chroot() as non-root user");(i=l.root)!==null&&i!==void 0||(l.root="/");const u=sr(l.root,e);for(const d of(s=(o=l.descriptors)===null||o===void 0?void 0:o.values())!==null&&s!==void 0?s:[]){if(!d.path.startsWith(l.root))throw Ue.With("EBUSY",d.path,"chroot");d.path=d.path.slice(l.root.length)}if(u.length>l.root.length)throw new Ue(st.EPERM,"Can not chroot() outside of current root");l.root=u}function WQ(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class aP extends ck{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class iP extends aP{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?sr(t.root,n):n,ZQ(this.realpath,this)}close(){super.emit("close"),YQ(this.realpath,this)}[Symbol.dispose](){this.close()}}class KQ extends aP{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=uu(this.path);TQ(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=uu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Vc=new Map;function ZQ(e,t){const n=fn(e);Vc.has(n)||Vc.set(n,new Set),Vc.get(n).add(t)}function YQ(e,t){const n=fn(e);Vc.has(n)&&(Vc.get(n).delete(t),Vc.get(n).size===0&&Vc.delete(n))}function Ka(e,t,n){var r;e&&(n=sr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=fn(n);for(let a=n;a!="/";a=Xn(a)){const i=Vc.get(a);if(i)for(const o of i)o.emit("change",t,P8.call(o._context,a,n)||xh(n))}}var cg=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},ug=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function XQ(e,t){e=fn(e),t=fn(t);const n=Fn(e,this),r=Fn(t,this);if(!uu.call(this,Xn(e)).hasAccess(Qr,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),Ka(this,"rename",e.toString()),Ka(this,"change",t.toString());return}Ak.call(this,t,kk(e)),Ck.call(this,e),Ka(this,"rename",e.toString())}catch(a){throw fr(a,{[n.path]:e,[r.path]:t})}}function Sk(e){e=fn(e);try{const{fs:t,path:n}=Fn(wu.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==st.ENOENT)return!1;throw t}}function uu(e,t){e=fn(e);const{fs:n,path:r}=Fn(wu.call(this,e),this);try{const a=n.statSync(r);if(Sa&&!dr(this,a,xa))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Pd(a):new Jl(a)}catch(a){throw fr(a,{[r]:e})}}function Ek(e,t){e=fn(e);const{fs:n,path:r}=Fn(e,this);try{const a=n.statSync(r);if(Sa&&!dr(this,a,xa))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Pd(a):new Jl(a)}catch(a){throw fr(a,{[r]:e})}}function JQ(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=cg(n,Fd.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(st.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{ug(n)}}function Ck(e){e=fn(e);const{fs:t,path:n}=Fn(e,this);try{if(Sa&&!dr(this,t.statSync(n),Qr))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),Ka(this,"rename",e.toString())}catch(r){throw fr(r,{[n]:e})}}function Fd(e,t){var n;e=fn(e);const r=vu(t.mode,420),a=Ll(t.flag);e=t.preserveSymlinks?e:wu.call(this,e);const{fs:i,path:o}=Fn(e,this);let s;try{s=i.statSync(o)}catch{}if(!s){if(!(a&zw))throw Ue.With("ENOENT",e,"_open");const u=i.statSync(Xn(o));if(!dr(this,u,Qr))throw Ue.With("EACCES",Xn(e),"_open");if(!es(u))throw Ue.With("ENOTDIR",Xn(e),"_open");if(!t.allowDirectory&&r&da)throw Ue.With("EISDIR",e,"_open");if(!dr(this,u,Qr))throw Ue.With("EACCES",Xn(o),"_open");const{euid:d,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:os.credentials,p=i.createFileSync(o,{mode:r,uid:u.mode&sg?u.uid:d,gid:u.mode&lg?u.gid:h});return new Dv(this,e,i,o,a,p)}if(!dr(this,s,r)||!dr(this,s,tP(a)))throw Ue.With("EACCES",e,"_open");if(a&Uw)throw Ue.With("EEXIST",e,"_open");const l=new Dv(this,e,i,o,a,s);if(a&Hw&&l.truncate(0),!t.allowDirectory&&s.mode&da)throw Ue.With("EISDIR",e,"_open");return l}function Vw(e,t,n=bk){return Mv(Fd.call(this,e,{flag:t,mode:n}))}function Gw(e,t,n){return Mv(Fd.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function oP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=cg(r,typeof e=="number"?ci(this,e):Fd.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),o=new Uint8Array(i);return a.read(o,0,i,0),o}catch(a){r.error=a,r.hasError=!0}finally{ug(r)}}function kk(e,t={}){const n=Fl(t,null,"r",420);if(Ll(n.flag)&ti)throw new Ue(st.EINVAL,"Flag passed to readFile must allow for reading");const a=Dr.from(oP.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function Ak(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Fl(n,"utf8","w+",420),i=Ll(a.flag);if(!(i&ti||i&Pl))throw new Ue(st.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Dr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new Ue(st.EINVAL,"Data not specified");cg(r,typeof e=="number"?ci(this,e):Fd.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength,0),Ka(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{ug(r)}}function QQ(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Fl(n,"utf8","a+",420),i=Ll(a.flag);if(!(i&_d))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Dr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);cg(r,Fd.call(this,typeof e=="number"?ci(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{ug(r)}}function eee(e,t){const n=ci(this,e).stat();return t!=null&&t.bigint?new Pd(n):new Jl(n)}function Ld(e){ci(this,e).close(),eP(this,e)}function tee(e,t=0){if(t||(t=0),t<0)throw new Ue(st.EINVAL);ci(this,e).truncate(t)}function nee(e){ci(this,e).sync()}function ree(e){ci(this,e).datasync()}function aee(e,t,n,r,a){let i,o,s,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";o=0,i=Dr.from(t,h),s=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,l=typeof a=="number"?a:null;const u=ci(this,e);l??(l=u.position);const d=u.write(i,o,s,l);return Ka(this,"change",u.path),d}function iee(e,t,n,r,a){const i=ci(this,e),o=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,o,r,a)}function Tk(e,t,n){ci(this,e).chown(t,n)}function Nk(e,t){const n=vu(t,-1);if(n<0)throw new Ue(st.EINVAL,"Invalid mode.");ci(this,e).chmod(n)}function Rk(e,t,n){ci(this,e).utimes(jv(t),jv(n))}function sP(e){e=fn(e);const{fs:t,path:n}=Fn(wu.call(this,e),this);try{const r=t.statSync(n);if(!es(r))throw Ue.With("ENOTDIR",n,"rmdir");if(Sa&&!dr(this,r,Qr))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),Ka(this,"rename",e.toString())}catch(r){throw fr(r,{[n]:e})}}function Ik(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:os.credentials;t=typeof t=="object"?t:{mode:t};const o=vu(t==null?void 0:t.mode,511);e=wu.call(this,e);const{fs:s,path:l,root:u}=Fn(e,this),d={[l]:e},h=(p,g)=>{if(!dr(this,g,Qr))throw Ue.With("EACCES",Xn(p),"mkdir");const v=s.mkdirSync(p,{mode:o,uid:g.mode&sg?g.uid:a,gid:g.mode&lg?g.gid:i});return Ka(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){h(l,s.statSync(Xn(l)));return}const p=[];for(let v=l,b=e;!s.existsSync(v);v=Xn(v),b=Xn(b))p.unshift(v),d[v]=b;if(!p.length)return;const g=[s.statSync(Xn(p[0]))];for(const[v,b]of p.entries())g.push(h(b,g[v]));return u.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(u.length)}catch(p){throw fr(p,d)}}function Gh(e,t){t=typeof t=="object"?t:{encoding:t},e=fn(e);const{fs:n,path:r}=Fn(wu.call(this,e),this);let a;try{const o=n.statSync(r);if(Sa&&!dr(this,o,xa))throw Ue.With("EACCES",r,"readdir");if(!es(o))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(o){throw fr(o,{[r]:e})}const i=[];for(const o of a){let s;try{s=n.statSync(sr(r,o))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new g0(o,s)):(t==null?void 0:t.encoding)=="buffer"?i.push(Dr.from(o)):i.push(o),!(!es(s)||!(t!=null&&t.recursive)))for(const l of Gh.call(this,sr(e,o),t))l instanceof g0?(l.path=sr(o,l.path),i.push(l)):Dr.isBuffer(l)?i.push(Dr.from(sr(o,dk(l)))):i.push(sr(o,l))}return i}function oee(e,t){if(e=fn(e),!uu(Xn(e)).hasAccess(xa,this))throw Ue.With("EACCES",Xn(e),"link");if(t=fn(t),!uu(Xn(t)).hasAccess(Qr,this))throw Ue.With("EACCES",Xn(t),"link");const{fs:n,path:r}=Fn(e,this),a=Fn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(Sa&&!dr(this,n.statSync(r),xa))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw fr(i,{[r]:e,[a.path]:t})}}function see(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(st.EINVAL,"Invalid type: "+n);t=fn(t);const a=cg(r,Fd.call(this,t,{flag:"wx",mode:420}),!1);a.write(od(fn(e,!0))),a.chmod(Xl)}catch(a){r.error=a,r.hasError=!0}finally{ug(r)}}function H2(e,t){const n=Dr.from(oP.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function lee(e,t,n){const r=Vw.call(this,e,"r+");Tk.call(this,r,t,n),Ld.call(this,r)}function cee(e,t,n){const r=Gw.call(this,e,"r+");Tk.call(this,r,t,n),Ld.call(this,r)}function uee(e,t){const n=Vw.call(this,e,"r+");Nk.call(this,n,t),Ld.call(this,n)}function dee(e,t){const n=Gw.call(this,e,"r+");Nk.call(this,n,t),Ld.call(this,n)}function lP(e,t,n){const r=Vw.call(this,e,"r+");Rk.call(this,r,t,n),Ld.call(this,r)}function fee(e,t,n){const r=Gw.call(this,e,"r+");Rk.call(this,r,t,n),Ld.call(this,r)}function q2(e,t,n){try{const l=Fn(t,e),u=l.fs.statSync(l.path);if(!Sh(u))return{...l,fullPath:t,stats:u};const d=ql.call(e,Xn(t),H2.call(e,t).toString());return q2(e,d)}catch{}const{base:r,dir:a}=Ns(t),i=a=="/"?"/":wu.call(e,a),o=sr(i,r),s=Fn(o,e);try{const l=s.fs.statSync(s.path);if(!Sh(l))return{...s,fullPath:o,stats:l};const u=ql.call(e,i,H2.call(e,o).toString());return q2(e,u)}catch(l){if(l.code=="ENOENT")return{...s,fullPath:t};throw fr(l,{[s.path]:o})}}function wu(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=fn(e);const{fullPath:a}=q2(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Dr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function hee(e,t=384){if(!dr(this,uu.call(this,e),t))throw new Ue(st.EACCES)}function cP(e,t){e=fn(e);let n;try{n=Ek.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&Sr){case da:if(t!=null&&t.recursive)for(const r of Gh.call(this,e))cP.call(this,sr(e,r),t);sP.call(this,e);break;case Wo:case Xl:case jd:case Dd:Ck.call(this,e);break;case Md:case Od:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}}function pee(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return Ik.call(this,a),n=="buffer"?Dr.from(a):a}function uP(e,t,n){if(e=fn(e),t=fn(t),n&&n&vk&&Sk(t))throw new Ue(st.EEXIST,"Destination file already exists",t,"copyFile");Ak.call(this,t,kk(e)),Ka(this,"rename",t.toString())}function mee(e,t,n){const r=ci(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function gee(e,t,n){const r=ci(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function yee(e,t){return e=fn(e),new Ok(e,this)}function dP(e,t,n){e=fn(e),t=fn(t);const r=Ek.call(this,e);if(n!=null&&n.errorOnExist&&Sk.call(this,t))throw new Ue(st.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Sr){case da:if(!(n!=null&&n.recursive))throw new Ue(st.EISDIR,e+" is a directory (not copied)",e,"cp");Ik.call(this,t,{recursive:!0});for(const a of Gh.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(sr(e,a.name),sr(t,a.name))||dP.call(this,sr(e,a.name),sr(t,a.name),n);break;case Wo:case Xl:uP.call(this,e,t);break;case jd:case Dd:case Md:case Od:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&lP.call(this,t,r.atime,r.mtime)}function bee(e,t){e=fn(e);const{fs:n}=Fn(e,this);return rP(n,t==null?void 0:t.bigint)}function vee(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),o=[];function s(l){const u=Gh(l,{withFileTypes:r,encoding:"utf8"});for(const d of u){const h=r?d.path:l+"/"+d;a(r?d:h)||(uu(h).isDirectory()&&i.some(p=>p.source.includes(".*"))&&s(h),i.some(p=>p.test(h.replace(/^\/+/g,"")))&&o.push(r?d.path:h.replace(/^\/+/g,"")))}}return s(n),o}class g0{get name(){return xh(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return jQ(this.stats)}isDirectory(){return es(this.stats)}isBlockDevice(){return h0(this.stats)}isCharacterDevice(){return p0(this.stats)}isSymbolicLink(){return Sh(this.stats)}isFIFO(){return MQ(this.stats)}isSocket(){return DQ(this.stats)}}class Ok{checkClosed(){if(this.closed)throw new Ue(st.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await Bd.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Gh.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var gS={exports:{}},yS={exports:{}},bS={},BI;function _u(){return BI||(BI=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=d,n.toByteArray=p,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;a[45]=62,a[95]=63;function u(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var k=C===E?0:4-C%4;return[C,k]}function d(S){var E=u(S),C=E[0],k=E[1];return(C+k)*3/4-k}function h(S,E,C){return(E+C)*3/4-C}function p(S){var E,C=u(S),k=C[0],R=C[1],j=new i(h(S,k,R)),O=0,L=R>0?k-4:k,z;for(z=0;z<L;z+=4)E=a[S.charCodeAt(z)]<<18|a[S.charCodeAt(z+1)]<<12|a[S.charCodeAt(z+2)]<<6|a[S.charCodeAt(z+3)],j[O++]=E>>16&255,j[O++]=E>>8&255,j[O++]=E&255;return R===2&&(E=a[S.charCodeAt(z)]<<2|a[S.charCodeAt(z+1)]>>4,j[O++]=E&255),R===1&&(E=a[S.charCodeAt(z)]<<10|a[S.charCodeAt(z+1)]<<4|a[S.charCodeAt(z+2)]>>2,j[O++]=E>>8&255,j[O++]=E&255),j}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,C){for(var k,R=[],j=E;j<C;j+=3)k=(S[j]<<16&16711680)+(S[j+1]<<8&65280)+(S[j+2]&255),R.push(g(k));return R.join("")}function b(S){for(var E,C=S.length,k=C%3,R=[],j=16383,O=0,L=C-k;O<L;O+=j)R.push(v(S,O,O+j>L?L:O+j));return k===1?(E=S[C-1],R.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(S[C-2]<<8)+S[C-1],R.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),R.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(S,E,C,k,R){var j,O,L=R*8-k-1,z=(1<<L)-1,Y=z>>1,F=-7,K=C?R-1:0,q=C?-1:1,fe=S[E+K];for(K+=q,j=fe&(1<<-F)-1,fe>>=-F,F+=L;F>0;j=j*256+S[E+K],K+=q,F-=8);for(O=j&(1<<-F)-1,j>>=-F,F+=k;F>0;O=O*256+S[E+K],K+=q,F-=8);if(j===0)j=1-Y;else{if(j===z)return O?NaN:(fe?-1:1)*(1/0);O=O+Math.pow(2,k),j=j-Y}return(fe?-1:1)*O*Math.pow(2,j-k)},_.write=function(S,E,C,k,R,j){var O,L,z,Y=j*8-R-1,F=(1<<Y)-1,K=F>>1,q=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,fe=k?0:j-1,te=k?1:-1,re=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(L=isNaN(E)?1:0,O=F):(O=Math.floor(Math.log(E)/Math.LN2),E*(z=Math.pow(2,-O))<1&&(O--,z*=2),O+K>=1?E+=q/z:E+=q*Math.pow(2,1-K),E*z>=2&&(O++,z/=2),O+K>=F?(L=0,O=F):O+K>=1?(L=(E*z-1)*Math.pow(2,R),O=O+K):(L=E*Math.pow(2,K-1)*Math.pow(2,R),O=0));R>=8;S[C+fe]=L&255,fe+=te,L/=256,R-=8);for(O=O<<R|L,Y+=R;Y>0;S[C+fe]=O&255,fe+=te,O/=256,Y-=8);S[C+fe-te]|=re*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=_,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=F,S.SlowBuffer=ue,S.INSPECT_MAX_BYTES=50;const R=2147483647;S.kMaxLength=R;const{Uint8Array:j,ArrayBuffer:O,SharedArrayBuffer:L}=globalThis;F.TYPED_ARRAY_SUPPORT=z(),!F.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function z(){try{const H=new j(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,j.prototype),Object.setPrototypeOf(H,B),H.foo()===42}catch{return!1}}Object.defineProperty(F.prototype,"parent",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.buffer}}),Object.defineProperty(F.prototype,"offset",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.byteOffset}});function Y(H){if(H>R)throw new RangeError('The value "'+H+'" is invalid for option "size"');const B=new j(H);return Object.setPrototypeOf(B,F.prototype),B}function F(H,B,W){if(typeof H=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return te(H)}return K(H,B,W)}F.poolSize=8192;function K(H,B,W){if(typeof H=="string")return re(H,B);if(O.isView(H))return ae(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(ge(H,O)||H&&ge(H.buffer,O)||typeof L<"u"&&(ge(H,L)||H&&ge(H.buffer,L)))return U(H,B,W);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=H.valueOf&&H.valueOf();if(he!=null&&he!==H)return F.from(he,B,W);const Te=ee(H);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return F.from(H[Symbol.toPrimitive]("string"),B,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}F.from=function(H,B,W){return K(H,B,W)},Object.setPrototypeOf(F.prototype,j.prototype),Object.setPrototypeOf(F,j);function q(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function fe(H,B,W){return q(H),H<=0?Y(H):B!==void 0?typeof W=="string"?Y(H).fill(B,W):Y(H).fill(B):Y(H)}F.alloc=function(H,B,W){return fe(H,B,W)};function te(H){return q(H),Y(H<0?0:J(H)|0)}F.allocUnsafe=function(H){return te(H)},F.allocUnsafeSlow=function(H){return te(H)};function re(H,B){if((typeof B!="string"||B==="")&&(B="utf8"),!F.isEncoding(B))throw new TypeError("Unknown encoding: "+B);const W=be(H,B)|0;let he=Y(W);const Te=he.write(H,B);return Te!==W&&(he=he.slice(0,Te)),he}function X(H){const B=H.length<0?0:J(H.length)|0,W=Y(B);for(let he=0;he<B;he+=1)W[he]=H[he]&255;return W}function ae(H){if(ge(H,j)){const B=new j(H);return U(B.buffer,B.byteOffset,B.byteLength)}return X(H)}function U(H,B,W){if(B<0||H.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<B+(W||0))throw new RangeError('"length" is outside of buffer bounds');let he;return B===void 0&&W===void 0?he=new j(H):W===void 0?he=new j(H,B):he=new j(H,B,W),Object.setPrototypeOf(he,F.prototype),he}function ee(H){if(F.isBuffer(H)){const B=J(H.length)|0,W=Y(B);return W.length===0||H.copy(W,0,0,B),W}if(H.length!==void 0)return typeof H.length!="number"||je(H.length)?Y(0):X(H);if(H.type==="Buffer"&&Array.isArray(H.data))return X(H.data)}function J(H){if(H>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return H|0}function ue(H){return+H!=H&&(H=0),F.alloc(+H)}F.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==F.prototype},F.compare=function(B,W){if(ge(B,j)&&(B=F.from(B,B.offset,B.byteLength)),ge(W,j)&&(W=F.from(W,W.offset,W.byteLength)),!F.isBuffer(B)||!F.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===W)return 0;let he=B.length,Te=W.length;for(let He=0,pt=Math.min(he,Te);He<pt;++He)if(B[He]!==W[He]){he=B[He],Te=W[He];break}return he<Te?-1:Te<he?1:0},F.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},F.concat=function(B,W){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return F.alloc(0);let he;if(W===void 0)for(W=0,he=0;he<B.length;++he)W+=B[he].length;const Te=F.allocUnsafe(W);let He=0;for(he=0;he<B.length;++he){let pt=B[he];if(ge(pt,j))He+pt.length>Te.length?(F.isBuffer(pt)||(pt=F.from(pt)),pt.copy(Te,He)):j.prototype.set.call(Te,pt,He);else if(F.isBuffer(pt))pt.copy(Te,He);else throw new TypeError('"list" argument must be an Array of Buffers');He+=pt.length}return Te};function be(H,B){if(F.isBuffer(H))return H.length;if(O.isView(H)||ge(H,O))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const W=H.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&W===0)return 0;let Te=!1;for(;;)switch(B){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ft(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return Be(H).length;default:if(Te)return he?-1:ft(H).length;B=(""+B).toLowerCase(),Te=!0}}F.byteLength=be;function _e(H,B,W){let he=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,B>>>=0,W<=B))return"";for(H||(H="utf8");;)switch(H){case"hex":return xe(this,B,W);case"utf8":case"utf-8":return me(this,B,W);case"ascii":return ie(this,B,W);case"latin1":case"binary":return Q(this,B,W);case"base64":return V(this,B,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,B,W);default:if(he)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),he=!0}}F.prototype._isBuffer=!0;function Pe(H,B,W){const he=H[B];H[B]=H[W],H[W]=he}F.prototype.swap16=function(){const B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<B;W+=2)Pe(this,W,W+1);return this},F.prototype.swap32=function(){const B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<B;W+=4)Pe(this,W,W+3),Pe(this,W+1,W+2);return this},F.prototype.swap64=function(){const B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<B;W+=8)Pe(this,W,W+7),Pe(this,W+1,W+6),Pe(this,W+2,W+5),Pe(this,W+3,W+4);return this},F.prototype.toString=function(){const B=this.length;return B===0?"":arguments.length===0?me(this,0,B):_e.apply(this,arguments)},F.prototype.toLocaleString=F.prototype.toString,F.prototype.equals=function(B){if(!F.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B?!0:F.compare(this,B)===0},F.prototype.inspect=function(){let B="";const W=S.INSPECT_MAX_BYTES;return B=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(B+=" ... "),"<Buffer "+B+">"},k&&(F.prototype[k]=F.prototype.inspect),F.prototype.compare=function(B,W,he,Te,He){if(ge(B,j)&&(B=F.from(B,B.offset,B.byteLength)),!F.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(W===void 0&&(W=0),he===void 0&&(he=B?B.length:0),Te===void 0&&(Te=0),He===void 0&&(He=this.length),W<0||he>B.length||Te<0||He>this.length)throw new RangeError("out of range index");if(Te>=He&&W>=he)return 0;if(Te>=He)return-1;if(W>=he)return 1;if(W>>>=0,he>>>=0,Te>>>=0,He>>>=0,this===B)return 0;let pt=He-Te,Vt=he-W;const ut=Math.min(pt,Vt),At=this.slice(Te,He),Mt=B.slice(W,he);for(let Xt=0;Xt<ut;++Xt)if(At[Xt]!==Mt[Xt]){pt=At[Xt],Vt=Mt[Xt];break}return pt<Vt?-1:Vt<pt?1:0};function Ne(H,B,W,he,Te){if(H.length===0)return-1;if(typeof W=="string"?(he=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,je(W)&&(W=Te?0:H.length-1),W<0&&(W=H.length+W),W>=H.length){if(Te)return-1;W=H.length-1}else if(W<0)if(Te)W=0;else return-1;if(typeof B=="string"&&(B=F.from(B,he)),F.isBuffer(B))return B.length===0?-1:Re(H,B,W,he,Te);if(typeof B=="number")return B=B&255,typeof j.prototype.indexOf=="function"?Te?j.prototype.indexOf.call(H,B,W):j.prototype.lastIndexOf.call(H,B,W):Re(H,[B],W,he,Te);throw new TypeError("val must be string, number or Buffer")}function Re(H,B,W,he,Te){let He=1,pt=H.length,Vt=B.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(H.length<2||B.length<2)return-1;He=2,pt/=2,Vt/=2,W/=2}function ut(Mt,Xt){return He===1?Mt[Xt]:Mt.readUInt16BE(Xt*He)}let At;if(Te){let Mt=-1;for(At=W;At<pt;At++)if(ut(H,At)===ut(B,Mt===-1?0:At-Mt)){if(Mt===-1&&(Mt=At),At-Mt+1===Vt)return Mt*He}else Mt!==-1&&(At-=At-Mt),Mt=-1}else for(W+Vt>pt&&(W=pt-Vt),At=W;At>=0;At--){let Mt=!0;for(let Xt=0;Xt<Vt;Xt++)if(ut(H,At+Xt)!==ut(B,Xt)){Mt=!1;break}if(Mt)return At}return-1}F.prototype.includes=function(B,W,he){return this.indexOf(B,W,he)!==-1},F.prototype.indexOf=function(B,W,he){return Ne(this,B,W,he,!0)},F.prototype.lastIndexOf=function(B,W,he){return Ne(this,B,W,he,!1)};function Ce(H,B,W,he){W=Number(W)||0;const Te=H.length-W;he?(he=Number(he),he>Te&&(he=Te)):he=Te;const He=B.length;he>He/2&&(he=He/2);let pt;for(pt=0;pt<he;++pt){const Vt=parseInt(B.substr(pt*2,2),16);if(je(Vt))return pt;H[W+pt]=Vt}return pt}function Fe(H,B,W,he){return tt(ft(B,H.length-W),H,W,he)}function Qe(H,B,W,he){return tt(vt(B),H,W,he)}function Le(H,B,W,he){return tt(Be(B),H,W,he)}function Ie(H,B,W,he){return tt(M(B,H.length-W),H,W,he)}F.prototype.write=function(B,W,he,Te){if(W===void 0)Te="utf8",he=this.length,W=0;else if(he===void 0&&typeof W=="string")Te=W,he=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(he)?(he=he>>>0,Te===void 0&&(Te="utf8")):(Te=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const He=this.length-W;if((he===void 0||he>He)&&(he=He),B.length>0&&(he<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");Te||(Te="utf8");let pt=!1;for(;;)switch(Te){case"hex":return Ce(this,B,W,he);case"utf8":case"utf-8":return Fe(this,B,W,he);case"ascii":case"latin1":case"binary":return Qe(this,B,W,he);case"base64":return Le(this,B,W,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,B,W,he);default:if(pt)throw new TypeError("Unknown encoding: "+Te);Te=(""+Te).toLowerCase(),pt=!0}},F.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(H,B,W){return B===0&&W===H.length?E.fromByteArray(H):E.fromByteArray(H.slice(B,W))}function me(H,B,W){W=Math.min(H.length,W);const he=[];let Te=B;for(;Te<W;){const He=H[Te];let pt=null,Vt=He>239?4:He>223?3:He>191?2:1;if(Te+Vt<=W){let ut,At,Mt,Xt;switch(Vt){case 1:He<128&&(pt=He);break;case 2:ut=H[Te+1],(ut&192)===128&&(Xt=(He&31)<<6|ut&63,Xt>127&&(pt=Xt));break;case 3:ut=H[Te+1],At=H[Te+2],(ut&192)===128&&(At&192)===128&&(Xt=(He&15)<<12|(ut&63)<<6|At&63,Xt>2047&&(Xt<55296||Xt>57343)&&(pt=Xt));break;case 4:ut=H[Te+1],At=H[Te+2],Mt=H[Te+3],(ut&192)===128&&(At&192)===128&&(Mt&192)===128&&(Xt=(He&15)<<18|(ut&63)<<12|(At&63)<<6|Mt&63,Xt>65535&&Xt<1114112&&(pt=Xt))}}pt===null?(pt=65533,Vt=1):pt>65535&&(pt-=65536,he.push(pt>>>10&1023|55296),pt=56320|pt&1023),he.push(pt),Te+=Vt}return se(he)}const Ae=4096;function se(H){const B=H.length;if(B<=Ae)return String.fromCharCode.apply(String,H);let W="",he=0;for(;he<B;)W+=String.fromCharCode.apply(String,H.slice(he,he+=Ae));return W}function ie(H,B,W){let he="";W=Math.min(H.length,W);for(let Te=B;Te<W;++Te)he+=String.fromCharCode(H[Te]&127);return he}function Q(H,B,W){let he="";W=Math.min(H.length,W);for(let Te=B;Te<W;++Te)he+=String.fromCharCode(H[Te]);return he}function xe(H,B,W){const he=H.length;(!B||B<0)&&(B=0),(!W||W<0||W>he)&&(W=he);let Te="";for(let He=B;He<W;++He)Te+=Ke[H[He]];return Te}function Me(H,B,W){const he=H.slice(B,W);let Te="";for(let He=0;He<he.length-1;He+=2)Te+=String.fromCharCode(he[He]+he[He+1]*256);return Te}F.prototype.slice=function(B,W){const he=this.length;B=~~B,W=W===void 0?he:~~W,B<0?(B+=he,B<0&&(B=0)):B>he&&(B=he),W<0?(W+=he,W<0&&(W=0)):W>he&&(W=he),W<B&&(W=B);const Te=this.subarray(B,W);return Object.setPrototypeOf(Te,F.prototype),Te};function Ee(H,B,W){if(H%1!==0||H<0)throw new RangeError("offset is not uint");if(H+B>W)throw new RangeError("Trying to access beyond buffer length")}F.prototype.readUintLE=F.prototype.readUIntLE=function(B,W,he){B=B>>>0,W=W>>>0,he||Ee(B,W,this.length);let Te=this[B],He=1,pt=0;for(;++pt<W&&(He*=256);)Te+=this[B+pt]*He;return Te},F.prototype.readUintBE=F.prototype.readUIntBE=function(B,W,he){B=B>>>0,W=W>>>0,he||Ee(B,W,this.length);let Te=this[B+--W],He=1;for(;W>0&&(He*=256);)Te+=this[B+--W]*He;return Te},F.prototype.readUint8=F.prototype.readUInt8=function(B,W){return B=B>>>0,W||Ee(B,1,this.length),this[B]},F.prototype.readUint16LE=F.prototype.readUInt16LE=function(B,W){return B=B>>>0,W||Ee(B,2,this.length),this[B]|this[B+1]<<8},F.prototype.readUint16BE=F.prototype.readUInt16BE=function(B,W){return B=B>>>0,W||Ee(B,2,this.length),this[B]<<8|this[B+1]},F.prototype.readUint32LE=F.prototype.readUInt32LE=function(B,W){return B=B>>>0,W||Ee(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+this[B+3]*16777216},F.prototype.readUint32BE=F.prototype.readUInt32BE=function(B,W){return B=B>>>0,W||Ee(B,4,this.length),this[B]*16777216+(this[B+1]<<16|this[B+2]<<8|this[B+3])},F.prototype.readBigUInt64LE=Nt(function(B){B=B>>>0,Oe(B,"offset");const W=this[B],he=this[B+7];(W===void 0||he===void 0)&&ve(B,this.length-8);const Te=W+this[++B]*2**8+this[++B]*2**16+this[++B]*2**24,He=this[++B]+this[++B]*2**8+this[++B]*2**16+he*2**24;return BigInt(Te)+(BigInt(He)<<BigInt(32))}),F.prototype.readBigUInt64BE=Nt(function(B){B=B>>>0,Oe(B,"offset");const W=this[B],he=this[B+7];(W===void 0||he===void 0)&&ve(B,this.length-8);const Te=W*2**24+this[++B]*2**16+this[++B]*2**8+this[++B],He=this[++B]*2**24+this[++B]*2**16+this[++B]*2**8+he;return(BigInt(Te)<<BigInt(32))+BigInt(He)}),F.prototype.readIntLE=function(B,W,he){B=B>>>0,W=W>>>0,he||Ee(B,W,this.length);let Te=this[B],He=1,pt=0;for(;++pt<W&&(He*=256);)Te+=this[B+pt]*He;return He*=128,Te>=He&&(Te-=Math.pow(2,8*W)),Te},F.prototype.readIntBE=function(B,W,he){B=B>>>0,W=W>>>0,he||Ee(B,W,this.length);let Te=W,He=1,pt=this[B+--Te];for(;Te>0&&(He*=256);)pt+=this[B+--Te]*He;return He*=128,pt>=He&&(pt-=Math.pow(2,8*W)),pt},F.prototype.readInt8=function(B,W){return B=B>>>0,W||Ee(B,1,this.length),this[B]&128?(255-this[B]+1)*-1:this[B]},F.prototype.readInt16LE=function(B,W){B=B>>>0,W||Ee(B,2,this.length);const he=this[B]|this[B+1]<<8;return he&32768?he|4294901760:he},F.prototype.readInt16BE=function(B,W){B=B>>>0,W||Ee(B,2,this.length);const he=this[B+1]|this[B]<<8;return he&32768?he|4294901760:he},F.prototype.readInt32LE=function(B,W){return B=B>>>0,W||Ee(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},F.prototype.readInt32BE=function(B,W){return B=B>>>0,W||Ee(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},F.prototype.readBigInt64LE=Nt(function(B){B=B>>>0,Oe(B,"offset");const W=this[B],he=this[B+7];(W===void 0||he===void 0)&&ve(B,this.length-8);const Te=this[B+4]+this[B+5]*2**8+this[B+6]*2**16+(he<<24);return(BigInt(Te)<<BigInt(32))+BigInt(W+this[++B]*2**8+this[++B]*2**16+this[++B]*2**24)}),F.prototype.readBigInt64BE=Nt(function(B){B=B>>>0,Oe(B,"offset");const W=this[B],he=this[B+7];(W===void 0||he===void 0)&&ve(B,this.length-8);const Te=(W<<24)+this[++B]*2**16+this[++B]*2**8+this[++B];return(BigInt(Te)<<BigInt(32))+BigInt(this[++B]*2**24+this[++B]*2**16+this[++B]*2**8+he)}),F.prototype.readFloatLE=function(B,W){return B=B>>>0,W||Ee(B,4,this.length),C.read(this,B,!0,23,4)},F.prototype.readFloatBE=function(B,W){return B=B>>>0,W||Ee(B,4,this.length),C.read(this,B,!1,23,4)},F.prototype.readDoubleLE=function(B,W){return B=B>>>0,W||Ee(B,8,this.length),C.read(this,B,!0,52,8)},F.prototype.readDoubleBE=function(B,W){return B=B>>>0,W||Ee(B,8,this.length),C.read(this,B,!1,52,8)};function We(H,B,W,he,Te,He){if(!F.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>Te||B<He)throw new RangeError('"value" argument is out of bounds');if(W+he>H.length)throw new RangeError("Index out of range")}F.prototype.writeUintLE=F.prototype.writeUIntLE=function(B,W,he,Te){if(B=+B,W=W>>>0,he=he>>>0,!Te){const Vt=Math.pow(2,8*he)-1;We(this,B,W,he,Vt,0)}let He=1,pt=0;for(this[W]=B&255;++pt<he&&(He*=256);)this[W+pt]=B/He&255;return W+he},F.prototype.writeUintBE=F.prototype.writeUIntBE=function(B,W,he,Te){if(B=+B,W=W>>>0,he=he>>>0,!Te){const Vt=Math.pow(2,8*he)-1;We(this,B,W,he,Vt,0)}let He=he-1,pt=1;for(this[W+He]=B&255;--He>=0&&(pt*=256);)this[W+He]=B/pt&255;return W+he},F.prototype.writeUint8=F.prototype.writeUInt8=function(B,W,he){return B=+B,W=W>>>0,he||We(this,B,W,1,255,0),this[W]=B&255,W+1},F.prototype.writeUint16LE=F.prototype.writeUInt16LE=function(B,W,he){return B=+B,W=W>>>0,he||We(this,B,W,2,65535,0),this[W]=B&255,this[W+1]=B>>>8,W+2},F.prototype.writeUint16BE=F.prototype.writeUInt16BE=function(B,W,he){return B=+B,W=W>>>0,he||We(this,B,W,2,65535,0),this[W]=B>>>8,this[W+1]=B&255,W+2},F.prototype.writeUint32LE=F.prototype.writeUInt32LE=function(B,W,he){return B=+B,W=W>>>0,he||We(this,B,W,4,4294967295,0),this[W+3]=B>>>24,this[W+2]=B>>>16,this[W+1]=B>>>8,this[W]=B&255,W+4},F.prototype.writeUint32BE=F.prototype.writeUInt32BE=function(B,W,he){return B=+B,W=W>>>0,he||We(this,B,W,4,4294967295,0),this[W]=B>>>24,this[W+1]=B>>>16,this[W+2]=B>>>8,this[W+3]=B&255,W+4};function kt(H,B,W,he,Te){de(B,he,Te,H,W,7);let He=Number(B&BigInt(4294967295));H[W++]=He,He=He>>8,H[W++]=He,He=He>>8,H[W++]=He,He=He>>8,H[W++]=He;let pt=Number(B>>BigInt(32)&BigInt(4294967295));return H[W++]=pt,pt=pt>>8,H[W++]=pt,pt=pt>>8,H[W++]=pt,pt=pt>>8,H[W++]=pt,W}function at(H,B,W,he,Te){de(B,he,Te,H,W,7);let He=Number(B&BigInt(4294967295));H[W+7]=He,He=He>>8,H[W+6]=He,He=He>>8,H[W+5]=He,He=He>>8,H[W+4]=He;let pt=Number(B>>BigInt(32)&BigInt(4294967295));return H[W+3]=pt,pt=pt>>8,H[W+2]=pt,pt=pt>>8,H[W+1]=pt,pt=pt>>8,H[W]=pt,W+8}F.prototype.writeBigUInt64LE=Nt(function(B,W=0){return kt(this,B,W,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeBigUInt64BE=Nt(function(B,W=0){return at(this,B,W,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeIntLE=function(B,W,he,Te){if(B=+B,W=W>>>0,!Te){const ut=Math.pow(2,8*he-1);We(this,B,W,he,ut-1,-ut)}let He=0,pt=1,Vt=0;for(this[W]=B&255;++He<he&&(pt*=256);)B<0&&Vt===0&&this[W+He-1]!==0&&(Vt=1),this[W+He]=(B/pt>>0)-Vt&255;return W+he},F.prototype.writeIntBE=function(B,W,he,Te){if(B=+B,W=W>>>0,!Te){const ut=Math.pow(2,8*he-1);We(this,B,W,he,ut-1,-ut)}let He=he-1,pt=1,Vt=0;for(this[W+He]=B&255;--He>=0&&(pt*=256);)B<0&&Vt===0&&this[W+He+1]!==0&&(Vt=1),this[W+He]=(B/pt>>0)-Vt&255;return W+he},F.prototype.writeInt8=function(B,W,he){return B=+B,W=W>>>0,he||We(this,B,W,1,127,-128),B<0&&(B=255+B+1),this[W]=B&255,W+1},F.prototype.writeInt16LE=function(B,W,he){return B=+B,W=W>>>0,he||We(this,B,W,2,32767,-32768),this[W]=B&255,this[W+1]=B>>>8,W+2},F.prototype.writeInt16BE=function(B,W,he){return B=+B,W=W>>>0,he||We(this,B,W,2,32767,-32768),this[W]=B>>>8,this[W+1]=B&255,W+2},F.prototype.writeInt32LE=function(B,W,he){return B=+B,W=W>>>0,he||We(this,B,W,4,2147483647,-2147483648),this[W]=B&255,this[W+1]=B>>>8,this[W+2]=B>>>16,this[W+3]=B>>>24,W+4},F.prototype.writeInt32BE=function(B,W,he){return B=+B,W=W>>>0,he||We(this,B,W,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[W]=B>>>24,this[W+1]=B>>>16,this[W+2]=B>>>8,this[W+3]=B&255,W+4},F.prototype.writeBigInt64LE=Nt(function(B,W=0){return kt(this,B,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),F.prototype.writeBigInt64BE=Nt(function(B,W=0){return at(this,B,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _t(H,B,W,he,Te,He){if(W+he>H.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Dt(H,B,W,he,Te){return B=+B,W=W>>>0,Te||_t(H,B,W,4),C.write(H,B,W,he,23,4),W+4}F.prototype.writeFloatLE=function(B,W,he){return Dt(this,B,W,!0,he)},F.prototype.writeFloatBE=function(B,W,he){return Dt(this,B,W,!1,he)};function jt(H,B,W,he,Te){return B=+B,W=W>>>0,Te||_t(H,B,W,8),C.write(H,B,W,he,52,8),W+8}F.prototype.writeDoubleLE=function(B,W,he){return jt(this,B,W,!0,he)},F.prototype.writeDoubleBE=function(B,W,he){return jt(this,B,W,!1,he)},F.prototype.copy=function(B,W,he,Te){if(!F.isBuffer(B))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Te&&Te!==0&&(Te=this.length),W>=B.length&&(W=B.length),W||(W=0),Te>0&&Te<he&&(Te=he),Te===he||B.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("sourceEnd out of bounds");Te>this.length&&(Te=this.length),B.length-W<Te-he&&(Te=B.length-W+he);const He=Te-he;return this===B&&typeof j.prototype.copyWithin=="function"?this.copyWithin(W,he,Te):j.prototype.set.call(B,this.subarray(he,Te),W),He},F.prototype.fill=function(B,W,he,Te){if(typeof B=="string"){if(typeof W=="string"?(Te=W,W=0,he=this.length):typeof he=="string"&&(Te=he,he=this.length),Te!==void 0&&typeof Te!="string")throw new TypeError("encoding must be a string");if(typeof Te=="string"&&!F.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);if(B.length===1){const pt=B.charCodeAt(0);(Te==="utf8"&&pt<128||Te==="latin1")&&(B=pt)}}else typeof B=="number"?B=B&255:typeof B=="boolean"&&(B=Number(B));if(W<0||this.length<W||this.length<he)throw new RangeError("Out of range index");if(he<=W)return this;W=W>>>0,he=he===void 0?this.length:he>>>0,B||(B=0);let He;if(typeof B=="number")for(He=W;He<he;++He)this[He]=B;else{const pt=F.isBuffer(B)?B:F.from(B,Te),Vt=pt.length;if(Vt===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(He=0;He<he-W;++He)this[He+W]=pt[He%Vt]}return this};const Gt={};function ye(H,B,W){Gt[H]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:B.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${H}]`,this.stack,delete this.name}get code(){return H}set code(Te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Te,writable:!0})}toString(){return`${this.name} [${H}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(H,B){return`The "${H}" argument must be of type number. Received type ${typeof B}`},TypeError),ye("ERR_OUT_OF_RANGE",function(H,B,W){let he=`The value of "${H}" is out of range.`,Te=W;return Number.isInteger(W)&&Math.abs(W)>2**32?Te=I(String(W)):typeof W=="bigint"&&(Te=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(Te=I(Te)),Te+="n"),he+=` It must be ${B}. Received ${Te}`,he},RangeError);function I(H){let B="",W=H.length;const he=H[0]==="-"?1:0;for(;W>=he+4;W-=3)B=`_${H.slice(W-3,W)}${B}`;return`${H.slice(0,W)}${B}`}function G(H,B,W){Oe(B,"offset"),(H[B]===void 0||H[B+W]===void 0)&&ve(B,H.length-(W+1))}function de(H,B,W,he,Te,He){if(H>W||H<B){const pt=typeof B=="bigint"?"n":"";let Vt;throw B===0||B===BigInt(0)?Vt=`>= 0${pt} and < 2${pt} ** ${(He+1)*8}${pt}`:Vt=`>= -(2${pt} ** ${(He+1)*8-1}${pt}) and < 2 ** ${(He+1)*8-1}${pt}`,new Gt.ERR_OUT_OF_RANGE("value",Vt,H)}G(he,Te,He)}function Oe(H,B){if(typeof H!="number")throw new Gt.ERR_INVALID_ARG_TYPE(B,"number",H)}function ve(H,B,W){throw Math.floor(H)!==H?(Oe(H,W),new Gt.ERR_OUT_OF_RANGE("offset","an integer",H)):B<0?new Gt.ERR_BUFFER_OUT_OF_BOUNDS:new Gt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${B}`,H)}const ke=/[^+/0-9A-Za-z-_]/g;function le(H){if(H=H.split("=")[0],H=H.trim().replace(ke,""),H.length<2)return"";for(;H.length%4!==0;)H=H+"=";return H}function ft(H,B){B=B||1/0;let W;const he=H.length;let Te=null;const He=[];for(let pt=0;pt<he;++pt){if(W=H.charCodeAt(pt),W>55295&&W<57344){if(!Te){if(W>56319){(B-=3)>-1&&He.push(239,191,189);continue}else if(pt+1===he){(B-=3)>-1&&He.push(239,191,189);continue}Te=W;continue}if(W<56320){(B-=3)>-1&&He.push(239,191,189),Te=W;continue}W=(Te-55296<<10|W-56320)+65536}else Te&&(B-=3)>-1&&He.push(239,191,189);if(Te=null,W<128){if((B-=1)<0)break;He.push(W)}else if(W<2048){if((B-=2)<0)break;He.push(W>>6|192,W&63|128)}else if(W<65536){if((B-=3)<0)break;He.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((B-=4)<0)break;He.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return He}function vt(H){const B=[];for(let W=0;W<H.length;++W)B.push(H.charCodeAt(W)&255);return B}function M(H,B){let W,he,Te;const He=[];for(let pt=0;pt<H.length&&!((B-=2)<0);++pt)W=H.charCodeAt(pt),he=W>>8,Te=W%256,He.push(Te),He.push(he);return He}function Be(H){return E.toByteArray(le(H))}function tt(H,B,W,he){let Te;for(Te=0;Te<he&&!(Te+W>=B.length||Te>=H.length);++Te)B[Te+W]=H[Te];return Te}function ge(H,B){return H instanceof B||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===B.name}function je(H){return H!==H}const Ke=function(){const H="0123456789abcdef",B=new Array(256);for(let W=0;W<16;++W){const he=W*16;for(let Te=0;Te<16;++Te)B[he+Te]=H[W]+H[Te]}return B}();function Nt(H){return typeof BigInt>"u"?pe:H}function pe(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(bS)),bS}var vS,zI;function Kr(){if(zI)return vS;zI=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return vS={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},vS}var wS={exports:{}},_S,UI;function fP(){return UI||(UI=1,_S={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),_S}var xS,HI;function xi(){if(HI)return xS;HI=1;const{format:e,inspect:t}=fP(),{AggregateError:n}=Kr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",l={};function u(_,x){if(!_)throw new l.ERR_INTERNAL_ASSERTION(x)}function d(_){let x="",S=_.length;const E=_[0]==="-"?1:0;for(;S>=E+4;S-=3)x=`_${_.slice(S-3,S)}${x}`;return`${_.slice(0,S)}${x}`}function h(_,x,S){if(typeof x=="function")return u(x.length<=S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${x.length}).`),x(...S);const E=(x.match(/%[dfijoOs]/g)||[]).length;return u(E===S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?x:e(x,...S)}function p(_,x,S){S||(S=Error);class E extends S{constructor(...k){super(h(_,x,k))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[a]=!0,l[_]=E}function g(_){const x=s+_.name;return Object.defineProperty(_,"name",{value:x}),_}function v(_,x){if(_&&x&&_!==x){if(Array.isArray(x.errors))return x.errors.push(_),x;const S=new r([x,_],x.message);return S.code=x.code,S}return _||x}class b extends Error{constructor(x="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",S);super(x,S),this.code="ABORT_ERR",this.name="AbortError"}}return p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(_,x,S)=>{u(typeof _=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const C=[],k=[],R=[];for(const O of x)u(typeof O=="string","All expected entries have to be of type string"),i.includes(O)?C.push(O.toLowerCase()):o.test(O)?k.push(O):(u(O!=="object",'The value "object" should be written as "Object"'),R.push(O));if(k.length>0){const O=C.indexOf("object");O!==-1&&(C.splice(C,O,1),k.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const O=C.pop();E+=`one of type ${C.join(", ")}, or ${O}`}}(k.length>0||R.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const O=k.pop();E+=`an instance of ${k.join(", ")}, or ${O}`}}R.length>0&&(E+=" or ")}switch(R.length){case 0:break;case 1:R[0].toLowerCase()!==R[0]&&(E+="an "),E+=`${R[0]}`;break;case 2:E+=`one of ${R[0]} or ${R[1]}`;break;default:{const O=R.pop();E+=`one of ${R.join(", ")}, or ${O}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var j;if((j=S.constructor)!==null&&j!==void 0&&j.name)E+=`. Received an instance of ${S.constructor.name}`;else{const O=t(S,{depth:-1});E+=`. Received ${O}`}}else{let O=t(S,{colors:!1});O.length>25&&(O=`${O.slice(0,25)}...`),E+=`. Received type ${typeof S} (${O})`}return E},TypeError),p("ERR_INVALID_ARG_VALUE",(_,x,S="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${S}. Received ${E}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(_,x,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${_} to be returned from the "${x}" function but got ${C}.`},TypeError),p("ERR_MISSING_ARGS",(..._)=>{u(_.length>0,"At least one arg needs to be specified");let x;const S=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),S){case 1:x+=`The ${_[0]} argument`;break;case 2:x+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();x+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(_,x,S)=>{u(x,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=d(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=d(E)),E+="n"}else E=t(S);return`The value of "${_}" is out of range. It must be ${x}. Received ${E}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),xS={AbortError:b,aggregateTwoErrors:g(v),hideStackFrames:g,codes:l},xS}var km={exports:{}},qI;function y0(){if(qI)return km.exports;qI=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return km.exports=e,km.exports.AbortSignal=t,km.exports.default=e,km.exports}var wb={exports:{}},VI;function Ww(){if(VI)return wb.exports;VI=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,R,j){return Function.prototype.apply.call(k,R,j)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}wb.exports=i,wb.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(k){for(var R=[],j=1;j<arguments.length;j++)R.push(arguments[j]);var O=k==="error",L=this._events;if(L!==void 0)O=O&&L.error===void 0;else if(!O)return!1;if(O){var z;if(R.length>0&&(z=R[0]),z instanceof Error)throw z;var Y=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw Y.context=z,Y}var F=L[k];if(F===void 0)return!1;if(typeof F=="function")t(F,this,R);else for(var K=F.length,q=v(F,K),j=0;j<K;++j)t(q[j],this,R);return!0};function u(C,k,R,j){var O,L,z;if(s(R),L=C._events,L===void 0?(L=C._events=Object.create(null),C._eventsCount=0):(L.newListener!==void 0&&(C.emit("newListener",k,R.listener?R.listener:R),L=C._events),z=L[k]),z===void 0)z=L[k]=R,++C._eventsCount;else if(typeof z=="function"?z=L[k]=j?[R,z]:[z,R]:j?z.unshift(R):z.push(R),O=l(C),O>0&&z.length>O&&!z.warned){z.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=C,Y.type=k,Y.count=z.length,r(Y)}return C}i.prototype.addListener=function(k,R){return u(this,k,R,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,R){return u(this,k,R,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,k,R){var j={fired:!1,wrapFn:void 0,target:C,type:k,listener:R},O=d.bind(j);return O.listener=R,j.wrapFn=O,O}i.prototype.once=function(k,R){return s(R),this.on(k,h(this,k,R)),this},i.prototype.prependOnceListener=function(k,R){return s(R),this.prependListener(k,h(this,k,R)),this},i.prototype.removeListener=function(k,R){var j,O,L,z,Y;if(s(R),O=this._events,O===void 0)return this;if(j=O[k],j===void 0)return this;if(j===R||j.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete O[k],O.removeListener&&this.emit("removeListener",k,j.listener||R));else if(typeof j!="function"){for(L=-1,z=j.length-1;z>=0;z--)if(j[z]===R||j[z].listener===R){Y=j[z].listener,L=z;break}if(L<0)return this;L===0?j.shift():b(j,L),j.length===1&&(O[k]=j[0]),O.removeListener!==void 0&&this.emit("removeListener",k,Y||R)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var R,j,O;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[k]),this;if(arguments.length===0){var L=Object.keys(j),z;for(O=0;O<L.length;++O)z=L[O],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=j[k],typeof R=="function")this.removeListener(k,R);else if(R!==void 0)for(O=R.length-1;O>=0;O--)this.removeListener(k,R[O]);return this};function p(C,k,R){var j=C._events;if(j===void 0)return[];var O=j[k];return O===void 0?[]:typeof O=="function"?R?[O.listener||O]:[O]:R?_(O):v(O,O.length)}i.prototype.listeners=function(k){return p(this,k,!0)},i.prototype.rawListeners=function(k){return p(this,k,!1)},i.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):g.call(C,k)},i.prototype.listenerCount=g;function g(C){var k=this._events;if(k!==void 0){var R=k[C];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,k){for(var R=new Array(k),j=0;j<k;++j)R[j]=C[j];return R}function b(C,k){for(;k+1<C.length;k++)C[k]=C[k+1];C.pop()}function _(C){for(var k=new Array(C.length),R=0;R<k.length;++R)k[R]=C[R].listener||C[R];return k}function x(C,k){return new Promise(function(R,j){function O(z){C.removeListener(k,L),j(z)}function L(){typeof C.removeListener=="function"&&C.removeListener("error",O),R([].slice.call(arguments))}E(C,k,L,{once:!0}),k!=="error"&&S(C,O,{once:!0})})}function S(C,k,R){typeof C.on=="function"&&E(C,"error",k,R)}function E(C,k,R,j){if(typeof C.on=="function")j.once?C.once(k,R):C.on(k,R);else if(typeof C.addEventListener=="function")C.addEventListener(k,function O(L){j.once&&C.removeEventListener(k,O),R(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return wb.exports}var GI;function ji(){return GI||(GI=1,function(e){const t=_u(),{format:n,inspect:r}=fP(),{codes:{ERR_INVALID_ARG_TYPE:a}}=xi(),{kResistStopPropagation:i,AggregateError:o,SymbolDispose:s}=Kr(),l=globalThis.AbortSignal||y0().AbortSignal,u=globalThis.AbortController||y0().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,p=typeof h<"u"?function(_){return _ instanceof h}:function(_){return!1},g=(b,_)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(_,"AbortSignal",b)},v=(b,_)=>{if(typeof b!="function")throw new a(_,"Function",b)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(b){let _=!1;return function(...x){_||(_=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,_;return{promise:new Promise((S,E)=>{b=S,_=E}),resolve:b,reject:_}},promisify(b){return new Promise((_,x)=>{b((S,...E)=>S?x(S):_(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:p,deprecate(b,_){return b},addAbortListener:Ww().addAbortListener||function(_,x){if(_===void 0)throw new a("signal","AbortSignal",_);g(_,"signal"),v(x,"listener");let S;return _.aborted?queueMicrotask(()=>x()):(_.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),S=()=>{_.removeEventListener("abort",x)}),{__proto__:null,[s](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(_){if(_.length===1)return _[0];const x=new u,S=()=>x.abort();return _.forEach(E=>{g(E,"signals"),E.addEventListener("abort",S,{once:!0})}),x.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(wS)),wS.exports}var _b={},SS,WI;function dg(){if(WI)return SS;WI=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:p,StringPrototypeTrim:g}=Kr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=xi(),{normalizeEncoding:C}=ji(),{isAsyncFunction:k,isArrayBufferView:R}=ji().types,j={};function O(Q){return Q===(Q|0)}function L(Q){return Q===Q>>>0}const z=/^[0-7]+$/,Y="must be a 32-bit unsigned integer or an octal string";function F(Q,xe,Me){if(typeof Q>"u"&&(Q=Me),typeof Q=="string"){if(d(z,Q)===null)throw new x(xe,Q,Y);Q=l(Q,8)}return fe(Q,xe),Q}const K=v((Q,xe,Me=s,Ee=o)=>{if(typeof Q!="number")throw new _(xe,"number",Q);if(!a(Q))throw new S(xe,"an integer",Q);if(Q<Me||Q>Ee)throw new S(xe,`>= ${Me} && <= ${Ee}`,Q)}),q=v((Q,xe,Me=-2147483648,Ee=2147483647)=>{if(typeof Q!="number")throw new _(xe,"number",Q);if(!a(Q))throw new S(xe,"an integer",Q);if(Q<Me||Q>Ee)throw new S(xe,`>= ${Me} && <= ${Ee}`,Q)}),fe=v((Q,xe,Me=!1)=>{if(typeof Q!="number")throw new _(xe,"number",Q);if(!a(Q))throw new S(xe,"an integer",Q);const Ee=Me?1:0,We=4294967295;if(Q<Ee||Q>We)throw new S(xe,`>= ${Ee} && <= ${We}`,Q)});function te(Q,xe){if(typeof Q!="string")throw new _(xe,"string",Q)}function re(Q,xe,Me=void 0,Ee){if(typeof Q!="number")throw new _(xe,"number",Q);if(Me!=null&&Q<Me||Ee!=null&&Q>Ee||(Me!=null||Ee!=null)&&i(Q))throw new S(xe,`${Me!=null?`>= ${Me}`:""}${Me!=null&&Ee!=null?" && ":""}${Ee!=null?`<= ${Ee}`:""}`,Q)}const X=v((Q,xe,Me)=>{if(!t(Me,Q)){const We="must be one of: "+n(r(Me,kt=>typeof kt=="string"?`'${kt}'`:h(kt)),", ");throw new x(xe,Q,We)}});function ae(Q,xe){if(typeof Q!="boolean")throw new _(xe,"boolean",Q)}function U(Q,xe,Me){return Q==null||!u(Q,xe)?Me:Q[xe]}const ee=v((Q,xe,Me=null)=>{const Ee=U(Me,"allowArray",!1),We=U(Me,"allowFunction",!1);if(!U(Me,"nullable",!1)&&Q===null||!Ee&&e(Q)||typeof Q!="object"&&(!We||typeof Q!="function"))throw new _(xe,"Object",Q)}),J=v((Q,xe)=>{if(Q!=null&&typeof Q!="object"&&typeof Q!="function")throw new _(xe,"a dictionary",Q)}),ue=v((Q,xe,Me=0)=>{if(!e(Q))throw new _(xe,"Array",Q);if(Q.length<Me){const Ee=`must be longer than ${Me}`;throw new x(xe,Q,Ee)}});function be(Q,xe){ue(Q,xe);for(let Me=0;Me<Q.length;Me++)te(Q[Me],`${xe}[${Me}]`)}function _e(Q,xe){ue(Q,xe);for(let Me=0;Me<Q.length;Me++)ae(Q[Me],`${xe}[${Me}]`)}function Pe(Q,xe){ue(Q,xe);for(let Me=0;Me<Q.length;Me++){const Ee=Q[Me],We=`${xe}[${Me}]`;if(Ee==null)throw new _(We,"AbortSignal",Ee);Qe(Ee,We)}}function Ne(Q,xe="signal"){if(te(Q,xe),j[Q]===void 0)throw j[p(Q)]!==void 0?new E(Q+" (signals must use all capital letters)"):new E(Q)}const Re=v((Q,xe="buffer")=>{if(!R(Q))throw new _(xe,["Buffer","TypedArray","DataView"],Q)});function Ce(Q,xe){const Me=C(xe),Ee=Q.length;if(Me==="hex"&&Ee%2!==0)throw new x("encoding",xe,`is invalid for data of length ${Ee}`)}function Fe(Q,xe="Port",Me=!0){if(typeof Q!="number"&&typeof Q!="string"||typeof Q=="string"&&g(Q).length===0||+Q!==+Q>>>0||Q>65535||Q===0&&!Me)throw new b(xe,Q,Me);return Q|0}const Qe=v((Q,xe)=>{if(Q!==void 0&&(Q===null||typeof Q!="object"||!("aborted"in Q)))throw new _(xe,"AbortSignal",Q)}),Le=v((Q,xe)=>{if(typeof Q!="function")throw new _(xe,"Function",Q)}),Ie=v((Q,xe)=>{if(typeof Q!="function"||k(Q))throw new _(xe,"Function",Q)}),V=v((Q,xe)=>{if(Q!==void 0)throw new _(xe,"undefined",Q)});function me(Q,xe,Me){if(!t(Me,Q))throw new _(xe,`('${n(Me,"|")}')`,Q)}const Ae=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function se(Q,xe){if(typeof Q>"u"||!d(Ae,Q))throw new x(xe,Q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ie(Q){if(typeof Q=="string")return se(Q,"hints"),Q;if(e(Q)){const xe=Q.length;let Me="";if(xe===0)return Me;for(let Ee=0;Ee<xe;Ee++){const We=Q[Ee];se(We,"hints"),Me+=We,Ee!==xe-1&&(Me+=", ")}return Me}throw new x("hints",Q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return SS={isInt32:O,isUint32:L,parseFileMode:F,validateArray:ue,validateStringArray:be,validateBooleanArray:_e,validateAbortSignalArray:Pe,validateBoolean:ae,validateBuffer:Re,validateDictionary:J,validateEncoding:Ce,validateFunction:Le,validateInt32:q,validateInteger:K,validateNumber:re,validateObject:ee,validateOneOf:X,validatePlainFunction:Ie,validatePort:Fe,validateSignalName:Ne,validateString:te,validateUint32:fe,validateUndefined:V,validateUnion:me,validateAbortSignal:Qe,validateLinkHeaderValue:ie},SS}var xb={exports:{}},ES={},KI;function $d(){return KI||(KI=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=o}catch{a=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function l(C){if(a===setTimeout)return setTimeout(C,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function u(C){if(i===clearTimeout)return clearTimeout(C);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var d=[],h=!1,p,g=-1;function v(){!h||!p||(h=!1,p.length?d=p.concat(d):g=-1,d.length&&b())}function b(){if(!h){var C=l(v);h=!0;for(var k=d.length;k;){for(p=d,d=[];++g<k;)p&&p[g].run();g=-1,k=d.length}p=null,h=!1,u(C)}}r.nextTick=function(C){var k=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)k[R-1]=arguments[R];d.push(new _(C,k)),d.length===1&&!h&&l(b)};function _(C,k){this.fun=C,this.array=k}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(ES)),ES}var CS,ZI;function Ql(){if(ZI)return CS;ZI=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Kr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function d(U,ee=!1){var J;return!!(U&&typeof U.pipe=="function"&&typeof U.on=="function"&&(!ee||typeof U.pause=="function"&&typeof U.resume=="function")&&(!U._writableState||((J=U._readableState)===null||J===void 0?void 0:J.readable)!==!1)&&(!U._writableState||U._readableState))}function h(U){var ee;return!!(U&&typeof U.write=="function"&&typeof U.on=="function"&&(!U._readableState||((ee=U._writableState)===null||ee===void 0?void 0:ee.writable)!==!1))}function p(U){return!!(U&&typeof U.pipe=="function"&&U._readableState&&typeof U.on=="function"&&typeof U.write=="function")}function g(U){return U&&(U._readableState||U._writableState||typeof U.write=="function"&&typeof U.on=="function"||typeof U.pipe=="function"&&typeof U.on=="function")}function v(U){return!!(U&&!g(U)&&typeof U.pipeThrough=="function"&&typeof U.getReader=="function"&&typeof U.cancel=="function")}function b(U){return!!(U&&!g(U)&&typeof U.getWriter=="function"&&typeof U.abort=="function")}function _(U){return!!(U&&!g(U)&&typeof U.readable=="object"&&typeof U.writable=="object")}function x(U){return v(U)||b(U)||_(U)}function S(U,ee){return U==null?!1:ee===!0?typeof U[e]=="function":ee===!1?typeof U[t]=="function":typeof U[e]=="function"||typeof U[t]=="function"}function E(U){if(!g(U))return null;const ee=U._writableState,J=U._readableState,ue=ee||J;return!!(U.destroyed||U[r]||ue!=null&&ue.destroyed)}function C(U){if(!h(U))return null;if(U.writableEnded===!0)return!0;const ee=U._writableState;return ee!=null&&ee.errored?!1:typeof(ee==null?void 0:ee.ended)!="boolean"?null:ee.ended}function k(U,ee){if(!h(U))return null;if(U.writableFinished===!0)return!0;const J=U._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.finished)!="boolean"?null:!!(J.finished||ee===!1&&J.ended===!0&&J.length===0)}function R(U){if(!d(U))return null;if(U.readableEnded===!0)return!0;const ee=U._readableState;return!ee||ee.errored?!1:typeof(ee==null?void 0:ee.ended)!="boolean"?null:ee.ended}function j(U,ee){if(!d(U))return null;const J=U._readableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.endEmitted)!="boolean"?null:!!(J.endEmitted||ee===!1&&J.ended===!0&&J.length===0)}function O(U){return U&&U[i]!=null?U[i]:typeof(U==null?void 0:U.readable)!="boolean"?null:E(U)?!1:d(U)&&U.readable&&!j(U)}function L(U){return U&&U[o]!=null?U[o]:typeof(U==null?void 0:U.writable)!="boolean"?null:E(U)?!1:h(U)&&U.writable&&!C(U)}function z(U,ee){return g(U)?E(U)?!0:!((ee==null?void 0:ee.readable)!==!1&&O(U)||(ee==null?void 0:ee.writable)!==!1&&L(U)):null}function Y(U){var ee,J;return g(U)?U.writableErrored?U.writableErrored:(ee=(J=U._writableState)===null||J===void 0?void 0:J.errored)!==null&&ee!==void 0?ee:null:null}function F(U){var ee,J;return g(U)?U.readableErrored?U.readableErrored:(ee=(J=U._readableState)===null||J===void 0?void 0:J.errored)!==null&&ee!==void 0?ee:null:null}function K(U){if(!g(U))return null;if(typeof U.closed=="boolean")return U.closed;const ee=U._writableState,J=U._readableState;return typeof(ee==null?void 0:ee.closed)=="boolean"||typeof(J==null?void 0:J.closed)=="boolean"?(ee==null?void 0:ee.closed)||(J==null?void 0:J.closed):typeof U._closed=="boolean"&&q(U)?U._closed:null}function q(U){return typeof U._closed=="boolean"&&typeof U._defaultKeepAlive=="boolean"&&typeof U._removedConnection=="boolean"&&typeof U._removedContLen=="boolean"}function fe(U){return typeof U._sent100=="boolean"&&q(U)}function te(U){var ee;return typeof U._consuming=="boolean"&&typeof U._dumped=="boolean"&&((ee=U.req)===null||ee===void 0?void 0:ee.upgradeOrConnect)===void 0}function re(U){if(!g(U))return null;const ee=U._writableState,J=U._readableState,ue=ee||J;return!ue&&fe(U)||!!(ue&&ue.autoDestroy&&ue.emitClose&&ue.closed===!1)}function X(U){var ee;return!!(U&&((ee=U[s])!==null&&ee!==void 0?ee:U.readableDidRead||U.readableAborted))}function ae(U){var ee,J,ue,be,_e,Pe,Ne,Re,Ce,Fe;return!!(U&&((ee=(J=(ue=(be=(_e=(Pe=U[a])!==null&&Pe!==void 0?Pe:U.readableErrored)!==null&&_e!==void 0?_e:U.writableErrored)!==null&&be!==void 0?be:(Ne=U._readableState)===null||Ne===void 0?void 0:Ne.errorEmitted)!==null&&ue!==void 0?ue:(Re=U._writableState)===null||Re===void 0?void 0:Re.errorEmitted)!==null&&J!==void 0?J:(Ce=U._readableState)===null||Ce===void 0?void 0:Ce.errored)!==null&&ee!==void 0?ee:!((Fe=U._writableState)===null||Fe===void 0)&&Fe.errored))}return CS={isDestroyed:E,kIsDestroyed:r,isDisturbed:X,kIsDisturbed:s,isErrored:ae,kIsErrored:a,isReadable:O,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:o,isClosed:K,isDuplexNodeStream:p,isFinished:z,isIterable:S,isReadableNodeStream:d,isReadableStream:v,isReadableEnded:R,isReadableFinished:j,isReadableErrored:F,isNodeStream:g,isWebStream:x,isWritable:L,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:C,isWritableFinished:k,isWritableErrored:Y,isServerRequest:te,isServerResponse:fe,willEmitClose:re,isTransformStream:_},CS}var YI;function xu(){if(YI)return xb.exports;YI=1;const e=$d(),{AbortError:t,codes:n}=xi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:o}=ji(),{validateAbortSignal:s,validateFunction:l,validateObject:u,validateBoolean:d}=dg(),{Promise:h,PromisePrototypeThen:p,SymbolDispose:g}=Kr(),{isClosed:v,isReadable:b,isReadableNodeStream:_,isReadableStream:x,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:k,isWritableStream:R,isWritableFinished:j,isWritableErrored:O,isNodeStream:L,willEmitClose:z,kIsClosedPromise:Y}=Ql();let F;function K(X){return X.setHeader&&typeof X.abort=="function"}const q=()=>{};function fe(X,ae,U){var ee,J;if(arguments.length===2?(U=ae,ae=i):ae==null?ae=i:u(ae,"options"),l(U,"callback"),s(ae.signal,"options.signal"),U=o(U),x(X)||R(X))return te(X,ae,U);if(!L(X))throw new r("stream",["ReadableStream","WritableStream","Stream"],X);const ue=(ee=ae.readable)!==null&&ee!==void 0?ee:_(X),be=(J=ae.writable)!==null&&J!==void 0?J:k(X),_e=X._writableState,Pe=X._readableState,Ne=()=>{X.writable||Fe()};let Re=z(X)&&_(X)===ue&&k(X)===be,Ce=j(X,!1);const Fe=()=>{Ce=!0,X.destroyed&&(Re=!1),!(Re&&(!X.readable||ue))&&(!ue||Qe)&&U.call(X)};let Qe=S(X,!1);const Le=()=>{Qe=!0,X.destroyed&&(Re=!1),!(Re&&(!X.writable||be))&&(!be||Ce)&&U.call(X)},Ie=Q=>{U.call(X,Q)};let V=v(X);const me=()=>{V=!0;const Q=O(X)||E(X);if(Q&&typeof Q!="boolean")return U.call(X,Q);if(ue&&!Qe&&_(X,!0)&&!S(X,!1))return U.call(X,new a);if(be&&!Ce&&!j(X,!1))return U.call(X,new a);U.call(X)},Ae=()=>{V=!0;const Q=O(X)||E(X);if(Q&&typeof Q!="boolean")return U.call(X,Q);U.call(X)},se=()=>{X.req.on("finish",Fe)};K(X)?(X.on("complete",Fe),Re||X.on("abort",me),X.req?se():X.on("request",se)):be&&!_e&&(X.on("end",Ne),X.on("close",Ne)),!Re&&typeof X.aborted=="boolean"&&X.on("aborted",me),X.on("end",Le),X.on("finish",Fe),ae.error!==!1&&X.on("error",Ie),X.on("close",me),V?e.nextTick(me):_e!=null&&_e.errorEmitted||Pe!=null&&Pe.errorEmitted?Re||e.nextTick(Ae):(!ue&&(!Re||b(X))&&(Ce||C(X)===!1)||!be&&(!Re||C(X))&&(Qe||b(X)===!1)||Pe&&X.req&&X.aborted)&&e.nextTick(Ae);const ie=()=>{U=q,X.removeListener("aborted",me),X.removeListener("complete",Fe),X.removeListener("abort",me),X.removeListener("request",se),X.req&&X.req.removeListener("finish",Fe),X.removeListener("end",Ne),X.removeListener("close",Ne),X.removeListener("finish",Fe),X.removeListener("end",Le),X.removeListener("error",Ie),X.removeListener("close",me)};if(ae.signal&&!V){const Q=()=>{const xe=U;ie(),xe.call(X,new t(void 0,{cause:ae.signal.reason}))};if(ae.signal.aborted)e.nextTick(Q);else{F=F||ji().addAbortListener;const xe=F(ae.signal,Q),Me=U;U=o((...Ee)=>{xe[g](),Me.apply(X,Ee)})}}return ie}function te(X,ae,U){let ee=!1,J=q;if(ae.signal)if(J=()=>{ee=!0,U.call(X,new t(void 0,{cause:ae.signal.reason}))},ae.signal.aborted)e.nextTick(J);else{F=F||ji().addAbortListener;const be=F(ae.signal,J),_e=U;U=o((...Pe)=>{be[g](),_e.apply(X,Pe)})}const ue=(...be)=>{ee||e.nextTick(()=>U.apply(X,be))};return p(X[Y].promise,ue,ue),q}function re(X,ae){var U;let ee=!1;return ae===null&&(ae=i),(U=ae)!==null&&U!==void 0&&U.cleanup&&(d(ae.cleanup,"cleanup"),ee=ae.cleanup),new h((J,ue)=>{const be=fe(X,ae,_e=>{ee&&be(),_e?ue(_e):J()})})}return xb.exports=fe,xb.exports.finished=re,xb.exports}var kS,XI;function Wh(){if(XI)return kS;XI=1;const e=$d(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=xi(),{Symbol:a}=Kr(),{kIsDestroyed:i,isDestroyed:o,isFinished:s,isServerRequest:l}=Ql(),u=a("kDestroy"),d=a("kConstruct");function h(z,Y,F){z&&(z.stack,Y&&!Y.errored&&(Y.errored=z),F&&!F.errored&&(F.errored=z))}function p(z,Y){const F=this._readableState,K=this._writableState,q=K||F;return K!=null&&K.destroyed||F!=null&&F.destroyed?(typeof Y=="function"&&Y(),this):(h(z,K,F),K&&(K.destroyed=!0),F&&(F.destroyed=!0),q.constructed?g(this,z,Y):this.once(u,function(fe){g(this,t(fe,z),Y)}),this)}function g(z,Y,F){let K=!1;function q(fe){if(K)return;K=!0;const te=z._readableState,re=z._writableState;h(fe,re,te),re&&(re.closed=!0),te&&(te.closed=!0),typeof F=="function"&&F(fe),fe?e.nextTick(v,z,fe):e.nextTick(b,z)}try{z._destroy(Y||null,q)}catch(fe){q(fe)}}function v(z,Y){_(z,Y),b(z)}function b(z){const Y=z._readableState,F=z._writableState;F&&(F.closeEmitted=!0),Y&&(Y.closeEmitted=!0),(F!=null&&F.emitClose||Y!=null&&Y.emitClose)&&z.emit("close")}function _(z,Y){const F=z._readableState,K=z._writableState;K!=null&&K.errorEmitted||F!=null&&F.errorEmitted||(K&&(K.errorEmitted=!0),F&&(F.errorEmitted=!0),z.emit("error",Y))}function x(){const z=this._readableState,Y=this._writableState;z&&(z.constructed=!0,z.closed=!1,z.closeEmitted=!1,z.destroyed=!1,z.errored=null,z.errorEmitted=!1,z.reading=!1,z.ended=z.readable===!1,z.endEmitted=z.readable===!1),Y&&(Y.constructed=!0,Y.destroyed=!1,Y.closed=!1,Y.closeEmitted=!1,Y.errored=null,Y.errorEmitted=!1,Y.finalCalled=!1,Y.prefinished=!1,Y.ended=Y.writable===!1,Y.ending=Y.writable===!1,Y.finished=Y.writable===!1)}function S(z,Y,F){const K=z._readableState,q=z._writableState;if(q!=null&&q.destroyed||K!=null&&K.destroyed)return this;K!=null&&K.autoDestroy||q!=null&&q.autoDestroy?z.destroy(Y):Y&&(Y.stack,q&&!q.errored&&(q.errored=Y),K&&!K.errored&&(K.errored=Y),F?e.nextTick(_,z,Y):_(z,Y))}function E(z,Y){if(typeof z._construct!="function")return;const F=z._readableState,K=z._writableState;F&&(F.constructed=!1),K&&(K.constructed=!1),z.once(d,Y),!(z.listenerCount(d)>1)&&e.nextTick(C,z)}function C(z){let Y=!1;function F(K){if(Y){S(z,K??new n);return}Y=!0;const q=z._readableState,fe=z._writableState,te=fe||q;q&&(q.constructed=!0),fe&&(fe.constructed=!0),te.destroyed?z.emit(u,K):K?S(z,K,!0):e.nextTick(k,z)}try{z._construct(K=>{e.nextTick(F,K)})}catch(K){e.nextTick(F,K)}}function k(z){z.emit(d)}function R(z){return(z==null?void 0:z.setHeader)&&typeof z.abort=="function"}function j(z){z.emit("close")}function O(z,Y){z.emit("error",Y),e.nextTick(j,z)}function L(z,Y){!z||o(z)||(!Y&&!s(z)&&(Y=new r),l(z)?(z.socket=null,z.destroy(Y)):R(z)?z.abort():R(z.req)?z.req.abort():typeof z.destroy=="function"?z.destroy(Y):typeof z.close=="function"?z.close():Y?e.nextTick(O,z,Y):e.nextTick(j,z),z.destroyed||(z[i]=!0))}return kS={construct:E,destroyer:L,destroy:p,undestroy:x,errorOrDestroy:S},kS}var AS,JI;function jk(){if(JI)return AS;JI=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Kr(),{EventEmitter:n}=Ww();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,o){const s=this;function l(b){i.writable&&i.write(b)===!1&&s.pause&&s.pause()}s.on("data",l);function u(){s.readable&&s.resume&&s.resume()}i.on("drain",u),!i._isStdio&&(!o||o.end!==!1)&&(s.on("end",h),s.on("close",p));let d=!1;function h(){d||(d=!0,i.end())}function p(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function g(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(s,"error",g),a(i,"error",g);function v(){s.removeListener("data",l),i.removeListener("drain",u),s.removeListener("end",h),s.removeListener("close",p),s.removeListener("error",g),i.removeListener("error",g),s.removeListener("end",v),s.removeListener("close",v),i.removeListener("close",v)}return s.on("end",v),s.on("close",v),i.on("close",v),i.emit("pipe",s),i};function a(i,o,s){if(typeof i.prependListener=="function")return i.prependListener(o,s);!i._events||!i._events[o]?i.on(o,s):e(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]}return AS={Stream:r,prependListener:a},AS}var TS={exports:{}},QI;function Kw(){return QI||(QI=1,function(e){const{SymbolDispose:t}=Kr(),{AbortError:n,codes:r}=xi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:o}=Ql(),s=xu(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const d=(h,p)=>{if(typeof h!="object"||!("aborted"in h))throw new l(p,"AbortSignal",h)};e.exports.addAbortSignal=function(p,g){if(d(p,"signal"),!a(g)&&!i(g))throw new l("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(p,g)},e.exports.addAbortSignalNoValidate=function(h,p){if(typeof h!="object"||!("aborted"in h))return p;const g=a(p)?()=>{p.destroy(new n(void 0,{cause:h.reason}))}:()=>{p[o](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{u=u||ji().addAbortListener;const v=u(h,g);s(p,v[t])}return p}}(TS)),TS.exports}var NS,e4;function wee(){if(e4)return NS;e4=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Kr(),{Buffer:a}=_u(),{inspect:i}=ji();return NS=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const l={data:s,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(s){const l={data:s,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=s+l.data;return u}concat(s){if(this.length===0)return a.alloc(0);const l=a.allocUnsafe(s>>>0);let u=this.head,d=0;for(;u;)n(l,u.data,d),d+=u.data.length,u=u.next;return l}consume(s,l){const u=this.head.data;if(s<u.length){const d=u.slice(0,s);return this.head.data=u.slice(s),d}return s===u.length?this.shift():l?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let l="",u=this.head,d=0;do{const h=u.data;if(s>h.length)l+=h,s-=h.length;else{s===h.length?(l+=h,++d,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(h,0,s),this.head=u,u.data=e(h,s));break}++d}while((u=u.next)!==null);return this.length-=d,l}_getBuffer(s){const l=a.allocUnsafe(s),u=s;let d=this.head,h=0;do{const p=d.data;if(s>p.length)n(l,p,u-s),s-=p.length;else{s===p.length?(n(l,p,u-s),++h,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(p.buffer,p.byteOffset,s),u-s),this.head=d,d.data=p.slice(s));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](s,l){return i(this,{...l,depth:0,customInspect:!1})}},NS}var RS,t4;function Zw(){if(t4)return RS;t4=1;const{MathFloor:e,NumberIsInteger:t}=Kr(),{validateInteger:n}=dg(),{ERR_INVALID_ARG_VALUE:r}=xi().codes;let a=16*1024,i=16;function o(d,h,p){return d.highWaterMark!=null?d.highWaterMark:h?d[p]:null}function s(d){return d?i:a}function l(d,h){n(h,"value",0),d?i=h:a=h}function u(d,h,p,g){const v=o(h,g,p);if(v!=null){if(!t(v)||v<0){const b=g?`options.${p}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return s(d.objectMode)}return RS={getHighWaterMark:u,getDefaultHighWaterMark:s,setDefaultHighWaterMark:l},RS}var IS={},Sb={exports:{}},n4;function Dk(){return n4||(n4=1,function(e,t){var n=_u(),r=n.Buffer;function a(o,s){for(var l in o)s[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(o,s,l){return r(o,s,l)}a(r,i),i.from=function(o,s,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,l)},i.alloc=function(o,s,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return s!==void 0?typeof l=="string"?u.fill(s,l):u.fill(s):u.fill(0),u},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(Sb,Sb.exports)),Sb.exports}var r4;function _ee(){if(r4)return IS;r4=1;var e=Dk().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function r(x){var S=n(x);if(typeof S!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return S||x}IS.StringDecoder=a;function a(x){this.encoding=r(x);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=p,S=4;break;case"utf8":this.fillLast=l,S=4;break;case"base64":this.text=g,this.end=v,S=3;break;default:this.write=b,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(x){if(x.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?S?S+this.text(x,E):this.text(x,E):S||""},a.prototype.end=d,a.prototype.text=u,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function o(x,S,E){var C=S.length-1;if(C<E)return 0;var k=i(S[C]);return k>=0?(k>0&&(x.lastNeed=k-1),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(x.lastNeed=k-2),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(k===2?k=0:x.lastNeed=k-3),k):0))}function s(x,S,E){if((S[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,""}}function l(x){var S=this.lastTotal-this.lastNeed,E=s(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function u(x,S){var E=o(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=E;var C=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",S,C)}function d(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"":S}function h(x,S){if((x.length-S)%2===0){var E=x.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function p(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function g(x,S){var E=(x.length-S)%3;return E===0?x.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-E))}function v(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function b(x){return x.toString(this.encoding)}function _(x){return x&&x.length?this.write(x):""}return IS}var OS,a4;function hP(){if(a4)return OS;a4=1;const e=$d(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Kr(),{Buffer:a}=_u(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:o}=xi().codes;function s(l,u,d){let h;if(typeof u=="string"||u instanceof a)return new l({objectMode:!0,...d,read(){this.push(u),this.push(null)}});let p;if(u&&u[n])p=!0,h=u[n]();else if(u&&u[r])p=!1,h=u[r]();else throw new i("iterable",["Iterable"],u);const g=new l({objectMode:!0,highWaterMark:1,...d});let v=!1;g._read=function(){v||(v=!0,_())},g._destroy=function(x,S){t(b(x),()=>e.nextTick(S,x),E=>e.nextTick(S,E||x))};async function b(x){const S=x!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:k}=await h.throw(x);if(await C,k)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function _(){for(;;){try{const{value:x,done:S}=p?await h.next():h.next();if(S)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new o;if(g.push(E))continue;v=!1}}catch(x){g.destroy(x)}break}}return g}return OS=s,OS}var jS,i4;function Yw(){if(i4)return jS;i4=1;const e=$d(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:l,SafeSet:u,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:p}=Kr();jS=Ee,Ee.ReadableState=Me;const{EventEmitter:g}=Ww(),{Stream:v,prependListener:b}=jk(),{Buffer:_}=_u(),{addAbortSignal:x}=Kw(),S=xu();let E=ji().debuglog("stream",pe=>{E=pe});const C=wee(),k=Wh(),{getHighWaterMark:R,getDefaultHighWaterMark:j}=Zw(),{aggregateTwoErrors:O,codes:{ERR_INVALID_ARG_TYPE:L,ERR_METHOD_NOT_IMPLEMENTED:z,ERR_OUT_OF_RANGE:Y,ERR_STREAM_PUSH_AFTER_EOF:F,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:K},AbortError:q}=xi(),{validateObject:fe}=dg(),te=p("kPaused"),{StringDecoder:re}=_ee(),X=hP();s(Ee.prototype,v.prototype),s(Ee,v);const ae=()=>{},{errorOrDestroy:U}=k,ee=1,J=2,ue=4,be=8,_e=16,Pe=32,Ne=64,Re=128,Ce=256,Fe=512,Qe=1024,Le=2048,Ie=4096,V=8192,me=16384,Ae=32768,se=65536,ie=1<<17,Q=1<<18;function xe(pe){return{enumerable:!1,get(){return(this.state&pe)!==0},set(H){H?this.state|=pe:this.state&=~pe}}}i(Me.prototype,{objectMode:xe(ee),ended:xe(J),endEmitted:xe(ue),reading:xe(be),constructed:xe(_e),sync:xe(Pe),needReadable:xe(Ne),emittedReadable:xe(Re),readableListening:xe(Ce),resumeScheduled:xe(Fe),errorEmitted:xe(Qe),emitClose:xe(Le),autoDestroy:xe(Ie),destroyed:xe(V),closed:xe(me),closeEmitted:xe(Ae),multiAwaitDrain:xe(se),readingMore:xe(ie),dataEmitted:xe(Q)});function Me(pe,H,B){typeof B!="boolean"&&(B=H instanceof Vl()),this.state=Le|Ie|_e|Pe,pe&&pe.objectMode&&(this.state|=ee),B&&pe&&pe.readableObjectMode&&(this.state|=ee),this.highWaterMark=pe?R(this,pe,"readableHighWaterMark",B):j(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[te]=null,pe&&pe.emitClose===!1&&(this.state&=-2049),pe&&pe.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=pe&&pe.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,pe&&pe.encoding&&(this.decoder=new re(pe.encoding),this.encoding=pe.encoding)}function Ee(pe){if(!(this instanceof Ee))return new Ee(pe);const H=this instanceof Vl();this._readableState=new Me(pe,this,H),pe&&(typeof pe.read=="function"&&(this._read=pe.read),typeof pe.destroy=="function"&&(this._destroy=pe.destroy),typeof pe.construct=="function"&&(this._construct=pe.construct),pe.signal&&!H&&x(pe.signal,this)),v.call(this,pe),k.construct(this,()=>{this._readableState.needReadable&&I(this,this._readableState)})}Ee.prototype.destroy=k.destroy,Ee.prototype._undestroy=k.undestroy,Ee.prototype._destroy=function(pe,H){H(pe)},Ee.prototype[g.captureRejectionSymbol]=function(pe){this.destroy(pe)},Ee.prototype[d]=function(){let pe;return this.destroyed||(pe=this.readableEnded?null:new q,this.destroy(pe)),new l((H,B)=>S(this,W=>W&&W!==pe?B(W):H(null)))},Ee.prototype.push=function(pe,H){return We(this,pe,H,!1)},Ee.prototype.unshift=function(pe,H){return We(this,pe,H,!0)};function We(pe,H,B,W){E("readableAddChunk",H);const he=pe._readableState;let Te;if((he.state&ee)===0&&(typeof H=="string"?(B=B||he.defaultEncoding,he.encoding!==B&&(W&&he.encoding?H=_.from(H,B).toString(he.encoding):(H=_.from(H,B),B=""))):H instanceof _?B="":v._isUint8Array(H)?(H=v._uint8ArrayToBuffer(H),B=""):H!=null&&(Te=new L("chunk",["string","Buffer","Uint8Array"],H))),Te)U(pe,Te);else if(H===null)he.state&=-9,jt(pe,he);else if((he.state&ee)!==0||H&&H.length>0)if(W)if((he.state&ue)!==0)U(pe,new K);else{if(he.destroyed||he.errored)return!1;kt(pe,he,H,!0)}else if(he.ended)U(pe,new F);else{if(he.destroyed||he.errored)return!1;he.state&=-9,he.decoder&&!B?(H=he.decoder.write(H),he.objectMode||H.length!==0?kt(pe,he,H,!1):I(pe,he)):kt(pe,he,H,!1)}else W||(he.state&=-9,I(pe,he));return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function kt(pe,H,B,W){H.flowing&&H.length===0&&!H.sync&&pe.listenerCount("data")>0?((H.state&se)!==0?H.awaitDrainWriters.clear():H.awaitDrainWriters=null,H.dataEmitted=!0,pe.emit("data",B)):(H.length+=H.objectMode?1:B.length,W?H.buffer.unshift(B):H.buffer.push(B),(H.state&Ne)!==0&&Gt(pe)),I(pe,H)}Ee.prototype.isPaused=function(){const pe=this._readableState;return pe[te]===!0||pe.flowing===!1},Ee.prototype.setEncoding=function(pe){const H=new re(pe);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;const B=this._readableState.buffer;let W="";for(const he of B)W+=H.write(he);return B.clear(),W!==""&&B.push(W),this._readableState.length=W.length,this};const at=1073741824;function _t(pe){if(pe>at)throw new Y("size","<= 1GiB",pe);return pe--,pe|=pe>>>1,pe|=pe>>>2,pe|=pe>>>4,pe|=pe>>>8,pe|=pe>>>16,pe++,pe}function Dt(pe,H){return pe<=0||H.length===0&&H.ended?0:(H.state&ee)!==0?1:r(pe)?H.flowing&&H.length?H.buffer.first().length:H.length:pe<=H.length?pe:H.ended?H.length:0}Ee.prototype.read=function(pe){E("read",pe),pe===void 0?pe=NaN:n(pe)||(pe=a(pe,10));const H=this._readableState,B=pe;if(pe>H.highWaterMark&&(H.highWaterMark=_t(pe)),pe!==0&&(H.state&=-129),pe===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return E("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?tt(this):Gt(this),null;if(pe=Dt(pe,H),pe===0&&H.ended)return H.length===0&&tt(this),null;let W=(H.state&Ne)!==0;if(E("need readable",W),(H.length===0||H.length-pe<H.highWaterMark)&&(W=!0,E("length less than watermark",W)),H.ended||H.reading||H.destroyed||H.errored||!H.constructed)W=!1,E("reading, ended or constructing",W);else if(W){E("do read"),H.state|=be|Pe,H.length===0&&(H.state|=Ne);try{this._read(H.highWaterMark)}catch(Te){U(this,Te)}H.state&=-33,H.reading||(pe=Dt(B,H))}let he;return pe>0?he=Be(pe,H):he=null,he===null?(H.needReadable=H.length<=H.highWaterMark,pe=0):(H.length-=pe,H.multiAwaitDrain?H.awaitDrainWriters.clear():H.awaitDrainWriters=null),H.length===0&&(H.ended||(H.needReadable=!0),B!==pe&&H.ended&&tt(this)),he!==null&&!H.errorEmitted&&!H.closeEmitted&&(H.dataEmitted=!0,this.emit("data",he)),he};function jt(pe,H){if(E("onEofChunk"),!H.ended){if(H.decoder){const B=H.decoder.end();B&&B.length&&(H.buffer.push(B),H.length+=H.objectMode?1:B.length)}H.ended=!0,H.sync?Gt(pe):(H.needReadable=!1,H.emittedReadable=!0,ye(pe))}}function Gt(pe){const H=pe._readableState;E("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(E("emitReadable",H.flowing),H.emittedReadable=!0,e.nextTick(ye,pe))}function ye(pe){const H=pe._readableState;E("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&!H.errored&&(H.length||H.ended)&&(pe.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,ft(pe)}function I(pe,H){!H.readingMore&&H.constructed&&(H.readingMore=!0,e.nextTick(G,pe,H))}function G(pe,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){const B=H.length;if(E("maybeReadMore read 0"),pe.read(0),B===H.length)break}H.readingMore=!1}Ee.prototype._read=function(pe){throw new z("_read()")},Ee.prototype.pipe=function(pe,H){const B=this,W=this._readableState;W.pipes.length===1&&(W.multiAwaitDrain||(W.multiAwaitDrain=!0,W.awaitDrainWriters=new u(W.awaitDrainWriters?[W.awaitDrainWriters]:[]))),W.pipes.push(pe),E("pipe count=%d opts=%j",W.pipes.length,H);const Te=(!H||H.end!==!1)&&pe!==e.stdout&&pe!==e.stderr?pt:vr;W.endEmitted?e.nextTick(Te):B.once("end",Te),pe.on("unpipe",He);function He(Dn,ui){E("onunpipe"),Dn===B&&ui&&ui.hasUnpiped===!1&&(ui.hasUnpiped=!0,At())}function pt(){E("onend"),pe.end()}let Vt,ut=!1;function At(){E("cleanup"),pe.removeListener("close",zn),pe.removeListener("finish",br),Vt&&pe.removeListener("drain",Vt),pe.removeListener("error",Tn),pe.removeListener("unpipe",He),B.removeListener("end",pt),B.removeListener("end",vr),B.removeListener("data",Xt),ut=!0,Vt&&W.awaitDrainWriters&&(!pe._writableState||pe._writableState.needDrain)&&Vt()}function Mt(){ut||(W.pipes.length===1&&W.pipes[0]===pe?(E("false write response, pause",0),W.awaitDrainWriters=pe,W.multiAwaitDrain=!1):W.pipes.length>1&&W.pipes.includes(pe)&&(E("false write response, pause",W.awaitDrainWriters.size),W.awaitDrainWriters.add(pe)),B.pause()),Vt||(Vt=de(B,pe),pe.on("drain",Vt))}B.on("data",Xt);function Xt(Dn){E("ondata");const ui=pe.write(Dn);E("dest.write",ui),ui===!1&&Mt()}function Tn(Dn){if(E("onerror",Dn),vr(),pe.removeListener("error",Tn),pe.listenerCount("error")===0){const ui=pe._writableState||pe._readableState;ui&&!ui.errorEmitted?U(pe,Dn):pe.emit("error",Dn)}}b(pe,"error",Tn);function zn(){pe.removeListener("finish",br),vr()}pe.once("close",zn);function br(){E("onfinish"),pe.removeListener("close",zn),vr()}pe.once("finish",br);function vr(){E("unpipe"),B.unpipe(pe)}return pe.emit("pipe",B),pe.writableNeedDrain===!0?Mt():W.flowing||(E("pipe resume"),B.resume()),pe};function de(pe,H){return function(){const W=pe._readableState;W.awaitDrainWriters===H?(E("pipeOnDrain",1),W.awaitDrainWriters=null):W.multiAwaitDrain&&(E("pipeOnDrain",W.awaitDrainWriters.size),W.awaitDrainWriters.delete(H)),(!W.awaitDrainWriters||W.awaitDrainWriters.size===0)&&pe.listenerCount("data")&&pe.resume()}}Ee.prototype.unpipe=function(pe){const H=this._readableState,B={hasUnpiped:!1};if(H.pipes.length===0)return this;if(!pe){const he=H.pipes;H.pipes=[],this.pause();for(let Te=0;Te<he.length;Te++)he[Te].emit("unpipe",this,{hasUnpiped:!1});return this}const W=t(H.pipes,pe);return W===-1?this:(H.pipes.splice(W,1),H.pipes.length===0&&this.pause(),pe.emit("unpipe",this,B),this)},Ee.prototype.on=function(pe,H){const B=v.prototype.on.call(this,pe,H),W=this._readableState;return pe==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):pe==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,E("on readable",W.length,W.reading),W.length?Gt(this):W.reading||e.nextTick(ve,this)),B},Ee.prototype.addListener=Ee.prototype.on,Ee.prototype.removeListener=function(pe,H){const B=v.prototype.removeListener.call(this,pe,H);return pe==="readable"&&e.nextTick(Oe,this),B},Ee.prototype.off=Ee.prototype.removeListener,Ee.prototype.removeAllListeners=function(pe){const H=v.prototype.removeAllListeners.apply(this,arguments);return(pe==="readable"||pe===void 0)&&e.nextTick(Oe,this),H};function Oe(pe){const H=pe._readableState;H.readableListening=pe.listenerCount("readable")>0,H.resumeScheduled&&H[te]===!1?H.flowing=!0:pe.listenerCount("data")>0?pe.resume():H.readableListening||(H.flowing=null)}function ve(pe){E("readable nexttick read 0"),pe.read(0)}Ee.prototype.resume=function(){const pe=this._readableState;return pe.flowing||(E("resume"),pe.flowing=!pe.readableListening,ke(this,pe)),pe[te]=!1,this};function ke(pe,H){H.resumeScheduled||(H.resumeScheduled=!0,e.nextTick(le,pe,H))}function le(pe,H){E("resume",H.reading),H.reading||pe.read(0),H.resumeScheduled=!1,pe.emit("resume"),ft(pe),H.flowing&&!H.reading&&pe.read(0)}Ee.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[te]=!0,this};function ft(pe){const H=pe._readableState;for(E("flow",H.flowing);H.flowing&&pe.read()!==null;);}Ee.prototype.wrap=function(pe){let H=!1;pe.on("data",W=>{!this.push(W)&&pe.pause&&(H=!0,pe.pause())}),pe.on("end",()=>{this.push(null)}),pe.on("error",W=>{U(this,W)}),pe.on("close",()=>{this.destroy()}),pe.on("destroy",()=>{this.destroy()}),this._read=()=>{H&&pe.resume&&(H=!1,pe.resume())};const B=o(pe);for(let W=1;W<B.length;W++){const he=B[W];this[he]===void 0&&typeof pe[he]=="function"&&(this[he]=pe[he].bind(pe))}return this},Ee.prototype[h]=function(){return vt(this)},Ee.prototype.iterator=function(pe){return pe!==void 0&&fe(pe,"options"),vt(this,pe)};function vt(pe,H){typeof pe.read!="function"&&(pe=Ee.wrap(pe,{objectMode:!0}));const B=M(pe,H);return B.stream=pe,B}async function*M(pe,H){let B=ae;function W(He){this===pe?(B(),B=ae):B=He}pe.on("readable",W);let he;const Te=S(pe,{writable:!1},He=>{he=He?O(he,He):null,B(),B=ae});try{for(;;){const He=pe.destroyed?null:pe.read();if(He!==null)yield He;else{if(he)throw he;if(he===null)return;await new l(W)}}}catch(He){throw he=O(he,He),he}finally{(he||(H==null?void 0:H.destroyOnReturn)!==!1)&&(he===void 0||pe._readableState.autoDestroy)?k.destroyer(pe,null):(pe.off("readable",W),Te())}}i(Ee.prototype,{readable:{__proto__:null,get(){const pe=this._readableState;return!!pe&&pe.readable!==!1&&!pe.destroyed&&!pe.errorEmitted&&!pe.endEmitted},set(pe){this._readableState&&(this._readableState.readable=!!pe)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(pe){this._readableState&&(this._readableState.flowing=pe)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(pe){this._readableState&&(this._readableState.destroyed=pe)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Me.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[te]!==!1},set(pe){this[te]=!!pe}}}),Ee._fromList=Be;function Be(pe,H){if(H.length===0)return null;let B;return H.objectMode?B=H.buffer.shift():!pe||pe>=H.length?(H.decoder?B=H.buffer.join(""):H.buffer.length===1?B=H.buffer.first():B=H.buffer.concat(H.length),H.buffer.clear()):B=H.buffer.consume(pe,H.decoder),B}function tt(pe){const H=pe._readableState;E("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,e.nextTick(ge,H,pe))}function ge(pe,H){if(E("endReadableNT",pe.endEmitted,pe.length),!pe.errored&&!pe.closeEmitted&&!pe.endEmitted&&pe.length===0){if(pe.endEmitted=!0,H.emit("end"),H.writable&&H.allowHalfOpen===!1)e.nextTick(je,H);else if(pe.autoDestroy){const B=H._writableState;(!B||B.autoDestroy&&(B.finished||B.writable===!1))&&H.destroy()}}}function je(pe){pe.writable&&!pe.writableEnded&&!pe.destroyed&&pe.end()}Ee.from=function(pe,H){return X(Ee,pe,H)};let Ke;function Nt(){return Ke===void 0&&(Ke={}),Ke}return Ee.fromWeb=function(pe,H){return Nt().newStreamReadableFromReadableStream(pe,H)},Ee.toWeb=function(pe,H){return Nt().newReadableStreamFromStreamReadable(pe,H)},Ee.wrap=function(pe,H){var B,W;return new Ee({objectMode:(B=(W=pe.readableObjectMode)!==null&&W!==void 0?W:pe.objectMode)!==null&&B!==void 0?B:!0,...H,destroy(he,Te){k.destroyer(pe,he),Te(he)}}).wrap(pe)},jS}var DS,o4;function Mk(){if(o4)return DS;o4=1;const e=$d(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:l,SymbolHasInstance:u}=Kr();DS=fe,fe.WritableState=K;const{EventEmitter:d}=Ww(),h=jk().Stream,{Buffer:p}=_u(),g=Wh(),{addAbortSignal:v}=Kw(),{getHighWaterMark:b,getDefaultHighWaterMark:_}=Zw(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:j,ERR_STREAM_WRITE_AFTER_END:O,ERR_UNKNOWN_ENCODING:L}=xi().codes,{errorOrDestroy:z}=g;o(fe.prototype,h.prototype),o(fe,h);function Y(){}const F=l("kOnFinished");function K(Ie,V,me){typeof me!="boolean"&&(me=V instanceof Vl()),this.objectMode=!!(Ie&&Ie.objectMode),me&&(this.objectMode=this.objectMode||!!(Ie&&Ie.writableObjectMode)),this.highWaterMark=Ie?b(this,Ie,"writableHighWaterMark",me):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ae=!!(Ie&&Ie.decodeStrings===!1);this.decodeStrings=!Ae,this.defaultEncoding=Ie&&Ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=U.bind(void 0,V),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,q(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ie||Ie.emitClose!==!1,this.autoDestroy=!Ie||Ie.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[F]=[]}function q(Ie){Ie.buffered=[],Ie.bufferedIndex=0,Ie.allBuffers=!0,Ie.allNoop=!0}K.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(K.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function fe(Ie){const V=this instanceof Vl();if(!V&&!r(fe,this))return new fe(Ie);this._writableState=new K(Ie,this,V),Ie&&(typeof Ie.write=="function"&&(this._write=Ie.write),typeof Ie.writev=="function"&&(this._writev=Ie.writev),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy),typeof Ie.final=="function"&&(this._final=Ie.final),typeof Ie.construct=="function"&&(this._construct=Ie.construct),Ie.signal&&v(Ie.signal,this)),h.call(this,Ie),g.construct(this,()=>{const me=this._writableState;me.writing||be(this,me),Re(this,me)})}a(fe,u,{__proto__:null,value:function(Ie){return r(this,Ie)?!0:this!==fe?!1:Ie&&Ie._writableState instanceof K}}),fe.prototype.pipe=function(){z(this,new C)};function te(Ie,V,me,Ae){const se=Ie._writableState;if(typeof me=="function")Ae=me,me=se.defaultEncoding;else{if(!me)me=se.defaultEncoding;else if(me!=="buffer"&&!p.isEncoding(me))throw new L(me);typeof Ae!="function"&&(Ae=Y)}if(V===null)throw new j;if(!se.objectMode)if(typeof V=="string")se.decodeStrings!==!1&&(V=p.from(V,me),me="buffer");else if(V instanceof p)me="buffer";else if(h._isUint8Array(V))V=h._uint8ArrayToBuffer(V),me="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],V);let ie;return se.ending?ie=new O:se.destroyed&&(ie=new k("write")),ie?(e.nextTick(Ae,ie),z(Ie,ie,!0),ie):(se.pendingcb++,re(Ie,se,V,me,Ae))}fe.prototype.write=function(Ie,V,me){return te(this,Ie,V,me)===!0},fe.prototype.cork=function(){this._writableState.corked++},fe.prototype.uncork=function(){const Ie=this._writableState;Ie.corked&&(Ie.corked--,Ie.writing||be(this,Ie))},fe.prototype.setDefaultEncoding=function(V){if(typeof V=="string"&&(V=s(V)),!p.isEncoding(V))throw new L(V);return this._writableState.defaultEncoding=V,this};function re(Ie,V,me,Ae,se){const ie=V.objectMode?1:me.length;V.length+=ie;const Q=V.length<V.highWaterMark;return Q||(V.needDrain=!0),V.writing||V.corked||V.errored||!V.constructed?(V.buffered.push({chunk:me,encoding:Ae,callback:se}),V.allBuffers&&Ae!=="buffer"&&(V.allBuffers=!1),V.allNoop&&se!==Y&&(V.allNoop=!1)):(V.writelen=ie,V.writecb=se,V.writing=!0,V.sync=!0,Ie._write(me,Ae,V.onwrite),V.sync=!1),Q&&!V.errored&&!V.destroyed}function X(Ie,V,me,Ae,se,ie,Q){V.writelen=Ae,V.writecb=Q,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new k("write")):me?Ie._writev(se,V.onwrite):Ie._write(se,ie,V.onwrite),V.sync=!1}function ae(Ie,V,me,Ae){--V.pendingcb,Ae(me),ue(V),z(Ie,me)}function U(Ie,V){const me=Ie._writableState,Ae=me.sync,se=me.writecb;if(typeof se!="function"){z(Ie,new E);return}me.writing=!1,me.writecb=null,me.length-=me.writelen,me.writelen=0,V?(V.stack,me.errored||(me.errored=V),Ie._readableState&&!Ie._readableState.errored&&(Ie._readableState.errored=V),Ae?e.nextTick(ae,Ie,me,V,se):ae(Ie,me,V,se)):(me.buffered.length>me.bufferedIndex&&be(Ie,me),Ae?me.afterWriteTickInfo!==null&&me.afterWriteTickInfo.cb===se?me.afterWriteTickInfo.count++:(me.afterWriteTickInfo={count:1,cb:se,stream:Ie,state:me},e.nextTick(ee,me.afterWriteTickInfo)):J(Ie,me,1,se))}function ee({stream:Ie,state:V,count:me,cb:Ae}){return V.afterWriteTickInfo=null,J(Ie,V,me,Ae)}function J(Ie,V,me,Ae){for(!V.ending&&!Ie.destroyed&&V.length===0&&V.needDrain&&(V.needDrain=!1,Ie.emit("drain"));me-- >0;)V.pendingcb--,Ae();V.destroyed&&ue(V),Re(Ie,V)}function ue(Ie){if(Ie.writing)return;for(let se=Ie.bufferedIndex;se<Ie.buffered.length;++se){var V;const{chunk:ie,callback:Q}=Ie.buffered[se],xe=Ie.objectMode?1:ie.length;Ie.length-=xe,Q((V=Ie.errored)!==null&&V!==void 0?V:new k("write"))}const me=Ie[F].splice(0);for(let se=0;se<me.length;se++){var Ae;me[se]((Ae=Ie.errored)!==null&&Ae!==void 0?Ae:new k("end"))}q(Ie)}function be(Ie,V){if(V.corked||V.bufferProcessing||V.destroyed||!V.constructed)return;const{buffered:me,bufferedIndex:Ae,objectMode:se}=V,ie=me.length-Ae;if(!ie)return;let Q=Ae;if(V.bufferProcessing=!0,ie>1&&Ie._writev){V.pendingcb-=ie-1;const xe=V.allNoop?Y:Ee=>{for(let We=Q;We<me.length;++We)me[We].callback(Ee)},Me=V.allNoop&&Q===0?me:t(me,Q);Me.allBuffers=V.allBuffers,X(Ie,V,!0,V.length,Me,"",xe),q(V)}else{do{const{chunk:xe,encoding:Me,callback:Ee}=me[Q];me[Q++]=null;const We=se?1:xe.length;X(Ie,V,!1,We,xe,Me,Ee)}while(Q<me.length&&!V.writing);Q===me.length?q(V):Q>256?(me.splice(0,Q),V.bufferedIndex=0):V.bufferedIndex=Q}V.bufferProcessing=!1}fe.prototype._write=function(Ie,V,me){if(this._writev)this._writev([{chunk:Ie,encoding:V}],me);else throw new S("_write()")},fe.prototype._writev=null,fe.prototype.end=function(Ie,V,me){const Ae=this._writableState;typeof Ie=="function"?(me=Ie,Ie=null,V=null):typeof V=="function"&&(me=V,V=null);let se;if(Ie!=null){const ie=te(this,Ie,V);ie instanceof n&&(se=ie)}return Ae.corked&&(Ae.corked=1,this.uncork()),se||(!Ae.errored&&!Ae.ending?(Ae.ending=!0,Re(this,Ae,!0),Ae.ended=!0):Ae.finished?se=new R("end"):Ae.destroyed&&(se=new k("end"))),typeof me=="function"&&(se||Ae.finished?e.nextTick(me,se):Ae[F].push(me)),this};function _e(Ie){return Ie.ending&&!Ie.destroyed&&Ie.constructed&&Ie.length===0&&!Ie.errored&&Ie.buffered.length===0&&!Ie.finished&&!Ie.writing&&!Ie.errorEmitted&&!Ie.closeEmitted}function Pe(Ie,V){let me=!1;function Ae(se){if(me){z(Ie,se??E());return}if(me=!0,V.pendingcb--,se){const ie=V[F].splice(0);for(let Q=0;Q<ie.length;Q++)ie[Q](se);z(Ie,se,V.sync)}else _e(V)&&(V.prefinished=!0,Ie.emit("prefinish"),V.pendingcb++,e.nextTick(Ce,Ie,V))}V.sync=!0,V.pendingcb++;try{Ie._final(Ae)}catch(se){Ae(se)}V.sync=!1}function Ne(Ie,V){!V.prefinished&&!V.finalCalled&&(typeof Ie._final=="function"&&!V.destroyed?(V.finalCalled=!0,Pe(Ie,V)):(V.prefinished=!0,Ie.emit("prefinish")))}function Re(Ie,V,me){_e(V)&&(Ne(Ie,V),V.pendingcb===0&&(me?(V.pendingcb++,e.nextTick((Ae,se)=>{_e(se)?Ce(Ae,se):se.pendingcb--},Ie,V)):_e(V)&&(V.pendingcb++,Ce(Ie,V))))}function Ce(Ie,V){V.pendingcb--,V.finished=!0;const me=V[F].splice(0);for(let Ae=0;Ae<me.length;Ae++)me[Ae]();if(Ie.emit("finish"),V.autoDestroy){const Ae=Ie._readableState;(!Ae||Ae.autoDestroy&&(Ae.endEmitted||Ae.readable===!1))&&Ie.destroy()}}i(fe.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ie){this._writableState&&(this._writableState.destroyed=Ie)}},writable:{__proto__:null,get(){const Ie=this._writableState;return!!Ie&&Ie.writable!==!1&&!Ie.destroyed&&!Ie.errored&&!Ie.ending&&!Ie.ended},set(Ie){this._writableState&&(this._writableState.writable=!!Ie)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ie=this._writableState;return Ie?!Ie.destroyed&&!Ie.ending&&Ie.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Fe=g.destroy;fe.prototype.destroy=function(Ie,V){const me=this._writableState;return!me.destroyed&&(me.bufferedIndex<me.buffered.length||me[F].length)&&e.nextTick(ue,me),Fe.call(this,Ie,V),this},fe.prototype._undestroy=g.undestroy,fe.prototype._destroy=function(Ie,V){V(Ie)},fe.prototype[d.captureRejectionSymbol]=function(Ie){this.destroy(Ie)};let Qe;function Le(){return Qe===void 0&&(Qe={}),Qe}return fe.fromWeb=function(Ie,V){return Le().newStreamWritableFromWritableStream(Ie,V)},fe.toWeb=function(Ie){return Le().newWritableStreamFromStreamWritable(Ie)},DS}var MS,s4;function xee(){if(s4)return MS;s4=1;const e=$d(),t=_u(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:d}=Ql(),h=xu(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=xi(),{destroyer:b}=Wh(),_=Vl(),x=Yw(),S=Mk(),{createDeferredPromise:E}=ji(),C=hP(),k=globalThis.Blob||t.Blob,R=typeof k<"u"?function(K){return K instanceof k}:function(K){return!1},j=globalThis.AbortController||y0().AbortController,{FunctionPrototypeCall:O}=Kr();class L extends _{constructor(K){super(K),(K==null?void 0:K.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(K==null?void 0:K.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}MS=function F(K,q){if(l(K))return K;if(o(K))return Y({readable:K});if(s(K))return Y({writable:K});if(i(K))return Y({writable:!1,readable:!1});if(u(K))return Y({readable:x.fromWeb(K)});if(d(K))return Y({writable:S.fromWeb(K)});if(typeof K=="function"){const{value:te,write:re,final:X,destroy:ae}=z(K);if(a(te))return C(L,te,{objectMode:!0,write:re,final:X,destroy:ae});const U=te==null?void 0:te.then;if(typeof U=="function"){let ee;const J=O(U,te,ue=>{if(ue!=null)throw new v("nully","body",ue)},ue=>{b(ee,ue)});return ee=new L({objectMode:!0,readable:!1,write:re,final(ue){X(async()=>{try{await J,e.nextTick(ue,null)}catch(be){e.nextTick(ue,be)}})},destroy:ae})}throw new v("Iterable, AsyncIterable or AsyncFunction",q,te)}if(R(K))return F(K.arrayBuffer());if(a(K))return C(L,K,{objectMode:!0,writable:!1});if(u(K==null?void 0:K.readable)&&d(K==null?void 0:K.writable))return L.fromWeb(K);if(typeof(K==null?void 0:K.writable)=="object"||typeof(K==null?void 0:K.readable)=="object"){const te=K!=null&&K.readable?o(K==null?void 0:K.readable)?K==null?void 0:K.readable:F(K.readable):void 0,re=K!=null&&K.writable?s(K==null?void 0:K.writable)?K==null?void 0:K.writable:F(K.writable):void 0;return Y({readable:te,writable:re})}const fe=K==null?void 0:K.then;if(typeof fe=="function"){let te;return O(fe,K,re=>{re!=null&&te.push(re),te.push(null)},re=>{b(te,re)}),te=new L({objectMode:!0,writable:!1,read(){}})}throw new g(q,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],K)};function z(F){let{promise:K,resolve:q}=E();const fe=new j,te=fe.signal;return{value:F(async function*(){for(;;){const X=K;K=null;const{chunk:ae,done:U,cb:ee}=await X;if(e.nextTick(ee),U)return;if(te.aborted)throw new p(void 0,{cause:te.reason});({promise:K,resolve:q}=E()),yield ae}}(),{signal:te}),write(X,ae,U){const ee=q;q=null,ee({chunk:X,done:!1,cb:U})},final(X){const ae=q;q=null,ae({done:!0,cb:X})},destroy(X,ae){fe.abort(),ae(X)}}}function Y(F){const K=F.readable&&typeof F.readable.read!="function"?x.wrap(F.readable):F.readable,q=F.writable;let fe=!!n(K),te=!!r(q),re,X,ae,U,ee;function J(ue){const be=U;U=null,be?be(ue):ue&&ee.destroy(ue)}return ee=new L({readableObjectMode:!!(K!=null&&K.readableObjectMode),writableObjectMode:!!(q!=null&&q.writableObjectMode),readable:fe,writable:te}),te&&(h(q,ue=>{te=!1,ue&&b(K,ue),J(ue)}),ee._write=function(ue,be,_e){q.write(ue,be)?_e():re=_e},ee._final=function(ue){q.end(),X=ue},q.on("drain",function(){if(re){const ue=re;re=null,ue()}}),q.on("finish",function(){if(X){const ue=X;X=null,ue()}})),fe&&(h(K,ue=>{fe=!1,ue&&b(K,ue),J(ue)}),K.on("readable",function(){if(ae){const ue=ae;ae=null,ue()}}),K.on("end",function(){ee.push(null)}),ee._read=function(){for(;;){const ue=K.read();if(ue===null){ae=ee._read;return}if(!ee.push(ue))return}}),ee._destroy=function(ue,be){!ue&&U!==null&&(ue=new p),ae=null,re=null,X=null,U===null?be(ue):(U=be,b(q,ue),b(K,ue))},ee}return MS}var PS,l4;function Vl(){if(l4)return PS;l4=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Kr();PS=o;const a=Yw(),i=Mk();r(o.prototype,a.prototype),r(o,a);{const d=n(i.prototype);for(let h=0;h<d.length;h++){const p=d[h];o.prototype[p]||(o.prototype[p]=i.prototype[p])}}function o(d){if(!(this instanceof o))return new o(d);a.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let s;function l(){return s===void 0&&(s={}),s}o.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},o.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let u;return o.from=function(d){return u||(u=xee()),u(d,"body")},PS}var FS,c4;function pP(){if(c4)return FS;c4=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Kr();FS=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=xi().codes,r=Vl(),{getHighWaterMark:a}=Zw();e(o.prototype,r.prototype),e(o,r);const i=t("kCallback");function o(u){if(!(this instanceof o))return new o(u);const d=u?a(this,u,"readableHighWaterMark",!0):null;d===0&&(u={...u,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[i]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function s(u){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){u?u(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(u,d,h){throw new n("_transform()")},o.prototype._write=function(u,d,h){const p=this._readableState,g=this._writableState,v=p.length;this._transform(u,d,(b,_)=>{if(b){h(b);return}_!=null&&this.push(_),g.ended||v===p.length||p.length<p.highWaterMark?h():this[i]=h})},o.prototype._read=function(){if(this[i]){const u=this[i];this[i]=null,u()}},FS}var LS,u4;function mP(){if(u4)return LS;u4=1;const{ObjectSetPrototypeOf:e}=Kr();LS=n;const t=pP();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},LS}var $S,d4;function Pk(){if(d4)return $S;d4=1;const e=$d(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Kr(),i=xu(),{once:o}=ji(),s=Wh(),l=Vl(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=xi(),{validateFunction:_,validateAbortSignal:x}=dg(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:k,isTransformStream:R,isWebStream:j,isReadableStream:O,isReadableFinished:L}=Ql(),z=globalThis.AbortController||y0().AbortController;let Y,F,K;function q(ue,be,_e){let Pe=!1;ue.on("close",()=>{Pe=!0});const Ne=i(ue,{readable:be,writable:_e},Re=>{Pe=!Re});return{destroy:Re=>{Pe||(Pe=!0,s.destroyer(ue,Re||new g("pipe")))},cleanup:Ne}}function fe(ue){return _(ue[ue.length-1],"streams[stream.length - 1]"),ue.pop()}function te(ue){if(S(ue))return ue;if(C(ue))return re(ue);throw new d("val",["Readable","Iterable","AsyncIterable"],ue)}async function*re(ue){F||(F=Yw()),yield*F.prototype[r].call(ue)}async function X(ue,be,_e,{end:Pe}){let Ne,Re=null;const Ce=Le=>{if(Le&&(Ne=Le),Re){const Ie=Re;Re=null,Ie()}},Fe=()=>new n((Le,Ie)=>{Ne?Ie(Ne):Re=()=>{Ne?Ie(Ne):Le()}});be.on("drain",Ce);const Qe=i(be,{readable:!1},Ce);try{be.writableNeedDrain&&await Fe();for await(const Le of ue)be.write(Le)||await Fe();Pe&&(be.end(),await Fe()),_e()}catch(Le){_e(Ne!==Le?u(Ne,Le):Le)}finally{Qe(),be.off("drain",Ce)}}async function ae(ue,be,_e,{end:Pe}){R(be)&&(be=be.writable);const Ne=be.getWriter();try{for await(const Re of ue)await Ne.ready,Ne.write(Re).catch(()=>{});await Ne.ready,Pe&&await Ne.close(),_e()}catch(Re){try{await Ne.abort(Re),_e(Re)}catch(Ce){_e(Ce)}}}function U(...ue){return ee(ue,o(fe(ue)))}function ee(ue,be,_e){if(ue.length===1&&t(ue[0])&&(ue=ue[0]),ue.length<2)throw new p("streams");const Pe=new z,Ne=Pe.signal,Re=_e==null?void 0:_e.signal,Ce=[];x(Re,"options.signal");function Fe(){se(new b)}K=K||ji().addAbortListener;let Qe;Re&&(Qe=K(Re,Fe));let Le,Ie;const V=[];let me=0;function Ae(Ee){se(Ee,--me===0)}function se(Ee,We){var kt;if(Ee&&(!Le||Le.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Le=Ee),!(!Le&&!We)){for(;V.length;)V.shift()(Le);(kt=Qe)===null||kt===void 0||kt[a](),Pe.abort(),We&&(Le||Ce.forEach(at=>at()),e.nextTick(be,Le,Ie))}}let ie;for(let Ee=0;Ee<ue.length;Ee++){const We=ue[Ee],kt=Ee<ue.length-1,at=Ee>0,_t=kt||(_e==null?void 0:_e.end)!==!1,Dt=Ee===ue.length-1;if(k(We)){let jt=function(Gt){Gt&&Gt.name!=="AbortError"&&Gt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ae(Gt)};var Me=jt;if(_t){const{destroy:Gt,cleanup:ye}=q(We,kt,at);V.push(Gt),E(We)&&Dt&&Ce.push(ye)}We.on("error",jt),E(We)&&Dt&&Ce.push(()=>{We.removeListener("error",jt)})}if(Ee===0)if(typeof We=="function"){if(ie=We({signal:Ne}),!S(ie))throw new h("Iterable, AsyncIterable or Stream","source",ie)}else S(We)||C(We)||R(We)?ie=We:ie=l.from(We);else if(typeof We=="function"){if(R(ie)){var Q;ie=te((Q=ie)===null||Q===void 0?void 0:Q.readable)}else ie=te(ie);if(ie=We(ie,{signal:Ne}),kt){if(!S(ie,!0))throw new h("AsyncIterable",`transform[${Ee-1}]`,ie)}else{var xe;Y||(Y=mP());const jt=new Y({objectMode:!0}),Gt=(xe=ie)===null||xe===void 0?void 0:xe.then;if(typeof Gt=="function")me++,Gt.call(ie,G=>{Ie=G,G!=null&&jt.write(G),_t&&jt.end(),e.nextTick(Ae)},G=>{jt.destroy(G),e.nextTick(Ae,G)});else if(S(ie,!0))me++,X(ie,jt,Ae,{end:_t});else if(O(ie)||R(ie)){const G=ie.readable||ie;me++,X(G,jt,Ae,{end:_t})}else throw new h("AsyncIterable or Promise","destination",ie);ie=jt;const{destroy:ye,cleanup:I}=q(ie,!1,!0);V.push(ye),Dt&&Ce.push(I)}}else if(k(We)){if(C(ie)){me+=2;const jt=J(ie,We,Ae,{end:_t});E(We)&&Dt&&Ce.push(jt)}else if(R(ie)||O(ie)){const jt=ie.readable||ie;me++,X(jt,We,Ae,{end:_t})}else if(S(ie))me++,X(ie,We,Ae,{end:_t});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=We}else if(j(We)){if(C(ie))me++,ae(te(ie),We,Ae,{end:_t});else if(O(ie)||S(ie))me++,ae(ie,We,Ae,{end:_t});else if(R(ie))me++,ae(ie.readable,We,Ae,{end:_t});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=We}else ie=l.from(We)}return(Ne!=null&&Ne.aborted||Re!=null&&Re.aborted)&&e.nextTick(Fe),ie}function J(ue,be,_e,{end:Pe}){let Ne=!1;if(be.on("close",()=>{Ne||_e(new v)}),ue.pipe(be,{end:!1}),Pe){let Ce=function(){Ne=!0,be.end()};var Re=Ce;L(ue)?e.nextTick(Ce):ue.once("end",Ce)}else _e();return i(ue,{readable:!0,writable:!1},Ce=>{const Fe=ue._readableState;Ce&&Ce.code==="ERR_STREAM_PREMATURE_CLOSE"&&Fe&&Fe.ended&&!Fe.errored&&!Fe.errorEmitted?ue.once("end",_e).once("error",_e):_e(Ce)}),i(be,{readable:!1,writable:!0},_e)}return $S={pipelineImpl:ee,pipeline:U},$S}var BS,f4;function gP(){if(f4)return BS;f4=1;const{pipeline:e}=Pk(),t=Vl(),{destroyer:n}=Wh(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:o,isTransformStream:s,isWritableStream:l,isReadableStream:u}=Ql(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:p}}=xi(),g=xu();return BS=function(...b){if(b.length===0)throw new p("streams");if(b.length===1)return t.from(b[0]);const _=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const Y=b.length-1;b[Y]=t.from(b[Y])}for(let Y=0;Y<b.length;++Y)if(!(!r(b[Y])&&!o(b[Y]))){if(Y<b.length-1&&!(a(b[Y])||u(b[Y])||s(b[Y])))throw new h(`streams[${Y}]`,_[Y],"must be readable");if(Y>0&&!(i(b[Y])||l(b[Y])||s(b[Y])))throw new h(`streams[${Y}]`,_[Y],"must be writable")}let x,S,E,C,k;function R(Y){const F=C;C=null,F?F(Y):Y?k.destroy(Y):!z&&!L&&k.destroy()}const j=b[0],O=e(b,R),L=!!(i(j)||l(j)||s(j)),z=!!(a(O)||u(O)||s(O));if(k=new t({writableObjectMode:!!(j!=null&&j.writableObjectMode),readableObjectMode:!!(O!=null&&O.readableObjectMode),writable:L,readable:z}),L){if(r(j))k._write=function(F,K,q){j.write(F,K)?q():x=q},k._final=function(F){j.end(),S=F},j.on("drain",function(){if(x){const F=x;x=null,F()}});else if(o(j)){const K=(s(j)?j.writable:j).getWriter();k._write=async function(q,fe,te){try{await K.ready,K.write(q).catch(()=>{}),te()}catch(re){te(re)}},k._final=async function(q){try{await K.ready,K.close().catch(()=>{}),S=q}catch(fe){q(fe)}}}const Y=s(O)?O.readable:O;g(Y,()=>{if(S){const F=S;S=null,F()}})}if(z){if(r(O))O.on("readable",function(){if(E){const Y=E;E=null,Y()}}),O.on("end",function(){k.push(null)}),k._read=function(){for(;;){const Y=O.read();if(Y===null){E=k._read;return}if(!k.push(Y))return}};else if(o(O)){const F=(s(O)?O.readable:O).getReader();k._read=async function(){for(;;)try{const{value:K,done:q}=await F.read();if(!k.push(K))return;if(q){k.push(null);return}}catch{return}}}}return k._destroy=function(Y,F){!Y&&C!==null&&(Y=new d),E=null,x=null,S=null,C===null?F(Y):(C=F,r(O)&&n(O,Y))},k},BS}var h4;function See(){if(h4)return _b;h4=1;const e=globalThis.AbortController||y0().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=xi(),{validateAbortSignal:o,validateInteger:s,validateObject:l}=dg(),u=Kr().Symbol("kWeak"),d=Kr().Symbol("kResistStopPropagation"),{finished:h}=xu(),p=gP(),{addAbortSignalNoValidate:g}=Kw(),{isWritable:v,isNodeStream:b}=Ql(),{deprecate:_}=ji(),{ArrayPrototypePush:x,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:k,Promise:R,PromiseReject:j,PromiseResolve:O,PromisePrototypeThen:L,Symbol:z}=Kr(),Y=z("kEmpty"),F=z("kEof");function K(Re,Ce){if(Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&o(Ce.signal,"options.signal"),b(Re)&&!v(Re))throw new t("stream",Re,"must be writable");const Fe=p(this,Re);return Ce!=null&&Ce.signal&&g(Ce.signal,Fe),Fe}function q(Re,Ce){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&o(Ce.signal,"options.signal");let Fe=1;(Ce==null?void 0:Ce.concurrency)!=null&&(Fe=E(Ce.concurrency));let Qe=Fe-1;return(Ce==null?void 0:Ce.highWaterMark)!=null&&(Qe=E(Ce.highWaterMark)),s(Fe,"options.concurrency",1),s(Qe,"options.highWaterMark",0),Qe+=Fe,(async function*(){const Ie=ji().AbortSignalAny([Ce==null?void 0:Ce.signal].filter(S)),V=this,me=[],Ae={signal:Ie};let se,ie,Q=!1,xe=0;function Me(){Q=!0,Ee()}function Ee(){xe-=1,We()}function We(){ie&&!Q&&xe<Fe&&me.length<Qe&&(ie(),ie=null)}async function kt(){try{for await(let at of V){if(Q)return;if(Ie.aborted)throw new i;try{if(at=Re(at,Ae),at===Y)continue;at=O(at)}catch(_t){at=j(_t)}xe+=1,L(at,Ee,Me),me.push(at),se&&(se(),se=null),!Q&&(me.length>=Qe||xe>=Fe)&&await new R(_t=>{ie=_t})}me.push(F)}catch(at){const _t=j(at);L(_t,Ee,Me),me.push(_t)}finally{Q=!0,se&&(se(),se=null)}}kt();try{for(;;){for(;me.length>0;){const at=await me[0];if(at===F)return;if(Ie.aborted)throw new i;at!==Y&&(yield at),me.shift(),We()}await new R(at=>{se=at})}}finally{Q=!0,ie&&(ie(),ie=null)}}).call(this)}function fe(Re=void 0){return Re!=null&&l(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal"),(async function*(){let Fe=0;for await(const Le of this){var Qe;if(Re!=null&&(Qe=Re.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i({cause:Re.signal.reason});yield[Fe++,Le]}}).call(this)}async function te(Re,Ce=void 0){for await(const Fe of U.call(this,Re,Ce))return!0;return!1}async function re(Re,Ce=void 0){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);return!await te.call(this,async(...Fe)=>!await Re(...Fe),Ce)}async function X(Re,Ce){for await(const Fe of U.call(this,Re,Ce))return Fe}async function ae(Re,Ce){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function Fe(Qe,Le){return await Re(Qe,Le),Y}for await(const Qe of q.call(this,Fe,Ce));}function U(Re,Ce){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function Fe(Qe,Le){return await Re(Qe,Le)?Qe:Y}return q.call(this,Fe,Ce)}class ee extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function J(Re,Ce,Fe){var Qe;if(typeof Re!="function")throw new n("reducer",["Function","AsyncFunction"],Re);Fe!=null&&l(Fe,"options"),(Fe==null?void 0:Fe.signal)!=null&&o(Fe.signal,"options.signal");let Le=arguments.length>1;if(Fe!=null&&(Qe=Fe.signal)!==null&&Qe!==void 0&&Qe.aborted){const se=new i(void 0,{cause:Fe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(se)),se}const Ie=new e,V=Ie.signal;if(Fe!=null&&Fe.signal){const se={once:!0,[u]:this,[d]:!0};Fe.signal.addEventListener("abort",()=>Ie.abort(),se)}let me=!1;try{for await(const se of this){var Ae;if(me=!0,Fe!=null&&(Ae=Fe.signal)!==null&&Ae!==void 0&&Ae.aborted)throw new i;Le?Ce=await Re(Ce,se,{signal:V}):(Ce=se,Le=!0)}if(!me&&!Le)throw new ee}finally{Ie.abort()}return Ce}async function ue(Re){Re!=null&&l(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal");const Ce=[];for await(const Qe of this){var Fe;if(Re!=null&&(Fe=Re.signal)!==null&&Fe!==void 0&&Fe.aborted)throw new i(void 0,{cause:Re.signal.reason});x(Ce,Qe)}return Ce}function be(Re,Ce){const Fe=q.call(this,Re,Ce);return(async function*(){for await(const Le of Fe)yield*Le}).call(this)}function _e(Re){if(Re=C(Re),k(Re))return 0;if(Re<0)throw new a("number",">= 0",Re);return Re}function Pe(Re,Ce=void 0){return Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&o(Ce.signal,"options.signal"),Re=_e(Re),(async function*(){var Qe;if(Ce!=null&&(Qe=Ce.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const Ie of this){var Le;if(Ce!=null&&(Le=Ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;Re--<=0&&(yield Ie)}}).call(this)}function Ne(Re,Ce=void 0){return Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&o(Ce.signal,"options.signal"),Re=_e(Re),(async function*(){var Qe;if(Ce!=null&&(Qe=Ce.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const Ie of this){var Le;if(Ce!=null&&(Le=Ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;if(Re-- >0&&(yield Ie),Re<=0)return}}).call(this)}return _b.streamReturningOperators={asIndexedPairs:_(fe,"readable.asIndexedPairs will be removed in a future version."),drop:Pe,filter:U,flatMap:be,map:q,take:Ne,compose:K},_b.promiseReturningOperators={every:re,forEach:ae,reduce:J,toArray:ue,some:te,find:X},_b}var zS,p4;function yP(){if(p4)return zS;p4=1;const{ArrayPrototypePop:e,Promise:t}=Kr(),{isIterable:n,isNodeStream:r,isWebStream:a}=Ql(),{pipelineImpl:i}=Pk(),{finished:o}=xu();bP();function s(...l){return new t((u,d)=>{let h,p;const g=l[l.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(l);h=v.signal,p=v.end}i(l,(v,b)=>{v?d(v):u(b)},{signal:h,end:p})})}return zS={finished:o,pipeline:s},zS}var m4;function bP(){if(m4)return yS.exports;m4=1;const{Buffer:e}=_u(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Kr(),{promisify:{custom:a}}=ji(),{streamReturningOperators:i,promiseReturningOperators:o}=See(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=xi(),l=gP(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=Zw(),{pipeline:h}=Pk(),{destroyer:p}=Wh(),g=xu(),v=yP(),b=Ql(),_=yS.exports=jk().Stream;_.isDestroyed=b.isDestroyed,_.isDisturbed=b.isDisturbed,_.isErrored=b.isErrored,_.isReadable=b.isReadable,_.isWritable=b.isWritable,_.Readable=Yw();for(const E of n(i)){let k=function(...R){if(new.target)throw s();return _.Readable.from(r(C,this,R))};var S=k;const C=i[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(o)){let k=function(...j){if(new.target)throw s();return r(C,this,j)};var S=k;const C=o[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}_.Writable=Mk(),_.Duplex=Vl(),_.Transform=pP(),_.PassThrough=mP(),_.pipeline=h;const{addAbortSignal:x}=Kw();return _.addAbortSignal=x,_.finished=g,_.destroy=p,_.compose=l,_.setDefaultHighWaterMark=u,_.getDefaultHighWaterMark=d,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),_.Stream=_,_._isUint8Array=function(C){return C instanceof Uint8Array},_._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},yS.exports}var g4;function Eee(){return g4||(g4=1,function(e){const t=bP(),n=yP(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(gS)),gS.exports}var vP=Eee();class Fk extends vP.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(st.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(st.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class Lk extends vP.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(ri(new Ue(st.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(ri(new Ue(st.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(st.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(st.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(st.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Ao=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},To=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class oi{get position(){return this.flag&_d?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=ci(t,n);Object.assign(this,Rd(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&qw||this.inode.flags&Ii.Sync)}_emitChange(){Ka(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,X8(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=vu(t,-1);if(n<0)throw new Ue(st.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>Sr?-61441:Sr)|n,(this._isSync||n>Sr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(st.EINVAL);if(this.dirty=!0,!(this.flag&ti||this.flag&Pl))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=jv(t),this.inode.mtimeMs=jv(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Fl(n,"utf8","a",420);if(!(Ll(r.flag)&_d))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const i=typeof t=="string"?Dr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ti)throw new Ue(st.EPERM,"File not opened with a readable mode");this.inode.flags&Ii.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!p0(this.inode)&&!h0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=Fl(t,null,"r",292);if(Ll(n.flag)&ti)throw new Ue(st.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),o=Dr.from(i);return n.encoding?o.toString(n.encoding):o}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Ii.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&ti)throw Ue.With("EBADF",this.path,"readLines");return HQ({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!dr(this.context,this.inode,xa))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new Pd(this.inode):new Jl(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Ii.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"write");if(!(this.flag&ti||this.flag&Pl))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!p0(this.inode)&&!h0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,await this.fs.write(this.internalPath,o,a),this._isSync&&await this.sync(),o.byteLength}async write(t,n,r,a){let i,o,s;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,o=0,i=Dr.from(t,typeof r=="string"?r:"utf8"),s=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n??0,s=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const l=await this._write(i,o,s,a);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=Fl(n,"utf8","w",420),a=Ll(r.flag);if(!(a&ti||a&Pl))throw new Ue(st.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const i=typeof t=="string"?Dr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),eP(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&ti)throw Ue.With("EBADF",this.path,"createReadStream");return new Fk(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Ii.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"createWriteStream");return new Lk(t,this)}}async function wP(e,t){e=fn(e),t=fn(t);const n=Fn(e,this),r=Fn(t,this);if(!(await Kh.call(this,Xn(e))).hasAccess(Qr,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),Ka(this,"rename",e.toString()),Ka(this,"change",t.toString());return}await e1.call(this,t,await Qw(e)),await Jw.call(this,e),Ka(this,"rename",e.toString())}catch(a){throw fr(a,{[n.path]:e,[r.path]:t})}}async function fg(e){try{const{fs:t,path:n}=Fn(await Su.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function Kh(e,t){e=fn(e);const{fs:n,path:r}=Fn(await Su.call(this,e),this);try{const a=await n.stat(r);if(Sa&&!dr(this,a,xa))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Pd(a):new Jl(a)}catch(a){throw fr(a,{[r]:e})}}async function Xw(e,t){e=fn(e);const{fs:n,path:r}=Fn(e,this);try{const a=await n.stat(r);if(Sa&&!dr(this,a,xa))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Pd(a):new Jl(a)}catch(a){throw fr(a,{[r]:e})}}async function _P(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Ao(n,await No.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=To(n);r&&await r}}async function Jw(e){e=fn(e);const{fs:t,path:n}=Fn(e,this);try{if(Sa&&!dr(this,await t.stat(n),Qr))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),Ka(this,"rename",e.toString())}catch(r){throw fr(r,{[n]:e})}}async function Zh(e,t,n){var r;t=fn(t);const a=vu(n.mode,420),i=Ll(n.flag),{fullPath:o,fs:s,path:l,stats:u}=await Fv(e,t.toString(),n.preserveSymlinks);if(!u){if(!(i&zw))throw Ue.With("ENOENT",o,"_open");const h=await s.stat(Xn(l));if(!dr(e,h,Qr))throw Ue.With("EACCES",Xn(o),"_open");if(!es(h))throw Ue.With("ENOTDIR",Xn(o),"_open");const{euid:p,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:os.credentials,v=await s.createFile(l,{mode:a,uid:h.mode&sg?h.uid:p,gid:h.mode&lg?h.gid:g});return new oi(e,Mv(new Dv(e,t,s,l,i,v)))}if(!dr(e,u,tP(i)))throw Ue.With("EACCES",o,"_open");if(i&Uw)throw Ue.With("EEXIST",o,"_open");const d=new oi(e,Mv(new Dv(e,t,s,l,i,u)));return i&Hw&&await d.truncate(0),d}async function No(e,t="r",n=420){return await Zh(this,e,{flag:t,mode:n})}async function Qw(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Fl(t,null,"r",292);return await Ao(n,typeof e=="object"&&"fd"in e?e:await No.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=To(n);r&&await r}}async function e1(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Fl(n,"utf8","w+",420),i=Ao(r,e instanceof oi?e:await No.call(this,e.toString(),a.flag,a.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new Ue(st.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function xP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Fl(n,"utf8","a",420);if(!(Ll(a.flag)&_d))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Dr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Ao(r,typeof e=="object"&&"fd"in e?e:await No.call(this,e,a.flag,a.mode),!0).appendFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function $k(e){e=await Su.call(this,e);const{fs:t,path:n}=Fn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!es(r))throw Ue.With("ENOTDIR",n,"rmdir");if(Sa&&!dr(this,r,Qr))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),Ka(this,"rename",e.toString())}catch(r){throw fr(r,{[n]:e})}}async function t1(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:os.credentials;t=typeof t=="object"?t:{mode:t};const o=vu(t==null?void 0:t.mode,511);e=await Su.call(this,e);const{fs:s,path:l,root:u}=Fn(e,this),d={[l]:e},h=async(p,g)=>{if(!dr(this,g,Qr))throw Ue.With("EACCES",Xn(p),"mkdir");const v=await s.mkdir(p,{mode:o,uid:g.mode&sg?g.uid:a,gid:g.mode&lg?g.gid:i});return Ka(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){await h(l,await s.stat(Xn(l)));return}const p=[];for(let v=l,b=e;!await s.exists(v);v=Xn(v),b=Xn(b))p.unshift(v),d[v]=b;if(!p.length)return;const g=[await s.stat(Xn(p[0]))];for(const[v,b]of p.entries())g.push(await h(b,g[v]));return u.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(u.length)}catch(p){throw fr(p,d)}}async function Bd(e,t){t=typeof t=="object"?t:{encoding:t},e=await Su.call(this,e);const{fs:n,path:r}=Fn(e,this),a=await n.stat(r).catch(l=>mr(fr(l,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!dr(this,a,xa))throw Ue.With("EACCES",e,"readdir");if(!es(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(l=>mr(fr(l,{[r]:e}))),o=[],s=async l=>{let u;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(u=await n.stat(sr(r,l)).catch(d=>{if(d.code!="ENOENT")throw fr(d,{[r]:e})}),!u))&&(t!=null&&t.withFileTypes?o.push(new g0(l,u)):(t==null?void 0:t.encoding)=="buffer"?o.push(Dr.from(l)):o.push(l),!(!(t!=null&&t.recursive)||!es(u))))for(const d of await Bd.call(this,sr(e,l),t))d instanceof g0?(d.path=sr(l,d.path),o.push(d)):Dr.isBuffer(d)?o.push(Dr.from(sr(l,dk(d)))):o.push(sr(l,d))};return await Promise.all(i.map(s)),o}async function SP(e,t){e=fn(e),t=fn(t);const{fs:n,path:r}=Fn(e,this),a=Fn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(Sa&&!dr(this,await n.stat(Xn(r)),xa))throw Ue.With("EACCES",Xn(r),"link");if(Sa&&!(await Kh.call(this,Xn(t))).hasAccess(Qr,this))throw Ue.With("EACCES",Xn(t),"link");if(Sa&&!dr(this,await n.stat(r),xa))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw fr(i,{[a.path]:t,[r]:e})}}async function EP(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(st.EINVAL,"Invalid symlink type: "+n);if(t=fn(t),await fg.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=Ao(r,await Zh(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(fn(e,!0)),await a.chmod(Xl)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function Pv(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await Ao(n,await Zh(this,fn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=To(n);r&&await r}}async function CP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ao(r,await No.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function kP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ao(r,await Zh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function AP(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Ao(n,await No.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=To(n);r&&await r}}async function TP(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Ao(n,await Zh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=To(n);r&&await r}}async function Bk(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ao(r,await No.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function NP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ao(r,await Zh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function Fv(e,t,n){if(n){const l=Fn(t,e),u=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:u}}try{const l=Fn(t,e),u=await l.fs.stat(l.path);if(!Sh(u))return{...l,fullPath:t,stats:u};const d=ql.call(e,Xn(t),(await Pv.call(e,t)).toString());return await Fv(e,d)}catch{}const{base:r,dir:a}=Ns(t),i=a=="/"?"/":await Su.call(e,a),o=sr(i,r),s=Fn(o,e);try{const l=await s.fs.stat(s.path);if(!Sh(l))return{...s,fullPath:o,stats:l};const u=ql.call(e,i,(await Pv.call(e,o)).toString());return await Fv(e,u)}catch(l){if(l.code=="ENOENT")return{...s,fullPath:t};throw fr(l,{[s.path]:o})}}async function Su(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=fn(e);const{fullPath:a}=await Fv(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Dr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function Cee(e,t={}){const n=new iP(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(o,s)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:o,filename:s},done:!1})});function i(){a=!0,n.close();for(const o of r)o({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:o,resolve:s}=Promise.withResolvers();return r.push(s),o},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function RP(e,t=bk){if(!(await Kh.call(this,e)).hasAccess(t,this))throw new Ue(st.EACCES)}async function zk(e,t){e=fn(e);const n=await Xw.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&Sr){case da:if(t!=null&&t.recursive)for(const r of await Bd.call(this,e))await zk.call(this,sr(e,r),t);await $k.call(this,e);break;case Wo:case Xl:case jd:case Dd:await Jw.call(this,e);break;case Md:case Od:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}}async function IP(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await t1.call(this,a),n=="buffer"?Dr.from(a):a}async function Uk(e,t,n){if(e=fn(e),t=fn(t),n&&n&vk&&await fg.call(this,t))throw new Ue(st.EEXIST,"Destination file already exists",t,"copyFile");await e1.call(this,t,await Qw.call(this,e)),Ka(this,"rename",t.toString())}function OP(e,t){return e=fn(e),Promise.resolve(new Ok(e,this))}async function Hk(e,t,n){e=fn(e),t=fn(t);const r=await Xw.call(this,e);if(n!=null&&n.errorOnExist&&await fg.call(this,t))throw new Ue(st.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Sr){case da:{if(!(n!=null&&n.recursive))throw new Ue(st.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([Bd.call(this,e,{withFileTypes:!0}),t1.call(this,t,{recursive:!0})]),i=async o=>{n.filter&&!n.filter(sr(e,o.name),sr(t,o.name))||await Hk.call(this,sr(e,o.name),sr(t,o.name),n)};await Promise.all(a.map(i));break}case Wo:case Xl:await Uk.call(this,e,t);break;case jd:case Dd:case Md:case Od:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await Bk.call(this,t,r.atime,r.mtime)}async function jP(e,t){e=fn(e);const{fs:n}=Fn(e,this);return Promise.resolve(rP(n,t==null?void 0:t.bigint))}function DP(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(s=>(s=s.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${s}$`)));async function*o(s){const l=await Bd(s,{withFileTypes:r,encoding:"utf8"});for(const u of l){const d=r?u.path:s+"/"+u;a(r?u:d)||((await Kh(d)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*o(d)),i.some(h=>h.test(d.replace(/^\/+/g,"")))&&(yield r?u:d.replace(/^\/+/g,"")))}}return o(n)}const kee=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:oi,access:RP,appendFile:xP,chmod:AP,chown:CP,constants:Z8,copyFile:Uk,cp:Hk,exists:fg,glob:DP,lchmod:TP,lchown:kP,link:SP,lstat:Xw,lutimes:NP,mkdir:t1,mkdtemp:IP,open:No,opendir:OP,readFile:Qw,readdir:Bd,readlink:Pv,realpath:Su,rename:wP,rm:zk,rmdir:$k,stat:Kh,statfs:jP,symlink:EP,truncate:_P,unlink:Jw,utimes:Bk,watch:Cee,writeFile:e1},Symbol.toStringTag,{value:"Module"})),Rn=()=>{};async function Aee(e){const t=[];for await(const n of e)t.push(n);return t}function Tee(e,t,n=Rn){wP.call(this,e,t).then(()=>n()).catch(n)}function Nee(e,t=Rn){fg.call(this,e).then(t).catch(()=>t(!1))}function Ree(e,t,n=Rn){n=typeof t=="function"?t:n,Kh.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function Iee(e,t,n=Rn){n=typeof t=="function"?t:n,Xw.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function Oee(e,t=0,n=Rn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;_P.call(this,e,r).then(()=>n()).catch(n)}function jee(e,t=Rn){Jw.call(this,e).then(()=>t()).catch(t)}function Dee(e,t,n,r=Rn){const a=vu(n,420);r=typeof n=="function"?n:r,No.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function Mee(e,t,n=Rn){n=typeof t=="function"?t:n,Qw.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Pee(e,t,n,r=Rn){r=typeof n=="function"?n:r,e1.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function Fee(e,t,n,r=Rn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,xP.call(this,e,t,a).then(()=>r()).catch(r)}function Lee(e,t,n=Rn){n=typeof t=="function"?t:n,new oi(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new Pd(r):r)).catch(n)}function $ee(e,t=Rn){new oi(this,e).close().then(()=>t()).catch(t)}function Bee(e,t,n=Rn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new oi(this,e);if(r<0)throw new Ue(st.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function zee(e,t=Rn){new oi(this,e).sync().then(()=>t()).catch(t)}function Uee(e,t=Rn){new oi(this,e).datasync().then(()=>t()).catch(t)}function Hee(e,t,n,r,a,i=Rn){let o,s,l,u,d;const h=new oi(this,e);if(typeof t=="string"){switch(d="utf8",typeof n){case"function":i=n;break;case"number":u=n,d=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(st.EINVAL,"Invalid arguments"));return}o=Dr.from(t),s=0,l=o.length;const p=i;h.write(o,s,l,u).then(({bytesWritten:g})=>p(void 0,g,o.toString(d))).catch(p)}else{o=Dr.from(t.buffer),s=n,l=r,u=typeof a=="number"?a:null;const p=typeof a=="function"?a:i;h.write(o,s,l,u).then(({bytesWritten:g})=>p(void 0,g,o)).catch(p)}}function qee(e,t,n,r,a,i=Rn){new oi(this,e).read(t,n,r,a).then(({bytesRead:o,buffer:s})=>i(void 0,o,s)).catch(i)}function Vee(e,t,n,r=Rn){new oi(this,e).chown(t,n).then(()=>r()).catch(r)}function Gee(e,t,n){new oi(this,e).chmod(t).then(()=>n()).catch(n)}function Wee(e,t,n,r=Rn){new oi(this,e).utimes(t,n).then(()=>r()).catch(r)}function Kee(e,t=Rn){$k.call(this,e).then(()=>t()).catch(t)}function Zee(e,t,n=Rn){t1.call(this,e,t).then(()=>n()).catch(n)}function Yee(e,t,n=Rn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};Bd.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function Xee(e,t,n=Rn){SP.call(this,e,t).then(()=>n()).catch(n)}function Jee(e,t,n,r=Rn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,EP.call(this,e,t,a).then(()=>r()).catch(r)}function Qee(e,t,n=Rn){n=typeof t=="function"?t:n,Pv.call(this,e).then(r=>n(void 0,r)).catch(n)}function ete(e,t,n,r=Rn){CP.call(this,e,t,n).then(()=>r()).catch(r)}function tte(e,t,n,r=Rn){kP.call(this,e,t,n).then(()=>r()).catch(r)}function nte(e,t,n=Rn){AP.call(this,e,t).then(()=>n()).catch(n)}function rte(e,t,n=Rn){TP.call(this,e,t).then(()=>n()).catch(n)}function ate(e,t,n,r=Rn){Bk.call(this,e,t,n).then(()=>r()).catch(r)}function ite(e,t,n,r=Rn){NP.call(this,e,t,n).then(()=>r()).catch(r)}function ote(e,t,n=Rn){n=typeof t=="function"?t:n,Su.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function ste(e,t,n=Rn){const r=typeof t=="number"?t:xa;n=typeof t=="function"?t:n,RP.call(this,e,r).then(()=>n()).catch(n)}const eh=new Map;function lte(e,t,n){const r=fn(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(st.EINVAL,"No listener specified",e.toString(),"watchFile");if(eh.has(r)){const o=eh.get(r);o&&o.listeners.add(n);return}const i=new KQ(this,r,a);i.on("change",(o,s)=>{const l=eh.get(r);if(l)for(const u of l.listeners)u(o,s)}),eh.set(r,{watcher:i,listeners:new Set})}function cte(e,t=Rn){const n=fn(e),r=eh.get(n);r&&(t&&t!==Rn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),eh.delete(n)))}function ute(e,t,n){const r=new iP(this,fn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||Rn),r}function dte(e,t){t=typeof t=="object"?t:{encoding:t};const n=No.call(this,e,"r",t==null?void 0:t.mode);return new Fk({...t,autoClose:!0},n)}function fte(e,t){t=typeof t=="object"?t:{encoding:t};const n=No.call(this,e,"w",t==null?void 0:t.mode);return new Lk(t,n)}function hte(e,t,n=Rn){n=typeof t=="function"?t:n,zk.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function pte(e,t,n=Rn){n=typeof t=="function"?t:n,IP.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function mte(e,t,n,r=Rn){r=typeof n=="function"?n:r,Uk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function gte(e,t,n,r=Rn){r=typeof n=="function"?n:r,new oi(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function yte(e,t,n,r=Rn){r=typeof n=="function"?n:r,new oi(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function bte(e,t,n=Rn){n=typeof t=="function"?t:n,OP.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function vte(e,t,n,r=Rn){r=typeof n=="function"?n:r,Hk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function wte(e,t,n=Rn){n=typeof t=="function"?t:n,jP.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function _te(e,t){const n=await No.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function xte(e,t,n=Rn){n=typeof t=="function"?t:n;const r=DP.call(this,e,typeof t=="function"?void 0:t);Aee(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var ed=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:d.get,set:d.set}:d[l],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(d.get=h),(h=o(_.set))&&(d.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),p=!0},Ki=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},Ste=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},Lv;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(Lv||(Lv={}));let MP=(()=>{var e,t,n,r,a;let i=[Id()],o,s=[],l,u,d=[],h=[],p,g=[],v=[],b,_=[],x=[],S,E=[],C=[],k,R=[],j=[],O,L=[],z=[];return l=class{constructor(Y=mr(new Ue(st.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=Ki(this,d,0),this.extsize=(Ki(this,h),Ki(this,g,0)),this.nextents=(Ki(this,v),Ki(this,_,0)),this.projid=(Ki(this,x),Ki(this,E,0)),this.cowextsize=(Ki(this,C),Ki(this,R,0)),this.pad=(Ki(this,j),Ki(this,L,[])),Ki(this,z),this.extsize=Y.size,this.nextents=1,this.projid=Y.uid,this.cowextsize=Y.size;for(const F of Object.keys(Ii))Y.flags&Ii[F]&&F in Lv&&(this.xflags|=Lv[F])}},Ste(l,"fsxattr"),(()=>{const Y=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=_n).uint32.bind(e)],p=[(t=_n).uint32.bind(t)],b=[(n=_n).uint32.bind(n)],S=[(r=_n).uint32.bind(r)],k=[(a=_n).uint32.bind(a)],O=[_n.char(8)],ed(null,null,u,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:F=>"xflags"in F,get:F=>F.xflags,set:(F,K)=>{F.xflags=K}},metadata:Y},d,h),ed(null,null,p,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:F=>"extsize"in F,get:F=>F.extsize,set:(F,K)=>{F.extsize=K}},metadata:Y},g,v),ed(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:F=>"nextents"in F,get:F=>F.nextents,set:(F,K)=>{F.nextents=K}},metadata:Y},_,x),ed(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:F=>"projid"in F,get:F=>F.projid,set:(F,K)=>{F.projid=K}},metadata:Y},E,C),ed(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:F=>"cowextsize"in F,get:F=>F.cowextsize,set:(F,K)=>{F.cowextsize=K}},metadata:Y},R,j),ed(null,null,O,{kind:"field",name:"pad",static:!1,private:!1,access:{has:F=>"pad"in F,get:F=>F.pad,set:(F,K)=>{F.pad=K}},metadata:Y},L,z),ed(null,o={value:l},i,{kind:"class",name:l.name,metadata:Y},null,s),l=o.value,Y&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Y}),Ki(l,s)})(),l})();var Br;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Br||(Br={}));var Uo;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(Uo||(Uo={}));async function Ete(e,t,...n){e=fn(e);const{fs:r,path:a}=Fn(e,this);try{const i=new ua(await r.stat(a));switch(t){case Br.GetFlags:case Uo.GetFlags:return i.flags;case Br.SetFlags:case Uo.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Br.GetVersion:case Uo.GetVersion:return i.version;case Br.SetVersion:case Uo.SetVersion:i.version=n[0],await r.touch(a,i);return;case Br.Fiemap:break;case Br.GetXattr:return new MP(i);case Br.SetXattr:break;case Br.GetLabel:return r.label;case Br.SetLabel:r.label=n[0];return;case Br.GetUUID:return r.uuid;case Br.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw fr(i,{[a]:e})}throw new Ue(st.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function Cte(e,t,...n){e=fn(e);const{fs:r,path:a}=Fn(e,this);try{const i=new ua(r.statSync(a));switch(t){case Br.GetFlags:case Uo.GetFlags:return i.flags;case Br.SetFlags:case Uo.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Br.GetVersion:case Uo.GetVersion:return i.version;case Br.SetVersion:case Uo.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Br.Fiemap:break;case Br.GetXattr:return new MP(i);case Br.SetXattr:break;case Br.GetLabel:return r.label;case Br.SetLabel:r.label=n[0];return;case Br.GetUUID:return r.uuid;case Br.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw fr(i,{[a]:e})}throw new Ue(st.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const kte=[];function Yh(e,t,n,r){if(!t.startsWith("user.")&&!kte.includes(t))throw new Ue(st.EPERM,"Only attributes in the user namespace are supported",n,r)}async function Ate(e,t,n={}){var r;e=fn(e);const{fs:a,path:i}=Fn(e,this);Yh(this,t,e,"xattr.get");try{const o=await a.stat(i);if(Sa&&!dr(this,o,xa))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new cu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const l=Dr.from(s.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(o){throw fr(o,{[i]:e})}}function Tte(e,t,n={}){var r;e=fn(e),Yh(this,t,e,"xattr.get");const{fs:a,path:i}=Fn(e,this);try{const o=a.statSync(i);if(Sa&&!dr(this,o,xa))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new cu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const l=Dr.from(s.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(o){throw fr(o,{[i]:e})}}async function Nte(e,t,n,r={}){var a;e=fn(e);const{fs:i,path:o}=Fn(e,this);Yh(this,t,e,"xattr.set");try{const s=await i.stat(o);if(Sa&&!dr(this,s,Qr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new cu);const l=s.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Dr.from(n)),await i.touch(o,Rd(s,"attributes"))}catch(s){throw fr(s,{[o]:e})}}function Rte(e,t,n,r={}){var a;e=fn(e);const{fs:i,path:o}=Fn(e,this);Yh(this,t,e,"xattr.set");try{const s=i.statSync(o);if(Sa&&!dr(this,s,Qr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new cu);const l=s.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Dr.from(n)),i.touchSync(o,Rd(s,"attributes"))}catch(s){throw fr(s,{[o]:e})}}async function Ite(e,t){var n;e=fn(e);const{fs:r,path:a}=Fn(e,this);Yh(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(Sa&&!dr(this,i,Qr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new cu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,Rd(i,"attributes"))}catch(i){throw fr(i,{[a]:e})}}function Ote(e,t){var n;e=fn(e);const{fs:r,path:a}=Fn(e,this);Yh(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(Sa&&!dr(this,i,Qr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new cu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,Rd(i,"attributes"))}catch(i){throw fr(i,{[a]:e})}}async function jte(e){e=fn(e);const{fs:t,path:n}=Fn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw fr(r,{[n]:e})}}function Dte(e){e=fn(e);const{fs:t,path:n}=Fn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw fr(r,{[n]:e})}}const Mte=Object.freeze(Object.defineProperty({__proto__:null,get:Ate,getSync:Tte,list:jte,listSync:Dte,remove:Ite,removeSync:Ote,set:Nte,setSync:Rte},Symbol.toStringTag,{value:"Module"})),za=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:RQ,Dir:Ok,Dirent:g0,get IOC(){return Br},get IOC32(){return Uo},ReadStream:Fk,Stats:Jl,StatsFs:NQ,WriteStream:Lk,access:ste,accessSync:hee,appendFile:Fee,appendFileSync:QQ,chmod:nte,chmodSync:uee,chown:ete,chownSync:lee,chroot:GQ,close:$ee,closeSync:Ld,constants:Z8,copyFile:mte,copyFileSync:uP,cp:vte,cpSync:dP,createReadStream:dte,createWriteStream:fte,exists:Nee,existsSync:Sk,fchmod:Gee,fchmodSync:Nk,fchown:Vee,fchownSync:Tk,fdatasync:Uee,fdatasyncSync:ree,fstat:Lee,fstatSync:eee,fsync:zee,fsyncSync:nee,ftruncate:Bee,ftruncateSync:tee,futimes:Wee,futimesSync:Rk,glob:xte,globSync:vee,ioctl:Ete,ioctlSync:Cte,lchmod:rte,lchmodSync:dee,lchown:tte,lchownSync:cee,link:Xee,linkSync:oee,lopenSync:Gw,lstat:Iee,lstatSync:Ek,lutimes:ite,lutimesSync:fee,mkdir:Zee,mkdirSync:Ik,mkdtemp:pte,mkdtempSync:pee,mount:xk,open:Dee,openAsBlob:_te,openSync:Vw,opendir:bte,opendirSync:yee,promises:kee,read:qee,readFile:Mee,readFileSync:kk,readSync:iee,readdir:Yee,readdirSync:Gh,readlink:Qee,readlinkSync:H2,readv:gte,readvSync:mee,realpath:ote,realpathSync:wu,rename:Tee,renameSync:XQ,rm:hte,rmSync:cP,rmdir:Kee,rmdirSync:sP,stat:Ree,statSync:uu,statfs:wte,statfsSync:bee,symlink:Jee,symlinkSync:see,truncate:Oee,truncateSync:JQ,umount:nP,unlink:jee,unlinkSync:Ck,unwatchFile:cte,utimes:ate,utimesSync:lP,watch:ute,watchFile:lte,write:Hee,writeFile:Pee,writeFileSync:Ak,writeSync:aee,writev:yte,writevSync:gee,xattr:Mte},Symbol.toStringTag,{value:"Module"}));function y4(e){return L8(e)||yk(e)||e instanceof _k}async function PP(e,t=0){if(typeof e!="object"||e==null)throw Ri(new Ue(st.EINVAL,"Invalid options on mount configuration"));if(!y4(e))throw Ri(new Ue(st.EINVAL,"Invalid mount configuration"));if(e instanceof _k)return await e.ready(),e;yk(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&y4(i)){if(F8("Resolving nested mount configuration: "+a),t>10)throw Ri(new Ue(st.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await PP(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw Ri(new Ue(st.EPERM,"Backend not available: "+n.name));fQ(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function Pte(e){if(!L8(e))throw new TypeError("Invalid single mount point configuration");const t=await PP(e);nP("/"),xk("/",t)}const Fte=["delete"];Math.max(...Fte.map(e=>e.length));dQ("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const FP=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;FP[e]=t}function Lte(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^FP[(t^e[n])&255];return(t^4294967295)>>>0}var $r=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:d.get,set:d.set}:d[l],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(d.get=h),(h=o(_.set))&&(d.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),p=!0},kn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},qk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let b4=(()=>{var e,t,n,r;let a=[Id()],i,o=[],s,l,u=[],d=[],h,p=[],g=[],v,b=[],_=[],x,S=[],E=[];return s=class{constructor(){this.id=kn(this,u,0),this.offset_=(kn(this,d),kn(this,p,0)),this.offset=(kn(this,g),kn(this,b,0)),this.size=(kn(this,_),kn(this,S,0)),kn(this,E)}},qk(s,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=_n).uint32.bind(e)],h=[(t=_n).uint32.bind(t)],v=[(n=_n).uint32.bind(n)],x=[(r=_n).uint32.bind(r)],$r(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,R)=>{k.id=R}},metadata:C},u,d),$r(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,R)=>{k.offset_=R}},metadata:C},p,g),$r(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,R)=>{k.offset=R}},metadata:C},b,_),$r(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,R)=>{k.size=R}},metadata:C},S,E),$r(null,i={value:s},a,{kind:"class",name:s.name,metadata:C},null,o),s=i.value,C&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),kn(s,o)})(),s})();const v4=255;let td=(()=>{var e,t,n,r;let a=[Id()],i,o=[],s,l,u=[],d=[],h,p=[],g=[],v,b=[],_=[],x,S=[],E=[],C,k=[],R=[];var j=s=class{constructor(O=mr(new Ue(st.EINVAL,"Metadata block must be initialized with a superblock")),L=0){if(this.superblock=O,this.offset=L,this.checksum=kn(this,u,0),this.timestamp=(kn(this,d),kn(this,p,Date.now())),this.previous_offset_=(kn(this,g),kn(this,b,0)),this.previous_offset=(kn(this,_),kn(this,S,0)),this._previous=kn(this,E),this.entries=kn(this,k,Array.from({length:v4},()=>new b4)),kn(this,R),this.superblock=O,this.offset=L,!!L&&($w(this,O.store._buffer.subarray(L,L+zr(j))),!LP(this)))throw Bw(new Ue(st.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+L.toString(16)))}get previous(){var O;if(this.previous_offset)return(O=this._previous)!==null&&O!==void 0||(this._previous=new j(this.superblock,this.previous_offset)),this._previous}};return qk(s,"MetadataBlock"),(()=>{const O=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=_n).uint32.bind(e)],h=[(t=_n).uint32.bind(t)],v=[(n=_n).uint32.bind(n)],x=[(r=_n).uint32.bind(r)],C=[f0(b4,v4)],$r(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:L=>"checksum"in L,get:L=>L.checksum,set:(L,z)=>{L.checksum=z}},metadata:O},u,d),$r(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:L=>"timestamp"in L,get:L=>L.timestamp,set:(L,z)=>{L.timestamp=z}},metadata:O},p,g),$r(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:L=>"previous_offset_"in L,get:L=>L.previous_offset_,set:(L,z)=>{L.previous_offset_=z}},metadata:O},b,_),$r(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:L=>"previous_offset"in L,get:L=>L.previous_offset,set:(L,z)=>{L.previous_offset=z}},metadata:O},S,E),$r(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:L=>"entries"in L,get:L=>L.entries,set:(L,z)=>{L.entries=z}},metadata:O},k,R),$r(null,i={value:s},a,{kind:"class",name:s.name,metadata:O},null,o),j=s=i.value,O&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:O}),kn(s,o)})(),j=s})();const w4=2049864546;(()=>{var e,t,n,r,a,i,o,s,l,u,d;let h=[Id()],p,g=[],v,b,_=[],x=[],S,E=[],C=[],k,R=[],j=[],O,L=[],z=[],Y,F=[],K=[],q,fe=[],te=[],re,X=[],ae=[],U,ee=[],J=[],ue,be=[],_e=[],Pe,Ne=[],Re=[],Ce,Fe=[],Qe=[],Le,Ie=[],V=[],me,Ae=[],se=[];var ie=v=class{constructor(Q=mr(new Ue(st.EINVAL,"Super block must be initialized with a store"))){if(this.store=Q,this.checksum=kn(this,_,0),this.magic=(kn(this,x),kn(this,E,w4)),this.version=(kn(this,C),kn(this,R,1)),this.inode_format=(kn(this,j),kn(this,L,OQ)),this.flags=(kn(this,z),kn(this,F,0)),this.used_bytes=(kn(this,K),kn(this,fe,BigInt(0))),this.total_bytes=(kn(this,te),kn(this,X,BigInt(0))),this.uuid=(kn(this,ae),kn(this,ee,BigInt(0))),this.metadata_block_size=(kn(this,J),kn(this,be,zr(td))),this.metadata_offset_=(kn(this,_e),kn(this,Ne,0)),this.metadata_offset=(kn(this,Re),kn(this,Fe,0)),this.metadata=kn(this,Qe),this.label=kn(this,Ie,""),this._padding=(kn(this,V),kn(this,Ae,new Array(132).fill(0))),kn(this,se),this.store=Q,Q._view.getUint32(ZJ(ie,"magic"),!0)!=w4){ri("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new td(this),this.metadata.offset=zr(ie),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(zr(ie)+zr(td)),this.total_bytes=BigInt(Q._buffer.byteLength),Q._write(this),Q._write(this.metadata);return}if($w(this,Q._buffer.subarray(0,zr(ie))),!LP(this))throw Bw(new Ue(st.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new td(this,this.metadata_offset)}rotateMetadata(){const Q=new td(this);return Q.offset=Number(this.used_bytes),Q.previous_offset=this.metadata_offset,this.metadata=Q,this.metadata_offset=Q.offset,this.store._write(Q),this.used_bytes+=BigInt(zr(td)),this.store._write(this),Q}isUnused(Q,xe){if(!xe)return!0;if(Q+xe>this.total_bytes||Q<zr(ie))return!1;for(let Me=this.metadata;Me;Me=Me.previous){if(Q<Me.offset+zr(td)&&Q+xe>Me.offset)return!1;for(const Ee of Me.entries)if(Ee.offset&&(Q>=Ee.offset&&Q<Ee.offset+Ee.size||Q+xe>Ee.offset&&Q+xe<=Ee.offset+Ee.size||Q<=Ee.offset&&Q+xe>=Ee.offset+Ee.size))return!1}return!0}};return qk(v,"SuperBlock"),(()=>{const Q=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=_n).uint32.bind(e)],S=[(t=_n).uint32.bind(t)],k=[(n=_n).uint16.bind(n)],O=[(r=_n).uint16.bind(r)],Y=[(a=_n).uint32.bind(a)],q=[(i=_n).uint64.bind(i)],re=[(o=_n).uint64.bind(o)],U=[(s=_n).uint128.bind(s)],ue=[(l=_n).uint32.bind(l)],Pe=[(u=_n).uint32.bind(u)],Ce=[(d=_n).uint32.bind(d)],Le=[_n.char(64)],me=[_n.char(132)],$r(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Me)=>{xe.checksum=Me}},metadata:Q},_,x),$r(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Me)=>{xe.magic=Me}},metadata:Q},E,C),$r(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Me)=>{xe.version=Me}},metadata:Q},R,j),$r(null,null,O,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Me)=>{xe.inode_format=Me}},metadata:Q},L,z),$r(null,null,Y,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Me)=>{xe.flags=Me}},metadata:Q},F,K),$r(null,null,q,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Me)=>{xe.used_bytes=Me}},metadata:Q},fe,te),$r(null,null,re,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Me)=>{xe.total_bytes=Me}},metadata:Q},X,ae),$r(null,null,U,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Me)=>{xe.uuid=Me}},metadata:Q},ee,J),$r(null,null,ue,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Me)=>{xe.metadata_block_size=Me}},metadata:Q},be,_e),$r(null,null,Pe,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Me)=>{xe.metadata_offset_=Me}},metadata:Q},Ne,Re),$r(null,null,Ce,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Me)=>{xe.metadata_offset=Me}},metadata:Q},Fe,Qe),$r(null,null,Le,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Me)=>{xe.label=Me}},metadata:Q},Ie,V),$r(null,null,me,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Me)=>{xe._padding=Me}},metadata:Q},Ae,se),$r(null,p={value:v},h,{kind:"class",name:v.name,metadata:Q},null,g),ie=v=p.value,Q&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q}),kn(v,g)})(),ie=v})();function LP(e){const t=Ga(e),n=Lte(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=za;function $te(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function V2(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?st[$te(e)]:st.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function th(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(V2(e.error))}})}class Bte extends U2{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await th(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await th(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await th(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),th(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(V2(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(V2(this.tx.error)),this.tx.abort(),t}}async function zte(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(ri("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await th(n)}class Ute{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new Bte(t,this)}}const Hte={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await th(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await zte(e.storeName||"zenfs",e.idbFactory),n=new Ute(t),r=new Q8(n);if(e!=null&&e.disableAsyncCache)return gk("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},qte=Hte;function Eb(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var US={exports:{}},_4;function Vte(){return _4||(_4=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function o(u,d){if(!a[u]){if(!r[u]){var h=typeof Eb=="function"&&Eb;if(!d&&h)return h(u,!0);if(s)return s(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var g=a[u]={exports:{}};r[u][0].call(g.exports,function(v){var b=r[u][1][v];return o(b||v)},g,g.exports,n,r,a,i)}return a[u].exports}for(var s=typeof Eb=="function"&&Eb,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var u,d,h,p,g,v,b,_=[],x=0,S=l.length,E=S,C=i.getTypeOf(l)!=="string";x<l.length;)E=S-x,h=C?(u=l[x++],d=x<S?l[x++]:0,x<S?l[x++]:0):(u=l.charCodeAt(x++),d=x<S?l.charCodeAt(x++):0,x<S?l.charCodeAt(x++):0),p=u>>2,g=(3&u)<<4|d>>4,v=1<E?(15&d)<<2|h>>6:64,b=2<E?63&h:64,_.push(s.charAt(p)+s.charAt(g)+s.charAt(v)+s.charAt(b));return _.join("")},a.decode=function(l){var u,d,h,p,g,v,b=0,_=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&E--,l.charAt(l.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|E):new Array(0|E);b<l.length;)u=s.indexOf(l.charAt(b++))<<2|(p=s.indexOf(l.charAt(b++)))>>4,d=(15&p)<<4|(g=s.indexOf(l.charAt(b++)))>>2,h=(3&g)<<6|(v=s.indexOf(l.charAt(b++))),S[_++]=u,g!==64&&(S[_++]=d),v!==64&&(S[_++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,h,p,g,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=p,this.compression=g,this.compressedContent=v}u.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,p){return d.pipe(new s).pipe(new l("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l}();r.exports=function(s,l){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(u,d,h,p){var g=o,v=p+h;u^=-1;for(var b=p;b<v;b++)u=u>>>8^g[255&(u^d[b])];return-1^u}(0|l,s,s.length,0):function(u,d,h,p){var g=o,v=p+h;u^=-1;for(var b=p;b<v;b++)u=u>>>8^g[255&(u^d.charCodeAt(b))];return-1^u}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(h,p){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}a.magic="\b\0",s.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(u,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var b,_="";for(b=0;b<v;b++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,v,b,_,x,S){var E,C,k=g.file,R=g.compression,j=S!==u.utf8encode,O=s.transformTo("string",S(k.name)),L=s.transformTo("string",u.utf8encode(k.name)),z=k.comment,Y=s.transformTo("string",S(z)),F=s.transformTo("string",u.utf8encode(z)),K=L.length!==k.name.length,q=F.length!==z.length,fe="",te="",re="",X=k.dir,ae=k.date,U={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(U.crc32=g.crc32,U.compressedSize=g.compressedSize,U.uncompressedSize=g.uncompressedSize);var ee=0;v&&(ee|=8),j||!K&&!q||(ee|=2048);var J=0,ue=0;X&&(J|=16),x==="UNIX"?(ue=798,J|=function(_e,Pe){var Ne=_e;return _e||(Ne=Pe?16893:33204),(65535&Ne)<<16}(k.unixPermissions,X)):(ue=20,J|=function(_e){return 63&(_e||0)}(k.dosPermissions)),E=ae.getUTCHours(),E<<=6,E|=ae.getUTCMinutes(),E<<=5,E|=ae.getUTCSeconds()/2,C=ae.getUTCFullYear()-1980,C<<=4,C|=ae.getUTCMonth()+1,C<<=5,C|=ae.getUTCDate(),K&&(te=i(1,1)+i(d(O),4)+L,fe+="up"+i(te.length,2)+te),q&&(re=i(1,1)+i(d(Y),4)+F,fe+="uc"+i(re.length,2)+re);var be="";return be+=`
\0`,be+=i(ee,2),be+=R.magic,be+=i(E,2),be+=i(C,2),be+=i(U.crc32,4),be+=i(U.compressedSize,4),be+=i(U.uncompressedSize,4),be+=i(O.length,2),be+=i(fe.length,2),{fileRecord:h.LOCAL_FILE_HEADER+be+O+fe,dirRecord:h.CENTRAL_FILE_HEADER+i(ue,2)+be+i(Y.length,2)+"\0\0\0\0"+i(J,4)+i(_,4)+O+fe+Y}}var s=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),h=n("../signature");function p(g,v,b,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(p,l),p.prototype.push=function(g){var v=g.meta.percent||0,b=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,l.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-_-1))/b:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var b=o(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,b=o(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(_){return h.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-g,_=function(x,S,E,C,k){var R=s.transformTo("string",k(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(S,4)+i(E,4)+i(R.length,2)+R}(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(b){v.processChunk(b)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(b){v.error(b)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(g){var v=this._sources;if(!l.prototype.error.call(this,g))return!1;for(var b=0;b<v.length;b++)try{v[b].error(g)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(s,l,u){var d=new o(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{s.forEach(function(p,g){h++;var v=function(S,E){var C=S||E,k=i[C];if(!k)throw new Error(C+" is not a valid compression method !");return k}(g.options.compression,l.compression),b=g.options.compressionOptions||l.compressionOptions||{},_=g.dir,x=g.date;g._compressWorker(v,b).withStreamInfo("file",{name:p,dir:_,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),s=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(p){return new o.Promise(function(g,v){var b=p.decompressed.getContentWorker().pipe(new u);b.on("error",function(_){v(_)}).on("end",function(){b.streamInfo.crc32!==p.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(p,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),d.isNode&&d.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,g.optimizedBinaryString,g.base64).then(function(b){var _=new l(g);return _.load(b),_}).then(function(b){var _=[o.Promise.resolve(b)],x=b.files;if(g.checkCRC32)for(var S=0;S<x.length;S++)_.push(h(x[S]));return o.Promise.all(_)}).then(function(b){for(var _=b.shift(),x=_.files,S=0;S<x.length;S++){var E=x[S],C=E.fileNameStr,k=i.resolve(E.fileNameStr);v.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(k).unsafeOriginalName=C)}return _.zipComment.length&&(v.comment=_.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function s(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(s,o),s.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(s,l,u){i.call(this,l),this._helper=s;var d=this;s.on("data",function(h,p){d.push(h)||d._helper.pause(),u&&u(p)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Yt<"u",newBufferFrom:function(i,o){if(Yt.from&&Yt.from!==Uint8Array.from)return Yt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Yt(i,o)},allocBuffer:function(i){if(Yt.alloc)return Yt.alloc(i);var o=new Yt(i);return o.fill(0),o},isBuffer:function(i){return Yt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,R,j){var O,L=s.getTypeOf(R),z=s.extend(j||{},d);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(k=x(k)),z.createFolders&&(O=_(k))&&S.call(this,O,!0);var Y=L==="string"&&z.binary===!1&&z.base64===!1;j&&j.binary!==void 0||(z.binary=!Y),(R instanceof h&&R.uncompressedSize===0||z.dir||!R||R.length===0)&&(z.base64=!1,z.binary=!0,R="",z.compression="STORE",L="string");var F=null;F=R instanceof h||R instanceof l?R:v.isNode&&v.isStream(R)?new b(k,R):s.prepareContent(k,R,z.binary,z.optimizedBinaryString,z.base64);var K=new p(k,F,z);this.files[k]=K}var o=n("./utf8"),s=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),_=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var R=k.lastIndexOf("/");return 0<R?k.substring(0,R):""},x=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},S=function(k,R){return R=R!==void 0?R:d.createFolders,k=x(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:R}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var R,j,O;for(R in this.files)O=this.files[R],(j=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&k(j,O)},filter:function(k){var R=[];return this.forEach(function(j,O){k(j,O)&&R.push(O)}),R},file:function(k,R,j){if(arguments.length!==1)return k=this.root+k,i.call(this,k,R,j),this;if(E(k)){var O=k;return this.filter(function(z,Y){return!Y.dir&&O.test(z)})}var L=this.files[this.root+k];return L&&!L.dir?L:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(L,z){return z.dir&&k.test(L)});var R=this.root+k,j=S.call(this,R),O=this.clone();return O.root=j.name,O},remove:function(k){k=this.root+k;var R=this.files[k];if(R||(k.slice(-1)!=="/"&&(k+="/"),R=this.files[k]),R&&!R.dir)delete this.files[k];else for(var j=this.filter(function(L,z){return z.name.slice(0,k.length)===k}),O=0;O<j.length;O++)delete this.files[j[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var R,j={};try{if((j=s.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");s.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var O=j.comment||this.comment||"";R=g.generateWorker(this,j,O)}catch(L){(R=new l("error")).error(L)}return new u(R,j.type||"string",j.mimeType)},generateAsync:function(k,R){return this.generateInternalStream(k).accumulate(R)},generateNodeStream:function(k,R){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(R)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),u=s.charCodeAt(1),d=s.charCodeAt(2),h=s.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===u&&this.data[p+2]===d&&this.data[p+3]===h)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),u=s.charCodeAt(1),d=s.charCodeAt(2),h=s.charCodeAt(3),p=this.readData(4);return l===p[0]&&u===p[1]&&d===p[2]&&h===p[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,u=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=s,u},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var p=i.getTypeOf(h);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(h):o.uint8array?new d(i.transformTo("uint8array",h)):new s(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function s(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(s,i),s.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(s,o),s.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(l){s.processChunk(l)}),o.on("end",function(){s.end()}),o.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(v,b){return new d.Promise(function(_,x){var S=[],E=v._internalType,C=v._outputType,k=v._mimeType;v.on("data",function(R,j){S.push(R),b&&b(j)}).on("error",function(R){S=[],x(R)}).on("end",function(){try{var R=function(j,O,L){switch(j){case"blob":return i.newBlob(i.transformTo("arraybuffer",O),L);case"base64":return l.encode(O);default:return i.transformTo(j,O)}}(C,function(j,O){var L,z=0,Y=null,F=0;for(L=0;L<O.length;L++)F+=O[L].length;switch(j){case"string":return O.join("");case"array":return Array.prototype.concat.apply([],O);case"uint8array":for(Y=new Uint8Array(F),L=0;L<O.length;L++)Y.set(O[L],z),z+=O[L].length;return Y;case"nodebuffer":return Yt.concat(O);default:throw new Error("concat : unsupported type '"+j+"'")}}(E,S),k);_(R)}catch(j){x(j)}S=[]}).resume()})}function g(v,b,_){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=_,i.checkSupport(x),this._worker=v.pipe(new o(x)),v.lock()}catch(S){this._worker=new s("error"),this._worker.error(S)}}g.prototype={accumulate:function(v){return p(this,v)},on:function(v,b){var _=this;return v==="data"?this._worker.on(v,function(x){b.call(_,x.data,x.meta)}):this._worker.on(v,function(){i.delay(b,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Yt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(v){var b,_,x,S,E,C=v.length,k=0;for(S=0;S<C;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),k+=_<128?1:_<2048?2:_<65536?3:4;for(b=o.uint8array?new Uint8Array(k):new Array(k),S=E=0;E<k;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),_<128?b[E++]=_:(_<2048?b[E++]=192|_>>>6:(_<65536?b[E++]=224|_>>>12:(b[E++]=240|_>>>18,b[E++]=128|_>>>12&63),b[E++]=128|_>>>6&63),b[E++]=128|63&_);return b}(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var b,_,x,S,E=v.length,C=new Array(2*E);for(b=_=0;b<E;)if((x=v[b++])<128)C[_++]=x;else if(4<(S=u[x]))C[_++]=65533,b+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&b<E;)x=x<<6|63&v[b++],S--;1<S?C[_++]=65533:x<65536?C[_++]=x:(x-=65536,C[_++]=55296|x>>10&1023,C[_++]=56320|1023&x)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),i.applyFromCharCode(C)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,l),h.prototype.processChunk=function(g){var v=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var _=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+u[S[C]]>E?C:E}(v),x=v;_!==v.length&&(o.uint8array?(x=v.subarray(0,_),this.leftOver=v.subarray(_,v.length)):(x=v.slice(0,_),this.leftOver=v.slice(_,v.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(p,l),p.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),l=n("./external");function u(b){return b}function d(b,_){for(var x=0;x<b.length;++x)_[x]=255&b.charCodeAt(x);return _}n("setimmediate"),a.newBlob=function(b,_){a.checkSupport("blob");try{return new Blob([b],{type:_})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,_,x){var S=[],E=0,C=b.length;if(C<=x)return String.fromCharCode.apply(null,b);for(;E<C;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+x,C)))):S.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+x,C)))),E+=x;return S.join("")},stringifyByChar:function(b){for(var _="",x=0;x<b.length;x++)_+=String.fromCharCode(b[x]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function p(b){var _=65536,x=a.getTypeOf(b),S=!0;if(x==="uint8array"?S=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return h.stringifyByChunk(b,x,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(b)}function g(b,_){for(var x=0;x<b.length;x++)_[x]=b[x];return _}a.applyFromCharCode=p;var v={};v.string={string:u,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,s.allocBuffer(b.length))}},v.array={string:p,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(b)}},v.arraybuffer={string:function(b){return p(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return s.newBufferFrom(b)}},v.nodebuffer={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:u},a.transformTo=function(b,_){if(_=_||"",!b)return _;a.checkSupport(b);var x=a.getTypeOf(_);return v[x][b](_)},a.resolve=function(b){for(var _=b.split("/"),x=[],S=0;S<_.length;S++){var E=_[S];E==="."||E===""&&S!==0&&S!==_.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var _,x,S="";for(x=0;x<(b||"").length;x++)S+="\\x"+((_=b.charCodeAt(x))<16?"0":"")+_.toString(16).toUpperCase();return S},a.delay=function(b,_,x){setImmediate(function(){b.apply(x||null,_||[])})},a.inherits=function(b,_){function x(){}x.prototype=_.prototype,b.prototype=new x},a.extend=function(){var b,_,x={};for(b=0;b<arguments.length;b++)for(_ in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],_)&&x[_]===void 0&&(x[_]=arguments[b][_]);return x},a.prepareContent=function(b,_,x,S,E){return l.Promise.resolve(_).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,R){var j=new FileReader;j.onload=function(O){k(O.target.result)},j.onerror=function(O){R(O.target.error)},j.readAsArrayBuffer(C)}):C}).then(function(C){var k=a.getTypeOf(C);return k?(k==="arraybuffer"?C=a.transformTo("uint8array",C):k==="string"&&(E?C=o.decode(C):x&&S!==!0&&(C=function(R){return d(R,i.uint8array?new Uint8Array(R.length):new Array(R.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(h)+")")}},isSignature:function(h,p){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===p;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",g=o.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),p=this.reader.readInt(4),g=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=p-g;if(0<v)this.isSignature(p,s.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),h=n("./support");function p(g,v){this.options=g,this.loadOptions=v}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(_){for(var x in d)if(Object.prototype.hasOwnProperty.call(d,x)&&d[x].magic===_)return d[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,b,_,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),b=g.readInt(2),_=g.readData(b),this.extraFields[v]={id:v,length:b,value:_};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var x=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,_){this.name=v,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=b,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,_="string";try{if(!v)throw new Error("No output type specified.");var x=(_=v.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(b=b.pipe(new l.Utf8EncodeWorker)),!S&&x&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(E){(b=new d("error")).error(E)}return new o(b,_,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(_,v,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,s,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,d=new l(v),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),o=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var p=new i.MessageChannel;p.port1.onmessage=v,o=function(){p.port2.postMessage(0)}}var g=[];function v(){var b,_;s=!0;for(var x=g.length;x;){for(_=g,g=[],b=-1;++b<x;)_[b]();x=g.length}s=!1}r.exports=function(b){g.push(b)!==1||s||o()}}).call(this,typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var s={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==o&&b(this,x)}function p(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,S,E){i(function(){var C;try{C=S(E)}catch(k){return s.reject(x,k)}C===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,C)})}function v(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function b(x,S){var E=!1;function C(j){E||(E=!0,s.reject(x,j))}function k(j){E||(E=!0,s.resolve(x,j))}var R=_(function(){S(k,C)});R.status==="error"&&C(R.value)}function _(x,S){var E={};try{E.value=x(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(x()).then(function(){return E})},function(E){return S.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,S){if(typeof x!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var E=new this.constructor(o);return this.state!==d?g(E,this.state===u?x:S,this.outcome):this.queue.push(new p(E,x,S)),E},p.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},p.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},p.prototype.callRejected=function(x){s.reject(this.promise,x)},p.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},s.resolve=function(x,S){var E=_(v,S);if(E.status==="error")return s.reject(x,E.value);var C=E.value;if(C)b(x,C);else{x.state=u,x.outcome=S;for(var k=-1,R=x.queue.length;++k<R;)x.queue[k].callFulfilled(S)}return x},s.reject=function(x,S){x.state=l,x.outcome=S;for(var E=-1,C=x.queue.length;++E<C;)x.queue[E].callRejected(S);return x},h.resolve=function(x){return x instanceof this?x:s.resolve(new this(o),x)},h.reject=function(x){var S=new this(o);return s.reject(S,x)},h.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=new Array(E),R=0,j=-1,O=new this(o);++j<E;)L(x[j],j);return O;function L(z,Y){S.resolve(z).then(function(F){k[Y]=F,++R!==E||C||(C=!0,s.resolve(O,k))},function(F){C||(C=!0,s.reject(O,F))})}},h.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=-1,R=new this(o);++k<E;)j=x[k],S.resolve(j).then(function(O){C||(C=!0,s.resolve(R,O))},function(O){C||(C=!0,s.reject(R,O))});var j;return R}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,h=0,p=-1,g=0,v=8;function b(x){if(!(this instanceof b))return new b(x);this.options=o.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(l[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?s.string2buf(S.dictionary):d.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(l[E]);this._dict_set=!0}}function _(x,S){var E=new b(S);if(E.push(x,!0),E.err)throw E.msg||l[E.err];return E.result}b.prototype.push=function(x,S){var E,C,k=this.strm,R=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof x=="string"?k.input=s.string2buf(x):d.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(R),k.next_out=0,k.avail_out=R),(E=i.deflate(k,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(k.output,k.next_out))):this.onData(o.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(k.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=b,a.deflate=_,a.deflateRaw=function(x,S){return(S=S||{}).raw=!0,_(x,S)},a.gzip=function(x,S){return(S=S||{}).gzip=!0,_(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},b||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||b&&b.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,_.windowBits);if(x!==l.Z_OK)throw new Error(u[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,_){var x=new g(_);if(x.push(b,!0),x.err)throw x.msg||u[x.err];return x.result}g.prototype.push=function(b,_){var x,S,E,C,k,R,j=this.strm,O=this.options.chunkSize,L=this.options.dictionary,z=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?j.input=s.binstring2buf(b):p.call(b)==="[object ArrayBuffer]"?j.input=new Uint8Array(b):j.input=b,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(O),j.next_out=0,j.avail_out=O),(x=i.inflate(j,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&L&&(R=typeof L=="string"?s.string2buf(L):p.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,x=i.inflateSetDictionary(this.strm,R)),x===l.Z_BUF_ERROR&&z===!0&&(x=l.Z_OK,z=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&x!==l.Z_STREAM_END&&(j.avail_in!==0||S!==l.Z_FINISH&&S!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(j.output,j.next_out),C=j.next_out-E,k=s.buf2string(j.output,E),j.next_out=C,j.avail_out=O-C,C&&o.arraySet(j.output,j.output,E,C,0),this.onData(k)):this.onData(o.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(z=!0)}while((0<j.avail_in||j.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(S=l.Z_FINISH),S===l.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):S!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(j.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(b,_){return(_=_||{}).raw=!0,v(b,_)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},a.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,d,h,p){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),p);else for(var g=0;g<h;g++)l[p+g]=u[d+g]},flattenChunks:function(l){var u,d,h,p,g,v;for(u=h=0,d=l.length;u<d;u++)h+=l[u].length;for(v=new Uint8Array(h),u=p=0,d=l.length;u<d;u++)g=l[u],v.set(g,p),p+=g.length;return v}},s={arraySet:function(l,u,d,h,p){for(var g=0;g<h;g++)l[p+g]=u[d+g]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,p){if(p<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,p));for(var g="",v=0;v<p;v++)g+=String.fromCharCode(h[v]);return g}l[254]=l[254]=1,a.string2buf=function(h){var p,g,v,b,_,x=h.length,S=0;for(b=0;b<x;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),S+=g<128?1:g<2048?2:g<65536?3:4;for(p=new i.Buf8(S),b=_=0;_<S;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),g<128?p[_++]=g:(g<2048?p[_++]=192|g>>>6:(g<65536?p[_++]=224|g>>>12:(p[_++]=240|g>>>18,p[_++]=128|g>>>12&63),p[_++]=128|g>>>6&63),p[_++]=128|63&g);return p},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var p=new i.Buf8(h.length),g=0,v=p.length;g<v;g++)p[g]=h.charCodeAt(g);return p},a.buf2string=function(h,p){var g,v,b,_,x=p||h.length,S=new Array(2*x);for(g=v=0;g<x;)if((b=h[g++])<128)S[v++]=b;else if(4<(_=l[b]))S[v++]=65533,g+=_-1;else{for(b&=_===2?31:_===3?15:7;1<_&&g<x;)b=b<<6|63&h[g++],_--;1<_?S[v++]=65533:b<65536?S[v++]=b:(b-=65536,S[v++]=55296|b>>10&1023,S[v++]=56320|1023&b)}return d(S,v)},a.utf8border=function(h,p){var g;for((p=p||h.length)>h.length&&(p=h.length),g=p-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?p:g+l[h[g]]>p?g:p}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,s,l){for(var u=65535&i|0,d=i>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;d=d+(u=u+o[l++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var o,s=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;s[l]=o}return s}();r.exports=function(o,s,l,u){var d=i,h=u+l;o^=-1;for(var p=u;p<h;p++)o=o>>>8^d[255&(o^s[p])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),s=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),h=0,p=4,g=0,v=-2,b=-1,_=4,x=2,S=8,E=9,C=286,k=30,R=19,j=2*C+1,O=15,L=3,z=258,Y=z+L+1,F=42,K=113,q=1,fe=2,te=3,re=4;function X(V,me){return V.msg=d[me],me}function ae(V){return(V<<1)-(4<V?9:0)}function U(V){for(var me=V.length;0<=--me;)V[me]=0}function ee(V){var me=V.state,Ae=me.pending;Ae>V.avail_out&&(Ae=V.avail_out),Ae!==0&&(o.arraySet(V.output,me.pending_buf,me.pending_out,Ae,V.next_out),V.next_out+=Ae,me.pending_out+=Ae,V.total_out+=Ae,V.avail_out-=Ae,me.pending-=Ae,me.pending===0&&(me.pending_out=0))}function J(V,me){s._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,me),V.block_start=V.strstart,ee(V.strm)}function ue(V,me){V.pending_buf[V.pending++]=me}function be(V,me){V.pending_buf[V.pending++]=me>>>8&255,V.pending_buf[V.pending++]=255&me}function _e(V,me){var Ae,se,ie=V.max_chain_length,Q=V.strstart,xe=V.prev_length,Me=V.nice_match,Ee=V.strstart>V.w_size-Y?V.strstart-(V.w_size-Y):0,We=V.window,kt=V.w_mask,at=V.prev,_t=V.strstart+z,Dt=We[Q+xe-1],jt=We[Q+xe];V.prev_length>=V.good_match&&(ie>>=2),Me>V.lookahead&&(Me=V.lookahead);do if(We[(Ae=me)+xe]===jt&&We[Ae+xe-1]===Dt&&We[Ae]===We[Q]&&We[++Ae]===We[Q+1]){Q+=2,Ae++;do;while(We[++Q]===We[++Ae]&&We[++Q]===We[++Ae]&&We[++Q]===We[++Ae]&&We[++Q]===We[++Ae]&&We[++Q]===We[++Ae]&&We[++Q]===We[++Ae]&&We[++Q]===We[++Ae]&&We[++Q]===We[++Ae]&&Q<_t);if(se=z-(_t-Q),Q=_t-z,xe<se){if(V.match_start=me,Me<=(xe=se))break;Dt=We[Q+xe-1],jt=We[Q+xe]}}while((me=at[me&kt])>Ee&&--ie!=0);return xe<=V.lookahead?xe:V.lookahead}function Pe(V){var me,Ae,se,ie,Q,xe,Me,Ee,We,kt,at=V.w_size;do{if(ie=V.window_size-V.lookahead-V.strstart,V.strstart>=at+(at-Y)){for(o.arraySet(V.window,V.window,at,at,0),V.match_start-=at,V.strstart-=at,V.block_start-=at,me=Ae=V.hash_size;se=V.head[--me],V.head[me]=at<=se?se-at:0,--Ae;);for(me=Ae=at;se=V.prev[--me],V.prev[me]=at<=se?se-at:0,--Ae;);ie+=at}if(V.strm.avail_in===0)break;if(xe=V.strm,Me=V.window,Ee=V.strstart+V.lookahead,We=ie,kt=void 0,kt=xe.avail_in,We<kt&&(kt=We),Ae=kt===0?0:(xe.avail_in-=kt,o.arraySet(Me,xe.input,xe.next_in,kt,Ee),xe.state.wrap===1?xe.adler=l(xe.adler,Me,kt,Ee):xe.state.wrap===2&&(xe.adler=u(xe.adler,Me,kt,Ee)),xe.next_in+=kt,xe.total_in+=kt,kt),V.lookahead+=Ae,V.lookahead+V.insert>=L)for(Q=V.strstart-V.insert,V.ins_h=V.window[Q],V.ins_h=(V.ins_h<<V.hash_shift^V.window[Q+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[Q+L-1])&V.hash_mask,V.prev[Q&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=Q,Q++,V.insert--,!(V.lookahead+V.insert<L)););}while(V.lookahead<Y&&V.strm.avail_in!==0)}function Ne(V,me){for(var Ae,se;;){if(V.lookahead<Y){if(Pe(V),V.lookahead<Y&&me===h)return q;if(V.lookahead===0)break}if(Ae=0,V.lookahead>=L&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+L-1])&V.hash_mask,Ae=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),Ae!==0&&V.strstart-Ae<=V.w_size-Y&&(V.match_length=_e(V,Ae)),V.match_length>=L)if(se=s._tr_tally(V,V.strstart-V.match_start,V.match_length-L),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=L){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+L-1])&V.hash_mask,Ae=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else se=s._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(se&&(J(V,!1),V.strm.avail_out===0))return q}return V.insert=V.strstart<L-1?V.strstart:L-1,me===p?(J(V,!0),V.strm.avail_out===0?te:re):V.last_lit&&(J(V,!1),V.strm.avail_out===0)?q:fe}function Re(V,me){for(var Ae,se,ie;;){if(V.lookahead<Y){if(Pe(V),V.lookahead<Y&&me===h)return q;if(V.lookahead===0)break}if(Ae=0,V.lookahead>=L&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+L-1])&V.hash_mask,Ae=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=L-1,Ae!==0&&V.prev_length<V.max_lazy_match&&V.strstart-Ae<=V.w_size-Y&&(V.match_length=_e(V,Ae),V.match_length<=5&&(V.strategy===1||V.match_length===L&&4096<V.strstart-V.match_start)&&(V.match_length=L-1)),V.prev_length>=L&&V.match_length<=V.prev_length){for(ie=V.strstart+V.lookahead-L,se=s._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-L),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=ie&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+L-1])&V.hash_mask,Ae=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=L-1,V.strstart++,se&&(J(V,!1),V.strm.avail_out===0))return q}else if(V.match_available){if((se=s._tr_tally(V,0,V.window[V.strstart-1]))&&J(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return q}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(se=s._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<L-1?V.strstart:L-1,me===p?(J(V,!0),V.strm.avail_out===0?te:re):V.last_lit&&(J(V,!1),V.strm.avail_out===0)?q:fe}function Ce(V,me,Ae,se,ie){this.good_length=V,this.max_lazy=me,this.nice_length=Ae,this.max_chain=se,this.func=ie}function Fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*j),this.dyn_dtree=new o.Buf16(2*(2*k+1)),this.bl_tree=new o.Buf16(2*(2*R+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(O+1),this.heap=new o.Buf16(2*C+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(V){var me;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=x,(me=V.state).pending=0,me.pending_out=0,me.wrap<0&&(me.wrap=-me.wrap),me.status=me.wrap?F:K,V.adler=me.wrap===2?0:1,me.last_flush=h,s._tr_init(me),g):X(V,v)}function Le(V){var me=Qe(V);return me===g&&function(Ae){Ae.window_size=2*Ae.w_size,U(Ae.head),Ae.max_lazy_match=i[Ae.level].max_lazy,Ae.good_match=i[Ae.level].good_length,Ae.nice_match=i[Ae.level].nice_length,Ae.max_chain_length=i[Ae.level].max_chain,Ae.strstart=0,Ae.block_start=0,Ae.lookahead=0,Ae.insert=0,Ae.match_length=Ae.prev_length=L-1,Ae.match_available=0,Ae.ins_h=0}(V.state),me}function Ie(V,me,Ae,se,ie,Q){if(!V)return v;var xe=1;if(me===b&&(me=6),se<0?(xe=0,se=-se):15<se&&(xe=2,se-=16),ie<1||E<ie||Ae!==S||se<8||15<se||me<0||9<me||Q<0||_<Q)return X(V,v);se===8&&(se=9);var Me=new Fe;return(V.state=Me).strm=V,Me.wrap=xe,Me.gzhead=null,Me.w_bits=se,Me.w_size=1<<Me.w_bits,Me.w_mask=Me.w_size-1,Me.hash_bits=ie+7,Me.hash_size=1<<Me.hash_bits,Me.hash_mask=Me.hash_size-1,Me.hash_shift=~~((Me.hash_bits+L-1)/L),Me.window=new o.Buf8(2*Me.w_size),Me.head=new o.Buf16(Me.hash_size),Me.prev=new o.Buf16(Me.w_size),Me.lit_bufsize=1<<ie+6,Me.pending_buf_size=4*Me.lit_bufsize,Me.pending_buf=new o.Buf8(Me.pending_buf_size),Me.d_buf=1*Me.lit_bufsize,Me.l_buf=3*Me.lit_bufsize,Me.level=me,Me.strategy=Q,Me.method=Ae,Le(V)}i=[new Ce(0,0,0,0,function(V,me){var Ae=65535;for(Ae>V.pending_buf_size-5&&(Ae=V.pending_buf_size-5);;){if(V.lookahead<=1){if(Pe(V),V.lookahead===0&&me===h)return q;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var se=V.block_start+Ae;if((V.strstart===0||V.strstart>=se)&&(V.lookahead=V.strstart-se,V.strstart=se,J(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-Y&&(J(V,!1),V.strm.avail_out===0))return q}return V.insert=0,me===p?(J(V,!0),V.strm.avail_out===0?te:re):(V.strstart>V.block_start&&(J(V,!1),V.strm.avail_out),q)}),new Ce(4,4,8,4,Ne),new Ce(4,5,16,8,Ne),new Ce(4,6,32,32,Ne),new Ce(4,4,16,16,Re),new Ce(8,16,32,32,Re),new Ce(8,16,128,128,Re),new Ce(8,32,128,256,Re),new Ce(32,128,258,1024,Re),new Ce(32,258,258,4096,Re)],a.deflateInit=function(V,me){return Ie(V,me,S,15,8,0)},a.deflateInit2=Ie,a.deflateReset=Le,a.deflateResetKeep=Qe,a.deflateSetHeader=function(V,me){return V&&V.state?V.state.wrap!==2?v:(V.state.gzhead=me,g):v},a.deflate=function(V,me){var Ae,se,ie,Q;if(!V||!V.state||5<me||me<0)return V?X(V,v):v;if(se=V.state,!V.output||!V.input&&V.avail_in!==0||se.status===666&&me!==p)return X(V,V.avail_out===0?-5:v);if(se.strm=V,Ae=se.last_flush,se.last_flush=me,se.status===F)if(se.wrap===2)V.adler=0,ue(se,31),ue(se,139),ue(se,8),se.gzhead?(ue(se,(se.gzhead.text?1:0)+(se.gzhead.hcrc?2:0)+(se.gzhead.extra?4:0)+(se.gzhead.name?8:0)+(se.gzhead.comment?16:0)),ue(se,255&se.gzhead.time),ue(se,se.gzhead.time>>8&255),ue(se,se.gzhead.time>>16&255),ue(se,se.gzhead.time>>24&255),ue(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),ue(se,255&se.gzhead.os),se.gzhead.extra&&se.gzhead.extra.length&&(ue(se,255&se.gzhead.extra.length),ue(se,se.gzhead.extra.length>>8&255)),se.gzhead.hcrc&&(V.adler=u(V.adler,se.pending_buf,se.pending,0)),se.gzindex=0,se.status=69):(ue(se,0),ue(se,0),ue(se,0),ue(se,0),ue(se,0),ue(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),ue(se,3),se.status=K);else{var xe=S+(se.w_bits-8<<4)<<8;xe|=(2<=se.strategy||se.level<2?0:se.level<6?1:se.level===6?2:3)<<6,se.strstart!==0&&(xe|=32),xe+=31-xe%31,se.status=K,be(se,xe),se.strstart!==0&&(be(se,V.adler>>>16),be(se,65535&V.adler)),V.adler=1}if(se.status===69)if(se.gzhead.extra){for(ie=se.pending;se.gzindex<(65535&se.gzhead.extra.length)&&(se.pending!==se.pending_buf_size||(se.gzhead.hcrc&&se.pending>ie&&(V.adler=u(V.adler,se.pending_buf,se.pending-ie,ie)),ee(V),ie=se.pending,se.pending!==se.pending_buf_size));)ue(se,255&se.gzhead.extra[se.gzindex]),se.gzindex++;se.gzhead.hcrc&&se.pending>ie&&(V.adler=u(V.adler,se.pending_buf,se.pending-ie,ie)),se.gzindex===se.gzhead.extra.length&&(se.gzindex=0,se.status=73)}else se.status=73;if(se.status===73)if(se.gzhead.name){ie=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ie&&(V.adler=u(V.adler,se.pending_buf,se.pending-ie,ie)),ee(V),ie=se.pending,se.pending===se.pending_buf_size)){Q=1;break}Q=se.gzindex<se.gzhead.name.length?255&se.gzhead.name.charCodeAt(se.gzindex++):0,ue(se,Q)}while(Q!==0);se.gzhead.hcrc&&se.pending>ie&&(V.adler=u(V.adler,se.pending_buf,se.pending-ie,ie)),Q===0&&(se.gzindex=0,se.status=91)}else se.status=91;if(se.status===91)if(se.gzhead.comment){ie=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ie&&(V.adler=u(V.adler,se.pending_buf,se.pending-ie,ie)),ee(V),ie=se.pending,se.pending===se.pending_buf_size)){Q=1;break}Q=se.gzindex<se.gzhead.comment.length?255&se.gzhead.comment.charCodeAt(se.gzindex++):0,ue(se,Q)}while(Q!==0);se.gzhead.hcrc&&se.pending>ie&&(V.adler=u(V.adler,se.pending_buf,se.pending-ie,ie)),Q===0&&(se.status=103)}else se.status=103;if(se.status===103&&(se.gzhead.hcrc?(se.pending+2>se.pending_buf_size&&ee(V),se.pending+2<=se.pending_buf_size&&(ue(se,255&V.adler),ue(se,V.adler>>8&255),V.adler=0,se.status=K)):se.status=K),se.pending!==0){if(ee(V),V.avail_out===0)return se.last_flush=-1,g}else if(V.avail_in===0&&ae(me)<=ae(Ae)&&me!==p)return X(V,-5);if(se.status===666&&V.avail_in!==0)return X(V,-5);if(V.avail_in!==0||se.lookahead!==0||me!==h&&se.status!==666){var Me=se.strategy===2?function(Ee,We){for(var kt;;){if(Ee.lookahead===0&&(Pe(Ee),Ee.lookahead===0)){if(We===h)return q;break}if(Ee.match_length=0,kt=s._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++,kt&&(J(Ee,!1),Ee.strm.avail_out===0))return q}return Ee.insert=0,We===p?(J(Ee,!0),Ee.strm.avail_out===0?te:re):Ee.last_lit&&(J(Ee,!1),Ee.strm.avail_out===0)?q:fe}(se,me):se.strategy===3?function(Ee,We){for(var kt,at,_t,Dt,jt=Ee.window;;){if(Ee.lookahead<=z){if(Pe(Ee),Ee.lookahead<=z&&We===h)return q;if(Ee.lookahead===0)break}if(Ee.match_length=0,Ee.lookahead>=L&&0<Ee.strstart&&(at=jt[_t=Ee.strstart-1])===jt[++_t]&&at===jt[++_t]&&at===jt[++_t]){Dt=Ee.strstart+z;do;while(at===jt[++_t]&&at===jt[++_t]&&at===jt[++_t]&&at===jt[++_t]&&at===jt[++_t]&&at===jt[++_t]&&at===jt[++_t]&&at===jt[++_t]&&_t<Dt);Ee.match_length=z-(Dt-_t),Ee.match_length>Ee.lookahead&&(Ee.match_length=Ee.lookahead)}if(Ee.match_length>=L?(kt=s._tr_tally(Ee,1,Ee.match_length-L),Ee.lookahead-=Ee.match_length,Ee.strstart+=Ee.match_length,Ee.match_length=0):(kt=s._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++),kt&&(J(Ee,!1),Ee.strm.avail_out===0))return q}return Ee.insert=0,We===p?(J(Ee,!0),Ee.strm.avail_out===0?te:re):Ee.last_lit&&(J(Ee,!1),Ee.strm.avail_out===0)?q:fe}(se,me):i[se.level].func(se,me);if(Me!==te&&Me!==re||(se.status=666),Me===q||Me===te)return V.avail_out===0&&(se.last_flush=-1),g;if(Me===fe&&(me===1?s._tr_align(se):me!==5&&(s._tr_stored_block(se,0,0,!1),me===3&&(U(se.head),se.lookahead===0&&(se.strstart=0,se.block_start=0,se.insert=0))),ee(V),V.avail_out===0))return se.last_flush=-1,g}return me!==p?g:se.wrap<=0?1:(se.wrap===2?(ue(se,255&V.adler),ue(se,V.adler>>8&255),ue(se,V.adler>>16&255),ue(se,V.adler>>24&255),ue(se,255&V.total_in),ue(se,V.total_in>>8&255),ue(se,V.total_in>>16&255),ue(se,V.total_in>>24&255)):(be(se,V.adler>>>16),be(se,65535&V.adler)),ee(V),0<se.wrap&&(se.wrap=-se.wrap),se.pending!==0?g:1)},a.deflateEnd=function(V){var me;return V&&V.state?(me=V.state.status)!==F&&me!==69&&me!==73&&me!==91&&me!==103&&me!==K&&me!==666?X(V,v):(V.state=null,me===K?X(V,-3):g):v},a.deflateSetDictionary=function(V,me){var Ae,se,ie,Q,xe,Me,Ee,We,kt=me.length;if(!V||!V.state||(Q=(Ae=V.state).wrap)===2||Q===1&&Ae.status!==F||Ae.lookahead)return v;for(Q===1&&(V.adler=l(V.adler,me,kt,0)),Ae.wrap=0,kt>=Ae.w_size&&(Q===0&&(U(Ae.head),Ae.strstart=0,Ae.block_start=0,Ae.insert=0),We=new o.Buf8(Ae.w_size),o.arraySet(We,me,kt-Ae.w_size,Ae.w_size,0),me=We,kt=Ae.w_size),xe=V.avail_in,Me=V.next_in,Ee=V.input,V.avail_in=kt,V.next_in=0,V.input=me,Pe(Ae);Ae.lookahead>=L;){for(se=Ae.strstart,ie=Ae.lookahead-(L-1);Ae.ins_h=(Ae.ins_h<<Ae.hash_shift^Ae.window[se+L-1])&Ae.hash_mask,Ae.prev[se&Ae.w_mask]=Ae.head[Ae.ins_h],Ae.head[Ae.ins_h]=se,se++,--ie;);Ae.strstart=se,Ae.lookahead=L-1,Pe(Ae)}return Ae.strstart+=Ae.lookahead,Ae.block_start=Ae.strstart,Ae.insert=Ae.lookahead,Ae.lookahead=0,Ae.match_length=Ae.prev_length=L-1,Ae.match_available=0,V.next_in=Me,V.input=Ee,V.avail_in=xe,Ae.wrap=Q,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var s,l,u,d,h,p,g,v,b,_,x,S,E,C,k,R,j,O,L,z,Y,F,K,q,fe;s=i.state,l=i.next_in,q=i.input,u=l+(i.avail_in-5),d=i.next_out,fe=i.output,h=d-(o-i.avail_out),p=d+(i.avail_out-257),g=s.dmax,v=s.wsize,b=s.whave,_=s.wnext,x=s.window,S=s.hold,E=s.bits,C=s.lencode,k=s.distcode,R=(1<<s.lenbits)-1,j=(1<<s.distbits)-1;e:do{E<15&&(S+=q[l++]<<E,E+=8,S+=q[l++]<<E,E+=8),O=C[S&R];t:for(;;){if(S>>>=L=O>>>24,E-=L,(L=O>>>16&255)===0)fe[d++]=65535&O;else{if(!(16&L)){if((64&L)==0){O=C[(65535&O)+(S&(1<<L)-1)];continue t}if(32&L){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}z=65535&O,(L&=15)&&(E<L&&(S+=q[l++]<<E,E+=8),z+=S&(1<<L)-1,S>>>=L,E-=L),E<15&&(S+=q[l++]<<E,E+=8,S+=q[l++]<<E,E+=8),O=k[S&j];n:for(;;){if(S>>>=L=O>>>24,E-=L,!(16&(L=O>>>16&255))){if((64&L)==0){O=k[(65535&O)+(S&(1<<L)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(Y=65535&O,E<(L&=15)&&(S+=q[l++]<<E,(E+=8)<L&&(S+=q[l++]<<E,E+=8)),g<(Y+=S&(1<<L)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(S>>>=L,E-=L,(L=d-h)<Y){if(b<(L=Y-L)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(K=x,(F=0)===_){if(F+=v-L,L<z){for(z-=L;fe[d++]=x[F++],--L;);F=d-Y,K=fe}}else if(_<L){if(F+=v+_-L,(L-=_)<z){for(z-=L;fe[d++]=x[F++],--L;);if(F=0,_<z){for(z-=L=_;fe[d++]=x[F++],--L;);F=d-Y,K=fe}}}else if(F+=_-L,L<z){for(z-=L;fe[d++]=x[F++],--L;);F=d-Y,K=fe}for(;2<z;)fe[d++]=K[F++],fe[d++]=K[F++],fe[d++]=K[F++],z-=3;z&&(fe[d++]=K[F++],1<z&&(fe[d++]=K[F++]))}else{for(F=d-Y;fe[d++]=fe[F++],fe[d++]=fe[F++],fe[d++]=fe[F++],2<(z-=3););z&&(fe[d++]=fe[F++],1<z&&(fe[d++]=fe[F++]))}break}}break}}while(l<u&&d<p);l-=z=E>>3,S&=(1<<(E-=z<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=d<p?p-d+257:257-(d-p),s.hold=S,s.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,h=2,p=0,g=-2,v=1,b=852,_=592;function x(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(F){var K;return F&&F.state?(K=F.state,F.total_in=F.total_out=K.total=0,F.msg="",K.wrap&&(F.adler=1&K.wrap),K.mode=v,K.last=0,K.havedict=0,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new i.Buf32(b),K.distcode=K.distdyn=new i.Buf32(_),K.sane=1,K.back=-1,p):g}function C(F){var K;return F&&F.state?((K=F.state).wsize=0,K.whave=0,K.wnext=0,E(F)):g}function k(F,K){var q,fe;return F&&F.state?(fe=F.state,K<0?(q=0,K=-K):(q=1+(K>>4),K<48&&(K&=15)),K&&(K<8||15<K)?g:(fe.window!==null&&fe.wbits!==K&&(fe.window=null),fe.wrap=q,fe.wbits=K,C(F))):g}function R(F,K){var q,fe;return F?(fe=new S,(F.state=fe).window=null,(q=k(F,K))!==p&&(F.state=null),q):g}var j,O,L=!0;function z(F){if(L){var K;for(j=new i.Buf32(512),O=new i.Buf32(32),K=0;K<144;)F.lens[K++]=8;for(;K<256;)F.lens[K++]=9;for(;K<280;)F.lens[K++]=7;for(;K<288;)F.lens[K++]=8;for(u(d,F.lens,0,288,j,0,F.work,{bits:9}),K=0;K<32;)F.lens[K++]=5;u(h,F.lens,0,32,O,0,F.work,{bits:5}),L=!1}F.lencode=j,F.lenbits=9,F.distcode=O,F.distbits=5}function Y(F,K,q,fe){var te,re=F.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new i.Buf8(re.wsize)),fe>=re.wsize?(i.arraySet(re.window,K,q-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(fe<(te=re.wsize-re.wnext)&&(te=fe),i.arraySet(re.window,K,q-fe,te,re.wnext),(fe-=te)?(i.arraySet(re.window,K,q-fe,fe,0),re.wnext=fe,re.whave=re.wsize):(re.wnext+=te,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=te))),0}a.inflateReset=C,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(F){return R(F,15)},a.inflateInit2=R,a.inflate=function(F,K){var q,fe,te,re,X,ae,U,ee,J,ue,be,_e,Pe,Ne,Re,Ce,Fe,Qe,Le,Ie,V,me,Ae,se,ie=0,Q=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return g;(q=F.state).mode===12&&(q.mode=13),X=F.next_out,te=F.output,U=F.avail_out,re=F.next_in,fe=F.input,ae=F.avail_in,ee=q.hold,J=q.bits,ue=ae,be=U,me=p;e:for(;;)switch(q.mode){case v:if(q.wrap===0){q.mode=13;break}for(;J<16;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}if(2&q.wrap&&ee===35615){Q[q.check=0]=255&ee,Q[1]=ee>>>8&255,q.check=s(q.check,Q,2,0),J=ee=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&ee)<<8)+(ee>>8))%31){F.msg="incorrect header check",q.mode=30;break}if((15&ee)!=8){F.msg="unknown compression method",q.mode=30;break}if(J-=4,V=8+(15&(ee>>>=4)),q.wbits===0)q.wbits=V;else if(V>q.wbits){F.msg="invalid window size",q.mode=30;break}q.dmax=1<<V,F.adler=q.check=1,q.mode=512&ee?10:12,J=ee=0;break;case 2:for(;J<16;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}if(q.flags=ee,(255&q.flags)!=8){F.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){F.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=ee>>8&1),512&q.flags&&(Q[0]=255&ee,Q[1]=ee>>>8&255,q.check=s(q.check,Q,2,0)),J=ee=0,q.mode=3;case 3:for(;J<32;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}q.head&&(q.head.time=ee),512&q.flags&&(Q[0]=255&ee,Q[1]=ee>>>8&255,Q[2]=ee>>>16&255,Q[3]=ee>>>24&255,q.check=s(q.check,Q,4,0)),J=ee=0,q.mode=4;case 4:for(;J<16;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}q.head&&(q.head.xflags=255&ee,q.head.os=ee>>8),512&q.flags&&(Q[0]=255&ee,Q[1]=ee>>>8&255,q.check=s(q.check,Q,2,0)),J=ee=0,q.mode=5;case 5:if(1024&q.flags){for(;J<16;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}q.length=ee,q.head&&(q.head.extra_len=ee),512&q.flags&&(Q[0]=255&ee,Q[1]=ee>>>8&255,q.check=s(q.check,Q,2,0)),J=ee=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(ae<(_e=q.length)&&(_e=ae),_e&&(q.head&&(V=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),i.arraySet(q.head.extra,fe,re,_e,V)),512&q.flags&&(q.check=s(q.check,fe,_e,re)),ae-=_e,re+=_e,q.length-=_e),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(ae===0)break e;for(_e=0;V=fe[re+_e++],q.head&&V&&q.length<65536&&(q.head.name+=String.fromCharCode(V)),V&&_e<ae;);if(512&q.flags&&(q.check=s(q.check,fe,_e,re)),ae-=_e,re+=_e,V)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(ae===0)break e;for(_e=0;V=fe[re+_e++],q.head&&V&&q.length<65536&&(q.head.comment+=String.fromCharCode(V)),V&&_e<ae;);if(512&q.flags&&(q.check=s(q.check,fe,_e,re)),ae-=_e,re+=_e,V)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;J<16;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}if(ee!==(65535&q.check)){F.msg="header crc mismatch",q.mode=30;break}J=ee=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),F.adler=q.check=0,q.mode=12;break;case 10:for(;J<32;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}F.adler=q.check=x(ee),J=ee=0,q.mode=11;case 11:if(q.havedict===0)return F.next_out=X,F.avail_out=U,F.next_in=re,F.avail_in=ae,q.hold=ee,q.bits=J,2;F.adler=q.check=1,q.mode=12;case 12:if(K===5||K===6)break e;case 13:if(q.last){ee>>>=7&J,J-=7&J,q.mode=27;break}for(;J<3;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}switch(q.last=1&ee,J-=1,3&(ee>>>=1)){case 0:q.mode=14;break;case 1:if(z(q),q.mode=20,K!==6)break;ee>>>=2,J-=2;break e;case 2:q.mode=17;break;case 3:F.msg="invalid block type",q.mode=30}ee>>>=2,J-=2;break;case 14:for(ee>>>=7&J,J-=7&J;J<32;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}if((65535&ee)!=(ee>>>16^65535)){F.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&ee,J=ee=0,q.mode=15,K===6)break e;case 15:q.mode=16;case 16:if(_e=q.length){if(ae<_e&&(_e=ae),U<_e&&(_e=U),_e===0)break e;i.arraySet(te,fe,re,_e,X),ae-=_e,re+=_e,U-=_e,X+=_e,q.length-=_e;break}q.mode=12;break;case 17:for(;J<14;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}if(q.nlen=257+(31&ee),ee>>>=5,J-=5,q.ndist=1+(31&ee),ee>>>=5,J-=5,q.ncode=4+(15&ee),ee>>>=4,J-=4,286<q.nlen||30<q.ndist){F.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;J<3;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}q.lens[xe[q.have++]]=7&ee,ee>>>=3,J-=3}for(;q.have<19;)q.lens[xe[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Ae={bits:q.lenbits},me=u(0,q.lens,0,19,q.lencode,0,q.work,Ae),q.lenbits=Ae.bits,me){F.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;Ce=(ie=q.lencode[ee&(1<<q.lenbits)-1])>>>16&255,Fe=65535&ie,!((Re=ie>>>24)<=J);){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}if(Fe<16)ee>>>=Re,J-=Re,q.lens[q.have++]=Fe;else{if(Fe===16){for(se=Re+2;J<se;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}if(ee>>>=Re,J-=Re,q.have===0){F.msg="invalid bit length repeat",q.mode=30;break}V=q.lens[q.have-1],_e=3+(3&ee),ee>>>=2,J-=2}else if(Fe===17){for(se=Re+3;J<se;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}J-=Re,V=0,_e=3+(7&(ee>>>=Re)),ee>>>=3,J-=3}else{for(se=Re+7;J<se;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}J-=Re,V=0,_e=11+(127&(ee>>>=Re)),ee>>>=7,J-=7}if(q.have+_e>q.nlen+q.ndist){F.msg="invalid bit length repeat",q.mode=30;break}for(;_e--;)q.lens[q.have++]=V}}if(q.mode===30)break;if(q.lens[256]===0){F.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,Ae={bits:q.lenbits},me=u(d,q.lens,0,q.nlen,q.lencode,0,q.work,Ae),q.lenbits=Ae.bits,me){F.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,Ae={bits:q.distbits},me=u(h,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Ae),q.distbits=Ae.bits,me){F.msg="invalid distances set",q.mode=30;break}if(q.mode=20,K===6)break e;case 20:q.mode=21;case 21:if(6<=ae&&258<=U){F.next_out=X,F.avail_out=U,F.next_in=re,F.avail_in=ae,q.hold=ee,q.bits=J,l(F,be),X=F.next_out,te=F.output,U=F.avail_out,re=F.next_in,fe=F.input,ae=F.avail_in,ee=q.hold,J=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;Ce=(ie=q.lencode[ee&(1<<q.lenbits)-1])>>>16&255,Fe=65535&ie,!((Re=ie>>>24)<=J);){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}if(Ce&&(240&Ce)==0){for(Qe=Re,Le=Ce,Ie=Fe;Ce=(ie=q.lencode[Ie+((ee&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Fe=65535&ie,!(Qe+(Re=ie>>>24)<=J);){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}ee>>>=Qe,J-=Qe,q.back+=Qe}if(ee>>>=Re,J-=Re,q.back+=Re,q.length=Fe,Ce===0){q.mode=26;break}if(32&Ce){q.back=-1,q.mode=12;break}if(64&Ce){F.msg="invalid literal/length code",q.mode=30;break}q.extra=15&Ce,q.mode=22;case 22:if(q.extra){for(se=q.extra;J<se;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}q.length+=ee&(1<<q.extra)-1,ee>>>=q.extra,J-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;Ce=(ie=q.distcode[ee&(1<<q.distbits)-1])>>>16&255,Fe=65535&ie,!((Re=ie>>>24)<=J);){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}if((240&Ce)==0){for(Qe=Re,Le=Ce,Ie=Fe;Ce=(ie=q.distcode[Ie+((ee&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Fe=65535&ie,!(Qe+(Re=ie>>>24)<=J);){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}ee>>>=Qe,J-=Qe,q.back+=Qe}if(ee>>>=Re,J-=Re,q.back+=Re,64&Ce){F.msg="invalid distance code",q.mode=30;break}q.offset=Fe,q.extra=15&Ce,q.mode=24;case 24:if(q.extra){for(se=q.extra;J<se;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}q.offset+=ee&(1<<q.extra)-1,ee>>>=q.extra,J-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){F.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(U===0)break e;if(_e=be-U,q.offset>_e){if((_e=q.offset-_e)>q.whave&&q.sane){F.msg="invalid distance too far back",q.mode=30;break}Pe=_e>q.wnext?(_e-=q.wnext,q.wsize-_e):q.wnext-_e,_e>q.length&&(_e=q.length),Ne=q.window}else Ne=te,Pe=X-q.offset,_e=q.length;for(U<_e&&(_e=U),U-=_e,q.length-=_e;te[X++]=Ne[Pe++],--_e;);q.length===0&&(q.mode=21);break;case 26:if(U===0)break e;te[X++]=q.length,U--,q.mode=21;break;case 27:if(q.wrap){for(;J<32;){if(ae===0)break e;ae--,ee|=fe[re++]<<J,J+=8}if(be-=U,F.total_out+=be,q.total+=be,be&&(F.adler=q.check=q.flags?s(q.check,te,be,X-be):o(q.check,te,be,X-be)),be=U,(q.flags?ee:x(ee))!==q.check){F.msg="incorrect data check",q.mode=30;break}J=ee=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;J<32;){if(ae===0)break e;ae--,ee+=fe[re++]<<J,J+=8}if(ee!==(4294967295&q.total)){F.msg="incorrect length check",q.mode=30;break}J=ee=0}q.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;case 32:default:return g}return F.next_out=X,F.avail_out=U,F.next_in=re,F.avail_in=ae,q.hold=ee,q.bits=J,(q.wsize||be!==F.avail_out&&q.mode<30&&(q.mode<27||K!==4))&&Y(F,F.output,F.next_out,be-F.avail_out)?(q.mode=31,-4):(ue-=F.avail_in,be-=F.avail_out,F.total_in+=ue,F.total_out+=be,q.total+=be,q.wrap&&be&&(F.adler=q.check=q.flags?s(q.check,te,be,F.next_out-be):o(q.check,te,be,F.next_out-be)),F.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(ue==0&&be===0||K===4)&&me===p&&(me=-5),me)},a.inflateEnd=function(F){if(!F||!F.state)return g;var K=F.state;return K.window&&(K.window=null),F.state=null,p},a.inflateGetHeader=function(F,K){var q;return F&&F.state?(2&(q=F.state).wrap)==0?g:((q.head=K).done=!1,p):g},a.inflateSetDictionary=function(F,K){var q,fe=K.length;return F&&F.state?(q=F.state).wrap!==0&&q.mode!==11?g:q.mode===11&&o(1,K,fe,0)!==q.check?-3:Y(F,K,fe,fe)?(q.mode=31,-4):(q.havedict=1,p):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,p,g,v,b,_,x){var S,E,C,k,R,j,O,L,z,Y=x.bits,F=0,K=0,q=0,fe=0,te=0,re=0,X=0,ae=0,U=0,ee=0,J=null,ue=0,be=new i.Buf16(16),_e=new i.Buf16(16),Pe=null,Ne=0;for(F=0;F<=15;F++)be[F]=0;for(K=0;K<g;K++)be[h[p+K]]++;for(te=Y,fe=15;1<=fe&&be[fe]===0;fe--);if(fe<te&&(te=fe),fe===0)return v[b++]=20971520,v[b++]=20971520,x.bits=1,0;for(q=1;q<fe&&be[q]===0;q++);for(te<q&&(te=q),F=ae=1;F<=15;F++)if(ae<<=1,(ae-=be[F])<0)return-1;if(0<ae&&(d===0||fe!==1))return-1;for(_e[1]=0,F=1;F<15;F++)_e[F+1]=_e[F]+be[F];for(K=0;K<g;K++)h[p+K]!==0&&(_[_e[h[p+K]]++]=K);if(j=d===0?(J=Pe=_,19):d===1?(J=o,ue-=257,Pe=s,Ne-=257,256):(J=l,Pe=u,-1),F=q,R=b,X=K=ee=0,C=-1,k=(U=1<<(re=te))-1,d===1&&852<U||d===2&&592<U)return 1;for(;;){for(O=F-X,z=_[K]<j?(L=0,_[K]):_[K]>j?(L=Pe[Ne+_[K]],J[ue+_[K]]):(L=96,0),S=1<<F-X,q=E=1<<re;v[R+(ee>>X)+(E-=S)]=O<<24|L<<16|z|0,E!==0;);for(S=1<<F-1;ee&S;)S>>=1;if(S!==0?(ee&=S-1,ee+=S):ee=0,K++,--be[F]==0){if(F===fe)break;F=h[p+_[K]]}if(te<F&&(ee&k)!==C){for(X===0&&(X=te),R+=q,ae=1<<(re=F-X);re+X<fe&&!((ae-=be[re+X])<=0);)re++,ae<<=1;if(U+=1<<re,d===1&&852<U||d===2&&592<U)return 1;v[C=ee&k]=te<<24|re<<16|R-b|0}}return ee!==0&&(v[R+ee]=F-X<<24|64<<16|0),x.bits=te,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,s=1;function l(ie){for(var Q=ie.length;0<=--Q;)ie[Q]=0}var u=0,d=29,h=256,p=h+1+d,g=30,v=19,b=2*p+1,_=15,x=16,S=7,E=256,C=16,k=17,R=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(p+2));l(Y);var F=new Array(2*g);l(F);var K=new Array(512);l(K);var q=new Array(256);l(q);var fe=new Array(d);l(fe);var te,re,X,ae=new Array(g);function U(ie,Q,xe,Me,Ee){this.static_tree=ie,this.extra_bits=Q,this.extra_base=xe,this.elems=Me,this.max_length=Ee,this.has_stree=ie&&ie.length}function ee(ie,Q){this.dyn_tree=ie,this.max_code=0,this.stat_desc=Q}function J(ie){return ie<256?K[ie]:K[256+(ie>>>7)]}function ue(ie,Q){ie.pending_buf[ie.pending++]=255&Q,ie.pending_buf[ie.pending++]=Q>>>8&255}function be(ie,Q,xe){ie.bi_valid>x-xe?(ie.bi_buf|=Q<<ie.bi_valid&65535,ue(ie,ie.bi_buf),ie.bi_buf=Q>>x-ie.bi_valid,ie.bi_valid+=xe-x):(ie.bi_buf|=Q<<ie.bi_valid&65535,ie.bi_valid+=xe)}function _e(ie,Q,xe){be(ie,xe[2*Q],xe[2*Q+1])}function Pe(ie,Q){for(var xe=0;xe|=1&ie,ie>>>=1,xe<<=1,0<--Q;);return xe>>>1}function Ne(ie,Q,xe){var Me,Ee,We=new Array(_+1),kt=0;for(Me=1;Me<=_;Me++)We[Me]=kt=kt+xe[Me-1]<<1;for(Ee=0;Ee<=Q;Ee++){var at=ie[2*Ee+1];at!==0&&(ie[2*Ee]=Pe(We[at]++,at))}}function Re(ie){var Q;for(Q=0;Q<p;Q++)ie.dyn_ltree[2*Q]=0;for(Q=0;Q<g;Q++)ie.dyn_dtree[2*Q]=0;for(Q=0;Q<v;Q++)ie.bl_tree[2*Q]=0;ie.dyn_ltree[2*E]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function Ce(ie){8<ie.bi_valid?ue(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function Fe(ie,Q,xe,Me){var Ee=2*Q,We=2*xe;return ie[Ee]<ie[We]||ie[Ee]===ie[We]&&Me[Q]<=Me[xe]}function Qe(ie,Q,xe){for(var Me=ie.heap[xe],Ee=xe<<1;Ee<=ie.heap_len&&(Ee<ie.heap_len&&Fe(Q,ie.heap[Ee+1],ie.heap[Ee],ie.depth)&&Ee++,!Fe(Q,Me,ie.heap[Ee],ie.depth));)ie.heap[xe]=ie.heap[Ee],xe=Ee,Ee<<=1;ie.heap[xe]=Me}function Le(ie,Q,xe){var Me,Ee,We,kt,at=0;if(ie.last_lit!==0)for(;Me=ie.pending_buf[ie.d_buf+2*at]<<8|ie.pending_buf[ie.d_buf+2*at+1],Ee=ie.pending_buf[ie.l_buf+at],at++,Me===0?_e(ie,Ee,Q):(_e(ie,(We=q[Ee])+h+1,Q),(kt=j[We])!==0&&be(ie,Ee-=fe[We],kt),_e(ie,We=J(--Me),xe),(kt=O[We])!==0&&be(ie,Me-=ae[We],kt)),at<ie.last_lit;);_e(ie,E,Q)}function Ie(ie,Q){var xe,Me,Ee,We=Q.dyn_tree,kt=Q.stat_desc.static_tree,at=Q.stat_desc.has_stree,_t=Q.stat_desc.elems,Dt=-1;for(ie.heap_len=0,ie.heap_max=b,xe=0;xe<_t;xe++)We[2*xe]!==0?(ie.heap[++ie.heap_len]=Dt=xe,ie.depth[xe]=0):We[2*xe+1]=0;for(;ie.heap_len<2;)We[2*(Ee=ie.heap[++ie.heap_len]=Dt<2?++Dt:0)]=1,ie.depth[Ee]=0,ie.opt_len--,at&&(ie.static_len-=kt[2*Ee+1]);for(Q.max_code=Dt,xe=ie.heap_len>>1;1<=xe;xe--)Qe(ie,We,xe);for(Ee=_t;xe=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],Qe(ie,We,1),Me=ie.heap[1],ie.heap[--ie.heap_max]=xe,ie.heap[--ie.heap_max]=Me,We[2*Ee]=We[2*xe]+We[2*Me],ie.depth[Ee]=(ie.depth[xe]>=ie.depth[Me]?ie.depth[xe]:ie.depth[Me])+1,We[2*xe+1]=We[2*Me+1]=Ee,ie.heap[1]=Ee++,Qe(ie,We,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],function(jt,Gt){var ye,I,G,de,Oe,ve,ke=Gt.dyn_tree,le=Gt.max_code,ft=Gt.stat_desc.static_tree,vt=Gt.stat_desc.has_stree,M=Gt.stat_desc.extra_bits,Be=Gt.stat_desc.extra_base,tt=Gt.stat_desc.max_length,ge=0;for(de=0;de<=_;de++)jt.bl_count[de]=0;for(ke[2*jt.heap[jt.heap_max]+1]=0,ye=jt.heap_max+1;ye<b;ye++)tt<(de=ke[2*ke[2*(I=jt.heap[ye])+1]+1]+1)&&(de=tt,ge++),ke[2*I+1]=de,le<I||(jt.bl_count[de]++,Oe=0,Be<=I&&(Oe=M[I-Be]),ve=ke[2*I],jt.opt_len+=ve*(de+Oe),vt&&(jt.static_len+=ve*(ft[2*I+1]+Oe)));if(ge!==0){do{for(de=tt-1;jt.bl_count[de]===0;)de--;jt.bl_count[de]--,jt.bl_count[de+1]+=2,jt.bl_count[tt]--,ge-=2}while(0<ge);for(de=tt;de!==0;de--)for(I=jt.bl_count[de];I!==0;)le<(G=jt.heap[--ye])||(ke[2*G+1]!==de&&(jt.opt_len+=(de-ke[2*G+1])*ke[2*G],ke[2*G+1]=de),I--)}}(ie,Q),Ne(We,Dt,ie.bl_count)}function V(ie,Q,xe){var Me,Ee,We=-1,kt=Q[1],at=0,_t=7,Dt=4;for(kt===0&&(_t=138,Dt=3),Q[2*(xe+1)+1]=65535,Me=0;Me<=xe;Me++)Ee=kt,kt=Q[2*(Me+1)+1],++at<_t&&Ee===kt||(at<Dt?ie.bl_tree[2*Ee]+=at:Ee!==0?(Ee!==We&&ie.bl_tree[2*Ee]++,ie.bl_tree[2*C]++):at<=10?ie.bl_tree[2*k]++:ie.bl_tree[2*R]++,We=Ee,Dt=(at=0)===kt?(_t=138,3):Ee===kt?(_t=6,3):(_t=7,4))}function me(ie,Q,xe){var Me,Ee,We=-1,kt=Q[1],at=0,_t=7,Dt=4;for(kt===0&&(_t=138,Dt=3),Me=0;Me<=xe;Me++)if(Ee=kt,kt=Q[2*(Me+1)+1],!(++at<_t&&Ee===kt)){if(at<Dt)for(;_e(ie,Ee,ie.bl_tree),--at!=0;);else Ee!==0?(Ee!==We&&(_e(ie,Ee,ie.bl_tree),at--),_e(ie,C,ie.bl_tree),be(ie,at-3,2)):at<=10?(_e(ie,k,ie.bl_tree),be(ie,at-3,3)):(_e(ie,R,ie.bl_tree),be(ie,at-11,7));We=Ee,Dt=(at=0)===kt?(_t=138,3):Ee===kt?(_t=6,3):(_t=7,4)}}l(ae);var Ae=!1;function se(ie,Q,xe,Me){be(ie,(u<<1)+(Me?1:0),3),function(Ee,We,kt,at){Ce(Ee),ue(Ee,kt),ue(Ee,~kt),i.arraySet(Ee.pending_buf,Ee.window,We,kt,Ee.pending),Ee.pending+=kt}(ie,Q,xe)}a._tr_init=function(ie){Ae||(function(){var Q,xe,Me,Ee,We,kt=new Array(_+1);for(Ee=Me=0;Ee<d-1;Ee++)for(fe[Ee]=Me,Q=0;Q<1<<j[Ee];Q++)q[Me++]=Ee;for(q[Me-1]=Ee,Ee=We=0;Ee<16;Ee++)for(ae[Ee]=We,Q=0;Q<1<<O[Ee];Q++)K[We++]=Ee;for(We>>=7;Ee<g;Ee++)for(ae[Ee]=We<<7,Q=0;Q<1<<O[Ee]-7;Q++)K[256+We++]=Ee;for(xe=0;xe<=_;xe++)kt[xe]=0;for(Q=0;Q<=143;)Y[2*Q+1]=8,Q++,kt[8]++;for(;Q<=255;)Y[2*Q+1]=9,Q++,kt[9]++;for(;Q<=279;)Y[2*Q+1]=7,Q++,kt[7]++;for(;Q<=287;)Y[2*Q+1]=8,Q++,kt[8]++;for(Ne(Y,p+1,kt),Q=0;Q<g;Q++)F[2*Q+1]=5,F[2*Q]=Pe(Q,5);te=new U(Y,j,h+1,p,_),re=new U(F,O,0,g,_),X=new U(new Array(0),L,0,v,S)}(),Ae=!0),ie.l_desc=new ee(ie.dyn_ltree,te),ie.d_desc=new ee(ie.dyn_dtree,re),ie.bl_desc=new ee(ie.bl_tree,X),ie.bi_buf=0,ie.bi_valid=0,Re(ie)},a._tr_stored_block=se,a._tr_flush_block=function(ie,Q,xe,Me){var Ee,We,kt=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=function(at){var _t,Dt=4093624447;for(_t=0;_t<=31;_t++,Dt>>>=1)if(1&Dt&&at.dyn_ltree[2*_t]!==0)return o;if(at.dyn_ltree[18]!==0||at.dyn_ltree[20]!==0||at.dyn_ltree[26]!==0)return s;for(_t=32;_t<h;_t++)if(at.dyn_ltree[2*_t]!==0)return s;return o}(ie)),Ie(ie,ie.l_desc),Ie(ie,ie.d_desc),kt=function(at){var _t;for(V(at,at.dyn_ltree,at.l_desc.max_code),V(at,at.dyn_dtree,at.d_desc.max_code),Ie(at,at.bl_desc),_t=v-1;3<=_t&&at.bl_tree[2*z[_t]+1]===0;_t--);return at.opt_len+=3*(_t+1)+5+5+4,_t}(ie),Ee=ie.opt_len+3+7>>>3,(We=ie.static_len+3+7>>>3)<=Ee&&(Ee=We)):Ee=We=xe+5,xe+4<=Ee&&Q!==-1?se(ie,Q,xe,Me):ie.strategy===4||We===Ee?(be(ie,2+(Me?1:0),3),Le(ie,Y,F)):(be(ie,4+(Me?1:0),3),function(at,_t,Dt,jt){var Gt;for(be(at,_t-257,5),be(at,Dt-1,5),be(at,jt-4,4),Gt=0;Gt<jt;Gt++)be(at,at.bl_tree[2*z[Gt]+1],3);me(at,at.dyn_ltree,_t-1),me(at,at.dyn_dtree,Dt-1)}(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,kt+1),Le(ie,ie.dyn_ltree,ie.dyn_dtree)),Re(ie),Me&&Ce(ie)},a._tr_tally=function(ie,Q,xe){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=Q>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&Q,ie.pending_buf[ie.l_buf+ie.last_lit]=255&xe,ie.last_lit++,Q===0?ie.dyn_ltree[2*xe]++:(ie.matches++,Q--,ie.dyn_ltree[2*(q[xe]+h+1)]++,ie.dyn_dtree[2*J(Q)]++),ie.last_lit===ie.lit_bufsize-1},a._tr_align=function(ie){be(ie,2,3),_e(ie,E,Y),function(Q){Q.bi_valid===16?(ue(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):8<=Q.bi_valid&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)}(ie)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,s){if(!o.setImmediate){var l,u,d,h,p=1,g={},v=!1,b=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,l={}.toString.call(o.process)==="[object process]"?function(C){Jr.nextTick(function(){S(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,k=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=k,C}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){d.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(C){var k=b.createElement("script");k.onreadystatechange=function(){S(C),k.onreadystatechange=null,u.removeChild(k),k=null},u.appendChild(k)}):function(C){setTimeout(S,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var k=new Array(arguments.length-1),R=0;R<k.length;R++)k[R]=arguments[R+1];var j={callback:C,args:k};return g[p]=j,l(p),p++},_.clearImmediate=x}function x(C){delete g[C]}function S(C){if(v)setTimeout(S,0,C);else{var k=g[C];if(k){v=!0;try{(function(R){var j=R.callback,O=R.args;switch(O.length){case 0:j();break;case 1:j(O[0]);break;case 2:j(O[0],O[1]);break;case 3:j(O[0],O[1],O[2]);break;default:j.apply(s,O)}})(k)}finally{x(C),v=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(US)),US.exports}var Gte=Vte();const $P=li(Gte),$v=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},Zn=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Gs=(...e)=>Zn(e.map(t=>t.trim()).filter(Boolean).join("/")),hg=e=>{const t=Zn(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},pa=e=>{const t=Zn(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},b0=(e,t)=>Zn(e==="/"?`/${t}`:`${e}/${t}`);var HS,x4;function Wte(){if(x4)return HS;x4=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Jr>"u"||typeof Jr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,o=null,s=null;typeof r!="function"&&(a=r,r=null,s=new this.Promise(function(E,C){i=E,o=C})),a=a||{};var l=!1,u=null,d=null,h=null,p=this,g=function(E,C,k){d&&(clearTimeout(d),d=null),h&&(clearTimeout(h),h=null),E&&(p.queues[t]&&p.queues[t].length===0&&delete p.queues[t],p.domainReentrant&&delete p.domains[t]),l||(s?C?o(C):i(k):typeof r=="function"&&r(C,k),l=!0),E&&p.queues[t]&&p.queues[t].length>0&&p.queues[t].shift()()},v=function(E){if(l)return g(E);u&&(clearTimeout(u),u=null),p.domainReentrant&&E&&(p.domains[t]=Jr.domain);var C=a.maxExecutionTime||p.maxExecutionTime;if(C&&(h=setTimeout(function(){p.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var k=!1;try{n(function(R,j){k||(k=!0,g(E,R,j))})}catch(R){k||(k=!0,g(E,R))}}else p._promiseTry(function(){return n()}).then(function(R){g(E,void 0,R)},function(R){g(E,R)})};p.domainReentrant&&Jr.domain&&(v=Jr.domain.bind(v));var b=a.maxPending||p.maxPending;if(!p.queues[t])p.queues[t]=[],v(!0);else if(p.domainReentrant&&Jr.domain&&Jr.domain===p.domains[t])v(!1);else if(p.queues[t].length>=b)g(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){v(!0)};a.skipQueue?p.queues[t].unshift(_):p.queues[t].push(_);var x=a.timeout||p.timeout;x&&(u=setTimeout(function(){u=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var S=a.maxOccupationTime||p.maxOccupationTime;if(S&&(d=setTimeout(function(){p.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),s)return s},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,o=function(l,u){return function(d){i.acquire(l,u,d,a)}},s=t.reduceRight(function(l,u){return o(u,l)},n);if(typeof r=="function")s(r);else return new this.Promise(function(l,u){s.length===1?s(function(d,h){d?u(d):l(h)}):l(s())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},HS=e,HS}var qS,S4;function Kte(){return S4||(S4=1,qS=Wte()),qS}var Zte=Kte();const v0=li(Zte);var Cb={exports:{}},E4;function Yte(){return E4||(E4=1,typeof Object.create=="function"?Cb.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Cb.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Cb.exports}var VS,C4;function Xte(){if(C4)return VS;C4=1;var e=Dk().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,o=n.length,s=this._len,l=0;l<o;){for(var u=s%i,d=Math.min(o-l,i-u),h=0;h<d;h++)a[u+h]=n[l+h];s+=d,l+=d,s%i===0&&this._update(a)}return this._len+=o,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,o=(a-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},VS=t,VS}var GS,k4;function Jte(){if(k4)return GS;k4=1;var e=Yte(),t=Xte(),n=Dk().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(d){return d<<1|d>>>31}function s(d){return d<<5|d>>>27}function l(d){return d<<30|d>>>2}function u(d,h,p,g){return d===0?h&p|~h&g:d===2?h&p|h&g|p&g:h^p^g}return i.prototype._update=function(d){for(var h=this._w,p=this._a|0,g=this._b|0,v=this._c|0,b=this._d|0,_=this._e|0,x=0;x<16;++x)h[x]=d.readInt32BE(x*4);for(;x<80;++x)h[x]=o(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=s(p)+u(E,g,v,b)+_+h[S]+r[E]|0;_=b,b=v,v=l(g),g=p,p=C}this._a=p+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=_+this._e|0},i.prototype._hash=function(){var d=n.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},GS=i,GS}var Qte=Jte();const BP=li(Qte);var WS,A4;function ene(){if(A4)return WS;A4=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",s=0,l=-1,u=0,d,h=0;h<=a.length;++h){if(h<a.length)d=a.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(l===h-1||u===1))if(l!==h-1&&u===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var p=o.lastIndexOf("/");if(p!==o.length-1){p===-1?(o="",s=0):(o=o.slice(0,p),s=o.length-1-o.lastIndexOf("/")),l=h,u=0;continue}}else if(o.length===2||o.length===1){o="",s=0,l=h,u=0;continue}}i&&(o.length>0?o+="/..":o="..",s=2)}else o.length>0?o+="/"+a.slice(l+1,h):o=a.slice(l+1,h),s=h-l-1;l=h,u=0}else d===46&&u!==-1?++u:u=-1}return o}function n(a,i){var o=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+s:o+a+s:s}var r={resolve:function(){for(var i="",o=!1,s,l=arguments.length-1;l>=-1&&!o;l--){var u;l>=0?u=arguments[l]:(s===void 0&&(s=Jr.cwd()),u=s),e(u),u.length!==0&&(i=u+"/"+i,o=u.charCodeAt(0)===47)}return i=t(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,s=i.charCodeAt(i.length-1)===47;return i=t(i,!o),i.length===0&&!o&&(i="."),i.length>0&&s&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var s=arguments[o];e(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i),o=r.resolve(o),i===o))return"";for(var s=1;s<i.length&&i.charCodeAt(s)===47;++s);for(var l=i.length,u=l-s,d=1;d<o.length&&o.charCodeAt(d)===47;++d);for(var h=o.length,p=h-d,g=u<p?u:p,v=-1,b=0;b<=g;++b){if(b===g){if(p>g){if(o.charCodeAt(d+b)===47)return o.slice(d+b+1);if(b===0)return o.slice(d+b)}else u>g&&(i.charCodeAt(s+b)===47?v=b:b===0&&(v=0));break}var _=i.charCodeAt(s+b),x=o.charCodeAt(d+b);if(_!==x)break;_===47&&(v=b)}var S="";for(b=s+v+1;b<=l;++b)(b===l||i.charCodeAt(b)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+o.slice(d+v):(d+=v,o.charCodeAt(d)===47&&++d,o.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),s=o===47,l=-1,u=!0,d=i.length-1;d>=1;--d)if(o=i.charCodeAt(d),o===47){if(!u){l=d;break}}else u=!1;return l===-1?s?"/":".":s&&l===1?"//":i.slice(0,l)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var s=0,l=-1,u=!0,d;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var h=o.length-1,p=-1;for(d=i.length-1;d>=0;--d){var g=i.charCodeAt(d);if(g===47){if(!u){s=d+1;break}}else p===-1&&(u=!1,p=d+1),h>=0&&(g===o.charCodeAt(h)?--h===-1&&(l=d):(h=-1,l=p))}return s===l?l=p:l===-1&&(l=i.length),i.slice(s,l)}else{for(d=i.length-1;d>=0;--d)if(i.charCodeAt(d)===47){if(!u){s=d+1;break}}else l===-1&&(u=!1,l=d+1);return l===-1?"":i.slice(s,l)}},extname:function(i){e(i);for(var o=-1,s=0,l=-1,u=!0,d=0,h=i.length-1;h>=0;--h){var p=i.charCodeAt(h);if(p===47){if(!u){s=h+1;break}continue}l===-1&&(u=!1,l=h+1),p===46?o===-1?o=h:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||l===-1||d===0||d===1&&o===l-1&&o===s+1?"":i.slice(o,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var s=i.charCodeAt(0),l=s===47,u;l?(o.root="/",u=1):u=0;for(var d=-1,h=0,p=-1,g=!0,v=i.length-1,b=0;v>=u;--v){if(s=i.charCodeAt(v),s===47){if(!g){h=v+1;break}continue}p===-1&&(g=!1,p=v+1),s===46?d===-1?d=v:b!==1&&(b=1):d!==-1&&(b=-1)}return d===-1||p===-1||b===0||b===1&&d===p-1&&d===h+1?p!==-1&&(h===0&&l?o.base=o.name=i.slice(1,p):o.base=o.name=i.slice(h,p)):(h===0&&l?(o.name=i.slice(1,d),o.base=i.slice(1,p)):(o.name=i.slice(h,d),o.base=i.slice(h,p)),o.ext=i.slice(d,p)),h>0?o.dir=i.slice(0,h-1):l&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,WS=r,WS}var Ot=ene(),KS={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var T4;function tne(){return T4||(T4=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var O=0,L=new Array(256),z=0;z!=256;++z)O=z,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,L[z]=O;return typeof Int32Array<"u"?new Int32Array(L):L}var r=n();function a(O){var L=0,z=0,Y=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Y=0;Y!=256;++Y)F[Y]=O[Y];for(Y=0;Y!=256;++Y)for(z=O[Y],L=256+Y;L<4096;L+=256)z=F[L]=z>>>8^O[z&255];var K=[];for(Y=1;Y!=16;++Y)K[Y-1]=typeof Int32Array<"u"?F.subarray(Y*256,Y*256+256):F.slice(Y*256,Y*256+256);return K}var i=a(r),o=i[0],s=i[1],l=i[2],u=i[3],d=i[4],h=i[5],p=i[6],g=i[7],v=i[8],b=i[9],_=i[10],x=i[11],S=i[12],E=i[13],C=i[14];function k(O,L){for(var z=L^-1,Y=0,F=O.length;Y<F;)z=z>>>8^r[(z^O.charCodeAt(Y++))&255];return~z}function R(O,L){for(var z=L^-1,Y=O.length-15,F=0;F<Y;)z=C[O[F++]^z&255]^E[O[F++]^z>>8&255]^S[O[F++]^z>>16&255]^x[O[F++]^z>>>24]^_[O[F++]]^b[O[F++]]^v[O[F++]]^g[O[F++]]^p[O[F++]]^h[O[F++]]^d[O[F++]]^u[O[F++]]^l[O[F++]]^s[O[F++]]^o[O[F++]]^r[O[F++]];for(Y+=15;F<Y;)z=z>>>8^r[(z^O[F++])&255];return~z}function j(O,L){for(var z=L^-1,Y=0,F=O.length,K=0,q=0;Y<F;)K=O.charCodeAt(Y++),K<128?z=z>>>8^r[(z^K)&255]:K<2048?(z=z>>>8^r[(z^(192|K>>6&31))&255],z=z>>>8^r[(z^(128|K&63))&255]):K>=55296&&K<57344?(K=(K&1023)+64,q=O.charCodeAt(Y++)&1023,z=z>>>8^r[(z^(240|K>>8&7))&255],z=z>>>8^r[(z^(128|K>>2&63))&255],z=z>>>8^r[(z^(128|q>>6&15|(K&3)<<4))&255],z=z>>>8^r[(z^(128|q&63))&255]):(z=z>>>8^r[(z^(224|K>>12&15))&255],z=z>>>8^r[(z^(128|K>>6&63))&255],z=z>>>8^r[(z^(128|K&63))&255]);return~z}t.table=r,t.bstr=k,t.buf=R,t.str=j})}(KS)),KS}var nne=tne();const rne=li(nne);var ZS={},N4;function Eu(){return N4||(N4=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}e.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var l in s)n(s,l)&&(i[l]=s[l])}}return i},e.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,s,l,u){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+l),u);return}for(var d=0;d<l;d++)i[u+d]=o[s+d]},flattenChunks:function(i){var o,s,l,u,d,h;for(l=0,o=0,s=i.length;o<s;o++)l+=i[o].length;for(h=new Uint8Array(l),u=0,o=0,s=i.length;o<s;o++)d=i[o],h.set(d,u),u+=d.length;return h}},a={arraySet:function(i,o,s,l,u){for(var d=0;d<l;d++)i[u+d]=o[s+d]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(ZS)),ZS}var Uf={},Po={},nd={},R4;function ane(){if(R4)return nd;R4=1;var e=Eu(),t=4,n=0,r=1,a=2;function i(I){for(var G=I.length;--G>=0;)I[G]=0}var o=0,s=1,l=2,u=3,d=258,h=29,p=256,g=p+1+h,v=30,b=19,_=2*g+1,x=15,S=16,E=7,C=256,k=16,R=17,j=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=512,K=new Array((g+2)*2);i(K);var q=new Array(v*2);i(q);var fe=new Array(F);i(fe);var te=new Array(d-u+1);i(te);var re=new Array(h);i(re);var X=new Array(v);i(X);function ae(I,G,de,Oe,ve){this.static_tree=I,this.extra_bits=G,this.extra_base=de,this.elems=Oe,this.max_length=ve,this.has_stree=I&&I.length}var U,ee,J;function ue(I,G){this.dyn_tree=I,this.max_code=0,this.stat_desc=G}function be(I){return I<256?fe[I]:fe[256+(I>>>7)]}function _e(I,G){I.pending_buf[I.pending++]=G&255,I.pending_buf[I.pending++]=G>>>8&255}function Pe(I,G,de){I.bi_valid>S-de?(I.bi_buf|=G<<I.bi_valid&65535,_e(I,I.bi_buf),I.bi_buf=G>>S-I.bi_valid,I.bi_valid+=de-S):(I.bi_buf|=G<<I.bi_valid&65535,I.bi_valid+=de)}function Ne(I,G,de){Pe(I,de[G*2],de[G*2+1])}function Re(I,G){var de=0;do de|=I&1,I>>>=1,de<<=1;while(--G>0);return de>>>1}function Ce(I){I.bi_valid===16?(_e(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):I.bi_valid>=8&&(I.pending_buf[I.pending++]=I.bi_buf&255,I.bi_buf>>=8,I.bi_valid-=8)}function Fe(I,G){var de=G.dyn_tree,Oe=G.max_code,ve=G.stat_desc.static_tree,ke=G.stat_desc.has_stree,le=G.stat_desc.extra_bits,ft=G.stat_desc.extra_base,vt=G.stat_desc.max_length,M,Be,tt,ge,je,Ke,Nt=0;for(ge=0;ge<=x;ge++)I.bl_count[ge]=0;for(de[I.heap[I.heap_max]*2+1]=0,M=I.heap_max+1;M<_;M++)Be=I.heap[M],ge=de[de[Be*2+1]*2+1]+1,ge>vt&&(ge=vt,Nt++),de[Be*2+1]=ge,!(Be>Oe)&&(I.bl_count[ge]++,je=0,Be>=ft&&(je=le[Be-ft]),Ke=de[Be*2],I.opt_len+=Ke*(ge+je),ke&&(I.static_len+=Ke*(ve[Be*2+1]+je)));if(Nt!==0){do{for(ge=vt-1;I.bl_count[ge]===0;)ge--;I.bl_count[ge]--,I.bl_count[ge+1]+=2,I.bl_count[vt]--,Nt-=2}while(Nt>0);for(ge=vt;ge!==0;ge--)for(Be=I.bl_count[ge];Be!==0;)tt=I.heap[--M],!(tt>Oe)&&(de[tt*2+1]!==ge&&(I.opt_len+=(ge-de[tt*2+1])*de[tt*2],de[tt*2+1]=ge),Be--)}}function Qe(I,G,de){var Oe=new Array(x+1),ve=0,ke,le;for(ke=1;ke<=x;ke++)Oe[ke]=ve=ve+de[ke-1]<<1;for(le=0;le<=G;le++){var ft=I[le*2+1];ft!==0&&(I[le*2]=Re(Oe[ft]++,ft))}}function Le(){var I,G,de,Oe,ve,ke=new Array(x+1);for(de=0,Oe=0;Oe<h-1;Oe++)for(re[Oe]=de,I=0;I<1<<O[Oe];I++)te[de++]=Oe;for(te[de-1]=Oe,ve=0,Oe=0;Oe<16;Oe++)for(X[Oe]=ve,I=0;I<1<<L[Oe];I++)fe[ve++]=Oe;for(ve>>=7;Oe<v;Oe++)for(X[Oe]=ve<<7,I=0;I<1<<L[Oe]-7;I++)fe[256+ve++]=Oe;for(G=0;G<=x;G++)ke[G]=0;for(I=0;I<=143;)K[I*2+1]=8,I++,ke[8]++;for(;I<=255;)K[I*2+1]=9,I++,ke[9]++;for(;I<=279;)K[I*2+1]=7,I++,ke[7]++;for(;I<=287;)K[I*2+1]=8,I++,ke[8]++;for(Qe(K,g+1,ke),I=0;I<v;I++)q[I*2+1]=5,q[I*2]=Re(I,5);U=new ae(K,O,p+1,g,x),ee=new ae(q,L,0,v,x),J=new ae(new Array(0),z,0,b,E)}function Ie(I){var G;for(G=0;G<g;G++)I.dyn_ltree[G*2]=0;for(G=0;G<v;G++)I.dyn_dtree[G*2]=0;for(G=0;G<b;G++)I.bl_tree[G*2]=0;I.dyn_ltree[C*2]=1,I.opt_len=I.static_len=0,I.last_lit=I.matches=0}function V(I){I.bi_valid>8?_e(I,I.bi_buf):I.bi_valid>0&&(I.pending_buf[I.pending++]=I.bi_buf),I.bi_buf=0,I.bi_valid=0}function me(I,G,de,Oe){V(I),_e(I,de),_e(I,~de),e.arraySet(I.pending_buf,I.window,G,de,I.pending),I.pending+=de}function Ae(I,G,de,Oe){var ve=G*2,ke=de*2;return I[ve]<I[ke]||I[ve]===I[ke]&&Oe[G]<=Oe[de]}function se(I,G,de){for(var Oe=I.heap[de],ve=de<<1;ve<=I.heap_len&&(ve<I.heap_len&&Ae(G,I.heap[ve+1],I.heap[ve],I.depth)&&ve++,!Ae(G,Oe,I.heap[ve],I.depth));)I.heap[de]=I.heap[ve],de=ve,ve<<=1;I.heap[de]=Oe}function ie(I,G,de){var Oe,ve,ke=0,le,ft;if(I.last_lit!==0)do Oe=I.pending_buf[I.d_buf+ke*2]<<8|I.pending_buf[I.d_buf+ke*2+1],ve=I.pending_buf[I.l_buf+ke],ke++,Oe===0?Ne(I,ve,G):(le=te[ve],Ne(I,le+p+1,G),ft=O[le],ft!==0&&(ve-=re[le],Pe(I,ve,ft)),Oe--,le=be(Oe),Ne(I,le,de),ft=L[le],ft!==0&&(Oe-=X[le],Pe(I,Oe,ft)));while(ke<I.last_lit);Ne(I,C,G)}function Q(I,G){var de=G.dyn_tree,Oe=G.stat_desc.static_tree,ve=G.stat_desc.has_stree,ke=G.stat_desc.elems,le,ft,vt=-1,M;for(I.heap_len=0,I.heap_max=_,le=0;le<ke;le++)de[le*2]!==0?(I.heap[++I.heap_len]=vt=le,I.depth[le]=0):de[le*2+1]=0;for(;I.heap_len<2;)M=I.heap[++I.heap_len]=vt<2?++vt:0,de[M*2]=1,I.depth[M]=0,I.opt_len--,ve&&(I.static_len-=Oe[M*2+1]);for(G.max_code=vt,le=I.heap_len>>1;le>=1;le--)se(I,de,le);M=ke;do le=I.heap[1],I.heap[1]=I.heap[I.heap_len--],se(I,de,1),ft=I.heap[1],I.heap[--I.heap_max]=le,I.heap[--I.heap_max]=ft,de[M*2]=de[le*2]+de[ft*2],I.depth[M]=(I.depth[le]>=I.depth[ft]?I.depth[le]:I.depth[ft])+1,de[le*2+1]=de[ft*2+1]=M,I.heap[1]=M++,se(I,de,1);while(I.heap_len>=2);I.heap[--I.heap_max]=I.heap[1],Fe(I,G),Qe(de,vt,I.bl_count)}function xe(I,G,de){var Oe,ve=-1,ke,le=G[0*2+1],ft=0,vt=7,M=4;for(le===0&&(vt=138,M=3),G[(de+1)*2+1]=65535,Oe=0;Oe<=de;Oe++)ke=le,le=G[(Oe+1)*2+1],!(++ft<vt&&ke===le)&&(ft<M?I.bl_tree[ke*2]+=ft:ke!==0?(ke!==ve&&I.bl_tree[ke*2]++,I.bl_tree[k*2]++):ft<=10?I.bl_tree[R*2]++:I.bl_tree[j*2]++,ft=0,ve=ke,le===0?(vt=138,M=3):ke===le?(vt=6,M=3):(vt=7,M=4))}function Me(I,G,de){var Oe,ve=-1,ke,le=G[0*2+1],ft=0,vt=7,M=4;for(le===0&&(vt=138,M=3),Oe=0;Oe<=de;Oe++)if(ke=le,le=G[(Oe+1)*2+1],!(++ft<vt&&ke===le)){if(ft<M)do Ne(I,ke,I.bl_tree);while(--ft!==0);else ke!==0?(ke!==ve&&(Ne(I,ke,I.bl_tree),ft--),Ne(I,k,I.bl_tree),Pe(I,ft-3,2)):ft<=10?(Ne(I,R,I.bl_tree),Pe(I,ft-3,3)):(Ne(I,j,I.bl_tree),Pe(I,ft-11,7));ft=0,ve=ke,le===0?(vt=138,M=3):ke===le?(vt=6,M=3):(vt=7,M=4)}}function Ee(I){var G;for(xe(I,I.dyn_ltree,I.l_desc.max_code),xe(I,I.dyn_dtree,I.d_desc.max_code),Q(I,I.bl_desc),G=b-1;G>=3&&I.bl_tree[Y[G]*2+1]===0;G--);return I.opt_len+=3*(G+1)+5+5+4,G}function We(I,G,de,Oe){var ve;for(Pe(I,G-257,5),Pe(I,de-1,5),Pe(I,Oe-4,4),ve=0;ve<Oe;ve++)Pe(I,I.bl_tree[Y[ve]*2+1],3);Me(I,I.dyn_ltree,G-1),Me(I,I.dyn_dtree,de-1)}function kt(I){var G=4093624447,de;for(de=0;de<=31;de++,G>>>=1)if(G&1&&I.dyn_ltree[de*2]!==0)return n;if(I.dyn_ltree[9*2]!==0||I.dyn_ltree[10*2]!==0||I.dyn_ltree[13*2]!==0)return r;for(de=32;de<p;de++)if(I.dyn_ltree[de*2]!==0)return r;return n}var at=!1;function _t(I){at||(Le(),at=!0),I.l_desc=new ue(I.dyn_ltree,U),I.d_desc=new ue(I.dyn_dtree,ee),I.bl_desc=new ue(I.bl_tree,J),I.bi_buf=0,I.bi_valid=0,Ie(I)}function Dt(I,G,de,Oe){Pe(I,(o<<1)+(Oe?1:0),3),me(I,G,de)}function jt(I){Pe(I,s<<1,3),Ne(I,C,K),Ce(I)}function Gt(I,G,de,Oe){var ve,ke,le=0;I.level>0?(I.strm.data_type===a&&(I.strm.data_type=kt(I)),Q(I,I.l_desc),Q(I,I.d_desc),le=Ee(I),ve=I.opt_len+3+7>>>3,ke=I.static_len+3+7>>>3,ke<=ve&&(ve=ke)):ve=ke=de+5,de+4<=ve&&G!==-1?Dt(I,G,de,Oe):I.strategy===t||ke===ve?(Pe(I,(s<<1)+(Oe?1:0),3),ie(I,K,q)):(Pe(I,(l<<1)+(Oe?1:0),3),We(I,I.l_desc.max_code+1,I.d_desc.max_code+1,le+1),ie(I,I.dyn_ltree,I.dyn_dtree)),Ie(I),Oe&&V(I)}function ye(I,G,de){return I.pending_buf[I.d_buf+I.last_lit*2]=G>>>8&255,I.pending_buf[I.d_buf+I.last_lit*2+1]=G&255,I.pending_buf[I.l_buf+I.last_lit]=de&255,I.last_lit++,G===0?I.dyn_ltree[de*2]++:(I.matches++,G--,I.dyn_ltree[(te[de]+p+1)*2]++,I.dyn_dtree[be(G)*2]++),I.last_lit===I.lit_bufsize-1}return nd._tr_init=_t,nd._tr_stored_block=Dt,nd._tr_flush_block=Gt,nd._tr_tally=ye,nd._tr_align=jt,nd}var YS,I4;function zP(){if(I4)return YS;I4=1;function e(t,n,r,a){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+n[a++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}return YS=e,YS}var XS,O4;function UP(){if(O4)return XS;O4=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,o){var s=t,l=o+i;r^=-1;for(var u=o;u<l;u++)r=r>>>8^s[(r^a[u])&255];return r^-1}return XS=n,XS}var JS,j4;function Vk(){return j4||(j4=1,JS={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),JS}var D4;function ine(){if(D4)return Po;D4=1;var e=Eu(),t=ane(),n=zP(),r=UP(),a=Vk(),i=0,o=1,s=3,l=4,u=5,d=0,h=1,p=-2,g=-3,v=-5,b=-1,_=1,x=2,S=3,E=4,C=0,k=2,R=8,j=9,O=15,L=8,z=29,Y=256,F=Y+1+z,K=30,q=19,fe=2*F+1,te=15,re=3,X=258,ae=X+re+1,U=32,ee=42,J=69,ue=73,be=91,_e=103,Pe=113,Ne=666,Re=1,Ce=2,Fe=3,Qe=4,Le=3;function Ie(M,Be){return M.msg=a[Be],Be}function V(M){return(M<<1)-(M>4?9:0)}function me(M){for(var Be=M.length;--Be>=0;)M[Be]=0}function Ae(M){var Be=M.state,tt=Be.pending;tt>M.avail_out&&(tt=M.avail_out),tt!==0&&(e.arraySet(M.output,Be.pending_buf,Be.pending_out,tt,M.next_out),M.next_out+=tt,Be.pending_out+=tt,M.total_out+=tt,M.avail_out-=tt,Be.pending-=tt,Be.pending===0&&(Be.pending_out=0))}function se(M,Be){t._tr_flush_block(M,M.block_start>=0?M.block_start:-1,M.strstart-M.block_start,Be),M.block_start=M.strstart,Ae(M.strm)}function ie(M,Be){M.pending_buf[M.pending++]=Be}function Q(M,Be){M.pending_buf[M.pending++]=Be>>>8&255,M.pending_buf[M.pending++]=Be&255}function xe(M,Be,tt,ge){var je=M.avail_in;return je>ge&&(je=ge),je===0?0:(M.avail_in-=je,e.arraySet(Be,M.input,M.next_in,je,tt),M.state.wrap===1?M.adler=n(M.adler,Be,je,tt):M.state.wrap===2&&(M.adler=r(M.adler,Be,je,tt)),M.next_in+=je,M.total_in+=je,je)}function Me(M,Be){var tt=M.max_chain_length,ge=M.strstart,je,Ke,Nt=M.prev_length,pe=M.nice_match,H=M.strstart>M.w_size-ae?M.strstart-(M.w_size-ae):0,B=M.window,W=M.w_mask,he=M.prev,Te=M.strstart+X,He=B[ge+Nt-1],pt=B[ge+Nt];M.prev_length>=M.good_match&&(tt>>=2),pe>M.lookahead&&(pe=M.lookahead);do if(je=Be,!(B[je+Nt]!==pt||B[je+Nt-1]!==He||B[je]!==B[ge]||B[++je]!==B[ge+1])){ge+=2,je++;do;while(B[++ge]===B[++je]&&B[++ge]===B[++je]&&B[++ge]===B[++je]&&B[++ge]===B[++je]&&B[++ge]===B[++je]&&B[++ge]===B[++je]&&B[++ge]===B[++je]&&B[++ge]===B[++je]&&ge<Te);if(Ke=X-(Te-ge),ge=Te-X,Ke>Nt){if(M.match_start=Be,Nt=Ke,Ke>=pe)break;He=B[ge+Nt-1],pt=B[ge+Nt]}}while((Be=he[Be&W])>H&&--tt!==0);return Nt<=M.lookahead?Nt:M.lookahead}function Ee(M){var Be=M.w_size,tt,ge,je,Ke,Nt;do{if(Ke=M.window_size-M.lookahead-M.strstart,M.strstart>=Be+(Be-ae)){e.arraySet(M.window,M.window,Be,Be,0),M.match_start-=Be,M.strstart-=Be,M.block_start-=Be,ge=M.hash_size,tt=ge;do je=M.head[--tt],M.head[tt]=je>=Be?je-Be:0;while(--ge);ge=Be,tt=ge;do je=M.prev[--tt],M.prev[tt]=je>=Be?je-Be:0;while(--ge);Ke+=Be}if(M.strm.avail_in===0)break;if(ge=xe(M.strm,M.window,M.strstart+M.lookahead,Ke),M.lookahead+=ge,M.lookahead+M.insert>=re)for(Nt=M.strstart-M.insert,M.ins_h=M.window[Nt],M.ins_h=(M.ins_h<<M.hash_shift^M.window[Nt+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[Nt+re-1])&M.hash_mask,M.prev[Nt&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=Nt,Nt++,M.insert--,!(M.lookahead+M.insert<re)););}while(M.lookahead<ae&&M.strm.avail_in!==0)}function We(M,Be){var tt=65535;for(tt>M.pending_buf_size-5&&(tt=M.pending_buf_size-5);;){if(M.lookahead<=1){if(Ee(M),M.lookahead===0&&Be===i)return Re;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var ge=M.block_start+tt;if((M.strstart===0||M.strstart>=ge)&&(M.lookahead=M.strstart-ge,M.strstart=ge,se(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-ae&&(se(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===l?(se(M,!0),M.strm.avail_out===0?Fe:Qe):(M.strstart>M.block_start&&(se(M,!1),M.strm.avail_out===0),Re)}function kt(M,Be){for(var tt,ge;;){if(M.lookahead<ae){if(Ee(M),M.lookahead<ae&&Be===i)return Re;if(M.lookahead===0)break}if(tt=0,M.lookahead>=re&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,tt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),tt!==0&&M.strstart-tt<=M.w_size-ae&&(M.match_length=Me(M,tt)),M.match_length>=re)if(ge=t._tr_tally(M,M.strstart-M.match_start,M.match_length-re),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=re){M.match_length--;do M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,tt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart;while(--M.match_length!==0);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else ge=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(ge&&(se(M,!1),M.strm.avail_out===0))return Re}return M.insert=M.strstart<re-1?M.strstart:re-1,Be===l?(se(M,!0),M.strm.avail_out===0?Fe:Qe):M.last_lit&&(se(M,!1),M.strm.avail_out===0)?Re:Ce}function at(M,Be){for(var tt,ge,je;;){if(M.lookahead<ae){if(Ee(M),M.lookahead<ae&&Be===i)return Re;if(M.lookahead===0)break}if(tt=0,M.lookahead>=re&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,tt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=re-1,tt!==0&&M.prev_length<M.max_lazy_match&&M.strstart-tt<=M.w_size-ae&&(M.match_length=Me(M,tt),M.match_length<=5&&(M.strategy===_||M.match_length===re&&M.strstart-M.match_start>4096)&&(M.match_length=re-1)),M.prev_length>=re&&M.match_length<=M.prev_length){je=M.strstart+M.lookahead-re,ge=t._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-re),M.lookahead-=M.prev_length-1,M.prev_length-=2;do++M.strstart<=je&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,tt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart);while(--M.prev_length!==0);if(M.match_available=0,M.match_length=re-1,M.strstart++,ge&&(se(M,!1),M.strm.avail_out===0))return Re}else if(M.match_available){if(ge=t._tr_tally(M,0,M.window[M.strstart-1]),ge&&se(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return Re}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(ge=t._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<re-1?M.strstart:re-1,Be===l?(se(M,!0),M.strm.avail_out===0?Fe:Qe):M.last_lit&&(se(M,!1),M.strm.avail_out===0)?Re:Ce}function _t(M,Be){for(var tt,ge,je,Ke,Nt=M.window;;){if(M.lookahead<=X){if(Ee(M),M.lookahead<=X&&Be===i)return Re;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=re&&M.strstart>0&&(je=M.strstart-1,ge=Nt[je],ge===Nt[++je]&&ge===Nt[++je]&&ge===Nt[++je])){Ke=M.strstart+X;do;while(ge===Nt[++je]&&ge===Nt[++je]&&ge===Nt[++je]&&ge===Nt[++je]&&ge===Nt[++je]&&ge===Nt[++je]&&ge===Nt[++je]&&ge===Nt[++je]&&je<Ke);M.match_length=X-(Ke-je),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=re?(tt=t._tr_tally(M,1,M.match_length-re),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(tt=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),tt&&(se(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===l?(se(M,!0),M.strm.avail_out===0?Fe:Qe):M.last_lit&&(se(M,!1),M.strm.avail_out===0)?Re:Ce}function Dt(M,Be){for(var tt;;){if(M.lookahead===0&&(Ee(M),M.lookahead===0)){if(Be===i)return Re;break}if(M.match_length=0,tt=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,tt&&(se(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===l?(se(M,!0),M.strm.avail_out===0?Fe:Qe):M.last_lit&&(se(M,!1),M.strm.avail_out===0)?Re:Ce}function jt(M,Be,tt,ge,je){this.good_length=M,this.max_lazy=Be,this.nice_length=tt,this.max_chain=ge,this.func=je}var Gt;Gt=[new jt(0,0,0,0,We),new jt(4,4,8,4,kt),new jt(4,5,16,8,kt),new jt(4,6,32,32,kt),new jt(4,4,16,16,at),new jt(8,16,32,32,at),new jt(8,16,128,128,at),new jt(8,32,128,256,at),new jt(32,128,258,1024,at),new jt(32,258,258,4096,at)];function ye(M){M.window_size=2*M.w_size,me(M.head),M.max_lazy_match=Gt[M.level].max_lazy,M.good_match=Gt[M.level].good_length,M.nice_match=Gt[M.level].nice_length,M.max_chain_length=Gt[M.level].max_chain,M.strstart=0,M.block_start=0,M.lookahead=0,M.insert=0,M.match_length=M.prev_length=re-1,M.match_available=0,M.ins_h=0}function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(fe*2),this.dyn_dtree=new e.Buf16((2*K+1)*2),this.bl_tree=new e.Buf16((2*q+1)*2),me(this.dyn_ltree),me(this.dyn_dtree),me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(te+1),this.heap=new e.Buf16(2*F+1),me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*F+1),me(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(M){var Be;return!M||!M.state?Ie(M,p):(M.total_in=M.total_out=0,M.data_type=k,Be=M.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?ee:Pe,M.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),d)}function de(M){var Be=G(M);return Be===d&&ye(M.state),Be}function Oe(M,Be){return!M||!M.state||M.state.wrap!==2?p:(M.state.gzhead=Be,d)}function ve(M,Be,tt,ge,je,Ke){if(!M)return p;var Nt=1;if(Be===b&&(Be=6),ge<0?(Nt=0,ge=-ge):ge>15&&(Nt=2,ge-=16),je<1||je>j||tt!==R||ge<8||ge>15||Be<0||Be>9||Ke<0||Ke>E)return Ie(M,p);ge===8&&(ge=9);var pe=new I;return M.state=pe,pe.strm=M,pe.wrap=Nt,pe.gzhead=null,pe.w_bits=ge,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=je+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+re-1)/re),pe.window=new e.Buf8(pe.w_size*2),pe.head=new e.Buf16(pe.hash_size),pe.prev=new e.Buf16(pe.w_size),pe.lit_bufsize=1<<je+6,pe.pending_buf_size=pe.lit_bufsize*4,pe.pending_buf=new e.Buf8(pe.pending_buf_size),pe.d_buf=1*pe.lit_bufsize,pe.l_buf=3*pe.lit_bufsize,pe.level=Be,pe.strategy=Ke,pe.method=tt,de(M)}function ke(M,Be){return ve(M,Be,R,O,L,C)}function le(M,Be){var tt,ge,je,Ke;if(!M||!M.state||Be>u||Be<0)return M?Ie(M,p):p;if(ge=M.state,!M.output||!M.input&&M.avail_in!==0||ge.status===Ne&&Be!==l)return Ie(M,M.avail_out===0?v:p);if(ge.strm=M,tt=ge.last_flush,ge.last_flush=Be,ge.status===ee)if(ge.wrap===2)M.adler=0,ie(ge,31),ie(ge,139),ie(ge,8),ge.gzhead?(ie(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),ie(ge,ge.gzhead.time&255),ie(ge,ge.gzhead.time>>8&255),ie(ge,ge.gzhead.time>>16&255),ie(ge,ge.gzhead.time>>24&255),ie(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),ie(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(ie(ge,ge.gzhead.extra.length&255),ie(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(M.adler=r(M.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=J):(ie(ge,0),ie(ge,0),ie(ge,0),ie(ge,0),ie(ge,0),ie(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),ie(ge,Le),ge.status=Pe);else{var Nt=R+(ge.w_bits-8<<4)<<8,pe=-1;ge.strategy>=x||ge.level<2?pe=0:ge.level<6?pe=1:ge.level===6?pe=2:pe=3,Nt|=pe<<6,ge.strstart!==0&&(Nt|=U),Nt+=31-Nt%31,ge.status=Pe,Q(ge,Nt),ge.strstart!==0&&(Q(ge,M.adler>>>16),Q(ge,M.adler&65535)),M.adler=1}if(ge.status===J)if(ge.gzhead.extra){for(je=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>je&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-je,je)),Ae(M),je=ge.pending,ge.pending===ge.pending_buf_size));)ie(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>je&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-je,je)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=ue)}else ge.status=ue;if(ge.status===ue)if(ge.gzhead.name){je=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>je&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-je,je)),Ae(M),je=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.name.length?Ke=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:Ke=0,ie(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>je&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-je,je)),Ke===0&&(ge.gzindex=0,ge.status=be)}else ge.status=be;if(ge.status===be)if(ge.gzhead.comment){je=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>je&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-je,je)),Ae(M),je=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.comment.length?Ke=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:Ke=0,ie(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>je&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-je,je)),Ke===0&&(ge.status=_e)}else ge.status=_e;if(ge.status===_e&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Ae(M),ge.pending+2<=ge.pending_buf_size&&(ie(ge,M.adler&255),ie(ge,M.adler>>8&255),M.adler=0,ge.status=Pe)):ge.status=Pe),ge.pending!==0){if(Ae(M),M.avail_out===0)return ge.last_flush=-1,d}else if(M.avail_in===0&&V(Be)<=V(tt)&&Be!==l)return Ie(M,v);if(ge.status===Ne&&M.avail_in!==0)return Ie(M,v);if(M.avail_in!==0||ge.lookahead!==0||Be!==i&&ge.status!==Ne){var H=ge.strategy===x?Dt(ge,Be):ge.strategy===S?_t(ge,Be):Gt[ge.level].func(ge,Be);if((H===Fe||H===Qe)&&(ge.status=Ne),H===Re||H===Fe)return M.avail_out===0&&(ge.last_flush=-1),d;if(H===Ce&&(Be===o?t._tr_align(ge):Be!==u&&(t._tr_stored_block(ge,0,0,!1),Be===s&&(me(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Ae(M),M.avail_out===0))return ge.last_flush=-1,d}return Be!==l?d:ge.wrap<=0?h:(ge.wrap===2?(ie(ge,M.adler&255),ie(ge,M.adler>>8&255),ie(ge,M.adler>>16&255),ie(ge,M.adler>>24&255),ie(ge,M.total_in&255),ie(ge,M.total_in>>8&255),ie(ge,M.total_in>>16&255),ie(ge,M.total_in>>24&255)):(Q(ge,M.adler>>>16),Q(ge,M.adler&65535)),Ae(M),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?d:h)}function ft(M){var Be;return!M||!M.state?p:(Be=M.state.status,Be!==ee&&Be!==J&&Be!==ue&&Be!==be&&Be!==_e&&Be!==Pe&&Be!==Ne?Ie(M,p):(M.state=null,Be===Pe?Ie(M,g):d))}function vt(M,Be){var tt=Be.length,ge,je,Ke,Nt,pe,H,B,W;if(!M||!M.state||(ge=M.state,Nt=ge.wrap,Nt===2||Nt===1&&ge.status!==ee||ge.lookahead))return p;for(Nt===1&&(M.adler=n(M.adler,Be,tt,0)),ge.wrap=0,tt>=ge.w_size&&(Nt===0&&(me(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),W=new e.Buf8(ge.w_size),e.arraySet(W,Be,tt-ge.w_size,ge.w_size,0),Be=W,tt=ge.w_size),pe=M.avail_in,H=M.next_in,B=M.input,M.avail_in=tt,M.next_in=0,M.input=Be,Ee(ge);ge.lookahead>=re;){je=ge.strstart,Ke=ge.lookahead-(re-1);do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[je+re-1])&ge.hash_mask,ge.prev[je&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=je,je++;while(--Ke);ge.strstart=je,ge.lookahead=re-1,Ee(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=re-1,ge.match_available=0,M.next_in=H,M.input=B,M.avail_in=pe,ge.wrap=Nt,d}return Po.deflateInit=ke,Po.deflateInit2=ve,Po.deflateReset=de,Po.deflateResetKeep=G,Po.deflateSetHeader=Oe,Po.deflate=le,Po.deflateEnd=ft,Po.deflateSetDictionary=vt,Po.deflateInfo="pako deflate (from Nodeca project)",Po}var rd={},M4;function HP(){if(M4)return rd;M4=1;var e=Eu(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,rd.string2buf=function(o){var s,l,u,d,h,p=o.length,g=0;for(d=0;d<p;d++)l=o.charCodeAt(d),(l&64512)===55296&&d+1<p&&(u=o.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),g+=l<128?1:l<2048?2:l<65536?3:4;for(s=new e.Buf8(g),h=0,d=0;h<g;d++)l=o.charCodeAt(d),(l&64512)===55296&&d+1<p&&(u=o.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),l<128?s[h++]=l:l<2048?(s[h++]=192|l>>>6,s[h++]=128|l&63):l<65536?(s[h++]=224|l>>>12,s[h++]=128|l>>>6&63,s[h++]=128|l&63):(s[h++]=240|l>>>18,s[h++]=128|l>>>12&63,s[h++]=128|l>>>6&63,s[h++]=128|l&63);return s};function i(o,s){if(s<65534&&(o.subarray&&n||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var l="",u=0;u<s;u++)l+=String.fromCharCode(o[u]);return l}return rd.buf2binstring=function(o){return i(o,o.length)},rd.binstring2buf=function(o){for(var s=new e.Buf8(o.length),l=0,u=s.length;l<u;l++)s[l]=o.charCodeAt(l);return s},rd.buf2string=function(o,s){var l,u,d,h,p=s||o.length,g=new Array(p*2);for(u=0,l=0;l<p;){if(d=o[l++],d<128){g[u++]=d;continue}if(h=r[d],h>4){g[u++]=65533,l+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&l<p;)d=d<<6|o[l++]&63,h--;if(h>1){g[u++]=65533;continue}d<65536?g[u++]=d:(d-=65536,g[u++]=55296|d>>10&1023,g[u++]=56320|d&1023)}return i(g,u)},rd.utf8border=function(o,s){var l;for(s=s||o.length,s>o.length&&(s=o.length),l=s-1;l>=0&&(o[l]&192)===128;)l--;return l<0||l===0?s:l+r[o[l]]>s?l:s},rd}var QS,P4;function qP(){if(P4)return QS;P4=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return QS=e,QS}var F4;function one(){if(F4)return Uf;F4=1;var e=ine(),t=Eu(),n=HP(),r=Vk(),a=qP(),i=Object.prototype.toString,o=0,s=4,l=0,u=1,d=2,h=-1,p=0,g=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==l)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,C=e.deflateSetDictionary(this.strm,k),C!==l)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(S,E){var C=this.strm,k=this.options.chunkSize,R,j;if(this.ended)return!1;j=E===~~E?E:E===!0?s:o,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(k),C.next_out=0,C.avail_out=k),R=e.deflate(C,j),R!==u&&R!==l)return this.onEnd(R),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(j===s||j===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&R!==u);return j===s?(R=e.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===l):(j===d&&(this.onEnd(l),C.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function b(S,E){var C=new v(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function _(S,E){return E=E||{},E.raw=!0,b(S,E)}function x(S,E){return E=E||{},E.gzip=!0,b(S,E)}return Uf.Deflate=v,Uf.deflate=b,Uf.deflateRaw=_,Uf.gzip=x,Uf}var Hf={},yo={},eE,L4;function sne(){if(L4)return eE;L4=1;var e=30,t=12;return eE=function(r,a){var i,o,s,l,u,d,h,p,g,v,b,_,x,S,E,C,k,R,j,O,L,z,Y,F,K;i=r.state,o=r.next_in,F=r.input,s=o+(r.avail_in-5),l=r.next_out,K=r.output,u=l-(a-r.avail_out),d=l+(r.avail_out-257),h=i.dmax,p=i.wsize,g=i.whave,v=i.wnext,b=i.window,_=i.hold,x=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{x<15&&(_+=F[o++]<<x,x+=8,_+=F[o++]<<x,x+=8),R=S[_&C];t:for(;;){if(j=R>>>24,_>>>=j,x-=j,j=R>>>16&255,j===0)K[l++]=R&65535;else if(j&16){O=R&65535,j&=15,j&&(x<j&&(_+=F[o++]<<x,x+=8),O+=_&(1<<j)-1,_>>>=j,x-=j),x<15&&(_+=F[o++]<<x,x+=8,_+=F[o++]<<x,x+=8),R=E[_&k];n:for(;;){if(j=R>>>24,_>>>=j,x-=j,j=R>>>16&255,j&16){if(L=R&65535,j&=15,x<j&&(_+=F[o++]<<x,x+=8,x<j&&(_+=F[o++]<<x,x+=8)),L+=_&(1<<j)-1,L>h){r.msg="invalid distance too far back",i.mode=e;break e}if(_>>>=j,x-=j,j=l-u,L>j){if(j=L-j,j>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(z=0,Y=b,v===0){if(z+=p-j,j<O){O-=j;do K[l++]=b[z++];while(--j);z=l-L,Y=K}}else if(v<j){if(z+=p+v-j,j-=v,j<O){O-=j;do K[l++]=b[z++];while(--j);if(z=0,v<O){j=v,O-=j;do K[l++]=b[z++];while(--j);z=l-L,Y=K}}}else if(z+=v-j,j<O){O-=j;do K[l++]=b[z++];while(--j);z=l-L,Y=K}for(;O>2;)K[l++]=Y[z++],K[l++]=Y[z++],K[l++]=Y[z++],O-=3;O&&(K[l++]=Y[z++],O>1&&(K[l++]=Y[z++]))}else{z=l-L;do K[l++]=K[z++],K[l++]=K[z++],K[l++]=K[z++],O-=3;while(O>2);O&&(K[l++]=K[z++],O>1&&(K[l++]=K[z++]))}}else if((j&64)===0){R=E[(R&65535)+(_&(1<<j)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((j&64)===0){R=S[(R&65535)+(_&(1<<j)-1)];continue t}else if(j&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(o<s&&l<d);O=x>>3,o-=O,x-=O<<3,_&=(1<<x)-1,r.next_in=o,r.next_out=l,r.avail_in=o<s?5+(s-o):5-(o-s),r.avail_out=l<d?257+(d-l):257-(l-d),i.hold=_,i.bits=x},eE}var tE,$4;function lne(){if($4)return tE;$4=1;var e=Eu(),t=15,n=852,r=592,a=0,i=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return tE=function(p,g,v,b,_,x,S,E){var C=E.bits,k=0,R=0,j=0,O=0,L=0,z=0,Y=0,F=0,K=0,q=0,fe,te,re,X,ae,U=null,ee=0,J,ue=new e.Buf16(t+1),be=new e.Buf16(t+1),_e=null,Pe=0,Ne,Re,Ce;for(k=0;k<=t;k++)ue[k]=0;for(R=0;R<b;R++)ue[g[v+R]]++;for(L=C,O=t;O>=1&&ue[O]===0;O--);if(L>O&&(L=O),O===0)return _[x++]=1<<24|64<<16|0,_[x++]=1<<24|64<<16|0,E.bits=1,0;for(j=1;j<O&&ue[j]===0;j++);for(L<j&&(L=j),F=1,k=1;k<=t;k++)if(F<<=1,F-=ue[k],F<0)return-1;if(F>0&&(p===a||O!==1))return-1;for(be[1]=0,k=1;k<t;k++)be[k+1]=be[k]+ue[k];for(R=0;R<b;R++)g[v+R]!==0&&(S[be[g[v+R]]++]=R);if(p===a?(U=_e=S,J=19):p===i?(U=s,ee-=257,_e=l,Pe-=257,J=256):(U=u,_e=d,J=-1),q=0,R=0,k=j,ae=x,z=L,Y=0,re=-1,K=1<<L,X=K-1,p===i&&K>n||p===o&&K>r)return 1;for(;;){Ne=k-Y,S[R]<J?(Re=0,Ce=S[R]):S[R]>J?(Re=_e[Pe+S[R]],Ce=U[ee+S[R]]):(Re=96,Ce=0),fe=1<<k-Y,te=1<<z,j=te;do te-=fe,_[ae+(q>>Y)+te]=Ne<<24|Re<<16|Ce|0;while(te!==0);for(fe=1<<k-1;q&fe;)fe>>=1;if(fe!==0?(q&=fe-1,q+=fe):q=0,R++,--ue[k]===0){if(k===O)break;k=g[v+S[R]]}if(k>L&&(q&X)!==re){for(Y===0&&(Y=L),ae+=j,z=k-Y,F=1<<z;z+Y<O&&(F-=ue[z+Y],!(F<=0));)z++,F<<=1;if(K+=1<<z,p===i&&K>n||p===o&&K>r)return 1;re=q&X,_[re]=L<<24|z<<16|ae-x|0}}return q!==0&&(_[ae+q]=k-Y<<24|64<<16|0),E.bits=L,0},tE}var B4;function cne(){if(B4)return yo;B4=1;var e=Eu(),t=zP(),n=UP(),r=sne(),a=lne(),i=0,o=1,s=2,l=4,u=5,d=6,h=0,p=1,g=2,v=-2,b=-3,_=-4,x=-5,S=8,E=1,C=2,k=3,R=4,j=5,O=6,L=7,z=8,Y=9,F=10,K=11,q=12,fe=13,te=14,re=15,X=16,ae=17,U=18,ee=19,J=20,ue=21,be=22,_e=23,Pe=24,Ne=25,Re=26,Ce=27,Fe=28,Qe=29,Le=30,Ie=31,V=32,me=852,Ae=592,se=15,ie=se;function Q(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Me(ve){var ke;return!ve||!ve.state?v:(ke=ve.state,ve.total_in=ve.total_out=ke.total=0,ve.msg="",ke.wrap&&(ve.adler=ke.wrap&1),ke.mode=E,ke.last=0,ke.havedict=0,ke.dmax=32768,ke.head=null,ke.hold=0,ke.bits=0,ke.lencode=ke.lendyn=new e.Buf32(me),ke.distcode=ke.distdyn=new e.Buf32(Ae),ke.sane=1,ke.back=-1,h)}function Ee(ve){var ke;return!ve||!ve.state?v:(ke=ve.state,ke.wsize=0,ke.whave=0,ke.wnext=0,Me(ve))}function We(ve,ke){var le,ft;return!ve||!ve.state||(ft=ve.state,ke<0?(le=0,ke=-ke):(le=(ke>>4)+1,ke<48&&(ke&=15)),ke&&(ke<8||ke>15))?v:(ft.window!==null&&ft.wbits!==ke&&(ft.window=null),ft.wrap=le,ft.wbits=ke,Ee(ve))}function kt(ve,ke){var le,ft;return ve?(ft=new xe,ve.state=ft,ft.window=null,le=We(ve,ke),le!==h&&(ve.state=null),le):v}function at(ve){return kt(ve,ie)}var _t=!0,Dt,jt;function Gt(ve){if(_t){var ke;for(Dt=new e.Buf32(512),jt=new e.Buf32(32),ke=0;ke<144;)ve.lens[ke++]=8;for(;ke<256;)ve.lens[ke++]=9;for(;ke<280;)ve.lens[ke++]=7;for(;ke<288;)ve.lens[ke++]=8;for(a(o,ve.lens,0,288,Dt,0,ve.work,{bits:9}),ke=0;ke<32;)ve.lens[ke++]=5;a(s,ve.lens,0,32,jt,0,ve.work,{bits:5}),_t=!1}ve.lencode=Dt,ve.lenbits=9,ve.distcode=jt,ve.distbits=5}function ye(ve,ke,le,ft){var vt,M=ve.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new e.Buf8(M.wsize)),ft>=M.wsize?(e.arraySet(M.window,ke,le-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(vt=M.wsize-M.wnext,vt>ft&&(vt=ft),e.arraySet(M.window,ke,le-ft,vt,M.wnext),ft-=vt,ft?(e.arraySet(M.window,ke,le-ft,ft,0),M.wnext=ft,M.whave=M.wsize):(M.wnext+=vt,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=vt))),0}function I(ve,ke){var le,ft,vt,M,Be,tt,ge,je,Ke,Nt,pe,H,B,W,he=0,Te,He,pt,Vt,ut,At,Mt,Xt,Tn=new e.Buf8(4),zn,br,vr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return v;le=ve.state,le.mode===q&&(le.mode=fe),Be=ve.next_out,vt=ve.output,ge=ve.avail_out,M=ve.next_in,ft=ve.input,tt=ve.avail_in,je=le.hold,Ke=le.bits,Nt=tt,pe=ge,Xt=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=fe;break}for(;Ke<16;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}if(le.wrap&2&&je===35615){le.check=0,Tn[0]=je&255,Tn[1]=je>>>8&255,le.check=n(le.check,Tn,2,0),je=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((je&255)<<8)+(je>>8))%31){ve.msg="incorrect header check",le.mode=Le;break}if((je&15)!==S){ve.msg="unknown compression method",le.mode=Le;break}if(je>>>=4,Ke-=4,Mt=(je&15)+8,le.wbits===0)le.wbits=Mt;else if(Mt>le.wbits){ve.msg="invalid window size",le.mode=Le;break}le.dmax=1<<Mt,ve.adler=le.check=1,le.mode=je&512?F:q,je=0,Ke=0;break;case C:for(;Ke<16;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}if(le.flags=je,(le.flags&255)!==S){ve.msg="unknown compression method",le.mode=Le;break}if(le.flags&57344){ve.msg="unknown header flags set",le.mode=Le;break}le.head&&(le.head.text=je>>8&1),le.flags&512&&(Tn[0]=je&255,Tn[1]=je>>>8&255,le.check=n(le.check,Tn,2,0)),je=0,Ke=0,le.mode=k;case k:for(;Ke<32;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}le.head&&(le.head.time=je),le.flags&512&&(Tn[0]=je&255,Tn[1]=je>>>8&255,Tn[2]=je>>>16&255,Tn[3]=je>>>24&255,le.check=n(le.check,Tn,4,0)),je=0,Ke=0,le.mode=R;case R:for(;Ke<16;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}le.head&&(le.head.xflags=je&255,le.head.os=je>>8),le.flags&512&&(Tn[0]=je&255,Tn[1]=je>>>8&255,le.check=n(le.check,Tn,2,0)),je=0,Ke=0,le.mode=j;case j:if(le.flags&1024){for(;Ke<16;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}le.length=je,le.head&&(le.head.extra_len=je),le.flags&512&&(Tn[0]=je&255,Tn[1]=je>>>8&255,le.check=n(le.check,Tn,2,0)),je=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=O;case O:if(le.flags&1024&&(H=le.length,H>tt&&(H=tt),H&&(le.head&&(Mt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ft,M,H,Mt)),le.flags&512&&(le.check=n(le.check,ft,H,M)),tt-=H,M+=H,le.length-=H),le.length))break e;le.length=0,le.mode=L;case L:if(le.flags&2048){if(tt===0)break e;H=0;do Mt=ft[M+H++],le.head&&Mt&&le.length<65536&&(le.head.name+=String.fromCharCode(Mt));while(Mt&&H<tt);if(le.flags&512&&(le.check=n(le.check,ft,H,M)),tt-=H,M+=H,Mt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=z;case z:if(le.flags&4096){if(tt===0)break e;H=0;do Mt=ft[M+H++],le.head&&Mt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Mt));while(Mt&&H<tt);if(le.flags&512&&(le.check=n(le.check,ft,H,M)),tt-=H,M+=H,Mt)break e}else le.head&&(le.head.comment=null);le.mode=Y;case Y:if(le.flags&512){for(;Ke<16;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}if(je!==(le.check&65535)){ve.msg="header crc mismatch",le.mode=Le;break}je=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),ve.adler=le.check=0,le.mode=q;break;case F:for(;Ke<32;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}ve.adler=le.check=Q(je),je=0,Ke=0,le.mode=K;case K:if(le.havedict===0)return ve.next_out=Be,ve.avail_out=ge,ve.next_in=M,ve.avail_in=tt,le.hold=je,le.bits=Ke,g;ve.adler=le.check=1,le.mode=q;case q:if(ke===u||ke===d)break e;case fe:if(le.last){je>>>=Ke&7,Ke-=Ke&7,le.mode=Ce;break}for(;Ke<3;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}switch(le.last=je&1,je>>>=1,Ke-=1,je&3){case 0:le.mode=te;break;case 1:if(Gt(le),le.mode=J,ke===d){je>>>=2,Ke-=2;break e}break;case 2:le.mode=ae;break;case 3:ve.msg="invalid block type",le.mode=Le}je>>>=2,Ke-=2;break;case te:for(je>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}if((je&65535)!==(je>>>16^65535)){ve.msg="invalid stored block lengths",le.mode=Le;break}if(le.length=je&65535,je=0,Ke=0,le.mode=re,ke===d)break e;case re:le.mode=X;case X:if(H=le.length,H){if(H>tt&&(H=tt),H>ge&&(H=ge),H===0)break e;e.arraySet(vt,ft,M,H,Be),tt-=H,M+=H,ge-=H,Be+=H,le.length-=H;break}le.mode=q;break;case ae:for(;Ke<14;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}if(le.nlen=(je&31)+257,je>>>=5,Ke-=5,le.ndist=(je&31)+1,je>>>=5,Ke-=5,le.ncode=(je&15)+4,je>>>=4,Ke-=4,le.nlen>286||le.ndist>30){ve.msg="too many length or distance symbols",le.mode=Le;break}le.have=0,le.mode=U;case U:for(;le.have<le.ncode;){for(;Ke<3;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}le.lens[vr[le.have++]]=je&7,je>>>=3,Ke-=3}for(;le.have<19;)le.lens[vr[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,zn={bits:le.lenbits},Xt=a(i,le.lens,0,19,le.lencode,0,le.work,zn),le.lenbits=zn.bits,Xt){ve.msg="invalid code lengths set",le.mode=Le;break}le.have=0,le.mode=ee;case ee:for(;le.have<le.nlen+le.ndist;){for(;he=le.lencode[je&(1<<le.lenbits)-1],Te=he>>>24,He=he>>>16&255,pt=he&65535,!(Te<=Ke);){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}if(pt<16)je>>>=Te,Ke-=Te,le.lens[le.have++]=pt;else{if(pt===16){for(br=Te+2;Ke<br;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}if(je>>>=Te,Ke-=Te,le.have===0){ve.msg="invalid bit length repeat",le.mode=Le;break}Mt=le.lens[le.have-1],H=3+(je&3),je>>>=2,Ke-=2}else if(pt===17){for(br=Te+3;Ke<br;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}je>>>=Te,Ke-=Te,Mt=0,H=3+(je&7),je>>>=3,Ke-=3}else{for(br=Te+7;Ke<br;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}je>>>=Te,Ke-=Te,Mt=0,H=11+(je&127),je>>>=7,Ke-=7}if(le.have+H>le.nlen+le.ndist){ve.msg="invalid bit length repeat",le.mode=Le;break}for(;H--;)le.lens[le.have++]=Mt}}if(le.mode===Le)break;if(le.lens[256]===0){ve.msg="invalid code -- missing end-of-block",le.mode=Le;break}if(le.lenbits=9,zn={bits:le.lenbits},Xt=a(o,le.lens,0,le.nlen,le.lencode,0,le.work,zn),le.lenbits=zn.bits,Xt){ve.msg="invalid literal/lengths set",le.mode=Le;break}if(le.distbits=6,le.distcode=le.distdyn,zn={bits:le.distbits},Xt=a(s,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,zn),le.distbits=zn.bits,Xt){ve.msg="invalid distances set",le.mode=Le;break}if(le.mode=J,ke===d)break e;case J:le.mode=ue;case ue:if(tt>=6&&ge>=258){ve.next_out=Be,ve.avail_out=ge,ve.next_in=M,ve.avail_in=tt,le.hold=je,le.bits=Ke,r(ve,pe),Be=ve.next_out,vt=ve.output,ge=ve.avail_out,M=ve.next_in,ft=ve.input,tt=ve.avail_in,je=le.hold,Ke=le.bits,le.mode===q&&(le.back=-1);break}for(le.back=0;he=le.lencode[je&(1<<le.lenbits)-1],Te=he>>>24,He=he>>>16&255,pt=he&65535,!(Te<=Ke);){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}if(He&&(He&240)===0){for(Vt=Te,ut=He,At=pt;he=le.lencode[At+((je&(1<<Vt+ut)-1)>>Vt)],Te=he>>>24,He=he>>>16&255,pt=he&65535,!(Vt+Te<=Ke);){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}je>>>=Vt,Ke-=Vt,le.back+=Vt}if(je>>>=Te,Ke-=Te,le.back+=Te,le.length=pt,He===0){le.mode=Re;break}if(He&32){le.back=-1,le.mode=q;break}if(He&64){ve.msg="invalid literal/length code",le.mode=Le;break}le.extra=He&15,le.mode=be;case be:if(le.extra){for(br=le.extra;Ke<br;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}le.length+=je&(1<<le.extra)-1,je>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=_e;case _e:for(;he=le.distcode[je&(1<<le.distbits)-1],Te=he>>>24,He=he>>>16&255,pt=he&65535,!(Te<=Ke);){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}if((He&240)===0){for(Vt=Te,ut=He,At=pt;he=le.distcode[At+((je&(1<<Vt+ut)-1)>>Vt)],Te=he>>>24,He=he>>>16&255,pt=he&65535,!(Vt+Te<=Ke);){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}je>>>=Vt,Ke-=Vt,le.back+=Vt}if(je>>>=Te,Ke-=Te,le.back+=Te,He&64){ve.msg="invalid distance code",le.mode=Le;break}le.offset=pt,le.extra=He&15,le.mode=Pe;case Pe:if(le.extra){for(br=le.extra;Ke<br;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}le.offset+=je&(1<<le.extra)-1,je>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){ve.msg="invalid distance too far back",le.mode=Le;break}le.mode=Ne;case Ne:if(ge===0)break e;if(H=pe-ge,le.offset>H){if(H=le.offset-H,H>le.whave&&le.sane){ve.msg="invalid distance too far back",le.mode=Le;break}H>le.wnext?(H-=le.wnext,B=le.wsize-H):B=le.wnext-H,H>le.length&&(H=le.length),W=le.window}else W=vt,B=Be-le.offset,H=le.length;H>ge&&(H=ge),ge-=H,le.length-=H;do vt[Be++]=W[B++];while(--H);le.length===0&&(le.mode=ue);break;case Re:if(ge===0)break e;vt[Be++]=le.length,ge--,le.mode=ue;break;case Ce:if(le.wrap){for(;Ke<32;){if(tt===0)break e;tt--,je|=ft[M++]<<Ke,Ke+=8}if(pe-=ge,ve.total_out+=pe,le.total+=pe,pe&&(ve.adler=le.check=le.flags?n(le.check,vt,pe,Be-pe):t(le.check,vt,pe,Be-pe)),pe=ge,(le.flags?je:Q(je))!==le.check){ve.msg="incorrect data check",le.mode=Le;break}je=0,Ke=0}le.mode=Fe;case Fe:if(le.wrap&&le.flags){for(;Ke<32;){if(tt===0)break e;tt--,je+=ft[M++]<<Ke,Ke+=8}if(je!==(le.total&4294967295)){ve.msg="incorrect length check",le.mode=Le;break}je=0,Ke=0}le.mode=Qe;case Qe:Xt=p;break e;case Le:Xt=b;break e;case Ie:return _;case V:default:return v}return ve.next_out=Be,ve.avail_out=ge,ve.next_in=M,ve.avail_in=tt,le.hold=je,le.bits=Ke,(le.wsize||pe!==ve.avail_out&&le.mode<Le&&(le.mode<Ce||ke!==l))&&ye(ve,ve.output,ve.next_out,pe-ve.avail_out),Nt-=ve.avail_in,pe-=ve.avail_out,ve.total_in+=Nt,ve.total_out+=pe,le.total+=pe,le.wrap&&pe&&(ve.adler=le.check=le.flags?n(le.check,vt,pe,ve.next_out-pe):t(le.check,vt,pe,ve.next_out-pe)),ve.data_type=le.bits+(le.last?64:0)+(le.mode===q?128:0)+(le.mode===J||le.mode===re?256:0),(Nt===0&&pe===0||ke===l)&&Xt===h&&(Xt=x),Xt}function G(ve){if(!ve||!ve.state)return v;var ke=ve.state;return ke.window&&(ke.window=null),ve.state=null,h}function de(ve,ke){var le;return!ve||!ve.state||(le=ve.state,(le.wrap&2)===0)?v:(le.head=ke,ke.done=!1,h)}function Oe(ve,ke){var le=ke.length,ft,vt,M;return!ve||!ve.state||(ft=ve.state,ft.wrap!==0&&ft.mode!==K)?v:ft.mode===K&&(vt=1,vt=t(vt,ke,le,0),vt!==ft.check)?b:(M=ye(ve,ke,le,le),M?(ft.mode=Ie,_):(ft.havedict=1,h))}return yo.inflateReset=Ee,yo.inflateReset2=We,yo.inflateResetKeep=Me,yo.inflateInit=at,yo.inflateInit2=kt,yo.inflate=I,yo.inflateEnd=G,yo.inflateGetHeader=de,yo.inflateSetDictionary=Oe,yo.inflateInfo="pako inflate (from Nodeca project)",yo}var nE,z4;function VP(){return z4||(z4=1,nE={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),nE}var rE,U4;function une(){if(U4)return rE;U4=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return rE=e,rE}var H4;function dne(){if(H4)return Hf;H4=1;var e=cne(),t=Eu(),n=HP(),r=VP(),a=Vk(),i=qP(),o=une(),s=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(h&&h.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15)===0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,p.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),p.dictionary&&(typeof p.dictionary=="string"?p.dictionary=n.string2buf(p.dictionary):s.call(p.dictionary)==="[object ArrayBuffer]"&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(g=e.inflateSetDictionary(this.strm,p.dictionary),g!==r.Z_OK)))throw new Error(a[g])}l.prototype.push=function(h,p){var g=this.strm,v=this.options.chunkSize,b=this.options.dictionary,_,x,S,E,C,k=!1;if(this.ended)return!1;x=p===~~p?p:p===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),_=e.inflate(g,r.Z_NO_FLUSH),_===r.Z_NEED_DICT&&b&&(_=e.inflateSetDictionary(this.strm,b)),_===r.Z_BUF_ERROR&&k===!0&&(_=r.Z_OK,k=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(g.output,g.next_out),E=g.next_out-S,C=n.buf2string(g.output,S),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function u(h,p){var g=new l(p);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function d(h,p){return p=p||{},p.raw=!0,u(h,p)}return Hf.Inflate=l,Hf.inflate=u,Hf.inflateRaw=d,Hf.ungzip=u,Hf}var aE,q4;function fne(){if(q4)return aE;q4=1;var e=Eu().assign,t=one(),n=dne(),r=VP(),a={};return e(a,t,n,r),aE=a,aE}var hne=fne();const Gk=li(hne);var iE,V4;function pne(){if(V4)return iE;V4=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,o)=>{n.multiArgs?r.push((...s)=>{n.errorFirst?s[0]?o(s):(s.shift(),i(s)):i(s)}):n.errorFirst?r.push((s,l)=>{s?o(s):i(l)}):r.push(i),t.apply(this,r)})};return iE=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=o=>{const s=l=>typeof l=="string"?o===l:l.test(o);return n.include?n.include.some(s):!n.exclude.some(s)};let i;r==="function"?i=function(...o){return n.excludeMain?t(...o):e(t,n).apply(this,o)}:i=Object.create(Object.getPrototypeOf(t));for(const o in t){const s=t[o];i[o]=typeof s=="function"&&a(o)?e(s,n):s}return i},iE}var mne=pne();const oE=li(mne);var sE,G4;function gne(){if(G4)return sE;G4=1;var e={};function t(re){return Array.isArray(re)?re:[re]}const n="",r=" ",a="\\",i=/^\s+$/,o=/(?:[^\\]|^)\\$/,s=/^\\!/,l=/^\\#/,u=/\r?\n/g,d=/^\.*\/|^\.+$/,h="/";let p="node-ignore";typeof Symbol<"u"&&(p=Symbol.for("node-ignore"));const g=p,v=(re,X,ae)=>Object.defineProperty(re,X,{value:ae}),b=/([0-z])-([0-z])/g,_=()=>!1,x=re=>re.replace(b,(X,ae,U)=>ae.charCodeAt(0)<=U.charCodeAt(0)?X:n),S=re=>{const{length:X}=re;return re.slice(0,X-X%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(re,X,ae)=>X+(ae.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(re,X)=>{const{length:ae}=X;return X.slice(0,ae-ae%2)+r}],[/[\\$.|*+(){^]/g,re=>`\\${re}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(re,X,ae)=>X+6<ae.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(re,X,ae)=>{const U=ae.replace(/\\\*/g,"[^\\/]*");return X+U}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(re,X,ae,U,ee)=>X===a?`\\[${ae}${S(U)}${ee}`:ee==="]"&&U.length%2===0?`[${x(ae)}${U}]`:"[]"],[/(?:[^*])$/,re=>/\/$/.test(re)?`${re}$`:`${re}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(re,X)=>`${X?`${X}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),k=(re,X)=>{let ae=C[re];return ae||(ae=E.reduce((U,[ee,J])=>U.replace(ee,J.bind(re)),re),C[re]=ae),X?new RegExp(ae,"i"):new RegExp(ae)},R=re=>typeof re=="string",j=re=>re&&R(re)&&!i.test(re)&&!o.test(re)&&re.indexOf("#")!==0,O=re=>re.split(u);class L{constructor(X,ae,U,ee){this.origin=X,this.pattern=ae,this.negative=U,this.regex=ee}}const z=(re,X)=>{const ae=re;let U=!1;re.indexOf("!")===0&&(U=!0,re=re.substr(1)),re=re.replace(s,"!").replace(l,"#");const ee=k(re,X);return new L(ae,re,U,ee)},Y=(re,X)=>{throw new X(re)},F=(re,X,ae)=>R(re)?re?F.isNotRelative(re)?ae(`path should be a \`path.relative()\`d string, but got "${X}"`,RangeError):!0:ae("path must not be empty",TypeError):ae(`path must be a string, but got \`${X}\``,TypeError),K=re=>d.test(re);F.isNotRelative=K,F.convert=re=>re;class q{constructor({ignorecase:X=!0,ignoreCase:ae=X,allowRelativePaths:U=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=ae,this._allowRelativePaths=U,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(X){if(X&&X[g]){this._rules=this._rules.concat(X._rules),this._added=!0;return}if(j(X)){const ae=z(X,this._ignoreCase);this._added=!0,this._rules.push(ae)}}add(X){return this._added=!1,t(R(X)?O(X):X).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(X){return this.add(X)}_testOne(X,ae){let U=!1,ee=!1;return this._rules.forEach(J=>{const{negative:ue}=J;if(ee===ue&&U!==ee||ue&&!U&&!ee&&!ae)return;J.regex.test(X)&&(U=!ue,ee=ue)}),{ignored:U,unignored:ee}}_test(X,ae,U,ee){const J=X&&F.convert(X);return F(J,X,this._allowRelativePaths?_:Y),this._t(J,ae,U,ee)}_t(X,ae,U,ee){if(X in ae)return ae[X];if(ee||(ee=X.split(h)),ee.pop(),!ee.length)return ae[X]=this._testOne(X,U);const J=this._t(ee.join(h)+h,ae,U,ee);return ae[X]=J.ignored?J:this._testOne(X,U)}ignores(X){return this._test(X,this._ignoreCache,!1).ignored}createFilter(){return X=>!this.ignores(X)}filter(X){return t(X).filter(this.createFilter())}test(X){return this._test(X,this._testCache,!0)}}const fe=re=>new q(re),te=re=>F(re&&F.convert(re),re,_);if(fe.isPathValid=te,fe.default=fe,sE=fe,typeof Jr<"u"&&(e&&e.IGNORE_TEST_WIN32||Jr.platform==="win32")){const re=ae=>/^\\\\\?\\/.test(ae)||/["<>|\u0000-\u001F]+/u.test(ae)?ae:ae.replace(/\\/g,"/");F.convert=re;const X=/^[a-z]:\//i;F.isNotRelative=ae=>X.test(ae)||K(ae)}return sE}var yne=gne();const bne=li(yne);var lE,W4;function vne(){if(W4)return lE;W4=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return lE=n,lE}var wne=vne();const Fs=li(wne);var cE,K4;function _ne(){return K4||(K4=1,cE=function(e,t){var n=e,r=t,a=n.length,i=r.length,o=!1,s=null,l=a+1,u=[],d=[],h=[],p="",g=-1,v=0,b=1,_,x,S=function(){a>=i&&(_=n,x=a,n=r,r=_,a=i,i=x,o=!0,l=a+1)},E=function(j,O,L){return{x:j,y:O,k:L}},C=function(j,O){return{elem:j,t:O}},k=function(j,O,L){var z,Y,F;for(O>L?z=u[j-1+l]:z=u[j+1+l],F=Math.max(O,L),Y=F-j;Y<a&&F<i&&n[Y]===r[F];)++Y,++F;return u[j+l]=d.length,d[d.length]=new E(Y,F,z),F},R=function(j){var O,L,z;for(O=L=0,z=j.length-1;z>=0;--z)for(;O<j[z].x||L<j[z].y;)j[z].y-j[z].x>L-O?(o?h[h.length]=new C(r[L],g):h[h.length]=new C(r[L],b),++L):j[z].y-j[z].x<L-O?(o?h[h.length]=new C(n[O],b):h[h.length]=new C(n[O],g),++O):(h[h.length]=new C(n[O],v),p+=n[O],++O,++L)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return p},getses:function(){return h},compose:function(){var j,O,L,z,Y,F,K,q;for(j=i-a,O=a+i+3,L={},K=0;K<O;++K)L[K]=-1,u[K]=-1;z=-1;do{for(++z,q=-z;q<=j-1;++q)L[q+l]=k(q,L[q-1+l]+1,L[q+1+l]);for(q=j+z;q>=j+1;--q)L[q+l]=k(q,L[q-1+l]+1,L[q+1+l]);L[j+l]=k(j,L[j-1+l]+1,L[j+1+l])}while(L[j+l]!==i);for(s=j+2*z,Y=u[j+l],F=[];Y!==-1;)F[F.length]=new E(d[Y].x,d[Y].y,null),Y=d[Y].k;R(F)}}}),cE}var uE,Z4;function xne(){if(Z4)return uE;Z4=1;var e=_ne();function t(i,o){var s=new e(i,o);s.compose();for(var l=s.getses(),u,d,h=i.length-1,p=o.length-1,g=l.length-1;g>=0;--g)l[g].t===s.SES_COMMON?(d?(d.chain={file1index:h,file2index:p,chain:null},d=d.chain):(u={file1index:h,file2index:p,chain:null},d=u),h--,p--):l[g].t===s.SES_DELETE?h--:l[g].t===s.SES_ADD&&p--;var v={file1index:-1,file2index:-1,chain:null};return d?(d.chain=v,u):v}function n(i,o){for(var s=[],l=i.length,u=o.length,d=t(i,o);d!==null;d=d.chain){var h=l-d.file1index-1,p=u-d.file2index-1;l=d.file1index,u=d.file2index,(h||p)&&s.push({file1:[l+1,h],file2:[u+1,p]})}return s.reverse(),s}function r(i,o,s){var l,u=n(o,i),d=n(o,s),h=[];function p(X,ae){h.push([X.file1[0],ae,X.file1[1],X.file2[0],X.file2[1]])}for(l=0;l<u.length;l++)p(u[l],0);for(l=0;l<d.length;l++)p(d[l],2);h.sort(function(X,ae){return X[0]-ae[0]});var g=[],v=0;function b(X){X>v&&(g.push([1,v,X-v]),v=X)}for(var _=0;_<h.length;_++){for(var x=_,S=h[_],E=S[0],C=E+S[2];_<h.length-1;){var k=h[_+1],R=k[0];if(R>C)break;C=Math.max(C,R+k[2]),_++}if(b(E),x==_)S[4]>0&&g.push([S[1],S[3],S[4]]);else{var j={0:[i.length,-1,o.length,-1],2:[s.length,-1,o.length,-1]};for(l=x;l<=_;l++){S=h[l];var O=S[1],L=j[O],z=S[0],Y=z+S[2],F=S[3],K=F+S[4];L[0]=Math.min(F,L[0]),L[1]=Math.max(K,L[1]),L[2]=Math.min(z,L[2]),L[3]=Math.max(Y,L[3])}var q=j[0][0]+(E-j[0][2]),fe=j[0][1]+(C-j[0][3]),te=j[2][0]+(E-j[2][2]),re=j[2][1]+(C-j[2][3]);g.push([-1,q,fe-q,E,C-E,te,re-te])}v=C}return b(o.length),g}function a(i,o,s){var l=[],u=[i,o,s],d=r(i,o,s),h=[];function p(){h.length&&l.push({ok:h}),h=[]}function g(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],k=0;k<S[2];k++)if(i[k+E]!=s[k+C])return!0;return!1}for(var b=0;b<d.length;b++){var _=d[b],x=_[0];x==-1?v(_)?(p(),l.push({conflict:{a:i.slice(_[1],_[1]+_[2]),aIndex:_[1],o:o.slice(_[3],_[3]+_[4]),oIndex:_[3],b:s.slice(_[5],_[5]+_[6]),bIndex:_[5]}})):g(u[0].slice(_[1],_[1]+_[2])):g(u[x].slice(_[1],_[1]+_[2]))}return p(),l}return uE=a,uE}var Sne=xne();const Ene=li(Sne);class Qn extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Qn(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class pg extends Qn{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=pg.code,this.data={filepaths:t}}}pg.code="UnmergedPathsError";class In extends Qn{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=In.code,this.data={message:t}}}In.code="InternalError";class Xh extends Qn{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Xh.code,this.data={filepath:t}}}Xh.code="UnsafeFilepathError";class Ds{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function n1(e,t){return-(e<t)||+(e>t)}function GP(e,t){return n1(e.path,t.path)}function WP(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const As=2**32;function Y4(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function Eh(e){const[t,n]=Y4(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=Y4(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%As,ctimeNanoseconds:n%As,mtimeSeconds:r%As,mtimeNanoseconds:a%As,dev:e.dev%As,ino:e.ino%As,mode:WP(e.mode%As),uid:e.uid%As,gid:e.gid%As,size:e.size>-1?e.size%As:0}}function Cne(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let dE=null;async function Gl(e){return dE===null&&(dE=await Ane()),dE?KP(e):kne(e)}function kne(e){return new BP().update(e).digest("hex")}async function KP(e){const t=await crypto.subtle.digest("SHA-1",e);return Cne(t)}async function Ane(){try{if(await KP(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function Tne(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function Nne(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Yt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class sd{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Yt.isBuffer(t))return sd.fromBuffer(t);if(t===null)return new sd(null);throw new In("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new In("Index file is empty (.git/index)");const n=new sd,r=new Ds(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new In(`Invalid dircache magic file number: ${a}`);const i=await Gl(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==i)throw new In(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const s=r.readUInt32BE();if(s!==2)throw new In(`Unsupported dircache version: ${s}`);const l=r.readUInt32BE();let u=0;for(;!r.eof()&&u<l;){const d={};d.ctimeSeconds=r.readUInt32BE(),d.ctimeNanoseconds=r.readUInt32BE(),d.mtimeSeconds=r.readUInt32BE(),d.mtimeNanoseconds=r.readUInt32BE(),d.dev=r.readUInt32BE(),d.ino=r.readUInt32BE(),d.mode=r.readUInt32BE(),d.uid=r.readUInt32BE(),d.gid=r.readUInt32BE(),d.size=r.readUInt32BE(),d.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();d.flags=Tne(h);const p=t.indexOf(0,r.tell()+1)-r.tell();if(p<1)throw new In(`Got a path length of: ${p}`);if(d.path=r.toString("utf8",p),d.path.includes("..\\")||d.path.includes("../"))throw new Xh(d.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new In(`Expected 1-8 null characters but got '${v}' after ${d.path}`);if(r.eof())throw new In("Unexpected end of file")}d.stages=[],n._addEntry(d),u++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(GP)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Eh(n);const i=Yt.from(t),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Yt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Yt.alloc(r),i=new Ds(a),o=Eh(t);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(Nne(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Yt.alloc(12),n=new Ds(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const s of this.entries)if(r.push(sd._entryToBuffer(s)),s.stages.length>1)for(const l of s.stages)l&&l!==s&&r.push(sd._entryToBuffer(l));r=await Promise.all(r);const a=Yt.concat(r),i=Yt.concat([t,a]),o=await Gl(i);return Yt.concat([i,Yt.from(o,"hex")])}}function Bv(e,t,n=!0,r=!0){const a=Eh(e),i=Eh(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let fE=null;const hE=Symbol("IndexCache");function Rne(){return{map:new Map,stats:new Map}}async function Ine(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await sd.from(a);n.map.set(t,i),n.stats.set(t,r)}async function One(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Bv(r,a)}class Fa{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[hE]||(r[hE]=Rne());const o=`${n}/index`;fE===null&&(fE=new v0({maxPending:1/0}));let s,l=[];return await fE.acquire(o,async()=>{const u=r[hE];await One(t,o,u)&&await Ine(t,o,u);const d=u.map.get(o);if(l=d.unmergedPaths,l.length&&!a)throw new pg(l);if(s=await i(d),d._dirty){const h=await d.toObject();await t.write(o,h),u.stats.set(o,await t.lstat(o)),d._dirty=!1}}),s}}function zv(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function Ch(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function ZP(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:zv(a),metadata:{},children:[]};t.set(a,i),i.parent=n(Ch(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const o={type:"blob",fullpath:a,basename:zv(a),metadata:i,parent:n(Ch(a)),children:[]};o.parent&&o.parent.children.push(o),t.set(a,o)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function jne(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new In(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class Dne{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Fa.acquire({fs:t,gitdir:n,cache:r},async function(i){return ZP(i.entries)});const a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(o=>o.fullpath);return i.sort(n1),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:Eh(r.metadata);t._type=r.type==="tree"?"tree":jne(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const r1=Symbol("GitWalkSymbol");function Jh(){const e=Object.create(null);return Object.defineProperty(e,r1,{value:function({fs:t,gitdir:n,cache:r}){return new Dne({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class kr extends Qn{constructor(t){super(`Could not find ${t}.`),this.code=this.name=kr.code,this.data={what:t}}}kr.code="NotFoundError";class Si extends Qn{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Si.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}Si.code="ObjectTypeError";class du extends Qn{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=du.code,this.data={value:t}}}du.code="InvalidOidError";class mg extends Qn{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=mg.code,this.data={remote:t}}}mg.code="NoRefspecError";class Uv{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Uv(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Hv{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=n==="+",l=a==="*";if(l!==(o==="*"))throw new In("Invalid refspec");return new Hv({remotePath:r,localPath:i,force:s,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class Wk{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Hv.from(r));return new Wk(n)}add(t){const n=Hv.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function Mne(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const Pne=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Am=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},X4={core:{filemode:Am,bare:Am,logallrefupdates:Am,symlinks:Am,ignorecase:Am,bigFileThreshold:Pne}},Fne=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,Lne=/^[A-Za-z0-9-.]+$/,$ne=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,Bne=/^[A-Za-z][A-Za-z-]*$/,zne=/^(.*?)( *[#;].*)$/,Une=e=>{const t=Fne.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},Hne=e=>{const t=$ne.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=qne(r),i=Vne(a);return[n,i]}return null},qne=e=>{const t=zne.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return J4(n)&&J4(r)?`${n}${r}`:n},J4=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,Vne=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",o=n==="\\"&&a[r+1]==='"';return i||o?t:t+n},""),Q4=e=>e!=null?e.toLowerCase():null,G2=(e,t,n)=>[Q4(e),t,Q4(n)].filter(r=>r!=null).join("."),eO=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:G2(n,a,r),sectionPath:G2(n,a,null),isSection:!!n}},Gne=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class Kk{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,o=null;const s=a.trim(),l=Une(s),u=l!=null;if(u)[n,r]=l;else{const h=Hne(s);h!=null&&([i,o]=h)}const d=G2(n,r,i);return{line:a,isSection:u,section:n,subsection:r,name:i,value:o,path:d}}):[]}static from(t){return new Kk(t)}async get(t,n=!1){const r=eO(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:s})=>{const l=X4[i]&&X4[i][o];return l?l(s):s});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:o,path:s,sectionPath:l,isSection:u}=eO(t),d=Gne(this.parsedConfig,h=>h.path===s);if(n==null)d!==-1&&this.parsedConfig.splice(d,1);else if(d!==-1){const h=this.parsedConfig[d],p=Object.assign({},h,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(d+1,0,p):this.parsedConfig[d]=p}else{const h=this.parsedConfig.findIndex(g=>g.path===l),p={section:a,subsection:i,name:o,value:n,modified:!0,path:s};if(Lne.test(a)&&Bne.test(o))if(h>=0)this.parsedConfig.splice(h+1,0,p);else{const g={isSection:u,section:a,subsection:i,modified:!0,path:l};this.parsedConfig.push(g,p)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:o=!1})=>o?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class ma{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return Kk.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const kb=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],Wne=["config","description","index","shallow","commondir"];let pE;async function Fc(e,t){return pE===void 0&&(pE=new v0),pE.acquire(e,t)}class $t{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:o,refspecs:s=void 0,prune:l=!1,pruneTags:u=!1}){for(const _ of a.values())if(!_.match(/[0-9a-f]{40}/))throw new du(_);const d=await ma.get({fs:t,gitdir:n});if(!s){if(s=await d.getall(`remote.${r}.fetch`),s.length===0)throw new mg(r);s.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=Wk.from(s),p=new Map;if(u){const _=await $t.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await $t.deleteRefs({fs:t,gitdir:n,refs:_.map(x=>`refs/tags/${x}`)})}if(o){for(const _ of a.keys())if(_.startsWith("refs/tags")&&!_.endsWith("^{}")&&!await $t.exists({fs:t,gitdir:n,ref:_})){const x=a.get(_);p.set(_,x)}}const g=h.translate([...a.keys()]);for(const[_,x]of g){const S=a.get(_);p.set(x,S)}const v=h.translate([...i.keys()]);for(const[_,x]of v){const S=i.get(_),E=h.translateOne(S);E&&p.set(x,`ref: ${E}`)}const b=[];if(l){for(const _ of h.localNamespaces()){const x=(await $t.listRefs({fs:t,gitdir:n,filepath:_})).map(S=>`${_}/${S}`);for(const S of x)p.has(S)||b.push(S)}b.length>0&&await $t.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[_,x]of p)await Fc(_,async()=>t.write(Ot.join(n,_),`${x.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new du(a);await Fc(r,async()=>t.write(Ot.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Fc(r,async()=>t.write(Ot.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return $t.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(s=>t.rm(Ot.join(n,s))));let a=await Fc("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Uv.from(a),o=i.refs.size;for(const s of r)i.refs.has(s)&&i.delete(s);i.refs.size<o&&(a=i.toString(),await Fc("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),$t.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await $t.packedRefs({fs:t,gitdir:n}),o=kb(r).filter(s=>!Wne.includes(s));for(const s of o){const l=await Fc(s,async()=>await t.read(`${n}/${s}`,{encoding:"utf8"})||i.get(s));if(l)return $t.resolve({fs:t,gitdir:n,ref:l.trim(),depth:a})}throw new kr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await $t.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await $t.packedRefs({fs:t,gitdir:n}),i=kb(r);for(const o of i)if(await Fc(o,async()=>t.exists(`${n}/${o}`))||a.has(o))return o;throw new kr(r)}static async expandAgainstMap({ref:t,map:n}){const r=kb(t);for(const a of r)if(await n.has(a))return a;throw new kr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),$t.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=kb(t);for(const o of i){const s=a.get(o);if(s)return $t.resolveAgainstMap({ref:s.trim(),fullref:o,depth:r,map:a})}throw new kr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Fc("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Uv.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=$t.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await a).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(Mne),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?$t.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):$t.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await $t.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function Kne(e,t){return n1(tO(e),tO(t))}function tO(e){return e.mode==="040000"?e.path+"/":e.path}function YP(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new In(`Unexpected GitTree entry mode: ${e}`)}function Zne(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new In(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new In(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=YP(i),s=e.slice(r+1,a).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new Xh(s);const l=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:s,oid:l,type:o})}return t}function Yne(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new In(`Could not understand file mode: ${e}`)}function Xne(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=Yne(e.mode),e.type||(e.type=YP(e.mode)),e}class Mi{constructor(t){if(Yt.isBuffer(t))this._entries=Zne(t);else if(Array.isArray(t))this._entries=t.map(Xne);else throw new In("invalid type passed to GitTree constructor");this._entries.sort(GP)}static from(t){return new Mi(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(Kne),Yt.concat(t.map(n=>{const r=Yt.from(n.mode.replace(/^0/,"")),a=Yt.from(" "),i=Yt.from(n.path,"utf8"),o=Yt.from([0]),s=Yt.from(n.oid,"hex");return Yt.concat([r,a,i,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Qh{static wrap({type:t,object:n}){return Yt.concat([Yt.from(`${t} ${n.byteLength.toString()}\0`),Yt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),o=t.length-(r+1);if(parseInt(i)!==o)throw new In(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:a,object:Yt.from(t.slice(r+1))}}}async function XP({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function Jne(e,t){const n=new Ds(e),r=nO(n);if(r!==t.byteLength)throw new In(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=nO(n);let i;const o=aO(n,t);if(o.byteLength===a)i=o;else{i=Yt.alloc(a);const s=new Ds(i);for(s.copy(o);!n.eof();)s.copy(aO(n,t));const l=s.tell();if(a!==l)throw new In(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${l} bytes`)}return i}function nO(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function rO(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function aO(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const o=rO(e,n&a,4);let s=rO(e,(n&i)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(n)}function Qne(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function JP(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Qne(e)}class QP{constructor(t){if(typeof Yt>"u")throw new Error("Missing Buffer dependency");this.stream=JP(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Yt.alloc(0):(n&&(n=Yt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>ere(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Yt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function ere(e){return e.reduce((t,n)=>t+n.length,0)}async function tre(e,t){const n=new QP(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new In(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new In(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:s,length:l,ofs:u,reference:d}=await nre(n),h=new Gk.Inflate;for(;!h.result;){const p=await n.chunk();if(!p)break;if(h.push(p,!1),h.err)throw new In(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new In("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(p.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:s,num:i,offset:o,end:g,reference:d,ofs:u})}}}}async function nre(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let o=4;do t=await e.byte(),r|=(t&127)<<o,o+=7;while(t&128)}let a,i;if(n===6){let o=0;a=0;const s=[];do t=await e.byte(),a|=(t&127)<<o,o+=7,s.push(t);while(t&128);i=Yt.from(s)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function e5(e){return Gk.inflate(e)}function rre(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function are(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class kh{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new Ds(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new In(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new In("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),s=[];for(let d=0;d<o;d++){const h=r.slice(20).toString("hex");s[d]=h}r.seek(r.tell()+4*o);const l=new Map;for(let d=0;d<o;d++)l.set(s[d],r.readUInt32BE());const u=r.slice(20).toString("hex");return new kh({hashes:s,crcs:{},offsets:l,packfileSha:u,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=t.slice(-20).toString("hex"),s=[],l={},u=new Map;let d=null,h=null;await tre([t],async({data:_,type:x,reference:S,offset:E,num:C})=>{d===null&&(d=C);const k=Math.floor((d-C)*100/d);k!==h&&r&&await r({phase:"Receiving objects",loaded:d-C,total:d}),h=k,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const p=Object.keys(i).map(Number);for(const[_,x]of p.entries()){const S=_+1===p.length?t.byteLength-20:p[_+1],E=i[x],C=rne.buf(t.slice(x,S))>>>0;E.end=S,E.crc=C}const g=new kh({pack:Promise.resolve(t),packfileSha:o,crcs:l,hashes:s,offsets:u,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _ in i){_=Number(_);const x=Math.floor(v*100/d);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:d}),v++,h=x;const S=i[_];if(!S.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:_});b[g.readDepth]+=1;const k=await Gl(Qh.wrap({type:E,object:C}));S.oid=k,s.push(k),u.set(k,_),l[k]=S.crc}catch{continue}}return s.sort(),g}async toBuffer(){const t=[],n=(u,d)=>{t.push(Yt.from(u,d))};n("ff744f63","hex"),n("00000002","hex");const r=new Ds(Yt.alloc(256*4));for(let u=0;u<256;u++){let d=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=u&&d++;r.writeUInt32BE(d)}t.push(r.buffer);for(const u of this.hashes)n(u,"hex");const a=new Ds(Yt.alloc(this.hashes.length*4));for(const u of this.hashes)a.writeUInt32BE(this.crcs[u]);t.push(a.buffer);const i=new Ds(Yt.alloc(this.hashes.length*4));for(const u of this.hashes)i.writeUInt32BE(this.offsets.get(u));t.push(i.buffer),n(this.packfileSha,"hex");const o=Yt.concat(t),s=await Gl(o),l=Yt.alloc(20);return l.write(s,"hex"),Yt.concat([o,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new In(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new In("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new Ds(r),i=a.readUInt8(),o=i&112;let s=n[o];if(s===void 0)throw new In("Unrecognized type: 0b"+o.toString(2));const l=i&15;let u=l;i&128&&(u=are(a,l));let h=null,p=null;if(s==="ofs_delta"){const v=rre(a),b=t-v;({object:h,type:s}=await this.readSlice({start:b}))}if(s==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:s}=await this.read({oid:v}))}const g=r.slice(a.tell());if(p=Yt.from(await e5(g)),p.byteLength!==u)throw new In(`Packfile told us object would have length ${u} but it had length ${p.byteLength}`);return h&&(p=Yt.from(Jne(p,h))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:p}),{type:s,format:"content",object:p}}}const Ab=Symbol("PackfileCache");async function ire({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return kh.fromIdx({idx:i,getExternalRefDelta:n})}function Zk({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[Ab]||(t[Ab]=new Map);let o=t[Ab].get(n);return o||(o=ire({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[Ab].set(n,o)),o}async function ore({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let o=await e.readdir(Ot.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const l=`${n}/objects/pack/${s}`,u=await Zk({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(u.error)throw new In(u.error);if(u.offsets.has(r)){if(!u.pack){const h=l.replace(/idx$/,"pack");u.pack=e.read(h)}const d=await u.read({oid:r,getExternalRefDelta:i});return d.format="content",d.source=`objects/pack/${s.replace(/idx$/,"pack")}`,d}}return null}async function qr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=d=>qr({fs:e,cache:t,gitdir:n,oid:d});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Yt.from("tree 0\0")}),o||(o=await XP({fs:e,gitdir:n,oid:r})),!o){if(o=await ore({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new kr(r);return o}if(a==="deflated"||(o.format==="deflated"&&(o.object=Yt.from(await e5(o.object)),o.format="wrapped"),a==="wrapped"))return o;const s=await Gl(o.object);if(s!==r)throw new In(`SHA check failed! Expected ${r}, computed ${s}`);const{object:l,type:u}=Qh.unwrap(o.object);if(o.type=u,o.object=l,o.format="content",a==="content")return o;throw new In(`invalid requested format "${a}"`)}class ss extends Qn{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=ss.code,this.data={noun:t,where:n,canForce:r}}}ss.code="AlreadyExistsError";class gg extends Qn{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=gg.code,this.data={nouns:t,short:n,matches:r}}}gg.code="AmbiguousError";class yg extends Qn{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=yg.code,this.data={filepaths:t}}}yg.code="CheckoutConflictError";class bg extends Qn{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=bg.code,this.data={ref:t,oid:n}}}bg.code="CommitNotFetchedError";class vg extends Qn{constructor(){super("Empty response from git server."),this.code=this.name=vg.code,this.data={}}}vg.code="EmptyServerResponseError";class wg extends Qn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=wg.code,this.data={}}}wg.code="FastForwardError";class _g extends Qn{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=_g.code,this.data={prettyDetails:t,result:n}}}_g.code="GitPushError";class Ah extends Qn{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=Ah.code,this.data={statusCode:t,statusMessage:n,response:r}}}Ah.code="HttpError";class fu extends Qn{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=fu.code,this.data={reason:t}}}fu.code="InvalidFilepathError";class ts extends Qn{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=ts.code,this.data={ref:t,suggestion:n}}}ts.code="InvalidRefNameError";class xg extends Qn{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=xg.code,this.data={depth:t}}}xg.code="MaxDepthError";class ep extends Qn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=ep.code,this.data={}}}ep.code="MergeNotSupportedError";class tp extends Qn{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=tp.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}tp.code="MergeConflictError";class si extends Qn{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=si.code,this.data={role:t}}}si.code="MissingNameError";class Di extends Qn{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Di.code,this.data={parameter:t}}}Di.code="MissingParameterError";class Sg extends Qn{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=Sg.code,this.data={errors:t},this.errors=t}}Sg.code="MultipleGitError";class zd extends Qn{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=zd.code,this.data={expected:t,actual:n}}}zd.code="ParseError";class Th extends Qn{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=Th.code,this.data={reason:t}}}Th.code="PushRejectedError";class Gc extends Qn{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Gc.code,this.data={capability:t,parameter:n}}}Gc.code="RemoteCapabilityError";class Eg extends Qn{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=Eg.code,this.data={preview:t,response:n}}}Eg.code="SmartHttpError";class Cg extends Qn{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=Cg.code,this.data={url:t,transport:n,suggestion:r}}}Cg.code="UnknownTransportError";class kg extends Qn{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=kg.code,this.data={url:t}}}kg.code="UrlParseError";class np extends Qn{constructor(){super("The operation was canceled."),this.code=this.name=np.code,this.data={}}}np.code="UserCanceledError";class Ag extends Qn{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=Ag.code,this.data={filepath:t}}}Ag.code="IndexResetError";class Tg extends Qn{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Tg.code,this.data={ref:t}}}Tg.code="NoCommitError";var sre=Object.freeze({__proto__:null,AlreadyExistsError:ss,AmbiguousError:gg,CheckoutConflictError:yg,CommitNotFetchedError:bg,EmptyServerResponseError:vg,FastForwardError:wg,GitPushError:_g,HttpError:Ah,InternalError:In,InvalidFilepathError:fu,InvalidOidError:du,InvalidRefNameError:ts,MaxDepthError:xg,MergeNotSupportedError:ep,MergeConflictError:tp,MissingNameError:si,MissingParameterError:Di,MultipleGitError:Sg,NoRefspecError:mg,NotFoundError:kr,ObjectTypeError:Si,ParseError:zd,PushRejectedError:Th,RemoteCapabilityError:Gc,SmartHttpError:Eg,UnknownTransportError:Cg,UnsafeFilepathError:Xh,UrlParseError:kg,UserCanceledError:np,UnmergedPathsError:pg,IndexResetError:Ag,NoCommitError:Tg});function W2({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=lre(r),`${e} <${t}> ${n} ${r}`}function lre(e){const t=cre(ure(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function cre(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function ure(e){return e===0?e:-e}function Rl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function qv(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:dre(a)}}function dre(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),fre(r)}function fre(e){return e===0?e:-e}class bi{constructor(t){if(typeof t=="string")this._tag=t;else if(Yt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=bi.render(t);else throw new In("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new bi(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${W2(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=qv(r.tagger)),r.committer&&(r.committer=qv(r.committer)),r}withoutSignature(){const t=Rl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Rl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Yt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=Rl(i);const o=a+i;return bi.from(o)}}function mE(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function hre(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Hr{constructor(t){if(typeof t=="string")this._commit=t;else if(Yt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Hr.render(t);else throw new In("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Hr.justHeaders(t),a=Hr.justMessage(t),i=Rl(r+`
gpgsig`+mE(n)+`
`+a);return new Hr(i)}static from(t){return new Hr(t)}toObject(){return Yt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Hr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return Rl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Hr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=qv(r.author)),r.committer&&(r.committer=qv(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new In("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${W2(r)}
`;const a=t.committer||t.author;return n+=`committer ${W2(a)}
`,t.gpgsig&&(n+="gpgsig"+mE(t.gpgsig)),n}static render(t){return Hr.renderHeaders(t)+`
`+Rl(t.message)}render(){return this._commit}withoutSignature(){const t=Rl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Rl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return hre(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Hr.justMessage(t._commit);let{signature:o}=await n({payload:a,secretKey:r});o=Rl(o);const l=Hr.justHeaders(t._commit)+`
gpgsig`+mE(o)+`
`+i;return Hr.from(l)}}async function Nh({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Mi.from([]),oid:r};const{type:a,object:i}=await qr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=bi.from(i).parse().object,Nh({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Hr.from(i).parse().tree,Nh({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new Si(r,a,"tree");return{tree:Mi.from(i),oid:r}}class pre{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let s;try{s=await $t.resolve({fs:t,gitdir:n,ref:r})}catch(u){u instanceof kr&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await Nh({fs:t,cache:this.cache,gitdir:n,oid:s});return l.type="tree",l.mode="40000",o.set(".",l),o})();const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,o=await this.mapPromise,s=o.get(n);if(!s)throw new Error(`No obj for ${n}`);const l=s.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;const{type:u,object:d}=await qr({fs:r,cache:a,gitdir:i,oid:l});if(u!==s.type)throw new Si(l,u,s.type);const h=Mi.from(d);for(const p of h)o.set(Ot.join(n,p.path),p);return h.entries().map(p=>Ot.join(n,p.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=WP(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,s=n.get(t._fullpath).oid,{type:l,object:u}=await qr({fs:r,cache:a,gitdir:i,oid:s});l!=="blob"?t._content=void 0:t._content=new Uint8Array(u)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function So({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,r1,{value:function({fs:n,gitdir:r,cache:a}){return new pre({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class mre{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Ot.join(a,n));return i===null?null:i.map(o=>Ot.join(n,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=Eh(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const o=await(await this._getGitConfig(n,a)).get("core.autocrlf"),s=await n.read(`${r}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let o;await Fa.acquire({fs:r,gitdir:a,cache:i},async function(s){const l=s.entriesMap.get(t._fullpath),u=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),p=typeof Jr<"u"?Jr.platform!=="win32":!0;if(!l||Bv(u,l,h,p)){const g=await t.content();g===void 0?o=void 0:(o=await Gl(Qh.wrap({type:"blob",object:g})),l&&o===l.oid&&(!h||u.mode===l.mode)&&Bv(u,l,h,p)&&s.insert({filepath:t._fullpath,stats:u,oid:o}))}else o=l.oid}),t._oid=o}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await ma.get({fs:t,gitdir:n}),this.config)}}function Ng(){const e=Object.create(null);return Object.defineProperty(e,r1,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new mre({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function gre(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const t5=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class yre{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*bre(e){const t=new yre;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let o=0;o<a;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=e[o].next().value):i[o]=null,r[o]!==void 0&&t.consider(r[o]);if(yield i,t.value===null)return}}async function hu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(l,u)=>u,reduce:o=async(l,u)=>{const d=t5(u);return l!==void 0&&d.unshift(l),d},iterate:s=(l,u)=>Promise.all([...u].map(l))}){const l=a.map(g=>g[r1]({fs:e,dir:n,gitdir:r,cache:t})),u=new Array(l.length).fill("."),d=gre(0,l.length),h=async g=>{d.map(_=>{const x=g[_];g[_]=x&&new l[_].ConstructEntry(x)});const b=(await Promise.all(d.map(_=>{const x=g[_];return x?l[_].readdir(x):[]}))).map(_=>(_===null?[]:_)[Symbol.iterator]());return{entries:g,children:bre(b)}},p=async g=>{const{entries:v,children:b}=await h(g),_=v.find(S=>S&&S._fullpath)._fullpath,x=await i(_,v);if(x!==null){let S=await s(p,b);return S=S.filter(E=>E!==void 0),o(x,S)}};return p(u)}async function K2(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Ot.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?K2(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function vre(e){return wre(e)&&iO(e.then)&&iO(e.catch)}function wre(e){return e&&typeof e=="object"}function iO(e){return typeof e=="function"}function oO(e){return vre((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const sO=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function lO(e,t){if(oO(t))for(const n of sO)e[`_${n}`]=t[n].bind(t);else for(const n of sO)e[`_${n}`]=oE(t[n].bind(t));oO(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=K2.bind(null,e):t.rm?e._rm=oE(t.rm.bind(t)):t.rmdir.length>2?e._rm=oE(t.rmdir.bind(t)):e._rm=K2.bind(null,e)}class ln{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?lO(this,t.promises):lO(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Yt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(Ch(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=Ch(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(n1),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Yt.isBuffer(r)?r:Yt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Je(e,t){if(t===void 0)throw new Di(e)}async function Vv(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function _re({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Je("fs",e),Je("dir",t),Je("gitdir",n);const i=new ln(e),o=[So({ref:r}),Ng(),Jh()];let s=[];await Fa.acquire({fs:i,gitdir:n,cache:a},async function(u){s=u.unmergedPaths});const l=await hu({fs:i,cache:a,dir:t,gitdir:n,trees:o,map:async function(u,[d,h,p]){const g=!await Vv(h,p),v=s.includes(u),b=!await Vv(p,d);if(g||v)return d?{path:u,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(b)return!1;throw new Ag(u)}});await Fa.acquire({fs:i,gitdir:n,cache:a},async function(u){for(const d of l)if(d!==!1){if(!d){await i.rmdir(`${t}/${d.path}`,{recursive:!0}),u.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${t}/${d.path}`,h,{mode:d.mode}),u.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class rp{static async isIgnored({fs:t,dir:n,gitdir:r=Ot.join(n,".git"),filepath:a}){if(zv(a)===".git")return!0;if(a===".")return!1;let i="";const o=Ot.join(r,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:Ot.join(n,".gitignore"),filepath:a}],l=a.split("/").filter(Boolean);for(let d=1;d<l.length;d++){const h=l.slice(0,d).join("/"),p=l.slice(d).join("/");s.push({gitignore:Ot.join(n,h,".gitignore"),filepath:p})}let u=!1;for(const d of s){let h;try{h=await t.read(d.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const p=bne().add(i);p.add(h);const g=Ch(d.filepath);if(g!=="."&&p.ignores(g))return!0;u?u=!p.test(d.filepath).unignored:u=p.test(d.filepath).ignored}return u}}async function xre({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,o=`${t}/${i}`;await e.exists(o)||await e.write(o,n)}let gE=null;async function n5(e){return gE===null&&(gE=Ere()),gE?Sre(e):Gk.deflate(e)}async function Sre(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function Ere(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Fi({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:o=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Qh.wrap({type:n,object:r})),i=await Gl(r),r=Yt.from(await n5(r))),o||await xre({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function r5(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function Cre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:o=!0}){try{Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r);const s=new ln(e);await Fa.acquire({fs:s,gitdir:n,cache:a},async l=>{const d=await(await ma.get({fs:s,gitdir:n})).get("core.autocrlf");return Z2({dir:t,gitdir:n,fs:s,filepath:r,index:l,force:i,parallel:o,autocrlf:d})})}catch(s){throw s.caller="git.add",s}}async function Z2({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:o,autocrlf:s}){r=Array.isArray(r)?r:[r];const l=r.map(async p=>{if(!i&&await rp.isIgnored({fs:n,dir:e,gitdir:t,filepath:p}))return;const g=await n.lstat(Ot.join(e,p));if(!g)throw new kr(p);if(g.isDirectory()){const v=await n.readdir(Ot.join(e,p));if(o){const b=v.map(_=>Z2({dir:e,gitdir:t,fs:n,filepath:[Ot.join(p,_)],index:a,force:i,parallel:o,autocrlf:s}));await Promise.all(b)}else for(const b of v)await Z2({dir:e,gitdir:t,fs:n,filepath:[Ot.join(p,b)],index:a,force:i,parallel:o,autocrlf:s})}else{const v=g.isSymbolicLink()?await n.readlink(Ot.join(e,p)).then(r5):await n.read(Ot.join(e,p),{autocrlf:s});if(v===null)throw new kr(p);const b=await Fi({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:p,stats:g,oid:b})}}),u=await Promise.allSettled(l),d=u.filter(p=>p.status==="rejected").map(p=>p.reason);if(d.length>1)throw new Sg(d);if(d.length===1)throw d[0];return u.filter(p=>p.status==="fulfilled"&&p.value).map(p=>p.value)}async function w0({fs:e,gitdir:t,path:n}){return(await ma.get({fs:e,gitdir:t})).get(n)}function a5(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function pu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await w0({fs:e,gitdir:t,path:"user.name"}),email:await w0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=a5({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function Rh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),o={name:await w0({fs:e,gitdir:t,path:"user.name"}),email:await w0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=a5({},o,a?a.committer:void 0,n,r);if(s.name!==void 0)return s}async function i5({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await qr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=bi.from(i).parse().object,i5({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new Si(r,a,"commit");return{commit:Hr.from(i),oid:r}}async function Ih({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await i5({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function a1({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:p,tree:g}){let v=!1;h||(h=await $t.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,_;try{b=await $t.resolve({fs:e,gitdir:r,ref:h}),_=await Ih({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(l&&v)throw new Tg(h);const x=l?await pu({fs:e,gitdir:r,author:i,commit:_.commit}):await pu({fs:e,gitdir:r,author:i});if(!x)throw new si("author");const S=l?await Rh({fs:e,gitdir:r,author:x,committer:o,commit:_.commit}):await Rh({fs:e,gitdir:r,author:x,committer:o});if(!S)throw new si("committer");return Fa.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=ZP(E.entries).get(".");if(g||(g=await o5({fs:e,gitdir:r,inode:k,dryRun:u})),p?p=await Promise.all(p.map(O=>$t.resolve({fs:e,gitdir:r,ref:O}))):l?p=_.commit.parent:p=b?[b]:[],!a)if(l)a=_.commit.message;else throw new Di("message");let R=Hr.from({tree:g,parent:p,author:x,committer:S,message:a});s&&(R=await Hr.sign(R,n,s));const j=await Fi({fs:e,gitdir:r,type:"commit",object:R.toObject(),dryRun:u});return!d&&!u&&await $t.writeRef({fs:e,gitdir:r,ref:h,value:j}),j})}async function o5({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const l of a)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await o5({fs:e,gitdir:t,inode:l,dryRun:r}));const i=a.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),o=Mi.from(i);return await Fi({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:r})}async function Rg({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new fu("leading-slash");if(a.endsWith("/"))throw new fu("trailing-slash");const i=r,o=await Nh({fs:e,cache:t,gitdir:n,oid:r}),s=o.tree;if(a==="")r=o.oid;else{const l=a.split("/");r=await s5({fs:e,cache:t,gitdir:n,tree:s,pathArray:l,oid:i,filepath:a})}return r}async function s5({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o}){const s=a.shift();for(const l of r)if(l.path===s){if(a.length===0)return l.oid;{const{type:u,object:d}=await qr({fs:e,cache:t,gitdir:n,oid:l.oid});if(u!=="tree")throw new Si(i,u,"tree",o);return r=Mi.from(d),s5({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o})}}throw new kr(`file or directory found at "${i}:${o}"`)}async function ap({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await Rg({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:o}=await Nh({fs:e,cache:t,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function Ig({fs:e,gitdir:t,tree:n}){const r=Mi.from(n).toObject();return await Fi({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function kre({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:o,force:s,author:l,committer:u,signingKey:d}){let h;try{h=await $t.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof kr))throw x}let g=(await ap({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new ss("note",i);typeof o=="string"&&(o=Yt.from(o,"utf8"));const v=await Fi({fs:e,gitdir:r,type:"blob",object:o,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await Ig({fs:e,gitdir:r,tree:g});return await a1({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:u,signingKey:d})}async function Are({fs:e,onSign:t,dir:n,gitdir:r=Ot.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:o,force:s,author:l,committer:u,signingKey:d,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i),Je("note",o),d&&Je("onSign",t);const p=new ln(e),g=await pu({fs:p,gitdir:r,author:l});if(!g)throw new si("author");const v=await Rh({fs:p,gitdir:r,author:g,committer:u});if(!v)throw new si("committer");return await kre({fs:new ln(p),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:o,force:s,author:g,committer:v,signingKey:d})}catch(p){throw p.caller="git.addNote",p}}async function l5({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==Fs.clean(n))throw new ts(n,Fs.clean(n));const i=await ma.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new ss("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await ma.save({fs:e,gitdir:t,config:i})}async function Tre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("remote",r),Je("url",a),await l5({fs:new ln(e),gitdir:n,remote:r,url:a,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function Nre({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:o=a,gpgsig:s,object:l,signingKey:u,force:d=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!d&&await $t.exists({fs:e,gitdir:r,ref:a}))throw new ss("tag",a);const h=await $t.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:p}=await qr({fs:e,cache:t,gitdir:r,oid:h});let g=bi.from({object:h,type:p,tag:a.replace("refs/tags/",""),tagger:i,message:o,gpgsig:s});u&&(g=await bi.sign(g,n,u));const v=await Fi({fs:e,gitdir:r,type:"tag",object:g.toObject()});await $t.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function Rre({fs:e,onSign:t,dir:n,gitdir:r=Ot.join(n,".git"),ref:a,tagger:i,message:o=a,gpgsig:s,object:l,signingKey:u,force:d=!1,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("ref",a),u&&Je("onSign",t);const p=new ln(e),g=await pu({fs:p,gitdir:r,author:i});if(!g)throw new si("tagger");return await Nre({fs:p,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:o,gpgsig:s,object:l,signingKey:u,force:d})}catch(p){throw p.caller="git.annotatedTag",p}}async function Ire({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==Fs.clean(n))throw new ts(n,Fs.clean(n));const o=`refs/heads/${n}`;if(!i&&await $t.exists({fs:e,gitdir:t,ref:o}))throw new ss("branch",n,!1);let s;try{s=await $t.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}s&&await $t.writeRef({fs:e,gitdir:t,ref:o,value:s}),a&&await $t.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Ore({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,object:a,checkout:i=!1,force:o=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ire({fs:new ln(e),gitdir:n,ref:r,object:a,checkout:i,force:o})}catch(s){throw s.caller="git.branch",s}}const c5=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function Yk({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:o,ref:s,filepaths:l,noCheckout:u,noUpdateHead:d,dryRun:h,force:p,track:g=!0}){let v;if(r)try{v=await $t.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await $t.resolve({fs:e,gitdir:i,ref:s})}catch(_){if(s==="HEAD")throw _;const x=`${o}/${s}`;if(b=await $t.resolve({fs:e,gitdir:i,ref:x}),g){const S=await ma.get({fs:e,gitdir:i});await S.set(`branch.${s}.remote`,o),await S.set(`branch.${s}.merge`,`refs/heads/${s}`),await ma.save({fs:e,gitdir:i,config:S})}await $t.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:b})}if(!u){let _;try{_=await jre({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:s,force:p,filepaths:l})}catch(k){throw k instanceof kr&&k.data.what===b?new bg(s,b):k}const x=_.filter(([k])=>k==="conflict").map(([k,R])=>R);if(x.length>0)throw new yg(x);const S=_.filter(([k])=>k==="error").map(([k,R])=>R);if(S.length>0)throw new In(S.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let E=0;const C=_.length;await Fa.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(_.filter(([R])=>R==="delete"||R==="delete-index").map(async function([R,j]){const O=`${a}/${j}`;R==="delete"&&await e.rm(O),k.delete({filepath:j}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Fa.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[R,j]of _)if(R==="rmdir"||R==="rmdir-index"){const O=`${a}/${j}`;try{R==="rmdir-index"&&k.delete({filepath:j}),await e.rmdir(O),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(L){if(L.code==="ENOTEMPTY")console.log(`Did not delete ${j} because directory is not empty`);else throw L}}}),await Promise.all(_.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,R]){const j=`${a}/${R}`;await e.mkdir(j),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Fa.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(_.filter(([R])=>R==="create"||R==="create-index"||R==="update"||R==="mkdir-index").map(async function([R,j,O,L,z]){const Y=`${a}/${j}`;try{if(R!=="create-index"&&R!=="mkdir-index"){const{object:K}=await qr({fs:e,cache:t,gitdir:i,oid:O});if(z&&await e.rm(Y),L===33188)await e.write(Y,K);else if(L===33261)await e.write(Y,K,{mode:511});else if(L===40960)await e.writelink(Y,K);else throw new In(`Invalid mode 0o${L.toString(8)} detected in blob ${O}`)}const F=await e.lstat(Y);L===33261&&(F.mode=493),R==="mkdir-index"&&(F.mode=57344),k.insert({filepath:j,stats:F,oid:O}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(F){console.log(F)}}))}),r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!d){const _=await $t.expand({fs:e,gitdir:i,ref:s});_.startsWith("refs/heads")?await $t.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:_}):await $t.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function jre({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:o,filepaths:s}){let l=0;return hu({fs:e,cache:t,dir:r,gitdir:a,trees:[So({ref:i}),Ng(),Jh()],map:async function(u,[d,h,p]){if(u===".")return;if(s&&!s.some(v=>c5(u,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!p,!!d,!!h].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(u)?["delete",u]:void 0;case"010":switch(await d.type()){case"tree":return["mkdir",u];case"blob":return["create",u,await d.oid(),await d.mode()];case"commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`new entry Unhandled type ${await d.type()}`]}case"011":switch(`${await d.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",u];case"blob-blob":return await d.oid()!==await h.oid()?o?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]:await d.mode()!==await h.mode()?o?["update",u,await d.oid(),await d.mode(),!0]:["conflict",u]:["create-index",u,await d.oid(),await d.mode()];case"commit-tree":return;case"commit-blob":return["conflict",u];default:return["error",`new entry Unhandled type ${d.type}`]}case"100":return["delete-index",u];case"101":switch(await p.type()){case"tree":return["rmdir",u];case"blob":return await p.oid()!==await h.oid()?o?["delete",u]:["conflict",u]:["delete",u];case"commit":return["rmdir-index",u];default:return["error",`delete entry Unhandled type ${await p.type()}`]}case"110":case"111":switch(`${await p.type()}-${await d.type()}`){case"tree-tree":return;case"blob-blob":{if(await p.oid()===await d.oid()&&await p.mode()===await d.mode()&&!o)return;if(h){if(await h.oid()!==await p.oid()&&await h.oid()!==await d.oid())return o?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]}else if(o)return["update",u,await d.oid(),await d.mode(),await d.mode()!==await p.mode()];return await d.mode()!==await p.mode()?["update",u,await d.oid(),await d.mode(),!0]:await d.oid()!==await p.oid()?["update",u,await d.oid(),await d.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",u,await d.oid()];case"blob-tree":return["update-blob-to-tree",u];case"commit-commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`update entry Unhandled type ${await p.type()}-${await d.type()}`]}}},reduce:async function(u,d){return d=t5(d),u?u&&u[0]==="rmdir"?(d.push(u),d):(d.unshift(u),d):d}})}async function u5({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Ot.join(r,".git"),remote:i="origin",ref:o,filepaths:s,noCheckout:l=!1,noUpdateHead:u=o===void 0,dryRun:d=!1,force:h=!1,track:p=!0,cache:g={}}){try{Je("fs",e),Je("dir",r),Je("gitdir",a);const v=o||"HEAD";return await Yk({fs:new ln(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:s,noCheckout:l,noUpdateHead:u,dryRun:d,force:h,track:p})}catch(v){throw v.caller="git.checkout",v}}const Dre=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function ud(e){const t=Dre.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function Cu({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await $t.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await $t.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:ud(a)}function Mre(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function d5({username:e="",password:t=""}){return`Basic ${Yt.from(`${e}:${t}`).toString("base64")}`}async function Og(e,t){const n=JP(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Gv(e){let t=0;const n=[];await Og(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function cO(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function Y2(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class aa{static flush(){return Yt.from("0000","utf8")}static delim(){return Yt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Yt.from(t));const n=t.length+4,r=Y2(4,n);return Yt.concat([Yt.from(r,"utf8"),t])}static streamReader(t){const n=new QP(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function uO(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function dO(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=aa.streamReader(e);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new vg;if(o.includes("version 2"))return uO(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new zd(`# service=${t}\\n`,o.toString("utf8"));let s=await i();for(;s===null;)s=await i();if(s===!0)return{capabilities:n,refs:r,symrefs:a};if(s=s.toString("utf8"),s.includes("version 2"))return uO(i);const[l,u]=yE(s,"\0","\\x00");if(u.split(" ").map(d=>n.add(d)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[d,h]=yE(l," "," ");for(r.set(h,d);;){const p=await i();if(p===!0)break;if(p!==null){const[g,v]=yE(p.toString("utf8")," "," ");r.set(v,g)}}}for(const d of n)if(d.startsWith("symref=")){const h=d.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function yE(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new zd(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const fO=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,hO=(e,t)=>{(t.username||t.password)&&(e.Authorization=d5(t)),t.headers&&Object.assign(e,t.headers)},bE=async e=>{try{const t=Yt.from(await Gv(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Wv{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:o,service:s,url:l,headers:u,protocolVersion:d}){let{url:h,auth:p}=cO(l);const g=o?fO(o,h):h;(p.username||p.password)&&(u.Authorization=d5(p)),d===2&&(u["Git-Protocol"]="version=2");let v,b,_=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${s}`,headers:u}),b=!1,v.statusCode===401||v.statusCode===203){const x=_?i:r;if(x){if(p=await x(h,{...p,headers:{...u}}),p&&p.cancel)throw new np;p&&(hO(u,p),_=!0,b=!0)}}else v.statusCode===200&&_&&a&&await a(h,p);while(b);if(v.statusCode!==200){const{response:x}=await bE(v);throw new Ah(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${s}-advertisement`){const x=await dO(v.body,{service:s});return x.auth=p,x}else{const{preview:x,response:S,data:E}=await bE(v);try{const C=await dO([E],{service:s});return C.auth=p,C}catch{throw new Eg(x,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:o,body:s,headers:l}){const u=cO(i);u&&(i=u.url),r&&(i=fO(r,i)),l["content-type"]=`application/x-${a}-request`,l.accept=`application/x-${a}-result`,hO(l,o);const d=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:s,headers:l});if(d.statusCode!==200){const{response:h}=bE(d);throw new Ah(d.statusCode,d.statusMessage,h)}return d}}function Pre({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class i1{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Wv),n.set("https",Wv);const r=Pre({url:t});if(!r)throw new kg(t);if(n.has(r.transport))return n.get(r.transport);throw new Cg(t,r.transport,r.transport==="ssh"?Mre(t):void 0)}}let ad=null;class _0{static async read({fs:t,gitdir:n}){ad===null&&(ad=new v0);const r=Ot.join(n,"shallow"),a=new Set;return await ad.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(o=>a.add(o))}),a}static async write({fs:t,gitdir:n,oids:r}){ad===null&&(ad=new v0);const a=Ot.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await ad.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await ad.acquire(a,async function(){await t.rm(a)})}}async function Fre({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function Lre({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Ot.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const s=`${n}/objects/pack/${o}`,l=await Zk({fs:e,cache:t,filename:s,getExternalRefDelta:a});if(l.error)throw new In(l.error);if(l.offsets.has(r))return!0}return!1}async function pO({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=s=>qr({fs:e,cache:t,gitdir:n,oid:s});let o=await Fre({fs:e,gitdir:n,oid:r});return o||(o=await Lre({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),o}function $re(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function f5(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const o1={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Zb{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Bre(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function h5(e){const t=new Zb;let n="";return(async()=>(await Og(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Bre(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class p5{static demux(t){const n=aa.streamReader(t),r=new Zb,a=new Zb,i=new Zb,o=async function(){const s=await n();if(s===null)return o();if(s===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(s[0]){case 1:{a.write(s.slice(1));break}case 2:{i.write(s.slice(1));break}case 3:{const l=s.slice(1);i.write(l),r.end(),i.end(),a.destroy(new Error(l.toString("utf8")));return}default:r.write(s)}o()};return o(),{packetlines:r,packfile:a,progress:i}}}async function zre(e){const{packetlines:t,packfile:n,progress:r}=p5.demux(e),a=[],i=[],o=[];let s=!1,l=!1;return new Promise((u,d)=>{Og(t,h=>{const p=h.toString("utf8").trim();if(p.startsWith("shallow")){const g=p.slice(-41).trim();g.length!==40&&d(new du(g)),a.push(g)}else if(p.startsWith("unshallow")){const g=p.slice(-41).trim();g.length!==40&&d(new du(g)),i.push(g)}else if(p.startsWith("ACK")){const[,g,v]=p.split(" ");o.push({oid:g,status:v}),v||(l=!0)}else p.startsWith("NAK")?(s=!0,l=!0):(l=!0,s=!0);l&&(e.error?d(e.error):u({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))}).finally(()=>{l||(e.error?d(e.error):u({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))})})}function Ure({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:o=[]}){const s=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const u of t)s.push(aa.encode(`want ${u}${l}
`)),l="";for(const u of r)s.push(aa.encode(`shallow ${u}
`));a!==null&&s.push(aa.encode(`deepen ${a}
`)),i!==null&&s.push(aa.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const u of o)s.push(aa.encode(`deepen-not ${u}
`));s.push(aa.flush());for(const u of n)s.push(aa.encode(`have ${u}
`));return s.push(aa.encode(`done
`)),s}async function Xk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:l,ref:u,remoteRef:d,remote:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:R=!1}){const j=u||await Cu({fs:e,gitdir:l,test:!0}),O=await ma.get({fs:e,gitdir:l}),L=h||j&&await O.get(`branch.${j}.remote`)||"origin",z=p||await O.get(`remote.${L}.url`);if(typeof z>"u")throw new Di("remote OR url");const Y=d||j&&await O.get(`branch.${j}.merge`)||u||"HEAD";g===void 0&&(g=await O.get("http.corsProxy"));const F=i1.getRemoteHelperFor({url:z}),K=await F.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:g,service:"git-upload-pack",url:z,headers:C,protocolVersion:1}),q=K.auth,fe=K.refs;if(fe.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!K.capabilities.has("shallow"))throw new Gc("shallow","depth");if(b!==null&&!K.capabilities.has("deepen-since"))throw new Gc("deepen-since","since");if(_.length>0&&!K.capabilities.has("deepen-not"))throw new Gc("deepen-not","exclude");if(x===!0&&!K.capabilities.has("deepen-relative"))throw new Gc("deepen-relative","relative");const{oid:te,fullref:re}=$t.resolveAgainstMap({ref:Y,map:fe});for(const Le of fe.keys())Le===re||Le==="HEAD"||Le.startsWith("refs/heads/")||S&&Le.startsWith("refs/tags/")||fe.delete(Le);const X=f5([...K.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${o1.agent}`]);x&&X.push("deepen-relative");const ae=E?[te]:fe.values(),U=E?[j]:await $t.listRefs({fs:e,gitdir:l,filepath:"refs"});let ee=[];for(let Le of U)try{Le=await $t.expand({fs:e,gitdir:l,ref:Le});const Ie=await $t.resolve({fs:e,gitdir:l,ref:Le});await pO({fs:e,cache:t,gitdir:l,oid:Ie})&&ee.push(Ie)}catch{}ee=[...new Set(ee)];const J=await _0.read({fs:e,gitdir:l}),ue=K.capabilities.has("shallow")?[...J]:[],be=Ure({capabilities:X,wants:ae,haves:ee,shallows:ue,depth:v,since:b,exclude:_}),_e=Yt.from(await Gv(be)),Pe=await F.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:z,auth:q,body:[_e],headers:C}),Ne=await zre(Pe.body);Pe.headers&&(Ne.headers=Pe.headers);for(const Le of Ne.shallows)if(!J.has(Le))try{const{object:Ie}=await qr({fs:e,cache:t,gitdir:l,oid:Le}),V=new Hr(Ie),me=await Promise.all(V.headers().parent.map(se=>pO({fs:e,cache:t,gitdir:l,oid:se})));me.length===0||me.every(se=>se)||J.add(Le)}catch{J.add(Le)}for(const Le of Ne.unshallows)J.delete(Le);if(await _0.write({fs:e,gitdir:l,oids:J}),E){const Le=new Map([[re,te]]),Ie=new Map;let V=10,me=re;for(;V--;){const ie=K.symrefs.get(me);if(ie===void 0)break;Ie.set(me,ie),me=ie}const Ae=fe.get(me);Ae&&Le.set(me,Ae);const{pruned:se}=await $t.updateRemoteRefs({fs:e,gitdir:l,remote:L,refs:Le,symrefs:Ie,tags:S,prune:k});k&&(Ne.pruned=se)}else{const{pruned:Le}=await $t.updateRemoteRefs({fs:e,gitdir:l,remote:L,refs:fe,symrefs:K.symrefs,tags:S,prune:k,pruneTags:R});k&&(Ne.pruned=Le)}if(Ne.HEAD=K.symrefs.get("HEAD"),Ne.HEAD===void 0){const{oid:Le}=$t.resolveAgainstMap({ref:"HEAD",map:fe});for(const[Ie,V]of fe.entries())if(Ie!=="HEAD"&&V===Le){Ne.HEAD=Ie;break}}const Re=re.startsWith("refs/tags")?"tag":"branch";if(Ne.FETCH_HEAD={oid:te,description:`${Re} '${ud(re)}' of ${z}`},r||a){const Le=h5(Ne.progress);Og(Le,async Ie=>{if(a&&await a(Ie),r){const V=Ie.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);V&&await r({phase:V[1].trim(),loaded:parseInt(V[2],10),total:parseInt(V[3],10)})}})}const Ce=Yt.from(await Gv(Ne.packfile));if(Pe.body.error)throw Pe.body.error;const Fe=Ce.slice(-20).toString("hex"),Qe={defaultBranch:Ne.HEAD,fetchHead:Ne.FETCH_HEAD.oid,fetchHeadDescription:Ne.FETCH_HEAD.description};if(Ne.headers&&(Qe.headers=Ne.headers),k&&(Qe.pruned=Ne.pruned),Fe!==""&&!$re(Ce)){Qe.packfile=`objects/pack/pack-${Fe}.pack`;const Le=Ot.join(l,Qe.packfile);await e.write(Le,Ce);const Ie=me=>qr({fs:e,cache:t,gitdir:l,oid:me}),V=await kh.fromPack({pack:Ce,getExternalRefDelta:Ie,onProgress:r});await e.write(Le.replace(/\.pack$/,".idx"),await V.toBuffer())}return Qe}async function m5({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Ot.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await e.mkdir(o);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function Hre({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:l,dir:u,gitdir:d,url:h,corsProxy:p,ref:g,remote:v,depth:b,since:_,exclude:x,relative:S,singleBranch:E,noCheckout:C,noTags:k,headers:R}){try{if(await m5({fs:e,gitdir:d}),await l5({fs:e,gitdir:d,remote:v,url:h,force:!1}),p){const L=await ma.get({fs:e,gitdir:d});await L.set("http.corsProxy",p),await ma.save({fs:e,gitdir:d,config:L})}const{defaultBranch:j,fetchHead:O}=await Xk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:d,ref:g,remote:v,corsProxy:p,depth:b,since:_,exclude:x,relative:S,singleBranch:E,headers:R,tags:!k});if(O===null)return;g=g||j,g=g.replace("refs/heads/",""),await Yk({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:u,gitdir:d,ref:g,remote:v,noCheckout:C})}catch(j){throw await e.rmdir(d,{recursive:!0,maxRetries:10}).catch(()=>{}),j}}async function qre({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:l,gitdir:u=Ot.join(l,".git"),url:d,corsProxy:h=void 0,ref:p=void 0,remote:g="origin",depth:v=void 0,since:b=void 0,exclude:_=[],relative:x=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:k={},cache:R={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",u),E||Je("dir",l),Je("url",d),await Hre({fs:new ln(e),cache:R,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:l,gitdir:u,url:d,corsProxy:h,ref:p,remote:g,depth:v,since:b,exclude:_,relative:x,singleBranch:S,noCheckout:E,noTags:C,headers:k})}catch(j){throw j.caller="git.clone",j}}async function Vre({fs:e,onSign:t,dir:n,gitdir:r=Ot.join(n,".git"),message:a,author:i,committer:o,signingKey:s,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:p,tree:g,cache:v={}}){try{Je("fs",e),l||Je("message",a),s&&Je("onSign",t);const b=new ln(e);return await a1({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:l,dryRun:u,noUpdateBranch:d,ref:h,parent:p,tree:g})}catch(b){throw b.caller="git.commit",b}}async function Gre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Je("fs",e),Je("gitdir",n),await Cu({fs:new ln(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Wre({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await $t.exists({fs:e,gitdir:t,ref:n}))throw new kr(n);const a=await $t.expand({fs:e,gitdir:t,ref:n}),i=await Cu({fs:e,gitdir:t,fullname:!0});if(a===i){const l=await $t.resolve({fs:e,gitdir:t,ref:a});await $t.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await $t.deleteRef({fs:e,gitdir:t,ref:a});const o=ud(n),s=await ma.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await ma.save({fs:e,gitdir:t,config:s})}async function Kre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Wre({fs:new ln(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Zre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r}){try{Je("fs",e),Je("ref",r),await $t.deleteRef({fs:new ln(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Yre({fs:e,gitdir:t,remote:n}){const r=await ma.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await ma.save({fs:e,gitdir:t,config:r})}async function Xre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),remote:r}){try{return Je("fs",e),Je("remote",r),await Yre({fs:new ln(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Jre({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await $t.deleteRef({fs:e,gitdir:t,ref:n})}async function Qre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Jre({fs:new ln(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function eae({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function tae({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let o=await e.readdir(Ot.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const l=`${n}/objects/pack/${s}`,u=await Zk({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(u.error)throw new In(u.error);for(const d of u.offsets.keys())d.startsWith(r)&&i.push(d)}return i}async function nae({fs:e,cache:t,gitdir:n,oid:r}){const a=s=>qr({fs:e,cache:t,gitdir:n,oid:s}),i=await eae({fs:e,gitdir:n,oid:r}),o=await tae({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const s of o)i.indexOf(s)===-1&&i.push(s);if(i.length===1)return i[0];throw i.length>1?new gg("oids",r,i):new kr(`an object matching "${r}"`)}async function rae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await nae({fs:new ln(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function aae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await $t.expand({fs:new ln(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function Jk({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let o=r.map((s,l)=>({index:l,oid:s}));for(;o.length;){const s=new Set;for(const{oid:u,index:d}of o)a[u]||(a[u]=new Set),a[u].add(d),a[u].size===i&&s.add(u);if(s.size>0)return[...s];const l=new Map;for(const{oid:u,index:d}of o)try{const{object:h}=await qr({fs:e,cache:t,gitdir:n,oid:u}),p=Hr.from(h),{parent:g}=p.parseHeaders();for(const v of g)(!a[v]||!a[v].has(d))&&l.set(v+":"+d,{oid:v,index:d})}catch{}o=Array.from(l.values())}return[]}const vE=/^.*(\r?\n|$)/gm;function iae({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],o=t[2],s=i.match(vE),l=a.match(vE),u=o.match(vE),d=Ene(s,l,u),h=7;let p="",g=!0;for(const v of d)v.ok&&(p+=v.ok.join("")),v.conflict&&(g=!1,p+=`${"<".repeat(h)} ${n}
`,p+=v.conflict.a.join(""),p+=`${"=".repeat(h)}
`,p+=v.conflict.b.join(""),p+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:p}}async function oae({fs:e,cache:t,dir:n,gitdir:r=Ot.join(n,".git"),index:a,ourOid:i,baseOid:o,theirOid:s,ourName:l="ours",baseName:u="base",theirName:d="theirs",dryRun:h=!1,abortOnConflict:p=!0,mergeDriver:g}){const v=So({ref:i}),b=So({ref:o}),_=So({ref:s}),x=[],S=[],E=[],C=[],k=await hu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,_],map:async function(R,[j,O,L]){const z=zv(R),Y=await Vv(j,O),F=await Vv(L,O);switch(`${Y}-${F}`){case"false-false":return{mode:await O.mode(),path:z,oid:await O.oid(),type:await O.type()};case"false-true":return L?{mode:await L.mode(),path:z,oid:await L.oid(),type:await L.type()}:void 0;case"true-false":return j?{mode:await j.mode(),path:z,oid:await j.oid(),type:await j.type()}:void 0;case"true-true":{if(j&&O&&L&&await j.type()==="blob"&&await O.type()==="blob"&&await L.type()==="blob")return sae({fs:e,gitdir:r,path:z,ours:j,base:O,theirs:L,ourName:l,baseName:u,theirName:d,mergeDriver:g}).then(async K=>{if(K.cleanMerge)p||a.insert({filepath:R,oid:K.mergeResult.oid,stage:0});else if(x.push(R),S.push(R),!p){const q=await O.oid(),fe=await j.oid(),te=await L.oid();a.delete({filepath:R}),a.insert({filepath:R,oid:q,stage:1}),a.insert({filepath:R,oid:fe,stage:2}),a.insert({filepath:R,oid:te,stage:3})}return K.mergeResult});if(O&&!j&&L&&await O.type()==="blob"&&await L.type()==="blob"){if(x.push(R),E.push(R),!p){const K=await O.oid(),q=await L.oid();a.delete({filepath:R}),a.insert({filepath:R,oid:K,stage:1}),a.insert({filepath:R,oid:q,stage:3})}return{mode:await L.mode(),oid:await L.oid(),type:"blob",path:z}}if(O&&j&&!L&&await O.type()==="blob"&&await j.type()==="blob"){if(x.push(R),C.push(R),!p){const K=await O.oid(),q=await j.oid();a.delete({filepath:R}),a.insert({filepath:R,oid:K,stage:1}),a.insert({filepath:R,oid:q,stage:2})}return{mode:await j.mode(),oid:await j.oid(),type:"blob",path:z}}if(O&&!j&&!L&&await O.type()==="blob")return;throw new ep}}},reduce:x.length!==0&&(!n||p)?void 0:async(R,j)=>{const O=j.filter(Boolean);if(R&&!(R&&R.type==="tree"&&O.length===0)){if(O.length>0){const z=new Mi(O).toObject(),Y=await Fi({fs:e,gitdir:r,type:"tree",object:z,dryRun:h});R.oid=Y}return R}}});return x.length!==0?(n&&!p&&await hu({fs:e,cache:t,dir:n,gitdir:r,trees:[So({ref:k.oid})],map:async function(R,[j]){const O=`${n}/${R}`;if(await j.type()==="blob"){const L=await j.mode(),z=new TextDecoder().decode(await j.content());await e.write(O,z,{mode:L})}return!0}}),new tp(x,S,E,C)):k.oid}async function sae({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:o,theirName:s,baseName:l,dryRun:u,mergeDriver:d=iae}){const h="blob",p=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};const g=Yt.from(await r.content()).toString("utf8"),v=Yt.from(await a.content()).toString("utf8"),b=Yt.from(await i.content()).toString("utf8"),{mergedText:_,cleanMerge:x}=await d({branches:[l,o,s],contents:[v,g,b],path:n}),S=await Fi({fs:e,gitdir:t,type:"blob",object:Yt.from(_,"utf8"),dryRun:u});return{cleanMerge:x,mergeResult:{mode:p,path:n,oid:S,type:h}}}async function g5({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:p,committer:g,signingKey:v,onSign:b,mergeDriver:_}){a===void 0&&(a=await Cu({fs:e,gitdir:r,fullname:!0})),a=await $t.expand({fs:e,gitdir:r,ref:a}),i=await $t.expand({fs:e,gitdir:r,ref:i});const x=await $t.resolve({fs:e,gitdir:r,ref:a}),S=await $t.resolve({fs:e,gitdir:r,ref:i}),E=await Jk({fs:e,cache:t,gitdir:r,oids:[x,S]});if(E.length!==1)throw new ep;const C=E[0];if(C===S)return{oid:x,alreadyMerged:!0};if(o&&C===x)return!l&&!u&&await $t.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(s)throw new wg;const k=await Fa.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async j=>oae({fs:e,cache:t,dir:n,gitdir:r,index:j,ourOid:x,theirOid:S,baseOid:C,ourName:ud(a),baseName:"base",theirName:ud(i),dryRun:l,abortOnConflict:d,mergeDriver:_}));if(k instanceof tp)throw k;return h||(h=`Merge branch '${ud(i)}' into ${ud(a)}`),{oid:await a1({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[x,S],author:p,committer:g,signingKey:v,onSign:b,dryRun:l,noUpdateBranch:u}),tree:k,mergeCommit:!0}}}async function y5({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:l,gitdir:u,ref:d,url:h,remote:p,remoteRef:g,prune:v,pruneTags:b,fastForward:_,fastForwardOnly:x,corsProxy:S,singleBranch:E,headers:C,author:k,committer:R,signingKey:j}){try{if(!d){const z=await Cu({fs:e,gitdir:u});if(!z)throw new Di("ref");d=z}const{fetchHead:O,fetchHeadDescription:L}=await Xk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:u,corsProxy:S,ref:d,url:h,remote:p,remoteRef:g,singleBranch:E,headers:C,prune:v,pruneTags:b});await g5({fs:e,cache:t,gitdir:u,ours:d,theirs:O,fastForward:_,fastForwardOnly:x,message:`Merge ${L}`,author:k,committer:R,signingKey:j,dryRun:!1,noUpdateBranch:!1}),await Yk({fs:e,cache:t,onProgress:r,dir:l,gitdir:u,ref:d,remote:p,noCheckout:!1})}catch(O){throw O.caller="git.pull",O}}async function lae({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:l=Ot.join(s,".git"),ref:u,url:d,remote:h,remoteRef:p,corsProxy:g,singleBranch:v,headers:b={},cache:_={}}){try{Je("fs",e),Je("http",t),Je("gitdir",l);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await y5({fs:new ln(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:l,ref:u,url:d,remote:h,remoteRef:p,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:b,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function cae({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:l=Ot.join(s,".git"),ref:u,remote:d,remoteRef:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:R=!1,cache:j={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",l),await Xk({fs:new ln(e),cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,gitdir:l,ref:u,remote:d,remoteRef:h,url:p,corsProxy:g,depth:v,since:b,exclude:_,relative:x,tags:S,singleBranch:E,headers:C,prune:k,pruneTags:R})}catch(O){throw O.caller="git.fetch",O}}async function uae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oids:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await Jk({fs:new ln(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function b5({fs:e,filepath:t}){if(await e.exists(Ot.join(t,".git")))return t;{const n=Ch(t);if(n===t)throw new kr(`git root for ${t}`);return b5({fs:e,filepath:n})}}async function dae({fs:e,filepath:t}){try{return Je("fs",e),Je("filepath",t),await b5({fs:new ln(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function fae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await w0({fs:new ln(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function hae({fs:e,gitdir:t,path:n}){return(await ma.get({fs:e,gitdir:t})).getall(n)}async function pae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await hae({fs:new ln(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function mae({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1}){try{Je("http",e),Je("url",i);const u=await i1.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),d={capabilities:[...u.capabilities]};for(const[h,p]of u.refs){const g=h.split("/"),v=g.pop();let b=d;for(const _ of g)b[_]=b[_]||{},b=b[_];b[v]=p}for(const[h,p]of u.symrefs){const g=h.split("/"),v=g.pop();let b=d;for(const _ of g)b[_]=b[_]||{},b=b[_];b[v]=p}return d}catch(l){throw l.caller="git.getRemoteInfo",l}}function v5(e,t,n,r){const a=[];for(const[i,o]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),u=a[a.length-1],d=u.ref===l?u:a.find(h=>h.ref===l);if(d===void 0)throw new Error("I did not expect this to happen");d.peeled=o}continue}const s={ref:i,oid:o};n&&e.symrefs.has(i)&&(s.target=e.symrefs.get(i)),a.push(s)}return a}async function gae({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:l=2}){try{Je("http",e),Je("url",i);const d=await i1.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:l});if(d.protocolVersion===2)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const p of d.capabilities){const[g,v]=p.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:v5(d,void 0,!0,!0)}}catch(u){throw u.caller="git.getRemoteInfo2",u}}async function yae({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Qh.wrap({type:e,object:t})),r=await Gl(t)),{oid:r,object:t}}async function bae({object:e}){try{Je("object",e),typeof e=="string"?e=Yt.from(e,"utf8"):e=Yt.from(e);const t="blob",{oid:n,object:r}=await yae({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function vae({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Ot.join(r,i);const o=await e.read(i),s=u=>qr({fs:e,cache:t,gitdir:a,oid:u}),l=await kh.fromPack({pack:o,getExternalRefDelta:s,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function wae({fs:e,onProgress:t,dir:n,gitdir:r=Ot.join(n,".git"),filepath:a,cache:i={}}){try{return Je("fs",e),Je("dir",n),Je("gitdir",n),Je("filepath",a),await vae({fs:new ln(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(o){throw o.caller="git.indexPack",o}}async function _ae({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Ot.join(n,".git"),defaultBranch:a="master"}){try{return Je("fs",e),Je("gitdir",r),t||Je("dir",n),await m5({fs:new ln(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function w5({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const o=await _0.read({fs:e,gitdir:n});if(!r)throw new Di("oid");if(!a)throw new Di("ancestor");if(r===a)return!1;const s=[r],l=new Set;let u=0;for(;s.length;){if(u++===i)throw new xg(i);const d=s.shift(),{type:h,object:p}=await qr({fs:e,cache:t,gitdir:n,oid:d});if(h!=="commit")throw new Si(d,h,"commit");const g=Hr.from(p).parse();for(const v of g.parent)if(v===a)return!0;if(!o.has(d))for(const v of g.parent)l.has(v)||(s.push(v),l.add(v))}return!1}async function xae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:o={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),Je("ancestor",a),await w5({fs:new ln(e),cache:o,gitdir:n,oid:r,ancestor:a,depth:i})}catch(s){throw s.caller="git.isDescendent",s}}async function Sae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r),rp.isIgnored({fs:new ln(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function Eae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),remote:r}){try{return Je("fs",e),Je("gitdir",n),$t.listBranches({fs:new ln(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function Cae({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await $t.resolve({gitdir:t,fs:e,ref:n}),i=[];return await _5({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Fa.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function _5({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:o}=await ap({fs:e,cache:t,gitdir:n,oid:r});for(const s of o)s.type==="tree"?await _5({fs:e,cache:t,gitdir:n,oid:s.oid,filenames:a,prefix:Ot.join(i,s.path)}):a.push(Ot.join(i,s.path))}async function kae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),await Cae({fs:new ln(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function Aae({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await $t.resolve({gitdir:n,fs:e,ref:r})}catch(s){if(s instanceof kr)return[]}return(await ap({fs:e,cache:t,gitdir:n,oid:a})).tree.map(s=>({target:s.path,note:s.oid}))}async function Tae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Aae({fs:new ln(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function Nae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("gitdir",n),$t.listRefs({fs:new ln(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function Rae({fs:e,gitdir:t}){const n=await ma.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function Iae({fs:e,dir:t,gitdir:n=Ot.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),await Rae({fs:new ln(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Oae(e){const t=aa.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...o]=r.split(" "),s={ref:i,oid:a};for(const l of o){const[u,d]=l.split(":");u==="symref-target"?s.target=d:u==="peeled"&&(s.peeled=d)}n.push(s)}return n}async function jae({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(aa.encode(`command=ls-refs
`)),r.push(aa.encode(`agent=${o1.agent}
`)),(n||t||e)&&r.push(aa.delim()),n&&r.push(aa.encode("peel")),t&&r.push(aa.encode("symrefs")),e&&r.push(aa.encode(`ref-prefix ${e}`)),r.push(aa.flush()),r}async function Dae({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:l=2,prefix:u,symrefs:d,peelTags:h}){try{Je("http",e),Je("url",i);const p=await Wv.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:l});if(p.protocolVersion===1)return v5(p,u,d,h);const g=await jae({prefix:u,symrefs:d,peelTags:h}),v=await Wv.connect({http:e,auth:p.auth,headers:o,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,body:g});return Oae(v.body)}catch(p){throw p.caller="git.listServerRefs",p}}async function Mae({fs:e,dir:t,gitdir:n=Ot.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),$t.listTags({fs:new ln(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Pae(e,t){return e.committer.timestamp-t.committer.timestamp}const Fae="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function mO({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===Fae)return;const i=r;let o;const s=await Nh({fs:e,cache:t,gitdir:n,oid:r}),l=s.tree;return a===s.oid?o=s.path:(o=await x5({fs:e,cache:t,gitdir:n,tree:l,fileId:a,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function x5({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:o=[],parentPath:s=""}){const l=r.entries().map(function(u){let d;return u.oid===a?(d=Ot.join(s,u.path),o.push(d)):u.type==="tree"&&(d=qr({fs:e,cache:t,gitdir:n,oid:u.oid}).then(function({object:h}){return x5({fs:e,cache:t,gitdir:n,tree:Mi.from(h),fileId:a,oid:i,filepaths:o,parentPath:Ot.join(s,u.path)})})),d});return await Promise.all(l),o}async function Lae({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:l}){const u=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),d=[],h=await _0.read({fs:e,gitdir:n}),p=await $t.resolve({fs:e,gitdir:n,ref:a}),g=[await Ih({fs:e,cache:t,gitdir:n,oid:p})];let v,b,_;function x(S){_&&r&&d.push(S)}for(;g.length>0;){const S=g.pop();if(u!==void 0&&S.commit.committer.timestamp<=u)break;if(r){let E;try{E=await Rg({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),b&&v!==E&&d.push(b),v=E,b=S,_=!0}catch(C){if(C instanceof kr){let k=l&&v;if(k&&(k=await mO({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),k))if(Array.isArray(k)){if(b){const R=await mO({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(R))if(k=k.filter(j=>R.indexOf(j)===-1),k.length===1)k=k[0],r=k,b&&d.push(b);else{k=!1,b&&d.push(b);break}}}else r=k,b&&d.push(b);if(!k){if(_&&v&&(d.push(b),!s))break;if(!s&&!l)throw C}b=S,_=!1}else throw C}}else d.push(S);if(i!==void 0&&d.length===i){x(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await Ih({fs:e,cache:t,gitdir:n,oid:E});g.map(k=>k.oid).includes(C.oid)||g.push(C)}g.length===0&&x(S),g.sort((E,C)=>Pae(E.commit,C.commit))}return d}async function $ae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:o,force:s,follow:l,cache:u={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",a),await Lae({fs:new ln(e),cache:u,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:l})}catch(d){throw d.caller="git.log",d}}async function Bae({fs:e,onSign:t,dir:n,gitdir:r=Ot.join(n,".git"),ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:p,committer:g,signingKey:v,cache:b={},mergeDriver:_}){try{Je("fs",e),v&&Je("onSign",t);const x=new ln(e),S=await pu({fs:x,gitdir:r,author:p});if(!S&&(!s||!o))throw new si("author");const E=await Rh({fs:x,gitdir:r,author:S,committer:g});if(!E&&(!s||!o))throw new si("committer");return await g5({fs:x,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o,fastForwardOnly:s,dryRun:l,noUpdateBranch:u,abortOnConflict:d,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:_})}catch(x){throw x.caller="git.merge",x}}const zae={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function S5({fs:e,cache:t,dir:n,gitdir:r=Ot.join(n,".git"),oids:a}){const i=new BP,o=[];function s(d,h){const p=Yt.from(d,h);o.push(p),i.update(p)}async function l({stype:d,object:h}){const p=zae[d];let g=h.length,v=g>15?128:0;const b=g&15;g=g>>>4;let _=(v|p|b).toString(16);for(s(_,"hex");v;)v=g>127?128:0,_=v|g&127,s(Y2(2,_),"hex"),g=g>>>7;s(Yt.from(await n5(h)))}s("PACK"),s("00000002","hex"),s(Y2(8,a.length),"hex");for(const d of a){const{type:h,object:p}=await qr({fs:e,cache:t,gitdir:r,oid:d});await l({object:p,stype:h})}const u=i.digest();return o.push(u),o}async function Uae({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await S5({fs:e,cache:t,gitdir:n,oids:r}),o=Yt.from(await Gv(i)),l=`pack-${o.slice(-20).toString("hex")}.pack`;return a?(await e.write(Ot.join(n,`objects/pack/${l}`),o),{filename:l}):{filename:l,packfile:new Uint8Array(o)}}async function Hae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await Uae({fs:new ln(e),cache:i,gitdir:n,oids:r,write:a})}catch(o){throw o.caller="git.packObjects",o}}async function qae({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:l=Ot.join(s,".git"),ref:u,url:d,remote:h,remoteRef:p,prune:g=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:_=!1,corsProxy:x,singleBranch:S,headers:E={},author:C,committer:k,signingKey:R,cache:j={}}){try{Je("fs",e),Je("gitdir",l);const O=new ln(e),L=await pu({fs:O,gitdir:l,author:C});if(!L)throw new si("author");const z=await Rh({fs:O,gitdir:l,author:L,committer:k});if(!z)throw new si("committer");return await y5({fs:O,cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:l,ref:u,url:d,remote:h,remoteRef:p,fastForward:b,fastForwardOnly:_,corsProxy:x,singleBranch:S,headers:E,author:L,committer:z,signingKey:R,prune:g,pruneTags:v})}catch(O){throw O.caller="git.pull",O}}async function Vae({fs:e,cache:t,dir:n,gitdir:r=Ot.join(n,".git"),start:a,finish:i}){const o=await _0.read({fs:e,gitdir:r}),s=new Set,l=new Set;for(const h of a)s.add(await $t.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const p=await $t.resolve({fs:e,gitdir:r,ref:h});l.add(p)}catch{}const u=new Set;async function d(h){u.add(h);const{type:p,object:g}=await qr({fs:e,cache:t,gitdir:r,oid:h});if(p==="tag"){const b=bi.from(g).headers().object;return d(b)}if(p!=="commit")throw new Si(h,p,"commit");if(!o.has(h)){const b=Hr.from(g).headers().parent;for(h of b)!l.has(h)&&!u.has(h)&&await d(h)}}for(const h of s)await d(h);return u}async function wE({fs:e,cache:t,dir:n,gitdir:r=Ot.join(n,".git"),oids:a}){const i=new Set;async function o(s){if(i.has(s))return;i.add(s);const{type:l,object:u}=await qr({fs:e,cache:t,gitdir:r,oid:s});if(l==="tag"){const h=bi.from(u).headers().object;await o(h)}else if(l==="commit"){const h=Hr.from(u).headers().tree;await o(h)}else if(l==="tree"){const d=Mi.from(u);for(const h of d)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const s of a)await o(s);return i}async function Gae(e){const t={};let n="";const r=aa.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new zd('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const o of i){if(o.trim()==="")continue;const s=o.slice(0,2),l=o.slice(3);let u=l.indexOf(" ");u===-1&&(u=l.length);const d=l.slice(0,u),h=l.slice(u+1);t.refs[d]={ok:s==="ok",error:h}}return t}async function Wae({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(aa.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(aa.flush()),n}async function Kae({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:l,gitdir:u,ref:d,remoteRef:h,remote:p,url:g,force:v=!1,delete:b=!1,corsProxy:_,headers:x={}}){const S=d||await Cu({fs:e,gitdir:u});if(typeof S>"u")throw new Di("ref");const E=await ma.get({fs:e,gitdir:u});p=p||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=g||await E.get(`remote.${p}.pushurl`)||await E.get(`remote.${p}.url`);if(typeof C>"u")throw new Di("remote OR url");const k=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new Di("remoteRef");_===void 0&&(_=await E.get("http.corsProxy"));const R=await $t.expand({fs:e,gitdir:u,ref:S}),j=b?"0000000000000000000000000000000000000000":await $t.resolve({fs:e,gitdir:u,ref:R}),O=i1.getRemoteHelperFor({url:C}),L=await O.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:_,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),z=L.auth;let Y;if(!k)Y=R;else try{Y=await $t.expandAgainstMap({ref:k,map:L.refs})}catch(J){if(J instanceof kr)Y=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw J}const F=L.refs.get(Y)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:p,url:C,localRef:{ref:b?"(delete)":R,oid:j},remoteRef:{ref:Y,oid:F}}))throw new np;const K=!L.capabilities.has("no-thin");let q=new Set;if(!b){const J=[...L.refs.values()];let ue=new Set;if(F!=="0000000000000000000000000000000000000000"){const be=await Jk({fs:e,cache:t,gitdir:u,oids:[j,F]});for(const _e of be)J.push(_e);K&&(ue=await wE({fs:e,cache:t,gitdir:u,oids:be}))}if(!J.includes(j)){const be=await Vae({fs:e,cache:t,gitdir:u,start:[j],finish:J});q=await wE({fs:e,cache:t,gitdir:u,oids:be})}if(K){try{const be=await $t.resolve({fs:e,gitdir:u,ref:`refs/remotes/${p}/HEAD`,depth:2}),{oid:_e}=await $t.resolveAgainstMap({ref:be.replace(`refs/remotes/${p}/`,""),fullref:be,map:L.refs}),Pe=[_e];for(const Ne of await wE({fs:e,cache:t,gitdir:u,oids:Pe}))ue.add(Ne)}catch{}for(const be of ue)q.delete(be)}if(j===F&&(v=!0),!v){if(R.startsWith("refs/tags")&&F!=="0000000000000000000000000000000000000000")throw new Th("tag-exists");if(j!=="0000000000000000000000000000000000000000"&&F!=="0000000000000000000000000000000000000000"&&!await w5({fs:e,cache:t,gitdir:u,oid:j,ancestor:F,depth:-1}))throw new Th("not-fast-forward")}}const fe=f5([...L.capabilities],["report-status","side-band-64k",`agent=${o1.agent}`]),te=await Wae({capabilities:fe,triplets:[{oldoid:F,oid:j,fullRef:Y}]}),re=b?[]:await S5({fs:e,cache:t,gitdir:u,oids:[...q]}),X=await O.connect({http:n,onProgress:r,corsProxy:_,service:"git-receive-pack",url:C,auth:z,headers:x,body:[...te,...re]}),{packfile:ae,progress:U}=await p5.demux(X.body);if(a){const J=h5(U);Og(J,async ue=>{await a(ue)})}const ee=await Gae(ae);if(X.headers&&(ee.headers=X.headers),p&&ee.ok&&ee.refs[Y].ok&&!R.startsWith("refs/tags")){const J=`refs/remotes/${p}/${Y.replace("refs/heads","")}`;b?await $t.deleteRef({fs:e,gitdir:u,ref:J}):await $t.writeRef({fs:e,gitdir:u,ref:J,value:j})}if(ee.ok&&Object.values(ee.refs).every(J=>J.ok))return ee;{const J=Object.entries(ee.refs).filter(([ue,be])=>!be.ok).map(([ue,be])=>`
  - ${ue}: ${be.error}`).join("");throw new _g(J,ee)}}async function Zae({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,dir:l,gitdir:u=Ot.join(l,".git"),ref:d,remoteRef:h,remote:p="origin",url:g,force:v=!1,delete:b=!1,corsProxy:_,headers:x={},cache:S={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",u),await Kae({fs:new ln(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,gitdir:u,ref:d,remoteRef:h,remote:p,url:g,force:v,delete:b,corsProxy:_,headers:x})}catch(E){throw E.caller="git.push",E}}async function E5({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await qr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=bi.from(i).parse().object,E5({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new Si(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function C5({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await Rg({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await E5({fs:e,cache:t,gitdir:n,oid:r})}async function Yae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await C5({fs:new ln(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readBlob",o}}async function k5({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Ih({fs:new ln(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Xae({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await $t.resolve({gitdir:n,fs:e,ref:r}),{blob:o}=await C5({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return o}async function Jae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oid",a),await Xae({fs:new ln(e),cache:i,gitdir:n,ref:r,oid:a})}catch(o){throw o.caller="git.readNote",o}}async function Qae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:o=void 0,cache:s={}}){try{Je("fs",e),Je("gitdir",n),Je("oid",r);const l=new ln(e);i!==void 0&&(r=await Rg({fs:l,cache:s,gitdir:n,oid:r,filepath:i}));const d=await qr({fs:l,cache:s,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(d.oid=r,a==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=Hr.from(d.object).parse();break;case"tree":d.object=Mi.from(d.object).entries();break;case"blob":o?d.object=d.object.toString(o):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=bi.from(d.object).parse();break;default:throw new Si(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function eie({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await qr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new Si(r,a,"tag");const o=bi.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function tie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await eie({fs:new ln(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function nie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await ap({fs:new ln(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readTree",o}}async function rie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r),await Fa.acquire({fs:new ln(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function aie({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:l}){let u;try{u=await $t.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof kr))throw v}let h=(await ap({fs:e,gitdir:r,oid:u||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const p=await Ig({fs:e,gitdir:r,tree:h});return await a1({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:p,parent:u&&[u],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:l})}async function iie({fs:e,onSign:t,dir:n,gitdir:r=Ot.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:l,cache:u={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i);const d=new ln(e),h=await pu({fs:d,gitdir:r,author:o});if(!h)throw new si("author");const p=await Rh({fs:d,gitdir:r,author:h,committer:s});if(!p)throw new si("committer");return await aie({fs:d,cache:u,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:p,signingKey:l})}catch(d){throw d.caller="git.removeNote",d}}async function oie({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==Fs.clean(r))throw new ts(r,Fs.clean(r));if(n!==Fs.clean(n))throw new ts(n,Fs.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await $t.exists({fs:e,gitdir:t,ref:o}))throw new ss("branch",r,!1);const l=await $t.resolve({fs:e,gitdir:t,ref:i,depth:1});await $t.writeRef({fs:e,gitdir:t,ref:o,value:l}),await $t.deleteRef({fs:e,gitdir:t,ref:i});const d=await Cu({fs:e,gitdir:t,fullname:!0})===i;(a||d)&&await $t.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function sie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oldref",a),await oie({fs:new ln(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function A5({gitdir:e,type:t,object:n}){return Gl(Qh.wrap({type:t,object:n}))}async function lie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const o=new ln(e);let s,l;try{s=await $t.resolve({fs:o,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(s)try{s=await Rg({fs:o,cache:i,gitdir:n,oid:s,filepath:r})}catch{s=null}let u={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=t&&await o.read(Ot.join(t,r));d&&(l=await A5({gitdir:n,type:"blob",object:d}),s===l&&(u=await o.lstat(Ot.join(t,r)))),await Fa.acquire({fs:o,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),s&&h.insert({filepath:r,stats:u,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function cie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,depth:a}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await $t.resolve({fs:new ln(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function uie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),path:r,value:a,append:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("path",r);const o=new ln(e),s=await ma.get({fs:o,gitdir:n});i?await s.append(r,a):await s.set(r,a),await ma.save({fs:o,gitdir:n,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function T5({fs:e,gitdir:t,commit:n}){const r=Hr.from(n).toObject();return await Fi({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Kv{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=Kv.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${o} ${s}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const die={stage:Jh,workdir:Ng};let _E;async function Oh(e,t){return _E===void 0&&(_E=new v0),_E.acquire(e,t)}async function fie(e,t,n,r,a=null){const i=Ot.join(n,r),o=await e.lstat(i);if(!o)throw new kr(i);if(o.isDirectory())throw new In(`${i}: file expected, but found directory`);const s=a?await XP({fs:e,gitdir:t,oid:a}):void 0;let l=s?a:void 0;return s||await Oh({fs:e,gitdir:t,currentFilepath:i},async()=>{const u=o.isSymbolicLink()?await e.readlink(i).then(r5):await e.read(i);if(u===null)throw new kr(i);l=await Fi({fs:e,gitdir:t,type:"blob",object:u})}),l}async function hie({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(a));i.oid=await Ig({fs:e,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await fie(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function gO({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?die[g]():g),o=[],d=await hu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,b])=>{if(!(g==="."||await rp.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&o.push([v,b]),{mode:await b.mode(),path:g,oid:await b.oid(),type:await b.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const b=[];for(const _ of v){const[x,S]=_;a?S&&(await e.exists(`${t}/${S.toString()}`)?b.push(_):o.push([null,S])):x&&(S?b.push(_):o.push([x,null]))}return b.length?Promise.all(b.map(g)):[]}});if(o.length===0||d.length===0)return null;const p=(await hie({fs:e,dir:t,gitdir:n,entries:d})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return Ig({fs:e,gitdir:n,tree:p})}async function pie({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const o=[],s=[],l=await hu({fs:e,cache:{},dir:t,gitdir:n,trees:[So({ref:a}),So({ref:r})],map:async(u,[d,h])=>{if(u==="."||await rp.isIgnored({fs:e,dir:t,gitdir:n,filepath:u}))return;const p=h?await h.type():await d.type();if(p!=="tree"&&p!=="blob")return;if(!h&&d){const v=p==="tree"?"rmdir":"rm";return p==="tree"&&o.push(u),p==="blob"&&i&&s.push({filepath:u,oid:await d.oid()}),{method:v,filepath:u}}const g=await h.oid();if(!d||await d.oid()!==g)return p==="tree"?{method:"mkdir",filepath:u}:(i&&s.push({filepath:u,oid:g,stats:await e.lstat(Ot.join(t,u))}),{method:"write",filepath:u,oid:g})}});await Oh({fs:e,gitdir:n,dirRemoved:o,ops:l},async()=>{for(const u of l){const d=Ot.join(t,u.filepath);switch(u.method){case"rmdir":await e.rmdir(d);break;case"mkdir":await e.mkdir(d);break;case"rm":await e.rm(d);break;case"write":if(!o.some(h=>d.startsWith(h))){const{object:h}=await qr({fs:e,cache:{},gitdir:n,oid:u.oid});await e.exists(d)&&await e.rm(d),await e.write(d,h)}break}}}),await Fa.acquire({fs:e,gitdir:n,cache:{}},async u=>{s.forEach(({filepath:d,stats:h,oid:p})=>{u.insert({filepath:d,stats:h,oid:p})})})}class $l{constructor({fs:t,dir:n,gitdir:r=Ot.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Ot.join(this.gitdir,$l.refStash)}get refLogsStashPath(){return Ot.join(this.gitdir,$l.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await pu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new si("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return T5({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new ts(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?Ih({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return $t.writeRef({fs:this.fs,gitdir:this.gitdir,ref:$l.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Kv.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await Oh({filepath:i,entry:a},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Kv.getStashReflogEntry(r,t)}}async function mie({fs:e,dir:t,gitdir:n,message:r=""}){const a=new $l({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await Cu({fs:e,gitdir:n,fullname:!1}),o=await $t.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await k5({fs:e,dir:t,gitdir:n,oid:o})).commit.message,u=[o];let d=null,h=So({ref:"HEAD"});const p=await gO({fs:e,dir:t,gitdir:n,treePair:[So({ref:"HEAD"}),"stage"]});if(p){const _=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:p,parent:u});u.push(_),d=p,h=Jh()}const g=await gO({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const _=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[u[u.length-1]]});u.push(_),d=g}if(!d||!p&&!g)throw new kr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${l}`,b=await a.writeStashCommit({message:v,tree:d,parent:u});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await u5({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function N5({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new $l({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){const u=(await Ih({fs:e,cache:{},gitdir:n,oid:o[s+1]})).commit.message.startsWith("stash-Index");await pie({fs:e,dir:t,gitdir:n,stashCommit:o[s+1],parentCommit:o[s],wasStaged:u})}}async function R5({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new $l({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const o=a.refStashPath;await Oh(o,async()=>{await e.exists(o)&&await e.rm(o)});const s=await a.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(r,1);const l=a.refLogsStashPath;await Oh({reflogEntries:s,stashReflogPath:l,stashMgr:a},async()=>{if(s.length){await e.write(l,s.join(`
`),"utf8");const u=s[s.length-1].split(" ")[1];await a.writeStashRef(u)}else await e.rm(l)})}async function gie({fs:e,dir:t,gitdir:n}){return new $l({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function yie({fs:e,dir:t,gitdir:n}){const r=new $l({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await Oh(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function bie({fs:e,dir:t,gitdir:n,refIdx:r=0}){await N5({fs:e,dir:t,gitdir:n,refIdx:r}),await R5({fs:e,dir:t,gitdir:n,refIdx:r})}async function vie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Je("fs",e),Je("dir",t),Je("gitdir",n),Je("op",r);const o={push:mie,apply:N5,drop:R5,list:gie,clear:yie,pop:bie},s=["apply","drop","pop"];try{const l=new ln(e);["refs","logs","logs/refs"].map(h=>Ot.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=o[r];if(d){if(s.includes(r)&&i<0)throw new ts(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function wie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const i=new ln(e);if(await rp.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const s=await _ie({fs:i,cache:a,gitdir:n}),l=await I5({fs:i,cache:a,gitdir:n,tree:s,path:r}),u=await Fa.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const _ of b)if(_.path===r)return _;return null}),d=await i.lstat(Ot.join(t,r)),h=l!==null,p=u!==null,g=d!==null,v=async()=>{if(p&&!Bv(u,d))return u.oid;{const b=await i.read(Ot.join(t,r)),_=await A5({gitdir:n,type:"blob",object:b});return p&&u.oid===_&&d.size!==-1&&Fa.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:d,oid:_})}),_}};if(!h&&!g&&!p)return"absent";if(!h&&!g&&p)return"*absent";if(!h&&g&&!p)return"*added";if(!h&&g&&p)return await v()===u.oid?"added":"*added";if(h&&!g&&!p)return"deleted";if(h&&!g&&p)return l===u.oid,"*deleted";if(h&&g&&!p)return await v()===l?"*undeleted":"*undeletemodified";if(h&&g&&p){const b=await v();return b===l?b===u.oid?"unmodified":"*unmodified":b===u.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function I5({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const o of r)if(o.path===i){if(a.length===0)return o.oid;const{type:s,object:l}=await qr({fs:e,cache:t,gitdir:n,oid:o.oid});if(s==="tree"){const u=Mi.from(l);return I5({fs:e,cache:t,gitdir:n,tree:u,path:a})}if(s==="blob")throw new Si(o.oid,s,"blob",a.join("/"))}return null}async function _ie({fs:e,cache:t,gitdir:n}){let r;try{r=await $t.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof kr)return[]}const{tree:a}=await ap({fs:e,cache:t,gitdir:n,oid:r});return a}async function xie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:o={},ignored:s=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const l=new ln(e);return await hu({fs:l,cache:o,dir:t,gitdir:n,trees:[So({ref:r}),Ng(),Jh()],map:async function(u,[d,h,p]){if(!d&&!p&&h&&!s&&await rp.isIgnored({fs:l,dir:t,filepath:u})||!a.some(R=>c5(u,R)))return null;if(i&&!i(u))return;const[g,v,b]=await Promise.all([d&&d.type(),h&&h.type(),p&&p.type()]),_=[g,v,b].includes("blob");if((g==="tree"||g==="special")&&!_)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!_)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!_)return;const x=g==="blob"?await d.oid():void 0,S=b==="blob"?await p.oid():void 0;let E;g!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,x,E,S],k=C.map(R=>C.indexOf(R));return k.shift(),[u,...k]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function Sie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,object:a,force:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const o=new ln(e);if(r===void 0)throw new Di("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const s=await $t.resolve({fs:o,gitdir:n,ref:a||"HEAD"});if(!i&&await $t.exists({fs:o,gitdir:n,ref:r}))throw new ss("tag",r);await $t.writeRef({fs:o,gitdir:n,ref:r,value:s})}catch(o){throw o.caller="git.tag",o}}async function Eie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),cache:r={},filepath:a,oid:i,mode:o,add:s,remove:l,force:u}){try{Je("fs",e),Je("gitdir",n),Je("filepath",a);const d=new ln(e);if(l)return await Fa.acquire({fs:d,gitdir:n,cache:r},async function(p){if(!u){const g=await d.lstat(Ot.join(t,a));if(g){if(g.isDirectory())throw new fu("directory");return}}p.has({filepath:a})&&p.delete({filepath:a})});let h;if(!i){if(h=await d.lstat(Ot.join(t,a)),!h)throw new kr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new fu("directory")}return await Fa.acquire({fs:d,gitdir:n,cache:r},async function(p){if(!s&&!p.has({filepath:a}))throw new kr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await d.readlink(Ot.join(t,a)):await d.read(Ot.join(t,a));i=await Fi({fs:d,gitdir:n,type:"blob",format:"content",object:v})}return p.insert({filepath:a,oid:i,stats:g}),i})}catch(d){throw d.caller="git.updateIndex",d}}function Cie(){try{return o1.version}catch(e){throw e.caller="git.version",e}}async function kie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),trees:r,map:a,reduce:i,iterate:o,cache:s={}}){try{return Je("fs",e),Je("gitdir",n),Je("trees",r),await hu({fs:new ln(e),cache:s,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:o})}catch(l){throw l.caller="git.walk",l}}async function Aie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),blob:r}){try{return Je("fs",e),Je("gitdir",n),Je("blob",r),await Fi({fs:new ln(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function Tie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),commit:r}){try{return Je("fs",e),Je("gitdir",n),Je("commit",r),await T5({fs:new ln(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function Nie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),type:r,object:a,format:i="parsed",oid:o,encoding:s=void 0}){try{const l=new ln(e);if(i==="parsed"){switch(r){case"commit":a=Hr.from(a).toObject();break;case"tree":a=Mi.from(a).toObject();break;case"blob":a=Yt.from(a,s);break;case"tag":a=bi.from(a).toObject();break;default:throw new Si(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await Fi({fs:l,gitdir:n,type:r,object:a,oid:o,format:i}),o}catch(l){throw l.caller="git.writeObject",l}}async function Rie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:o=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r),Je("value",a);const s=new ln(e);if(r!==Fs.clean(r))throw new ts(r,Fs.clean(r));if(!i&&await $t.exists({fs:s,gitdir:n,ref:r}))throw new ss("ref",r);o?await $t.writeSymbolicRef({fs:s,gitdir:n,ref:r,value:a}):(a=await $t.resolve({fs:s,gitdir:n,ref:a}),await $t.writeRef({fs:s,gitdir:n,ref:r,value:a}))}catch(s){throw s.caller="git.writeRef",s}}async function Iie({fs:e,gitdir:t,tag:n}){const r=bi.from(n).toObject();return await Fi({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function Oie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),tag:r}){try{return Je("fs",e),Je("gitdir",n),Je("tag",r),await Iie({fs:new ln(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function jie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),tree:r}){try{return Je("fs",e),Je("gitdir",n),Je("tree",r),await Ig({fs:new ln(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var _a={Errors:sre,STAGE:Jh,TREE:So,WORKDIR:Ng,add:Cre,abortMerge:_re,addNote:Are,addRemote:Tre,annotatedTag:Rre,branch:Ore,checkout:u5,clone:qre,commit:Vre,getConfig:fae,getConfigAll:pae,setConfig:uie,currentBranch:Gre,deleteBranch:Kre,deleteRef:Zre,deleteRemote:Xre,deleteTag:Qre,expandOid:rae,expandRef:aae,fastForward:lae,fetch:cae,findMergeBase:uae,findRoot:dae,getRemoteInfo:mae,getRemoteInfo2:gae,hashBlob:bae,indexPack:wae,init:_ae,isDescendent:xae,isIgnored:Sae,listBranches:Eae,listFiles:kae,listNotes:Tae,listRefs:Nae,listRemotes:Iae,listServerRefs:Dae,listTags:Mae,log:$ae,merge:Bae,packObjects:Hae,pull:qae,push:Zae,readBlob:Yae,readCommit:k5,readNote:Jae,readObject:Qae,readTag:tie,readTree:nie,remove:rie,removeNote:iie,renameBranch:sie,resetIndex:lie,updateIndex:Eie,resolveRef:cie,status:wie,statusMatrix:xie,tag:Sie,version:Cie,walk:kie,writeBlob:Aie,writeCommit:Tie,writeObject:Nie,writeRef:Rie,writeTag:Oie,writeTree:jie,stash:vie};function Die(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Mie(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Die(e)}async function Pie(e,t){const n=Mie(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Fie(e){let t=0;const n=[];await Pie(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function Lie(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function $ie({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await Fie(a));const i=await fetch(t,{method:n,headers:r,body:a}),o=i.body&&i.body.getReader?Lie(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[s,l]of i.headers.entries())r[s]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var x0={request:$ie};const S0="https://cors.isomorphic-git.org",jh=new Map,O5=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=Zr.getState();if(!n||!r)return lt.error("Git user name and email must be configured in Settings before committing."),!1;try{const a=await _a.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),i=await _a.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return a!==n&&await _a.setConfig({fs:t,dir:e,path:"user.name",value:n}),i!==r&&await _a.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(a){return console.error("[VFS Git Op] Error checking/setting Git config:",a),lt.error(`Failed to configure Git user: ${a instanceof Error?a.message:String(a)}`),!1}},E0=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=jh.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return lt.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(jh.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(lt.error("Authentication cancelled: Password/token not provided."),null)},C0=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),jh.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),jh.delete(n)),null},k0=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!jh.has(n)&&t.username&&t.password&&(jh.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},lh=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},Bie=async(e,t)=>{const n=za,r=Zn(e),a=Gs(r,".git");try{return(await n.promises.stat(a)).isDirectory()}catch(i){return i instanceof Error&&i.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,i),!1}},j5=async(e,t,n,r,a)=>{var s;const i=(a==null?void 0:a.fsInstance)??za,o=Zn(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${o}`);try{let l=!1;try{await i.promises.stat(Gs(o,".git")),l=!0}catch(p){if(p.code!=="ENOENT")throw p}if(l)throw console.warn(`[VFS Git Op] Clone target ${o} already contains a .git directory.`),new Error(`Repository already cloned at ${o}.`);const u=hg(o);if(u!=="/")try{await i.promises.mkdir(u,{recursive:!0})}catch(p){if(p.code!=="EEXIST")throw p}let d=n;if(!d)try{if(d=(s=(await _a.getRemoteInfo({http:x0,url:t,corsProxy:S0,onAuth:g=>E0(g,r),onAuthFailure:C0,onAuthSuccess:k0})).HEAD)==null?void 0:s.replace("refs/heads/",""),!d)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${d}`)}catch(p){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",p),new Error(`Failed to determine default branch: ${lh(p)}`)}await _a.clone({fs:i,http:x0,dir:o,corsProxy:S0,url:t,ref:d,singleBranch:!0,depth:10,onAuth:p=>E0(p,r),onAuthFailure:C0,onAuthSuccess:k0,onProgress:p=>{p.phase==="counting objects"&&p.total?console.log(`Clone progress: ${p.phase} ${p.loaded}/${p.total}`):p.phase==="receiving objects"&&p.total?console.log(`Clone progress: ${p.phase} ${p.loaded}/${p.total}`):console.log(`Clone progress: ${p.phase}`)}}),await i.promises.stat(Gs(o,".git"));const h=await _a.currentBranch({fs:i,dir:o,fullname:!1}).catch(()=>null);h!==d&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${h}, expected ${d}. Checking out...`),await _a.checkout({fs:i,dir:o,ref:d})),lt.success(`Repository cloned successfully into ${o} (branch: ${d}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const u=lh(l);if(l instanceof Error&&l.message.includes("already cloned")||lt.error(`Git clone failed: ${u}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${o}`),await i.promises.rm(o,{recursive:!0,force:!0})}catch(d){console.warn("[VFS Git Op] Failed cleanup after clone error:",d)}throw l}},D5=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??za,r=Zn(e);try{await _a.init({fs:n,dir:r}),lt.success(`Initialized empty Git repository in "${pa(r)}"`)}catch(a){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,a),lt.error(`Git init failed: ${a instanceof Error?a.message:String(a)}`),a}},Qk=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??za,a=Zn(e);try{if(!await O5(a,r))throw new Error("Git user configuration is missing or invalid.");if(await _a.add({fs:r,dir:a,filepath:"."}),!(await _a.statusMatrix({fs:r,dir:a})).some(([,,u])=>u!==0)){lt.info("No changes detected to commit.");return}const l=await _a.commit({fs:r,dir:a,message:t,author:{name:Zr.getState().gitUserName,email:Zr.getState().gitUserEmail}});lt.success(`Changes committed: ${l.substring(0,7)}`)}catch(i){throw console.error(`[VFS Git Op] Git commit failed for ${a}:`,i),lt.error(`Git commit failed: ${i instanceof Error?i.message:String(i)}`),i}},s1=async(e,t,n,r)=>{const a=(r==null?void 0:r.fsInstance)??za,i=Zn(e);try{if(!await O5(i,a))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${i}`);const s=await _a.currentBranch({fs:a,dir:i,fullname:!1}).catch(()=>null);if(s!==t){console.log(`[VFS Git Op] Current branch is ${s}, switching to ${t} before pull...`);try{await _a.checkout({fs:a,dir:i,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await _a.fetch({fs:a,http:x0,dir:i,corsProxy:S0,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>E0(u,n),onAuthFailure:C0,onAuthSuccess:k0}),await _a.branch({fs:a,dir:i,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(u){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,u),new Error(`Failed to switch to or create local branch "${t}": ${lh(u)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${lh(l)}`)}}await _a.pull({fs:a,http:x0,dir:i,ref:t,singleBranch:!0,author:{name:Zr.getState().gitUserName,email:Zr.getState().gitUserEmail},corsProxy:S0,onAuth:l=>E0(l,n),onAuthFailure:C0,onAuthSuccess:k0}),lt.success(`Pulled changes successfully for "${pa(i)}"`),console.log(`[VFS Git Op] Pull successful for ${i}`)}catch(o){if(console.error(`[VFS Git Op] Git pull failed for ${i}:`,o),o instanceof Error&&o.message.toLowerCase().includes("already up-to-date")?lt.info(`Branch "${t}" is already up-to-date.`):lt.error(`Git pull failed: ${lh(o)}`),!(o instanceof Error&&o.message.toLowerCase().includes("already up-to-date")))throw o}},eA=async(e,t,n,r)=>{var o,s;const a=(r==null?void 0:r.fsInstance)??za,i=Zn(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${i}`);const l=await _a.push({fs:a,http:x0,dir:i,corsProxy:S0,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:u=>E0(u,n),onAuthFailure:C0,onAuthSuccess:k0});if(l!=null&&l.ok)lt.success(`Pushed changes successfully for "${pa(i)}"`);else if((o=l==null?void 0:l.error)!=null&&o.includes("up-to-date"))lt.info(`Branch "${t}" already up-to-date on remote.`);else throw(s=l==null?void 0:l.error)!=null&&s.includes("rejected")?(lt.error(`Push rejected for "${pa(i)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${i}:`,l),l instanceof Error&&l.message.includes("rejected")||lt.error(`Git push failed: ${lh(l)}`),l}},M5=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??za,r=Zn(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const a=await _a.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",a);const i=a.map(([o,s,l,u])=>{let d="";return u===2&&(d+="INDEX_Modified "),u===3&&(d+="INDEX_Added "),s===0&&l===2?d+="WT_New":s===1&&l===2?d+="WT_Modified":s===1&&l===0?d+="WT_Deleted":s===1&&l===1&&u===0&&(d="Unmodified"),(!d||d==="INDEX_Unmodified ")&&(d=`h:${s} w:${l} s:${u}`),`${o}: ${d.trim()}`}).filter(o=>!o.endsWith("Unmodified")).join(`
`);lt.info(`Git Status for "${pa(r)}":
${i||"No changes"}`,{duration:15e3})}catch(a){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,a),lt.error(`Git status failed: ${a instanceof Error?a.message:String(a)}`),a}},xd=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??za,r=Zn(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(a){if(a instanceof Error&&a.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,a),lt.error(`Error creating directory "${pa(r)}": ${a instanceof Error?a.message:String(a)}`),a}},zie=async e=>{try{const t={backend:qte,name:`litechat_vfs_${e}`};return await Pte(t),za}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),lt.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},tA=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??za,r=Zn(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await xd(r,{fsInstance:n}),[];throw l}const i=(await n.promises.readdir(r)).map(async l=>{const u=Gs(r,l);try{const d=await n.promises.stat(u);return{name:l,path:u,isDirectory:d.isDirectory(),size:d.size,lastModified:d.mtime}}catch(d){return console.error(`[VFS Op] Failed to stat ${u}:`,d),null}});return(await Promise.all(i)).filter(l=>l!==null)}catch(a){throw console.error(`[VFS Op] Failed to list directory ${r}:`,a),lt.error(`Error listing files: ${a instanceof Error?a.message:String(a)}`),a}},Ud=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??za,r=Zn(e);try{const a=await n.promises.readFile(r);return Ct.emit(xt.VFS_FILE_READ,{path:r}),a}catch(a){throw console.error(`[VFS Op] Failed to read file ${r}:`,a),lt.error(`Error reading file "${pa(r)}": ${a instanceof Error?a.message:String(a)}`),a}},l1=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??za,a=Zn(e),i=hg(a);try{i!=="/"&&await xd(i,{fsInstance:r}),await r.promises.writeFile(a,t),Ct.emit(xt.VFS_FILE_WRITTEN,{path:a})}catch(o){throw o instanceof Error&&o.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${a}:`,o),lt.error(`Error writing file "${pa(a)}": ${o instanceof Error?o.message:String(o)}`)),o}},nA=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??za,a=Zn(e);if(a==="/")throw lt.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(a)).isDirectory()?(await r.promises.rm(a,{recursive:t}),Ct.emit(xt.VFS_FILE_DELETED,{path:a})):(await r.promises.unlink(a),Ct.emit(xt.VFS_FILE_DELETED,{path:a})),lt.success(`"${pa(a)}" deleted.`)}catch(i){if(i instanceof Error&&i.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${a}`);return}throw console.error(`[VFS Op] Failed to delete ${a}:`,i),lt.error(`Error deleting "${pa(a)}": ${i instanceof Error?i.message:String(i)}`),i}},P5=async(e,t)=>{await xd(e,t)},Uie=async(e,t,n)=>{try{const r=await Ud(e,n),a=new Blob([r]),i=URL.createObjectURL(a),o=document.createElement("a");o.href=i;const s=Zn(e);o.download=t||pa(s),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||lt.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},F5=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??za,a=Zn(t);let i=0,o=0;const s=Array.from(e);try{await xd(a,{fsInstance:r});for(const l of s){const u=Gs(a,l.name);try{const d=await l.arrayBuffer();await l1(u,new Uint8Array(d),{fsInstance:r}),i++}catch(d){o++,console.error(`[VFS Op] Failed to upload ${l.name}:`,d)}}}catch(l){o=s.length,console.error(`[VFS Op] Failed to prepare target directory ${a} for upload:`,l)}finally{o>0&&i>0?lt.warning(`Upload complete with issues. ${i} succeeded, ${o} failed.`):o===0&&i>0&&lt.success(`Successfully uploaded ${i} file(s) to ${a==="/"?"root":pa(a)}.`)}},Hie=async(e,t,n)=>{const r=za;if(!e.name.toLowerCase().endsWith(".zip")){lt.error("Please select a valid ZIP file.");return}const a=Zn(t);let i;try{await xd(a,{fsInstance:r}),i=await $P.loadAsync(e);const o=Object.values(i.files),s=await Promise.allSettled(o.map(async h=>{const p=Gs(a,h.name);if(h.dir)await xd(p,{fsInstance:r});else{const g=await h.async("uint8array");await l1(p,g,{fsInstance:r})}return{name:h.name,isDir:h.dir}}));let l=0,u=0,d=0;s.forEach(h=>{h.status==="fulfilled"&&h.value?h.value.isDir?u++:l++:h.status==="rejected"&&(d++,console.error("[VFS Op] ZIP Extraction item failed:",h.reason))}),d>0?lt.warning(`Finished extracting "${e.name}". ${l+u} items succeeded, ${d} failed.`):lt.success(`Successfully extracted ${l} files and ${u} folders from "${e.name}" to ${a==="/"?"root":pa(a)}.`)}catch(o){o instanceof Error&&o.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,o),lt.error(`ZIP extraction failed: ${o instanceof Error?o.message:String(o)}`))}},yO=async(e,t="/",n)=>{const r=za,a=new $P,i=Zn(t),o=pa(i)||"root";try{try{if(!(await r.promises.stat(i)).isDirectory()){lt.error(`Cannot export: "${o}" is not a directory.`);return}}catch(p){p instanceof Error&&p.code==="ENOENT"?lt.error(`Cannot export: Path "${o}" not found.`):lt.error(`Cannot export: Error accessing path "${o}". ${p instanceof Error?p.message:String(p)}`);return}const s=async(p,g)=>{const v=await tA(p,{fsInstance:r});for(const b of v)if(b.isDirectory){if(b.name===".git")continue;const _=g.folder(b.name);if(_)await s(b.path,_);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const _=await Ud(b.path,{fsInstance:r});g.file(b.name,_)}};await s(i,a);const l=await a.generateAsync({type:"blob"}),u=URL.createObjectURL(l),d=document.createElement("a");d.href=u;const h=`vfs_${o}_export.zip`;d.download=e||h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),lt.success(`"${o}" exported as ${d.download}.`)}catch(s){console.error("[VFS Op] Failed to download all as zip:",s),s instanceof Error&&(s.message.includes("Error listing files")||s.message.includes("Error reading file")||s.message.includes("Cannot export"))||lt.error(`ZIP export failed: ${s instanceof Error?s.message:String(s)}`)}},L5=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??za,a=Zn(e),i=Zn(t);if(a==="/"||i==="/")throw lt.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(a!==i)try{const o=hg(i);o!=="/"&&await xd(o,{fsInstance:r}),await r.promises.rename(a,i),lt.success(`Renamed "${pa(a)}" to "${pa(i)}"`)}catch(o){throw o instanceof Error&&o.code==="ENOENT"?o.message.includes("Error creating directory")||lt.error(`Rename failed: Original item "${pa(a)}" not found.`):o instanceof Error&&o.code==="EEXIST"?lt.error(`Rename failed: An item named "${pa(i)}" already exists.`):o instanceof Error&&o.message.includes("Error creating directory")||lt.error(`Rename failed: ${o instanceof Error?o.message:String(o)}`),console.error(`[VFS Op] Failed to rename ${a} to ${i}:`,o),o}},qie=1024*5,Vie=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},bO=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},$5=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=T.useState(null),[i,o]=T.useState(null),[s,l]=T.useState(!1),[u,d]=T.useState(!1),[h,p]=T.useState(!0),g=e.type||"application/octet-stream",v=$C(e.name,g),b=g.startsWith("image/"),_=g.startsWith("audio/"),x=g.startsWith("video/"),S=e.source==="vfs";T.useEffect(()=>{let L=null;return o(null),e.source==="direct"&&!v&&e.contentBase64?(L=Vie(e.contentBase64,g),L||o("Failed to decode file content for preview."),a(L)):a(null),e.source==="direct"&&v&&e.contentText&&e.contentText.length>qie?o(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&v&&e.contentText===void 0&&o("Text content missing from metadata."),()=>{L&&(URL.revokeObjectURL(L),a(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,g,v]);const E=async()=>{if(e.source==="vfs"){lt.info("File is already in VFS.");return}const L=bO(e);if(!L){lt.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await F5([L],"/"),lt.success(`"${e.name}" added to VFS root.`)}catch(z){console.error("Failed to add file to VFS:",z),lt.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},C=async()=>{d(!0);try{let L;if(e.source==="vfs"&&e.path){const F=await Ud(e.path);L=new Blob([F],{type:g})}else{const F=bO(e);if(!F)throw new Error("Could not reconstruct file data.");L=F}const z=URL.createObjectURL(L),Y=document.createElement("a");Y.href=z,Y.download=e.name,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(z)}catch(L){console.error("Failed to download file:",L),lt.error(`Download failed: ${L instanceof Error?L.message:String(L)}`)}finally{d(!1)}},k=()=>p(L=>!L),R=()=>S?y.jsx(y6,{className:"h-5 w-5 text-cyan-500"}):v?y.jsx(sH,{className:"h-5 w-5 text-blue-500"}):b?y.jsx(TH,{className:"h-5 w-5 text-purple-500"}):_?y.jsx(LH,{className:"h-5 w-5 text-green-500"}):x?y.jsx(mq,{className:"h-5 w-5 text-orange-500"}):y.jsx(iH,{className:"h-5 w-5 text-muted-foreground"}),j=()=>S?y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?y.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[y.jsx(pd,{className:"h-4 w-4"}),y.jsx("span",{children:i})]}):v&&e.contentText!==void 0?y.jsx(ig,{lang:g==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?y.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):_&&r?y.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):x&&r?y.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),O=T.useMemo(()=>{let L="File";return S?L="VFS File":v?L="Text":b?L="Image":_?L="Audio":x&&(L="Video"),`${L} (${$v(e.size)})`},[S,v,b,_,x,e.size]);return y.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[R(),y.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),y.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",$v(e.size),")"]}),S&&e.path&&y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),y.jsx(ar,{children:y.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,disabled:u,"aria-label":"Download file",children:u?y.jsx(Gn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(ah,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{children:"Download File"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":h?"Unfold preview":"Fold preview",children:y.jsx(IC,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{side:"top",children:h?"Unfold":"Fold"})]})}),!n&&t&&y.jsxs(y.Fragment,{children:[e.source==="direct"&&y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,disabled:s,"aria-label":"Add to VFS",children:s?y.jsx(Gn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(m6,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{children:"Add to VFS"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:y.jsx(Zl,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{children:"Remove from Prompt"})]})})]})]})]}),h?y.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:k,children:O}):y.jsx("div",{className:Rt("p-2 max-h-80 overflow-y-auto"),children:j()})]})},B5=6048e5,Gie=864e5,Tb=43200,vO=1440,wO=Symbol.for("constructDateFrom");function Wl(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&wO in e?e[wO](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ba(e,t){return Wl(t||e,e)}let Wie={};function jg(){return Wie}function A0(e,t){var s,l,u,d;const n=jg(),r=(t==null?void 0:t.weekStartsOn)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Ba(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Zv(e,t){return A0(e,{...t,weekStartsOn:1})}function z5(e,t){const n=Ba(e,t==null?void 0:t.in),r=n.getFullYear(),a=Wl(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Zv(a),o=Wl(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=Zv(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function Yv(e){const t=Ba(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function c1(e,...t){const n=Wl.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function _O(e,t){const n=Ba(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Kie(e,t,n){const[r,a]=c1(n==null?void 0:n.in,e,t),i=_O(r),o=_O(a),s=+i-Yv(i),l=+o-Yv(o);return Math.round((s-l)/Gie)}function Zie(e,t){const n=z5(e,t),r=Wl(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Zv(r)}function Yb(e,t){const n=+Ba(e)-+Ba(t);return n<0?-1:n>0?1:n}function Yie(e){return Wl(e,Date.now())}function Xie(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Jie(e){return!(!Xie(e)&&typeof e!="number"||isNaN(+Ba(e)))}function Qie(e,t,n){const[r,a]=c1(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function eoe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function toe(e,t){return+Ba(e)-+Ba(t)}function noe(e,t){const n=Ba(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function roe(e,t){const n=Ba(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function aoe(e,t){const n=Ba(e,t==null?void 0:t.in);return+noe(n,t)==+roe(n,t)}function ioe(e,t,n){const[r,a,i]=c1(n==null?void 0:n.in,e,e,t),o=Yb(a,i),s=Math.abs(Qie(a,i));if(s<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*s);let l=Yb(a,i)===-o;aoe(r)&&s===1&&Yb(r,i)===1&&(l=!1);const u=o*(s-+l);return u===0?0:u}function ooe(e,t,n){const r=toe(e,t)/1e3;return eoe(n==null?void 0:n.roundingMethod)(r)}function soe(e,t){const n=Ba(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const loe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},coe=(e,t,n)=>{let r;const a=loe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function xE(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const uoe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},doe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},foe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hoe={date:xE({formats:uoe,defaultWidth:"full"}),time:xE({formats:doe,defaultWidth:"full"}),dateTime:xE({formats:foe,defaultWidth:"full"})},poe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},moe=(e,t,n,r)=>poe[e];function Tm(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const goe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yoe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},boe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},voe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},woe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_oe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xoe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Soe={ordinalNumber:xoe,era:Tm({values:goe,defaultWidth:"wide"}),quarter:Tm({values:yoe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Tm({values:boe,defaultWidth:"wide"}),day:Tm({values:voe,defaultWidth:"wide"}),dayPeriod:Tm({values:woe,defaultWidth:"wide",formattingValues:_oe,defaultFormattingWidth:"wide"})};function Nm(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?Coe(s,h=>h.test(o)):Eoe(s,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function Eoe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Coe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function koe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const Aoe=/^(\d+)(th|st|nd|rd)?/i,Toe=/\d+/i,Noe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Roe={any:[/^b/i,/^(a|c)/i]},Ioe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ooe={any:[/1/i,/2/i,/3/i,/4/i]},joe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Doe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Moe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Poe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Foe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Loe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$oe={ordinalNumber:koe({matchPattern:Aoe,parsePattern:Toe,valueCallback:e=>parseInt(e,10)}),era:Nm({matchPatterns:Noe,defaultMatchWidth:"wide",parsePatterns:Roe,defaultParseWidth:"any"}),quarter:Nm({matchPatterns:Ioe,defaultMatchWidth:"wide",parsePatterns:Ooe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Nm({matchPatterns:joe,defaultMatchWidth:"wide",parsePatterns:Doe,defaultParseWidth:"any"}),day:Nm({matchPatterns:Moe,defaultMatchWidth:"wide",parsePatterns:Poe,defaultParseWidth:"any"}),dayPeriod:Nm({matchPatterns:Foe,defaultMatchWidth:"any",parsePatterns:Loe,defaultParseWidth:"any"})},U5={code:"en-US",formatDistance:coe,formatLong:hoe,formatRelative:moe,localize:Soe,match:$oe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Boe(e,t){const n=Ba(e,t==null?void 0:t.in);return Kie(n,soe(n))+1}function zoe(e,t){const n=Ba(e,t==null?void 0:t.in),r=+Zv(n)-+Zie(n);return Math.round(r/B5)+1}function H5(e,t){var d,h,p,g;const n=Ba(e,t==null?void 0:t.in),r=n.getFullYear(),a=jg(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(p=a.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=Wl((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=A0(o,t),l=Wl((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=A0(l,t);return+n>=+s?r+1:+n>=+u?r:r-1}function Uoe(e,t){var s,l,u,d;const n=jg(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=H5(e,t),i=Wl((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),A0(i,t)}function Hoe(e,t){const n=Ba(e,t==null?void 0:t.in),r=+A0(n,t)-+Uoe(n,t);return Math.round(r/B5)+1}function gr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Lc={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return gr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):gr(n+1,2)},d(e,t){return gr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return gr(e.getHours()%12||12,t.length)},H(e,t){return gr(e.getHours(),t.length)},m(e,t){return gr(e.getMinutes(),t.length)},s(e,t){return gr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return gr(a,t.length)}},qf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xO={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Lc.y(e,t)},Y:function(e,t,n,r){const a=H5(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return gr(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):gr(i,t.length)},R:function(e,t){const n=z5(e);return gr(n,t.length)},u:function(e,t){const n=e.getFullYear();return gr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return gr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return gr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Lc.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return gr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Hoe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):gr(a,t.length)},I:function(e,t,n){const r=zoe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):gr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Lc.d(e,t)},D:function(e,t,n){const r=Boe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):gr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return gr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return gr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return gr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=qf.noon:r===0?a=qf.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=qf.evening:r>=12?a=qf.afternoon:r>=4?a=qf.morning:a=qf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Lc.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Lc.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):gr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):gr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Lc.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Lc.s(e,t)},S:function(e,t){return Lc.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return EO(r);case"XXXX":case"XX":return id(r);case"XXXXX":case"XXX":default:return id(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return EO(r);case"xxxx":case"xx":return id(r);case"xxxxx":case"xxx":default:return id(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+SO(r,":");case"OOOO":default:return"GMT"+id(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+SO(r,":");case"zzzz":default:return"GMT"+id(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return gr(r,t.length)},T:function(e,t,n){return gr(+e,t.length)}};function SO(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+gr(i,2)}function EO(e,t){return e%60===0?(e>0?"-":"+")+gr(Math.abs(e)/60,2):id(e,t)}function id(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=gr(Math.trunc(r/60),2),i=gr(r%60,2);return n+a+t+i}const CO=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},q5=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},qoe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return CO(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",CO(r,t)).replace("{{time}}",q5(a,t))},Voe={p:q5,P:qoe},Goe=/^D+$/,Woe=/^Y+$/,Koe=["D","DD","YY","YYYY"];function Zoe(e){return Goe.test(e)}function Yoe(e){return Woe.test(e)}function Xoe(e,t,n){const r=Joe(e,t,n);if(console.warn(r),Koe.includes(e))throw new RangeError(r)}function Joe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qoe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ese=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tse=/^'([^]*?)'?$/,nse=/''/g,rse=/[a-zA-Z]/;function X2(e,t,n){var d,h,p,g;const r=jg(),a=r.locale??U5,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,s=Ba(e,n==null?void 0:n.in);if(!Jie(s))throw new RangeError("Invalid time value");let l=t.match(ese).map(v=>{const b=v[0];if(b==="p"||b==="P"){const _=Voe[b];return _(v,a.formatLong)}return v}).join("").match(Qoe).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:ase(v)};if(xO[b])return{isToken:!0,value:v};if(b.match(rse))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(l=a.localize.preprocessor(s,l));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(Yoe(b)||Zoe(b))&&Xoe(b,t,String(e));const _=xO[b[0]];return _(s,b,a.localize,u)}).join("")}function ase(e){const t=e.match(tse);return t?t[1].replace(nse,"'"):e}function ise(e,t,n){const r=jg(),a=(n==null?void 0:n.locale)??r.locale??U5,i=2520,o=Yb(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[l,u]=c1(n==null?void 0:n.in,...o>0?[t,e]:[e,t]),d=ooe(u,l),h=(Yv(u)-Yv(l))/1e3,p=Math.round((d-h)/60);let g;if(p<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,s):d<10?a.formatDistance("lessThanXSeconds",10,s):d<20?a.formatDistance("lessThanXSeconds",20,s):d<40?a.formatDistance("halfAMinute",0,s):d<60?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",1,s):p===0?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",p,s);if(p<45)return a.formatDistance("xMinutes",p,s);if(p<90)return a.formatDistance("aboutXHours",1,s);if(p<vO){const v=Math.round(p/60);return a.formatDistance("aboutXHours",v,s)}else{if(p<i)return a.formatDistance("xDays",1,s);if(p<Tb){const v=Math.round(p/vO);return a.formatDistance("xDays",v,s)}else if(p<Tb*2)return g=Math.round(p/Tb),a.formatDistance("aboutXMonths",g,s)}if(g=ioe(u,l),g<12){const v=Math.round(p/Tb);return a.formatDistance("xMonths",v,s)}else{const v=g%12,b=Math.trunc(g/12);return v<3?a.formatDistance("aboutXYears",b,s):v<9?a.formatDistance("overXYears",b,s):a.formatDistance("almostXYears",b+1,s)}}function V5(e,t){return ise(e,Yie(e),t)}const ur=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:a,disabled:i,variant:o="ghost",size:s="icon",className:l,"aria-label":u,...d})=>{const h=typeof t=="function";return y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:o,size:s,onClick:a,disabled:i,className:Rt("h-6 w-6",l),"aria-label":u,...d,children:h?y.jsx(t,{className:Rt("h-3.5 w-3.5",n)}):t})}),y.jsx(ar,{side:r,children:y.jsx("p",{children:e})})]})})},rA=yt.memo(({turnData:e,timestamp:t,className:n})=>{var p,g,v;const[r,a]=T.useState(!1),[i,o]=T.useState(!1),s=t?V5(new Date(t),{addSuffix:!0}):"Sending...",l=((p=e.metadata)==null?void 0:p.attachedFiles)&&e.metadata.attachedFiles.length>0,u=e.content&&e.content.trim().length>0,d=T.useCallback(()=>a(b=>!b),[]),h=T.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),o(!0),lt.success("User prompt copied!"),setTimeout(()=>o(!1),1500)}catch(b){lt.error("Failed to copy prompt."),console.error("Clipboard copy failed:",b)}},[e.content]);return y.jsxs("div",{className:Rt("user-prompt relative group/user",n),children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(fq,{className:"h-4 w-4 text-primary"}),y.jsx("span",{className:"text-xs font-semibold text-primary",children:"User"})]}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx("span",{className:"text-xs text-muted-foreground mr-2",children:s}),u&&y.jsx(ur,{tooltipText:"Copy Prompt",onClick:h,"aria-label":"Copy user prompt",icon:i?y.jsx(Ks,{className:"text-green-500"}):y.jsx(jC,{}),className:"h-5 w-5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity"}),(u||l)&&y.jsx(ur,{tooltipText:r?"Unfold":"Fold",onClick:d,"aria-label":r?"Unfold prompt":"Fold prompt",icon:r?y.jsx(Zs,{}):y.jsx(Ad,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity"})]})]}),!r&&y.jsxs(y.Fragment,{children:[l&&y.jsx("div",{className:"mb-2 space-y-1",children:(g=e.metadata.attachedFiles)==null?void 0:g.map(b=>y.jsx($5,{fileMeta:b,isReadOnly:!0},b.id))}),u&&y.jsx("p",{className:"whitespace-pre-wrap text-sm text-foreground",children:e.content})]}),r&&y.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:d,children:[u?`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`:"",u&&l?" + ":"",l?`${(v=e.metadata.attachedFiles)==null?void 0:v.length} file(s)`:""]})]})});rA.displayName="UserPromptDisplay";const ose=({displayModelName:e,timeAgo:t,responseContent:n,isFolded:r,toggleFold:a,canFold:i})=>{const[o,s]=T.useState(!1),l=T.useCallback(async()=>{if(!n||typeof n!="string"){lt.info("No text response to copy.");return}try{await navigator.clipboard.writeText(n),s(!0),lt.success("Assistant response copied!"),setTimeout(()=>s(!1),1500)}catch(u){lt.error("Failed to copy response."),console.error("Clipboard copy failed:",u)}},[n]);return y.jsxs("div",{className:"flex justify-between items-center mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(FU,{className:"h-4 w-4 text-secondary"}),y.jsxs("span",{className:"text-xs font-semibold text-secondary",children:["Assistant (",e,")"]})]}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx("span",{className:"text-xs text-muted-foreground mr-2",children:t}),n&&typeof n=="string"&&y.jsx(ur,{tooltipText:"Copy Response",onClick:l,"aria-label":"Copy assistant response",icon:o?y.jsx(Ks,{className:"text-green-500"}):y.jsx(jC,{}),className:"h-5 w-5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity"}),i&&y.jsx(ur,{tooltipText:r?"Unfold":"Fold",onClick:a,"aria-label":r?"Unfold response":"Fold response",icon:r?y.jsx(Zs,{}):y.jsx(Ad,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity"})]})]})},sse=({interactionId:e,onRegenerate:t,onDelete:n,onEdit:r})=>{const a=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e)},i=()=>{t&&t(e)},o=()=>{r&&r(e)};return y.jsxs("div",{className:`absolute bottom-2 right-2 flex items-center space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200
                 bg-card/80 backdrop-blur-sm p-1 rounded-md shadow-md z-20`,children:[r&&y.jsx(ur,{tooltipText:"Edit",onClick:o,"aria-label":"Edit User Prompt",icon:y.jsx(Ub,{}),className:"h-6 w-6"}),t&&y.jsx(ur,{tooltipText:"Regenerate",onClick:i,"aria-label":"Regenerate Response",icon:y.jsx(gw,{}),className:"h-6 w-6"}),n&&y.jsx(ur,{tooltipText:"Delete",onClick:a,"aria-label":"Delete Interaction",icon:y.jsx(Ho,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})},kO={};function lse(e){let t=kO[e];if(t)return t;t=kO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Dh(e,t){typeof t!="string"&&(t=Dh.defaultChars);const n=lse(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,o=r.length;i<o;i+=3){const s=parseInt(r.slice(i+1,i+3),16);if(s<128){a+=n[s];continue}if((s&224)===192&&i+3<o){const l=parseInt(r.slice(i+4,i+6),16);if((l&192)===128){const u=s<<6&1984|l&63;u<128?a+="":a+=String.fromCharCode(u),i+=3;continue}}if((s&240)===224&&i+6<o){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16);if((l&192)===128&&(u&192)===128){const d=s<<12&61440|l<<6&4032|u&63;d<2048||d>=55296&&d<=57343?a+="":a+=String.fromCharCode(d),i+=6;continue}}if((s&248)===240&&i+9<o){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((l&192)===128&&(u&192)===128&&(d&192)===128){let h=s<<18&1835008|l<<12&258048|u<<6&4032|d&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Dh.defaultChars=";/?:@&=+$,#";Dh.componentChars="";const AO={};function cse(e){let t=AO[e];if(t)return t;t=AO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Dg(e,t,n){typeof t!="string"&&(n=t,t=Dg.defaultChars),typeof n>"u"&&(n=!0);const r=cse(t);let a="";for(let i=0,o=e.length;i<o;i++){const s=e.charCodeAt(i);if(n&&s===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(s<128){a+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<o){const l=e.charCodeAt(i+1);if(l>=56320&&l<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}Dg.defaultChars=";/?:@&=+$,-_.!~*'()#";Dg.componentChars="-_.!~*'()";function aA(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Xv(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const use=/^([a-z0-9.+-]+:)/i,dse=/:[0-9]*$/,fse=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,hse=["<",">",'"',"`"," ","\r",`
`,"	"],pse=["{","}","|","\\","^","`"].concat(hse),mse=["'"].concat(pse),TO=["%","/","?",";","#"].concat(mse),NO=["/","?","#"],gse=255,RO=/^[+a-z0-9A-Z_-]{0,63}$/,yse=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,IO={javascript:!0,"javascript:":!0},OO={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function iA(e,t){if(e&&e instanceof Xv)return e;const n=new Xv;return n.parse(e,t),n}Xv.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const u=fse.exec(i);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let o=use.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(o&&IO[o])&&(i=i.substr(2),this.slashes=!0)),!IO[o]&&(a||o&&!OO[o])){let u=-1;for(let v=0;v<NO.length;v++)r=i.indexOf(NO[v]),r!==-1&&(u===-1||r<u)&&(u=r);let d,h;u===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",u),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),u=-1;for(let v=0;v<TO.length;v++)r=i.indexOf(TO[v]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=i.length),i[u-1]===":"&&u--;const p=i.slice(0,u);i=i.slice(u),this.parseHost(p),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let b=0,_=v.length;b<_;b++){const x=v[b];if(x&&!x.match(RO)){let S="";for(let E=0,C=x.length;E<C;E++)x.charCodeAt(E)>127?S+="x":S+=x[E];if(!S.match(RO)){const E=v.slice(0,b),C=v.slice(b+1),k=x.match(yse);k&&(E.push(k[1]),C.unshift(k[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>gse&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=i.indexOf("#");s!==-1&&(this.hash=i.substr(s),i=i.slice(0,s));const l=i.indexOf("?");return l!==-1&&(this.search=i.substr(l),i=i.slice(0,l)),i&&(this.pathname=i),OO[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Xv.prototype.parseHost=function(e){let t=dse.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const bse=Object.freeze(Object.defineProperty({__proto__:null,decode:Dh,encode:Dg,format:aA,parse:iA},Symbol.toStringTag,{value:"Module"})),G5=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,W5=/[\0-\x1F\x7F-\x9F]/,vse=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,oA=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,K5=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Z5=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,wse=Object.freeze(Object.defineProperty({__proto__:null,Any:G5,Cc:W5,Cf:vse,P:oA,S:K5,Z:Z5},Symbol.toStringTag,{value:"Module"})),_se=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),xse=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var SE;const Sse=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Ese=(SE=String.fromCodePoint)!==null&&SE!==void 0?SE:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Cse(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Sse.get(e))!==null&&t!==void 0?t:e}var Pa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Pa||(Pa={}));const kse=32;var Wc;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Wc||(Wc={}));function J2(e){return e>=Pa.ZERO&&e<=Pa.NINE}function Ase(e){return e>=Pa.UPPER_A&&e<=Pa.UPPER_F||e>=Pa.LOWER_A&&e<=Pa.LOWER_F}function Tse(e){return e>=Pa.UPPER_A&&e<=Pa.UPPER_Z||e>=Pa.LOWER_A&&e<=Pa.LOWER_Z||J2(e)}function Nse(e){return e===Pa.EQUALS||Tse(e)}var Oa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Oa||(Oa={}));var Uc;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Uc||(Uc={}));class Rse{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Oa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Uc.Strict}startEntity(t){this.decodeMode=t,this.state=Oa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Oa.EntityStart:return t.charCodeAt(n)===Pa.NUM?(this.state=Oa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Oa.NamedEntity,this.stateNamedEntity(t,n));case Oa.NumericStart:return this.stateNumericStart(t,n);case Oa.NumericDecimal:return this.stateNumericDecimal(t,n);case Oa.NumericHex:return this.stateNumericHex(t,n);case Oa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|kse)===Pa.LOWER_X?(this.state=Oa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Oa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(J2(a)||Ase(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(J2(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Pa.SEMI)this.consumed+=1;else if(this.decodeMode===Uc.Strict)return 0;return this.emitCodePoint(Cse(this.result),this.consumed),this.errors&&(t!==Pa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Wc.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Ise(r,a,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Uc.Attribute&&(i===0||Nse(o))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Wc.VALUE_LENGTH)>>14,i!==0){if(o===Pa.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Uc.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Wc.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Wc.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Oa.NamedEntity:return this.result!==0&&(this.decodeMode!==Uc.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Oa.NumericDecimal:return this.emitNumericEntity(0,2);case Oa.NumericHex:return this.emitNumericEntity(0,3);case Oa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Oa.EntityStart:return 0}}}function Y5(e){let t="";const n=new Rse(e,r=>t+=Ese(r));return function(a,i){let o=0,s=0;for(;(s=a.indexOf("&",s))>=0;){t+=a.slice(o,s),n.startEntity(i);const u=n.write(a,s+1);if(u<0){o=s+n.end();break}o=s+u,s=u===0?o+1:o}const l=t+a.slice(o);return t="",l}}function Ise(e,t,n,r){const a=(t&Wc.BRANCH_LENGTH)>>7,i=t&Wc.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=a?-1:e[n+l]-1}let o=n,s=o+a-1;for(;o<=s;){const l=o+s>>>1,u=e[l];if(u<r)o=l+1;else if(u>r)s=l-1;else return e[l+a]}return-1}const Ose=Y5(_se);Y5(xse);function X5(e,t=Uc.Legacy){return Ose(e,t)}function jse(e){return Object.prototype.toString.call(e)}function sA(e){return jse(e)==="[object String]"}const Dse=Object.prototype.hasOwnProperty;function Mse(e,t){return Dse.call(e,t)}function u1(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function J5(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function lA(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Jv(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Q5=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Pse=/&([a-z#][a-z0-9]{1,31});/gi,Fse=new RegExp(Q5.source+"|"+Pse.source,"gi"),Lse=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function $se(e,t){if(t.charCodeAt(0)===35&&Lse.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return lA(r)?Jv(r):e}const n=X5(e);return n!==e?n:e}function Bse(e){return e.indexOf("\\")<0?e:e.replace(Q5,"$1")}function Mh(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Fse,function(t,n,r){return n||$se(t,r)})}const zse=/[&<>"]/,Use=/[&<>"]/g,Hse={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function qse(e){return Hse[e]}function mu(e){return zse.test(e)?e.replace(Use,qse):e}const Vse=/[.?*+^$[\]\\(){}|-]/g;function Gse(e){return e.replace(Vse,"\\$&")}function Mr(e){switch(e){case 9:case 32:return!0}return!1}function T0(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function N0(e){return oA.test(e)||K5.test(e)}function R0(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function d1(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Wse={mdurl:bse,ucmicro:wse},Kse=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:J5,assign:u1,escapeHtml:mu,escapeRE:Gse,fromCodePoint:Jv,has:Mse,isMdAsciiPunct:R0,isPunctChar:N0,isSpace:Mr,isString:sA,isValidEntityCode:lA,isWhiteSpace:T0,lib:Wse,normalizeReference:d1,unescapeAll:Mh,unescapeMd:Bse},Symbol.toStringTag,{value:"Module"}));function Zse(e,t,n){let r,a,i,o;const s=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return a&&(u=e.pos),e.pos=l,u}function Yse(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Mh(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let o=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}a++}return t===a||o!==0||(i.str=Mh(e.slice(t,a)),i.pos=a,i.ok=!0),i}function Xse(e,t,n,r){let a,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let s=e.charCodeAt(i);if(s!==34&&s!==39&&s!==40)return o;t++,i++,s===40&&(s=41),o.marker=s}for(;i<n;){if(a=e.charCodeAt(i),a===o.marker)return o.pos=i+1,o.str+=Mh(e.slice(t,i)),o.ok=!0,o;if(a===40&&o.marker===41)return o;a===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=Mh(e.slice(t,i)),o}const Jse=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Yse,parseLinkLabel:Zse,parseLinkTitle:Xse},Symbol.toStringTag,{value:"Module"})),Xs={};Xs.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+mu(i.content)+"</code>"};Xs.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+mu(e[t].content)+`</code></pre>
`};Xs.fence=function(e,t,n,r,a){const i=e[t],o=i.info?Mh(i.info).trim():"";let s="",l="";if(o){const d=o.split(/(\s+)/g);s=d[0],l=d.slice(2).join("")}let u;if(n.highlight?u=n.highlight(i.content,s,l)||mu(i.content):u=mu(i.content),u.indexOf("<pre")===0)return u+`
`;if(o){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+s]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+s);const p={attrs:h};return`<pre><code${a.renderAttrs(p)}>${u}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${u}</code></pre>
`};Xs.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};Xs.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Xs.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Xs.text=function(e,t){return mu(e[t].content)};Xs.html_block=function(e,t){return e[t].content};Xs.html_inline=function(e,t){return e[t].content};function ip(){this.rules=u1({},Xs)}ip.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+mu(t.attrs[n][0])+'="'+mu(t.attrs[n][1])+'"';return a};ip.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(a.block&&(o=!0,a.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===a.tag)&&(o=!1)}return i+=o?`>
`:">",i};ip.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};ip.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};ip.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;s==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Pi(){this.__rules__=[],this.__cache__=null}Pi.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Pi.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Pi.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Pi.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Pi.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Pi.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Pi.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Pi.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Pi.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Pi.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function ls(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}ls.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};ls.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};ls.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};ls.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};ls.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function eF(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}eF.prototype.Token=ls;const Qse=/\r\n?|\n/g,ele=/\0/g;function tle(e){let t;t=e.src.replace(Qse,`
`),t=t.replace(ele,""),e.src=t}function nle(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function rle(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function ale(e){return/^<a[>\s]/i.test(e)}function ile(e){return/^<\/a\s*>/i.test(e)}function ole(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let o=a.length-1;o>=0;o--){const s=a[o];if(s.type==="link_close"){for(o--;a[o].level!==s.level&&a[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(ale(s.content)&&i>0&&i--,ile(s.content)&&i++),!(i>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const l=s.content;let u=e.md.linkify.match(l);const d=[];let h=s.level,p=0;u.length>0&&u[0].index===0&&o>0&&a[o-1].type==="text_special"&&(u=u.slice(1));for(let g=0;g<u.length;g++){const v=u[g].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let _=u[g].text;u[g].schema?u[g].schema==="mailto:"&&!/^mailto:/i.test(_)?_=e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):_=e.md.normalizeLinkText(_):_=e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,"");const x=u[g].index;if(x>p){const k=new e.Token("text","",0);k.content=l.slice(p,x),k.level=h,d.push(k)}const S=new e.Token("link_open","a",1);S.attrs=[["href",b]],S.level=h++,S.markup="linkify",S.info="auto",d.push(S);const E=new e.Token("text","",0);E.content=_,E.level=h,d.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",d.push(C),p=u[g].lastIndex}if(p<l.length){const g=new e.Token("text","",0);g.content=l.slice(p),g.level=h,d.push(g)}t[n].children=a=J5(a,o,d)}}}}const tF=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,sle=/\((c|tm|r)\)/i,lle=/\((c|tm|r)\)/ig,cle={c:"",r:"",tm:""};function ule(e,t){return cle[t.toLowerCase()]}function dle(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(lle,ule)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function fle(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&tF.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function hle(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(sle.test(e.tokens[t].content)&&dle(e.tokens[t].children),tF.test(e.tokens[t].content)&&fle(e.tokens[t].children))}const ple=/['"]/,jO=/['"]/g,DO="";function Nb(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function mle(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],o=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let s=i.content,l=0,u=s.length;e:for(;l<u;){jO.lastIndex=l;const d=jO.exec(s);if(!d)break;let h=!0,p=!0;l=d.index+1;const g=d[0]==="'";let v=32;if(d.index-1>=0)v=s.charCodeAt(d.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<u)b=s.charCodeAt(l);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const _=R0(v)||N0(String.fromCharCode(v)),x=R0(b)||N0(String.fromCharCode(b)),S=T0(v),E=T0(b);if(E?h=!1:x&&(S||_||(h=!1)),S?p=!1:_&&(E||x||(p=!1)),b===34&&d[0]==='"'&&v>=48&&v<=57&&(p=h=!1),h&&p&&(h=_,p=x),!h&&!p){g&&(i.content=Nb(i.content,d.index,DO));continue}if(p)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<o)break;if(C.single===g&&r[n].level===o){C=r[n];let k,R;g?(k=t.md.options.quotes[2],R=t.md.options.quotes[3]):(k=t.md.options.quotes[0],R=t.md.options.quotes[1]),i.content=Nb(i.content,d.index,R),e[C.token].content=Nb(e[C.token].content,C.pos,k),l+=R.length-1,C.token===a&&(l+=k.length-1),s=i.content,u=s.length,r.length=n;continue e}}h?r.push({token:a,pos:d.index,single:g,level:o}):p&&g&&(i.content=Nb(i.content,d.index,DO))}}}function gle(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!ple.test(e.tokens[t].content)||mle(e.tokens[t].children,e)}function yle(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const o=r[i].children,s=o.length;for(t=0;t<s;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<s;t++)o[t].type==="text"&&t+1<s&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const EE=[["normalize",tle],["block",nle],["inline",rle],["linkify",ole],["replacements",hle],["smartquotes",gle],["text_join",yle]];function cA(){this.ruler=new Pi;for(let e=0;e<EE.length;e++)this.ruler.push(EE[e][0],EE[e][1])}cA.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};cA.prototype.State=eF;function Js(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,o=0,s=0,l=0,u=a.length,d=!1;o<u;o++){const h=a.charCodeAt(o);if(!d)if(Mr(h)){s++,h===9?l+=4-l%4:l++;continue}else d=!0;(h===10||o===u-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(l),this.bsCount.push(0),d=!1,s=0,l=0,i=o+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Js.prototype.push=function(e,t,n){const r=new ls(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Js.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Js.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Js.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Mr(r))break}return t};Js.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Mr(this.src.charCodeAt(--t)))return t+1;return t};Js.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Js.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Js.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let o=0,s=t;s<n;s++,o++){let l=0;const u=this.bMarks[s];let d=u,h;for(s+1<n||a?h=this.eMarks[s]+1:h=this.eMarks[s];d<h&&l<r;){const p=this.src.charCodeAt(d);if(Mr(p))p===9?l+=4-(l+this.bsCount[s])%4:l++;else if(d-u<this.tShift[s])l++;else break;d++}l>r?i[o]=new Array(l-r+1).join(" ")+this.src.slice(d,h):i[o]=this.src.slice(d,h)}return i.join("")};Js.prototype.Token=ls;const ble=65536;function CE(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function MO(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,o=0,s="";for(;r<n;)a===124&&(i?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function vle(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58&&!Mr(s)||o===45&&Mr(s))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Mr(C))return!1;i++}let l=CE(e,t+1),u=l.split("|");const d=[];for(let C=0;C<u.length;C++){const k=u[C].trim();if(!k){if(C===0||C===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?d.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=CE(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=MO(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const h=u.length;if(h===0||h!==d.length)return!1;if(r)return!0;const p=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const _=e.push("thead_open","thead",1);_.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<u.length;C++){const k=e.push("th_open","th",1);d[C]&&(k.attrs=[["style","text-align:"+d[C]]]);const R=e.push("inline","",0);R.content=u[C].trim(),R.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let R=0,j=g.length;R<j;R++)if(g[R](e,a,n,!0)){C=!0;break}if(C||(l=CE(e,a).trim(),!l)||e.sCount[a]-e.blkIndent>=4||(u=MO(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),E+=h-u.length,E>ble))break;if(a===t+2){const R=e.push("tbody_open","tbody",1);R.map=S=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let R=0;R<h;R++){const j=e.push("td_open","td",1);d[R]&&(j.attrs=[["style","text-align:"+d[R]]]);const O=e.push("inline","",0);O.content=u[R]?u[R].trim():"",O.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=p,e.line=a,!0}function wle(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function _le(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const o=e.src.charCodeAt(a);if(o!==126&&o!==96)return!1;let s=a;a=e.skipChars(a,o);let l=a-s;if(l<3)return!1;const u=e.src.slice(s,a),d=e.src.slice(a,i);if(o===96&&d.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=t,p=!1;for(;h++,!(h>=n||(a=s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===o&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,o),!(a-s<l)&&(a=e.skipSpaces(a),!(a<i)))){p=!0;break}l=e.sCount[t],e.line=h+(p?1:0);const g=e.push("fence","code",0);return g.info=d,g.content=e.getLines(t+1,h,l,!0),g.markup=u,g.map=[t,e.line],!0}function xle(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const s=[],l=[],u=[],d=[],h=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[v]+1,R,j;e.src.charCodeAt(a)===32?(a++,k++,j=!1,R=!0):e.src.charCodeAt(a)===9?(R=!0,(e.bsCount[v]+k)%4===3?(a++,k++,j=!1):j=!0):R=!1;let O=k;for(s.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const L=e.src.charCodeAt(a);if(Mr(L))L===9?O+=4-(O+e.bsCount[v]+(j?1:0))%4:O++;else break;a++}g=a>=i,l.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(R?1:0),u.push(e.sCount[v]),e.sCount[v]=O-k,d.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let C=!1;for(let k=0,R=h.length;k<R;k++)if(h[k](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(s.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}s.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const _=e.push("blockquote_open","blockquote",1);_.markup=">";const x=[t,0];_.map=x,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=o,e.parentType=p,x[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=s[E],e.tShift[E+t]=d[E],e.sCount[E+t]=u[E],e.bsCount[E+t]=l[E];return e.blkIndent=b,!0}function Sle(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;i<a;){const u=e.src.charCodeAt(i++);if(u!==o&&!Mr(u))return!1;u===o&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(s+1).join(String.fromCharCode(o)),!0}function PO(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Mr(i))return-1}return r}function FO(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Mr(i))?-1:a}function Ele(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function Cle(e,t,n,r){let a,i,o,s,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let d=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(d=!0);let h,p,g;if((g=FO(e,l))>=0){if(h=!0,o=e.bMarks[l]+e.tShift[l],p=Number(e.src.slice(o,g-1)),d&&p!==1)return!1}else if((g=PO(e,l))>=0)h=!1;else return!1;if(d&&e.skipSpaces(g)>=e.eMarks[l])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),b=e.tokens.length;h?(s=e.push("ordered_list_open","ol",1),p!==1&&(s.attrs=[["start",p]])):s=e.push("bullet_list_open","ul",1);const _=[l,0];s.map=_,s.markup=String.fromCharCode(v);let x=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){i=g,a=e.eMarks[l];const C=e.sCount[l]+g-(e.bMarks[l]+e.tShift[l]);let k=C;for(;i<a;){const fe=e.src.charCodeAt(i);if(fe===9)k+=4-(k+e.bsCount[l])%4;else if(fe===32)k++;else break;i++}const R=i;let j;R>=a?j=1:j=k-C,j>4&&(j=1);const O=C+j;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(v);const L=[l,0];s.map=L,h&&(s.info=e.src.slice(o,g-1));const z=e.tight,Y=e.tShift[l],F=e.sCount[l],K=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=O,e.tight=!0,e.tShift[l]=R-e.bMarks[l],e.sCount[l]=k,R>=a&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||x)&&(u=!1),x=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=K,e.tShift[l]=Y,e.sCount[l]=F,e.tight=z,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(v),l=e.line,L[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let q=!1;for(let fe=0,te=S.length;fe<te;fe++)if(S[fe](e,l,n,!0)){q=!0;break}if(q)break;if(h){if(g=FO(e,l),g<0)break;o=e.bMarks[l]+e.tShift[l]}else if(g=PO(e,l),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(v),_[1]=l,e.line=l,e.parentType=E,u&&Ele(e,b),!0}function kle(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function s(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const j=e.md.block.ruler.getRules("reference"),O=e.parentType;e.parentType="reference";let L=!1;for(let z=0,Y=j.length;z<Y;z++)if(j[z](e,S,E,!0)){L=!0;break}if(e.parentType=O,L)return null}const k=e.bMarks[S]+e.tShift[S],R=e.eMarks[S];return e.src.slice(k,R+1)}let l=e.src.slice(a,i+1);i=l.length;let u=-1;for(a=1;a<i;a++){const S=l.charCodeAt(a);if(S===91)return!1;if(S===93){u=a;break}else if(S===10){const E=s(o);E!==null&&(l+=E,i=l.length,o++)}else if(S===92&&(a++,a<i&&l.charCodeAt(a)===10)){const E=s(o);E!==null&&(l+=E,i=l.length,o++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(a=u+2;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(l+=E,i=l.length,o++)}else if(!Mr(S))break}const d=e.md.helpers.parseLinkDestination(l,a,i);if(!d.ok)return!1;const h=e.md.normalizeLink(d.str);if(!e.md.validateLink(h))return!1;a=d.pos;const p=a,g=o,v=a;for(;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(l+=E,i=l.length,o++)}else if(!Mr(S))break}let b=e.md.helpers.parseLinkTitle(l,a,i);for(;b.can_continue;){const S=s(o);if(S===null)break;l+=S,a=i,i=l.length,o++,b=e.md.helpers.parseLinkTitle(l,a,i,b)}let _;for(a<i&&v!==a&&b.ok?(_=b.str,a=b.pos):(_="",a=p,o=g);a<i;){const S=l.charCodeAt(a);if(!Mr(S))break;a++}if(a<i&&l.charCodeAt(a)!==10&&_)for(_="",a=p,o=g;a<i;){const S=l.charCodeAt(a);if(!Mr(S))break;a++}if(a<i&&l.charCodeAt(a)!==10)return!1;const x=d1(l.slice(1,u));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:_,href:h}),e.line=o),!0):!1}const Ale=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Tle="[a-zA-Z_:][a-zA-Z0-9:._-]*",Nle="[^\"'=<>`\\x00-\\x20]+",Rle="'[^']*'",Ile='"[^"]*"',Ole="(?:"+Nle+"|"+Rle+"|"+Ile+")",jle="(?:\\s+"+Tle+"(?:\\s*=\\s*"+Ole+")?)",nF="<[A-Za-z][A-Za-z0-9\\-]*"+jle+"*\\s*\\/?>",rF="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Dle="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Mle="<[?][\\s\\S]*?[?]>",Ple="<![A-Za-z][^>]*>",Fle="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Lle=new RegExp("^(?:"+nF+"|"+rF+"|"+Dle+"|"+Mle+"|"+Ple+"|"+Fle+")"),$le=new RegExp("^(?:"+nF+"|"+rF+")"),Vf=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Ale.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp($le.source+"\\s*$"),/^$/,!1]];function Ble(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let o=e.src.slice(a,i),s=0;for(;s<Vf.length&&!Vf[s][0].test(o);s++);if(s===Vf.length)return!1;if(r)return Vf[s][2];let l=t+1;if(!Vf[s][1].test(o)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(a=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],o=e.src.slice(a,i),Vf[s][1].test(o)){o.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function zle(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(a);if(o!==35||a>=i)return!1;let s=1;for(o=e.src.charCodeAt(++a);o===35&&a<i&&s<=6;)s++,o=e.src.charCodeAt(++a);if(s>6||a<i&&!Mr(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const l=e.skipCharsBack(i,35,a);l>a&&Mr(e.src.charCodeAt(l-1))&&(i=l),e.line=t+1;const u=e.push("heading_open","h"+String(s),1);u.markup="########".slice(0,s),u.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(a,i).trim(),d.map=[t,e.line],d.children=[];const h=e.push("heading_close","h"+String(s),-1);return h.markup="########".slice(0,s),!0}function Ule(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,o,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let g=e.bMarks[s]+e.tShift[s];const v=e.eMarks[s];if(g<v&&(o=e.src.charCodeAt(g),(o===45||o===61)&&(g=e.skipChars(g,o),g=e.skipSpaces(g),g>=v))){i=o===61?1:2;break}}if(e.sCount[s]<0)continue;let p=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,s,n,!0)){p=!0;break}if(p)break}if(!i)return!1;const l=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const u=e.push("heading_open","h"+String(i),1);u.markup=String.fromCharCode(o),u.map=[t,e.line];const d=e.push("inline","",0);d.content=l,d.map=[t,e.line-1],d.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),e.parentType=a,!0}function Hle(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let u=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](e,i,n,!0)){u=!0;break}if(u)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const l=e.push("inline","",0);return l.content=o,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const Rb=[["table",vle,["paragraph","reference"]],["code",wle],["fence",_le,["paragraph","reference","blockquote","list"]],["blockquote",xle,["paragraph","reference","blockquote","list"]],["hr",Sle,["paragraph","reference","blockquote","list"]],["list",Cle,["paragraph","reference","blockquote"]],["reference",kle],["html_block",Ble,["paragraph","reference","blockquote"]],["heading",zle,["paragraph","reference","blockquote"]],["lheading",Ule],["paragraph",Hle]];function f1(){this.ruler=new Pi;for(let e=0;e<Rb.length;e++)this.ruler.push(Rb[e][0],Rb[e][1],{alt:(Rb[e][2]||[]).slice()})}f1.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const l=e.line;let u=!1;for(let d=0;d<a;d++)if(u=r[d](e,o,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),o=e.line,o<n&&e.isEmpty(o)&&(s=!0,o++,e.line=o)}};f1.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};f1.prototype.State=Js;function Mg(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Mg.prototype.pushPending=function(){const e=new ls("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Mg.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new ls(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};Mg.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,s=i<n?this.src.charCodeAt(i):32,l=R0(a)||N0(String.fromCharCode(a)),u=R0(s)||N0(String.fromCharCode(s)),d=T0(a),h=T0(s),p=!h&&(!u||d||l),g=!d&&(!l||h||u);return{can_open:p&&(t||!g||l),can_close:g&&(t||!p||u),length:o}};Mg.prototype.Token=ls;function qle(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Vle(e,t){let n=e.pos;for(;n<e.posMax&&!qle(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Gle=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Wle(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(Gle);if(!a)return!1;const i=a[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const l=e.md.normalizeLink(s);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(s);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=s.length-i.length,!0}function Kle(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Mr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const uA=[];for(let e=0;e<256;e++)uA.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){uA[e.charCodeAt(0)]=1});function Zle(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Mr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const s=e.push("text_special","",0);a<256&&uA[a]!==0?s.content=i:s.content=o,s.markup=o,s.info="escape"}return e.pos=n+1,!0}function Yle(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(a,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=a)return t||(e.pending+=o),e.pos+=s,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<i&&e.src.charCodeAt(l)===96;)l++;const d=l-u;if(d===s){if(!t){const h=e.push("code_inline","code",0);h.markup=o,h.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[d]=u}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function Xle(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const o=String.fromCharCode(r);if(i<2)return!1;let s;i%2&&(s=e.push("text","",0),s.content=o,i--);for(let l=0;l<i;l+=2)s=e.push("text","",0),s.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function LO(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const s=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function Jle(e){const t=e.tokens_meta,n=e.tokens_meta.length;LO(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&LO(e,t[r].delimiters)}const aF={tokenize:Xle,postProcess:Jle};function Qle(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function $O(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],o=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,s=String.fromCharCode(a.marker),l=e.tokens[a.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?s+s:s,l.content="";const u=e.tokens[i.token];u.type=o?"strong_close":"em_close",u.tag=o?"strong":"em",u.nesting=-1,u.markup=o?s+s:s,u.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function ece(e){const t=e.tokens_meta,n=e.tokens_meta.length;$O(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&$O(e,t[r].delimiters)}const iF={tokenize:Qle,postProcess:ece};function tce(e,t){let n,r,a,i,o="",s="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,h=e.posMax,p=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(u=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Mr(n)&&n!==10));v++);if(v>=h)return!1;if(l=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(o=e.md.normalizeLink(a.str),e.md.validateLink(o)?v=a.pos:o="",l=v;v<h&&(n=e.src.charCodeAt(v),!(!Mr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&l!==v&&a.ok)for(s=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Mr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(u=!0),v++}if(u){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(l=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(l,v++):v=g+1):v=g+1,r||(r=e.src.slice(p,g)),i=e.env.references[d1(r)],!i)return e.pos=d,!1;o=i.href,s=i.title}if(!t){e.pos=p,e.posMax=g;const b=e.push("link_open","a",1),_=[["href",o]];b.attrs=_,s&&_.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function nce(e,t){let n,r,a,i,o,s,l,u,d="";const h=e.pos,p=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<p&&e.src.charCodeAt(i)===40){for(i++;i<p&&(n=e.src.charCodeAt(i),!(!Mr(n)&&n!==10));i++);if(i>=p)return!1;for(u=i,s=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),s.ok&&(d=e.md.normalizeLink(s.str),e.md.validateLink(d)?i=s.pos:d=""),u=i;i<p&&(n=e.src.charCodeAt(i),!(!Mr(n)&&n!==10));i++);if(s=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<p&&u!==i&&s.ok)for(l=s.str,i=s.pos;i<p&&(n=e.src.charCodeAt(i),!(!Mr(n)&&n!==10));i++);else l="";if(i>=p||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<p&&e.src.charCodeAt(i)===91?(u=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(u,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),o=e.env.references[d1(a)],!o)return e.pos=h,!1;d=o.href,l=o.title}if(!t){r=e.src.slice(g,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const _=e.push("image","img",0),x=[["src",d],["alt",""]];_.attrs=x,_.children=b,_.content=r,l&&x.push(["title",l])}return e.pos=i,e.posMax=p,!0}const rce=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,ace=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function ice(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(ace.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}if(rce.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}return!1}function oce(e){return/^<a[>\s]/i.test(e)}function sce(e){return/^<\/a\s*>/i.test(e)}function lce(e){const t=e|32;return t>=97&&t<=122}function cce(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!lce(a))return!1;const i=e.src.slice(r).match(Lle);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],oce(o.content)&&e.linkLevel++,sce(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const uce=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,dce=/^&([a-z][a-z0-9]{1,31});/i;function fce(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(uce);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0);s.content=lA(o)?Jv(o):Jv(65533),s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(dce);if(i){const o=X5(i[0]);if(o!==i[0]){if(!t){const s=e.push("text_special","",0);s.content=o,s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function BO(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let o=0;o<n;o++){const s=e[o];if(i.push(0),(e[r].marker!==s.marker||a!==s.token-1)&&(r=o),a=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[s.marker][(s.open?3:0)+s.length%3];let u=r-i[r]-1,d=u;for(;u>l;u-=i[u]+1){const h=e[u];if(h.marker===s.marker&&h.open&&h.end<0){let p=!1;if((h.close||s.open)&&(h.length+s.length)%3===0&&(h.length%3!==0||s.length%3!==0)&&(p=!0),!p){const g=u>0&&!e[u-1].open?i[u-1]+1:0;i[o]=o-u+g,i[u]=g,s.open=!1,h.end=o,h.close=!1,d=-1,a=-2;break}}}d!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=d)}}function hce(e){const t=e.tokens_meta,n=e.tokens_meta.length;BO(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&BO(t[r].delimiters)}function pce(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const kE=[["text",Vle],["linkify",Wle],["newline",Kle],["escape",Zle],["backticks",Yle],["strikethrough",aF.tokenize],["emphasis",iF.tokenize],["link",tce],["image",nce],["autolink",ice],["html_inline",cce],["entity",fce]],AE=[["balance_pairs",hce],["strikethrough",aF.postProcess],["emphasis",iF.postProcess],["fragments_join",pce]];function Pg(){this.ruler=new Pi;for(let e=0;e<kE.length;e++)this.ruler.push(kE[e][0],kE[e][1]);this.ruler2=new Pi;for(let e=0;e<AE.length;e++)this.ruler2.push(AE[e][0],AE[e][1])}Pg.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<a){for(let s=0;s<r;s++)if(e.level++,o=n[s](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};Pg.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<a){for(let s=0;s<n;s++)if(o=t[s](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};Pg.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),o=i.length;for(let s=0;s<o;s++)i[s](a)};Pg.prototype.State=Mg;function mce(e){const t={};e=e||{},t.src_Any=G5.source,t.src_Cc=W5.source,t.src_Z=Z5.source,t.src_P=oA.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Q2(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function h1(e){return Object.prototype.toString.call(e)}function gce(e){return h1(e)==="[object String]"}function yce(e){return h1(e)==="[object Object]"}function bce(e){return h1(e)==="[object RegExp]"}function zO(e){return h1(e)==="[object Function]"}function vce(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const oF={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function wce(e){return Object.keys(e||{}).reduce(function(t,n){return t||oF.hasOwnProperty(n)},!1)}const _ce={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},xce="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Sce="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Ece(e){e.__index__=-1,e.__text_cache__=""}function Cce(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function UO(){return function(e,t){t.normalize(e)}}function Qv(e){const t=e.re=mce(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(xce),n.push(t.src_xn),t.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(s,l){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+l)}Object.keys(e.__schemas__).forEach(function(s){const l=e.__schemas__[s];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[s]=u,yce(l)){bce(l.validate)?u.validate=Cce(l.validate):zO(l.validate)?u.validate=l.validate:i(s,l),zO(l.normalize)?u.normalize=l.normalize:l.normalize?i(s,l):u.normalize=UO();return}if(gce(l)){a.push(s);return}i(s,l)}),a.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:UO()};const o=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(vce).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Ece(e)}function kce(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function eC(e,t){const n=new kce(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function ro(e,t){if(!(this instanceof ro))return new ro(e,t);t||wce(e)&&(t=e,e={}),this.__opts__=Q2({},oF,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Q2({},_ce,e),this.__compiled__={},this.__tlds__=Sce,this.__tlds_replaced__=!1,this.re={},Qv(this)}ro.prototype.add=function(t,n){return this.__schemas__[t]=n,Qv(this),this};ro.prototype.set=function(t){return this.__opts__=Q2(this.__opts__,t),this};ro.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,o,s,l,u,d;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(o=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};ro.prototype.pretest=function(t){return this.re.pretest.test(t)};ro.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};ro.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(eC(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(eC(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};ro.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,eC(this,0)):null};ro.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Qv(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Qv(this),this)};ro.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};ro.prototype.onCompile=function(){};const ch=2147483647,Ls=36,dA=1,I0=26,Ace=38,Tce=700,sF=72,lF=128,cF="-",Nce=/^xn--/,Rce=/[^\0-\x7F]/,Ice=/[\x2E\u3002\uFF0E\uFF61]/g,Oce={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},TE=Ls-dA,$s=Math.floor,NE=String.fromCharCode;function Bc(e){throw new RangeError(Oce[e])}function jce(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function uF(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(Ice,".");const a=e.split("."),i=jce(a,t).join(".");return r+i}function dF(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const Dce=e=>String.fromCodePoint(...e),Mce=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Ls},HO=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},fF=function(e,t,n){let r=0;for(e=n?$s(e/Tce):e>>1,e+=$s(e/t);e>TE*I0>>1;r+=Ls)e=$s(e/TE);return $s(r+(TE+1)*e/(e+Ace))},hF=function(e){const t=[],n=e.length;let r=0,a=lF,i=sF,o=e.lastIndexOf(cF);o<0&&(o=0);for(let s=0;s<o;++s)e.charCodeAt(s)>=128&&Bc("not-basic"),t.push(e.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const l=r;for(let d=1,h=Ls;;h+=Ls){s>=n&&Bc("invalid-input");const p=Mce(e.charCodeAt(s++));p>=Ls&&Bc("invalid-input"),p>$s((ch-r)/d)&&Bc("overflow"),r+=p*d;const g=h<=i?dA:h>=i+I0?I0:h-i;if(p<g)break;const v=Ls-g;d>$s(ch/v)&&Bc("overflow"),d*=v}const u=t.length+1;i=fF(r-l,u,l==0),$s(r/u)>ch-a&&Bc("overflow"),a+=$s(r/u),r%=u,t.splice(r++,0,a)}return String.fromCodePoint(...t)},pF=function(e){const t=[];e=dF(e);const n=e.length;let r=lF,a=0,i=sF;for(const l of e)l<128&&t.push(NE(l));const o=t.length;let s=o;for(o&&t.push(cF);s<n;){let l=ch;for(const d of e)d>=r&&d<l&&(l=d);const u=s+1;l-r>$s((ch-a)/u)&&Bc("overflow"),a+=(l-r)*u,r=l;for(const d of e)if(d<r&&++a>ch&&Bc("overflow"),d===r){let h=a;for(let p=Ls;;p+=Ls){const g=p<=i?dA:p>=i+I0?I0:p-i;if(h<g)break;const v=h-g,b=Ls-g;t.push(NE(HO(g+v%b,0))),h=$s(v/b)}t.push(NE(HO(h,0))),i=fF(a,u,s===o),a=0,++s}++a,++r}return t.join("")},Pce=function(e){return uF(e,function(t){return Nce.test(t)?hF(t.slice(4).toLowerCase()):t})},Fce=function(e){return uF(e,function(t){return Rce.test(t)?"xn--"+pF(t):t})},mF={version:"2.3.1",ucs2:{decode:dF,encode:Dce},decode:hF,encode:pF,toASCII:Fce,toUnicode:Pce},Lce={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},$ce={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Bce={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},zce={default:Lce,zero:$ce,commonmark:Bce},Uce=/^(vbscript|javascript|file|data):/,Hce=/^data:image\/(gif|png|jpeg|webp);/;function qce(e){const t=e.trim().toLowerCase();return Uce.test(t)?Hce.test(t):!0}const gF=["http:","https:","mailto:"];function Vce(e){const t=iA(e,!0);if(t.hostname&&(!t.protocol||gF.indexOf(t.protocol)>=0))try{t.hostname=mF.toASCII(t.hostname)}catch{}return Dg(aA(t))}function Gce(e){const t=iA(e,!0);if(t.hostname&&(!t.protocol||gF.indexOf(t.protocol)>=0))try{t.hostname=mF.toUnicode(t.hostname)}catch{}return Dh(aA(t),Dh.defaultChars+"%")}function ko(e,t){if(!(this instanceof ko))return new ko(e,t);t||sA(e)||(t=e||{},e="default"),this.inline=new Pg,this.block=new f1,this.core=new cA,this.renderer=new ip,this.linkify=new ro,this.validateLink=qce,this.normalizeLink=Vce,this.normalizeLinkText=Gce,this.utils=Kse,this.helpers=u1({},Jse),this.options={},this.configure(e),t&&this.set(t)}ko.prototype.set=function(e){return u1(this.options,e),this};ko.prototype.configure=function(e){const t=this;if(sA(e)){const n=e;if(e=zce[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};ko.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};ko.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};ko.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};ko.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};ko.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};ko.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};ko.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const RE=new ko({html:!1,linkify:!0,breaks:!0});function yF(e){return T.useMemo(()=>{var n;if(!e)return[];try{const r=RE.parse(e,{}),a=[];let i="",o=0;for(;o<r.length;){const s=r[o];if(s.type==="fence"){i&&(a.push(i),i="");const l=((n=s.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:l,code:s.content}),o++}else{const l=[];for(;o<r.length&&r[o].type!=="fence";)l.push(r[o]),o++;l.length>0&&(i+=RE.renderer.render(l,RE.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const Wce=({toolCall:e})=>{const[t,n]=T.useState(!0),r=()=>n(i=>!i),a=T.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return y.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",y.jsx("code",{className:"font-mono",children:e.toolName})]}),y.jsx(ur,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?y.jsx(Zs,{}):y.jsx(Ad,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&y.jsx(ig,{lang:"json",code:a})]})},Kce=({toolResult:e})=>{const[t,n]=T.useState(!0),r=()=>n(o=>!o),a=T.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),i=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return y.jsxs("div",{className:Rt("my-2 p-2 border rounded-md text-xs",i?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsxs("span",{className:Rt("font-semibold",i?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",y.jsx("code",{className:"font-mono",children:e.toolName})]}),y.jsx(ur,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?y.jsx(Zs,{}):y.jsx(Ad,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&y.jsx(ig,{lang:i?"text":"json",code:a})]})},Zce=({markdownContent:e})=>{const t=yF(e);return e!=null&&e.trim()?y.jsx("div",{children:t.map((n,r)=>{if(typeof n=="string")return y.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return y.jsx(ig,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},Yce=({response:e,toolCalls:t,toolResults:n,reasoning:r,isError:a,errorMessage:i,isFolded:o,toggleFold:s})=>{const[l,u]=T.useState(!0),d=T.useCallback(()=>u(b=>!b),[]),h=!!r,p=e&&(typeof e!="string"||e.trim().length>0),g=t&&t.length>0,v=n&&n.length>0;return o?y.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:s,children:[h?"[Reasoning] ":"",g?`[${t==null?void 0:t.length} Tool Call(s)] `:"",p&&typeof e=="string"?`"${e.substring(0,80)}${e.length>80?"...":""}"`:g||v||h?"":"[No text response]"]}):y.jsxs(y.Fragment,{children:[a&&i&&y.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[y.jsx("p",{className:"font-semibold",children:"Error:"}),y.jsx("p",{children:i})]}),h&&y.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[y.jsx(f6,{className:"h-3.5 w-3.5"})," Reasoning"]}),y.jsx(ur,{tooltipText:l?"Show Reasoning":"Hide Reasoning",onClick:d,"aria-label":l?"Show reasoning":"Hide reasoning",icon:l?y.jsx(Zs,{}):y.jsx(Ad,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!l&&y.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1",children:r})]}),t==null?void 0:t.map((b,_)=>{try{const x=JSON.parse(b);return y.jsx(Wce,{toolCall:x},`call-${_}`)}catch(x){return console.error("Failed to parse tool call string:",x),y.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool call]"},`call-err-${_}`)}}),n==null?void 0:n.map((b,_)=>{try{const x=JSON.parse(b);return y.jsx(Kce,{toolResult:x},`res-${_}`)}catch(x){return console.error("Failed to parse tool result string:",x),y.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool result]"},`res-err-${_}`)}}),y.jsx(Zce,{markdownContent:e}),!p&&!g&&!v&&!h&&y.jsx("div",{className:"text-muted-foreground italic",children:"No response content."})]})},bF=yt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var E,C,k,R,j,O,L,z;const[i,o]=T.useState(!1),{dbProviderConfigs:s,getAllAvailableModelDefsForProvider:l}=Pn(hn(Y=>({dbProviderConfigs:Y.dbProviderConfigs,getAllAvailableModelDefsForProvider:Y.getAllAvailableModelDefsForProvider}))),u=T.useCallback(()=>o(Y=>!Y),[]),d=e.endedAt?V5(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=T.useMemo(()=>{var X;const Y=(X=e.metadata)==null?void 0:X.modelId;if(!Y)return"Unknown Model";const{providerId:F,modelId:K}=Yl(Y);if(!F||!K)return Y;const q=s.find(ae=>ae.id===F),fe=(q==null?void 0:q.name)??F,re=l(F).find(ae=>ae.id===K);return`${(re==null?void 0:re.name)??K} (${fe})`},[(E=e.metadata)==null?void 0:E.modelId,s,l]),p=e.status==="COMPLETED"||e.status==="ERROR",g=e.status==="ERROR",v=e.response&&(typeof e.response!="string"||e.response.trim().length>0),b=((C=e.metadata)==null?void 0:C.toolCalls)&&e.metadata.toolCalls.length>0,_=((k=e.metadata)==null?void 0:k.toolResults)&&e.metadata.toolResults.length>0,x=!!((R=e.metadata)!=null&&R.reasoning),S=v||b||_||x;return y.jsxs("div",{className:Rt("group/card relative rounded-lg border bg-card p-4 shadow-sm transition-colors hover:bg-muted/50",g?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&y.jsx(rA,{turnData:e.prompt,timestamp:e.startedAt}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 relative group/assistant",children:[y.jsx(ose,{displayModelName:h,timeAgo:d,responseContent:typeof e.response=="string"?e.response:null,isFolded:i,toggleFold:u,canFold:S}),y.jsx(Yce,{response:e.response,toolCalls:(j=e.metadata)==null?void 0:j.toolCalls,toolResults:(O=e.metadata)==null?void 0:O.toolResults,reasoning:(L=e.metadata)==null?void 0:L.reasoning,isError:g,errorMessage:(z=e.metadata)==null?void 0:z.error,isFolded:i,toggleFold:u})]}),p&&y.jsx(sse,{interactionId:e.id,onEdit:r,onRegenerate:t,onDelete:n})]})});bF.displayName="InteractionCard";const Xce=({markdownContent:e,isStreaming:t=!1,className:n})=>{const{enableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a}=Zr(hn(s=>({enableStreamingMarkdown:s.enableStreamingMarkdown,enableStreamingCodeBlockParsing:s.enableStreamingCodeBlockParsing}))),i=yF(r?e:null),o=T.useMemo(()=>r?i.map((s,l)=>{if(typeof s=="string")return y.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:s}},`html-${l}`);if(s.type==="code"){const u=s,d=u.lang?`language-${u.lang}`:"language-plaintext";return a?y.jsx(ig,{lang:u.lang,code:u.code},`code-${l}`):y.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[y.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:y.jsx("div",{className:"text-sm font-medium",children:u.lang?u.lang.toUpperCase():"CODE"})}),y.jsx("code",{className:Rt(d,"block p-4 font-mono text-sm leading-relaxed"),children:u.code})]},`pre-${l}`)}return null}):y.jsx("pre",{className:Rt("whitespace-pre-wrap text-sm",n),children:e}),[i,r,a,e,n]);return e!=null&&e.trim()?y.jsx("div",{className:Rt(n),children:o}):y.jsx("div",{className:Rt("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."})},Jce=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>y.jsx(ur,{tooltipText:"Stop",onClick:e,"aria-label":a,icon:y.jsx(aq,{}),variant:r,size:n,className:t}),tC=yt.memo(({interactionId:e,onStop:t,className:n})=>{var u;const{interaction:r,bufferedContent:a}=or(hn(d=>({interaction:d.interactions.find(p=>p.id===e),bufferedContent:d.activeStreamBuffers[e]??""}))),{dbProviderConfigs:i,getAllAvailableModelDefsForProvider:o}=Pn(hn(d=>({dbProviderConfigs:d.dbProviderConfigs,getAllAvailableModelDefsForProvider:d.getAllAvailableModelDefsForProvider}))),s=T.useMemo(()=>{var x;const d=(x=r==null?void 0:r.metadata)==null?void 0:x.modelId;if(!d)return"Loading Model...";const{providerId:h,modelId:p}=Yl(d);if(!h||!p)return d;const g=i.find(S=>S.id===h),v=(g==null?void 0:g.name)??h,_=o(h).find(S=>S.id===p);return`${(_==null?void 0:_.name)??p} (${v})`},[(u=r==null?void 0:r.metadata)==null?void 0:u.modelId,i,o]);if(!r)return console.warn(`StreamingInteractionCard: Interaction data for ${e} not found yet.`),y.jsxs("div",{className:Rt("group relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[y.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"})," ",y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),y.jsx("div",{className:"h-16 bg-muted rounded w-full"})," "]})]});const l=()=>{t&&t(e)};return y.jsxs("div",{className:Rt("group relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&y.jsx(rA,{turnData:r.prompt,timestamp:r.startedAt}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",s,")"]}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),y.jsx(Xce,{markdownContent:a,isStreaming:!0})]}),t&&y.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:y.jsx(Jce,{onStop:l,"aria-label":"Stop Generation"})})]})});tC.displayName="StreamingInteractionCard";var Qce=T.createContext(void 0);function op(e){const t=T.useContext(Qce);return e||t||"ltr"}function O0(e,[t,n]){return Math.min(n,Math.max(t,e))}function eue(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var fA="ScrollArea",[vF,O_e]=_i(fA),[tue,Ro]=vF(fA),wF=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,l]=T.useState(null),[u,d]=T.useState(null),[h,p]=T.useState(null),[g,v]=T.useState(null),[b,_]=T.useState(null),[x,S]=T.useState(0),[E,C]=T.useState(0),[k,R]=T.useState(!1),[j,O]=T.useState(!1),L=Cn(t,Y=>l(Y)),z=op(a);return y.jsx(tue,{scope:n,type:r,dir:z,scrollHideDelay:i,scrollArea:s,viewport:u,onViewportChange:d,content:h,onContentChange:p,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:R,scrollbarY:b,onScrollbarYChange:_,scrollbarYEnabled:j,onScrollbarYEnabledChange:O,onCornerWidthChange:S,onCornerHeightChange:C,children:y.jsx(tn.div,{dir:z,...o,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});wF.displayName=fA;var _F="ScrollAreaViewport",xF=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=Ro(_F,n),s=T.useRef(null),l=Cn(t,s,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),y.jsx(tn.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});xF.displayName=_F;var Qs="ScrollAreaScrollbar",SF=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ro(Qs,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return T.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?y.jsx(nue,{...r,ref:t,forceMount:n}):a.type==="scroll"?y.jsx(rue,{...r,ref:t,forceMount:n}):a.type==="auto"?y.jsx(EF,{...r,ref:t,forceMount:n}):a.type==="always"?y.jsx(hA,{...r,ref:t}):null});SF.displayName=Qs;var nue=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ro(Qs,e.__scopeScrollArea),[i,o]=T.useState(!1);return T.useEffect(()=>{const s=a.scrollArea;let l=0;if(s){const u=()=>{window.clearTimeout(l),o(!0)},d=()=>{l=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",u),s.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),s.removeEventListener("pointerenter",u),s.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),y.jsx(Ca,{present:n||i,children:y.jsx(EF,{"data-state":i?"visible":"hidden",...r,ref:t})})}),rue=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ro(Qs,e.__scopeScrollArea),i=e.orientation==="horizontal",o=m1(()=>l("SCROLL_END"),100),[s,l]=eue("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(s==="idle"){const u=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[s,a.scrollHideDelay,l]),T.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const p=()=>{const g=u[d];h!==g&&(l("SCROLL"),o()),h=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[a.viewport,i,l,o]),y.jsx(Ca,{present:n||s!=="hidden",children:y.jsx(hA,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:qt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:qt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),EF=T.forwardRef((e,t)=>{const n=Ro(Qs,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=T.useState(!1),s=e.orientation==="horizontal",l=m1(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(s?u:d)}},10);return Ph(n.viewport,l),Ph(n.content,l),y.jsx(Ca,{present:r||i,children:y.jsx(hA,{"data-state":i?"visible":"hidden",...a,ref:t})})}),hA=T.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Ro(Qs,e.__scopeScrollArea),i=T.useRef(null),o=T.useRef(0),[s,l]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=NF(s.viewport,s.content),d={...r,sizes:s,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,g){return cue(p,o.current,s,g)}return n==="horizontal"?y.jsx(aue,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollLeft,g=qO(p,s,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollLeft=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollLeft=h(p,a.dir))}}):n==="vertical"?y.jsx(iue,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollTop,g=qO(p,s);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollTop=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollTop=h(p))}}):null}),aue=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ro(Qs,e.__scopeScrollArea),[o,s]=T.useState(),l=T.useRef(null),u=Cn(t,l,i.onScrollbarXChange);return T.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),y.jsx(kF,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":p1(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(p),IF(p,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:tw(o.paddingLeft),paddingEnd:tw(o.paddingRight)}})}})}),iue=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ro(Qs,e.__scopeScrollArea),[o,s]=T.useState(),l=T.useRef(null),u=Cn(t,l,i.onScrollbarYChange);return T.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),y.jsx(kF,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":p1(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(p),IF(p,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:tw(o.paddingTop),paddingEnd:tw(o.paddingBottom)}})}})}),[oue,CF]=vF(Qs),kF=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...p}=e,g=Ro(Qs,n),[v,b]=T.useState(null),_=Cn(t,L=>b(L)),x=T.useRef(null),S=T.useRef(""),E=g.viewport,C=r.content-r.viewport,k=Ma(d),R=Ma(l),j=m1(h,10);function O(L){if(x.current){const z=L.clientX-x.current.left,Y=L.clientY-x.current.top;u({x:z,y:Y})}}return T.useEffect(()=>{const L=z=>{const Y=z.target;(v==null?void 0:v.contains(Y))&&k(z,C)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[E,v,C,k]),T.useEffect(R,[r,R]),Ph(v,j),Ph(g.content,j),y.jsx(oue,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Ma(i),onThumbPointerUp:Ma(o),onThumbPositionChange:R,onThumbPointerDown:Ma(s),children:y.jsx(tn.div,{...p,ref:_,style:{position:"absolute",...p.style},onPointerDown:qt(e.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),x.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),O(L))}),onPointerMove:qt(e.onPointerMove,O),onPointerUp:qt(e.onPointerUp,L=>{const z=L.target;z.hasPointerCapture(L.pointerId)&&z.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),ew="ScrollAreaThumb",AF=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=CF(ew,e.__scopeScrollArea);return y.jsx(Ca,{present:n||a.hasThumb,children:y.jsx(sue,{ref:t,...r})})}),sue=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Ro(ew,n),o=CF(ew,n),{onThumbPositionChange:s}=o,l=Cn(t,h=>o.onThumbChange(h)),u=T.useRef(void 0),d=m1(()=>{u.current&&(u.current(),u.current=void 0)},100);return T.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(d(),!u.current){const g=uue(h,s);u.current=g,s()}};return s(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,d,s]),y.jsx(tn.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:qt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,b=h.clientY-g.top;o.onThumbPointerDown({x:v,y:b})}),onPointerUp:qt(e.onPointerUp,o.onThumbPointerUp)})});AF.displayName=ew;var pA="ScrollAreaCorner",TF=T.forwardRef((e,t)=>{const n=Ro(pA,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(lue,{...e,ref:t}):null});TF.displayName=pA;var lue=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Ro(pA,n),[i,o]=T.useState(0),[s,l]=T.useState(0),u=!!(i&&s);return Ph(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),l(d)}),Ph(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?y.jsx(tn.div,{...r,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function tw(e){return e?parseInt(e,10):0}function NF(e,t){const n=e/t;return isNaN(n)?0:n}function p1(e){const t=NF(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function cue(e,t,n,r="ltr"){const a=p1(n),i=a/2,o=t||i,s=a-o,l=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-s,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return RF([l,u],h)(e)}function qO(e,t,n="ltr"){const r=p1(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-r,l=n==="ltr"?[0,o]:[o*-1,0],u=O0(e,l);return RF([0,o],[0,s])(u)}function RF(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function IF(e,t){return e>0&&e<t}var uue=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,s=n.top!==i.top;(o||s)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function m1(e,t){const n=Ma(e),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ph(e,t){const n=Ma(t);$a(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var due=wF,fue=xF,hue=TF;function Hd({className:e,children:t,...n}){return y.jsxs(due,{"data-slot":"scroll-area",className:Rt("relative",e),...n,children:[y.jsx(fue,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),y.jsx(pue,{}),y.jsx(hue,{})]})}function pue({className:e,orientation:t="vertical",...n}){return y.jsx(SF,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Rt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:y.jsx(AF,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Or({className:e,...t}){return y.jsx("div",{"data-slot":"skeleton",className:Rt("bg-accent animate-pulse rounded-md",e),...t})}const VO=()=>y.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[y.jsx(b6,{className:"h-16 w-16 text-muted-foreground mb-4"}),y.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),y.jsx("p",{className:"text-muted-foreground max-w-md",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat."})]}),mue=".litechat/conversations",OF="/synced_repos";async function gue(e,t,n){n(t.id,"syncing");const r=Zn(`${OF}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let o=!1;try{await e.promises.stat(Gs(r,".git")),o=!0}catch(s){if(s.code==="ENOENT")o=!1;else throw s}o?(lt.info(`Pulling latest changes for "${t.name}"...`),await s1(r,i,a,{fsInstance:e}),lt.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(lt.info(`Cloning repository "${t.name}"...`),await j5(r,t.remoteUrl,i,a,{fsInstance:e}),lt.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(o){console.error(`Failed to initialize/sync repository ${t.name}:`,o),n(t.id,"error")}}async function yue(e,t,n,r,a,i,o){var h,p;r(t.id,"syncing");const s=Zn(`${OF}/${n.id}`),l=Gs(s,mue,`${t.id}.json`),u={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(Gs(s,".git"))}catch(x){if(x.code==="ENOENT"){lt.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw x}lt.info(`Pulling latest changes for "${n.name}"...`),await s1(s,d,u,{fsInstance:e});let g=null,v=null;try{const x=await Ud(l,{fsInstance:e}),S=new TextDecoder().decode(x);g=JSON.parse(S),v=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(x){x.code==="ENOENT"?console.log(`Conversation file ${l} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${x.message}`),lt.warning(`Could not read remote version of conversation: ${x.message}`))}const b=t.updatedAt.getTime(),_=((p=t.lastSyncedAt)==null?void 0:p.getTime())??0;if(!g||b>(v??0)||b>_&&b>=(v??0)){lt.info("Local changes detected. Pushing to remote...");const x=await Wt.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...E}=t,C=JSON.stringify({conversation:E,interactions:x},null,2);await l1(l,C,{fsInstance:e}),await Qk(s,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await eA(s,d,u,{fsInstance:e}),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),lt.success("Conversation synced successfully (pushed).")}else if(v&&v>b){lt.info("Remote changes detected. Updating local conversation...");const x={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await Wt.saveConversation(x),await Wt.deleteInteractionsForConversation(t.id);const S=g.interactions.map(E=>Wt.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(S),i()===t.id&&o()==="conversation"&&await or.getState().loadInteractions(t.id),r(t.id,"idle"),lt.success("Conversation synced successfully (pulled).")}else lt.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const Ko=rs(as((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&lt.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const o=i.parentId??r.rootId??"";a[o]||(a[o]=r.childrenMap[o]?[...r.childrenMap[o]]:[]),a[o].includes(i.id)||a[o].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const o=i.parentId??r.rootId??"";if(r.childrenMap[o]&&(r.childrenMap[o]=r.childrenMap[o].filter(s=>s!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const s=Object.values(r.nodes).filter(l=>l.parentId===a).map(l=>l.id);s.length>0&&t()._removeNodes(s),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),Ct.emit(xt.VFS_CONTEXT_CHANGED,{vfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),Ct.emit(xt.VFS_CONTEXT_CHANGED,{vfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,i)}));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),Ct.emit(xt.VFS_CONTEXT_CHANGED,{vfsKey:null}),n!==null?t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,i)}):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async(n,r)=>{if(!n)throw console.warn("[VfsStore] initializeVFS called without a valid vfsKey."),new Error("VFS key cannot be empty.");const a=(r==null?void 0:r.force)===!0;if(!a){if(t().vfsKey!==n){const d=`UI Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().initializingKey!==null){const d=`UI Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().configuredVfsKey===n&&t().fs)return console.log(`[VfsStore] UI Initialization skipped for key "${n}" (already configured).`),e({loading:!1}),t().fs}const{_setLoading:i,_setError:o,_addNodes:s,_setFsInstance:l,_setConfiguredVfsKey:u}=t();console.log(`[VfsStore] Initializing VFS with key: ${n} (Forced: ${a})`),e({initializingKey:n}),a||(i(!0),o(null));try{const d=await zie(n);if(!d)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==n){const g=`UI Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${g}`),e({initializingKey:null,loading:!1}),new Error(g)}if(a)return console.log(`[VfsStore] Forced initialization complete for key: ${n}. Returning instance.`),e({initializingKey:null}),d;l(d),u(n),console.log(`[VfsStore] UI VFS instance configured for key: ${n}`);const h="vfs-root";let p=t().nodes[h];try{await d.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(g){if(g.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw g}if(!p||p.path!=="/"){const g=Date.now();p={id:h,parentId:null,name:"",path:"/",type:"folder",createdAt:g,lastModified:g},s([p]),console.log("[VfsStore] Root node added/updated in state.")}return e(g=>{g.rootId=p.id,g.currentParentId=p.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${p.id}`),await t().fetchNodes(p.id),d}catch(d){const h=`Failed to initialize VFS (${n}): ${d instanceof Error?d.message:String(d)}`;throw console.error(`[VfsStore] ${h}`,d),t().initializingKey===n&&(o(h),a||(l(null),u(null))),new Error(h)}finally{t().initializingKey===n&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:o,nodes:s,rootId:l,configuredVfsKey:u,vfsKey:d,initializingKey:h}=t();if(!o||u!==d||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!o}, Match: ${u===d}, Init: ${h}`);return}r(!0);try{const p=n?s[n]:s[l||""],g=p?p.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${g} (Key: ${u})`);const v=await tA(g,{fsInstance:o});console.log(`[VfsStore] Fetched ${v.length} entries for ${g}`);const b=n??l??"",_=new Set(v.map(k=>k.path)),E=(t().childrenMap[b]||[]).map(k=>t().nodes[k]).filter(Boolean).filter(k=>!_.has(k.path)).map(k=>k.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const C=v.map(k=>{const R=Object.values(t().nodes).find(O=>O.path===k.path),j=Date.now();return{id:(R==null?void 0:R.id)||Co(),parentId:n,name:k.name,path:k.path,type:k.isDirectory?"folder":"file",size:k.size,createdAt:(R==null?void 0:R.createdAt)??j,lastModified:k.lastModified.getTime(),mimeType:k.isDirectory?void 0:k.mimeType}});C.length>0&&(console.log(`[VfsStore] Adding/Updating ${C.length} nodes.`),i(C)),e(k=>{const R=C.map(j=>j.id);(!k.childrenMap[b]||JSON.stringify(k.childrenMap[b].sort())!==JSON.stringify(R.sort()))&&(k.childrenMap[b]=R,console.log(`[VfsStore] Updated childrenMap for parent: ${b}`))})}catch(p){console.error("Failed to fetch VFS nodes:",p),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=Zn(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:o}=t();if(!o||t().vfsKey!==t().configuredVfsKey)return;const s=Zn(n),l=r(s);l&&l.type==="folder"?(e(u=>{u.currentParentId=l.id}),t().childrenMap[l.id]||await a(l.id)):s==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:l,_addNodes:u,configuredVfsKey:d,vfsKey:h}=t();if(!o||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const p=n?s[n]:s[l||""],g=p?p.path:"/",v=b0(g,r.trim());try{throw await o.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(S){if(S.code!=="ENOENT")throw S}await P5(v,{fsInstance:o});const b=Date.now(),x={id:Co(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:b,lastModified:b};u([x])}catch(p){console.error("Failed to create directory:",p),i(p.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:l,configuredVfsKey:u,vfsKey:d}=t();if(!o||u!==d){i("Filesystem not ready.");return}a(!0);try{const h=n?s[n]:s[l||""],p=h?h.path:"/";await F5(Array.from(r),p,{fsInstance:o}),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:o,configuredVfsKey:s,vfsKey:l}=t();if(!o||s!==l){a("Filesystem not ready.");return}r(!0);try{const u=n.map(d=>t().nodes[d]).filter(Boolean);for(const d of u)await nA(d.path,d.type==="folder",{fsInstance:o});i(n)}catch(u){console.error("Failed to delete nodes:",u),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:o,nodes:s,fs:l,rootId:u,configuredVfsKey:d,vfsKey:h}=t();if(!l||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const p=s[n];if(!p){i("Item not found.");return}if(p.name!==r.trim()){a(!0);try{const g=p.parentId?s[p.parentId]:s[u||""],v=g?g.path:"/",b=b0(v,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await L5(p.path,b,{fsInstance:l});const _={name:r.trim(),path:b,lastModified:Date.now()};o(n,_)}catch(g){console.error("Failed to rename item:",g),i(g.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:o,vfsKey:s}=t();if(!a||o!==s)return i("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return i("File not found."),null;try{const u=await Ud(l.path,{fsInstance:a}),d=l.mimeType||"application/octet-stream",h=new Blob([u],{type:d});return{name:l.name,blob:h}}catch(u){return console.error("Failed to download file:",u),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),ni=rs(as((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await Wt.loadProjects();e({projects:n,isLoading:!1})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1})}},addProject:async n=>{const r=Co(),a=new Date,i=n.parentId??null,o=i?t().getProjectById(i):null,s=o?o.path:"/",l=b0(s,n.name),u={id:r,createdAt:a,updatedAt:a,name:n.name,parentId:i,path:l,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,metadata:n.metadata??{}};e(d=>{d.projects.push(u),d.projects.sort((h,p)=>p.updatedAt.getTime()-h.updatedAt.getTime())});try{const d=t().getProjectById(r);if(d)await Wt.saveProject(d),await Ko.getState().initializeVFS(r);else throw new Error("Failed to retrieve newly added project state");return r}catch(d){throw console.error("ProjectStore: Error adding project",d),e(h=>({error:"Failed to save new project",projects:h.projects.filter(p=>p.id!==r)})),d}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ProjectStore: Project ${n} not found for update.`);return}let i=a.path;if(r.name&&r.name!==a.name){const s=hg(a.path);i=b0(s,r.name)}const o={...a,...r,path:i,updatedAt:new Date};e(s=>{const l=s.projects.findIndex(u=>u.id===n);l!==-1&&(s.projects[l]=o,s.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()))});try{await Wt.saveProject(o)}catch(s){throw console.error("ProjectStore: Error updating project",s),e(l=>{const u=l.projects.findIndex(d=>d.id===n);u!==-1&&(l.projects[u]=a,l.projects.sort((d,h)=>h.updatedAt.getTime()-d.updatedAt.getTime())),l.error="Failed to save project update"}),s}},deleteProject:async n=>{const r=t().getProjectById(n);if(!r)return;const a=t().projects.filter(o=>o.parentId===n).map(o=>o.id),i=[n,...a];e(o=>({projects:o.projects.filter(s=>!i.includes(s.id))})),mn.getState()._unlinkConversationsFromProjects(i);try{await Wt.deleteProject(n),lt.success(`Project "${r.name}" deleted.`)}catch(o){throw console.error("ProjectStore: Error deleting project",o),e(s=>{const l=t().projects.filter(u=>i.includes(u.id)).concat(r);s.projects.push(...l),s.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),s.error="Failed to delete project"}),o}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getProjectHierarchy:n=>{const r=[];let a=n;for(;a;){const i=t().getProjectById(a);if(i)r.unshift({id:i.id,name:i.name}),a=i.parentId;else break}return r},getEffectiveProjectSettings:n=>{const r=Zr.getState(),a=Pn.getState().selectedModelId;let i=n,o={systemPrompt:null,modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null};for(;i;){const s=t().getProjectById(i);if(s)o.systemPrompt===null&&s.systemPrompt!==null&&s.systemPrompt!==void 0&&(o.systemPrompt=s.systemPrompt),o.modelId===null&&s.modelId!==null&&s.modelId!==void 0&&(o.modelId=s.modelId),o.temperature===null&&s.temperature!==null&&s.temperature!==void 0&&(o.temperature=s.temperature),o.maxTokens===null&&s.maxTokens!==null&&s.maxTokens!==void 0&&(o.maxTokens=s.maxTokens),o.topP===null&&s.topP!==null&&s.topP!==void 0&&(o.topP=s.topP),o.topK===null&&s.topK!==null&&s.topK!==void 0&&(o.topK=s.topK),o.presencePenalty===null&&s.presencePenalty!==null&&s.presencePenalty!==void 0&&(o.presencePenalty=s.presencePenalty),o.frequencyPenalty===null&&s.frequencyPenalty!==null&&s.frequencyPenalty!==void 0&&(o.frequencyPenalty=s.frequencyPenalty),i=s.parentId;else break}return o.systemPrompt===null&&(o.systemPrompt=r.globalSystemPrompt),o.modelId===null&&(o.modelId=a),o.temperature===null&&(o.temperature=r.temperature),o.maxTokens===null&&(o.maxTokens=r.maxTokens),o.topP===null&&(o.topP=r.topP),o.topK===null&&(o.topK=r.topK),o.presencePenalty===null&&(o.presencePenalty=r.presencePenalty),o.frequencyPenalty===null&&(o.frequencyPenalty=r.frequencyPenalty),o}}))),IE=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},bue=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${X2(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${X2(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,o,s,l,u,d,h;((a=r.prompt)!=null&&a.content||(s=(o=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:o.attachedFiles)!=null&&s.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(p=>{n+=`- ${p.name} (${p.type}, ${$v(p.size)}) ${p.source==="vfs"?`(VFS: ${p.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(u=r.metadata)!=null&&u.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((d=r.metadata)!=null&&d.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class Ib{static async importConversation(t,n,r){try{const a=await t.text(),i=JSON.parse(a);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const o=i.conversation,s=i.interactions;if(!o.id||!o.title||!o.createdAt||!o.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:o.title||"Imported Chat",metadata:o.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=s.map(d=>Wt.saveInteraction({...d,conversationId:l,id:Co()}));await Promise.all(u),await r(l,"conversation"),lt.success("Conversation imported successfully.")}catch(a){throw console.error("ImportExportService: Error importing conversation",a),lt.error(`Import failed: ${a instanceof Error?a.message:String(a)}`),a}}static async exportConversation(t,n){try{const r=mn.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const a=await Wt.loadInteractionsForConversation(t);let i,o;const s=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const u=JSON.stringify({conversation:r,interactions:a},null,2);i=new Blob([u],{type:"application/json"}),o=`litechat_conversation_${s}_${t.substring(0,6)}.json`}else if(n==="md"){const l=bue(r,a);i=new Blob([l],{type:"text/markdown"}),o=`litechat_conversation_${s}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");IE(i,o),lt.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),lt.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=ni.getState(),{conversations:a}=mn.getState(),i=r(t);if(!i)throw new Error("Project not found.");const o=async p=>{const g=n.find(x=>x.id===p);if(!g)throw new Error(`Project ${p} not found in state.`);const v=n.filter(x=>x.parentId===p),b=a.filter(x=>x.projectId===p),_=[];for(const x of v)_.push(await o(x.id));for(const x of b){const S=await Wt.loadInteractionsForConversation(x.id);_.push({conversation:x,interactions:S})}return{project:g,children:_}},s=await o(t),l=JSON.stringify(s,null,2),u=new Blob([l],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;IE(u,h),lt.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),lt.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=mn.getState().conversations,n=[];for(const o of t){const s=await Wt.loadInteractionsForConversation(o.id);n.push({conversation:o,interactions:s})}const r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;IE(a,i),lt.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),lt.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}}const GO="sync_repos",vue="/synced_repos",mn=rs(as((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{console.log("[ConversationStore] Ensuring Sync VFS is ready...");try{const n=await Ko.getState().initializeVFS(GO,{force:!0});return console.log(`[ConversationStore] Sync VFS ready for key ${GO}.`),n}catch(n){throw console.error("[ConversationStore] Failed to ensure Sync VFS:",n),lt.error(`Filesystem error for sync: ${n instanceof Error?n.message:String(n)}`),n}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await ni.getState().loadProjects();const[n,r]=await Promise.all([Wt.loadConversations(),Wt.loadSyncRepos()]),a={};n.forEach(i=>{if(i.syncRepoId){const o=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,s=i.updatedAt instanceof Date?i.updatedAt.getTime():null;o?s&&s>o?a[i.id]="needs-sync":a[i.id]="idle":a[i.id]="needs-sync"}else a[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:a,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=Co(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(o=>{o.conversations.some(s=>s.id===i.id)||(o.conversations.unshift(i),o.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const o=t().getConversationById(r);if(o)await Wt.saveConversation(o),Ct.emit(xt.CONVERSATION_ADDED,{conversation:o});else throw new Error("Failed to retrieve newly added conversation state");return r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),e(s=>({error:"Failed to save new conversation",conversations:s.conversations.filter(l=>l.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([l])=>l!==r))})),o}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(o=>{const s=o.conversations.findIndex(l=>l.id===n);if(s!==-1){const l=o.conversations[s].metadata??{},u=r.metadata??{},d={...l,...u};Object.assign(o.conversations[s],{...r,metadata:d,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),p=o.conversations[s].lastSyncedAt instanceof Date?o.conversations[s].lastSyncedAt.getTime():null,g=o.conversations[s].updatedAt.getTime();"syncRepoId"in r?o.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&o.conversations[s].syncRepoId&&o.conversationSyncStatus[n]==="idle"&&(!p||g>p)&&(o.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Wt.saveConversation(o),Ct.emit(xt.CONVERSATION_UPDATED,{conversationId:n,updates:r})}catch(o){throw console.error("ConversationStore: Error updating conversation",o),e(s=>{const l=s.conversations.findIndex(u=>u.id===n);if(l!==-1){s.conversations[l]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,d=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&u&&d<=u?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update"}),o}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(o=>{const s=o.conversations.findIndex(l=>l.id===n);if(s!==-1){o.conversations[s]=a;const l=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,u=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&l&&u<=l?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(o=>o.id===n);if(i){e(o=>({conversations:o.conversations.filter(s=>s.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([s])=>s!==n))}));try{await Wt.deleteConversation(n),await Wt.deleteInteractionsForConversation(n),Ct.emit(xt.CONVERSATION_DELETED,{conversationId:n}),r===n&&a==="conversation"&&(await or.getState().setCurrentConversationId(null),Ct.emit(xt.CONTEXT_CHANGED,{selectedItemId:null,selectedItemType:null}))}catch(o){throw console.error("ConversationStore: Error deleting conversation",o),e(s=>{if(i){s.conversations.push(i);const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,u=i.updatedAt.getTime();s.conversationSyncStatus[n]=i.syncRepoId&&l&&u<=l?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(s.selectedItemId=n,s.selectedItemType="conversation"),s.error="Failed to delete conversation"}),o}}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await or.getState().setCurrentConversationId(r==="conversation"?n:null),Ct.emit(xt.CONTEXT_CHANGED,{selectedItemId:n,selectedItemType:r}),r==="conversation"?Ct.emit(xt.CONVERSATION_SELECTED,{conversationId:n}):r==="project"?Ct.emit(xt.PROJECT_SELECTED,{projectId:n}):(Ct.emit(xt.CONVERSATION_SELECTED,{conversationId:null}),Ct.emit(xt.PROJECT_SELECTED,{projectId:null}))):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{await Ib.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await Ib.exportConversation(n,r)},exportProject:async n=>{await Ib.exportProject(n)},exportAllConversations:async()=>{await Ib.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Wt.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=Co(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(o=>{o.syncRepos.push(i)});try{const o=t().syncRepos.find(s=>s.id===r);if(o){const s=JSON.parse(JSON.stringify(o));await Wt.saveSyncRepo(s),Ct.emit(xt.SYNC_REPO_CHANGED,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");return lt.success(`Sync repository "${i.name}" added.`),r}catch(o){throw console.error("ConversationStore: Error adding sync repo",o),e(s=>({error:"Failed to save sync repository",syncRepos:s.syncRepos.filter(l=>l.id!==r)})),o}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(o=>o.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(o=>{const s=o.syncRepos.findIndex(l=>l.id===n);s!==-1&&Object.assign(o.syncRepos[s],{...r,branch:r.branch||o.syncRepos[s].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(o=>o.id===n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Wt.saveSyncRepo(o),Ct.emit(xt.SYNC_REPO_CHANGED,{repoId:n,action:"updated"}),lt.success(`Sync repository "${i.name}" updated.`)}catch(o){throw console.error("ConversationStore: Error updating sync repo",o),e(s=>{const l=s.syncRepos.findIndex(u=>u.id===n);l!==-1&&(s.syncRepos[l]=a),s.error="Failed to save sync repository update"}),o}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(o=>{const s=o.syncRepos.findIndex(l=>l.id===n);s!==-1&&(o.syncRepos[s]=a),o.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(o=>o.id===n);if(!r)return;const a=Zn(`${vue}/${n}`);let i;try{i=await t()._ensureSyncVfsReady()}catch{return}e(o=>({syncRepos:o.syncRepos.filter(s=>s.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(o.repoInitializationStatus).filter(([s])=>s!==n))}));try{await Wt.deleteSyncRepo(n),Ct.emit(xt.SYNC_REPO_CHANGED,{repoId:n,action:"deleted"}),lt.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await nA(a,!0,{fsInstance:i}),lt.info(`Removed local sync folder for "${r.name}".`)}catch(o){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,o),o.code!=="ENOENT"&&lt.warning(`Failed to remove local sync folder: ${o.message}`)}}catch(o){throw console.error("ConversationStore: Error deleting sync repo",o),e(s=>{r&&s.syncRepos.push(r),s.error="Failed to delete sync repository"}),o}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),lt.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)}),Ct.emit(xt.CONVERSATION_SYNC_STATUS_CHANGED,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r}),Ct.emit(xt.REPO_INIT_STATUS_CHANGED,{repoId:n,status:r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){lt.error("Sync repsitory configuration not found.");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await gue(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){lt.error("Conversation not found for syncing.");return}if(!r.syncRepoId){lt.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(s=>s.id===r.syncRepoId);if(!a){lt.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let i;try{i=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await yue(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const o=t().getConversationById(n);o&&e(s=>{const l=s.conversations.findIndex(u=>u.id===n);l!==-1&&(s.conversations[l]=o)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const o=t().getConversationById(r);if(!o){console.warn("Cannot update tool settings: Selected conversation not found.");return}const s=o.metadata??{},l={...s};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(s)||!o.metadata)&&await i(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(a=>{a.conversations=a.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})}})));function Jn({className:e,type:t,...n}){return y.jsx("input",{type:t,"data-slot":"input",className:Rt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function g1(e){const t=e+"CollectionProvider",[n,r]=_i(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:_,children:x}=b,S=yt.useRef(null),E=yt.useRef(new Map).current;return y.jsx(a,{scope:_,itemMap:E,collectionRef:S,children:x})};o.displayName=t;const s=e+"CollectionSlot",l=Xc(s),u=yt.forwardRef((b,_)=>{const{scope:x,children:S}=b,E=i(s,x),C=Cn(_,E.collectionRef);return y.jsx(l,{ref:C,children:S})});u.displayName=s;const d=e+"CollectionItemSlot",h="data-radix-collection-item",p=Xc(d),g=yt.forwardRef((b,_)=>{const{scope:x,children:S,...E}=b,C=yt.useRef(null),k=Cn(_,C),R=i(d,x);return yt.useEffect(()=>(R.itemMap.set(C,{ref:C,...E}),()=>void R.itemMap.delete(C))),y.jsx(p,{[h]:"",ref:k,children:S})});g.displayName=d;function v(b){const _=i(e+"CollectionConsumer",b);return yt.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((R,j)=>E.indexOf(R.ref.current)-E.indexOf(j.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},v,r]}var OE=0;function y1(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??WO()),document.body.insertAdjacentElement("beforeend",e[1]??WO()),OE++,()=>{OE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),OE--}},[])}function WO(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var jE="focusScope.autoFocusOnMount",DE="focusScope.autoFocusOnUnmount",KO={bubbles:!1,cancelable:!0},wue="FocusScope",Fg=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,l]=T.useState(null),u=Ma(a),d=Ma(i),h=T.useRef(null),p=Cn(t,b=>l(b)),g=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(E){if(g.paused||!s)return;const C=E.target;s.contains(C)?h.current=C:$c(h.current,{select:!0})},_=function(E){if(g.paused||!s)return;const C=E.relatedTarget;C!==null&&(s.contains(C)||$c(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&$c(s)};document.addEventListener("focusin",b),document.addEventListener("focusout",_);const S=new MutationObserver(x);return s&&S.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",_),S.disconnect()}}},[r,s,g.paused]),T.useEffect(()=>{if(s){YO.add(g);const b=document.activeElement;if(!s.contains(b)){const x=new CustomEvent(jE,KO);s.addEventListener(jE,u),s.dispatchEvent(x),x.defaultPrevented||(_ue(kue(jF(s)),{select:!0}),document.activeElement===b&&$c(s))}return()=>{s.removeEventListener(jE,u),setTimeout(()=>{const x=new CustomEvent(DE,KO);s.addEventListener(DE,d),s.dispatchEvent(x),x.defaultPrevented||$c(b??document.body,{select:!0}),s.removeEventListener(DE,d),YO.remove(g)},0)}}},[s,u,d,g]);const v=T.useCallback(b=>{if(!n&&!r||g.paused)return;const _=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(_&&x){const S=b.currentTarget,[E,C]=xue(S);E&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&$c(E,{select:!0})):b.shiftKey&&x===E&&(b.preventDefault(),n&&$c(C,{select:!0})):x===S&&b.preventDefault()}},[n,r,g.paused]);return y.jsx(tn.div,{tabIndex:-1,...o,ref:p,onKeyDown:v})});Fg.displayName=wue;function _ue(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if($c(r,{select:t}),document.activeElement!==n)return}function xue(e){const t=jF(e),n=ZO(t,e),r=ZO(t.reverse(),e);return[n,r]}function jF(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ZO(e,t){for(const n of e)if(!Sue(n,{upTo:t}))return n}function Sue(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Eue(e){return e instanceof HTMLInputElement&&"select"in e}function $c(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Eue(e)&&t&&e.select()}}var YO=Cue();function Cue(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=XO(e,t),e.unshift(t)},remove(t){var n;e=XO(e,t),(n=e[0])==null||n.resume()}}}function XO(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function kue(e){return e.filter(t=>t.tagName!=="A")}function b1(e){const t=T.useRef({value:e,previous:e});return T.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Aue=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Gf=new WeakMap,Ob=new WeakMap,jb={},ME=0,DF=function(e){return e&&(e.host||DF(e.parentNode))},Tue=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=DF(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Nue=function(e,t,n,r){var a=Tue(t,Array.isArray(e)?e:[e]);jb[n]||(jb[n]=new WeakMap);var i=jb[n],o=[],s=new Set,l=new Set(a),u=function(h){!h||s.has(h)||(s.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(s.has(p))d(p);else try{var g=p.getAttribute(r),v=g!==null&&g!=="false",b=(Gf.get(p)||0)+1,_=(i.get(p)||0)+1;Gf.set(p,b),i.set(p,_),o.push(p),b===1&&v&&Ob.set(p,!0),_===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return d(t),s.clear(),ME++,function(){o.forEach(function(h){var p=Gf.get(h)-1,g=i.get(h)-1;Gf.set(h,p),i.set(h,g),p||(Ob.has(h)||h.removeAttribute(r),Ob.delete(h)),g||h.removeAttribute(n)}),ME--,ME||(Gf=new WeakMap,Gf=new WeakMap,Ob=new WeakMap,jb={})}},v1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Aue(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Nue(r,a,n,"aria-hidden")):function(){return null}},Ms=function(){return Ms=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ms.apply(this,arguments)};function MF(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Rue(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Xb="right-scroll-bar-position",Jb="width-before-scroll-bar",Iue="with-scroll-bars-hidden",Oue="--removed-body-scroll-bar-size";function PE(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jue(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Due=typeof window<"u"?T.useLayoutEffect:T.useEffect,JO=new WeakMap;function Mue(e,t){var n=jue(null,function(r){return e.forEach(function(a){return PE(a,r)})});return Due(function(){var r=JO.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||PE(s,null)}),i.forEach(function(s){a.has(s)||PE(s,o)})}JO.set(n,e)},[e]),n}function Pue(e){return e}function Fue(e,t){t===void 0&&(t=Pue);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return a}function Lue(e){e===void 0&&(e={});var t=Fue(null);return t.options=Ms({async:!0,ssr:!1},e),t}var PF=function(e){var t=e.sideCar,n=MF(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,Ms({},n))};PF.isSideCarExport=!0;function $ue(e,t){return e.useMedium(t),PF}var FF=Lue(),FE=function(){},w1=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:FE,onWheelCapture:FE,onTouchMoveCapture:FE}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,g=e.noIsolation,v=e.inert,b=e.allowPinchZoom,_=e.as,x=_===void 0?"div":_,S=e.gapMode,E=MF(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,k=Mue([n,t]),R=Ms(Ms({},E),a);return T.createElement(T.Fragment,null,d&&T.createElement(C,{sideCar:FF,removeScrollBar:u,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:S}),o?T.cloneElement(T.Children.only(s),Ms(Ms({},R),{ref:k})):T.createElement(x,Ms({},R,{className:l,ref:k}),s))});w1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};w1.classNames={fullWidth:Jb,zeroRight:Xb};var Bue=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zue(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Bue();return t&&e.setAttribute("nonce",t),e}function Uue(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Hue(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var que=function(){var e=0,t=null;return{add:function(n){e==0&&(t=zue())&&(Uue(t,n),Hue(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Vue=function(){var e=que();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},LF=function(){var e=Vue(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Gue={left:0,top:0,right:0,gap:0},LE=function(e){return parseInt(e||"",10)||0},Wue=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[LE(n),LE(r),LE(a)]},Kue=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Gue;var t=Wue(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Zue=LF(),uh="data-scroll-locked",Yue=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Iue,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(uh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xb,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Jb,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Xb," .").concat(Xb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Jb," .").concat(Jb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(uh,`] {
    `).concat(Oue,": ").concat(s,`px;
  }
`)},QO=function(){var e=parseInt(document.body.getAttribute(uh)||"0",10);return isFinite(e)?e:0},Xue=function(){T.useEffect(function(){return document.body.setAttribute(uh,(QO()+1).toString()),function(){var e=QO()-1;e<=0?document.body.removeAttribute(uh):document.body.setAttribute(uh,e.toString())}},[])},Jue=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Xue();var i=T.useMemo(function(){return Kue(a)},[a]);return T.createElement(Zue,{styles:Yue(i,!t,a,n?"":"!important")})},nC=!1;if(typeof window<"u")try{var Db=Object.defineProperty({},"passive",{get:function(){return nC=!0,!0}});window.addEventListener("test",Db,Db),window.removeEventListener("test",Db,Db)}catch{nC=!1}var Wf=nC?{passive:!1}:!1,Que=function(e){return e.tagName==="TEXTAREA"},$F=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Que(e)&&n[t]==="visible")},ede=function(e){return $F(e,"overflowY")},tde=function(e){return $F(e,"overflowX")},ej=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=BF(e,r);if(a){var i=zF(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},nde=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},rde=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},BF=function(e,t){return e==="v"?ede(t):tde(t)},zF=function(e,t){return e==="v"?nde(t):rde(t)},ade=function(e,t){return e==="h"&&t==="rtl"?-1:1},ide=function(e,t,n,r,a){var i=ade(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,l=t.contains(s),u=!1,d=o>0,h=0,p=0;do{var g=zF(e,s),v=g[0],b=g[1],_=g[2],x=b-_-i*v;(v||x)&&BF(e,s)&&(h+=x,p+=v),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(d&&Math.abs(h)<1||!d&&Math.abs(p)<1)&&(u=!0),u},Mb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tj=function(e){return[e.deltaX,e.deltaY]},nj=function(e){return e&&"current"in e?e.current:e},ode=function(e,t){return e[0]===t[0]&&e[1]===t[1]},sde=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lde=0,Kf=[];function cde(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),a=T.useState(lde++)[0],i=T.useState(LF)[0],o=T.useRef(e);T.useEffect(function(){o.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=Rue([e.lockRef.current],(e.shards||[]).map(nj),!0).filter(Boolean);return b.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=T.useCallback(function(b,_){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var x=Mb(b),S=n.current,E="deltaX"in b?b.deltaX:S[0]-x[0],C="deltaY"in b?b.deltaY:S[1]-x[1],k,R=b.target,j=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in b&&j==="h"&&R.type==="range")return!1;var O=ej(j,R);if(!O)return!0;if(O?k=j:(k=j==="v"?"h":"v",O=ej(j,R)),!O)return!1;if(!r.current&&"changedTouches"in b&&(E||C)&&(r.current=k),!k)return!0;var L=r.current||k;return ide(L,_,b,L==="h"?E:C)},[]),l=T.useCallback(function(b){var _=b;if(!(!Kf.length||Kf[Kf.length-1]!==i)){var x="deltaY"in _?tj(_):Mb(_),S=t.current.filter(function(k){return k.name===_.type&&(k.target===_.target||_.target===k.shadowParent)&&ode(k.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(nj).filter(Boolean).filter(function(k){return k.contains(_.target)}),C=E.length>0?s(_,E[0]):!o.current.noIsolation;C&&_.cancelable&&_.preventDefault()}}},[]),u=T.useCallback(function(b,_,x,S){var E={name:b,delta:_,target:x,should:S,shadowParent:ude(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),d=T.useCallback(function(b){n.current=Mb(b),r.current=void 0},[]),h=T.useCallback(function(b){u(b.type,tj(b),b.target,s(b,e.lockRef.current))},[]),p=T.useCallback(function(b){u(b.type,Mb(b),b.target,s(b,e.lockRef.current))},[]);T.useEffect(function(){return Kf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Wf),document.addEventListener("touchmove",l,Wf),document.addEventListener("touchstart",d,Wf),function(){Kf=Kf.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,Wf),document.removeEventListener("touchmove",l,Wf),document.removeEventListener("touchstart",d,Wf)}},[]);var g=e.removeScrollBar,v=e.inert;return T.createElement(T.Fragment,null,v?T.createElement(i,{styles:sde(a)}):null,g?T.createElement(Jue,{gapMode:e.gapMode}):null)}function ude(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const dde=$ue(FF,cde);var Lg=T.forwardRef(function(e,t){return T.createElement(w1,Ms({},e,{ref:t,sideCar:dde}))});Lg.classNames=w1.classNames;var fde=[" ","Enter","ArrowUp","ArrowDown"],hde=[" ","Enter"],Sd="Select",[_1,x1,pde]=g1(Sd),[sp,j_e]=_i(Sd,[pde,yu]),S1=yu(),[mde,ku]=sp(Sd),[gde,yde]=sp(Sd),UF=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:p,required:g,form:v}=e,b=S1(t),[_,x]=T.useState(null),[S,E]=T.useState(null),[C,k]=T.useState(!1),R=op(u),[j,O]=Qo({prop:r,defaultProp:a??!1,onChange:i,caller:Sd}),[L,z]=Qo({prop:o,defaultProp:s,onChange:l,caller:Sd}),Y=T.useRef(null),F=_?v||!!_.closest("form"):!0,[K,q]=T.useState(new Set),fe=Array.from(K).map(te=>te.props.value).join(";");return y.jsx(jw,{...b,children:y.jsxs(mde,{required:g,scope:t,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:Wa(),value:L,onValueChange:z,open:j,onOpenChange:O,dir:R,triggerPointerDownPosRef:Y,disabled:p,children:[y.jsx(_1.Provider,{scope:t,children:y.jsx(gde,{scope:e.__scopeSelect,onNativeOptionAdd:T.useCallback(te=>{q(re=>new Set(re).add(te))},[]),onNativeOptionRemove:T.useCallback(te=>{q(re=>{const X=new Set(re);return X.delete(te),X})},[]),children:n})}),F?y.jsxs(uL,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:L,onChange:te=>z(te.target.value),disabled:p,form:v,children:[L===void 0?y.jsx("option",{value:""}):null,Array.from(K)]},fe):null]})})};UF.displayName=Sd;var HF="SelectTrigger",qF=T.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=S1(n),o=ku(HF,n),s=o.disabled||r,l=Cn(t,o.onTriggerChange),u=x1(n),d=T.useRef("touch"),[h,p,g]=fL(b=>{const _=u().filter(E=>!E.disabled),x=_.find(E=>E.value===o.value),S=hL(_,b,x);S!==void 0&&o.onValueChange(S.value)}),v=b=>{s||(o.onOpenChange(!0),g()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return y.jsx(rg,{asChild:!0,...i,children:y.jsx(tn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":dL(o.value)?"":void 0,...a,ref:l,onClick:qt(a.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&v(b)}),onPointerDown:qt(a.onPointerDown,b=>{d.current=b.pointerType;const _=b.target;_.hasPointerCapture(b.pointerId)&&_.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:qt(a.onKeyDown,b=>{const _=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&p(b.key),!(_&&b.key===" ")&&fde.includes(b.key)&&(v(),b.preventDefault())})})})});qF.displayName=HF;var VF="SelectValue",GF=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,l=ku(VF,n),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,h=Cn(t,l.onValueNodeChange);return $a(()=>{u(d)},[u,d]),y.jsx(tn.span,{...s,ref:h,style:{pointerEvents:"none"},children:dL(l.value)?y.jsx(y.Fragment,{children:o}):i})});GF.displayName=VF;var bde="SelectIcon",WF=T.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return y.jsx(tn.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});WF.displayName=bde;var vde="SelectPortal",KF=e=>y.jsx(Vh,{asChild:!0,...e});KF.displayName=vde;var Ed="SelectContent",ZF=T.forwardRef((e,t)=>{const n=ku(Ed,e.__scopeSelect),[r,a]=T.useState();if($a(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Ps.createPortal(y.jsx(YF,{scope:e.__scopeSelect,children:y.jsx(_1.Slot,{scope:e.__scopeSelect,children:y.jsx("div",{children:e.children})})}),i):null}return y.jsx(XF,{...e,ref:t})});ZF.displayName=Ed;var $o=10,[YF,Au]=sp(Ed),wde="SelectContentImpl",_de=Xc("SelectContent.RemoveScroll"),XF=T.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:_,...x}=e,S=ku(Ed,n),[E,C]=T.useState(null),[k,R]=T.useState(null),j=Cn(t,Ne=>C(Ne)),[O,L]=T.useState(null),[z,Y]=T.useState(null),F=x1(n),[K,q]=T.useState(!1),fe=T.useRef(!1);T.useEffect(()=>{if(E)return v1(E)},[E]),y1();const te=T.useCallback(Ne=>{const[Re,...Ce]=F().map(Le=>Le.ref.current),[Fe]=Ce.slice(-1),Qe=document.activeElement;for(const Le of Ne)if(Le===Qe||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Re&&k&&(k.scrollTop=0),Le===Fe&&k&&(k.scrollTop=k.scrollHeight),Le==null||Le.focus(),document.activeElement!==Qe))return},[F,k]),re=T.useCallback(()=>te([O,E]),[te,O,E]);T.useEffect(()=>{K&&re()},[K,re]);const{onOpenChange:X,triggerPointerDownPosRef:ae}=S;T.useEffect(()=>{if(E){let Ne={x:0,y:0};const Re=Fe=>{var Qe,Le;Ne={x:Math.abs(Math.round(Fe.pageX)-(((Qe=ae.current)==null?void 0:Qe.x)??0)),y:Math.abs(Math.round(Fe.pageY)-(((Le=ae.current)==null?void 0:Le.y)??0))}},Ce=Fe=>{Ne.x<=10&&Ne.y<=10?Fe.preventDefault():E.contains(Fe.target)||X(!1),document.removeEventListener("pointermove",Re),ae.current=null};return ae.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",Ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",Ce,{capture:!0})}}},[E,X,ae]),T.useEffect(()=>{const Ne=()=>X(!1);return window.addEventListener("blur",Ne),window.addEventListener("resize",Ne),()=>{window.removeEventListener("blur",Ne),window.removeEventListener("resize",Ne)}},[X]);const[U,ee]=fL(Ne=>{const Re=F().filter(Qe=>!Qe.disabled),Ce=Re.find(Qe=>Qe.ref.current===document.activeElement),Fe=hL(Re,Ne,Ce);Fe&&setTimeout(()=>Fe.ref.current.focus())}),J=T.useCallback((Ne,Re,Ce)=>{const Fe=!fe.current&&!Ce;(S.value!==void 0&&S.value===Re||Fe)&&(L(Ne),Fe&&(fe.current=!0))},[S.value]),ue=T.useCallback(()=>E==null?void 0:E.focus(),[E]),be=T.useCallback((Ne,Re,Ce)=>{const Fe=!fe.current&&!Ce;(S.value!==void 0&&S.value===Re||Fe)&&Y(Ne)},[S.value]),_e=r==="popper"?rC:JF,Pe=_e===rC?{side:s,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:_}:{};return y.jsx(YF,{scope:n,content:E,viewport:k,onViewportChange:R,itemRefCallback:J,selectedItem:O,onItemLeave:ue,itemTextRefCallback:be,focusSelectedItem:re,selectedItemText:z,position:r,isPositioned:K,searchRef:U,children:y.jsx(Lg,{as:_de,allowPinchZoom:!0,children:y.jsx(Fg,{asChild:!0,trapped:S.open,onMountAutoFocus:Ne=>{Ne.preventDefault()},onUnmountAutoFocus:qt(a,Ne=>{var Re;(Re=S.trigger)==null||Re.focus({preventScroll:!0}),Ne.preventDefault()}),children:y.jsx(Uh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Ne=>Ne.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(_e,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Ne=>Ne.preventDefault(),...x,...Pe,onPlaced:()=>q(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:qt(x.onKeyDown,Ne=>{const Re=Ne.ctrlKey||Ne.altKey||Ne.metaKey;if(Ne.key==="Tab"&&Ne.preventDefault(),!Re&&Ne.key.length===1&&ee(Ne.key),["ArrowUp","ArrowDown","Home","End"].includes(Ne.key)){let Fe=F().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);if(["ArrowUp","End"].includes(Ne.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ne.key)){const Qe=Ne.target,Le=Fe.indexOf(Qe);Fe=Fe.slice(Le+1)}setTimeout(()=>te(Fe)),Ne.preventDefault()}})})})})})})});XF.displayName=wde;var xde="SelectItemAlignedPosition",JF=T.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=ku(Ed,n),o=Au(Ed,n),[s,l]=T.useState(null),[u,d]=T.useState(null),h=Cn(t,j=>d(j)),p=x1(n),g=T.useRef(!1),v=T.useRef(!0),{viewport:b,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,E=T.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&u&&b&&_&&x){const j=i.trigger.getBoundingClientRect(),O=u.getBoundingClientRect(),L=i.valueNode.getBoundingClientRect(),z=x.getBoundingClientRect();if(i.dir!=="rtl"){const Qe=z.left-O.left,Le=L.left-Qe,Ie=j.left-Le,V=j.width+Ie,me=Math.max(V,O.width),Ae=window.innerWidth-$o,se=O0(Le,[$o,Math.max($o,Ae-me)]);s.style.minWidth=V+"px",s.style.left=se+"px"}else{const Qe=O.right-z.right,Le=window.innerWidth-L.right-Qe,Ie=window.innerWidth-j.right-Le,V=j.width+Ie,me=Math.max(V,O.width),Ae=window.innerWidth-$o,se=O0(Le,[$o,Math.max($o,Ae-me)]);s.style.minWidth=V+"px",s.style.right=se+"px"}const Y=p(),F=window.innerHeight-$o*2,K=b.scrollHeight,q=window.getComputedStyle(u),fe=parseInt(q.borderTopWidth,10),te=parseInt(q.paddingTop,10),re=parseInt(q.borderBottomWidth,10),X=parseInt(q.paddingBottom,10),ae=fe+te+K+X+re,U=Math.min(_.offsetHeight*5,ae),ee=window.getComputedStyle(b),J=parseInt(ee.paddingTop,10),ue=parseInt(ee.paddingBottom,10),be=j.top+j.height/2-$o,_e=F-be,Pe=_.offsetHeight/2,Ne=_.offsetTop+Pe,Re=fe+te+Ne,Ce=ae-Re;if(Re<=be){const Qe=Y.length>0&&_===Y[Y.length-1].ref.current;s.style.bottom="0px";const Le=u.clientHeight-b.offsetTop-b.offsetHeight,Ie=Math.max(_e,Pe+(Qe?ue:0)+Le+re),V=Re+Ie;s.style.height=V+"px"}else{const Qe=Y.length>0&&_===Y[0].ref.current;s.style.top="0px";const Ie=Math.max(be,fe+b.offsetTop+(Qe?J:0)+Pe)+Ce;s.style.height=Ie+"px",b.scrollTop=Re-be+b.offsetTop}s.style.margin=`${$o}px 0`,s.style.minHeight=U+"px",s.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,s,u,b,_,x,i.dir,r]);$a(()=>E(),[E]);const[C,k]=T.useState();$a(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const R=T.useCallback(j=>{j&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return y.jsx(Ede,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:y.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:y.jsx(tn.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});JF.displayName=xde;var Sde="SelectPopperPosition",rC=T.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=$o,...i}=e,o=S1(n);return y.jsx(Dw,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});rC.displayName=Sde;var[Ede,mA]=sp(Ed,{}),aC="SelectViewport",QF=T.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Au(aC,n),o=mA(aC,n),s=Cn(t,i.onViewportChange),l=T.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(_1.Slot,{scope:n,children:y.jsx(tn.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:qt(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const g=Math.abs(l.current-d.scrollTop);if(g>0){const v=window.innerHeight-$o*2,b=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),x=Math.max(b,_);if(x<v){const S=x+g,E=Math.min(v,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});QF.displayName=aC;var eL="SelectGroup",[Cde,kde]=sp(eL),Ade=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Wa();return y.jsx(Cde,{scope:n,id:a,children:y.jsx(tn.div,{role:"group","aria-labelledby":a,...r,ref:t})})});Ade.displayName=eL;var tL="SelectLabel",Tde=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=kde(tL,n);return y.jsx(tn.div,{id:a.id,...r,ref:t})});Tde.displayName=tL;var nw="SelectItem",[Nde,nL]=sp(nw),rL=T.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=ku(nw,n),l=Au(nw,n),u=s.value===r,[d,h]=T.useState(i??""),[p,g]=T.useState(!1),v=Cn(t,S=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,S,r,a)}),b=Wa(),_=T.useRef("touch"),x=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(Nde,{scope:n,value:r,disabled:a,textId:b,isSelected:u,onItemTextChange:T.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(_1.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:y.jsx(tn.div,{role:"option","aria-labelledby":b,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:qt(o.onFocus,()=>g(!0)),onBlur:qt(o.onBlur,()=>g(!1)),onClick:qt(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:qt(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:qt(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:qt(o.onPointerMove,S=>{var E;_.current=S.pointerType,a?(E=l.onItemLeave)==null||E.call(l):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qt(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:qt(o.onKeyDown,S=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(hde.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});rL.displayName=nw;var Dm="SelectItemText",aL=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=ku(Dm,n),s=Au(Dm,n),l=nL(Dm,n),u=yde(Dm,n),[d,h]=T.useState(null),p=Cn(t,x=>h(x),l.onItemTextChange,x=>{var S;return(S=s.itemTextRefCallback)==null?void 0:S.call(s,x,l.value,l.disabled)}),g=d==null?void 0:d.textContent,v=T.useMemo(()=>y.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:_}=u;return $a(()=>(b(v),()=>_(v)),[b,_,v]),y.jsxs(y.Fragment,{children:[y.jsx(tn.span,{id:l.textId,...i,ref:p}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ps.createPortal(i.children,o.valueNode):null]})});aL.displayName=Dm;var iL="SelectItemIndicator",oL=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return nL(iL,n).isSelected?y.jsx(tn.span,{"aria-hidden":!0,...r,ref:t}):null});oL.displayName=iL;var iC="SelectScrollUpButton",sL=T.forwardRef((e,t)=>{const n=Au(iC,e.__scopeSelect),r=mA(iC,e.__scopeSelect),[a,i]=T.useState(!1),o=Cn(t,r.onScrollButtonChange);return $a(()=>{if(n.viewport&&n.isPositioned){let s=function(){const u=l.scrollTop>0;i(u)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(cL,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop-l.offsetHeight)}}):null});sL.displayName=iC;var oC="SelectScrollDownButton",lL=T.forwardRef((e,t)=>{const n=Au(oC,e.__scopeSelect),r=mA(oC,e.__scopeSelect),[a,i]=T.useState(!1),o=Cn(t,r.onScrollButtonChange);return $a(()=>{if(n.viewport&&n.isPositioned){let s=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(cL,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop+l.offsetHeight)}}):null});lL.displayName=oC;var cL=T.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Au("SelectScrollButton",n),o=T.useRef(null),s=x1(n),l=T.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),$a(()=>{var d;const u=s().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[s]),y.jsx(tn.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:qt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:qt(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:qt(a.onPointerLeave,()=>{l()})})}),Rde="SelectSeparator",Ide=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return y.jsx(tn.div,{"aria-hidden":!0,...r,ref:t})});Ide.displayName=Rde;var sC="SelectArrow",Ode=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=S1(n),i=ku(sC,n),o=Au(sC,n);return i.open&&o.position==="popper"?y.jsx(Mw,{...a,...r,ref:t}):null});Ode.displayName=sC;var jde="SelectBubbleInput",uL=T.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=T.useRef(null),i=Cn(r,a),o=b1(t);return T.useEffect(()=>{const s=a.current;if(!s)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(tn.select,{...n,style:{...v8,...n.style},ref:i,defaultValue:t})});uL.displayName=jde;function dL(e){return e===""||e===void 0}function fL(e){const t=Ma(e),n=T.useRef(""),r=T.useRef(0),a=T.useCallback(o=>{const s=n.current+o;t(s),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(s)},[t]),i=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function hL(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Dde(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function Dde(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Mde=UF,Pde=qF,Fde=GF,Lde=WF,$de=KF,Bde=ZF,zde=QF,Ude=rL,Hde=aL,qde=oL,Vde=sL,Gde=lL;function qd({...e}){return y.jsx(Mde,{"data-slot":"select",...e})}function Vd({...e}){return y.jsx(Fde,{"data-slot":"select-value",...e})}function Gd({className:e,size:t="default",children:n,...r}){return y.jsxs(Pde,{"data-slot":"select-trigger","data-size":t,className:Rt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,y.jsx(Lde,{asChild:!0,children:y.jsx(Zs,{className:"size-4 opacity-50"})})]})}function Wd({className:e,children:t,position:n="popper",...r}){return y.jsx($de,{children:y.jsxs(Bde,{"data-slot":"select-content",className:Rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[y.jsx(Wde,{}),y.jsx(zde,{className:Rt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),y.jsx(Kde,{})]})})}function Oi({className:e,children:t,...n}){return y.jsxs(Ude,{"data-slot":"select-item",className:Rt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[y.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:y.jsx(qde,{children:y.jsx(Ks,{className:"size-4"})})}),y.jsx(Hde,{children:t})]})}function Wde({className:e,...t}){return y.jsx(Vde,{"data-slot":"select-scroll-up-button",className:Rt("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(Ad,{className:"size-4"})})}function Kde({className:e,...t}){return y.jsx(Gde,{"data-slot":"select-scroll-down-button",className:Rt("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(Zs,{className:"size-4"})})}var Zde="Label",pL=T.forwardRef((e,t)=>y.jsx(tn.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));pL.displayName=Zde;var Yde=pL;function on({className:e,...t}){return y.jsx(Yde,{"data-slot":"label",className:Rt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const mL=({initialProviderType:e=null,initialName:t="",initialValue:n="",onSave:r,onCancel:a,isSaving:i,className:o})=>{const[s,l]=T.useState(t),[u,d]=T.useState(n),[h,p]=T.useState(e),g=T.useRef(null);T.useEffect(()=>{l(t),d(n),p(e)},[t,n,e]);const v=T.useCallback(_=>{var C,k;const x=_;p(x);const S=(C=hd.find(R=>R.value===x))==null?void 0:C.label,E=(k=hd.find(R=>R.value===h))==null?void 0:k.label;S&&(!s.trim()||s===`${E}`)&&l(`${S}`),requestAnimationFrame(()=>{var R;(R=g.current)==null||R.focus()})},[s,h]),b=T.useCallback(async()=>{if(!s.trim()||!u.trim()||!h){lt.error("Key Name, Provider Type, and API Key Value are required.");return}await r(s.trim(),h,u.trim())},[s,u,h,r]);return y.jsxs("div",{className:Rt("space-y-4",o),children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"api-key-provider",children:"Provider Type"}),y.jsxs(qd,{value:h??"",onValueChange:v,disabled:i,children:[y.jsx(Gd,{id:"api-key-provider",children:y.jsx(Vd,{placeholder:"Select Provider Type"})}),y.jsx(Wd,{children:hd.map(_=>y.jsx(Oi,{value:_.value,children:_.label},_.value))})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"api-key-name",children:"Key Name"}),y.jsx(Jn,{id:"api-key-name",value:s,onChange:_=>l(_.target.value),placeholder:"e.g., My OpenAI Key",required:!0,disabled:i})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"api-key-value",children:"API Key Value"}),y.jsx(Jn,{ref:g,id:"api-key-value",type:"password",value:u,onChange:_=>d(_.target.value),placeholder:"Enter your API key",required:!0,disabled:i,autoComplete:"new-password"})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Bt,{variant:"ghost",size:"sm",onClick:a,disabled:i,type:"button",children:[y.jsx(Zl,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Bt,{variant:"secondary",size:"sm",onClick:b,disabled:i||!s.trim()||!u.trim()||!h,type:"button",children:[i&&y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(X0,{className:"h-4 w-4 mr-1"})," ",i?"Saving...":"Save API Key"]})]})]})};var E1="Switch",[Xde,D_e]=_i(E1),[Jde,Qde]=Xde(E1),gL=T.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:l="on",onCheckedChange:u,form:d,...h}=e,[p,g]=T.useState(null),v=Cn(t,E=>g(E)),b=T.useRef(!1),_=p?d||!!p.closest("form"):!0,[x,S]=Qo({prop:a,defaultProp:i??!1,onChange:u,caller:E1});return y.jsxs(Jde,{scope:n,checked:x,disabled:s,children:[y.jsx(tn.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":wL(x),"data-disabled":s?"":void 0,disabled:s,value:l,...h,ref:v,onClick:qt(e.onClick,E=>{S(C=>!C),_&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),_&&y.jsx(vL,{control:p,bubbles:!b.current,name:r,value:l,checked:x,required:o,disabled:s,form:d,style:{transform:"translateX(-100%)"}})]})});gL.displayName=E1;var yL="SwitchThumb",bL=T.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Qde(yL,n);return y.jsx(tn.span,{"data-state":wL(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});bL.displayName=yL;var efe="SwitchBubbleInput",vL=T.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=T.useRef(null),s=Cn(o,i),l=b1(n),u=Ow(t);return T.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&g){const v=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(v)}},[l,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});vL.displayName=efe;function wL(e){return e?"checked":"unchecked"}var tfe=gL,nfe=bL;function zs({className:e,...t}){return y.jsx(tfe,{"data-slot":"switch",className:Rt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(nfe,{"data-slot":"switch-thumb",className:Rt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const _L=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var u;const o=d=>{r(d==="none"?null:d)},s=(u=a.find(d=>d.id===n))==null?void 0:u.name,l=n?s||`Key ID: ${n.substring(0,6)}...`:"None";return y.jsxs(qd,{value:n??"none",onValueChange:o,disabled:i||a.length===0,children:[y.jsx(Gd,{className:Rt("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:y.jsx(Vd,{asChild:!0,children:y.jsxs("div",{className:"flex items-center overflow-hidden",children:[y.jsx(OH,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),y.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&y.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?y.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),y.jsxs(Wd,{className:"bg-popover border-border text-popover-foreground",children:[y.jsx(Oi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(d=>y.jsx(Oi,{value:d.id,children:d.name||`Key ID: ${d.id.substring(0,6)}...`},d.id))]})]})},xL=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:a="",initialApiKeyId:i=null})=>{var _;const[o,s]=T.useState(!1),[l,u]=T.useState({name:a,type:r,isEnabled:!0,apiKeyId:i,baseURL:null,enabledModels:null,autoFetchModels:!1,fetchedModels:null,modelsLastFetchedAt:null});T.useEffect(()=>{u(x=>({...x,name:a||x.name||"",type:r||x.type||null,apiKeyId:i||x.apiKeyId||null,autoFetchModels:r?Qf(r):x.autoFetchModels}))},[a,r,i]);const d=T.useCallback((x,S)=>{u(E=>{var R,j;const C={...E,[x]:S},k=E.name||"";if(x==="type"){const O=S,L=(R=hd.find(Y=>Y.value===E.type))==null?void 0:R.label;C.apiKeyId=null,C.baseURL=null,C.autoFetchModels=O?Qf(O):!1,C.enabledModels=null;const z=(j=hd.find(Y=>Y.value===O))==null?void 0:j.label;if(z&&(!k.trim()||k===L)&&(C.name=z),O&&Av(O)){const Y=(e||[]).filter(F=>F.providerId===O);Y.length>0&&(C.apiKeyId=Y[0].id)}}return(x==="isEnabled"||x==="autoFetchModels")&&(C[x]=!!S),C})},[e]),h=T.useCallback(async()=>{var x,S;if(!((x=l.name)!=null&&x.trim())||!l.type){lt.error("Provider Name and Type are required.");return}s(!0);try{const E=l.type,C=l.autoFetchModels??Qf(E),k={name:l.name.trim(),type:E,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((S=l.baseURL)==null?void 0:S.trim())||null,enabledModels:null,autoFetchModels:C,fetchedModels:null,modelsLastFetchedAt:null};await t(k),n()}catch(E){console.error("Failed to add provider (from form component):",E)}finally{s(!1)}},[l,t,n]),p=Av(l.type??null),g=YC(l.type??null),v=Qf(l.type??null),b=(e||[]).filter(x=>!l.type||x.providerId===l.type);return y.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"new-provider-type",children:"Provider Type"}),y.jsxs(qd,{value:l.type??"",onValueChange:x=>d("type",x),disabled:o,children:[y.jsx(Gd,{id:"new-provider-type",children:y.jsx(Vd,{placeholder:"Select Type"})}),y.jsx(Wd,{children:hd.map(x=>y.jsx(Oi,{value:x.value,children:x.label},x.value))})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"new-provider-name",children:"Provider Name"}),y.jsx(Jn,{id:"new-provider-name",value:l.name||"",onChange:x=>d("name",x.target.value),placeholder:"e.g., My Ollama",disabled:o,"aria-label":"Provider Name"})]}),p&&y.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[y.jsx(on,{children:"API Key"}),y.jsx(_L,{label:"API Key",selectedKeyId:l.apiKeyId??null,onKeySelected:x=>d("apiKeyId",x),apiKeys:b,disabled:o||!l.type})]}),g&&y.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[y.jsx(on,{htmlFor:"new-provider-baseurl",children:"Base URL"}),y.jsx(Jn,{id:"new-provider-baseurl",value:l.baseURL||"",onChange:x=>d("baseURL",x.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",disabled:o,"aria-label":"Base URL"})]})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(zs,{id:"new-enabled",checked:l.isEnabled??!0,onCheckedChange:x=>d("isEnabled",x),disabled:o,"aria-labelledby":"new-enabled-label"}),y.jsx(on,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(zs,{id:"new-autofetch",checked:l.autoFetchModels??!1,onCheckedChange:x=>d("autoFetchModels",x),disabled:!v||o,"aria-labelledby":"new-autofetch-label"}),y.jsxs(on,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:Rt("text-sm",v?"":"text-muted-foreground"),children:["Auto-fetch models ",v?"":"(Not Supported)"]})]})]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Bt,{variant:"ghost",size:"sm",onClick:n,disabled:o,type:"button",children:[y.jsx(Zl,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Bt,{variant:"secondary",size:"sm",onClick:h,disabled:o||!((_=l.name)!=null&&_.trim())||!l.type,type:"button",children:[o&&y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(X0,{className:"h-4 w-4 mr-1"})," ",o?"Adding...":"Add Provider"]})]})]})};var C1="Collapsible",[rfe,M_e]=_i(C1),[afe,gA]=rfe(C1),SL=T.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:o,...s}=e,[l,u]=Qo({prop:r,defaultProp:a??!1,onChange:o,caller:C1});return y.jsx(afe,{scope:n,disabled:i,contentId:Wa(),open:l,onOpenToggle:T.useCallback(()=>u(d=>!d),[u]),children:y.jsx(tn.div,{"data-state":bA(l),"data-disabled":i?"":void 0,...s,ref:t})})});SL.displayName=C1;var EL="CollapsibleTrigger",CL=T.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=gA(EL,n);return y.jsx(tn.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":bA(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:qt(e.onClick,a.onOpenToggle)})});CL.displayName=EL;var yA="CollapsibleContent",kL=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=gA(yA,e.__scopeCollapsible);return y.jsx(Ca,{present:n||a.open,children:({present:i})=>y.jsx(ife,{...r,ref:t,present:i})})});kL.displayName=yA;var ife=T.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=e,o=gA(yA,n),[s,l]=T.useState(r),u=T.useRef(null),d=Cn(t,u),h=T.useRef(0),p=h.current,g=T.useRef(0),v=g.current,b=o.open||s,_=T.useRef(b),x=T.useRef(void 0);return T.useEffect(()=>{const S=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(S)},[]),$a(()=>{const S=u.current;if(S){x.current=x.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const E=S.getBoundingClientRect();h.current=E.height,g.current=E.width,_.current||(S.style.transitionDuration=x.current.transitionDuration,S.style.animationName=x.current.animationName),l(r)}},[o.open,r]),y.jsx(tn.div,{"data-state":bA(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!b,...i,ref:d,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:b&&a})});function bA(e){return e?"open":"closed"}var ofe=SL;function sfe({...e}){return y.jsx(ofe,{"data-slot":"collapsible",...e})}function lfe({...e}){return y.jsx(CL,{"data-slot":"collapsible-trigger",...e})}function cfe({...e}){return y.jsx(kL,{"data-slot":"collapsible-content",...e})}const ufe=({stepNumber:e,title:t,description:n,isComplete:r,isActive:a,children:i,contentClassName:o,openOnComplete:s})=>{const[l,u]=T.useState(a&&!r);T.useEffect(()=>{a&&(!r||s)&&u(!0)},[a,r,s]);const d=r?OC:p6,h=r?"text-green-500":a?"text-primary":"text-muted-foreground";return y.jsxs(sfe,{open:l,onOpenChange:u,className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between space-x-4 px-1",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx(d,{className:Rt("h-5 w-5 flex-shrink-0",h)}),y.jsxs("h4",{className:Rt("text-sm font-semibold",r?"text-muted-foreground line-through":"text-primary"),children:["Step ",e,": ",t]})]}),y.jsx(lfe,{asChild:!0,children:y.jsxs(Bt,{variant:"ghost",size:"sm",className:"w-9 p-0",children:[l?y.jsx(Zs,{className:"h-4 w-4"}):y.jsx(h6,{className:"h-4 w-4"}),y.jsxs("span",{className:"sr-only",children:["Toggle ",t]})]})})]}),y.jsx(cfe,{className:"space-y-2",children:y.jsxs("div",{className:Rt("rounded-md border px-4 py-3 font-mono text-sm shadow-sm bg-card ml-8",o),children:[y.jsx("p",{className:"text-sm mb-3 text-card-foreground",children:n}),i]})})]})},vA=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:o="h-48",onModelClick:s})=>{const[l,u]=T.useState(""),d=T.useMemo(()=>{if(!l)return t;const h=l.toLowerCase();return t.filter(p=>p.name.toLowerCase().includes(h)||p.id.toLowerCase().includes(h))},[t,l]);return a?y.jsxs("div",{className:`space-y-2 ${o}`,children:[y.jsx(Or,{className:"h-8 w-full"}),y.jsx(Or,{className:"h-8 w-full"}),y.jsx(Or,{className:"h-8 w-full"})]}):t.length===0?y.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):y.jsxs("div",{className:"space-y-2",children:[y.jsx(Jn,{value:l,onChange:h=>u(h.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),y.jsx(Hd,{className:`${o} w-full rounded-md border border-border p-3 bg-background/50`,children:y.jsx("div",{className:"space-y-2",children:d.map(h=>y.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[y.jsx(on,{htmlFor:`enable-model-${e}-${h.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:h.name||h.id,onClick:s?()=>s(h.id):void 0,children:h.name||h.id}),y.jsx("div",{className:"flex items-center flex-shrink-0 gap-1",children:y.jsx(zs,{id:`enable-model-${e}-${h.id}`,checked:n.has(h.id),onCheckedChange:p=>r(h.id,p),disabled:i,"aria-label":`Enable model ${h.name||h.id}`,onClick:p=>p.stopPropagation()})})]},h.id))})})]})},dfe=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:a,getAllAvailableModelDefsForProvider:i,isLoading:o,enableApiKeyManagement:s}=Pn(hn(X=>({apiKeys:X.dbApiKeys,addApiKey:X.addApiKey,providers:X.dbProviderConfigs,addProviderConfig:X.addProviderConfig,updateProviderConfig:X.updateProviderConfig,getAllAvailableModelDefsForProvider:X.getAllAvailableModelDefsForProvider,isLoading:X.isLoading,enableApiKeyManagement:X.enableApiKeyManagement}))),{toggleChatControlPanel:l,setInitialSettingsTabs:u}=ha(hn(X=>({toggleChatControlPanel:X.toggleChatControlPanel,setInitialSettingsTabs:X.setInitialSettingsTabs}))),{addConversation:d,selectItem:h}=mn(hn(X=>({addConversation:X.addConversation,selectItem:X.selectItem}))),[p,g]=T.useState(!1),[v,b]=T.useState(!1),[_,x]=T.useState(!1),S=ha(X=>X.setFocusInputFlag),[E,C]=T.useState(!1),k=T.useMemo(()=>!s||e.length>0,[s,e]),R=T.useMemo(()=>n.length>0,[n]),j=T.useMemo(()=>n.some(X=>X.isEnabled&&X.enabledModels&&X.enabledModels.length>0),[n]),O=T.useMemo(()=>n.length>0?n[0]:null,[n]),L=T.useMemo(()=>O?i(O.id).map(X=>({id:X.id,name:X.name})):[],[O,i]),z=T.useMemo(()=>new Set((O==null?void 0:O.enabledModels)??[]),[O]),Y=T.useCallback(async(X,ae,U)=>{g(!0);try{await t(X,ae,U)}finally{g(!1)}},[t]),F=T.useCallback(async X=>{b(!0);try{return await r(X)}finally{b(!1)}},[r]),K=T.useCallback(async(X,ae)=>{if(!O)return;C(!0);const U=new Set(O.enabledModels??[]);ae?U.add(X):U.delete(X);const ee=Array.from(U);try{await a(O.id,{enabledModels:ee})}catch(J){lt.error("Failed to update model status."),console.error("Failed to save model toggle:",J)}finally{C(!1)}},[O,a]),q=T.useCallback(async()=>{x(!0);try{const X=await d({title:"New Chat"});await h(X,"conversation")}catch(X){lt.error("Failed to start your first chat."),console.error("Failed to start first chat:",X),x(!1),setTimeout(()=>S(!0),0)}},[d,h,S]),fe=(X,ae)=>{u(X,ae),l("settingsModal",!0)},te=[...s?[{id:"api-key",title:"Add API Key",description:y.jsxs("div",{children:[y.jsxs("p",{children:["To use providers like"," ",y.jsx("a",{href:"https://addepto.com/blog/what-is-an-openai-api-and-how-to-use-it/",target:"_blank",children:"OpenAI"}),","," ",y.jsx("a",{href:"https://support.gemini.com/hc/en-us/articles/360031080191-How-do-I-create-an-API-key",target:"_blank",children:"Google"}),","," ",y.jsx("a",{href:"https://support.gemini.com/hc/en-us/articles/360031080191-How-do-I-create-an-API-key",target:"_blank",children:"Anthotropic (Claude)"}),", or"," ",y.jsx("a",{href:"https://pulsarchat.com/docs/2-tutorial-on-how-to-get-an-openrouter-api-key",target:"_blank",children:"OpenRouter"})," ","or any OpenAi API compatible provider , add an API key. Keys are stored in your browser."]}),y.jsxs("p",{className:"py-2",children:['If you want trully local AI, "no internet required", you can setup'," ",y.jsx("a",{href:"https://www.ollama.com/",target:"_blank",children:"Ollama"})," ","or,"," ",y.jsx("a",{href:"https://lmstudio.ai/",target:"_blank",children:"LMStudio"})," ","(or any other local LLM solution with an OpenAI compatible API)"]})]}),isComplete:k,content:y.jsx(mL,{onSave:Y,onCancel:()=>{},isSaving:p,className:"border-none shadow-none p-0"})}]:[],{id:"add-provider",title:"Add AI Provider",description:"Connect to an AI provider like OpenAI, Ollama, or others to start chatting.",isComplete:R,content:y.jsx(xL,{apiKeys:e,onAddProvider:F,onCancel:()=>{}})},{id:"enable-models",title:"Enable Models",description:`Enable models for the provider you just added (${(O==null?void 0:O.name)||""}). You can enable more later in Settings.`,isComplete:j,content:O?y.jsx(vA,{providerId:O.id,allAvailableModels:L,enabledModelIds:z,onToggleModel:K,isLoading:o||E,listHeightClass:"h-48"}):y.jsxs("p",{className:"text-sm text-muted-foreground italic",children:["Add a provider in Step ",s?"2":"1"," first."]})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:y.jsxs(Bt,{onClick:q,disabled:_,size:"sm",children:[y.jsx(b6,{className:"mr-2 h-4 w-4"}),_?"Starting...":"Start First Chat"]})}],re=te.findIndex(X=>!X.isComplete);return o?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-2xl mx-auto w-full",children:[y.jsx(Or,{className:"h-10 w-3/4"}),y.jsx(Or,{className:"h-20 w-full"}),y.jsx(Or,{className:"h-10 w-3/4"}),y.jsx(Or,{className:"h-20 w-full"})]}):y.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4",children:y.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx(v6,{className:"h-12 w-12 text-primary mx-auto mb-3"}),y.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"LiteChat Setup"}),y.jsx("p",{className:"text-muted-foreground",children:"Follow these steps to configure LiteChat."})]}),y.jsx("div",{className:"space-y-4",children:te.map((X,ae)=>{const U=ae===re;return y.jsx(ufe,{stepNumber:ae+1,title:X.title,description:X.description,isComplete:X.id!=="start-chat"&&X.isComplete,isActive:U,contentClassName:X.id==="add-provider"||X.id==="api-key"?"p-0 border-none shadow-none bg-transparent":X.id==="enable-models"?"p-0":"",children:X.content},X.id)})}),!o&&!s&&!R&&re===-1&&y.jsxs("div",{className:"text-center text-muted-foreground mt-6",children:[y.jsx(pd,{className:"h-8 w-8 text-destructive mx-auto mb-2"}),y.jsx("p",{className:"text-sm",children:"Configuration issue detected. Please review provider settings."}),y.jsx(Bt,{variant:"outline",size:"sm",onClick:()=>fe("providers"),className:"mt-2",children:"Go to Settings"})]})]})})},ffe=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:o})=>{const s=T.useRef(null),l=T.useRef(null),[u,d]=T.useState(!1),h=or(k=>k.streamingInteractionIds),{isLoading:p}=Pn(hn(k=>({providers:k.dbProviderConfigs,apiKeys:k.dbApiKeys,isLoading:k.isLoading,enableApiKeyManagement:k.enableApiKeyManagement}))),{conversationCount:g,isConversationLoading:v}=mn(hn(k=>({conversationCount:k.conversations.length,isConversationLoading:k.isLoading}))),{projectCount:b,isProjectLoading:_}=ni(hn(k=>({projectCount:k.projects.length,isProjectLoading:k.isLoading}))),x=T.useMemo(()=>p||v||_?!1:g===0&&b===0,[g,b,p,v,_]),S=T.useMemo(()=>{const k=[],R=new Set;return[...t].sort((O,L)=>O.index-L.index).forEach(O=>{if(R.has(O.id))return;const L=[O];R.add(O.id),k.push(L)}),k},[t]),E=(k="smooth")=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:k})};T.useEffect(()=>{if(l.current){const{scrollHeight:k,clientHeight:R,scrollTop:j}=l.current,O=k-R<=j+150,L=n==="streaming"&&h.length>0;(O||L)&&E(L?"smooth":"auto")}},[t,n,h]),T.useEffect(()=>{const k=l.current;if(!k)return;const R=()=>{const{scrollHeight:j,clientHeight:O,scrollTop:L}=k,z=L<j-O-O*.5;d(z)};return k.addEventListener("scroll",R,{passive:!0}),R(),()=>{k.removeEventListener("scroll",R)}},[]),T.useEffect(()=>{s.current&&(l.current=s.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const C=()=>p||v||_?y.jsxs("div",{className:"space-y-4 p-4",children:[y.jsx(Or,{className:"h-24 w-full"}),y.jsx(Or,{className:"h-32 w-full"}),y.jsx(Or,{className:"h-20 w-full"})]}):x?y.jsx(dfe,{}):e?e?t.length===0&&n!=="streaming"?y.jsx(VO,{}):y.jsxs("div",{className:"space-y-4 p-4",children:[S.map(k=>{const R=k[0];return h.includes(R.id)?y.jsx(tC,{interactionId:R.id,onStop:o},`${R.id}-streaming`):y.jsx(bF,{interaction:R,onEdit:i,onRegenerate:a,onDelete:void 0},R.id)}),n==="streaming"&&h.filter(k=>!t.some(R=>R.id===k)).map(k=>y.jsx(tC,{interactionId:k,onStop:o},`${k}-streaming-new`))]}):null:y.jsx(VO,{});return y.jsxs("div",{className:Rt("flex-grow relative",r),children:[y.jsx(Hd,{className:"h-full w-full",ref:s,children:C()}),u&&y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>E(),"aria-label":"Scroll to bottom",children:y.jsx(MU,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"left",children:"Scroll to Bottom"})]})})]})},Pb=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0));return a.length===0?null:y.jsx("div",{className:Rt(r),children:a.map(i=>{const o=n==="icon"?i.iconRenderer:i.renderer;return y.jsx(yt.Fragment,{children:o?o():null},i.id)})})},hfe=Symbol("Let zodToJsonSchema decide on which parser to use"),rj={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},pfe=e=>typeof e=="string"?{...rj,name:e}:{...rj,...e},mfe=e=>{const t=pfe(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function AL(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function yr(e,t,n,r,a){e[t]=n,AL(e,t,r,a)}function gfe(){return{}}function yfe(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Ut.ZodAny&&(n.items=lr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&yr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&yr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(yr(n,"minItems",e.exactLength.value,e.exactLength.message,t),yr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function bfe(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?yr(n,"minimum",r.value,r.message,t):yr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),yr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?yr(n,"maximum",r.value,r.message,t):yr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),yr(n,"maximum",r.value,r.message,t));break;case"multipleOf":yr(n,"multipleOf",r.value,r.message,t);break}return n}function vfe(){return{type:"boolean"}}function TL(e,t){return lr(e.type._def,t)}const wfe=(e,t)=>lr(e.innerType._def,t);function NL(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>NL(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return _fe(e,t)}}const _fe=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":yr(n,"minimum",r.value,r.message,t);break;case"max":yr(n,"maximum",r.value,r.message,t);break}return n};function xfe(e,t){return{...lr(e.innerType._def,t),default:e.defaultValue()}}function Sfe(e,t){return t.effectStrategy==="input"?lr(e.schema._def,t):{}}function Efe(e){return{type:"string",enum:Array.from(e.values)}}const Cfe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function kfe(e,t){const n=[lr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),lr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(Cfe(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:s,...l}=i;o=l}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function Afe(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let $E;const Fo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>($E===void 0&&($E=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),$E),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function RL(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":yr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":yr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Lo(n,"email",r.message,t);break;case"format:idn-email":Lo(n,"idn-email",r.message,t);break;case"pattern:zod":yi(n,Fo.email,r.message,t);break}break;case"url":Lo(n,"uri",r.message,t);break;case"uuid":Lo(n,"uuid",r.message,t);break;case"regex":yi(n,r.regex,r.message,t);break;case"cuid":yi(n,Fo.cuid,r.message,t);break;case"cuid2":yi(n,Fo.cuid2,r.message,t);break;case"startsWith":yi(n,RegExp(`^${BE(r.value,t)}`),r.message,t);break;case"endsWith":yi(n,RegExp(`${BE(r.value,t)}$`),r.message,t);break;case"datetime":Lo(n,"date-time",r.message,t);break;case"date":Lo(n,"date",r.message,t);break;case"time":Lo(n,"time",r.message,t);break;case"duration":Lo(n,"duration",r.message,t);break;case"length":yr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),yr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{yi(n,RegExp(BE(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Lo(n,"ipv4",r.message,t),r.version!=="v4"&&Lo(n,"ipv6",r.message,t);break}case"base64url":yi(n,Fo.base64url,r.message,t);break;case"jwt":yi(n,Fo.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&yi(n,Fo.ipv4Cidr,r.message,t),r.version!=="v4"&&yi(n,Fo.ipv6Cidr,r.message,t);break}case"emoji":yi(n,Fo.emoji(),r.message,t);break;case"ulid":{yi(n,Fo.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Lo(n,"binary",r.message,t);break}case"contentEncoding:base64":{yr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{yi(n,Fo.base64,r.message,t);break}}break}case"nanoid":yi(n,Fo.nanoid,r.message,t)}return n}function BE(e,t){return t.patternStrategy==="escape"?Nfe(e):e}const Tfe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Nfe(e){let t="";for(let n=0;n<e.length;n++)Tfe.has(e[n])||(t+="\\"),t+=e[n];return t}function Lo(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):yr(e,"format",t,n,r)}function yi(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:aj(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):yr(e,"pattern",aj(t,r),n,r)}function aj(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,s=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(o){if(r[u].match(/[a-z]/)){s?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),s=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(a+=r[u],s=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=o?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:o&&r[u]==="]"?o=!1:!o&&r[u]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function IL(e,t){var r,a,i,o,s,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Ut.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((u,d)=>({...u,[d]:lr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",d]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:lr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Ut.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:u,...d}=RL(e.keyType._def,t);return{...n,propertyNames:d}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===Ut.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===Ut.ZodBranded&&e.keyType._def.type._def.typeName===Ut.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...d}=TL(e.keyType._def,t);return{...n,propertyNames:d}}}return n}function Rfe(e,t){if(t.mapStrategy==="record")return IL(e,t);const n=lr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=lr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Ife(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function Ofe(){return{not:{}}}function jfe(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const rw={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Dfe(e,t){if(t.target==="openApi3")return ij(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in rw&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const o=rw[i._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,o,s)=>s.indexOf(i)===o);return{type:a.length>1?a:a[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return ij(e,t)}const ij=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>lr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Mfe(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:rw[e.innerType._def.typeName],nullable:!0}:{type:[rw[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=lr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=lr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Pfe(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",AL(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?yr(n,"minimum",r.value,r.message,t):yr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),yr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?yr(n,"maximum",r.value,r.message,t):yr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),yr(n,"maximum",r.value,r.message,t));break;case"multipleOf":yr(n,"multipleOf",r.value,r.message,t);break}return n}function Ffe(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const s in i){let l=i[s];if(l===void 0||l._def===void 0)continue;let u=$fe(l);u&&n&&(l instanceof Vo&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const d=lr(l._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});d!==void 0&&(r.properties[s]=d,u||a.push(s))}a.length&&(r.required=a);const o=Lfe(e,t);return o!==void 0&&(r.additionalProperties=o),r}function Lfe(e,t){if(e.catchall._def.typeName!=="ZodNever")return lr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function $fe(e){try{return e.isOptional()}catch{return!0}}const Bfe=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return lr(e.innerType._def,t);const n=lr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},zfe=(e,t)=>{if(t.pipeStrategy==="input")return lr(e.in._def,t);if(t.pipeStrategy==="output")return lr(e.out._def,t);const n=lr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=lr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function Ufe(e,t){return lr(e.type._def,t)}function Hfe(e,t){const r={type:"array",uniqueItems:!0,items:lr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&yr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&yr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function qfe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>lr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:lr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>lr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Vfe(){return{not:{}}}function Gfe(){return{}}const Wfe=(e,t)=>lr(e.innerType._def,t),Kfe=(e,t,n)=>{switch(t){case Ut.ZodString:return RL(e,n);case Ut.ZodNumber:return Pfe(e,n);case Ut.ZodObject:return Ffe(e,n);case Ut.ZodBigInt:return bfe(e,n);case Ut.ZodBoolean:return vfe();case Ut.ZodDate:return NL(e,n);case Ut.ZodUndefined:return Vfe();case Ut.ZodNull:return jfe(n);case Ut.ZodArray:return yfe(e,n);case Ut.ZodUnion:case Ut.ZodDiscriminatedUnion:return Dfe(e,n);case Ut.ZodIntersection:return kfe(e,n);case Ut.ZodTuple:return qfe(e,n);case Ut.ZodRecord:return IL(e,n);case Ut.ZodLiteral:return Afe(e,n);case Ut.ZodEnum:return Efe(e);case Ut.ZodNativeEnum:return Ife(e);case Ut.ZodNullable:return Mfe(e,n);case Ut.ZodOptional:return Bfe(e,n);case Ut.ZodMap:return Rfe(e,n);case Ut.ZodSet:return Hfe(e,n);case Ut.ZodLazy:return()=>e.getter()._def;case Ut.ZodPromise:return Ufe(e,n);case Ut.ZodNaN:case Ut.ZodNever:return Ofe();case Ut.ZodEffects:return Sfe(e,n);case Ut.ZodAny:return gfe();case Ut.ZodUnknown:return Gfe();case Ut.ZodDefault:return xfe(e,n);case Ut.ZodBranded:return TL(e,n);case Ut.ZodReadonly:return Wfe(e,n);case Ut.ZodCatch:return wfe(e,n);case Ut.ZodPipeline:return zfe(e,n);case Ut.ZodFunction:case Ut.ZodVoid:case Ut.ZodSymbol:return;default:return(r=>{})()}};function lr(e,t,n=!1){var s;const r=t.seen.get(e);if(t.override){const l=(s=t.override)==null?void 0:s.call(t,e,t,r,n);if(l!==hfe)return l}if(r&&!n){const l=Zfe(r,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=Kfe(e,e.typeName,t),o=typeof i=="function"?lr(i(),t):i;if(o&&Xfe(e,t,o),t.postProcess){const l=t.postProcess(o,e,t);return a.jsonSchema=o,l}return a.jsonSchema=o,o}const Zfe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Yfe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Yfe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Xfe=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Jfe=(e,t)=>{const n=mfe(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[u,d])=>({...l,[u]:lr(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=lr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const s=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var j0={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},D0={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},M0={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},P0={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},F0={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},Qfe=[j0,D0,M0,P0,F0];j0.code+"",D0.code+"",M0.code+"",P0.code+"",F0.code+"";j0.name+"",j0.code,D0.name+"",D0.code,M0.name+"",M0.code,P0.name+"",P0.code,F0.name+"",F0.code;Qfe.map(e=>e.code);function ehe(e){const t=["ROOT"];let n=-1,r=null;function a(l,u,d){switch(l){case'"':{n=u,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=u,r=u,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{n=u,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{n=u,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=u,t.pop();break}}}function o(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}}}for(let l=0;l<e.length;l++){const u=e[l];switch(t[t.length-1]){case"ROOT":a(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{n=l,t.pop();break}default:{n=l,a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(u,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l)):n=l;break}}}let s=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const d=e.substring(r,e.length);"true".startsWith(d)?s+="true".slice(d.length):"false".startsWith(d)?s+="false".slice(d.length):"null".startsWith(d)&&(s+="null".slice(d.length))}}return s}function the(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=gd({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=gd({text:ehe(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var nhe={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},rhe={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},ahe={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ihe={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},ohe={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},she={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},lhe={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},che={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},uhe={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},dhe={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},fhe={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},hhe={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},phe={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},mhe={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},ghe={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},yhe={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},k1=[nhe,rhe,ahe,ihe,ohe,she,lhe,che,uhe,dhe,fhe,hhe,phe,mhe,ghe,yhe];Object.fromEntries(k1.map(e=>[e.code,e]));Object.fromEntries(k1.map(e=>[e.name,e.code]));k1.map(e=>e.code);function ei(e,t){const n=k1.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function bhe(e,t){var n;const r=(n=void 0)!=null?n:!1;return vhe(Jfe(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var lC=Symbol.for("vercel.ai.schema");function vhe(e,{validate:t}={}){return{[lC]:!0,_type:void 0,[iv]:!0,jsonSchema:e,validate:t}}function whe(e){return typeof e=="object"&&e!==null&&lC in e&&e[lC]===!0&&"jsonSchema"in e&&"validate"in e}function A1(e){return whe(e)?e:bhe(e)}const oj=globalThis||void 0||self;var _he=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof oj=="object"?oj:{},dd="1.9.0",sj=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function xhe(e){var t=new Set([e]),n=new Set,r=e.match(sj);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(l){return l===e};function i(s){return n.add(s),!1}function o(s){return t.add(s),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var u=l.match(sj);if(!u)return i(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||a.major!==d.major?i(l):a.major===0?a.minor===d.minor&&a.patch<=d.patch?o(l):i(l):a.minor<=d.minor?o(l):i(l)}}var She=xhe(dd),Ehe=dd.split(".")[0],L0=Symbol.for("opentelemetry.js.api."+Ehe),$0=_he;function wA(e,t,n,r){var a;r===void 0&&(r=!1);var i=$0[L0]=(a=$0[L0])!==null&&a!==void 0?a:{version:dd};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==dd){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+dd);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+dd+"."),!0}function B0(e){var t,n,r=(t=$0[L0])===null||t===void 0?void 0:t.version;if(!(!r||!She(r)))return(n=$0[L0])===null||n===void 0?void 0:n[e]}function _A(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+dd+".");var n=$0[L0];n&&delete n[e]}var Che=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},khe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Ahe=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rm("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rm("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rm("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rm("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rm("verbose",this._namespace,t)},e}();function Rm(e,t,n){var r=B0("diag");if(r)return n.unshift(t),r[e].apply(r,khe([],Che(n),!1))}var Yi;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Yi||(Yi={}));function The(e,t){e<Yi.NONE?e=Yi.NONE:e>Yi.ALL&&(e=Yi.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",Yi.ERROR),warn:n("warn",Yi.WARN),info:n("info",Yi.INFO),debug:n("debug",Yi.DEBUG),verbose:n("verbose",Yi.VERBOSE)}}var Nhe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Rhe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Ihe="diag",aw=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=B0("diag");if(s)return s[a].apply(s,Rhe([],Nhe(i),!1))}}var n=this,r=function(a,i){var o,s,l;if(i===void 0&&(i={logLevel:Yi.INFO}),a===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=u.stack)!==null&&o!==void 0?o:u.message),!1}typeof i=="number"&&(i={logLevel:i});var d=B0("diag"),h=The((s=i.logLevel)!==null&&s!==void 0?s:Yi.INFO,a);if(d&&!i.suppressOverrideMessage){var p=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+p),h.warn("Current logger will overwrite one already registered from "+p)}return wA("diag",h,n,!0)};n.setLogger=r,n.disable=function(){_A(Ihe,n)},n.createComponentLogger=function(a){return new Ahe(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function Ohe(e){return Symbol.for(e)}var jhe=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Dhe=new jhe,Mhe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Phe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Fhe=function(){function e(){}return e.prototype.active=function(){return Dhe},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,Phe([r],Mhe(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Lhe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},$he=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},zE="context",Bhe=new Fhe,OL=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return wA(zE,t,aw.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,$he([t,n,r],Lhe(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return B0(zE)||Bhe},e.prototype.disable=function(){this._getContextManager().disable(),_A(zE,aw.instance())},e}(),cC;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(cC||(cC={}));var jL="0000000000000000",DL="00000000000000000000000000000000",zhe={traceId:DL,spanId:jL,traceFlags:cC.NONE},$m=function(){function e(t){t===void 0&&(t=zhe),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),xA=Ohe("OpenTelemetry Context Key SPAN");function SA(e){return e.getValue(xA)||void 0}function Uhe(){return SA(OL.getInstance().active())}function EA(e,t){return e.setValue(xA,t)}function Hhe(e){return e.deleteValue(xA)}function qhe(e,t){return EA(e,new $m(t))}function ML(e){var t;return(t=SA(e))===null||t===void 0?void 0:t.spanContext()}var Vhe=/^([0-9a-f]{32})$/i,Ghe=/^[0-9a-f]{16}$/i;function Whe(e){return Vhe.test(e)&&e!==DL}function Khe(e){return Ghe.test(e)&&e!==jL}function PL(e){return Whe(e.traceId)&&Khe(e.spanId)}function Zhe(e){return new $m(e)}var UE=OL.getInstance(),FL=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=UE.active());var a=!!(n!=null&&n.root);if(a)return new $m;var i=r&&ML(r);return Yhe(i)&&PL(i)?new $m(i):new $m},e.prototype.startActiveSpan=function(t,n,r,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=n:arguments.length===3?(i=n,s=r):(i=n,o=r,s=a);var l=o??UE.active(),u=this.startSpan(t,i,l),d=EA(l,u);return UE.with(d,s,void 0,u)}},e}();function Yhe(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Xhe=new FL,Jhe=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Xhe},e}(),Qhe=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new FL},e}(),epe=new Qhe,lj=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Jhe(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:epe},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),iw;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(iw||(iw={}));var HE="trace",tpe=function(){function e(){this._proxyTracerProvider=new lj,this.wrapSpanContext=Zhe,this.isSpanContextValid=PL,this.deleteSpan=Hhe,this.getSpan=SA,this.getActiveSpan=Uhe,this.getSpanContext=ML,this.setSpan=EA,this.setSpanContext=qhe}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=wA(HE,this._proxyTracerProvider,aw.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return B0(HE)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){_A(HE,aw.instance()),this._proxyTracerProvider=new lj},e}(),npe=tpe.getInstance(),rpe=Object.defineProperty,CA=(e,t)=>{for(var n in t)rpe(e,n,{get:t[n],enumerable:!0})};function ow(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function cj(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function uj({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:s,value:l}=await i.read();if(s)break;e.write(l)}}catch(s){throw s}finally{e.end()}})()}var LL="AI_InvalidArgumentError",$L=`vercel.ai.error.${LL}`,ape=Symbol.for($L),BL,Bo=class extends An{constructor({parameter:e,value:t,message:n}){super({name:LL,message:`Invalid argument for parameter ${e}: ${n}`}),this[BL]=!0,this.parameter=e,this.value=t}static isInstance(e){return An.hasMarker(e,$L)}};BL=ape;var zL="AI_RetryError",UL=`vercel.ai.error.${zL}`,ipe=Symbol.for(UL),HL,dj=class extends An{constructor({message:e,reason:t,errors:n}){super({name:zL,message:e}),this[HL]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return An.hasMarker(e,UL)}};HL=ipe;var ope=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>qL(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function qL(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(qb(i)||t===0)throw i;const o=gV(i),s=[...a,i],l=s.length;if(l>t)throw new dj({message:`Failed after ${l} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(i instanceof Error&&wa.isInstance(i)&&i.isRetryable===!0&&l<=t)return await hV(n),qL(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw l===1?i:new dj({message:`Failed after ${l} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function spe({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Bo({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Bo({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:ope({maxRetries:t})}}function uC({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function lpe({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[o,s])=>(i[`ai.settings.${o}`]=s,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[o,s])=>(i[`ai.telemetry.metadata.${o}`]=s,i),{}),...Object.entries(r??{}).reduce((i,[o,s])=>(s!==void 0&&(i[`ai.request.headers.${o}`]=s),i),{})}}var cpe={startSpan(){return Fb},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Fb);if(typeof n=="function")return n(Fb);if(typeof r=="function")return r(Fb)}},Fb={spanContext(){return upe},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},upe={traceId:"",spanId:"",traceFlags:0};function dpe({isEnabled:e=!1,tracer:t}={}){return e?t||npe.getTracer("ai"):cpe}function dC({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const o=await r(i);return a&&i.end(),o}catch(o){try{o instanceof Error?(i.recordException({name:o.name,message:o.message,stack:o.stack}),i.setStatus({code:iw.ERROR,message:o.message})):i.setStatus({code:iw.ERROR})}finally{i.end()}throw o}})}function nh({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var fpe=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=ph(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=sD(this.base64Data)),this.uint8ArrayData}},hpe=class extends fpe{constructor(e){super(e),this.type="file"}},ppe=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function mpe(e){for(const t of ppe)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var VL="AI_NoObjectGeneratedError",GL=`vercel.ai.error.${VL}`,gpe=Symbol.for(GL),WL,fj=class extends An{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:VL,message:e,cause:t}),this[WL]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return An.hasMarker(e,GL)}};WL=gpe;var KL="AI_DownloadError",ZL=`vercel.ai.error.${KL}`,ype=Symbol.for(ZL),YL,qE=class extends An{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:KL,message:a,cause:r}),this[YL]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return An.hasMarker(e,ZL)}};YL=ype;async function bpe({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new qE({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw qE.isInstance(a)?a:new qE({url:r,cause:a})}}var XL="AI_InvalidDataContentError",JL=`vercel.ai.error.${XL}`,vpe=Symbol.for(JL),QL,hj=class extends An{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:XL,message:n,cause:t}),this[QL]=!0,this.content=e}static isInstance(e){return An.hasMarker(e,JL)}};QL=vpe;var e$=$.union([$.string(),$.instanceof(Uint8Array),$.instanceof(ArrayBuffer),$.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function t$(e){return typeof e=="string"?e:e instanceof ArrayBuffer?ph(new Uint8Array(e)):ph(e)}function sw(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return sD(e)}catch(t){throw new hj({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new hj({content:e})}function wpe(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var n$="AI_InvalidMessageRoleError",r$=`vercel.ai.error.${n$}`,_pe=Symbol.for(r$),a$,xpe=class extends An{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:n$,message:t}),this[a$]=!0,this.role=e}static isInstance(e){return An.hasMarker(e,r$)}};a$=_pe;function Spe(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function Epe({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=bpe}){const a=await kpe(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>Cpe(i,a))]}function Cpe(e,t){var n,r,a,i,o,s;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(u=>Ape(u,t)).filter(u=>u.type!=="text"||u.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(u=>u.type!=="text"||u.text!=="").map(u=>{var d;const h=(d=u.providerOptions)!=null?d:u.experimental_providerMetadata;switch(u.type){case"file":return{type:"file",data:u.data instanceof URL?u.data:t$(u.data),filename:u.filename,mimeType:u.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:u.text,signature:u.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:u.data,providerMetadata:h};case"text":return{type:"text",text:u.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,args:u.args,providerMetadata:h}}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(u=>{var d;return{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result,content:u.experimental_content,isError:u.isError,providerMetadata:(d=u.providerOptions)!=null?d:u.experimental_providerMetadata}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};default:{const u=l;throw new xpe({role:u})}}}async function kpe(e,t,n,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&n===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!r(o)),i=await Promise.all(a.map(async o=>({url:o,data:await t({url:o})})));return Object.fromEntries(i.map(({url:o,data:s})=>[o.toString(),s]))}function Ape(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let o=e.mimeType,s,l,u;const d=e.type;switch(d){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${d}`)}try{l=typeof s=="string"?new URL(s):s}catch{l=s}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:h,base64Content:p}=Spe(l.toString());if(h==null||p==null)throw new Error(`Invalid data URL format in part ${d}`);o=h,u=sw(p)}else{const h=t[l.toString()];h?(u=h.data,o??(o=h.mimeType)):u=l}else u=sw(l);switch(d){case"image":return u instanceof Uint8Array&&(o=(r=mpe(u))!=null?r:o),{type:"image",image:u,mimeType:o,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(o==null)throw new Error("Mime type is missing for file part");return{type:"file",data:u instanceof Uint8Array?t$(u):u,filename:e.filename,mimeType:o,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function Tpe({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o,seed:s}){if(e!=null){if(!Number.isInteger(e))throw new Bo({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Bo({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Bo({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Bo({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Bo({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Bo({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Bo({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Bo({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o!=null&&o.length>0?o:void 0,seed:s}}function pj(e){var t,n,r;const a=[];for(const i of e){let o;try{o=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(o.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:o});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:o,mimeType:i.contentType})}break}case"data:":{let s,l,u;try{[s,l]=i.url.split(","),u=s.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(u==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:sw(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:wpe(sw(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return a}var i$="AI_MessageConversionError",o$=`vercel.ai.error.${i$}`,Npe=Symbol.for(o$),s$,VE=class extends An{constructor({originalMessage:e,message:t}){super({name:i$,message:t}),this[s$]=!0,this.originalMessage=e}static isInstance(e){return An.hasMarker(e,o$)}};s$=Npe;function Rpe(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let o=0;o<e.length;o++){const s=e[o],l=o===e.length-1,{role:u,content:d,experimental_attachments:h}=s;switch(u){case"system":{i.push({role:"system",content:d});break}case"user":{if(s.parts==null)i.push({role:"user",content:h?[{type:"text",text:d},...pj(h)]:d});else{const p=s.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...p,...pj(h)]:p})}break}case"assistant":{if(s.parts!=null){let v=function(){const S=[];for(const C of x)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const k of C.details)switch(k.type){case"text":S.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const k=C;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:S});const E=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new VE({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:k,toolName:R,result:j}=C,O=a[R];return(O==null?void 0:O.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:R,result:O.experimental_toToolResultContent(j),experimental_content:O.experimental_toToolResultContent(j)}:{type:"tool-result",toolCallId:k,toolName:R,result:j}})}),x=[],_=!1,b++},b=0,_=!1,x=[];for(const S of s.parts)switch(S.type){case"text":{_&&v(),x.push(S);break}case"file":case"reasoning":{x.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==b&&v(),x.push(S),_=!0;break}}v();break}const p=s.toolInvocations;if(p==null||p.length===0){i.push({role:"assistant",content:d});break}const g=p.reduce((v,b)=>{var _;return Math.max(v,(_=b.step)!=null?_:0)},0);for(let v=0;v<=g;v++){const b=p.filter(_=>{var x;return((x=_.step)!=null?x:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...l&&d&&v===0?[{type:"text",text:d}]:[],...b.map(({toolCallId:_,toolName:x,args:S})=>({type:"tool-call",toolCallId:_,toolName:x,args:S}))]}),i.push({role:"tool",content:b.map(_=>{if(!("result"in _))throw new VE({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:x,toolName:S,result:E}=_,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:S,result:E}})}))}d&&!l&&i.push({role:"assistant",content:d});break}case"data":break;default:{const p=u;throw new VE({originalMessage:s,message:`Unsupported role: ${p}`})}}}return i}function Ipe(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(Ope);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function Ope(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var fC=$.lazy(()=>$.union([$.null(),$.string(),$.number(),$.boolean(),$.record($.string(),fC),$.array(fC)])),ea=$.record($.string(),$.record($.string(),fC)),jpe=$.array($.union([$.object({type:$.literal("text"),text:$.string()}),$.object({type:$.literal("image"),data:$.string(),mimeType:$.string().optional()})])),l$=$.object({type:$.literal("text"),text:$.string(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Dpe=$.object({type:$.literal("image"),image:$.union([e$,$.instanceof(URL)]),mimeType:$.string().optional(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),c$=$.object({type:$.literal("file"),data:$.union([e$,$.instanceof(URL)]),filename:$.string().optional(),mimeType:$.string(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Mpe=$.object({type:$.literal("reasoning"),text:$.string(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Ppe=$.object({type:$.literal("redacted-reasoning"),data:$.string(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Fpe=$.object({type:$.literal("tool-call"),toolCallId:$.string(),toolName:$.string(),args:$.unknown(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Lpe=$.object({type:$.literal("tool-result"),toolCallId:$.string(),toolName:$.string(),result:$.unknown(),content:jpe.optional(),isError:$.boolean().optional(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),$pe=$.object({role:$.literal("system"),content:$.string(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Bpe=$.object({role:$.literal("user"),content:$.union([$.string(),$.array($.union([l$,Dpe,c$]))]),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),zpe=$.object({role:$.literal("assistant"),content:$.union([$.string(),$.array($.union([l$,c$,Mpe,Ppe,Fpe]))]),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Upe=$.object({role:$.literal("tool"),content:$.array(Lpe),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Hpe=$.union([$pe,Bpe,zpe,Upe]);function qpe({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Al({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Al({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Al({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Al({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=Ipe(e.messages);if(n==="other")throw new Al({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?Rpe(e.messages,{tools:t}):e.messages;if(r.length===0)throw new Al({prompt:e,message:"messages must not be empty"});const a=zh({value:r,schema:$.array(Hpe)});if(!a.success)throw new Al({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Vpe({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Gpe(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Wpe="JSON schema:",Kpe="You MUST answer with a JSON object that matches the JSON schema above.",Zpe="You MUST answer with JSON.";function Ype({prompt:e,schema:t,schemaPrefix:n=t!=null?Wpe:void 0,schemaSuffix:r=t!=null?Kpe:Zpe}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function GE(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}Td({prefix:"aiobj",size:24});var Ti=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function mj(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Xpe(){let e=[],t=null,n=!1,r=mj();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=mj(),await r.promise,a();try{const{value:i,done:o}=await e[0].read();o?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function Jpe(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Td({prefix:"aiobj",size:24});var u$="AI_NoOutputSpecifiedError",d$=`vercel.ai.error.${u$}`,Qpe=Symbol.for(d$),f$,eme=class extends An{constructor({message:e="No output specified."}={}){super({name:u$,message:e}),this[f$]=!0}static isInstance(e){return An.hasMarker(e,d$)}};f$=Qpe;var h$="AI_ToolExecutionError",p$=`vercel.ai.error.${h$}`,tme=Symbol.for(p$),m$,nme=class extends An{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${Q0(r)}`}){super({name:h$,message:a,cause:r}),this[m$]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return An.hasMarker(e,p$)}};m$=tme;function rme(e){return e!=null&&Object.keys(e).length>0}function ame({tools:e,toolChoice:t,activeTools:n}){return rme(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const o=i.type;switch(o){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:A1(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const s=o;throw new Error(`Unsupported tool type: ${s}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var ime=/^([\s\S]*?)(\s+)(\S*)$/;function ome(e){const t=e.match(ime);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var g$="AI_InvalidToolArgumentsError",y$=`vercel.ai.error.${g$}`,sme=Symbol.for(y$),b$,v$=class extends An{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${Q0(n)}`}){super({name:g$,message:r,cause:n}),this[b$]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return An.hasMarker(e,y$)}};b$=sme;var w$="AI_NoSuchToolError",_$=`vercel.ai.error.${w$}`,lme=Symbol.for(_$),x$,hC=class extends An{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:w$,message:n}),this[x$]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return An.hasMarker(e,_$)}};x$=lme;var S$="AI_ToolCallRepairError",E$=`vercel.ai.error.${S$}`,cme=Symbol.for(E$),C$,ume=class extends An{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${Q0(e)}`}){super({name:S$,message:n,cause:e}),this[C$]=!0,this.originalError=t}static isInstance(e){return An.hasMarker(e,E$)}};C$=cme;async function dme({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new hC({toolName:e.toolName});try{return await gj({toolCall:e,tools:t})}catch(i){if(n==null||!(hC.isInstance(i)||v$.isInstance(i)))throw i;let o=null;try{o=await n({toolCall:e,tools:t,parameterSchema:({toolName:s})=>A1(t[s].parameters).jsonSchema,system:r,messages:a,error:i})}catch(s){throw new ume({cause:s,originalError:i})}if(o==null)throw i;return await gj({toolCall:o,tools:t})}}async function gj({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new hC({toolName:e.toolName,availableTools:Object.keys(t)});const a=A1(r.parameters),i=e.args.trim()===""?zh({value:{},schema:a}):gd({text:e.args,schema:a});if(i.success===!1)throw new v$({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function fme(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function yj({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:o,generateMessageId:s}){const l=[];return l.push({role:"assistant",content:[...n.map(u=>u.type==="text"?{...u,type:"reasoning"}:{...u,type:"redacted-reasoning"}),...t.map(u=>({type:"file",data:u.base64,mimeType:u.mimeType})),{type:"text",text:e},...a],id:o}),i.length>0&&l.push({role:"tool",id:s(),content:i.map(u=>{const d=r[u.toolName];return(d==null?void 0:d.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:d.experimental_toToolResultContent(u.result),experimental_content:d.experimental_toToolResultContent(u.result)}:{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result}})}),l}Td({prefix:"aitxt",size:24});Td({prefix:"msg",size:24});var hme={};CA(hme,{object:()=>yme,text:()=>gme});var k$="AI_InvalidStreamPartError",A$=`vercel.ai.error.${k$}`,pme=Symbol.for(A$),T$,mme=class extends An{constructor({chunk:e,message:t}){super({name:k$,message:t}),this[T$]=!0,this.chunk=e}static isInstance(e){return An.hasMarker(e,A$)}};T$=pme;var gme=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),yme=({schema:e})=>{const t=A1(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Ype({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=the(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=gd({text:n});if(!a.success)throw new fj({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=zh({value:a.value,schema:t});if(!i.success)throw new fj({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function N$(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function kA(e,t){const n=e.getReader(),r=t.getReader();let a,i,o=!1,s=!1;async function l(d){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}async function u(d){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}return new ReadableStream({async pull(d){try{if(o){await u(d);return}if(s){await l(d);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:p}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||d.enqueue(h.value),p===n?(a=void 0,h.done&&(await u(d),o=!0)):(i=void 0,h.done&&(s=!0,await l(d)))}catch(h){d.error(h)}},cancel(){n.cancel(),r.cancel()}})}function bme({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:o,abortSignal:s,repairToolCall:l}){let u=null;const d=new ReadableStream({start(x){u=x}}),h={},p=new Set;let g=!1,v;function b(){g&&p.size===0&&(v!=null&&u.enqueue(v),u.close())}const _=new TransformStream({async transform(x,S){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(x);break}case"file":{S.enqueue(new hpe({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await dme({toolCall:x,tools:e,repairToolCall:l,system:i,messages:o});S.enqueue(C);const k=e[C.toolName];if(k.execute!=null){const R=js();p.add(R),dC({name:"ai.toolCall",attributes:nh({telemetry:a,attributes:{...uC({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async j=>k.execute(C.args,{toolCallId:C.toolCallId,messages:o,abortSignal:s}).then(O=>{u.enqueue({...C,type:"tool-result",result:O}),p.delete(R),b();try{j.setAttributes(nh({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(O)}}}))}catch{}},O=>{u.enqueue({type:"error",error:new nme({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:O})}),p.delete(R),b()})})}}catch(C){u.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:Vpe(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,b()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(_).pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){}})),d.pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){x.close()}}))])}})}var vme=Td({prefix:"aitxt",size:24}),wme=Td({prefix:"msg",size:24});function _me({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:l,maxSteps:u=1,experimental_generateMessageId:d=wme,experimental_output:h,experimental_continueSteps:p=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:_=!1,toolCallStreaming:x=_,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:k,onError:R,onFinish:j,onStepFinish:O,_internal:{now:L=Jpe,generateId:z=vme,currentDate:Y=()=>new Date}={},...F}){return new Sme({model:e,telemetry:g,headers:l,settings:F,maxRetries:o,abortSignal:s,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:N$(C),activeTools:S,repairToolCall:E,maxSteps:u,output:h,continueSteps:p,providerOptions:b,onChunk:k,onError:R,onFinish:j,onStepFinish:O,now:L,currentDate:Y,generateId:z,generateMessageId:d})}function xme(e){if(!e)return new TransformStream({transform(i,o){o.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:o=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:o}),n=""}return new TransformStream({transform(i,o){if(i.type==="step-finish"&&a({controller:o}),i.type!=="text-delta"){o.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const s=e.parsePartial({text:t});if(s!=null){const l=JSON.stringify(s.partial);l!==r&&(a({controller:o,partialOutput:s.partial}),r=l)}},flush(i){n.length>0&&a({controller:i})}})}var Sme=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:o,prompt:s,messages:l,tools:u,toolChoice:d,toolCallStreaming:h,transforms:p,activeTools:g,repairToolCall:v,maxSteps:b,output:_,continueSteps:x,providerOptions:S,now:E,currentDate:C,generateId:k,generateMessageId:R,onChunk:j,onError:O,onFinish:L,onStepFinish:z}){this.warningsPromise=new Ti,this.usagePromise=new Ti,this.finishReasonPromise=new Ti,this.providerMetadataPromise=new Ti,this.textPromise=new Ti,this.reasoningPromise=new Ti,this.reasoningDetailsPromise=new Ti,this.sourcesPromise=new Ti,this.filesPromise=new Ti,this.toolCallsPromise=new Ti,this.toolResultsPromise=new Ti,this.requestPromise=new Ti,this.responsePromise=new Ti,this.stepsPromise=new Ti;var Y;if(b<1)throw new Bo({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=_;let F="",K="",q="",fe=[],te=[],re,X=[];const ae=[],U={id:k(),timestamp:C(),modelId:e.modelId,messages:[]};let ee=[],J=[],ue,be,_e="initial";const Pe=[];let Ne;const Re=new TransformStream({async transform(se,ie){ie.enqueue(se);const{part:Q}=se;if((Q.type==="text-delta"||Q.type==="reasoning"||Q.type==="source"||Q.type==="tool-call"||Q.type==="tool-result"||Q.type==="tool-call-streaming-start"||Q.type==="tool-call-delta")&&await(j==null?void 0:j({chunk:Q})),Q.type==="error"&&await(O==null?void 0:O({error:Q.error})),Q.type==="text-delta"&&(F+=Q.textDelta,K+=Q.textDelta,q+=Q.textDelta),Q.type==="reasoning"&&(re==null?(re={type:"text",text:Q.textDelta},fe.push(re)):re.text+=Q.textDelta),Q.type==="reasoning-signature"){if(re==null)throw new An({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});re.signature=Q.signature,re=void 0}if(Q.type==="redacted-reasoning"&&fe.push({type:"redacted",data:Q.data}),Q.type==="file"&&te.push(Q),Q.type==="source"&&(ae.push(Q.source),X.push(Q.source)),Q.type==="tool-call"&&ee.push(Q),Q.type==="tool-result"&&J.push(Q),Q.type==="step-finish"){const xe=yj({text:K,files:te,reasoning:fe,tools:u??{},toolCalls:ee,toolResults:J,messageId:Q.messageId,generateMessageId:R}),Me=Pe.length;let Ee="done";Me+1<b&&(x&&Q.finishReason==="length"&&ee.length===0?Ee="continue":ee.length>0&&J.length===ee.length&&(Ee="tool-result"));const We={stepType:_e,text:F,reasoning:fme(fe),reasoningDetails:fe,files:te,sources:X,toolCalls:ee,toolResults:J,finishReason:Q.finishReason,usage:Q.usage,warnings:Q.warnings,logprobs:Q.logprobs,request:Q.request,response:{...Q.response,messages:[...U.messages,...xe]},providerMetadata:Q.experimental_providerMetadata,experimental_providerMetadata:Q.experimental_providerMetadata,isContinued:Q.isContinued};await(z==null?void 0:z(We)),Pe.push(We),ee=[],J=[],F="",X=[],fe=[],te=[],re=void 0,Ee!=="done"&&(_e=Ee),Ee!=="continue"&&(U.messages.push(...xe),K="")}Q.type==="finish"&&(U.id=Q.response.id,U.timestamp=Q.response.timestamp,U.modelId=Q.response.modelId,U.headers=Q.response.headers,be=Q.usage,ue=Q.finishReason)},async flush(se){var ie;try{if(Pe.length===0)return;const Q=Pe[Pe.length-1];Ae.warningsPromise.resolve(Q.warnings),Ae.requestPromise.resolve(Q.request),Ae.responsePromise.resolve(Q.response),Ae.toolCallsPromise.resolve(Q.toolCalls),Ae.toolResultsPromise.resolve(Q.toolResults),Ae.providerMetadataPromise.resolve(Q.experimental_providerMetadata),Ae.reasoningPromise.resolve(Q.reasoning),Ae.reasoningDetailsPromise.resolve(Q.reasoningDetails);const xe=ue??"unknown",Me=be??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ae.finishReasonPromise.resolve(xe),Ae.usagePromise.resolve(Me),Ae.textPromise.resolve(q),Ae.sourcesPromise.resolve(ae),Ae.filesPromise.resolve(Q.files),Ae.stepsPromise.resolve(Pe),await(L==null?void 0:L({finishReason:xe,logprobs:void 0,usage:Me,text:q,reasoning:Q.reasoning,reasoningDetails:Q.reasoningDetails,files:Q.files,sources:Q.sources,toolCalls:Q.toolCalls,toolResults:Q.toolResults,request:(ie=Q.request)!=null?ie:{},response:Q.response,warnings:Q.warnings,providerMetadata:Q.providerMetadata,experimental_providerMetadata:Q.experimental_providerMetadata,steps:Pe})),Ne.setAttributes(nh({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>{var Ee;return(Ee=Q.toolCalls)!=null&&Ee.length?JSON.stringify(Q.toolCalls):void 0}},"ai.usage.promptTokens":Me.promptTokens,"ai.usage.completionTokens":Me.completionTokens}}))}catch(Q){se.error(Q)}finally{Ne.end()}}}),Ce=Xpe();this.addStream=Ce.addStream,this.closeStream=Ce.close;let Fe=Ce.stream;for(const se of p)Fe=Fe.pipeThrough(se({tools:u,stopStream(){Ce.terminate()}}));this.baseStream=Fe.pipeThrough(xme(_)).pipeThrough(Re);const{maxRetries:Qe,retry:Le}=spe({maxRetries:a}),Ie=dpe(t),V=lpe({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:Qe}}),me=qpe({prompt:{system:(Y=_==null?void 0:_.injectIntoSystemPrompt({system:o,model:e}))!=null?Y:o,prompt:s,messages:l},tools:u}),Ae=this;dC({name:"ai.streamText",attributes:nh({telemetry:t,attributes:{...uC({operationId:"ai.streamText",telemetry:t}),...V,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:l})},"ai.settings.maxSteps":b}}),tracer:Ie,endWhenDone:!1,fn:async se=>{Ne=se;async function ie({currentStep:Q,responseMessages:xe,usage:Me,stepType:Ee,previousStepText:We,hasLeadingWhitespace:kt,messageId:at}){var _t;const Dt=xe.length===0?me.type:"messages",jt=[...me.messages,...xe],Gt=await Epe({prompt:{type:Dt,system:me.system,messages:jt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(_t=e.supportsUrl)==null?void 0:_t.bind(e)}),ye={type:"regular",...ame({tools:u,toolChoice:d,activeTools:g})},{result:{stream:I,warnings:G,rawResponse:de,request:Oe},doStreamSpan:ve,startTimestampMs:ke}=await Le(()=>dC({name:"ai.streamText.doStream",attributes:nh({telemetry:t,attributes:{...uC({operationId:"ai.streamText.doStream",telemetry:t}),...V,"ai.prompt.format":{input:()=>Dt},"ai.prompt.messages":{input:()=>JSON.stringify(Gt)},"ai.prompt.tools":{input:()=>{var At;return(At=ye.tools)==null?void 0:At.map(Mt=>JSON.stringify(Mt))}},"ai.prompt.toolChoice":{input:()=>ye.toolChoice!=null?JSON.stringify(ye.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ie,endWhenDone:!1,fn:async At=>({startTimestampMs:E(),doStreamSpan:At,result:await e.doStream({mode:ye,...Tpe(r),inputFormat:Dt,responseFormat:_==null?void 0:_.responseFormat({model:e}),prompt:Gt,providerMetadata:S,abortSignal:i,headers:n})})})),le=bme({tools:u,generatorStream:I,toolCallStreaming:h,tracer:Ie,telemetry:t,system:o,messages:jt,repairToolCall:v,abortSignal:i}),ft=Oe??{},vt=[],M=[],Be=[],tt=[];let ge,je="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Nt,pe=!0,H="",B=Ee==="continue"?We:"",W,he={id:k(),timestamp:C(),modelId:e.modelId},Te="",He=!1,pt=!0,Vt=!1;async function ut({controller:At,chunk:Mt}){At.enqueue(Mt),H+=Mt.textDelta,B+=Mt.textDelta,He=!0,Vt=Mt.textDelta.trimEnd()!==Mt.textDelta}Ae.addStream(le.pipeThrough(new TransformStream({async transform(At,Mt){var Xt,Tn,zn;if(pe){const vr=E()-ke;pe=!1,ve.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":vr}),ve.setAttributes({"ai.response.msToFirstChunk":vr}),Mt.enqueue({type:"step-start",messageId:at,request:ft,warnings:G??[]})}if(At.type==="text-delta"&&At.textDelta.length===0)return;const br=At.type;switch(br){case"text-delta":{if(x){const vr=pt&&kt?At.textDelta.trimStart():At.textDelta;if(vr.length===0)break;pt=!1,Te+=vr;const Dn=ome(Te);Dn!=null&&(Te=Dn.suffix,await ut({controller:Mt,chunk:{type:"text-delta",textDelta:Dn.prefix+Dn.whitespace}}))}else await ut({controller:Mt,chunk:At});break}case"reasoning":{Mt.enqueue(At),ge==null?(ge={type:"text",text:At.textDelta},Be.push(ge)):ge.text+=At.textDelta;break}case"reasoning-signature":{if(Mt.enqueue(At),ge==null)throw new mme({chunk:At,message:"reasoning-signature without reasoning"});ge.signature=At.signature,ge=void 0;break}case"redacted-reasoning":{Mt.enqueue(At),Be.push({type:"redacted",data:At.data});break}case"tool-call":{Mt.enqueue(At),vt.push(At);break}case"tool-result":{Mt.enqueue(At),M.push(At);break}case"response-metadata":{he={id:(Xt=At.id)!=null?Xt:he.id,timestamp:(Tn=At.timestamp)!=null?Tn:he.timestamp,modelId:(zn=At.modelId)!=null?zn:he.modelId};break}case"finish":{Ke=At.usage,je=At.finishReason,Nt=At.experimental_providerMetadata,W=At.logprobs;const vr=E()-ke;ve.addEvent("ai.stream.finish"),ve.setAttributes({"ai.response.msToFinish":vr,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/vr});break}case"file":{tt.push(At),Mt.enqueue(At);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Mt.enqueue(At);break}case"error":{Mt.enqueue(At),je="error";break}default:{const vr=br;throw new Error(`Unknown chunk type: ${vr}`)}}},async flush(At){const Mt=vt.length>0?JSON.stringify(vt):void 0;let Xt="done";Q+1<b&&(x&&je==="length"&&vt.length===0?Xt="continue":vt.length>0&&M.length===vt.length&&(Xt="tool-result")),x&&Te.length>0&&(Xt!=="continue"||Ee==="continue"&&!He)&&(await ut({controller:At,chunk:{type:"text-delta",textDelta:Te}}),Te="");try{ve.setAttributes(nh({telemetry:t,attributes:{"ai.response.finishReason":je,"ai.response.text":{output:()=>H},"ai.response.toolCalls":{output:()=>Mt},"ai.response.id":he.id,"ai.response.model":he.modelId,"ai.response.timestamp":he.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[je],"gen_ai.response.id":he.id,"gen_ai.response.model":he.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{ve.end()}At.enqueue({type:"step-finish",finishReason:je,usage:Ke,providerMetadata:Nt,experimental_providerMetadata:Nt,logprobs:W,request:ft,response:{...he,headers:de==null?void 0:de.headers},warnings:G,isContinued:Xt==="continue",messageId:at});const Tn=Gpe(Me,Ke);if(Xt==="done")At.enqueue({type:"finish",finishReason:je,usage:Tn,providerMetadata:Nt,experimental_providerMetadata:Nt,logprobs:W,response:{...he,headers:de==null?void 0:de.headers}}),Ae.closeStream();else{if(Ee==="continue"){const zn=xe[xe.length-1];typeof zn.content=="string"?zn.content+=H:zn.content.push({text:H,type:"text"})}else xe.push(...yj({text:H,files:tt,reasoning:Be,tools:u??{},toolCalls:vt,toolResults:M,messageId:at,generateMessageId:R}));await ie({currentStep:Q+1,responseMessages:xe,usage:Tn,stepType:Xt,previousStepText:B,hasLeadingWhitespace:Vt,messageId:Xt==="continue"?at:R()})}}})))}await ie({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:R()})}}).catch(se=>{Ae.addStream(new ReadableStream({start(ie){ie.enqueue({type:"error",error:se}),ie.close()}})),Ae.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return GE(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return GE(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new eme;return GE(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,o)=>{const s=i.type;switch(s){case"text-delta":{o.enqueue(ei("text",i.textDelta));break}case"reasoning":{n&&o.enqueue(ei("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&o.enqueue(ei("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&o.enqueue(ei("reasoning_signature",{signature:i.signature}));break}case"file":{o.enqueue(ei("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&o.enqueue(ei("source",i.source));break}case"tool-call-streaming-start":{o.enqueue(ei("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{o.enqueue(ei("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{o.enqueue(ei("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{o.enqueue(ei("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{o.enqueue(ei("error",e(i.error)));break}case"step-start":{o.enqueue(ei("start_step",{messageId:i.messageId}));break}case"step-finish":{o.enqueue(ei("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&o.enqueue(ei("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const l=s;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:l,experimental_sendFinish:u}={}){uj({response:e,status:t,statusText:n,headers:cj(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){uj({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:cj(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?kA(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:l}),{status:t,statusText:n,headers:ow(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:ow(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};function Eme(e,t){if(t.length===0)return null;const n=e.indexOf(t);if(n!==-1)return n;for(let r=e.length-1;r>=0;r--){const a=e.substring(r);if(t.startsWith(a))return r}return null}function Cme({tagName:e,separator:t=`
`,startWithReasoning:n=!1}){const r=`<${e}>`,a=`</${e}>`;return{middlewareVersion:"v1",wrapGenerate:async({doGenerate:i})=>{const{text:o,...s}=await i();if(o==null)return{text:o,...s};const l=n?r+o:o,u=new RegExp(`${r}(.*?)${a}`,"gs"),d=Array.from(l.matchAll(u));if(!d.length)return{text:l,...s};const h=d.map(g=>g[1]).join(t);let p=l;for(let g=d.length-1;g>=0;g--){const v=d[g],b=p.slice(0,v.index),_=p.slice(v.index+v[0].length);p=b+(b.length>0&&_.length>0?t:"")+_}return{...s,text:p,reasoning:h}},wrapStream:async({doStream:i})=>{const{stream:o,...s}=await i();let l=!0,u=!0,d=!1,h=n,p="";return{stream:o.pipeThrough(new TransformStream({transform:(g,v)=>{if(g.type!=="text-delta"){v.enqueue(g);return}p+=g.textDelta;function b(_){if(_.length>0){const x=d&&(h?!l:!u)?t:"";v.enqueue({type:h?"reasoning":"text-delta",textDelta:x+_}),d=!1,h?l=!1:u=!1}}do{const _=h?a:r,x=Eme(p,_);if(x==null){b(p),p="";break}if(b(p.slice(0,x)),x+_.length<=p.length)p=p.slice(x+_.length),h=!h,d=!0;else{p=p.slice(x);break}}while(!0)}})),...s}}}}var kme=({model:e,middleware:t,modelId:n,providerId:r})=>N$(t).reverse().reduce((a,i)=>Ame({model:a,middleware:i,modelId:n,providerId:r}),e),Ame=({model:e,middleware:{transformParams:t,wrapGenerate:n,wrapStream:r},modelId:a,providerId:i})=>{var o;async function s({params:l,type:u}){return t?await t({params:l,type:u}):l}return{specificationVersion:"v1",provider:i??e.provider,modelId:a??e.modelId,defaultObjectGenerationMode:e.defaultObjectGenerationMode,supportsImageUrls:e.supportsImageUrls,supportsUrl:(o=e.supportsUrl)==null?void 0:o.bind(e),supportsStructuredOutputs:e.supportsStructuredOutputs,async doGenerate(l){const u=await s({params:l,type:"generate"}),d=async()=>e.doGenerate(u);return n?n({doGenerate:d,doStream:async()=>e.doStream(u),params:u,model:e}):d()},async doStream(l){const u=await s({params:l,type:"stream"}),d=async()=>e.doGenerate(u),h=async()=>e.doStream(u);return r?r({doGenerate:d,doStream:h,params:u,model:e}):h()}}},Tme=$.object({name:$.string(),version:$.string()}).passthrough(),AA=$.object({_meta:$.optional($.object({}).passthrough())}).passthrough(),z0=AA,Nme=$.object({method:$.string(),params:$.optional(AA)}),Rme=$.object({experimental:$.optional($.object({}).passthrough()),logging:$.optional($.object({}).passthrough()),prompts:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough()),resources:$.optional($.object({subscribe:$.optional($.boolean()),listChanged:$.optional($.boolean())}).passthrough()),tools:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough())}).passthrough();z0.extend({protocolVersion:$.string(),capabilities:Rme,serverInfo:Tme,instructions:$.optional($.string())});var Ime=z0.extend({nextCursor:$.optional($.string())}),Ome=$.object({name:$.string(),description:$.optional($.string()),inputSchema:$.object({type:$.literal("object"),properties:$.optional($.object({}).passthrough())}).passthrough()}).passthrough();Ime.extend({tools:$.array(Ome)});var jme=$.object({type:$.literal("text"),text:$.string()}).passthrough(),Dme=$.object({type:$.literal("image"),data:$.string().base64(),mimeType:$.string()}).passthrough(),R$=$.object({uri:$.string(),mimeType:$.optional($.string())}).passthrough(),Mme=R$.extend({text:$.string()}),Pme=R$.extend({blob:$.string().base64()}),Fme=$.object({type:$.literal("resource"),resource:$.union([Mme,Pme])}).passthrough();z0.extend({content:$.array($.union([jme,Dme,Fme])),isError:$.boolean().default(!1).optional()}).or(z0.extend({toolResult:$.unknown()}));var T1="2.0",Lme=$.object({jsonrpc:$.literal(T1),id:$.union([$.string(),$.number().int()])}).merge(Nme).strict(),$me=$.object({jsonrpc:$.literal(T1),id:$.union([$.string(),$.number().int()]),result:z0}).strict(),Bme=$.object({jsonrpc:$.literal(T1),id:$.union([$.string(),$.number().int()]),error:$.object({code:$.number().int(),message:$.string(),data:$.optional($.unknown())})}).strict(),zme=$.object({jsonrpc:$.literal(T1)}).merge($.object({method:$.string(),params:$.optional(AA)})).strict();$.union([Lme,zme,$me,Bme]);var Ume={};CA(Ume,{mergeIntoDataStream:()=>Vme,toDataStream:()=>Hme,toDataStreamResponse:()=>qme});function I$(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function TA(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&bj((a=n.data)==null?void 0:a.chunk,r);return}bj(n,r)}})).pipeThrough(I$(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(ei("text",n))}}))}function Hme(e,t){return TA(e,t).pipeThrough(new TextEncoderStream)}function qme(e,t){var n;const r=TA(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,o=a?kA(a.stream,r):r;return new Response(o,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:ow(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Vme(e,t){t.dataStream.merge(TA(e,t.callbacks))}function bj(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var Gme={};CA(Gme,{mergeIntoDataStream:()=>Zme,toDataStream:()=>Wme,toDataStreamResponse:()=>Kme});function NA(e,t){const n=Yme();return fV(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(I$(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(ei("text",r))}}))}function Wme(e,t){return NA(e,t).pipeThrough(new TextEncoderStream)}function Kme(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,o=NA(e,i).pipeThrough(new TextEncoderStream),s=a?kA(a.stream,o):o;return new Response(s,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:ow(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Zme(e,t){t.dataStream.merge(NA(e,t.callbacks))}function Yme(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class Xme{static async executeInteraction(t,n,r){let a,i=!1;try{a=await _me(n);for await(const o of a.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(o.type){case"text-delta":r.onChunk(o.textDelta);break;case"tool-call":r.onToolCall(o);break;case"tool-result":r.onToolResult(o);break;case"finish":i=!0,r.onFinish({finishReason:o.finishReason,usage:o.usage,providerMetadata:o.providerMetadata});break;case"error":r.onError(new Error(`AI Stream Error Part: ${o.error instanceof Error?o.error.message:o.error}`));return;default:break}}!n.abortSignal.aborted&&!i&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(o){console.error(`[AIService] Error during streamText call for ${t}:`,o),o instanceof Error&&o.name==="AbortError"||r.onError(o instanceof Error?o:new Error(String(o)))}finally{console.log(`[AIService] Stream processing loop finished for ${t}.`)}}}const pC={_activeControllers:new Map,_streamingToolData:new Map,async startInteraction(e,t,n){var Y,F,K,q,fe,te,re,X,ae;console.log("[InteractionService] startInteraction called",e,t,n);const r=await I2(av.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(r===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const a=r&&typeof r=="object"?r.prompt:e,i=Co(),o=new AbortController;this._activeControllers.set(i,o),this._streamingToolData.set(i,{calls:[],results:[]});const s=or.getState(),u=s.interactions.filter(U=>U.conversationId===t),d=u.reduce((U,ee)=>Math.max(U,ee.index),-1)+1,h=u.length>0?u[u.length-1].id:null,p={id:i,conversationId:t,type:"message.user_assistant",prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...a.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0},index:d,parentId:h};s._addInteractionToState(p),s._addStreamingId(i),Wt.saveInteraction({...p}).catch(U=>{console.error(`[InteractionService] Failed initial persistence for ${i}`,U)}),Ct.emit(xt.INTERACTION_STARTED,{interactionId:i,conversationId:t,type:p.type});const g=(Y=a.metadata)==null?void 0:Y.modelId;if(!g)return this._finalizeInteraction(i,"ERROR",new Error("No model ID specified in prompt metadata.")),null;const{providerId:v,modelId:b}=Yl(g);if(!v||!b)return this._finalizeInteraction(i,"ERROR",new Error(`Invalid combined model ID format: ${g}`)),null;const _=Pn.getState().dbProviderConfigs.find(U=>U.id===v);if(!_)return this._finalizeInteraction(i,"ERROR",new Error(`Provider configuration not found for ID: ${v}`)),null;const x=Pn.getState().getApiKeyForProvider(v),S=WM(_,b,x);if(!S)return this._finalizeInteraction(i,"ERROR",new Error(`Failed to instantiate model instance for ${g} from provider ${_.name}`)),null;console.log(`[InteractionService] Using model instance for ${g}`);const E=Pr.getState().getRegisteredTools(),k=(((F=a.metadata)==null?void 0:F.enabledTools)??[]).reduce((U,ee)=>{const J=E[ee];if(J!=null&&J.implementation){const ue={...J.definition};ue.execute=async be=>{const _e=or.getState().currentConversationId,Pe=_e?mn.getState().getConversationById(_e):null,Ne=(Pe==null?void 0:Pe.projectId)??"orphan";let Re;try{console.log(`[InteractionService Tool Execute] Ensuring VFS ready for key "${Ne}"...`),Re=await Ko.getState().initializeVFS(Ne,{force:!0}),console.log(`[InteractionService Tool Execute] VFS ready for key "${Ne}".`)}catch(Ce){return console.error(`[InteractionService Tool Execute] VFS initialization error for key "${Ne}":`,Ce),{_isError:!0,error:`Filesystem error: ${Ce.message}`}}try{const Ce=IY(),Fe=J.definition.parameters.parse(be),Qe=J.implementation,Le={...Ce,fsInstance:Re};return await Qe(Fe,Le)}catch(Ce){const Fe=Ce instanceof Error?Ce.message:String(Ce);return Ce instanceof $.ZodError?{_isError:!0,error:`Invalid arguments: ${Ce.errors.map(Qe=>`${Qe.path.join(".")} (${Qe.message})`).join(", ")}`}:{_isError:!0,error:Fe}}},U[ee]=ue}return U},{}),R=((K=a.parameters)==null?void 0:K.maxSteps)??Zr.getState().toolMaxSteps,j=Cme({tagName:"reasoning"}),L={model:kme({model:S,middleware:j}),messages:a.messages,abortSignal:o.signal,system:a.system,temperature:(q=a.parameters)==null?void 0:q.temperature,maxTokens:(fe=a.parameters)==null?void 0:fe.max_tokens,topP:(te=a.parameters)==null?void 0:te.top_p,topK:(re=a.parameters)==null?void 0:re.top_k,presencePenalty:(X=a.parameters)==null?void 0:X.presence_penalty,frequencyPenalty:(ae=a.parameters)==null?void 0:ae.frequency_penalty,maxSteps:R,...Object.keys(k).length>0&&{tools:k},toolChoice:a.toolChoice??(Object.keys(k).length>0?"auto":"none")},z={onChunk:U=>this._handleChunk(i,U),onToolCall:U=>this._handleToolCall(i,U),onToolResult:U=>this._handleToolResult(i,U),onFinish:U=>this._handleFinish(i,U),onError:U=>this._handleError(i,U)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${i}`),Xme.executeInteraction(i,L,z).catch(U=>{console.error(`[InteractionService] Error calling AIService.executeInteraction for ${i}:`,U),this._handleError(i,U instanceof Error?U:new Error("Failed to start AI execution"))}),i},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);t&&!t.signal.aborted?(t.abort(),lt.info("Interaction cancelled.")):(console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`),or.getState().streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"))))},async _handleChunk(e,t){const n={interactionId:e,chunk:t},r=await I2(av.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const a=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;or.getState().appendInteractionResponseChunk(e,a),Ct.emit(xt.INTERACTION_STREAM_CHUNK,{interactionId:e,chunk:a})}},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),or.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),or.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t){console.log(`[InteractionService] Finishing interaction ${e}. Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,t)},_handleError(e,t){console.error(`[InteractionService] Handling error for interaction ${e}:`,t);const n=t.name==="AbortError";this._finalizeInteraction(e,n?"CANCELLED":"ERROR",n?void 0:t)},_finalizeInteraction(e,t,n,r){var v;const a=or.getState(),i=a.interactions.find(b=>b.id===e);if(!i||i.status!=="STREAMING"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e);return}const o=a.activeStreamBuffers[e]??"",s=this._streamingToolData.get(e)||{calls:[],results:[]},l=i.metadata||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}`);const u=r==null?void 0:r.reasoning,d={status:t,endedAt:new Date,response:o||null,metadata:{...l,...(r==null?void 0:r.usage)&&{promptTokens:r.usage.promptTokens,completionTokens:r.usage.completionTokens,totalTokens:r.usage.totalTokens},...(r==null?void 0:r.providerMetadata)&&{providerMetadata:r.providerMetadata},toolCalls:s.calls,toolResults:s.results,reasoning:u,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};a._updateInteractionInState(e,d),a._removeStreamingId(e);const h=or.getState().interactions.find(b=>b.id===e);h?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((v=h.response)==null?void 0:v.length)??0}`),Wt.saveInteraction({...h}).catch(b=>{console.error(`[InteractionService] Failed final persistence for ${e}`,b)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let p=[],g=[];try{p=s.calls.map(b=>JSON.parse(b)),g=s.results.map(b=>JSON.parse(b))}catch(b){console.error("[InteractionService] Failed to parse tool strings for event emitter:",b)}Ct.emit(xt.INTERACTION_COMPLETED,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:p,toolResults:g}),this._activeControllers.delete(e),this._streamingToolData.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},Ts=(e,t)=>{Ct.emit(xt.PROMPT_PARAMS_CHANGED,{params:{[e]:t}})},Ea=rs(as((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),Ts("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),Ts("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),Ts("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),Ts("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),Ts("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),Ts("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),Ts("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),Ts("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),Ts("webSearchEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),Ts("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),a={};let i=!1;r.modelId!==n.modelId&&(a.modelId=n.modelId,i=!0),r.temperature!==n.temperature&&(a.temperature=n.temperature,i=!0),r.maxTokens!==n.maxTokens&&(a.maxTokens=n.maxTokens,i=!0),r.topP!==n.topP&&(a.topP=n.topP,i=!0),r.topK!==n.topK&&(a.topK=n.topK,i=!0),r.presencePenalty!==n.presencePenalty&&(a.presencePenalty=n.presencePenalty,i=!0),r.frequencyPenalty!==n.frequencyPenalty&&(a.frequencyPenalty=n.frequencyPenalty,i=!0),i&&(e(a),Ct.emit(xt.PROMPT_PARAMS_CHANGED,{params:a}))},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let a=!1;n.temperature!==null&&(r.temperature=null,a=!0),n.maxTokens!==null&&(r.maxTokens=null,a=!0),n.topP!==null&&(r.topP=null,a=!0),n.topK!==null&&(r.topK=null,a=!0),n.presencePenalty!==null&&(r.presencePenalty=null,a=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,a=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,a=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,a=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,a=!0),a&&(e(r),Ct.emit(xt.PROMPT_PARAMS_CHANGED,{params:r}))}}))),vj={async submitPrompt(e){var S,E,C;console.log("[ConversationService] submitPrompt called",e);const t=or.getState(),n=ni.getState(),r=Ea.getState(),a=mn.getState(),i=t.currentConversationId;if(!i){lt.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const o=a.getConversationById(i),s=(o==null?void 0:o.projectId)??null,u=t.interactions.filter(k=>k.status==="COMPLETED"&&k.type==="message.user_assistant"),d=sI(u),h=[];e.content&&h.push({type:"text",text:e.content});const p=((S=e.metadata)==null?void 0:S.attachedFiles)??[];if(p.length>0){const k=await this._processFilesForPrompt(p,i);h.unshift(...k)}h.length>0?d.push({role:"user",content:h}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");const g=(E=e.metadata)==null?void 0:E.turnSystemPrompt,v=n.getEffectiveProjectSettings(s),b=g??v.systemPrompt??void 0,_={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(_).forEach(k=>{(_[k]===null||_[k]===void 0)&&delete _[k]});const x={system:b,messages:d,parameters:_,metadata:{...(({turnSystemPrompt:k,...R})=>R)(e.metadata??{}),modelId:r.modelId,attachedFiles:(C=e.metadata.attachedFiles)==null?void 0:C.map(({contentBase64:k,contentText:R,...j})=>j)}};try{await pC.startInteraction(x,i,e)}catch(k){throw console.error("[ConversationService] Error starting interaction:",k),lt.error(`Failed to start interaction: ${k instanceof Error?k.message:String(k)}`),k}},async regenerateInteraction(e){var C,k;console.log("[ConversationService] regenerateInteraction called",e);const t=or.getState(),n=ni.getState(),r=Ea.getState(),a=mn.getState(),i=t.interactions.find(R=>R.id===e);if(!i||!i.prompt){lt.error("Cannot regenerate: Original interaction data missing.");return}const o=i.prompt,s=i.conversationId,l=a.getConversationById(s),u=(l==null?void 0:l.projectId)??null,d=i.index,h=t.interactions.filter(R=>R.conversationId===s&&R.index<d&&R.status==="COMPLETED"&&R.type==="message.user_assistant").sort((R,j)=>R.index-j.index),p=sI(h),g=[];o.content&&g.push({type:"text",text:o.content});const v=((C=o.metadata)==null?void 0:C.attachedFiles)??[];if(v.length>0){const R=await this._processFilesForPrompt(v,s);g.unshift(...R)}g.length>0?p.push({role:"user",content:g}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");const b=(k=o.metadata)==null?void 0:k.turnSystemPrompt,_=n.getEffectiveProjectSettings(u),x=b??_.systemPrompt??void 0,S={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...o.parameters??{}};Object.keys(S).forEach(R=>{(S[R]===null||S[R]===void 0)&&delete S[R]});const E={system:x,messages:p,parameters:S,metadata:{...(({turnSystemPrompt:R,...j})=>j)(o.metadata??{}),modelId:r.modelId,regeneratedFromId:e,attachedFiles:v.map(({contentBase64:R,contentText:j,...O})=>O)}};try{await pC.startInteraction(E,s,o)}catch(R){throw console.error("[ConversationService] Error starting regeneration interaction:",R),lt.error(`Failed to start regeneration: ${R instanceof Error?R.message:String(R)}`),R}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(i=>i.source==="vfs");let a;if(r.length>0){const i=mn.getState().getConversationById(t),o=(i==null?void 0:i.projectId)??"orphan";try{a=await this._ensureVfsReady(o)}catch{lt.error(`Filesystem unavailable for key ${o}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),a=void 0}}for(const i of e){let o=null;try{if(i.source==="direct")o=oI(i);else if(i.source==="vfs"&&a&&i.path){console.log(`[ConversationService] Fetching VFS file: ${i.path}`);const s=await Ud(i.path,{fsInstance:a});o=oI({...i,contentBytes:s})}else if(i.source==="vfs"&&!a)continue;o&&n.push(o)}catch(s){console.error(`[ConversationService] Error processing file ${i.name}:`,s),n.push({type:"text",text:`[Error processing file: ${i.name}]`})}}return n},async _ensureVfsReady(e){console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`);try{const t=await Ko.getState().initializeVFS(e,{force:!0});return console.log(`[ConversationService] VFS ready for key "${e}".`),t}catch(t){throw console.error(`[ConversationService] Failed to ensure VFS ready for key ${e}:`,t),t}}},U0=rs(as((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Wt.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),lt.error(r)}},addDbMod:async n=>{const r=Co(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((o,s)=>o.loadOrder-s.loadOrder)});try{return await Wt.saveMod(a),lt.success(`Mod "${a.name}" added.`),r}catch(i){const o="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(s=>{s.dbMods=s.dbMods.filter(l=>l.id!==r),s.error=o}),lt.error(o),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(s=>{i=s.dbMods.findIndex(l=>l.id===n),i!==-1?(a={...s.dbMods[i]},s.dbMods[i]={...s.dbMods[i],...r},r.loadOrder!==void 0&&s.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const o=i!==-1?t().dbMods[i]:void 0;if(o)try{await Wt.saveMod(o),lt.success(`Mod "${o.name}" updated.`)}catch(s){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",s),e(u=>{const d=u.dbMods.findIndex(h=>h.id===n);d!==-1&&a&&(u.dbMods[d]=a,u.dbMods.sort((h,p)=>h.loadOrder-p.loadOrder)),u.error=l}),lt.error(l),s}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(o=>o.id!==n)}));try{await Wt.deleteMod(n),lt.success(`Mod "${a}" deleted.`)}catch(i){const o="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(s=>{s.dbMods.push(r),s.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder),s.error=o}),lt.error(o),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function wj(e){const t=e.id,n=e.name,r=Pr.getState(),a=U0.getState();return{modId:t,modName:n,registerPromptControl:o=>r.registerPromptControl(o),registerChatControl:o=>{const s={...o,status:o.status??(()=>"ready")};return r.registerChatControl(s)},registerTool:(o,s,l)=>(console.log(`[${n}] Registering tool: ${o}`),r.registerTool(t,o,s,l)),on:(o,s)=>(Ct.on(o,s),()=>Ct.off(o,s)),addMiddleware:(o,s)=>r.registerMiddleware(o,t,s),registerSettingsTab:o=>(a._addSettingsTab(o),()=>a._removeSettingsTab(o.id)),getContextSnapshot:()=>{const o=or.getState(),s=mn.getState(),l=Zr.getState(),u=Pn.getState(),{providerId:d}=Yl(u.selectedModelId),h=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(o.currentConversationId===h?o.interactions.map(p=>Object.freeze({...p})):[]),isStreaming:o.status==="streaming",selectedProviderId:d,selectedModelId:u.selectedModelId,activeSystemPrompt:l.globalSystemPrompt,temperature:l.temperature,maxTokens:l.maxTokens,theme:l.theme})},showToast:(o,s)=>{lt[o](`[${n}] ${s}`)},log:(o,...s)=>{console[o](`[Mod: ${n}]`,...s)}}}async function Jme(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,o=null;try{if(i=wj(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const u=await fetch(r.sourceUrl);if(!u.ok)throw new Error(`Failed to fetch mod script: ${u.status} ${u.statusText}`);a=await u.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(u){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,u),u}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){o=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),lt.error(`Error loading mod "${r.name}": ${o instanceof Error?o.message:o}`)}i||(i=wj(r));const s={id:r.id,name:r.name,api:i,error:o??void 0};return Ct.emit(s.error?xt.MOD_ERROR:xt.MOD_LOADED,{id:r.id,name:r.name,error:s.error}),s}));return Ct.emit(xt.APP_LOADED,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var Qme=(e,t,n,r,a,i,o,s)=>{let l=document.documentElement,u=["light","dark"];function d(g){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",_=b&&i?a.map(x=>i[x]||x):a;b?(l.classList.remove(..._),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(v,g)}),h(g)}function h(g){s&&u.includes(g)&&(l.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(t)||n,v=o&&g==="system"?p():g;d(v)}catch{}},e0e=T.createContext(void 0),t0e={setTheme:e=>{},themes:[]},n0e=()=>{var e;return(e=T.useContext(e0e))!=null?e:t0e};T.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:s,nonce:l,scriptProps:u})=>{let d=JSON.stringify([n,t,i,e,s,o,r,a]).slice(1,-1);return T.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${Qme.toString()})(${d})`}})});const r0e=({...e})=>{const{theme:t="system"}=n0e();return y.jsx(AY,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function lp({className:e,...t}){return y.jsx("textarea",{"data-slot":"textarea",className:Rt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const O$=T.memo(T.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,onValueChange:i,...o},s)=>{const l=T.useRef(null),[u,d]=T.useState(e);T.useImperativeHandle(s,()=>({getValue:()=>u,focus:()=>{var b;return(b=l.current)==null?void 0:b.focus()}}));const{focusInputOnNextRender:h,setFocusInputFlag:p}=ha(hn(b=>({focusInputOnNextRender:b.focusInputOnNextRender,setFocusInputFlag:b.setFocusInputFlag})));T.useEffect(()=>{h&&l.current&&(p(!1),requestAnimationFrame(()=>{var b;(b=l.current)==null||b.focus()}))},[h,p]);const g=b=>{if(b.key==="Enter"&&!b.shiftKey&&!n){b.preventDefault();const _=Jc.getState().attachedFilesMetadata.length>0;(u.trim().length>0||_)&&(t(),d(""),i&&i(""))}},v=b=>{const _=b.target.value;d(_),i&&i(_)};return T.useEffect(()=>{const b=l.current;if(b){b.style.height="auto";const _=b.scrollHeight,x=250;b.style.height=`${Math.min(_,x)}px`,b.style.overflowY=_>x?"auto":"hidden"}},[u]),T.useEffect(()=>{d(e),i&&i(e)},[e,i]),y.jsx(lp,{ref:l,value:u,onChange:v,onKeyDown:g,disabled:n,placeholder:r,rows:1,className:Rt("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...o})}));O$.displayName="InputArea";const j$=(e,t)=>{if(!t)return null;let n=Hm,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Gn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=pd,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=PC,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=OC,r="text-green-500",a=`Synced with ${t}`;break;default:n=Hm,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(n,{className:Rt("h-3 w-3 ml-1 flex-shrink-0",r)})}),y.jsx(ar,{side:"right",children:a})]})})},lw=T.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,originalName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:R,editInputRef:j})=>{const O=e.id===n,L=e.itemType==="project",z=e.id===v&&e.itemType===b,Y=L&&d.has(e.id),{projects:F,conversations:K}=L?p(e.id,g):{projects:[],conversations:[]},q=F.length>0||K.length>0,fe=!L&&e.syncRepoId?r[e.id]:void 0,te=!L&&e.syncRepoId?a.get(e.syncRepoId):void 0,re=!L&&te?j$(fe,te):null,X=ha(Ne=>Ne.openProjectSettingsModal),ae=()=>{z||(L&&q&&h(e.id),i(e.id,e.itemType))},U=Ne=>{Ne.stopPropagation(),L?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&s(e.id,Ne):o(e.id,Ne)},ee=Ne=>{Ne.stopPropagation(),E(e)},J=Ne=>{Ne.stopPropagation(),L&&X(e.id)},ue=Ne=>{Ne.key==="Enter"?(Ne.preventDefault(),C()):Ne.key==="Escape"&&k()},be=L?e.name:e.title,_e=R?Gn:Ks,Pe=R?"h-3 w-3 animate-spin":"h-3 w-3";return y.jsxs(y.Fragment,{children:[y.jsxs("li",{className:Rt("flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!z&&"hover:bg-muted/50 hover:text-primary/80",O&&!z?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",z&&"bg-muted ring-1 ring-primary",!z&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ae,children:[y.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[L&&q&&y.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:Ne=>{Ne.stopPropagation(),h(e.id)},children:Y?y.jsx(Zs,{className:"h-3 w-3 text-muted-foreground"}):y.jsx(h6,{className:"h-3 w-3 text-muted-foreground"})}),L&&!q&&y.jsx("span",{className:"w-3 flex-shrink-0"}),L?y.jsx(Z0,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):y.jsx(PH,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),z?y.jsx(Jn,{ref:j,value:x,onChange:Ne=>S(Ne.target.value),onKeyDown:ue,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:Ne=>Ne.stopPropagation(),disabled:R}):y.jsx("span",{className:"truncate pr-1",children:be}),re]}),y.jsx("div",{className:"flex items-center flex-shrink-0",children:z?y.jsxs(y.Fragment,{children:[y.jsx(ur,{tooltipText:"Save (Enter)",onClick:Ne=>{Ne.stopPropagation(),C()},disabled:R||!x.trim(),"aria-label":"Save changes",icon:y.jsx(_e,{}),iconClassName:Pe,className:"h-5 w-5 text-green-500 hover:text-green-600"}),y.jsx(ur,{tooltipText:"Cancel (Esc)",onClick:Ne=>{Ne.stopPropagation(),k()},disabled:R,"aria-label":"Cancel edit",icon:y.jsx(Zl,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):y.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[L&&y.jsx(ur,{tooltipText:"Project Settings",onClick:J,"aria-label":`Settings for ${be}`,icon:y.jsx(JU,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),y.jsx(ur,{tooltipText:"Edit",onClick:ee,"aria-label":`Edit ${be}`,icon:y.jsx(MC,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),L?y.jsx(ur,{tooltipText:"Export Project (JSON)",onClick:Ne=>u(e.id,Ne),"aria-label":`Export project ${be}`,icon:y.jsx(rH,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):y.jsxs("div",{className:"relative group/export",children:[y.jsx(ur,{tooltipText:"Export Conversation","aria-label":`Export ${be}`,icon:y.jsx(ah,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),y.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:Ne=>Ne.stopPropagation(),children:[y.jsx(Bt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ne=>l(e.id,"json",Ne),children:"JSON"}),y.jsx(Bt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ne=>l(e.id,"md",Ne),children:"MD"})]})]}),y.jsx(ur,{tooltipText:"Delete",onClick:U,"aria-label":`Delete ${be}`,icon:y.jsx(Ho,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]},e.id),L&&Y&&y.jsxs(y.Fragment,{children:[F.sort((Ne,Re)=>Re.updatedAt.getTime()-Ne.updatedAt.getTime()).map(Ne=>y.jsx(lw,{item:{...Ne,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,originalName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:R,editInputRef:j},Ne.id)),K.sort((Ne,Re)=>Re.updatedAt.getTime()-Ne.updatedAt.getTime()).map(Ne=>y.jsx(lw,{item:{...Ne,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,originalName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:R,editInputRef:j},Ne.id))]})]})});lw.displayName="ConversationItemRenderer";function a0e({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=T.useState(null),[i,o]=T.useState(null),[s,l]=T.useState(""),[u,d]=T.useState(""),[h,p]=T.useState(!1),g=T.useRef(null),v=T.useCallback(x=>{a(x.id),o(x.itemType);const S=x.itemType==="project"?x.name:x.title;l(S),d(S),p(!1)},[]),b=T.useCallback(x=>{const S=r,E=x??(i==="project"&&s==="New Project");a(null),o(null),l(""),d(""),p(!1),E&&S&&(console.log(`Cancelling edit for new project ${S}, deleting...`),n(S).catch(C=>{console.error("Failed to delete new project on cancel:",C),lt.error("Failed to clean up cancelled new project.")}))},[r,i,s,n]),_=T.useCallback(async()=>{var E;if(!r||!i||h)return;const x=u.trim(),S=i==="project"&&s==="New Project";if(!x){lt.error("Name cannot be empty."),(E=g.current)==null||E.focus();return}if(x===s&&!S){b();return}p(!0);try{i==="project"?await e(r,{name:x}):await t(r,{title:x}),lt.success("Item renamed successfully."),a(null),o(null),l(""),d("")}catch(C){console.error("Failed to save item name:",C),lt.error(`Failed to rename item: ${C instanceof Error?C.message:String(C)}`)}finally{p(!1)}},[r,i,u,s,h,e,t,b]);return T.useEffect(()=>{r&&g.current&&(g.current.focus(),g.current.select())},[r]),{editingItemId:r,editingItemType:i,originalName:s,localEditingName:u,setLocalEditingName:d,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:_,handleCancelEdit:b}}const mC=(e,t,n,r,a,i,o,s,l)=>{if(!n)return!0;const u=`${t}-${e}`;if(l[u]!==void 0)return l[u];let d=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))d=!0;else{const p=s.get(e)||[],g=o.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){d=!0;break}if(!d){for(const v of p)if(mC(v.id,"project",n,r,a,i,o,s,l)){d=!0;break}}}}return l[u]=d,d},i0e=()=>{const e=mn(me=>me.selectedItemId),t=mn(me=>me.selectedItemType),n=mn(me=>me.isLoading),r=ni(me=>me.isLoading),a=ha(me=>me.setFocusInputFlag),{conversations:i,syncRepos:o,conversationSyncStatus:s}=mn(hn(me=>({conversations:me.conversations,syncRepos:me.syncRepos,conversationSyncStatus:me.conversationSyncStatus}))),l=ni(me=>me.projects),u=mn(me=>me.selectItem),d=mn(me=>me.addConversation),h=mn(me=>me.updateConversation),p=mn(me=>me.deleteConversation),g=mn(me=>me.exportConversation),v=mn(me=>me.exportProject),b=mn(me=>me.getConversationById),_=ni(me=>me.addProject),x=ni(me=>me.updateProject),S=ni(me=>me.deleteProject),E=ni(me=>me.getProjectById),[C,k]=yt.useState(new Set),[R,j]=T.useState(""),O=n||r,L=a0e({updateProject:x,updateConversation:h,deleteProject:S,getProjectById:E,getConversationById:b}),{editingItemId:z,editingItemType:Y,originalName:F,localEditingName:K,setLocalEditingName:q,isSavingEdit:fe,editInputRef:te,handleStartEditing:re,handleSaveEdit:X,handleCancelEdit:ae}=L,U=T.useCallback(me=>{k(Ae=>{const se=new Set(Ae);return se.has(me)?se.delete(me):se.add(me),se})},[]),ee=T.useCallback(()=>{if(t==="project")return e;if(t==="conversation"&&e){const me=b(e);return(me==null?void 0:me.projectId)??null}return null},[e,t,b]),J=T.useCallback(async()=>{if(!z)try{const me=ee(),Ae=await d({title:"New Chat",projectId:me});u(Ae,"conversation"),setTimeout(()=>a(!0),0)}catch(me){console.error("Failed to create new chat:",me),lt.error("Failed to create new chat.")}},[z,ee,d,u,a]),ue=T.useCallback(async()=>{if(!z)try{const me=ee(),Ae=await _({name:"New Project",parentId:me});u(Ae,"project"),me&&k(se=>new Set(se).add(me)),setTimeout(()=>{const se=E(Ae);se?re({...se,itemType:"project"}):console.warn("New project data not found, cannot start edit.")},50)}catch(me){console.error("Failed to create new project:",me)}},[z,ee,_,u,E,re]),be=T.useCallback((me,Ae)=>{me!==z&&(z&&me!==z&&(K.trim()&&K.trim()!==F?X():ae()),(me!==e||Ae!==t)&&(u(me,Ae),Ae==="conversation"&&setTimeout(()=>a(!0),0)))},[z,K,F,e,t,X,ae,u,a]),_e=T.useCallback((me,Ae)=>{Ae.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&p(me).catch(se=>{console.error("Failed to delete conversation:",se),lt.error("Failed to delete conversation.")})},[p]),Pe=T.useCallback((me,Ae)=>{Ae.stopPropagation(),S(me).catch(se=>{console.error("Failed to delete project:",se),lt.error("Failed to delete project.")})},[S]),Ne=T.useCallback(async(me,Ae,se)=>{se.stopPropagation();try{await g(me,Ae)}catch(ie){console.error(`Failed to export conversation as ${Ae}:`,ie)}},[g]),Re=T.useCallback(async(me,Ae)=>{Ae.stopPropagation();try{await v(me)}catch(se){console.error("Failed to export project:",se)}},[v]),Ce=T.useMemo(()=>new Map((o||[]).map(me=>[me.id,me.name])),[o]),{projectsById:Fe,conversationsByProjectId:Qe,projectsByParentId:Le}=T.useMemo(()=>{const me=new Map(l.map(ie=>[ie.id,ie])),Ae=new Map;i.forEach(ie=>{const Q=ie.projectId??null;Ae.has(Q)||Ae.set(Q,[]),Ae.get(Q).push(ie)});const se=new Map;return l.forEach(ie=>{const Q=ie.parentId??null;se.has(Q)||se.set(Q,[]),se.get(Q).push(ie)}),{projectsById:me,conversationsByProjectId:Ae,projectsByParentId:se}},[l,i]),Ie=T.useCallback((me,Ae)=>{const se=Ae.toLowerCase(),ie={},Q=(Le.get(me)||[]).filter(Me=>mC(Me.id,"project",se,l,i,Fe,Qe,Le,ie)),xe=(Qe.get(me)||[]).filter(Me=>Me.title.toLowerCase().includes(se));return Q.sort((Me,Ee)=>Ee.updatedAt.getTime()-Me.updatedAt.getTime()),xe.sort((Me,Ee)=>Ee.updatedAt.getTime()-Me.updatedAt.getTime()),{projects:Q,conversations:xe}},[l,i,Fe,Qe,Le]),V=T.useMemo(()=>{const me=R.toLowerCase(),Ae={},se=(Le.get(null)||[]).filter(xe=>mC(xe.id,"project",me,l,i,Fe,Qe,Le,Ae)),ie=(Qe.get(null)||[]).filter(xe=>xe.title.toLowerCase().includes(me)),Q=[...se.map(xe=>({...xe,itemType:"project"})),...ie.map(xe=>({...xe,itemType:"conversation"}))];return Q.sort((xe,Me)=>Me.updatedAt.getTime()-xe.updatedAt.getTime()),Q},[l,i,R,Fe,Qe,Le]);return y.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[y.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{size:"sm",variant:"ghost",onClick:ue,"aria-label":"New Project",disabled:O||!!z,className:"h-7 w-7 p-0",children:y.jsx(DC,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"bottom",children:"New Project"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{size:"sm",variant:"ghost",onClick:J,"aria-label":"New Chat",disabled:O||!!z,className:"h-7 w-7 p-0",children:y.jsx(Y0,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"bottom",children:"New Chat"})]})})]})]}),y.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[y.jsx(J0,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),y.jsx(Jn,{type:"search",placeholder:"Filter...",value:R,onChange:me=>j(me.target.value),className:"h-8 text-xs pl-8",disabled:O})]}),y.jsx(Hd,{className:"flex-grow",children:O?y.jsxs("div",{className:"space-y-1 p-1",children:[y.jsx(Or,{className:"h-8 w-full"}),y.jsx(Or,{className:"h-8 w-full"}),y.jsx(Or,{className:"h-8 w-full"})]}):V.length===0?y.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:R.trim()!==""?"No items match your filter.":"Workspace is empty."}):y.jsx("ul",{className:"space-y-0.5 p-1",children:V.map(me=>y.jsx(lw,{item:me,level:0,selectedItemId:e,conversationSyncStatus:s,repoNameMap:Ce,onSelectItem:be,onDeleteConversation:_e,onDeleteProject:Pe,onExportConversation:Ne,onExportProject:Re,expandedProjects:C,toggleProjectExpansion:U,getChildren:Ie,filterText:R,editingItemId:z,editingItemType:Y,originalName:F,localEditingName:K,setLocalEditingName:q,handleStartEditing:re,handleSaveEdit:X,handleCancelEdit:ae,isSavingEdit:fe,editInputRef:te},me.id))})})]})},o0e=()=>{const{addConversation:e,selectItem:t,selectedItemId:n,selectedItemType:r}=mn(hn(u=>({addConversation:u.addConversation,selectItem:u.selectItem,selectedItemId:u.selectedItemId,selectedItemType:u.selectedItemType,getConversationById:u.getConversationById}))),{addProject:a}=ni(hn(u=>({addProject:u.addProject,getProjectById:u.getProjectById}))),i=ha(u=>u.setFocusInputFlag),o=()=>{if(r==="project")return n;if(r==="conversation"&&n){const u=mn.getState().getConversationById(n);return(u==null?void 0:u.projectId)??null}return null},s=async()=>{try{const u=o(),d=await e({title:"New Chat",projectId:u});t(d,"conversation"),setTimeout(()=>i(!0),0)}catch(u){console.error("Failed to create new chat:",u)}},l=async()=>{try{const u=o(),d=await a({name:"New Project",parentId:u});t(d,"project")}catch(u){console.error("Failed to create new project:",u)}};return y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",onClick:l,className:"h-8 w-8","aria-label":"New Project",children:y.jsx(DC,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"right",children:"New Project"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":"New Chat",children:y.jsx(Y0,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"right",children:"New Chat"})]})})]})};function s0e(){const e=Pr.getState().registerChatControl,t=mn.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",status:()=>t?"loading":"ready",renderer:()=>yt.createElement(i0e),iconRenderer:()=>yt.createElement(o0e),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var N1="Dialog",[D$,P_e]=_i(N1),[l0e,cs]=D$(N1),M$=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=T.useRef(null),l=T.useRef(null),[u,d]=Qo({prop:r,defaultProp:a??!1,onChange:i,caller:N1});return y.jsx(l0e,{scope:t,triggerRef:s,contentRef:l,contentId:Wa(),titleId:Wa(),descriptionId:Wa(),open:u,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};M$.displayName=N1;var P$="DialogTrigger",c0e=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=cs(P$,n),i=Cn(t,a.triggerRef);return y.jsx(tn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":OA(a.open),...r,ref:i,onClick:qt(e.onClick,a.onOpenToggle)})});c0e.displayName=P$;var RA="DialogPortal",[u0e,F$]=D$(RA,{forceMount:void 0}),L$=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=cs(RA,t);return y.jsx(u0e,{scope:t,forceMount:n,children:T.Children.map(r,o=>y.jsx(Ca,{present:n||i.open,children:y.jsx(Vh,{asChild:!0,container:a,children:o})}))})};L$.displayName=RA;var cw="DialogOverlay",$$=T.forwardRef((e,t)=>{const n=F$(cw,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=cs(cw,e.__scopeDialog);return i.modal?y.jsx(Ca,{present:r||i.open,children:y.jsx(f0e,{...a,ref:t})}):null});$$.displayName=cw;var d0e=Xc("DialogOverlay.RemoveScroll"),f0e=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=cs(cw,n);return y.jsx(Lg,{as:d0e,allowPinchZoom:!0,shards:[a.contentRef],children:y.jsx(tn.div,{"data-state":OA(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Cd="DialogContent",B$=T.forwardRef((e,t)=>{const n=F$(Cd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=cs(Cd,e.__scopeDialog);return y.jsx(Ca,{present:r||i.open,children:i.modal?y.jsx(h0e,{...a,ref:t}):y.jsx(p0e,{...a,ref:t})})});B$.displayName=Cd;var h0e=T.forwardRef((e,t)=>{const n=cs(Cd,e.__scopeDialog),r=T.useRef(null),a=Cn(t,n.contentRef,r);return T.useEffect(()=>{const i=r.current;if(i)return v1(i)},[]),y.jsx(z$,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault())})}),p0e=T.forwardRef((e,t)=>{const n=cs(Cd,e.__scopeDialog),r=T.useRef(!1),a=T.useRef(!1);return y.jsx(z$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),z$=T.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=cs(Cd,n),l=T.useRef(null),u=Cn(t,l);return y1(),y.jsxs(y.Fragment,{children:[y.jsx(Fg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(Uh,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":OA(s.open),...o,ref:u,onDismiss:()=>s.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(m0e,{titleId:s.titleId}),y.jsx(y0e,{contentRef:l,descriptionId:s.descriptionId})]})]})}),IA="DialogTitle",U$=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=cs(IA,n);return y.jsx(tn.h2,{id:a.titleId,...r,ref:t})});U$.displayName=IA;var H$="DialogDescription",q$=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=cs(H$,n);return y.jsx(tn.p,{id:a.descriptionId,...r,ref:t})});q$.displayName=H$;var V$="DialogClose",G$=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=cs(V$,n);return y.jsx(tn.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});G$.displayName=V$;function OA(e){return e?"open":"closed"}var W$="DialogTitleWarning",[F_e,K$]=PY(W$,{contentName:Cd,titleName:IA,docsSlug:"dialog"}),m0e=({titleId:e})=>{const t=K$(W$),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return T.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},g0e="DialogDescriptionWarning",y0e=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${K$(g0e).contentName}}.`;return T.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Z$=M$,Y$=L$,X$=$$,J$=B$,b0e=U$,v0e=q$,Q$=G$;function R1({...e}){return y.jsx(Z$,{"data-slot":"dialog",...e})}function w0e({...e}){return y.jsx(Y$,{"data-slot":"dialog-portal",...e})}function _0e({...e}){return y.jsx(Q$,{"data-slot":"dialog-close",...e})}function x0e({className:e,...t}){return y.jsx(X$,{"data-slot":"dialog-overlay",className:Rt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function I1({className:e,children:t,...n}){return y.jsxs(w0e,{"data-slot":"dialog-portal",children:[y.jsx(x0e,{}),y.jsxs(J$,{"data-slot":"dialog-content",className:Rt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,y.jsxs(Q$,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[y.jsx(Zl,{}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function O1({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-header",className:Rt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function j1({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-footer",className:Rt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function D1({className:e,...t}){return y.jsx(b0e,{"data-slot":"dialog-title",className:Rt("text-lg leading-none font-semibold",e),...t})}function M1({className:e,...t}){return y.jsx(v0e,{"data-slot":"dialog-description",className:Rt("text-muted-foreground text-sm",e),...t})}var e9=["PageUp","PageDown"],t9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],n9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},cp="Slider",[gC,S0e,E0e]=g1(cp),[r9,L_e]=_i(cp,[E0e]),[C0e,P1]=r9(cp),a9=T.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:s=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:v,...b}=e,_=T.useRef(new Set),x=T.useRef(0),E=o==="horizontal"?k0e:A0e,[C=[],k]=Qo({prop:d,defaultProp:u,onChange:Y=>{var K;(K=[..._.current][x.current])==null||K.focus(),h(Y)}}),R=T.useRef(C);function j(Y){const F=O0e(C,Y);z(Y,F)}function O(Y){z(Y,x.current)}function L(){const Y=R.current[x.current];C[x.current]!==Y&&p(C)}function z(Y,F,{commit:K}={commit:!1}){const q=P0e(i),fe=F0e(Math.round((Y-r)/i)*i+r,q),te=O0(fe,[r,a]);k((re=[])=>{const X=R0e(re,te,F);if(M0e(X,l*i)){x.current=X.indexOf(te);const ae=String(X)!==String(re);return ae&&K&&p(X),ae?X:re}else return re})}return y.jsx(C0e,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:a,valueIndexToChangeRef:x,thumbs:_.current,values:C,orientation:o,form:v,children:y.jsx(gC.Provider,{scope:e.__scopeSlider,children:y.jsx(gC.Slot,{scope:e.__scopeSlider,children:y.jsx(E,{"aria-disabled":s,"data-disabled":s?"":void 0,...b,ref:t,onPointerDown:qt(b.onPointerDown,()=>{s||(R.current=C)}),min:r,max:a,inverted:g,onSlideStart:s?void 0:j,onSlideMove:s?void 0:O,onSlideEnd:s?void 0:L,onHomeKeyDown:()=>!s&&z(r,0,{commit:!0}),onEndKeyDown:()=>!s&&z(a,C.length-1,{commit:!0}),onStepKeyDown:({event:Y,direction:F})=>{if(!s){const fe=e9.includes(Y.key)||Y.shiftKey&&t9.includes(Y.key)?10:1,te=x.current,re=C[te],X=i*fe*F;z(re+X,te,{commit:!0})}}})})})})});a9.displayName=cp;var[i9,o9]=r9(cp,{startEdge:"left",endEdge:"right",size:"width",direction:1}),k0e=T.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:l,onStepKeyDown:u,...d}=e,[h,p]=T.useState(null),g=Cn(t,E=>p(E)),v=T.useRef(void 0),b=op(a),_=b==="ltr",x=_&&!i||!_&&i;function S(E){const C=v.current||h.getBoundingClientRect(),k=[0,C.width],j=jA(k,x?[n,r]:[r,n]);return v.current=C,j(E-C.left)}return y.jsx(i9,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(s9,{dir:b,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=S(E.clientX);s==null||s(C)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:E=>{const k=n9[x?"from-left":"from-right"].includes(E.key);u==null||u({event:E,direction:k?-1:1})}})})}),A0e=T.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onStepKeyDown:l,...u}=e,d=T.useRef(null),h=Cn(t,d),p=T.useRef(void 0),g=!a;function v(b){const _=p.current||d.current.getBoundingClientRect(),x=[0,_.height],E=jA(x,g?[r,n]:[n,r]);return p.current=_,E(b-_.top)}return y.jsx(i9,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(s9,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const _=v(b.clientY);i==null||i(_)},onSlideMove:b=>{const _=v(b.clientY);o==null||o(_)},onSlideEnd:()=>{p.current=void 0,s==null||s()},onStepKeyDown:b=>{const x=n9[g?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:x?-1:1})}})})}),s9=T.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:s,onStepKeyDown:l,...u}=e,d=P1(cp,n);return y.jsx(tn.span,{...u,ref:t,onKeyDown:qt(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(s(h),h.preventDefault()):e9.concat(t9).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:qt(e.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(p)?p.focus():r(h)}),onPointerMove:qt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:qt(e.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),i(h))})})}),l9="SliderTrack",c9=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=P1(l9,n);return y.jsx(tn.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});c9.displayName=l9;var yC="SliderRange",u9=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=P1(yC,n),i=o9(yC,n),o=T.useRef(null),s=Cn(t,o),l=a.values.length,u=a.values.map(p=>h9(p,a.min,a.max)),d=l>1?Math.min(...u):0,h=100-Math.max(...u);return y.jsx(tn.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});u9.displayName=yC;var bC="SliderThumb",d9=T.forwardRef((e,t)=>{const n=S0e(e.__scopeSlider),[r,a]=T.useState(null),i=Cn(t,s=>a(s)),o=T.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return y.jsx(T0e,{...e,ref:i,index:o})}),T0e=T.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=P1(bC,n),s=o9(bC,n),[l,u]=T.useState(null),d=Cn(t,S=>u(S)),h=l?o.form||!!l.closest("form"):!0,p=Ow(l),g=o.values[r],v=g===void 0?0:h9(g,o.min,o.max),b=I0e(r,o.values.length),_=p==null?void 0:p[s.size],x=_?j0e(_,v,s.direction):0;return T.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${v}% + ${x}px)`},children:[y.jsx(gC.ItemSlot,{scope:e.__scopeSlider,children:y.jsx(tn.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:g===void 0?{display:"none"}:e.style,onFocus:qt(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&y.jsx(f9,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});d9.displayName=bC;var N0e="RadioBubbleInput",f9=T.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=T.useRef(null),i=Cn(a,r),o=b1(t);return T.useEffect(()=>{const s=a.current;if(!s)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&d){const h=new Event("input",{bubbles:!0});d.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(tn.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});f9.displayName=N0e;function R0e(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function h9(e,t,n){const i=100/(n-t)*(e-t);return O0(i,[0,100])}function I0e(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function O0e(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function j0e(e,t,n){const r=e/2,i=jA([0,50],[0,r]);return(r-i(t)*n)*n}function D0e(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function M0e(e,t){if(t>0){const n=D0e(e);return Math.min(...n)>=t}return!0}function jA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function P0e(e){return(String(e).split(".")[1]||"").length}function F0e(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var L0e=a9,$0e=c9,B0e=u9,z0e=d9;function Ml({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const o=T.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return y.jsxs(L0e,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:Rt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[y.jsx($0e,{"data-slot":"slider-track",className:Rt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:y.jsx(B0e,{"data-slot":"slider-range",className:Rt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(s,l)=>y.jsx(z0e,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}var U0e="Separator",_j="horizontal",H0e=["horizontal","vertical"],p9=T.forwardRef((e,t)=>{const{decorative:n,orientation:r=_j,...a}=e,i=q0e(r)?r:_j,s=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return y.jsx(tn.div,{"data-orientation":i,...s,...a,ref:t})});p9.displayName=U0e;function q0e(e){return H0e.includes(e)}var V0e=p9;function Fh({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return y.jsx(V0e,{"data-slot":"separator-root",decorative:n,orientation:t,className:Rt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const G0e=()=>{const{theme:e,setTheme:t,enableStreamingMarkdown:n,setEnableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a,setEnableStreamingCodeBlockParsing:i,foldStreamingCodeBlocks:o,setFoldStreamingCodeBlocks:s,streamingRenderFPS:l,setStreamingRenderFPS:u,prismThemeUrl:d,setPrismThemeUrl:h,resetGeneralSettings:p}=Zr(hn(E=>({theme:E.theme,setTheme:E.setTheme,enableStreamingMarkdown:E.enableStreamingMarkdown,setEnableStreamingMarkdown:E.setEnableStreamingMarkdown,enableStreamingCodeBlockParsing:E.enableStreamingCodeBlockParsing,setEnableStreamingCodeBlockParsing:E.setEnableStreamingCodeBlockParsing,foldStreamingCodeBlocks:E.foldStreamingCodeBlocks,setFoldStreamingCodeBlocks:E.setFoldStreamingCodeBlocks,streamingRenderFPS:E.streamingRenderFPS,setStreamingRenderFPS:E.setStreamingRenderFPS,prismThemeUrl:E.prismThemeUrl,setPrismThemeUrl:E.setPrismThemeUrl,resetGeneralSettings:E.resetGeneralSettings}))),[g,v]=T.useState(l),b=T.useCallback(E=>{v(E[0])},[]),_=T.useCallback(E=>{u(E[0])},[u]),x=T.useCallback(E=>{const C=E.target.value,k=C===""?15:parseInt(C.replace(/[^0-9]/g,""),10);if(!isNaN(k)){const R=Math.max(3,Math.min(60,k));u(R),v(R)}},[u]);T.useEffect(()=>{v(l)},[l]);const S=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&p()};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsx(on,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),y.jsxs(qd,{value:e??"system",onValueChange:E=>t(E),children:[y.jsx(Gd,{id:"theme-select",className:"w-[180px]",children:y.jsx(Vd,{placeholder:"Select theme"})}),y.jsxs(Wd,{children:[y.jsx(Oi,{value:"light",children:"Light"}),y.jsx(Oi,{value:"dark",children:"Dark"}),y.jsx(Oi,{value:"system",children:"System"}),y.jsx(Oi,{value:"TijuLight",children:"Tiju Light"}),y.jsx(Oi,{value:"TijuDark",children:"Tiju Dark"})]})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-1.5",children:[y.jsx(on,{htmlFor:"prism-theme-url",className:"font-medium",children:"Code Block Theme URL (Optional)"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the URL of a PrismJS CSS theme file (e.g., from cdnjs). Leave blank to use the default themes."}),y.jsx(Jn,{id:"prism-theme-url",type:"url",placeholder:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",value:d??"",onChange:E=>h(E.target.value)})]})]}),y.jsx(Fh,{}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Streaming"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(on,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),y.jsx(zs,{id:"streaming-markdown-switch",checked:n??!0,onCheckedChange:r})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(on,{htmlFor:"streaming-codeblock-switch",className:"font-medium",children:"Use Full Code Blocks While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the syntax-highlighting component for code blocks during streaming. Disable for potentially smoother streaming on complex code, using a basic block instead."})]}),y.jsx(zs,{id:"streaming-codeblock-switch",checked:a??!1,onCheckedChange:i})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(on,{htmlFor:"fold-codeblock-switch",className:"font-medium",children:"Fold Code Blocks by Default During Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse code blocks as they stream in. Useful for long code outputs."})]}),y.jsx(zs,{id:"fold-codeblock-switch",checked:o??!1,onCheckedChange:s})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[y.jsxs("div",{children:[y.jsxs(on,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["Streaming Update Rate (",g," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how frequently the UI updates during streaming (3-60 FPS). Lower values may feel less smooth but reduce CPU usage. (Default: 15)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Ml,{id:"streaming-fps-slider",min:3,max:60,step:1,value:[g],onValueChange:b,onValueCommit:_,className:"flex-grow"}),y.jsx(Jn,{type:"number",min:3,max:60,step:1,value:g,onChange:x,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),y.jsx(Fh,{}),y.jsx("div",{className:"flex justify-end pt-4",children:y.jsxs(Bt,{variant:"outline",size:"sm",onClick:S,children:[y.jsx(KH,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},W0e=yt.memo(G0e),m9=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:o,setTopK:s,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,defaultTemperature:p=.7,defaultTopP:g=null,defaultMaxTokens:v=null,defaultTopK:b=null,defaultPresencePenalty:_=0,defaultFrequencyPenalty:x=0,className:S})=>{const{selectedModelId:E,dbProviderConfigs:C,dbApiKeys:k}=Pn(hn(U=>({selectedModelId:U.selectedModelId,dbProviderConfigs:U.dbProviderConfigs,dbApiKeys:U.dbApiKeys}))),R=T.useMemo(()=>{if(!E)return;const{providerId:U,modelId:ee}=Yl(E);if(!U||!ee)return;const J=C.find(be=>be.id===U);if(!J)return;const ue=k.find(be=>be.id===J.apiKeyId);return XC(J,ee,ue==null?void 0:ue.value)},[E,C,k]),j=T.useMemo(()=>{var U;return new Set(((U=R==null?void 0:R.metadata)==null?void 0:U.supported_parameters)??[])},[R]),[O,L]=T.useState(e??p),[z,Y]=T.useState(n??g??1),[F,K]=T.useState(l??_??0),[q,fe]=T.useState(d??x??0);T.useEffect(()=>{L(e??p)},[e,p]),T.useEffect(()=>{Y(n??g??1)},[n,g]),T.useEffect(()=>{K(l??_??0)},[l,_]),T.useEffect(()=>{fe(d??x??0)},[d,x]);const te=T.useCallback((U,ee)=>{const J=ee.target.value,ue=J===""?null:parseInt(J,10);(J===""||!isNaN(ue)&&ue!==null)&&U(ue)},[]),re=T.useCallback((U,ee)=>{U(ee[0])},[]),X=T.useCallback(U=>{U(null)},[]),ae=p!==void 0||g!==void 0||v!==void 0||b!==void 0||_!==void 0||x!==void 0;return y.jsxs("div",{className:Rt("space-y-4 p-4",S),children:[j.has("temperature")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(on,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",O.toFixed(2),")"]}),y.jsx(Ml,{id:"param-temperature",min:0,max:1,step:.01,value:[O],onValueChange:U=>L(U[0]),onValueCommit:U=>re(t,U)}),ae&&y.jsxs(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(t),disabled:e===null,children:["Use Default (",(p==null?void 0:p.toFixed(2))??"N/A",")"]})]}),j.has("top_p")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(on,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(z??0).toFixed(2),")"]}),y.jsx(Ml,{id:"param-top-p",min:0,max:1,step:.01,value:[z??1],onValueChange:U=>Y(U[0]),onValueCommit:U=>re(r,U)}),ae&&y.jsxs(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(r),disabled:n===null,children:["Use Default (",(g==null?void 0:g.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[j.has("max_tokens")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(Jn,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:U=>te(i,U),min:"1",className:"h-8 text-xs"}),ae&&y.jsx(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(i),disabled:a===null,children:"Use Default"})]}),j.has("top_k")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),y.jsx(Jn,{id:"param-top-k",type:"number",placeholder:`Default: ${b??"None"}`,value:o??"",onChange:U=>te(s,U),min:"1",className:"h-8 text-xs"}),ae&&y.jsx(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(s),disabled:o===null,children:"Use Default"})]})]}),j.has("presence_penalty")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(on,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(F??0).toFixed(2),")"]}),y.jsx(Ml,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[F??0],onValueChange:U=>K(U[0]),onValueCommit:U=>re(u,U)}),ae&&y.jsxs(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(u),disabled:l===null,children:["Use Default (",(_==null?void 0:_.toFixed(2))??"N/A",")"]})]}),j.has("frequency_penalty")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(on,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(q??0).toFixed(2),")"]}),y.jsx(Ml,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[q??0],onValueChange:U=>fe(U[0]),onValueCommit:U=>re(h,U)}),ae&&y.jsxs(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(h),disabled:d===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]})]})},K0e=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r,temperature:a,setTemperature:i,topP:o,setTopP:s,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:p,setPresencePenalty:g,frequencyPenalty:v,setFrequencyPenalty:b}=Zr(hn(k=>({globalSystemPrompt:k.globalSystemPrompt,setGlobalSystemPrompt:k.setGlobalSystemPrompt,toolMaxSteps:k.toolMaxSteps,setToolMaxSteps:k.setToolMaxSteps,temperature:k.temperature,setTemperature:k.setTemperature,topP:k.topP,setTopP:k.setTopP,maxTokens:k.maxTokens,setMaxTokens:k.setMaxTokens,topK:k.topK,setTopK:k.setTopK,presencePenalty:k.presencePenalty,setPresencePenalty:k.setPresencePenalty,frequencyPenalty:k.frequencyPenalty,setFrequencyPenalty:k.setFrequencyPenalty}))),_=k=>{const R=k.target.value,j=R===""?5:parseInt(R,10);isNaN(j)||r(j)},x=k=>{k!==null&&i(k)},S=k=>{k!==null&&s(k)},E=k=>{k!==null&&g(k)},C=k=>{k!==null&&b(k)};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),y.jsx(on,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),y.jsx(lp,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:k=>t(k.target.value),rows:4})]}),y.jsx(Fh,{}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Default Parameters"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),y.jsx(m9,{temperature:a,setTemperature:x,topP:o,setTopP:S,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:p,setPresencePenalty:E,frequencyPenalty:v,setFrequencyPenalty:C,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},className:"p-0 w-full"})]}),y.jsx(Fh,{}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),y.jsx(on,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),y.jsx(Jn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:_,className:"w-24"})]})]})},Z0e=yt.memo(K0e),Y0e=()=>{const{importConversation:e,exportAllConversations:t}=mn(hn(g=>({importConversation:g.importConversation,exportAllConversations:g.exportAllConversations}))),n=T.useRef(null),[r,a]=T.useState(!1),[i,o]=T.useState(!1),[s,l]=T.useState(!1),u=()=>{var g;(g=n.current)==null||g.click()},d=T.useCallback(async g=>{var b;const v=(b=g.target.files)==null?void 0:b[0];if(v){a(!0);try{await e(v)}catch(_){console.error("Import failed (from component):",_)}finally{n.current&&(n.current.value=""),a(!1)}}},[e]),h=T.useCallback(async()=>{o(!0);try{await t()}catch(g){console.error("Export all failed (from component):",g)}finally{o(!1)}},[t]),p=T.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){l(!0);try{await Wt.clearAllData(),lt.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(g){const v="Failed to clear all data";console.error(v,g),lt.error(`${v}: ${g instanceof Error?g.message:String(g)}`),l(!1)}}},[]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Import Conversation"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Import a previously exported conversation (.json file). It will be added as a new chat."}),y.jsx("input",{type:"file",ref:n,onChange:d,accept:".json",className:"hidden",id:"import-file-input",disabled:r}),y.jsxs(Bt,{onClick:u,variant:"outline",disabled:r,children:[r?y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(uq,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Select Import File..."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Data"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Export all your conversations and messages into a single JSON file."}),y.jsxs(Bt,{onClick:h,variant:"outline",disabled:i,children:[i?y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(ah,{className:"mr-2 h-4 w-4"}),i?"Exporting...":"Export All Chats"]})]}),y.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[y.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),y.jsxs(Bt,{onClick:p,variant:"destructive",disabled:s,children:[s?y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Ho,{className:"mr-2 h-4 w-4"}),s?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},X0e=yt.memo(Y0e),J0e=NC("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function g9({className:e,variant:t,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:Rt(J0e({variant:t}),e),...n})}function y9({className:e,...t}){return y.jsx("div",{"data-slot":"alert-title",className:Rt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function b9({className:e,...t}){return y.jsx("div",{"data-slot":"alert-description",className:Rt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function F1({className:e,...t}){return y.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:y.jsx("table",{"data-slot":"table",className:Rt("w-full caption-bottom text-sm",e),...t})})}function L1({className:e,...t}){return y.jsx("thead",{"data-slot":"table-header",className:Rt("[&_tr]:border-b",e),...t})}function $1({className:e,...t}){return y.jsx("tbody",{"data-slot":"table-body",className:Rt("[&_tr:last-child]:border-0",e),...t})}function Qi({className:e,...t}){return y.jsx("tr",{"data-slot":"table-row",className:Rt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function fa({className:e,...t}){return y.jsx("th",{"data-slot":"table-head",className:Rt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Er({className:e,...t}){return y.jsx("td",{"data-slot":"table-cell",className:Rt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const Q0e=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=U0(hn(R=>({loadedMods:R.loadedMods,addDbMod:R.addDbMod,updateDbMod:R.updateDbMod,deleteDbMod:R.deleteDbMod,dbMods:R.dbMods,isLoading:R.isLoading}))),[o,s]=T.useState(""),[l,u]=T.useState(""),[d,h]=T.useState(""),[p,g]=T.useState(!1),[v,b]=T.useState({}),[_,x]=T.useState({}),S=T.useCallback(async()=>{if(!o.trim()){lt.error("Mod name cannot be empty.");return}if(!l.trim()&&!d.trim()){lt.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&d.trim()){lt.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const R={name:o.trim(),sourceUrl:l.trim()||null,scriptContent:d.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(R),s(""),u(""),h(""),lt.info("Mod added. Reload required for changes to take effect.")}catch(R){console.error("Failed to add mod (from component):",R)}finally{g(!1)}},[o,l,d,t,a==null?void 0:a.length]),E=T.useCallback(async R=>{b(j=>({...j,[R.id]:!0}));try{await n(R.id,{enabled:!R.enabled}),lt.info(`Mod "${R.name}" ${R.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(j){console.error("Failed to update mod (from component):",j)}finally{b(j=>({...j,[R.id]:!1}))}},[n]),C=T.useCallback(async R=>{if(window.confirm(`Are you sure you want to delete the mod "${R.name}"? This cannot be undone.`)){x(j=>({...j,[R.id]:!0}));try{await r(R.id),lt.info("Mod deleted. Reload required for changes to take effect.")}catch(j){console.error("Failed to delete mod (from component):",j)}finally{x(j=>({...j,[R.id]:!1}))}}},[r]),k=T.useCallback(R=>{const j=e.find(L=>L.id===R);if(j)if(j.error){const L=j.error instanceof Error?j.error.message:String(j.error);return{status:"Error",error:j.error,tooltip:L}}else return{status:"Loaded"};const O=(a||[]).find(L=>L.id===R);return O?O.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs(g9,{variant:"destructive",className:"border-destructive/50",children:[y.jsx(PC,{className:"h-4 w-4"}),y.jsx(y9,{children:"Security Warning"}),y.jsx(b9,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),y.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(on,{htmlFor:"mod-name",children:"Mod Name"}),y.jsx(Jn,{id:"mod-name",value:o,onChange:R=>s(R.target.value),placeholder:"My Awesome Mod",disabled:p})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(on,{htmlFor:"mod-url",children:"Source URL (Optional)"}),y.jsx(Jn,{id:"mod-url",type:"url",value:l,onChange:R=>u(R.target.value),placeholder:"https://example.com/my-mod.js",disabled:p||!!d.trim()})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(on,{htmlFor:"mod-script",children:"Script Content (Optional)"}),y.jsx(lp,{id:"mod-script",value:d,onChange:R=>h(R.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:p||!!l.trim()})]}),y.jsxs(Bt,{onClick:S,disabled:p,children:[p&&y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Mod"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),y.jsx("div",{className:"rounded-md border",children:y.jsx(er,{delayDuration:100,children:y.jsxs(F1,{children:[y.jsx(L1,{children:y.jsxs(Qi,{children:[y.jsx(fa,{children:"Name"}),y.jsx(fa,{children:"Source"}),y.jsx(fa,{children:"Status"}),y.jsx(fa,{className:"text-center",children:"Enabled"}),y.jsx(fa,{className:"text-right",children:"Actions"})]})}),y.jsx($1,{children:i?y.jsxs(y.Fragment,{children:[y.jsx(Qi,{children:y.jsx(Er,{colSpan:5,children:y.jsx(Or,{className:"h-10 w-full"})})}),y.jsx(Qi,{children:y.jsx(Er,{colSpan:5,children:y.jsx(Or,{className:"h-10 w-full"})})})]}):(a||[]).length===0?y.jsx(Qi,{children:y.jsx(Er,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(R=>{const{status:j,error:O,tooltip:L}=k(R.id),z=R.sourceUrl?new URL(R.sourceUrl).hostname:"Direct Script",Y=v[R.id],F=_[R.id],K=Y||F,q=j==="Error";return y.jsxs(Qi,{children:[y.jsx(Er,{className:"font-medium",children:R.name}),y.jsx(Er,{className:"text-muted-foreground",children:z}),y.jsxs(Er,{children:[y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx("span",{className:q?"text-destructive font-semibold cursor-help":"",children:j})}),L&&y.jsx(ar,{className:"max-w-xs break-words",children:y.jsx("p",{children:L})})]}),q&&O&&y.jsx("p",{className:"text-xs text-destructive truncate",children:O instanceof Error?O.message:String(O)})]}),y.jsxs(Er,{className:"text-center",children:[y.jsx(zs,{checked:R.enabled??!1,onCheckedChange:()=>E(R),disabled:K,"aria-label":`Enable ${R.name}`}),Y&&y.jsx(Gn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),y.jsx(Er,{className:"text-right",children:y.jsx(Bt,{variant:"ghost",size:"icon",onClick:()=>C(R),disabled:K,"aria-label":`Delete ${R.name}`,className:"text-destructive hover:text-destructive/80",children:F?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ho,{className:"h-4 w-4"})})})]},R.id)})})]})})})]})]})},ege=yt.memo(Q0e),tge=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:o,isDeleting:s,onSelectModelForDetails:l})=>{var Y,F;const[u,d]=T.useState(!0),h=Av(e.type),p=YC(e.type),g=Qf(e.type),v=o==="fetching"||s,b=s||o==="fetching",_=s||o==="fetching",S=Pn(K=>K.getAllAvailableModelDefsForProvider)(e.id),E=T.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),C=e.apiKeyId?t.some(K=>K.id===e.apiKeyId):!1,k=h&&!C,R=T.useCallback(async(K,q)=>{const fe=new Set(e.enabledModels??[]);q?fe.add(K):fe.delete(K);const te=Array.from(fe);try{await i(e.id,{enabledModels:te})}catch(re){lt.error("Failed to update model status."),console.error("Failed to save model toggle:",re)}},[e.enabledModels,e.id,i]),j=()=>d(K=>!K),O=((Y=e.enabledModels)==null?void 0:Y.length)??0,L=S.length,z=K=>{const q=qc(e.id,K);l(q)};return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{children:y.jsx("span",{className:Rt("h-2.5 w-2.5 rounded-full flex-shrink-0 block",o==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),y.jsx(ar,{side:"top",children:o==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),y.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),y.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),k&&y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{children:y.jsx(pd,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),y.jsx(ar,{side:"top",children:y.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),y.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[y.jsx(ur,{tooltipText:"Edit",onClick:n,disabled:b,"aria-label":"Edit provider",icon:y.jsx(MC,{}),className:"h-8 w-8"}),y.jsx(ur,{tooltipText:"Delete",onClick:r,disabled:_,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:s?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ho,{})})]})]}),y.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[h&&y.jsxs("div",{children:["API Key:"," ",e.apiKeyId?C?y.jsx("span",{className:"text-green-400",children:((F=t.find(K=>K.id===e.apiKeyId))==null?void 0:F.name)||"Linked (Unnamed Key)"}):y.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):y.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),p&&y.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),y.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?y.jsx("span",{className:"text-green-400",children:"Enabled"}):y.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&y.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),g&&y.jsx("div",{className:"pt-1",children:y.jsxs(Bt,{variant:"outline",size:"sm",onClick:a,disabled:v,className:"text-xs h-7 px-2",children:[o==="fetching"&&y.jsx(Gn,{className:"h-3 w-3 mr-1 animate-spin"}),o==="success"&&y.jsx(Ks,{className:"h-3 w-3 mr-1 text-green-500"}),o==="error"&&y.jsx(pd,{className:"h-3 w-3 mr-1 text-destructive"}),o==="idle"&&y.jsx(gw,{className:"h-3 w-3 mr-1"}),o==="fetching"?"Fetching...":o==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),y.jsxs("div",{className:"space-y-1 pt-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",O," / ",L," enabled)"]}),y.jsx(ur,{tooltipText:u?"Show Models":"Hide Models",onClick:j,"aria-label":u?"Show model list":"Hide model list",icon:u?y.jsx(Zs,{}):y.jsx(Ad,{}),className:"h-6 w-6"})]}),!u&&y.jsx(vA,{providerId:e.id,allAvailableModels:S.map(K=>({id:K.id,name:K.name})),enabledModelIds:E,onToggleModel:R,isLoading:o==="fetching",disabled:s,listHeightClass:"h-64",onModelClick:z})]})]})},nge=yt.memo(tge),rge=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:o,onChange:s})=>{const l=Av(t.type??null),u=YC(t.type??null),d=Qf(t.type??null),h=t.isEnabled??!1,p=t.autoFetchModels??!1,g=T.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=T.useCallback((b,_)=>{const x=new Set(t.enabledModels??[]);_?x.add(b):x.delete(b);const S=Array.from(x);s("enabledModels",S)},[t.enabledModels,s]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(on,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),y.jsx(Jn,{id:`edit-name-${e}`,value:t.name||"",onChange:b=>s("name",b.target.value),placeholder:"Provider Name",disabled:a})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(on,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),y.jsxs(qd,{value:t.type??"",onValueChange:b=>s("type",b),disabled:a,children:[y.jsx(Gd,{id:`edit-type-${e}`,children:y.jsx(Vd,{placeholder:"Select Type"})}),y.jsx(Wd,{children:hd.map(b=>y.jsx(Oi,{value:b.value,children:b.label},b.value))})]})]}),l&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(on,{children:"API Key"}),y.jsx(_L,{selectedKeyId:t.apiKeyId??null,onKeySelected:b=>s("apiKeyId",b),apiKeys:n,disabled:a})]}),u&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(on,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),y.jsx(Jn,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:b=>s("baseURL",b.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),y.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[y.jsx(zs,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:b=>s("isEnabled",b),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),y.jsx(on,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(zs,{id:`edit-autofetch-${e}`,checked:p,onCheckedChange:b=>s("autoFetchModels",b),disabled:!d||a,"aria-labelledby":`edit-autofetch-label-${e}`}),y.jsxs(on,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:d?"":"text-muted-foreground",children:["Auto-fetch models ",d?"":"(Not Supported)"]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),y.jsx(vA,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),y.jsx(Fh,{className:"my-4"}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Bt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[y.jsx(Zl,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),y.jsxs(Bt,{variant:"secondary",size:"sm",onClick:o,disabled:a,type:"button",children:[a&&y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(X0,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},age=yt.memo(rge),ige=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i,onSelectModelForDetails:o})=>{const[s,l]=T.useState(!1),[u,d]=T.useState(!1),[h,p]=T.useState(!1),[g,v]=T.useState({}),b=Pn(L=>L.getAllAvailableModelDefsForProvider),[_,x]=T.useState([]),S=T.useMemo(()=>[..._].sort((L,z)=>(L.name||L.id).localeCompare(z.name||z.id)),[_]);T.useEffect(()=>{if(s){const L=b(e.id);x(L.map(z=>({id:z.id,name:z.name}))),v({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else x([])},[s,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const E=()=>l(!0),C=()=>{l(!1),v({}),d(!1)},k=T.useCallback(async()=>{d(!0);try{const L=g.enabledModels&&g.enabledModels.length>0?g.enabledModels:null,z={name:g.name,type:g.type,isEnabled:g.isEnabled,apiKeyId:g.apiKeyId,baseURL:g.baseURL,autoFetchModels:g.autoFetchModels,enabledModels:L};Object.keys(z).forEach(Y=>{z[Y]===void 0&&delete z[Y]}),await n(e.id,z),l(!1),v({}),lt.success(`Provider "${z.name||e.name}" updated.`)}catch(L){console.error("Failed to save provider update:",L),lt.error("Failed to save provider configuration.")}finally{d(!1)}},[g,n,e.id,e.name]),R=T.useCallback((L,z)=>{v(Y=>({...Y,[L]:z}))},[]),j=T.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){p(!0);try{await r(e.id)}catch(L){console.error("Failed to delete provider:",L),p(!1)}}},[r,e.id,e.name]),O=T.useCallback(async()=>{if(await a(e.id),s){const L=b(e.id);x(L.map(z=>({id:z.id,name:z.name})))}},[a,e.id,s,b]);return y.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:s?y.jsx(age,{providerId:e.id,editData:g,apiKeys:t,allAvailableModels:S,isSaving:u,onCancel:C,onSave:k,onChange:R,onUpdate:n}):y.jsx(nge,{provider:e,apiKeys:t,onEdit:E,onDelete:j,onFetchModels:O,onUpdate:n,fetchStatus:i,isDeleting:h,onSelectModelForDetails:o})})},oge=yt.memo(ige);var WE="rovingFocusGroup.onEntryFocus",sge={bubbles:!1,cancelable:!0},$g="RovingFocusGroup",[vC,v9,lge]=g1($g),[cge,B1]=_i($g,[lge]),[uge,dge]=cge($g),w9=T.forwardRef((e,t)=>y.jsx(vC.Provider,{scope:e.__scopeRovingFocusGroup,children:y.jsx(vC.Slot,{scope:e.__scopeRovingFocusGroup,children:y.jsx(fge,{...e,ref:t})})}));w9.displayName=$g;var fge=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,p=T.useRef(null),g=Cn(t,p),v=op(i),[b,_]=Qo({prop:o,defaultProp:s??null,onChange:l,caller:$g}),[x,S]=T.useState(!1),E=Ma(u),C=v9(n),k=T.useRef(!1),[R,j]=T.useState(0);return T.useEffect(()=>{const O=p.current;if(O)return O.addEventListener(WE,E),()=>O.removeEventListener(WE,E)},[E]),y.jsx(uge,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:T.useCallback(O=>_(O),[_]),onItemShiftTab:T.useCallback(()=>S(!0),[]),onFocusableItemAdd:T.useCallback(()=>j(O=>O+1),[]),onFocusableItemRemove:T.useCallback(()=>j(O=>O-1),[]),children:y.jsx(tn.div,{tabIndex:x||R===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:qt(e.onMouseDown,()=>{k.current=!0}),onFocus:qt(e.onFocus,O=>{const L=!k.current;if(O.target===O.currentTarget&&L&&!x){const z=new CustomEvent(WE,sge);if(O.currentTarget.dispatchEvent(z),!z.defaultPrevented){const Y=C().filter(te=>te.focusable),F=Y.find(te=>te.active),K=Y.find(te=>te.id===b),fe=[F,K,...Y].filter(Boolean).map(te=>te.ref.current);S9(fe,d)}}k.current=!1}),onBlur:qt(e.onBlur,()=>S(!1))})})}),_9="RovingFocusGroupItem",x9=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,l=Wa(),u=i||l,d=dge(_9,n),h=d.currentTabStopId===u,p=v9(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:b}=d;return T.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),y.jsx(vC.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:y.jsx(tn.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...s,ref:t,onMouseDown:qt(e.onMouseDown,_=>{r?d.onItemFocus(u):_.preventDefault()}),onFocus:qt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:qt(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){d.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=mge(_,d.orientation,d.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let E=p().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const C=E.indexOf(_.currentTarget);E=d.loop?gge(E,C+1):E.slice(C+1)}setTimeout(()=>S9(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:b!=null}):o})})});x9.displayName=_9;var hge={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pge(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function mge(e,t,n){const r=pge(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return hge[r]}function S9(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function gge(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var E9=w9,C9=x9,z1="Tabs",[yge,$_e]=_i(z1,[B1]),k9=B1(),[bge,DA]=yge(z1),A9=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:l="automatic",...u}=e,d=op(s),[h,p]=Qo({prop:r,onChange:a,defaultProp:i??"",caller:z1});return y.jsx(bge,{scope:n,baseId:Wa(),value:h,onValueChange:p,orientation:o,dir:d,activationMode:l,children:y.jsx(tn.div,{dir:d,"data-orientation":o,...u,ref:t})})});A9.displayName=z1;var T9="TabsList",N9=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=DA(T9,n),o=k9(n);return y.jsx(E9,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(tn.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});N9.displayName=T9;var R9="TabsTrigger",I9=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=DA(R9,n),s=k9(n),l=D9(o.baseId,r),u=M9(o.baseId,r),d=r===o.value;return y.jsx(C9,{asChild:!0,...s,focusable:!a,active:d,children:y.jsx(tn.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:qt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:qt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:qt(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!a&&h&&o.onValueChange(r)})})})});I9.displayName=R9;var O9="TabsContent",j9=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=DA(O9,n),l=D9(s.baseId,r),u=M9(s.baseId,r),d=r===s.value,h=T.useRef(d);return T.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),y.jsx(Ca,{present:a||d,children:({present:p})=>y.jsx(tn.div,{"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});j9.displayName=O9;function D9(e,t){return`${e}-trigger-${t}`}function M9(e,t){return`${e}-content-${t}`}var vge=A9,wge=N9,_ge=I9,xge=j9;function Sge({className:e,...t}){return y.jsx(vge,{"data-slot":"tabs",className:Rt("flex flex-col gap-2",e),...t})}function Ege({className:e,...t}){return y.jsx(wge,{"data-slot":"tabs-list",className:Rt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Cge({className:e,...t}){return y.jsx(_ge,{"data-slot":"tabs-trigger",className:Rt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function kge({className:e,...t}){return y.jsx(xge,{"data-slot":"tabs-content",className:Rt("flex-1 outline-none",e),...t})}const up=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:a,listClassName:i,contentContainerClassName:o,scrollable:s})=>{var g;const[l,u]=T.useState(n??t??((g=e[0])==null?void 0:g.value));T.useEffect(()=>{n!==void 0&&n!==l&&u(n)},[n,l]);const d=v=>{u(v),r&&r(v)},h=Rt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),p=({children:v})=>{const b=Rt("flex-grow overflow-y-auto pb-6 pr-2 -mr-2",o);return s?y.jsx(Hd,{className:b,children:v}):y.jsx("div",{className:b,children:v})};return y.jsxs(Sge,{value:l,onValueChange:d,defaultValue:t,className:Rt("flex flex-col h-full",a),children:[y.jsx(Ege,{className:Rt("flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",i),children:e.map(v=>y.jsx(Cge,{value:v.value,disabled:v.disabled,className:h,children:v.label},v.value))}),y.jsx(p,{children:e.map(v=>y.jsx(kge,{value:v.value,className:"data-[state=inactive]:hidden h-full",children:v.content},v.value))})]})};function Age(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const U1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function dp(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function MA(e){return"nodeType"in e}function Li(e){var t,n;return e?dp(e)?e:MA(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function PA(e){const{Document:t}=Li(e);return e instanceof t}function Bg(e){return dp(e)?!1:e instanceof Li(e).HTMLElement}function P9(e){return e instanceof Li(e).SVGElement}function fp(e){return e?dp(e)?e.document:MA(e)?PA(e)?e:Bg(e)||P9(e)?e.ownerDocument:document:document:document}const Ws=U1?T.useLayoutEffect:T.useEffect;function FA(e){const t=T.useRef(e);return Ws(()=>{t.current=e}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function Tge(){const e=T.useRef(null),t=T.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=T.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function H0(e,t){t===void 0&&(t=[e]);const n=T.useRef(e);return Ws(()=>{n.current!==e&&(n.current=e)},t),n}function zg(e,t){const n=T.useRef();return T.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function uw(e){const t=FA(e),n=T.useRef(null),r=T.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function wC(e){const t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}let KE={};function Ug(e,t){return T.useMemo(()=>{if(t)return t;const n=KE[e]==null?0:KE[e]+1;return KE[e]=n,e+"-"+n},[e,t])}function F9(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const s=Object.entries(o);for(const[l,u]of s){const d=i[l];d!=null&&(i[l]=d+e*u)}return i},{...t})}}const dh=F9(1),q0=F9(-1);function Nge(e){return"clientX"in e&&"clientY"in e}function LA(e){if(!e)return!1;const{KeyboardEvent:t}=Li(e.target);return t&&e instanceof t}function Rge(e){if(!e)return!1;const{TouchEvent:t}=Li(e.target);return t&&e instanceof t}function _C(e){if(Rge(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Nge(e)?{x:e.clientX,y:e.clientY}:null}const V0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[V0.Translate.toString(e),V0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),xj="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ige(e){return e.matches(xj)?e:e.querySelector(xj)}const Oge={display:"none"};function jge(e){let{id:t,value:n}=e;return yt.createElement("div",{id:t,style:Oge},n)}function Dge(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return yt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function Mge(){const[e,t]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const L9=T.createContext(null);function Pge(e){const t=T.useContext(L9);T.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Fge(){const[e]=T.useState(()=>new Set),t=T.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[T.useCallback(r=>{let{type:a,event:i}=r;e.forEach(o=>{var s;return(s=o[a])==null?void 0:s.call(o,i)})},[e]),t]}const Lge={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$ge={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Bge(e){let{announcements:t=$ge,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=Lge}=e;const{announce:i,announcement:o}=Mge(),s=Ug("DndLiveRegion"),[l,u]=T.useState(!1);if(T.useEffect(()=>{u(!0)},[]),Pge(T.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:g}=h;t.onDragMove&&i(t.onDragMove({active:p,over:g}))},onDragOver(h){let{active:p,over:g}=h;i(t.onDragOver({active:p,over:g}))},onDragEnd(h){let{active:p,over:g}=h;i(t.onDragEnd({active:p,over:g}))},onDragCancel(h){let{active:p,over:g}=h;i(t.onDragCancel({active:p,over:g}))}}),[i,t])),!l)return null;const d=yt.createElement(yt.Fragment,null,yt.createElement(jge,{id:r,value:a.draggable}),yt.createElement(Dge,{id:s,announcement:o}));return n?Ps.createPortal(d,n):d}var va;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(va||(va={}));function dw(){}function Sj(e,t){return T.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function zge(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ns=Object.freeze({x:0,y:0});function $9(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function B9(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Uge(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ej(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function z9(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Cj(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Hge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Cj(t,t.left,t.top),i=[];for(const o of r){const{id:s}=o,l=n.get(s);if(l){const u=$9(Cj(l),a);i.push({id:s,data:{droppableContainer:o,value:u}})}}return i.sort(B9)},qge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Ej(t),i=[];for(const o of r){const{id:s}=o,l=n.get(s);if(l){const u=Ej(l),d=a.reduce((p,g,v)=>p+$9(u[v],g),0),h=Number((d/4).toFixed(4));i.push({id:s,data:{droppableContainer:o,value:h}})}}return i.sort(B9)};function Vge(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-r,s=i-n;if(r<a&&n<i){const l=t.width*t.height,u=e.width*e.height,d=o*s,h=d/(l+u-d);return Number(h.toFixed(4))}return 0}const Gge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:o}=i,s=n.get(o);if(s){const l=Vge(s,t);l>0&&a.push({id:o,data:{droppableContainer:i,value:l}})}}return a.sort(Uge)};function Wge(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function U9(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ns}function Kge(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((o,s)=>({...o,top:o.top+e*s.y,bottom:o.bottom+e*s.y,left:o.left+e*s.x,right:o.right+e*s.x}),{...n})}}const Zge=Kge(1);function Yge(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Xge(e,t,n){const r=Yge(t);if(!r)return e;const{scaleX:a,scaleY:i,x:o,y:s}=r,l=e.left-o-(1-a)*parseFloat(n),u=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l}}const Jge={ignoreTransform:!1};function hp(e,t){t===void 0&&(t=Jge);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Li(e).getComputedStyle(e);u&&(n=Xge(n,u,d))}const{top:r,left:a,width:i,height:o,bottom:s,right:l}=n;return{top:r,left:a,width:i,height:o,bottom:s,right:l}}function kj(e){return hp(e,{ignoreTransform:!0})}function Qge(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function eye(e,t){return t===void 0&&(t=Li(e).getComputedStyle(e)),t.position==="fixed"}function tye(e,t){t===void 0&&(t=Li(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function H1(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(PA(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Bg(a)||P9(a)||n.includes(a))return n;const i=Li(e).getComputedStyle(a);return a!==e&&tye(a,i)&&n.push(a),eye(a,i)?n:r(a.parentNode)}return e?r(e):n}function H9(e){const[t]=H1(e,1);return t??null}function ZE(e){return!U1||!e?null:dp(e)?e:MA(e)?PA(e)||e===fp(e).scrollingElement?window:Bg(e)?e:null:null}function q9(e){return dp(e)?e.scrollX:e.scrollLeft}function V9(e){return dp(e)?e.scrollY:e.scrollTop}function xC(e){return{x:q9(e),y:V9(e)}}var Da;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Da||(Da={}));function G9(e){return!U1||!e?!1:e===document.scrollingElement}function W9(e){const t={x:0,y:0},n=G9(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,s=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:s,maxScroll:r,minScroll:t}}const nye={x:.2,y:.2};function rye(e,t,n,r,a){let{top:i,left:o,right:s,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=nye);const{isTop:u,isBottom:d,isLeft:h,isRight:p}=W9(e),g={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+b.height?(g.y=Da.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!d&&l>=t.bottom-b.height&&(g.y=Da.Forward,v.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!p&&s>=t.right-b.width?(g.x=Da.Forward,v.x=r*Math.abs((t.right-b.width-s)/b.width)):!h&&o<=t.left+b.width&&(g.x=Da.Backward,v.x=r*Math.abs((t.left+b.width-o)/b.width)),{direction:g,speed:v}}function aye(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function K9(e){return e.reduce((t,n)=>dh(t,xC(n)),ns)}function iye(e){return e.reduce((t,n)=>t+q9(n),0)}function oye(e){return e.reduce((t,n)=>t+V9(n),0)}function sye(e,t){if(t===void 0&&(t=hp),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);H9(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const lye=[["x",["left","right"],iye],["y",["top","bottom"],oye]];class $A{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=H1(n),a=K9(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,s]of lye)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=s(r),d=a[i]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Bm{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function cye(e){const{EventTarget:t}=Li(e);return e instanceof t?e:fp(e)}function YE(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var wo;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(wo||(wo={}));function Aj(e){e.preventDefault()}function uye(e){e.stopPropagation()}var Vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Vn||(Vn={}));const Z9={start:[Vn.Space,Vn.Enter],cancel:[Vn.Esc],end:[Vn.Space,Vn.Enter,Vn.Tab]},dye=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Vn.Right:return{...n,x:n.x+25};case Vn.Left:return{...n,x:n.x-25};case Vn.Down:return{...n,y:n.y+25};case Vn.Up:return{...n,y:n.y-25}}};class BA{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Bm(fp(n)),this.windowListeners=new Bm(Li(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(wo.Resize,this.handleCancel),this.windowListeners.add(wo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(wo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&sye(r),n(ns)}handleKeyDown(t){if(LA(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=Z9,coordinateGetter:o=dye,scrollBehavior:s="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:ns;this.referenceCoordinates||(this.referenceCoordinates=d);const h=o(t,{active:n,context:r.current,currentCoordinates:d});if(h){const p=q0(h,d),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const _=t.code,{isTop:x,isRight:S,isLeft:E,isBottom:C,maxScroll:k,minScroll:R}=W9(b),j=aye(b),O={x:Math.min(_===Vn.Right?j.right-j.width/2:j.right,Math.max(_===Vn.Right?j.left:j.left+j.width/2,h.x)),y:Math.min(_===Vn.Down?j.bottom-j.height/2:j.bottom,Math.max(_===Vn.Down?j.top:j.top+j.height/2,h.y))},L=_===Vn.Right&&!S||_===Vn.Left&&!E,z=_===Vn.Down&&!C||_===Vn.Up&&!x;if(L&&O.x!==h.x){const Y=b.scrollLeft+p.x,F=_===Vn.Right&&Y<=k.x||_===Vn.Left&&Y>=R.x;if(F&&!p.y){b.scrollTo({left:Y,behavior:s});return}F?g.x=b.scrollLeft-Y:g.x=_===Vn.Right?b.scrollLeft-k.x:b.scrollLeft-R.x,g.x&&b.scrollBy({left:-g.x,behavior:s});break}else if(z&&O.y!==h.y){const Y=b.scrollTop+p.y,F=_===Vn.Down&&Y<=k.y||_===Vn.Up&&Y>=R.y;if(F&&!p.x){b.scrollTo({top:Y,behavior:s});return}F?g.y=b.scrollTop-Y:g.y=_===Vn.Down?b.scrollTop-k.y:b.scrollTop-R.y,g.y&&b.scrollBy({top:-g.y,behavior:s});break}}this.handleMove(t,dh(q0(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}BA.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Z9,onActivation:a}=t,{active:i}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const s=i.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function Tj(e){return!!(e&&"distance"in e)}function Nj(e){return!!(e&&"delay"in e)}class zA{constructor(t,n,r){var a;r===void 0&&(r=cye(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:o}=i;this.props=t,this.events=n,this.document=fp(o),this.documentListeners=new Bm(this.document),this.listeners=new Bm(r),this.windowListeners=new Bm(Li(o)),this.initialCoordinates=(a=_C(i))!=null?a:ns,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(wo.Resize,this.handleCancel),this.windowListeners.add(wo.DragStart,Aj),this.windowListeners.add(wo.VisibilityChange,this.handleCancel),this.windowListeners.add(wo.ContextMenu,Aj),this.documentListeners.add(wo.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Nj(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Tj(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(wo.Click,uye,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(wo.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:s}}=i;if(!a)return;const l=(n=_C(t))!=null?n:ns,u=q0(a,l);if(!r&&s){if(Tj(s)){if(s.tolerance!=null&&YE(u,s.tolerance))return this.handleCancel();if(YE(u,s.distance))return this.handleStart()}if(Nj(s)&&YE(u,s.tolerance))return this.handleCancel();this.handlePending(s,u);return}t.cancelable&&t.preventDefault(),o(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const fye={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class UA extends zA{constructor(t){const{event:n}=t,r=fp(n.target);super(t,fye,r)}}UA.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const hye={move:{name:"mousemove"},end:{name:"mouseup"}};var SC;(function(e){e[e.RightClick=2]="RightClick"})(SC||(SC={}));class pye extends zA{constructor(t){super(t,hye,fp(t.event.target))}}pye.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===SC.RightClick?!1:(r==null||r({event:n}),!0)}}];const XE={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class mye extends zA{constructor(t){super(t,XE)}static setup(){return window.addEventListener(XE.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(XE.move.name,t)};function t(){}}}mye.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var zm;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(zm||(zm={}));var fw;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(fw||(fw={}));function gye(e){let{acceleration:t,activator:n=zm.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:s=fw.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:p}=e;const g=bye({delta:h,disabled:!i}),[v,b]=Tge(),_=T.useRef({x:0,y:0}),x=T.useRef({x:0,y:0}),S=T.useMemo(()=>{switch(n){case zm.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case zm.DraggableRect:return a}},[n,a,l]),E=T.useRef(null),C=T.useCallback(()=>{const R=E.current;if(!R)return;const j=_.current.x*x.current.x,O=_.current.y*x.current.y;R.scrollBy(j,O)},[]),k=T.useMemo(()=>s===fw.TreeOrder?[...u].reverse():u,[s,u]);T.useEffect(()=>{if(!i||!u.length||!S){b();return}for(const R of k){if((r==null?void 0:r(R))===!1)continue;const j=u.indexOf(R),O=d[j];if(!O)continue;const{direction:L,speed:z}=rye(R,O,S,t,p);for(const Y of["x","y"])g[Y][L[Y]]||(z[Y]=0,L[Y]=0);if(z.x>0||z.y>0){b(),E.current=R,v(C,o),_.current=z,x.current=L;return}}_.current={x:0,y:0},x.current={x:0,y:0},b()},[t,C,r,b,i,o,JSON.stringify(S),JSON.stringify(g),v,u,k,d,JSON.stringify(p)])}const yye={x:{[Da.Backward]:!1,[Da.Forward]:!1},y:{[Da.Backward]:!1,[Da.Forward]:!1}};function bye(e){let{delta:t,disabled:n}=e;const r=wC(t);return zg(a=>{if(n||!r||!a)return yye;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Da.Backward]:a.x[Da.Backward]||i.x===-1,[Da.Forward]:a.x[Da.Forward]||i.x===1},y:{[Da.Backward]:a.y[Da.Backward]||i.y===-1,[Da.Forward]:a.y[Da.Forward]||i.y===1}}},[n,t,r])}function vye(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return zg(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function wye(e,t){return T.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...i]},[]),[e,t])}var G0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(G0||(G0={}));var EC;(function(e){e.Optimized="optimized"})(EC||(EC={}));const Rj=new Map;function _ye(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,o]=T.useState(null),{frequency:s,measure:l,strategy:u}=a,d=T.useRef(e),h=_(),p=H0(h),g=T.useCallback(function(x){x===void 0&&(x=[]),!p.current&&o(S=>S===null?x:S.concat(x.filter(E=>!S.includes(E))))},[p]),v=T.useRef(null),b=zg(x=>{if(h&&!n)return Rj;if(!x||x===Rj||d.current!==e||i!=null){const S=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,k=C?new $A(l(C),C):null;E.rect.current=k,k&&S.set(E.id,k)}return S}return x},[e,i,n,h,l]);return T.useEffect(()=>{d.current=e},[e]),T.useEffect(()=>{h||g()},[n,h]),T.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),T.useEffect(()=>{h||typeof s!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},s))},[s,h,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(u){case G0.Always:return!1;case G0.BeforeDragging:return n;default:return!n}}}function Y9(e,t){return zg(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function xye(e,t){return Y9(e,t)}function Sye(e){let{callback:t,disabled:n}=e;const r=FA(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function q1(e){let{callback:t,disabled:n}=e;const r=FA(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Eye(e){return new $A(hp(e),e)}function Ij(e,t,n){t===void 0&&(t=Eye);const[r,a]=T.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const o=Sye({callback(l){if(e)for(const u of l){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),s=q1({callback:i});return Ws(()=>{i(),e?(s==null||s.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(s==null||s.disconnect(),o==null||o.disconnect())},[e]),r}function Cye(e){const t=Y9(e);return U9(e,t)}const Oj=[];function kye(e){const t=T.useRef(e),n=zg(r=>e?r&&r!==Oj&&e&&t.current&&e.parentNode===t.current.parentNode?r:H1(e):Oj,[e]);return T.useEffect(()=>{t.current=e},[e]),n}function Aye(e){const[t,n]=T.useState(null),r=T.useRef(e),a=T.useCallback(i=>{const o=ZE(i.target);o&&n(s=>s?(s.set(o,xC(o)),new Map(s)):null)},[]);return T.useEffect(()=>{const i=r.current;if(e!==i){o(i);const s=e.map(l=>{const u=ZE(l);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,xC(u)]):null}).filter(l=>l!=null);n(s.length?new Map(s):null),r.current=e}return()=>{o(e),o(i)};function o(s){s.forEach(l=>{const u=ZE(l);u==null||u.removeEventListener("scroll",a)})}},[a,e]),T.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>dh(i,o),ns):K9(e):ns,[e,t])}function jj(e,t){t===void 0&&(t=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},t),T.useEffect(()=>{const r=e!==ns;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?q0(e,n.current):ns}function Tye(e){T.useEffect(()=>{if(!U1)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Nye(e,t){return T.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,t)},n},{}),[e,t])}function X9(e){return T.useMemo(()=>e?Qge(e):null,[e])}const Dj=[];function Rye(e,t){t===void 0&&(t=hp);const[n]=e,r=X9(n?Li(n):null),[a,i]=T.useState(Dj);function o(){i(()=>e.length?e.map(l=>G9(l)?r:new $A(t(l),l)):Dj)}const s=q1({callback:o});return Ws(()=>{s==null||s.disconnect(),o(),e.forEach(l=>s==null?void 0:s.observe(l))},[e]),a}function Iye(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Bg(t)?t:e}function Oye(e){let{measure:t}=e;const[n,r]=T.useState(null),a=T.useCallback(u=>{for(const{target:d}of u)if(Bg(d)){r(h=>{const p=t(d);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=q1({callback:a}),o=T.useCallback(u=>{const d=Iye(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[s,l]=uw(o);return T.useMemo(()=>({nodeRef:s,rect:n,setRef:l}),[n,s,l])}const jye=[{sensor:UA,options:{}},{sensor:BA,options:{}}],Dye={current:{}},Qb={draggable:{measure:kj},droppable:{measure:kj,strategy:G0.WhileDragging,frequency:EC.Optimized},dragOverlay:{measure:hp}};class Um extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Mye={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Um,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:dw},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qb,measureDroppableContainers:dw,windowRect:null,measuringScheduled:!1},Pye={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:dw,draggableNodes:new Map,over:null,measureDroppableContainers:dw},V1=T.createContext(Pye),J9=T.createContext(Mye);function Fye(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Um}}}function Lye(e,t){switch(t.type){case va.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case va.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case va.DragEnd:case va.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case va.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new Um(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case va.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new Um(e.droppable.containers);return o.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case va.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new Um(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function $ye(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=T.useContext(V1),i=wC(r),o=wC(n==null?void 0:n.id);return T.useEffect(()=>{if(!t&&!r&&i&&o!=null){if(!LA(i)||document.activeElement===i.target)return;const s=a.get(o);if(!s)return;const{activatorNode:l,node:u}=s;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const h=Ige(d);if(h){h.focus();break}}})}},[r,t,a,o,i]),null}function Bye(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function zye(e){return T.useMemo(()=>({draggable:{...Qb.draggable,...e==null?void 0:e.draggable},droppable:{...Qb.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Qb.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Uye(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=T.useRef(!1),{x:o,y:s}=typeof a=="boolean"?{x:a,y:a}:a;Ws(()=>{if(!o&&!s||!t){i.current=!1;return}if(i.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=U9(d,r);if(o||(h.x=0),s||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=H9(u);p&&p.scrollBy({top:h.y,left:h.x})}},[t,o,s,r,n])}const Q9=T.createContext({...ns,scaleX:1,scaleY:1});var zc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(zc||(zc={}));const Hye=T.memo(function(t){var n,r,a,i;let{id:o,accessibility:s,autoScroll:l=!0,children:u,sensors:d=jye,collisionDetection:h=Gge,measuring:p,modifiers:g,...v}=t;const b=T.useReducer(Lye,void 0,Fye),[_,x]=b,[S,E]=Fge(),[C,k]=T.useState(zc.Uninitialized),R=C===zc.Initialized,{draggable:{active:j,nodes:O,translate:L},droppable:{containers:z}}=_,Y=j!=null?O.get(j):null,F=T.useRef({initial:null,translated:null}),K=T.useMemo(()=>{var tt;return j!=null?{id:j,data:(tt=Y==null?void 0:Y.data)!=null?tt:Dye,rect:F}:null},[j,Y]),q=T.useRef(null),[fe,te]=T.useState(null),[re,X]=T.useState(null),ae=H0(v,Object.values(v)),U=Ug("DndDescribedBy",o),ee=T.useMemo(()=>z.getEnabled(),[z]),J=zye(p),{droppableRects:ue,measureDroppableContainers:be,measuringScheduled:_e}=_ye(ee,{dragging:R,dependencies:[L.x,L.y],config:J.droppable}),Pe=vye(O,j),Ne=T.useMemo(()=>re?_C(re):null,[re]),Re=Be(),Ce=xye(Pe,J.draggable.measure);Uye({activeNode:j!=null?O.get(j):null,config:Re.layoutShiftCompensation,initialRect:Ce,measure:J.draggable.measure});const Fe=Ij(Pe,J.draggable.measure,Ce),Qe=Ij(Pe?Pe.parentElement:null),Le=T.useRef({activatorEvent:null,active:null,activeNode:Pe,collisionRect:null,collisions:null,droppableRects:ue,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ie=z.getNodeFor((n=Le.current.over)==null?void 0:n.id),V=Oye({measure:J.dragOverlay.measure}),me=(r=V.nodeRef.current)!=null?r:Pe,Ae=R?(a=V.rect)!=null?a:Fe:null,se=!!(V.nodeRef.current&&V.rect),ie=Cye(se?null:Fe),Q=X9(me?Li(me):null),xe=kye(R?Ie??Pe:null),Me=Rye(xe),Ee=Bye(g,{transform:{x:L.x-ie.x,y:L.y-ie.y,scaleX:1,scaleY:1},activatorEvent:re,active:K,activeNodeRect:Fe,containerNodeRect:Qe,draggingNodeRect:Ae,over:Le.current.over,overlayNodeRect:V.rect,scrollableAncestors:xe,scrollableAncestorRects:Me,windowRect:Q}),We=Ne?dh(Ne,L):null,kt=Aye(xe),at=jj(kt),_t=jj(kt,[Fe]),Dt=dh(Ee,at),jt=Ae?Zge(Ae,Ee):null,Gt=K&&jt?h({active:K,collisionRect:jt,droppableRects:ue,droppableContainers:ee,pointerCoordinates:We}):null,ye=z9(Gt,"id"),[I,G]=T.useState(null),de=se?Ee:dh(Ee,_t),Oe=Wge(de,(i=I==null?void 0:I.rect)!=null?i:null,Fe),ve=T.useRef(null),ke=T.useCallback((tt,ge)=>{let{sensor:je,options:Ke}=ge;if(q.current==null)return;const Nt=O.get(q.current);if(!Nt)return;const pe=tt.nativeEvent,H=new je({active:q.current,activeNode:Nt,event:pe,options:Ke,context:Le,onAbort(W){if(!O.get(W))return;const{onDragAbort:Te}=ae.current,He={id:W};Te==null||Te(He),S({type:"onDragAbort",event:He})},onPending(W,he,Te,He){if(!O.get(W))return;const{onDragPending:Vt}=ae.current,ut={id:W,constraint:he,initialCoordinates:Te,offset:He};Vt==null||Vt(ut),S({type:"onDragPending",event:ut})},onStart(W){const he=q.current;if(he==null)return;const Te=O.get(he);if(!Te)return;const{onDragStart:He}=ae.current,pt={activatorEvent:pe,active:{id:he,data:Te.data,rect:F}};Ps.unstable_batchedUpdates(()=>{He==null||He(pt),k(zc.Initializing),x({type:va.DragStart,initialCoordinates:W,active:he}),S({type:"onDragStart",event:pt}),te(ve.current),X(pe)})},onMove(W){x({type:va.DragMove,coordinates:W})},onEnd:B(va.DragEnd),onCancel:B(va.DragCancel)});ve.current=H;function B(W){return async function(){const{active:Te,collisions:He,over:pt,scrollAdjustedTranslate:Vt}=Le.current;let ut=null;if(Te&&Vt){const{cancelDrop:At}=ae.current;ut={activatorEvent:pe,active:Te,collisions:He,delta:Vt,over:pt},W===va.DragEnd&&typeof At=="function"&&await Promise.resolve(At(ut))&&(W=va.DragCancel)}q.current=null,Ps.unstable_batchedUpdates(()=>{x({type:W}),k(zc.Uninitialized),G(null),te(null),X(null),ve.current=null;const At=W===va.DragEnd?"onDragEnd":"onDragCancel";if(ut){const Mt=ae.current[At];Mt==null||Mt(ut),S({type:At,event:ut})}})}}},[O]),le=T.useCallback((tt,ge)=>(je,Ke)=>{const Nt=je.nativeEvent,pe=O.get(Ke);if(q.current!==null||!pe||Nt.dndKit||Nt.defaultPrevented)return;const H={active:pe};tt(je,ge.options,H)===!0&&(Nt.dndKit={capturedBy:ge.sensor},q.current=Ke,ke(je,ge))},[O,ke]),ft=wye(d,le);Tye(d),Ws(()=>{Fe&&C===zc.Initializing&&k(zc.Initialized)},[Fe,C]),T.useEffect(()=>{const{onDragMove:tt}=ae.current,{active:ge,activatorEvent:je,collisions:Ke,over:Nt}=Le.current;if(!ge||!je)return;const pe={active:ge,activatorEvent:je,collisions:Ke,delta:{x:Dt.x,y:Dt.y},over:Nt};Ps.unstable_batchedUpdates(()=>{tt==null||tt(pe),S({type:"onDragMove",event:pe})})},[Dt.x,Dt.y]),T.useEffect(()=>{const{active:tt,activatorEvent:ge,collisions:je,droppableContainers:Ke,scrollAdjustedTranslate:Nt}=Le.current;if(!tt||q.current==null||!ge||!Nt)return;const{onDragOver:pe}=ae.current,H=Ke.get(ye),B=H&&H.rect.current?{id:H.id,rect:H.rect.current,data:H.data,disabled:H.disabled}:null,W={active:tt,activatorEvent:ge,collisions:je,delta:{x:Nt.x,y:Nt.y},over:B};Ps.unstable_batchedUpdates(()=>{G(B),pe==null||pe(W),S({type:"onDragOver",event:W})})},[ye]),Ws(()=>{Le.current={activatorEvent:re,active:K,activeNode:Pe,collisionRect:jt,collisions:Gt,droppableRects:ue,draggableNodes:O,draggingNode:me,draggingNodeRect:Ae,droppableContainers:z,over:I,scrollableAncestors:xe,scrollAdjustedTranslate:Dt},F.current={initial:Ae,translated:jt}},[K,Pe,Gt,jt,O,me,Ae,ue,z,I,xe,Dt]),gye({...Re,delta:L,draggingRect:jt,pointerCoordinates:We,scrollableAncestors:xe,scrollableAncestorRects:Me});const vt=T.useMemo(()=>({active:K,activeNode:Pe,activeNodeRect:Fe,activatorEvent:re,collisions:Gt,containerNodeRect:Qe,dragOverlay:V,draggableNodes:O,droppableContainers:z,droppableRects:ue,over:I,measureDroppableContainers:be,scrollableAncestors:xe,scrollableAncestorRects:Me,measuringConfiguration:J,measuringScheduled:_e,windowRect:Q}),[K,Pe,Fe,re,Gt,Qe,V,O,z,ue,I,be,xe,Me,J,_e,Q]),M=T.useMemo(()=>({activatorEvent:re,activators:ft,active:K,activeNodeRect:Fe,ariaDescribedById:{draggable:U},dispatch:x,draggableNodes:O,over:I,measureDroppableContainers:be}),[re,ft,K,Fe,x,U,O,I,be]);return yt.createElement(L9.Provider,{value:E},yt.createElement(V1.Provider,{value:M},yt.createElement(J9.Provider,{value:vt},yt.createElement(Q9.Provider,{value:Oe},u)),yt.createElement($ye,{disabled:(s==null?void 0:s.restoreFocus)===!1})),yt.createElement(Bge,{...s,hiddenTextDescribedById:U}));function Be(){const tt=(fe==null?void 0:fe.autoScrollEnabled)===!1,ge=typeof l=="object"?l.enabled===!1:l===!1,je=R&&!tt&&!ge;return typeof l=="object"?{...l,enabled:je}:{enabled:je}}}),qye=T.createContext(null),Mj="button",Vye="Draggable";function Gye(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=Ug(Vye),{activators:o,activatorEvent:s,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:p}=T.useContext(V1),{role:g=Mj,roleDescription:v="draggable",tabIndex:b=0}=a??{},_=(l==null?void 0:l.id)===t,x=T.useContext(_?Q9:qye),[S,E]=uw(),[C,k]=uw(),R=Nye(o,t),j=H0(n);Ws(()=>(h.set(t,{id:t,key:i,node:S,activatorNode:C,data:j}),()=>{const L=h.get(t);L&&L.key===i&&h.delete(t)}),[h,t]);const O=T.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":_&&g===Mj?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,g,b,_,v,d.draggable]);return{active:l,activatorEvent:s,activeNodeRect:u,attributes:O,isDragging:_,listeners:r?void 0:R,node:S,over:p,setNodeRef:E,setActivatorNodeRef:k,transform:x}}function Wye(){return T.useContext(J9)}const Kye="Droppable",Zye={timeout:25};function Yye(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=Ug(Kye),{active:o,dispatch:s,over:l,measureDroppableContainers:u}=T.useContext(V1),d=T.useRef({disabled:n}),h=T.useRef(!1),p=T.useRef(null),g=T.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:_}={...Zye,...a},x=H0(b??r),S=T.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),g.current=null},_)},[_]),E=q1({callback:S,disabled:v||!o}),C=T.useCallback((O,L)=>{E&&(L&&(E.unobserve(L),h.current=!1),O&&E.observe(O))},[E]),[k,R]=uw(C),j=H0(t);return T.useEffect(()=>{!E||!k.current||(E.disconnect(),h.current=!1,E.observe(k.current))},[k,E]),T.useEffect(()=>(s({type:va.RegisterDroppable,element:{id:r,key:i,disabled:n,node:k,rect:p,data:j}}),()=>s({type:va.UnregisterDroppable,key:i,id:r})),[r]),T.useEffect(()=>{n!==d.current.disabled&&(s({type:va.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,s]),{active:o,rect:p,isOver:(l==null?void 0:l.id)===r,node:k,over:l,setNodeRef:R}}function HA(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Xye(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function Lb(e){return e!==null&&e>=0}function Jye(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Qye(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const eB=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=HA(t,r,n),o=t[a],s=i[a];return!s||!o?null:{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}},$b={scaleX:1,scaleY:1},ebe=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:o}=e;const s=(t=i[n])!=null?t:r;if(!s)return null;if(a===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(s.top+s.height):u.top-s.top,...$b}:null}const l=tbe(i,a,n);return a>n&&a<=o?{x:0,y:-s.height-l,...$b}:a<n&&a>=o?{x:0,y:s.height+l,...$b}:{x:0,y:0,...$b}};function tbe(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const tB="Sortable",nB=yt.createContext({activeIndex:-1,containerId:tB,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:eB,disabled:{draggable:!1,droppable:!1}});function nbe(e){let{children:t,id:n,items:r,strategy:a=eB,disabled:i=!1}=e;const{active:o,dragOverlay:s,droppableRects:l,over:u,measureDroppableContainers:d}=Wye(),h=Ug(tB,n),p=s.rect!==null,g=T.useMemo(()=>r.map(R=>typeof R=="object"&&"id"in R?R.id:R),[r]),v=o!=null,b=o?g.indexOf(o.id):-1,_=u?g.indexOf(u.id):-1,x=T.useRef(g),S=!Jye(g,x.current),E=_!==-1&&b===-1||S,C=Qye(i);Ws(()=>{S&&v&&d(g)},[S,g,v,d]),T.useEffect(()=>{x.current=g},[g]);const k=T.useMemo(()=>({activeIndex:b,containerId:h,disabled:C,disableTransforms:E,items:g,overIndex:_,useDragOverlay:p,sortedRects:Xye(g,l),strategy:a}),[b,h,C.draggable,C.droppable,E,g,_,l,p,a]);return yt.createElement(nB.Provider,{value:k},t)}const rbe=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return HA(n,r,a).indexOf(t)},abe=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:o,previousItems:s,previousContainerId:l,transition:u}=e;return!u||!r||s!==i&&a===o?!1:n?!0:o!==a&&t===l},ibe={duration:200,easing:"ease"},rB="transform",obe=V0.Transition.toString({property:rB,duration:0,easing:"linear"}),sbe={roleDescription:"sortable"};function lbe(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,o]=T.useState(null),s=T.useRef(n);return Ws(()=>{if(!t&&n!==s.current&&r.current){const l=a.current;if(l){const u=hp(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&o(d)}}n!==s.current&&(s.current=n)},[t,n,r,a]),T.useEffect(()=>{i&&o(null)},[i]),i}function cbe(e){let{animateLayoutChanges:t=abe,attributes:n,disabled:r,data:a,getNewIndex:i=rbe,id:o,strategy:s,resizeObserverConfig:l,transition:u=ibe}=e;const{items:d,containerId:h,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:b,overIndex:_,useDragOverlay:x,strategy:S}=T.useContext(nB),E=ube(r,g),C=d.indexOf(o),k=T.useMemo(()=>({sortable:{containerId:h,index:C,items:d},...a}),[h,a,C,d]),R=T.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:j,node:O,isOver:L,setNodeRef:z}=Yye({id:o,data:k,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...l}}),{active:Y,activatorEvent:F,activeNodeRect:K,attributes:q,setNodeRef:fe,listeners:te,isDragging:re,over:X,setActivatorNodeRef:ae,transform:U}=Gye({id:o,data:k,attributes:{...sbe,...n},disabled:E.draggable}),ee=Age(z,fe),J=!!Y,ue=J&&!v&&Lb(p)&&Lb(_),be=!x&&re,_e=be&&ue?U:null,Ne=ue?_e??(s??S)({rects:b,activeNodeRect:K,activeIndex:p,overIndex:_,index:C}):null,Re=Lb(p)&&Lb(_)?i({id:o,items:d,activeIndex:p,overIndex:_}):C,Ce=Y==null?void 0:Y.id,Fe=T.useRef({activeId:Ce,items:d,newIndex:Re,containerId:h}),Qe=d!==Fe.current.items,Le=t({active:Y,containerId:h,isDragging:re,isSorting:J,id:o,index:C,items:d,newIndex:Fe.current.newIndex,previousItems:Fe.current.items,previousContainerId:Fe.current.containerId,transition:u,wasDragging:Fe.current.activeId!=null}),Ie=lbe({disabled:!Le,index:C,node:O,rect:j});return T.useEffect(()=>{J&&Fe.current.newIndex!==Re&&(Fe.current.newIndex=Re),h!==Fe.current.containerId&&(Fe.current.containerId=h),d!==Fe.current.items&&(Fe.current.items=d)},[J,Re,h,d]),T.useEffect(()=>{if(Ce===Fe.current.activeId)return;if(Ce!=null&&Fe.current.activeId==null){Fe.current.activeId=Ce;return}const me=setTimeout(()=>{Fe.current.activeId=Ce},50);return()=>clearTimeout(me)},[Ce]),{active:Y,activeIndex:p,attributes:q,data:k,rect:j,index:C,newIndex:Re,items:d,isOver:L,isSorting:J,isDragging:re,listeners:te,node:O,overIndex:_,over:X,setNodeRef:ee,setActivatorNodeRef:ae,setDroppableNodeRef:z,setDraggableNodeRef:fe,transform:Ie??Ne,transition:V()};function V(){if(Ie||Qe&&Fe.current.newIndex===C)return obe;if(!(be&&!LA(F)||!u)&&(J||Le))return V0.Transition.toString({...u,property:rB})}}function ube(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function hw(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const dbe=[Vn.Down,Vn.Right,Vn.Up,Vn.Left],fbe=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:s}}=t;if(dbe.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=a.get(h.id);if(p)switch(e.code){case Vn.Down:r.top<p.top&&l.push(h);break;case Vn.Up:r.top>p.top&&l.push(h);break;case Vn.Left:r.left>p.left&&l.push(h);break;case Vn.Right:r.left<p.left&&l.push(h);break}});const u=qge({collisionRect:r,droppableRects:a,droppableContainers:l});let d=z9(u,"id");if(d===(o==null?void 0:o.id)&&u.length>1&&(d=u[1].id),d!=null){const h=i.get(n.id),p=i.get(d),g=p?a.get(p.id):null,v=p==null?void 0:p.node.current;if(v&&g&&h&&p){const _=H1(v).some((R,j)=>s[j]!==R),x=aB(h,p),S=hbe(h,p),E=_||!x?{x:0,y:0}:{x:S?r.width-g.width:0,y:S?r.height-g.height:0},C={x:g.left,y:g.top};return E.x&&E.y?C:q0(C,E)}}}};function aB(e,t){return!hw(e)||!hw(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function hbe(e,t){return!hw(e)||!hw(t)||!aB(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const pbe=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:o,transition:s,isDragging:l}=cbe({id:e,disabled:n}),u={transform:V0.Transform.toString(o),transition:s,zIndex:l?10:void 0,opacity:n?.5:1};return y.jsxs("div",{ref:i,style:u,...r,...a,className:Rt("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",l&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[y.jsx(SH,{className:Rt("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),y.jsx(on,{className:Rt("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},mbe=()=>{const{setGlobalModelSortOrder:e,dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAllAvailableModelDefsForProvider:a}=Pn(hn(p=>({setGlobalModelSortOrder:p.setGlobalModelSortOrder,dbProviderConfigs:p.dbProviderConfigs,globalModelSortOrder:p.globalModelSortOrder,isLoading:p.isLoading,getAllAvailableModelDefsForProvider:p.getAllAvailableModelDefsForProvider}))),[i,o]=T.useState(""),s=T.useMemo(()=>{const p=new Map,g=new Set;t.forEach(x=>{if(!x.isEnabled||!x.enabledModels)return;const S=a(x.id),E=new Map(S.map(C=>[C.id,C]));x.enabledModels.forEach(C=>{const k=qc(x.id,C),R=E.get(C);R&&(g.add(k),p.set(k,{id:k,name:R.name||C,providerId:x.id,providerName:x.name,metadata:R}))})});const v=[],b=new Set;n.forEach(x=>{if(g.has(x)){const S=p.get(x);S&&!b.has(x)&&(v.push(S),b.add(x))}});const _=Array.from(g).filter(x=>!b.has(x)).map(x=>p.get(x)).filter(x=>!!x).sort((x,S)=>x.name.localeCompare(S.name));return[...v,..._]},[t,n,a]),l=T.useMemo(()=>{if(!i.trim())return s;const p=i.toLowerCase();return s.filter(g=>g.name.toLowerCase().includes(p)||g.providerName.toLowerCase().includes(p)||g.id.toLowerCase().includes(p))},[s,i]),u=T.useMemo(()=>l.map(p=>p.id),[l]),d=T.useCallback(p=>{const{active:g,over:v}=p;if(v&&g.id!==v.id){const b=s.map(C=>C.id),_=g.id,x=v.id,S=b.indexOf(_),E=b.indexOf(x);if(S!==-1&&E!==-1){const C=HA(b,S,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[s,e]),h=zge(Sj(UA),Sj(BA,{coordinateGetter:fbe}));return r?y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx(Or,{className:"h-8 w-1/3"}),y.jsx(Or,{className:"h-6 w-1/2"}),y.jsx(Or,{className:"h-64 w-full"})]}):y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),y.jsx(Fh,{}),y.jsxs("div",{className:"space-y-3",children:[y.jsx(on,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),y.jsxs("div",{className:"relative",children:[y.jsx(J0,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(Jn,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:p=>o(p.target.value),className:"pl-8 w-full",disabled:r})]}),y.jsx(Hd,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:l.length>0?y.jsx(Hye,{sensors:h,collisionDetection:Hge,onDragEnd:d,children:y.jsx(nbe,{items:u,strategy:ebe,children:l.map(p=>y.jsx(pbe,{id:p.id,name:`${p.name} (${p.providerName})`},p.id))})}):y.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},gbe=NC("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ybe({className:e,variant:t,asChild:n=!1,...r}){const a=n?Xj:"span";return y.jsx(a,{"data-slot":"badge",className:Rt(gbe({variant:t}),e),...r})}const bbe=({modelId:e})=>{var o,s,l,u,d,h,p,g,v,b,_,x,S;const{getProviderById:t,getAllAvailableModelDefsForProvider:n}=Pn(E=>({getProviderById:C=>E.dbProviderConfigs.find(k=>k.id===C),getAllAvailableModelDefsForProvider:E.getAllAvailableModelDefsForProvider})),r=T.useMemo(()=>{if(!e)return null;const{providerId:E,modelId:C}=Yl(e);if(!E||!C)return null;const k=t(E);if(!k)return null;const j=n(E).find(O=>O.id===C);return j?{...j,providerName:k.name}:null},[e,t,n]);if(!r)return y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select a model from a provider's list to view its details."});const a=E=>{if(!E)return"N/A";const C=parseFloat(E);return isNaN(C)||C===0?"Free":`$${C.toFixed(4)} / 1M tokens`},i=E=>E?`${E.toLocaleString()} tokens`:"Unknown";return y.jsx(Hd,{className:"h-full p-1",children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("h3",{className:"text-xl font-semibold",children:[r.name," ",y.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r.providerName,")"]})]}),y.jsx("p",{className:"text-sm text-muted-foreground",children:r.id}),r.description&&y.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:y.jsx("p",{children:r.description})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[y.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[y.jsx("h4",{className:"font-medium mb-1",children:"Context & Limits"}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Context Length:"})," ",i(((o=r.top_provider)==null?void 0:o.context_length)??r.context_length)]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Max Completion Tokens:"})," ",(s=r.top_provider)!=null&&s.max_completion_tokens?r.top_provider.max_completion_tokens.toLocaleString():"Default"]}),r.per_request_limits&&y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Request Limits:"})," ",y.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(r.per_request_limits,null,2)})]})]}),y.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[y.jsx("h4",{className:"font-medium mb-1",children:"Pricing (per 1M tokens)"}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Prompt:"})," ",a((l=r.pricing)==null?void 0:l.prompt)]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Completion:"})," ",a((u=r.pricing)==null?void 0:u.completion)]}),((d=r.pricing)==null?void 0:d.request)&&parseFloat(r.pricing.request)>0&&y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Request:"})," $",parseFloat(r.pricing.request).toFixed(6)]}),((h=r.pricing)==null?void 0:h.image)&&parseFloat(r.pricing.image)>0&&y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Image:"})," $",parseFloat(r.pricing.image).toFixed(6)]})]}),y.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[y.jsx("h4",{className:"font-medium mb-1",children:"Architecture"}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Modality:"})," ",((p=r.architecture)==null?void 0:p.modality)??"Unknown"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Input Modalities:"})," ",((v=(g=r.architecture)==null?void 0:g.input_modalities)==null?void 0:v.join(", "))??"Unknown"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Output Modalities:"})," ",((_=(b=r.architecture)==null?void 0:b.output_modalities)==null?void 0:_.join(", "))??"Unknown"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Tokenizer:"})," ",((x=r.architecture)==null?void 0:x.tokenizer)??"Unknown"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Instruct Type:"})," ",((S=r.architecture)==null?void 0:S.instruct_type)??"N/A"]})]}),y.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[y.jsx("h4",{className:"font-medium mb-1",children:"Supported Parameters"}),y.jsx("div",{className:"flex flex-wrap gap-1",children:r.supported_parameters&&r.supported_parameters.length>0?r.supported_parameters.map(E=>y.jsx(ybe,{variant:"secondary",children:E},E)):y.jsx("span",{className:"text-muted-foreground italic",children:"None specified"})})]})]})]})})},vbe=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=Pn(hn(p=>({apiKeys:p.dbApiKeys,addApiKey:p.addApiKey,deleteApiKey:p.deleteApiKey,isLoading:p.isLoading}))),[a,i]=T.useState(!1),[o,s]=T.useState(!1),[l,u]=T.useState({}),d=T.useCallback(async(p,g,v)=>{s(!0);try{await t(p,g,v),i(!1)}catch(b){console.error("Failed to add API key (from component):",b)}finally{s(!1)}},[t]),h=T.useCallback(async(p,g)=>{if(window.confirm(`Are you sure you want to delete the API key "${g}"? This will unlink it from any providers using it.`)){u(v=>({...v,[p]:!0}));try{await n(p)}catch(v){console.error("Failed to delete API key (from component):",v)}finally{u(v=>({...v,[p]:!1}))}}},[n]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!a&&y.jsxs(Bt,{onClick:()=>i(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[y.jsx(Y0,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),a&&y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),y.jsx(mL,{onSave:d,onCancel:()=>i(!1),isSaving:o})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!a?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Or,{className:"h-10 w-full"}),y.jsx(Or,{className:"h-10 w-full"})]}):(e||[]).length===0&&!a?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(F1,{children:[y.jsx(L1,{children:y.jsxs(Qi,{children:[y.jsx(fa,{children:"Name"}),y.jsx(fa,{children:"Provider Type"}),y.jsx(fa,{children:"Created"}),y.jsx(fa,{className:"text-right",children:"Actions"})]})}),y.jsx($1,{children:(e||[]).map(p=>{const g=l[p.id];return y.jsxs(Qi,{className:g?"opacity-50":"",children:[y.jsx(Er,{className:"font-medium",children:p.name||"Unnamed Key"}),y.jsx(Er,{children:p.providerId||"Unknown"}),y.jsx(Er,{className:"text-xs text-muted-foreground",children:X2(new Date(p.createdAt),"PPp")}),y.jsx(Er,{className:"text-right",children:y.jsx(ur,{tooltipText:"Delete Key",onClick:()=>h(p.id,p.name||"Unnamed Key"),disabled:g,"aria-label":`Delete key ${p.name||"Unnamed Key"}`,icon:g?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ho,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},p.id)})})]})})]})]})},wbe=yt.memo(vbe),_be=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:a,providerFetchStatus:i,dbProviderConfigs:o,apiKeys:s,isLoading:l}=Pn(hn(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[u,d]=T.useState(!1),h=()=>d(!0),p=T.useCallback(()=>d(!1),[]),g=T.useCallback(async b=>{await a(b)},[a]),v=T.useMemo(()=>o||[],[o]);return y.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),y.jsx("div",{className:"flex-shrink-0",children:u?y.jsx(xL,{apiKeys:s||[],onAddProvider:t,onCancel:p}):y.jsxs(Bt,{onClick:h,variant:"outline",className:"w-full",disabled:l,children:[y.jsx(Y0,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),y.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:y.jsxs("div",{className:"space-y-2",children:[l&&!u?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[y.jsx(Or,{className:"h-24 w-full"}),y.jsx(Or,{className:"h-24 w-full"}),y.jsx(Or,{className:"h-24 w-full"})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:v.map(b=>y.jsx(oge,{provider:b,apiKeys:s||[],onUpdate:n,onDelete:r,onFetchModels:g,fetchStatus:i[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&v.length===0&&!u&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},xbe=()=>{const{selectedModelForDetails:e,setSelectedModelForDetails:t}=Pn(hn(o=>({selectedModelForDetails:o._selectedModelForDetails,setSelectedModelForDetails:o.setSelectedModelForDetails}))),[n,r]=T.useState("providers-config"),a=T.useCallback(o=>{t(o),o&&r("providers-details")},[t]),i=T.useMemo(()=>[{value:"providers-config",label:"Configuration",content:y.jsx(_be,{onSelectModelForDetails:a})},{value:"providers-order",label:"Model Order",content:y.jsx(mbe,{})},{value:"api-keys",label:"API Keys",content:y.jsx(wbe,{})},{value:"providers-details",label:"Model Details",content:y.jsx(bbe,{modelId:e})}],[e,a]);return y.jsx(up,{tabs:i,initialValue:n,onValueChange:r,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},Sbe=yt.memo(xbe),Ebe=({title:e,description:t,children:n,className:r,titleClassName:a,descriptionClassName:i,contentClassName:o})=>y.jsxs("div",{className:Rt("space-y-3",r),children:[y.jsxs("div",{children:[y.jsx("h3",{className:Rt("text-lg font-medium",a),children:e}),t&&y.jsx("p",{className:Rt("text-sm text-muted-foreground",i),children:t})]}),y.jsx("div",{className:Rt(o),children:n})]}),Cbe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=Zr(hn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsx(Ebe,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"git-user-name",children:"Git User Name"}),y.jsx(Jn,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"git-user-email",children:"Git User Email"}),y.jsx(Jn,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})})})},kbe=yt.memo(Cbe),Abe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:o}=mn(hn(O=>({syncRepos:O.syncRepos,addSyncRepo:O.addSyncRepo,updateSyncRepo:O.updateSyncRepo,deleteSyncRepo:O.deleteSyncRepo,initializeOrSyncRepo:O.initializeOrSyncRepo,repoInitializationStatus:O.repoInitializationStatus,isLoading:O.isLoading}))),[s,l]=T.useState(!1),[u,d]=T.useState(null),[h,p]=T.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,v]=T.useState(!1),[b,_]=T.useState({}),x=T.useCallback(()=>{p({name:"",remoteUrl:"",branch:"main",username:"",password:""}),l(!1),d(null),v(!1)},[]),S=T.useCallback((O,L)=>{p(z=>({...z,[O]:L}))},[]),E=T.useCallback(async()=>{var O,L,z,Y;if(!((O=h.name)!=null&&O.trim())||!((L=h.remoteUrl)!=null&&L.trim())){lt.error("Repository Name and Remote URL are required.");return}v(!0);try{const F={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((z=h.branch)==null?void 0:z.trim())||"main",username:((Y=h.username)==null?void 0:Y.trim())||null,password:h.password||null};u?await n(u,F):await t(F),x()}catch(F){console.error("Failed to save sync repo:",F)}finally{v(!1)}},[h,u,t,n,x]),C=O=>{d(O.id),p({name:O.name,remoteUrl:O.remoteUrl,branch:O.branch||"main",username:O.username??"",password:O.password??""}),l(!1)},k=T.useCallback(async(O,L)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${L}"? This will unlink it from any conversations and remove the local copy.`)){_(z=>({...z,[O]:!0}));try{await r(O),u===O&&x()}catch(z){console.error("Failed to delete sync repo:",z)}finally{_(z=>({...z,[O]:!1}))}}},[r,u,x]),R=T.useCallback(async O=>{await a(O)},[a]),j=()=>{var O,L;return y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:u?"Edit Sync Repository":"Add New Sync Repository"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(on,{htmlFor:"repo-name",children:"Name"}),y.jsx(Jn,{id:"repo-name",value:h.name||"",onChange:z=>S("name",z.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(on,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),y.jsx(Jn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:z=>S("remoteUrl",z.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(on,{htmlFor:"repo-branch",children:"Branch"}),y.jsx(Jn,{id:"repo-branch",value:h.branch||"",onChange:z=>S("branch",z.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),y.jsxs("div",{className:"pt-2",children:[y.jsx(on,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),y.jsxs(g9,{variant:"destructive",className:"mt-2 mb-3",children:[y.jsx(PC,{className:"h-4 w-4"}),y.jsx(y9,{children:"Security Warning"}),y.jsx(b9,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(on,{htmlFor:"repo-username",children:"Username"}),y.jsx(Jn,{id:"repo-username",value:h.username||"",onChange:z=>S("username",z.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),y.jsxs("div",{children:[y.jsx(on,{htmlFor:"repo-password",children:"Password / Token"}),y.jsx(Jn,{id:"repo-password",type:"password",value:h.password||"",onChange:z=>S("password",z.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Bt,{variant:"ghost",size:"sm",onClick:x,disabled:g,type:"button",children:[y.jsx(Zl,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Bt,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((O=h.name)!=null&&O.trim())||!((L=h.remoteUrl)!=null&&L.trim()),type:"button",children:[g&&y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(X0,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!s&&!u&&y.jsxs(Bt,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",disabled:o,children:[y.jsx(Y0,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(s||u)&&j(),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),o&&!s&&!u?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Or,{className:"h-10 w-full"}),y.jsx(Or,{className:"h-10 w-full"}),y.jsx(Or,{className:"h-10 w-full"})]}):e.length===0&&!s&&!u?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(F1,{children:[y.jsx(L1,{children:y.jsxs(Qi,{children:[y.jsx(fa,{children:"Name"}),y.jsx(fa,{children:"Remote URL"}),y.jsx(fa,{children:"Branch"}),y.jsx(fa,{children:"Auth"}),y.jsx(fa,{className:"text-right",children:"Actions"})]})}),y.jsx($1,{children:e.map(O=>{const L=b[O.id],z=u===O.id,Y=!!O.username||!!O.password,F=i[O.id]||"idle",q=L||g||!!u||F==="syncing";let fe=null,te="Initialize/Sync Repository";return F==="syncing"?(fe=y.jsx(Gn,{className:"h-4 w-4 animate-spin mr-1"}),te="Initializing/Syncing..."):F==="idle"?(fe=y.jsx(OC,{className:"h-4 w-4 text-green-500 mr-1"}),te="Sync Successful / Ready"):F==="error"?(fe=y.jsx(pd,{className:"h-4 w-4 text-destructive mr-1"}),te="Sync Failed"):fe=y.jsx(gw,{className:"h-4 w-4 mr-1"}),y.jsxs(Qi,{className:Rt(z?"bg-muted/50":"",q&&!z?"opacity-70":""),children:[y.jsx(Er,{className:"font-medium",children:O.name}),y.jsx(Er,{className:"text-xs truncate max-w-xs",children:O.remoteUrl}),y.jsx(Er,{children:O.branch||"main"}),y.jsx(Er,{className:"text-xs",children:Y?"Configured":"None"}),y.jsxs(Er,{className:"text-right space-x-1",children:[y.jsx(ur,{tooltipText:te,onClick:()=>R(O.id),"aria-label":`Initialize or Sync repo ${O.name}`,disabled:q,icon:fe,variant:"outline",className:"h-8 w-8"}),y.jsx(ur,{tooltipText:"Edit",onClick:()=>C(O),"aria-label":`Edit repo ${O.name}`,disabled:q,icon:y.jsx(MC,{}),className:"h-8 w-8"}),y.jsx(ur,{tooltipText:"Delete",onClick:()=>k(O.id,O.name),"aria-label":`Delete repo ${O.name}`,disabled:q,icon:L?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ho,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},O.id)})})]})})]})]})},Tbe=yt.memo(Abe),Nbe=()=>{const e=T.useMemo(()=>[{value:"config",label:"User Config",content:y.jsx(kbe,{})},{value:"sync",label:"Sync Repositories",content:y.jsx(Tbe,{})}],[]);return y.jsx(up,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},Rbe=yt.memo(Nbe),iB=T.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=Zr(hn(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=U0(hn(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=ha(hn(h=>({initialSettingsTab:h.initialSettingsTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[o,s]=T.useState(a||"general");T.useEffect(()=>{e&&s(a||"general")},[e,a]);const l=h=>{h||(t(),i())},u=h=>{s(h)},d=T.useMemo(()=>{const h=[{value:"general",label:"General",content:y.jsx(W0e,{})},{value:"providers",label:"Providers & Models",content:y.jsx(Sbe,{})},...n?[{value:"assistant",label:"Assistant",content:y.jsx(Z0e,{})}]:[],{value:"git",label:"Git",content:y.jsx(Rbe,{})},{value:"data",label:"Data",content:y.jsx(X0e,{})},{value:"mods",label:"Mods",content:y.jsx(ege,{})}],p=r.map(g=>({value:g.id,label:g.title,content:yt.isValidElement(g.component)?g.component:typeof g.component=="function"?y.jsx(g.component,{}):null}));return[...h,...p]},[n,r]);return y.jsx(R1,{open:e,onOpenChange:l,children:y.jsxs(I1,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[y.jsxs(O1,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsx(D1,{children:"Settings"}),y.jsx(M1,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),y.jsx(up,{tabs:d,initialValue:o,onValueChange:u,className:"flex-grow overflow-hidden px-6",listClassName:"-mx-6 px-6",contentContainerClassName:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",scrollable:!0}),y.jsx(j1,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:y.jsx(Bt,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});iB.displayName="SettingsModalComponent";const Ibe=iB;function Obe(){const e=Pr.getState().registerChatControl,t=ha.getState().toggleChatControlPanel,n=ha.getState().setInitialSettingsTabs,r=()=>{const i=(o,s)=>{n(null,null),t("settingsModal",!0)};return y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:y.jsx(v6,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:"Settings"})]})})},a=()=>{const i=ha.getState().isChatControlPanelOpen.settingsModal??!1,o=()=>t("settingsModal",!1);return y.jsx(Ibe,{isOpen:i,onClose:o})};e({id:"core-settings-trigger",panel:"sidebar-footer",status:()=>"ready",renderer:()=>yt.createElement(r),iconRenderer:()=>yt.createElement(r),settingsRenderer:()=>yt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function jbe(){const e=Pr.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=ha.getState();return y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?y.jsx(UH,{className:"h-4 w-4"}):y.jsx(BH,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"sidebar-footer",status:()=>"ready",renderer:()=>yt.createElement(t),iconRenderer:()=>yt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}var G1="Popover",[oB,B_e]=_i(G1,[yu]),Hg=yu(),[Dbe,Tu]=oB(G1),sB=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=Hg(t),l=T.useRef(null),[u,d]=T.useState(!1),[h,p]=Qo({prop:r,defaultProp:a??!1,onChange:i,caller:G1});return y.jsx(jw,{...s,children:y.jsx(Dbe,{scope:t,contentId:Wa(),triggerRef:l,open:h,onOpenChange:p,onOpenToggle:T.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:u,onCustomAnchorAdd:T.useCallback(()=>d(!0),[]),onCustomAnchorRemove:T.useCallback(()=>d(!1),[]),modal:o,children:n})})};sB.displayName=G1;var lB="PopoverAnchor",Mbe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Tu(lB,n),i=Hg(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return T.useEffect(()=>(o(),()=>s()),[o,s]),y.jsx(rg,{...i,...r,ref:t})});Mbe.displayName=lB;var cB="PopoverTrigger",uB=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Tu(cB,n),i=Hg(n),o=Cn(t,a.triggerRef),s=y.jsx(tn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":mB(a.open),...r,ref:o,onClick:qt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:y.jsx(rg,{asChild:!0,...i,children:s})});uB.displayName=cB;var qA="PopoverPortal",[Pbe,Fbe]=oB(qA,{forceMount:void 0}),dB=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=Tu(qA,t);return y.jsx(Pbe,{scope:t,forceMount:n,children:y.jsx(Ca,{present:n||i.open,children:y.jsx(Vh,{asChild:!0,container:a,children:r})})})};dB.displayName=qA;var Lh="PopoverContent",fB=T.forwardRef((e,t)=>{const n=Fbe(Lh,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=Tu(Lh,e.__scopePopover);return y.jsx(Ca,{present:r||i.open,children:i.modal?y.jsx($be,{...a,ref:t}):y.jsx(Bbe,{...a,ref:t})})});fB.displayName=Lh;var Lbe=Xc("PopoverContent.RemoveScroll"),$be=T.forwardRef((e,t)=>{const n=Tu(Lh,e.__scopePopover),r=T.useRef(null),a=Cn(t,r),i=T.useRef(!1);return T.useEffect(()=>{const o=r.current;if(o)return v1(o)},[]),y.jsx(Lg,{as:Lbe,allowPinchZoom:!0,children:y.jsx(hB,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0,u=s.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:qt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Bbe=T.forwardRef((e,t)=>{const n=Tu(Lh,e.__scopePopover),r=T.useRef(!1),a=T.useRef(!1);return y.jsx(hB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),hB=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...h}=e,p=Tu(Lh,n),g=Hg(n);return y1(),y.jsx(Fg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(Uh,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:y.jsx(Dw,{"data-state":mB(p.open),role:"dialog",id:p.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),pB="PopoverClose",zbe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Tu(pB,n);return y.jsx(tn.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});zbe.displayName=pB;var Ube="PopoverArrow",Hbe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Hg(n);return y.jsx(Mw,{...a,...r,ref:t})});Hbe.displayName=Ube;function mB(e){return e?"open":"closed"}var qbe=sB,Vbe=uB,Gbe=dB,Wbe=fB;function pp({...e}){return y.jsx(qbe,{"data-slot":"popover",...e})}function mp({...e}){return y.jsx(Vbe,{"data-slot":"popover-trigger",...e})}function gp({className:e,align:t="center",sideOffset:n=4,...r}){return y.jsx(Gbe,{children:y.jsx(Wbe,{"data-slot":"popover-content",align:t,sideOffset:n,className:Rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const Kbe=()=>{const{setTemperature:e,setTopP:t,setMaxTokens:n,setTopK:r,setPresencePenalty:a,setFrequencyPenalty:i}=Ea(hn(d=>({setTemperature:d.setTemperature,setTopP:d.setTopP,setMaxTokens:d.setMaxTokens,setTopK:d.setTopK,setPresencePenalty:d.setPresencePenalty,setFrequencyPenalty:d.setFrequencyPenalty}))),o=Zr.getState(),[s,l]=T.useState(()=>Ea.getState());T.useEffect(()=>{const d=h=>{l(p=>({...p,...h.params}))};return Ct.on(xt.PROMPT_PARAMS_CHANGED,d),()=>{Ct.off(xt.PROMPT_PARAMS_CHANGED,d)}},[]);const u={temperature:s.temperature??null,setTemperature:e,topP:s.topP??null,setTopP:t,maxTokens:s.maxTokens??null,setMaxTokens:n,topK:s.topK??null,setTopK:r,presencePenalty:s.presencePenalty??null,setPresencePenalty:a,frequencyPenalty:s.frequencyPenalty??null,setFrequencyPenalty:i,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},defaultTemperature:o.temperature,defaultTopP:o.topP,defaultMaxTokens:o.maxTokens,defaultTopK:o.topK,defaultPresencePenalty:o.presencePenalty,defaultFrequencyPenalty:o.frequencyPenalty};return y.jsx(m9,{...u})},Zbe=()=>{const[e,t]=T.useState(!1),[n,r]=T.useState(()=>or.getState().status==="streaming"),[a,i]=T.useState(!0);return T.useEffect(()=>{const o=d=>{const h={...Ea.getState(),...d.params},p=h.temperature!==null||h.topP!==null||h.maxTokens!==null||h.topK!==null||h.presencePenalty!==null||h.frequencyPenalty!==null;t(p)},s=d=>{r(d.status==="streaming")},l=d=>{var _;if(!d.modelId){i(!1);return}const{getSelectedModel:h}=Pn.getState(),p=h(),g=((_=p==null?void 0:p.metadata)==null?void 0:_.supported_parameters)??[],v=["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"],b=Zr.getState().enableAdvancedSettings;i(b&&g.some(x=>v.includes(x)))},u=d=>{d.key==="enableAdvancedSettings"&&l({modelId:Pn.getState().selectedModelId})};return o({params:{}}),l({modelId:Pn.getState().selectedModelId}),Ct.on(xt.PROMPT_PARAMS_CHANGED,o),Ct.on(xt.INTERACTION_STATUS_CHANGED,s),Ct.on(xt.MODEL_SELECTION_CHANGED,l),Ct.on(xt.SETTINGS_CHANGED,u),()=>{Ct.off(xt.PROMPT_PARAMS_CHANGED,o),Ct.off(xt.INTERACTION_STATUS_CHANGED,s),Ct.off(xt.MODEL_SELECTION_CHANGED,l),Ct.off(xt.SETTINGS_CHANGED,u)}},[]),a?y.jsxs(pp,{children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(mp,{asChild:!0,children:y.jsx(Bt,{variant:e?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:n,"aria-label":"Adjust Advanced Parameters",children:y.jsx(tq,{className:"h-4 w-4"})})})}),y.jsx(ar,{side:"top",children:"Advanced Parameters"})]})}),y.jsx(gp,{className:"w-auto p-0",align:"start",children:y.jsx(Kbe,{})})]}):null};function Ybe(){const e=Pr.getState().registerPromptControl;e({id:"core-parameters",status:()=>"ready",triggerRenderer:()=>yt.createElement(Zbe),getParameters:()=>{const{temperature:t,topP:n,maxTokens:r,topK:a,presencePenalty:i,frequencyPenalty:o}=Ea.getState(),s=(u,d,h)=>{h!==null&&(u[d]=h)},l={};return s(l,"temperature",t),s(l,"top_p",n),s(l,"max_tokens",r),s(l,"top_k",a),s(l,"presence_penalty",i),s(l,"frequency_penalty",o),Object.keys(l).length>0?l:void 0}}),console.log("[Function] Registered Core Parameter Control")}const gB=20,Xbe=gB*1024*1024,Jbe=()=>{const e=T.useRef(null),t=Jc.getState().addAttachedFile,[n,r]=T.useState(()=>or.getState().status==="streaming"),[a,i]=T.useState(!0);T.useEffect(()=>{const u=h=>{r(h.status==="streaming")},d=h=>{var b,_;if(!h.modelId){i(!0);return}const{getSelectedModel:p}=Pn.getState(),g=p(),v=(_=(b=g==null?void 0:g.metadata)==null?void 0:b.architecture)==null?void 0:_.input_modalities;i(!v||v.some(x=>x!=="text"))};return d({modelId:Pn.getState().selectedModelId}),Ct.on(xt.INTERACTION_STATUS_CHANGED,u),Ct.on(xt.MODEL_SELECTION_CHANGED,d),()=>{Ct.off(xt.INTERACTION_STATUS_CHANGED,u),Ct.off(xt.MODEL_SELECTION_CHANGED,d)}},[]);const o=T.useCallback(async u=>{const d=u.target.files;if(d){for(const h of Array.from(d)){if(h.size>Xbe){lt.error(`File "${h.name}" exceeds the ${gB}MB limit.`);continue}try{let p={};const g=$C(h.name,h.type),v=h.type.startsWith("image/");if(g)p.contentText=await h.text();else if(v){const b=new FileReader,_=new Promise((S,E)=>{b.onload=()=>S(b.result),b.onerror=C=>E(C)});b.readAsDataURL(h);const x=await _;x&&x.includes(",")?p.contentBase64=x.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${h.name}`)}else console.log(`File type ${h.type} (Name: ${h.name}) not directly processed for content storage in InputStore.`);t({source:"direct",name:h.name,type:h.type||"application/octet-stream",size:h.size,...p})}catch(p){console.error(`Error processing file ${h.name}:`,p),lt.error(`Failed to process file "${h.name}": ${p instanceof Error?p.message:String(p)}`)}}u.target&&(u.target.value="")}},[t]),s=()=>{var u;(u=e.current)==null||u.click()},l=a?"Attach Files":"File input not supported by this model";return y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:e,onChange:o,multiple:!0,className:"hidden",disabled:n||!a}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{type:"button",variant:"ghost",size:"icon",onClick:s,disabled:n||!a,className:"h-8 w-8","aria-label":l,children:y.jsx(s2,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:l})]})})]})},Qbe=()=>{const e=Jc.getState().removeAttachedFile,[t,n]=T.useState(()=>Jc.getState().attachedFilesMetadata),[r,a]=T.useState(()=>or.getState().status==="streaming");return T.useEffect(()=>{const i=s=>{n(s.files)},o=s=>{a(s.status==="streaming")};return Ct.on(xt.ATTACHED_FILES_CHANGED,i),Ct.on(xt.INTERACTION_STATUS_CHANGED,o),()=>{Ct.off(xt.ATTACHED_FILES_CHANGED,i),Ct.off(xt.INTERACTION_STATUS_CHANGED,o)}},[]),t.length===0?null:y.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:t.map(i=>y.jsx($5,{fileMeta:i,onRemove:e,isReadOnly:r},i.id))})};function eve(){const e=Pr.getState().registerPromptControl;e({id:"core-file-attachment",triggerRenderer:()=>yt.createElement(Jbe),renderer:()=>yt.createElement(Qbe)}),console.log("[Function] Registered Core File Attachment Control")}const tve=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const o=s=>{s.key==="Enter"?n():s.key==="Escape"&&r()};return y.jsxs(Qi,{className:"bg-muted/30",children:[y.jsx(Er,{className:"px-2 py-1"}),y.jsx(Er,{className:"px-2 py-1",children:y.jsx(Z0,{className:"h-5 w-5 text-yellow-400"})}),y.jsx(Er,{className:"py-1 px-2",colSpan:3,children:y.jsx(Jn,{ref:a,value:e,onChange:s=>t(s.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),y.jsx(Er,{className:"text-right pr-4 py-1",children:y.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ks,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:"Create (Enter)"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:y.jsx(Zl,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var W1="Checkbox",[nve,z_e]=_i(W1),[rve,ave]=nve(W1),yB=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:l="on",onCheckedChange:u,form:d,...h}=e,[p,g]=T.useState(null),v=Cn(t,C=>g(C)),b=T.useRef(!1),_=p?d||!!p.closest("form"):!0,[x,S]=Qo({prop:a,defaultProp:i??!1,onChange:u,caller:W1}),E=T.useRef(x);return T.useEffect(()=>{const C=p==null?void 0:p.form;if(C){const k=()=>S(E.current);return C.addEventListener("reset",k),()=>C.removeEventListener("reset",k)}},[p,S]),y.jsxs(rve,{scope:n,state:x,disabled:s,children:[y.jsx(tn.button,{type:"button",role:"checkbox","aria-checked":Zc(x)?"mixed":x,"aria-required":o,"data-state":_B(x),"data-disabled":s?"":void 0,disabled:s,value:l,...h,ref:v,onKeyDown:qt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:qt(e.onClick,C=>{S(k=>Zc(k)?!0:!k),_&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),_&&y.jsx(wB,{control:p,bubbles:!b.current,name:r,value:l,checked:x,required:o,disabled:s,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Zc(i)?!1:i})]})});yB.displayName=W1;var bB="CheckboxIndicator",vB=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=ave(bB,n);return y.jsx(Ca,{present:r||Zc(i.state)||i.state===!0,children:y.jsx(tn.span,{"data-state":_B(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});vB.displayName=bB;var ive="CheckboxBubbleInput",wB=T.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},o)=>{const s=T.useRef(null),l=Cn(s,o),u=b1(n),d=Ow(t);T.useEffect(()=>{const p=s.current;if(!p)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(u!==n&&b){const _=new Event("click",{bubbles:r});p.indeterminate=Zc(n),b.call(p,Zc(n)?!1:n),p.dispatchEvent(_)}},[u,n,r]);const h=T.useRef(Zc(n)?!1:n);return y.jsx(tn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});wB.displayName=ive;function Zc(e){return e==="indeterminate"}function _B(e){return Zc(e)?"indeterminate":e?"checked":"unchecked"}var ove=yB,sve=vB;function lve({className:e,...t}){return y.jsx(ove,{"data-slot":"checkbox",className:Rt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(sve,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(Ks,{className:"size-3.5"})})})}var CC=["Enter"," "],cve=["ArrowDown","PageUp","Home"],xB=["ArrowUp","PageDown","End"],uve=[...cve,...xB],dve={ltr:[...CC,"ArrowRight"],rtl:[...CC,"ArrowLeft"]},fve={ltr:["ArrowLeft"],rtl:["ArrowRight"]},qg="Menu",[W0,hve,pve]=g1(qg),[Kd,SB]=_i(qg,[pve,yu,B1]),K1=yu(),EB=B1(),[mve,Zd]=Kd(qg),[gve,Vg]=Kd(qg),CB=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=K1(t),[l,u]=T.useState(null),d=T.useRef(!1),h=Ma(i),p=op(a);return T.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),y.jsx(jw,{...s,children:y.jsx(mve,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:u,children:y.jsx(gve,{scope:t,onClose:T.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:p,modal:o,children:r})})})};CB.displayName=qg;var yve="MenuAnchor",VA=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=K1(n);return y.jsx(rg,{...a,...r,ref:t})});VA.displayName=yve;var GA="MenuPortal",[bve,kB]=Kd(GA,{forceMount:void 0}),AB=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Zd(GA,t);return y.jsx(bve,{scope:t,forceMount:n,children:y.jsx(Ca,{present:n||i.open,children:y.jsx(Vh,{asChild:!0,container:a,children:r})})})};AB.displayName=GA;var Eo="MenuContent",[vve,WA]=Kd(Eo),TB=T.forwardRef((e,t)=>{const n=kB(Eo,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Zd(Eo,e.__scopeMenu),o=Vg(Eo,e.__scopeMenu);return y.jsx(W0.Provider,{scope:e.__scopeMenu,children:y.jsx(Ca,{present:r||i.open,children:y.jsx(W0.Slot,{scope:e.__scopeMenu,children:o.modal?y.jsx(wve,{...a,ref:t}):y.jsx(_ve,{...a,ref:t})})})})}),wve=T.forwardRef((e,t)=>{const n=Zd(Eo,e.__scopeMenu),r=T.useRef(null),a=Cn(t,r);return T.useEffect(()=>{const i=r.current;if(i)return v1(i)},[]),y.jsx(KA,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),_ve=T.forwardRef((e,t)=>{const n=Zd(Eo,e.__scopeMenu);return y.jsx(KA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),xve=Xc("MenuContent.ScrollLock"),KA=T.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:g,disableOutsideScroll:v,...b}=e,_=Zd(Eo,n),x=Vg(Eo,n),S=K1(n),E=EB(n),C=hve(n),[k,R]=T.useState(null),j=T.useRef(null),O=Cn(t,j,_.onContentChange),L=T.useRef(0),z=T.useRef(""),Y=T.useRef(0),F=T.useRef(null),K=T.useRef("right"),q=T.useRef(0),fe=v?Lg:T.Fragment,te=v?{as:xve,allowPinchZoom:!0}:void 0,re=ae=>{var Ne,Re;const U=z.current+ae,ee=C().filter(Ce=>!Ce.disabled),J=document.activeElement,ue=(Ne=ee.find(Ce=>Ce.ref.current===J))==null?void 0:Ne.textValue,be=ee.map(Ce=>Ce.textValue),_e=Dve(be,U,ue),Pe=(Re=ee.find(Ce=>Ce.textValue===_e))==null?void 0:Re.ref.current;(function Ce(Fe){z.current=Fe,window.clearTimeout(L.current),Fe!==""&&(L.current=window.setTimeout(()=>Ce(""),1e3))})(U),Pe&&setTimeout(()=>Pe.focus())};T.useEffect(()=>()=>window.clearTimeout(L.current),[]),y1();const X=T.useCallback(ae=>{var ee,J;return K.current===((ee=F.current)==null?void 0:ee.side)&&Pve(ae,(J=F.current)==null?void 0:J.area)},[]);return y.jsx(vve,{scope:n,searchRef:z,onItemEnter:T.useCallback(ae=>{X(ae)&&ae.preventDefault()},[X]),onItemLeave:T.useCallback(ae=>{var U;X(ae)||((U=j.current)==null||U.focus(),R(null))},[X]),onTriggerLeave:T.useCallback(ae=>{X(ae)&&ae.preventDefault()},[X]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:T.useCallback(ae=>{F.current=ae},[]),children:y.jsx(fe,{...te,children:y.jsx(Fg,{asChild:!0,trapped:a,onMountAutoFocus:qt(i,ae=>{var U;ae.preventDefault(),(U=j.current)==null||U.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(Uh,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:g,children:y.jsx(E9,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:R,onEntryFocus:qt(l,ae=>{x.isUsingKeyboardRef.current||ae.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(Dw,{role:"menu","aria-orientation":"vertical","data-state":qB(_.open),"data-radix-menu-content":"",dir:x.dir,...S,...b,ref:O,style:{outline:"none",...b.style},onKeyDown:qt(b.onKeyDown,ae=>{const ee=ae.target.closest("[data-radix-menu-content]")===ae.currentTarget,J=ae.ctrlKey||ae.altKey||ae.metaKey,ue=ae.key.length===1;ee&&(ae.key==="Tab"&&ae.preventDefault(),!J&&ue&&re(ae.key));const be=j.current;if(ae.target!==be||!uve.includes(ae.key))return;ae.preventDefault();const Pe=C().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);xB.includes(ae.key)&&Pe.reverse(),Ove(Pe)}),onBlur:qt(e.onBlur,ae=>{ae.currentTarget.contains(ae.target)||(window.clearTimeout(L.current),z.current="")}),onPointerMove:qt(e.onPointerMove,K0(ae=>{const U=ae.target,ee=q.current!==ae.clientX;if(ae.currentTarget.contains(U)&&ee){const J=ae.clientX>q.current?"right":"left";K.current=J,q.current=ae.clientX}}))})})})})})})});TB.displayName=Eo;var Sve="MenuGroup",ZA=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(tn.div,{role:"group",...r,ref:t})});ZA.displayName=Sve;var Eve="MenuLabel",NB=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(tn.div,{...r,ref:t})});NB.displayName=Eve;var pw="MenuItem",Pj="menu.itemSelect",Z1=T.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=T.useRef(null),o=Vg(pw,e.__scopeMenu),s=WA(pw,e.__scopeMenu),l=Cn(t,i),u=T.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(Pj,{bubbles:!0,cancelable:!0});h.addEventListener(Pj,g=>r==null?void 0:r(g),{once:!0}),YM(h,p),p.defaultPrevented?u.current=!1:o.onClose()}};return y.jsx(RB,{...a,ref:l,disabled:n,onClick:qt(e.onClick,d),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),u.current=!0},onPointerUp:qt(e.onPointerUp,h=>{var p;u.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:qt(e.onKeyDown,h=>{const p=s.searchRef.current!=="";n||p&&h.key===" "||CC.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Z1.displayName=pw;var RB=T.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=WA(pw,n),s=EB(n),l=T.useRef(null),u=Cn(t,l),[d,h]=T.useState(!1),[p,g]=T.useState("");return T.useEffect(()=>{const v=l.current;v&&g((v.textContent??"").trim())},[i.children]),y.jsx(W0.ItemSlot,{scope:n,disabled:r,textValue:a??p,children:y.jsx(C9,{asChild:!0,...s,focusable:!r,children:y.jsx(tn.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:qt(e.onPointerMove,K0(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:qt(e.onPointerLeave,K0(v=>o.onItemLeave(v))),onFocus:qt(e.onFocus,()=>h(!0)),onBlur:qt(e.onBlur,()=>h(!1))})})})}),Cve="MenuCheckboxItem",IB=T.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return y.jsx(PB,{scope:e.__scopeMenu,checked:n,children:y.jsx(Z1,{role:"menuitemcheckbox","aria-checked":mw(n)?"mixed":n,...a,ref:t,"data-state":XA(n),onSelect:qt(a.onSelect,()=>r==null?void 0:r(mw(n)?!0:!n),{checkForDefaultPrevented:!1})})})});IB.displayName=Cve;var OB="MenuRadioGroup",[kve,Ave]=Kd(OB,{value:void 0,onValueChange:()=>{}}),jB=T.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ma(r);return y.jsx(kve,{scope:e.__scopeMenu,value:n,onValueChange:i,children:y.jsx(ZA,{...a,ref:t})})});jB.displayName=OB;var DB="MenuRadioItem",MB=T.forwardRef((e,t)=>{const{value:n,...r}=e,a=Ave(DB,e.__scopeMenu),i=n===a.value;return y.jsx(PB,{scope:e.__scopeMenu,checked:i,children:y.jsx(Z1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":XA(i),onSelect:qt(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});MB.displayName=DB;var YA="MenuItemIndicator",[PB,Tve]=Kd(YA,{checked:!1}),FB=T.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=Tve(YA,n);return y.jsx(Ca,{present:r||mw(i.checked)||i.checked===!0,children:y.jsx(tn.span,{...a,ref:t,"data-state":XA(i.checked)})})});FB.displayName=YA;var Nve="MenuSeparator",LB=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(tn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});LB.displayName=Nve;var Rve="MenuArrow",$B=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=K1(n);return y.jsx(Mw,{...a,...r,ref:t})});$B.displayName=Rve;var Ive="MenuSub",[U_e,BB]=Kd(Ive),Mm="MenuSubTrigger",zB=T.forwardRef((e,t)=>{const n=Zd(Mm,e.__scopeMenu),r=Vg(Mm,e.__scopeMenu),a=BB(Mm,e.__scopeMenu),i=WA(Mm,e.__scopeMenu),o=T.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=i,u={__scopeMenu:e.__scopeMenu},d=T.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return T.useEffect(()=>d,[d]),T.useEffect(()=>{const h=s.current;return()=>{window.clearTimeout(h),l(null)}},[s,l]),y.jsx(VA,{asChild:!0,...u,children:y.jsx(RB,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":qB(n.open),...e,ref:Yc(t,a.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:qt(e.onPointerMove,K0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:qt(e.onPointerLeave,K0(h=>{var g,v;d();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const b=(v=n.content)==null?void 0:v.dataset.side,_=b==="right",x=_?-5:5,S=p[_?"left":"right"],E=p[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:S,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x:S,y:p.bottom}],side:b}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:qt(e.onKeyDown,h=>{var g;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||dve[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});zB.displayName=Mm;var UB="MenuSubContent",HB=T.forwardRef((e,t)=>{const n=kB(Eo,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Zd(Eo,e.__scopeMenu),o=Vg(Eo,e.__scopeMenu),s=BB(UB,e.__scopeMenu),l=T.useRef(null),u=Cn(t,l);return y.jsx(W0.Provider,{scope:e.__scopeMenu,children:y.jsx(Ca,{present:r||i.open,children:y.jsx(W0.Slot,{scope:e.__scopeMenu,children:y.jsx(KA,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:qt(e.onFocusOutside,d=>{d.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:qt(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:qt(e.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),p=fve[o.dir].includes(d.key);h&&p&&(i.onOpenChange(!1),(g=s.trigger)==null||g.focus(),d.preventDefault())})})})})})});HB.displayName=UB;function qB(e){return e?"open":"closed"}function mw(e){return e==="indeterminate"}function XA(e){return mw(e)?"indeterminate":e?"checked":"unchecked"}function Ove(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function jve(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Dve(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=jve(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function Mve(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],l=t[o],u=s.x,d=s.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(a=!a)}return a}function Pve(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Mve(n,t)}function K0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Fve=CB,Lve=VA,$ve=AB,Bve=TB,zve=ZA,Uve=NB,Hve=Z1,qve=IB,Vve=jB,Gve=MB,Wve=FB,Kve=LB,Zve=$B,Yve=zB,Xve=HB,JA="ContextMenu",[Jve,H_e]=_i(JA,[SB]),Ei=SB(),[Qve,VB]=Jve(JA),GB=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[o,s]=T.useState(!1),l=Ei(t),u=Ma(r),d=T.useCallback(h=>{s(h),u(h)},[u]);return y.jsx(Qve,{scope:t,open:o,onOpenChange:d,modal:i,children:y.jsx(Fve,{...l,dir:a,open:o,onOpenChange:d,modal:i,children:n})})};GB.displayName=JA;var WB="ContextMenuTrigger",KB=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=VB(WB,n),o=Ei(n),s=T.useRef({x:0,y:0}),l=T.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),u=T.useRef(0),d=T.useCallback(()=>window.clearTimeout(u.current),[]),h=p=>{s.current={x:p.clientX,y:p.clientY},i.onOpenChange(!0)};return T.useEffect(()=>d,[d]),T.useEffect(()=>void(r&&d()),[r,d]),y.jsxs(y.Fragment,{children:[y.jsx(Lve,{...o,virtualRef:l}),y.jsx(tn.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:qt(e.onContextMenu,p=>{d(),h(p),p.preventDefault()}),onPointerDown:r?e.onPointerDown:qt(e.onPointerDown,Bb(p=>{d(),u.current=window.setTimeout(()=>h(p),700)})),onPointerMove:r?e.onPointerMove:qt(e.onPointerMove,Bb(d)),onPointerCancel:r?e.onPointerCancel:qt(e.onPointerCancel,Bb(d)),onPointerUp:r?e.onPointerUp:qt(e.onPointerUp,Bb(d))})]})});KB.displayName=WB;var ewe="ContextMenuPortal",ZB=e=>{const{__scopeContextMenu:t,...n}=e,r=Ei(t);return y.jsx($ve,{...r,...n})};ZB.displayName=ewe;var YB="ContextMenuContent",XB=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=VB(YB,n),i=Ei(n),o=T.useRef(!1);return y.jsx(Bve,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,s),!s.defaultPrevented&&o.current&&s.preventDefault(),o.current=!1},onInteractOutside:s=>{var l;(l=e.onInteractOutside)==null||l.call(e,s),!s.defaultPrevented&&!a.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});XB.displayName=YB;var twe="ContextMenuGroup",nwe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(zve,{...a,...r,ref:t})});nwe.displayName=twe;var rwe="ContextMenuLabel",awe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Uve,{...a,...r,ref:t})});awe.displayName=rwe;var iwe="ContextMenuItem",JB=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Hve,{...a,...r,ref:t})});JB.displayName=iwe;var owe="ContextMenuCheckboxItem",swe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(qve,{...a,...r,ref:t})});swe.displayName=owe;var lwe="ContextMenuRadioGroup",cwe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Vve,{...a,...r,ref:t})});cwe.displayName=lwe;var uwe="ContextMenuRadioItem",dwe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Gve,{...a,...r,ref:t})});dwe.displayName=uwe;var fwe="ContextMenuItemIndicator",hwe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Wve,{...a,...r,ref:t})});hwe.displayName=fwe;var pwe="ContextMenuSeparator",QB=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Kve,{...a,...r,ref:t})});QB.displayName=pwe;var mwe="ContextMenuArrow",gwe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Zve,{...a,...r,ref:t})});gwe.displayName=mwe;var ywe="ContextMenuSubTrigger",bwe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Yve,{...a,...r,ref:t})});bwe.displayName=ywe;var vwe="ContextMenuSubContent",wwe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Xve,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wwe.displayName=vwe;function Bb(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var _we=GB,xwe=KB,Swe=ZB,Ewe=XB,Cwe=JB,kwe=QB;function Fj({...e}){return y.jsx(_we,{"data-slot":"context-menu",...e})}function Lj({...e}){return y.jsx(xwe,{"data-slot":"context-menu-trigger",...e})}function $j({className:e,...t}){return y.jsx(Swe,{children:y.jsx(Ewe,{"data-slot":"context-menu-content",className:Rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function Zi({className:e,inset:t,variant:n="default",...r}){return y.jsx(Cwe,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:Rt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function Bj({className:e,...t}){return y.jsx(kwe,{"data-slot":"context-menu-separator",className:Rt("bg-border -mx-1 my-1 h-px",e),...t})}const Awe=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:o,handleNavigate:s,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:p,handleDelete:g,setNewName:v,renameInputRef:b,handleGitInit:_,handleGitPull:x,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const k=e.type==="folder",R=Y=>{Y.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||i||(k?s(e):l(!n,e.id))},j=Y=>{Y.key==="Enter"?h():Y.key==="Escape"&&d()},O=k?r?dH:Z0:cH,L=k?r?"text-green-400":"text-yellow-400":"text-blue-400",z=y.jsxs(Qi,{className:Rt("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed",!k&&"cursor-pointer"),onClick:R,onDoubleClick:()=>!i&&!t&&s(e),children:[y.jsx(Er,{className:"px-2 py-1",children:y.jsx(lve,{checked:n,onCheckedChange:Y=>l(!!Y,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||k})}),y.jsx(Er,{className:"px-2 py-1",children:y.jsx(O,{className:Rt("h-5 w-5",L)})}),y.jsx(Er,{className:"py-1 px-2",children:t?y.jsx(Jn,{ref:b,value:a,onChange:Y=>v(Y.target.value),onBlur:h,onKeyDown:j,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:Y=>Y.stopPropagation(),disabled:i}):y.jsx("span",{className:Rt("truncate",k&&"cursor-pointer hover:underline"),title:e.name,onClick:Y=>{k&&(Y.stopPropagation(),s(e))},children:e.name})}),y.jsx(Er,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?$v(e.size):""}),y.jsx(Er,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),y.jsx(Er,{className:"text-right pr-4 py-1",children:y.jsx("div",{className:Rt("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?y.jsxs(y.Fragment,{children:[y.jsx(ur,{tooltipText:"Save (Enter)",onClick:Y=>{Y.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),icon:i?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ks,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),y.jsx(ur,{tooltipText:"Cancel (Esc)",onClick:Y=>{Y.stopPropagation(),d()},"aria-label":"Cancel edit",disabled:i,icon:y.jsx(Zl,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):y.jsxs(y.Fragment,{children:[y.jsx(ur,{tooltipText:"Rename",onClick:Y=>{Y.stopPropagation(),u(e)},"aria-label":"Rename",disabled:i||o,icon:y.jsx(Ub,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),y.jsx(ur,{tooltipText:k?"Download folder (.zip)":"Download file",onClick:Y=>{Y.stopPropagation(),p(e)},"aria-label":k?"Download folder as ZIP":"Download file",disabled:i,icon:y.jsx(ah,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),y.jsx(ur,{tooltipText:"Delete",onClick:Y=>{Y.stopPropagation(),g(e)},"aria-label":`Delete ${k?"folder":"file"}`,disabled:i,icon:y.jsx(Ho,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return k?y.jsxs(Fj,{children:[y.jsx(Lj,{disabled:t||i,asChild:!0,children:z}),y.jsxs($j,{children:[y.jsx(Zi,{onSelect:()=>s(e),disabled:t||i,children:"Open Folder"}),y.jsx(Bj,{}),r?y.jsxs(y.Fragment,{children:[y.jsxs(Zi,{onSelect:()=>x(e.path),disabled:i,children:[y.jsx(wH,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),y.jsxs(Zi,{onSelect:()=>S(e.path),disabled:i,children:[y.jsx(bH,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),y.jsxs(Zi,{onSelect:()=>E(e.path),disabled:i,children:[y.jsx(g6,{className:"mr-2 h-4 w-4"}),"Git Push"]}),y.jsxs(Zi,{onSelect:()=>C(e.path),disabled:i,children:[y.jsx(RH,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):y.jsxs(Zi,{onSelect:()=>_(e.path),disabled:i,children:[y.jsx(Hm,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),y.jsx(Bj,{}),y.jsxs(Zi,{onSelect:()=>u(e),disabled:i,children:[y.jsx(Ub,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(Zi,{onSelect:()=>p(e),disabled:i,children:[y.jsx(ah,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),y.jsxs(Zi,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):y.jsxs(Fj,{children:[y.jsx(Lj,{disabled:t||i,asChild:!0,children:z}),y.jsxs($j,{children:[y.jsxs(Zi,{onSelect:()=>l(!n,e.id),disabled:i,children:[n?"Deselect":"Select"," File"]}),y.jsxs(Zi,{onSelect:()=>u(e),disabled:i,children:[y.jsx(Ub,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(Zi,{onSelect:()=>p(e),disabled:i,children:[y.jsx(ah,{className:"mr-2 h-4 w-4"}),"Download File"]}),y.jsxs(Zi,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},Twe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:o,handleNavigate:s,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:p,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:_,setNewFolderName:x,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:R,handleGitCommit:j,handleGitPush:O,handleGitStatus:L})=>{const z=T.useMemo(()=>e,[e]);return o&&e.length===0&&!r?y.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):y.jsx("div",{className:"relative h-full",children:y.jsxs(F1,{className:"w-full text-sm",children:[y.jsx(L1,{className:"sticky top-0 bg-card z-10",children:y.jsxs(Qi,{className:"hover:bg-card",children:[y.jsx(fa,{className:"w-[40px] px-2"}),y.jsx(fa,{className:"w-[40px] px-2"}),y.jsx(fa,{children:"Name"}),y.jsx(fa,{className:"w-[100px] text-right",children:"Size"}),y.jsx(fa,{className:"w-[150px] text-right",children:"Modified"}),y.jsx(fa,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),y.jsxs($1,{children:[r&&y.jsx(tve,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:p,newFolderInputRef:E,isOperationLoading:o}),z.map(Y=>{const F=t===Y.path,K=i.has(Y.id),q=C[Y.path]??!1;return y.jsx(Awe,{entry:Y,isEditingThis:F,isChecked:K,isGitRepo:q,newName:F?n:"",isOperationLoading:o,creatingFolder:r,handleNavigate:s,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:v,handleDelete:b,setNewName:_,renameInputRef:S,handleGitInit:k,handleGitPull:R,handleGitCommit:j,handleGitPush:O,handleGitStatus:L},Y.id)}),e.length===0&&!r&&!o&&y.jsx(Qi,{children:y.jsx(Er,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},Nwe=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:o,handleNavigateUp:s,handleRefresh:l,startCreatingFolder:u,handleUploadClick:d,handleFolderUploadClick:h,handleArchiveUploadClick:p,handleDownloadAll:g,handleCloneClick:v,fileInputRef:b,folderInputRef:_,archiveInputRef:x,handleFileChange:S,handleArchiveChange:E})=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:b,onChange:S,className:"hidden",multiple:!0,disabled:t}),y.jsx("input",{type:"file",ref:_,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),y.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),y.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(Bt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:y.jsx(kH,{className:"h-4 w-4"})}),y.jsx(Bt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:y.jsx(pH,{className:"h-4 w-4"})}),y.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),y.jsx("div",{className:"flex-grow"}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[y.jsx(Bt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(gw,{className:"h-4 w-4"})}),y.jsxs(Bt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(DC,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Bt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(m6,{className:"h-4 w-4 mr-1"}),"Files"]}),y.jsxs(Bt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Z0,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Bt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),p()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(tH,{className:"h-4 w-4 mr-1"}),"ZIP"]}),y.jsxs(Bt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Hm,{className:"h-4 w-4 mr-1"}),"Clone"]}),y.jsxs(Bt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(jU,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),ez=({isOpen:e,onOpenChange:t,title:n,description:r,children:a,submitLabel:i="Submit",onSubmit:o,isSubmitting:s,submitDisabled:l=!1,className:u,contentClassName:d})=>{const h=async p=>{p==null||p.preventDefault(),!(s||l)&&await o()};return y.jsx(R1,{open:e,onOpenChange:t,children:y.jsxs(I1,{className:Rt(u),children:[y.jsxs(O1,{children:[y.jsx(D1,{children:n}),r&&y.jsx(M1,{children:r})]}),y.jsx("div",{className:Rt("py-4",d),children:a}),y.jsxs(j1,{children:[y.jsx(_0e,{asChild:!0,children:y.jsx(Bt,{variant:"outline",disabled:s,children:"Cancel"})}),y.jsxs(Bt,{onClick:h,disabled:s||l,children:[s&&y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Submitting...":i]})]})]})})},Rwe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:o,onSubmitClone:s,currentPath:l})=>y.jsx(ez,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:y.jsxs(y.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",y.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:s,isSubmitting:o,submitDisabled:!n.trim(),children:y.jsxs("div",{className:"grid gap-4",children:[y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(on,{htmlFor:"clone-url",className:"text-right",children:"URL"}),y.jsx(Jn,{id:"clone-url",value:n,onChange:u=>r(u.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:o})]}),y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(on,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),y.jsx(Jn,{id:"clone-branch",value:a,onChange:u=>i(u.target.value),className:"col-span-3",placeholder:"main (default)",disabled:o})]})]})}),Iwe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:o})=>y.jsx(ez,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:y.jsxs(y.Fragment,{children:["Enter a commit message for the changes in ",y.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:o,isSubmitting:i,submitDisabled:!r.trim(),children:y.jsx("div",{className:"grid gap-4",children:y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(on,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),y.jsx(Jn,{id:"commit-msg",value:r,onChange:s=>a(s.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})})}),QA=T.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:o,createDirectory:s,uploadFiles:l,deleteNodes:u,renameNode:d,setCurrentPath:h,rootId:p,selectFile:g,deselectFile:v,selectedFileIds:b,vfsKey:_,configuredVfsKey:x,initializingKey:S,_setError:E,_setOperationLoading:C,findNodeByPath:k,initializeVFS:R}=Ko(hn(ut=>({nodes:ut.nodes,childrenMap:ut.childrenMap,currentParentId:ut.currentParentId,selectedFileIds:ut.selectedFileIds,loading:ut.loading,operationLoading:ut.operationLoading,error:ut.error,fetchNodes:ut.fetchNodes,createDirectory:ut.createDirectory,uploadFiles:ut.uploadFiles,deleteNodes:ut.deleteNodes,renameNode:ut.renameNode,selectFile:ut.selectFile,deselectFile:ut.deselectFile,setCurrentPath:ut.setCurrentPath,rootId:ut.rootId,vfsKey:ut.vfsKey,configuredVfsKey:ut.configuredVfsKey,initializingKey:ut.initializingKey,_setError:ut._setError,_setOperationLoading:ut._setOperationLoading,findNodeByPath:ut.findNodeByPath,initializeVFS:ut.initializeVFS}))),[j,O]=T.useState(""),[L,z]=T.useState(null),[Y,F]=T.useState(!1),[K,q]=T.useState(""),[fe,te]=T.useState({}),[re,X]=T.useState(!1),[ae,U]=T.useState(""),[ee,J]=T.useState(""),[ue,be]=T.useState(!1),[_e,Pe]=T.useState(!1),[Ne,Re]=T.useState(null),[Ce,Fe]=T.useState(""),[Qe,Le]=T.useState(!1),[Ie,V]=T.useState({}),me=T.useRef(null),Ae=T.useRef(null),se=T.useRef(null),ie=T.useRef(null),Q=T.useRef(null),xe=n?e[n]:null,Me=xe?xe.path:"/",We=(t[n||p||""]||[]).map(ut=>e[ut]).filter(ut=>!!ut).sort((ut,At)=>ut.type==="folder"&&At.type==="file"?-1:ut.type==="file"&&At.type==="folder"?1:ut.name.localeCompare(At.name)),kt=T.useMemo(()=>We.filter(ut=>ut.type==="folder").map(ut=>ut.path),[We]),at=r||S!==null||_!==x,_t=a||ue||Qe||Object.values(Ie).some(Boolean);T.useEffect(()=>{n!==null&&!t[n]&&!at&&x===_?o(n):n===null&&p&&!t[p]&&!at&&x===_&&o(p)},[n,t,p,at,o,x,_]),T.useEffect(()=>{var ut,At;L&&((ut=ie.current)==null||ut.focus(),(At=ie.current)==null||At.select())},[L]),T.useEffect(()=>{var ut;Y&&((ut=Q.current)==null||ut.focus())},[Y]),T.useEffect(()=>{(async()=>{if(at||kt.length===0)return;const At={};let Mt=!1;for(const Xt of kt)try{const Tn=await Bie(Xt);fe[Xt]!==Tn&&(At[Xt]=Tn,Mt=!0)}catch(Tn){console.error(`Error checking git status for ${Xt}:`,Tn),fe[Xt]!==!1&&(At[Xt]=!1,Mt=!0)}Mt&&te(Xt=>({...Xt,...At}))})()},[kt,at,fe]);const Dt=T.useCallback(async(ut,At)=>{if(!(_t||at)){At!==!1&&C(!0),E(null);try{await ut()}catch(Mt){console.error("[FileManager Operation Error]:",Mt)}finally{At!==!1&&C(!1)}}},[_t,at,E,C]),jt=T.useCallback(ut=>{_t||at||L||ut.type==="folder"&&Dt(()=>h(ut.path),!1)},[_t,at,L,h,Dt]),Gt=T.useCallback(()=>{if(_t||at||Me==="/")return;const ut=hg(Me);Dt(()=>h(ut),!1)},[_t,at,Me,h,Dt]),ye=T.useCallback(()=>{_t||at||Me==="/"||Dt(()=>h("/"),!1)},[_t,at,Me,h,Dt]),I=T.useCallback(()=>{at||Dt(()=>o(n),!1)},[Dt,o,n,at]),G=T.useCallback((ut,At)=>{const Mt=e[At];Mt&&Mt.type==="file"?ut?g(At):v(At):Mt&&Mt.type==="folder"&&lt.info("Folders cannot be attached to the prompt.")},[g,v,e]),de=T.useCallback(ut=>{_t||at||Y||(z(ut.path),O(ut.name),F(!1))},[_t,at,Y]),Oe=T.useCallback(()=>{z(null),O("")},[]),ve=T.useCallback(async()=>{if(!L||!j.trim()){Oe();return}const ut=k(L);ut&&ut.name!==j.trim()&&await Dt(()=>d(ut.id,j.trim())),Oe()},[L,j,d,Oe,k,Dt]),ke=T.useCallback(()=>{_t||at||L||(F(!0),q(""),z(null))},[_t,at,L]),le=T.useCallback(()=>{F(!1),q("")},[]),ft=T.useCallback(async()=>{if(!K.trim()){le();return}await Dt(()=>s(n,K.trim())),le()},[K,s,n,le,Dt]),vt=()=>{var ut;return(ut=me.current)==null?void 0:ut.click()},M=()=>{var ut;return(ut=Ae.current)==null?void 0:ut.click()},Be=()=>{var ut;return(ut=se.current)==null?void 0:ut.click()},tt=T.useCallback(async ut=>{const At=ut.target.files;At&&At.length>0&&(await Dt(()=>l(n,At)),ut.target&&(ut.target.value=""))},[l,n,Dt]),ge=T.useCallback(async ut=>{var Mt;const At=(Mt=ut.target.files)==null?void 0:Mt[0];At&&(await Dt(async()=>{await Hie(At,Me),await o(n)}),ut.target&&(ut.target.value=""))},[Me,o,n,Dt]),je=T.useCallback(async ut=>{window.confirm(`Delete ${ut.type} "${ut.name}"?${ut.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Dt(()=>u([ut.id]))},[u,Dt]),Ke=T.useCallback(async ut=>{await Dt(async()=>{ut.type==="file"?await Uie(ut.path):await yO(`${ut.name}.zip`,ut.path)})},[Dt]),Nt=T.useCallback(async()=>{We.length!==0&&await Dt(async()=>{const ut=pa(Me)||"root";await yO(`${ut}_export.zip`,Me)})},[Me,We.length,Dt]),pe=T.useCallback(async(ut,At)=>{if(!(Ie[ut]||at||a)){V(Mt=>({...Mt,[ut]:!0})),E(null);try{await At()}catch(Mt){console.error(`[FileManager Git Op Error @ ${ut}]:`,Mt)}finally{V(Mt=>({...Mt,[ut]:!1}))}}},[E,Ie,at,a]),H=T.useCallback(ut=>{pe(ut,async()=>{await D5(ut),te(At=>({...At,[ut]:!0}))})},[pe]),B=T.useCallback(ut=>{lt.info("Pulling default branch (auth not implemented yet)..."),pe(ut,()=>s1(ut,"main"))},[pe]),W=T.useCallback(ut=>{Re(ut),Fe(""),Pe(!0)},[]),he=T.useCallback(ut=>{lt.info("Pushing default branch (auth not implemented yet)..."),pe(ut,()=>eA(ut,"main"))},[pe]),Te=T.useCallback(ut=>{pe(ut,()=>M5(ut))},[pe]),He=T.useCallback(()=>{U(""),J(""),X(!0)},[]),pt=T.useCallback(async()=>{if(!ae.trim()){lt.error("Repository URL cannot be empty.");return}be(!0),E(null);try{const ut=pa(ae.trim().replace(/\.git$/,""))||"cloned_repo",At=b0(Me,ut);await j5(At,ae.trim(),ee.trim()||void 0),X(!1),await I()}catch{}finally{be(!1)}},[ae,ee,Me,E,I]),Vt=T.useCallback(async()=>{if(!Ne||!Ce.trim()){lt.error("Commit message cannot be empty.");return}Le(!0),E(null);try{await Qk(Ne,Ce.trim()),Pe(!1)}catch{}finally{Le(!1)}},[Ne,Ce,E]);return at?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[y.jsx(Gn,{className:"h-8 w-8 animate-spin mb-2"}),y.jsx("p",{children:S?`Initializing filesystem: ${S}`:"Loading filesystem..."}),i&&y.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!at?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[y.jsxs("p",{children:["Error loading filesystem: ",i]}),y.jsx(Bt,{variant:"outline",size:"sm",onClick:()=>R(_||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):y.jsxs("div",{className:Rt("flex h-full flex-col bg-card text-card-foreground"),children:[y.jsx(Nwe,{currentPath:Me,isAnyLoading:_t||at,isOperationLoading:a,entries:We,editingPath:L,creatingFolder:Y,handleNavigateHome:ye,handleNavigateUp:Gt,handleRefresh:I,startCreatingFolder:ke,handleUploadClick:vt,handleFolderUploadClick:M,handleArchiveUploadClick:Be,handleDownloadAll:Nt,handleCloneClick:He,fileInputRef:me,folderInputRef:Ae,archiveInputRef:se,handleFileChange:tt,handleArchiveChange:ge}),y.jsx("div",{className:"flex-grow overflow-auto",children:y.jsx(Twe,{entries:We,editingPath:L,newName:j,creatingFolder:Y,newFolderName:K,selectedFileIds:b,isOperationLoading:_t,handleNavigate:jt,handleCheckboxChange:G,startEditing:de,cancelEditing:Oe,handleRename:ve,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Ke,handleDelete:je,setNewName:O,setNewFolderName:q,renameInputRef:ie,newFolderInputRef:Q,gitRepoStatus:fe,handleGitInit:H,handleGitPull:B,handleGitCommit:W,handleGitPush:he,handleGitStatus:Te})}),y.jsx(Rwe,{isOpen:re,onOpenChange:X,cloneRepoUrl:ae,setCloneRepoUrl:U,cloneBranch:ee,setCloneBranch:J,isCloning:ue,onSubmitClone:pt,currentPath:Me}),y.jsx(Iwe,{isOpen:_e,onOpenChange:Pe,commitPath:Ne,commitMessage:Ce,setCommitMessage:Fe,isCommitting:Qe,onSubmitCommit:Vt})]})});QA.displayName="FileManager";const Owe=({vfsKey:e,selectedItemType:t})=>e==="orphan"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(f3,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Shared VFS:"})," All chats ",y.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(f3,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(Z0,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null;function jwe(){const e=Pr.getState().registerPromptControl,t=Pr.getState().registerChatControl,n=Jc.getState().addAttachedFile,r=()=>{const{toggleVfsModal:i,isVfsModalOpen:o}=ha(hn(p=>({toggleVfsModal:p.toggleVfsModal,isVfsModalOpen:p.isVfsModalOpen}))),{enableVfs:s,selectedFileIds:l,nodes:u,clearSelection:d}=Ko(hn(p=>({enableVfs:p.enableVfs,selectedFileIds:p.selectedFileIds,nodes:p.nodes,clearSelection:p.clearSelection}))),h=()=>{if(l.size===0){lt.info("No files selected in VFS to attach.");return}let p=0;l.forEach(g=>{const v=u[g];v&&v.type==="file"&&(n({source:"vfs",name:v.name,type:v.mimeType||"application/octet-stream",size:v.size,path:v.path}),p++)}),p>0&&(lt.success(`Attached ${p} file(s) from VFS to the next prompt.`),d(),i(!1))};return s?y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:"ghost",size:"icon",className:Rt("h-8 w-8",o&&"bg-muted text-primary"),onClick:()=>i(),"aria-label":"Toggle Virtual File System",children:y.jsx(y6,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:"Virtual Filesystem"})]})}),l.size>0&&y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsxs(Bt,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:h,"aria-label":`Attach ${l.size} selected VFS file(s)`,children:[y.jsx(s2,{className:"h-4 w-4 mr-1"}),"Attach (",l.size,")"]})}),y.jsx(ar,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},a=()=>{const{isVfsModalOpen:i,toggleVfsModal:o}=ha(hn(g=>({isVfsModalOpen:g.isVfsModalOpen,toggleVfsModal:g.toggleVfsModal}))),{vfsKey:s,selectedFileIds:l,clearSelection:u}=Ko(hn(g=>({vfsKey:g.vfsKey,selectedFileIds:g.selectedFileIds,clearSelection:g.clearSelection}))),d=mn(g=>g.selectedItemType),h=()=>{o(!1)},p=()=>{u(),o(!1)};return y.jsx(R1,{open:i,onOpenChange:p,children:y.jsxs(I1,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[y.jsxs(O1,{className:"p-4 pb-2 border-b flex-shrink-0",children:[y.jsx(D1,{children:"Virtual Filesystem"}),y.jsx(M1,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),y.jsx(Owe,{vfsKey:s,selectedItemType:d})]}),y.jsx("div",{className:"flex-grow overflow-hidden",children:y.jsx(QA,{})}),y.jsxs(j1,{className:"p-4 pt-2 border-t flex-shrink-0",children:[y.jsx(Bt,{variant:"outline",onClick:p,children:"Close"}),y.jsxs(Bt,{onClick:h,disabled:l.size===0,children:[y.jsx(s2,{className:"h-4 w-4 mr-2"}),"Attach Selected (",l.size,")"]})]})]})})};e({id:"core-vfs-prompt-trigger",show:()=>Ko.getState().enableVfs,triggerRenderer:()=>yt.createElement(r),getParameters:void 0,getMetadata:void 0,clearOnSubmit:void 0}),t({id:"core-vfs-modal-panel",panel:void 0,show:()=>ha.getState().isVfsModalOpen,renderer:()=>yt.createElement(a),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control (Prompt Trigger & Modal)")}const Dwe=()=>{const{linkConversationToRepo:e,syncConversation:t}=mn(hn(z=>({linkConversationToRepo:z.linkConversationToRepo,syncConversation:z.syncConversation}))),[n,r]=T.useState(()=>mn.getState().selectedItemId),[a,i]=T.useState(()=>mn.getState().selectedItemType),[o,s]=T.useState(()=>mn.getState().syncRepos),[l,u]=T.useState(()=>mn.getState().conversationSyncStatus),[d,h]=T.useState(()=>or.getState().status==="streaming"),[p,g]=T.useState(null),[v,b]=T.useState("idle"),[_,x]=T.useState(!1),[S,E]=T.useState(!1);T.useEffect(()=>{const z=te=>{r(te.selectedItemId),i(te.selectedItemType)},Y=()=>{s(mn.getState().syncRepos)},F=te=>{u(re=>({...re,[te.conversationId]:te.status}))},K=te=>{h(te.status==="streaming")},q=te=>{te.conversationId===n&&te.updates.syncRepoId!==void 0&&g(te.updates.syncRepoId)},fe=mn.getState();return r(fe.selectedItemId),i(fe.selectedItemType),s(fe.syncRepos),u(fe.conversationSyncStatus),Ct.on(xt.CONTEXT_CHANGED,z),Ct.on(xt.SYNC_REPO_CHANGED,Y),Ct.on(xt.CONVERSATION_SYNC_STATUS_CHANGED,F),Ct.on(xt.INTERACTION_STATUS_CHANGED,K),Ct.on(xt.CONVERSATION_UPDATED,q),()=>{Ct.off(xt.CONTEXT_CHANGED,z),Ct.off(xt.SYNC_REPO_CHANGED,Y),Ct.off(xt.CONVERSATION_SYNC_STATUS_CHANGED,F),Ct.off(xt.INTERACTION_STATUS_CHANGED,K),Ct.off(xt.CONVERSATION_UPDATED,q)}},[n]),T.useEffect(()=>{if(a==="conversation"&&n){const z=mn.getState().getConversationById(n);g((z==null?void 0:z.syncRepoId)??null),b(l[n]??"idle")}else g(null),b("idle")},[n,a,l]);const C=yt.useMemo(()=>new Map(o.map(z=>[z.id,z.name])),[o]),k=p?C.get(p):void 0,R=T.useCallback(async z=>{if(!n||a!=="conversation")return;x(!0),await e(n,z==="none"?null:z),x(!1)},[n,a,e]),j=T.useCallback(async()=>{!n||!p||(E(!0),await t(n),E(!1))},[n,p,t]),O=j$(v,k),L=!p||S||_||d||v==="syncing";return a!=="conversation"||o.length===0?null:y.jsxs(pp,{children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(mp,{asChild:!0,children:y.jsx(Bt,{variant:p?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d||_||S,"aria-label":"Configure Git Sync",children:v==="syncing"||S||_?y.jsx(Gn,{className:"h-4 w-4 animate-spin"}):y.jsx(Hm,{className:"h-4 w-4"})})})}),y.jsx(ar,{side:"top",children:p?`Sync Status: ${v}`:"Link to Sync Repo"})]})}),y.jsxs(gp,{className:"w-64 p-4 space-y-3",align:"start",children:[y.jsx(on,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),y.jsxs(qd,{value:p??"none",onValueChange:R,disabled:_||S||d,children:[y.jsx(Gd,{id:"sync-repo-select",className:"w-full h-9",children:y.jsx(Vd,{placeholder:"Select repository..."})}),y.jsxs(Wd,{children:[y.jsx(Oi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),o.map(z=>y.jsx(Oi,{value:z.id,children:z.name},z.id))]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",O||"Not Linked"]}),y.jsxs(Bt,{size:"sm",variant:"outline",onClick:j,disabled:L,className:"h-8",children:[S||v==="syncing"?y.jsx(Gn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(g6,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};function Mwe(){const e=Pr.getState().registerPromptControl;e({id:"core-git-sync",triggerRenderer:()=>yt.createElement(Dwe)}),console.log("[Function] Registered Core Git Sync Control")}const Pwe=$.object({path:$.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),Fwe=$.object({path:$.string().describe("The path of the file to read within the VFS."),encoding:$.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),Lwe=$.object({path:$.string().describe("The path where the file should be written."),content:$.string().describe("The content to write to the file."),encoding:$.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),$we=$.object({path:$.string().describe("The path of the file or directory to delete."),recursive:$.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),Bwe=$.object({path:$.string().describe("The path of the directory to create (including parents).")}),zwe=$.object({oldPath:$.string().describe("The current path of the item to rename."),newName:$.string().describe("The new name for the item.")});function Uwe(){const e=Pr.getState().registerTool;console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:Pwe},async({path:s},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=Zn(s||"/");try{const h=await tA(d,{fsInstance:u});return{success:!0,path:d,entries:h.map(p=>({name:p.name,type:p.isDirectory?"folder":"file",size:p.size,lastModified:p.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:Fwe},async({path:s,encoding:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Zn(s);try{const p=await Ud(h,{fsInstance:d});let g;return l==="base64"?g=btoa(String.fromCharCode(...p)):g=new TextDecoder().decode(p),{success:!0,path:h,content:g,encoding:l}}catch(p){return{success:!1,path:h,error:p.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:Lwe},async({path:s,content:l,encoding:u},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const p=Zn(s);try{let g;if(u==="base64"){const v=atob(l),b=v.length,_=new Uint8Array(b);for(let x=0;x<b;x++)_[x]=v.charCodeAt(x);g=_}else g=l;return await l1(p,g,{fsInstance:h}),{success:!0,path:p}}catch(g){return{success:!1,path:p,error:g.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:$we},async({path:s,recursive:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Zn(s);try{return await nA(h,l,{fsInstance:d}),{success:!0,path:h}}catch(p){return{success:!1,path:h,error:p.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:Bwe},async({path:s},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=Zn(s);try{return await P5(d,{fsInstance:u}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:zwe},async({oldPath:s,newName:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Zn(s),p=Zn(h.substring(0,h.lastIndexOf("/"))||"/"),g=Gs(p,l);try{return await L5(h,g,{fsInstance:d}),{success:!0,oldPath:h,newPath:g}}catch(v){return{success:!1,oldPath:h,newName:l,error:v.message}}}),console.log("[Function] Core VFS Tools Registered.")}const Hwe=$.object({path:$.string().describe("The directory path within the VFS to initialize as a Git repository.")}),qwe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to commit."),message:$.string().describe("The commit message.")}),Vwe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:$.string().optional().describe("The branch name to pull.")}),Gwe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to push."),branch:$.string().optional().describe("The branch name to push.")}),Wwe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to check status.")});function Kwe(){const e=Pr.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:Hwe},async({path:o},s)=>{const l=s==null?void 0:s.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await D5(o,{fsInstance:l}),{success:!0,message:`Repository initialized at ${o}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:qwe},async({path:o,message:s},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=Zr.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await Qk(o,s,{fsInstance:u}),{success:!0,message:`Changes committed in ${o}`}}catch(h){return{success:!1,error:h.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:Vwe},async({path:o,branch:s},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await s1(o,s||"main",void 0,{fsInstance:u}),{success:!0,message:`Pulled changes for ${o}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:Gwe},async({path:o,branch:s},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await eA(o,s||"main",void 0,{fsInstance:u}),{success:!0,message:`Pushed changes for ${o}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:Wwe},async({path:o},s)=>{const l=s==null?void 0:s.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await M5(o,{fsInstance:l}),{success:!0,message:`Status checked for ${o}`}}catch(u){return{success:!1,error:u.message}}}),console.log("[Function] Core Git Tools Registered.")}const Zwe=({className:e,enabledTools:t,setEnabledTools:n,localMaxSteps:r,setLocalMaxSteps:a,conversationId:i,conversationType:o})=>{const s=Pr(S=>S.tools),l=Zr(S=>S.toolMaxSteps),[u,d]=T.useState(""),h=T.useMemo(()=>Object.entries(s).map(([S,{definition:E,modId:C}])=>({name:S,description:E.description??"No description provided.",modId:C})).sort((S,E)=>S.name.localeCompare(E.name)),[s]),p=T.useMemo(()=>{const S=u.trim().toLowerCase();return S?h.filter(E=>E.name.toLowerCase().includes(S)||E.description.toLowerCase().includes(S)||E.modId.toLowerCase().includes(S)):h},[h,u]),g=T.useCallback((S,E)=>{n(C=>{const k=new Set(C);return E?k.add(S):k.delete(S),k})},[n]),v=T.useCallback(S=>{n(()=>S?new Set(h.map(E=>E.name)):new Set)},[h,n]),b=S=>{const E=S.target.value;if(E===""){a(null);return}const C=parseInt(E,10);if(isNaN(C))a(null);else{const k=Math.max(1,Math.min(20,C));a(k)}},_=r===null?"":String(r),x=o!=="conversation"||!i;return y.jsxs("div",{className:Rt("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[y.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),y.jsxs("div",{className:"relative",children:[y.jsx(J0,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(Jn,{type:"search",placeholder:"Filter tools...",value:u,onChange:S=>d(S.target.value),className:"pl-8 h-9",disabled:x})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs(on,{className:"text-xs text-muted-foreground",children:[p.length," tools shown (",t.size," enabled)"]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx(Bt,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:x||h.length===0,children:"Enable All"}),y.jsx(Bt,{variant:"outline",size:"sm",onClick:()=>v(!1),disabled:x||h.length===0||t.size===0,children:"Disable All"})]})]}),y.jsx(Hd,{className:"h-56 border rounded-md p-2 bg-background/50",children:x?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):p.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):y.jsx("div",{className:"space-y-1",children:p.map(S=>y.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[y.jsx(zs,{id:`tool-switch-${S.name}`,checked:t.has(S.name),onCheckedChange:E=>g(S.name,E),className:"flex-shrink-0",disabled:x}),y.jsxs(on,{htmlFor:`tool-switch-${S.name}`,className:Rt("text-sm font-normal flex-grow pl-2 space-y-0.5",x?"cursor-not-allowed":"cursor-pointer"),title:`${S.name} (from ${S.modId})`,children:[y.jsx("span",{className:"block font-medium",children:S.name}),y.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:S.description})]})]},S.name))})}),y.jsxs("div",{className:"pt-2",children:[y.jsx(on,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),y.jsx(Jn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:_,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(l??5),disabled:x}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})};let Kc=new Set,jl=null,Pm=()=>{};const Ywe=()=>{const[e,t]=T.useState({enabledTools:Kc,maxStepsOverride:jl}),[n,r]=T.useState(e.maxStepsOverride),[a,i]=T.useState(!1),[o,s]=T.useState(()=>or.getState().status==="streaming"),[l,u]=T.useState(!0),[d,h]=T.useState(()=>mn.getState().selectedItemType),[p,g]=T.useState(()=>mn.getState().selectedItemId),v=Object.keys(Pr.getState().tools).length;T.useEffect(()=>(Pm=E=>{const C=E({enabledTools:Kc,maxStepsOverride:jl});Kc=C.enabledTools,jl=C.maxStepsOverride,t(C)},t({enabledTools:Kc,maxStepsOverride:jl}),()=>{Pm=()=>{}}),[]),T.useEffect(()=>{r(e.maxStepsOverride)},[e.maxStepsOverride]),T.useEffect(()=>{const E=R=>{s(R.status==="streaming")},C=R=>{var z,Y;if(!R.modelId){u(!1);return}const{getSelectedModel:j}=Pn.getState(),O=j(),L=Object.keys(Pr.getState().tools).length>0;u(L&&(((Y=(z=O==null?void 0:O.metadata)==null?void 0:z.supported_parameters)==null?void 0:Y.includes("tools"))??!1))},k=R=>{h(R.selectedItemType),g(R.selectedItemId)};return C({modelId:Pn.getState().selectedModelId}),k({selectedItemId:mn.getState().selectedItemId,selectedItemType:mn.getState().selectedItemType}),Ct.on(xt.INTERACTION_STATUS_CHANGED,E),Ct.on(xt.MODEL_SELECTION_CHANGED,C),Ct.on(xt.CONTEXT_CHANGED,k),()=>{Ct.off(xt.INTERACTION_STATUS_CHANGED,E),Ct.off(xt.MODEL_SELECTION_CHANGED,C),Ct.off(xt.CONTEXT_CHANGED,k)}},[]);const b=E=>{i(E),!E&&n!==e.maxStepsOverride&&Pm(C=>({...C,maxStepsOverride:n}))},_=T.useCallback(E=>{Pm(C=>({...C,enabledTools:E(C.enabledTools)}))},[]),x=e.enabledTools.size>0||e.maxStepsOverride!==null,S=o||v===0||d!=="conversation";return l?y.jsxs(pp,{open:a,onOpenChange:b,children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(mp,{asChild:!0,children:y.jsx(Bt,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:S,"aria-label":"Configure Tools",children:y.jsx(yq,{className:"h-4 w-4"})})})}),y.jsx(ar,{side:"top",children:S?"Tools unavailable (select conversation)":`Tools (${e.enabledTools.size} enabled)`})]})}),y.jsx(gp,{className:"w-auto p-0",align:"start",children:y.jsx(Zwe,{enabledTools:e.enabledTools,setEnabledTools:_,localMaxSteps:n,setLocalMaxSteps:r,conversationId:p,conversationType:d})})]}):null};function Xwe(){const e=Pr.getState().registerPromptControl;Kc=new Set,jl=null,e({id:"core-tool-selector",triggerRenderer:()=>yt.createElement(Ywe),getMetadata:()=>{if(Kc.size>0||jl!==null)return{enabledTools:Array.from(Kc),...jl!==null&&{maxSteps:jl}}},clearOnSubmit:()=>{Kc=new Set,jl=null,Pm(()=>({enabledTools:new Set,maxStepsOverride:null}))}}),console.log("[Function] Registered Core Tool Selector Control")}var zj=1,Jwe=.9,Qwe=.8,e1e=.17,JE=.1,QE=.999,t1e=.9999,n1e=.99,r1e=/[\\\/_+.#"@\[\(\{&]/,a1e=/[\\\/_+.#"@\[\(\{&]/g,i1e=/[\s-]/,tz=/[\s-]/g;function kC(e,t,n,r,a,i,o){if(i===t.length)return a===e.length?zj:n1e;var s=`${a},${i}`;if(o[s]!==void 0)return o[s];for(var l=r.charAt(i),u=n.indexOf(l,a),d=0,h,p,g,v;u>=0;)h=kC(e,t,n,r,u+1,i+1,o),h>d&&(u===a?h*=zj:r1e.test(e.charAt(u-1))?(h*=Qwe,g=e.slice(a,u-1).match(a1e),g&&a>0&&(h*=Math.pow(QE,g.length))):i1e.test(e.charAt(u-1))?(h*=Jwe,v=e.slice(a,u-1).match(tz),v&&a>0&&(h*=Math.pow(QE,v.length))):(h*=e1e,a>0&&(h*=Math.pow(QE,u-a))),e.charAt(u)!==t.charAt(i)&&(h*=t1e)),(h<JE&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(p=kC(e,t,n,r,u+1,i+2,o),p*JE>h&&(h=p*JE)),h>d&&(d=h),u=n.indexOf(l,u+1);return o[s]=d,d}function Uj(e){return e.toLowerCase().replace(tz," ")}function o1e(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,kC(e,t,Uj(e),Uj(t),0,0,{})}var Im='[cmdk-group=""]',e2='[cmdk-group-items=""]',s1e='[cmdk-group-heading=""]',nz='[cmdk-item=""]',Hj=`${nz}:not([aria-disabled="true"])`,AC="cmdk-item-select",Yf="data-value",l1e=(e,t,n)=>o1e(e,t,n),rz=T.createContext(void 0),Gg=()=>T.useContext(rz),az=T.createContext(void 0),eT=()=>T.useContext(az),iz=T.createContext(void 0),oz=T.forwardRef((e,t)=>{let n=Xf(()=>{var J,ue;return{search:"",value:(ue=(J=e.value)!=null?J:e.defaultValue)!=null?ue:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Xf(()=>new Set),a=Xf(()=>new Map),i=Xf(()=>new Map),o=Xf(()=>new Set),s=sz(e),{label:l,children:u,value:d,onValueChange:h,filter:p,shouldFilter:g,loop:v,disablePointerSelection:b=!1,vimBindings:_=!0,...x}=e,S=Wa(),E=Wa(),C=Wa(),k=T.useRef(null),R=v1e();kd(()=>{if(d!==void 0){let J=d.trim();n.current.value=J,j.emit()}},[d]),kd(()=>{R(6,K)},[]);let j=T.useMemo(()=>({subscribe:J=>(o.current.add(J),()=>o.current.delete(J)),snapshot:()=>n.current,setState:(J,ue,be)=>{var _e,Pe,Ne,Re;if(!Object.is(n.current[J],ue)){if(n.current[J]=ue,J==="search")F(),z(),R(1,Y);else if(J==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ce=document.getElementById(C);Ce?Ce.focus():(_e=document.getElementById(S))==null||_e.focus()}if(R(7,()=>{var Ce;n.current.selectedItemId=(Ce=q())==null?void 0:Ce.id,j.emit()}),be||R(5,K),((Pe=s.current)==null?void 0:Pe.value)!==void 0){let Ce=ue??"";(Re=(Ne=s.current).onValueChange)==null||Re.call(Ne,Ce);return}}j.emit()}},emit:()=>{o.current.forEach(J=>J())}}),[]),O=T.useMemo(()=>({value:(J,ue,be)=>{var _e;ue!==((_e=i.current.get(J))==null?void 0:_e.value)&&(i.current.set(J,{value:ue,keywords:be}),n.current.filtered.items.set(J,L(ue,be)),R(2,()=>{z(),j.emit()}))},item:(J,ue)=>(r.current.add(J),ue&&(a.current.has(ue)?a.current.get(ue).add(J):a.current.set(ue,new Set([J]))),R(3,()=>{F(),z(),n.current.value||Y(),j.emit()}),()=>{i.current.delete(J),r.current.delete(J),n.current.filtered.items.delete(J);let be=q();R(4,()=>{F(),(be==null?void 0:be.getAttribute("id"))===J&&Y(),j.emit()})}),group:J=>(a.current.has(J)||a.current.set(J,new Set),()=>{i.current.delete(J),a.current.delete(J)}),filter:()=>s.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:k}),[]);function L(J,ue){var be,_e;let Pe=(_e=(be=s.current)==null?void 0:be.filter)!=null?_e:l1e;return J?Pe(J,n.current.search,ue):0}function z(){if(!n.current.search||s.current.shouldFilter===!1)return;let J=n.current.filtered.items,ue=[];n.current.filtered.groups.forEach(_e=>{let Pe=a.current.get(_e),Ne=0;Pe.forEach(Re=>{let Ce=J.get(Re);Ne=Math.max(Ce,Ne)}),ue.push([_e,Ne])});let be=k.current;fe().sort((_e,Pe)=>{var Ne,Re;let Ce=_e.getAttribute("id"),Fe=Pe.getAttribute("id");return((Ne=J.get(Fe))!=null?Ne:0)-((Re=J.get(Ce))!=null?Re:0)}).forEach(_e=>{let Pe=_e.closest(e2);Pe?Pe.appendChild(_e.parentElement===Pe?_e:_e.closest(`${e2} > *`)):be.appendChild(_e.parentElement===be?_e:_e.closest(`${e2} > *`))}),ue.sort((_e,Pe)=>Pe[1]-_e[1]).forEach(_e=>{var Pe;let Ne=(Pe=k.current)==null?void 0:Pe.querySelector(`${Im}[${Yf}="${encodeURIComponent(_e[0])}"]`);Ne==null||Ne.parentElement.appendChild(Ne)})}function Y(){let J=fe().find(be=>be.getAttribute("aria-disabled")!=="true"),ue=J==null?void 0:J.getAttribute(Yf);j.setState("value",ue||void 0)}function F(){var J,ue,be,_e;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Pe=0;for(let Ne of r.current){let Re=(ue=(J=i.current.get(Ne))==null?void 0:J.value)!=null?ue:"",Ce=(_e=(be=i.current.get(Ne))==null?void 0:be.keywords)!=null?_e:[],Fe=L(Re,Ce);n.current.filtered.items.set(Ne,Fe),Fe>0&&Pe++}for(let[Ne,Re]of a.current)for(let Ce of Re)if(n.current.filtered.items.get(Ce)>0){n.current.filtered.groups.add(Ne);break}n.current.filtered.count=Pe}function K(){var J,ue,be;let _e=q();_e&&(((J=_e.parentElement)==null?void 0:J.firstChild)===_e&&((be=(ue=_e.closest(Im))==null?void 0:ue.querySelector(s1e))==null||be.scrollIntoView({block:"nearest"})),_e.scrollIntoView({block:"nearest"}))}function q(){var J;return(J=k.current)==null?void 0:J.querySelector(`${nz}[aria-selected="true"]`)}function fe(){var J;return Array.from(((J=k.current)==null?void 0:J.querySelectorAll(Hj))||[])}function te(J){let ue=fe()[J];ue&&j.setState("value",ue.getAttribute(Yf))}function re(J){var ue;let be=q(),_e=fe(),Pe=_e.findIndex(Re=>Re===be),Ne=_e[Pe+J];(ue=s.current)!=null&&ue.loop&&(Ne=Pe+J<0?_e[_e.length-1]:Pe+J===_e.length?_e[0]:_e[Pe+J]),Ne&&j.setState("value",Ne.getAttribute(Yf))}function X(J){let ue=q(),be=ue==null?void 0:ue.closest(Im),_e;for(;be&&!_e;)be=J>0?y1e(be,Im):b1e(be,Im),_e=be==null?void 0:be.querySelector(Hj);_e?j.setState("value",_e.getAttribute(Yf)):re(J)}let ae=()=>te(fe().length-1),U=J=>{J.preventDefault(),J.metaKey?ae():J.altKey?X(1):re(1)},ee=J=>{J.preventDefault(),J.metaKey?te(0):J.altKey?X(-1):re(-1)};return T.createElement(tn.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:J=>{var ue;(ue=x.onKeyDown)==null||ue.call(x,J);let be=J.nativeEvent.isComposing||J.keyCode===229;if(!(J.defaultPrevented||be))switch(J.key){case"n":case"j":{_&&J.ctrlKey&&U(J);break}case"ArrowDown":{U(J);break}case"p":case"k":{_&&J.ctrlKey&&ee(J);break}case"ArrowUp":{ee(J);break}case"Home":{J.preventDefault(),te(0);break}case"End":{J.preventDefault(),ae();break}case"Enter":{J.preventDefault();let _e=q();if(_e){let Pe=new Event(AC);_e.dispatchEvent(Pe)}}}}},T.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:_1e},l),Y1(e,J=>T.createElement(az.Provider,{value:j},T.createElement(rz.Provider,{value:O},J))))}),c1e=T.forwardRef((e,t)=>{var n,r;let a=Wa(),i=T.useRef(null),o=T.useContext(iz),s=Gg(),l=sz(e),u=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;kd(()=>{if(!u)return s.item(a,o==null?void 0:o.id)},[u]);let d=lz(a,i,[e.value,e.children,i],e.keywords),h=eT(),p=gu(R=>R.value&&R.value===d.current),g=gu(R=>u||s.filter()===!1?!0:R.search?R.filtered.items.get(a)>0:!0);T.useEffect(()=>{let R=i.current;if(!(!R||e.disabled))return R.addEventListener(AC,v),()=>R.removeEventListener(AC,v)},[g,e.onSelect,e.disabled]);function v(){var R,j;b(),(j=(R=l.current).onSelect)==null||j.call(R,d.current)}function b(){h.setState("value",d.current,!0)}if(!g)return null;let{disabled:_,value:x,onSelect:S,forceMount:E,keywords:C,...k}=e;return T.createElement(tn.div,{ref:Yc(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!p,"data-disabled":!!_,"data-selected":!!p,onPointerMove:_||s.getDisablePointerSelection()?void 0:b,onClick:_?void 0:v},e.children)}),u1e=T.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,o=Wa(),s=T.useRef(null),l=T.useRef(null),u=Wa(),d=Gg(),h=gu(g=>a||d.filter()===!1?!0:g.search?g.filtered.groups.has(o):!0);kd(()=>d.group(o),[]),lz(o,s,[e.value,e.heading,l]);let p=T.useMemo(()=>({id:o,forceMount:a}),[a]);return T.createElement(tn.div,{ref:Yc(s,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&T.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),Y1(e,g=>T.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},T.createElement(iz.Provider,{value:p},g))))}),d1e=T.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=T.useRef(null),i=gu(o=>!o.search);return!n&&!i?null:T.createElement(tn.div,{ref:Yc(a,t),...r,"cmdk-separator":"",role:"separator"})}),f1e=T.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=eT(),o=gu(u=>u.search),s=gu(u=>u.selectedItemId),l=Gg();return T.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),T.createElement(tn.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":s,id:l.inputId,type:"text",value:a?e.value:o,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),h1e=T.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=T.useRef(null),o=T.useRef(null),s=gu(u=>u.selectedItemId),l=Gg();return T.useEffect(()=>{if(o.current&&i.current){let u=o.current,d=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=u.offsetHeight;d.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return p.observe(u),()=>{cancelAnimationFrame(h),p.unobserve(u)}}},[]),T.createElement(tn.div,{ref:Yc(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:l.listId},Y1(e,u=>T.createElement("div",{ref:Yc(o,l.listInnerRef),"cmdk-list-sizer":""},u)))}),p1e=T.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:o,...s}=e;return T.createElement(Z$,{open:n,onOpenChange:r},T.createElement(Y$,{container:o},T.createElement(X$,{"cmdk-overlay":"",className:a}),T.createElement(J$,{"aria-label":e.label,"cmdk-dialog":"",className:i},T.createElement(oz,{ref:t,...s}))))}),m1e=T.forwardRef((e,t)=>gu(n=>n.filtered.count===0)?T.createElement(tn.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),g1e=T.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return T.createElement(tn.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Y1(e,o=>T.createElement("div",{"aria-hidden":!0},o)))}),yp=Object.assign(oz,{List:h1e,Item:c1e,Input:f1e,Group:u1e,Separator:d1e,Dialog:p1e,Empty:m1e,Loading:g1e});function y1e(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function b1e(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function sz(e){let t=T.useRef(e);return kd(()=>{t.current=e}),t}var kd=typeof window>"u"?T.useEffect:T.useLayoutEffect;function Xf(e){let t=T.useRef();return t.current===void 0&&(t.current=e()),t}function gu(e){let t=eT(),n=()=>e(t.snapshot());return T.useSyncExternalStore(t.subscribe,n,n)}function lz(e,t,n,r=[]){let a=T.useRef(),i=Gg();return kd(()=>{var o;let s=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),l=r.map(u=>u.trim());i.value(e,s,l),(o=t.current)==null||o.setAttribute(Yf,s),a.current=s}),a}var v1e=()=>{let[e,t]=T.useState(),n=Xf(()=>new Map);return kd(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function w1e(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Y1({asChild:e,children:t},n){return e&&T.isValidElement(t)?T.cloneElement(w1e(t),{ref:t.ref},n(t.props.children)):n(t)}var _1e={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function x1e({className:e,...t}){return y.jsx(yp,{"data-slot":"command",className:Rt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function S1e({className:e,...t}){return y.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[y.jsx(J0,{className:"size-4 shrink-0 opacity-50"}),y.jsx(yp.Input,{"data-slot":"command-input",className:Rt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function E1e({className:e,...t}){return y.jsx(yp.List,{"data-slot":"command-list",className:Rt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function C1e({...e}){return y.jsx(yp.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function k1e({className:e,...t}){return y.jsx(yp.Group,{"data-slot":"command-group",className:Rt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function A1e({className:e,...t}){return y.jsx(yp.Item,{"data-slot":"command-item",className:Rt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}const tT=yt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const[a,i]=T.useState(!1),[o,s]=T.useState(""),{dbProviderConfigs:l,globalModelSortOrder:u,isLoading:d}=Pn(hn(b=>({dbProviderConfigs:b.dbProviderConfigs,globalModelSortOrder:b.globalModelSortOrder,isLoading:b.isLoading}))),h=T.useMemo(()=>{const b=new Map,_=new Set;l.forEach(E=>{if(!E.isEnabled||!E.enabledModels)return;const C=E.fetchedModels??(E.type?Pn.getState().getAllAvailableModelDefsForProvider(E.id):[]),k=new Map(C.map(R=>[R.id,R]));E.enabledModels.forEach(R=>{const j=qc(E.id,R),O=k.get(R);O&&(_.add(j),b.set(j,{name:O.name||R,providerName:E.name}))})});const x=[],S=new Set;return u.forEach(E=>{if(_.has(E)){const C=b.get(E);C&&!S.has(E)&&(x.push({id:E,...C}),S.add(E))}}),_.forEach(E=>{if(!S.has(E)){const C=b.get(E);C&&x.push({id:E,...C})}}),x},[l,u]),p=T.useMemo(()=>{if(!o.trim())return h;const b=o.toLowerCase();return h.filter(_=>_.name.toLowerCase().includes(b)||_.providerName.toLowerCase().includes(b)||_.id.toLowerCase().includes(b))},[h,o]),g=T.useMemo(()=>h.find(b=>b.id===e),[h,e]),v=T.useCallback(b=>{t(b===e?null:b),i(!1),s("")},[t,e]);return d?y.jsx(Or,{className:Rt("h-9 w-[250px]",r)}):y.jsxs(pp,{open:a,onOpenChange:i,children:[y.jsx(mp,{asChild:!0,children:y.jsxs(Bt,{variant:"outline",role:"combobox","aria-expanded":a,disabled:n||h.length===0,className:Rt("w-auto justify-between h-9 text-sm font-normal",r),children:[y.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:g?`${g.name} (${g.providerName})`:"Select Model..."}),y.jsx(IC,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),y.jsx(gp,{className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:y.jsxs(x1e,{shouldFilter:!1,children:[" ",y.jsx(S1e,{placeholder:"Search model...",value:o,onValueChange:s}),y.jsxs(E1e,{children:[y.jsx(C1e,{children:"No model found."}),y.jsx(k1e,{children:p.map(b=>y.jsxs(A1e,{value:b.id,onSelect:v,children:[y.jsx(Ks,{className:Rt("mr-2 h-4 w-4",e===b.id?"opacity-100":"opacity-0")}),y.jsxs("span",{className:"truncate",children:[b.name," (",b.providerName,")"]})]},b.id))})]})]})})]})});tT.displayName="GlobalModelSelector";const T1e=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:o})=>y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(on,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),y.jsx(lp,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:s=>t(s.target.value||null),rows:6,disabled:o,className:"mt-1"}),y.jsx(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:o||e===null,children:"Use Inherited/Default"})]}),y.jsxs("div",{children:[y.jsx(on,{children:"Default Model (Overrides Parent/Global)"}),y.jsx(tT,{value:n??i,onChange:r,disabled:o}),y.jsx(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:o||n===null,children:"Use Inherited/Default"})]})]}),N1e=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:o,setTopK:s,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,localTemp:p,setLocalTemp:g,localTopP:v,setLocalTopP:b,localPresence:_,setLocalPresence:x,localFrequency:S,setLocalFrequency:E,effectiveTemperature:C,effectiveMaxTokens:k,effectiveTopP:R,effectiveTopK:j,effectivePresencePenalty:O,effectiveFrequencyPenalty:L,isSaving:z})=>{const Y=T.useCallback((K,q)=>{const fe=q.target.value,te=fe===""?null:parseInt(fe,10);(fe===""||!isNaN(te)&&te!==null)&&K(te)},[]),F=T.useCallback((K,q)=>{K(q[0])},[]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(on,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",p.toFixed(2),")"]}),y.jsx(Ml,{id:"project-temperature",min:0,max:1,step:.01,value:[p],onValueChange:K=>g(K[0]),onValueCommit:K=>F(t,K),disabled:z}),y.jsxs(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:z||e===null,children:["Use Inherited/Default (",(C==null?void 0:C.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(on,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),y.jsx(Ml,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:K=>b(K[0]),onValueCommit:K=>F(i,K),disabled:z}),y.jsxs(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:z||a===null,children:["Use Inherited/Default (",(R==null?void 0:R.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(Jn,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${k??"Default"}`,value:n??"",onChange:K=>Y(r,K),min:"1",className:"h-8 text-xs",disabled:z}),y.jsx(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:z||n===null,children:"Use Inherited/Default"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(on,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),y.jsx(Jn,{id:"project-top-k",type:"number",placeholder:`Inherited: ${j??"Default"}`,value:o??"",onChange:K=>Y(s,K),min:"1",className:"h-8 text-xs",disabled:z}),y.jsx(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>s(null),disabled:z||o===null,children:"Use Inherited/Default"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(on,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",_.toFixed(2),")"]}),y.jsx(Ml,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[_],onValueChange:K=>x(K[0]),onValueCommit:K=>F(u,K),disabled:z}),y.jsxs(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>u(null),disabled:z||l===null,children:["Use Inherited/Default (",(O==null?void 0:O.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(on,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",S.toFixed(2),")"]}),y.jsx(Ml,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[S],onValueChange:K=>E(K[0]),onValueCommit:K=>F(h,K),disabled:z}),y.jsxs(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:z||d===null,children:["Use Inherited/Default (",(L==null?void 0:L.toFixed(2))??"N/A",")"]})]})]})},R1e=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var o;const i=((o=r.find(s=>s.id===n))==null?void 0:o.name)??"None";return y.jsx("div",{className:"space-y-4",children:y.jsxs("div",{children:[y.jsx(on,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),y.jsxs(qd,{value:e??"none",onValueChange:s=>t(s==="none"?null:s),disabled:a||r.length===0,children:[y.jsx(Gd,{id:"project-sync-repo",children:y.jsx(Vd,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),y.jsxs(Wd,{children:[y.jsx(Oi,{value:"none",children:y.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(s=>y.jsx(Oi,{value:s.id,children:s.name},s.id))]})]}),y.jsx(Bt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},I1e=({projectId:e,projectName:t,isSaving:n})=>{const r=()=>{lt.info(`VFS clearing for project "${t}" is not yet implemented.`)},a=T.useMemo(()=>[{value:"manage",label:"Manage Files",content:y.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?y.jsx(QA,{}):y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings & Danger Zone",content:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(on,{children:"Project Filesystem Info"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),y.jsx("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2",children:y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",y.jsx("code",{className:"text-xs",children:e||"N/A"})]})})]}),y.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[y.jsx(on,{className:"text-destructive",children:"Danger Zone"}),y.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."}),y.jsxs(Bt,{variant:"destructive",size:"sm",onClick:r,disabled:n||!e,children:[y.jsx(pd,{className:"h-4 w-4 mr-1"}),"Clear Project VFS (Not Implemented)"]})]})]})}],[e,t,n]);return y.jsx(up,{tabs:a,defaultValue:"manage",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-3 flex-grow flex flex-col"})},O1e=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a}=ni(hn(Fe=>({getProjectById:Fe.getProjectById,updateProject:Fe.updateProject}))),i=ni(Fe=>Fe.getEffectiveProjectSettings),o=mn(Fe=>Fe.syncRepos),s=Zr(hn(Fe=>({globalSystemPrompt:Fe.globalSystemPrompt,temperature:Fe.temperature,maxTokens:Fe.maxTokens,topP:Fe.topP,topK:Fe.topK,presencePenalty:Fe.presencePenalty,frequencyPenalty:Fe.frequencyPenalty}))),l=Pn(Fe=>Fe.selectedModelId),u=Ko(Fe=>Fe.setVfsKey),[d,h]=T.useState(null),[p,g]=T.useState(null),[v,b]=T.useState(null),[_,x]=T.useState(null),[S,E]=T.useState(null),[C,k]=T.useState(null),[R,j]=T.useState(null),[O,L]=T.useState(null),[z,Y]=T.useState(null),[F,K]=T.useState(.7),[q,fe]=T.useState(1),[te,re]=T.useState(0),[X,ae]=T.useState(0),[U,ee]=T.useState(!1),[J,ue]=T.useState("prompt"),{project:be,effectiveSettings:_e}=T.useMemo(()=>{const Fe=n?r(n):null,Qe=n?i(n):null;return{project:Fe,effectiveSettings:Qe}},[n,r,i]),Pe=T.useCallback(Fe=>{var Le;if(!Fe)return null;const Qe=r(Fe);return Qe?((Le=Qe.metadata)==null?void 0:Le.syncRepoId)!==void 0?Qe.metadata.syncRepoId:Pe(Qe.parentId):null},[r]),Ne=n?Pe(n):null;T.useEffect(()=>{var Fe;e&&n&&be&&_e?(u(n),h(be.systemPrompt??null),g(be.modelId??null),b(be.temperature??null),x(be.maxTokens??null),E(be.topP??null),k(be.topK??null),j(be.presencePenalty??null),L(be.frequencyPenalty??null),Y(((Fe=be.metadata)==null?void 0:Fe.syncRepoId)??null),K(_e.temperature??s.temperature),fe(_e.topP??s.topP??1),re(_e.presencePenalty??s.presencePenalty??0),ae(_e.frequencyPenalty??s.frequencyPenalty??0),ue("prompt")):e||(u(null),h(null),g(null),b(null),x(null),E(null),k(null),j(null),L(null),Y(null))},[e,n,be,_e,s,u]),T.useEffect(()=>K(v??(_e==null?void 0:_e.temperature)??s.temperature),[v,_e,s.temperature]),T.useEffect(()=>fe(S??(_e==null?void 0:_e.topP)??s.topP??1),[S,_e,s.topP]),T.useEffect(()=>re(R??(_e==null?void 0:_e.presencePenalty)??s.presencePenalty??0),[R,_e,s.presencePenalty]),T.useEffect(()=>ae(O??(_e==null?void 0:_e.frequencyPenalty)??s.frequencyPenalty??0),[O,_e,s.frequencyPenalty]);const Re=async()=>{if(!(!n||!be)){ee(!0);try{const Fe=be.parentId?i(be.parentId):{systemPrompt:s.globalSystemPrompt,modelId:l,temperature:s.temperature,maxTokens:s.maxTokens,topP:s.topP,topK:s.topK,presencePenalty:s.presencePenalty,frequencyPenalty:s.frequencyPenalty},Qe=be.parentId?Pe(be.parentId):null,Le={},Ie={...be.metadata??{}};d!==Fe.systemPrompt?Le.systemPrompt=d:Le.systemPrompt=void 0,p!==Fe.modelId?Le.modelId=p:Le.modelId=void 0,v!==Fe.temperature?Le.temperature=v:Le.temperature=void 0,_!==Fe.maxTokens?Le.maxTokens=_:Le.maxTokens=void 0,S!==Fe.topP?Le.topP=S:Le.topP=void 0,C!==Fe.topK?Le.topK=C:Le.topK=void 0,R!==Fe.presencePenalty?Le.presencePenalty=R:Le.presencePenalty=void 0,O!==Fe.frequencyPenalty?Le.frequencyPenalty=O:Le.frequencyPenalty=void 0,z!==Qe?Ie.syncRepoId=z:delete Ie.syncRepoId,Le.metadata=Ie,await a(n,Le),lt.success(`Project "${be.name}" settings updated.`),t()}catch(Fe){lt.error("Failed to save project settings."),console.error("Failed to save project settings:",Fe)}finally{ee(!1)}}},Ce=T.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:y.jsx(T1e,{systemPrompt:d,setSystemPrompt:h,modelId:p,setModelId:g,effectiveSystemPrompt:(_e==null?void 0:_e.systemPrompt)??s.globalSystemPrompt,effectiveModelId:(_e==null?void 0:_e.modelId)??l,isSaving:U})},{value:"params",label:"Parameters",content:y.jsx(N1e,{temperature:v,setTemperature:b,maxTokens:_,setMaxTokens:x,topP:S,setTopP:E,topK:C,setTopK:k,presencePenalty:R,setPresencePenalty:j,frequencyPenalty:O,setFrequencyPenalty:L,localTemp:F,setLocalTemp:K,localTopP:q,setLocalTopP:fe,localPresence:te,setLocalPresence:re,localFrequency:X,setLocalFrequency:ae,effectiveTemperature:(_e==null?void 0:_e.temperature)??s.temperature,effectiveMaxTokens:(_e==null?void 0:_e.maxTokens)??s.maxTokens,effectiveTopP:(_e==null?void 0:_e.topP)??s.topP,effectiveTopK:(_e==null?void 0:_e.topK)??s.topK,effectivePresencePenalty:(_e==null?void 0:_e.presencePenalty)??s.presencePenalty,effectiveFrequencyPenalty:(_e==null?void 0:_e.frequencyPenalty)??s.frequencyPenalty,isSaving:U})},{value:"sync",label:"Sync",content:y.jsx(R1e,{syncRepoId:z,setSyncRepoId:Y,effectiveSyncRepoId:Ne,syncRepos:o,isSaving:U})},{value:"vfs",label:"Filesystem",content:y.jsx(I1e,{projectId:n,projectName:(be==null?void 0:be.name)??null,isSaving:U})}],[d,p,v,_,S,C,R,O,z,_e,s,l,U,F,q,te,X,Ne,o,n,be==null?void 0:be.name]);return y.jsx(R1,{open:e,onOpenChange:t,children:y.jsxs(I1,{className:"sm:max-w-[800px] w-[90vw] h-[70vh] min-h-[500px] max-h-[80vh] flex flex-col p-0",children:[y.jsxs(O1,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsxs(D1,{children:["Project Settings: ",be==null?void 0:be.name]}),y.jsx(M1,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),y.jsx(up,{tabs:Ce,initialValue:J,onValueChange:ue,className:"flex-grow overflow-hidden px-6",listClassName:"-mx-6 px-6",contentContainerClassName:"pb-6 pr-2 -mr-2"}),y.jsxs(j1,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:[y.jsx(Bt,{variant:"outline",onClick:t,disabled:U,children:"Cancel"}),y.jsxs(Bt,{onClick:Re,disabled:U,children:[U&&y.jsx(Gn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function j1e(){const e=Pr.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=ha.getState();return y.jsx(O1e,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>yt.createElement(t),status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}const D1e=()=>{const{selectedModelId:e,selectModel:t}=Pn(hn(s=>({selectedModelId:s.selectedModelId,selectModel:s.selectModel}))),[n,r]=T.useState(()=>or.getState().status==="streaming"),[a,i]=T.useState(e);T.useEffect(()=>{const s=u=>{r(u.status==="streaming")},l=u=>{i(u.modelId)};return i(Pn.getState().selectedModelId),Ct.on(xt.INTERACTION_STATUS_CHANGED,s),Ct.on(xt.MODEL_SELECTION_CHANGED,l),()=>{Ct.off(xt.INTERACTION_STATUS_CHANGED,s),Ct.off(xt.MODEL_SELECTION_CHANGED,l)}},[]);const o=s=>{t(s)};return y.jsx(tT,{value:a,onChange:o,disabled:n})};function M1e(){const e=Pr.getState().registerPromptControl;e({id:"core-global-model-selector",status:()=>Pn.getState().isLoading?"loading":"ready",triggerRenderer:()=>yt.createElement(D1e),getParameters:void 0,getMetadata:void 0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}let Hc="",Fm=()=>{};const P1e=()=>{const[e,t]=T.useState(Hc),[n,r]=T.useState(!1),[a,i]=T.useState(null),[o,s]=T.useState(()=>or.getState().status==="streaming");T.useEffect(()=>(Fm=p=>{Hc=p,t(p)},t(Hc),()=>{Fm=()=>{}}),[]),T.useEffect(()=>{const p=S=>{s(S.status==="streaming")},g=(S,E)=>{var O;const{getConversationById:C}=mn.getState(),{getEffectiveProjectSettings:k}=ni.getState(),R=Zr.getState().globalSystemPrompt,j=E==="project"?S:E==="conversation"?((O=C(S))==null?void 0:O.projectId)??null:null;i(k(j).systemPrompt??R)},v=S=>{g(S.selectedItemId,S.selectedItemType)},b=S=>{var k;const E=mn.getState();(E.selectedItemType==="project"?E.selectedItemId:E.selectedItemType==="conversation"?((k=E.getConversationById(E.selectedItemId))==null?void 0:k.projectId)??null:null)===S.projectId&&g(E.selectedItemId,E.selectedItemType)},_=S=>{if(S.key==="globalSystemPrompt"){const E=mn.getState();g(E.selectedItemId,E.selectedItemType)}},x=mn.getState();return g(x.selectedItemId,x.selectedItemType),Ct.on(xt.INTERACTION_STATUS_CHANGED,p),Ct.on(xt.CONTEXT_CHANGED,v),Ct.on(xt.PROJECT_UPDATED,b),Ct.on(xt.SETTINGS_CHANGED,_),()=>{Ct.off(xt.INTERACTION_STATUS_CHANGED,p),Ct.off(xt.CONTEXT_CHANGED,v),Ct.off(xt.PROJECT_UPDATED,b),Ct.off(xt.SETTINGS_CHANGED,_)}},[]);const l=T.useCallback(()=>{Fm(e.trim()),r(!1)},[e]),u=T.useCallback(()=>{Fm(""),r(!1)},[]),d=p=>{p&&t(Hc),r(p)},h=Hc.trim().length>0;return y.jsxs(pp,{open:n,onOpenChange:d,children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(mp,{asChild:!0,children:y.jsx(Bt,{variant:h?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:o,"aria-label":"Set System Prompt for Next Turn",children:y.jsx(oq,{className:"h-4 w-4"})})})}),y.jsx(ar,{side:"top",children:h?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),y.jsxs(gp,{className:"w-80 p-4 space-y-3",align:"start",children:[y.jsx(on,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),y.jsx(lp,{id:"turn-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,50))||"Default"}${a&&a.length>50?"...":""}`,value:e,onChange:p=>t(p.target.value),rows:5,className:"text-sm"}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx(Bt,{variant:"outline",size:"sm",onClick:u,disabled:!e.trim(),children:"Clear Override"}),y.jsx(Bt,{size:"sm",onClick:l,children:"Set for Next Turn"})]})]})]})};function F1e(){const e=Pr.getState().registerPromptControl;Hc="",e({id:"core-system-prompt",status:()=>"ready",triggerRenderer:()=>yt.createElement(P1e),getMetadata:()=>{const t=Hc.trim();return t?{turnSystemPrompt:t}:void 0},clearOnSubmit:()=>{Hc="",Fm("")}}),console.log("[Function] Registered Core System Prompt Control")}const L1e=()=>{const{structuredOutputJson:e,setStructuredOutputJson:t}=Ea(hn(x=>({structuredOutputJson:x.structuredOutputJson,setStructuredOutputJson:x.setStructuredOutputJson}))),[n,r]=T.useState(!1),[a,i]=T.useState(e??""),[o,s]=T.useState(""),[l,u]=T.useState([]),d=T.useCallback(()=>{try{JSON.parse(a),t(a.trim()||null),r(!1),lt.success("Structured output applied for next turn.")}catch{lt.error("Invalid JSON format.")}},[a,t]),h=T.useCallback(()=>{i(""),t(null),r(!1),lt.info("Structured output cleared.")},[t]),p=T.useCallback(()=>{if(!o.trim()){lt.error("Please provide a name to save to the library.");return}try{JSON.parse(a);const x={id:Date.now().toString(),name:o.trim(),json:a};u(S=>[...S,x]),s(""),lt.success(`"${x.name}" saved to library.`)}catch{lt.error("Cannot save invalid JSON to library.")}},[a,o]),g=T.useCallback(x=>{i(x.json),t(x.json),r(!1),lt.success(`Loaded "${x.name}" from library.`)},[t]),v=T.useCallback(x=>{u(S=>S.filter(E=>E.id!==x)),lt.info("Item removed from library.")},[]);T.useEffect(()=>{n&&i(e??"")},[n,e]);const b=[{value:"entry",label:"Entry",content:y.jsxs("div",{className:"space-y-3 p-1",children:[y.jsx(on,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),y.jsx(lp,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:a,onChange:x=>i(x.target.value),rows:8,className:"font-mono text-xs"}),y.jsxs("div",{className:"flex justify-between items-end gap-2",children:[y.jsxs("div",{className:"flex-grow space-y-1",children:[y.jsx(on,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),y.jsx(Jn,{id:"structured-output-name",value:o,onChange:x=>s(x.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),y.jsxs(Bt,{size:"sm",variant:"outline",onClick:p,disabled:!o.trim()||!a.trim(),className:"h-8",children:[y.jsx(X0,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),y.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[y.jsx(Bt,{variant:"outline",size:"sm",onClick:h,disabled:!e,children:"Clear Applied Schema"}),y.jsx(Bt,{size:"sm",onClick:d,disabled:!a,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:y.jsx("div",{className:"space-y-2 p-1",children:l.length===0?y.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):l.map(x=>y.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[y.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:x.name}),y.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[y.jsx(Bt,{size:"sm",variant:"outline",onClick:()=>g(x),className:"h-7 px-2 text-xs",children:"Use"}),y.jsx(Bt,{size:"icon",variant:"ghost",onClick:()=>v(x.id),className:"h-7 w-7 text-destructive",children:y.jsx(Ho,{className:"h-3.5 w-3.5"})})]})]},x.id))})}],_=!!e;return y.jsxs(pp,{open:n,onOpenChange:r,children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(mp,{asChild:!0,children:y.jsx(Bt,{variant:_?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:y.jsx(YU,{className:"h-4 w-4"})})})}),y.jsx(ar,{side:"top",children:_?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),y.jsx(gp,{className:"w-[450px] p-0",align:"start",children:y.jsx(up,{tabs:b,defaultValue:"entry"})})]})},$1e=()=>{const[e,t]=T.useState(!0);return T.useEffect(()=>{console.log("[VisibleStructuredOutputControl] useEffect setup running.");const n=r=>{var l;if(console.log("[VisibleStructuredOutputControl] handleModelChange triggered:",r),!r.modelId){t(!1);return}const{getSelectedModel:a}=Pn.getState(),i=a(),o=(l=i==null?void 0:i.metadata)==null?void 0:l.supported_parameters,s=Array.isArray(o)&&o.includes("structured_output");console.log(`[VisibleStructuredOutputControl] Model ${r.modelId} supports structured_output: ${s}`),t(s)};return n({modelId:Pn.getState().selectedModelId}),console.log(`[VisibleStructuredOutputControl] Subscribing to ${xt.MODEL_SELECTION_CHANGED}`),Ct.on(xt.MODEL_SELECTION_CHANGED,n),()=>{console.log("[VisibleStructuredOutputControl] useEffect cleanup running."),Ct.off(xt.MODEL_SELECTION_CHANGED,n)}},[]),e?y.jsx(L1e,{}):null};function B1e(){const e=Pr.getState().registerPromptControl;e({id:"core-structured-output",status:()=>"ready",triggerRenderer:()=>yt.createElement($1e),getParameters:()=>{const{structuredOutputJson:t}=Ea.getState();if(t)try{return{structured_output:JSON.parse(t)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{Ea.getState().setStructuredOutputJson(null)}}),console.log("[Function] Registered Core Structured Output Control")}const cz=4,t2=e=>{let t=0;return e.forEach(n=>{var r,a,i,o;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(o=(i=(a=n.prompt)==null?void 0:a.metadata)==null?void 0:i.attachedFiles)==null||o.forEach(s=>{t+=s.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/cz)},z1e=()=>{const[e,t]=T.useState(""),[n,r]=T.useState(0),[a,i]=T.useState([]),[o,s]=T.useState(null),[l,u]=T.useState(0);T.useEffect(()=>{const b=Jc.getState(),_=Pn.getState(),x=or.getState();if(i(b.attachedFilesMetadata),s(_.selectedModelId),x.currentConversationId){const j=x.interactions.filter(O=>O.status==="COMPLETED");r(t2(j))}else r(0);const S=j=>{t(j.value)},E=j=>{i(j.files)},C=j=>{console.log(j),s(j.modelId)},k=()=>{const j=or.getState();if(j.currentConversationId){const O=j.interactions.filter(L=>L.status==="COMPLETED");r(t2(O))}},R=()=>{const j=or.getState();if(j.currentConversationId){const O=j.interactions.filter(L=>L.status==="COMPLETED");r(t2(O))}else r(0)};return Ct.on(xt.PROMPT_INPUT_CHANGE,S),Ct.on(xt.ATTACHED_FILES_CHANGED,E),Ct.on(xt.MODEL_SELECTION_CHANGED,C),Ct.on(xt.INTERACTION_COMPLETED,k),Ct.on(xt.CONTEXT_CHANGED,R),()=>{Ct.off(xt.PROMPT_INPUT_CHANGE,S),Ct.off(xt.ATTACHED_FILES_CHANGED,E),Ct.off(xt.MODEL_SELECTION_CHANGED,C),Ct.off(xt.INTERACTION_COMPLETED,k),Ct.off(xt.CONTEXT_CHANGED,R)}},[]),T.useEffect(()=>{var O;if(!o){u(0);return}const{dbProviderConfigs:b,dbApiKeys:_}=Pn.getState(),{providerId:x,modelId:S}=Yl(o);if(!x||!S){u(0);return}const E=b.find(L=>L.id===x);if(!E){u(0);return}const C=_.find(L=>L.id===E.apiKeyId),k=XC(E,S,C==null?void 0:C.value),R=k==null?void 0:k.metadata,j=((O=R==null?void 0:R.top_provider)==null?void 0:O.context_length)??(R==null?void 0:R.context_length)??0;u(j)},[o]);const{estimatedInputTokens:d,totalEstimatedTokens:h,contextPercentage:p}=T.useMemo(()=>{const b=new TextEncoder().encode(e).length,_=a.reduce((C,k)=>C+k.size,0),x=Math.ceil((b+_)/cz),S=n+x,E=l?Math.min(100,Math.round(S/l*100)):0;return{estimatedInputTokens:x,totalEstimatedTokens:S,contextPercentage:E}},[e,a,n,l]),g=T.useMemo(()=>p>85?"text-red-600 dark:text-red-500":p>70?"text-orange-500 dark:text-orange-400":p>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[p]);if(!o||l===0)return null;const v=`Context: ~${h.toLocaleString()} / ${l.toLocaleString()} tokens (${p}%) [History: ${n}, Input: ${d}]`;return y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:y.jsx(p6,{className:Rt("h-3 w-3 fill-current",g)})})}),y.jsx(ar,{side:"top",children:v})]})})};function U1e(){const e=Pr.getState().registerPromptControl;e({id:"core-usage-display",status:()=>"ready",triggerRenderer:()=>yt.createElement(z1e),renderer:void 0}),console.log("[Function] Registered Core Usage Display Control (Trigger)")}const H1e=()=>{const{setReasoningEnabled:e}=Ea(hn(u=>({setReasoningEnabled:u.setReasoningEnabled}))),[t,n]=T.useState(()=>Ea.getState().reasoningEnabled),[r,a]=T.useState(()=>or.getState().status==="streaming"),[i,o]=T.useState(!0);T.useEffect(()=>{const u=p=>{p.params.reasoningEnabled!==void 0&&n(p.params.reasoningEnabled)},d=p=>{a(p.status==="streaming")},h=p=>{var b,_;if(!p.modelId){o(!1);return}const{getSelectedModel:g}=Pn.getState(),v=g();o(((_=(b=v==null?void 0:v.metadata)==null?void 0:b.supported_parameters)==null?void 0:_.includes("reasoning"))??!1)};return h({modelId:Pn.getState().selectedModelId}),Ct.on(xt.PROMPT_PARAMS_CHANGED,u),Ct.on(xt.INTERACTION_STATUS_CHANGED,d),Ct.on(xt.MODEL_SELECTION_CHANGED,h),()=>{Ct.off(xt.PROMPT_PARAMS_CHANGED,u),Ct.off(xt.INTERACTION_STATUS_CHANGED,d),Ct.off(xt.MODEL_SELECTION_CHANGED,h)}},[]);const s=t===!0,l=()=>{e(s?null:!0)};return i?y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:s?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:l,disabled:r,"aria-label":s?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:y.jsx(f6,{className:Rt("h-4 w-4",s?"text-primary":"text-muted-foreground")})})}),y.jsx(ar,{side:"top",children:s?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};function q1e(){const e=Pr.getState().registerPromptControl;e({id:"core-reasoning",status:()=>"ready",triggerRenderer:()=>yt.createElement(H1e),getParameters:()=>{const{reasoningEnabled:t}=Ea.getState();return t===!0?{reasoning:!0}:void 0},clearOnSubmit:()=>{Ea.getState().setReasoningEnabled(null)}}),console.log("[Function] Registered Core Reasoning Control")}const V1e=()=>{const{setWebSearchEnabled:e}=Ea(hn(u=>({setWebSearchEnabled:u.setWebSearchEnabled}))),[t,n]=T.useState(()=>Ea.getState().webSearchEnabled),[r,a]=T.useState(()=>or.getState().status==="streaming"),[i,o]=T.useState(!0);T.useEffect(()=>{const u=p=>{p.params.webSearchEnabled!==void 0&&n(p.params.webSearchEnabled)},d=p=>{a(p.status==="streaming")},h=p=>{var _;if(!p.modelId){o(!1);return}const{getSelectedModel:g}=Pn.getState(),v=g(),b=((_=v==null?void 0:v.metadata)==null?void 0:_.supported_parameters)??[];o(b.includes("web_search")||b.includes("web_search_options"))};return h({modelId:Pn.getState().selectedModelId}),Ct.on(xt.PROMPT_PARAMS_CHANGED,u),Ct.on(xt.INTERACTION_STATUS_CHANGED,d),Ct.on(xt.MODEL_SELECTION_CHANGED,h),()=>{Ct.off(xt.PROMPT_PARAMS_CHANGED,u),Ct.off(xt.INTERACTION_STATUS_CHANGED,d),Ct.off(xt.MODEL_SELECTION_CHANGED,h)}},[]);const s=t===!0,l=()=>{e(s?null:!0)};return i?y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Bt,{variant:s?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:l,disabled:r,"aria-label":s?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:y.jsx(J0,{className:Rt("h-4 w-4",s?"text-primary":"text-muted-foreground")})})}),y.jsx(ar,{side:"top",children:s?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};function G1e(){const e=Pr.getState().registerPromptControl;e({id:"core-web-search",status:()=>"ready",triggerRenderer:()=>yt.createElement(V1e),getParameters:()=>{const{webSearchEnabled:t}=Ea.getState();return t===!0?{web_search:!0}:void 0},clearOnSubmit:()=>{Ea.getState().setWebSearchEnabled(null)}}),console.log("[Function] Registered Core Web Search Control")}const W1e=()=>{const[e,t]=T.useState(!0),n=mn(te=>te.selectedItemId),r=mn(te=>te.selectedItemType),a=mn(te=>te.loadSidebarItems),i=mn(te=>te.getConversationById),{getEffectiveProjectSettings:o}=ni(hn(te=>({projects:te.projects,getProjectById:te.getProjectById,getEffectiveProjectSettings:te.getEffectiveProjectSettings}))),{interactions:s,status:l}=or(hn(te=>({interactions:te.interactions,status:te.status}))),{globalError:u,isSidebarCollapsed:d,isChatControlPanelOpen:h,isProjectSettingsModalOpen:p,isVfsModalOpen:g}=ha(hn(te=>({globalError:te.globalError,isSidebarCollapsed:te.isSidebarCollapsed,isChatControlPanelOpen:te.isChatControlPanelOpen,isProjectSettingsModalOpen:te.isProjectSettingsModalOpen,isVfsModalOpen:te.isVfsModalOpen}))),v=Pr(hn(te=>Object.values(te.chatControls))),{loadDbMods:b,setLoadedMods:_}=U0(hn(te=>({loadDbMods:te.loadDbMods,setLoadedMods:te.setLoadedMods}))),{loadInitialData:x}=Pn(hn(te=>({loadInitialData:te.loadInitialData}))),{loadSettings:S}=Zr(hn(te=>({loadSettings:te.loadSettings}))),{setVfsKey:E}=Ko(hn(te=>({setVfsKey:te.setVfsKey}))),{initializePromptState:C}=Ea(hn(te=>({initializePromptState:te.initializePromptState})));T.useEffect(()=>{let te=!0;return(async()=>{var X;console.log("LiteChat: Starting initialization..."),t(!0);try{if(console.log("LiteChat: Loading core data..."),await S(),!te||(console.log("LiteChat: Settings loaded."),await x(),!te)||(console.log("LiteChat: Provider data loaded."),await a(),!te)||(console.log("LiteChat: Sidebar items loaded."),console.log("LiteChat: Registering core controls and tools..."),s0e(),jbe(),Obe(),j1e(),M1e(),U1e(),F1e(),q1e(),G1e(),eve(),jwe(),Xwe(),Ybe(),B1e(),Mwe(),Uwe(),Kwe(),console.log("LiteChat: Core controls and tools registered."),!te)||(console.log("LiteChat: Loading mods..."),await b(),!te))return;console.log("LiteChat: DB Mods loaded.");const ae=U0.getState().dbMods;console.log(`LiteChat: Processing ${ae.length} mods...`);const U=await Jme(ae);if(!te)return;_(U),console.log(`LiteChat: ${U.length} mods processed.`);const ee=r==="project"?n:r==="conversation"?((X=i(n))==null?void 0:X.projectId)??null:null,J=o(ee);C(J),console.log("LiteChat: Initial prompt state initialized.",J)}catch(ae){console.error("LiteChat: Initialization failed:",ae),lt.error(`Initialization failed: ${ae instanceof Error?ae.message:String(ae)}`),ha.getState().setGlobalError("Initialization failed.")}finally{te&&(console.log("LiteChat: Initialization complete."),t(!1))}})(),()=>{te=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[]);const k=T.useRef({itemId:null,itemType:null});T.useEffect(()=>{var re;if(e)return;const te={itemId:n,itemType:r};if(te.itemId!==k.current.itemId||te.itemType!==k.current.itemType){const X=r==="project"?n:r==="conversation"?((re=i(n))==null?void 0:re.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${n}, Type: ${r}). Calculating effective settings for Project ID: ${X}`);const ae=o(X);C(ae),console.log("[LiteChat Effect] Prompt state updated based on context change.",ae),k.current=te}},[n,r,i,o,C,e]),T.useEffect(()=>{let te=null;if(g||r==="project"){if(r==="project")te=n;else if(r==="conversation"){const re=mn.getState().getConversationById(n);te=(re==null?void 0:re.projectId)??"orphan"}else te="orphan";console.log(`[LiteChat Effect] VFS Context Required. Setting target key: ${te}`)}else te=null,console.log("[LiteChat Effect] VFS Context Not Required. Setting target key: null");Ko.getState().vfsKey!==te&&E(te)},[g,n,r,E]);const R=T.useCallback(async te=>{var J;const re=mn.getState(),X=ha.getState(),ae=Ea.getState();let U=re.selectedItemType==="conversation"?re.selectedItemId:null;const ee=re.selectedItemType==="project"?re.selectedItemId:re.selectedItemType==="conversation"?((J=re.getConversationById(re.selectedItemId))==null?void 0:J.projectId)??null:null;if(!U){console.log("LiteChat: No conversation selected, creating new one...");try{const ue=await re.addConversation({title:"New Chat",projectId:ee});await re.selectItem(ue,"conversation"),U=mn.getState().selectedItemId,U!==ue&&console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),console.log(`LiteChat: New conversation created (${U}), selected.`),setTimeout(()=>X.setFocusInputFlag(!0),0)}catch(ue){console.error("LiteChat: Failed to create new conversation",ue),lt.error("Failed to start new chat.");return}}console.log("LiteChat: Submitting turn data to ConversationService...");try{const ue={...te,metadata:{...te.metadata,modelId:ae.modelId}};await vj.submitPrompt(ue),console.log("LiteChat: ConversationService processing initiated."),X.setFocusInputFlag(!0)}catch(ue){console.error("LiteChat: Error submitting prompt:",ue)}},[]),j=T.useCallback(async te=>{console.log(`LiteChat: Regenerating interaction ${te}`);try{await vj.regenerateInteraction(te),console.log(`LiteChat: ConversationService regeneration initiated for ${te}.`),ha.getState().setFocusInputFlag(!0)}catch(re){console.error("LiteChat: Error regenerating interaction:",re)}},[]),O=T.useCallback(te=>{console.log(`LiteChat: Stopping interaction ${te}`),pC.abortInteraction(te)},[]),L=T.useMemo(()=>v.filter(te=>(te.panel??"main")==="sidebar"&&(te.show?te.show():!0)).map(te=>te),[v]),z=T.useMemo(()=>v.filter(te=>te.panel==="sidebar-footer"&&(te.show?te.show():!0)).map(te=>te),[v]),Y=T.useMemo(()=>v.filter(te=>te.panel==="header"&&(te.show?te.show():!0)).map(te=>te),[v]),F=T.useMemo(()=>{var te;return(te=v.find(re=>re.id==="core-settings-trigger"))==null?void 0:te.settingsRenderer},[v]),K=T.useMemo(()=>{var te;return(te=v.find(re=>re.id==="core-project-settings-trigger"))==null?void 0:te.settingsRenderer},[v]),q=T.useMemo(()=>{var te;return(te=v.find(re=>re.id==="core-vfs-modal-panel"))==null?void 0:te.renderer},[v]),fe=r==="conversation"?n:null;return e?y.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx(Gn,{className:"h-12 w-12 animate-spin text-primary"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Rt("flex h-full w-full border border-[--border] rounded-lg overflow-hidden bg-background text-foreground"),children:[y.jsxs("div",{className:Rt("hidden md:flex flex-col border-r border-[--border] bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",d?"w-16":"w-64"),children:[y.jsxs("div",{className:Rt("flex-grow overflow-y-auto overflow-x-hidden"),children:[y.jsx("div",{className:Rt(d?"hidden":"block"),children:y.jsx(Pb,{controls:L,panelId:"sidebar",renderMode:"full",className:"h-full"})}),y.jsx("div",{className:Rt(d?"block":"hidden"),children:y.jsx(Pb,{controls:L,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),y.jsx("div",{className:Rt("flex-shrink-0 border-t border-[--border] p-2",d?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:y.jsx(Pb,{controls:z,panelId:"sidebar-footer",renderMode:d?"icon":"full",className:Rt("flex",d?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),y.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center justify-end p-2 border-b border-[--border] bg-card flex-shrink-0",children:y.jsx(Pb,{controls:Y,panelId:"header",className:"flex items-center justify-end gap-1"})}),y.jsx(ffe,{conversationId:fe,interactions:s,onRegenerateInteraction:j,onStopInteraction:O,status:l,className:"flex-grow overflow-y-hidden p-4 space-y-4"}),u&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",u]}),y.jsx(MY,{InputAreaRenderer:O$,onSubmit:R,className:"border-t border-[--border] bg-card flex-shrink-0"})]})]}),h.settingsModal&&F&&F(),p&&K&&K(),g&&q&&q(),y.jsx(r0e,{richColors:!0,position:"bottom-right",closeButton:!0})]})};function K1e(){return y.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:y.jsx("main",{className:"flex-grow overflow-hidden",children:y.jsx(W1e,{})})})}Oq();function Z1e({children:e}){const t=Zr(n=>n.theme);return T.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),y.jsx(y.Fragment,{children:e})}z7.createRoot(document.getElementById("root")).render(y.jsx(yt.StrictMode,{children:y.jsx(Z1e,{children:y.jsx(K1e,{})})}));
