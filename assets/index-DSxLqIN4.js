var pU=Object.defineProperty;var mU=(e,t,n)=>t in e?pU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ha=(e,t,n)=>mU(e,typeof t!="symbol"?t+"":t,n);function gU(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ui(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mS={exports:{}},jm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI;function yU(){if(TI)return jm;TI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:s,ref:a!==void 0?a:null,props:i}}return jm.Fragment=t,jm.jsx=n,jm.jsxs=n,jm}var AI;function bU(){return AI||(AI=1,mS.exports=yU()),mS.exports}var m=bU(),gS={exports:{}};function vU(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var k6={exports:{}},la=k6.exports={},Mo,Po;function M2(){throw new Error("setTimeout has not been defined")}function P2(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Mo=setTimeout:Mo=M2}catch{Mo=M2}try{typeof clearTimeout=="function"?Po=clearTimeout:Po=P2}catch{Po=P2}})();function T6(e){if(Mo===setTimeout)return setTimeout(e,0);if((Mo===M2||!Mo)&&setTimeout)return Mo=setTimeout,setTimeout(e,0);try{return Mo(e,0)}catch{try{return Mo.call(null,e,0)}catch{return Mo.call(this,e,0)}}}function wU(e){if(Po===clearTimeout)return clearTimeout(e);if((Po===P2||!Po)&&clearTimeout)return Po=clearTimeout,clearTimeout(e);try{return Po(e)}catch{try{return Po.call(null,e)}catch{return Po.call(this,e)}}}var Ul=[],yh=!1,_d,gv=-1;function xU(){!yh||!_d||(yh=!1,_d.length?Ul=_d.concat(Ul):gv=-1,Ul.length&&A6())}function A6(){if(!yh){var e=T6(xU);yh=!0;for(var t=Ul.length;t;){for(_d=Ul,Ul=[];++gv<t;)_d&&_d[gv].run();gv=-1,t=Ul.length}_d=null,yh=!1,wU(e)}}la.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Ul.push(new N6(e,t)),Ul.length===1&&!yh&&T6(A6)};function N6(e,t){this.fun=e,this.array=t}N6.prototype.run=function(){this.fun.apply(null,this.array)};la.title="browser";la.browser=!0;la.env={};la.argv=[];la.version="";la.versions={};function ic(){}la.on=ic;la.addListener=ic;la.once=ic;la.off=ic;la.removeListener=ic;la.removeAllListeners=ic;la.emit=ic;la.prependListener=ic;la.prependOnceListener=ic;la.listeners=function(e){return[]};la.binding=function(e){throw new Error("process.binding is not supported")};la.cwd=function(){return"/"};la.chdir=function(e){throw new Error("process.chdir is not supported")};la.umask=function(){return 0};var _U=k6.exports;const ta=vU(_U);var Mn={},NI;function SU(){if(NI)return Mn;NI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(D){return D===null||typeof D!="object"?null:(D=h&&D[h]||D["@@iterator"],typeof D=="function"?D:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(D,J,Q){this.props=D,this.context=J,this.refs=b,this.updater=Q||y}w.prototype.isReactComponent={},w.prototype.setState=function(D,J){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,J,"setState")},w.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function x(){}x.prototype=w.prototype;function S(D,J,Q){this.props=D,this.context=J,this.refs=b,this.updater=Q||y}var E=S.prototype=new x;E.constructor=S,v(E,w.prototype),E.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function R(D,J,Q,ie,me,ve){return Q=ve.ref,{$$typeof:e,type:D,key:J,ref:Q!==void 0?Q:null,props:ve}}function j(D,J){return R(D.type,J,void 0,void 0,void 0,D.props)}function L(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function B(D){var J={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Q){return J[Q]})}var Z=/\/+/g;function P(D,J){return typeof D=="object"&&D!==null&&D.key!=null?B(""+D.key):J.toString(36)}function K(){}function q(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(K,K):(D.status="pending",D.then(function(J){D.status==="pending"&&(D.status="fulfilled",D.value=J)},function(J){D.status==="pending"&&(D.status="rejected",D.reason=J)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function de(D,J,Q,ie,me){var ve=typeof D;(ve==="undefined"||ve==="boolean")&&(D=null);var Me=!1;if(D===null)Me=!0;else switch(ve){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(D.$$typeof){case e:case t:Me=!0;break;case d:return Me=D._init,de(Me(D._payload),J,Q,ie,me)}}if(Me)return me=me(D),Me=ie===""?"."+P(D,0):ie,C(me)?(Q="",Me!=null&&(Q=Me.replace(Z,"$&/")+"/"),de(me,J,Q,"",function(ke){return ke})):me!=null&&(L(me)&&(me=j(me,Q+(me.key==null||D&&D.key===me.key?"":(""+me.key).replace(Z,"$&/")+"/")+Me)),J.push(me)),1;Me=0;var Ae=ie===""?".":ie+":";if(C(D))for(var Re=0;Re<D.length;Re++)ie=D[Re],ve=Ae+P(ie,Re),Me+=de(ie,J,Q,ve,me);else if(Re=p(D),typeof Re=="function")for(D=Re.call(D),Re=0;!(ie=D.next()).done;)ie=ie.value,ve=Ae+P(ie,Re++),Me+=de(ie,J,Q,ve,me);else if(ve==="object"){if(typeof D.then=="function")return de(q(D),J,Q,ie,me);throw J=String(D),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ae(D,J,Q){if(D==null)return D;var ie=[],me=0;return de(D,ie,"","",function(ve){return J.call(Q,ve,me++)}),ie}function te(D){if(D._status===-1){var J=D._result;J=J(),J.then(function(Q){(D._status===0||D._status===-1)&&(D._status=1,D._result=Q)},function(Q){(D._status===0||D._status===-1)&&(D._status=2,D._result=Q)}),D._status===-1&&(D._status=0,D._result=J)}if(D._status===1)return D._result.default;throw D._result}var X=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(J))return}else if(typeof ta=="object"&&typeof ta.emit=="function"){ta.emit("uncaughtException",D);return}console.error(D)};function re(){}return Mn.Children={map:ae,forEach:function(D,J,Q){ae(D,function(){J.apply(this,arguments)},Q)},count:function(D){var J=0;return ae(D,function(){J++}),J},toArray:function(D){return ae(D,function(J){return J})||[]},only:function(D){if(!L(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Mn.Component=w,Mn.Fragment=n,Mn.Profiler=a,Mn.PureComponent=S,Mn.StrictMode=r,Mn.Suspense=l,Mn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Mn.__COMPILER_RUNTIME={__proto__:null,c:function(D){return k.H.useMemoCache(D)}},Mn.cache=function(D){return function(){return D.apply(null,arguments)}},Mn.cloneElement=function(D,J,Q){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ie=v({},D.props),me=D.key,ve=void 0;if(J!=null)for(Me in J.ref!==void 0&&(ve=void 0),J.key!==void 0&&(me=""+J.key),J)!I.call(J,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&J.ref===void 0||(ie[Me]=J[Me]);var Me=arguments.length-2;if(Me===1)ie.children=Q;else if(1<Me){for(var Ae=Array(Me),Re=0;Re<Me;Re++)Ae[Re]=arguments[Re+2];ie.children=Ae}return R(D.type,me,void 0,void 0,ve,ie)},Mn.createContext=function(D){return D={$$typeof:s,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:i,_context:D},D},Mn.createElement=function(D,J,Q){var ie,me={},ve=null;if(J!=null)for(ie in J.key!==void 0&&(ve=""+J.key),J)I.call(J,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(me[ie]=J[ie]);var Me=arguments.length-2;if(Me===1)me.children=Q;else if(1<Me){for(var Ae=Array(Me),Re=0;Re<Me;Re++)Ae[Re]=arguments[Re+2];me.children=Ae}if(D&&D.defaultProps)for(ie in Me=D.defaultProps,Me)me[ie]===void 0&&(me[ie]=Me[ie]);return R(D,ve,void 0,void 0,null,me)},Mn.createRef=function(){return{current:null}},Mn.forwardRef=function(D){return{$$typeof:o,render:D}},Mn.isValidElement=L,Mn.lazy=function(D){return{$$typeof:d,_payload:{_status:-1,_result:D},_init:te}},Mn.memo=function(D,J){return{$$typeof:u,type:D,compare:J===void 0?null:J}},Mn.startTransition=function(D){var J=k.T,Q={};k.T=Q;try{var ie=D(),me=k.S;me!==null&&me(Q,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(re,X)}catch(ve){X(ve)}finally{k.T=J}},Mn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Mn.use=function(D){return k.H.use(D)},Mn.useActionState=function(D,J,Q){return k.H.useActionState(D,J,Q)},Mn.useCallback=function(D,J){return k.H.useCallback(D,J)},Mn.useContext=function(D){return k.H.useContext(D)},Mn.useDebugValue=function(){},Mn.useDeferredValue=function(D,J){return k.H.useDeferredValue(D,J)},Mn.useEffect=function(D,J,Q){var ie=k.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(D,J)},Mn.useId=function(){return k.H.useId()},Mn.useImperativeHandle=function(D,J,Q){return k.H.useImperativeHandle(D,J,Q)},Mn.useInsertionEffect=function(D,J){return k.H.useInsertionEffect(D,J)},Mn.useLayoutEffect=function(D,J){return k.H.useLayoutEffect(D,J)},Mn.useMemo=function(D,J){return k.H.useMemo(D,J)},Mn.useOptimistic=function(D,J){return k.H.useOptimistic(D,J)},Mn.useReducer=function(D,J,Q){return k.H.useReducer(D,J,Q)},Mn.useRef=function(D){return k.H.useRef(D)},Mn.useState=function(D){return k.H.useState(D)},Mn.useSyncExternalStore=function(D,J,Q){return k.H.useSyncExternalStore(D,J,Q)},Mn.useTransition=function(){return k.H.useTransition()},Mn.version="19.1.0",Mn}var RI;function lk(){return RI||(RI=1,gS.exports=SU()),gS.exports}var T=lk();const gt=ui(T),R6=gU({__proto__:null,default:gt},[T]);var yS={exports:{}},Om={},bS={exports:{}},vS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var II;function EU(){return II||(II=1,function(e){function t(ae,te){var X=ae.length;ae.push(te);e:for(;0<X;){var re=X-1>>>1,D=ae[re];if(0<a(D,te))ae[re]=te,ae[X]=D,X=re;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var te=ae[0],X=ae.pop();if(X!==te){ae[0]=X;e:for(var re=0,D=ae.length,J=D>>>1;re<J;){var Q=2*(re+1)-1,ie=ae[Q],me=Q+1,ve=ae[me];if(0>a(ie,X))me<D&&0>a(ve,ie)?(ae[re]=ve,ae[me]=X,re=me):(ae[re]=ie,ae[Q]=X,re=Q);else if(me<D&&0>a(ve,X))ae[re]=ve,ae[me]=X,re=me;else break e}}return te}function a(ae,te){var X=ae.sortIndex-te.sortIndex;return X!==0?X:ae.id-te.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ae){for(var te=n(u);te!==null;){if(te.callback===null)r(u);else if(te.startTime<=ae)r(u),te.sortIndex=te.expirationTime,t(l,te);else break;te=n(u)}}function k(ae){if(b=!1,C(ae),!v)if(n(l)!==null)v=!0,I||(I=!0,P());else{var te=n(u);te!==null&&de(k,te.startTime-ae)}}var I=!1,R=-1,j=5,L=-1;function B(){return w?!0:!(e.unstable_now()-L<j)}function Z(){if(w=!1,I){var ae=e.unstable_now();L=ae;var te=!0;try{e:{v=!1,b&&(b=!1,S(R),R=-1),y=!0;var X=p;try{t:{for(C(ae),h=n(l);h!==null&&!(h.expirationTime>ae&&B());){var re=h.callback;if(typeof re=="function"){h.callback=null,p=h.priorityLevel;var D=re(h.expirationTime<=ae);if(ae=e.unstable_now(),typeof D=="function"){h.callback=D,C(ae),te=!0;break t}h===n(l)&&r(l),C(ae)}else r(l);h=n(l)}if(h!==null)te=!0;else{var J=n(u);J!==null&&de(k,J.startTime-ae),te=!1}}break e}finally{h=null,p=X,y=!1}te=void 0}}finally{te?P():I=!1}}}var P;if(typeof E=="function")P=function(){E(Z)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,q=K.port2;K.port1.onmessage=Z,P=function(){q.postMessage(null)}}else P=function(){x(Z,0)};function de(ae,te){R=x(function(){ae(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(ae){switch(p){case 1:case 2:case 3:var te=3;break;default:te=p}var X=p;p=te;try{return ae()}finally{p=X}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(ae,te){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var X=p;p=ae;try{return te()}finally{p=X}},e.unstable_scheduleCallback=function(ae,te,X){var re=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?re+X:re):X=re,ae){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=X+D,ae={id:d++,callback:te,priorityLevel:ae,startTime:X,expirationTime:D,sortIndex:-1},X>re?(ae.sortIndex=X,t(u,ae),n(l)===null&&ae===n(u)&&(b?(S(R),R=-1):b=!0,de(k,X-re))):(ae.sortIndex=D,t(l,ae),v||y||(v=!0,I||(I=!0,P()))),ae},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(ae){var te=p;return function(){var X=p;p=te;try{return ae.apply(this,arguments)}finally{p=X}}}}(vS)),vS}var jI;function CU(){return jI||(jI=1,bS.exports=EU()),bS.exports}var wS={exports:{}},ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OI;function kU(){if(OI)return ti;OI=1;var e=lk();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ti.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(l,u,null,d)},ti.flushSync=function(l){var u=s.T,d=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=u,r.p=d,r.d.f()}},ti.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},ti.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ti.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ti.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},ti.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ti.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},ti.requestFormReset=function(l){r.d.r(l)},ti.unstable_batchedUpdates=function(l,u){return l(u)},ti.useFormState=function(l,u,d){return s.H.useFormState(l,u,d)},ti.useFormStatus=function(){return s.H.useHostTransitionStatus()},ti.version="19.1.0",ti}var DI;function I6(){if(DI)return wS.exports;DI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),wS.exports=kU(),wS.exports}var MI;function TU(){if(MI)return Om;MI=1;var e=CU(),t=lk(),n=I6();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var f=c,g=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(g=f.return),c=f.return;while(c)}return f.tag===3?g:null}function s(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function o(c){if(i(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=i(c),f===null)throw Error(r(188));return f!==c?null:c}for(var g=c,_=f;;){var N=g.return;if(N===null)break;var $=N.alternate;if($===null){if(_=N.return,_!==null){g=_;continue}break}if(N.child===$.child){for($=N.child;$;){if($===g)return o(N),c;if($===_)return o(N),f;$=$.sibling}throw Error(r(188))}if(g.return!==_.return)g=N,_=$;else{for(var se=!1,_e=N.child;_e;){if(_e===g){se=!0,g=N,_=$;break}if(_e===_){se=!0,_=N,g=$;break}_e=_e.sibling}if(!se){for(_e=$.child;_e;){if(_e===g){se=!0,g=$,_=N;break}if(_e===_){se=!0,_=$,g=N;break}_e=_e.sibling}if(!se)throw Error(r(189))}}if(g.alternate!==_)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:f}function u(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=u(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function P(c){return c===null||typeof c!="object"?null:(c=Z&&c[Z]||c["@@iterator"],typeof c=="function"?c:null)}var K=Symbol.for("react.client.reference");function q(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===K?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case v:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList";case L:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case y:return"Portal";case E:return(c.displayName||"Context")+".Provider";case S:return(c._context.displayName||"Context")+".Consumer";case C:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case R:return f=c.displayName||null,f!==null?f:q(c.type)||"Memo";case j:f=c._payload,c=c._init;try{return q(c(f))}catch{}}return null}var de=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},re=[],D=-1;function J(c){return{current:c}}function Q(c){0>D||(c.current=re[D],re[D]=null,D--)}function ie(c,f){D++,re[D]=c.current,c.current=f}var me=J(null),ve=J(null),Me=J(null),Ae=J(null);function Re(c,f){switch(ie(Me,f),ie(ve,c),ie(me,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?tI(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=tI(f),c=nI(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Q(me),ie(me,c)}function ke(){Q(me),Q(ve),Q(Me)}function Fe(c){c.memoizedState!==null&&ie(Ae,c);var f=me.current,g=nI(f,c.type);f!==g&&(ie(ve,c),ie(me,g))}function et(c){ve.current===c&&(Q(me),Q(ve)),Ae.current===c&&(Q(Ae),Tm._currentValue=X)}var Le=Object.prototype.hasOwnProperty,Ie=e.unstable_scheduleCallback,z=e.unstable_cancelCallback,Se=e.unstable_shouldYield,Te=e.unstable_requestPaint,ue=e.unstable_now,oe=e.unstable_getCurrentPriorityLevel,ee=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Pe=e.unstable_NormalPriority,Ee=e.unstable_LowPriority,We=e.unstable_IdlePriority,Nt=e.log,it=e.unstable_setDisableYieldValue,_t=null,Ft=null;function Pt(c){if(typeof Nt=="function"&&it(c),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(_t,c)}catch{}}var Zt=Math.clz32?Math.clz32:G,ye=Math.log,O=Math.LN2;function G(c){return c>>>=0,c===0?32:31-(ye(c)/O|0)|0}var fe=256,je=4194304;function be(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Ce(c,f,g){var _=c.pendingLanes;if(_===0)return 0;var N=0,$=c.suspendedLanes,se=c.pingedLanes;c=c.warmLanes;var _e=_&134217727;return _e!==0?(_=_e&~$,_!==0?N=be(_):(se&=_e,se!==0?N=be(se):g||(g=_e&~c,g!==0&&(N=be(g))))):(_e=_&~$,_e!==0?N=be(_e):se!==0?N=be(se):g||(g=_&~c,g!==0&&(N=be(g)))),N===0?0:f!==0&&f!==N&&(f&$)===0&&($=N&-N,g=f&-f,$>=g||$===32&&(g&4194048)!==0)?f:N}function le(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function ft(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var c=fe;return fe<<=1,(fe&4194048)===0&&(fe=256),c}function F(){var c=je;return je<<=1,(je&62914560)===0&&(je=4194304),c}function Be(c){for(var f=[],g=0;31>g;g++)f.push(c);return f}function nt(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ge(c,f,g,_,N,$){var se=c.pendingLanes;c.pendingLanes=g,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=g,c.entangledLanes&=g,c.errorRecoveryDisabledLanes&=g,c.shellSuspendCounter=0;var _e=c.entanglements,ze=c.expirationTimes,dt=c.hiddenUpdates;for(g=se&~g;0<g;){var Tt=31-Zt(g),Ot=1<<Tt;_e[Tt]=0,ze[Tt]=-1;var mt=dt[Tt];if(mt!==null)for(dt[Tt]=null,Tt=0;Tt<mt.length;Tt++){var yt=mt[Tt];yt!==null&&(yt.lane&=-536870913)}g&=~Ot}_!==0&&Oe(c,_,0),$!==0&&N===0&&c.tag!==0&&(c.suspendedLanes|=$&~(se&~f))}function Oe(c,f,g){c.pendingLanes|=f,c.suspendedLanes&=~f;var _=31-Zt(f);c.entangledLanes|=f,c.entanglements[_]=c.entanglements[_]|1073741824|g&4194090}function Ke(c,f){var g=c.entangledLanes|=f;for(c=c.entanglements;g;){var _=31-Zt(g),N=1<<_;N&f|c[_]&f&&(c[_]|=f),g&=~N}}function jt(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function pe(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function V(){var c=te.p;return c!==0?c:(c=window.event,c===void 0?32:xI(c.type))}function H(c,f){var g=te.p;try{return te.p=c,f()}finally{te.p=g}}var W=Math.random().toString(36).slice(2),he="__reactFiber$"+W,Ne="__reactProps$"+W,He="__reactContainer$"+W,pt="__reactEvents$"+W,Kt="__reactListeners$"+W,ut="__reactHandles$"+W,Rt="__reactResources$"+W,Lt="__reactMarker$"+W;function Qt(c){delete c[he],delete c[Ne],delete c[pt],delete c[Kt],delete c[ut]}function An(c){var f=c[he];if(f)return f;for(var g=c.parentNode;g;){if(f=g[He]||g[he]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(c=sI(c);c!==null;){if(g=c[he])return g;c=sI(c)}return f}c=g,g=c.parentNode}return null}function Wn(c){if(c=c[he]||c[He]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function xr(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function _r(c){var f=c[Rt];return f||(f=c[Rt]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Fn(c){c[Lt]=!0}var fi=new Set,mo={};function go(c,f){yo(c,f),yo(c+"Capture",f)}function yo(c,f){for(mo[c]=f,c=0;c<f.length;c++)fi.add(f[c])}var Kr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bo={},ls={};function ay(c){return Le.call(ls,c)?!0:Le.call(bo,c)?!1:Kr.test(c)?ls[c]=!0:(bo[c]=!0,!1)}function Fs(c,f,g){if(ay(f))if(g===null)c.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var _=f.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+g)}}function ll(c,f,g){if(g===null)c.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+g)}}function Ui(c,f,g,_){if(_===null)c.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(g);return}c.setAttributeNS(f,g,""+_)}}var Uu,vo;function cl(c){if(Uu===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);Uu=f&&f[1]||"",vo=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Uu+c+vo}var uc=!1;function uf(c,f){if(!c||uc)return"";uc=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(f){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(yt){var mt=yt}Reflect.construct(c,[],Ot)}else{try{Ot.call()}catch(yt){mt=yt}c.call(Ot.prototype)}}else{try{throw Error()}catch(yt){mt=yt}(Ot=c())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(yt){if(yt&&mt&&typeof yt.stack=="string")return[yt.stack,mt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=_.DetermineComponentFrameRoot(),se=$[0],_e=$[1];if(se&&_e){var ze=se.split(`
`),dt=_e.split(`
`);for(N=_=0;_<ze.length&&!ze[_].includes("DetermineComponentFrameRoot");)_++;for(;N<dt.length&&!dt[N].includes("DetermineComponentFrameRoot");)N++;if(_===ze.length||N===dt.length)for(_=ze.length-1,N=dt.length-1;1<=_&&0<=N&&ze[_]!==dt[N];)N--;for(;1<=_&&0<=N;_--,N--)if(ze[_]!==dt[N]){if(_!==1||N!==1)do if(_--,N--,0>N||ze[_]!==dt[N]){var Tt=`
`+ze[_].replace(" at new "," at ");return c.displayName&&Tt.includes("<anonymous>")&&(Tt=Tt.replace("<anonymous>",c.displayName)),Tt}while(1<=_&&0<=N);break}}}finally{uc=!1,Error.prepareStackTrace=g}return(g=c?c.displayName||c.name:"")?cl(g):""}function Kn(c){switch(c.tag){case 26:case 27:case 5:return cl(c.type);case 16:return cl("Lazy");case 13:return cl("Suspense");case 19:return cl("SuspenseList");case 0:case 15:return uf(c.type,!1);case 11:return uf(c.type.render,!1);case 1:return uf(c.type,!0);case 31:return cl("Activity");default:return""}}function Np(c){try{var f="";do f+=Kn(c),c=c.return;while(c);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function hi(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Rp(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Ir(c){var f=Rp(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),_=""+c[f];if(!c.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var N=g.get,$=g.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return N.call(this)},set:function(se){_=""+se,$.call(this,se)}}),Object.defineProperty(c,f,{enumerable:g.enumerable}),{getValue:function(){return _},setValue:function(se){_=""+se},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function wo(c){c._valueTracker||(c._valueTracker=Ir(c))}function dc(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var g=f.getValue(),_="";return c&&(_=Rp(c)?c.checked?"true":"false":c.value),c=_,c!==g?(f.setValue(c),!0):!1}function Ls(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Ip=/[\n"\\]/g;function Xa(c){return c.replace(Ip,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function fc(c,f,g,_,N,$,se,_e){c.name="",se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?c.type=se:c.removeAttribute("type"),f!=null?se==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+hi(f)):c.value!==""+hi(f)&&(c.value=""+hi(f)):se!=="submit"&&se!=="reset"||c.removeAttribute("value"),f!=null?hc(c,se,hi(f)):g!=null?hc(c,se,hi(g)):_!=null&&c.removeAttribute("value"),N==null&&$!=null&&(c.defaultChecked=!!$),N!=null&&(c.checked=N&&typeof N!="function"&&typeof N!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?c.name=""+hi(_e):c.removeAttribute("name")}function jp(c,f,g,_,N,$,se,_e){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(c.type=$),f!=null||g!=null){if(!($!=="submit"&&$!=="reset"||f!=null))return;g=g!=null?""+hi(g):"",f=f!=null?""+hi(f):g,_e||f===c.value||(c.value=f),c.defaultValue=f}_=_??N,_=typeof _!="function"&&typeof _!="symbol"&&!!_,c.checked=_e?c.checked:!!_,c.defaultChecked=!!_,se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(c.name=se)}function hc(c,f,g){f==="number"&&Ls(c.ownerDocument)===c||c.defaultValue===""+g||(c.defaultValue=""+g)}function ul(c,f,g,_){if(c=c.options,f){f={};for(var N=0;N<g.length;N++)f["$"+g[N]]=!0;for(g=0;g<c.length;g++)N=f.hasOwnProperty("$"+c[g].value),c[g].selected!==N&&(c[g].selected=N),N&&_&&(c[g].defaultSelected=!0)}else{for(g=""+hi(g),f=null,N=0;N<c.length;N++){if(c[N].value===g){c[N].selected=!0,_&&(c[N].defaultSelected=!0);return}f!==null||c[N].disabled||(f=c[N])}f!==null&&(f.selected=!0)}}function pc(c,f,g){if(f!=null&&(f=""+hi(f),f!==c.value&&(c.value=f),g==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=g!=null?""+hi(g):""}function Op(c,f,g,_){if(f==null){if(_!=null){if(g!=null)throw Error(r(92));if(de(_)){if(1<_.length)throw Error(r(93));_=_[0]}g=_}g==null&&(g=""),f=g}g=hi(f),c.defaultValue=g,_=c.textContent,_===g&&_!==""&&_!==null&&(c.value=_)}function mc(c,f){if(f){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=f;return}}c.textContent=f}var tr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function df(c,f,g){var _=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?_?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":_?c.setProperty(f,g):typeof g!="number"||g===0||tr.has(f)?f==="float"?c.cssFloat=g:c[f]=(""+g).trim():c[f]=g+"px"}function iy(c,f,g){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,g!=null){for(var _ in g)!g.hasOwnProperty(_)||f!=null&&f.hasOwnProperty(_)||(_.indexOf("--")===0?c.setProperty(_,""):_==="float"?c.cssFloat="":c[_]="");for(var N in f)_=f[N],f.hasOwnProperty(N)&&g[N]!==_&&df(c,N,_)}else for(var $ in f)f.hasOwnProperty($)&&df(c,$,f[$])}function Dp(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dl(c){return gc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var cs=null;function ff(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var fl=null,$r=null;function Hi(c){var f=Wn(c);if(f&&(c=f.stateNode)){var g=c[Ne]||null;e:switch(c=f.stateNode,f.type){case"input":if(fc(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Xa(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var _=g[f];if(_!==c&&_.form===c.form){var N=_[Ne]||null;if(!N)throw Error(r(90));fc(_,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(f=0;f<g.length;f++)_=g[f],_.form===c.form&&dc(_)}break e;case"textarea":pc(c,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&ul(c,!!g.multiple,f,!1)}}}var hl=!1;function yc(c,f,g){if(hl)return c(f,g);hl=!0;try{var _=c(f);return _}finally{if(hl=!1,(fl!==null||$r!==null)&&(Wy(),fl&&(f=fl,c=$r,$r=fl=null,Hi(f),c)))for(f=0;f<c.length;f++)Hi(c[f])}}function pl(c,f){var g=c.stateNode;if(g===null)return null;var _=g[Ne]||null;if(_===null)return null;g=_[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(c=c.type,_=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!_;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,f,typeof g));return g}var Ta=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mp=!1;if(Ta)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){Mp=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{Mp=!1}var us=null,hf=null,bc=null;function vc(){if(bc)return bc;var c,f=hf,g=f.length,_,N="value"in us?us.value:us.textContent,$=N.length;for(c=0;c<g&&f[c]===N[c];c++);var se=g-c;for(_=1;_<=se&&f[g-_]===N[$-_];_++);return bc=N.slice(c,1<_?1-_:void 0)}function wc(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Hu(){return!0}function sy(){return!1}function ca(c){function f(g,_,N,$,se){this._reactName=g,this._targetInst=N,this.type=_,this.nativeEvent=$,this.target=se,this.currentTarget=null;for(var _e in c)c.hasOwnProperty(_e)&&(g=c[_e],this[_e]=g?g($):$[_e]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?Hu:sy,this.isPropagationStopped=sy,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Hu)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Hu)},persist:function(){},isPersistent:Hu}),f}var ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pf=ca(ml),xo=d({},ml,{view:0,detail:0}),mf=ca(xo),qu,Pp,Vu,gf=d({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gl,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Vu&&(Vu&&c.type==="mousemove"?(qu=c.screenX-Vu.screenX,Pp=c.screenY-Vu.screenY):Pp=qu=0,Vu=c),qu)},movementY:function(c){return"movementY"in c?c.movementY:Pp}}),yf=ca(gf),Fp=d({},gf,{dataTransfer:0}),oy=ca(Fp),bf=d({},xo,{relatedTarget:0}),xc=ca(bf),vf=d({},ml,{animationName:0,elapsedTime:0,pseudoElement:0}),ly=ca(vf),N1=d({},ml,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),wf=ca(N1),Lp=d({},ml,{data:0}),xf=ca(Lp),$p={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gu(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Aa[c])?!!f[c]:!1}function gl(){return Gu}var cy=d({},xo,{key:function(c){if(c.key){var f=$p[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=wc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Bp[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gl,charCode:function(c){return c.type==="keypress"?wc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?wc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),_f=ca(cy),uy=d({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zp=ca(uy),Sf=d({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gl}),Up=ca(Sf),yl=d({},ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hp=ca(yl),qp=d({},gf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Ef=ca(qp),Vp=d({},ml,{newState:0,oldState:0}),dy=ca(Vp),R1=[9,13,27,32],Wu=Ta&&"CompositionEvent"in window,_o=null;Ta&&"documentMode"in document&&(_o=document.documentMode);var I1=Ta&&"TextEvent"in window&&!_o,Cf=Ta&&(!Wu||_o&&8<_o&&11>=_o),kf=" ",fy=!1;function Gp(c,f){switch(c){case"keyup":return R1.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hy(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var bl=!1;function py(c,f){switch(c){case"compositionend":return hy(f);case"keypress":return f.which!==32?null:(fy=!0,kf);case"textInput":return c=f.data,c===kf&&fy?null:c;default:return null}}function j1(c,f){if(bl)return c==="compositionend"||!Wu&&Gp(c,f)?(c=vc(),bc=hf=us=null,bl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Cf&&f.locale!=="ko"?null:f.data;default:return null}}var my={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tf(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!my[c.type]:f==="textarea"}function Wp(c,f,g,_){fl?$r?$r.push(_):$r=[_]:fl=_,f=Qy(f,"onChange"),0<f.length&&(g=new pf("onChange","change",null,g,_),c.push({event:g,listeners:f}))}var _c=null,Ku=null;function O1(c){YR(c,0)}function Af(c){var f=xr(c);if(dc(f))return c}function Zu(c,f){if(c==="change")return f}var ds=!1;if(Ta){var Br;if(Ta){var Sc="oninput"in document;if(!Sc){var mi=document.createElement("div");mi.setAttribute("oninput","return;"),Sc=typeof mi.oninput=="function"}Br=Sc}else Br=!1;ds=Br&&(!document.documentMode||9<document.documentMode)}function gy(){_c&&(_c.detachEvent("onpropertychange",Nf),Ku=_c=null)}function Nf(c){if(c.propertyName==="value"&&Af(Ku)){var f=[];Wp(f,Ku,c,ff(c)),yc(O1,f)}}function yy(c,f,g){c==="focusin"?(gy(),_c=f,Ku=g,_c.attachEvent("onpropertychange",Nf)):c==="focusout"&&gy()}function vl(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Af(Ku)}function Kp(c,f){if(c==="click")return Af(f)}function Ec(c,f){if(c==="input"||c==="change")return Af(f)}function So(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Qa=typeof Object.is=="function"?Object.is:So;function A(c,f){if(Qa(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var g=Object.keys(c),_=Object.keys(f);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var N=g[_];if(!Le.call(f,N)||!Qa(c[N],f[N]))return!1}return!0}function M(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Y(c,f){var g=M(c);c=0;for(var _;g;){if(g.nodeType===3){if(_=c+g.textContent.length,c<=f&&_>=f)return{node:g,offset:f-c};c=_}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=M(g)}}function ne(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?ne(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function ce(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=Ls(c.document);f instanceof c.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)c=f.contentWindow;else break;f=Ls(c.document)}return f}function we(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var De=Ta&&"documentMode"in document&&11>=document.documentMode,$e=null,Ge=null,Xe=null,rt=!1;function qe(c,f,g){var _=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;rt||$e==null||$e!==Ls(_)||(_=$e,"selectionStart"in _&&we(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Xe&&A(Xe,_)||(Xe=_,_=Qy(Ge,"onSelect"),0<_.length&&(f=new pf("onSelect","select",null,f,g),c.push({event:f,listeners:_}),f.target=$e)))}function st(c,f){var g={};return g[c.toLowerCase()]=f.toLowerCase(),g["Webkit"+c]="webkit"+f,g["Moz"+c]="moz"+f,g}var Ve={animationend:st("Animation","AnimationEnd"),animationiteration:st("Animation","AnimationIteration"),animationstart:st("Animation","AnimationStart"),transitionrun:st("Transition","TransitionRun"),transitionstart:st("Transition","TransitionStart"),transitioncancel:st("Transition","TransitionCancel"),transitionend:st("Transition","TransitionEnd")},tt={},ot={};Ta&&(ot=document.createElement("div").style,"AnimationEvent"in window||(delete Ve.animationend.animation,delete Ve.animationiteration.animation,delete Ve.animationstart.animation),"TransitionEvent"in window||delete Ve.transitionend.transition);function Je(c){if(tt[c])return tt[c];if(!Ve[c])return c;var f=Ve[c],g;for(g in f)if(f.hasOwnProperty(g)&&g in ot)return tt[c]=f[g];return c}var ht=Je("animationend"),bt=Je("animationiteration"),wt=Je("animationstart"),kt=Je("transitionrun"),Ht=Je("transitionstart"),Yt=Je("transitioncancel"),Bt=Je("transitionend"),Vt=new Map,Xt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xt.push("scrollEnd");function zt(c,f){Vt.set(c,f),go(f,[c])}var nn=new WeakMap;function pn(c,f){if(typeof c=="object"&&c!==null){var g=nn.get(c);return g!==void 0?g:(f={value:c,source:f,stack:Np(f)},nn.set(c,f),f)}return{value:c,source:f,stack:Np(f)}}var gn=[],Nn=0,qa=0;function _n(){for(var c=Nn,f=qa=Nn=0;f<c;){var g=gn[f];gn[f++]=null;var _=gn[f];gn[f++]=null;var N=gn[f];gn[f++]=null;var $=gn[f];if(gn[f++]=null,_!==null&&N!==null){var se=_.pending;se===null?N.next=N:(N.next=se.next,se.next=N),_.pending=N}$!==0&&Na(g,N,$)}}function aa(c,f,g,_){gn[Nn++]=c,gn[Nn++]=f,gn[Nn++]=g,gn[Nn++]=_,qa|=_,c.lanes|=_,c=c.alternate,c!==null&&(c.lanes|=_)}function ua(c,f,g,_){return aa(c,f,g,_),fs(c)}function $s(c,f){return aa(c,null,null,f),fs(c)}function Na(c,f,g){c.lanes|=g;var _=c.alternate;_!==null&&(_.lanes|=g);for(var N=!1,$=c.return;$!==null;)$.childLanes|=g,_=$.alternate,_!==null&&(_.childLanes|=g),$.tag===22&&(c=$.stateNode,c===null||c._visibility&1||(N=!0)),c=$,$=$.return;return c.tag===3?($=c.stateNode,N&&f!==null&&(N=31-Zt(g),c=$.hiddenUpdates,_=c[N],_===null?c[N]=[f]:_.push(f),f.lane=g|536870912),$):null}function fs(c){if(50<vm)throw vm=0,$_=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var Eo={};function Qz(c,f,g,_){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(c,f,g,_){return new Qz(c,f,g,_)}function D1(c){return c=c.prototype,!(!c||!c.isReactComponent)}function wl(c,f){var g=c.alternate;return g===null?(g=qi(c.tag,f,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=f,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&65011712,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,f=c.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g.refCleanup=c.refCleanup,g}function MA(c,f){c.flags&=65011714;var g=c.alternate;return g===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=g.childLanes,c.lanes=g.lanes,c.child=g.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=g.memoizedProps,c.memoizedState=g.memoizedState,c.updateQueue=g.updateQueue,c.type=g.type,f=g.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function by(c,f,g,_,N,$){var se=0;if(_=c,typeof c=="function")D1(c)&&(se=1);else if(typeof c=="string")se=tU(c,g,me.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case L:return c=qi(31,g,f,N),c.elementType=L,c.lanes=$,c;case v:return Yu(g.children,N,$,f);case b:se=8,N|=24;break;case w:return c=qi(12,g,f,N|2),c.elementType=w,c.lanes=$,c;case k:return c=qi(13,g,f,N),c.elementType=k,c.lanes=$,c;case I:return c=qi(19,g,f,N),c.elementType=I,c.lanes=$,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case x:case E:se=10;break e;case S:se=9;break e;case C:se=11;break e;case R:se=14;break e;case j:se=16,_=null;break e}se=29,g=Error(r(130,c===null?"null":typeof c,"")),_=null}return f=qi(se,g,f,N),f.elementType=c,f.type=_,f.lanes=$,f}function Yu(c,f,g,_){return c=qi(7,c,_,f),c.lanes=g,c}function M1(c,f,g){return c=qi(6,c,null,f),c.lanes=g,c}function P1(c,f,g){return f=qi(4,c.children!==null?c.children:[],c.key,f),f.lanes=g,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var Rf=[],If=0,vy=null,wy=0,hs=[],ps=0,Xu=null,xl=1,_l="";function Ju(c,f){Rf[If++]=wy,Rf[If++]=vy,vy=c,wy=f}function PA(c,f,g){hs[ps++]=xl,hs[ps++]=_l,hs[ps++]=Xu,Xu=c;var _=xl;c=_l;var N=32-Zt(_)-1;_&=~(1<<N),g+=1;var $=32-Zt(f)+N;if(30<$){var se=N-N%5;$=(_&(1<<se)-1).toString(32),_>>=se,N-=se,xl=1<<32-Zt(f)+N|g<<N|_,_l=$+c}else xl=1<<$|g<<N|_,_l=c}function F1(c){c.return!==null&&(Ju(c,1),PA(c,1,0))}function L1(c){for(;c===vy;)vy=Rf[--If],Rf[If]=null,wy=Rf[--If],Rf[If]=null;for(;c===Xu;)Xu=hs[--ps],hs[ps]=null,_l=hs[--ps],hs[ps]=null,xl=hs[--ps],hs[ps]=null}var gi=null,Qr=null,cr=!1,Qu=null,Co=!1,$1=Error(r(519));function ed(c){var f=Error(r(418,""));throw Xp(pn(f,c)),$1}function FA(c){var f=c.stateNode,g=c.type,_=c.memoizedProps;switch(f[he]=c,f[Ne]=_,g){case"dialog":Yn("cancel",f),Yn("close",f);break;case"iframe":case"object":case"embed":Yn("load",f);break;case"video":case"audio":for(g=0;g<xm.length;g++)Yn(xm[g],f);break;case"source":Yn("error",f);break;case"img":case"image":case"link":Yn("error",f),Yn("load",f);break;case"details":Yn("toggle",f);break;case"input":Yn("invalid",f),jp(f,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),wo(f);break;case"select":Yn("invalid",f);break;case"textarea":Yn("invalid",f),Op(f,_.value,_.defaultValue,_.children),wo(f)}g=_.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||_.suppressHydrationWarning===!0||eI(f.textContent,g)?(_.popover!=null&&(Yn("beforetoggle",f),Yn("toggle",f)),_.onScroll!=null&&Yn("scroll",f),_.onScrollEnd!=null&&Yn("scrollend",f),_.onClick!=null&&(f.onclick=eb),f=!0):f=!1,f||ed(c)}function LA(c){for(gi=c.return;gi;)switch(gi.tag){case 5:case 13:Co=!1;return;case 27:case 3:Co=!0;return;default:gi=gi.return}}function Zp(c){if(c!==gi)return!1;if(!cr)return LA(c),cr=!0,!1;var f=c.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=c.type,g=!(g!=="form"&&g!=="button")||tS(c.type,c.memoizedProps)),g=!g),g&&Qr&&ed(c),LA(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(g=c.data,g==="/$"){if(f===0){Qr=zs(c.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;c=c.nextSibling}Qr=null}}else f===27?(f=Qr,Bc(c.type)?(c=iS,iS=null,Qr=c):Qr=f):Qr=gi?zs(c.stateNode.nextSibling):null;return!0}function Yp(){Qr=gi=null,cr=!1}function $A(){var c=Qu;return c!==null&&(Ri===null?Ri=c:Ri.push.apply(Ri,c),Qu=null),c}function Xp(c){Qu===null?Qu=[c]:Qu.push(c)}var B1=J(null),td=null,Sl=null;function Cc(c,f,g){ie(B1,f._currentValue),f._currentValue=g}function El(c){c._currentValue=B1.current,Q(B1)}function z1(c,f,g){for(;c!==null;){var _=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),c===g)break;c=c.return}}function U1(c,f,g,_){var N=c.child;for(N!==null&&(N.return=c);N!==null;){var $=N.dependencies;if($!==null){var se=N.child;$=$.firstContext;e:for(;$!==null;){var _e=$;$=N;for(var ze=0;ze<f.length;ze++)if(_e.context===f[ze]){$.lanes|=g,_e=$.alternate,_e!==null&&(_e.lanes|=g),z1($.return,g,c),_||(se=null);break e}$=_e.next}}else if(N.tag===18){if(se=N.return,se===null)throw Error(r(341));se.lanes|=g,$=se.alternate,$!==null&&($.lanes|=g),z1(se,g,c),se=null}else se=N.child;if(se!==null)se.return=N;else for(se=N;se!==null;){if(se===c){se=null;break}if(N=se.sibling,N!==null){N.return=se.return,se=N;break}se=se.return}N=se}}function Jp(c,f,g,_){c=null;for(var N=f,$=!1;N!==null;){if(!$){if((N.flags&524288)!==0)$=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var se=N.alternate;if(se===null)throw Error(r(387));if(se=se.memoizedProps,se!==null){var _e=N.type;Qa(N.pendingProps.value,se.value)||(c!==null?c.push(_e):c=[_e])}}else if(N===Ae.current){if(se=N.alternate,se===null)throw Error(r(387));se.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(c!==null?c.push(Tm):c=[Tm])}N=N.return}c!==null&&U1(f,c,g,_),f.flags|=262144}function xy(c){for(c=c.firstContext;c!==null;){if(!Qa(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function nd(c){td=c,Sl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function ei(c){return BA(td,c)}function _y(c,f){return td===null&&nd(c),BA(c,f)}function BA(c,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},Sl===null){if(c===null)throw Error(r(308));Sl=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else Sl=Sl.next=f;return g}var e7=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(g,_){c.push(_)}};this.abort=function(){f.aborted=!0,c.forEach(function(g){return g()})}},t7=e.unstable_scheduleCallback,n7=e.unstable_NormalPriority,ba={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function H1(){return{controller:new e7,data:new Map,refCount:0}}function Qp(c){c.refCount--,c.refCount===0&&t7(n7,function(){c.controller.abort()})}var em=null,q1=0,jf=0,Of=null;function r7(c,f){if(em===null){var g=em=[];q1=0,jf=G_(),Of={status:"pending",value:void 0,then:function(_){g.push(_)}}}return q1++,f.then(zA,zA),f}function zA(){if(--q1===0&&em!==null){Of!==null&&(Of.status="fulfilled");var c=em;em=null,jf=0,Of=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function a7(c,f){var g=[],_={status:"pending",value:null,reason:null,then:function(N){g.push(N)}};return c.then(function(){_.status="fulfilled",_.value=f;for(var N=0;N<g.length;N++)(0,g[N])(f)},function(N){for(_.status="rejected",_.reason=N,N=0;N<g.length;N++)(0,g[N])(void 0)}),_}var UA=ae.S;ae.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&r7(c,f),UA!==null&&UA(c,f)};var rd=J(null);function V1(){var c=rd.current;return c!==null?c:Pr.pooledCache}function Sy(c,f){f===null?ie(rd,rd.current):ie(rd,f.pool)}function HA(){var c=V1();return c===null?null:{parent:ba._currentValue,pool:c}}var tm=Error(r(460)),qA=Error(r(474)),Ey=Error(r(542)),G1={then:function(){}};function VA(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Cy(){}function GA(c,f,g){switch(g=c[g],g===void 0?c.push(f):g!==f&&(f.then(Cy,Cy),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,KA(c),c;default:if(typeof f.status=="string")f.then(Cy,Cy);else{if(c=Pr,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(_){if(f.status==="pending"){var N=f;N.status="fulfilled",N.value=_}},function(_){if(f.status==="pending"){var N=f;N.status="rejected",N.reason=_}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,KA(c),c}throw nm=f,tm}}var nm=null;function WA(){if(nm===null)throw Error(r(459));var c=nm;return nm=null,c}function KA(c){if(c===tm||c===Ey)throw Error(r(483))}var kc=!1;function W1(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function K1(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Tc(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Ac(c,f,g){var _=c.updateQueue;if(_===null)return null;if(_=_.shared,(gr&2)!==0){var N=_.pending;return N===null?f.next=f:(f.next=N.next,N.next=f),_.pending=f,f=fs(c),Na(c,null,g),f}return aa(c,_,f,g),fs(c)}function rm(c,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var _=f.lanes;_&=c.pendingLanes,g|=_,f.lanes=g,Ke(c,g)}}function Z1(c,f){var g=c.updateQueue,_=c.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var N=null,$=null;if(g=g.firstBaseUpdate,g!==null){do{var se={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};$===null?N=$=se:$=$.next=se,g=g.next}while(g!==null);$===null?N=$=f:$=$.next=f}else N=$=f;g={baseState:_.baseState,firstBaseUpdate:N,lastBaseUpdate:$,shared:_.shared,callbacks:_.callbacks},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=f:c.next=f,g.lastBaseUpdate=f}var Y1=!1;function am(){if(Y1){var c=Of;if(c!==null)throw c}}function im(c,f,g,_){Y1=!1;var N=c.updateQueue;kc=!1;var $=N.firstBaseUpdate,se=N.lastBaseUpdate,_e=N.shared.pending;if(_e!==null){N.shared.pending=null;var ze=_e,dt=ze.next;ze.next=null,se===null?$=dt:se.next=dt,se=ze;var Tt=c.alternate;Tt!==null&&(Tt=Tt.updateQueue,_e=Tt.lastBaseUpdate,_e!==se&&(_e===null?Tt.firstBaseUpdate=dt:_e.next=dt,Tt.lastBaseUpdate=ze))}if($!==null){var Ot=N.baseState;se=0,Tt=dt=ze=null,_e=$;do{var mt=_e.lane&-536870913,yt=mt!==_e.lane;if(yt?(nr&mt)===mt:(_&mt)===mt){mt!==0&&mt===jf&&(Y1=!0),Tt!==null&&(Tt=Tt.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var Sn=c,yn=_e;mt=f;var Cr=g;switch(yn.tag){case 1:if(Sn=yn.payload,typeof Sn=="function"){Ot=Sn.call(Cr,Ot,mt);break e}Ot=Sn;break e;case 3:Sn.flags=Sn.flags&-65537|128;case 0:if(Sn=yn.payload,mt=typeof Sn=="function"?Sn.call(Cr,Ot,mt):Sn,mt==null)break e;Ot=d({},Ot,mt);break e;case 2:kc=!0}}mt=_e.callback,mt!==null&&(c.flags|=64,yt&&(c.flags|=8192),yt=N.callbacks,yt===null?N.callbacks=[mt]:yt.push(mt))}else yt={lane:mt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},Tt===null?(dt=Tt=yt,ze=Ot):Tt=Tt.next=yt,se|=mt;if(_e=_e.next,_e===null){if(_e=N.shared.pending,_e===null)break;yt=_e,_e=yt.next,yt.next=null,N.lastBaseUpdate=yt,N.shared.pending=null}}while(!0);Tt===null&&(ze=Ot),N.baseState=ze,N.firstBaseUpdate=dt,N.lastBaseUpdate=Tt,$===null&&(N.shared.lanes=0),Pc|=se,c.lanes=se,c.memoizedState=Ot}}function ZA(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function YA(c,f){var g=c.callbacks;if(g!==null)for(c.callbacks=null,c=0;c<g.length;c++)ZA(g[c],f)}var Df=J(null),ky=J(0);function XA(c,f){c=Il,ie(ky,c),ie(Df,f),Il=c|f.baseLanes}function X1(){ie(ky,Il),ie(Df,Df.current)}function J1(){Il=ky.current,Q(Df),Q(ky)}var Nc=0,zn=null,Sr=null,da=null,Ty=!1,Mf=!1,ad=!1,Ay=0,sm=0,Pf=null,i7=0;function ia(){throw Error(r(321))}function Q1(c,f){if(f===null)return!1;for(var g=0;g<f.length&&g<c.length;g++)if(!Qa(c[g],f[g]))return!1;return!0}function e_(c,f,g,_,N,$){return Nc=$,zn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ae.H=c===null||c.memoizedState===null?DN:MN,ad=!1,$=g(_,N),ad=!1,Mf&&($=QA(f,g,_,N)),JA(c),$}function JA(c){ae.H=Dy;var f=Sr!==null&&Sr.next!==null;if(Nc=0,da=Sr=zn=null,Ty=!1,sm=0,Pf=null,f)throw Error(r(300));c===null||Ra||(c=c.dependencies,c!==null&&xy(c)&&(Ra=!0))}function QA(c,f,g,_){zn=c;var N=0;do{if(Mf&&(Pf=null),sm=0,Mf=!1,25<=N)throw Error(r(301));if(N+=1,da=Sr=null,c.updateQueue!=null){var $=c.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}ae.H=f7,$=f(g,_)}while(Mf);return $}function s7(){var c=ae.H,f=c.useState()[0];return f=typeof f.then=="function"?om(f):f,c=c.useState()[0],(Sr!==null?Sr.memoizedState:null)!==c&&(zn.flags|=1024),f}function t_(){var c=Ay!==0;return Ay=0,c}function n_(c,f,g){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~g}function r_(c){if(Ty){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Ty=!1}Nc=0,da=Sr=zn=null,Mf=!1,sm=Ay=0,Pf=null}function Ai(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return da===null?zn.memoizedState=da=c:da=da.next=c,da}function fa(){if(Sr===null){var c=zn.alternate;c=c!==null?c.memoizedState:null}else c=Sr.next;var f=da===null?zn.memoizedState:da.next;if(f!==null)da=f,Sr=c;else{if(c===null)throw zn.alternate===null?Error(r(467)):Error(r(310));Sr=c,c={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},da===null?zn.memoizedState=da=c:da=da.next=c}return da}function a_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function om(c){var f=sm;return sm+=1,Pf===null&&(Pf=[]),c=GA(Pf,c,f),f=zn,(da===null?f.memoizedState:da.next)===null&&(f=f.alternate,ae.H=f===null||f.memoizedState===null?DN:MN),c}function Ny(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return om(c);if(c.$$typeof===E)return ei(c)}throw Error(r(438,String(c)))}function i_(c){var f=null,g=zn.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var _=zn.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(f={data:_.data.map(function(N){return N.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=a_(),zn.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(c),_=0;_<c;_++)g[_]=B;return f.index++,g}function Cl(c,f){return typeof f=="function"?f(c):f}function Ry(c){var f=fa();return s_(f,Sr,c)}function s_(c,f,g){var _=c.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=g;var N=c.baseQueue,$=_.pending;if($!==null){if(N!==null){var se=N.next;N.next=$.next,$.next=se}f.baseQueue=N=$,_.pending=null}if($=c.baseState,N===null)c.memoizedState=$;else{f=N.next;var _e=se=null,ze=null,dt=f,Tt=!1;do{var Ot=dt.lane&-536870913;if(Ot!==dt.lane?(nr&Ot)===Ot:(Nc&Ot)===Ot){var mt=dt.revertLane;if(mt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Ot===jf&&(Tt=!0);else if((Nc&mt)===mt){dt=dt.next,mt===jf&&(Tt=!0);continue}else Ot={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(_e=ze=Ot,se=$):ze=ze.next=Ot,zn.lanes|=mt,Pc|=mt;Ot=dt.action,ad&&g($,Ot),$=dt.hasEagerState?dt.eagerState:g($,Ot)}else mt={lane:Ot,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(_e=ze=mt,se=$):ze=ze.next=mt,zn.lanes|=Ot,Pc|=Ot;dt=dt.next}while(dt!==null&&dt!==f);if(ze===null?se=$:ze.next=_e,!Qa($,c.memoizedState)&&(Ra=!0,Tt&&(g=Of,g!==null)))throw g;c.memoizedState=$,c.baseState=se,c.baseQueue=ze,_.lastRenderedState=$}return N===null&&(_.lanes=0),[c.memoizedState,_.dispatch]}function o_(c){var f=fa(),g=f.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var _=g.dispatch,N=g.pending,$=f.memoizedState;if(N!==null){g.pending=null;var se=N=N.next;do $=c($,se.action),se=se.next;while(se!==N);Qa($,f.memoizedState)||(Ra=!0),f.memoizedState=$,f.baseQueue===null&&(f.baseState=$),g.lastRenderedState=$}return[$,_]}function eN(c,f,g){var _=zn,N=fa(),$=cr;if($){if(g===void 0)throw Error(r(407));g=g()}else g=f();var se=!Qa((Sr||N).memoizedState,g);se&&(N.memoizedState=g,Ra=!0),N=N.queue;var _e=rN.bind(null,_,N,c);if(lm(2048,8,_e,[c]),N.getSnapshot!==f||se||da!==null&&da.memoizedState.tag&1){if(_.flags|=2048,Ff(9,Iy(),nN.bind(null,_,N,g,f),null),Pr===null)throw Error(r(349));$||(Nc&124)!==0||tN(_,f,g)}return g}function tN(c,f,g){c.flags|=16384,c={getSnapshot:f,value:g},f=zn.updateQueue,f===null?(f=a_(),zn.updateQueue=f,f.stores=[c]):(g=f.stores,g===null?f.stores=[c]:g.push(c))}function nN(c,f,g,_){f.value=g,f.getSnapshot=_,aN(f)&&iN(c)}function rN(c,f,g){return g(function(){aN(f)&&iN(c)})}function aN(c){var f=c.getSnapshot;c=c.value;try{var g=f();return!Qa(c,g)}catch{return!0}}function iN(c){var f=$s(c,2);f!==null&&Zi(f,c,2)}function l_(c){var f=Ai();if(typeof c=="function"){var g=c;if(c=g(),ad){Pt(!0);try{g()}finally{Pt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:c},f}function sN(c,f,g,_){return c.baseState=g,s_(c,Sr,typeof _=="function"?_:Cl)}function o7(c,f,g,_,N){if(Oy(c))throw Error(r(485));if(c=f.action,c!==null){var $={payload:N,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(se){$.listeners.push(se)}};ae.T!==null?g(!0):$.isTransition=!1,_($),g=f.pending,g===null?($.next=f.pending=$,oN(f,$)):($.next=g.next,f.pending=g.next=$)}}function oN(c,f){var g=f.action,_=f.payload,N=c.state;if(f.isTransition){var $=ae.T,se={};ae.T=se;try{var _e=g(N,_),ze=ae.S;ze!==null&&ze(se,_e),lN(c,f,_e)}catch(dt){c_(c,f,dt)}finally{ae.T=$}}else try{$=g(N,_),lN(c,f,$)}catch(dt){c_(c,f,dt)}}function lN(c,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(_){cN(c,f,_)},function(_){return c_(c,f,_)}):cN(c,f,g)}function cN(c,f,g){f.status="fulfilled",f.value=g,uN(f),c.state=g,f=c.pending,f!==null&&(g=f.next,g===f?c.pending=null:(g=g.next,f.next=g,oN(c,g)))}function c_(c,f,g){var _=c.pending;if(c.pending=null,_!==null){_=_.next;do f.status="rejected",f.reason=g,uN(f),f=f.next;while(f!==_)}c.action=null}function uN(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function dN(c,f){return f}function fN(c,f){if(cr){var g=Pr.formState;if(g!==null){e:{var _=zn;if(cr){if(Qr){t:{for(var N=Qr,$=Co;N.nodeType!==8;){if(!$){N=null;break t}if(N=zs(N.nextSibling),N===null){N=null;break t}}$=N.data,N=$==="F!"||$==="F"?N:null}if(N){Qr=zs(N.nextSibling),_=N.data==="F!";break e}}ed(_)}_=!1}_&&(f=g[0])}}return g=Ai(),g.memoizedState=g.baseState=f,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dN,lastRenderedState:f},g.queue=_,g=IN.bind(null,zn,_),_.dispatch=g,_=l_(!1),$=p_.bind(null,zn,!1,_.queue),_=Ai(),N={state:f,dispatch:null,action:c,pending:null},_.queue=N,g=o7.bind(null,zn,N,$,g),N.dispatch=g,_.memoizedState=c,[f,g,!1]}function hN(c){var f=fa();return pN(f,Sr,c)}function pN(c,f,g){if(f=s_(c,f,dN)[0],c=Ry(Cl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var _=om(f)}catch(se){throw se===tm?Ey:se}else _=f;f=fa();var N=f.queue,$=N.dispatch;return g!==f.memoizedState&&(zn.flags|=2048,Ff(9,Iy(),l7.bind(null,N,g),null)),[_,$,c]}function l7(c,f){c.action=f}function mN(c){var f=fa(),g=Sr;if(g!==null)return pN(f,g,c);fa(),f=f.memoizedState,g=fa();var _=g.queue.dispatch;return g.memoizedState=c,[f,_,!1]}function Ff(c,f,g,_){return c={tag:c,create:g,deps:_,inst:f,next:null},f=zn.updateQueue,f===null&&(f=a_(),zn.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=c.next=c:(_=g.next,g.next=c,c.next=_,f.lastEffect=c),c}function Iy(){return{destroy:void 0,resource:void 0}}function gN(){return fa().memoizedState}function jy(c,f,g,_){var N=Ai();_=_===void 0?null:_,zn.flags|=c,N.memoizedState=Ff(1|f,Iy(),g,_)}function lm(c,f,g,_){var N=fa();_=_===void 0?null:_;var $=N.memoizedState.inst;Sr!==null&&_!==null&&Q1(_,Sr.memoizedState.deps)?N.memoizedState=Ff(f,$,g,_):(zn.flags|=c,N.memoizedState=Ff(1|f,$,g,_))}function yN(c,f){jy(8390656,8,c,f)}function bN(c,f){lm(2048,8,c,f)}function vN(c,f){return lm(4,2,c,f)}function wN(c,f){return lm(4,4,c,f)}function xN(c,f){if(typeof f=="function"){c=c();var g=f(c);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function _N(c,f,g){g=g!=null?g.concat([c]):null,lm(4,4,xN.bind(null,f,c),g)}function u_(){}function SN(c,f){var g=fa();f=f===void 0?null:f;var _=g.memoizedState;return f!==null&&Q1(f,_[1])?_[0]:(g.memoizedState=[c,f],c)}function EN(c,f){var g=fa();f=f===void 0?null:f;var _=g.memoizedState;if(f!==null&&Q1(f,_[1]))return _[0];if(_=c(),ad){Pt(!0);try{c()}finally{Pt(!1)}}return g.memoizedState=[_,f],_}function d_(c,f,g){return g===void 0||(Nc&1073741824)!==0?c.memoizedState=f:(c.memoizedState=g,c=TR(),zn.lanes|=c,Pc|=c,g)}function CN(c,f,g,_){return Qa(g,f)?g:Df.current!==null?(c=d_(c,g,_),Qa(c,f)||(Ra=!0),c):(Nc&42)===0?(Ra=!0,c.memoizedState=g):(c=TR(),zn.lanes|=c,Pc|=c,f)}function kN(c,f,g,_,N){var $=te.p;te.p=$!==0&&8>$?$:8;var se=ae.T,_e={};ae.T=_e,p_(c,!1,f,g);try{var ze=N(),dt=ae.S;if(dt!==null&&dt(_e,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var Tt=a7(ze,_);cm(c,f,Tt,Ki(c))}else cm(c,f,_,Ki(c))}catch(Ot){cm(c,f,{then:function(){},status:"rejected",reason:Ot},Ki())}finally{te.p=$,ae.T=se}}function c7(){}function f_(c,f,g,_){if(c.tag!==5)throw Error(r(476));var N=TN(c).queue;kN(c,N,f,X,g===null?c7:function(){return AN(c),g(_)})}function TN(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:X},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:g},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function AN(c){var f=TN(c).next.queue;cm(c,f,{},Ki())}function h_(){return ei(Tm)}function NN(){return fa().memoizedState}function RN(){return fa().memoizedState}function u7(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var g=Ki();c=Tc(g);var _=Ac(f,c,g);_!==null&&(Zi(_,f,g),rm(_,f,g)),f={cache:H1()},c.payload=f;return}f=f.return}}function d7(c,f,g){var _=Ki();g={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},Oy(c)?jN(f,g):(g=ua(c,f,g,_),g!==null&&(Zi(g,c,_),ON(g,f,_)))}function IN(c,f,g){var _=Ki();cm(c,f,g,_)}function cm(c,f,g,_){var N={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(Oy(c))jN(f,N);else{var $=c.alternate;if(c.lanes===0&&($===null||$.lanes===0)&&($=f.lastRenderedReducer,$!==null))try{var se=f.lastRenderedState,_e=$(se,g);if(N.hasEagerState=!0,N.eagerState=_e,Qa(_e,se))return aa(c,f,N,0),Pr===null&&_n(),!1}catch{}finally{}if(g=ua(c,f,N,_),g!==null)return Zi(g,c,_),ON(g,f,_),!0}return!1}function p_(c,f,g,_){if(_={lane:2,revertLane:G_(),action:_,hasEagerState:!1,eagerState:null,next:null},Oy(c)){if(f)throw Error(r(479))}else f=ua(c,g,_,2),f!==null&&Zi(f,c,2)}function Oy(c){var f=c.alternate;return c===zn||f!==null&&f===zn}function jN(c,f){Mf=Ty=!0;var g=c.pending;g===null?f.next=f:(f.next=g.next,g.next=f),c.pending=f}function ON(c,f,g){if((g&4194048)!==0){var _=f.lanes;_&=c.pendingLanes,g|=_,f.lanes=g,Ke(c,g)}}var Dy={readContext:ei,use:Ny,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useInsertionEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useSyncExternalStore:ia,useId:ia,useHostTransitionStatus:ia,useFormState:ia,useActionState:ia,useOptimistic:ia,useMemoCache:ia,useCacheRefresh:ia},DN={readContext:ei,use:Ny,useCallback:function(c,f){return Ai().memoizedState=[c,f===void 0?null:f],c},useContext:ei,useEffect:yN,useImperativeHandle:function(c,f,g){g=g!=null?g.concat([c]):null,jy(4194308,4,xN.bind(null,f,c),g)},useLayoutEffect:function(c,f){return jy(4194308,4,c,f)},useInsertionEffect:function(c,f){jy(4,2,c,f)},useMemo:function(c,f){var g=Ai();f=f===void 0?null:f;var _=c();if(ad){Pt(!0);try{c()}finally{Pt(!1)}}return g.memoizedState=[_,f],_},useReducer:function(c,f,g){var _=Ai();if(g!==void 0){var N=g(f);if(ad){Pt(!0);try{g(f)}finally{Pt(!1)}}}else N=f;return _.memoizedState=_.baseState=N,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:N},_.queue=c,c=c.dispatch=d7.bind(null,zn,c),[_.memoizedState,c]},useRef:function(c){var f=Ai();return c={current:c},f.memoizedState=c},useState:function(c){c=l_(c);var f=c.queue,g=IN.bind(null,zn,f);return f.dispatch=g,[c.memoizedState,g]},useDebugValue:u_,useDeferredValue:function(c,f){var g=Ai();return d_(g,c,f)},useTransition:function(){var c=l_(!1);return c=kN.bind(null,zn,c.queue,!0,!1),Ai().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,g){var _=zn,N=Ai();if(cr){if(g===void 0)throw Error(r(407));g=g()}else{if(g=f(),Pr===null)throw Error(r(349));(nr&124)!==0||tN(_,f,g)}N.memoizedState=g;var $={value:g,getSnapshot:f};return N.queue=$,yN(rN.bind(null,_,$,c),[c]),_.flags|=2048,Ff(9,Iy(),nN.bind(null,_,$,g,f),null),g},useId:function(){var c=Ai(),f=Pr.identifierPrefix;if(cr){var g=_l,_=xl;g=(_&~(1<<32-Zt(_)-1)).toString(32)+g,f=""+f+"R"+g,g=Ay++,0<g&&(f+="H"+g.toString(32)),f+=""}else g=i7++,f=""+f+"r"+g.toString(32)+"";return c.memoizedState=f},useHostTransitionStatus:h_,useFormState:fN,useActionState:fN,useOptimistic:function(c){var f=Ai();f.memoizedState=f.baseState=c;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=p_.bind(null,zn,!0,g),g.dispatch=f,[c,f]},useMemoCache:i_,useCacheRefresh:function(){return Ai().memoizedState=u7.bind(null,zn)}},MN={readContext:ei,use:Ny,useCallback:SN,useContext:ei,useEffect:bN,useImperativeHandle:_N,useInsertionEffect:vN,useLayoutEffect:wN,useMemo:EN,useReducer:Ry,useRef:gN,useState:function(){return Ry(Cl)},useDebugValue:u_,useDeferredValue:function(c,f){var g=fa();return CN(g,Sr.memoizedState,c,f)},useTransition:function(){var c=Ry(Cl)[0],f=fa().memoizedState;return[typeof c=="boolean"?c:om(c),f]},useSyncExternalStore:eN,useId:NN,useHostTransitionStatus:h_,useFormState:hN,useActionState:hN,useOptimistic:function(c,f){var g=fa();return sN(g,Sr,c,f)},useMemoCache:i_,useCacheRefresh:RN},f7={readContext:ei,use:Ny,useCallback:SN,useContext:ei,useEffect:bN,useImperativeHandle:_N,useInsertionEffect:vN,useLayoutEffect:wN,useMemo:EN,useReducer:o_,useRef:gN,useState:function(){return o_(Cl)},useDebugValue:u_,useDeferredValue:function(c,f){var g=fa();return Sr===null?d_(g,c,f):CN(g,Sr.memoizedState,c,f)},useTransition:function(){var c=o_(Cl)[0],f=fa().memoizedState;return[typeof c=="boolean"?c:om(c),f]},useSyncExternalStore:eN,useId:NN,useHostTransitionStatus:h_,useFormState:mN,useActionState:mN,useOptimistic:function(c,f){var g=fa();return Sr!==null?sN(g,Sr,c,f):(g.baseState=c,[c,g.queue.dispatch])},useMemoCache:i_,useCacheRefresh:RN},Lf=null,um=0;function My(c){var f=um;return um+=1,Lf===null&&(Lf=[]),GA(Lf,c,f)}function dm(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Py(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function PN(c){var f=c._init;return f(c._payload)}function FN(c){function f(at,Ze){if(c){var ct=at.deletions;ct===null?(at.deletions=[Ze],at.flags|=16):ct.push(Ze)}}function g(at,Ze){if(!c)return null;for(;Ze!==null;)f(at,Ze),Ze=Ze.sibling;return null}function _(at){for(var Ze=new Map;at!==null;)at.key!==null?Ze.set(at.key,at):Ze.set(at.index,at),at=at.sibling;return Ze}function N(at,Ze){return at=wl(at,Ze),at.index=0,at.sibling=null,at}function $(at,Ze,ct){return at.index=ct,c?(ct=at.alternate,ct!==null?(ct=ct.index,ct<Ze?(at.flags|=67108866,Ze):ct):(at.flags|=67108866,Ze)):(at.flags|=1048576,Ze)}function se(at){return c&&at.alternate===null&&(at.flags|=67108866),at}function _e(at,Ze,ct,It){return Ze===null||Ze.tag!==6?(Ze=M1(ct,at.mode,It),Ze.return=at,Ze):(Ze=N(Ze,ct),Ze.return=at,Ze)}function ze(at,Ze,ct,It){var sn=ct.type;return sn===v?Tt(at,Ze,ct.props.children,It,ct.key):Ze!==null&&(Ze.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===j&&PN(sn)===Ze.type)?(Ze=N(Ze,ct.props),dm(Ze,ct),Ze.return=at,Ze):(Ze=by(ct.type,ct.key,ct.props,null,at.mode,It),dm(Ze,ct),Ze.return=at,Ze)}function dt(at,Ze,ct,It){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==ct.containerInfo||Ze.stateNode.implementation!==ct.implementation?(Ze=P1(ct,at.mode,It),Ze.return=at,Ze):(Ze=N(Ze,ct.children||[]),Ze.return=at,Ze)}function Tt(at,Ze,ct,It,sn){return Ze===null||Ze.tag!==7?(Ze=Yu(ct,at.mode,It,sn),Ze.return=at,Ze):(Ze=N(Ze,ct),Ze.return=at,Ze)}function Ot(at,Ze,ct){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=M1(""+Ze,at.mode,ct),Ze.return=at,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case p:return ct=by(Ze.type,Ze.key,Ze.props,null,at.mode,ct),dm(ct,Ze),ct.return=at,ct;case y:return Ze=P1(Ze,at.mode,ct),Ze.return=at,Ze;case j:var It=Ze._init;return Ze=It(Ze._payload),Ot(at,Ze,ct)}if(de(Ze)||P(Ze))return Ze=Yu(Ze,at.mode,ct,null),Ze.return=at,Ze;if(typeof Ze.then=="function")return Ot(at,My(Ze),ct);if(Ze.$$typeof===E)return Ot(at,_y(at,Ze),ct);Py(at,Ze)}return null}function mt(at,Ze,ct,It){var sn=Ze!==null?Ze.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return sn!==null?null:_e(at,Ze,""+ct,It);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case p:return ct.key===sn?ze(at,Ze,ct,It):null;case y:return ct.key===sn?dt(at,Ze,ct,It):null;case j:return sn=ct._init,ct=sn(ct._payload),mt(at,Ze,ct,It)}if(de(ct)||P(ct))return sn!==null?null:Tt(at,Ze,ct,It,null);if(typeof ct.then=="function")return mt(at,Ze,My(ct),It);if(ct.$$typeof===E)return mt(at,Ze,_y(at,ct),It);Py(at,ct)}return null}function yt(at,Ze,ct,It,sn){if(typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint")return at=at.get(ct)||null,_e(Ze,at,""+It,sn);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case p:return at=at.get(It.key===null?ct:It.key)||null,ze(Ze,at,It,sn);case y:return at=at.get(It.key===null?ct:It.key)||null,dt(Ze,at,It,sn);case j:var Hn=It._init;return It=Hn(It._payload),yt(at,Ze,ct,It,sn)}if(de(It)||P(It))return at=at.get(ct)||null,Tt(Ze,at,It,sn,null);if(typeof It.then=="function")return yt(at,Ze,ct,My(It),sn);if(It.$$typeof===E)return yt(at,Ze,ct,_y(Ze,It),sn);Py(Ze,It)}return null}function Sn(at,Ze,ct,It){for(var sn=null,Hn=null,fn=Ze,wn=Ze=0,ja=null;fn!==null&&wn<ct.length;wn++){fn.index>wn?(ja=fn,fn=null):ja=fn.sibling;var or=mt(at,fn,ct[wn],It);if(or===null){fn===null&&(fn=ja);break}c&&fn&&or.alternate===null&&f(at,fn),Ze=$(or,Ze,wn),Hn===null?sn=or:Hn.sibling=or,Hn=or,fn=ja}if(wn===ct.length)return g(at,fn),cr&&Ju(at,wn),sn;if(fn===null){for(;wn<ct.length;wn++)fn=Ot(at,ct[wn],It),fn!==null&&(Ze=$(fn,Ze,wn),Hn===null?sn=fn:Hn.sibling=fn,Hn=fn);return cr&&Ju(at,wn),sn}for(fn=_(fn);wn<ct.length;wn++)ja=yt(fn,at,wn,ct[wn],It),ja!==null&&(c&&ja.alternate!==null&&fn.delete(ja.key===null?wn:ja.key),Ze=$(ja,Ze,wn),Hn===null?sn=ja:Hn.sibling=ja,Hn=ja);return c&&fn.forEach(function(Vc){return f(at,Vc)}),cr&&Ju(at,wn),sn}function yn(at,Ze,ct,It){if(ct==null)throw Error(r(151));for(var sn=null,Hn=null,fn=Ze,wn=Ze=0,ja=null,or=ct.next();fn!==null&&!or.done;wn++,or=ct.next()){fn.index>wn?(ja=fn,fn=null):ja=fn.sibling;var Vc=mt(at,fn,or.value,It);if(Vc===null){fn===null&&(fn=ja);break}c&&fn&&Vc.alternate===null&&f(at,fn),Ze=$(Vc,Ze,wn),Hn===null?sn=Vc:Hn.sibling=Vc,Hn=Vc,fn=ja}if(or.done)return g(at,fn),cr&&Ju(at,wn),sn;if(fn===null){for(;!or.done;wn++,or=ct.next())or=Ot(at,or.value,It),or!==null&&(Ze=$(or,Ze,wn),Hn===null?sn=or:Hn.sibling=or,Hn=or);return cr&&Ju(at,wn),sn}for(fn=_(fn);!or.done;wn++,or=ct.next())or=yt(fn,at,wn,or.value,It),or!==null&&(c&&or.alternate!==null&&fn.delete(or.key===null?wn:or.key),Ze=$(or,Ze,wn),Hn===null?sn=or:Hn.sibling=or,Hn=or);return c&&fn.forEach(function(hU){return f(at,hU)}),cr&&Ju(at,wn),sn}function Cr(at,Ze,ct,It){if(typeof ct=="object"&&ct!==null&&ct.type===v&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case p:e:{for(var sn=ct.key;Ze!==null;){if(Ze.key===sn){if(sn=ct.type,sn===v){if(Ze.tag===7){g(at,Ze.sibling),It=N(Ze,ct.props.children),It.return=at,at=It;break e}}else if(Ze.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===j&&PN(sn)===Ze.type){g(at,Ze.sibling),It=N(Ze,ct.props),dm(It,ct),It.return=at,at=It;break e}g(at,Ze);break}else f(at,Ze);Ze=Ze.sibling}ct.type===v?(It=Yu(ct.props.children,at.mode,It,ct.key),It.return=at,at=It):(It=by(ct.type,ct.key,ct.props,null,at.mode,It),dm(It,ct),It.return=at,at=It)}return se(at);case y:e:{for(sn=ct.key;Ze!==null;){if(Ze.key===sn)if(Ze.tag===4&&Ze.stateNode.containerInfo===ct.containerInfo&&Ze.stateNode.implementation===ct.implementation){g(at,Ze.sibling),It=N(Ze,ct.children||[]),It.return=at,at=It;break e}else{g(at,Ze);break}else f(at,Ze);Ze=Ze.sibling}It=P1(ct,at.mode,It),It.return=at,at=It}return se(at);case j:return sn=ct._init,ct=sn(ct._payload),Cr(at,Ze,ct,It)}if(de(ct))return Sn(at,Ze,ct,It);if(P(ct)){if(sn=P(ct),typeof sn!="function")throw Error(r(150));return ct=sn.call(ct),yn(at,Ze,ct,It)}if(typeof ct.then=="function")return Cr(at,Ze,My(ct),It);if(ct.$$typeof===E)return Cr(at,Ze,_y(at,ct),It);Py(at,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ze!==null&&Ze.tag===6?(g(at,Ze.sibling),It=N(Ze,ct),It.return=at,at=It):(g(at,Ze),It=M1(ct,at.mode,It),It.return=at,at=It),se(at)):g(at,Ze)}return function(at,Ze,ct,It){try{um=0;var sn=Cr(at,Ze,ct,It);return Lf=null,sn}catch(fn){if(fn===tm||fn===Ey)throw fn;var Hn=qi(29,fn,null,at.mode);return Hn.lanes=It,Hn.return=at,Hn}finally{}}}var $f=FN(!0),LN=FN(!1),ms=J(null),ko=null;function Rc(c){var f=c.alternate;ie(va,va.current&1),ie(ms,c),ko===null&&(f===null||Df.current!==null||f.memoizedState!==null)&&(ko=c)}function $N(c){if(c.tag===22){if(ie(va,va.current),ie(ms,c),ko===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(ko=c)}}else Ic()}function Ic(){ie(va,va.current),ie(ms,ms.current)}function kl(c){Q(ms),ko===c&&(ko=null),Q(va)}var va=J(0);function Fy(c){for(var f=c;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||aS(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function m_(c,f,g,_){f=c.memoizedState,g=g(_,f),g=g==null?f:d({},f,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var g_={enqueueSetState:function(c,f,g){c=c._reactInternals;var _=Ki(),N=Tc(_);N.payload=f,g!=null&&(N.callback=g),f=Ac(c,N,_),f!==null&&(Zi(f,c,_),rm(f,c,_))},enqueueReplaceState:function(c,f,g){c=c._reactInternals;var _=Ki(),N=Tc(_);N.tag=1,N.payload=f,g!=null&&(N.callback=g),f=Ac(c,N,_),f!==null&&(Zi(f,c,_),rm(f,c,_))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var g=Ki(),_=Tc(g);_.tag=2,f!=null&&(_.callback=f),f=Ac(c,_,g),f!==null&&(Zi(f,c,g),rm(f,c,g))}};function BN(c,f,g,_,N,$,se){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(_,$,se):f.prototype&&f.prototype.isPureReactComponent?!A(g,_)||!A(N,$):!0}function zN(c,f,g,_){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,_),f.state!==c&&g_.enqueueReplaceState(f,f.state,null)}function id(c,f){var g=f;if("ref"in f){g={};for(var _ in f)_!=="ref"&&(g[_]=f[_])}if(c=c.defaultProps){g===f&&(g=d({},g));for(var N in c)g[N]===void 0&&(g[N]=c[N])}return g}var Ly=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof ta=="object"&&typeof ta.emit=="function"){ta.emit("uncaughtException",c);return}console.error(c)};function UN(c){Ly(c)}function HN(c){console.error(c)}function qN(c){Ly(c)}function $y(c,f){try{var g=c.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(_){setTimeout(function(){throw _})}}function VN(c,f,g){try{var _=c.onCaughtError;_(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function y_(c,f,g){return g=Tc(g),g.tag=3,g.payload={element:null},g.callback=function(){$y(c,f)},g}function GN(c){return c=Tc(c),c.tag=3,c}function WN(c,f,g,_){var N=g.type.getDerivedStateFromError;if(typeof N=="function"){var $=_.value;c.payload=function(){return N($)},c.callback=function(){VN(f,g,_)}}var se=g.stateNode;se!==null&&typeof se.componentDidCatch=="function"&&(c.callback=function(){VN(f,g,_),typeof N!="function"&&(Fc===null?Fc=new Set([this]):Fc.add(this));var _e=_.stack;this.componentDidCatch(_.value,{componentStack:_e!==null?_e:""})})}function h7(c,f,g,_,N){if(g.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(f=g.alternate,f!==null&&Jp(f,g,N,!0),g=ms.current,g!==null){switch(g.tag){case 13:return ko===null?z_():g.alternate===null&&ea===0&&(ea=3),g.flags&=-257,g.flags|=65536,g.lanes=N,_===G1?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([_]):f.add(_),H_(c,_,N)),!1;case 22:return g.flags|=65536,_===G1?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([_])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([_]):g.add(_)),H_(c,_,N)),!1}throw Error(r(435,g.tag))}return H_(c,_,N),z_(),!1}if(cr)return f=ms.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=N,_!==$1&&(c=Error(r(422),{cause:_}),Xp(pn(c,g)))):(_!==$1&&(f=Error(r(423),{cause:_}),Xp(pn(f,g))),c=c.current.alternate,c.flags|=65536,N&=-N,c.lanes|=N,_=pn(_,g),N=y_(c.stateNode,_,N),Z1(c,N),ea!==4&&(ea=2)),!1;var $=Error(r(520),{cause:_});if($=pn($,g),bm===null?bm=[$]:bm.push($),ea!==4&&(ea=2),f===null)return!0;_=pn(_,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,c=N&-N,g.lanes|=c,c=y_(g.stateNode,_,c),Z1(g,c),!1;case 1:if(f=g.type,$=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Fc===null||!Fc.has($))))return g.flags|=65536,N&=-N,g.lanes|=N,N=GN(N),WN(N,c,g,_),Z1(g,N),!1}g=g.return}while(g!==null);return!1}var KN=Error(r(461)),Ra=!1;function Va(c,f,g,_){f.child=c===null?LN(f,null,g,_):$f(f,c.child,g,_)}function ZN(c,f,g,_,N){g=g.render;var $=f.ref;if("ref"in _){var se={};for(var _e in _)_e!=="ref"&&(se[_e]=_[_e])}else se=_;return nd(f),_=e_(c,f,g,se,$,N),_e=t_(),c!==null&&!Ra?(n_(c,f,N),Tl(c,f,N)):(cr&&_e&&F1(f),f.flags|=1,Va(c,f,_,N),f.child)}function YN(c,f,g,_,N){if(c===null){var $=g.type;return typeof $=="function"&&!D1($)&&$.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=$,XN(c,f,$,_,N)):(c=by(g.type,null,_,f,f.mode,N),c.ref=f.ref,c.return=f,f.child=c)}if($=c.child,!C_(c,N)){var se=$.memoizedProps;if(g=g.compare,g=g!==null?g:A,g(se,_)&&c.ref===f.ref)return Tl(c,f,N)}return f.flags|=1,c=wl($,_),c.ref=f.ref,c.return=f,f.child=c}function XN(c,f,g,_,N){if(c!==null){var $=c.memoizedProps;if(A($,_)&&c.ref===f.ref)if(Ra=!1,f.pendingProps=_=$,C_(c,N))(c.flags&131072)!==0&&(Ra=!0);else return f.lanes=c.lanes,Tl(c,f,N)}return b_(c,f,g,_,N)}function JN(c,f,g){var _=f.pendingProps,N=_.children,$=c!==null?c.memoizedState:null;if(_.mode==="hidden"){if((f.flags&128)!==0){if(_=$!==null?$.baseLanes|g:g,c!==null){for(N=f.child=c.child,$=0;N!==null;)$=$|N.lanes|N.childLanes,N=N.sibling;f.childLanes=$&~_}else f.childLanes=0,f.child=null;return QN(c,f,_,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Sy(f,$!==null?$.cachePool:null),$!==null?XA(f,$):X1(),$N(f);else return f.lanes=f.childLanes=536870912,QN(c,f,$!==null?$.baseLanes|g:g,g)}else $!==null?(Sy(f,$.cachePool),XA(f,$),Ic(),f.memoizedState=null):(c!==null&&Sy(f,null),X1(),Ic());return Va(c,f,N,g),f.child}function QN(c,f,g,_){var N=V1();return N=N===null?null:{parent:ba._currentValue,pool:N},f.memoizedState={baseLanes:g,cachePool:N},c!==null&&Sy(f,null),X1(),$N(f),c!==null&&Jp(c,f,_,!0),null}function By(c,f){var g=f.ref;if(g===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(c===null||c.ref!==g)&&(f.flags|=4194816)}}function b_(c,f,g,_,N){return nd(f),g=e_(c,f,g,_,void 0,N),_=t_(),c!==null&&!Ra?(n_(c,f,N),Tl(c,f,N)):(cr&&_&&F1(f),f.flags|=1,Va(c,f,g,N),f.child)}function eR(c,f,g,_,N,$){return nd(f),f.updateQueue=null,g=QA(f,_,g,N),JA(c),_=t_(),c!==null&&!Ra?(n_(c,f,$),Tl(c,f,$)):(cr&&_&&F1(f),f.flags|=1,Va(c,f,g,$),f.child)}function tR(c,f,g,_,N){if(nd(f),f.stateNode===null){var $=Eo,se=g.contextType;typeof se=="object"&&se!==null&&($=ei(se)),$=new g(_,$),f.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=g_,f.stateNode=$,$._reactInternals=f,$=f.stateNode,$.props=_,$.state=f.memoizedState,$.refs={},W1(f),se=g.contextType,$.context=typeof se=="object"&&se!==null?ei(se):Eo,$.state=f.memoizedState,se=g.getDerivedStateFromProps,typeof se=="function"&&(m_(f,g,se,_),$.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(se=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),se!==$.state&&g_.enqueueReplaceState($,$.state,null),im(f,_,$,N),am(),$.state=f.memoizedState),typeof $.componentDidMount=="function"&&(f.flags|=4194308),_=!0}else if(c===null){$=f.stateNode;var _e=f.memoizedProps,ze=id(g,_e);$.props=ze;var dt=$.context,Tt=g.contextType;se=Eo,typeof Tt=="object"&&Tt!==null&&(se=ei(Tt));var Ot=g.getDerivedStateFromProps;Tt=typeof Ot=="function"||typeof $.getSnapshotBeforeUpdate=="function",_e=f.pendingProps!==_e,Tt||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(_e||dt!==se)&&zN(f,$,_,se),kc=!1;var mt=f.memoizedState;$.state=mt,im(f,_,$,N),am(),dt=f.memoizedState,_e||mt!==dt||kc?(typeof Ot=="function"&&(m_(f,g,Ot,_),dt=f.memoizedState),(ze=kc||BN(f,g,ze,_,mt,dt,se))?(Tt||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(f.flags|=4194308)):(typeof $.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=dt),$.props=_,$.state=dt,$.context=se,_=ze):(typeof $.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{$=f.stateNode,K1(c,f),se=f.memoizedProps,Tt=id(g,se),$.props=Tt,Ot=f.pendingProps,mt=$.context,dt=g.contextType,ze=Eo,typeof dt=="object"&&dt!==null&&(ze=ei(dt)),_e=g.getDerivedStateFromProps,(dt=typeof _e=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(se!==Ot||mt!==ze)&&zN(f,$,_,ze),kc=!1,mt=f.memoizedState,$.state=mt,im(f,_,$,N),am();var yt=f.memoizedState;se!==Ot||mt!==yt||kc||c!==null&&c.dependencies!==null&&xy(c.dependencies)?(typeof _e=="function"&&(m_(f,g,_e,_),yt=f.memoizedState),(Tt=kc||BN(f,g,Tt,_,mt,yt,ze)||c!==null&&c.dependencies!==null&&xy(c.dependencies))?(dt||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(_,yt,ze),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(_,yt,ze)),typeof $.componentDidUpdate=="function"&&(f.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof $.componentDidUpdate!="function"||se===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=yt),$.props=_,$.state=yt,$.context=ze,_=Tt):(typeof $.componentDidUpdate!="function"||se===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),_=!1)}return $=_,By(c,f),_=(f.flags&128)!==0,$||_?($=f.stateNode,g=_&&typeof g.getDerivedStateFromError!="function"?null:$.render(),f.flags|=1,c!==null&&_?(f.child=$f(f,c.child,null,N),f.child=$f(f,null,g,N)):Va(c,f,g,N),f.memoizedState=$.state,c=f.child):c=Tl(c,f,N),c}function nR(c,f,g,_){return Yp(),f.flags|=256,Va(c,f,g,_),f.child}var v_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function w_(c){return{baseLanes:c,cachePool:HA()}}function x_(c,f,g){return c=c!==null?c.childLanes&~g:0,f&&(c|=gs),c}function rR(c,f,g){var _=f.pendingProps,N=!1,$=(f.flags&128)!==0,se;if((se=$)||(se=c!==null&&c.memoizedState===null?!1:(va.current&2)!==0),se&&(N=!0,f.flags&=-129),se=(f.flags&32)!==0,f.flags&=-33,c===null){if(cr){if(N?Rc(f):Ic(),cr){var _e=Qr,ze;if(ze=_e){e:{for(ze=_e,_e=Co;ze.nodeType!==8;){if(!_e){_e=null;break e}if(ze=zs(ze.nextSibling),ze===null){_e=null;break e}}_e=ze}_e!==null?(f.memoizedState={dehydrated:_e,treeContext:Xu!==null?{id:xl,overflow:_l}:null,retryLane:536870912,hydrationErrors:null},ze=qi(18,null,null,0),ze.stateNode=_e,ze.return=f,f.child=ze,gi=f,Qr=null,ze=!0):ze=!1}ze||ed(f)}if(_e=f.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return aS(_e)?f.lanes=32:f.lanes=536870912,null;kl(f)}return _e=_.children,_=_.fallback,N?(Ic(),N=f.mode,_e=zy({mode:"hidden",children:_e},N),_=Yu(_,N,g,null),_e.return=f,_.return=f,_e.sibling=_,f.child=_e,N=f.child,N.memoizedState=w_(g),N.childLanes=x_(c,se,g),f.memoizedState=v_,_):(Rc(f),__(f,_e))}if(ze=c.memoizedState,ze!==null&&(_e=ze.dehydrated,_e!==null)){if($)f.flags&256?(Rc(f),f.flags&=-257,f=S_(c,f,g)):f.memoizedState!==null?(Ic(),f.child=c.child,f.flags|=128,f=null):(Ic(),N=_.fallback,_e=f.mode,_=zy({mode:"visible",children:_.children},_e),N=Yu(N,_e,g,null),N.flags|=2,_.return=f,N.return=f,_.sibling=N,f.child=_,$f(f,c.child,null,g),_=f.child,_.memoizedState=w_(g),_.childLanes=x_(c,se,g),f.memoizedState=v_,f=N);else if(Rc(f),aS(_e)){if(se=_e.nextSibling&&_e.nextSibling.dataset,se)var dt=se.dgst;se=dt,_=Error(r(419)),_.stack="",_.digest=se,Xp({value:_,source:null,stack:null}),f=S_(c,f,g)}else if(Ra||Jp(c,f,g,!1),se=(g&c.childLanes)!==0,Ra||se){if(se=Pr,se!==null&&(_=g&-g,_=(_&42)!==0?1:jt(_),_=(_&(se.suspendedLanes|g))!==0?0:_,_!==0&&_!==ze.retryLane))throw ze.retryLane=_,$s(c,_),Zi(se,c,_),KN;_e.data==="$?"||z_(),f=S_(c,f,g)}else _e.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=ze.treeContext,Qr=zs(_e.nextSibling),gi=f,cr=!0,Qu=null,Co=!1,c!==null&&(hs[ps++]=xl,hs[ps++]=_l,hs[ps++]=Xu,xl=c.id,_l=c.overflow,Xu=f),f=__(f,_.children),f.flags|=4096);return f}return N?(Ic(),N=_.fallback,_e=f.mode,ze=c.child,dt=ze.sibling,_=wl(ze,{mode:"hidden",children:_.children}),_.subtreeFlags=ze.subtreeFlags&65011712,dt!==null?N=wl(dt,N):(N=Yu(N,_e,g,null),N.flags|=2),N.return=f,_.return=f,_.sibling=N,f.child=_,_=N,N=f.child,_e=c.child.memoizedState,_e===null?_e=w_(g):(ze=_e.cachePool,ze!==null?(dt=ba._currentValue,ze=ze.parent!==dt?{parent:dt,pool:dt}:ze):ze=HA(),_e={baseLanes:_e.baseLanes|g,cachePool:ze}),N.memoizedState=_e,N.childLanes=x_(c,se,g),f.memoizedState=v_,_):(Rc(f),g=c.child,c=g.sibling,g=wl(g,{mode:"visible",children:_.children}),g.return=f,g.sibling=null,c!==null&&(se=f.deletions,se===null?(f.deletions=[c],f.flags|=16):se.push(c)),f.child=g,f.memoizedState=null,g)}function __(c,f){return f=zy({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function zy(c,f){return c=qi(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function S_(c,f,g){return $f(f,c.child,null,g),c=__(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function aR(c,f,g){c.lanes|=f;var _=c.alternate;_!==null&&(_.lanes|=f),z1(c.return,f,g)}function E_(c,f,g,_,N){var $=c.memoizedState;$===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:N}:($.isBackwards=f,$.rendering=null,$.renderingStartTime=0,$.last=_,$.tail=g,$.tailMode=N)}function iR(c,f,g){var _=f.pendingProps,N=_.revealOrder,$=_.tail;if(Va(c,f,_.children,g),_=va.current,(_&2)!==0)_=_&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&aR(c,g,f);else if(c.tag===19)aR(c,g,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}_&=1}switch(ie(va,_),N){case"forwards":for(g=f.child,N=null;g!==null;)c=g.alternate,c!==null&&Fy(c)===null&&(N=g),g=g.sibling;g=N,g===null?(N=f.child,f.child=null):(N=g.sibling,g.sibling=null),E_(f,!1,N,g,$);break;case"backwards":for(g=null,N=f.child,f.child=null;N!==null;){if(c=N.alternate,c!==null&&Fy(c)===null){f.child=N;break}c=N.sibling,N.sibling=g,g=N,N=c}E_(f,!0,g,null,$);break;case"together":E_(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Tl(c,f,g){if(c!==null&&(f.dependencies=c.dependencies),Pc|=f.lanes,(g&f.childLanes)===0)if(c!==null){if(Jp(c,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,g=wl(c,c.pendingProps),f.child=g,g.return=f;c.sibling!==null;)c=c.sibling,g=g.sibling=wl(c,c.pendingProps),g.return=f;g.sibling=null}return f.child}function C_(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&xy(c)))}function p7(c,f,g){switch(f.tag){case 3:Re(f,f.stateNode.containerInfo),Cc(f,ba,c.memoizedState.cache),Yp();break;case 27:case 5:Fe(f);break;case 4:Re(f,f.stateNode.containerInfo);break;case 10:Cc(f,f.type,f.memoizedProps.value);break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(Rc(f),f.flags|=128,null):(g&f.child.childLanes)!==0?rR(c,f,g):(Rc(f),c=Tl(c,f,g),c!==null?c.sibling:null);Rc(f);break;case 19:var N=(c.flags&128)!==0;if(_=(g&f.childLanes)!==0,_||(Jp(c,f,g,!1),_=(g&f.childLanes)!==0),N){if(_)return iR(c,f,g);f.flags|=128}if(N=f.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),ie(va,va.current),_)break;return null;case 22:case 23:return f.lanes=0,JN(c,f,g);case 24:Cc(f,ba,c.memoizedState.cache)}return Tl(c,f,g)}function sR(c,f,g){if(c!==null)if(c.memoizedProps!==f.pendingProps)Ra=!0;else{if(!C_(c,g)&&(f.flags&128)===0)return Ra=!1,p7(c,f,g);Ra=(c.flags&131072)!==0}else Ra=!1,cr&&(f.flags&1048576)!==0&&PA(f,wy,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var _=f.elementType,N=_._init;if(_=N(_._payload),f.type=_,typeof _=="function")D1(_)?(c=id(_,c),f.tag=1,f=tR(null,f,_,c,g)):(f.tag=0,f=b_(null,f,_,c,g));else{if(_!=null){if(N=_.$$typeof,N===C){f.tag=11,f=ZN(null,f,_,c,g);break e}else if(N===R){f.tag=14,f=YN(null,f,_,c,g);break e}}throw f=q(_)||_,Error(r(306,f,""))}}return f;case 0:return b_(c,f,f.type,f.pendingProps,g);case 1:return _=f.type,N=id(_,f.pendingProps),tR(c,f,_,N,g);case 3:e:{if(Re(f,f.stateNode.containerInfo),c===null)throw Error(r(387));_=f.pendingProps;var $=f.memoizedState;N=$.element,K1(c,f),im(f,_,null,g);var se=f.memoizedState;if(_=se.cache,Cc(f,ba,_),_!==$.cache&&U1(f,[ba],g,!0),am(),_=se.element,$.isDehydrated)if($={element:_,isDehydrated:!1,cache:se.cache},f.updateQueue.baseState=$,f.memoizedState=$,f.flags&256){f=nR(c,f,_,g);break e}else if(_!==N){N=pn(Error(r(424)),f),Xp(N),f=nR(c,f,_,g);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Qr=zs(c.firstChild),gi=f,cr=!0,Qu=null,Co=!0,g=LN(f,null,_,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Yp(),_===N){f=Tl(c,f,g);break e}Va(c,f,_,g)}f=f.child}return f;case 26:return By(c,f),c===null?(g=uI(f.type,null,f.pendingProps,null))?f.memoizedState=g:cr||(g=f.type,c=f.pendingProps,_=tb(Me.current).createElement(g),_[he]=f,_[Ne]=c,Wa(_,g,c),Fn(_),f.stateNode=_):f.memoizedState=uI(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Fe(f),c===null&&cr&&(_=f.stateNode=oI(f.type,f.pendingProps,Me.current),gi=f,Co=!0,N=Qr,Bc(f.type)?(iS=N,Qr=zs(_.firstChild)):Qr=N),Va(c,f,f.pendingProps.children,g),By(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&cr&&((N=_=Qr)&&(_=U7(_,f.type,f.pendingProps,Co),_!==null?(f.stateNode=_,gi=f,Qr=zs(_.firstChild),Co=!1,N=!0):N=!1),N||ed(f)),Fe(f),N=f.type,$=f.pendingProps,se=c!==null?c.memoizedProps:null,_=$.children,tS(N,$)?_=null:se!==null&&tS(N,se)&&(f.flags|=32),f.memoizedState!==null&&(N=e_(c,f,s7,null,null,g),Tm._currentValue=N),By(c,f),Va(c,f,_,g),f.child;case 6:return c===null&&cr&&((c=g=Qr)&&(g=H7(g,f.pendingProps,Co),g!==null?(f.stateNode=g,gi=f,Qr=null,c=!0):c=!1),c||ed(f)),null;case 13:return rR(c,f,g);case 4:return Re(f,f.stateNode.containerInfo),_=f.pendingProps,c===null?f.child=$f(f,null,_,g):Va(c,f,_,g),f.child;case 11:return ZN(c,f,f.type,f.pendingProps,g);case 7:return Va(c,f,f.pendingProps,g),f.child;case 8:return Va(c,f,f.pendingProps.children,g),f.child;case 12:return Va(c,f,f.pendingProps.children,g),f.child;case 10:return _=f.pendingProps,Cc(f,f.type,_.value),Va(c,f,_.children,g),f.child;case 9:return N=f.type._context,_=f.pendingProps.children,nd(f),N=ei(N),_=_(N),f.flags|=1,Va(c,f,_,g),f.child;case 14:return YN(c,f,f.type,f.pendingProps,g);case 15:return XN(c,f,f.type,f.pendingProps,g);case 19:return iR(c,f,g);case 31:return _=f.pendingProps,g=f.mode,_={mode:_.mode,children:_.children},c===null?(g=zy(_,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=wl(c.child,_),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return JN(c,f,g);case 24:return nd(f),_=ei(ba),c===null?(N=V1(),N===null&&(N=Pr,$=H1(),N.pooledCache=$,$.refCount++,$!==null&&(N.pooledCacheLanes|=g),N=$),f.memoizedState={parent:_,cache:N},W1(f),Cc(f,ba,N)):((c.lanes&g)!==0&&(K1(c,f),im(f,null,null,g),am()),N=c.memoizedState,$=f.memoizedState,N.parent!==_?(N={parent:_,cache:_},f.memoizedState=N,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=N),Cc(f,ba,_)):(_=$.cache,Cc(f,ba,_),_!==N.cache&&U1(f,[ba],g,!0))),Va(c,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Al(c){c.flags|=4}function oR(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!mI(f)){if(f=ms.current,f!==null&&((nr&4194048)===nr?ko!==null:(nr&62914560)!==nr&&(nr&536870912)===0||f!==ko))throw nm=G1,qA;c.flags|=8192}}function Uy(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?F():536870912,c.lanes|=f,Hf|=f)}function fm(c,f){if(!cr)switch(c.tailMode){case"hidden":f=c.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:_.sibling=null}}function Zr(c){var f=c.alternate!==null&&c.alternate.child===c.child,g=0,_=0;if(f)for(var N=c.child;N!==null;)g|=N.lanes|N.childLanes,_|=N.subtreeFlags&65011712,_|=N.flags&65011712,N.return=c,N=N.sibling;else for(N=c.child;N!==null;)g|=N.lanes|N.childLanes,_|=N.subtreeFlags,_|=N.flags,N.return=c,N=N.sibling;return c.subtreeFlags|=_,c.childLanes=g,f}function m7(c,f,g){var _=f.pendingProps;switch(L1(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(f),null;case 1:return Zr(f),null;case 3:return g=f.stateNode,_=null,c!==null&&(_=c.memoizedState.cache),f.memoizedState.cache!==_&&(f.flags|=2048),El(ba),ke(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(c===null||c.child===null)&&(Zp(f)?Al(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,$A())),Zr(f),null;case 26:return g=f.memoizedState,c===null?(Al(f),g!==null?(Zr(f),oR(f,g)):(Zr(f),f.flags&=-16777217)):g?g!==c.memoizedState?(Al(f),Zr(f),oR(f,g)):(Zr(f),f.flags&=-16777217):(c.memoizedProps!==_&&Al(f),Zr(f),f.flags&=-16777217),null;case 27:et(f),g=Me.current;var N=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==_&&Al(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return Zr(f),null}c=me.current,Zp(f)?FA(f):(c=oI(N,_,g),f.stateNode=c,Al(f))}return Zr(f),null;case 5:if(et(f),g=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==_&&Al(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return Zr(f),null}if(c=me.current,Zp(f))FA(f);else{switch(N=tb(Me.current),c){case 1:c=N.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:c=N.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":c=N.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":c=N.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":c=N.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof _.is=="string"?N.createElement("select",{is:_.is}):N.createElement("select"),_.multiple?c.multiple=!0:_.size&&(c.size=_.size);break;default:c=typeof _.is=="string"?N.createElement(g,{is:_.is}):N.createElement(g)}}c[he]=f,c[Ne]=_;e:for(N=f.child;N!==null;){if(N.tag===5||N.tag===6)c.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===f)break e;for(;N.sibling===null;){if(N.return===null||N.return===f)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}f.stateNode=c;e:switch(Wa(c,g,_),g){case"button":case"input":case"select":case"textarea":c=!!_.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Al(f)}}return Zr(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==_&&Al(f);else{if(typeof _!="string"&&f.stateNode===null)throw Error(r(166));if(c=Me.current,Zp(f)){if(c=f.stateNode,g=f.memoizedProps,_=null,N=gi,N!==null)switch(N.tag){case 27:case 5:_=N.memoizedProps}c[he]=f,c=!!(c.nodeValue===g||_!==null&&_.suppressHydrationWarning===!0||eI(c.nodeValue,g)),c||ed(f)}else c=tb(c).createTextNode(_),c[he]=f,f.stateNode=c}return Zr(f),null;case 13:if(_=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(N=Zp(f),_!==null&&_.dehydrated!==null){if(c===null){if(!N)throw Error(r(318));if(N=f.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[he]=f}else Yp(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Zr(f),N=!1}else N=$A(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=N),N=!0;if(!N)return f.flags&256?(kl(f),f):(kl(f),null)}if(kl(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=_!==null,c=c!==null&&c.memoizedState!==null,g){_=f.child,N=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(N=_.alternate.memoizedState.cachePool.pool);var $=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&($=_.memoizedState.cachePool.pool),$!==N&&(_.flags|=2048)}return g!==c&&g&&(f.child.flags|=8192),Uy(f,f.updateQueue),Zr(f),null;case 4:return ke(),c===null&&Y_(f.stateNode.containerInfo),Zr(f),null;case 10:return El(f.type),Zr(f),null;case 19:if(Q(va),N=f.memoizedState,N===null)return Zr(f),null;if(_=(f.flags&128)!==0,$=N.rendering,$===null)if(_)fm(N,!1);else{if(ea!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if($=Fy(c),$!==null){for(f.flags|=128,fm(N,!1),c=$.updateQueue,f.updateQueue=c,Uy(f,c),f.subtreeFlags=0,c=g,g=f.child;g!==null;)MA(g,c),g=g.sibling;return ie(va,va.current&1|2),f.child}c=c.sibling}N.tail!==null&&ue()>Vy&&(f.flags|=128,_=!0,fm(N,!1),f.lanes=4194304)}else{if(!_)if(c=Fy($),c!==null){if(f.flags|=128,_=!0,c=c.updateQueue,f.updateQueue=c,Uy(f,c),fm(N,!0),N.tail===null&&N.tailMode==="hidden"&&!$.alternate&&!cr)return Zr(f),null}else 2*ue()-N.renderingStartTime>Vy&&g!==536870912&&(f.flags|=128,_=!0,fm(N,!1),f.lanes=4194304);N.isBackwards?($.sibling=f.child,f.child=$):(c=N.last,c!==null?c.sibling=$:f.child=$,N.last=$)}return N.tail!==null?(f=N.tail,N.rendering=f,N.tail=f.sibling,N.renderingStartTime=ue(),f.sibling=null,c=va.current,ie(va,_?c&1|2:c&1),f):(Zr(f),null);case 22:case 23:return kl(f),J1(),_=f.memoizedState!==null,c!==null?c.memoizedState!==null!==_&&(f.flags|=8192):_&&(f.flags|=8192),_?(g&536870912)!==0&&(f.flags&128)===0&&(Zr(f),f.subtreeFlags&6&&(f.flags|=8192)):Zr(f),g=f.updateQueue,g!==null&&Uy(f,g.retryQueue),g=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==g&&(f.flags|=2048),c!==null&&Q(rd),null;case 24:return g=null,c!==null&&(g=c.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),El(ba),Zr(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function g7(c,f){switch(L1(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return El(ba),ke(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return et(f),null;case 13:if(kl(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Yp()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Q(va),null;case 4:return ke(),null;case 10:return El(f.type),null;case 22:case 23:return kl(f),J1(),c!==null&&Q(rd),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return El(ba),null;case 25:return null;default:return null}}function lR(c,f){switch(L1(f),f.tag){case 3:El(ba),ke();break;case 26:case 27:case 5:et(f);break;case 4:ke();break;case 13:kl(f);break;case 19:Q(va);break;case 10:El(f.type);break;case 22:case 23:kl(f),J1(),c!==null&&Q(rd);break;case 24:El(ba)}}function hm(c,f){try{var g=f.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var N=_.next;g=N;do{if((g.tag&c)===c){_=void 0;var $=g.create,se=g.inst;_=$(),se.destroy=_}g=g.next}while(g!==N)}}catch(_e){jr(f,f.return,_e)}}function jc(c,f,g){try{var _=f.updateQueue,N=_!==null?_.lastEffect:null;if(N!==null){var $=N.next;_=$;do{if((_.tag&c)===c){var se=_.inst,_e=se.destroy;if(_e!==void 0){se.destroy=void 0,N=f;var ze=g,dt=_e;try{dt()}catch(Tt){jr(N,ze,Tt)}}}_=_.next}while(_!==$)}}catch(Tt){jr(f,f.return,Tt)}}function cR(c){var f=c.updateQueue;if(f!==null){var g=c.stateNode;try{YA(f,g)}catch(_){jr(c,c.return,_)}}}function uR(c,f,g){g.props=id(c.type,c.memoizedProps),g.state=c.memoizedState;try{g.componentWillUnmount()}catch(_){jr(c,f,_)}}function pm(c,f){try{var g=c.ref;if(g!==null){switch(c.tag){case 26:case 27:case 5:var _=c.stateNode;break;case 30:_=c.stateNode;break;default:_=c.stateNode}typeof g=="function"?c.refCleanup=g(_):g.current=_}}catch(N){jr(c,f,N)}}function To(c,f){var g=c.ref,_=c.refCleanup;if(g!==null)if(typeof _=="function")try{_()}catch(N){jr(c,f,N)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(N){jr(c,f,N)}else g.current=null}function dR(c){var f=c.type,g=c.memoizedProps,_=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&_.focus();break e;case"img":g.src?_.src=g.src:g.srcSet&&(_.srcset=g.srcSet)}}catch(N){jr(c,c.return,N)}}function k_(c,f,g){try{var _=c.stateNode;F7(_,c.type,g,f),_[Ne]=f}catch(N){jr(c,c.return,N)}}function fR(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Bc(c.type)||c.tag===4}function T_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||fR(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Bc(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function A_(c,f,g){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(c,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(c),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=eb));else if(_!==4&&(_===27&&Bc(c.type)&&(g=c.stateNode,f=null),c=c.child,c!==null))for(A_(c,f,g),c=c.sibling;c!==null;)A_(c,f,g),c=c.sibling}function Hy(c,f,g){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?g.insertBefore(c,f):g.appendChild(c);else if(_!==4&&(_===27&&Bc(c.type)&&(g=c.stateNode),c=c.child,c!==null))for(Hy(c,f,g),c=c.sibling;c!==null;)Hy(c,f,g),c=c.sibling}function hR(c){var f=c.stateNode,g=c.memoizedProps;try{for(var _=c.type,N=f.attributes;N.length;)f.removeAttributeNode(N[0]);Wa(f,_,g),f[he]=c,f[Ne]=g}catch($){jr(c,c.return,$)}}var Nl=!1,sa=!1,N_=!1,pR=typeof WeakSet=="function"?WeakSet:Set,Ia=null;function y7(c,f){if(c=c.containerInfo,Q_=ob,c=ce(c),we(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var _=g.getSelection&&g.getSelection();if(_&&_.rangeCount!==0){g=_.anchorNode;var N=_.anchorOffset,$=_.focusNode;_=_.focusOffset;try{g.nodeType,$.nodeType}catch{g=null;break e}var se=0,_e=-1,ze=-1,dt=0,Tt=0,Ot=c,mt=null;t:for(;;){for(var yt;Ot!==g||N!==0&&Ot.nodeType!==3||(_e=se+N),Ot!==$||_!==0&&Ot.nodeType!==3||(ze=se+_),Ot.nodeType===3&&(se+=Ot.nodeValue.length),(yt=Ot.firstChild)!==null;)mt=Ot,Ot=yt;for(;;){if(Ot===c)break t;if(mt===g&&++dt===N&&(_e=se),mt===$&&++Tt===_&&(ze=se),(yt=Ot.nextSibling)!==null)break;Ot=mt,mt=Ot.parentNode}Ot=yt}g=_e===-1||ze===-1?null:{start:_e,end:ze}}else g=null}g=g||{start:0,end:0}}else g=null;for(eS={focusedElem:c,selectionRange:g},ob=!1,Ia=f;Ia!==null;)if(f=Ia,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,Ia=c;else for(;Ia!==null;){switch(f=Ia,$=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&$!==null){c=void 0,g=f,N=$.memoizedProps,$=$.memoizedState,_=g.stateNode;try{var Sn=id(g.type,N,g.elementType===g.type);c=_.getSnapshotBeforeUpdate(Sn,$),_.__reactInternalSnapshotBeforeUpdate=c}catch(yn){jr(g,g.return,yn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,g=c.nodeType,g===9)rS(c);else if(g===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":rS(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,Ia=c;break}Ia=f.return}}function mR(c,f,g){var _=g.flags;switch(g.tag){case 0:case 11:case 15:Oc(c,g),_&4&&hm(5,g);break;case 1:if(Oc(c,g),_&4)if(c=g.stateNode,f===null)try{c.componentDidMount()}catch(se){jr(g,g.return,se)}else{var N=id(g.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(N,f,c.__reactInternalSnapshotBeforeUpdate)}catch(se){jr(g,g.return,se)}}_&64&&cR(g),_&512&&pm(g,g.return);break;case 3:if(Oc(c,g),_&64&&(c=g.updateQueue,c!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{YA(c,f)}catch(se){jr(g,g.return,se)}}break;case 27:f===null&&_&4&&hR(g);case 26:case 5:Oc(c,g),f===null&&_&4&&dR(g),_&512&&pm(g,g.return);break;case 12:Oc(c,g);break;case 13:Oc(c,g),_&4&&bR(c,g),_&64&&(c=g.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(g=k7.bind(null,g),q7(c,g))));break;case 22:if(_=g.memoizedState!==null||Nl,!_){f=f!==null&&f.memoizedState!==null||sa,N=Nl;var $=sa;Nl=_,(sa=f)&&!$?Dc(c,g,(g.subtreeFlags&8772)!==0):Oc(c,g),Nl=N,sa=$}break;case 30:break;default:Oc(c,g)}}function gR(c){var f=c.alternate;f!==null&&(c.alternate=null,gR(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Qt(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var qr=null,Ni=!1;function Rl(c,f,g){for(g=g.child;g!==null;)yR(c,f,g),g=g.sibling}function yR(c,f,g){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(_t,g)}catch{}switch(g.tag){case 26:sa||To(g,f),Rl(c,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:sa||To(g,f);var _=qr,N=Ni;Bc(g.type)&&(qr=g.stateNode,Ni=!1),Rl(c,f,g),Sm(g.stateNode),qr=_,Ni=N;break;case 5:sa||To(g,f);case 6:if(_=qr,N=Ni,qr=null,Rl(c,f,g),qr=_,Ni=N,qr!==null)if(Ni)try{(qr.nodeType===9?qr.body:qr.nodeName==="HTML"?qr.ownerDocument.body:qr).removeChild(g.stateNode)}catch($){jr(g,f,$)}else try{qr.removeChild(g.stateNode)}catch($){jr(g,f,$)}break;case 18:qr!==null&&(Ni?(c=qr,iI(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,g.stateNode),Im(c)):iI(qr,g.stateNode));break;case 4:_=qr,N=Ni,qr=g.stateNode.containerInfo,Ni=!0,Rl(c,f,g),qr=_,Ni=N;break;case 0:case 11:case 14:case 15:sa||jc(2,g,f),sa||jc(4,g,f),Rl(c,f,g);break;case 1:sa||(To(g,f),_=g.stateNode,typeof _.componentWillUnmount=="function"&&uR(g,f,_)),Rl(c,f,g);break;case 21:Rl(c,f,g);break;case 22:sa=(_=sa)||g.memoizedState!==null,Rl(c,f,g),sa=_;break;default:Rl(c,f,g)}}function bR(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Im(c)}catch(g){jr(f,f.return,g)}}function b7(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new pR),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new pR),f;default:throw Error(r(435,c.tag))}}function R_(c,f){var g=b7(c);f.forEach(function(_){var N=T7.bind(null,c,_);g.has(_)||(g.add(_),_.then(N,N))})}function Vi(c,f){var g=f.deletions;if(g!==null)for(var _=0;_<g.length;_++){var N=g[_],$=c,se=f,_e=se;e:for(;_e!==null;){switch(_e.tag){case 27:if(Bc(_e.type)){qr=_e.stateNode,Ni=!1;break e}break;case 5:qr=_e.stateNode,Ni=!1;break e;case 3:case 4:qr=_e.stateNode.containerInfo,Ni=!0;break e}_e=_e.return}if(qr===null)throw Error(r(160));yR($,se,N),qr=null,Ni=!1,$=N.alternate,$!==null&&($.return=null),N.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)vR(f,c),f=f.sibling}var Bs=null;function vR(c,f){var g=c.alternate,_=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Vi(f,c),Gi(c),_&4&&(jc(3,c,c.return),hm(3,c),jc(5,c,c.return));break;case 1:Vi(f,c),Gi(c),_&512&&(sa||g===null||To(g,g.return)),_&64&&Nl&&(c=c.updateQueue,c!==null&&(_=c.callbacks,_!==null&&(g=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=g===null?_:g.concat(_))));break;case 26:var N=Bs;if(Vi(f,c),Gi(c),_&512&&(sa||g===null||To(g,g.return)),_&4){var $=g!==null?g.memoizedState:null;if(_=c.memoizedState,g===null)if(_===null)if(c.stateNode===null){e:{_=c.type,g=c.memoizedProps,N=N.ownerDocument||N;t:switch(_){case"title":$=N.getElementsByTagName("title")[0],(!$||$[Lt]||$[he]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=N.createElement(_),N.head.insertBefore($,N.querySelector("head > title"))),Wa($,_,g),$[he]=c,Fn($),_=$;break e;case"link":var se=hI("link","href",N).get(_+(g.href||""));if(se){for(var _e=0;_e<se.length;_e++)if($=se[_e],$.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&$.getAttribute("rel")===(g.rel==null?null:g.rel)&&$.getAttribute("title")===(g.title==null?null:g.title)&&$.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){se.splice(_e,1);break t}}$=N.createElement(_),Wa($,_,g),N.head.appendChild($);break;case"meta":if(se=hI("meta","content",N).get(_+(g.content||""))){for(_e=0;_e<se.length;_e++)if($=se[_e],$.getAttribute("content")===(g.content==null?null:""+g.content)&&$.getAttribute("name")===(g.name==null?null:g.name)&&$.getAttribute("property")===(g.property==null?null:g.property)&&$.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&$.getAttribute("charset")===(g.charSet==null?null:g.charSet)){se.splice(_e,1);break t}}$=N.createElement(_),Wa($,_,g),N.head.appendChild($);break;default:throw Error(r(468,_))}$[he]=c,Fn($),_=$}c.stateNode=_}else pI(N,c.type,c.stateNode);else c.stateNode=fI(N,_,c.memoizedProps);else $!==_?($===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):$.count--,_===null?pI(N,c.type,c.stateNode):fI(N,_,c.memoizedProps)):_===null&&c.stateNode!==null&&k_(c,c.memoizedProps,g.memoizedProps)}break;case 27:Vi(f,c),Gi(c),_&512&&(sa||g===null||To(g,g.return)),g!==null&&_&4&&k_(c,c.memoizedProps,g.memoizedProps);break;case 5:if(Vi(f,c),Gi(c),_&512&&(sa||g===null||To(g,g.return)),c.flags&32){N=c.stateNode;try{mc(N,"")}catch(yt){jr(c,c.return,yt)}}_&4&&c.stateNode!=null&&(N=c.memoizedProps,k_(c,N,g!==null?g.memoizedProps:N)),_&1024&&(N_=!0);break;case 6:if(Vi(f,c),Gi(c),_&4){if(c.stateNode===null)throw Error(r(162));_=c.memoizedProps,g=c.stateNode;try{g.nodeValue=_}catch(yt){jr(c,c.return,yt)}}break;case 3:if(ab=null,N=Bs,Bs=nb(f.containerInfo),Vi(f,c),Bs=N,Gi(c),_&4&&g!==null&&g.memoizedState.isDehydrated)try{Im(f.containerInfo)}catch(yt){jr(c,c.return,yt)}N_&&(N_=!1,wR(c));break;case 4:_=Bs,Bs=nb(c.stateNode.containerInfo),Vi(f,c),Gi(c),Bs=_;break;case 12:Vi(f,c),Gi(c);break;case 13:Vi(f,c),Gi(c),c.child.flags&8192&&c.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(P_=ue()),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,R_(c,_)));break;case 22:N=c.memoizedState!==null;var ze=g!==null&&g.memoizedState!==null,dt=Nl,Tt=sa;if(Nl=dt||N,sa=Tt||ze,Vi(f,c),sa=Tt,Nl=dt,Gi(c),_&8192)e:for(f=c.stateNode,f._visibility=N?f._visibility&-2:f._visibility|1,N&&(g===null||ze||Nl||sa||sd(c)),g=null,f=c;;){if(f.tag===5||f.tag===26){if(g===null){ze=g=f;try{if($=ze.stateNode,N)se=$.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none";else{_e=ze.stateNode;var Ot=ze.memoizedProps.style,mt=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;_e.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(yt){jr(ze,ze.return,yt)}}}else if(f.tag===6){if(g===null){ze=f;try{ze.stateNode.nodeValue=N?"":ze.memoizedProps}catch(yt){jr(ze,ze.return,yt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}_&4&&(_=c.updateQueue,_!==null&&(g=_.retryQueue,g!==null&&(_.retryQueue=null,R_(c,g))));break;case 19:Vi(f,c),Gi(c),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,R_(c,_)));break;case 30:break;case 21:break;default:Vi(f,c),Gi(c)}}function Gi(c){var f=c.flags;if(f&2){try{for(var g,_=c.return;_!==null;){if(fR(_)){g=_;break}_=_.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var N=g.stateNode,$=T_(c);Hy(c,$,N);break;case 5:var se=g.stateNode;g.flags&32&&(mc(se,""),g.flags&=-33);var _e=T_(c);Hy(c,_e,se);break;case 3:case 4:var ze=g.stateNode.containerInfo,dt=T_(c);A_(c,dt,ze);break;default:throw Error(r(161))}}catch(Tt){jr(c,c.return,Tt)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function wR(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;wR(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function Oc(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)mR(c,f.alternate,f),f=f.sibling}function sd(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:jc(4,f,f.return),sd(f);break;case 1:To(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&uR(f,f.return,g),sd(f);break;case 27:Sm(f.stateNode);case 26:case 5:To(f,f.return),sd(f);break;case 22:f.memoizedState===null&&sd(f);break;case 30:sd(f);break;default:sd(f)}c=c.sibling}}function Dc(c,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var _=f.alternate,N=c,$=f,se=$.flags;switch($.tag){case 0:case 11:case 15:Dc(N,$,g),hm(4,$);break;case 1:if(Dc(N,$,g),_=$,N=_.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(dt){jr(_,_.return,dt)}if(_=$,N=_.updateQueue,N!==null){var _e=_.stateNode;try{var ze=N.shared.hiddenCallbacks;if(ze!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ze.length;N++)ZA(ze[N],_e)}catch(dt){jr(_,_.return,dt)}}g&&se&64&&cR($),pm($,$.return);break;case 27:hR($);case 26:case 5:Dc(N,$,g),g&&_===null&&se&4&&dR($),pm($,$.return);break;case 12:Dc(N,$,g);break;case 13:Dc(N,$,g),g&&se&4&&bR(N,$);break;case 22:$.memoizedState===null&&Dc(N,$,g),pm($,$.return);break;case 30:break;default:Dc(N,$,g)}f=f.sibling}}function I_(c,f){var g=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==g&&(c!=null&&c.refCount++,g!=null&&Qp(g))}function j_(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Qp(c))}function Ao(c,f,g,_){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)xR(c,f,g,_),f=f.sibling}function xR(c,f,g,_){var N=f.flags;switch(f.tag){case 0:case 11:case 15:Ao(c,f,g,_),N&2048&&hm(9,f);break;case 1:Ao(c,f,g,_);break;case 3:Ao(c,f,g,_),N&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Qp(c)));break;case 12:if(N&2048){Ao(c,f,g,_),c=f.stateNode;try{var $=f.memoizedProps,se=$.id,_e=$.onPostCommit;typeof _e=="function"&&_e(se,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ze){jr(f,f.return,ze)}}else Ao(c,f,g,_);break;case 13:Ao(c,f,g,_);break;case 23:break;case 22:$=f.stateNode,se=f.alternate,f.memoizedState!==null?$._visibility&2?Ao(c,f,g,_):mm(c,f):$._visibility&2?Ao(c,f,g,_):($._visibility|=2,Bf(c,f,g,_,(f.subtreeFlags&10256)!==0)),N&2048&&I_(se,f);break;case 24:Ao(c,f,g,_),N&2048&&j_(f.alternate,f);break;default:Ao(c,f,g,_)}}function Bf(c,f,g,_,N){for(N=N&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var $=c,se=f,_e=g,ze=_,dt=se.flags;switch(se.tag){case 0:case 11:case 15:Bf($,se,_e,ze,N),hm(8,se);break;case 23:break;case 22:var Tt=se.stateNode;se.memoizedState!==null?Tt._visibility&2?Bf($,se,_e,ze,N):mm($,se):(Tt._visibility|=2,Bf($,se,_e,ze,N)),N&&dt&2048&&I_(se.alternate,se);break;case 24:Bf($,se,_e,ze,N),N&&dt&2048&&j_(se.alternate,se);break;default:Bf($,se,_e,ze,N)}f=f.sibling}}function mm(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=c,_=f,N=_.flags;switch(_.tag){case 22:mm(g,_),N&2048&&I_(_.alternate,_);break;case 24:mm(g,_),N&2048&&j_(_.alternate,_);break;default:mm(g,_)}f=f.sibling}}var gm=8192;function zf(c){if(c.subtreeFlags&gm)for(c=c.child;c!==null;)_R(c),c=c.sibling}function _R(c){switch(c.tag){case 26:zf(c),c.flags&gm&&c.memoizedState!==null&&rU(Bs,c.memoizedState,c.memoizedProps);break;case 5:zf(c);break;case 3:case 4:var f=Bs;Bs=nb(c.stateNode.containerInfo),zf(c),Bs=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=gm,gm=16777216,zf(c),gm=f):zf(c));break;default:zf(c)}}function SR(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function ym(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var _=f[g];Ia=_,CR(_,c)}SR(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)ER(c),c=c.sibling}function ER(c){switch(c.tag){case 0:case 11:case 15:ym(c),c.flags&2048&&jc(9,c,c.return);break;case 3:ym(c);break;case 12:ym(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,qy(c)):ym(c);break;default:ym(c)}}function qy(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var _=f[g];Ia=_,CR(_,c)}SR(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:jc(8,f,f.return),qy(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,qy(f));break;default:qy(f)}c=c.sibling}}function CR(c,f){for(;Ia!==null;){var g=Ia;switch(g.tag){case 0:case 11:case 15:jc(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var _=g.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:Qp(g.memoizedState.cache)}if(_=g.child,_!==null)_.return=g,Ia=_;else e:for(g=c;Ia!==null;){_=Ia;var N=_.sibling,$=_.return;if(gR(_),_===g){Ia=null;break e}if(N!==null){N.return=$,Ia=N;break e}Ia=$}}}var v7={getCacheForType:function(c){var f=ei(ba),g=f.data.get(c);return g===void 0&&(g=c(),f.data.set(c,g)),g}},w7=typeof WeakMap=="function"?WeakMap:Map,gr=0,Pr=null,Zn=null,nr=0,yr=0,Wi=null,Mc=!1,Uf=!1,O_=!1,Il=0,ea=0,Pc=0,od=0,D_=0,gs=0,Hf=0,bm=null,Ri=null,M_=!1,P_=0,Vy=1/0,Gy=null,Fc=null,Ga=0,Lc=null,qf=null,Vf=0,F_=0,L_=null,kR=null,vm=0,$_=null;function Ki(){if((gr&2)!==0&&nr!==0)return nr&-nr;if(ae.T!==null){var c=jf;return c!==0?c:G_()}return V()}function TR(){gs===0&&(gs=(nr&536870912)===0||cr?vt():536870912);var c=ms.current;return c!==null&&(c.flags|=32),gs}function Zi(c,f,g){(c===Pr&&(yr===2||yr===9)||c.cancelPendingCommit!==null)&&(Gf(c,0),$c(c,nr,gs,!1)),nt(c,g),((gr&2)===0||c!==Pr)&&(c===Pr&&((gr&2)===0&&(od|=g),ea===4&&$c(c,nr,gs,!1)),No(c))}function AR(c,f,g){if((gr&6)!==0)throw Error(r(327));var _=!g&&(f&124)===0&&(f&c.expiredLanes)===0||le(c,f),N=_?S7(c,f):U_(c,f,!0),$=_;do{if(N===0){Uf&&!_&&$c(c,f,0,!1);break}else{if(g=c.current.alternate,$&&!x7(g)){N=U_(c,f,!1),$=!1;continue}if(N===2){if($=f,c.errorRecoveryDisabledLanes&$)var se=0;else se=c.pendingLanes&-536870913,se=se!==0?se:se&536870912?536870912:0;if(se!==0){f=se;e:{var _e=c;N=bm;var ze=_e.current.memoizedState.isDehydrated;if(ze&&(Gf(_e,se).flags|=256),se=U_(_e,se,!1),se!==2){if(O_&&!ze){_e.errorRecoveryDisabledLanes|=$,od|=$,N=4;break e}$=Ri,Ri=N,$!==null&&(Ri===null?Ri=$:Ri.push.apply(Ri,$))}N=se}if($=!1,N!==2)continue}}if(N===1){Gf(c,0),$c(c,f,0,!0);break}e:{switch(_=c,$=N,$){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:$c(_,f,gs,!Mc);break e;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(N=P_+300-ue(),10<N)){if($c(_,f,gs,!Mc),Ce(_,0,!0)!==0)break e;_.timeoutHandle=rI(NR.bind(null,_,g,Ri,Gy,M_,f,gs,od,Hf,Mc,$,2,-0,0),N);break e}NR(_,g,Ri,Gy,M_,f,gs,od,Hf,Mc,$,0,-0,0)}}break}while(!0);No(c)}function NR(c,f,g,_,N,$,se,_e,ze,dt,Tt,Ot,mt,yt){if(c.timeoutHandle=-1,Ot=f.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(km={stylesheets:null,count:0,unsuspend:nU},_R(f),Ot=aU(),Ot!==null)){c.cancelPendingCommit=Ot(PR.bind(null,c,f,$,g,_,N,se,_e,ze,Tt,1,mt,yt)),$c(c,$,se,!dt);return}PR(c,f,$,g,_,N,se,_e,ze)}function x7(c){for(var f=c;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var _=0;_<g.length;_++){var N=g[_],$=N.getSnapshot;N=N.value;try{if(!Qa($(),N))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function $c(c,f,g,_){f&=~D_,f&=~od,c.suspendedLanes|=f,c.pingedLanes&=~f,_&&(c.warmLanes|=f),_=c.expirationTimes;for(var N=f;0<N;){var $=31-Zt(N),se=1<<$;_[$]=-1,N&=~se}g!==0&&Oe(c,g,f)}function Wy(){return(gr&6)===0?(wm(0),!1):!0}function B_(){if(Zn!==null){if(yr===0)var c=Zn.return;else c=Zn,Sl=td=null,r_(c),Lf=null,um=0,c=Zn;for(;c!==null;)lR(c.alternate,c),c=c.return;Zn=null}}function Gf(c,f){var g=c.timeoutHandle;g!==-1&&(c.timeoutHandle=-1,$7(g)),g=c.cancelPendingCommit,g!==null&&(c.cancelPendingCommit=null,g()),B_(),Pr=c,Zn=g=wl(c.current,null),nr=f,yr=0,Wi=null,Mc=!1,Uf=le(c,f),O_=!1,Hf=gs=D_=od=Pc=ea=0,Ri=bm=null,M_=!1,(f&8)!==0&&(f|=f&32);var _=c.entangledLanes;if(_!==0)for(c=c.entanglements,_&=f;0<_;){var N=31-Zt(_),$=1<<N;f|=c[N],_&=~$}return Il=f,_n(),g}function RR(c,f){zn=null,ae.H=Dy,f===tm||f===Ey?(f=WA(),yr=3):f===qA?(f=WA(),yr=4):yr=f===KN?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Wi=f,Zn===null&&(ea=1,$y(c,pn(f,c.current)))}function IR(){var c=ae.H;return ae.H=Dy,c===null?Dy:c}function jR(){var c=ae.A;return ae.A=v7,c}function z_(){ea=4,Mc||(nr&4194048)!==nr&&ms.current!==null||(Uf=!0),(Pc&134217727)===0&&(od&134217727)===0||Pr===null||$c(Pr,nr,gs,!1)}function U_(c,f,g){var _=gr;gr|=2;var N=IR(),$=jR();(Pr!==c||nr!==f)&&(Gy=null,Gf(c,f)),f=!1;var se=ea;e:do try{if(yr!==0&&Zn!==null){var _e=Zn,ze=Wi;switch(yr){case 8:B_(),se=6;break e;case 3:case 2:case 9:case 6:ms.current===null&&(f=!0);var dt=yr;if(yr=0,Wi=null,Wf(c,_e,ze,dt),g&&Uf){se=0;break e}break;default:dt=yr,yr=0,Wi=null,Wf(c,_e,ze,dt)}}_7(),se=ea;break}catch(Tt){RR(c,Tt)}while(!0);return f&&c.shellSuspendCounter++,Sl=td=null,gr=_,ae.H=N,ae.A=$,Zn===null&&(Pr=null,nr=0,_n()),se}function _7(){for(;Zn!==null;)OR(Zn)}function S7(c,f){var g=gr;gr|=2;var _=IR(),N=jR();Pr!==c||nr!==f?(Gy=null,Vy=ue()+500,Gf(c,f)):Uf=le(c,f);e:do try{if(yr!==0&&Zn!==null){f=Zn;var $=Wi;t:switch(yr){case 1:yr=0,Wi=null,Wf(c,f,$,1);break;case 2:case 9:if(VA($)){yr=0,Wi=null,DR(f);break}f=function(){yr!==2&&yr!==9||Pr!==c||(yr=7),No(c)},$.then(f,f);break e;case 3:yr=7;break e;case 4:yr=5;break e;case 7:VA($)?(yr=0,Wi=null,DR(f)):(yr=0,Wi=null,Wf(c,f,$,7));break;case 5:var se=null;switch(Zn.tag){case 26:se=Zn.memoizedState;case 5:case 27:var _e=Zn;if(!se||mI(se)){yr=0,Wi=null;var ze=_e.sibling;if(ze!==null)Zn=ze;else{var dt=_e.return;dt!==null?(Zn=dt,Ky(dt)):Zn=null}break t}}yr=0,Wi=null,Wf(c,f,$,5);break;case 6:yr=0,Wi=null,Wf(c,f,$,6);break;case 8:B_(),ea=6;break e;default:throw Error(r(462))}}E7();break}catch(Tt){RR(c,Tt)}while(!0);return Sl=td=null,ae.H=_,ae.A=N,gr=g,Zn!==null?0:(Pr=null,nr=0,_n(),ea)}function E7(){for(;Zn!==null&&!Se();)OR(Zn)}function OR(c){var f=sR(c.alternate,c,Il);c.memoizedProps=c.pendingProps,f===null?Ky(c):Zn=f}function DR(c){var f=c,g=f.alternate;switch(f.tag){case 15:case 0:f=eR(g,f,f.pendingProps,f.type,void 0,nr);break;case 11:f=eR(g,f,f.pendingProps,f.type.render,f.ref,nr);break;case 5:r_(f);default:lR(g,f),f=Zn=MA(f,Il),f=sR(g,f,Il)}c.memoizedProps=c.pendingProps,f===null?Ky(c):Zn=f}function Wf(c,f,g,_){Sl=td=null,r_(f),Lf=null,um=0;var N=f.return;try{if(h7(c,N,f,g,nr)){ea=1,$y(c,pn(g,c.current)),Zn=null;return}}catch($){if(N!==null)throw Zn=N,$;ea=1,$y(c,pn(g,c.current)),Zn=null;return}f.flags&32768?(cr||_===1?c=!0:Uf||(nr&536870912)!==0?c=!1:(Mc=c=!0,(_===2||_===9||_===3||_===6)&&(_=ms.current,_!==null&&_.tag===13&&(_.flags|=16384))),MR(f,c)):Ky(f)}function Ky(c){var f=c;do{if((f.flags&32768)!==0){MR(f,Mc);return}c=f.return;var g=m7(f.alternate,f,Il);if(g!==null){Zn=g;return}if(f=f.sibling,f!==null){Zn=f;return}Zn=f=c}while(f!==null);ea===0&&(ea=5)}function MR(c,f){do{var g=g7(c.alternate,c);if(g!==null){g.flags&=32767,Zn=g;return}if(g=c.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(c=c.sibling,c!==null)){Zn=c;return}Zn=c=g}while(c!==null);ea=6,Zn=null}function PR(c,f,g,_,N,$,se,_e,ze){c.cancelPendingCommit=null;do Zy();while(Ga!==0);if((gr&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if($=f.lanes|f.childLanes,$|=qa,ge(c,g,$,se,_e,ze),c===Pr&&(Zn=Pr=null,nr=0),qf=f,Lc=c,Vf=g,F_=$,L_=N,kR=_,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,A7(Pe,function(){return zR(),null})):(c.callbackNode=null,c.callbackPriority=0),_=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||_){_=ae.T,ae.T=null,N=te.p,te.p=2,se=gr,gr|=4;try{y7(c,f,g)}finally{gr=se,te.p=N,ae.T=_}}Ga=1,FR(),LR(),$R()}}function FR(){if(Ga===1){Ga=0;var c=Lc,f=qf,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=ae.T,ae.T=null;var _=te.p;te.p=2;var N=gr;gr|=4;try{vR(f,c);var $=eS,se=ce(c.containerInfo),_e=$.focusedElem,ze=$.selectionRange;if(se!==_e&&_e&&_e.ownerDocument&&ne(_e.ownerDocument.documentElement,_e)){if(ze!==null&&we(_e)){var dt=ze.start,Tt=ze.end;if(Tt===void 0&&(Tt=dt),"selectionStart"in _e)_e.selectionStart=dt,_e.selectionEnd=Math.min(Tt,_e.value.length);else{var Ot=_e.ownerDocument||document,mt=Ot&&Ot.defaultView||window;if(mt.getSelection){var yt=mt.getSelection(),Sn=_e.textContent.length,yn=Math.min(ze.start,Sn),Cr=ze.end===void 0?yn:Math.min(ze.end,Sn);!yt.extend&&yn>Cr&&(se=Cr,Cr=yn,yn=se);var at=Y(_e,yn),Ze=Y(_e,Cr);if(at&&Ze&&(yt.rangeCount!==1||yt.anchorNode!==at.node||yt.anchorOffset!==at.offset||yt.focusNode!==Ze.node||yt.focusOffset!==Ze.offset)){var ct=Ot.createRange();ct.setStart(at.node,at.offset),yt.removeAllRanges(),yn>Cr?(yt.addRange(ct),yt.extend(Ze.node,Ze.offset)):(ct.setEnd(Ze.node,Ze.offset),yt.addRange(ct))}}}}for(Ot=[],yt=_e;yt=yt.parentNode;)yt.nodeType===1&&Ot.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<Ot.length;_e++){var It=Ot[_e];It.element.scrollLeft=It.left,It.element.scrollTop=It.top}}ob=!!Q_,eS=Q_=null}finally{gr=N,te.p=_,ae.T=g}}c.current=f,Ga=2}}function LR(){if(Ga===2){Ga=0;var c=Lc,f=qf,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=ae.T,ae.T=null;var _=te.p;te.p=2;var N=gr;gr|=4;try{mR(c,f.alternate,f)}finally{gr=N,te.p=_,ae.T=g}}Ga=3}}function $R(){if(Ga===4||Ga===3){Ga=0,Te();var c=Lc,f=qf,g=Vf,_=kR;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Ga=5:(Ga=0,qf=Lc=null,BR(c,c.pendingLanes));var N=c.pendingLanes;if(N===0&&(Fc=null),pe(g),f=f.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(_t,f,void 0,(f.current.flags&128)===128)}catch{}if(_!==null){f=ae.T,N=te.p,te.p=2,ae.T=null;try{for(var $=c.onRecoverableError,se=0;se<_.length;se++){var _e=_[se];$(_e.value,{componentStack:_e.stack})}}finally{ae.T=f,te.p=N}}(Vf&3)!==0&&Zy(),No(c),N=c.pendingLanes,(g&4194090)!==0&&(N&42)!==0?c===$_?vm++:(vm=0,$_=c):vm=0,wm(0)}}function BR(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,Qp(f)))}function Zy(c){return FR(),LR(),$R(),zR()}function zR(){if(Ga!==5)return!1;var c=Lc,f=F_;F_=0;var g=pe(Vf),_=ae.T,N=te.p;try{te.p=32>g?32:g,ae.T=null,g=L_,L_=null;var $=Lc,se=Vf;if(Ga=0,qf=Lc=null,Vf=0,(gr&6)!==0)throw Error(r(331));var _e=gr;if(gr|=4,ER($.current),xR($,$.current,se,g),gr=_e,wm(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(_t,$)}catch{}return!0}finally{te.p=N,ae.T=_,BR(c,f)}}function UR(c,f,g){f=pn(g,f),f=y_(c.stateNode,f,2),c=Ac(c,f,2),c!==null&&(nt(c,2),No(c))}function jr(c,f,g){if(c.tag===3)UR(c,c,g);else for(;f!==null;){if(f.tag===3){UR(f,c,g);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Fc===null||!Fc.has(_))){c=pn(g,c),g=GN(2),_=Ac(f,g,2),_!==null&&(WN(g,_,f,c),nt(_,2),No(_));break}}f=f.return}}function H_(c,f,g){var _=c.pingCache;if(_===null){_=c.pingCache=new w7;var N=new Set;_.set(f,N)}else N=_.get(f),N===void 0&&(N=new Set,_.set(f,N));N.has(g)||(O_=!0,N.add(g),c=C7.bind(null,c,f,g),f.then(c,c))}function C7(c,f,g){var _=c.pingCache;_!==null&&_.delete(f),c.pingedLanes|=c.suspendedLanes&g,c.warmLanes&=~g,Pr===c&&(nr&g)===g&&(ea===4||ea===3&&(nr&62914560)===nr&&300>ue()-P_?(gr&2)===0&&Gf(c,0):D_|=g,Hf===nr&&(Hf=0)),No(c)}function HR(c,f){f===0&&(f=F()),c=$s(c,f),c!==null&&(nt(c,f),No(c))}function k7(c){var f=c.memoizedState,g=0;f!==null&&(g=f.retryLane),HR(c,g)}function T7(c,f){var g=0;switch(c.tag){case 13:var _=c.stateNode,N=c.memoizedState;N!==null&&(g=N.retryLane);break;case 19:_=c.stateNode;break;case 22:_=c.stateNode._retryCache;break;default:throw Error(r(314))}_!==null&&_.delete(f),HR(c,g)}function A7(c,f){return Ie(c,f)}var Yy=null,Kf=null,q_=!1,Xy=!1,V_=!1,ld=0;function No(c){c!==Kf&&c.next===null&&(Kf===null?Yy=Kf=c:Kf=Kf.next=c),Xy=!0,q_||(q_=!0,R7())}function wm(c,f){if(!V_&&Xy){V_=!0;do for(var g=!1,_=Yy;_!==null;){if(c!==0){var N=_.pendingLanes;if(N===0)var $=0;else{var se=_.suspendedLanes,_e=_.pingedLanes;$=(1<<31-Zt(42|c)+1)-1,$&=N&~(se&~_e),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(g=!0,WR(_,$))}else $=nr,$=Ce(_,_===Pr?$:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),($&3)===0||le(_,$)||(g=!0,WR(_,$));_=_.next}while(g);V_=!1}}function N7(){qR()}function qR(){Xy=q_=!1;var c=0;ld!==0&&(L7()&&(c=ld),ld=0);for(var f=ue(),g=null,_=Yy;_!==null;){var N=_.next,$=VR(_,f);$===0?(_.next=null,g===null?Yy=N:g.next=N,N===null&&(Kf=g)):(g=_,(c!==0||($&3)!==0)&&(Xy=!0)),_=N}wm(c)}function VR(c,f){for(var g=c.suspendedLanes,_=c.pingedLanes,N=c.expirationTimes,$=c.pendingLanes&-62914561;0<$;){var se=31-Zt($),_e=1<<se,ze=N[se];ze===-1?((_e&g)===0||(_e&_)!==0)&&(N[se]=ft(_e,f)):ze<=f&&(c.expiredLanes|=_e),$&=~_e}if(f=Pr,g=nr,g=Ce(c,c===f?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),_=c.callbackNode,g===0||c===f&&(yr===2||yr===9)||c.cancelPendingCommit!==null)return _!==null&&_!==null&&z(_),c.callbackNode=null,c.callbackPriority=0;if((g&3)===0||le(c,g)){if(f=g&-g,f===c.callbackPriority)return f;switch(_!==null&&z(_),pe(g)){case 2:case 8:g=xe;break;case 32:g=Pe;break;case 268435456:g=We;break;default:g=Pe}return _=GR.bind(null,c),g=Ie(g,_),c.callbackPriority=f,c.callbackNode=g,f}return _!==null&&_!==null&&z(_),c.callbackPriority=2,c.callbackNode=null,2}function GR(c,f){if(Ga!==0&&Ga!==5)return c.callbackNode=null,c.callbackPriority=0,null;var g=c.callbackNode;if(Zy()&&c.callbackNode!==g)return null;var _=nr;return _=Ce(c,c===Pr?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),_===0?null:(AR(c,_,f),VR(c,ue()),c.callbackNode!=null&&c.callbackNode===g?GR.bind(null,c):null)}function WR(c,f){if(Zy())return null;AR(c,f,!0)}function R7(){B7(function(){(gr&6)!==0?Ie(ee,N7):qR()})}function G_(){return ld===0&&(ld=vt()),ld}function KR(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:dl(""+c)}function ZR(c,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,c.id&&g.setAttribute("form",c.id),f.parentNode.insertBefore(g,f),c=new FormData(c),g.parentNode.removeChild(g),c}function I7(c,f,g,_,N){if(f==="submit"&&g&&g.stateNode===N){var $=KR((N[Ne]||null).action),se=_.submitter;se&&(f=(f=se[Ne]||null)?KR(f.formAction):se.getAttribute("formAction"),f!==null&&($=f,se=null));var _e=new pf("action","action",null,_,N);c.push({event:_e,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(ld!==0){var ze=se?ZR(N,se):new FormData(N);f_(g,{pending:!0,data:ze,method:N.method,action:$},null,ze)}}else typeof $=="function"&&(_e.preventDefault(),ze=se?ZR(N,se):new FormData(N),f_(g,{pending:!0,data:ze,method:N.method,action:$},$,ze))},currentTarget:N}]})}}for(var W_=0;W_<Xt.length;W_++){var K_=Xt[W_],j7=K_.toLowerCase(),O7=K_[0].toUpperCase()+K_.slice(1);zt(j7,"on"+O7)}zt(ht,"onAnimationEnd"),zt(bt,"onAnimationIteration"),zt(wt,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(kt,"onTransitionRun"),zt(Ht,"onTransitionStart"),zt(Yt,"onTransitionCancel"),zt(Bt,"onTransitionEnd"),yo("onMouseEnter",["mouseout","mouseover"]),yo("onMouseLeave",["mouseout","mouseover"]),yo("onPointerEnter",["pointerout","pointerover"]),yo("onPointerLeave",["pointerout","pointerover"]),go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),go("onBeforeInput",["compositionend","keypress","textInput","paste"]),go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xm));function YR(c,f){f=(f&4)!==0;for(var g=0;g<c.length;g++){var _=c[g],N=_.event;_=_.listeners;e:{var $=void 0;if(f)for(var se=_.length-1;0<=se;se--){var _e=_[se],ze=_e.instance,dt=_e.currentTarget;if(_e=_e.listener,ze!==$&&N.isPropagationStopped())break e;$=_e,N.currentTarget=dt;try{$(N)}catch(Tt){Ly(Tt)}N.currentTarget=null,$=ze}else for(se=0;se<_.length;se++){if(_e=_[se],ze=_e.instance,dt=_e.currentTarget,_e=_e.listener,ze!==$&&N.isPropagationStopped())break e;$=_e,N.currentTarget=dt;try{$(N)}catch(Tt){Ly(Tt)}N.currentTarget=null,$=ze}}}}function Yn(c,f){var g=f[pt];g===void 0&&(g=f[pt]=new Set);var _=c+"__bubble";g.has(_)||(XR(f,c,2,!1),g.add(_))}function Z_(c,f,g){var _=0;f&&(_|=4),XR(g,c,_,f)}var Jy="_reactListening"+Math.random().toString(36).slice(2);function Y_(c){if(!c[Jy]){c[Jy]=!0,fi.forEach(function(g){g!=="selectionchange"&&(D7.has(g)||Z_(g,!1,c),Z_(g,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[Jy]||(f[Jy]=!0,Z_("selectionchange",!1,f))}}function XR(c,f,g,_){switch(xI(f)){case 2:var N=oU;break;case 8:N=lU;break;default:N=uS}g=N.bind(null,f,g,c),N=void 0,!Mp||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(N=!0),_?N!==void 0?c.addEventListener(f,g,{capture:!0,passive:N}):c.addEventListener(f,g,!0):N!==void 0?c.addEventListener(f,g,{passive:N}):c.addEventListener(f,g,!1)}function X_(c,f,g,_,N){var $=_;if((f&1)===0&&(f&2)===0&&_!==null)e:for(;;){if(_===null)return;var se=_.tag;if(se===3||se===4){var _e=_.stateNode.containerInfo;if(_e===N)break;if(se===4)for(se=_.return;se!==null;){var ze=se.tag;if((ze===3||ze===4)&&se.stateNode.containerInfo===N)return;se=se.return}for(;_e!==null;){if(se=An(_e),se===null)return;if(ze=se.tag,ze===5||ze===6||ze===26||ze===27){_=$=se;continue e}_e=_e.parentNode}}_=_.return}yc(function(){var dt=$,Tt=ff(g),Ot=[];e:{var mt=Vt.get(c);if(mt!==void 0){var yt=pf,Sn=c;switch(c){case"keypress":if(wc(g)===0)break e;case"keydown":case"keyup":yt=_f;break;case"focusin":Sn="focus",yt=xc;break;case"focusout":Sn="blur",yt=xc;break;case"beforeblur":case"afterblur":yt=xc;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=yf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Up;break;case ht:case bt:case wt:yt=ly;break;case Bt:yt=Hp;break;case"scroll":case"scrollend":yt=mf;break;case"wheel":yt=Ef;break;case"copy":case"cut":case"paste":yt=wf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=zp;break;case"toggle":case"beforetoggle":yt=dy}var yn=(f&4)!==0,Cr=!yn&&(c==="scroll"||c==="scrollend"),at=yn?mt!==null?mt+"Capture":null:mt;yn=[];for(var Ze=dt,ct;Ze!==null;){var It=Ze;if(ct=It.stateNode,It=It.tag,It!==5&&It!==26&&It!==27||ct===null||at===null||(It=pl(Ze,at),It!=null&&yn.push(_m(Ze,It,ct))),Cr)break;Ze=Ze.return}0<yn.length&&(mt=new yt(mt,Sn,null,g,Tt),Ot.push({event:mt,listeners:yn}))}}if((f&7)===0){e:{if(mt=c==="mouseover"||c==="pointerover",yt=c==="mouseout"||c==="pointerout",mt&&g!==cs&&(Sn=g.relatedTarget||g.fromElement)&&(An(Sn)||Sn[He]))break e;if((yt||mt)&&(mt=Tt.window===Tt?Tt:(mt=Tt.ownerDocument)?mt.defaultView||mt.parentWindow:window,yt?(Sn=g.relatedTarget||g.toElement,yt=dt,Sn=Sn?An(Sn):null,Sn!==null&&(Cr=i(Sn),yn=Sn.tag,Sn!==Cr||yn!==5&&yn!==27&&yn!==6)&&(Sn=null)):(yt=null,Sn=dt),yt!==Sn)){if(yn=yf,It="onMouseLeave",at="onMouseEnter",Ze="mouse",(c==="pointerout"||c==="pointerover")&&(yn=zp,It="onPointerLeave",at="onPointerEnter",Ze="pointer"),Cr=yt==null?mt:xr(yt),ct=Sn==null?mt:xr(Sn),mt=new yn(It,Ze+"leave",yt,g,Tt),mt.target=Cr,mt.relatedTarget=ct,It=null,An(Tt)===dt&&(yn=new yn(at,Ze+"enter",Sn,g,Tt),yn.target=ct,yn.relatedTarget=Cr,It=yn),Cr=It,yt&&Sn)t:{for(yn=yt,at=Sn,Ze=0,ct=yn;ct;ct=Zf(ct))Ze++;for(ct=0,It=at;It;It=Zf(It))ct++;for(;0<Ze-ct;)yn=Zf(yn),Ze--;for(;0<ct-Ze;)at=Zf(at),ct--;for(;Ze--;){if(yn===at||at!==null&&yn===at.alternate)break t;yn=Zf(yn),at=Zf(at)}yn=null}else yn=null;yt!==null&&JR(Ot,mt,yt,yn,!1),Sn!==null&&Cr!==null&&JR(Ot,Cr,Sn,yn,!0)}}e:{if(mt=dt?xr(dt):window,yt=mt.nodeName&&mt.nodeName.toLowerCase(),yt==="select"||yt==="input"&&mt.type==="file")var sn=Zu;else if(Tf(mt))if(ds)sn=Ec;else{sn=vl;var Hn=yy}else yt=mt.nodeName,!yt||yt.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?dt&&Dp(dt.elementType)&&(sn=Zu):sn=Kp;if(sn&&(sn=sn(c,dt))){Wp(Ot,sn,g,Tt);break e}Hn&&Hn(c,mt,dt),c==="focusout"&&dt&&mt.type==="number"&&dt.memoizedProps.value!=null&&hc(mt,"number",mt.value)}switch(Hn=dt?xr(dt):window,c){case"focusin":(Tf(Hn)||Hn.contentEditable==="true")&&($e=Hn,Ge=dt,Xe=null);break;case"focusout":Xe=Ge=$e=null;break;case"mousedown":rt=!0;break;case"contextmenu":case"mouseup":case"dragend":rt=!1,qe(Ot,g,Tt);break;case"selectionchange":if(De)break;case"keydown":case"keyup":qe(Ot,g,Tt)}var fn;if(Wu)e:{switch(c){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else bl?Gp(c,g)&&(wn="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(wn="onCompositionStart");wn&&(Cf&&g.locale!=="ko"&&(bl||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&bl&&(fn=vc()):(us=Tt,hf="value"in us?us.value:us.textContent,bl=!0)),Hn=Qy(dt,wn),0<Hn.length&&(wn=new xf(wn,c,null,g,Tt),Ot.push({event:wn,listeners:Hn}),fn?wn.data=fn:(fn=hy(g),fn!==null&&(wn.data=fn)))),(fn=I1?py(c,g):j1(c,g))&&(wn=Qy(dt,"onBeforeInput"),0<wn.length&&(Hn=new xf("onBeforeInput","beforeinput",null,g,Tt),Ot.push({event:Hn,listeners:wn}),Hn.data=fn)),I7(Ot,c,dt,g,Tt)}YR(Ot,f)})}function _m(c,f,g){return{instance:c,listener:f,currentTarget:g}}function Qy(c,f){for(var g=f+"Capture",_=[];c!==null;){var N=c,$=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||$===null||(N=pl(c,g),N!=null&&_.unshift(_m(c,N,$)),N=pl(c,f),N!=null&&_.push(_m(c,N,$))),c.tag===3)return _;c=c.return}return[]}function Zf(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function JR(c,f,g,_,N){for(var $=f._reactName,se=[];g!==null&&g!==_;){var _e=g,ze=_e.alternate,dt=_e.stateNode;if(_e=_e.tag,ze!==null&&ze===_)break;_e!==5&&_e!==26&&_e!==27||dt===null||(ze=dt,N?(dt=pl(g,$),dt!=null&&se.unshift(_m(g,dt,ze))):N||(dt=pl(g,$),dt!=null&&se.push(_m(g,dt,ze)))),g=g.return}se.length!==0&&c.push({event:f,listeners:se})}var M7=/\r\n?/g,P7=/\u0000|\uFFFD/g;function QR(c){return(typeof c=="string"?c:""+c).replace(M7,`
`).replace(P7,"")}function eI(c,f){return f=QR(f),QR(c)===f}function eb(){}function Er(c,f,g,_,N,$){switch(g){case"children":typeof _=="string"?f==="body"||f==="textarea"&&_===""||mc(c,_):(typeof _=="number"||typeof _=="bigint")&&f!=="body"&&mc(c,""+_);break;case"className":ll(c,"class",_);break;case"tabIndex":ll(c,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(c,g,_);break;case"style":iy(c,_,$);break;case"data":if(f!=="object"){ll(c,"data",_);break}case"src":case"href":if(_===""&&(f!=="a"||g!=="href")){c.removeAttribute(g);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){c.removeAttribute(g);break}_=dl(""+_),c.setAttribute(g,_);break;case"action":case"formAction":if(typeof _=="function"){c.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(g==="formAction"?(f!=="input"&&Er(c,f,"name",N.name,N,null),Er(c,f,"formEncType",N.formEncType,N,null),Er(c,f,"formMethod",N.formMethod,N,null),Er(c,f,"formTarget",N.formTarget,N,null)):(Er(c,f,"encType",N.encType,N,null),Er(c,f,"method",N.method,N,null),Er(c,f,"target",N.target,N,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){c.removeAttribute(g);break}_=dl(""+_),c.setAttribute(g,_);break;case"onClick":_!=null&&(c.onclick=eb);break;case"onScroll":_!=null&&Yn("scroll",c);break;case"onScrollEnd":_!=null&&Yn("scrollend",c);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(g=_.__html,g!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=g}}break;case"multiple":c.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":c.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){c.removeAttribute("xlink:href");break}g=dl(""+_),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(g,""+_):c.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(g,""):c.removeAttribute(g);break;case"capture":case"download":_===!0?c.setAttribute(g,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(g,_):c.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?c.setAttribute(g,_):c.removeAttribute(g);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?c.removeAttribute(g):c.setAttribute(g,_);break;case"popover":Yn("beforetoggle",c),Yn("toggle",c),Fs(c,"popover",_);break;case"xlinkActuate":Ui(c,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Ui(c,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Ui(c,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Ui(c,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Ui(c,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Ui(c,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Ui(c,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Ui(c,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Ui(c,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":Fs(c,"is",_);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=pi.get(g)||g,Fs(c,g,_))}}function J_(c,f,g,_,N,$){switch(g){case"style":iy(c,_,$);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(g=_.__html,g!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=g}}break;case"children":typeof _=="string"?mc(c,_):(typeof _=="number"||typeof _=="bigint")&&mc(c,""+_);break;case"onScroll":_!=null&&Yn("scroll",c);break;case"onScrollEnd":_!=null&&Yn("scrollend",c);break;case"onClick":_!=null&&(c.onclick=eb);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mo.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(N=g.endsWith("Capture"),f=g.slice(2,N?g.length-7:void 0),$=c[Ne]||null,$=$!=null?$[g]:null,typeof $=="function"&&c.removeEventListener(f,$,N),typeof _=="function")){typeof $!="function"&&$!==null&&(g in c?c[g]=null:c.hasAttribute(g)&&c.removeAttribute(g)),c.addEventListener(f,_,N);break e}g in c?c[g]=_:_===!0?c.setAttribute(g,""):Fs(c,g,_)}}}function Wa(c,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yn("error",c),Yn("load",c);var _=!1,N=!1,$;for($ in g)if(g.hasOwnProperty($)){var se=g[$];if(se!=null)switch($){case"src":_=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Er(c,f,$,se,g,null)}}N&&Er(c,f,"srcSet",g.srcSet,g,null),_&&Er(c,f,"src",g.src,g,null);return;case"input":Yn("invalid",c);var _e=$=se=N=null,ze=null,dt=null;for(_ in g)if(g.hasOwnProperty(_)){var Tt=g[_];if(Tt!=null)switch(_){case"name":N=Tt;break;case"type":se=Tt;break;case"checked":ze=Tt;break;case"defaultChecked":dt=Tt;break;case"value":$=Tt;break;case"defaultValue":_e=Tt;break;case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(r(137,f));break;default:Er(c,f,_,Tt,g,null)}}jp(c,$,_e,ze,dt,se,N,!1),wo(c);return;case"select":Yn("invalid",c),_=se=$=null;for(N in g)if(g.hasOwnProperty(N)&&(_e=g[N],_e!=null))switch(N){case"value":$=_e;break;case"defaultValue":se=_e;break;case"multiple":_=_e;default:Er(c,f,N,_e,g,null)}f=$,g=se,c.multiple=!!_,f!=null?ul(c,!!_,f,!1):g!=null&&ul(c,!!_,g,!0);return;case"textarea":Yn("invalid",c),$=N=_=null;for(se in g)if(g.hasOwnProperty(se)&&(_e=g[se],_e!=null))switch(se){case"value":_=_e;break;case"defaultValue":N=_e;break;case"children":$=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(91));break;default:Er(c,f,se,_e,g,null)}Op(c,_,N,$),wo(c);return;case"option":for(ze in g)if(g.hasOwnProperty(ze)&&(_=g[ze],_!=null))switch(ze){case"selected":c.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Er(c,f,ze,_,g,null)}return;case"dialog":Yn("beforetoggle",c),Yn("toggle",c),Yn("cancel",c),Yn("close",c);break;case"iframe":case"object":Yn("load",c);break;case"video":case"audio":for(_=0;_<xm.length;_++)Yn(xm[_],c);break;case"image":Yn("error",c),Yn("load",c);break;case"details":Yn("toggle",c);break;case"embed":case"source":case"link":Yn("error",c),Yn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in g)if(g.hasOwnProperty(dt)&&(_=g[dt],_!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Er(c,f,dt,_,g,null)}return;default:if(Dp(f)){for(Tt in g)g.hasOwnProperty(Tt)&&(_=g[Tt],_!==void 0&&J_(c,f,Tt,_,g,void 0));return}}for(_e in g)g.hasOwnProperty(_e)&&(_=g[_e],_!=null&&Er(c,f,_e,_,g,null))}function F7(c,f,g,_){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,$=null,se=null,_e=null,ze=null,dt=null,Tt=null;for(yt in g){var Ot=g[yt];if(g.hasOwnProperty(yt)&&Ot!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":ze=Ot;default:_.hasOwnProperty(yt)||Er(c,f,yt,null,_,Ot)}}for(var mt in _){var yt=_[mt];if(Ot=g[mt],_.hasOwnProperty(mt)&&(yt!=null||Ot!=null))switch(mt){case"type":$=yt;break;case"name":N=yt;break;case"checked":dt=yt;break;case"defaultChecked":Tt=yt;break;case"value":se=yt;break;case"defaultValue":_e=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,f));break;default:yt!==Ot&&Er(c,f,mt,yt,_,Ot)}}fc(c,se,_e,ze,dt,Tt,$,N);return;case"select":yt=se=_e=mt=null;for($ in g)if(ze=g[$],g.hasOwnProperty($)&&ze!=null)switch($){case"value":break;case"multiple":yt=ze;default:_.hasOwnProperty($)||Er(c,f,$,null,_,ze)}for(N in _)if($=_[N],ze=g[N],_.hasOwnProperty(N)&&($!=null||ze!=null))switch(N){case"value":mt=$;break;case"defaultValue":_e=$;break;case"multiple":se=$;default:$!==ze&&Er(c,f,N,$,_,ze)}f=_e,g=se,_=yt,mt!=null?ul(c,!!g,mt,!1):!!_!=!!g&&(f!=null?ul(c,!!g,f,!0):ul(c,!!g,g?[]:"",!1));return;case"textarea":yt=mt=null;for(_e in g)if(N=g[_e],g.hasOwnProperty(_e)&&N!=null&&!_.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:Er(c,f,_e,null,_,N)}for(se in _)if(N=_[se],$=g[se],_.hasOwnProperty(se)&&(N!=null||$!=null))switch(se){case"value":mt=N;break;case"defaultValue":yt=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:N!==$&&Er(c,f,se,N,_,$)}pc(c,mt,yt);return;case"option":for(var Sn in g)if(mt=g[Sn],g.hasOwnProperty(Sn)&&mt!=null&&!_.hasOwnProperty(Sn))switch(Sn){case"selected":c.selected=!1;break;default:Er(c,f,Sn,null,_,mt)}for(ze in _)if(mt=_[ze],yt=g[ze],_.hasOwnProperty(ze)&&mt!==yt&&(mt!=null||yt!=null))switch(ze){case"selected":c.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:Er(c,f,ze,mt,_,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yn in g)mt=g[yn],g.hasOwnProperty(yn)&&mt!=null&&!_.hasOwnProperty(yn)&&Er(c,f,yn,null,_,mt);for(dt in _)if(mt=_[dt],yt=g[dt],_.hasOwnProperty(dt)&&mt!==yt&&(mt!=null||yt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:Er(c,f,dt,mt,_,yt)}return;default:if(Dp(f)){for(var Cr in g)mt=g[Cr],g.hasOwnProperty(Cr)&&mt!==void 0&&!_.hasOwnProperty(Cr)&&J_(c,f,Cr,void 0,_,mt);for(Tt in _)mt=_[Tt],yt=g[Tt],!_.hasOwnProperty(Tt)||mt===yt||mt===void 0&&yt===void 0||J_(c,f,Tt,mt,_,yt);return}}for(var at in g)mt=g[at],g.hasOwnProperty(at)&&mt!=null&&!_.hasOwnProperty(at)&&Er(c,f,at,null,_,mt);for(Ot in _)mt=_[Ot],yt=g[Ot],!_.hasOwnProperty(Ot)||mt===yt||mt==null&&yt==null||Er(c,f,Ot,mt,_,yt)}var Q_=null,eS=null;function tb(c){return c.nodeType===9?c:c.ownerDocument}function tI(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nI(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function tS(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var nS=null;function L7(){var c=window.event;return c&&c.type==="popstate"?c===nS?!1:(nS=c,!0):(nS=null,!1)}var rI=typeof setTimeout=="function"?setTimeout:void 0,$7=typeof clearTimeout=="function"?clearTimeout:void 0,aI=typeof Promise=="function"?Promise:void 0,B7=typeof queueMicrotask=="function"?queueMicrotask:typeof aI<"u"?function(c){return aI.resolve(null).then(c).catch(z7)}:rI;function z7(c){setTimeout(function(){throw c})}function Bc(c){return c==="head"}function iI(c,f){var g=f,_=0,N=0;do{var $=g.nextSibling;if(c.removeChild(g),$&&$.nodeType===8)if(g=$.data,g==="/$"){if(0<_&&8>_){g=_;var se=c.ownerDocument;if(g&1&&Sm(se.documentElement),g&2&&Sm(se.body),g&4)for(g=se.head,Sm(g),se=g.firstChild;se;){var _e=se.nextSibling,ze=se.nodeName;se[Lt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&se.rel.toLowerCase()==="stylesheet"||g.removeChild(se),se=_e}}if(N===0){c.removeChild($),Im(f);return}N--}else g==="$"||g==="$?"||g==="$!"?N++:_=g.charCodeAt(0)-48;else _=0;g=$}while(g);Im(f)}function rS(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":rS(g),Qt(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}c.removeChild(g)}}function U7(c,f,g,_){for(;c.nodeType===1;){var N=g;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!_&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(_){if(!c[Lt])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if($=c.getAttribute("rel"),$==="stylesheet"&&c.hasAttribute("data-precedence"))break;if($!==N.rel||c.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||c.getAttribute("title")!==(N.title==null?null:N.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if($=c.getAttribute("src"),($!==(N.src==null?null:N.src)||c.getAttribute("type")!==(N.type==null?null:N.type)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&$&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var $=N.name==null?null:""+N.name;if(N.type==="hidden"&&c.getAttribute("name")===$)return c}else return c;if(c=zs(c.nextSibling),c===null)break}return null}function H7(c,f,g){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!g||(c=zs(c.nextSibling),c===null))return null;return c}function aS(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function q7(c,f){var g=c.ownerDocument;if(c.data!=="$?"||g.readyState==="complete")f();else{var _=function(){f(),g.removeEventListener("DOMContentLoaded",_)};g.addEventListener("DOMContentLoaded",_),c._reactRetry=_}}function zs(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var iS=null;function sI(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return c;f--}else g==="/$"&&f++}c=c.previousSibling}return null}function oI(c,f,g){switch(f=tb(g),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Sm(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);Qt(c)}var ys=new Map,lI=new Set;function nb(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var jl=te.d;te.d={f:V7,r:G7,D:W7,C:K7,L:Z7,m:Y7,X:J7,S:X7,M:Q7};function V7(){var c=jl.f(),f=Wy();return c||f}function G7(c){var f=Wn(c);f!==null&&f.tag===5&&f.type==="form"?AN(f):jl.r(c)}var Yf=typeof document>"u"?null:document;function cI(c,f,g){var _=Yf;if(_&&typeof f=="string"&&f){var N=Xa(f);N='link[rel="'+c+'"][href="'+N+'"]',typeof g=="string"&&(N+='[crossorigin="'+g+'"]'),lI.has(N)||(lI.add(N),c={rel:c,crossOrigin:g,href:f},_.querySelector(N)===null&&(f=_.createElement("link"),Wa(f,"link",c),Fn(f),_.head.appendChild(f)))}}function W7(c){jl.D(c),cI("dns-prefetch",c,null)}function K7(c,f){jl.C(c,f),cI("preconnect",c,f)}function Z7(c,f,g){jl.L(c,f,g);var _=Yf;if(_&&c&&f){var N='link[rel="preload"][as="'+Xa(f)+'"]';f==="image"&&g&&g.imageSrcSet?(N+='[imagesrcset="'+Xa(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(N+='[imagesizes="'+Xa(g.imageSizes)+'"]')):N+='[href="'+Xa(c)+'"]';var $=N;switch(f){case"style":$=Xf(c);break;case"script":$=Jf(c)}ys.has($)||(c=d({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:c,as:f},g),ys.set($,c),_.querySelector(N)!==null||f==="style"&&_.querySelector(Em($))||f==="script"&&_.querySelector(Cm($))||(f=_.createElement("link"),Wa(f,"link",c),Fn(f),_.head.appendChild(f)))}}function Y7(c,f){jl.m(c,f);var g=Yf;if(g&&c){var _=f&&typeof f.as=="string"?f.as:"script",N='link[rel="modulepreload"][as="'+Xa(_)+'"][href="'+Xa(c)+'"]',$=N;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=Jf(c)}if(!ys.has($)&&(c=d({rel:"modulepreload",href:c},f),ys.set($,c),g.querySelector(N)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Cm($)))return}_=g.createElement("link"),Wa(_,"link",c),Fn(_),g.head.appendChild(_)}}}function X7(c,f,g){jl.S(c,f,g);var _=Yf;if(_&&c){var N=_r(_).hoistableStyles,$=Xf(c);f=f||"default";var se=N.get($);if(!se){var _e={loading:0,preload:null};if(se=_.querySelector(Em($)))_e.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},g),(g=ys.get($))&&sS(c,g);var ze=se=_.createElement("link");Fn(ze),Wa(ze,"link",c),ze._p=new Promise(function(dt,Tt){ze.onload=dt,ze.onerror=Tt}),ze.addEventListener("load",function(){_e.loading|=1}),ze.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,rb(se,f,_)}se={type:"stylesheet",instance:se,count:1,state:_e},N.set($,se)}}}function J7(c,f){jl.X(c,f);var g=Yf;if(g&&c){var _=_r(g).hoistableScripts,N=Jf(c),$=_.get(N);$||($=g.querySelector(Cm(N)),$||(c=d({src:c,async:!0},f),(f=ys.get(N))&&oS(c,f),$=g.createElement("script"),Fn($),Wa($,"link",c),g.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},_.set(N,$))}}function Q7(c,f){jl.M(c,f);var g=Yf;if(g&&c){var _=_r(g).hoistableScripts,N=Jf(c),$=_.get(N);$||($=g.querySelector(Cm(N)),$||(c=d({src:c,async:!0,type:"module"},f),(f=ys.get(N))&&oS(c,f),$=g.createElement("script"),Fn($),Wa($,"link",c),g.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},_.set(N,$))}}function uI(c,f,g,_){var N=(N=Me.current)?nb(N):null;if(!N)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=Xf(g.href),g=_r(N).hoistableStyles,_=g.get(f),_||(_={type:"style",instance:null,count:0,state:null},g.set(f,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){c=Xf(g.href);var $=_r(N).hoistableStyles,se=$.get(c);if(se||(N=N.ownerDocument||N,se={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(c,se),($=N.querySelector(Em(c)))&&!$._p&&(se.instance=$,se.state.loading=5),ys.has(c)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},ys.set(c,g),$||eU(N,c,g,se.state))),f&&_===null)throw Error(r(528,""));return se}if(f&&_!==null)throw Error(r(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Jf(g),g=_r(N).hoistableScripts,_=g.get(f),_||(_={type:"script",instance:null,count:0,state:null},g.set(f,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Xf(c){return'href="'+Xa(c)+'"'}function Em(c){return'link[rel="stylesheet"]['+c+"]"}function dI(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function eU(c,f,g,_){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?_.loading=1:(f=c.createElement("link"),_.preload=f,f.addEventListener("load",function(){return _.loading|=1}),f.addEventListener("error",function(){return _.loading|=2}),Wa(f,"link",g),Fn(f),c.head.appendChild(f))}function Jf(c){return'[src="'+Xa(c)+'"]'}function Cm(c){return"script[async]"+c}function fI(c,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var _=c.querySelector('style[data-href~="'+Xa(g.href)+'"]');if(_)return f.instance=_,Fn(_),_;var N=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return _=(c.ownerDocument||c).createElement("style"),Fn(_),Wa(_,"style",N),rb(_,g.precedence,c),f.instance=_;case"stylesheet":N=Xf(g.href);var $=c.querySelector(Em(N));if($)return f.state.loading|=4,f.instance=$,Fn($),$;_=dI(g),(N=ys.get(N))&&sS(_,N),$=(c.ownerDocument||c).createElement("link"),Fn($);var se=$;return se._p=new Promise(function(_e,ze){se.onload=_e,se.onerror=ze}),Wa($,"link",_),f.state.loading|=4,rb($,g.precedence,c),f.instance=$;case"script":return $=Jf(g.src),(N=c.querySelector(Cm($)))?(f.instance=N,Fn(N),N):(_=g,(N=ys.get($))&&(_=d({},g),oS(_,N)),c=c.ownerDocument||c,N=c.createElement("script"),Fn(N),Wa(N,"link",_),c.head.appendChild(N),f.instance=N);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(_=f.instance,f.state.loading|=4,rb(_,g.precedence,c));return f.instance}function rb(c,f,g){for(var _=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=_.length?_[_.length-1]:null,$=N,se=0;se<_.length;se++){var _e=_[se];if(_e.dataset.precedence===f)$=_e;else if($!==N)break}$?$.parentNode.insertBefore(c,$.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(c,f.firstChild))}function sS(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function oS(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var ab=null;function hI(c,f,g){if(ab===null){var _=new Map,N=ab=new Map;N.set(g,_)}else N=ab,_=N.get(g),_||(_=new Map,N.set(g,_));if(_.has(c))return _;for(_.set(c,null),g=g.getElementsByTagName(c),N=0;N<g.length;N++){var $=g[N];if(!($[Lt]||$[he]||c==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var se=$.getAttribute(f)||"";se=c+se;var _e=_.get(se);_e?_e.push($):_.set(se,[$])}}return _}function pI(c,f,g){c=c.ownerDocument||c,c.head.insertBefore(g,f==="title"?c.querySelector("head > title"):null)}function tU(c,f,g){if(g===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function mI(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var km=null;function nU(){}function rU(c,f,g){if(km===null)throw Error(r(475));var _=km;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var N=Xf(g.href),$=c.querySelector(Em(N));if($){c=$._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(_.count++,_=ib.bind(_),c.then(_,_)),f.state.loading|=4,f.instance=$,Fn($);return}$=c.ownerDocument||c,g=dI(g),(N=ys.get(N))&&sS(g,N),$=$.createElement("link"),Fn($);var se=$;se._p=new Promise(function(_e,ze){se.onload=_e,se.onerror=ze}),Wa($,"link",g),f.instance=$}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(_.count++,f=ib.bind(_),c.addEventListener("load",f),c.addEventListener("error",f))}}function aU(){if(km===null)throw Error(r(475));var c=km;return c.stylesheets&&c.count===0&&lS(c,c.stylesheets),0<c.count?function(f){var g=setTimeout(function(){if(c.stylesheets&&lS(c,c.stylesheets),c.unsuspend){var _=c.unsuspend;c.unsuspend=null,_()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(g)}}:null}function ib(){if(this.count--,this.count===0){if(this.stylesheets)lS(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var sb=null;function lS(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,sb=new Map,f.forEach(iU,c),sb=null,ib.call(c))}function iU(c,f){if(!(f.state.loading&4)){var g=sb.get(c);if(g)var _=g.get(null);else{g=new Map,sb.set(c,g);for(var N=c.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<N.length;$++){var se=N[$];(se.nodeName==="LINK"||se.getAttribute("media")!=="not all")&&(g.set(se.dataset.precedence,se),_=se)}_&&g.set(null,_)}N=f.instance,se=N.getAttribute("data-precedence"),$=g.get(se)||_,$===_&&g.set(null,N),g.set(se,N),this.count++,_=ib.bind(this),N.addEventListener("load",_),N.addEventListener("error",_),$?$.parentNode.insertBefore(N,$.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(N,c.firstChild)),f.state.loading|=4}}var Tm={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function sU(c,f,g,_,N,$,se,_e){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=_,this.onUncaughtError=N,this.onCaughtError=$,this.onRecoverableError=se,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function gI(c,f,g,_,N,$,se,_e,ze,dt,Tt,Ot){return c=new sU(c,f,g,se,_e,ze,dt,Ot),f=1,$===!0&&(f|=24),$=qi(3,null,null,f),c.current=$,$.stateNode=c,f=H1(),f.refCount++,c.pooledCache=f,f.refCount++,$.memoizedState={element:_,isDehydrated:g,cache:f},W1($),c}function yI(c){return c?(c=Eo,c):Eo}function bI(c,f,g,_,N,$){N=yI(N),_.context===null?_.context=N:_.pendingContext=N,_=Tc(f),_.payload={element:g},$=$===void 0?null:$,$!==null&&(_.callback=$),g=Ac(c,_,f),g!==null&&(Zi(g,c,f),rm(g,c,f))}function vI(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<f?g:f}}function cS(c,f){vI(c,f),(c=c.alternate)&&vI(c,f)}function wI(c){if(c.tag===13){var f=$s(c,67108864);f!==null&&Zi(f,c,67108864),cS(c,67108864)}}var ob=!0;function oU(c,f,g,_){var N=ae.T;ae.T=null;var $=te.p;try{te.p=2,uS(c,f,g,_)}finally{te.p=$,ae.T=N}}function lU(c,f,g,_){var N=ae.T;ae.T=null;var $=te.p;try{te.p=8,uS(c,f,g,_)}finally{te.p=$,ae.T=N}}function uS(c,f,g,_){if(ob){var N=dS(_);if(N===null)X_(c,f,_,lb,g),_I(c,_);else if(uU(N,c,f,g,_))_.stopPropagation();else if(_I(c,_),f&4&&-1<cU.indexOf(c)){for(;N!==null;){var $=Wn(N);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var se=be($.pendingLanes);if(se!==0){var _e=$;for(_e.pendingLanes|=2,_e.entangledLanes|=2;se;){var ze=1<<31-Zt(se);_e.entanglements[1]|=ze,se&=~ze}No($),(gr&6)===0&&(Vy=ue()+500,wm(0))}}break;case 13:_e=$s($,2),_e!==null&&Zi(_e,$,2),Wy(),cS($,2)}if($=dS(_),$===null&&X_(c,f,_,lb,g),$===N)break;N=$}N!==null&&_.stopPropagation()}else X_(c,f,_,null,g)}}function dS(c){return c=ff(c),fS(c)}var lb=null;function fS(c){if(lb=null,c=An(c),c!==null){var f=i(c);if(f===null)c=null;else{var g=f.tag;if(g===13){if(c=s(f),c!==null)return c;c=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return lb=c,null}function xI(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oe()){case ee:return 2;case xe:return 8;case Pe:case Ee:return 32;case We:return 268435456;default:return 32}default:return 32}}var hS=!1,zc=null,Uc=null,Hc=null,Am=new Map,Nm=new Map,qc=[],cU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _I(c,f){switch(c){case"focusin":case"focusout":zc=null;break;case"dragenter":case"dragleave":Uc=null;break;case"mouseover":case"mouseout":Hc=null;break;case"pointerover":case"pointerout":Am.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nm.delete(f.pointerId)}}function Rm(c,f,g,_,N,$){return c===null||c.nativeEvent!==$?(c={blockedOn:f,domEventName:g,eventSystemFlags:_,nativeEvent:$,targetContainers:[N]},f!==null&&(f=Wn(f),f!==null&&wI(f)),c):(c.eventSystemFlags|=_,f=c.targetContainers,N!==null&&f.indexOf(N)===-1&&f.push(N),c)}function uU(c,f,g,_,N){switch(f){case"focusin":return zc=Rm(zc,c,f,g,_,N),!0;case"dragenter":return Uc=Rm(Uc,c,f,g,_,N),!0;case"mouseover":return Hc=Rm(Hc,c,f,g,_,N),!0;case"pointerover":var $=N.pointerId;return Am.set($,Rm(Am.get($)||null,c,f,g,_,N)),!0;case"gotpointercapture":return $=N.pointerId,Nm.set($,Rm(Nm.get($)||null,c,f,g,_,N)),!0}return!1}function SI(c){var f=An(c.target);if(f!==null){var g=i(f);if(g!==null){if(f=g.tag,f===13){if(f=s(g),f!==null){c.blockedOn=f,H(c.priority,function(){if(g.tag===13){var _=Ki();_=jt(_);var N=$s(g,_);N!==null&&Zi(N,g,_),cS(g,_)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function cb(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var g=dS(c.nativeEvent);if(g===null){g=c.nativeEvent;var _=new g.constructor(g.type,g);cs=_,g.target.dispatchEvent(_),cs=null}else return f=Wn(g),f!==null&&wI(f),c.blockedOn=g,!1;f.shift()}return!0}function EI(c,f,g){cb(c)&&g.delete(f)}function dU(){hS=!1,zc!==null&&cb(zc)&&(zc=null),Uc!==null&&cb(Uc)&&(Uc=null),Hc!==null&&cb(Hc)&&(Hc=null),Am.forEach(EI),Nm.forEach(EI)}function ub(c,f){c.blockedOn===f&&(c.blockedOn=null,hS||(hS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dU)))}var db=null;function CI(c){db!==c&&(db=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){db===c&&(db=null);for(var f=0;f<c.length;f+=3){var g=c[f],_=c[f+1],N=c[f+2];if(typeof _!="function"){if(fS(_||g)===null)continue;break}var $=Wn(g);$!==null&&(c.splice(f,3),f-=3,f_($,{pending:!0,data:N,method:g.method,action:_},_,N))}}))}function Im(c){function f(ze){return ub(ze,c)}zc!==null&&ub(zc,c),Uc!==null&&ub(Uc,c),Hc!==null&&ub(Hc,c),Am.forEach(f),Nm.forEach(f);for(var g=0;g<qc.length;g++){var _=qc[g];_.blockedOn===c&&(_.blockedOn=null)}for(;0<qc.length&&(g=qc[0],g.blockedOn===null);)SI(g),g.blockedOn===null&&qc.shift();if(g=(c.ownerDocument||c).$$reactFormReplay,g!=null)for(_=0;_<g.length;_+=3){var N=g[_],$=g[_+1],se=N[Ne]||null;if(typeof $=="function")se||CI(g);else if(se){var _e=null;if($&&$.hasAttribute("formAction")){if(N=$,se=$[Ne]||null)_e=se.formAction;else if(fS(N)!==null)continue}else _e=se.action;typeof _e=="function"?g[_+1]=_e:(g.splice(_,3),_-=3),CI(g)}}}function pS(c){this._internalRoot=c}fb.prototype.render=pS.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var g=f.current,_=Ki();bI(g,_,c,f,null,null)},fb.prototype.unmount=pS.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;bI(c.current,2,null,c,null,null),Wy(),f[He]=null}};function fb(c){this._internalRoot=c}fb.prototype.unstable_scheduleHydration=function(c){if(c){var f=V();c={blockedOn:null,target:c,priority:f};for(var g=0;g<qc.length&&f!==0&&f<qc[g].priority;g++);qc.splice(g,0,c),g===0&&SI(c)}};var kI=t.version;if(kI!=="19.1.0")throw Error(r(527,kI,"19.1.0"));te.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var fU={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hb.isDisabled&&hb.supportsFiber)try{_t=hb.inject(fU),Ft=hb}catch{}}return Om.createRoot=function(c,f){if(!a(c))throw Error(r(299));var g=!1,_="",N=UN,$=HN,se=qN,_e=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(N=f.onUncaughtError),f.onCaughtError!==void 0&&($=f.onCaughtError),f.onRecoverableError!==void 0&&(se=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(_e=f.unstable_transitionCallbacks)),f=gI(c,1,!1,null,null,g,_,N,$,se,_e,null),c[He]=f.current,Y_(c),new pS(f)},Om.hydrateRoot=function(c,f,g){if(!a(c))throw Error(r(299));var _=!1,N="",$=UN,se=HN,_e=qN,ze=null,dt=null;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(N=g.identifierPrefix),g.onUncaughtError!==void 0&&($=g.onUncaughtError),g.onCaughtError!==void 0&&(se=g.onCaughtError),g.onRecoverableError!==void 0&&(_e=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(ze=g.unstable_transitionCallbacks),g.formState!==void 0&&(dt=g.formState)),f=gI(c,1,!0,f,g??null,_,N,$,se,_e,ze,dt),f.context=yI(null),g=f.current,_=Ki(),_=jt(_),N=Tc(_),N.callback=null,Ac(g,N,_),g=_,f.current.lanes=g,nt(f,g),No(f),c[He]=f.current,Y_(c),new fb(f)},Om.version="19.1.0",Om}var PI;function AU(){if(PI)return yS.exports;PI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yS.exports=TU(),yS.exports}var NU=AU();const RU=ui(NU);function FI(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function iu(...e){return t=>{let n=!1;const r=e.map(a=>{const i=FI(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():FI(e[a],null)}}}}function Cn(...e){return T.useCallback(iu(...e),e)}function su(e){const t=IU(e),n=T.forwardRef((r,a)=>{const{children:i,...s}=r,o=T.Children.toArray(i),l=o.find(OU);if(l){const u=l.props.children,d=o.map(h=>h===l?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return m.jsx(t,{...s,ref:a,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return m.jsx(t,{...s,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var j6=su("Slot");function IU(e){const t=T.forwardRef((n,r)=>{const{children:a,...i}=n;if(T.isValidElement(a)){const s=MU(a),o=DU(i,a.props);return a.type!==T.Fragment&&(o.ref=r?iu(r,s):s),T.cloneElement(a,o)}return T.Children.count(a)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var O6=Symbol("radix.slottable");function jU(e){const t=({children:n})=>m.jsx(m.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=O6,t}function OU(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===O6}function DU(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{i(...o),a(...o)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function MU(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function D6(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=D6(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function M6(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=D6(e))&&(r&&(r+=" "),r+=t);return r}const LI=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,$I=M6,ck=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return $I(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const p=LI(d)||LI(h);return a[u][p]}),o=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...y}=d;return Object.entries(y).every(v=>{let[b,w]=v;return Array.isArray(w)?w.includes({...i,...o}[b]):{...i,...o}[b]===w})?[...u,h,p]:u},[]);return $I(e,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},uk="-",PU=e=>{const t=LU(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const o=s.split(uk);return o[0]===""&&o.length!==1&&o.shift(),P6(o,t)||FU(s)},getConflictingClassGroupIds:(s,o)=>{const l=n[s]||[];return o&&r[s]?[...l,...r[s]]:l}}},P6=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?P6(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(uk);return(s=t.validators.find(({validator:o})=>o(i)))==null?void 0:s.classGroupId},BI=/^\[(.+)\]$/,FU=e=>{if(BI.test(e)){const t=BI.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},LU=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)F2(n[a],r,a,t);return r},F2=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:zI(t,a);i.classGroupId=n;return}if(typeof a=="function"){if($U(a)){F2(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,s])=>{F2(s,zI(t,i),n,r)})})},zI=(e,t)=>{let n=e;return t.split(uk).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$U=e=>e.isThemeGetter,BU=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return a(i,s),s},set(i,s){n.has(i)?n.set(i,s):a(i,s)}}},L2="!",$2=":",zU=$2.length,UU=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let s=0,o=0,l=0,u;for(let v=0;v<a.length;v++){let b=a[v];if(s===0&&o===0){if(b===$2){i.push(a.slice(l,v)),l=v+zU;continue}if(b==="/"){u=v;continue}}b==="["?s++:b==="]"?s--:b==="("?o++:b===")"&&o--}const d=i.length===0?a:a.substring(l),h=HU(d),p=h!==d,y=u&&u>l?u-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:y}};if(t){const a=t+$2,i=r;r=s=>s.startsWith(a)?i(s.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},HU=e=>e.endsWith(L2)?e.substring(0,e.length-1):e.startsWith(L2)?e.substring(1):e,qU=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(s=>{s[0]==="["||t[s]?(a.push(...i.sort(),s),i=[]):i.push(s)}),a.push(...i.sort()),a}},VU=e=>({cache:BU(e.cacheSize),parseClassName:UU(e),sortModifiers:qU(e),...PU(e)}),GU=/\s+/,WU=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,s=[],o=e.trim().split(GU);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{isExternal:h,modifiers:p,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:b}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let w=!!b,x=r(w?v.substring(0,b):v);if(!x){if(!w){l=d+(l.length>0?" "+l:l);continue}if(x=r(v),!x){l=d+(l.length>0?" "+l:l);continue}w=!1}const S=i(p).join(":"),E=y?S+L2:S,C=E+x;if(s.includes(C))continue;s.push(C);const k=a(x,w);for(let I=0;I<k.length;++I){const R=k[I];s.push(E+R)}l=d+(l.length>0?" "+l:l)}return l};function KU(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=F6(t))&&(r&&(r+=" "),r+=n);return r}const F6=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=F6(e[r]))&&(n&&(n+=" "),n+=t);return n};function ZU(e,...t){let n,r,a,i=s;function s(l){const u=t.reduce((d,h)=>h(d),e());return n=VU(u),r=n.cache.get,a=n.cache.set,i=o,o(l)}function o(l){const u=r(l);if(u)return u;const d=WU(l,n);return a(l,d),d}return function(){return i(KU.apply(null,arguments))}}const wa=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},L6=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,$6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,YU=/^\d+\/\d+$/,XU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,QU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qf=e=>YU.test(e),Un=e=>!!e&&!Number.isNaN(Number(e)),Gc=e=>!!e&&Number.isInteger(Number(e)),xS=e=>e.endsWith("%")&&Un(e.slice(0,-1)),Ol=e=>XU.test(e),nH=()=>!0,rH=e=>JU.test(e)&&!QU.test(e),B6=()=>!1,aH=e=>eH.test(e),iH=e=>tH.test(e),sH=e=>!on(e)&&!ln(e),oH=e=>Jh(e,H6,B6),on=e=>L6.test(e),cd=e=>Jh(e,q6,rH),_S=e=>Jh(e,fH,Un),UI=e=>Jh(e,z6,B6),lH=e=>Jh(e,U6,iH),pb=e=>Jh(e,V6,aH),ln=e=>$6.test(e),Dm=e=>Qh(e,q6),cH=e=>Qh(e,hH),HI=e=>Qh(e,z6),uH=e=>Qh(e,H6),dH=e=>Qh(e,U6),mb=e=>Qh(e,V6,!0),Jh=(e,t,n)=>{const r=L6.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Qh=(e,t,n=!1)=>{const r=$6.exec(e);return r?r[1]?t(r[1]):n:!1},z6=e=>e==="position"||e==="percentage",U6=e=>e==="image"||e==="url",H6=e=>e==="length"||e==="size"||e==="bg-size",q6=e=>e==="length",fH=e=>e==="number",hH=e=>e==="family-name",V6=e=>e==="shadow",pH=()=>{const e=wa("color"),t=wa("font"),n=wa("text"),r=wa("font-weight"),a=wa("tracking"),i=wa("leading"),s=wa("breakpoint"),o=wa("container"),l=wa("spacing"),u=wa("radius"),d=wa("shadow"),h=wa("inset-shadow"),p=wa("text-shadow"),y=wa("drop-shadow"),v=wa("blur"),b=wa("perspective"),w=wa("aspect"),x=wa("ease"),S=wa("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...C(),ln,on],I=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],j=()=>[ln,on,l],L=()=>[Qf,"full","auto",...j()],B=()=>[Gc,"none","subgrid",ln,on],Z=()=>["auto",{span:["full",Gc,ln,on]},Gc,ln,on],P=()=>[Gc,"auto",ln,on],K=()=>["auto","min","max","fr",ln,on],q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],de=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...j()],te=()=>[Qf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],X=()=>[e,ln,on],re=()=>[...C(),HI,UI,{position:[ln,on]}],D=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",uH,oH,{size:[ln,on]}],Q=()=>[xS,Dm,cd],ie=()=>["","none","full",u,ln,on],me=()=>["",Un,Dm,cd],ve=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>[Un,xS,HI,UI],Re=()=>["","none",v,ln,on],ke=()=>["none",Un,ln,on],Fe=()=>["none",Un,ln,on],et=()=>[Un,ln,on],Le=()=>[Qf,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ol],breakpoint:[Ol],color:[nH],container:[Ol],"drop-shadow":[Ol],ease:["in","out","in-out"],font:[sH],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ol],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ol],shadow:[Ol],spacing:["px",Un],text:[Ol],"text-shadow":[Ol],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Qf,on,ln,w]}],container:["container"],columns:[{columns:[Un,on,ln,o]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[Gc,"auto",ln,on]}],basis:[{basis:[Qf,"full","auto",o,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Un,Qf,"auto","initial","none",on]}],grow:[{grow:["",Un,ln,on]}],shrink:[{shrink:["",Un,ln,on]}],order:[{order:[Gc,"first","last","none",ln,on]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:Z()}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:Z()}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...q(),"normal"]}],"justify-items":[{"justify-items":[...de(),"normal"]}],"justify-self":[{"justify-self":["auto",...de()]}],"align-content":[{content:["normal",...q()]}],"align-items":[{items:[...de(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...de(),{baseline:["","last"]}]}],"place-content":[{"place-content":q()}],"place-items":[{"place-items":[...de(),"baseline"]}],"place-self":[{"place-self":["auto",...de()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[o,"screen",...te()]}],"min-w":[{"min-w":[o,"screen","none",...te()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...te()]}],h:[{h:["screen",...te()]}],"min-h":[{"min-h":["screen","none",...te()]}],"max-h":[{"max-h":["screen",...te()]}],"font-size":[{text:["base",n,Dm,cd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ln,_S]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",xS,on]}],"font-family":[{font:[cH,on,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ln,on]}],"line-clamp":[{"line-clamp":[Un,"none",ln,_S]}],leading:[{leading:[i,...j()]}],"list-image":[{"list-image":["none",ln,on]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ln,on]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[Un,"from-font","auto",ln,cd]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[Un,"auto",ln,on]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ln,on]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ln,on]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:D()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Gc,ln,on],radial:["",ln,on],conic:[Gc,ln,on]},dH,lH]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:ie()}],"rounded-s":[{"rounded-s":ie()}],"rounded-e":[{"rounded-e":ie()}],"rounded-t":[{"rounded-t":ie()}],"rounded-r":[{"rounded-r":ie()}],"rounded-b":[{"rounded-b":ie()}],"rounded-l":[{"rounded-l":ie()}],"rounded-ss":[{"rounded-ss":ie()}],"rounded-se":[{"rounded-se":ie()}],"rounded-ee":[{"rounded-ee":ie()}],"rounded-es":[{"rounded-es":ie()}],"rounded-tl":[{"rounded-tl":ie()}],"rounded-tr":[{"rounded-tr":ie()}],"rounded-br":[{"rounded-br":ie()}],"rounded-bl":[{"rounded-bl":ie()}],"border-w":[{border:me()}],"border-w-x":[{"border-x":me()}],"border-w-y":[{"border-y":me()}],"border-w-s":[{"border-s":me()}],"border-w-e":[{"border-e":me()}],"border-w-t":[{"border-t":me()}],"border-w-r":[{"border-r":me()}],"border-w-b":[{"border-b":me()}],"border-w-l":[{"border-l":me()}],"divide-x":[{"divide-x":me()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":me()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Un,ln,on]}],"outline-w":[{outline:["",Un,Dm,cd]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",d,mb,pb]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",h,mb,pb]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:me()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[Un,cd]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":me()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",p,mb,pb]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[Un,ln,on]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Un]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ae()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Ae()}],"mask-image-t-to-pos":[{"mask-t-to":Ae()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Ae()}],"mask-image-r-to-pos":[{"mask-r-to":Ae()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Ae()}],"mask-image-b-to-pos":[{"mask-b-to":Ae()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Ae()}],"mask-image-l-to-pos":[{"mask-l-to":Ae()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Ae()}],"mask-image-x-to-pos":[{"mask-x-to":Ae()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Ae()}],"mask-image-y-to-pos":[{"mask-y-to":Ae()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[ln,on]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ae()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Un]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ae()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:D()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ln,on]}],filter:[{filter:["","none",ln,on]}],blur:[{blur:Re()}],brightness:[{brightness:[Un,ln,on]}],contrast:[{contrast:[Un,ln,on]}],"drop-shadow":[{"drop-shadow":["","none",y,mb,pb]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",Un,ln,on]}],"hue-rotate":[{"hue-rotate":[Un,ln,on]}],invert:[{invert:["",Un,ln,on]}],saturate:[{saturate:[Un,ln,on]}],sepia:[{sepia:["",Un,ln,on]}],"backdrop-filter":[{"backdrop-filter":["","none",ln,on]}],"backdrop-blur":[{"backdrop-blur":Re()}],"backdrop-brightness":[{"backdrop-brightness":[Un,ln,on]}],"backdrop-contrast":[{"backdrop-contrast":[Un,ln,on]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Un,ln,on]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Un,ln,on]}],"backdrop-invert":[{"backdrop-invert":["",Un,ln,on]}],"backdrop-opacity":[{"backdrop-opacity":[Un,ln,on]}],"backdrop-saturate":[{"backdrop-saturate":[Un,ln,on]}],"backdrop-sepia":[{"backdrop-sepia":["",Un,ln,on]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ln,on]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Un,"initial",ln,on]}],ease:[{ease:["linear","initial",x,ln,on]}],delay:[{delay:[Un,ln,on]}],animate:[{animate:["none",S,ln,on]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,ln,on]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:ke()}],"rotate-x":[{"rotate-x":ke()}],"rotate-y":[{"rotate-y":ke()}],"rotate-z":[{"rotate-z":ke()}],scale:[{scale:Fe()}],"scale-x":[{"scale-x":Fe()}],"scale-y":[{"scale-y":Fe()}],"scale-z":[{"scale-z":Fe()}],"scale-3d":["scale-3d"],skew:[{skew:et()}],"skew-x":[{"skew-x":et()}],"skew-y":[{"skew-y":et()}],transform:[{transform:[ln,on,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ln,on]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ln,on]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[Un,Dm,cd,_S]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},mH=ZU(pH);function At(...e){return mH(M6(e))}const gH=ck("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Dt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?j6:"button";return m.jsx(i,{"data-slot":"button",className:At(gH({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bH=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),qI=e=>{const t=bH(e);return t.charAt(0).toUpperCase()+t.slice(1)},G6=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wH=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:s,...o},l)=>T.createElement("svg",{ref:l,...vH,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:G6("lucide",a),...o},[...s.map(([u,d])=>T.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=(e,t)=>{const n=T.forwardRef(({className:r,...a},i)=>T.createElement(wH,{ref:i,iconNode:t,className:G6(`lucide-${yH(qI(e))}`,`lucide-${e}`,r),...a}));return n.displayName=qI(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],_H=tn("archive",xH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],EH=tn("arrow-down",SH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],kH=tn("bot",CH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],dk=tn("brain-circuit",TH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],lo=tn("check",AH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rl=tn("chevron-down",NH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],W6=tn("chevron-right",RH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Hd=tn("chevron-up",IH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Kw=tn("chevrons-up-down",jH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nd=tn("circle-alert",OH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fk=tn("circle-check",DH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],K6=tn("circle",MH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],hk=tn("clipboard",PH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],LH=tn("clock",FH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Z6=tn("cloud-upload",$H);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Y6=tn("code",BH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],UH=tn("cog",zH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],qH=tn("coins",HH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],VI=tn("copy",VH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],bh=tn("download",GH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],KH=tn("file-archive",WH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],YH=tn("file-down",ZH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],JH=tn("file-json",XH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],eq=tn("file-question",QH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],nq=tn("file-text",tq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],aq=tn("file-up",rq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],sq=tn("file",iq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],lq=tn("folder-git",oq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],pk=tn("folder-plus",cq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],GI=tn("folder-tree",uq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],fq=tn("folder-up",dq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],l0=tn("folder",hq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Rd=tn("git-branch",pq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],gq=tn("git-commit-horizontal",mq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],bq=tn("git-merge",yq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],X6=tn("git-pull-request",vq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],xq=tn("grip-vertical",wq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],J6=tn("hard-drive",_q);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Eq=tn("house",Sq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Q6=tn("image",Cq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Tq=tn("info",kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],B2=tn("key",Aq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Pn=tn("loader-circle",Nq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],eD=tn("message-square-plus",Rq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],z2=tn("message-square",Iq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Oq=tn("music",jq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Mq=tn("panel-left-close",Dq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],Fq=tn("panel-right-close",Pq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],mk=tn("paperclip",Lq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],c0=tn("pen",$q);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qd=tn("plus",Bq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],WI=tn("puzzle",zq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Zw=tn("refresh-cw",Uq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],gk=tn("rotate-ccw",Hq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Vd=tn("save",qq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Wl=tn("search",Vq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],Wq=tn("send-horizontal",Gq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],KI=tn("server",Kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Rv=tn("settings",Zq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Xq=tn("sliders-horizontal",Yq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Qq=tn("sparkles",Jq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],yv=tn("square-pen",eV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],nV=tn("square",tV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],U2=tn("tags",rV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],iV=tn("text",aV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ns=tn("trash-2",sV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Yw=tn("triangle-alert",oV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],cV=tn("upload",lV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],dV=tn("user",uV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ZI=tn("users",fV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],pV=tn("video",hV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],tD=tn("wrench",mV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rs=tn("x",gV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],bV=tn("zap",yV),YI=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:m.jsx("div",{className:At(n),children:r.map(a=>{var s,o;const i=t==="trigger"?(s=a.triggerRenderer)==null?void 0:s.call(a):(o=a.renderer)==null?void 0:o.call(a);return i?m.jsx(gt.Fragment,{children:i},a.id):null})})},XI=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(y=>y(t,p))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,a,o);return o},vV=e=>e?XI(e):XI,wV=e=>e;function xV(e,t=wV){const n=gt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return gt.useDebugValue(n),n}const JI=e=>{const t=vV(e),n=r=>xV(t,r);return Object.assign(n,t),n},Is=e=>e?JI(e):JI;var nD=Symbol.for("immer-nothing"),QI=Symbol.for("immer-draftable"),hr=Symbol.for("immer-state");function Cs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var kh=Object.getPrototypeOf;function Th(e){return!!e&&!!e[hr]}function Kl(e){var t;return e?rD(e)||Array.isArray(e)||!!e[QI]||!!((t=e.constructor)!=null&&t[QI])||Jw(e)||Qw(e):!1}var _V=Object.prototype.constructor.toString();function rD(e){if(!e||typeof e!="object")return!1;const t=kh(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===_V}function rg(e,t){Xw(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Xw(e){const t=e[hr];return t?t.type_:Array.isArray(e)?1:Jw(e)?2:Qw(e)?3:0}function H2(e,t){return Xw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function aD(e,t,n){const r=Xw(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function SV(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Jw(e){return e instanceof Map}function Qw(e){return e instanceof Set}function Ma(e){return e.copy_||e.base_}function q2(e,t){if(Jw(e))return new Map(e);if(Qw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=rD(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[hr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const s=a[i],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(kh(e),r)}else{const r=kh(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function yk(e,t=!1){return ex(e)||Th(e)||!Kl(e)||(Xw(e)>1&&(e.set=e.add=e.clear=e.delete=EV),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>yk(r,!0))),e}function EV(){Cs(2)}function ex(e){return Object.isFrozen(e)}var V2={};function Id(e){const t=V2[e];return t||Cs(0,e),t}function CV(e,t){V2[e]||(V2[e]=t)}var ag;function Iv(){return ag}function kV(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function e3(e,t){t&&(Id("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function G2(e){W2(e),e.drafts_.forEach(TV),e.drafts_=null}function W2(e){e===ag&&(ag=e.parent_)}function t3(e){return ag=kV(ag,e)}function TV(e){const t=e[hr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function n3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[hr].modified_&&(G2(t),Cs(4)),Kl(e)&&(e=jv(t,e),t.parent_||Ov(t,e)),t.patches_&&Id("Patches").generateReplacementPatches_(n[hr].base_,e,t.patches_,t.inversePatches_)):e=jv(t,n,[]),G2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==nD?e:void 0}function jv(e,t,n){if(ex(t))return t;const r=t[hr];if(!r)return rg(t,(a,i)=>r3(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Ov(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,s=!1;r.type_===3&&(i=new Set(a),a.clear(),s=!0),rg(i,(o,l)=>r3(e,r,a,o,l,n,s)),Ov(e,a,!1),n&&e.patches_&&Id("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function r3(e,t,n,r,a,i,s){if(Th(a)){const o=i&&t&&t.type_!==3&&!H2(t.assigned_,r)?i.concat(r):void 0,l=jv(e,a,o);if(aD(n,r,l),Th(l))e.canAutoFreeze_=!1;else return}else s&&n.add(a);if(Kl(a)&&!ex(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;jv(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Ov(e,a)}}function Ov(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yk(t,n)}function AV(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Iv(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=bk;n&&(a=[r],i=ig);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,o}var bk={get(e,t){if(t===hr)return e;const n=Ma(e);if(!H2(n,t))return NV(e,n,t);const r=n[t];return e.finalized_||!Kl(r)?r:r===SS(e.base_,t)?(ES(e),e.copy_[t]=sg(r,e)):r},has(e,t){return t in Ma(e)},ownKeys(e){return Reflect.ownKeys(Ma(e))},set(e,t,n){const r=iD(Ma(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=SS(Ma(e),t),i=a==null?void 0:a[hr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(SV(n,a)&&(n!==void 0||H2(e.base_,t)))return!0;ES(e),Pl(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return SS(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ES(e),Pl(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ma(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Cs(11)},getPrototypeOf(e){return kh(e.base_)},setPrototypeOf(){Cs(12)}},ig={};rg(bk,(e,t)=>{ig[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ig.deleteProperty=function(e,t){return ig.set.call(this,e,t,void 0)};ig.set=function(e,t,n){return bk.set.call(this,e[0],t,n,e[0])};function SS(e,t){const n=e[hr];return(n?Ma(n):e)[t]}function NV(e,t,n){var a;const r=iD(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function iD(e,t){if(!(t in e))return;let n=kh(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=kh(n)}}function Pl(e){e.modified_||(e.modified_=!0,e.parent_&&Pl(e.parent_))}function ES(e){e.copy_||(e.copy_=q2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var RV=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(l=i,...u){return s.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&Cs(6),r!==void 0&&typeof r!="function"&&Cs(7);let a;if(Kl(t)){const i=t3(this),s=sg(t,void 0);let o=!0;try{a=n(s),o=!1}finally{o?G2(i):W2(i)}return e3(i,r),n3(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===nD&&(a=void 0),this.autoFreeze_&&yk(a,!0),r){const i=[],s=[];Id("Patches").generateReplacementPatches_(t,a,i,s),r(i,s)}return a}else Cs(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let r,a;return[this.produce(t,n,(s,o)=>{r=s,a=o}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Kl(e)||Cs(8),Th(e)&&(e=IV(e));const t=t3(this),n=sg(e,void 0);return n[hr].isManual_=!0,W2(t),n}finishDraft(e,t){const n=e&&e[hr];(!n||!n.isManual_)&&Cs(9);const{scope_:r}=n;return e3(r,t),n3(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=Id("Patches").applyPatches_;return Th(e)?r(e,t):this.produce(e,a=>r(a,t))}};function sg(e,t){const n=Jw(e)?Id("MapSet").proxyMap_(e,t):Qw(e)?Id("MapSet").proxySet_(e,t):AV(e,t);return(t?t.scope_:Iv()).drafts_.push(n),n}function IV(e){return Th(e)||Cs(10,e),sD(e)}function sD(e){if(!Kl(e)||ex(e))return e;const t=e[hr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=q2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=q2(e,!0);return rg(n,(r,a)=>{aD(n,r,sD(a))}),t&&(t.finalized_=!1),n}function jV(){class e extends Map{constructor(l,u){super(),this[hr]={type_:2,parent_:u,scope_:u?u.scope_:Iv(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Ma(this[hr]).size}has(l){return Ma(this[hr]).has(l)}set(l,u){const d=this[hr];return s(d),(!Ma(d).has(l)||Ma(d).get(l)!==u)&&(n(d),Pl(d),d.assigned_.set(l,!0),d.copy_.set(l,u),d.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const u=this[hr];return s(u),n(u),Pl(u),u.base_.has(l)?u.assigned_.set(l,!1):u.assigned_.delete(l),u.copy_.delete(l),!0}clear(){const l=this[hr];s(l),Ma(l).size&&(n(l),Pl(l),l.assigned_=new Map,rg(l.base_,u=>{l.assigned_.set(u,!1)}),l.copy_.clear())}forEach(l,u){const d=this[hr];Ma(d).forEach((h,p,y)=>{l.call(u,this.get(p),p,this)})}get(l){const u=this[hr];s(u);const d=Ma(u).get(l);if(u.finalized_||!Kl(d)||d!==u.base_.get(l))return d;const h=sg(d,u);return n(u),u.copy_.set(l,h),h}keys(){return Ma(this[hr]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=l.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=l.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(o,l){return new e(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class r extends Set{constructor(l,u){super(),this[hr]={type_:3,parent_:u,scope_:u?u.scope_:Iv(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Ma(this[hr]).size}has(l){const u=this[hr];return s(u),u.copy_?!!(u.copy_.has(l)||u.drafts_.has(l)&&u.copy_.has(u.drafts_.get(l))):u.base_.has(l)}add(l){const u=this[hr];return s(u),this.has(l)||(i(u),Pl(u),u.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const u=this[hr];return s(u),i(u),Pl(u),u.copy_.delete(l)||(u.drafts_.has(l)?u.copy_.delete(u.drafts_.get(l)):!1)}clear(){const l=this[hr];s(l),Ma(l).size&&(i(l),Pl(l),l.copy_.clear())}values(){const l=this[hr];return s(l),i(l),l.copy_.values()}entries(){const l=this[hr];return s(l),i(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,u){const d=this.values();let h=d.next();for(;!h.done;)l.call(u,h.value,h.value,this),h=d.next()}}function a(o,l){return new r(o,l)}function i(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(Kl(l)){const u=sg(l,o);o.drafts_.set(l,u),o.copy_.add(u)}else o.copy_.add(l)}))}function s(o){o.revoked_&&Cs(3,JSON.stringify(Ma(o)))}CV("MapSet",{proxyMap_:t,proxySet_:a})}var ss=new RV,OV=ss.produce;ss.produceWithPatches.bind(ss);ss.setAutoFreeze.bind(ss);ss.setUseStrictShallowCopy.bind(ss);ss.applyPatches.bind(ss);ss.createDraft.bind(ss);ss.finishDraft.bind(ss);const DV=e=>(t,n,r)=>(r.setState=(a,i,...s)=>{const o=typeof a=="function"?OV(a):a;return t(o,i,...s)},e(r.setState,n,r)),js=DV,Rr=Is(js((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const s={modId:r,callback:a,order:i};return e(o=>{o.middlewareRegistry[n]||(o.middlewareRegistry[n]=[]),o.middlewareRegistry[n].push(s),o.middlewareRegistry[n].sort((l,u)=>(l.order??0)-(u.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var s;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(o=>!(o.modId===r&&o.callback===a)),((s=i.middlewareRegistry[n])==null?void 0:s.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(s=>{s.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${s.tools[r].modId}". Overwriting with registration from mod "${n}".`),s.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var bv={exports:{}},MV=bv.exports,a3;function PV(){return a3||(a3=1,function(e,t){(function(n,r){e.exports=r()})(MV,function(){var n=function(A,M){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ne){Y.__proto__=ne}||function(Y,ne){for(var ce in ne)Object.prototype.hasOwnProperty.call(ne,ce)&&(Y[ce]=ne[ce])})(A,M)},r=function(){return(r=Object.assign||function(A){for(var M,Y=1,ne=arguments.length;Y<ne;Y++)for(var ce in M=arguments[Y])Object.prototype.hasOwnProperty.call(M,ce)&&(A[ce]=M[ce]);return A}).apply(this,arguments)};function a(A,M,Y){for(var ne,ce=0,we=M.length;ce<we;ce++)!ne&&ce in M||((ne=ne||Array.prototype.slice.call(M,0,ce))[ce]=M[ce]);return A.concat(ne||Array.prototype.slice.call(M))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:xd,s=Object.keys,o=Array.isArray;function l(A,M){return typeof M!="object"||s(M).forEach(function(Y){A[Y]=M[Y]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function h(A,M){return d.call(A,M)}function p(A,M){typeof M=="function"&&(M=M(u(A))),(typeof Reflect>"u"?s:Reflect.ownKeys)(M).forEach(function(Y){v(A,Y,M[Y])})}var y=Object.defineProperty;function v(A,M,Y,ne){y(A,M,l(Y&&h(Y,"get")&&typeof Y.get=="function"?{get:Y.get,set:Y.set,configurable:!0}:{value:Y,configurable:!0,writable:!0},ne))}function b(A){return{from:function(M){return A.prototype=Object.create(M.prototype),v(A.prototype,"constructor",A),{extend:p.bind(null,A.prototype)}}}}var w=Object.getOwnPropertyDescriptor,x=[].slice;function S(A,M,Y){return x.call(A,M,Y)}function E(A,M){return M(A)}function C(A){if(!A)throw new Error("Assertion Failed")}function k(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function I(A,M){if(typeof M=="string"&&h(A,M))return A[M];if(!M)return A;if(typeof M!="string"){for(var Y=[],ne=0,ce=M.length;ne<ce;++ne){var we=I(A,M[ne]);Y.push(we)}return Y}var De=M.indexOf(".");if(De!==-1){var $e=A[M.substr(0,De)];return $e==null?void 0:I($e,M.substr(De+1))}}function R(A,M,Y){if(A&&M!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof M!="string"&&"length"in M){C(typeof Y!="string"&&"length"in Y);for(var ne=0,ce=M.length;ne<ce;++ne)R(A,M[ne],Y[ne])}else{var we,De,$e=M.indexOf(".");$e!==-1?(we=M.substr(0,$e),(De=M.substr($e+1))===""?Y===void 0?o(A)&&!isNaN(parseInt(we))?A.splice(we,1):delete A[we]:A[we]=Y:R($e=!($e=A[we])||!h(A,we)?A[we]={}:$e,De,Y)):Y===void 0?o(A)&&!isNaN(parseInt(M))?A.splice(M,1):delete A[M]:A[M]=Y}}function j(A){var M,Y={};for(M in A)h(A,M)&&(Y[M]=A[M]);return Y}var L=[].concat;function B(A){return L.apply([],A)}var _t="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(B([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(M){return M+A+"Array"})}))).filter(function(A){return i[A]}),Z=new Set(_t.map(function(A){return i[A]})),P=null;function K(A){return P=new WeakMap,A=function M(Y){if(!Y||typeof Y!="object")return Y;var ne=P.get(Y);if(ne)return ne;if(o(Y)){ne=[],P.set(Y,ne);for(var ce=0,we=Y.length;ce<we;++ce)ne.push(M(Y[ce]))}else if(Z.has(Y.constructor))ne=Y;else{var De,$e=u(Y);for(De in ne=$e===Object.prototype?{}:Object.create($e),P.set(Y,ne),Y)h(Y,De)&&(ne[De]=M(Y[De]))}return ne}(A),P=null,A}var q={}.toString;function de(A){return q.call(A).slice(8,-1)}var ae=typeof Symbol<"u"?Symbol.iterator:"@@iterator",te=typeof ae=="symbol"?function(A){var M;return A!=null&&(M=A[ae])&&M.apply(A)}:function(){return null};function X(A,M){return M=A.indexOf(M),0<=M&&A.splice(M,1),0<=M}var re={};function D(A){var M,Y,ne,ce;if(arguments.length===1){if(o(A))return A.slice();if(this===re&&typeof A=="string")return[A];if(ce=te(A)){for(Y=[];!(ne=ce.next()).done;)Y.push(ne.value);return Y}if(A==null)return[A];if(typeof(M=A.length)!="number")return[A];for(Y=new Array(M);M--;)Y[M]=A[M];return Y}for(M=arguments.length,Y=new Array(M);M--;)Y[M]=arguments[M];return Y}var J=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},it=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],mi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(it),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ie(A,M){this.name=A,this.message=M}function me(A,M){return A+". Errors: "+Object.keys(M).map(function(Y){return M[Y].toString()}).filter(function(Y,ne,ce){return ce.indexOf(Y)===ne}).join(`
`)}function ve(A,M,Y,ne){this.failures=M,this.failedKeys=ne,this.successCount=Y,this.message=me(A,M)}function Me(A,M){this.name="BulkError",this.failures=Object.keys(M).map(function(Y){return M[Y]}),this.failuresByPos=M,this.message=me(A,this.failures)}b(ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ve).from(ie),b(Me).from(ie);var Ae=mi.reduce(function(A,M){return A[M]=M+"Error",A},{}),Re=ie,ke=mi.reduce(function(A,M){var Y=M+"Error";function ne(ce,we){this.name=Y,ce?typeof ce=="string"?(this.message="".concat(ce).concat(we?`
 `+we:""),this.inner=we||null):typeof ce=="object"&&(this.message="".concat(ce.name," ").concat(ce.message),this.inner=ce):(this.message=Q[M]||Y,this.inner=null)}return b(ne).from(Re),A[M]=ne,A},{});ke.Syntax=SyntaxError,ke.Type=TypeError,ke.Range=RangeError;var Fe=it.reduce(function(A,M){return A[M+"Error"]=ke[M],A},{}),et=mi.reduce(function(A,M){return["Syntax","Type","Range"].indexOf(M)===-1&&(A[M+"Error"]=ke[M]),A},{});function Le(){}function Ie(A){return A}function z(A,M){return A==null||A===Ie?M:function(Y){return M(A(Y))}}function Se(A,M){return function(){A.apply(this,arguments),M.apply(this,arguments)}}function Te(A,M){return A===Le?M:function(){var Y=A.apply(this,arguments);Y!==void 0&&(arguments[0]=Y);var ne=this.onsuccess,ce=this.onerror;this.onsuccess=null,this.onerror=null;var we=M.apply(this,arguments);return ne&&(this.onsuccess=this.onsuccess?Se(ne,this.onsuccess):ne),ce&&(this.onerror=this.onerror?Se(ce,this.onerror):ce),we!==void 0?we:Y}}function ue(A,M){return A===Le?M:function(){A.apply(this,arguments);var Y=this.onsuccess,ne=this.onerror;this.onsuccess=this.onerror=null,M.apply(this,arguments),Y&&(this.onsuccess=this.onsuccess?Se(Y,this.onsuccess):Y),ne&&(this.onerror=this.onerror?Se(ne,this.onerror):ne)}}function oe(A,M){return A===Le?M:function(Y){var ne=A.apply(this,arguments);l(Y,ne);var ce=this.onsuccess,we=this.onerror;return this.onsuccess=null,this.onerror=null,Y=M.apply(this,arguments),ce&&(this.onsuccess=this.onsuccess?Se(ce,this.onsuccess):ce),we&&(this.onerror=this.onerror?Se(we,this.onerror):we),ne===void 0?Y===void 0?void 0:Y:l(ne,Y)}}function ee(A,M){return A===Le?M:function(){return M.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function xe(A,M){return A===Le?M:function(){var Y=A.apply(this,arguments);if(Y&&typeof Y.then=="function"){for(var ne=this,ce=arguments.length,we=new Array(ce);ce--;)we[ce]=arguments[ce];return Y.then(function(){return M.apply(ne,we)})}return M.apply(this,arguments)}}et.ModifyError=ve,et.DexieError=ie,et.BulkError=Me;var Pe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ee(A){Pe=A}var We={},Nt=100,_t=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,u(A),A];var M=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[M,u(M),A]}(),it=_t[0],mi=_t[1],_t=_t[2],mi=mi&&mi.then,Ft=it&&it.constructor,Pt=!!_t,Zt=function(A,M){le.push([A,M]),O&&(queueMicrotask(pe),O=!1)},ye=!0,O=!0,G=[],fe=[],je=Ie,be={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Le,pgp:!1,env:{},finalize:Le},Ce=be,le=[],ft=0,vt=[];function F(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var M=this._PSD=Ce;if(typeof A!="function"){if(A!==We)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ge(this,this._value))}this._state=null,this._value=null,++M.ref,function Y(ne,ce){try{ce(function(we){if(ne._state===null){if(we===ne)throw new TypeError("A promise cannot be resolved with itself.");var De=ne._lib&&V();we&&typeof we.then=="function"?Y(ne,function($e,Ge){we instanceof F?we._then($e,Ge):we.then($e,Ge)}):(ne._state=!0,ne._value=we,Oe(ne)),De&&H()}},ge.bind(null,ne))}catch(we){ge(ne,we)}}(this,A)}var Be={get:function(){var A=Ce,M=Rt;function Y(ne,ce){var we=this,De=!A.global&&(A!==Ce||M!==Rt),$e=De&&!Wn(),Ge=new F(function(Xe,rt){Ke(we,new nt(go(ne,A,De,$e),go(ce,A,De,$e),Xe,rt,A))});return this._consoleTask&&(Ge._consoleTask=this._consoleTask),Ge}return Y.prototype=We,Y},set:function(A){v(this,"then",A&&A.prototype===We?Be:{get:function(){return A},set:Be.set})}};function nt(A,M,Y,ne,ce){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof M=="function"?M:null,this.resolve=Y,this.reject=ne,this.psd=ce}function ge(A,M){var Y,ne;fe.push(M),A._state===null&&(Y=A._lib&&V(),M=je(M),A._state=!1,A._value=M,ne=A,G.some(function(ce){return ce._value===ne._value})||G.push(ne),Oe(A),Y&&H())}function Oe(A){var M=A._listeners;A._listeners=[];for(var Y=0,ne=M.length;Y<ne;++Y)Ke(A,M[Y]);var ce=A._PSD;--ce.ref||ce.finalize(),ft===0&&(++ft,Zt(function(){--ft==0&&W()},[]))}function Ke(A,M){if(A._state!==null){var Y=A._state?M.onFulfilled:M.onRejected;if(Y===null)return(A._state?M.resolve:M.reject)(A._value);++M.psd.ref,++ft,Zt(jt,[Y,A,M])}else A._listeners.push(M)}function jt(A,M,Y){try{var ne,ce=M._value;!M._state&&fe.length&&(fe=[]),ne=Pe&&M._consoleTask?M._consoleTask.run(function(){return A(ce)}):A(ce),M._state||fe.indexOf(ce)!==-1||function(we){for(var De=G.length;De;)if(G[--De]._value===we._value)return G.splice(De,1)}(M),Y.resolve(ne)}catch(we){Y.reject(we)}finally{--ft==0&&W(),--Y.psd.ref||Y.psd.finalize()}}function pe(){mo(be,function(){V()&&H()})}function V(){var A=ye;return O=ye=!1,A}function H(){var A,M,Y;do for(;0<le.length;)for(A=le,le=[],Y=A.length,M=0;M<Y;++M){var ne=A[M];ne[0].apply(null,ne[1])}while(0<le.length);O=ye=!0}function W(){var A=G;G=[],A.forEach(function(ne){ne._PSD.onunhandled.call(null,ne._value,ne)});for(var M=vt.slice(0),Y=M.length;Y;)M[--Y]()}function he(A){return new F(We,!1,A)}function Ne(A,M){var Y=Ce;return function(){var ne=V(),ce=Ce;try{return Fn(Y,!0),A.apply(this,arguments)}catch(we){M&&M(we)}finally{Fn(ce,!1),ne&&H()}}}p(F.prototype,{then:Be,_then:function(A,M){Ke(this,new nt(null,null,A,M,Ce))},catch:function(A){if(arguments.length===1)return this.then(null,A);var M=A,Y=arguments[1];return typeof M=="function"?this.then(null,function(ne){return(ne instanceof M?Y:he)(ne)}):this.then(null,function(ne){return(ne&&ne.name===M?Y:he)(ne)})},finally:function(A){return this.then(function(M){return F.resolve(A()).then(function(){return M})},function(M){return F.resolve(A()).then(function(){return he(M)})})},timeout:function(A,M){var Y=this;return A<1/0?new F(function(ne,ce){var we=setTimeout(function(){return ce(new ke.Timeout(M))},A);Y.then(ne,ce).finally(clearTimeout.bind(null,we))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(F.prototype,Symbol.toStringTag,"Dexie.Promise"),be.env=fi(),p(F,{all:function(){var A=D.apply(null,arguments).map(xr);return new F(function(M,Y){A.length===0&&M([]);var ne=A.length;A.forEach(function(ce,we){return F.resolve(ce).then(function(De){A[we]=De,--ne||M(A)},Y)})})},resolve:function(A){return A instanceof F?A:A&&typeof A.then=="function"?new F(function(M,Y){A.then(M,Y)}):new F(We,!0,A)},reject:he,race:function(){var A=D.apply(null,arguments).map(xr);return new F(function(M,Y){A.map(function(ne){return F.resolve(ne).then(M,Y)})})},PSD:{get:function(){return Ce},set:function(A){return Ce=A}},totalEchoes:{get:function(){return Rt}},newPSD:Qt,usePSD:mo,scheduler:{get:function(){return Zt},set:function(A){Zt=A}},rejectionMapper:{get:function(){return je},set:function(A){je=A}},follow:function(A,M){return new F(function(Y,ne){return Qt(function(ce,we){var De=Ce;De.unhandleds=[],De.onunhandled=we,De.finalize=Se(function(){var $e,Ge=this;$e=function(){Ge.unhandleds.length===0?ce():we(Ge.unhandleds[0])},vt.push(function Xe(){$e(),vt.splice(vt.indexOf(Xe),1)}),++ft,Zt(function(){--ft==0&&W()},[])},De.finalize),A()},M,Y,ne)})}}),Ft&&(Ft.allSettled&&v(F,"allSettled",function(){var A=D.apply(null,arguments).map(xr);return new F(function(M){A.length===0&&M([]);var Y=A.length,ne=new Array(Y);A.forEach(function(ce,we){return F.resolve(ce).then(function(De){return ne[we]={status:"fulfilled",value:De}},function(De){return ne[we]={status:"rejected",reason:De}}).then(function(){return--Y||M(ne)})})})}),Ft.any&&typeof AggregateError<"u"&&v(F,"any",function(){var A=D.apply(null,arguments).map(xr);return new F(function(M,Y){A.length===0&&Y(new AggregateError([]));var ne=A.length,ce=new Array(ne);A.forEach(function(we,De){return F.resolve(we).then(function($e){return M($e)},function($e){ce[De]=$e,--ne||Y(new AggregateError(ce))})})})}),Ft.withResolvers&&(F.withResolvers=Ft.withResolvers));var He={awaits:0,echoes:0,id:0},pt=0,Kt=[],ut=0,Rt=0,Lt=0;function Qt(A,M,Y,ne){var ce=Ce,we=Object.create(ce);return we.parent=ce,we.ref=0,we.global=!1,we.id=++Lt,be.env,we.env=Pt?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,allSettled:F.allSettled,any:F.any,resolve:F.resolve,reject:F.reject}:{},M&&l(we,M),++ce.ref,we.finalize=function(){--this.parent.ref||this.parent.finalize()},ne=mo(we,A,Y,ne),we.ref===0&&we.finalize(),ne}function An(){return He.id||(He.id=++pt),++He.awaits,He.echoes+=Nt,He.id}function Wn(){return!!He.awaits&&(--He.awaits==0&&(He.id=0),He.echoes=He.awaits*Nt,!0)}function xr(A){return He.echoes&&A&&A.constructor===Ft?(An(),A.then(function(M){return Wn(),M},function(M){return Wn(),Kr(M)})):A}function _r(){var A=Kt[Kt.length-1];Kt.pop(),Fn(A,!1)}function Fn(A,M){var Y,ne=Ce;(M?!He.echoes||ut++&&A===Ce:!ut||--ut&&A===Ce)||queueMicrotask(M?(function(ce){++Rt,He.echoes&&--He.echoes!=0||(He.echoes=He.awaits=He.id=0),Kt.push(Ce),Fn(ce,!0)}).bind(null,A):_r),A!==Ce&&(Ce=A,ne===be&&(be.env=fi()),Pt&&(Y=be.env.Promise,M=A.env,(ne.global||A.global)&&(Object.defineProperty(i,"Promise",M.PromiseProp),Y.all=M.all,Y.race=M.race,Y.resolve=M.resolve,Y.reject=M.reject,M.allSettled&&(Y.allSettled=M.allSettled),M.any&&(Y.any=M.any))))}function fi(){var A=i.Promise;return Pt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function mo(A,M,Y,ne,ce){var we=Ce;try{return Fn(A,!0),M(Y,ne,ce)}finally{Fn(we,!1)}}function go(A,M,Y,ne){return typeof A!="function"?A:function(){var ce=Ce;Y&&An(),Fn(M,!0);try{return A.apply(this,arguments)}finally{Fn(ce,!1),ne&&queueMicrotask(Wn)}}}function yo(A){Promise===Ft&&He.echoes===0?ut===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+mi).indexOf("[native code]")===-1&&(An=Wn=Le);var Kr=F.reject,bo="",ls="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ay="String expected.",Fs=[],ll="__dbnames",Ui="readonly",Uu="readwrite";function vo(A,M){return A?M?function(){return A.apply(this,arguments)&&M.apply(this,arguments)}:A:M}var cl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function uc(A){return typeof A!="string"||/\./.test(A)?function(M){return M}:function(M){return M[A]===void 0&&A in M&&delete(M=K(M))[A],M}}function uf(){throw ke.Type()}function Kn(A,M){try{var Y=Np(A),ne=Np(M);if(Y!==ne)return Y==="Array"?1:ne==="Array"?-1:Y==="binary"?1:ne==="binary"?-1:Y==="string"?1:ne==="string"?-1:Y==="Date"?1:ne!=="Date"?NaN:-1;switch(Y){case"number":case"Date":case"string":return M<A?1:A<M?-1:0;case"binary":return function(ce,we){for(var De=ce.length,$e=we.length,Ge=De<$e?De:$e,Xe=0;Xe<Ge;++Xe)if(ce[Xe]!==we[Xe])return ce[Xe]<we[Xe]?-1:1;return De===$e?0:De<$e?-1:1}(hi(A),hi(M));case"Array":return function(ce,we){for(var De=ce.length,$e=we.length,Ge=De<$e?De:$e,Xe=0;Xe<Ge;++Xe){var rt=Kn(ce[Xe],we[Xe]);if(rt!==0)return rt}return De===$e?0:De<$e?-1:1}(A,M)}}catch{}return NaN}function Np(A){var M=typeof A;return M!="object"?M:ArrayBuffer.isView(A)?"binary":(A=de(A),A==="ArrayBuffer"?"binary":A)}function hi(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var Rp=(Ir.prototype._trans=function(A,M,Y){var ne=this._tx||Ce.trans,ce=this.name,we=Pe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function De(Xe,rt,qe){if(!qe.schema[ce])throw new ke.NotFound("Table "+ce+" not part of transaction");return M(qe.idbtrans,qe)}var $e=V();try{var Ge=ne&&ne.db._novip===this.db._novip?ne===Ce.trans?ne._promise(A,De,Y):Qt(function(){return ne._promise(A,De,Y)},{trans:ne,transless:Ce.transless||Ce}):function Xe(rt,qe,st,Ve){if(rt.idbdb&&(rt._state.openComplete||Ce.letThrough||rt._vip)){var tt=rt._createTransaction(qe,st,rt._dbSchema);try{tt.create(),rt._state.PR1398_maxLoop=3}catch(ot){return ot.name===Ae.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,qe,st,Ve)})):Kr(ot)}return tt._promise(qe,function(ot,Je){return Qt(function(){return Ce.trans=tt,Ve(ot,Je,tt)})}).then(function(ot){if(qe==="readwrite")try{tt.idbtrans.commit()}catch{}return qe==="readonly"?ot:tt._completion.then(function(){return ot})})}if(rt._state.openComplete)return Kr(new ke.DatabaseClosed(rt._state.dbOpenError));if(!rt._state.isBeingOpened){if(!rt._state.autoOpen)return Kr(new ke.DatabaseClosed);rt.open().catch(Le)}return rt._state.dbReadyPromise.then(function(){return Xe(rt,qe,st,Ve)})}(this.db,A,[this.name],De);return we&&(Ge._consoleTask=we,Ge=Ge.catch(function(Xe){return console.trace(Xe),Kr(Xe)})),Ge}finally{$e&&H()}},Ir.prototype.get=function(A,M){var Y=this;return A&&A.constructor===Object?this.where(A).first(M):A==null?Kr(new ke.Type("Invalid argument to Table.get()")):this._trans("readonly",function(ne){return Y.core.get({trans:ne,key:A}).then(function(ce){return Y.hook.reading.fire(ce)})}).then(M)},Ir.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(o(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var M=s(A);if(M.length===1)return this.where(M[0]).equals(A[M[0]]);var Y=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&M.every(function(Xe){return 0<=$e.keyPath.indexOf(Xe)})){for(var Ge=0;Ge<M.length;++Ge)if(M.indexOf($e.keyPath[Ge])===-1)return!1;return!0}return!1}).sort(function($e,Ge){return $e.keyPath.length-Ge.keyPath.length})[0];if(Y&&this.db._maxKey!==bo){var we=Y.keyPath.slice(0,M.length);return this.where(we).equals(we.map(function(Ge){return A[Ge]}))}!Y&&Pe&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(M.join("+"),"]"));var ne=this.schema.idxByName;function ce($e,Ge){return Kn($e,Ge)===0}var De=M.reduce(function(qe,Ge){var Xe=qe[0],rt=qe[1],qe=ne[Ge],st=A[Ge];return[Xe||qe,Xe||!qe?vo(rt,qe&&qe.multi?function(Ve){return Ve=I(Ve,Ge),o(Ve)&&Ve.some(function(tt){return ce(st,tt)})}:function(Ve){return ce(st,I(Ve,Ge))}):rt]},[null,null]),we=De[0],De=De[1];return we?this.where(we.name).equals(A[we.keyPath]).filter(De):Y?this.filter(De):this.where(M).equals("")},Ir.prototype.filter=function(A){return this.toCollection().and(A)},Ir.prototype.count=function(A){return this.toCollection().count(A)},Ir.prototype.offset=function(A){return this.toCollection().offset(A)},Ir.prototype.limit=function(A){return this.toCollection().limit(A)},Ir.prototype.each=function(A){return this.toCollection().each(A)},Ir.prototype.toArray=function(A){return this.toCollection().toArray(A)},Ir.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ir.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,o(A)?"[".concat(A.join("+"),"]"):A))},Ir.prototype.reverse=function(){return this.toCollection().reverse()},Ir.prototype.mapToClass=function(A){var M,Y=this.db,ne=this.name;function ce(){return M!==null&&M.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof uf&&(function(Ge,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");function rt(){this.constructor=Ge}n(Ge,Xe),Ge.prototype=Xe===null?Object.create(Xe):(rt.prototype=Xe.prototype,new rt)}(ce,M=A),Object.defineProperty(ce.prototype,"db",{get:function(){return Y},enumerable:!1,configurable:!0}),ce.prototype.table=function(){return ne},A=ce);for(var we=new Set,De=A.prototype;De;De=u(De))Object.getOwnPropertyNames(De).forEach(function(Ge){return we.add(Ge)});function $e(Ge){if(!Ge)return Ge;var Xe,rt=Object.create(A.prototype);for(Xe in Ge)if(!we.has(Xe))try{rt[Xe]=Ge[Xe]}catch{}return rt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),A},Ir.prototype.defineClass=function(){return this.mapToClass(function(A){l(this,A)})},Ir.prototype.add=function(A,M){var Y=this,ne=this.schema.primKey,ce=ne.auto,we=ne.keyPath,De=A;return we&&ce&&(De=uc(we)(A)),this._trans("readwrite",function($e){return Y.core.mutate({trans:$e,type:"add",keys:M!=null?[M]:null,values:[De]})}).then(function($e){return $e.numFailures?F.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{R(A,we,$e)}catch{}return $e})},Ir.prototype.update=function(A,M){return typeof A!="object"||o(A)?this.where(":id").equals(A).modify(M):(A=I(A,this.schema.primKey.keyPath),A===void 0?Kr(new ke.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(M))},Ir.prototype.put=function(A,M){var Y=this,ne=this.schema.primKey,ce=ne.auto,we=ne.keyPath,De=A;return we&&ce&&(De=uc(we)(A)),this._trans("readwrite",function($e){return Y.core.mutate({trans:$e,type:"put",values:[De],keys:M!=null?[M]:null})}).then(function($e){return $e.numFailures?F.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{R(A,we,$e)}catch{}return $e})},Ir.prototype.delete=function(A){var M=this;return this._trans("readwrite",function(Y){return M.core.mutate({trans:Y,type:"delete",keys:[A]})}).then(function(Y){return Y.numFailures?F.reject(Y.failures[0]):void 0})},Ir.prototype.clear=function(){var A=this;return this._trans("readwrite",function(M){return A.core.mutate({trans:M,type:"deleteRange",range:cl})}).then(function(M){return M.numFailures?F.reject(M.failures[0]):void 0})},Ir.prototype.bulkGet=function(A){var M=this;return this._trans("readonly",function(Y){return M.core.getMany({keys:A,trans:Y}).then(function(ne){return ne.map(function(ce){return M.hook.reading.fire(ce)})})})},Ir.prototype.bulkAdd=function(A,M,Y){var ne=this,ce=Array.isArray(M)?M:void 0,we=(Y=Y||(ce?void 0:M))?Y.allKeys:void 0;return this._trans("readwrite",function(De){var Xe=ne.schema.primKey,$e=Xe.auto,Xe=Xe.keyPath;if(Xe&&ce)throw new ke.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new ke.InvalidArgument("Arguments objects and keys must have the same length");var Ge=A.length,Xe=Xe&&$e?A.map(uc(Xe)):A;return ne.core.mutate({trans:De,type:"add",keys:ce,values:Xe,wantResults:we}).then(function(tt){var qe=tt.numFailures,st=tt.results,Ve=tt.lastResult,tt=tt.failures;if(qe===0)return we?st:Ve;throw new Me("".concat(ne.name,".bulkAdd(): ").concat(qe," of ").concat(Ge," operations failed"),tt)})})},Ir.prototype.bulkPut=function(A,M,Y){var ne=this,ce=Array.isArray(M)?M:void 0,we=(Y=Y||(ce?void 0:M))?Y.allKeys:void 0;return this._trans("readwrite",function(De){var Xe=ne.schema.primKey,$e=Xe.auto,Xe=Xe.keyPath;if(Xe&&ce)throw new ke.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new ke.InvalidArgument("Arguments objects and keys must have the same length");var Ge=A.length,Xe=Xe&&$e?A.map(uc(Xe)):A;return ne.core.mutate({trans:De,type:"put",keys:ce,values:Xe,wantResults:we}).then(function(tt){var qe=tt.numFailures,st=tt.results,Ve=tt.lastResult,tt=tt.failures;if(qe===0)return we?st:Ve;throw new Me("".concat(ne.name,".bulkPut(): ").concat(qe," of ").concat(Ge," operations failed"),tt)})})},Ir.prototype.bulkUpdate=function(A){var M=this,Y=this.core,ne=A.map(function(De){return De.key}),ce=A.map(function(De){return De.changes}),we=[];return this._trans("readwrite",function(De){return Y.getMany({trans:De,keys:ne,cache:"clone"}).then(function($e){var Ge=[],Xe=[];A.forEach(function(qe,st){var Ve=qe.key,tt=qe.changes,ot=$e[st];if(ot){for(var Je=0,ht=Object.keys(tt);Je<ht.length;Je++){var bt=ht[Je],wt=tt[bt];if(bt===M.schema.primKey.keyPath){if(Kn(wt,Ve)!==0)throw new ke.Constraint("Cannot update primary key in bulkUpdate()")}else R(ot,bt,wt)}we.push(st),Ge.push(Ve),Xe.push(ot)}});var rt=Ge.length;return Y.mutate({trans:De,type:"put",keys:Ge,values:Xe,updates:{keys:ne,changeSpecs:ce}}).then(function(qe){var st=qe.numFailures,Ve=qe.failures;if(st===0)return rt;for(var tt=0,ot=Object.keys(Ve);tt<ot.length;tt++){var Je,ht=ot[tt],bt=we[Number(ht)];bt!=null&&(Je=Ve[ht],delete Ve[ht],Ve[bt]=Je)}throw new Me("".concat(M.name,".bulkUpdate(): ").concat(st," of ").concat(rt," operations failed"),Ve)})})})},Ir.prototype.bulkDelete=function(A){var M=this,Y=A.length;return this._trans("readwrite",function(ne){return M.core.mutate({trans:ne,type:"delete",keys:A})}).then(function(De){var ce=De.numFailures,we=De.lastResult,De=De.failures;if(ce===0)return we;throw new Me("".concat(M.name,".bulkDelete(): ").concat(ce," of ").concat(Y," operations failed"),De)})},Ir);function Ir(){}function wo(A){function M(De,$e){if($e){for(var Ge=arguments.length,Xe=new Array(Ge-1);--Ge;)Xe[Ge-1]=arguments[Ge];return Y[De].subscribe.apply(null,Xe),A}if(typeof De=="string")return Y[De]}var Y={};M.addEventType=we;for(var ne=1,ce=arguments.length;ne<ce;++ne)we(arguments[ne]);return M;function we(De,$e,Ge){if(typeof De!="object"){var Xe;$e=$e||ee;var rt={subscribers:[],fire:Ge=Ge||Le,subscribe:function(qe){rt.subscribers.indexOf(qe)===-1&&(rt.subscribers.push(qe),rt.fire=$e(rt.fire,qe))},unsubscribe:function(qe){rt.subscribers=rt.subscribers.filter(function(st){return st!==qe}),rt.fire=rt.subscribers.reduce($e,Ge)}};return Y[De]=M[De]=rt}s(Xe=De).forEach(function(qe){var st=Xe[qe];if(o(st))we(qe,Xe[qe][0],Xe[qe][1]);else{if(st!=="asap")throw new ke.InvalidArgument("Invalid event config");var Ve=we(qe,Ie,function(){for(var tt=arguments.length,ot=new Array(tt);tt--;)ot[tt]=arguments[tt];Ve.subscribers.forEach(function(Je){k(function(){Je.apply(null,ot)})})})}})}}function dc(A,M){return b(M).from({prototype:A}),M}function Ls(A,M){return!(A.filter||A.algorithm||A.or)&&(M?A.justLimit:!A.replayFilter)}function Ip(A,M){A.filter=vo(A.filter,M)}function Xa(A,M,Y){var ne=A.replayFilter;A.replayFilter=ne?function(){return vo(ne(),M())}:M,A.justLimit=Y&&!ne}function fc(A,M){if(A.isPrimKey)return M.primaryKey;var Y=M.getIndexByKeyPath(A.index);if(!Y)throw new ke.Schema("KeyPath "+A.index+" on object store "+M.name+" is not indexed");return Y}function jp(A,M,Y){var ne=fc(A,M.schema);return M.openCursor({trans:Y,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:ne,range:A.range}})}function hc(A,M,Y,ne){var ce=A.replayFilter?vo(A.filter,A.replayFilter()):A.filter;if(A.or){var we={},De=function($e,Ge,Xe){var rt,qe;ce&&!ce(Ge,Xe,function(st){return Ge.stop(st)},function(st){return Ge.fail(st)})||((qe=""+(rt=Ge.primaryKey))=="[object ArrayBuffer]"&&(qe=""+new Uint8Array(rt)),h(we,qe)||(we[qe]=!0,M($e,Ge,Xe)))};return Promise.all([A.or._iterate(De,Y),ul(jp(A,ne,Y),A.algorithm,De,!A.keysOnly&&A.valueMapper)])}return ul(jp(A,ne,Y),vo(A.algorithm,ce),M,!A.keysOnly&&A.valueMapper)}function ul(A,M,Y,ne){var ce=Ne(ne?function(we,De,$e){return Y(ne(we),De,$e)}:Y);return A.then(function(we){if(we)return we.start(function(){var De=function(){return we.continue()};M&&!M(we,function($e){return De=$e},function($e){we.stop($e),De=Le},function($e){we.fail($e),De=Le})||ce(we.value,we,function($e){return De=$e}),De()})})}var pc=(Op.prototype.execute=function(A){var M=this["@@propmod"];if(M.add!==void 0){var Y=M.add;if(o(Y))return a(a([],o(A)?A:[],!0),Y).sort();if(typeof Y=="number")return(Number(A)||0)+Y;if(typeof Y=="bigint")try{return BigInt(A)+Y}catch{return BigInt(0)+Y}throw new TypeError("Invalid term ".concat(Y))}if(M.remove!==void 0){var ne=M.remove;if(o(ne))return o(A)?A.filter(function(ce){return!ne.includes(ce)}).sort():[];if(typeof ne=="number")return Number(A)-ne;if(typeof ne=="bigint")try{return BigInt(A)-ne}catch{return BigInt(0)-ne}throw new TypeError("Invalid subtrahend ".concat(ne))}return Y=(Y=M.replacePrefix)===null||Y===void 0?void 0:Y[0],Y&&typeof A=="string"&&A.startsWith(Y)?M.replacePrefix[1]+A.substring(Y.length):A},Op);function Op(A){this["@@propmod"]=A}var mc=(tr.prototype._read=function(A,M){var Y=this._ctx;return Y.error?Y.table._trans(null,Kr.bind(null,Y.error)):Y.table._trans("readonly",A).then(M)},tr.prototype._write=function(A){var M=this._ctx;return M.error?M.table._trans(null,Kr.bind(null,M.error)):M.table._trans("readwrite",A,"locked")},tr.prototype._addAlgorithm=function(A){var M=this._ctx;M.algorithm=vo(M.algorithm,A)},tr.prototype._iterate=function(A,M){return hc(this._ctx,A,M,this._ctx.table.core)},tr.prototype.clone=function(A){var M=Object.create(this.constructor.prototype),Y=Object.create(this._ctx);return A&&l(Y,A),M._ctx=Y,M},tr.prototype.raw=function(){return this._ctx.valueMapper=null,this},tr.prototype.each=function(A){var M=this._ctx;return this._read(function(Y){return hc(M,A,Y,M.table.core)})},tr.prototype.count=function(A){var M=this;return this._read(function(Y){var ne=M._ctx,ce=ne.table.core;if(Ls(ne,!0))return ce.count({trans:Y,query:{index:fc(ne,ce.schema),range:ne.range}}).then(function(De){return Math.min(De,ne.limit)});var we=0;return hc(ne,function(){return++we,!1},Y,ce).then(function(){return we})}).then(A)},tr.prototype.sortBy=function(A,M){var Y=A.split(".").reverse(),ne=Y[0],ce=Y.length-1;function we(Ge,Xe){return Xe?we(Ge[Y[Xe]],Xe-1):Ge[ne]}var De=this._ctx.dir==="next"?1:-1;function $e(Ge,Xe){return Kn(we(Ge,ce),we(Xe,ce))*De}return this.toArray(function(Ge){return Ge.sort($e)}).then(M)},tr.prototype.toArray=function(A){var M=this;return this._read(function(Y){var ne=M._ctx;if(ne.dir==="next"&&Ls(ne,!0)&&0<ne.limit){var ce=ne.valueMapper,we=fc(ne,ne.table.core.schema);return ne.table.core.query({trans:Y,limit:ne.limit,values:!0,query:{index:we,range:ne.range}}).then(function($e){return $e=$e.result,ce?$e.map(ce):$e})}var De=[];return hc(ne,function($e){return De.push($e)},Y,ne.table.core).then(function(){return De})},A)},tr.prototype.offset=function(A){var M=this._ctx;return A<=0||(M.offset+=A,Ls(M)?Xa(M,function(){var Y=A;return function(ne,ce){return Y===0||(Y===1?--Y:ce(function(){ne.advance(Y),Y=0}),!1)}}):Xa(M,function(){var Y=A;return function(){return--Y<0}})),this},tr.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),Xa(this._ctx,function(){var M=A;return function(Y,ne,ce){return--M<=0&&ne(ce),0<=M}},!0),this},tr.prototype.until=function(A,M){return Ip(this._ctx,function(Y,ne,ce){return!A(Y.value)||(ne(ce),M)}),this},tr.prototype.first=function(A){return this.limit(1).toArray(function(M){return M[0]}).then(A)},tr.prototype.last=function(A){return this.reverse().first(A)},tr.prototype.filter=function(A){var M;return Ip(this._ctx,function(Y){return A(Y.value)}),(M=this._ctx).isMatch=vo(M.isMatch,A),this},tr.prototype.and=function(A){return this.filter(A)},tr.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},tr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},tr.prototype.desc=function(){return this.reverse()},tr.prototype.eachKey=function(A){var M=this._ctx;return M.keysOnly=!M.isMatch,this.each(function(Y,ne){A(ne.key,ne)})},tr.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},tr.prototype.eachPrimaryKey=function(A){var M=this._ctx;return M.keysOnly=!M.isMatch,this.each(function(Y,ne){A(ne.primaryKey,ne)})},tr.prototype.keys=function(A){var M=this._ctx;M.keysOnly=!M.isMatch;var Y=[];return this.each(function(ne,ce){Y.push(ce.key)}).then(function(){return Y}).then(A)},tr.prototype.primaryKeys=function(A){var M=this._ctx;if(M.dir==="next"&&Ls(M,!0)&&0<M.limit)return this._read(function(ne){var ce=fc(M,M.table.core.schema);return M.table.core.query({trans:ne,values:!1,limit:M.limit,query:{index:ce,range:M.range}})}).then(function(ne){return ne.result}).then(A);M.keysOnly=!M.isMatch;var Y=[];return this.each(function(ne,ce){Y.push(ce.primaryKey)}).then(function(){return Y}).then(A)},tr.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},tr.prototype.firstKey=function(A){return this.limit(1).keys(function(M){return M[0]}).then(A)},tr.prototype.lastKey=function(A){return this.reverse().firstKey(A)},tr.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var M={};return Ip(this._ctx,function(ce){var ne=ce.primaryKey.toString(),ce=h(M,ne);return M[ne]=!0,!ce}),this},tr.prototype.modify=function(A){var M=this,Y=this._ctx;return this._write(function(ne){var ce,we,De;De=typeof A=="function"?A:(ce=s(A),we=ce.length,function(Je){for(var ht=!1,bt=0;bt<we;++bt){var wt=ce[bt],kt=A[wt],Ht=I(Je,wt);kt instanceof pc?(R(Je,wt,kt.execute(Ht)),ht=!0):Ht!==kt&&(R(Je,wt,kt),ht=!0)}return ht});var $e=Y.table.core,qe=$e.schema.primaryKey,Ge=qe.outbound,Xe=qe.extractKey,rt=200,qe=M.db._options.modifyChunkSize;qe&&(rt=typeof qe=="object"?qe[$e.name]||qe["*"]||200:qe);function st(Je,wt){var bt=wt.failures,wt=wt.numFailures;tt+=Je-wt;for(var kt=0,Ht=s(bt);kt<Ht.length;kt++){var Yt=Ht[kt];Ve.push(bt[Yt])}}var Ve=[],tt=0,ot=[];return M.clone().primaryKeys().then(function(Je){function ht(wt){var kt=Math.min(rt,Je.length-wt);return $e.getMany({trans:ne,keys:Je.slice(wt,wt+kt),cache:"immutable"}).then(function(Ht){for(var Yt=[],Bt=[],Vt=Ge?[]:null,Xt=[],zt=0;zt<kt;++zt){var nn=Ht[zt],pn={value:K(nn),primKey:Je[wt+zt]};De.call(pn,pn.value,pn)!==!1&&(pn.value==null?Xt.push(Je[wt+zt]):Ge||Kn(Xe(nn),Xe(pn.value))===0?(Bt.push(pn.value),Ge&&Vt.push(Je[wt+zt])):(Xt.push(Je[wt+zt]),Yt.push(pn.value)))}return Promise.resolve(0<Yt.length&&$e.mutate({trans:ne,type:"add",values:Yt}).then(function(gn){for(var Nn in gn.failures)Xt.splice(parseInt(Nn),1);st(Yt.length,gn)})).then(function(){return(0<Bt.length||bt&&typeof A=="object")&&$e.mutate({trans:ne,type:"put",keys:Vt,values:Bt,criteria:bt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<wt}).then(function(gn){return st(Bt.length,gn)})}).then(function(){return(0<Xt.length||bt&&A===df)&&$e.mutate({trans:ne,type:"delete",keys:Xt,criteria:bt,isAdditionalChunk:0<wt}).then(function(gn){return st(Xt.length,gn)})}).then(function(){return Je.length>wt+kt&&ht(wt+rt)})})}var bt=Ls(Y)&&Y.limit===1/0&&(typeof A!="function"||A===df)&&{index:Y.index,range:Y.range};return ht(0).then(function(){if(0<Ve.length)throw new ve("Error modifying one or more objects",Ve,tt,ot);return Je.length})})})},tr.prototype.delete=function(){var A=this._ctx,M=A.range;return Ls(A)&&(A.isPrimKey||M.type===3)?this._write(function(Y){var ne=A.table.core.schema.primaryKey,ce=M;return A.table.core.count({trans:Y,query:{index:ne,range:ce}}).then(function(we){return A.table.core.mutate({trans:Y,type:"deleteRange",range:ce}).then(function(De){var $e=De.failures;if(De.lastResult,De.results,De=De.numFailures,De)throw new ve("Could not delete some values",Object.keys($e).map(function(Ge){return $e[Ge]}),we-De);return we-De})})}):this.modify(df)},tr);function tr(){}var df=function(A,M){return M.value=null};function iy(A,M){return A<M?-1:A===M?0:1}function Dp(A,M){return M<A?-1:A===M?0:1}function pi(A,M,Y){return A=A instanceof fl?new A.Collection(A):A,A._ctx.error=new(Y||TypeError)(M),A}function gc(A){return new A.Collection(A,function(){return ff("")}).limit(0)}function dl(A,M,Y,ne){var ce,we,De,$e,Ge,Xe,rt,qe=Y.length;if(!Y.every(function(tt){return typeof tt=="string"}))return pi(A,ay);function st(tt){ce=tt==="next"?function(Je){return Je.toUpperCase()}:function(Je){return Je.toLowerCase()},we=tt==="next"?function(Je){return Je.toLowerCase()}:function(Je){return Je.toUpperCase()},De=tt==="next"?iy:Dp;var ot=Y.map(function(Je){return{lower:we(Je),upper:ce(Je)}}).sort(function(Je,ht){return De(Je.lower,ht.lower)});$e=ot.map(function(Je){return Je.upper}),Ge=ot.map(function(Je){return Je.lower}),rt=(Xe=tt)==="next"?"":ne}st("next"),A=new A.Collection(A,function(){return cs($e[0],Ge[qe-1]+ne)}),A._ondirectionchange=function(tt){st(tt)};var Ve=0;return A._addAlgorithm(function(tt,ot,Je){var ht=tt.key;if(typeof ht!="string")return!1;var bt=we(ht);if(M(bt,Ge,Ve))return!0;for(var wt=null,kt=Ve;kt<qe;++kt){var Ht=function(Yt,Bt,Vt,Xt,zt,nn){for(var pn=Math.min(Yt.length,Xt.length),gn=-1,Nn=0;Nn<pn;++Nn){var qa=Bt[Nn];if(qa!==Xt[Nn])return zt(Yt[Nn],Vt[Nn])<0?Yt.substr(0,Nn)+Vt[Nn]+Vt.substr(Nn+1):zt(Yt[Nn],Xt[Nn])<0?Yt.substr(0,Nn)+Xt[Nn]+Vt.substr(Nn+1):0<=gn?Yt.substr(0,gn)+Bt[gn]+Vt.substr(gn+1):null;zt(Yt[Nn],qa)<0&&(gn=Nn)}return pn<Xt.length&&nn==="next"?Yt+Vt.substr(Yt.length):pn<Yt.length&&nn==="prev"?Yt.substr(0,Vt.length):gn<0?null:Yt.substr(0,gn)+Xt[gn]+Vt.substr(gn+1)}(ht,bt,$e[kt],Ge[kt],De,Xe);Ht===null&&wt===null?Ve=kt+1:(wt===null||0<De(wt,Ht))&&(wt=Ht)}return ot(wt!==null?function(){tt.continue(wt+rt)}:Je),!1}),A}function cs(A,M,Y,ne){return{type:2,lower:A,upper:M,lowerOpen:Y,upperOpen:ne}}function ff(A){return{type:1,lower:A,upper:A}}var fl=(Object.defineProperty($r.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$r.prototype.between=function(A,M,Y,ne){Y=Y!==!1,ne=ne===!0;try{return 0<this._cmp(A,M)||this._cmp(A,M)===0&&(Y||ne)&&(!Y||!ne)?gc(this):new this.Collection(this,function(){return cs(A,M,!Y,!ne)})}catch{return pi(this,ls)}},$r.prototype.equals=function(A){return A==null?pi(this,ls):new this.Collection(this,function(){return ff(A)})},$r.prototype.above=function(A){return A==null?pi(this,ls):new this.Collection(this,function(){return cs(A,void 0,!0)})},$r.prototype.aboveOrEqual=function(A){return A==null?pi(this,ls):new this.Collection(this,function(){return cs(A,void 0,!1)})},$r.prototype.below=function(A){return A==null?pi(this,ls):new this.Collection(this,function(){return cs(void 0,A,!1,!0)})},$r.prototype.belowOrEqual=function(A){return A==null?pi(this,ls):new this.Collection(this,function(){return cs(void 0,A)})},$r.prototype.startsWith=function(A){return typeof A!="string"?pi(this,ay):this.between(A,A+bo,!0,!0)},$r.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):dl(this,function(M,Y){return M.indexOf(Y[0])===0},[A],bo)},$r.prototype.equalsIgnoreCase=function(A){return dl(this,function(M,Y){return M===Y[0]},[A],"")},$r.prototype.anyOfIgnoreCase=function(){var A=D.apply(re,arguments);return A.length===0?gc(this):dl(this,function(M,Y){return Y.indexOf(M)!==-1},A,"")},$r.prototype.startsWithAnyOfIgnoreCase=function(){var A=D.apply(re,arguments);return A.length===0?gc(this):dl(this,function(M,Y){return Y.some(function(ne){return M.indexOf(ne)===0})},A,bo)},$r.prototype.anyOf=function(){var A=this,M=D.apply(re,arguments),Y=this._cmp;try{M.sort(Y)}catch{return pi(this,ls)}if(M.length===0)return gc(this);var ne=new this.Collection(this,function(){return cs(M[0],M[M.length-1])});ne._ondirectionchange=function(we){Y=we==="next"?A._ascending:A._descending,M.sort(Y)};var ce=0;return ne._addAlgorithm(function(we,De,$e){for(var Ge=we.key;0<Y(Ge,M[ce]);)if(++ce===M.length)return De($e),!1;return Y(Ge,M[ce])===0||(De(function(){we.continue(M[ce])}),!1)}),ne},$r.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$r.prototype.noneOf=function(){var A=D.apply(re,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return pi(this,ls)}var M=A.reduce(function(Y,ne){return Y?Y.concat([[Y[Y.length-1][1],ne]]):[[-1/0,ne]]},null);return M.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(M,{includeLowers:!1,includeUppers:!1})},$r.prototype.inAnyRange=function(ht,M){var Y=this,ne=this._cmp,ce=this._ascending,we=this._descending,De=this._min,$e=this._max;if(ht.length===0)return gc(this);if(!ht.every(function(bt){return bt[0]!==void 0&&bt[1]!==void 0&&ce(bt[0],bt[1])<=0}))return pi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ke.InvalidArgument);var Ge=!M||M.includeLowers!==!1,Xe=M&&M.includeUppers===!0,rt,qe=ce;function st(bt,wt){return qe(bt[0],wt[0])}try{(rt=ht.reduce(function(bt,wt){for(var kt=0,Ht=bt.length;kt<Ht;++kt){var Yt=bt[kt];if(ne(wt[0],Yt[1])<0&&0<ne(wt[1],Yt[0])){Yt[0]=De(Yt[0],wt[0]),Yt[1]=$e(Yt[1],wt[1]);break}}return kt===Ht&&bt.push(wt),bt},[])).sort(st)}catch{return pi(this,ls)}var Ve=0,tt=Xe?function(bt){return 0<ce(bt,rt[Ve][1])}:function(bt){return 0<=ce(bt,rt[Ve][1])},ot=Ge?function(bt){return 0<we(bt,rt[Ve][0])}:function(bt){return 0<=we(bt,rt[Ve][0])},Je=tt,ht=new this.Collection(this,function(){return cs(rt[0][0],rt[rt.length-1][1],!Ge,!Xe)});return ht._ondirectionchange=function(bt){qe=bt==="next"?(Je=tt,ce):(Je=ot,we),rt.sort(st)},ht._addAlgorithm(function(bt,wt,kt){for(var Ht,Yt=bt.key;Je(Yt);)if(++Ve===rt.length)return wt(kt),!1;return!tt(Ht=Yt)&&!ot(Ht)||(Y._cmp(Yt,rt[Ve][1])===0||Y._cmp(Yt,rt[Ve][0])===0||wt(function(){qe===ce?bt.continue(rt[Ve][0]):bt.continue(rt[Ve][1])}),!1)}),ht},$r.prototype.startsWithAnyOf=function(){var A=D.apply(re,arguments);return A.every(function(M){return typeof M=="string"})?A.length===0?gc(this):this.inAnyRange(A.map(function(M){return[M,M+bo]})):pi(this,"startsWithAnyOf() only works with strings")},$r);function $r(){}function Hi(A){return Ne(function(M){return hl(M),A(M.target.error),!1})}function hl(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var yc="storagemutated",pl="x-storagemutated-1",Ta=wo(null,yc),Mp=(Ja.prototype._lock=function(){return C(!Ce.global),++this._reculock,this._reculock!==1||Ce.global||(Ce.lockOwnerFor=this),this},Ja.prototype._unlock=function(){if(C(!Ce.global),--this._reculock==0)for(Ce.global||(Ce.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{mo(A[1],A[0])}catch{}}return this},Ja.prototype._locked=function(){return this._reculock&&Ce.lockOwnerFor!==this},Ja.prototype.create=function(A){var M=this;if(!this.mode)return this;var Y=this.db.idbdb,ne=this.db._state.dbOpenError;if(C(!this.idbtrans),!A&&!Y)switch(ne&&ne.name){case"DatabaseClosedError":throw new ke.DatabaseClosed(ne);case"MissingAPIError":throw new ke.MissingAPI(ne.message,ne);default:throw new ke.OpenFailed(ne)}if(!this.active)throw new ke.TransactionInactive;return C(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||Y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ne(function(ce){hl(ce),M._reject(A.error)}),A.onabort=Ne(function(ce){hl(ce),M.active&&M._reject(new ke.Abort(A.error)),M.active=!1,M.on("abort").fire(ce)}),A.oncomplete=Ne(function(){M.active=!1,M._resolve(),"mutatedParts"in A&&Ta.storagemutated.fire(A.mutatedParts)}),this},Ja.prototype._promise=function(A,M,Y){var ne=this;if(A==="readwrite"&&this.mode!=="readwrite")return Kr(new ke.ReadOnly("Transaction is readonly"));if(!this.active)return Kr(new ke.TransactionInactive);if(this._locked())return new F(function(we,De){ne._blockedFuncs.push([function(){ne._promise(A,M,Y).then(we,De)},Ce])});if(Y)return Qt(function(){var we=new F(function(De,$e){ne._lock();var Ge=M(De,$e,ne);Ge&&Ge.then&&Ge.then(De,$e)});return we.finally(function(){return ne._unlock()}),we._lib=!0,we});var ce=new F(function(we,De){var $e=M(we,De,ne);$e&&$e.then&&$e.then(we,De)});return ce._lib=!0,ce},Ja.prototype._root=function(){return this.parent?this.parent._root():this},Ja.prototype.waitFor=function(A){var M,Y=this._root(),ne=F.resolve(A);Y._waitingFor?Y._waitingFor=Y._waitingFor.then(function(){return ne}):(Y._waitingFor=ne,Y._waitingQueue=[],M=Y.idbtrans.objectStore(Y.storeNames[0]),function we(){for(++Y._spinCount;Y._waitingQueue.length;)Y._waitingQueue.shift()();Y._waitingFor&&(M.get(-1/0).onsuccess=we)}());var ce=Y._waitingFor;return new F(function(we,De){ne.then(function($e){return Y._waitingQueue.push(Ne(we.bind(null,$e)))},function($e){return Y._waitingQueue.push(Ne(De.bind(null,$e)))}).finally(function(){Y._waitingFor===ce&&(Y._waitingFor=null)})})},Ja.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ke.Abort))},Ja.prototype.table=function(A){var M=this._memoizedTables||(this._memoizedTables={});if(h(M,A))return M[A];var Y=this.schema[A];if(!Y)throw new ke.NotFound("Table "+A+" not part of transaction");return Y=new this.db.Table(A,Y,this),Y.core=this.db.core.table(A),M[A]=Y},Ja);function Ja(){}function us(A,M,Y,ne,ce,we,De){return{name:A,keyPath:M,unique:Y,multi:ne,auto:ce,compound:we,src:(Y&&!De?"&":"")+(ne?"*":"")+(ce?"++":"")+hf(M)}}function hf(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function bc(A,M,Y){return{name:A,primKey:M,indexes:Y,mappedClass:null,idxByName:(ne=function(ce){return[ce.name,ce]},Y.reduce(function(ce,we,De){return De=ne(we,De),De&&(ce[De[0]]=De[1]),ce},{}))};var ne}var vc=function(A){try{return A.only([[]]),vc=function(){return[[]]},[[]]}catch{return vc=function(){return bo},bo}};function wc(A){return A==null?function(){}:typeof A=="string"?(M=A).split(".").length===1?function(Y){return Y[M]}:function(Y){return I(Y,M)}:function(Y){return I(Y,A)};var M}function Hu(A){return[].slice.call(A)}var sy=0;function ca(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function ml(A,M,Ge){function ne(Je){if(Je.type===3)return null;if(Je.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ve=Je.lower,tt=Je.upper,ot=Je.lowerOpen,Je=Je.upperOpen;return Ve===void 0?tt===void 0?null:M.upperBound(tt,!!Je):tt===void 0?M.lowerBound(Ve,!!ot):M.bound(Ve,tt,!!ot,!!Je)}function ce(st){var Ve,tt=st.name;return{name:tt,schema:st,mutate:function(ot){var Je=ot.trans,ht=ot.type,bt=ot.keys,wt=ot.values,kt=ot.range;return new Promise(function(Ht,Yt){Ht=Ne(Ht);var Bt=Je.objectStore(tt),Vt=Bt.keyPath==null,Xt=ht==="put"||ht==="add";if(!Xt&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var zt,nn=(bt||wt||{length:1}).length;if(bt&&wt&&bt.length!==wt.length)throw new Error("Given keys array must have same length as given values array.");if(nn===0)return Ht({numFailures:0,failures:{},results:[],lastResult:void 0});function pn(Na){++qa,hl(Na)}var gn=[],Nn=[],qa=0;if(ht==="deleteRange"){if(kt.type===4)return Ht({numFailures:qa,failures:Nn,results:[],lastResult:void 0});kt.type===3?gn.push(zt=Bt.clear()):gn.push(zt=Bt.delete(ne(kt)))}else{var Vt=Xt?Vt?[wt,bt]:[wt,null]:[bt,null],_n=Vt[0],aa=Vt[1];if(Xt)for(var ua=0;ua<nn;++ua)gn.push(zt=aa&&aa[ua]!==void 0?Bt[ht](_n[ua],aa[ua]):Bt[ht](_n[ua])),zt.onerror=pn;else for(ua=0;ua<nn;++ua)gn.push(zt=Bt[ht](_n[ua])),zt.onerror=pn}function $s(Na){Na=Na.target.result,gn.forEach(function(fs,Eo){return fs.error!=null&&(Nn[Eo]=fs.error)}),Ht({numFailures:qa,failures:Nn,results:ht==="delete"?bt:gn.map(function(fs){return fs.result}),lastResult:Na})}zt.onerror=function(Na){pn(Na),$s(Na)},zt.onsuccess=$s})},getMany:function(ot){var Je=ot.trans,ht=ot.keys;return new Promise(function(bt,wt){bt=Ne(bt);for(var kt,Ht=Je.objectStore(tt),Yt=ht.length,Bt=new Array(Yt),Vt=0,Xt=0,zt=function(gn){gn=gn.target,Bt[gn._pos]=gn.result,++Xt===Vt&&bt(Bt)},nn=Hi(wt),pn=0;pn<Yt;++pn)ht[pn]!=null&&((kt=Ht.get(ht[pn]))._pos=pn,kt.onsuccess=zt,kt.onerror=nn,++Vt);Vt===0&&bt(Bt)})},get:function(ot){var Je=ot.trans,ht=ot.key;return new Promise(function(bt,wt){bt=Ne(bt);var kt=Je.objectStore(tt).get(ht);kt.onsuccess=function(Ht){return bt(Ht.target.result)},kt.onerror=Hi(wt)})},query:(Ve=Xe,function(ot){return new Promise(function(Je,ht){Je=Ne(Je);var bt,wt,kt,Vt=ot.trans,Ht=ot.values,Yt=ot.limit,zt=ot.query,Bt=Yt===1/0?void 0:Yt,Xt=zt.index,zt=zt.range,Vt=Vt.objectStore(tt),Xt=Xt.isPrimaryKey?Vt:Vt.index(Xt.name),zt=ne(zt);if(Yt===0)return Je({result:[]});Ve?((Bt=Ht?Xt.getAll(zt,Bt):Xt.getAllKeys(zt,Bt)).onsuccess=function(nn){return Je({result:nn.target.result})},Bt.onerror=Hi(ht)):(bt=0,wt=!Ht&&"openKeyCursor"in Xt?Xt.openKeyCursor(zt):Xt.openCursor(zt),kt=[],wt.onsuccess=function(nn){var pn=wt.result;return pn?(kt.push(Ht?pn.value:pn.primaryKey),++bt===Yt?Je({result:kt}):void pn.continue()):Je({result:kt})},wt.onerror=Hi(ht))})}),openCursor:function(ot){var Je=ot.trans,ht=ot.values,bt=ot.query,wt=ot.reverse,kt=ot.unique;return new Promise(function(Ht,Yt){Ht=Ne(Ht);var Xt=bt.index,Bt=bt.range,Vt=Je.objectStore(tt),Vt=Xt.isPrimaryKey?Vt:Vt.index(Xt.name),Xt=wt?kt?"prevunique":"prev":kt?"nextunique":"next",zt=!ht&&"openKeyCursor"in Vt?Vt.openKeyCursor(ne(Bt),Xt):Vt.openCursor(ne(Bt),Xt);zt.onerror=Hi(Yt),zt.onsuccess=Ne(function(nn){var pn,gn,Nn,qa,_n=zt.result;_n?(_n.___id=++sy,_n.done=!1,pn=_n.continue.bind(_n),gn=(gn=_n.continuePrimaryKey)&&gn.bind(_n),Nn=_n.advance.bind(_n),qa=function(){throw new Error("Cursor not stopped")},_n.trans=Je,_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=function(){throw new Error("Cursor not started")},_n.fail=Ne(Yt),_n.next=function(){var aa=this,ua=1;return this.start(function(){return ua--?aa.continue():aa.stop()}).then(function(){return aa})},_n.start=function(aa){function ua(){if(zt.result)try{aa()}catch(Na){_n.fail(Na)}else _n.done=!0,_n.start=function(){throw new Error("Cursor behind last entry")},_n.stop()}var $s=new Promise(function(Na,fs){Na=Ne(Na),zt.onerror=Hi(fs),_n.fail=fs,_n.stop=function(Eo){_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=qa,Na(Eo)}});return zt.onsuccess=Ne(function(Na){zt.onsuccess=ua,ua()}),_n.continue=pn,_n.continuePrimaryKey=gn,_n.advance=Nn,ua(),$s},Ht(_n)):Ht(null)},Yt)})},count:function(ot){var Je=ot.query,ht=ot.trans,bt=Je.index,wt=Je.range;return new Promise(function(kt,Ht){var Yt=ht.objectStore(tt),Bt=bt.isPrimaryKey?Yt:Yt.index(bt.name),Yt=ne(wt),Bt=Yt?Bt.count(Yt):Bt.count();Bt.onsuccess=Ne(function(Vt){return kt(Vt.target.result)}),Bt.onerror=Hi(Ht)})}}}var we,De,$e,rt=(De=Ge,$e=Hu((we=A).objectStoreNames),{schema:{name:we.name,tables:$e.map(function(st){return De.objectStore(st)}).map(function(st){var Ve=st.keyPath,Je=st.autoIncrement,tt=o(Ve),ot={},Je={name:st.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ve==null,compound:tt,keyPath:Ve,autoIncrement:Je,unique:!0,extractKey:wc(Ve)},indexes:Hu(st.indexNames).map(function(ht){return st.index(ht)}).map(function(kt){var bt=kt.name,wt=kt.unique,Ht=kt.multiEntry,kt=kt.keyPath,Ht={name:bt,compound:o(kt),keyPath:kt,unique:wt,multiEntry:Ht,extractKey:wc(kt)};return ot[ca(kt)]=Ht}),getIndexByKeyPath:function(ht){return ot[ca(ht)]}};return ot[":id"]=Je.primaryKey,Ve!=null&&(ot[ca(Ve)]=Je.primaryKey),Je})},hasGetAll:0<$e.length&&"getAll"in De.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Ge=rt.schema,Xe=rt.hasGetAll,rt=Ge.tables.map(ce),qe={};return rt.forEach(function(st){return qe[st.name]=st}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(st){if(!qe[st])throw new Error("Table '".concat(st,"' not found"));return qe[st]},MIN_KEY:-1/0,MAX_KEY:vc(M),schema:Ge}}function pf(A,M,Y,ne){var ce=Y.IDBKeyRange;return Y.indexedDB,{dbcore:(ne=ml(M,ce,ne),A.dbcore.reduce(function(we,De){return De=De.create,r(r({},we),De(we))},ne))}}function xo(A,ne){var Y=ne.db,ne=pf(A._middlewares,Y,A._deps,ne);A.core=ne.dbcore,A.tables.forEach(function(ce){var we=ce.name;A.core.schema.tables.some(function(De){return De.name===we})&&(ce.core=A.core.table(we),A[we]instanceof A.Table&&(A[we].core=ce.core))})}function mf(A,M,Y,ne){Y.forEach(function(ce){var we=ne[ce];M.forEach(function(De){var $e=function Ge(Xe,rt){return w(Xe,rt)||(Xe=u(Xe))&&Ge(Xe,rt)}(De,ce);(!$e||"value"in $e&&$e.value===void 0)&&(De===A.Transaction.prototype||De instanceof A.Transaction?v(De,ce,{get:function(){return this.table(ce)},set:function(Ge){y(this,ce,{value:Ge,writable:!0,configurable:!0,enumerable:!0})}}):De[ce]=new A.Table(ce,we))})})}function qu(A,M){M.forEach(function(Y){for(var ne in Y)Y[ne]instanceof A.Table&&delete Y[ne]})}function Pp(A,M){return A._cfg.version-M._cfg.version}function Vu(A,M,Y,ne){var ce=A._dbSchema;Y.objectStoreNames.contains("$meta")&&!ce.$meta&&(ce.$meta=bc("$meta",ly("")[0],[]),A._storeNames.push("$meta"));var we=A._createTransaction("readwrite",A._storeNames,ce);we.create(Y),we._completion.catch(ne);var De=we._reject.bind(we),$e=Ce.transless||Ce;Qt(function(){return Ce.trans=we,Ce.transless=$e,M!==0?(xo(A,Y),Xe=M,((Ge=we).storeNames.includes("$meta")?Ge.table("$meta").get("version").then(function(rt){return rt??Xe}):F.resolve(Xe)).then(function(rt){return st=rt,Ve=we,tt=Y,ot=[],rt=(qe=A)._versions,Je=qe._dbSchema=xc(0,qe.idbdb,tt),(rt=rt.filter(function(ht){return ht._cfg.version>=st})).length!==0?(rt.forEach(function(ht){ot.push(function(){var bt=Je,wt=ht._cfg.dbschema;vf(qe,bt,tt),vf(qe,wt,tt),Je=qe._dbSchema=wt;var kt=yf(bt,wt);kt.add.forEach(function(Xt){Fp(tt,Xt[0],Xt[1].primKey,Xt[1].indexes)}),kt.change.forEach(function(Xt){if(Xt.recreate)throw new ke.Upgrade("Not yet support for changing primary key");var zt=tt.objectStore(Xt.name);Xt.add.forEach(function(nn){return bf(zt,nn)}),Xt.change.forEach(function(nn){zt.deleteIndex(nn.name),bf(zt,nn)}),Xt.del.forEach(function(nn){return zt.deleteIndex(nn)})});var Ht=ht._cfg.contentUpgrade;if(Ht&&ht._cfg.version>st){xo(qe,tt),Ve._memoizedTables={};var Yt=j(wt);kt.del.forEach(function(Xt){Yt[Xt]=bt[Xt]}),qu(qe,[qe.Transaction.prototype]),mf(qe,[qe.Transaction.prototype],s(Yt),Yt),Ve.schema=Yt;var Bt,Vt=J(Ht);return Vt&&An(),kt=F.follow(function(){var Xt;(Bt=Ht(Ve))&&Vt&&(Xt=Wn.bind(null,null),Bt.then(Xt,Xt))}),Bt&&typeof Bt.then=="function"?F.resolve(Bt):kt.then(function(){return Bt})}}),ot.push(function(bt){var wt,kt,Ht=ht._cfg.dbschema;wt=Ht,kt=bt,[].slice.call(kt.db.objectStoreNames).forEach(function(Yt){return wt[Yt]==null&&kt.db.deleteObjectStore(Yt)}),qu(qe,[qe.Transaction.prototype]),mf(qe,[qe.Transaction.prototype],qe._storeNames,qe._dbSchema),Ve.schema=qe._dbSchema}),ot.push(function(bt){qe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(qe.idbdb.version/10)===ht._cfg.version?(qe.idbdb.deleteObjectStore("$meta"),delete qe._dbSchema.$meta,qe._storeNames=qe._storeNames.filter(function(wt){return wt!=="$meta"})):bt.objectStore("$meta").put(ht._cfg.version,"version"))})}),function ht(){return ot.length?F.resolve(ot.shift()(Ve.idbtrans)).then(ht):F.resolve()}().then(function(){oy(Je,tt)})):F.resolve();var qe,st,Ve,tt,ot,Je}).catch(De)):(s(ce).forEach(function(rt){Fp(Y,rt,ce[rt].primKey,ce[rt].indexes)}),xo(A,Y),void F.follow(function(){return A.on.populate.fire(we)}).catch(De));var Ge,Xe})}function gf(A,M){oy(A._dbSchema,M),M.db.version%10!=0||M.objectStoreNames.contains("$meta")||M.db.createObjectStore("$meta").add(Math.ceil(M.db.version/10-1),"version");var Y=xc(0,A.idbdb,M);vf(A,A._dbSchema,M);for(var ne=0,ce=yf(Y,A._dbSchema).change;ne<ce.length;ne++){var we=function(De){if(De.change.length||De.recreate)return console.warn("Unable to patch indexes of table ".concat(De.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=M.objectStore(De.name);De.add.forEach(function(Ge){Pe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(De.name,".").concat(Ge.src)),bf($e,Ge)})}(ce[ne]);if(typeof we=="object")return we.value}}function yf(A,M){var Y,ne={del:[],add:[],change:[]};for(Y in A)M[Y]||ne.del.push(Y);for(Y in M){var ce=A[Y],we=M[Y];if(ce){var De={name:Y,def:we,recreate:!1,del:[],add:[],change:[]};if(""+(ce.primKey.keyPath||"")!=""+(we.primKey.keyPath||"")||ce.primKey.auto!==we.primKey.auto)De.recreate=!0,ne.change.push(De);else{var $e=ce.idxByName,Ge=we.idxByName,Xe=void 0;for(Xe in $e)Ge[Xe]||De.del.push(Xe);for(Xe in Ge){var rt=$e[Xe],qe=Ge[Xe];rt?rt.src!==qe.src&&De.change.push(qe):De.add.push(qe)}(0<De.del.length||0<De.add.length||0<De.change.length)&&ne.change.push(De)}}else ne.add.push([Y,we])}return ne}function Fp(A,M,Y,ne){var ce=A.db.createObjectStore(M,Y.keyPath?{keyPath:Y.keyPath,autoIncrement:Y.auto}:{autoIncrement:Y.auto});return ne.forEach(function(we){return bf(ce,we)}),ce}function oy(A,M){s(A).forEach(function(Y){M.db.objectStoreNames.contains(Y)||(Pe&&console.debug("Dexie: Creating missing table",Y),Fp(M,Y,A[Y].primKey,A[Y].indexes))})}function bf(A,M){A.createIndex(M.name,M.keyPath,{unique:M.unique,multiEntry:M.multi})}function xc(A,M,Y){var ne={};return S(M.objectStoreNames,0).forEach(function(ce){for(var we=Y.objectStore(ce),De=us(hf(Xe=we.keyPath),Xe||"",!0,!1,!!we.autoIncrement,Xe&&typeof Xe!="string",!0),$e=[],Ge=0;Ge<we.indexNames.length;++Ge){var rt=we.index(we.indexNames[Ge]),Xe=rt.keyPath,rt=us(rt.name,Xe,!!rt.unique,!!rt.multiEntry,!1,Xe&&typeof Xe!="string",!1);$e.push(rt)}ne[ce]=bc(ce,De,$e)}),ne}function vf(A,M,Y){for(var ne=Y.db.objectStoreNames,ce=0;ce<ne.length;++ce){var we=ne[ce],De=Y.objectStore(we);A._hasGetAll="getAll"in De;for(var $e=0;$e<De.indexNames.length;++$e){var Ge=De.indexNames[$e],Xe=De.index(Ge).keyPath,rt=typeof Xe=="string"?Xe:"["+S(Xe).join("+")+"]";!M[we]||(Xe=M[we].idxByName[rt])&&(Xe.name=Ge,delete M[we].idxByName[rt],M[we].idxByName[Ge]=Xe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function ly(A){return A.split(",").map(function(M,Y){var ne=(M=M.trim()).replace(/([&*]|\+\+)/g,""),ce=/^\[/.test(ne)?ne.match(/^\[(.*)\]$/)[1].split("+"):ne;return us(ne,ce||null,/\&/.test(M),/\*/.test(M),/\+\+/.test(M),o(ce),Y===0)})}var N1=(wf.prototype._parseStoresSpec=function(A,M){s(A).forEach(function(Y){if(A[Y]!==null){var ne=ly(A[Y]),ce=ne.shift();if(ce.unique=!0,ce.multi)throw new ke.Schema("Primary key cannot be multi-valued");ne.forEach(function(we){if(we.auto)throw new ke.Schema("Only primary key can be marked as autoIncrement (++)");if(!we.keyPath)throw new ke.Schema("Index must have a name and cannot be an empty string")}),M[Y]=bc(Y,ce,ne)}})},wf.prototype.stores=function(Y){var M=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,Y):Y;var Y=M._versions,ne={},ce={};return Y.forEach(function(we){l(ne,we._cfg.storesSource),ce=we._cfg.dbschema={},we._parseStoresSpec(ne,ce)}),M._dbSchema=ce,qu(M,[M._allTables,M,M.Transaction.prototype]),mf(M,[M._allTables,M,M.Transaction.prototype,this._cfg.tables],s(ce),ce),M._storeNames=s(ce),this},wf.prototype.upgrade=function(A){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Le,A),this},wf);function wf(){}function Lp(A,M){var Y=A._dbNamesDB;return Y||(Y=A._dbNamesDB=new ds(ll,{addons:[],indexedDB:A,IDBKeyRange:M})).version(1).stores({dbnames:"name"}),Y.table("dbnames")}function xf(A){return A&&typeof A.databases=="function"}function $p(A){return Qt(function(){return Ce.letThrough=!0,A()})}function Bp(A){return!("from"in A)}var Aa=function(A,M){if(!this){var Y=new Aa;return A&&"d"in A&&l(Y,A),Y}l(this,arguments.length?{d:1,from:A,to:1<arguments.length?M:A}:{d:0})};function Gu(A,M,Y){var ne=Kn(M,Y);if(!isNaN(ne)){if(0<ne)throw RangeError();if(Bp(A))return l(A,{from:M,to:Y,d:1});var ce=A.l,ne=A.r;if(Kn(Y,A.from)<0)return ce?Gu(ce,M,Y):A.l={from:M,to:Y,d:1,l:null,r:null},uy(A);if(0<Kn(M,A.to))return ne?Gu(ne,M,Y):A.r={from:M,to:Y,d:1,l:null,r:null},uy(A);Kn(M,A.from)<0&&(A.from=M,A.l=null,A.d=ne?ne.d+1:1),0<Kn(Y,A.to)&&(A.to=Y,A.r=null,A.d=A.l?A.l.d+1:1),Y=!A.r,ce&&!A.l&&gl(A,ce),ne&&Y&&gl(A,ne)}}function gl(A,M){Bp(M)||function Y(ne,Ge){var we=Ge.from,De=Ge.to,$e=Ge.l,Ge=Ge.r;Gu(ne,we,De),$e&&Y(ne,$e),Ge&&Y(ne,Ge)}(A,M)}function cy(A,M){var Y=_f(M),ne=Y.next();if(ne.done)return!1;for(var ce=ne.value,we=_f(A),De=we.next(ce.from),$e=De.value;!ne.done&&!De.done;){if(Kn($e.from,ce.to)<=0&&0<=Kn($e.to,ce.from))return!0;Kn(ce.from,$e.from)<0?ce=(ne=Y.next($e.from)).value:$e=(De=we.next(ce.from)).value}return!1}function _f(A){var M=Bp(A)?null:{s:0,n:A};return{next:function(Y){for(var ne=0<arguments.length;M;)switch(M.s){case 0:if(M.s=1,ne)for(;M.n.l&&Kn(Y,M.n.from)<0;)M={up:M,n:M.n.l,s:1};else for(;M.n.l;)M={up:M,n:M.n.l,s:1};case 1:if(M.s=2,!ne||Kn(Y,M.n.to)<=0)return{value:M.n,done:!1};case 2:if(M.n.r){M.s=3,M={up:M,n:M.n.r,s:0};continue}case 3:M=M.up}return{done:!0}}}}function uy(A){var M,Y,ne=(((M=A.r)===null||M===void 0?void 0:M.d)||0)-(((Y=A.l)===null||Y===void 0?void 0:Y.d)||0),ce=1<ne?"r":ne<-1?"l":"";ce&&(M=ce=="r"?"l":"r",Y=r({},A),ne=A[ce],A.from=ne.from,A.to=ne.to,A[ce]=ne[ce],Y[ce]=ne[M],(A[M]=Y).d=zp(Y)),A.d=zp(A)}function zp(Y){var M=Y.r,Y=Y.l;return(M?Y?Math.max(M.d,Y.d):M.d:Y?Y.d:0)+1}function Sf(A,M){return s(M).forEach(function(Y){A[Y]?gl(A[Y],M[Y]):A[Y]=function ne(ce){var we,De,$e={};for(we in ce)h(ce,we)&&(De=ce[we],$e[we]=!De||typeof De!="object"||Z.has(De.constructor)?De:ne(De));return $e}(M[Y])}),A}function Up(A,M){return A.all||M.all||Object.keys(A).some(function(Y){return M[Y]&&cy(M[Y],A[Y])})}p(Aa.prototype,((mi={add:function(A){return gl(this,A),this},addKey:function(A){return Gu(this,A,A),this},addKeys:function(A){var M=this;return A.forEach(function(Y){return Gu(M,Y,Y)}),this},hasKey:function(A){var M=_f(this).next(A).value;return M&&Kn(M.from,A)<=0&&0<=Kn(M.to,A)}})[ae]=function(){return _f(this)},mi));var yl={},Hp={},qp=!1;function Ef(A){Sf(Hp,A),qp||(qp=!0,setTimeout(function(){qp=!1,Vp(Hp,!(Hp={}))},0))}function Vp(A,M){M===void 0&&(M=!1);var Y=new Set;if(A.all)for(var ne=0,ce=Object.values(yl);ne<ce.length;ne++)dy(De=ce[ne],A,Y,M);else for(var we in A){var De,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(we);$e&&(we=$e[1],$e=$e[2],(De=yl["idb://".concat(we,"/").concat($e)])&&dy(De,A,Y,M))}Y.forEach(function(Ge){return Ge()})}function dy(A,M,Y,ne){for(var ce=[],we=0,De=Object.entries(A.queries.query);we<De.length;we++){for(var $e=De[we],Ge=$e[0],Xe=[],rt=0,qe=$e[1];rt<qe.length;rt++){var st=qe[rt];Up(M,st.obsSet)?st.subscribers.forEach(function(Je){return Y.add(Je)}):ne&&Xe.push(st)}ne&&ce.push([Ge,Xe])}if(ne)for(var Ve=0,tt=ce;Ve<tt.length;Ve++){var ot=tt[Ve],Ge=ot[0],Xe=ot[1];A.queries.query[Ge]=Xe}}function R1(A){var M=A._state,Y=A._deps.indexedDB;if(M.isBeingOpened||A.idbdb)return M.dbReadyPromise.then(function(){return M.dbOpenError?Kr(M.dbOpenError):A});M.isBeingOpened=!0,M.dbOpenError=null,M.openComplete=!1;var ne=M.openCanceller,ce=Math.round(10*A.verno),we=!1;function De(){if(M.openCanceller!==ne)throw new ke.DatabaseClosed("db.open() was cancelled")}function $e(){return new F(function(st,Ve){if(De(),!Y)throw new ke.MissingAPI;var tt=A.name,ot=M.autoSchema||!ce?Y.open(tt):Y.open(tt,ce);if(!ot)throw new ke.MissingAPI;ot.onerror=Hi(Ve),ot.onblocked=Ne(A._fireOnBlocked),ot.onupgradeneeded=Ne(function(Je){var ht;rt=ot.transaction,M.autoSchema&&!A._options.allowEmptyDB?(ot.onerror=hl,rt.abort(),ot.result.close(),(ht=Y.deleteDatabase(tt)).onsuccess=ht.onerror=Ne(function(){Ve(new ke.NoSuchDatabase("Database ".concat(tt," doesnt exist")))})):(rt.onerror=Hi(Ve),Je=Je.oldVersion>Math.pow(2,62)?0:Je.oldVersion,qe=Je<1,A.idbdb=ot.result,we&&gf(A,rt),Vu(A,Je/10,rt,Ve))},Ve),ot.onsuccess=Ne(function(){rt=null;var Je,ht,bt,wt,kt,Ht=A.idbdb=ot.result,Yt=S(Ht.objectStoreNames);if(0<Yt.length)try{var Bt=Ht.transaction((wt=Yt).length===1?wt[0]:wt,"readonly");if(M.autoSchema)ht=Ht,bt=Bt,(Je=A).verno=ht.version/10,bt=Je._dbSchema=xc(0,ht,bt),Je._storeNames=S(ht.objectStoreNames,0),mf(Je,[Je._allTables],s(bt),bt);else if(vf(A,A._dbSchema,Bt),((kt=yf(xc(0,(kt=A).idbdb,Bt),kt._dbSchema)).add.length||kt.change.some(function(Vt){return Vt.add.length||Vt.change.length}))&&!we)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ht.close(),ce=Ht.version+1,we=!0,st($e());xo(A,Bt)}catch{}Fs.push(A),Ht.onversionchange=Ne(function(Vt){M.vcFired=!0,A.on("versionchange").fire(Vt)}),Ht.onclose=Ne(function(Vt){A.on("close").fire(Vt)}),qe&&(kt=A._deps,Bt=tt,Ht=kt.indexedDB,kt=kt.IDBKeyRange,xf(Ht)||Bt===ll||Lp(Ht,kt).put({name:Bt}).catch(Le)),st()},Ve)}).catch(function(st){switch(st==null?void 0:st.name){case"UnknownError":if(0<M.PR1398_maxLoop)return M.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ce)return ce=0,$e()}return F.reject(st)})}var Ge,Xe=M.dbReadyResolve,rt=null,qe=!1;return F.race([ne,(typeof navigator>"u"?F.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(st){function Ve(){return indexedDB.databases().finally(st)}Ge=setInterval(Ve,100),Ve()}).finally(function(){return clearInterval(Ge)}):Promise.resolve()).then($e)]).then(function(){return De(),M.onReadyBeingFired=[],F.resolve($p(function(){return A.on.ready.fire(A.vip)})).then(function st(){if(0<M.onReadyBeingFired.length){var Ve=M.onReadyBeingFired.reduce(xe,Le);return M.onReadyBeingFired=[],F.resolve($p(function(){return Ve(A.vip)})).then(st)}})}).finally(function(){M.openCanceller===ne&&(M.onReadyBeingFired=null,M.isBeingOpened=!1)}).catch(function(st){M.dbOpenError=st;try{rt&&rt.abort()}catch{}return ne===M.openCanceller&&A._close(),Kr(st)}).finally(function(){M.openComplete=!0,Xe()}).then(function(){var st;return qe&&(st={},A.tables.forEach(function(Ve){Ve.schema.indexes.forEach(function(tt){tt.name&&(st["idb://".concat(A.name,"/").concat(Ve.name,"/").concat(tt.name)]=new Aa(-1/0,[[[]]]))}),st["idb://".concat(A.name,"/").concat(Ve.name,"/")]=st["idb://".concat(A.name,"/").concat(Ve.name,"/:dels")]=new Aa(-1/0,[[[]]])}),Ta(yc).fire(st),Vp(st,!0)),A})}function Wu(A){function M(we){return A.next(we)}var Y=ce(M),ne=ce(function(we){return A.throw(we)});function ce(we){return function(Ge){var $e=we(Ge),Ge=$e.value;return $e.done?Ge:Ge&&typeof Ge.then=="function"?Ge.then(Y,ne):o(Ge)?Promise.all(Ge).then(Y,ne):Y(Ge)}}return ce(M)()}function _o(A,M,Y){for(var ne=o(A)?A.slice():[A],ce=0;ce<Y;++ce)ne.push(M);return ne}var I1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(M){var Y=A.table(M),ne=Y.schema,ce={},we=[];function De(qe,st,Ve){var tt=ca(qe),ot=ce[tt]=ce[tt]||[],Je=qe==null?0:typeof qe=="string"?1:qe.length,ht=0<st,ht=r(r({},Ve),{name:ht?"".concat(tt,"(virtual-from:").concat(Ve.name,")"):Ve.name,lowLevelIndex:Ve,isVirtual:ht,keyTail:st,keyLength:Je,extractKey:wc(qe),unique:!ht&&Ve.unique});return ot.push(ht),ht.isPrimaryKey||we.push(ht),1<Je&&De(Je===2?qe[0]:qe.slice(0,Je-1),st+1,Ve),ot.sort(function(bt,wt){return bt.keyTail-wt.keyTail}),ht}M=De(ne.primaryKey.keyPath,0,ne.primaryKey),ce[":id"]=[M];for(var $e=0,Ge=ne.indexes;$e<Ge.length;$e++){var Xe=Ge[$e];De(Xe.keyPath,0,Xe)}function rt(qe){var st,Ve=qe.query.index;return Ve.isVirtual?r(r({},qe),{query:{index:Ve.lowLevelIndex,range:(st=qe.query.range,Ve=Ve.keyTail,{type:st.type===1?2:st.type,lower:_o(st.lower,st.lowerOpen?A.MAX_KEY:A.MIN_KEY,Ve),lowerOpen:!0,upper:_o(st.upper,st.upperOpen?A.MIN_KEY:A.MAX_KEY,Ve),upperOpen:!0})}}):qe}return r(r({},Y),{schema:r(r({},ne),{primaryKey:M,indexes:we,getIndexByKeyPath:function(qe){return(qe=ce[ca(qe)])&&qe[0]}}),count:function(qe){return Y.count(rt(qe))},query:function(qe){return Y.query(rt(qe))},openCursor:function(qe){var st=qe.query.index,Ve=st.keyTail,tt=st.isVirtual,ot=st.keyLength;return tt?Y.openCursor(rt(qe)).then(function(ht){return ht&&Je(ht)}):Y.openCursor(qe);function Je(ht){return Object.create(ht,{continue:{value:function(bt){bt!=null?ht.continue(_o(bt,qe.reverse?A.MAX_KEY:A.MIN_KEY,Ve)):qe.unique?ht.continue(ht.key.slice(0,ot).concat(qe.reverse?A.MIN_KEY:A.MAX_KEY,Ve)):ht.continue()}},continuePrimaryKey:{value:function(bt,wt){ht.continuePrimaryKey(_o(bt,A.MAX_KEY,Ve),wt)}},primaryKey:{get:function(){return ht.primaryKey}},key:{get:function(){var bt=ht.key;return ot===1?bt[0]:bt.slice(0,ot)}},value:{get:function(){return ht.value}}})}}})}})}};function Cf(A,M,Y,ne){return Y=Y||{},ne=ne||"",s(A).forEach(function(ce){var we,De,$e;h(M,ce)?(we=A[ce],De=M[ce],typeof we=="object"&&typeof De=="object"&&we&&De?($e=de(we))!==de(De)?Y[ne+ce]=M[ce]:$e==="Object"?Cf(we,De,Y,ne+ce+"."):we!==De&&(Y[ne+ce]=M[ce]):we!==De&&(Y[ne+ce]=M[ce])):Y[ne+ce]=void 0}),s(M).forEach(function(ce){h(A,ce)||(Y[ne+ce]=M[ce])}),Y}function kf(A,M){return M.type==="delete"?M.keys:M.keys||M.values.map(A.extractKey)}var fy={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(M){var Y=A.table(M),ne=Y.schema.primaryKey;return r(r({},Y),{mutate:function(ce){var we=Ce.trans,De=we.table(M).hook,$e=De.deleting,Ge=De.creating,Xe=De.updating;switch(ce.type){case"add":if(Ge.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"put":if(Ge.fire===Le&&Xe.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"delete":if($e.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"deleteRange":if($e.fire===Le)break;return we._promise("readwrite",function(){return function qe(st,Ve,tt){return Y.query({trans:st,values:!1,query:{index:ne,range:Ve},limit:tt}).then(function(ot){var Je=ot.result;return rt({type:"delete",keys:Je,trans:st}).then(function(ht){return 0<ht.numFailures?Promise.reject(ht.failures[0]):Je.length<tt?{failures:[],numFailures:0,lastResult:void 0}:qe(st,r(r({},Ve),{lower:Je[Je.length-1],lowerOpen:!0}),tt)})})}(ce.trans,ce.range,1e4)},!0)}return Y.mutate(ce);function rt(qe){var st,Ve,tt,ot=Ce.trans,Je=qe.keys||kf(ne,qe);if(!Je)throw new Error("Keys missing");return(qe=qe.type==="add"||qe.type==="put"?r(r({},qe),{keys:Je}):r({},qe)).type!=="delete"&&(qe.values=a([],qe.values)),qe.keys&&(qe.keys=a([],qe.keys)),st=Y,tt=Je,((Ve=qe).type==="add"?Promise.resolve([]):st.getMany({trans:Ve.trans,keys:tt,cache:"immutable"})).then(function(ht){var bt=Je.map(function(wt,kt){var Ht,Yt,Bt,Vt=ht[kt],Xt={onerror:null,onsuccess:null};return qe.type==="delete"?$e.fire.call(Xt,wt,Vt,ot):qe.type==="add"||Vt===void 0?(Ht=Ge.fire.call(Xt,wt,qe.values[kt],ot),wt==null&&Ht!=null&&(qe.keys[kt]=wt=Ht,ne.outbound||R(qe.values[kt],ne.keyPath,wt))):(Ht=Cf(Vt,qe.values[kt]),(Yt=Xe.fire.call(Xt,Ht,wt,Vt,ot))&&(Bt=qe.values[kt],Object.keys(Yt).forEach(function(zt){h(Bt,zt)?Bt[zt]=Yt[zt]:R(Bt,zt,Yt[zt])}))),Xt});return Y.mutate(qe).then(function(wt){for(var kt=wt.failures,Ht=wt.results,Yt=wt.numFailures,wt=wt.lastResult,Bt=0;Bt<Je.length;++Bt){var Vt=(Ht||Je)[Bt],Xt=bt[Bt];Vt==null?Xt.onerror&&Xt.onerror(kt[Bt]):Xt.onsuccess&&Xt.onsuccess(qe.type==="put"&&ht[Bt]?qe.values[Bt]:Vt)}return{failures:kt,results:Ht,numFailures:Yt,lastResult:wt}}).catch(function(wt){return bt.forEach(function(kt){return kt.onerror&&kt.onerror(wt)}),Promise.reject(wt)})})}}})}})}};function Gp(A,M,Y){try{if(!M||M.keys.length<A.length)return null;for(var ne=[],ce=0,we=0;ce<M.keys.length&&we<A.length;++ce)Kn(M.keys[ce],A[we])===0&&(ne.push(Y?K(M.values[ce]):M.values[ce]),++we);return ne.length===A.length?ne:null}catch{return null}}var hy={stack:"dbcore",level:-1,create:function(A){return{table:function(M){var Y=A.table(M);return r(r({},Y),{getMany:function(ne){if(!ne.cache)return Y.getMany(ne);var ce=Gp(ne.keys,ne.trans._cache,ne.cache==="clone");return ce?F.resolve(ce):Y.getMany(ne).then(function(we){return ne.trans._cache={keys:ne.keys,values:ne.cache==="clone"?K(we):we},we})},mutate:function(ne){return ne.type!=="add"&&(ne.trans._cache=null),Y.mutate(ne)}})}}}};function bl(A,M){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!M.schema.primaryKey.outbound}function py(A,M){switch(A){case"query":return M.values&&!M.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var j1={stack:"dbcore",level:0,name:"Observability",create:function(A){var M=A.schema.name,Y=new Aa(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(ne,ce,we){if(Ce.subscr&&ce!=="readonly")throw new ke.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ce.querier));return A.transaction(ne,ce,we)},table:function(ne){var ce=A.table(ne),we=ce.schema,De=we.primaryKey,qe=we.indexes,$e=De.extractKey,Ge=De.outbound,Xe=De.autoIncrement&&qe.filter(function(Ve){return Ve.compound&&Ve.keyPath.includes(De.keyPath)}),rt=r(r({},ce),{mutate:function(Ve){function tt(zt){return zt="idb://".concat(M,"/").concat(ne,"/").concat(zt),wt[zt]||(wt[zt]=new Aa)}var ot,Je,ht,bt=Ve.trans,wt=Ve.mutatedParts||(Ve.mutatedParts={}),kt=tt(""),Ht=tt(":dels"),Yt=Ve.type,Xt=Ve.type==="deleteRange"?[Ve.range]:Ve.type==="delete"?[Ve.keys]:Ve.values.length<50?[kf(De,Ve).filter(function(zt){return zt}),Ve.values]:[],Bt=Xt[0],Vt=Xt[1],Xt=Ve.trans._cache;return o(Bt)?(kt.addKeys(Bt),(Xt=Yt==="delete"||Bt.length===Vt.length?Gp(Bt,Xt):null)||Ht.addKeys(Bt),(Xt||Vt)&&(ot=tt,Je=Xt,ht=Vt,we.indexes.forEach(function(zt){var nn=ot(zt.name||"");function pn(Nn){return Nn!=null?zt.extractKey(Nn):null}function gn(Nn){return zt.multiEntry&&o(Nn)?Nn.forEach(function(qa){return nn.addKey(qa)}):nn.addKey(Nn)}(Je||ht).forEach(function(Nn,aa){var _n=Je&&pn(Je[aa]),aa=ht&&pn(ht[aa]);Kn(_n,aa)!==0&&(_n!=null&&gn(_n),aa!=null&&gn(aa))})}))):Bt?(Vt={from:(Vt=Bt.lower)!==null&&Vt!==void 0?Vt:A.MIN_KEY,to:(Vt=Bt.upper)!==null&&Vt!==void 0?Vt:A.MAX_KEY},Ht.add(Vt),kt.add(Vt)):(kt.add(Y),Ht.add(Y),we.indexes.forEach(function(zt){return tt(zt.name).add(Y)})),ce.mutate(Ve).then(function(zt){return!Bt||Ve.type!=="add"&&Ve.type!=="put"||(kt.addKeys(zt.results),Xe&&Xe.forEach(function(nn){for(var pn=Ve.values.map(function(_n){return nn.extractKey(_n)}),gn=nn.keyPath.findIndex(function(_n){return _n===De.keyPath}),Nn=0,qa=zt.results.length;Nn<qa;++Nn)pn[Nn][gn]=zt.results[Nn];tt(nn.name).addKeys(pn)})),bt.mutatedParts=Sf(bt.mutatedParts||{},wt),zt})}}),qe=function(tt){var ot=tt.query,tt=ot.index,ot=ot.range;return[tt,new Aa((tt=ot.lower)!==null&&tt!==void 0?tt:A.MIN_KEY,(ot=ot.upper)!==null&&ot!==void 0?ot:A.MAX_KEY)]},st={get:function(Ve){return[De,new Aa(Ve.key)]},getMany:function(Ve){return[De,new Aa().addKeys(Ve.keys)]},count:qe,query:qe,openCursor:qe};return s(st).forEach(function(Ve){rt[Ve]=function(tt){var ot=Ce.subscr,Je=!!ot,ht=bl(Ce,ce)&&py(Ve,tt)?tt.obsSet={}:ot;if(Je){var bt=function(Vt){return Vt="idb://".concat(M,"/").concat(ne,"/").concat(Vt),ht[Vt]||(ht[Vt]=new Aa)},wt=bt(""),kt=bt(":dels"),ot=st[Ve](tt),Je=ot[0],ot=ot[1];if((Ve==="query"&&Je.isPrimaryKey&&!tt.values?kt:bt(Je.name||"")).add(ot),!Je.isPrimaryKey){if(Ve!=="count"){var Ht=Ve==="query"&&Ge&&tt.values&&ce.query(r(r({},tt),{values:!1}));return ce[Ve].apply(this,arguments).then(function(Vt){if(Ve==="query"){if(Ge&&tt.values)return Ht.then(function(pn){return pn=pn.result,wt.addKeys(pn),Vt});var Xt=tt.values?Vt.result.map($e):Vt.result;(tt.values?wt:kt).addKeys(Xt)}else if(Ve==="openCursor"){var zt=Vt,nn=tt.values;return zt&&Object.create(zt,{key:{get:function(){return kt.addKey(zt.primaryKey),zt.key}},primaryKey:{get:function(){var pn=zt.primaryKey;return kt.addKey(pn),pn}},value:{get:function(){return nn&&wt.addKey(zt.primaryKey),zt.value}}})}return Vt})}kt.add(Y)}}return ce[Ve].apply(this,arguments)}}),rt}})}};function my(A,M,Y){if(Y.numFailures===0)return M;if(M.type==="deleteRange")return null;var ne=M.keys?M.keys.length:"values"in M&&M.values?M.values.length:1;return Y.numFailures===ne?null:(M=r({},M),o(M.keys)&&(M.keys=M.keys.filter(function(ce,we){return!(we in Y.failures)})),"values"in M&&o(M.values)&&(M.values=M.values.filter(function(ce,we){return!(we in Y.failures)})),M)}function Tf(A,M){return Y=A,((ne=M).lower===void 0||(ne.lowerOpen?0<Kn(Y,ne.lower):0<=Kn(Y,ne.lower)))&&(A=A,(M=M).upper===void 0||(M.upperOpen?Kn(A,M.upper)<0:Kn(A,M.upper)<=0));var Y,ne}function Wp(A,M,st,ne,ce,we){if(!st||st.length===0)return A;var De=M.query.index,$e=De.multiEntry,Ge=M.query.range,Xe=ne.schema.primaryKey.extractKey,rt=De.extractKey,qe=(De.lowLevelIndex||De).extractKey,st=st.reduce(function(Ve,tt){var ot=Ve,Je=[];if(tt.type==="add"||tt.type==="put")for(var ht=new Aa,bt=tt.values.length-1;0<=bt;--bt){var wt,kt=tt.values[bt],Ht=Xe(kt);ht.hasKey(Ht)||(wt=rt(kt),($e&&o(wt)?wt.some(function(zt){return Tf(zt,Ge)}):Tf(wt,Ge))&&(ht.addKey(Ht),Je.push(kt)))}switch(tt.type){case"add":var Yt=new Aa().addKeys(M.values?Ve.map(function(nn){return Xe(nn)}):Ve),ot=Ve.concat(M.values?Je.filter(function(nn){return nn=Xe(nn),!Yt.hasKey(nn)&&(Yt.addKey(nn),!0)}):Je.map(function(nn){return Xe(nn)}).filter(function(nn){return!Yt.hasKey(nn)&&(Yt.addKey(nn),!0)}));break;case"put":var Bt=new Aa().addKeys(tt.values.map(function(nn){return Xe(nn)}));ot=Ve.filter(function(nn){return!Bt.hasKey(M.values?Xe(nn):nn)}).concat(M.values?Je:Je.map(function(nn){return Xe(nn)}));break;case"delete":var Vt=new Aa().addKeys(tt.keys);ot=Ve.filter(function(nn){return!Vt.hasKey(M.values?Xe(nn):nn)});break;case"deleteRange":var Xt=tt.range;ot=Ve.filter(function(nn){return!Tf(Xe(nn),Xt)})}return ot},A);return st===A?A:(st.sort(function(Ve,tt){return Kn(qe(Ve),qe(tt))||Kn(Xe(Ve),Xe(tt))}),M.limit&&M.limit<1/0&&(st.length>M.limit?st.length=M.limit:A.length===M.limit&&st.length<M.limit&&(ce.dirty=!0)),we?Object.freeze(st):st)}function _c(A,M){return Kn(A.lower,M.lower)===0&&Kn(A.upper,M.upper)===0&&!!A.lowerOpen==!!M.lowerOpen&&!!A.upperOpen==!!M.upperOpen}function Ku(A,M){return function(Y,ne,ce,we){if(Y===void 0)return ne!==void 0?-1:0;if(ne===void 0)return 1;if((ne=Kn(Y,ne))===0){if(ce&&we)return 0;if(ce)return 1;if(we)return-1}return ne}(A.lower,M.lower,A.lowerOpen,M.lowerOpen)<=0&&0<=function(Y,ne,ce,we){if(Y===void 0)return ne!==void 0?1:0;if(ne===void 0)return-1;if((ne=Kn(Y,ne))===0){if(ce&&we)return 0;if(ce)return-1;if(we)return 1}return ne}(A.upper,M.upper,A.upperOpen,M.upperOpen)}function O1(A,M,Y,ne){A.subscribers.add(Y),ne.addEventListener("abort",function(){var ce,we;A.subscribers.delete(Y),A.subscribers.size===0&&(ce=A,we=M,setTimeout(function(){ce.subscribers.size===0&&X(we,ce)},3e3))})}var Af={stack:"dbcore",level:0,name:"Cache",create:function(A){var M=A.schema.name;return r(r({},A),{transaction:function(Y,ne,ce){var we,De,$e=A.transaction(Y,ne,ce);return ne==="readwrite"&&(De=(we=new AbortController).signal,ce=function(Ge){return function(){if(we.abort(),ne==="readwrite"){for(var Xe=new Set,rt=0,qe=Y;rt<qe.length;rt++){var st=qe[rt],Ve=yl["idb://".concat(M,"/").concat(st)];if(Ve){var tt=A.table(st),ot=Ve.optimisticOps.filter(function(nn){return nn.trans===$e});if($e._explicit&&Ge&&$e.mutatedParts)for(var Je=0,ht=Object.values(Ve.queries.query);Je<ht.length;Je++)for(var bt=0,wt=(Yt=ht[Je]).slice();bt<wt.length;bt++)Up((Bt=wt[bt]).obsSet,$e.mutatedParts)&&(X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)}));else if(0<ot.length){Ve.optimisticOps=Ve.optimisticOps.filter(function(nn){return nn.trans!==$e});for(var kt=0,Ht=Object.values(Ve.queries.query);kt<Ht.length;kt++)for(var Yt,Bt,Vt,Xt=0,zt=(Yt=Ht[kt]).slice();Xt<zt.length;Xt++)(Bt=zt[Xt]).res!=null&&$e.mutatedParts&&(Ge&&!Bt.dirty?(Vt=Object.isFrozen(Bt.res),Vt=Wp(Bt.res,Bt.req,ot,tt,Bt,Vt),Bt.dirty?(X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)})):Vt!==Bt.res&&(Bt.res=Vt,Bt.promise=F.resolve({result:Vt}))):(Bt.dirty&&X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)})))}}}Xe.forEach(function(nn){return nn()})}}},$e.addEventListener("abort",ce(!1),{signal:De}),$e.addEventListener("error",ce(!1),{signal:De}),$e.addEventListener("complete",ce(!0),{signal:De})),$e},table:function(Y){var ne=A.table(Y),ce=ne.schema.primaryKey;return r(r({},ne),{mutate:function(we){var De=Ce.trans;if(ce.outbound||De.db._options.cache==="disabled"||De.explicit||De.idbtrans.mode!=="readwrite")return ne.mutate(we);var $e=yl["idb://".concat(M,"/").concat(Y)];return $e?(De=ne.mutate(we),we.type!=="add"&&we.type!=="put"||!(50<=we.values.length||kf(ce,we).some(function(Ge){return Ge==null}))?($e.optimisticOps.push(we),we.mutatedParts&&Ef(we.mutatedParts),De.then(function(Ge){0<Ge.numFailures&&(X($e.optimisticOps,we),(Ge=my(0,we,Ge))&&$e.optimisticOps.push(Ge),we.mutatedParts&&Ef(we.mutatedParts))}),De.catch(function(){X($e.optimisticOps,we),we.mutatedParts&&Ef(we.mutatedParts)})):De.then(function(Ge){var Xe=my(0,r(r({},we),{values:we.values.map(function(rt,qe){var st;return Ge.failures[qe]?rt:(rt=(st=ce.keyPath)!==null&&st!==void 0&&st.includes(".")?K(rt):r({},rt),R(rt,ce.keyPath,Ge.results[qe]),rt)})}),Ge);$e.optimisticOps.push(Xe),queueMicrotask(function(){return we.mutatedParts&&Ef(we.mutatedParts)})}),De):ne.mutate(we)},query:function(we){if(!bl(Ce,ne)||!py("query",we))return ne.query(we);var De=((Xe=Ce.trans)===null||Xe===void 0?void 0:Xe.db._options.cache)==="immutable",qe=Ce,$e=qe.requery,Ge=qe.signal,Xe=function(tt,ot,Je,ht){var bt=yl["idb://".concat(tt,"/").concat(ot)];if(!bt)return[];if(!(ot=bt.queries[Je]))return[null,!1,bt,null];var wt=ot[(ht.query?ht.query.index.name:null)||""];if(!wt)return[null,!1,bt,null];switch(Je){case"query":var kt=wt.find(function(Ht){return Ht.req.limit===ht.limit&&Ht.req.values===ht.values&&_c(Ht.req.query.range,ht.query.range)});return kt?[kt,!0,bt,wt]:[wt.find(function(Ht){return("limit"in Ht.req?Ht.req.limit:1/0)>=ht.limit&&(!ht.values||Ht.req.values)&&Ku(Ht.req.query.range,ht.query.range)}),!1,bt,wt];case"count":return kt=wt.find(function(Ht){return _c(Ht.req.query.range,ht.query.range)}),[kt,!!kt,bt,wt]}}(M,Y,"query",we),rt=Xe[0],qe=Xe[1],st=Xe[2],Ve=Xe[3];return rt&&qe?rt.obsSet=we.obsSet:(qe=ne.query(we).then(function(tt){var ot=tt.result;if(rt&&(rt.res=ot),De){for(var Je=0,ht=ot.length;Je<ht;++Je)Object.freeze(ot[Je]);Object.freeze(ot)}else tt.result=K(ot);return tt}).catch(function(tt){return Ve&&rt&&X(Ve,rt),Promise.reject(tt)}),rt={obsSet:we.obsSet,promise:qe,subscribers:new Set,type:"query",req:we,dirty:!1},Ve?Ve.push(rt):(Ve=[rt],(st=st||(yl["idb://".concat(M,"/").concat(Y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[we.query.index.name||""]=Ve)),O1(rt,Ve,$e,Ge),rt.promise.then(function(tt){return{result:Wp(tt.result,we,st==null?void 0:st.optimisticOps,ne,rt,De)}})}})}})}};function Zu(A,M){return new Proxy(A,{get:function(Y,ne,ce){return ne==="db"?M:Reflect.get(Y,ne,ce)}})}var ds=(Br.prototype.version=function(A){if(isNaN(A)||A<.1)throw new ke.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new ke.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var M=this._versions,Y=M.filter(function(ne){return ne._cfg.version===A})[0];return Y||(Y=new this.Version(A),M.push(Y),M.sort(Pp),Y.stores({}),this._state.autoSchema=!1,Y)},Br.prototype._whenReady=function(A){var M=this;return this.idbdb&&(this._state.openComplete||Ce.letThrough||this._vip)?A():new F(function(Y,ne){if(M._state.openComplete)return ne(new ke.DatabaseClosed(M._state.dbOpenError));if(!M._state.isBeingOpened){if(!M._state.autoOpen)return void ne(new ke.DatabaseClosed);M.open().catch(Le)}M._state.dbReadyPromise.then(Y,ne)}).then(A)},Br.prototype.use=function(A){var M=A.stack,Y=A.create,ne=A.level,ce=A.name;return ce&&this.unuse({stack:M,name:ce}),A=this._middlewares[M]||(this._middlewares[M]=[]),A.push({stack:M,create:Y,level:ne??10,name:ce}),A.sort(function(we,De){return we.level-De.level}),this},Br.prototype.unuse=function(A){var M=A.stack,Y=A.name,ne=A.create;return M&&this._middlewares[M]&&(this._middlewares[M]=this._middlewares[M].filter(function(ce){return ne?ce.create!==ne:!!Y&&ce.name!==Y})),this},Br.prototype.open=function(){var A=this;return mo(be,function(){return R1(A)})},Br.prototype._close=function(){var A=this._state,M=Fs.indexOf(this);if(0<=M&&Fs.splice(M,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new F(function(Y){A.dbReadyResolve=Y}),A.openCanceller=new F(function(Y,ne){A.cancelOpen=ne}))},Br.prototype.close=function(Y){var M=(Y===void 0?{disableAutoOpen:!0}:Y).disableAutoOpen,Y=this._state;M?(Y.isBeingOpened&&Y.cancelOpen(new ke.DatabaseClosed),this._close(),Y.autoOpen=!1,Y.dbOpenError=new ke.DatabaseClosed):(this._close(),Y.autoOpen=this._options.autoOpen||Y.isBeingOpened,Y.openComplete=!1,Y.dbOpenError=null)},Br.prototype.delete=function(A){var M=this;A===void 0&&(A={disableAutoOpen:!0});var Y=0<arguments.length&&typeof arguments[0]!="object",ne=this._state;return new F(function(ce,we){function De(){M.close(A);var $e=M._deps.indexedDB.deleteDatabase(M.name);$e.onsuccess=Ne(function(){var Ge,Xe,rt;Ge=M._deps,Xe=M.name,rt=Ge.indexedDB,Ge=Ge.IDBKeyRange,xf(rt)||Xe===ll||Lp(rt,Ge).delete(Xe).catch(Le),ce()}),$e.onerror=Hi(we),$e.onblocked=M._fireOnBlocked}if(Y)throw new ke.InvalidArgument("Invalid closeOptions argument to db.delete()");ne.isBeingOpened?ne.dbReadyPromise.then(De):De()})},Br.prototype.backendDB=function(){return this.idbdb},Br.prototype.isOpen=function(){return this.idbdb!==null},Br.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},Br.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Br.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Br.prototype,"tables",{get:function(){var A=this;return s(this._allTables).map(function(M){return A._allTables[M]})},enumerable:!1,configurable:!0}),Br.prototype.transaction=function(){var A=(function(M,Y,ne){var ce=arguments.length;if(ce<2)throw new ke.InvalidArgument("Too few arguments");for(var we=new Array(ce-1);--ce;)we[ce-1]=arguments[ce];return ne=we.pop(),[M,B(we),ne]}).apply(this,arguments);return this._transaction.apply(this,A)},Br.prototype._transaction=function(A,M,Y){var ne=this,ce=Ce.trans;ce&&ce.db===this&&A.indexOf("!")===-1||(ce=null);var we,De,$e=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(De=M.map(function(Xe){if(Xe=Xe instanceof ne.Table?Xe.name:Xe,typeof Xe!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Xe}),A=="r"||A===Ui)we=Ui;else{if(A!="rw"&&A!=Uu)throw new ke.InvalidArgument("Invalid transaction mode: "+A);we=Uu}if(ce){if(ce.mode===Ui&&we===Uu){if(!$e)throw new ke.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ce=null}ce&&De.forEach(function(Xe){if(ce&&ce.storeNames.indexOf(Xe)===-1){if(!$e)throw new ke.SubTransaction("Table "+Xe+" not included in parent transaction.");ce=null}}),$e&&ce&&!ce.active&&(ce=null)}}catch(Xe){return ce?ce._promise(null,function(rt,qe){qe(Xe)}):Kr(Xe)}var Ge=(function Xe(rt,qe,st,Ve,tt){return F.resolve().then(function(){var ot=Ce.transless||Ce,Je=rt._createTransaction(qe,st,rt._dbSchema,Ve);if(Je.explicit=!0,ot={trans:Je,transless:ot},Ve)Je.idbtrans=Ve.idbtrans;else try{Je.create(),Je.idbtrans._explicit=!0,rt._state.PR1398_maxLoop=3}catch(wt){return wt.name===Ae.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,qe,st,null,tt)})):Kr(wt)}var ht,bt=J(tt);return bt&&An(),ot=F.follow(function(){var wt;(ht=tt.call(Je,Je))&&(bt?(wt=Wn.bind(null,null),ht.then(wt,wt)):typeof ht.next=="function"&&typeof ht.throw=="function"&&(ht=Wu(ht)))},ot),(ht&&typeof ht.then=="function"?F.resolve(ht).then(function(wt){return Je.active?wt:Kr(new ke.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ot.then(function(){return ht})).then(function(wt){return Ve&&Je._resolve(),Je._completion.then(function(){return wt})}).catch(function(wt){return Je._reject(wt),Kr(wt)})})}).bind(null,this,we,De,ce,Y);return ce?ce._promise(we,Ge,"lock"):Ce.trans?mo(Ce.transless,function(){return ne._whenReady(Ge)}):this._whenReady(Ge)},Br.prototype.table=function(A){if(!h(this._allTables,A))throw new ke.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},Br);function Br(A,M){var Y=this;this._middlewares={},this.verno=0;var ne=Br.dependencies;this._options=M=r({addons:Br.addons,autoOpen:!0,indexedDB:ne.indexedDB,IDBKeyRange:ne.IDBKeyRange,cache:"cloned"},M),this._deps={indexedDB:M.indexedDB,IDBKeyRange:M.IDBKeyRange},ne=M.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ce,we,De,$e,Ge,Xe={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:M.autoOpen};Xe.dbReadyPromise=new F(function(qe){Xe.dbReadyResolve=qe}),Xe.openCanceller=new F(function(qe,st){Xe.cancelOpen=st}),this._state=Xe,this.name=A,this.on=wo(this,"populate","blocked","versionchange","close",{ready:[xe,Le]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(qe){return function(st,Ve){Br.vip(function(){var tt,ot=Y._state;ot.openComplete?(ot.dbOpenError||F.resolve().then(st),Ve&&qe(st)):ot.onReadyBeingFired?(ot.onReadyBeingFired.push(st),Ve&&qe(st)):(qe(st),tt=Y,Ve||qe(function Je(){tt.on.ready.unsubscribe(st),tt.on.ready.unsubscribe(Je)}))})}}),this.Collection=(ce=this,dc(mc.prototype,function(ht,Je){this.db=ce;var Ve=cl,tt=null;if(Je)try{Ve=Je()}catch(bt){tt=bt}var ot=ht._ctx,Je=ot.table,ht=Je.hook.reading.fire;this._ctx={table:Je,index:ot.index,isPrimKey:!ot.index||Je.schema.primKey.keyPath&&ot.index===Je.schema.primKey.name,range:Ve,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:tt,or:ot.or,valueMapper:ht!==Ie?ht:null}})),this.Table=(we=this,dc(Rp.prototype,function(qe,st,Ve){this.db=we,this._tx=Ve,this.name=qe,this.schema=st,this.hook=we._allTables[qe]?we._allTables[qe].hook:wo(null,{creating:[Te,Le],reading:[z,Ie],updating:[oe,Le],deleting:[ue,Le]})})),this.Transaction=(De=this,dc(Mp.prototype,function(qe,st,Ve,tt,ot){var Je=this;this.db=De,this.mode=qe,this.storeNames=st,this.schema=Ve,this.chromeTransactionDurability=tt,this.idbtrans=null,this.on=wo(this,"complete","error","abort"),this.parent=ot||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F(function(ht,bt){Je._resolve=ht,Je._reject=bt}),this._completion.then(function(){Je.active=!1,Je.on.complete.fire()},function(ht){var bt=Je.active;return Je.active=!1,Je.on.error.fire(ht),Je.parent?Je.parent._reject(ht):bt&&Je.idbtrans&&Je.idbtrans.abort(),Kr(ht)})})),this.Version=($e=this,dc(N1.prototype,function(qe){this.db=$e,this._cfg={version:qe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Ge=this,dc(fl.prototype,function(qe,st,Ve){if(this.db=Ge,this._ctx={table:qe,index:st===":id"?null:st,or:Ve},this._cmp=this._ascending=Kn,this._descending=function(tt,ot){return Kn(ot,tt)},this._max=function(tt,ot){return 0<Kn(tt,ot)?tt:ot},this._min=function(tt,ot){return Kn(tt,ot)<0?tt:ot},this._IDBKeyRange=Ge._deps.IDBKeyRange,!this._IDBKeyRange)throw new ke.MissingAPI})),this.on("versionchange",function(qe){0<qe.newVersion?console.warn("Another connection wants to upgrade database '".concat(Y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Y.name,"'. Closing db now to resume the delete request.")),Y.close({disableAutoOpen:!1})}),this.on("blocked",function(qe){!qe.newVersion||qe.newVersion<qe.oldVersion?console.warn("Dexie.delete('".concat(Y.name,"') was blocked")):console.warn("Upgrade '".concat(Y.name,"' blocked by other connection holding version ").concat(qe.oldVersion/10))}),this._maxKey=vc(M.IDBKeyRange),this._createTransaction=function(qe,st,Ve,tt){return new Y.Transaction(qe,st,Ve,Y._options.chromeTransactionDurability,tt)},this._fireOnBlocked=function(qe){Y.on("blocked").fire(qe),Fs.filter(function(st){return st.name===Y.name&&st!==Y&&!st._state.vcFired}).map(function(st){return st.on("versionchange").fire(qe)})},this.use(hy),this.use(Af),this.use(j1),this.use(I1),this.use(fy);var rt=new Proxy(this,{get:function(qe,st,Ve){if(st==="_vip")return!0;if(st==="table")return function(ot){return Zu(Y.table(ot),rt)};var tt=Reflect.get(qe,st,Ve);return tt instanceof Rp?Zu(tt,rt):st==="tables"?tt.map(function(ot){return Zu(ot,rt)}):st==="_createTransaction"?function(){return Zu(tt.apply(this,arguments),rt)}:tt}});this.vip=rt,ne.forEach(function(qe){return qe(Y)})}var Sc,mi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",gy=(Nf.prototype.subscribe=function(A,M,Y){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:M,complete:Y})},Nf.prototype[mi]=function(){return this},Nf);function Nf(A){this._subscribe=A}try{Sc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Sc={indexedDB:null,IDBKeyRange:null}}function yy(A){var M,Y=!1,ne=new gy(function(ce){var we=J(A),De,$e=!1,Ge={},Xe={},rt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,De&&De.abort(),qe&&Ta.storagemutated.unsubscribe(Ve))}};ce.start&&ce.start(rt);var qe=!1,st=function(){return yo(tt)},Ve=function(ot){Sf(Ge,ot),Up(Xe,Ge)&&st()},tt=function(){var ot,Je,ht;!$e&&Sc.indexedDB&&(Ge={},ot={},De&&De.abort(),De=new AbortController,ht=function(bt){var wt=V();try{we&&An();var kt=Qt(A,bt);return kt=we?kt.finally(Wn):kt}finally{wt&&H()}}(Je={subscr:ot,signal:De.signal,requery:st,querier:A,trans:null}),Promise.resolve(ht).then(function(bt){Y=!0,M=bt,$e||Je.signal.aborted||(Ge={},function(wt){for(var kt in wt)if(h(wt,kt))return;return 1}(Xe=ot)||qe||(Ta(yc,Ve),qe=!0),yo(function(){return!$e&&ce.next&&ce.next(bt)}))},function(bt){Y=!1,["DatabaseClosedError","AbortError"].includes(bt==null?void 0:bt.name)||$e||yo(function(){$e||ce.error&&ce.error(bt)})}))};return setTimeout(st,0),rt});return ne.hasValue=function(){return Y},ne.getValue=function(){return M},ne}var vl=ds;function Kp(A){var M=So;try{So=!0,Ta.storagemutated.fire(A),Vp(A,!0)}finally{So=M}}p(vl,r(r({},et),{delete:function(A){return new vl(A,{addons:[]}).delete()},exists:function(A){return new vl(A,{addons:[]}).open().then(function(M){return M.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return M=vl.dependencies,Y=M.indexedDB,M=M.IDBKeyRange,(xf(Y)?Promise.resolve(Y.databases()).then(function(ne){return ne.map(function(ce){return ce.name}).filter(function(ce){return ce!==ll})}):Lp(Y,M).toCollection().primaryKeys()).then(A)}catch{return Kr(new ke.MissingAPI)}var M,Y},defineClass:function(){return function(A){l(this,A)}},ignoreTransaction:function(A){return Ce.trans?mo(Ce.transless,A):A()},vip:$p,async:function(A){return function(){try{var M=Wu(A.apply(this,arguments));return M&&typeof M.then=="function"?M:F.resolve(M)}catch(Y){return Kr(Y)}}},spawn:function(A,M,Y){try{var ne=Wu(A.apply(Y,M||[]));return ne&&typeof ne.then=="function"?ne:F.resolve(ne)}catch(ce){return Kr(ce)}},currentTransaction:{get:function(){return Ce.trans||null}},waitFor:function(A,M){return M=F.resolve(typeof A=="function"?vl.ignoreTransaction(A):A).timeout(M||6e4),Ce.trans?Ce.trans.waitFor(M):M},Promise:F,debug:{get:function(){return Pe},set:function(A){Ee(A)}},derive:b,extend:l,props:p,override:E,Events:wo,on:Ta,liveQuery:yy,extendObservabilitySet:Sf,getByKeyPath:I,setByKeyPath:R,delByKeyPath:function(A,M){typeof M=="string"?R(A,M,void 0):"length"in M&&[].map.call(M,function(Y){R(A,Y,void 0)})},shallowClone:j,deepClone:K,getObjectDiff:Cf,cmp:Kn,asap:k,minKey:-1/0,addons:[],connections:Fs,errnames:Ae,dependencies:Sc,cache:yl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,M,Y){return A+M/Math.pow(10,2*Y)})})),vl.maxKey=vc(vl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ta(yc,function(A){So||(A=new CustomEvent(pl,{detail:A}),So=!0,dispatchEvent(A),So=!1)}),addEventListener(pl,function(A){A=A.detail,So||Kp(A)}));var Ec,So=!1,Qa=function(){};return typeof BroadcastChannel<"u"&&((Qa=function(){(Ec=new BroadcastChannel(pl)).onmessage=function(A){return A.data&&Kp(A.data)}})(),typeof Ec.unref=="function"&&Ec.unref(),Ta(yc,function(A){So||Ec.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!ds.disableBfCache&&A.persisted){Pe&&console.debug("Dexie: handling persisted pagehide"),Ec!=null&&Ec.close();for(var M=0,Y=Fs;M<Y.length;M++)Y[M].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!ds.disableBfCache&&A.persisted&&(Pe&&console.debug("Dexie: handling persisted pageshow"),Qa(),Kp({all:new Aa(-1/0,[[]])}))})),F.rejectionMapper=function(A,M){return!A||A instanceof ie||A instanceof TypeError||A instanceof SyntaxError||!A.name||!Fe[A.name]?A:(M=new Fe[A.name](M||A.message,A),"stack"in A&&v(M,"stack",{get:function(){return this.inner.stack}}),M)},Ee(Pe),r(ds,Object.freeze({__proto__:null,Dexie:ds,liveQuery:yy,Entity:uf,cmp:Kn,PropModification:pc,replacePrefix:function(A,M){return new pc({replacePrefix:[A,M]})},add:function(A){return new pc({add:A})},remove:function(A){return new pc({remove:A})},default:ds,RangeSet:Aa,mergeRanges:gl,rangesOverlap:cy}),{default:ds}),ds})}(bv)),bv.exports}var FV=PV();const K2=ui(FV),i3=Symbol.for("Dexie"),Dv=globalThis[i3]||(globalThis[i3]=K2);if(K2.semVer!==Dv.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${K2.semVer} and ${Dv.semVer}`);const{liveQuery:p_e,mergeRanges:m_e,rangesOverlap:g_e,RangeSet:y_e,cmp:b_e,Entity:v_e,PropModification:w_e,replacePrefix:x_e,add:__e,remove:S_e}=Dv;class LV extends Dv{constructor(){super("LiteChatDatabase_Rewrite_v1");ha(this,"conversations");ha(this,"interactions");ha(this,"mods");ha(this,"appState");ha(this,"providerConfigs");ha(this,"apiKeys");ha(this,"syncRepos");ha(this,"projects");ha(this,"rules");ha(this,"tags");ha(this,"tagRuleLinks");this.version(7).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const Et=new LV,Oa=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class xt{static async loadConversations(){try{return(await Et.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Oa(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await Et.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await Et.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await Et.interactions.where({conversationId:t}).sortBy("index")).map(r=>Oa(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await Et.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await Et.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await Et.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await Et.mods.orderBy("loadOrder").toArray()).map(n=>Oa(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await Et.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await Et.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await Et.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await Et.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=Et.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Oa(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await Et.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await Et.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=Et.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Oa(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await Et.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await Et.transaction("rw",[Et.apiKeys,Et.providerConfigs],async()=>{const n=await Et.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Et.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await Et.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await Et.syncRepos.toArray()).map(n=>Oa(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await Et.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await Et.transaction("rw",[Et.syncRepos,Et.conversations],async()=>{const n=await Et.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Et.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await Et.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await Et.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Oa(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,maxTokens:t.maxTokens??null,topP:t.topP??null,topK:t.topK??null,presencePenalty:t.presencePenalty??null,frequencyPenalty:t.frequencyPenalty??null,metadata:t.metadata?{...t.metadata}:{}};return await Et.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await Et.projects.where("parentId").equals(r).toArray();for(const s of a)await n(s.id);const i=await Et.conversations.where("projectId").equals(r).toArray();if(i.length>0){const s=i.map(o=>Et.conversations.update(o.id,{projectId:null}));await Promise.all(s),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await Et.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await Et.transaction("rw",[Et.projects,Et.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async loadRules(){try{return(await Et.rules.orderBy("name").toArray()).map(n=>Oa(n))}catch(t){throw console.error("PersistenceService: Error loading rules:",t),t}}static async saveRule(t){try{return await Et.rules.put(t)}catch(n){throw console.error("PersistenceService: Error saving rule:",n),n}}static async deleteRule(t){try{await Et.transaction("rw",[Et.rules,Et.tagRuleLinks],async()=>{await Et.tagRuleLinks.where("ruleId").equals(t).delete(),await Et.rules.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting rule:",n),n}}static async loadTags(){try{return(await Et.tags.orderBy("name").toArray()).map(n=>Oa(n))}catch(t){throw console.error("PersistenceService: Error loading tags:",t),t}}static async saveTag(t){try{return await Et.tags.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag:",n),n}}static async deleteTag(t){try{await Et.transaction("rw",[Et.tags,Et.tagRuleLinks],async()=>{await Et.tagRuleLinks.where("tagId").equals(t).delete(),await Et.tags.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting tag:",n),n}}static async loadTagRuleLinks(){try{return await Et.tagRuleLinks.toArray()}catch(t){throw console.error("PersistenceService: Error loading tag-rule links:",t),t}}static async saveTagRuleLink(t){try{return await Et.tagRuleLinks.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag-rule link:",n),n}}static async deleteTagRuleLink(t){try{await Et.tagRuleLinks.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting tag-rule link:",n),n}}static async getAllDataForExport(t){const n={version:1,exportedAt:new Date().toISOString()};if(t.importSettings){const r=await Et.appState.toArray();n.settings={},r.forEach(a=>{a.key.startsWith("settings:")&&(n.settings[a.key.substring(9)]=a.value)})}return t.importApiKeys&&(n.apiKeys=await Et.apiKeys.toArray()),t.importProviderConfigs&&(n.providerConfigs=await Et.providerConfigs.toArray()),t.importProjects&&(n.projects=await Et.projects.toArray()),t.importConversations&&(n.conversations=await Et.conversations.toArray(),n.interactions=await Et.interactions.toArray()),t.importRulesAndTags&&(n.rules=await Et.rules.toArray(),n.tags=await Et.tags.toArray(),n.tagRuleLinks=await Et.tagRuleLinks.toArray()),t.importMods&&(n.mods=await Et.mods.toArray()),t.importSyncRepos&&(n.syncRepos=await Et.syncRepos.toArray()),n}static async importAllData(t,n){if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}. Expected version 1.`);await Et.transaction("rw",[Et.appState,Et.apiKeys,Et.providerConfigs,Et.projects,Et.conversations,Et.interactions,Et.rules,Et.tags,Et.tagRuleLinks,Et.mods,Et.syncRepos],async()=>{if(n.importSettings&&await Et.appState.clear(),n.importApiKeys&&await Et.apiKeys.clear(),n.importProviderConfigs&&await Et.providerConfigs.clear(),n.importProjects&&await Et.projects.clear(),n.importConversations&&(await Et.conversations.clear(),await Et.interactions.clear()),n.importRulesAndTags&&(await Et.rules.clear(),await Et.tags.clear(),await Et.tagRuleLinks.clear()),n.importMods&&await Et.mods.clear(),n.importSyncRepos&&await Et.syncRepos.clear(),n.importSettings&&t.settings){const r=Object.entries(t.settings).map(([a,i])=>({key:`settings:${a}`,value:i}));await Et.appState.bulkPut(r)}n.importApiKeys&&t.apiKeys&&await Et.apiKeys.bulkPut(t.apiKeys.map(r=>Oa(r))),n.importProviderConfigs&&t.providerConfigs&&await Et.providerConfigs.bulkPut(t.providerConfigs.map(r=>Oa(r,["modelsLastFetchedAt"]))),n.importProjects&&t.projects&&await Et.projects.bulkPut(t.projects.map(r=>Oa(r))),n.importConversations&&t.conversations&&(await Et.conversations.bulkPut(t.conversations.map(r=>Oa(r,["lastSyncedAt"]))),t.interactions&&await Et.interactions.bulkPut(t.interactions.map(r=>Oa(r,["startedAt","endedAt"])))),n.importRulesAndTags&&(t.rules&&await Et.rules.bulkPut(t.rules.map(r=>Oa(r))),t.tags&&await Et.tags.bulkPut(t.tags.map(r=>Oa(r))),t.tagRuleLinks&&await Et.tagRuleLinks.bulkPut(t.tagRuleLinks)),n.importMods&&t.mods&&await Et.mods.bulkPut(t.mods.map(r=>Oa(r))),n.importSyncRepos&&t.syncRepos&&await Et.syncRepos.bulkPut(t.syncRepos.map(r=>Oa(r,["lastPulledAt","lastPushedAt"])))})}static async clearAllData(){try{await Et.transaction("rw",[Et.conversations,Et.interactions,Et.mods,Et.appState,Et.providerConfigs,Et.apiKeys,Et.syncRepos,Et.projects,Et.rules,Et.tags,Et.tagRuleLinks],async()=>{await Et.interactions.clear(),await Et.conversations.clear(),await Et.projects.clear(),await Et.mods.clear(),await Et.appState.clear(),await Et.providerConfigs.clear(),await Et.apiKeys.clear(),await Et.syncRepos.clear(),await Et.rules.clear(),await Et.tags.clear(),await Et.tagRuleLinks.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}function $V(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ct=$V();var St=(e=>(e.APP_LOADED="app:loaded",e.MOD_LOADED="mod:loaded",e.MOD_ERROR="mod:error",e.CONVERSATION_SELECTED="conversation:selected",e.CONVERSATION_ADDED="conversation:added",e.CONVERSATION_UPDATED="conversation:updated",e.CONVERSATION_DELETED="conversation:deleted",e.PROJECT_SELECTED="project:selected",e.PROJECT_ADDED="project:added",e.PROJECT_UPDATED="project:updated",e.PROJECT_DELETED="project:deleted",e.INTERACTION_STARTED="interaction:started",e.INTERACTION_STREAM_CHUNK="interaction:stream_chunk",e.INTERACTION_COMPLETED="interaction:completed",e.PROMPT_SUBMITTED="prompt:submitted",e.PROMPT_INPUT_CHANGE="prompt:input_change",e.SETTINGS_CHANGED="settings:changed",e.PROVIDER_CONFIG_CHANGED="provider:config_changed",e.API_KEY_CHANGED="provider:api_key_changed",e.MODEL_SELECTION_CHANGED="provider:model_selection_changed",e.VFS_FILE_WRITTEN="vfs:file_written",e.VFS_FILE_READ="vfs:file_read",e.VFS_FILE_DELETED="vfs:file_deleted",e.VFS_CONTEXT_CHANGED="vfs:context_changed",e.SYNC_REPO_CHANGED="sync:repo_changed",e.CONVERSATION_SYNC_STATUS_CHANGED="sync:conversation_status_changed",e.REPO_INIT_STATUS_CHANGED="sync:repo_init_status_changed",e.ATTACHED_FILES_CHANGED="input:attached_files_changed",e.PROMPT_PARAMS_CHANGED="input:prompt_params_changed",e.INTERACTION_STATUS_CHANGED="interaction:status_changed",e.CONTEXT_CHANGED="ui:context_changed",e))(St||{}),Mv=(e=>(e.PROMPT_TURN_FINALIZE="middleware:prompt:turnFinalize",e.INTERACTION_BEFORE_START="middleware:interaction:beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware:interaction:processChunk",e))(Mv||{});const qn=Is(js((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n}),r!=="loading"&&Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:"loading"});try{const a=await xt.loadInteractionsForConversation(n);a.sort((i,s)=>i.index-s.index),e({interactions:a,status:"idle"}),Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:"idle"})}catch(a){console.error("InteractionStore: Error loading interactions",a),e({error:"Failed load interactions",status:"error"}),Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:"error"})}},_addInteractionToState:n=>{e(r=>{if(!r.interactions.some(a=>a.id===n.id))r.interactions.push(n),r.interactions.sort((a,i)=>a.index-i.index);else{console.warn(`InteractionStore: Interaction ${n.id} already exists. Updating instead.`);const a=r.interactions.findIndex(i=>i.id===n.id);a!==-1&&(r.interactions[a]={...r.interactions[a],...n})}})},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(s=>s.id===n);if(i!==-1){const s=a.interactions[i];let o={...s.metadata||{}};r.metadata&&(o={...o,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(o.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(o.toolResults=[...r.metadata.toolResults]));const l={...s,...r,metadata:o};"response"in r&&(l.response=r.response),a.interactions[i]=l}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r)})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(a=>a.id!==n)})},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions.");const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:"idle"})},setError:n=>{const r=t().status;let a="idle";e(i=>{i.error=n,n?(a="error",i.status="error"):i.status==="error"?(a=i.streamingInteractionIds.length>0?"streaming":"idle",i.status=a):a=i.status}),r!==a&&Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:a})},setStatus:n=>{t().status!==n&&(e({status:n}),Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:n}))},_addStreamingId:n=>{let r=!1;e(a=>{a.streamingInteractionIds.includes(n)||(a.streamingInteractionIds.push(n),a.activeStreamBuffers[n]="",a.streamingInteractionIds.length===1&&(a.status="streaming",r=!0),a.error=null)}),r&&Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:"streaming"})},_removeStreamingId:n=>{let r=!1;e(a=>{const i=a.streamingInteractionIds.indexOf(n);i!==-1&&(a.streamingInteractionIds.splice(i,1),delete a.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),a.streamingInteractionIds.length===0&&a.status==="streaming"&&(a.status=a.error?"error":"idle",r=!0))}),r&&Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:t().status})}}))),BV="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let wi=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=BV[n[e]&63];return t};const Zl=Is(js((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(a=>{if(a.attachedFilesMetadata.some(s=>s.source==="direct"&&n.source==="direct"?s.name===n.name&&s.size===n.size:s.source==="vfs"&&n.source==="vfs"?s.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const s={id:wi(),...n};a.attachedFilesMetadata.push(s),r=!0}}),r&&Ct.emit(St.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(a=>{const i=a.attachedFilesMetadata.length;a.attachedFilesMetadata=a.attachedFilesMetadata.filter(s=>s.id!==n),r=a.attachedFilesMetadata.length<i}),r&&Ct.emit(St.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&Ct.emit(St.ATTACHED_FILES_CHANGED,{files:[]})}}))),oD=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(oD);const vk=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml")return!0;const r="."+n.split(".").pop();return oD.has(r)};var lD="vercel.ai.error",zV=Symbol.for(lD),cD,UV=class uD extends Error{constructor({name:t,message:n,cause:r}){super(n),this[cD]=!0,this.name=t,this.cause=r}static isInstance(t){return uD.hasMarker(t,lD)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};cD=zV;var Tn=UV,dD="AI_APICallError",fD=`vercel.ai.error.${dD}`,HV=Symbol.for(fD),hD,_a=class extends Tn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:dD,message:t,cause:o}),this[hD]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(t){return Tn.hasMarker(t,fD)}};hD=HV;var pD="AI_EmptyResponseBodyError",mD=`vercel.ai.error.${pD}`,qV=Symbol.for(mD),gD,wk=class extends Tn{constructor({message:t="Empty response body"}={}){super({name:pD,message:t}),this[gD]=!0}static isInstance(t){return Tn.hasMarker(t,mD)}};gD=qV;function u0(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var yD="AI_InvalidArgumentError",bD=`vercel.ai.error.${yD}`,VV=Symbol.for(bD),vD,xk=class extends Tn{constructor({message:t,cause:n,argument:r}){super({name:yD,message:t,cause:n}),this[vD]=!0,this.argument=r}static isInstance(t){return Tn.hasMarker(t,bD)}};vD=VV;var wD="AI_InvalidPromptError",xD=`vercel.ai.error.${wD}`,GV=Symbol.for(xD),_D,Ml=class extends Tn{constructor({prompt:t,message:n,cause:r}){super({name:wD,message:`Invalid prompt: ${n}`,cause:r}),this[_D]=!0,this.prompt=t}static isInstance(t){return Tn.hasMarker(t,xD)}};_D=GV;var SD="AI_InvalidResponseDataError",ED=`vercel.ai.error.${SD}`,WV=Symbol.for(ED),CD,vh=class extends Tn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:SD,message:n}),this[CD]=!0,this.data=t}static isInstance(t){return Tn.hasMarker(t,ED)}};CD=WV;var kD="AI_JSONParseError",TD=`vercel.ai.error.${kD}`,KV=Symbol.for(TD),AD,ou=class extends Tn{constructor({text:t,cause:n}){super({name:kD,message:`JSON parsing failed: Text: ${t}.
Error message: ${u0(n)}`,cause:n}),this[AD]=!0,this.text=t}static isInstance(t){return Tn.hasMarker(t,TD)}};AD=KV;var ND="AI_LoadAPIKeyError",RD=`vercel.ai.error.${ND}`,ZV=Symbol.for(RD),ID,gb=class extends Tn{constructor({message:t}){super({name:ND,message:t}),this[ID]=!0}static isInstance(t){return Tn.hasMarker(t,RD)}};ID=ZV;var jD="AI_TooManyEmbeddingValuesForCallError",OD=`vercel.ai.error.${jD}`,YV=Symbol.for(OD),DD,_k=class extends Tn{constructor(t){super({name:jD,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[DD]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Tn.hasMarker(t,OD)}};DD=YV;var MD="AI_TypeValidationError",PD=`vercel.ai.error.${MD}`,XV=Symbol.for(PD),FD,JV=class Z2 extends Tn{constructor({value:t,cause:n}){super({name:MD,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${u0(n)}`,cause:n}),this[FD]=!0,this.value=t}static isInstance(t){return Tn.hasMarker(t,PD)}static wrap({value:t,cause:n}){return Z2.isInstance(n)&&n.value===t?n:new Z2({value:t,cause:n})}};FD=XV;var lu=JV,LD="AI_UnsupportedFunctionalityError",$D=`vercel.ai.error.${LD}`,QV=Symbol.for($D),BD,Ar=class extends Tn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:LD,message:n}),this[BD]=!0,this.functionality=t}static isInstance(t){return Tn.hasMarker(t,$D)}};BD=QV;let eG=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var Sk={},tx={};tx.byteLength=rG;tx.toByteArray=iG;tx.fromByteArray=lG;var Fo=[],xs=[],tG=typeof Uint8Array<"u"?Uint8Array:Array,CS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var eh=0,nG=CS.length;eh<nG;++eh)Fo[eh]=CS[eh],xs[CS.charCodeAt(eh)]=eh;xs[45]=62;xs[95]=63;function zD(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function rG(e){var t=zD(e),n=t[0],r=t[1];return(n+r)*3/4-r}function aG(e,t,n){return(t+n)*3/4-n}function iG(e){var t,n=zD(e),r=n[0],a=n[1],i=new tG(aG(e,r,a)),s=0,o=a>0?r-4:r,l;for(l=0;l<o;l+=4)t=xs[e.charCodeAt(l)]<<18|xs[e.charCodeAt(l+1)]<<12|xs[e.charCodeAt(l+2)]<<6|xs[e.charCodeAt(l+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return a===2&&(t=xs[e.charCodeAt(l)]<<2|xs[e.charCodeAt(l+1)]>>4,i[s++]=t&255),a===1&&(t=xs[e.charCodeAt(l)]<<10|xs[e.charCodeAt(l+1)]<<4|xs[e.charCodeAt(l+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function sG(e){return Fo[e>>18&63]+Fo[e>>12&63]+Fo[e>>6&63]+Fo[e&63]}function oG(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(sG(r));return a.join("")}function lG(e){for(var t,n=e.length,r=n%3,a=[],i=16383,s=0,o=n-r;s<o;s+=i)a.push(oG(e,s,s+i>o?o:s+i));return r===1?(t=e[n-1],a.push(Fo[t>>2]+Fo[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(Fo[t>>10]+Fo[t>>4&63]+Fo[t<<2&63]+"=")),a.join("")}var Ek={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ek.read=function(e,t,n,r,a){var i,s,o=a*8-r-1,l=(1<<o)-1,u=l>>1,d=-7,h=n?a-1:0,p=n?-1:1,y=e[t+h];for(h+=p,i=y&(1<<-d)-1,y>>=-d,d+=o;d>0;i=i*256+e[t+h],h+=p,d-=8);for(s=i&(1<<-d)-1,i>>=-d,d+=r;d>0;s=s*256+e[t+h],h+=p,d-=8);if(i===0)i=1-u;else{if(i===l)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-u}return(y?-1:1)*s*Math.pow(2,i-r)};Ek.write=function(e,t,n,r,a,i){var s,o,l,u=i*8-a-1,d=(1<<u)-1,h=d>>1,p=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?t+=p/l:t+=p*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=d?(o=0,s=d):s+h>=1?(o=(t*l-1)*Math.pow(2,a),s=s+h):(o=t*Math.pow(2,h-1)*Math.pow(2,a),s=0));a>=8;e[n+y]=o&255,y+=v,o/=256,a-=8);for(s=s<<a|o,u+=a;u>0;e[n+y]=s&255,y+=v,s/=256,u-=8);e[n+y-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=tx,n=Ek,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:s,SharedArrayBuffer:o}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ye=new i(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,i.prototype),Object.setPrototypeOf(ye,O),ye.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(ye){if(ye>a)throw new RangeError('The value "'+ye+'" is invalid for option "size"');const O=new i(ye);return Object.setPrototypeOf(O,d.prototype),O}function d(ye,O,G){if(typeof ye=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ye)}return h(ye,O,G)}d.poolSize=8192;function h(ye,O,G){if(typeof ye=="string")return b(ye,O);if(s.isView(ye))return x(ye);if(ye==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye);if(it(ye,s)||ye&&it(ye.buffer,s)||typeof o<"u"&&(it(ye,o)||ye&&it(ye.buffer,o)))return S(ye,O,G);if(typeof ye=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const fe=ye.valueOf&&ye.valueOf();if(fe!=null&&fe!==ye)return d.from(fe,O,G);const je=E(ye);if(je)return je;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ye[Symbol.toPrimitive]=="function")return d.from(ye[Symbol.toPrimitive]("string"),O,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye)}d.from=function(ye,O,G){return h(ye,O,G)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function p(ye){if(typeof ye!="number")throw new TypeError('"size" argument must be of type number');if(ye<0)throw new RangeError('The value "'+ye+'" is invalid for option "size"')}function y(ye,O,G){return p(ye),ye<=0?u(ye):O!==void 0?typeof G=="string"?u(ye).fill(O,G):u(ye).fill(O):u(ye)}d.alloc=function(ye,O,G){return y(ye,O,G)};function v(ye){return p(ye),u(ye<0?0:C(ye)|0)}d.allocUnsafe=function(ye){return v(ye)},d.allocUnsafeSlow=function(ye){return v(ye)};function b(ye,O){if((typeof O!="string"||O==="")&&(O="utf8"),!d.isEncoding(O))throw new TypeError("Unknown encoding: "+O);const G=I(ye,O)|0;let fe=u(G);const je=fe.write(ye,O);return je!==G&&(fe=fe.slice(0,je)),fe}function w(ye){const O=ye.length<0?0:C(ye.length)|0,G=u(O);for(let fe=0;fe<O;fe+=1)G[fe]=ye[fe]&255;return G}function x(ye){if(it(ye,i)){const O=new i(ye);return S(O.buffer,O.byteOffset,O.byteLength)}return w(ye)}function S(ye,O,G){if(O<0||ye.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(ye.byteLength<O+(G||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return O===void 0&&G===void 0?fe=new i(ye):G===void 0?fe=new i(ye,O):fe=new i(ye,O,G),Object.setPrototypeOf(fe,d.prototype),fe}function E(ye){if(d.isBuffer(ye)){const O=C(ye.length)|0,G=u(O);return G.length===0||ye.copy(G,0,0,O),G}if(ye.length!==void 0)return typeof ye.length!="number"||_t(ye.length)?u(0):w(ye);if(ye.type==="Buffer"&&Array.isArray(ye.data))return w(ye.data)}function C(ye){if(ye>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ye|0}function k(ye){return+ye!=ye&&(ye=0),d.alloc(+ye)}d.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==d.prototype},d.compare=function(O,G){if(it(O,i)&&(O=d.from(O,O.offset,O.byteLength)),it(G,i)&&(G=d.from(G,G.offset,G.byteLength)),!d.isBuffer(O)||!d.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===G)return 0;let fe=O.length,je=G.length;for(let be=0,Ce=Math.min(fe,je);be<Ce;++be)if(O[be]!==G[be]){fe=O[be],je=G[be];break}return fe<je?-1:je<fe?1:0},d.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(O,G){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return d.alloc(0);let fe;if(G===void 0)for(G=0,fe=0;fe<O.length;++fe)G+=O[fe].length;const je=d.allocUnsafe(G);let be=0;for(fe=0;fe<O.length;++fe){let Ce=O[fe];if(it(Ce,i))be+Ce.length>je.length?(d.isBuffer(Ce)||(Ce=d.from(Ce)),Ce.copy(je,be)):i.prototype.set.call(je,Ce,be);else if(d.isBuffer(Ce))Ce.copy(je,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=Ce.length}return je};function I(ye,O){if(d.isBuffer(ye))return ye.length;if(s.isView(ye)||it(ye,s))return ye.byteLength;if(typeof ye!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ye);const G=ye.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&G===0)return 0;let je=!1;for(;;)switch(O){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return xe(ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G*2;case"hex":return G>>>1;case"base64":return We(ye).length;default:if(je)return fe?-1:xe(ye).length;O=(""+O).toLowerCase(),je=!0}}d.byteLength=I;function R(ye,O,G){let fe=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0,O>>>=0,G<=O))return"";for(ye||(ye="utf8");;)switch(ye){case"hex":return Q(this,O,G);case"utf8":case"utf-8":return te(this,O,G);case"ascii":return D(this,O,G);case"latin1":case"binary":return J(this,O,G);case"base64":return ae(this,O,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,O,G);default:if(fe)throw new TypeError("Unknown encoding: "+ye);ye=(ye+"").toLowerCase(),fe=!0}}d.prototype._isBuffer=!0;function j(ye,O,G){const fe=ye[O];ye[O]=ye[G],ye[G]=fe}d.prototype.swap16=function(){const O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let G=0;G<O;G+=2)j(this,G,G+1);return this},d.prototype.swap32=function(){const O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let G=0;G<O;G+=4)j(this,G,G+3),j(this,G+1,G+2);return this},d.prototype.swap64=function(){const O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let G=0;G<O;G+=8)j(this,G,G+7),j(this,G+1,G+6),j(this,G+2,G+5),j(this,G+3,G+4);return this},d.prototype.toString=function(){const O=this.length;return O===0?"":arguments.length===0?te(this,0,O):R.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(O){if(!d.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:d.compare(this,O)===0},d.prototype.inspect=function(){let O="";const G=e.INSPECT_MAX_BYTES;return O=this.toString("hex",0,G).replace(/(.{2})/g,"$1 ").trim(),this.length>G&&(O+=" ... "),"<Buffer "+O+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(O,G,fe,je,be){if(it(O,i)&&(O=d.from(O,O.offset,O.byteLength)),!d.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(G===void 0&&(G=0),fe===void 0&&(fe=O?O.length:0),je===void 0&&(je=0),be===void 0&&(be=this.length),G<0||fe>O.length||je<0||be>this.length)throw new RangeError("out of range index");if(je>=be&&G>=fe)return 0;if(je>=be)return-1;if(G>=fe)return 1;if(G>>>=0,fe>>>=0,je>>>=0,be>>>=0,this===O)return 0;let Ce=be-je,le=fe-G;const ft=Math.min(Ce,le),vt=this.slice(je,be),F=O.slice(G,fe);for(let Be=0;Be<ft;++Be)if(vt[Be]!==F[Be]){Ce=vt[Be],le=F[Be];break}return Ce<le?-1:le<Ce?1:0};function L(ye,O,G,fe,je){if(ye.length===0)return-1;if(typeof G=="string"?(fe=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,_t(G)&&(G=je?0:ye.length-1),G<0&&(G=ye.length+G),G>=ye.length){if(je)return-1;G=ye.length-1}else if(G<0)if(je)G=0;else return-1;if(typeof O=="string"&&(O=d.from(O,fe)),d.isBuffer(O))return O.length===0?-1:B(ye,O,G,fe,je);if(typeof O=="number")return O=O&255,typeof i.prototype.indexOf=="function"?je?i.prototype.indexOf.call(ye,O,G):i.prototype.lastIndexOf.call(ye,O,G):B(ye,[O],G,fe,je);throw new TypeError("val must be string, number or Buffer")}function B(ye,O,G,fe,je){let be=1,Ce=ye.length,le=O.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(ye.length<2||O.length<2)return-1;be=2,Ce/=2,le/=2,G/=2}function ft(F,Be){return be===1?F[Be]:F.readUInt16BE(Be*be)}let vt;if(je){let F=-1;for(vt=G;vt<Ce;vt++)if(ft(ye,vt)===ft(O,F===-1?0:vt-F)){if(F===-1&&(F=vt),vt-F+1===le)return F*be}else F!==-1&&(vt-=vt-F),F=-1}else for(G+le>Ce&&(G=Ce-le),vt=G;vt>=0;vt--){let F=!0;for(let Be=0;Be<le;Be++)if(ft(ye,vt+Be)!==ft(O,Be)){F=!1;break}if(F)return vt}return-1}d.prototype.includes=function(O,G,fe){return this.indexOf(O,G,fe)!==-1},d.prototype.indexOf=function(O,G,fe){return L(this,O,G,fe,!0)},d.prototype.lastIndexOf=function(O,G,fe){return L(this,O,G,fe,!1)};function Z(ye,O,G,fe){G=Number(G)||0;const je=ye.length-G;fe?(fe=Number(fe),fe>je&&(fe=je)):fe=je;const be=O.length;fe>be/2&&(fe=be/2);let Ce;for(Ce=0;Ce<fe;++Ce){const le=parseInt(O.substr(Ce*2,2),16);if(_t(le))return Ce;ye[G+Ce]=le}return Ce}function P(ye,O,G,fe){return Nt(xe(O,ye.length-G),ye,G,fe)}function K(ye,O,G,fe){return Nt(Pe(O),ye,G,fe)}function q(ye,O,G,fe){return Nt(We(O),ye,G,fe)}function de(ye,O,G,fe){return Nt(Ee(O,ye.length-G),ye,G,fe)}d.prototype.write=function(O,G,fe,je){if(G===void 0)je="utf8",fe=this.length,G=0;else if(fe===void 0&&typeof G=="string")je=G,fe=this.length,G=0;else if(isFinite(G))G=G>>>0,isFinite(fe)?(fe=fe>>>0,je===void 0&&(je="utf8")):(je=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-G;if((fe===void 0||fe>be)&&(fe=be),O.length>0&&(fe<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");je||(je="utf8");let Ce=!1;for(;;)switch(je){case"hex":return Z(this,O,G,fe);case"utf8":case"utf-8":return P(this,O,G,fe);case"ascii":case"latin1":case"binary":return K(this,O,G,fe);case"base64":return q(this,O,G,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,O,G,fe);default:if(Ce)throw new TypeError("Unknown encoding: "+je);je=(""+je).toLowerCase(),Ce=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(ye,O,G){return O===0&&G===ye.length?t.fromByteArray(ye):t.fromByteArray(ye.slice(O,G))}function te(ye,O,G){G=Math.min(ye.length,G);const fe=[];let je=O;for(;je<G;){const be=ye[je];let Ce=null,le=be>239?4:be>223?3:be>191?2:1;if(je+le<=G){let ft,vt,F,Be;switch(le){case 1:be<128&&(Ce=be);break;case 2:ft=ye[je+1],(ft&192)===128&&(Be=(be&31)<<6|ft&63,Be>127&&(Ce=Be));break;case 3:ft=ye[je+1],vt=ye[je+2],(ft&192)===128&&(vt&192)===128&&(Be=(be&15)<<12|(ft&63)<<6|vt&63,Be>2047&&(Be<55296||Be>57343)&&(Ce=Be));break;case 4:ft=ye[je+1],vt=ye[je+2],F=ye[je+3],(ft&192)===128&&(vt&192)===128&&(F&192)===128&&(Be=(be&15)<<18|(ft&63)<<12|(vt&63)<<6|F&63,Be>65535&&Be<1114112&&(Ce=Be))}}Ce===null?(Ce=65533,le=1):Ce>65535&&(Ce-=65536,fe.push(Ce>>>10&1023|55296),Ce=56320|Ce&1023),fe.push(Ce),je+=le}return re(fe)}const X=4096;function re(ye){const O=ye.length;if(O<=X)return String.fromCharCode.apply(String,ye);let G="",fe=0;for(;fe<O;)G+=String.fromCharCode.apply(String,ye.slice(fe,fe+=X));return G}function D(ye,O,G){let fe="";G=Math.min(ye.length,G);for(let je=O;je<G;++je)fe+=String.fromCharCode(ye[je]&127);return fe}function J(ye,O,G){let fe="";G=Math.min(ye.length,G);for(let je=O;je<G;++je)fe+=String.fromCharCode(ye[je]);return fe}function Q(ye,O,G){const fe=ye.length;(!O||O<0)&&(O=0),(!G||G<0||G>fe)&&(G=fe);let je="";for(let be=O;be<G;++be)je+=Ft[ye[be]];return je}function ie(ye,O,G){const fe=ye.slice(O,G);let je="";for(let be=0;be<fe.length-1;be+=2)je+=String.fromCharCode(fe[be]+fe[be+1]*256);return je}d.prototype.slice=function(O,G){const fe=this.length;O=~~O,G=G===void 0?fe:~~G,O<0?(O+=fe,O<0&&(O=0)):O>fe&&(O=fe),G<0?(G+=fe,G<0&&(G=0)):G>fe&&(G=fe),G<O&&(G=O);const je=this.subarray(O,G);return Object.setPrototypeOf(je,d.prototype),je};function me(ye,O,G){if(ye%1!==0||ye<0)throw new RangeError("offset is not uint");if(ye+O>G)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(O,G,fe){O=O>>>0,G=G>>>0,fe||me(O,G,this.length);let je=this[O],be=1,Ce=0;for(;++Ce<G&&(be*=256);)je+=this[O+Ce]*be;return je},d.prototype.readUintBE=d.prototype.readUIntBE=function(O,G,fe){O=O>>>0,G=G>>>0,fe||me(O,G,this.length);let je=this[O+--G],be=1;for(;G>0&&(be*=256);)je+=this[O+--G]*be;return je},d.prototype.readUint8=d.prototype.readUInt8=function(O,G){return O=O>>>0,G||me(O,1,this.length),this[O]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(O,G){return O=O>>>0,G||me(O,2,this.length),this[O]|this[O+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(O,G){return O=O>>>0,G||me(O,2,this.length),this[O]<<8|this[O+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(O,G){return O=O>>>0,G||me(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(O,G){return O=O>>>0,G||me(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},d.prototype.readBigUInt64LE=Pt(function(O){O=O>>>0,Te(O,"offset");const G=this[O],fe=this[O+7];(G===void 0||fe===void 0)&&ue(O,this.length-8);const je=G+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24,be=this[++O]+this[++O]*2**8+this[++O]*2**16+fe*2**24;return BigInt(je)+(BigInt(be)<<BigInt(32))}),d.prototype.readBigUInt64BE=Pt(function(O){O=O>>>0,Te(O,"offset");const G=this[O],fe=this[O+7];(G===void 0||fe===void 0)&&ue(O,this.length-8);const je=G*2**24+this[++O]*2**16+this[++O]*2**8+this[++O],be=this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+fe;return(BigInt(je)<<BigInt(32))+BigInt(be)}),d.prototype.readIntLE=function(O,G,fe){O=O>>>0,G=G>>>0,fe||me(O,G,this.length);let je=this[O],be=1,Ce=0;for(;++Ce<G&&(be*=256);)je+=this[O+Ce]*be;return be*=128,je>=be&&(je-=Math.pow(2,8*G)),je},d.prototype.readIntBE=function(O,G,fe){O=O>>>0,G=G>>>0,fe||me(O,G,this.length);let je=G,be=1,Ce=this[O+--je];for(;je>0&&(be*=256);)Ce+=this[O+--je]*be;return be*=128,Ce>=be&&(Ce-=Math.pow(2,8*G)),Ce},d.prototype.readInt8=function(O,G){return O=O>>>0,G||me(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},d.prototype.readInt16LE=function(O,G){O=O>>>0,G||me(O,2,this.length);const fe=this[O]|this[O+1]<<8;return fe&32768?fe|4294901760:fe},d.prototype.readInt16BE=function(O,G){O=O>>>0,G||me(O,2,this.length);const fe=this[O+1]|this[O]<<8;return fe&32768?fe|4294901760:fe},d.prototype.readInt32LE=function(O,G){return O=O>>>0,G||me(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},d.prototype.readInt32BE=function(O,G){return O=O>>>0,G||me(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},d.prototype.readBigInt64LE=Pt(function(O){O=O>>>0,Te(O,"offset");const G=this[O],fe=this[O+7];(G===void 0||fe===void 0)&&ue(O,this.length-8);const je=this[O+4]+this[O+5]*2**8+this[O+6]*2**16+(fe<<24);return(BigInt(je)<<BigInt(32))+BigInt(G+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24)}),d.prototype.readBigInt64BE=Pt(function(O){O=O>>>0,Te(O,"offset");const G=this[O],fe=this[O+7];(G===void 0||fe===void 0)&&ue(O,this.length-8);const je=(G<<24)+this[++O]*2**16+this[++O]*2**8+this[++O];return(BigInt(je)<<BigInt(32))+BigInt(this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+fe)}),d.prototype.readFloatLE=function(O,G){return O=O>>>0,G||me(O,4,this.length),n.read(this,O,!0,23,4)},d.prototype.readFloatBE=function(O,G){return O=O>>>0,G||me(O,4,this.length),n.read(this,O,!1,23,4)},d.prototype.readDoubleLE=function(O,G){return O=O>>>0,G||me(O,8,this.length),n.read(this,O,!0,52,8)},d.prototype.readDoubleBE=function(O,G){return O=O>>>0,G||me(O,8,this.length),n.read(this,O,!1,52,8)};function ve(ye,O,G,fe,je,be){if(!d.isBuffer(ye))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>je||O<be)throw new RangeError('"value" argument is out of bounds');if(G+fe>ye.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(O,G,fe,je){if(O=+O,G=G>>>0,fe=fe>>>0,!je){const le=Math.pow(2,8*fe)-1;ve(this,O,G,fe,le,0)}let be=1,Ce=0;for(this[G]=O&255;++Ce<fe&&(be*=256);)this[G+Ce]=O/be&255;return G+fe},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(O,G,fe,je){if(O=+O,G=G>>>0,fe=fe>>>0,!je){const le=Math.pow(2,8*fe)-1;ve(this,O,G,fe,le,0)}let be=fe-1,Ce=1;for(this[G+be]=O&255;--be>=0&&(Ce*=256);)this[G+be]=O/Ce&255;return G+fe},d.prototype.writeUint8=d.prototype.writeUInt8=function(O,G,fe){return O=+O,G=G>>>0,fe||ve(this,O,G,1,255,0),this[G]=O&255,G+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(O,G,fe){return O=+O,G=G>>>0,fe||ve(this,O,G,2,65535,0),this[G]=O&255,this[G+1]=O>>>8,G+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(O,G,fe){return O=+O,G=G>>>0,fe||ve(this,O,G,2,65535,0),this[G]=O>>>8,this[G+1]=O&255,G+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(O,G,fe){return O=+O,G=G>>>0,fe||ve(this,O,G,4,4294967295,0),this[G+3]=O>>>24,this[G+2]=O>>>16,this[G+1]=O>>>8,this[G]=O&255,G+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(O,G,fe){return O=+O,G=G>>>0,fe||ve(this,O,G,4,4294967295,0),this[G]=O>>>24,this[G+1]=O>>>16,this[G+2]=O>>>8,this[G+3]=O&255,G+4};function Me(ye,O,G,fe,je){Se(O,fe,je,ye,G,7);let be=Number(O&BigInt(4294967295));ye[G++]=be,be=be>>8,ye[G++]=be,be=be>>8,ye[G++]=be,be=be>>8,ye[G++]=be;let Ce=Number(O>>BigInt(32)&BigInt(4294967295));return ye[G++]=Ce,Ce=Ce>>8,ye[G++]=Ce,Ce=Ce>>8,ye[G++]=Ce,Ce=Ce>>8,ye[G++]=Ce,G}function Ae(ye,O,G,fe,je){Se(O,fe,je,ye,G,7);let be=Number(O&BigInt(4294967295));ye[G+7]=be,be=be>>8,ye[G+6]=be,be=be>>8,ye[G+5]=be,be=be>>8,ye[G+4]=be;let Ce=Number(O>>BigInt(32)&BigInt(4294967295));return ye[G+3]=Ce,Ce=Ce>>8,ye[G+2]=Ce,Ce=Ce>>8,ye[G+1]=Ce,Ce=Ce>>8,ye[G]=Ce,G+8}d.prototype.writeBigUInt64LE=Pt(function(O,G=0){return Me(this,O,G,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Pt(function(O,G=0){return Ae(this,O,G,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(O,G,fe,je){if(O=+O,G=G>>>0,!je){const ft=Math.pow(2,8*fe-1);ve(this,O,G,fe,ft-1,-ft)}let be=0,Ce=1,le=0;for(this[G]=O&255;++be<fe&&(Ce*=256);)O<0&&le===0&&this[G+be-1]!==0&&(le=1),this[G+be]=(O/Ce>>0)-le&255;return G+fe},d.prototype.writeIntBE=function(O,G,fe,je){if(O=+O,G=G>>>0,!je){const ft=Math.pow(2,8*fe-1);ve(this,O,G,fe,ft-1,-ft)}let be=fe-1,Ce=1,le=0;for(this[G+be]=O&255;--be>=0&&(Ce*=256);)O<0&&le===0&&this[G+be+1]!==0&&(le=1),this[G+be]=(O/Ce>>0)-le&255;return G+fe},d.prototype.writeInt8=function(O,G,fe){return O=+O,G=G>>>0,fe||ve(this,O,G,1,127,-128),O<0&&(O=255+O+1),this[G]=O&255,G+1},d.prototype.writeInt16LE=function(O,G,fe){return O=+O,G=G>>>0,fe||ve(this,O,G,2,32767,-32768),this[G]=O&255,this[G+1]=O>>>8,G+2},d.prototype.writeInt16BE=function(O,G,fe){return O=+O,G=G>>>0,fe||ve(this,O,G,2,32767,-32768),this[G]=O>>>8,this[G+1]=O&255,G+2},d.prototype.writeInt32LE=function(O,G,fe){return O=+O,G=G>>>0,fe||ve(this,O,G,4,2147483647,-2147483648),this[G]=O&255,this[G+1]=O>>>8,this[G+2]=O>>>16,this[G+3]=O>>>24,G+4},d.prototype.writeInt32BE=function(O,G,fe){return O=+O,G=G>>>0,fe||ve(this,O,G,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[G]=O>>>24,this[G+1]=O>>>16,this[G+2]=O>>>8,this[G+3]=O&255,G+4},d.prototype.writeBigInt64LE=Pt(function(O,G=0){return Me(this,O,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Pt(function(O,G=0){return Ae(this,O,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(ye,O,G,fe,je,be){if(G+fe>ye.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function ke(ye,O,G,fe,je){return O=+O,G=G>>>0,je||Re(ye,O,G,4),n.write(ye,O,G,fe,23,4),G+4}d.prototype.writeFloatLE=function(O,G,fe){return ke(this,O,G,!0,fe)},d.prototype.writeFloatBE=function(O,G,fe){return ke(this,O,G,!1,fe)};function Fe(ye,O,G,fe,je){return O=+O,G=G>>>0,je||Re(ye,O,G,8),n.write(ye,O,G,fe,52,8),G+8}d.prototype.writeDoubleLE=function(O,G,fe){return Fe(this,O,G,!0,fe)},d.prototype.writeDoubleBE=function(O,G,fe){return Fe(this,O,G,!1,fe)},d.prototype.copy=function(O,G,fe,je){if(!d.isBuffer(O))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!je&&je!==0&&(je=this.length),G>=O.length&&(G=O.length),G||(G=0),je>0&&je<fe&&(je=fe),je===fe||O.length===0||this.length===0)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(je<0)throw new RangeError("sourceEnd out of bounds");je>this.length&&(je=this.length),O.length-G<je-fe&&(je=O.length-G+fe);const be=je-fe;return this===O&&typeof i.prototype.copyWithin=="function"?this.copyWithin(G,fe,je):i.prototype.set.call(O,this.subarray(fe,je),G),be},d.prototype.fill=function(O,G,fe,je){if(typeof O=="string"){if(typeof G=="string"?(je=G,G=0,fe=this.length):typeof fe=="string"&&(je=fe,fe=this.length),je!==void 0&&typeof je!="string")throw new TypeError("encoding must be a string");if(typeof je=="string"&&!d.isEncoding(je))throw new TypeError("Unknown encoding: "+je);if(O.length===1){const Ce=O.charCodeAt(0);(je==="utf8"&&Ce<128||je==="latin1")&&(O=Ce)}}else typeof O=="number"?O=O&255:typeof O=="boolean"&&(O=Number(O));if(G<0||this.length<G||this.length<fe)throw new RangeError("Out of range index");if(fe<=G)return this;G=G>>>0,fe=fe===void 0?this.length:fe>>>0,O||(O=0);let be;if(typeof O=="number")for(be=G;be<fe;++be)this[be]=O;else{const Ce=d.isBuffer(O)?O:d.from(O,je),le=Ce.length;if(le===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(be=0;be<fe-G;++be)this[be+G]=Ce[be%le]}return this};const et={};function Le(ye,O,G){et[ye]=class extends G{constructor(){super(),Object.defineProperty(this,"message",{value:O.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ye}]`,this.stack,delete this.name}get code(){return ye}set code(je){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:je,writable:!0})}toString(){return`${this.name} [${ye}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(ye){return ye?`${ye} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(ye,O){return`The "${ye}" argument must be of type number. Received type ${typeof O}`},TypeError),Le("ERR_OUT_OF_RANGE",function(ye,O,G){let fe=`The value of "${ye}" is out of range.`,je=G;return Number.isInteger(G)&&Math.abs(G)>2**32?je=Ie(String(G)):typeof G=="bigint"&&(je=String(G),(G>BigInt(2)**BigInt(32)||G<-(BigInt(2)**BigInt(32)))&&(je=Ie(je)),je+="n"),fe+=` It must be ${O}. Received ${je}`,fe},RangeError);function Ie(ye){let O="",G=ye.length;const fe=ye[0]==="-"?1:0;for(;G>=fe+4;G-=3)O=`_${ye.slice(G-3,G)}${O}`;return`${ye.slice(0,G)}${O}`}function z(ye,O,G){Te(O,"offset"),(ye[O]===void 0||ye[O+G]===void 0)&&ue(O,ye.length-(G+1))}function Se(ye,O,G,fe,je,be){if(ye>G||ye<O){const Ce=typeof O=="bigint"?"n":"";let le;throw O===0||O===BigInt(0)?le=`>= 0${Ce} and < 2${Ce} ** ${(be+1)*8}${Ce}`:le=`>= -(2${Ce} ** ${(be+1)*8-1}${Ce}) and < 2 ** ${(be+1)*8-1}${Ce}`,new et.ERR_OUT_OF_RANGE("value",le,ye)}z(fe,je,be)}function Te(ye,O){if(typeof ye!="number")throw new et.ERR_INVALID_ARG_TYPE(O,"number",ye)}function ue(ye,O,G){throw Math.floor(ye)!==ye?(Te(ye,G),new et.ERR_OUT_OF_RANGE("offset","an integer",ye)):O<0?new et.ERR_BUFFER_OUT_OF_BOUNDS:new et.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${O}`,ye)}const oe=/[^+/0-9A-Za-z-_]/g;function ee(ye){if(ye=ye.split("=")[0],ye=ye.trim().replace(oe,""),ye.length<2)return"";for(;ye.length%4!==0;)ye=ye+"=";return ye}function xe(ye,O){O=O||1/0;let G;const fe=ye.length;let je=null;const be=[];for(let Ce=0;Ce<fe;++Ce){if(G=ye.charCodeAt(Ce),G>55295&&G<57344){if(!je){if(G>56319){(O-=3)>-1&&be.push(239,191,189);continue}else if(Ce+1===fe){(O-=3)>-1&&be.push(239,191,189);continue}je=G;continue}if(G<56320){(O-=3)>-1&&be.push(239,191,189),je=G;continue}G=(je-55296<<10|G-56320)+65536}else je&&(O-=3)>-1&&be.push(239,191,189);if(je=null,G<128){if((O-=1)<0)break;be.push(G)}else if(G<2048){if((O-=2)<0)break;be.push(G>>6|192,G&63|128)}else if(G<65536){if((O-=3)<0)break;be.push(G>>12|224,G>>6&63|128,G&63|128)}else if(G<1114112){if((O-=4)<0)break;be.push(G>>18|240,G>>12&63|128,G>>6&63|128,G&63|128)}else throw new Error("Invalid code point")}return be}function Pe(ye){const O=[];for(let G=0;G<ye.length;++G)O.push(ye.charCodeAt(G)&255);return O}function Ee(ye,O){let G,fe,je;const be=[];for(let Ce=0;Ce<ye.length&&!((O-=2)<0);++Ce)G=ye.charCodeAt(Ce),fe=G>>8,je=G%256,be.push(je),be.push(fe);return be}function We(ye){return t.toByteArray(ee(ye))}function Nt(ye,O,G,fe){let je;for(je=0;je<fe&&!(je+G>=O.length||je>=ye.length);++je)O[je+G]=ye[je];return je}function it(ye,O){return ye instanceof O||ye!=null&&ye.constructor!=null&&ye.constructor.name!=null&&ye.constructor.name===O.name}function _t(ye){return ye!==ye}const Ft=function(){const ye="0123456789abcdef",O=new Array(256);for(let G=0;G<16;++G){const fe=G*16;for(let je=0;je<16;++je)O[fe+je]=ye[G]+ye[je]}return O}();function Pt(ye){return typeof BigInt>"u"?Zt:ye}function Zt(){throw new Error("BigInt not supported")}})(Sk);const Jt=Sk.Buffer,Fr=Sk.Buffer;var ud={exports:{}},s3;function cG(){if(s3)return ud.exports;s3=1;const e=typeof Jt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,u){u==null&&l!==null&&typeof l=="object"&&(u=l,l=void 0),e&&Jt.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const d=JSON.parse(o,l);if(d===null||typeof d!="object")return d;const h=u&&u.protoAction||"error",p=u&&u.constructorAction||"error";if(h==="ignore"&&p==="ignore")return d;if(h!=="ignore"&&p!=="ignore"){if(t.test(o)===!1&&n.test(o)===!1)return d}else if(h!=="ignore"&&p==="ignore"){if(t.test(o)===!1)return d}else if(n.test(o)===!1)return d;return a(d,{protoAction:h,constructorAction:p,safe:u&&u.safe})}function a(o,{protoAction:l="error",constructorAction:u="error",safe:d}={}){let h=[o];for(;h.length;){const p=h;h=[];for(const y of p){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(y,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete y.__proto__}if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(y,"constructor")&&Object.prototype.hasOwnProperty.call(y.constructor,"prototype")){if(d===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete y.constructor}for(const v in y){const b=y[v];b&&typeof b=="object"&&h.push(b)}}}return o}function i(o,l,u){const d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,u)}finally{Error.stackTraceLimit=d}}function s(o,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=u}}return ud.exports=i,ud.exports.default=i,ud.exports.parse=i,ud.exports.safeParse=s,ud.exports.scan=a,ud.exports}var uG=cG();const co=ui(uG);var dG={};function Wo(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function fG(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function hG(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function pG(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),p=d+1,y=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);o(h,y)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=mG(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],u)},flush(l){i(e,l),s(l)}})}function mG(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function d0(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Gd=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=eG(n,t);if(e==null)return a;if(n.includes(r))throw new xk({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Lo=Gd();function gG(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function yG(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function vv(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function bG({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new gb({message:`${r} API key must be a string.`});if(typeof ta>"u")throw new gb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=dG[t],e==null)throw new gb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new gb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var Pv=Symbol.for("vercel.ai.validator");function vG(e){return{[Pv]:!0,validate:e}}function wG(e){return typeof e=="object"&&e!==null&&Pv in e&&e[Pv]===!0&&"validate"in e}function xG(e){return wG(e)?e:_G(e)}function _G(e){return vG(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function SG({value:e,schema:t}){const n=ep({value:e,schema:t});if(!n.success)throw lu.wrap({value:e,cause:n.error});return n.value}function ep({value:e,schema:t}){const n=xG(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:lu.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:lu.wrap({value:e,cause:r})}}}function EG({text:e,schema:t}){try{const n=co.parse(e);return t==null?n:SG({value:n,schema:t})}catch(n){throw ou.isInstance(n)||lu.isInstance(n)?n:new ou({text:e,cause:n})}}function jd({text:e,schema:t}){try{const n=co.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=ep({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:ou.isInstance(n)?n:new ou({text:e,cause:n})}}}function o3(e){try{return co.parse(e),!0}catch{return!1}}function CG({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=ep({value:t[e],schema:n});if(!r.success)throw new xk({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var kG=()=>globalThis.fetch,Qs=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>TG({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),TG=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=kG()})=>{try{const o=await s(e,{method:"POST",headers:yG(t),body:n.content,signal:i}),l=d0(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw vv(d)||_a.isInstance(d)?d:new _a({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(vv(u)||_a.isInstance(u))?u:new _a({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(vv(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new _a({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},UD=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=d0(r);if(s.trim()==="")return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=EG({text:s,schema:e});return{responseHeaders:o,value:new _a({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},Ck=e=>async({response:t})=>{const n=d0(t);if(t.body==null)throw new wk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(pG()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(jd({text:r,schema:e}))}}))}},Wd=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=jd({text:a,schema:e}),s=d0(t);if(!i.success)throw new _a({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:AG,atob:NG}=globalThis;function HD(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=NG(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function Ah(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return AG(t)}function qD(e){return e==null?void 0:e.replace(/\/$/,"")}var ar;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return e.objectValues(s)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},e.find=(a,i)=>{for(const s of a)if(i(s))return s},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ar||(ar={}));var Y2;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Y2||(Y2={}));const rn=ar.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fl=e=>{switch(typeof e){case"undefined":return rn.undefined;case"string":return rn.string;case"number":return isNaN(e)?rn.nan:rn.number;case"boolean":return rn.boolean;case"function":return rn.function;case"bigint":return rn.bigint;case"symbol":return rn.symbol;case"object":return Array.isArray(e)?rn.array:e===null?rn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?rn.promise:typeof Map<"u"&&e instanceof Map?rn.map:typeof Set<"u"&&e instanceof Set?rn.set:typeof Date<"u"&&e instanceof Date?rn.date:rn.object;default:return rn.unknown}},$t=ar.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),RG=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class rs extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(s))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return a(this),r}static assert(t){if(!(t instanceof rs))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ar.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}rs.create=e=>new rs(e);const Nh=(e,t)=>{let n;switch(e.code){case $t.invalid_type:e.received===rn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case $t.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ar.jsonStringifyReplacer)}`;break;case $t.unrecognized_keys:n=`Unrecognized key(s) in object: ${ar.joinValues(e.keys,", ")}`;break;case $t.invalid_union:n="Invalid input";break;case $t.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ar.joinValues(e.options)}`;break;case $t.invalid_enum_value:n=`Invalid enum value. Expected ${ar.joinValues(e.options)}, received '${e.received}'`;break;case $t.invalid_arguments:n="Invalid function arguments";break;case $t.invalid_return_type:n="Invalid function return type";break;case $t.invalid_date:n="Invalid date";break;case $t.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ar.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case $t.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case $t.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case $t.custom:n="Invalid input";break;case $t.invalid_intersection_types:n="Intersection results could not be merged";break;case $t.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case $t.not_finite:n="Number must be finite";break;default:n=t.defaultError,ar.assertNever(e)}return{message:n}};let VD=Nh;function IG(e){VD=e}function Fv(){return VD}const Lv=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},jG=[];function en(e,t){const n=Fv(),r=Lv({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Nh?void 0:Nh].filter(a=>!!a)});e.common.issues.push(r)}class si{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return En;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,s=await a.value;r.push({key:i,value:s})}return si.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return En;i.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||a.alwaysSet)&&(r[i.value]=s.value)}return{status:t.value,value:r}}}const En=Object.freeze({status:"aborted"}),dh=e=>({status:"dirty",value:e}),xi=e=>({status:"valid",value:e}),X2=e=>e.status==="aborted",J2=e=>e.status==="dirty",Od=e=>e.status==="valid",og=e=>typeof Promise<"u"&&e instanceof Promise;function $v(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function GD(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var un;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(un||(un={}));var Vm,Gm;class Ko{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const l3=(e,t)=>{if(Od(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new rs(e.common.issues);return this._error=n,this._error}}};function Dn(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(s,o)=>{var l,u;const{message:d}=e;return s.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:o.defaultError}},description:a}}class Ln{get description(){return this._def.description}_getType(t){return Fl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Fl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new si,ctx:{common:t.parent.common,data:t.data,parsedType:Fl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(og(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return l3(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return Od(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>Od(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fl(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(og(a)?a:Promise.resolve(a));return l3(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const s=t(a),o=()=>i.addIssue({code:$t.custom,...r(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new eo({schema:this,typeName:qt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ys.create(this,this._def)}nullable(){return fu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Zs.create(this)}promise(){return Ih.create(this,this._def)}or(t){return dg.create([this,t],this._def)}and(t){return fg.create(this,t,this._def)}transform(t){return new eo({...Dn(this._def),schema:this,typeName:qt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new yg({...Dn(this._def),innerType:this,defaultValue:n,typeName:qt.ZodDefault})}brand(){return new kk({typeName:qt.ZodBranded,type:this,...Dn(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new bg({...Dn(this._def),innerType:this,catchValue:n,typeName:qt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return f0.create(this,t)}readonly(){return vg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const OG=/^c[^\s-]{8,}$/i,DG=/^[0-9a-z]+$/,MG=/^[0-9A-HJKMNP-TV-Z]{26}$/i,PG=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,FG=/^[a-z0-9_-]{21}$/i,LG=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,$G=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,BG=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zG="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let kS;const UG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,HG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,VG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,GG=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,WG=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,WD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",KG=new RegExp(`^${WD}$`);function KD(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function ZG(e){return new RegExp(`^${KD(e)}$`)}function ZD(e){let t=`${WD}T${KD(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function YG(e,t){return!!((t==="v4"||!t)&&UG.test(e)||(t==="v6"||!t)&&qG.test(e))}function XG(e,t){if(!LG.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function JG(e,t){return!!((t==="v4"||!t)&&HG.test(e)||(t==="v6"||!t)&&VG.test(e))}class Ws extends Ln{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==rn.string){const i=this._getOrReturnCtx(t);return en(i,{code:$t.invalid_type,expected:rn.string,received:i.parsedType}),En}const r=new si;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),en(a,{code:$t.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),en(a,{code:$t.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const s=t.data.length>i.value,o=t.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(t,a),s?en(a,{code:$t.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&en(a,{code:$t.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")BG.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"email",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")kS||(kS=new RegExp(zG,"u")),kS.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"emoji",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")PG.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"uuid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")FG.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"nanoid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")OG.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"cuid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")DG.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"cuid2",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")MG.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"ulid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),en(a,{validation:"url",code:$t.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"regex",code:$t.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),en(a,{code:$t.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),en(a,{code:$t.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),en(a,{code:$t.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?ZD(i).test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{code:$t.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?KG.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{code:$t.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?ZG(i).test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{code:$t.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?$G.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"duration",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?YG(t.data,i.version)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"ip",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?XG(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"jwt",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?JG(t.data,i.version)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"cidr",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?GG.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"base64",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?WG.test(t.data)||(a=this._getOrReturnCtx(t,a),en(a,{validation:"base64url",code:$t.invalid_string,message:i.message}),r.dirty()):ar.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:$t.invalid_string,...un.errToObj(r)})}_addCheck(t){return new Ws({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...un.errToObj(t)})}url(t){return this._addCheck({kind:"url",...un.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...un.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...un.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...un.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...un.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...un.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...un.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...un.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...un.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...un.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...un.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...un.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...un.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...un.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...un.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...un.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...un.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...un.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...un.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...un.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...un.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...un.errToObj(n)})}nonempty(t){return this.min(1,un.errToObj(t))}trim(){return new Ws({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ws({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ws({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ws.create=e=>{var t;return new Ws({checks:[],typeName:qt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Dn(e)})};function QG(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}class cu extends Ln{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==rn.number){const i=this._getOrReturnCtx(t);return en(i,{code:$t.invalid_type,expected:rn.number,received:i.parsedType}),En}let r;const a=new si;for(const i of this._def.checks)i.kind==="int"?ar.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),en(r,{code:$t.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),en(r,{code:$t.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),en(r,{code:$t.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?QG(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),en(r,{code:$t.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),en(r,{code:$t.not_finite,message:i.message}),a.dirty()):ar.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,un.toString(n))}gt(t,n){return this.setLimit("min",t,!1,un.toString(n))}lte(t,n){return this.setLimit("max",t,!0,un.toString(n))}lt(t,n){return this.setLimit("max",t,!1,un.toString(n))}setLimit(t,n,r,a){return new cu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:un.toString(a)}]})}_addCheck(t){return new cu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:un.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:un.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:un.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:un.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:un.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:un.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:un.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:un.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:un.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ar.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}cu.create=e=>new cu({checks:[],typeName:qt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Dn(e)});class uu extends Ln{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==rn.bigint)return this._getInvalidInput(t);let r;const a=new si;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),en(r,{code:$t.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),en(r,{code:$t.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),en(r,{code:$t.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ar.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return en(n,{code:$t.invalid_type,expected:rn.bigint,received:n.parsedType}),En}gte(t,n){return this.setLimit("min",t,!0,un.toString(n))}gt(t,n){return this.setLimit("min",t,!1,un.toString(n))}lte(t,n){return this.setLimit("max",t,!0,un.toString(n))}lt(t,n){return this.setLimit("max",t,!1,un.toString(n))}setLimit(t,n,r,a){return new uu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:un.toString(a)}]})}_addCheck(t){return new uu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:un.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:un.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:un.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:un.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:un.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}uu.create=e=>{var t;return new uu({checks:[],typeName:qt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Dn(e)})};class lg extends Ln{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==rn.boolean){const r=this._getOrReturnCtx(t);return en(r,{code:$t.invalid_type,expected:rn.boolean,received:r.parsedType}),En}return xi(t.data)}}lg.create=e=>new lg({typeName:qt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Dn(e)});class Dd extends Ln{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==rn.date){const i=this._getOrReturnCtx(t);return en(i,{code:$t.invalid_type,expected:rn.date,received:i.parsedType}),En}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return en(i,{code:$t.invalid_date}),En}const r=new si;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),en(a,{code:$t.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),en(a,{code:$t.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ar.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Dd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:un.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:un.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Dd.create=e=>new Dd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:qt.ZodDate,...Dn(e)});class Bv extends Ln{_parse(t){if(this._getType(t)!==rn.symbol){const r=this._getOrReturnCtx(t);return en(r,{code:$t.invalid_type,expected:rn.symbol,received:r.parsedType}),En}return xi(t.data)}}Bv.create=e=>new Bv({typeName:qt.ZodSymbol,...Dn(e)});class cg extends Ln{_parse(t){if(this._getType(t)!==rn.undefined){const r=this._getOrReturnCtx(t);return en(r,{code:$t.invalid_type,expected:rn.undefined,received:r.parsedType}),En}return xi(t.data)}}cg.create=e=>new cg({typeName:qt.ZodUndefined,...Dn(e)});class ug extends Ln{_parse(t){if(this._getType(t)!==rn.null){const r=this._getOrReturnCtx(t);return en(r,{code:$t.invalid_type,expected:rn.null,received:r.parsedType}),En}return xi(t.data)}}ug.create=e=>new ug({typeName:qt.ZodNull,...Dn(e)});class Rh extends Ln{constructor(){super(...arguments),this._any=!0}_parse(t){return xi(t.data)}}Rh.create=e=>new Rh({typeName:qt.ZodAny,...Dn(e)});class Td extends Ln{constructor(){super(...arguments),this._unknown=!0}_parse(t){return xi(t.data)}}Td.create=e=>new Td({typeName:qt.ZodUnknown,...Dn(e)});class Yl extends Ln{_parse(t){const n=this._getOrReturnCtx(t);return en(n,{code:$t.invalid_type,expected:rn.never,received:n.parsedType}),En}}Yl.create=e=>new Yl({typeName:qt.ZodNever,...Dn(e)});class zv extends Ln{_parse(t){if(this._getType(t)!==rn.undefined){const r=this._getOrReturnCtx(t);return en(r,{code:$t.invalid_type,expected:rn.void,received:r.parsedType}),En}return xi(t.data)}}zv.create=e=>new zv({typeName:qt.ZodVoid,...Dn(e)});class Zs extends Ln{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==rn.array)return en(n,{code:$t.invalid_type,expected:rn.array,received:n.parsedType}),En;if(a.exactLength!==null){const s=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(s||o)&&(en(n,{code:s?$t.too_big:$t.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(en(n,{code:$t.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(en(n,{code:$t.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>a.type._parseAsync(new Ko(n,s,n.path,o)))).then(s=>si.mergeArray(r,s));const i=[...n.data].map((s,o)=>a.type._parseSync(new Ko(n,s,n.path,o)));return si.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Zs({...this._def,minLength:{value:t,message:un.toString(n)}})}max(t,n){return new Zs({...this._def,maxLength:{value:t,message:un.toString(n)}})}length(t,n){return new Zs({...this._def,exactLength:{value:t,message:un.toString(n)}})}nonempty(t){return this.min(1,t)}}Zs.create=(e,t)=>new Zs({type:e,minLength:null,maxLength:null,exactLength:null,typeName:qt.ZodArray,...Dn(t)});function lh(e){if(e instanceof Yr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ys.create(lh(r))}return new Yr({...e._def,shape:()=>t})}else return e instanceof Zs?new Zs({...e._def,type:lh(e.element)}):e instanceof Ys?Ys.create(lh(e.unwrap())):e instanceof fu?fu.create(lh(e.unwrap())):e instanceof Zo?Zo.create(e.items.map(t=>lh(t))):e}class Yr extends Ln{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=ar.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==rn.object){const u=this._getOrReturnCtx(t);return en(u,{code:$t.invalid_type,expected:rn.object,received:u.parsedType}),En}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Yl&&this._def.unknownKeys==="strip"))for(const u in a.data)s.includes(u)||o.push(u);const l=[];for(const u of s){const d=i[u],h=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Ko(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Yl){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")o.length>0&&(en(a,{code:$t.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const h=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Ko(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,p=await d.value;u.push({key:h,value:p,alwaysSet:d.alwaysSet})}return u}).then(u=>si.mergeObjectSync(r,u)):si.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return un.errToObj,new Yr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,s,o;const l=(s=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=un.errToObj(t).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Yr({...this._def,unknownKeys:"strip"})}passthrough(){return new Yr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Yr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Yr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:qt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Yr({...this._def,catchall:t})}pick(t){const n={};return ar.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Yr({...this._def,shape:()=>n})}omit(t){const n={};return ar.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Yr({...this._def,shape:()=>n})}deepPartial(){return lh(this)}partial(t){const n={};return ar.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Yr({...this._def,shape:()=>n})}required(t){const n={};return ar.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ys;)i=i._def.innerType;n[r]=i}}),new Yr({...this._def,shape:()=>n})}keyof(){return YD(ar.objectKeys(this.shape))}}Yr.create=(e,t)=>new Yr({shape:()=>e,unknownKeys:"strip",catchall:Yl.create(),typeName:qt.ZodObject,...Dn(t)});Yr.strictCreate=(e,t)=>new Yr({shape:()=>e,unknownKeys:"strict",catchall:Yl.create(),typeName:qt.ZodObject,...Dn(t)});Yr.lazycreate=(e,t)=>new Yr({shape:e,unknownKeys:"strip",catchall:Yl.create(),typeName:qt.ZodObject,...Dn(t)});class dg extends Ln{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new rs(o.ctx.common.issues));return en(n,{code:$t.invalid_union,unionErrors:s}),En}if(n.common.async)return Promise.all(r.map(async i=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(l=>new rs(l));return en(n,{code:$t.invalid_union,unionErrors:o}),En}}get options(){return this._def.options}}dg.create=(e,t)=>new dg({options:e,typeName:qt.ZodUnion,...Dn(t)});const Dl=e=>e instanceof pg?Dl(e.schema):e instanceof eo?Dl(e.innerType()):e instanceof mg?[e.value]:e instanceof du?e.options:e instanceof gg?ar.objectValues(e.enum):e instanceof yg?Dl(e._def.innerType):e instanceof cg?[void 0]:e instanceof ug?[null]:e instanceof Ys?[void 0,...Dl(e.unwrap())]:e instanceof fu?[null,...Dl(e.unwrap())]:e instanceof kk||e instanceof vg?Dl(e.unwrap()):e instanceof bg?Dl(e._def.innerType):[];class nx extends Ln{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.object)return en(n,{code:$t.invalid_type,expected:rn.object,received:n.parsedType}),En;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(en(n,{code:$t.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),En)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const s=Dl(i.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,i)}}return new nx({typeName:qt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Dn(r)})}}function Q2(e,t){const n=Fl(e),r=Fl(t);if(e===t)return{valid:!0,data:e};if(n===rn.object&&r===rn.object){const a=ar.objectKeys(t),i=ar.objectKeys(e).filter(o=>a.indexOf(o)!==-1),s={...e,...t};for(const o of i){const l=Q2(e[o],t[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(n===rn.array&&r===rn.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const s=e[i],o=t[i],l=Q2(s,o);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return n===rn.date&&r===rn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class fg extends Ln{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,s)=>{if(X2(i)||X2(s))return En;const o=Q2(i.value,s.value);return o.valid?((J2(i)||J2(s))&&n.dirty(),{status:n.value,value:o.data}):(en(r,{code:$t.invalid_intersection_types}),En)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}fg.create=(e,t,n)=>new fg({left:e,right:t,typeName:qt.ZodIntersection,...Dn(n)});class Zo extends Ln{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.array)return en(r,{code:$t.invalid_type,expected:rn.array,received:r.parsedType}),En;if(r.data.length<this._def.items.length)return en(r,{code:$t.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),En;!this._def.rest&&r.data.length>this._def.items.length&&(en(r,{code:$t.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Ko(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(i).then(s=>si.mergeArray(n,s)):si.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Zo({...this._def,rest:t})}}Zo.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zo({items:e,typeName:qt.ZodTuple,rest:null,...Dn(t)})};class hg extends Ln{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.object)return en(r,{code:$t.invalid_type,expected:rn.object,received:r.parsedType}),En;const a=[],i=this._def.keyType,s=this._def.valueType;for(const o in r.data)a.push({key:i._parse(new Ko(r,o,r.path,o)),value:s._parse(new Ko(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?si.mergeObjectAsync(n,a):si.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Ln?new hg({keyType:t,valueType:n,typeName:qt.ZodRecord,...Dn(r)}):new hg({keyType:Ws.create(),valueType:t,typeName:qt.ZodRecord,...Dn(n)})}}class Uv extends Ln{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.map)return en(r,{code:$t.invalid_type,expected:rn.map,received:r.parsedType}),En;const a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([o,l],u)=>({key:a._parse(new Ko(r,o,r.path,[u,"key"])),value:i._parse(new Ko(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return En;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of s){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return En;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}}}}Uv.create=(e,t,n)=>new Uv({valueType:t,keyType:e,typeName:qt.ZodMap,...Dn(n)});class Md extends Ln{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.set)return en(r,{code:$t.invalid_type,expected:rn.set,received:r.parsedType}),En;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(en(r,{code:$t.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(en(r,{code:$t.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function s(l){const u=new Set;for(const d of l){if(d.status==="aborted")return En;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>i._parse(new Ko(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(t,n){return new Md({...this._def,minSize:{value:t,message:un.toString(n)}})}max(t,n){return new Md({...this._def,maxSize:{value:t,message:un.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Md.create=(e,t)=>new Md({valueType:e,minSize:null,maxSize:null,typeName:qt.ZodSet,...Dn(t)});class wh extends Ln{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.function)return en(n,{code:$t.invalid_type,expected:rn.function,received:n.parsedType}),En;function r(o,l){return Lv({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Fv(),Nh].filter(u=>!!u),issueData:{code:$t.invalid_arguments,argumentsError:l}})}function a(o,l){return Lv({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Fv(),Nh].filter(u=>!!u),issueData:{code:$t.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof Ih){const o=this;return xi(async function(...l){const u=new rs([]),d=await o._def.args.parseAsync(l,i).catch(y=>{throw u.addIssue(r(l,y)),u}),h=await Reflect.apply(s,this,d);return await o._def.returns._def.type.parseAsync(h,i).catch(y=>{throw u.addIssue(a(h,y)),u})})}else{const o=this;return xi(function(...l){const u=o._def.args.safeParse(l,i);if(!u.success)throw new rs([r(l,u.error)]);const d=Reflect.apply(s,this,u.data),h=o._def.returns.safeParse(d,i);if(!h.success)throw new rs([a(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new wh({...this._def,args:Zo.create(t).rest(Td.create())})}returns(t){return new wh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new wh({args:t||Zo.create([]).rest(Td.create()),returns:n||Td.create(),typeName:qt.ZodFunction,...Dn(r)})}}class pg extends Ln{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}pg.create=(e,t)=>new pg({getter:e,typeName:qt.ZodLazy,...Dn(t)});class mg extends Ln{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return en(n,{received:n.data,code:$t.invalid_literal,expected:this._def.value}),En}return{status:"valid",value:t.data}}get value(){return this._def.value}}mg.create=(e,t)=>new mg({value:e,typeName:qt.ZodLiteral,...Dn(t)});function YD(e,t){return new du({values:e,typeName:qt.ZodEnum,...Dn(t)})}class du extends Ln{constructor(){super(...arguments),Vm.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return en(n,{expected:ar.joinValues(r),received:n.parsedType,code:$t.invalid_type}),En}if($v(this,Vm)||GD(this,Vm,new Set(this._def.values)),!$v(this,Vm).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return en(n,{received:n.data,code:$t.invalid_enum_value,options:r}),En}return xi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return du.create(t,{...this._def,...n})}exclude(t,n=this._def){return du.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Vm=new WeakMap;du.create=YD;class gg extends Ln{constructor(){super(...arguments),Gm.set(this,void 0)}_parse(t){const n=ar.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==rn.string&&r.parsedType!==rn.number){const a=ar.objectValues(n);return en(r,{expected:ar.joinValues(a),received:r.parsedType,code:$t.invalid_type}),En}if($v(this,Gm)||GD(this,Gm,new Set(ar.getValidEnumValues(this._def.values))),!$v(this,Gm).has(t.data)){const a=ar.objectValues(n);return en(r,{received:r.data,code:$t.invalid_enum_value,options:a}),En}return xi(t.data)}get enum(){return this._def.values}}Gm=new WeakMap;gg.create=(e,t)=>new gg({values:e,typeName:qt.ZodNativeEnum,...Dn(t)});class Ih extends Ln{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.promise&&n.common.async===!1)return en(n,{code:$t.invalid_type,expected:rn.promise,received:n.parsedType}),En;const r=n.parsedType===rn.promise?n.data:Promise.resolve(n.data);return xi(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ih.create=(e,t)=>new Ih({type:e,typeName:qt.ZodPromise,...Dn(t)});class eo extends Ln{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:s=>{en(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const s=a.transform(r.data,i);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return En;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?En:l.status==="dirty"||n.value==="dirty"?dh(l.value):l});{if(n.value==="aborted")return En;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?En:o.status==="dirty"||n.value==="dirty"?dh(o.value):o}}if(a.type==="refinement"){const s=o=>{const l=a.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?En:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?En:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Od(s))return s;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Od(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:n.value,value:o})):s);ar.assertNever(a)}}eo.create=(e,t,n)=>new eo({schema:e,typeName:qt.ZodEffects,effect:t,...Dn(n)});eo.createWithPreprocess=(e,t,n)=>new eo({schema:t,effect:{type:"preprocess",transform:e},typeName:qt.ZodEffects,...Dn(n)});class Ys extends Ln{_parse(t){return this._getType(t)===rn.undefined?xi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ys.create=(e,t)=>new Ys({innerType:e,typeName:qt.ZodOptional,...Dn(t)});class fu extends Ln{_parse(t){return this._getType(t)===rn.null?xi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}fu.create=(e,t)=>new fu({innerType:e,typeName:qt.ZodNullable,...Dn(t)});class yg extends Ln{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===rn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}yg.create=(e,t)=>new yg({innerType:e,typeName:qt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Dn(t)});class bg extends Ln{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return og(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new rs(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new rs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}bg.create=(e,t)=>new bg({innerType:e,typeName:qt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Dn(t)});class Hv extends Ln{_parse(t){if(this._getType(t)!==rn.nan){const r=this._getOrReturnCtx(t);return en(r,{code:$t.invalid_type,expected:rn.nan,received:r.parsedType}),En}return{status:"valid",value:t.data}}}Hv.create=e=>new Hv({typeName:qt.ZodNaN,...Dn(e)});const eW=Symbol("zod_brand");class kk extends Ln{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class f0 extends Ln{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?En:i.status==="dirty"?(n.dirty(),dh(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?En:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new f0({in:t,out:n,typeName:qt.ZodPipeline})}}class vg extends Ln{_parse(t){const n=this._def.innerType._parse(t),r=a=>(Od(a)&&(a.value=Object.freeze(a.value)),a);return og(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}vg.create=(e,t)=>new vg({innerType:e,typeName:qt.ZodReadonly,...Dn(t)});function c3(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function XD(e,t={},n){return e?Rh.create().superRefine((r,a)=>{var i,s;const o=e(r);if(o instanceof Promise)return o.then(l=>{var u,d;if(!l){const h=c3(t,r),p=(d=(u=h.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...h,fatal:p})}});if(!o){const l=c3(t,r),u=(s=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&s!==void 0?s:!0;a.addIssue({code:"custom",...l,fatal:u})}}):Rh.create()}const tW={object:Yr.lazycreate};var qt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(qt||(qt={}));const nW=(e,t={message:`Input not instance of ${e.name}`})=>XD(n=>n instanceof e,t),JD=Ws.create,QD=cu.create,rW=Hv.create,aW=uu.create,eM=lg.create,iW=Dd.create,sW=Bv.create,oW=cg.create,lW=ug.create,cW=Rh.create,uW=Td.create,dW=Yl.create,fW=zv.create,hW=Zs.create,pW=Yr.create,mW=Yr.strictCreate,gW=dg.create,yW=nx.create,bW=fg.create,vW=Zo.create,wW=hg.create,xW=Uv.create,_W=Md.create,SW=wh.create,EW=pg.create,CW=mg.create,kW=du.create,TW=gg.create,AW=Ih.create,u3=eo.create,NW=Ys.create,RW=fu.create,IW=eo.createWithPreprocess,jW=f0.create,OW=()=>JD().optional(),DW=()=>QD().optional(),MW=()=>eM().optional(),PW={string:e=>Ws.create({...e,coerce:!0}),number:e=>cu.create({...e,coerce:!0}),boolean:e=>lg.create({...e,coerce:!0}),bigint:e=>uu.create({...e,coerce:!0}),date:e=>Dd.create({...e,coerce:!0})},FW=En;var U=Object.freeze({__proto__:null,defaultErrorMap:Nh,setErrorMap:IG,getErrorMap:Fv,makeIssue:Lv,EMPTY_PATH:jG,addIssueToContext:en,ParseStatus:si,INVALID:En,DIRTY:dh,OK:xi,isAborted:X2,isDirty:J2,isValid:Od,isAsync:og,get util(){return ar},get objectUtil(){return Y2},ZodParsedType:rn,getParsedType:Fl,ZodType:Ln,datetimeRegex:ZD,ZodString:Ws,ZodNumber:cu,ZodBigInt:uu,ZodBoolean:lg,ZodDate:Dd,ZodSymbol:Bv,ZodUndefined:cg,ZodNull:ug,ZodAny:Rh,ZodUnknown:Td,ZodNever:Yl,ZodVoid:zv,ZodArray:Zs,ZodObject:Yr,ZodUnion:dg,ZodDiscriminatedUnion:nx,ZodIntersection:fg,ZodTuple:Zo,ZodRecord:hg,ZodMap:Uv,ZodSet:Md,ZodFunction:wh,ZodLazy:pg,ZodLiteral:mg,ZodEnum:du,ZodNativeEnum:gg,ZodPromise:Ih,ZodEffects:eo,ZodTransformer:eo,ZodOptional:Ys,ZodNullable:fu,ZodDefault:yg,ZodCatch:bg,ZodNaN:Hv,BRAND:eW,ZodBranded:kk,ZodPipeline:f0,ZodReadonly:vg,custom:XD,Schema:Ln,ZodSchema:Ln,late:tW,get ZodFirstPartyTypeKind(){return qt},coerce:PW,any:cW,array:hW,bigint:aW,boolean:eM,date:iW,discriminatedUnion:yW,effect:u3,enum:kW,function:SW,instanceof:nW,intersection:bW,lazy:EW,literal:CW,map:xW,nan:rW,nativeEnum:TW,never:dW,null:lW,nullable:RW,number:QD,object:pW,oboolean:MW,onumber:DW,optional:NW,ostring:OW,pipeline:jW,preprocess:IW,promise:AW,record:wW,set:_W,strictObject:mW,string:JD,symbol:sW,transformer:u3,tuple:vW,undefined:oW,union:gW,unknown:uW,void:fW,NEVER:FW,ZodIssueCode:$t,quotelessJson:RG,ZodError:rs});function LW({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:s}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:s});break}case"developer":{r.push({role:"developer",content:s});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(s.length===1&&s[0].type==="text"){r.push({role:"user",content:s[0].text});break}r.push({role:"user",content:s.map((o,l)=>{var u,d,h,p;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${Ah(o.image)}`,detail:(h=(d=o.providerMetadata)==null?void 0:d.openai)==null?void 0:h.imageDetail}};case"file":{if(o.data instanceof URL)throw new Ar({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(p=o.filename)!=null?p:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${o.data}`}};default:throw new Ar({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const l=[];for(const u of s)switch(u.type){case"text":{o+=u.text;break}case"tool-call":{l.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)}});break}}if(t){if(l.length>1)throw new Ar({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const o of s)t?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return{messages:r,warnings:a}}function d3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function qv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Tk=U.object({error:U.object({message:U.string(),type:U.string().nullish(),param:U.any().nullish(),code:U.union([U.string(),U.number()]).nullish()})}),hu=UD({errorSchema:Tk,errorToMessage:e=>e.error.message});function Vv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function $W({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice;if(t){const u=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):u.push({name:h.name,description:h.description,parameters:h.parameters});if(s==null)return{functions:u,function_call:void 0,toolWarnings:i};switch(s.type){case"auto":case"none":case void 0:return{functions:u,function_call:void 0,toolWarnings:i};case"required":throw new Ar({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:u,function_call:{name:s.toolName},toolWarnings:i}}}const o=[];for(const u of a)u.type==="provider-defined"?i.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters,strict:n?!0:void 0}});if(s==null)return{tools:o,tool_choice:void 0,toolWarnings:i};const l=s.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:i};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:{const u=l;throw new Ar({functionality:`Unsupported tool choice type: ${u}`})}}}var BW=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:eC(this.modelId)}get defaultObjectGenerationMode(){return HW(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var p,y,v,b,w,x,S,E;const C=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const I=this.settings.useLegacyFunctionCalling;if(I&&this.settings.parallelToolCalls===!0)throw new Ar({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(I&&this.supportsStructuredOutputs)throw new Ar({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:R,warnings:j}=LW({prompt:t,useLegacyFunctionCalling:I,systemMessageMode:qW(this.modelId)});k.push(...j);const L={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:(p=u.name)!=null?p:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:d,max_completion_tokens:(y=h==null?void 0:h.openai)==null?void 0:y.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(w=h==null?void 0:h.openai)==null?void 0:w.prediction,reasoning_effort:(S=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:R};switch(eC(this.modelId)&&(L.temperature!=null&&(L.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),L.top_p!=null&&(L.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),L.frequency_penalty!=null&&(L.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),L.presence_penalty!=null&&(L.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),L.logit_bias!=null&&(L.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),L.logprobs!=null&&(L.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),L.top_logprobs!=null&&(L.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),L.max_tokens!=null&&(L.max_completion_tokens==null&&(L.max_completion_tokens=L.max_tokens),L.max_tokens=void 0)),C){case"regular":{const{tools:B,tool_choice:Z,functions:P,function_call:K,toolWarnings:q}=$W({mode:e,useLegacyFunctionCalling:I,structuredOutputs:this.supportsStructuredOutputs});return{args:{...L,tools:B,tool_choice:Z,functions:P,function_call:K},warnings:[...k,...q]}}case"object-json":return{args:{...L,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:I?{...L,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...L,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const B=C;throw new Error(`Unsupported type: ${B}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l;const{args:u,warnings:d}=this.getArgs(e),{responseHeaders:h,value:p,rawValue:y}=await Qs({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Wo(this.config.headers(),e.headers),body:u,failedResponseHandler:hu,successfulResponseHandler:Wd(zW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=u,w=p.choices[0],x=(t=p.usage)==null?void 0:t.completion_tokens_details,S=(n=p.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=w.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&w.message.function_call?[{toolCallType:"function",toolCallId:Lo(),toolName:w.message.function_call.name,args:w.message.function_call.arguments}]:(a=w.message.tool_calls)==null?void 0:a.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:Lo(),toolName:C.function.name,args:C.function.arguments}}),finishReason:qv(w.finish_reason),usage:{promptTokens:(s=(i=p.usage)==null?void 0:i.prompt_tokens)!=null?s:NaN,completionTokens:(l=(o=p.usage)==null?void 0:o.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:y},request:{body:JSON.stringify(u)},response:Vv(p),warnings:d,logprobs:d3(w.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const S of b.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),x.enqueue({type:"tool-call",...S});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Qs({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Wo(this.config.headers(),e.headers),body:r,failedResponseHandler:hu,successfulResponseHandler:Ck(UW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:s,...o}=t,l=[];let u="unknown",d={promptTokens:void 0,completionTokens:void 0},h,p=!0;const{useLegacyFunctionCalling:y}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,w){var x,S,E,C,k,I,R,j,L,B,Z,P;if(!b.success){u="error",w.enqueue({type:"error",error:b.error});return}const K=b.value;if("error"in K){u="error",w.enqueue({type:"error",error:K.error});return}if(p&&(p=!1,w.enqueue({type:"response-metadata",...Vv(K)})),K.usage!=null){const{prompt_tokens:X,completion_tokens:re,prompt_tokens_details:D,completion_tokens_details:J}=K.usage;d={promptTokens:X??void 0,completionTokens:re??void 0},(J==null?void 0:J.reasoning_tokens)!=null&&(v.openai.reasoningTokens=J==null?void 0:J.reasoning_tokens),(J==null?void 0:J.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=J==null?void 0:J.accepted_prediction_tokens),(J==null?void 0:J.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=J==null?void 0:J.rejected_prediction_tokens),(D==null?void 0:D.cached_tokens)!=null&&(v.openai.cachedPromptTokens=D==null?void 0:D.cached_tokens)}const q=K.choices[0];if((q==null?void 0:q.finish_reason)!=null&&(u=qv(q.finish_reason)),(q==null?void 0:q.delta)==null)return;const de=q.delta;de.content!=null&&w.enqueue({type:"text-delta",textDelta:de.content});const ae=d3(q==null?void 0:q.logprobs);ae!=null&&ae.length&&(h===void 0&&(h=[]),h.push(...ae));const te=y&&de.function_call!=null?[{type:"function",id:Lo(),function:de.function_call,index:0}]:de.tool_calls;if(te!=null)for(const X of te){const re=X.index;if(l[re]==null){if(X.type!=="function")throw new vh({data:X,message:"Expected 'function' type."});if(X.id==null)throw new vh({data:X,message:"Expected 'id' to be a string."});if(((x=X.function)==null?void 0:x.name)==null)throw new vh({data:X,message:"Expected 'function.name' to be a string."});l[re]={id:X.id,type:"function",function:{name:X.function.name,arguments:(S=X.function.arguments)!=null?S:""},hasFinished:!1};const J=l[re];((E=J.function)==null?void 0:E.name)!=null&&((C=J.function)==null?void 0:C.arguments)!=null&&(J.function.arguments.length>0&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:J.function.arguments}),o3(J.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=J.id)!=null?k:Lo(),toolName:J.function.name,args:J.function.arguments}),J.hasFinished=!0));continue}const D=l[re];D.hasFinished||(((I=X.function)==null?void 0:I.arguments)!=null&&(D.function.arguments+=(j=(R=X.function)==null?void 0:R.arguments)!=null?j:""),w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:D.id,toolName:D.function.name,argsTextDelta:(L=X.function.arguments)!=null?L:""}),((B=D.function)==null?void 0:B.name)!=null&&((Z=D.function)==null?void 0:Z.arguments)!=null&&o3(D.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(P=D.id)!=null?P:Lo(),toolName:D.function.name,args:D.function.arguments}),D.hasFinished=!0))}},flush(b){var w,x;b.enqueue({type:"finish",finishReason:u,logprobs:h,usage:{promptTokens:(w=d.promptTokens)!=null?w:NaN,completionTokens:(x=d.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},tM=U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish(),prompt_tokens_details:U.object({cached_tokens:U.number().nullish()}).nullish(),completion_tokens_details:U.object({reasoning_tokens:U.number().nullish(),accepted_prediction_tokens:U.number().nullish(),rejected_prediction_tokens:U.number().nullish()}).nullish()}).nullish(),zW=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({message:U.object({role:U.literal("assistant").nullish(),content:U.string().nullish(),function_call:U.object({arguments:U.string(),name:U.string()}).nullish(),tool_calls:U.array(U.object({id:U.string().nullish(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).nullish()}),index:U.number(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullish()})),usage:tM}),UW=U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).nullish(),content:U.string().nullish(),function_call:U.object({name:U.string().optional(),arguments:U.string().optional()}).nullish(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullable().optional(),index:U.number()})),usage:tM}),Tk]);function eC(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function HW(e){return e.startsWith("gpt-4o-audio-preview")}function qW(e){var t,n;return eC(e)?(n=(t=VW[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var VW={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function GW({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new Ml({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Ar({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Ar({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Ar({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function f3(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var WW=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h}){var p;const y=e.type,v=[];s!=null&&v.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:w}=GW({prompt:n,inputFormat:t}),x=[...w??[],...u??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,prompt:b,stop:x.length>0?x:void 0};switch(y){case"regular":{if((p=e.tools)!=null&&p.length)throw new Ar({functionality:"tools"});if(e.toolChoice)throw new Ar({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new Ar({functionality:"object-json mode"});case"object-tool":throw new Ar({functionality:"object-tool mode"});default:{const E=y;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Qs({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Wo(this.config.headers(),e.headers),body:t,failedResponseHandler:hu,successfulResponseHandler:Wd(KW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t,l=a.choices[0];return{text:l.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:qv(l.finish_reason),logprobs:f3(l.logprobs),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:r,body:i},response:Vv(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Qs({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Wo(this.config.headers(),e.headers),body:r,failedResponseHandler:hu,successfulResponseHandler:Ck(ZW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(p,y){if(!p.success){l="error",y.enqueue({type:"error",error:p.error});return}const v=p.value;if("error"in v){l="error",y.enqueue({type:"error",error:v.error});return}h&&(h=!1,y.enqueue({type:"response-metadata",...Vv(v)})),v.usage!=null&&(u={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=qv(b.finish_reason)),(b==null?void 0:b.text)!=null&&y.enqueue({type:"text-delta",textDelta:b.text});const w=f3(b==null?void 0:b.logprobs);w!=null&&w.length&&(d===void 0&&(d=[]),d.push(...w))},flush(p){p.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},KW=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullish()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()})}),ZW=U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string().nullish(),index:U.number(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullish()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),Tk]),YW=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new _k({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Qs({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Wo(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:hu,successfulResponseHandler:Wd(XW),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},XW=U.object({data:U.array(U.object({embedding:U.array(U.number())})),usage:U.object({prompt_tokens:U.number()}).nullish()}),JW={"dall-e-3":1,"dall-e-2":10},QW=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:JW[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h;const p=[];r!=null&&p.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&p.push({type:"unsupported-setting",setting:"seed"});const y=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:v,responseHeaders:b}=await Qs({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Wo(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:hu,successfulResponseHandler:Wd(eK),abortSignal:o,fetch:this.config.fetch});return{images:v.data.map(w=>w.b64_json),warnings:p,response:{timestamp:y,modelId:this.modelId,headers:b}}}},eK=U.object({data:U.array(U.object({b64_json:U.string()}))});function tK({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=t;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{n.push({role:"user",content:i.map((s,o)=>{var l,u,d,h;switch(s.type){case"text":return{type:"input_text",text:s.text};case"image":return{type:"input_image",image_url:s.image instanceof URL?s.image.toString():`data:${(l=s.mimeType)!=null?l:"image/jpeg"};base64,${Ah(s.image)}`,detail:(d=(u=s.providerMetadata)==null?void 0:u.openai)==null?void 0:d.imageDetail};case"file":{if(s.data instanceof URL)throw new Ar({functionality:"File URLs in user messages"});switch(s.mimeType){case"application/pdf":return{type:"input_file",filename:(h=s.filename)!=null?h:`part-${o}.pdf`,file_data:`data:application/pdf;base64,${s.data}`};default:throw new Ar({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const s of i)switch(s.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:s.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:s.toolCallId,name:s.toolName,arguments:JSON.stringify(s.args)});break}}break}case"tool":{for(const s of i)n.push({type:"function_call_output",call_id:s.toolCallId,output:JSON.stringify(s.result)});break}default:{const s=a;throw new Error(`Unsupported role: ${s}`)}}return{messages:n,warnings:r}}function h3({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function nK({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)switch(l.type){case"function":s.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":s.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:l});break}break;default:a.push({type:"unsupported-tool",tool:l});break}if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:s,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:s,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const l=o;throw new Ar({functionality:`Unsupported tool choice type: ${l}`})}}}var rK=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:s,frequencyPenalty:o,seed:l,prompt:u,providerMetadata:d,responseFormat:h}){var p,y,v;const b=[],w=vK(this.modelId),x=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),s!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),o!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=tK({prompt:u,systemMessageMode:w.systemMessageMode});b.push(...E);const C=CG({provider:"openai",providerOptions:d,schema:wK}),k=(p=C==null?void 0:C.strictSchemas)!=null?p:!0,I={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(y=h.name)!=null?y:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,...w.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},...w.requiredAutoTruncation&&{truncation:"auto"}};switch(w.isReasoningModel&&(I.temperature!=null&&(I.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),I.top_p!=null&&(I.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:R,tool_choice:j,toolWarnings:L}=nK({mode:e,strict:k});return{args:{...I,tools:R,tool_choice:j},warnings:[...b,...L]}}case"object-json":return{args:{...I,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...I,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:b};default:{const R=x;throw new Error(`Unsupported type: ${R}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=this.getArgs(e),{responseHeaders:l,value:u,rawValue:d}=await Qs({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Wo(this.config.headers(),e.headers),body:s,failedResponseHandler:hu,successfulResponseHandler:Wd(U.object({id:U.string(),created_at:U.number(),model:U.string(),output:U.array(U.discriminatedUnion("type",[U.object({type:U.literal("message"),role:U.literal("assistant"),content:U.array(U.object({type:U.literal("output_text"),text:U.string(),annotations:U.array(U.object({type:U.literal("url_citation"),start_index:U.number(),end_index:U.number(),url:U.string(),title:U.string()}))}))}),U.object({type:U.literal("function_call"),call_id:U.string(),name:U.string(),arguments:U.string()}),U.object({type:U.literal("web_search_call")}),U.object({type:U.literal("computer_call")}),U.object({type:U.literal("reasoning")})])),incomplete_details:U.object({reason:U.string()}).nullable(),usage:nM})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u.output.filter(y=>y.type==="message").flatMap(y=>y.content).filter(y=>y.type==="output_text"),p=u.output.filter(y=>y.type==="function_call").map(y=>({toolCallType:"function",toolCallId:y.call_id,toolName:y.name,args:y.arguments}));return{text:h.map(y=>y.text).join(`
`),sources:h.flatMap(y=>y.annotations.map(v=>{var b,w,x;return{sourceType:"url",id:(x=(w=(b=this.config).generateId)==null?void 0:w.call(b))!=null?x:Lo(),url:v.url,title:v.title}})),finishReason:h3({finishReason:(t=u.incomplete_details)==null?void 0:t.reason,hasToolCalls:p.length>0}),toolCalls:p.length>0?p:void 0,usage:{promptTokens:u.usage.input_tokens,completionTokens:u.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:l,body:d},request:{body:JSON.stringify(s)},response:{id:u.id,timestamp:new Date(u.created_at*1e3),modelId:u.model},providerMetadata:{openai:{responseId:u.id,cachedPromptTokens:(r=(n=u.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=u.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:o}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Qs({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Wo(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:hu,successfulResponseHandler:Ck(dK),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let s="unknown",o=NaN,l=NaN,u=null,d=null,h=null;const p={};let y=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var w,x,S,E,C,k,I,R;if(!v.success){s="error",b.enqueue({type:"error",error:v.error});return}const j=v.value;if(yK(j))j.item.type==="function_call"&&(p[j.output_index]={toolName:j.item.name,toolCallId:j.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:j.item.call_id,toolName:j.item.name,argsTextDelta:j.item.arguments}));else if(gK(j)){const L=p[j.output_index];L!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:L.toolCallId,toolName:L.toolName,argsTextDelta:j.delta})}else mK(j)?(h=j.response.id,b.enqueue({type:"response-metadata",id:j.response.id,timestamp:new Date(j.response.created_at*1e3),modelId:j.response.model})):fK(j)?b.enqueue({type:"text-delta",textDelta:j.delta}):hK(j)&&j.item.type==="function_call"?(p[j.output_index]=void 0,y=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:j.item.call_id,toolName:j.item.name,args:j.item.arguments})):pK(j)?(s=h3({finishReason:(w=j.response.incomplete_details)==null?void 0:w.reason,hasToolCalls:y}),o=j.response.usage.input_tokens,l=j.response.usage.output_tokens,u=(S=(x=j.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?S:u,d=(C=(E=j.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:d):bK(j)&&b.enqueue({type:"source",source:{sourceType:"url",id:(R=(I=(k=i.config).generateId)==null?void 0:I.call(k))!=null?R:Lo(),url:j.annotation.url,title:j.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:s,usage:{promptTokens:o,completionTokens:l},...(u!=null||d!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:u,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},nM=U.object({input_tokens:U.number(),input_tokens_details:U.object({cached_tokens:U.number().nullish()}).nullish(),output_tokens:U.number(),output_tokens_details:U.object({reasoning_tokens:U.number().nullish()}).nullish()}),aK=U.object({type:U.literal("response.output_text.delta"),delta:U.string()}),iK=U.object({type:U.enum(["response.completed","response.incomplete"]),response:U.object({incomplete_details:U.object({reason:U.string()}).nullish(),usage:nM})}),sK=U.object({type:U.literal("response.created"),response:U.object({id:U.string(),created_at:U.number(),model:U.string()})}),oK=U.object({type:U.literal("response.output_item.done"),output_index:U.number(),item:U.discriminatedUnion("type",[U.object({type:U.literal("message")}),U.object({type:U.literal("function_call"),id:U.string(),call_id:U.string(),name:U.string(),arguments:U.string(),status:U.literal("completed")})])}),lK=U.object({type:U.literal("response.function_call_arguments.delta"),item_id:U.string(),output_index:U.number(),delta:U.string()}),cK=U.object({type:U.literal("response.output_item.added"),output_index:U.number(),item:U.discriminatedUnion("type",[U.object({type:U.literal("message")}),U.object({type:U.literal("function_call"),id:U.string(),call_id:U.string(),name:U.string(),arguments:U.string()})])}),uK=U.object({type:U.literal("response.output_text.annotation.added"),annotation:U.object({type:U.literal("url_citation"),url:U.string(),title:U.string()})}),dK=U.union([aK,iK,sK,oK,lK,cK,uK,U.object({type:U.string()}).passthrough()]);function fK(e){return e.type==="response.output_text.delta"}function hK(e){return e.type==="response.output_item.done"}function pK(e){return e.type==="response.completed"||e.type==="response.incomplete"}function mK(e){return e.type==="response.created"}function gK(e){return e.type==="response.function_call_arguments.delta"}function yK(e){return e.type==="response.output_item.added"}function bK(e){return e.type==="response.output_text.annotation.added"}function vK(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var wK=U.object({metadata:U.any().nullish(),parallelToolCalls:U.boolean().nullish(),previousResponseId:U.string().nullish(),store:U.boolean().nullish(),user:U.string().nullish(),reasoningEffort:U.string().nullish(),strictSchemas:U.boolean().nullish(),instructions:U.string().nullish()}),xK=U.object({});function _K({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:xK}}var SK={webSearchPreview:_K};function rM(e={}){var t,n,r;const a=(t=qD(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",s=(r=e.name)!=null?r:"openai",o=()=>({Authorization:`Bearer ${bG({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(b,w={})=>new BW(b,w,{provider:`${s}.chat`,url:({path:x})=>`${a}${x}`,headers:o,compatibility:i,fetch:e.fetch}),u=(b,w={})=>new WW(b,w,{provider:`${s}.completion`,url:({path:x})=>`${a}${x}`,headers:o,compatibility:i,fetch:e.fetch}),d=(b,w={})=>new YW(b,w,{provider:`${s}.embedding`,url:({path:x})=>`${a}${x}`,headers:o,fetch:e.fetch}),h=(b,w={})=>new QW(b,w,{provider:`${s}.image`,url:({path:x})=>`${a}${x}`,headers:o,fetch:e.fetch}),p=(b,w)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return b==="gpt-3.5-turbo-instruct"?u(b,w):l(b,w)},y=b=>new rK(b,{provider:`${s}.responses`,url:({path:w})=>`${a}${w}`,headers:o,fetch:e.fetch}),v=function(b,w){return p(b,w)};return v.languageModel=p,v.chat=l,v.completion=u,v.responses=y,v.embedding=d,v.textEmbedding=d,v.textEmbeddingModel=d,v.image=h,v.imageModel=h,v.tools=SK,v}rM({compatibility:"strict"});var aM="vercel.ai.error",EK=Symbol.for(aM),iM,CK=class sM extends Error{constructor({name:t,message:n,cause:r}){super(n),this[iM]=!0,this.name=t,this.cause=r}static isInstance(t){return sM.hasMarker(t,aM)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};iM=EK;var oi=CK,oM="AI_APICallError",lM=`vercel.ai.error.${oM}`,kK=Symbol.for(lM),cM,$l=class extends oi{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:oM,message:t,cause:o}),this[cM]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(t){return oi.hasMarker(t,lM)}};cM=kK;var uM="AI_EmptyResponseBodyError",dM=`vercel.ai.error.${uM}`,TK=Symbol.for(dM),fM,AK=class extends oi{constructor({message:t="Empty response body"}={}){super({name:uM,message:t}),this[fM]=!0}static isInstance(t){return oi.hasMarker(t,dM)}};fM=TK;function hM(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var pM="AI_InvalidArgumentError",mM=`vercel.ai.error.${pM}`,NK=Symbol.for(mM),gM,yM=class extends oi{constructor({message:t,cause:n,argument:r}){super({name:pM,message:t,cause:n}),this[gM]=!0,this.argument=r}static isInstance(t){return oi.hasMarker(t,mM)}};gM=NK;var bM="AI_JSONParseError",vM=`vercel.ai.error.${bM}`,RK=Symbol.for(vM),wM,Gv=class extends oi{constructor({text:t,cause:n}){super({name:bM,message:`JSON parsing failed: Text: ${t}.
Error message: ${hM(n)}`,cause:n}),this[wM]=!0,this.text=t}static isInstance(t){return oi.hasMarker(t,vM)}};wM=RK;var xM="AI_LoadAPIKeyError",_M=`vercel.ai.error.${xM}`,IK=Symbol.for(_M),SM,yb=class extends oi{constructor({message:t}){super({name:xM,message:t}),this[SM]=!0}static isInstance(t){return oi.hasMarker(t,_M)}};SM=IK;var EM="AI_TooManyEmbeddingValuesForCallError",CM=`vercel.ai.error.${EM}`,jK=Symbol.for(CM),kM,OK=class extends oi{constructor(e){super({name:EM,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[kM]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return oi.hasMarker(e,CM)}};kM=jK;var TM="AI_TypeValidationError",AM=`vercel.ai.error.${TM}`,DK=Symbol.for(AM),NM,MK=class tC extends oi{constructor({value:t,cause:n}){super({name:TM,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${hM(n)}`,cause:n}),this[NM]=!0,this.value=t}static isInstance(t){return oi.hasMarker(t,AM)}static wrap({value:t,cause:n}){return tC.isInstance(n)&&n.value===t?n:new tC({value:t,cause:n})}};NM=DK;var Wv=MK,RM="AI_UnsupportedFunctionalityError",IM=`vercel.ai.error.${RM}`,PK=Symbol.for(IM),jM,wv=class extends oi{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:RM,message:n}),this[jM]=!0,this.functionality=t}static isInstance(t){return oi.hasMarker(t,IM)}};jM=PK;let FK=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var LK={};function nC(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function $K(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),p=d+1,y=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);o(h,y)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=BK(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],u)},flush(l){i(e,l),s(l)}})}function BK(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function rx(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var zK=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=FK(n,t);if(e==null)return a;if(n.includes(r))throw new yM({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},UK=zK();function HK(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function TS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function qK({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new yb({message:`${r} API key must be a string.`});if(typeof ta>"u")throw new yb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=LK[t],e==null)throw new yb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new yb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var rC=Symbol.for("vercel.ai.validator");function VK(e){return{[rC]:!0,validate:e}}function GK(e){return typeof e=="object"&&e!==null&&rC in e&&e[rC]===!0&&"validate"in e}function WK(e){return GK(e)?e:KK(e)}function KK(e){return VK(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function ZK({value:e,schema:t}){const n=Ak({value:e,schema:t});if(!n.success)throw Wv.wrap({value:e,cause:n.error});return n.value}function Ak({value:e,schema:t}){const n=WK(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Wv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Wv.wrap({value:e,cause:r})}}}function YK({text:e,schema:t}){try{const n=co.parse(e);return t==null?n:ZK({value:n,schema:t})}catch(n){throw Gv.isInstance(n)||Wv.isInstance(n)?n:new Gv({text:e,cause:n})}}function OM({text:e,schema:t}){try{const n=co.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Ak({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Gv.isInstance(n)?n:new Gv({text:e,cause:n})}}}function XK({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Ak({value:t[e],schema:n});if(!r.success)throw new yM({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var JK=()=>globalThis.fetch,aC=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>QK({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),QK=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=JK()})=>{try{const o=await s(e,{method:"POST",headers:HK(t),body:n.content,signal:i}),l=rx(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw TS(d)||$l.isInstance(d)?d:new $l({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(TS(u)||$l.isInstance(u))?u:new $l({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(TS(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new $l({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}};async function iC(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var eZ=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=rx(r);if(s.trim()==="")return{responseHeaders:o,value:new $l({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=YK({text:s,schema:e});return{responseHeaders:o,value:new $l({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new $l({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},tZ=e=>async({response:t})=>{const n=rx(t);if(t.body==null)throw new AK({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough($K()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(OM({text:r,schema:e}))}}))}},DM=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=OM({text:a,schema:e}),s=rx(t);if(!i.success)throw new $l({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:nZ}=globalThis;function rZ(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return nZ(t)}function aZ(e){return e==null?void 0:e.replace(/\/$/,"")}function _s(e){if(iZ(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:s,anyOf:o,oneOf:l,format:u,const:d,minLength:h,enum:p}=e,y={};if(n&&(y.description=n),r&&(y.required=r),u&&(y.format=u),d!==void 0&&(y.enum=[d]),t&&(Array.isArray(t)?t.includes("null")?(y.type=t.filter(v=>v!=="null")[0],y.nullable=!0):y.type=t:t==="null"?y.type="null":y.type=t),p!==void 0&&(y.enum=p),a!=null&&(y.properties=Object.entries(a).reduce((v,[b,w])=>(v[b]=_s(w),v),{})),i&&(y.items=Array.isArray(i)?i.map(_s):_s(i)),s&&(y.allOf=s.map(_s)),o)if(o.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=o.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=_s(v[0]);typeof b=="object"&&(y.nullable=!0,Object.assign(y,b))}else y.anyOf=v.map(_s),y.nullable=!0}else y.anyOf=o.map(_s);return l&&(y.oneOf=l.map(_s)),h!==void 0&&(y.minLength=h),y}function iZ(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function sZ(e){var t,n;const r=[],a=[];let i=!0;for(const{role:s,content:o}of e)switch(s){case"system":{if(!i)throw new wv({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:o});break}case"user":{i=!1;const l=[];for(const u of o)switch(u.type){case"text":{l.push({text:u.text});break}case"image":{l.push(u.image instanceof URL?{fileData:{mimeType:(t=u.mimeType)!=null?t:"image/jpeg",fileUri:u.image.toString()}}:{inlineData:{mimeType:(n=u.mimeType)!=null?n:"image/jpeg",data:rZ(u.image)}});break}case"file":{l.push(u.data instanceof URL?{fileData:{mimeType:u.mimeType,fileUri:u.data.toString()}}:{inlineData:{mimeType:u.mimeType,data:u.data}});break}}a.push({role:"user",parts:l});break}case"assistant":{i=!1,a.push({role:"model",parts:o.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new wv({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new wv({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:o.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function p3(e){return e.includes("/")?e:`models/${e}`}var oZ=U.object({error:U.object({code:U.number().nullable(),message:U.string(),status:U.string()})}),sC=eZ({errorSchema:oZ,errorToMessage:e=>e.error.message});function lZ(e,t,n,r){var a,i;const s=(a=e.tools)!=null&&a.length?e.tools:void 0,o=[],l=r.includes("gemini-2"),u=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!u||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:o};if(s==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const d=[];for(const y of s)y.type==="provider-defined"?o.push({type:"unsupported-tool",tool:y}):d.push({name:y.name,description:(i=y.description)!=null?i:"",parameters:_s(y.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:o};const p=h.type;switch(p){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:o};default:{const y=p;throw new wv({functionality:`Unsupported tool choice type: ${y}`})}}}function m3({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var cZ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var p,y;const v=e.type,b=[],w=XK({provider:"google",providerOptions:h,schema:hZ}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:s,presencePenalty:o,stopSequences:l,seed:d,responseMimeType:(u==null?void 0:u.type)==="json"?"application/json":void 0,responseSchema:(u==null?void 0:u.type)==="json"&&u.schema!=null&&this.supportsStructuredOutputs?_s(u.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:w==null?void 0:w.responseModalities},{contents:S,systemInstruction:E}=sZ(t);switch(v){case"regular":{const{tools:C,toolConfig:k,toolWarnings:I}=lZ(e,(p=this.settings.useSearchGrounding)!=null?p:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...b,...I]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?_s(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:x,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(y=e.tool.description)!=null?y:"",parameters:_s(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=await this.getArgs(e),l=JSON.stringify(s),u=nC(await iC(this.config.headers),e.headers),{responseHeaders:d,value:h,rawValue:p}=await aC({url:`${this.config.baseURL}/${p3(this.modelId)}:generateContent`,headers:u,body:s,failedResponseHandler:sC,successfulResponseHandler:DM(dZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:y,...v}=s,b=h.candidates[0],w=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,x=g3({parts:w,generateId:this.config.generateId}),S=h.usageMetadata;return{text:y3(w),files:(t=b3(w))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:m3({finishReason:b.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:y,rawSettings:v},rawResponse:{headers:d,body:p},warnings:o,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:v3({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=nC(await iC(this.config.headers),e.headers),{responseHeaders:i,value:s}=await aC({url:`${this.config.baseURL}/${p3(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:sC,successfulResponseHandler:tZ(fZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:o,...l}=t;let u="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const p=this.config.generateId;let y=!1;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var w,x,S,E,C,k;if(!v.success){b.enqueue({type:"error",error:v.error});return}const I=v.value,R=I.usageMetadata;R!=null&&(d={promptTokens:(w=R.promptTokenCount)!=null?w:NaN,completionTokens:(x=R.candidatesTokenCount)!=null?x:NaN});const j=(S=I.candidates)==null?void 0:S[0];if(j==null)return;const L=j.content;if(L!=null){const B=y3(L.parts);B!=null&&b.enqueue({type:"text-delta",textDelta:B});const Z=b3(L.parts);if(Z!=null)for(const K of Z)b.enqueue({type:"file",mimeType:K.inlineData.mimeType,data:K.inlineData.data});const P=g3({parts:L.parts,generateId:p});if(P!=null)for(const K of P)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:K.toolCallId,toolName:K.toolName,argsTextDelta:K.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:K.toolCallId,toolName:K.toolName,args:K.args}),y=!0}if(j.finishReason!=null){u=m3({finishReason:j.finishReason,hasToolCalls:y});const B=(E=v3({groundingMetadata:j.groundingMetadata,generateId:p}))!=null?E:[];for(const Z of B)b.enqueue({type:"source",source:Z});h={google:{groundingMetadata:(C=j.groundingMetadata)!=null?C:null,safetyRatings:(k=j.safetyRatings)!=null?k:null}}}},flush(v){v.enqueue({type:"finish",finishReason:u,usage:d,providerMetadata:h})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function g3({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function y3(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function b3(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function v3({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var MM=U.object({role:U.string(),parts:U.array(U.union([U.object({text:U.string()}),U.object({functionCall:U.object({name:U.string(),args:U.unknown()})}),U.object({inlineData:U.object({mimeType:U.string(),data:U.string()})})])).nullish()}),uZ=U.object({web:U.object({uri:U.string(),title:U.string()}).nullish(),retrievedContext:U.object({uri:U.string(),title:U.string()}).nullish()}),PM=U.object({webSearchQueries:U.array(U.string()).nullish(),retrievalQueries:U.array(U.string()).nullish(),searchEntryPoint:U.object({renderedContent:U.string()}).nullish(),groundingChunks:U.array(uZ).nullish(),groundingSupports:U.array(U.object({segment:U.object({startIndex:U.number().nullish(),endIndex:U.number().nullish(),text:U.string().nullish()}),segment_text:U.string().nullish(),groundingChunkIndices:U.array(U.number()).nullish(),supportChunkIndices:U.array(U.number()).nullish(),confidenceScores:U.array(U.number()).nullish(),confidenceScore:U.array(U.number()).nullish()})).nullish(),retrievalMetadata:U.union([U.object({webDynamicRetrievalScore:U.number()}),U.object({})]).nullish()}),FM=U.object({category:U.string(),probability:U.string(),probabilityScore:U.number().nullish(),severity:U.string().nullish(),severityScore:U.number().nullish(),blocked:U.boolean().nullish()}),dZ=U.object({candidates:U.array(U.object({content:MM.nullish().or(U.object({}).strict()),finishReason:U.string().nullish(),safetyRatings:U.array(FM).nullish(),groundingMetadata:PM.nullish()})),usageMetadata:U.object({promptTokenCount:U.number().nullish(),candidatesTokenCount:U.number().nullish(),totalTokenCount:U.number().nullish()}).nullish()}),fZ=U.object({candidates:U.array(U.object({content:MM.nullish(),finishReason:U.string().nullish(),safetyRatings:U.array(FM).nullish(),groundingMetadata:PM.nullish()})).nullish(),usageMetadata:U.object({promptTokenCount:U.number().nullish(),candidatesTokenCount:U.number().nullish(),totalTokenCount:U.number().nullish()}).nullish()}),hZ=U.object({responseModalities:U.array(U.enum(["TEXT","IMAGE"])).nullish()}),pZ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new OK({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=nC(await iC(this.config.headers),t),{responseHeaders:a,value:i}=await aC({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(s=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:s}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:sC,successfulResponseHandler:DM(mZ),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(s=>s.values),usage:void 0,rawResponse:{headers:a}}}},mZ=U.object({embeddings:U.array(U.object({values:U.array(U.number())}))});function gZ(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function LM(e={}){var t;const n=(t=aZ(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":qK({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(o,l={})=>{var u;return new cZ(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(u=e.generateId)!=null?u:UK,isSupportedUrl:gZ,fetch:e.fetch})},i=(o,l={})=>new pZ(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),s=function(o,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(o,l)};return s.languageModel=a,s.chat=a,s.generativeAI=a,s.embedding=i,s.textEmbedding=i,s.textEmbeddingModel=i,s}LM();var $M="vercel.ai.error",yZ=Symbol.for($M),BM,bZ=class zM extends Error{constructor({name:t,message:n,cause:r}){super(n),this[BM]=!0,this.name=t,this.cause=r}static isInstance(t){return zM.hasMarker(t,$M)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};BM=yZ;var Ba=bZ,UM="AI_APICallError",HM=`vercel.ai.error.${UM}`,vZ=Symbol.for(HM),qM,Bl=class extends Ba{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:s,isRetryable:o=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:UM,message:e,cause:s}),this[qM]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=o,this.data=l}static isInstance(e){return Ba.hasMarker(e,HM)}};qM=vZ;var VM="AI_EmptyResponseBodyError",GM=`vercel.ai.error.${VM}`,wZ=Symbol.for(GM),WM,xZ=class extends Ba{constructor({message:e="Empty response body"}={}){super({name:VM,message:e}),this[WM]=!0}static isInstance(e){return Ba.hasMarker(e,GM)}};WM=wZ;function KM(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var ZM="AI_InvalidArgumentError",YM=`vercel.ai.error.${ZM}`,_Z=Symbol.for(YM),XM,SZ=class extends Ba{constructor({message:t,cause:n,argument:r}){super({name:ZM,message:t,cause:n}),this[XM]=!0,this.argument=r}static isInstance(t){return Ba.hasMarker(t,YM)}};XM=_Z;var JM="AI_InvalidPromptError",QM=`vercel.ai.error.${JM}`,EZ=Symbol.for(QM),e8,CZ=class extends Ba{constructor({prompt:e,message:t,cause:n}){super({name:JM,message:`Invalid prompt: ${t}`,cause:n}),this[e8]=!0,this.prompt=e}static isInstance(e){return Ba.hasMarker(e,QM)}};e8=EZ;var t8="AI_InvalidResponseDataError",n8=`vercel.ai.error.${t8}`,kZ=Symbol.for(n8),r8,AS=class extends Ba{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:t8,message:t}),this[r8]=!0,this.data=e}static isInstance(e){return Ba.hasMarker(e,n8)}};r8=kZ;var a8="AI_JSONParseError",i8=`vercel.ai.error.${a8}`,TZ=Symbol.for(i8),s8,Kv=class extends Ba{constructor({text:e,cause:t}){super({name:a8,message:`JSON parsing failed: Text: ${e}.
Error message: ${KM(t)}`,cause:t}),this[s8]=!0,this.text=e}static isInstance(e){return Ba.hasMarker(e,i8)}};s8=TZ;var o8="AI_LoadAPIKeyError",l8=`vercel.ai.error.${o8}`,AZ=Symbol.for(l8),c8,bb=class extends Ba{constructor({message:e}){super({name:o8,message:e}),this[c8]=!0}static isInstance(e){return Ba.hasMarker(e,l8)}};c8=AZ;var u8="AI_TypeValidationError",d8=`vercel.ai.error.${u8}`,NZ=Symbol.for(d8),f8,RZ=class oC extends Ba{constructor({value:t,cause:n}){super({name:u8,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${KM(n)}`,cause:n}),this[f8]=!0,this.value=t}static isInstance(t){return Ba.hasMarker(t,d8)}static wrap({value:t,cause:n}){return oC.isInstance(n)&&n.value===t?n:new oC({value:t,cause:n})}};f8=NZ;var Zv=RZ,h8="AI_UnsupportedFunctionalityError",p8=`vercel.ai.error.${h8}`,IZ=Symbol.for(p8),m8,Es=class extends Ba{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:h8,message:t}),this[m8]=!0,this.functionality=e}static isInstance(e){return Ba.hasMarker(e,p8)}};m8=IZ;let jZ=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},w3=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function NS(e){}function OZ(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=NS,onError:n=NS,onRetry:r=NS,onComment:a}=e;let i="",s=!0,o,l="",u="";function d(b){const w=s?b.replace(/^\xEF\xBB\xBF/,""):b,[x,S]=DZ(`${i}${w}`);for(const E of x)h(E);i=S,s=!1}function h(b){if(b===""){y();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const w=b.indexOf(":");if(w!==-1){const x=b.slice(0,w),S=b[w+1]===" "?2:1,E=b.slice(w+S);p(x,E,b);return}p(b,"",b)}function p(b,w,x){switch(b){case"event":u=w;break;case"data":l=`${l}${w}
`;break;case"id":o=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?r(parseInt(w,10)):n(new w3(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:x}));break;default:n(new w3(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:w,line:x}));break}}function y(){l.length>0&&t({id:o,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",u=""}function v(b={}){i&&b.consume&&h(i),s=!0,o=void 0,l="",u="",i=""}return{feed:d,reset:v}}function DZ(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(a!==-1&&i!==-1?s=Math.min(a,i):a!==-1?s=a:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const o=e.slice(r,s);t.push(o),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class MZ extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=OZ({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var PZ={};function Yv(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function ax(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var FZ=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=jZ(n,t);if(e==null)return a;if(n.includes(r))throw new SZ({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},vb=FZ();function LZ(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function RS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function $Z({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new bb({message:`${r} API key must be a string.`});if(typeof ta>"u")throw new bb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=PZ[t],e==null)throw new bb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new bb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var lC=Symbol.for("vercel.ai.validator");function BZ(e){return{[lC]:!0,validate:e}}function zZ(e){return typeof e=="object"&&e!==null&&lC in e&&e[lC]===!0&&"validate"in e}function UZ(e){return zZ(e)?e:HZ(e)}function HZ(e){return BZ(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function qZ({value:e,schema:t}){const n=g8({value:e,schema:t});if(!n.success)throw Zv.wrap({value:e,cause:n.error});return n.value}function g8({value:e,schema:t}){const n=UZ(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Zv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Zv.wrap({value:e,cause:r})}}}function VZ({text:e,schema:t}){try{const n=co.parse(e);return t==null?n:qZ({value:n,schema:t})}catch(n){throw Kv.isInstance(n)||Zv.isInstance(n)?n:new Kv({text:e,cause:n})}}function y8({text:e,schema:t}){try{const n=co.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=g8({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Kv.isInstance(n)?n:new Kv({text:e,cause:n})}}}function IS(e){try{return co.parse(e),!0}catch{return!1}}var GZ=()=>globalThis.fetch,Xv=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>WZ({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),WZ=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=GZ()})=>{try{const o=await s(e,{method:"POST",headers:LZ(t),body:n.content,signal:i}),l=ax(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw RS(d)||Bl.isInstance(d)?d:new Bl({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(RS(u)||Bl.isInstance(u))?u:new Bl({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(RS(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new Bl({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},KZ=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=ax(r);if(s.trim()==="")return{responseHeaders:o,value:new Bl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=VZ({text:s,schema:e});return{responseHeaders:o,value:new Bl({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new Bl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},b8=e=>async({response:t})=>{const n=ax(t);if(t.body==null)throw new xZ({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new MZ).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(y8({text:r,schema:e}))}}))}},v8=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=y8({text:a,schema:e}),s=ax(t);if(!i.success)throw new Bl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:ZZ}=globalThis;function YZ(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return ZZ(t)}function XZ(e){return e==null?void 0:e.replace(/\/$/,"")}var JZ=Object.defineProperty,QZ=Object.defineProperties,eY=Object.getOwnPropertyDescriptors,Jv=Object.getOwnPropertySymbols,w8=Object.prototype.hasOwnProperty,x8=Object.prototype.propertyIsEnumerable,x3=(e,t,n)=>t in e?JZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,es=(e,t)=>{for(var n in t||(t={}))w8.call(t,n)&&x3(e,n,t[n]);if(Jv)for(var n of Jv(t))x8.call(t,n)&&x3(e,n,t[n]);return e},xv=(e,t)=>QZ(e,eY(t)),Qv=(e,t)=>{var n={};for(var r in e)w8.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Jv)for(var r of Jv(e))t.indexOf(r)<0&&x8.call(e,r)&&(n[r]=e[r]);return n};function Ro(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function tY(e){var t,n,r;const a=[];for(const{role:i,content:s,providerMetadata:o}of e)switch(i){case"system":{a.push({role:"system",content:s,cache_control:Ro(o)});break}case"user":{if(s.length===1&&((t=s[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:s[0].text,cache_control:(n=Ro(o))!=null?n:Ro(s[0].providerMetadata)});break}const l=Ro(o),u=s.map(d=>{var h,p,y,v;switch(d.type){case"text":return{type:"text",text:d.text,cache_control:(h=Ro(d.providerMetadata))!=null?h:l};case"image":return{type:"image_url",image_url:{url:d.image instanceof URL?d.image.toString():`data:${(p=d.mimeType)!=null?p:"image/jpeg"};base64,${YZ(d.image)}`},cache_control:(y=Ro(d.providerMetadata))!=null?y:l};case"file":return{type:"text",text:d.data instanceof URL?d.data.toString():d.data,cache_control:(v=Ro(d.providerMetadata))!=null?v:l};default:{const b=d;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:u});break}case"assistant":{let l="";const u=[];for(const d of s)switch(d.type){case"text":{l+=d.text;break}case"tool-call":{u.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=d;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:l,tool_calls:u.length>0?u:void 0,cache_control:Ro(o)});break}case"tool":{for(const l of s)a.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=Ro(o))!=null?r:Ro(l.providerMetadata)});break}default:{const l=i;throw new Error(`Unsupported role: ${l}`)}}return a}function _3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function ew(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Nk=U.object({error:U.object({message:U.string(),type:U.string(),param:U.any().nullable(),code:U.string().nullable()})}),tw=KZ({errorSchema:Nk,errorToMessage:e=>e.error.message});function nY(e){return"parameters"in e}var rY=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:s,seed:o,stopSequences:l,responseFormat:u,topK:d,providerMetadata:h}){var p;const y=e.type,v=(p=h==null?void 0:h.openrouter)!=null?p:{},b=es(es(es({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:s,seed:o,stop:l,response_format:u,top_k:d,messages:tY(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(y){case"regular":return es(es({},b),sY(e));case"object-json":return xv(es({},b),{response_format:{type:"json_object"}});case"object-tool":return xv(es({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const w=y;throw new Es({functionality:`${w} mode`})}}}async doGenerate(e){var t,n,r,a,i,s,o;const l=this.getArgs(e),{responseHeaders:u,value:d}=await Xv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Yv(this.config.headers(),e.headers),body:l,failedResponseHandler:tw,successfulResponseHandler:v8(aY),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=l,{messages:p}=h,y=Qv(h,["messages"]),v=d.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:d.id,modelId:d.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var w;return{toolCallType:"function",toolCallId:(w=b.id)!=null?w:vb(),toolName:b.function.name,args:b.function.arguments}}),finishReason:ew(v.finish_reason),usage:{promptTokens:(i=(a=d.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(o=(s=d.usage)==null?void 0:s.completion_tokens)!=null?o:0},rawCall:{rawPrompt:p,rawSettings:y},rawResponse:{headers:u},warnings:[],logprobs:_3(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await Xv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Yv(this.config.headers(),e.headers),body:xv(es({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:tw,successfulResponseHandler:b8(iY),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,s=Qv(a,["messages"]),o=[];let l="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d;return{stream:r.pipeThrough(new TransformStream({transform(h,p){var y,v,b,w,x,S,E,C,k,I,R,j;if(!h.success){l="error",p.enqueue({type:"error",error:h.error});return}const L=h.value;if("error"in L){l="error",p.enqueue({type:"error",error:L.error});return}L.id&&p.enqueue({type:"response-metadata",id:L.id}),L.model&&p.enqueue({type:"response-metadata",modelId:L.model}),L.usage!=null&&(u={promptTokens:L.usage.prompt_tokens,completionTokens:L.usage.completion_tokens});const B=L.choices[0];if((B==null?void 0:B.finish_reason)!=null&&(l=ew(B.finish_reason)),(B==null?void 0:B.delta)==null)return;const Z=B.delta;Z.content!=null&&p.enqueue({type:"text-delta",textDelta:Z.content}),Z.reasoning!=null&&p.enqueue({type:"reasoning",textDelta:Z.reasoning});const P=_3(B==null?void 0:B.logprobs);if(P!=null&&P.length&&(d===void 0&&(d=[]),d.push(...P)),Z.tool_calls!=null)for(const K of Z.tool_calls){const q=K.index;if(o[q]==null){if(K.type!=="function")throw new AS({data:K,message:"Expected 'function' type."});if(K.id==null)throw new AS({data:K,message:"Expected 'id' to be a string."});if(((y=K.function)==null?void 0:y.name)==null)throw new AS({data:K,message:"Expected 'function.name' to be a string."});o[q]={id:K.id,type:"function",function:{name:K.function.name,arguments:(v=K.function.arguments)!=null?v:""},sent:!1};const ae=o[q];if(ae==null)throw new Error("Tool call is missing");((b=ae.function)==null?void 0:b.name)!=null&&((w=ae.function)==null?void 0:w.arguments)!=null&&IS(ae.function.arguments)&&(p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:ae.function.arguments}),p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=ae.id)!=null?x:vb(),toolName:ae.function.name,args:ae.function.arguments}),ae.sent=!0);continue}const de=o[q];if(de==null)throw new Error("Tool call is missing");((S=K.function)==null?void 0:S.arguments)!=null&&(de.function.arguments+=(C=(E=K.function)==null?void 0:E.arguments)!=null?C:""),p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:de.id,toolName:de.function.name,argsTextDelta:(k=K.function.arguments)!=null?k:""}),((I=de.function)==null?void 0:I.name)!=null&&((R=de.function)==null?void 0:R.arguments)!=null&&IS(de.function.arguments)&&(p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(j=de.id)!=null?j:vb(),toolName:de.function.name,args:de.function.arguments}),de.sent=!0)}},flush(h){var p;if(l==="tool-calls")for(const y of o)y.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(p=y.id)!=null?p:vb(),toolName:y.function.name,args:IS(y.function.arguments)?y.function.arguments:"{}"}),y.sent=!0);h.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},_8=U.object({id:U.string().optional(),model:U.string().optional(),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number(),total_tokens:U.number()}).nullish()}),aY=_8.extend({choices:U.array(U.object({message:U.object({role:U.literal("assistant"),content:U.string().nullable().optional(),reasoning:U.string().nullable().optional(),tool_calls:U.array(U.object({id:U.string().optional().nullable(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).optional()}),index:U.number(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullable().optional(),finish_reason:U.string().optional().nullable()}))}),iY=U.union([_8.extend({choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).optional(),content:U.string().nullish(),reasoning:U.string().nullish().optional(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullable().optional(),index:U.number()}))}),Nk]);function sY(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(s=>nY(s)?{type:"function",function:{name:s.name,description:s.description,parameters:s.parameters}}:{type:"function",function:{name:s.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const s=i;throw new Error(`Unsupported tool choice type: ${s}`)}}}function oY({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new CZ({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Es({functionality:"images"});case"file":throw new Es({functionality:"file attachments"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Es({functionality:"tool-call messages"});case"reasoning":throw new Es({functionality:"reasoning messages"});case"redacted-reasoning":throw new Es({functionality:"redacted reasoning messages"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Es({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a}}function S3(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,s])=>({token:i,logprob:s})):[]}})}var lY=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:s,presencePenalty:o,seed:l,responseFormat:u,topK:d,stopSequences:h,providerMetadata:p}){var y,v;const b=e.type,w=(y=p==null?void 0:p.openrouter)!=null?y:{},{prompt:x}=oY({prompt:n,inputFormat:t}),S=es(es(es({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:o,seed:l,stop:h,response_format:u,top_k:d,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),w);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new Es({functionality:"tools"});if(e.toolChoice)throw new Es({functionality:"toolChoice"});return S}case"object-json":throw new Es({functionality:"object-json mode"});case"object-tool":throw new Es({functionality:"object-tool mode"});default:{const E=b;throw new Es({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const s=this.getArgs(e),{responseHeaders:o,value:l}=await Xv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Yv(this.config.headers(),e.headers),body:s,failedResponseHandler:tw,successfulResponseHandler:v8(E3),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=s,{prompt:d}=u,h=Qv(u,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const p=l.choices[0];if(!p)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=p.text)!=null?t:"",reasoning:p.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=l.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:ew(p.finish_reason),logprobs:S3(p.logprobs),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await Xv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Yv(this.config.headers(),e.headers),body:xv(es({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:tw,successfulResponseHandler:b8(E3),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,s=Qv(a,["prompt"]);let o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){if(!d.success){o="error",h.enqueue({type:"error",error:d.error});return}const p=d.value;if("error"in p){o="error",h.enqueue({type:"error",error:p.error});return}p.usage!=null&&(l={promptTokens:p.usage.prompt_tokens,completionTokens:p.usage.completion_tokens});const y=p.choices[0];(y==null?void 0:y.finish_reason)!=null&&(o=ew(y.finish_reason)),(y==null?void 0:y.text)!=null&&h.enqueue({type:"text-delta",textDelta:y.text});const v=S3(y==null?void 0:y.logprobs);v!=null&&v.length&&(u===void 0&&(u=[]),u.push(...v))},flush(d){d.enqueue({type:"finish",finishReason:o,logprobs:u,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},E3=U.union([U.object({id:U.string().optional(),model:U.string().optional(),choices:U.array(U.object({text:U.string(),reasoning:U.string().nullish().optional(),finish_reason:U.string().nullish(),index:U.number(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullable().optional()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).optional().nullable()}),Nk]);function S8(e={}){var t,n,r;const a=(n=XZ((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",s=()=>es({Authorization:`Bearer ${$Z({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),o=(h,p={})=>new rY(h,p,{provider:"openrouter.chat",url:({path:y})=>`${a}${y}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(h,p={})=>new lY(h,p,{provider:"openrouter.completion",url:({path:y})=>`${a}${y}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,p)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?l(h,p):o(h,p)},d=function(h,p){return u(h,p)};return d.languageModel=u,d.chat=o,d.completion=l,d}S8({compatibility:"strict"});var dd={},jS={},C3;function k3(){return C3||(C3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(jS)),jS}var T3;function cY(){return T3||(T3=1,function(e){var t=dd&&dd.__createBinding||(Object.create?function(u,d,h,p){p===void 0&&(p=h);var y=Object.getOwnPropertyDescriptor(d,h);(!y||("get"in y?!d.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,p,y)}:function(u,d,h,p){p===void 0&&(p=h),u[p]=d[h]}),n=dd&&dd.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&t(d,u,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=k3();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(k3(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function s(u,d=r.Allow.ALL){if(typeof u!="string")throw new TypeError(`expecting str, got ${typeof u}`);if(!u.trim())throw new Error(`${u} is empty`);return o(u.trim(),d)}e.parseJSON=s;const o=(u,d)=>{const h=u.length;let p=0;const y=k=>{throw new a(`${k} at position ${p}`)},v=k=>{throw new i(`${k} at position ${p}`)},b=()=>(C(),p>=h&&y("Unexpected end of input"),u[p]==='"'?w():u[p]==="{"?x():u[p]==="["?S():u.substring(p,p+4)==="null"||r.Allow.NULL&d&&h-p<4&&"null".startsWith(u.substring(p))?(p+=4,null):u.substring(p,p+4)==="true"||r.Allow.BOOL&d&&h-p<4&&"true".startsWith(u.substring(p))?(p+=4,!0):u.substring(p,p+5)==="false"||r.Allow.BOOL&d&&h-p<5&&"false".startsWith(u.substring(p))?(p+=5,!1):u.substring(p,p+8)==="Infinity"||r.Allow.INFINITY&d&&h-p<8&&"Infinity".startsWith(u.substring(p))?(p+=8,1/0):u.substring(p,p+9)==="-Infinity"||r.Allow._INFINITY&d&&1<h-p&&h-p<9&&"-Infinity".startsWith(u.substring(p))?(p+=9,-1/0):u.substring(p,p+3)==="NaN"||r.Allow.NAN&d&&h-p<3&&"NaN".startsWith(u.substring(p))?(p+=3,NaN):E()),w=()=>{const k=p;let I=!1;for(p++;p<h&&(u[p]!=='"'||I&&u[p-1]==="\\");)I=u[p]==="\\"?!I:!1,p++;if(u.charAt(p)=='"')try{return JSON.parse(u.substring(k,++p-Number(I)))}catch(R){v(String(R))}else if(r.Allow.STR&d)try{return JSON.parse(u.substring(k,p-Number(I))+'"')}catch{return JSON.parse(u.substring(k,u.lastIndexOf("\\"))+'"')}y("Unterminated string literal")},x=()=>{p++,C();const k={};try{for(;u[p]!=="}";){if(C(),p>=h&&r.Allow.OBJ&d)return k;const I=w();C(),p++;try{const R=b();k[I]=R}catch(R){if(r.Allow.OBJ&d)return k;throw R}C(),u[p]===","&&p++}}catch{if(r.Allow.OBJ&d)return k;y("Expected '}' at end of object")}return p++,k},S=()=>{p++;const k=[];try{for(;u[p]!=="]";)k.push(b()),C(),u[p]===","&&p++}catch{if(r.Allow.ARR&d)return k;y("Expected ']' at end of array")}return p++,k},E=()=>{if(p===0){u==="-"&&v("Not sure what '-' is");try{return JSON.parse(u)}catch(I){if(r.Allow.NUM&d)try{return JSON.parse(u.substring(0,u.lastIndexOf("e")))}catch{}v(String(I))}}const k=p;for(u[p]==="-"&&p++;u[p]&&",]}".indexOf(u[p])===-1;)p++;p==h&&!(r.Allow.NUM&d)&&y("Unterminated number literal");try{return JSON.parse(u.substring(k,p))}catch{u.substring(k,p)==="-"&&y("Not sure what '-' is");try{return JSON.parse(u.substring(k,u.lastIndexOf("e")))}catch(R){v(String(R))}}},C=()=>{for(;p<h&&` 
\r	`.includes(u[p]);)p++};return b()},l=s;e.parse=l}(dd)),dd}var uY=cY();function OS(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new Ar({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(Ah(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const s of n)switch(s.type){case"text":{a.push(s.text);break}case"tool-call":{i.push({function:{arguments:s.args,name:s.toolName},id:s.toolCallId,type:"function"});break}default:{const o=s;throw new Error(`Unsupported part: ${o}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var dY=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=uY.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const s=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(s==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:Lo(),type:"function"});const o=this._toolCalls[a];o.function.arguments=s,e.enqueue({argsTextDelta:t,toolCallId:o.id,toolCallType:"function",toolName:o.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function fY({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var hY=U.object({error:U.object({code:U.string().nullable(),message:U.string(),param:U.any().nullable(),type:U.string()})}),cC=UD({errorSchema:hY,errorToMessage:e=>e.error.message});function pY({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const o of n)o.type==="provider-defined"?r.push({tool:o,type:"unsupported-tool"}):i.push({function:{description:o.description,name:o.name,parameters:o.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const s=a.type;switch(s){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const o=s;throw new Ar({functionality:`Unsupported tool choice type: ${o}`})}}}function mY(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var gY=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},yY=e=>async({response:t})=>{const n=d0(t);if(t.body===null)throw new wk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new gY).pipeThrough(new TransformStream({transform(r,a){a.enqueue(jd({schema:e,text:r}))}}))}},bY=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:s,stopSequences:o,temperature:l,topK:u,topP:d}){const h=n.type,p=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&p.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const y={format:i==null?void 0:i.type,model:this.modelId,options:mY({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:s,stop:o,temperature:l,tfs_z:this.settings.tfsZ,top_k:u,top_p:d,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=pY({mode:n});return{args:{...y,messages:OS(a),tools:v},type:h,warnings:[...p,...b]}}case"object-json":return{args:{...y,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:OS(a)},type:h,warnings:p};case"object-tool":return{args:{...y,messages:OS(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:p};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:s,value:o}=await Qs({abortSignal:e.abortSignal,body:i,failedResponseHandler:cC,fetch:this.config.fetch,headers:Wo(this.config.headers(),e.headers),successfulResponseHandler:Wd(vY),url:`${this.config.baseURL}/chat`}),{messages:l,...u}=i,d=(t=o.message.tool_calls)==null?void 0:t.map(h=>{var p;return{args:JSON.stringify(h.function.arguments),toolCallId:(p=h.id)!=null?p:Lo(),toolCallType:"function",toolName:h.function.name}});return{finishReason:fY({finishReason:o.done_reason,hasToolCalls:d!==void 0&&d.length>0}),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},request:{body:JSON.stringify(i)},text:(n=o.message.content)!=null?n:void 0,toolCalls:d,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const y=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...y.response}),y.text&&b.enqueue({textDelta:y.text,type:"text-delta"}),y.toolCalls)for(const w of y.toolCalls)b.enqueue({argsTextDelta:w.args,toolCallId:w.toolCallId,toolCallType:"function",toolName:w.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",...w});b.enqueue({finishReason:y.finishReason,logprobs:y.logprobs,providerMetadata:y.providerMetadata,type:"finish",usage:y.usage}),b.close()}});return{rawCall:y.rawCall,rawResponse:y.rawResponse,stream:v,warnings:y.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Qs({abortSignal:e.abortSignal,body:t,failedResponseHandler:cC,fetch:this.config.fetch,headers:Wo(this.config.headers(),e.headers),successfulResponseHandler:yY(wY),url:`${this.config.baseURL}/chat`}),{messages:s,...o}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,u=new dY({tools:l,type:n});let d="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:p=!0}=this.settings;return{rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(y){y.enqueue({finishReason:d,type:"finish",usage:h})},async transform(y,v){if(!y.success){v.enqueue({error:y.error,type:"error"});return}const b=y.value;if(b.done){d=u.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}p&&u.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},vY=U.object({created_at:U.string(),done:U.literal(!0),done_reason:U.string().optional().nullable(),eval_count:U.number(),eval_duration:U.number(),load_duration:U.number().optional(),message:U.object({content:U.string(),role:U.string(),tool_calls:U.array(U.object({function:U.object({arguments:U.record(U.any()),name:U.string()}),id:U.string().optional()})).optional().nullable()}),model:U.string(),prompt_eval_count:U.number().optional(),prompt_eval_duration:U.number().optional(),total_duration:U.number()}),wY=U.discriminatedUnion("done",[U.object({created_at:U.string(),done:U.literal(!1),message:U.object({content:U.string(),role:U.string()}),model:U.string()}),U.object({created_at:U.string(),done:U.literal(!0),eval_count:U.number(),eval_duration:U.number(),load_duration:U.number().optional(),model:U.string(),prompt_eval_count:U.number().optional(),prompt_eval_duration:U.number().optional(),total_duration:U.number()})]),xY=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new _k({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Qs({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:cC,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Wd(_Y),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},_Y=U.object({embeddings:U.array(U.array(U.number())),prompt_eval_count:U.number().nullable()});function E8(e={}){var t;const n=(t=qD(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(o,l={})=>new bY(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(o,l={})=>new xY(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),s=function(o,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(o,l)};return s.chat=a,s.embedding=i,s.languageModel=a,s.textEmbedding=i,s.textEmbeddingModel=i,s}E8();let SY=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function jh(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function EY(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),p=d+1,y=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);o(h,y)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=CY(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],u)},flush(l){i(e,l),s(l)}})}function CY(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function ix(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var kY=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=SY(n,t);if(e==null)return a;if(n.includes(r))throw new xk({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},DS=kY();function TY(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function MS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var uC=Symbol.for("vercel.ai.validator");function AY(e){return{[uC]:!0,validate:e}}function NY(e){return typeof e=="object"&&e!==null&&uC in e&&e[uC]===!0&&"validate"in e}function RY(e){return NY(e)?e:IY(e)}function IY(e){return AY(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function jY({value:e,schema:t}){const n=C8({value:e,schema:t});if(!n.success)throw lu.wrap({value:e,cause:n.error});return n.value}function C8({value:e,schema:t}){const n=RY(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:lu.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:lu.wrap({value:e,cause:r})}}}function OY({text:e,schema:t}){try{const n=co.parse(e);return t==null?n:jY({value:n,schema:t})}catch(n){throw ou.isInstance(n)||lu.isInstance(n)?n:new ou({text:e,cause:n})}}function k8({text:e,schema:t}){try{const n=co.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=C8({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:ou.isInstance(n)?n:new ou({text:e,cause:n})}}}function A3(e){try{return co.parse(e),!0}catch{return!1}}var DY=()=>globalThis.fetch,Oh=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>MY({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),MY=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=DY()})=>{try{const o=await s(e,{method:"POST",headers:TY(t),body:n.content,signal:i}),l=ix(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw MS(d)||_a.isInstance(d)?d:new _a({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(MS(u)||_a.isInstance(u))?u:new _a({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(MS(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new _a({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},sx=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=ix(r);if(s.trim()==="")return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=OY({text:s,schema:e});return{responseHeaders:o,value:new _a({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},T8=e=>async({response:t})=>{const n=ix(t);if(t.body==null)throw new wk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(EY()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(k8({text:r,schema:e}))}}))}},ox=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=k8({text:a,schema:e}),s=ix(t);if(!i.success)throw new _a({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:PY}=globalThis;function FY(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return PY(t)}function LY(e){return e==null?void 0:e.replace(/\/$/,"")}function Mm(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function $Y(e){const t=[];for(const{role:n,content:r,...a}of e){const i=Mm({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Mm(r[0])});break}t.push({role:"user",content:r.map(s=>{var o;const l=Mm(s);switch(s.type){case"text":return{type:"text",text:s.text,...l};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(o=s.mimeType)!=null?o:"image/jpeg"};base64,${FY(s.image)}`},...l};case"file":throw new Ar({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let s="";const o=[];for(const l of r){const u=Mm(l);switch(l.type){case"text":{s+=l.text;break}case"tool-call":{o.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...u});break}}}t.push({role:"assistant",content:s,tool_calls:o.length>0?o:void 0,...i});break}case"tool":{for(const s of r){const o=Mm(s);t.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result),...o})}break}default:{const s=n;throw new Error(`Unsupported role: ${s}`)}}}return t}function nw({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function rw(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var BY=U.object({error:U.object({message:U.string(),type:U.string().nullish(),param:U.any().nullish(),code:U.union([U.string(),U.number()]).nullish()})}),lx={errorSchema:BY,errorToMessage:e=>e.error.message};function zY({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)l.type==="provider-defined"?a.push({type:"unsupported-tool",tool:l}):s.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const l=o;throw new Ar({functionality:`Unsupported tool choice type: ${l}`})}}}var UY=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:lx;this.chunkSchema=qY(i.errorSchema),this.failedResponseHandler=sx(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,providerMetadata:l,stopSequences:u,responseFormat:d,seed:h}){var p,y;const v=e.type,b=[];i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),(d==null?void 0:d.type)==="json"&&d.schema!=null&&!this.supportsStructuredOutputs&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const w={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(d==null?void 0:d.type)==="json"?this.supportsStructuredOutputs===!0&&d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,name:(p=d.name)!=null?p:"response",description:d.description}}:{type:"json_object"}:void 0,stop:u,seed:h,...l==null?void 0:l[this.providerOptionsName],messages:$Y(t)};switch(v){case"regular":{const{tools:x,tool_choice:S,toolWarnings:E}=zY({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...w,tools:x,tool_choice:S},warnings:[...b,...E]}}case"object-json":return{args:{...w,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(y=e.name)!=null?y:"response",description:e.description}}:{type:"json_object"}},warnings:b};case"object-tool":return{args:{...w,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:b};default:{const x=v;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l,u;const{args:d,warnings:h}=this.getArgs({...e}),p=JSON.stringify(d),{responseHeaders:y,value:v,rawValue:b}=await Oh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:jh(this.config.headers(),e.headers),body:d,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:ox(HY),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:w,...x}=d,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:b});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:DS(),toolName:C.function.name,args:C.function.arguments}}),finishReason:rw(S.finish_reason),usage:{promptTokens:(o=(s=v.usage)==null?void 0:s.prompt_tokens)!=null?o:NaN,completionTokens:(u=(l=v.usage)==null?void 0:l.completion_tokens)!=null?u:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:w,rawSettings:x},rawResponse:{headers:y,body:b},response:nw(v),warnings:h,request:{body:p}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(w){if(w.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const x of v.reasoning)x.type==="text"&&w.enqueue({type:"reasoning",textDelta:x.text});else w.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&w.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const x of v.toolCalls)w.enqueue({type:"tool-call",...x});w.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),w.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:s,value:o}=await Oh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:jh(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:T8(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...u}=n,d=[];let h="unknown",p={promptTokens:void 0,completionTokens:void 0},y=!0;return{stream:o.pipeThrough(new TransformStream({transform(v,b){var w,x,S,E,C,k,I,R,j,L,B,Z,P,K;if(!v.success){h="error",b.enqueue({type:"error",error:v.error});return}const q=v.value;if(i==null||i.processChunk(v.rawValue),"error"in q){h="error",b.enqueue({type:"error",error:q.error.message});return}y&&(y=!1,b.enqueue({type:"response-metadata",...nw(q)})),q.usage!=null&&(p={promptTokens:(w=q.usage.prompt_tokens)!=null?w:void 0,completionTokens:(x=q.usage.completion_tokens)!=null?x:void 0});const de=q.choices[0];if((de==null?void 0:de.finish_reason)!=null&&(h=rw(de.finish_reason)),(de==null?void 0:de.delta)==null)return;const ae=de.delta;if(ae.reasoning_content!=null&&b.enqueue({type:"reasoning",textDelta:ae.reasoning_content}),ae.content!=null&&b.enqueue({type:"text-delta",textDelta:ae.content}),ae.tool_calls!=null)for(const te of ae.tool_calls){const X=te.index;if(d[X]==null){if(te.type!=="function")throw new vh({data:te,message:"Expected 'function' type."});if(te.id==null)throw new vh({data:te,message:"Expected 'id' to be a string."});if(((S=te.function)==null?void 0:S.name)==null)throw new vh({data:te,message:"Expected 'function.name' to be a string."});d[X]={id:te.id,type:"function",function:{name:te.function.name,arguments:(E=te.function.arguments)!=null?E:""},hasFinished:!1};const D=d[X];((C=D.function)==null?void 0:C.name)!=null&&((k=D.function)==null?void 0:k.arguments)!=null&&(D.function.arguments.length>0&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:D.id,toolName:D.function.name,argsTextDelta:D.function.arguments}),A3(D.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(I=D.id)!=null?I:DS(),toolName:D.function.name,args:D.function.arguments}),D.hasFinished=!0));continue}const re=d[X];re.hasFinished||(((R=te.function)==null?void 0:R.arguments)!=null&&(re.function.arguments+=(L=(j=te.function)==null?void 0:j.arguments)!=null?L:""),b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:re.id,toolName:re.function.name,argsTextDelta:(B=te.function.arguments)!=null?B:""}),((Z=re.function)==null?void 0:Z.name)!=null&&((P=re.function)==null?void 0:P.arguments)!=null&&A3(re.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(K=re.id)!=null?K:DS(),toolName:re.function.name,args:re.function.arguments}),re.hasFinished=!0))}},flush(v){var b,w;const x=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(b=p.promptTokens)!=null?b:NaN,completionTokens:(w=p.completionTokens)!=null?w:NaN},...x&&{providerMetadata:x}})}})),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},warnings:r,request:{body:a}}}},HY=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({message:U.object({role:U.literal("assistant").nullish(),content:U.string().nullish(),reasoning_content:U.string().nullish(),tool_calls:U.array(U.object({id:U.string().nullish(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).nullish()}),finish_reason:U.string().nullish()})),usage:U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish()}).nullish()}),qY=e=>U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).nullish(),content:U.string().nullish(),reasoning_content:U.string().nullish(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),finish_reason:U.string().nullish()})),usage:U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish()}).nullish()}),e]);function VY({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new Ml({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Ar({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Ar({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Ar({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var GY=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:lx;this.chunkSchema=KY(a.errorSchema),this.failedResponseHandler=sx(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h,providerMetadata:p}){var y;const v=e.type,b=[];s!=null&&b.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:w,stopSequences:x}=VY({prompt:n,inputFormat:t}),S=[...x??[],...u??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,...p==null?void 0:p[this.providerOptionsName],prompt:w,stop:S.length>0?S:void 0};switch(v){case"regular":{if((y=e.tools)!=null&&y.length)throw new Ar({functionality:"tools"});if(e.toolChoice)throw new Ar({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new Ar({functionality:"object-json mode"});case"object-tool":throw new Ar({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:s}=this.getArgs(e),{responseHeaders:o,value:l,rawValue:u}=await Oh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:jh(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:ox(WY),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:d,...h}=i,p=l.choices[0];return{text:p.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=l.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:rw(p.finish_reason),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o,body:u},response:nw(l),warnings:s,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await Oh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:jh(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:T8(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,p){if(!h.success){l="error",p.enqueue({type:"error",error:h.error});return}const y=h.value;if("error"in y){l="error",p.enqueue({type:"error",error:y.error});return}d&&(d=!1,p.enqueue({type:"response-metadata",...nw(y)})),y.usage!=null&&(u={promptTokens:y.usage.prompt_tokens,completionTokens:y.usage.completion_tokens});const v=y.choices[0];(v==null?void 0:v.finish_reason)!=null&&(l=rw(v.finish_reason)),(v==null?void 0:v.text)!=null&&p.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:l,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},WY=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),KY=e=>U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string().nullish(),index:U.number()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),e]),ZY=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new _k({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await Oh({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:jh(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:sx((r=this.config.errorStructure)!=null?r:lx),successfulResponseHandler:ox(YY),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(s=>s.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},YY=U.object({data:U.array(U.object({embedding:U.array(U.number())})),usage:U.object({prompt_tokens:U.number()}).nullish()}),XY=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h,p;const y=[];r!=null&&y.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&y.push({type:"unsupported-setting",setting:"seed"});const v=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:b,responseHeaders:w}=await Oh({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:jh(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:sx((p=this.config.errorStructure)!=null?p:lx),successfulResponseHandler:ox(JY),abortSignal:o,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:y,response:{timestamp:v,modelId:this.modelId,headers:w}}}},JY=U.object({data:U.array(U.object({b64_json:U.string()}))});function QY(e){const t=LY(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:p})=>{const y=new URL(`${t}${p}`);return e.queryParams&&(y.search=new URLSearchParams(e.queryParams).toString()),y.toString()},headers:r,fetch:e.fetch}),i=(h,p={})=>s(h,p),s=(h,p={})=>new UY(h,p,{...a("chat"),defaultObjectGenerationMode:"tool"}),o=(h,p={})=>new GY(h,p,a("completion")),l=(h,p={})=>new ZY(h,p,a("embedding")),u=(h,p={})=>new XY(h,p,a("image")),d=(h,p)=>i(h,p);return d.languageModel=i,d.chatModel=s,d.completionModel=o,d.textEmbeddingModel=l,d.imageModel=u,d}const Qc=(e,t)=>`${e}:${t}`,sc=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},aw=e=>e==="openai"||e==="openrouter"||e==="google",Rk=e=>e==="ollama"||e==="openai-compatible",fh=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",Ad=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],eX={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},A8=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function N8(e,t,n){try{switch(e.type){case"openai":return rM({apiKey:n})(t);case"google":return LM({apiKey:n})(t);case"openrouter":return S8({apiKey:n})(t);case"ollama":return E8({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return QY({baseURL:A8(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function Ik(e,t,n){const a=$n.getState().getAllAvailableModelDefsForProvider(e.id).find(s=>s.id===t);if(!a){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const i=N8(e,t,n);if(!i){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:Qc(e.id,t),name:a.name,providerId:e.id,providerName:e.name,instance:i,metadata:a}}const R8={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]};var zo=I6();const I8=ui(zo);function tX(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const nX=e=>{switch(e){case"success":return iX;case"info":return oX;case"warning":return sX;case"error":return lX;default:return null}},rX=Array(12).fill(0),aX=({visible:e,className:t})=>gt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},gt.createElement("div",{className:"sonner-spinner"},rX.map((n,r)=>gt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),iX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),sX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),oX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),lX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),cX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},gt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),gt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),uX=()=>{const[e,t]=gt.useState(document.hidden);return gt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let dC=1;class dX{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:dC++,s=this.toasts.find(l=>l.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:o,title:r}):l):this.addToast({title:r,...a,dismissible:o,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,s;const o=a.then(async u=>{if(s=["resolve",u],gt.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(hX(u)&&!u.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(u instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(u):n.error,p=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(u):n.success,p=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:p,...v})}}).catch(async u=>{if(s=["reject",u],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,y=typeof d=="object"&&!gt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...y})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,d)=>o.then(()=>s[0]==="reject"?d(s[1]):u(s[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||dC++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ji=new dX,fX=(e,t)=>{const n=(t==null?void 0:t.id)||dC++;return ji.addToast({title:e,...t,id:n}),n},hX=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",pX=fX,mX=()=>ji.toasts,gX=()=>ji.getActiveToasts(),Ye=Object.assign(pX,{success:ji.success,info:ji.info,warning:ji.warning,error:ji.error,custom:ji.custom,message:ji.message,promise:ji.promise,dismiss:ji.dismiss,loading:ji.loading},{getHistory:mX,getToasts:gX});tX("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function wb(e){return e.label!==void 0}const yX=3,bX="24px",vX="16px",N3=4e3,wX=356,xX=14,_X=45,SX=200;function Io(...e){return e.filter(Boolean).join(" ")}function EX(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const CX=e=>{var t,n,r,a,i,s,o,l,u;const{invert:d,toast:h,unstyled:p,interacting:y,setHeights:v,visibleToasts:b,heights:w,index:x,toasts:S,expanded:E,removeToast:C,defaultRichColors:k,closeButton:I,style:R,cancelButtonStyle:j,actionButtonStyle:L,className:B="",descriptionClassName:Z="",duration:P,position:K,gap:q,expandByDefault:de,classNames:ae,icons:te,closeButtonAriaLabel:X="Close toast"}=e,[re,D]=gt.useState(null),[J,Q]=gt.useState(null),[ie,me]=gt.useState(!1),[ve,Me]=gt.useState(!1),[Ae,Re]=gt.useState(!1),[ke,Fe]=gt.useState(!1),[et,Le]=gt.useState(!1),[Ie,z]=gt.useState(0),[Se,Te]=gt.useState(0),ue=gt.useRef(h.duration||P||N3),oe=gt.useRef(null),ee=gt.useRef(null),xe=x===0,Pe=x+1<=b,Ee=h.type,We=h.dismissible!==!1,Nt=h.className||"",it=h.descriptionClassName||"",_t=gt.useMemo(()=>w.findIndex(Oe=>Oe.toastId===h.id)||0,[w,h.id]),Ft=gt.useMemo(()=>{var Oe;return(Oe=h.closeButton)!=null?Oe:I},[h.closeButton,I]),Pt=gt.useMemo(()=>h.duration||P||N3,[h.duration,P]),Zt=gt.useRef(0),ye=gt.useRef(0),O=gt.useRef(0),G=gt.useRef(null),[fe,je]=K.split("-"),be=gt.useMemo(()=>w.reduce((Oe,Ke,jt)=>jt>=_t?Oe:Oe+Ke.height,0),[w,_t]),Ce=uX(),le=h.invert||d,ft=Ee==="loading";ye.current=gt.useMemo(()=>_t*q+be,[_t,be]),gt.useEffect(()=>{ue.current=Pt},[Pt]),gt.useEffect(()=>{me(!0)},[]),gt.useEffect(()=>{const Oe=ee.current;if(Oe){const Ke=Oe.getBoundingClientRect().height;return Te(Ke),v(jt=>[{toastId:h.id,height:Ke,position:h.position},...jt]),()=>v(jt=>jt.filter(pe=>pe.toastId!==h.id))}},[v,h.id]),gt.useLayoutEffect(()=>{if(!ie)return;const Oe=ee.current,Ke=Oe.style.height;Oe.style.height="auto";const jt=Oe.getBoundingClientRect().height;Oe.style.height=Ke,Te(jt),v(pe=>pe.find(H=>H.toastId===h.id)?pe.map(H=>H.toastId===h.id?{...H,height:jt}:H):[{toastId:h.id,height:jt,position:h.position},...pe])},[ie,h.title,h.description,v,h.id]);const vt=gt.useCallback(()=>{Me(!0),z(ye.current),v(Oe=>Oe.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},SX)},[h,C,v,ye]);gt.useEffect(()=>{if(h.promise&&Ee==="loading"||h.duration===1/0||h.type==="loading")return;let Oe;return E||y||Ce?(()=>{if(O.current<Zt.current){const pe=new Date().getTime()-Zt.current;ue.current=ue.current-pe}O.current=new Date().getTime()})():(()=>{ue.current!==1/0&&(Zt.current=new Date().getTime(),Oe=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},ue.current))})(),()=>clearTimeout(Oe)},[E,y,h,Ee,Ce,vt]),gt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function F(){var Oe;if(te!=null&&te.loading){var Ke;return gt.createElement("div",{className:Io(ae==null?void 0:ae.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Ee==="loading"},te.loading)}return gt.createElement(aX,{className:Io(ae==null?void 0:ae.loader,h==null||(Oe=h.classNames)==null?void 0:Oe.loader),visible:Ee==="loading"})}const Be=h.icon||(te==null?void 0:te[Ee])||nX(Ee);var nt,ge;return gt.createElement("li",{tabIndex:0,ref:ee,className:Io(B,Nt,ae==null?void 0:ae.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ae==null?void 0:ae.default,ae==null?void 0:ae[Ee],h==null||(n=h.classNames)==null?void 0:n[Ee]),"data-sonner-toast":"","data-rich-colors":(nt=h.richColors)!=null?nt:k,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":ie,"data-promise":!!h.promise,"data-swiped":et,"data-removed":ve,"data-visible":Pe,"data-y-position":fe,"data-x-position":je,"data-index":x,"data-front":xe,"data-swiping":Ae,"data-dismissible":We,"data-type":Ee,"data-invert":le,"data-swipe-out":ke,"data-swipe-direction":J,"data-expanded":!!(E||de&&ie),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${ve?Ie:ye.current}px`,"--initial-height":de?"auto":`${Se}px`,...R,...h.style},onDragEnd:()=>{Re(!1),D(null),G.current=null},onPointerDown:Oe=>{ft||!We||(oe.current=new Date,z(ye.current),Oe.target.setPointerCapture(Oe.pointerId),Oe.target.tagName!=="BUTTON"&&(Re(!0),G.current={x:Oe.clientX,y:Oe.clientY}))},onPointerUp:()=>{var Oe,Ke,jt;if(ke||!We)return;G.current=null;const pe=Number(((Oe=ee.current)==null?void 0:Oe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),V=Number(((Ke=ee.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),H=new Date().getTime()-((jt=oe.current)==null?void 0:jt.getTime()),W=re==="x"?pe:V,he=Math.abs(W)/H;if(Math.abs(W)>=_X||he>.11){z(ye.current),h.onDismiss==null||h.onDismiss.call(h,h),Q(re==="x"?pe>0?"right":"left":V>0?"down":"up"),vt(),Fe(!0);return}else{var Ne,He;(Ne=ee.current)==null||Ne.style.setProperty("--swipe-amount-x","0px"),(He=ee.current)==null||He.style.setProperty("--swipe-amount-y","0px")}Le(!1),Re(!1),D(null)},onPointerMove:Oe=>{var Ke,jt,pe;if(!G.current||!We||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const H=Oe.clientY-G.current.y,W=Oe.clientX-G.current.x;var he;const Ne=(he=e.swipeDirections)!=null?he:EX(K);!re&&(Math.abs(W)>1||Math.abs(H)>1)&&D(Math.abs(W)>Math.abs(H)?"x":"y");let He={x:0,y:0};const pt=Kt=>1/(1.5+Math.abs(Kt)/20);if(re==="y"){if(Ne.includes("top")||Ne.includes("bottom"))if(Ne.includes("top")&&H<0||Ne.includes("bottom")&&H>0)He.y=H;else{const Kt=H*pt(H);He.y=Math.abs(Kt)<Math.abs(H)?Kt:H}}else if(re==="x"&&(Ne.includes("left")||Ne.includes("right")))if(Ne.includes("left")&&W<0||Ne.includes("right")&&W>0)He.x=W;else{const Kt=W*pt(W);He.x=Math.abs(Kt)<Math.abs(W)?Kt:W}(Math.abs(He.x)>0||Math.abs(He.y)>0)&&Le(!0),(jt=ee.current)==null||jt.style.setProperty("--swipe-amount-x",`${He.x}px`),(pe=ee.current)==null||pe.style.setProperty("--swipe-amount-y",`${He.y}px`)}},Ft&&!h.jsx&&Ee!=="loading"?gt.createElement("button",{"aria-label":X,"data-disabled":ft,"data-close-button":!0,onClick:ft||!We?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Io(ae==null?void 0:ae.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ge=te==null?void 0:te.close)!=null?ge:cX):null,(Ee||h.icon||h.promise)&&h.icon!==null&&((te==null?void 0:te[Ee])!==null||h.icon)?gt.createElement("div",{"data-icon":"",className:Io(ae==null?void 0:ae.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||F():null,h.type!=="loading"?Be:null):null,gt.createElement("div",{"data-content":"",className:Io(ae==null?void 0:ae.content,h==null||(i=h.classNames)==null?void 0:i.content)},gt.createElement("div",{"data-title":"",className:Io(ae==null?void 0:ae.title,h==null||(s=h.classNames)==null?void 0:s.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?gt.createElement("div",{"data-description":"",className:Io(Z,it,ae==null?void 0:ae.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),gt.isValidElement(h.cancel)?h.cancel:h.cancel&&wb(h.cancel)?gt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||j,onClick:Oe=>{wb(h.cancel)&&We&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Oe),vt())},className:Io(ae==null?void 0:ae.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,gt.isValidElement(h.action)?h.action:h.action&&wb(h.action)?gt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||L,onClick:Oe=>{wb(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Oe),!Oe.defaultPrevented&&vt())},className:Io(ae==null?void 0:ae.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function R3(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function kX(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,s=i?"--mobile-offset":"--offset",o=i?vX:bX;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=o:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(o)}),n}const TX=gt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:u,mobileOffset:d,theme:h="light",richColors:p,duration:y,style:v,visibleToasts:b=yX,toastOptions:w,dir:x=R3(),gap:S=xX,icons:E,containerAriaLabel:C="Notifications"}=t,[k,I]=gt.useState([]),R=gt.useMemo(()=>Array.from(new Set([a].concat(k.filter(J=>J.position).map(J=>J.position)))),[k,a]),[j,L]=gt.useState([]),[B,Z]=gt.useState(!1),[P,K]=gt.useState(!1),[q,de]=gt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=gt.useRef(null),te=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=gt.useRef(null),re=gt.useRef(!1),D=gt.useCallback(J=>{I(Q=>{var ie;return(ie=Q.find(me=>me.id===J.id))!=null&&ie.delete||ji.dismiss(J.id),Q.filter(({id:me})=>me!==J.id)})},[]);return gt.useEffect(()=>ji.subscribe(J=>{if(J.dismiss){requestAnimationFrame(()=>{I(Q=>Q.map(ie=>ie.id===J.id?{...ie,delete:!0}:ie))});return}setTimeout(()=>{I8.flushSync(()=>{I(Q=>{const ie=Q.findIndex(me=>me.id===J.id);return ie!==-1?[...Q.slice(0,ie),{...Q[ie],...J},...Q.slice(ie+1)]:[J,...Q]})})})}),[k]),gt.useEffect(()=>{if(h!=="system"){de(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?de("dark"):de("light")),typeof window>"u")return;const J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:Q})=>{de(Q?"dark":"light")})}catch{J.addListener(({matches:ie})=>{try{de(ie?"dark":"light")}catch(me){console.error(me)}})}},[h]),gt.useEffect(()=>{k.length<=1&&Z(!1)},[k]),gt.useEffect(()=>{const J=Q=>{var ie;if(i.every(Me=>Q[Me]||Q.code===Me)){var ve;Z(!0),(ve=ae.current)==null||ve.focus()}Q.code==="Escape"&&(document.activeElement===ae.current||(ie=ae.current)!=null&&ie.contains(document.activeElement))&&Z(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[i]),gt.useEffect(()=>{if(ae.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,re.current=!1)}},[ae.current]),gt.createElement("section",{ref:n,"aria-label":`${C} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((J,Q)=>{var ie;const[me,ve]=J.split("-");return k.length?gt.createElement("ol",{key:J,dir:x==="auto"?R3():x,tabIndex:-1,ref:ae,className:l,"data-sonner-toaster":!0,"data-sonner-theme":q,"data-y-position":me,"data-lifted":B&&k.length>1&&!s,"data-x-position":ve,style:{"--front-toast-height":`${((ie=j[0])==null?void 0:ie.height)||0}px`,"--width":`${wX}px`,"--gap":`${S}px`,...v,...kX(u,d)},onBlur:Me=>{re.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(re.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||re.current||(re.current=!0,X.current=Me.relatedTarget)},onMouseEnter:()=>Z(!0),onMouseMove:()=>Z(!0),onMouseLeave:()=>{P||Z(!1)},onDragEnd:()=>Z(!1),onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},k.filter(Me=>!Me.position&&Q===0||Me.position===J).map((Me,Ae)=>{var Re,ke;return gt.createElement(CX,{key:Me.id,icons:E,index:Ae,toast:Me,defaultRichColors:p,duration:(Re=w==null?void 0:w.duration)!=null?Re:y,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:r,visibleToasts:b,closeButton:(ke=w==null?void 0:w.closeButton)!=null?ke:o,interacting:P,position:J,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,closeButtonAriaLabel:w==null?void 0:w.closeButtonAriaLabel,removeToast:D,toasts:k.filter(Fe=>Fe.position==Me.position),heights:j.filter(Fe=>Fe.position==Me.position),setHeights:L,expandByDefault:s,gap:S,expanded:B,swipeDirections:t.swipeDirections})})):null}))}),Pm=new Map,AX=5*60*1e3,NX=(e,t)=>{var i,s,o,l,u,d,h,p,y,v,b,w,x,S;const n=e.id||e.name,r=e.name||n,a={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((i=e.architecture)==null?void 0:i.modality)??"text->text",input_modalities:((s=e.architecture)==null?void 0:s.input_modalities)??["text"],output_modalities:((o=e.architecture)==null?void 0:o.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((u=e.architecture)==null?void 0:u.instruct_type)??null},pricing:{prompt:((d=e.pricing)==null?void 0:d.prompt)??"0",completion:((h=e.pricing)==null?void 0:h.completion)??"0",request:((p=e.pricing)==null?void 0:p.request)??"0",image:((y=e.pricing)==null?void 0:y.image)??"0",web_search:((v=e.pricing)==null?void 0:v.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((w=e.top_provider)==null?void 0:w.context_length)??e.context_length??null,max_completion_tokens:((x=e.top_provider)==null?void 0:x.max_completion_tokens)??null,is_moderated:((S=e.top_provider)==null?void 0:S.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??R8[t]??[]};return t==="ollama"?(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(a.context_length=8192),n.includes("gpt-4-32k")&&(a.context_length=32768),n.includes("gpt-4-turbo")&&(a.context_length=128e3),n.includes("gpt-4o")&&(a.context_length=128e3),n.includes("gpt-3.5-turbo")&&(a.context_length=16385),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?a.context_length=1048576:n.includes("gemini")&&(a.context_length=32768),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Google")):t==="openai-compatible"&&(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Compatible")),a};async function RX(e,t){const n=`${e.id}-${e.baseURL||""}`,r=Pm.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var o,l,u;let i;const s={Accept:"application/json"};t&&(s.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",s["HTTP-Referer"]=((o=globalThis.location)==null?void 0:o.origin)||"http://localhost:3000",s["X-Title"]="LiteChat";break;case"ollama":const d=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",d).toString(),delete s.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const h=A8(e.baseURL);i=new URL("models",h.endsWith("/")?h:h+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(d){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,d),Ye.error(`Invalid Base URL for ${e.name}: ${d instanceof Error?d.message:String(d)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const d=await fetch(i,{headers:s});if(!d.ok){let v=`(${d.status} ${d.statusText})`;try{const b=await d.text();v=b||v;try{const w=JSON.parse(b);v=((u=w==null?void 0:w.error)==null?void 0:u.message)||(w==null?void 0:w.message)||v}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${v}`)}const h=await d.json();let p=[];if(e.type==="ollama"?p=h.models||[]:p=h.data||h||[],!Array.isArray(p))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,h),[];const y=p.map(v=>NX(v,e.type));return y.sort((v,b)=>(v.name||v.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${y.length} models for ${e.name}`),y}catch(d){const h=d instanceof Error?d.message:String(d);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),Ye.error(`Failed to fetch models for ${e.name}: ${h}`),Pm.delete(n),[]}})();return Pm.set(n,a),setTimeout(()=>{Pm.get(n)===a&&(Pm.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},AX),a}const PS="provider:lastModelSelection",I3="provider:globalModelSortOrder",$n=Is(js((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),xt.saveSetting("enableApiKeyManagement",n),Ct.emit(St.SETTINGS_CHANGED,{key:"enableApiKeyManagement",value:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await xt.loadSetting("enableApiKeyManagement",!0),[r,a,i,s]=await Promise.all([xt.loadProviderConfigs(),xt.loadApiKeys(),xt.loadSetting(I3,[]),xt.loadSetting(PS,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const o=r.reduce((p,y)=>(y.isEnabled&&y.enabledModels&&y.enabledModels.forEach(v=>{p.push(Qc(y.id,v))}),p),[]),l=new Set(o),u=i.filter(p=>l.has(p));let d=s;d&&l.has(d)||(d=u[0]??null,d||(d=o[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${d}`)),e({globalModelSortOrder:u,selectedModelId:d,isLoading:!1}),await xt.saveSetting(PS,d),console.log(`[ProviderStore] Emitting initial ${St.MODEL_SELECTION_CHANGED} with payload:`,{modelId:d}),Ct.emit(St.MODEL_SELECTION_CHANGED,{modelId:d})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),Ye.error("Failed to load provider data")}},selectModel:n=>{const r=t().selectedModelId;console.log(`[ProviderStore] selectModel called. Current: ${r}, New: ${n}`),r!==n?(e({selectedModelId:n}),xt.saveSetting(PS,n),console.log(`[ProviderStore] Emitting ${St.MODEL_SELECTION_CHANGED} with payload:`,{modelId:n}),Ct.emit(St.MODEL_SELECTION_CHANGED,{modelId:n})):console.log(`[ProviderStore] selectModel skipped: ID ${n} already selected.`)},addApiKey:async(n,r,a)=>{const i=wi(),s=new Date,o={id:i,name:n,value:a,providerId:r,createdAt:s,updatedAt:s};try{return await xt.saveApiKey(o),e(l=>{l.dbApiKeys.push(o)}),Ye.success(`API Key "${n}" added.`),Ct.emit(St.API_KEY_CHANGED,{keyId:i,action:"added"}),i}catch(l){throw console.error("ProviderStore: Error adding API key",l),Ye.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await xt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(s=>s.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(s=>s.apiKeyId===n?{...s,apiKeyId:null}:s)}),Ye.success(`API Key "${r}" deleted.`),Ct.emit(St.API_KEY_CHANGED,{keyId:n,action:"deleted"})}catch(i){throw console.error("ProviderStore: Error deleting API key",i),Ye.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=wi(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await xt.saveProviderConfig(i),e(s=>{s.dbProviderConfigs.push(i)}),Ye.success(`Provider "${n.name}" added.`),Ct.emit(St.PROVIDER_CONFIG_CHANGED,{providerId:r,config:i}),t().fetchModels(r).catch(s=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,s)}),r}catch(s){throw console.error("ProviderStore: Error adding provider config",s),Ye.error(`Failed to add Provider: ${s instanceof Error?s.message:String(s)}`),s}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(s=>s.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await xt.saveProviderConfig(i),e(h=>{const p=h.dbProviderConfigs.findIndex(y=>y.id===n);p!==-1&&(h.dbProviderConfigs[p]=i)}),Ct.emit(St.PROVIDER_CONFIG_CHANGED,{providerId:n,config:i});const s=t().globalModelSortOrder,o=t().dbProviderConfigs;let l=[...s];const u=o.reduce((h,p)=>(p.isEnabled&&p.enabledModels&&p.enabledModels.forEach(y=>{h.push(Qc(p.id,y))}),h),[]),d=new Set(u);l=s.filter(h=>d.has(h)),d.forEach(h=>{l.includes(h)||l.push(h)}),await t().setGlobalModelSortOrder(l)}catch(s){throw console.error("ProviderStore: Error updating provider config",s),Ye.error(`Failed to update Provider: ${s instanceof Error?s.message:String(s)}`),s}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await xt.deleteProviderConfig(n),e(d=>{d.dbProviderConfigs=d.dbProviderConfigs.filter(h=>h.id!==n),delete d.providerFetchStatus[n]}),Ct.emit(St.PROVIDER_CONFIG_CHANGED,{providerId:n,config:{...r,isEnabled:!1}});const s=t().dbProviderConfigs.reduce((d,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(p=>{d.push(Qc(h.id,p))}),d),[]),o=new Set(s),u=t().globalModelSortOrder.filter(d=>o.has(d));await t().setGlobalModelSortOrder(u),Ye.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),Ye.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){Ye.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,s=(a=t().dbApiKeys.find(l=>l.id===i))==null?void 0:a.value,o=await RX(r,s);await t().updateProviderConfig(n,{fetchedModels:o,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),Ye.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await xt.saveSetting(I3,r);const a=t().selectedModelId,s=t().dbProviderConfigs.reduce((l,u)=>(u.isEnabled&&u.enabledModels&&u.enabledModels.forEach(d=>{l.push(Qc(u.id,d))}),l),[]),o=new Set(s);if(!a||!o.has(a)){const l=r.find(h=>o.has(h)),u=s[0]??null,d=l??u;d!==a&&(console.log(`[ProviderStore] Selection ${a} invalidated or missing. Selecting ${d}`),t().selectModel(d))}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:s}=sc(n);if(!i||!s)return;const o=r.find(u=>u.id===i);if(!o)return;const l=a.find(u=>u.id===o.apiKeyId);return Ik(o,s,l==null?void 0:l.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const a=r.type;return(eX[a]||[]).map(s=>({id:s.id,name:s.name,context_length:4096,architecture:{modality:"text->text",input_modalities:["text"],output_modalities:["text"]},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:R8[r.type]??[]}))}}))),xb="system",_b="You are a helpful AI assistant.",Sb=.7,Eb=null,Cb=null,kb=null,Tb=0,Ab=0,j3=!0,Nb=!0,Rb=!1,Ib=!1,jb=!1,Ob=15,O3=null,D3=null,Db=5,Mb=null,Pb=!0,Fb=null,Lb=768,$b=!1,Bb=!1,zb=null,Ub=16,Hb="max-w-7xl",qb=null,lr=Is(js((e,t)=>({theme:xb,globalSystemPrompt:_b,temperature:Sb,maxTokens:Eb,topP:Cb,topK:kb,presencePenalty:Tb,frequencyPenalty:Ab,enableAdvancedSettings:j3,enableStreamingMarkdown:Nb,enableStreamingCodeBlockParsing:Rb,foldStreamingCodeBlocks:Ib,foldUserMessagesOnCompletion:jb,streamingRenderFPS:Ob,gitUserName:O3,gitUserEmail:D3,toolMaxSteps:Db,prismThemeUrl:Mb,autoTitleEnabled:Pb,autoTitleModelId:Fb,autoTitlePromptMaxLength:Lb,autoTitleIncludeFiles:$b,autoTitleIncludeRules:Bb,customFontFamily:zb,customFontSize:Ub,chatMaxWidth:Hb,customThemeColors:qb,setTheme:n=>{e({theme:n}),xt.saveSetting("theme",n)},setGlobalSystemPrompt:n=>{e({globalSystemPrompt:n}),xt.saveSetting("globalSystemPrompt",n)},setTemperature:n=>{e({temperature:n}),xt.saveSetting("temperature",n)},setMaxTokens:n=>{e({maxTokens:n}),xt.saveSetting("maxTokens",n)},setTopP:n=>{e({topP:n}),xt.saveSetting("topP",n)},setTopK:n=>{e({topK:n}),xt.saveSetting("topK",n)},setPresencePenalty:n=>{e({presencePenalty:n}),xt.saveSetting("presencePenalty",n)},setFrequencyPenalty:n=>{e({frequencyPenalty:n}),xt.saveSetting("frequencyPenalty",n)},setEnableAdvancedSettings:n=>{e({enableAdvancedSettings:n}),xt.saveSetting("enableAdvancedSettings",n)},setEnableStreamingMarkdown:n=>{e({enableStreamingMarkdown:n}),xt.saveSetting("enableStreamingMarkdown",n)},setEnableStreamingCodeBlockParsing:n=>{e({enableStreamingCodeBlockParsing:n}),xt.saveSetting("enableStreamingCodeBlockParsing",n)},setFoldStreamingCodeBlocks:n=>{e({foldStreamingCodeBlocks:n}),xt.saveSetting("foldStreamingCodeBlocks",n)},setFoldUserMessagesOnCompletion:n=>{e({foldUserMessagesOnCompletion:n}),xt.saveSetting("foldUserMessagesOnCompletion",n)},setStreamingRenderFPS:n=>{const r=Math.max(3,Math.min(60,n));e({streamingRenderFPS:r}),xt.saveSetting("streamingRenderFPS",r)},setGitUserName:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserName:r}),xt.saveSetting("gitUserName",r)},setGitUserEmail:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserEmail:r}),xt.saveSetting("gitUserEmail",r)},setToolMaxSteps:n=>{const r=Math.max(1,Math.min(20,n));e({toolMaxSteps:r}),xt.saveSetting("toolMaxSteps",r)},setPrismThemeUrl:n=>{const r=(n==null?void 0:n.trim())||null;e({prismThemeUrl:r}),xt.saveSetting("prismThemeUrl",r)},setAutoTitleEnabled:n=>{e({autoTitleEnabled:n}),xt.saveSetting("autoTitleEnabled",n)},setAutoTitleModelId:n=>{e({autoTitleModelId:n}),xt.saveSetting("autoTitleModelId",n)},setAutoTitlePromptMaxLength:n=>{const r=Math.max(100,Math.min(4e3,n));e({autoTitlePromptMaxLength:r}),xt.saveSetting("autoTitlePromptMaxLength",r)},setAutoTitleIncludeFiles:n=>{e({autoTitleIncludeFiles:n}),xt.saveSetting("autoTitleIncludeFiles",n)},setAutoTitleIncludeRules:n=>{e({autoTitleIncludeRules:n}),xt.saveSetting("autoTitleIncludeRules",n)},setCustomFontFamily:n=>{const r=(n==null?void 0:n.trim())||null;e({customFontFamily:r}),xt.saveSetting("customFontFamily",r)},setCustomFontSize:n=>{const r=n===null?null:Math.max(10,Math.min(24,n));e({customFontSize:r}),xt.saveSetting("customFontSize",r)},setChatMaxWidth:n=>{e({chatMaxWidth:n}),xt.saveSetting("chatMaxWidth",n)},setCustomThemeColors:n=>{e({customThemeColors:n}),xt.saveSetting("customThemeColors",n)},setCustomThemeColor:(n,r)=>{e(a=>{const s={...a.customThemeColors??{}};r===null||r.trim()===""?delete s[n]:s[n]=r.trim(),a.customThemeColors=Object.keys(s).length>0?s:null}),xt.saveSetting("customThemeColors",t().customThemeColors)},loadSettings:async()=>{try{const[n,r,a,i,s,o,l,u,d,h,p,y,v,b,w,x,S,E,C,k,I,R,j,L,B,Z,P]=await Promise.all([xt.loadSetting("theme",xb),xt.loadSetting("temperature",Sb),xt.loadSetting("maxTokens",Eb),xt.loadSetting("topP",Cb),xt.loadSetting("topK",kb),xt.loadSetting("presencePenalty",Tb),xt.loadSetting("frequencyPenalty",Ab),xt.loadSetting("globalSystemPrompt",_b),xt.loadSetting("enableAdvancedSettings",j3),xt.loadSetting("enableStreamingMarkdown",Nb),xt.loadSetting("enableStreamingCodeBlockParsing",Rb),xt.loadSetting("foldStreamingCodeBlocks",Ib),xt.loadSetting("foldUserMessagesOnCompletion",jb),xt.loadSetting("streamingRenderFPS",Ob),xt.loadSetting("gitUserName",O3),xt.loadSetting("gitUserEmail",D3),xt.loadSetting("toolMaxSteps",Db),xt.loadSetting("prismThemeUrl",Mb),xt.loadSetting("autoTitleEnabled",Pb),xt.loadSetting("autoTitleModelId",Fb),xt.loadSetting("autoTitlePromptMaxLength",Lb),xt.loadSetting("autoTitleIncludeFiles",$b),xt.loadSetting("autoTitleIncludeRules",Bb),xt.loadSetting("customFontFamily",zb),xt.loadSetting("customFontSize",Ub),xt.loadSetting("chatMaxWidth",Hb),xt.loadSetting("customThemeColors",qb)]);e({theme:n,temperature:r,maxTokens:a,topP:i,topK:s,presencePenalty:o,frequencyPenalty:l,globalSystemPrompt:u,enableAdvancedSettings:d,enableStreamingMarkdown:h,enableStreamingCodeBlockParsing:p,foldStreamingCodeBlocks:y,foldUserMessagesOnCompletion:v,streamingRenderFPS:b,gitUserName:w,gitUserEmail:x,toolMaxSteps:S,prismThemeUrl:E,autoTitleEnabled:C,autoTitleModelId:k,autoTitlePromptMaxLength:I,autoTitleIncludeFiles:R,autoTitleIncludeRules:j,customFontFamily:L,customFontSize:B,chatMaxWidth:Z,customThemeColors:P})}catch(n){console.error("SettingsStore: Error loading settings",n)}},resetGeneralSettings:async()=>{try{e({enableStreamingMarkdown:Nb,enableStreamingCodeBlockParsing:Rb,foldStreamingCodeBlocks:Ib,foldUserMessagesOnCompletion:jb,streamingRenderFPS:Ob}),await Promise.all([xt.saveSetting("enableStreamingMarkdown",Nb),xt.saveSetting("enableStreamingCodeBlockParsing",Rb),xt.saveSetting("foldStreamingCodeBlocks",Ib),xt.saveSetting("foldUserMessagesOnCompletion",jb),xt.saveSetting("streamingRenderFPS",Ob)]),Ye.success("Streaming & Display settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting general settings",n),Ye.error("Failed to reset general settings.")}},resetAssistantSettings:async()=>{try{e({globalSystemPrompt:_b,temperature:Sb,maxTokens:Eb,topP:Cb,topK:kb,presencePenalty:Tb,frequencyPenalty:Ab,toolMaxSteps:Db,autoTitleEnabled:Pb,autoTitleModelId:Fb,autoTitlePromptMaxLength:Lb,autoTitleIncludeFiles:$b,autoTitleIncludeRules:Bb}),await Promise.all([xt.saveSetting("globalSystemPrompt",_b),xt.saveSetting("temperature",Sb),xt.saveSetting("maxTokens",Eb),xt.saveSetting("topP",Cb),xt.saveSetting("topK",kb),xt.saveSetting("presencePenalty",Tb),xt.saveSetting("frequencyPenalty",Ab),xt.saveSetting("toolMaxSteps",Db),xt.saveSetting("autoTitleEnabled",Pb),xt.saveSetting("autoTitleModelId",Fb),xt.saveSetting("autoTitlePromptMaxLength",Lb),xt.saveSetting("autoTitleIncludeFiles",$b),xt.saveSetting("autoTitleIncludeRules",Bb)]),Ye.success("Assistant settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting assistant settings",n),Ye.error("Failed to reset assistant settings.")}},resetThemeSettings:async()=>{try{e({theme:xb,prismThemeUrl:Mb,customFontFamily:zb,customFontSize:Ub,chatMaxWidth:Hb,customThemeColors:qb}),await Promise.all([xt.saveSetting("theme",xb),xt.saveSetting("prismThemeUrl",Mb),xt.saveSetting("customFontFamily",zb),xt.saveSetting("customFontSize",Ub),xt.saveSetting("chatMaxWidth",Hb),xt.saveSetting("customThemeColors",qb)]),Ye.success("Theme settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting theme settings",n),Ye.error("Failed to reset theme settings.")}}})));async function fC(e,t){const n=Rr.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const s=await i.callback(a);if(s===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;s&&typeof s=="object"&&(a=s)}catch(s){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,s),!1}return a}function IX(){const e=qn.getState(),t=$n.getState(),n=lr.getState(),{providerId:r}=sc(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function jX(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function M3(e){try{const t=e.type||"application/octet-stream",n=vk(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:jX(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),Ye.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function P3(e){return e.flatMap(t=>{var a,i,s;const n=[],r=t.prompt;if(r){const o=[];r.content&&o.push({type:"text",text:r.content}),(a=r.metadata)!=null&&a.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{o.push({type:"text",text:`[User attached file: ${l.name}]`})}),o.length>0&&n.push({role:"user",content:o})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(i=t.metadata)!=null&&i.toolCalls&&Array.isArray(t.metadata.toolCalls)){const o=[];t.metadata.toolCalls.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-call"&&u.toolCallId&&u.toolName&&u.args!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,u)}}),o.length>0&&n.push({role:"assistant",content:o})}if((s=t.metadata)!=null&&s.toolResults&&Array.isArray(t.metadata.toolResults)){const o=[];t.metadata.toolResults.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-result"&&u.toolCallId&&u.toolName&&u.result!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,u)}}),o.length>0&&n.push({role:"tool",content:o})}return n})}const F3=e=>Symbol.iterator in e,L3=e=>"entries"in e,$3=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},OX=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function DX(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!F3(e)||!F3(t)?$3({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):L3(e)&&L3(t)?$3(e,t):OX(e,t)}function dn(e){const t=gt.useRef(void 0);return n=>{const r=e(n);return DX(t.current,r)?t.current:t.current=r}}const MX=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message...",inputAreaRef:a})=>{const[i,s]=T.useState(!1),[o,l]=T.useState(!1),u=Rr(dn(S=>S.promptControls)),d=qn(dn(S=>S.status==="streaming")),{attachedFilesMetadata:h,clearAttachedFiles:p}=Zl(dn(S=>({attachedFilesMetadata:S.attachedFilesMetadata,clearAttachedFiles:S.clearAttachedFiles}))),y=T.useMemo(()=>Object.values(u).filter(S=>S.show?S.show():!0),[u]),v=T.useMemo(()=>y.filter(S=>S.renderer),[y]),b=T.useMemo(()=>y.filter(S=>S.triggerRenderer),[y]),w=T.useCallback(async()=>{var k;const E=(((k=a==null?void 0:a.current)==null?void 0:k.getValue())??"").trim(),C=Zl.getState().attachedFilesMetadata;if(!(!E&&C.length===0)&&!(d||i)){s(!0);try{let I={},R={};for(const Z of y){if(Z.getParameters){const P=await Z.getParameters();P&&(I={...I,...P})}if(Z.getMetadata){const P=await Z.getMetadata();P&&(R={...R,...P})}}C.length>0&&(R.attachedFiles=[...C]);let j={id:wi(),content:E,parameters:I,metadata:R};Ct.emit(St.PROMPT_SUBMITTED,{turnData:j});const L=await fC(Mv.PROMPT_TURN_FINALIZE,{turnData:j});if(L===!1){console.log("Prompt submission cancelled by middleware."),s(!1);return}const B=L&&typeof L=="object"?L.turnData:j;await t(B),p(),y.forEach(Z=>{Z.clearOnSubmit&&Z.clearOnSubmit()}),l(!1)}catch(I){console.error("Error during prompt submission:",I),Ye.error(`Failed to send message: ${I instanceof Error?I.message:String(I)}`)}finally{s(!1)}}},[a,d,i,y,t,p]),x=T.useCallback(S=>{l(S.trim().length>0),Ct.emit(St.PROMPT_INPUT_CHANGE,{value:S})},[]);return m.jsxs("div",{className:At("p-4 space-y-3",n),children:[v.length>0&&m.jsx(YI,{controls:v,area:"panel",className:"flex flex-wrap gap-2 items-start mb-2"}),m.jsx(e,{ref:a,onSubmit:w,disabled:d||i,placeholder:r,onValueChange:x}),m.jsxs("div",{className:"flex items-center justify-between gap-2 mt-2",children:[m.jsx(YI,{controls:b,area:"trigger",className:"flex items-center gap-1 flex-shrink-0"}),m.jsx("div",{className:"flex-grow"}),m.jsx(Dt,{type:"button",size:"icon",onClick:w,disabled:d||i||!o&&h.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(Wq,{className:"h-4 w-4"})})]})]})};function Wt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function PX(e,t){const n=T.createContext(t),r=i=>{const{children:s,...o}=i,l=T.useMemo(()=>o,Object.values(o));return m.jsx(n.Provider,{value:l,children:s})};r.displayName=e+"Provider";function a(i){const s=T.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Ei(e,t=[]){let n=[];function r(i,s){const o=T.createContext(s),l=n.length;n=[...n,s];const u=h=>{var x;const{scope:p,children:y,...v}=h,b=((x=p==null?void 0:p[e])==null?void 0:x[l])||o,w=T.useMemo(()=>v,Object.values(v));return m.jsx(b.Provider,{value:w,children:y})};u.displayName=i+"Provider";function d(h,p){var b;const y=((b=p==null?void 0:p[e])==null?void 0:b[l])||o,v=T.useContext(y);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(s=>T.createContext(s));return function(o){const l=(o==null?void 0:o[e])||i;return T.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return a.scopeName=e,[r,FX(a,...t)]}function FX(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const s=r.reduce((o,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...o,...h}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var LX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],an=LX.reduce((e,t)=>{const n=su(`Primitive.${t}`),r=T.forwardRef((a,i)=>{const{asChild:s,...o}=a,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function j8(e,t){e&&zo.flushSync(()=>e.dispatchEvent(t))}function Fa(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function $X(e,t=globalThis==null?void 0:globalThis.document){const n=Fa(e);T.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var BX="DismissableLayer",hC="dismissableLayer.update",zX="dismissableLayer.pointerDownOutside",UX="dismissableLayer.focusOutside",B3,O8=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tp=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:o,...l}=e,u=T.useContext(O8),[d,h]=T.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=T.useState({}),v=Cn(t,R=>h(R)),b=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(w),S=d?b.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,C=S>=x,k=VX(R=>{const j=R.target,L=[...u.branches].some(B=>B.contains(j));!C||L||(a==null||a(R),s==null||s(R),R.defaultPrevented||o==null||o())},p),I=GX(R=>{const j=R.target;[...u.branches].some(B=>B.contains(j))||(i==null||i(R),s==null||s(R),R.defaultPrevented||o==null||o())},p);return $X(R=>{S===u.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&o&&(R.preventDefault(),o()))},p),T.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(B3=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),z3(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=B3)}},[d,p,n,u]),T.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),z3())},[d,u]),T.useEffect(()=>{const R=()=>y({});return document.addEventListener(hC,R),()=>document.removeEventListener(hC,R)},[]),m.jsx(an.div,{...l,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:Wt(e.onFocusCapture,I.onFocusCapture),onBlurCapture:Wt(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Wt(e.onPointerDownCapture,k.onPointerDownCapture)})});tp.displayName=BX;var HX="DismissableLayerBranch",qX=T.forwardRef((e,t)=>{const n=T.useContext(O8),r=T.useRef(null),a=Cn(t,r);return T.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(an.div,{...e,ref:a})});qX.displayName=HX;function VX(e,t=globalThis==null?void 0:globalThis.document){const n=Fa(e),r=T.useRef(!1),a=T.useRef(()=>{});return T.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){D8(zX,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function GX(e,t=globalThis==null?void 0:globalThis.document){const n=Fa(e),r=T.useRef(!1);return T.useEffect(()=>{const a=i=>{i.target&&!r.current&&D8(UX,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function z3(){const e=new CustomEvent(hC);document.dispatchEvent(e)}function D8(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?j8(a,i):a.dispatchEvent(i)}var za=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},WX=R6[" useId ".trim().toString()]||(()=>{}),KX=0;function Za(e){const[t,n]=T.useState(WX());return za(()=>{n(r=>r??String(KX++))},[e]),t?`radix-${t}`:""}const ZX=["top","right","bottom","left"],pu=Math.min,ts=Math.max,iw=Math.round,Vb=Math.floor,Go=e=>({x:e,y:e}),YX={left:"right",right:"left",bottom:"top",top:"bottom"},XX={start:"end",end:"start"};function pC(e,t,n){return ts(e,pu(t,n))}function Xl(e,t){return typeof e=="function"?e(t):e}function Jl(e){return e.split("-")[0]}function np(e){return e.split("-")[1]}function jk(e){return e==="x"?"y":"x"}function Ok(e){return e==="y"?"height":"width"}function mu(e){return["top","bottom"].includes(Jl(e))?"y":"x"}function Dk(e){return jk(mu(e))}function JX(e,t,n){n===void 0&&(n=!1);const r=np(e),a=Dk(e),i=Ok(a);let s=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=sw(s)),[s,sw(s)]}function QX(e){const t=sw(e);return[mC(e),t,mC(t)]}function mC(e){return e.replace(/start|end/g,t=>XX[t])}function eJ(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:s;default:return[]}}function tJ(e,t,n,r){const a=np(e);let i=eJ(Jl(e),n==="start",r);return a&&(i=i.map(s=>s+"-"+a),t&&(i=i.concat(i.map(mC)))),i}function sw(e){return e.replace(/left|right|bottom|top/g,t=>YX[t])}function nJ(e){return{top:0,right:0,bottom:0,left:0,...e}}function M8(e){return typeof e!="number"?nJ(e):{top:e,right:e,bottom:e,left:e}}function ow(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function U3(e,t,n){let{reference:r,floating:a}=e;const i=mu(t),s=Dk(t),o=Ok(s),l=Jl(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,p=r[o]/2-a[o]/2;let y;switch(l){case"top":y={x:d,y:r.y-a.height};break;case"bottom":y={x:d,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:h};break;case"left":y={x:r.x-a.width,y:h};break;default:y={x:r.x,y:r.y}}switch(np(t)){case"start":y[s]-=p*(n&&u?-1:1);break;case"end":y[s]+=p*(n&&u?-1:1);break}return y}const rJ=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:s}=n,o=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=U3(u,r,l),p=r,y={},v=0;for(let b=0;b<o.length;b++){const{name:w,fn:x}=o[b],{x:S,y:E,data:C,reset:k}=await x({x:d,y:h,initialPlacement:r,placement:p,strategy:a,middlewareData:y,rects:u,platform:s,elements:{reference:e,floating:t}});d=S??d,h=E??h,y={...y,[w]:{...y[w],...C}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(u=k.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=U3(u,p,l)),b=-1)}return{x:d,y:h,placement:p,strategy:a,middlewareData:y}};async function wg(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:s,elements:o,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:y=0}=Xl(t,e),v=M8(y),w=o[p?h==="floating"?"reference":"floating":h],x=ow(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),S=h==="floating"?{x:r,y:a,width:s.floating.width,height:s.floating.height}:s.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=ow(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:E,strategy:l}):S);return{top:(x.top-k.top+v.top)/C.y,bottom:(k.bottom-x.bottom+v.bottom)/C.y,left:(x.left-k.left+v.left)/C.x,right:(k.right-x.right+v.right)/C.x}}const aJ=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:s,elements:o,middlewareData:l}=t,{element:u,padding:d=0}=Xl(e,t)||{};if(u==null)return{};const h=M8(d),p={x:n,y:r},y=Dk(a),v=Ok(y),b=await s.getDimensions(u),w=y==="y",x=w?"top":"left",S=w?"bottom":"right",E=w?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[y]-p[y]-i.floating[v],k=p[y]-i.reference[y],I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let R=I?I[E]:0;(!R||!await(s.isElement==null?void 0:s.isElement(I)))&&(R=o.floating[E]||i.floating[v]);const j=C/2-k/2,L=R/2-b[v]/2-1,B=pu(h[x],L),Z=pu(h[S],L),P=B,K=R-b[v]-Z,q=R/2-b[v]/2+j,de=pC(P,q,K),ae=!l.arrow&&np(a)!=null&&q!==de&&i.reference[v]/2-(q<P?B:Z)-b[v]/2<0,te=ae?q<P?q-P:q-K:0;return{[y]:p[y]+te,data:{[y]:de,centerOffset:q-de-te,...ae&&{alignmentOffset:te}},reset:ae}}}),iJ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...w}=Xl(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Jl(a),S=mu(o),E=Jl(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=p||(E||!b?[sw(o)]:QX(o)),I=v!=="none";!p&&I&&k.push(...tJ(o,b,v,C));const R=[o,...k],j=await wg(t,w),L=[];let B=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&L.push(j[x]),h){const q=JX(a,s,C);L.push(j[q[0]],j[q[1]])}if(B=[...B,{placement:a,overflows:L}],!L.every(q=>q<=0)){var Z,P;const q=(((Z=i.flip)==null?void 0:Z.index)||0)+1,de=R[q];if(de)return{data:{index:q,overflows:B},reset:{placement:de}};let ae=(P=B.filter(te=>te.overflows[0]<=0).sort((te,X)=>te.overflows[1]-X.overflows[1])[0])==null?void 0:P.placement;if(!ae)switch(y){case"bestFit":{var K;const te=(K=B.filter(X=>{if(I){const re=mu(X.placement);return re===S||re==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(re=>re>0).reduce((re,D)=>re+D,0)]).sort((X,re)=>X[1]-re[1])[0])==null?void 0:K[0];te&&(ae=te);break}case"initialPlacement":ae=o;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function H3(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function q3(e){return ZX.some(t=>e[t]>=0)}const sJ=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Xl(e,t);switch(r){case"referenceHidden":{const i=await wg(t,{...a,elementContext:"reference"}),s=H3(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:q3(s)}}}case"escaped":{const i=await wg(t,{...a,altBoundary:!0}),s=H3(i,n.floating);return{data:{escapedOffsets:s,escaped:q3(s)}}}default:return{}}}}};async function oJ(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),s=Jl(n),o=np(n),l=mu(n)==="y",u=["left","top"].includes(s)?-1:1,d=i&&l?-1:1,h=Xl(t,e);let{mainAxis:p,crossAxis:y,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof v=="number"&&(y=o==="end"?v*-1:v),l?{x:y*d,y:p*u}:{x:p*u,y:y*d}}const lJ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:s,middlewareData:o}=t,l=await oJ(t,e);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:s}}}}},cJ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:w=>{let{x,y:S}=w;return{x,y:S}}},...l}=Xl(e,t),u={x:n,y:r},d=await wg(t,l),h=mu(Jl(a)),p=jk(h);let y=u[p],v=u[h];if(i){const w=p==="y"?"top":"left",x=p==="y"?"bottom":"right",S=y+d[w],E=y-d[x];y=pC(S,y,E)}if(s){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",S=v+d[w],E=v-d[x];v=pC(S,v,E)}const b=o.fn({...t,[p]:y,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[h]:s}}}}}},uJ=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=Xl(e,t),d={x:n,y:r},h=mu(a),p=jk(h);let y=d[p],v=d[h];const b=Xl(o,t),w=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const E=p==="y"?"height":"width",C=i.reference[p]-i.floating[E]+w.mainAxis,k=i.reference[p]+i.reference[E]-w.mainAxis;y<C?y=C:y>k&&(y=k)}if(u){var x,S;const E=p==="y"?"width":"height",C=["top","left"].includes(Jl(a)),k=i.reference[h]-i.floating[E]+(C&&((x=s.offset)==null?void 0:x[h])||0)+(C?0:w.crossAxis),I=i.reference[h]+i.reference[E]+(C?0:((S=s.offset)==null?void 0:S[h])||0)-(C?w.crossAxis:0);v<k?v=k:v>I&&(v=I)}return{[p]:y,[h]:v}}}},dJ=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:s,elements:o}=t,{apply:l=()=>{},...u}=Xl(e,t),d=await wg(t,u),h=Jl(a),p=np(a),y=mu(a)==="y",{width:v,height:b}=i.floating;let w,x;h==="top"||h==="bottom"?(w=h,x=p===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(x=h,w=p==="end"?"top":"bottom");const S=b-d.top-d.bottom,E=v-d.left-d.right,C=pu(b-d[w],S),k=pu(v-d[x],E),I=!t.middlewareData.shift;let R=C,j=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=S),I&&!p){const B=ts(d.left,0),Z=ts(d.right,0),P=ts(d.top,0),K=ts(d.bottom,0);y?j=v-2*(B!==0||Z!==0?B+Z:ts(d.left,d.right)):R=b-2*(P!==0||K!==0?P+K:ts(d.top,d.bottom))}await l({...t,availableWidth:j,availableHeight:R});const L=await s.getDimensions(o.floating);return v!==L.width||b!==L.height?{reset:{rects:!0}}:{}}}};function cx(){return typeof window<"u"}function rp(e){return P8(e)?(e.nodeName||"").toLowerCase():"#document"}function as(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function al(e){var t;return(t=(P8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function P8(e){return cx()?e instanceof Node||e instanceof as(e).Node:!1}function to(e){return cx()?e instanceof Element||e instanceof as(e).Element:!1}function Yo(e){return cx()?e instanceof HTMLElement||e instanceof as(e).HTMLElement:!1}function V3(e){return!cx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof as(e).ShadowRoot}function h0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=no(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function fJ(e){return["table","td","th"].includes(rp(e))}function ux(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Mk(e){const t=Pk(),n=to(e)?no(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function hJ(e){let t=gu(e);for(;Yo(t)&&!Dh(t);){if(Mk(t))return t;if(ux(t))return null;t=gu(t)}return null}function Pk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Dh(e){return["html","body","#document"].includes(rp(e))}function no(e){return as(e).getComputedStyle(e)}function dx(e){return to(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function gu(e){if(rp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||V3(e)&&e.host||al(e);return V3(t)?t.host:t}function F8(e){const t=gu(e);return Dh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Yo(t)&&h0(t)?t:F8(t)}function xg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=F8(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),s=as(a);if(i){const o=gC(s);return t.concat(s,s.visualViewport||[],h0(a)?a:[],o&&n?xg(o):[])}return t.concat(a,xg(a,[],n))}function gC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function L8(e){const t=no(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Yo(e),i=a?e.offsetWidth:n,s=a?e.offsetHeight:r,o=iw(n)!==i||iw(r)!==s;return o&&(n=i,r=s),{width:n,height:r,$:o}}function Fk(e){return to(e)?e:e.contextElement}function xh(e){const t=Fk(e);if(!Yo(t))return Go(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=L8(t);let s=(i?iw(n.width):n.width)/r,o=(i?iw(n.height):n.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const pJ=Go(0);function $8(e){const t=as(e);return!Pk()||!t.visualViewport?pJ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mJ(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==as(e)?!1:t}function Pd(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=Fk(e);let s=Go(1);t&&(r?to(r)&&(s=xh(r)):s=xh(e));const o=mJ(i,n,r)?$8(i):Go(0);let l=(a.left+o.x)/s.x,u=(a.top+o.y)/s.y,d=a.width/s.x,h=a.height/s.y;if(i){const p=as(i),y=r&&to(r)?as(r):r;let v=p,b=gC(v);for(;b&&r&&y!==v;){const w=xh(b),x=b.getBoundingClientRect(),S=no(b),E=x.left+(b.clientLeft+parseFloat(S.paddingLeft))*w.x,C=x.top+(b.clientTop+parseFloat(S.paddingTop))*w.y;l*=w.x,u*=w.y,d*=w.x,h*=w.y,l+=E,u+=C,v=as(b),b=gC(v)}}return ow({width:d,height:h,x:l,y:u})}function Lk(e,t){const n=dx(e).scrollLeft;return t?t.left+n:Pd(al(e)).left+n}function B8(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:Lk(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function gJ(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",s=al(r),o=t?ux(t.floating):!1;if(r===s||o&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Go(1);const d=Go(0),h=Yo(r);if((h||!h&&!i)&&((rp(r)!=="body"||h0(s))&&(l=dx(r)),Yo(r))){const y=Pd(r);u=xh(r),d.x=y.x+r.clientLeft,d.y=y.y+r.clientTop}const p=s&&!h&&!i?B8(s,l,!0):Go(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-l.scrollTop*u.y+d.y+p.y}}function yJ(e){return Array.from(e.getClientRects())}function bJ(e){const t=al(e),n=dx(e),r=e.ownerDocument.body,a=ts(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=ts(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Lk(e);const o=-n.scrollTop;return no(r).direction==="rtl"&&(s+=ts(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:s,y:o}}function vJ(e,t){const n=as(e),r=al(e),a=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,o=0,l=0;if(a){i=a.width,s=a.height;const u=Pk();(!u||u&&t==="fixed")&&(o=a.offsetLeft,l=a.offsetTop)}return{width:i,height:s,x:o,y:l}}function wJ(e,t){const n=Pd(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Yo(e)?xh(e):Go(1),s=e.clientWidth*i.x,o=e.clientHeight*i.y,l=a*i.x,u=r*i.y;return{width:s,height:o,x:l,y:u}}function G3(e,t,n){let r;if(t==="viewport")r=vJ(e,n);else if(t==="document")r=bJ(al(e));else if(to(t))r=wJ(t,n);else{const a=$8(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return ow(r)}function z8(e,t){const n=gu(e);return n===t||!to(n)||Dh(n)?!1:no(n).position==="fixed"||z8(n,t)}function xJ(e,t){const n=t.get(e);if(n)return n;let r=xg(e,[],!1).filter(o=>to(o)&&rp(o)!=="body"),a=null;const i=no(e).position==="fixed";let s=i?gu(e):e;for(;to(s)&&!Dh(s);){const o=no(s),l=Mk(s);!l&&o.position==="fixed"&&(a=null),(i?!l&&!a:!l&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||h0(s)&&!l&&z8(e,s))?r=r.filter(d=>d!==s):a=o,s=gu(s)}return t.set(e,r),r}function _J(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const s=[...n==="clippingAncestors"?ux(t)?[]:xJ(t,this._c):[].concat(n),r],o=s[0],l=s.reduce((u,d)=>{const h=G3(t,d,a);return u.top=ts(h.top,u.top),u.right=pu(h.right,u.right),u.bottom=pu(h.bottom,u.bottom),u.left=ts(h.left,u.left),u},G3(t,o,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function SJ(e){const{width:t,height:n}=L8(e);return{width:t,height:n}}function EJ(e,t,n){const r=Yo(t),a=al(t),i=n==="fixed",s=Pd(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const l=Go(0);if(r||!r&&!i)if((rp(t)!=="body"||h0(a))&&(o=dx(t)),r){const p=Pd(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else a&&(l.x=Lk(a));const u=a&&!r&&!i?B8(a,o):Go(0),d=s.left+o.scrollLeft-l.x-u.x,h=s.top+o.scrollTop-l.y-u.y;return{x:d,y:h,width:s.width,height:s.height}}function FS(e){return no(e).position==="static"}function W3(e,t){if(!Yo(e)||no(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return al(e)===n&&(n=n.ownerDocument.body),n}function U8(e,t){const n=as(e);if(ux(e))return n;if(!Yo(e)){let a=gu(e);for(;a&&!Dh(a);){if(to(a)&&!FS(a))return a;a=gu(a)}return n}let r=W3(e,t);for(;r&&fJ(r)&&FS(r);)r=W3(r,t);return r&&Dh(r)&&FS(r)&&!Mk(r)?n:r||hJ(e)||n}const CJ=async function(e){const t=this.getOffsetParent||U8,n=this.getDimensions,r=await n(e.floating);return{reference:EJ(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function kJ(e){return no(e).direction==="rtl"}const TJ={convertOffsetParentRelativeRectToViewportRelativeRect:gJ,getDocumentElement:al,getClippingRect:_J,getOffsetParent:U8,getElementRects:CJ,getClientRects:yJ,getDimensions:SJ,getScale:xh,isElement:to,isRTL:kJ};function H8(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function AJ(e,t){let n=null,r;const a=al(e);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:p,height:y}=u;if(o||t(),!p||!y)return;const v=Vb(h),b=Vb(a.clientWidth-(d+p)),w=Vb(a.clientHeight-(h+y)),x=Vb(d),E={rootMargin:-v+"px "+-b+"px "+-w+"px "+-x+"px",threshold:ts(0,pu(1,l))||1};let C=!0;function k(I){const R=I[0].intersectionRatio;if(R!==l){if(!C)return s();R?s(!1,R):r=setTimeout(()=>{s(!1,1e-7)},1e3)}R===1&&!H8(u,e.getBoundingClientRect())&&s(),C=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return s(!0),i}function NJ(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Fk(e),d=a||i?[...u?xg(u):[],...xg(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=u&&o?AJ(u,n):null;let p=-1,y=null;s&&(y=new ResizeObserver(x=>{let[S]=x;S&&S.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=y)==null||E.observe(t)})),n()}),u&&!l&&y.observe(u),y.observe(t));let v,b=l?Pd(e):null;l&&w();function w(){const x=Pd(e);b&&!H8(b,x)&&n(),b=x,v=requestAnimationFrame(w)}return n(),()=>{var x;d.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(x=y)==null||x.disconnect(),y=null,l&&cancelAnimationFrame(v)}}const RJ=lJ,IJ=cJ,jJ=iJ,OJ=dJ,DJ=sJ,K3=aJ,MJ=uJ,PJ=(e,t,n)=>{const r=new Map,a={platform:TJ,...n},i={...a.platform,_c:r};return rJ(e,t,{...a,platform:i})};var _v=typeof document<"u"?T.useLayoutEffect:T.useEffect;function lw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!lw(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!lw(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function q8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Z3(e,t){const n=q8(e);return Math.round(t*n)/n}function LS(e){const t=T.useRef(e);return _v(()=>{t.current=e}),t}function FJ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=e,[d,h]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,y]=T.useState(r);lw(p,r)||y(r);const[v,b]=T.useState(null),[w,x]=T.useState(null),S=T.useCallback(X=>{X!==I.current&&(I.current=X,b(X))},[]),E=T.useCallback(X=>{X!==R.current&&(R.current=X,x(X))},[]),C=i||v,k=s||w,I=T.useRef(null),R=T.useRef(null),j=T.useRef(d),L=l!=null,B=LS(l),Z=LS(a),P=LS(u),K=T.useCallback(()=>{if(!I.current||!R.current)return;const X={placement:t,strategy:n,middleware:p};Z.current&&(X.platform=Z.current),PJ(I.current,R.current,X).then(re=>{const D={...re,isPositioned:P.current!==!1};q.current&&!lw(j.current,D)&&(j.current=D,zo.flushSync(()=>{h(D)}))})},[p,t,n,Z,P]);_v(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[u]);const q=T.useRef(!1);_v(()=>(q.current=!0,()=>{q.current=!1}),[]),_v(()=>{if(C&&(I.current=C),k&&(R.current=k),C&&k){if(B.current)return B.current(C,k,K);K()}},[C,k,K,B,L]);const de=T.useMemo(()=>({reference:I,floating:R,setReference:S,setFloating:E}),[S,E]),ae=T.useMemo(()=>({reference:C,floating:k}),[C,k]),te=T.useMemo(()=>{const X={position:n,left:0,top:0};if(!ae.floating)return X;const re=Z3(ae.floating,d.x),D=Z3(ae.floating,d.y);return o?{...X,transform:"translate("+re+"px, "+D+"px)",...q8(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:re,top:D}},[n,o,ae.floating,d.x,d.y]);return T.useMemo(()=>({...d,update:K,refs:de,elements:ae,floatingStyles:te}),[d,K,de,ae,te])}const LJ=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?K3({element:r.current,padding:a}).fn(n):{}:r?K3({element:r,padding:a}).fn(n):{}}}},$J=(e,t)=>({...RJ(e),options:[e,t]}),BJ=(e,t)=>({...IJ(e),options:[e,t]}),zJ=(e,t)=>({...MJ(e),options:[e,t]}),UJ=(e,t)=>({...jJ(e),options:[e,t]}),HJ=(e,t)=>({...OJ(e),options:[e,t]}),qJ=(e,t)=>({...DJ(e),options:[e,t]}),VJ=(e,t)=>({...LJ(e),options:[e,t]});var GJ="Arrow",V8=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return m.jsx(an.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});V8.displayName=GJ;var WJ=V8;function fx(e){const[t,n]=T.useState(void 0);return za(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let s,o;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,o=u.blockSize}else s=e.offsetWidth,o=e.offsetHeight;n({width:s,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var $k="Popper",[G8,Cu]=Ei($k),[KJ,W8]=G8($k),K8=e=>{const{__scopePopper:t,children:n}=e,[r,a]=T.useState(null);return m.jsx(KJ,{scope:t,anchor:r,onAnchorChange:a,children:n})};K8.displayName=$k;var Z8="PopperAnchor",Y8=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=W8(Z8,n),s=T.useRef(null),o=Cn(t,s);return T.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:m.jsx(an.div,{...a,ref:o})});Y8.displayName=Z8;var Bk="PopperContent",[ZJ,YJ]=G8(Bk),X8=T.forwardRef((e,t)=>{var Ae,Re,ke,Fe,et,Le;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:y="optimized",onPlaced:v,...b}=e,w=W8(Bk,n),[x,S]=T.useState(null),E=Cn(t,Ie=>S(Ie)),[C,k]=T.useState(null),I=fx(C),R=(I==null?void 0:I.width)??0,j=(I==null?void 0:I.height)??0,L=r+(i!=="center"?"-"+i:""),B=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},Z=Array.isArray(u)?u:[u],P=Z.length>0,K={padding:B,boundary:Z.filter(JJ),altBoundary:P},{refs:q,floatingStyles:de,placement:ae,isPositioned:te,middlewareData:X}=FJ({strategy:"fixed",placement:L,whileElementsMounted:(...Ie)=>NJ(...Ie,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[$J({mainAxis:a+j,alignmentAxis:s}),l&&BJ({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?zJ():void 0,...K}),l&&UJ({...K}),HJ({...K,apply:({elements:Ie,rects:z,availableWidth:Se,availableHeight:Te})=>{const{width:ue,height:oe}=z.reference,ee=Ie.floating.style;ee.setProperty("--radix-popper-available-width",`${Se}px`),ee.setProperty("--radix-popper-available-height",`${Te}px`),ee.setProperty("--radix-popper-anchor-width",`${ue}px`),ee.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),C&&VJ({element:C,padding:o}),QJ({arrowWidth:R,arrowHeight:j}),p&&qJ({strategy:"referenceHidden",...K})]}),[re,D]=eP(ae),J=Fa(v);za(()=>{te&&(J==null||J())},[te,J]);const Q=(Ae=X.arrow)==null?void 0:Ae.x,ie=(Re=X.arrow)==null?void 0:Re.y,me=((ke=X.arrow)==null?void 0:ke.centerOffset)!==0,[ve,Me]=T.useState();return za(()=>{x&&Me(window.getComputedStyle(x).zIndex)},[x]),m.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:te?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Fe=X.transformOrigin)==null?void 0:Fe.x,(et=X.transformOrigin)==null?void 0:et.y].join(" "),...((Le=X.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:m.jsx(ZJ,{scope:n,placedSide:re,onArrowChange:k,arrowX:Q,arrowY:ie,shouldHideArrow:me,children:m.jsx(an.div,{"data-side":re,"data-align":D,...b,ref:E,style:{...b.style,animation:te?void 0:"none"}})})})});X8.displayName=Bk;var J8="PopperArrow",XJ={top:"bottom",right:"left",bottom:"top",left:"right"},Q8=T.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=YJ(J8,r),s=XJ[i.placedSide];return m.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:m.jsx(WJ,{...a,ref:n,style:{...a.style,display:"block"}})})});Q8.displayName=J8;function JJ(e){return e!==null}var QJ=e=>({name:"transformOrigin",options:e,fn(t){var w,x,S;const{placement:n,rects:r,middlewareData:a}=t,s=((w=a.arrow)==null?void 0:w.centerOffset)!==0,o=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[u,d]=eP(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((x=a.arrow)==null?void 0:x.x)??0)+o/2,y=(((S=a.arrow)==null?void 0:S.y)??0)+l/2;let v="",b="";return u==="bottom"?(v=s?h:`${p}px`,b=`${-l}px`):u==="top"?(v=s?h:`${p}px`,b=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,b=s?h:`${y}px`):u==="left"&&(v=`${r.floating.width+l}px`,b=s?h:`${y}px`),{data:{x:v,y:b}}}});function eP(e){const[t,n="center"]=e.split("-");return[t,n]}var hx=K8,p0=Y8,px=X8,mx=Q8,eQ="Portal",ap=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[a,i]=T.useState(!1);za(()=>i(!0),[]);const s=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?I8.createPortal(m.jsx(an.div,{...r,ref:t}),s):null});ap.displayName=eQ;function tQ(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var ka=e=>{const{present:t,children:n}=e,r=nQ(t),a=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),i=Cn(r.ref,rQ(a));return typeof n=="function"||r.isPresent?T.cloneElement(a,{ref:i}):null};ka.displayName="Presence";function nQ(e){const[t,n]=T.useState(),r=T.useRef(null),a=T.useRef(e),i=T.useRef("none"),s=e?"mounted":"unmounted",[o,l]=tQ(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const u=Gb(r.current);i.current=o==="mounted"?u:"none"},[o]),za(()=>{const u=r.current,d=a.current;if(d!==e){const p=i.current,y=Gb(u);e?l("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==y?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),za(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=y=>{const b=Gb(r.current).includes(y.animationName);if(y.target===t&&b&&(l("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=y=>{y.target===t&&(i.current=Gb(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:T.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Gb(e){return(e==null?void 0:e.animationName)||"none"}function rQ(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var aQ=R6[" useInsertionEffect ".trim().toString()]||za;function ro({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,s]=iQ({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:a;{const d=T.useRef(e!==void 0);T.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=T.useCallback(d=>{var h;if(o){const p=sQ(d)?d(e):d;p!==e&&((h=s.current)==null||h.call(s,p))}else i(d)},[o,e,i,s]);return[l,u]}function iQ({defaultProp:e,onChange:t}){const[n,r]=T.useState(e),a=T.useRef(n),i=T.useRef(t);return aQ(()=>{i.current=t},[t]),T.useEffect(()=>{var s;a.current!==n&&((s=i.current)==null||s.call(i,n),a.current=n)},[n,a]),[n,r,i]}function sQ(e){return typeof e=="function"}var tP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),oQ="VisuallyHidden",nP=T.forwardRef((e,t)=>m.jsx(an.span,{...e,ref:t,style:{...tP,...e.style}}));nP.displayName=oQ;var lQ=nP,[gx,U_e]=Ei("Tooltip",[Cu]),yx=Cu(),rP="TooltipProvider",cQ=700,yC="tooltip.open",[uQ,zk]=gx(rP),aP=e=>{const{__scopeTooltip:t,delayDuration:n=cQ,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,s=T.useRef(!0),o=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),m.jsx(uQ,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:T.useCallback(u=>{o.current=u},[]),disableHoverableContent:a,children:i})};aP.displayName=rP;var _g="Tooltip",[dQ,m0]=gx(_g),iP=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:s,delayDuration:o}=e,l=zk(_g,e.__scopeTooltip),u=yx(t),[d,h]=T.useState(null),p=Za(),y=T.useRef(0),v=s??l.disableHoverableContent,b=o??l.delayDuration,w=T.useRef(!1),[x,S]=ro({prop:r,defaultProp:a??!1,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(yC))):l.onClose(),i==null||i(R)},caller:_g}),E=T.useMemo(()=>x?w.current?"delayed-open":"instant-open":"closed",[x]),C=T.useCallback(()=>{window.clearTimeout(y.current),y.current=0,w.current=!1,S(!0)},[S]),k=T.useCallback(()=>{window.clearTimeout(y.current),y.current=0,S(!1)},[S]),I=T.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{w.current=!0,S(!0),y.current=0},b)},[b,S]);return T.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),m.jsx(hx,{...u,children:m.jsx(dQ,{scope:t,contentId:p,open:x,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:T.useCallback(()=>{l.isOpenDelayedRef.current?I():C()},[l.isOpenDelayedRef,I,C]),onTriggerLeave:T.useCallback(()=>{v?k():(window.clearTimeout(y.current),y.current=0)},[k,v]),onOpen:C,onClose:k,disableHoverableContent:v,children:n})})};iP.displayName=_g;var bC="TooltipTrigger",sP=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=m0(bC,n),i=zk(bC,n),s=yx(n),o=T.useRef(null),l=Cn(t,o,a.onTriggerChange),u=T.useRef(!1),d=T.useRef(!1),h=T.useCallback(()=>u.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),m.jsx(p0,{asChild:!0,...s,children:m.jsx(an.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:l,onPointerMove:Wt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Wt(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Wt(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Wt(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Wt(e.onBlur,a.onClose),onClick:Wt(e.onClick,a.onClose)})})});sP.displayName=bC;var Uk="TooltipPortal",[fQ,hQ]=gx(Uk,{forceMount:void 0}),oP=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=m0(Uk,t);return m.jsx(fQ,{scope:t,forceMount:n,children:m.jsx(ka,{present:n||i.open,children:m.jsx(ap,{asChild:!0,container:a,children:r})})})};oP.displayName=Uk;var Mh="TooltipContent",lP=T.forwardRef((e,t)=>{const n=hQ(Mh,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,s=m0(Mh,e.__scopeTooltip);return m.jsx(ka,{present:r||s.open,children:s.disableHoverableContent?m.jsx(cP,{side:a,...i,ref:t}):m.jsx(pQ,{side:a,...i,ref:t})})}),pQ=T.forwardRef((e,t)=>{const n=m0(Mh,e.__scopeTooltip),r=zk(Mh,e.__scopeTooltip),a=T.useRef(null),i=Cn(t,a),[s,o]=T.useState(null),{trigger:l,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,p=T.useCallback(()=>{o(null),h(!1)},[h]),y=T.useCallback((v,b)=>{const w=v.currentTarget,x={x:v.clientX,y:v.clientY},S=bQ(x,w.getBoundingClientRect()),E=vQ(x,S),C=wQ(b.getBoundingClientRect()),k=_Q([...E,...C]);o(k),h(!0)},[h]);return T.useEffect(()=>()=>p(),[p]),T.useEffect(()=>{if(l&&d){const v=w=>y(w,d),b=w=>y(w,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",b)}}},[l,d,y,p]),T.useEffect(()=>{if(s){const v=b=>{const w=b.target,x={x:b.clientX,y:b.clientY},S=(l==null?void 0:l.contains(w))||(d==null?void 0:d.contains(w)),E=!xQ(x,s);S?p():E&&(p(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,s,u,p]),m.jsx(cP,{...e,ref:i})}),[mQ,gQ]=gx(_g,{isInside:!1}),yQ=jU("TooltipContent"),cP=T.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:s,...o}=e,l=m0(Mh,n),u=yx(n),{onClose:d}=l;return T.useEffect(()=>(document.addEventListener(yC,d),()=>document.removeEventListener(yC,d)),[d]),T.useEffect(()=>{if(l.trigger){const h=p=>{const y=p.target;y!=null&&y.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),m.jsx(tp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:m.jsxs(px,{"data-state":l.stateAttribute,...u,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m.jsx(yQ,{children:r}),m.jsx(mQ,{scope:n,isInside:!0,children:m.jsx(lQ,{id:l.contentId,role:"tooltip",children:a||r})})]})})});lP.displayName=Mh;var uP="TooltipArrow",dP=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=yx(n);return gQ(uP,n).isInside?null:m.jsx(mx,{...a,...r,ref:t})});dP.displayName=uP;function bQ(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function vQ(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function wQ(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function xQ(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(a=!a)}return a}function _Q(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),SQ(t)}function SQ(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var EQ=aP,CQ=iP,kQ=sP,TQ=oP,AQ=lP,NQ=dP;function Gn({delayDuration:e=0,...t}){return m.jsx(EQ,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Xn({...e}){return m.jsx(Gn,{children:m.jsx(CQ,{"data-slot":"tooltip",...e})})}function Jn({...e}){return m.jsx(kQ,{"data-slot":"tooltip-trigger",...e})}function Qn({className:e,sideOffset:t=0,children:n,...r}){return m.jsx(TQ,{children:m.jsxs(AQ,{"data-slot":"tooltip-content",sideOffset:t,className:At("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,m.jsx(NQ,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var $S={exports:{}},Y3;function RQ(){return Y3||(Y3=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,s={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof l?new l(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var k,I;switch(o.util.type(E)){case"Object":if(I=o.util.objId(E),C[I])return C[I];k={},C[I]=k;for(var R in E)E.hasOwnProperty(R)&&(k[R]=S(E[R],C));return k;case"Array":return I=o.util.objId(E),C[I]?C[I]:(k=[],C[I]=k,E.forEach(function(j,L){k[L]=S(j,C)}),k);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var k="no-"+E;S;){var I=S.classList;if(I.contains(E))return!0;if(I.contains(k))return!1;S=S.parentElement}return!!C}},languages:{plain:s,plaintext:s,text:s,txt:s,extend:function(S,E){var C=o.util.clone(o.languages[S]);for(var k in E)C[k]=E[k];return C},insertBefore:function(S,E,C,k){k=k||o.languages;var I=k[S],R={};for(var j in I)if(I.hasOwnProperty(j)){if(j==E)for(var L in C)C.hasOwnProperty(L)&&(R[L]=C[L]);C.hasOwnProperty(j)||(R[j]=I[j])}var B=k[S];return k[S]=R,o.languages.DFS(o.languages,function(Z,P){P===B&&Z!=S&&(this[Z]=R)}),R},DFS:function S(E,C,k,I){I=I||{};var R=o.util.objId;for(var j in E)if(E.hasOwnProperty(j)){C.call(E,j,E[j],k||j);var L=E[j],B=o.util.type(L);B==="Object"&&!I[R(L)]?(I[R(L)]=!0,S(L,C,null,I)):B==="Array"&&!I[R(L)]&&(I[R(L)]=!0,S(L,C,j,I))}}},plugins:{},highlightAll:function(S,E){o.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var k={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),o.hooks.run("before-all-elements-highlight",k);for(var I=0,R;R=k.elements[I++];)o.highlightElement(R,E===!0,k.callback)},highlightElement:function(S,E,C){var k=o.util.getLanguage(S),I=o.languages[k];o.util.setLanguage(S,k);var R=S.parentElement;R&&R.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(R,k);var j=S.textContent,L={element:S,language:k,grammar:I,code:j};function B(P){L.highlightedCode=P,o.hooks.run("before-insert",L),L.element.innerHTML=L.highlightedCode,o.hooks.run("after-highlight",L),o.hooks.run("complete",L),C&&C.call(L.element)}if(o.hooks.run("before-sanity-check",L),R=L.element.parentElement,R&&R.nodeName.toLowerCase()==="pre"&&!R.hasAttribute("tabindex")&&R.setAttribute("tabindex","0"),!L.code){o.hooks.run("complete",L),C&&C.call(L.element);return}if(o.hooks.run("before-highlight",L),!L.grammar){B(o.util.encode(L.code));return}if(E&&r.Worker){var Z=new Worker(o.filename);Z.onmessage=function(P){B(P.data)},Z.postMessage(JSON.stringify({language:L.language,code:L.code,immediateClose:!0}))}else B(o.highlight(L.code,L.grammar,L.language))},highlight:function(S,E,C){var k={code:S,grammar:E,language:C};if(o.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=o.tokenize(k.code,k.grammar),o.hooks.run("after-tokenize",k),l.stringify(o.util.encode(k.tokens),k.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var k in C)E[k]=C[k];delete E.rest}var I=new h;return p(I,I.head,S),d(S,I,E,I.head,0),v(I)},hooks:{all:{},add:function(S,E){var C=o.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=o.hooks.all[S];if(!(!C||!C.length))for(var k=0,I;I=C[k++];)I(E)}},Token:l};r.Prism=o;function l(S,E,C,k){this.type=S,this.content=E,this.alias=C,this.length=(k||"").length|0}l.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function(B){k+=S(B,C)}),k}var I={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},R=E.alias;R&&(Array.isArray(R)?Array.prototype.push.apply(I.classes,R):I.classes.push(R)),o.hooks.run("wrap",I);var j="";for(var L in I.attributes)j+=" "+L+'="'+(I.attributes[L]||"").replace(/"/g,"&quot;")+'"';return"<"+I.tag+' class="'+I.classes.join(" ")+'"'+j+">"+I.content+"</"+I.tag+">"};function u(S,E,C,k){S.lastIndex=E;var I=S.exec(C);if(I&&k&&I[1]){var R=I[1].length;I.index+=R,I[0]=I[0].slice(R)}return I}function d(S,E,C,k,I,R){for(var j in C)if(!(!C.hasOwnProperty(j)||!C[j])){var L=C[j];L=Array.isArray(L)?L:[L];for(var B=0;B<L.length;++B){if(R&&R.cause==j+","+B)return;var Z=L[B],P=Z.inside,K=!!Z.lookbehind,q=!!Z.greedy,de=Z.alias;if(q&&!Z.pattern.global){var ae=Z.pattern.toString().match(/[imsuy]*$/)[0];Z.pattern=RegExp(Z.pattern.source,ae+"g")}for(var te=Z.pattern||Z,X=k.next,re=I;X!==E.tail&&!(R&&re>=R.reach);re+=X.value.length,X=X.next){var D=X.value;if(E.length>S.length)return;if(!(D instanceof l)){var J=1,Q;if(q){if(Q=u(te,re,S,K),!Q||Q.index>=S.length)break;var Me=Q.index,ie=Q.index+Q[0].length,me=re;for(me+=X.value.length;Me>=me;)X=X.next,me+=X.value.length;if(me-=X.value.length,re=me,X.value instanceof l)continue;for(var ve=X;ve!==E.tail&&(me<ie||typeof ve.value=="string");ve=ve.next)J++,me+=ve.value.length;J--,D=S.slice(re,me),Q.index-=re}else if(Q=u(te,0,D,K),!Q)continue;var Me=Q.index,Ae=Q[0],Re=D.slice(0,Me),ke=D.slice(Me+Ae.length),Fe=re+D.length;R&&Fe>R.reach&&(R.reach=Fe);var et=X.prev;Re&&(et=p(E,et,Re),re+=Re.length),y(E,et,J);var Le=new l(j,P?o.tokenize(Ae,P):Ae,de,Ae);if(X=p(E,et,Le),ke&&p(E,X,ke),J>1){var Ie={cause:j+","+B,reach:Fe};d(S,E,C,X.prev,re,Ie),R&&Ie.reach>R.reach&&(R.reach=Ie.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function p(S,E,C){var k=E.next,I={value:C,prev:E,next:k};return E.next=I,k.prev=I,S.length++,I}function y(S,E,C){for(var k=E.next,I=0;I<C&&k!==S.tail;I++)k=k.next;E.next=k,k.prev=E,S.length-=I}function v(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,k=E.code,I=E.immediateClose;r.postMessage(o.highlight(k,o.languages[C],C)),I&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function w(){o.manual||o.highlightAll()}if(!o.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",w):window.requestAnimationFrame?window.requestAnimationFrame(w):window.setTimeout(w,16)}return o}(t);e.exports&&(e.exports=n),typeof xd<"u"&&(xd.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var s={};s["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};o["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var l={};l[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,w){return" Error "+b+" while fetching file: "+w},i=" Error: File does not exist or is empty",s={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",d="failed",h="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function p(b,w,x){var S=new XMLHttpRequest;S.open("GET",b,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?w(S.responseText):S.status>=400?x(a(S.status,S.statusText)):x(i))},S.send(null)}function y(b){var w=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(w){var x=Number(w[1]),S=w[2],E=w[3];return S?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var w=b.element;if(w.matches(h)){b.code="",w.setAttribute(o,l);var x=w.appendChild(document.createElement("CODE"));x.textContent=r;var S=w.getAttribute("data-src"),E=b.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=s[C]||C}n.util.setLanguage(x,E),n.util.setLanguage(w,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),p(S,function(I){w.setAttribute(o,u);var R=y(w.getAttribute("data-range"));if(R){var j=I.split(/\r\n?|\n/g),L=R[0],B=R[1]==null?j.length:R[1];L<0&&(L+=j.length),L=Math.max(0,Math.min(L-1,j.length)),B<0&&(B+=j.length),B=Math.max(0,Math.min(B,j.length)),I=j.slice(L,B).join(`
`),w.hasAttribute("data-start")||w.setAttribute("data-start",String(L+1))}x.textContent=I,n.highlightElement(x)},function(I){w.setAttribute(o,d),x.textContent=I})}}),n.plugins.fileHighlight={highlight:function(w){for(var x=(w||document).querySelectorAll(h),S=0,E;E=x[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}($S)),$S.exports}var IQ=RQ();const jQ=ui(IQ);var X3={},J3;function OQ(){return J3||(J3=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),X3}OQ();var Q3={},ej;function DQ(){return ej||(ej=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),Q3}DQ();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,s=0;s<a.length;s++)i[a[s]]=e.languages.bash[a[s]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(h){d!==h&&(e.languages.markdown[d].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function h(p){if(!(!p||typeof p=="string"))for(var y=0,v=p.length;y<v;y++){var b=p[y];if(b.type!=="code"){h(b.content);continue}var w=b.content[1],x=b.content[3];if(w&&x&&w.type==="code-language"&&x.type==="code-block"&&typeof w.content=="string"){var S=w.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var h="",p=0,y=d.classes.length;p<y;p++){var v=d.classes[p],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var w=e.languages[h];if(w)d.content=e.highlight(u(d.content),w,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(x);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var s=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var h=d.replace(s,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,y){if(y=y.toLowerCase(),y[0]==="#"){var v;return y[1]==="x"?v=parseInt(y.slice(2),16):v=Number(y.slice(1)),l(v)}else{var b=o[y];return b||p}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function s(o,l){l=(l||"").replace(/m/g,"")+"m";var u=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return o});return RegExp(u,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:s(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:s(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:s(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:s(i),lookbehind:!0,greedy:!0},number:{pattern:s(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var tj={},nj;function MQ(){return nj||(nj=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),tj}MQ();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const rj="prism-theme-link",BS="prism-default-light-theme-link",zS="prism-default-dark-theme-link",PQ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",FQ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css",aj=e=>e.replace("github.com","raw.githubusercontent.com").replace("/blob/","/"),LQ=({lang:e,code:t,isStreaming:n=!1})=>{const{prismThemeUrl:r,theme:a,foldStreamingCodeBlocks:i}=lr(dn(S=>({prismThemeUrl:S.prismThemeUrl,theme:S.theme,foldStreamingCodeBlocks:S.foldStreamingCodeBlocks}))),[s,o]=T.useState(!1),[l,u]=T.useState(n?i:!1),d=T.useRef(null),h=T.useMemo(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),p=a==="system"?h:a;T.useEffect(()=>{const S=(C,k)=>{const I=document.getElementById(k);if(I)I.href!==C&&(I.href=C);else{const R=document.createElement("link");R.id=k,R.rel="stylesheet",R.href=C,document.head.appendChild(R)}},E=C=>{const k=document.getElementById(C);k&&k.remove()};r?(S(r,rj),E(BS),E(zS)):(E(rj),p==="dark"?(S(aj(FQ),zS),E(BS)):(S(aj(PQ),BS),E(zS)))},[r,p]);const y=T.useCallback(()=>{if(d.current&&t)try{d.current.style.whiteSpace!=="pre-wrap"&&(d.current.style.whiteSpace="pre-wrap"),d.current.textContent=t,jQ.highlightElement(d.current)}catch(S){console.error("Prism highlight error:",S),d.current.textContent=t}else d.current&&(d.current.textContent="")},[t]);T.useEffect(()=>{l||y()},[t,e,l,y]);const v=async()=>{try{await navigator.clipboard.writeText(t),o(!0),Ye.success("Code copied to clipboard!"),setTimeout(()=>o(!1),1500)}catch(S){Ye.error("Failed to copy code."),console.error("Clipboard copy failed:",S)}},b=()=>{const S=l;u(E=>!E),S&&setTimeout(y,0)},w=e?`language-${e}`:"language-plaintext",x=T.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return m.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[m.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),m.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:b,"aria-label":l?"Unfold code":"Fold code",children:m.jsx(Kw,{className:"h-3.5 w-3.5"})})}),m.jsx(Qn,{side:"top",children:l?"Unfold":"Fold"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:v,"aria-label":"Copy code",children:s?m.jsx(lo,{className:"h-3.5 w-3.5 text-green-500"}):m.jsx(hk,{className:"h-3.5 w-3.5"})})}),m.jsx(Qn,{side:"top",children:"Copy"})]})})]})]}),m.jsx("div",{})]}),!l&&m.jsx("div",{className:"overflow-hidden w-full",children:m.jsx("pre",{className:"overflow-x-auto w-full relative break-words",children:m.jsx("code",{ref:d,className:w+" block"})})}),l&&m.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:b,children:m.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:x})})]})},g0=T.memo(LQ);var lt;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(lt||(lt={}));const ij={[lt.EPERM]:"Operation not permitted",[lt.ENOENT]:"No such file or directory",[lt.EINTR]:"Interrupted system call",[lt.EIO]:"Input/output error",[lt.ENXIO]:"No such device or address",[lt.EBADF]:"Bad file descriptor",[lt.EAGAIN]:"Resource temporarily unavailable",[lt.ENOMEM]:"Cannot allocate memory",[lt.EACCES]:"Permission denied",[lt.EFAULT]:"Bad address",[lt.ENOTBLK]:"Block device required",[lt.EBUSY]:"Resource busy or locked",[lt.EEXIST]:"File exists",[lt.EXDEV]:"Invalid cross-device link",[lt.ENODEV]:"No such device",[lt.ENOTDIR]:"File is not a directory",[lt.EISDIR]:"File is a directory",[lt.EINVAL]:"Invalid argument",[lt.ENFILE]:"Too many open files in system",[lt.EMFILE]:"Too many open files",[lt.ETXTBSY]:"Text file busy",[lt.EFBIG]:"File is too big",[lt.ENOSPC]:"No space left on disk",[lt.ESPIPE]:"Illegal seek",[lt.EROFS]:"Cannot modify a read-only file system",[lt.EMLINK]:"Too many links",[lt.EPIPE]:"Broken pipe",[lt.EDOM]:"Numerical argument out of domain",[lt.ERANGE]:"Numerical result out of range",[lt.EDEADLK]:"Resource deadlock would occur",[lt.ENAMETOOLONG]:"File name too long",[lt.ENOLCK]:"No locks available",[lt.ENOSYS]:"Function not implemented",[lt.ENOTEMPTY]:"Directory is not empty",[lt.ELOOP]:"Too many levels of symbolic links",[lt.ENOMSG]:"No message of desired type",[lt.EBADE]:"Invalid exchange",[lt.EBADR]:"Invalid request descriptor",[lt.EXFULL]:"Exchange full",[lt.ENOANO]:"No anode",[lt.EBADRQC]:"Invalid request code",[lt.ENOSTR]:"Device not a stream",[lt.ENODATA]:"No data available",[lt.ETIME]:"Timer expired",[lt.ENOSR]:"Out of streams resources",[lt.ENONET]:"Machine is not on the network",[lt.EREMOTE]:"Object is remote",[lt.ENOLINK]:"Link has been severed",[lt.ECOMM]:"Communication error on send",[lt.EPROTO]:"Protocol error",[lt.EBADMSG]:"Bad message",[lt.EOVERFLOW]:"Value too large for defined data type",[lt.EBADFD]:"File descriptor in bad state",[lt.ESTRPIPE]:"Streams pipe error",[lt.ENOTSOCK]:"Socket operation on non-socket",[lt.EDESTADDRREQ]:"Destination address required",[lt.EMSGSIZE]:"Message too long",[lt.EPROTOTYPE]:"Protocol wrong type for socket",[lt.ENOPROTOOPT]:"Protocol not available",[lt.EPROTONOSUPPORT]:"Protocol not supported",[lt.ESOCKTNOSUPPORT]:"Socket type not supported",[lt.ENOTSUP]:"Operation is not supported",[lt.ENETDOWN]:"Network is down",[lt.ENETUNREACH]:"Network is unreachable",[lt.ENETRESET]:"Network dropped connection on reset",[lt.ETIMEDOUT]:"Connection timed out",[lt.ECONNREFUSED]:"Connection refused",[lt.EHOSTDOWN]:"Host is down",[lt.EHOSTUNREACH]:"No route to host",[lt.EALREADY]:"Operation already in progress",[lt.EINPROGRESS]:"Operation now in progress",[lt.ESTALE]:"Stale file handle",[lt.EREMOTEIO]:"Remote I/O error",[lt.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(lt[t],ij[lt[t]],n,r)}constructor(t,n=ij[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=lt[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var US={exports:{}},sj;function $Q(){return sj||(sj=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new a(d,h||l,p),v=n?n+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],y]:l._events[v].push(y):(l._events[v]=y,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,y=h.length,v=new Array(y);p<y;p++)v[p]=h[p].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,p,y,v){var b=n?n+u:u;if(!this._events[b])return!1;var w=this._events[b],x=arguments.length,S,E;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),x){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,h),!0;case 4:return w.fn.call(w.context,d,h,p),!0;case 5:return w.fn.call(w.context,d,h,p,y),!0;case 6:return w.fn.call(w.context,d,h,p,y,v),!0}for(E=1,S=new Array(x-1);E<x;E++)S[E-1]=arguments[E];w.fn.apply(w.context,S)}else{var C=w.length,k;for(E=0;E<C;E++)switch(w[E].once&&this.removeListener(u,w[E].fn,void 0,!0),x){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,d);break;case 3:w[E].fn.call(w[E].context,d,h);break;case 4:w[E].fn.call(w[E].context,d,h,p);break;default:if(!S)for(k=1,S=new Array(x-1);k<x;k++)S[k-1]=arguments[k];w[E].fn.apply(w[E].context,S)}}return!0},o.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,p){var y=n?n+u:u;if(!this._events[y])return this;if(!d)return s(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&s(this,y);else{for(var b=0,w=[],x=v.length;b<x;b++)(v[b].fn!==d||p&&!v[b].once||h&&v[b].context!==h)&&w.push(v[b]);w.length?this._events[y]=w.length===1?w[0]:w:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(US)),US.exports}var BQ=$Q();const Hk=ui(BQ);var C6;let zQ=class extends Hk{constructor(n){super();ha(this,C6,"List");ha(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),s=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),s}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(C6=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function oj(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function br(e){throw e}const lj=Intl.NumberFormat("en",{notation:"compact"});lj.format.bind(lj);function Kd(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function UQ(e){try{return JSON.parse(e),!0}catch{return!1}}function vC(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function qk(e){return e.at(0).toUpperCase()+e.slice(1)}const HQ=new TextEncoder;function vd(e){return HQ.encode(e)}const cj=new TextDecoder;function Vk(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return cj.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),cj.decode(t)}function Sg(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Sg(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function qQ(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var VQ={};let GQ="process"in globalThis&&"env"in globalThis.process&&VQ.U_DEBUG=="true";function Eg(...e){GQ&&console.debug("[U]",...e)}const uj=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],WQ=[...uj,...uj.map(e=>qk(e)),"char"],Gk=/^(u?int|float)(8|16|32|64|128)$/i;function fP(e){return e=="char"?"uint8":e.toLowerCase()}function Wk(e){return Gk.test(e.toString())}function wC(e){return e=="char"||Gk.test(e.toString().toLowerCase())}function KQ(e){if(!wC(e))throw new TypeError("Not a valid primitive type: "+e)}const dj=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function hP(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function ZQ(e){return e!=null&&typeof e=="object"&&"struct"in e}function bx(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function Xs(e){return typeof e=="function"&&Symbol.metadata in e&&ZQ(e[Symbol.metadata])}function y0(e){return e!=null&&typeof e=="object"&&Xs(e.constructor)}function pP(e){if(!y0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function Kk(e){return y0(e)||Xs(e)}function mP(e){if(!Kk(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function Zk(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Hr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=Hr(e[i]);return a}if(typeof e=="string")return KQ(e),+fP(e).match(Gk)[2]/8;if(Zk(e))return e[Symbol.size];mP(e);const t=Xs(e)?e:e.constructor;bx(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(Xs(e))return r;for(const a of n.members.values()){const i=e[a.name];if(y0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Hr(i)):r+=Hr(i);continue}if(typeof a.length!="string")continue;let s=0;for(let o=0;o<e[a.length];o++)s+=Hr(Kk(i[o])?i[o]:a.type);n.isUnion?r=Math.max(r,s):r+=s}return r}function YQ(e,t){var i;mP(e);const n=Xs(e)?e:e.constructor;bx(n);const{struct:r}=n[Symbol.metadata];if(Xs(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??br(new Error("Struct does not have member: "+t));let a=0;for(const s of r.members.values()){if(s.name==t)return a;const o=e[s.name];a+=Hr(Kk(o)?o:s.type)}throw new Error("Struct does not have member: "+t)}function XQ(e,t){return Math.ceil(e/t)*t}function Zd(e={}){return function(n,r){const a=new Map;let i=0,s=!1;for(const{name:o,type:l,length:u}of hP(r)){if(!wC(l)&&!Xs(l))throw new TypeError("Not a valid type: "+l);if(typeof u=="string"){const p=a.get(u);if(!p)throw new Error(`"${u}" is undefined or declared after "${o}"`);if(!Wk(p.type))throw new Error(`"${u}" is not a number and cannot be used to count "${o}"`)}let d=`${typeof l=="string"?l:l.name} ${o}`;u!==void 0&&(d+=`[${u}]`),a.set(o,{name:o,staticOffset:e.isUnion?0:i,type:wC(l)?fP(l):l,length:u,decl:d});const h=typeof u=="string"||Xs(l)&&l[Symbol.metadata].struct.isDynamic?0:Hr(l)*(u||1);s||(s=Xs(l)?l[Symbol.metadata].struct.isDynamic:typeof u=="string"),i=e.isUnion?Math.max(i,h):i+h,i=XQ(i,e.align||1),Eg("define",n.name+"."+o)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:s,isUnion:e.isUnion??!1},n}}function Cg(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return hP(r).push({name:a,type:e,length:t}),n}}function gP(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:br(new Error("Array lengths must be natural numbers"))}function Ka(e){if(Zk(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();pP(e),bx(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Hr(e),a=new Uint8Array(r),i=new DataView(a.buffer);Eg("serialize",e.constructor.name);let s=0,o=0;for(const l of n.values()){const u=gP(e,l);Eg("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name][d]:e[l.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),s=o,o+=y0(h)?Hr(h):Hr(l.type),!Wk(l.type)){a.set(h?Ka(h):new Uint8Array(Hr(l.type)),s);continue}const p=`set${qk(l.type)}`;if(p=="setInt64"){i.setBigInt64(s,BigInt(h),!t.bigEndian);continue}if(p=="setUint64"){i.setBigUint64(s,BigInt(h),!t.bigEndian);continue}if(p=="setInt128"){i.setBigUint64(s+(t.bigEndian?8:0),h&dj,!t.bigEndian),i.setBigInt64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setUint128"){i.setBigUint64(s+(t.bigEndian?8:0),h&dj,!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setFloat128"){i.setFloat64(s+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[p](s,Number(h),!t.bigEndian)}}return a}function vx(e,t){const n=qQ(t);if(Zk(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);pP(e),bx(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);Eg("deserialize",e.constructor.name);let s=0,o=0;for(const l of a.values()){const u=gP(e,l);Eg("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name]:e;const p=u!=-1?d:l.name,y=h[p]===null||h[p]===void 0,v=y&&Xs(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(s=o,!y0(h[p])&&!v&&(o+=Hr(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,d)+String.fromCharCode(i.getUint8(s))+e[l.name].slice(d+1);continue}if(!Wk(l.type)){if(v&&Xs(l.type))h[p]??(h[p]=new l.type);else if(y)continue;vx(h[p],new Uint8Array(n.subarray(s))),o+=Hr(h[p]);continue}u&&u!=-1&&(h||(h=[]));const b=`get${qk(l.type)}`;if(b=="getInt64"){h[p]=i.getBigInt64(s,!r.bigEndian);continue}if(b=="getUint64"){h[p]=i.getBigUint64(s,!r.bigEndian);continue}if(b=="getInt128"){h[p]=i.getBigInt64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[p]=i.getBigUint64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[p]=i.getFloat64(s+(r.bigEndian?8:0),!r.bigEndian);continue}h[p]=i[b](s,!r.bigEndian)}}}function JQ(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Cg(e,n):Cg(e)(n,r)}return t}const xn=Object.fromEntries(WQ.map(e=>[e,JQ(e)]));function QQ(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const uo={root:"/",pwd:"/",credentials:QQ({uid:0,gid:0}),descriptors:new Map};function yP(e,t){let n="",r=0,a=-1,i=0,s="\0";for(let o=0;o<=e.length;++o){if(o<e.length)s=e[o];else{if(s=="/")break;s="/"}if(s=="/"){if(!(a===o-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),a=o,i=0;continue}else if(n.length!==0){n="",r=0,a=o,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,i=0}else s==="."&&i!==-1?++i:i=-1}return n}function Ql(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:uo.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=yP(n,!r),r?`/${n}`:n.length?n:"/"}function eee(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=yP(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function ur(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?eee(t):"."}function bP(e,t){if(e===t||(e=Ql.call(this,e),t=Ql.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,s=t.length-i,o=a<s?a:s;let l=-1,u=0;for(;u<o;u++){const h=e[n+u];if(h!==t[i+u])break;h==="/"&&(l=u)}if(u===o)if(s>o){if(t[i+u]==="/")return t.slice(i+u+1);if(u===0)return t.slice(i+u)}else a>o&&(e[n+u]==="/"?l=u:u===0&&(l=0));let d="";for(u=n+l+1;u<=r;++u)(u===r||e[u]==="/")&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(i+l)}`}function ir(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function Ph(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function Do(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,s=-1,o=!0,l=e.length-1,u=0;for(;l>=r;--l){if(e[l]==="/"){if(!o){i=l+1;break}continue}s===-1&&(o=!1,s=l+1),e[l]==="."?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}if(s!==-1){const d=i===0&&t?1:i;a===-1||u===0||u===1&&a===s-1&&a===i+1?n.base=n.name=e.slice(d,s):(n.name=e.slice(d,a),n.base=e.slice(d,s),n.ext=e.slice(a,s))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var vn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(vn||(vn={}));vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";const tee=new zQ;function nee(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};tee.add(n),uee(n)}function ree(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+ur(i,e.path)}function ku(e){return function(t,n={}){return nee(e,ree(t,n)),t}}ku(vn.EMERG);const aee=ku(vn.ALERT),wx=ku(vn.CRIT),Oi=ku(vn.ERR),ii=ku(vn.WARN),Yk=ku(vn.NOTICE),vP=ku(vn.INFO),Jm=ku(vn.DEBUG);function iee(e,t){return`\x1B[${t}m${e}\x1B[0m`}function see(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[iee(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";let oee=e=>[...see(e),e.message];function lee(e){const t=oee(e);return typeof t=="string"?[t]:Array.from(t)}let cee=console.error;function uee(e){e.level>dee||cee(...lee(e))}let dee=vn.ALERT;function Xk(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function fee(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function hee(e,t){if(typeof t!="object"||t===null)throw Oi(new Ue(lt.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){Jm("Using default for option: "+n);continue}throw Oi(new Ue(lt.EINVAL,"Missing required option: "+n))}const i=(u,d=a)=>{var h;return typeof u=="function"?Symbol.hasInstance in u&&u.prototype?a instanceof u:u(a):typeof a===u||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===u};if(Array.isArray(r.type)?r.type.some(u=>i(u)):i(r.type))continue;const s=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,o=u=>typeof u=="function"?u.name!="type"?u.name:u.toString():u,l=Array.isArray(r.type)?`one of ${r.type.map(o).join(", ")}`:o(r.type);throw Oi(new Ue(lt.EINVAL,`Incorrect type for "${n}": ${s} (expected ${l})`))}}function wP(e){return e!=null&&typeof e=="object"&&"backend"in e&&Xk(e.backend)}const Jk=0,Ea=4,na=2,Sv=1,Qk=1,pee=2,mee=4,xP=0,ri=1,Hl=2,xx=64,_x=128,gee=256,Sx=512,Fd=1024,yee=65536,bee=262144,vee=131072,Ex=1052672,wee=4096,xee=32768,_ee=16384,See=2048,kr=61440,Yd=49152,oc=40960,Js=32768,Xd=24576,ma=16384,Jd=8192,Qd=4096,b0=2048,v0=1024,Eee=512,Cee=448,_P=256,SP=128,EP=64,kee=56,CP=32,kP=16,TP=8,Tee=7,AP=4,NP=2,RP=1,Aee=0,_i=4294967295,IP=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:Qk,COPYFILE_FICLONE:pee,COPYFILE_FICLONE_FORCE:mee,F_OK:Jk,O_APPEND:Fd,O_CREAT:xx,O_DIRECT:_ee,O_DIRECTORY:yee,O_DSYNC:wee,O_EXCL:_x,O_NOATIME:bee,O_NOCTTY:gee,O_NOFOLLOW:vee,O_NONBLOCK:See,O_RDONLY:xP,O_RDWR:Hl,O_SYMLINK:xee,O_SYNC:Ex,O_TRUNC:Sx,O_WRONLY:ri,R_OK:Ea,S_IFBLK:Xd,S_IFCHR:Jd,S_IFDIR:ma,S_IFIFO:Qd,S_IFLNK:oc,S_IFMT:kr,S_IFREG:Js,S_IFSOCK:Yd,S_IRGRP:CP,S_IROTH:AP,S_IRUSR:_P,S_IRWXG:kee,S_IRWXO:Tee,S_IRWXU:Cee,S_ISGID:v0,S_ISUID:b0,S_ISVTX:Eee,S_IWGRP:kP,S_IWOTH:NP,S_IWUSR:SP,S_IXGRP:TP,S_IXOTH:RP,S_IXUSR:EP,UV_FS_O_FILEMAP:Aee,W_OK:na,X_OK:Sv,size_max:_i},Symbol.toStringTag,{value:"Module"})),Wb=BigInt(1e3);class jP{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:s,size:o,mode:l,ino:u,...d}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(s??0),this.size=this._convert(o??0),this.ino=this._convert(u??0),this.mode=this._convert(l??420&Js),(this.mode&kr)==0&&(this.mode=this.mode|this._convert(Js)),Object.assign(this,d)}isFile(){return(this.mode&kr)===Js}isDirectory(){return(this.mode&kr)===ma}isSymbolicLink(){return(this.mode&kr)===oc}isSocket(){return(this.mode&kr)===Yd}isBlockDevice(){return(this.mode&kr)===Xd}isCharacterDevice(){return(this.mode&kr)===Jd}isFIFO(){return(this.mode&kr)===Qd}toJSON(){return Kd(this,xC)}hasAccess(t,n){return pr(n,this._isBigint?new lc(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*Wb}get mtimeNs(){return BigInt(this.mtimeMs)*Wb}get ctimeNs(){return BigInt(this.ctimeMs)*Wb}get birthtimeNs(){return BigInt(this.birthtimeMs)*Wb}}function OP(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<_i?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<_i?e.gid=n:r=!1,r}class lc extends jP{constructor(){super(...arguments),this._isBigint=!1}}class ef extends jP{constructor(){super(...arguments),this._isBigint=!0}}function Nee(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class Ree{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=_i,this.ffree=_i}}class Iee{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(_i),this.ffree=BigInt(_i)}}var Mr=function(e,t,n,r,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,p=!1,y=n.length-1;y>=0;y--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var w=(0,n[y])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=s(w.get))&&(d.get=h),(h=s(w.set))&&(d.set=h),(h=s(w.init))&&a.unshift(h)}else(h=s(w))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),p=!0},bn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},eT=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const Yi=0,jee=1024;let fj=(()=>{var e,t;let n=[Zd()],r,a=[],i,s,o=[],l=[],u,d=[],h=[],p,y=[],v=[],b,w=[],x=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=bn(this,o,0),this.valueSize=(bn(this,l),bn(this,d,0)),this._key=(bn(this,h),bn(this,y,"")),this._value=(bn(this,v),bn(this,w,new Uint8Array(jee))),bn(this,x),S&&(this.key=S),E&&(this.value=E)}},eT(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[(e=xn).uint32.bind(e)],u=[(t=xn).uint32.bind(t)],p=[xn.char("keySize")],b=[xn.uint8("valueSize")],Mr(null,null,s,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},o,l),Mr(null,null,u,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},d,h),Mr(null,null,p,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},y,v),Mr(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},w,x),Mr(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),bn(i,a)})(),i})(),yu=(()=>{var e;let t=[Zd()],n,r=[],a,i,s=[],o=[],l,u=[],d=[];return a=class{has(h){return this.data.some(p=>p.key==h)}get(h){return this.data.find(p=>p.key==h)}set(h,p){const y=this.get(h);if(y){y.value=p;return}this.data.push(new fj(h,p)),this.size++}remove(h){const p=this.data.findIndex(y=>y.key==h);return p===-1?!1:(this.data.splice(p,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=bn(this,s,0),this.data=(bn(this,o),bn(this,u,[])),bn(this,d)}},eT(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=xn).uint32.bind(e)],l=[Cg(fj,"size")],Mr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:p=>"size"in p,get:p=>p.size,set:(p,y)=>{p.size=y}},metadata:h},s,o),Mr(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:p=>"data"in p,get:p=>p.data,set:(p,y)=>{p.data=y}},metadata:h},u,d),Mr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),bn(a,r)})(),a})();const xC=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],Oee=4;var Di;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Di||(Di={}));let pa=(()=>{var e,t,n,r,a,i,s,o,l,u,d,h,p,y,v,b;let w=[Zd()],x,S=[],E,C,k=[],I=[],R,j=[],L=[],B,Z=[],P=[],K,q=[],de=[],ae,te=[],X=[],re,D=[],J=[],Q,ie=[],me=[],ve,Me=[],Ae=[],Re,ke=[],Fe=[],et,Le=[],Ie=[],z,Se=[],Te=[],ue,oe=[],ee=[],xe,Pe=[],Ee=[],We,Nt=[],it=[],_t,Ft=[],Pt=[],Zt,ye=[],O=[],G,fe=[],je=[],be,Ce=[],le=[];var ft=E=class{constructor(vt){if(this.data=bn(this,k,vC(0,_i)),this.__data_old=(bn(this,I),bn(this,j,0)),this.size=(bn(this,L),bn(this,Z,0)),this.mode=(bn(this,P),bn(this,q,0)),this.nlink=(bn(this,de),bn(this,te,1)),this.uid=(bn(this,X),bn(this,D,0)),this.gid=(bn(this,J),bn(this,ie,0)),this.atimeMs=(bn(this,me),bn(this,Me,Date.now())),this.birthtimeMs=(bn(this,Ae),bn(this,ke,Date.now())),this.mtimeMs=(bn(this,Fe),bn(this,Le,Date.now())),this.ctimeMs=(bn(this,Ie),bn(this,Se,Date.now())),this.ino=(bn(this,Te),bn(this,oe,vC(0,_i))),this.__ino_old=(bn(this,ee),bn(this,Pe,0)),this.flags=(bn(this,Ee),bn(this,Nt,0)),this.__after_flags=(bn(this,it),bn(this,Ft,0)),this.version=(bn(this,Pt),bn(this,ye,0)),this.__padding=(bn(this,O),bn(this,fe,[])),this.attributes=(bn(this,je),bn(this,Ce,new yu)),bn(this,le),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<Hr(ft))throw wx(new Ue(lt.EIO,"Buffer is too small to create an inode"));vx(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...Kd(this,xC),attributes:this.attributes}}toStats(){return new lc(this)}update(vt){if(!vt)return!1;let F=!1;for(const Be of xC)vt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==vt[Be]&&(Be=="atimeMs"&&this.flags&Di.NoAtime||(this[Be]=vt[Be],F=!0)));return vt.attributes&&(this.attributes=vt.attributes,F=!0),F&&(this.ctimeMs=Date.now()),F}};return eT(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=xn).uint32.bind(e)],R=[(t=xn).uint32.bind(t)],B=[(n=xn).uint32.bind(n)],K=[(r=xn).uint16.bind(r)],ae=[(a=xn).uint32.bind(a)],re=[(i=xn).uint32.bind(i)],Q=[(s=xn).uint32.bind(s)],ve=[(o=xn).float64.bind(o)],Re=[(l=xn).float64.bind(l)],et=[(u=xn).float64.bind(u)],z=[(d=xn).float64.bind(d)],ue=[(h=xn).uint32.bind(h)],xe=[(p=xn).uint32.bind(p)],We=[(y=xn).uint32.bind(y)],_t=[(v=xn).uint16.bind(v)],Zt=[(b=xn).uint32.bind(b)],G=[xn.uint8(48)],be=[Cg(yu)],Mr(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:F=>"data"in F,get:F=>F.data,set:(F,Be)=>{F.data=Be}},metadata:vt},k,I),Mr(null,null,R,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:F=>"__data_old"in F,get:F=>F.__data_old,set:(F,Be)=>{F.__data_old=Be}},metadata:vt},j,L),Mr(null,null,B,{kind:"field",name:"size",static:!1,private:!1,access:{has:F=>"size"in F,get:F=>F.size,set:(F,Be)=>{F.size=Be}},metadata:vt},Z,P),Mr(null,null,K,{kind:"field",name:"mode",static:!1,private:!1,access:{has:F=>"mode"in F,get:F=>F.mode,set:(F,Be)=>{F.mode=Be}},metadata:vt},q,de),Mr(null,null,ae,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:F=>"nlink"in F,get:F=>F.nlink,set:(F,Be)=>{F.nlink=Be}},metadata:vt},te,X),Mr(null,null,re,{kind:"field",name:"uid",static:!1,private:!1,access:{has:F=>"uid"in F,get:F=>F.uid,set:(F,Be)=>{F.uid=Be}},metadata:vt},D,J),Mr(null,null,Q,{kind:"field",name:"gid",static:!1,private:!1,access:{has:F=>"gid"in F,get:F=>F.gid,set:(F,Be)=>{F.gid=Be}},metadata:vt},ie,me),Mr(null,null,ve,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:F=>"atimeMs"in F,get:F=>F.atimeMs,set:(F,Be)=>{F.atimeMs=Be}},metadata:vt},Me,Ae),Mr(null,null,Re,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:F=>"birthtimeMs"in F,get:F=>F.birthtimeMs,set:(F,Be)=>{F.birthtimeMs=Be}},metadata:vt},ke,Fe),Mr(null,null,et,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:F=>"mtimeMs"in F,get:F=>F.mtimeMs,set:(F,Be)=>{F.mtimeMs=Be}},metadata:vt},Le,Ie),Mr(null,null,z,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:F=>"ctimeMs"in F,get:F=>F.ctimeMs,set:(F,Be)=>{F.ctimeMs=Be}},metadata:vt},Se,Te),Mr(null,null,ue,{kind:"field",name:"ino",static:!1,private:!1,access:{has:F=>"ino"in F,get:F=>F.ino,set:(F,Be)=>{F.ino=Be}},metadata:vt},oe,ee),Mr(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:F=>"__ino_old"in F,get:F=>F.__ino_old,set:(F,Be)=>{F.__ino_old=Be}},metadata:vt},Pe,Ee),Mr(null,null,We,{kind:"field",name:"flags",static:!1,private:!1,access:{has:F=>"flags"in F,get:F=>F.flags,set:(F,Be)=>{F.flags=Be}},metadata:vt},Nt,it),Mr(null,null,_t,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:F=>"__after_flags"in F,get:F=>F.__after_flags,set:(F,Be)=>{F.__after_flags=Be}},metadata:vt},Ft,Pt),Mr(null,null,Zt,{kind:"field",name:"version",static:!1,private:!1,access:{has:F=>"version"in F,get:F=>F.version,set:(F,Be)=>{F.version=Be}},metadata:vt},ye,O),Mr(null,null,G,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:F=>"__padding"in F,get:F=>F.__padding,set:(F,Be)=>{F.__padding=Be}},metadata:vt},fe,je),Mr(null,null,be,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:F=>"attributes"in F,get:F=>F.attributes,set:(F,Be)=>{F.attributes=Be}},metadata:vt},Ce,le),Mr(null,x={value:E},w,{kind:"class",name:E.name,metadata:vt},null,S),ft=E=x.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),bn(E,S)})(),ft=E})();function Dee(e){return(e.mode&kr)===Js}function ao(e){return(e.mode&kr)===ma}function Fh(e){return(e.mode&kr)===oc}function Mee(e){return(e.mode&kr)===Yd}function kg(e){return(e.mode&kr)===Xd}function Tg(e){return(e.mode&kr)===Jd}function Pee(e){return(e.mode&kr)===Qd}function pr(e,t,n){const r=(e==null?void 0:e.credentials)||uo.credentials;if(Fh(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&_P&&(a|=Ea),t.mode&SP&&(a|=na),t.mode&EP&&(a|=Sv)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&CP&&(a|=Ea),t.mode&kP&&(a|=na),t.mode&TP&&(a|=Sv)),t.mode&AP&&(a|=Ea),t.mode&NP&&(a|=na),t.mode&RP&&(a|=Sv),(a&n)===n}const hj=1;class cw extends Map{constructor(){super(...arguments),this.maxSize=_i}toJSON(){return{version:hj,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Hr(pa);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&kr)!=ma)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())ir(a)==t&&a!=t&&(r[Ph(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&kr)!=ma)continue;const a={};for(const i of this.keys())ir(i)==n&&i!=n&&(a[Ph(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=hj)throw new Ue(lt.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=vC(1,_i)),r=="/"&&(a.ino=0),this.set(r,new pa(a));return this}static parse(t){if(!UQ(t))throw new Ue(lt.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new cw;return r.fromJSON(n),r}}const HS=4096;let tT=class _C{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===_C.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===_C.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:s=a}=n;for(let o=i;o<s;o+=HS){const l=o+HS>s?s-o:HS,u=new Uint8Array(l);await this.read(t,u,o,o+l).catch(r.error.bind(r)),r.enqueue(u)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,s)=>{let o=!1;const l=d=>{o=!0,s.error(d)},{size:u}=await this.stat(t);await this.write(t,i,a).catch(l),!o&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(u,a)}).catch(l))}})}};function yi(e){return JSON.parse(Vk(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function bs(e){return vd(JSON.stringify(e))}function Tu(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(lt.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function uw(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(lt.EINVAL,"Invalid time.")}}function hn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(lt.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(lt.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(lt.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Ql(e)}function ql(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:Tu("mode"in e?e==null?void 0:e.mode:null,r)}}class Fee{constructor(t,n,r,a){ha(this,"id");ha(this,"_size");ha(this,"options");ha(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,s)=>i.start-s.start),r.ranges=r.ranges.reduce((i,s)=>(!i.length||i.at(-1).end<s.start?i.push(s):i.at(-1).end=Math.max(i.at(-1).end,s.end),i),[]),r.data=Sg(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const s of i.ranges)if(!(s.end<=t)){if(s.start>=n)break;r.push({start:Math.max(t,s.start),end:Math.min(n,s.end)})}}r.sort((i,s)=>i.start-s.start);const a=[];for(const i of r){const s=a.at(-1);s&&i.start<=s.end?s.end=Math.max(s.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=Sg(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((o,l)=>o.start-l.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},s=this.regions.findIndex(o=>o.offset>n);return s==-1?this.regions.push(i):this.regions.splice(s,0,i),this.collect(),this}}var qS,VS,GS;(qS=Promise.withResolvers)!==null&&qS!==void 0||(Promise.withResolvers=(ii("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(VS=Symbol.dispose)!==null&&VS!==void 0||(Symbol.dispose=(ii("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(GS=Symbol.asyncDispose)!==null&&GS!==void 0||(Symbol.asyncDispose=(ii("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class DP{constructor(t){this.store=t}}class Lee extends DP{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class SC extends DP{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new Fee(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const s=i.missing(n,r);for(const{start:l,end:u}of s)this.async(this.get(t,l,u));if(s.length)throw Oi(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const o=i.regionAt(n);if(!o){ii("Missing cache region for "+t);return}return o.data.subarray(n-o.offset,r-o.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class $ee{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof SC))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof SC))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Or=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Dr=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class MP extends tT{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const s=bP(t,a);if(s.startsWith(".."))continue;let o=ur(n,s);o.endsWith("/")&&(o=o.slice(0,-1)),r.push({oldKey:a,newKey:o,ino:i})}for(const{oldKey:a,newKey:i,ino:s}of r){this._ids.delete(a),this._ids.set(i,s);const o=this._paths.get(s);if(!o){ii("Missing paths in table for ino "+s);continue}o.delete(a),o.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,Jm(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!0),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),await r.set(s.ino,Ka(s)),a.has(i)&&await r.set(s.data,bs(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Dr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!1),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),r.setSync(s.ino,Ka(s)),a.has(i)&&r.setSync(s.data,bs(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Dr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new cw,a=Or(n,this.transaction(),!0),i=[["/",0]],s=oj(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new pa(await a.get(l));if(r.set(o,u),u.mode&ma){const d=yi((t=await a.get(u.data))!==null&&t!==void 0?t:br(Ue.With("ENODATA",o)));for(const[h,p]of Object.entries(d))i.push([ur(o,h),p])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Dr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new cw,a=Or(n,this.transaction(),!1),i=[["/",0]],s=oj(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new pa(a.getSync(l));if(r.set(o,u),u.mode&ma){const d=yi((t=a.getSync(u.data))!==null&&t!==void 0?t:br(Ue.With("ENODATA",o)));for(const[h,p]of Object.entries(d))i.push([ur(o,h),p])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{Dr(n)}}async rename(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!0),l=Do(t),u=Do(n),d=await this.findInode(o,l.dir,"rename"),h=yi((r=await o.get(d.data))!==null&&r!==void 0?r:br(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const p=h[l.base];if(p!=this._ids.get(t)&&Oi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const y=u.dir==l.dir,v=y?d:await this.findInode(o,u.dir,"rename"),b=y?h:yi((a=await o.get(v.data))!==null&&a!==void 0?a:br(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const w=new pa((i=await o.get(b[u.base]))!==null&&i!==void 0?i:br(Ue.With("ENOENT",n,"rename")));if(!w.toStats().isFile())throw Ue.With("EPERM",n,"rename");await o.remove(w.data),await o.remove(b[u.base])}b[u.base]=p,await o.set(d.data,bs(h)),await o.set(v.data,bs(b)),await o.commit(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{const o=Dr(s);o&&await o}}renameSync(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!1),l=Do(t),u=Do(n),d=this.findInodeSync(o,l.dir,"rename"),h=yi((r=o.getSync(d.data))!==null&&r!==void 0?r:br(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const p=h[l.base];if(p!=this._ids.get(t)&&Oi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const y=u.dir===l.dir,v=y?d:this.findInodeSync(o,u.dir,"rename"),b=y?h:yi((a=o.getSync(v.data))!==null&&a!==void 0?a:br(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const w=new pa((i=o.getSync(b[u.base]))!==null&&i!==void 0?i:br(Ue.With("ENOENT",n,"rename")));if(!w.toStats().isFile())throw Ue.With("EPERM",n,"rename");o.removeSync(w.data),o.removeSync(b[u.base])}b[u.base]=p,o.setSync(d.data,bs(h)),o.setSync(v.data,bs(b)),o.commitSync(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{Dr(s)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Dr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Dr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ka(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Dr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ka(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Dr(r)}}async createFile(t,n){return n.mode|=Js,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=Js,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=ma,await this.commitNew(t,n,vd("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=ma,this.commitNewSync(t,n,vd("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(yi((n=await a.get(i.data))!==null&&n!==void 0?n:br(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Dr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(yi((n=a.getSync(i.data))!==null&&n!==void 0?n:br(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Dr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!0),s=await this.findInode(i,t,"sync");n&&await i.set(s.data,n),s.update(r)&&(this._add(s.ino,t),await i.set(s.ino,Ka(s))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Dr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!1),s=this.findInodeSync(i,t,"sync");n&&i.setSync(s.data,n),s.update(r)&&(this._add(s.ino,t),i.setSync(s.ino,Ka(s))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Dr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!0),s=ir(n),o=await this.findInode(i,s,"link"),l=yi((r=await i.get(o.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",s,"link"))),u=await this.findInode(i,t,"link");u.nlink++,l[Ph(n)]=u.ino,this._add(u.ino,n),await i.set(u.ino,Ka(u)),await i.set(o.data,bs(l)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Dr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!1),s=ir(n),o=this.findInodeSync(i,s,"link"),l=yi((r=i.getSync(o.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",s,"link"))),u=this.findInodeSync(i,t,"link");u.nlink++,l[Ph(n)]=u.ino,this._add(u.ino,n),i.setSync(u.ino,Ka(u)),i.setSync(o.data,bs(l)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Dr(a)}}async read(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!0),l=await this.findInode(o,t,"read");if(l.size==0)return;const u=(i=await o.get(l.data,r,a))!==null&&i!==void 0?i:br(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Oi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{const o=Dr(s);o&&await o}}readSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!1),l=this.findInodeSync(o,t,"read");if(l.size==0)return;const u=(i=o.getSync(l.data,r,a))!==null&&i!==void 0?i:br(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Oi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{Dr(s)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Or(i,this.transaction(),!0),o=await this.findInode(s,t,"write");let l=n;s.flag("partial")||(l=Sg((a=await s.get(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await s.set(o.data,l,r),this._add(o.ino,t),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Dr(i);s&&await s}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Or(i,this.transaction(),!1),o=this.findInodeSync(s,t,"write");let l=n;s.flag("partial")||(l=Sg((a=s.getSync(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),s.setSync(o.data,l,r),this._add(o.ino,t),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Dr(i)}}transaction(){return new $ee(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Or(t,this.transaction(),!0);if(await n.get(Yi))return;const r=new pa({ino:Yi,data:1,mode:511|ma});await n.set(r.data,vd("{}")),this._add(Yi,"/"),await n.set(Yi,Ka(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Dr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Or(t,this.transaction(),!1);if(n.getSync(Yi))return;const r=new pa({ino:Yi,data:1,mode:511|ma});n.setSync(r.data,vd("{}")),this._add(Yi,"/"),n.setSync(Yi,Ka(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Dr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){ii("Attempted to populate tables after initialization");return}Jm("Populating tables with existing store metadata");const n=Or(t,this.transaction(),!0),r=await n.get(Yi);if(!r){Yk("Store does not have a root inode");const o=new pa({ino:Yi,data:1,mode:511|ma});await n.set(o.data,vd("{}")),this._add(Yi,"/"),await n.set(Yi,Ka(o)),await n.commit();return}if(r.length<Hr(pa)){wx("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const s=[["/",Yi]];for(;s.length>0;){i++;const[o,l]=s.shift();this._add(l,o);const u=await n.get(l);if(!u){ii("Store is missing data for inode: "+l);continue}if(u.length<Hr(pa)){ii(`Invalid inode size for ino ${l}: ${u.length}`);continue}const d=new pa(u);if((d.mode&ma)!=ma||a.has(l))continue;a.add(l);const h=await n.get(d.data);if(!h){ii("Store is missing directory data: "+d.data);continue}const p=yi(h);for(const[y,v]of Object.entries(p))s.push([ur(o,y),v])}Jm(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Dr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new pa((a=await t.get(i))!==null&&a!==void 0?a:br(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new pa((a=t.getSync(i))!==null&&a!==void 0?a:br(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>_i)throw Oi(new Ue(lt.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Or(s,this.transaction(),!0),{dir:l,base:u}=Do(t),d=await this.findInode(o,l,a),h=yi((i=await o.get(d.data))!==null&&i!==void 0?i:br(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),y=new pa({...n,ino:p,data:p+1,size:r.byteLength});return await o.set(y.ino,Ka(y)),await o.set(y.data,r),h[u]=y.ino,await o.set(d.data,bs(h)),await o.commit(),y}catch(o){s.error=o,s.hasError=!0}finally{const o=Dr(s);o&&await o}}commitNewSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Or(s,this.transaction(),!1),{dir:l,base:u}=Do(t),d=this.findInodeSync(o,l,a),h=yi((i=o.getSync(d.data))!==null&&i!==void 0?i:br(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),y=new pa({...n,ino:p,data:p+1,size:r.byteLength});return o.setSync(y.ino,Ka(y)),o.setSync(y.data,r),h[u]=y.ino,o.setSync(d.data,bs(h)),o.commitSync(),y}catch(o){s.error=o,s.hasError=!0}finally{Dr(s)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Or(i,this.transaction(),!0),{dir:l,base:u}=Do(t),d=await this.findInode(o,l,s),h=yi((r=await o.get(d.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",l,s)));if(!h[u])throw Ue.With("ENOENT",t,s);const p=h[u],y=new pa((a=await o.get(p))!==null&&a!==void 0?a:br(Ue.With("ENOENT",t,s)));if(delete h[u],!n&&ao(y))throw Ue.With("EISDIR",t,s);await o.set(d.data,bs(h)),y.nlink>1?(y.update({nlink:y.nlink-1}),await o.set(y.ino,Ka(y))):(await o.remove(y.data),await o.remove(p),this._remove(p)),await o.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Dr(i);s&&await s}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Or(i,this.transaction(),!1),{dir:l,base:u}=Do(t),d=this.findInodeSync(o,l,s),h=yi((r=o.getSync(d.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",l,s))),p=h[u];if(!p)throw Ue.With("ENOENT",t,s);const y=new pa((a=o.getSync(p))!==null&&a!==void 0?a:br(Ue.With("ENOENT",t,s)));if(delete h[u],!n&&ao(y))throw Ue.With("EISDIR",t,s);o.setSync(d.data,bs(h)),y.nlink>1?(y.update({nlink:y.nlink-1}),o.setSync(y.ino,Ka(y))):(o.removeSync(y.data),o.removeSync(p),this._remove(p)),o.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Dr(i)}}}class Bee extends Lee{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class zee extends Map{constructor(t=_i,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new Bee(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const Uee={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new MP(new zee(e,t));return n.checkRootSync(),n}},Hee=Uee;let Ca=!0;class pj extends Hk{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let s=this._buffer.indexOf(`
`);s>=0;s=this._buffer.indexOf(`
`)){let o=this._buffer.substring(0,s);o.endsWith("\r")&&(o=o.substring(0,o.length-1)),this._buffer=this._buffer.substring(s+1),this.line=o,o.trim()&&!o.trim().match(/^\s*$/)&&this._history.at(-1)!=o&&(this._history.push(o),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",o)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;vs(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;vs(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);Kb(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);Kb(this.output,0),vs(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,vs(this.output,-a.length,0),vs(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;vs(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(vs(this.output,-this._cursor,0),vs(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);Kb(this.output,0),vs(this.output,0,0),this.output.write(this._prompt+r),this.line=r,vs(this.output,-r.length,0),vs(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(Kb(this.output,0),vs(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return ii("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return ii("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function qee(e,t,n,r){return"input"in e?new pj(e.input,e.output,e.completer,e.terminal):new pj(e,t,n,r)}function Kb(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function vs(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class dw{get position(){return this.flag&Fd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,s){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=s,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&Ex||this.inode.flags&Di.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&ri||this.flag&Hl))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&ri||this.flag&Hl))throw new Ue(lt.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Di.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!Tg(this.inode)&&!kg(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,this.fs.writeSync(this.internalPath,s,a),this._isSync&&this.sync(),s.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ri)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Di.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Tg(this.inode)&&!kg(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>kr?-61441:kr)|t,(this._isSync||t>kr)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,OP(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Di.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function fw(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:uo.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function di(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:uo.descriptors).get(t);if(!a)throw new Ue(lt.EBADF);return a}function PP(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:uo.descriptors).delete(t)}const Vee=/[rwasx]{1,2}\+?/;function Vl(e){if(typeof e=="number")return e;if(!Vee.test(e))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);return Gee(e)}function Gee(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?xP:xx;return e.includes("w")&&(t|=Sx),e.includes("a")&&(t|=Fd),e.includes("+")?t|=Hl:e.includes("r")||(t|=ri),e.includes("s")&&(t|=Ex),e.includes("x")&&(t|=_x),t}function FP(e){let t=0;return e&ri||(t|=Ea),(e&ri||e&Hl)&&(t|=na),t}const Ag=new Map;nT("/",Hee.create({label:"root"}));function nT(e,t){if(e[0]!="/"&&(e="/"+e),e=Ql.call(this,e),Ag.has(e))throw Oi(new Ue(lt.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Ag.set(e,t),vP(`Mounted ${t.name} on ${e}`),Jm(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function LP(e){if(e[0]!="/"&&(e="/"+e),e=Ql.call(this,e),!Ag.has(e)){ii(e+" is already unmounted");return}Ag.delete(e),Yk("Unmounted "+e)}function Bn(e,t){const n=(t==null?void 0:t.root)||uo.root;e=hn(ur(n,e));const r=[...Ag].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(Kee(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw aee(new Ue(lt.EIO,"No file system",e))}function WS(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function mr(e,t){typeof e.stack=="string"&&(e.stack=WS(e.stack,t));try{e.message=WS(e.message,t)}catch{}return e.path&&(e.path=WS(e.path,t)),e}function $P(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||_i),files:(t?BigInt:Number)(n.totalNodes||_i),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function Wee(e){var t,n,r,a,i,s,o;const l=this!==null&&this!==void 0?this:uo;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=l.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(lt.EPERM,"Can not chroot() as non-root user");(i=l.root)!==null&&i!==void 0||(l.root="/");const u=ur(l.root,e);for(const d of(o=(s=l.descriptors)===null||s===void 0?void 0:s.values())!==null&&o!==void 0?o:[]){if(!d.path.startsWith(l.root))throw Ue.With("EBUSY",d.path,"chroot");d.path=d.path.slice(l.root.length)}if(u.length>l.root.length)throw new Ue(lt.EPERM,"Can not chroot() outside of current root");l.root=u}function Kee(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class BP extends Hk{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class zP extends BP{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?ur(t.root,n):n,Yee(this.realpath,this)}close(){super.emit("close"),Xee(this.realpath,this)}[Symbol.dispose](){this.close()}}class Zee extends BP{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=bu(this.path);Nee(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=bu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const eu=new Map;function Yee(e,t){const n=hn(e);eu.has(n)||eu.set(n,new Set),eu.get(n).add(t)}function Xee(e,t){const n=hn(e);eu.has(n)&&(eu.get(n).delete(t),eu.get(n).size===0&&eu.delete(n))}function Ya(e,t,n){var r;e&&(n=ur((r=e.root)!==null&&r!==void 0?r:"/",n)),n=hn(n);for(let a=n;a!="/";a=ir(a)){const i=eu.get(a);if(i)for(const s of i)s.emit("change",t,bP.call(s._context,a,n)||Ph(n))}}var w0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},x0=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function Jee(e,t){e=hn(e),t=hn(t);const n=Bn(e,this),r=Bn(t,this);if(!bu.call(this,ir(e)).hasAccess(na,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),Ya(this,"rename",e.toString()),Ya(this,"change",t.toString());return}oT.call(this,t,sT(e)),iT.call(this,e),Ya(this,"rename",e.toString())}catch(a){throw mr(a,{[n.path]:e,[r.path]:t})}}function rT(e){e=hn(e);try{const{fs:t,path:n}=Bn(Au.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==lt.ENOENT)return!1;throw t}}function bu(e,t){e=hn(e);const{fs:n,path:r}=Bn(Au.call(this,e),this);try{const a=n.statSync(r);if(Ca&&!pr(this,a,Ea))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new ef(a):new lc(a)}catch(a){throw mr(a,{[r]:e})}}function aT(e,t){e=hn(e);const{fs:n,path:r}=Bn(e,this);try{const a=n.statSync(r);if(Ca&&!pr(this,a,Ea))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new ef(a):new lc(a)}catch(a){throw mr(a,{[r]:e})}}function Qee(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=w0(n,tf.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(lt.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{x0(n)}}function iT(e){e=hn(e);const{fs:t,path:n}=Bn(e,this);try{if(Ca&&!pr(this,t.statSync(n),na))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}function tf(e,t){var n;e=hn(e);const r=Tu(t.mode,420),a=Vl(t.flag);e=t.preserveSymlinks?e:Au.call(this,e);const{fs:i,path:s}=Bn(e,this);let o;try{o=i.statSync(s)}catch{}if(!o){if(!(a&xx))throw Ue.With("ENOENT",e,"_open");const u=i.statSync(ir(s));if(!pr(this,u,na))throw Ue.With("EACCES",ir(e),"_open");if(!ao(u))throw Ue.With("ENOTDIR",ir(e),"_open");if(!t.allowDirectory&&r&ma)throw Ue.With("EISDIR",e,"_open");if(!pr(this,u,na))throw Ue.With("EACCES",ir(s),"_open");const{euid:d,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:uo.credentials,p=i.createFileSync(s,{mode:r,uid:u.mode&b0?u.uid:d,gid:u.mode&v0?u.gid:h});return new dw(this,e,i,s,a,p)}if(!pr(this,o,r)||!pr(this,o,FP(a)))throw Ue.With("EACCES",e,"_open");if(a&_x)throw Ue.With("EEXIST",e,"_open");const l=new dw(this,e,i,s,a,o);if(a&Sx&&l.truncate(0),!t.allowDirectory&&o.mode&ma)throw Ue.With("EISDIR",e,"_open");return l}function Cx(e,t,n=Jk){return fw(tf.call(this,e,{flag:t,mode:n}))}function kx(e,t,n){return fw(tf.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function UP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=w0(r,typeof e=="number"?di(this,e):tf.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),s=new Uint8Array(i);return a.read(s,0,i,0),s}catch(a){r.error=a,r.hasError=!0}finally{x0(r)}}function sT(e,t={}){const n=ql(t,null,"r",420);if(Vl(n.flag)&ri)throw new Ue(lt.EINVAL,"Flag passed to readFile must allow for reading");const a=Fr.from(UP.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function oT(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=ql(n,"utf8","w+",420),i=Vl(a.flag);if(!(i&ri||i&Hl))throw new Ue(lt.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Fr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!s)throw new Ue(lt.EINVAL,"Data not specified");w0(r,typeof e=="number"?di(this,e):tf.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength,0),Ya(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{x0(r)}}function ete(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=ql(n,"utf8","a+",420),i=Vl(a.flag);if(!(i&Fd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Fr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);w0(r,tf.call(this,typeof e=="number"?di(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{x0(r)}}function tte(e,t){const n=di(this,e).stat();return t!=null&&t.bigint?new ef(n):new lc(n)}function nf(e){di(this,e).close(),PP(this,e)}function nte(e,t=0){if(t||(t=0),t<0)throw new Ue(lt.EINVAL);di(this,e).truncate(t)}function rte(e){di(this,e).sync()}function ate(e){di(this,e).datasync()}function ite(e,t,n,r,a){let i,s,o,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";s=0,i=Fr.from(t,h),o=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n,o=r,l=typeof a=="number"?a:null;const u=di(this,e);l??(l=u.position);const d=u.write(i,s,o,l);return Ya(this,"change",u.path),d}function ste(e,t,n,r,a){const i=di(this,e),s=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,s,r,a)}function lT(e,t,n){di(this,e).chown(t,n)}function cT(e,t){const n=Tu(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode.");di(this,e).chmod(n)}function uT(e,t,n){di(this,e).utimes(uw(t),uw(n))}function HP(e){e=hn(e);const{fs:t,path:n}=Bn(Au.call(this,e),this);try{const r=t.statSync(n);if(!ao(r))throw Ue.With("ENOTDIR",n,"rmdir");if(Ca&&!pr(this,r,na))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}function dT(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:uo.credentials;t=typeof t=="object"?t:{mode:t};const s=Tu(t==null?void 0:t.mode,511);e=Au.call(this,e);const{fs:o,path:l,root:u}=Bn(e,this),d={[l]:e},h=(p,y)=>{if(!pr(this,y,na))throw Ue.With("EACCES",ir(p),"mkdir");const v=o.mkdirSync(p,{mode:s,uid:y.mode&b0?y.uid:a,gid:y.mode&v0?y.gid:i});return Ya(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){h(l,o.statSync(ir(l)));return}const p=[];for(let v=l,b=e;!o.existsSync(v);v=ir(v),b=ir(b))p.unshift(v),d[v]=b;if(!p.length)return;const y=[o.statSync(ir(p[0]))];for(const[v,b]of p.entries())y.push(h(b,y[v]));return u.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(u.length)}catch(p){throw mr(p,d)}}function ip(e,t){t=typeof t=="object"?t:{encoding:t},e=hn(e);const{fs:n,path:r}=Bn(Au.call(this,e),this);let a;try{const s=n.statSync(r);if(Ca&&!pr(this,s,Ea))throw Ue.With("EACCES",r,"readdir");if(!ao(s))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(s){throw mr(s,{[r]:e})}const i=[];for(const s of a){let o;try{o=n.statSync(ur(r,s))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new Ng(s,o)):(t==null?void 0:t.encoding)=="buffer"?i.push(Fr.from(s)):i.push(s),!(!ao(o)||!(t!=null&&t.recursive)))for(const l of ip.call(this,ur(e,s),t))l instanceof Ng?(l.path=ur(s,l.path),i.push(l)):Fr.isBuffer(l)?i.push(Fr.from(ur(s,Vk(l)))):i.push(ur(s,l))}return i}function ote(e,t){if(e=hn(e),!bu(ir(e)).hasAccess(Ea,this))throw Ue.With("EACCES",ir(e),"link");if(t=hn(t),!bu(ir(t)).hasAccess(na,this))throw Ue.With("EACCES",ir(t),"link");const{fs:n,path:r}=Bn(e,this),a=Bn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(Ca&&!pr(this,n.statSync(r),Ea))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw mr(i,{[r]:e,[a.path]:t})}}function lte(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid type: "+n);t=hn(t);const a=w0(r,tf.call(this,t,{flag:"wx",mode:420}),!1);a.write(vd(hn(e,!0))),a.chmod(oc)}catch(a){r.error=a,r.hasError=!0}finally{x0(r)}}function EC(e,t){const n=Fr.from(UP.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function cte(e,t,n){const r=Cx.call(this,e,"r+");lT.call(this,r,t,n),nf.call(this,r)}function ute(e,t,n){const r=kx.call(this,e,"r+");lT.call(this,r,t,n),nf.call(this,r)}function dte(e,t){const n=Cx.call(this,e,"r+");cT.call(this,n,t),nf.call(this,n)}function fte(e,t){const n=kx.call(this,e,"r+");cT.call(this,n,t),nf.call(this,n)}function qP(e,t,n){const r=Cx.call(this,e,"r+");uT.call(this,r,t,n),nf.call(this,r)}function hte(e,t,n){const r=kx.call(this,e,"r+");uT.call(this,r,t,n),nf.call(this,r)}function CC(e,t,n){try{const l=Bn(t,e),u=l.fs.statSync(l.path);if(!Fh(u))return{...l,fullPath:t,stats:u};const d=Ql.call(e,ir(t),EC.call(e,t).toString());return CC(e,d)}catch{}const{base:r,dir:a}=Do(t),i=a=="/"?"/":Au.call(e,a),s=ur(i,r),o=Bn(s,e);try{const l=o.fs.statSync(o.path);if(!Fh(l))return{...o,fullPath:s,stats:l};const u=Ql.call(e,i,EC.call(e,s).toString());return CC(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw mr(l,{[o.path]:s})}}function Au(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=CC(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Fr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function pte(e,t=384){if(!pr(this,bu.call(this,e),t))throw new Ue(lt.EACCES)}function VP(e,t){e=hn(e);let n;try{n=aT.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&kr){case ma:if(t!=null&&t.recursive)for(const r of ip.call(this,e))VP.call(this,ur(e,r),t);HP.call(this,e);break;case Js:case oc:case Xd:case Jd:iT.call(this,e);break;case Qd:case Yd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}function mte(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return dT.call(this,a),n=="buffer"?Fr.from(a):a}function GP(e,t,n){if(e=hn(e),t=hn(t),n&&n&Qk&&rT(t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");oT.call(this,t,sT(e)),Ya(this,"rename",t.toString())}function gte(e,t,n){const r=di(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function yte(e,t,n){const r=di(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function bte(e,t){return e=hn(e),new fT(e,this)}function WP(e,t,n){e=hn(e),t=hn(t);const r=aT.call(this,e);if(n!=null&&n.errorOnExist&&rT.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&kr){case ma:if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");dT.call(this,t,{recursive:!0});for(const a of ip.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(ur(e,a.name),ur(t,a.name))||WP.call(this,ur(e,a.name),ur(t,a.name),n);break;case Js:case oc:GP.call(this,e,t);break;case Xd:case Jd:case Qd:case Yd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&qP.call(this,t,r.atime,r.mtime)}function vte(e,t){e=hn(e);const{fs:n}=Bn(e,this);return $P(n,t==null?void 0:t.bigint)}function wte(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),s=[];function o(l){const u=ip(l,{withFileTypes:r,encoding:"utf8"});for(const d of u){const h=r?d.path:l+"/"+d;a(r?d:h)||(bu(h).isDirectory()&&i.some(p=>p.source.includes(".*"))&&o(h),i.some(p=>p.test(h.replace(/^\/+/g,"")))&&s.push(r?d.path:h.replace(/^\/+/g,"")))}}return o(n),s}class Ng{get name(){return Ph(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return Dee(this.stats)}isDirectory(){return ao(this.stats)}isBlockDevice(){return kg(this.stats)}isCharacterDevice(){return Tg(this.stats)}isSymbolicLink(){return Fh(this.stats)}isFIFO(){return Pee(this.stats)}isSocket(){return Mee(this.stats)}}class fT{checkClosed(){if(this.closed)throw new Ue(lt.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await af.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=ip.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var KS={exports:{}},ZS={exports:{}},YS={},mj;function Nu(){return mj||(mj=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=d,n.toByteArray=p,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],a[s.charCodeAt(o)]=o;a[45]=62,a[95]=63;function u(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var k=C===E?0:4-C%4;return[C,k]}function d(S){var E=u(S),C=E[0],k=E[1];return(C+k)*3/4-k}function h(S,E,C){return(E+C)*3/4-C}function p(S){var E,C=u(S),k=C[0],I=C[1],R=new i(h(S,k,I)),j=0,L=I>0?k-4:k,B;for(B=0;B<L;B+=4)E=a[S.charCodeAt(B)]<<18|a[S.charCodeAt(B+1)]<<12|a[S.charCodeAt(B+2)]<<6|a[S.charCodeAt(B+3)],R[j++]=E>>16&255,R[j++]=E>>8&255,R[j++]=E&255;return I===2&&(E=a[S.charCodeAt(B)]<<2|a[S.charCodeAt(B+1)]>>4,R[j++]=E&255),I===1&&(E=a[S.charCodeAt(B)]<<10|a[S.charCodeAt(B+1)]<<4|a[S.charCodeAt(B+2)]>>2,R[j++]=E>>8&255,R[j++]=E&255),R}function y(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,C){for(var k,I=[],R=E;R<C;R+=3)k=(S[R]<<16&16711680)+(S[R+1]<<8&65280)+(S[R+2]&255),I.push(y(k));return I.join("")}function b(S){for(var E,C=S.length,k=C%3,I=[],R=16383,j=0,L=C-k;j<L;j+=R)I.push(v(S,j,j+R>L?L:j+R));return k===1?(E=S[C-1],I.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(S[C-2]<<8)+S[C-1],I.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),I.join("")}var w={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */w.read=function(S,E,C,k,I){var R,j,L=I*8-k-1,B=(1<<L)-1,Z=B>>1,P=-7,K=C?I-1:0,q=C?-1:1,de=S[E+K];for(K+=q,R=de&(1<<-P)-1,de>>=-P,P+=L;P>0;R=R*256+S[E+K],K+=q,P-=8);for(j=R&(1<<-P)-1,R>>=-P,P+=k;P>0;j=j*256+S[E+K],K+=q,P-=8);if(R===0)R=1-Z;else{if(R===B)return j?NaN:(de?-1:1)*(1/0);j=j+Math.pow(2,k),R=R-Z}return(de?-1:1)*j*Math.pow(2,R-k)},w.write=function(S,E,C,k,I,R){var j,L,B,Z=R*8-I-1,P=(1<<Z)-1,K=P>>1,q=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,de=k?0:R-1,ae=k?1:-1,te=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(L=isNaN(E)?1:0,j=P):(j=Math.floor(Math.log(E)/Math.LN2),E*(B=Math.pow(2,-j))<1&&(j--,B*=2),j+K>=1?E+=q/B:E+=q*Math.pow(2,1-K),E*B>=2&&(j++,B/=2),j+K>=P?(L=0,j=P):j+K>=1?(L=(E*B-1)*Math.pow(2,I),j=j+K):(L=E*Math.pow(2,K-1)*Math.pow(2,I),j=0));I>=8;S[C+de]=L&255,de+=ae,L/=256,I-=8);for(j=j<<I|L,Z+=I;Z>0;S[C+de]=j&255,de+=ae,j/=256,Z-=8);S[C+de-ae]|=te*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=w,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=P,S.SlowBuffer=ie,S.INSPECT_MAX_BYTES=50;const I=2147483647;S.kMaxLength=I;const{Uint8Array:R,ArrayBuffer:j,SharedArrayBuffer:L}=globalThis;P.TYPED_ARRAY_SUPPORT=B(),!P.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function B(){try{const V=new R(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,R.prototype),Object.setPrototypeOf(V,H),V.foo()===42}catch{return!1}}Object.defineProperty(P.prototype,"parent",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.buffer}}),Object.defineProperty(P.prototype,"offset",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.byteOffset}});function Z(V){if(V>I)throw new RangeError('The value "'+V+'" is invalid for option "size"');const H=new R(V);return Object.setPrototypeOf(H,P.prototype),H}function P(V,H,W){if(typeof V=="number"){if(typeof H=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae(V)}return K(V,H,W)}P.poolSize=8192;function K(V,H,W){if(typeof V=="string")return te(V,H);if(j.isView(V))return re(V);if(V==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(ge(V,j)||V&&ge(V.buffer,j)||typeof L<"u"&&(ge(V,L)||V&&ge(V.buffer,L)))return D(V,H,W);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=V.valueOf&&V.valueOf();if(he!=null&&he!==V)return P.from(he,H,W);const Ne=J(V);if(Ne)return Ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return P.from(V[Symbol.toPrimitive]("string"),H,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}P.from=function(V,H,W){return K(V,H,W)},Object.setPrototypeOf(P.prototype,R.prototype),Object.setPrototypeOf(P,R);function q(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function de(V,H,W){return q(V),V<=0?Z(V):H!==void 0?typeof W=="string"?Z(V).fill(H,W):Z(V).fill(H):Z(V)}P.alloc=function(V,H,W){return de(V,H,W)};function ae(V){return q(V),Z(V<0?0:Q(V)|0)}P.allocUnsafe=function(V){return ae(V)},P.allocUnsafeSlow=function(V){return ae(V)};function te(V,H){if((typeof H!="string"||H==="")&&(H="utf8"),!P.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const W=me(V,H)|0;let he=Z(W);const Ne=he.write(V,H);return Ne!==W&&(he=he.slice(0,Ne)),he}function X(V){const H=V.length<0?0:Q(V.length)|0,W=Z(H);for(let he=0;he<H;he+=1)W[he]=V[he]&255;return W}function re(V){if(ge(V,R)){const H=new R(V);return D(H.buffer,H.byteOffset,H.byteLength)}return X(V)}function D(V,H,W){if(H<0||V.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<H+(W||0))throw new RangeError('"length" is outside of buffer bounds');let he;return H===void 0&&W===void 0?he=new R(V):W===void 0?he=new R(V,H):he=new R(V,H,W),Object.setPrototypeOf(he,P.prototype),he}function J(V){if(P.isBuffer(V)){const H=Q(V.length)|0,W=Z(H);return W.length===0||V.copy(W,0,0,H),W}if(V.length!==void 0)return typeof V.length!="number"||Oe(V.length)?Z(0):X(V);if(V.type==="Buffer"&&Array.isArray(V.data))return X(V.data)}function Q(V){if(V>=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return V|0}function ie(V){return+V!=V&&(V=0),P.alloc(+V)}P.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==P.prototype},P.compare=function(H,W){if(ge(H,R)&&(H=P.from(H,H.offset,H.byteLength)),ge(W,R)&&(W=P.from(W,W.offset,W.byteLength)),!P.isBuffer(H)||!P.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===W)return 0;let he=H.length,Ne=W.length;for(let He=0,pt=Math.min(he,Ne);He<pt;++He)if(H[He]!==W[He]){he=H[He],Ne=W[He];break}return he<Ne?-1:Ne<he?1:0},P.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},P.concat=function(H,W){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return P.alloc(0);let he;if(W===void 0)for(W=0,he=0;he<H.length;++he)W+=H[he].length;const Ne=P.allocUnsafe(W);let He=0;for(he=0;he<H.length;++he){let pt=H[he];if(ge(pt,R))He+pt.length>Ne.length?(P.isBuffer(pt)||(pt=P.from(pt)),pt.copy(Ne,He)):R.prototype.set.call(Ne,pt,He);else if(P.isBuffer(pt))pt.copy(Ne,He);else throw new TypeError('"list" argument must be an Array of Buffers');He+=pt.length}return Ne};function me(V,H){if(P.isBuffer(V))return V.length;if(j.isView(V)||ge(V,j))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);const W=V.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&W===0)return 0;let Ne=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ft(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return Be(V).length;default:if(Ne)return he?-1:ft(V).length;H=(""+H).toLowerCase(),Ne=!0}}P.byteLength=me;function ve(V,H,W){let he=!1;if((H===void 0||H<0)&&(H=0),H>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,H>>>=0,W<=H))return"";for(V||(V="utf8");;)switch(V){case"hex":return xe(this,H,W);case"utf8":case"utf-8":return Se(this,H,W);case"ascii":return oe(this,H,W);case"latin1":case"binary":return ee(this,H,W);case"base64":return z(this,H,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,H,W);default:if(he)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),he=!0}}P.prototype._isBuffer=!0;function Me(V,H,W){const he=V[H];V[H]=V[W],V[W]=he}P.prototype.swap16=function(){const H=this.length;if(H%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<H;W+=2)Me(this,W,W+1);return this},P.prototype.swap32=function(){const H=this.length;if(H%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<H;W+=4)Me(this,W,W+3),Me(this,W+1,W+2);return this},P.prototype.swap64=function(){const H=this.length;if(H%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<H;W+=8)Me(this,W,W+7),Me(this,W+1,W+6),Me(this,W+2,W+5),Me(this,W+3,W+4);return this},P.prototype.toString=function(){const H=this.length;return H===0?"":arguments.length===0?Se(this,0,H):ve.apply(this,arguments)},P.prototype.toLocaleString=P.prototype.toString,P.prototype.equals=function(H){if(!P.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H?!0:P.compare(this,H)===0},P.prototype.inspect=function(){let H="";const W=S.INSPECT_MAX_BYTES;return H=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(H+=" ... "),"<Buffer "+H+">"},k&&(P.prototype[k]=P.prototype.inspect),P.prototype.compare=function(H,W,he,Ne,He){if(ge(H,R)&&(H=P.from(H,H.offset,H.byteLength)),!P.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(W===void 0&&(W=0),he===void 0&&(he=H?H.length:0),Ne===void 0&&(Ne=0),He===void 0&&(He=this.length),W<0||he>H.length||Ne<0||He>this.length)throw new RangeError("out of range index");if(Ne>=He&&W>=he)return 0;if(Ne>=He)return-1;if(W>=he)return 1;if(W>>>=0,he>>>=0,Ne>>>=0,He>>>=0,this===H)return 0;let pt=He-Ne,Kt=he-W;const ut=Math.min(pt,Kt),Rt=this.slice(Ne,He),Lt=H.slice(W,he);for(let Qt=0;Qt<ut;++Qt)if(Rt[Qt]!==Lt[Qt]){pt=Rt[Qt],Kt=Lt[Qt];break}return pt<Kt?-1:Kt<pt?1:0};function Ae(V,H,W,he,Ne){if(V.length===0)return-1;if(typeof W=="string"?(he=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,Oe(W)&&(W=Ne?0:V.length-1),W<0&&(W=V.length+W),W>=V.length){if(Ne)return-1;W=V.length-1}else if(W<0)if(Ne)W=0;else return-1;if(typeof H=="string"&&(H=P.from(H,he)),P.isBuffer(H))return H.length===0?-1:Re(V,H,W,he,Ne);if(typeof H=="number")return H=H&255,typeof R.prototype.indexOf=="function"?Ne?R.prototype.indexOf.call(V,H,W):R.prototype.lastIndexOf.call(V,H,W):Re(V,[H],W,he,Ne);throw new TypeError("val must be string, number or Buffer")}function Re(V,H,W,he,Ne){let He=1,pt=V.length,Kt=H.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(V.length<2||H.length<2)return-1;He=2,pt/=2,Kt/=2,W/=2}function ut(Lt,Qt){return He===1?Lt[Qt]:Lt.readUInt16BE(Qt*He)}let Rt;if(Ne){let Lt=-1;for(Rt=W;Rt<pt;Rt++)if(ut(V,Rt)===ut(H,Lt===-1?0:Rt-Lt)){if(Lt===-1&&(Lt=Rt),Rt-Lt+1===Kt)return Lt*He}else Lt!==-1&&(Rt-=Rt-Lt),Lt=-1}else for(W+Kt>pt&&(W=pt-Kt),Rt=W;Rt>=0;Rt--){let Lt=!0;for(let Qt=0;Qt<Kt;Qt++)if(ut(V,Rt+Qt)!==ut(H,Qt)){Lt=!1;break}if(Lt)return Rt}return-1}P.prototype.includes=function(H,W,he){return this.indexOf(H,W,he)!==-1},P.prototype.indexOf=function(H,W,he){return Ae(this,H,W,he,!0)},P.prototype.lastIndexOf=function(H,W,he){return Ae(this,H,W,he,!1)};function ke(V,H,W,he){W=Number(W)||0;const Ne=V.length-W;he?(he=Number(he),he>Ne&&(he=Ne)):he=Ne;const He=H.length;he>He/2&&(he=He/2);let pt;for(pt=0;pt<he;++pt){const Kt=parseInt(H.substr(pt*2,2),16);if(Oe(Kt))return pt;V[W+pt]=Kt}return pt}function Fe(V,H,W,he){return nt(ft(H,V.length-W),V,W,he)}function et(V,H,W,he){return nt(vt(H),V,W,he)}function Le(V,H,W,he){return nt(Be(H),V,W,he)}function Ie(V,H,W,he){return nt(F(H,V.length-W),V,W,he)}P.prototype.write=function(H,W,he,Ne){if(W===void 0)Ne="utf8",he=this.length,W=0;else if(he===void 0&&typeof W=="string")Ne=W,he=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(he)?(he=he>>>0,Ne===void 0&&(Ne="utf8")):(Ne=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const He=this.length-W;if((he===void 0||he>He)&&(he=He),H.length>0&&(he<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ne||(Ne="utf8");let pt=!1;for(;;)switch(Ne){case"hex":return ke(this,H,W,he);case"utf8":case"utf-8":return Fe(this,H,W,he);case"ascii":case"latin1":case"binary":return et(this,H,W,he);case"base64":return Le(this,H,W,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,H,W,he);default:if(pt)throw new TypeError("Unknown encoding: "+Ne);Ne=(""+Ne).toLowerCase(),pt=!0}},P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(V,H,W){return H===0&&W===V.length?E.fromByteArray(V):E.fromByteArray(V.slice(H,W))}function Se(V,H,W){W=Math.min(V.length,W);const he=[];let Ne=H;for(;Ne<W;){const He=V[Ne];let pt=null,Kt=He>239?4:He>223?3:He>191?2:1;if(Ne+Kt<=W){let ut,Rt,Lt,Qt;switch(Kt){case 1:He<128&&(pt=He);break;case 2:ut=V[Ne+1],(ut&192)===128&&(Qt=(He&31)<<6|ut&63,Qt>127&&(pt=Qt));break;case 3:ut=V[Ne+1],Rt=V[Ne+2],(ut&192)===128&&(Rt&192)===128&&(Qt=(He&15)<<12|(ut&63)<<6|Rt&63,Qt>2047&&(Qt<55296||Qt>57343)&&(pt=Qt));break;case 4:ut=V[Ne+1],Rt=V[Ne+2],Lt=V[Ne+3],(ut&192)===128&&(Rt&192)===128&&(Lt&192)===128&&(Qt=(He&15)<<18|(ut&63)<<12|(Rt&63)<<6|Lt&63,Qt>65535&&Qt<1114112&&(pt=Qt))}}pt===null?(pt=65533,Kt=1):pt>65535&&(pt-=65536,he.push(pt>>>10&1023|55296),pt=56320|pt&1023),he.push(pt),Ne+=Kt}return ue(he)}const Te=4096;function ue(V){const H=V.length;if(H<=Te)return String.fromCharCode.apply(String,V);let W="",he=0;for(;he<H;)W+=String.fromCharCode.apply(String,V.slice(he,he+=Te));return W}function oe(V,H,W){let he="";W=Math.min(V.length,W);for(let Ne=H;Ne<W;++Ne)he+=String.fromCharCode(V[Ne]&127);return he}function ee(V,H,W){let he="";W=Math.min(V.length,W);for(let Ne=H;Ne<W;++Ne)he+=String.fromCharCode(V[Ne]);return he}function xe(V,H,W){const he=V.length;(!H||H<0)&&(H=0),(!W||W<0||W>he)&&(W=he);let Ne="";for(let He=H;He<W;++He)Ne+=Ke[V[He]];return Ne}function Pe(V,H,W){const he=V.slice(H,W);let Ne="";for(let He=0;He<he.length-1;He+=2)Ne+=String.fromCharCode(he[He]+he[He+1]*256);return Ne}P.prototype.slice=function(H,W){const he=this.length;H=~~H,W=W===void 0?he:~~W,H<0?(H+=he,H<0&&(H=0)):H>he&&(H=he),W<0?(W+=he,W<0&&(W=0)):W>he&&(W=he),W<H&&(W=H);const Ne=this.subarray(H,W);return Object.setPrototypeOf(Ne,P.prototype),Ne};function Ee(V,H,W){if(V%1!==0||V<0)throw new RangeError("offset is not uint");if(V+H>W)throw new RangeError("Trying to access beyond buffer length")}P.prototype.readUintLE=P.prototype.readUIntLE=function(H,W,he){H=H>>>0,W=W>>>0,he||Ee(H,W,this.length);let Ne=this[H],He=1,pt=0;for(;++pt<W&&(He*=256);)Ne+=this[H+pt]*He;return Ne},P.prototype.readUintBE=P.prototype.readUIntBE=function(H,W,he){H=H>>>0,W=W>>>0,he||Ee(H,W,this.length);let Ne=this[H+--W],He=1;for(;W>0&&(He*=256);)Ne+=this[H+--W]*He;return Ne},P.prototype.readUint8=P.prototype.readUInt8=function(H,W){return H=H>>>0,W||Ee(H,1,this.length),this[H]},P.prototype.readUint16LE=P.prototype.readUInt16LE=function(H,W){return H=H>>>0,W||Ee(H,2,this.length),this[H]|this[H+1]<<8},P.prototype.readUint16BE=P.prototype.readUInt16BE=function(H,W){return H=H>>>0,W||Ee(H,2,this.length),this[H]<<8|this[H+1]},P.prototype.readUint32LE=P.prototype.readUInt32LE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+this[H+3]*16777216},P.prototype.readUint32BE=P.prototype.readUInt32BE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),this[H]*16777216+(this[H+1]<<16|this[H+2]<<8|this[H+3])},P.prototype.readBigUInt64LE=jt(function(H){H=H>>>0,je(H,"offset");const W=this[H],he=this[H+7];(W===void 0||he===void 0)&&be(H,this.length-8);const Ne=W+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24,He=this[++H]+this[++H]*2**8+this[++H]*2**16+he*2**24;return BigInt(Ne)+(BigInt(He)<<BigInt(32))}),P.prototype.readBigUInt64BE=jt(function(H){H=H>>>0,je(H,"offset");const W=this[H],he=this[H+7];(W===void 0||he===void 0)&&be(H,this.length-8);const Ne=W*2**24+this[++H]*2**16+this[++H]*2**8+this[++H],He=this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+he;return(BigInt(Ne)<<BigInt(32))+BigInt(He)}),P.prototype.readIntLE=function(H,W,he){H=H>>>0,W=W>>>0,he||Ee(H,W,this.length);let Ne=this[H],He=1,pt=0;for(;++pt<W&&(He*=256);)Ne+=this[H+pt]*He;return He*=128,Ne>=He&&(Ne-=Math.pow(2,8*W)),Ne},P.prototype.readIntBE=function(H,W,he){H=H>>>0,W=W>>>0,he||Ee(H,W,this.length);let Ne=W,He=1,pt=this[H+--Ne];for(;Ne>0&&(He*=256);)pt+=this[H+--Ne]*He;return He*=128,pt>=He&&(pt-=Math.pow(2,8*W)),pt},P.prototype.readInt8=function(H,W){return H=H>>>0,W||Ee(H,1,this.length),this[H]&128?(255-this[H]+1)*-1:this[H]},P.prototype.readInt16LE=function(H,W){H=H>>>0,W||Ee(H,2,this.length);const he=this[H]|this[H+1]<<8;return he&32768?he|4294901760:he},P.prototype.readInt16BE=function(H,W){H=H>>>0,W||Ee(H,2,this.length);const he=this[H+1]|this[H]<<8;return he&32768?he|4294901760:he},P.prototype.readInt32LE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},P.prototype.readInt32BE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},P.prototype.readBigInt64LE=jt(function(H){H=H>>>0,je(H,"offset");const W=this[H],he=this[H+7];(W===void 0||he===void 0)&&be(H,this.length-8);const Ne=this[H+4]+this[H+5]*2**8+this[H+6]*2**16+(he<<24);return(BigInt(Ne)<<BigInt(32))+BigInt(W+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24)}),P.prototype.readBigInt64BE=jt(function(H){H=H>>>0,je(H,"offset");const W=this[H],he=this[H+7];(W===void 0||he===void 0)&&be(H,this.length-8);const Ne=(W<<24)+this[++H]*2**16+this[++H]*2**8+this[++H];return(BigInt(Ne)<<BigInt(32))+BigInt(this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+he)}),P.prototype.readFloatLE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),C.read(this,H,!0,23,4)},P.prototype.readFloatBE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),C.read(this,H,!1,23,4)},P.prototype.readDoubleLE=function(H,W){return H=H>>>0,W||Ee(H,8,this.length),C.read(this,H,!0,52,8)},P.prototype.readDoubleBE=function(H,W){return H=H>>>0,W||Ee(H,8,this.length),C.read(this,H,!1,52,8)};function We(V,H,W,he,Ne,He){if(!P.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>Ne||H<He)throw new RangeError('"value" argument is out of bounds');if(W+he>V.length)throw new RangeError("Index out of range")}P.prototype.writeUintLE=P.prototype.writeUIntLE=function(H,W,he,Ne){if(H=+H,W=W>>>0,he=he>>>0,!Ne){const Kt=Math.pow(2,8*he)-1;We(this,H,W,he,Kt,0)}let He=1,pt=0;for(this[W]=H&255;++pt<he&&(He*=256);)this[W+pt]=H/He&255;return W+he},P.prototype.writeUintBE=P.prototype.writeUIntBE=function(H,W,he,Ne){if(H=+H,W=W>>>0,he=he>>>0,!Ne){const Kt=Math.pow(2,8*he)-1;We(this,H,W,he,Kt,0)}let He=he-1,pt=1;for(this[W+He]=H&255;--He>=0&&(pt*=256);)this[W+He]=H/pt&255;return W+he},P.prototype.writeUint8=P.prototype.writeUInt8=function(H,W,he){return H=+H,W=W>>>0,he||We(this,H,W,1,255,0),this[W]=H&255,W+1},P.prototype.writeUint16LE=P.prototype.writeUInt16LE=function(H,W,he){return H=+H,W=W>>>0,he||We(this,H,W,2,65535,0),this[W]=H&255,this[W+1]=H>>>8,W+2},P.prototype.writeUint16BE=P.prototype.writeUInt16BE=function(H,W,he){return H=+H,W=W>>>0,he||We(this,H,W,2,65535,0),this[W]=H>>>8,this[W+1]=H&255,W+2},P.prototype.writeUint32LE=P.prototype.writeUInt32LE=function(H,W,he){return H=+H,W=W>>>0,he||We(this,H,W,4,4294967295,0),this[W+3]=H>>>24,this[W+2]=H>>>16,this[W+1]=H>>>8,this[W]=H&255,W+4},P.prototype.writeUint32BE=P.prototype.writeUInt32BE=function(H,W,he){return H=+H,W=W>>>0,he||We(this,H,W,4,4294967295,0),this[W]=H>>>24,this[W+1]=H>>>16,this[W+2]=H>>>8,this[W+3]=H&255,W+4};function Nt(V,H,W,he,Ne){fe(H,he,Ne,V,W,7);let He=Number(H&BigInt(4294967295));V[W++]=He,He=He>>8,V[W++]=He,He=He>>8,V[W++]=He,He=He>>8,V[W++]=He;let pt=Number(H>>BigInt(32)&BigInt(4294967295));return V[W++]=pt,pt=pt>>8,V[W++]=pt,pt=pt>>8,V[W++]=pt,pt=pt>>8,V[W++]=pt,W}function it(V,H,W,he,Ne){fe(H,he,Ne,V,W,7);let He=Number(H&BigInt(4294967295));V[W+7]=He,He=He>>8,V[W+6]=He,He=He>>8,V[W+5]=He,He=He>>8,V[W+4]=He;let pt=Number(H>>BigInt(32)&BigInt(4294967295));return V[W+3]=pt,pt=pt>>8,V[W+2]=pt,pt=pt>>8,V[W+1]=pt,pt=pt>>8,V[W]=pt,W+8}P.prototype.writeBigUInt64LE=jt(function(H,W=0){return Nt(this,H,W,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeBigUInt64BE=jt(function(H,W=0){return it(this,H,W,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeIntLE=function(H,W,he,Ne){if(H=+H,W=W>>>0,!Ne){const ut=Math.pow(2,8*he-1);We(this,H,W,he,ut-1,-ut)}let He=0,pt=1,Kt=0;for(this[W]=H&255;++He<he&&(pt*=256);)H<0&&Kt===0&&this[W+He-1]!==0&&(Kt=1),this[W+He]=(H/pt>>0)-Kt&255;return W+he},P.prototype.writeIntBE=function(H,W,he,Ne){if(H=+H,W=W>>>0,!Ne){const ut=Math.pow(2,8*he-1);We(this,H,W,he,ut-1,-ut)}let He=he-1,pt=1,Kt=0;for(this[W+He]=H&255;--He>=0&&(pt*=256);)H<0&&Kt===0&&this[W+He+1]!==0&&(Kt=1),this[W+He]=(H/pt>>0)-Kt&255;return W+he},P.prototype.writeInt8=function(H,W,he){return H=+H,W=W>>>0,he||We(this,H,W,1,127,-128),H<0&&(H=255+H+1),this[W]=H&255,W+1},P.prototype.writeInt16LE=function(H,W,he){return H=+H,W=W>>>0,he||We(this,H,W,2,32767,-32768),this[W]=H&255,this[W+1]=H>>>8,W+2},P.prototype.writeInt16BE=function(H,W,he){return H=+H,W=W>>>0,he||We(this,H,W,2,32767,-32768),this[W]=H>>>8,this[W+1]=H&255,W+2},P.prototype.writeInt32LE=function(H,W,he){return H=+H,W=W>>>0,he||We(this,H,W,4,2147483647,-2147483648),this[W]=H&255,this[W+1]=H>>>8,this[W+2]=H>>>16,this[W+3]=H>>>24,W+4},P.prototype.writeInt32BE=function(H,W,he){return H=+H,W=W>>>0,he||We(this,H,W,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[W]=H>>>24,this[W+1]=H>>>16,this[W+2]=H>>>8,this[W+3]=H&255,W+4},P.prototype.writeBigInt64LE=jt(function(H,W=0){return Nt(this,H,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),P.prototype.writeBigInt64BE=jt(function(H,W=0){return it(this,H,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _t(V,H,W,he,Ne,He){if(W+he>V.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Ft(V,H,W,he,Ne){return H=+H,W=W>>>0,Ne||_t(V,H,W,4),C.write(V,H,W,he,23,4),W+4}P.prototype.writeFloatLE=function(H,W,he){return Ft(this,H,W,!0,he)},P.prototype.writeFloatBE=function(H,W,he){return Ft(this,H,W,!1,he)};function Pt(V,H,W,he,Ne){return H=+H,W=W>>>0,Ne||_t(V,H,W,8),C.write(V,H,W,he,52,8),W+8}P.prototype.writeDoubleLE=function(H,W,he){return Pt(this,H,W,!0,he)},P.prototype.writeDoubleBE=function(H,W,he){return Pt(this,H,W,!1,he)},P.prototype.copy=function(H,W,he,Ne){if(!P.isBuffer(H))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Ne&&Ne!==0&&(Ne=this.length),W>=H.length&&(W=H.length),W||(W=0),Ne>0&&Ne<he&&(Ne=he),Ne===he||H.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Ne<0)throw new RangeError("sourceEnd out of bounds");Ne>this.length&&(Ne=this.length),H.length-W<Ne-he&&(Ne=H.length-W+he);const He=Ne-he;return this===H&&typeof R.prototype.copyWithin=="function"?this.copyWithin(W,he,Ne):R.prototype.set.call(H,this.subarray(he,Ne),W),He},P.prototype.fill=function(H,W,he,Ne){if(typeof H=="string"){if(typeof W=="string"?(Ne=W,W=0,he=this.length):typeof he=="string"&&(Ne=he,he=this.length),Ne!==void 0&&typeof Ne!="string")throw new TypeError("encoding must be a string");if(typeof Ne=="string"&&!P.isEncoding(Ne))throw new TypeError("Unknown encoding: "+Ne);if(H.length===1){const pt=H.charCodeAt(0);(Ne==="utf8"&&pt<128||Ne==="latin1")&&(H=pt)}}else typeof H=="number"?H=H&255:typeof H=="boolean"&&(H=Number(H));if(W<0||this.length<W||this.length<he)throw new RangeError("Out of range index");if(he<=W)return this;W=W>>>0,he=he===void 0?this.length:he>>>0,H||(H=0);let He;if(typeof H=="number")for(He=W;He<he;++He)this[He]=H;else{const pt=P.isBuffer(H)?H:P.from(H,Ne),Kt=pt.length;if(Kt===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(He=0;He<he-W;++He)this[He+W]=pt[He%Kt]}return this};const Zt={};function ye(V,H,W){Zt[V]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${V}]`,this.stack,delete this.name}get code(){return V}set code(Ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ne,writable:!0})}toString(){return`${this.name} [${V}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(V){return V?`${V} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(V,H){return`The "${V}" argument must be of type number. Received type ${typeof H}`},TypeError),ye("ERR_OUT_OF_RANGE",function(V,H,W){let he=`The value of "${V}" is out of range.`,Ne=W;return Number.isInteger(W)&&Math.abs(W)>2**32?Ne=O(String(W)):typeof W=="bigint"&&(Ne=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(Ne=O(Ne)),Ne+="n"),he+=` It must be ${H}. Received ${Ne}`,he},RangeError);function O(V){let H="",W=V.length;const he=V[0]==="-"?1:0;for(;W>=he+4;W-=3)H=`_${V.slice(W-3,W)}${H}`;return`${V.slice(0,W)}${H}`}function G(V,H,W){je(H,"offset"),(V[H]===void 0||V[H+W]===void 0)&&be(H,V.length-(W+1))}function fe(V,H,W,he,Ne,He){if(V>W||V<H){const pt=typeof H=="bigint"?"n":"";let Kt;throw H===0||H===BigInt(0)?Kt=`>= 0${pt} and < 2${pt} ** ${(He+1)*8}${pt}`:Kt=`>= -(2${pt} ** ${(He+1)*8-1}${pt}) and < 2 ** ${(He+1)*8-1}${pt}`,new Zt.ERR_OUT_OF_RANGE("value",Kt,V)}G(he,Ne,He)}function je(V,H){if(typeof V!="number")throw new Zt.ERR_INVALID_ARG_TYPE(H,"number",V)}function be(V,H,W){throw Math.floor(V)!==V?(je(V,W),new Zt.ERR_OUT_OF_RANGE("offset","an integer",V)):H<0?new Zt.ERR_BUFFER_OUT_OF_BOUNDS:new Zt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${H}`,V)}const Ce=/[^+/0-9A-Za-z-_]/g;function le(V){if(V=V.split("=")[0],V=V.trim().replace(Ce,""),V.length<2)return"";for(;V.length%4!==0;)V=V+"=";return V}function ft(V,H){H=H||1/0;let W;const he=V.length;let Ne=null;const He=[];for(let pt=0;pt<he;++pt){if(W=V.charCodeAt(pt),W>55295&&W<57344){if(!Ne){if(W>56319){(H-=3)>-1&&He.push(239,191,189);continue}else if(pt+1===he){(H-=3)>-1&&He.push(239,191,189);continue}Ne=W;continue}if(W<56320){(H-=3)>-1&&He.push(239,191,189),Ne=W;continue}W=(Ne-55296<<10|W-56320)+65536}else Ne&&(H-=3)>-1&&He.push(239,191,189);if(Ne=null,W<128){if((H-=1)<0)break;He.push(W)}else if(W<2048){if((H-=2)<0)break;He.push(W>>6|192,W&63|128)}else if(W<65536){if((H-=3)<0)break;He.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((H-=4)<0)break;He.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return He}function vt(V){const H=[];for(let W=0;W<V.length;++W)H.push(V.charCodeAt(W)&255);return H}function F(V,H){let W,he,Ne;const He=[];for(let pt=0;pt<V.length&&!((H-=2)<0);++pt)W=V.charCodeAt(pt),he=W>>8,Ne=W%256,He.push(Ne),He.push(he);return He}function Be(V){return E.toByteArray(le(V))}function nt(V,H,W,he){let Ne;for(Ne=0;Ne<he&&!(Ne+W>=H.length||Ne>=V.length);++Ne)H[Ne+W]=V[Ne];return Ne}function ge(V,H){return V instanceof H||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===H.name}function Oe(V){return V!==V}const Ke=function(){const V="0123456789abcdef",H=new Array(256);for(let W=0;W<16;++W){const he=W*16;for(let Ne=0;Ne<16;++Ne)H[he+Ne]=V[W]+V[Ne]}return H}();function jt(V){return typeof BigInt>"u"?pe:V}function pe(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(YS)),YS}var XS,gj;function Jr(){if(gj)return XS;gj=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return XS={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},XS}var JS={exports:{}},QS,yj;function KP(){return yj||(yj=1,QS={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),QS}var eE,bj;function Ci(){if(bj)return eE;bj=1;const{format:e,inspect:t}=KP(),{AggregateError:n}=Jr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function u(w,x){if(!w)throw new l.ERR_INTERNAL_ASSERTION(x)}function d(w){let x="",S=w.length;const E=w[0]==="-"?1:0;for(;S>=E+4;S-=3)x=`_${w.slice(S-3,S)}${x}`;return`${w.slice(0,S)}${x}`}function h(w,x,S){if(typeof x=="function")return u(x.length<=S.length,`Code: ${w}; The provided arguments length (${S.length}) does not match the required ones (${x.length}).`),x(...S);const E=(x.match(/%[dfijoOs]/g)||[]).length;return u(E===S.length,`Code: ${w}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?x:e(x,...S)}function p(w,x,S){S||(S=Error);class E extends S{constructor(...k){super(h(w,x,k))}toString(){return`${this.name} [${w}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${w}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=w,E.prototype[a]=!0,l[w]=E}function y(w){const x=o+w.name;return Object.defineProperty(w,"name",{value:x}),w}function v(w,x){if(w&&x&&w!==x){if(Array.isArray(x.errors))return x.errors.push(w),x;const S=new r([x,w],x.message);return S.code=x.code,S}return w||x}class b extends Error{constructor(x="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",S);super(x,S),this.code="ABORT_ERR",this.name="AbortError"}}return p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(w,x,S)=>{u(typeof w=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";w.endsWith(" argument")?E+=`${w} `:E+=`"${w}" ${w.includes(".")?"property":"argument"} `,E+="must be ";const C=[],k=[],I=[];for(const j of x)u(typeof j=="string","All expected entries have to be of type string"),i.includes(j)?C.push(j.toLowerCase()):s.test(j)?k.push(j):(u(j!=="object",'The value "object" should be written as "Object"'),I.push(j));if(k.length>0){const j=C.indexOf("object");j!==-1&&(C.splice(C,j,1),k.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const j=C.pop();E+=`one of type ${C.join(", ")}, or ${j}`}}(k.length>0||I.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const j=k.pop();E+=`an instance of ${k.join(", ")}, or ${j}`}}I.length>0&&(E+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(E+="an "),E+=`${I[0]}`;break;case 2:E+=`one of ${I[0]} or ${I[1]}`;break;default:{const j=I.pop();E+=`one of ${I.join(", ")}, or ${j}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var R;if((R=S.constructor)!==null&&R!==void 0&&R.name)E+=`. Received an instance of ${S.constructor.name}`;else{const j=t(S,{depth:-1});E+=`. Received ${j}`}}else{let j=t(S,{colors:!1});j.length>25&&(j=`${j.slice(0,25)}...`),E+=`. Received type ${typeof S} (${j})`}return E},TypeError),p("ERR_INVALID_ARG_VALUE",(w,x,S="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${w.includes(".")?"property":"argument"} '${w}' ${S}. Received ${E}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(w,x,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${w} to be returned from the "${x}" function but got ${C}.`},TypeError),p("ERR_MISSING_ARGS",(...w)=>{u(w.length>0,"At least one arg needs to be specified");let x;const S=w.length;switch(w=(Array.isArray(w)?w:[w]).map(E=>`"${E}"`).join(" or "),S){case 1:x+=`The ${w[0]} argument`;break;case 2:x+=`The ${w[0]} and ${w[1]} arguments`;break;default:{const E=w.pop();x+=`The ${w.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(w,x,S)=>{u(x,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=d(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=d(E)),E+="n"}else E=t(S);return`The value of "${w}" is out of range. It must be ${x}. Received ${E}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),eE={AbortError:b,aggregateTwoErrors:y(v),hideStackFrames:y,codes:l},eE}var Fm={exports:{}},vj;function Rg(){if(vj)return Fm.exports;vj=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Fm.exports=e,Fm.exports.AbortSignal=t,Fm.exports.default=e,Fm.exports}var Zb={exports:{}},wj;function Tx(){if(wj)return Zb.exports;wj=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,I,R){return Function.prototype.apply.call(k,I,R)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}Zb.exports=i,Zb.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");s=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(k){for(var I=[],R=1;R<arguments.length;R++)I.push(arguments[R]);var j=k==="error",L=this._events;if(L!==void 0)j=j&&L.error===void 0;else if(!j)return!1;if(j){var B;if(I.length>0&&(B=I[0]),B instanceof Error)throw B;var Z=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw Z.context=B,Z}var P=L[k];if(P===void 0)return!1;if(typeof P=="function")t(P,this,I);else for(var K=P.length,q=v(P,K),R=0;R<K;++R)t(q[R],this,I);return!0};function u(C,k,I,R){var j,L,B;if(o(I),L=C._events,L===void 0?(L=C._events=Object.create(null),C._eventsCount=0):(L.newListener!==void 0&&(C.emit("newListener",k,I.listener?I.listener:I),L=C._events),B=L[k]),B===void 0)B=L[k]=I,++C._eventsCount;else if(typeof B=="function"?B=L[k]=R?[I,B]:[B,I]:R?B.unshift(I):B.push(I),j=l(C),j>0&&B.length>j&&!B.warned){B.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");Z.name="MaxListenersExceededWarning",Z.emitter=C,Z.type=k,Z.count=B.length,r(Z)}return C}i.prototype.addListener=function(k,I){return u(this,k,I,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,I){return u(this,k,I,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,k,I){var R={fired:!1,wrapFn:void 0,target:C,type:k,listener:I},j=d.bind(R);return j.listener=I,R.wrapFn=j,j}i.prototype.once=function(k,I){return o(I),this.on(k,h(this,k,I)),this},i.prototype.prependOnceListener=function(k,I){return o(I),this.prependListener(k,h(this,k,I)),this},i.prototype.removeListener=function(k,I){var R,j,L,B,Z;if(o(I),j=this._events,j===void 0)return this;if(R=j[k],R===void 0)return this;if(R===I||R.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete j[k],j.removeListener&&this.emit("removeListener",k,R.listener||I));else if(typeof R!="function"){for(L=-1,B=R.length-1;B>=0;B--)if(R[B]===I||R[B].listener===I){Z=R[B].listener,L=B;break}if(L<0)return this;L===0?R.shift():b(R,L),R.length===1&&(j[k]=R[0]),j.removeListener!==void 0&&this.emit("removeListener",k,Z||I)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var I,R,j;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[k]),this;if(arguments.length===0){var L=Object.keys(R),B;for(j=0;j<L.length;++j)B=L[j],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=R[k],typeof I=="function")this.removeListener(k,I);else if(I!==void 0)for(j=I.length-1;j>=0;j--)this.removeListener(k,I[j]);return this};function p(C,k,I){var R=C._events;if(R===void 0)return[];var j=R[k];return j===void 0?[]:typeof j=="function"?I?[j.listener||j]:[j]:I?w(j):v(j,j.length)}i.prototype.listeners=function(k){return p(this,k,!0)},i.prototype.rawListeners=function(k){return p(this,k,!1)},i.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):y.call(C,k)},i.prototype.listenerCount=y;function y(C){var k=this._events;if(k!==void 0){var I=k[C];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,k){for(var I=new Array(k),R=0;R<k;++R)I[R]=C[R];return I}function b(C,k){for(;k+1<C.length;k++)C[k]=C[k+1];C.pop()}function w(C){for(var k=new Array(C.length),I=0;I<k.length;++I)k[I]=C[I].listener||C[I];return k}function x(C,k){return new Promise(function(I,R){function j(B){C.removeListener(k,L),R(B)}function L(){typeof C.removeListener=="function"&&C.removeListener("error",j),I([].slice.call(arguments))}E(C,k,L,{once:!0}),k!=="error"&&S(C,j,{once:!0})})}function S(C,k,I){typeof C.on=="function"&&E(C,"error",k,I)}function E(C,k,I,R){if(typeof C.on=="function")R.once?C.once(k,I):C.on(k,I);else if(typeof C.addEventListener=="function")C.addEventListener(k,function j(L){R.once&&C.removeEventListener(k,j),I(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return Zb.exports}var xj;function Pi(){return xj||(xj=1,function(e){const t=Nu(),{format:n,inspect:r}=KP(),{codes:{ERR_INVALID_ARG_TYPE:a}}=Ci(),{kResistStopPropagation:i,AggregateError:s,SymbolDispose:o}=Jr(),l=globalThis.AbortSignal||Rg().AbortSignal,u=globalThis.AbortController||Rg().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,p=typeof h<"u"?function(w){return w instanceof h}:function(w){return!1},y=(b,w)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(w,"AbortSignal",b)},v=(b,w)=>{if(typeof b!="function")throw new a(w,"Function",b)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(b){let w=!1;return function(...x){w||(w=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,w;return{promise:new Promise((S,E)=>{b=S,w=E}),resolve:b,reject:w}},promisify(b){return new Promise((w,x)=>{b((S,...E)=>S?x(S):w(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:p,deprecate(b,w){return b},addAbortListener:Tx().addAbortListener||function(w,x){if(w===void 0)throw new a("signal","AbortSignal",w);y(w,"signal"),v(x,"listener");let S;return w.aborted?queueMicrotask(()=>x()):(w.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),S=()=>{w.removeEventListener("abort",x)}),{__proto__:null,[o](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(w){if(w.length===1)return w[0];const x=new u,S=()=>x.abort();return w.forEach(E=>{y(E,"signals"),E.addEventListener("abort",S,{once:!0})}),x.signal.addEventListener("abort",()=>{w.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(JS)),JS.exports}var Yb={},tE,_j;function _0(){if(_j)return tE;_j=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:p,StringPrototypeTrim:y}=Jr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=Ci(),{normalizeEncoding:C}=Pi(),{isAsyncFunction:k,isArrayBufferView:I}=Pi().types,R={};function j(ee){return ee===(ee|0)}function L(ee){return ee===ee>>>0}const B=/^[0-7]+$/,Z="must be a 32-bit unsigned integer or an octal string";function P(ee,xe,Pe){if(typeof ee>"u"&&(ee=Pe),typeof ee=="string"){if(d(B,ee)===null)throw new x(xe,ee,Z);ee=l(ee,8)}return de(ee,xe),ee}const K=v((ee,xe,Pe=o,Ee=s)=>{if(typeof ee!="number")throw new w(xe,"number",ee);if(!a(ee))throw new S(xe,"an integer",ee);if(ee<Pe||ee>Ee)throw new S(xe,`>= ${Pe} && <= ${Ee}`,ee)}),q=v((ee,xe,Pe=-2147483648,Ee=2147483647)=>{if(typeof ee!="number")throw new w(xe,"number",ee);if(!a(ee))throw new S(xe,"an integer",ee);if(ee<Pe||ee>Ee)throw new S(xe,`>= ${Pe} && <= ${Ee}`,ee)}),de=v((ee,xe,Pe=!1)=>{if(typeof ee!="number")throw new w(xe,"number",ee);if(!a(ee))throw new S(xe,"an integer",ee);const Ee=Pe?1:0,We=4294967295;if(ee<Ee||ee>We)throw new S(xe,`>= ${Ee} && <= ${We}`,ee)});function ae(ee,xe){if(typeof ee!="string")throw new w(xe,"string",ee)}function te(ee,xe,Pe=void 0,Ee){if(typeof ee!="number")throw new w(xe,"number",ee);if(Pe!=null&&ee<Pe||Ee!=null&&ee>Ee||(Pe!=null||Ee!=null)&&i(ee))throw new S(xe,`${Pe!=null?`>= ${Pe}`:""}${Pe!=null&&Ee!=null?" && ":""}${Ee!=null?`<= ${Ee}`:""}`,ee)}const X=v((ee,xe,Pe)=>{if(!t(Pe,ee)){const We="must be one of: "+n(r(Pe,Nt=>typeof Nt=="string"?`'${Nt}'`:h(Nt)),", ");throw new x(xe,ee,We)}});function re(ee,xe){if(typeof ee!="boolean")throw new w(xe,"boolean",ee)}function D(ee,xe,Pe){return ee==null||!u(ee,xe)?Pe:ee[xe]}const J=v((ee,xe,Pe=null)=>{const Ee=D(Pe,"allowArray",!1),We=D(Pe,"allowFunction",!1);if(!D(Pe,"nullable",!1)&&ee===null||!Ee&&e(ee)||typeof ee!="object"&&(!We||typeof ee!="function"))throw new w(xe,"Object",ee)}),Q=v((ee,xe)=>{if(ee!=null&&typeof ee!="object"&&typeof ee!="function")throw new w(xe,"a dictionary",ee)}),ie=v((ee,xe,Pe=0)=>{if(!e(ee))throw new w(xe,"Array",ee);if(ee.length<Pe){const Ee=`must be longer than ${Pe}`;throw new x(xe,ee,Ee)}});function me(ee,xe){ie(ee,xe);for(let Pe=0;Pe<ee.length;Pe++)ae(ee[Pe],`${xe}[${Pe}]`)}function ve(ee,xe){ie(ee,xe);for(let Pe=0;Pe<ee.length;Pe++)re(ee[Pe],`${xe}[${Pe}]`)}function Me(ee,xe){ie(ee,xe);for(let Pe=0;Pe<ee.length;Pe++){const Ee=ee[Pe],We=`${xe}[${Pe}]`;if(Ee==null)throw new w(We,"AbortSignal",Ee);et(Ee,We)}}function Ae(ee,xe="signal"){if(ae(ee,xe),R[ee]===void 0)throw R[p(ee)]!==void 0?new E(ee+" (signals must use all capital letters)"):new E(ee)}const Re=v((ee,xe="buffer")=>{if(!I(ee))throw new w(xe,["Buffer","TypedArray","DataView"],ee)});function ke(ee,xe){const Pe=C(xe),Ee=ee.length;if(Pe==="hex"&&Ee%2!==0)throw new x("encoding",xe,`is invalid for data of length ${Ee}`)}function Fe(ee,xe="Port",Pe=!0){if(typeof ee!="number"&&typeof ee!="string"||typeof ee=="string"&&y(ee).length===0||+ee!==+ee>>>0||ee>65535||ee===0&&!Pe)throw new b(xe,ee,Pe);return ee|0}const et=v((ee,xe)=>{if(ee!==void 0&&(ee===null||typeof ee!="object"||!("aborted"in ee)))throw new w(xe,"AbortSignal",ee)}),Le=v((ee,xe)=>{if(typeof ee!="function")throw new w(xe,"Function",ee)}),Ie=v((ee,xe)=>{if(typeof ee!="function"||k(ee))throw new w(xe,"Function",ee)}),z=v((ee,xe)=>{if(ee!==void 0)throw new w(xe,"undefined",ee)});function Se(ee,xe,Pe){if(!t(Pe,ee))throw new w(xe,`('${n(Pe,"|")}')`,ee)}const Te=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ue(ee,xe){if(typeof ee>"u"||!d(Te,ee))throw new x(xe,ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function oe(ee){if(typeof ee=="string")return ue(ee,"hints"),ee;if(e(ee)){const xe=ee.length;let Pe="";if(xe===0)return Pe;for(let Ee=0;Ee<xe;Ee++){const We=ee[Ee];ue(We,"hints"),Pe+=We,Ee!==xe-1&&(Pe+=", ")}return Pe}throw new x("hints",ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return tE={isInt32:j,isUint32:L,parseFileMode:P,validateArray:ie,validateStringArray:me,validateBooleanArray:ve,validateAbortSignalArray:Me,validateBoolean:re,validateBuffer:Re,validateDictionary:Q,validateEncoding:ke,validateFunction:Le,validateInt32:q,validateInteger:K,validateNumber:te,validateObject:J,validateOneOf:X,validatePlainFunction:Ie,validatePort:Fe,validateSignalName:Ae,validateString:ae,validateUint32:de,validateUndefined:z,validateUnion:Se,validateAbortSignal:et,validateLinkHeaderValue:oe},tE}var Xb={exports:{}},nE={},Sj;function rf(){return Sj||(Sj=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=s}catch{a=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch{i=o}})();function l(C){if(a===setTimeout)return setTimeout(C,0);if((a===s||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function u(C){if(i===clearTimeout)return clearTimeout(C);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var d=[],h=!1,p,y=-1;function v(){!h||!p||(h=!1,p.length?d=p.concat(d):y=-1,d.length&&b())}function b(){if(!h){var C=l(v);h=!0;for(var k=d.length;k;){for(p=d,d=[];++y<k;)p&&p[y].run();y=-1,k=d.length}p=null,h=!1,u(C)}}r.nextTick=function(C){var k=new Array(arguments.length-1);if(arguments.length>1)for(var I=1;I<arguments.length;I++)k[I-1]=arguments[I];d.push(new w(C,k)),d.length===1&&!h&&l(b)};function w(C,k){this.fun=C,this.array=k}w.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(nE)),nE}var rE,Ej;function cc(){if(Ej)return rE;Ej=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Jr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function d(D,J=!1){var Q;return!!(D&&typeof D.pipe=="function"&&typeof D.on=="function"&&(!J||typeof D.pause=="function"&&typeof D.resume=="function")&&(!D._writableState||((Q=D._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!D._writableState||D._readableState))}function h(D){var J;return!!(D&&typeof D.write=="function"&&typeof D.on=="function"&&(!D._readableState||((J=D._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function p(D){return!!(D&&typeof D.pipe=="function"&&D._readableState&&typeof D.on=="function"&&typeof D.write=="function")}function y(D){return D&&(D._readableState||D._writableState||typeof D.write=="function"&&typeof D.on=="function"||typeof D.pipe=="function"&&typeof D.on=="function")}function v(D){return!!(D&&!y(D)&&typeof D.pipeThrough=="function"&&typeof D.getReader=="function"&&typeof D.cancel=="function")}function b(D){return!!(D&&!y(D)&&typeof D.getWriter=="function"&&typeof D.abort=="function")}function w(D){return!!(D&&!y(D)&&typeof D.readable=="object"&&typeof D.writable=="object")}function x(D){return v(D)||b(D)||w(D)}function S(D,J){return D==null?!1:J===!0?typeof D[e]=="function":J===!1?typeof D[t]=="function":typeof D[e]=="function"||typeof D[t]=="function"}function E(D){if(!y(D))return null;const J=D._writableState,Q=D._readableState,ie=J||Q;return!!(D.destroyed||D[r]||ie!=null&&ie.destroyed)}function C(D){if(!h(D))return null;if(D.writableEnded===!0)return!0;const J=D._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function k(D,J){if(!h(D))return null;if(D.writableFinished===!0)return!0;const Q=D._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.finished)!="boolean"?null:!!(Q.finished||J===!1&&Q.ended===!0&&Q.length===0)}function I(D){if(!d(D))return null;if(D.readableEnded===!0)return!0;const J=D._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function R(D,J){if(!d(D))return null;const Q=D._readableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.endEmitted)!="boolean"?null:!!(Q.endEmitted||J===!1&&Q.ended===!0&&Q.length===0)}function j(D){return D&&D[i]!=null?D[i]:typeof(D==null?void 0:D.readable)!="boolean"?null:E(D)?!1:d(D)&&D.readable&&!R(D)}function L(D){return D&&D[s]!=null?D[s]:typeof(D==null?void 0:D.writable)!="boolean"?null:E(D)?!1:h(D)&&D.writable&&!C(D)}function B(D,J){return y(D)?E(D)?!0:!((J==null?void 0:J.readable)!==!1&&j(D)||(J==null?void 0:J.writable)!==!1&&L(D)):null}function Z(D){var J,Q;return y(D)?D.writableErrored?D.writableErrored:(J=(Q=D._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function P(D){var J,Q;return y(D)?D.readableErrored?D.readableErrored:(J=(Q=D._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function K(D){if(!y(D))return null;if(typeof D.closed=="boolean")return D.closed;const J=D._writableState,Q=D._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(Q==null?void 0:Q.closed)=="boolean"?(J==null?void 0:J.closed)||(Q==null?void 0:Q.closed):typeof D._closed=="boolean"&&q(D)?D._closed:null}function q(D){return typeof D._closed=="boolean"&&typeof D._defaultKeepAlive=="boolean"&&typeof D._removedConnection=="boolean"&&typeof D._removedContLen=="boolean"}function de(D){return typeof D._sent100=="boolean"&&q(D)}function ae(D){var J;return typeof D._consuming=="boolean"&&typeof D._dumped=="boolean"&&((J=D.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function te(D){if(!y(D))return null;const J=D._writableState,Q=D._readableState,ie=J||Q;return!ie&&de(D)||!!(ie&&ie.autoDestroy&&ie.emitClose&&ie.closed===!1)}function X(D){var J;return!!(D&&((J=D[o])!==null&&J!==void 0?J:D.readableDidRead||D.readableAborted))}function re(D){var J,Q,ie,me,ve,Me,Ae,Re,ke,Fe;return!!(D&&((J=(Q=(ie=(me=(ve=(Me=D[a])!==null&&Me!==void 0?Me:D.readableErrored)!==null&&ve!==void 0?ve:D.writableErrored)!==null&&me!==void 0?me:(Ae=D._readableState)===null||Ae===void 0?void 0:Ae.errorEmitted)!==null&&ie!==void 0?ie:(Re=D._writableState)===null||Re===void 0?void 0:Re.errorEmitted)!==null&&Q!==void 0?Q:(ke=D._readableState)===null||ke===void 0?void 0:ke.errored)!==null&&J!==void 0?J:!((Fe=D._writableState)===null||Fe===void 0)&&Fe.errored))}return rE={isDestroyed:E,kIsDestroyed:r,isDisturbed:X,kIsDisturbed:o,isErrored:re,kIsErrored:a,isReadable:j,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:s,isClosed:K,isDuplexNodeStream:p,isFinished:B,isIterable:S,isReadableNodeStream:d,isReadableStream:v,isReadableEnded:I,isReadableFinished:R,isReadableErrored:P,isNodeStream:y,isWebStream:x,isWritable:L,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:C,isWritableFinished:k,isWritableErrored:Z,isServerRequest:ae,isServerResponse:de,willEmitClose:te,isTransformStream:w},rE}var Cj;function Ru(){if(Cj)return Xb.exports;Cj=1;const e=rf(),{AbortError:t,codes:n}=Ci(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:s}=Pi(),{validateAbortSignal:o,validateFunction:l,validateObject:u,validateBoolean:d}=_0(),{Promise:h,PromisePrototypeThen:p,SymbolDispose:y}=Jr(),{isClosed:v,isReadable:b,isReadableNodeStream:w,isReadableStream:x,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:k,isWritableStream:I,isWritableFinished:R,isWritableErrored:j,isNodeStream:L,willEmitClose:B,kIsClosedPromise:Z}=cc();let P;function K(X){return X.setHeader&&typeof X.abort=="function"}const q=()=>{};function de(X,re,D){var J,Q;if(arguments.length===2?(D=re,re=i):re==null?re=i:u(re,"options"),l(D,"callback"),o(re.signal,"options.signal"),D=s(D),x(X)||I(X))return ae(X,re,D);if(!L(X))throw new r("stream",["ReadableStream","WritableStream","Stream"],X);const ie=(J=re.readable)!==null&&J!==void 0?J:w(X),me=(Q=re.writable)!==null&&Q!==void 0?Q:k(X),ve=X._writableState,Me=X._readableState,Ae=()=>{X.writable||Fe()};let Re=B(X)&&w(X)===ie&&k(X)===me,ke=R(X,!1);const Fe=()=>{ke=!0,X.destroyed&&(Re=!1),!(Re&&(!X.readable||ie))&&(!ie||et)&&D.call(X)};let et=S(X,!1);const Le=()=>{et=!0,X.destroyed&&(Re=!1),!(Re&&(!X.writable||me))&&(!me||ke)&&D.call(X)},Ie=ee=>{D.call(X,ee)};let z=v(X);const Se=()=>{z=!0;const ee=j(X)||E(X);if(ee&&typeof ee!="boolean")return D.call(X,ee);if(ie&&!et&&w(X,!0)&&!S(X,!1))return D.call(X,new a);if(me&&!ke&&!R(X,!1))return D.call(X,new a);D.call(X)},Te=()=>{z=!0;const ee=j(X)||E(X);if(ee&&typeof ee!="boolean")return D.call(X,ee);D.call(X)},ue=()=>{X.req.on("finish",Fe)};K(X)?(X.on("complete",Fe),Re||X.on("abort",Se),X.req?ue():X.on("request",ue)):me&&!ve&&(X.on("end",Ae),X.on("close",Ae)),!Re&&typeof X.aborted=="boolean"&&X.on("aborted",Se),X.on("end",Le),X.on("finish",Fe),re.error!==!1&&X.on("error",Ie),X.on("close",Se),z?e.nextTick(Se):ve!=null&&ve.errorEmitted||Me!=null&&Me.errorEmitted?Re||e.nextTick(Te):(!ie&&(!Re||b(X))&&(ke||C(X)===!1)||!me&&(!Re||C(X))&&(et||b(X)===!1)||Me&&X.req&&X.aborted)&&e.nextTick(Te);const oe=()=>{D=q,X.removeListener("aborted",Se),X.removeListener("complete",Fe),X.removeListener("abort",Se),X.removeListener("request",ue),X.req&&X.req.removeListener("finish",Fe),X.removeListener("end",Ae),X.removeListener("close",Ae),X.removeListener("finish",Fe),X.removeListener("end",Le),X.removeListener("error",Ie),X.removeListener("close",Se)};if(re.signal&&!z){const ee=()=>{const xe=D;oe(),xe.call(X,new t(void 0,{cause:re.signal.reason}))};if(re.signal.aborted)e.nextTick(ee);else{P=P||Pi().addAbortListener;const xe=P(re.signal,ee),Pe=D;D=s((...Ee)=>{xe[y](),Pe.apply(X,Ee)})}}return oe}function ae(X,re,D){let J=!1,Q=q;if(re.signal)if(Q=()=>{J=!0,D.call(X,new t(void 0,{cause:re.signal.reason}))},re.signal.aborted)e.nextTick(Q);else{P=P||Pi().addAbortListener;const me=P(re.signal,Q),ve=D;D=s((...Me)=>{me[y](),ve.apply(X,Me)})}const ie=(...me)=>{J||e.nextTick(()=>D.apply(X,me))};return p(X[Z].promise,ie,ie),q}function te(X,re){var D;let J=!1;return re===null&&(re=i),(D=re)!==null&&D!==void 0&&D.cleanup&&(d(re.cleanup,"cleanup"),J=re.cleanup),new h((Q,ie)=>{const me=de(X,re,ve=>{J&&me(),ve?ie(ve):Q()})})}return Xb.exports=de,Xb.exports.finished=te,Xb.exports}var aE,kj;function sp(){if(kj)return aE;kj=1;const e=rf(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=Ci(),{Symbol:a}=Jr(),{kIsDestroyed:i,isDestroyed:s,isFinished:o,isServerRequest:l}=cc(),u=a("kDestroy"),d=a("kConstruct");function h(B,Z,P){B&&(B.stack,Z&&!Z.errored&&(Z.errored=B),P&&!P.errored&&(P.errored=B))}function p(B,Z){const P=this._readableState,K=this._writableState,q=K||P;return K!=null&&K.destroyed||P!=null&&P.destroyed?(typeof Z=="function"&&Z(),this):(h(B,K,P),K&&(K.destroyed=!0),P&&(P.destroyed=!0),q.constructed?y(this,B,Z):this.once(u,function(de){y(this,t(de,B),Z)}),this)}function y(B,Z,P){let K=!1;function q(de){if(K)return;K=!0;const ae=B._readableState,te=B._writableState;h(de,te,ae),te&&(te.closed=!0),ae&&(ae.closed=!0),typeof P=="function"&&P(de),de?e.nextTick(v,B,de):e.nextTick(b,B)}try{B._destroy(Z||null,q)}catch(de){q(de)}}function v(B,Z){w(B,Z),b(B)}function b(B){const Z=B._readableState,P=B._writableState;P&&(P.closeEmitted=!0),Z&&(Z.closeEmitted=!0),(P!=null&&P.emitClose||Z!=null&&Z.emitClose)&&B.emit("close")}function w(B,Z){const P=B._readableState,K=B._writableState;K!=null&&K.errorEmitted||P!=null&&P.errorEmitted||(K&&(K.errorEmitted=!0),P&&(P.errorEmitted=!0),B.emit("error",Z))}function x(){const B=this._readableState,Z=this._writableState;B&&(B.constructed=!0,B.closed=!1,B.closeEmitted=!1,B.destroyed=!1,B.errored=null,B.errorEmitted=!1,B.reading=!1,B.ended=B.readable===!1,B.endEmitted=B.readable===!1),Z&&(Z.constructed=!0,Z.destroyed=!1,Z.closed=!1,Z.closeEmitted=!1,Z.errored=null,Z.errorEmitted=!1,Z.finalCalled=!1,Z.prefinished=!1,Z.ended=Z.writable===!1,Z.ending=Z.writable===!1,Z.finished=Z.writable===!1)}function S(B,Z,P){const K=B._readableState,q=B._writableState;if(q!=null&&q.destroyed||K!=null&&K.destroyed)return this;K!=null&&K.autoDestroy||q!=null&&q.autoDestroy?B.destroy(Z):Z&&(Z.stack,q&&!q.errored&&(q.errored=Z),K&&!K.errored&&(K.errored=Z),P?e.nextTick(w,B,Z):w(B,Z))}function E(B,Z){if(typeof B._construct!="function")return;const P=B._readableState,K=B._writableState;P&&(P.constructed=!1),K&&(K.constructed=!1),B.once(d,Z),!(B.listenerCount(d)>1)&&e.nextTick(C,B)}function C(B){let Z=!1;function P(K){if(Z){S(B,K??new n);return}Z=!0;const q=B._readableState,de=B._writableState,ae=de||q;q&&(q.constructed=!0),de&&(de.constructed=!0),ae.destroyed?B.emit(u,K):K?S(B,K,!0):e.nextTick(k,B)}try{B._construct(K=>{e.nextTick(P,K)})}catch(K){e.nextTick(P,K)}}function k(B){B.emit(d)}function I(B){return(B==null?void 0:B.setHeader)&&typeof B.abort=="function"}function R(B){B.emit("close")}function j(B,Z){B.emit("error",Z),e.nextTick(R,B)}function L(B,Z){!B||s(B)||(!Z&&!o(B)&&(Z=new r),l(B)?(B.socket=null,B.destroy(Z)):I(B)?B.abort():I(B.req)?B.req.abort():typeof B.destroy=="function"?B.destroy(Z):typeof B.close=="function"?B.close():Z?e.nextTick(j,B,Z):e.nextTick(R,B),B.destroyed||(B[i]=!0))}return aE={construct:E,destroyer:L,destroy:p,undestroy:x,errorOrDestroy:S},aE}var iE,Tj;function hT(){if(Tj)return iE;Tj=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Jr(),{EventEmitter:n}=Tx();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,s){const o=this;function l(b){i.writable&&i.write(b)===!1&&o.pause&&o.pause()}o.on("data",l);function u(){o.readable&&o.resume&&o.resume()}i.on("drain",u),!i._isStdio&&(!s||s.end!==!1)&&(o.on("end",h),o.on("close",p));let d=!1;function h(){d||(d=!0,i.end())}function p(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function y(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(o,"error",y),a(i,"error",y);function v(){o.removeListener("data",l),i.removeListener("drain",u),o.removeListener("end",h),o.removeListener("close",p),o.removeListener("error",y),i.removeListener("error",y),o.removeListener("end",v),o.removeListener("close",v),i.removeListener("close",v)}return o.on("end",v),o.on("close",v),i.on("close",v),i.emit("pipe",o),i};function a(i,s,o){if(typeof i.prependListener=="function")return i.prependListener(s,o);!i._events||!i._events[s]?i.on(s,o):e(i._events[s])?i._events[s].unshift(o):i._events[s]=[o,i._events[s]]}return iE={Stream:r,prependListener:a},iE}var sE={exports:{}},Aj;function Ax(){return Aj||(Aj=1,function(e){const{SymbolDispose:t}=Jr(),{AbortError:n,codes:r}=Ci(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:s}=cc(),o=Ru(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const d=(h,p)=>{if(typeof h!="object"||!("aborted"in h))throw new l(p,"AbortSignal",h)};e.exports.addAbortSignal=function(p,y){if(d(p,"signal"),!a(y)&&!i(y))throw new l("stream",["ReadableStream","WritableStream","Stream"],y);return e.exports.addAbortSignalNoValidate(p,y)},e.exports.addAbortSignalNoValidate=function(h,p){if(typeof h!="object"||!("aborted"in h))return p;const y=a(p)?()=>{p.destroy(new n(void 0,{cause:h.reason}))}:()=>{p[s](new n(void 0,{cause:h.reason}))};if(h.aborted)y();else{u=u||Pi().addAbortListener;const v=u(h,y);o(p,v[t])}return p}}(sE)),sE.exports}var oE,Nj;function xte(){if(Nj)return oE;Nj=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Jr(),{Buffer:a}=Nu(),{inspect:i}=Pi();return oE=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=o+l.data;return u}concat(o){if(this.length===0)return a.alloc(0);const l=a.allocUnsafe(o>>>0);let u=this.head,d=0;for(;u;)n(l,u.data,d),d+=u.data.length,u=u.next;return l}consume(o,l){const u=this.head.data;if(o<u.length){const d=u.slice(0,o);return this.head.data=u.slice(o),d}return o===u.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",u=this.head,d=0;do{const h=u.data;if(o>h.length)l+=h,o-=h.length;else{o===h.length?(l+=h,++d,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(h,0,o),this.head=u,u.data=e(h,o));break}++d}while((u=u.next)!==null);return this.length-=d,l}_getBuffer(o){const l=a.allocUnsafe(o),u=o;let d=this.head,h=0;do{const p=d.data;if(o>p.length)n(l,p,u-o),o-=p.length;else{o===p.length?(n(l,p,u-o),++h,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(p.buffer,p.byteOffset,o),u-o),this.head=d,d.data=p.slice(o));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return i(this,{...l,depth:0,customInspect:!1})}},oE}var lE,Rj;function Nx(){if(Rj)return lE;Rj=1;const{MathFloor:e,NumberIsInteger:t}=Jr(),{validateInteger:n}=_0(),{ERR_INVALID_ARG_VALUE:r}=Ci().codes;let a=16*1024,i=16;function s(d,h,p){return d.highWaterMark!=null?d.highWaterMark:h?d[p]:null}function o(d){return d?i:a}function l(d,h){n(h,"value",0),d?i=h:a=h}function u(d,h,p,y){const v=s(h,y,p);if(v!=null){if(!t(v)||v<0){const b=y?`options.${p}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return o(d.objectMode)}return lE={getHighWaterMark:u,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},lE}var cE={},Jb={exports:{}},Ij;function pT(){return Ij||(Ij=1,function(e,t){var n=Nu(),r=n.Buffer;function a(s,o){for(var l in s)o[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(s,o,l){return r(s,o,l)}a(r,i),i.from=function(s,o,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,o,l)},i.alloc=function(s,o,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return o!==void 0?typeof l=="string"?u.fill(o,l):u.fill(o):u.fill(0),u},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(Jb,Jb.exports)),Jb.exports}var jj;function _te(){if(jj)return cE;jj=1;var e=pT().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function r(x){var S=n(x);if(typeof S!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return S||x}cE.StringDecoder=a;function a(x){this.encoding=r(x);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=p,S=4;break;case"utf8":this.fillLast=l,S=4;break;case"base64":this.text=y,this.end=v,S=3;break;default:this.write=b,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(x){if(x.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?S?S+this.text(x,E):this.text(x,E):S||""},a.prototype.end=d,a.prototype.text=u,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function s(x,S,E){var C=S.length-1;if(C<E)return 0;var k=i(S[C]);return k>=0?(k>0&&(x.lastNeed=k-1),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(x.lastNeed=k-2),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(k===2?k=0:x.lastNeed=k-3),k):0))}function o(x,S,E){if((S[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,""}}function l(x){var S=this.lastTotal-this.lastNeed,E=o(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function u(x,S){var E=s(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=E;var C=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",S,C)}function d(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"":S}function h(x,S){if((x.length-S)%2===0){var E=x.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function p(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function y(x,S){var E=(x.length-S)%3;return E===0?x.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-E))}function v(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function b(x){return x.toString(this.encoding)}function w(x){return x&&x.length?this.write(x):""}return cE}var uE,Oj;function ZP(){if(Oj)return uE;Oj=1;const e=rf(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Jr(),{Buffer:a}=Nu(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:s}=Ci().codes;function o(l,u,d){let h;if(typeof u=="string"||u instanceof a)return new l({objectMode:!0,...d,read(){this.push(u),this.push(null)}});let p;if(u&&u[n])p=!0,h=u[n]();else if(u&&u[r])p=!1,h=u[r]();else throw new i("iterable",["Iterable"],u);const y=new l({objectMode:!0,highWaterMark:1,...d});let v=!1;y._read=function(){v||(v=!0,w())},y._destroy=function(x,S){t(b(x),()=>e.nextTick(S,x),E=>e.nextTick(S,E||x))};async function b(x){const S=x!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:k}=await h.throw(x);if(await C,k)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function w(){for(;;){try{const{value:x,done:S}=p?await h.next():h.next();if(S)y.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new s;if(y.push(E))continue;v=!1}}catch(x){y.destroy(x)}break}}return y}return uE=o,uE}var dE,Dj;function Rx(){if(Dj)return dE;Dj=1;const e=rf(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:s,ObjectSetPrototypeOf:o,Promise:l,SafeSet:u,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:p}=Jr();dE=Ee,Ee.ReadableState=Pe;const{EventEmitter:y}=Tx(),{Stream:v,prependListener:b}=hT(),{Buffer:w}=Nu(),{addAbortSignal:x}=Ax(),S=Ru();let E=Pi().debuglog("stream",pe=>{E=pe});const C=xte(),k=sp(),{getHighWaterMark:I,getDefaultHighWaterMark:R}=Nx(),{aggregateTwoErrors:j,codes:{ERR_INVALID_ARG_TYPE:L,ERR_METHOD_NOT_IMPLEMENTED:B,ERR_OUT_OF_RANGE:Z,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:K},AbortError:q}=Ci(),{validateObject:de}=_0(),ae=p("kPaused"),{StringDecoder:te}=_te(),X=ZP();o(Ee.prototype,v.prototype),o(Ee,v);const re=()=>{},{errorOrDestroy:D}=k,J=1,Q=2,ie=4,me=8,ve=16,Me=32,Ae=64,Re=128,ke=256,Fe=512,et=1024,Le=2048,Ie=4096,z=8192,Se=16384,Te=32768,ue=65536,oe=1<<17,ee=1<<18;function xe(pe){return{enumerable:!1,get(){return(this.state&pe)!==0},set(V){V?this.state|=pe:this.state&=~pe}}}i(Pe.prototype,{objectMode:xe(J),ended:xe(Q),endEmitted:xe(ie),reading:xe(me),constructed:xe(ve),sync:xe(Me),needReadable:xe(Ae),emittedReadable:xe(Re),readableListening:xe(ke),resumeScheduled:xe(Fe),errorEmitted:xe(et),emitClose:xe(Le),autoDestroy:xe(Ie),destroyed:xe(z),closed:xe(Se),closeEmitted:xe(Te),multiAwaitDrain:xe(ue),readingMore:xe(oe),dataEmitted:xe(ee)});function Pe(pe,V,H){typeof H!="boolean"&&(H=V instanceof ec()),this.state=Le|Ie|ve|Me,pe&&pe.objectMode&&(this.state|=J),H&&pe&&pe.readableObjectMode&&(this.state|=J),this.highWaterMark=pe?I(this,pe,"readableHighWaterMark",H):R(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ae]=null,pe&&pe.emitClose===!1&&(this.state&=-2049),pe&&pe.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=pe&&pe.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,pe&&pe.encoding&&(this.decoder=new te(pe.encoding),this.encoding=pe.encoding)}function Ee(pe){if(!(this instanceof Ee))return new Ee(pe);const V=this instanceof ec();this._readableState=new Pe(pe,this,V),pe&&(typeof pe.read=="function"&&(this._read=pe.read),typeof pe.destroy=="function"&&(this._destroy=pe.destroy),typeof pe.construct=="function"&&(this._construct=pe.construct),pe.signal&&!V&&x(pe.signal,this)),v.call(this,pe),k.construct(this,()=>{this._readableState.needReadable&&O(this,this._readableState)})}Ee.prototype.destroy=k.destroy,Ee.prototype._undestroy=k.undestroy,Ee.prototype._destroy=function(pe,V){V(pe)},Ee.prototype[y.captureRejectionSymbol]=function(pe){this.destroy(pe)},Ee.prototype[d]=function(){let pe;return this.destroyed||(pe=this.readableEnded?null:new q,this.destroy(pe)),new l((V,H)=>S(this,W=>W&&W!==pe?H(W):V(null)))},Ee.prototype.push=function(pe,V){return We(this,pe,V,!1)},Ee.prototype.unshift=function(pe,V){return We(this,pe,V,!0)};function We(pe,V,H,W){E("readableAddChunk",V);const he=pe._readableState;let Ne;if((he.state&J)===0&&(typeof V=="string"?(H=H||he.defaultEncoding,he.encoding!==H&&(W&&he.encoding?V=w.from(V,H).toString(he.encoding):(V=w.from(V,H),H=""))):V instanceof w?H="":v._isUint8Array(V)?(V=v._uint8ArrayToBuffer(V),H=""):V!=null&&(Ne=new L("chunk",["string","Buffer","Uint8Array"],V))),Ne)D(pe,Ne);else if(V===null)he.state&=-9,Pt(pe,he);else if((he.state&J)!==0||V&&V.length>0)if(W)if((he.state&ie)!==0)D(pe,new K);else{if(he.destroyed||he.errored)return!1;Nt(pe,he,V,!0)}else if(he.ended)D(pe,new P);else{if(he.destroyed||he.errored)return!1;he.state&=-9,he.decoder&&!H?(V=he.decoder.write(V),he.objectMode||V.length!==0?Nt(pe,he,V,!1):O(pe,he)):Nt(pe,he,V,!1)}else W||(he.state&=-9,O(pe,he));return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function Nt(pe,V,H,W){V.flowing&&V.length===0&&!V.sync&&pe.listenerCount("data")>0?((V.state&ue)!==0?V.awaitDrainWriters.clear():V.awaitDrainWriters=null,V.dataEmitted=!0,pe.emit("data",H)):(V.length+=V.objectMode?1:H.length,W?V.buffer.unshift(H):V.buffer.push(H),(V.state&Ae)!==0&&Zt(pe)),O(pe,V)}Ee.prototype.isPaused=function(){const pe=this._readableState;return pe[ae]===!0||pe.flowing===!1},Ee.prototype.setEncoding=function(pe){const V=new te(pe);this._readableState.decoder=V,this._readableState.encoding=this._readableState.decoder.encoding;const H=this._readableState.buffer;let W="";for(const he of H)W+=V.write(he);return H.clear(),W!==""&&H.push(W),this._readableState.length=W.length,this};const it=1073741824;function _t(pe){if(pe>it)throw new Z("size","<= 1GiB",pe);return pe--,pe|=pe>>>1,pe|=pe>>>2,pe|=pe>>>4,pe|=pe>>>8,pe|=pe>>>16,pe++,pe}function Ft(pe,V){return pe<=0||V.length===0&&V.ended?0:(V.state&J)!==0?1:r(pe)?V.flowing&&V.length?V.buffer.first().length:V.length:pe<=V.length?pe:V.ended?V.length:0}Ee.prototype.read=function(pe){E("read",pe),pe===void 0?pe=NaN:n(pe)||(pe=a(pe,10));const V=this._readableState,H=pe;if(pe>V.highWaterMark&&(V.highWaterMark=_t(pe)),pe!==0&&(V.state&=-129),pe===0&&V.needReadable&&((V.highWaterMark!==0?V.length>=V.highWaterMark:V.length>0)||V.ended))return E("read: emitReadable",V.length,V.ended),V.length===0&&V.ended?nt(this):Zt(this),null;if(pe=Ft(pe,V),pe===0&&V.ended)return V.length===0&&nt(this),null;let W=(V.state&Ae)!==0;if(E("need readable",W),(V.length===0||V.length-pe<V.highWaterMark)&&(W=!0,E("length less than watermark",W)),V.ended||V.reading||V.destroyed||V.errored||!V.constructed)W=!1,E("reading, ended or constructing",W);else if(W){E("do read"),V.state|=me|Me,V.length===0&&(V.state|=Ae);try{this._read(V.highWaterMark)}catch(Ne){D(this,Ne)}V.state&=-33,V.reading||(pe=Ft(H,V))}let he;return pe>0?he=Be(pe,V):he=null,he===null?(V.needReadable=V.length<=V.highWaterMark,pe=0):(V.length-=pe,V.multiAwaitDrain?V.awaitDrainWriters.clear():V.awaitDrainWriters=null),V.length===0&&(V.ended||(V.needReadable=!0),H!==pe&&V.ended&&nt(this)),he!==null&&!V.errorEmitted&&!V.closeEmitted&&(V.dataEmitted=!0,this.emit("data",he)),he};function Pt(pe,V){if(E("onEofChunk"),!V.ended){if(V.decoder){const H=V.decoder.end();H&&H.length&&(V.buffer.push(H),V.length+=V.objectMode?1:H.length)}V.ended=!0,V.sync?Zt(pe):(V.needReadable=!1,V.emittedReadable=!0,ye(pe))}}function Zt(pe){const V=pe._readableState;E("emitReadable",V.needReadable,V.emittedReadable),V.needReadable=!1,V.emittedReadable||(E("emitReadable",V.flowing),V.emittedReadable=!0,e.nextTick(ye,pe))}function ye(pe){const V=pe._readableState;E("emitReadable_",V.destroyed,V.length,V.ended),!V.destroyed&&!V.errored&&(V.length||V.ended)&&(pe.emit("readable"),V.emittedReadable=!1),V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark,ft(pe)}function O(pe,V){!V.readingMore&&V.constructed&&(V.readingMore=!0,e.nextTick(G,pe,V))}function G(pe,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&V.length===0);){const H=V.length;if(E("maybeReadMore read 0"),pe.read(0),H===V.length)break}V.readingMore=!1}Ee.prototype._read=function(pe){throw new B("_read()")},Ee.prototype.pipe=function(pe,V){const H=this,W=this._readableState;W.pipes.length===1&&(W.multiAwaitDrain||(W.multiAwaitDrain=!0,W.awaitDrainWriters=new u(W.awaitDrainWriters?[W.awaitDrainWriters]:[]))),W.pipes.push(pe),E("pipe count=%d opts=%j",W.pipes.length,V);const Ne=(!V||V.end!==!1)&&pe!==e.stdout&&pe!==e.stderr?pt:_r;W.endEmitted?e.nextTick(Ne):H.once("end",Ne),pe.on("unpipe",He);function He(Fn,fi){E("onunpipe"),Fn===H&&fi&&fi.hasUnpiped===!1&&(fi.hasUnpiped=!0,Rt())}function pt(){E("onend"),pe.end()}let Kt,ut=!1;function Rt(){E("cleanup"),pe.removeListener("close",Wn),pe.removeListener("finish",xr),Kt&&pe.removeListener("drain",Kt),pe.removeListener("error",An),pe.removeListener("unpipe",He),H.removeListener("end",pt),H.removeListener("end",_r),H.removeListener("data",Qt),ut=!0,Kt&&W.awaitDrainWriters&&(!pe._writableState||pe._writableState.needDrain)&&Kt()}function Lt(){ut||(W.pipes.length===1&&W.pipes[0]===pe?(E("false write response, pause",0),W.awaitDrainWriters=pe,W.multiAwaitDrain=!1):W.pipes.length>1&&W.pipes.includes(pe)&&(E("false write response, pause",W.awaitDrainWriters.size),W.awaitDrainWriters.add(pe)),H.pause()),Kt||(Kt=fe(H,pe),pe.on("drain",Kt))}H.on("data",Qt);function Qt(Fn){E("ondata");const fi=pe.write(Fn);E("dest.write",fi),fi===!1&&Lt()}function An(Fn){if(E("onerror",Fn),_r(),pe.removeListener("error",An),pe.listenerCount("error")===0){const fi=pe._writableState||pe._readableState;fi&&!fi.errorEmitted?D(pe,Fn):pe.emit("error",Fn)}}b(pe,"error",An);function Wn(){pe.removeListener("finish",xr),_r()}pe.once("close",Wn);function xr(){E("onfinish"),pe.removeListener("close",Wn),_r()}pe.once("finish",xr);function _r(){E("unpipe"),H.unpipe(pe)}return pe.emit("pipe",H),pe.writableNeedDrain===!0?Lt():W.flowing||(E("pipe resume"),H.resume()),pe};function fe(pe,V){return function(){const W=pe._readableState;W.awaitDrainWriters===V?(E("pipeOnDrain",1),W.awaitDrainWriters=null):W.multiAwaitDrain&&(E("pipeOnDrain",W.awaitDrainWriters.size),W.awaitDrainWriters.delete(V)),(!W.awaitDrainWriters||W.awaitDrainWriters.size===0)&&pe.listenerCount("data")&&pe.resume()}}Ee.prototype.unpipe=function(pe){const V=this._readableState,H={hasUnpiped:!1};if(V.pipes.length===0)return this;if(!pe){const he=V.pipes;V.pipes=[],this.pause();for(let Ne=0;Ne<he.length;Ne++)he[Ne].emit("unpipe",this,{hasUnpiped:!1});return this}const W=t(V.pipes,pe);return W===-1?this:(V.pipes.splice(W,1),V.pipes.length===0&&this.pause(),pe.emit("unpipe",this,H),this)},Ee.prototype.on=function(pe,V){const H=v.prototype.on.call(this,pe,V),W=this._readableState;return pe==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):pe==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,E("on readable",W.length,W.reading),W.length?Zt(this):W.reading||e.nextTick(be,this)),H},Ee.prototype.addListener=Ee.prototype.on,Ee.prototype.removeListener=function(pe,V){const H=v.prototype.removeListener.call(this,pe,V);return pe==="readable"&&e.nextTick(je,this),H},Ee.prototype.off=Ee.prototype.removeListener,Ee.prototype.removeAllListeners=function(pe){const V=v.prototype.removeAllListeners.apply(this,arguments);return(pe==="readable"||pe===void 0)&&e.nextTick(je,this),V};function je(pe){const V=pe._readableState;V.readableListening=pe.listenerCount("readable")>0,V.resumeScheduled&&V[ae]===!1?V.flowing=!0:pe.listenerCount("data")>0?pe.resume():V.readableListening||(V.flowing=null)}function be(pe){E("readable nexttick read 0"),pe.read(0)}Ee.prototype.resume=function(){const pe=this._readableState;return pe.flowing||(E("resume"),pe.flowing=!pe.readableListening,Ce(this,pe)),pe[ae]=!1,this};function Ce(pe,V){V.resumeScheduled||(V.resumeScheduled=!0,e.nextTick(le,pe,V))}function le(pe,V){E("resume",V.reading),V.reading||pe.read(0),V.resumeScheduled=!1,pe.emit("resume"),ft(pe),V.flowing&&!V.reading&&pe.read(0)}Ee.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ae]=!0,this};function ft(pe){const V=pe._readableState;for(E("flow",V.flowing);V.flowing&&pe.read()!==null;);}Ee.prototype.wrap=function(pe){let V=!1;pe.on("data",W=>{!this.push(W)&&pe.pause&&(V=!0,pe.pause())}),pe.on("end",()=>{this.push(null)}),pe.on("error",W=>{D(this,W)}),pe.on("close",()=>{this.destroy()}),pe.on("destroy",()=>{this.destroy()}),this._read=()=>{V&&pe.resume&&(V=!1,pe.resume())};const H=s(pe);for(let W=1;W<H.length;W++){const he=H[W];this[he]===void 0&&typeof pe[he]=="function"&&(this[he]=pe[he].bind(pe))}return this},Ee.prototype[h]=function(){return vt(this)},Ee.prototype.iterator=function(pe){return pe!==void 0&&de(pe,"options"),vt(this,pe)};function vt(pe,V){typeof pe.read!="function"&&(pe=Ee.wrap(pe,{objectMode:!0}));const H=F(pe,V);return H.stream=pe,H}async function*F(pe,V){let H=re;function W(He){this===pe?(H(),H=re):H=He}pe.on("readable",W);let he;const Ne=S(pe,{writable:!1},He=>{he=He?j(he,He):null,H(),H=re});try{for(;;){const He=pe.destroyed?null:pe.read();if(He!==null)yield He;else{if(he)throw he;if(he===null)return;await new l(W)}}}catch(He){throw he=j(he,He),he}finally{(he||(V==null?void 0:V.destroyOnReturn)!==!1)&&(he===void 0||pe._readableState.autoDestroy)?k.destroyer(pe,null):(pe.off("readable",W),Ne())}}i(Ee.prototype,{readable:{__proto__:null,get(){const pe=this._readableState;return!!pe&&pe.readable!==!1&&!pe.destroyed&&!pe.errorEmitted&&!pe.endEmitted},set(pe){this._readableState&&(this._readableState.readable=!!pe)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(pe){this._readableState&&(this._readableState.flowing=pe)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(pe){this._readableState&&(this._readableState.destroyed=pe)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Pe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ae]!==!1},set(pe){this[ae]=!!pe}}}),Ee._fromList=Be;function Be(pe,V){if(V.length===0)return null;let H;return V.objectMode?H=V.buffer.shift():!pe||pe>=V.length?(V.decoder?H=V.buffer.join(""):V.buffer.length===1?H=V.buffer.first():H=V.buffer.concat(V.length),V.buffer.clear()):H=V.buffer.consume(pe,V.decoder),H}function nt(pe){const V=pe._readableState;E("endReadable",V.endEmitted),V.endEmitted||(V.ended=!0,e.nextTick(ge,V,pe))}function ge(pe,V){if(E("endReadableNT",pe.endEmitted,pe.length),!pe.errored&&!pe.closeEmitted&&!pe.endEmitted&&pe.length===0){if(pe.endEmitted=!0,V.emit("end"),V.writable&&V.allowHalfOpen===!1)e.nextTick(Oe,V);else if(pe.autoDestroy){const H=V._writableState;(!H||H.autoDestroy&&(H.finished||H.writable===!1))&&V.destroy()}}}function Oe(pe){pe.writable&&!pe.writableEnded&&!pe.destroyed&&pe.end()}Ee.from=function(pe,V){return X(Ee,pe,V)};let Ke;function jt(){return Ke===void 0&&(Ke={}),Ke}return Ee.fromWeb=function(pe,V){return jt().newStreamReadableFromReadableStream(pe,V)},Ee.toWeb=function(pe,V){return jt().newReadableStreamFromStreamReadable(pe,V)},Ee.wrap=function(pe,V){var H,W;return new Ee({objectMode:(H=(W=pe.readableObjectMode)!==null&&W!==void 0?W:pe.objectMode)!==null&&H!==void 0?H:!0,...V,destroy(he,Ne){k.destroyer(pe,he),Ne(he)}}).wrap(pe)},dE}var fE,Mj;function mT(){if(Mj)return fE;Mj=1;const e=rf(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:u}=Jr();fE=de,de.WritableState=K;const{EventEmitter:d}=Tx(),h=hT().Stream,{Buffer:p}=Nu(),y=sp(),{addAbortSignal:v}=Ax(),{getHighWaterMark:b,getDefaultHighWaterMark:w}=Nx(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:j,ERR_UNKNOWN_ENCODING:L}=Ci().codes,{errorOrDestroy:B}=y;s(de.prototype,h.prototype),s(de,h);function Z(){}const P=l("kOnFinished");function K(Ie,z,Se){typeof Se!="boolean"&&(Se=z instanceof ec()),this.objectMode=!!(Ie&&Ie.objectMode),Se&&(this.objectMode=this.objectMode||!!(Ie&&Ie.writableObjectMode)),this.highWaterMark=Ie?b(this,Ie,"writableHighWaterMark",Se):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Te=!!(Ie&&Ie.decodeStrings===!1);this.decodeStrings=!Te,this.defaultEncoding=Ie&&Ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=D.bind(void 0,z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,q(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ie||Ie.emitClose!==!1,this.autoDestroy=!Ie||Ie.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function q(Ie){Ie.buffered=[],Ie.bufferedIndex=0,Ie.allBuffers=!0,Ie.allNoop=!0}K.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(K.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function de(Ie){const z=this instanceof ec();if(!z&&!r(de,this))return new de(Ie);this._writableState=new K(Ie,this,z),Ie&&(typeof Ie.write=="function"&&(this._write=Ie.write),typeof Ie.writev=="function"&&(this._writev=Ie.writev),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy),typeof Ie.final=="function"&&(this._final=Ie.final),typeof Ie.construct=="function"&&(this._construct=Ie.construct),Ie.signal&&v(Ie.signal,this)),h.call(this,Ie),y.construct(this,()=>{const Se=this._writableState;Se.writing||me(this,Se),Re(this,Se)})}a(de,u,{__proto__:null,value:function(Ie){return r(this,Ie)?!0:this!==de?!1:Ie&&Ie._writableState instanceof K}}),de.prototype.pipe=function(){B(this,new C)};function ae(Ie,z,Se,Te){const ue=Ie._writableState;if(typeof Se=="function")Te=Se,Se=ue.defaultEncoding;else{if(!Se)Se=ue.defaultEncoding;else if(Se!=="buffer"&&!p.isEncoding(Se))throw new L(Se);typeof Te!="function"&&(Te=Z)}if(z===null)throw new R;if(!ue.objectMode)if(typeof z=="string")ue.decodeStrings!==!1&&(z=p.from(z,Se),Se="buffer");else if(z instanceof p)Se="buffer";else if(h._isUint8Array(z))z=h._uint8ArrayToBuffer(z),Se="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],z);let oe;return ue.ending?oe=new j:ue.destroyed&&(oe=new k("write")),oe?(e.nextTick(Te,oe),B(Ie,oe,!0),oe):(ue.pendingcb++,te(Ie,ue,z,Se,Te))}de.prototype.write=function(Ie,z,Se){return ae(this,Ie,z,Se)===!0},de.prototype.cork=function(){this._writableState.corked++},de.prototype.uncork=function(){const Ie=this._writableState;Ie.corked&&(Ie.corked--,Ie.writing||me(this,Ie))},de.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=o(z)),!p.isEncoding(z))throw new L(z);return this._writableState.defaultEncoding=z,this};function te(Ie,z,Se,Te,ue){const oe=z.objectMode?1:Se.length;z.length+=oe;const ee=z.length<z.highWaterMark;return ee||(z.needDrain=!0),z.writing||z.corked||z.errored||!z.constructed?(z.buffered.push({chunk:Se,encoding:Te,callback:ue}),z.allBuffers&&Te!=="buffer"&&(z.allBuffers=!1),z.allNoop&&ue!==Z&&(z.allNoop=!1)):(z.writelen=oe,z.writecb=ue,z.writing=!0,z.sync=!0,Ie._write(Se,Te,z.onwrite),z.sync=!1),ee&&!z.errored&&!z.destroyed}function X(Ie,z,Se,Te,ue,oe,ee){z.writelen=Te,z.writecb=ee,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new k("write")):Se?Ie._writev(ue,z.onwrite):Ie._write(ue,oe,z.onwrite),z.sync=!1}function re(Ie,z,Se,Te){--z.pendingcb,Te(Se),ie(z),B(Ie,Se)}function D(Ie,z){const Se=Ie._writableState,Te=Se.sync,ue=Se.writecb;if(typeof ue!="function"){B(Ie,new E);return}Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0,z?(z.stack,Se.errored||(Se.errored=z),Ie._readableState&&!Ie._readableState.errored&&(Ie._readableState.errored=z),Te?e.nextTick(re,Ie,Se,z,ue):re(Ie,Se,z,ue)):(Se.buffered.length>Se.bufferedIndex&&me(Ie,Se),Te?Se.afterWriteTickInfo!==null&&Se.afterWriteTickInfo.cb===ue?Se.afterWriteTickInfo.count++:(Se.afterWriteTickInfo={count:1,cb:ue,stream:Ie,state:Se},e.nextTick(J,Se.afterWriteTickInfo)):Q(Ie,Se,1,ue))}function J({stream:Ie,state:z,count:Se,cb:Te}){return z.afterWriteTickInfo=null,Q(Ie,z,Se,Te)}function Q(Ie,z,Se,Te){for(!z.ending&&!Ie.destroyed&&z.length===0&&z.needDrain&&(z.needDrain=!1,Ie.emit("drain"));Se-- >0;)z.pendingcb--,Te();z.destroyed&&ie(z),Re(Ie,z)}function ie(Ie){if(Ie.writing)return;for(let ue=Ie.bufferedIndex;ue<Ie.buffered.length;++ue){var z;const{chunk:oe,callback:ee}=Ie.buffered[ue],xe=Ie.objectMode?1:oe.length;Ie.length-=xe,ee((z=Ie.errored)!==null&&z!==void 0?z:new k("write"))}const Se=Ie[P].splice(0);for(let ue=0;ue<Se.length;ue++){var Te;Se[ue]((Te=Ie.errored)!==null&&Te!==void 0?Te:new k("end"))}q(Ie)}function me(Ie,z){if(z.corked||z.bufferProcessing||z.destroyed||!z.constructed)return;const{buffered:Se,bufferedIndex:Te,objectMode:ue}=z,oe=Se.length-Te;if(!oe)return;let ee=Te;if(z.bufferProcessing=!0,oe>1&&Ie._writev){z.pendingcb-=oe-1;const xe=z.allNoop?Z:Ee=>{for(let We=ee;We<Se.length;++We)Se[We].callback(Ee)},Pe=z.allNoop&&ee===0?Se:t(Se,ee);Pe.allBuffers=z.allBuffers,X(Ie,z,!0,z.length,Pe,"",xe),q(z)}else{do{const{chunk:xe,encoding:Pe,callback:Ee}=Se[ee];Se[ee++]=null;const We=ue?1:xe.length;X(Ie,z,!1,We,xe,Pe,Ee)}while(ee<Se.length&&!z.writing);ee===Se.length?q(z):ee>256?(Se.splice(0,ee),z.bufferedIndex=0):z.bufferedIndex=ee}z.bufferProcessing=!1}de.prototype._write=function(Ie,z,Se){if(this._writev)this._writev([{chunk:Ie,encoding:z}],Se);else throw new S("_write()")},de.prototype._writev=null,de.prototype.end=function(Ie,z,Se){const Te=this._writableState;typeof Ie=="function"?(Se=Ie,Ie=null,z=null):typeof z=="function"&&(Se=z,z=null);let ue;if(Ie!=null){const oe=ae(this,Ie,z);oe instanceof n&&(ue=oe)}return Te.corked&&(Te.corked=1,this.uncork()),ue||(!Te.errored&&!Te.ending?(Te.ending=!0,Re(this,Te,!0),Te.ended=!0):Te.finished?ue=new I("end"):Te.destroyed&&(ue=new k("end"))),typeof Se=="function"&&(ue||Te.finished?e.nextTick(Se,ue):Te[P].push(Se)),this};function ve(Ie){return Ie.ending&&!Ie.destroyed&&Ie.constructed&&Ie.length===0&&!Ie.errored&&Ie.buffered.length===0&&!Ie.finished&&!Ie.writing&&!Ie.errorEmitted&&!Ie.closeEmitted}function Me(Ie,z){let Se=!1;function Te(ue){if(Se){B(Ie,ue??E());return}if(Se=!0,z.pendingcb--,ue){const oe=z[P].splice(0);for(let ee=0;ee<oe.length;ee++)oe[ee](ue);B(Ie,ue,z.sync)}else ve(z)&&(z.prefinished=!0,Ie.emit("prefinish"),z.pendingcb++,e.nextTick(ke,Ie,z))}z.sync=!0,z.pendingcb++;try{Ie._final(Te)}catch(ue){Te(ue)}z.sync=!1}function Ae(Ie,z){!z.prefinished&&!z.finalCalled&&(typeof Ie._final=="function"&&!z.destroyed?(z.finalCalled=!0,Me(Ie,z)):(z.prefinished=!0,Ie.emit("prefinish")))}function Re(Ie,z,Se){ve(z)&&(Ae(Ie,z),z.pendingcb===0&&(Se?(z.pendingcb++,e.nextTick((Te,ue)=>{ve(ue)?ke(Te,ue):ue.pendingcb--},Ie,z)):ve(z)&&(z.pendingcb++,ke(Ie,z))))}function ke(Ie,z){z.pendingcb--,z.finished=!0;const Se=z[P].splice(0);for(let Te=0;Te<Se.length;Te++)Se[Te]();if(Ie.emit("finish"),z.autoDestroy){const Te=Ie._readableState;(!Te||Te.autoDestroy&&(Te.endEmitted||Te.readable===!1))&&Ie.destroy()}}i(de.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ie){this._writableState&&(this._writableState.destroyed=Ie)}},writable:{__proto__:null,get(){const Ie=this._writableState;return!!Ie&&Ie.writable!==!1&&!Ie.destroyed&&!Ie.errored&&!Ie.ending&&!Ie.ended},set(Ie){this._writableState&&(this._writableState.writable=!!Ie)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ie=this._writableState;return Ie?!Ie.destroyed&&!Ie.ending&&Ie.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Fe=y.destroy;de.prototype.destroy=function(Ie,z){const Se=this._writableState;return!Se.destroyed&&(Se.bufferedIndex<Se.buffered.length||Se[P].length)&&e.nextTick(ie,Se),Fe.call(this,Ie,z),this},de.prototype._undestroy=y.undestroy,de.prototype._destroy=function(Ie,z){z(Ie)},de.prototype[d.captureRejectionSymbol]=function(Ie){this.destroy(Ie)};let et;function Le(){return et===void 0&&(et={}),et}return de.fromWeb=function(Ie,z){return Le().newStreamWritableFromWritableStream(Ie,z)},de.toWeb=function(Ie){return Le().newWritableStreamFromStreamWritable(Ie)},fE}var hE,Pj;function Ste(){if(Pj)return hE;Pj=1;const e=rf(),t=Nu(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:s,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:d}=cc(),h=Ru(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:v}}=Ci(),{destroyer:b}=sp(),w=ec(),x=Rx(),S=mT(),{createDeferredPromise:E}=Pi(),C=ZP(),k=globalThis.Blob||t.Blob,I=typeof k<"u"?function(K){return K instanceof k}:function(K){return!1},R=globalThis.AbortController||Rg().AbortController,{FunctionPrototypeCall:j}=Jr();class L extends w{constructor(K){super(K),(K==null?void 0:K.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(K==null?void 0:K.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}hE=function P(K,q){if(l(K))return K;if(s(K))return Z({readable:K});if(o(K))return Z({writable:K});if(i(K))return Z({writable:!1,readable:!1});if(u(K))return Z({readable:x.fromWeb(K)});if(d(K))return Z({writable:S.fromWeb(K)});if(typeof K=="function"){const{value:ae,write:te,final:X,destroy:re}=B(K);if(a(ae))return C(L,ae,{objectMode:!0,write:te,final:X,destroy:re});const D=ae==null?void 0:ae.then;if(typeof D=="function"){let J;const Q=j(D,ae,ie=>{if(ie!=null)throw new v("nully","body",ie)},ie=>{b(J,ie)});return J=new L({objectMode:!0,readable:!1,write:te,final(ie){X(async()=>{try{await Q,e.nextTick(ie,null)}catch(me){e.nextTick(ie,me)}})},destroy:re})}throw new v("Iterable, AsyncIterable or AsyncFunction",q,ae)}if(I(K))return P(K.arrayBuffer());if(a(K))return C(L,K,{objectMode:!0,writable:!1});if(u(K==null?void 0:K.readable)&&d(K==null?void 0:K.writable))return L.fromWeb(K);if(typeof(K==null?void 0:K.writable)=="object"||typeof(K==null?void 0:K.readable)=="object"){const ae=K!=null&&K.readable?s(K==null?void 0:K.readable)?K==null?void 0:K.readable:P(K.readable):void 0,te=K!=null&&K.writable?o(K==null?void 0:K.writable)?K==null?void 0:K.writable:P(K.writable):void 0;return Z({readable:ae,writable:te})}const de=K==null?void 0:K.then;if(typeof de=="function"){let ae;return j(de,K,te=>{te!=null&&ae.push(te),ae.push(null)},te=>{b(ae,te)}),ae=new L({objectMode:!0,writable:!1,read(){}})}throw new y(q,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],K)};function B(P){let{promise:K,resolve:q}=E();const de=new R,ae=de.signal;return{value:P(async function*(){for(;;){const X=K;K=null;const{chunk:re,done:D,cb:J}=await X;if(e.nextTick(J),D)return;if(ae.aborted)throw new p(void 0,{cause:ae.reason});({promise:K,resolve:q}=E()),yield re}}(),{signal:ae}),write(X,re,D){const J=q;q=null,J({chunk:X,done:!1,cb:D})},final(X){const re=q;q=null,re({done:!0,cb:X})},destroy(X,re){de.abort(),re(X)}}}function Z(P){const K=P.readable&&typeof P.readable.read!="function"?x.wrap(P.readable):P.readable,q=P.writable;let de=!!n(K),ae=!!r(q),te,X,re,D,J;function Q(ie){const me=D;D=null,me?me(ie):ie&&J.destroy(ie)}return J=new L({readableObjectMode:!!(K!=null&&K.readableObjectMode),writableObjectMode:!!(q!=null&&q.writableObjectMode),readable:de,writable:ae}),ae&&(h(q,ie=>{ae=!1,ie&&b(K,ie),Q(ie)}),J._write=function(ie,me,ve){q.write(ie,me)?ve():te=ve},J._final=function(ie){q.end(),X=ie},q.on("drain",function(){if(te){const ie=te;te=null,ie()}}),q.on("finish",function(){if(X){const ie=X;X=null,ie()}})),de&&(h(K,ie=>{de=!1,ie&&b(K,ie),Q(ie)}),K.on("readable",function(){if(re){const ie=re;re=null,ie()}}),K.on("end",function(){J.push(null)}),J._read=function(){for(;;){const ie=K.read();if(ie===null){re=J._read;return}if(!J.push(ie))return}}),J._destroy=function(ie,me){!ie&&D!==null&&(ie=new p),re=null,te=null,X=null,D===null?me(ie):(D=me,b(q,ie),b(K,ie))},J}return hE}var pE,Fj;function ec(){if(Fj)return pE;Fj=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Jr();pE=s;const a=Rx(),i=mT();r(s.prototype,a.prototype),r(s,a);{const d=n(i.prototype);for(let h=0;h<d.length;h++){const p=d[h];s.prototype[p]||(s.prototype[p]=i.prototype[p])}}function s(d){if(!(this instanceof s))return new s(d);a.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let o;function l(){return o===void 0&&(o={}),o}s.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},s.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let u;return s.from=function(d){return u||(u=Ste()),u(d,"body")},pE}var mE,Lj;function YP(){if(Lj)return mE;Lj=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Jr();mE=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=Ci().codes,r=ec(),{getHighWaterMark:a}=Nx();e(s.prototype,r.prototype),e(s,r);const i=t("kCallback");function s(u){if(!(this instanceof s))return new s(u);const d=u?a(this,u,"readableHighWaterMark",!0):null;d===0&&(u={...u,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[i]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function o(u){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){u?u(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==o&&o.call(this)}return s.prototype._final=o,s.prototype._transform=function(u,d,h){throw new n("_transform()")},s.prototype._write=function(u,d,h){const p=this._readableState,y=this._writableState,v=p.length;this._transform(u,d,(b,w)=>{if(b){h(b);return}w!=null&&this.push(w),y.ended||v===p.length||p.length<p.highWaterMark?h():this[i]=h})},s.prototype._read=function(){if(this[i]){const u=this[i];this[i]=null,u()}},mE}var gE,$j;function XP(){if($j)return gE;$j=1;const{ObjectSetPrototypeOf:e}=Jr();gE=n;const t=YP();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},gE}var yE,Bj;function gT(){if(Bj)return yE;Bj=1;const e=rf(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Jr(),i=Ru(),{once:s}=Pi(),o=sp(),l=ec(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=Ci(),{validateFunction:w,validateAbortSignal:x}=_0(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:k,isTransformStream:I,isWebStream:R,isReadableStream:j,isReadableFinished:L}=cc(),B=globalThis.AbortController||Rg().AbortController;let Z,P,K;function q(ie,me,ve){let Me=!1;ie.on("close",()=>{Me=!0});const Ae=i(ie,{readable:me,writable:ve},Re=>{Me=!Re});return{destroy:Re=>{Me||(Me=!0,o.destroyer(ie,Re||new y("pipe")))},cleanup:Ae}}function de(ie){return w(ie[ie.length-1],"streams[stream.length - 1]"),ie.pop()}function ae(ie){if(S(ie))return ie;if(C(ie))return te(ie);throw new d("val",["Readable","Iterable","AsyncIterable"],ie)}async function*te(ie){P||(P=Rx()),yield*P.prototype[r].call(ie)}async function X(ie,me,ve,{end:Me}){let Ae,Re=null;const ke=Le=>{if(Le&&(Ae=Le),Re){const Ie=Re;Re=null,Ie()}},Fe=()=>new n((Le,Ie)=>{Ae?Ie(Ae):Re=()=>{Ae?Ie(Ae):Le()}});me.on("drain",ke);const et=i(me,{readable:!1},ke);try{me.writableNeedDrain&&await Fe();for await(const Le of ie)me.write(Le)||await Fe();Me&&(me.end(),await Fe()),ve()}catch(Le){ve(Ae!==Le?u(Ae,Le):Le)}finally{et(),me.off("drain",ke)}}async function re(ie,me,ve,{end:Me}){I(me)&&(me=me.writable);const Ae=me.getWriter();try{for await(const Re of ie)await Ae.ready,Ae.write(Re).catch(()=>{});await Ae.ready,Me&&await Ae.close(),ve()}catch(Re){try{await Ae.abort(Re),ve(Re)}catch(ke){ve(ke)}}}function D(...ie){return J(ie,s(de(ie)))}function J(ie,me,ve){if(ie.length===1&&t(ie[0])&&(ie=ie[0]),ie.length<2)throw new p("streams");const Me=new B,Ae=Me.signal,Re=ve==null?void 0:ve.signal,ke=[];x(Re,"options.signal");function Fe(){ue(new b)}K=K||Pi().addAbortListener;let et;Re&&(et=K(Re,Fe));let Le,Ie;const z=[];let Se=0;function Te(Ee){ue(Ee,--Se===0)}function ue(Ee,We){var Nt;if(Ee&&(!Le||Le.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Le=Ee),!(!Le&&!We)){for(;z.length;)z.shift()(Le);(Nt=et)===null||Nt===void 0||Nt[a](),Me.abort(),We&&(Le||ke.forEach(it=>it()),e.nextTick(me,Le,Ie))}}let oe;for(let Ee=0;Ee<ie.length;Ee++){const We=ie[Ee],Nt=Ee<ie.length-1,it=Ee>0,_t=Nt||(ve==null?void 0:ve.end)!==!1,Ft=Ee===ie.length-1;if(k(We)){let Pt=function(Zt){Zt&&Zt.name!=="AbortError"&&Zt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Te(Zt)};var Pe=Pt;if(_t){const{destroy:Zt,cleanup:ye}=q(We,Nt,it);z.push(Zt),E(We)&&Ft&&ke.push(ye)}We.on("error",Pt),E(We)&&Ft&&ke.push(()=>{We.removeListener("error",Pt)})}if(Ee===0)if(typeof We=="function"){if(oe=We({signal:Ae}),!S(oe))throw new h("Iterable, AsyncIterable or Stream","source",oe)}else S(We)||C(We)||I(We)?oe=We:oe=l.from(We);else if(typeof We=="function"){if(I(oe)){var ee;oe=ae((ee=oe)===null||ee===void 0?void 0:ee.readable)}else oe=ae(oe);if(oe=We(oe,{signal:Ae}),Nt){if(!S(oe,!0))throw new h("AsyncIterable",`transform[${Ee-1}]`,oe)}else{var xe;Z||(Z=XP());const Pt=new Z({objectMode:!0}),Zt=(xe=oe)===null||xe===void 0?void 0:xe.then;if(typeof Zt=="function")Se++,Zt.call(oe,G=>{Ie=G,G!=null&&Pt.write(G),_t&&Pt.end(),e.nextTick(Te)},G=>{Pt.destroy(G),e.nextTick(Te,G)});else if(S(oe,!0))Se++,X(oe,Pt,Te,{end:_t});else if(j(oe)||I(oe)){const G=oe.readable||oe;Se++,X(G,Pt,Te,{end:_t})}else throw new h("AsyncIterable or Promise","destination",oe);oe=Pt;const{destroy:ye,cleanup:O}=q(oe,!1,!0);z.push(ye),Ft&&ke.push(O)}}else if(k(We)){if(C(oe)){Se+=2;const Pt=Q(oe,We,Te,{end:_t});E(We)&&Ft&&ke.push(Pt)}else if(I(oe)||j(oe)){const Pt=oe.readable||oe;Se++,X(Pt,We,Te,{end:_t})}else if(S(oe))Se++,X(oe,We,Te,{end:_t});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=We}else if(R(We)){if(C(oe))Se++,re(ae(oe),We,Te,{end:_t});else if(j(oe)||S(oe))Se++,re(oe,We,Te,{end:_t});else if(I(oe))Se++,re(oe.readable,We,Te,{end:_t});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=We}else oe=l.from(We)}return(Ae!=null&&Ae.aborted||Re!=null&&Re.aborted)&&e.nextTick(Fe),oe}function Q(ie,me,ve,{end:Me}){let Ae=!1;if(me.on("close",()=>{Ae||ve(new v)}),ie.pipe(me,{end:!1}),Me){let ke=function(){Ae=!0,me.end()};var Re=ke;L(ie)?e.nextTick(ke):ie.once("end",ke)}else ve();return i(ie,{readable:!0,writable:!1},ke=>{const Fe=ie._readableState;ke&&ke.code==="ERR_STREAM_PREMATURE_CLOSE"&&Fe&&Fe.ended&&!Fe.errored&&!Fe.errorEmitted?ie.once("end",ve).once("error",ve):ve(ke)}),i(me,{readable:!1,writable:!0},ve)}return yE={pipelineImpl:J,pipeline:D},yE}var bE,zj;function JP(){if(zj)return bE;zj=1;const{pipeline:e}=gT(),t=ec(),{destroyer:n}=sp(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:s,isTransformStream:o,isWritableStream:l,isReadableStream:u}=cc(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:p}}=Ci(),y=Ru();return bE=function(...b){if(b.length===0)throw new p("streams");if(b.length===1)return t.from(b[0]);const w=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const Z=b.length-1;b[Z]=t.from(b[Z])}for(let Z=0;Z<b.length;++Z)if(!(!r(b[Z])&&!s(b[Z]))){if(Z<b.length-1&&!(a(b[Z])||u(b[Z])||o(b[Z])))throw new h(`streams[${Z}]`,w[Z],"must be readable");if(Z>0&&!(i(b[Z])||l(b[Z])||o(b[Z])))throw new h(`streams[${Z}]`,w[Z],"must be writable")}let x,S,E,C,k;function I(Z){const P=C;C=null,P?P(Z):Z?k.destroy(Z):!B&&!L&&k.destroy()}const R=b[0],j=e(b,I),L=!!(i(R)||l(R)||o(R)),B=!!(a(j)||u(j)||o(j));if(k=new t({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(j!=null&&j.readableObjectMode),writable:L,readable:B}),L){if(r(R))k._write=function(P,K,q){R.write(P,K)?q():x=q},k._final=function(P){R.end(),S=P},R.on("drain",function(){if(x){const P=x;x=null,P()}});else if(s(R)){const K=(o(R)?R.writable:R).getWriter();k._write=async function(q,de,ae){try{await K.ready,K.write(q).catch(()=>{}),ae()}catch(te){ae(te)}},k._final=async function(q){try{await K.ready,K.close().catch(()=>{}),S=q}catch(de){q(de)}}}const Z=o(j)?j.readable:j;y(Z,()=>{if(S){const P=S;S=null,P()}})}if(B){if(r(j))j.on("readable",function(){if(E){const Z=E;E=null,Z()}}),j.on("end",function(){k.push(null)}),k._read=function(){for(;;){const Z=j.read();if(Z===null){E=k._read;return}if(!k.push(Z))return}};else if(s(j)){const P=(o(j)?j.readable:j).getReader();k._read=async function(){for(;;)try{const{value:K,done:q}=await P.read();if(!k.push(K))return;if(q){k.push(null);return}}catch{return}}}}return k._destroy=function(Z,P){!Z&&C!==null&&(Z=new d),E=null,x=null,S=null,C===null?P(Z):(C=P,r(j)&&n(j,Z))},k},bE}var Uj;function Ete(){if(Uj)return Yb;Uj=1;const e=globalThis.AbortController||Rg().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=Ci(),{validateAbortSignal:s,validateInteger:o,validateObject:l}=_0(),u=Jr().Symbol("kWeak"),d=Jr().Symbol("kResistStopPropagation"),{finished:h}=Ru(),p=JP(),{addAbortSignalNoValidate:y}=Ax(),{isWritable:v,isNodeStream:b}=cc(),{deprecate:w}=Pi(),{ArrayPrototypePush:x,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:k,Promise:I,PromiseReject:R,PromiseResolve:j,PromisePrototypeThen:L,Symbol:B}=Jr(),Z=B("kEmpty"),P=B("kEof");function K(Re,ke){if(ke!=null&&l(ke,"options"),(ke==null?void 0:ke.signal)!=null&&s(ke.signal,"options.signal"),b(Re)&&!v(Re))throw new t("stream",Re,"must be writable");const Fe=p(this,Re);return ke!=null&&ke.signal&&y(ke.signal,Fe),Fe}function q(Re,ke){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);ke!=null&&l(ke,"options"),(ke==null?void 0:ke.signal)!=null&&s(ke.signal,"options.signal");let Fe=1;(ke==null?void 0:ke.concurrency)!=null&&(Fe=E(ke.concurrency));let et=Fe-1;return(ke==null?void 0:ke.highWaterMark)!=null&&(et=E(ke.highWaterMark)),o(Fe,"options.concurrency",1),o(et,"options.highWaterMark",0),et+=Fe,(async function*(){const Ie=Pi().AbortSignalAny([ke==null?void 0:ke.signal].filter(S)),z=this,Se=[],Te={signal:Ie};let ue,oe,ee=!1,xe=0;function Pe(){ee=!0,Ee()}function Ee(){xe-=1,We()}function We(){oe&&!ee&&xe<Fe&&Se.length<et&&(oe(),oe=null)}async function Nt(){try{for await(let it of z){if(ee)return;if(Ie.aborted)throw new i;try{if(it=Re(it,Te),it===Z)continue;it=j(it)}catch(_t){it=R(_t)}xe+=1,L(it,Ee,Pe),Se.push(it),ue&&(ue(),ue=null),!ee&&(Se.length>=et||xe>=Fe)&&await new I(_t=>{oe=_t})}Se.push(P)}catch(it){const _t=R(it);L(_t,Ee,Pe),Se.push(_t)}finally{ee=!0,ue&&(ue(),ue=null)}}Nt();try{for(;;){for(;Se.length>0;){const it=await Se[0];if(it===P)return;if(Ie.aborted)throw new i;it!==Z&&(yield it),Se.shift(),We()}await new I(it=>{ue=it})}}finally{ee=!0,oe&&(oe(),oe=null)}}).call(this)}function de(Re=void 0){return Re!=null&&l(Re,"options"),(Re==null?void 0:Re.signal)!=null&&s(Re.signal,"options.signal"),(async function*(){let Fe=0;for await(const Le of this){var et;if(Re!=null&&(et=Re.signal)!==null&&et!==void 0&&et.aborted)throw new i({cause:Re.signal.reason});yield[Fe++,Le]}}).call(this)}async function ae(Re,ke=void 0){for await(const Fe of D.call(this,Re,ke))return!0;return!1}async function te(Re,ke=void 0){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);return!await ae.call(this,async(...Fe)=>!await Re(...Fe),ke)}async function X(Re,ke){for await(const Fe of D.call(this,Re,ke))return Fe}async function re(Re,ke){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function Fe(et,Le){return await Re(et,Le),Z}for await(const et of q.call(this,Fe,ke));}function D(Re,ke){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function Fe(et,Le){return await Re(et,Le)?et:Z}return q.call(this,Fe,ke)}class J extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(Re,ke,Fe){var et;if(typeof Re!="function")throw new n("reducer",["Function","AsyncFunction"],Re);Fe!=null&&l(Fe,"options"),(Fe==null?void 0:Fe.signal)!=null&&s(Fe.signal,"options.signal");let Le=arguments.length>1;if(Fe!=null&&(et=Fe.signal)!==null&&et!==void 0&&et.aborted){const ue=new i(void 0,{cause:Fe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(ue)),ue}const Ie=new e,z=Ie.signal;if(Fe!=null&&Fe.signal){const ue={once:!0,[u]:this,[d]:!0};Fe.signal.addEventListener("abort",()=>Ie.abort(),ue)}let Se=!1;try{for await(const ue of this){var Te;if(Se=!0,Fe!=null&&(Te=Fe.signal)!==null&&Te!==void 0&&Te.aborted)throw new i;Le?ke=await Re(ke,ue,{signal:z}):(ke=ue,Le=!0)}if(!Se&&!Le)throw new J}finally{Ie.abort()}return ke}async function ie(Re){Re!=null&&l(Re,"options"),(Re==null?void 0:Re.signal)!=null&&s(Re.signal,"options.signal");const ke=[];for await(const et of this){var Fe;if(Re!=null&&(Fe=Re.signal)!==null&&Fe!==void 0&&Fe.aborted)throw new i(void 0,{cause:Re.signal.reason});x(ke,et)}return ke}function me(Re,ke){const Fe=q.call(this,Re,ke);return(async function*(){for await(const Le of Fe)yield*Le}).call(this)}function ve(Re){if(Re=C(Re),k(Re))return 0;if(Re<0)throw new a("number",">= 0",Re);return Re}function Me(Re,ke=void 0){return ke!=null&&l(ke,"options"),(ke==null?void 0:ke.signal)!=null&&s(ke.signal,"options.signal"),Re=ve(Re),(async function*(){var et;if(ke!=null&&(et=ke.signal)!==null&&et!==void 0&&et.aborted)throw new i;for await(const Ie of this){var Le;if(ke!=null&&(Le=ke.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;Re--<=0&&(yield Ie)}}).call(this)}function Ae(Re,ke=void 0){return ke!=null&&l(ke,"options"),(ke==null?void 0:ke.signal)!=null&&s(ke.signal,"options.signal"),Re=ve(Re),(async function*(){var et;if(ke!=null&&(et=ke.signal)!==null&&et!==void 0&&et.aborted)throw new i;for await(const Ie of this){var Le;if(ke!=null&&(Le=ke.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;if(Re-- >0&&(yield Ie),Re<=0)return}}).call(this)}return Yb.streamReturningOperators={asIndexedPairs:w(de,"readable.asIndexedPairs will be removed in a future version."),drop:Me,filter:D,flatMap:me,map:q,take:Ae,compose:K},Yb.promiseReturningOperators={every:te,forEach:re,reduce:Q,toArray:ie,some:ae,find:X},Yb}var vE,Hj;function QP(){if(Hj)return vE;Hj=1;const{ArrayPrototypePop:e,Promise:t}=Jr(),{isIterable:n,isNodeStream:r,isWebStream:a}=cc(),{pipelineImpl:i}=gT(),{finished:s}=Ru();e5();function o(...l){return new t((u,d)=>{let h,p;const y=l[l.length-1];if(y&&typeof y=="object"&&!r(y)&&!n(y)&&!a(y)){const v=e(l);h=v.signal,p=v.end}i(l,(v,b)=>{v?d(v):u(b)},{signal:h,end:p})})}return vE={finished:s,pipeline:o},vE}var qj;function e5(){if(qj)return ZS.exports;qj=1;const{Buffer:e}=Nu(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Jr(),{promisify:{custom:a}}=Pi(),{streamReturningOperators:i,promiseReturningOperators:s}=Ete(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Ci(),l=JP(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=Nx(),{pipeline:h}=gT(),{destroyer:p}=sp(),y=Ru(),v=QP(),b=cc(),w=ZS.exports=hT().Stream;w.isDestroyed=b.isDestroyed,w.isDisturbed=b.isDisturbed,w.isErrored=b.isErrored,w.isReadable=b.isReadable,w.isWritable=b.isWritable,w.Readable=Rx();for(const E of n(i)){let k=function(...I){if(new.target)throw o();return w.Readable.from(r(C,this,I))};var S=k;const C=i[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(w.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(s)){let k=function(...R){if(new.target)throw o();return r(C,this,R)};var S=k;const C=s[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(w.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}w.Writable=mT(),w.Duplex=ec(),w.Transform=YP(),w.PassThrough=XP(),w.pipeline=h;const{addAbortSignal:x}=Ax();return w.addAbortSignal=x,w.finished=y,w.destroy=p,w.compose=l,w.setDefaultHighWaterMark=u,w.getDefaultHighWaterMark=d,t(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(y,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),w.Stream=w,w._isUint8Array=function(C){return C instanceof Uint8Array},w._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},ZS.exports}var Vj;function Cte(){return Vj||(Vj=1,function(e){const t=e5(),n=QP(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(KS)),KS.exports}var t5=Cte();class yT extends t5.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(lt.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class bT extends t5.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(ii(new Ue(lt.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(ii(new Ue(lt.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(lt.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(lt.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Os=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Ds=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class li{get position(){return this.flag&Fd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=di(t,n);Object.assign(this,Kd(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&Ex||this.inode.flags&Di.Sync)}_emitChange(){Ya(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,OP(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=Tu(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>kr?-61441:kr)|n,(this._isSync||n>kr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(lt.EINVAL);if(this.dirty=!0,!(this.flag&ri||this.flag&Hl))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=uw(t),this.inode.mtimeMs=uw(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=ql(n,"utf8","a",420);if(!(Vl(r.flag)&Fd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Fr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ri)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Di.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Tg(this.inode)&&!kg(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=ql(t,null,"r",292);if(Vl(n.flag)&ri)throw new Ue(lt.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),s=Fr.from(i);return n.encoding?s.toString(n.encoding):s}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Di.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&ri)throw Ue.With("EBADF",this.path,"readLines");return qee({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!pr(this.context,this.inode,Ea))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new ef(this.inode):new lc(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Di.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");if(!(this.flag&ri||this.flag&Hl))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!Tg(this.inode)&&!kg(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,await this.fs.write(this.internalPath,s,a),this._isSync&&await this.sync(),s.byteLength}async write(t,n,r,a){let i,s,o;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,s=0,i=Fr.from(t,typeof r=="string"?r:"utf8"),o=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n??0,o=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const l=await this._write(i,s,o,a);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=ql(n,"utf8","w",420),a=Vl(r.flag);if(!(a&ri||a&Hl))throw new Ue(lt.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Fr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),PP(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&ri)throw Ue.With("EBADF",this.path,"createReadStream");return new yT(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Di.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"createWriteStream");return new bT(t,this)}}async function n5(e,t){e=hn(e),t=hn(t);const n=Bn(e,this),r=Bn(t,this);if(!(await op.call(this,ir(e))).hasAccess(na,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),Ya(this,"rename",e.toString()),Ya(this,"change",t.toString());return}await Dx.call(this,t,await Ox(e)),await jx.call(this,e),Ya(this,"rename",e.toString())}catch(a){throw mr(a,{[n.path]:e,[r.path]:t})}}async function S0(e){try{const{fs:t,path:n}=Bn(await Iu.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function op(e,t){e=hn(e);const{fs:n,path:r}=Bn(await Iu.call(this,e),this);try{const a=await n.stat(r);if(Ca&&!pr(this,a,Ea))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new ef(a):new lc(a)}catch(a){throw mr(a,{[r]:e})}}async function Ix(e,t){e=hn(e);const{fs:n,path:r}=Bn(e,this);try{const a=await n.stat(r);if(Ca&&!pr(this,a,Ea))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new ef(a):new lc(a)}catch(a){throw mr(a,{[r]:e})}}async function r5(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Os(n,await Ms.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ds(n);r&&await r}}async function jx(e){e=hn(e);const{fs:t,path:n}=Bn(e,this);try{if(Ca&&!pr(this,await t.stat(n),na))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}async function lp(e,t,n){var r;t=hn(t);const a=Tu(n.mode,420),i=Vl(n.flag),{fullPath:s,fs:o,path:l,stats:u}=await pw(e,t.toString(),n.preserveSymlinks);if(!u){if(!(i&xx))throw Ue.With("ENOENT",s,"_open");const h=await o.stat(ir(l));if(!pr(e,h,na))throw Ue.With("EACCES",ir(s),"_open");if(!ao(h))throw Ue.With("ENOTDIR",ir(s),"_open");const{euid:p,egid:y}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:uo.credentials,v=await o.createFile(l,{mode:a,uid:h.mode&b0?h.uid:p,gid:h.mode&v0?h.gid:y});return new li(e,fw(new dw(e,t,o,l,i,v)))}if(!pr(e,u,FP(i)))throw Ue.With("EACCES",s,"_open");if(i&_x)throw Ue.With("EEXIST",s,"_open");const d=new li(e,fw(new dw(e,t,o,l,i,u)));return i&Sx&&await d.truncate(0),d}async function Ms(e,t="r",n=420){return await lp(this,e,{flag:t,mode:n})}async function Ox(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=ql(t,null,"r",292);return await Os(n,typeof e=="object"&&"fd"in e?e:await Ms.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ds(n);r&&await r}}async function Dx(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=ql(n,"utf8","w+",420),i=Os(r,e instanceof li?e:await Ms.call(this,e.toString(),a.flag,a.mode),!0),s=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof s!="string"&&!(s instanceof Uint8Array))throw new Ue(lt.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ds(r);a&&await a}}async function a5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=ql(n,"utf8","a",420);if(!(Vl(a.flag)&Fd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Fr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Os(r,typeof e=="object"&&"fd"in e?e:await Ms.call(this,e,a.flag,a.mode),!0).appendFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ds(r);a&&await a}}async function vT(e){e=await Iu.call(this,e);const{fs:t,path:n}=Bn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!ao(r))throw Ue.With("ENOTDIR",n,"rmdir");if(Ca&&!pr(this,r,na))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}async function Mx(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:uo.credentials;t=typeof t=="object"?t:{mode:t};const s=Tu(t==null?void 0:t.mode,511);e=await Iu.call(this,e);const{fs:o,path:l,root:u}=Bn(e,this),d={[l]:e},h=async(p,y)=>{if(!pr(this,y,na))throw Ue.With("EACCES",ir(p),"mkdir");const v=await o.mkdir(p,{mode:s,uid:y.mode&b0?y.uid:a,gid:y.mode&v0?y.gid:i});return Ya(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){await h(l,await o.stat(ir(l)));return}const p=[];for(let v=l,b=e;!await o.exists(v);v=ir(v),b=ir(b))p.unshift(v),d[v]=b;if(!p.length)return;const y=[await o.stat(ir(p[0]))];for(const[v,b]of p.entries())y.push(await h(b,y[v]));return u.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(u.length)}catch(p){throw mr(p,d)}}async function af(e,t){t=typeof t=="object"?t:{encoding:t},e=await Iu.call(this,e);const{fs:n,path:r}=Bn(e,this),a=await n.stat(r).catch(l=>br(mr(l,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!pr(this,a,Ea))throw Ue.With("EACCES",e,"readdir");if(!ao(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(l=>br(mr(l,{[r]:e}))),s=[],o=async l=>{let u;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(u=await n.stat(ur(r,l)).catch(d=>{if(d.code!="ENOENT")throw mr(d,{[r]:e})}),!u))&&(t!=null&&t.withFileTypes?s.push(new Ng(l,u)):(t==null?void 0:t.encoding)=="buffer"?s.push(Fr.from(l)):s.push(l),!(!(t!=null&&t.recursive)||!ao(u))))for(const d of await af.call(this,ur(e,l),t))d instanceof Ng?(d.path=ur(l,d.path),s.push(d)):Fr.isBuffer(d)?s.push(Fr.from(ur(l,Vk(d)))):s.push(ur(l,d))};return await Promise.all(i.map(o)),s}async function i5(e,t){e=hn(e),t=hn(t);const{fs:n,path:r}=Bn(e,this),a=Bn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(Ca&&!pr(this,await n.stat(ir(r)),Ea))throw Ue.With("EACCES",ir(r),"link");if(Ca&&!(await op.call(this,ir(t))).hasAccess(na,this))throw Ue.With("EACCES",ir(t),"link");if(Ca&&!pr(this,await n.stat(r),Ea))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw mr(i,{[a.path]:t,[r]:e})}}async function s5(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid symlink type: "+n);if(t=hn(t),await S0.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=Os(r,await lp(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(hn(e,!0)),await a.chmod(oc)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ds(r);a&&await a}}async function hw(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await Os(n,await lp(this,hn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Ds(n);r&&await r}}async function o5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Os(r,await Ms.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ds(r);a&&await a}}async function l5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Os(r,await lp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ds(r);a&&await a}}async function c5(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Os(n,await Ms.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ds(n);r&&await r}}async function u5(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Os(n,await lp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ds(n);r&&await r}}async function wT(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Os(r,await Ms.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Ds(r);a&&await a}}async function d5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Os(r,await lp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=Ds(r);a&&await a}}async function pw(e,t,n){if(n){const l=Bn(t,e),u=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:u}}try{const l=Bn(t,e),u=await l.fs.stat(l.path);if(!Fh(u))return{...l,fullPath:t,stats:u};const d=Ql.call(e,ir(t),(await hw.call(e,t)).toString());return await pw(e,d)}catch{}const{base:r,dir:a}=Do(t),i=a=="/"?"/":await Iu.call(e,a),s=ur(i,r),o=Bn(s,e);try{const l=await o.fs.stat(o.path);if(!Fh(l))return{...o,fullPath:s,stats:l};const u=Ql.call(e,i,(await hw.call(e,s)).toString());return await pw(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw mr(l,{[o.path]:s})}}async function Iu(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=await pw(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Fr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function kte(e,t={}){const n=new zP(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(s,o)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:s,filename:o},done:!1})});function i(){a=!0,n.close();for(const s of r)s({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:s,resolve:o}=Promise.withResolvers();return r.push(o),s},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function f5(e,t=Jk){if(!(await op.call(this,e)).hasAccess(t,this))throw new Ue(lt.EACCES)}async function xT(e,t){e=hn(e);const n=await Ix.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&kr){case ma:if(t!=null&&t.recursive)for(const r of await af.call(this,e))await xT.call(this,ur(e,r),t);await vT.call(this,e);break;case Js:case oc:case Xd:case Jd:await jx.call(this,e);break;case Qd:case Yd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}async function h5(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await Mx.call(this,a),n=="buffer"?Fr.from(a):a}async function _T(e,t,n){if(e=hn(e),t=hn(t),n&&n&Qk&&await S0.call(this,t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");await Dx.call(this,t,await Ox.call(this,e)),Ya(this,"rename",t.toString())}function p5(e,t){return e=hn(e),Promise.resolve(new fT(e,this))}async function ST(e,t,n){e=hn(e),t=hn(t);const r=await Ix.call(this,e);if(n!=null&&n.errorOnExist&&await S0.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&kr){case ma:{if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([af.call(this,e,{withFileTypes:!0}),Mx.call(this,t,{recursive:!0})]),i=async s=>{n.filter&&!n.filter(ur(e,s.name),ur(t,s.name))||await ST.call(this,ur(e,s.name),ur(t,s.name),n)};await Promise.all(a.map(i));break}case Js:case oc:await _T.call(this,e,t);break;case Xd:case Jd:case Qd:case Yd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await wT.call(this,t,r.atime,r.mtime)}async function m5(e,t){e=hn(e);const{fs:n}=Bn(e,this);return Promise.resolve($P(n,t==null?void 0:t.bigint))}function g5(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(o=>(o=o.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${o}$`)));async function*s(o){const l=await af(o,{withFileTypes:r,encoding:"utf8"});for(const u of l){const d=r?u.path:o+"/"+u;a(r?u:d)||((await op(d)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*s(d)),i.some(h=>h.test(d.replace(/^\/+/g,"")))&&(yield r?u:d.replace(/^\/+/g,"")))}}return s(n)}const Tte=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:li,access:f5,appendFile:a5,chmod:c5,chown:o5,constants:IP,copyFile:_T,cp:ST,exists:S0,glob:g5,lchmod:u5,lchown:l5,link:i5,lstat:Ix,lutimes:d5,mkdir:Mx,mkdtemp:h5,open:Ms,opendir:p5,readFile:Ox,readdir:af,readlink:hw,realpath:Iu,rename:n5,rm:xT,rmdir:vT,stat:op,statfs:m5,symlink:s5,truncate:r5,unlink:jx,utimes:wT,watch:kte,writeFile:Dx},Symbol.toStringTag,{value:"Module"})),Rn=()=>{};async function Ate(e){const t=[];for await(const n of e)t.push(n);return t}function Nte(e,t,n=Rn){n5.call(this,e,t).then(()=>n()).catch(n)}function Rte(e,t=Rn){S0.call(this,e).then(t).catch(()=>t(!1))}function Ite(e,t,n=Rn){n=typeof t=="function"?t:n,op.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function jte(e,t,n=Rn){n=typeof t=="function"?t:n,Ix.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function Ote(e,t=0,n=Rn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;r5.call(this,e,r).then(()=>n()).catch(n)}function Dte(e,t=Rn){jx.call(this,e).then(()=>t()).catch(t)}function Mte(e,t,n,r=Rn){const a=Tu(n,420);r=typeof n=="function"?n:r,Ms.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function Pte(e,t,n=Rn){n=typeof t=="function"?t:n,Ox.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Fte(e,t,n,r=Rn){r=typeof n=="function"?n:r,Dx.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function Lte(e,t,n,r=Rn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,a5.call(this,e,t,a).then(()=>r()).catch(r)}function $te(e,t,n=Rn){n=typeof t=="function"?t:n,new li(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new ef(r):r)).catch(n)}function Bte(e,t=Rn){new li(this,e).close().then(()=>t()).catch(t)}function zte(e,t,n=Rn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new li(this,e);if(r<0)throw new Ue(lt.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function Ute(e,t=Rn){new li(this,e).sync().then(()=>t()).catch(t)}function Hte(e,t=Rn){new li(this,e).datasync().then(()=>t()).catch(t)}function qte(e,t,n,r,a,i=Rn){let s,o,l,u,d;const h=new li(this,e);if(typeof t=="string"){switch(d="utf8",typeof n){case"function":i=n;break;case"number":u=n,d=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(lt.EINVAL,"Invalid arguments"));return}s=Fr.from(t),o=0,l=s.length;const p=i;h.write(s,o,l,u).then(({bytesWritten:y})=>p(void 0,y,s.toString(d))).catch(p)}else{s=Fr.from(t.buffer),o=n,l=r,u=typeof a=="number"?a:null;const p=typeof a=="function"?a:i;h.write(s,o,l,u).then(({bytesWritten:y})=>p(void 0,y,s)).catch(p)}}function Vte(e,t,n,r,a,i=Rn){new li(this,e).read(t,n,r,a).then(({bytesRead:s,buffer:o})=>i(void 0,s,o)).catch(i)}function Gte(e,t,n,r=Rn){new li(this,e).chown(t,n).then(()=>r()).catch(r)}function Wte(e,t,n){new li(this,e).chmod(t).then(()=>n()).catch(n)}function Kte(e,t,n,r=Rn){new li(this,e).utimes(t,n).then(()=>r()).catch(r)}function Zte(e,t=Rn){vT.call(this,e).then(()=>t()).catch(t)}function Yte(e,t,n=Rn){Mx.call(this,e,t).then(()=>n()).catch(n)}function Xte(e,t,n=Rn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};af.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function Jte(e,t,n=Rn){i5.call(this,e,t).then(()=>n()).catch(n)}function Qte(e,t,n,r=Rn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,s5.call(this,e,t,a).then(()=>r()).catch(r)}function ene(e,t,n=Rn){n=typeof t=="function"?t:n,hw.call(this,e).then(r=>n(void 0,r)).catch(n)}function tne(e,t,n,r=Rn){o5.call(this,e,t,n).then(()=>r()).catch(r)}function nne(e,t,n,r=Rn){l5.call(this,e,t,n).then(()=>r()).catch(r)}function rne(e,t,n=Rn){c5.call(this,e,t).then(()=>n()).catch(n)}function ane(e,t,n=Rn){u5.call(this,e,t).then(()=>n()).catch(n)}function ine(e,t,n,r=Rn){wT.call(this,e,t,n).then(()=>r()).catch(r)}function sne(e,t,n,r=Rn){d5.call(this,e,t,n).then(()=>r()).catch(r)}function one(e,t,n=Rn){n=typeof t=="function"?t:n,Iu.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function lne(e,t,n=Rn){const r=typeof t=="number"?t:Ea;n=typeof t=="function"?t:n,f5.call(this,e,r).then(()=>n()).catch(n)}const hh=new Map;function cne(e,t,n){const r=hn(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(lt.EINVAL,"No listener specified",e.toString(),"watchFile");if(hh.has(r)){const s=hh.get(r);s&&s.listeners.add(n);return}const i=new Zee(this,r,a);i.on("change",(s,o)=>{const l=hh.get(r);if(l)for(const u of l.listeners)u(s,o)}),hh.set(r,{watcher:i,listeners:new Set})}function une(e,t=Rn){const n=hn(e),r=hh.get(n);r&&(t&&t!==Rn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),hh.delete(n)))}function dne(e,t,n){const r=new zP(this,hn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||Rn),r}function fne(e,t){t=typeof t=="object"?t:{encoding:t};const n=Ms.call(this,e,"r",t==null?void 0:t.mode);return new yT({...t,autoClose:!0},n)}function hne(e,t){t=typeof t=="object"?t:{encoding:t};const n=Ms.call(this,e,"w",t==null?void 0:t.mode);return new bT(t,n)}function pne(e,t,n=Rn){n=typeof t=="function"?t:n,xT.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function mne(e,t,n=Rn){n=typeof t=="function"?t:n,h5.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function gne(e,t,n,r=Rn){r=typeof n=="function"?n:r,_T.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function yne(e,t,n,r=Rn){r=typeof n=="function"?n:r,new li(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function bne(e,t,n,r=Rn){r=typeof n=="function"?n:r,new li(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function vne(e,t,n=Rn){n=typeof t=="function"?t:n,p5.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function wne(e,t,n,r=Rn){r=typeof n=="function"?n:r,ST.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function xne(e,t,n=Rn){n=typeof t=="function"?t:n,m5.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function _ne(e,t){const n=await Ms.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function Sne(e,t,n=Rn){n=typeof t=="function"?t:n;const r=g5.call(this,e,typeof t=="function"?void 0:t);Ate(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var fd=function(e,t,n,r,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,p=!1,y=n.length-1;y>=0;y--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var w=(0,n[y])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=s(w.get))&&(d.get=h),(h=s(w.set))&&(d.set=h),(h=s(w.init))&&a.unshift(h)}else(h=s(w))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),p=!0},Xi=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},Ene=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},mw;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(mw||(mw={}));let y5=(()=>{var e,t,n,r,a;let i=[Zd()],s,o=[],l,u,d=[],h=[],p,y=[],v=[],b,w=[],x=[],S,E=[],C=[],k,I=[],R=[],j,L=[],B=[];return l=class{constructor(Z=br(new Ue(lt.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=Xi(this,d,0),this.extsize=(Xi(this,h),Xi(this,y,0)),this.nextents=(Xi(this,v),Xi(this,w,0)),this.projid=(Xi(this,x),Xi(this,E,0)),this.cowextsize=(Xi(this,C),Xi(this,I,0)),this.pad=(Xi(this,R),Xi(this,L,[])),Xi(this,B),this.extsize=Z.size,this.nextents=1,this.projid=Z.uid,this.cowextsize=Z.size;for(const P of Object.keys(Di))Z.flags&Di[P]&&P in mw&&(this.xflags|=mw[P])}},Ene(l,"fsxattr"),(()=>{const Z=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=xn).uint32.bind(e)],p=[(t=xn).uint32.bind(t)],b=[(n=xn).uint32.bind(n)],S=[(r=xn).uint32.bind(r)],k=[(a=xn).uint32.bind(a)],j=[xn.char(8)],fd(null,null,u,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:P=>"xflags"in P,get:P=>P.xflags,set:(P,K)=>{P.xflags=K}},metadata:Z},d,h),fd(null,null,p,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:P=>"extsize"in P,get:P=>P.extsize,set:(P,K)=>{P.extsize=K}},metadata:Z},y,v),fd(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:P=>"nextents"in P,get:P=>P.nextents,set:(P,K)=>{P.nextents=K}},metadata:Z},w,x),fd(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:P=>"projid"in P,get:P=>P.projid,set:(P,K)=>{P.projid=K}},metadata:Z},E,C),fd(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:P=>"cowextsize"in P,get:P=>P.cowextsize,set:(P,K)=>{P.cowextsize=K}},metadata:Z},I,R),fd(null,null,j,{kind:"field",name:"pad",static:!1,private:!1,access:{has:P=>"pad"in P,get:P=>P.pad,set:(P,K)=>{P.pad=K}},metadata:Z},L,B),fd(null,s={value:l},i,{kind:"class",name:l.name,metadata:Z},null,o),l=s.value,Z&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Z}),Xi(l,o)})(),l})();var Ur;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Ur||(Ur={}));var Ks;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(Ks||(Ks={}));async function Cne(e,t,...n){e=hn(e);const{fs:r,path:a}=Bn(e,this);try{const i=new pa(await r.stat(a));switch(t){case Ur.GetFlags:case Ks.GetFlags:return i.flags;case Ur.SetFlags:case Ks.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Ur.GetVersion:case Ks.GetVersion:return i.version;case Ur.SetVersion:case Ks.SetVersion:i.version=n[0],await r.touch(a,i);return;case Ur.Fiemap:break;case Ur.GetXattr:return new y5(i);case Ur.SetXattr:break;case Ur.GetLabel:return r.label;case Ur.SetLabel:r.label=n[0];return;case Ur.GetUUID:return r.uuid;case Ur.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw mr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function kne(e,t,...n){e=hn(e);const{fs:r,path:a}=Bn(e,this);try{const i=new pa(r.statSync(a));switch(t){case Ur.GetFlags:case Ks.GetFlags:return i.flags;case Ur.SetFlags:case Ks.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Ur.GetVersion:case Ks.GetVersion:return i.version;case Ur.SetVersion:case Ks.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Ur.Fiemap:break;case Ur.GetXattr:return new y5(i);case Ur.SetXattr:break;case Ur.GetLabel:return r.label;case Ur.SetLabel:r.label=n[0];return;case Ur.GetUUID:return r.uuid;case Ur.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw mr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const Tne=[];function cp(e,t,n,r){if(!t.startsWith("user.")&&!Tne.includes(t))throw new Ue(lt.EPERM,"Only attributes in the user namespace are supported",n,r)}async function Ane(e,t,n={}){var r;e=hn(e);const{fs:a,path:i}=Bn(e,this);cp(this,t,e,"xattr.get");try{const s=await a.stat(i);if(Ca&&!pr(this,s,Ea))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new yu);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Fr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw mr(s,{[i]:e})}}function Nne(e,t,n={}){var r;e=hn(e),cp(this,t,e,"xattr.get");const{fs:a,path:i}=Bn(e,this);try{const s=a.statSync(i);if(Ca&&!pr(this,s,Ea))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new yu);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Fr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw mr(s,{[i]:e})}}async function Rne(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=Bn(e,this);cp(this,t,e,"xattr.set");try{const o=await i.stat(s);if(Ca&&!pr(this,o,na))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new yu);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Fr.from(n)),await i.touch(s,Kd(o,"attributes"))}catch(o){throw mr(o,{[s]:e})}}function Ine(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=Bn(e,this);cp(this,t,e,"xattr.set");try{const o=i.statSync(s);if(Ca&&!pr(this,o,na))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new yu);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Fr.from(n)),i.touchSync(s,Kd(o,"attributes"))}catch(o){throw mr(o,{[s]:e})}}async function jne(e,t){var n;e=hn(e);const{fs:r,path:a}=Bn(e,this);cp(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(Ca&&!pr(this,i,na))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new yu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,Kd(i,"attributes"))}catch(i){throw mr(i,{[a]:e})}}function One(e,t){var n;e=hn(e);const{fs:r,path:a}=Bn(e,this);cp(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(Ca&&!pr(this,i,na))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new yu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,Kd(i,"attributes"))}catch(i){throw mr(i,{[a]:e})}}async function Dne(e){e=hn(e);const{fs:t,path:n}=Bn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw mr(r,{[n]:e})}}function Mne(e){e=hn(e);const{fs:t,path:n}=Bn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw mr(r,{[n]:e})}}const Pne=Object.freeze(Object.defineProperty({__proto__:null,get:Ane,getSync:Nne,list:Dne,listSync:Mne,remove:jne,removeSync:One,set:Rne,setSync:Ine},Symbol.toStringTag,{value:"Module"})),Ha=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:Iee,Dir:fT,Dirent:Ng,get IOC(){return Ur},get IOC32(){return Ks},ReadStream:yT,Stats:lc,StatsFs:Ree,WriteStream:bT,access:lne,accessSync:pte,appendFile:Lte,appendFileSync:ete,chmod:rne,chmodSync:dte,chown:tne,chownSync:cte,chroot:Wee,close:Bte,closeSync:nf,constants:IP,copyFile:gne,copyFileSync:GP,cp:wne,cpSync:WP,createReadStream:fne,createWriteStream:hne,exists:Rte,existsSync:rT,fchmod:Wte,fchmodSync:cT,fchown:Gte,fchownSync:lT,fdatasync:Hte,fdatasyncSync:ate,fstat:$te,fstatSync:tte,fsync:Ute,fsyncSync:rte,ftruncate:zte,ftruncateSync:nte,futimes:Kte,futimesSync:uT,glob:Sne,globSync:wte,ioctl:Cne,ioctlSync:kne,lchmod:ane,lchmodSync:fte,lchown:nne,lchownSync:ute,link:Jte,linkSync:ote,lopenSync:kx,lstat:jte,lstatSync:aT,lutimes:sne,lutimesSync:hte,mkdir:Yte,mkdirSync:dT,mkdtemp:mne,mkdtempSync:mte,mount:nT,open:Mte,openAsBlob:_ne,openSync:Cx,opendir:vne,opendirSync:bte,promises:Tte,read:Vte,readFile:Pte,readFileSync:sT,readSync:ste,readdir:Xte,readdirSync:ip,readlink:ene,readlinkSync:EC,readv:yne,readvSync:gte,realpath:one,realpathSync:Au,rename:Nte,renameSync:Jee,rm:pne,rmSync:VP,rmdir:Zte,rmdirSync:HP,stat:Ite,statSync:bu,statfs:xne,statfsSync:vte,symlink:Qte,symlinkSync:lte,truncate:Ote,truncateSync:Qee,umount:LP,unlink:Dte,unlinkSync:iT,unwatchFile:une,utimes:ine,utimesSync:qP,watch:dne,watchFile:cne,write:qte,writeFile:Fte,writeFileSync:oT,writeSync:ite,writev:bne,writevSync:yte,xattr:Pne},Symbol.toStringTag,{value:"Module"}));function Gj(e){return wP(e)||Xk(e)||e instanceof tT}async function b5(e,t=0){if(typeof e!="object"||e==null)throw Oi(new Ue(lt.EINVAL,"Invalid options on mount configuration"));if(!Gj(e))throw Oi(new Ue(lt.EINVAL,"Invalid mount configuration"));if(e instanceof tT)return await e.ready(),e;Xk(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&Gj(i)){if(vP("Resolving nested mount configuration: "+a),t>10)throw Oi(new Ue(lt.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await b5(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw Oi(new Ue(lt.EPERM,"Backend not available: "+n.name));hee(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function Fne(e){if(!wP(e))throw new TypeError("Invalid single mount point configuration");const t=await b5(e);LP("/"),nT("/",t)}const Lne=["delete"];Math.max(...Lne.map(e=>e.length));fee("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const v5=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;v5[e]=t}function $ne(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^v5[(t^e[n])&255];return(t^4294967295)>>>0}var zr=function(e,t,n,r,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,p=!1,y=n.length-1;y>=0;y--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var w=(0,n[y])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=s(w.get))&&(d.get=h),(h=s(w.set))&&(d.set=h),(h=s(w.init))&&a.unshift(h)}else(h=s(w))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),p=!0},kn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},ET=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let Wj=(()=>{var e,t,n,r;let a=[Zd()],i,s=[],o,l,u=[],d=[],h,p=[],y=[],v,b=[],w=[],x,S=[],E=[];return o=class{constructor(){this.id=kn(this,u,0),this.offset_=(kn(this,d),kn(this,p,0)),this.offset=(kn(this,y),kn(this,b,0)),this.size=(kn(this,w),kn(this,S,0)),kn(this,E)}},ET(o,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],x=[(r=xn).uint32.bind(r)],zr(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,I)=>{k.id=I}},metadata:C},u,d),zr(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,I)=>{k.offset_=I}},metadata:C},p,y),zr(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,I)=>{k.offset=I}},metadata:C},b,w),zr(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,I)=>{k.size=I}},metadata:C},S,E),zr(null,i={value:o},a,{kind:"class",name:o.name,metadata:C},null,s),o=i.value,C&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),kn(o,s)})(),o})();const Kj=255;let hd=(()=>{var e,t,n,r;let a=[Zd()],i,s=[],o,l,u=[],d=[],h,p=[],y=[],v,b=[],w=[],x,S=[],E=[],C,k=[],I=[];var R=o=class{constructor(j=br(new Ue(lt.EINVAL,"Metadata block must be initialized with a superblock")),L=0){if(this.superblock=j,this.offset=L,this.checksum=kn(this,u,0),this.timestamp=(kn(this,d),kn(this,p,Date.now())),this.previous_offset_=(kn(this,y),kn(this,b,0)),this.previous_offset=(kn(this,w),kn(this,S,0)),this._previous=kn(this,E),this.entries=kn(this,k,Array.from({length:Kj},()=>new Wj)),kn(this,I),this.superblock=j,this.offset=L,!!L&&(vx(this,j.store._buffer.subarray(L,L+Hr(R))),!w5(this)))throw wx(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+L.toString(16)))}get previous(){var j;if(this.previous_offset)return(j=this._previous)!==null&&j!==void 0||(this._previous=new R(this.superblock,this.previous_offset)),this._previous}};return ET(o,"MetadataBlock"),(()=>{const j=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],x=[(r=xn).uint32.bind(r)],C=[Cg(Wj,Kj)],zr(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:L=>"checksum"in L,get:L=>L.checksum,set:(L,B)=>{L.checksum=B}},metadata:j},u,d),zr(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:L=>"timestamp"in L,get:L=>L.timestamp,set:(L,B)=>{L.timestamp=B}},metadata:j},p,y),zr(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:L=>"previous_offset_"in L,get:L=>L.previous_offset_,set:(L,B)=>{L.previous_offset_=B}},metadata:j},b,w),zr(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:L=>"previous_offset"in L,get:L=>L.previous_offset,set:(L,B)=>{L.previous_offset=B}},metadata:j},S,E),zr(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:L=>"entries"in L,get:L=>L.entries,set:(L,B)=>{L.entries=B}},metadata:j},k,I),zr(null,i={value:o},a,{kind:"class",name:o.name,metadata:j},null,s),R=o=i.value,j&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:j}),kn(o,s)})(),R=o})();const Zj=2049864546;(()=>{var e,t,n,r,a,i,s,o,l,u,d;let h=[Zd()],p,y=[],v,b,w=[],x=[],S,E=[],C=[],k,I=[],R=[],j,L=[],B=[],Z,P=[],K=[],q,de=[],ae=[],te,X=[],re=[],D,J=[],Q=[],ie,me=[],ve=[],Me,Ae=[],Re=[],ke,Fe=[],et=[],Le,Ie=[],z=[],Se,Te=[],ue=[];var oe=v=class{constructor(ee=br(new Ue(lt.EINVAL,"Super block must be initialized with a store"))){if(this.store=ee,this.checksum=kn(this,w,0),this.magic=(kn(this,x),kn(this,E,Zj)),this.version=(kn(this,C),kn(this,I,1)),this.inode_format=(kn(this,R),kn(this,L,Oee)),this.flags=(kn(this,B),kn(this,P,0)),this.used_bytes=(kn(this,K),kn(this,de,BigInt(0))),this.total_bytes=(kn(this,ae),kn(this,X,BigInt(0))),this.uuid=(kn(this,re),kn(this,J,BigInt(0))),this.metadata_block_size=(kn(this,Q),kn(this,me,Hr(hd))),this.metadata_offset_=(kn(this,ve),kn(this,Ae,0)),this.metadata_offset=(kn(this,Re),kn(this,Fe,0)),this.metadata=kn(this,et),this.label=kn(this,Ie,""),this._padding=(kn(this,z),kn(this,Te,new Array(132).fill(0))),kn(this,ue),this.store=ee,ee._view.getUint32(YQ(oe,"magic"),!0)!=Zj){ii("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new hd(this),this.metadata.offset=Hr(oe),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Hr(oe)+Hr(hd)),this.total_bytes=BigInt(ee._buffer.byteLength),ee._write(this),ee._write(this.metadata);return}if(vx(this,ee._buffer.subarray(0,Hr(oe))),!w5(this))throw wx(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new hd(this,this.metadata_offset)}rotateMetadata(){const ee=new hd(this);return ee.offset=Number(this.used_bytes),ee.previous_offset=this.metadata_offset,this.metadata=ee,this.metadata_offset=ee.offset,this.store._write(ee),this.used_bytes+=BigInt(Hr(hd)),this.store._write(this),ee}isUnused(ee,xe){if(!xe)return!0;if(ee+xe>this.total_bytes||ee<Hr(oe))return!1;for(let Pe=this.metadata;Pe;Pe=Pe.previous){if(ee<Pe.offset+Hr(hd)&&ee+xe>Pe.offset)return!1;for(const Ee of Pe.entries)if(Ee.offset&&(ee>=Ee.offset&&ee<Ee.offset+Ee.size||ee+xe>Ee.offset&&ee+xe<=Ee.offset+Ee.size||ee<=Ee.offset&&ee+xe>=Ee.offset+Ee.size))return!1}return!0}};return ET(v,"SuperBlock"),(()=>{const ee=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=xn).uint32.bind(e)],S=[(t=xn).uint32.bind(t)],k=[(n=xn).uint16.bind(n)],j=[(r=xn).uint16.bind(r)],Z=[(a=xn).uint32.bind(a)],q=[(i=xn).uint64.bind(i)],te=[(s=xn).uint64.bind(s)],D=[(o=xn).uint128.bind(o)],ie=[(l=xn).uint32.bind(l)],Me=[(u=xn).uint32.bind(u)],ke=[(d=xn).uint32.bind(d)],Le=[xn.char(64)],Se=[xn.char(132)],zr(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Pe)=>{xe.checksum=Pe}},metadata:ee},w,x),zr(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Pe)=>{xe.magic=Pe}},metadata:ee},E,C),zr(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Pe)=>{xe.version=Pe}},metadata:ee},I,R),zr(null,null,j,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Pe)=>{xe.inode_format=Pe}},metadata:ee},L,B),zr(null,null,Z,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Pe)=>{xe.flags=Pe}},metadata:ee},P,K),zr(null,null,q,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Pe)=>{xe.used_bytes=Pe}},metadata:ee},de,ae),zr(null,null,te,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Pe)=>{xe.total_bytes=Pe}},metadata:ee},X,re),zr(null,null,D,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Pe)=>{xe.uuid=Pe}},metadata:ee},J,Q),zr(null,null,ie,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Pe)=>{xe.metadata_block_size=Pe}},metadata:ee},me,ve),zr(null,null,Me,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Pe)=>{xe.metadata_offset_=Pe}},metadata:ee},Ae,Re),zr(null,null,ke,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Pe)=>{xe.metadata_offset=Pe}},metadata:ee},Fe,et),zr(null,null,Le,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Pe)=>{xe.label=Pe}},metadata:ee},Ie,z),zr(null,null,Se,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Pe)=>{xe._padding=Pe}},metadata:ee},Te,ue),zr(null,p={value:v},h,{kind:"class",name:v.name,metadata:ee},null,y),oe=v=p.value,ee&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ee}),kn(v,y)})(),oe=v})();function w5(e){const t=Ka(e),n=$ne(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Ha;function Bne(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function kC(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?lt[Bne(e)]:lt.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function ph(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(kC(e.error))}})}class zne extends SC{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await ph(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await ph(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await ph(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),ph(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(kC(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(kC(this.tx.error)),this.tx.abort(),t}}async function Une(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(ii("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await ph(n)}class Hne{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new zne(t,this)}}const qne={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await ph(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await Une(e.storeName||"zenfs",e.idbFactory),n=new Hne(t),r=new MP(n);if(e!=null&&e.disableAsyncCache)return Yk("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},Vne=qne;function Qb(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wE={exports:{}},Yj;function Gne(){return Yj||(Yj=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function s(u,d){if(!a[u]){if(!r[u]){var h=typeof Qb=="function"&&Qb;if(!d&&h)return h(u,!0);if(o)return o(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var y=a[u]={exports:{}};r[u][0].call(y.exports,function(v){var b=r[u][1][v];return s(b||v)},y,y.exports,n,r,a,i)}return a[u].exports}for(var o=typeof Qb=="function"&&Qb,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(n,r,a){var i=n("./utils"),s=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var u,d,h,p,y,v,b,w=[],x=0,S=l.length,E=S,C=i.getTypeOf(l)!=="string";x<l.length;)E=S-x,h=C?(u=l[x++],d=x<S?l[x++]:0,x<S?l[x++]:0):(u=l.charCodeAt(x++),d=x<S?l.charCodeAt(x++):0,x<S?l.charCodeAt(x++):0),p=u>>2,y=(3&u)<<4|d>>4,v=1<E?(15&d)<<2|h>>6:64,b=2<E?63&h:64,w.push(o.charAt(p)+o.charAt(y)+o.charAt(v)+o.charAt(b));return w.join("")},a.decode=function(l){var u,d,h,p,y,v,b=0,w=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=s.uint8array?new Uint8Array(0|E):new Array(0|E);b<l.length;)u=o.indexOf(l.charAt(b++))<<2|(p=o.indexOf(l.charAt(b++)))>>4,d=(15&p)<<4|(y=o.indexOf(l.charAt(b++)))>>2,h=(3&y)<<6|(v=o.indexOf(l.charAt(b++))),S[w++]=u,y!==64&&(S[w++]=d),v!==64&&(S[w++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),s=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,h,p,y,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=p,this.compression=y,this.compressedContent=v}u.prototype={getContentWorker:function(){var d=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,p){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),s=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(u,d,h,p){var y=s,v=p+h;u^=-1;for(var b=p;b<v;b++)u=u>>>8^y[255&(u^d[b])];return-1^u}(0|l,o,o.length,0):function(u,d,h,p){var y=s,v=p+h;u^=-1;for(var b=p;b<v;b++)u=u>>>8^y[255&(u^d.charCodeAt(b))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(h,p){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}a.magic="\b\0",o.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(y,v){var b,w="";for(b=0;b<v;b++)w+=String.fromCharCode(255&y),y>>>=8;return w}function s(y,v,b,w,x,S){var E,C,k=y.file,I=y.compression,R=S!==u.utf8encode,j=o.transformTo("string",S(k.name)),L=o.transformTo("string",u.utf8encode(k.name)),B=k.comment,Z=o.transformTo("string",S(B)),P=o.transformTo("string",u.utf8encode(B)),K=L.length!==k.name.length,q=P.length!==B.length,de="",ae="",te="",X=k.dir,re=k.date,D={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(D.crc32=y.crc32,D.compressedSize=y.compressedSize,D.uncompressedSize=y.uncompressedSize);var J=0;v&&(J|=8),R||!K&&!q||(J|=2048);var Q=0,ie=0;X&&(Q|=16),x==="UNIX"?(ie=798,Q|=function(ve,Me){var Ae=ve;return ve||(Ae=Me?16893:33204),(65535&Ae)<<16}(k.unixPermissions,X)):(ie=20,Q|=function(ve){return 63&(ve||0)}(k.dosPermissions)),E=re.getUTCHours(),E<<=6,E|=re.getUTCMinutes(),E<<=5,E|=re.getUTCSeconds()/2,C=re.getUTCFullYear()-1980,C<<=4,C|=re.getUTCMonth()+1,C<<=5,C|=re.getUTCDate(),K&&(ae=i(1,1)+i(d(j),4)+L,de+="up"+i(ae.length,2)+ae),q&&(te=i(1,1)+i(d(Z),4)+P,de+="uc"+i(te.length,2)+te);var me="";return me+=`
\0`,me+=i(J,2),me+=I.magic,me+=i(E,2),me+=i(C,2),me+=i(D.crc32,4),me+=i(D.compressedSize,4),me+=i(D.uncompressedSize,4),me+=i(j.length,2),me+=i(de.length,2),{fileRecord:h.LOCAL_FILE_HEADER+me+j+de,dirRecord:h.CENTRAL_FILE_HEADER+i(ie,2)+me+i(Z.length,2)+"\0\0\0\0"+i(Q,4)+i(w,4)+j+de+Z}}var o=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),h=n("../signature");function p(y,v,b,w){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=w,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(p,l),p.prototype.push=function(y){var v=y.meta.percent||0,b=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-w-1))/b:100}}))},p.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var v=this.streamFiles&&!y.file.dir;if(v){var b=s(y,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(y){this.accumulate=!1;var v=this.streamFiles&&!y.file.dir,b=s(y,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(w){return h.DATA_DESCRIPTOR+i(w.crc32,4)+i(w.compressedSize,4)+i(w.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var y=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-y,w=function(x,S,E,C,k){var I=o.transformTo("string",k(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(S,4)+i(E,4)+i(I.length,2)+I}(this.dirRecords.length,b,y,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(y){this._sources.push(y);var v=this;return y.on("data",function(b){v.processChunk(b)}),y.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),y.on("error",function(b){v.error(b)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(y){var v=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var b=0;b<v.length;b++)try{v[b].error(y)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,v=0;v<y.length;v++)y[v].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),s=n("./ZipFileWorker");a.generateWorker=function(o,l,u){var d=new s(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{o.forEach(function(p,y){h++;var v=function(S,E){var C=S||E,k=i[C];if(!k)throw new Error(C+" is not a valid compression method !");return k}(y.options.compression,l.compression),b=y.options.compressionOptions||l.compressionOptions||{},w=y.dir,x=y.date;y._compressWorker(v,b).withStreamInfo("file",{name:p,dir:w,date:x,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,o){return new i().loadAsync(s,o)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),s=n("./external"),o=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(p){return new s.Promise(function(y,v){var b=p.decompressed.getContentWorker().pipe(new u);b.on("error",function(w){v(w)}).on("end",function(){b.streamInfo.crc32!==p.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(p,y){var v=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(p)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,y.optimizedBinaryString,y.base64).then(function(b){var w=new l(y);return w.load(b),w}).then(function(b){var w=[s.Promise.resolve(b)],x=b.files;if(y.checkCRC32)for(var S=0;S<x.length;S++)w.push(h(x[S]));return s.Promise.all(w)}).then(function(b){for(var w=b.shift(),x=w.files,S=0;S<x.length;S++){var E=x[S],C=E.fileNameStr,k=i.resolve(E.fileNameStr);v.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:y.createFolders}),E.dir||(v.file(k).unsafeOriginalName=C)}return w.zipComment.length&&(v.comment=w.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),s=n("../stream/GenericWorker");function o(l,u){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,s),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function s(o,l,u){i.call(this,l),this._helper=o;var d=this;o.on("data",function(h,p){d.push(h)||d._helper.pause(),u&&u(p)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Jt<"u",newBufferFrom:function(i,s){if(Jt.from&&Jt.from!==Uint8Array.from)return Jt.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Jt(i,s)},allocBuffer:function(i){if(Jt.alloc)return Jt.alloc(i);var s=new Jt(i);return s.fill(0),s},isBuffer:function(i){return Jt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,I,R){var j,L=o.getTypeOf(I),B=o.extend(R||{},d);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(k=x(k)),B.createFolders&&(j=w(k))&&S.call(this,j,!0);var Z=L==="string"&&B.binary===!1&&B.base64===!1;R&&R.binary!==void 0||(B.binary=!Z),(I instanceof h&&I.uncompressedSize===0||B.dir||!I||I.length===0)&&(B.base64=!1,B.binary=!0,I="",B.compression="STORE",L="string");var P=null;P=I instanceof h||I instanceof l?I:v.isNode&&v.isStream(I)?new b(k,I):o.prepareContent(k,I,B.binary,B.optimizedBinaryString,B.base64);var K=new p(k,P,B);this.files[k]=K}var s=n("./utf8"),o=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),y=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),w=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var I=k.lastIndexOf("/");return 0<I?k.substring(0,I):""},x=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},S=function(k,I){return I=I!==void 0?I:d.createFolders,k=x(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:I}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var I,R,j;for(I in this.files)j=this.files[I],(R=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&k(R,j)},filter:function(k){var I=[];return this.forEach(function(R,j){k(R,j)&&I.push(j)}),I},file:function(k,I,R){if(arguments.length!==1)return k=this.root+k,i.call(this,k,I,R),this;if(E(k)){var j=k;return this.filter(function(B,Z){return!Z.dir&&j.test(B)})}var L=this.files[this.root+k];return L&&!L.dir?L:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(L,B){return B.dir&&k.test(L)});var I=this.root+k,R=S.call(this,I),j=this.clone();return j.root=R.name,j},remove:function(k){k=this.root+k;var I=this.files[k];if(I||(k.slice(-1)!=="/"&&(k+="/"),I=this.files[k]),I&&!I.dir)delete this.files[k];else for(var R=this.filter(function(L,B){return B.name.slice(0,k.length)===k}),j=0;j<R.length;j++)delete this.files[R[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var I,R={};try{if((R=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");o.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var j=R.comment||this.comment||"";I=y.generateWorker(this,R,j)}catch(L){(I=new l("error")).error(L)}return new u(I,R.type||"string",R.mimeType)},generateAsync:function(k,I){return this.generateInternalStream(k).accumulate(I)},generateNodeStream:function(k,I){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(I)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===u&&this.data[p+2]===d&&this.data[p+3]===h)return p-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),p=this.readData(4);return l===p[0]&&u===p[1]&&d===p[2]&&h===p[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),s=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var p=i.getTypeOf(h);return i.checkSupport(p),p!=="string"||s.uint8array?p==="nodebuffer"?new u(h):s.uint8array?new d(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),s=n("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),s=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,s),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}s.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(l){o.processChunk(l)}),s.on("end",function(){o.end()}),s.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),s=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(v,b){return new d.Promise(function(w,x){var S=[],E=v._internalType,C=v._outputType,k=v._mimeType;v.on("data",function(I,R){S.push(I),b&&b(R)}).on("error",function(I){S=[],x(I)}).on("end",function(){try{var I=function(R,j,L){switch(R){case"blob":return i.newBlob(i.transformTo("arraybuffer",j),L);case"base64":return l.encode(j);default:return i.transformTo(R,j)}}(C,function(R,j){var L,B=0,Z=null,P=0;for(L=0;L<j.length;L++)P+=j[L].length;switch(R){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(Z=new Uint8Array(P),L=0;L<j.length;L++)Z.set(j[L],B),B+=j[L].length;return Z;case"nodebuffer":return Jt.concat(j);default:throw new Error("concat : unsupported type '"+R+"'")}}(E,S),k);w(I)}catch(R){x(R)}S=[]}).resume()})}function y(v,b,w){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=w,i.checkSupport(x),this._worker=v.pipe(new s(x)),v.lock()}catch(S){this._worker=new o("error"),this._worker.error(S)}}y.prototype={accumulate:function(v){return p(this,v)},on:function(v,b){var w=this;return v==="data"?this._worker.on(v,function(x){b.call(w,x.data,x.meta)}):this._worker.on(v,function(){i.delay(b,arguments,w)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Jt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),a.blob=s.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),s=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}a.utf8encode=function(y){return s.nodebuffer?o.newBufferFrom(y,"utf-8"):function(v){var b,w,x,S,E,C=v.length,k=0;for(S=0;S<C;S++)(64512&(w=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(w=65536+(w-55296<<10)+(x-56320),S++),k+=w<128?1:w<2048?2:w<65536?3:4;for(b=s.uint8array?new Uint8Array(k):new Array(k),S=E=0;E<k;S++)(64512&(w=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(w=65536+(w-55296<<10)+(x-56320),S++),w<128?b[E++]=w:(w<2048?b[E++]=192|w>>>6:(w<65536?b[E++]=224|w>>>12:(b[E++]=240|w>>>18,b[E++]=128|w>>>12&63),b[E++]=128|w>>>6&63),b[E++]=128|63&w);return b}(y)},a.utf8decode=function(y){return s.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(v){var b,w,x,S,E=v.length,C=new Array(2*E);for(b=w=0;b<E;)if((x=v[b++])<128)C[w++]=x;else if(4<(S=u[x]))C[w++]=65533,b+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&b<E;)x=x<<6|63&v[b++],S--;1<S?C[w++]=65533:x<65536?C[w++]=x:(x-=65536,C[w++]=55296|x>>10&1023,C[w++]=56320|1023&x)}return C.length!==w&&(C.subarray?C=C.subarray(0,w):C.length=w),i.applyFromCharCode(C)}(y=i.transformTo(s.uint8array?"uint8array":"array",y))},i.inherits(h,l),h.prototype.processChunk=function(y){var v=i.transformTo(s.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var w=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+u[S[C]]>E?C:E}(v),x=v;w!==v.length&&(s.uint8array?(x=v.subarray(0,w),this.leftOver=v.subarray(w,v.length)):(x=v.slice(0,w),this.leftOver=v.slice(w,v.length))),this.push({data:a.utf8decode(x),meta:y.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(p,l),p.prototype.processChunk=function(y){this.push({data:a.utf8encode(y.data),meta:y.meta})},a.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),s=n("./base64"),o=n("./nodejsUtils"),l=n("./external");function u(b){return b}function d(b,w){for(var x=0;x<b.length;++x)w[x]=255&b.charCodeAt(x);return w}n("setimmediate"),a.newBlob=function(b,w){a.checkSupport("blob");try{return new Blob([b],{type:w})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,w,x){var S=[],E=0,C=b.length;if(C<=x)return String.fromCharCode.apply(null,b);for(;E<C;)w==="array"||w==="nodebuffer"?S.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+x,C)))):S.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+x,C)))),E+=x;return S.join("")},stringifyByChar:function(b){for(var w="",x=0;x<b.length;x++)w+=String.fromCharCode(b[x]);return w},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function p(b){var w=65536,x=a.getTypeOf(b),S=!0;if(x==="uint8array"?S=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<w;)try{return h.stringifyByChunk(b,x,w)}catch{w=Math.floor(w/2)}return h.stringifyByChar(b)}function y(b,w){for(var x=0;x<b.length;x++)w[x]=b[x];return w}a.applyFromCharCode=p;var v={};v.string={string:u,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,o.allocBuffer(b.length))}},v.array={string:p,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},v.arraybuffer={string:function(b){return p(new Uint8Array(b))},array:function(b){return y(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:p,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return o.newBufferFrom(b)}},v.nodebuffer={string:p,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:u},a.transformTo=function(b,w){if(w=w||"",!b)return w;a.checkSupport(b);var x=a.getTypeOf(w);return v[x][b](w)},a.resolve=function(b){for(var w=b.split("/"),x=[],S=0;S<w.length;S++){var E=w[S];E==="."||E===""&&S!==0&&S!==w.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var w,x,S="";for(x=0;x<(b||"").length;x++)S+="\\x"+((w=b.charCodeAt(x))<16?"0":"")+w.toString(16).toUpperCase();return S},a.delay=function(b,w,x){setImmediate(function(){b.apply(x||null,w||[])})},a.inherits=function(b,w){function x(){}x.prototype=w.prototype,b.prototype=new x},a.extend=function(){var b,w,x={};for(b=0;b<arguments.length;b++)for(w in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],w)&&x[w]===void 0&&(x[w]=arguments[b][w]);return x},a.prepareContent=function(b,w,x,S,E){return l.Promise.resolve(w).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,I){var R=new FileReader;R.onload=function(j){k(j.target.result)},R.onerror=function(j){I(j.target.error)},R.readAsArrayBuffer(C)}):C}).then(function(C){var k=a.getTypeOf(C);return k?(k==="arraybuffer"?C=a.transformTo("uint8array",C):k==="string"&&(E?C=s.decode(C):x&&S!==!0&&(C=function(I){return d(I,i.uint8array?new Uint8Array(I.length):new Array(I.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(p)+", expected "+s.pretty(h)+")")}},isSignature:function(h,p){var y=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===p;return this.reader.setIndex(y),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",y=s.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,y,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),p=this.reader.readInt(4),y=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var v=p-y;if(0<v)this.isSignature(p,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),h=n("./support");function p(y,v){this.options=y,this.loadOptions=v}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var v,b;if(y.skip(22),this.fileNameLength=y.readInt(2),b=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(w){for(var x in d)if(Object.prototype.hasOwnProperty.call(d,x)&&d[x].magic===w)return d[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var v=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(v),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var v,b,w,x=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<x;)v=y.readInt(2),b=y.readInt(2),w=y.readData(b),this.extraFields[v]={id:v,length:b,value:w};y.setIndex(x)},handleUTF8:function(){var y=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=s.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var x=s.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var v=i(y.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var v=i(y.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(y.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,w){this.name=v,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=b,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var s=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,w="string";try{if(!v)throw new Error("No output type specified.");var x=(w=v.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(b=b.pipe(new l.Utf8EncodeWorker)),!S&&x&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(E){(b=new d("error")).error(E)}return new s(b,w,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(w,v,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<h.length;y++)i.prototype[h[y]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var s,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,d=new l(v),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var p=new i.MessageChannel;p.port1.onmessage=v,s=function(){p.port2.postMessage(0)}}var y=[];function v(){var b,w;o=!0;for(var x=y.length;x;){for(w=y,y=[],b=-1;++b<x;)w[b]();x=y.length}o=!1}r.exports=function(b){y.push(b)!==1||o||s()}}).call(this,typeof xd<"u"?xd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function s(){}var o={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==s&&b(this,x)}function p(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function y(x,S,E){i(function(){var C;try{C=S(E)}catch(k){return o.reject(x,k)}C===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,C)})}function v(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function b(x,S){var E=!1;function C(R){E||(E=!0,o.reject(x,R))}function k(R){E||(E=!0,o.resolve(x,R))}var I=w(function(){S(k,C)});I.status==="error"&&C(I.value)}function w(x,S){var E={};try{E.value=x(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(x()).then(function(){return E})},function(E){return S.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,S){if(typeof x!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var E=new this.constructor(s);return this.state!==d?y(E,this.state===u?x:S,this.outcome):this.queue.push(new p(E,x,S)),E},p.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},p.prototype.otherCallFulfilled=function(x){y(this.promise,this.onFulfilled,x)},p.prototype.callRejected=function(x){o.reject(this.promise,x)},p.prototype.otherCallRejected=function(x){y(this.promise,this.onRejected,x)},o.resolve=function(x,S){var E=w(v,S);if(E.status==="error")return o.reject(x,E.value);var C=E.value;if(C)b(x,C);else{x.state=u,x.outcome=S;for(var k=-1,I=x.queue.length;++k<I;)x.queue[k].callFulfilled(S)}return x},o.reject=function(x,S){x.state=l,x.outcome=S;for(var E=-1,C=x.queue.length;++E<C;)x.queue[E].callRejected(S);return x},h.resolve=function(x){return x instanceof this?x:o.resolve(new this(s),x)},h.reject=function(x){var S=new this(s);return o.reject(S,x)},h.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=new Array(E),I=0,R=-1,j=new this(s);++R<E;)L(x[R],R);return j;function L(B,Z){S.resolve(B).then(function(P){k[Z]=P,++I!==E||C||(C=!0,o.resolve(j,k))},function(P){C||(C=!0,o.reject(j,P))})}},h.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=-1,I=new this(s);++k<E;)R=x[k],S.resolve(R).then(function(j){C||(C=!0,o.resolve(I,j))},function(j){C||(C=!0,o.reject(I,j))});var R;return I}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,h=0,p=-1,y=0,v=8;function b(x){if(!(this instanceof b))return new b(x);this.options=s.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(l[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?o.string2buf(S.dictionary):d.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(l[E]);this._dict_set=!0}}function w(x,S){var E=new b(S);if(E.push(x,!0),E.err)throw E.msg||l[E.err];return E.result}b.prototype.push=function(x,S){var E,C,k=this.strm,I=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof x=="string"?k.input=o.string2buf(x):d.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new s.Buf8(I),k.next_out=0,k.avail_out=I),(E=i.deflate(k,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(k.output,k.next_out))):this.onData(s.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(k.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=b,a.deflate=w,a.deflateRaw=function(x,S){return(S=S||{}).raw=!0,w(x,S)},a.gzip=function(x,S){return(S=S||{}).gzip=!0,w(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function y(b){if(!(this instanceof y))return new y(b);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},b||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||b&&b.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,w.windowBits);if(x!==l.Z_OK)throw new Error(u[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,w){var x=new y(w);if(x.push(b,!0),x.err)throw x.msg||u[x.err];return x.result}y.prototype.push=function(b,w){var x,S,E,C,k,I,R=this.strm,j=this.options.chunkSize,L=this.options.dictionary,B=!1;if(this.ended)return!1;S=w===~~w?w:w===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?R.input=o.binstring2buf(b):p.call(b)==="[object ArrayBuffer]"?R.input=new Uint8Array(b):R.input=b,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new s.Buf8(j),R.next_out=0,R.avail_out=j),(x=i.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&L&&(I=typeof L=="string"?o.string2buf(L):p.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,x=i.inflateSetDictionary(this.strm,I)),x===l.Z_BUF_ERROR&&B===!0&&(x=l.Z_OK,B=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&x!==l.Z_STREAM_END&&(R.avail_in!==0||S!==l.Z_FINISH&&S!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(R.output,R.next_out),C=R.next_out-E,k=o.buf2string(R.output,E),R.next_out=C,R.avail_out=j-C,C&&s.arraySet(R.output,R.output,E,C,0),this.onData(k)):this.onData(s.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(B=!0)}while((0<R.avail_in||R.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(S=l.Z_FINISH),S===l.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):S!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=y,a.inflate=v,a.inflateRaw=function(b,w){return(w=w||{}).raw=!0,v(b,w)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},a.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var s={arraySet:function(l,u,d,h,p){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),p);else for(var y=0;y<h;y++)l[p+y]=u[d+y]},flattenChunks:function(l){var u,d,h,p,y,v;for(u=h=0,d=l.length;u<d;u++)h+=l[u].length;for(v=new Uint8Array(h),u=p=0,d=l.length;u<d;u++)y=l[u],v.set(y,p),p+=y.length;return v}},o={arraySet:function(l,u,d,h,p){for(var y=0;y<h;y++)l[p+y]=u[d+y]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,p){if(p<65537&&(h.subarray&&o||!h.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(h,p));for(var y="",v=0;v<p;v++)y+=String.fromCharCode(h[v]);return y}l[254]=l[254]=1,a.string2buf=function(h){var p,y,v,b,w,x=h.length,S=0;for(b=0;b<x;b++)(64512&(y=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),b++),S+=y<128?1:y<2048?2:y<65536?3:4;for(p=new i.Buf8(S),b=w=0;w<S;b++)(64512&(y=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),b++),y<128?p[w++]=y:(y<2048?p[w++]=192|y>>>6:(y<65536?p[w++]=224|y>>>12:(p[w++]=240|y>>>18,p[w++]=128|y>>>12&63),p[w++]=128|y>>>6&63),p[w++]=128|63&y);return p},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var p=new i.Buf8(h.length),y=0,v=p.length;y<v;y++)p[y]=h.charCodeAt(y);return p},a.buf2string=function(h,p){var y,v,b,w,x=p||h.length,S=new Array(2*x);for(y=v=0;y<x;)if((b=h[y++])<128)S[v++]=b;else if(4<(w=l[b]))S[v++]=65533,y+=w-1;else{for(b&=w===2?31:w===3?15:7;1<w&&y<x;)b=b<<6|63&h[y++],w--;1<w?S[v++]=65533:b<65536?S[v++]=b:(b-=65536,S[v++]=55296|b>>10&1023,S[v++]=56320|1023&b)}return d(S,v)},a.utf8border=function(h,p){var y;for((p=p||h.length)>h.length&&(p=h.length),y=p-1;0<=y&&(192&h[y])==128;)y--;return y<0||y===0?p:y+l[h[y]]>p?y:p}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,s,o,l){for(var u=65535&i|0,d=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(u=u+s[l++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var s,o=[],l=0;l<256;l++){s=l;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;o[l]=s}return o}();r.exports=function(s,o,l,u){var d=i,h=u+l;s^=-1;for(var p=u;p<h;p++)s=s>>>8^d[255&(s^o[p])];return-1^s}},{}],46:[function(n,r,a){var i,s=n("../utils/common"),o=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),h=0,p=4,y=0,v=-2,b=-1,w=4,x=2,S=8,E=9,C=286,k=30,I=19,R=2*C+1,j=15,L=3,B=258,Z=B+L+1,P=42,K=113,q=1,de=2,ae=3,te=4;function X(z,Se){return z.msg=d[Se],Se}function re(z){return(z<<1)-(4<z?9:0)}function D(z){for(var Se=z.length;0<=--Se;)z[Se]=0}function J(z){var Se=z.state,Te=Se.pending;Te>z.avail_out&&(Te=z.avail_out),Te!==0&&(s.arraySet(z.output,Se.pending_buf,Se.pending_out,Te,z.next_out),z.next_out+=Te,Se.pending_out+=Te,z.total_out+=Te,z.avail_out-=Te,Se.pending-=Te,Se.pending===0&&(Se.pending_out=0))}function Q(z,Se){o._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,Se),z.block_start=z.strstart,J(z.strm)}function ie(z,Se){z.pending_buf[z.pending++]=Se}function me(z,Se){z.pending_buf[z.pending++]=Se>>>8&255,z.pending_buf[z.pending++]=255&Se}function ve(z,Se){var Te,ue,oe=z.max_chain_length,ee=z.strstart,xe=z.prev_length,Pe=z.nice_match,Ee=z.strstart>z.w_size-Z?z.strstart-(z.w_size-Z):0,We=z.window,Nt=z.w_mask,it=z.prev,_t=z.strstart+B,Ft=We[ee+xe-1],Pt=We[ee+xe];z.prev_length>=z.good_match&&(oe>>=2),Pe>z.lookahead&&(Pe=z.lookahead);do if(We[(Te=Se)+xe]===Pt&&We[Te+xe-1]===Ft&&We[Te]===We[ee]&&We[++Te]===We[ee+1]){ee+=2,Te++;do;while(We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&ee<_t);if(ue=B-(_t-ee),ee=_t-B,xe<ue){if(z.match_start=Se,Pe<=(xe=ue))break;Ft=We[ee+xe-1],Pt=We[ee+xe]}}while((Se=it[Se&Nt])>Ee&&--oe!=0);return xe<=z.lookahead?xe:z.lookahead}function Me(z){var Se,Te,ue,oe,ee,xe,Pe,Ee,We,Nt,it=z.w_size;do{if(oe=z.window_size-z.lookahead-z.strstart,z.strstart>=it+(it-Z)){for(s.arraySet(z.window,z.window,it,it,0),z.match_start-=it,z.strstart-=it,z.block_start-=it,Se=Te=z.hash_size;ue=z.head[--Se],z.head[Se]=it<=ue?ue-it:0,--Te;);for(Se=Te=it;ue=z.prev[--Se],z.prev[Se]=it<=ue?ue-it:0,--Te;);oe+=it}if(z.strm.avail_in===0)break;if(xe=z.strm,Pe=z.window,Ee=z.strstart+z.lookahead,We=oe,Nt=void 0,Nt=xe.avail_in,We<Nt&&(Nt=We),Te=Nt===0?0:(xe.avail_in-=Nt,s.arraySet(Pe,xe.input,xe.next_in,Nt,Ee),xe.state.wrap===1?xe.adler=l(xe.adler,Pe,Nt,Ee):xe.state.wrap===2&&(xe.adler=u(xe.adler,Pe,Nt,Ee)),xe.next_in+=Nt,xe.total_in+=Nt,Nt),z.lookahead+=Te,z.lookahead+z.insert>=L)for(ee=z.strstart-z.insert,z.ins_h=z.window[ee],z.ins_h=(z.ins_h<<z.hash_shift^z.window[ee+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[ee+L-1])&z.hash_mask,z.prev[ee&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=ee,ee++,z.insert--,!(z.lookahead+z.insert<L)););}while(z.lookahead<Z&&z.strm.avail_in!==0)}function Ae(z,Se){for(var Te,ue;;){if(z.lookahead<Z){if(Me(z),z.lookahead<Z&&Se===h)return q;if(z.lookahead===0)break}if(Te=0,z.lookahead>=L&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+L-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),Te!==0&&z.strstart-Te<=z.w_size-Z&&(z.match_length=ve(z,Te)),z.match_length>=L)if(ue=o._tr_tally(z,z.strstart-z.match_start,z.match_length-L),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=L){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+L-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else ue=o._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(ue&&(Q(z,!1),z.strm.avail_out===0))return q}return z.insert=z.strstart<L-1?z.strstart:L-1,Se===p?(Q(z,!0),z.strm.avail_out===0?ae:te):z.last_lit&&(Q(z,!1),z.strm.avail_out===0)?q:de}function Re(z,Se){for(var Te,ue,oe;;){if(z.lookahead<Z){if(Me(z),z.lookahead<Z&&Se===h)return q;if(z.lookahead===0)break}if(Te=0,z.lookahead>=L&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+L-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=L-1,Te!==0&&z.prev_length<z.max_lazy_match&&z.strstart-Te<=z.w_size-Z&&(z.match_length=ve(z,Te),z.match_length<=5&&(z.strategy===1||z.match_length===L&&4096<z.strstart-z.match_start)&&(z.match_length=L-1)),z.prev_length>=L&&z.match_length<=z.prev_length){for(oe=z.strstart+z.lookahead-L,ue=o._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-L),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=oe&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+L-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=L-1,z.strstart++,ue&&(Q(z,!1),z.strm.avail_out===0))return q}else if(z.match_available){if((ue=o._tr_tally(z,0,z.window[z.strstart-1]))&&Q(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return q}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(ue=o._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<L-1?z.strstart:L-1,Se===p?(Q(z,!0),z.strm.avail_out===0?ae:te):z.last_lit&&(Q(z,!1),z.strm.avail_out===0)?q:de}function ke(z,Se,Te,ue,oe){this.good_length=z,this.max_lazy=Se,this.nice_length=Te,this.max_chain=ue,this.func=oe}function Fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*R),this.dyn_dtree=new s.Buf16(2*(2*k+1)),this.bl_tree=new s.Buf16(2*(2*I+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(j+1),this.heap=new s.Buf16(2*C+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*C+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function et(z){var Se;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=x,(Se=z.state).pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?P:K,z.adler=Se.wrap===2?0:1,Se.last_flush=h,o._tr_init(Se),y):X(z,v)}function Le(z){var Se=et(z);return Se===y&&function(Te){Te.window_size=2*Te.w_size,D(Te.head),Te.max_lazy_match=i[Te.level].max_lazy,Te.good_match=i[Te.level].good_length,Te.nice_match=i[Te.level].nice_length,Te.max_chain_length=i[Te.level].max_chain,Te.strstart=0,Te.block_start=0,Te.lookahead=0,Te.insert=0,Te.match_length=Te.prev_length=L-1,Te.match_available=0,Te.ins_h=0}(z.state),Se}function Ie(z,Se,Te,ue,oe,ee){if(!z)return v;var xe=1;if(Se===b&&(Se=6),ue<0?(xe=0,ue=-ue):15<ue&&(xe=2,ue-=16),oe<1||E<oe||Te!==S||ue<8||15<ue||Se<0||9<Se||ee<0||w<ee)return X(z,v);ue===8&&(ue=9);var Pe=new Fe;return(z.state=Pe).strm=z,Pe.wrap=xe,Pe.gzhead=null,Pe.w_bits=ue,Pe.w_size=1<<Pe.w_bits,Pe.w_mask=Pe.w_size-1,Pe.hash_bits=oe+7,Pe.hash_size=1<<Pe.hash_bits,Pe.hash_mask=Pe.hash_size-1,Pe.hash_shift=~~((Pe.hash_bits+L-1)/L),Pe.window=new s.Buf8(2*Pe.w_size),Pe.head=new s.Buf16(Pe.hash_size),Pe.prev=new s.Buf16(Pe.w_size),Pe.lit_bufsize=1<<oe+6,Pe.pending_buf_size=4*Pe.lit_bufsize,Pe.pending_buf=new s.Buf8(Pe.pending_buf_size),Pe.d_buf=1*Pe.lit_bufsize,Pe.l_buf=3*Pe.lit_bufsize,Pe.level=Se,Pe.strategy=ee,Pe.method=Te,Le(z)}i=[new ke(0,0,0,0,function(z,Se){var Te=65535;for(Te>z.pending_buf_size-5&&(Te=z.pending_buf_size-5);;){if(z.lookahead<=1){if(Me(z),z.lookahead===0&&Se===h)return q;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var ue=z.block_start+Te;if((z.strstart===0||z.strstart>=ue)&&(z.lookahead=z.strstart-ue,z.strstart=ue,Q(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-Z&&(Q(z,!1),z.strm.avail_out===0))return q}return z.insert=0,Se===p?(Q(z,!0),z.strm.avail_out===0?ae:te):(z.strstart>z.block_start&&(Q(z,!1),z.strm.avail_out),q)}),new ke(4,4,8,4,Ae),new ke(4,5,16,8,Ae),new ke(4,6,32,32,Ae),new ke(4,4,16,16,Re),new ke(8,16,32,32,Re),new ke(8,16,128,128,Re),new ke(8,32,128,256,Re),new ke(32,128,258,1024,Re),new ke(32,258,258,4096,Re)],a.deflateInit=function(z,Se){return Ie(z,Se,S,15,8,0)},a.deflateInit2=Ie,a.deflateReset=Le,a.deflateResetKeep=et,a.deflateSetHeader=function(z,Se){return z&&z.state?z.state.wrap!==2?v:(z.state.gzhead=Se,y):v},a.deflate=function(z,Se){var Te,ue,oe,ee;if(!z||!z.state||5<Se||Se<0)return z?X(z,v):v;if(ue=z.state,!z.output||!z.input&&z.avail_in!==0||ue.status===666&&Se!==p)return X(z,z.avail_out===0?-5:v);if(ue.strm=z,Te=ue.last_flush,ue.last_flush=Se,ue.status===P)if(ue.wrap===2)z.adler=0,ie(ue,31),ie(ue,139),ie(ue,8),ue.gzhead?(ie(ue,(ue.gzhead.text?1:0)+(ue.gzhead.hcrc?2:0)+(ue.gzhead.extra?4:0)+(ue.gzhead.name?8:0)+(ue.gzhead.comment?16:0)),ie(ue,255&ue.gzhead.time),ie(ue,ue.gzhead.time>>8&255),ie(ue,ue.gzhead.time>>16&255),ie(ue,ue.gzhead.time>>24&255),ie(ue,ue.level===9?2:2<=ue.strategy||ue.level<2?4:0),ie(ue,255&ue.gzhead.os),ue.gzhead.extra&&ue.gzhead.extra.length&&(ie(ue,255&ue.gzhead.extra.length),ie(ue,ue.gzhead.extra.length>>8&255)),ue.gzhead.hcrc&&(z.adler=u(z.adler,ue.pending_buf,ue.pending,0)),ue.gzindex=0,ue.status=69):(ie(ue,0),ie(ue,0),ie(ue,0),ie(ue,0),ie(ue,0),ie(ue,ue.level===9?2:2<=ue.strategy||ue.level<2?4:0),ie(ue,3),ue.status=K);else{var xe=S+(ue.w_bits-8<<4)<<8;xe|=(2<=ue.strategy||ue.level<2?0:ue.level<6?1:ue.level===6?2:3)<<6,ue.strstart!==0&&(xe|=32),xe+=31-xe%31,ue.status=K,me(ue,xe),ue.strstart!==0&&(me(ue,z.adler>>>16),me(ue,65535&z.adler)),z.adler=1}if(ue.status===69)if(ue.gzhead.extra){for(oe=ue.pending;ue.gzindex<(65535&ue.gzhead.extra.length)&&(ue.pending!==ue.pending_buf_size||(ue.gzhead.hcrc&&ue.pending>oe&&(z.adler=u(z.adler,ue.pending_buf,ue.pending-oe,oe)),J(z),oe=ue.pending,ue.pending!==ue.pending_buf_size));)ie(ue,255&ue.gzhead.extra[ue.gzindex]),ue.gzindex++;ue.gzhead.hcrc&&ue.pending>oe&&(z.adler=u(z.adler,ue.pending_buf,ue.pending-oe,oe)),ue.gzindex===ue.gzhead.extra.length&&(ue.gzindex=0,ue.status=73)}else ue.status=73;if(ue.status===73)if(ue.gzhead.name){oe=ue.pending;do{if(ue.pending===ue.pending_buf_size&&(ue.gzhead.hcrc&&ue.pending>oe&&(z.adler=u(z.adler,ue.pending_buf,ue.pending-oe,oe)),J(z),oe=ue.pending,ue.pending===ue.pending_buf_size)){ee=1;break}ee=ue.gzindex<ue.gzhead.name.length?255&ue.gzhead.name.charCodeAt(ue.gzindex++):0,ie(ue,ee)}while(ee!==0);ue.gzhead.hcrc&&ue.pending>oe&&(z.adler=u(z.adler,ue.pending_buf,ue.pending-oe,oe)),ee===0&&(ue.gzindex=0,ue.status=91)}else ue.status=91;if(ue.status===91)if(ue.gzhead.comment){oe=ue.pending;do{if(ue.pending===ue.pending_buf_size&&(ue.gzhead.hcrc&&ue.pending>oe&&(z.adler=u(z.adler,ue.pending_buf,ue.pending-oe,oe)),J(z),oe=ue.pending,ue.pending===ue.pending_buf_size)){ee=1;break}ee=ue.gzindex<ue.gzhead.comment.length?255&ue.gzhead.comment.charCodeAt(ue.gzindex++):0,ie(ue,ee)}while(ee!==0);ue.gzhead.hcrc&&ue.pending>oe&&(z.adler=u(z.adler,ue.pending_buf,ue.pending-oe,oe)),ee===0&&(ue.status=103)}else ue.status=103;if(ue.status===103&&(ue.gzhead.hcrc?(ue.pending+2>ue.pending_buf_size&&J(z),ue.pending+2<=ue.pending_buf_size&&(ie(ue,255&z.adler),ie(ue,z.adler>>8&255),z.adler=0,ue.status=K)):ue.status=K),ue.pending!==0){if(J(z),z.avail_out===0)return ue.last_flush=-1,y}else if(z.avail_in===0&&re(Se)<=re(Te)&&Se!==p)return X(z,-5);if(ue.status===666&&z.avail_in!==0)return X(z,-5);if(z.avail_in!==0||ue.lookahead!==0||Se!==h&&ue.status!==666){var Pe=ue.strategy===2?function(Ee,We){for(var Nt;;){if(Ee.lookahead===0&&(Me(Ee),Ee.lookahead===0)){if(We===h)return q;break}if(Ee.match_length=0,Nt=o._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++,Nt&&(Q(Ee,!1),Ee.strm.avail_out===0))return q}return Ee.insert=0,We===p?(Q(Ee,!0),Ee.strm.avail_out===0?ae:te):Ee.last_lit&&(Q(Ee,!1),Ee.strm.avail_out===0)?q:de}(ue,Se):ue.strategy===3?function(Ee,We){for(var Nt,it,_t,Ft,Pt=Ee.window;;){if(Ee.lookahead<=B){if(Me(Ee),Ee.lookahead<=B&&We===h)return q;if(Ee.lookahead===0)break}if(Ee.match_length=0,Ee.lookahead>=L&&0<Ee.strstart&&(it=Pt[_t=Ee.strstart-1])===Pt[++_t]&&it===Pt[++_t]&&it===Pt[++_t]){Ft=Ee.strstart+B;do;while(it===Pt[++_t]&&it===Pt[++_t]&&it===Pt[++_t]&&it===Pt[++_t]&&it===Pt[++_t]&&it===Pt[++_t]&&it===Pt[++_t]&&it===Pt[++_t]&&_t<Ft);Ee.match_length=B-(Ft-_t),Ee.match_length>Ee.lookahead&&(Ee.match_length=Ee.lookahead)}if(Ee.match_length>=L?(Nt=o._tr_tally(Ee,1,Ee.match_length-L),Ee.lookahead-=Ee.match_length,Ee.strstart+=Ee.match_length,Ee.match_length=0):(Nt=o._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++),Nt&&(Q(Ee,!1),Ee.strm.avail_out===0))return q}return Ee.insert=0,We===p?(Q(Ee,!0),Ee.strm.avail_out===0?ae:te):Ee.last_lit&&(Q(Ee,!1),Ee.strm.avail_out===0)?q:de}(ue,Se):i[ue.level].func(ue,Se);if(Pe!==ae&&Pe!==te||(ue.status=666),Pe===q||Pe===ae)return z.avail_out===0&&(ue.last_flush=-1),y;if(Pe===de&&(Se===1?o._tr_align(ue):Se!==5&&(o._tr_stored_block(ue,0,0,!1),Se===3&&(D(ue.head),ue.lookahead===0&&(ue.strstart=0,ue.block_start=0,ue.insert=0))),J(z),z.avail_out===0))return ue.last_flush=-1,y}return Se!==p?y:ue.wrap<=0?1:(ue.wrap===2?(ie(ue,255&z.adler),ie(ue,z.adler>>8&255),ie(ue,z.adler>>16&255),ie(ue,z.adler>>24&255),ie(ue,255&z.total_in),ie(ue,z.total_in>>8&255),ie(ue,z.total_in>>16&255),ie(ue,z.total_in>>24&255)):(me(ue,z.adler>>>16),me(ue,65535&z.adler)),J(z),0<ue.wrap&&(ue.wrap=-ue.wrap),ue.pending!==0?y:1)},a.deflateEnd=function(z){var Se;return z&&z.state?(Se=z.state.status)!==P&&Se!==69&&Se!==73&&Se!==91&&Se!==103&&Se!==K&&Se!==666?X(z,v):(z.state=null,Se===K?X(z,-3):y):v},a.deflateSetDictionary=function(z,Se){var Te,ue,oe,ee,xe,Pe,Ee,We,Nt=Se.length;if(!z||!z.state||(ee=(Te=z.state).wrap)===2||ee===1&&Te.status!==P||Te.lookahead)return v;for(ee===1&&(z.adler=l(z.adler,Se,Nt,0)),Te.wrap=0,Nt>=Te.w_size&&(ee===0&&(D(Te.head),Te.strstart=0,Te.block_start=0,Te.insert=0),We=new s.Buf8(Te.w_size),s.arraySet(We,Se,Nt-Te.w_size,Te.w_size,0),Se=We,Nt=Te.w_size),xe=z.avail_in,Pe=z.next_in,Ee=z.input,z.avail_in=Nt,z.next_in=0,z.input=Se,Me(Te);Te.lookahead>=L;){for(ue=Te.strstart,oe=Te.lookahead-(L-1);Te.ins_h=(Te.ins_h<<Te.hash_shift^Te.window[ue+L-1])&Te.hash_mask,Te.prev[ue&Te.w_mask]=Te.head[Te.ins_h],Te.head[Te.ins_h]=ue,ue++,--oe;);Te.strstart=ue,Te.lookahead=L-1,Me(Te)}return Te.strstart+=Te.lookahead,Te.block_start=Te.strstart,Te.insert=Te.lookahead,Te.lookahead=0,Te.match_length=Te.prev_length=L-1,Te.match_available=0,z.next_in=Pe,z.input=Ee,z.avail_in=xe,Te.wrap=ee,y},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,s){var o,l,u,d,h,p,y,v,b,w,x,S,E,C,k,I,R,j,L,B,Z,P,K,q,de;o=i.state,l=i.next_in,q=i.input,u=l+(i.avail_in-5),d=i.next_out,de=i.output,h=d-(s-i.avail_out),p=d+(i.avail_out-257),y=o.dmax,v=o.wsize,b=o.whave,w=o.wnext,x=o.window,S=o.hold,E=o.bits,C=o.lencode,k=o.distcode,I=(1<<o.lenbits)-1,R=(1<<o.distbits)-1;e:do{E<15&&(S+=q[l++]<<E,E+=8,S+=q[l++]<<E,E+=8),j=C[S&I];t:for(;;){if(S>>>=L=j>>>24,E-=L,(L=j>>>16&255)===0)de[d++]=65535&j;else{if(!(16&L)){if((64&L)==0){j=C[(65535&j)+(S&(1<<L)-1)];continue t}if(32&L){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}B=65535&j,(L&=15)&&(E<L&&(S+=q[l++]<<E,E+=8),B+=S&(1<<L)-1,S>>>=L,E-=L),E<15&&(S+=q[l++]<<E,E+=8,S+=q[l++]<<E,E+=8),j=k[S&R];n:for(;;){if(S>>>=L=j>>>24,E-=L,!(16&(L=j>>>16&255))){if((64&L)==0){j=k[(65535&j)+(S&(1<<L)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(Z=65535&j,E<(L&=15)&&(S+=q[l++]<<E,(E+=8)<L&&(S+=q[l++]<<E,E+=8)),y<(Z+=S&(1<<L)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(S>>>=L,E-=L,(L=d-h)<Z){if(b<(L=Z-L)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(K=x,(P=0)===w){if(P+=v-L,L<B){for(B-=L;de[d++]=x[P++],--L;);P=d-Z,K=de}}else if(w<L){if(P+=v+w-L,(L-=w)<B){for(B-=L;de[d++]=x[P++],--L;);if(P=0,w<B){for(B-=L=w;de[d++]=x[P++],--L;);P=d-Z,K=de}}}else if(P+=w-L,L<B){for(B-=L;de[d++]=x[P++],--L;);P=d-Z,K=de}for(;2<B;)de[d++]=K[P++],de[d++]=K[P++],de[d++]=K[P++],B-=3;B&&(de[d++]=K[P++],1<B&&(de[d++]=K[P++]))}else{for(P=d-Z;de[d++]=de[P++],de[d++]=de[P++],de[d++]=de[P++],2<(B-=3););B&&(de[d++]=de[P++],1<B&&(de[d++]=de[P++]))}break}}break}}while(l<u&&d<p);l-=B=E>>3,S&=(1<<(E-=B<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=d<p?p-d+257:257-(d-p),o.hold=S,o.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),s=n("./adler32"),o=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,h=2,p=0,y=-2,v=1,b=852,w=592;function x(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(P){var K;return P&&P.state?(K=P.state,P.total_in=P.total_out=K.total=0,P.msg="",K.wrap&&(P.adler=1&K.wrap),K.mode=v,K.last=0,K.havedict=0,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new i.Buf32(b),K.distcode=K.distdyn=new i.Buf32(w),K.sane=1,K.back=-1,p):y}function C(P){var K;return P&&P.state?((K=P.state).wsize=0,K.whave=0,K.wnext=0,E(P)):y}function k(P,K){var q,de;return P&&P.state?(de=P.state,K<0?(q=0,K=-K):(q=1+(K>>4),K<48&&(K&=15)),K&&(K<8||15<K)?y:(de.window!==null&&de.wbits!==K&&(de.window=null),de.wrap=q,de.wbits=K,C(P))):y}function I(P,K){var q,de;return P?(de=new S,(P.state=de).window=null,(q=k(P,K))!==p&&(P.state=null),q):y}var R,j,L=!0;function B(P){if(L){var K;for(R=new i.Buf32(512),j=new i.Buf32(32),K=0;K<144;)P.lens[K++]=8;for(;K<256;)P.lens[K++]=9;for(;K<280;)P.lens[K++]=7;for(;K<288;)P.lens[K++]=8;for(u(d,P.lens,0,288,R,0,P.work,{bits:9}),K=0;K<32;)P.lens[K++]=5;u(h,P.lens,0,32,j,0,P.work,{bits:5}),L=!1}P.lencode=R,P.lenbits=9,P.distcode=j,P.distbits=5}function Z(P,K,q,de){var ae,te=P.state;return te.window===null&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new i.Buf8(te.wsize)),de>=te.wsize?(i.arraySet(te.window,K,q-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):(de<(ae=te.wsize-te.wnext)&&(ae=de),i.arraySet(te.window,K,q-de,ae,te.wnext),(de-=ae)?(i.arraySet(te.window,K,q-de,de,0),te.wnext=de,te.whave=te.wsize):(te.wnext+=ae,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=ae))),0}a.inflateReset=C,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(P){return I(P,15)},a.inflateInit2=I,a.inflate=function(P,K){var q,de,ae,te,X,re,D,J,Q,ie,me,ve,Me,Ae,Re,ke,Fe,et,Le,Ie,z,Se,Te,ue,oe=0,ee=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return y;(q=P.state).mode===12&&(q.mode=13),X=P.next_out,ae=P.output,D=P.avail_out,te=P.next_in,de=P.input,re=P.avail_in,J=q.hold,Q=q.bits,ie=re,me=D,Se=p;e:for(;;)switch(q.mode){case v:if(q.wrap===0){q.mode=13;break}for(;Q<16;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}if(2&q.wrap&&J===35615){ee[q.check=0]=255&J,ee[1]=J>>>8&255,q.check=o(q.check,ee,2,0),Q=J=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&J)<<8)+(J>>8))%31){P.msg="incorrect header check",q.mode=30;break}if((15&J)!=8){P.msg="unknown compression method",q.mode=30;break}if(Q-=4,z=8+(15&(J>>>=4)),q.wbits===0)q.wbits=z;else if(z>q.wbits){P.msg="invalid window size",q.mode=30;break}q.dmax=1<<z,P.adler=q.check=1,q.mode=512&J?10:12,Q=J=0;break;case 2:for(;Q<16;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}if(q.flags=J,(255&q.flags)!=8){P.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){P.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=J>>8&1),512&q.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,q.check=o(q.check,ee,2,0)),Q=J=0,q.mode=3;case 3:for(;Q<32;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}q.head&&(q.head.time=J),512&q.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,ee[2]=J>>>16&255,ee[3]=J>>>24&255,q.check=o(q.check,ee,4,0)),Q=J=0,q.mode=4;case 4:for(;Q<16;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}q.head&&(q.head.xflags=255&J,q.head.os=J>>8),512&q.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,q.check=o(q.check,ee,2,0)),Q=J=0,q.mode=5;case 5:if(1024&q.flags){for(;Q<16;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}q.length=J,q.head&&(q.head.extra_len=J),512&q.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,q.check=o(q.check,ee,2,0)),Q=J=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(re<(ve=q.length)&&(ve=re),ve&&(q.head&&(z=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),i.arraySet(q.head.extra,de,te,ve,z)),512&q.flags&&(q.check=o(q.check,de,ve,te)),re-=ve,te+=ve,q.length-=ve),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(re===0)break e;for(ve=0;z=de[te+ve++],q.head&&z&&q.length<65536&&(q.head.name+=String.fromCharCode(z)),z&&ve<re;);if(512&q.flags&&(q.check=o(q.check,de,ve,te)),re-=ve,te+=ve,z)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(re===0)break e;for(ve=0;z=de[te+ve++],q.head&&z&&q.length<65536&&(q.head.comment+=String.fromCharCode(z)),z&&ve<re;);if(512&q.flags&&(q.check=o(q.check,de,ve,te)),re-=ve,te+=ve,z)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;Q<16;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}if(J!==(65535&q.check)){P.msg="header crc mismatch",q.mode=30;break}Q=J=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),P.adler=q.check=0,q.mode=12;break;case 10:for(;Q<32;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}P.adler=q.check=x(J),Q=J=0,q.mode=11;case 11:if(q.havedict===0)return P.next_out=X,P.avail_out=D,P.next_in=te,P.avail_in=re,q.hold=J,q.bits=Q,2;P.adler=q.check=1,q.mode=12;case 12:if(K===5||K===6)break e;case 13:if(q.last){J>>>=7&Q,Q-=7&Q,q.mode=27;break}for(;Q<3;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}switch(q.last=1&J,Q-=1,3&(J>>>=1)){case 0:q.mode=14;break;case 1:if(B(q),q.mode=20,K!==6)break;J>>>=2,Q-=2;break e;case 2:q.mode=17;break;case 3:P.msg="invalid block type",q.mode=30}J>>>=2,Q-=2;break;case 14:for(J>>>=7&Q,Q-=7&Q;Q<32;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}if((65535&J)!=(J>>>16^65535)){P.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&J,Q=J=0,q.mode=15,K===6)break e;case 15:q.mode=16;case 16:if(ve=q.length){if(re<ve&&(ve=re),D<ve&&(ve=D),ve===0)break e;i.arraySet(ae,de,te,ve,X),re-=ve,te+=ve,D-=ve,X+=ve,q.length-=ve;break}q.mode=12;break;case 17:for(;Q<14;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}if(q.nlen=257+(31&J),J>>>=5,Q-=5,q.ndist=1+(31&J),J>>>=5,Q-=5,q.ncode=4+(15&J),J>>>=4,Q-=4,286<q.nlen||30<q.ndist){P.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;Q<3;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}q.lens[xe[q.have++]]=7&J,J>>>=3,Q-=3}for(;q.have<19;)q.lens[xe[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Te={bits:q.lenbits},Se=u(0,q.lens,0,19,q.lencode,0,q.work,Te),q.lenbits=Te.bits,Se){P.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;ke=(oe=q.lencode[J&(1<<q.lenbits)-1])>>>16&255,Fe=65535&oe,!((Re=oe>>>24)<=Q);){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}if(Fe<16)J>>>=Re,Q-=Re,q.lens[q.have++]=Fe;else{if(Fe===16){for(ue=Re+2;Q<ue;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}if(J>>>=Re,Q-=Re,q.have===0){P.msg="invalid bit length repeat",q.mode=30;break}z=q.lens[q.have-1],ve=3+(3&J),J>>>=2,Q-=2}else if(Fe===17){for(ue=Re+3;Q<ue;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}Q-=Re,z=0,ve=3+(7&(J>>>=Re)),J>>>=3,Q-=3}else{for(ue=Re+7;Q<ue;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}Q-=Re,z=0,ve=11+(127&(J>>>=Re)),J>>>=7,Q-=7}if(q.have+ve>q.nlen+q.ndist){P.msg="invalid bit length repeat",q.mode=30;break}for(;ve--;)q.lens[q.have++]=z}}if(q.mode===30)break;if(q.lens[256]===0){P.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,Te={bits:q.lenbits},Se=u(d,q.lens,0,q.nlen,q.lencode,0,q.work,Te),q.lenbits=Te.bits,Se){P.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,Te={bits:q.distbits},Se=u(h,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Te),q.distbits=Te.bits,Se){P.msg="invalid distances set",q.mode=30;break}if(q.mode=20,K===6)break e;case 20:q.mode=21;case 21:if(6<=re&&258<=D){P.next_out=X,P.avail_out=D,P.next_in=te,P.avail_in=re,q.hold=J,q.bits=Q,l(P,me),X=P.next_out,ae=P.output,D=P.avail_out,te=P.next_in,de=P.input,re=P.avail_in,J=q.hold,Q=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;ke=(oe=q.lencode[J&(1<<q.lenbits)-1])>>>16&255,Fe=65535&oe,!((Re=oe>>>24)<=Q);){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}if(ke&&(240&ke)==0){for(et=Re,Le=ke,Ie=Fe;ke=(oe=q.lencode[Ie+((J&(1<<et+Le)-1)>>et)])>>>16&255,Fe=65535&oe,!(et+(Re=oe>>>24)<=Q);){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}J>>>=et,Q-=et,q.back+=et}if(J>>>=Re,Q-=Re,q.back+=Re,q.length=Fe,ke===0){q.mode=26;break}if(32&ke){q.back=-1,q.mode=12;break}if(64&ke){P.msg="invalid literal/length code",q.mode=30;break}q.extra=15&ke,q.mode=22;case 22:if(q.extra){for(ue=q.extra;Q<ue;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}q.length+=J&(1<<q.extra)-1,J>>>=q.extra,Q-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;ke=(oe=q.distcode[J&(1<<q.distbits)-1])>>>16&255,Fe=65535&oe,!((Re=oe>>>24)<=Q);){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}if((240&ke)==0){for(et=Re,Le=ke,Ie=Fe;ke=(oe=q.distcode[Ie+((J&(1<<et+Le)-1)>>et)])>>>16&255,Fe=65535&oe,!(et+(Re=oe>>>24)<=Q);){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}J>>>=et,Q-=et,q.back+=et}if(J>>>=Re,Q-=Re,q.back+=Re,64&ke){P.msg="invalid distance code",q.mode=30;break}q.offset=Fe,q.extra=15&ke,q.mode=24;case 24:if(q.extra){for(ue=q.extra;Q<ue;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}q.offset+=J&(1<<q.extra)-1,J>>>=q.extra,Q-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){P.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(D===0)break e;if(ve=me-D,q.offset>ve){if((ve=q.offset-ve)>q.whave&&q.sane){P.msg="invalid distance too far back",q.mode=30;break}Me=ve>q.wnext?(ve-=q.wnext,q.wsize-ve):q.wnext-ve,ve>q.length&&(ve=q.length),Ae=q.window}else Ae=ae,Me=X-q.offset,ve=q.length;for(D<ve&&(ve=D),D-=ve,q.length-=ve;ae[X++]=Ae[Me++],--ve;);q.length===0&&(q.mode=21);break;case 26:if(D===0)break e;ae[X++]=q.length,D--,q.mode=21;break;case 27:if(q.wrap){for(;Q<32;){if(re===0)break e;re--,J|=de[te++]<<Q,Q+=8}if(me-=D,P.total_out+=me,q.total+=me,me&&(P.adler=q.check=q.flags?o(q.check,ae,me,X-me):s(q.check,ae,me,X-me)),me=D,(q.flags?J:x(J))!==q.check){P.msg="incorrect data check",q.mode=30;break}Q=J=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;Q<32;){if(re===0)break e;re--,J+=de[te++]<<Q,Q+=8}if(J!==(4294967295&q.total)){P.msg="incorrect length check",q.mode=30;break}Q=J=0}q.mode=29;case 29:Se=1;break e;case 30:Se=-3;break e;case 31:return-4;case 32:default:return y}return P.next_out=X,P.avail_out=D,P.next_in=te,P.avail_in=re,q.hold=J,q.bits=Q,(q.wsize||me!==P.avail_out&&q.mode<30&&(q.mode<27||K!==4))&&Z(P,P.output,P.next_out,me-P.avail_out)?(q.mode=31,-4):(ie-=P.avail_in,me-=P.avail_out,P.total_in+=ie,P.total_out+=me,q.total+=me,q.wrap&&me&&(P.adler=q.check=q.flags?o(q.check,ae,me,P.next_out-me):s(q.check,ae,me,P.next_out-me)),P.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(ie==0&&me===0||K===4)&&Se===p&&(Se=-5),Se)},a.inflateEnd=function(P){if(!P||!P.state)return y;var K=P.state;return K.window&&(K.window=null),P.state=null,p},a.inflateGetHeader=function(P,K){var q;return P&&P.state?(2&(q=P.state).wrap)==0?y:((q.head=K).done=!1,p):y},a.inflateSetDictionary=function(P,K){var q,de=K.length;return P&&P.state?(q=P.state).wrap!==0&&q.mode!==11?y:q.mode===11&&s(1,K,de,0)!==q.check?-3:Z(P,K,de,de)?(q.mode=31,-4):(q.havedict=1,p):y},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,p,y,v,b,w,x){var S,E,C,k,I,R,j,L,B,Z=x.bits,P=0,K=0,q=0,de=0,ae=0,te=0,X=0,re=0,D=0,J=0,Q=null,ie=0,me=new i.Buf16(16),ve=new i.Buf16(16),Me=null,Ae=0;for(P=0;P<=15;P++)me[P]=0;for(K=0;K<y;K++)me[h[p+K]]++;for(ae=Z,de=15;1<=de&&me[de]===0;de--);if(de<ae&&(ae=de),de===0)return v[b++]=20971520,v[b++]=20971520,x.bits=1,0;for(q=1;q<de&&me[q]===0;q++);for(ae<q&&(ae=q),P=re=1;P<=15;P++)if(re<<=1,(re-=me[P])<0)return-1;if(0<re&&(d===0||de!==1))return-1;for(ve[1]=0,P=1;P<15;P++)ve[P+1]=ve[P]+me[P];for(K=0;K<y;K++)h[p+K]!==0&&(w[ve[h[p+K]]++]=K);if(R=d===0?(Q=Me=w,19):d===1?(Q=s,ie-=257,Me=o,Ae-=257,256):(Q=l,Me=u,-1),P=q,I=b,X=K=J=0,C=-1,k=(D=1<<(te=ae))-1,d===1&&852<D||d===2&&592<D)return 1;for(;;){for(j=P-X,B=w[K]<R?(L=0,w[K]):w[K]>R?(L=Me[Ae+w[K]],Q[ie+w[K]]):(L=96,0),S=1<<P-X,q=E=1<<te;v[I+(J>>X)+(E-=S)]=j<<24|L<<16|B|0,E!==0;);for(S=1<<P-1;J&S;)S>>=1;if(S!==0?(J&=S-1,J+=S):J=0,K++,--me[P]==0){if(P===de)break;P=h[p+w[K]]}if(ae<P&&(J&k)!==C){for(X===0&&(X=ae),I+=q,re=1<<(te=P-X);te+X<de&&!((re-=me[te+X])<=0);)te++,re<<=1;if(D+=1<<te,d===1&&852<D||d===2&&592<D)return 1;v[C=J&k]=ae<<24|te<<16|I-b|0}}return J!==0&&(v[I+J]=P-X<<24|64<<16|0),x.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),s=0,o=1;function l(oe){for(var ee=oe.length;0<=--ee;)oe[ee]=0}var u=0,d=29,h=256,p=h+1+d,y=30,v=19,b=2*p+1,w=15,x=16,S=7,E=256,C=16,k=17,I=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(p+2));l(Z);var P=new Array(2*y);l(P);var K=new Array(512);l(K);var q=new Array(256);l(q);var de=new Array(d);l(de);var ae,te,X,re=new Array(y);function D(oe,ee,xe,Pe,Ee){this.static_tree=oe,this.extra_bits=ee,this.extra_base=xe,this.elems=Pe,this.max_length=Ee,this.has_stree=oe&&oe.length}function J(oe,ee){this.dyn_tree=oe,this.max_code=0,this.stat_desc=ee}function Q(oe){return oe<256?K[oe]:K[256+(oe>>>7)]}function ie(oe,ee){oe.pending_buf[oe.pending++]=255&ee,oe.pending_buf[oe.pending++]=ee>>>8&255}function me(oe,ee,xe){oe.bi_valid>x-xe?(oe.bi_buf|=ee<<oe.bi_valid&65535,ie(oe,oe.bi_buf),oe.bi_buf=ee>>x-oe.bi_valid,oe.bi_valid+=xe-x):(oe.bi_buf|=ee<<oe.bi_valid&65535,oe.bi_valid+=xe)}function ve(oe,ee,xe){me(oe,xe[2*ee],xe[2*ee+1])}function Me(oe,ee){for(var xe=0;xe|=1&oe,oe>>>=1,xe<<=1,0<--ee;);return xe>>>1}function Ae(oe,ee,xe){var Pe,Ee,We=new Array(w+1),Nt=0;for(Pe=1;Pe<=w;Pe++)We[Pe]=Nt=Nt+xe[Pe-1]<<1;for(Ee=0;Ee<=ee;Ee++){var it=oe[2*Ee+1];it!==0&&(oe[2*Ee]=Me(We[it]++,it))}}function Re(oe){var ee;for(ee=0;ee<p;ee++)oe.dyn_ltree[2*ee]=0;for(ee=0;ee<y;ee++)oe.dyn_dtree[2*ee]=0;for(ee=0;ee<v;ee++)oe.bl_tree[2*ee]=0;oe.dyn_ltree[2*E]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function ke(oe){8<oe.bi_valid?ie(oe,oe.bi_buf):0<oe.bi_valid&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function Fe(oe,ee,xe,Pe){var Ee=2*ee,We=2*xe;return oe[Ee]<oe[We]||oe[Ee]===oe[We]&&Pe[ee]<=Pe[xe]}function et(oe,ee,xe){for(var Pe=oe.heap[xe],Ee=xe<<1;Ee<=oe.heap_len&&(Ee<oe.heap_len&&Fe(ee,oe.heap[Ee+1],oe.heap[Ee],oe.depth)&&Ee++,!Fe(ee,Pe,oe.heap[Ee],oe.depth));)oe.heap[xe]=oe.heap[Ee],xe=Ee,Ee<<=1;oe.heap[xe]=Pe}function Le(oe,ee,xe){var Pe,Ee,We,Nt,it=0;if(oe.last_lit!==0)for(;Pe=oe.pending_buf[oe.d_buf+2*it]<<8|oe.pending_buf[oe.d_buf+2*it+1],Ee=oe.pending_buf[oe.l_buf+it],it++,Pe===0?ve(oe,Ee,ee):(ve(oe,(We=q[Ee])+h+1,ee),(Nt=R[We])!==0&&me(oe,Ee-=de[We],Nt),ve(oe,We=Q(--Pe),xe),(Nt=j[We])!==0&&me(oe,Pe-=re[We],Nt)),it<oe.last_lit;);ve(oe,E,ee)}function Ie(oe,ee){var xe,Pe,Ee,We=ee.dyn_tree,Nt=ee.stat_desc.static_tree,it=ee.stat_desc.has_stree,_t=ee.stat_desc.elems,Ft=-1;for(oe.heap_len=0,oe.heap_max=b,xe=0;xe<_t;xe++)We[2*xe]!==0?(oe.heap[++oe.heap_len]=Ft=xe,oe.depth[xe]=0):We[2*xe+1]=0;for(;oe.heap_len<2;)We[2*(Ee=oe.heap[++oe.heap_len]=Ft<2?++Ft:0)]=1,oe.depth[Ee]=0,oe.opt_len--,it&&(oe.static_len-=Nt[2*Ee+1]);for(ee.max_code=Ft,xe=oe.heap_len>>1;1<=xe;xe--)et(oe,We,xe);for(Ee=_t;xe=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],et(oe,We,1),Pe=oe.heap[1],oe.heap[--oe.heap_max]=xe,oe.heap[--oe.heap_max]=Pe,We[2*Ee]=We[2*xe]+We[2*Pe],oe.depth[Ee]=(oe.depth[xe]>=oe.depth[Pe]?oe.depth[xe]:oe.depth[Pe])+1,We[2*xe+1]=We[2*Pe+1]=Ee,oe.heap[1]=Ee++,et(oe,We,1),2<=oe.heap_len;);oe.heap[--oe.heap_max]=oe.heap[1],function(Pt,Zt){var ye,O,G,fe,je,be,Ce=Zt.dyn_tree,le=Zt.max_code,ft=Zt.stat_desc.static_tree,vt=Zt.stat_desc.has_stree,F=Zt.stat_desc.extra_bits,Be=Zt.stat_desc.extra_base,nt=Zt.stat_desc.max_length,ge=0;for(fe=0;fe<=w;fe++)Pt.bl_count[fe]=0;for(Ce[2*Pt.heap[Pt.heap_max]+1]=0,ye=Pt.heap_max+1;ye<b;ye++)nt<(fe=Ce[2*Ce[2*(O=Pt.heap[ye])+1]+1]+1)&&(fe=nt,ge++),Ce[2*O+1]=fe,le<O||(Pt.bl_count[fe]++,je=0,Be<=O&&(je=F[O-Be]),be=Ce[2*O],Pt.opt_len+=be*(fe+je),vt&&(Pt.static_len+=be*(ft[2*O+1]+je)));if(ge!==0){do{for(fe=nt-1;Pt.bl_count[fe]===0;)fe--;Pt.bl_count[fe]--,Pt.bl_count[fe+1]+=2,Pt.bl_count[nt]--,ge-=2}while(0<ge);for(fe=nt;fe!==0;fe--)for(O=Pt.bl_count[fe];O!==0;)le<(G=Pt.heap[--ye])||(Ce[2*G+1]!==fe&&(Pt.opt_len+=(fe-Ce[2*G+1])*Ce[2*G],Ce[2*G+1]=fe),O--)}}(oe,ee),Ae(We,Ft,oe.bl_count)}function z(oe,ee,xe){var Pe,Ee,We=-1,Nt=ee[1],it=0,_t=7,Ft=4;for(Nt===0&&(_t=138,Ft=3),ee[2*(xe+1)+1]=65535,Pe=0;Pe<=xe;Pe++)Ee=Nt,Nt=ee[2*(Pe+1)+1],++it<_t&&Ee===Nt||(it<Ft?oe.bl_tree[2*Ee]+=it:Ee!==0?(Ee!==We&&oe.bl_tree[2*Ee]++,oe.bl_tree[2*C]++):it<=10?oe.bl_tree[2*k]++:oe.bl_tree[2*I]++,We=Ee,Ft=(it=0)===Nt?(_t=138,3):Ee===Nt?(_t=6,3):(_t=7,4))}function Se(oe,ee,xe){var Pe,Ee,We=-1,Nt=ee[1],it=0,_t=7,Ft=4;for(Nt===0&&(_t=138,Ft=3),Pe=0;Pe<=xe;Pe++)if(Ee=Nt,Nt=ee[2*(Pe+1)+1],!(++it<_t&&Ee===Nt)){if(it<Ft)for(;ve(oe,Ee,oe.bl_tree),--it!=0;);else Ee!==0?(Ee!==We&&(ve(oe,Ee,oe.bl_tree),it--),ve(oe,C,oe.bl_tree),me(oe,it-3,2)):it<=10?(ve(oe,k,oe.bl_tree),me(oe,it-3,3)):(ve(oe,I,oe.bl_tree),me(oe,it-11,7));We=Ee,Ft=(it=0)===Nt?(_t=138,3):Ee===Nt?(_t=6,3):(_t=7,4)}}l(re);var Te=!1;function ue(oe,ee,xe,Pe){me(oe,(u<<1)+(Pe?1:0),3),function(Ee,We,Nt,it){ke(Ee),ie(Ee,Nt),ie(Ee,~Nt),i.arraySet(Ee.pending_buf,Ee.window,We,Nt,Ee.pending),Ee.pending+=Nt}(oe,ee,xe)}a._tr_init=function(oe){Te||(function(){var ee,xe,Pe,Ee,We,Nt=new Array(w+1);for(Ee=Pe=0;Ee<d-1;Ee++)for(de[Ee]=Pe,ee=0;ee<1<<R[Ee];ee++)q[Pe++]=Ee;for(q[Pe-1]=Ee,Ee=We=0;Ee<16;Ee++)for(re[Ee]=We,ee=0;ee<1<<j[Ee];ee++)K[We++]=Ee;for(We>>=7;Ee<y;Ee++)for(re[Ee]=We<<7,ee=0;ee<1<<j[Ee]-7;ee++)K[256+We++]=Ee;for(xe=0;xe<=w;xe++)Nt[xe]=0;for(ee=0;ee<=143;)Z[2*ee+1]=8,ee++,Nt[8]++;for(;ee<=255;)Z[2*ee+1]=9,ee++,Nt[9]++;for(;ee<=279;)Z[2*ee+1]=7,ee++,Nt[7]++;for(;ee<=287;)Z[2*ee+1]=8,ee++,Nt[8]++;for(Ae(Z,p+1,Nt),ee=0;ee<y;ee++)P[2*ee+1]=5,P[2*ee]=Me(ee,5);ae=new D(Z,R,h+1,p,w),te=new D(P,j,0,y,w),X=new D(new Array(0),L,0,v,S)}(),Te=!0),oe.l_desc=new J(oe.dyn_ltree,ae),oe.d_desc=new J(oe.dyn_dtree,te),oe.bl_desc=new J(oe.bl_tree,X),oe.bi_buf=0,oe.bi_valid=0,Re(oe)},a._tr_stored_block=ue,a._tr_flush_block=function(oe,ee,xe,Pe){var Ee,We,Nt=0;0<oe.level?(oe.strm.data_type===2&&(oe.strm.data_type=function(it){var _t,Ft=4093624447;for(_t=0;_t<=31;_t++,Ft>>>=1)if(1&Ft&&it.dyn_ltree[2*_t]!==0)return s;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return o;for(_t=32;_t<h;_t++)if(it.dyn_ltree[2*_t]!==0)return o;return s}(oe)),Ie(oe,oe.l_desc),Ie(oe,oe.d_desc),Nt=function(it){var _t;for(z(it,it.dyn_ltree,it.l_desc.max_code),z(it,it.dyn_dtree,it.d_desc.max_code),Ie(it,it.bl_desc),_t=v-1;3<=_t&&it.bl_tree[2*B[_t]+1]===0;_t--);return it.opt_len+=3*(_t+1)+5+5+4,_t}(oe),Ee=oe.opt_len+3+7>>>3,(We=oe.static_len+3+7>>>3)<=Ee&&(Ee=We)):Ee=We=xe+5,xe+4<=Ee&&ee!==-1?ue(oe,ee,xe,Pe):oe.strategy===4||We===Ee?(me(oe,2+(Pe?1:0),3),Le(oe,Z,P)):(me(oe,4+(Pe?1:0),3),function(it,_t,Ft,Pt){var Zt;for(me(it,_t-257,5),me(it,Ft-1,5),me(it,Pt-4,4),Zt=0;Zt<Pt;Zt++)me(it,it.bl_tree[2*B[Zt]+1],3);Se(it,it.dyn_ltree,_t-1),Se(it,it.dyn_dtree,Ft-1)}(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,Nt+1),Le(oe,oe.dyn_ltree,oe.dyn_dtree)),Re(oe),Pe&&ke(oe)},a._tr_tally=function(oe,ee,xe){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=ee>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&ee,oe.pending_buf[oe.l_buf+oe.last_lit]=255&xe,oe.last_lit++,ee===0?oe.dyn_ltree[2*xe]++:(oe.matches++,ee--,oe.dyn_ltree[2*(q[xe]+h+1)]++,oe.dyn_dtree[2*Q(ee)]++),oe.last_lit===oe.lit_bufsize-1},a._tr_align=function(oe){me(oe,2,3),ve(oe,E,Z),function(ee){ee.bi_valid===16?(ie(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)}(oe)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(s,o){if(!s.setImmediate){var l,u,d,h,p=1,y={},v=!1,b=s.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(s);w=w&&w.setTimeout?w:s,l={}.toString.call(s.process)==="[object process]"?function(C){ta.nextTick(function(){S(C)})}:function(){if(s.postMessage&&!s.importScripts){var C=!0,k=s.onmessage;return s.onmessage=function(){C=!1},s.postMessage("","*"),s.onmessage=k,C}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",E,!1):s.attachEvent("onmessage",E),function(C){s.postMessage(h+C,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){d.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(C){var k=b.createElement("script");k.onreadystatechange=function(){S(C),k.onreadystatechange=null,u.removeChild(k),k=null},u.appendChild(k)}):function(C){setTimeout(S,0,C)},w.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var k=new Array(arguments.length-1),I=0;I<k.length;I++)k[I]=arguments[I+1];var R={callback:C,args:k};return y[p]=R,l(p),p++},w.clearImmediate=x}function x(C){delete y[C]}function S(C){if(v)setTimeout(S,0,C);else{var k=y[C];if(k){v=!0;try{(function(I){var R=I.callback,j=I.args;switch(j.length){case 0:R();break;case 1:R(j[0]);break;case 2:R(j[0],j[1]);break;case 3:R(j[0],j[1],j[2]);break;default:R.apply(o,j)}})(k)}finally{x(C),v=!1}}}}function E(C){C.source===s&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof xd<"u"?xd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(wE)),wE.exports}var Wne=Gne();const x5=ui(Wne),gw=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},rr=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Xo=(...e)=>rr(e.map(t=>t.trim()).filter(Boolean).join("/")),E0=e=>{const t=rr(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},ga=e=>{const t=rr(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Ig=(e,t)=>rr(e==="/"?`/${t}`:`${e}/${t}`);var xE,Xj;function Kne(){if(Xj)return xE;Xj=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof ta>"u"||typeof ta.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,s=null,o=null;typeof r!="function"&&(a=r,r=null,o=new this.Promise(function(E,C){i=E,s=C})),a=a||{};var l=!1,u=null,d=null,h=null,p=this,y=function(E,C,k){d&&(clearTimeout(d),d=null),h&&(clearTimeout(h),h=null),E&&(p.queues[t]&&p.queues[t].length===0&&delete p.queues[t],p.domainReentrant&&delete p.domains[t]),l||(o?C?s(C):i(k):typeof r=="function"&&r(C,k),l=!0),E&&p.queues[t]&&p.queues[t].length>0&&p.queues[t].shift()()},v=function(E){if(l)return y(E);u&&(clearTimeout(u),u=null),p.domainReentrant&&E&&(p.domains[t]=ta.domain);var C=a.maxExecutionTime||p.maxExecutionTime;if(C&&(h=setTimeout(function(){p.queues[t]&&y(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var k=!1;try{n(function(I,R){k||(k=!0,y(E,I,R))})}catch(I){k||(k=!0,y(E,I))}}else p._promiseTry(function(){return n()}).then(function(I){y(E,void 0,I)},function(I){y(E,I)})};p.domainReentrant&&ta.domain&&(v=ta.domain.bind(v));var b=a.maxPending||p.maxPending;if(!p.queues[t])p.queues[t]=[],v(!0);else if(p.domainReentrant&&ta.domain&&ta.domain===p.domains[t])v(!1);else if(p.queues[t].length>=b)y(!1,new Error("Too many pending tasks in queue "+t));else{var w=function(){v(!0)};a.skipQueue?p.queues[t].unshift(w):p.queues[t].push(w);var x=a.timeout||p.timeout;x&&(u=setTimeout(function(){u=null,y(!1,new Error("async-lock timed out in queue "+t))},x))}var S=a.maxOccupationTime||p.maxOccupationTime;if(S&&(d=setTimeout(function(){p.queues[t]&&y(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),o)return o},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,s=function(l,u){return function(d){i.acquire(l,u,d,a)}},o=t.reduceRight(function(l,u){return s(u,l)},n);if(typeof r=="function")o(r);else return new this.Promise(function(l,u){o.length===1?o(function(d,h){d?u(d):l(h)}):l(o())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},xE=e,xE}var _E,Jj;function Zne(){return Jj||(Jj=1,_E=Kne()),_E}var Yne=Zne();const jg=ui(Yne);var ev={exports:{}},Qj;function Xne(){return Qj||(Qj=1,typeof Object.create=="function"?ev.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ev.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),ev.exports}var SE,e4;function Jne(){if(e4)return SE;e4=1;var e=pT().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,s=n.length,o=this._len,l=0;l<s;){for(var u=o%i,d=Math.min(s-l,i-u),h=0;h<d;h++)a[u+h]=n[l+h];o+=d,l+=d,o%i===0&&this._update(a)}return this._len+=s,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,s=(a-i)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return n?o.toString(n):o},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},SE=t,SE}var EE,t4;function Qne(){if(t4)return EE;t4=1;var e=Xne(),t=Jne(),n=pT().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function s(d){return d<<1|d>>>31}function o(d){return d<<5|d>>>27}function l(d){return d<<30|d>>>2}function u(d,h,p,y){return d===0?h&p|~h&y:d===2?h&p|h&y|p&y:h^p^y}return i.prototype._update=function(d){for(var h=this._w,p=this._a|0,y=this._b|0,v=this._c|0,b=this._d|0,w=this._e|0,x=0;x<16;++x)h[x]=d.readInt32BE(x*4);for(;x<80;++x)h[x]=s(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=o(p)+u(E,y,v,b)+w+h[S]+r[E]|0;w=b,b=v,v=l(y),y=p,p=C}this._a=p+this._a|0,this._b=y+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=w+this._e|0},i.prototype._hash=function(){var d=n.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},EE=i,EE}var ere=Qne();const _5=ui(ere);var CE,n4;function tre(){if(n4)return CE;n4=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var s="",o=0,l=-1,u=0,d,h=0;h<=a.length;++h){if(h<a.length)d=a.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(l===h-1||u===1))if(l!==h-1&&u===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var p=s.lastIndexOf("/");if(p!==s.length-1){p===-1?(s="",o=0):(s=s.slice(0,p),o=s.length-1-s.lastIndexOf("/")),l=h,u=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=h,u=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+a.slice(l+1,h):s=a.slice(l+1,h),o=h-l-1;l=h,u=0}else d===46&&u!==-1?++u:u=-1}return s}function n(a,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+a+o:o}var r={resolve:function(){for(var i="",s=!1,o,l=arguments.length-1;l>=-1&&!s;l--){var u;l>=0?u=arguments[l]:(o===void 0&&(o=ta.cwd()),u=o),e(u),u.length!==0&&(i=u+"/"+i,s=u.charCodeAt(0)===47)}return i=t(i,!s),s?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var s=i.charCodeAt(0)===47,o=i.charCodeAt(i.length-1)===47;return i=t(i,!s),i.length===0&&!s&&(i="."),i.length>0&&o&&(i+="/"),s?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,s=0;s<arguments.length;++s){var o=arguments[s];e(o),o.length>0&&(i===void 0?i=o:i+="/"+o)}return i===void 0?".":r.normalize(i)},relative:function(i,s){if(e(i),e(s),i===s||(i=r.resolve(i),s=r.resolve(s),i===s))return"";for(var o=1;o<i.length&&i.charCodeAt(o)===47;++o);for(var l=i.length,u=l-o,d=1;d<s.length&&s.charCodeAt(d)===47;++d);for(var h=s.length,p=h-d,y=u<p?u:p,v=-1,b=0;b<=y;++b){if(b===y){if(p>y){if(s.charCodeAt(d+b)===47)return s.slice(d+b+1);if(b===0)return s.slice(d+b)}else u>y&&(i.charCodeAt(o+b)===47?v=b:b===0&&(v=0));break}var w=i.charCodeAt(o+b),x=s.charCodeAt(d+b);if(w!==x)break;w===47&&(v=b)}var S="";for(b=o+v+1;b<=l;++b)(b===l||i.charCodeAt(b)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+s.slice(d+v):(d+=v,s.charCodeAt(d)===47&&++d,s.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var s=i.charCodeAt(0),o=s===47,l=-1,u=!0,d=i.length-1;d>=1;--d)if(s=i.charCodeAt(d),s===47){if(!u){l=d;break}}else u=!1;return l===-1?o?"/":".":o&&l===1?"//":i.slice(0,l)},basename:function(i,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');e(i);var o=0,l=-1,u=!0,d;if(s!==void 0&&s.length>0&&s.length<=i.length){if(s.length===i.length&&s===i)return"";var h=s.length-1,p=-1;for(d=i.length-1;d>=0;--d){var y=i.charCodeAt(d);if(y===47){if(!u){o=d+1;break}}else p===-1&&(u=!1,p=d+1),h>=0&&(y===s.charCodeAt(h)?--h===-1&&(l=d):(h=-1,l=p))}return o===l?l=p:l===-1&&(l=i.length),i.slice(o,l)}else{for(d=i.length-1;d>=0;--d)if(i.charCodeAt(d)===47){if(!u){o=d+1;break}}else l===-1&&(u=!1,l=d+1);return l===-1?"":i.slice(o,l)}},extname:function(i){e(i);for(var s=-1,o=0,l=-1,u=!0,d=0,h=i.length-1;h>=0;--h){var p=i.charCodeAt(h);if(p===47){if(!u){o=h+1;break}continue}l===-1&&(u=!1,l=h+1),p===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||l===-1||d===0||d===1&&s===l-1&&s===o+1?"":i.slice(s,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var s={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return s;var o=i.charCodeAt(0),l=o===47,u;l?(s.root="/",u=1):u=0;for(var d=-1,h=0,p=-1,y=!0,v=i.length-1,b=0;v>=u;--v){if(o=i.charCodeAt(v),o===47){if(!y){h=v+1;break}continue}p===-1&&(y=!1,p=v+1),o===46?d===-1?d=v:b!==1&&(b=1):d!==-1&&(b=-1)}return d===-1||p===-1||b===0||b===1&&d===p-1&&d===h+1?p!==-1&&(h===0&&l?s.base=s.name=i.slice(1,p):s.base=s.name=i.slice(h,p)):(h===0&&l?(s.name=i.slice(1,d),s.base=i.slice(1,p)):(s.name=i.slice(h,d),s.base=i.slice(h,p)),s.ext=i.slice(d,p)),h>0?s.dir=i.slice(0,h-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,CE=r,CE}var Mt=tre(),kE={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var r4;function nre(){return r4||(r4=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var j=0,L=new Array(256),B=0;B!=256;++B)j=B,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,L[B]=j;return typeof Int32Array<"u"?new Int32Array(L):L}var r=n();function a(j){var L=0,B=0,Z=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Z=0;Z!=256;++Z)P[Z]=j[Z];for(Z=0;Z!=256;++Z)for(B=j[Z],L=256+Z;L<4096;L+=256)B=P[L]=B>>>8^j[B&255];var K=[];for(Z=1;Z!=16;++Z)K[Z-1]=typeof Int32Array<"u"?P.subarray(Z*256,Z*256+256):P.slice(Z*256,Z*256+256);return K}var i=a(r),s=i[0],o=i[1],l=i[2],u=i[3],d=i[4],h=i[5],p=i[6],y=i[7],v=i[8],b=i[9],w=i[10],x=i[11],S=i[12],E=i[13],C=i[14];function k(j,L){for(var B=L^-1,Z=0,P=j.length;Z<P;)B=B>>>8^r[(B^j.charCodeAt(Z++))&255];return~B}function I(j,L){for(var B=L^-1,Z=j.length-15,P=0;P<Z;)B=C[j[P++]^B&255]^E[j[P++]^B>>8&255]^S[j[P++]^B>>16&255]^x[j[P++]^B>>>24]^w[j[P++]]^b[j[P++]]^v[j[P++]]^y[j[P++]]^p[j[P++]]^h[j[P++]]^d[j[P++]]^u[j[P++]]^l[j[P++]]^o[j[P++]]^s[j[P++]]^r[j[P++]];for(Z+=15;P<Z;)B=B>>>8^r[(B^j[P++])&255];return~B}function R(j,L){for(var B=L^-1,Z=0,P=j.length,K=0,q=0;Z<P;)K=j.charCodeAt(Z++),K<128?B=B>>>8^r[(B^K)&255]:K<2048?(B=B>>>8^r[(B^(192|K>>6&31))&255],B=B>>>8^r[(B^(128|K&63))&255]):K>=55296&&K<57344?(K=(K&1023)+64,q=j.charCodeAt(Z++)&1023,B=B>>>8^r[(B^(240|K>>8&7))&255],B=B>>>8^r[(B^(128|K>>2&63))&255],B=B>>>8^r[(B^(128|q>>6&15|(K&3)<<4))&255],B=B>>>8^r[(B^(128|q&63))&255]):(B=B>>>8^r[(B^(224|K>>12&15))&255],B=B>>>8^r[(B^(128|K>>6&63))&255],B=B>>>8^r[(B^(128|K&63))&255]);return~B}t.table=r,t.bstr=k,t.buf=I,t.str=R})}(kE)),kE}var rre=nre();const are=ui(rre);var TE={},a4;function ju(){return a4||(a4=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,s){return Object.prototype.hasOwnProperty.call(i,s)}e.assign=function(i){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var o=s.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)n(o,l)&&(i[l]=o[l])}}return i},e.shrinkBuf=function(i,s){return i.length===s?i:i.subarray?i.subarray(0,s):(i.length=s,i)};var r={arraySet:function(i,s,o,l,u){if(s.subarray&&i.subarray){i.set(s.subarray(o,o+l),u);return}for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){var s,o,l,u,d,h;for(l=0,s=0,o=i.length;s<o;s++)l+=i[s].length;for(h=new Uint8Array(l),u=0,s=0,o=i.length;s<o;s++)d=i[s],h.set(d,u),u+=d.length;return h}},a={arraySet:function(i,s,o,l,u){for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(TE)),TE}var th={},Us={},pd={},i4;function ire(){if(i4)return pd;i4=1;var e=ju(),t=4,n=0,r=1,a=2;function i(O){for(var G=O.length;--G>=0;)O[G]=0}var s=0,o=1,l=2,u=3,d=258,h=29,p=256,y=p+1+h,v=30,b=19,w=2*y+1,x=15,S=16,E=7,C=256,k=16,I=17,R=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=512,K=new Array((y+2)*2);i(K);var q=new Array(v*2);i(q);var de=new Array(P);i(de);var ae=new Array(d-u+1);i(ae);var te=new Array(h);i(te);var X=new Array(v);i(X);function re(O,G,fe,je,be){this.static_tree=O,this.extra_bits=G,this.extra_base=fe,this.elems=je,this.max_length=be,this.has_stree=O&&O.length}var D,J,Q;function ie(O,G){this.dyn_tree=O,this.max_code=0,this.stat_desc=G}function me(O){return O<256?de[O]:de[256+(O>>>7)]}function ve(O,G){O.pending_buf[O.pending++]=G&255,O.pending_buf[O.pending++]=G>>>8&255}function Me(O,G,fe){O.bi_valid>S-fe?(O.bi_buf|=G<<O.bi_valid&65535,ve(O,O.bi_buf),O.bi_buf=G>>S-O.bi_valid,O.bi_valid+=fe-S):(O.bi_buf|=G<<O.bi_valid&65535,O.bi_valid+=fe)}function Ae(O,G,fe){Me(O,fe[G*2],fe[G*2+1])}function Re(O,G){var fe=0;do fe|=O&1,O>>>=1,fe<<=1;while(--G>0);return fe>>>1}function ke(O){O.bi_valid===16?(ve(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):O.bi_valid>=8&&(O.pending_buf[O.pending++]=O.bi_buf&255,O.bi_buf>>=8,O.bi_valid-=8)}function Fe(O,G){var fe=G.dyn_tree,je=G.max_code,be=G.stat_desc.static_tree,Ce=G.stat_desc.has_stree,le=G.stat_desc.extra_bits,ft=G.stat_desc.extra_base,vt=G.stat_desc.max_length,F,Be,nt,ge,Oe,Ke,jt=0;for(ge=0;ge<=x;ge++)O.bl_count[ge]=0;for(fe[O.heap[O.heap_max]*2+1]=0,F=O.heap_max+1;F<w;F++)Be=O.heap[F],ge=fe[fe[Be*2+1]*2+1]+1,ge>vt&&(ge=vt,jt++),fe[Be*2+1]=ge,!(Be>je)&&(O.bl_count[ge]++,Oe=0,Be>=ft&&(Oe=le[Be-ft]),Ke=fe[Be*2],O.opt_len+=Ke*(ge+Oe),Ce&&(O.static_len+=Ke*(be[Be*2+1]+Oe)));if(jt!==0){do{for(ge=vt-1;O.bl_count[ge]===0;)ge--;O.bl_count[ge]--,O.bl_count[ge+1]+=2,O.bl_count[vt]--,jt-=2}while(jt>0);for(ge=vt;ge!==0;ge--)for(Be=O.bl_count[ge];Be!==0;)nt=O.heap[--F],!(nt>je)&&(fe[nt*2+1]!==ge&&(O.opt_len+=(ge-fe[nt*2+1])*fe[nt*2],fe[nt*2+1]=ge),Be--)}}function et(O,G,fe){var je=new Array(x+1),be=0,Ce,le;for(Ce=1;Ce<=x;Ce++)je[Ce]=be=be+fe[Ce-1]<<1;for(le=0;le<=G;le++){var ft=O[le*2+1];ft!==0&&(O[le*2]=Re(je[ft]++,ft))}}function Le(){var O,G,fe,je,be,Ce=new Array(x+1);for(fe=0,je=0;je<h-1;je++)for(te[je]=fe,O=0;O<1<<j[je];O++)ae[fe++]=je;for(ae[fe-1]=je,be=0,je=0;je<16;je++)for(X[je]=be,O=0;O<1<<L[je];O++)de[be++]=je;for(be>>=7;je<v;je++)for(X[je]=be<<7,O=0;O<1<<L[je]-7;O++)de[256+be++]=je;for(G=0;G<=x;G++)Ce[G]=0;for(O=0;O<=143;)K[O*2+1]=8,O++,Ce[8]++;for(;O<=255;)K[O*2+1]=9,O++,Ce[9]++;for(;O<=279;)K[O*2+1]=7,O++,Ce[7]++;for(;O<=287;)K[O*2+1]=8,O++,Ce[8]++;for(et(K,y+1,Ce),O=0;O<v;O++)q[O*2+1]=5,q[O*2]=Re(O,5);D=new re(K,j,p+1,y,x),J=new re(q,L,0,v,x),Q=new re(new Array(0),B,0,b,E)}function Ie(O){var G;for(G=0;G<y;G++)O.dyn_ltree[G*2]=0;for(G=0;G<v;G++)O.dyn_dtree[G*2]=0;for(G=0;G<b;G++)O.bl_tree[G*2]=0;O.dyn_ltree[C*2]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function z(O){O.bi_valid>8?ve(O,O.bi_buf):O.bi_valid>0&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Se(O,G,fe,je){z(O),ve(O,fe),ve(O,~fe),e.arraySet(O.pending_buf,O.window,G,fe,O.pending),O.pending+=fe}function Te(O,G,fe,je){var be=G*2,Ce=fe*2;return O[be]<O[Ce]||O[be]===O[Ce]&&je[G]<=je[fe]}function ue(O,G,fe){for(var je=O.heap[fe],be=fe<<1;be<=O.heap_len&&(be<O.heap_len&&Te(G,O.heap[be+1],O.heap[be],O.depth)&&be++,!Te(G,je,O.heap[be],O.depth));)O.heap[fe]=O.heap[be],fe=be,be<<=1;O.heap[fe]=je}function oe(O,G,fe){var je,be,Ce=0,le,ft;if(O.last_lit!==0)do je=O.pending_buf[O.d_buf+Ce*2]<<8|O.pending_buf[O.d_buf+Ce*2+1],be=O.pending_buf[O.l_buf+Ce],Ce++,je===0?Ae(O,be,G):(le=ae[be],Ae(O,le+p+1,G),ft=j[le],ft!==0&&(be-=te[le],Me(O,be,ft)),je--,le=me(je),Ae(O,le,fe),ft=L[le],ft!==0&&(je-=X[le],Me(O,je,ft)));while(Ce<O.last_lit);Ae(O,C,G)}function ee(O,G){var fe=G.dyn_tree,je=G.stat_desc.static_tree,be=G.stat_desc.has_stree,Ce=G.stat_desc.elems,le,ft,vt=-1,F;for(O.heap_len=0,O.heap_max=w,le=0;le<Ce;le++)fe[le*2]!==0?(O.heap[++O.heap_len]=vt=le,O.depth[le]=0):fe[le*2+1]=0;for(;O.heap_len<2;)F=O.heap[++O.heap_len]=vt<2?++vt:0,fe[F*2]=1,O.depth[F]=0,O.opt_len--,be&&(O.static_len-=je[F*2+1]);for(G.max_code=vt,le=O.heap_len>>1;le>=1;le--)ue(O,fe,le);F=Ce;do le=O.heap[1],O.heap[1]=O.heap[O.heap_len--],ue(O,fe,1),ft=O.heap[1],O.heap[--O.heap_max]=le,O.heap[--O.heap_max]=ft,fe[F*2]=fe[le*2]+fe[ft*2],O.depth[F]=(O.depth[le]>=O.depth[ft]?O.depth[le]:O.depth[ft])+1,fe[le*2+1]=fe[ft*2+1]=F,O.heap[1]=F++,ue(O,fe,1);while(O.heap_len>=2);O.heap[--O.heap_max]=O.heap[1],Fe(O,G),et(fe,vt,O.bl_count)}function xe(O,G,fe){var je,be=-1,Ce,le=G[0*2+1],ft=0,vt=7,F=4;for(le===0&&(vt=138,F=3),G[(fe+1)*2+1]=65535,je=0;je<=fe;je++)Ce=le,le=G[(je+1)*2+1],!(++ft<vt&&Ce===le)&&(ft<F?O.bl_tree[Ce*2]+=ft:Ce!==0?(Ce!==be&&O.bl_tree[Ce*2]++,O.bl_tree[k*2]++):ft<=10?O.bl_tree[I*2]++:O.bl_tree[R*2]++,ft=0,be=Ce,le===0?(vt=138,F=3):Ce===le?(vt=6,F=3):(vt=7,F=4))}function Pe(O,G,fe){var je,be=-1,Ce,le=G[0*2+1],ft=0,vt=7,F=4;for(le===0&&(vt=138,F=3),je=0;je<=fe;je++)if(Ce=le,le=G[(je+1)*2+1],!(++ft<vt&&Ce===le)){if(ft<F)do Ae(O,Ce,O.bl_tree);while(--ft!==0);else Ce!==0?(Ce!==be&&(Ae(O,Ce,O.bl_tree),ft--),Ae(O,k,O.bl_tree),Me(O,ft-3,2)):ft<=10?(Ae(O,I,O.bl_tree),Me(O,ft-3,3)):(Ae(O,R,O.bl_tree),Me(O,ft-11,7));ft=0,be=Ce,le===0?(vt=138,F=3):Ce===le?(vt=6,F=3):(vt=7,F=4)}}function Ee(O){var G;for(xe(O,O.dyn_ltree,O.l_desc.max_code),xe(O,O.dyn_dtree,O.d_desc.max_code),ee(O,O.bl_desc),G=b-1;G>=3&&O.bl_tree[Z[G]*2+1]===0;G--);return O.opt_len+=3*(G+1)+5+5+4,G}function We(O,G,fe,je){var be;for(Me(O,G-257,5),Me(O,fe-1,5),Me(O,je-4,4),be=0;be<je;be++)Me(O,O.bl_tree[Z[be]*2+1],3);Pe(O,O.dyn_ltree,G-1),Pe(O,O.dyn_dtree,fe-1)}function Nt(O){var G=4093624447,fe;for(fe=0;fe<=31;fe++,G>>>=1)if(G&1&&O.dyn_ltree[fe*2]!==0)return n;if(O.dyn_ltree[9*2]!==0||O.dyn_ltree[10*2]!==0||O.dyn_ltree[13*2]!==0)return r;for(fe=32;fe<p;fe++)if(O.dyn_ltree[fe*2]!==0)return r;return n}var it=!1;function _t(O){it||(Le(),it=!0),O.l_desc=new ie(O.dyn_ltree,D),O.d_desc=new ie(O.dyn_dtree,J),O.bl_desc=new ie(O.bl_tree,Q),O.bi_buf=0,O.bi_valid=0,Ie(O)}function Ft(O,G,fe,je){Me(O,(s<<1)+(je?1:0),3),Se(O,G,fe)}function Pt(O){Me(O,o<<1,3),Ae(O,C,K),ke(O)}function Zt(O,G,fe,je){var be,Ce,le=0;O.level>0?(O.strm.data_type===a&&(O.strm.data_type=Nt(O)),ee(O,O.l_desc),ee(O,O.d_desc),le=Ee(O),be=O.opt_len+3+7>>>3,Ce=O.static_len+3+7>>>3,Ce<=be&&(be=Ce)):be=Ce=fe+5,fe+4<=be&&G!==-1?Ft(O,G,fe,je):O.strategy===t||Ce===be?(Me(O,(o<<1)+(je?1:0),3),oe(O,K,q)):(Me(O,(l<<1)+(je?1:0),3),We(O,O.l_desc.max_code+1,O.d_desc.max_code+1,le+1),oe(O,O.dyn_ltree,O.dyn_dtree)),Ie(O),je&&z(O)}function ye(O,G,fe){return O.pending_buf[O.d_buf+O.last_lit*2]=G>>>8&255,O.pending_buf[O.d_buf+O.last_lit*2+1]=G&255,O.pending_buf[O.l_buf+O.last_lit]=fe&255,O.last_lit++,G===0?O.dyn_ltree[fe*2]++:(O.matches++,G--,O.dyn_ltree[(ae[fe]+p+1)*2]++,O.dyn_dtree[me(G)*2]++),O.last_lit===O.lit_bufsize-1}return pd._tr_init=_t,pd._tr_stored_block=Ft,pd._tr_flush_block=Zt,pd._tr_tally=ye,pd._tr_align=Pt,pd}var AE,s4;function S5(){if(s4)return AE;s4=1;function e(t,n,r,a){for(var i=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+n[a++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}return AE=e,AE}var NE,o4;function E5(){if(o4)return NE;o4=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,s){var o=t,l=s+i;r^=-1;for(var u=s;u<l;u++)r=r>>>8^o[(r^a[u])&255];return r^-1}return NE=n,NE}var RE,l4;function CT(){return l4||(l4=1,RE={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),RE}var c4;function sre(){if(c4)return Us;c4=1;var e=ju(),t=ire(),n=S5(),r=E5(),a=CT(),i=0,s=1,o=3,l=4,u=5,d=0,h=1,p=-2,y=-3,v=-5,b=-1,w=1,x=2,S=3,E=4,C=0,k=2,I=8,R=9,j=15,L=8,B=29,Z=256,P=Z+1+B,K=30,q=19,de=2*P+1,ae=15,te=3,X=258,re=X+te+1,D=32,J=42,Q=69,ie=73,me=91,ve=103,Me=113,Ae=666,Re=1,ke=2,Fe=3,et=4,Le=3;function Ie(F,Be){return F.msg=a[Be],Be}function z(F){return(F<<1)-(F>4?9:0)}function Se(F){for(var Be=F.length;--Be>=0;)F[Be]=0}function Te(F){var Be=F.state,nt=Be.pending;nt>F.avail_out&&(nt=F.avail_out),nt!==0&&(e.arraySet(F.output,Be.pending_buf,Be.pending_out,nt,F.next_out),F.next_out+=nt,Be.pending_out+=nt,F.total_out+=nt,F.avail_out-=nt,Be.pending-=nt,Be.pending===0&&(Be.pending_out=0))}function ue(F,Be){t._tr_flush_block(F,F.block_start>=0?F.block_start:-1,F.strstart-F.block_start,Be),F.block_start=F.strstart,Te(F.strm)}function oe(F,Be){F.pending_buf[F.pending++]=Be}function ee(F,Be){F.pending_buf[F.pending++]=Be>>>8&255,F.pending_buf[F.pending++]=Be&255}function xe(F,Be,nt,ge){var Oe=F.avail_in;return Oe>ge&&(Oe=ge),Oe===0?0:(F.avail_in-=Oe,e.arraySet(Be,F.input,F.next_in,Oe,nt),F.state.wrap===1?F.adler=n(F.adler,Be,Oe,nt):F.state.wrap===2&&(F.adler=r(F.adler,Be,Oe,nt)),F.next_in+=Oe,F.total_in+=Oe,Oe)}function Pe(F,Be){var nt=F.max_chain_length,ge=F.strstart,Oe,Ke,jt=F.prev_length,pe=F.nice_match,V=F.strstart>F.w_size-re?F.strstart-(F.w_size-re):0,H=F.window,W=F.w_mask,he=F.prev,Ne=F.strstart+X,He=H[ge+jt-1],pt=H[ge+jt];F.prev_length>=F.good_match&&(nt>>=2),pe>F.lookahead&&(pe=F.lookahead);do if(Oe=Be,!(H[Oe+jt]!==pt||H[Oe+jt-1]!==He||H[Oe]!==H[ge]||H[++Oe]!==H[ge+1])){ge+=2,Oe++;do;while(H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&ge<Ne);if(Ke=X-(Ne-ge),ge=Ne-X,Ke>jt){if(F.match_start=Be,jt=Ke,Ke>=pe)break;He=H[ge+jt-1],pt=H[ge+jt]}}while((Be=he[Be&W])>V&&--nt!==0);return jt<=F.lookahead?jt:F.lookahead}function Ee(F){var Be=F.w_size,nt,ge,Oe,Ke,jt;do{if(Ke=F.window_size-F.lookahead-F.strstart,F.strstart>=Be+(Be-re)){e.arraySet(F.window,F.window,Be,Be,0),F.match_start-=Be,F.strstart-=Be,F.block_start-=Be,ge=F.hash_size,nt=ge;do Oe=F.head[--nt],F.head[nt]=Oe>=Be?Oe-Be:0;while(--ge);ge=Be,nt=ge;do Oe=F.prev[--nt],F.prev[nt]=Oe>=Be?Oe-Be:0;while(--ge);Ke+=Be}if(F.strm.avail_in===0)break;if(ge=xe(F.strm,F.window,F.strstart+F.lookahead,Ke),F.lookahead+=ge,F.lookahead+F.insert>=te)for(jt=F.strstart-F.insert,F.ins_h=F.window[jt],F.ins_h=(F.ins_h<<F.hash_shift^F.window[jt+1])&F.hash_mask;F.insert&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[jt+te-1])&F.hash_mask,F.prev[jt&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=jt,jt++,F.insert--,!(F.lookahead+F.insert<te)););}while(F.lookahead<re&&F.strm.avail_in!==0)}function We(F,Be){var nt=65535;for(nt>F.pending_buf_size-5&&(nt=F.pending_buf_size-5);;){if(F.lookahead<=1){if(Ee(F),F.lookahead===0&&Be===i)return Re;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;var ge=F.block_start+nt;if((F.strstart===0||F.strstart>=ge)&&(F.lookahead=F.strstart-ge,F.strstart=ge,ue(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-re&&(ue(F,!1),F.strm.avail_out===0))return Re}return F.insert=0,Be===l?(ue(F,!0),F.strm.avail_out===0?Fe:et):(F.strstart>F.block_start&&(ue(F,!1),F.strm.avail_out===0),Re)}function Nt(F,Be){for(var nt,ge;;){if(F.lookahead<re){if(Ee(F),F.lookahead<re&&Be===i)return Re;if(F.lookahead===0)break}if(nt=0,F.lookahead>=te&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+te-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),nt!==0&&F.strstart-nt<=F.w_size-re&&(F.match_length=Pe(F,nt)),F.match_length>=te)if(ge=t._tr_tally(F,F.strstart-F.match_start,F.match_length-te),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=te){F.match_length--;do F.strstart++,F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+te-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart;while(--F.match_length!==0);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+1])&F.hash_mask;else ge=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(ge&&(ue(F,!1),F.strm.avail_out===0))return Re}return F.insert=F.strstart<te-1?F.strstart:te-1,Be===l?(ue(F,!0),F.strm.avail_out===0?Fe:et):F.last_lit&&(ue(F,!1),F.strm.avail_out===0)?Re:ke}function it(F,Be){for(var nt,ge,Oe;;){if(F.lookahead<re){if(Ee(F),F.lookahead<re&&Be===i)return Re;if(F.lookahead===0)break}if(nt=0,F.lookahead>=te&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+te-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=te-1,nt!==0&&F.prev_length<F.max_lazy_match&&F.strstart-nt<=F.w_size-re&&(F.match_length=Pe(F,nt),F.match_length<=5&&(F.strategy===w||F.match_length===te&&F.strstart-F.match_start>4096)&&(F.match_length=te-1)),F.prev_length>=te&&F.match_length<=F.prev_length){Oe=F.strstart+F.lookahead-te,ge=t._tr_tally(F,F.strstart-1-F.prev_match,F.prev_length-te),F.lookahead-=F.prev_length-1,F.prev_length-=2;do++F.strstart<=Oe&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+te-1])&F.hash_mask,nt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart);while(--F.prev_length!==0);if(F.match_available=0,F.match_length=te-1,F.strstart++,ge&&(ue(F,!1),F.strm.avail_out===0))return Re}else if(F.match_available){if(ge=t._tr_tally(F,0,F.window[F.strstart-1]),ge&&ue(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return Re}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(ge=t._tr_tally(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<te-1?F.strstart:te-1,Be===l?(ue(F,!0),F.strm.avail_out===0?Fe:et):F.last_lit&&(ue(F,!1),F.strm.avail_out===0)?Re:ke}function _t(F,Be){for(var nt,ge,Oe,Ke,jt=F.window;;){if(F.lookahead<=X){if(Ee(F),F.lookahead<=X&&Be===i)return Re;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=te&&F.strstart>0&&(Oe=F.strstart-1,ge=jt[Oe],ge===jt[++Oe]&&ge===jt[++Oe]&&ge===jt[++Oe])){Ke=F.strstart+X;do;while(ge===jt[++Oe]&&ge===jt[++Oe]&&ge===jt[++Oe]&&ge===jt[++Oe]&&ge===jt[++Oe]&&ge===jt[++Oe]&&ge===jt[++Oe]&&ge===jt[++Oe]&&Oe<Ke);F.match_length=X-(Ke-Oe),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=te?(nt=t._tr_tally(F,1,F.match_length-te),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(nt=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),nt&&(ue(F,!1),F.strm.avail_out===0))return Re}return F.insert=0,Be===l?(ue(F,!0),F.strm.avail_out===0?Fe:et):F.last_lit&&(ue(F,!1),F.strm.avail_out===0)?Re:ke}function Ft(F,Be){for(var nt;;){if(F.lookahead===0&&(Ee(F),F.lookahead===0)){if(Be===i)return Re;break}if(F.match_length=0,nt=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,nt&&(ue(F,!1),F.strm.avail_out===0))return Re}return F.insert=0,Be===l?(ue(F,!0),F.strm.avail_out===0?Fe:et):F.last_lit&&(ue(F,!1),F.strm.avail_out===0)?Re:ke}function Pt(F,Be,nt,ge,Oe){this.good_length=F,this.max_lazy=Be,this.nice_length=nt,this.max_chain=ge,this.func=Oe}var Zt;Zt=[new Pt(0,0,0,0,We),new Pt(4,4,8,4,Nt),new Pt(4,5,16,8,Nt),new Pt(4,6,32,32,Nt),new Pt(4,4,16,16,it),new Pt(8,16,32,32,it),new Pt(8,16,128,128,it),new Pt(8,32,128,256,it),new Pt(32,128,258,1024,it),new Pt(32,258,258,4096,it)];function ye(F){F.window_size=2*F.w_size,Se(F.head),F.max_lazy_match=Zt[F.level].max_lazy,F.good_match=Zt[F.level].good_length,F.nice_match=Zt[F.level].nice_length,F.max_chain_length=Zt[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=te-1,F.match_available=0,F.ins_h=0}function O(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(de*2),this.dyn_dtree=new e.Buf16((2*K+1)*2),this.bl_tree=new e.Buf16((2*q+1)*2),Se(this.dyn_ltree),Se(this.dyn_dtree),Se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ae+1),this.heap=new e.Buf16(2*P+1),Se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*P+1),Se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(F){var Be;return!F||!F.state?Ie(F,p):(F.total_in=F.total_out=0,F.data_type=k,Be=F.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?J:Me,F.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),d)}function fe(F){var Be=G(F);return Be===d&&ye(F.state),Be}function je(F,Be){return!F||!F.state||F.state.wrap!==2?p:(F.state.gzhead=Be,d)}function be(F,Be,nt,ge,Oe,Ke){if(!F)return p;var jt=1;if(Be===b&&(Be=6),ge<0?(jt=0,ge=-ge):ge>15&&(jt=2,ge-=16),Oe<1||Oe>R||nt!==I||ge<8||ge>15||Be<0||Be>9||Ke<0||Ke>E)return Ie(F,p);ge===8&&(ge=9);var pe=new O;return F.state=pe,pe.strm=F,pe.wrap=jt,pe.gzhead=null,pe.w_bits=ge,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=Oe+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+te-1)/te),pe.window=new e.Buf8(pe.w_size*2),pe.head=new e.Buf16(pe.hash_size),pe.prev=new e.Buf16(pe.w_size),pe.lit_bufsize=1<<Oe+6,pe.pending_buf_size=pe.lit_bufsize*4,pe.pending_buf=new e.Buf8(pe.pending_buf_size),pe.d_buf=1*pe.lit_bufsize,pe.l_buf=3*pe.lit_bufsize,pe.level=Be,pe.strategy=Ke,pe.method=nt,fe(F)}function Ce(F,Be){return be(F,Be,I,j,L,C)}function le(F,Be){var nt,ge,Oe,Ke;if(!F||!F.state||Be>u||Be<0)return F?Ie(F,p):p;if(ge=F.state,!F.output||!F.input&&F.avail_in!==0||ge.status===Ae&&Be!==l)return Ie(F,F.avail_out===0?v:p);if(ge.strm=F,nt=ge.last_flush,ge.last_flush=Be,ge.status===J)if(ge.wrap===2)F.adler=0,oe(ge,31),oe(ge,139),oe(ge,8),ge.gzhead?(oe(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),oe(ge,ge.gzhead.time&255),oe(ge,ge.gzhead.time>>8&255),oe(ge,ge.gzhead.time>>16&255),oe(ge,ge.gzhead.time>>24&255),oe(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),oe(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(oe(ge,ge.gzhead.extra.length&255),oe(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(F.adler=r(F.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=Q):(oe(ge,0),oe(ge,0),oe(ge,0),oe(ge,0),oe(ge,0),oe(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),oe(ge,Le),ge.status=Me);else{var jt=I+(ge.w_bits-8<<4)<<8,pe=-1;ge.strategy>=x||ge.level<2?pe=0:ge.level<6?pe=1:ge.level===6?pe=2:pe=3,jt|=pe<<6,ge.strstart!==0&&(jt|=D),jt+=31-jt%31,ge.status=Me,ee(ge,jt),ge.strstart!==0&&(ee(ge,F.adler>>>16),ee(ge,F.adler&65535)),F.adler=1}if(ge.status===Q)if(ge.gzhead.extra){for(Oe=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Oe&&(F.adler=r(F.adler,ge.pending_buf,ge.pending-Oe,Oe)),Te(F),Oe=ge.pending,ge.pending===ge.pending_buf_size));)oe(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>Oe&&(F.adler=r(F.adler,ge.pending_buf,ge.pending-Oe,Oe)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=ie)}else ge.status=ie;if(ge.status===ie)if(ge.gzhead.name){Oe=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Oe&&(F.adler=r(F.adler,ge.pending_buf,ge.pending-Oe,Oe)),Te(F),Oe=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.name.length?Ke=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:Ke=0,oe(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>Oe&&(F.adler=r(F.adler,ge.pending_buf,ge.pending-Oe,Oe)),Ke===0&&(ge.gzindex=0,ge.status=me)}else ge.status=me;if(ge.status===me)if(ge.gzhead.comment){Oe=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Oe&&(F.adler=r(F.adler,ge.pending_buf,ge.pending-Oe,Oe)),Te(F),Oe=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.comment.length?Ke=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:Ke=0,oe(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>Oe&&(F.adler=r(F.adler,ge.pending_buf,ge.pending-Oe,Oe)),Ke===0&&(ge.status=ve)}else ge.status=ve;if(ge.status===ve&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Te(F),ge.pending+2<=ge.pending_buf_size&&(oe(ge,F.adler&255),oe(ge,F.adler>>8&255),F.adler=0,ge.status=Me)):ge.status=Me),ge.pending!==0){if(Te(F),F.avail_out===0)return ge.last_flush=-1,d}else if(F.avail_in===0&&z(Be)<=z(nt)&&Be!==l)return Ie(F,v);if(ge.status===Ae&&F.avail_in!==0)return Ie(F,v);if(F.avail_in!==0||ge.lookahead!==0||Be!==i&&ge.status!==Ae){var V=ge.strategy===x?Ft(ge,Be):ge.strategy===S?_t(ge,Be):Zt[ge.level].func(ge,Be);if((V===Fe||V===et)&&(ge.status=Ae),V===Re||V===Fe)return F.avail_out===0&&(ge.last_flush=-1),d;if(V===ke&&(Be===s?t._tr_align(ge):Be!==u&&(t._tr_stored_block(ge,0,0,!1),Be===o&&(Se(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Te(F),F.avail_out===0))return ge.last_flush=-1,d}return Be!==l?d:ge.wrap<=0?h:(ge.wrap===2?(oe(ge,F.adler&255),oe(ge,F.adler>>8&255),oe(ge,F.adler>>16&255),oe(ge,F.adler>>24&255),oe(ge,F.total_in&255),oe(ge,F.total_in>>8&255),oe(ge,F.total_in>>16&255),oe(ge,F.total_in>>24&255)):(ee(ge,F.adler>>>16),ee(ge,F.adler&65535)),Te(F),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?d:h)}function ft(F){var Be;return!F||!F.state?p:(Be=F.state.status,Be!==J&&Be!==Q&&Be!==ie&&Be!==me&&Be!==ve&&Be!==Me&&Be!==Ae?Ie(F,p):(F.state=null,Be===Me?Ie(F,y):d))}function vt(F,Be){var nt=Be.length,ge,Oe,Ke,jt,pe,V,H,W;if(!F||!F.state||(ge=F.state,jt=ge.wrap,jt===2||jt===1&&ge.status!==J||ge.lookahead))return p;for(jt===1&&(F.adler=n(F.adler,Be,nt,0)),ge.wrap=0,nt>=ge.w_size&&(jt===0&&(Se(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),W=new e.Buf8(ge.w_size),e.arraySet(W,Be,nt-ge.w_size,ge.w_size,0),Be=W,nt=ge.w_size),pe=F.avail_in,V=F.next_in,H=F.input,F.avail_in=nt,F.next_in=0,F.input=Be,Ee(ge);ge.lookahead>=te;){Oe=ge.strstart,Ke=ge.lookahead-(te-1);do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[Oe+te-1])&ge.hash_mask,ge.prev[Oe&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=Oe,Oe++;while(--Ke);ge.strstart=Oe,ge.lookahead=te-1,Ee(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=te-1,ge.match_available=0,F.next_in=V,F.input=H,F.avail_in=pe,ge.wrap=jt,d}return Us.deflateInit=Ce,Us.deflateInit2=be,Us.deflateReset=fe,Us.deflateResetKeep=G,Us.deflateSetHeader=je,Us.deflate=le,Us.deflateEnd=ft,Us.deflateSetDictionary=vt,Us.deflateInfo="pako deflate (from Nodeca project)",Us}var md={},u4;function C5(){if(u4)return md;u4=1;var e=ju(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,md.string2buf=function(s){var o,l,u,d,h,p=s.length,y=0;for(d=0;d<p;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<p&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),y+=l<128?1:l<2048?2:l<65536?3:4;for(o=new e.Buf8(y),h=0,d=0;h<y;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<p&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),l<128?o[h++]=l:l<2048?(o[h++]=192|l>>>6,o[h++]=128|l&63):l<65536?(o[h++]=224|l>>>12,o[h++]=128|l>>>6&63,o[h++]=128|l&63):(o[h++]=240|l>>>18,o[h++]=128|l>>>12&63,o[h++]=128|l>>>6&63,o[h++]=128|l&63);return o};function i(s,o){if(o<65534&&(s.subarray&&n||!s.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(s,o));for(var l="",u=0;u<o;u++)l+=String.fromCharCode(s[u]);return l}return md.buf2binstring=function(s){return i(s,s.length)},md.binstring2buf=function(s){for(var o=new e.Buf8(s.length),l=0,u=o.length;l<u;l++)o[l]=s.charCodeAt(l);return o},md.buf2string=function(s,o){var l,u,d,h,p=o||s.length,y=new Array(p*2);for(u=0,l=0;l<p;){if(d=s[l++],d<128){y[u++]=d;continue}if(h=r[d],h>4){y[u++]=65533,l+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&l<p;)d=d<<6|s[l++]&63,h--;if(h>1){y[u++]=65533;continue}d<65536?y[u++]=d:(d-=65536,y[u++]=55296|d>>10&1023,y[u++]=56320|d&1023)}return i(y,u)},md.utf8border=function(s,o){var l;for(o=o||s.length,o>s.length&&(o=s.length),l=o-1;l>=0&&(s[l]&192)===128;)l--;return l<0||l===0?o:l+r[s[l]]>o?l:o},md}var IE,d4;function k5(){if(d4)return IE;d4=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return IE=e,IE}var f4;function ore(){if(f4)return th;f4=1;var e=sre(),t=ju(),n=C5(),r=CT(),a=k5(),i=Object.prototype.toString,s=0,o=4,l=0,u=1,d=2,h=-1,p=0,y=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==l)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,C=e.deflateSetDictionary(this.strm,k),C!==l)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(S,E){var C=this.strm,k=this.options.chunkSize,I,R;if(this.ended)return!1;R=E===~~E?E:E===!0?o:s,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(k),C.next_out=0,C.avail_out=k),I=e.deflate(C,R),I!==u&&I!==l)return this.onEnd(I),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(R===o||R===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&I!==u);return R===o?(I=e.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===l):(R===d&&(this.onEnd(l),C.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function b(S,E){var C=new v(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function w(S,E){return E=E||{},E.raw=!0,b(S,E)}function x(S,E){return E=E||{},E.gzip=!0,b(S,E)}return th.Deflate=v,th.deflate=b,th.deflateRaw=w,th.gzip=x,th}var nh={},ws={},jE,h4;function lre(){if(h4)return jE;h4=1;var e=30,t=12;return jE=function(r,a){var i,s,o,l,u,d,h,p,y,v,b,w,x,S,E,C,k,I,R,j,L,B,Z,P,K;i=r.state,s=r.next_in,P=r.input,o=s+(r.avail_in-5),l=r.next_out,K=r.output,u=l-(a-r.avail_out),d=l+(r.avail_out-257),h=i.dmax,p=i.wsize,y=i.whave,v=i.wnext,b=i.window,w=i.hold,x=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{x<15&&(w+=P[s++]<<x,x+=8,w+=P[s++]<<x,x+=8),I=S[w&C];t:for(;;){if(R=I>>>24,w>>>=R,x-=R,R=I>>>16&255,R===0)K[l++]=I&65535;else if(R&16){j=I&65535,R&=15,R&&(x<R&&(w+=P[s++]<<x,x+=8),j+=w&(1<<R)-1,w>>>=R,x-=R),x<15&&(w+=P[s++]<<x,x+=8,w+=P[s++]<<x,x+=8),I=E[w&k];n:for(;;){if(R=I>>>24,w>>>=R,x-=R,R=I>>>16&255,R&16){if(L=I&65535,R&=15,x<R&&(w+=P[s++]<<x,x+=8,x<R&&(w+=P[s++]<<x,x+=8)),L+=w&(1<<R)-1,L>h){r.msg="invalid distance too far back",i.mode=e;break e}if(w>>>=R,x-=R,R=l-u,L>R){if(R=L-R,R>y&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(B=0,Z=b,v===0){if(B+=p-R,R<j){j-=R;do K[l++]=b[B++];while(--R);B=l-L,Z=K}}else if(v<R){if(B+=p+v-R,R-=v,R<j){j-=R;do K[l++]=b[B++];while(--R);if(B=0,v<j){R=v,j-=R;do K[l++]=b[B++];while(--R);B=l-L,Z=K}}}else if(B+=v-R,R<j){j-=R;do K[l++]=b[B++];while(--R);B=l-L,Z=K}for(;j>2;)K[l++]=Z[B++],K[l++]=Z[B++],K[l++]=Z[B++],j-=3;j&&(K[l++]=Z[B++],j>1&&(K[l++]=Z[B++]))}else{B=l-L;do K[l++]=K[B++],K[l++]=K[B++],K[l++]=K[B++],j-=3;while(j>2);j&&(K[l++]=K[B++],j>1&&(K[l++]=K[B++]))}}else if((R&64)===0){I=E[(I&65535)+(w&(1<<R)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((R&64)===0){I=S[(I&65535)+(w&(1<<R)-1)];continue t}else if(R&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(s<o&&l<d);j=x>>3,s-=j,x-=j<<3,w&=(1<<x)-1,r.next_in=s,r.next_out=l,r.avail_in=s<o?5+(o-s):5-(s-o),r.avail_out=l<d?257+(d-l):257-(l-d),i.hold=w,i.bits=x},jE}var OE,p4;function cre(){if(p4)return OE;p4=1;var e=ju(),t=15,n=852,r=592,a=0,i=1,s=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return OE=function(p,y,v,b,w,x,S,E){var C=E.bits,k=0,I=0,R=0,j=0,L=0,B=0,Z=0,P=0,K=0,q=0,de,ae,te,X,re,D=null,J=0,Q,ie=new e.Buf16(t+1),me=new e.Buf16(t+1),ve=null,Me=0,Ae,Re,ke;for(k=0;k<=t;k++)ie[k]=0;for(I=0;I<b;I++)ie[y[v+I]]++;for(L=C,j=t;j>=1&&ie[j]===0;j--);if(L>j&&(L=j),j===0)return w[x++]=1<<24|64<<16|0,w[x++]=1<<24|64<<16|0,E.bits=1,0;for(R=1;R<j&&ie[R]===0;R++);for(L<R&&(L=R),P=1,k=1;k<=t;k++)if(P<<=1,P-=ie[k],P<0)return-1;if(P>0&&(p===a||j!==1))return-1;for(me[1]=0,k=1;k<t;k++)me[k+1]=me[k]+ie[k];for(I=0;I<b;I++)y[v+I]!==0&&(S[me[y[v+I]]++]=I);if(p===a?(D=ve=S,Q=19):p===i?(D=o,J-=257,ve=l,Me-=257,Q=256):(D=u,ve=d,Q=-1),q=0,I=0,k=R,re=x,B=L,Z=0,te=-1,K=1<<L,X=K-1,p===i&&K>n||p===s&&K>r)return 1;for(;;){Ae=k-Z,S[I]<Q?(Re=0,ke=S[I]):S[I]>Q?(Re=ve[Me+S[I]],ke=D[J+S[I]]):(Re=96,ke=0),de=1<<k-Z,ae=1<<B,R=ae;do ae-=de,w[re+(q>>Z)+ae]=Ae<<24|Re<<16|ke|0;while(ae!==0);for(de=1<<k-1;q&de;)de>>=1;if(de!==0?(q&=de-1,q+=de):q=0,I++,--ie[k]===0){if(k===j)break;k=y[v+S[I]]}if(k>L&&(q&X)!==te){for(Z===0&&(Z=L),re+=R,B=k-Z,P=1<<B;B+Z<j&&(P-=ie[B+Z],!(P<=0));)B++,P<<=1;if(K+=1<<B,p===i&&K>n||p===s&&K>r)return 1;te=q&X,w[te]=L<<24|B<<16|re-x|0}}return q!==0&&(w[re+q]=k-Z<<24|64<<16|0),E.bits=L,0},OE}var m4;function ure(){if(m4)return ws;m4=1;var e=ju(),t=S5(),n=E5(),r=lre(),a=cre(),i=0,s=1,o=2,l=4,u=5,d=6,h=0,p=1,y=2,v=-2,b=-3,w=-4,x=-5,S=8,E=1,C=2,k=3,I=4,R=5,j=6,L=7,B=8,Z=9,P=10,K=11,q=12,de=13,ae=14,te=15,X=16,re=17,D=18,J=19,Q=20,ie=21,me=22,ve=23,Me=24,Ae=25,Re=26,ke=27,Fe=28,et=29,Le=30,Ie=31,z=32,Se=852,Te=592,ue=15,oe=ue;function ee(be){return(be>>>24&255)+(be>>>8&65280)+((be&65280)<<8)+((be&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Pe(be){var Ce;return!be||!be.state?v:(Ce=be.state,be.total_in=be.total_out=Ce.total=0,be.msg="",Ce.wrap&&(be.adler=Ce.wrap&1),Ce.mode=E,Ce.last=0,Ce.havedict=0,Ce.dmax=32768,Ce.head=null,Ce.hold=0,Ce.bits=0,Ce.lencode=Ce.lendyn=new e.Buf32(Se),Ce.distcode=Ce.distdyn=new e.Buf32(Te),Ce.sane=1,Ce.back=-1,h)}function Ee(be){var Ce;return!be||!be.state?v:(Ce=be.state,Ce.wsize=0,Ce.whave=0,Ce.wnext=0,Pe(be))}function We(be,Ce){var le,ft;return!be||!be.state||(ft=be.state,Ce<0?(le=0,Ce=-Ce):(le=(Ce>>4)+1,Ce<48&&(Ce&=15)),Ce&&(Ce<8||Ce>15))?v:(ft.window!==null&&ft.wbits!==Ce&&(ft.window=null),ft.wrap=le,ft.wbits=Ce,Ee(be))}function Nt(be,Ce){var le,ft;return be?(ft=new xe,be.state=ft,ft.window=null,le=We(be,Ce),le!==h&&(be.state=null),le):v}function it(be){return Nt(be,oe)}var _t=!0,Ft,Pt;function Zt(be){if(_t){var Ce;for(Ft=new e.Buf32(512),Pt=new e.Buf32(32),Ce=0;Ce<144;)be.lens[Ce++]=8;for(;Ce<256;)be.lens[Ce++]=9;for(;Ce<280;)be.lens[Ce++]=7;for(;Ce<288;)be.lens[Ce++]=8;for(a(s,be.lens,0,288,Ft,0,be.work,{bits:9}),Ce=0;Ce<32;)be.lens[Ce++]=5;a(o,be.lens,0,32,Pt,0,be.work,{bits:5}),_t=!1}be.lencode=Ft,be.lenbits=9,be.distcode=Pt,be.distbits=5}function ye(be,Ce,le,ft){var vt,F=be.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new e.Buf8(F.wsize)),ft>=F.wsize?(e.arraySet(F.window,Ce,le-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(vt=F.wsize-F.wnext,vt>ft&&(vt=ft),e.arraySet(F.window,Ce,le-ft,vt,F.wnext),ft-=vt,ft?(e.arraySet(F.window,Ce,le-ft,ft,0),F.wnext=ft,F.whave=F.wsize):(F.wnext+=vt,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=vt))),0}function O(be,Ce){var le,ft,vt,F,Be,nt,ge,Oe,Ke,jt,pe,V,H,W,he=0,Ne,He,pt,Kt,ut,Rt,Lt,Qt,An=new e.Buf8(4),Wn,xr,_r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!be||!be.state||!be.output||!be.input&&be.avail_in!==0)return v;le=be.state,le.mode===q&&(le.mode=de),Be=be.next_out,vt=be.output,ge=be.avail_out,F=be.next_in,ft=be.input,nt=be.avail_in,Oe=le.hold,Ke=le.bits,jt=nt,pe=ge,Qt=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=de;break}for(;Ke<16;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}if(le.wrap&2&&Oe===35615){le.check=0,An[0]=Oe&255,An[1]=Oe>>>8&255,le.check=n(le.check,An,2,0),Oe=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((Oe&255)<<8)+(Oe>>8))%31){be.msg="incorrect header check",le.mode=Le;break}if((Oe&15)!==S){be.msg="unknown compression method",le.mode=Le;break}if(Oe>>>=4,Ke-=4,Lt=(Oe&15)+8,le.wbits===0)le.wbits=Lt;else if(Lt>le.wbits){be.msg="invalid window size",le.mode=Le;break}le.dmax=1<<Lt,be.adler=le.check=1,le.mode=Oe&512?P:q,Oe=0,Ke=0;break;case C:for(;Ke<16;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}if(le.flags=Oe,(le.flags&255)!==S){be.msg="unknown compression method",le.mode=Le;break}if(le.flags&57344){be.msg="unknown header flags set",le.mode=Le;break}le.head&&(le.head.text=Oe>>8&1),le.flags&512&&(An[0]=Oe&255,An[1]=Oe>>>8&255,le.check=n(le.check,An,2,0)),Oe=0,Ke=0,le.mode=k;case k:for(;Ke<32;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}le.head&&(le.head.time=Oe),le.flags&512&&(An[0]=Oe&255,An[1]=Oe>>>8&255,An[2]=Oe>>>16&255,An[3]=Oe>>>24&255,le.check=n(le.check,An,4,0)),Oe=0,Ke=0,le.mode=I;case I:for(;Ke<16;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}le.head&&(le.head.xflags=Oe&255,le.head.os=Oe>>8),le.flags&512&&(An[0]=Oe&255,An[1]=Oe>>>8&255,le.check=n(le.check,An,2,0)),Oe=0,Ke=0,le.mode=R;case R:if(le.flags&1024){for(;Ke<16;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}le.length=Oe,le.head&&(le.head.extra_len=Oe),le.flags&512&&(An[0]=Oe&255,An[1]=Oe>>>8&255,le.check=n(le.check,An,2,0)),Oe=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=j;case j:if(le.flags&1024&&(V=le.length,V>nt&&(V=nt),V&&(le.head&&(Lt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ft,F,V,Lt)),le.flags&512&&(le.check=n(le.check,ft,V,F)),nt-=V,F+=V,le.length-=V),le.length))break e;le.length=0,le.mode=L;case L:if(le.flags&2048){if(nt===0)break e;V=0;do Lt=ft[F+V++],le.head&&Lt&&le.length<65536&&(le.head.name+=String.fromCharCode(Lt));while(Lt&&V<nt);if(le.flags&512&&(le.check=n(le.check,ft,V,F)),nt-=V,F+=V,Lt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=B;case B:if(le.flags&4096){if(nt===0)break e;V=0;do Lt=ft[F+V++],le.head&&Lt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Lt));while(Lt&&V<nt);if(le.flags&512&&(le.check=n(le.check,ft,V,F)),nt-=V,F+=V,Lt)break e}else le.head&&(le.head.comment=null);le.mode=Z;case Z:if(le.flags&512){for(;Ke<16;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}if(Oe!==(le.check&65535)){be.msg="header crc mismatch",le.mode=Le;break}Oe=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),be.adler=le.check=0,le.mode=q;break;case P:for(;Ke<32;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}be.adler=le.check=ee(Oe),Oe=0,Ke=0,le.mode=K;case K:if(le.havedict===0)return be.next_out=Be,be.avail_out=ge,be.next_in=F,be.avail_in=nt,le.hold=Oe,le.bits=Ke,y;be.adler=le.check=1,le.mode=q;case q:if(Ce===u||Ce===d)break e;case de:if(le.last){Oe>>>=Ke&7,Ke-=Ke&7,le.mode=ke;break}for(;Ke<3;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}switch(le.last=Oe&1,Oe>>>=1,Ke-=1,Oe&3){case 0:le.mode=ae;break;case 1:if(Zt(le),le.mode=Q,Ce===d){Oe>>>=2,Ke-=2;break e}break;case 2:le.mode=re;break;case 3:be.msg="invalid block type",le.mode=Le}Oe>>>=2,Ke-=2;break;case ae:for(Oe>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}if((Oe&65535)!==(Oe>>>16^65535)){be.msg="invalid stored block lengths",le.mode=Le;break}if(le.length=Oe&65535,Oe=0,Ke=0,le.mode=te,Ce===d)break e;case te:le.mode=X;case X:if(V=le.length,V){if(V>nt&&(V=nt),V>ge&&(V=ge),V===0)break e;e.arraySet(vt,ft,F,V,Be),nt-=V,F+=V,ge-=V,Be+=V,le.length-=V;break}le.mode=q;break;case re:for(;Ke<14;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}if(le.nlen=(Oe&31)+257,Oe>>>=5,Ke-=5,le.ndist=(Oe&31)+1,Oe>>>=5,Ke-=5,le.ncode=(Oe&15)+4,Oe>>>=4,Ke-=4,le.nlen>286||le.ndist>30){be.msg="too many length or distance symbols",le.mode=Le;break}le.have=0,le.mode=D;case D:for(;le.have<le.ncode;){for(;Ke<3;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}le.lens[_r[le.have++]]=Oe&7,Oe>>>=3,Ke-=3}for(;le.have<19;)le.lens[_r[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,Wn={bits:le.lenbits},Qt=a(i,le.lens,0,19,le.lencode,0,le.work,Wn),le.lenbits=Wn.bits,Qt){be.msg="invalid code lengths set",le.mode=Le;break}le.have=0,le.mode=J;case J:for(;le.have<le.nlen+le.ndist;){for(;he=le.lencode[Oe&(1<<le.lenbits)-1],Ne=he>>>24,He=he>>>16&255,pt=he&65535,!(Ne<=Ke);){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}if(pt<16)Oe>>>=Ne,Ke-=Ne,le.lens[le.have++]=pt;else{if(pt===16){for(xr=Ne+2;Ke<xr;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}if(Oe>>>=Ne,Ke-=Ne,le.have===0){be.msg="invalid bit length repeat",le.mode=Le;break}Lt=le.lens[le.have-1],V=3+(Oe&3),Oe>>>=2,Ke-=2}else if(pt===17){for(xr=Ne+3;Ke<xr;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}Oe>>>=Ne,Ke-=Ne,Lt=0,V=3+(Oe&7),Oe>>>=3,Ke-=3}else{for(xr=Ne+7;Ke<xr;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}Oe>>>=Ne,Ke-=Ne,Lt=0,V=11+(Oe&127),Oe>>>=7,Ke-=7}if(le.have+V>le.nlen+le.ndist){be.msg="invalid bit length repeat",le.mode=Le;break}for(;V--;)le.lens[le.have++]=Lt}}if(le.mode===Le)break;if(le.lens[256]===0){be.msg="invalid code -- missing end-of-block",le.mode=Le;break}if(le.lenbits=9,Wn={bits:le.lenbits},Qt=a(s,le.lens,0,le.nlen,le.lencode,0,le.work,Wn),le.lenbits=Wn.bits,Qt){be.msg="invalid literal/lengths set",le.mode=Le;break}if(le.distbits=6,le.distcode=le.distdyn,Wn={bits:le.distbits},Qt=a(o,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,Wn),le.distbits=Wn.bits,Qt){be.msg="invalid distances set",le.mode=Le;break}if(le.mode=Q,Ce===d)break e;case Q:le.mode=ie;case ie:if(nt>=6&&ge>=258){be.next_out=Be,be.avail_out=ge,be.next_in=F,be.avail_in=nt,le.hold=Oe,le.bits=Ke,r(be,pe),Be=be.next_out,vt=be.output,ge=be.avail_out,F=be.next_in,ft=be.input,nt=be.avail_in,Oe=le.hold,Ke=le.bits,le.mode===q&&(le.back=-1);break}for(le.back=0;he=le.lencode[Oe&(1<<le.lenbits)-1],Ne=he>>>24,He=he>>>16&255,pt=he&65535,!(Ne<=Ke);){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}if(He&&(He&240)===0){for(Kt=Ne,ut=He,Rt=pt;he=le.lencode[Rt+((Oe&(1<<Kt+ut)-1)>>Kt)],Ne=he>>>24,He=he>>>16&255,pt=he&65535,!(Kt+Ne<=Ke);){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}Oe>>>=Kt,Ke-=Kt,le.back+=Kt}if(Oe>>>=Ne,Ke-=Ne,le.back+=Ne,le.length=pt,He===0){le.mode=Re;break}if(He&32){le.back=-1,le.mode=q;break}if(He&64){be.msg="invalid literal/length code",le.mode=Le;break}le.extra=He&15,le.mode=me;case me:if(le.extra){for(xr=le.extra;Ke<xr;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}le.length+=Oe&(1<<le.extra)-1,Oe>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=ve;case ve:for(;he=le.distcode[Oe&(1<<le.distbits)-1],Ne=he>>>24,He=he>>>16&255,pt=he&65535,!(Ne<=Ke);){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}if((He&240)===0){for(Kt=Ne,ut=He,Rt=pt;he=le.distcode[Rt+((Oe&(1<<Kt+ut)-1)>>Kt)],Ne=he>>>24,He=he>>>16&255,pt=he&65535,!(Kt+Ne<=Ke);){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}Oe>>>=Kt,Ke-=Kt,le.back+=Kt}if(Oe>>>=Ne,Ke-=Ne,le.back+=Ne,He&64){be.msg="invalid distance code",le.mode=Le;break}le.offset=pt,le.extra=He&15,le.mode=Me;case Me:if(le.extra){for(xr=le.extra;Ke<xr;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}le.offset+=Oe&(1<<le.extra)-1,Oe>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){be.msg="invalid distance too far back",le.mode=Le;break}le.mode=Ae;case Ae:if(ge===0)break e;if(V=pe-ge,le.offset>V){if(V=le.offset-V,V>le.whave&&le.sane){be.msg="invalid distance too far back",le.mode=Le;break}V>le.wnext?(V-=le.wnext,H=le.wsize-V):H=le.wnext-V,V>le.length&&(V=le.length),W=le.window}else W=vt,H=Be-le.offset,V=le.length;V>ge&&(V=ge),ge-=V,le.length-=V;do vt[Be++]=W[H++];while(--V);le.length===0&&(le.mode=ie);break;case Re:if(ge===0)break e;vt[Be++]=le.length,ge--,le.mode=ie;break;case ke:if(le.wrap){for(;Ke<32;){if(nt===0)break e;nt--,Oe|=ft[F++]<<Ke,Ke+=8}if(pe-=ge,be.total_out+=pe,le.total+=pe,pe&&(be.adler=le.check=le.flags?n(le.check,vt,pe,Be-pe):t(le.check,vt,pe,Be-pe)),pe=ge,(le.flags?Oe:ee(Oe))!==le.check){be.msg="incorrect data check",le.mode=Le;break}Oe=0,Ke=0}le.mode=Fe;case Fe:if(le.wrap&&le.flags){for(;Ke<32;){if(nt===0)break e;nt--,Oe+=ft[F++]<<Ke,Ke+=8}if(Oe!==(le.total&4294967295)){be.msg="incorrect length check",le.mode=Le;break}Oe=0,Ke=0}le.mode=et;case et:Qt=p;break e;case Le:Qt=b;break e;case Ie:return w;case z:default:return v}return be.next_out=Be,be.avail_out=ge,be.next_in=F,be.avail_in=nt,le.hold=Oe,le.bits=Ke,(le.wsize||pe!==be.avail_out&&le.mode<Le&&(le.mode<ke||Ce!==l))&&ye(be,be.output,be.next_out,pe-be.avail_out),jt-=be.avail_in,pe-=be.avail_out,be.total_in+=jt,be.total_out+=pe,le.total+=pe,le.wrap&&pe&&(be.adler=le.check=le.flags?n(le.check,vt,pe,be.next_out-pe):t(le.check,vt,pe,be.next_out-pe)),be.data_type=le.bits+(le.last?64:0)+(le.mode===q?128:0)+(le.mode===Q||le.mode===te?256:0),(jt===0&&pe===0||Ce===l)&&Qt===h&&(Qt=x),Qt}function G(be){if(!be||!be.state)return v;var Ce=be.state;return Ce.window&&(Ce.window=null),be.state=null,h}function fe(be,Ce){var le;return!be||!be.state||(le=be.state,(le.wrap&2)===0)?v:(le.head=Ce,Ce.done=!1,h)}function je(be,Ce){var le=Ce.length,ft,vt,F;return!be||!be.state||(ft=be.state,ft.wrap!==0&&ft.mode!==K)?v:ft.mode===K&&(vt=1,vt=t(vt,Ce,le,0),vt!==ft.check)?b:(F=ye(be,Ce,le,le),F?(ft.mode=Ie,w):(ft.havedict=1,h))}return ws.inflateReset=Ee,ws.inflateReset2=We,ws.inflateResetKeep=Pe,ws.inflateInit=it,ws.inflateInit2=Nt,ws.inflate=O,ws.inflateEnd=G,ws.inflateGetHeader=fe,ws.inflateSetDictionary=je,ws.inflateInfo="pako inflate (from Nodeca project)",ws}var DE,g4;function T5(){return g4||(g4=1,DE={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),DE}var ME,y4;function dre(){if(y4)return ME;y4=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return ME=e,ME}var b4;function fre(){if(b4)return nh;b4=1;var e=ure(),t=ju(),n=C5(),r=T5(),a=CT(),i=k5(),s=dre(),o=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(h&&h.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15)===0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var y=e.inflateInit2(this.strm,p.windowBits);if(y!==r.Z_OK)throw new Error(a[y]);if(this.header=new s,e.inflateGetHeader(this.strm,this.header),p.dictionary&&(typeof p.dictionary=="string"?p.dictionary=n.string2buf(p.dictionary):o.call(p.dictionary)==="[object ArrayBuffer]"&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(y=e.inflateSetDictionary(this.strm,p.dictionary),y!==r.Z_OK)))throw new Error(a[y])}l.prototype.push=function(h,p){var y=this.strm,v=this.options.chunkSize,b=this.options.dictionary,w,x,S,E,C,k=!1;if(this.ended)return!1;x=p===~~p?p:p===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?y.input=n.binstring2buf(h):o.call(h)==="[object ArrayBuffer]"?y.input=new Uint8Array(h):y.input=h,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new t.Buf8(v),y.next_out=0,y.avail_out=v),w=e.inflate(y,r.Z_NO_FLUSH),w===r.Z_NEED_DICT&&b&&(w=e.inflateSetDictionary(this.strm,b)),w===r.Z_BUF_ERROR&&k===!0&&(w=r.Z_OK,k=!1),w!==r.Z_STREAM_END&&w!==r.Z_OK)return this.onEnd(w),this.ended=!0,!1;y.next_out&&(y.avail_out===0||w===r.Z_STREAM_END||y.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(y.output,y.next_out),E=y.next_out-S,C=n.buf2string(y.output,S),y.next_out=E,y.avail_out=v-E,E&&t.arraySet(y.output,y.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(y.output,y.next_out))),y.avail_in===0&&y.avail_out===0&&(k=!0)}while((y.avail_in>0||y.avail_out===0)&&w!==r.Z_STREAM_END);return w===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(w=e.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),y.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function u(h,p){var y=new l(p);if(y.push(h,!0),y.err)throw y.msg||a[y.err];return y.result}function d(h,p){return p=p||{},p.raw=!0,u(h,p)}return nh.Inflate=l,nh.inflate=u,nh.inflateRaw=d,nh.ungzip=u,nh}var PE,v4;function hre(){if(v4)return PE;v4=1;var e=ju().assign,t=ore(),n=fre(),r=T5(),a={};return e(a,t,n,r),PE=a,PE}var pre=hre();const kT=ui(pre);var FE,w4;function mre(){if(w4)return FE;w4=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,s)=>{n.multiArgs?r.push((...o)=>{n.errorFirst?o[0]?s(o):(o.shift(),i(o)):i(o)}):n.errorFirst?r.push((o,l)=>{o?s(o):i(l)}):r.push(i),t.apply(this,r)})};return FE=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=s=>{const o=l=>typeof l=="string"?s===l:l.test(s);return n.include?n.include.some(o):!n.exclude.some(o)};let i;r==="function"?i=function(...s){return n.excludeMain?t(...s):e(t,n).apply(this,s)}:i=Object.create(Object.getPrototypeOf(t));for(const s in t){const o=t[s];i[s]=typeof o=="function"&&a(s)?e(o,n):o}return i},FE}var gre=mre();const LE=ui(gre);var $E,x4;function yre(){if(x4)return $E;x4=1;var e={};function t(te){return Array.isArray(te)?te:[te]}const n="",r=" ",a="\\",i=/^\s+$/,s=/(?:[^\\]|^)\\$/,o=/^\\!/,l=/^\\#/,u=/\r?\n/g,d=/^\.*\/|^\.+$/,h="/";let p="node-ignore";typeof Symbol<"u"&&(p=Symbol.for("node-ignore"));const y=p,v=(te,X,re)=>Object.defineProperty(te,X,{value:re}),b=/([0-z])-([0-z])/g,w=()=>!1,x=te=>te.replace(b,(X,re,D)=>re.charCodeAt(0)<=D.charCodeAt(0)?X:n),S=te=>{const{length:X}=te;return te.slice(0,X-X%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(te,X,re)=>X+(re.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(te,X)=>{const{length:re}=X;return X.slice(0,re-re%2)+r}],[/[\\$.|*+(){^]/g,te=>`\\${te}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(te,X,re)=>X+6<re.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(te,X,re)=>{const D=re.replace(/\\\*/g,"[^\\/]*");return X+D}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(te,X,re,D,J)=>X===a?`\\[${re}${S(D)}${J}`:J==="]"&&D.length%2===0?`[${x(re)}${D}]`:"[]"],[/(?:[^*])$/,te=>/\/$/.test(te)?`${te}$`:`${te}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(te,X)=>`${X?`${X}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),k=(te,X)=>{let re=C[te];return re||(re=E.reduce((D,[J,Q])=>D.replace(J,Q.bind(te)),te),C[te]=re),X?new RegExp(re,"i"):new RegExp(re)},I=te=>typeof te=="string",R=te=>te&&I(te)&&!i.test(te)&&!s.test(te)&&te.indexOf("#")!==0,j=te=>te.split(u);class L{constructor(X,re,D,J){this.origin=X,this.pattern=re,this.negative=D,this.regex=J}}const B=(te,X)=>{const re=te;let D=!1;te.indexOf("!")===0&&(D=!0,te=te.substr(1)),te=te.replace(o,"!").replace(l,"#");const J=k(te,X);return new L(re,te,D,J)},Z=(te,X)=>{throw new X(te)},P=(te,X,re)=>I(te)?te?P.isNotRelative(te)?re(`path should be a \`path.relative()\`d string, but got "${X}"`,RangeError):!0:re("path must not be empty",TypeError):re(`path must be a string, but got \`${X}\``,TypeError),K=te=>d.test(te);P.isNotRelative=K,P.convert=te=>te;class q{constructor({ignorecase:X=!0,ignoreCase:re=X,allowRelativePaths:D=!1}={}){v(this,y,!0),this._rules=[],this._ignoreCase=re,this._allowRelativePaths=D,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(X){if(X&&X[y]){this._rules=this._rules.concat(X._rules),this._added=!0;return}if(R(X)){const re=B(X,this._ignoreCase);this._added=!0,this._rules.push(re)}}add(X){return this._added=!1,t(I(X)?j(X):X).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(X){return this.add(X)}_testOne(X,re){let D=!1,J=!1;return this._rules.forEach(Q=>{const{negative:ie}=Q;if(J===ie&&D!==J||ie&&!D&&!J&&!re)return;Q.regex.test(X)&&(D=!ie,J=ie)}),{ignored:D,unignored:J}}_test(X,re,D,J){const Q=X&&P.convert(X);return P(Q,X,this._allowRelativePaths?w:Z),this._t(Q,re,D,J)}_t(X,re,D,J){if(X in re)return re[X];if(J||(J=X.split(h)),J.pop(),!J.length)return re[X]=this._testOne(X,D);const Q=this._t(J.join(h)+h,re,D,J);return re[X]=Q.ignored?Q:this._testOne(X,D)}ignores(X){return this._test(X,this._ignoreCache,!1).ignored}createFilter(){return X=>!this.ignores(X)}filter(X){return t(X).filter(this.createFilter())}test(X){return this._test(X,this._testCache,!0)}}const de=te=>new q(te),ae=te=>P(te&&P.convert(te),te,w);if(de.isPathValid=ae,de.default=de,$E=de,typeof ta<"u"&&(e&&e.IGNORE_TEST_WIN32||ta.platform==="win32")){const te=re=>/^\\\\\?\\/.test(re)||/["<>|\u0000-\u001F]+/u.test(re)?re:re.replace(/\\/g,"/");P.convert=te;const X=/^[a-z]:\//i;P.isNotRelative=re=>X.test(re)||K(re)}return $E}var bre=yre();const vre=ui(bre);var BE,_4;function wre(){if(_4)return BE;_4=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return BE=n,BE}var xre=wre();const Uo=ui(xre);var zE,S4;function _re(){return S4||(S4=1,zE=function(e,t){var n=e,r=t,a=n.length,i=r.length,s=!1,o=null,l=a+1,u=[],d=[],h=[],p="",y=-1,v=0,b=1,w,x,S=function(){a>=i&&(w=n,x=a,n=r,r=w,a=i,i=x,s=!0,l=a+1)},E=function(R,j,L){return{x:R,y:j,k:L}},C=function(R,j){return{elem:R,t:j}},k=function(R,j,L){var B,Z,P;for(j>L?B=u[R-1+l]:B=u[R+1+l],P=Math.max(j,L),Z=P-R;Z<a&&P<i&&n[Z]===r[P];)++Z,++P;return u[R+l]=d.length,d[d.length]=new E(Z,P,B),P},I=function(R){var j,L,B;for(j=L=0,B=R.length-1;B>=0;--B)for(;j<R[B].x||L<R[B].y;)R[B].y-R[B].x>L-j?(s?h[h.length]=new C(r[L],y):h[h.length]=new C(r[L],b),++L):R[B].y-R[B].x<L-j?(s?h[h.length]=new C(n[j],b):h[h.length]=new C(n[j],y),++j):(h[h.length]=new C(n[j],v),p+=n[j],++j,++L)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return p},getses:function(){return h},compose:function(){var R,j,L,B,Z,P,K,q;for(R=i-a,j=a+i+3,L={},K=0;K<j;++K)L[K]=-1,u[K]=-1;B=-1;do{for(++B,q=-B;q<=R-1;++q)L[q+l]=k(q,L[q-1+l]+1,L[q+1+l]);for(q=R+B;q>=R+1;--q)L[q+l]=k(q,L[q-1+l]+1,L[q+1+l]);L[R+l]=k(R,L[R-1+l]+1,L[R+1+l])}while(L[R+l]!==i);for(o=R+2*B,Z=u[R+l],P=[];Z!==-1;)P[P.length]=new E(d[Z].x,d[Z].y,null),Z=d[Z].k;I(P)}}}),zE}var UE,E4;function Sre(){if(E4)return UE;E4=1;var e=_re();function t(i,s){var o=new e(i,s);o.compose();for(var l=o.getses(),u,d,h=i.length-1,p=s.length-1,y=l.length-1;y>=0;--y)l[y].t===o.SES_COMMON?(d?(d.chain={file1index:h,file2index:p,chain:null},d=d.chain):(u={file1index:h,file2index:p,chain:null},d=u),h--,p--):l[y].t===o.SES_DELETE?h--:l[y].t===o.SES_ADD&&p--;var v={file1index:-1,file2index:-1,chain:null};return d?(d.chain=v,u):v}function n(i,s){for(var o=[],l=i.length,u=s.length,d=t(i,s);d!==null;d=d.chain){var h=l-d.file1index-1,p=u-d.file2index-1;l=d.file1index,u=d.file2index,(h||p)&&o.push({file1:[l+1,h],file2:[u+1,p]})}return o.reverse(),o}function r(i,s,o){var l,u=n(s,i),d=n(s,o),h=[];function p(X,re){h.push([X.file1[0],re,X.file1[1],X.file2[0],X.file2[1]])}for(l=0;l<u.length;l++)p(u[l],0);for(l=0;l<d.length;l++)p(d[l],2);h.sort(function(X,re){return X[0]-re[0]});var y=[],v=0;function b(X){X>v&&(y.push([1,v,X-v]),v=X)}for(var w=0;w<h.length;w++){for(var x=w,S=h[w],E=S[0],C=E+S[2];w<h.length-1;){var k=h[w+1],I=k[0];if(I>C)break;C=Math.max(C,I+k[2]),w++}if(b(E),x==w)S[4]>0&&y.push([S[1],S[3],S[4]]);else{var R={0:[i.length,-1,s.length,-1],2:[o.length,-1,s.length,-1]};for(l=x;l<=w;l++){S=h[l];var j=S[1],L=R[j],B=S[0],Z=B+S[2],P=S[3],K=P+S[4];L[0]=Math.min(P,L[0]),L[1]=Math.max(K,L[1]),L[2]=Math.min(B,L[2]),L[3]=Math.max(Z,L[3])}var q=R[0][0]+(E-R[0][2]),de=R[0][1]+(C-R[0][3]),ae=R[2][0]+(E-R[2][2]),te=R[2][1]+(C-R[2][3]);y.push([-1,q,de-q,E,C-E,ae,te-ae])}v=C}return b(s.length),y}function a(i,s,o){var l=[],u=[i,s,o],d=r(i,s,o),h=[];function p(){h.length&&l.push({ok:h}),h=[]}function y(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],k=0;k<S[2];k++)if(i[k+E]!=o[k+C])return!0;return!1}for(var b=0;b<d.length;b++){var w=d[b],x=w[0];x==-1?v(w)?(p(),l.push({conflict:{a:i.slice(w[1],w[1]+w[2]),aIndex:w[1],o:s.slice(w[3],w[3]+w[4]),oIndex:w[3],b:o.slice(w[5],w[5]+w[6]),bIndex:w[5]}})):y(u[0].slice(w[1],w[1]+w[2])):y(u[x].slice(w[1],w[1]+w[2]))}return p(),l}return UE=a,UE}var Ere=Sre();const Cre=ui(Ere);class sr extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new sr(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class C0 extends sr{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=C0.code,this.data={filepaths:t}}}C0.code="UnmergedPathsError";class In extends sr{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=In.code,this.data={message:t}}}In.code="InternalError";class up extends sr{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=up.code,this.data={filepath:t}}}up.code="UnsafeFilepathError";class $o{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function Px(e,t){return-(e<t)||+(e>t)}function A5(e,t){return Px(e.path,t.path)}function N5(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const jo=2**32;function C4(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function Lh(e){const[t,n]=C4(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=C4(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%jo,ctimeNanoseconds:n%jo,mtimeSeconds:r%jo,mtimeNanoseconds:a%jo,dev:e.dev%jo,ino:e.ino%jo,mode:N5(e.mode%jo),uid:e.uid%jo,gid:e.gid%jo,size:e.size>-1?e.size%jo:0}}function kre(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let HE=null;async function tc(e){return HE===null&&(HE=await Are()),HE?R5(e):Tre(e)}function Tre(e){return new _5().update(e).digest("hex")}async function R5(e){const t=await crypto.subtle.digest("SHA-1",e);return kre(t)}async function Are(){try{if(await R5(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function Nre(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function Rre(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Jt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class wd{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Jt.isBuffer(t))return wd.fromBuffer(t);if(t===null)return new wd(null);throw new In("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new In("Index file is empty (.git/index)");const n=new wd,r=new $o(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new In(`Invalid dircache magic file number: ${a}`);const i=await tc(t.slice(0,-20)),s=t.slice(-20).toString("hex");if(s!==i)throw new In(`Invalid checksum in GitIndex buffer: expected ${s} but saw ${i}`);const o=r.readUInt32BE();if(o!==2)throw new In(`Unsupported dircache version: ${o}`);const l=r.readUInt32BE();let u=0;for(;!r.eof()&&u<l;){const d={};d.ctimeSeconds=r.readUInt32BE(),d.ctimeNanoseconds=r.readUInt32BE(),d.mtimeSeconds=r.readUInt32BE(),d.mtimeNanoseconds=r.readUInt32BE(),d.dev=r.readUInt32BE(),d.ino=r.readUInt32BE(),d.mode=r.readUInt32BE(),d.uid=r.readUInt32BE(),d.gid=r.readUInt32BE(),d.size=r.readUInt32BE(),d.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();d.flags=Nre(h);const p=t.indexOf(0,r.tell()+1)-r.tell();if(p<1)throw new In(`Got a path length of: ${p}`);if(d.path=r.toString("utf8",p),d.path.includes("..\\")||d.path.includes("../"))throw new up(d.path);let y=8-(r.tell()-12)%8;for(y===0&&(y=8);y--;){const v=r.readUInt8();if(v!==0)throw new In(`Expected 1-8 null characters but got '${v}' after ${d.path}`);if(r.eof())throw new In("Unexpected end of file")}d.stages=[],n._addEntry(d),u++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(A5)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Lh(n);const i=Jt.from(t),s={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(s),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Jt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Jt.alloc(r),i=new $o(a),s=Lh(t);return i.writeUInt32BE(s.ctimeSeconds),i.writeUInt32BE(s.ctimeNanoseconds),i.writeUInt32BE(s.mtimeSeconds),i.writeUInt32BE(s.mtimeNanoseconds),i.writeUInt32BE(s.dev),i.writeUInt32BE(s.ino),i.writeUInt32BE(s.mode),i.writeUInt32BE(s.uid),i.writeUInt32BE(s.gid),i.writeUInt32BE(s.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(Rre(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Jt.alloc(12),n=new $o(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const o of this.entries)if(r.push(wd._entryToBuffer(o)),o.stages.length>1)for(const l of o.stages)l&&l!==o&&r.push(wd._entryToBuffer(l));r=await Promise.all(r);const a=Jt.concat(r),i=Jt.concat([t,a]),s=await tc(i);return Jt.concat([i,Jt.from(s,"hex")])}}function yw(e,t,n=!0,r=!0){const a=Lh(e),i=Lh(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let qE=null;const VE=Symbol("IndexCache");function Ire(){return{map:new Map,stats:new Map}}async function jre(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await wd.from(a);n.map.set(t,i),n.stats.set(t,r)}async function Ore(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:yw(r,a)}class $a{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[VE]||(r[VE]=Ire());const s=`${n}/index`;qE===null&&(qE=new jg({maxPending:1/0}));let o,l=[];return await qE.acquire(s,async()=>{const u=r[VE];await Ore(t,s,u)&&await jre(t,s,u);const d=u.map.get(s);if(l=d.unmergedPaths,l.length&&!a)throw new C0(l);if(o=await i(d),d._dirty){const h=await d.toObject();await t.write(s,h),u.stats.set(s,await t.lstat(s)),d._dirty=!1}}),o}}function bw(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function $h(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function I5(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:bw(a),metadata:{},children:[]};t.set(a,i),i.parent=n($h(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const s={type:"blob",fullpath:a,basename:bw(a),metadata:i,parent:n($h(a)),children:[]};s.parent&&s.parent.children.push(s),t.set(a,s)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function Dre(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new In(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class Mre{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=$a.acquire({fs:t,gitdir:n,cache:r},async function(i){return I5(i.entries)});const a=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(s=>s.fullpath);return i.sort(Px),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:Lh(r.metadata);t._type=r.type==="tree"?"tree":Dre(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const Fx=Symbol("GitWalkSymbol");function dp(){const e=Object.create(null);return Object.defineProperty(e,Fx,{value:function({fs:t,gitdir:n,cache:r}){return new Mre({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class Nr extends sr{constructor(t){super(`Could not find ${t}.`),this.code=this.name=Nr.code,this.data={what:t}}}Nr.code="NotFoundError";class ki extends sr{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=ki.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}ki.code="ObjectTypeError";class vu extends sr{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=vu.code,this.data={value:t}}}vu.code="InvalidOidError";class k0 extends sr{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=k0.code,this.data={remote:t}}}k0.code="NoRefspecError";class vw{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new vw(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class ww{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,s]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=n==="+",l=a==="*";if(l!==(s==="*"))throw new In("Invalid refspec");return new ww({remotePath:r,localPath:i,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class TT{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(ww.from(r));return new TT(n)}add(t){const n=ww.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function Pre(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const Fre=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Lm=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},k4={core:{filemode:Lm,bare:Lm,logallrefupdates:Lm,symlinks:Lm,ignorecase:Lm,bigFileThreshold:Fre}},Lre=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,$re=/^[A-Za-z0-9-.]+$/,Bre=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,zre=/^[A-Za-z][A-Za-z-]*$/,Ure=/^(.*?)( *[#;].*)$/,Hre=e=>{const t=Lre.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},qre=e=>{const t=Bre.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=Vre(r),i=Gre(a);return[n,i]}return null},Vre=e=>{const t=Ure.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return T4(n)&&T4(r)?`${n}${r}`:n},T4=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,Gre=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",s=n==="\\"&&a[r+1]==='"';return i||s?t:t+n},""),A4=e=>e!=null?e.toLowerCase():null,TC=(e,t,n)=>[A4(e),t,A4(n)].filter(r=>r!=null).join("."),N4=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:TC(n,a,r),sectionPath:TC(n,a,null),isSection:!!n}},Wre=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class AT{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,s=null;const o=a.trim(),l=Hre(o),u=l!=null;if(u)[n,r]=l;else{const h=qre(o);h!=null&&([i,s]=h)}const d=TC(n,r,i);return{line:a,isSection:u,section:n,subsection:r,name:i,value:s,path:d}}):[]}static from(t){return new AT(t)}async get(t,n=!1){const r=N4(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:s,value:o})=>{const l=k4[i]&&k4[i][s];return l?l(o):o});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:s,path:o,sectionPath:l,isSection:u}=N4(t),d=Wre(this.parsedConfig,h=>h.path===o);if(n==null)d!==-1&&this.parsedConfig.splice(d,1);else if(d!==-1){const h=this.parsedConfig[d],p=Object.assign({},h,{name:s,value:n,modified:!0});r?this.parsedConfig.splice(d+1,0,p):this.parsedConfig[d]=p}else{const h=this.parsedConfig.findIndex(y=>y.path===l),p={section:a,subsection:i,name:s,value:n,modified:!0,path:o};if($re.test(a)&&zre.test(s))if(h>=0)this.parsedConfig.splice(h+1,0,p);else{const y={isSection:u,section:a,subsection:i,modified:!0,path:l};this.parsedConfig.push(y,p)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:s=!1})=>s?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class ya{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return AT.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const tv=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],Kre=["config","description","index","shallow","commondir"];let GE;async function Wc(e,t){return GE===void 0&&(GE=new jg),GE.acquire(e,t)}class Ut{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:s,refspecs:o=void 0,prune:l=!1,pruneTags:u=!1}){for(const w of a.values())if(!w.match(/[0-9a-f]{40}/))throw new vu(w);const d=await ya.get({fs:t,gitdir:n});if(!o){if(o=await d.getall(`remote.${r}.fetch`),o.length===0)throw new k0(r);o.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=TT.from(o),p=new Map;if(u){const w=await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Ut.deleteRefs({fs:t,gitdir:n,refs:w.map(x=>`refs/tags/${x}`)})}if(s){for(const w of a.keys())if(w.startsWith("refs/tags")&&!w.endsWith("^{}")&&!await Ut.exists({fs:t,gitdir:n,ref:w})){const x=a.get(w);p.set(w,x)}}const y=h.translate([...a.keys()]);for(const[w,x]of y){const S=a.get(w);p.set(x,S)}const v=h.translate([...i.keys()]);for(const[w,x]of v){const S=i.get(w),E=h.translateOne(S);E&&p.set(x,`ref: ${E}`)}const b=[];if(l){for(const w of h.localNamespaces()){const x=(await Ut.listRefs({fs:t,gitdir:n,filepath:w})).map(S=>`${w}/${S}`);for(const S of x)p.has(S)||b.push(S)}b.length>0&&await Ut.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[w,x]of p)await Wc(w,async()=>t.write(Mt.join(n,w),`${x.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new vu(a);await Wc(r,async()=>t.write(Mt.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Wc(r,async()=>t.write(Mt.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Ut.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(o=>t.rm(Mt.join(n,o))));let a=await Wc("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=vw.from(a),s=i.refs.size;for(const o of r)i.refs.has(o)&&i.delete(o);i.refs.size<s&&(a=i.toString(),await Wc("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Ut.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Ut.packedRefs({fs:t,gitdir:n}),s=tv(r).filter(o=>!Kre.includes(o));for(const o of s){const l=await Wc(o,async()=>await t.read(`${n}/${o}`,{encoding:"utf8"})||i.get(o));if(l)return Ut.resolve({fs:t,gitdir:n,ref:l.trim(),depth:a})}throw new Nr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Ut.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Ut.packedRefs({fs:t,gitdir:n}),i=tv(r);for(const s of i)if(await Wc(s,async()=>t.exists(`${n}/${s}`))||a.has(s))return s;throw new Nr(r)}static async expandAgainstMap({ref:t,map:n}){const r=tv(t);for(const a of r)if(await n.has(a))return a;throw new Nr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Ut.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=tv(t);for(const s of i){const o=a.get(s);if(o)return Ut.resolveAgainstMap({ref:o.trim(),fullref:s,depth:r,map:a})}throw new Nr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Wc("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return vw.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Ut.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(s=>s.replace(`${n}/${r}/`,""))}catch{i=[]}for(let s of(await a).keys())s.startsWith(r)&&(s=s.replace(r+"/",""),i.includes(s)||i.push(s));return i.sort(Pre),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Ut.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Ut.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function Zre(e,t){return Px(R4(e),R4(t))}function R4(e){return e.mode==="040000"?e.path+"/":e.path}function j5(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new In(`Unexpected GitTree entry mode: ${e}`)}function Yre(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new In(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new In(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const s=j5(i),o=e.slice(r+1,a).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new up(o);const l=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:o,oid:l,type:s})}return t}function Xre(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new In(`Could not understand file mode: ${e}`)}function Jre(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=Xre(e.mode),e.type||(e.type=j5(e.mode)),e}class Li{constructor(t){if(Jt.isBuffer(t))this._entries=Yre(t);else if(Array.isArray(t))this._entries=t.map(Jre);else throw new In("invalid type passed to GitTree constructor");this._entries.sort(A5)}static from(t){return new Li(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(Zre),Jt.concat(t.map(n=>{const r=Jt.from(n.mode.replace(/^0/,"")),a=Jt.from(" "),i=Jt.from(n.path,"utf8"),s=Jt.from([0]),o=Jt.from(n.oid,"hex");return Jt.concat([r,a,i,s,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class fp{static wrap({type:t,object:n}){return Jt.concat([Jt.from(`${t} ${n.byteLength.toString()}\0`),Jt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),s=t.length-(r+1);if(parseInt(i)!==s)throw new In(`Length mismatch: expected ${i} bytes but got ${s} instead.`);return{type:a,object:Jt.from(t.slice(r+1))}}}async function O5({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function Qre(e,t){const n=new $o(e),r=I4(n);if(r!==t.byteLength)throw new In(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=I4(n);let i;const s=O4(n,t);if(s.byteLength===a)i=s;else{i=Jt.alloc(a);const o=new $o(i);for(o.copy(s);!n.eof();)o.copy(O4(n,t));const l=o.tell();if(a!==l)throw new In(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${l} bytes`)}return i}function I4(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function j4(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function O4(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const s=j4(e,n&a,4);let o=j4(e,(n&i)>>4,3);return o===0&&(o=65536),t.slice(s,s+o)}else return e.slice(n)}function eae(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function D5(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:eae(e)}class M5{constructor(t){if(typeof Jt>"u")throw new Error("Missing Buffer dependency");this.stream=D5(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Jt.alloc(0):(n&&(n=Jt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>tae(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Jt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function tae(e){return e.reduce((t,n)=>t+n.length,0)}async function nae(e,t){const n=new M5(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new In(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new In(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const s=n.tell(),{type:o,length:l,ofs:u,reference:d}=await rae(n),h=new kT.Inflate;for(;!h.result;){const p=await n.chunk();if(!p)break;if(h.push(p,!1),h.err)throw new In(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new In("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(p.length-h.strm.avail_in);const y=n.tell();await t({data:h.result,type:o,num:i,offset:s,end:y,reference:d,ofs:u})}}}}async function rae(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let s=4;do t=await e.byte(),r|=(t&127)<<s,s+=7;while(t&128)}let a,i;if(n===6){let s=0;a=0;const o=[];do t=await e.byte(),a|=(t&127)<<s,s+=7,o.push(t);while(t&128);i=Jt.from(o)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function P5(e){return kT.inflate(e)}function aae(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function iae(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class Bh{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new $o(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new In(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new In("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const s=r.readUInt32BE(),o=[];for(let d=0;d<s;d++){const h=r.slice(20).toString("hex");o[d]=h}r.seek(r.tell()+4*s);const l=new Map;for(let d=0;d<s;d++)l.set(o[d],r.readUInt32BE());const u=r.slice(20).toString("hex");return new Bh({hashes:o,crcs:{},offsets:l,packfileSha:u,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},s=t.slice(-20).toString("hex"),o=[],l={},u=new Map;let d=null,h=null;await nae([t],async({data:w,type:x,reference:S,offset:E,num:C})=>{d===null&&(d=C);const k=Math.floor((d-C)*100/d);k!==h&&r&&await r({phase:"Receiving objects",loaded:d-C,total:d}),h=k,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const p=Object.keys(i).map(Number);for(const[w,x]of p.entries()){const S=w+1===p.length?t.byteLength-20:p[w+1],E=i[x],C=are.buf(t.slice(x,S))>>>0;E.end=S,E.crc=C}const y=new Bh({pack:Promise.resolve(t),packfileSha:s,crcs:l,hashes:o,offsets:u,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let w in i){w=Number(w);const x=Math.floor(v*100/d);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:d}),v++,h=x;const S=i[w];if(!S.oid)try{y.readDepth=0,y.externalReadDepth=0;const{type:E,object:C}=await y.readSlice({start:w});b[y.readDepth]+=1;const k=await tc(fp.wrap({type:E,object:C}));S.oid=k,o.push(k),u.set(k,w),l[k]=S.crc}catch{continue}}return o.sort(),y}async toBuffer(){const t=[],n=(u,d)=>{t.push(Jt.from(u,d))};n("ff744f63","hex"),n("00000002","hex");const r=new $o(Jt.alloc(256*4));for(let u=0;u<256;u++){let d=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=u&&d++;r.writeUInt32BE(d)}t.push(r.buffer);for(const u of this.hashes)n(u,"hex");const a=new $o(Jt.alloc(this.hashes.length*4));for(const u of this.hashes)a.writeUInt32BE(this.crcs[u]);t.push(a.buffer);const i=new $o(Jt.alloc(this.hashes.length*4));for(const u of this.hashes)i.writeUInt32BE(this.offsets.get(u));t.push(i.buffer),n(this.packfileSha,"hex");const s=Jt.concat(t),o=await tc(s),l=Jt.alloc(20);return l.write(o,"hex"),Jt.concat([s,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new In(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new In("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new $o(r),i=a.readUInt8(),s=i&112;let o=n[s];if(o===void 0)throw new In("Unrecognized type: 0b"+s.toString(2));const l=i&15;let u=l;i&128&&(u=iae(a,l));let h=null,p=null;if(o==="ofs_delta"){const v=aae(a),b=t-v;({object:h,type:o}=await this.readSlice({start:b}))}if(o==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:o}=await this.read({oid:v}))}const y=r.slice(a.tell());if(p=Jt.from(await P5(y)),p.byteLength!==u)throw new In(`Packfile told us object would have length ${u} but it had length ${p.byteLength}`);return h&&(p=Jt.from(Qre(p,h))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:p}),{type:o,format:"content",object:p}}}const nv=Symbol("PackfileCache");async function sae({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return Bh.fromIdx({idx:i,getExternalRefDelta:n})}function NT({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[nv]||(t[nv]=new Map);let s=t[nv].get(n);return s||(s=sae({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[nv].set(n,s)),s}async function oae({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let s=await e.readdir(Mt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await NT({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(u.error)throw new In(u.error);if(u.offsets.has(r)){if(!u.pack){const h=l.replace(/idx$/,"pack");u.pack=e.read(h)}const d=await u.read({oid:r,getExternalRefDelta:i});return d.format="content",d.source=`objects/pack/${o.replace(/idx$/,"pack")}`,d}}return null}async function Wr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=d=>Wr({fs:e,cache:t,gitdir:n,oid:d});let s;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(s={format:"wrapped",object:Jt.from("tree 0\0")}),s||(s=await O5({fs:e,gitdir:n,oid:r})),!s){if(s=await oae({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!s)throw new Nr(r);return s}if(a==="deflated"||(s.format==="deflated"&&(s.object=Jt.from(await P5(s.object)),s.format="wrapped"),a==="wrapped"))return s;const o=await tc(s.object);if(o!==r)throw new In(`SHA check failed! Expected ${r}, computed ${o}`);const{object:l,type:u}=fp.unwrap(s.object);if(s.type=u,s.object=l,s.format="content",a==="content")return s;throw new In(`invalid requested format "${a}"`)}class fo extends sr{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=fo.code,this.data={noun:t,where:n,canForce:r}}}fo.code="AlreadyExistsError";class T0 extends sr{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=T0.code,this.data={nouns:t,short:n,matches:r}}}T0.code="AmbiguousError";class A0 extends sr{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=A0.code,this.data={filepaths:t}}}A0.code="CheckoutConflictError";class N0 extends sr{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=N0.code,this.data={ref:t,oid:n}}}N0.code="CommitNotFetchedError";class R0 extends sr{constructor(){super("Empty response from git server."),this.code=this.name=R0.code,this.data={}}}R0.code="EmptyServerResponseError";class I0 extends sr{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=I0.code,this.data={}}}I0.code="FastForwardError";class j0 extends sr{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=j0.code,this.data={prettyDetails:t,result:n}}}j0.code="GitPushError";class zh extends sr{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=zh.code,this.data={statusCode:t,statusMessage:n,response:r}}}zh.code="HttpError";class wu extends sr{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=wu.code,this.data={reason:t}}}wu.code="InvalidFilepathError";class io extends sr{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=io.code,this.data={ref:t,suggestion:n}}}io.code="InvalidRefNameError";class O0 extends sr{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=O0.code,this.data={depth:t}}}O0.code="MaxDepthError";class hp extends sr{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=hp.code,this.data={}}}hp.code="MergeNotSupportedError";class pp extends sr{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=pp.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}pp.code="MergeConflictError";class ci extends sr{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=ci.code,this.data={role:t}}}ci.code="MissingNameError";class Fi extends sr{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Fi.code,this.data={parameter:t}}}Fi.code="MissingParameterError";class D0 extends sr{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=D0.code,this.data={errors:t},this.errors=t}}D0.code="MultipleGitError";class sf extends sr{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=sf.code,this.data={expected:t,actual:n}}}sf.code="ParseError";class Uh extends sr{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=Uh.code,this.data={reason:t}}}Uh.code="PushRejectedError";class tu extends sr{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=tu.code,this.data={capability:t,parameter:n}}}tu.code="RemoteCapabilityError";class M0 extends sr{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=M0.code,this.data={preview:t,response:n}}}M0.code="SmartHttpError";class P0 extends sr{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=P0.code,this.data={url:t,transport:n,suggestion:r}}}P0.code="UnknownTransportError";class F0 extends sr{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=F0.code,this.data={url:t}}}F0.code="UrlParseError";class mp extends sr{constructor(){super("The operation was canceled."),this.code=this.name=mp.code,this.data={}}}mp.code="UserCanceledError";class L0 extends sr{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=L0.code,this.data={filepath:t}}}L0.code="IndexResetError";class $0 extends sr{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=$0.code,this.data={ref:t}}}$0.code="NoCommitError";var lae=Object.freeze({__proto__:null,AlreadyExistsError:fo,AmbiguousError:T0,CheckoutConflictError:A0,CommitNotFetchedError:N0,EmptyServerResponseError:R0,FastForwardError:I0,GitPushError:j0,HttpError:zh,InternalError:In,InvalidFilepathError:wu,InvalidOidError:vu,InvalidRefNameError:io,MaxDepthError:O0,MergeNotSupportedError:hp,MergeConflictError:pp,MissingNameError:ci,MissingParameterError:Fi,MultipleGitError:D0,NoRefspecError:k0,NotFoundError:Nr,ObjectTypeError:ki,ParseError:sf,PushRejectedError:Uh,RemoteCapabilityError:tu,SmartHttpError:M0,UnknownTransportError:P0,UnsafeFilepathError:up,UrlParseError:F0,UserCanceledError:mp,UnmergedPathsError:C0,IndexResetError:L0,NoCommitError:$0});function AC({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=cae(r),`${e} <${t}> ${n} ${r}`}function cae(e){const t=uae(dae(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function uae(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function dae(e){return e===0?e:-e}function Ll(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function xw(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:fae(a)}}function fae(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),hae(r)}function hae(e){return e===0?e:-e}class vi{constructor(t){if(typeof t=="string")this._tag=t;else if(Jt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=vi.render(t);else throw new In("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new vi(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${AC(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.tagger&&(r.tagger=xw(r.tagger)),r.committer&&(r.committer=xw(r.committer)),r}withoutSignature(){const t=Ll(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Ll(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Jt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=Ll(i);const s=a+i;return vi.from(s)}}function WE(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function pae(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Vr{constructor(t){if(typeof t=="string")this._commit=t;else if(Jt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Vr.render(t);else throw new In("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Vr.justHeaders(t),a=Vr.justMessage(t),i=Ll(r+`
gpgsig`+WE(n)+`
`+a);return new Vr(i)}static from(t){return new Vr(t)}toObject(){return Jt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Vr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return Ll(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Vr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.author&&(r.author=xw(r.author)),r.committer&&(r.committer=xw(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new In("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${AC(r)}
`;const a=t.committer||t.author;return n+=`committer ${AC(a)}
`,t.gpgsig&&(n+="gpgsig"+WE(t.gpgsig)),n}static render(t){return Vr.renderHeaders(t)+`
`+Ll(t.message)}render(){return this._commit}withoutSignature(){const t=Ll(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Ll(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return pae(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Vr.justMessage(t._commit);let{signature:s}=await n({payload:a,secretKey:r});s=Ll(s);const l=Vr.justHeaders(t._commit)+`
gpgsig`+WE(s)+`
`+i;return Vr.from(l)}}async function Hh({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Li.from([]),oid:r};const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=vi.from(i).parse().object,Hh({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Vr.from(i).parse().tree,Hh({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new ki(r,a,"tree");return{tree:Li.from(i),oid:r}}class mae{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const s=new Map;let o;try{o=await Ut.resolve({fs:t,gitdir:n,ref:r})}catch(u){u instanceof Nr&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await Hh({fs:t,cache:this.cache,gitdir:n,oid:o});return l.type="tree",l.mode="40000",s.set(".",l),s})();const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,s=await this.mapPromise,o=s.get(n);if(!o)throw new Error(`No obj for ${n}`);const l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:u,object:d}=await Wr({fs:r,cache:a,gitdir:i,oid:l});if(u!==o.type)throw new ki(l,u,o.type);const h=Li.from(d);for(const p of h)s.set(Mt.join(n,p.path),p);return h.entries().map(p=>Mt.join(n,p.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=N5(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,o=n.get(t._fullpath).oid,{type:l,object:u}=await Wr({fs:r,cache:a,gitdir:i,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(u)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function ks({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,Fx,{value:function({fs:n,gitdir:r,cache:a}){return new mae({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class gae{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Mt.join(a,n));return i===null?null:i.map(s=>Mt.join(n,s))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=Lh(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const s=await(await this._getGitConfig(n,a)).get("core.autocrlf"),o=await n.read(`${r}/${t._fullpath}`,{autocrlf:s});t._actualSize=o.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let s;await $a.acquire({fs:r,gitdir:a,cache:i},async function(o){const l=o.entriesMap.get(t._fullpath),u=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),p=typeof ta<"u"?ta.platform!=="win32":!0;if(!l||yw(u,l,h,p)){const y=await t.content();y===void 0?s=void 0:(s=await tc(fp.wrap({type:"blob",object:y})),l&&s===l.oid&&(!h||u.mode===l.mode)&&yw(u,l,h,p)&&o.insert({filepath:t._fullpath,stats:u,oid:s}))}else s=l.oid}),t._oid=s}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await ya.get({fs:t,gitdir:n}),this.config)}}function B0(){const e=Object.create(null);return Object.defineProperty(e,Fx,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new gae({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function yae(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const F5=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class bae{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*vae(e){const t=new bae;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let s=0;s<a;s++)r[s]!==void 0&&r[s]===n?(i[s]=r[s],r[s]=e[s].next().value):i[s]=null,r[s]!==void 0&&t.consider(r[s]);if(yield i,t.value===null)return}}async function xu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(l,u)=>u,reduce:s=async(l,u)=>{const d=F5(u);return l!==void 0&&d.unshift(l),d},iterate:o=(l,u)=>Promise.all([...u].map(l))}){const l=a.map(y=>y[Fx]({fs:e,dir:n,gitdir:r,cache:t})),u=new Array(l.length).fill("."),d=yae(0,l.length),h=async y=>{d.map(w=>{const x=y[w];y[w]=x&&new l[w].ConstructEntry(x)});const b=(await Promise.all(d.map(w=>{const x=y[w];return x?l[w].readdir(x):[]}))).map(w=>(w===null?[]:w)[Symbol.iterator]());return{entries:y,children:vae(b)}},p=async y=>{const{entries:v,children:b}=await h(y),w=v.find(S=>S&&S._fullpath)._fullpath,x=await i(w,v);if(x!==null){let S=await o(p,b);return S=S.filter(E=>E!==void 0),s(x,S)}};return p(u)}async function NC(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Mt.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?NC(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function wae(e){return xae(e)&&D4(e.then)&&D4(e.catch)}function xae(e){return e&&typeof e=="object"}function D4(e){return typeof e=="function"}function M4(e){return wae((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const P4=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function F4(e,t){if(M4(t))for(const n of P4)e[`_${n}`]=t[n].bind(t);else for(const n of P4)e[`_${n}`]=LE(t[n].bind(t));M4(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=NC.bind(null,e):t.rm?e._rm=LE(t.rm.bind(t)):t.rmdir.length>2?e._rm=LE(t.rmdir.bind(t)):e._rm=NC.bind(null,e)}class cn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?F4(this,t.promises):F4(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Jt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir($h(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=$h(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(Px),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Jt.isBuffer(r)?r:Jt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Qe(e,t){if(t===void 0)throw new Fi(e)}async function _w(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function _ae({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Qe("fs",e),Qe("dir",t),Qe("gitdir",n);const i=new cn(e),s=[ks({ref:r}),B0(),dp()];let o=[];await $a.acquire({fs:i,gitdir:n,cache:a},async function(u){o=u.unmergedPaths});const l=await xu({fs:i,cache:a,dir:t,gitdir:n,trees:s,map:async function(u,[d,h,p]){const y=!await _w(h,p),v=o.includes(u),b=!await _w(p,d);if(y||v)return d?{path:u,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(b)return!1;throw new L0(u)}});await $a.acquire({fs:i,gitdir:n,cache:a},async function(u){for(const d of l)if(d!==!1){if(!d){await i.rmdir(`${t}/${d.path}`,{recursive:!0}),u.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${t}/${d.path}`,h,{mode:d.mode}),u.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class gp{static async isIgnored({fs:t,dir:n,gitdir:r=Mt.join(n,".git"),filepath:a}){if(bw(a)===".git")return!0;if(a===".")return!1;let i="";const s=Mt.join(r,"info","exclude");await t.exists(s)&&(i=await t.read(s,"utf8"));const o=[{gitignore:Mt.join(n,".gitignore"),filepath:a}],l=a.split("/").filter(Boolean);for(let d=1;d<l.length;d++){const h=l.slice(0,d).join("/"),p=l.slice(d).join("/");o.push({gitignore:Mt.join(n,h,".gitignore"),filepath:p})}let u=!1;for(const d of o){let h;try{h=await t.read(d.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const p=vre().add(i);p.add(h);const y=$h(d.filepath);if(y!=="."&&p.ignores(y))return!0;u?u=!p.test(d.filepath).unignored:u=p.test(d.filepath).ignored}return u}}async function Sae({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,s=`${t}/${i}`;await e.exists(s)||await e.write(s,n)}let KE=null;async function L5(e){return KE===null&&(KE=Cae()),KE?Eae(e):kT.deflate(e)}async function Eae(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function Cae(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Bi({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:s=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=fp.wrap({type:n,object:r})),i=await tc(r),r=Jt.from(await L5(r))),s||await Sae({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function $5(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function kae({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:s=!0}){try{Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("filepath",r);const o=new cn(e);await $a.acquire({fs:o,gitdir:n,cache:a},async l=>{const d=await(await ya.get({fs:o,gitdir:n})).get("core.autocrlf");return RC({dir:t,gitdir:n,fs:o,filepath:r,index:l,force:i,parallel:s,autocrlf:d})})}catch(o){throw o.caller="git.add",o}}async function RC({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:s,autocrlf:o}){r=Array.isArray(r)?r:[r];const l=r.map(async p=>{if(!i&&await gp.isIgnored({fs:n,dir:e,gitdir:t,filepath:p}))return;const y=await n.lstat(Mt.join(e,p));if(!y)throw new Nr(p);if(y.isDirectory()){const v=await n.readdir(Mt.join(e,p));if(s){const b=v.map(w=>RC({dir:e,gitdir:t,fs:n,filepath:[Mt.join(p,w)],index:a,force:i,parallel:s,autocrlf:o}));await Promise.all(b)}else for(const b of v)await RC({dir:e,gitdir:t,fs:n,filepath:[Mt.join(p,b)],index:a,force:i,parallel:s,autocrlf:o})}else{const v=y.isSymbolicLink()?await n.readlink(Mt.join(e,p)).then($5):await n.read(Mt.join(e,p),{autocrlf:o});if(v===null)throw new Nr(p);const b=await Bi({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:p,stats:y,oid:b})}}),u=await Promise.allSettled(l),d=u.filter(p=>p.status==="rejected").map(p=>p.reason);if(d.length>1)throw new D0(d);if(d.length===1)throw d[0];return u.filter(p=>p.status==="fulfilled"&&p.value).map(p=>p.value)}async function Og({fs:e,gitdir:t,path:n}){return(await ya.get({fs:e,gitdir:t})).get(n)}function B5(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function _u({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await Og({fs:e,gitdir:t,path:"user.name"}),email:await Og({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},s=B5({},i,r?r.author:void 0,n);if(s.name!==void 0)return s}async function qh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),s={name:await Og({fs:e,gitdir:t,path:"user.name"}),email:await Og({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=B5({},s,a?a.committer:void 0,n,r);if(o.name!==void 0)return o}async function z5({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=vi.from(i).parse().object,z5({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new ki(r,a,"commit");return{commit:Vr.from(i),oid:r}}async function Vh({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await z5({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function Lx({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:p,tree:y}){let v=!1;h||(h=await Ut.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,w;try{b=await Ut.resolve({fs:e,gitdir:r,ref:h}),w=await Vh({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(l&&v)throw new $0(h);const x=l?await _u({fs:e,gitdir:r,author:i,commit:w.commit}):await _u({fs:e,gitdir:r,author:i});if(!x)throw new ci("author");const S=l?await qh({fs:e,gitdir:r,author:x,committer:s,commit:w.commit}):await qh({fs:e,gitdir:r,author:x,committer:s});if(!S)throw new ci("committer");return $a.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=I5(E.entries).get(".");if(y||(y=await U5({fs:e,gitdir:r,inode:k,dryRun:u})),p?p=await Promise.all(p.map(j=>Ut.resolve({fs:e,gitdir:r,ref:j}))):l?p=w.commit.parent:p=b?[b]:[],!a)if(l)a=w.commit.message;else throw new Fi("message");let I=Vr.from({tree:y,parent:p,author:x,committer:S,message:a});o&&(I=await Vr.sign(I,n,o));const R=await Bi({fs:e,gitdir:r,type:"commit",object:I.toObject(),dryRun:u});return!d&&!u&&await Ut.writeRef({fs:e,gitdir:r,ref:h,value:R}),R})}async function U5({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const l of a)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await U5({fs:e,gitdir:t,inode:l,dryRun:r}));const i=a.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),s=Li.from(i);return await Bi({fs:e,gitdir:t,type:"tree",object:s.toObject(),dryRun:r})}async function z0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new wu("leading-slash");if(a.endsWith("/"))throw new wu("trailing-slash");const i=r,s=await Hh({fs:e,cache:t,gitdir:n,oid:r}),o=s.tree;if(a==="")r=s.oid;else{const l=a.split("/");r=await H5({fs:e,cache:t,gitdir:n,tree:o,pathArray:l,oid:i,filepath:a})}return r}async function H5({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s}){const o=a.shift();for(const l of r)if(l.path===o){if(a.length===0)return l.oid;{const{type:u,object:d}=await Wr({fs:e,cache:t,gitdir:n,oid:l.oid});if(u!=="tree")throw new ki(i,u,"tree",s);return r=Li.from(d),H5({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s})}}throw new Nr(`file or directory found at "${i}:${s}"`)}async function yp({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await z0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:s}=await Hh({fs:e,cache:t,gitdir:n,oid:r});return{oid:s,tree:i.entries()}}async function U0({fs:e,gitdir:t,tree:n}){const r=Li.from(n).toObject();return await Bi({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function Tae({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:s,force:o,author:l,committer:u,signingKey:d}){let h;try{h=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof Nr))throw x}let y=(await yp({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)y=y.filter(x=>x.path!==i);else for(const x of y)if(x.path===i)throw new fo("note",i);typeof s=="string"&&(s=Jt.from(s,"utf8"));const v=await Bi({fs:e,gitdir:r,type:"blob",object:s,format:"content"});y.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await U0({fs:e,gitdir:r,tree:y});return await Lx({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:u,signingKey:d})}async function Aae({fs:e,onSign:t,dir:n,gitdir:r=Mt.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:s,force:o,author:l,committer:u,signingKey:d,cache:h={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("oid",i),Qe("note",s),d&&Qe("onSign",t);const p=new cn(e),y=await _u({fs:p,gitdir:r,author:l});if(!y)throw new ci("author");const v=await qh({fs:p,gitdir:r,author:y,committer:u});if(!v)throw new ci("committer");return await Tae({fs:new cn(p),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:s,force:o,author:y,committer:v,signingKey:d})}catch(p){throw p.caller="git.addNote",p}}async function q5({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==Uo.clean(n))throw new io(n,Uo.clean(n));const i=await ya.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new fo("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await ya.save({fs:e,gitdir:t,config:i})}async function Nae({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("remote",r),Qe("url",a),await q5({fs:new cn(e),gitdir:n,remote:r,url:a,force:i})}catch(s){throw s.caller="git.addRemote",s}}async function Rae({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!d&&await Ut.exists({fs:e,gitdir:r,ref:a}))throw new fo("tag",a);const h=await Ut.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:p}=await Wr({fs:e,cache:t,gitdir:r,oid:h});let y=vi.from({object:h,type:p,tag:a.replace("refs/tags/",""),tagger:i,message:s,gpgsig:o});u&&(y=await vi.sign(y,n,u));const v=await Bi({fs:e,gitdir:r,type:"tag",object:y.toObject()});await Ut.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function Iae({fs:e,onSign:t,dir:n,gitdir:r=Mt.join(n,".git"),ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1,cache:h={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("ref",a),u&&Qe("onSign",t);const p=new cn(e),y=await _u({fs:p,gitdir:r,author:i});if(!y)throw new ci("tagger");return await Rae({fs:p,cache:h,onSign:t,gitdir:r,ref:a,tagger:y,message:s,gpgsig:o,object:l,signingKey:u,force:d})}catch(p){throw p.caller="git.annotatedTag",p}}async function jae({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==Uo.clean(n))throw new io(n,Uo.clean(n));const s=`refs/heads/${n}`;if(!i&&await Ut.exists({fs:e,gitdir:t,ref:s}))throw new fo("branch",n,!1);let o;try{o=await Ut.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}o&&await Ut.writeRef({fs:e,gitdir:t,ref:s,value:o}),a&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function Oae({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,object:a,checkout:i=!1,force:s=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await jae({fs:new cn(e),gitdir:n,ref:r,object:a,checkout:i,force:s})}catch(o){throw o.caller="git.branch",o}}const V5=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function RT({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:s,ref:o,filepaths:l,noCheckout:u,noUpdateHead:d,dryRun:h,force:p,track:y=!0}){let v;if(r)try{v=await Ut.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await Ut.resolve({fs:e,gitdir:i,ref:o})}catch(w){if(o==="HEAD")throw w;const x=`${s}/${o}`;if(b=await Ut.resolve({fs:e,gitdir:i,ref:x}),y){const S=await ya.get({fs:e,gitdir:i});await S.set(`branch.${o}.remote`,s),await S.set(`branch.${o}.merge`,`refs/heads/${o}`),await ya.save({fs:e,gitdir:i,config:S})}await Ut.writeRef({fs:e,gitdir:i,ref:`refs/heads/${o}`,value:b})}if(!u){let w;try{w=await Dae({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:o,force:p,filepaths:l})}catch(k){throw k instanceof Nr&&k.data.what===b?new N0(o,b):k}const x=w.filter(([k])=>k==="conflict").map(([k,I])=>I);if(x.length>0)throw new A0(x);const S=w.filter(([k])=>k==="error").map(([k,I])=>I);if(S.length>0)throw new In(S.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let E=0;const C=w.length;await $a.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(w.filter(([I])=>I==="delete"||I==="delete-index").map(async function([I,R]){const j=`${a}/${R}`;I==="delete"&&await e.rm(j),k.delete({filepath:R}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await $a.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[I,R]of w)if(I==="rmdir"||I==="rmdir-index"){const j=`${a}/${R}`;try{I==="rmdir-index"&&k.delete({filepath:R}),await e.rmdir(j),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(L){if(L.code==="ENOTEMPTY")console.log(`Did not delete ${R} because directory is not empty`);else throw L}}}),await Promise.all(w.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,I]){const R=`${a}/${I}`;await e.mkdir(R),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await $a.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(w.filter(([I])=>I==="create"||I==="create-index"||I==="update"||I==="mkdir-index").map(async function([I,R,j,L,B]){const Z=`${a}/${R}`;try{if(I!=="create-index"&&I!=="mkdir-index"){const{object:K}=await Wr({fs:e,cache:t,gitdir:i,oid:j});if(B&&await e.rm(Z),L===33188)await e.write(Z,K);else if(L===33261)await e.write(Z,K,{mode:511});else if(L===40960)await e.writelink(Z,K);else throw new In(`Invalid mode 0o${L.toString(8)} detected in blob ${j}`)}const P=await e.lstat(Z);L===33261&&(P.mode=493),I==="mkdir-index"&&(P.mode=57344),k.insert({filepath:R,stats:P,oid:j}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(P){console.log(P)}}))}),r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!d){const w=await Ut.expand({fs:e,gitdir:i,ref:o});w.startsWith("refs/heads")?await Ut.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:w}):await Ut.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function Dae({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:s,filepaths:o}){let l=0;return xu({fs:e,cache:t,dir:r,gitdir:a,trees:[ks({ref:i}),B0(),dp()],map:async function(u,[d,h,p]){if(u===".")return;if(o&&!o.some(v=>V5(u,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!p,!!d,!!h].map(Number).join("")){case"000":return;case"001":return s&&o&&o.includes(u)?["delete",u]:void 0;case"010":switch(await d.type()){case"tree":return["mkdir",u];case"blob":return["create",u,await d.oid(),await d.mode()];case"commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`new entry Unhandled type ${await d.type()}`]}case"011":switch(`${await d.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",u];case"blob-blob":return await d.oid()!==await h.oid()?s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]:await d.mode()!==await h.mode()?s?["update",u,await d.oid(),await d.mode(),!0]:["conflict",u]:["create-index",u,await d.oid(),await d.mode()];case"commit-tree":return;case"commit-blob":return["conflict",u];default:return["error",`new entry Unhandled type ${d.type}`]}case"100":return["delete-index",u];case"101":switch(await p.type()){case"tree":return["rmdir",u];case"blob":return await p.oid()!==await h.oid()?s?["delete",u]:["conflict",u]:["delete",u];case"commit":return["rmdir-index",u];default:return["error",`delete entry Unhandled type ${await p.type()}`]}case"110":case"111":switch(`${await p.type()}-${await d.type()}`){case"tree-tree":return;case"blob-blob":{if(await p.oid()===await d.oid()&&await p.mode()===await d.mode()&&!s)return;if(h){if(await h.oid()!==await p.oid()&&await h.oid()!==await d.oid())return s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]}else if(s)return["update",u,await d.oid(),await d.mode(),await d.mode()!==await p.mode()];return await d.mode()!==await p.mode()?["update",u,await d.oid(),await d.mode(),!0]:await d.oid()!==await p.oid()?["update",u,await d.oid(),await d.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",u,await d.oid()];case"blob-tree":return["update-blob-to-tree",u];case"commit-commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`update entry Unhandled type ${await p.type()}-${await d.type()}`]}}},reduce:async function(u,d){return d=F5(d),u?u&&u[0]==="rmdir"?(d.push(u),d):(d.unshift(u),d):d}})}async function G5({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Mt.join(r,".git"),remote:i="origin",ref:s,filepaths:o,noCheckout:l=!1,noUpdateHead:u=s===void 0,dryRun:d=!1,force:h=!1,track:p=!0,cache:y={}}){try{Qe("fs",e),Qe("dir",r),Qe("gitdir",a);const v=s||"HEAD";return await RT({fs:new cn(e),cache:y,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:o,noCheckout:l,noUpdateHead:u,dryRun:d,force:h,track:p})}catch(v){throw v.caller="git.checkout",v}}const Mae=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Sd(e){const t=Mae.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function Ou({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Ut.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Ut.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:Sd(a)}function Pae(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function W5({username:e="",password:t=""}){return`Basic ${Jt.from(`${e}:${t}`).toString("base64")}`}async function H0(e,t){const n=D5(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Sw(e){let t=0;const n=[];await H0(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function L4(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function IC(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class oa{static flush(){return Jt.from("0000","utf8")}static delim(){return Jt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Jt.from(t));const n=t.length+4,r=IC(4,n);return Jt.concat([Jt.from(r,"utf8"),t])}static streamReader(t){const n=new M5(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function $4(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function B4(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=oa.streamReader(e);let s=await i();for(;s===null;)s=await i();if(s===!0)throw new R0;if(s.includes("version 2"))return $4(i);if(s.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new sf(`# service=${t}\\n`,s.toString("utf8"));let o=await i();for(;o===null;)o=await i();if(o===!0)return{capabilities:n,refs:r,symrefs:a};if(o=o.toString("utf8"),o.includes("version 2"))return $4(i);const[l,u]=ZE(o,"\0","\\x00");if(u.split(" ").map(d=>n.add(d)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[d,h]=ZE(l," "," ");for(r.set(h,d);;){const p=await i();if(p===!0)break;if(p!==null){const[y,v]=ZE(p.toString("utf8")," "," ");r.set(v,y)}}}for(const d of n)if(d.startsWith("symref=")){const h=d.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function ZE(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new sf(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const z4=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,U4=(e,t)=>{(t.username||t.password)&&(e.Authorization=W5(t)),t.headers&&Object.assign(e,t.headers)},YE=async e=>{try{const t=Jt.from(await Sw(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Ew{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:s,service:o,url:l,headers:u,protocolVersion:d}){let{url:h,auth:p}=L4(l);const y=s?z4(s,h):h;(p.username||p.password)&&(u.Authorization=W5(p)),d===2&&(u["Git-Protocol"]="version=2");let v,b,w=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${y}/info/refs?service=${o}`,headers:u}),b=!1,v.statusCode===401||v.statusCode===203){const x=w?i:r;if(x){if(p=await x(h,{...p,headers:{...u}}),p&&p.cancel)throw new mp;p&&(U4(u,p),w=!0,b=!0)}}else v.statusCode===200&&w&&a&&await a(h,p);while(b);if(v.statusCode!==200){const{response:x}=await YE(v);throw new zh(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${o}-advertisement`){const x=await B4(v.body,{service:o});return x.auth=p,x}else{const{preview:x,response:S,data:E}=await YE(v);try{const C=await B4([E],{service:o});return C.auth=p,C}catch{throw new M0(x,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:s,body:o,headers:l}){const u=L4(i);u&&(i=u.url),r&&(i=z4(r,i)),l["content-type"]=`application/x-${a}-request`,l.accept=`application/x-${a}-result`,U4(l,s);const d=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:o,headers:l});if(d.statusCode!==200){const{response:h}=YE(d);throw new zh(d.statusCode,d.statusMessage,h)}return d}}function Fae({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class $x{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Ew),n.set("https",Ew);const r=Fae({url:t});if(!r)throw new F0(t);if(n.has(r.transport))return n.get(r.transport);throw new P0(t,r.transport,r.transport==="ssh"?Pae(t):void 0)}}let gd=null;class Dg{static async read({fs:t,gitdir:n}){gd===null&&(gd=new jg);const r=Mt.join(n,"shallow"),a=new Set;return await gd.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(s=>a.add(s))}),a}static async write({fs:t,gitdir:n,oids:r}){gd===null&&(gd=new jg);const a=Mt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await gd.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await gd.acquire(a,async function(){await t.rm(a)})}}async function Lae({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function $ae({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Mt.join(n,"objects/pack"));i=i.filter(s=>s.endsWith(".idx"));for(const s of i){const o=`${n}/objects/pack/${s}`,l=await NT({fs:e,cache:t,filename:o,getExternalRefDelta:a});if(l.error)throw new In(l.error);if(l.offsets.has(r))return!0}return!1}async function H4({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=o=>Wr({fs:e,cache:t,gitdir:n,oid:o});let s=await Lae({fs:e,gitdir:n,oid:r});return s||(s=await $ae({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),s}function Bae(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function K5(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const Bx={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Ev{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function zae(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function Z5(e){const t=new Ev;let n="";return(async()=>(await H0(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=zae(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class Y5{static demux(t){const n=oa.streamReader(t),r=new Ev,a=new Ev,i=new Ev,s=async function(){const o=await n();if(o===null)return s();if(o===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(o[0]){case 1:{a.write(o.slice(1));break}case 2:{i.write(o.slice(1));break}case 3:{const l=o.slice(1);i.write(l),r.end(),i.end(),a.destroy(new Error(l.toString("utf8")));return}default:r.write(o)}s()};return s(),{packetlines:r,packfile:a,progress:i}}}async function Uae(e){const{packetlines:t,packfile:n,progress:r}=Y5.demux(e),a=[],i=[],s=[];let o=!1,l=!1;return new Promise((u,d)=>{H0(t,h=>{const p=h.toString("utf8").trim();if(p.startsWith("shallow")){const y=p.slice(-41).trim();y.length!==40&&d(new vu(y)),a.push(y)}else if(p.startsWith("unshallow")){const y=p.slice(-41).trim();y.length!==40&&d(new vu(y)),i.push(y)}else if(p.startsWith("ACK")){const[,y,v]=p.split(" ");s.push({oid:y,status:v}),v||(l=!0)}else p.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))}).finally(()=>{l||(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))})})}function Hae({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:s=[]}){const o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const u of t)o.push(oa.encode(`want ${u}${l}
`)),l="";for(const u of r)o.push(oa.encode(`shallow ${u}
`));a!==null&&o.push(oa.encode(`deepen ${a}
`)),i!==null&&o.push(oa.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const u of s)o.push(oa.encode(`deepen-not ${u}
`));o.push(oa.flush());for(const u of n)o.push(oa.encode(`have ${u}
`));return o.push(oa.encode(`done
`)),o}async function IT({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:u,remoteRef:d,remote:h,url:p,corsProxy:y,depth:v=null,since:b=null,exclude:w=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:I=!1}){const R=u||await Ou({fs:e,gitdir:l,test:!0}),j=await ya.get({fs:e,gitdir:l}),L=h||R&&await j.get(`branch.${R}.remote`)||"origin",B=p||await j.get(`remote.${L}.url`);if(typeof B>"u")throw new Fi("remote OR url");const Z=d||R&&await j.get(`branch.${R}.merge`)||u||"HEAD";y===void 0&&(y=await j.get("http.corsProxy"));const P=$x.getRemoteHelperFor({url:B}),K=await P.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:y,service:"git-upload-pack",url:B,headers:C,protocolVersion:1}),q=K.auth,de=K.refs;if(de.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!K.capabilities.has("shallow"))throw new tu("shallow","depth");if(b!==null&&!K.capabilities.has("deepen-since"))throw new tu("deepen-since","since");if(w.length>0&&!K.capabilities.has("deepen-not"))throw new tu("deepen-not","exclude");if(x===!0&&!K.capabilities.has("deepen-relative"))throw new tu("deepen-relative","relative");const{oid:ae,fullref:te}=Ut.resolveAgainstMap({ref:Z,map:de});for(const Le of de.keys())Le===te||Le==="HEAD"||Le.startsWith("refs/heads/")||S&&Le.startsWith("refs/tags/")||de.delete(Le);const X=K5([...K.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Bx.agent}`]);x&&X.push("deepen-relative");const re=E?[ae]:de.values(),D=E?[R]:await Ut.listRefs({fs:e,gitdir:l,filepath:"refs"});let J=[];for(let Le of D)try{Le=await Ut.expand({fs:e,gitdir:l,ref:Le});const Ie=await Ut.resolve({fs:e,gitdir:l,ref:Le});await H4({fs:e,cache:t,gitdir:l,oid:Ie})&&J.push(Ie)}catch{}J=[...new Set(J)];const Q=await Dg.read({fs:e,gitdir:l}),ie=K.capabilities.has("shallow")?[...Q]:[],me=Hae({capabilities:X,wants:re,haves:J,shallows:ie,depth:v,since:b,exclude:w}),ve=Jt.from(await Sw(me)),Me=await P.connect({http:n,onProgress:r,corsProxy:y,service:"git-upload-pack",url:B,auth:q,body:[ve],headers:C}),Ae=await Uae(Me.body);Me.headers&&(Ae.headers=Me.headers);for(const Le of Ae.shallows)if(!Q.has(Le))try{const{object:Ie}=await Wr({fs:e,cache:t,gitdir:l,oid:Le}),z=new Vr(Ie),Se=await Promise.all(z.headers().parent.map(ue=>H4({fs:e,cache:t,gitdir:l,oid:ue})));Se.length===0||Se.every(ue=>ue)||Q.add(Le)}catch{Q.add(Le)}for(const Le of Ae.unshallows)Q.delete(Le);if(await Dg.write({fs:e,gitdir:l,oids:Q}),E){const Le=new Map([[te,ae]]),Ie=new Map;let z=10,Se=te;for(;z--;){const oe=K.symrefs.get(Se);if(oe===void 0)break;Ie.set(Se,oe),Se=oe}const Te=de.get(Se);Te&&Le.set(Se,Te);const{pruned:ue}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:L,refs:Le,symrefs:Ie,tags:S,prune:k});k&&(Ae.pruned=ue)}else{const{pruned:Le}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:L,refs:de,symrefs:K.symrefs,tags:S,prune:k,pruneTags:I});k&&(Ae.pruned=Le)}if(Ae.HEAD=K.symrefs.get("HEAD"),Ae.HEAD===void 0){const{oid:Le}=Ut.resolveAgainstMap({ref:"HEAD",map:de});for(const[Ie,z]of de.entries())if(Ie!=="HEAD"&&z===Le){Ae.HEAD=Ie;break}}const Re=te.startsWith("refs/tags")?"tag":"branch";if(Ae.FETCH_HEAD={oid:ae,description:`${Re} '${Sd(te)}' of ${B}`},r||a){const Le=Z5(Ae.progress);H0(Le,async Ie=>{if(a&&await a(Ie),r){const z=Ie.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);z&&await r({phase:z[1].trim(),loaded:parseInt(z[2],10),total:parseInt(z[3],10)})}})}const ke=Jt.from(await Sw(Ae.packfile));if(Me.body.error)throw Me.body.error;const Fe=ke.slice(-20).toString("hex"),et={defaultBranch:Ae.HEAD,fetchHead:Ae.FETCH_HEAD.oid,fetchHeadDescription:Ae.FETCH_HEAD.description};if(Ae.headers&&(et.headers=Ae.headers),k&&(et.pruned=Ae.pruned),Fe!==""&&!Bae(ke)){et.packfile=`objects/pack/pack-${Fe}.pack`;const Le=Mt.join(l,et.packfile);await e.write(Le,ke);const Ie=Se=>Wr({fs:e,cache:t,gitdir:l,oid:Se}),z=await Bh.fromPack({pack:ke,getExternalRefDelta:Ie,onProgress:r});await e.write(Le.replace(/\.pack$/,".idx"),await z.toBuffer())}return et}async function X5({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Mt.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(s=>r+"/"+s);for(const s of i)await e.mkdir(s);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function qae({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:l,dir:u,gitdir:d,url:h,corsProxy:p,ref:y,remote:v,depth:b,since:w,exclude:x,relative:S,singleBranch:E,noCheckout:C,noTags:k,headers:I}){try{if(await X5({fs:e,gitdir:d}),await q5({fs:e,gitdir:d,remote:v,url:h,force:!1}),p){const L=await ya.get({fs:e,gitdir:d});await L.set("http.corsProxy",p),await ya.save({fs:e,gitdir:d,config:L})}const{defaultBranch:R,fetchHead:j}=await IT({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:d,ref:y,remote:v,corsProxy:p,depth:b,since:w,exclude:x,relative:S,singleBranch:E,headers:I,tags:!k});if(j===null)return;y=y||R,y=y.replace("refs/heads/",""),await RT({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:u,gitdir:d,ref:y,remote:v,noCheckout:C})}catch(R){throw await e.rmdir(d,{recursive:!0,maxRetries:10}).catch(()=>{}),R}}async function Vae({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u=Mt.join(l,".git"),url:d,corsProxy:h=void 0,ref:p=void 0,remote:y="origin",depth:v=void 0,since:b=void 0,exclude:w=[],relative:x=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:k={},cache:I={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",u),E||Qe("dir",l),Qe("url",d),await qae({fs:new cn(e),cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u,url:d,corsProxy:h,ref:p,remote:y,depth:v,since:b,exclude:w,relative:x,singleBranch:S,noCheckout:E,noTags:C,headers:k})}catch(R){throw R.caller="git.clone",R}}async function Gae({fs:e,onSign:t,dir:n,gitdir:r=Mt.join(n,".git"),message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:p,tree:y,cache:v={}}){try{Qe("fs",e),l||Qe("message",a),o&&Qe("onSign",t);const b=new cn(e);return await Lx({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l,dryRun:u,noUpdateBranch:d,ref:h,parent:p,tree:y})}catch(b){throw b.caller="git.commit",b}}async function Wae({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Qe("fs",e),Qe("gitdir",n),await Ou({fs:new cn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Kae({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Ut.exists({fs:e,gitdir:t,ref:n}))throw new Nr(n);const a=await Ut.expand({fs:e,gitdir:t,ref:n}),i=await Ou({fs:e,gitdir:t,fullname:!0});if(a===i){const l=await Ut.resolve({fs:e,gitdir:t,ref:a});await Ut.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await Ut.deleteRef({fs:e,gitdir:t,ref:a});const s=Sd(n),o=await ya.get({fs:e,gitdir:t});await o.deleteSection("branch",s),await ya.save({fs:e,gitdir:t,config:o})}async function Zae({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("ref",r),await Kae({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Yae({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r}){try{Qe("fs",e),Qe("ref",r),await Ut.deleteRef({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Xae({fs:e,gitdir:t,remote:n}){const r=await ya.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await ya.save({fs:e,gitdir:t,config:r})}async function Jae({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),remote:r}){try{return Qe("fs",e),Qe("remote",r),await Xae({fs:new cn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Qae({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Ut.deleteRef({fs:e,gitdir:t,ref:n})}async function eie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("ref",r),await Qae({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function tie({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function nie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let s=await e.readdir(Mt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await NT({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(u.error)throw new In(u.error);for(const d of u.offsets.keys())d.startsWith(r)&&i.push(d)}return i}async function rie({fs:e,cache:t,gitdir:n,oid:r}){const a=o=>Wr({fs:e,cache:t,gitdir:n,oid:o}),i=await tie({fs:e,gitdir:n,oid:r}),s=await nie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const o of s)i.indexOf(o)===-1&&i.push(o);if(i.length===1)return i[0];throw i.length>1?new T0("oids",r,i):new Nr(`an object matching "${r}"`)}async function aie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await rie({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function iie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Ut.expand({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function jT({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let s=r.map((o,l)=>({index:l,oid:o}));for(;s.length;){const o=new Set;for(const{oid:u,index:d}of s)a[u]||(a[u]=new Set),a[u].add(d),a[u].size===i&&o.add(u);if(o.size>0)return[...o];const l=new Map;for(const{oid:u,index:d}of s)try{const{object:h}=await Wr({fs:e,cache:t,gitdir:n,oid:u}),p=Vr.from(h),{parent:y}=p.parseHeaders();for(const v of y)(!a[v]||!a[v].has(d))&&l.set(v+":"+d,{oid:v,index:d})}catch{}s=Array.from(l.values())}return[]}const XE=/^.*(\r?\n|$)/gm;function sie({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],s=t[2],o=i.match(XE),l=a.match(XE),u=s.match(XE),d=Cre(o,l,u),h=7;let p="",y=!0;for(const v of d)v.ok&&(p+=v.ok.join("")),v.conflict&&(y=!1,p+=`${"<".repeat(h)} ${n}
`,p+=v.conflict.a.join(""),p+=`${"=".repeat(h)}
`,p+=v.conflict.b.join(""),p+=`${">".repeat(h)} ${r}
`);return{cleanMerge:y,mergedText:p}}async function oie({fs:e,cache:t,dir:n,gitdir:r=Mt.join(n,".git"),index:a,ourOid:i,baseOid:s,theirOid:o,ourName:l="ours",baseName:u="base",theirName:d="theirs",dryRun:h=!1,abortOnConflict:p=!0,mergeDriver:y}){const v=ks({ref:i}),b=ks({ref:s}),w=ks({ref:o}),x=[],S=[],E=[],C=[],k=await xu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,w],map:async function(I,[R,j,L]){const B=bw(I),Z=await _w(R,j),P=await _w(L,j);switch(`${Z}-${P}`){case"false-false":return{mode:await j.mode(),path:B,oid:await j.oid(),type:await j.type()};case"false-true":return L?{mode:await L.mode(),path:B,oid:await L.oid(),type:await L.type()}:void 0;case"true-false":return R?{mode:await R.mode(),path:B,oid:await R.oid(),type:await R.type()}:void 0;case"true-true":{if(R&&j&&L&&await R.type()==="blob"&&await j.type()==="blob"&&await L.type()==="blob")return lie({fs:e,gitdir:r,path:B,ours:R,base:j,theirs:L,ourName:l,baseName:u,theirName:d,mergeDriver:y}).then(async K=>{if(K.cleanMerge)p||a.insert({filepath:I,oid:K.mergeResult.oid,stage:0});else if(x.push(I),S.push(I),!p){const q=await j.oid(),de=await R.oid(),ae=await L.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:q,stage:1}),a.insert({filepath:I,oid:de,stage:2}),a.insert({filepath:I,oid:ae,stage:3})}return K.mergeResult});if(j&&!R&&L&&await j.type()==="blob"&&await L.type()==="blob"){if(x.push(I),E.push(I),!p){const K=await j.oid(),q=await L.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:K,stage:1}),a.insert({filepath:I,oid:q,stage:3})}return{mode:await L.mode(),oid:await L.oid(),type:"blob",path:B}}if(j&&R&&!L&&await j.type()==="blob"&&await R.type()==="blob"){if(x.push(I),C.push(I),!p){const K=await j.oid(),q=await R.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:K,stage:1}),a.insert({filepath:I,oid:q,stage:2})}return{mode:await R.mode(),oid:await R.oid(),type:"blob",path:B}}if(j&&!R&&!L&&await j.type()==="blob")return;throw new hp}}},reduce:x.length!==0&&(!n||p)?void 0:async(I,R)=>{const j=R.filter(Boolean);if(I&&!(I&&I.type==="tree"&&j.length===0)){if(j.length>0){const B=new Li(j).toObject(),Z=await Bi({fs:e,gitdir:r,type:"tree",object:B,dryRun:h});I.oid=Z}return I}}});return x.length!==0?(n&&!p&&await xu({fs:e,cache:t,dir:n,gitdir:r,trees:[ks({ref:k.oid})],map:async function(I,[R]){const j=`${n}/${I}`;if(await R.type()==="blob"){const L=await R.mode(),B=new TextDecoder().decode(await R.content());await e.write(j,B,{mode:L})}return!0}}),new pp(x,S,E,C)):k.oid}async function lie({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:s,theirName:o,baseName:l,dryRun:u,mergeDriver:d=sie}){const h="blob",p=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};const y=Jt.from(await r.content()).toString("utf8"),v=Jt.from(await a.content()).toString("utf8"),b=Jt.from(await i.content()).toString("utf8"),{mergedText:w,cleanMerge:x}=await d({branches:[l,s,o],contents:[v,y,b],path:n}),S=await Bi({fs:e,gitdir:t,type:"blob",object:Jt.from(w,"utf8"),dryRun:u});return{cleanMerge:x,mergeResult:{mode:p,path:n,oid:S,type:h}}}async function J5({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:p,committer:y,signingKey:v,onSign:b,mergeDriver:w}){a===void 0&&(a=await Ou({fs:e,gitdir:r,fullname:!0})),a=await Ut.expand({fs:e,gitdir:r,ref:a}),i=await Ut.expand({fs:e,gitdir:r,ref:i});const x=await Ut.resolve({fs:e,gitdir:r,ref:a}),S=await Ut.resolve({fs:e,gitdir:r,ref:i}),E=await jT({fs:e,cache:t,gitdir:r,oids:[x,S]});if(E.length!==1)throw new hp;const C=E[0];if(C===S)return{oid:x,alreadyMerged:!0};if(s&&C===x)return!l&&!u&&await Ut.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(o)throw new I0;const k=await $a.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async R=>oie({fs:e,cache:t,dir:n,gitdir:r,index:R,ourOid:x,theirOid:S,baseOid:C,ourName:Sd(a),baseName:"base",theirName:Sd(i),dryRun:l,abortOnConflict:d,mergeDriver:w}));if(k instanceof pp)throw k;return h||(h=`Merge branch '${Sd(i)}' into ${Sd(a)}`),{oid:await Lx({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[x,S],author:p,committer:y,signingKey:v,onSign:b,dryRun:l,noUpdateBranch:u}),tree:k,mergeCommit:!0}}}async function Q5({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:u,ref:d,url:h,remote:p,remoteRef:y,prune:v,pruneTags:b,fastForward:w,fastForwardOnly:x,corsProxy:S,singleBranch:E,headers:C,author:k,committer:I,signingKey:R}){try{if(!d){const B=await Ou({fs:e,gitdir:u});if(!B)throw new Fi("ref");d=B}const{fetchHead:j,fetchHeadDescription:L}=await IT({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:u,corsProxy:S,ref:d,url:h,remote:p,remoteRef:y,singleBranch:E,headers:C,prune:v,pruneTags:b});await J5({fs:e,cache:t,gitdir:u,ours:d,theirs:j,fastForward:w,fastForwardOnly:x,message:`Merge ${L}`,author:k,committer:I,signingKey:R,dryRun:!1,noUpdateBranch:!1}),await RT({fs:e,cache:t,onProgress:r,dir:l,gitdir:u,ref:d,remote:p,noCheckout:!1})}catch(j){throw j.caller="git.pull",j}}async function cie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Mt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:p,corsProxy:y,singleBranch:v,headers:b={},cache:w={}}){try{Qe("fs",e),Qe("http",t),Qe("gitdir",l);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await Q5({fs:new cn(e),cache:w,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:p,fastForwardOnly:!0,corsProxy:y,singleBranch:v,headers:b,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function uie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Mt.join(o,".git"),ref:u,remote:d,remoteRef:h,url:p,corsProxy:y,depth:v=null,since:b=null,exclude:w=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:I=!1,cache:R={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",l),await IT({fs:new cn(e),cache:R,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,gitdir:l,ref:u,remote:d,remoteRef:h,url:p,corsProxy:y,depth:v,since:b,exclude:w,relative:x,tags:S,singleBranch:E,headers:C,prune:k,pruneTags:I})}catch(j){throw j.caller="git.fetch",j}}async function die({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oids:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oids",r),await jT({fs:new cn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function eF({fs:e,filepath:t}){if(await e.exists(Mt.join(t,".git")))return t;{const n=$h(t);if(n===t)throw new Nr(`git root for ${t}`);return eF({fs:e,filepath:n})}}async function fie({fs:e,filepath:t}){try{return Qe("fs",e),Qe("filepath",t),await eF({fs:new cn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function hie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),path:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("path",r),await Og({fs:new cn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function pie({fs:e,gitdir:t,path:n}){return(await ya.get({fs:e,gitdir:t})).getall(n)}async function mie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),path:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("path",r),await pie({fs:new cn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function gie({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1}){try{Qe("http",e),Qe("url",i);const u=await $x.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:1}),d={capabilities:[...u.capabilities]};for(const[h,p]of u.refs){const y=h.split("/"),v=y.pop();let b=d;for(const w of y)b[w]=b[w]||{},b=b[w];b[v]=p}for(const[h,p]of u.symrefs){const y=h.split("/"),v=y.pop();let b=d;for(const w of y)b[w]=b[w]||{},b=b[w];b[v]=p}return d}catch(l){throw l.caller="git.getRemoteInfo",l}}function tF(e,t,n,r){const a=[];for(const[i,s]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),u=a[a.length-1],d=u.ref===l?u:a.find(h=>h.ref===l);if(d===void 0)throw new Error("I did not expect this to happen");d.peeled=s}continue}const o={ref:i,oid:s};n&&e.symrefs.has(i)&&(o.target=e.symrefs.get(i)),a.push(o)}return a}async function yie({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2}){try{Qe("http",e),Qe("url",i);const d=await $x.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(d.protocolVersion===2)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const p of d.capabilities){const[y,v]=p.split("=");v?h[y]=v:h[y]=!0}return{protocolVersion:1,capabilities:h,refs:tF(d,void 0,!0,!0)}}catch(u){throw u.caller="git.getRemoteInfo2",u}}async function bie({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=fp.wrap({type:e,object:t})),r=await tc(t)),{oid:r,object:t}}async function vie({object:e}){try{Qe("object",e),typeof e=="string"?e=Jt.from(e,"utf8"):e=Jt.from(e);const t="blob",{oid:n,object:r}=await bie({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function wie({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Mt.join(r,i);const s=await e.read(i),o=u=>Wr({fs:e,cache:t,gitdir:a,oid:u}),l=await Bh.fromPack({pack:s,getExternalRefDelta:o,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(s){throw s.caller="git.indexPack",s}}async function xie({fs:e,onProgress:t,dir:n,gitdir:r=Mt.join(n,".git"),filepath:a,cache:i={}}){try{return Qe("fs",e),Qe("dir",n),Qe("gitdir",n),Qe("filepath",a),await wie({fs:new cn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(s){throw s.caller="git.indexPack",s}}async function _ie({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Mt.join(n,".git"),defaultBranch:a="master"}){try{return Qe("fs",e),Qe("gitdir",r),t||Qe("dir",n),await X5({fs:new cn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function nF({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const s=await Dg.read({fs:e,gitdir:n});if(!r)throw new Fi("oid");if(!a)throw new Fi("ancestor");if(r===a)return!1;const o=[r],l=new Set;let u=0;for(;o.length;){if(u++===i)throw new O0(i);const d=o.shift(),{type:h,object:p}=await Wr({fs:e,cache:t,gitdir:n,oid:d});if(h!=="commit")throw new ki(d,h,"commit");const y=Vr.from(p).parse();for(const v of y.parent)if(v===a)return!0;if(!s.has(d))for(const v of y.parent)l.has(v)||(o.push(v),l.add(v))}return!1}async function Sie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:s={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),Qe("ancestor",a),await nF({fs:new cn(e),cache:s,gitdir:n,oid:r,ancestor:a,depth:i})}catch(o){throw o.caller="git.isDescendent",o}}async function Eie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r}){try{return Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("filepath",r),gp.isIgnored({fs:new cn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function Cie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),remote:r}){try{return Qe("fs",e),Qe("gitdir",n),Ut.listBranches({fs:new cn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function kie({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Ut.resolve({gitdir:t,fs:e,ref:n}),i=[];return await rF({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return $a.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function rF({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:s}=await yp({fs:e,cache:t,gitdir:n,oid:r});for(const o of s)o.type==="tree"?await rF({fs:e,cache:t,gitdir:n,oid:o.oid,filenames:a,prefix:Mt.join(i,o.path)}):a.push(Mt.join(i,o.path))}async function Tie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),await kie({fs:new cn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function Aie({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Ut.resolve({gitdir:n,fs:e,ref:r})}catch(o){if(o instanceof Nr)return[]}return(await yp({fs:e,cache:t,gitdir:n,oid:a})).tree.map(o=>({target:o.path,note:o.oid}))}async function Nie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Aie({fs:new cn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function Rie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r}){try{return Qe("fs",e),Qe("gitdir",n),Ut.listRefs({fs:new cn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function Iie({fs:e,gitdir:t}){const n=await ya.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const s=await n.get(`remote.${i}.url`);return{remote:i,url:s}}))}async function jie({fs:e,dir:t,gitdir:n=Mt.join(t,".git")}){try{return Qe("fs",e),Qe("gitdir",n),await Iie({fs:new cn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Oie(e){const t=oa.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...s]=r.split(" "),o={ref:i,oid:a};for(const l of s){const[u,d]=l.split(":");u==="symref-target"?o.target=d:u==="peeled"&&(o.peeled=d)}n.push(o)}return n}async function Die({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(oa.encode(`command=ls-refs
`)),r.push(oa.encode(`agent=${Bx.agent}
`)),(n||t||e)&&r.push(oa.delim()),n&&r.push(oa.encode("peel")),t&&r.push(oa.encode("symrefs")),e&&r.push(oa.encode(`ref-prefix ${e}`)),r.push(oa.flush()),r}async function Mie({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2,prefix:u,symrefs:d,peelTags:h}){try{Qe("http",e),Qe("url",i);const p=await Ew.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(p.protocolVersion===1)return tF(p,u,d,h);const y=await Die({prefix:u,symrefs:d,peelTags:h}),v=await Ew.connect({http:e,auth:p.auth,headers:s,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,body:y});return Oie(v.body)}catch(p){throw p.caller="git.listServerRefs",p}}async function Pie({fs:e,dir:t,gitdir:n=Mt.join(t,".git")}){try{return Qe("fs",e),Qe("gitdir",n),Ut.listTags({fs:new cn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Fie(e,t){return e.committer.timestamp-t.committer.timestamp}const Lie="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function q4({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===Lie)return;const i=r;let s;const o=await Hh({fs:e,cache:t,gitdir:n,oid:r}),l=o.tree;return a===o.oid?s=o.path:(s=await aF({fs:e,cache:t,gitdir:n,tree:l,fileId:a,oid:i}),Array.isArray(s)&&(s.length===0?s=void 0:s.length===1&&(s=s[0]))),s}async function aF({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:s=[],parentPath:o=""}){const l=r.entries().map(function(u){let d;return u.oid===a?(d=Mt.join(o,u.path),s.push(d)):u.type==="tree"&&(d=Wr({fs:e,cache:t,gitdir:n,oid:u.oid}).then(function({object:h}){return aF({fs:e,cache:t,gitdir:n,tree:Li.from(h),fileId:a,oid:i,filepaths:s,parentPath:Mt.join(o,u.path)})})),d});return await Promise.all(l),s}async function $ie({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l}){const u=typeof s>"u"?void 0:Math.floor(s.valueOf()/1e3),d=[],h=await Dg.read({fs:e,gitdir:n}),p=await Ut.resolve({fs:e,gitdir:n,ref:a}),y=[await Vh({fs:e,cache:t,gitdir:n,oid:p})];let v,b,w;function x(S){w&&r&&d.push(S)}for(;y.length>0;){const S=y.pop();if(u!==void 0&&S.commit.committer.timestamp<=u)break;if(r){let E;try{E=await z0({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),b&&v!==E&&d.push(b),v=E,b=S,w=!0}catch(C){if(C instanceof Nr){let k=l&&v;if(k&&(k=await q4({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),k))if(Array.isArray(k)){if(b){const I=await q4({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(I))if(k=k.filter(R=>I.indexOf(R)===-1),k.length===1)k=k[0],r=k,b&&d.push(b);else{k=!1,b&&d.push(b);break}}}else r=k,b&&d.push(b);if(!k){if(w&&v&&(d.push(b),!o))break;if(!o&&!l)throw C}b=S,w=!1}else throw C}}else d.push(S);if(i!==void 0&&d.length===i){x(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await Vh({fs:e,cache:t,gitdir:n,oid:E});y.map(k=>k.oid).includes(C.oid)||y.push(C)}y.length===0&&x(S),y.sort((E,C)=>Fie(E.commit,C.commit))}return d}async function Bie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:s,force:o,follow:l,cache:u={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",a),await $ie({fs:new cn(e),cache:u,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l})}catch(d){throw d.caller="git.log",d}}async function zie({fs:e,onSign:t,dir:n,gitdir:r=Mt.join(n,".git"),ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:p,committer:y,signingKey:v,cache:b={},mergeDriver:w}){try{Qe("fs",e),v&&Qe("onSign",t);const x=new cn(e),S=await _u({fs:x,gitdir:r,author:p});if(!S&&(!o||!s))throw new ci("author");const E=await qh({fs:x,gitdir:r,author:S,committer:y});if(!E&&(!o||!s))throw new ci("committer");return await J5({fs:x,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s,fastForwardOnly:o,dryRun:l,noUpdateBranch:u,abortOnConflict:d,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:w})}catch(x){throw x.caller="git.merge",x}}const Uie={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function iF({fs:e,cache:t,dir:n,gitdir:r=Mt.join(n,".git"),oids:a}){const i=new _5,s=[];function o(d,h){const p=Jt.from(d,h);s.push(p),i.update(p)}async function l({stype:d,object:h}){const p=Uie[d];let y=h.length,v=y>15?128:0;const b=y&15;y=y>>>4;let w=(v|p|b).toString(16);for(o(w,"hex");v;)v=y>127?128:0,w=v|y&127,o(IC(2,w),"hex"),y=y>>>7;o(Jt.from(await L5(h)))}o("PACK"),o("00000002","hex"),o(IC(8,a.length),"hex");for(const d of a){const{type:h,object:p}=await Wr({fs:e,cache:t,gitdir:r,oid:d});await l({object:p,stype:h})}const u=i.digest();return s.push(u),s}async function Hie({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await iF({fs:e,cache:t,gitdir:n,oids:r}),s=Jt.from(await Sw(i)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return a?(await e.write(Mt.join(n,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}async function qie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oids",r),await Hie({fs:new cn(e),cache:i,gitdir:n,oids:r,write:a})}catch(s){throw s.caller="git.packObjects",s}}async function Vie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Mt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:p,prune:y=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:w=!1,corsProxy:x,singleBranch:S,headers:E={},author:C,committer:k,signingKey:I,cache:R={}}){try{Qe("fs",e),Qe("gitdir",l);const j=new cn(e),L=await _u({fs:j,gitdir:l,author:C});if(!L)throw new ci("author");const B=await qh({fs:j,gitdir:l,author:L,committer:k});if(!B)throw new ci("committer");return await Q5({fs:j,cache:R,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:p,fastForward:b,fastForwardOnly:w,corsProxy:x,singleBranch:S,headers:E,author:L,committer:B,signingKey:I,prune:y,pruneTags:v})}catch(j){throw j.caller="git.pull",j}}async function Gie({fs:e,cache:t,dir:n,gitdir:r=Mt.join(n,".git"),start:a,finish:i}){const s=await Dg.read({fs:e,gitdir:r}),o=new Set,l=new Set;for(const h of a)o.add(await Ut.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const p=await Ut.resolve({fs:e,gitdir:r,ref:h});l.add(p)}catch{}const u=new Set;async function d(h){u.add(h);const{type:p,object:y}=await Wr({fs:e,cache:t,gitdir:r,oid:h});if(p==="tag"){const b=vi.from(y).headers().object;return d(b)}if(p!=="commit")throw new ki(h,p,"commit");if(!s.has(h)){const b=Vr.from(y).headers().parent;for(h of b)!l.has(h)&&!u.has(h)&&await d(h)}}for(const h of o)await d(h);return u}async function JE({fs:e,cache:t,dir:n,gitdir:r=Mt.join(n,".git"),oids:a}){const i=new Set;async function s(o){if(i.has(o))return;i.add(o);const{type:l,object:u}=await Wr({fs:e,cache:t,gitdir:r,oid:o});if(l==="tag"){const h=vi.from(u).headers().object;await s(h)}else if(l==="commit"){const h=Vr.from(u).headers().tree;await s(h)}else if(l==="tree"){const d=Li.from(u);for(const h of d)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await s(h.oid)}}for(const o of a)await s(o);return i}async function Wie(e){const t={};let n="";const r=oa.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new sf('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const s of i){if(s.trim()==="")continue;const o=s.slice(0,2),l=s.slice(3);let u=l.indexOf(" ");u===-1&&(u=l.length);const d=l.slice(0,u),h=l.slice(u+1);t.refs[d]={ok:o==="ok",error:h}}return t}async function Kie({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(oa.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(oa.flush()),n}async function Zie({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:l,gitdir:u,ref:d,remoteRef:h,remote:p,url:y,force:v=!1,delete:b=!1,corsProxy:w,headers:x={}}){const S=d||await Ou({fs:e,gitdir:u});if(typeof S>"u")throw new Fi("ref");const E=await ya.get({fs:e,gitdir:u});p=p||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=y||await E.get(`remote.${p}.pushurl`)||await E.get(`remote.${p}.url`);if(typeof C>"u")throw new Fi("remote OR url");const k=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new Fi("remoteRef");w===void 0&&(w=await E.get("http.corsProxy"));const I=await Ut.expand({fs:e,gitdir:u,ref:S}),R=b?"0000000000000000000000000000000000000000":await Ut.resolve({fs:e,gitdir:u,ref:I}),j=$x.getRemoteHelperFor({url:C}),L=await j.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:w,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),B=L.auth;let Z;if(!k)Z=I;else try{Z=await Ut.expandAgainstMap({ref:k,map:L.refs})}catch(Q){if(Q instanceof Nr)Z=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw Q}const P=L.refs.get(Z)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:p,url:C,localRef:{ref:b?"(delete)":I,oid:R},remoteRef:{ref:Z,oid:P}}))throw new mp;const K=!L.capabilities.has("no-thin");let q=new Set;if(!b){const Q=[...L.refs.values()];let ie=new Set;if(P!=="0000000000000000000000000000000000000000"){const me=await jT({fs:e,cache:t,gitdir:u,oids:[R,P]});for(const ve of me)Q.push(ve);K&&(ie=await JE({fs:e,cache:t,gitdir:u,oids:me}))}if(!Q.includes(R)){const me=await Gie({fs:e,cache:t,gitdir:u,start:[R],finish:Q});q=await JE({fs:e,cache:t,gitdir:u,oids:me})}if(K){try{const me=await Ut.resolve({fs:e,gitdir:u,ref:`refs/remotes/${p}/HEAD`,depth:2}),{oid:ve}=await Ut.resolveAgainstMap({ref:me.replace(`refs/remotes/${p}/`,""),fullref:me,map:L.refs}),Me=[ve];for(const Ae of await JE({fs:e,cache:t,gitdir:u,oids:Me}))ie.add(Ae)}catch{}for(const me of ie)q.delete(me)}if(R===P&&(v=!0),!v){if(I.startsWith("refs/tags")&&P!=="0000000000000000000000000000000000000000")throw new Uh("tag-exists");if(R!=="0000000000000000000000000000000000000000"&&P!=="0000000000000000000000000000000000000000"&&!await nF({fs:e,cache:t,gitdir:u,oid:R,ancestor:P,depth:-1}))throw new Uh("not-fast-forward")}}const de=K5([...L.capabilities],["report-status","side-band-64k",`agent=${Bx.agent}`]),ae=await Kie({capabilities:de,triplets:[{oldoid:P,oid:R,fullRef:Z}]}),te=b?[]:await iF({fs:e,cache:t,gitdir:u,oids:[...q]}),X=await j.connect({http:n,onProgress:r,corsProxy:w,service:"git-receive-pack",url:C,auth:B,headers:x,body:[...ae,...te]}),{packfile:re,progress:D}=await Y5.demux(X.body);if(a){const Q=Z5(D);H0(Q,async ie=>{await a(ie)})}const J=await Wie(re);if(X.headers&&(J.headers=X.headers),p&&J.ok&&J.refs[Z].ok&&!I.startsWith("refs/tags")){const Q=`refs/remotes/${p}/${Z.replace("refs/heads","")}`;b?await Ut.deleteRef({fs:e,gitdir:u,ref:Q}):await Ut.writeRef({fs:e,gitdir:u,ref:Q,value:R})}if(J.ok&&Object.values(J.refs).every(Q=>Q.ok))return J;{const Q=Object.entries(J.refs).filter(([ie,me])=>!me.ok).map(([ie,me])=>`
  - ${ie}: ${me.error}`).join("");throw new j0(Q,J)}}async function Yie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,dir:l,gitdir:u=Mt.join(l,".git"),ref:d,remoteRef:h,remote:p="origin",url:y,force:v=!1,delete:b=!1,corsProxy:w,headers:x={},cache:S={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",u),await Zie({fs:new cn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,gitdir:u,ref:d,remoteRef:h,remote:p,url:y,force:v,delete:b,corsProxy:w,headers:x})}catch(E){throw E.caller="git.push",E}}async function sF({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=vi.from(i).parse().object,sF({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new ki(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function oF({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await z0({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await sF({fs:e,cache:t,gitdir:n,oid:r})}async function Xie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await oF({fs:new cn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readBlob",s}}async function lF({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await Vh({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Jie({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Ut.resolve({gitdir:n,fs:e,ref:r}),{blob:s}=await oF({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return s}async function Qie({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("oid",a),await Jie({fs:new cn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(s){throw s.caller="git.readNote",s}}async function ese({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:s=void 0,cache:o={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("oid",r);const l=new cn(e);i!==void 0&&(r=await z0({fs:l,cache:o,gitdir:n,oid:r,filepath:i}));const d=await Wr({fs:l,cache:o,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(d.oid=r,a==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=Vr.from(d.object).parse();break;case"tree":d.object=Li.from(d.object).entries();break;case"blob":s?d.object=d.object.toString(s):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=vi.from(d.object).parse();break;default:throw new ki(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function tse({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Wr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new ki(r,a,"tag");const s=vi.from(i);return{oid:r,tag:s.parse(),payload:s.payload()}}async function nse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await tse({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function rse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await yp({fs:new cn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readTree",s}}async function ase({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r,cache:a={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r),await $a.acquire({fs:new cn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function ise({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l}){let u;try{u=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof Nr))throw v}let h=(await yp({fs:e,gitdir:r,oid:u||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const p=await U0({fs:e,gitdir:r,tree:h});return await Lx({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:p,parent:u&&[u],message:`Note removed by 'isomorphic-git removeNote'
`,author:s,committer:o,signingKey:l})}async function sse({fs:e,onSign:t,dir:n,gitdir:r=Mt.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l,cache:u={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("oid",i);const d=new cn(e),h=await _u({fs:d,gitdir:r,author:s});if(!h)throw new ci("author");const p=await qh({fs:d,gitdir:r,author:h,committer:o});if(!p)throw new ci("committer");return await ise({fs:d,cache:u,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:p,signingKey:l})}catch(d){throw d.caller="git.removeNote",d}}async function ose({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==Uo.clean(r))throw new io(r,Uo.clean(r));if(n!==Uo.clean(n))throw new io(n,Uo.clean(n));const i=`refs/heads/${n}`,s=`refs/heads/${r}`;if(await Ut.exists({fs:e,gitdir:t,ref:s}))throw new fo("branch",r,!1);const l=await Ut.resolve({fs:e,gitdir:t,ref:i,depth:1});await Ut.writeRef({fs:e,gitdir:t,ref:s,value:l}),await Ut.deleteRef({fs:e,gitdir:t,ref:i});const d=await Ou({fs:e,gitdir:t,fullname:!0})===i;(a||d)&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function lse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("oldref",a),await ose({fs:new cn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(s){throw s.caller="git.renameBranch",s}}async function cF({gitdir:e,type:t,object:n}){return tc(fp.wrap({type:t,object:n}))}async function cse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r);const s=new cn(e);let o,l;try{o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(o)try{o=await z0({fs:s,cache:i,gitdir:n,oid:o,filepath:r})}catch{o=null}let u={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=t&&await s.read(Mt.join(t,r));d&&(l=await cF({gitdir:n,type:"blob",object:d}),o===l&&(u=await s.lstat(Mt.join(t,r)))),await $a.acquire({fs:s,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),o&&h.insert({filepath:r,stats:u,oid:o})})}catch(s){throw s.caller="git.reset",s}}async function use({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,depth:a}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Ut.resolve({fs:new cn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function dse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),path:r,value:a,append:i=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("path",r);const s=new cn(e),o=await ya.get({fs:s,gitdir:n});i?await o.append(r,a):await o.set(r,a),await ya.save({fs:s,gitdir:n,config:o})}catch(s){throw s.caller="git.setConfig",s}}async function uF({fs:e,gitdir:t,commit:n}){const r=Vr.from(n).toObject();return await Bi({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Cw{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",s=Math.floor(Date.now()/1e3),o=Cw.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${s} ${o}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,s)=>n?`stash@{${s}}: ${i.split("	")[1]}`:i)}}const fse={stage:dp,workdir:B0};let QE;async function Gh(e,t){return QE===void 0&&(QE=new jg),QE.acquire(e,t)}async function hse(e,t,n,r,a=null){const i=Mt.join(n,r),s=await e.lstat(i);if(!s)throw new Nr(i);if(s.isDirectory())throw new In(`${i}: file expected, but found directory`);const o=a?await O5({fs:e,gitdir:t,oid:a}):void 0;let l=o?a:void 0;return o||await Gh({fs:e,gitdir:t,currentFilepath:i},async()=>{const u=s.isSymbolicLink()?await e.readlink(i).then($5):await e.read(i);if(u===null)throw new Nr(i);l=await Bi({fs:e,gitdir:t,type:"blob",object:u})}),l}async function pse({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const s=await Promise.all(i.children.map(a));i.oid=await U0({fs:e,gitdir:n,tree:s}),i.mode=16384}}else i.type==="blob"&&(i.oid=await hse(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function V4({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(y=>typeof y=="string"?fse[y]():y),s=[],d=await xu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(y,[v,b])=>{if(!(y==="."||await gp.isIgnored({fs:e,dir:t,gitdir:n,filepath:y}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&s.push([v,b]),{mode:await b.mode(),path:y,oid:await b.oid(),type:await b.type()}},reduce:async(y,v)=>(v=v.filter(Boolean),y?(y.children=v,y):v.length>0?v:void 0),iterate:async(y,v)=>{const b=[];for(const w of v){const[x,S]=w;a?S&&(await e.exists(`${t}/${S.toString()}`)?b.push(w):s.push([null,S])):x&&(S?b.push(w):s.push([x,null]))}return b.length?Promise.all(b.map(y)):[]}});if(s.length===0||d.length===0)return null;const p=(await pse({fs:e,dir:t,gitdir:n,entries:d})).filter(Boolean).map(y=>({mode:y.mode,path:y.path,oid:y.oid,type:y.type}));return U0({fs:e,gitdir:n,tree:p})}async function mse({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const s=[],o=[],l=await xu({fs:e,cache:{},dir:t,gitdir:n,trees:[ks({ref:a}),ks({ref:r})],map:async(u,[d,h])=>{if(u==="."||await gp.isIgnored({fs:e,dir:t,gitdir:n,filepath:u}))return;const p=h?await h.type():await d.type();if(p!=="tree"&&p!=="blob")return;if(!h&&d){const v=p==="tree"?"rmdir":"rm";return p==="tree"&&s.push(u),p==="blob"&&i&&o.push({filepath:u,oid:await d.oid()}),{method:v,filepath:u}}const y=await h.oid();if(!d||await d.oid()!==y)return p==="tree"?{method:"mkdir",filepath:u}:(i&&o.push({filepath:u,oid:y,stats:await e.lstat(Mt.join(t,u))}),{method:"write",filepath:u,oid:y})}});await Gh({fs:e,gitdir:n,dirRemoved:s,ops:l},async()=>{for(const u of l){const d=Mt.join(t,u.filepath);switch(u.method){case"rmdir":await e.rmdir(d);break;case"mkdir":await e.mkdir(d);break;case"rm":await e.rm(d);break;case"write":if(!s.some(h=>d.startsWith(h))){const{object:h}=await Wr({fs:e,cache:{},gitdir:n,oid:u.oid});await e.exists(d)&&await e.rm(d),await e.write(d,h)}break}}}),await $a.acquire({fs:e,gitdir:n,cache:{}},async u=>{o.forEach(({filepath:d,stats:h,oid:p})=>{u.insert({filepath:d,stats:h,oid:p})})})}class Gl{constructor({fs:t,dir:n,gitdir:r=Mt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Mt.join(this.gitdir,Gl.refStash)}get refLogsStashPath(){return Mt.join(this.gitdir,Gl.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await _u({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new ci("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return uF({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new io(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?Vh({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Ut.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Gl.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Cw.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await Gh({filepath:i,entry:a},async()=>{const s=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,s+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Cw.getStashReflogEntry(r,t)}}async function gse({fs:e,dir:t,gitdir:n,message:r=""}){const a=new Gl({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await Ou({fs:e,gitdir:n,fullname:!1}),s=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await lF({fs:e,dir:t,gitdir:n,oid:s})).commit.message,u=[s];let d=null,h=ks({ref:"HEAD"});const p=await V4({fs:e,dir:t,gitdir:n,treePair:[ks({ref:"HEAD"}),"stage"]});if(p){const w=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:p,parent:u});u.push(w),d=p,h=dp()}const y=await V4({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(y){const w=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:y,parent:[u[u.length-1]]});u.push(w),d=y}if(!d||!p&&!y)throw new Nr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${s.substring(0,7)} ${l}`,b=await a.writeStashCommit({message:v,tree:d,parent:u});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await G5({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function dF({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new Gl({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:s=null}=i.commit?i.commit:{};if(!(!s||!Array.isArray(s)))for(let o=0;o<s.length-1;o++){const u=(await Vh({fs:e,cache:{},gitdir:n,oid:s[o+1]})).commit.message.startsWith("stash-Index");await mse({fs:e,dir:t,gitdir:n,stashCommit:s[o+1],parentCommit:s[o],wasStaged:u})}}async function fF({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new Gl({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const s=a.refStashPath;await Gh(s,async()=>{await e.exists(s)&&await e.rm(s)});const o=await a.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const l=a.refLogsStashPath;await Gh({reflogEntries:o,stashReflogPath:l,stashMgr:a},async()=>{if(o.length){await e.write(l,o.join(`
`),"utf8");const u=o[o.length-1].split(" ")[1];await a.writeStashRef(u)}else await e.rm(l)})}async function yse({fs:e,dir:t,gitdir:n}){return new Gl({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function bse({fs:e,dir:t,gitdir:n}){const r=new Gl({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await Gh(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function vse({fs:e,dir:t,gitdir:n,refIdx:r=0}){await dF({fs:e,dir:t,gitdir:n,refIdx:r}),await fF({fs:e,dir:t,gitdir:n,refIdx:r})}async function wse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("op",r);const s={push:gse,apply:dF,drop:fF,list:yse,clear:bse,pop:vse},o=["apply","drop","pop"];try{const l=new cn(e);["refs","logs","logs/refs"].map(h=>Mt.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=s[r];if(d){if(o.includes(r)&&i<0)throw new io(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function xse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r,cache:a={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r);const i=new cn(e);if(await gp.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const o=await _se({fs:i,cache:a,gitdir:n}),l=await hF({fs:i,cache:a,gitdir:n,tree:o,path:r}),u=await $a.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const w of b)if(w.path===r)return w;return null}),d=await i.lstat(Mt.join(t,r)),h=l!==null,p=u!==null,y=d!==null,v=async()=>{if(p&&!yw(u,d))return u.oid;{const b=await i.read(Mt.join(t,r)),w=await cF({gitdir:n,type:"blob",object:b});return p&&u.oid===w&&d.size!==-1&&$a.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:d,oid:w})}),w}};if(!h&&!y&&!p)return"absent";if(!h&&!y&&p)return"*absent";if(!h&&y&&!p)return"*added";if(!h&&y&&p)return await v()===u.oid?"added":"*added";if(h&&!y&&!p)return"deleted";if(h&&!y&&p)return l===u.oid,"*deleted";if(h&&y&&!p)return await v()===l?"*undeleted":"*undeletemodified";if(h&&y&&p){const b=await v();return b===l?b===u.oid?"unmodified":"*unmodified":b===u.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function hF({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const s of r)if(s.path===i){if(a.length===0)return s.oid;const{type:o,object:l}=await Wr({fs:e,cache:t,gitdir:n,oid:s.oid});if(o==="tree"){const u=Li.from(l);return hF({fs:e,cache:t,gitdir:n,tree:u,path:a})}if(o==="blob")throw new ki(s.oid,o,"blob",a.join("/"))}return null}async function _se({fs:e,cache:t,gitdir:n}){let r;try{r=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof Nr)return[]}const{tree:a}=await yp({fs:e,cache:t,gitdir:n,oid:r});return a}async function Sse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:s={},ignored:o=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r);const l=new cn(e);return await xu({fs:l,cache:s,dir:t,gitdir:n,trees:[ks({ref:r}),B0(),dp()],map:async function(u,[d,h,p]){if(!d&&!p&&h&&!o&&await gp.isIgnored({fs:l,dir:t,filepath:u})||!a.some(I=>V5(u,I)))return null;if(i&&!i(u))return;const[y,v,b]=await Promise.all([d&&d.type(),h&&h.type(),p&&p.type()]),w=[y,v,b].includes("blob");if((y==="tree"||y==="special")&&!w)return;if(y==="commit")return null;if((v==="tree"||v==="special")&&!w)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!w)return;const x=y==="blob"?await d.oid():void 0,S=b==="blob"?await p.oid():void 0;let E;y!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,x,E,S],k=C.map(I=>C.indexOf(I));return k.shift(),[u,...k]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function Ese({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,object:a,force:i=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r);const s=new cn(e);if(r===void 0)throw new Fi("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"});if(!i&&await Ut.exists({fs:s,gitdir:n,ref:r}))throw new fo("tag",r);await Ut.writeRef({fs:s,gitdir:n,ref:r,value:o})}catch(s){throw s.caller="git.tag",s}}async function Cse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),cache:r={},filepath:a,oid:i,mode:s,add:o,remove:l,force:u}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",a);const d=new cn(e);if(l)return await $a.acquire({fs:d,gitdir:n,cache:r},async function(p){if(!u){const y=await d.lstat(Mt.join(t,a));if(y){if(y.isDirectory())throw new wu("directory");return}}p.has({filepath:a})&&p.delete({filepath:a})});let h;if(!i){if(h=await d.lstat(Mt.join(t,a)),!h)throw new Nr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new wu("directory")}return await $a.acquire({fs:d,gitdir:n,cache:r},async function(p){if(!o&&!p.has({filepath:a}))throw new Nr(`file at "${a}" in index and "add" not set`);let y;if(i)y={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};else{y=h;const v=y.isSymbolicLink()?await d.readlink(Mt.join(t,a)):await d.read(Mt.join(t,a));i=await Bi({fs:d,gitdir:n,type:"blob",format:"content",object:v})}return p.insert({filepath:a,oid:i,stats:y}),i})}catch(d){throw d.caller="git.updateIndex",d}}function kse(){try{return Bx.version}catch(e){throw e.caller="git.version",e}}async function Tse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),trees:r,map:a,reduce:i,iterate:s,cache:o={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("trees",r),await xu({fs:new cn(e),cache:o,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:s})}catch(l){throw l.caller="git.walk",l}}async function Ase({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),blob:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("blob",r),await Bi({fs:new cn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function Nse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),commit:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("commit",r),await uF({fs:new cn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function Rse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),type:r,object:a,format:i="parsed",oid:s,encoding:o=void 0}){try{const l=new cn(e);if(i==="parsed"){switch(r){case"commit":a=Vr.from(a).toObject();break;case"tree":a=Li.from(a).toObject();break;case"blob":a=Jt.from(a,o);break;case"tag":a=vi.from(a).toObject();break;default:throw new ki(s||"",r,"blob|commit|tag|tree")}i="content"}return s=await Bi({fs:l,gitdir:n,type:r,object:a,oid:s,format:i}),s}catch(l){throw l.caller="git.writeObject",l}}async function Ise({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:s=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("value",a);const o=new cn(e);if(r!==Uo.clean(r))throw new io(r,Uo.clean(r));if(!i&&await Ut.exists({fs:o,gitdir:n,ref:r}))throw new fo("ref",r);s?await Ut.writeSymbolicRef({fs:o,gitdir:n,ref:r,value:a}):(a=await Ut.resolve({fs:o,gitdir:n,ref:a}),await Ut.writeRef({fs:o,gitdir:n,ref:r,value:a}))}catch(o){throw o.caller="git.writeRef",o}}async function jse({fs:e,gitdir:t,tag:n}){const r=vi.from(n).toObject();return await Bi({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function Ose({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),tag:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("tag",r),await jse({fs:new cn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function Dse({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),tree:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("tree",r),await U0({fs:new cn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Sa={Errors:lae,STAGE:dp,TREE:ks,WORKDIR:B0,add:kae,abortMerge:_ae,addNote:Aae,addRemote:Nae,annotatedTag:Iae,branch:Oae,checkout:G5,clone:Vae,commit:Gae,getConfig:hie,getConfigAll:mie,setConfig:dse,currentBranch:Wae,deleteBranch:Zae,deleteRef:Yae,deleteRemote:Jae,deleteTag:eie,expandOid:aie,expandRef:iie,fastForward:cie,fetch:uie,findMergeBase:die,findRoot:fie,getRemoteInfo:gie,getRemoteInfo2:yie,hashBlob:vie,indexPack:xie,init:_ie,isDescendent:Sie,isIgnored:Eie,listBranches:Cie,listFiles:Tie,listNotes:Nie,listRefs:Rie,listRemotes:jie,listServerRefs:Mie,listTags:Pie,log:Bie,merge:zie,packObjects:qie,pull:Vie,push:Yie,readBlob:Xie,readCommit:lF,readNote:Qie,readObject:ese,readTag:nse,readTree:rse,remove:ase,removeNote:sse,renameBranch:lse,resetIndex:cse,updateIndex:Cse,resolveRef:use,status:xse,statusMatrix:Sse,tag:Ese,version:kse,walk:Tse,writeBlob:Ase,writeCommit:Nse,writeObject:Rse,writeRef:Ise,writeTag:Ose,writeTree:Dse,stash:wse};function Mse(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Pse(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Mse(e)}async function Fse(e,t){const n=Pse(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Lse(e){let t=0;const n=[];await Fse(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function $se(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Bse({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await Lse(a));const i=await fetch(t,{method:n,headers:r,body:a}),s=i.body&&i.body.getReader?$se(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[o,l]of i.headers.entries())r[o]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:s,headers:r}}var Mg={request:Bse};const Pg="https://cors.isomorphic-git.org",Wh=new Map,pF=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=lr.getState();if(!n||!r)return Ye.error("Git user name and email must be configured in Settings before committing."),!1;try{const a=await Sa.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),i=await Sa.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return a!==n&&await Sa.setConfig({fs:t,dir:e,path:"user.name",value:n}),i!==r&&await Sa.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(a){return console.error("[VFS Git Op] Error checking/setting Git config:",a),Ye.error(`Failed to configure Git user: ${a instanceof Error?a.message:String(a)}`),!1}},Fg=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=Wh.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return Ye.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(Wh.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(Ye.error("Authentication cancelled: Password/token not provided."),null)},Lg=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),Wh.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),Wh.delete(n)),null},$g=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!Wh.has(n)&&t.username&&t.password&&(Wh.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},_h=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},zse=async(e,t)=>{const n=Ha,r=rr(e),a=Xo(r,".git");try{return(await n.promises.stat(a)).isDirectory()}catch(i){return i instanceof Error&&i.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,i),!1}},mF=async(e,t,n,r,a)=>{var o;const i=(a==null?void 0:a.fsInstance)??Ha,s=rr(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${s}`);try{let l=!1;try{await i.promises.stat(Xo(s,".git")),l=!0}catch(p){if(p.code!=="ENOENT")throw p}if(l)throw console.warn(`[VFS Git Op] Clone target ${s} already contains a .git directory.`),new Error(`Repository already cloned at ${s}.`);const u=E0(s);if(u!=="/")try{await i.promises.mkdir(u,{recursive:!0})}catch(p){if(p.code!=="EEXIST")throw p}let d=n;if(!d)try{if(d=(o=(await Sa.getRemoteInfo({http:Mg,url:t,corsProxy:Pg,onAuth:y=>Fg(y,r),onAuthFailure:Lg,onAuthSuccess:$g})).HEAD)==null?void 0:o.replace("refs/heads/",""),!d)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${d}`)}catch(p){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",p),new Error(`Failed to determine default branch: ${_h(p)}`)}await Sa.clone({fs:i,http:Mg,dir:s,corsProxy:Pg,url:t,ref:d,singleBranch:!0,depth:10,onAuth:p=>Fg(p,r),onAuthFailure:Lg,onAuthSuccess:$g,onProgress:p=>{p.phase==="counting objects"&&p.total?console.log(`Clone progress: ${p.phase} ${p.loaded}/${p.total}`):p.phase==="receiving objects"&&p.total?console.log(`Clone progress: ${p.phase} ${p.loaded}/${p.total}`):console.log(`Clone progress: ${p.phase}`)}}),await i.promises.stat(Xo(s,".git"));const h=await Sa.currentBranch({fs:i,dir:s,fullname:!1}).catch(()=>null);h!==d&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${h}, expected ${d}. Checking out...`),await Sa.checkout({fs:i,dir:s,ref:d})),Ye.success(`Repository cloned successfully into ${s} (branch: ${d}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const u=_h(l);if(l instanceof Error&&l.message.includes("already cloned")||Ye.error(`Git clone failed: ${u}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${s}`),await i.promises.rm(s,{recursive:!0,force:!0})}catch(d){console.warn("[VFS Git Op] Failed cleanup after clone error:",d)}throw l}},gF=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ha,r=rr(e);try{await Sa.init({fs:n,dir:r}),Ye.success(`Initialized empty Git repository in "${ga(r)}"`)}catch(a){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,a),Ye.error(`Git init failed: ${a instanceof Error?a.message:String(a)}`),a}},OT=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ha,a=rr(e);try{if(!await pF(a,r))throw new Error("Git user configuration is missing or invalid.");if(await Sa.add({fs:r,dir:a,filepath:"."}),!(await Sa.statusMatrix({fs:r,dir:a})).some(([,,u])=>u!==0)){Ye.info("No changes detected to commit.");return}const l=await Sa.commit({fs:r,dir:a,message:t,author:{name:lr.getState().gitUserName,email:lr.getState().gitUserEmail}});Ye.success(`Changes committed: ${l.substring(0,7)}`)}catch(i){throw console.error(`[VFS Git Op] Git commit failed for ${a}:`,i),Ye.error(`Git commit failed: ${i instanceof Error?i.message:String(i)}`),i}},zx=async(e,t,n,r)=>{const a=(r==null?void 0:r.fsInstance)??Ha,i=rr(e);try{if(!await pF(i,a))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${i}`);const o=await Sa.currentBranch({fs:a,dir:i,fullname:!1}).catch(()=>null);if(o!==t){console.log(`[VFS Git Op] Current branch is ${o}, switching to ${t} before pull...`);try{await Sa.checkout({fs:a,dir:i,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await Sa.fetch({fs:a,http:Mg,dir:i,corsProxy:Pg,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>Fg(u,n),onAuthFailure:Lg,onAuthSuccess:$g}),await Sa.branch({fs:a,dir:i,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(u){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,u),new Error(`Failed to switch to or create local branch "${t}": ${_h(u)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${_h(l)}`)}}await Sa.pull({fs:a,http:Mg,dir:i,ref:t,singleBranch:!0,author:{name:lr.getState().gitUserName,email:lr.getState().gitUserEmail},corsProxy:Pg,onAuth:l=>Fg(l,n),onAuthFailure:Lg,onAuthSuccess:$g}),Ye.success(`Pulled changes successfully for "${ga(i)}"`),console.log(`[VFS Git Op] Pull successful for ${i}`)}catch(s){if(console.error(`[VFS Git Op] Git pull failed for ${i}:`,s),s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")?Ye.info(`Branch "${t}" is already up-to-date.`):Ye.error(`Git pull failed: ${_h(s)}`),!(s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")))throw s}},DT=async(e,t,n,r)=>{var s,o;const a=(r==null?void 0:r.fsInstance)??Ha,i=rr(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${i}`);const l=await Sa.push({fs:a,http:Mg,dir:i,corsProxy:Pg,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:u=>Fg(u,n),onAuthFailure:Lg,onAuthSuccess:$g});if(l!=null&&l.ok)Ye.success(`Pushed changes successfully for "${ga(i)}"`);else if((s=l==null?void 0:l.error)!=null&&s.includes("up-to-date"))Ye.info(`Branch "${t}" already up-to-date on remote.`);else throw(o=l==null?void 0:l.error)!=null&&o.includes("rejected")?(Ye.error(`Push rejected for "${ga(i)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${i}:`,l),l instanceof Error&&l.message.includes("rejected")||Ye.error(`Git push failed: ${_h(l)}`),l}},yF=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ha,r=rr(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const a=await Sa.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",a);const i=a.map(([s,o,l,u])=>{let d="";return u===2&&(d+="INDEX_Modified "),u===3&&(d+="INDEX_Added "),o===0&&l===2?d+="WT_New":o===1&&l===2?d+="WT_Modified":o===1&&l===0?d+="WT_Deleted":o===1&&l===1&&u===0&&(d="Unmodified"),(!d||d==="INDEX_Unmodified ")&&(d=`h:${o} w:${l} s:${u}`),`${s}: ${d.trim()}`}).filter(s=>!s.endsWith("Unmodified")).join(`
`);Ye.info(`Git Status for "${ga(r)}":
${i||"No changes"}`,{duration:15e3})}catch(a){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,a),Ye.error(`Git status failed: ${a instanceof Error?a.message:String(a)}`),a}},Ld=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ha,r=rr(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(a){if(a instanceof Error&&a.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,a),Ye.error(`Error creating directory "${ga(r)}": ${a instanceof Error?a.message:String(a)}`),a}},Use=async e=>{try{const t={backend:Vne,name:`litechat_vfs_${e}`};return await Fne(t),Ha}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),Ye.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},MT=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ha,r=rr(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await Ld(r,{fsInstance:n}),[];throw l}const i=(await n.promises.readdir(r)).map(async l=>{const u=Xo(r,l);try{const d=await n.promises.stat(u);return{name:l,path:u,isDirectory:d.isDirectory(),size:d.size,lastModified:d.mtime}}catch(d){return console.error(`[VFS Op] Failed to stat ${u}:`,d),null}});return(await Promise.all(i)).filter(l=>l!==null)}catch(a){throw console.error(`[VFS Op] Failed to list directory ${r}:`,a),Ye.error(`Error listing files: ${a instanceof Error?a.message:String(a)}`),a}},of=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ha,r=rr(e);try{const a=await n.promises.readFile(r);return Ct.emit(St.VFS_FILE_READ,{path:r}),a}catch(a){throw console.error(`[VFS Op] Failed to read file ${r}:`,a),Ye.error(`Error reading file "${ga(r)}": ${a instanceof Error?a.message:String(a)}`),a}},Ux=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ha,a=rr(e),i=E0(a);try{i!=="/"&&await Ld(i,{fsInstance:r}),await r.promises.writeFile(a,t),Ct.emit(St.VFS_FILE_WRITTEN,{path:a})}catch(s){throw s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${a}:`,s),Ye.error(`Error writing file "${ga(a)}": ${s instanceof Error?s.message:String(s)}`)),s}},PT=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??Ha,a=rr(e);if(a==="/")throw Ye.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(a)).isDirectory()?(await r.promises.rm(a,{recursive:t}),Ct.emit(St.VFS_FILE_DELETED,{path:a})):(await r.promises.unlink(a),Ct.emit(St.VFS_FILE_DELETED,{path:a})),Ye.success(`"${ga(a)}" deleted.`)}catch(i){if(i instanceof Error&&i.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${a}`);return}throw console.error(`[VFS Op] Failed to delete ${a}:`,i),Ye.error(`Error deleting "${ga(a)}": ${i instanceof Error?i.message:String(i)}`),i}},bF=async(e,t)=>{await Ld(e,t)},Hse=async(e,t,n)=>{try{const r=await of(e,n),a=new Blob([r]),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i;const o=rr(e);s.download=t||ga(o),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||Ye.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},vF=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ha,a=rr(t);let i=0,s=0;const o=Array.from(e);try{await Ld(a,{fsInstance:r});for(const l of o){const u=Xo(a,l.name);try{const d=await l.arrayBuffer();await Ux(u,new Uint8Array(d),{fsInstance:r}),i++}catch(d){s++,console.error(`[VFS Op] Failed to upload ${l.name}:`,d)}}}catch(l){s=o.length,console.error(`[VFS Op] Failed to prepare target directory ${a} for upload:`,l)}finally{s>0&&i>0?Ye.warning(`Upload complete with issues. ${i} succeeded, ${s} failed.`):s===0&&i>0&&Ye.success(`Successfully uploaded ${i} file(s) to ${a==="/"?"root":ga(a)}.`)}},qse=async(e,t,n)=>{const r=Ha;if(!e.name.toLowerCase().endsWith(".zip")){Ye.error("Please select a valid ZIP file.");return}const a=rr(t);let i;try{await Ld(a,{fsInstance:r}),i=await x5.loadAsync(e);const s=Object.values(i.files),o=await Promise.allSettled(s.map(async h=>{const p=Xo(a,h.name);if(h.dir)await Ld(p,{fsInstance:r});else{const y=await h.async("uint8array");await Ux(p,y,{fsInstance:r})}return{name:h.name,isDir:h.dir}}));let l=0,u=0,d=0;o.forEach(h=>{h.status==="fulfilled"&&h.value?h.value.isDir?u++:l++:h.status==="rejected"&&(d++,console.error("[VFS Op] ZIP Extraction item failed:",h.reason))}),d>0?Ye.warning(`Finished extracting "${e.name}". ${l+u} items succeeded, ${d} failed.`):Ye.success(`Successfully extracted ${l} files and ${u} folders from "${e.name}" to ${a==="/"?"root":ga(a)}.`)}catch(s){s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,s),Ye.error(`ZIP extraction failed: ${s instanceof Error?s.message:String(s)}`))}},G4=async(e,t="/",n)=>{const r=Ha,a=new x5,i=rr(t),s=ga(i)||"root";try{try{if(!(await r.promises.stat(i)).isDirectory()){Ye.error(`Cannot export: "${s}" is not a directory.`);return}}catch(p){p instanceof Error&&p.code==="ENOENT"?Ye.error(`Cannot export: Path "${s}" not found.`):Ye.error(`Cannot export: Error accessing path "${s}". ${p instanceof Error?p.message:String(p)}`);return}const o=async(p,y)=>{const v=await MT(p,{fsInstance:r});for(const b of v)if(b.isDirectory){if(b.name===".git")continue;const w=y.folder(b.name);if(w)await o(b.path,w);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const w=await of(b.path,{fsInstance:r});y.file(b.name,w)}};await o(i,a);const l=await a.generateAsync({type:"blob"}),u=URL.createObjectURL(l),d=document.createElement("a");d.href=u;const h=`vfs_${s}_export.zip`;d.download=e||h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),Ye.success(`"${s}" exported as ${d.download}.`)}catch(o){console.error("[VFS Op] Failed to download all as zip:",o),o instanceof Error&&(o.message.includes("Error listing files")||o.message.includes("Error reading file")||o.message.includes("Cannot export"))||Ye.error(`ZIP export failed: ${o instanceof Error?o.message:String(o)}`)}},wF=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ha,a=rr(e),i=rr(t);if(a==="/"||i==="/")throw Ye.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(a!==i)try{const s=E0(i);s!=="/"&&await Ld(s,{fsInstance:r}),await r.promises.rename(a,i),Ye.success(`Renamed "${ga(a)}" to "${ga(i)}"`)}catch(s){throw s instanceof Error&&s.code==="ENOENT"?s.message.includes("Error creating directory")||Ye.error(`Rename failed: Original item "${ga(a)}" not found.`):s instanceof Error&&s.code==="EEXIST"?Ye.error(`Rename failed: An item named "${ga(i)}" already exists.`):s instanceof Error&&s.message.includes("Error creating directory")||Ye.error(`Rename failed: ${s instanceof Error?s.message:String(s)}`),console.error(`[VFS Op] Failed to rename ${a} to ${i}:`,s),s}},Vse=1024*5,Gse=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},W4=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},xF=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=T.useState(null),[i,s]=T.useState(null),[o,l]=T.useState(!1),[u,d]=T.useState(!1),[h,p]=T.useState(!0),y=e.type||"application/octet-stream",v=vk(e.name,y),b=y.startsWith("image/"),w=y.startsWith("audio/"),x=y.startsWith("video/"),S=e.source==="vfs";T.useEffect(()=>{let L=null;return s(null),e.source==="direct"&&!v&&e.contentBase64?(L=Gse(e.contentBase64,y),L||s("Failed to decode file content for preview."),a(L)):a(null),e.source==="direct"&&v&&e.contentText&&e.contentText.length>Vse?s(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&v&&e.contentText===void 0&&s("Text content missing from metadata."),()=>{L&&(URL.revokeObjectURL(L),a(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,y,v]);const E=async()=>{if(e.source==="vfs"){Ye.info("File is already in VFS.");return}const L=W4(e);if(!L){Ye.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await vF([L],"/"),Ye.success(`"${e.name}" added to VFS root.`)}catch(B){console.error("Failed to add file to VFS:",B),Ye.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},C=async()=>{d(!0);try{let L;if(e.source==="vfs"&&e.path){const P=await of(e.path);L=new Blob([P],{type:y})}else{const P=W4(e);if(!P)throw new Error("Could not reconstruct file data.");L=P}const B=URL.createObjectURL(L),Z=document.createElement("a");Z.href=B,Z.download=e.name,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(B)}catch(L){console.error("Failed to download file:",L),Ye.error(`Download failed: ${L instanceof Error?L.message:String(L)}`)}finally{d(!1)}},k=()=>p(L=>!L),I=()=>S?m.jsx(J6,{className:"h-5 w-5 text-cyan-500"}):v?m.jsx(nq,{className:"h-5 w-5 text-blue-500"}):b?m.jsx(Q6,{className:"h-5 w-5 text-purple-500"}):w?m.jsx(Oq,{className:"h-5 w-5 text-green-500"}):x?m.jsx(pV,{className:"h-5 w-5 text-orange-500"}):m.jsx(eq,{className:"h-5 w-5 text-muted-foreground"}),R=()=>S?m.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?m.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[m.jsx(Nd,{className:"h-4 w-4"}),m.jsx("span",{children:i})]}):v&&e.contentText!==void 0?m.jsx(g0,{lang:y==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?m.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):w&&r?m.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):x&&r?m.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):m.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),j=T.useMemo(()=>{let L="File";return S?L="VFS File":v?L="Text":b?L="Image":w?L="Audio":x&&(L="Video"),`${L} (${gw(e.size)})`},[S,v,b,w,x,e.size]);return m.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[m.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[I(),m.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),m.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",gw(e.size),")"]}),S&&e.path&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),m.jsx(Qn,{children:m.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),m.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,disabled:u,"aria-label":"Download file",children:u?m.jsx(Pn,{className:"h-3.5 w-3.5 animate-spin"}):m.jsx(bh,{className:"h-3.5 w-3.5"})})}),m.jsx(Qn,{children:"Download File"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":h?"Unfold preview":"Fold preview",children:m.jsx(Kw,{className:"h-3.5 w-3.5"})})}),m.jsx(Qn,{side:"top",children:h?"Unfold":"Fold"})]})}),!n&&t&&m.jsxs(m.Fragment,{children:[e.source==="direct"&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,disabled:o,"aria-label":"Add to VFS",children:o?m.jsx(Pn,{className:"h-3.5 w-3.5 animate-spin"}):m.jsx(Z6,{className:"h-3.5 w-3.5"})})}),m.jsx(Qn,{children:"Add to VFS"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:m.jsx(Rs,{className:"h-3.5 w-3.5"})})}),m.jsx(Qn,{children:"Remove from Prompt"})]})})]})]})]}),h?m.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:k,children:j}):m.jsx("div",{className:At("p-2 max-h-80 overflow-y-auto"),children:R()})]})},_F=6048e5,Wse=864e5,rv=43200,K4=1440,Z4=Symbol.for("constructDateFrom");function nc(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Z4 in e?e[Z4](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ua(e,t){return nc(t||e,e)}let Kse={};function q0(){return Kse}function Bg(e,t){var o,l,u,d;const n=q0(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Ua(e,t==null?void 0:t.in),i=a.getDay(),s=(i<r?7:0)+i-r;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function kw(e,t){return Bg(e,{...t,weekStartsOn:1})}function SF(e,t){const n=Ua(e,t==null?void 0:t.in),r=n.getFullYear(),a=nc(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=kw(a),s=nc(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=kw(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Tw(e){const t=Ua(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Hx(e,...t){const n=nc.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function Y4(e,t){const n=Ua(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Zse(e,t,n){const[r,a]=Hx(n==null?void 0:n.in,e,t),i=Y4(r),s=Y4(a),o=+i-Tw(i),l=+s-Tw(s);return Math.round((o-l)/Wse)}function Yse(e,t){const n=SF(e,t),r=nc(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),kw(r)}function Cv(e,t){const n=+Ua(e)-+Ua(t);return n<0?-1:n>0?1:n}function Xse(e){return nc(e,Date.now())}function Jse(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Qse(e){return!(!Jse(e)&&typeof e!="number"||isNaN(+Ua(e)))}function eoe(e,t,n){const[r,a]=Hx(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),s=r.getMonth()-a.getMonth();return i*12+s}function toe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function noe(e,t){return+Ua(e)-+Ua(t)}function roe(e,t){const n=Ua(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function aoe(e,t){const n=Ua(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function ioe(e,t){const n=Ua(e,t==null?void 0:t.in);return+roe(n,t)==+aoe(n,t)}function soe(e,t,n){const[r,a,i]=Hx(n==null?void 0:n.in,e,e,t),s=Cv(a,i),o=Math.abs(eoe(a,i));if(o<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*o);let l=Cv(a,i)===-s;ioe(r)&&o===1&&Cv(r,i)===1&&(l=!1);const u=s*(o-+l);return u===0?0:u}function ooe(e,t,n){const r=noe(e,t)/1e3;return toe(n==null?void 0:n.roundingMethod)(r)}function loe(e,t){const n=Ua(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const coe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uoe=(e,t,n)=>{let r;const a=coe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function e2(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const doe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},foe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hoe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},poe={date:e2({formats:doe,defaultWidth:"full"}),time:e2({formats:foe,defaultWidth:"full"}),dateTime:e2({formats:hoe,defaultWidth:"full"})},moe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},goe=(e,t,n,r)=>moe[e];function $m(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):s;a=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const yoe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},boe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},voe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},woe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xoe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_oe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Soe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Eoe={ordinalNumber:Soe,era:$m({values:yoe,defaultWidth:"wide"}),quarter:$m({values:boe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$m({values:voe,defaultWidth:"wide"}),day:$m({values:woe,defaultWidth:"wide"}),dayPeriod:$m({values:xoe,defaultWidth:"wide",formattingValues:_oe,defaultFormattingWidth:"wide"})};function Bm(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const s=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?koe(o,h=>h.test(s)):Coe(o,h=>h.test(s));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(s.length);return{value:u,rest:d}}}function Coe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function koe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Toe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const o=t.slice(a.length);return{value:s,rest:o}}}const Aoe=/^(\d+)(th|st|nd|rd)?/i,Noe=/\d+/i,Roe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ioe={any:[/^b/i,/^(a|c)/i]},joe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ooe={any:[/1/i,/2/i,/3/i,/4/i]},Doe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Moe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Poe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Foe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Loe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$oe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Boe={ordinalNumber:Toe({matchPattern:Aoe,parsePattern:Noe,valueCallback:e=>parseInt(e,10)}),era:Bm({matchPatterns:Roe,defaultMatchWidth:"wide",parsePatterns:Ioe,defaultParseWidth:"any"}),quarter:Bm({matchPatterns:joe,defaultMatchWidth:"wide",parsePatterns:Ooe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Bm({matchPatterns:Doe,defaultMatchWidth:"wide",parsePatterns:Moe,defaultParseWidth:"any"}),day:Bm({matchPatterns:Poe,defaultMatchWidth:"wide",parsePatterns:Foe,defaultParseWidth:"any"}),dayPeriod:Bm({matchPatterns:Loe,defaultMatchWidth:"any",parsePatterns:$oe,defaultParseWidth:"any"})},EF={code:"en-US",formatDistance:uoe,formatLong:poe,formatRelative:goe,localize:Eoe,match:Boe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function zoe(e,t){const n=Ua(e,t==null?void 0:t.in);return Zse(n,loe(n))+1}function Uoe(e,t){const n=Ua(e,t==null?void 0:t.in),r=+kw(n)-+Yse(n);return Math.round(r/_F)+1}function CF(e,t){var d,h,p,y;const n=Ua(e,t==null?void 0:t.in),r=n.getFullYear(),a=q0(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((y=(p=a.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,s=nc((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const o=Bg(s,t),l=nc((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=Bg(l,t);return+n>=+o?r+1:+n>=+u?r:r-1}function Hoe(e,t){var o,l,u,d;const n=q0(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=CF(e,t),i=nc((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Bg(i,t)}function qoe(e,t){const n=Ua(e,t==null?void 0:t.in),r=+Bg(n,t)-+Hoe(n,t);return Math.round(r/_F)+1}function vr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Kc={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return vr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):vr(n+1,2)},d(e,t){return vr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return vr(e.getHours()%12||12,t.length)},H(e,t){return vr(e.getHours(),t.length)},m(e,t){return vr(e.getMinutes(),t.length)},s(e,t){return vr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return vr(a,t.length)}},rh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},X4={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Kc.y(e,t)},Y:function(e,t,n,r){const a=CF(e,r),i=a>0?a:1-a;if(t==="YY"){const s=i%100;return vr(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):vr(i,t.length)},R:function(e,t){const n=SF(e);return vr(n,t.length)},u:function(e,t){const n=e.getFullYear();return vr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return vr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return vr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Kc.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return vr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=qoe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):vr(a,t.length)},I:function(e,t,n){const r=Uoe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):vr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Kc.d(e,t)},D:function(e,t,n){const r=zoe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):vr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return vr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return vr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return vr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=rh.noon:r===0?a=rh.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=rh.evening:r>=12?a=rh.afternoon:r>=4?a=rh.morning:a=rh.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Kc.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Kc.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):vr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):vr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Kc.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Kc.s(e,t)},S:function(e,t){return Kc.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Q4(r);case"XXXX":case"XX":return yd(r);case"XXXXX":case"XXX":default:return yd(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Q4(r);case"xxxx":case"xx":return yd(r);case"xxxxx":case"xxx":default:return yd(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+J4(r,":");case"OOOO":default:return"GMT"+yd(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+J4(r,":");case"zzzz":default:return"GMT"+yd(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return vr(r,t.length)},T:function(e,t,n){return vr(+e,t.length)}};function J4(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+vr(i,2)}function Q4(e,t){return e%60===0?(e>0?"-":"+")+vr(Math.abs(e)/60,2):yd(e,t)}function yd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=vr(Math.trunc(r/60),2),i=vr(r%60,2);return n+a+t+i}const eO=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},kF=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Voe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return eO(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",eO(r,t)).replace("{{time}}",kF(a,t))},Goe={p:kF,P:Voe},Woe=/^D+$/,Koe=/^Y+$/,Zoe=["D","DD","YY","YYYY"];function Yoe(e){return Woe.test(e)}function Xoe(e){return Koe.test(e)}function Joe(e,t,n){const r=Qoe(e,t,n);if(console.warn(r),Zoe.includes(e))throw new RangeError(r)}function Qoe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ele=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tle=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nle=/^'([^]*?)'?$/,rle=/''/g,ale=/[a-zA-Z]/;function jC(e,t,n){var d,h,p,y;const r=q0(),a=r.locale??EF,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((y=(p=r.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??0,o=Ua(e,n==null?void 0:n.in);if(!Qse(o))throw new RangeError("Invalid time value");let l=t.match(tle).map(v=>{const b=v[0];if(b==="p"||b==="P"){const w=Goe[b];return w(v,a.formatLong)}return v}).join("").match(ele).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:ile(v)};if(X4[b])return{isToken:!0,value:v};if(b.match(ale))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(Xoe(b)||Yoe(b))&&Joe(b,t,String(e));const w=X4[b[0]];return w(o,b,a.localize,u)}).join("")}function ile(e){const t=e.match(nle);return t?t[1].replace(rle,"'"):e}function sle(e,t,n){const r=q0(),a=(n==null?void 0:n.locale)??r.locale??EF,i=2520,s=Cv(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[l,u]=Hx(n==null?void 0:n.in,...s>0?[t,e]:[e,t]),d=ooe(u,l),h=(Tw(u)-Tw(l))/1e3,p=Math.round((d-h)/60);let y;if(p<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,o):d<10?a.formatDistance("lessThanXSeconds",10,o):d<20?a.formatDistance("lessThanXSeconds",20,o):d<40?a.formatDistance("halfAMinute",0,o):d<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):p===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",p,o);if(p<45)return a.formatDistance("xMinutes",p,o);if(p<90)return a.formatDistance("aboutXHours",1,o);if(p<K4){const v=Math.round(p/60);return a.formatDistance("aboutXHours",v,o)}else{if(p<i)return a.formatDistance("xDays",1,o);if(p<rv){const v=Math.round(p/K4);return a.formatDistance("xDays",v,o)}else if(p<rv*2)return y=Math.round(p/rv),a.formatDistance("aboutXMonths",y,o)}if(y=soe(u,l),y<12){const v=Math.round(p/rv);return a.formatDistance("xMonths",v,o)}else{const v=y%12,b=Math.trunc(y/12);return v<3?a.formatDistance("aboutXYears",b,o):v<9?a.formatDistance("overXYears",b,o):a.formatDistance("almostXYears",b+1,o)}}function TF(e,t){return sle(e,Xse(e),t)}const Vn=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:a,disabled:i,variant:s="ghost",size:o="icon",className:l,"aria-label":u,...d})=>{const h=typeof t=="function";return m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:s,size:o,onClick:a,disabled:i,className:At("h-6 w-6",l),"aria-label":u,...d,children:h?m.jsx(t,{className:At("h-3.5 w-3.5",n)}):t})}),m.jsx(Qn,{side:r,children:m.jsx("p",{children:e})})]})})},FT=gt.memo(({turnData:e,timestamp:t,className:n,isAssistantComplete:r=!0})=>{var v,b,w;const a=lr(x=>x.foldUserMessagesOnCompletion),[i,s]=T.useState(r&&a),[o,l]=T.useState(!1);T.useEffect(()=>{r&&a&&s(!0)},[r,a]);const u=t?TF(new Date(t),{addSuffix:!0}):"Sending...",d=((v=e.metadata)==null?void 0:v.attachedFiles)&&e.metadata.attachedFiles.length>0,h=e.content&&e.content.trim().length>0,p=T.useCallback(()=>s(x=>!x),[]),y=T.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),l(!0),Ye.success("User prompt copied!"),setTimeout(()=>l(!1),1500)}catch(x){Ye.error("Failed to copy prompt."),console.error("Clipboard copy failed:",x)}},[e.content]);return m.jsxs("div",{className:At("user-prompt relative group/user",n),children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(dV,{className:"h-4 w-4 text-primary flex-shrink-0"}),m.jsx("span",{className:"text-xs font-semibold text-primary mr-1",children:"User"}),m.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity",children:[h&&m.jsx(Vn,{tooltipText:"Copy Prompt",onClick:y,"aria-label":"Copy user prompt",icon:o?m.jsx(lo,{className:"text-green-500"}):m.jsx(hk,{}),className:"h-5 w-5"}),(h||d)&&m.jsx(Vn,{tooltipText:i?"Unfold":"Fold",onClick:p,"aria-label":i?"Unfold prompt":"Fold prompt",icon:i?m.jsx(rl,{}):m.jsx(Hd,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),m.jsx("div",{className:"flex items-center flex-shrink-0",children:m.jsx("span",{className:"text-xs text-muted-foreground",children:u})})]}),!i&&m.jsxs(m.Fragment,{children:[d&&m.jsx("div",{className:"mb-2 space-y-1",children:(b=e.metadata.attachedFiles)==null?void 0:b.map(x=>m.jsx(xF,{fileMeta:x,isReadOnly:!0},x.id))}),h&&m.jsx("p",{className:"whitespace-pre-wrap text-sm text-foreground",children:e.content})]}),i&&m.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:p,children:[h?`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`:"",h&&d?" + ":"",d?`${(w=e.metadata.attachedFiles)==null?void 0:w.length} file(s)`:""]})]})});FT.displayName="UserPromptDisplay";const tO=e=>e===void 0?"?":e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,ole=({displayModelName:e,timeAgo:t,responseContent:n,isFolded:r,toggleFold:a,canFold:i,promptTokens:s,completionTokens:o,timeToFirstToken:l,generationTime:u})=>{const[d,h]=T.useState(!1),p=T.useCallback(async()=>{if(!n||typeof n!="string"){Ye.info("No text response to copy.");return}try{await navigator.clipboard.writeText(n),h(!0),Ye.success("Assistant response copied!"),setTimeout(()=>h(!1),1500)}catch(v){Ye.error("Failed to copy response."),console.error("Clipboard copy failed:",v)}},[n]),y=s!==void 0&&o!==void 0?s+o:void 0;return m.jsxs("div",{className:"flex justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t",children:[m.jsxs("div",{className:"flex items-start gap-1 min-w-0",children:[m.jsx(kH,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),m.jsxs("div",{className:"flex flex-col min-w-0",children:[m.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",e,")"]}),m.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[y!==void 0&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsxs(Jn,{className:"flex items-center gap-0.5 cursor-default",children:[m.jsx(qH,{className:"h-3 w-3"}),m.jsx("span",{children:y.toLocaleString()})]}),m.jsxs(Qn,{side:"bottom",children:["Tokens: ",s??"?"," (Prompt) +"," ",o??"?"," (Completion) = ",y]})]})}),l!==void 0&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsxs(Jn,{className:"flex items-center gap-0.5 cursor-default",children:[m.jsx(bV,{className:"h-3 w-3"}),m.jsx("span",{children:tO(l)})]}),m.jsx(Qn,{side:"bottom",children:"Time to First Token"})]})}),u!==void 0&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsxs(Jn,{className:"flex items-center gap-0.5 cursor-default",children:[m.jsx(LH,{className:"h-3 w-3"}),m.jsx("span",{children:tO(u)})]}),m.jsx(Qn,{side:"bottom",children:"Total Generation Time"})]})})]})]})]}),m.jsxs("div",{className:"flex items-start flex-shrink-0 gap-1",children:[m.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:t}),m.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[n&&typeof n=="string"&&m.jsx(Vn,{tooltipText:"Copy Response",onClick:p,"aria-label":"Copy assistant response",icon:d?m.jsx(lo,{className:"text-green-500"}):m.jsx(hk,{}),className:"h-5 w-5"}),i&&m.jsx(Vn,{tooltipText:r?"Unfold":"Fold",onClick:a,"aria-label":r?"Unfold response":"Fold response",icon:r?m.jsx(rl,{}):m.jsx(Hd,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]})]})},lle=({interactionId:e,onRegenerate:t,onDelete:n,onEdit:r})=>{const a=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e)},i=()=>{t&&t(e)},s=()=>{r&&r(e)};return m.jsxs("div",{className:`absolute bottom-2 right-2 flex items-center space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200
                 bg-card/80 backdrop-blur-sm p-1 rounded-md shadow-md z-20`,children:[r&&m.jsx(Vn,{tooltipText:"Edit",onClick:s,"aria-label":"Edit User Prompt",icon:m.jsx(yv,{}),className:"h-6 w-6"}),t&&m.jsx(Vn,{tooltipText:"Regenerate",onClick:i,"aria-label":"Regenerate Response",icon:m.jsx(Zw,{}),className:"h-6 w-6"}),n&&m.jsx(Vn,{tooltipText:"Delete",onClick:a,"aria-label":"Delete Interaction",icon:m.jsx(ns,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})},nO={};function cle(e){let t=nO[e];if(t)return t;t=nO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Kh(e,t){typeof t!="string"&&(t=Kh.defaultChars);const n=cle(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,s=r.length;i<s;i+=3){const o=parseInt(r.slice(i+1,i+3),16);if(o<128){a+=n[o];continue}if((o&224)===192&&i+3<s){const l=parseInt(r.slice(i+4,i+6),16);if((l&192)===128){const u=o<<6&1984|l&63;u<128?a+="":a+=String.fromCharCode(u),i+=3;continue}}if((o&240)===224&&i+6<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16);if((l&192)===128&&(u&192)===128){const d=o<<12&61440|l<<6&4032|u&63;d<2048||d>=55296&&d<=57343?a+="":a+=String.fromCharCode(d),i+=6;continue}}if((o&248)===240&&i+9<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((l&192)===128&&(u&192)===128&&(d&192)===128){let h=o<<18&1835008|l<<12&258048|u<<6&4032|d&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Kh.defaultChars=";/?:@&=+$,#";Kh.componentChars="";const rO={};function ule(e){let t=rO[e];if(t)return t;t=rO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function V0(e,t,n){typeof t!="string"&&(n=t,t=V0.defaultChars),typeof n>"u"&&(n=!0);const r=ule(t);let a="";for(let i=0,s=e.length;i<s;i++){const o=e.charCodeAt(i);if(n&&o===37&&i+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(o<128){a+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&i+1<s){const l=e.charCodeAt(i+1);if(l>=56320&&l<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}V0.defaultChars=";/?:@&=+$,-_.!~*'()#";V0.componentChars="-_.!~*'()";function LT(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Aw(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const dle=/^([a-z0-9.+-]+:)/i,fle=/:[0-9]*$/,hle=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ple=["<",">",'"',"`"," ","\r",`
`,"	"],mle=["{","}","|","\\","^","`"].concat(ple),gle=["'"].concat(mle),aO=["%","/","?",";","#"].concat(gle),iO=["/","?","#"],yle=255,sO=/^[+a-z0-9A-Z_-]{0,63}$/,ble=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,oO={javascript:!0,"javascript:":!0},lO={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function $T(e,t){if(e&&e instanceof Aw)return e;const n=new Aw;return n.parse(e,t),n}Aw.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const u=hle.exec(i);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=dle.exec(i);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,i=i.substr(s.length)),(t||s||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(s&&oO[s])&&(i=i.substr(2),this.slashes=!0)),!oO[s]&&(a||s&&!lO[s])){let u=-1;for(let v=0;v<iO.length;v++)r=i.indexOf(iO[v]),r!==-1&&(u===-1||r<u)&&(u=r);let d,h;u===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",u),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),u=-1;for(let v=0;v<aO.length;v++)r=i.indexOf(aO[v]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=i.length),i[u-1]===":"&&u--;const p=i.slice(0,u);i=i.slice(u),this.parseHost(p),this.hostname=this.hostname||"";const y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y){const v=this.hostname.split(/\./);for(let b=0,w=v.length;b<w;b++){const x=v[b];if(x&&!x.match(sO)){let S="";for(let E=0,C=x.length;E<C;E++)x.charCodeAt(E)>127?S+="x":S+=x[E];if(!S.match(sO)){const E=v.slice(0,b),C=v.slice(b+1),k=x.match(ble);k&&(E.push(k[1]),C.unshift(k[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>yle&&(this.hostname=""),y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=i.indexOf("#");o!==-1&&(this.hash=i.substr(o),i=i.slice(0,o));const l=i.indexOf("?");return l!==-1&&(this.search=i.substr(l),i=i.slice(0,l)),i&&(this.pathname=i),lO[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Aw.prototype.parseHost=function(e){let t=fle.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const vle=Object.freeze(Object.defineProperty({__proto__:null,decode:Kh,encode:V0,format:LT,parse:$T},Symbol.toStringTag,{value:"Module"})),AF=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,NF=/[\0-\x1F\x7F-\x9F]/,wle=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,BT=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,RF=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,IF=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,xle=Object.freeze(Object.defineProperty({__proto__:null,Any:AF,Cc:NF,Cf:wle,P:BT,S:RF,Z:IF},Symbol.toStringTag,{value:"Module"})),_le=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Sle=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var t2;const Ele=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Cle=(t2=String.fromCodePoint)!==null&&t2!==void 0?t2:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function kle(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Ele.get(e))!==null&&t!==void 0?t:e}var La;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(La||(La={}));const Tle=32;var nu;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(nu||(nu={}));function OC(e){return e>=La.ZERO&&e<=La.NINE}function Ale(e){return e>=La.UPPER_A&&e<=La.UPPER_F||e>=La.LOWER_A&&e<=La.LOWER_F}function Nle(e){return e>=La.UPPER_A&&e<=La.UPPER_Z||e>=La.LOWER_A&&e<=La.LOWER_Z||OC(e)}function Rle(e){return e===La.EQUALS||Nle(e)}var Da;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Da||(Da={}));var Jc;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Jc||(Jc={}));class Ile{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Da.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Jc.Strict}startEntity(t){this.decodeMode=t,this.state=Da.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Da.EntityStart:return t.charCodeAt(n)===La.NUM?(this.state=Da.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Da.NamedEntity,this.stateNamedEntity(t,n));case Da.NumericStart:return this.stateNumericStart(t,n);case Da.NumericDecimal:return this.stateNumericDecimal(t,n);case Da.NumericHex:return this.stateNumericHex(t,n);case Da.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Tle)===La.LOWER_X?(this.state=Da.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Da.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(OC(a)||Ale(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(OC(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===La.SEMI)this.consumed+=1;else if(this.decodeMode===Jc.Strict)return 0;return this.emitCodePoint(kle(this.result),this.consumed),this.errors&&(t!==La.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&nu.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=jle(r,a,this.treeIndex+Math.max(1,i),s),this.treeIndex<0)return this.result===0||this.decodeMode===Jc.Attribute&&(i===0||Rle(s))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&nu.VALUE_LENGTH)>>14,i!==0){if(s===La.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Jc.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&nu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~nu.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Da.NamedEntity:return this.result!==0&&(this.decodeMode!==Jc.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Da.NumericDecimal:return this.emitNumericEntity(0,2);case Da.NumericHex:return this.emitNumericEntity(0,3);case Da.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Da.EntityStart:return 0}}}function jF(e){let t="";const n=new Ile(e,r=>t+=Cle(r));return function(a,i){let s=0,o=0;for(;(o=a.indexOf("&",o))>=0;){t+=a.slice(s,o),n.startEntity(i);const u=n.write(a,o+1);if(u<0){s=o+n.end();break}s=o+u,o=u===0?s+1:s}const l=t+a.slice(s);return t="",l}}function jle(e,t,n,r){const a=(t&nu.BRANCH_LENGTH)>>7,i=t&nu.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=a?-1:e[n+l]-1}let s=n,o=s+a-1;for(;s<=o;){const l=s+o>>>1,u=e[l];if(u<r)s=l+1;else if(u>r)o=l-1;else return e[l+a]}return-1}const Ole=jF(_le);jF(Sle);function OF(e,t=Jc.Legacy){return Ole(e,t)}function Dle(e){return Object.prototype.toString.call(e)}function zT(e){return Dle(e)==="[object String]"}const Mle=Object.prototype.hasOwnProperty;function Ple(e,t){return Mle.call(e,t)}function qx(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function DF(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function UT(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Nw(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const MF=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Fle=/&([a-z#][a-z0-9]{1,31});/gi,Lle=new RegExp(MF.source+"|"+Fle.source,"gi"),$le=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Ble(e,t){if(t.charCodeAt(0)===35&&$le.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return UT(r)?Nw(r):e}const n=OF(e);return n!==e?n:e}function zle(e){return e.indexOf("\\")<0?e:e.replace(MF,"$1")}function Zh(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Lle,function(t,n,r){return n||Ble(t,r)})}const Ule=/[&<>"]/,Hle=/[&<>"]/g,qle={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Vle(e){return qle[e]}function Su(e){return Ule.test(e)?e.replace(Hle,Vle):e}const Gle=/[.?*+^$[\]\\(){}|-]/g;function Wle(e){return e.replace(Gle,"\\$&")}function Lr(e){switch(e){case 9:case 32:return!0}return!1}function zg(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Ug(e){return BT.test(e)||RF.test(e)}function Hg(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Vx(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Kle={mdurl:vle,ucmicro:xle},Zle=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:DF,assign:qx,escapeHtml:Su,escapeRE:Wle,fromCodePoint:Nw,has:Ple,isMdAsciiPunct:Hg,isPunctChar:Ug,isSpace:Lr,isString:zT,isValidEntityCode:UT,isWhiteSpace:zg,lib:Kle,normalizeReference:Vx,unescapeAll:Zh,unescapeMd:zle},Symbol.toStringTag,{value:"Module"}));function Yle(e,t,n){let r,a,i,s;const o=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<o;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(s=e.pos,e.md.inline.skipToken(e),i===91){if(s===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return a&&(u=e.pos),e.pos=l,u}function Xle(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Zh(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let s=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(s++,s>32))return i;if(r===41){if(s===0)break;s--}a++}return t===a||s!==0||(i.str=Zh(e.slice(t,a)),i.pos=a,i.ok=!0),i}function Jle(e,t,n,r){let a,i=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(i>=n)return s;let o=e.charCodeAt(i);if(o!==34&&o!==39&&o!==40)return s;t++,i++,o===40&&(o=41),s.marker=o}for(;i<n;){if(a=e.charCodeAt(i),a===s.marker)return s.pos=i+1,s.str+=Zh(e.slice(t,i)),s.ok=!0,s;if(a===40&&s.marker===41)return s;a===92&&i+1<n&&i++,i++}return s.can_continue=!0,s.str+=Zh(e.slice(t,i)),s}const Qle=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Xle,parseLinkLabel:Yle,parseLinkTitle:Jle},Symbol.toStringTag,{value:"Module"})),il={};il.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Su(i.content)+"</code>"};il.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Su(e[t].content)+`</code></pre>
`};il.fence=function(e,t,n,r,a){const i=e[t],s=i.info?Zh(i.info).trim():"";let o="",l="";if(s){const d=s.split(/(\s+)/g);o=d[0],l=d.slice(2).join("")}let u;if(n.highlight?u=n.highlight(i.content,o,l)||Su(i.content):u=Su(i.content),u.indexOf("<pre")===0)return u+`
`;if(s){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+o]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+o);const p={attrs:h};return`<pre><code${a.renderAttrs(p)}>${u}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${u}</code></pre>
`};il.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};il.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};il.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};il.text=function(e,t){return Su(e[t].content)};il.html_block=function(e,t){return e[t].content};il.html_inline=function(e,t){return e[t].content};function bp(){this.rules=qx({},il)}bp.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Su(t.attrs[n][0])+'="'+Su(t.attrs[n][1])+'"';return a};bp.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let s=!1;if(a.block&&(s=!0,a.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(s=!1)}return i+=s?`>
`:">",i};bp.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};bp.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};bp.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;o==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function $i(){this.__rules__=[],this.__cache__=null}$i.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};$i.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};$i.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};$i.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};$i.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};$i.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};$i.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};$i.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};$i.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};$i.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function ho(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}ho.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};ho.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};ho.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};ho.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};ho.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function PF(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}PF.prototype.Token=ho;const ece=/\r\n?|\n/g,tce=/\0/g;function nce(e){let t;t=e.src.replace(ece,`
`),t=t.replace(tce,""),e.src=t}function rce(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function ace(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function ice(e){return/^<a[>\s]/i.test(e)}function sce(e){return/^<\/a\s*>/i.test(e)}function oce(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let s=a.length-1;s>=0;s--){const o=a[s];if(o.type==="link_close"){for(s--;a[s].level!==o.level&&a[s].type!=="link_open";)s--;continue}if(o.type==="html_inline"&&(ice(o.content)&&i>0&&i--,sce(o.content)&&i++),!(i>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const l=o.content;let u=e.md.linkify.match(l);const d=[];let h=o.level,p=0;u.length>0&&u[0].index===0&&s>0&&a[s-1].type==="text_special"&&(u=u.slice(1));for(let y=0;y<u.length;y++){const v=u[y].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let w=u[y].text;u[y].schema?u[y].schema==="mailto:"&&!/^mailto:/i.test(w)?w=e.md.normalizeLinkText("mailto:"+w).replace(/^mailto:/,""):w=e.md.normalizeLinkText(w):w=e.md.normalizeLinkText("http://"+w).replace(/^http:\/\//,"");const x=u[y].index;if(x>p){const k=new e.Token("text","",0);k.content=l.slice(p,x),k.level=h,d.push(k)}const S=new e.Token("link_open","a",1);S.attrs=[["href",b]],S.level=h++,S.markup="linkify",S.info="auto",d.push(S);const E=new e.Token("text","",0);E.content=w,E.level=h,d.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",d.push(C),p=u[y].lastIndex}if(p<l.length){const y=new e.Token("text","",0);y.content=l.slice(p),y.level=h,d.push(y)}t[n].children=a=DF(a,s,d)}}}}const FF=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,lce=/\((c|tm|r)\)/i,cce=/\((c|tm|r)\)/ig,uce={c:"",r:"",tm:""};function dce(e,t){return uce[t.toLowerCase()]}function fce(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(cce,dce)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function hce(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&FF.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function pce(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(lce.test(e.tokens[t].content)&&fce(e.tokens[t].children),FF.test(e.tokens[t].content)&&hce(e.tokens[t].children))}const mce=/['"]/,cO=/['"]/g,uO="";function av(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function gce(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],s=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,i.type!=="text")continue;let o=i.content,l=0,u=o.length;e:for(;l<u;){cO.lastIndex=l;const d=cO.exec(o);if(!d)break;let h=!0,p=!0;l=d.index+1;const y=d[0]==="'";let v=32;if(d.index-1>=0)v=o.charCodeAt(d.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<u)b=o.charCodeAt(l);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const w=Hg(v)||Ug(String.fromCharCode(v)),x=Hg(b)||Ug(String.fromCharCode(b)),S=zg(v),E=zg(b);if(E?h=!1:x&&(S||w||(h=!1)),S?p=!1:w&&(E||x||(p=!1)),b===34&&d[0]==='"'&&v>=48&&v<=57&&(p=h=!1),h&&p&&(h=w,p=x),!h&&!p){y&&(i.content=av(i.content,d.index,uO));continue}if(p)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<s)break;if(C.single===y&&r[n].level===s){C=r[n];let k,I;y?(k=t.md.options.quotes[2],I=t.md.options.quotes[3]):(k=t.md.options.quotes[0],I=t.md.options.quotes[1]),i.content=av(i.content,d.index,I),e[C.token].content=av(e[C.token].content,C.pos,k),l+=I.length-1,C.token===a&&(l+=k.length-1),o=i.content,u=o.length,r.length=n;continue e}}h?r.push({token:a,pos:d.index,single:y,level:s}):p&&y&&(i.content=av(i.content,d.index,uO))}}}function yce(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!mce.test(e.tokens[t].content)||gce(e.tokens[t].children,e)}function bce(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const s=r[i].children,o=s.length;for(t=0;t<o;t++)s[t].type==="text_special"&&(s[t].type="text");for(t=n=0;t<o;t++)s[t].type==="text"&&t+1<o&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}}const n2=[["normalize",nce],["block",rce],["inline",ace],["linkify",oce],["replacements",pce],["smartquotes",yce],["text_join",bce]];function HT(){this.ruler=new $i;for(let e=0;e<n2.length;e++)this.ruler.push(n2[e][0],n2[e][1])}HT.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};HT.prototype.State=PF;function sl(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,s=0,o=0,l=0,u=a.length,d=!1;s<u;s++){const h=a.charCodeAt(s);if(!d)if(Lr(h)){o++,h===9?l+=4-l%4:l++;continue}else d=!0;(h===10||s===u-1)&&(h!==10&&s++,this.bMarks.push(i),this.eMarks.push(s),this.tShift.push(o),this.sCount.push(l),this.bsCount.push(0),d=!1,o=0,l=0,i=s+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}sl.prototype.push=function(e,t,n){const r=new ho(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};sl.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};sl.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};sl.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Lr(r))break}return t};sl.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Lr(this.src.charCodeAt(--t)))return t+1;return t};sl.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};sl.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};sl.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let s=0,o=t;o<n;o++,s++){let l=0;const u=this.bMarks[o];let d=u,h;for(o+1<n||a?h=this.eMarks[o]+1:h=this.eMarks[o];d<h&&l<r;){const p=this.src.charCodeAt(d);if(Lr(p))p===9?l+=4-(l+this.bsCount[o])%4:l++;else if(d-u<this.tShift[o])l++;else break;d++}l>r?i[s]=new Array(l-r+1).join(" ")+this.src.slice(d,h):i[s]=this.src.slice(d,h)}return i.join("")};sl.prototype.Token=ho;const vce=65536;function r2(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function dO(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,s=0,o="";for(;r<n;)a===124&&(i?(o+=e.substring(s,r-1),s=r):(t.push(o+e.substring(s,r)),o="",s=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(o+e.substring(s)),t}function wce(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58||i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58&&!Lr(o)||s===45&&Lr(o))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Lr(C))return!1;i++}let l=r2(e,t+1),u=l.split("|");const d=[];for(let C=0;C<u.length;C++){const k=u[C].trim();if(!k){if(C===0||C===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?d.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=r2(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=dO(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const h=u.length;if(h===0||h!==d.length)return!1;if(r)return!0;const p=e.parentType;e.parentType="table";const y=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const w=e.push("thead_open","thead",1);w.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<u.length;C++){const k=e.push("th_open","th",1);d[C]&&(k.attrs=[["style","text-align:"+d[C]]]);const I=e.push("inline","",0);I.content=u[C].trim(),I.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let I=0,R=y.length;I<R;I++)if(y[I](e,a,n,!0)){C=!0;break}if(C||(l=r2(e,a).trim(),!l)||e.sCount[a]-e.blkIndent>=4||(u=dO(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),E+=h-u.length,E>vce))break;if(a===t+2){const I=e.push("tbody_open","tbody",1);I.map=S=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let I=0;I<h;I++){const R=e.push("td_open","td",1);d[I]&&(R.attrs=[["style","text-align:"+d[I]]]);const j=e.push("inline","",0);j.content=u[I]?u[I].trim():"",j.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=p,e.line=a,!0}function xce(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function _ce(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const s=e.src.charCodeAt(a);if(s!==126&&s!==96)return!1;let o=a;a=e.skipChars(a,s);let l=a-o;if(l<3)return!1;const u=e.src.slice(o,a),d=e.src.slice(a,i);if(s===96&&d.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let h=t,p=!1;for(;h++,!(h>=n||(a=o=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===s&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,s),!(a-o<l)&&(a=e.skipSpaces(a),!(a<i)))){p=!0;break}l=e.sCount[t],e.line=h+(p?1:0);const y=e.push("fence","code",0);return y.info=d,y.content=e.getLines(t+1,h,l,!0),y.markup=u,y.map=[t,e.line],!0}function Sce(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const o=[],l=[],u=[],d=[],h=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let y=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[v]+1,I,R;e.src.charCodeAt(a)===32?(a++,k++,R=!1,I=!0):e.src.charCodeAt(a)===9?(I=!0,(e.bsCount[v]+k)%4===3?(a++,k++,R=!1):R=!0):I=!1;let j=k;for(o.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const L=e.src.charCodeAt(a);if(Lr(L))L===9?j+=4-(j+e.bsCount[v]+(R?1:0))%4:j++;else break;a++}y=a>=i,l.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(I?1:0),u.push(e.sCount[v]),e.sCount[v]=j-k,d.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(y)break;let C=!1;for(let k=0,I=h.length;k<I;k++)if(h[k](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const w=e.push("blockquote_open","blockquote",1);w.markup=">";const x=[t,0];w.map=x,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=s,e.parentType=p,x[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=o[E],e.tShift[E+t]=d[E],e.sCount[E+t]=u[E],e.bsCount[E+t]=l[E];return e.blkIndent=b,!0}function Ece(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(i++);if(s!==42&&s!==45&&s!==95)return!1;let o=1;for(;i<a;){const u=e.src.charCodeAt(i++);if(u!==s&&!Lr(u))return!1;u===s&&o++}if(o<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(s)),!0}function fO(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Lr(i))return-1}return r}function hO(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Lr(i))?-1:a}function Cce(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function kce(e,t,n,r){let a,i,s,o,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let d=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(d=!0);let h,p,y;if((y=hO(e,l))>=0){if(h=!0,s=e.bMarks[l]+e.tShift[l],p=Number(e.src.slice(s,y-1)),d&&p!==1)return!1}else if((y=fO(e,l))>=0)h=!1;else return!1;if(d&&e.skipSpaces(y)>=e.eMarks[l])return!1;if(r)return!0;const v=e.src.charCodeAt(y-1),b=e.tokens.length;h?(o=e.push("ordered_list_open","ol",1),p!==1&&(o.attrs=[["start",p]])):o=e.push("bullet_list_open","ul",1);const w=[l,0];o.map=w,o.markup=String.fromCharCode(v);let x=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){i=y,a=e.eMarks[l];const C=e.sCount[l]+y-(e.bMarks[l]+e.tShift[l]);let k=C;for(;i<a;){const de=e.src.charCodeAt(i);if(de===9)k+=4-(k+e.bsCount[l])%4;else if(de===32)k++;else break;i++}const I=i;let R;I>=a?R=1:R=k-C,R>4&&(R=1);const j=C+R;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(v);const L=[l,0];o.map=L,h&&(o.info=e.src.slice(s,y-1));const B=e.tight,Z=e.tShift[l],P=e.sCount[l],K=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=j,e.tight=!0,e.tShift[l]=I-e.bMarks[l],e.sCount[l]=k,I>=a&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||x)&&(u=!1),x=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=K,e.tShift[l]=Z,e.sCount[l]=P,e.tight=B,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(v),l=e.line,L[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let q=!1;for(let de=0,ae=S.length;de<ae;de++)if(S[de](e,l,n,!0)){q=!0;break}if(q)break;if(h){if(y=hO(e,l),y<0)break;s=e.bMarks[l]+e.tShift[l]}else if(y=fO(e,l),y<0)break;if(v!==e.src.charCodeAt(y-1))break}return h?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(v),w[1]=l,e.line=l,e.parentType=E,u&&Cce(e,b),!0}function Tce(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function o(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const R=e.md.block.ruler.getRules("reference"),j=e.parentType;e.parentType="reference";let L=!1;for(let B=0,Z=R.length;B<Z;B++)if(R[B](e,S,E,!0)){L=!0;break}if(e.parentType=j,L)return null}const k=e.bMarks[S]+e.tShift[S],I=e.eMarks[S];return e.src.slice(k,I+1)}let l=e.src.slice(a,i+1);i=l.length;let u=-1;for(a=1;a<i;a++){const S=l.charCodeAt(a);if(S===91)return!1;if(S===93){u=a;break}else if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(S===92&&(a++,a<i&&l.charCodeAt(a)===10)){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(a=u+2;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Lr(S))break}const d=e.md.helpers.parseLinkDestination(l,a,i);if(!d.ok)return!1;const h=e.md.normalizeLink(d.str);if(!e.md.validateLink(h))return!1;a=d.pos;const p=a,y=s,v=a;for(;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Lr(S))break}let b=e.md.helpers.parseLinkTitle(l,a,i);for(;b.can_continue;){const S=o(s);if(S===null)break;l+=S,a=i,i=l.length,s++,b=e.md.helpers.parseLinkTitle(l,a,i,b)}let w;for(a<i&&v!==a&&b.ok?(w=b.str,a=b.pos):(w="",a=p,s=y);a<i;){const S=l.charCodeAt(a);if(!Lr(S))break;a++}if(a<i&&l.charCodeAt(a)!==10&&w)for(w="",a=p,s=y;a<i;){const S=l.charCodeAt(a);if(!Lr(S))break;a++}if(a<i&&l.charCodeAt(a)!==10)return!1;const x=Vx(l.slice(1,u));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:w,href:h}),e.line=s),!0):!1}const Ace=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Nce="[a-zA-Z_:][a-zA-Z0-9:._-]*",Rce="[^\"'=<>`\\x00-\\x20]+",Ice="'[^']*'",jce='"[^"]*"',Oce="(?:"+Rce+"|"+Ice+"|"+jce+")",Dce="(?:\\s+"+Nce+"(?:\\s*=\\s*"+Oce+")?)",LF="<[A-Za-z][A-Za-z0-9\\-]*"+Dce+"*\\s*\\/?>",$F="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Mce="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Pce="<[?][\\s\\S]*?[?]>",Fce="<![A-Za-z][^>]*>",Lce="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",$ce=new RegExp("^(?:"+LF+"|"+$F+"|"+Mce+"|"+Pce+"|"+Fce+"|"+Lce+")"),Bce=new RegExp("^(?:"+LF+"|"+$F+")"),ah=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Ace.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Bce.source+"\\s*$"),/^$/,!1]];function zce(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let s=e.src.slice(a,i),o=0;for(;o<ah.length&&!ah[o][0].test(s);o++);if(o===ah.length)return!1;if(r)return ah[o][2];let l=t+1;if(!ah[o][1].test(s)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(a=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],s=e.src.slice(a,i),ah[o][1].test(s)){s.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function Uce(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(a);if(s!==35||a>=i)return!1;let o=1;for(s=e.src.charCodeAt(++a);s===35&&a<i&&o<=6;)o++,s=e.src.charCodeAt(++a);if(o>6||a<i&&!Lr(s))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const l=e.skipCharsBack(i,35,a);l>a&&Lr(e.src.charCodeAt(l-1))&&(i=l),e.line=t+1;const u=e.push("heading_open","h"+String(o),1);u.markup="########".slice(0,o),u.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(a,i).trim(),d.map=[t,e.line],d.children=[];const h=e.push("heading_close","h"+String(o),-1);return h.markup="########".slice(0,o),!0}function Hce(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,s,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let y=e.bMarks[o]+e.tShift[o];const v=e.eMarks[o];if(y<v&&(s=e.src.charCodeAt(y),(s===45||s===61)&&(y=e.skipChars(y,s),y=e.skipSpaces(y),y>=v))){i=s===61?1:2;break}}if(e.sCount[o]<0)continue;let p=!1;for(let y=0,v=r.length;y<v;y++)if(r[y](e,o,n,!0)){p=!0;break}if(p)break}if(!i)return!1;const l=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const u=e.push("heading_open","h"+String(i),1);u.markup=String.fromCharCode(s),u.map=[t,e.line];const d=e.push("inline","",0);d.content=l,d.map=[t,e.line-1],d.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(s),e.parentType=a,!0}function qce(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let u=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](e,i,n,!0)){u=!0;break}if(u)break}const s=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const l=e.push("inline","",0);return l.content=s,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const iv=[["table",wce,["paragraph","reference"]],["code",xce],["fence",_ce,["paragraph","reference","blockquote","list"]],["blockquote",Sce,["paragraph","reference","blockquote","list"]],["hr",Ece,["paragraph","reference","blockquote","list"]],["list",kce,["paragraph","reference","blockquote"]],["reference",Tce],["html_block",zce,["paragraph","reference","blockquote"]],["heading",Uce,["paragraph","reference","blockquote"]],["lheading",Hce],["paragraph",qce]];function Gx(){this.ruler=new $i;for(let e=0;e<iv.length;e++)this.ruler.push(iv[e][0],iv[e][1],{alt:(iv[e][2]||[]).slice()})}Gx.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let s=t,o=!1;for(;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n||e.sCount[s]<e.blkIndent));){if(e.level>=i){e.line=n;break}const l=e.line;let u=!1;for(let d=0;d<a;d++)if(u=r[d](e,s,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),s=e.line,s<n&&e.isEmpty(s)&&(o=!0,s++,e.line=s)}};Gx.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};Gx.prototype.State=sl;function G0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}G0.prototype.pushPending=function(){const e=new ho("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};G0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new ho(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};G0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const s=i-e,o=i<n?this.src.charCodeAt(i):32,l=Hg(a)||Ug(String.fromCharCode(a)),u=Hg(o)||Ug(String.fromCharCode(o)),d=zg(a),h=zg(o),p=!h&&(!u||d||l),y=!d&&(!l||h||u);return{can_open:p&&(t||!y||l),can_close:y&&(t||!p||u),length:s}};G0.prototype.Token=ho;function Vce(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Gce(e,t){let n=e.pos;for(;n<e.posMax&&!Vce(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Wce=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Kce(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(Wce);if(!a)return!1;const i=a[1],s=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!s)return!1;let o=s.url;if(o.length<=i.length)return!1;o=o.replace(/\*+$/,"");const l=e.md.normalizeLink(o);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(o);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=o.length-i.length,!0}function Zce(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Lr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const qT=[];for(let e=0;e<256;e++)qT.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){qT[e.charCodeAt(0)]=1});function Yce(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Lr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(i+=e.src[n+1],n++)}const s="\\"+i;if(!t){const o=e.push("text_special","",0);a<256&&qT[a]!==0?o.content=i:o.content=s,o.markup=s,o.info="escape"}return e.pos=n+1,!0}function Xce(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const s=e.src.slice(a,n),o=s.length;if(e.backticksScanned&&(e.backticks[o]||0)<=a)return t||(e.pending+=s),e.pos+=o,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<i&&e.src.charCodeAt(l)===96;)l++;const d=l-u;if(d===o){if(!t){const h=e.push("code_inline","code",0);h.markup=s,h.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[d]=u}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=o,!0}function Jce(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const s=String.fromCharCode(r);if(i<2)return!1;let o;i%2&&(o=e.push("text","",0),o.content=s,i--);for(let l=0;l<i;l+=2)o=e.push("text","",0),o.content=s+s,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function pO(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const s=t[i];if(s.marker!==126||s.end===-1)continue;const o=t[s.end];n=e.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const i=r.pop();let s=i+1;for(;s<e.tokens.length&&e.tokens[s].type==="s_close";)s++;s--,i!==s&&(n=e.tokens[s],e.tokens[s]=e.tokens[i],e.tokens[i]=n)}}function Qce(e){const t=e.tokens_meta,n=e.tokens_meta.length;pO(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&pO(e,t[r].delimiters)}const BF={tokenize:Jce,postProcess:Qce};function eue(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const s=e.push("text","",0);s.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function mO(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],s=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,o=String.fromCharCode(a.marker),l=e.tokens[a.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?o+o:o,l.content="";const u=e.tokens[i.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?o+o:o,u.content="",s&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function tue(e){const t=e.tokens_meta,n=e.tokens_meta.length;mO(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&mO(e,t[r].delimiters)}const zF={tokenize:eue,postProcess:tue};function nue(e,t){let n,r,a,i,s="",o="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,h=e.posMax,p=e.pos+1,y=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(y<0)return!1;let v=y+1;if(v<h&&e.src.charCodeAt(v)===40){for(u=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Lr(n)&&n!==10));v++);if(v>=h)return!1;if(l=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(s=e.md.normalizeLink(a.str),e.md.validateLink(s)?v=a.pos:s="",l=v;v<h&&(n=e.src.charCodeAt(v),!(!Lr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&l!==v&&a.ok)for(o=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Lr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(u=!0),v++}if(u){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(l=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(l,v++):v=y+1):v=y+1,r||(r=e.src.slice(p,y)),i=e.env.references[Vx(r)],!i)return e.pos=d,!1;s=i.href,o=i.title}if(!t){e.pos=p,e.posMax=y;const b=e.push("link_open","a",1),w=[["href",s]];b.attrs=w,o&&w.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function rue(e,t){let n,r,a,i,s,o,l,u,d="";const h=e.pos,p=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const y=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<p&&e.src.charCodeAt(i)===40){for(i++;i<p&&(n=e.src.charCodeAt(i),!(!Lr(n)&&n!==10));i++);if(i>=p)return!1;for(u=i,o=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),o.ok&&(d=e.md.normalizeLink(o.str),e.md.validateLink(d)?i=o.pos:d=""),u=i;i<p&&(n=e.src.charCodeAt(i),!(!Lr(n)&&n!==10));i++);if(o=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<p&&u!==i&&o.ok)for(l=o.str,i=o.pos;i<p&&(n=e.src.charCodeAt(i),!(!Lr(n)&&n!==10));i++);else l="";if(i>=p||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<p&&e.src.charCodeAt(i)===91?(u=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(u,i++):i=v+1):i=v+1,a||(a=e.src.slice(y,v)),s=e.env.references[Vx(a)],!s)return e.pos=h,!1;d=s.href,l=s.title}if(!t){r=e.src.slice(y,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const w=e.push("image","img",0),x=[["src",d],["alt",""]];w.attrs=x,w.children=b,w.content=r,l&&x.push(["title",l])}return e.pos=i,e.posMax=p,!0}const aue=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,iue=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function sue(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const s=e.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const i=e.src.slice(r+1,n);if(iue.test(i)){const s=e.md.normalizeLink(i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}if(aue.test(i)){const s=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}return!1}function oue(e){return/^<a[>\s]/i.test(e)}function lue(e){return/^<\/a\s*>/i.test(e)}function cue(e){const t=e|32;return t>=97&&t<=122}function uue(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!cue(a))return!1;const i=e.src.slice(r).match($ce);if(!i)return!1;if(!t){const s=e.push("html_inline","",0);s.content=i[0],oue(s.content)&&e.linkLevel++,lue(s.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const due=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,fue=/^&([a-z][a-z0-9]{1,31});/i;function hue(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(due);if(i){if(!t){const s=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),o=e.push("text_special","",0);o.content=UT(s)?Nw(s):Nw(65533),o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(fue);if(i){const s=OF(i[0]);if(s!==i[0]){if(!t){const o=e.push("text_special","",0);o.content=s,o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function gO(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let s=0;s<n;s++){const o=e[s];if(i.push(0),(e[r].marker!==o.marker||a!==o.token-1)&&(r=s),a=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[o.marker][(o.open?3:0)+o.length%3];let u=r-i[r]-1,d=u;for(;u>l;u-=i[u]+1){const h=e[u];if(h.marker===o.marker&&h.open&&h.end<0){let p=!1;if((h.close||o.open)&&(h.length+o.length)%3===0&&(h.length%3!==0||o.length%3!==0)&&(p=!0),!p){const y=u>0&&!e[u-1].open?i[u-1]+1:0;i[s]=s-u+y,i[u]=y,o.open=!1,h.end=s,h.close=!1,d=-1,a=-2;break}}}d!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=d)}}function pue(e){const t=e.tokens_meta,n=e.tokens_meta.length;gO(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&gO(t[r].delimiters)}function mue(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const a2=[["text",Gce],["linkify",Kce],["newline",Zce],["escape",Yce],["backticks",Xce],["strikethrough",BF.tokenize],["emphasis",zF.tokenize],["link",nue],["image",rue],["autolink",sue],["html_inline",uue],["entity",hue]],i2=[["balance_pairs",pue],["strikethrough",BF.postProcess],["emphasis",zF.postProcess],["fragments_join",mue]];function W0(){this.ruler=new $i;for(let e=0;e<a2.length;e++)this.ruler.push(a2[e][0],a2[e][1]);this.ruler2=new $i;for(let e=0;e<i2.length;e++)this.ruler2.push(i2[e][0],i2[e][1])}W0.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let s=!1;if(e.level<a){for(let o=0;o<r;o++)if(e.level++,s=n[o](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,i[t]=e.pos};W0.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let s=!1;if(e.level<a){for(let o=0;o<n;o++)if(s=t[o](e,!1),s){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};W0.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),s=i.length;for(let o=0;o<s;o++)i[o](a)};W0.prototype.State=G0;function gue(e){const t={};e=e||{},t.src_Any=AF.source,t.src_Cc=NF.source,t.src_Z=IF.source,t.src_P=BT.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function DC(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function Wx(e){return Object.prototype.toString.call(e)}function yue(e){return Wx(e)==="[object String]"}function bue(e){return Wx(e)==="[object Object]"}function vue(e){return Wx(e)==="[object RegExp]"}function yO(e){return Wx(e)==="[object Function]"}function wue(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const UF={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function xue(e){return Object.keys(e||{}).reduce(function(t,n){return t||UF.hasOwnProperty(n)},!1)}const _ue={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},Sue="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Eue="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Cue(e){e.__index__=-1,e.__text_cache__=""}function kue(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function bO(){return function(e,t){t.normalize(e)}}function Rw(e){const t=e.re=gue(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(Sue),n.push(t.src_xn),t.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(e.__schemas__).forEach(function(o){const l=e.__schemas__[o];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[o]=u,bue(l)){vue(l.validate)?u.validate=kue(l.validate):yO(l.validate)?u.validate=l.validate:i(o,l),yO(l.normalize)?u.normalize=l.normalize:l.normalize?i(o,l):u.normalize=bO();return}if(yue(l)){a.push(o);return}i(o,l)}),a.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:bO()};const s=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(wue).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Cue(e)}function Tue(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function MC(e,t){const n=new Tue(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function os(e,t){if(!(this instanceof os))return new os(e,t);t||xue(e)&&(t=e,e={}),this.__opts__=DC({},UF,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=DC({},_ue,e),this.__compiled__={},this.__tlds__=Eue,this.__tlds_replaced__=!1,this.re={},Rw(this)}os.prototype.add=function(t,n){return this.__schemas__[t]=n,Rw(this),this};os.prototype.set=function(t){return this.__opts__=DC(this.__opts__,t),this};os.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,s,o,l,u,d;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(s=a.index+a[1].length,o=a.index+a[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=o))),this.__index__>=0};os.prototype.pretest=function(t){return this.re.pretest.test(t)};os.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};os.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(MC(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(MC(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};os.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,MC(this,0)):null};os.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Rw(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Rw(this),this)};os.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};os.prototype.onCompile=function(){};const Sh=2147483647,Ho=36,VT=1,qg=26,Aue=38,Nue=700,HF=72,qF=128,VF="-",Rue=/^xn--/,Iue=/[^\0-\x7F]/,jue=/[\x2E\u3002\uFF0E\uFF61]/g,Oue={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},s2=Ho-VT,qo=Math.floor,o2=String.fromCharCode;function Yc(e){throw new RangeError(Oue[e])}function Due(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function GF(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(jue,".");const a=e.split("."),i=Due(a,t).join(".");return r+i}function WF(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const Mue=e=>String.fromCodePoint(...e),Pue=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Ho},vO=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},KF=function(e,t,n){let r=0;for(e=n?qo(e/Nue):e>>1,e+=qo(e/t);e>s2*qg>>1;r+=Ho)e=qo(e/s2);return qo(r+(s2+1)*e/(e+Aue))},ZF=function(e){const t=[],n=e.length;let r=0,a=qF,i=HF,s=e.lastIndexOf(VF);s<0&&(s=0);for(let o=0;o<s;++o)e.charCodeAt(o)>=128&&Yc("not-basic"),t.push(e.charCodeAt(o));for(let o=s>0?s+1:0;o<n;){const l=r;for(let d=1,h=Ho;;h+=Ho){o>=n&&Yc("invalid-input");const p=Pue(e.charCodeAt(o++));p>=Ho&&Yc("invalid-input"),p>qo((Sh-r)/d)&&Yc("overflow"),r+=p*d;const y=h<=i?VT:h>=i+qg?qg:h-i;if(p<y)break;const v=Ho-y;d>qo(Sh/v)&&Yc("overflow"),d*=v}const u=t.length+1;i=KF(r-l,u,l==0),qo(r/u)>Sh-a&&Yc("overflow"),a+=qo(r/u),r%=u,t.splice(r++,0,a)}return String.fromCodePoint(...t)},YF=function(e){const t=[];e=WF(e);const n=e.length;let r=qF,a=0,i=HF;for(const l of e)l<128&&t.push(o2(l));const s=t.length;let o=s;for(s&&t.push(VF);o<n;){let l=Sh;for(const d of e)d>=r&&d<l&&(l=d);const u=o+1;l-r>qo((Sh-a)/u)&&Yc("overflow"),a+=(l-r)*u,r=l;for(const d of e)if(d<r&&++a>Sh&&Yc("overflow"),d===r){let h=a;for(let p=Ho;;p+=Ho){const y=p<=i?VT:p>=i+qg?qg:p-i;if(h<y)break;const v=h-y,b=Ho-y;t.push(o2(vO(y+v%b,0))),h=qo(v/b)}t.push(o2(vO(h,0))),i=KF(a,u,o===s),a=0,++o}++a,++r}return t.join("")},Fue=function(e){return GF(e,function(t){return Rue.test(t)?ZF(t.slice(4).toLowerCase()):t})},Lue=function(e){return GF(e,function(t){return Iue.test(t)?"xn--"+YF(t):t})},XF={version:"2.3.1",ucs2:{decode:WF,encode:Mue},decode:ZF,encode:YF,toASCII:Lue,toUnicode:Fue},$ue={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Bue={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},zue={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Uue={default:$ue,zero:Bue,commonmark:zue},Hue=/^(vbscript|javascript|file|data):/,que=/^data:image\/(gif|png|jpeg|webp);/;function Vue(e){const t=e.trim().toLowerCase();return Hue.test(t)?que.test(t):!0}const JF=["http:","https:","mailto:"];function Gue(e){const t=$T(e,!0);if(t.hostname&&(!t.protocol||JF.indexOf(t.protocol)>=0))try{t.hostname=XF.toASCII(t.hostname)}catch{}return V0(LT(t))}function Wue(e){const t=$T(e,!0);if(t.hostname&&(!t.protocol||JF.indexOf(t.protocol)>=0))try{t.hostname=XF.toUnicode(t.hostname)}catch{}return Kh(LT(t),Kh.defaultChars+"%")}function Ns(e,t){if(!(this instanceof Ns))return new Ns(e,t);t||zT(e)||(t=e||{},e="default"),this.inline=new W0,this.block=new Gx,this.core=new HT,this.renderer=new bp,this.linkify=new os,this.validateLink=Vue,this.normalizeLink=Gue,this.normalizeLinkText=Wue,this.utils=Zle,this.helpers=qx({},Qle),this.options={},this.configure(e),t&&this.set(t)}Ns.prototype.set=function(e){return qx(this.options,e),this};Ns.prototype.configure=function(e){const t=this;if(zT(e)){const n=e;if(e=Uue[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Ns.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Ns.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Ns.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Ns.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Ns.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Ns.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Ns.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const l2=new Ns({html:!1,linkify:!0,breaks:!0});function QF(e){return T.useMemo(()=>{var n;if(!e)return[];try{const r=l2.parse(e,{}),a=[];let i="",s=0;for(;s<r.length;){const o=r[s];if(o.type==="fence"){i&&(a.push(i),i="");const l=((n=o.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:l,code:o.content}),s++}else{const l=[];for(;s<r.length&&r[s].type!=="fence";)l.push(r[s]),s++;l.length>0&&(i+=l2.renderer.render(l,l2.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const Kue=({toolCall:e})=>{const[t,n]=T.useState(!0),r=()=>n(i=>!i),a=T.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return m.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",m.jsx("code",{className:"font-mono",children:e.toolName})]}),m.jsx(Vn,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?m.jsx(rl,{}):m.jsx(Hd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&m.jsx(g0,{lang:"json",code:a})]})},Zue=({toolResult:e})=>{const[t,n]=T.useState(!0),r=()=>n(s=>!s),a=T.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),i=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return m.jsxs("div",{className:At("my-2 p-2 border rounded-md text-xs",i?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsxs("span",{className:At("font-semibold",i?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",m.jsx("code",{className:"font-mono",children:e.toolName})]}),m.jsx(Vn,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?m.jsx(rl,{}):m.jsx(Hd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&m.jsx(g0,{lang:i?"text":"json",code:a})]})},Yue=({markdownContent:e})=>{const t=QF(e);return e!=null&&e.trim()?m.jsx("div",{children:t.map((n,r)=>{if(typeof n=="string")return m.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return m.jsx(g0,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},Xue=({response:e,toolCalls:t,toolResults:n,reasoning:r,isError:a,errorMessage:i,isFolded:s,toggleFold:o})=>{const[l,u]=T.useState(!0),d=T.useCallback(()=>u(b=>!b),[]),h=!!r,p=e&&(typeof e!="string"||e.trim().length>0),y=t&&t.length>0,v=n&&n.length>0;return s?m.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:o,children:[h?"[Reasoning] ":"",y?`[${t==null?void 0:t.length} Tool Call(s)] `:"",p&&typeof e=="string"?`"${e.substring(0,80)}${e.length>80?"...":""}"`:y||v||h?"":"[No text response]"]}):m.jsxs(m.Fragment,{children:[a&&i&&m.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[m.jsx("p",{className:"font-semibold",children:"Error:"}),m.jsx("p",{children:i})]}),h&&m.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[m.jsx(dk,{className:"h-3.5 w-3.5"})," Reasoning"]}),m.jsx(Vn,{tooltipText:l?"Show Reasoning":"Hide Reasoning",onClick:d,"aria-label":l?"Show reasoning":"Hide reasoning",icon:l?m.jsx(rl,{}):m.jsx(Hd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!l&&m.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1",children:r})]}),t==null?void 0:t.map((b,w)=>{try{const x=JSON.parse(b);return m.jsx(Kue,{toolCall:x},`call-${w}`)}catch(x){return console.error("Failed to parse tool call string:",x),m.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool call]"},`call-err-${w}`)}}),n==null?void 0:n.map((b,w)=>{try{const x=JSON.parse(b);return m.jsx(Zue,{toolResult:x},`res-${w}`)}catch(x){return console.error("Failed to parse tool result string:",x),m.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool result]"},`res-err-${w}`)}}),m.jsx(Yue,{markdownContent:e}),!p&&!y&&!v&&!h&&m.jsx("div",{className:"text-muted-foreground italic",children:"No response content."})]})},eL=gt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var C,k,I,R,j,L,B,Z,P,K,q,de;const[i,s]=T.useState(!1),{dbProviderConfigs:o,getAllAvailableModelDefsForProvider:l}=$n(dn(ae=>({dbProviderConfigs:ae.dbProviderConfigs,getAllAvailableModelDefsForProvider:ae.getAllAvailableModelDefsForProvider}))),u=T.useCallback(()=>s(ae=>!ae),[]),d=e.endedAt?TF(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=T.useMemo(()=>{var ie;const ae=(ie=e.metadata)==null?void 0:ie.modelId;if(!ae)return"Unknown Model";const{providerId:te,modelId:X}=sc(ae);if(!te||!X)return ae;const re=o.find(me=>me.id===te),D=(re==null?void 0:re.name)??te,Q=l(te).find(me=>me.id===X);return`${(Q==null?void 0:Q.name)??X} (${D})`},[(C=e.metadata)==null?void 0:C.modelId,o,l]),p=e.status==="COMPLETED",y=p||e.status==="ERROR",v=e.status==="ERROR",b=e.response&&(typeof e.response!="string"||e.response.trim().length>0),w=((k=e.metadata)==null?void 0:k.toolCalls)&&e.metadata.toolCalls.length>0,x=((I=e.metadata)==null?void 0:I.toolResults)&&e.metadata.toolResults.length>0,S=!!((R=e.metadata)!=null&&R.reasoning),E=b||w||x||S;return m.jsxs("div",{className:At("group/card relative rounded-lg border bg-card p-4 shadow-sm transition-colors hover:bg-muted/50",v?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&m.jsx(FT,{turnData:e.prompt,timestamp:e.startedAt,isAssistantComplete:p}),m.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 relative group/assistant",children:[m.jsx(ole,{displayModelName:h,timeAgo:d,responseContent:typeof e.response=="string"?e.response:null,isFolded:i,toggleFold:u,canFold:E,promptTokens:(j=e.metadata)==null?void 0:j.promptTokens,completionTokens:(L=e.metadata)==null?void 0:L.completionTokens,timeToFirstToken:(B=e.metadata)==null?void 0:B.timeToFirstToken,generationTime:(Z=e.metadata)==null?void 0:Z.generationTime}),m.jsx(Xue,{response:e.response,toolCalls:(P=e.metadata)==null?void 0:P.toolCalls,toolResults:(K=e.metadata)==null?void 0:K.toolResults,reasoning:(q=e.metadata)==null?void 0:q.reasoning,isError:v,errorMessage:(de=e.metadata)==null?void 0:de.error,isFolded:i,toggleFold:u})]}),y&&m.jsx(lle,{interactionId:e.id,onEdit:r,onRegenerate:t,onDelete:n})]})});eL.displayName="InteractionCard";const wO=(e,t,n,r)=>{if(typeof e=="string")return e.trim()?m.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e}},`html-${t}`):null;if(e.type==="code"){const a=e,i=a.lang?`language-${a.lang}`:"language-plaintext";return n?m.jsx(g0,{lang:a.lang,code:a.code,isStreaming:r},`code-${t}`):m.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[m.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:m.jsx("div",{className:"text-sm font-medium",children:a.lang?a.lang.toUpperCase():"CODE"})}),m.jsx("code",{className:At(i,"block p-4 font-mono text-sm leading-relaxed"),children:a.code})]},`pre-${t}`)}return null},Jue=({markdownContent:e,isStreaming:t=!1,className:n})=>{const{enableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a}=lr(dn(p=>({enableStreamingMarkdown:p.enableStreamingMarkdown,enableStreamingCodeBlockParsing:p.enableStreamingCodeBlockParsing}))),i=QF(r?e:null),[s,o]=T.useState([]),[l,u]=T.useState(null),d=T.useRef(0);T.useEffect(()=>{if(!r){o([]),u(e??null),d.current=0;return}const p=d.current,y=i.slice(p,i.length-1);if(y.length>0){const b=y.map((w,x)=>wO(w,p+x,a,!1)).filter(w=>w!==null);o(w=>[...w,...b]),d.current+=y.length}const v=i.length>0?i[i.length-1]:null;JSON.stringify(v)!==JSON.stringify(l)&&u(v),e||(o([]),u(null),d.current=0)},[i,r,a,l,e]);const h=T.useMemo(()=>!l||!r?null:wO(l,d.current,a,!0),[l,a,r]);return!(e!=null&&e.trim())&&s.length===0?m.jsx("div",{className:At("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."}):r?m.jsxs("div",{className:At(n),children:[s,h]}):m.jsx("pre",{className:At("whitespace-pre-wrap text-sm",n),children:e})},Que=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>m.jsx(Vn,{tooltipText:"Stop",onClick:e,"aria-label":a,icon:m.jsx(nV,{}),variant:r,size:n,className:t}),PC=gt.memo(({interactionId:e,onStop:t,className:n})=>{var v;const{interaction:r,interactionStatus:a}=qn(dn(b=>{const w=b.interactions.find(x=>x.id===e);return{interaction:w,interactionStatus:w==null?void 0:w.status}})),i=lr(b=>b.streamingRenderFPS),[s,o]=T.useState(""),l=T.useRef(null),u=T.useRef(0);T.useEffect(()=>{const b=1e3/i;let w=!0;const x=S=>{if(!w)return;if(qn.getState().streamingInteractionIds.includes(e)){if(S-u.current>=b){const C=qn.getState().activeStreamBuffers[e]??"";o(C),u.current=S}l.current=requestAnimationFrame(x)}else{const C=qn.getState().activeStreamBuffers[e]??"";o(C),l.current=null}};return l.current=requestAnimationFrame(x),()=>{w=!1,l.current&&(cancelAnimationFrame(l.current),l.current=null)}},[e,i]),T.useEffect(()=>{if(a&&a!=="STREAMING"){const b=qn.getState().activeStreamBuffers[e]??"";o(b),l.current&&(cancelAnimationFrame(l.current),l.current=null)}},[a,e]);const{dbProviderConfigs:d,getAllAvailableModelDefsForProvider:h}=$n(dn(b=>({dbProviderConfigs:b.dbProviderConfigs,getAllAvailableModelDefsForProvider:b.getAllAvailableModelDefsForProvider}))),p=T.useMemo(()=>{var I;const b=(I=r==null?void 0:r.metadata)==null?void 0:I.modelId;if(!b)return"Loading Model...";const{providerId:w,modelId:x}=sc(b);if(!w||!x)return b;const S=d.find(R=>R.id===w),E=(S==null?void 0:S.name)??w,k=h(w).find(R=>R.id===x);return`${(k==null?void 0:k.name)??x} (${E})`},[(v=r==null?void 0:r.metadata)==null?void 0:v.modelId,d,h]);if(!r)return console.warn(`StreamingInteractionCard: Interaction data for ${e} not found yet.`),m.jsxs("div",{className:At("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[m.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"})," ",m.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),m.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),m.jsx("div",{className:"h-16 bg-muted rounded w-full"})," "]})]});const y=()=>{t&&t(e)};return m.jsxs("div",{className:At("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&m.jsx(FT,{turnData:r.prompt,timestamp:r.startedAt,isAssistantComplete:!1}),m.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",p,")"]}),m.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),m.jsx(Jue,{markdownContent:s,isStreaming:!0})]}),t&&m.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200",children:m.jsx(Que,{onStop:y,"aria-label":"Stop Generation"})})]})});PC.displayName="StreamingInteractionCard";var ede=T.createContext(void 0);function vp(e){const t=T.useContext(ede);return e||t||"ltr"}function Vg(e,[t,n]){return Math.min(n,Math.max(t,e))}function tde(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var GT="ScrollArea",[tL,Z_e]=Ei(GT),[nde,Ps]=tL(GT),nL=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...s}=e,[o,l]=T.useState(null),[u,d]=T.useState(null),[h,p]=T.useState(null),[y,v]=T.useState(null),[b,w]=T.useState(null),[x,S]=T.useState(0),[E,C]=T.useState(0),[k,I]=T.useState(!1),[R,j]=T.useState(!1),L=Cn(t,Z=>l(Z)),B=vp(a);return m.jsx(nde,{scope:n,type:r,dir:B,scrollHideDelay:i,scrollArea:o,viewport:u,onViewportChange:d,content:h,onContentChange:p,scrollbarX:y,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:I,scrollbarY:b,onScrollbarYChange:w,scrollbarYEnabled:R,onScrollbarYEnabledChange:j,onCornerWidthChange:S,onCornerHeightChange:C,children:m.jsx(an.div,{dir:B,...s,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});nL.displayName=GT;var rL="ScrollAreaViewport",aL=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,s=Ps(rL,n),o=T.useRef(null),l=Cn(t,o,s.onViewportChange);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),m.jsx(an.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:m.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});aL.displayName=rL;var ol="ScrollAreaScrollbar",iL=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ps(ol,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=a,o=e.orientation==="horizontal";return T.useEffect(()=>(o?i(!0):s(!0),()=>{o?i(!1):s(!1)}),[o,i,s]),a.type==="hover"?m.jsx(rde,{...r,ref:t,forceMount:n}):a.type==="scroll"?m.jsx(ade,{...r,ref:t,forceMount:n}):a.type==="auto"?m.jsx(sL,{...r,ref:t,forceMount:n}):a.type==="always"?m.jsx(WT,{...r,ref:t}):null});iL.displayName=ol;var rde=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ps(ol,e.__scopeScrollArea),[i,s]=T.useState(!1);return T.useEffect(()=>{const o=a.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),s(!0)},d=()=>{l=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),m.jsx(ka,{present:n||i,children:m.jsx(sL,{"data-state":i?"visible":"hidden",...r,ref:t})})}),ade=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ps(ol,e.__scopeScrollArea),i=e.orientation==="horizontal",s=Zx(()=>l("SCROLL_END"),100),[o,l]=tde("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,a.scrollHideDelay,l]),T.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const p=()=>{const y=u[d];h!==y&&(l("SCROLL"),s()),h=y};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[a.viewport,i,l,s]),m.jsx(ka,{present:n||o!=="hidden",children:m.jsx(WT,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Wt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Wt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),sL=T.forwardRef((e,t)=>{const n=Ps(ol,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,s]=T.useState(!1),o=e.orientation==="horizontal",l=Zx(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?u:d)}},10);return Yh(n.viewport,l),Yh(n.content,l),m.jsx(ka,{present:r||i,children:m.jsx(WT,{"data-state":i?"visible":"hidden",...a,ref:t})})}),WT=T.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Ps(ol,e.__scopeScrollArea),i=T.useRef(null),s=T.useRef(0),[o,l]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=dL(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:p=>s.current=p};function h(p,y){return ude(p,s.current,o,y)}return n==="horizontal"?m.jsx(ide,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollLeft,y=xO(p,o,a.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollLeft=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollLeft=h(p,a.dir))}}):n==="vertical"?m.jsx(sde,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollTop,y=xO(p,o);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollTop=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollTop=h(p))}}):null}),ide=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ps(ol,e.__scopeScrollArea),[s,o]=T.useState(),l=T.useRef(null),u=Cn(t,l,i.onScrollbarXChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),m.jsx(lL,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Kx(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(p),hL(p,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:jw(s.paddingLeft),paddingEnd:jw(s.paddingRight)}})}})}),sde=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ps(ol,e.__scopeScrollArea),[s,o]=T.useState(),l=T.useRef(null),u=Cn(t,l,i.onScrollbarYChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),m.jsx(lL,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Kx(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(p),hL(p,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:jw(s.paddingTop),paddingEnd:jw(s.paddingBottom)}})}})}),[ode,oL]=tL(ol),lL=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...p}=e,y=Ps(ol,n),[v,b]=T.useState(null),w=Cn(t,L=>b(L)),x=T.useRef(null),S=T.useRef(""),E=y.viewport,C=r.content-r.viewport,k=Fa(d),I=Fa(l),R=Zx(h,10);function j(L){if(x.current){const B=L.clientX-x.current.left,Z=L.clientY-x.current.top;u({x:B,y:Z})}}return T.useEffect(()=>{const L=B=>{const Z=B.target;(v==null?void 0:v.contains(Z))&&k(B,C)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[E,v,C,k]),T.useEffect(I,[r,I]),Yh(v,R),Yh(y.content,R),m.jsx(ode,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Fa(i),onThumbPointerUp:Fa(s),onThumbPositionChange:I,onThumbPointerDown:Fa(o),children:m.jsx(an.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:Wt(e.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),x.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),j(L))}),onPointerMove:Wt(e.onPointerMove,j),onPointerUp:Wt(e.onPointerUp,L=>{const B=L.target;B.hasPointerCapture(L.pointerId)&&B.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=S.current,y.viewport&&(y.viewport.style.scrollBehavior=""),x.current=null})})})}),Iw="ScrollAreaThumb",cL=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=oL(Iw,e.__scopeScrollArea);return m.jsx(ka,{present:n||a.hasThumb,children:m.jsx(lde,{ref:t,...r})})}),lde=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Ps(Iw,n),s=oL(Iw,n),{onThumbPositionChange:o}=s,l=Cn(t,h=>s.onThumbChange(h)),u=T.useRef(void 0),d=Zx(()=>{u.current&&(u.current(),u.current=void 0)},100);return T.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(d(),!u.current){const y=dde(h,o);u.current=y,o()}};return o(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,d,o]),m.jsx(an.div,{"data-state":s.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Wt(e.onPointerDownCapture,h=>{const y=h.target.getBoundingClientRect(),v=h.clientX-y.left,b=h.clientY-y.top;s.onThumbPointerDown({x:v,y:b})}),onPointerUp:Wt(e.onPointerUp,s.onThumbPointerUp)})});cL.displayName=Iw;var KT="ScrollAreaCorner",uL=T.forwardRef((e,t)=>{const n=Ps(KT,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?m.jsx(cde,{...e,ref:t}):null});uL.displayName=KT;var cde=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Ps(KT,n),[i,s]=T.useState(0),[o,l]=T.useState(0),u=!!(i&&o);return Yh(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),l(d)}),Yh(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),s(d)}),u?m.jsx(an.div,{...r,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function jw(e){return e?parseInt(e,10):0}function dL(e,t){const n=e/t;return isNaN(n)?0:n}function Kx(e){const t=dL(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function ude(e,t,n,r="ltr"){const a=Kx(n),i=a/2,s=t||i,o=a-s,l=n.scrollbar.paddingStart+s,u=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return fL([l,u],h)(e)}function xO(e,t,n="ltr"){const r=Kx(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,s=t.content-t.viewport,o=i-r,l=n==="ltr"?[0,s]:[s*-1,0],u=Vg(e,l);return fL([0,s],[0,o])(u)}function fL(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function hL(e,t){return e>0&&e<t}var dde=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},s=n.left!==i.left,o=n.top!==i.top;(s||o)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Zx(e,t){const n=Fa(e),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Yh(e,t){const n=Fa(t);za(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var fde=nL,hde=aL,pde=uL;function rc({className:e,children:t,...n}){return m.jsxs(fde,{"data-slot":"scroll-area",className:At("relative",e),...n,children:[m.jsx(hde,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),m.jsx(mde,{}),m.jsx(pde,{})]})}function mde({className:e,orientation:t="vertical",...n}){return m.jsx(iL,{"data-slot":"scroll-area-scrollbar",orientation:t,className:At("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:m.jsx(cL,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function dr({className:e,...t}){return m.jsx("div",{"data-slot":"skeleton",className:At("bg-accent animate-pulse rounded-md",e),...t})}const _O=()=>m.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[m.jsx(eD,{className:"h-16 w-16 text-muted-foreground mb-4"}),m.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),m.jsx("p",{className:"text-muted-foreground max-w-md",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat."})]}),is=Is(js(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,isVfsModalOpen:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})},toggleVfsModal:t=>{e(n=>{n.isVfsModalOpen=t??!n.isVfsModalOpen})}}))),gde=".litechat/conversations",pL="/synced_repos";async function yde(e,t,n){n(t.id,"syncing");const r=rr(`${pL}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let s=!1;try{await e.promises.stat(Xo(r,".git")),s=!0}catch(o){if(o.code==="ENOENT")s=!1;else throw o}s?(Ye.info(`Pulling latest changes for "${t.name}"...`),await zx(r,i,a,{fsInstance:e}),Ye.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(Ye.info(`Cloning repository "${t.name}"...`),await mF(r,t.remoteUrl,i,a,{fsInstance:e}),Ye.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(s){console.error(`Failed to initialize/sync repository ${t.name}:`,s),n(t.id,"error")}}async function bde(e,t,n,r,a,i,s){var h,p;r(t.id,"syncing");const o=rr(`${pL}/${n.id}`),l=Xo(o,gde,`${t.id}.json`),u={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(Xo(o,".git"))}catch(x){if(x.code==="ENOENT"){Ye.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw x}Ye.info(`Pulling latest changes for "${n.name}"...`),await zx(o,d,u,{fsInstance:e});let y=null,v=null;try{const x=await of(l,{fsInstance:e}),S=new TextDecoder().decode(x);y=JSON.parse(S),v=(h=y==null?void 0:y.conversation)!=null&&h.updatedAt?new Date(y.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(x){x.code==="ENOENT"?console.log(`Conversation file ${l} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${x.message}`),Ye.warning(`Could not read remote version of conversation: ${x.message}`))}const b=t.updatedAt.getTime(),w=((p=t.lastSyncedAt)==null?void 0:p.getTime())??0;if(!y||b>(v??0)||b>w&&b>=(v??0)){Ye.info("Local changes detected. Pushing to remote...");const x=await xt.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...E}=t,C=JSON.stringify({conversation:E,interactions:x},null,2);await Ux(l,C,{fsInstance:e}),await OT(o,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await DT(o,d,u,{fsInstance:e}),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),Ye.success("Conversation synced successfully (pushed).")}else if(v&&v>b){Ye.info("Remote changes detected. Updating local conversation...");const x={...y.conversation,createdAt:new Date(y.conversation.createdAt),updatedAt:new Date(y.conversation.updatedAt),lastSyncedAt:new Date};await xt.saveConversation(x),await xt.deleteInteractionsForConversation(t.id);const S=y.interactions.map(E=>xt.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(S),i()===t.id&&s()==="conversation"&&await qn.getState().loadInteractions(t.id),r(t.id,"idle"),Ye.success("Conversation synced successfully (pulled).")}else Ye.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(y){console.error(`Sync failed for conversation ${t.id}:`,y),r(t.id,"error",y.message)}}const so=Is(js((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&Ye.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const s=i.parentId??r.rootId??"";a[s]||(a[s]=r.childrenMap[s]?[...r.childrenMap[s]]:[]),a[s].includes(i.id)||a[s].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const s=i.parentId??r.rootId??"";if(r.childrenMap[s]&&(r.childrenMap[s]=r.childrenMap[s].filter(o=>o!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const o=Object.values(r.nodes).filter(l=>l.parentId===a).map(l=>l.id);o.length>0&&t()._removeNodes(o),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),Ct.emit(St.VFS_CONTEXT_CHANGED,{vfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),Ct.emit(St.VFS_CONTEXT_CHANGED,{vfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,i)}));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),Ct.emit(St.VFS_CONTEXT_CHANGED,{vfsKey:null}),n!==null?t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,i)}):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async(n,r)=>{if(!n)throw console.warn("[VfsStore] initializeVFS called without a valid vfsKey."),new Error("VFS key cannot be empty.");const a=(r==null?void 0:r.force)===!0;if(!a){if(t().vfsKey!==n){const d=`UI Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().initializingKey!==null){const d=`UI Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().configuredVfsKey===n&&t().fs)return console.log(`[VfsStore] UI Initialization skipped for key "${n}" (already configured).`),e({loading:!1}),t().fs}const{_setLoading:i,_setError:s,_addNodes:o,_setFsInstance:l,_setConfiguredVfsKey:u}=t();console.log(`[VfsStore] Initializing VFS with key: ${n} (Forced: ${a})`),e({initializingKey:n}),a||(i(!0),s(null));try{const d=await Use(n);if(!d)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==n){const y=`UI Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${y}`),e({initializingKey:null,loading:!1}),new Error(y)}if(a)return console.log(`[VfsStore] Forced initialization complete for key: ${n}. Returning instance.`),e({initializingKey:null}),d;l(d),u(n),console.log(`[VfsStore] UI VFS instance configured for key: ${n}`);const h="vfs-root";let p=t().nodes[h];try{await d.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(y){if(y.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw y}if(!p||p.path!=="/"){const y=Date.now();p={id:h,parentId:null,name:"",path:"/",type:"folder",createdAt:y,lastModified:y},o([p]),console.log("[VfsStore] Root node added/updated in state.")}return e(y=>{y.rootId=p.id,y.currentParentId=p.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${p.id}`),await t().fetchNodes(p.id),d}catch(d){const h=`Failed to initialize VFS (${n}): ${d instanceof Error?d.message:String(d)}`;throw console.error(`[VfsStore] ${h}`,d),t().initializingKey===n&&(s(h),a||(l(null),u(null))),new Error(h)}finally{t().initializingKey===n&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d,initializingKey:h}=t();if(!s||u!==d||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!s}, Match: ${u===d}, Init: ${h}`);return}r(!0);try{const p=n?o[n]:o[l||""],y=p?p.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${y} (Key: ${u})`);const v=await MT(y,{fsInstance:s});console.log(`[VfsStore] Fetched ${v.length} entries for ${y}`);const b=n??l??"",w=new Set(v.map(k=>k.path)),E=(t().childrenMap[b]||[]).map(k=>t().nodes[k]).filter(Boolean).filter(k=>!w.has(k.path)).map(k=>k.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const C=v.map(k=>{const I=Object.values(t().nodes).find(j=>j.path===k.path),R=Date.now();return{id:(I==null?void 0:I.id)||wi(),parentId:n,name:k.name,path:k.path,type:k.isDirectory?"folder":"file",size:k.size,createdAt:(I==null?void 0:I.createdAt)??R,lastModified:k.lastModified.getTime(),mimeType:k.isDirectory?void 0:k.mimeType}});C.length>0&&(console.log(`[VfsStore] Adding/Updating ${C.length} nodes.`),i(C)),e(k=>{const I=C.map(R=>R.id);(!k.childrenMap[b]||JSON.stringify(k.childrenMap[b].sort())!==JSON.stringify(I.sort()))&&(k.childrenMap[b]=I,console.log(`[VfsStore] Updated childrenMap for parent: ${b}`))})}catch(p){console.error("Failed to fetch VFS nodes:",p),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=rr(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:s}=t();if(!s||t().vfsKey!==t().configuredVfsKey)return;const o=rr(n),l=r(o);l&&l.type==="folder"?(e(u=>{u.currentParentId=l.id}),t().childrenMap[l.id]||await a(l.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,_addNodes:u,configuredVfsKey:d,vfsKey:h}=t();if(!s||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const p=n?o[n]:o[l||""],y=p?p.path:"/",v=Ig(y,r.trim());try{throw await s.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(S){if(S.code!=="ENOENT")throw S}await bF(v,{fsInstance:s});const b=Date.now(),x={id:wi(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:b,lastModified:b};u([x])}catch(p){console.error("Failed to create directory:",p),i(p.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d}=t();if(!s||u!==d){i("Filesystem not ready.");return}a(!0);try{const h=n?o[n]:o[l||""],p=h?h.path:"/";await vF(Array.from(r),p,{fsInstance:s}),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:s,configuredVfsKey:o,vfsKey:l}=t();if(!s||o!==l){a("Filesystem not ready.");return}r(!0);try{const u=n.map(d=>t().nodes[d]).filter(Boolean);for(const d of u)await PT(d.path,d.type==="folder",{fsInstance:s});i(n)}catch(u){console.error("Failed to delete nodes:",u),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:s,nodes:o,fs:l,rootId:u,configuredVfsKey:d,vfsKey:h}=t();if(!l||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const p=o[n];if(!p){i("Item not found.");return}if(p.name!==r.trim()){a(!0);try{const y=p.parentId?o[p.parentId]:o[u||""],v=y?y.path:"/",b=Ig(v,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await wF(p.path,b,{fsInstance:l});const w={name:r.trim(),path:b,lastModified:Date.now()};s(n,w)}catch(y){console.error("Failed to rename item:",y),i(y.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:s,vfsKey:o}=t();if(!a||s!==o)return i("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return i("File not found."),null;try{const u=await of(l.path,{fsInstance:a}),d=l.mimeType||"application/octet-stream",h=new Blob([u],{type:d});return{name:l.name,blob:h}}catch(u){return console.error("Failed to download file:",u),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),ai=Is(js((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await xt.loadProjects();e({projects:n,isLoading:!1})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1})}},addProject:async n=>{const r=wi(),a=new Date,i=n.parentId??null,s=i?t().getProjectById(i):null,o=s?s.path:"/",l=Ig(o,n.name),u={id:r,createdAt:a,updatedAt:a,name:n.name,parentId:i,path:l,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,metadata:n.metadata??{}};e(d=>{d.projects.push(u),d.projects.sort((h,p)=>p.updatedAt.getTime()-h.updatedAt.getTime())});try{const d=t().getProjectById(r);if(d)await xt.saveProject(d),await so.getState().initializeVFS(r);else throw new Error("Failed to retrieve newly added project state");return r}catch(d){throw console.error("ProjectStore: Error adding project",d),e(h=>({error:"Failed to save new project",projects:h.projects.filter(p=>p.id!==r)})),d}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ProjectStore: Project ${n} not found for update.`);return}let i=a.path;if(r.name&&r.name!==a.name){const o=E0(a.path);i=Ig(o,r.name)}const s={...a,...r,path:i,updatedAt:new Date};e(o=>{const l=o.projects.findIndex(u=>u.id===n);l!==-1&&(o.projects[l]=s,o.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()))});try{await xt.saveProject(s)}catch(o){throw console.error("ProjectStore: Error updating project",o),e(l=>{const u=l.projects.findIndex(d=>d.id===n);u!==-1&&(l.projects[u]=a,l.projects.sort((d,h)=>h.updatedAt.getTime()-d.updatedAt.getTime())),l.error="Failed to save project update"}),o}},deleteProject:async n=>{const r=t().getProjectById(n);if(!r)return;const a=t().projects.filter(s=>s.parentId===n).map(s=>s.id),i=[n,...a];e(s=>({projects:s.projects.filter(o=>!i.includes(o.id))})),mn.getState()._unlinkConversationsFromProjects(i);try{await xt.deleteProject(n),Ye.success(`Project "${r.name}" deleted.`)}catch(s){throw console.error("ProjectStore: Error deleting project",s),e(o=>{const l=t().projects.filter(u=>i.includes(u.id)).concat(r);o.projects.push(...l),o.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),o.error="Failed to delete project"}),s}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getProjectHierarchy:n=>{const r=[];let a=n;for(;a;){const i=t().getProjectById(a);if(i)r.unshift({id:i.id,name:i.name}),a=i.parentId;else break}return r},getEffectiveProjectSettings:n=>{const r=lr.getState(),a=$n.getState().selectedModelId;let i=n,s={systemPrompt:null,modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null};for(;i;){const o=t().getProjectById(i);if(o)s.systemPrompt===null&&o.systemPrompt!==null&&o.systemPrompt!==void 0&&(s.systemPrompt=o.systemPrompt),s.modelId===null&&o.modelId!==null&&o.modelId!==void 0&&(s.modelId=o.modelId),s.temperature===null&&o.temperature!==null&&o.temperature!==void 0&&(s.temperature=o.temperature),s.maxTokens===null&&o.maxTokens!==null&&o.maxTokens!==void 0&&(s.maxTokens=o.maxTokens),s.topP===null&&o.topP!==null&&o.topP!==void 0&&(s.topP=o.topP),s.topK===null&&o.topK!==null&&o.topK!==void 0&&(s.topK=o.topK),s.presencePenalty===null&&o.presencePenalty!==null&&o.presencePenalty!==void 0&&(s.presencePenalty=o.presencePenalty),s.frequencyPenalty===null&&o.frequencyPenalty!==null&&o.frequencyPenalty!==void 0&&(s.frequencyPenalty=o.frequencyPenalty),i=o.parentId;else break}return s.systemPrompt===null&&(s.systemPrompt=r.globalSystemPrompt),s.modelId===null&&(s.modelId=a),s.temperature===null&&(s.temperature=r.temperature),s.maxTokens===null&&(s.maxTokens=r.maxTokens),s.topP===null&&(s.topP=r.topP),s.topK===null&&(s.topK=r.topK),s.presencePenalty===null&&(s.presencePenalty=r.presencePenalty),s.frequencyPenalty===null&&(s.frequencyPenalty=r.frequencyPenalty),s}}))),sv=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},vde=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${jC(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${jC(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,s,o,l,u,d,h;((a=r.prompt)!=null&&a.content||(o=(s=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:s.attachedFiles)!=null&&o.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(p=>{n+=`- ${p.name} (${p.type}, ${gw(p.size)}) ${p.source==="vfs"?`(VFS: ${p.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(u=r.metadata)!=null&&u.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((d=r.metadata)!=null&&d.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class mh{static async importConversation(t,n,r){try{const a=await t.text(),i=JSON.parse(a);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const s=i.conversation,o=i.interactions;if(!s.id||!s.title||!s.createdAt||!s.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:s.title||"Imported Chat",metadata:s.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(d=>xt.saveInteraction({...d,conversationId:l,id:wi()}));await Promise.all(u),await r(l,"conversation"),Ye.success("Conversation imported successfully.")}catch(a){throw console.error("ImportExportService: Error importing conversation",a),Ye.error(`Import failed: ${a instanceof Error?a.message:String(a)}`),a}}static async exportConversation(t,n){try{const r=mn.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const a=await xt.loadInteractionsForConversation(t);let i,s;const o=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const u=JSON.stringify({conversation:r,interactions:a},null,2);i=new Blob([u],{type:"application/json"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.json`}else if(n==="md"){const l=vde(r,a);i=new Blob([l],{type:"text/markdown"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");sv(i,s),Ye.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),Ye.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=ai.getState(),{conversations:a}=mn.getState(),i=r(t);if(!i)throw new Error("Project not found.");const s=async p=>{const y=n.find(x=>x.id===p);if(!y)throw new Error(`Project ${p} not found in state.`);const v=n.filter(x=>x.parentId===p),b=a.filter(x=>x.projectId===p),w=[];for(const x of v)w.push(await s(x.id));for(const x of b){const S=await xt.loadInteractionsForConversation(x.id);w.push({conversation:x,interactions:S})}return{project:y,children:w}},o=await s(t),l=JSON.stringify(o,null,2),u=new Blob([l],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;sv(u,h),Ye.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),Ye.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=mn.getState().conversations,n=[];for(const s of t){const o=await xt.loadInteractionsForConversation(s.id);n.push({conversation:s,interactions:o})}const r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;sv(a,i),Ye.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),Ye.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}static async exportFullConfiguration(t){try{const n=await xt.getAllDataForExport(t),r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_full_export_${new Date().toISOString().split("T")[0]}.json`;sv(a,i),Ye.success("Full configuration exported successfully.")}catch(n){throw console.error("ImportExportService: Error exporting full configuration",n),Ye.error(`Full export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async importFullConfiguration(t,n){try{const r=await t.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.version)throw new Error("Invalid import file format. Missing version or basic structure.");await xt.importAllData(a,n),Ye.success("Configuration imported successfully. Reloading application..."),setTimeout(()=>window.location.reload(),1500)}catch(r){throw console.error("ImportExportService: Error importing full configuration",r),Ye.error(`Full import failed: ${r instanceof Error?r.message:String(r)}`),r}}}const SO="sync_repos",wde="/synced_repos",mn=Is(js((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{console.log("[ConversationStore] Ensuring Sync VFS is ready...");try{const n=await so.getState().initializeVFS(SO,{force:!0});return console.log(`[ConversationStore] Sync VFS ready for key ${SO}.`),n}catch(n){throw console.error("[ConversationStore] Failed to ensure Sync VFS:",n),Ye.error(`Filesystem error for sync: ${n instanceof Error?n.message:String(n)}`),n}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await ai.getState().loadProjects();const[n,r]=await Promise.all([xt.loadConversations(),xt.loadSyncRepos()]),a={};n.forEach(i=>{if(i.syncRepoId){const s=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,o=i.updatedAt instanceof Date?i.updatedAt.getTime():null;s?o&&o>s?a[i.id]="needs-sync":a[i.id]="idle":a[i.id]="needs-sync"}else a[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:a,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=wi(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(s=>{s.conversations.some(o=>o.id===i.id)||(s.conversations.unshift(i),s.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const s=t().getConversationById(r);if(s)await xt.saveConversation(s),Ct.emit(St.CONVERSATION_ADDED,{conversation:s});else throw new Error("Failed to retrieve newly added conversation state");return r}catch(s){throw console.error("ConversationStore: Error adding conversation",s),e(o=>({error:"Failed to save new conversation",conversations:o.conversations.filter(l=>l.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([l])=>l!==r))})),s}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){const l=s.conversations[o].metadata??{},u=r.metadata??{},d={...l,...u};Object.assign(s.conversations[o],{...r,metadata:d,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),p=s.conversations[o].lastSyncedAt instanceof Date?s.conversations[o].lastSyncedAt.getTime():null,y=s.conversations[o].updatedAt.getTime();"syncRepoId"in r?s.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&s.conversations[o].syncRepoId&&s.conversationSyncStatus[n]==="idle"&&(!p||y>p)&&(s.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const s=JSON.parse(JSON.stringify(i));await xt.saveConversation(s),Ct.emit(St.CONVERSATION_UPDATED,{conversationId:n,updates:r})}catch(s){throw console.error("ConversationStore: Error updating conversation",s),e(o=>{const l=o.conversations.findIndex(u=>u.id===n);if(l!==-1){o.conversations[l]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,d=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&u&&d<=u?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update"}),s}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){s.conversations[o]=a;const l=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,u=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&l&&u<=l?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(s=>s.id===n);if(i){e(s=>({conversations:s.conversations.filter(o=>o.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([o])=>o!==n))}));try{await xt.deleteConversation(n),await xt.deleteInteractionsForConversation(n),Ct.emit(St.CONVERSATION_DELETED,{conversationId:n}),r===n&&a==="conversation"&&(await qn.getState().setCurrentConversationId(null),Ct.emit(St.CONTEXT_CHANGED,{selectedItemId:null,selectedItemType:null}))}catch(s){throw console.error("ConversationStore: Error deleting conversation",s),e(o=>{if(i){o.conversations.push(i);const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,u=i.updatedAt.getTime();o.conversationSyncStatus[n]=i.syncRepoId&&l&&u<=l?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(o.selectedItemId=n,o.selectedItemType="conversation"),o.error="Failed to delete conversation"}),s}}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await qn.getState().setCurrentConversationId(r==="conversation"?n:null),Ct.emit(St.CONTEXT_CHANGED,{selectedItemId:n,selectedItemType:r}),r==="conversation"?Ct.emit(St.CONVERSATION_SELECTED,{conversationId:n}):r==="project"?Ct.emit(St.PROJECT_SELECTED,{projectId:n}):(Ct.emit(St.CONVERSATION_SELECTED,{conversationId:null}),Ct.emit(St.PROJECT_SELECTED,{projectId:null}))):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{await mh.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await mh.exportConversation(n,r)},exportProject:async n=>{await mh.exportProject(n)},exportAllConversations:async()=>{await mh.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await xt.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=wi(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(s=>{s.syncRepos.push(i)});try{const s=t().syncRepos.find(o=>o.id===r);if(s){const o=JSON.parse(JSON.stringify(s));await xt.saveSyncRepo(o),Ct.emit(St.SYNC_REPO_CHANGED,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");return Ye.success(`Sync repository "${i.name}" added.`),r}catch(s){throw console.error("ConversationStore: Error adding sync repo",s),e(o=>({error:"Failed to save sync repository",syncRepos:o.syncRepos.filter(l=>l.id!==r)})),s}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(s=>s.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&Object.assign(s.syncRepos[o],{...r,branch:r.branch||s.syncRepos[o].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(s=>s.id===n);if(i)try{const s=JSON.parse(JSON.stringify(i));await xt.saveSyncRepo(s),Ct.emit(St.SYNC_REPO_CHANGED,{repoId:n,action:"updated"}),Ye.success(`Sync repository "${i.name}" updated.`)}catch(s){throw console.error("ConversationStore: Error updating sync repo",s),e(o=>{const l=o.syncRepos.findIndex(u=>u.id===n);l!==-1&&(o.syncRepos[l]=a),o.error="Failed to save sync repository update"}),s}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&(s.syncRepos[o]=a),s.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(s=>s.id===n);if(!r)return;const a=rr(`${wde}/${n}`);let i;try{i=await t()._ensureSyncVfsReady()}catch{return}e(s=>({syncRepos:s.syncRepos.filter(o=>o.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(s.repoInitializationStatus).filter(([o])=>o!==n))}));try{await xt.deleteSyncRepo(n),Ct.emit(St.SYNC_REPO_CHANGED,{repoId:n,action:"deleted"}),Ye.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await PT(a,!0,{fsInstance:i}),Ye.info(`Removed local sync folder for "${r.name}".`)}catch(s){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,s),s.code!=="ENOENT"&&Ye.warning(`Failed to remove local sync folder: ${s.message}`)}}catch(s){throw console.error("ConversationStore: Error deleting sync repo",s),e(o=>{r&&o.syncRepos.push(r),o.error="Failed to delete sync repository"}),s}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),Ye.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)}),Ct.emit(St.CONVERSATION_SYNC_STATUS_CHANGED,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r}),Ct.emit(St.REPO_INIT_STATUS_CHANGED,{repoId:n,status:r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){Ye.error("Sync repsitory configuration not found.");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await yde(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){Ye.error("Conversation not found for syncing.");return}if(!r.syncRepoId){Ye.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(o=>o.id===r.syncRepoId);if(!a){Ye.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let i;try{i=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await bde(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const s=t().getConversationById(n);s&&e(o=>{const l=o.conversations.findIndex(u=>u.id===n);l!==-1&&(o.conversations[l]=s)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const s=t().getConversationById(r);if(!s){console.warn("Cannot update tool settings: Selected conversation not found.");return}const o=s.metadata??{},l={...o};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(o)||!s.metadata)&&await i(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(a=>{a.conversations=a.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})}})));function jn({className:e,type:t,...n}){return m.jsx("input",{type:t,"data-slot":"input",className:At("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function Yx(e){const t=e+"CollectionProvider",[n,r]=Ei(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:w,children:x}=b,S=gt.useRef(null),E=gt.useRef(new Map).current;return m.jsx(a,{scope:w,itemMap:E,collectionRef:S,children:x})};s.displayName=t;const o=e+"CollectionSlot",l=su(o),u=gt.forwardRef((b,w)=>{const{scope:x,children:S}=b,E=i(o,x),C=Cn(w,E.collectionRef);return m.jsx(l,{ref:C,children:S})});u.displayName=o;const d=e+"CollectionItemSlot",h="data-radix-collection-item",p=su(d),y=gt.forwardRef((b,w)=>{const{scope:x,children:S,...E}=b,C=gt.useRef(null),k=Cn(w,C),I=i(d,x);return gt.useEffect(()=>(I.itemMap.set(C,{ref:C,...E}),()=>void I.itemMap.delete(C))),m.jsx(p,{[h]:"",ref:k,children:S})});y.displayName=d;function v(b){const w=i(e+"CollectionConsumer",b);return gt.useCallback(()=>{const S=w.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((I,R)=>E.indexOf(I.ref.current)-E.indexOf(R.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:s,Slot:u,ItemSlot:y},v,r]}var c2=0;function Xx(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??EO()),document.body.insertAdjacentElement("beforeend",e[1]??EO()),c2++,()=>{c2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),c2--}},[])}function EO(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var u2="focusScope.autoFocusOnMount",d2="focusScope.autoFocusOnUnmount",CO={bubbles:!1,cancelable:!0},xde="FocusScope",K0=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...s}=e,[o,l]=T.useState(null),u=Fa(a),d=Fa(i),h=T.useRef(null),p=Cn(t,b=>l(b)),y=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(E){if(y.paused||!o)return;const C=E.target;o.contains(C)?h.current=C:Zc(h.current,{select:!0})},w=function(E){if(y.paused||!o)return;const C=E.relatedTarget;C!==null&&(o.contains(C)||Zc(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&Zc(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",w);const S=new MutationObserver(x);return o&&S.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",w),S.disconnect()}}},[r,o,y.paused]),T.useEffect(()=>{if(o){TO.add(y);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(u2,CO);o.addEventListener(u2,u),o.dispatchEvent(x),x.defaultPrevented||(_de(Tde(mL(o)),{select:!0}),document.activeElement===b&&Zc(o))}return()=>{o.removeEventListener(u2,u),setTimeout(()=>{const x=new CustomEvent(d2,CO);o.addEventListener(d2,d),o.dispatchEvent(x),x.defaultPrevented||Zc(b??document.body,{select:!0}),o.removeEventListener(d2,d),TO.remove(y)},0)}}},[o,u,d,y]);const v=T.useCallback(b=>{if(!n&&!r||y.paused)return;const w=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(w&&x){const S=b.currentTarget,[E,C]=Sde(S);E&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&Zc(E,{select:!0})):b.shiftKey&&x===E&&(b.preventDefault(),n&&Zc(C,{select:!0})):x===S&&b.preventDefault()}},[n,r,y.paused]);return m.jsx(an.div,{tabIndex:-1,...s,ref:p,onKeyDown:v})});K0.displayName=xde;function _de(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Zc(r,{select:t}),document.activeElement!==n)return}function Sde(e){const t=mL(e),n=kO(t,e),r=kO(t.reverse(),e);return[n,r]}function mL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function kO(e,t){for(const n of e)if(!Ede(n,{upTo:t}))return n}function Ede(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Cde(e){return e instanceof HTMLInputElement&&"select"in e}function Zc(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Cde(e)&&t&&e.select()}}var TO=kde();function kde(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=AO(e,t),e.unshift(t)},remove(t){var n;e=AO(e,t),(n=e[0])==null||n.resume()}}}function AO(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Tde(e){return e.filter(t=>t.tagName!=="A")}function Jx(e){const t=T.useRef({value:e,previous:e});return T.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Ade=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ih=new WeakMap,ov=new WeakMap,lv={},f2=0,gL=function(e){return e&&(e.host||gL(e.parentNode))},Nde=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=gL(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Rde=function(e,t,n,r){var a=Nde(t,Array.isArray(e)?e:[e]);lv[n]||(lv[n]=new WeakMap);var i=lv[n],s=[],o=new Set,l=new Set(a),u=function(h){!h||o.has(h)||(o.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(o.has(p))d(p);else try{var y=p.getAttribute(r),v=y!==null&&y!=="false",b=(ih.get(p)||0)+1,w=(i.get(p)||0)+1;ih.set(p,b),i.set(p,w),s.push(p),b===1&&v&&ov.set(p,!0),w===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return d(t),o.clear(),f2++,function(){s.forEach(function(h){var p=ih.get(h)-1,y=i.get(h)-1;ih.set(h,p),i.set(h,y),p||(ov.has(h)||h.removeAttribute(r),ov.delete(h)),y||h.removeAttribute(n)}),f2--,f2||(ih=new WeakMap,ih=new WeakMap,ov=new WeakMap,lv={})}},Qx=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Ade(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Rde(r,a,n,"aria-hidden")):function(){return null}},Bo=function(){return Bo=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bo.apply(this,arguments)};function yL(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Ide(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var kv="right-scroll-bar-position",Tv="width-before-scroll-bar",jde="with-scroll-bars-hidden",Ode="--removed-body-scroll-bar-size";function h2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Dde(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Mde=typeof window<"u"?T.useLayoutEffect:T.useEffect,NO=new WeakMap;function Pde(e,t){var n=Dde(null,function(r){return e.forEach(function(a){return h2(a,r)})});return Mde(function(){var r=NO.get(n);if(r){var a=new Set(r),i=new Set(e),s=n.current;a.forEach(function(o){i.has(o)||h2(o,null)}),i.forEach(function(o){a.has(o)||h2(o,s)})}NO.set(n,e)},[e]),n}function Fde(e){return e}function Lde(e,t){t===void 0&&(t=Fde);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(i),s=n}var l=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return a}function $de(e){e===void 0&&(e={});var t=Lde(null);return t.options=Bo({async:!0,ssr:!1},e),t}var bL=function(e){var t=e.sideCar,n=yL(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,Bo({},n))};bL.isSideCarExport=!0;function Bde(e,t){return e.useMedium(t),bL}var vL=$de(),p2=function(){},e1=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:p2,onWheelCapture:p2,onTouchMoveCapture:p2}),a=r[0],i=r[1],s=e.forwardProps,o=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,y=e.noIsolation,v=e.inert,b=e.allowPinchZoom,w=e.as,x=w===void 0?"div":w,S=e.gapMode,E=yL(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,k=Pde([n,t]),I=Bo(Bo({},E),a);return T.createElement(T.Fragment,null,d&&T.createElement(C,{sideCar:vL,removeScrollBar:u,shards:h,noIsolation:y,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:S}),s?T.cloneElement(T.Children.only(o),Bo(Bo({},I),{ref:k})):T.createElement(x,Bo({},I,{className:l,ref:k}),o))});e1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};e1.classNames={fullWidth:Tv,zeroRight:kv};var zde=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ude(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=zde();return t&&e.setAttribute("nonce",t),e}function Hde(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function qde(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Vde=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Ude())&&(Hde(t,n),qde(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Gde=function(){var e=Vde();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},wL=function(){var e=Gde(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Wde={left:0,top:0,right:0,gap:0},m2=function(e){return parseInt(e||"",10)||0},Kde=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[m2(n),m2(r),m2(a)]},Zde=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Wde;var t=Kde(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Yde=wL(),Eh="data-scroll-locked",Xde=function(e,t,n,r){var a=e.left,i=e.top,s=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(jde,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Eh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kv,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Tv,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(kv," .").concat(kv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Tv," .").concat(Tv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Eh,`] {
    `).concat(Ode,": ").concat(o,`px;
  }
`)},RO=function(){var e=parseInt(document.body.getAttribute(Eh)||"0",10);return isFinite(e)?e:0},Jde=function(){T.useEffect(function(){return document.body.setAttribute(Eh,(RO()+1).toString()),function(){var e=RO()-1;e<=0?document.body.removeAttribute(Eh):document.body.setAttribute(Eh,e.toString())}},[])},Qde=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Jde();var i=T.useMemo(function(){return Zde(a)},[a]);return T.createElement(Yde,{styles:Xde(i,!t,a,n?"":"!important")})},FC=!1;if(typeof window<"u")try{var cv=Object.defineProperty({},"passive",{get:function(){return FC=!0,!0}});window.addEventListener("test",cv,cv),window.removeEventListener("test",cv,cv)}catch{FC=!1}var sh=FC?{passive:!1}:!1,efe=function(e){return e.tagName==="TEXTAREA"},xL=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!efe(e)&&n[t]==="visible")},tfe=function(e){return xL(e,"overflowY")},nfe=function(e){return xL(e,"overflowX")},IO=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=_L(e,r);if(a){var i=SL(e,r),s=i[1],o=i[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},rfe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},afe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},_L=function(e,t){return e==="v"?tfe(t):nfe(t)},SL=function(e,t){return e==="v"?rfe(t):afe(t)},ife=function(e,t){return e==="h"&&t==="rtl"?-1:1},sfe=function(e,t,n,r,a){var i=ife(e,window.getComputedStyle(t).direction),s=i*r,o=n.target,l=t.contains(o),u=!1,d=s>0,h=0,p=0;do{var y=SL(e,o),v=y[0],b=y[1],w=y[2],x=b-w-i*v;(v||x)&&_L(e,o)&&(h+=x,p+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&Math.abs(h)<1||!d&&Math.abs(p)<1)&&(u=!0),u},uv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},jO=function(e){return[e.deltaX,e.deltaY]},OO=function(e){return e&&"current"in e?e.current:e},ofe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},lfe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},cfe=0,oh=[];function ufe(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),a=T.useState(cfe++)[0],i=T.useState(wL)[0],s=T.useRef(e);T.useEffect(function(){s.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=Ide([e.lockRef.current],(e.shards||[]).map(OO),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=T.useCallback(function(b,w){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var x=uv(b),S=n.current,E="deltaX"in b?b.deltaX:S[0]-x[0],C="deltaY"in b?b.deltaY:S[1]-x[1],k,I=b.target,R=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in b&&R==="h"&&I.type==="range")return!1;var j=IO(R,I);if(!j)return!0;if(j?k=R:(k=R==="v"?"h":"v",j=IO(R,I)),!j)return!1;if(!r.current&&"changedTouches"in b&&(E||C)&&(r.current=k),!k)return!0;var L=r.current||k;return sfe(L,w,b,L==="h"?E:C)},[]),l=T.useCallback(function(b){var w=b;if(!(!oh.length||oh[oh.length-1]!==i)){var x="deltaY"in w?jO(w):uv(w),S=t.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&ofe(k.delta,x)})[0];if(S&&S.should){w.cancelable&&w.preventDefault();return}if(!S){var E=(s.current.shards||[]).map(OO).filter(Boolean).filter(function(k){return k.contains(w.target)}),C=E.length>0?o(w,E[0]):!s.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),u=T.useCallback(function(b,w,x,S){var E={name:b,delta:w,target:x,should:S,shadowParent:dfe(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),d=T.useCallback(function(b){n.current=uv(b),r.current=void 0},[]),h=T.useCallback(function(b){u(b.type,jO(b),b.target,o(b,e.lockRef.current))},[]),p=T.useCallback(function(b){u(b.type,uv(b),b.target,o(b,e.lockRef.current))},[]);T.useEffect(function(){return oh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,sh),document.addEventListener("touchmove",l,sh),document.addEventListener("touchstart",d,sh),function(){oh=oh.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,sh),document.removeEventListener("touchmove",l,sh),document.removeEventListener("touchstart",d,sh)}},[]);var y=e.removeScrollBar,v=e.inert;return T.createElement(T.Fragment,null,v?T.createElement(i,{styles:lfe(a)}):null,y?T.createElement(Qde,{gapMode:e.gapMode}):null)}function dfe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ffe=Bde(vL,ufe);var Z0=T.forwardRef(function(e,t){return T.createElement(e1,Bo({},e,{ref:t,sideCar:ffe}))});Z0.classNames=e1.classNames;var hfe=[" ","Enter","ArrowUp","ArrowDown"],pfe=[" ","Enter"],$d="Select",[t1,n1,mfe]=Yx($d),[wp,Y_e]=Ei($d,[mfe,Cu]),r1=Cu(),[gfe,Du]=wp($d),[yfe,bfe]=wp($d),EL=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:s,defaultValue:o,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:p,required:y,form:v}=e,b=r1(t),[w,x]=T.useState(null),[S,E]=T.useState(null),[C,k]=T.useState(!1),I=vp(u),[R,j]=ro({prop:r,defaultProp:a??!1,onChange:i,caller:$d}),[L,B]=ro({prop:s,defaultProp:o,onChange:l,caller:$d}),Z=T.useRef(null),P=w?v||!!w.closest("form"):!0,[K,q]=T.useState(new Set),de=Array.from(K).map(ae=>ae.props.value).join(";");return m.jsx(hx,{...b,children:m.jsxs(gfe,{required:y,scope:t,trigger:w,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:Za(),value:L,onValueChange:B,open:R,onOpenChange:j,dir:I,triggerPointerDownPosRef:Z,disabled:p,children:[m.jsx(t1.Provider,{scope:t,children:m.jsx(yfe,{scope:e.__scopeSelect,onNativeOptionAdd:T.useCallback(ae=>{q(te=>new Set(te).add(ae))},[]),onNativeOptionRemove:T.useCallback(ae=>{q(te=>{const X=new Set(te);return X.delete(ae),X})},[]),children:n})}),P?m.jsxs(GL,{"aria-hidden":!0,required:y,tabIndex:-1,name:d,autoComplete:h,value:L,onChange:ae=>B(ae.target.value),disabled:p,form:v,children:[L===void 0?m.jsx("option",{value:""}):null,Array.from(K)]},de):null]})})};EL.displayName=$d;var CL="SelectTrigger",kL=T.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=r1(n),s=Du(CL,n),o=s.disabled||r,l=Cn(t,s.onTriggerChange),u=n1(n),d=T.useRef("touch"),[h,p,y]=KL(b=>{const w=u().filter(E=>!E.disabled),x=w.find(E=>E.value===s.value),S=ZL(w,b,x);S!==void 0&&s.onValueChange(S.value)}),v=b=>{o||(s.onOpenChange(!0),y()),b&&(s.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return m.jsx(p0,{asChild:!0,...i,children:m.jsx(an.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":WL(s.value)?"":void 0,...a,ref:l,onClick:Wt(a.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&v(b)}),onPointerDown:Wt(a.onPointerDown,b=>{d.current=b.pointerType;const w=b.target;w.hasPointerCapture(b.pointerId)&&w.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:Wt(a.onKeyDown,b=>{const w=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&p(b.key),!(w&&b.key===" ")&&hfe.includes(b.key)&&(v(),b.preventDefault())})})})});kL.displayName=CL;var TL="SelectValue",AL=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:s="",...o}=e,l=Du(TL,n),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,h=Cn(t,l.onValueNodeChange);return za(()=>{u(d)},[u,d]),m.jsx(an.span,{...o,ref:h,style:{pointerEvents:"none"},children:WL(l.value)?m.jsx(m.Fragment,{children:s}):i})});AL.displayName=TL;var vfe="SelectIcon",NL=T.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return m.jsx(an.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});NL.displayName=vfe;var wfe="SelectPortal",RL=e=>m.jsx(ap,{asChild:!0,...e});RL.displayName=wfe;var Bd="SelectContent",IL=T.forwardRef((e,t)=>{const n=Du(Bd,e.__scopeSelect),[r,a]=T.useState();if(za(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?zo.createPortal(m.jsx(jL,{scope:e.__scopeSelect,children:m.jsx(t1.Slot,{scope:e.__scopeSelect,children:m.jsx("div",{children:e.children})})}),i):null}return m.jsx(OL,{...e,ref:t})});IL.displayName=Bd;var Vs=10,[jL,Mu]=wp(Bd),xfe="SelectContentImpl",_fe=su("SelectContent.RemoveScroll"),OL=T.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:y,sticky:v,hideWhenDetached:b,avoidCollisions:w,...x}=e,S=Du(Bd,n),[E,C]=T.useState(null),[k,I]=T.useState(null),R=Cn(t,Ae=>C(Ae)),[j,L]=T.useState(null),[B,Z]=T.useState(null),P=n1(n),[K,q]=T.useState(!1),de=T.useRef(!1);T.useEffect(()=>{if(E)return Qx(E)},[E]),Xx();const ae=T.useCallback(Ae=>{const[Re,...ke]=P().map(Le=>Le.ref.current),[Fe]=ke.slice(-1),et=document.activeElement;for(const Le of Ae)if(Le===et||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Re&&k&&(k.scrollTop=0),Le===Fe&&k&&(k.scrollTop=k.scrollHeight),Le==null||Le.focus(),document.activeElement!==et))return},[P,k]),te=T.useCallback(()=>ae([j,E]),[ae,j,E]);T.useEffect(()=>{K&&te()},[K,te]);const{onOpenChange:X,triggerPointerDownPosRef:re}=S;T.useEffect(()=>{if(E){let Ae={x:0,y:0};const Re=Fe=>{var et,Le;Ae={x:Math.abs(Math.round(Fe.pageX)-(((et=re.current)==null?void 0:et.x)??0)),y:Math.abs(Math.round(Fe.pageY)-(((Le=re.current)==null?void 0:Le.y)??0))}},ke=Fe=>{Ae.x<=10&&Ae.y<=10?Fe.preventDefault():E.contains(Fe.target)||X(!1),document.removeEventListener("pointermove",Re),re.current=null};return re.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",ke,{capture:!0})}}},[E,X,re]),T.useEffect(()=>{const Ae=()=>X(!1);return window.addEventListener("blur",Ae),window.addEventListener("resize",Ae),()=>{window.removeEventListener("blur",Ae),window.removeEventListener("resize",Ae)}},[X]);const[D,J]=KL(Ae=>{const Re=P().filter(et=>!et.disabled),ke=Re.find(et=>et.ref.current===document.activeElement),Fe=ZL(Re,Ae,ke);Fe&&setTimeout(()=>Fe.ref.current.focus())}),Q=T.useCallback((Ae,Re,ke)=>{const Fe=!de.current&&!ke;(S.value!==void 0&&S.value===Re||Fe)&&(L(Ae),Fe&&(de.current=!0))},[S.value]),ie=T.useCallback(()=>E==null?void 0:E.focus(),[E]),me=T.useCallback((Ae,Re,ke)=>{const Fe=!de.current&&!ke;(S.value!==void 0&&S.value===Re||Fe)&&Z(Ae)},[S.value]),ve=r==="popper"?LC:DL,Me=ve===LC?{side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:y,sticky:v,hideWhenDetached:b,avoidCollisions:w}:{};return m.jsx(jL,{scope:n,content:E,viewport:k,onViewportChange:I,itemRefCallback:Q,selectedItem:j,onItemLeave:ie,itemTextRefCallback:me,focusSelectedItem:te,selectedItemText:B,position:r,isPositioned:K,searchRef:D,children:m.jsx(Z0,{as:_fe,allowPinchZoom:!0,children:m.jsx(K0,{asChild:!0,trapped:S.open,onMountAutoFocus:Ae=>{Ae.preventDefault()},onUnmountAutoFocus:Wt(a,Ae=>{var Re;(Re=S.trigger)==null||Re.focus({preventScroll:!0}),Ae.preventDefault()}),children:m.jsx(tp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:Ae=>Ae.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:m.jsx(ve,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Ae=>Ae.preventDefault(),...x,...Me,onPlaced:()=>q(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Wt(x.onKeyDown,Ae=>{const Re=Ae.ctrlKey||Ae.altKey||Ae.metaKey;if(Ae.key==="Tab"&&Ae.preventDefault(),!Re&&Ae.key.length===1&&J(Ae.key),["ArrowUp","ArrowDown","Home","End"].includes(Ae.key)){let Fe=P().filter(et=>!et.disabled).map(et=>et.ref.current);if(["ArrowUp","End"].includes(Ae.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ae.key)){const et=Ae.target,Le=Fe.indexOf(et);Fe=Fe.slice(Le+1)}setTimeout(()=>ae(Fe)),Ae.preventDefault()}})})})})})})});OL.displayName=xfe;var Sfe="SelectItemAlignedPosition",DL=T.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=Du(Bd,n),s=Mu(Bd,n),[o,l]=T.useState(null),[u,d]=T.useState(null),h=Cn(t,R=>d(R)),p=n1(n),y=T.useRef(!1),v=T.useRef(!0),{viewport:b,selectedItem:w,selectedItemText:x,focusSelectedItem:S}=s,E=T.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&b&&w&&x){const R=i.trigger.getBoundingClientRect(),j=u.getBoundingClientRect(),L=i.valueNode.getBoundingClientRect(),B=x.getBoundingClientRect();if(i.dir!=="rtl"){const et=B.left-j.left,Le=L.left-et,Ie=R.left-Le,z=R.width+Ie,Se=Math.max(z,j.width),Te=window.innerWidth-Vs,ue=Vg(Le,[Vs,Math.max(Vs,Te-Se)]);o.style.minWidth=z+"px",o.style.left=ue+"px"}else{const et=j.right-B.right,Le=window.innerWidth-L.right-et,Ie=window.innerWidth-R.right-Le,z=R.width+Ie,Se=Math.max(z,j.width),Te=window.innerWidth-Vs,ue=Vg(Le,[Vs,Math.max(Vs,Te-Se)]);o.style.minWidth=z+"px",o.style.right=ue+"px"}const Z=p(),P=window.innerHeight-Vs*2,K=b.scrollHeight,q=window.getComputedStyle(u),de=parseInt(q.borderTopWidth,10),ae=parseInt(q.paddingTop,10),te=parseInt(q.borderBottomWidth,10),X=parseInt(q.paddingBottom,10),re=de+ae+K+X+te,D=Math.min(w.offsetHeight*5,re),J=window.getComputedStyle(b),Q=parseInt(J.paddingTop,10),ie=parseInt(J.paddingBottom,10),me=R.top+R.height/2-Vs,ve=P-me,Me=w.offsetHeight/2,Ae=w.offsetTop+Me,Re=de+ae+Ae,ke=re-Re;if(Re<=me){const et=Z.length>0&&w===Z[Z.length-1].ref.current;o.style.bottom="0px";const Le=u.clientHeight-b.offsetTop-b.offsetHeight,Ie=Math.max(ve,Me+(et?ie:0)+Le+te),z=Re+Ie;o.style.height=z+"px"}else{const et=Z.length>0&&w===Z[0].ref.current;o.style.top="0px";const Ie=Math.max(me,de+b.offsetTop+(et?Q:0)+Me)+ke;o.style.height=Ie+"px",b.scrollTop=Re-me+b.offsetTop}o.style.margin=`${Vs}px 0`,o.style.minHeight=D+"px",o.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[p,i.trigger,i.valueNode,o,u,b,w,x,i.dir,r]);za(()=>E(),[E]);const[C,k]=T.useState();za(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const I=T.useCallback(R=>{R&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return m.jsx(Cfe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:y,onScrollButtonChange:I,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:m.jsx(an.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});DL.displayName=Sfe;var Efe="SelectPopperPosition",LC=T.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Vs,...i}=e,s=r1(n);return m.jsx(px,{...s,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});LC.displayName=Efe;var[Cfe,ZT]=wp(Bd,{}),$C="SelectViewport",ML=T.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Mu($C,n),s=ZT($C,n),o=Cn(t,i.onViewportChange),l=T.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m.jsx(t1.Slot,{scope:n,children:m.jsx(an.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Wt(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=s;if(p!=null&&p.current&&h){const y=Math.abs(l.current-d.scrollTop);if(y>0){const v=window.innerHeight-Vs*2,b=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),x=Math.max(b,w);if(x<v){const S=x+y,E=Math.min(v,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});ML.displayName=$C;var PL="SelectGroup",[kfe,Tfe]=wp(PL),Afe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Za();return m.jsx(kfe,{scope:n,id:a,children:m.jsx(an.div,{role:"group","aria-labelledby":a,...r,ref:t})})});Afe.displayName=PL;var FL="SelectLabel",Nfe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Tfe(FL,n);return m.jsx(an.div,{id:a.id,...r,ref:t})});Nfe.displayName=FL;var Ow="SelectItem",[Rfe,LL]=wp(Ow),$L=T.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...s}=e,o=Du(Ow,n),l=Mu(Ow,n),u=o.value===r,[d,h]=T.useState(i??""),[p,y]=T.useState(!1),v=Cn(t,S=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,S,r,a)}),b=Za(),w=T.useRef("touch"),x=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(Rfe,{scope:n,value:r,disabled:a,textId:b,isSelected:u,onItemTextChange:T.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:m.jsx(t1.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:m.jsx(an.div,{role:"option","aria-labelledby":b,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:v,onFocus:Wt(s.onFocus,()=>y(!0)),onBlur:Wt(s.onBlur,()=>y(!1)),onClick:Wt(s.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:Wt(s.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:Wt(s.onPointerDown,S=>{w.current=S.pointerType}),onPointerMove:Wt(s.onPointerMove,S=>{var E;w.current=S.pointerType,a?(E=l.onItemLeave)==null||E.call(l):w.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Wt(s.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:Wt(s.onKeyDown,S=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(pfe.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});$L.displayName=Ow;var Wm="SelectItemText",BL=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,s=Du(Wm,n),o=Mu(Wm,n),l=LL(Wm,n),u=bfe(Wm,n),[d,h]=T.useState(null),p=Cn(t,x=>h(x),l.onItemTextChange,x=>{var S;return(S=o.itemTextRefCallback)==null?void 0:S.call(o,x,l.value,l.disabled)}),y=d==null?void 0:d.textContent,v=T.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:y},l.value),[l.disabled,l.value,y]),{onNativeOptionAdd:b,onNativeOptionRemove:w}=u;return za(()=>(b(v),()=>w(v)),[b,w,v]),m.jsxs(m.Fragment,{children:[m.jsx(an.span,{id:l.textId,...i,ref:p}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?zo.createPortal(i.children,s.valueNode):null]})});BL.displayName=Wm;var zL="SelectItemIndicator",UL=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return LL(zL,n).isSelected?m.jsx(an.span,{"aria-hidden":!0,...r,ref:t}):null});UL.displayName=zL;var BC="SelectScrollUpButton",HL=T.forwardRef((e,t)=>{const n=Mu(BC,e.__scopeSelect),r=ZT(BC,e.__scopeSelect),[a,i]=T.useState(!1),s=Cn(t,r.onScrollButtonChange);return za(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollTop>0;i(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?m.jsx(VL,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});HL.displayName=BC;var zC="SelectScrollDownButton",qL=T.forwardRef((e,t)=>{const n=Mu(zC,e.__scopeSelect),r=ZT(zC,e.__scopeSelect),[a,i]=T.useState(!1),s=Cn(t,r.onScrollButtonChange);return za(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?m.jsx(VL,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});qL.displayName=zC;var VL=T.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Mu("SelectScrollButton",n),s=T.useRef(null),o=n1(n),l=T.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),za(()=>{var d;const u=o().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),m.jsx(an.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Wt(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:Wt(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:Wt(a.onPointerLeave,()=>{l()})})}),Ife="SelectSeparator",jfe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return m.jsx(an.div,{"aria-hidden":!0,...r,ref:t})});jfe.displayName=Ife;var UC="SelectArrow",Ofe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=r1(n),i=Du(UC,n),s=Mu(UC,n);return i.open&&s.position==="popper"?m.jsx(mx,{...a,...r,ref:t}):null});Ofe.displayName=UC;var Dfe="SelectBubbleInput",GL=T.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=T.useRef(null),i=Cn(r,a),s=Jx(t);return T.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),m.jsx(an.select,{...n,style:{...tP,...n.style},ref:i,defaultValue:t})});GL.displayName=Dfe;function WL(e){return e===""||e===void 0}function KL(e){const t=Fa(e),n=T.useRef(""),r=T.useRef(0),a=T.useCallback(s=>{const o=n.current+s;t(o),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),i=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function ZL(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=Mfe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function Mfe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Pfe=EL,Ffe=kL,Lfe=AL,$fe=NL,Bfe=RL,zfe=IL,Ufe=ML,Hfe=$L,qfe=BL,Vfe=UL,Gfe=HL,Wfe=qL;function Jo({...e}){return m.jsx(Pfe,{"data-slot":"select",...e})}function Qo({...e}){return m.jsx(Lfe,{"data-slot":"select-value",...e})}function el({className:e,size:t="default",children:n,...r}){return m.jsxs(Ffe,{"data-slot":"select-trigger","data-size":t,className:At("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,m.jsx($fe,{asChild:!0,children:m.jsx(rl,{className:"size-4 opacity-50"})})]})}function tl({className:e,children:t,position:n="popper",...r}){return m.jsx(Bfe,{children:m.jsxs(zfe,{"data-slot":"select-content",className:At("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[m.jsx(Kfe,{}),m.jsx(Ufe,{className:At("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),m.jsx(Zfe,{})]})})}function Gr({className:e,children:t,...n}){return m.jsxs(Hfe,{"data-slot":"select-item",className:At("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[m.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:m.jsx(Vfe,{children:m.jsx(lo,{className:"size-4"})})}),m.jsx(qfe,{children:t})]})}function Kfe({className:e,...t}){return m.jsx(Gfe,{"data-slot":"select-scroll-up-button",className:At("flex cursor-default items-center justify-center py-1",e),...t,children:m.jsx(Hd,{className:"size-4"})})}function Zfe({className:e,...t}){return m.jsx(Wfe,{"data-slot":"select-scroll-down-button",className:At("flex cursor-default items-center justify-center py-1",e),...t,children:m.jsx(rl,{className:"size-4"})})}var Yfe="Label",YL=T.forwardRef((e,t)=>m.jsx(an.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));YL.displayName=Yfe;var Xfe=YL;function Gt({className:e,...t}){return m.jsx(Xfe,{"data-slot":"label",className:At("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const XL=({initialProviderType:e=null,initialName:t="",initialValue:n="",onSave:r,onCancel:a,isSaving:i,className:s})=>{const[o,l]=T.useState(t),[u,d]=T.useState(n),[h,p]=T.useState(e),y=T.useRef(null);T.useEffect(()=>{l(t),d(n),p(e)},[t,n,e]);const v=T.useCallback(w=>{var C,k;const x=w;p(x);const S=(C=Ad.find(I=>I.value===x))==null?void 0:C.label,E=(k=Ad.find(I=>I.value===h))==null?void 0:k.label;S&&(!o.trim()||o===`${E}`)&&l(`${S}`),requestAnimationFrame(()=>{var I;(I=y.current)==null||I.focus()})},[o,h]),b=T.useCallback(async()=>{if(!o.trim()||!u.trim()||!h){Ye.error("Key Name, Provider Type, and API Key Value are required.");return}await r(o.trim(),h,u.trim())},[o,u,h,r]);return m.jsxs("div",{className:At("space-y-4",s),children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"api-key-provider",children:"Provider Type"}),m.jsxs(Jo,{value:h??"",onValueChange:v,disabled:i,children:[m.jsx(el,{id:"api-key-provider",children:m.jsx(Qo,{placeholder:"Select Provider Type"})}),m.jsx(tl,{children:Ad.map(w=>m.jsx(Gr,{value:w.value,children:w.label},w.value))})]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"api-key-name",children:"Key Name"}),m.jsx(jn,{id:"api-key-name",value:o,onChange:w=>l(w.target.value),placeholder:"e.g., My OpenAI Key",required:!0,disabled:i})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"api-key-value",children:"API Key Value"}),m.jsx(jn,{ref:y,id:"api-key-value",type:"password",value:u,onChange:w=>d(w.target.value),placeholder:"Enter your API key",required:!0,disabled:i,autoComplete:"new-password"})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(Dt,{variant:"ghost",size:"sm",onClick:a,disabled:i,type:"button",children:[m.jsx(Rs,{className:"h-4 w-4 mr-1"})," Cancel"]}),m.jsxs(Dt,{variant:"secondary",size:"sm",onClick:b,disabled:i||!o.trim()||!u.trim()||!h,type:"button",children:[i&&m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(Vd,{className:"h-4 w-4 mr-1"})," ",i?"Saving...":"Save API Key"]})]})]})};var a1="Switch",[Jfe,X_e]=Ei(a1),[Qfe,ehe]=Jfe(a1),JL=T.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[p,y]=T.useState(null),v=Cn(t,E=>y(E)),b=T.useRef(!1),w=p?d||!!p.closest("form"):!0,[x,S]=ro({prop:a,defaultProp:i??!1,onChange:u,caller:a1});return m.jsxs(Qfe,{scope:n,checked:x,disabled:o,children:[m.jsx(an.button,{type:"button",role:"switch","aria-checked":x,"aria-required":s,"data-state":n$(x),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onClick:Wt(e.onClick,E=>{S(C=>!C),w&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),w&&m.jsx(t$,{control:p,bubbles:!b.current,name:r,value:l,checked:x,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});JL.displayName=a1;var QL="SwitchThumb",e$=T.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=ehe(QL,n);return m.jsx(an.span,{"data-state":n$(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});e$.displayName=QL;var the="SwitchBubbleInput",t$=T.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const s=T.useRef(null),o=Cn(s,i),l=Jx(n),u=fx(t);return T.useEffect(()=>{const d=s.current;if(!d)return;const h=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&y){const v=new Event("click",{bubbles:r});y.call(d,n),d.dispatchEvent(v)}},[l,n,r]),m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});t$.displayName=the;function n$(e){return e?"checked":"unchecked"}var nhe=JL,rhe=e$;function Mi({className:e,...t}){return m.jsx(nhe,{"data-slot":"switch",className:At("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:m.jsx(rhe,{"data-slot":"switch-thumb",className:At("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const r$=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var u;const s=d=>{r(d==="none"?null:d)},o=(u=a.find(d=>d.id===n))==null?void 0:u.name,l=n?o||`Key ID: ${n.substring(0,6)}...`:"None";return m.jsxs(Jo,{value:n??"none",onValueChange:s,disabled:i||a.length===0,children:[m.jsx(el,{className:At("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:m.jsx(Qo,{asChild:!0,children:m.jsxs("div",{className:"flex items-center overflow-hidden",children:[m.jsx(B2,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),m.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&m.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?m.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),m.jsxs(tl,{className:"bg-popover border-border text-popover-foreground",children:[m.jsx(Gr,{value:"none",children:m.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(d=>m.jsx(Gr,{value:d.id,children:d.name||`Key ID: ${d.id.substring(0,6)}...`},d.id))]})]})},a$=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:a="",initialApiKeyId:i=null})=>{var w;const[s,o]=T.useState(!1),[l,u]=T.useState({name:a,type:r,isEnabled:!0,apiKeyId:i,baseURL:null,enabledModels:null,autoFetchModels:!1,fetchedModels:null,modelsLastFetchedAt:null});T.useEffect(()=>{u(x=>({...x,name:a||x.name||"",type:r||x.type||null,apiKeyId:i||x.apiKeyId||null,autoFetchModels:r?fh(r):x.autoFetchModels}))},[a,r,i]);const d=T.useCallback((x,S)=>{u(E=>{var I,R;const C={...E,[x]:S},k=E.name||"";if(x==="type"){const j=S,L=(I=Ad.find(Z=>Z.value===E.type))==null?void 0:I.label;C.apiKeyId=null,C.baseURL=null,C.autoFetchModels=j?fh(j):!1,C.enabledModels=null;const B=(R=Ad.find(Z=>Z.value===j))==null?void 0:R.label;if(B&&(!k.trim()||k===L)&&(C.name=B),j&&aw(j)){const Z=(e||[]).filter(P=>P.providerId===j);Z.length>0&&(C.apiKeyId=Z[0].id)}}return(x==="isEnabled"||x==="autoFetchModels")&&(C[x]=!!S),C})},[e]),h=T.useCallback(async()=>{var x,S;if(!((x=l.name)!=null&&x.trim())||!l.type){Ye.error("Provider Name and Type are required.");return}o(!0);try{const E=l.type,C=l.autoFetchModels??fh(E),k={name:l.name.trim(),type:E,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((S=l.baseURL)==null?void 0:S.trim())||null,enabledModels:null,autoFetchModels:C,fetchedModels:null,modelsLastFetchedAt:null};await t(k),n()}catch(E){console.error("Failed to add provider (from form component):",E)}finally{o(!1)}},[l,t,n]),p=aw(l.type??null),y=Rk(l.type??null),v=fh(l.type??null),b=(e||[]).filter(x=>!l.type||x.providerId===l.type);return m.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[m.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"new-provider-type",children:"Provider Type"}),m.jsxs(Jo,{value:l.type??"",onValueChange:x=>d("type",x),disabled:s,children:[m.jsx(el,{id:"new-provider-type",children:m.jsx(Qo,{placeholder:"Select Type"})}),m.jsx(tl,{children:Ad.map(x=>m.jsx(Gr,{value:x.value,children:x.label},x.value))})]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"new-provider-name",children:"Provider Name"}),m.jsx(jn,{id:"new-provider-name",value:l.name||"",onChange:x=>d("name",x.target.value),placeholder:"e.g., My Ollama",disabled:s,"aria-label":"Provider Name"})]}),p&&m.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[m.jsx(Gt,{children:"API Key"}),m.jsx(r$,{label:"API Key",selectedKeyId:l.apiKeyId??null,onKeySelected:x=>d("apiKeyId",x),apiKeys:b,disabled:s||!l.type})]}),y&&m.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[m.jsx(Gt,{htmlFor:"new-provider-baseurl",children:"Base URL"}),m.jsx(jn,{id:"new-provider-baseurl",value:l.baseURL||"",onChange:x=>d("baseURL",x.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",disabled:s,"aria-label":"Base URL"})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Mi,{id:"new-enabled",checked:l.isEnabled??!0,onCheckedChange:x=>d("isEnabled",x),disabled:s,"aria-labelledby":"new-enabled-label"}),m.jsx(Gt,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Mi,{id:"new-autofetch",checked:l.autoFetchModels??!1,onCheckedChange:x=>d("autoFetchModels",x),disabled:!v||s,"aria-labelledby":"new-autofetch-label"}),m.jsxs(Gt,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:At("text-sm",v?"":"text-muted-foreground"),children:["Auto-fetch models ",v?"":"(Not Supported)"]})]})]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(Dt,{variant:"ghost",size:"sm",onClick:n,disabled:s,type:"button",children:[m.jsx(Rs,{className:"h-4 w-4 mr-1"})," Cancel"]}),m.jsxs(Dt,{variant:"secondary",size:"sm",onClick:h,disabled:s||!((w=l.name)!=null&&w.trim())||!l.type,type:"button",children:[s&&m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(Vd,{className:"h-4 w-4 mr-1"})," ",s?"Adding...":"Add Provider"]})]})]})};var i1="Collapsible",[ahe,J_e]=Ei(i1),[ihe,YT]=ahe(i1),i$=T.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:s,...o}=e,[l,u]=ro({prop:r,defaultProp:a??!1,onChange:s,caller:i1});return m.jsx(ihe,{scope:n,disabled:i,contentId:Za(),open:l,onOpenToggle:T.useCallback(()=>u(d=>!d),[u]),children:m.jsx(an.div,{"data-state":JT(l),"data-disabled":i?"":void 0,...o,ref:t})})});i$.displayName=i1;var s$="CollapsibleTrigger",o$=T.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=YT(s$,n);return m.jsx(an.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":JT(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:Wt(e.onClick,a.onOpenToggle)})});o$.displayName=s$;var XT="CollapsibleContent",l$=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=YT(XT,e.__scopeCollapsible);return m.jsx(ka,{present:n||a.open,children:({present:i})=>m.jsx(she,{...r,ref:t,present:i})})});l$.displayName=XT;var she=T.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=e,s=YT(XT,n),[o,l]=T.useState(r),u=T.useRef(null),d=Cn(t,u),h=T.useRef(0),p=h.current,y=T.useRef(0),v=y.current,b=s.open||o,w=T.useRef(b),x=T.useRef(void 0);return T.useEffect(()=>{const S=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(S)},[]),za(()=>{const S=u.current;if(S){x.current=x.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const E=S.getBoundingClientRect();h.current=E.height,y.current=E.width,w.current||(S.style.transitionDuration=x.current.transitionDuration,S.style.animationName=x.current.animationName),l(r)}},[s.open,r]),m.jsx(an.div,{"data-state":JT(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!b,...i,ref:d,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:b&&a})});function JT(e){return e?"open":"closed"}var ohe=i$;function lhe({...e}){return m.jsx(ohe,{"data-slot":"collapsible",...e})}function che({...e}){return m.jsx(o$,{"data-slot":"collapsible-trigger",...e})}function uhe({...e}){return m.jsx(l$,{"data-slot":"collapsible-content",...e})}const dhe=({stepNumber:e,title:t,description:n,isComplete:r,isActive:a,children:i,contentClassName:s,openOnComplete:o})=>{const[l,u]=T.useState(a&&!r);T.useEffect(()=>{a&&(!r||o)&&u(!0)},[a,r,o]);const d=r?fk:K6,h=r?"text-green-500":a?"text-primary":"text-muted-foreground";return m.jsxs(lhe,{open:l,onOpenChange:u,className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between space-x-4 px-1",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(d,{className:At("h-5 w-5 flex-shrink-0",h)}),m.jsxs("h4",{className:At("text-sm font-semibold",r?"text-muted-foreground line-through":"text-primary"),children:["Step ",e,": ",t]})]}),m.jsx(che,{asChild:!0,children:m.jsxs(Dt,{variant:"ghost",size:"sm",className:"w-9 p-0",children:[l?m.jsx(rl,{className:"h-4 w-4"}):m.jsx(W6,{className:"h-4 w-4"}),m.jsxs("span",{className:"sr-only",children:["Toggle ",t]})]})})]}),m.jsx(uhe,{className:"space-y-2",children:m.jsxs("div",{className:At("rounded-md border px-4 py-3 font-mono text-sm shadow-sm bg-card ml-8",s),children:[m.jsx("p",{className:"text-sm mb-3 text-card-foreground",children:n}),i]})})]})},QT=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:s="h-48",onModelClick:o})=>{const[l,u]=T.useState(""),d=T.useMemo(()=>{if(!l)return t;const h=l.toLowerCase();return t.filter(p=>p.name.toLowerCase().includes(h)||p.id.toLowerCase().includes(h))},[t,l]);return a?m.jsxs("div",{className:`space-y-2 ${s}`,children:[m.jsx(dr,{className:"h-8 w-full"}),m.jsx(dr,{className:"h-8 w-full"}),m.jsx(dr,{className:"h-8 w-full"})]}):t.length===0?m.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):m.jsxs("div",{className:"space-y-2",children:[m.jsx(jn,{value:l,onChange:h=>u(h.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),m.jsx(rc,{className:`${s} w-full rounded-md border border-border p-3 bg-background/50`,children:m.jsx("div",{className:"space-y-2",children:d.map(h=>m.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[m.jsx(Gt,{htmlFor:`enable-model-${e}-${h.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:h.name||h.id,onClick:o?()=>o(h.id):void 0,children:h.name||h.id}),m.jsx("div",{className:"flex items-center flex-shrink-0 gap-1",children:m.jsx(Mi,{id:`enable-model-${e}-${h.id}`,checked:n.has(h.id),onCheckedChange:p=>r(h.id,p),disabled:i,"aria-label":`Enable model ${h.name||h.id}`,onClick:p=>p.stopPropagation()})})]},h.id))})})]})},bd=gt.forwardRef(({className:e,href:t,children:n,...r},a)=>m.jsx("a",{ref:a,href:t,target:"_blank",rel:"noopener noreferrer",className:At("font-medium text-primary underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r,children:n}));bd.displayName="Lnk";const fhe=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:a,getAllAvailableModelDefsForProvider:i,isLoading:s,enableApiKeyManagement:o}=$n(dn(re=>({apiKeys:re.dbApiKeys,addApiKey:re.addApiKey,providers:re.dbProviderConfigs,addProviderConfig:re.addProviderConfig,updateProviderConfig:re.updateProviderConfig,getAllAvailableModelDefsForProvider:re.getAllAvailableModelDefsForProvider,isLoading:re.isLoading,enableApiKeyManagement:re.enableApiKeyManagement}))),{toggleChatControlPanel:l,setInitialSettingsTabs:u}=is(dn(re=>({toggleChatControlPanel:re.toggleChatControlPanel,setInitialSettingsTabs:re.setInitialSettingsTabs}))),{addConversation:d,selectItem:h}=mn(dn(re=>({addConversation:re.addConversation,selectItem:re.selectItem}))),[p,y]=T.useState(!1),[v,b]=T.useState(!1),[w,x]=T.useState(!1),[S,E]=T.useState(!1),[C,k]=T.useState(null),I=T.useMemo(()=>!o||e.length>0,[o,e]),R=T.useMemo(()=>n.length>0,[n]),j=T.useMemo(()=>n.some(re=>re.isEnabled&&re.enabledModels&&re.enabledModels.length>0),[n]),L=T.useMemo(()=>n.length>0?n[0]:null,[n]),B=T.useMemo(()=>L?i(L.id).map(re=>({id:re.id,name:re.name})):[],[L,i]),Z=T.useMemo(()=>new Set((L==null?void 0:L.enabledModels)??[]),[L]),P=T.useCallback(async(re,D,J)=>{y(!0);try{await t(re,D,J),k(D)}finally{y(!1)}},[t]),K=T.useCallback(async re=>{b(!0);try{const D=await r(re);return k(null),D}finally{b(!1)}},[r]),q=T.useCallback(async(re,D)=>{if(!L)return;E(!0);const J=new Set(L.enabledModels??[]);D?J.add(re):J.delete(re);const Q=Array.from(J);try{await a(L.id,{enabledModels:Q})}catch(ie){Ye.error("Failed to update model status."),console.error("Failed to save model toggle:",ie)}finally{E(!1)}},[L,a]),de=T.useCallback(async()=>{x(!0);try{const re=await d({title:"New Chat"});await h(re,"conversation")}catch(re){Ye.error("Failed to start your first chat."),console.error("Failed to start first chat:",re),x(!1)}},[d,h]),ae=(re,D)=>{u(re,D),l("settingsModal",!0)},te=[...o?[{id:"api-key",title:"Add API Key",description:m.jsxs("div",{children:[m.jsxs("p",{children:["To use providers like"," ",m.jsx(bd,{href:"https://platform.openai.com/api-keys",children:"OpenAI"}),","," ",m.jsx(bd,{href:"https://aistudio.google.com/app/apikey",children:"Google"}),","," ",m.jsx(bd,{href:"https://console.anthropic.com/settings/keys",children:"Anthropic (Claude)"}),", or ",m.jsx(bd,{href:"https://openrouter.ai/keys",children:"OpenRouter"})," ","or any OpenAi API compatible provider , add an API key. Keys are stored securely in your browser."]}),m.jsxs("p",{className:"py-2",children:['If you want truly local AI, "no internet required", you can setup ',m.jsx(bd,{href:"https://www.ollama.com/",children:"Ollama"})," or,"," ",m.jsx(bd,{href:"https://lmstudio.ai/",children:"LMStudio"})," (or any other local LLM solution with an OpenAI compatible API). These typically don't require API keys."]})]}),isComplete:I,content:m.jsx(XL,{onSave:P,onCancel:()=>{},isSaving:p,className:"border-none shadow-none p-0"})}]:[],{id:"add-provider",title:"Add AI Provider",description:"Connect to an AI provider like OpenAI, Ollama, or others to start chatting.",isComplete:R,content:m.jsx(a$,{apiKeys:e,onAddProvider:K,onCancel:()=>{},initialType:C??void 0})},{id:"enable-models",title:"Enable Models",description:m.jsxs(m.Fragment,{children:["Enable models for the provider you just added (",(L==null?void 0:L.name)||"","). Enabling specific models improves the UI by reducing clutter and choice paralysis. You can enable more later in Settings."]}),isComplete:j,content:L?m.jsx(QT,{providerId:L.id,allAvailableModels:B,enabledModelIds:Z,onToggleModel:q,isLoading:s||S,listHeightClass:"h-48"}):m.jsxs("p",{className:"text-sm text-muted-foreground italic",children:["Add a provider in Step ",o?"2":"1"," first."]})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:m.jsxs(Dt,{onClick:de,disabled:w,size:"sm",children:[m.jsx(eD,{className:"mr-2 h-4 w-4"}),w?"Starting...":"Start First Chat"]}),contentClassName:""}],X=te.findIndex(re=>!re.isComplete);return s?m.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-2xl mx-auto w-full",children:[m.jsx(dr,{className:"h-10 w-3/4"}),m.jsx(dr,{className:"h-20 w-full"}),m.jsx(dr,{className:"h-10 w-3/4"}),m.jsx(dr,{className:"h-20 w-full"})]}):m.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx(Rv,{className:"h-12 w-12 text-primary mx-auto mb-3"}),m.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"LiteChat Setup"}),m.jsx("p",{className:"text-muted-foreground",children:"Follow these steps to configure LiteChat."})]}),m.jsx("div",{className:"space-y-4",children:te.map((re,D)=>{const J=D===X;return m.jsx(dhe,{stepNumber:D+1,title:re.title,description:re.description,isComplete:re.id!=="start-chat"&&re.isComplete,isActive:J,contentClassName:re.id==="add-provider"||re.id==="api-key"?"p-0 border-none shadow-none bg-transparent":re.id==="enable-models"?"p-0":re.contentClassName,children:re.content},re.id)})}),!s&&!o&&!R&&X===-1&&m.jsxs("div",{className:"text-center text-muted-foreground mt-6",children:[m.jsx(Nd,{className:"h-8 w-8 text-destructive mx-auto mb-2"}),m.jsx("p",{className:"text-sm",children:"Configuration issue detected. Please review provider settings."}),m.jsx(Dt,{variant:"outline",size:"sm",onClick:()=>ae("providers"),className:"mt-2",children:"Go to Settings"})]})]})})},hhe=["conversation.title_generation"],phe=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:s})=>{const o=T.useRef(null),l=T.useRef(null),[u,d]=T.useState(!1),h=qn(R=>R.streamingInteractionIds),p=lr(R=>R.chatMaxWidth),{isLoading:y}=$n(dn(R=>({providers:R.dbProviderConfigs,apiKeys:R.dbApiKeys,isLoading:R.isLoading,enableApiKeyManagement:R.enableApiKeyManagement}))),{conversationCount:v,isConversationLoading:b}=mn(dn(R=>({conversationCount:R.conversations.length,isConversationLoading:R.isLoading}))),{projectCount:w,isProjectLoading:x}=ai(dn(R=>({projectCount:R.projects.length,isProjectLoading:R.isLoading}))),S=T.useMemo(()=>y||b||x?!1:v===0&&w===0,[v,w,y,b,x]),E=T.useMemo(()=>{const R=[],j=new Set;return[...t].sort((B,Z)=>B.index-Z.index).forEach(B=>{if(!j.has(B.id)&&!hhe.includes(B.type)){const Z=[B];j.add(B.id),R.push(Z)}}),R},[t]),C=(R="smooth")=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:R})};T.useEffect(()=>{if(l.current){const{scrollHeight:R,clientHeight:j,scrollTop:L}=l.current,B=R-j<=L+150,Z=n==="streaming"&&h.length>0;(B||Z)&&requestAnimationFrame(()=>{C(Z?"smooth":"auto")})}},[E.length,n,h]),T.useEffect(()=>{const R=l.current;if(!R)return;const j=()=>{const{scrollHeight:L,clientHeight:B,scrollTop:Z}=R,P=Z<L-B-B*.5;d(P)};return R.addEventListener("scroll",j,{passive:!0}),j(),()=>{R.removeEventListener("scroll",j)}},[]),T.useEffect(()=>{o.current&&(l.current=o.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const k=()=>y||b||x?m.jsxs("div",{className:"space-y-4 p-4",children:[m.jsx(dr,{className:"h-24 w-full"}),m.jsx(dr,{className:"h-32 w-full"}),m.jsx(dr,{className:"h-20 w-full"})]}):S?m.jsx(fhe,{}):e?E.length===0&&n!=="streaming"?m.jsx(_O,{}):m.jsxs("div",{className:"space-y-4 p-4",children:[E.map(R=>{const j=R[0];return h.includes(j.id)?m.jsx(PC,{interactionId:j.id,onStop:s},`${j.id}-streaming`):m.jsx(eL,{interaction:j,onEdit:i,onRegenerate:a,onDelete:void 0},j.id)}),n==="streaming"&&h.filter(R=>!t.some(j=>j.id===R)).map(R=>m.jsx(PC,{interactionId:R,onStop:s},`${R}-streaming-new`))]}):m.jsx(_O,{}),I=p||"max-w-7xl";return m.jsxs("div",{className:At("flex-grow relative",r),children:[m.jsx(rc,{className:"h-full w-full",ref:o,children:m.jsx("div",{className:At("chat-canvas-container mx-auto",I),children:k()})}),u&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>C(),"aria-label":"Scroll to bottom",children:m.jsx(EH,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"left",children:"Scroll to Bottom"})]})})]})},dv=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0));return a.length===0?null:m.jsx("div",{className:At(r),children:a.map(i=>{const s=n==="icon"?i.iconRenderer:i.renderer;return m.jsx(gt.Fragment,{children:s?s():null},i.id)})})},mhe=Symbol("Let zodToJsonSchema decide on which parser to use"),DO={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},ghe=e=>typeof e=="string"?{...DO,name:e}:{...DO,...e},yhe=e=>{const t=ghe(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function c$(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function wr(e,t,n,r,a){e[t]=n,c$(e,t,r,a)}function bhe(){return{}}function vhe(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==qt.ZodAny&&(n.items=fr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&wr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&wr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(wr(n,"minItems",e.exactLength.value,e.exactLength.message,t),wr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function whe(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?wr(n,"minimum",r.value,r.message,t):wr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),wr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?wr(n,"maximum",r.value,r.message,t):wr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),wr(n,"maximum",r.value,r.message,t));break;case"multipleOf":wr(n,"multipleOf",r.value,r.message,t);break}return n}function xhe(){return{type:"boolean"}}function u$(e,t){return fr(e.type._def,t)}const _he=(e,t)=>fr(e.innerType._def,t);function d$(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>d$(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return She(e,t)}}const She=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":wr(n,"minimum",r.value,r.message,t);break;case"max":wr(n,"maximum",r.value,r.message,t);break}return n};function Ehe(e,t){return{...fr(e.innerType._def,t),default:e.defaultValue()}}function Che(e,t){return t.effectStrategy==="input"?fr(e.schema._def,t):{}}function khe(e){return{type:"string",enum:Array.from(e.values)}}const The=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Ahe(e,t){const n=[fr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),fr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(The(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let s=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;s=l}else r=void 0;a.push(s)}}),a.length?{allOf:a,...r}:void 0}function Nhe(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let g2;const Hs={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(g2===void 0&&(g2=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),g2),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function f$(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":wr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":wr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":qs(n,"email",r.message,t);break;case"format:idn-email":qs(n,"idn-email",r.message,t);break;case"pattern:zod":bi(n,Hs.email,r.message,t);break}break;case"url":qs(n,"uri",r.message,t);break;case"uuid":qs(n,"uuid",r.message,t);break;case"regex":bi(n,r.regex,r.message,t);break;case"cuid":bi(n,Hs.cuid,r.message,t);break;case"cuid2":bi(n,Hs.cuid2,r.message,t);break;case"startsWith":bi(n,RegExp(`^${y2(r.value,t)}`),r.message,t);break;case"endsWith":bi(n,RegExp(`${y2(r.value,t)}$`),r.message,t);break;case"datetime":qs(n,"date-time",r.message,t);break;case"date":qs(n,"date",r.message,t);break;case"time":qs(n,"time",r.message,t);break;case"duration":qs(n,"duration",r.message,t);break;case"length":wr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),wr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{bi(n,RegExp(y2(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&qs(n,"ipv4",r.message,t),r.version!=="v4"&&qs(n,"ipv6",r.message,t);break}case"base64url":bi(n,Hs.base64url,r.message,t);break;case"jwt":bi(n,Hs.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&bi(n,Hs.ipv4Cidr,r.message,t),r.version!=="v4"&&bi(n,Hs.ipv6Cidr,r.message,t);break}case"emoji":bi(n,Hs.emoji(),r.message,t);break;case"ulid":{bi(n,Hs.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{qs(n,"binary",r.message,t);break}case"contentEncoding:base64":{wr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{bi(n,Hs.base64,r.message,t);break}}break}case"nanoid":bi(n,Hs.nanoid,r.message,t)}return n}function y2(e,t){return t.patternStrategy==="escape"?Ihe(e):e}const Rhe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Ihe(e){let t="";for(let n=0;n<e.length;n++)Rhe.has(e[n])||(t+="\\"),t+=e[n];return t}function qs(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):wr(e,"format",t,n,r)}function bi(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:MO(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):wr(e,"pattern",MO(t,r),n,r)}function MO(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,s=!1,o=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(s){if(r[u].match(/[a-z]/)){o?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),o=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(a+=r[u],o=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=s?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:s&&r[u]==="]"?s=!1:!s&&r[u]==="["&&(s=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function h$(e,t){var r,a,i,s,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===qt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((u,d)=>({...u,[d]:fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",d]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===qt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:u,...d}=f$(e.keyType._def,t);return{...n,propertyNames:d}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===qt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===qt.ZodBranded&&e.keyType._def.type._def.typeName===qt.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...d}=u$(e.keyType._def,t);return{...n,propertyNames:d}}}return n}function jhe(e,t){if(t.mapStrategy==="record")return h$(e,t);const n=fr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Ohe(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function Dhe(){return{not:{}}}function Mhe(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Dw={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Phe(e,t){if(t.target==="openApi3")return PO(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in Dw&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const s=Dw[i._def.typeName];return s&&!a.includes(s)?[...a,s]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...a,s];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,s,o)=>o.indexOf(i)===s);return{type:a.length>1?a:a[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return PO(e,t)}const PO=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>fr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Fhe(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:Dw[e.innerType._def.typeName],nullable:!0}:{type:[Dw[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=fr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=fr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Lhe(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",c$(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?wr(n,"minimum",r.value,r.message,t):wr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),wr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?wr(n,"maximum",r.value,r.message,t):wr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),wr(n,"maximum",r.value,r.message,t));break;case"multipleOf":wr(n,"multipleOf",r.value,r.message,t);break}return n}function $he(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const o in i){let l=i[o];if(l===void 0||l._def===void 0)continue;let u=zhe(l);u&&n&&(l instanceof Ys&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const d=fr(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});d!==void 0&&(r.properties[o]=d,u||a.push(o))}a.length&&(r.required=a);const s=Bhe(e,t);return s!==void 0&&(r.additionalProperties=s),r}function Bhe(e,t){if(e.catchall._def.typeName!=="ZodNever")return fr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function zhe(e){try{return e.isOptional()}catch{return!0}}const Uhe=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return fr(e.innerType._def,t);const n=fr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Hhe=(e,t)=>{if(t.pipeStrategy==="input")return fr(e.in._def,t);if(t.pipeStrategy==="output")return fr(e.out._def,t);const n=fr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=fr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function qhe(e,t){return fr(e.type._def,t)}function Vhe(e,t){const r={type:"array",uniqueItems:!0,items:fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&wr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&wr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Ghe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>fr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:fr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>fr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Whe(){return{not:{}}}function Khe(){return{}}const Zhe=(e,t)=>fr(e.innerType._def,t),Yhe=(e,t,n)=>{switch(t){case qt.ZodString:return f$(e,n);case qt.ZodNumber:return Lhe(e,n);case qt.ZodObject:return $he(e,n);case qt.ZodBigInt:return whe(e,n);case qt.ZodBoolean:return xhe();case qt.ZodDate:return d$(e,n);case qt.ZodUndefined:return Whe();case qt.ZodNull:return Mhe(n);case qt.ZodArray:return vhe(e,n);case qt.ZodUnion:case qt.ZodDiscriminatedUnion:return Phe(e,n);case qt.ZodIntersection:return Ahe(e,n);case qt.ZodTuple:return Ghe(e,n);case qt.ZodRecord:return h$(e,n);case qt.ZodLiteral:return Nhe(e,n);case qt.ZodEnum:return khe(e);case qt.ZodNativeEnum:return Ohe(e);case qt.ZodNullable:return Fhe(e,n);case qt.ZodOptional:return Uhe(e,n);case qt.ZodMap:return jhe(e,n);case qt.ZodSet:return Vhe(e,n);case qt.ZodLazy:return()=>e.getter()._def;case qt.ZodPromise:return qhe(e,n);case qt.ZodNaN:case qt.ZodNever:return Dhe();case qt.ZodEffects:return Che(e,n);case qt.ZodAny:return bhe();case qt.ZodUnknown:return Khe();case qt.ZodDefault:return Ehe(e,n);case qt.ZodBranded:return u$(e,n);case qt.ZodReadonly:return Zhe(e,n);case qt.ZodCatch:return _he(e,n);case qt.ZodPipeline:return Hhe(e,n);case qt.ZodFunction:case qt.ZodVoid:case qt.ZodSymbol:return;default:return(r=>{})()}};function fr(e,t,n=!1){var o;const r=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,r,n);if(l!==mhe)return l}if(r&&!n){const l=Xhe(r,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=Yhe(e,e.typeName,t),s=typeof i=="function"?fr(i(),t):i;if(s&&Qhe(e,t,s),t.postProcess){const l=t.postProcess(s,e,t);return a.jsonSchema=s,l}return a.jsonSchema=s,s}const Xhe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Jhe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Jhe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Qhe=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),epe=(e,t)=>{const n=yhe(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[u,d])=>({...l,[u]:fr(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=fr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s);const o=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var Gg={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Wg={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Kg={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Zg={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Yg={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},tpe=[Gg,Wg,Kg,Zg,Yg];Gg.code+"",Wg.code+"",Kg.code+"",Zg.code+"",Yg.code+"";Gg.name+"",Gg.code,Wg.name+"",Wg.code,Kg.name+"",Kg.code,Zg.name+"",Zg.code,Yg.name+"",Yg.code;tpe.map(e=>e.code);function npe(e){const t=["ROOT"];let n=-1,r=null;function a(l,u,d){switch(l){case'"':{n=u,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=u,r=u,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{n=u,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{n=u,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=u,t.pop();break}}}function s(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}}}for(let l=0;l<e.length;l++){const u=e[l];switch(t[t.length-1]){case"ROOT":a(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{n=l,t.pop();break}default:{n=l,a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(u,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const d=e.substring(r,e.length);"true".startsWith(d)?o+="true".slice(d.length):"false".startsWith(d)?o+="false".slice(d.length):"null".startsWith(d)&&(o+="null".slice(d.length))}}return o}function rpe(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=jd({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=jd({text:npe(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var ape={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},ipe={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},spe={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ope={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},lpe={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},cpe={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},upe={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},dpe={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},fpe={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},hpe={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},ppe={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},mpe={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},gpe={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},ype={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},bpe={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},vpe={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},s1=[ape,ipe,spe,ope,lpe,cpe,upe,dpe,fpe,hpe,ppe,mpe,gpe,ype,bpe,vpe];Object.fromEntries(s1.map(e=>[e.code,e]));Object.fromEntries(s1.map(e=>[e.name,e.code]));s1.map(e=>e.code);function ni(e,t){const n=s1.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function wpe(e,t){var n;const r=(n=void 0)!=null?n:!1;return xpe(epe(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var HC=Symbol.for("vercel.ai.schema");function xpe(e,{validate:t}={}){return{[HC]:!0,_type:void 0,[Pv]:!0,jsonSchema:e,validate:t}}function _pe(e){return typeof e=="object"&&e!==null&&HC in e&&e[HC]===!0&&"jsonSchema"in e&&"validate"in e}function o1(e){return _pe(e)?e:wpe(e)}const FO=globalThis||void 0||self;var Spe=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof FO=="object"?FO:{},Ed="1.9.0",LO=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Epe(e){var t=new Set([e]),n=new Set,r=e.match(LO);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(l){return l===e};function i(o){return n.add(o),!1}function s(o){return t.add(o),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var u=l.match(LO);if(!u)return i(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||a.major!==d.major?i(l):a.major===0?a.minor===d.minor&&a.patch<=d.patch?s(l):i(l):a.minor<=d.minor?s(l):i(l)}}var Cpe=Epe(Ed),kpe=Ed.split(".")[0],Xg=Symbol.for("opentelemetry.js.api."+kpe),Jg=Spe;function eA(e,t,n,r){var a;r===void 0&&(r=!1);var i=Jg[Xg]=(a=Jg[Xg])!==null&&a!==void 0?a:{version:Ed};if(!r&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(i.version!==Ed){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Ed);return n.error(s.stack||s.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Ed+"."),!0}function Qg(e){var t,n,r=(t=Jg[Xg])===null||t===void 0?void 0:t.version;if(!(!r||!Cpe(r)))return(n=Jg[Xg])===null||n===void 0?void 0:n[e]}function tA(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Ed+".");var n=Jg[Xg];n&&delete n[e]}var Tpe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Ape=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Npe=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return zm("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return zm("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return zm("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return zm("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return zm("verbose",this._namespace,t)},e}();function zm(e,t,n){var r=Qg("diag");if(r)return n.unshift(t),r[e].apply(r,Ape([],Tpe(n),!1))}var Qi;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Qi||(Qi={}));function Rpe(e,t){e<Qi.NONE?e=Qi.NONE:e>Qi.ALL&&(e=Qi.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",Qi.ERROR),warn:n("warn",Qi.WARN),info:n("info",Qi.INFO),debug:n("debug",Qi.DEBUG),verbose:n("verbose",Qi.VERBOSE)}}var Ipe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},jpe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Ope="diag",Mw=function(){function e(){function t(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=Qg("diag");if(o)return o[a].apply(o,jpe([],Ipe(i),!1))}}var n=this,r=function(a,i){var s,o,l;if(i===void 0&&(i={logLevel:Qi.INFO}),a===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof i=="number"&&(i={logLevel:i});var d=Qg("diag"),h=Rpe((o=i.logLevel)!==null&&o!==void 0?o:Qi.INFO,a);if(d&&!i.suppressOverrideMessage){var p=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+p),h.warn("Current logger will overwrite one already registered from "+p)}return eA("diag",h,n,!0)};n.setLogger=r,n.disable=function(){tA(Ope,n)},n.createComponentLogger=function(a){return new Npe(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function Dpe(e){return Symbol.for(e)}var Mpe=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Ppe=new Mpe,Fpe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},Lpe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},$pe=function(){function e(){}return e.prototype.active=function(){return Ppe},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,Lpe([r],Fpe(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Bpe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},zpe=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},b2="context",Upe=new $pe,p$=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return eA(b2,t,Mw.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(a=this._getContextManager()).with.apply(a,zpe([t,n,r],Bpe(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return Qg(b2)||Upe},e.prototype.disable=function(){this._getContextManager().disable(),tA(b2,Mw.instance())},e}(),qC;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(qC||(qC={}));var m$="0000000000000000",g$="00000000000000000000000000000000",Hpe={traceId:g$,spanId:m$,traceFlags:qC.NONE},Qm=function(){function e(t){t===void 0&&(t=Hpe),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),nA=Dpe("OpenTelemetry Context Key SPAN");function rA(e){return e.getValue(nA)||void 0}function qpe(){return rA(p$.getInstance().active())}function aA(e,t){return e.setValue(nA,t)}function Vpe(e){return e.deleteValue(nA)}function Gpe(e,t){return aA(e,new Qm(t))}function y$(e){var t;return(t=rA(e))===null||t===void 0?void 0:t.spanContext()}var Wpe=/^([0-9a-f]{32})$/i,Kpe=/^[0-9a-f]{16}$/i;function Zpe(e){return Wpe.test(e)&&e!==g$}function Ype(e){return Kpe.test(e)&&e!==m$}function b$(e){return Zpe(e.traceId)&&Ype(e.spanId)}function Xpe(e){return new Qm(e)}var v2=p$.getInstance(),v$=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=v2.active());var a=!!(n!=null&&n.root);if(a)return new Qm;var i=r&&y$(r);return Jpe(i)&&b$(i)?new Qm(i):new Qm},e.prototype.startActiveSpan=function(t,n,r,a){var i,s,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(i=n,o=r):(i=n,s=r,o=a);var l=s??v2.active(),u=this.startSpan(t,i,l),d=aA(l,u);return v2.with(d,o,void 0,u)}},e}();function Jpe(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Qpe=new v$,eme=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Qpe},e}(),tme=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new v$},e}(),nme=new tme,$O=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new eme(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:nme},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),Pw;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Pw||(Pw={}));var w2="trace",rme=function(){function e(){this._proxyTracerProvider=new $O,this.wrapSpanContext=Xpe,this.isSpanContextValid=b$,this.deleteSpan=Vpe,this.getSpan=rA,this.getActiveSpan=qpe,this.getSpanContext=y$,this.setSpan=aA,this.setSpanContext=Gpe}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=eA(w2,this._proxyTracerProvider,Mw.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return Qg(w2)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){tA(w2,Mw.instance()),this._proxyTracerProvider=new $O},e}(),ame=rme.getInstance(),ime=Object.defineProperty,iA=(e,t)=>{for(var n in t)ime(e,n,{get:t[n],enumerable:!0})};function Fw(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function BO(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function zO({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:o,value:l}=await i.read();if(o)break;e.write(l)}}catch(o){throw o}finally{e.end()}})()}var w$="AI_InvalidArgumentError",x$=`vercel.ai.error.${w$}`,sme=Symbol.for(x$),_$,Gs=class extends Tn{constructor({parameter:e,value:t,message:n}){super({name:w$,message:`Invalid argument for parameter ${e}: ${n}`}),this[_$]=!0,this.parameter=e,this.value=t}static isInstance(e){return Tn.hasMarker(e,x$)}};_$=sme;var S$="AI_RetryError",E$=`vercel.ai.error.${S$}`,ome=Symbol.for(E$),C$,UO=class extends Tn{constructor({message:e,reason:t,errors:n}){super({name:S$,message:e}),this[C$]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Tn.hasMarker(e,E$)}};C$=ome;var lme=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>k$(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function k$(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(vv(i)||t===0)throw i;const s=gG(i),o=[...a,i],l=o.length;if(l>t)throw new UO({message:`Failed after ${l} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:o});if(i instanceof Error&&_a.isInstance(i)&&i.isRetryable===!0&&l<=t)return await hG(n),k$(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},o);throw l===1?i:new UO({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:o})}}function cme({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Gs({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Gs({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:lme({maxRetries:t})}}function VC({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function ume({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,o])=>(i[`ai.settings.${s}`]=o,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[s,o])=>(i[`ai.telemetry.metadata.${s}`]=o,i),{}),...Object.entries(r??{}).reduce((i,[s,o])=>(o!==void 0&&(i[`ai.request.headers.${s}`]=o),i),{})}}var dme={startSpan(){return fv},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(fv);if(typeof n=="function")return n(fv);if(typeof r=="function")return r(fv)}},fv={spanContext(){return fme},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},fme={traceId:"",spanId:"",traceFlags:0};function hme({isEnabled:e=!1,tracer:t}={}){return e?t||ame.getTracer("ai"):dme}function GC({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return a&&i.end(),s}catch(s){try{s instanceof Error?(i.recordException({name:s.name,message:s.message,stack:s.stack}),i.setStatus({code:Pw.ERROR,message:s.message})):i.setStatus({code:Pw.ERROR})}finally{i.end()}throw s}})}function gh({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var pme=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=Ah(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=HD(this.base64Data)),this.uint8ArrayData}},mme=class extends pme{constructor(e){super(e),this.type="file"}},gme=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function yme(e){for(const t of gme)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var T$="AI_NoObjectGeneratedError",A$=`vercel.ai.error.${T$}`,bme=Symbol.for(A$),N$,HO=class extends Tn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:T$,message:e,cause:t}),this[N$]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return Tn.hasMarker(e,A$)}};N$=bme;var R$="AI_DownloadError",I$=`vercel.ai.error.${R$}`,vme=Symbol.for(I$),j$,x2=class extends Tn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:R$,message:a,cause:r}),this[j$]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Tn.hasMarker(e,I$)}};j$=vme;async function wme({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new x2({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw x2.isInstance(a)?a:new x2({url:r,cause:a})}}var O$="AI_InvalidDataContentError",D$=`vercel.ai.error.${O$}`,xme=Symbol.for(D$),M$,qO=class extends Tn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:O$,message:n,cause:t}),this[M$]=!0,this.content=e}static isInstance(e){return Tn.hasMarker(e,D$)}};M$=xme;var P$=U.union([U.string(),U.instanceof(Uint8Array),U.instanceof(ArrayBuffer),U.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function F$(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Ah(new Uint8Array(e)):Ah(e)}function Lw(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return HD(e)}catch(t){throw new qO({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new qO({content:e})}function _me(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var L$="AI_InvalidMessageRoleError",$$=`vercel.ai.error.${L$}`,Sme=Symbol.for($$),B$,Eme=class extends Tn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:L$,message:t}),this[B$]=!0,this.role=e}static isInstance(e){return Tn.hasMarker(e,$$)}};B$=Sme;function Cme(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function kme({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=wme}){const a=await Ame(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>Tme(i,a))]}function Tme(e,t){var n,r,a,i,s,o;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(u=>Nme(u,t)).filter(u=>u.type!=="text"||u.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(u=>u.type!=="text"||u.text!=="").map(u=>{var d;const h=(d=u.providerOptions)!=null?d:u.experimental_providerMetadata;switch(u.type){case"file":return{type:"file",data:u.data instanceof URL?u.data:F$(u.data),filename:u.filename,mimeType:u.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:u.text,signature:u.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:u.data,providerMetadata:h};case"text":return{type:"text",text:u.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,args:u.args,providerMetadata:h}}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(u=>{var d;return{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result,content:u.experimental_content,isError:u.isError,providerMetadata:(d=u.providerOptions)!=null?d:u.experimental_providerMetadata}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};default:{const u=l;throw new Eme({role:u})}}}async function Ame(e,t,n,r){const a=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").filter(s=>!(s.type==="image"&&n===!0)).map(s=>s.type==="image"?s.image:s.data).map(s=>typeof s=="string"&&(s.startsWith("http:")||s.startsWith("https:"))?new URL(s):s).filter(s=>s instanceof URL).filter(s=>!r(s)),i=await Promise.all(a.map(async s=>({url:s,data:await t({url:s})})));return Object.fromEntries(i.map(({url:s,data:o})=>[s.toString(),o]))}function Nme(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let s=e.mimeType,o,l,u;const d=e.type;switch(d){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${d}`)}try{l=typeof o=="string"?new URL(o):o}catch{l=o}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:h,base64Content:p}=Cme(l.toString());if(h==null||p==null)throw new Error(`Invalid data URL format in part ${d}`);s=h,u=Lw(p)}else{const h=t[l.toString()];h?(u=h.data,s??(s=h.mimeType)):u=l}else u=Lw(l);switch(d){case"image":return u instanceof Uint8Array&&(s=(r=yme(u))!=null?r:s),{type:"image",image:u,mimeType:s,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(s==null)throw new Error("Mime type is missing for file part");return{type:"file",data:u instanceof Uint8Array?F$(u):u,filename:e.filename,mimeType:s,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function Rme({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s,seed:o}){if(e!=null){if(!Number.isInteger(e))throw new Gs({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Gs({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Gs({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Gs({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Gs({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Gs({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Gs({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(o!=null&&!Number.isInteger(o))throw new Gs({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s!=null&&s.length>0?s:void 0,seed:o}}function VO(e){var t,n,r;const a=[];for(const i of e){let s;try{s=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(s.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:s});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:s,mimeType:i.contentType})}break}case"data:":{let o,l,u;try{[o,l]=i.url.split(","),u=o.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(u==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:Lw(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:_me(Lw(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${s.protocol}`)}}return a}var z$="AI_MessageConversionError",U$=`vercel.ai.error.${z$}`,Ime=Symbol.for(U$),H$,_2=class extends Tn{constructor({originalMessage:e,message:t}){super({name:z$,message:t}),this[H$]=!0,this.originalMessage=e}static isInstance(e){return Tn.hasMarker(e,U$)}};H$=Ime;function jme(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let s=0;s<e.length;s++){const o=e[s],l=s===e.length-1,{role:u,content:d,experimental_attachments:h}=o;switch(u){case"system":{i.push({role:"system",content:d});break}case"user":{if(o.parts==null)i.push({role:"user",content:h?[{type:"text",text:d},...VO(h)]:d});else{const p=o.parts.filter(y=>y.type==="text").map(y=>({type:"text",text:y.text}));i.push({role:"user",content:h?[...p,...VO(h)]:p})}break}case"assistant":{if(o.parts!=null){let v=function(){const S=[];for(const C of x)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const k of C.details)switch(k.type){case"text":S.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const k=C;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:S});const E=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new _2({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:k,toolName:I,result:R}=C,j=a[I];return(j==null?void 0:j.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:I,result:j.experimental_toToolResultContent(R),experimental_content:j.experimental_toToolResultContent(R)}:{type:"tool-result",toolCallId:k,toolName:I,result:R}})}),x=[],w=!1,b++},b=0,w=!1,x=[];for(const S of o.parts)switch(S.type){case"text":{w&&v(),x.push(S);break}case"file":case"reasoning":{x.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==b&&v(),x.push(S),w=!0;break}}v();break}const p=o.toolInvocations;if(p==null||p.length===0){i.push({role:"assistant",content:d});break}const y=p.reduce((v,b)=>{var w;return Math.max(v,(w=b.step)!=null?w:0)},0);for(let v=0;v<=y;v++){const b=p.filter(w=>{var x;return((x=w.step)!=null?x:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...l&&d&&v===0?[{type:"text",text:d}]:[],...b.map(({toolCallId:w,toolName:x,args:S})=>({type:"tool-call",toolCallId:w,toolName:x,args:S}))]}),i.push({role:"tool",content:b.map(w=>{if(!("result"in w))throw new _2({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(w)});const{toolCallId:x,toolName:S,result:E}=w,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:S,result:E}})}))}d&&!l&&i.push({role:"assistant",content:d});break}case"data":break;default:{const p=u;throw new _2({originalMessage:o,message:`Unsupported role: ${p}`})}}}return i}function Ome(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(Dme);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function Dme(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var WC=U.lazy(()=>U.union([U.null(),U.string(),U.number(),U.boolean(),U.record(U.string(),WC),U.array(WC)])),ra=U.record(U.string(),U.record(U.string(),WC)),Mme=U.array(U.union([U.object({type:U.literal("text"),text:U.string()}),U.object({type:U.literal("image"),data:U.string(),mimeType:U.string().optional()})])),q$=U.object({type:U.literal("text"),text:U.string(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),Pme=U.object({type:U.literal("image"),image:U.union([P$,U.instanceof(URL)]),mimeType:U.string().optional(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),V$=U.object({type:U.literal("file"),data:U.union([P$,U.instanceof(URL)]),filename:U.string().optional(),mimeType:U.string(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),Fme=U.object({type:U.literal("reasoning"),text:U.string(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),Lme=U.object({type:U.literal("redacted-reasoning"),data:U.string(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),$me=U.object({type:U.literal("tool-call"),toolCallId:U.string(),toolName:U.string(),args:U.unknown(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),Bme=U.object({type:U.literal("tool-result"),toolCallId:U.string(),toolName:U.string(),result:U.unknown(),content:Mme.optional(),isError:U.boolean().optional(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),zme=U.object({role:U.literal("system"),content:U.string(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),Ume=U.object({role:U.literal("user"),content:U.union([U.string(),U.array(U.union([q$,Pme,V$]))]),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),Hme=U.object({role:U.literal("assistant"),content:U.union([U.string(),U.array(U.union([q$,V$,Fme,Lme,$me]))]),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),qme=U.object({role:U.literal("tool"),content:U.array(Bme),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),Vme=U.union([zme,Ume,Hme,qme]);function Gme({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Ml({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Ml({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Ml({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Ml({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=Ome(e.messages);if(n==="other")throw new Ml({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?jme(e.messages,{tools:t}):e.messages;if(r.length===0)throw new Ml({prompt:e,message:"messages must not be empty"});const a=ep({value:r,schema:U.array(Vme)});if(!a.success)throw new Ml({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Wme({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Kme(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Zme="JSON schema:",Yme="You MUST answer with a JSON object that matches the JSON schema above.",Xme="You MUST answer with JSON.";function Jme({prompt:e,schema:t,schemaPrefix:n=t!=null?Zme:void 0,schemaSuffix:r=t!=null?Yme:Xme}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function S2(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}Gd({prefix:"aiobj",size:24});var Ii=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function GO(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Qme(){let e=[],t=null,n=!1,r=GO();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=GO(),await r.promise,a();try{const{value:i,done:s}=await e[0].read();s?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function ege(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Gd({prefix:"aiobj",size:24});var G$="AI_NoOutputSpecifiedError",W$=`vercel.ai.error.${G$}`,tge=Symbol.for(W$),K$,nge=class extends Tn{constructor({message:e="No output specified."}={}){super({name:G$,message:e}),this[K$]=!0}static isInstance(e){return Tn.hasMarker(e,W$)}};K$=tge;var Z$="AI_ToolExecutionError",Y$=`vercel.ai.error.${Z$}`,rge=Symbol.for(Y$),X$,age=class extends Tn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${u0(r)}`}){super({name:Z$,message:a,cause:r}),this[X$]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return Tn.hasMarker(e,Y$)}};X$=rge;function ige(e){return e!=null&&Object.keys(e).length>0}function sge({tools:e,toolChoice:t,activeTools:n}){return ige(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const s=i.type;switch(s){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:o1(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const o=s;throw new Error(`Unsupported tool type: ${o}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var oge=/^([\s\S]*?)(\s+)(\S*)$/;function lge(e){const t=e.match(oge);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var J$="AI_InvalidToolArgumentsError",Q$=`vercel.ai.error.${J$}`,cge=Symbol.for(Q$),e9,t9=class extends Tn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${u0(n)}`}){super({name:J$,message:r,cause:n}),this[e9]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Tn.hasMarker(e,Q$)}};e9=cge;var n9="AI_NoSuchToolError",r9=`vercel.ai.error.${n9}`,uge=Symbol.for(r9),a9,KC=class extends Tn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:n9,message:n}),this[a9]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Tn.hasMarker(e,r9)}};a9=uge;var i9="AI_ToolCallRepairError",s9=`vercel.ai.error.${i9}`,dge=Symbol.for(s9),o9,fge=class extends Tn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${u0(e)}`}){super({name:i9,message:n,cause:e}),this[o9]=!0,this.originalError=t}static isInstance(e){return Tn.hasMarker(e,s9)}};o9=dge;async function hge({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new KC({toolName:e.toolName});try{return await WO({toolCall:e,tools:t})}catch(i){if(n==null||!(KC.isInstance(i)||t9.isInstance(i)))throw i;let s=null;try{s=await n({toolCall:e,tools:t,parameterSchema:({toolName:o})=>o1(t[o].parameters).jsonSchema,system:r,messages:a,error:i})}catch(o){throw new fge({cause:o,originalError:i})}if(s==null)throw i;return await WO({toolCall:s,tools:t})}}async function WO({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new KC({toolName:e.toolName,availableTools:Object.keys(t)});const a=o1(r.parameters),i=e.args.trim()===""?ep({value:{},schema:a}):jd({text:e.args,schema:a});if(i.success===!1)throw new t9({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function pge(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function KO({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:s,generateMessageId:o}){const l=[];return l.push({role:"assistant",content:[...n.map(u=>u.type==="text"?{...u,type:"reasoning"}:{...u,type:"redacted-reasoning"}),...t.map(u=>({type:"file",data:u.base64,mimeType:u.mimeType})),{type:"text",text:e},...a],id:s}),i.length>0&&l.push({role:"tool",id:o(),content:i.map(u=>{const d=r[u.toolName];return(d==null?void 0:d.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:d.experimental_toToolResultContent(u.result),experimental_content:d.experimental_toToolResultContent(u.result)}:{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result}})}),l}Gd({prefix:"aitxt",size:24});Gd({prefix:"msg",size:24});var mge={};iA(mge,{object:()=>vge,text:()=>bge});var l9="AI_InvalidStreamPartError",c9=`vercel.ai.error.${l9}`,gge=Symbol.for(c9),u9,yge=class extends Tn{constructor({chunk:e,message:t}){super({name:l9,message:t}),this[u9]=!0,this.chunk=e}static isInstance(e){return Tn.hasMarker(e,c9)}};u9=gge;var bge=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),vge=({schema:e})=>{const t=o1(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Jme({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=rpe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=jd({text:n});if(!a.success)throw new HO({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=ep({value:a.value,schema:t});if(!i.success)throw new HO({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function d9(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function sA(e,t){const n=e.getReader(),r=t.getReader();let a,i,s=!1,o=!1;async function l(d){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}async function u(d){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}return new ReadableStream({async pull(d){try{if(s){await u(d);return}if(o){await l(d);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:p}=await Promise.race([a.then(y=>({result:y,reader:n})),i.then(y=>({result:y,reader:r}))]);h.done||d.enqueue(h.value),p===n?(a=void 0,h.done&&(await u(d),s=!0)):(i=void 0,h.done&&(o=!0,await l(d)))}catch(h){d.error(h)}},cancel(){n.cancel(),r.cancel()}})}function wge({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:s,abortSignal:o,repairToolCall:l}){let u=null;const d=new ReadableStream({start(x){u=x}}),h={},p=new Set;let y=!1,v;function b(){y&&p.size===0&&(v!=null&&u.enqueue(v),u.close())}const w=new TransformStream({async transform(x,S){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(x);break}case"file":{S.enqueue(new mme({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await hge({toolCall:x,tools:e,repairToolCall:l,system:i,messages:s});S.enqueue(C);const k=e[C.toolName];if(k.execute!=null){const I=Lo();p.add(I),GC({name:"ai.toolCall",attributes:gh({telemetry:a,attributes:{...VC({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async R=>k.execute(C.args,{toolCallId:C.toolCallId,messages:s,abortSignal:o}).then(j=>{u.enqueue({...C,type:"tool-result",result:j}),p.delete(I),b();try{R.setAttributes(gh({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(j)}}}))}catch{}},j=>{u.enqueue({type:"error",error:new age({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:j})}),p.delete(I),b()})})}}catch(C){u.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:Wme(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){y=!0,b()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(w).pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){}})),d.pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){x.close()}}))])}})}var xge=Gd({prefix:"aitxt",size:24}),_ge=Gd({prefix:"msg",size:24});function Sge({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:s,abortSignal:o,headers:l,maxSteps:u=1,experimental_generateMessageId:d=_ge,experimental_output:h,experimental_continueSteps:p=!1,experimental_telemetry:y,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:w=!1,toolCallStreaming:x=w,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:k,onError:I,onFinish:R,onStepFinish:j,_internal:{now:L=ege,generateId:B=xge,currentDate:Z=()=>new Date}={},...P}){return new Cge({model:e,telemetry:y,headers:l,settings:P,maxRetries:s,abortSignal:o,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:d9(C),activeTools:S,repairToolCall:E,maxSteps:u,output:h,continueSteps:p,providerOptions:b,onChunk:k,onError:I,onFinish:R,onStepFinish:j,now:L,currentDate:Z,generateId:B,generateMessageId:d})}function Ege(e){if(!e)return new TransformStream({transform(i,s){s.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:s=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:s}),n=""}return new TransformStream({transform(i,s){if(i.type==="step-finish"&&a({controller:s}),i.type!=="text-delta"){s.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const o=e.parsePartial({text:t});if(o!=null){const l=JSON.stringify(o.partial);l!==r&&(a({controller:s,partialOutput:o.partial}),r=l)}},flush(i){n.length>0&&a({controller:i})}})}var Cge=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:s,prompt:o,messages:l,tools:u,toolChoice:d,toolCallStreaming:h,transforms:p,activeTools:y,repairToolCall:v,maxSteps:b,output:w,continueSteps:x,providerOptions:S,now:E,currentDate:C,generateId:k,generateMessageId:I,onChunk:R,onError:j,onFinish:L,onStepFinish:B}){this.warningsPromise=new Ii,this.usagePromise=new Ii,this.finishReasonPromise=new Ii,this.providerMetadataPromise=new Ii,this.textPromise=new Ii,this.reasoningPromise=new Ii,this.reasoningDetailsPromise=new Ii,this.sourcesPromise=new Ii,this.filesPromise=new Ii,this.toolCallsPromise=new Ii,this.toolResultsPromise=new Ii,this.requestPromise=new Ii,this.responsePromise=new Ii,this.stepsPromise=new Ii;var Z;if(b<1)throw new Gs({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=w;let P="",K="",q="",de=[],ae=[],te,X=[];const re=[],D={id:k(),timestamp:C(),modelId:e.modelId,messages:[]};let J=[],Q=[],ie,me,ve="initial";const Me=[];let Ae;const Re=new TransformStream({async transform(ue,oe){oe.enqueue(ue);const{part:ee}=ue;if((ee.type==="text-delta"||ee.type==="reasoning"||ee.type==="source"||ee.type==="tool-call"||ee.type==="tool-result"||ee.type==="tool-call-streaming-start"||ee.type==="tool-call-delta")&&await(R==null?void 0:R({chunk:ee})),ee.type==="error"&&await(j==null?void 0:j({error:ee.error})),ee.type==="text-delta"&&(P+=ee.textDelta,K+=ee.textDelta,q+=ee.textDelta),ee.type==="reasoning"&&(te==null?(te={type:"text",text:ee.textDelta},de.push(te)):te.text+=ee.textDelta),ee.type==="reasoning-signature"){if(te==null)throw new Tn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});te.signature=ee.signature,te=void 0}if(ee.type==="redacted-reasoning"&&de.push({type:"redacted",data:ee.data}),ee.type==="file"&&ae.push(ee),ee.type==="source"&&(re.push(ee.source),X.push(ee.source)),ee.type==="tool-call"&&J.push(ee),ee.type==="tool-result"&&Q.push(ee),ee.type==="step-finish"){const xe=KO({text:K,files:ae,reasoning:de,tools:u??{},toolCalls:J,toolResults:Q,messageId:ee.messageId,generateMessageId:I}),Pe=Me.length;let Ee="done";Pe+1<b&&(x&&ee.finishReason==="length"&&J.length===0?Ee="continue":J.length>0&&Q.length===J.length&&(Ee="tool-result"));const We={stepType:ve,text:P,reasoning:pge(de),reasoningDetails:de,files:ae,sources:X,toolCalls:J,toolResults:Q,finishReason:ee.finishReason,usage:ee.usage,warnings:ee.warnings,logprobs:ee.logprobs,request:ee.request,response:{...ee.response,messages:[...D.messages,...xe]},providerMetadata:ee.experimental_providerMetadata,experimental_providerMetadata:ee.experimental_providerMetadata,isContinued:ee.isContinued};await(B==null?void 0:B(We)),Me.push(We),J=[],Q=[],P="",X=[],de=[],ae=[],te=void 0,Ee!=="done"&&(ve=Ee),Ee!=="continue"&&(D.messages.push(...xe),K="")}ee.type==="finish"&&(D.id=ee.response.id,D.timestamp=ee.response.timestamp,D.modelId=ee.response.modelId,D.headers=ee.response.headers,me=ee.usage,ie=ee.finishReason)},async flush(ue){var oe;try{if(Me.length===0)return;const ee=Me[Me.length-1];Te.warningsPromise.resolve(ee.warnings),Te.requestPromise.resolve(ee.request),Te.responsePromise.resolve(ee.response),Te.toolCallsPromise.resolve(ee.toolCalls),Te.toolResultsPromise.resolve(ee.toolResults),Te.providerMetadataPromise.resolve(ee.experimental_providerMetadata),Te.reasoningPromise.resolve(ee.reasoning),Te.reasoningDetailsPromise.resolve(ee.reasoningDetails);const xe=ie??"unknown",Pe=me??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Te.finishReasonPromise.resolve(xe),Te.usagePromise.resolve(Pe),Te.textPromise.resolve(q),Te.sourcesPromise.resolve(re),Te.filesPromise.resolve(ee.files),Te.stepsPromise.resolve(Me),await(L==null?void 0:L({finishReason:xe,logprobs:void 0,usage:Pe,text:q,reasoning:ee.reasoning,reasoningDetails:ee.reasoningDetails,files:ee.files,sources:ee.sources,toolCalls:ee.toolCalls,toolResults:ee.toolResults,request:(oe=ee.request)!=null?oe:{},response:ee.response,warnings:ee.warnings,providerMetadata:ee.providerMetadata,experimental_providerMetadata:ee.experimental_providerMetadata,steps:Me})),Ae.setAttributes(gh({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>{var Ee;return(Ee=ee.toolCalls)!=null&&Ee.length?JSON.stringify(ee.toolCalls):void 0}},"ai.usage.promptTokens":Pe.promptTokens,"ai.usage.completionTokens":Pe.completionTokens}}))}catch(ee){ue.error(ee)}finally{Ae.end()}}}),ke=Qme();this.addStream=ke.addStream,this.closeStream=ke.close;let Fe=ke.stream;for(const ue of p)Fe=Fe.pipeThrough(ue({tools:u,stopStream(){ke.terminate()}}));this.baseStream=Fe.pipeThrough(Ege(w)).pipeThrough(Re);const{maxRetries:et,retry:Le}=cme({maxRetries:a}),Ie=hme(t),z=ume({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:et}}),Se=Gme({prompt:{system:(Z=w==null?void 0:w.injectIntoSystemPrompt({system:s,model:e}))!=null?Z:s,prompt:o,messages:l},tools:u}),Te=this;GC({name:"ai.streamText",attributes:gh({telemetry:t,attributes:{...VC({operationId:"ai.streamText",telemetry:t}),...z,"ai.prompt":{input:()=>JSON.stringify({system:s,prompt:o,messages:l})},"ai.settings.maxSteps":b}}),tracer:Ie,endWhenDone:!1,fn:async ue=>{Ae=ue;async function oe({currentStep:ee,responseMessages:xe,usage:Pe,stepType:Ee,previousStepText:We,hasLeadingWhitespace:Nt,messageId:it}){var _t;const Ft=xe.length===0?Se.type:"messages",Pt=[...Se.messages,...xe],Zt=await kme({prompt:{type:Ft,system:Se.system,messages:Pt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(_t=e.supportsUrl)==null?void 0:_t.bind(e)}),ye={type:"regular",...sge({tools:u,toolChoice:d,activeTools:y})},{result:{stream:O,warnings:G,rawResponse:fe,request:je},doStreamSpan:be,startTimestampMs:Ce}=await Le(()=>GC({name:"ai.streamText.doStream",attributes:gh({telemetry:t,attributes:{...VC({operationId:"ai.streamText.doStream",telemetry:t}),...z,"ai.prompt.format":{input:()=>Ft},"ai.prompt.messages":{input:()=>JSON.stringify(Zt)},"ai.prompt.tools":{input:()=>{var Rt;return(Rt=ye.tools)==null?void 0:Rt.map(Lt=>JSON.stringify(Lt))}},"ai.prompt.toolChoice":{input:()=>ye.toolChoice!=null?JSON.stringify(ye.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ie,endWhenDone:!1,fn:async Rt=>({startTimestampMs:E(),doStreamSpan:Rt,result:await e.doStream({mode:ye,...Rme(r),inputFormat:Ft,responseFormat:w==null?void 0:w.responseFormat({model:e}),prompt:Zt,providerMetadata:S,abortSignal:i,headers:n})})})),le=wge({tools:u,generatorStream:O,toolCallStreaming:h,tracer:Ie,telemetry:t,system:s,messages:Pt,repairToolCall:v,abortSignal:i}),ft=je??{},vt=[],F=[],Be=[],nt=[];let ge,Oe="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},jt,pe=!0,V="",H=Ee==="continue"?We:"",W,he={id:k(),timestamp:C(),modelId:e.modelId},Ne="",He=!1,pt=!0,Kt=!1;async function ut({controller:Rt,chunk:Lt}){Rt.enqueue(Lt),V+=Lt.textDelta,H+=Lt.textDelta,He=!0,Kt=Lt.textDelta.trimEnd()!==Lt.textDelta}Te.addStream(le.pipeThrough(new TransformStream({async transform(Rt,Lt){var Qt,An,Wn;if(pe){const _r=E()-Ce;pe=!1,be.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":_r}),be.setAttributes({"ai.response.msToFirstChunk":_r}),Lt.enqueue({type:"step-start",messageId:it,request:ft,warnings:G??[]})}if(Rt.type==="text-delta"&&Rt.textDelta.length===0)return;const xr=Rt.type;switch(xr){case"text-delta":{if(x){const _r=pt&&Nt?Rt.textDelta.trimStart():Rt.textDelta;if(_r.length===0)break;pt=!1,Ne+=_r;const Fn=lge(Ne);Fn!=null&&(Ne=Fn.suffix,await ut({controller:Lt,chunk:{type:"text-delta",textDelta:Fn.prefix+Fn.whitespace}}))}else await ut({controller:Lt,chunk:Rt});break}case"reasoning":{Lt.enqueue(Rt),ge==null?(ge={type:"text",text:Rt.textDelta},Be.push(ge)):ge.text+=Rt.textDelta;break}case"reasoning-signature":{if(Lt.enqueue(Rt),ge==null)throw new yge({chunk:Rt,message:"reasoning-signature without reasoning"});ge.signature=Rt.signature,ge=void 0;break}case"redacted-reasoning":{Lt.enqueue(Rt),Be.push({type:"redacted",data:Rt.data});break}case"tool-call":{Lt.enqueue(Rt),vt.push(Rt);break}case"tool-result":{Lt.enqueue(Rt),F.push(Rt);break}case"response-metadata":{he={id:(Qt=Rt.id)!=null?Qt:he.id,timestamp:(An=Rt.timestamp)!=null?An:he.timestamp,modelId:(Wn=Rt.modelId)!=null?Wn:he.modelId};break}case"finish":{Ke=Rt.usage,Oe=Rt.finishReason,jt=Rt.experimental_providerMetadata,W=Rt.logprobs;const _r=E()-Ce;be.addEvent("ai.stream.finish"),be.setAttributes({"ai.response.msToFinish":_r,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/_r});break}case"file":{nt.push(Rt),Lt.enqueue(Rt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Lt.enqueue(Rt);break}case"error":{Lt.enqueue(Rt),Oe="error";break}default:{const _r=xr;throw new Error(`Unknown chunk type: ${_r}`)}}},async flush(Rt){const Lt=vt.length>0?JSON.stringify(vt):void 0;let Qt="done";ee+1<b&&(x&&Oe==="length"&&vt.length===0?Qt="continue":vt.length>0&&F.length===vt.length&&(Qt="tool-result")),x&&Ne.length>0&&(Qt!=="continue"||Ee==="continue"&&!He)&&(await ut({controller:Rt,chunk:{type:"text-delta",textDelta:Ne}}),Ne="");try{be.setAttributes(gh({telemetry:t,attributes:{"ai.response.finishReason":Oe,"ai.response.text":{output:()=>V},"ai.response.toolCalls":{output:()=>Lt},"ai.response.id":he.id,"ai.response.model":he.modelId,"ai.response.timestamp":he.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[Oe],"gen_ai.response.id":he.id,"gen_ai.response.model":he.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{be.end()}Rt.enqueue({type:"step-finish",finishReason:Oe,usage:Ke,providerMetadata:jt,experimental_providerMetadata:jt,logprobs:W,request:ft,response:{...he,headers:fe==null?void 0:fe.headers},warnings:G,isContinued:Qt==="continue",messageId:it});const An=Kme(Pe,Ke);if(Qt==="done")Rt.enqueue({type:"finish",finishReason:Oe,usage:An,providerMetadata:jt,experimental_providerMetadata:jt,logprobs:W,response:{...he,headers:fe==null?void 0:fe.headers}}),Te.closeStream();else{if(Ee==="continue"){const Wn=xe[xe.length-1];typeof Wn.content=="string"?Wn.content+=V:Wn.content.push({text:V,type:"text"})}else xe.push(...KO({text:V,files:nt,reasoning:Be,tools:u??{},toolCalls:vt,toolResults:F,messageId:it,generateMessageId:I}));await oe({currentStep:ee+1,responseMessages:xe,usage:An,stepType:Qt,previousStepText:H,hasLeadingWhitespace:Kt,messageId:Qt==="continue"?it:I()})}}})))}await oe({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:I()})}}).catch(ue=>{Te.addStream(new ReadableStream({start(oe){oe.enqueue({type:"error",error:ue}),oe.close()}})),Te.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return S2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return S2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new nge;return S2(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,s)=>{const o=i.type;switch(o){case"text-delta":{s.enqueue(ni("text",i.textDelta));break}case"reasoning":{n&&s.enqueue(ni("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&s.enqueue(ni("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&s.enqueue(ni("reasoning_signature",{signature:i.signature}));break}case"file":{s.enqueue(ni("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&s.enqueue(ni("source",i.source));break}case"tool-call-streaming-start":{s.enqueue(ni("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{s.enqueue(ni("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{s.enqueue(ni("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{s.enqueue(ni("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{s.enqueue(ni("error",e(i.error)));break}case"step-start":{s.enqueue(ni("start_step",{messageId:i.messageId}));break}case"step-finish":{s.enqueue(ni("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&s.enqueue(ni("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const l=o;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u}={}){zO({response:e,status:t,statusText:n,headers:BO(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){zO({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:BO(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?sA(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:n,headers:Fw(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:Fw(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};function kge(e,t){if(t.length===0)return null;const n=e.indexOf(t);if(n!==-1)return n;for(let r=e.length-1;r>=0;r--){const a=e.substring(r);if(t.startsWith(a))return r}return null}function Tge({tagName:e,separator:t=`
`,startWithReasoning:n=!1}){const r=`<${e}>`,a=`</${e}>`;return{middlewareVersion:"v1",wrapGenerate:async({doGenerate:i})=>{const{text:s,...o}=await i();if(s==null)return{text:s,...o};const l=n?r+s:s,u=new RegExp(`${r}(.*?)${a}`,"gs"),d=Array.from(l.matchAll(u));if(!d.length)return{text:l,...o};const h=d.map(y=>y[1]).join(t);let p=l;for(let y=d.length-1;y>=0;y--){const v=d[y],b=p.slice(0,v.index),w=p.slice(v.index+v[0].length);p=b+(b.length>0&&w.length>0?t:"")+w}return{...o,text:p,reasoning:h}},wrapStream:async({doStream:i})=>{const{stream:s,...o}=await i();let l=!0,u=!0,d=!1,h=n,p="";return{stream:s.pipeThrough(new TransformStream({transform:(y,v)=>{if(y.type!=="text-delta"){v.enqueue(y);return}p+=y.textDelta;function b(w){if(w.length>0){const x=d&&(h?!l:!u)?t:"";v.enqueue({type:h?"reasoning":"text-delta",textDelta:x+w}),d=!1,h?l=!1:u=!1}}do{const w=h?a:r,x=kge(p,w);if(x==null){b(p),p="";break}if(b(p.slice(0,x)),x+w.length<=p.length)p=p.slice(x+w.length),h=!h,d=!0;else{p=p.slice(x);break}}while(!0)}})),...o}}}}var Age=({model:e,middleware:t,modelId:n,providerId:r})=>d9(t).reverse().reduce((a,i)=>Nge({model:a,middleware:i,modelId:n,providerId:r}),e),Nge=({model:e,middleware:{transformParams:t,wrapGenerate:n,wrapStream:r},modelId:a,providerId:i})=>{var s;async function o({params:l,type:u}){return t?await t({params:l,type:u}):l}return{specificationVersion:"v1",provider:i??e.provider,modelId:a??e.modelId,defaultObjectGenerationMode:e.defaultObjectGenerationMode,supportsImageUrls:e.supportsImageUrls,supportsUrl:(s=e.supportsUrl)==null?void 0:s.bind(e),supportsStructuredOutputs:e.supportsStructuredOutputs,async doGenerate(l){const u=await o({params:l,type:"generate"}),d=async()=>e.doGenerate(u);return n?n({doGenerate:d,doStream:async()=>e.doStream(u),params:u,model:e}):d()},async doStream(l){const u=await o({params:l,type:"stream"}),d=async()=>e.doGenerate(u),h=async()=>e.doStream(u);return r?r({doGenerate:d,doStream:h,params:u,model:e}):h()}}},Rge=U.object({name:U.string(),version:U.string()}).passthrough(),oA=U.object({_meta:U.optional(U.object({}).passthrough())}).passthrough(),e0=oA,Ige=U.object({method:U.string(),params:U.optional(oA)}),jge=U.object({experimental:U.optional(U.object({}).passthrough()),logging:U.optional(U.object({}).passthrough()),prompts:U.optional(U.object({listChanged:U.optional(U.boolean())}).passthrough()),resources:U.optional(U.object({subscribe:U.optional(U.boolean()),listChanged:U.optional(U.boolean())}).passthrough()),tools:U.optional(U.object({listChanged:U.optional(U.boolean())}).passthrough())}).passthrough();e0.extend({protocolVersion:U.string(),capabilities:jge,serverInfo:Rge,instructions:U.optional(U.string())});var Oge=e0.extend({nextCursor:U.optional(U.string())}),Dge=U.object({name:U.string(),description:U.optional(U.string()),inputSchema:U.object({type:U.literal("object"),properties:U.optional(U.object({}).passthrough())}).passthrough()}).passthrough();Oge.extend({tools:U.array(Dge)});var Mge=U.object({type:U.literal("text"),text:U.string()}).passthrough(),Pge=U.object({type:U.literal("image"),data:U.string().base64(),mimeType:U.string()}).passthrough(),f9=U.object({uri:U.string(),mimeType:U.optional(U.string())}).passthrough(),Fge=f9.extend({text:U.string()}),Lge=f9.extend({blob:U.string().base64()}),$ge=U.object({type:U.literal("resource"),resource:U.union([Fge,Lge])}).passthrough();e0.extend({content:U.array(U.union([Mge,Pge,$ge])),isError:U.boolean().default(!1).optional()}).or(e0.extend({toolResult:U.unknown()}));var l1="2.0",Bge=U.object({jsonrpc:U.literal(l1),id:U.union([U.string(),U.number().int()])}).merge(Ige).strict(),zge=U.object({jsonrpc:U.literal(l1),id:U.union([U.string(),U.number().int()]),result:e0}).strict(),Uge=U.object({jsonrpc:U.literal(l1),id:U.union([U.string(),U.number().int()]),error:U.object({code:U.number().int(),message:U.string(),data:U.optional(U.unknown())})}).strict(),Hge=U.object({jsonrpc:U.literal(l1)}).merge(U.object({method:U.string(),params:U.optional(oA)})).strict();U.union([Bge,Hge,zge,Uge]);var qge={};iA(qge,{mergeIntoDataStream:()=>Wge,toDataStream:()=>Vge,toDataStreamResponse:()=>Gge});function h9(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function lA(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&ZO((a=n.data)==null?void 0:a.chunk,r);return}ZO(n,r)}})).pipeThrough(h9(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(ni("text",n))}}))}function Vge(e,t){return lA(e,t).pipeThrough(new TextEncoderStream)}function Gge(e,t){var n;const r=lA(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,s=a?sA(a.stream,r):r;return new Response(s,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:Fw(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Wge(e,t){t.dataStream.merge(lA(e,t.callbacks))}function ZO(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var Kge={};iA(Kge,{mergeIntoDataStream:()=>Xge,toDataStream:()=>Zge,toDataStreamResponse:()=>Yge});function cA(e,t){const n=Jge();return fG(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(h9(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(ni("text",r))}}))}function Zge(e,t){return cA(e,t).pipeThrough(new TextEncoderStream)}function Yge(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,s=cA(e,i).pipeThrough(new TextEncoderStream),o=a?sA(a.stream,s):s;return new Response(o,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:Fw(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Xge(e,t){t.dataStream.merge(cA(e,t.callbacks))}function Jge(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class Qge{static async executeInteraction(t,n,r){let a,i=!1;try{a=await Sge(n);for await(const s of a.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(s.type){case"text-delta":r.onChunk(s.textDelta);break;case"tool-call":r.onToolCall(s);break;case"tool-result":r.onToolResult(s);break;case"finish":i=!0,r.onFinish({finishReason:s.finishReason,usage:s.usage,providerMetadata:s.providerMetadata});break;case"error":r.onError(new Error(`AI Stream Error Part: ${s.error instanceof Error?s.error.message:s.error}`));return;default:break}}!n.abortSignal.aborted&&!i&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(s){console.error(`[AIService] Error during streamText call for ${t}:`,s),s instanceof Error&&s.name==="AbortError"||r.onError(s instanceof Error?s:new Error(String(s)))}finally{console.log(`[AIService] Stream processing loop finished for ${t}.`)}}}const Av={_activeControllers:new Map,_streamingToolData:new Map,_firstChunkTimestamps:new Map,_interactionStartTimes:new Map,async startInteraction(e,t,n,r="message.user_assistant"){var Z,P,K,q,de,ae,te,X,re;console.log(`[InteractionService] startInteraction called (Type: ${r})`,e,t,n);const a=await fC(Mv.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(a===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const i=a&&typeof a=="object"?a.prompt:e,s=wi(),o=new AbortController;this._activeControllers.set(s,o),this._streamingToolData.set(s,{calls:[],results:[]}),this._firstChunkTimestamps.delete(s),this._interactionStartTimes.delete(s);const l=qn.getState(),d=l.interactions.filter(D=>D.conversationId===t),h=r==="conversation.title_generation"?-1:d.reduce((D,J)=>Math.max(D,J.index),-1)+1,p=r==="conversation.title_generation"?null:d.length>0?d[d.length-1].id:null,y=performance.now();this._interactionStartTimes.set(s,y);const v={id:s,conversationId:t,type:r,prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...i.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0,timeToFirstToken:void 0,generationTime:void 0,isTitleGeneration:r==="conversation.title_generation"},index:h,parentId:p};r!=="conversation.title_generation"?(l._addInteractionToState(v),l._addStreamingId(s)):(l._addInteractionToState(v),l._addStreamingId(s),console.log(`[InteractionService] Added title generation interaction ${s} to state.`)),xt.saveInteraction({...v}).catch(D=>{console.error(`[InteractionService] Failed initial persistence for ${s}`,D)}),Ct.emit(St.INTERACTION_STARTED,{interactionId:s,conversationId:t,type:v.type});const b=(Z=i.metadata)==null?void 0:Z.modelId;if(!b)return this._finalizeInteraction(s,"ERROR",new Error("No model ID specified in prompt metadata."),r),null;const{providerId:w,modelId:x}=sc(b);if(!w||!x)return this._finalizeInteraction(s,"ERROR",new Error(`Invalid combined model ID format: ${b}`),r),null;const S=$n.getState().dbProviderConfigs.find(D=>D.id===w);if(!S)return this._finalizeInteraction(s,"ERROR",new Error(`Provider configuration not found for ID: ${w}`),r),null;const E=$n.getState().getApiKeyForProvider(w),C=N8(S,x,E);if(!C)return this._finalizeInteraction(s,"ERROR",new Error(`Failed to instantiate model instance for ${b} from provider ${S.name}`),r),null;console.log(`[InteractionService] Using model instance for ${b}`);const k=r!=="conversation.title_generation"?(((P=i.metadata)==null?void 0:P.enabledTools)??[]).reduce((D,J)=>{const ie=Rr.getState().getRegisteredTools()[J];if(ie!=null&&ie.implementation){const me={...ie.definition};me.execute=async ve=>{const Me=qn.getState().currentConversationId,Ae=Me?mn.getState().getConversationById(Me):null,Re=(Ae==null?void 0:Ae.projectId)??"orphan";let ke;try{ke=await so.getState().initializeVFS(Re,{force:!0})}catch(Fe){return{_isError:!0,error:`Filesystem error: ${Fe.message}`}}try{const Fe=IX(),et=ie.definition.parameters.parse(ve),Le=ie.implementation,Ie={...Fe,fsInstance:ke};return await Le(et,Ie)}catch(Fe){const et=Fe instanceof Error?Fe.message:String(Fe);return Fe instanceof U.ZodError?{_isError:!0,error:`Invalid arguments: ${Fe.errors.map(Le=>`${Le.path.join(".")} (${Le.message})`).join(", ")}`}:{_isError:!0,error:et}}},D[J]=me}return D},{}):void 0,I=((K=i.parameters)==null?void 0:K.maxSteps)??lr.getState().toolMaxSteps,R=Tge({tagName:"reasoning"}),L={model:Age({model:C,middleware:R}),messages:i.messages,abortSignal:o.signal,system:i.system,temperature:(q=i.parameters)==null?void 0:q.temperature,maxTokens:(de=i.parameters)==null?void 0:de.max_tokens,topP:(ae=i.parameters)==null?void 0:ae.top_p,topK:(te=i.parameters)==null?void 0:te.top_k,presencePenalty:(X=i.parameters)==null?void 0:X.presence_penalty,frequencyPenalty:(re=i.parameters)==null?void 0:re.frequency_penalty,maxSteps:I,...k&&Object.keys(k).length>0&&{tools:k},toolChoice:i.toolChoice??(k&&Object.keys(k).length>0?"auto":"none")},B={onChunk:D=>this._handleChunk(s,D),onToolCall:D=>this._handleToolCall(s,D),onToolResult:D=>this._handleToolResult(s,D),onFinish:D=>this._handleFinish(s,D,r),onError:D=>this._handleError(s,D,r)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${s}`),Qge.executeInteraction(s,L,B).catch(D=>{console.error(`[InteractionService] Error calling AIService.executeInteraction for ${s}:`,D),this._handleError(s,D instanceof Error?D:new Error("Failed to start AI execution"),r)}),s},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);if(t&&!t.signal.aborted)t.abort(),Ye.info("Interaction cancelled.");else{console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`);const n=qn.getState(),r=n.interactions.find(a=>a.id===e);n.streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"),(r==null?void 0:r.type)??"message.user_assistant"))}},async _handleChunk(e,t){this._firstChunkTimestamps.has(e)||this._firstChunkTimestamps.set(e,performance.now());const n={interactionId:e,chunk:t},r=await fC(Mv.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const a=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;qn.getState().appendInteractionResponseChunk(e,a),Ct.emit(St.INTERACTION_STREAM_CHUNK,{interactionId:e,chunk:a})}},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),qn.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),qn.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t,n){console.log(`[InteractionService] Finishing interaction ${e} (Type: ${n}). Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,n,t)},_handleError(e,t,n){console.error(`[InteractionService] Handling error for interaction ${e} (Type: ${n}):`,t);const r=t.name==="AbortError";this._finalizeInteraction(e,r?"CANCELLED":"ERROR",r?void 0:t,n)},_finalizeInteraction(e,t,n,r="message.user_assistant",a){var C;const i=qn.getState(),s=i.interactions.find(k=>k.id===e);if(!s||s.status!=="STREAMING"&&r!=="conversation.title_generation"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e);return}const o=i.activeStreamBuffers[e]??"",l=this._streamingToolData.get(e)||{calls:[],results:[]},u=(s==null?void 0:s.metadata)||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}`);const d=performance.now(),h=this._interactionStartTimes.get(e),p=this._firstChunkTimestamps.get(e),y=h?Math.round(d-h):void 0,v=h&&p?Math.round(p-h):void 0,b=a==null?void 0:a.reasoning,w={status:t,endedAt:new Date,response:o||null,metadata:{...u,...(a==null?void 0:a.usage)&&{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens,totalTokens:a.usage.totalTokens},...(a==null?void 0:a.providerMetadata)&&{providerMetadata:a.providerMetadata},toolCalls:l.calls,toolResults:l.results,reasoning:b,timeToFirstToken:v,generationTime:y,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};if(r==="conversation.title_generation"&&t==="COMPLETED"&&w.response&&typeof w.response=="string"){const k=w.response.trim().replace(/^"|"$/g,"");k&&s&&(console.log(`[InteractionService] Updating conversation ${s.conversationId} title to: "${k}"`),mn.getState().updateConversation(s.conversationId,{title:k}).catch(I=>console.error("Failed to update conversation title:",I)))}i._updateInteractionInState(e,w),i._removeStreamingId(e);const x=qn.getState().interactions.find(k=>k.id===e);x?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((C=x.response)==null?void 0:C.length)??0}`),xt.saveInteraction({...x}).catch(k=>{console.error(`[InteractionService] Failed final persistence for ${e}`,k)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let S=[],E=[];try{S=l.calls.map(k=>JSON.parse(k)),E=l.results.map(k=>JSON.parse(k))}catch(k){console.error("[InteractionService] Failed to parse tool strings for event emitter:",k)}Ct.emit(St.INTERACTION_COMPLETED,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:S,toolResults:E}),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},Oo=(e,t)=>{Ct.emit(St.PROMPT_PARAMS_CHANGED,{params:{[e]:t}})},Si=Is(js((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),Oo("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),Oo("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),Oo("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),Oo("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),Oo("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),Oo("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),Oo("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),Oo("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),Oo("webSearchEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),Oo("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),a={};let i=!1;r.modelId!==n.modelId&&(a.modelId=n.modelId,i=!0),r.temperature!==n.temperature&&(a.temperature=n.temperature,i=!0),r.maxTokens!==n.maxTokens&&(a.maxTokens=n.maxTokens,i=!0),r.topP!==n.topP&&(a.topP=n.topP,i=!0),r.topK!==n.topK&&(a.topK=n.topK,i=!0),r.presencePenalty!==n.presencePenalty&&(a.presencePenalty=n.presencePenalty,i=!0),r.frequencyPenalty!==n.frequencyPenalty&&(a.frequencyPenalty=n.frequencyPenalty,i=!0),i&&(e(a),Ct.emit(St.PROMPT_PARAMS_CHANGED,{params:a}))},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let a=!1;n.temperature!==null&&(r.temperature=null,a=!0),n.maxTokens!==null&&(r.maxTokens=null,a=!0),n.topP!==null&&(r.topP=null,a=!0),n.topK!==null&&(r.topK=null,a=!0),n.presencePenalty!==null&&(r.presencePenalty=null,a=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,a=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,a=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,a=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,a=!0),a&&(e(r),Ct.emit(St.PROMPT_PARAMS_CHANGED,{params:r}))}}))),ac=Is(js((e,t)=>({rules:[],tags:[],tagRuleLinks:[],isLoading:!1,error:null,loadRulesAndTags:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([xt.loadRules(),xt.loadTags(),xt.loadTagRuleLinks()]);e({rules:n,tags:r,tagRuleLinks:a,isLoading:!1})}catch(n){console.error("RulesStore: Error loading rules and tags",n),e({error:"Failed load rules/tags",isLoading:!1}),Ye.error("Failed to load rules and tags.")}},addRule:async n=>{const r=wi(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.rules.push(i),s.rules.sort((o,l)=>o.name.localeCompare(l.name))});try{return await xt.saveRule(i),Ye.success(`Rule "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding rule",s),e(o=>({error:"Failed to save new rule",rules:o.rules.filter(l=>l.id!==r)})),Ye.error("Failed to save new rule."),s}},updateRule:async(n,r)=>{const a=t().rules.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.rules.findIndex(l=>l.id===n);o!==-1&&(s.rules[o]=i,s.rules.sort((l,u)=>l.name.localeCompare(u.name)))});try{await xt.saveRule(i),Ye.success(`Rule "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating rule",s),e(o=>{const l=o.rules.findIndex(u=>u.id===n);l!==-1&&(o.rules[l]=a,o.rules.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save rule update"}),Ye.error("Failed to save rule update."),s}},deleteRule:async n=>{const r=t().rules.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.ruleId===n);e(i=>({rules:i.rules.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.ruleId!==n)}));try{await xt.deleteRule(n),Ye.success(`Rule "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting rule",i),e(s=>{s.rules.push(r),s.rules.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete rule"}),Ye.error("Failed to delete rule."),i}},addTag:async n=>{const r=wi(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.tags.push(i),s.tags.sort((o,l)=>o.name.localeCompare(l.name))});try{return await xt.saveTag(i),Ye.success(`Tag "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding tag",s),e(o=>({error:"Failed to save new tag",tags:o.tags.filter(l=>l.id!==r)})),Ye.error("Failed to save new tag."),s}},updateTag:async(n,r)=>{const a=t().tags.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.tags.findIndex(l=>l.id===n);o!==-1&&(s.tags[o]=i,s.tags.sort((l,u)=>l.name.localeCompare(u.name)))});try{await xt.saveTag(i),Ye.success(`Tag "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating tag",s),e(o=>{const l=o.tags.findIndex(u=>u.id===n);l!==-1&&(o.tags[l]=a,o.tags.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save tag update"}),Ye.error("Failed to save tag update."),s}},deleteTag:async n=>{const r=t().tags.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.tagId===n);e(i=>({tags:i.tags.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.tagId!==n)}));try{await xt.deleteTag(n),Ye.success(`Tag "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting tag",i),e(s=>{s.tags.push(r),s.tags.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete tag"}),Ye.error("Failed to delete tag."),i}},linkTagToRule:async(n,r)=>{const a=`${n}-${r}`;if(t().tagRuleLinks.find(o=>o.id===a))return;const s={id:a,tagId:n,ruleId:r};e(o=>{o.tagRuleLinks.push(s)});try{await xt.saveTagRuleLink(s)}catch(o){throw console.error("RulesStore: Error linking tag to rule",o),e(l=>({error:"Failed to link tag and rule",tagRuleLinks:l.tagRuleLinks.filter(u=>u.id!==a)})),Ye.error("Failed to link tag and rule."),o}},unlinkTagFromRule:async(n,r)=>{const a=`${n}-${r}`,i=t().tagRuleLinks.find(s=>s.id===a);if(i){e(s=>({tagRuleLinks:s.tagRuleLinks.filter(o=>o.id!==a)}));try{await xt.deleteTagRuleLink(a)}catch(s){throw console.error("RulesStore: Error unlinking tag from rule",s),e(o=>{o.tagRuleLinks.push(i),o.error="Failed to unlink tag and rule"}),Ye.error("Failed to unlink tag and rule."),s}}},getRulesForTag:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.tagId===n).map(i=>i.ruleId));return r.rules.filter(i=>a.has(i.id))},getTagsForRule:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.ruleId===n).map(i=>i.tagId));return r.tags.filter(i=>a.has(i.id))},getRuleById:n=>t().rules.find(r=>r.id===n),getTagById:n=>t().tags.find(r=>r.id===n),getRulesByIds:n=>{const r=new Set(n);return t().rules.filter(a=>r.has(a.id))}}))),YO={async submitPrompt(e){var q,de,ae,te,X,re;console.log("[ConversationService] submitPrompt called",e);const t=qn.getState(),n=ai.getState(),r=Si.getState(),a=mn.getState(),i=ac.getState(),s=lr.getState(),o=t.currentConversationId;if(!o){Ye.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const l=a.getConversationById(o),u=(l==null?void 0:l.projectId)??null,h=t.interactions.filter(D=>D.conversationId===o).length===0&&s.autoTitleEnabled&&((q=e.metadata)==null?void 0:q.autoTitleEnabledForTurn)===!0&&s.autoTitleModelId,y=t.interactions.filter(D=>D.status==="COMPLETED"&&D.type==="message.user_assistant"),v=P3(y);let b=e.content;const w=[],x=((de=e.metadata)==null?void 0:de.activeTagIds)??[],S=((ae=e.metadata)==null?void 0:ae.activeRuleIds)??[],E=new Set(S);x.forEach(D=>{i.getRulesForTag(D).forEach(J=>E.add(J.id))});const C=i.getRulesByIds(Array.from(E))||[],k=C.filter(D=>D.type==="system").map(D=>D.content),I=C.filter(D=>D.type==="before").map(D=>D.content),R=C.filter(D=>D.type==="after").map(D=>D.content);I.length>0&&(b=`${I.join(`
`)}

${b}`),R.length>0&&(b=`${b}

    ${R.join(`
`)}`),b&&w.push({type:"text",text:b});const j=((te=e.metadata)==null?void 0:te.attachedFiles)??[];if(j.length>0){const D=await this._processFilesForPrompt(j,o);w.unshift(...D)}w.length>0?v.push({role:"user",content:w}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");const L=(X=e.metadata)==null?void 0:X.turnSystemPrompt,B=n.getEffectiveProjectSettings(u);let Z=L??B.systemPrompt??void 0;k.length>0&&(Z=`${Z?`${Z}

        `:""}${k.join(`
`)}`);const P={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(P).forEach(D=>{(P[D]===null||P[D]===void 0)&&delete P[D]});const K={system:Z,messages:v,parameters:P,metadata:{...(({turnSystemPrompt:D,activeTagIds:J,activeRuleIds:Q,autoTitleEnabledForTurn:ie,...me})=>me)(e.metadata??{}),modelId:r.modelId,attachedFiles:(re=e.metadata.attachedFiles)==null?void 0:re.map(({contentBase64:D,contentText:J,...Q})=>Q)}};try{const D=Av.startInteraction(K,o,e);h&&(console.log("[ConversationService] Triggering asynchronous title generation."),this.generateConversationTitle(o,e,C).catch(J=>{console.error("[ConversationService] Background title generation failed:",J)})),await D}catch(D){throw console.error("[ConversationService] Error starting interaction:",D),Ye.error(`Failed to start interaction: ${D instanceof Error?D.message:String(D)}`),D}},async generateConversationTitle(e,t,n){var o,l;const r=lr.getState();if(!r.autoTitleModelId){console.warn("[ConversationService] Auto-title generation skipped: No model selected in settings.");return}let a=t.content;if(a.length>r.autoTitlePromptMaxLength&&(a=a.substring(0,r.autoTitlePromptMaxLength)+"..."),r.autoTitleIncludeFiles&&((l=(o=t.metadata)==null?void 0:o.attachedFiles)!=null&&l.length)){const u=t.metadata.attachedFiles.map(d=>d.name).join(", ");a+=`

[Attached files: ${u}]`}if(r.autoTitleIncludeRules&&n.length>0){const u=n.map(d=>d.name).join(", ");a+=`

[Active rules: ${u}]`}const i={system:"Generate a concise, descriptive title (max 8-10 words) for the following user prompt. Output ONLY the title text, nothing else.",messages:[{role:"user",content:a}],parameters:{temperature:.5,max_tokens:20},metadata:{modelId:r.autoTitleModelId,isTitleGeneration:!0},tools:void 0,toolChoice:"none"},s={id:wi(),content:`[Generate title based on: ${t.content.substring(0,50)}...]`,parameters:i.parameters,metadata:{...i.metadata,originalTurnId:t.id}};try{await Av.startInteraction(i,e,s,"conversation.title_generation")}catch(u){console.error("[ConversationService] Error starting title generation interaction:",u)}},async regenerateInteraction(e){var K,q,de,ae;console.log("[ConversationService] regenerateInteraction called",e);const t=qn.getState(),n=ai.getState(),r=Si.getState(),a=mn.getState(),i=ac.getState(),s=t.interactions.find(te=>te.id===e);if(!s||!s.prompt){Ye.error("Cannot regenerate: Original interaction data missing.");return}const o=s.prompt,l=s.conversationId,u=a.getConversationById(l),d=(u==null?void 0:u.projectId)??null,h=s.index,p=t.interactions.filter(te=>te.conversationId===l&&te.index<h&&te.status==="COMPLETED"&&te.type==="message.user_assistant").sort((te,X)=>te.index-X.index),y=P3(p);let v=o.content;const b=[],w=((K=o.metadata)==null?void 0:K.activeTagIds)??[],x=((q=o.metadata)==null?void 0:q.activeRuleIds)??[],S=new Set(x);w.forEach(te=>{i.getRulesForTag(te).forEach(X=>S.add(X.id))});const E=i.getRulesByIds(Array.from(S))||[],C=E.filter(te=>te.type==="before").map(te=>te.content),k=E.filter(te=>te.type==="after").map(te=>te.content);C.length>0&&(v=`${C.join(`
`)}

${v}`),k.length>0&&(v=`${v}

    ${k.join(`
`)}`),v&&b.push({type:"text",text:v});const I=((de=o.metadata)==null?void 0:de.attachedFiles)??[];if(I.length>0){const te=await this._processFilesForPrompt(I,l);b.unshift(...te)}b.length>0?y.push({role:"user",content:b}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");const R=(ae=o.metadata)==null?void 0:ae.turnSystemPrompt,j=n.getEffectiveProjectSettings(d);let L=R??j.systemPrompt??void 0;const B=E.filter(te=>te.type==="system").map(te=>te.content);B.length>0&&(L=`${L?`${L}

        `:""}${B.join(`
`)}`);const Z={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...o.parameters??{}};Object.keys(Z).forEach(te=>{(Z[te]===null||Z[te]===void 0)&&delete Z[te]});const P={system:L,messages:y,parameters:Z,metadata:{...(({turnSystemPrompt:te,activeTagIds:X,activeRuleIds:re,autoTitleEnabledForTurn:D,...J})=>J)(o.metadata??{}),modelId:r.modelId,regeneratedFromId:e,attachedFiles:I.map(({contentBase64:te,contentText:X,...re})=>re)}};try{await Av.startInteraction(P,l,o,"message.assistant_regen")}catch(te){throw console.error("[ConversationService] Error starting regeneration interaction:",te),Ye.error(`Failed to start regeneration: ${te instanceof Error?te.message:String(te)}`),te}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(i=>i.source==="vfs");let a;if(r.length>0){const i=mn.getState().getConversationById(t),s=(i==null?void 0:i.projectId)??"orphan";try{a=await this._ensureVfsReady(s)}catch{Ye.error(`Filesystem unavailable for key ${s}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),a=void 0}}for(const i of e){let s=null;try{if(i.source==="direct")s=M3(i);else if(i.source==="vfs"&&a&&i.path){console.log(`[ConversationService] Fetching VFS file: ${i.path}`);const o=await of(i.path,{fsInstance:a});s=M3({...i,contentBytes:o})}else if(i.source==="vfs"&&!a)continue;s&&n.push(s)}catch(o){console.error(`[ConversationService] Error processing file ${i.name}:`,o),n.push({type:"text",text:`[Error processing file: ${i.name}]`})}}return n},async _ensureVfsReady(e){console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`);try{const t=await so.getState().initializeVFS(e,{force:!0});return console.log(`[ConversationService] VFS ready for key "${e}".`),t}catch(t){throw console.error(`[ConversationService] Failed to ensure VFS ready for key ${e}:`,t),t}}},t0=Is(js((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await xt.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),Ye.error(r)}},addDbMod:async n=>{const r=wi(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((s,o)=>s.loadOrder-o.loadOrder)});try{return await xt.saveMod(a),Ye.success(`Mod "${a.name}" added.`),r}catch(i){const s="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(o=>{o.dbMods=o.dbMods.filter(l=>l.id!==r),o.error=s}),Ye.error(s),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(o=>{i=o.dbMods.findIndex(l=>l.id===n),i!==-1?(a={...o.dbMods[i]},o.dbMods[i]={...o.dbMods[i],...r},r.loadOrder!==void 0&&o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const s=i!==-1?t().dbMods[i]:void 0;if(s)try{await xt.saveMod(s),Ye.success(`Mod "${s.name}" updated.`)}catch(o){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",o),e(u=>{const d=u.dbMods.findIndex(h=>h.id===n);d!==-1&&a&&(u.dbMods[d]=a,u.dbMods.sort((h,p)=>h.loadOrder-p.loadOrder)),u.error=l}),Ye.error(l),o}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(s=>s.id!==n)}));try{await xt.deleteMod(n),Ye.success(`Mod "${a}" deleted.`)}catch(i){const s="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(o=>{o.dbMods.push(r),o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder),o.error=s}),Ye.error(s),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function XO(e){const t=e.id,n=e.name,r=Rr.getState(),a=t0.getState();return{modId:t,modName:n,registerPromptControl:s=>r.registerPromptControl(s),registerChatControl:s=>{const o={...s,status:s.status??(()=>"ready")};return r.registerChatControl(o)},registerTool:(s,o,l)=>(console.log(`[${n}] Registering tool: ${s}`),r.registerTool(t,s,o,l)),on:(s,o)=>(Ct.on(s,o),()=>Ct.off(s,o)),addMiddleware:(s,o)=>r.registerMiddleware(s,t,o),registerSettingsTab:s=>(a._addSettingsTab(s),()=>a._removeSettingsTab(s.id)),getContextSnapshot:()=>{const s=qn.getState(),o=mn.getState(),l=lr.getState(),u=$n.getState(),{providerId:d}=sc(u.selectedModelId),h=o.selectedItemType==="conversation"?o.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(s.currentConversationId===h?s.interactions.map(p=>Object.freeze({...p})):[]),isStreaming:s.status==="streaming",selectedProviderId:d,selectedModelId:u.selectedModelId,activeSystemPrompt:l.globalSystemPrompt,temperature:l.temperature,maxTokens:l.maxTokens,theme:l.theme})},showToast:(s,o)=>{Ye[s](`[${n}] ${o}`)},log:(s,...o)=>{console[s](`[Mod: ${n}]`,...o)}}}async function e0e(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,s=null;try{if(i=XO(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const u=await fetch(r.sourceUrl);if(!u.ok)throw new Error(`Failed to fetch mod script: ${u.status} ${u.statusText}`);a=await u.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(u){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,u),u}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){s=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),Ye.error(`Error loading mod "${r.name}": ${s instanceof Error?s.message:s}`)}i||(i=XO(r));const o={id:r.id,name:r.name,api:i,error:s??void 0};return Ct.emit(o.error?St.MOD_ERROR:St.MOD_LOADED,{id:r.id,name:r.name,error:o.error}),o}));return Ct.emit(St.APP_LOADED,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var t0e=(e,t,n,r,a,i,s,o)=>{let l=document.documentElement,u=["light","dark"];function d(y){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",w=b&&i?a.map(x=>i[x]||x):a;b?(l.classList.remove(...w),l.classList.add(i&&i[y]?i[y]:y)):l.setAttribute(v,y)}),h(y)}function h(y){o&&u.includes(y)&&(l.style.colorScheme=y)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let y=localStorage.getItem(t)||n,v=s&&y==="system"?p():y;d(v)}catch{}},n0e=T.createContext(void 0),r0e={setTheme:e=>{},themes:[]},a0e=()=>{var e;return(e=T.useContext(n0e))!=null?e:r0e};T.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:s,themes:o,nonce:l,scriptProps:u})=>{let d=JSON.stringify([n,t,i,e,o,s,r,a]).slice(1,-1);return T.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${t0e.toString()})(${d})`}})});const i0e=({...e})=>{const{theme:t="system"}=a0e();return m.jsx(TX,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function Pu({className:e,...t}){return m.jsx("textarea",{"data-slot":"textarea",className:At("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const p9=T.memo(T.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,onValueChange:i,...s},o)=>{const l=T.useRef(null),[u,d]=T.useState(e);T.useImperativeHandle(o,()=>({getValue:()=>u,focus:()=>{var y;return(y=l.current)==null?void 0:y.focus()}}));const h=y=>{if(y.key==="Enter"&&!y.shiftKey&&!n){y.preventDefault();const v=Zl.getState().attachedFilesMetadata.length>0;(u.trim().length>0||v)&&(t(),d(""),i&&i(""))}},p=y=>{const v=y.target.value;d(v),i&&i(v)};return T.useEffect(()=>{const y=l.current;if(y){y.style.height="auto";const v=y.scrollHeight,b=250;y.style.height=`${Math.min(v,b)}px`,y.style.overflowY=v>b?"auto":"hidden"}},[u]),T.useEffect(()=>{d(e),i&&i(e)},[e,i]),m.jsx(Pu,{ref:l,value:u,onChange:p,onKeyDown:h,disabled:n,placeholder:r,rows:1,className:At("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...s})}));p9.displayName="InputArea";const s0e=({controls:e=[]})=>{const[t,n]=T.useState(!0),r=T.useRef(null),a=mn(D=>D.selectedItemId),i=mn(D=>D.selectedItemType),s=mn(D=>D.loadSidebarItems),o=mn(D=>D.getConversationById),{getEffectiveProjectSettings:l}=ai(dn(D=>({projects:D.projects,getProjectById:D.getProjectById,getEffectiveProjectSettings:D.getEffectiveProjectSettings}))),{interactions:u,status:d}=qn(dn(D=>({interactions:D.interactions,status:D.status}))),{globalError:h,isSidebarCollapsed:p,isChatControlPanelOpen:y,isProjectSettingsModalOpen:v,isVfsModalOpen:b}=is(dn(D=>({globalError:D.globalError,isSidebarCollapsed:D.isSidebarCollapsed,isChatControlPanelOpen:D.isChatControlPanelOpen,isProjectSettingsModalOpen:D.isProjectSettingsModalOpen,isVfsModalOpen:D.isVfsModalOpen}))),w=Rr(dn(D=>Object.values(D.chatControls))),{loadDbMods:x,setLoadedMods:S}=t0(dn(D=>({loadDbMods:D.loadDbMods,setLoadedMods:D.setLoadedMods}))),{loadInitialData:E}=$n(dn(D=>({loadInitialData:D.loadInitialData}))),{loadSettings:C}=lr(dn(D=>({loadSettings:D.loadSettings}))),{setVfsKey:k}=so(dn(D=>({setVfsKey:D.setVfsKey}))),{initializePromptState:I}=Si(dn(D=>({initializePromptState:D.initializePromptState}))),{loadRulesAndTags:R}=ac(dn(D=>({loadRulesAndTags:D.loadRulesAndTags}))),j=T.useCallback(()=>{requestAnimationFrame(()=>{var D;(D=r.current)==null||D.focus()})},[]);T.useEffect(()=>{let D=!0;return(async()=>{var Q;console.log("LiteChat: Starting initialization..."),n(!0);try{if(console.log("LiteChat: Loading core data..."),await C(),!D||(console.log("LiteChat: Settings loaded."),await E(),!D)||(console.log("LiteChat: Provider data loaded."),await R(),!D)||(console.log("LiteChat: Rules and Tags loaded."),await s(),!D)||(console.log("LiteChat: Sidebar items loaded."),console.log("LiteChat: Registering core controls and tools..."),e.forEach(Ae=>{try{Ae()}catch(Re){console.error("LiteChat: Error running registration function:",Re)}}),console.log("LiteChat: Core controls and tools registered."),!D)||(console.log("LiteChat: Loading mods..."),await x(),!D))return;console.log("LiteChat: DB Mods loaded.");const ie=t0.getState().dbMods;console.log(`LiteChat: Processing ${ie.length} mods...`);const me=await e0e(ie);if(!D)return;S(me),console.log(`LiteChat: ${me.length} mods processed.`);const ve=i==="project"?a:i==="conversation"?((Q=o(a))==null?void 0:Q.projectId)??null:null,Me=l(ve);I(Me),console.log("LiteChat: Initial prompt state initialized.",Me)}catch(ie){console.error("LiteChat: Initialization failed:",ie),Ye.error(`Initialization failed: ${ie instanceof Error?ie.message:String(ie)}`),is.getState().setGlobalError("Initialization failed.")}finally{D&&(console.log("LiteChat: Initialization complete."),n(!1))}})(),()=>{D=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[e]);const L=T.useRef({itemId:null,itemType:null});T.useEffect(()=>{var J;if(t)return;const D={itemId:a,itemType:i};if(D.itemId!==L.current.itemId||D.itemType!==L.current.itemType){const Q=i==="project"?a:i==="conversation"?((J=o(a))==null?void 0:J.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${a}, Type: ${i}). Calculating effective settings for Project ID: ${Q}`);const ie=l(Q);I(ie),console.log("[LiteChat Effect] Prompt state updated based on context change.",ie),L.current=D,D.itemType==="conversation"&&j()}},[a,i,o,l,I,t,j]),T.useEffect(()=>{let D=null;if(b||i==="project"){if(i==="project")D=a;else if(i==="conversation"){const J=mn.getState().getConversationById(a);D=(J==null?void 0:J.projectId)??"orphan"}else D="orphan";console.log(`[LiteChat Effect] VFS Context Required. Setting target key: ${D}`)}else D=null,console.log("[LiteChat Effect] VFS Context Not Required. Setting target key: null");so.getState().vfsKey!==D&&k(D)},[b,a,i,k]);const B=T.useCallback(async D=>{var me;const J=mn.getState();let Q=J.selectedItemType==="conversation"?J.selectedItemId:null;const ie=J.selectedItemType==="project"?J.selectedItemId:J.selectedItemType==="conversation"?((me=J.getConversationById(J.selectedItemId))==null?void 0:me.projectId)??null:null;if(!Q){console.log("LiteChat: No conversation selected, creating new one...");try{const ve=await J.addConversation({title:"New Chat",projectId:ie});await J.selectItem(ve,"conversation"),Q=mn.getState().selectedItemId,Q!==ve&&console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),console.log(`LiteChat: New conversation created (${Q}), selected.`)}catch(ve){console.error("LiteChat: Failed to create new conversation",ve),Ye.error("Failed to start new chat.");return}}console.log("LiteChat: Submitting turn data to ConversationService...");try{const ve=Si.getState(),Me={...D,metadata:{...D.metadata,modelId:ve.modelId}};await YO.submitPrompt(Me),console.log("LiteChat: ConversationService processing initiated."),j()}catch(ve){console.error("LiteChat: Error submitting prompt:",ve),j()}},[j]),Z=T.useCallback(async D=>{console.log(`LiteChat: Regenerating interaction ${D}`);try{await YO.regenerateInteraction(D),console.log(`LiteChat: ConversationService regeneration initiated for ${D}.`),j()}catch(J){console.error("LiteChat: Error regenerating interaction:",J),j()}},[j]),P=T.useCallback(D=>{console.log(`LiteChat: Stopping interaction ${D}`),Av.abortInteraction(D),j()},[j]),K=T.useMemo(()=>w.filter(D=>(D.panel??"main")==="sidebar"&&(D.show?D.show():!0)).map(D=>D),[w]),q=T.useMemo(()=>w.filter(D=>D.panel==="sidebar-footer"&&(D.show?D.show():!0)).map(D=>D),[w]),de=T.useMemo(()=>w.filter(D=>D.panel==="header"&&(D.show?D.show():!0)).map(D=>D),[w]),ae=T.useMemo(()=>{var D;return(D=w.find(J=>J.id==="core-settings-trigger"))==null?void 0:D.settingsRenderer},[w]),te=T.useMemo(()=>{var D;return(D=w.find(J=>J.id==="core-project-settings-trigger"))==null?void 0:D.settingsRenderer},[w]),X=T.useMemo(()=>{var D;return(D=w.find(J=>J.id==="core-vfs-modal-panel"))==null?void 0:D.renderer},[w]),re=i==="conversation"?a:null;return t?m.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx(Pn,{className:"h-12 w-12 animate-spin text-primary"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:At("flex h-full w-full border border-border rounded-lg overflow-hidden bg-background text-foreground"),children:[m.jsxs("div",{className:At("hidden md:flex flex-col border-r border-border bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",p?"w-16":"w-64"),children:[m.jsxs("div",{className:At("flex-grow overflow-y-auto overflow-x-hidden"),children:[m.jsx("div",{className:At(p?"hidden":"block"),children:m.jsx(dv,{controls:K,panelId:"sidebar",renderMode:"full",className:"h-full"})}),m.jsx("div",{className:At(p?"block":"hidden"),children:m.jsx(dv,{controls:K,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),m.jsx("div",{className:At("flex-shrink-0 border-t border-border p-2",p?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:m.jsx(dv,{controls:q,panelId:"sidebar-footer",renderMode:p?"icon":"full",className:At("flex",p?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),m.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[m.jsx("div",{className:"flex items-center justify-end p-2 border-b border-border bg-card flex-shrink-0",children:m.jsx(dv,{controls:de,panelId:"header",className:"flex items-center justify-end gap-1"})}),m.jsx(phe,{conversationId:re,interactions:u,onRegenerateInteraction:Z,onStopInteraction:P,status:d,className:"flex-grow overflow-y-hidden"}),h&&m.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",h]}),m.jsx(MX,{InputAreaRenderer:p9,onSubmit:B,className:"border-t border-border bg-card flex-shrink-0",inputAreaRef:r})]})]}),y.settingsModal&&ae&&ae(),v&&te&&te(),b&&X&&X(),m.jsx(i0e,{richColors:!0,position:"bottom-right",closeButton:!0})]})},JO="prism-theme-link",E2="prism-default-light-theme-link",C2="prism-default-dark-theme-link",o0e="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",l0e="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css",c0e=()=>{const{prismThemeUrl:e,theme:t}=lr(dn(a=>({prismThemeUrl:a.prismThemeUrl,theme:a.theme}))),n=T.useMemo(()=>typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),r=t==="system"?n:t;return T.useEffect(()=>{const a=(s,o)=>{let l=document.getElementById(o);l||(l=document.createElement("link"),l.id=o,l.rel="stylesheet",document.head.appendChild(l)),l.href!==s&&(l.href=s),l.disabled=!1},i=s=>{const o=document.getElementById(s);o&&(o.disabled=!0)};e?(a(e,JO),i(E2),i(C2)):(i(JO),r==="dark"?(a(l0e,C2),i(E2)):(a(o0e,E2),i(C2)))},[e,r]),null},QO=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),e6=["background","foreground","card","cardForeground","popover","popoverForeground","primary","primaryForeground","secondary","secondaryForeground","muted","mutedForeground","accent","accentForeground","destructive","destructiveForeground","border","input","ring"],u0e=()=>{const{theme:e,customFontFamily:t,customFontSize:n,customThemeColors:r}=lr(dn(a=>({theme:a.theme,customFontFamily:a.customFontFamily,customFontSize:a.customFontSize,customThemeColors:a.customThemeColors})));return T.useEffect(()=>{const a=document.body,i=document.documentElement;a.classList.remove("light","dark","TijuLight","TijuDark","custom"),e6.forEach(s=>{i.style.removeProperty(`--${QO(s)}`)}),i.style.removeProperty("--custom-font-family"),i.style.removeProperty("--custom-font-size"),e==="light"?a.classList.add("light"):e==="dark"?a.classList.add("dark"):e==="TijuLight"?a.classList.add("TijuLight"):e==="TijuDark"?a.classList.add("TijuDark"):e==="custom"?(a.classList.add("custom"),t&&i.style.setProperty("--custom-font-family",t),n&&i.style.setProperty("--custom-font-size",`${n}px`),r&&Object.entries(r).forEach(([s,o])=>{if(o&&e6.includes(s)){const l=`--${QO(s)}`;i.style.setProperty(l,o)}})):window.matchMedia("(prefers-color-scheme: dark)").matches?a.classList.add("dark"):a.classList.add("light")},[e,t,n,r]),null},t6="0.1.0-dev";class d0e extends T.Component{constructor(){super(...arguments);ha(this,"state",{hasError:!1,error:null,errorInfo:null});ha(this,"copyToClipboard",async(n,r)=>{try{await navigator.clipboard.writeText(n),Ye.success(`${r} copied to clipboard!`)}catch(a){Ye.error(`Failed to copy ${r.toLowerCase()}.`),console.error(`Clipboard copy failed for ${r}:`,a)}})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),this.setState({errorInfo:r})}getGitHubIssueUrl(){var i;const n="https://github.com/YOUR_GITHUB_USERNAME/litechat/issues",r=encodeURIComponent(`Crash Report: ${((i=this.state.error)==null?void 0:i.message.substring(0,50))??"Unknown Error"}`),a=encodeURIComponent(this.generateErrorReport(!0));return`${n}/new?title=${r}&body=${a}`}generateErrorReport(n=!1){const{error:r,errorInfo:a}=this.state,i=`
`,s=n?"```":"";let o=`## LiteChat Error Report${i}${i}`;return o+=`**Version:** ${t6}${i}`,o+=`**Timestamp:** ${new Date().toISOString()}${i}`,o+=`**User Agent:** ${typeof navigator<"u"?navigator.userAgent:"N/A"}${i}${i}`,r?o+=`**Error Message:**${i}${s}${i}${r.message}${i}${s}${i}${i}`:o+=`**Error Message:** Unknown Error${i}${i}`,a!=null&&a.componentStack&&(o+=`**Component Stack:**${i}${s}text${i}${a.componentStack.trim()}${i}${s}${i}${i}`),r!=null&&r.stack&&(o+=`**Error Stack Trace:**${i}${s}text${i}${r.stack.trim()}${i}${s}${i}${i}`),o+=`**Steps to Reproduce (Please Describe):**${i}1. ...${i}2. ...${i}${i}`,o+=`**Expected Behavior:**${i}...${i}${i}`,o+=`**Actual Behavior:**${i}...${i}`,o}generateAIPrompt(){var i,s;const{error:n,errorInfo:r}=this.state;return`I encountered an error in a React application (LiteChat v${t6}). Please help me debug it.

Error Message:
\`\`\`
${(n==null?void 0:n.message)??"Unknown Error"}
\`\`\`

Component Stack (if available):
\`\`\`
${((i=r==null?void 0:r.componentStack)==null?void 0:i.trim())??"Not available"}
\`\`\`

Error Stack Trace (if available):
\`\`\`
${((s=n==null?void 0:n.stack)==null?void 0:s.trim())??"Not available"}
\`\`\`

Based on this information, what are the likely causes and potential solutions? Focus on React-specific issues if the component stack is present.`}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:m.jsx("div",{role:"alert",className:"flex flex-col items-center justify-center h-screen w-screen p-4 bg-background text-foreground",children:m.jsxs("div",{className:"max-w-2xl w-full border border-destructive bg-destructive/10 rounded-lg p-6 text-center shadow-lg",children:[m.jsx(Yw,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),m.jsx("h1",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),m.jsx("p",{className:"text-destructive/90 mb-4",children:"LiteChat encountered an unexpected error. Please try refreshing the page. If the problem persists, consider reporting the issue."}),m.jsx("pre",{className:"text-left text-xs bg-destructive/10 border border-destructive/30 rounded p-3 max-h-32 overflow-auto mb-4 font-mono text-destructive/80",children:((n=this.state.error)==null?void 0:n.message)??"Unknown Error"}),m.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[m.jsx(Dt,{variant:"destructive",onClick:()=>window.location.reload(),children:"Refresh Page"}),m.jsxs(Dt,{variant:"outline",onClick:()=>this.copyToClipboard(this.generateErrorReport(),"Error Details"),children:[m.jsx(VI,{className:"mr-2 h-4 w-4"})," Copy Details"]}),m.jsxs(Dt,{variant:"outline",onClick:()=>this.copyToClipboard(this.generateAIPrompt(),"AI Prompt"),children:[m.jsx(VI,{className:"mr-2 h-4 w-4"})," Copy AI Debug Prompt"]}),m.jsx(Dt,{variant:"outline",asChild:!0,children:m.jsxs("a",{href:this.getGitHubIssueUrl(),target:"_blank",rel:"noopener noreferrer",children:[m.jsx(Y6,{className:"mr-2 h-4 w-4"})," Report on GitHub"]})})]})]})}):this.props.children}}const m9=(e,t)=>{if(!t)return null;let n=Rd,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Pn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Nd,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=Yw,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=fk,r="text-green-500",a=`Synced with ${t}`;break;default:n=Rd,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(n,{className:At("h-3 w-3 ml-1 flex-shrink-0",r)})}),m.jsx(Qn,{side:"right",children:a})]})})},$w=T.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:y,editingItemId:v,editingItemType:b,originalName:w,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:R})=>{const j=e.id===n,L=e.itemType==="project",B=e.id===v&&e.itemType===b,Z=L&&d.has(e.id),{projects:P,conversations:K}=L?p(e.id,y):{projects:[],conversations:[]},q=P.length>0||K.length>0,de=!L&&e.syncRepoId?r[e.id]:void 0,ae=!L&&e.syncRepoId?a.get(e.syncRepoId):void 0,te=!L&&ae?m9(de,ae):null,X=is(Ae=>Ae.openProjectSettingsModal),re=()=>{B||(L&&q&&h(e.id),i(e.id,e.itemType))},D=Ae=>{Ae.stopPropagation(),L?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&o(e.id,Ae):s(e.id,Ae)},J=Ae=>{Ae.stopPropagation(),E(e)},Q=Ae=>{Ae.stopPropagation(),L&&X(e.id)},ie=Ae=>{Ae.key==="Enter"?(Ae.preventDefault(),C()):Ae.key==="Escape"&&k()},me=L?e.name:e.title,ve=I?Pn:lo,Me=I?"h-3 w-3 animate-spin":"h-3 w-3";return m.jsxs(m.Fragment,{children:[m.jsxs("li",{className:At("relative flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!B&&"hover:bg-muted/50 hover:text-primary/80",j&&!B?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",B&&"bg-muted ring-1 ring-primary",!B&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:re,title:B?"":me,children:[m.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[L&&q&&m.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:Ae=>{Ae.stopPropagation(),h(e.id)},children:Z?m.jsx(rl,{className:"h-3 w-3 text-muted-foreground"}):m.jsx(W6,{className:"h-3 w-3 text-muted-foreground"})}),L&&!q&&m.jsx("span",{className:"w-3 flex-shrink-0"}),L?m.jsx(l0,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):m.jsx(z2,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),B?m.jsx(jn,{ref:R,value:x,onChange:Ae=>S(Ae.target.value),onKeyDown:ie,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:Ae=>Ae.stopPropagation(),disabled:I}):m.jsx("span",{className:"truncate pr-1",children:me}),te]}),m.jsx("div",{className:At("absolute right-1 top-1/2 -translate-y-1/2 flex items-center flex-shrink-0","opacity-0 group-hover:opacity-100 transition-opacity duration-150","bg-card/80 backdrop-blur-sm p-0.5 rounded",B?"opacity-100":""),onClick:Ae=>Ae.stopPropagation(),children:B?m.jsxs(m.Fragment,{children:[m.jsx(Vn,{tooltipText:"Save (Enter)",onClick:Ae=>{Ae.stopPropagation(),C()},disabled:I||!x.trim(),"aria-label":"Save changes",icon:m.jsx(ve,{}),iconClassName:Me,className:"h-5 w-5 text-green-500 hover:text-green-600"}),m.jsx(Vn,{tooltipText:"Cancel (Esc)",onClick:Ae=>{Ae.stopPropagation(),k()},disabled:I,"aria-label":"Cancel edit",icon:m.jsx(Rs,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):m.jsxs(m.Fragment,{children:[L&&m.jsx(Vn,{tooltipText:"Project Settings",onClick:Q,"aria-label":`Settings for ${me}`,icon:m.jsx(UH,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),m.jsx(Vn,{tooltipText:"Edit",onClick:J,"aria-label":`Edit ${me}`,icon:m.jsx(c0,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),L?m.jsx(Vn,{tooltipText:"Export Project (JSON)",onClick:Ae=>u(e.id,Ae),"aria-label":`Export project ${me}`,icon:m.jsx(JH,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):m.jsxs("div",{className:"relative group/export",children:[m.jsx(Vn,{tooltipText:"Export Conversation","aria-label":`Export ${me}`,icon:m.jsx(bh,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),m.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:Ae=>Ae.stopPropagation(),children:[m.jsx(Dt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ae=>l(e.id,"json",Ae),children:"JSON"}),m.jsx(Dt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ae=>l(e.id,"md",Ae),children:"MD"})]})]}),m.jsx(Vn,{tooltipText:"Delete",onClick:D,"aria-label":`Delete ${me}`,icon:m.jsx(ns,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]},e.id),L&&Z&&m.jsxs(m.Fragment,{children:[P.sort((Ae,Re)=>Re.updatedAt.getTime()-Ae.updatedAt.getTime()).map(Ae=>m.jsx($w,{item:{...Ae,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:y,editingItemId:v,editingItemType:b,originalName:w,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:R},Ae.id)),K.sort((Ae,Re)=>Re.updatedAt.getTime()-Ae.updatedAt.getTime()).map(Ae=>m.jsx($w,{item:{...Ae,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:y,editingItemId:v,editingItemType:b,originalName:w,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:R},Ae.id))]})]})});$w.displayName="ConversationItemRenderer";function f0e({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=T.useState(null),[i,s]=T.useState(null),[o,l]=T.useState(""),[u,d]=T.useState(""),[h,p]=T.useState(!1),y=T.useRef(null),v=T.useCallback(x=>{a(x.id),s(x.itemType);const S=x.itemType==="project"?x.name:x.title;l(S),d(S),p(!1)},[]),b=T.useCallback(x=>{const S=r,E=x??(i==="project"&&o==="New Project");a(null),s(null),l(""),d(""),p(!1),E&&S&&(console.log(`Cancelling edit for new project ${S}, deleting...`),n(S).catch(C=>{console.error("Failed to delete new project on cancel:",C),Ye.error("Failed to clean up cancelled new project.")}))},[r,i,o,n]),w=T.useCallback(async()=>{var E;if(!r||!i||h)return;const x=u.trim(),S=i==="project"&&o==="New Project";if(!x){Ye.error("Name cannot be empty."),(E=y.current)==null||E.focus();return}if(x===o&&!S){b();return}p(!0);try{i==="project"?await e(r,{name:x}):await t(r,{title:x}),Ye.success("Item renamed successfully."),a(null),s(null),l(""),d("")}catch(C){console.error("Failed to save item name:",C),Ye.error(`Failed to rename item: ${C instanceof Error?C.message:String(C)}`)}finally{p(!1)}},[r,i,u,o,h,e,t,b]);return T.useEffect(()=>{r&&y.current&&(y.current.focus(),y.current.select())},[r]),{editingItemId:r,editingItemType:i,originalName:o,localEditingName:u,setLocalEditingName:d,isSavingEdit:h,editInputRef:y,handleStartEditing:v,handleSaveEdit:w,handleCancelEdit:b}}const ZC=(e,t,n,r,a,i,s,o,l)=>{if(!n)return!0;const u=`${t}-${e}`;if(l[u]!==void 0)return l[u];let d=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))d=!0;else{const p=o.get(e)||[],y=s.get(e)||[];for(const v of y)if(v.title.toLowerCase().includes(n)){d=!0;break}if(!d){for(const v of p)if(ZC(v.id,"project",n,r,a,i,s,o,l)){d=!0;break}}}}return l[u]=d,d},h0e=()=>{const e=mn(z=>z.selectedItemId),t=mn(z=>z.selectedItemType),n=mn(z=>z.isLoading),r=ai(z=>z.isLoading),{conversations:a,syncRepos:i,conversationSyncStatus:s}=mn(dn(z=>({conversations:z.conversations,syncRepos:z.syncRepos,conversationSyncStatus:z.conversationSyncStatus}))),o=ai(z=>z.projects),l=mn(z=>z.selectItem),u=mn(z=>z.addConversation),d=mn(z=>z.updateConversation),h=mn(z=>z.deleteConversation),p=mn(z=>z.exportConversation),y=mn(z=>z.exportProject),v=mn(z=>z.getConversationById),b=ai(z=>z.addProject),w=ai(z=>z.updateProject),x=ai(z=>z.deleteProject),S=ai(z=>z.getProjectById),[E,C]=gt.useState(new Set),[k,I]=T.useState(""),R=n||r,j=f0e({updateProject:w,updateConversation:d,deleteProject:x,getProjectById:S,getConversationById:v}),{editingItemId:L,editingItemType:B,originalName:Z,localEditingName:P,setLocalEditingName:K,isSavingEdit:q,editInputRef:de,handleStartEditing:ae,handleSaveEdit:te,handleCancelEdit:X}=j,re=T.useCallback(z=>{C(Se=>{const Te=new Set(Se);return Te.has(z)?Te.delete(z):Te.add(z),Te})},[]),D=T.useCallback(()=>{if(t==="project")return e;if(t==="conversation"&&e){const z=v(e);return(z==null?void 0:z.projectId)??null}return null},[e,t,v]),J=T.useCallback(async()=>{if(!L)try{const z=D(),Se=await u({title:"New Chat",projectId:z});l(Se,"conversation")}catch(z){console.error("Failed to create new chat:",z),Ye.error("Failed to create new chat.")}},[L,D,u,l]),Q=T.useCallback(async()=>{if(!L)try{const z=D(),Se=await b({name:"New Project",parentId:z});l(Se,"project"),z&&C(Te=>new Set(Te).add(z)),setTimeout(()=>{const Te=S(Se);Te?ae({...Te,itemType:"project"}):console.warn("New project data not found, cannot start edit.")},50)}catch(z){console.error("Failed to create new project:",z)}},[L,D,b,l,S,ae]),ie=T.useCallback((z,Se)=>{z!==L&&(L&&z!==L&&(P.trim()&&P.trim()!==Z?te():X()),(z!==e||Se!==t)&&l(z,Se))},[L,P,Z,e,t,te,X,l]),me=T.useCallback((z,Se)=>{Se.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&h(z).catch(Te=>{console.error("Failed to delete conversation:",Te),Ye.error("Failed to delete conversation.")})},[h]),ve=T.useCallback((z,Se)=>{Se.stopPropagation(),x(z).catch(Te=>{console.error("Failed to delete project:",Te),Ye.error("Failed to delete project.")})},[x]),Me=T.useCallback(async(z,Se,Te)=>{Te.stopPropagation();try{await p(z,Se)}catch(ue){console.error(`Failed to export conversation as ${Se}:`,ue)}},[p]),Ae=T.useCallback(async(z,Se)=>{Se.stopPropagation();try{await y(z)}catch(Te){console.error("Failed to export project:",Te)}},[y]),Re=T.useMemo(()=>new Map((i||[]).map(z=>[z.id,z.name])),[i]),{projectsById:ke,conversationsByProjectId:Fe,projectsByParentId:et}=T.useMemo(()=>{const z=new Map(o.map(ue=>[ue.id,ue])),Se=new Map;a.forEach(ue=>{const oe=ue.projectId??null;Se.has(oe)||Se.set(oe,[]),Se.get(oe).push(ue)});const Te=new Map;return o.forEach(ue=>{const oe=ue.parentId??null;Te.has(oe)||Te.set(oe,[]),Te.get(oe).push(ue)}),{projectsById:z,conversationsByProjectId:Se,projectsByParentId:Te}},[o,a]),Le=T.useCallback((z,Se)=>{const Te=Se.toLowerCase(),ue={},oe=(et.get(z)||[]).filter(xe=>ZC(xe.id,"project",Te,o,a,ke,Fe,et,ue)),ee=(Fe.get(z)||[]).filter(xe=>xe.title.toLowerCase().includes(Te));return oe.sort((xe,Pe)=>Pe.updatedAt.getTime()-xe.updatedAt.getTime()),ee.sort((xe,Pe)=>Pe.updatedAt.getTime()-xe.updatedAt.getTime()),{projects:oe,conversations:ee}},[o,a,ke,Fe,et]),Ie=T.useMemo(()=>{const z=k.toLowerCase(),Se={},Te=(et.get(null)||[]).filter(ee=>ZC(ee.id,"project",z,o,a,ke,Fe,et,Se)),ue=(Fe.get(null)||[]).filter(ee=>ee.title.toLowerCase().includes(z)),oe=[...Te.map(ee=>({...ee,itemType:"project"})),...ue.map(ee=>({...ee,itemType:"conversation"}))];return oe.sort((ee,xe)=>xe.updatedAt.getTime()-ee.updatedAt.getTime()),oe},[o,a,k,ke,Fe,et]);return m.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[m.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{size:"sm",variant:"ghost",onClick:Q,"aria-label":"New Project",disabled:R||!!L,className:"h-7 w-7 p-0",children:m.jsx(pk,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"bottom",children:"New Project"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{size:"sm",variant:"ghost",onClick:J,"aria-label":"New Chat",disabled:R||!!L,className:"h-7 w-7 p-0",children:m.jsx(qd,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"bottom",children:"New Chat"})]})})]})]}),m.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[m.jsx(Wl,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),m.jsx(jn,{type:"search",placeholder:"Filter...",value:k,onChange:z=>I(z.target.value),className:"h-8 text-xs pl-8",disabled:R})]}),m.jsx(rc,{className:"flex-grow",children:R?m.jsxs("div",{className:"space-y-1 p-1",children:[m.jsx(dr,{className:"h-8 w-full"}),m.jsx(dr,{className:"h-8 w-full"}),m.jsx(dr,{className:"h-8 w-full"})]}):Ie.length===0?m.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:k.trim()!==""?"No items match your filter.":"Workspace is empty."}):m.jsx("ul",{className:"space-y-0.5 p-1",children:Ie.map(z=>m.jsx($w,{item:z,level:0,selectedItemId:e,conversationSyncStatus:s,repoNameMap:Re,onSelectItem:ie,onDeleteConversation:me,onDeleteProject:ve,onExportConversation:Me,onExportProject:Ae,expandedProjects:E,toggleProjectExpansion:re,getChildren:Le,filterText:k,editingItemId:L,editingItemType:B,originalName:Z,localEditingName:P,setLocalEditingName:K,handleStartEditing:ae,handleSaveEdit:te,handleCancelEdit:X,isSavingEdit:q,editInputRef:de},z.id))})})]})},p0e=()=>{const{addConversation:e,selectItem:t,selectedItemId:n,selectedItemType:r}=mn(dn(l=>({addConversation:l.addConversation,selectItem:l.selectItem,selectedItemId:l.selectedItemId,selectedItemType:l.selectedItemType,getConversationById:l.getConversationById}))),{addProject:a}=ai(dn(l=>({addProject:l.addProject,getProjectById:l.getProjectById}))),i=()=>{if(r==="project")return n;if(r==="conversation"&&n){const l=mn.getState().getConversationById(n);return(l==null?void 0:l.projectId)??null}return null},s=async()=>{try{const l=i(),u=await e({title:"New Chat",projectId:l});t(u,"conversation")}catch(l){console.error("Failed to create new chat:",l)}},o=async()=>{try{const l=i(),u=await a({name:"New Project",parentId:l});t(u,"project")}catch(l){console.error("Failed to create new project:",l)}};return m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8","aria-label":"New Project",children:m.jsx(pk,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"right",children:"New Project"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":"New Chat",children:m.jsx(qd,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"right",children:"New Chat"})]})})]})};function m0e(){const e=Rr.getState().registerChatControl,t=mn.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",status:()=>t?"loading":"ready",renderer:()=>gt.createElement(h0e),iconRenderer:()=>gt.createElement(p0e),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var c1="Dialog",[g9,Q_e]=Ei(c1),[g0e,po]=g9(c1),y9=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,o=T.useRef(null),l=T.useRef(null),[u,d]=ro({prop:r,defaultProp:a??!1,onChange:i,caller:c1});return m.jsx(g0e,{scope:t,triggerRef:o,contentRef:l,contentId:Za(),titleId:Za(),descriptionId:Za(),open:u,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:s,children:n})};y9.displayName=c1;var b9="DialogTrigger",y0e=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=po(b9,n),i=Cn(t,a.triggerRef);return m.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":fA(a.open),...r,ref:i,onClick:Wt(e.onClick,a.onOpenToggle)})});y0e.displayName=b9;var uA="DialogPortal",[b0e,v9]=g9(uA,{forceMount:void 0}),w9=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=po(uA,t);return m.jsx(b0e,{scope:t,forceMount:n,children:T.Children.map(r,s=>m.jsx(ka,{present:n||i.open,children:m.jsx(ap,{asChild:!0,container:a,children:s})}))})};w9.displayName=uA;var Bw="DialogOverlay",x9=T.forwardRef((e,t)=>{const n=v9(Bw,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=po(Bw,e.__scopeDialog);return i.modal?m.jsx(ka,{present:r||i.open,children:m.jsx(w0e,{...a,ref:t})}):null});x9.displayName=Bw;var v0e=su("DialogOverlay.RemoveScroll"),w0e=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=po(Bw,n);return m.jsx(Z0,{as:v0e,allowPinchZoom:!0,shards:[a.contentRef],children:m.jsx(an.div,{"data-state":fA(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),zd="DialogContent",_9=T.forwardRef((e,t)=>{const n=v9(zd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=po(zd,e.__scopeDialog);return m.jsx(ka,{present:r||i.open,children:i.modal?m.jsx(x0e,{...a,ref:t}):m.jsx(_0e,{...a,ref:t})})});_9.displayName=zd;var x0e=T.forwardRef((e,t)=>{const n=po(zd,e.__scopeDialog),r=T.useRef(null),a=Cn(t,n.contentRef,r);return T.useEffect(()=>{const i=r.current;if(i)return Qx(i)},[]),m.jsx(S9,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wt(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Wt(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&i.preventDefault()}),onFocusOutside:Wt(e.onFocusOutside,i=>i.preventDefault())})}),_0e=T.forwardRef((e,t)=>{const n=po(zd,e.__scopeDialog),r=T.useRef(!1),a=T.useRef(!1);return m.jsx(S9,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),S9=T.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...s}=e,o=po(zd,n),l=T.useRef(null),u=Cn(t,l);return Xx(),m.jsxs(m.Fragment,{children:[m.jsx(K0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:m.jsx(tp,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":fA(o.open),...s,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(S0e,{titleId:o.titleId}),m.jsx(C0e,{contentRef:l,descriptionId:o.descriptionId})]})]})}),dA="DialogTitle",E9=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=po(dA,n);return m.jsx(an.h2,{id:a.titleId,...r,ref:t})});E9.displayName=dA;var C9="DialogDescription",k9=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=po(C9,n);return m.jsx(an.p,{id:a.descriptionId,...r,ref:t})});k9.displayName=C9;var T9="DialogClose",A9=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=po(T9,n);return m.jsx(an.button,{type:"button",...r,ref:t,onClick:Wt(e.onClick,()=>a.onOpenChange(!1))})});A9.displayName=T9;function fA(e){return e?"open":"closed"}var N9="DialogTitleWarning",[eSe,R9]=PX(N9,{contentName:zd,titleName:dA,docsSlug:"dialog"}),S0e=({titleId:e})=>{const t=R9(N9),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return T.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},E0e="DialogDescriptionWarning",C0e=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${R9(E0e).contentName}}.`;return T.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},I9=y9,j9=w9,O9=x9,D9=_9,k0e=E9,T0e=k9,M9=A9;function u1({...e}){return m.jsx(I9,{"data-slot":"dialog",...e})}function A0e({...e}){return m.jsx(j9,{"data-slot":"dialog-portal",...e})}function N0e({...e}){return m.jsx(M9,{"data-slot":"dialog-close",...e})}function R0e({className:e,...t}){return m.jsx(O9,{"data-slot":"dialog-overlay",className:At("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function d1({className:e,children:t,...n}){return m.jsxs(A0e,{"data-slot":"dialog-portal",children:[m.jsx(R0e,{}),m.jsxs(D9,{"data-slot":"dialog-content",className:At("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,m.jsxs(M9,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[m.jsx(Rs,{}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function f1({className:e,...t}){return m.jsx("div",{"data-slot":"dialog-header",className:At("flex flex-col gap-2 text-center sm:text-left",e),...t})}function h1({className:e,...t}){return m.jsx("div",{"data-slot":"dialog-footer",className:At("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function p1({className:e,...t}){return m.jsx(k0e,{"data-slot":"dialog-title",className:At("text-lg leading-none font-semibold",e),...t})}function m1({className:e,...t}){return m.jsx(T0e,{"data-slot":"dialog-description",className:At("text-muted-foreground text-sm",e),...t})}var P9=["PageUp","PageDown"],F9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],L9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},xp="Slider",[YC,I0e,j0e]=Yx(xp),[$9,tSe]=Ei(xp,[j0e]),[O0e,g1]=$9(xp),B9=T.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:y=!1,form:v,...b}=e,w=T.useRef(new Set),x=T.useRef(0),E=s==="horizontal"?D0e:M0e,[C=[],k]=ro({prop:d,defaultProp:u,onChange:Z=>{var K;(K=[...w.current][x.current])==null||K.focus(),h(Z)}}),I=T.useRef(C);function R(Z){const P=B0e(C,Z);B(Z,P)}function j(Z){B(Z,x.current)}function L(){const Z=I.current[x.current];C[x.current]!==Z&&p(C)}function B(Z,P,{commit:K}={commit:!1}){const q=q0e(i),de=V0e(Math.round((Z-r)/i)*i+r,q),ae=Vg(de,[r,a]);k((te=[])=>{const X=L0e(te,ae,P);if(H0e(X,l*i)){x.current=X.indexOf(ae);const re=String(X)!==String(te);return re&&K&&p(X),re?X:te}else return te})}return m.jsx(O0e,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:a,valueIndexToChangeRef:x,thumbs:w.current,values:C,orientation:s,form:v,children:m.jsx(YC.Provider,{scope:e.__scopeSlider,children:m.jsx(YC.Slot,{scope:e.__scopeSlider,children:m.jsx(E,{"aria-disabled":o,"data-disabled":o?"":void 0,...b,ref:t,onPointerDown:Wt(b.onPointerDown,()=>{o||(I.current=C)}),min:r,max:a,inverted:y,onSlideStart:o?void 0:R,onSlideMove:o?void 0:j,onSlideEnd:o?void 0:L,onHomeKeyDown:()=>!o&&B(r,0,{commit:!0}),onEndKeyDown:()=>!o&&B(a,C.length-1,{commit:!0}),onStepKeyDown:({event:Z,direction:P})=>{if(!o){const de=P9.includes(Z.key)||Z.shiftKey&&F9.includes(Z.key)?10:1,ae=x.current,te=C[ae],X=i*de*P;B(te+X,ae,{commit:!0})}}})})})})});B9.displayName=xp;var[z9,U9]=$9(xp,{startEdge:"left",endEdge:"right",size:"width",direction:1}),D0e=T.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...d}=e,[h,p]=T.useState(null),y=Cn(t,E=>p(E)),v=T.useRef(void 0),b=vp(a),w=b==="ltr",x=w&&!i||!w&&i;function S(E){const C=v.current||h.getBoundingClientRect(),k=[0,C.width],R=hA(k,x?[n,r]:[r,n]);return v.current=C,R(E-C.left)}return m.jsx(z9,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:m.jsx(H9,{dir:b,"data-orientation":"horizontal",...d,ref:y,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);s==null||s(C)},onSlideMove:E=>{const C=S(E.clientX);o==null||o(C)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:E=>{const k=L9[x?"from-left":"from-right"].includes(E.key);u==null||u({event:E,direction:k?-1:1})}})})}),M0e=T.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...u}=e,d=T.useRef(null),h=Cn(t,d),p=T.useRef(void 0),y=!a;function v(b){const w=p.current||d.current.getBoundingClientRect(),x=[0,w.height],E=hA(x,y?[r,n]:[n,r]);return p.current=w,E(b-w.top)}return m.jsx(z9,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:m.jsx(H9,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const w=v(b.clientY);i==null||i(w)},onSlideMove:b=>{const w=v(b.clientY);s==null||s(w)},onSlideEnd:()=>{p.current=void 0,o==null||o()},onStepKeyDown:b=>{const x=L9[y?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:x?-1:1})}})})}),H9=T.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...u}=e,d=g1(xp,n);return m.jsx(an.span,{...u,ref:t,onKeyDown:Wt(e.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):P9.concat(F9).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:Wt(e.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(p)?p.focus():r(h)}),onPointerMove:Wt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Wt(e.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),i(h))})})}),q9="SliderTrack",V9=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=g1(q9,n);return m.jsx(an.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});V9.displayName=q9;var XC="SliderRange",G9=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=g1(XC,n),i=U9(XC,n),s=T.useRef(null),o=Cn(t,s),l=a.values.length,u=a.values.map(p=>Z9(p,a.min,a.max)),d=l>1?Math.min(...u):0,h=100-Math.max(...u);return m.jsx(an.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:o,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});G9.displayName=XC;var JC="SliderThumb",W9=T.forwardRef((e,t)=>{const n=I0e(e.__scopeSlider),[r,a]=T.useState(null),i=Cn(t,o=>a(o)),s=T.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return m.jsx(P0e,{...e,ref:i,index:s})}),P0e=T.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,s=g1(JC,n),o=U9(JC,n),[l,u]=T.useState(null),d=Cn(t,S=>u(S)),h=l?s.form||!!l.closest("form"):!0,p=fx(l),y=s.values[r],v=y===void 0?0:Z9(y,s.min,s.max),b=$0e(r,s.values.length),w=p==null?void 0:p[o.size],x=w?z0e(w,v,o.direction):0;return T.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),m.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${v}% + ${x}px)`},children:[m.jsx(YC.ItemSlot,{scope:e.__scopeSlider,children:m.jsx(an.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":s.min,"aria-valuenow":y,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:d,style:y===void 0?{display:"none"}:e.style,onFocus:Wt(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),h&&m.jsx(K9,{name:a??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:y},r)]})});W9.displayName=JC;var F0e="RadioBubbleInput",K9=T.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=T.useRef(null),i=Cn(a,r),s=Jx(t);return T.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("input",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),m.jsx(an.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});K9.displayName=F0e;function L0e(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function Z9(e,t,n){const i=100/(n-t)*(e-t);return Vg(i,[0,100])}function $0e(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function B0e(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function z0e(e,t,n){const r=e/2,i=hA([0,50],[0,r]);return(r-i(t)*n)*n}function U0e(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function H0e(e,t){if(t>0){const n=U0e(e);return Math.min(...n)>=t}return!0}function hA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function q0e(e){return(String(e).split(".")[1]||"").length}function V0e(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var G0e=B9,W0e=V9,K0e=G9,Z0e=W9;function Vo({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const s=T.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return m.jsxs(G0e,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:At("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[m.jsx(W0e,{"data-slot":"slider-track",className:At("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:m.jsx(K0e,{"data-slot":"slider-range",className:At("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(o,l)=>m.jsx(Z0e,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}var Y0e="Separator",n6="horizontal",X0e=["horizontal","vertical"],Y9=T.forwardRef((e,t)=>{const{decorative:n,orientation:r=n6,...a}=e,i=J0e(r)?r:n6,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return m.jsx(an.div,{"data-orientation":i,...o,...a,ref:t})});Y9.displayName=Y0e;function J0e(e){return X0e.includes(e)}var Q0e=Y9;function Ts({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return m.jsx(Q0e,{"data-slot":"separator-root",decorative:n,orientation:t,className:At("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const eye=()=>{const{theme:e,setTheme:t,enableStreamingMarkdown:n,setEnableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a,setEnableStreamingCodeBlockParsing:i,foldStreamingCodeBlocks:s,setFoldStreamingCodeBlocks:o,foldUserMessagesOnCompletion:l,setFoldUserMessagesOnCompletion:u,streamingRenderFPS:d,setStreamingRenderFPS:h,prismThemeUrl:p,setPrismThemeUrl:y,resetGeneralSettings:v}=lr(dn(k=>({theme:k.theme,setTheme:k.setTheme,enableStreamingMarkdown:k.enableStreamingMarkdown,setEnableStreamingMarkdown:k.setEnableStreamingMarkdown,enableStreamingCodeBlockParsing:k.enableStreamingCodeBlockParsing,setEnableStreamingCodeBlockParsing:k.setEnableStreamingCodeBlockParsing,foldStreamingCodeBlocks:k.foldStreamingCodeBlocks,setFoldStreamingCodeBlocks:k.setFoldStreamingCodeBlocks,foldUserMessagesOnCompletion:k.foldUserMessagesOnCompletion,setFoldUserMessagesOnCompletion:k.setFoldUserMessagesOnCompletion,streamingRenderFPS:k.streamingRenderFPS,setStreamingRenderFPS:k.setStreamingRenderFPS,prismThemeUrl:k.prismThemeUrl,setPrismThemeUrl:k.setPrismThemeUrl,resetGeneralSettings:k.resetGeneralSettings}))),[b,w]=T.useState(d),x=T.useCallback(k=>{w(k[0])},[]),S=T.useCallback(k=>{h(k[0])},[h]),E=T.useCallback(k=>{const I=k.target.value,R=I===""?15:parseInt(I.replace(/[^0-9]/g,""),10);if(!isNaN(R)){const j=Math.max(3,Math.min(60,R));h(j),w(j)}},[h]);T.useEffect(()=>{w(d)},[d]);const C=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&v()};return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),m.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[m.jsx(Gt,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),m.jsxs(Jo,{value:e??"system",onValueChange:k=>t(k),children:[m.jsx(el,{id:"theme-select",className:"w-[180px]",children:m.jsx(Qo,{placeholder:"Select theme"})}),m.jsxs(tl,{children:[m.jsx(Gr,{value:"light",children:"Light"}),m.jsx(Gr,{value:"dark",children:"Dark"}),m.jsx(Gr,{value:"system",children:"System"}),m.jsx(Gr,{value:"TijuLight",children:"Tiju Light"}),m.jsx(Gr,{value:"TijuDark",children:"Tiju Dark"})]})]})]}),m.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-1.5",children:[m.jsx(Gt,{htmlFor:"prism-theme-url",className:"font-medium",children:"Code Block Theme URL (Optional)"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the URL of a PrismJS CSS theme file (e.g., from cdnjs). Leave blank to use the default themes."}),m.jsx(jn,{id:"prism-theme-url",type:"url",placeholder:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",value:p??"",onChange:k=>y(k.target.value)})]})]}),m.jsx(Ts,{}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Streaming & Display"}),m.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),m.jsx(Mi,{id:"streaming-markdown-switch",checked:n??!0,onCheckedChange:r})]}),m.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"streaming-codeblock-switch",className:"font-medium",children:"Use Full Code Blocks While Streaming"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the syntax-highlighting component for code blocks during streaming. Disable for potentially smoother streaming on complex code, using a basic block instead."})]}),m.jsx(Mi,{id:"streaming-codeblock-switch",checked:a??!1,onCheckedChange:i})]}),m.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"fold-codeblock-switch",className:"font-medium",children:"Fold Code Blocks by Default During Streaming"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse code blocks as they stream in. Useful for long code outputs."})]}),m.jsx(Mi,{id:"fold-codeblock-switch",checked:s??!1,onCheckedChange:o})]}),m.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"fold-user-message-switch",className:"font-medium",children:"Fold User Messages After Response"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse the user's prompt message once the assistant finishes responding."})]}),m.jsx(Mi,{id:"fold-user-message-switch",checked:l??!1,onCheckedChange:u})]}),m.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[m.jsxs("div",{children:[m.jsxs(Gt,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["Streaming Update Rate (",b," FPS)"]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how frequently the UI updates during streaming (3-60 FPS). Lower values may feel less smooth but reduce CPU usage. (Default: 15)"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx(Vo,{id:"streaming-fps-slider",min:3,max:60,step:1,value:[b],onValueChange:x,onValueCommit:S,className:"flex-grow"}),m.jsx(jn,{type:"number",min:3,max:60,step:1,value:b,onChange:E,className:"w-20 h-8 text-xs"}),m.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),m.jsx(Ts,{}),m.jsx("div",{className:"flex justify-end pt-4",children:m.jsxs(Dt,{variant:"outline",size:"sm",onClick:C,children:[m.jsx(gk,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},tye=gt.memo(eye),X9=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,defaultTemperature:p=.7,defaultTopP:y=null,defaultMaxTokens:v=null,defaultTopK:b=null,defaultPresencePenalty:w=0,defaultFrequencyPenalty:x=0,className:S})=>{const{selectedModelId:E,dbProviderConfigs:C,dbApiKeys:k}=$n(dn(D=>({selectedModelId:D.selectedModelId,dbProviderConfigs:D.dbProviderConfigs,dbApiKeys:D.dbApiKeys}))),I=T.useMemo(()=>{if(!E)return;const{providerId:D,modelId:J}=sc(E);if(!D||!J)return;const Q=C.find(me=>me.id===D);if(!Q)return;const ie=k.find(me=>me.id===Q.apiKeyId);return Ik(Q,J,ie==null?void 0:ie.value)},[E,C,k]),R=T.useMemo(()=>{var D;return new Set(((D=I==null?void 0:I.metadata)==null?void 0:D.supported_parameters)??[])},[I]),[j,L]=T.useState(e??p),[B,Z]=T.useState(n??y??1),[P,K]=T.useState(l??w??0),[q,de]=T.useState(d??x??0);T.useEffect(()=>{L(e??p)},[e,p]),T.useEffect(()=>{Z(n??y??1)},[n,y]),T.useEffect(()=>{K(l??w??0)},[l,w]),T.useEffect(()=>{de(d??x??0)},[d,x]);const ae=T.useCallback((D,J)=>{const Q=J.target.value,ie=Q===""?null:parseInt(Q,10);(Q===""||!isNaN(ie)&&ie!==null)&&D(ie)},[]),te=T.useCallback((D,J)=>{D(J[0])},[]),X=T.useCallback(D=>{D(null)},[]),re=p!==void 0||y!==void 0||v!==void 0||b!==void 0||w!==void 0||x!==void 0;return m.jsxs("div",{className:At("space-y-4 p-4",S),children:[R.has("temperature")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",j.toFixed(2),")"]}),m.jsx(Vo,{id:"param-temperature",min:0,max:1,step:.01,value:[j],onValueChange:D=>L(D[0]),onValueCommit:D=>te(t,D)}),re&&m.jsxs(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(t),disabled:e===null,children:["Use Default (",(p==null?void 0:p.toFixed(2))??"N/A",")"]})]}),R.has("top_p")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(B??0).toFixed(2),")"]}),m.jsx(Vo,{id:"param-top-p",min:0,max:1,step:.01,value:[B??1],onValueChange:D=>Z(D[0]),onValueCommit:D=>te(r,D)}),re&&m.jsxs(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(r),disabled:n===null,children:["Use Default (",(y==null?void 0:y.toFixed(2))??"N/A",")"]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[R.has("max_tokens")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),m.jsx(jn,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:D=>ae(i,D),min:"1",className:"h-8 text-xs"}),re&&m.jsx(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(i),disabled:a===null,children:"Use Default"})]}),R.has("top_k")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),m.jsx(jn,{id:"param-top-k",type:"number",placeholder:`Default: ${b??"None"}`,value:s??"",onChange:D=>ae(o,D),min:"1",className:"h-8 text-xs"}),re&&m.jsx(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(o),disabled:s===null,children:"Use Default"})]})]}),R.has("presence_penalty")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(P??0).toFixed(2),")"]}),m.jsx(Vo,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[P??0],onValueChange:D=>K(D[0]),onValueCommit:D=>te(u,D)}),re&&m.jsxs(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(u),disabled:l===null,children:["Use Default (",(w==null?void 0:w.toFixed(2))??"N/A",")"]})]}),R.has("frequency_penalty")&&m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(q??0).toFixed(2),")"]}),m.jsx(Vo,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[q??0],onValueChange:D=>de(D[0]),onValueCommit:D=>te(h,D)}),re&&m.jsxs(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(h),disabled:d===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]})]})};var r6=1,nye=.9,rye=.8,aye=.17,k2=.1,T2=.999,iye=.9999,sye=.99,oye=/[\\\/_+.#"@\[\(\{&]/,lye=/[\\\/_+.#"@\[\(\{&]/g,cye=/[\s-]/,J9=/[\s-]/g;function QC(e,t,n,r,a,i,s){if(i===t.length)return a===e.length?r6:sye;var o=`${a},${i}`;if(s[o]!==void 0)return s[o];for(var l=r.charAt(i),u=n.indexOf(l,a),d=0,h,p,y,v;u>=0;)h=QC(e,t,n,r,u+1,i+1,s),h>d&&(u===a?h*=r6:oye.test(e.charAt(u-1))?(h*=rye,y=e.slice(a,u-1).match(lye),y&&a>0&&(h*=Math.pow(T2,y.length))):cye.test(e.charAt(u-1))?(h*=nye,v=e.slice(a,u-1).match(J9),v&&a>0&&(h*=Math.pow(T2,v.length))):(h*=aye,a>0&&(h*=Math.pow(T2,u-a))),e.charAt(u)!==t.charAt(i)&&(h*=iye)),(h<k2&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(p=QC(e,t,n,r,u+1,i+2,s),p*k2>h&&(h=p*k2)),h>d&&(d=h),u=n.indexOf(l,u+1);return s[o]=d,d}function a6(e){return e.toLowerCase().replace(J9," ")}function uye(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,QC(e,t,a6(e),a6(t),0,0,{})}var Um='[cmdk-group=""]',A2='[cmdk-group-items=""]',dye='[cmdk-group-heading=""]',Q9='[cmdk-item=""]',i6=`${Q9}:not([aria-disabled="true"])`,ek="cmdk-item-select",ch="data-value",fye=(e,t,n)=>uye(e,t,n),eB=T.createContext(void 0),Y0=()=>T.useContext(eB),tB=T.createContext(void 0),pA=()=>T.useContext(tB),nB=T.createContext(void 0),rB=T.forwardRef((e,t)=>{let n=uh(()=>{var Q,ie;return{search:"",value:(ie=(Q=e.value)!=null?Q:e.defaultValue)!=null?ie:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=uh(()=>new Set),a=uh(()=>new Map),i=uh(()=>new Map),s=uh(()=>new Set),o=aB(e),{label:l,children:u,value:d,onValueChange:h,filter:p,shouldFilter:y,loop:v,disablePointerSelection:b=!1,vimBindings:w=!0,...x}=e,S=Za(),E=Za(),C=Za(),k=T.useRef(null),I=Sye();Ud(()=>{if(d!==void 0){let Q=d.trim();n.current.value=Q,R.emit()}},[d]),Ud(()=>{I(6,K)},[]);let R=T.useMemo(()=>({subscribe:Q=>(s.current.add(Q),()=>s.current.delete(Q)),snapshot:()=>n.current,setState:(Q,ie,me)=>{var ve,Me,Ae,Re;if(!Object.is(n.current[Q],ie)){if(n.current[Q]=ie,Q==="search")P(),B(),I(1,Z);else if(Q==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ke=document.getElementById(C);ke?ke.focus():(ve=document.getElementById(S))==null||ve.focus()}if(I(7,()=>{var ke;n.current.selectedItemId=(ke=q())==null?void 0:ke.id,R.emit()}),me||I(5,K),((Me=o.current)==null?void 0:Me.value)!==void 0){let ke=ie??"";(Re=(Ae=o.current).onValueChange)==null||Re.call(Ae,ke);return}}R.emit()}},emit:()=>{s.current.forEach(Q=>Q())}}),[]),j=T.useMemo(()=>({value:(Q,ie,me)=>{var ve;ie!==((ve=i.current.get(Q))==null?void 0:ve.value)&&(i.current.set(Q,{value:ie,keywords:me}),n.current.filtered.items.set(Q,L(ie,me)),I(2,()=>{B(),R.emit()}))},item:(Q,ie)=>(r.current.add(Q),ie&&(a.current.has(ie)?a.current.get(ie).add(Q):a.current.set(ie,new Set([Q]))),I(3,()=>{P(),B(),n.current.value||Z(),R.emit()}),()=>{i.current.delete(Q),r.current.delete(Q),n.current.filtered.items.delete(Q);let me=q();I(4,()=>{P(),(me==null?void 0:me.getAttribute("id"))===Q&&Z(),R.emit()})}),group:Q=>(a.current.has(Q)||a.current.set(Q,new Set),()=>{i.current.delete(Q),a.current.delete(Q)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:k}),[]);function L(Q,ie){var me,ve;let Me=(ve=(me=o.current)==null?void 0:me.filter)!=null?ve:fye;return Q?Me(Q,n.current.search,ie):0}function B(){if(!n.current.search||o.current.shouldFilter===!1)return;let Q=n.current.filtered.items,ie=[];n.current.filtered.groups.forEach(ve=>{let Me=a.current.get(ve),Ae=0;Me.forEach(Re=>{let ke=Q.get(Re);Ae=Math.max(ke,Ae)}),ie.push([ve,Ae])});let me=k.current;de().sort((ve,Me)=>{var Ae,Re;let ke=ve.getAttribute("id"),Fe=Me.getAttribute("id");return((Ae=Q.get(Fe))!=null?Ae:0)-((Re=Q.get(ke))!=null?Re:0)}).forEach(ve=>{let Me=ve.closest(A2);Me?Me.appendChild(ve.parentElement===Me?ve:ve.closest(`${A2} > *`)):me.appendChild(ve.parentElement===me?ve:ve.closest(`${A2} > *`))}),ie.sort((ve,Me)=>Me[1]-ve[1]).forEach(ve=>{var Me;let Ae=(Me=k.current)==null?void 0:Me.querySelector(`${Um}[${ch}="${encodeURIComponent(ve[0])}"]`);Ae==null||Ae.parentElement.appendChild(Ae)})}function Z(){let Q=de().find(me=>me.getAttribute("aria-disabled")!=="true"),ie=Q==null?void 0:Q.getAttribute(ch);R.setState("value",ie||void 0)}function P(){var Q,ie,me,ve;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Me=0;for(let Ae of r.current){let Re=(ie=(Q=i.current.get(Ae))==null?void 0:Q.value)!=null?ie:"",ke=(ve=(me=i.current.get(Ae))==null?void 0:me.keywords)!=null?ve:[],Fe=L(Re,ke);n.current.filtered.items.set(Ae,Fe),Fe>0&&Me++}for(let[Ae,Re]of a.current)for(let ke of Re)if(n.current.filtered.items.get(ke)>0){n.current.filtered.groups.add(Ae);break}n.current.filtered.count=Me}function K(){var Q,ie,me;let ve=q();ve&&(((Q=ve.parentElement)==null?void 0:Q.firstChild)===ve&&((me=(ie=ve.closest(Um))==null?void 0:ie.querySelector(dye))==null||me.scrollIntoView({block:"nearest"})),ve.scrollIntoView({block:"nearest"}))}function q(){var Q;return(Q=k.current)==null?void 0:Q.querySelector(`${Q9}[aria-selected="true"]`)}function de(){var Q;return Array.from(((Q=k.current)==null?void 0:Q.querySelectorAll(i6))||[])}function ae(Q){let ie=de()[Q];ie&&R.setState("value",ie.getAttribute(ch))}function te(Q){var ie;let me=q(),ve=de(),Me=ve.findIndex(Re=>Re===me),Ae=ve[Me+Q];(ie=o.current)!=null&&ie.loop&&(Ae=Me+Q<0?ve[ve.length-1]:Me+Q===ve.length?ve[0]:ve[Me+Q]),Ae&&R.setState("value",Ae.getAttribute(ch))}function X(Q){let ie=q(),me=ie==null?void 0:ie.closest(Um),ve;for(;me&&!ve;)me=Q>0?xye(me,Um):_ye(me,Um),ve=me==null?void 0:me.querySelector(i6);ve?R.setState("value",ve.getAttribute(ch)):te(Q)}let re=()=>ae(de().length-1),D=Q=>{Q.preventDefault(),Q.metaKey?re():Q.altKey?X(1):te(1)},J=Q=>{Q.preventDefault(),Q.metaKey?ae(0):Q.altKey?X(-1):te(-1)};return T.createElement(an.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:Q=>{var ie;(ie=x.onKeyDown)==null||ie.call(x,Q);let me=Q.nativeEvent.isComposing||Q.keyCode===229;if(!(Q.defaultPrevented||me))switch(Q.key){case"n":case"j":{w&&Q.ctrlKey&&D(Q);break}case"ArrowDown":{D(Q);break}case"p":case"k":{w&&Q.ctrlKey&&J(Q);break}case"ArrowUp":{J(Q);break}case"Home":{Q.preventDefault(),ae(0);break}case"End":{Q.preventDefault(),re();break}case"Enter":{Q.preventDefault();let ve=q();if(ve){let Me=new Event(ek);ve.dispatchEvent(Me)}}}}},T.createElement("label",{"cmdk-label":"",htmlFor:j.inputId,id:j.labelId,style:Cye},l),y1(e,Q=>T.createElement(tB.Provider,{value:R},T.createElement(eB.Provider,{value:j},Q))))}),hye=T.forwardRef((e,t)=>{var n,r;let a=Za(),i=T.useRef(null),s=T.useContext(nB),o=Y0(),l=aB(e),u=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:s==null?void 0:s.forceMount;Ud(()=>{if(!u)return o.item(a,s==null?void 0:s.id)},[u]);let d=iB(a,i,[e.value,e.children,i],e.keywords),h=pA(),p=Eu(I=>I.value&&I.value===d.current),y=Eu(I=>u||o.filter()===!1?!0:I.search?I.filtered.items.get(a)>0:!0);T.useEffect(()=>{let I=i.current;if(!(!I||e.disabled))return I.addEventListener(ek,v),()=>I.removeEventListener(ek,v)},[y,e.onSelect,e.disabled]);function v(){var I,R;b(),(R=(I=l.current).onSelect)==null||R.call(I,d.current)}function b(){h.setState("value",d.current,!0)}if(!y)return null;let{disabled:w,value:x,onSelect:S,forceMount:E,keywords:C,...k}=e;return T.createElement(an.div,{ref:iu(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!p,"data-disabled":!!w,"data-selected":!!p,onPointerMove:w||o.getDisablePointerSelection()?void 0:b,onClick:w?void 0:v},e.children)}),pye=T.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,s=Za(),o=T.useRef(null),l=T.useRef(null),u=Za(),d=Y0(),h=Eu(y=>a||d.filter()===!1?!0:y.search?y.filtered.groups.has(s):!0);Ud(()=>d.group(s),[]),iB(s,o,[e.value,e.heading,l]);let p=T.useMemo(()=>({id:s,forceMount:a}),[a]);return T.createElement(an.div,{ref:iu(o,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&T.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),y1(e,y=>T.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},T.createElement(nB.Provider,{value:p},y))))}),mye=T.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=T.useRef(null),i=Eu(s=>!s.search);return!n&&!i?null:T.createElement(an.div,{ref:iu(a,t),...r,"cmdk-separator":"",role:"separator"})}),gye=T.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=pA(),s=Eu(u=>u.search),o=Eu(u=>u.selectedItemId),l=Y0();return T.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),T.createElement(an.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:a?e.value:s,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),yye=T.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=T.useRef(null),s=T.useRef(null),o=Eu(u=>u.selectedItemId),l=Y0();return T.useEffect(()=>{if(s.current&&i.current){let u=s.current,d=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let y=u.offsetHeight;d.style.setProperty("--cmdk-list-height",y.toFixed(1)+"px")})});return p.observe(u),()=>{cancelAnimationFrame(h),p.unobserve(u)}}},[]),T.createElement(an.div,{ref:iu(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},y1(e,u=>T.createElement("div",{ref:iu(s,l.listInnerRef),"cmdk-list-sizer":""},u)))}),bye=T.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:s,...o}=e;return T.createElement(I9,{open:n,onOpenChange:r},T.createElement(j9,{container:s},T.createElement(O9,{"cmdk-overlay":"",className:a}),T.createElement(D9,{"aria-label":e.label,"cmdk-dialog":"",className:i},T.createElement(rB,{ref:t,...o}))))}),vye=T.forwardRef((e,t)=>Eu(n=>n.filtered.count===0)?T.createElement(an.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),wye=T.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return T.createElement(an.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},y1(e,s=>T.createElement("div",{"aria-hidden":!0},s)))}),_p=Object.assign(rB,{List:yye,Item:hye,Input:gye,Group:pye,Separator:mye,Dialog:bye,Empty:vye,Loading:wye});function xye(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function _ye(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function aB(e){let t=T.useRef(e);return Ud(()=>{t.current=e}),t}var Ud=typeof window>"u"?T.useEffect:T.useLayoutEffect;function uh(e){let t=T.useRef();return t.current===void 0&&(t.current=e()),t}function Eu(e){let t=pA(),n=()=>e(t.snapshot());return T.useSyncExternalStore(t.subscribe,n,n)}function iB(e,t,n,r=[]){let a=T.useRef(),i=Y0();return Ud(()=>{var s;let o=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),l=r.map(u=>u.trim());i.value(e,o,l),(s=t.current)==null||s.setAttribute(ch,o),a.current=o}),a}var Sye=()=>{let[e,t]=T.useState(),n=uh(()=>new Map);return Ud(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Eye(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function y1({asChild:e,children:t},n){return e&&T.isValidElement(t)?T.cloneElement(Eye(t),{ref:t.ref},n(t.props.children)):n(t)}var Cye={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function sB({className:e,...t}){return m.jsx(_p,{"data-slot":"command",className:At("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function oB({className:e,...t}){return m.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[m.jsx(Wl,{className:"size-4 shrink-0 opacity-50"}),m.jsx(_p.Input,{"data-slot":"command-input",className:At("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function lB({className:e,...t}){return m.jsx(_p.List,{"data-slot":"command-list",className:At("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function cB({...e}){return m.jsx(_p.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function uB({className:e,...t}){return m.jsx(_p.Group,{"data-slot":"command-group",className:At("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function dB({className:e,...t}){return m.jsx(_p.Item,{"data-slot":"command-item",className:At("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}var b1="Popover",[fB,nSe]=Ei(b1,[Cu]),X0=Cu(),[kye,Fu]=fB(b1),hB=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!1}=e,o=X0(t),l=T.useRef(null),[u,d]=T.useState(!1),[h,p]=ro({prop:r,defaultProp:a??!1,onChange:i,caller:b1});return m.jsx(hx,{...o,children:m.jsx(kye,{scope:t,contentId:Za(),triggerRef:l,open:h,onOpenChange:p,onOpenToggle:T.useCallback(()=>p(y=>!y),[p]),hasCustomAnchor:u,onCustomAnchorAdd:T.useCallback(()=>d(!0),[]),onCustomAnchorRemove:T.useCallback(()=>d(!1),[]),modal:s,children:n})})};hB.displayName=b1;var pB="PopoverAnchor",Tye=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Fu(pB,n),i=X0(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=a;return T.useEffect(()=>(s(),()=>o()),[s,o]),m.jsx(p0,{...i,...r,ref:t})});Tye.displayName=pB;var mB="PopoverTrigger",gB=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Fu(mB,n),i=X0(n),s=Cn(t,a.triggerRef),o=m.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":xB(a.open),...r,ref:s,onClick:Wt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:m.jsx(p0,{asChild:!0,...i,children:o})});gB.displayName=mB;var mA="PopoverPortal",[Aye,Nye]=fB(mA,{forceMount:void 0}),yB=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=Fu(mA,t);return m.jsx(Aye,{scope:t,forceMount:n,children:m.jsx(ka,{present:n||i.open,children:m.jsx(ap,{asChild:!0,container:a,children:r})})})};yB.displayName=mA;var Xh="PopoverContent",bB=T.forwardRef((e,t)=>{const n=Nye(Xh,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=Fu(Xh,e.__scopePopover);return m.jsx(ka,{present:r||i.open,children:i.modal?m.jsx(Iye,{...a,ref:t}):m.jsx(jye,{...a,ref:t})})});bB.displayName=Xh;var Rye=su("PopoverContent.RemoveScroll"),Iye=T.forwardRef((e,t)=>{const n=Fu(Xh,e.__scopePopover),r=T.useRef(null),a=Cn(t,r),i=T.useRef(!1);return T.useEffect(()=>{const s=r.current;if(s)return Qx(s)},[]),m.jsx(Z0,{as:Rye,allowPinchZoom:!0,children:m.jsx(vB,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wt(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Wt(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,u=o.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Wt(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),jye=T.forwardRef((e,t)=>{const n=Fu(Xh,e.__scopePopover),r=T.useRef(!1),a=T.useRef(!1);return m.jsx(vB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),vB=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...h}=e,p=Fu(Xh,n),y=X0(n);return Xx(),m.jsx(K0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:m.jsx(tp,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:m.jsx(px,{"data-state":xB(p.open),role:"dialog",id:p.contentId,...y,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),wB="PopoverClose",Oye=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Fu(wB,n);return m.jsx(an.button,{type:"button",...r,ref:t,onClick:Wt(e.onClick,()=>a.onOpenChange(!1))})});Oye.displayName=wB;var Dye="PopoverArrow",Mye=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=X0(n);return m.jsx(mx,{...a,...r,ref:t})});Mye.displayName=Dye;function xB(e){return e?"open":"closed"}var Pye=hB,Fye=gB,Lye=yB,$ye=bB;function Lu({...e}){return m.jsx(Pye,{"data-slot":"popover",...e})}function $u({...e}){return m.jsx(Fye,{"data-slot":"popover-trigger",...e})}function Bu({className:e,align:t="center",sideOffset:n=4,...r}){return m.jsx(Lye,{children:m.jsx($ye,{"data-slot":"popover-content",align:t,sideOffset:n,className:At("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const v1=gt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const[a,i]=T.useState(!1),[s,o]=T.useState(""),[l,u]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),{dbProviderConfigs:d,globalModelSortOrder:h,isLoading:p}=$n(dn(E=>({dbProviderConfigs:E.dbProviderConfigs,globalModelSortOrder:E.globalModelSortOrder,isLoading:E.isLoading}))),y=T.useMemo(()=>{const E=new Map,C=new Set;d.forEach(R=>{if(!R.isEnabled||!R.enabledModels)return;const j=$n.getState().getAllAvailableModelDefsForProvider(R.id)??[],L=new Map(j.map(B=>[B.id,B]));R.enabledModels.forEach(B=>{const Z=Qc(R.id,B),P=L.get(B);P&&(C.add(Z),E.set(Z,{name:P.name||B,providerName:R.name,metadata:P}))})});const k=[],I=new Set;return h.forEach(R=>{if(C.has(R)){const j=E.get(R);j&&!I.has(R)&&(k.push({id:R,...j}),I.add(R))}}),C.forEach(R=>{if(!I.has(R)){const j=E.get(R);j&&k.push({id:R,...j})}}),k},[d,h]),v=T.useMemo(()=>{let E=y;if(s.trim()){const k=s.toLowerCase();E=y.filter(I=>I.name.toLowerCase().includes(k)||I.providerName.toLowerCase().includes(k)||I.id.toLowerCase().includes(k))}const C=Object.entries(l).filter(([,k])=>k).map(([k])=>k);return C.length===0?E:E.filter(k=>{var j,L,B;const I=new Set(((j=k.metadata)==null?void 0:j.supported_parameters)??[]),R=new Set(((B=(L=k.metadata)==null?void 0:L.architecture)==null?void 0:B.input_modalities)??[]);return C.every(Z=>{switch(Z){case"reasoning":return I.has("reasoning");case"webSearch":return I.has("web_search")||I.has("web_search_options");case"tools":return I.has("tools");case"multimodal":return Array.from(R).some(P=>P!=="text");default:return!0}})})},[y,s,l]),b=T.useMemo(()=>y.find(E=>E.id===e),[y,e]),w=T.useCallback(E=>{t(E===e?null:E),i(!1),o("")},[t,e]),x=E=>{u(C=>({...C,[E]:!C[E]}))};if(p)return m.jsx(dr,{className:At("h-9 w-[250px]",r)});const S=Object.values(l).filter(Boolean).length;return m.jsxs(Lu,{open:a,onOpenChange:i,children:[m.jsx($u,{asChild:!0,children:m.jsxs(Dt,{variant:"outline",role:"combobox","aria-expanded":a,disabled:n||y.length===0,className:At("w-auto justify-between h-9 text-sm font-normal",r),children:[m.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:b?`${b.name} (${b.providerName})`:"Select Model..."}),m.jsx(Kw,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),m.jsx(Bu,{className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:m.jsxs(sB,{shouldFilter:!1,children:[m.jsxs("div",{className:"flex items-center border-b px-3",children:[m.jsx(Wl,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),m.jsx(oB,{placeholder:"Search model...",value:s,onValueChange:o,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0 focus-visible:ring-offset-0"}),m.jsxs("div",{className:"flex items-center gap-0.5 ml-auto pl-2",children:[m.jsx(Vn,{tooltipText:"Filter: Reasoning",icon:m.jsx(dk,{}),onClick:()=>x("reasoning"),variant:l.reasoning?"secondary":"ghost",className:At("h-7 w-7",l.reasoning&&"text-primary"),"aria-label":"Filter by reasoning capability"}),m.jsx(Vn,{tooltipText:"Filter: Web Search",icon:m.jsx(Wl,{}),onClick:()=>x("webSearch"),variant:l.webSearch?"secondary":"ghost",className:At("h-7 w-7",l.webSearch&&"text-primary"),"aria-label":"Filter by web search capability"}),m.jsx(Vn,{tooltipText:"Filter: Tools",icon:m.jsx(tD,{}),onClick:()=>x("tools"),variant:l.tools?"secondary":"ghost",className:At("h-7 w-7",l.tools&&"text-primary"),"aria-label":"Filter by tool usage capability"}),m.jsx(Vn,{tooltipText:"Filter: Multimodal",icon:m.jsx(Q6,{}),onClick:()=>x("multimodal"),variant:l.multimodal?"secondary":"ghost",className:At("h-7 w-7",l.multimodal&&"text-primary"),"aria-label":"Filter by multimodal capability"})]})]}),m.jsxs(lB,{children:[m.jsx(cB,{children:S>0?"No models match all active filters.":"No model found."}),m.jsx(uB,{children:v.map(E=>m.jsxs(dB,{value:E.id,onSelect:w,children:[m.jsx(lo,{className:At("mr-2 h-4 w-4",e===E.id?"opacity-100":"opacity-0")}),m.jsxs("span",{className:"truncate",children:[E.name," (",E.providerName,")"]})]},E.id))})]})]})})]})});v1.displayName="GlobalModelSelector";const Bye=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r,temperature:a,setTemperature:i,topP:s,setTopP:o,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:p,setPresencePenalty:y,frequencyPenalty:v,setFrequencyPenalty:b,autoTitleEnabled:w,setAutoTitleEnabled:x,autoTitleModelId:S,setAutoTitleModelId:E,autoTitlePromptMaxLength:C,setAutoTitlePromptMaxLength:k,autoTitleIncludeFiles:I,setAutoTitleIncludeFiles:R,autoTitleIncludeRules:j,setAutoTitleIncludeRules:L,resetAssistantSettings:B}=lr(dn(X=>({globalSystemPrompt:X.globalSystemPrompt,setGlobalSystemPrompt:X.setGlobalSystemPrompt,toolMaxSteps:X.toolMaxSteps,setToolMaxSteps:X.setToolMaxSteps,temperature:X.temperature,setTemperature:X.setTemperature,topP:X.topP,setTopP:X.setTopP,maxTokens:X.maxTokens,setMaxTokens:X.setMaxTokens,topK:X.topK,setTopK:X.setTopK,presencePenalty:X.presencePenalty,setPresencePenalty:X.setPresencePenalty,frequencyPenalty:X.frequencyPenalty,setFrequencyPenalty:X.setFrequencyPenalty,autoTitleEnabled:X.autoTitleEnabled,setAutoTitleEnabled:X.setAutoTitleEnabled,autoTitleModelId:X.autoTitleModelId,setAutoTitleModelId:X.setAutoTitleModelId,autoTitlePromptMaxLength:X.autoTitlePromptMaxLength,setAutoTitlePromptMaxLength:X.setAutoTitlePromptMaxLength,autoTitleIncludeFiles:X.autoTitleIncludeFiles,setAutoTitleIncludeFiles:X.setAutoTitleIncludeFiles,autoTitleIncludeRules:X.autoTitleIncludeRules,setAutoTitleIncludeRules:X.setAutoTitleIncludeRules,resetAssistantSettings:X.resetAssistantSettings}))),Z=X=>{const re=X.target.value,D=re===""?5:parseInt(re,10);isNaN(D)||r(D)},P=X=>{const re=X.target.value,D=re===""?768:parseInt(re,10);isNaN(D)||k(D)},K=X=>{X!==null&&i(X)},q=X=>{X!==null&&o(X)},de=X=>{X!==null&&y(X)},ae=X=>{X!==null&&b(X)},te=()=>{window.confirm("Are you sure you want to reset all Assistant settings (Prompt, Parameters, Tools, Auto-Title) to their defaults?")&&B()};return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),m.jsx(Gt,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),m.jsx(Pu,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:X=>t(X.target.value),rows:4})]}),m.jsx(Ts,{}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Default Parameters"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),m.jsx(X9,{temperature:a,setTemperature:K,topP:s,setTopP:q,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:p,setPresencePenalty:de,frequencyPenalty:v,setFrequencyPenalty:ae,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},className:"p-0 w-full"})]}),m.jsx(Ts,{}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),m.jsx(Gt,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),m.jsx(jn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:Z,className:"w-24"})]}),m.jsx(Ts,{}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Automatic Title Generation"}),m.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[m.jsx(Mi,{id:"auto-title-enabled",checked:w,onCheckedChange:x,"aria-labelledby":"auto-title-enabled-label"}),m.jsx(Gt,{id:"auto-title-enabled-label",htmlFor:"auto-title-enabled",children:"Enable Auto-Title for New Chats"})]}),w&&m.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted ml-2",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"auto-title-model",children:"Model for Title Generation"}),m.jsx(v1,{value:S,onChange:E,className:"w-full"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a fast and capable model for generating concise titles."})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"auto-title-max-length",children:"Max Prompt Length for Title Generation (Chars)"}),m.jsx(jn,{id:"auto-title-max-length",type:"number",min:"100",max:"4000",step:"10",value:C,onChange:P,className:"w-24"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Limits the initial prompt length sent for title generation (100-4000)."})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Mi,{id:"auto-title-include-files",checked:I,onCheckedChange:R,"aria-labelledby":"auto-title-include-files-label"}),m.jsx(Gt,{id:"auto-title-include-files-label",htmlFor:"auto-title-include-files",children:"Include file names/types in title prompt"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Mi,{id:"auto-title-include-rules",checked:j,onCheckedChange:L,"aria-labelledby":"auto-title-include-rules-label"}),m.jsx(Gt,{id:"auto-title-include-rules-label",htmlFor:"auto-title-include-rules",children:"Include active rules in title prompt"})]})]})]}),m.jsx(Ts,{}),m.jsx("div",{className:"flex justify-end pt-4",children:m.jsxs(Dt,{variant:"outline",size:"sm",onClick:te,children:[m.jsx(gk,{className:"mr-2 h-4 w-4"}),"Reset Assistant Settings"]})})]})},zye=gt.memo(Bye);var w1="Checkbox",[Uye,rSe]=Ei(w1),[Hye,qye]=Uye(w1),_B=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[p,y]=T.useState(null),v=Cn(t,C=>y(C)),b=T.useRef(!1),w=p?d||!!p.closest("form"):!0,[x,S]=ro({prop:a,defaultProp:i??!1,onChange:u,caller:w1}),E=T.useRef(x);return T.useEffect(()=>{const C=p==null?void 0:p.form;if(C){const k=()=>S(E.current);return C.addEventListener("reset",k),()=>C.removeEventListener("reset",k)}},[p,S]),m.jsxs(Hye,{scope:n,state:x,disabled:o,children:[m.jsx(an.button,{type:"button",role:"checkbox","aria-checked":au(x)?"mixed":x,"aria-required":s,"data-state":kB(x),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onKeyDown:Wt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Wt(e.onClick,C=>{S(k=>au(k)?!0:!k),w&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),w&&m.jsx(CB,{control:p,bubbles:!b.current,name:r,value:l,checked:x,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:au(i)?!1:i})]})});_B.displayName=w1;var SB="CheckboxIndicator",EB=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=qye(SB,n);return m.jsx(ka,{present:r||au(i.state)||i.state===!0,children:m.jsx(an.span,{"data-state":kB(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});EB.displayName=SB;var Vye="CheckboxBubbleInput",CB=T.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},s)=>{const o=T.useRef(null),l=Cn(o,s),u=Jx(n),d=fx(t);T.useEffect(()=>{const p=o.current;if(!p)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set;if(u!==n&&b){const w=new Event("click",{bubbles:r});p.indeterminate=au(n),b.call(p,au(n)?!1:n),p.dispatchEvent(w)}},[u,n,r]);const h=T.useRef(au(n)?!1:n);return m.jsx(an.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});CB.displayName=Vye;function au(e){return e==="indeterminate"}function kB(e){return au(e)?"indeterminate":e?"checked":"unchecked"}var Gye=_B,Wye=EB;function zw({className:e,...t}){return m.jsx(Gye,{"data-slot":"checkbox",className:At("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:m.jsx(Wye,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:m.jsx(lo,{className:"size-3.5"})})})}const Kye=()=>{const{importConversation:e,exportAllConversations:t}=mn(dn(P=>({importConversation:P.importConversation,exportAllConversations:P.exportAllConversations}))),n=T.useRef(null),r=T.useRef(null),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[l,u]=T.useState(!1),[d,h]=T.useState(!1),[p,y]=T.useState(!1),[v,b]=T.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),[w,x]=T.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),S=()=>{var P;(P=n.current)==null||P.click()},E=()=>{var P;(P=r.current)==null||P.click()},C=T.useCallback(async P=>{var q;const K=(q=P.target.files)==null?void 0:q[0];if(K){i(!0);try{await e(K)}catch(de){console.error("Import failed (from component):",de)}finally{n.current&&(n.current.value=""),i(!1)}}},[e]),k=T.useCallback(async P=>{var q;const K=(q=P.target.files)==null?void 0:q[0];if(K){if(!window.confirm("Importing this file will OVERWRITE existing data for the selected categories. Are you sure you want to proceed?")){r.current&&(r.current.value="");return}y(!0);try{await mh.importFullConfiguration(K,v)}catch(de){console.error("Full import failed (from component):",de)}finally{r.current&&(r.current.value=""),y(!1)}}},[v]),I=T.useCallback(async()=>{o(!0);try{await t()}catch(P){console.error("Export all failed (from component):",P)}finally{o(!1)}},[t]),R=T.useCallback(async()=>{h(!0);try{await mh.exportFullConfiguration(w)}catch(P){console.error("Full export failed (from component):",P)}finally{h(!1)}},[w]),j=T.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await xt.clearAllData(),Ye.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(P){const K="Failed to clear all data";console.error(K,P),Ye.error(`${K}: ${P instanceof Error?P.message:String(P)}`),u(!1)}}},[]),L=(P,K)=>{b(q=>({...q,[P]:K}))},B=(P,K)=>{x(q=>({...q,[P]:K}))},Z=(P,K,q,de)=>{const ae=P==="import"?v:w,te=P==="import"?L:B,X=P==="import"?p:d;return m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(zw,{id:`${P}-${K}`,checked:ae[K],onCheckedChange:re=>te(K,!!re),disabled:X}),m.jsxs(Gt,{htmlFor:`${P}-${K}`,className:"text-sm font-normal flex items-center gap-1.5",children:[m.jsx(de,{className:"h-4 w-4 text-muted-foreground"})," ",q]})]},`${P}-${K}`)};return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Single Conversation"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[m.jsx(Gt,{className:"font-semibold",children:"Import Conversation"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Import a previously exported single conversation (.json file)."}),m.jsx("input",{type:"file",ref:n,onChange:C,accept:".json",className:"hidden",id:"import-file-input",disabled:a}),m.jsxs(Dt,{onClick:S,variant:"outline",size:"sm",disabled:a,children:[a?m.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}):m.jsx(cV,{className:"mr-2 h-4 w-4"}),a?"Importing...":"Select File..."]})]}),m.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[m.jsx(Gt,{className:"font-semibold",children:"Export All Conversations"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all conversations and messages into a single JSON file."}),m.jsxs(Dt,{onClick:I,variant:"outline",size:"sm",disabled:s,children:[s?m.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}):m.jsx(bh,{className:"mr-2 h-4 w-4"}),s?"Exporting...":"Export All Chats"]})]})]})]}),m.jsx(Ts,{}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Full Configuration"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[m.jsx(Gt,{className:"font-semibold",children:"Import Full Configuration"}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:["Import a full configuration backup (.json). Select which data types to import below."," ",m.jsx("strong",{className:"text-destructive",children:"This will overwrite existing data for selected types."})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[Z("import","importSettings","Settings",Rv),Z("import","importApiKeys","API Keys",B2),Z("import","importProviderConfigs","Providers",KI),Z("import","importProjects","Projects",GI),Z("import","importConversations","Conversations",z2),Z("import","importRulesAndTags","Rules & Tags",U2),Z("import","importMods","Mods",WI),Z("import","importSyncRepos","Sync Repos",Rd)]}),m.jsx("input",{type:"file",ref:r,onChange:k,accept:".json",className:"hidden",id:"full-import-file-input",disabled:p}),m.jsxs(Dt,{onClick:E,variant:"outline",size:"sm",disabled:p,className:"mt-2",children:[p?m.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}):m.jsx(aq,{className:"mr-2 h-4 w-4"}),p?"Importing...":"Select Full Backup File..."]})]}),m.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[m.jsx(Gt,{className:"font-semibold",children:"Export Full Configuration"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all settings, providers, keys, projects, conversations, rules, tags, mods, etc., into a single backup file. Select which data types to include."}),m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[Z("export","importSettings","Settings",Rv),Z("export","importApiKeys","API Keys",B2),Z("export","importProviderConfigs","Providers",KI),Z("export","importProjects","Projects",GI),Z("export","importConversations","Conversations",z2),Z("export","importRulesAndTags","Rules & Tags",U2),Z("export","importMods","Mods",WI),Z("export","importSyncRepos","Sync Repos",Rd)]}),m.jsxs(Dt,{onClick:R,variant:"outline",size:"sm",disabled:d,className:"mt-2",children:[d?m.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}):m.jsx(YH,{className:"mr-2 h-4 w-4"}),d?"Exporting...":"Export Full Backup"]})]})]})]}),m.jsx(Ts,{}),m.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[m.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),m.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),m.jsxs(Dt,{onClick:j,variant:"destructive",disabled:l,children:[l?m.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}):m.jsx(ns,{className:"mr-2 h-4 w-4"}),l?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},Zye=gt.memo(Kye),Yye=ck("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function TB({className:e,variant:t,...n}){return m.jsx("div",{"data-slot":"alert",role:"alert",className:At(Yye({variant:t}),e),...n})}function AB({className:e,...t}){return m.jsx("div",{"data-slot":"alert-title",className:At("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function NB({className:e,...t}){return m.jsx("div",{"data-slot":"alert-description",className:At("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function Sp({className:e,...t}){return m.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:m.jsx("table",{"data-slot":"table",className:At("w-full caption-bottom text-sm",e),...t})})}function Ep({className:e,...t}){return m.jsx("thead",{"data-slot":"table-header",className:At("[&_tr]:border-b",e),...t})}function Cp({className:e,...t}){return m.jsx("tbody",{"data-slot":"table-body",className:At("[&_tr:last-child]:border-0",e),...t})}function Xr({className:e,...t}){return m.jsx("tr",{"data-slot":"table-row",className:At("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Tr({className:e,...t}){return m.jsx("th",{"data-slot":"table-head",className:At("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function On({className:e,...t}){return m.jsx("td",{"data-slot":"table-cell",className:At("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const Xye=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=t0(dn(I=>({loadedMods:I.loadedMods,addDbMod:I.addDbMod,updateDbMod:I.updateDbMod,deleteDbMod:I.deleteDbMod,dbMods:I.dbMods,isLoading:I.isLoading}))),[s,o]=T.useState(""),[l,u]=T.useState(""),[d,h]=T.useState(""),[p,y]=T.useState(!1),[v,b]=T.useState({}),[w,x]=T.useState({}),S=T.useCallback(async()=>{if(!s.trim()){Ye.error("Mod name cannot be empty.");return}if(!l.trim()&&!d.trim()){Ye.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&d.trim()){Ye.error("Provide either a Mod URL or Script Content, not both.");return}y(!0);try{const I={name:s.trim(),sourceUrl:l.trim()||null,scriptContent:d.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(I),o(""),u(""),h(""),Ye.info("Mod added. Reload required for changes to take effect.")}catch(I){console.error("Failed to add mod (from component):",I)}finally{y(!1)}},[s,l,d,t,a==null?void 0:a.length]),E=T.useCallback(async I=>{b(R=>({...R,[I.id]:!0}));try{await n(I.id,{enabled:!I.enabled}),Ye.info(`Mod "${I.name}" ${I.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(R){console.error("Failed to update mod (from component):",R)}finally{b(R=>({...R,[I.id]:!1}))}},[n]),C=T.useCallback(async I=>{if(window.confirm(`Are you sure you want to delete the mod "${I.name}"? This cannot be undone.`)){x(R=>({...R,[I.id]:!0}));try{await r(I.id),Ye.info("Mod deleted. Reload required for changes to take effect.")}catch(R){console.error("Failed to delete mod (from component):",R)}finally{x(R=>({...R,[I.id]:!1}))}}},[r]),k=T.useCallback(I=>{const R=e.find(L=>L.id===I);if(R)if(R.error){const L=R.error instanceof Error?R.error.message:String(R.error);return{status:"Error",error:R.error,tooltip:L}}else return{status:"Loaded"};const j=(a||[]).find(L=>L.id===I);return j?j.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs(TB,{variant:"destructive",className:"border-destructive/50",children:[m.jsx(Yw,{className:"h-4 w-4"}),m.jsx(AB,{children:"Security Warning"}),m.jsx(NB,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),m.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Gt,{htmlFor:"mod-name",children:"Mod Name"}),m.jsx(jn,{id:"mod-name",value:s,onChange:I=>o(I.target.value),placeholder:"My Awesome Mod",disabled:p})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Gt,{htmlFor:"mod-url",children:"Source URL (Optional)"}),m.jsx(jn,{id:"mod-url",type:"url",value:l,onChange:I=>u(I.target.value),placeholder:"https://example.com/my-mod.js",disabled:p||!!d.trim()})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Gt,{htmlFor:"mod-script",children:"Script Content (Optional)"}),m.jsx(Pu,{id:"mod-script",value:d,onChange:I=>h(I.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:p||!!l.trim()})]}),m.jsxs(Dt,{onClick:S,disabled:p,children:[p&&m.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Mod"]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),m.jsx("div",{className:"rounded-md border",children:m.jsx(Gn,{delayDuration:100,children:m.jsxs(Sp,{children:[m.jsx(Ep,{children:m.jsxs(Xr,{children:[m.jsx(Tr,{children:"Name"}),m.jsx(Tr,{children:"Source"}),m.jsx(Tr,{children:"Status"}),m.jsx(Tr,{className:"text-center",children:"Enabled"}),m.jsx(Tr,{className:"text-right",children:"Actions"})]})}),m.jsx(Cp,{children:i?m.jsxs(m.Fragment,{children:[m.jsx(Xr,{children:m.jsx(On,{colSpan:5,children:m.jsx(dr,{className:"h-10 w-full"})})}),m.jsx(Xr,{children:m.jsx(On,{colSpan:5,children:m.jsx(dr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?m.jsx(Xr,{children:m.jsx(On,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(I=>{const{status:R,error:j,tooltip:L}=k(I.id),B=I.sourceUrl?new URL(I.sourceUrl).hostname:"Direct Script",Z=v[I.id],P=w[I.id],K=Z||P,q=R==="Error";return m.jsxs(Xr,{children:[m.jsx(On,{className:"font-medium",children:I.name}),m.jsx(On,{className:"text-muted-foreground",children:B}),m.jsxs(On,{children:[m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx("span",{className:q?"text-destructive font-semibold cursor-help":"",children:R})}),L&&m.jsx(Qn,{className:"max-w-xs break-words",children:m.jsx("p",{children:L})})]}),q&&j&&m.jsx("p",{className:"text-xs text-destructive truncate",children:j instanceof Error?j.message:String(j)})]}),m.jsxs(On,{className:"text-center",children:[m.jsx(Mi,{checked:I.enabled??!1,onCheckedChange:()=>E(I),disabled:K,"aria-label":`Enable ${I.name}`}),Z&&m.jsx(Pn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),m.jsx(On,{className:"text-right",children:m.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>C(I),disabled:K,"aria-label":`Delete ${I.name}`,className:"text-destructive hover:text-destructive/80",children:P?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(ns,{className:"h-4 w-4"})})})]},I.id)})})]})})})]})]})},Jye=gt.memo(Xye),Qye=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:s,isDeleting:o,onSelectModelForDetails:l})=>{var Z,P;const[u,d]=T.useState(!0),h=aw(e.type),p=Rk(e.type),y=fh(e.type),v=s==="fetching"||o,b=o||s==="fetching",w=o||s==="fetching",S=$n(K=>K.getAllAvailableModelDefsForProvider)(e.id),E=T.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),C=e.apiKeyId?t.some(K=>K.id===e.apiKeyId):!1,k=h&&!C,I=T.useCallback(async(K,q)=>{const de=new Set(e.enabledModels??[]);q?de.add(K):de.delete(K);const ae=Array.from(de);try{await i(e.id,{enabledModels:ae})}catch(te){Ye.error("Failed to update model status."),console.error("Failed to save model toggle:",te)}},[e.enabledModels,e.id,i]),R=()=>d(K=>!K),j=((Z=e.enabledModels)==null?void 0:Z.length)??0,L=S.length,B=K=>{const q=Qc(e.id,K);l(q)};return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{children:m.jsx("span",{className:At("h-2.5 w-2.5 rounded-full flex-shrink-0 block",s==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),m.jsx(Qn,{side:"top",children:s==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),m.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),m.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),k&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{children:m.jsx(Nd,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),m.jsx(Qn,{side:"top",children:m.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),m.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[m.jsx(Vn,{tooltipText:"Edit",onClick:n,disabled:b,"aria-label":"Edit provider",icon:m.jsx(c0,{}),className:"h-8 w-8"}),m.jsx(Vn,{tooltipText:"Delete",onClick:r,disabled:w,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:o?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(ns,{})})]})]}),m.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[h&&m.jsxs("div",{children:["API Key:"," ",e.apiKeyId?C?m.jsx("span",{className:"text-green-400",children:((P=t.find(K=>K.id===e.apiKeyId))==null?void 0:P.name)||"Linked (Unnamed Key)"}):m.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):m.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),p&&m.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),m.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?m.jsx("span",{className:"text-green-400",children:"Enabled"}):m.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&m.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),y&&m.jsx("div",{className:"pt-1",children:m.jsxs(Dt,{variant:"outline",size:"sm",onClick:a,disabled:v,className:"text-xs h-7 px-2",children:[s==="fetching"&&m.jsx(Pn,{className:"h-3 w-3 mr-1 animate-spin"}),s==="success"&&m.jsx(lo,{className:"h-3 w-3 mr-1 text-green-500"}),s==="error"&&m.jsx(Nd,{className:"h-3 w-3 mr-1 text-destructive"}),s==="idle"&&m.jsx(Zw,{className:"h-3 w-3 mr-1"}),s==="fetching"?"Fetching...":s==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),m.jsxs("div",{className:"space-y-1 pt-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",j," / ",L," enabled)"]}),m.jsx(Vn,{tooltipText:u?"Show Models":"Hide Models",onClick:R,"aria-label":u?"Show model list":"Hide model list",icon:u?m.jsx(rl,{}):m.jsx(Hd,{}),className:"h-6 w-6"})]}),!u&&m.jsx(QT,{providerId:e.id,allAvailableModels:S.map(K=>({id:K.id,name:K.name})),enabledModelIds:E,onToggleModel:I,isLoading:s==="fetching",disabled:o,listHeightClass:"h-64",onModelClick:B})]})]})},ebe=gt.memo(Qye),tbe=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:s,onChange:o})=>{const l=aw(t.type??null),u=Rk(t.type??null),d=fh(t.type??null),h=t.isEnabled??!1,p=t.autoFetchModels??!1,y=T.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=T.useCallback((b,w)=>{const x=new Set(t.enabledModels??[]);w?x.add(b):x.delete(b);const S=Array.from(x);o("enabledModels",S)},[t.enabledModels,o]);return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Gt,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),m.jsx(jn,{id:`edit-name-${e}`,value:t.name||"",onChange:b=>o("name",b.target.value),placeholder:"Provider Name",disabled:a})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Gt,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),m.jsxs(Jo,{value:t.type??"",onValueChange:b=>o("type",b),disabled:a,children:[m.jsx(el,{id:`edit-type-${e}`,children:m.jsx(Qo,{placeholder:"Select Type"})}),m.jsx(tl,{children:Ad.map(b=>m.jsx(Gr,{value:b.value,children:b.label},b.value))})]})]}),l&&m.jsxs("div",{className:"space-y-1",children:[m.jsx(Gt,{children:"API Key"}),m.jsx(r$,{selectedKeyId:t.apiKeyId??null,onKeySelected:b=>o("apiKeyId",b),apiKeys:n,disabled:a})]}),u&&m.jsxs("div",{className:"space-y-1",children:[m.jsx(Gt,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),m.jsx(jn,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:b=>o("baseURL",b.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),m.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[m.jsx(Mi,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:b=>o("isEnabled",b),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),m.jsx(Gt,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Mi,{id:`edit-autofetch-${e}`,checked:p,onCheckedChange:b=>o("autoFetchModels",b),disabled:!d||a,"aria-labelledby":`edit-autofetch-label-${e}`}),m.jsxs(Gt,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:d?"":"text-muted-foreground",children:["Auto-fetch models ",d?"":"(Not Supported)"]})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),m.jsx(QT,{providerId:e,allAvailableModels:r,enabledModelIds:y,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),m.jsx(Ts,{className:"my-4"}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(Dt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[m.jsx(Rs,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),m.jsxs(Dt,{variant:"secondary",size:"sm",onClick:s,disabled:a,type:"button",children:[a&&m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(Vd,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},nbe=gt.memo(tbe),rbe=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i,onSelectModelForDetails:s})=>{const[o,l]=T.useState(!1),[u,d]=T.useState(!1),[h,p]=T.useState(!1),[y,v]=T.useState({}),b=$n(L=>L.getAllAvailableModelDefsForProvider),[w,x]=T.useState([]),S=T.useMemo(()=>[...w].sort((L,B)=>(L.name||L.id).localeCompare(B.name||B.id)),[w]);T.useEffect(()=>{if(o){const L=b(e.id);x(L.map(B=>({id:B.id,name:B.name}))),v({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else x([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const E=()=>l(!0),C=()=>{l(!1),v({}),d(!1)},k=T.useCallback(async()=>{d(!0);try{const L=y.enabledModels&&y.enabledModels.length>0?y.enabledModels:null,B={name:y.name,type:y.type,isEnabled:y.isEnabled,apiKeyId:y.apiKeyId,baseURL:y.baseURL,autoFetchModels:y.autoFetchModels,enabledModels:L};Object.keys(B).forEach(Z=>{B[Z]===void 0&&delete B[Z]}),await n(e.id,B),l(!1),v({}),Ye.success(`Provider "${B.name||e.name}" updated.`)}catch(L){console.error("Failed to save provider update:",L),Ye.error("Failed to save provider configuration.")}finally{d(!1)}},[y,n,e.id,e.name]),I=T.useCallback((L,B)=>{v(Z=>({...Z,[L]:B}))},[]),R=T.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){p(!0);try{await r(e.id)}catch(L){console.error("Failed to delete provider:",L),p(!1)}}},[r,e.id,e.name]),j=T.useCallback(async()=>{if(await a(e.id),o){const L=b(e.id);x(L.map(B=>({id:B.id,name:B.name})))}},[a,e.id,o,b]);return m.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?m.jsx(nbe,{providerId:e.id,editData:y,apiKeys:t,allAvailableModels:S,isSaving:u,onCancel:C,onSave:k,onChange:I,onUpdate:n}):m.jsx(ebe,{provider:e,apiKeys:t,onEdit:E,onDelete:R,onFetchModels:j,onUpdate:n,fetchStatus:i,isDeleting:h,onSelectModelForDetails:s})})},abe=gt.memo(rbe);var N2="rovingFocusGroup.onEntryFocus",ibe={bubbles:!1,cancelable:!0},J0="RovingFocusGroup",[tk,RB,sbe]=Yx(J0),[obe,x1]=Ei(J0,[sbe]),[lbe,cbe]=obe(J0),IB=T.forwardRef((e,t)=>m.jsx(tk.Provider,{scope:e.__scopeRovingFocusGroup,children:m.jsx(tk.Slot,{scope:e.__scopeRovingFocusGroup,children:m.jsx(ube,{...e,ref:t})})}));IB.displayName=J0;var ube=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,p=T.useRef(null),y=Cn(t,p),v=vp(i),[b,w]=ro({prop:s,defaultProp:o??null,onChange:l,caller:J0}),[x,S]=T.useState(!1),E=Fa(u),C=RB(n),k=T.useRef(!1),[I,R]=T.useState(0);return T.useEffect(()=>{const j=p.current;if(j)return j.addEventListener(N2,E),()=>j.removeEventListener(N2,E)},[E]),m.jsx(lbe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:T.useCallback(j=>w(j),[w]),onItemShiftTab:T.useCallback(()=>S(!0),[]),onFocusableItemAdd:T.useCallback(()=>R(j=>j+1),[]),onFocusableItemRemove:T.useCallback(()=>R(j=>j-1),[]),children:m.jsx(an.div,{tabIndex:x||I===0?-1:0,"data-orientation":r,...h,ref:y,style:{outline:"none",...e.style},onMouseDown:Wt(e.onMouseDown,()=>{k.current=!0}),onFocus:Wt(e.onFocus,j=>{const L=!k.current;if(j.target===j.currentTarget&&L&&!x){const B=new CustomEvent(N2,ibe);if(j.currentTarget.dispatchEvent(B),!B.defaultPrevented){const Z=C().filter(ae=>ae.focusable),P=Z.find(ae=>ae.active),K=Z.find(ae=>ae.id===b),de=[P,K,...Z].filter(Boolean).map(ae=>ae.ref.current);DB(de,d)}}k.current=!1}),onBlur:Wt(e.onBlur,()=>S(!1))})})}),jB="RovingFocusGroupItem",OB=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:s,...o}=e,l=Za(),u=i||l,d=cbe(jB,n),h=d.currentTabStopId===u,p=RB(n),{onFocusableItemAdd:y,onFocusableItemRemove:v,currentTabStopId:b}=d;return T.useEffect(()=>{if(r)return y(),()=>v()},[r,y,v]),m.jsx(tk.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:m.jsx(an.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Wt(e.onMouseDown,w=>{r?d.onItemFocus(u):w.preventDefault()}),onFocus:Wt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Wt(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=hbe(w,d.orientation,d.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let E=p().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const C=E.indexOf(w.currentTarget);E=d.loop?pbe(E,C+1):E.slice(C+1)}setTimeout(()=>DB(E))}}),children:typeof s=="function"?s({isCurrentTabStop:h,hasTabStop:b!=null}):s})})});OB.displayName=jB;var dbe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fbe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function hbe(e,t,n){const r=fbe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return dbe[r]}function DB(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function pbe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var MB=IB,PB=OB,_1="Tabs",[mbe,aSe]=Ei(_1,[x1]),FB=x1(),[gbe,gA]=mbe(_1),LB=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:l="automatic",...u}=e,d=vp(o),[h,p]=ro({prop:r,onChange:a,defaultProp:i??"",caller:_1});return m.jsx(gbe,{scope:n,baseId:Za(),value:h,onValueChange:p,orientation:s,dir:d,activationMode:l,children:m.jsx(an.div,{dir:d,"data-orientation":s,...u,ref:t})})});LB.displayName=_1;var $B="TabsList",BB=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=gA($B,n),s=FB(n);return m.jsx(MB,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:m.jsx(an.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});BB.displayName=$B;var zB="TabsTrigger",UB=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,s=gA(zB,n),o=FB(n),l=VB(s.baseId,r),u=GB(s.baseId,r),d=r===s.value;return m.jsx(PB,{asChild:!0,...o,focusable:!a,active:d,children:m.jsx(an.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:Wt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?s.onValueChange(r):h.preventDefault()}),onKeyDown:Wt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(r)}),onFocus:Wt(e.onFocus,()=>{const h=s.activationMode!=="manual";!d&&!a&&h&&s.onValueChange(r)})})})});UB.displayName=zB;var HB="TabsContent",qB=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...s}=e,o=gA(HB,n),l=VB(o.baseId,r),u=GB(o.baseId,r),d=r===o.value,h=T.useRef(d);return T.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),m.jsx(ka,{present:a||d,children:({present:p})=>m.jsx(an.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});qB.displayName=HB;function VB(e,t){return`${e}-trigger-${t}`}function GB(e,t){return`${e}-content-${t}`}var ybe=LB,bbe=BB,vbe=UB,wbe=qB;function xbe({className:e,...t}){return m.jsx(ybe,{"data-slot":"tabs",className:At("flex flex-col gap-2",e),...t})}function _be({className:e,...t}){return m.jsx(bbe,{"data-slot":"tabs-list",className:At("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Sbe({className:e,...t}){return m.jsx(vbe,{"data-slot":"tabs-trigger",className:At("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Ebe({className:e,...t}){return m.jsx(wbe,{"data-slot":"tabs-content",className:At("flex-1 outline-none",e),...t})}const zu=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:a,listClassName:i,contentContainerClassName:s,scrollable:o})=>{var y;const[l,u]=T.useState(n??t??((y=e[0])==null?void 0:y.value));T.useEffect(()=>{n!==void 0&&n!==l&&u(n)},[n,l]);const d=v=>{u(v),r&&r(v)},h=At("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),p=({children:v})=>{const b=At("flex-grow overflow-y-auto pb-6 pr-2 -mr-2",s);return o?m.jsx(rc,{className:b,children:v}):m.jsx("div",{className:b,children:v})};return m.jsxs(xbe,{value:l,onValueChange:d,defaultValue:t,className:At("flex flex-col h-full",a),children:[m.jsx(_be,{className:At("flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",i),children:e.map(v=>m.jsx(Sbe,{value:v.value,disabled:v.disabled,className:h,children:v.label},v.value))}),m.jsx(p,{children:e.map(v=>m.jsx(Ebe,{value:v.value,className:"data-[state=inactive]:hidden h-full",children:v.content},v.value))})]})};function Cbe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const S1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function kp(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function yA(e){return"nodeType"in e}function zi(e){var t,n;return e?kp(e)?e:yA(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function bA(e){const{Document:t}=zi(e);return e instanceof t}function Q0(e){return kp(e)?!1:e instanceof zi(e).HTMLElement}function WB(e){return e instanceof zi(e).SVGElement}function Tp(e){return e?kp(e)?e.document:yA(e)?bA(e)?e:Q0(e)||WB(e)?e.ownerDocument:document:document:document}const nl=S1?T.useLayoutEffect:T.useEffect;function vA(e){const t=T.useRef(e);return nl(()=>{t.current=e}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function kbe(){const e=T.useRef(null),t=T.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=T.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function n0(e,t){t===void 0&&(t=[e]);const n=T.useRef(e);return nl(()=>{n.current!==e&&(n.current=e)},t),n}function ey(e,t){const n=T.useRef();return T.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Uw(e){const t=vA(e),n=T.useRef(null),r=T.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function nk(e){const t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}let R2={};function ty(e,t){return T.useMemo(()=>{if(t)return t;const n=R2[e]==null?0:R2[e]+1;return R2[e]=n,e+"-"+n},[e,t])}function KB(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,s)=>{const o=Object.entries(s);for(const[l,u]of o){const d=i[l];d!=null&&(i[l]=d+e*u)}return i},{...t})}}const Ch=KB(1),r0=KB(-1);function Tbe(e){return"clientX"in e&&"clientY"in e}function wA(e){if(!e)return!1;const{KeyboardEvent:t}=zi(e.target);return t&&e instanceof t}function Abe(e){if(!e)return!1;const{TouchEvent:t}=zi(e.target);return t&&e instanceof t}function rk(e){if(Abe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Tbe(e)?{x:e.clientX,y:e.clientY}:null}const a0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[a0.Translate.toString(e),a0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),s6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Nbe(e){return e.matches(s6)?e:e.querySelector(s6)}const Rbe={display:"none"};function Ibe(e){let{id:t,value:n}=e;return gt.createElement("div",{id:t,style:Rbe},n)}function jbe(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return gt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function Obe(){const[e,t]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const ZB=T.createContext(null);function Dbe(e){const t=T.useContext(ZB);T.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Mbe(){const[e]=T.useState(()=>new Set),t=T.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[T.useCallback(r=>{let{type:a,event:i}=r;e.forEach(s=>{var o;return(o=s[a])==null?void 0:o.call(s,i)})},[e]),t]}const Pbe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fbe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Lbe(e){let{announcements:t=Fbe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=Pbe}=e;const{announce:i,announcement:s}=Obe(),o=ty("DndLiveRegion"),[l,u]=T.useState(!1);if(T.useEffect(()=>{u(!0)},[]),Dbe(T.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:y}=h;t.onDragMove&&i(t.onDragMove({active:p,over:y}))},onDragOver(h){let{active:p,over:y}=h;i(t.onDragOver({active:p,over:y}))},onDragEnd(h){let{active:p,over:y}=h;i(t.onDragEnd({active:p,over:y}))},onDragCancel(h){let{active:p,over:y}=h;i(t.onDragCancel({active:p,over:y}))}}),[i,t])),!l)return null;const d=gt.createElement(gt.Fragment,null,gt.createElement(Ibe,{id:r,value:a.draggable}),gt.createElement(jbe,{id:o,announcement:s}));return n?zo.createPortal(d,n):d}var xa;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(xa||(xa={}));function Hw(){}function o6(e,t){return T.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function $be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const oo=Object.freeze({x:0,y:0});function YB(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function XB(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Bbe(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function l6(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function JB(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function c6(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const zbe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=c6(t,t.left,t.top),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=YB(c6(l),a);i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(XB)},Ube=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=l6(t),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=l6(l),d=a.reduce((p,y,v)=>p+YB(u[v],y),0),h=Number((d/4).toFixed(4));i.push({id:o,data:{droppableContainer:s,value:h}})}}return i.sort(XB)};function Hbe(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-r,o=i-n;if(r<a&&n<i){const l=t.width*t.height,u=e.width*e.height,d=s*o,h=d/(l+u-d);return Number(h.toFixed(4))}return 0}const qbe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:s}=i,o=n.get(s);if(o){const l=Hbe(o,t);l>0&&a.push({id:s,data:{droppableContainer:i,value:l}})}}return a.sort(Bbe)};function Vbe(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function QB(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:oo}function Gbe(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...n})}}const Wbe=Gbe(1);function Kbe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Zbe(e,t,n){const r=Kbe(t);if(!r)return e;const{scaleX:a,scaleY:i,x:s,y:o}=r,l=e.left-s-(1-a)*parseFloat(n),u=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l}}const Ybe={ignoreTransform:!1};function Ap(e,t){t===void 0&&(t=Ybe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=zi(e).getComputedStyle(e);u&&(n=Zbe(n,u,d))}const{top:r,left:a,width:i,height:s,bottom:o,right:l}=n;return{top:r,left:a,width:i,height:s,bottom:o,right:l}}function u6(e){return Ap(e,{ignoreTransform:!0})}function Xbe(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Jbe(e,t){return t===void 0&&(t=zi(e).getComputedStyle(e)),t.position==="fixed"}function Qbe(e,t){t===void 0&&(t=zi(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function E1(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(bA(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Q0(a)||WB(a)||n.includes(a))return n;const i=zi(e).getComputedStyle(a);return a!==e&&Qbe(a,i)&&n.push(a),Jbe(a,i)?n:r(a.parentNode)}return e?r(e):n}function ez(e){const[t]=E1(e,1);return t??null}function I2(e){return!S1||!e?null:kp(e)?e:yA(e)?bA(e)||e===Tp(e).scrollingElement?window:Q0(e)?e:null:null}function tz(e){return kp(e)?e.scrollX:e.scrollLeft}function nz(e){return kp(e)?e.scrollY:e.scrollTop}function ak(e){return{x:tz(e),y:nz(e)}}var Pa;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Pa||(Pa={}));function rz(e){return!S1||!e?!1:e===document.scrollingElement}function az(e){const t={x:0,y:0},n=rz(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:s,isRight:o,maxScroll:r,minScroll:t}}const eve={x:.2,y:.2};function tve(e,t,n,r,a){let{top:i,left:s,right:o,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=eve);const{isTop:u,isBottom:d,isLeft:h,isRight:p}=az(e),y={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+b.height?(y.y=Pa.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!d&&l>=t.bottom-b.height&&(y.y=Pa.Forward,v.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!p&&o>=t.right-b.width?(y.x=Pa.Forward,v.x=r*Math.abs((t.right-b.width-o)/b.width)):!h&&s<=t.left+b.width&&(y.x=Pa.Backward,v.x=r*Math.abs((t.left+b.width-s)/b.width)),{direction:y,speed:v}}function nve(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function iz(e){return e.reduce((t,n)=>Ch(t,ak(n)),oo)}function rve(e){return e.reduce((t,n)=>t+tz(n),0)}function ave(e){return e.reduce((t,n)=>t+nz(n),0)}function ive(e,t){if(t===void 0&&(t=Ap),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);ez(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const sve=[["x",["left","right"],rve],["y",["top","bottom"],ave]];class xA{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=E1(n),a=iz(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,o]of sve)for(const l of s)Object.defineProperty(this,l,{get:()=>{const u=o(r),d=a[i]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eg{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function ove(e){const{EventTarget:t}=zi(e);return e instanceof t?e:Tp(e)}function j2(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ss;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ss||(Ss={}));function d6(e){e.preventDefault()}function lve(e){e.stopPropagation()}var er;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(er||(er={}));const sz={start:[er.Space,er.Enter],cancel:[er.Esc],end:[er.Space,er.Enter,er.Tab]},cve=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case er.Right:return{...n,x:n.x+25};case er.Left:return{...n,x:n.x-25};case er.Down:return{...n,y:n.y+25};case er.Up:return{...n,y:n.y-25}}};class _A{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new eg(Tp(n)),this.windowListeners=new eg(zi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ss.Resize,this.handleCancel),this.windowListeners.add(Ss.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ss.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ive(r),n(oo)}handleKeyDown(t){if(wA(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=sz,coordinateGetter:s=cve,scrollBehavior:o="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:oo;this.referenceCoordinates||(this.referenceCoordinates=d);const h=s(t,{active:n,context:r.current,currentCoordinates:d});if(h){const p=r0(h,d),y={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const w=t.code,{isTop:x,isRight:S,isLeft:E,isBottom:C,maxScroll:k,minScroll:I}=az(b),R=nve(b),j={x:Math.min(w===er.Right?R.right-R.width/2:R.right,Math.max(w===er.Right?R.left:R.left+R.width/2,h.x)),y:Math.min(w===er.Down?R.bottom-R.height/2:R.bottom,Math.max(w===er.Down?R.top:R.top+R.height/2,h.y))},L=w===er.Right&&!S||w===er.Left&&!E,B=w===er.Down&&!C||w===er.Up&&!x;if(L&&j.x!==h.x){const Z=b.scrollLeft+p.x,P=w===er.Right&&Z<=k.x||w===er.Left&&Z>=I.x;if(P&&!p.y){b.scrollTo({left:Z,behavior:o});return}P?y.x=b.scrollLeft-Z:y.x=w===er.Right?b.scrollLeft-k.x:b.scrollLeft-I.x,y.x&&b.scrollBy({left:-y.x,behavior:o});break}else if(B&&j.y!==h.y){const Z=b.scrollTop+p.y,P=w===er.Down&&Z<=k.y||w===er.Up&&Z>=I.y;if(P&&!p.x){b.scrollTo({top:Z,behavior:o});return}P?y.y=b.scrollTop-Z:y.y=w===er.Down?b.scrollTop-k.y:b.scrollTop-I.y,y.y&&b.scrollBy({top:-y.y,behavior:o});break}}this.handleMove(t,Ch(r0(h,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}_A.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=sz,onActivation:a}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function f6(e){return!!(e&&"distance"in e)}function h6(e){return!!(e&&"delay"in e)}class SA{constructor(t,n,r){var a;r===void 0&&(r=ove(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=Tp(s),this.documentListeners=new eg(this.document),this.listeners=new eg(r),this.windowListeners=new eg(zi(s)),this.initialCoordinates=(a=rk(i))!=null?a:oo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ss.Resize,this.handleCancel),this.windowListeners.add(Ss.DragStart,d6),this.windowListeners.add(Ss.VisibilityChange,this.handleCancel),this.windowListeners.add(Ss.ContextMenu,d6),this.documentListeners.add(Ss.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(h6(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(f6(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ss.Click,lve,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ss.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!a)return;const l=(n=rk(t))!=null?n:oo,u=r0(a,l);if(!r&&o){if(f6(o)){if(o.tolerance!=null&&j2(u,o.tolerance))return this.handleCancel();if(j2(u,o.distance))return this.handleStart()}if(h6(o)&&j2(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),s(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===er.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const uve={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class EA extends SA{constructor(t){const{event:n}=t,r=Tp(n.target);super(t,uve,r)}}EA.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const dve={move:{name:"mousemove"},end:{name:"mouseup"}};var ik;(function(e){e[e.RightClick=2]="RightClick"})(ik||(ik={}));class fve extends SA{constructor(t){super(t,dve,Tp(t.event.target))}}fve.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===ik.RightClick?!1:(r==null||r({event:n}),!0)}}];const O2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class hve extends SA{constructor(t){super(t,O2)}static setup(){return window.addEventListener(O2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(O2.move.name,t)};function t(){}}}hve.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var tg;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(tg||(tg={}));var qw;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(qw||(qw={}));function pve(e){let{acceleration:t,activator:n=tg.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:s=5,order:o=qw.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:p}=e;const y=gve({delta:h,disabled:!i}),[v,b]=kbe(),w=T.useRef({x:0,y:0}),x=T.useRef({x:0,y:0}),S=T.useMemo(()=>{switch(n){case tg.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case tg.DraggableRect:return a}},[n,a,l]),E=T.useRef(null),C=T.useCallback(()=>{const I=E.current;if(!I)return;const R=w.current.x*x.current.x,j=w.current.y*x.current.y;I.scrollBy(R,j)},[]),k=T.useMemo(()=>o===qw.TreeOrder?[...u].reverse():u,[o,u]);T.useEffect(()=>{if(!i||!u.length||!S){b();return}for(const I of k){if((r==null?void 0:r(I))===!1)continue;const R=u.indexOf(I),j=d[R];if(!j)continue;const{direction:L,speed:B}=tve(I,j,S,t,p);for(const Z of["x","y"])y[Z][L[Z]]||(B[Z]=0,L[Z]=0);if(B.x>0||B.y>0){b(),E.current=I,v(C,s),w.current=B,x.current=L;return}}w.current={x:0,y:0},x.current={x:0,y:0},b()},[t,C,r,b,i,s,JSON.stringify(S),JSON.stringify(y),v,u,k,d,JSON.stringify(p)])}const mve={x:{[Pa.Backward]:!1,[Pa.Forward]:!1},y:{[Pa.Backward]:!1,[Pa.Forward]:!1}};function gve(e){let{delta:t,disabled:n}=e;const r=nk(t);return ey(a=>{if(n||!r||!a)return mve;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Pa.Backward]:a.x[Pa.Backward]||i.x===-1,[Pa.Forward]:a.x[Pa.Forward]||i.x===1},y:{[Pa.Backward]:a.y[Pa.Backward]||i.y===-1,[Pa.Forward]:a.y[Pa.Forward]||i.y===1}}},[n,t,r])}function yve(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return ey(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function bve(e,t){return T.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var i0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(i0||(i0={}));var sk;(function(e){e.Optimized="optimized"})(sk||(sk={}));const p6=new Map;function vve(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,s]=T.useState(null),{frequency:o,measure:l,strategy:u}=a,d=T.useRef(e),h=w(),p=n0(h),y=T.useCallback(function(x){x===void 0&&(x=[]),!p.current&&s(S=>S===null?x:S.concat(x.filter(E=>!S.includes(E))))},[p]),v=T.useRef(null),b=ey(x=>{if(h&&!n)return p6;if(!x||x===p6||d.current!==e||i!=null){const S=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,k=C?new xA(l(C),C):null;E.rect.current=k,k&&S.set(E.id,k)}return S}return x},[e,i,n,h,l]);return T.useEffect(()=>{d.current=e},[e]),T.useEffect(()=>{h||y()},[n,h]),T.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),T.useEffect(()=>{h||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{y(),v.current=null},o))},[o,h,y,...r]),{droppableRects:b,measureDroppableContainers:y,measuringScheduled:i!=null};function w(){switch(u){case i0.Always:return!1;case i0.BeforeDragging:return n;default:return!n}}}function oz(e,t){return ey(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function wve(e,t){return oz(e,t)}function xve(e){let{callback:t,disabled:n}=e;const r=vA(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function C1(e){let{callback:t,disabled:n}=e;const r=vA(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function _ve(e){return new xA(Ap(e),e)}function m6(e,t,n){t===void 0&&(t=_ve);const[r,a]=T.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const s=xve({callback(l){if(e)for(const u of l){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),o=C1({callback:i});return nl(()=>{i(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),r}function Sve(e){const t=oz(e);return QB(e,t)}const g6=[];function Eve(e){const t=T.useRef(e),n=ey(r=>e?r&&r!==g6&&e&&t.current&&e.parentNode===t.current.parentNode?r:E1(e):g6,[e]);return T.useEffect(()=>{t.current=e},[e]),n}function Cve(e){const[t,n]=T.useState(null),r=T.useRef(e),a=T.useCallback(i=>{const s=I2(i.target);s&&n(o=>o?(o.set(s,ak(s)),new Map(o)):null)},[]);return T.useEffect(()=>{const i=r.current;if(e!==i){s(i);const o=e.map(l=>{const u=I2(l);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,ak(u)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=e}return()=>{s(e),s(i)};function s(o){o.forEach(l=>{const u=I2(l);u==null||u.removeEventListener("scroll",a)})}},[a,e]),T.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>Ch(i,s),oo):iz(e):oo,[e,t])}function y6(e,t){t===void 0&&(t=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},t),T.useEffect(()=>{const r=e!==oo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?r0(e,n.current):oo}function kve(e){T.useEffect(()=>{if(!S1)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Tve(e,t){return T.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=s=>{i(s,t)},n},{}),[e,t])}function lz(e){return T.useMemo(()=>e?Xbe(e):null,[e])}const b6=[];function Ave(e,t){t===void 0&&(t=Ap);const[n]=e,r=lz(n?zi(n):null),[a,i]=T.useState(b6);function s(){i(()=>e.length?e.map(l=>rz(l)?r:new xA(t(l),l)):b6)}const o=C1({callback:s});return nl(()=>{o==null||o.disconnect(),s(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),a}function Nve(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Q0(t)?t:e}function Rve(e){let{measure:t}=e;const[n,r]=T.useState(null),a=T.useCallback(u=>{for(const{target:d}of u)if(Q0(d)){r(h=>{const p=t(d);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=C1({callback:a}),s=T.useCallback(u=>{const d=Nve(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[o,l]=Uw(s);return T.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const Ive=[{sensor:EA,options:{}},{sensor:_A,options:{}}],jve={current:{}},Nv={draggable:{measure:u6},droppable:{measure:u6,strategy:i0.WhileDragging,frequency:sk.Optimized},dragOverlay:{measure:Ap}};class ng extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ove={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ng,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Hw},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Nv,measureDroppableContainers:Hw,windowRect:null,measuringScheduled:!1},Dve={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Hw,draggableNodes:new Map,over:null,measureDroppableContainers:Hw},k1=T.createContext(Dve),cz=T.createContext(Ove);function Mve(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ng}}}function Pve(e,t){switch(t.type){case xa.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case xa.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case xa.DragEnd:case xa.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xa.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new ng(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case xa.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new ng(e.droppable.containers);return s.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case xa.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new ng(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Fve(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=T.useContext(k1),i=nk(r),s=nk(n==null?void 0:n.id);return T.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!wA(i)||document.activeElement===i.target)return;const o=a.get(s);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const h=Nbe(d);if(h){h.focus();break}}})}},[r,t,a,s,i]),null}function Lve(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function $ve(e){return T.useMemo(()=>({draggable:{...Nv.draggable,...e==null?void 0:e.draggable},droppable:{...Nv.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Nv.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Bve(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=T.useRef(!1),{x:s,y:o}=typeof a=="boolean"?{x:a,y:a}:a;nl(()=>{if(!s&&!o||!t){i.current=!1;return}if(i.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=QB(d,r);if(s||(h.x=0),o||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=ez(u);p&&p.scrollBy({top:h.y,left:h.x})}},[t,s,o,r,n])}const uz=T.createContext({...oo,scaleX:1,scaleY:1});var Xc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Xc||(Xc={}));const zve=T.memo(function(t){var n,r,a,i;let{id:s,accessibility:o,autoScroll:l=!0,children:u,sensors:d=Ive,collisionDetection:h=qbe,measuring:p,modifiers:y,...v}=t;const b=T.useReducer(Pve,void 0,Mve),[w,x]=b,[S,E]=Mbe(),[C,k]=T.useState(Xc.Uninitialized),I=C===Xc.Initialized,{draggable:{active:R,nodes:j,translate:L},droppable:{containers:B}}=w,Z=R!=null?j.get(R):null,P=T.useRef({initial:null,translated:null}),K=T.useMemo(()=>{var nt;return R!=null?{id:R,data:(nt=Z==null?void 0:Z.data)!=null?nt:jve,rect:P}:null},[R,Z]),q=T.useRef(null),[de,ae]=T.useState(null),[te,X]=T.useState(null),re=n0(v,Object.values(v)),D=ty("DndDescribedBy",s),J=T.useMemo(()=>B.getEnabled(),[B]),Q=$ve(p),{droppableRects:ie,measureDroppableContainers:me,measuringScheduled:ve}=vve(J,{dragging:I,dependencies:[L.x,L.y],config:Q.droppable}),Me=yve(j,R),Ae=T.useMemo(()=>te?rk(te):null,[te]),Re=Be(),ke=wve(Me,Q.draggable.measure);Bve({activeNode:R!=null?j.get(R):null,config:Re.layoutShiftCompensation,initialRect:ke,measure:Q.draggable.measure});const Fe=m6(Me,Q.draggable.measure,ke),et=m6(Me?Me.parentElement:null),Le=T.useRef({activatorEvent:null,active:null,activeNode:Me,collisionRect:null,collisions:null,droppableRects:ie,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:B,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ie=B.getNodeFor((n=Le.current.over)==null?void 0:n.id),z=Rve({measure:Q.dragOverlay.measure}),Se=(r=z.nodeRef.current)!=null?r:Me,Te=I?(a=z.rect)!=null?a:Fe:null,ue=!!(z.nodeRef.current&&z.rect),oe=Sve(ue?null:Fe),ee=lz(Se?zi(Se):null),xe=Eve(I?Ie??Me:null),Pe=Ave(xe),Ee=Lve(y,{transform:{x:L.x-oe.x,y:L.y-oe.y,scaleX:1,scaleY:1},activatorEvent:te,active:K,activeNodeRect:Fe,containerNodeRect:et,draggingNodeRect:Te,over:Le.current.over,overlayNodeRect:z.rect,scrollableAncestors:xe,scrollableAncestorRects:Pe,windowRect:ee}),We=Ae?Ch(Ae,L):null,Nt=Cve(xe),it=y6(Nt),_t=y6(Nt,[Fe]),Ft=Ch(Ee,it),Pt=Te?Wbe(Te,Ee):null,Zt=K&&Pt?h({active:K,collisionRect:Pt,droppableRects:ie,droppableContainers:J,pointerCoordinates:We}):null,ye=JB(Zt,"id"),[O,G]=T.useState(null),fe=ue?Ee:Ch(Ee,_t),je=Vbe(fe,(i=O==null?void 0:O.rect)!=null?i:null,Fe),be=T.useRef(null),Ce=T.useCallback((nt,ge)=>{let{sensor:Oe,options:Ke}=ge;if(q.current==null)return;const jt=j.get(q.current);if(!jt)return;const pe=nt.nativeEvent,V=new Oe({active:q.current,activeNode:jt,event:pe,options:Ke,context:Le,onAbort(W){if(!j.get(W))return;const{onDragAbort:Ne}=re.current,He={id:W};Ne==null||Ne(He),S({type:"onDragAbort",event:He})},onPending(W,he,Ne,He){if(!j.get(W))return;const{onDragPending:Kt}=re.current,ut={id:W,constraint:he,initialCoordinates:Ne,offset:He};Kt==null||Kt(ut),S({type:"onDragPending",event:ut})},onStart(W){const he=q.current;if(he==null)return;const Ne=j.get(he);if(!Ne)return;const{onDragStart:He}=re.current,pt={activatorEvent:pe,active:{id:he,data:Ne.data,rect:P}};zo.unstable_batchedUpdates(()=>{He==null||He(pt),k(Xc.Initializing),x({type:xa.DragStart,initialCoordinates:W,active:he}),S({type:"onDragStart",event:pt}),ae(be.current),X(pe)})},onMove(W){x({type:xa.DragMove,coordinates:W})},onEnd:H(xa.DragEnd),onCancel:H(xa.DragCancel)});be.current=V;function H(W){return async function(){const{active:Ne,collisions:He,over:pt,scrollAdjustedTranslate:Kt}=Le.current;let ut=null;if(Ne&&Kt){const{cancelDrop:Rt}=re.current;ut={activatorEvent:pe,active:Ne,collisions:He,delta:Kt,over:pt},W===xa.DragEnd&&typeof Rt=="function"&&await Promise.resolve(Rt(ut))&&(W=xa.DragCancel)}q.current=null,zo.unstable_batchedUpdates(()=>{x({type:W}),k(Xc.Uninitialized),G(null),ae(null),X(null),be.current=null;const Rt=W===xa.DragEnd?"onDragEnd":"onDragCancel";if(ut){const Lt=re.current[Rt];Lt==null||Lt(ut),S({type:Rt,event:ut})}})}}},[j]),le=T.useCallback((nt,ge)=>(Oe,Ke)=>{const jt=Oe.nativeEvent,pe=j.get(Ke);if(q.current!==null||!pe||jt.dndKit||jt.defaultPrevented)return;const V={active:pe};nt(Oe,ge.options,V)===!0&&(jt.dndKit={capturedBy:ge.sensor},q.current=Ke,Ce(Oe,ge))},[j,Ce]),ft=bve(d,le);kve(d),nl(()=>{Fe&&C===Xc.Initializing&&k(Xc.Initialized)},[Fe,C]),T.useEffect(()=>{const{onDragMove:nt}=re.current,{active:ge,activatorEvent:Oe,collisions:Ke,over:jt}=Le.current;if(!ge||!Oe)return;const pe={active:ge,activatorEvent:Oe,collisions:Ke,delta:{x:Ft.x,y:Ft.y},over:jt};zo.unstable_batchedUpdates(()=>{nt==null||nt(pe),S({type:"onDragMove",event:pe})})},[Ft.x,Ft.y]),T.useEffect(()=>{const{active:nt,activatorEvent:ge,collisions:Oe,droppableContainers:Ke,scrollAdjustedTranslate:jt}=Le.current;if(!nt||q.current==null||!ge||!jt)return;const{onDragOver:pe}=re.current,V=Ke.get(ye),H=V&&V.rect.current?{id:V.id,rect:V.rect.current,data:V.data,disabled:V.disabled}:null,W={active:nt,activatorEvent:ge,collisions:Oe,delta:{x:jt.x,y:jt.y},over:H};zo.unstable_batchedUpdates(()=>{G(H),pe==null||pe(W),S({type:"onDragOver",event:W})})},[ye]),nl(()=>{Le.current={activatorEvent:te,active:K,activeNode:Me,collisionRect:Pt,collisions:Zt,droppableRects:ie,draggableNodes:j,draggingNode:Se,draggingNodeRect:Te,droppableContainers:B,over:O,scrollableAncestors:xe,scrollAdjustedTranslate:Ft},P.current={initial:Te,translated:Pt}},[K,Me,Zt,Pt,j,Se,Te,ie,B,O,xe,Ft]),pve({...Re,delta:L,draggingRect:Pt,pointerCoordinates:We,scrollableAncestors:xe,scrollableAncestorRects:Pe});const vt=T.useMemo(()=>({active:K,activeNode:Me,activeNodeRect:Fe,activatorEvent:te,collisions:Zt,containerNodeRect:et,dragOverlay:z,draggableNodes:j,droppableContainers:B,droppableRects:ie,over:O,measureDroppableContainers:me,scrollableAncestors:xe,scrollableAncestorRects:Pe,measuringConfiguration:Q,measuringScheduled:ve,windowRect:ee}),[K,Me,Fe,te,Zt,et,z,j,B,ie,O,me,xe,Pe,Q,ve,ee]),F=T.useMemo(()=>({activatorEvent:te,activators:ft,active:K,activeNodeRect:Fe,ariaDescribedById:{draggable:D},dispatch:x,draggableNodes:j,over:O,measureDroppableContainers:me}),[te,ft,K,Fe,x,D,j,O,me]);return gt.createElement(ZB.Provider,{value:E},gt.createElement(k1.Provider,{value:F},gt.createElement(cz.Provider,{value:vt},gt.createElement(uz.Provider,{value:je},u)),gt.createElement(Fve,{disabled:(o==null?void 0:o.restoreFocus)===!1})),gt.createElement(Lbe,{...o,hiddenTextDescribedById:D}));function Be(){const nt=(de==null?void 0:de.autoScrollEnabled)===!1,ge=typeof l=="object"?l.enabled===!1:l===!1,Oe=I&&!nt&&!ge;return typeof l=="object"?{...l,enabled:Oe}:{enabled:Oe}}}),Uve=T.createContext(null),v6="button",Hve="Draggable";function qve(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=ty(Hve),{activators:s,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:p}=T.useContext(k1),{role:y=v6,roleDescription:v="draggable",tabIndex:b=0}=a??{},w=(l==null?void 0:l.id)===t,x=T.useContext(w?uz:Uve),[S,E]=Uw(),[C,k]=Uw(),I=Tve(s,t),R=n0(n);nl(()=>(h.set(t,{id:t,key:i,node:S,activatorNode:C,data:R}),()=>{const L=h.get(t);L&&L.key===i&&h.delete(t)}),[h,t]);const j=T.useMemo(()=>({role:y,tabIndex:b,"aria-disabled":r,"aria-pressed":w&&y===v6?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,y,b,w,v,d.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:j,isDragging:w,listeners:r?void 0:I,node:S,over:p,setNodeRef:E,setActivatorNodeRef:k,transform:x}}function Vve(){return T.useContext(cz)}const Gve="Droppable",Wve={timeout:25};function Kve(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=ty(Gve),{active:s,dispatch:o,over:l,measureDroppableContainers:u}=T.useContext(k1),d=T.useRef({disabled:n}),h=T.useRef(!1),p=T.useRef(null),y=T.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:w}={...Wve,...a},x=n0(b??r),S=T.useCallback(()=>{if(!h.current){h.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),y.current=null},w)},[w]),E=C1({callback:S,disabled:v||!s}),C=T.useCallback((j,L)=>{E&&(L&&(E.unobserve(L),h.current=!1),j&&E.observe(j))},[E]),[k,I]=Uw(C),R=n0(t);return T.useEffect(()=>{!E||!k.current||(E.disconnect(),h.current=!1,E.observe(k.current))},[k,E]),T.useEffect(()=>(o({type:xa.RegisterDroppable,element:{id:r,key:i,disabled:n,node:k,rect:p,data:R}}),()=>o({type:xa.UnregisterDroppable,key:i,id:r})),[r]),T.useEffect(()=>{n!==d.current.disabled&&(o({type:xa.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,o]),{active:s,rect:p,isOver:(l==null?void 0:l.id)===r,node:k,over:l,setNodeRef:I}}function CA(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Zve(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function hv(e){return e!==null&&e>=0}function Yve(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Xve(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const dz=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=CA(t,r,n),s=t[a],o=i[a];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},pv={scaleX:1,scaleY:1},Jve=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:s}=e;const o=(t=i[n])!=null?t:r;if(!o)return null;if(a===n){const u=i[s];return u?{x:0,y:n<s?u.top+u.height-(o.top+o.height):u.top-o.top,...pv}:null}const l=Qve(i,a,n);return a>n&&a<=s?{x:0,y:-o.height-l,...pv}:a<n&&a>=s?{x:0,y:o.height+l,...pv}:{x:0,y:0,...pv}};function Qve(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const fz="Sortable",hz=gt.createContext({activeIndex:-1,containerId:fz,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:dz,disabled:{draggable:!1,droppable:!1}});function ewe(e){let{children:t,id:n,items:r,strategy:a=dz,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:l,over:u,measureDroppableContainers:d}=Vve(),h=ty(fz,n),p=o.rect!==null,y=T.useMemo(()=>r.map(I=>typeof I=="object"&&"id"in I?I.id:I),[r]),v=s!=null,b=s?y.indexOf(s.id):-1,w=u?y.indexOf(u.id):-1,x=T.useRef(y),S=!Yve(y,x.current),E=w!==-1&&b===-1||S,C=Xve(i);nl(()=>{S&&v&&d(y)},[S,y,v,d]),T.useEffect(()=>{x.current=y},[y]);const k=T.useMemo(()=>({activeIndex:b,containerId:h,disabled:C,disableTransforms:E,items:y,overIndex:w,useDragOverlay:p,sortedRects:Zve(y,l),strategy:a}),[b,h,C.draggable,C.droppable,E,y,w,l,p,a]);return gt.createElement(hz.Provider,{value:k},t)}const twe=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return CA(n,r,a).indexOf(t)},nwe=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:l,transition:u}=e;return!u||!r||o!==i&&a===s?!1:n?!0:s!==a&&t===l},rwe={duration:200,easing:"ease"},pz="transform",awe=a0.Transition.toString({property:pz,duration:0,easing:"linear"}),iwe={roleDescription:"sortable"};function swe(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,s]=T.useState(null),o=T.useRef(n);return nl(()=>{if(!t&&n!==o.current&&r.current){const l=a.current;if(l){const u=Ap(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&s(d)}}n!==o.current&&(o.current=n)},[t,n,r,a]),T.useEffect(()=>{i&&s(null)},[i]),i}function owe(e){let{animateLayoutChanges:t=nwe,attributes:n,disabled:r,data:a,getNewIndex:i=twe,id:s,strategy:o,resizeObserverConfig:l,transition:u=rwe}=e;const{items:d,containerId:h,activeIndex:p,disabled:y,disableTransforms:v,sortedRects:b,overIndex:w,useDragOverlay:x,strategy:S}=T.useContext(hz),E=lwe(r,y),C=d.indexOf(s),k=T.useMemo(()=>({sortable:{containerId:h,index:C,items:d},...a}),[h,a,C,d]),I=T.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:R,node:j,isOver:L,setNodeRef:B}=Kve({id:s,data:k,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...l}}),{active:Z,activatorEvent:P,activeNodeRect:K,attributes:q,setNodeRef:de,listeners:ae,isDragging:te,over:X,setActivatorNodeRef:re,transform:D}=qve({id:s,data:k,attributes:{...iwe,...n},disabled:E.draggable}),J=Cbe(B,de),Q=!!Z,ie=Q&&!v&&hv(p)&&hv(w),me=!x&&te,ve=me&&ie?D:null,Ae=ie?ve??(o??S)({rects:b,activeNodeRect:K,activeIndex:p,overIndex:w,index:C}):null,Re=hv(p)&&hv(w)?i({id:s,items:d,activeIndex:p,overIndex:w}):C,ke=Z==null?void 0:Z.id,Fe=T.useRef({activeId:ke,items:d,newIndex:Re,containerId:h}),et=d!==Fe.current.items,Le=t({active:Z,containerId:h,isDragging:te,isSorting:Q,id:s,index:C,items:d,newIndex:Fe.current.newIndex,previousItems:Fe.current.items,previousContainerId:Fe.current.containerId,transition:u,wasDragging:Fe.current.activeId!=null}),Ie=swe({disabled:!Le,index:C,node:j,rect:R});return T.useEffect(()=>{Q&&Fe.current.newIndex!==Re&&(Fe.current.newIndex=Re),h!==Fe.current.containerId&&(Fe.current.containerId=h),d!==Fe.current.items&&(Fe.current.items=d)},[Q,Re,h,d]),T.useEffect(()=>{if(ke===Fe.current.activeId)return;if(ke!=null&&Fe.current.activeId==null){Fe.current.activeId=ke;return}const Se=setTimeout(()=>{Fe.current.activeId=ke},50);return()=>clearTimeout(Se)},[ke]),{active:Z,activeIndex:p,attributes:q,data:k,rect:R,index:C,newIndex:Re,items:d,isOver:L,isSorting:Q,isDragging:te,listeners:ae,node:j,overIndex:w,over:X,setNodeRef:J,setActivatorNodeRef:re,setDroppableNodeRef:B,setDraggableNodeRef:de,transform:Ie??Ae,transition:z()};function z(){if(Ie||et&&Fe.current.newIndex===C)return awe;if(!(me&&!wA(P)||!u)&&(Q||Le))return a0.Transition.toString({...u,property:pz})}}function lwe(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Vw(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const cwe=[er.Down,er.Right,er.Up,er.Left],uwe=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:s,scrollableAncestors:o}}=t;if(cwe.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=a.get(h.id);if(p)switch(e.code){case er.Down:r.top<p.top&&l.push(h);break;case er.Up:r.top>p.top&&l.push(h);break;case er.Left:r.left>p.left&&l.push(h);break;case er.Right:r.left<p.left&&l.push(h);break}});const u=Ube({collisionRect:r,droppableRects:a,droppableContainers:l});let d=JB(u,"id");if(d===(s==null?void 0:s.id)&&u.length>1&&(d=u[1].id),d!=null){const h=i.get(n.id),p=i.get(d),y=p?a.get(p.id):null,v=p==null?void 0:p.node.current;if(v&&y&&h&&p){const w=E1(v).some((I,R)=>o[R]!==I),x=mz(h,p),S=dwe(h,p),E=w||!x?{x:0,y:0}:{x:S?r.width-y.width:0,y:S?r.height-y.height:0},C={x:y.left,y:y.top};return E.x&&E.y?C:r0(C,E)}}}};function mz(e,t){return!Vw(e)||!Vw(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function dwe(e,t){return!Vw(e)||!Vw(t)||!mz(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const fwe=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:l}=owe({id:e,disabled:n}),u={transform:a0.Transform.toString(s),transition:o,zIndex:l?10:void 0,opacity:n?.5:1};return m.jsxs("div",{ref:i,style:u,...r,...a,className:At("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",l&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[m.jsx(xq,{className:At("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),m.jsx(Gt,{className:At("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},hwe=()=>{const{setGlobalModelSortOrder:e,dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAllAvailableModelDefsForProvider:a}=$n(dn(p=>({setGlobalModelSortOrder:p.setGlobalModelSortOrder,dbProviderConfigs:p.dbProviderConfigs,globalModelSortOrder:p.globalModelSortOrder,isLoading:p.isLoading,getAllAvailableModelDefsForProvider:p.getAllAvailableModelDefsForProvider}))),[i,s]=T.useState(""),o=T.useMemo(()=>{const p=new Map,y=new Set;t.forEach(x=>{if(!x.isEnabled||!x.enabledModels)return;const S=a(x.id),E=new Map(S.map(C=>[C.id,C]));x.enabledModels.forEach(C=>{const k=Qc(x.id,C),I=E.get(C);I&&(y.add(k),p.set(k,{id:k,name:I.name||C,providerId:x.id,providerName:x.name,metadata:I}))})});const v=[],b=new Set;n.forEach(x=>{if(y.has(x)){const S=p.get(x);S&&!b.has(x)&&(v.push(S),b.add(x))}});const w=Array.from(y).filter(x=>!b.has(x)).map(x=>p.get(x)).filter(x=>!!x).sort((x,S)=>x.name.localeCompare(S.name));return[...v,...w]},[t,n,a]),l=T.useMemo(()=>{if(!i.trim())return o;const p=i.toLowerCase();return o.filter(y=>y.name.toLowerCase().includes(p)||y.providerName.toLowerCase().includes(p)||y.id.toLowerCase().includes(p))},[o,i]),u=T.useMemo(()=>l.map(p=>p.id),[l]),d=T.useCallback(p=>{const{active:y,over:v}=p;if(v&&y.id!==v.id){const b=o.map(C=>C.id),w=y.id,x=v.id,S=b.indexOf(w),E=b.indexOf(x);if(S!==-1&&E!==-1){const C=CA(b,S,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[o,e]),h=$be(o6(EA),o6(_A,{coordinateGetter:uwe}));return r?m.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[m.jsx(dr,{className:"h-8 w-1/3"}),m.jsx(dr,{className:"h-6 w-1/2"}),m.jsx(dr,{className:"h-64 w-full"})]}):m.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[m.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),m.jsx(Ts,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsx(Gt,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),m.jsxs("div",{className:"relative",children:[m.jsx(Wl,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),m.jsx(jn,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:p=>s(p.target.value),className:"pl-8 w-full",disabled:r})]}),m.jsx(rc,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:l.length>0?m.jsx(zve,{sensors:h,collisionDetection:zbe,onDragEnd:d,children:m.jsx(ewe,{items:u,strategy:Jve,children:l.map(p=>m.jsx(fwe,{id:p.id,name:`${p.name} (${p.providerName})`},p.id))})}):m.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},pwe=ck("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function gz({className:e,variant:t,asChild:n=!1,...r}){const a=n?j6:"span";return m.jsx(a,{"data-slot":"badge",className:At(pwe({variant:t}),e),...r})}const mwe=({modelId:e})=>{var s,o,l,u,d,h,p,y,v,b,w,x,S;const{getProviderById:t,getAllAvailableModelDefsForProvider:n}=$n(E=>({getProviderById:C=>E.dbProviderConfigs.find(k=>k.id===C),getAllAvailableModelDefsForProvider:E.getAllAvailableModelDefsForProvider})),r=T.useMemo(()=>{if(!e)return null;const{providerId:E,modelId:C}=sc(e);if(!E||!C)return null;const k=t(E);if(!k)return null;const R=n(E).find(j=>j.id===C);return R?{...R,providerName:k.name}:null},[e,t,n]);if(!r)return m.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select a model from a provider's list to view its details."});const a=E=>{if(!E)return"N/A";const C=parseFloat(E);return isNaN(C)||C===0?"Free":`$${C.toFixed(4)} / 1M tokens`},i=E=>E?`${E.toLocaleString()} tokens`:"Unknown";return m.jsx(rc,{className:"h-full p-1",children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h3",{className:"text-xl font-semibold",children:[r.name," ",m.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r.providerName,")"]})]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:r.id}),r.description&&m.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:m.jsx("p",{children:r.description})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[m.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[m.jsx("h4",{className:"font-medium mb-1",children:"Context & Limits"}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Context Length:"})," ",i(((s=r.top_provider)==null?void 0:s.context_length)??r.context_length)]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Max Completion Tokens:"})," ",(o=r.top_provider)!=null&&o.max_completion_tokens?r.top_provider.max_completion_tokens.toLocaleString():"Default"]}),r.per_request_limits&&m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Request Limits:"})," ",m.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(r.per_request_limits,null,2)})]})]}),m.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[m.jsx("h4",{className:"font-medium mb-1",children:"Pricing (per 1M tokens)"}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Prompt:"})," ",a((l=r.pricing)==null?void 0:l.prompt)]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Completion:"})," ",a((u=r.pricing)==null?void 0:u.completion)]}),((d=r.pricing)==null?void 0:d.request)&&parseFloat(r.pricing.request)>0&&m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Request:"})," $",parseFloat(r.pricing.request).toFixed(6)]}),((h=r.pricing)==null?void 0:h.image)&&parseFloat(r.pricing.image)>0&&m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Image:"})," $",parseFloat(r.pricing.image).toFixed(6)]})]}),m.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[m.jsx("h4",{className:"font-medium mb-1",children:"Architecture"}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Modality:"})," ",((p=r.architecture)==null?void 0:p.modality)??"Unknown"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Input Modalities:"})," ",((v=(y=r.architecture)==null?void 0:y.input_modalities)==null?void 0:v.join(", "))??"Unknown"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Output Modalities:"})," ",((w=(b=r.architecture)==null?void 0:b.output_modalities)==null?void 0:w.join(", "))??"Unknown"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Tokenizer:"})," ",((x=r.architecture)==null?void 0:x.tokenizer)??"Unknown"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Instruct Type:"})," ",((S=r.architecture)==null?void 0:S.instruct_type)??"N/A"]})]}),m.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[m.jsx("h4",{className:"font-medium mb-1",children:"Supported Parameters"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:r.supported_parameters&&r.supported_parameters.length>0?r.supported_parameters.map(E=>m.jsx(gz,{variant:"secondary",children:E},E)):m.jsx("span",{className:"text-muted-foreground italic",children:"None specified"})})]})]})]})})},gwe=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=$n(dn(p=>({apiKeys:p.dbApiKeys,addApiKey:p.addApiKey,deleteApiKey:p.deleteApiKey,isLoading:p.isLoading}))),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[l,u]=T.useState({}),d=T.useCallback(async(p,y,v)=>{o(!0);try{await t(p,y,v),i(!1)}catch(b){console.error("Failed to add API key (from component):",b)}finally{o(!1)}},[t]),h=T.useCallback(async(p,y)=>{if(window.confirm(`Are you sure you want to delete the API key "${y}"? This will unlink it from any providers using it.`)){u(v=>({...v,[p]:!0}));try{await n(p)}catch(v){console.error("Failed to delete API key (from component):",v)}finally{u(v=>({...v,[p]:!1}))}}},[n]);return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!a&&m.jsxs(Dt,{onClick:()=>i(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[m.jsx(qd,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),a&&m.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[m.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),m.jsx(XL,{onSave:d,onCancel:()=>i(!1),isSaving:s})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!a?m.jsxs("div",{className:"space-y-2",children:[m.jsx(dr,{className:"h-10 w-full"}),m.jsx(dr,{className:"h-10 w-full"})]}):(e||[]).length===0&&!a?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):m.jsx("div",{className:"border rounded-md overflow-hidden",children:m.jsxs(Sp,{children:[m.jsx(Ep,{children:m.jsxs(Xr,{children:[m.jsx(Tr,{children:"Name"}),m.jsx(Tr,{children:"Provider Type"}),m.jsx(Tr,{children:"Created"}),m.jsx(Tr,{className:"text-right",children:"Actions"})]})}),m.jsx(Cp,{children:(e||[]).map(p=>{const y=l[p.id];return m.jsxs(Xr,{className:y?"opacity-50":"",children:[m.jsx(On,{className:"font-medium",children:p.name||"Unnamed Key"}),m.jsx(On,{children:p.providerId||"Unknown"}),m.jsx(On,{className:"text-xs text-muted-foreground",children:jC(new Date(p.createdAt),"PPp")}),m.jsx(On,{className:"text-right",children:m.jsx(Vn,{tooltipText:"Delete Key",onClick:()=>h(p.id,p.name||"Unnamed Key"),disabled:y,"aria-label":`Delete key ${p.name||"Unnamed Key"}`,icon:y?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(ns,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},p.id)})})]})})]})]})},ywe=gt.memo(gwe),bwe=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:a,providerFetchStatus:i,dbProviderConfigs:s,apiKeys:o,isLoading:l}=$n(dn(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[u,d]=T.useState(!1),h=()=>d(!0),p=T.useCallback(()=>d(!1),[]),y=T.useCallback(async b=>{await a(b)},[a]),v=T.useMemo(()=>s||[],[s]);return m.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),m.jsx("div",{className:"flex-shrink-0",children:u?m.jsx(a$,{apiKeys:o||[],onAddProvider:t,onCancel:p}):m.jsxs(Dt,{onClick:h,variant:"outline",className:"w-full",disabled:l,children:[m.jsx(qd,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),m.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:m.jsxs("div",{className:"space-y-2",children:[l&&!u?m.jsx(m.Fragment,{children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[m.jsx(dr,{className:"h-24 w-full"}),m.jsx(dr,{className:"h-24 w-full"}),m.jsx(dr,{className:"h-24 w-full"})]})}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:v.map(b=>m.jsx(abe,{provider:b,apiKeys:o||[],onUpdate:n,onDelete:r,onFetchModels:y,fetchStatus:i[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&v.length===0&&!u&&m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},vwe=()=>{const{selectedModelForDetails:e,setSelectedModelForDetails:t}=$n(dn(s=>({selectedModelForDetails:s._selectedModelForDetails,setSelectedModelForDetails:s.setSelectedModelForDetails}))),[n,r]=T.useState("providers-config"),a=T.useCallback(s=>{t(s),s&&r("providers-details")},[t]),i=T.useMemo(()=>[{value:"providers-config",label:"Configuration",content:m.jsx(bwe,{onSelectModelForDetails:a})},{value:"providers-order",label:"Model Order",content:m.jsx(hwe,{})},{value:"api-keys",label:"API Keys",content:m.jsx(ywe,{})},{value:"providers-details",label:"Model Details",content:m.jsx(mwe,{modelId:e})}],[e,a]);return m.jsx(zu,{tabs:i,initialValue:n,onValueChange:r,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},wwe=gt.memo(vwe),Km=({title:e,description:t,children:n,className:r,titleClassName:a,descriptionClassName:i,contentClassName:s})=>m.jsxs("div",{className:At("space-y-3",r),children:[m.jsxs("div",{children:[m.jsx("h3",{className:At("text-lg font-medium",a),children:e}),t&&m.jsx("p",{className:At("text-sm text-muted-foreground",i),children:t})]}),m.jsx("div",{className:At(s),children:n})]}),xwe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=lr(dn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return m.jsx("div",{className:"space-y-6 p-1",children:m.jsx(Km,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"git-user-name",children:"Git User Name"}),m.jsx(jn,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"git-user-email",children:"Git User Email"}),m.jsx(jn,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})})})},_we=gt.memo(xwe),Swe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:s}=mn(dn(j=>({syncRepos:j.syncRepos,addSyncRepo:j.addSyncRepo,updateSyncRepo:j.updateSyncRepo,deleteSyncRepo:j.deleteSyncRepo,initializeOrSyncRepo:j.initializeOrSyncRepo,repoInitializationStatus:j.repoInitializationStatus,isLoading:j.isLoading}))),[o,l]=T.useState(!1),[u,d]=T.useState(null),[h,p]=T.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[y,v]=T.useState(!1),[b,w]=T.useState({}),x=T.useCallback(()=>{p({name:"",remoteUrl:"",branch:"main",username:"",password:""}),l(!1),d(null),v(!1)},[]),S=T.useCallback((j,L)=>{p(B=>({...B,[j]:L}))},[]),E=T.useCallback(async()=>{var j,L,B,Z;if(!((j=h.name)!=null&&j.trim())||!((L=h.remoteUrl)!=null&&L.trim())){Ye.error("Repository Name and Remote URL are required.");return}v(!0);try{const P={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((B=h.branch)==null?void 0:B.trim())||"main",username:((Z=h.username)==null?void 0:Z.trim())||null,password:h.password||null};u?await n(u,P):await t(P),x()}catch(P){console.error("Failed to save sync repo:",P)}finally{v(!1)}},[h,u,t,n,x]),C=j=>{d(j.id),p({name:j.name,remoteUrl:j.remoteUrl,branch:j.branch||"main",username:j.username??"",password:j.password??""}),l(!1)},k=T.useCallback(async(j,L)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${L}"? This will unlink it from any conversations and remove the local copy.`)){w(B=>({...B,[j]:!0}));try{await r(j),u===j&&x()}catch(B){console.error("Failed to delete sync repo:",B)}finally{w(B=>({...B,[j]:!1}))}}},[r,u,x]),I=T.useCallback(async j=>{await a(j)},[a]),R=()=>{var j,L;return m.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[m.jsx("h4",{className:"font-semibold text-card-foreground",children:u?"Edit Sync Repository":"Add New Sync Repository"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"repo-name",children:"Name"}),m.jsx(jn,{id:"repo-name",value:h.name||"",onChange:B=>S("name",B.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:y})]}),m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),m.jsx(jn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:B=>S("remoteUrl",B.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:y})]}),m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"repo-branch",children:"Branch"}),m.jsx(jn,{id:"repo-branch",value:h.branch||"",onChange:B=>S("branch",B.target.value),placeholder:"main",className:"mt-1",disabled:y})]})]}),m.jsxs("div",{className:"pt-2",children:[m.jsx(Gt,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),m.jsxs(TB,{variant:"destructive",className:"mt-2 mb-3",children:[m.jsx(Yw,{className:"h-4 w-4"}),m.jsx(AB,{children:"Security Warning"}),m.jsx(NB,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"repo-username",children:"Username"}),m.jsx(jn,{id:"repo-username",value:h.username||"",onChange:B=>S("username",B.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:y,autoComplete:"off"})]}),m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"repo-password",children:"Password / Token"}),m.jsx(jn,{id:"repo-password",type:"password",value:h.password||"",onChange:B=>S("password",B.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:y,autoComplete:"new-password"})]})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(Dt,{variant:"ghost",size:"sm",onClick:x,disabled:y,type:"button",children:[m.jsx(Rs,{className:"h-4 w-4 mr-1"})," Cancel"]}),m.jsxs(Dt,{variant:"secondary",size:"sm",onClick:E,disabled:y||!((j=h.name)!=null&&j.trim())||!((L=h.remoteUrl)!=null&&L.trim()),type:"button",children:[y&&m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(Vd,{className:"h-4 w-4 mr-1"})," ",y?"Saving...":"Save Repository"]})]})]})};return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!o&&!u&&m.jsxs(Dt,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",disabled:s,children:[m.jsx(qd,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(o||u)&&R(),m.jsxs("div",{children:[m.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),s&&!o&&!u?m.jsxs("div",{className:"space-y-2",children:[m.jsx(dr,{className:"h-10 w-full"}),m.jsx(dr,{className:"h-10 w-full"}),m.jsx(dr,{className:"h-10 w-full"})]}):e.length===0&&!o&&!u?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):m.jsx("div",{className:"border rounded-md overflow-hidden",children:m.jsxs(Sp,{children:[m.jsx(Ep,{children:m.jsxs(Xr,{children:[m.jsx(Tr,{children:"Name"}),m.jsx(Tr,{children:"Remote URL"}),m.jsx(Tr,{children:"Branch"}),m.jsx(Tr,{children:"Auth"}),m.jsx(Tr,{className:"text-right",children:"Actions"})]})}),m.jsx(Cp,{children:e.map(j=>{const L=b[j.id],B=u===j.id,Z=!!j.username||!!j.password,P=i[j.id]||"idle",q=L||y||!!u||P==="syncing";let de=null,ae="Initialize/Sync Repository";return P==="syncing"?(de=m.jsx(Pn,{className:"h-4 w-4 animate-spin mr-1"}),ae="Initializing/Syncing..."):P==="idle"?(de=m.jsx(fk,{className:"h-4 w-4 text-green-500 mr-1"}),ae="Sync Successful / Ready"):P==="error"?(de=m.jsx(Nd,{className:"h-4 w-4 text-destructive mr-1"}),ae="Sync Failed"):de=m.jsx(Zw,{className:"h-4 w-4 mr-1"}),m.jsxs(Xr,{className:At(B?"bg-muted/50":"",q&&!B?"opacity-70":""),children:[m.jsx(On,{className:"font-medium",children:j.name}),m.jsx(On,{className:"text-xs truncate max-w-xs",children:j.remoteUrl}),m.jsx(On,{children:j.branch||"main"}),m.jsx(On,{className:"text-xs",children:Z?"Configured":"None"}),m.jsxs(On,{className:"text-right space-x-1",children:[m.jsx(Vn,{tooltipText:ae,onClick:()=>I(j.id),"aria-label":`Initialize or Sync repo ${j.name}`,disabled:q,icon:de,variant:"outline",className:"h-8 w-8"}),m.jsx(Vn,{tooltipText:"Edit",onClick:()=>C(j),"aria-label":`Edit repo ${j.name}`,disabled:q,icon:m.jsx(c0,{}),className:"h-8 w-8"}),m.jsx(Vn,{tooltipText:"Delete",onClick:()=>k(j.id,j.name),"aria-label":`Delete repo ${j.name}`,disabled:q,icon:L?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(ns,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},j.id)})})]})})]})]})},Ewe=gt.memo(Swe),Cwe=()=>{const e=T.useMemo(()=>[{value:"config",label:"User Config",content:m.jsx(_we,{})},{value:"sync",label:"Sync Repositories",content:m.jsx(Ewe,{})}],[]);return m.jsx(zu,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},kwe=gt.memo(Cwe),Twe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[s,o]=T.useState((e==null?void 0:e.content)||""),[l,u]=T.useState((e==null?void 0:e.type)||"before");T.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.content)||""),u((e==null?void 0:e.type)||"before")},[e]);const d=T.useCallback(async()=>{if(!a.trim()||!s.trim()){Ye.error("Rule Name and Content are required.");return}await n({name:a.trim(),content:s.trim(),type:l})},[a,s,l,n]);return m.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[m.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Rule":"Add New Rule"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[m.jsx(Gt,{htmlFor:"rule-name",children:"Rule Name"}),m.jsx(jn,{id:"rule-name",value:a,onChange:h=>i(h.target.value),placeholder:"e.g., Always respond in JSON",required:!0,disabled:t})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"rule-type",children:"Rule Type"}),m.jsxs(Jo,{value:l,onValueChange:h=>u(h),disabled:t,children:[m.jsx(el,{id:"rule-type",children:m.jsx(Qo,{placeholder:"Select Type"})}),m.jsxs(tl,{children:[m.jsx(Gr,{value:"system",children:"System Prompt"}),m.jsx(Gr,{value:"before",children:"Before User Prompt"}),m.jsx(Gr,{value:"after",children:"After User Prompt"})]})]})]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"rule-content",children:"Rule Content"}),m.jsx(Pu,{id:"rule-content",value:s,onChange:h=>o(h.target.value),placeholder:"Enter the rule text to be injected...",required:!0,rows:4,disabled:t,className:"font-mono text-xs"})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(Dt,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[m.jsx(Rs,{className:"h-4 w-4 mr-1"})," Cancel"]}),m.jsxs(Dt,{variant:"secondary",size:"sm",onClick:d,disabled:t||!a.trim()||!s.trim(),type:"button",children:[t&&m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(Vd,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Rule"]})]})]})},Awe=({rules:e,isLoading:t,isDeleting:n,onEdit:r,onDelete:a})=>{const i=s=>{window.confirm(`Are you sure you want to delete the rule "${s.name}"? This will also remove it from any tags.`)&&a(s.id,s.name)};return m.jsx("div",{className:"border rounded-md overflow-hidden",children:m.jsxs(Sp,{children:[m.jsx(Ep,{children:m.jsxs(Xr,{children:[m.jsx(Tr,{children:"Name"}),m.jsx(Tr,{children:"Type"}),m.jsx(Tr,{children:"Content Preview"}),m.jsx(Tr,{className:"text-right",children:"Actions"})]})}),m.jsx(Cp,{children:t?m.jsxs(m.Fragment,{children:[m.jsx(Xr,{children:m.jsx(On,{colSpan:4,children:m.jsx(dr,{className:"h-10 w-full"})})}),m.jsx(Xr,{children:m.jsx(On,{colSpan:4,children:m.jsx(dr,{className:"h-10 w-full"})})})]}):e.length===0?m.jsx(Xr,{children:m.jsx(On,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No rules defined yet."})}):e.map(s=>{const o=n[s.id];return m.jsxs(Xr,{children:[m.jsx(On,{className:"font-medium",children:s.name}),m.jsx(On,{className:"capitalize",children:s.type}),m.jsx(On,{className:"text-xs text-muted-foreground truncate max-w-xs",children:s.content}),m.jsxs(On,{className:"text-right space-x-1",children:[m.jsx(Vn,{tooltipText:"Edit Rule",onClick:()=>r(s),disabled:o,icon:m.jsx(c0,{}),className:"h-8 w-8","aria-label":`Edit rule ${s.name}`}),m.jsx(Vn,{tooltipText:"Delete Rule",onClick:()=>i(s),disabled:o,icon:o?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(ns,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete rule ${s.name}`})]})]},s.id)})})]})})},Nwe=()=>{const{rules:e,addRule:t,updateRule:n,deleteRule:r,isLoading:a}=ac(dn(S=>({rules:S.rules,addRule:S.addRule,updateRule:S.updateRule,deleteRule:S.deleteRule,isLoading:S.isLoading}))),[i,s]=T.useState(!1),[o,l]=T.useState(null),[u,d]=T.useState(!1),[h,p]=T.useState({}),y=()=>{l(null),s(!0)},v=S=>{l(S),s(!0)},b=T.useCallback(()=>{s(!1),l(null),d(!1)},[]),w=T.useCallback(async S=>{d(!0);try{o?await n(o.id,S):await t(S),b()}catch{}finally{d(!1)}},[t,n,o,b]),x=T.useCallback(async S=>{p(E=>({...E,[S]:!0}));try{await r(S),(o==null?void 0:o.id)===S&&b()}catch{}finally{p(E=>({...E,[S]:!1}))}},[r,o,b]);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Rules"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Create reusable text snippets (rules) that can be automatically injected into prompts based on assigned tags. Rules can modify the system prompt, or be added before/after the user's input."})]}),!i&&m.jsxs(Dt,{onClick:y,variant:"outline",className:"w-full",disabled:a,children:[m.jsx(qd,{className:"h-4 w-4 mr-1"})," Add New Rule"]}),i&&m.jsx(Twe,{initialData:o??void 0,isSaving:u,onSave:w,onCancel:b}),m.jsxs("div",{className:"pt-4",children:[m.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Rules"}),m.jsx(Awe,{rules:e,isLoading:a,isDeleting:h,onEdit:v,onDelete:x})]})]})},Rwe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[s,o]=T.useState((e==null?void 0:e.description)||"");T.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.description)||"")},[e]);const l=T.useCallback(async()=>{if(!a.trim()){Ye.error("Tag Name is required.");return}await n({name:a.trim(),description:(s==null?void 0:s.trim())||null})},[a,s,n]);return m.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[m.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Tag":"Add New Tag"}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"tag-name",children:"Tag Name"}),m.jsx(jn,{id:"tag-name",value:a,onChange:u=>i(u.target.value),placeholder:"e.g., Code Generation, Summarization",required:!0,disabled:t})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"tag-description",children:"Description (Optional)"}),m.jsx(Pu,{id:"tag-description",value:s||"",onChange:u=>o(u.target.value),placeholder:"Describe when to use this tag...",rows:2,disabled:t})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[m.jsxs(Dt,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[m.jsx(Rs,{className:"h-4 w-4 mr-1"})," Cancel"]}),m.jsxs(Dt,{variant:"secondary",size:"sm",onClick:l,disabled:t||!a.trim(),type:"button",children:[t&&m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}),m.jsx(Vd,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Tag"]})]})]})},Iwe=({tags:e,rulesByTagId:t,isLoading:n,isDeleting:r,onEdit:a,onDelete:i})=>{const s=o=>{window.confirm(`Are you sure you want to delete the tag "${o.name}"? This will remove it from all rules.`)&&i(o.id,o.name)};return m.jsx("div",{className:"border rounded-md overflow-hidden",children:m.jsxs(Sp,{children:[m.jsx(Ep,{children:m.jsxs(Xr,{children:[m.jsx(Tr,{children:"Name"}),m.jsx(Tr,{children:"Description"}),m.jsx(Tr,{children:"Linked Rules"}),m.jsx(Tr,{className:"text-right",children:"Actions"})]})}),m.jsx(Cp,{children:n?m.jsxs(m.Fragment,{children:[m.jsx(Xr,{children:m.jsx(On,{colSpan:4,children:m.jsx(dr,{className:"h-10 w-full"})})}),m.jsx(Xr,{children:m.jsx(On,{colSpan:4,children:m.jsx(dr,{className:"h-10 w-full"})})})]}):e.length===0?m.jsx(Xr,{children:m.jsx(On,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No tags defined yet."})}):e.map(o=>{const l=r[o.id],u=t.get(o.id)||[];return m.jsxs(Xr,{children:[m.jsx(On,{className:"font-medium",children:o.name}),m.jsx(On,{className:"text-xs text-muted-foreground truncate max-w-xs",children:o.description||"-"}),m.jsx(On,{className:"text-xs",children:u.length>0?u.map(d=>d.name).join(", "):"None"}),m.jsxs(On,{className:"text-right space-x-1",children:[m.jsx(Vn,{tooltipText:"Edit Tag & Rules",onClick:()=>a(o),disabled:l,icon:m.jsx(c0,{}),className:"h-8 w-8","aria-label":`Edit tag ${o.name}`}),m.jsx(Vn,{tooltipText:"Delete Tag",onClick:()=>s(o),disabled:l,icon:l?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(ns,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete tag ${o.name}`})]})]},o.id)})})]})})},jwe=({tag:e,allRules:t,linkedRuleIds:n,onLinkChange:r,disabled:a=!1})=>{const[i,s]=T.useState(!1),[o,l]=T.useState(""),u=T.useMemo(()=>[...t].sort((v,b)=>v.name.localeCompare(b.name)),[t]),d=T.useMemo(()=>{const v=o.toLowerCase();return v?u.filter(b=>b.name.toLowerCase().includes(v)||b.content.toLowerCase().includes(v)||b.type.toLowerCase().includes(v)):u},[u,o]),h=T.useCallback(v=>{const b=n.has(v);r(e.id,v,!b),l("")},[n,r,e.id]),p=T.useCallback((v,b)=>{b.stopPropagation(),r(e.id,v,!1)},[r,e.id]),y=T.useMemo(()=>u.filter(v=>n.has(v.id)),[u,n]);return m.jsxs("div",{className:"space-y-3",children:[m.jsxs(Gt,{className:"font-medium",children:['Associated Rules for "',e.name,'"']}),m.jsxs(Lu,{open:i,onOpenChange:s,children:[m.jsx($u,{asChild:!0,children:m.jsxs(Dt,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-full justify-between h-9",disabled:a||t.length===0,children:[m.jsx("span",{className:"truncate",children:y.length>0?`${y.length} rule(s) selected`:"Select rules..."}),m.jsx(Kw,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),m.jsx(Bu,{className:"w-[--radix-popover-trigger-width] p-0",children:m.jsxs(sB,{shouldFilter:!1,children:[m.jsx(oB,{placeholder:"Search rules...",value:o,onValueChange:l}),m.jsxs(lB,{children:[m.jsx(cB,{children:t.length===0?"No rules defined.":"No rules found."}),m.jsx(uB,{children:d.map(v=>{const b=n.has(v.id);return m.jsxs(dB,{value:v.id,onSelect:()=>h(v.id),className:"cursor-pointer",children:[m.jsx(lo,{className:At("mr-2 h-4 w-4",b?"opacity-100":"opacity-0")}),m.jsx("span",{className:"truncate",children:v.name}),m.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",v.type,")"]})]},v.id)})})]})]})})]}),y.length>0&&m.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:y.map(v=>m.jsxs(gz,{variant:"secondary",className:"flex items-center gap-1",children:[m.jsx("span",{className:"truncate",children:v.name}),m.jsx(Dt,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive hover:bg-transparent",onClick:b=>p(v.id,b),disabled:a,"aria-label":`Unlink rule ${v.name}`,children:m.jsx(Rs,{className:"h-3 w-3"})})]},v.id))})]})},Owe=()=>{const{tags:e,rules:t,tagRuleLinks:n,addTag:r,updateTag:a,deleteTag:i,linkTagToRule:s,unlinkTagFromRule:o,getRulesForTag:l,isLoading:u}=ac(dn(B=>({tags:B.tags,rules:B.rules,tagRuleLinks:B.tagRuleLinks,addTag:B.addTag,updateTag:B.updateTag,deleteTag:B.deleteTag,linkTagToRule:B.linkTagToRule,unlinkTagFromRule:B.unlinkTagFromRule,getRulesForTag:B.getRulesForTag,isLoading:B.isLoading}))),[d,h]=T.useState(!1),[p,y]=T.useState(null),[v,b]=T.useState(!1),[w,x]=T.useState({}),S=()=>{y(null),h(!0)},E=B=>{y(B),h(!0)},C=T.useCallback(()=>{h(!1),y(null),b(!1)},[]),k=T.useCallback(async B=>{b(!0);try{p?await a(p.id,B):await r(B),p||C()}catch{}finally{b(!1)}},[r,a,p,C]),I=T.useCallback(async B=>{x(Z=>({...Z,[B]:!0}));try{await i(B),(p==null?void 0:p.id)===B&&C()}catch{}finally{x(Z=>({...Z,[B]:!1}))}},[i,p,C]),R=T.useCallback(async(B,Z,P)=>{try{P?await s(B,Z):await o(B,Z)}catch{}},[s,o]),j=T.useMemo(()=>{const B=new Map;return e.forEach(Z=>{B.set(Z.id,l(Z.id))}),B},[e,l]),L=T.useMemo(()=>p?new Set(n.filter(B=>B.tagId===p.id).map(B=>B.ruleId)):new Set,[p,n]);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Tags"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Create tags to group related rules. You can activate tags before sending a prompt to apply their associated rules."})]}),!d&&m.jsxs(Dt,{onClick:S,variant:"outline",className:"w-full",disabled:u,children:[m.jsx(qd,{className:"h-4 w-4 mr-1"})," Add New Tag"]}),d&&m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsx(Rwe,{initialData:p??void 0,isSaving:v,onSave:k,onCancel:C}),p&&m.jsx(jwe,{tag:p,allRules:t,linkedRuleIds:L,onLinkChange:R,disabled:v})]}),m.jsx(Ts,{}),m.jsxs("div",{className:"pt-4",children:[m.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Tags"}),m.jsx(Iwe,{tags:e,rulesByTagId:j,isLoading:u,isDeleting:w,onEdit:E,onDelete:I})]})]})},Dwe=()=>{const e=T.useMemo(()=>[{value:"rules",label:"Rules",content:m.jsx(Nwe,{})},{value:"tags",label:"Tags",content:m.jsx(Owe,{})}],[]);return m.jsx(zu,{tabs:e,defaultValue:"rules",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},Mwe=({label:e,colorKey:t,value:n,onChange:r})=>{const[a,i]=T.useState(n??"");T.useEffect(()=>{i(n??"")},[n]);const s=()=>{r(t,a.trim()||null)},o=l=>{i(l.target.value)};return m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Gt,{htmlFor:`color-${t}`,className:"text-xs w-28 shrink-0",children:e}),m.jsx(jn,{id:`color-${t}`,type:"text",value:a,onChange:o,onBlur:s,className:"h-8 text-xs flex-grow",placeholder:"e.g., #ffffff or oklch(0.5 0.2 180)"}),m.jsx(jn,{type:"color",value:a.startsWith("#")?a:"#000000",onChange:l=>{i(l.target.value),r(t,l.target.value)},className:"h-8 w-10 p-1 border-none cursor-pointer","aria-label":`Pick ${e} color`})]})},Pwe=()=>{const{theme:e,setTheme:t,prismThemeUrl:n,setPrismThemeUrl:r,customFontFamily:a,setCustomFontFamily:i,customFontSize:s,setCustomFontSize:o,chatMaxWidth:l,setChatMaxWidth:u,customThemeColors:d,setCustomThemeColor:h,resetThemeSettings:p}=lr(dn(E=>({theme:E.theme,setTheme:E.setTheme,prismThemeUrl:E.prismThemeUrl,setPrismThemeUrl:E.setPrismThemeUrl,customFontFamily:E.customFontFamily,setCustomFontFamily:E.setCustomFontFamily,customFontSize:E.customFontSize,setCustomFontSize:E.setCustomFontSize,chatMaxWidth:E.chatMaxWidth,setChatMaxWidth:E.setChatMaxWidth,customThemeColors:E.customThemeColors,setCustomThemeColor:E.setCustomThemeColor,resetThemeSettings:E.resetThemeSettings}))),[y,v]=T.useState(s??16);T.useEffect(()=>{v(s??16)},[s]);const b=T.useCallback(E=>{o(E[0])},[o]),w=()=>{window.confirm("Are you sure you want to reset all Theme settings to their defaults?")&&p()},x=[{value:"max-w-3xl",label:"Very Small (3xl)"},{value:"max-w-4xl",label:"Small (4xl)"},{value:"max-w-5xl",label:"Medium (5xl)"},{value:"max-w-6xl",label:"Large (6xl)"},{value:"max-w-7xl",label:"Very Large (7xl)"},{value:"max-w-full",label:"Full Width"}],S=[{key:"background",label:"Background"},{key:"foreground",label:"Foreground"},{key:"card",label:"Card BG"},{key:"cardForeground",label:"Card FG"},{key:"popover",label:"Popover BG"},{key:"popoverForeground",label:"Popover FG"},{key:"primary",label:"Primary"},{key:"primaryForeground",label:"Primary FG"},{key:"secondary",label:"Secondary"},{key:"secondaryForeground",label:"Secondary FG"},{key:"muted",label:"Muted BG"},{key:"mutedForeground",label:"Muted FG"},{key:"accent",label:"Accent"},{key:"accentForeground",label:"Accent FG"},{key:"destructive",label:"Destructive"},{key:"destructiveForeground",label:"Destructive FG"},{key:"border",label:"Border"},{key:"input",label:"Input BG"},{key:"ring",label:"Ring (Focus)"}];return m.jsxs("div",{className:"space-y-6 p-1",children:[m.jsx(Km,{title:"Base Theme",description:"Select the overall look and feel.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx(Gt,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),m.jsxs(Jo,{value:e??"system",onValueChange:E=>t(E),children:[m.jsx(el,{id:"theme-select",className:"w-[180px]",children:m.jsx(Qo,{placeholder:"Select theme"})}),m.jsxs(tl,{children:[m.jsx(Gr,{value:"light",children:"Default Light"}),m.jsx(Gr,{value:"dark",children:"Default Dark"}),m.jsx(Gr,{value:"system",children:"System"}),m.jsx(Gr,{value:"TijuLight",children:"Tiju Light"}),m.jsx(Gr,{value:"TijuDark",children:"Tiju Dark"}),m.jsx(Gr,{value:"custom",children:"User Custom"})]})]})]})}),m.jsxs(Km,{title:"Font & Layout",description:"Customize typography and content width.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-4",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"custom-font-family",children:"Custom Font Family"}),m.jsx(jn,{id:"custom-font-family",value:a??"",onChange:E=>i(E.target.value),placeholder:"e.g., 'Inter', sans-serif (Leave blank for default)",className:"mt-1"}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applies only when 'User Custom' theme is selected. Ensure the font is available (system or web font)."})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"custom-font-size",children:["Base Font Size (",y,"px)"]}),m.jsx(Vo,{id:"custom-font-size",min:12,max:20,step:1,value:[y],onValueChange:E=>v(E[0]),onValueCommit:b}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies only when 'User Custom' theme is selected. Affects base text size (Default: 16px)."})]}),m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"chat-max-width",children:"Chat Content Max Width"}),m.jsxs(Jo,{value:l??"max-w-7xl",onValueChange:E=>u(E||null),children:[m.jsx(el,{id:"chat-max-width",className:"w-full mt-1",children:m.jsx(Qo,{placeholder:"Select max width"})}),m.jsx(tl,{children:x.map(E=>m.jsx(Gr,{value:E.value,children:E.label},E.value))})]}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Controls the maximum width of the main chat message area."})]})]}),m.jsxs(Km,{title:"Code Block Theme",description:"Customize syntax highlighting appearance.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:[m.jsx(Gt,{htmlFor:"prism-theme-url",children:"Theme URL (Optional)"}),m.jsx(jn,{id:"prism-theme-url",type:"url",placeholder:"e.g., https://.../prism-okaidia.min.css",value:n??"",onChange:E=>r(E.target.value),className:"mt-1"}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Enter the URL of a PrismJS CSS theme file (e.g., from cdnjs). Leave blank to use default themes matching light/dark mode."})]}),m.jsx(Km,{title:"Custom Theme Colors",description:"Define custom colors. Applies only when 'User Custom' theme is selected. Use valid CSS color values (hex, rgb, oklch, etc.). Leave blank to use default light/dark theme colors.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:S.map(({key:E,label:C})=>m.jsx(Mwe,{label:C,colorKey:E,value:d==null?void 0:d[E],onChange:h},E))})}),m.jsx(Ts,{}),m.jsx("div",{className:"flex justify-end pt-4",children:m.jsxs(Dt,{variant:"outline",size:"sm",onClick:w,children:[m.jsx(gk,{className:"mr-2 h-4 w-4"}),"Reset Theme Settings"]})})]})},Fwe=gt.memo(Pwe),yz=T.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=lr(dn(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=t0(dn(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=is(dn(h=>({initialSettingsTab:h.initialSettingsTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[s,o]=T.useState(a||"theme");T.useEffect(()=>{e&&o(a||"theme")},[e,a]);const l=h=>{h||(t(),i())},u=h=>{o(h)},d=T.useMemo(()=>{const h=[{value:"general",label:"General",content:m.jsx(tye,{})},{value:"theme",label:"Theme",content:m.jsx(Fwe,{})},{value:"providers",label:"Providers & Models",content:m.jsx(wwe,{})},...n?[{value:"assistant",label:"Assistant",content:m.jsx(zye,{})}]:[],{value:"rules-tags",label:"Rules & Tags",content:m.jsx(Dwe,{})},{value:"git",label:"Git",content:m.jsx(kwe,{})},{value:"data",label:"Data",content:m.jsx(Zye,{})},{value:"mods",label:"Mods",content:m.jsx(Jye,{})}],p=r.map(y=>({value:y.id,label:y.title,content:gt.isValidElement(y.component)?y.component:typeof y.component=="function"?m.jsx(y.component,{}):null}));return[...h,...p]},[n,r]);return m.jsx(u1,{open:e,onOpenChange:l,children:m.jsxs(d1,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[m.jsxs(f1,{className:"p-6 pb-4 flex-shrink-0",children:[m.jsx(p1,{children:"Settings"}),m.jsx(m1,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),m.jsx(zu,{tabs:d,initialValue:s,onValueChange:u,className:"flex-grow overflow-hidden px-6",listClassName:"-mx-6 px-6",contentContainerClassName:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",scrollable:!0}),m.jsx(h1,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:m.jsx(Dt,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});yz.displayName="SettingsModalComponent";const Lwe=yz;function $we(){const e=Rr.getState().registerChatControl,t=is.getState().toggleChatControlPanel,n=is.getState().setInitialSettingsTabs,r=()=>{const i=(s,o)=>{n(null,null),t("settingsModal",!0)};return m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:m.jsx(Rv,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"top",children:"Settings"})]})})},a=()=>{const i=is.getState().isChatControlPanelOpen.settingsModal??!1,s=()=>t("settingsModal",!1);return m.jsx(Lwe,{isOpen:i,onClose:s})};e({id:"core-settings-trigger",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(r),iconRenderer:()=>gt.createElement(r),settingsRenderer:()=>gt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function Bwe(){const e=Rr.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=is.getState();return m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?m.jsx(Fq,{className:"h-4 w-4"}):m.jsx(Mq,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(t),iconRenderer:()=>gt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}const zwe=()=>{const{setTemperature:e,setTopP:t,setMaxTokens:n,setTopK:r,setPresencePenalty:a,setFrequencyPenalty:i}=Si(dn(d=>({setTemperature:d.setTemperature,setTopP:d.setTopP,setMaxTokens:d.setMaxTokens,setTopK:d.setTopK,setPresencePenalty:d.setPresencePenalty,setFrequencyPenalty:d.setFrequencyPenalty}))),s=lr.getState(),[o,l]=T.useState(()=>Si.getState());T.useEffect(()=>{const d=h=>{l(p=>({...p,...h.params}))};return Ct.on(St.PROMPT_PARAMS_CHANGED,d),()=>{Ct.off(St.PROMPT_PARAMS_CHANGED,d)}},[]);const u={temperature:o.temperature??null,setTemperature:e,topP:o.topP??null,setTopP:t,maxTokens:o.maxTokens??null,setMaxTokens:n,topK:o.topK??null,setTopK:r,presencePenalty:o.presencePenalty??null,setPresencePenalty:a,frequencyPenalty:o.frequencyPenalty??null,setFrequencyPenalty:i,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},defaultTemperature:s.temperature,defaultTopP:s.topP,defaultMaxTokens:s.maxTokens,defaultTopK:s.topK,defaultPresencePenalty:s.presencePenalty,defaultFrequencyPenalty:s.frequencyPenalty};return m.jsx(X9,{...u})},Uwe=()=>{const[e,t]=T.useState(()=>qn.getState().status==="streaming"),[n,r]=T.useState(!0);return T.useEffect(()=>{const a=o=>{t(o.status==="streaming")},i=o=>{var y;if(!o.modelId){r(!1);return}const{getSelectedModel:l}=$n.getState(),u=l(),d=((y=u==null?void 0:u.metadata)==null?void 0:y.supported_parameters)??[],h=["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"],p=lr.getState().enableAdvancedSettings;r(p&&d.some(v=>h.includes(v)))},s=o=>{o.key==="enableAdvancedSettings"&&i({modelId:$n.getState().selectedModelId})};return i({modelId:$n.getState().selectedModelId}),Ct.on(St.INTERACTION_STATUS_CHANGED,a),Ct.on(St.MODEL_SELECTION_CHANGED,i),Ct.on(St.SETTINGS_CHANGED,s),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,a),Ct.off(St.MODEL_SELECTION_CHANGED,i),Ct.off(St.SETTINGS_CHANGED,s)}},[]),n?m.jsxs(Lu,{children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx($u,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:e,"aria-label":"Adjust Advanced Parameters",children:m.jsx(Xq,{className:"h-4 w-4"})})})}),m.jsx(Qn,{side:"top",children:"Advanced Parameters"})]})}),m.jsx(Bu,{className:"w-auto p-0",align:"start",children:m.jsx(zwe,{})})]}):null};function Hwe(){const e=Rr.getState().registerPromptControl;e({id:"core-parameters",status:()=>"ready",triggerRenderer:()=>gt.createElement(Uwe),getParameters:()=>{const{temperature:t,topP:n,maxTokens:r,topK:a,presencePenalty:i,frequencyPenalty:s}=Si.getState(),o=(u,d,h)=>{h!==null&&(u[d]=h)},l={};return o(l,"temperature",t),o(l,"top_p",n),o(l,"max_tokens",r),o(l,"top_k",a),o(l,"presence_penalty",i),o(l,"frequency_penalty",s),Object.keys(l).length>0?l:void 0}}),console.log("[Function] Registered Core Parameter Control")}const bz=20,qwe=bz*1024*1024,Vwe=()=>{const e=T.useRef(null),t=Zl.getState().addAttachedFile,[n,r]=T.useState(()=>qn.getState().status==="streaming"),[a,i]=T.useState(!0);T.useEffect(()=>{const u=h=>{r(h.status==="streaming")},d=h=>{var b,w;if(!h.modelId){i(!1);return}const{getSelectedModel:p}=$n.getState(),y=p(),v=(w=(b=y==null?void 0:y.metadata)==null?void 0:b.architecture)==null?void 0:w.input_modalities;i(!v||v.some(x=>x!=="text"))};return d({modelId:$n.getState().selectedModelId}),Ct.on(St.INTERACTION_STATUS_CHANGED,u),Ct.on(St.MODEL_SELECTION_CHANGED,d),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,u),Ct.off(St.MODEL_SELECTION_CHANGED,d)}},[]);const s=T.useCallback(async u=>{const d=u.target.files;if(!d)return;const h=a;for(const p of Array.from(d)){if(p.size>qwe){Ye.error(`File "${p.name}" exceeds the ${bz}MB limit.`);continue}const y=vk(p.name,p.type),v=p.type.startsWith("image/");if(!y&&!h){Ye.warning(`File "${p.name}" (${p.type}) cannot be uploaded. The current model only supports text input.`);continue}try{let b={};if(y)b.contentText=await p.text();else if(v){const w=new FileReader,x=new Promise((E,C)=>{w.onload=()=>E(w.result),w.onerror=k=>C(k)});w.readAsDataURL(p);const S=await x;S&&S.includes(",")?b.contentBase64=S.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${p.name}`)}else h&&console.log(`File type ${p.type} (Name: ${p.name}) not directly processed for content storage, but model supports non-text.`);t({source:"direct",name:p.name,type:p.type||"application/octet-stream",size:p.size,...b})}catch(b){console.error(`Error processing file ${p.name}:`,b),Ye.error(`Failed to process file "${p.name}": ${b instanceof Error?b.message:String(b)}`)}}u.target&&(u.target.value="")},[t,a]),o=()=>{var u;(u=e.current)==null||u.click()},l=a?"Attach Files (Text, Images, etc.)":"Attach Text Files";return m.jsxs(m.Fragment,{children:[m.jsx("input",{type:"file",ref:e,onChange:s,multiple:!0,className:"hidden",disabled:n}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{type:"button",variant:"ghost",size:"icon",onClick:o,disabled:n,className:"h-8 w-8","aria-label":l,children:m.jsx(mk,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"top",children:l})]})})]})},Gwe=()=>{const e=Zl.getState().removeAttachedFile,[t,n]=T.useState(()=>Zl.getState().attachedFilesMetadata),[r,a]=T.useState(()=>qn.getState().status==="streaming");return T.useEffect(()=>{const i=o=>{n(o.files)},s=o=>{a(o.status==="streaming")};return Ct.on(St.ATTACHED_FILES_CHANGED,i),Ct.on(St.INTERACTION_STATUS_CHANGED,s),()=>{Ct.off(St.ATTACHED_FILES_CHANGED,i),Ct.off(St.INTERACTION_STATUS_CHANGED,s)}},[]),t.length===0?null:m.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:t.map(i=>m.jsx(xF,{fileMeta:i,onRemove:e,isReadOnly:r},i.id))})};function Wwe(){const e=Rr.getState().registerPromptControl;e({id:"core-file-attachment",triggerRenderer:()=>gt.createElement(Vwe),renderer:()=>gt.createElement(Gwe)}),console.log("[Function] Registered Core File Attachment Control")}const Kwe=()=>{const{toggleVfsModal:e,isVfsModalOpen:t}=is(dn(l=>({toggleVfsModal:l.toggleVfsModal,isVfsModalOpen:l.isVfsModalOpen}))),{enableVfs:n,selectedFileIds:r,nodes:a,clearSelection:i}=so(dn(l=>({enableVfs:l.enableVfs,selectedFileIds:l.selectedFileIds,nodes:l.nodes,clearSelection:l.clearSelection}))),s=Zl.getState().addAttachedFile,o=()=>{if(r.size===0){Ye.info("No files selected in VFS to attach.");return}let l=0;r.forEach(u=>{const d=a[u];d&&d.type==="file"&&(s({source:"vfs",name:d.name,type:d.mimeType||"application/octet-stream",size:d.size,path:d.path}),l++)}),l>0&&(Ye.success(`Attached ${l} file(s) from VFS to the next prompt.`),i(),e(!1))};return n?m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",className:At("h-8 w-8",t&&"bg-muted text-primary"),onClick:()=>e(),"aria-label":"Toggle Virtual File System",children:m.jsx(J6,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"top",children:"Virtual Filesystem"})]})}),r.size>0&&m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsxs(Dt,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:o,"aria-label":`Attach ${r.size} selected VFS file(s)`,children:[m.jsx(mk,{className:"h-4 w-4 mr-1"}),"Attach (",r.size,")"]})}),m.jsx(Qn,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},Zwe=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const s=o=>{o.key==="Enter"?n():o.key==="Escape"&&r()};return m.jsxs(Xr,{className:"bg-muted/30",children:[m.jsx(On,{className:"px-2 py-1"}),m.jsx(On,{className:"px-2 py-1",children:m.jsx(l0,{className:"h-5 w-5 text-yellow-400"})}),m.jsx(On,{className:"py-1 px-2",colSpan:3,children:m.jsx(jn,{ref:a,value:e,onChange:o=>t(o.target.value),onBlur:n,onKeyDown:s,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),m.jsx(On,{className:"text-right pr-4 py-1",children:m.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(lo,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"top",children:"Create (Enter)"})]})}),m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:m.jsx(Rs,{className:"h-4 w-4"})})}),m.jsx(Qn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var ok=["Enter"," "],Ywe=["ArrowDown","PageUp","Home"],vz=["ArrowUp","PageDown","End"],Xwe=[...Ywe,...vz],Jwe={ltr:[...ok,"ArrowRight"],rtl:[...ok,"ArrowLeft"]},Qwe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ny="Menu",[s0,exe,txe]=Yx(ny),[lf,wz]=Ei(ny,[txe,Cu,x1]),T1=Cu(),xz=x1(),[nxe,cf]=lf(ny),[rxe,ry]=lf(ny),_z=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:s=!0}=e,o=T1(t),[l,u]=T.useState(null),d=T.useRef(!1),h=Fa(i),p=vp(a);return T.useEffect(()=>{const y=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),m.jsx(hx,{...o,children:m.jsx(nxe,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:u,children:m.jsx(rxe,{scope:t,onClose:T.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:p,modal:s,children:r})})})};_z.displayName=ny;var axe="MenuAnchor",kA=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=T1(n);return m.jsx(p0,{...a,...r,ref:t})});kA.displayName=axe;var TA="MenuPortal",[ixe,Sz]=lf(TA,{forceMount:void 0}),Ez=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=cf(TA,t);return m.jsx(ixe,{scope:t,forceMount:n,children:m.jsx(ka,{present:n||i.open,children:m.jsx(ap,{asChild:!0,container:a,children:r})})})};Ez.displayName=TA;var As="MenuContent",[sxe,AA]=lf(As),Cz=T.forwardRef((e,t)=>{const n=Sz(As,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=cf(As,e.__scopeMenu),s=ry(As,e.__scopeMenu);return m.jsx(s0.Provider,{scope:e.__scopeMenu,children:m.jsx(ka,{present:r||i.open,children:m.jsx(s0.Slot,{scope:e.__scopeMenu,children:s.modal?m.jsx(oxe,{...a,ref:t}):m.jsx(lxe,{...a,ref:t})})})})}),oxe=T.forwardRef((e,t)=>{const n=cf(As,e.__scopeMenu),r=T.useRef(null),a=Cn(t,r);return T.useEffect(()=>{const i=r.current;if(i)return Qx(i)},[]),m.jsx(NA,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Wt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),lxe=T.forwardRef((e,t)=>{const n=cf(As,e.__scopeMenu);return m.jsx(NA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),cxe=su("MenuContent.ScrollLock"),NA=T.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:y,disableOutsideScroll:v,...b}=e,w=cf(As,n),x=ry(As,n),S=T1(n),E=xz(n),C=exe(n),[k,I]=T.useState(null),R=T.useRef(null),j=Cn(t,R,w.onContentChange),L=T.useRef(0),B=T.useRef(""),Z=T.useRef(0),P=T.useRef(null),K=T.useRef("right"),q=T.useRef(0),de=v?Z0:T.Fragment,ae=v?{as:cxe,allowPinchZoom:!0}:void 0,te=re=>{var Ae,Re;const D=B.current+re,J=C().filter(ke=>!ke.disabled),Q=document.activeElement,ie=(Ae=J.find(ke=>ke.ref.current===Q))==null?void 0:Ae.textValue,me=J.map(ke=>ke.textValue),ve=xxe(me,D,ie),Me=(Re=J.find(ke=>ke.textValue===ve))==null?void 0:Re.ref.current;(function ke(Fe){B.current=Fe,window.clearTimeout(L.current),Fe!==""&&(L.current=window.setTimeout(()=>ke(""),1e3))})(D),Me&&setTimeout(()=>Me.focus())};T.useEffect(()=>()=>window.clearTimeout(L.current),[]),Xx();const X=T.useCallback(re=>{var J,Q;return K.current===((J=P.current)==null?void 0:J.side)&&Sxe(re,(Q=P.current)==null?void 0:Q.area)},[]);return m.jsx(sxe,{scope:n,searchRef:B,onItemEnter:T.useCallback(re=>{X(re)&&re.preventDefault()},[X]),onItemLeave:T.useCallback(re=>{var D;X(re)||((D=R.current)==null||D.focus(),I(null))},[X]),onTriggerLeave:T.useCallback(re=>{X(re)&&re.preventDefault()},[X]),pointerGraceTimerRef:Z,onPointerGraceIntentChange:T.useCallback(re=>{P.current=re},[]),children:m.jsx(de,{...ae,children:m.jsx(K0,{asChild:!0,trapped:a,onMountAutoFocus:Wt(i,re=>{var D;re.preventDefault(),(D=R.current)==null||D.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:m.jsx(tp,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:y,children:m.jsx(MB,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:I,onEntryFocus:Wt(l,re=>{x.isUsingKeyboardRef.current||re.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(px,{role:"menu","aria-orientation":"vertical","data-state":zz(w.open),"data-radix-menu-content":"",dir:x.dir,...S,...b,ref:j,style:{outline:"none",...b.style},onKeyDown:Wt(b.onKeyDown,re=>{const J=re.target.closest("[data-radix-menu-content]")===re.currentTarget,Q=re.ctrlKey||re.altKey||re.metaKey,ie=re.key.length===1;J&&(re.key==="Tab"&&re.preventDefault(),!Q&&ie&&te(re.key));const me=R.current;if(re.target!==me||!Xwe.includes(re.key))return;re.preventDefault();const Me=C().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);vz.includes(re.key)&&Me.reverse(),vxe(Me)}),onBlur:Wt(e.onBlur,re=>{re.currentTarget.contains(re.target)||(window.clearTimeout(L.current),B.current="")}),onPointerMove:Wt(e.onPointerMove,o0(re=>{const D=re.target,J=q.current!==re.clientX;if(re.currentTarget.contains(D)&&J){const Q=re.clientX>q.current?"right":"left";K.current=Q,q.current=re.clientX}}))})})})})})})});Cz.displayName=As;var uxe="MenuGroup",RA=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return m.jsx(an.div,{role:"group",...r,ref:t})});RA.displayName=uxe;var dxe="MenuLabel",kz=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return m.jsx(an.div,{...r,ref:t})});kz.displayName=dxe;var Gw="MenuItem",w6="menu.itemSelect",A1=T.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=T.useRef(null),s=ry(Gw,e.__scopeMenu),o=AA(Gw,e.__scopeMenu),l=Cn(t,i),u=T.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(w6,{bubbles:!0,cancelable:!0});h.addEventListener(w6,y=>r==null?void 0:r(y),{once:!0}),j8(h,p),p.defaultPrevented?u.current=!1:s.onClose()}};return m.jsx(Tz,{...a,ref:l,disabled:n,onClick:Wt(e.onClick,d),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),u.current=!0},onPointerUp:Wt(e.onPointerUp,h=>{var p;u.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:Wt(e.onKeyDown,h=>{const p=o.searchRef.current!=="";n||p&&h.key===" "||ok.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});A1.displayName=Gw;var Tz=T.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,s=AA(Gw,n),o=xz(n),l=T.useRef(null),u=Cn(t,l),[d,h]=T.useState(!1),[p,y]=T.useState("");return T.useEffect(()=>{const v=l.current;v&&y((v.textContent??"").trim())},[i.children]),m.jsx(s0.ItemSlot,{scope:n,disabled:r,textValue:a??p,children:m.jsx(PB,{asChild:!0,...o,focusable:!r,children:m.jsx(an.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:Wt(e.onPointerMove,o0(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Wt(e.onPointerLeave,o0(v=>s.onItemLeave(v))),onFocus:Wt(e.onFocus,()=>h(!0)),onBlur:Wt(e.onBlur,()=>h(!1))})})})}),fxe="MenuCheckboxItem",Az=T.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return m.jsx(Oz,{scope:e.__scopeMenu,checked:n,children:m.jsx(A1,{role:"menuitemcheckbox","aria-checked":Ww(n)?"mixed":n,...a,ref:t,"data-state":jA(n),onSelect:Wt(a.onSelect,()=>r==null?void 0:r(Ww(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Az.displayName=fxe;var Nz="MenuRadioGroup",[hxe,pxe]=lf(Nz,{value:void 0,onValueChange:()=>{}}),Rz=T.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Fa(r);return m.jsx(hxe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:m.jsx(RA,{...a,ref:t})})});Rz.displayName=Nz;var Iz="MenuRadioItem",jz=T.forwardRef((e,t)=>{const{value:n,...r}=e,a=pxe(Iz,e.__scopeMenu),i=n===a.value;return m.jsx(Oz,{scope:e.__scopeMenu,checked:i,children:m.jsx(A1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":jA(i),onSelect:Wt(r.onSelect,()=>{var s;return(s=a.onValueChange)==null?void 0:s.call(a,n)},{checkForDefaultPrevented:!1})})})});jz.displayName=Iz;var IA="MenuItemIndicator",[Oz,mxe]=lf(IA,{checked:!1}),Dz=T.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=mxe(IA,n);return m.jsx(ka,{present:r||Ww(i.checked)||i.checked===!0,children:m.jsx(an.span,{...a,ref:t,"data-state":jA(i.checked)})})});Dz.displayName=IA;var gxe="MenuSeparator",Mz=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return m.jsx(an.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Mz.displayName=gxe;var yxe="MenuArrow",Pz=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=T1(n);return m.jsx(mx,{...a,...r,ref:t})});Pz.displayName=yxe;var bxe="MenuSub",[iSe,Fz]=lf(bxe),Zm="MenuSubTrigger",Lz=T.forwardRef((e,t)=>{const n=cf(Zm,e.__scopeMenu),r=ry(Zm,e.__scopeMenu),a=Fz(Zm,e.__scopeMenu),i=AA(Zm,e.__scopeMenu),s=T.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,u={__scopeMenu:e.__scopeMenu},d=T.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return T.useEffect(()=>d,[d]),T.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),l(null)}},[o,l]),m.jsx(kA,{asChild:!0,...u,children:m.jsx(Tz,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":zz(n.open),...e,ref:iu(t,a.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Wt(e.onPointerMove,o0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Wt(e.onPointerLeave,o0(h=>{var y,v;d();const p=(y=n.content)==null?void 0:y.getBoundingClientRect();if(p){const b=(v=n.content)==null?void 0:v.dataset.side,w=b==="right",x=w?-5:5,S=p[w?"left":"right"],E=p[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:S,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x:S,y:p.bottom}],side:b}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Wt(e.onKeyDown,h=>{var y;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||Jwe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),h.preventDefault())})})})});Lz.displayName=Zm;var $z="MenuSubContent",Bz=T.forwardRef((e,t)=>{const n=Sz(As,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=cf(As,e.__scopeMenu),s=ry(As,e.__scopeMenu),o=Fz($z,e.__scopeMenu),l=T.useRef(null),u=Cn(t,l);return m.jsx(s0.Provider,{scope:e.__scopeMenu,children:m.jsx(ka,{present:r||i.open,children:m.jsx(s0.Slot,{scope:e.__scopeMenu,children:m.jsx(NA,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;s.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Wt(e.onFocusOutside,d=>{d.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Wt(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:Wt(e.onKeyDown,d=>{var y;const h=d.currentTarget.contains(d.target),p=Qwe[s.dir].includes(d.key);h&&p&&(i.onOpenChange(!1),(y=o.trigger)==null||y.focus(),d.preventDefault())})})})})})});Bz.displayName=$z;function zz(e){return e?"open":"closed"}function Ww(e){return e==="indeterminate"}function jA(e){return Ww(e)?"indeterminate":e?"checked":"unchecked"}function vxe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function wxe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function xxe(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=wxe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function _xe(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(a=!a)}return a}function Sxe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return _xe(n,t)}function o0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Exe=_z,Cxe=kA,kxe=Ez,Txe=Cz,Axe=RA,Nxe=kz,Rxe=A1,Ixe=Az,jxe=Rz,Oxe=jz,Dxe=Dz,Mxe=Mz,Pxe=Pz,Fxe=Lz,Lxe=Bz,OA="ContextMenu",[$xe,sSe]=Ei(OA,[wz]),Ti=wz(),[Bxe,Uz]=$xe(OA),Hz=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[s,o]=T.useState(!1),l=Ti(t),u=Fa(r),d=T.useCallback(h=>{o(h),u(h)},[u]);return m.jsx(Bxe,{scope:t,open:s,onOpenChange:d,modal:i,children:m.jsx(Exe,{...l,dir:a,open:s,onOpenChange:d,modal:i,children:n})})};Hz.displayName=OA;var qz="ContextMenuTrigger",Vz=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=Uz(qz,n),s=Ti(n),o=T.useRef({x:0,y:0}),l=T.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),u=T.useRef(0),d=T.useCallback(()=>window.clearTimeout(u.current),[]),h=p=>{o.current={x:p.clientX,y:p.clientY},i.onOpenChange(!0)};return T.useEffect(()=>d,[d]),T.useEffect(()=>void(r&&d()),[r,d]),m.jsxs(m.Fragment,{children:[m.jsx(Cxe,{...s,virtualRef:l}),m.jsx(an.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Wt(e.onContextMenu,p=>{d(),h(p),p.preventDefault()}),onPointerDown:r?e.onPointerDown:Wt(e.onPointerDown,mv(p=>{d(),u.current=window.setTimeout(()=>h(p),700)})),onPointerMove:r?e.onPointerMove:Wt(e.onPointerMove,mv(d)),onPointerCancel:r?e.onPointerCancel:Wt(e.onPointerCancel,mv(d)),onPointerUp:r?e.onPointerUp:Wt(e.onPointerUp,mv(d))})]})});Vz.displayName=qz;var zxe="ContextMenuPortal",Gz=e=>{const{__scopeContextMenu:t,...n}=e,r=Ti(t);return m.jsx(kxe,{...r,...n})};Gz.displayName=zxe;var Wz="ContextMenuContent",Kz=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Uz(Wz,n),i=Ti(n),s=T.useRef(!1);return m.jsx(Txe,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,o),!o.defaultPrevented&&s.current&&o.preventDefault(),s.current=!1},onInteractOutside:o=>{var l;(l=e.onInteractOutside)==null||l.call(e,o),!o.defaultPrevented&&!a.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Kz.displayName=Wz;var Uxe="ContextMenuGroup",Hxe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(Axe,{...a,...r,ref:t})});Hxe.displayName=Uxe;var qxe="ContextMenuLabel",Vxe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(Nxe,{...a,...r,ref:t})});Vxe.displayName=qxe;var Gxe="ContextMenuItem",Zz=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(Rxe,{...a,...r,ref:t})});Zz.displayName=Gxe;var Wxe="ContextMenuCheckboxItem",Kxe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(Ixe,{...a,...r,ref:t})});Kxe.displayName=Wxe;var Zxe="ContextMenuRadioGroup",Yxe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(jxe,{...a,...r,ref:t})});Yxe.displayName=Zxe;var Xxe="ContextMenuRadioItem",Jxe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(Oxe,{...a,...r,ref:t})});Jxe.displayName=Xxe;var Qxe="ContextMenuItemIndicator",e1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(Dxe,{...a,...r,ref:t})});e1e.displayName=Qxe;var t1e="ContextMenuSeparator",Yz=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(Mxe,{...a,...r,ref:t})});Yz.displayName=t1e;var n1e="ContextMenuArrow",r1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(Pxe,{...a,...r,ref:t})});r1e.displayName=n1e;var a1e="ContextMenuSubTrigger",i1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(Fxe,{...a,...r,ref:t})});i1e.displayName=a1e;var s1e="ContextMenuSubContent",o1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ti(n);return m.jsx(Lxe,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});o1e.displayName=s1e;function mv(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var l1e=Hz,c1e=Vz,u1e=Gz,d1e=Kz,f1e=Zz,h1e=Yz;function x6({...e}){return m.jsx(l1e,{"data-slot":"context-menu",...e})}function _6({...e}){return m.jsx(c1e,{"data-slot":"context-menu-trigger",...e})}function S6({className:e,...t}){return m.jsx(u1e,{children:m.jsx(d1e,{"data-slot":"context-menu-content",className:At("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function Ji({className:e,inset:t,variant:n="default",...r}){return m.jsx(f1e,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:At("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function E6({className:e,...t}){return m.jsx(h1e,{"data-slot":"context-menu-separator",className:At("bg-border -mx-1 my-1 h-px",e),...t})}const p1e=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:p,handleDelete:y,setNewName:v,renameInputRef:b,handleGitInit:w,handleGitPull:x,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const k=e.type==="folder",I=Z=>{Z.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||i||(k?o(e):l(!n,e.id))},R=Z=>{Z.key==="Enter"?h():Z.key==="Escape"&&d()},j=k?r?lq:l0:sq,L=k?r?"text-green-400":"text-yellow-400":"text-blue-400",B=m.jsxs(Xr,{className:At("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed",!k&&"cursor-pointer"),onClick:I,onDoubleClick:()=>!i&&!t&&o(e),children:[m.jsx(On,{className:"px-2 py-1",children:m.jsx(zw,{checked:n,onCheckedChange:Z=>l(!!Z,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||k})}),m.jsx(On,{className:"px-2 py-1",children:m.jsx(j,{className:At("h-5 w-5",L)})}),m.jsx(On,{className:"py-1 px-2",children:t?m.jsx(jn,{ref:b,value:a,onChange:Z=>v(Z.target.value),onBlur:h,onKeyDown:R,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:Z=>Z.stopPropagation(),disabled:i}):m.jsx("span",{className:At("truncate",k&&"cursor-pointer hover:underline"),title:e.name,onClick:Z=>{k&&(Z.stopPropagation(),o(e))},children:e.name})}),m.jsx(On,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?gw(e.size):""}),m.jsx(On,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),m.jsx(On,{className:"text-right pr-4 py-1",children:m.jsx("div",{className:At("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?m.jsxs(m.Fragment,{children:[m.jsx(Vn,{tooltipText:"Save (Enter)",onClick:Z=>{Z.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),icon:i?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(lo,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),m.jsx(Vn,{tooltipText:"Cancel (Esc)",onClick:Z=>{Z.stopPropagation(),d()},"aria-label":"Cancel edit",disabled:i,icon:m.jsx(Rs,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):m.jsxs(m.Fragment,{children:[m.jsx(Vn,{tooltipText:"Rename",onClick:Z=>{Z.stopPropagation(),u(e)},"aria-label":"Rename",disabled:i||s,icon:m.jsx(yv,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),m.jsx(Vn,{tooltipText:k?"Download folder (.zip)":"Download file",onClick:Z=>{Z.stopPropagation(),p(e)},"aria-label":k?"Download folder as ZIP":"Download file",disabled:i,icon:m.jsx(bh,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),m.jsx(Vn,{tooltipText:"Delete",onClick:Z=>{Z.stopPropagation(),y(e)},"aria-label":`Delete ${k?"folder":"file"}`,disabled:i,icon:m.jsx(ns,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return k?m.jsxs(x6,{children:[m.jsx(_6,{disabled:t||i,asChild:!0,children:B}),m.jsxs(S6,{children:[m.jsx(Ji,{onSelect:()=>o(e),disabled:t||i,children:"Open Folder"}),m.jsx(E6,{}),r?m.jsxs(m.Fragment,{children:[m.jsxs(Ji,{onSelect:()=>x(e.path),disabled:i,children:[m.jsx(bq,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),m.jsxs(Ji,{onSelect:()=>S(e.path),disabled:i,children:[m.jsx(gq,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),m.jsxs(Ji,{onSelect:()=>E(e.path),disabled:i,children:[m.jsx(X6,{className:"mr-2 h-4 w-4"}),"Git Push"]}),m.jsxs(Ji,{onSelect:()=>C(e.path),disabled:i,children:[m.jsx(Tq,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):m.jsxs(Ji,{onSelect:()=>w(e.path),disabled:i,children:[m.jsx(Rd,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),m.jsx(E6,{}),m.jsxs(Ji,{onSelect:()=>u(e),disabled:i,children:[m.jsx(yv,{className:"mr-2 h-4 w-4"}),"Rename"]}),m.jsxs(Ji,{onSelect:()=>p(e),disabled:i,children:[m.jsx(bh,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),m.jsxs(Ji,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>y(e),disabled:i,children:[m.jsx(ns,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):m.jsxs(x6,{children:[m.jsx(_6,{disabled:t||i,asChild:!0,children:B}),m.jsxs(S6,{children:[m.jsxs(Ji,{onSelect:()=>l(!n,e.id),disabled:i,children:[n?"Deselect":"Select"," File"]}),m.jsxs(Ji,{onSelect:()=>u(e),disabled:i,children:[m.jsx(yv,{className:"mr-2 h-4 w-4"}),"Rename"]}),m.jsxs(Ji,{onSelect:()=>p(e),disabled:i,children:[m.jsx(bh,{className:"mr-2 h-4 w-4"}),"Download File"]}),m.jsxs(Ji,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>y(e),disabled:i,children:[m.jsx(ns,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},m1e=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:p,handleCreateFolder:y,handleDownload:v,handleDelete:b,setNewName:w,setNewFolderName:x,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:I,handleGitCommit:R,handleGitPush:j,handleGitStatus:L})=>{const B=T.useMemo(()=>e,[e]);return s&&e.length===0&&!r?m.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):m.jsx("div",{className:"relative h-full",children:m.jsxs(Sp,{className:"w-full text-sm",children:[m.jsx(Ep,{className:"sticky top-0 bg-card z-10",children:m.jsxs(Xr,{className:"hover:bg-card",children:[m.jsx(Tr,{className:"w-[40px] px-2"}),m.jsx(Tr,{className:"w-[40px] px-2"}),m.jsx(Tr,{children:"Name"}),m.jsx(Tr,{className:"w-[100px] text-right",children:"Size"}),m.jsx(Tr,{className:"w-[150px] text-right",children:"Modified"}),m.jsx(Tr,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),m.jsxs(Cp,{children:[r&&m.jsx(Zwe,{newFolderName:a,setNewFolderName:x,handleCreateFolder:y,cancelCreatingFolder:p,newFolderInputRef:E,isOperationLoading:s}),B.map(Z=>{const P=t===Z.path,K=i.has(Z.id),q=C[Z.path]??!1;return m.jsx(p1e,{entry:Z,isEditingThis:P,isChecked:K,isGitRepo:q,newName:P?n:"",isOperationLoading:s,creatingFolder:r,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:v,handleDelete:b,setNewName:w,renameInputRef:S,handleGitInit:k,handleGitPull:I,handleGitCommit:R,handleGitPush:j,handleGitStatus:L},Z.id)}),e.length===0&&!r&&!s&&m.jsx(Xr,{children:m.jsx(On,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},g1e=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:s,handleNavigateUp:o,handleRefresh:l,startCreatingFolder:u,handleUploadClick:d,handleFolderUploadClick:h,handleArchiveUploadClick:p,handleDownloadAll:y,handleCloneClick:v,fileInputRef:b,folderInputRef:w,archiveInputRef:x,handleFileChange:S,handleArchiveChange:E})=>m.jsxs(m.Fragment,{children:[m.jsx("input",{type:"file",ref:b,onChange:S,className:"hidden",multiple:!0,disabled:t}),m.jsx("input",{type:"file",ref:w,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),m.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),m.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[m.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[m.jsx(Dt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:m.jsx(Eq,{className:"h-4 w-4"})}),m.jsx(Dt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:m.jsx(fq,{className:"h-4 w-4"})}),m.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),m.jsx("div",{className:"flex-grow"}),m.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[m.jsx(Dt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(Zw,{className:"h-4 w-4"})}),m.jsxs(Dt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(pk,{className:"h-4 w-4 mr-1"}),"Folder"]}),m.jsxs(Dt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(Z6,{className:"h-4 w-4 mr-1"}),"Files"]}),m.jsxs(Dt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(l0,{className:"h-4 w-4 mr-1"}),"Folder"]}),m.jsxs(Dt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),p()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(KH,{className:"h-4 w-4 mr-1"}),"ZIP"]}),m.jsxs(Dt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(Rd,{className:"h-4 w-4 mr-1"}),"Clone"]}),m.jsxs(Dt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),y()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(_H,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),Xz=({isOpen:e,onOpenChange:t,title:n,description:r,children:a,submitLabel:i="Submit",onSubmit:s,isSubmitting:o,submitDisabled:l=!1,className:u,contentClassName:d})=>{const h=async p=>{p==null||p.preventDefault(),!(o||l)&&await s()};return m.jsx(u1,{open:e,onOpenChange:t,children:m.jsxs(d1,{className:At(u),children:[m.jsxs(f1,{children:[m.jsx(p1,{children:n}),r&&m.jsx(m1,{children:r})]}),m.jsx("div",{className:At("py-4",d),children:a}),m.jsxs(h1,{children:[m.jsx(N0e,{asChild:!0,children:m.jsx(Dt,{variant:"outline",disabled:o,children:"Cancel"})}),m.jsxs(Dt,{onClick:h,disabled:o||l,children:[o&&m.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Submitting...":i]})]})]})})},y1e=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:s,onSubmitClone:o,currentPath:l})=>m.jsx(Xz,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:m.jsxs(m.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",m.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:o,isSubmitting:s,submitDisabled:!n.trim(),children:m.jsxs("div",{className:"grid gap-4",children:[m.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[m.jsx(Gt,{htmlFor:"clone-url",className:"text-right",children:"URL"}),m.jsx(jn,{id:"clone-url",value:n,onChange:u=>r(u.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:s})]}),m.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[m.jsx(Gt,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),m.jsx(jn,{id:"clone-branch",value:a,onChange:u=>i(u.target.value),className:"col-span-3",placeholder:"main (default)",disabled:s})]})]})}),b1e=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:s})=>m.jsx(Xz,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:m.jsxs(m.Fragment,{children:["Enter a commit message for the changes in ",m.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:s,isSubmitting:i,submitDisabled:!r.trim(),children:m.jsx("div",{className:"grid gap-4",children:m.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[m.jsx(Gt,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),m.jsx(jn,{id:"commit-msg",value:r,onChange:o=>a(o.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})})}),DA=T.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:s,createDirectory:o,uploadFiles:l,deleteNodes:u,renameNode:d,setCurrentPath:h,rootId:p,selectFile:y,deselectFile:v,selectedFileIds:b,vfsKey:w,configuredVfsKey:x,initializingKey:S,_setError:E,_setOperationLoading:C,findNodeByPath:k,initializeVFS:I}=so(dn(ut=>({nodes:ut.nodes,childrenMap:ut.childrenMap,currentParentId:ut.currentParentId,selectedFileIds:ut.selectedFileIds,loading:ut.loading,operationLoading:ut.operationLoading,error:ut.error,fetchNodes:ut.fetchNodes,createDirectory:ut.createDirectory,uploadFiles:ut.uploadFiles,deleteNodes:ut.deleteNodes,renameNode:ut.renameNode,selectFile:ut.selectFile,deselectFile:ut.deselectFile,setCurrentPath:ut.setCurrentPath,rootId:ut.rootId,vfsKey:ut.vfsKey,configuredVfsKey:ut.configuredVfsKey,initializingKey:ut.initializingKey,_setError:ut._setError,_setOperationLoading:ut._setOperationLoading,findNodeByPath:ut.findNodeByPath,initializeVFS:ut.initializeVFS}))),[R,j]=T.useState(""),[L,B]=T.useState(null),[Z,P]=T.useState(!1),[K,q]=T.useState(""),[de,ae]=T.useState({}),[te,X]=T.useState(!1),[re,D]=T.useState(""),[J,Q]=T.useState(""),[ie,me]=T.useState(!1),[ve,Me]=T.useState(!1),[Ae,Re]=T.useState(null),[ke,Fe]=T.useState(""),[et,Le]=T.useState(!1),[Ie,z]=T.useState({}),Se=T.useRef(null),Te=T.useRef(null),ue=T.useRef(null),oe=T.useRef(null),ee=T.useRef(null),xe=n?e[n]:null,Pe=xe?xe.path:"/",We=(t[n||p||""]||[]).map(ut=>e[ut]).filter(ut=>!!ut).sort((ut,Rt)=>ut.type==="folder"&&Rt.type==="file"?-1:ut.type==="file"&&Rt.type==="folder"?1:ut.name.localeCompare(Rt.name)),Nt=T.useMemo(()=>We.filter(ut=>ut.type==="folder").map(ut=>ut.path),[We]),it=r||S!==null||w!==x,_t=a||ie||et||Object.values(Ie).some(Boolean);T.useEffect(()=>{n!==null&&!t[n]&&!it&&x===w?s(n):n===null&&p&&!t[p]&&!it&&x===w&&s(p)},[n,t,p,it,s,x,w]),T.useEffect(()=>{var ut,Rt;L&&((ut=oe.current)==null||ut.focus(),(Rt=oe.current)==null||Rt.select())},[L]),T.useEffect(()=>{var ut;Z&&((ut=ee.current)==null||ut.focus())},[Z]),T.useEffect(()=>{(async()=>{if(it||Nt.length===0)return;const Rt={};let Lt=!1;for(const Qt of Nt)try{const An=await zse(Qt);de[Qt]!==An&&(Rt[Qt]=An,Lt=!0)}catch(An){console.error(`Error checking git status for ${Qt}:`,An),de[Qt]!==!1&&(Rt[Qt]=!1,Lt=!0)}Lt&&ae(Qt=>({...Qt,...Rt}))})()},[Nt,it,de]);const Ft=T.useCallback(async(ut,Rt)=>{if(!(_t||it)){Rt!==!1&&C(!0),E(null);try{await ut()}catch(Lt){console.error("[FileManager Operation Error]:",Lt)}finally{Rt!==!1&&C(!1)}}},[_t,it,E,C]),Pt=T.useCallback(ut=>{_t||it||L||ut.type==="folder"&&Ft(()=>h(ut.path),!1)},[_t,it,L,h,Ft]),Zt=T.useCallback(()=>{if(_t||it||Pe==="/")return;const ut=E0(Pe);Ft(()=>h(ut),!1)},[_t,it,Pe,h,Ft]),ye=T.useCallback(()=>{_t||it||Pe==="/"||Ft(()=>h("/"),!1)},[_t,it,Pe,h,Ft]),O=T.useCallback(()=>{it||Ft(()=>s(n),!1)},[Ft,s,n,it]),G=T.useCallback((ut,Rt)=>{const Lt=e[Rt];Lt&&Lt.type==="file"?ut?y(Rt):v(Rt):Lt&&Lt.type==="folder"&&Ye.info("Folders cannot be attached to the prompt.")},[y,v,e]),fe=T.useCallback(ut=>{_t||it||Z||(B(ut.path),j(ut.name),P(!1))},[_t,it,Z]),je=T.useCallback(()=>{B(null),j("")},[]),be=T.useCallback(async()=>{if(!L||!R.trim()){je();return}const ut=k(L);ut&&ut.name!==R.trim()&&await Ft(()=>d(ut.id,R.trim())),je()},[L,R,d,je,k,Ft]),Ce=T.useCallback(()=>{_t||it||L||(P(!0),q(""),B(null))},[_t,it,L]),le=T.useCallback(()=>{P(!1),q("")},[]),ft=T.useCallback(async()=>{if(!K.trim()){le();return}await Ft(()=>o(n,K.trim())),le()},[K,o,n,le,Ft]),vt=()=>{var ut;return(ut=Se.current)==null?void 0:ut.click()},F=()=>{var ut;return(ut=Te.current)==null?void 0:ut.click()},Be=()=>{var ut;return(ut=ue.current)==null?void 0:ut.click()},nt=T.useCallback(async ut=>{const Rt=ut.target.files;Rt&&Rt.length>0&&(await Ft(()=>l(n,Rt)),ut.target&&(ut.target.value=""))},[l,n,Ft]),ge=T.useCallback(async ut=>{var Lt;const Rt=(Lt=ut.target.files)==null?void 0:Lt[0];Rt&&(await Ft(async()=>{await qse(Rt,Pe),await s(n)}),ut.target&&(ut.target.value=""))},[Pe,s,n,Ft]),Oe=T.useCallback(async ut=>{window.confirm(`Delete ${ut.type} "${ut.name}"?${ut.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ft(()=>u([ut.id]))},[u,Ft]),Ke=T.useCallback(async ut=>{await Ft(async()=>{ut.type==="file"?await Hse(ut.path):await G4(`${ut.name}.zip`,ut.path)})},[Ft]),jt=T.useCallback(async()=>{We.length!==0&&await Ft(async()=>{const ut=ga(Pe)||"root";await G4(`${ut}_export.zip`,Pe)})},[Pe,We.length,Ft]),pe=T.useCallback(async(ut,Rt)=>{if(!(Ie[ut]||it||a)){z(Lt=>({...Lt,[ut]:!0})),E(null);try{await Rt()}catch(Lt){console.error(`[FileManager Git Op Error @ ${ut}]:`,Lt)}finally{z(Lt=>({...Lt,[ut]:!1}))}}},[E,Ie,it,a]),V=T.useCallback(ut=>{pe(ut,async()=>{await gF(ut),ae(Rt=>({...Rt,[ut]:!0}))})},[pe]),H=T.useCallback(ut=>{Ye.info("Pulling default branch (auth not implemented yet)..."),pe(ut,()=>zx(ut,"main"))},[pe]),W=T.useCallback(ut=>{Re(ut),Fe(""),Me(!0)},[]),he=T.useCallback(ut=>{Ye.info("Pushing default branch (auth not implemented yet)..."),pe(ut,()=>DT(ut,"main"))},[pe]),Ne=T.useCallback(ut=>{pe(ut,()=>yF(ut))},[pe]),He=T.useCallback(()=>{D(""),Q(""),X(!0)},[]),pt=T.useCallback(async()=>{if(!re.trim()){Ye.error("Repository URL cannot be empty.");return}me(!0),E(null);try{const ut=ga(re.trim().replace(/\.git$/,""))||"cloned_repo",Rt=Ig(Pe,ut);await mF(Rt,re.trim(),J.trim()||void 0),X(!1),await O()}catch{}finally{me(!1)}},[re,J,Pe,E,O]),Kt=T.useCallback(async()=>{if(!Ae||!ke.trim()){Ye.error("Commit message cannot be empty.");return}Le(!0),E(null);try{await OT(Ae,ke.trim()),Me(!1)}catch{}finally{Le(!1)}},[Ae,ke,E]);return it?m.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[m.jsx(Pn,{className:"h-8 w-8 animate-spin mb-2"}),m.jsx("p",{children:S?`Initializing filesystem: ${S}`:"Loading filesystem..."}),i&&m.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!it?m.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[m.jsxs("p",{children:["Error loading filesystem: ",i]}),m.jsx(Dt,{variant:"outline",size:"sm",onClick:()=>I(w||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):m.jsxs("div",{className:At("flex h-full flex-col bg-card text-card-foreground"),children:[m.jsx(g1e,{currentPath:Pe,isAnyLoading:_t||it,isOperationLoading:a,entries:We,editingPath:L,creatingFolder:Z,handleNavigateHome:ye,handleNavigateUp:Zt,handleRefresh:O,startCreatingFolder:Ce,handleUploadClick:vt,handleFolderUploadClick:F,handleArchiveUploadClick:Be,handleDownloadAll:jt,handleCloneClick:He,fileInputRef:Se,folderInputRef:Te,archiveInputRef:ue,handleFileChange:nt,handleArchiveChange:ge}),m.jsx("div",{className:"flex-grow overflow-auto",children:m.jsx(m1e,{entries:We,editingPath:L,newName:R,creatingFolder:Z,newFolderName:K,selectedFileIds:b,isOperationLoading:_t,handleNavigate:Pt,handleCheckboxChange:G,startEditing:fe,cancelEditing:je,handleRename:be,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Oe,setNewName:j,setNewFolderName:q,renameInputRef:oe,newFolderInputRef:ee,gitRepoStatus:de,handleGitInit:V,handleGitPull:H,handleGitCommit:W,handleGitPush:he,handleGitStatus:Ne})}),m.jsx(y1e,{isOpen:te,onOpenChange:X,cloneRepoUrl:re,setCloneRepoUrl:D,cloneBranch:J,setCloneBranch:Q,isCloning:ie,onSubmitClone:pt,currentPath:Pe}),m.jsx(b1e,{isOpen:ve,onOpenChange:Me,commitPath:Ae,commitMessage:ke,setCommitMessage:Fe,isCommitting:et,onSubmitCommit:Kt})]})});DA.displayName="FileManager";const v1e=({vfsKey:e,selectedItemType:t})=>e==="orphan"?m.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[m.jsx(ZI,{className:"h-4 w-4"}),m.jsxs("span",{children:[m.jsx("b",{children:"Shared VFS:"})," All chats ",m.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?m.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[m.jsx(ZI,{className:"h-4 w-4"}),m.jsxs("span",{children:[m.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?m.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[m.jsx(l0,{className:"h-4 w-4"}),m.jsxs("span",{children:[m.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null,w1e=()=>{const{isVfsModalOpen:e,toggleVfsModal:t}=is(dn(d=>({isVfsModalOpen:d.isVfsModalOpen,toggleVfsModal:d.toggleVfsModal}))),{vfsKey:n,selectedFileIds:r,clearSelection:a,nodes:i}=so(dn(d=>({vfsKey:d.vfsKey,selectedFileIds:d.selectedFileIds,clearSelection:d.clearSelection,nodes:d.nodes}))),s=mn(d=>d.selectedItemType),o=Zl.getState().addAttachedFile,l=()=>{if(r.size===0){Ye.info("No files selected in VFS to attach.");return}let d=0;r.forEach(h=>{const p=i[h];p&&p.type==="file"&&(o({source:"vfs",name:p.name,type:p.mimeType||"application/octet-stream",size:p.size,path:p.path}),d++)}),d>0?(Ye.success(`Attached ${d} file(s) from VFS to the next prompt.`),a(),t(!1)):Ye.warning("No valid files were selected to attach.")},u=()=>{a(),t(!1)};return m.jsx(u1,{open:e,onOpenChange:u,children:m.jsxs(d1,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[m.jsxs(f1,{className:"p-4 pb-2 border-b flex-shrink-0",children:[m.jsx(p1,{children:"Virtual Filesystem"}),m.jsx(m1,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),m.jsx(v1e,{vfsKey:n,selectedItemType:s})]}),m.jsx("div",{className:"flex-grow overflow-hidden",children:m.jsx(DA,{})}),m.jsxs(h1,{className:"p-4 pt-2 border-t flex-shrink-0",children:[m.jsx(Dt,{variant:"outline",onClick:u,children:"Close"}),m.jsxs(Dt,{onClick:l,disabled:r.size===0,children:[m.jsx(mk,{className:"h-4 w-4 mr-2"}),"Attach Selected (",r.size,")"]})]})]})})};function x1e(){const e=Rr.getState().registerPromptControl,t=Rr.getState().registerChatControl;e({id:"core-vfs-prompt-trigger",show:()=>so.getState().enableVfs,triggerRenderer:()=>gt.createElement(Kwe)}),t({id:"core-vfs-modal-panel",panel:void 0,show:()=>is.getState().isVfsModalOpen,renderer:()=>gt.createElement(w1e),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control (Prompt Trigger & Modal)")}const _1e=()=>{const{linkConversationToRepo:e,syncConversation:t}=mn(dn(B=>({linkConversationToRepo:B.linkConversationToRepo,syncConversation:B.syncConversation}))),[n,r]=T.useState(()=>mn.getState().selectedItemId),[a,i]=T.useState(()=>mn.getState().selectedItemType),[s,o]=T.useState(()=>mn.getState().syncRepos),[l,u]=T.useState(()=>mn.getState().conversationSyncStatus),[d,h]=T.useState(()=>qn.getState().status==="streaming"),[p,y]=T.useState(null),[v,b]=T.useState("idle"),[w,x]=T.useState(!1),[S,E]=T.useState(!1);T.useEffect(()=>{const B=ae=>{r(ae.selectedItemId),i(ae.selectedItemType)},Z=()=>{o(mn.getState().syncRepos)},P=ae=>{u(te=>({...te,[ae.conversationId]:ae.status}))},K=ae=>{h(ae.status==="streaming")},q=ae=>{ae.conversationId===n&&ae.updates.syncRepoId!==void 0&&y(ae.updates.syncRepoId)},de=mn.getState();return r(de.selectedItemId),i(de.selectedItemType),o(de.syncRepos),u(de.conversationSyncStatus),Ct.on(St.CONTEXT_CHANGED,B),Ct.on(St.SYNC_REPO_CHANGED,Z),Ct.on(St.CONVERSATION_SYNC_STATUS_CHANGED,P),Ct.on(St.INTERACTION_STATUS_CHANGED,K),Ct.on(St.CONVERSATION_UPDATED,q),()=>{Ct.off(St.CONTEXT_CHANGED,B),Ct.off(St.SYNC_REPO_CHANGED,Z),Ct.off(St.CONVERSATION_SYNC_STATUS_CHANGED,P),Ct.off(St.INTERACTION_STATUS_CHANGED,K),Ct.off(St.CONVERSATION_UPDATED,q)}},[n]),T.useEffect(()=>{if(a==="conversation"&&n){const B=mn.getState().getConversationById(n);y((B==null?void 0:B.syncRepoId)??null),b(l[n]??"idle")}else y(null),b("idle")},[n,a,l]);const C=gt.useMemo(()=>new Map(s.map(B=>[B.id,B.name])),[s]),k=p?C.get(p):void 0,I=T.useCallback(async B=>{if(!n||a!=="conversation")return;x(!0),await e(n,B==="none"?null:B),x(!1)},[n,a,e]),R=T.useCallback(async()=>{!n||!p||(E(!0),await t(n),E(!1))},[n,p,t]),j=m9(v,k),L=!p||S||w||d||v==="syncing";return a!=="conversation"||s.length===0?null:m.jsxs(Lu,{children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx($u,{asChild:!0,children:m.jsx(Dt,{variant:p?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d||w||S,"aria-label":"Configure Git Sync",children:v==="syncing"||S||w?m.jsx(Pn,{className:"h-4 w-4 animate-spin"}):m.jsx(Rd,{className:"h-4 w-4"})})})}),m.jsx(Qn,{side:"top",children:p?`Sync Status: ${v}`:"Link to Sync Repo"})]})}),m.jsxs(Bu,{className:"w-64 p-4 space-y-3",align:"start",children:[m.jsx(Gt,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),m.jsxs(Jo,{value:p??"none",onValueChange:I,disabled:w||S||d,children:[m.jsx(el,{id:"sync-repo-select",className:"w-full h-9",children:m.jsx(Qo,{placeholder:"Select repository..."})}),m.jsxs(tl,{children:[m.jsx(Gr,{value:"none",children:m.jsx("span",{className:"text-muted-foreground",children:"None"})}),s.map(B=>m.jsx(Gr,{value:B.id,children:B.name},B.id))]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",j||"Not Linked"]}),m.jsxs(Dt,{size:"sm",variant:"outline",onClick:R,disabled:L,className:"h-8",children:[S||v==="syncing"?m.jsx(Pn,{className:"h-4 w-4 mr-1 animate-spin"}):m.jsx(X6,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};function S1e(){const e=Rr.getState().registerPromptControl;e({id:"core-git-sync",triggerRenderer:()=>gt.createElement(_1e)}),console.log("[Function] Registered Core Git Sync Control")}const E1e=U.object({path:U.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),C1e=U.object({path:U.string().describe("The path of the file to read within the VFS."),encoding:U.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),k1e=U.object({path:U.string().describe("The path where the file should be written."),content:U.string().describe("The content to write to the file."),encoding:U.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),T1e=U.object({path:U.string().describe("The path of the file or directory to delete."),recursive:U.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),A1e=U.object({path:U.string().describe("The path of the directory to create (including parents).")}),N1e=U.object({oldPath:U.string().describe("The current path of the item to rename."),newName:U.string().describe("The new name for the item.")});function R1e(){const e=Rr.getState().registerTool;console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:E1e},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=rr(o||"/");try{const h=await MT(d,{fsInstance:u});return{success:!0,path:d,entries:h.map(p=>({name:p.name,type:p.isDirectory?"folder":"file",size:p.size,lastModified:p.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:C1e},async({path:o,encoding:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=rr(o);try{const p=await of(h,{fsInstance:d});let y;return l==="base64"?y=btoa(String.fromCharCode(...p)):y=new TextDecoder().decode(p),{success:!0,path:h,content:y,encoding:l}}catch(p){return{success:!1,path:h,error:p.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:k1e},async({path:o,content:l,encoding:u},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const p=rr(o);try{let y;if(u==="base64"){const v=atob(l),b=v.length,w=new Uint8Array(b);for(let x=0;x<b;x++)w[x]=v.charCodeAt(x);y=w}else y=l;return await Ux(p,y,{fsInstance:h}),{success:!0,path:p}}catch(y){return{success:!1,path:p,error:y.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:T1e},async({path:o,recursive:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=rr(o);try{return await PT(h,l,{fsInstance:d}),{success:!0,path:h}}catch(p){return{success:!1,path:h,error:p.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:A1e},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=rr(o);try{return await bF(d,{fsInstance:u}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:N1e},async({oldPath:o,newName:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=rr(o),p=rr(h.substring(0,h.lastIndexOf("/"))||"/"),y=Xo(p,l);try{return await wF(h,y,{fsInstance:d}),{success:!0,oldPath:h,newPath:y}}catch(v){return{success:!1,oldPath:h,newName:l,error:v.message}}}),console.log("[Function] Core VFS Tools Registered.")}const I1e=U.object({path:U.string().describe("The directory path within the VFS to initialize as a Git repository.")}),j1e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to commit."),message:U.string().describe("The commit message.")}),O1e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:U.string().optional().describe("The branch name to pull.")}),D1e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to push."),branch:U.string().optional().describe("The branch name to push.")}),M1e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to check status.")});function P1e(){const e=Rr.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:I1e},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await gF(s,{fsInstance:l}),{success:!0,message:`Repository initialized at ${s}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:j1e},async({path:s,message:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=lr.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await OT(s,o,{fsInstance:u}),{success:!0,message:`Changes committed in ${s}`}}catch(h){return{success:!1,error:h.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:O1e},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await zx(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pulled changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:D1e},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await DT(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pushed changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:M1e},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await yF(s,{fsInstance:l}),{success:!0,message:`Status checked for ${s}`}}catch(u){return{success:!1,error:u.message}}}),console.log("[Function] Core Git Tools Registered.")}const F1e=({className:e,enabledTools:t,setEnabledTools:n,localMaxSteps:r,setLocalMaxSteps:a,conversationId:i,conversationType:s})=>{const o=Rr(S=>S.tools),l=lr(S=>S.toolMaxSteps),[u,d]=T.useState(""),h=T.useMemo(()=>Object.entries(o).map(([S,{definition:E,modId:C}])=>({name:S,description:E.description??"No description provided.",modId:C})).sort((S,E)=>S.name.localeCompare(E.name)),[o]),p=T.useMemo(()=>{const S=u.trim().toLowerCase();return S?h.filter(E=>E.name.toLowerCase().includes(S)||E.description.toLowerCase().includes(S)||E.modId.toLowerCase().includes(S)):h},[h,u]),y=T.useCallback((S,E)=>{n(C=>{const k=new Set(C);return E?k.add(S):k.delete(S),k})},[n]),v=T.useCallback(S=>{n(()=>S?new Set(h.map(E=>E.name)):new Set)},[h,n]),b=S=>{const E=S.target.value;if(E===""){a(null);return}const C=parseInt(E,10);if(isNaN(C))a(null);else{const k=Math.max(1,Math.min(20,C));a(k)}},w=r===null?"":String(r),x=s!=="conversation"||!i;return m.jsxs("div",{className:At("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[m.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),m.jsxs("div",{className:"relative",children:[m.jsx(Wl,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),m.jsx(jn,{type:"search",placeholder:"Filter tools...",value:u,onChange:S=>d(S.target.value),className:"pl-8 h-9",disabled:x})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs(Gt,{className:"text-xs text-muted-foreground",children:[p.length," tools shown (",t.size," enabled)"]}),m.jsxs("div",{className:"space-x-2",children:[m.jsx(Dt,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:x||h.length===0,children:"Enable All"}),m.jsx(Dt,{variant:"outline",size:"sm",onClick:()=>v(!1),disabled:x||h.length===0||t.size===0,children:"Disable All"})]})]}),m.jsx(rc,{className:"h-56 border rounded-md p-2 bg-background/50",children:x?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):p.length===0?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):m.jsx("div",{className:"space-y-1",children:p.map(S=>m.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[m.jsx(Mi,{id:`tool-switch-${S.name}`,checked:t.has(S.name),onCheckedChange:E=>y(S.name,E),className:"flex-shrink-0",disabled:x}),m.jsxs(Gt,{htmlFor:`tool-switch-${S.name}`,className:At("text-sm font-normal flex-grow pl-2 space-y-0.5",x?"cursor-not-allowed":"cursor-pointer"),title:`${S.name} (from ${S.modId})`,children:[m.jsx("span",{className:"block font-medium",children:S.name}),m.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:S.description})]})]},S.name))})}),m.jsxs("div",{className:"pt-2",children:[m.jsx(Gt,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),m.jsx(jn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:w,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(l??5),disabled:x}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})};let ru=new Set,zl=null,Ym=()=>{};const L1e=()=>{const[e,t]=T.useState({enabledTools:ru,maxStepsOverride:zl}),[n,r]=T.useState(e.maxStepsOverride),[a,i]=T.useState(!1),[s,o]=T.useState(()=>qn.getState().status==="streaming"),[l,u]=T.useState(!0),[d,h]=T.useState(()=>mn.getState().selectedItemType),[p,y]=T.useState(()=>mn.getState().selectedItemId),v=Object.keys(Rr.getState().tools).length;T.useEffect(()=>(Ym=E=>{const C=E({enabledTools:ru,maxStepsOverride:zl});ru=C.enabledTools,zl=C.maxStepsOverride,t(C)},t({enabledTools:ru,maxStepsOverride:zl}),()=>{Ym=()=>{}}),[]),T.useEffect(()=>{r(e.maxStepsOverride)},[e.maxStepsOverride]),T.useEffect(()=>{const E=I=>{o(I.status==="streaming")},C=I=>{var B,Z;if(!I.modelId){u(!1);return}const{getSelectedModel:R}=$n.getState(),j=R(),L=Object.keys(Rr.getState().tools).length>0;u(L&&(((Z=(B=j==null?void 0:j.metadata)==null?void 0:B.supported_parameters)==null?void 0:Z.includes("tools"))??!1))},k=I=>{h(I.selectedItemType),y(I.selectedItemId)};return C({modelId:$n.getState().selectedModelId}),k({selectedItemId:mn.getState().selectedItemId,selectedItemType:mn.getState().selectedItemType}),Ct.on(St.INTERACTION_STATUS_CHANGED,E),Ct.on(St.MODEL_SELECTION_CHANGED,C),Ct.on(St.CONTEXT_CHANGED,k),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,E),Ct.off(St.MODEL_SELECTION_CHANGED,C),Ct.off(St.CONTEXT_CHANGED,k)}},[]);const b=E=>{i(E),!E&&n!==e.maxStepsOverride&&Ym(C=>({...C,maxStepsOverride:n}))},w=T.useCallback(E=>{Ym(C=>({...C,enabledTools:E(C.enabledTools)}))},[]),x=e.enabledTools.size>0||e.maxStepsOverride!==null,S=s||v===0||d!=="conversation";return l?m.jsxs(Lu,{open:a,onOpenChange:b,children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx($u,{asChild:!0,children:m.jsx(Dt,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:S,"aria-label":"Configure Tools",children:m.jsx(tD,{className:"h-4 w-4"})})})}),m.jsx(Qn,{side:"top",children:S?"Tools unavailable (select conversation)":`Tools (${e.enabledTools.size} enabled)`})]})}),m.jsx(Bu,{className:"w-auto p-0",align:"start",children:m.jsx(F1e,{enabledTools:e.enabledTools,setEnabledTools:w,localMaxSteps:n,setLocalMaxSteps:r,conversationId:p,conversationType:d})})]}):null};function $1e(){const e=Rr.getState().registerPromptControl;ru=new Set,zl=null,e({id:"core-tool-selector",triggerRenderer:()=>gt.createElement(L1e),getMetadata:()=>{if(ru.size>0||zl!==null)return{enabledTools:Array.from(ru),...zl!==null&&{maxSteps:zl}}},clearOnSubmit:()=>{ru=new Set,zl=null,Ym(()=>({enabledTools:new Set,maxStepsOverride:null}))}}),console.log("[Function] Registered Core Tool Selector Control")}const B1e=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:s})=>m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),m.jsx(Pu,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:o=>t(o.target.value||null),rows:6,disabled:s,className:"mt-1"}),m.jsx(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:s||e===null,children:"Use Inherited/Default"})]}),m.jsxs("div",{children:[m.jsx(Gt,{children:"Default Model (Overrides Parent/Global)"}),m.jsx(v1,{value:n??i,onChange:r,disabled:s}),m.jsx(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:s||n===null,children:"Use Inherited/Default"})]})]}),z1e=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,localTemp:p,setLocalTemp:y,localTopP:v,setLocalTopP:b,localPresence:w,setLocalPresence:x,localFrequency:S,setLocalFrequency:E,effectiveTemperature:C,effectiveMaxTokens:k,effectiveTopP:I,effectiveTopK:R,effectivePresencePenalty:j,effectiveFrequencyPenalty:L,isSaving:B})=>{const Z=T.useCallback((K,q)=>{const de=q.target.value,ae=de===""?null:parseInt(de,10);(de===""||!isNaN(ae)&&ae!==null)&&K(ae)},[]),P=T.useCallback((K,q)=>{K(q[0])},[]);return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",p.toFixed(2),")"]}),m.jsx(Vo,{id:"project-temperature",min:0,max:1,step:.01,value:[p],onValueChange:K=>y(K[0]),onValueCommit:K=>P(t,K),disabled:B}),m.jsxs(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:B||e===null,children:["Use Inherited/Default (",(C==null?void 0:C.toFixed(2))??"N/A",")"]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),m.jsx(Vo,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:K=>b(K[0]),onValueCommit:K=>P(i,K),disabled:B}),m.jsxs(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:B||a===null,children:["Use Inherited/Default (",(I==null?void 0:I.toFixed(2))??"N/A",")"]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),m.jsx(jn,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${k??"Default"}`,value:n??"",onChange:K=>Z(r,K),min:"1",className:"h-8 text-xs",disabled:B}),m.jsx(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:B||n===null,children:"Use Inherited/Default"})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Gt,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),m.jsx(jn,{id:"project-top-k",type:"number",placeholder:`Inherited: ${R??"Default"}`,value:s??"",onChange:K=>Z(o,K),min:"1",className:"h-8 text-xs",disabled:B}),m.jsx(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>o(null),disabled:B||s===null,children:"Use Inherited/Default"})]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",w.toFixed(2),")"]}),m.jsx(Vo,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[w],onValueChange:K=>x(K[0]),onValueCommit:K=>P(u,K),disabled:B}),m.jsxs(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>u(null),disabled:B||l===null,children:["Use Inherited/Default (",(j==null?void 0:j.toFixed(2))??"N/A",")"]})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs(Gt,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",S.toFixed(2),")"]}),m.jsx(Vo,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[S],onValueChange:K=>E(K[0]),onValueCommit:K=>P(h,K),disabled:B}),m.jsxs(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:B||d===null,children:["Use Inherited/Default (",(L==null?void 0:L.toFixed(2))??"N/A",")"]})]})]})},U1e=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var s;const i=((s=r.find(o=>o.id===n))==null?void 0:s.name)??"None";return m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{children:[m.jsx(Gt,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),m.jsxs(Jo,{value:e??"none",onValueChange:o=>t(o==="none"?null:o),disabled:a||r.length===0,children:[m.jsx(el,{id:"project-sync-repo",children:m.jsx(Qo,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),m.jsxs(tl,{children:[m.jsx(Gr,{value:"none",children:m.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(o=>m.jsx(Gr,{value:o.id,children:o.name},o.id))]})]}),m.jsx(Dt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},H1e=({projectId:e,projectName:t,isSaving:n})=>{const r=()=>{Ye.info(`VFS clearing for project "${t}" is not yet implemented.`)},a=T.useMemo(()=>[{value:"manage",label:"Manage Files",content:m.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?m.jsx(DA,{}):m.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings & Danger Zone",content:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Gt,{children:"Project Filesystem Info"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),m.jsx("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2",children:m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",m.jsx("code",{className:"text-xs",children:e||"N/A"})]})})]}),m.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[m.jsx(Gt,{className:"text-destructive",children:"Danger Zone"}),m.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."}),m.jsxs(Dt,{variant:"destructive",size:"sm",onClick:r,disabled:n||!e,children:[m.jsx(Nd,{className:"h-4 w-4 mr-1"}),"Clear Project VFS (Not Implemented)"]})]})]})}],[e,t,n]);return m.jsx(zu,{tabs:a,defaultValue:"manage",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-3 flex-grow flex flex-col"})},q1e=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a}=ai(dn(Fe=>({getProjectById:Fe.getProjectById,updateProject:Fe.updateProject}))),i=ai(Fe=>Fe.getEffectiveProjectSettings),s=mn(Fe=>Fe.syncRepos),o=lr(dn(Fe=>({globalSystemPrompt:Fe.globalSystemPrompt,temperature:Fe.temperature,maxTokens:Fe.maxTokens,topP:Fe.topP,topK:Fe.topK,presencePenalty:Fe.presencePenalty,frequencyPenalty:Fe.frequencyPenalty}))),l=$n(Fe=>Fe.selectedModelId),u=so(Fe=>Fe.setVfsKey),[d,h]=T.useState(null),[p,y]=T.useState(null),[v,b]=T.useState(null),[w,x]=T.useState(null),[S,E]=T.useState(null),[C,k]=T.useState(null),[I,R]=T.useState(null),[j,L]=T.useState(null),[B,Z]=T.useState(null),[P,K]=T.useState(.7),[q,de]=T.useState(1),[ae,te]=T.useState(0),[X,re]=T.useState(0),[D,J]=T.useState(!1),[Q,ie]=T.useState("prompt"),{project:me,effectiveSettings:ve}=T.useMemo(()=>{const Fe=n?r(n):null,et=n?i(n):null;return{project:Fe,effectiveSettings:et}},[n,r,i]),Me=T.useCallback(Fe=>{var Le;if(!Fe)return null;const et=r(Fe);return et?((Le=et.metadata)==null?void 0:Le.syncRepoId)!==void 0?et.metadata.syncRepoId:Me(et.parentId):null},[r]),Ae=n?Me(n):null;T.useEffect(()=>{var Fe;e&&n&&me&&ve?(u(n),h(me.systemPrompt??null),y(me.modelId??null),b(me.temperature??null),x(me.maxTokens??null),E(me.topP??null),k(me.topK??null),R(me.presencePenalty??null),L(me.frequencyPenalty??null),Z(((Fe=me.metadata)==null?void 0:Fe.syncRepoId)??null),K(ve.temperature??o.temperature),de(ve.topP??o.topP??1),te(ve.presencePenalty??o.presencePenalty??0),re(ve.frequencyPenalty??o.frequencyPenalty??0),ie("prompt")):e||(u(null),h(null),y(null),b(null),x(null),E(null),k(null),R(null),L(null),Z(null))},[e,n,me,ve,o,u]),T.useEffect(()=>K(v??(ve==null?void 0:ve.temperature)??o.temperature),[v,ve,o.temperature]),T.useEffect(()=>de(S??(ve==null?void 0:ve.topP)??o.topP??1),[S,ve,o.topP]),T.useEffect(()=>te(I??(ve==null?void 0:ve.presencePenalty)??o.presencePenalty??0),[I,ve,o.presencePenalty]),T.useEffect(()=>re(j??(ve==null?void 0:ve.frequencyPenalty)??o.frequencyPenalty??0),[j,ve,o.frequencyPenalty]);const Re=async()=>{if(!(!n||!me)){J(!0);try{const Fe=me.parentId?i(me.parentId):{systemPrompt:o.globalSystemPrompt,modelId:l,temperature:o.temperature,maxTokens:o.maxTokens,topP:o.topP,topK:o.topK,presencePenalty:o.presencePenalty,frequencyPenalty:o.frequencyPenalty},et=me.parentId?Me(me.parentId):null,Le={},Ie={...me.metadata??{}};d!==Fe.systemPrompt?Le.systemPrompt=d:Le.systemPrompt=void 0,p!==Fe.modelId?Le.modelId=p:Le.modelId=void 0,v!==Fe.temperature?Le.temperature=v:Le.temperature=void 0,w!==Fe.maxTokens?Le.maxTokens=w:Le.maxTokens=void 0,S!==Fe.topP?Le.topP=S:Le.topP=void 0,C!==Fe.topK?Le.topK=C:Le.topK=void 0,I!==Fe.presencePenalty?Le.presencePenalty=I:Le.presencePenalty=void 0,j!==Fe.frequencyPenalty?Le.frequencyPenalty=j:Le.frequencyPenalty=void 0,B!==et?Ie.syncRepoId=B:delete Ie.syncRepoId,Le.metadata=Ie,await a(n,Le),Ye.success(`Project "${me.name}" settings updated.`),t()}catch(Fe){Ye.error("Failed to save project settings."),console.error("Failed to save project settings:",Fe)}finally{J(!1)}}},ke=T.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:m.jsx(B1e,{systemPrompt:d,setSystemPrompt:h,modelId:p,setModelId:y,effectiveSystemPrompt:(ve==null?void 0:ve.systemPrompt)??o.globalSystemPrompt,effectiveModelId:(ve==null?void 0:ve.modelId)??l,isSaving:D})},{value:"params",label:"Parameters",content:m.jsx(z1e,{temperature:v,setTemperature:b,maxTokens:w,setMaxTokens:x,topP:S,setTopP:E,topK:C,setTopK:k,presencePenalty:I,setPresencePenalty:R,frequencyPenalty:j,setFrequencyPenalty:L,localTemp:P,setLocalTemp:K,localTopP:q,setLocalTopP:de,localPresence:ae,setLocalPresence:te,localFrequency:X,setLocalFrequency:re,effectiveTemperature:(ve==null?void 0:ve.temperature)??o.temperature,effectiveMaxTokens:(ve==null?void 0:ve.maxTokens)??o.maxTokens,effectiveTopP:(ve==null?void 0:ve.topP)??o.topP,effectiveTopK:(ve==null?void 0:ve.topK)??o.topK,effectivePresencePenalty:(ve==null?void 0:ve.presencePenalty)??o.presencePenalty,effectiveFrequencyPenalty:(ve==null?void 0:ve.frequencyPenalty)??o.frequencyPenalty,isSaving:D})},{value:"sync",label:"Sync",content:m.jsx(U1e,{syncRepoId:B,setSyncRepoId:Z,effectiveSyncRepoId:Ae,syncRepos:s,isSaving:D})},{value:"vfs",label:"Filesystem",content:m.jsx(H1e,{projectId:n,projectName:(me==null?void 0:me.name)??null,isSaving:D})}],[d,p,v,w,S,C,I,j,B,ve,o,l,D,P,q,ae,X,Ae,s,n,me==null?void 0:me.name]);return m.jsx(u1,{open:e,onOpenChange:t,children:m.jsxs(d1,{className:"sm:max-w-[800px] w-[90vw] h-[70vh] min-h-[500px] max-h-[80vh] flex flex-col p-0",children:[m.jsxs(f1,{className:"p-6 pb-4 flex-shrink-0",children:[m.jsxs(p1,{children:["Project Settings: ",me==null?void 0:me.name]}),m.jsx(m1,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),m.jsx(zu,{tabs:ke,initialValue:Q,onValueChange:ie,className:"flex-grow overflow-hidden px-6",listClassName:"-mx-6 px-6",contentContainerClassName:"pb-6 pr-2 -mr-2"}),m.jsxs(h1,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:[m.jsx(Dt,{variant:"outline",onClick:t,disabled:D,children:"Cancel"}),m.jsxs(Dt,{onClick:Re,disabled:D,children:[D&&m.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function V1e(){const e=Rr.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=is.getState();return m.jsx(q1e,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>gt.createElement(t),status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}const G1e=()=>{const{selectedModelId:e,selectModel:t}=$n(dn(l=>({selectedModelId:l.selectedModelId,selectModel:l.selectModel}))),n=Si(l=>l.setModelId),[r,a]=T.useState(()=>qn.getState().status==="streaming"),[i,s]=T.useState(e);T.useEffect(()=>{const l=h=>{a(h.status==="streaming")},u=h=>{s(h.modelId),n(h.modelId)},d=$n.getState().selectedModelId;return s(d),n(d),Ct.on(St.INTERACTION_STATUS_CHANGED,l),Ct.on(St.MODEL_SELECTION_CHANGED,u),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,l),Ct.off(St.MODEL_SELECTION_CHANGED,u)}},[n]);const o=l=>{t(l),n(l)};return m.jsx(v1,{value:i,onChange:o,disabled:r})};function W1e(){const e=Rr.getState().registerPromptControl;e({id:"core-global-model-selector",status:()=>$n.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(G1e),getParameters:void 0,getMetadata:void 0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}const K1e=({initialPromptValue:e,onPromptChange:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(!1),[s,o]=T.useState(null),[l,u]=T.useState(()=>qn.getState().status==="streaming");T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const v=C=>{u(C.status==="streaming")},b=(C,k)=>{var B;const{getConversationById:I}=mn.getState(),{getEffectiveProjectSettings:R}=ai.getState(),j=lr.getState().globalSystemPrompt,L=k==="project"?C:k==="conversation"?((B=I(C))==null?void 0:B.projectId)??null:null;o(R(L).systemPrompt??j)},w=C=>{b(C.selectedItemId,C.selectedItemType)},x=C=>{var R;const k=mn.getState();(k.selectedItemType==="project"?k.selectedItemId:k.selectedItemType==="conversation"?((R=k.getConversationById(k.selectedItemId))==null?void 0:R.projectId)??null:null)===C.projectId&&b(k.selectedItemId,k.selectedItemType)},S=C=>{if(C.key==="globalSystemPrompt"){const k=mn.getState();b(k.selectedItemId,k.selectedItemType)}},E=mn.getState();return b(E.selectedItemId,E.selectedItemType),Ct.on(St.INTERACTION_STATUS_CHANGED,v),Ct.on(St.CONTEXT_CHANGED,w),Ct.on(St.PROJECT_UPDATED,x),Ct.on(St.SETTINGS_CHANGED,S),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,v),Ct.off(St.CONTEXT_CHANGED,w),Ct.off(St.PROJECT_UPDATED,x),Ct.off(St.SETTINGS_CHANGED,S)}},[]);const d=T.useCallback(()=>{t(n.trim()),i(!1)},[n,t]),h=T.useCallback(()=>{r(""),t(""),i(!1)},[t]),p=v=>{v&&r(e),i(v)},y=e.trim().length>0;return m.jsxs(Lu,{open:a,onOpenChange:p,children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx($u,{asChild:!0,children:m.jsx(Dt,{variant:y?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:l,"aria-label":"Set System Prompt for Next Turn",children:m.jsx(iV,{className:"h-4 w-4"})})})}),m.jsx(Qn,{side:"top",children:y?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),m.jsxs(Bu,{className:"w-80 p-4 space-y-3",align:"start",children:[m.jsx(Gt,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),m.jsx(Pu,{id:"turn-system-prompt",placeholder:`Inherited: ${(s==null?void 0:s.substring(0,50))||"Default"}${s&&s.length>50?"...":""}`,value:n,onChange:v=>r(v.target.value),rows:5,className:"text-sm"}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx(Dt,{variant:"outline",size:"sm",onClick:h,disabled:!n.trim(),children:"Clear Override"}),m.jsx(Dt,{size:"sm",onClick:d,children:"Set for Next Turn"})]})]})]})};let Hm="";function Z1e(){const e=Rr.getState().registerPromptControl;Hm="";const t=n=>{Hm=n};e({id:"core-system-prompt",status:()=>"ready",triggerRenderer:()=>gt.createElement(K1e,{initialPromptValue:Hm,onPromptChange:t}),getMetadata:()=>{const n=Hm.trim();return n?{turnSystemPrompt:n}:void 0},clearOnSubmit:()=>{Hm=""}}),console.log("[Function] Registered Core System Prompt Control")}const Y1e=()=>{const{structuredOutputJson:e,setStructuredOutputJson:t}=Si(dn(x=>({structuredOutputJson:x.structuredOutputJson,setStructuredOutputJson:x.setStructuredOutputJson}))),[n,r]=T.useState(!1),[a,i]=T.useState(e??""),[s,o]=T.useState(""),[l,u]=T.useState([]),d=T.useCallback(()=>{try{JSON.parse(a),t(a.trim()||null),r(!1),Ye.success("Structured output applied for next turn.")}catch{Ye.error("Invalid JSON format.")}},[a,t]),h=T.useCallback(()=>{i(""),t(null),r(!1),Ye.info("Structured output cleared.")},[t]),p=T.useCallback(()=>{if(!s.trim()){Ye.error("Please provide a name to save to the library.");return}try{JSON.parse(a);const x={id:Date.now().toString(),name:s.trim(),json:a};u(S=>[...S,x]),o(""),Ye.success(`"${x.name}" saved to library.`)}catch{Ye.error("Cannot save invalid JSON to library.")}},[a,s]),y=T.useCallback(x=>{i(x.json),t(x.json),r(!1),Ye.success(`Loaded "${x.name}" from library.`)},[t]),v=T.useCallback(x=>{u(S=>S.filter(E=>E.id!==x)),Ye.info("Item removed from library.")},[]);T.useEffect(()=>{n&&i(e??"")},[n,e]);const b=[{value:"entry",label:"Entry",content:m.jsxs("div",{className:"space-y-3 p-1",children:[m.jsx(Gt,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),m.jsx(Pu,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:a,onChange:x=>i(x.target.value),rows:8,className:"font-mono text-xs"}),m.jsxs("div",{className:"flex justify-between items-end gap-2",children:[m.jsxs("div",{className:"flex-grow space-y-1",children:[m.jsx(Gt,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),m.jsx(jn,{id:"structured-output-name",value:s,onChange:x=>o(x.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),m.jsxs(Dt,{size:"sm",variant:"outline",onClick:p,disabled:!s.trim()||!a.trim(),className:"h-8",children:[m.jsx(Vd,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),m.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[m.jsx(Dt,{variant:"outline",size:"sm",onClick:h,disabled:!e,children:"Clear Applied Schema"}),m.jsx(Dt,{size:"sm",onClick:d,disabled:!a,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:m.jsx("div",{className:"space-y-2 p-1",children:l.length===0?m.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):l.map(x=>m.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[m.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:x.name}),m.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[m.jsx(Dt,{size:"sm",variant:"outline",onClick:()=>y(x),className:"h-7 px-2 text-xs",children:"Use"}),m.jsx(Dt,{size:"icon",variant:"ghost",onClick:()=>v(x.id),className:"h-7 w-7 text-destructive",children:m.jsx(ns,{className:"h-3.5 w-3.5"})})]})]},x.id))})}],w=!!e;return m.jsxs(Lu,{open:n,onOpenChange:r,children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx($u,{asChild:!0,children:m.jsx(Dt,{variant:w?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:m.jsx(Y6,{className:"h-4 w-4"})})})}),m.jsx(Qn,{side:"top",children:w?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),m.jsx(Bu,{className:"w-[450px] p-0",align:"start",children:m.jsx(zu,{tabs:b,defaultValue:"entry"})})]})},X1e=()=>{const[e,t]=T.useState(!0);return T.useEffect(()=>{console.log("[VisibleStructuredOutputControl] useEffect setup running.");const n=r=>{var l;if(console.log("[VisibleStructuredOutputControl] handleModelChange triggered:",r),!r.modelId){t(!1);return}const{getSelectedModel:a}=$n.getState(),i=a(),s=(l=i==null?void 0:i.metadata)==null?void 0:l.supported_parameters,o=Array.isArray(s)&&s.includes("structured_output");console.log(`[VisibleStructuredOutputControl] Model ${r.modelId} supports structured_output: ${o}`),t(o)};return n({modelId:$n.getState().selectedModelId}),console.log(`[VisibleStructuredOutputControl] Subscribing to ${St.MODEL_SELECTION_CHANGED}`),Ct.on(St.MODEL_SELECTION_CHANGED,n),()=>{console.log("[VisibleStructuredOutputControl] useEffect cleanup running."),Ct.off(St.MODEL_SELECTION_CHANGED,n)}},[]),e?m.jsx(Y1e,{}):null};function J1e(){const e=Rr.getState().registerPromptControl;e({id:"core-structured-output",status:()=>"ready",triggerRenderer:()=>gt.createElement(X1e),getParameters:()=>{const{structuredOutputJson:t}=Si.getState();if(t)try{return{structured_output:JSON.parse(t)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{Si.getState().setStructuredOutputJson(null)}}),console.log("[Function] Registered Core Structured Output Control")}const Jz=4,D2=e=>{let t=0;return e.forEach(n=>{var r,a,i,s;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(s=(i=(a=n.prompt)==null?void 0:a.metadata)==null?void 0:i.attachedFiles)==null||s.forEach(o=>{t+=o.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/Jz)},Q1e=()=>{const[e,t]=T.useState(""),[n,r]=T.useState(0),[a,i]=T.useState([]),[s,o]=T.useState(null),[l,u]=T.useState(0);T.useEffect(()=>{const b=Zl.getState(),w=$n.getState(),x=qn.getState();if(i(b.attachedFilesMetadata),o(w.selectedModelId),x.currentConversationId){const R=x.interactions.filter(j=>j.status==="COMPLETED");r(D2(R))}else r(0);const S=R=>{t(R.value)},E=R=>{i(R.files)},C=R=>{console.log(R),o(R.modelId)},k=()=>{const R=qn.getState();if(R.currentConversationId){const j=R.interactions.filter(L=>L.status==="COMPLETED");r(D2(j))}},I=()=>{const R=qn.getState();if(R.currentConversationId){const j=R.interactions.filter(L=>L.status==="COMPLETED");r(D2(j))}else r(0)};return Ct.on(St.PROMPT_INPUT_CHANGE,S),Ct.on(St.ATTACHED_FILES_CHANGED,E),Ct.on(St.MODEL_SELECTION_CHANGED,C),Ct.on(St.INTERACTION_COMPLETED,k),Ct.on(St.CONTEXT_CHANGED,I),()=>{Ct.off(St.PROMPT_INPUT_CHANGE,S),Ct.off(St.ATTACHED_FILES_CHANGED,E),Ct.off(St.MODEL_SELECTION_CHANGED,C),Ct.off(St.INTERACTION_COMPLETED,k),Ct.off(St.CONTEXT_CHANGED,I)}},[]),T.useEffect(()=>{var j;if(!s){u(0);return}const{dbProviderConfigs:b,dbApiKeys:w}=$n.getState(),{providerId:x,modelId:S}=sc(s);if(!x||!S){u(0);return}const E=b.find(L=>L.id===x);if(!E){u(0);return}const C=w.find(L=>L.id===E.apiKeyId),k=Ik(E,S,C==null?void 0:C.value),I=k==null?void 0:k.metadata,R=((j=I==null?void 0:I.top_provider)==null?void 0:j.context_length)??(I==null?void 0:I.context_length)??0;u(R)},[s]);const{estimatedInputTokens:d,totalEstimatedTokens:h,contextPercentage:p}=T.useMemo(()=>{const b=new TextEncoder().encode(e).length,w=a.reduce((C,k)=>C+k.size,0),x=Math.ceil((b+w)/Jz),S=n+x,E=l?Math.min(100,Math.round(S/l*100)):0;return{estimatedInputTokens:x,totalEstimatedTokens:S,contextPercentage:E}},[e,a,n,l]),y=T.useMemo(()=>p>85?"text-red-600 dark:text-red-500":p>70?"text-orange-500 dark:text-orange-400":p>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[p]);if(!s||l===0)return null;const v=`Context: ~${h.toLocaleString()} / ${l.toLocaleString()} tokens (${p}%) [History: ${n}, Input: ${d}]`;return m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:m.jsx(K6,{className:At("h-3 w-3 fill-current",y)})})}),m.jsx(Qn,{side:"top",children:v})]})})};function e_e(){const e=Rr.getState().registerPromptControl;e({id:"core-usage-display",status:()=>"ready",triggerRenderer:()=>gt.createElement(Q1e),renderer:void 0}),console.log("[Function] Registered Core Usage Display Control (Trigger)")}const t_e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>qn.getState().status==="streaming"),[s,o]=T.useState(!0);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=p=>{i(p.status==="streaming")},h=p=>{var b,w;if(!p.modelId){o(!1);return}const{getSelectedModel:y}=$n.getState(),v=y();o(((w=(b=v==null?void 0:v.metadata)==null?void 0:b.supported_parameters)==null?void 0:w.includes("reasoning"))??!1)};return h({modelId:$n.getState().selectedModelId}),Ct.on(St.INTERACTION_STATUS_CHANGED,d),Ct.on(St.MODEL_SELECTION_CHANGED,h),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,d),Ct.off(St.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:m.jsx(dk,{className:At("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),m.jsx(Qn,{side:"top",children:l?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};function n_e(){const e=Rr.getState().registerPromptControl,t=Si.getState(),n=r=>{t.setReasoningEnabled(r)};e({id:"core-reasoning",status:()=>"ready",triggerRenderer:()=>gt.createElement(t_e,{initialEnabled:t.reasoningEnabled,onToggle:n}),getParameters:()=>{const{reasoningEnabled:r}=Si.getState();return r===!0?{reasoning:!0}:void 0},clearOnSubmit:()=>{t.setReasoningEnabled(null)}}),console.log("[Function] Registered Core Reasoning Control")}const r_e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>qn.getState().status==="streaming"),[s,o]=T.useState(!0);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=p=>{i(p.status==="streaming")},h=p=>{var w;if(!p.modelId){o(!1);return}const{getSelectedModel:y}=$n.getState(),v=y(),b=((w=v==null?void 0:v.metadata)==null?void 0:w.supported_parameters)??[];o(b.includes("web_search")||b.includes("web_search_options"))};return h({modelId:$n.getState().selectedModelId}),Ct.on(St.INTERACTION_STATUS_CHANGED,d),Ct.on(St.MODEL_SELECTION_CHANGED,h),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,d),Ct.off(St.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:m.jsx(Wl,{className:At("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),m.jsx(Qn,{side:"top",children:l?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};function a_e(){const e=Rr.getState().registerPromptControl,t=Si.getState(),n=r=>{t.setWebSearchEnabled(r)};e({id:"core-web-search",status:()=>"ready",triggerRenderer:()=>gt.createElement(r_e,{initialEnabled:t.webSearchEnabled,onToggle:n}),getParameters:()=>{const{webSearchEnabled:r}=Si.getState();return r===!0?{web_search:!0}:void 0},clearOnSubmit:()=>{t.setWebSearchEnabled(null)}}),console.log("[Function] Registered Core Web Search Control")}const i_e=({activeTagIds:e,activeRuleIds:t,onToggleTag:n,onToggleRule:r})=>{const{rules:a,tags:i,getRulesForTag:s}=ac(dn(S=>({rules:S.rules,tags:S.tags,getRulesForTag:S.getRulesForTag}))),[o,l]=T.useState(""),[u,d]=T.useState(""),h=T.useMemo(()=>{const S=o.toLowerCase();return S?i.filter(E=>{var C;return E.name.toLowerCase().includes(S)||((C=E.description)==null?void 0:C.toLowerCase().includes(S))}):i},[i,o]),p=T.useMemo(()=>{const S=u.toLowerCase();return S?a.filter(E=>E.name.toLowerCase().includes(S)||E.content.toLowerCase().includes(S)||E.type.toLowerCase().includes(S)):a},[a,u]),y=T.useCallback((S,E)=>{n(S,E)},[n]),v=T.useCallback((S,E)=>{r(S,E)},[r]),b=()=>m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"relative",children:[m.jsx(Wl,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),m.jsx(jn,{type:"search",placeholder:"Filter tags...",value:o,onChange:S=>l(S.target.value),className:"pl-8 h-9"})]}),m.jsx(rc,{className:"h-64 border rounded-md p-2 bg-background/50",children:h.length===0?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:i.length===0?"No tags defined.":"No tags match filter."}):m.jsx("div",{className:"space-y-1",children:h.map(S=>{const E=s(S.id);return m.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:m.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[m.jsx(zw,{id:`tag-activate-${S.id}`,checked:e.has(S.id),onCheckedChange:C=>y(S.id,!!C),className:"mt-0.5"}),m.jsxs(Gt,{htmlFor:`tag-activate-${S.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[m.jsx("span",{className:"block font-medium",children:S.name}),S.description&&m.jsx("span",{className:"block text-xs text-muted-foreground",children:S.description}),E.length>0&&m.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",E.map(C=>C.name).join(", ")]})]})]})},S.id)})})})]}),w=()=>m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"relative",children:[m.jsx(Wl,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),m.jsx(jn,{type:"search",placeholder:"Filter rules...",value:u,onChange:S=>d(S.target.value),className:"pl-8 h-9"})]}),m.jsx(rc,{className:"h-64 border rounded-md p-2 bg-background/50",children:p.length===0?m.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:a.length===0?"No rules defined.":"No rules match filter."}):m.jsx("div",{className:"space-y-1",children:p.map(S=>m.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:m.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[m.jsx(zw,{id:`rule-activate-${S.id}`,checked:t.has(S.id),onCheckedChange:E=>v(S.id,!!E),className:"mt-0.5"}),m.jsxs(Gt,{htmlFor:`rule-activate-${S.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[m.jsx("span",{className:"block font-medium",children:S.name}),m.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",S.type]}),m.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",S.content]})]})]})},S.id))})})]}),x=[{value:"tags",label:"Activate Tags",content:b()},{value:"rules",label:"Activate Rules",content:w()}];return m.jsx("div",{className:"p-0 h-[28rem] max-w-lg",children:m.jsx(zu,{tabs:x,defaultValue:"tags"})})};let Cd=new Set,kd=new Set,Xm=()=>{};const s_e=()=>{const[e,t]=T.useState({activeTagIds:Cd,activeRuleIds:kd}),[n,r]=T.useState(!1),[a,i]=T.useState(()=>qn.getState().status==="streaming"),s=ac(h=>h.rules.length>0||h.tags.length>0);T.useEffect(()=>(Xm=h=>{const p=h({activeTagIds:Cd,activeRuleIds:kd});Cd=p.activeTagIds,kd=p.activeRuleIds,t(p)},t({activeTagIds:Cd,activeRuleIds:kd}),()=>{Xm=()=>{}}),[]),T.useEffect(()=>{const h=p=>{i(p.status==="streaming")};return Ct.on(St.INTERACTION_STATUS_CHANGED,h),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,h)}},[]);const o=T.useCallback((h,p)=>{Xm(y=>{const v=new Set(y.activeTagIds);return p?v.add(h):v.delete(h),{...y,activeTagIds:v}})},[]),l=T.useCallback((h,p)=>{Xm(y=>{const v=new Set(y.activeRuleIds);return p?v.add(h):v.delete(h),{...y,activeRuleIds:v}})},[]),u=e.activeTagIds.size>0||e.activeRuleIds.size>0,d=a||!s;return s?m.jsxs(Lu,{open:n,onOpenChange:r,children:[m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx($u,{asChild:!0,children:m.jsx(Dt,{variant:u?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d,"aria-label":"Configure Rules & Tags for Next Turn",children:m.jsx(U2,{className:"h-4 w-4"})})})}),m.jsx(Qn,{side:"top",children:u?`Rules/Tags Active (${e.activeTagIds.size} tags, ${e.activeRuleIds.size} rules)`:"Activate Rules/Tags (Next Turn)"})]})}),m.jsx(Bu,{className:"w-auto p-0",align:"start",children:m.jsx(i_e,{activeTagIds:e.activeTagIds,activeRuleIds:e.activeRuleIds,onToggleTag:o,onToggleRule:l})})]}):null};function o_e(){const e=Rr.getState().registerPromptControl;Cd=new Set,kd=new Set,e({id:"core-rules-tags",status:()=>ac.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(s_e),getMetadata:()=>{const t=Array.from(Cd),n=Array.from(kd);if(t.length>0||n.length>0)return{activeTagIds:t,activeRuleIds:n}},clearOnSubmit:()=>{Cd=new Set,kd=new Set,Xm(()=>({activeTagIds:new Set,activeRuleIds:new Set}))},show:()=>{const t=ac.getState();return t.rules.length>0||t.tags.length>0}}),console.log("[Function] Registered Core Rules & Tags Control")}const l_e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>qn.getState().status==="streaming"),[s,o]=T.useState(!1),l=lr(d=>d.autoTitleEnabled);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=p=>{i(p.status==="streaming")},h=()=>{const p=qn.getState(),y=p.currentConversationId!==null&&p.interactions.filter(v=>v.conversationId===p.currentConversationId).length===0;o(y),!y&&n&&u()};return h(),Ct.on(St.INTERACTION_STATUS_CHANGED,d),Ct.on(St.CONTEXT_CHANGED,h),Ct.on(St.INTERACTION_COMPLETED,h),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,d),Ct.off(St.CONTEXT_CHANGED,h),Ct.off(St.INTERACTION_COMPLETED,h)}},[n]);const u=()=>{const d=!n;r(d),t(d)};return!l||!s?null:m.jsx(Gn,{delayDuration:100,children:m.jsxs(Xn,{children:[m.jsx(Jn,{asChild:!0,children:m.jsx(Dt,{variant:n?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":n?"Disable Auto-Title for this Chat":"Enable Auto-Title for this Chat",children:m.jsx(Qq,{className:At("h-4 w-4",n?"text-primary":"text-muted-foreground")})})}),m.jsx(Qn,{side:"top",children:n?"Auto-Title Enabled (Click to Disable)":"Auto-Title Disabled (Click to Enable)"})]})})};let qm=!1;function c_e(){const e=Rr.getState().registerPromptControl;qm=!1;const t=n=>{qm=n};e({id:"core-auto-title",status:()=>"ready",triggerRenderer:()=>gt.createElement(l_e,{initialEnabled:qm,onToggle:t}),getMetadata:()=>qm?{autoTitleEnabledForTurn:!0}:void 0,clearOnSubmit:()=>{qm=!1}}),console.log("[Function] Registered Core Auto-Title Control")}const u_e=[m0e,Bwe,$we,V1e,W1e,c_e,e_e,n_e,a_e,Wwe,x1e,o_e,Z1e,$1e,Hwe,J1e,S1e,R1e,P1e];function d_e(){return m.jsxs(d0e,{children:[m.jsx(u0e,{}),m.jsx(c0e,{}),m.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:m.jsx("main",{className:"flex-grow overflow-hidden",children:m.jsx(s0e,{controls:u_e})})})]})}jV();function f_e({children:e}){const t=lr(n=>n.theme);return T.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),m.jsx(m.Fragment,{children:e})}RU.createRoot(document.getElementById("root")).render(m.jsx(gt.StrictMode,{children:m.jsx(f_e,{children:m.jsx(d_e,{})})}));
