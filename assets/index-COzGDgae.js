var Y7=Object.defineProperty;var X7=(e,t,n)=>t in e?Y7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ha=(e,t,n)=>X7(e,typeof t!="symbol"?t+"":t,n);function J7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cx={exports:{}},Xp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xR;function Q7(){if(xR)return Xp;xR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Xp.Fragment=t,Xp.jsx=n,Xp.jsxs=n,Xp}var SR;function ez(){return SR||(SR=1,cx.exports=Q7()),cx.exports}var y=ez(),dx={exports:{}};function tz(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dO={exports:{}},Jr=dO.exports={},Es,Cs;function k2(){throw new Error("setTimeout has not been defined")}function A2(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Es=setTimeout:Es=k2}catch{Es=k2}try{typeof clearTimeout=="function"?Cs=clearTimeout:Cs=A2}catch{Cs=A2}})();function fO(e){if(Es===setTimeout)return setTimeout(e,0);if((Es===k2||!Es)&&setTimeout)return Es=setTimeout,setTimeout(e,0);try{return Es(e,0)}catch{try{return Es.call(null,e,0)}catch{return Es.call(this,e,0)}}}function nz(e){if(Cs===clearTimeout)return clearTimeout(e);if((Cs===A2||!Cs)&&clearTimeout)return Cs=clearTimeout,clearTimeout(e);try{return Cs(e)}catch{try{return Cs.call(null,e)}catch{return Cs.call(this,e)}}}var Al=[],zf=!1,rd,fb=-1;function rz(){!zf||!rd||(zf=!1,rd.length?Al=rd.concat(Al):fb=-1,Al.length&&hO())}function hO(){if(!zf){var e=fO(rz);zf=!0;for(var t=Al.length;t;){for(rd=Al,Al=[];++fb<t;)rd&&rd[fb].run();fb=-1,t=Al.length}rd=null,zf=!1,nz(e)}}Jr.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Al.push(new pO(e,t)),Al.length===1&&!zf&&fO(hO)};function pO(e,t){this.fun=e,this.array=t}pO.prototype.run=function(){this.fun.apply(null,this.array)};Jr.title="browser";Jr.browser=!0;Jr.env={};Jr.argv=[];Jr.version="";Jr.versions={};function zl(){}Jr.on=zl;Jr.addListener=zl;Jr.once=zl;Jr.off=zl;Jr.removeListener=zl;Jr.removeAllListeners=zl;Jr.emit=zl;Jr.prependListener=zl;Jr.prependOnceListener=zl;Jr.listeners=function(e){return[]};Jr.binding=function(e){throw new Error("process.binding is not supported")};Jr.cwd=function(){return"/"};Jr.chdir=function(e){throw new Error("process.chdir is not supported")};Jr.umask=function(){return 0};var az=dO.exports;const Vr=tz(az);var Rn={},ER;function iz(){if(ER)return Rn;ER=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function m(V){return V===null||typeof V!="object"?null:(V=h&&V[h]||V["@@iterator"],typeof V=="function"?V:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,v={};function _(V,X,Y){this.props=V,this.context=X,this.refs=v,this.updater=Y||g}_.prototype.isReactComponent={},_.prototype.setState=function(V,X){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,X,"setState")},_.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function x(){}x.prototype=_.prototype;function S(V,X,Y){this.props=V,this.context=X,this.refs=v,this.updater=Y||g}var E=S.prototype=new x;E.constructor=S,w(E,_.prototype),E.isPureReactComponent=!0;var C=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function I(V,X,Y,ne,be,Ee){return Y=Ee.ref,{$$typeof:e,type:V,key:X,ref:Y!==void 0?Y:null,props:Ee}}function D(V,X){return I(V.type,X,void 0,void 0,void 0,V.props)}function B(V){return typeof V=="object"&&V!==null&&V.$$typeof===e}function K(V){var X={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Y){return X[Y]})}var Q=/\/+/g;function F(V,X){return typeof V=="object"&&V!==null&&V.key!=null?K(""+V.key):X.toString(36)}function W(){}function U(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(W,W):(V.status="pending",V.then(function(X){V.status==="pending"&&(V.status="fulfilled",V.value=X)},function(X){V.status==="pending"&&(V.status="rejected",V.reason=X)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function he(V,X,Y,ne,be){var Ee=typeof V;(Ee==="undefined"||Ee==="boolean")&&(V=null);var De=!1;if(V===null)De=!0;else switch(Ee){case"bigint":case"string":case"number":De=!0;break;case"object":switch(V.$$typeof){case e:case t:De=!0;break;case f:return De=V._init,he(De(V._payload),X,Y,ne,be)}}if(De)return be=be(V),De=ne===""?"."+F(V,0):ne,C(be)?(Y="",De!=null&&(Y=De.replace(Q,"$&/")+"/"),he(be,X,Y,"",function(Te){return Te})):be!=null&&(B(be)&&(be=D(be,Y+(be.key==null||V&&V.key===be.key?"":(""+be.key).replace(Q,"$&/")+"/")+De)),X.push(be)),1;De=0;var Pe=ne===""?".":ne+":";if(C(V))for(var Re=0;Re<V.length;Re++)ne=V[Re],Ee=Pe+F(ne,Re),De+=he(ne,X,Y,Ee,be);else if(Re=m(V),typeof Re=="function")for(V=Re.call(V),Re=0;!(ne=V.next()).done;)ne=ne.value,Ee=Pe+F(ne,Re++),De+=he(ne,X,Y,Ee,be);else if(Ee==="object"){if(typeof V.then=="function")return he(U(V),X,Y,ne,be);throw X=String(V),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return De}function ae(V,X,Y){if(V==null)return V;var ne=[],be=0;return he(V,ne,"","",function(Ee){return X.call(Y,Ee,be++)}),ne}function re(V){if(V._status===-1){var X=V._result;X=X(),X.then(function(Y){(V._status===0||V._status===-1)&&(V._status=1,V._result=Y)},function(Y){(V._status===0||V._status===-1)&&(V._status=2,V._result=Y)}),V._status===-1&&(V._status=0,V._result=X)}if(V._status===1)return V._result.default;throw V._result}var ee=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(X))return}else if(typeof Vr=="object"&&typeof Vr.emit=="function"){Vr.emit("uncaughtException",V);return}console.error(V)};function se(){}return Rn.Children={map:ae,forEach:function(V,X,Y){ae(V,function(){X.apply(this,arguments)},Y)},count:function(V){var X=0;return ae(V,function(){X++}),X},toArray:function(V){return ae(V,function(X){return X})||[]},only:function(V){if(!B(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Rn.Component=_,Rn.Fragment=n,Rn.Profiler=a,Rn.PureComponent=S,Rn.StrictMode=r,Rn.Suspense=u,Rn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Rn.__COMPILER_RUNTIME={__proto__:null,c:function(V){return A.H.useMemoCache(V)}},Rn.cache=function(V){return function(){return V.apply(null,arguments)}},Rn.cloneElement=function(V,X,Y){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ne=w({},V.props),be=V.key,Ee=void 0;if(X!=null)for(De in X.ref!==void 0&&(Ee=void 0),X.key!==void 0&&(be=""+X.key),X)!O.call(X,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&X.ref===void 0||(ne[De]=X[De]);var De=arguments.length-2;if(De===1)ne.children=Y;else if(1<De){for(var Pe=Array(De),Re=0;Re<De;Re++)Pe[Re]=arguments[Re+2];ne.children=Pe}return I(V.type,be,void 0,void 0,Ee,ne)},Rn.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:i,_context:V},V},Rn.createElement=function(V,X,Y){var ne,be={},Ee=null;if(X!=null)for(ne in X.key!==void 0&&(Ee=""+X.key),X)O.call(X,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(be[ne]=X[ne]);var De=arguments.length-2;if(De===1)be.children=Y;else if(1<De){for(var Pe=Array(De),Re=0;Re<De;Re++)Pe[Re]=arguments[Re+2];be.children=Pe}if(V&&V.defaultProps)for(ne in De=V.defaultProps,De)be[ne]===void 0&&(be[ne]=De[ne]);return I(V,Ee,void 0,void 0,null,be)},Rn.createRef=function(){return{current:null}},Rn.forwardRef=function(V){return{$$typeof:s,render:V}},Rn.isValidElement=B,Rn.lazy=function(V){return{$$typeof:f,_payload:{_status:-1,_result:V},_init:re}},Rn.memo=function(V,X){return{$$typeof:c,type:V,compare:X===void 0?null:X}},Rn.startTransition=function(V){var X=A.T,Y={};A.T=Y;try{var ne=V(),be=A.S;be!==null&&be(Y,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(se,ee)}catch(Ee){ee(Ee)}finally{A.T=X}},Rn.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Rn.use=function(V){return A.H.use(V)},Rn.useActionState=function(V,X,Y){return A.H.useActionState(V,X,Y)},Rn.useCallback=function(V,X){return A.H.useCallback(V,X)},Rn.useContext=function(V){return A.H.useContext(V)},Rn.useDebugValue=function(){},Rn.useDeferredValue=function(V,X){return A.H.useDeferredValue(V,X)},Rn.useEffect=function(V,X,Y){var ne=A.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(V,X)},Rn.useId=function(){return A.H.useId()},Rn.useImperativeHandle=function(V,X,Y){return A.H.useImperativeHandle(V,X,Y)},Rn.useInsertionEffect=function(V,X){return A.H.useInsertionEffect(V,X)},Rn.useLayoutEffect=function(V,X){return A.H.useLayoutEffect(V,X)},Rn.useMemo=function(V,X){return A.H.useMemo(V,X)},Rn.useOptimistic=function(V,X){return A.H.useOptimistic(V,X)},Rn.useReducer=function(V,X,Y){return A.H.useReducer(V,X,Y)},Rn.useRef=function(V){return A.H.useRef(V)},Rn.useState=function(V){return A.H.useState(V)},Rn.useSyncExternalStore=function(V,X,Y){return A.H.useSyncExternalStore(V,X,Y)},Rn.useTransition=function(){return A.H.useTransition()},Rn.version="19.1.0",Rn}var CR;function XE(){return CR||(CR=1,dx.exports=iz()),dx.exports}var R=XE();const vt=Qa(R),mO=J7({__proto__:null,default:vt},[R]);var fx={exports:{}},Jp={},hx={exports:{}},px={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kR;function oz(){return kR||(kR=1,function(e){function t(ae,re){var ee=ae.length;ae.push(re);e:for(;0<ee;){var se=ee-1>>>1,V=ae[se];if(0<a(V,re))ae[se]=re,ae[ee]=V,ee=se;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var re=ae[0],ee=ae.pop();if(ee!==re){ae[0]=ee;e:for(var se=0,V=ae.length,X=V>>>1;se<X;){var Y=2*(se+1)-1,ne=ae[Y],be=Y+1,Ee=ae[be];if(0>a(ne,ee))be<V&&0>a(Ee,ne)?(ae[se]=Ee,ae[be]=ee,se=be):(ae[se]=ne,ae[Y]=ee,se=Y);else if(be<V&&0>a(Ee,ee))ae[se]=Ee,ae[be]=ee,se=be;else break e}}return re}function a(ae,re){var ee=ae.sortIndex-re.sortIndex;return ee!==0?ee:ae.id-re.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var u=[],c=[],f=1,h=null,m=3,g=!1,w=!1,v=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ae){for(var re=n(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=ae)r(c),re.sortIndex=re.expirationTime,t(u,re);else break;re=n(c)}}function A(ae){if(v=!1,C(ae),!w)if(n(u)!==null)w=!0,O||(O=!0,F());else{var re=n(c);re!==null&&he(A,re.startTime-ae)}}var O=!1,I=-1,D=5,B=-1;function K(){return _?!0:!(e.unstable_now()-B<D)}function Q(){if(_=!1,O){var ae=e.unstable_now();B=ae;var re=!0;try{e:{w=!1,v&&(v=!1,S(I),I=-1),g=!0;var ee=m;try{t:{for(C(ae),h=n(u);h!==null&&!(h.expirationTime>ae&&K());){var se=h.callback;if(typeof se=="function"){h.callback=null,m=h.priorityLevel;var V=se(h.expirationTime<=ae);if(ae=e.unstable_now(),typeof V=="function"){h.callback=V,C(ae),re=!0;break t}h===n(u)&&r(u),C(ae)}else r(u);h=n(u)}if(h!==null)re=!0;else{var X=n(c);X!==null&&he(A,X.startTime-ae),re=!1}}break e}finally{h=null,m=ee,g=!1}re=void 0}}finally{re?F():O=!1}}}var F;if(typeof E=="function")F=function(){E(Q)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,U=W.port2;W.port1.onmessage=Q,F=function(){U.postMessage(null)}}else F=function(){x(Q,0)};function he(ae,re){I=x(function(){ae(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(ae){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var ee=m;m=re;try{return ae()}finally{m=ee}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(ae,re){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ee=m;m=ae;try{return re()}finally{m=ee}},e.unstable_scheduleCallback=function(ae,re,ee){var se=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?se+ee:se):ee=se,ae){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ee+V,ae={id:f++,callback:re,priorityLevel:ae,startTime:ee,expirationTime:V,sortIndex:-1},ee>se?(ae.sortIndex=ee,t(c,ae),n(u)===null&&ae===n(c)&&(v?(S(I),I=-1):v=!0,he(A,ee-se))):(ae.sortIndex=V,t(u,ae),w||g||(w=!0,O||(O=!0,F()))),ae},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(ae){var re=m;return function(){var ee=m;m=re;try{return ae.apply(this,arguments)}finally{m=ee}}}}(px)),px}var AR;function sz(){return AR||(AR=1,hx.exports=oz()),hx.exports}var mx={exports:{}},Va={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR;function lz(){if(TR)return Va;TR=1;var e=XE();function t(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:u,containerInfo:c,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Va.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Va.createPortal=function(u,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(u,c,null,f)},Va.flushSync=function(u){var c=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=c,r.p=f,r.d.f()}},Va.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},Va.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Va.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):f==="script"&&r.d.X(u,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Va.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=s(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},Va.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin);r.d.L(u,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Va.preloadModule=function(u,c){if(typeof u=="string")if(c){var f=s(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},Va.requestFormReset=function(u){r.d.r(u)},Va.unstable_batchedUpdates=function(u,c){return u(c)},Va.useFormState=function(u,c,f){return o.H.useFormState(u,c,f)},Va.useFormStatus=function(){return o.H.useHostTransitionStatus()},Va.version="19.1.0",Va}var RR;function gO(){if(RR)return mx.exports;RR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mx.exports=lz(),mx.exports}var NR;function uz(){if(NR)return Jp;NR=1;var e=sz(),t=XE(),n=gO();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function s(l){if(i(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,b=d;;){var T=p.return;if(T===null)break;var P=T.alternate;if(P===null){if(b=T.return,b!==null){p=b;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===p)return s(T),l;if(P===b)return s(T),d;P=P.sibling}throw Error(r(188))}if(p.return!==b.return)p=T,b=P;else{for(var oe=!1,Se=T.child;Se;){if(Se===p){oe=!0,p=T,b=P;break}if(Se===b){oe=!0,b=T,p=P;break}Se=Se.sibling}if(!oe){for(Se=P.child;Se;){if(Se===p){oe=!0,p=P,b=T;break}if(Se===b){oe=!0,b=P,p=T;break}Se=Se.sibling}if(!oe)throw Error(r(189))}}if(p.alternate!==b)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function c(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=c(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function F(l){return l===null||typeof l!="object"?null:(l=Q&&l[Q]||l["@@iterator"],typeof l=="function"?l:null)}var W=Symbol.for("react.client.reference");function U(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===W?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case w:return"Fragment";case _:return"Profiler";case v:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList";case B:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case E:return(l.displayName||"Context")+".Provider";case S:return(l._context.displayName||"Context")+".Consumer";case C:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case I:return d=l.displayName||null,d!==null?d:U(l.type)||"Memo";case D:d=l._payload,l=l._init;try{return U(l(d))}catch{}}return null}var he=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},se=[],V=-1;function X(l){return{current:l}}function Y(l){0>V||(l.current=se[V],se[V]=null,V--)}function ne(l,d){V++,se[V]=l.current,l.current=d}var be=X(null),Ee=X(null),De=X(null),Pe=X(null);function Re(l,d){switch(ne(De,d),ne(Ee,l),ne(be,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?Y3(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=Y3(d),l=X3(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Y(be),ne(be,l)}function Te(){Y(be),Y(Ee),Y(De)}function He(l){l.memoizedState!==null&&ne(Pe,l);var d=be.current,p=X3(d,l.type);d!==p&&(ne(Ee,l),ne(be,p))}function it(l){Ee.current===l&&(Y(be),Y(Ee)),Pe.current===l&&(Y(Pe),Gp._currentValue=ee)}var Ie=Object.prototype.hasOwnProperty,Ae=e.unstable_scheduleCallback,z=e.unstable_cancelCallback,ke=e.unstable_shouldYield,Ne=e.unstable_requestPaint,ce=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,J=e.unstable_ImmediatePriority,_e=e.unstable_UserBlockingPriority,Le=e.unstable_NormalPriority,xe=e.unstable_LowPriority,Ve=e.unstable_IdlePriority,xt=e.log,ht=e.unstable_setDisableYieldValue,Et=null,Lt=null;function Tt(l){if(typeof xt=="function"&&ht(l),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(Et,l)}catch{}}var zt=Math.clz32?Math.clz32:H,ge=Math.log,N=Math.LN2;function H(l){return l>>>=0,l===0?32:31-(ge(l)/N|0)|0}var fe=256,Oe=4194304;function ve(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ce(l,d,p){var b=l.pendingLanes;if(b===0)return 0;var T=0,P=l.suspendedLanes,oe=l.pingedLanes;l=l.warmLanes;var Se=b&134217727;return Se!==0?(b=Se&~P,b!==0?T=ve(b):(oe&=Se,oe!==0?T=ve(oe):p||(p=Se&~l,p!==0&&(T=ve(p))))):(Se=b&~P,Se!==0?T=ve(Se):oe!==0?T=ve(oe):p||(p=b&~l,p!==0&&(T=ve(p)))),T===0?0:d!==0&&d!==T&&(d&P)===0&&(P=T&-T,p=d&-d,P>=p||P===32&&(p&4194048)!==0)?d:T}function le(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function ct(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var l=fe;return fe<<=1,(fe&4194048)===0&&(fe=256),l}function M(){var l=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),l}function Be(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function et(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function me(l,d,p,b,T,P){var oe=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var Se=l.entanglements,ze=l.expirationTimes,ut=l.hiddenUpdates;for(p=oe&~p;0<p;){var _t=31-zt(p),kt=1<<_t;Se[_t]=0,ze[_t]=-1;var pt=ut[_t];if(pt!==null)for(ut[_t]=null,_t=0;_t<pt.length;_t++){var mt=pt[_t];mt!==null&&(mt.lane&=-536870913)}p&=~kt}b!==0&&je(l,b,0),P!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=P&~(oe&~d))}function je(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-zt(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|p&4194090}function Ke(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var b=31-zt(p),T=1<<b;T&d|l[b]&d&&(l[b]|=d),p&=~T}}function Ct(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ye(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function q(){var l=re.p;return l!==0?l:(l=window.event,l===void 0?32:gR(l.type))}function $(l,d){var p=re.p;try{return re.p=l,d()}finally{re.p=p}}var G=Math.random().toString(36).slice(2),pe="__reactFiber$"+G,de="__reactProps$"+G,Fe="__reactContainer$"+G,ot="__reactEvents$"+G,jt="__reactListeners$"+G,un="__reactHandles$"+G,Bt="__reactResources$"+G,Vt="__reactMarker$"+G;function Xt(l){delete l[pe],delete l[de],delete l[ot],delete l[jt],delete l[un]}function Tn(l){var d=l[pe];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Fe]||p[pe]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=tR(l);l!==null;){if(p=l[pe])return p;l=tR(l)}return d}l=p,p=l.parentNode}return null}function Bn(l){if(l=l[pe]||l[Fe]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function fr(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function hr(l){var d=l[Bt];return d||(d=l[Bt]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Dn(l){l[Vt]=!0}var ti=new Set,is={};function os(l,d){ss(l,d),ss(l+"Capture",d)}function ss(l,d){for(is[l]=d,l=0;l<d.length;l++)ti.add(d[l])}var $r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ls={},Yi={};function xg(l){return Ie.call(Yi,l)?!0:Ie.call(ls,l)?!1:$r.test(l)?Yi[l]=!0:(ls[l]=!0,!1)}function ko(l,d,p){if(xg(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Gs(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Oi(l,d,p,b){if(b===null)l.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+b)}}var Ec,us;function Ws(l){if(Ec===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);Ec=d&&d[1]||"",us=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ec+l+us}var Kl=!1;function Od(l,d){if(!l||Kl)return"";Kl=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var kt=function(){throw Error()};if(Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(mt){var pt=mt}Reflect.construct(l,[],kt)}else{try{kt.call()}catch(mt){pt=mt}l.call(kt.prototype)}}else{try{throw Error()}catch(mt){pt=mt}(kt=l())&&typeof kt.catch=="function"&&kt.catch(function(){})}}catch(mt){if(mt&&pt&&typeof mt.stack=="string")return[mt.stack,pt.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=b.DetermineComponentFrameRoot(),oe=P[0],Se=P[1];if(oe&&Se){var ze=oe.split(`
`),ut=Se.split(`
`);for(T=b=0;b<ze.length&&!ze[b].includes("DetermineComponentFrameRoot");)b++;for(;T<ut.length&&!ut[T].includes("DetermineComponentFrameRoot");)T++;if(b===ze.length||T===ut.length)for(b=ze.length-1,T=ut.length-1;1<=b&&0<=T&&ze[b]!==ut[T];)T--;for(;1<=b&&0<=T;b--,T--)if(ze[b]!==ut[T]){if(b!==1||T!==1)do if(b--,T--,0>T||ze[b]!==ut[T]){var _t=`
`+ze[b].replace(" at new "," at ");return l.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",l.displayName)),_t}while(1<=b&&0<=T);break}}}finally{Kl=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Ws(p):""}function zn(l){switch(l.tag){case 26:case 27:case 5:return Ws(l.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 15:return Od(l.type,!1);case 11:return Od(l.type.render,!1);case 1:return Od(l.type,!0);case 31:return Ws("Activity");default:return""}}function Kh(l){try{var d="";do d+=zn(l),l=l.return;while(l);return d}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ni(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Zh(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function _r(l){var d=Zh(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),b=""+l[d];if(!l.hasOwnProperty(d)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var T=p.get,P=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(oe){b=""+oe,P.call(this,oe)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return b},setValue:function(oe){b=""+oe},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function cs(l){l._valueTracker||(l._valueTracker=_r(l))}function Zl(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),b="";return l&&(b=Zh(l)?l.checked?"true":"false":l.value),l=b,l!==p?(d.setValue(l),!0):!1}function Ao(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Yh=/[\n"\\]/g;function Ba(l){return l.replace(Yh,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Yl(l,d,p,b,T,P,oe,Se){l.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?l.type=oe:l.removeAttribute("type"),d!=null?oe==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+ni(d)):l.value!==""+ni(d)&&(l.value=""+ni(d)):oe!=="submit"&&oe!=="reset"||l.removeAttribute("value"),d!=null?Xl(l,oe,ni(d)):p!=null?Xl(l,oe,ni(p)):b!=null&&l.removeAttribute("value"),T==null&&P!=null&&(l.defaultChecked=!!P),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),Se!=null&&typeof Se!="function"&&typeof Se!="symbol"&&typeof Se!="boolean"?l.name=""+ni(Se):l.removeAttribute("name")}function Xh(l,d,p,b,T,P,oe,Se){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(l.type=P),d!=null||p!=null){if(!(P!=="submit"&&P!=="reset"||d!=null))return;p=p!=null?""+ni(p):"",d=d!=null?""+ni(d):p,Se||d===l.value||(l.value=d),l.defaultValue=d}b=b??T,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=Se?l.checked:!!b,l.defaultChecked=!!b,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(l.name=oe)}function Xl(l,d,p){d==="number"&&Ao(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Ks(l,d,p,b){if(l=l.options,d){d={};for(var T=0;T<p.length;T++)d["$"+p[T]]=!0;for(p=0;p<l.length;p++)T=d.hasOwnProperty("$"+l[p].value),l[p].selected!==T&&(l[p].selected=T),T&&b&&(l[p].defaultSelected=!0)}else{for(p=""+ni(p),d=null,T=0;T<l.length;T++){if(l[T].value===p){l[T].selected=!0,b&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function Jl(l,d,p){if(d!=null&&(d=""+ni(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+ni(p):""}function Jh(l,d,p,b){if(d==null){if(b!=null){if(p!=null)throw Error(r(92));if(he(b)){if(1<b.length)throw Error(r(93));b=b[0]}p=b}p==null&&(p=""),d=p}p=ni(d),l.defaultValue=p,b=l.textContent,b===p&&b!==""&&b!==null&&(l.value=b)}function Ql(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var Wn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dd(l,d,p){var b=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,p):typeof p!="number"||p===0||Wn.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function Sg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var b in p)!p.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var T in d)b=d[T],d.hasOwnProperty(T)&&p[T]!==b&&Dd(l,T,b)}else for(var P in d)d.hasOwnProperty(P)&&Dd(l,P,d[P])}function Qh(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ri=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zs(l){return eu.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Xi=null;function jd(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ys=null,Nr=null;function Di(l){var d=Bn(l);if(d&&(l=d.stateNode)){var p=l[de]||null;e:switch(l=d.stateNode,d.type){case"input":if(Yl(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ba(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var b=p[d];if(b!==l&&b.form===l.form){var T=b[de]||null;if(!T)throw Error(r(90));Yl(b,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<p.length;d++)b=p[d],b.form===l.form&&Zl(b)}break e;case"textarea":Jl(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Ks(l,!!p.multiple,d,!1)}}}var Xs=!1;function tu(l,d,p){if(Xs)return l(d,p);Xs=!0;try{var b=l(d);return b}finally{if(Xs=!1,(Ys!==null||Nr!==null)&&(dy(),Ys&&(d=Ys,l=Nr,Nr=Ys=null,Di(d),l)))for(d=0;d<l.length;d++)Di(l[d])}}function Js(l,d){var p=l.stateNode;if(p===null)return null;var b=p[de]||null;if(b===null)return null;p=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ep=!1;if(ya)try{var za={};Object.defineProperty(za,"passive",{get:function(){ep=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{ep=!1}var Ji=null,Md=null,nu=null;function ru(){if(nu)return nu;var l,d=Md,p=d.length,b,T="value"in Ji?Ji.value:Ji.textContent,P=T.length;for(l=0;l<p&&d[l]===T[l];l++);var oe=p-l;for(b=1;b<=oe&&d[p-b]===T[P-b];b++);return nu=T.slice(l,1<b?1-b:void 0)}function au(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Cc(){return!0}function Eg(){return!1}function Qr(l){function d(p,b,T,P,oe){this._reactName=p,this._targetInst=T,this.type=b,this.nativeEvent=P,this.target=oe,this.currentTarget=null;for(var Se in l)l.hasOwnProperty(Se)&&(p=l[Se],this[Se]=p?p(P):P[Se]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Cc:Eg,this.isPropagationStopped=Eg,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Cc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Cc)},persist:function(){},isPersistent:Cc}),d}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pd=Qr(Qs),ds=f({},Qs,{view:0,detail:0}),Fd=Qr(ds),kc,tp,Ac,Ld=f({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ac&&(Ac&&l.type==="mousemove"?(kc=l.screenX-Ac.screenX,tp=l.screenY-Ac.screenY):tp=kc=0,Ac=l),kc)},movementY:function(l){return"movementY"in l?l.movementY:tp}}),$d=Qr(Ld),np=f({},Ld,{dataTransfer:0}),Cg=Qr(np),Bd=f({},ds,{relatedTarget:0}),iu=Qr(Bd),zd=f({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),kg=Qr(zd),E1=f({},Qs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Ud=Qr(E1),rp=f({},Qs,{data:0}),qd=Qr(rp),ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ip={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ba={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tc(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=ba[l])?!!d[l]:!1}function el(){return Tc}var Ag=f({},ds,{key:function(l){if(l.key){var d=ap[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=au(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ip[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(l){return l.type==="keypress"?au(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?au(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Hd=Qr(Ag),Tg=f({},Ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),op=Qr(Tg),Vd=f({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),sp=Qr(Vd),tl=f({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),lp=Qr(tl),up=f({},Ld,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Gd=Qr(up),cp=f({},Qs,{newState:0,oldState:0}),Rg=Qr(cp),C1=[9,13,27,32],Rc=ya&&"CompositionEvent"in window,fs=null;ya&&"documentMode"in document&&(fs=document.documentMode);var k1=ya&&"TextEvent"in window&&!fs,Wd=ya&&(!Rc||fs&&8<fs&&11>=fs),Kd=" ",Ng=!1;function dp(l,d){switch(l){case"keyup":return C1.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ig(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var nl=!1;function Og(l,d){switch(l){case"compositionend":return Ig(d);case"keypress":return d.which!==32?null:(Ng=!0,Kd);case"textInput":return l=d.data,l===Kd&&Ng?null:l;default:return null}}function A1(l,d){if(nl)return l==="compositionend"||!Rc&&dp(l,d)?(l=ru(),nu=Md=Ji=null,nl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Wd&&d.locale!=="ko"?null:d.data;default:return null}}var Dg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zd(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!Dg[l.type]:d==="textarea"}function fp(l,d,p,b){Ys?Nr?Nr.push(b):Nr=[b]:Ys=b,d=yy(d,"onChange"),0<d.length&&(p=new Pd("onChange","change",null,p,b),l.push({event:p,listeners:d}))}var ou=null,Nc=null;function T1(l){V3(l,0)}function Yd(l){var d=fr(l);if(Zl(d))return l}function Ic(l,d){if(l==="change")return d}var Qi=!1;if(ya){var Ir;if(ya){var su="oninput"in document;if(!su){var ai=document.createElement("div");ai.setAttribute("oninput","return;"),su=typeof ai.oninput=="function"}Ir=su}else Ir=!1;Qi=Ir&&(!document.documentMode||9<document.documentMode)}function jg(){ou&&(ou.detachEvent("onpropertychange",Xd),Nc=ou=null)}function Xd(l){if(l.propertyName==="value"&&Yd(Nc)){var d=[];fp(d,Nc,l,jd(l)),tu(T1,d)}}function Mg(l,d,p){l==="focusin"?(jg(),ou=d,Nc=p,ou.attachEvent("onpropertychange",Xd)):l==="focusout"&&jg()}function rl(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Yd(Nc)}function hp(l,d){if(l==="click")return Yd(d)}function lu(l,d){if(l==="input"||l==="change")return Yd(d)}function hs(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ua=typeof Object.is=="function"?Object.is:hs;function k(l,d){if(Ua(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),b=Object.keys(d);if(p.length!==b.length)return!1;for(b=0;b<p.length;b++){var T=p[b];if(!Ie.call(d,T)||!Ua(l[T],d[T]))return!1}return!0}function j(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Z(l,d){var p=j(l);l=0;for(var b;p;){if(p.nodeType===3){if(b=l+p.textContent.length,l<=d&&b>=d)return{node:p,offset:d-l};l=b}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=j(p)}}function te(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?te(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function ue(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Ao(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=Ao(l.document)}return d}function we(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Me=ya&&"documentMode"in document&&11>=document.documentMode,$e=null,We=null,Ye=null,tt=!1;function qe(l,d,p){var b=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;tt||$e==null||$e!==Ao(b)||(b=$e,"selectionStart"in b&&we(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Ye&&k(Ye,b)||(Ye=b,b=yy(We,"onSelect"),0<b.length&&(d=new Pd("onSelect","select",null,d,p),l.push({event:d,listeners:b}),d.target=$e)))}function rt(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Ge={animationend:rt("Animation","AnimationEnd"),animationiteration:rt("Animation","AnimationIteration"),animationstart:rt("Animation","AnimationStart"),transitionrun:rt("Transition","TransitionRun"),transitionstart:rt("Transition","TransitionStart"),transitioncancel:rt("Transition","TransitionCancel"),transitionend:rt("Transition","TransitionEnd")},Qe={},at={};ya&&(at=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Xe(l){if(Qe[l])return Qe[l];if(!Ge[l])return l;var d=Ge[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in at)return Qe[l]=d[p];return l}var ft=Xe("animationend"),gt=Xe("animationiteration"),bt=Xe("animationstart"),wt=Xe("transitionrun"),Mt=Xe("transitionstart"),qt=Xe("transitioncancel"),Nt=Xe("transitionend"),$t=new Map,Ht="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ht.push("scrollEnd");function It(l,d){$t.set(l,d),os(d,[l])}var Zt=new WeakMap;function cn(l,d){if(typeof l=="object"&&l!==null){var p=Zt.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Kh(d)},Zt.set(l,d),d)}return{value:l,source:d,stack:Kh(d)}}var dn=[],Sn=0,Oa=0;function yn(){for(var l=Sn,d=Oa=Sn=0;d<l;){var p=dn[d];dn[d++]=null;var b=dn[d];dn[d++]=null;var T=dn[d];dn[d++]=null;var P=dn[d];if(dn[d++]=null,b!==null&&T!==null){var oe=b.pending;oe===null?T.next=T:(T.next=oe.next,oe.next=T),b.pending=T}P!==0&&va(p,T,P)}}function Kr(l,d,p,b){dn[Sn++]=l,dn[Sn++]=d,dn[Sn++]=p,dn[Sn++]=b,Oa|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function ea(l,d,p,b){return Kr(l,d,p,b),eo(l)}function To(l,d){return Kr(l,null,null,d),eo(l)}function va(l,d,p){l.lanes|=p;var b=l.alternate;b!==null&&(b.lanes|=p);for(var T=!1,P=l.return;P!==null;)P.childLanes|=p,b=P.alternate,b!==null&&(b.childLanes|=p),P.tag===22&&(l=P.stateNode,l===null||l._visibility&1||(T=!0)),l=P,P=P.return;return l.tag===3?(P=l.stateNode,T&&d!==null&&(T=31-zt(p),l=P.hiddenUpdates,b=l[T],b===null?l[T]=[d]:b.push(d),d.lane=p|536870912),P):null}function eo(l){if(50<Lp)throw Lp=0,j_=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var ps={};function MB(l,d,p,b){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(l,d,p,b){return new MB(l,d,p,b)}function R1(l){return l=l.prototype,!(!l||!l.isReactComponent)}function al(l,d){var p=l.alternate;return p===null?(p=ji(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function NA(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Pg(l,d,p,b,T,P){var oe=0;if(b=l,typeof l=="function")R1(l)&&(oe=1);else if(typeof l=="string")oe=F7(l,p,be.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case B:return l=ji(31,p,d,T),l.elementType=B,l.lanes=P,l;case w:return Oc(p.children,T,P,d);case v:oe=8,T|=24;break;case _:return l=ji(12,p,d,T|2),l.elementType=_,l.lanes=P,l;case A:return l=ji(13,p,d,T),l.elementType=A,l.lanes=P,l;case O:return l=ji(19,p,d,T),l.elementType=O,l.lanes=P,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case E:oe=10;break e;case S:oe=9;break e;case C:oe=11;break e;case I:oe=14;break e;case D:oe=16,b=null;break e}oe=29,p=Error(r(130,l===null?"null":typeof l,"")),b=null}return d=ji(oe,p,d,T),d.elementType=l,d.type=b,d.lanes=P,d}function Oc(l,d,p,b){return l=ji(7,l,b,d),l.lanes=p,l}function N1(l,d,p){return l=ji(6,l,null,d),l.lanes=p,l}function I1(l,d,p){return d=ji(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Jd=[],Qd=0,Fg=null,Lg=0,to=[],no=0,Dc=null,il=1,ol="";function jc(l,d){Jd[Qd++]=Lg,Jd[Qd++]=Fg,Fg=l,Lg=d}function IA(l,d,p){to[no++]=il,to[no++]=ol,to[no++]=Dc,Dc=l;var b=il;l=ol;var T=32-zt(b)-1;b&=~(1<<T),p+=1;var P=32-zt(d)+T;if(30<P){var oe=T-T%5;P=(b&(1<<oe)-1).toString(32),b>>=oe,T-=oe,il=1<<32-zt(d)+T|p<<T|b,ol=P+l}else il=1<<P|p<<T|b,ol=l}function O1(l){l.return!==null&&(jc(l,1),IA(l,1,0))}function D1(l){for(;l===Fg;)Fg=Jd[--Qd],Jd[Qd]=null,Lg=Jd[--Qd],Jd[Qd]=null;for(;l===Dc;)Dc=to[--no],to[no]=null,ol=to[--no],to[no]=null,il=to[--no],to[no]=null}var ii=null,qr=null,er=!1,Mc=null,ms=!1,j1=Error(r(519));function Pc(l){var d=Error(r(418,""));throw gp(cn(d,l)),j1}function OA(l){var d=l.stateNode,p=l.type,b=l.memoizedProps;switch(d[pe]=l,d[de]=b,p){case"dialog":qn("cancel",d),qn("close",d);break;case"iframe":case"object":case"embed":qn("load",d);break;case"video":case"audio":for(p=0;p<Bp.length;p++)qn(Bp[p],d);break;case"source":qn("error",d);break;case"img":case"image":case"link":qn("error",d),qn("load",d);break;case"details":qn("toggle",d);break;case"input":qn("invalid",d),Xh(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),cs(d);break;case"select":qn("invalid",d);break;case"textarea":qn("invalid",d),Jh(d,b.value,b.defaultValue,b.children),cs(d)}p=b.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||b.suppressHydrationWarning===!0||Z3(d.textContent,p)?(b.popover!=null&&(qn("beforetoggle",d),qn("toggle",d)),b.onScroll!=null&&qn("scroll",d),b.onScrollEnd!=null&&qn("scrollend",d),b.onClick!=null&&(d.onclick=by),d=!0):d=!1,d||Pc(l)}function DA(l){for(ii=l.return;ii;)switch(ii.tag){case 5:case 13:ms=!1;return;case 27:case 3:ms=!0;return;default:ii=ii.return}}function pp(l){if(l!==ii)return!1;if(!er)return DA(l),er=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||Y_(l.type,l.memoizedProps)),p=!p),p&&qr&&Pc(l),DA(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(d===0){qr=No(l.nextSibling);break e}d--}else p!=="$"&&p!=="$!"&&p!=="$?"||d++;l=l.nextSibling}qr=null}}else d===27?(d=qr,Eu(l.type)?(l=ex,ex=null,qr=l):qr=d):qr=ii?No(l.stateNode.nextSibling):null;return!0}function mp(){qr=ii=null,er=!1}function jA(){var l=Mc;return l!==null&&(bi===null?bi=l:bi.push.apply(bi,l),Mc=null),l}function gp(l){Mc===null?Mc=[l]:Mc.push(l)}var M1=X(null),Fc=null,sl=null;function uu(l,d,p){ne(M1,d._currentValue),d._currentValue=p}function ll(l){l._currentValue=M1.current,Y(M1)}function P1(l,d,p){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===p)break;l=l.return}}function F1(l,d,p,b){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var P=T.dependencies;if(P!==null){var oe=T.child;P=P.firstContext;e:for(;P!==null;){var Se=P;P=T;for(var ze=0;ze<d.length;ze++)if(Se.context===d[ze]){P.lanes|=p,Se=P.alternate,Se!==null&&(Se.lanes|=p),P1(P.return,p,l),b||(oe=null);break e}P=Se.next}}else if(T.tag===18){if(oe=T.return,oe===null)throw Error(r(341));oe.lanes|=p,P=oe.alternate,P!==null&&(P.lanes|=p),P1(oe,p,l),oe=null}else oe=T.child;if(oe!==null)oe.return=T;else for(oe=T;oe!==null;){if(oe===l){oe=null;break}if(T=oe.sibling,T!==null){T.return=oe.return,oe=T;break}oe=oe.return}T=oe}}function yp(l,d,p,b){l=null;for(var T=d,P=!1;T!==null;){if(!P){if((T.flags&524288)!==0)P=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var oe=T.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var Se=T.type;Ua(T.pendingProps.value,oe.value)||(l!==null?l.push(Se):l=[Se])}}else if(T===Pe.current){if(oe=T.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(Gp):l=[Gp])}T=T.return}l!==null&&F1(d,l,p,b),d.flags|=262144}function $g(l){for(l=l.firstContext;l!==null;){if(!Ua(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Lc(l){Fc=l,sl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function qa(l){return MA(Fc,l)}function Bg(l,d){return Fc===null&&Lc(l),MA(l,d)}function MA(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},sl===null){if(l===null)throw Error(r(308));sl=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else sl=sl.next=d;return p}var PB=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},FB=e.unstable_scheduleCallback,LB=e.unstable_NormalPriority,la={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function L1(){return{controller:new PB,data:new Map,refCount:0}}function bp(l){l.refCount--,l.refCount===0&&FB(LB,function(){l.controller.abort()})}var vp=null,$1=0,ef=0,tf=null;function $B(l,d){if(vp===null){var p=vp=[];$1=0,ef=z_(),tf={status:"pending",value:void 0,then:function(b){p.push(b)}}}return $1++,d.then(PA,PA),d}function PA(){if(--$1===0&&vp!==null){tf!==null&&(tf.status="fulfilled");var l=vp;vp=null,ef=0,tf=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function BB(l,d){var p=[],b={status:"pending",value:null,reason:null,then:function(T){p.push(T)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var T=0;T<p.length;T++)(0,p[T])(d)},function(T){for(b.status="rejected",b.reason=T,T=0;T<p.length;T++)(0,p[T])(void 0)}),b}var FA=ae.S;ae.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&$B(l,d),FA!==null&&FA(l,d)};var $c=X(null);function B1(){var l=$c.current;return l!==null?l:Ar.pooledCache}function zg(l,d){d===null?ne($c,$c.current):ne($c,d.pool)}function LA(){var l=B1();return l===null?null:{parent:la._currentValue,pool:l}}var wp=Error(r(460)),$A=Error(r(474)),Ug=Error(r(542)),z1={then:function(){}};function BA(l){return l=l.status,l==="fulfilled"||l==="rejected"}function qg(){}function zA(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(qg,qg),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,qA(l),l;default:if(typeof d.status=="string")d.then(qg,qg);else{if(l=Ar,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=b}},function(b){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,qA(l),l}throw _p=d,wp}}var _p=null;function UA(){if(_p===null)throw Error(r(459));var l=_p;return _p=null,l}function qA(l){if(l===wp||l===Ug)throw Error(r(483))}var cu=!1;function U1(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function q1(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function du(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function fu(l,d,p){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(sr&2)!==0){var T=b.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),b.pending=d,d=eo(l),va(l,null,p),d}return Kr(l,b,d,p),eo(l)}function xp(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,Ke(l,p)}}function H1(l,d){var p=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,p===b)){var T=null,P=null;if(p=p.firstBaseUpdate,p!==null){do{var oe={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};P===null?T=P=oe:P=P.next=oe,p=p.next}while(p!==null);P===null?T=P=d:P=P.next=d}else T=P=d;p={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:b.shared,callbacks:b.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var V1=!1;function Sp(){if(V1){var l=tf;if(l!==null)throw l}}function Ep(l,d,p,b){V1=!1;var T=l.updateQueue;cu=!1;var P=T.firstBaseUpdate,oe=T.lastBaseUpdate,Se=T.shared.pending;if(Se!==null){T.shared.pending=null;var ze=Se,ut=ze.next;ze.next=null,oe===null?P=ut:oe.next=ut,oe=ze;var _t=l.alternate;_t!==null&&(_t=_t.updateQueue,Se=_t.lastBaseUpdate,Se!==oe&&(Se===null?_t.firstBaseUpdate=ut:Se.next=ut,_t.lastBaseUpdate=ze))}if(P!==null){var kt=T.baseState;oe=0,_t=ut=ze=null,Se=P;do{var pt=Se.lane&-536870913,mt=pt!==Se.lane;if(mt?(Kn&pt)===pt:(b&pt)===pt){pt!==0&&pt===ef&&(V1=!0),_t!==null&&(_t=_t.next={lane:0,tag:Se.tag,payload:Se.payload,callback:null,next:null});e:{var bn=l,fn=Se;pt=d;var gr=p;switch(fn.tag){case 1:if(bn=fn.payload,typeof bn=="function"){kt=bn.call(gr,kt,pt);break e}kt=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=fn.payload,pt=typeof bn=="function"?bn.call(gr,kt,pt):bn,pt==null)break e;kt=f({},kt,pt);break e;case 2:cu=!0}}pt=Se.callback,pt!==null&&(l.flags|=64,mt&&(l.flags|=8192),mt=T.callbacks,mt===null?T.callbacks=[pt]:mt.push(pt))}else mt={lane:pt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},_t===null?(ut=_t=mt,ze=kt):_t=_t.next=mt,oe|=pt;if(Se=Se.next,Se===null){if(Se=T.shared.pending,Se===null)break;mt=Se,Se=mt.next,mt.next=null,T.lastBaseUpdate=mt,T.shared.pending=null}}while(!0);_t===null&&(ze=kt),T.baseState=ze,T.firstBaseUpdate=ut,T.lastBaseUpdate=_t,P===null&&(T.shared.lanes=0),wu|=oe,l.lanes=oe,l.memoizedState=kt}}function HA(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function VA(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)HA(p[l],d)}var nf=X(null),Hg=X(0);function GA(l,d){l=ml,ne(Hg,l),ne(nf,d),ml=l|d.baseLanes}function G1(){ne(Hg,ml),ne(nf,nf.current)}function W1(){ml=Hg.current,Y(nf),Y(Hg)}var hu=0,Pn=null,pr=null,ta=null,Vg=!1,rf=!1,Bc=!1,Gg=0,Cp=0,af=null,zB=0;function Zr(){throw Error(r(321))}function K1(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Ua(l[p],d[p]))return!1;return!0}function Z1(l,d,p,b,T,P){return hu=P,Pn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ae.H=l===null||l.memoizedState===null?RT:NT,Bc=!1,P=p(b,T),Bc=!1,rf&&(P=KA(d,p,b,T)),WA(l),P}function WA(l){ae.H=Jg;var d=pr!==null&&pr.next!==null;if(hu=0,ta=pr=Pn=null,Vg=!1,Cp=0,af=null,d)throw Error(r(300));l===null||wa||(l=l.dependencies,l!==null&&$g(l)&&(wa=!0))}function KA(l,d,p,b){Pn=l;var T=0;do{if(rf&&(af=null),Cp=0,rf=!1,25<=T)throw Error(r(301));if(T+=1,ta=pr=null,l.updateQueue!=null){var P=l.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}ae.H=KB,P=d(p,b)}while(rf);return P}function UB(){var l=ae.H,d=l.useState()[0];return d=typeof d.then=="function"?kp(d):d,l=l.useState()[0],(pr!==null?pr.memoizedState:null)!==l&&(Pn.flags|=1024),d}function Y1(){var l=Gg!==0;return Gg=0,l}function X1(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function J1(l){if(Vg){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Vg=!1}hu=0,ta=pr=Pn=null,rf=!1,Cp=Gg=0,af=null}function gi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ta===null?Pn.memoizedState=ta=l:ta=ta.next=l,ta}function na(){if(pr===null){var l=Pn.alternate;l=l!==null?l.memoizedState:null}else l=pr.next;var d=ta===null?Pn.memoizedState:ta.next;if(d!==null)ta=d,pr=l;else{if(l===null)throw Pn.alternate===null?Error(r(467)):Error(r(310));pr=l,l={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},ta===null?Pn.memoizedState=ta=l:ta=ta.next=l}return ta}function Q1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kp(l){var d=Cp;return Cp+=1,af===null&&(af=[]),l=zA(af,l,d),d=Pn,(ta===null?d.memoizedState:ta.next)===null&&(d=d.alternate,ae.H=d===null||d.memoizedState===null?RT:NT),l}function Wg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return kp(l);if(l.$$typeof===E)return qa(l)}throw Error(r(438,String(l)))}function e_(l){var d=null,p=Pn.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var b=Pn.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=Q1(),Pn.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),b=0;b<l;b++)p[b]=K;return d.index++,p}function ul(l,d){return typeof d=="function"?d(l):d}function Kg(l){var d=na();return t_(d,pr,l)}function t_(l,d,p){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=p;var T=l.baseQueue,P=b.pending;if(P!==null){if(T!==null){var oe=T.next;T.next=P.next,P.next=oe}d.baseQueue=T=P,b.pending=null}if(P=l.baseState,T===null)l.memoizedState=P;else{d=T.next;var Se=oe=null,ze=null,ut=d,_t=!1;do{var kt=ut.lane&-536870913;if(kt!==ut.lane?(Kn&kt)===kt:(hu&kt)===kt){var pt=ut.revertLane;if(pt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),kt===ef&&(_t=!0);else if((hu&pt)===pt){ut=ut.next,pt===ef&&(_t=!0);continue}else kt={lane:0,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},ze===null?(Se=ze=kt,oe=P):ze=ze.next=kt,Pn.lanes|=pt,wu|=pt;kt=ut.action,Bc&&p(P,kt),P=ut.hasEagerState?ut.eagerState:p(P,kt)}else pt={lane:kt,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},ze===null?(Se=ze=pt,oe=P):ze=ze.next=pt,Pn.lanes|=kt,wu|=kt;ut=ut.next}while(ut!==null&&ut!==d);if(ze===null?oe=P:ze.next=Se,!Ua(P,l.memoizedState)&&(wa=!0,_t&&(p=tf,p!==null)))throw p;l.memoizedState=P,l.baseState=oe,l.baseQueue=ze,b.lastRenderedState=P}return T===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function n_(l){var d=na(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var b=p.dispatch,T=p.pending,P=d.memoizedState;if(T!==null){p.pending=null;var oe=T=T.next;do P=l(P,oe.action),oe=oe.next;while(oe!==T);Ua(P,d.memoizedState)||(wa=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),p.lastRenderedState=P}return[P,b]}function ZA(l,d,p){var b=Pn,T=na(),P=er;if(P){if(p===void 0)throw Error(r(407));p=p()}else p=d();var oe=!Ua((pr||T).memoizedState,p);oe&&(T.memoizedState=p,wa=!0),T=T.queue;var Se=JA.bind(null,b,T,l);if(Ap(2048,8,Se,[l]),T.getSnapshot!==d||oe||ta!==null&&ta.memoizedState.tag&1){if(b.flags|=2048,of(9,Zg(),XA.bind(null,b,T,p,d),null),Ar===null)throw Error(r(349));P||(hu&124)!==0||YA(b,d,p)}return p}function YA(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=Pn.updateQueue,d===null?(d=Q1(),Pn.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function XA(l,d,p,b){d.value=p,d.getSnapshot=b,QA(d)&&eT(l)}function JA(l,d,p){return p(function(){QA(d)&&eT(l)})}function QA(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Ua(l,p)}catch{return!0}}function eT(l){var d=To(l,2);d!==null&&$i(d,l,2)}function r_(l){var d=gi();if(typeof l=="function"){var p=l;if(l=p(),Bc){Tt(!0);try{p()}finally{Tt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:l},d}function tT(l,d,p,b){return l.baseState=p,t_(l,pr,typeof b=="function"?b:ul)}function qB(l,d,p,b,T){if(Xg(l))throw Error(r(485));if(l=d.action,l!==null){var P={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){P.listeners.push(oe)}};ae.T!==null?p(!0):P.isTransition=!1,b(P),p=d.pending,p===null?(P.next=d.pending=P,nT(d,P)):(P.next=p.next,d.pending=p.next=P)}}function nT(l,d){var p=d.action,b=d.payload,T=l.state;if(d.isTransition){var P=ae.T,oe={};ae.T=oe;try{var Se=p(T,b),ze=ae.S;ze!==null&&ze(oe,Se),rT(l,d,Se)}catch(ut){a_(l,d,ut)}finally{ae.T=P}}else try{P=p(T,b),rT(l,d,P)}catch(ut){a_(l,d,ut)}}function rT(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(b){aT(l,d,b)},function(b){return a_(l,d,b)}):aT(l,d,p)}function aT(l,d,p){d.status="fulfilled",d.value=p,iT(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,nT(l,p)))}function a_(l,d,p){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=p,iT(d),d=d.next;while(d!==b)}l.action=null}function iT(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function oT(l,d){return d}function sT(l,d){if(er){var p=Ar.formState;if(p!==null){e:{var b=Pn;if(er){if(qr){t:{for(var T=qr,P=ms;T.nodeType!==8;){if(!P){T=null;break t}if(T=No(T.nextSibling),T===null){T=null;break t}}P=T.data,T=P==="F!"||P==="F"?T:null}if(T){qr=No(T.nextSibling),b=T.data==="F!";break e}}Pc(b)}b=!1}b&&(d=p[0])}}return p=gi(),p.memoizedState=p.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oT,lastRenderedState:d},p.queue=b,p=kT.bind(null,Pn,b),b.dispatch=p,b=r_(!1),P=u_.bind(null,Pn,!1,b.queue),b=gi(),T={state:d,dispatch:null,action:l,pending:null},b.queue=T,p=qB.bind(null,Pn,T,P,p),T.dispatch=p,b.memoizedState=l,[d,p,!1]}function lT(l){var d=na();return uT(d,pr,l)}function uT(l,d,p){if(d=t_(l,d,oT)[0],l=Kg(ul)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=kp(d)}catch(oe){throw oe===wp?Ug:oe}else b=d;d=na();var T=d.queue,P=T.dispatch;return p!==d.memoizedState&&(Pn.flags|=2048,of(9,Zg(),HB.bind(null,T,p),null)),[b,P,l]}function HB(l,d){l.action=d}function cT(l){var d=na(),p=pr;if(p!==null)return uT(d,p,l);na(),d=d.memoizedState,p=na();var b=p.queue.dispatch;return p.memoizedState=l,[d,b,!1]}function of(l,d,p,b){return l={tag:l,create:p,deps:b,inst:d,next:null},d=Pn.updateQueue,d===null&&(d=Q1(),Pn.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(b=p.next,p.next=l,l.next=b,d.lastEffect=l),l}function Zg(){return{destroy:void 0,resource:void 0}}function dT(){return na().memoizedState}function Yg(l,d,p,b){var T=gi();b=b===void 0?null:b,Pn.flags|=l,T.memoizedState=of(1|d,Zg(),p,b)}function Ap(l,d,p,b){var T=na();b=b===void 0?null:b;var P=T.memoizedState.inst;pr!==null&&b!==null&&K1(b,pr.memoizedState.deps)?T.memoizedState=of(d,P,p,b):(Pn.flags|=l,T.memoizedState=of(1|d,P,p,b))}function fT(l,d){Yg(8390656,8,l,d)}function hT(l,d){Ap(2048,8,l,d)}function pT(l,d){return Ap(4,2,l,d)}function mT(l,d){return Ap(4,4,l,d)}function gT(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function yT(l,d,p){p=p!=null?p.concat([l]):null,Ap(4,4,gT.bind(null,d,l),p)}function i_(){}function bT(l,d){var p=na();d=d===void 0?null:d;var b=p.memoizedState;return d!==null&&K1(d,b[1])?b[0]:(p.memoizedState=[l,d],l)}function vT(l,d){var p=na();d=d===void 0?null:d;var b=p.memoizedState;if(d!==null&&K1(d,b[1]))return b[0];if(b=l(),Bc){Tt(!0);try{l()}finally{Tt(!1)}}return p.memoizedState=[b,d],b}function o_(l,d,p){return p===void 0||(hu&1073741824)!==0?l.memoizedState=d:(l.memoizedState=p,l=x3(),Pn.lanes|=l,wu|=l,p)}function wT(l,d,p,b){return Ua(p,d)?p:nf.current!==null?(l=o_(l,p,b),Ua(l,d)||(wa=!0),l):(hu&42)===0?(wa=!0,l.memoizedState=p):(l=x3(),Pn.lanes|=l,wu|=l,d)}function _T(l,d,p,b,T){var P=re.p;re.p=P!==0&&8>P?P:8;var oe=ae.T,Se={};ae.T=Se,u_(l,!1,d,p);try{var ze=T(),ut=ae.S;if(ut!==null&&ut(Se,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var _t=BB(ze,b);Tp(l,d,_t,Li(l))}else Tp(l,d,b,Li(l))}catch(kt){Tp(l,d,{then:function(){},status:"rejected",reason:kt},Li())}finally{re.p=P,ae.T=oe}}function VB(){}function s_(l,d,p,b){if(l.tag!==5)throw Error(r(476));var T=xT(l).queue;_T(l,T,d,ee,p===null?VB:function(){return ST(l),p(b)})}function xT(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:ee},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function ST(l){var d=xT(l).next.queue;Tp(l,d,{},Li())}function l_(){return qa(Gp)}function ET(){return na().memoizedState}function CT(){return na().memoizedState}function GB(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=Li();l=du(p);var b=fu(d,l,p);b!==null&&($i(b,d,p),xp(b,d,p)),d={cache:L1()},l.payload=d;return}d=d.return}}function WB(l,d,p){var b=Li();p={lane:b,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Xg(l)?AT(d,p):(p=ea(l,d,p,b),p!==null&&($i(p,l,b),TT(p,d,b)))}function kT(l,d,p){var b=Li();Tp(l,d,p,b)}function Tp(l,d,p,b){var T={lane:b,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Xg(l))AT(d,T);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var oe=d.lastRenderedState,Se=P(oe,p);if(T.hasEagerState=!0,T.eagerState=Se,Ua(Se,oe))return Kr(l,d,T,0),Ar===null&&yn(),!1}catch{}finally{}if(p=ea(l,d,T,b),p!==null)return $i(p,l,b),TT(p,d,b),!0}return!1}function u_(l,d,p,b){if(b={lane:2,revertLane:z_(),action:b,hasEagerState:!1,eagerState:null,next:null},Xg(l)){if(d)throw Error(r(479))}else d=ea(l,p,b,2),d!==null&&$i(d,l,2)}function Xg(l){var d=l.alternate;return l===Pn||d!==null&&d===Pn}function AT(l,d){rf=Vg=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function TT(l,d,p){if((p&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,Ke(l,p)}}var Jg={readContext:qa,use:Wg,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useLayoutEffect:Zr,useInsertionEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useSyncExternalStore:Zr,useId:Zr,useHostTransitionStatus:Zr,useFormState:Zr,useActionState:Zr,useOptimistic:Zr,useMemoCache:Zr,useCacheRefresh:Zr},RT={readContext:qa,use:Wg,useCallback:function(l,d){return gi().memoizedState=[l,d===void 0?null:d],l},useContext:qa,useEffect:fT,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Yg(4194308,4,gT.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Yg(4194308,4,l,d)},useInsertionEffect:function(l,d){Yg(4,2,l,d)},useMemo:function(l,d){var p=gi();d=d===void 0?null:d;var b=l();if(Bc){Tt(!0);try{l()}finally{Tt(!1)}}return p.memoizedState=[b,d],b},useReducer:function(l,d,p){var b=gi();if(p!==void 0){var T=p(d);if(Bc){Tt(!0);try{p(d)}finally{Tt(!1)}}}else T=d;return b.memoizedState=b.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},b.queue=l,l=l.dispatch=WB.bind(null,Pn,l),[b.memoizedState,l]},useRef:function(l){var d=gi();return l={current:l},d.memoizedState=l},useState:function(l){l=r_(l);var d=l.queue,p=kT.bind(null,Pn,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:i_,useDeferredValue:function(l,d){var p=gi();return o_(p,l,d)},useTransition:function(){var l=r_(!1);return l=_T.bind(null,Pn,l.queue,!0,!1),gi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var b=Pn,T=gi();if(er){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),Ar===null)throw Error(r(349));(Kn&124)!==0||YA(b,d,p)}T.memoizedState=p;var P={value:p,getSnapshot:d};return T.queue=P,fT(JA.bind(null,b,P,l),[l]),b.flags|=2048,of(9,Zg(),XA.bind(null,b,P,p,d),null),p},useId:function(){var l=gi(),d=Ar.identifierPrefix;if(er){var p=ol,b=il;p=(b&~(1<<32-zt(b)-1)).toString(32)+p,d=""+d+"R"+p,p=Gg++,0<p&&(d+="H"+p.toString(32)),d+=""}else p=zB++,d=""+d+"r"+p.toString(32)+"";return l.memoizedState=d},useHostTransitionStatus:l_,useFormState:sT,useActionState:sT,useOptimistic:function(l){var d=gi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=u_.bind(null,Pn,!0,p),p.dispatch=d,[l,d]},useMemoCache:e_,useCacheRefresh:function(){return gi().memoizedState=GB.bind(null,Pn)}},NT={readContext:qa,use:Wg,useCallback:bT,useContext:qa,useEffect:hT,useImperativeHandle:yT,useInsertionEffect:pT,useLayoutEffect:mT,useMemo:vT,useReducer:Kg,useRef:dT,useState:function(){return Kg(ul)},useDebugValue:i_,useDeferredValue:function(l,d){var p=na();return wT(p,pr.memoizedState,l,d)},useTransition:function(){var l=Kg(ul)[0],d=na().memoizedState;return[typeof l=="boolean"?l:kp(l),d]},useSyncExternalStore:ZA,useId:ET,useHostTransitionStatus:l_,useFormState:lT,useActionState:lT,useOptimistic:function(l,d){var p=na();return tT(p,pr,l,d)},useMemoCache:e_,useCacheRefresh:CT},KB={readContext:qa,use:Wg,useCallback:bT,useContext:qa,useEffect:hT,useImperativeHandle:yT,useInsertionEffect:pT,useLayoutEffect:mT,useMemo:vT,useReducer:n_,useRef:dT,useState:function(){return n_(ul)},useDebugValue:i_,useDeferredValue:function(l,d){var p=na();return pr===null?o_(p,l,d):wT(p,pr.memoizedState,l,d)},useTransition:function(){var l=n_(ul)[0],d=na().memoizedState;return[typeof l=="boolean"?l:kp(l),d]},useSyncExternalStore:ZA,useId:ET,useHostTransitionStatus:l_,useFormState:cT,useActionState:cT,useOptimistic:function(l,d){var p=na();return pr!==null?tT(p,pr,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:e_,useCacheRefresh:CT},sf=null,Rp=0;function Qg(l){var d=Rp;return Rp+=1,sf===null&&(sf=[]),zA(sf,l,d)}function Np(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function ey(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function IT(l){var d=l._init;return d(l._payload)}function OT(l){function d(nt,Ze){if(l){var lt=nt.deletions;lt===null?(nt.deletions=[Ze],nt.flags|=16):lt.push(Ze)}}function p(nt,Ze){if(!l)return null;for(;Ze!==null;)d(nt,Ze),Ze=Ze.sibling;return null}function b(nt){for(var Ze=new Map;nt!==null;)nt.key!==null?Ze.set(nt.key,nt):Ze.set(nt.index,nt),nt=nt.sibling;return Ze}function T(nt,Ze){return nt=al(nt,Ze),nt.index=0,nt.sibling=null,nt}function P(nt,Ze,lt){return nt.index=lt,l?(lt=nt.alternate,lt!==null?(lt=lt.index,lt<Ze?(nt.flags|=67108866,Ze):lt):(nt.flags|=67108866,Ze)):(nt.flags|=1048576,Ze)}function oe(nt){return l&&nt.alternate===null&&(nt.flags|=67108866),nt}function Se(nt,Ze,lt,St){return Ze===null||Ze.tag!==6?(Ze=N1(lt,nt.mode,St),Ze.return=nt,Ze):(Ze=T(Ze,lt),Ze.return=nt,Ze)}function ze(nt,Ze,lt,St){var Qt=lt.type;return Qt===w?_t(nt,Ze,lt.props.children,St,lt.key):Ze!==null&&(Ze.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===D&&IT(Qt)===Ze.type)?(Ze=T(Ze,lt.props),Np(Ze,lt),Ze.return=nt,Ze):(Ze=Pg(lt.type,lt.key,lt.props,null,nt.mode,St),Np(Ze,lt),Ze.return=nt,Ze)}function ut(nt,Ze,lt,St){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==lt.containerInfo||Ze.stateNode.implementation!==lt.implementation?(Ze=I1(lt,nt.mode,St),Ze.return=nt,Ze):(Ze=T(Ze,lt.children||[]),Ze.return=nt,Ze)}function _t(nt,Ze,lt,St,Qt){return Ze===null||Ze.tag!==7?(Ze=Oc(lt,nt.mode,St,Qt),Ze.return=nt,Ze):(Ze=T(Ze,lt),Ze.return=nt,Ze)}function kt(nt,Ze,lt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=N1(""+Ze,nt.mode,lt),Ze.return=nt,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case m:return lt=Pg(Ze.type,Ze.key,Ze.props,null,nt.mode,lt),Np(lt,Ze),lt.return=nt,lt;case g:return Ze=I1(Ze,nt.mode,lt),Ze.return=nt,Ze;case D:var St=Ze._init;return Ze=St(Ze._payload),kt(nt,Ze,lt)}if(he(Ze)||F(Ze))return Ze=Oc(Ze,nt.mode,lt,null),Ze.return=nt,Ze;if(typeof Ze.then=="function")return kt(nt,Qg(Ze),lt);if(Ze.$$typeof===E)return kt(nt,Bg(nt,Ze),lt);ey(nt,Ze)}return null}function pt(nt,Ze,lt,St){var Qt=Ze!==null?Ze.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Qt!==null?null:Se(nt,Ze,""+lt,St);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:return lt.key===Qt?ze(nt,Ze,lt,St):null;case g:return lt.key===Qt?ut(nt,Ze,lt,St):null;case D:return Qt=lt._init,lt=Qt(lt._payload),pt(nt,Ze,lt,St)}if(he(lt)||F(lt))return Qt!==null?null:_t(nt,Ze,lt,St,null);if(typeof lt.then=="function")return pt(nt,Ze,Qg(lt),St);if(lt.$$typeof===E)return pt(nt,Ze,Bg(nt,lt),St);ey(nt,lt)}return null}function mt(nt,Ze,lt,St,Qt){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return nt=nt.get(lt)||null,Se(Ze,nt,""+St,Qt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case m:return nt=nt.get(St.key===null?lt:St.key)||null,ze(Ze,nt,St,Qt);case g:return nt=nt.get(St.key===null?lt:St.key)||null,ut(Ze,nt,St,Qt);case D:var $n=St._init;return St=$n(St._payload),mt(nt,Ze,lt,St,Qt)}if(he(St)||F(St))return nt=nt.get(lt)||null,_t(Ze,nt,St,Qt,null);if(typeof St.then=="function")return mt(nt,Ze,lt,Qg(St),Qt);if(St.$$typeof===E)return mt(nt,Ze,lt,Bg(Ze,St),Qt);ey(Ze,St)}return null}function bn(nt,Ze,lt,St){for(var Qt=null,$n=null,on=Ze,mn=Ze=0,xa=null;on!==null&&mn<lt.length;mn++){on.index>mn?(xa=on,on=null):xa=on.sibling;var Qn=pt(nt,on,lt[mn],St);if(Qn===null){on===null&&(on=xa);break}l&&on&&Qn.alternate===null&&d(nt,on),Ze=P(Qn,Ze,mn),$n===null?Qt=Qn:$n.sibling=Qn,$n=Qn,on=xa}if(mn===lt.length)return p(nt,on),er&&jc(nt,mn),Qt;if(on===null){for(;mn<lt.length;mn++)on=kt(nt,lt[mn],St),on!==null&&(Ze=P(on,Ze,mn),$n===null?Qt=on:$n.sibling=on,$n=on);return er&&jc(nt,mn),Qt}for(on=b(on);mn<lt.length;mn++)xa=mt(on,nt,mn,lt[mn],St),xa!==null&&(l&&xa.alternate!==null&&on.delete(xa.key===null?mn:xa.key),Ze=P(xa,Ze,mn),$n===null?Qt=xa:$n.sibling=xa,$n=xa);return l&&on.forEach(function(Ru){return d(nt,Ru)}),er&&jc(nt,mn),Qt}function fn(nt,Ze,lt,St){if(lt==null)throw Error(r(151));for(var Qt=null,$n=null,on=Ze,mn=Ze=0,xa=null,Qn=lt.next();on!==null&&!Qn.done;mn++,Qn=lt.next()){on.index>mn?(xa=on,on=null):xa=on.sibling;var Ru=pt(nt,on,Qn.value,St);if(Ru===null){on===null&&(on=xa);break}l&&on&&Ru.alternate===null&&d(nt,on),Ze=P(Ru,Ze,mn),$n===null?Qt=Ru:$n.sibling=Ru,$n=Ru,on=xa}if(Qn.done)return p(nt,on),er&&jc(nt,mn),Qt;if(on===null){for(;!Qn.done;mn++,Qn=lt.next())Qn=kt(nt,Qn.value,St),Qn!==null&&(Ze=P(Qn,Ze,mn),$n===null?Qt=Qn:$n.sibling=Qn,$n=Qn);return er&&jc(nt,mn),Qt}for(on=b(on);!Qn.done;mn++,Qn=lt.next())Qn=mt(on,nt,mn,Qn.value,St),Qn!==null&&(l&&Qn.alternate!==null&&on.delete(Qn.key===null?mn:Qn.key),Ze=P(Qn,Ze,mn),$n===null?Qt=Qn:$n.sibling=Qn,$n=Qn);return l&&on.forEach(function(Z7){return d(nt,Z7)}),er&&jc(nt,mn),Qt}function gr(nt,Ze,lt,St){if(typeof lt=="object"&&lt!==null&&lt.type===w&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:e:{for(var Qt=lt.key;Ze!==null;){if(Ze.key===Qt){if(Qt=lt.type,Qt===w){if(Ze.tag===7){p(nt,Ze.sibling),St=T(Ze,lt.props.children),St.return=nt,nt=St;break e}}else if(Ze.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===D&&IT(Qt)===Ze.type){p(nt,Ze.sibling),St=T(Ze,lt.props),Np(St,lt),St.return=nt,nt=St;break e}p(nt,Ze);break}else d(nt,Ze);Ze=Ze.sibling}lt.type===w?(St=Oc(lt.props.children,nt.mode,St,lt.key),St.return=nt,nt=St):(St=Pg(lt.type,lt.key,lt.props,null,nt.mode,St),Np(St,lt),St.return=nt,nt=St)}return oe(nt);case g:e:{for(Qt=lt.key;Ze!==null;){if(Ze.key===Qt)if(Ze.tag===4&&Ze.stateNode.containerInfo===lt.containerInfo&&Ze.stateNode.implementation===lt.implementation){p(nt,Ze.sibling),St=T(Ze,lt.children||[]),St.return=nt,nt=St;break e}else{p(nt,Ze);break}else d(nt,Ze);Ze=Ze.sibling}St=I1(lt,nt.mode,St),St.return=nt,nt=St}return oe(nt);case D:return Qt=lt._init,lt=Qt(lt._payload),gr(nt,Ze,lt,St)}if(he(lt))return bn(nt,Ze,lt,St);if(F(lt)){if(Qt=F(lt),typeof Qt!="function")throw Error(r(150));return lt=Qt.call(lt),fn(nt,Ze,lt,St)}if(typeof lt.then=="function")return gr(nt,Ze,Qg(lt),St);if(lt.$$typeof===E)return gr(nt,Ze,Bg(nt,lt),St);ey(nt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Ze!==null&&Ze.tag===6?(p(nt,Ze.sibling),St=T(Ze,lt),St.return=nt,nt=St):(p(nt,Ze),St=N1(lt,nt.mode,St),St.return=nt,nt=St),oe(nt)):p(nt,Ze)}return function(nt,Ze,lt,St){try{Rp=0;var Qt=gr(nt,Ze,lt,St);return sf=null,Qt}catch(on){if(on===wp||on===Ug)throw on;var $n=ji(29,on,null,nt.mode);return $n.lanes=St,$n.return=nt,$n}finally{}}}var lf=OT(!0),DT=OT(!1),ro=X(null),gs=null;function pu(l){var d=l.alternate;ne(ua,ua.current&1),ne(ro,l),gs===null&&(d===null||nf.current!==null||d.memoizedState!==null)&&(gs=l)}function jT(l){if(l.tag===22){if(ne(ua,ua.current),ne(ro,l),gs===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(gs=l)}}else mu()}function mu(){ne(ua,ua.current),ne(ro,ro.current)}function cl(l){Y(ro),gs===l&&(gs=null),Y(ua)}var ua=X(0);function ty(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||Q_(p)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function c_(l,d,p,b){d=l.memoizedState,p=p(b,d),p=p==null?d:f({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var d_={enqueueSetState:function(l,d,p){l=l._reactInternals;var b=Li(),T=du(b);T.payload=d,p!=null&&(T.callback=p),d=fu(l,T,b),d!==null&&($i(d,l,b),xp(d,l,b))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var b=Li(),T=du(b);T.tag=1,T.payload=d,p!=null&&(T.callback=p),d=fu(l,T,b),d!==null&&($i(d,l,b),xp(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=Li(),b=du(p);b.tag=2,d!=null&&(b.callback=d),d=fu(l,b,p),d!==null&&($i(d,l,p),xp(d,l,p))}};function MT(l,d,p,b,T,P,oe){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,P,oe):d.prototype&&d.prototype.isPureReactComponent?!k(p,b)||!k(T,P):!0}function PT(l,d,p,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,b),d.state!==l&&d_.enqueueReplaceState(d,d.state,null)}function zc(l,d){var p=d;if("ref"in d){p={};for(var b in d)b!=="ref"&&(p[b]=d[b])}if(l=l.defaultProps){p===d&&(p=f({},p));for(var T in l)p[T]===void 0&&(p[T]=l[T])}return p}var ny=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof Vr=="object"&&typeof Vr.emit=="function"){Vr.emit("uncaughtException",l);return}console.error(l)};function FT(l){ny(l)}function LT(l){console.error(l)}function $T(l){ny(l)}function ry(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function BT(l,d,p){try{var b=l.onCaughtError;b(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function f_(l,d,p){return p=du(p),p.tag=3,p.payload={element:null},p.callback=function(){ry(l,d)},p}function zT(l){return l=du(l),l.tag=3,l}function UT(l,d,p,b){var T=p.type.getDerivedStateFromError;if(typeof T=="function"){var P=b.value;l.payload=function(){return T(P)},l.callback=function(){BT(d,p,b)}}var oe=p.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(l.callback=function(){BT(d,p,b),typeof T!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var Se=b.stack;this.componentDidCatch(b.value,{componentStack:Se!==null?Se:""})})}function ZB(l,d,p,b,T){if(p.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=p.alternate,d!==null&&yp(d,p,T,!0),p=ro.current,p!==null){switch(p.tag){case 13:return gs===null?P_():p.alternate===null&&Hr===0&&(Hr=3),p.flags&=-257,p.flags|=65536,p.lanes=T,b===z1?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([b]):d.add(b),L_(l,b,T)),!1;case 22:return p.flags|=65536,b===z1?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([b]):p.add(b)),L_(l,b,T)),!1}throw Error(r(435,p.tag))}return L_(l,b,T),P_(),!1}if(er)return d=ro.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,b!==j1&&(l=Error(r(422),{cause:b}),gp(cn(l,p)))):(b!==j1&&(d=Error(r(423),{cause:b}),gp(cn(d,p))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,b=cn(b,p),T=f_(l.stateNode,b,T),H1(l,T),Hr!==4&&(Hr=2)),!1;var P=Error(r(520),{cause:b});if(P=cn(P,p),Fp===null?Fp=[P]:Fp.push(P),Hr!==4&&(Hr=2),d===null)return!0;b=cn(b,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=T&-T,p.lanes|=l,l=f_(p.stateNode,b,l),H1(p,l),!1;case 1:if(d=p.type,P=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(_u===null||!_u.has(P))))return p.flags|=65536,T&=-T,p.lanes|=T,T=zT(T),UT(T,l,p,b),H1(p,T),!1}p=p.return}while(p!==null);return!1}var qT=Error(r(461)),wa=!1;function Da(l,d,p,b){d.child=l===null?DT(d,null,p,b):lf(d,l.child,p,b)}function HT(l,d,p,b,T){p=p.render;var P=d.ref;if("ref"in b){var oe={};for(var Se in b)Se!=="ref"&&(oe[Se]=b[Se])}else oe=b;return Lc(d),b=Z1(l,d,p,oe,P,T),Se=Y1(),l!==null&&!wa?(X1(l,d,T),dl(l,d,T)):(er&&Se&&O1(d),d.flags|=1,Da(l,d,b,T),d.child)}function VT(l,d,p,b,T){if(l===null){var P=p.type;return typeof P=="function"&&!R1(P)&&P.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=P,GT(l,d,P,b,T)):(l=Pg(p.type,null,b,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(P=l.child,!w_(l,T)){var oe=P.memoizedProps;if(p=p.compare,p=p!==null?p:k,p(oe,b)&&l.ref===d.ref)return dl(l,d,T)}return d.flags|=1,l=al(P,b),l.ref=d.ref,l.return=d,d.child=l}function GT(l,d,p,b,T){if(l!==null){var P=l.memoizedProps;if(k(P,b)&&l.ref===d.ref)if(wa=!1,d.pendingProps=b=P,w_(l,T))(l.flags&131072)!==0&&(wa=!0);else return d.lanes=l.lanes,dl(l,d,T)}return h_(l,d,p,b,T)}function WT(l,d,p){var b=d.pendingProps,T=b.children,P=l!==null?l.memoizedState:null;if(b.mode==="hidden"){if((d.flags&128)!==0){if(b=P!==null?P.baseLanes|p:p,l!==null){for(T=d.child=l.child,P=0;T!==null;)P=P|T.lanes|T.childLanes,T=T.sibling;d.childLanes=P&~b}else d.childLanes=0,d.child=null;return KT(l,d,b,p)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&zg(d,P!==null?P.cachePool:null),P!==null?GA(d,P):G1(),jT(d);else return d.lanes=d.childLanes=536870912,KT(l,d,P!==null?P.baseLanes|p:p,p)}else P!==null?(zg(d,P.cachePool),GA(d,P),mu(),d.memoizedState=null):(l!==null&&zg(d,null),G1(),mu());return Da(l,d,T,p),d.child}function KT(l,d,p,b){var T=B1();return T=T===null?null:{parent:la._currentValue,pool:T},d.memoizedState={baseLanes:p,cachePool:T},l!==null&&zg(d,null),G1(),jT(d),l!==null&&yp(l,d,b,!0),null}function ay(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function h_(l,d,p,b,T){return Lc(d),p=Z1(l,d,p,b,void 0,T),b=Y1(),l!==null&&!wa?(X1(l,d,T),dl(l,d,T)):(er&&b&&O1(d),d.flags|=1,Da(l,d,p,T),d.child)}function ZT(l,d,p,b,T,P){return Lc(d),d.updateQueue=null,p=KA(d,b,p,T),WA(l),b=Y1(),l!==null&&!wa?(X1(l,d,P),dl(l,d,P)):(er&&b&&O1(d),d.flags|=1,Da(l,d,p,P),d.child)}function YT(l,d,p,b,T){if(Lc(d),d.stateNode===null){var P=ps,oe=p.contextType;typeof oe=="object"&&oe!==null&&(P=qa(oe)),P=new p(b,P),d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=d_,d.stateNode=P,P._reactInternals=d,P=d.stateNode,P.props=b,P.state=d.memoizedState,P.refs={},U1(d),oe=p.contextType,P.context=typeof oe=="object"&&oe!==null?qa(oe):ps,P.state=d.memoizedState,oe=p.getDerivedStateFromProps,typeof oe=="function"&&(c_(d,p,oe,b),P.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(oe=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),oe!==P.state&&d_.enqueueReplaceState(P,P.state,null),Ep(d,b,P,T),Sp(),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){P=d.stateNode;var Se=d.memoizedProps,ze=zc(p,Se);P.props=ze;var ut=P.context,_t=p.contextType;oe=ps,typeof _t=="object"&&_t!==null&&(oe=qa(_t));var kt=p.getDerivedStateFromProps;_t=typeof kt=="function"||typeof P.getSnapshotBeforeUpdate=="function",Se=d.pendingProps!==Se,_t||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(Se||ut!==oe)&&PT(d,P,b,oe),cu=!1;var pt=d.memoizedState;P.state=pt,Ep(d,b,P,T),Sp(),ut=d.memoizedState,Se||pt!==ut||cu?(typeof kt=="function"&&(c_(d,p,kt,b),ut=d.memoizedState),(ze=cu||MT(d,p,ze,b,pt,ut,oe))?(_t||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(d.flags|=4194308)):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=ut),P.props=b,P.state=ut,P.context=oe,b=ze):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{P=d.stateNode,q1(l,d),oe=d.memoizedProps,_t=zc(p,oe),P.props=_t,kt=d.pendingProps,pt=P.context,ut=p.contextType,ze=ps,typeof ut=="object"&&ut!==null&&(ze=qa(ut)),Se=p.getDerivedStateFromProps,(ut=typeof Se=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(oe!==kt||pt!==ze)&&PT(d,P,b,ze),cu=!1,pt=d.memoizedState,P.state=pt,Ep(d,b,P,T),Sp();var mt=d.memoizedState;oe!==kt||pt!==mt||cu||l!==null&&l.dependencies!==null&&$g(l.dependencies)?(typeof Se=="function"&&(c_(d,p,Se,b),mt=d.memoizedState),(_t=cu||MT(d,p,_t,b,pt,mt,ze)||l!==null&&l.dependencies!==null&&$g(l.dependencies))?(ut||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(b,mt,ze),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(b,mt,ze)),typeof P.componentDidUpdate=="function"&&(d.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof P.componentDidUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=mt),P.props=b,P.state=mt,P.context=ze,b=_t):(typeof P.componentDidUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),b=!1)}return P=b,ay(l,d),b=(d.flags&128)!==0,P||b?(P=d.stateNode,p=b&&typeof p.getDerivedStateFromError!="function"?null:P.render(),d.flags|=1,l!==null&&b?(d.child=lf(d,l.child,null,T),d.child=lf(d,null,p,T)):Da(l,d,p,T),d.memoizedState=P.state,l=d.child):l=dl(l,d,T),l}function XT(l,d,p,b){return mp(),d.flags|=256,Da(l,d,p,b),d.child}var p_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function m_(l){return{baseLanes:l,cachePool:LA()}}function g_(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=ao),l}function JT(l,d,p){var b=d.pendingProps,T=!1,P=(d.flags&128)!==0,oe;if((oe=P)||(oe=l!==null&&l.memoizedState===null?!1:(ua.current&2)!==0),oe&&(T=!0,d.flags&=-129),oe=(d.flags&32)!==0,d.flags&=-33,l===null){if(er){if(T?pu(d):mu(),er){var Se=qr,ze;if(ze=Se){e:{for(ze=Se,Se=ms;ze.nodeType!==8;){if(!Se){Se=null;break e}if(ze=No(ze.nextSibling),ze===null){Se=null;break e}}Se=ze}Se!==null?(d.memoizedState={dehydrated:Se,treeContext:Dc!==null?{id:il,overflow:ol}:null,retryLane:536870912,hydrationErrors:null},ze=ji(18,null,null,0),ze.stateNode=Se,ze.return=d,d.child=ze,ii=d,qr=null,ze=!0):ze=!1}ze||Pc(d)}if(Se=d.memoizedState,Se!==null&&(Se=Se.dehydrated,Se!==null))return Q_(Se)?d.lanes=32:d.lanes=536870912,null;cl(d)}return Se=b.children,b=b.fallback,T?(mu(),T=d.mode,Se=iy({mode:"hidden",children:Se},T),b=Oc(b,T,p,null),Se.return=d,b.return=d,Se.sibling=b,d.child=Se,T=d.child,T.memoizedState=m_(p),T.childLanes=g_(l,oe,p),d.memoizedState=p_,b):(pu(d),y_(d,Se))}if(ze=l.memoizedState,ze!==null&&(Se=ze.dehydrated,Se!==null)){if(P)d.flags&256?(pu(d),d.flags&=-257,d=b_(l,d,p)):d.memoizedState!==null?(mu(),d.child=l.child,d.flags|=128,d=null):(mu(),T=b.fallback,Se=d.mode,b=iy({mode:"visible",children:b.children},Se),T=Oc(T,Se,p,null),T.flags|=2,b.return=d,T.return=d,b.sibling=T,d.child=b,lf(d,l.child,null,p),b=d.child,b.memoizedState=m_(p),b.childLanes=g_(l,oe,p),d.memoizedState=p_,d=T);else if(pu(d),Q_(Se)){if(oe=Se.nextSibling&&Se.nextSibling.dataset,oe)var ut=oe.dgst;oe=ut,b=Error(r(419)),b.stack="",b.digest=oe,gp({value:b,source:null,stack:null}),d=b_(l,d,p)}else if(wa||yp(l,d,p,!1),oe=(p&l.childLanes)!==0,wa||oe){if(oe=Ar,oe!==null&&(b=p&-p,b=(b&42)!==0?1:Ct(b),b=(b&(oe.suspendedLanes|p))!==0?0:b,b!==0&&b!==ze.retryLane))throw ze.retryLane=b,To(l,b),$i(oe,l,b),qT;Se.data==="$?"||P_(),d=b_(l,d,p)}else Se.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=ze.treeContext,qr=No(Se.nextSibling),ii=d,er=!0,Mc=null,ms=!1,l!==null&&(to[no++]=il,to[no++]=ol,to[no++]=Dc,il=l.id,ol=l.overflow,Dc=d),d=y_(d,b.children),d.flags|=4096);return d}return T?(mu(),T=b.fallback,Se=d.mode,ze=l.child,ut=ze.sibling,b=al(ze,{mode:"hidden",children:b.children}),b.subtreeFlags=ze.subtreeFlags&65011712,ut!==null?T=al(ut,T):(T=Oc(T,Se,p,null),T.flags|=2),T.return=d,b.return=d,b.sibling=T,d.child=b,b=T,T=d.child,Se=l.child.memoizedState,Se===null?Se=m_(p):(ze=Se.cachePool,ze!==null?(ut=la._currentValue,ze=ze.parent!==ut?{parent:ut,pool:ut}:ze):ze=LA(),Se={baseLanes:Se.baseLanes|p,cachePool:ze}),T.memoizedState=Se,T.childLanes=g_(l,oe,p),d.memoizedState=p_,b):(pu(d),p=l.child,l=p.sibling,p=al(p,{mode:"visible",children:b.children}),p.return=d,p.sibling=null,l!==null&&(oe=d.deletions,oe===null?(d.deletions=[l],d.flags|=16):oe.push(l)),d.child=p,d.memoizedState=null,p)}function y_(l,d){return d=iy({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function iy(l,d){return l=ji(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function b_(l,d,p){return lf(d,l.child,null,p),l=y_(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function QT(l,d,p){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),P1(l.return,d,p)}function v_(l,d,p,b,T){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:p,tailMode:T}:(P.isBackwards=d,P.rendering=null,P.renderingStartTime=0,P.last=b,P.tail=p,P.tailMode=T)}function e3(l,d,p){var b=d.pendingProps,T=b.revealOrder,P=b.tail;if(Da(l,d,b.children,p),b=ua.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&QT(l,p,d);else if(l.tag===19)QT(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}switch(ne(ua,b),T){case"forwards":for(p=d.child,T=null;p!==null;)l=p.alternate,l!==null&&ty(l)===null&&(T=p),p=p.sibling;p=T,p===null?(T=d.child,d.child=null):(T=p.sibling,p.sibling=null),v_(d,!1,T,p,P);break;case"backwards":for(p=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&ty(l)===null){d.child=T;break}l=T.sibling,T.sibling=p,p=T,T=l}v_(d,!0,p,null,P);break;case"together":v_(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function dl(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),wu|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(yp(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=al(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=al(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function w_(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&$g(l)))}function YB(l,d,p){switch(d.tag){case 3:Re(d,d.stateNode.containerInfo),uu(d,la,l.memoizedState.cache),mp();break;case 27:case 5:He(d);break;case 4:Re(d,d.stateNode.containerInfo);break;case 10:uu(d,d.type,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(pu(d),d.flags|=128,null):(p&d.child.childLanes)!==0?JT(l,d,p):(pu(d),l=dl(l,d,p),l!==null?l.sibling:null);pu(d);break;case 19:var T=(l.flags&128)!==0;if(b=(p&d.childLanes)!==0,b||(yp(l,d,p,!1),b=(p&d.childLanes)!==0),T){if(b)return e3(l,d,p);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ne(ua,ua.current),b)break;return null;case 22:case 23:return d.lanes=0,WT(l,d,p);case 24:uu(d,la,l.memoizedState.cache)}return dl(l,d,p)}function t3(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)wa=!0;else{if(!w_(l,p)&&(d.flags&128)===0)return wa=!1,YB(l,d,p);wa=(l.flags&131072)!==0}else wa=!1,er&&(d.flags&1048576)!==0&&IA(d,Lg,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var b=d.elementType,T=b._init;if(b=T(b._payload),d.type=b,typeof b=="function")R1(b)?(l=zc(b,l),d.tag=1,d=YT(null,d,b,l,p)):(d.tag=0,d=h_(null,d,b,l,p));else{if(b!=null){if(T=b.$$typeof,T===C){d.tag=11,d=HT(null,d,b,l,p);break e}else if(T===I){d.tag=14,d=VT(null,d,b,l,p);break e}}throw d=U(b)||b,Error(r(306,d,""))}}return d;case 0:return h_(l,d,d.type,d.pendingProps,p);case 1:return b=d.type,T=zc(b,d.pendingProps),YT(l,d,b,T,p);case 3:e:{if(Re(d,d.stateNode.containerInfo),l===null)throw Error(r(387));b=d.pendingProps;var P=d.memoizedState;T=P.element,q1(l,d),Ep(d,b,null,p);var oe=d.memoizedState;if(b=oe.cache,uu(d,la,b),b!==P.cache&&F1(d,[la],p,!0),Sp(),b=oe.element,P.isDehydrated)if(P={element:b,isDehydrated:!1,cache:oe.cache},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){d=XT(l,d,b,p);break e}else if(b!==T){T=cn(Error(r(424)),d),gp(T),d=XT(l,d,b,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(qr=No(l.firstChild),ii=d,er=!0,Mc=null,ms=!0,p=DT(d,null,b,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(mp(),b===T){d=dl(l,d,p);break e}Da(l,d,b,p)}d=d.child}return d;case 26:return ay(l,d),l===null?(p=iR(d.type,null,d.pendingProps,null))?d.memoizedState=p:er||(p=d.type,l=d.pendingProps,b=vy(De.current).createElement(p),b[pe]=d,b[de]=l,Ma(b,p,l),Dn(b),d.stateNode=b):d.memoizedState=iR(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return He(d),l===null&&er&&(b=d.stateNode=nR(d.type,d.pendingProps,De.current),ii=d,ms=!0,T=qr,Eu(d.type)?(ex=T,qr=No(b.firstChild)):qr=T),Da(l,d,d.pendingProps.children,p),ay(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&er&&((T=b=qr)&&(b=E7(b,d.type,d.pendingProps,ms),b!==null?(d.stateNode=b,ii=d,qr=No(b.firstChild),ms=!1,T=!0):T=!1),T||Pc(d)),He(d),T=d.type,P=d.pendingProps,oe=l!==null?l.memoizedProps:null,b=P.children,Y_(T,P)?b=null:oe!==null&&Y_(T,oe)&&(d.flags|=32),d.memoizedState!==null&&(T=Z1(l,d,UB,null,null,p),Gp._currentValue=T),ay(l,d),Da(l,d,b,p),d.child;case 6:return l===null&&er&&((l=p=qr)&&(p=C7(p,d.pendingProps,ms),p!==null?(d.stateNode=p,ii=d,qr=null,l=!0):l=!1),l||Pc(d)),null;case 13:return JT(l,d,p);case 4:return Re(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=lf(d,null,b,p):Da(l,d,b,p),d.child;case 11:return HT(l,d,d.type,d.pendingProps,p);case 7:return Da(l,d,d.pendingProps,p),d.child;case 8:return Da(l,d,d.pendingProps.children,p),d.child;case 12:return Da(l,d,d.pendingProps.children,p),d.child;case 10:return b=d.pendingProps,uu(d,d.type,b.value),Da(l,d,b.children,p),d.child;case 9:return T=d.type._context,b=d.pendingProps.children,Lc(d),T=qa(T),b=b(T),d.flags|=1,Da(l,d,b,p),d.child;case 14:return VT(l,d,d.type,d.pendingProps,p);case 15:return GT(l,d,d.type,d.pendingProps,p);case 19:return e3(l,d,p);case 31:return b=d.pendingProps,p=d.mode,b={mode:b.mode,children:b.children},l===null?(p=iy(b,p),p.ref=d.ref,d.child=p,p.return=d,d=p):(p=al(l.child,b),p.ref=d.ref,d.child=p,p.return=d,d=p),d;case 22:return WT(l,d,p);case 24:return Lc(d),b=qa(la),l===null?(T=B1(),T===null&&(T=Ar,P=L1(),T.pooledCache=P,P.refCount++,P!==null&&(T.pooledCacheLanes|=p),T=P),d.memoizedState={parent:b,cache:T},U1(d),uu(d,la,T)):((l.lanes&p)!==0&&(q1(l,d),Ep(d,null,null,p),Sp()),T=l.memoizedState,P=d.memoizedState,T.parent!==b?(T={parent:b,cache:b},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),uu(d,la,b)):(b=P.cache,uu(d,la,b),b!==T.cache&&F1(d,[la],p,!0))),Da(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function fl(l){l.flags|=4}function n3(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!cR(d)){if(d=ro.current,d!==null&&((Kn&4194048)===Kn?gs!==null:(Kn&62914560)!==Kn&&(Kn&536870912)===0||d!==gs))throw _p=z1,$A;l.flags|=8192}}function oy(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?M():536870912,l.lanes|=d,ff|=d)}function Ip(l,d){if(!er)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function Br(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,b=0;if(d)for(var T=l.child;T!==null;)p|=T.lanes|T.childLanes,b|=T.subtreeFlags&65011712,b|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)p|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=b,l.childLanes=p,d}function XB(l,d,p){var b=d.pendingProps;switch(D1(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(d),null;case 1:return Br(d),null;case 3:return p=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),ll(la),Te(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(pp(d)?fl(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,jA())),Br(d),null;case 26:return p=d.memoizedState,l===null?(fl(d),p!==null?(Br(d),n3(d,p)):(Br(d),d.flags&=-16777217)):p?p!==l.memoizedState?(fl(d),Br(d),n3(d,p)):(Br(d),d.flags&=-16777217):(l.memoizedProps!==b&&fl(d),Br(d),d.flags&=-16777217),null;case 27:it(d),p=De.current;var T=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==b&&fl(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return Br(d),null}l=be.current,pp(d)?OA(d):(l=nR(T,b,p),d.stateNode=l,fl(d))}return Br(d),null;case 5:if(it(d),p=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&fl(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return Br(d),null}if(l=be.current,pp(d))OA(d);else{switch(T=vy(De.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof b.is=="string"?T.createElement("select",{is:b.is}):T.createElement("select"),b.multiple?l.multiple=!0:b.size&&(l.size=b.size);break;default:l=typeof b.is=="string"?T.createElement(p,{is:b.is}):T.createElement(p)}}l[pe]=d,l[de]=b;e:for(T=d.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break e;for(;T.sibling===null;){if(T.return===null||T.return===d)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}d.stateNode=l;e:switch(Ma(l,p,b),p){case"button":case"input":case"select":case"textarea":l=!!b.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&fl(d)}}return Br(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&fl(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(l=De.current,pp(d)){if(l=d.stateNode,p=d.memoizedProps,b=null,T=ii,T!==null)switch(T.tag){case 27:case 5:b=T.memoizedProps}l[pe]=d,l=!!(l.nodeValue===p||b!==null&&b.suppressHydrationWarning===!0||Z3(l.nodeValue,p)),l||Pc(d)}else l=vy(l).createTextNode(b),l[pe]=d,d.stateNode=l}return Br(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=pp(d),b!==null&&b.dehydrated!==null){if(l===null){if(!T)throw Error(r(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[pe]=d}else mp(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Br(d),T=!1}else T=jA(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(cl(d),d):(cl(d),null)}if(cl(d),(d.flags&128)!==0)return d.lanes=p,d;if(p=b!==null,l=l!==null&&l.memoizedState!==null,p){b=d.child,T=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(T=b.alternate.memoizedState.cachePool.pool);var P=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(P=b.memoizedState.cachePool.pool),P!==T&&(b.flags|=2048)}return p!==l&&p&&(d.child.flags|=8192),oy(d,d.updateQueue),Br(d),null;case 4:return Te(),l===null&&V_(d.stateNode.containerInfo),Br(d),null;case 10:return ll(d.type),Br(d),null;case 19:if(Y(ua),T=d.memoizedState,T===null)return Br(d),null;if(b=(d.flags&128)!==0,P=T.rendering,P===null)if(b)Ip(T,!1);else{if(Hr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(P=ty(l),P!==null){for(d.flags|=128,Ip(T,!1),l=P.updateQueue,d.updateQueue=l,oy(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)NA(p,l),p=p.sibling;return ne(ua,ua.current&1|2),d.child}l=l.sibling}T.tail!==null&&ce()>uy&&(d.flags|=128,b=!0,Ip(T,!1),d.lanes=4194304)}else{if(!b)if(l=ty(P),l!==null){if(d.flags|=128,b=!0,l=l.updateQueue,d.updateQueue=l,oy(d,l),Ip(T,!0),T.tail===null&&T.tailMode==="hidden"&&!P.alternate&&!er)return Br(d),null}else 2*ce()-T.renderingStartTime>uy&&p!==536870912&&(d.flags|=128,b=!0,Ip(T,!1),d.lanes=4194304);T.isBackwards?(P.sibling=d.child,d.child=P):(l=T.last,l!==null?l.sibling=P:d.child=P,T.last=P)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=ce(),d.sibling=null,l=ua.current,ne(ua,b?l&1|2:l&1),d):(Br(d),null);case 22:case 23:return cl(d),W1(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(p&536870912)!==0&&(d.flags&128)===0&&(Br(d),d.subtreeFlags&6&&(d.flags|=8192)):Br(d),p=d.updateQueue,p!==null&&oy(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==p&&(d.flags|=2048),l!==null&&Y($c),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),ll(la),Br(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function JB(l,d){switch(D1(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return ll(la),Te(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return it(d),null;case 13:if(cl(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));mp()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Y(ua),null;case 4:return Te(),null;case 10:return ll(d.type),null;case 22:case 23:return cl(d),W1(),l!==null&&Y($c),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return ll(la),null;case 25:return null;default:return null}}function r3(l,d){switch(D1(d),d.tag){case 3:ll(la),Te();break;case 26:case 27:case 5:it(d);break;case 4:Te();break;case 13:cl(d);break;case 19:Y(ua);break;case 10:ll(d.type);break;case 22:case 23:cl(d),W1(),l!==null&&Y($c);break;case 24:ll(la)}}function Op(l,d){try{var p=d.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var T=b.next;p=T;do{if((p.tag&l)===l){b=void 0;var P=p.create,oe=p.inst;b=P(),oe.destroy=b}p=p.next}while(p!==T)}}catch(Se){xr(d,d.return,Se)}}function gu(l,d,p){try{var b=d.updateQueue,T=b!==null?b.lastEffect:null;if(T!==null){var P=T.next;b=P;do{if((b.tag&l)===l){var oe=b.inst,Se=oe.destroy;if(Se!==void 0){oe.destroy=void 0,T=d;var ze=p,ut=Se;try{ut()}catch(_t){xr(T,ze,_t)}}}b=b.next}while(b!==P)}}catch(_t){xr(d,d.return,_t)}}function a3(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{VA(d,p)}catch(b){xr(l,l.return,b)}}}function i3(l,d,p){p.props=zc(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(b){xr(l,d,b)}}function Dp(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof p=="function"?l.refCleanup=p(b):p.current=b}}catch(T){xr(l,d,T)}}function ys(l,d){var p=l.ref,b=l.refCleanup;if(p!==null)if(typeof b=="function")try{b()}catch(T){xr(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(T){xr(l,d,T)}else p.current=null}function o3(l){var d=l.type,p=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&b.focus();break e;case"img":p.src?b.src=p.src:p.srcSet&&(b.srcset=p.srcSet)}}catch(T){xr(l,l.return,T)}}function __(l,d,p){try{var b=l.stateNode;v7(b,l.type,p,d),b[de]=d}catch(T){xr(l,l.return,T)}}function s3(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Eu(l.type)||l.tag===4}function x_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||s3(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Eu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function S_(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=by));else if(b!==4&&(b===27&&Eu(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(S_(l,d,p),l=l.sibling;l!==null;)S_(l,d,p),l=l.sibling}function sy(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(b!==4&&(b===27&&Eu(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(sy(l,d,p),l=l.sibling;l!==null;)sy(l,d,p),l=l.sibling}function l3(l){var d=l.stateNode,p=l.memoizedProps;try{for(var b=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);Ma(d,b,p),d[pe]=l,d[de]=p}catch(P){xr(l,l.return,P)}}var hl=!1,Yr=!1,E_=!1,u3=typeof WeakSet=="function"?WeakSet:Set,_a=null;function QB(l,d){if(l=l.containerInfo,K_=Cy,l=ue(l),we(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var b=p.getSelection&&p.getSelection();if(b&&b.rangeCount!==0){p=b.anchorNode;var T=b.anchorOffset,P=b.focusNode;b=b.focusOffset;try{p.nodeType,P.nodeType}catch{p=null;break e}var oe=0,Se=-1,ze=-1,ut=0,_t=0,kt=l,pt=null;t:for(;;){for(var mt;kt!==p||T!==0&&kt.nodeType!==3||(Se=oe+T),kt!==P||b!==0&&kt.nodeType!==3||(ze=oe+b),kt.nodeType===3&&(oe+=kt.nodeValue.length),(mt=kt.firstChild)!==null;)pt=kt,kt=mt;for(;;){if(kt===l)break t;if(pt===p&&++ut===T&&(Se=oe),pt===P&&++_t===b&&(ze=oe),(mt=kt.nextSibling)!==null)break;kt=pt,pt=kt.parentNode}kt=mt}p=Se===-1||ze===-1?null:{start:Se,end:ze}}else p=null}p=p||{start:0,end:0}}else p=null;for(Z_={focusedElem:l,selectionRange:p},Cy=!1,_a=d;_a!==null;)if(d=_a,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,_a=l;else for(;_a!==null;){switch(d=_a,P=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&P!==null){l=void 0,p=d,T=P.memoizedProps,P=P.memoizedState,b=p.stateNode;try{var bn=zc(p.type,T,p.elementType===p.type);l=b.getSnapshotBeforeUpdate(bn,P),b.__reactInternalSnapshotBeforeUpdate=l}catch(fn){xr(p,p.return,fn)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)J_(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":J_(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,_a=l;break}_a=d.return}}function c3(l,d,p){var b=p.flags;switch(p.tag){case 0:case 11:case 15:yu(l,p),b&4&&Op(5,p);break;case 1:if(yu(l,p),b&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(oe){xr(p,p.return,oe)}else{var T=zc(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(oe){xr(p,p.return,oe)}}b&64&&a3(p),b&512&&Dp(p,p.return);break;case 3:if(yu(l,p),b&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{VA(l,d)}catch(oe){xr(p,p.return,oe)}}break;case 27:d===null&&b&4&&l3(p);case 26:case 5:yu(l,p),d===null&&b&4&&o3(p),b&512&&Dp(p,p.return);break;case 12:yu(l,p);break;case 13:yu(l,p),b&4&&h3(l,p),b&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=l7.bind(null,p),k7(l,p))));break;case 22:if(b=p.memoizedState!==null||hl,!b){d=d!==null&&d.memoizedState!==null||Yr,T=hl;var P=Yr;hl=b,(Yr=d)&&!P?bu(l,p,(p.subtreeFlags&8772)!==0):yu(l,p),hl=T,Yr=P}break;case 30:break;default:yu(l,p)}}function d3(l){var d=l.alternate;d!==null&&(l.alternate=null,d3(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Xt(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Pr=null,yi=!1;function pl(l,d,p){for(p=p.child;p!==null;)f3(l,d,p),p=p.sibling}function f3(l,d,p){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Et,p)}catch{}switch(p.tag){case 26:Yr||ys(p,d),pl(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Yr||ys(p,d);var b=Pr,T=yi;Eu(p.type)&&(Pr=p.stateNode,yi=!1),pl(l,d,p),Up(p.stateNode),Pr=b,yi=T;break;case 5:Yr||ys(p,d);case 6:if(b=Pr,T=yi,Pr=null,pl(l,d,p),Pr=b,yi=T,Pr!==null)if(yi)try{(Pr.nodeType===9?Pr.body:Pr.nodeName==="HTML"?Pr.ownerDocument.body:Pr).removeChild(p.stateNode)}catch(P){xr(p,d,P)}else try{Pr.removeChild(p.stateNode)}catch(P){xr(p,d,P)}break;case 18:Pr!==null&&(yi?(l=Pr,eR(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Yp(l)):eR(Pr,p.stateNode));break;case 4:b=Pr,T=yi,Pr=p.stateNode.containerInfo,yi=!0,pl(l,d,p),Pr=b,yi=T;break;case 0:case 11:case 14:case 15:Yr||gu(2,p,d),Yr||gu(4,p,d),pl(l,d,p);break;case 1:Yr||(ys(p,d),b=p.stateNode,typeof b.componentWillUnmount=="function"&&i3(p,d,b)),pl(l,d,p);break;case 21:pl(l,d,p);break;case 22:Yr=(b=Yr)||p.memoizedState!==null,pl(l,d,p),Yr=b;break;default:pl(l,d,p)}}function h3(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Yp(l)}catch(p){xr(d,d.return,p)}}function e7(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new u3),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new u3),d;default:throw Error(r(435,l.tag))}}function C_(l,d){var p=e7(l);d.forEach(function(b){var T=u7.bind(null,l,b);p.has(b)||(p.add(b),b.then(T,T))})}function Mi(l,d){var p=d.deletions;if(p!==null)for(var b=0;b<p.length;b++){var T=p[b],P=l,oe=d,Se=oe;e:for(;Se!==null;){switch(Se.tag){case 27:if(Eu(Se.type)){Pr=Se.stateNode,yi=!1;break e}break;case 5:Pr=Se.stateNode,yi=!1;break e;case 3:case 4:Pr=Se.stateNode.containerInfo,yi=!0;break e}Se=Se.return}if(Pr===null)throw Error(r(160));f3(P,oe,T),Pr=null,yi=!1,P=T.alternate,P!==null&&(P.return=null),T.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)p3(d,l),d=d.sibling}var Ro=null;function p3(l,d){var p=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Mi(d,l),Pi(l),b&4&&(gu(3,l,l.return),Op(3,l),gu(5,l,l.return));break;case 1:Mi(d,l),Pi(l),b&512&&(Yr||p===null||ys(p,p.return)),b&64&&hl&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?b:p.concat(b))));break;case 26:var T=Ro;if(Mi(d,l),Pi(l),b&512&&(Yr||p===null||ys(p,p.return)),b&4){var P=p!==null?p.memoizedState:null;if(b=l.memoizedState,p===null)if(b===null)if(l.stateNode===null){e:{b=l.type,p=l.memoizedProps,T=T.ownerDocument||T;t:switch(b){case"title":P=T.getElementsByTagName("title")[0],(!P||P[Vt]||P[pe]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=T.createElement(b),T.head.insertBefore(P,T.querySelector("head > title"))),Ma(P,b,p),P[pe]=l,Dn(P),b=P;break e;case"link":var oe=lR("link","href",T).get(b+(p.href||""));if(oe){for(var Se=0;Se<oe.length;Se++)if(P=oe[Se],P.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&P.getAttribute("rel")===(p.rel==null?null:p.rel)&&P.getAttribute("title")===(p.title==null?null:p.title)&&P.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){oe.splice(Se,1);break t}}P=T.createElement(b),Ma(P,b,p),T.head.appendChild(P);break;case"meta":if(oe=lR("meta","content",T).get(b+(p.content||""))){for(Se=0;Se<oe.length;Se++)if(P=oe[Se],P.getAttribute("content")===(p.content==null?null:""+p.content)&&P.getAttribute("name")===(p.name==null?null:p.name)&&P.getAttribute("property")===(p.property==null?null:p.property)&&P.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&P.getAttribute("charset")===(p.charSet==null?null:p.charSet)){oe.splice(Se,1);break t}}P=T.createElement(b),Ma(P,b,p),T.head.appendChild(P);break;default:throw Error(r(468,b))}P[pe]=l,Dn(P),b=P}l.stateNode=b}else uR(T,l.type,l.stateNode);else l.stateNode=sR(T,b,l.memoizedProps);else P!==b?(P===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):P.count--,b===null?uR(T,l.type,l.stateNode):sR(T,b,l.memoizedProps)):b===null&&l.stateNode!==null&&__(l,l.memoizedProps,p.memoizedProps)}break;case 27:Mi(d,l),Pi(l),b&512&&(Yr||p===null||ys(p,p.return)),p!==null&&b&4&&__(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Mi(d,l),Pi(l),b&512&&(Yr||p===null||ys(p,p.return)),l.flags&32){T=l.stateNode;try{Ql(T,"")}catch(mt){xr(l,l.return,mt)}}b&4&&l.stateNode!=null&&(T=l.memoizedProps,__(l,T,p!==null?p.memoizedProps:T)),b&1024&&(E_=!0);break;case 6:if(Mi(d,l),Pi(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,p=l.stateNode;try{p.nodeValue=b}catch(mt){xr(l,l.return,mt)}}break;case 3:if(xy=null,T=Ro,Ro=wy(d.containerInfo),Mi(d,l),Ro=T,Pi(l),b&4&&p!==null&&p.memoizedState.isDehydrated)try{Yp(d.containerInfo)}catch(mt){xr(l,l.return,mt)}E_&&(E_=!1,m3(l));break;case 4:b=Ro,Ro=wy(l.stateNode.containerInfo),Mi(d,l),Pi(l),Ro=b;break;case 12:Mi(d,l),Pi(l);break;case 13:Mi(d,l),Pi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(I_=ce()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,C_(l,b)));break;case 22:T=l.memoizedState!==null;var ze=p!==null&&p.memoizedState!==null,ut=hl,_t=Yr;if(hl=ut||T,Yr=_t||ze,Mi(d,l),Yr=_t,hl=ut,Pi(l),b&8192)e:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(p===null||ze||hl||Yr||Uc(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){ze=p=d;try{if(P=ze.stateNode,T)oe=P.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{Se=ze.stateNode;var kt=ze.memoizedProps.style,pt=kt!=null&&kt.hasOwnProperty("display")?kt.display:null;Se.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(mt){xr(ze,ze.return,mt)}}}else if(d.tag===6){if(p===null){ze=d;try{ze.stateNode.nodeValue=T?"":ze.memoizedProps}catch(mt){xr(ze,ze.return,mt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(p=b.retryQueue,p!==null&&(b.retryQueue=null,C_(l,p))));break;case 19:Mi(d,l),Pi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,C_(l,b)));break;case 30:break;case 21:break;default:Mi(d,l),Pi(l)}}function Pi(l){var d=l.flags;if(d&2){try{for(var p,b=l.return;b!==null;){if(s3(b)){p=b;break}b=b.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var T=p.stateNode,P=x_(l);sy(l,P,T);break;case 5:var oe=p.stateNode;p.flags&32&&(Ql(oe,""),p.flags&=-33);var Se=x_(l);sy(l,Se,oe);break;case 3:case 4:var ze=p.stateNode.containerInfo,ut=x_(l);S_(l,ut,ze);break;default:throw Error(r(161))}}catch(_t){xr(l,l.return,_t)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function m3(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;m3(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function yu(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)c3(l,d.alternate,d),d=d.sibling}function Uc(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:gu(4,d,d.return),Uc(d);break;case 1:ys(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&i3(d,d.return,p),Uc(d);break;case 27:Up(d.stateNode);case 26:case 5:ys(d,d.return),Uc(d);break;case 22:d.memoizedState===null&&Uc(d);break;case 30:Uc(d);break;default:Uc(d)}l=l.sibling}}function bu(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,T=l,P=d,oe=P.flags;switch(P.tag){case 0:case 11:case 15:bu(T,P,p),Op(4,P);break;case 1:if(bu(T,P,p),b=P,T=b.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ut){xr(b,b.return,ut)}if(b=P,T=b.updateQueue,T!==null){var Se=b.stateNode;try{var ze=T.shared.hiddenCallbacks;if(ze!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ze.length;T++)HA(ze[T],Se)}catch(ut){xr(b,b.return,ut)}}p&&oe&64&&a3(P),Dp(P,P.return);break;case 27:l3(P);case 26:case 5:bu(T,P,p),p&&b===null&&oe&4&&o3(P),Dp(P,P.return);break;case 12:bu(T,P,p);break;case 13:bu(T,P,p),p&&oe&4&&h3(T,P);break;case 22:P.memoizedState===null&&bu(T,P,p),Dp(P,P.return);break;case 30:break;default:bu(T,P,p)}d=d.sibling}}function k_(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&bp(p))}function A_(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&bp(l))}function bs(l,d,p,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)g3(l,d,p,b),d=d.sibling}function g3(l,d,p,b){var T=d.flags;switch(d.tag){case 0:case 11:case 15:bs(l,d,p,b),T&2048&&Op(9,d);break;case 1:bs(l,d,p,b);break;case 3:bs(l,d,p,b),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&bp(l)));break;case 12:if(T&2048){bs(l,d,p,b),l=d.stateNode;try{var P=d.memoizedProps,oe=P.id,Se=P.onPostCommit;typeof Se=="function"&&Se(oe,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ze){xr(d,d.return,ze)}}else bs(l,d,p,b);break;case 13:bs(l,d,p,b);break;case 23:break;case 22:P=d.stateNode,oe=d.alternate,d.memoizedState!==null?P._visibility&2?bs(l,d,p,b):jp(l,d):P._visibility&2?bs(l,d,p,b):(P._visibility|=2,uf(l,d,p,b,(d.subtreeFlags&10256)!==0)),T&2048&&k_(oe,d);break;case 24:bs(l,d,p,b),T&2048&&A_(d.alternate,d);break;default:bs(l,d,p,b)}}function uf(l,d,p,b,T){for(T=T&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var P=l,oe=d,Se=p,ze=b,ut=oe.flags;switch(oe.tag){case 0:case 11:case 15:uf(P,oe,Se,ze,T),Op(8,oe);break;case 23:break;case 22:var _t=oe.stateNode;oe.memoizedState!==null?_t._visibility&2?uf(P,oe,Se,ze,T):jp(P,oe):(_t._visibility|=2,uf(P,oe,Se,ze,T)),T&&ut&2048&&k_(oe.alternate,oe);break;case 24:uf(P,oe,Se,ze,T),T&&ut&2048&&A_(oe.alternate,oe);break;default:uf(P,oe,Se,ze,T)}d=d.sibling}}function jp(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,b=d,T=b.flags;switch(b.tag){case 22:jp(p,b),T&2048&&k_(b.alternate,b);break;case 24:jp(p,b),T&2048&&A_(b.alternate,b);break;default:jp(p,b)}d=d.sibling}}var Mp=8192;function cf(l){if(l.subtreeFlags&Mp)for(l=l.child;l!==null;)y3(l),l=l.sibling}function y3(l){switch(l.tag){case 26:cf(l),l.flags&Mp&&l.memoizedState!==null&&$7(Ro,l.memoizedState,l.memoizedProps);break;case 5:cf(l);break;case 3:case 4:var d=Ro;Ro=wy(l.stateNode.containerInfo),cf(l),Ro=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=Mp,Mp=16777216,cf(l),Mp=d):cf(l));break;default:cf(l)}}function b3(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Pp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];_a=b,w3(b,l)}b3(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)v3(l),l=l.sibling}function v3(l){switch(l.tag){case 0:case 11:case 15:Pp(l),l.flags&2048&&gu(9,l,l.return);break;case 3:Pp(l);break;case 12:Pp(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,ly(l)):Pp(l);break;default:Pp(l)}}function ly(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];_a=b,w3(b,l)}b3(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:gu(8,d,d.return),ly(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,ly(d));break;default:ly(d)}l=l.sibling}}function w3(l,d){for(;_a!==null;){var p=_a;switch(p.tag){case 0:case 11:case 15:gu(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var b=p.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:bp(p.memoizedState.cache)}if(b=p.child,b!==null)b.return=p,_a=b;else e:for(p=l;_a!==null;){b=_a;var T=b.sibling,P=b.return;if(d3(b),b===p){_a=null;break e}if(T!==null){T.return=P,_a=T;break e}_a=P}}}var t7={getCacheForType:function(l){var d=qa(la),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p}},n7=typeof WeakMap=="function"?WeakMap:Map,sr=0,Ar=null,Un=null,Kn=0,lr=0,Fi=null,vu=!1,df=!1,T_=!1,ml=0,Hr=0,wu=0,qc=0,R_=0,ao=0,ff=0,Fp=null,bi=null,N_=!1,I_=0,uy=1/0,cy=null,_u=null,ja=0,xu=null,hf=null,pf=0,O_=0,D_=null,_3=null,Lp=0,j_=null;function Li(){if((sr&2)!==0&&Kn!==0)return Kn&-Kn;if(ae.T!==null){var l=ef;return l!==0?l:z_()}return q()}function x3(){ao===0&&(ao=(Kn&536870912)===0||er?yt():536870912);var l=ro.current;return l!==null&&(l.flags|=32),ao}function $i(l,d,p){(l===Ar&&(lr===2||lr===9)||l.cancelPendingCommit!==null)&&(mf(l,0),Su(l,Kn,ao,!1)),et(l,p),((sr&2)===0||l!==Ar)&&(l===Ar&&((sr&2)===0&&(qc|=p),Hr===4&&Su(l,Kn,ao,!1)),vs(l))}function S3(l,d,p){if((sr&6)!==0)throw Error(r(327));var b=!p&&(d&124)===0&&(d&l.expiredLanes)===0||le(l,d),T=b?i7(l,d):F_(l,d,!0),P=b;do{if(T===0){df&&!b&&Su(l,d,0,!1);break}else{if(p=l.current.alternate,P&&!r7(p)){T=F_(l,d,!1),P=!1;continue}if(T===2){if(P=d,l.errorRecoveryDisabledLanes&P)var oe=0;else oe=l.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){d=oe;e:{var Se=l;T=Fp;var ze=Se.current.memoizedState.isDehydrated;if(ze&&(mf(Se,oe).flags|=256),oe=F_(Se,oe,!1),oe!==2){if(T_&&!ze){Se.errorRecoveryDisabledLanes|=P,qc|=P,T=4;break e}P=bi,bi=T,P!==null&&(bi===null?bi=P:bi.push.apply(bi,P))}T=oe}if(P=!1,T!==2)continue}}if(T===1){mf(l,0),Su(l,d,0,!0);break}e:{switch(b=l,P=T,P){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:Su(b,d,ao,!vu);break e;case 2:bi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(T=I_+300-ce(),10<T)){if(Su(b,d,ao,!vu),Ce(b,0,!0)!==0)break e;b.timeoutHandle=J3(E3.bind(null,b,p,bi,cy,N_,d,ao,qc,ff,vu,P,2,-0,0),T);break e}E3(b,p,bi,cy,N_,d,ao,qc,ff,vu,P,0,-0,0)}}break}while(!0);vs(l)}function E3(l,d,p,b,T,P,oe,Se,ze,ut,_t,kt,pt,mt){if(l.timeoutHandle=-1,kt=d.subtreeFlags,(kt&8192||(kt&16785408)===16785408)&&(Vp={stylesheets:null,count:0,unsuspend:L7},y3(d),kt=B7(),kt!==null)){l.cancelPendingCommit=kt(I3.bind(null,l,d,P,p,b,T,oe,Se,ze,_t,1,pt,mt)),Su(l,P,oe,!ut);return}I3(l,d,P,p,b,T,oe,Se,ze)}function r7(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var b=0;b<p.length;b++){var T=p[b],P=T.getSnapshot;T=T.value;try{if(!Ua(P(),T))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Su(l,d,p,b){d&=~R_,d&=~qc,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var T=d;0<T;){var P=31-zt(T),oe=1<<P;b[P]=-1,T&=~oe}p!==0&&je(l,p,d)}function dy(){return(sr&6)===0?($p(0),!1):!0}function M_(){if(Un!==null){if(lr===0)var l=Un.return;else l=Un,sl=Fc=null,J1(l),sf=null,Rp=0,l=Un;for(;l!==null;)r3(l.alternate,l),l=l.return;Un=null}}function mf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,_7(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),M_(),Ar=l,Un=p=al(l.current,null),Kn=d,lr=0,Fi=null,vu=!1,df=le(l,d),T_=!1,ff=ao=R_=qc=wu=Hr=0,bi=Fp=null,N_=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var T=31-zt(b),P=1<<T;d|=l[T],b&=~P}return ml=d,yn(),p}function C3(l,d){Pn=null,ae.H=Jg,d===wp||d===Ug?(d=UA(),lr=3):d===$A?(d=UA(),lr=4):lr=d===qT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Fi=d,Un===null&&(Hr=1,ry(l,cn(d,l.current)))}function k3(){var l=ae.H;return ae.H=Jg,l===null?Jg:l}function A3(){var l=ae.A;return ae.A=t7,l}function P_(){Hr=4,vu||(Kn&4194048)!==Kn&&ro.current!==null||(df=!0),(wu&134217727)===0&&(qc&134217727)===0||Ar===null||Su(Ar,Kn,ao,!1)}function F_(l,d,p){var b=sr;sr|=2;var T=k3(),P=A3();(Ar!==l||Kn!==d)&&(cy=null,mf(l,d)),d=!1;var oe=Hr;e:do try{if(lr!==0&&Un!==null){var Se=Un,ze=Fi;switch(lr){case 8:M_(),oe=6;break e;case 3:case 2:case 9:case 6:ro.current===null&&(d=!0);var ut=lr;if(lr=0,Fi=null,gf(l,Se,ze,ut),p&&df){oe=0;break e}break;default:ut=lr,lr=0,Fi=null,gf(l,Se,ze,ut)}}a7(),oe=Hr;break}catch(_t){C3(l,_t)}while(!0);return d&&l.shellSuspendCounter++,sl=Fc=null,sr=b,ae.H=T,ae.A=P,Un===null&&(Ar=null,Kn=0,yn()),oe}function a7(){for(;Un!==null;)T3(Un)}function i7(l,d){var p=sr;sr|=2;var b=k3(),T=A3();Ar!==l||Kn!==d?(cy=null,uy=ce()+500,mf(l,d)):df=le(l,d);e:do try{if(lr!==0&&Un!==null){d=Un;var P=Fi;t:switch(lr){case 1:lr=0,Fi=null,gf(l,d,P,1);break;case 2:case 9:if(BA(P)){lr=0,Fi=null,R3(d);break}d=function(){lr!==2&&lr!==9||Ar!==l||(lr=7),vs(l)},P.then(d,d);break e;case 3:lr=7;break e;case 4:lr=5;break e;case 7:BA(P)?(lr=0,Fi=null,R3(d)):(lr=0,Fi=null,gf(l,d,P,7));break;case 5:var oe=null;switch(Un.tag){case 26:oe=Un.memoizedState;case 5:case 27:var Se=Un;if(!oe||cR(oe)){lr=0,Fi=null;var ze=Se.sibling;if(ze!==null)Un=ze;else{var ut=Se.return;ut!==null?(Un=ut,fy(ut)):Un=null}break t}}lr=0,Fi=null,gf(l,d,P,5);break;case 6:lr=0,Fi=null,gf(l,d,P,6);break;case 8:M_(),Hr=6;break e;default:throw Error(r(462))}}o7();break}catch(_t){C3(l,_t)}while(!0);return sl=Fc=null,ae.H=b,ae.A=T,sr=p,Un!==null?0:(Ar=null,Kn=0,yn(),Hr)}function o7(){for(;Un!==null&&!ke();)T3(Un)}function T3(l){var d=t3(l.alternate,l,ml);l.memoizedProps=l.pendingProps,d===null?fy(l):Un=d}function R3(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=ZT(p,d,d.pendingProps,d.type,void 0,Kn);break;case 11:d=ZT(p,d,d.pendingProps,d.type.render,d.ref,Kn);break;case 5:J1(d);default:r3(p,d),d=Un=NA(d,ml),d=t3(p,d,ml)}l.memoizedProps=l.pendingProps,d===null?fy(l):Un=d}function gf(l,d,p,b){sl=Fc=null,J1(d),sf=null,Rp=0;var T=d.return;try{if(ZB(l,T,d,p,Kn)){Hr=1,ry(l,cn(p,l.current)),Un=null;return}}catch(P){if(T!==null)throw Un=T,P;Hr=1,ry(l,cn(p,l.current)),Un=null;return}d.flags&32768?(er||b===1?l=!0:df||(Kn&536870912)!==0?l=!1:(vu=l=!0,(b===2||b===9||b===3||b===6)&&(b=ro.current,b!==null&&b.tag===13&&(b.flags|=16384))),N3(d,l)):fy(d)}function fy(l){var d=l;do{if((d.flags&32768)!==0){N3(d,vu);return}l=d.return;var p=XB(d.alternate,d,ml);if(p!==null){Un=p;return}if(d=d.sibling,d!==null){Un=d;return}Un=d=l}while(d!==null);Hr===0&&(Hr=5)}function N3(l,d){do{var p=JB(l.alternate,l);if(p!==null){p.flags&=32767,Un=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){Un=l;return}Un=l=p}while(l!==null);Hr=6,Un=null}function I3(l,d,p,b,T,P,oe,Se,ze){l.cancelPendingCommit=null;do hy();while(ja!==0);if((sr&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(P=d.lanes|d.childLanes,P|=Oa,me(l,p,P,oe,Se,ze),l===Ar&&(Un=Ar=null,Kn=0),hf=d,xu=l,pf=p,O_=P,D_=T,_3=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,c7(Le,function(){return P3(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=ae.T,ae.T=null,T=re.p,re.p=2,oe=sr,sr|=4;try{QB(l,d,p)}finally{sr=oe,re.p=T,ae.T=b}}ja=1,O3(),D3(),j3()}}function O3(){if(ja===1){ja=0;var l=xu,d=hf,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=ae.T,ae.T=null;var b=re.p;re.p=2;var T=sr;sr|=4;try{p3(d,l);var P=Z_,oe=ue(l.containerInfo),Se=P.focusedElem,ze=P.selectionRange;if(oe!==Se&&Se&&Se.ownerDocument&&te(Se.ownerDocument.documentElement,Se)){if(ze!==null&&we(Se)){var ut=ze.start,_t=ze.end;if(_t===void 0&&(_t=ut),"selectionStart"in Se)Se.selectionStart=ut,Se.selectionEnd=Math.min(_t,Se.value.length);else{var kt=Se.ownerDocument||document,pt=kt&&kt.defaultView||window;if(pt.getSelection){var mt=pt.getSelection(),bn=Se.textContent.length,fn=Math.min(ze.start,bn),gr=ze.end===void 0?fn:Math.min(ze.end,bn);!mt.extend&&fn>gr&&(oe=gr,gr=fn,fn=oe);var nt=Z(Se,fn),Ze=Z(Se,gr);if(nt&&Ze&&(mt.rangeCount!==1||mt.anchorNode!==nt.node||mt.anchorOffset!==nt.offset||mt.focusNode!==Ze.node||mt.focusOffset!==Ze.offset)){var lt=kt.createRange();lt.setStart(nt.node,nt.offset),mt.removeAllRanges(),fn>gr?(mt.addRange(lt),mt.extend(Ze.node,Ze.offset)):(lt.setEnd(Ze.node,Ze.offset),mt.addRange(lt))}}}}for(kt=[],mt=Se;mt=mt.parentNode;)mt.nodeType===1&&kt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof Se.focus=="function"&&Se.focus(),Se=0;Se<kt.length;Se++){var St=kt[Se];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}Cy=!!K_,Z_=K_=null}finally{sr=T,re.p=b,ae.T=p}}l.current=d,ja=2}}function D3(){if(ja===2){ja=0;var l=xu,d=hf,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=ae.T,ae.T=null;var b=re.p;re.p=2;var T=sr;sr|=4;try{c3(l,d.alternate,d)}finally{sr=T,re.p=b,ae.T=p}}ja=3}}function j3(){if(ja===4||ja===3){ja=0,Ne();var l=xu,d=hf,p=pf,b=_3;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?ja=5:(ja=0,hf=xu=null,M3(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(_u=null),ye(p),d=d.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Et,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=ae.T,T=re.p,re.p=2,ae.T=null;try{for(var P=l.onRecoverableError,oe=0;oe<b.length;oe++){var Se=b[oe];P(Se.value,{componentStack:Se.stack})}}finally{ae.T=d,re.p=T}}(pf&3)!==0&&hy(),vs(l),T=l.pendingLanes,(p&4194090)!==0&&(T&42)!==0?l===j_?Lp++:(Lp=0,j_=l):Lp=0,$p(0)}}function M3(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,bp(d)))}function hy(l){return O3(),D3(),j3(),P3()}function P3(){if(ja!==5)return!1;var l=xu,d=O_;O_=0;var p=ye(pf),b=ae.T,T=re.p;try{re.p=32>p?32:p,ae.T=null,p=D_,D_=null;var P=xu,oe=pf;if(ja=0,hf=xu=null,pf=0,(sr&6)!==0)throw Error(r(331));var Se=sr;if(sr|=4,v3(P.current),g3(P,P.current,oe,p),sr=Se,$p(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Et,P)}catch{}return!0}finally{re.p=T,ae.T=b,M3(l,d)}}function F3(l,d,p){d=cn(p,d),d=f_(l.stateNode,d,2),l=fu(l,d,2),l!==null&&(et(l,2),vs(l))}function xr(l,d,p){if(l.tag===3)F3(l,l,p);else for(;d!==null;){if(d.tag===3){F3(d,l,p);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(_u===null||!_u.has(b))){l=cn(p,l),p=zT(2),b=fu(d,p,2),b!==null&&(UT(p,b,d,l),et(b,2),vs(b));break}}d=d.return}}function L_(l,d,p){var b=l.pingCache;if(b===null){b=l.pingCache=new n7;var T=new Set;b.set(d,T)}else T=b.get(d),T===void 0&&(T=new Set,b.set(d,T));T.has(p)||(T_=!0,T.add(p),l=s7.bind(null,l,d,p),d.then(l,l))}function s7(l,d,p){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Ar===l&&(Kn&p)===p&&(Hr===4||Hr===3&&(Kn&62914560)===Kn&&300>ce()-I_?(sr&2)===0&&mf(l,0):R_|=p,ff===Kn&&(ff=0)),vs(l)}function L3(l,d){d===0&&(d=M()),l=To(l,d),l!==null&&(et(l,d),vs(l))}function l7(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),L3(l,p)}function u7(l,d){var p=0;switch(l.tag){case 13:var b=l.stateNode,T=l.memoizedState;T!==null&&(p=T.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(d),L3(l,p)}function c7(l,d){return Ae(l,d)}var py=null,yf=null,$_=!1,my=!1,B_=!1,Hc=0;function vs(l){l!==yf&&l.next===null&&(yf===null?py=yf=l:yf=yf.next=l),my=!0,$_||($_=!0,f7())}function $p(l,d){if(!B_&&my){B_=!0;do for(var p=!1,b=py;b!==null;){if(l!==0){var T=b.pendingLanes;if(T===0)var P=0;else{var oe=b.suspendedLanes,Se=b.pingedLanes;P=(1<<31-zt(42|l)+1)-1,P&=T&~(oe&~Se),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(p=!0,U3(b,P))}else P=Kn,P=Ce(b,b===Ar?P:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(P&3)===0||le(b,P)||(p=!0,U3(b,P));b=b.next}while(p);B_=!1}}function d7(){$3()}function $3(){my=$_=!1;var l=0;Hc!==0&&(w7()&&(l=Hc),Hc=0);for(var d=ce(),p=null,b=py;b!==null;){var T=b.next,P=B3(b,d);P===0?(b.next=null,p===null?py=T:p.next=T,T===null&&(yf=p)):(p=b,(l!==0||(P&3)!==0)&&(my=!0)),b=T}$p(l)}function B3(l,d){for(var p=l.suspendedLanes,b=l.pingedLanes,T=l.expirationTimes,P=l.pendingLanes&-62914561;0<P;){var oe=31-zt(P),Se=1<<oe,ze=T[oe];ze===-1?((Se&p)===0||(Se&b)!==0)&&(T[oe]=ct(Se,d)):ze<=d&&(l.expiredLanes|=Se),P&=~Se}if(d=Ar,p=Kn,p=Ce(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,p===0||l===d&&(lr===2||lr===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&z(b),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||le(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(b!==null&&z(b),ye(p)){case 2:case 8:p=_e;break;case 32:p=Le;break;case 268435456:p=Ve;break;default:p=Le}return b=z3.bind(null,l),p=Ae(p,b),l.callbackPriority=d,l.callbackNode=p,d}return b!==null&&b!==null&&z(b),l.callbackPriority=2,l.callbackNode=null,2}function z3(l,d){if(ja!==0&&ja!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(hy()&&l.callbackNode!==p)return null;var b=Kn;return b=Ce(l,l===Ar?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(S3(l,b,d),B3(l,ce()),l.callbackNode!=null&&l.callbackNode===p?z3.bind(null,l):null)}function U3(l,d){if(hy())return null;S3(l,d,!0)}function f7(){x7(function(){(sr&6)!==0?Ae(J,d7):$3()})}function z_(){return Hc===0&&(Hc=yt()),Hc}function q3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Zs(""+l)}function H3(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function h7(l,d,p,b,T){if(d==="submit"&&p&&p.stateNode===T){var P=q3((T[de]||null).action),oe=b.submitter;oe&&(d=(d=oe[de]||null)?q3(d.formAction):oe.getAttribute("formAction"),d!==null&&(P=d,oe=null));var Se=new Pd("action","action",null,b,T);l.push({event:Se,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Hc!==0){var ze=oe?H3(T,oe):new FormData(T);s_(p,{pending:!0,data:ze,method:T.method,action:P},null,ze)}}else typeof P=="function"&&(Se.preventDefault(),ze=oe?H3(T,oe):new FormData(T),s_(p,{pending:!0,data:ze,method:T.method,action:P},P,ze))},currentTarget:T}]})}}for(var U_=0;U_<Ht.length;U_++){var q_=Ht[U_],p7=q_.toLowerCase(),m7=q_[0].toUpperCase()+q_.slice(1);It(p7,"on"+m7)}It(ft,"onAnimationEnd"),It(gt,"onAnimationIteration"),It(bt,"onAnimationStart"),It("dblclick","onDoubleClick"),It("focusin","onFocus"),It("focusout","onBlur"),It(wt,"onTransitionRun"),It(Mt,"onTransitionStart"),It(qt,"onTransitionCancel"),It(Nt,"onTransitionEnd"),ss("onMouseEnter",["mouseout","mouseover"]),ss("onMouseLeave",["mouseout","mouseover"]),ss("onPointerEnter",["pointerout","pointerover"]),ss("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bp));function V3(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var b=l[p],T=b.event;b=b.listeners;e:{var P=void 0;if(d)for(var oe=b.length-1;0<=oe;oe--){var Se=b[oe],ze=Se.instance,ut=Se.currentTarget;if(Se=Se.listener,ze!==P&&T.isPropagationStopped())break e;P=Se,T.currentTarget=ut;try{P(T)}catch(_t){ny(_t)}T.currentTarget=null,P=ze}else for(oe=0;oe<b.length;oe++){if(Se=b[oe],ze=Se.instance,ut=Se.currentTarget,Se=Se.listener,ze!==P&&T.isPropagationStopped())break e;P=Se,T.currentTarget=ut;try{P(T)}catch(_t){ny(_t)}T.currentTarget=null,P=ze}}}}function qn(l,d){var p=d[ot];p===void 0&&(p=d[ot]=new Set);var b=l+"__bubble";p.has(b)||(G3(d,l,2,!1),p.add(b))}function H_(l,d,p){var b=0;d&&(b|=4),G3(p,l,b,d)}var gy="_reactListening"+Math.random().toString(36).slice(2);function V_(l){if(!l[gy]){l[gy]=!0,ti.forEach(function(p){p!=="selectionchange"&&(g7.has(p)||H_(p,!1,l),H_(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[gy]||(d[gy]=!0,H_("selectionchange",!1,d))}}function G3(l,d,p,b){switch(gR(d)){case 2:var T=q7;break;case 8:T=H7;break;default:T=ix}p=T.bind(null,d,p,l),T=void 0,!ep||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),b?T!==void 0?l.addEventListener(d,p,{capture:!0,passive:T}):l.addEventListener(d,p,!0):T!==void 0?l.addEventListener(d,p,{passive:T}):l.addEventListener(d,p,!1)}function G_(l,d,p,b,T){var P=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var oe=b.tag;if(oe===3||oe===4){var Se=b.stateNode.containerInfo;if(Se===T)break;if(oe===4)for(oe=b.return;oe!==null;){var ze=oe.tag;if((ze===3||ze===4)&&oe.stateNode.containerInfo===T)return;oe=oe.return}for(;Se!==null;){if(oe=Tn(Se),oe===null)return;if(ze=oe.tag,ze===5||ze===6||ze===26||ze===27){b=P=oe;continue e}Se=Se.parentNode}}b=b.return}tu(function(){var ut=P,_t=jd(p),kt=[];e:{var pt=$t.get(l);if(pt!==void 0){var mt=Pd,bn=l;switch(l){case"keypress":if(au(p)===0)break e;case"keydown":case"keyup":mt=Hd;break;case"focusin":bn="focus",mt=iu;break;case"focusout":bn="blur",mt=iu;break;case"beforeblur":case"afterblur":mt=iu;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Cg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=sp;break;case ft:case gt:case bt:mt=kg;break;case Nt:mt=lp;break;case"scroll":case"scrollend":mt=Fd;break;case"wheel":mt=Gd;break;case"copy":case"cut":case"paste":mt=Ud;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=op;break;case"toggle":case"beforetoggle":mt=Rg}var fn=(d&4)!==0,gr=!fn&&(l==="scroll"||l==="scrollend"),nt=fn?pt!==null?pt+"Capture":null:pt;fn=[];for(var Ze=ut,lt;Ze!==null;){var St=Ze;if(lt=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||lt===null||nt===null||(St=Js(Ze,nt),St!=null&&fn.push(zp(Ze,St,lt))),gr)break;Ze=Ze.return}0<fn.length&&(pt=new mt(pt,bn,null,p,_t),kt.push({event:pt,listeners:fn}))}}if((d&7)===0){e:{if(pt=l==="mouseover"||l==="pointerover",mt=l==="mouseout"||l==="pointerout",pt&&p!==Xi&&(bn=p.relatedTarget||p.fromElement)&&(Tn(bn)||bn[Fe]))break e;if((mt||pt)&&(pt=_t.window===_t?_t:(pt=_t.ownerDocument)?pt.defaultView||pt.parentWindow:window,mt?(bn=p.relatedTarget||p.toElement,mt=ut,bn=bn?Tn(bn):null,bn!==null&&(gr=i(bn),fn=bn.tag,bn!==gr||fn!==5&&fn!==27&&fn!==6)&&(bn=null)):(mt=null,bn=ut),mt!==bn)){if(fn=$d,St="onMouseLeave",nt="onMouseEnter",Ze="mouse",(l==="pointerout"||l==="pointerover")&&(fn=op,St="onPointerLeave",nt="onPointerEnter",Ze="pointer"),gr=mt==null?pt:fr(mt),lt=bn==null?pt:fr(bn),pt=new fn(St,Ze+"leave",mt,p,_t),pt.target=gr,pt.relatedTarget=lt,St=null,Tn(_t)===ut&&(fn=new fn(nt,Ze+"enter",bn,p,_t),fn.target=lt,fn.relatedTarget=gr,St=fn),gr=St,mt&&bn)t:{for(fn=mt,nt=bn,Ze=0,lt=fn;lt;lt=bf(lt))Ze++;for(lt=0,St=nt;St;St=bf(St))lt++;for(;0<Ze-lt;)fn=bf(fn),Ze--;for(;0<lt-Ze;)nt=bf(nt),lt--;for(;Ze--;){if(fn===nt||nt!==null&&fn===nt.alternate)break t;fn=bf(fn),nt=bf(nt)}fn=null}else fn=null;mt!==null&&W3(kt,pt,mt,fn,!1),bn!==null&&gr!==null&&W3(kt,gr,bn,fn,!0)}}e:{if(pt=ut?fr(ut):window,mt=pt.nodeName&&pt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&pt.type==="file")var Qt=Ic;else if(Zd(pt))if(Qi)Qt=lu;else{Qt=rl;var $n=Mg}else mt=pt.nodeName,!mt||mt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?ut&&Qh(ut.elementType)&&(Qt=Ic):Qt=hp;if(Qt&&(Qt=Qt(l,ut))){fp(kt,Qt,p,_t);break e}$n&&$n(l,pt,ut),l==="focusout"&&ut&&pt.type==="number"&&ut.memoizedProps.value!=null&&Xl(pt,"number",pt.value)}switch($n=ut?fr(ut):window,l){case"focusin":(Zd($n)||$n.contentEditable==="true")&&($e=$n,We=ut,Ye=null);break;case"focusout":Ye=We=$e=null;break;case"mousedown":tt=!0;break;case"contextmenu":case"mouseup":case"dragend":tt=!1,qe(kt,p,_t);break;case"selectionchange":if(Me)break;case"keydown":case"keyup":qe(kt,p,_t)}var on;if(Rc)e:{switch(l){case"compositionstart":var mn="onCompositionStart";break e;case"compositionend":mn="onCompositionEnd";break e;case"compositionupdate":mn="onCompositionUpdate";break e}mn=void 0}else nl?dp(l,p)&&(mn="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(mn="onCompositionStart");mn&&(Wd&&p.locale!=="ko"&&(nl||mn!=="onCompositionStart"?mn==="onCompositionEnd"&&nl&&(on=ru()):(Ji=_t,Md="value"in Ji?Ji.value:Ji.textContent,nl=!0)),$n=yy(ut,mn),0<$n.length&&(mn=new qd(mn,l,null,p,_t),kt.push({event:mn,listeners:$n}),on?mn.data=on:(on=Ig(p),on!==null&&(mn.data=on)))),(on=k1?Og(l,p):A1(l,p))&&(mn=yy(ut,"onBeforeInput"),0<mn.length&&($n=new qd("onBeforeInput","beforeinput",null,p,_t),kt.push({event:$n,listeners:mn}),$n.data=on)),h7(kt,l,ut,p,_t)}V3(kt,d)})}function zp(l,d,p){return{instance:l,listener:d,currentTarget:p}}function yy(l,d){for(var p=d+"Capture",b=[];l!==null;){var T=l,P=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||P===null||(T=Js(l,p),T!=null&&b.unshift(zp(l,T,P)),T=Js(l,d),T!=null&&b.push(zp(l,T,P))),l.tag===3)return b;l=l.return}return[]}function bf(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function W3(l,d,p,b,T){for(var P=d._reactName,oe=[];p!==null&&p!==b;){var Se=p,ze=Se.alternate,ut=Se.stateNode;if(Se=Se.tag,ze!==null&&ze===b)break;Se!==5&&Se!==26&&Se!==27||ut===null||(ze=ut,T?(ut=Js(p,P),ut!=null&&oe.unshift(zp(p,ut,ze))):T||(ut=Js(p,P),ut!=null&&oe.push(zp(p,ut,ze)))),p=p.return}oe.length!==0&&l.push({event:d,listeners:oe})}var y7=/\r\n?/g,b7=/\u0000|\uFFFD/g;function K3(l){return(typeof l=="string"?l:""+l).replace(y7,`
`).replace(b7,"")}function Z3(l,d){return d=K3(d),K3(l)===d}function by(){}function mr(l,d,p,b,T,P){switch(p){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||Ql(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&Ql(l,""+b);break;case"className":Gs(l,"class",b);break;case"tabIndex":Gs(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(l,p,b);break;case"style":Sg(l,b,P);break;case"data":if(d!=="object"){Gs(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=Zs(""+b),l.setAttribute(p,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(p==="formAction"?(d!=="input"&&mr(l,d,"name",T.name,T,null),mr(l,d,"formEncType",T.formEncType,T,null),mr(l,d,"formMethod",T.formMethod,T,null),mr(l,d,"formTarget",T.formTarget,T,null)):(mr(l,d,"encType",T.encType,T,null),mr(l,d,"method",T.method,T,null),mr(l,d,"target",T.target,T,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=Zs(""+b),l.setAttribute(p,b);break;case"onClick":b!=null&&(l.onclick=by);break;case"onScroll":b!=null&&qn("scroll",l);break;case"onScrollEnd":b!=null&&qn("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}p=Zs(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""+b):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":b===!0?l.setAttribute(p,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,b):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(p,b):l.removeAttribute(p);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(p):l.setAttribute(p,b);break;case"popover":qn("beforetoggle",l),qn("toggle",l),ko(l,"popover",b);break;case"xlinkActuate":Oi(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Oi(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Oi(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Oi(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Oi(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Oi(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":ko(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=ri.get(p)||p,ko(l,p,b))}}function W_(l,d,p,b,T,P){switch(p){case"style":Sg(l,b,P);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof b=="string"?Ql(l,b):(typeof b=="number"||typeof b=="bigint")&&Ql(l,""+b);break;case"onScroll":b!=null&&qn("scroll",l);break;case"onScrollEnd":b!=null&&qn("scrollend",l);break;case"onClick":b!=null&&(l.onclick=by);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!is.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(T=p.endsWith("Capture"),d=p.slice(2,T?p.length-7:void 0),P=l[de]||null,P=P!=null?P[p]:null,typeof P=="function"&&l.removeEventListener(d,P,T),typeof b=="function")){typeof P!="function"&&P!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,b,T);break e}p in l?l[p]=b:b===!0?l.setAttribute(p,""):ko(l,p,b)}}}function Ma(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qn("error",l),qn("load",l);var b=!1,T=!1,P;for(P in p)if(p.hasOwnProperty(P)){var oe=p[P];if(oe!=null)switch(P){case"src":b=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mr(l,d,P,oe,p,null)}}T&&mr(l,d,"srcSet",p.srcSet,p,null),b&&mr(l,d,"src",p.src,p,null);return;case"input":qn("invalid",l);var Se=P=oe=T=null,ze=null,ut=null;for(b in p)if(p.hasOwnProperty(b)){var _t=p[b];if(_t!=null)switch(b){case"name":T=_t;break;case"type":oe=_t;break;case"checked":ze=_t;break;case"defaultChecked":ut=_t;break;case"value":P=_t;break;case"defaultValue":Se=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(r(137,d));break;default:mr(l,d,b,_t,p,null)}}Xh(l,P,Se,ze,ut,oe,T,!1),cs(l);return;case"select":qn("invalid",l),b=oe=P=null;for(T in p)if(p.hasOwnProperty(T)&&(Se=p[T],Se!=null))switch(T){case"value":P=Se;break;case"defaultValue":oe=Se;break;case"multiple":b=Se;default:mr(l,d,T,Se,p,null)}d=P,p=oe,l.multiple=!!b,d!=null?Ks(l,!!b,d,!1):p!=null&&Ks(l,!!b,p,!0);return;case"textarea":qn("invalid",l),P=T=b=null;for(oe in p)if(p.hasOwnProperty(oe)&&(Se=p[oe],Se!=null))switch(oe){case"value":b=Se;break;case"defaultValue":T=Se;break;case"children":P=Se;break;case"dangerouslySetInnerHTML":if(Se!=null)throw Error(r(91));break;default:mr(l,d,oe,Se,p,null)}Jh(l,b,T,P),cs(l);return;case"option":for(ze in p)if(p.hasOwnProperty(ze)&&(b=p[ze],b!=null))switch(ze){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:mr(l,d,ze,b,p,null)}return;case"dialog":qn("beforetoggle",l),qn("toggle",l),qn("cancel",l),qn("close",l);break;case"iframe":case"object":qn("load",l);break;case"video":case"audio":for(b=0;b<Bp.length;b++)qn(Bp[b],l);break;case"image":qn("error",l),qn("load",l);break;case"details":qn("toggle",l);break;case"embed":case"source":case"link":qn("error",l),qn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in p)if(p.hasOwnProperty(ut)&&(b=p[ut],b!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:mr(l,d,ut,b,p,null)}return;default:if(Qh(d)){for(_t in p)p.hasOwnProperty(_t)&&(b=p[_t],b!==void 0&&W_(l,d,_t,b,p,void 0));return}}for(Se in p)p.hasOwnProperty(Se)&&(b=p[Se],b!=null&&mr(l,d,Se,b,p,null))}function v7(l,d,p,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,P=null,oe=null,Se=null,ze=null,ut=null,_t=null;for(mt in p){var kt=p[mt];if(p.hasOwnProperty(mt)&&kt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":ze=kt;default:b.hasOwnProperty(mt)||mr(l,d,mt,null,b,kt)}}for(var pt in b){var mt=b[pt];if(kt=p[pt],b.hasOwnProperty(pt)&&(mt!=null||kt!=null))switch(pt){case"type":P=mt;break;case"name":T=mt;break;case"checked":ut=mt;break;case"defaultChecked":_t=mt;break;case"value":oe=mt;break;case"defaultValue":Se=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,d));break;default:mt!==kt&&mr(l,d,pt,mt,b,kt)}}Yl(l,oe,Se,ze,ut,_t,P,T);return;case"select":mt=oe=Se=pt=null;for(P in p)if(ze=p[P],p.hasOwnProperty(P)&&ze!=null)switch(P){case"value":break;case"multiple":mt=ze;default:b.hasOwnProperty(P)||mr(l,d,P,null,b,ze)}for(T in b)if(P=b[T],ze=p[T],b.hasOwnProperty(T)&&(P!=null||ze!=null))switch(T){case"value":pt=P;break;case"defaultValue":Se=P;break;case"multiple":oe=P;default:P!==ze&&mr(l,d,T,P,b,ze)}d=Se,p=oe,b=mt,pt!=null?Ks(l,!!p,pt,!1):!!b!=!!p&&(d!=null?Ks(l,!!p,d,!0):Ks(l,!!p,p?[]:"",!1));return;case"textarea":mt=pt=null;for(Se in p)if(T=p[Se],p.hasOwnProperty(Se)&&T!=null&&!b.hasOwnProperty(Se))switch(Se){case"value":break;case"children":break;default:mr(l,d,Se,null,b,T)}for(oe in b)if(T=b[oe],P=p[oe],b.hasOwnProperty(oe)&&(T!=null||P!=null))switch(oe){case"value":pt=T;break;case"defaultValue":mt=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==P&&mr(l,d,oe,T,b,P)}Jl(l,pt,mt);return;case"option":for(var bn in p)if(pt=p[bn],p.hasOwnProperty(bn)&&pt!=null&&!b.hasOwnProperty(bn))switch(bn){case"selected":l.selected=!1;break;default:mr(l,d,bn,null,b,pt)}for(ze in b)if(pt=b[ze],mt=p[ze],b.hasOwnProperty(ze)&&pt!==mt&&(pt!=null||mt!=null))switch(ze){case"selected":l.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:mr(l,d,ze,pt,b,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fn in p)pt=p[fn],p.hasOwnProperty(fn)&&pt!=null&&!b.hasOwnProperty(fn)&&mr(l,d,fn,null,b,pt);for(ut in b)if(pt=b[ut],mt=p[ut],b.hasOwnProperty(ut)&&pt!==mt&&(pt!=null||mt!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,d));break;default:mr(l,d,ut,pt,b,mt)}return;default:if(Qh(d)){for(var gr in p)pt=p[gr],p.hasOwnProperty(gr)&&pt!==void 0&&!b.hasOwnProperty(gr)&&W_(l,d,gr,void 0,b,pt);for(_t in b)pt=b[_t],mt=p[_t],!b.hasOwnProperty(_t)||pt===mt||pt===void 0&&mt===void 0||W_(l,d,_t,pt,b,mt);return}}for(var nt in p)pt=p[nt],p.hasOwnProperty(nt)&&pt!=null&&!b.hasOwnProperty(nt)&&mr(l,d,nt,null,b,pt);for(kt in b)pt=b[kt],mt=p[kt],!b.hasOwnProperty(kt)||pt===mt||pt==null&&mt==null||mr(l,d,kt,pt,b,mt)}var K_=null,Z_=null;function vy(l){return l.nodeType===9?l:l.ownerDocument}function Y3(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X3(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function Y_(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var X_=null;function w7(){var l=window.event;return l&&l.type==="popstate"?l===X_?!1:(X_=l,!0):(X_=null,!1)}var J3=typeof setTimeout=="function"?setTimeout:void 0,_7=typeof clearTimeout=="function"?clearTimeout:void 0,Q3=typeof Promise=="function"?Promise:void 0,x7=typeof queueMicrotask=="function"?queueMicrotask:typeof Q3<"u"?function(l){return Q3.resolve(null).then(l).catch(S7)}:J3;function S7(l){setTimeout(function(){throw l})}function Eu(l){return l==="head"}function eR(l,d){var p=d,b=0,T=0;do{var P=p.nextSibling;if(l.removeChild(p),P&&P.nodeType===8)if(p=P.data,p==="/$"){if(0<b&&8>b){p=b;var oe=l.ownerDocument;if(p&1&&Up(oe.documentElement),p&2&&Up(oe.body),p&4)for(p=oe.head,Up(p),oe=p.firstChild;oe;){var Se=oe.nextSibling,ze=oe.nodeName;oe[Vt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||p.removeChild(oe),oe=Se}}if(T===0){l.removeChild(P),Yp(d);return}T--}else p==="$"||p==="$?"||p==="$!"?T++:b=p.charCodeAt(0)-48;else b=0;p=P}while(p);Yp(d)}function J_(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":J_(p),Xt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function E7(l,d,p,b){for(;l.nodeType===1;){var T=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Vt])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(P=l.getAttribute("rel"),P==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(P!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(P=l.getAttribute("src"),(P!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&P&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var P=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===P)return l}else return l;if(l=No(l.nextSibling),l===null)break}return null}function C7(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=No(l.nextSibling),l===null))return null;return l}function Q_(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function k7(l,d){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")d();else{var b=function(){d(),p.removeEventListener("DOMContentLoaded",b)};p.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function No(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var ex=null;function tR(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(d===0)return l;d--}else p==="/$"&&d++}l=l.previousSibling}return null}function nR(l,d,p){switch(d=vy(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Up(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Xt(l)}var io=new Map,rR=new Set;function wy(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var gl=re.d;re.d={f:A7,r:T7,D:R7,C:N7,L:I7,m:O7,X:j7,S:D7,M:M7};function A7(){var l=gl.f(),d=dy();return l||d}function T7(l){var d=Bn(l);d!==null&&d.tag===5&&d.type==="form"?ST(d):gl.r(l)}var vf=typeof document>"u"?null:document;function aR(l,d,p){var b=vf;if(b&&typeof d=="string"&&d){var T=Ba(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof p=="string"&&(T+='[crossorigin="'+p+'"]'),rR.has(T)||(rR.add(T),l={rel:l,crossOrigin:p,href:d},b.querySelector(T)===null&&(d=b.createElement("link"),Ma(d,"link",l),Dn(d),b.head.appendChild(d)))}}function R7(l){gl.D(l),aR("dns-prefetch",l,null)}function N7(l,d){gl.C(l,d),aR("preconnect",l,d)}function I7(l,d,p){gl.L(l,d,p);var b=vf;if(b&&l&&d){var T='link[rel="preload"][as="'+Ba(d)+'"]';d==="image"&&p&&p.imageSrcSet?(T+='[imagesrcset="'+Ba(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(T+='[imagesizes="'+Ba(p.imageSizes)+'"]')):T+='[href="'+Ba(l)+'"]';var P=T;switch(d){case"style":P=wf(l);break;case"script":P=_f(l)}io.has(P)||(l=f({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),io.set(P,l),b.querySelector(T)!==null||d==="style"&&b.querySelector(qp(P))||d==="script"&&b.querySelector(Hp(P))||(d=b.createElement("link"),Ma(d,"link",l),Dn(d),b.head.appendChild(d)))}}function O7(l,d){gl.m(l,d);var p=vf;if(p&&l){var b=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+Ba(b)+'"][href="'+Ba(l)+'"]',P=T;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=_f(l)}if(!io.has(P)&&(l=f({rel:"modulepreload",href:l},d),io.set(P,l),p.querySelector(T)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Hp(P)))return}b=p.createElement("link"),Ma(b,"link",l),Dn(b),p.head.appendChild(b)}}}function D7(l,d,p){gl.S(l,d,p);var b=vf;if(b&&l){var T=hr(b).hoistableStyles,P=wf(l);d=d||"default";var oe=T.get(P);if(!oe){var Se={loading:0,preload:null};if(oe=b.querySelector(qp(P)))Se.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},p),(p=io.get(P))&&tx(l,p);var ze=oe=b.createElement("link");Dn(ze),Ma(ze,"link",l),ze._p=new Promise(function(ut,_t){ze.onload=ut,ze.onerror=_t}),ze.addEventListener("load",function(){Se.loading|=1}),ze.addEventListener("error",function(){Se.loading|=2}),Se.loading|=4,_y(oe,d,b)}oe={type:"stylesheet",instance:oe,count:1,state:Se},T.set(P,oe)}}}function j7(l,d){gl.X(l,d);var p=vf;if(p&&l){var b=hr(p).hoistableScripts,T=_f(l),P=b.get(T);P||(P=p.querySelector(Hp(T)),P||(l=f({src:l,async:!0},d),(d=io.get(T))&&nx(l,d),P=p.createElement("script"),Dn(P),Ma(P,"link",l),p.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},b.set(T,P))}}function M7(l,d){gl.M(l,d);var p=vf;if(p&&l){var b=hr(p).hoistableScripts,T=_f(l),P=b.get(T);P||(P=p.querySelector(Hp(T)),P||(l=f({src:l,async:!0,type:"module"},d),(d=io.get(T))&&nx(l,d),P=p.createElement("script"),Dn(P),Ma(P,"link",l),p.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},b.set(T,P))}}function iR(l,d,p,b){var T=(T=De.current)?wy(T):null;if(!T)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=wf(p.href),p=hr(T).hoistableStyles,b=p.get(d),b||(b={type:"style",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=wf(p.href);var P=hr(T).hoistableStyles,oe=P.get(l);if(oe||(T=T.ownerDocument||T,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(l,oe),(P=T.querySelector(qp(l)))&&!P._p&&(oe.instance=P,oe.state.loading=5),io.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},io.set(l,p),P||P7(T,l,p,oe.state))),d&&b===null)throw Error(r(528,""));return oe}if(d&&b!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=_f(p),p=hr(T).hoistableScripts,b=p.get(d),b||(b={type:"script",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function wf(l){return'href="'+Ba(l)+'"'}function qp(l){return'link[rel="stylesheet"]['+l+"]"}function oR(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function P7(l,d,p,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),Ma(d,"link",p),Dn(d),l.head.appendChild(d))}function _f(l){return'[src="'+Ba(l)+'"]'}function Hp(l){return"script[async]"+l}function sR(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+Ba(p.href)+'"]');if(b)return d.instance=b,Dn(b),b;var T=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Dn(b),Ma(b,"style",T),_y(b,p.precedence,l),d.instance=b;case"stylesheet":T=wf(p.href);var P=l.querySelector(qp(T));if(P)return d.state.loading|=4,d.instance=P,Dn(P),P;b=oR(p),(T=io.get(T))&&tx(b,T),P=(l.ownerDocument||l).createElement("link"),Dn(P);var oe=P;return oe._p=new Promise(function(Se,ze){oe.onload=Se,oe.onerror=ze}),Ma(P,"link",b),d.state.loading|=4,_y(P,p.precedence,l),d.instance=P;case"script":return P=_f(p.src),(T=l.querySelector(Hp(P)))?(d.instance=T,Dn(T),T):(b=p,(T=io.get(P))&&(b=f({},p),nx(b,T)),l=l.ownerDocument||l,T=l.createElement("script"),Dn(T),Ma(T,"link",b),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,_y(b,p.precedence,l));return d.instance}function _y(l,d,p){for(var b=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=b.length?b[b.length-1]:null,P=T,oe=0;oe<b.length;oe++){var Se=b[oe];if(Se.dataset.precedence===d)P=Se;else if(P!==T)break}P?P.parentNode.insertBefore(l,P.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function tx(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function nx(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var xy=null;function lR(l,d,p){if(xy===null){var b=new Map,T=xy=new Map;T.set(p,b)}else T=xy,b=T.get(p),b||(b=new Map,T.set(p,b));if(b.has(l))return b;for(b.set(l,null),p=p.getElementsByTagName(l),T=0;T<p.length;T++){var P=p[T];if(!(P[Vt]||P[pe]||l==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=P.getAttribute(d)||"";oe=l+oe;var Se=b.get(oe);Se?Se.push(P):b.set(oe,[P])}}return b}function uR(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function F7(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function cR(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Vp=null;function L7(){}function $7(l,d,p){if(Vp===null)throw Error(r(475));var b=Vp;if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=wf(p.href),P=l.querySelector(qp(T));if(P){l=P._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(b.count++,b=Sy.bind(b),l.then(b,b)),d.state.loading|=4,d.instance=P,Dn(P);return}P=l.ownerDocument||l,p=oR(p),(T=io.get(T))&&tx(p,T),P=P.createElement("link"),Dn(P);var oe=P;oe._p=new Promise(function(Se,ze){oe.onload=Se,oe.onerror=ze}),Ma(P,"link",p),d.instance=P}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(b.count++,d=Sy.bind(b),l.addEventListener("load",d),l.addEventListener("error",d))}}function B7(){if(Vp===null)throw Error(r(475));var l=Vp;return l.stylesheets&&l.count===0&&rx(l,l.stylesheets),0<l.count?function(d){var p=setTimeout(function(){if(l.stylesheets&&rx(l,l.stylesheets),l.unsuspend){var b=l.unsuspend;l.unsuspend=null,b()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(p)}}:null}function Sy(){if(this.count--,this.count===0){if(this.stylesheets)rx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Ey=null;function rx(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Ey=new Map,d.forEach(z7,l),Ey=null,Sy.call(l))}function z7(l,d){if(!(d.state.loading&4)){var p=Ey.get(l);if(p)var b=p.get(null);else{p=new Map,Ey.set(l,p);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<T.length;P++){var oe=T[P];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(p.set(oe.dataset.precedence,oe),b=oe)}b&&p.set(null,b)}T=d.instance,oe=T.getAttribute("data-precedence"),P=p.get(oe)||b,P===b&&p.set(null,T),p.set(oe,T),this.count++,b=Sy.bind(this),T.addEventListener("load",b),T.addEventListener("error",b),P?P.parentNode.insertBefore(T,P.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var Gp={$$typeof:E,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function U7(l,d,p,b,T,P,oe,Se){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=b,this.onUncaughtError=T,this.onCaughtError=P,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function dR(l,d,p,b,T,P,oe,Se,ze,ut,_t,kt){return l=new U7(l,d,p,oe,Se,ze,ut,kt),d=1,P===!0&&(d|=24),P=ji(3,null,null,d),l.current=P,P.stateNode=l,d=L1(),d.refCount++,l.pooledCache=d,d.refCount++,P.memoizedState={element:b,isDehydrated:p,cache:d},U1(P),l}function fR(l){return l?(l=ps,l):ps}function hR(l,d,p,b,T,P){T=fR(T),b.context===null?b.context=T:b.pendingContext=T,b=du(d),b.payload={element:p},P=P===void 0?null:P,P!==null&&(b.callback=P),p=fu(l,b,d),p!==null&&($i(p,l,d),xp(p,l,d))}function pR(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function ax(l,d){pR(l,d),(l=l.alternate)&&pR(l,d)}function mR(l){if(l.tag===13){var d=To(l,67108864);d!==null&&$i(d,l,67108864),ax(l,67108864)}}var Cy=!0;function q7(l,d,p,b){var T=ae.T;ae.T=null;var P=re.p;try{re.p=2,ix(l,d,p,b)}finally{re.p=P,ae.T=T}}function H7(l,d,p,b){var T=ae.T;ae.T=null;var P=re.p;try{re.p=8,ix(l,d,p,b)}finally{re.p=P,ae.T=T}}function ix(l,d,p,b){if(Cy){var T=ox(b);if(T===null)G_(l,d,b,ky,p),yR(l,b);else if(G7(T,l,d,p,b))b.stopPropagation();else if(yR(l,b),d&4&&-1<V7.indexOf(l)){for(;T!==null;){var P=Bn(T);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var oe=ve(P.pendingLanes);if(oe!==0){var Se=P;for(Se.pendingLanes|=2,Se.entangledLanes|=2;oe;){var ze=1<<31-zt(oe);Se.entanglements[1]|=ze,oe&=~ze}vs(P),(sr&6)===0&&(uy=ce()+500,$p(0))}}break;case 13:Se=To(P,2),Se!==null&&$i(Se,P,2),dy(),ax(P,2)}if(P=ox(b),P===null&&G_(l,d,b,ky,p),P===T)break;T=P}T!==null&&b.stopPropagation()}else G_(l,d,b,null,p)}}function ox(l){return l=jd(l),sx(l)}var ky=null;function sx(l){if(ky=null,l=Tn(l),l!==null){var d=i(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return ky=l,null}function gR(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case J:return 2;case _e:return 8;case Le:case xe:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var lx=!1,Cu=null,ku=null,Au=null,Wp=new Map,Kp=new Map,Tu=[],V7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yR(l,d){switch(l){case"focusin":case"focusout":Cu=null;break;case"dragenter":case"dragleave":ku=null;break;case"mouseover":case"mouseout":Au=null;break;case"pointerover":case"pointerout":Wp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kp.delete(d.pointerId)}}function Zp(l,d,p,b,T,P){return l===null||l.nativeEvent!==P?(l={blockedOn:d,domEventName:p,eventSystemFlags:b,nativeEvent:P,targetContainers:[T]},d!==null&&(d=Bn(d),d!==null&&mR(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function G7(l,d,p,b,T){switch(d){case"focusin":return Cu=Zp(Cu,l,d,p,b,T),!0;case"dragenter":return ku=Zp(ku,l,d,p,b,T),!0;case"mouseover":return Au=Zp(Au,l,d,p,b,T),!0;case"pointerover":var P=T.pointerId;return Wp.set(P,Zp(Wp.get(P)||null,l,d,p,b,T)),!0;case"gotpointercapture":return P=T.pointerId,Kp.set(P,Zp(Kp.get(P)||null,l,d,p,b,T)),!0}return!1}function bR(l){var d=Tn(l.target);if(d!==null){var p=i(d);if(p!==null){if(d=p.tag,d===13){if(d=o(p),d!==null){l.blockedOn=d,$(l.priority,function(){if(p.tag===13){var b=Li();b=Ct(b);var T=To(p,b);T!==null&&$i(T,p,b),ax(p,b)}});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ay(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=ox(l.nativeEvent);if(p===null){p=l.nativeEvent;var b=new p.constructor(p.type,p);Xi=b,p.target.dispatchEvent(b),Xi=null}else return d=Bn(p),d!==null&&mR(d),l.blockedOn=p,!1;d.shift()}return!0}function vR(l,d,p){Ay(l)&&p.delete(d)}function W7(){lx=!1,Cu!==null&&Ay(Cu)&&(Cu=null),ku!==null&&Ay(ku)&&(ku=null),Au!==null&&Ay(Au)&&(Au=null),Wp.forEach(vR),Kp.forEach(vR)}function Ty(l,d){l.blockedOn===d&&(l.blockedOn=null,lx||(lx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,W7)))}var Ry=null;function wR(l){Ry!==l&&(Ry=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ry===l&&(Ry=null);for(var d=0;d<l.length;d+=3){var p=l[d],b=l[d+1],T=l[d+2];if(typeof b!="function"){if(sx(b||p)===null)continue;break}var P=Bn(p);P!==null&&(l.splice(d,3),d-=3,s_(P,{pending:!0,data:T,method:p.method,action:b},b,T))}}))}function Yp(l){function d(ze){return Ty(ze,l)}Cu!==null&&Ty(Cu,l),ku!==null&&Ty(ku,l),Au!==null&&Ty(Au,l),Wp.forEach(d),Kp.forEach(d);for(var p=0;p<Tu.length;p++){var b=Tu[p];b.blockedOn===l&&(b.blockedOn=null)}for(;0<Tu.length&&(p=Tu[0],p.blockedOn===null);)bR(p),p.blockedOn===null&&Tu.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(b=0;b<p.length;b+=3){var T=p[b],P=p[b+1],oe=T[de]||null;if(typeof P=="function")oe||wR(p);else if(oe){var Se=null;if(P&&P.hasAttribute("formAction")){if(T=P,oe=P[de]||null)Se=oe.formAction;else if(sx(T)!==null)continue}else Se=oe.action;typeof Se=="function"?p[b+1]=Se:(p.splice(b,3),b-=3),wR(p)}}}function ux(l){this._internalRoot=l}Ny.prototype.render=ux.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,b=Li();hR(p,b,l,d,null,null)},Ny.prototype.unmount=ux.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;hR(l.current,2,null,l,null,null),dy(),d[Fe]=null}};function Ny(l){this._internalRoot=l}Ny.prototype.unstable_scheduleHydration=function(l){if(l){var d=q();l={blockedOn:null,target:l,priority:d};for(var p=0;p<Tu.length&&d!==0&&d<Tu[p].priority;p++);Tu.splice(p,0,l),p===0&&bR(l)}};var _R=t.version;if(_R!=="19.1.0")throw Error(r(527,_R,"19.1.0"));re.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var K7={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iy.isDisabled&&Iy.supportsFiber)try{Et=Iy.inject(K7),Lt=Iy}catch{}}return Jp.createRoot=function(l,d){if(!a(l))throw Error(r(299));var p=!1,b="",T=FT,P=LT,oe=$T,Se=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(P=d.onCaughtError),d.onRecoverableError!==void 0&&(oe=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(Se=d.unstable_transitionCallbacks)),d=dR(l,1,!1,null,null,p,b,T,P,oe,Se,null),l[Fe]=d.current,V_(l),new ux(d)},Jp.hydrateRoot=function(l,d,p){if(!a(l))throw Error(r(299));var b=!1,T="",P=FT,oe=LT,Se=$T,ze=null,ut=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(T=p.identifierPrefix),p.onUncaughtError!==void 0&&(P=p.onUncaughtError),p.onCaughtError!==void 0&&(oe=p.onCaughtError),p.onRecoverableError!==void 0&&(Se=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ze=p.unstable_transitionCallbacks),p.formState!==void 0&&(ut=p.formState)),d=dR(l,1,!0,d,p??null,b,T,P,oe,Se,ze,ut),d.context=fR(null),p=d.current,b=Li(),b=Ct(b),T=du(b),T.callback=null,fu(p,T,b),p=b,d.current.lanes=p,et(d,p),vs(d),l[Fe]=d.current,V_(l),new Ny(d)},Jp.version="19.1.0",Jp}var IR;function cz(){if(IR)return fx.exports;IR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fx.exports=uz(),fx.exports}var dz=cz();const fz=Qa(dz);function yO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=yO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function bO(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=yO(e))&&(r&&(r+=" "),r+=t);return r}const JE="-",hz=e=>{const t=mz(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(JE);return s[0]===""&&s.length!==1&&s.shift(),vO(s,t)||pz(o)},getConflictingClassGroupIds:(o,s)=>{const u=n[o]||[];return s&&r[o]?[...u,...r[o]]:u}}},vO=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?vO(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(JE);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},OR=/^\[(.+)\]$/,pz=e=>{if(OR.test(e)){const t=OR.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},mz=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)T2(n[a],r,a,t);return r},T2=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:DR(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(gz(a)){T2(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{T2(o,DR(t,i),n,r)})})},DR=(e,t)=>{let n=e;return t.split(JE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},gz=e=>e.isThemeGetter,yz=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},R2="!",N2=":",bz=N2.length,vz=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let o=0,s=0,u=0,c;for(let w=0;w<a.length;w++){let v=a[w];if(o===0&&s===0){if(v===N2){i.push(a.slice(u,w)),u=w+bz;continue}if(v==="/"){c=w;continue}}v==="["?o++:v==="]"?o--:v==="("?s++:v===")"&&s--}const f=i.length===0?a:a.substring(u),h=wz(f),m=h!==f,g=c&&c>u?c-u:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+N2,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},wz=e=>e.endsWith(R2)?e.substring(0,e.length-1):e.startsWith(R2)?e.substring(1):e,_z=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},xz=e=>({cache:yz(e.cacheSize),parseClassName:vz(e),sortModifiers:_z(e),...hz(e)}),Sz=/\s+/,Ez=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(Sz);let u="";for(let c=s.length-1;c>=0;c-=1){const f=s[c],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:v}=n(f);if(h){u=f+(u.length>0?" "+u:u);continue}let _=!!v,x=r(_?w.substring(0,v):w);if(!x){if(!_){u=f+(u.length>0?" "+u:u);continue}if(x=r(w),!x){u=f+(u.length>0?" "+u:u);continue}_=!1}const S=i(m).join(":"),E=g?S+R2:S,C=E+x;if(o.includes(C))continue;o.push(C);const A=a(x,_);for(let O=0;O<A.length;++O){const I=A[O];o.push(E+I)}u=f+(u.length>0?" "+u:u)}return u};function Cz(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=wO(t))&&(r&&(r+=" "),r+=n);return r}const wO=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=wO(e[r]))&&(n&&(n+=" "),n+=t);return n};function kz(e,...t){let n,r,a,i=o;function o(u){const c=t.reduce((f,h)=>h(f),e());return n=xz(c),r=n.cache.get,a=n.cache.set,i=s,s(u)}function s(u){const c=r(u);if(c)return c;const f=Ez(u,n);return a(u,f),f}return function(){return i(Cz.apply(null,arguments))}}const ca=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},_O=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,xO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Az=/^\d+\/\d+$/,Tz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Rz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Nz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Iz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Oz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xf=e=>Az.test(e),Fn=e=>!!e&&!Number.isNaN(Number(e)),Nu=e=>!!e&&Number.isInteger(Number(e)),gx=e=>e.endsWith("%")&&Fn(e.slice(0,-1)),yl=e=>Tz.test(e),Dz=()=>!0,jz=e=>Rz.test(e)&&!Nz.test(e),SO=()=>!1,Mz=e=>Iz.test(e),Pz=e=>Oz.test(e),Fz=e=>!en(e)&&!tn(e),Lz=e=>vh(e,kO,SO),en=e=>_O.test(e),Vc=e=>vh(e,AO,jz),yx=e=>vh(e,qz,Fn),jR=e=>vh(e,EO,SO),$z=e=>vh(e,CO,Pz),Oy=e=>vh(e,TO,Mz),tn=e=>xO.test(e),Qp=e=>wh(e,AO),Bz=e=>wh(e,Hz),MR=e=>wh(e,EO),zz=e=>wh(e,kO),Uz=e=>wh(e,CO),Dy=e=>wh(e,TO,!0),vh=(e,t,n)=>{const r=_O.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},wh=(e,t,n=!1)=>{const r=xO.exec(e);return r?r[1]?t(r[1]):n:!1},EO=e=>e==="position"||e==="percentage",CO=e=>e==="image"||e==="url",kO=e=>e==="length"||e==="size"||e==="bg-size",AO=e=>e==="length",qz=e=>e==="number",Hz=e=>e==="family-name",TO=e=>e==="shadow",Vz=()=>{const e=ca("color"),t=ca("font"),n=ca("text"),r=ca("font-weight"),a=ca("tracking"),i=ca("leading"),o=ca("breakpoint"),s=ca("container"),u=ca("spacing"),c=ca("radius"),f=ca("shadow"),h=ca("inset-shadow"),m=ca("text-shadow"),g=ca("drop-shadow"),w=ca("blur"),v=ca("perspective"),_=ca("aspect"),x=ca("ease"),S=ca("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...C(),tn,en],O=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],D=()=>[tn,en,u],B=()=>[xf,"full","auto",...D()],K=()=>[Nu,"none","subgrid",tn,en],Q=()=>["auto",{span:["full",Nu,tn,en]},Nu,tn,en],F=()=>[Nu,"auto",tn,en],W=()=>["auto","min","max","fr",tn,en],U=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],he=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...D()],re=()=>[xf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],ee=()=>[e,tn,en],se=()=>[...C(),MR,jR,{position:[tn,en]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",zz,Lz,{size:[tn,en]}],Y=()=>[gx,Qp,Vc],ne=()=>["","none","full",c,tn,en],be=()=>["",Fn,Qp,Vc],Ee=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[Fn,gx,MR,jR],Re=()=>["","none",w,tn,en],Te=()=>["none",Fn,tn,en],He=()=>["none",Fn,tn,en],it=()=>[Fn,tn,en],Ie=()=>[xf,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yl],breakpoint:[yl],color:[Dz],container:[yl],"drop-shadow":[yl],ease:["in","out","in-out"],font:[Fz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yl],shadow:[yl],spacing:["px",Fn],text:[yl],"text-shadow":[yl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xf,en,tn,_]}],container:["container"],columns:[{columns:[Fn,en,tn,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:B()}],"inset-x":[{"inset-x":B()}],"inset-y":[{"inset-y":B()}],start:[{start:B()}],end:[{end:B()}],top:[{top:B()}],right:[{right:B()}],bottom:[{bottom:B()}],left:[{left:B()}],visibility:["visible","invisible","collapse"],z:[{z:[Nu,"auto",tn,en]}],basis:[{basis:[xf,"full","auto",s,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Fn,xf,"auto","initial","none",en]}],grow:[{grow:["",Fn,tn,en]}],shrink:[{shrink:["",Fn,tn,en]}],order:[{order:[Nu,"first","last","none",tn,en]}],"grid-cols":[{"grid-cols":K()}],"col-start-end":[{col:Q()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":K()}],"row-start-end":[{row:Q()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...he(),"normal"]}],"justify-self":[{"justify-self":["auto",...he()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...he(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...he(),{baseline:["","last"]}]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...he(),"baseline"]}],"place-self":[{"place-self":["auto",...he()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[s,"screen",...re()]}],"min-w":[{"min-w":[s,"screen","none",...re()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...re()]}],h:[{h:["screen",...re()]}],"min-h":[{"min-h":["screen","none",...re()]}],"max-h":[{"max-h":["screen",...re()]}],"font-size":[{text:["base",n,Qp,Vc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tn,yx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",gx,en]}],"font-family":[{font:[Bz,en,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,tn,en]}],"line-clamp":[{"line-clamp":[Fn,"none",tn,yx]}],leading:[{leading:[i,...D()]}],"list-image":[{"list-image":["none",tn,en]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tn,en]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ee()}],"text-color":[{text:ee()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[Fn,"from-font","auto",tn,Vc]}],"text-decoration-color":[{decoration:ee()}],"underline-offset":[{"underline-offset":[Fn,"auto",tn,en]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tn,en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tn,en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Nu,tn,en],radial:["",tn,en],conic:[Nu,tn,en]},Uz,$z]}],"bg-color":[{bg:ee()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:ee()}],"gradient-via":[{via:ee()}],"gradient-to":[{to:ee()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:be()}],"border-w-x":[{"border-x":be()}],"border-w-y":[{"border-y":be()}],"border-w-s":[{"border-s":be()}],"border-w-e":[{"border-e":be()}],"border-w-t":[{"border-t":be()}],"border-w-r":[{"border-r":be()}],"border-w-b":[{"border-b":be()}],"border-w-l":[{"border-l":be()}],"divide-x":[{"divide-x":be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ee(),"hidden","none"]}],"divide-style":[{divide:[...Ee(),"hidden","none"]}],"border-color":[{border:ee()}],"border-color-x":[{"border-x":ee()}],"border-color-y":[{"border-y":ee()}],"border-color-s":[{"border-s":ee()}],"border-color-e":[{"border-e":ee()}],"border-color-t":[{"border-t":ee()}],"border-color-r":[{"border-r":ee()}],"border-color-b":[{"border-b":ee()}],"border-color-l":[{"border-l":ee()}],"divide-color":[{divide:ee()}],"outline-style":[{outline:[...Ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Fn,tn,en]}],"outline-w":[{outline:["",Fn,Qp,Vc]}],"outline-color":[{outline:ee()}],shadow:[{shadow:["","none",f,Dy,Oy]}],"shadow-color":[{shadow:ee()}],"inset-shadow":[{"inset-shadow":["none",h,Dy,Oy]}],"inset-shadow-color":[{"inset-shadow":ee()}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ee()}],"ring-offset-w":[{"ring-offset":[Fn,Vc]}],"ring-offset-color":[{"ring-offset":ee()}],"inset-ring-w":[{"inset-ring":be()}],"inset-ring-color":[{"inset-ring":ee()}],"text-shadow":[{"text-shadow":["none",m,Dy,Oy]}],"text-shadow-color":[{"text-shadow":ee()}],opacity:[{opacity:[Fn,tn,en]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Fn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":ee()}],"mask-image-linear-to-color":[{"mask-linear-to":ee()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":ee()}],"mask-image-t-to-color":[{"mask-t-to":ee()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":ee()}],"mask-image-r-to-color":[{"mask-r-to":ee()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":ee()}],"mask-image-b-to-color":[{"mask-b-to":ee()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":ee()}],"mask-image-l-to-color":[{"mask-l-to":ee()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":ee()}],"mask-image-x-to-color":[{"mask-x-to":ee()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":ee()}],"mask-image-y-to-color":[{"mask-y-to":ee()}],"mask-image-radial":[{"mask-radial":[tn,en]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":ee()}],"mask-image-radial-to-color":[{"mask-radial-to":ee()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Fn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":ee()}],"mask-image-conic-to-color":[{"mask-conic-to":ee()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tn,en]}],filter:[{filter:["","none",tn,en]}],blur:[{blur:Re()}],brightness:[{brightness:[Fn,tn,en]}],contrast:[{contrast:[Fn,tn,en]}],"drop-shadow":[{"drop-shadow":["","none",g,Dy,Oy]}],"drop-shadow-color":[{"drop-shadow":ee()}],grayscale:[{grayscale:["",Fn,tn,en]}],"hue-rotate":[{"hue-rotate":[Fn,tn,en]}],invert:[{invert:["",Fn,tn,en]}],saturate:[{saturate:[Fn,tn,en]}],sepia:[{sepia:["",Fn,tn,en]}],"backdrop-filter":[{"backdrop-filter":["","none",tn,en]}],"backdrop-blur":[{"backdrop-blur":Re()}],"backdrop-brightness":[{"backdrop-brightness":[Fn,tn,en]}],"backdrop-contrast":[{"backdrop-contrast":[Fn,tn,en]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Fn,tn,en]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Fn,tn,en]}],"backdrop-invert":[{"backdrop-invert":["",Fn,tn,en]}],"backdrop-opacity":[{"backdrop-opacity":[Fn,tn,en]}],"backdrop-saturate":[{"backdrop-saturate":[Fn,tn,en]}],"backdrop-sepia":[{"backdrop-sepia":["",Fn,tn,en]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tn,en]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Fn,"initial",tn,en]}],ease:[{ease:["linear","initial",x,tn,en]}],delay:[{delay:[Fn,tn,en]}],animate:[{animate:["none",S,tn,en]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,tn,en]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:He()}],"scale-x":[{"scale-x":He()}],"scale-y":[{"scale-y":He()}],"scale-z":[{"scale-z":He()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[tn,en,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ie()}],"translate-x":[{"translate-x":Ie()}],"translate-y":[{"translate-y":Ie()}],"translate-z":[{"translate-z":Ie()}],"translate-none":["translate-none"],accent:[{accent:ee()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ee()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tn,en]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tn,en]}],fill:[{fill:["none",...ee()]}],"stroke-w":[{stroke:[Fn,Qp,Vc,yx]}],stroke:[{stroke:["none",...ee()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Gz=kz(Vz);function Dt(...e){return Gz(bO(e))}const PR=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:y.jsx("div",{className:Dt(n),children:r.map(a=>{var o,s;const i=t==="trigger"?(o=a.triggerRenderer)==null?void 0:o.call(a):(s=a.renderer)==null?void 0:s.call(a);return i?y.jsx(vt.Fragment,{children:i},a.id):null})})};function FR(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ol(...e){return t=>{let n=!1;const r=e.map(a=>{const i=FR(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():FR(e[a],null)}}}}function _n(...e){return R.useCallback(Ol(...e),e)}function qu(e){const t=Wz(e),n=R.forwardRef((r,a)=>{const{children:i,...o}=r,s=R.Children.toArray(i),u=s.find(Zz);if(u){const c=u.props.children,f=s.map(h=>h===u?R.Children.count(c)>1?R.Children.only(null):R.isValidElement(c)?c.props.children:null:h);return y.jsx(t,{...o,ref:a,children:R.isValidElement(c)?R.cloneElement(c,void 0,f):null})}return y.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var RO=qu("Slot");function Wz(e){const t=R.forwardRef((n,r)=>{const{children:a,...i}=n;if(R.isValidElement(a)){const o=Xz(a),s=Yz(i,a.props);return a.type!==R.Fragment&&(s.ref=r?Ol(r,o):o),R.cloneElement(a,s)}return R.Children.count(a)>1?R.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var NO=Symbol("radix.slottable");function Kz(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=NO,t}function Zz(e){return R.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===NO}function Yz(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{i(...s),a(...s)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function Xz(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const LR=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,$R=bO,QE=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return $R(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(c=>{const f=n==null?void 0:n[c],h=i==null?void 0:i[c];if(f===null)return null;const m=LR(f)||LR(h);return a[c][m]}),s=n&&Object.entries(n).reduce((c,f)=>{let[h,m]=f;return m===void 0||(c[h]=m),c},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:m,...g}=f;return Object.entries(g).every(w=>{let[v,_]=w;return Array.isArray(_)?_.includes({...i,...s}[v]):{...i,...s}[v]===_})?[...c,h,m]:c},[]);return $R(e,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},Jz=QE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Ut({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?RO:"button";return y.jsx(i,{"data-slot":"button",className:Dt(Jz({variant:t,size:n,className:e})),...a})}const BR=e=>{let t;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,m))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=t=e(r,a,s);return s},Qz=e=>e?BR(e):BR,eU=e=>e;function tU(e,t=eU){const n=vt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return vt.useDebugValue(n),n}const zR=e=>{const t=Qz(e),n=r=>tU(t,r);return Object.assign(n,t),n},Ul=e=>e?zR(e):zR;var IO=Symbol.for("immer-nothing"),UR=Symbol.for("immer-draftable"),rr=Symbol.for("immer-state");function go(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Kf=Object.getPrototypeOf;function Zf(e){return!!e&&!!e[rr]}function Dl(e){var t;return e?OO(e)||Array.isArray(e)||!!e[UR]||!!((t=e.constructor)!=null&&t[UR])||Uv(e)||qv(e):!1}var nU=Object.prototype.constructor.toString();function OO(e){if(!e||typeof e!="object")return!1;const t=Kf(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===nU}function _m(e,t){zv(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function zv(e){const t=e[rr];return t?t.type_:Array.isArray(e)?1:Uv(e)?2:qv(e)?3:0}function I2(e,t){return zv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function DO(e,t,n){const r=zv(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function rU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Uv(e){return e instanceof Map}function qv(e){return e instanceof Set}function Ea(e){return e.copy_||e.base_}function O2(e,t){if(Uv(e))return new Map(e);if(qv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=OO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[rr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Kf(e),r)}else{const r=Kf(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function eC(e,t=!1){return Hv(e)||Zf(e)||!Dl(e)||(zv(e)>1&&(e.set=e.add=e.clear=e.delete=aU),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>eC(r,!0))),e}function aU(){go(2)}function Hv(e){return Object.isFrozen(e)}var D2={};function sd(e){const t=D2[e];return t||go(0,e),t}function iU(e,t){D2[e]||(D2[e]=t)}var xm;function Eb(){return xm}function oU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function qR(e,t){t&&(sd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function j2(e){M2(e),e.drafts_.forEach(sU),e.drafts_=null}function M2(e){e===xm&&(xm=e.parent_)}function HR(e){return xm=oU(xm,e)}function sU(e){const t=e[rr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function VR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[rr].modified_&&(j2(t),go(4)),Dl(e)&&(e=Cb(t,e),t.parent_||kb(t,e)),t.patches_&&sd("Patches").generateReplacementPatches_(n[rr].base_,e,t.patches_,t.inversePatches_)):e=Cb(t,n,[]),j2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==IO?e:void 0}function Cb(e,t,n){if(Hv(t))return t;const r=t[rr];if(!r)return _m(t,(a,i)=>GR(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return kb(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),_m(i,(s,u)=>GR(e,r,a,s,u,n,o)),kb(e,a,!1),n&&e.patches_&&sd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function GR(e,t,n,r,a,i,o){if(Zf(a)){const s=i&&t&&t.type_!==3&&!I2(t.assigned_,r)?i.concat(r):void 0,u=Cb(e,a,s);if(DO(n,r,u),Zf(u))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(Dl(a)&&!Hv(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Cb(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&kb(e,a)}}function kb(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&eC(t,n)}function lU(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Eb(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=tC;n&&(a=[r],i=Sm);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var tC={get(e,t){if(t===rr)return e;const n=Ea(e);if(!I2(n,t))return uU(e,n,t);const r=n[t];return e.finalized_||!Dl(r)?r:r===bx(e.base_,t)?(vx(e),e.copy_[t]=Em(r,e)):r},has(e,t){return t in Ea(e)},ownKeys(e){return Reflect.ownKeys(Ea(e))},set(e,t,n){const r=jO(Ea(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=bx(Ea(e),t),i=a==null?void 0:a[rr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(rU(n,a)&&(n!==void 0||I2(e.base_,t)))return!0;vx(e),_l(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return bx(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,vx(e),_l(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ea(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){go(11)},getPrototypeOf(e){return Kf(e.base_)},setPrototypeOf(){go(12)}},Sm={};_m(tC,(e,t)=>{Sm[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Sm.deleteProperty=function(e,t){return Sm.set.call(this,e,t,void 0)};Sm.set=function(e,t,n){return tC.set.call(this,e[0],t,n,e[0])};function bx(e,t){const n=e[rr];return(n?Ea(n):e)[t]}function uU(e,t,n){var a;const r=jO(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function jO(e,t){if(!(t in e))return;let n=Kf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Kf(n)}}function _l(e){e.modified_||(e.modified_=!0,e.parent_&&_l(e.parent_))}function vx(e){e.copy_||(e.copy_=O2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(u=i,...c){return o.produce(u,f=>n.call(this,f,...c))}}typeof n!="function"&&go(6),r!==void 0&&typeof r!="function"&&go(7);let a;if(Dl(t)){const i=HR(this),o=Em(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?j2(i):M2(i)}return qR(i,r),VR(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===IO&&(a=void 0),this.autoFreeze_&&eC(a,!0),r){const i=[],o=[];sd("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else go(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,u=>t(u,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Dl(e)||go(8),Zf(e)&&(e=dU(e));const t=HR(this),n=Em(e,void 0);return n[rr].isManual_=!0,M2(t),n}finishDraft(e,t){const n=e&&e[rr];(!n||!n.isManual_)&&go(9);const{scope_:r}=n;return qR(r,t),VR(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=sd("Patches").applyPatches_;return Zf(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Em(e,t){const n=Uv(e)?sd("MapSet").proxyMap_(e,t):qv(e)?sd("MapSet").proxySet_(e,t):lU(e,t);return(t?t.scope_:Eb()).drafts_.push(n),n}function dU(e){return Zf(e)||go(10,e),MO(e)}function MO(e){if(!Dl(e)||Hv(e))return e;const t=e[rr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=O2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=O2(e,!0);return _m(n,(r,a)=>{DO(n,r,MO(a))}),t&&(t.finalized_=!1),n}function fU(){class e extends Map{constructor(u,c){super(),this[rr]={type_:2,parent_:c,scope_:c?c.scope_:Eb(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Ea(this[rr]).size}has(u){return Ea(this[rr]).has(u)}set(u,c){const f=this[rr];return o(f),(!Ea(f).has(u)||Ea(f).get(u)!==c)&&(n(f),_l(f),f.assigned_.set(u,!0),f.copy_.set(u,c),f.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const c=this[rr];return o(c),n(c),_l(c),c.base_.has(u)?c.assigned_.set(u,!1):c.assigned_.delete(u),c.copy_.delete(u),!0}clear(){const u=this[rr];o(u),Ea(u).size&&(n(u),_l(u),u.assigned_=new Map,_m(u.base_,c=>{u.assigned_.set(c,!1)}),u.copy_.clear())}forEach(u,c){const f=this[rr];Ea(f).forEach((h,m,g)=>{u.call(c,this.get(m),m,this)})}get(u){const c=this[rr];o(c);const f=Ea(c).get(u);if(c.finalized_||!Dl(f)||f!==c.base_.get(u))return f;const h=Em(f,c);return n(c),c.copy_.set(u,h),h}keys(){return Ea(this[rr]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=u.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=u.next();if(c.done)return c;const f=this.get(c.value);return{done:!1,value:[c.value,f]}}}}[Symbol.iterator](){return this.entries()}}function t(s,u){return new e(s,u)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(u,c){super(),this[rr]={type_:3,parent_:c,scope_:c?c.scope_:Eb(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Ea(this[rr]).size}has(u){const c=this[rr];return o(c),c.copy_?!!(c.copy_.has(u)||c.drafts_.has(u)&&c.copy_.has(c.drafts_.get(u))):c.base_.has(u)}add(u){const c=this[rr];return o(c),this.has(u)||(i(c),_l(c),c.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const c=this[rr];return o(c),i(c),_l(c),c.copy_.delete(u)||(c.drafts_.has(u)?c.copy_.delete(c.drafts_.get(u)):!1)}clear(){const u=this[rr];o(u),Ea(u).size&&(i(u),_l(u),u.copy_.clear())}values(){const u=this[rr];return o(u),i(u),u.copy_.values()}entries(){const u=this[rr];return o(u),i(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,c){const f=this.values();let h=f.next();for(;!h.done;)u.call(c,h.value,h.value,this),h=f.next()}}function a(s,u){return new r(s,u)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(u=>{if(Dl(u)){const c=Em(u,s);s.drafts_.set(u,c),s.copy_.add(c)}else s.copy_.add(u)}))}function o(s){s.revoked_&&go(3,JSON.stringify(Ea(s)))}iU("MapSet",{proxyMap_:t,proxySet_:a})}var Ki=new cU,hU=Ki.produce;Ki.produceWithPatches.bind(Ki);Ki.setAutoFreeze.bind(Ki);Ki.setUseStrictShallowCopy.bind(Ki);Ki.applyPatches.bind(Ki);Ki.createDraft.bind(Ki);Ki.finishDraft.bind(Ki);const pU=e=>(t,n,r)=>(r.setState=(a,i,...o)=>{const s=typeof a=="function"?hU(a):a;return t(s,i,...o)},e(r.setState,n,r)),ql=pU,ma=Ul(ql((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const o={modId:r,callback:a,order:i};return e(s=>{s.middlewareRegistry[n]||(s.middlewareRegistry[n]=[]),s.middlewareRegistry[n].push(o),s.middlewareRegistry[n].sort((u,c)=>(u.order??0)-(c.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var o;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(s=>!(s.modId===r&&s.callback===a)),((o=i.middlewareRegistry[n])==null?void 0:o.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(o=>{o.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${o.tools[r].modId}". Overwriting with registration from mod "${n}".`),o.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var hb={exports:{}},mU=hb.exports,WR;function gU(){return WR||(WR=1,function(e,t){(function(n,r){e.exports=r()})(mU,function(){var n=function(k,j){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,te){Z.__proto__=te}||function(Z,te){for(var ue in te)Object.prototype.hasOwnProperty.call(te,ue)&&(Z[ue]=te[ue])})(k,j)},r=function(){return(r=Object.assign||function(k){for(var j,Z=1,te=arguments.length;Z<te;Z++)for(var ue in j=arguments[Z])Object.prototype.hasOwnProperty.call(j,ue)&&(k[ue]=j[ue]);return k}).apply(this,arguments)};function a(k,j,Z){for(var te,ue=0,we=j.length;ue<we;ue++)!te&&ue in j||((te=te||Array.prototype.slice.call(j,0,ue))[ue]=j[ue]);return k.concat(te||Array.prototype.slice.call(j))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:nd,o=Object.keys,s=Array.isArray;function u(k,j){return typeof j!="object"||o(j).forEach(function(Z){k[Z]=j[Z]}),k}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function h(k,j){return f.call(k,j)}function m(k,j){typeof j=="function"&&(j=j(c(k))),(typeof Reflect>"u"?o:Reflect.ownKeys)(j).forEach(function(Z){w(k,Z,j[Z])})}var g=Object.defineProperty;function w(k,j,Z,te){g(k,j,u(Z&&h(Z,"get")&&typeof Z.get=="function"?{get:Z.get,set:Z.set,configurable:!0}:{value:Z,configurable:!0,writable:!0},te))}function v(k){return{from:function(j){return k.prototype=Object.create(j.prototype),w(k.prototype,"constructor",k),{extend:m.bind(null,k.prototype)}}}}var _=Object.getOwnPropertyDescriptor,x=[].slice;function S(k,j,Z){return x.call(k,j,Z)}function E(k,j){return j(k)}function C(k){if(!k)throw new Error("Assertion Failed")}function A(k){i.setImmediate?setImmediate(k):setTimeout(k,0)}function O(k,j){if(typeof j=="string"&&h(k,j))return k[j];if(!j)return k;if(typeof j!="string"){for(var Z=[],te=0,ue=j.length;te<ue;++te){var we=O(k,j[te]);Z.push(we)}return Z}var Me=j.indexOf(".");if(Me!==-1){var $e=k[j.substr(0,Me)];return $e==null?void 0:O($e,j.substr(Me+1))}}function I(k,j,Z){if(k&&j!==void 0&&!("isFrozen"in Object&&Object.isFrozen(k)))if(typeof j!="string"&&"length"in j){C(typeof Z!="string"&&"length"in Z);for(var te=0,ue=j.length;te<ue;++te)I(k,j[te],Z[te])}else{var we,Me,$e=j.indexOf(".");$e!==-1?(we=j.substr(0,$e),(Me=j.substr($e+1))===""?Z===void 0?s(k)&&!isNaN(parseInt(we))?k.splice(we,1):delete k[we]:k[we]=Z:I($e=!($e=k[we])||!h(k,we)?k[we]={}:$e,Me,Z)):Z===void 0?s(k)&&!isNaN(parseInt(j))?k.splice(j,1):delete k[j]:k[j]=Z}}function D(k){var j,Z={};for(j in k)h(k,j)&&(Z[j]=k[j]);return Z}var B=[].concat;function K(k){return B.apply([],k)}var Et="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(K([8,16,32,64].map(function(k){return["Int","Uint","Float"].map(function(j){return j+k+"Array"})}))).filter(function(k){return i[k]}),Q=new Set(Et.map(function(k){return i[k]})),F=null;function W(k){return F=new WeakMap,k=function j(Z){if(!Z||typeof Z!="object")return Z;var te=F.get(Z);if(te)return te;if(s(Z)){te=[],F.set(Z,te);for(var ue=0,we=Z.length;ue<we;++ue)te.push(j(Z[ue]))}else if(Q.has(Z.constructor))te=Z;else{var Me,$e=c(Z);for(Me in te=$e===Object.prototype?{}:Object.create($e),F.set(Z,te),Z)h(Z,Me)&&(te[Me]=j(Z[Me]))}return te}(k),F=null,k}var U={}.toString;function he(k){return U.call(k).slice(8,-1)}var ae=typeof Symbol<"u"?Symbol.iterator:"@@iterator",re=typeof ae=="symbol"?function(k){var j;return k!=null&&(j=k[ae])&&j.apply(k)}:function(){return null};function ee(k,j){return j=k.indexOf(j),0<=j&&k.splice(j,1),0<=j}var se={};function V(k){var j,Z,te,ue;if(arguments.length===1){if(s(k))return k.slice();if(this===se&&typeof k=="string")return[k];if(ue=re(k)){for(Z=[];!(te=ue.next()).done;)Z.push(te.value);return Z}if(k==null)return[k];if(typeof(j=k.length)!="number")return[k];for(Z=new Array(j);j--;)Z[j]=k[j];return Z}for(j=arguments.length,Z=new Array(j);j--;)Z[j]=arguments[j];return Z}var X=typeof Symbol<"u"?function(k){return k[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ht=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ai=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ht),Y={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ne(k,j){this.name=k,this.message=j}function be(k,j){return k+". Errors: "+Object.keys(j).map(function(Z){return j[Z].toString()}).filter(function(Z,te,ue){return ue.indexOf(Z)===te}).join(`
`)}function Ee(k,j,Z,te){this.failures=j,this.failedKeys=te,this.successCount=Z,this.message=be(k,j)}function De(k,j){this.name="BulkError",this.failures=Object.keys(j).map(function(Z){return j[Z]}),this.failuresByPos=j,this.message=be(k,this.failures)}v(ne).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(Ee).from(ne),v(De).from(ne);var Pe=ai.reduce(function(k,j){return k[j]=j+"Error",k},{}),Re=ne,Te=ai.reduce(function(k,j){var Z=j+"Error";function te(ue,we){this.name=Z,ue?typeof ue=="string"?(this.message="".concat(ue).concat(we?`
 `+we:""),this.inner=we||null):typeof ue=="object"&&(this.message="".concat(ue.name," ").concat(ue.message),this.inner=ue):(this.message=Y[j]||Z,this.inner=null)}return v(te).from(Re),k[j]=te,k},{});Te.Syntax=SyntaxError,Te.Type=TypeError,Te.Range=RangeError;var He=ht.reduce(function(k,j){return k[j+"Error"]=Te[j],k},{}),it=ai.reduce(function(k,j){return["Syntax","Type","Range"].indexOf(j)===-1&&(k[j+"Error"]=Te[j]),k},{});function Ie(){}function Ae(k){return k}function z(k,j){return k==null||k===Ae?j:function(Z){return j(k(Z))}}function ke(k,j){return function(){k.apply(this,arguments),j.apply(this,arguments)}}function Ne(k,j){return k===Ie?j:function(){var Z=k.apply(this,arguments);Z!==void 0&&(arguments[0]=Z);var te=this.onsuccess,ue=this.onerror;this.onsuccess=null,this.onerror=null;var we=j.apply(this,arguments);return te&&(this.onsuccess=this.onsuccess?ke(te,this.onsuccess):te),ue&&(this.onerror=this.onerror?ke(ue,this.onerror):ue),we!==void 0?we:Z}}function ce(k,j){return k===Ie?j:function(){k.apply(this,arguments);var Z=this.onsuccess,te=this.onerror;this.onsuccess=this.onerror=null,j.apply(this,arguments),Z&&(this.onsuccess=this.onsuccess?ke(Z,this.onsuccess):Z),te&&(this.onerror=this.onerror?ke(te,this.onerror):te)}}function ie(k,j){return k===Ie?j:function(Z){var te=k.apply(this,arguments);u(Z,te);var ue=this.onsuccess,we=this.onerror;return this.onsuccess=null,this.onerror=null,Z=j.apply(this,arguments),ue&&(this.onsuccess=this.onsuccess?ke(ue,this.onsuccess):ue),we&&(this.onerror=this.onerror?ke(we,this.onerror):we),te===void 0?Z===void 0?void 0:Z:u(te,Z)}}function J(k,j){return k===Ie?j:function(){return j.apply(this,arguments)!==!1&&k.apply(this,arguments)}}function _e(k,j){return k===Ie?j:function(){var Z=k.apply(this,arguments);if(Z&&typeof Z.then=="function"){for(var te=this,ue=arguments.length,we=new Array(ue);ue--;)we[ue]=arguments[ue];return Z.then(function(){return j.apply(te,we)})}return j.apply(this,arguments)}}it.ModifyError=Ee,it.DexieError=ne,it.BulkError=De;var Le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xe(k){Le=k}var Ve={},xt=100,Et=typeof Promise>"u"?[]:function(){var k=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[k,c(k),k];var j=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[j,c(j),k]}(),ht=Et[0],ai=Et[1],Et=Et[2],ai=ai&&ai.then,Lt=ht&&ht.constructor,Tt=!!Et,zt=function(k,j){le.push([k,j]),N&&(queueMicrotask(ye),N=!1)},ge=!0,N=!0,H=[],fe=[],Oe=Ae,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ie,pgp:!1,env:{},finalize:Ie},Ce=ve,le=[],ct=0,yt=[];function M(k){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var j=this._PSD=Ce;if(typeof k!="function"){if(k!==Ve)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&me(this,this._value))}this._state=null,this._value=null,++j.ref,function Z(te,ue){try{ue(function(we){if(te._state===null){if(we===te)throw new TypeError("A promise cannot be resolved with itself.");var Me=te._lib&&q();we&&typeof we.then=="function"?Z(te,function($e,We){we instanceof M?we._then($e,We):we.then($e,We)}):(te._state=!0,te._value=we,je(te)),Me&&$()}},me.bind(null,te))}catch(we){me(te,we)}}(this,k)}var Be={get:function(){var k=Ce,j=Bt;function Z(te,ue){var we=this,Me=!k.global&&(k!==Ce||j!==Bt),$e=Me&&!Bn(),We=new M(function(Ye,tt){Ke(we,new et(os(te,k,Me,$e),os(ue,k,Me,$e),Ye,tt,k))});return this._consoleTask&&(We._consoleTask=this._consoleTask),We}return Z.prototype=Ve,Z},set:function(k){w(this,"then",k&&k.prototype===Ve?Be:{get:function(){return k},set:Be.set})}};function et(k,j,Z,te,ue){this.onFulfilled=typeof k=="function"?k:null,this.onRejected=typeof j=="function"?j:null,this.resolve=Z,this.reject=te,this.psd=ue}function me(k,j){var Z,te;fe.push(j),k._state===null&&(Z=k._lib&&q(),j=Oe(j),k._state=!1,k._value=j,te=k,H.some(function(ue){return ue._value===te._value})||H.push(te),je(k),Z&&$())}function je(k){var j=k._listeners;k._listeners=[];for(var Z=0,te=j.length;Z<te;++Z)Ke(k,j[Z]);var ue=k._PSD;--ue.ref||ue.finalize(),ct===0&&(++ct,zt(function(){--ct==0&&G()},[]))}function Ke(k,j){if(k._state!==null){var Z=k._state?j.onFulfilled:j.onRejected;if(Z===null)return(k._state?j.resolve:j.reject)(k._value);++j.psd.ref,++ct,zt(Ct,[Z,k,j])}else k._listeners.push(j)}function Ct(k,j,Z){try{var te,ue=j._value;!j._state&&fe.length&&(fe=[]),te=Le&&j._consoleTask?j._consoleTask.run(function(){return k(ue)}):k(ue),j._state||fe.indexOf(ue)!==-1||function(we){for(var Me=H.length;Me;)if(H[--Me]._value===we._value)return H.splice(Me,1)}(j),Z.resolve(te)}catch(we){Z.reject(we)}finally{--ct==0&&G(),--Z.psd.ref||Z.psd.finalize()}}function ye(){is(ve,function(){q()&&$()})}function q(){var k=ge;return N=ge=!1,k}function $(){var k,j,Z;do for(;0<le.length;)for(k=le,le=[],Z=k.length,j=0;j<Z;++j){var te=k[j];te[0].apply(null,te[1])}while(0<le.length);N=ge=!0}function G(){var k=H;H=[],k.forEach(function(te){te._PSD.onunhandled.call(null,te._value,te)});for(var j=yt.slice(0),Z=j.length;Z;)j[--Z]()}function pe(k){return new M(Ve,!1,k)}function de(k,j){var Z=Ce;return function(){var te=q(),ue=Ce;try{return Dn(Z,!0),k.apply(this,arguments)}catch(we){j&&j(we)}finally{Dn(ue,!1),te&&$()}}}m(M.prototype,{then:Be,_then:function(k,j){Ke(this,new et(null,null,k,j,Ce))},catch:function(k){if(arguments.length===1)return this.then(null,k);var j=k,Z=arguments[1];return typeof j=="function"?this.then(null,function(te){return(te instanceof j?Z:pe)(te)}):this.then(null,function(te){return(te&&te.name===j?Z:pe)(te)})},finally:function(k){return this.then(function(j){return M.resolve(k()).then(function(){return j})},function(j){return M.resolve(k()).then(function(){return pe(j)})})},timeout:function(k,j){var Z=this;return k<1/0?new M(function(te,ue){var we=setTimeout(function(){return ue(new Te.Timeout(j))},k);Z.then(te,ue).finally(clearTimeout.bind(null,we))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(M.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=ti(),m(M,{all:function(){var k=V.apply(null,arguments).map(fr);return new M(function(j,Z){k.length===0&&j([]);var te=k.length;k.forEach(function(ue,we){return M.resolve(ue).then(function(Me){k[we]=Me,--te||j(k)},Z)})})},resolve:function(k){return k instanceof M?k:k&&typeof k.then=="function"?new M(function(j,Z){k.then(j,Z)}):new M(Ve,!0,k)},reject:pe,race:function(){var k=V.apply(null,arguments).map(fr);return new M(function(j,Z){k.map(function(te){return M.resolve(te).then(j,Z)})})},PSD:{get:function(){return Ce},set:function(k){return Ce=k}},totalEchoes:{get:function(){return Bt}},newPSD:Xt,usePSD:is,scheduler:{get:function(){return zt},set:function(k){zt=k}},rejectionMapper:{get:function(){return Oe},set:function(k){Oe=k}},follow:function(k,j){return new M(function(Z,te){return Xt(function(ue,we){var Me=Ce;Me.unhandleds=[],Me.onunhandled=we,Me.finalize=ke(function(){var $e,We=this;$e=function(){We.unhandleds.length===0?ue():we(We.unhandleds[0])},yt.push(function Ye(){$e(),yt.splice(yt.indexOf(Ye),1)}),++ct,zt(function(){--ct==0&&G()},[])},Me.finalize),k()},j,Z,te)})}}),Lt&&(Lt.allSettled&&w(M,"allSettled",function(){var k=V.apply(null,arguments).map(fr);return new M(function(j){k.length===0&&j([]);var Z=k.length,te=new Array(Z);k.forEach(function(ue,we){return M.resolve(ue).then(function(Me){return te[we]={status:"fulfilled",value:Me}},function(Me){return te[we]={status:"rejected",reason:Me}}).then(function(){return--Z||j(te)})})})}),Lt.any&&typeof AggregateError<"u"&&w(M,"any",function(){var k=V.apply(null,arguments).map(fr);return new M(function(j,Z){k.length===0&&Z(new AggregateError([]));var te=k.length,ue=new Array(te);k.forEach(function(we,Me){return M.resolve(we).then(function($e){return j($e)},function($e){ue[Me]=$e,--te||Z(new AggregateError(ue))})})})}),Lt.withResolvers&&(M.withResolvers=Lt.withResolvers));var Fe={awaits:0,echoes:0,id:0},ot=0,jt=[],un=0,Bt=0,Vt=0;function Xt(k,j,Z,te){var ue=Ce,we=Object.create(ue);return we.parent=ue,we.ref=0,we.global=!1,we.id=++Vt,ve.env,we.env=Tt?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},j&&u(we,j),++ue.ref,we.finalize=function(){--this.parent.ref||this.parent.finalize()},te=is(we,k,Z,te),we.ref===0&&we.finalize(),te}function Tn(){return Fe.id||(Fe.id=++ot),++Fe.awaits,Fe.echoes+=xt,Fe.id}function Bn(){return!!Fe.awaits&&(--Fe.awaits==0&&(Fe.id=0),Fe.echoes=Fe.awaits*xt,!0)}function fr(k){return Fe.echoes&&k&&k.constructor===Lt?(Tn(),k.then(function(j){return Bn(),j},function(j){return Bn(),$r(j)})):k}function hr(){var k=jt[jt.length-1];jt.pop(),Dn(k,!1)}function Dn(k,j){var Z,te=Ce;(j?!Fe.echoes||un++&&k===Ce:!un||--un&&k===Ce)||queueMicrotask(j?(function(ue){++Bt,Fe.echoes&&--Fe.echoes!=0||(Fe.echoes=Fe.awaits=Fe.id=0),jt.push(Ce),Dn(ue,!0)}).bind(null,k):hr),k!==Ce&&(Ce=k,te===ve&&(ve.env=ti()),Tt&&(Z=ve.env.Promise,j=k.env,(te.global||k.global)&&(Object.defineProperty(i,"Promise",j.PromiseProp),Z.all=j.all,Z.race=j.race,Z.resolve=j.resolve,Z.reject=j.reject,j.allSettled&&(Z.allSettled=j.allSettled),j.any&&(Z.any=j.any))))}function ti(){var k=i.Promise;return Tt?{Promise:k,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject}:{}}function is(k,j,Z,te,ue){var we=Ce;try{return Dn(k,!0),j(Z,te,ue)}finally{Dn(we,!1)}}function os(k,j,Z,te){return typeof k!="function"?k:function(){var ue=Ce;Z&&Tn(),Dn(j,!0);try{return k.apply(this,arguments)}finally{Dn(ue,!1),te&&queueMicrotask(Bn)}}}function ss(k){Promise===Lt&&Fe.echoes===0?un===0?k():enqueueNativeMicroTask(k):setTimeout(k,0)}(""+ai).indexOf("[native code]")===-1&&(Tn=Bn=Ie);var $r=M.reject,ls="",Yi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xg="String expected.",ko=[],Gs="__dbnames",Oi="readonly",Ec="readwrite";function us(k,j){return k?j?function(){return k.apply(this,arguments)&&j.apply(this,arguments)}:k:j}var Ws={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Kl(k){return typeof k!="string"||/\./.test(k)?function(j){return j}:function(j){return j[k]===void 0&&k in j&&delete(j=W(j))[k],j}}function Od(){throw Te.Type()}function zn(k,j){try{var Z=Kh(k),te=Kh(j);if(Z!==te)return Z==="Array"?1:te==="Array"?-1:Z==="binary"?1:te==="binary"?-1:Z==="string"?1:te==="string"?-1:Z==="Date"?1:te!=="Date"?NaN:-1;switch(Z){case"number":case"Date":case"string":return j<k?1:k<j?-1:0;case"binary":return function(ue,we){for(var Me=ue.length,$e=we.length,We=Me<$e?Me:$e,Ye=0;Ye<We;++Ye)if(ue[Ye]!==we[Ye])return ue[Ye]<we[Ye]?-1:1;return Me===$e?0:Me<$e?-1:1}(ni(k),ni(j));case"Array":return function(ue,we){for(var Me=ue.length,$e=we.length,We=Me<$e?Me:$e,Ye=0;Ye<We;++Ye){var tt=zn(ue[Ye],we[Ye]);if(tt!==0)return tt}return Me===$e?0:Me<$e?-1:1}(k,j)}}catch{}return NaN}function Kh(k){var j=typeof k;return j!="object"?j:ArrayBuffer.isView(k)?"binary":(k=he(k),k==="ArrayBuffer"?"binary":k)}function ni(k){return k instanceof Uint8Array?k:ArrayBuffer.isView(k)?new Uint8Array(k.buffer,k.byteOffset,k.byteLength):new Uint8Array(k)}var Zh=(_r.prototype._trans=function(k,j,Z){var te=this._tx||Ce.trans,ue=this.name,we=Le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(k==="readonly"?"read":"write"," ").concat(this.name));function Me(Ye,tt,qe){if(!qe.schema[ue])throw new Te.NotFound("Table "+ue+" not part of transaction");return j(qe.idbtrans,qe)}var $e=q();try{var We=te&&te.db._novip===this.db._novip?te===Ce.trans?te._promise(k,Me,Z):Xt(function(){return te._promise(k,Me,Z)},{trans:te,transless:Ce.transless||Ce}):function Ye(tt,qe,rt,Ge){if(tt.idbdb&&(tt._state.openComplete||Ce.letThrough||tt._vip)){var Qe=tt._createTransaction(qe,rt,tt._dbSchema);try{Qe.create(),tt._state.PR1398_maxLoop=3}catch(at){return at.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,qe,rt,Ge)})):$r(at)}return Qe._promise(qe,function(at,Xe){return Xt(function(){return Ce.trans=Qe,Ge(at,Xe,Qe)})}).then(function(at){if(qe==="readwrite")try{Qe.idbtrans.commit()}catch{}return qe==="readonly"?at:Qe._completion.then(function(){return at})})}if(tt._state.openComplete)return $r(new Te.DatabaseClosed(tt._state.dbOpenError));if(!tt._state.isBeingOpened){if(!tt._state.autoOpen)return $r(new Te.DatabaseClosed);tt.open().catch(Ie)}return tt._state.dbReadyPromise.then(function(){return Ye(tt,qe,rt,Ge)})}(this.db,k,[this.name],Me);return we&&(We._consoleTask=we,We=We.catch(function(Ye){return console.trace(Ye),$r(Ye)})),We}finally{$e&&$()}},_r.prototype.get=function(k,j){var Z=this;return k&&k.constructor===Object?this.where(k).first(j):k==null?$r(new Te.Type("Invalid argument to Table.get()")):this._trans("readonly",function(te){return Z.core.get({trans:te,key:k}).then(function(ue){return Z.hook.reading.fire(ue)})}).then(j)},_r.prototype.where=function(k){if(typeof k=="string")return new this.db.WhereClause(this,k);if(s(k))return new this.db.WhereClause(this,"[".concat(k.join("+"),"]"));var j=o(k);if(j.length===1)return this.where(j[0]).equals(k[j[0]]);var Z=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&j.every(function(Ye){return 0<=$e.keyPath.indexOf(Ye)})){for(var We=0;We<j.length;++We)if(j.indexOf($e.keyPath[We])===-1)return!1;return!0}return!1}).sort(function($e,We){return $e.keyPath.length-We.keyPath.length})[0];if(Z&&this.db._maxKey!==ls){var we=Z.keyPath.slice(0,j.length);return this.where(we).equals(we.map(function(We){return k[We]}))}!Z&&Le&&console.warn("The query ".concat(JSON.stringify(k)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(j.join("+"),"]"));var te=this.schema.idxByName;function ue($e,We){return zn($e,We)===0}var Me=j.reduce(function(qe,We){var Ye=qe[0],tt=qe[1],qe=te[We],rt=k[We];return[Ye||qe,Ye||!qe?us(tt,qe&&qe.multi?function(Ge){return Ge=O(Ge,We),s(Ge)&&Ge.some(function(Qe){return ue(rt,Qe)})}:function(Ge){return ue(rt,O(Ge,We))}):tt]},[null,null]),we=Me[0],Me=Me[1];return we?this.where(we.name).equals(k[we.keyPath]).filter(Me):Z?this.filter(Me):this.where(j).equals("")},_r.prototype.filter=function(k){return this.toCollection().and(k)},_r.prototype.count=function(k){return this.toCollection().count(k)},_r.prototype.offset=function(k){return this.toCollection().offset(k)},_r.prototype.limit=function(k){return this.toCollection().limit(k)},_r.prototype.each=function(k){return this.toCollection().each(k)},_r.prototype.toArray=function(k){return this.toCollection().toArray(k)},_r.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},_r.prototype.orderBy=function(k){return new this.db.Collection(new this.db.WhereClause(this,s(k)?"[".concat(k.join("+"),"]"):k))},_r.prototype.reverse=function(){return this.toCollection().reverse()},_r.prototype.mapToClass=function(k){var j,Z=this.db,te=this.name;function ue(){return j!==null&&j.apply(this,arguments)||this}(this.schema.mappedClass=k).prototype instanceof Od&&(function(We,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function tt(){this.constructor=We}n(We,Ye),We.prototype=Ye===null?Object.create(Ye):(tt.prototype=Ye.prototype,new tt)}(ue,j=k),Object.defineProperty(ue.prototype,"db",{get:function(){return Z},enumerable:!1,configurable:!0}),ue.prototype.table=function(){return te},k=ue);for(var we=new Set,Me=k.prototype;Me;Me=c(Me))Object.getOwnPropertyNames(Me).forEach(function(We){return we.add(We)});function $e(We){if(!We)return We;var Ye,tt=Object.create(k.prototype);for(Ye in We)if(!we.has(Ye))try{tt[Ye]=We[Ye]}catch{}return tt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),k},_r.prototype.defineClass=function(){return this.mapToClass(function(k){u(this,k)})},_r.prototype.add=function(k,j){var Z=this,te=this.schema.primKey,ue=te.auto,we=te.keyPath,Me=k;return we&&ue&&(Me=Kl(we)(k)),this._trans("readwrite",function($e){return Z.core.mutate({trans:$e,type:"add",keys:j!=null?[j]:null,values:[Me]})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{I(k,we,$e)}catch{}return $e})},_r.prototype.update=function(k,j){return typeof k!="object"||s(k)?this.where(":id").equals(k).modify(j):(k=O(k,this.schema.primKey.keyPath),k===void 0?$r(new Te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(k).modify(j))},_r.prototype.put=function(k,j){var Z=this,te=this.schema.primKey,ue=te.auto,we=te.keyPath,Me=k;return we&&ue&&(Me=Kl(we)(k)),this._trans("readwrite",function($e){return Z.core.mutate({trans:$e,type:"put",values:[Me],keys:j!=null?[j]:null})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{I(k,we,$e)}catch{}return $e})},_r.prototype.delete=function(k){var j=this;return this._trans("readwrite",function(Z){return j.core.mutate({trans:Z,type:"delete",keys:[k]})}).then(function(Z){return Z.numFailures?M.reject(Z.failures[0]):void 0})},_r.prototype.clear=function(){var k=this;return this._trans("readwrite",function(j){return k.core.mutate({trans:j,type:"deleteRange",range:Ws})}).then(function(j){return j.numFailures?M.reject(j.failures[0]):void 0})},_r.prototype.bulkGet=function(k){var j=this;return this._trans("readonly",function(Z){return j.core.getMany({keys:k,trans:Z}).then(function(te){return te.map(function(ue){return j.hook.reading.fire(ue)})})})},_r.prototype.bulkAdd=function(k,j,Z){var te=this,ue=Array.isArray(j)?j:void 0,we=(Z=Z||(ue?void 0:j))?Z.allKeys:void 0;return this._trans("readwrite",function(Me){var Ye=te.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==k.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");var We=k.length,Ye=Ye&&$e?k.map(Kl(Ye)):k;return te.core.mutate({trans:Me,type:"add",keys:ue,values:Ye,wantResults:we}).then(function(Qe){var qe=Qe.numFailures,rt=Qe.results,Ge=Qe.lastResult,Qe=Qe.failures;if(qe===0)return we?rt:Ge;throw new De("".concat(te.name,".bulkAdd(): ").concat(qe," of ").concat(We," operations failed"),Qe)})})},_r.prototype.bulkPut=function(k,j,Z){var te=this,ue=Array.isArray(j)?j:void 0,we=(Z=Z||(ue?void 0:j))?Z.allKeys:void 0;return this._trans("readwrite",function(Me){var Ye=te.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==k.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");var We=k.length,Ye=Ye&&$e?k.map(Kl(Ye)):k;return te.core.mutate({trans:Me,type:"put",keys:ue,values:Ye,wantResults:we}).then(function(Qe){var qe=Qe.numFailures,rt=Qe.results,Ge=Qe.lastResult,Qe=Qe.failures;if(qe===0)return we?rt:Ge;throw new De("".concat(te.name,".bulkPut(): ").concat(qe," of ").concat(We," operations failed"),Qe)})})},_r.prototype.bulkUpdate=function(k){var j=this,Z=this.core,te=k.map(function(Me){return Me.key}),ue=k.map(function(Me){return Me.changes}),we=[];return this._trans("readwrite",function(Me){return Z.getMany({trans:Me,keys:te,cache:"clone"}).then(function($e){var We=[],Ye=[];k.forEach(function(qe,rt){var Ge=qe.key,Qe=qe.changes,at=$e[rt];if(at){for(var Xe=0,ft=Object.keys(Qe);Xe<ft.length;Xe++){var gt=ft[Xe],bt=Qe[gt];if(gt===j.schema.primKey.keyPath){if(zn(bt,Ge)!==0)throw new Te.Constraint("Cannot update primary key in bulkUpdate()")}else I(at,gt,bt)}we.push(rt),We.push(Ge),Ye.push(at)}});var tt=We.length;return Z.mutate({trans:Me,type:"put",keys:We,values:Ye,updates:{keys:te,changeSpecs:ue}}).then(function(qe){var rt=qe.numFailures,Ge=qe.failures;if(rt===0)return tt;for(var Qe=0,at=Object.keys(Ge);Qe<at.length;Qe++){var Xe,ft=at[Qe],gt=we[Number(ft)];gt!=null&&(Xe=Ge[ft],delete Ge[ft],Ge[gt]=Xe)}throw new De("".concat(j.name,".bulkUpdate(): ").concat(rt," of ").concat(tt," operations failed"),Ge)})})})},_r.prototype.bulkDelete=function(k){var j=this,Z=k.length;return this._trans("readwrite",function(te){return j.core.mutate({trans:te,type:"delete",keys:k})}).then(function(Me){var ue=Me.numFailures,we=Me.lastResult,Me=Me.failures;if(ue===0)return we;throw new De("".concat(j.name,".bulkDelete(): ").concat(ue," of ").concat(Z," operations failed"),Me)})},_r);function _r(){}function cs(k){function j(Me,$e){if($e){for(var We=arguments.length,Ye=new Array(We-1);--We;)Ye[We-1]=arguments[We];return Z[Me].subscribe.apply(null,Ye),k}if(typeof Me=="string")return Z[Me]}var Z={};j.addEventType=we;for(var te=1,ue=arguments.length;te<ue;++te)we(arguments[te]);return j;function we(Me,$e,We){if(typeof Me!="object"){var Ye;$e=$e||J;var tt={subscribers:[],fire:We=We||Ie,subscribe:function(qe){tt.subscribers.indexOf(qe)===-1&&(tt.subscribers.push(qe),tt.fire=$e(tt.fire,qe))},unsubscribe:function(qe){tt.subscribers=tt.subscribers.filter(function(rt){return rt!==qe}),tt.fire=tt.subscribers.reduce($e,We)}};return Z[Me]=j[Me]=tt}o(Ye=Me).forEach(function(qe){var rt=Ye[qe];if(s(rt))we(qe,Ye[qe][0],Ye[qe][1]);else{if(rt!=="asap")throw new Te.InvalidArgument("Invalid event config");var Ge=we(qe,Ae,function(){for(var Qe=arguments.length,at=new Array(Qe);Qe--;)at[Qe]=arguments[Qe];Ge.subscribers.forEach(function(Xe){A(function(){Xe.apply(null,at)})})})}})}}function Zl(k,j){return v(j).from({prototype:k}),j}function Ao(k,j){return!(k.filter||k.algorithm||k.or)&&(j?k.justLimit:!k.replayFilter)}function Yh(k,j){k.filter=us(k.filter,j)}function Ba(k,j,Z){var te=k.replayFilter;k.replayFilter=te?function(){return us(te(),j())}:j,k.justLimit=Z&&!te}function Yl(k,j){if(k.isPrimKey)return j.primaryKey;var Z=j.getIndexByKeyPath(k.index);if(!Z)throw new Te.Schema("KeyPath "+k.index+" on object store "+j.name+" is not indexed");return Z}function Xh(k,j,Z){var te=Yl(k,j.schema);return j.openCursor({trans:Z,values:!k.keysOnly,reverse:k.dir==="prev",unique:!!k.unique,query:{index:te,range:k.range}})}function Xl(k,j,Z,te){var ue=k.replayFilter?us(k.filter,k.replayFilter()):k.filter;if(k.or){var we={},Me=function($e,We,Ye){var tt,qe;ue&&!ue(We,Ye,function(rt){return We.stop(rt)},function(rt){return We.fail(rt)})||((qe=""+(tt=We.primaryKey))=="[object ArrayBuffer]"&&(qe=""+new Uint8Array(tt)),h(we,qe)||(we[qe]=!0,j($e,We,Ye)))};return Promise.all([k.or._iterate(Me,Z),Ks(Xh(k,te,Z),k.algorithm,Me,!k.keysOnly&&k.valueMapper)])}return Ks(Xh(k,te,Z),us(k.algorithm,ue),j,!k.keysOnly&&k.valueMapper)}function Ks(k,j,Z,te){var ue=de(te?function(we,Me,$e){return Z(te(we),Me,$e)}:Z);return k.then(function(we){if(we)return we.start(function(){var Me=function(){return we.continue()};j&&!j(we,function($e){return Me=$e},function($e){we.stop($e),Me=Ie},function($e){we.fail($e),Me=Ie})||ue(we.value,we,function($e){return Me=$e}),Me()})})}var Jl=(Jh.prototype.execute=function(k){var j=this["@@propmod"];if(j.add!==void 0){var Z=j.add;if(s(Z))return a(a([],s(k)?k:[],!0),Z).sort();if(typeof Z=="number")return(Number(k)||0)+Z;if(typeof Z=="bigint")try{return BigInt(k)+Z}catch{return BigInt(0)+Z}throw new TypeError("Invalid term ".concat(Z))}if(j.remove!==void 0){var te=j.remove;if(s(te))return s(k)?k.filter(function(ue){return!te.includes(ue)}).sort():[];if(typeof te=="number")return Number(k)-te;if(typeof te=="bigint")try{return BigInt(k)-te}catch{return BigInt(0)-te}throw new TypeError("Invalid subtrahend ".concat(te))}return Z=(Z=j.replacePrefix)===null||Z===void 0?void 0:Z[0],Z&&typeof k=="string"&&k.startsWith(Z)?j.replacePrefix[1]+k.substring(Z.length):k},Jh);function Jh(k){this["@@propmod"]=k}var Ql=(Wn.prototype._read=function(k,j){var Z=this._ctx;return Z.error?Z.table._trans(null,$r.bind(null,Z.error)):Z.table._trans("readonly",k).then(j)},Wn.prototype._write=function(k){var j=this._ctx;return j.error?j.table._trans(null,$r.bind(null,j.error)):j.table._trans("readwrite",k,"locked")},Wn.prototype._addAlgorithm=function(k){var j=this._ctx;j.algorithm=us(j.algorithm,k)},Wn.prototype._iterate=function(k,j){return Xl(this._ctx,k,j,this._ctx.table.core)},Wn.prototype.clone=function(k){var j=Object.create(this.constructor.prototype),Z=Object.create(this._ctx);return k&&u(Z,k),j._ctx=Z,j},Wn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Wn.prototype.each=function(k){var j=this._ctx;return this._read(function(Z){return Xl(j,k,Z,j.table.core)})},Wn.prototype.count=function(k){var j=this;return this._read(function(Z){var te=j._ctx,ue=te.table.core;if(Ao(te,!0))return ue.count({trans:Z,query:{index:Yl(te,ue.schema),range:te.range}}).then(function(Me){return Math.min(Me,te.limit)});var we=0;return Xl(te,function(){return++we,!1},Z,ue).then(function(){return we})}).then(k)},Wn.prototype.sortBy=function(k,j){var Z=k.split(".").reverse(),te=Z[0],ue=Z.length-1;function we(We,Ye){return Ye?we(We[Z[Ye]],Ye-1):We[te]}var Me=this._ctx.dir==="next"?1:-1;function $e(We,Ye){return zn(we(We,ue),we(Ye,ue))*Me}return this.toArray(function(We){return We.sort($e)}).then(j)},Wn.prototype.toArray=function(k){var j=this;return this._read(function(Z){var te=j._ctx;if(te.dir==="next"&&Ao(te,!0)&&0<te.limit){var ue=te.valueMapper,we=Yl(te,te.table.core.schema);return te.table.core.query({trans:Z,limit:te.limit,values:!0,query:{index:we,range:te.range}}).then(function($e){return $e=$e.result,ue?$e.map(ue):$e})}var Me=[];return Xl(te,function($e){return Me.push($e)},Z,te.table.core).then(function(){return Me})},k)},Wn.prototype.offset=function(k){var j=this._ctx;return k<=0||(j.offset+=k,Ao(j)?Ba(j,function(){var Z=k;return function(te,ue){return Z===0||(Z===1?--Z:ue(function(){te.advance(Z),Z=0}),!1)}}):Ba(j,function(){var Z=k;return function(){return--Z<0}})),this},Wn.prototype.limit=function(k){return this._ctx.limit=Math.min(this._ctx.limit,k),Ba(this._ctx,function(){var j=k;return function(Z,te,ue){return--j<=0&&te(ue),0<=j}},!0),this},Wn.prototype.until=function(k,j){return Yh(this._ctx,function(Z,te,ue){return!k(Z.value)||(te(ue),j)}),this},Wn.prototype.first=function(k){return this.limit(1).toArray(function(j){return j[0]}).then(k)},Wn.prototype.last=function(k){return this.reverse().first(k)},Wn.prototype.filter=function(k){var j;return Yh(this._ctx,function(Z){return k(Z.value)}),(j=this._ctx).isMatch=us(j.isMatch,k),this},Wn.prototype.and=function(k){return this.filter(k)},Wn.prototype.or=function(k){return new this.db.WhereClause(this._ctx.table,k,this)},Wn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Wn.prototype.desc=function(){return this.reverse()},Wn.prototype.eachKey=function(k){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(Z,te){k(te.key,te)})},Wn.prototype.eachUniqueKey=function(k){return this._ctx.unique="unique",this.eachKey(k)},Wn.prototype.eachPrimaryKey=function(k){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(Z,te){k(te.primaryKey,te)})},Wn.prototype.keys=function(k){var j=this._ctx;j.keysOnly=!j.isMatch;var Z=[];return this.each(function(te,ue){Z.push(ue.key)}).then(function(){return Z}).then(k)},Wn.prototype.primaryKeys=function(k){var j=this._ctx;if(j.dir==="next"&&Ao(j,!0)&&0<j.limit)return this._read(function(te){var ue=Yl(j,j.table.core.schema);return j.table.core.query({trans:te,values:!1,limit:j.limit,query:{index:ue,range:j.range}})}).then(function(te){return te.result}).then(k);j.keysOnly=!j.isMatch;var Z=[];return this.each(function(te,ue){Z.push(ue.primaryKey)}).then(function(){return Z}).then(k)},Wn.prototype.uniqueKeys=function(k){return this._ctx.unique="unique",this.keys(k)},Wn.prototype.firstKey=function(k){return this.limit(1).keys(function(j){return j[0]}).then(k)},Wn.prototype.lastKey=function(k){return this.reverse().firstKey(k)},Wn.prototype.distinct=function(){var k=this._ctx,k=k.index&&k.table.schema.idxByName[k.index];if(!k||!k.multi)return this;var j={};return Yh(this._ctx,function(ue){var te=ue.primaryKey.toString(),ue=h(j,te);return j[te]=!0,!ue}),this},Wn.prototype.modify=function(k){var j=this,Z=this._ctx;return this._write(function(te){var ue,we,Me;Me=typeof k=="function"?k:(ue=o(k),we=ue.length,function(Xe){for(var ft=!1,gt=0;gt<we;++gt){var bt=ue[gt],wt=k[bt],Mt=O(Xe,bt);wt instanceof Jl?(I(Xe,bt,wt.execute(Mt)),ft=!0):Mt!==wt&&(I(Xe,bt,wt),ft=!0)}return ft});var $e=Z.table.core,qe=$e.schema.primaryKey,We=qe.outbound,Ye=qe.extractKey,tt=200,qe=j.db._options.modifyChunkSize;qe&&(tt=typeof qe=="object"?qe[$e.name]||qe["*"]||200:qe);function rt(Xe,bt){var gt=bt.failures,bt=bt.numFailures;Qe+=Xe-bt;for(var wt=0,Mt=o(gt);wt<Mt.length;wt++){var qt=Mt[wt];Ge.push(gt[qt])}}var Ge=[],Qe=0,at=[];return j.clone().primaryKeys().then(function(Xe){function ft(bt){var wt=Math.min(tt,Xe.length-bt);return $e.getMany({trans:te,keys:Xe.slice(bt,bt+wt),cache:"immutable"}).then(function(Mt){for(var qt=[],Nt=[],$t=We?[]:null,Ht=[],It=0;It<wt;++It){var Zt=Mt[It],cn={value:W(Zt),primKey:Xe[bt+It]};Me.call(cn,cn.value,cn)!==!1&&(cn.value==null?Ht.push(Xe[bt+It]):We||zn(Ye(Zt),Ye(cn.value))===0?(Nt.push(cn.value),We&&$t.push(Xe[bt+It])):(Ht.push(Xe[bt+It]),qt.push(cn.value)))}return Promise.resolve(0<qt.length&&$e.mutate({trans:te,type:"add",values:qt}).then(function(dn){for(var Sn in dn.failures)Ht.splice(parseInt(Sn),1);rt(qt.length,dn)})).then(function(){return(0<Nt.length||gt&&typeof k=="object")&&$e.mutate({trans:te,type:"put",keys:$t,values:Nt,criteria:gt,changeSpec:typeof k!="function"&&k,isAdditionalChunk:0<bt}).then(function(dn){return rt(Nt.length,dn)})}).then(function(){return(0<Ht.length||gt&&k===Dd)&&$e.mutate({trans:te,type:"delete",keys:Ht,criteria:gt,isAdditionalChunk:0<bt}).then(function(dn){return rt(Ht.length,dn)})}).then(function(){return Xe.length>bt+wt&&ft(bt+tt)})})}var gt=Ao(Z)&&Z.limit===1/0&&(typeof k!="function"||k===Dd)&&{index:Z.index,range:Z.range};return ft(0).then(function(){if(0<Ge.length)throw new Ee("Error modifying one or more objects",Ge,Qe,at);return Xe.length})})})},Wn.prototype.delete=function(){var k=this._ctx,j=k.range;return Ao(k)&&(k.isPrimKey||j.type===3)?this._write(function(Z){var te=k.table.core.schema.primaryKey,ue=j;return k.table.core.count({trans:Z,query:{index:te,range:ue}}).then(function(we){return k.table.core.mutate({trans:Z,type:"deleteRange",range:ue}).then(function(Me){var $e=Me.failures;if(Me.lastResult,Me.results,Me=Me.numFailures,Me)throw new Ee("Could not delete some values",Object.keys($e).map(function(We){return $e[We]}),we-Me);return we-Me})})}):this.modify(Dd)},Wn);function Wn(){}var Dd=function(k,j){return j.value=null};function Sg(k,j){return k<j?-1:k===j?0:1}function Qh(k,j){return j<k?-1:k===j?0:1}function ri(k,j,Z){return k=k instanceof Ys?new k.Collection(k):k,k._ctx.error=new(Z||TypeError)(j),k}function eu(k){return new k.Collection(k,function(){return jd("")}).limit(0)}function Zs(k,j,Z,te){var ue,we,Me,$e,We,Ye,tt,qe=Z.length;if(!Z.every(function(Qe){return typeof Qe=="string"}))return ri(k,xg);function rt(Qe){ue=Qe==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},we=Qe==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},Me=Qe==="next"?Sg:Qh;var at=Z.map(function(Xe){return{lower:we(Xe),upper:ue(Xe)}}).sort(function(Xe,ft){return Me(Xe.lower,ft.lower)});$e=at.map(function(Xe){return Xe.upper}),We=at.map(function(Xe){return Xe.lower}),tt=(Ye=Qe)==="next"?"":te}rt("next"),k=new k.Collection(k,function(){return Xi($e[0],We[qe-1]+te)}),k._ondirectionchange=function(Qe){rt(Qe)};var Ge=0;return k._addAlgorithm(function(Qe,at,Xe){var ft=Qe.key;if(typeof ft!="string")return!1;var gt=we(ft);if(j(gt,We,Ge))return!0;for(var bt=null,wt=Ge;wt<qe;++wt){var Mt=function(qt,Nt,$t,Ht,It,Zt){for(var cn=Math.min(qt.length,Ht.length),dn=-1,Sn=0;Sn<cn;++Sn){var Oa=Nt[Sn];if(Oa!==Ht[Sn])return It(qt[Sn],$t[Sn])<0?qt.substr(0,Sn)+$t[Sn]+$t.substr(Sn+1):It(qt[Sn],Ht[Sn])<0?qt.substr(0,Sn)+Ht[Sn]+$t.substr(Sn+1):0<=dn?qt.substr(0,dn)+Nt[dn]+$t.substr(dn+1):null;It(qt[Sn],Oa)<0&&(dn=Sn)}return cn<Ht.length&&Zt==="next"?qt+$t.substr(qt.length):cn<qt.length&&Zt==="prev"?qt.substr(0,$t.length):dn<0?null:qt.substr(0,dn)+Ht[dn]+$t.substr(dn+1)}(ft,gt,$e[wt],We[wt],Me,Ye);Mt===null&&bt===null?Ge=wt+1:(bt===null||0<Me(bt,Mt))&&(bt=Mt)}return at(bt!==null?function(){Qe.continue(bt+tt)}:Xe),!1}),k}function Xi(k,j,Z,te){return{type:2,lower:k,upper:j,lowerOpen:Z,upperOpen:te}}function jd(k){return{type:1,lower:k,upper:k}}var Ys=(Object.defineProperty(Nr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Nr.prototype.between=function(k,j,Z,te){Z=Z!==!1,te=te===!0;try{return 0<this._cmp(k,j)||this._cmp(k,j)===0&&(Z||te)&&(!Z||!te)?eu(this):new this.Collection(this,function(){return Xi(k,j,!Z,!te)})}catch{return ri(this,Yi)}},Nr.prototype.equals=function(k){return k==null?ri(this,Yi):new this.Collection(this,function(){return jd(k)})},Nr.prototype.above=function(k){return k==null?ri(this,Yi):new this.Collection(this,function(){return Xi(k,void 0,!0)})},Nr.prototype.aboveOrEqual=function(k){return k==null?ri(this,Yi):new this.Collection(this,function(){return Xi(k,void 0,!1)})},Nr.prototype.below=function(k){return k==null?ri(this,Yi):new this.Collection(this,function(){return Xi(void 0,k,!1,!0)})},Nr.prototype.belowOrEqual=function(k){return k==null?ri(this,Yi):new this.Collection(this,function(){return Xi(void 0,k)})},Nr.prototype.startsWith=function(k){return typeof k!="string"?ri(this,xg):this.between(k,k+ls,!0,!0)},Nr.prototype.startsWithIgnoreCase=function(k){return k===""?this.startsWith(k):Zs(this,function(j,Z){return j.indexOf(Z[0])===0},[k],ls)},Nr.prototype.equalsIgnoreCase=function(k){return Zs(this,function(j,Z){return j===Z[0]},[k],"")},Nr.prototype.anyOfIgnoreCase=function(){var k=V.apply(se,arguments);return k.length===0?eu(this):Zs(this,function(j,Z){return Z.indexOf(j)!==-1},k,"")},Nr.prototype.startsWithAnyOfIgnoreCase=function(){var k=V.apply(se,arguments);return k.length===0?eu(this):Zs(this,function(j,Z){return Z.some(function(te){return j.indexOf(te)===0})},k,ls)},Nr.prototype.anyOf=function(){var k=this,j=V.apply(se,arguments),Z=this._cmp;try{j.sort(Z)}catch{return ri(this,Yi)}if(j.length===0)return eu(this);var te=new this.Collection(this,function(){return Xi(j[0],j[j.length-1])});te._ondirectionchange=function(we){Z=we==="next"?k._ascending:k._descending,j.sort(Z)};var ue=0;return te._addAlgorithm(function(we,Me,$e){for(var We=we.key;0<Z(We,j[ue]);)if(++ue===j.length)return Me($e),!1;return Z(We,j[ue])===0||(Me(function(){we.continue(j[ue])}),!1)}),te},Nr.prototype.notEqual=function(k){return this.inAnyRange([[-1/0,k],[k,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Nr.prototype.noneOf=function(){var k=V.apply(se,arguments);if(k.length===0)return new this.Collection(this);try{k.sort(this._ascending)}catch{return ri(this,Yi)}var j=k.reduce(function(Z,te){return Z?Z.concat([[Z[Z.length-1][1],te]]):[[-1/0,te]]},null);return j.push([k[k.length-1],this.db._maxKey]),this.inAnyRange(j,{includeLowers:!1,includeUppers:!1})},Nr.prototype.inAnyRange=function(ft,j){var Z=this,te=this._cmp,ue=this._ascending,we=this._descending,Me=this._min,$e=this._max;if(ft.length===0)return eu(this);if(!ft.every(function(gt){return gt[0]!==void 0&&gt[1]!==void 0&&ue(gt[0],gt[1])<=0}))return ri(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Te.InvalidArgument);var We=!j||j.includeLowers!==!1,Ye=j&&j.includeUppers===!0,tt,qe=ue;function rt(gt,bt){return qe(gt[0],bt[0])}try{(tt=ft.reduce(function(gt,bt){for(var wt=0,Mt=gt.length;wt<Mt;++wt){var qt=gt[wt];if(te(bt[0],qt[1])<0&&0<te(bt[1],qt[0])){qt[0]=Me(qt[0],bt[0]),qt[1]=$e(qt[1],bt[1]);break}}return wt===Mt&&gt.push(bt),gt},[])).sort(rt)}catch{return ri(this,Yi)}var Ge=0,Qe=Ye?function(gt){return 0<ue(gt,tt[Ge][1])}:function(gt){return 0<=ue(gt,tt[Ge][1])},at=We?function(gt){return 0<we(gt,tt[Ge][0])}:function(gt){return 0<=we(gt,tt[Ge][0])},Xe=Qe,ft=new this.Collection(this,function(){return Xi(tt[0][0],tt[tt.length-1][1],!We,!Ye)});return ft._ondirectionchange=function(gt){qe=gt==="next"?(Xe=Qe,ue):(Xe=at,we),tt.sort(rt)},ft._addAlgorithm(function(gt,bt,wt){for(var Mt,qt=gt.key;Xe(qt);)if(++Ge===tt.length)return bt(wt),!1;return!Qe(Mt=qt)&&!at(Mt)||(Z._cmp(qt,tt[Ge][1])===0||Z._cmp(qt,tt[Ge][0])===0||bt(function(){qe===ue?gt.continue(tt[Ge][0]):gt.continue(tt[Ge][1])}),!1)}),ft},Nr.prototype.startsWithAnyOf=function(){var k=V.apply(se,arguments);return k.every(function(j){return typeof j=="string"})?k.length===0?eu(this):this.inAnyRange(k.map(function(j){return[j,j+ls]})):ri(this,"startsWithAnyOf() only works with strings")},Nr);function Nr(){}function Di(k){return de(function(j){return Xs(j),k(j.target.error),!1})}function Xs(k){k.stopPropagation&&k.stopPropagation(),k.preventDefault&&k.preventDefault()}var tu="storagemutated",Js="x-storagemutated-1",ya=cs(null,tu),ep=(za.prototype._lock=function(){return C(!Ce.global),++this._reculock,this._reculock!==1||Ce.global||(Ce.lockOwnerFor=this),this},za.prototype._unlock=function(){if(C(!Ce.global),--this._reculock==0)for(Ce.global||(Ce.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var k=this._blockedFuncs.shift();try{is(k[1],k[0])}catch{}}return this},za.prototype._locked=function(){return this._reculock&&Ce.lockOwnerFor!==this},za.prototype.create=function(k){var j=this;if(!this.mode)return this;var Z=this.db.idbdb,te=this.db._state.dbOpenError;if(C(!this.idbtrans),!k&&!Z)switch(te&&te.name){case"DatabaseClosedError":throw new Te.DatabaseClosed(te);case"MissingAPIError":throw new Te.MissingAPI(te.message,te);default:throw new Te.OpenFailed(te)}if(!this.active)throw new Te.TransactionInactive;return C(this._completion._state===null),(k=this.idbtrans=k||(this.db.core||Z).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=de(function(ue){Xs(ue),j._reject(k.error)}),k.onabort=de(function(ue){Xs(ue),j.active&&j._reject(new Te.Abort(k.error)),j.active=!1,j.on("abort").fire(ue)}),k.oncomplete=de(function(){j.active=!1,j._resolve(),"mutatedParts"in k&&ya.storagemutated.fire(k.mutatedParts)}),this},za.prototype._promise=function(k,j,Z){var te=this;if(k==="readwrite"&&this.mode!=="readwrite")return $r(new Te.ReadOnly("Transaction is readonly"));if(!this.active)return $r(new Te.TransactionInactive);if(this._locked())return new M(function(we,Me){te._blockedFuncs.push([function(){te._promise(k,j,Z).then(we,Me)},Ce])});if(Z)return Xt(function(){var we=new M(function(Me,$e){te._lock();var We=j(Me,$e,te);We&&We.then&&We.then(Me,$e)});return we.finally(function(){return te._unlock()}),we._lib=!0,we});var ue=new M(function(we,Me){var $e=j(we,Me,te);$e&&$e.then&&$e.then(we,Me)});return ue._lib=!0,ue},za.prototype._root=function(){return this.parent?this.parent._root():this},za.prototype.waitFor=function(k){var j,Z=this._root(),te=M.resolve(k);Z._waitingFor?Z._waitingFor=Z._waitingFor.then(function(){return te}):(Z._waitingFor=te,Z._waitingQueue=[],j=Z.idbtrans.objectStore(Z.storeNames[0]),function we(){for(++Z._spinCount;Z._waitingQueue.length;)Z._waitingQueue.shift()();Z._waitingFor&&(j.get(-1/0).onsuccess=we)}());var ue=Z._waitingFor;return new M(function(we,Me){te.then(function($e){return Z._waitingQueue.push(de(we.bind(null,$e)))},function($e){return Z._waitingQueue.push(de(Me.bind(null,$e)))}).finally(function(){Z._waitingFor===ue&&(Z._waitingFor=null)})})},za.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Te.Abort))},za.prototype.table=function(k){var j=this._memoizedTables||(this._memoizedTables={});if(h(j,k))return j[k];var Z=this.schema[k];if(!Z)throw new Te.NotFound("Table "+k+" not part of transaction");return Z=new this.db.Table(k,Z,this),Z.core=this.db.core.table(k),j[k]=Z},za);function za(){}function Ji(k,j,Z,te,ue,we,Me){return{name:k,keyPath:j,unique:Z,multi:te,auto:ue,compound:we,src:(Z&&!Me?"&":"")+(te?"*":"")+(ue?"++":"")+Md(j)}}function Md(k){return typeof k=="string"?k:k?"["+[].join.call(k,"+")+"]":""}function nu(k,j,Z){return{name:k,primKey:j,indexes:Z,mappedClass:null,idxByName:(te=function(ue){return[ue.name,ue]},Z.reduce(function(ue,we,Me){return Me=te(we,Me),Me&&(ue[Me[0]]=Me[1]),ue},{}))};var te}var ru=function(k){try{return k.only([[]]),ru=function(){return[[]]},[[]]}catch{return ru=function(){return ls},ls}};function au(k){return k==null?function(){}:typeof k=="string"?(j=k).split(".").length===1?function(Z){return Z[j]}:function(Z){return O(Z,j)}:function(Z){return O(Z,k)};var j}function Cc(k){return[].slice.call(k)}var Eg=0;function Qr(k){return k==null?":id":typeof k=="string"?k:"[".concat(k.join("+"),"]")}function Qs(k,j,We){function te(Xe){if(Xe.type===3)return null;if(Xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ge=Xe.lower,Qe=Xe.upper,at=Xe.lowerOpen,Xe=Xe.upperOpen;return Ge===void 0?Qe===void 0?null:j.upperBound(Qe,!!Xe):Qe===void 0?j.lowerBound(Ge,!!at):j.bound(Ge,Qe,!!at,!!Xe)}function ue(rt){var Ge,Qe=rt.name;return{name:Qe,schema:rt,mutate:function(at){var Xe=at.trans,ft=at.type,gt=at.keys,bt=at.values,wt=at.range;return new Promise(function(Mt,qt){Mt=de(Mt);var Nt=Xe.objectStore(Qe),$t=Nt.keyPath==null,Ht=ft==="put"||ft==="add";if(!Ht&&ft!=="delete"&&ft!=="deleteRange")throw new Error("Invalid operation type: "+ft);var It,Zt=(gt||bt||{length:1}).length;if(gt&&bt&&gt.length!==bt.length)throw new Error("Given keys array must have same length as given values array.");if(Zt===0)return Mt({numFailures:0,failures:{},results:[],lastResult:void 0});function cn(va){++Oa,Xs(va)}var dn=[],Sn=[],Oa=0;if(ft==="deleteRange"){if(wt.type===4)return Mt({numFailures:Oa,failures:Sn,results:[],lastResult:void 0});wt.type===3?dn.push(It=Nt.clear()):dn.push(It=Nt.delete(te(wt)))}else{var $t=Ht?$t?[bt,gt]:[bt,null]:[gt,null],yn=$t[0],Kr=$t[1];if(Ht)for(var ea=0;ea<Zt;++ea)dn.push(It=Kr&&Kr[ea]!==void 0?Nt[ft](yn[ea],Kr[ea]):Nt[ft](yn[ea])),It.onerror=cn;else for(ea=0;ea<Zt;++ea)dn.push(It=Nt[ft](yn[ea])),It.onerror=cn}function To(va){va=va.target.result,dn.forEach(function(eo,ps){return eo.error!=null&&(Sn[ps]=eo.error)}),Mt({numFailures:Oa,failures:Sn,results:ft==="delete"?gt:dn.map(function(eo){return eo.result}),lastResult:va})}It.onerror=function(va){cn(va),To(va)},It.onsuccess=To})},getMany:function(at){var Xe=at.trans,ft=at.keys;return new Promise(function(gt,bt){gt=de(gt);for(var wt,Mt=Xe.objectStore(Qe),qt=ft.length,Nt=new Array(qt),$t=0,Ht=0,It=function(dn){dn=dn.target,Nt[dn._pos]=dn.result,++Ht===$t&&gt(Nt)},Zt=Di(bt),cn=0;cn<qt;++cn)ft[cn]!=null&&((wt=Mt.get(ft[cn]))._pos=cn,wt.onsuccess=It,wt.onerror=Zt,++$t);$t===0&&gt(Nt)})},get:function(at){var Xe=at.trans,ft=at.key;return new Promise(function(gt,bt){gt=de(gt);var wt=Xe.objectStore(Qe).get(ft);wt.onsuccess=function(Mt){return gt(Mt.target.result)},wt.onerror=Di(bt)})},query:(Ge=Ye,function(at){return new Promise(function(Xe,ft){Xe=de(Xe);var gt,bt,wt,$t=at.trans,Mt=at.values,qt=at.limit,It=at.query,Nt=qt===1/0?void 0:qt,Ht=It.index,It=It.range,$t=$t.objectStore(Qe),Ht=Ht.isPrimaryKey?$t:$t.index(Ht.name),It=te(It);if(qt===0)return Xe({result:[]});Ge?((Nt=Mt?Ht.getAll(It,Nt):Ht.getAllKeys(It,Nt)).onsuccess=function(Zt){return Xe({result:Zt.target.result})},Nt.onerror=Di(ft)):(gt=0,bt=!Mt&&"openKeyCursor"in Ht?Ht.openKeyCursor(It):Ht.openCursor(It),wt=[],bt.onsuccess=function(Zt){var cn=bt.result;return cn?(wt.push(Mt?cn.value:cn.primaryKey),++gt===qt?Xe({result:wt}):void cn.continue()):Xe({result:wt})},bt.onerror=Di(ft))})}),openCursor:function(at){var Xe=at.trans,ft=at.values,gt=at.query,bt=at.reverse,wt=at.unique;return new Promise(function(Mt,qt){Mt=de(Mt);var Ht=gt.index,Nt=gt.range,$t=Xe.objectStore(Qe),$t=Ht.isPrimaryKey?$t:$t.index(Ht.name),Ht=bt?wt?"prevunique":"prev":wt?"nextunique":"next",It=!ft&&"openKeyCursor"in $t?$t.openKeyCursor(te(Nt),Ht):$t.openCursor(te(Nt),Ht);It.onerror=Di(qt),It.onsuccess=de(function(Zt){var cn,dn,Sn,Oa,yn=It.result;yn?(yn.___id=++Eg,yn.done=!1,cn=yn.continue.bind(yn),dn=(dn=yn.continuePrimaryKey)&&dn.bind(yn),Sn=yn.advance.bind(yn),Oa=function(){throw new Error("Cursor not stopped")},yn.trans=Xe,yn.stop=yn.continue=yn.continuePrimaryKey=yn.advance=function(){throw new Error("Cursor not started")},yn.fail=de(qt),yn.next=function(){var Kr=this,ea=1;return this.start(function(){return ea--?Kr.continue():Kr.stop()}).then(function(){return Kr})},yn.start=function(Kr){function ea(){if(It.result)try{Kr()}catch(va){yn.fail(va)}else yn.done=!0,yn.start=function(){throw new Error("Cursor behind last entry")},yn.stop()}var To=new Promise(function(va,eo){va=de(va),It.onerror=Di(eo),yn.fail=eo,yn.stop=function(ps){yn.stop=yn.continue=yn.continuePrimaryKey=yn.advance=Oa,va(ps)}});return It.onsuccess=de(function(va){It.onsuccess=ea,ea()}),yn.continue=cn,yn.continuePrimaryKey=dn,yn.advance=Sn,ea(),To},Mt(yn)):Mt(null)},qt)})},count:function(at){var Xe=at.query,ft=at.trans,gt=Xe.index,bt=Xe.range;return new Promise(function(wt,Mt){var qt=ft.objectStore(Qe),Nt=gt.isPrimaryKey?qt:qt.index(gt.name),qt=te(bt),Nt=qt?Nt.count(qt):Nt.count();Nt.onsuccess=de(function($t){return wt($t.target.result)}),Nt.onerror=Di(Mt)})}}}var we,Me,$e,tt=(Me=We,$e=Cc((we=k).objectStoreNames),{schema:{name:we.name,tables:$e.map(function(rt){return Me.objectStore(rt)}).map(function(rt){var Ge=rt.keyPath,Xe=rt.autoIncrement,Qe=s(Ge),at={},Xe={name:rt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ge==null,compound:Qe,keyPath:Ge,autoIncrement:Xe,unique:!0,extractKey:au(Ge)},indexes:Cc(rt.indexNames).map(function(ft){return rt.index(ft)}).map(function(wt){var gt=wt.name,bt=wt.unique,Mt=wt.multiEntry,wt=wt.keyPath,Mt={name:gt,compound:s(wt),keyPath:wt,unique:bt,multiEntry:Mt,extractKey:au(wt)};return at[Qr(wt)]=Mt}),getIndexByKeyPath:function(ft){return at[Qr(ft)]}};return at[":id"]=Xe.primaryKey,Ge!=null&&(at[Qr(Ge)]=Xe.primaryKey),Xe})},hasGetAll:0<$e.length&&"getAll"in Me.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),We=tt.schema,Ye=tt.hasGetAll,tt=We.tables.map(ue),qe={};return tt.forEach(function(rt){return qe[rt.name]=rt}),{stack:"dbcore",transaction:k.transaction.bind(k),table:function(rt){if(!qe[rt])throw new Error("Table '".concat(rt,"' not found"));return qe[rt]},MIN_KEY:-1/0,MAX_KEY:ru(j),schema:We}}function Pd(k,j,Z,te){var ue=Z.IDBKeyRange;return Z.indexedDB,{dbcore:(te=Qs(j,ue,te),k.dbcore.reduce(function(we,Me){return Me=Me.create,r(r({},we),Me(we))},te))}}function ds(k,te){var Z=te.db,te=Pd(k._middlewares,Z,k._deps,te);k.core=te.dbcore,k.tables.forEach(function(ue){var we=ue.name;k.core.schema.tables.some(function(Me){return Me.name===we})&&(ue.core=k.core.table(we),k[we]instanceof k.Table&&(k[we].core=ue.core))})}function Fd(k,j,Z,te){Z.forEach(function(ue){var we=te[ue];j.forEach(function(Me){var $e=function We(Ye,tt){return _(Ye,tt)||(Ye=c(Ye))&&We(Ye,tt)}(Me,ue);(!$e||"value"in $e&&$e.value===void 0)&&(Me===k.Transaction.prototype||Me instanceof k.Transaction?w(Me,ue,{get:function(){return this.table(ue)},set:function(We){g(this,ue,{value:We,writable:!0,configurable:!0,enumerable:!0})}}):Me[ue]=new k.Table(ue,we))})})}function kc(k,j){j.forEach(function(Z){for(var te in Z)Z[te]instanceof k.Table&&delete Z[te]})}function tp(k,j){return k._cfg.version-j._cfg.version}function Ac(k,j,Z,te){var ue=k._dbSchema;Z.objectStoreNames.contains("$meta")&&!ue.$meta&&(ue.$meta=nu("$meta",kg("")[0],[]),k._storeNames.push("$meta"));var we=k._createTransaction("readwrite",k._storeNames,ue);we.create(Z),we._completion.catch(te);var Me=we._reject.bind(we),$e=Ce.transless||Ce;Xt(function(){return Ce.trans=we,Ce.transless=$e,j!==0?(ds(k,Z),Ye=j,((We=we).storeNames.includes("$meta")?We.table("$meta").get("version").then(function(tt){return tt??Ye}):M.resolve(Ye)).then(function(tt){return rt=tt,Ge=we,Qe=Z,at=[],tt=(qe=k)._versions,Xe=qe._dbSchema=iu(0,qe.idbdb,Qe),(tt=tt.filter(function(ft){return ft._cfg.version>=rt})).length!==0?(tt.forEach(function(ft){at.push(function(){var gt=Xe,bt=ft._cfg.dbschema;zd(qe,gt,Qe),zd(qe,bt,Qe),Xe=qe._dbSchema=bt;var wt=$d(gt,bt);wt.add.forEach(function(Ht){np(Qe,Ht[0],Ht[1].primKey,Ht[1].indexes)}),wt.change.forEach(function(Ht){if(Ht.recreate)throw new Te.Upgrade("Not yet support for changing primary key");var It=Qe.objectStore(Ht.name);Ht.add.forEach(function(Zt){return Bd(It,Zt)}),Ht.change.forEach(function(Zt){It.deleteIndex(Zt.name),Bd(It,Zt)}),Ht.del.forEach(function(Zt){return It.deleteIndex(Zt)})});var Mt=ft._cfg.contentUpgrade;if(Mt&&ft._cfg.version>rt){ds(qe,Qe),Ge._memoizedTables={};var qt=D(bt);wt.del.forEach(function(Ht){qt[Ht]=gt[Ht]}),kc(qe,[qe.Transaction.prototype]),Fd(qe,[qe.Transaction.prototype],o(qt),qt),Ge.schema=qt;var Nt,$t=X(Mt);return $t&&Tn(),wt=M.follow(function(){var Ht;(Nt=Mt(Ge))&&$t&&(Ht=Bn.bind(null,null),Nt.then(Ht,Ht))}),Nt&&typeof Nt.then=="function"?M.resolve(Nt):wt.then(function(){return Nt})}}),at.push(function(gt){var bt,wt,Mt=ft._cfg.dbschema;bt=Mt,wt=gt,[].slice.call(wt.db.objectStoreNames).forEach(function(qt){return bt[qt]==null&&wt.db.deleteObjectStore(qt)}),kc(qe,[qe.Transaction.prototype]),Fd(qe,[qe.Transaction.prototype],qe._storeNames,qe._dbSchema),Ge.schema=qe._dbSchema}),at.push(function(gt){qe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(qe.idbdb.version/10)===ft._cfg.version?(qe.idbdb.deleteObjectStore("$meta"),delete qe._dbSchema.$meta,qe._storeNames=qe._storeNames.filter(function(bt){return bt!=="$meta"})):gt.objectStore("$meta").put(ft._cfg.version,"version"))})}),function ft(){return at.length?M.resolve(at.shift()(Ge.idbtrans)).then(ft):M.resolve()}().then(function(){Cg(Xe,Qe)})):M.resolve();var qe,rt,Ge,Qe,at,Xe}).catch(Me)):(o(ue).forEach(function(tt){np(Z,tt,ue[tt].primKey,ue[tt].indexes)}),ds(k,Z),void M.follow(function(){return k.on.populate.fire(we)}).catch(Me));var We,Ye})}function Ld(k,j){Cg(k._dbSchema,j),j.db.version%10!=0||j.objectStoreNames.contains("$meta")||j.db.createObjectStore("$meta").add(Math.ceil(j.db.version/10-1),"version");var Z=iu(0,k.idbdb,j);zd(k,k._dbSchema,j);for(var te=0,ue=$d(Z,k._dbSchema).change;te<ue.length;te++){var we=function(Me){if(Me.change.length||Me.recreate)return console.warn("Unable to patch indexes of table ".concat(Me.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=j.objectStore(Me.name);Me.add.forEach(function(We){Le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Me.name,".").concat(We.src)),Bd($e,We)})}(ue[te]);if(typeof we=="object")return we.value}}function $d(k,j){var Z,te={del:[],add:[],change:[]};for(Z in k)j[Z]||te.del.push(Z);for(Z in j){var ue=k[Z],we=j[Z];if(ue){var Me={name:Z,def:we,recreate:!1,del:[],add:[],change:[]};if(""+(ue.primKey.keyPath||"")!=""+(we.primKey.keyPath||"")||ue.primKey.auto!==we.primKey.auto)Me.recreate=!0,te.change.push(Me);else{var $e=ue.idxByName,We=we.idxByName,Ye=void 0;for(Ye in $e)We[Ye]||Me.del.push(Ye);for(Ye in We){var tt=$e[Ye],qe=We[Ye];tt?tt.src!==qe.src&&Me.change.push(qe):Me.add.push(qe)}(0<Me.del.length||0<Me.add.length||0<Me.change.length)&&te.change.push(Me)}}else te.add.push([Z,we])}return te}function np(k,j,Z,te){var ue=k.db.createObjectStore(j,Z.keyPath?{keyPath:Z.keyPath,autoIncrement:Z.auto}:{autoIncrement:Z.auto});return te.forEach(function(we){return Bd(ue,we)}),ue}function Cg(k,j){o(k).forEach(function(Z){j.db.objectStoreNames.contains(Z)||(Le&&console.debug("Dexie: Creating missing table",Z),np(j,Z,k[Z].primKey,k[Z].indexes))})}function Bd(k,j){k.createIndex(j.name,j.keyPath,{unique:j.unique,multiEntry:j.multi})}function iu(k,j,Z){var te={};return S(j.objectStoreNames,0).forEach(function(ue){for(var we=Z.objectStore(ue),Me=Ji(Md(Ye=we.keyPath),Ye||"",!0,!1,!!we.autoIncrement,Ye&&typeof Ye!="string",!0),$e=[],We=0;We<we.indexNames.length;++We){var tt=we.index(we.indexNames[We]),Ye=tt.keyPath,tt=Ji(tt.name,Ye,!!tt.unique,!!tt.multiEntry,!1,Ye&&typeof Ye!="string",!1);$e.push(tt)}te[ue]=nu(ue,Me,$e)}),te}function zd(k,j,Z){for(var te=Z.db.objectStoreNames,ue=0;ue<te.length;++ue){var we=te[ue],Me=Z.objectStore(we);k._hasGetAll="getAll"in Me;for(var $e=0;$e<Me.indexNames.length;++$e){var We=Me.indexNames[$e],Ye=Me.index(We).keyPath,tt=typeof Ye=="string"?Ye:"["+S(Ye).join("+")+"]";!j[we]||(Ye=j[we].idxByName[tt])&&(Ye.name=We,delete j[we].idxByName[tt],j[we].idxByName[We]=Ye)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(k._hasGetAll=!1)}function kg(k){return k.split(",").map(function(j,Z){var te=(j=j.trim()).replace(/([&*]|\+\+)/g,""),ue=/^\[/.test(te)?te.match(/^\[(.*)\]$/)[1].split("+"):te;return Ji(te,ue||null,/\&/.test(j),/\*/.test(j),/\+\+/.test(j),s(ue),Z===0)})}var E1=(Ud.prototype._parseStoresSpec=function(k,j){o(k).forEach(function(Z){if(k[Z]!==null){var te=kg(k[Z]),ue=te.shift();if(ue.unique=!0,ue.multi)throw new Te.Schema("Primary key cannot be multi-valued");te.forEach(function(we){if(we.auto)throw new Te.Schema("Only primary key can be marked as autoIncrement (++)");if(!we.keyPath)throw new Te.Schema("Index must have a name and cannot be an empty string")}),j[Z]=nu(Z,ue,te)}})},Ud.prototype.stores=function(Z){var j=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,Z):Z;var Z=j._versions,te={},ue={};return Z.forEach(function(we){u(te,we._cfg.storesSource),ue=we._cfg.dbschema={},we._parseStoresSpec(te,ue)}),j._dbSchema=ue,kc(j,[j._allTables,j,j.Transaction.prototype]),Fd(j,[j._allTables,j,j.Transaction.prototype,this._cfg.tables],o(ue),ue),j._storeNames=o(ue),this},Ud.prototype.upgrade=function(k){return this._cfg.contentUpgrade=_e(this._cfg.contentUpgrade||Ie,k),this},Ud);function Ud(){}function rp(k,j){var Z=k._dbNamesDB;return Z||(Z=k._dbNamesDB=new Qi(Gs,{addons:[],indexedDB:k,IDBKeyRange:j})).version(1).stores({dbnames:"name"}),Z.table("dbnames")}function qd(k){return k&&typeof k.databases=="function"}function ap(k){return Xt(function(){return Ce.letThrough=!0,k()})}function ip(k){return!("from"in k)}var ba=function(k,j){if(!this){var Z=new ba;return k&&"d"in k&&u(Z,k),Z}u(this,arguments.length?{d:1,from:k,to:1<arguments.length?j:k}:{d:0})};function Tc(k,j,Z){var te=zn(j,Z);if(!isNaN(te)){if(0<te)throw RangeError();if(ip(k))return u(k,{from:j,to:Z,d:1});var ue=k.l,te=k.r;if(zn(Z,k.from)<0)return ue?Tc(ue,j,Z):k.l={from:j,to:Z,d:1,l:null,r:null},Tg(k);if(0<zn(j,k.to))return te?Tc(te,j,Z):k.r={from:j,to:Z,d:1,l:null,r:null},Tg(k);zn(j,k.from)<0&&(k.from=j,k.l=null,k.d=te?te.d+1:1),0<zn(Z,k.to)&&(k.to=Z,k.r=null,k.d=k.l?k.l.d+1:1),Z=!k.r,ue&&!k.l&&el(k,ue),te&&Z&&el(k,te)}}function el(k,j){ip(j)||function Z(te,We){var we=We.from,Me=We.to,$e=We.l,We=We.r;Tc(te,we,Me),$e&&Z(te,$e),We&&Z(te,We)}(k,j)}function Ag(k,j){var Z=Hd(j),te=Z.next();if(te.done)return!1;for(var ue=te.value,we=Hd(k),Me=we.next(ue.from),$e=Me.value;!te.done&&!Me.done;){if(zn($e.from,ue.to)<=0&&0<=zn($e.to,ue.from))return!0;zn(ue.from,$e.from)<0?ue=(te=Z.next($e.from)).value:$e=(Me=we.next(ue.from)).value}return!1}function Hd(k){var j=ip(k)?null:{s:0,n:k};return{next:function(Z){for(var te=0<arguments.length;j;)switch(j.s){case 0:if(j.s=1,te)for(;j.n.l&&zn(Z,j.n.from)<0;)j={up:j,n:j.n.l,s:1};else for(;j.n.l;)j={up:j,n:j.n.l,s:1};case 1:if(j.s=2,!te||zn(Z,j.n.to)<=0)return{value:j.n,done:!1};case 2:if(j.n.r){j.s=3,j={up:j,n:j.n.r,s:0};continue}case 3:j=j.up}return{done:!0}}}}function Tg(k){var j,Z,te=(((j=k.r)===null||j===void 0?void 0:j.d)||0)-(((Z=k.l)===null||Z===void 0?void 0:Z.d)||0),ue=1<te?"r":te<-1?"l":"";ue&&(j=ue=="r"?"l":"r",Z=r({},k),te=k[ue],k.from=te.from,k.to=te.to,k[ue]=te[ue],Z[ue]=te[j],(k[j]=Z).d=op(Z)),k.d=op(k)}function op(Z){var j=Z.r,Z=Z.l;return(j?Z?Math.max(j.d,Z.d):j.d:Z?Z.d:0)+1}function Vd(k,j){return o(j).forEach(function(Z){k[Z]?el(k[Z],j[Z]):k[Z]=function te(ue){var we,Me,$e={};for(we in ue)h(ue,we)&&(Me=ue[we],$e[we]=!Me||typeof Me!="object"||Q.has(Me.constructor)?Me:te(Me));return $e}(j[Z])}),k}function sp(k,j){return k.all||j.all||Object.keys(k).some(function(Z){return j[Z]&&Ag(j[Z],k[Z])})}m(ba.prototype,((ai={add:function(k){return el(this,k),this},addKey:function(k){return Tc(this,k,k),this},addKeys:function(k){var j=this;return k.forEach(function(Z){return Tc(j,Z,Z)}),this},hasKey:function(k){var j=Hd(this).next(k).value;return j&&zn(j.from,k)<=0&&0<=zn(j.to,k)}})[ae]=function(){return Hd(this)},ai));var tl={},lp={},up=!1;function Gd(k){Vd(lp,k),up||(up=!0,setTimeout(function(){up=!1,cp(lp,!(lp={}))},0))}function cp(k,j){j===void 0&&(j=!1);var Z=new Set;if(k.all)for(var te=0,ue=Object.values(tl);te<ue.length;te++)Rg(Me=ue[te],k,Z,j);else for(var we in k){var Me,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(we);$e&&(we=$e[1],$e=$e[2],(Me=tl["idb://".concat(we,"/").concat($e)])&&Rg(Me,k,Z,j))}Z.forEach(function(We){return We()})}function Rg(k,j,Z,te){for(var ue=[],we=0,Me=Object.entries(k.queries.query);we<Me.length;we++){for(var $e=Me[we],We=$e[0],Ye=[],tt=0,qe=$e[1];tt<qe.length;tt++){var rt=qe[tt];sp(j,rt.obsSet)?rt.subscribers.forEach(function(Xe){return Z.add(Xe)}):te&&Ye.push(rt)}te&&ue.push([We,Ye])}if(te)for(var Ge=0,Qe=ue;Ge<Qe.length;Ge++){var at=Qe[Ge],We=at[0],Ye=at[1];k.queries.query[We]=Ye}}function C1(k){var j=k._state,Z=k._deps.indexedDB;if(j.isBeingOpened||k.idbdb)return j.dbReadyPromise.then(function(){return j.dbOpenError?$r(j.dbOpenError):k});j.isBeingOpened=!0,j.dbOpenError=null,j.openComplete=!1;var te=j.openCanceller,ue=Math.round(10*k.verno),we=!1;function Me(){if(j.openCanceller!==te)throw new Te.DatabaseClosed("db.open() was cancelled")}function $e(){return new M(function(rt,Ge){if(Me(),!Z)throw new Te.MissingAPI;var Qe=k.name,at=j.autoSchema||!ue?Z.open(Qe):Z.open(Qe,ue);if(!at)throw new Te.MissingAPI;at.onerror=Di(Ge),at.onblocked=de(k._fireOnBlocked),at.onupgradeneeded=de(function(Xe){var ft;tt=at.transaction,j.autoSchema&&!k._options.allowEmptyDB?(at.onerror=Xs,tt.abort(),at.result.close(),(ft=Z.deleteDatabase(Qe)).onsuccess=ft.onerror=de(function(){Ge(new Te.NoSuchDatabase("Database ".concat(Qe," doesnt exist")))})):(tt.onerror=Di(Ge),Xe=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,qe=Xe<1,k.idbdb=at.result,we&&Ld(k,tt),Ac(k,Xe/10,tt,Ge))},Ge),at.onsuccess=de(function(){tt=null;var Xe,ft,gt,bt,wt,Mt=k.idbdb=at.result,qt=S(Mt.objectStoreNames);if(0<qt.length)try{var Nt=Mt.transaction((bt=qt).length===1?bt[0]:bt,"readonly");if(j.autoSchema)ft=Mt,gt=Nt,(Xe=k).verno=ft.version/10,gt=Xe._dbSchema=iu(0,ft,gt),Xe._storeNames=S(ft.objectStoreNames,0),Fd(Xe,[Xe._allTables],o(gt),gt);else if(zd(k,k._dbSchema,Nt),((wt=$d(iu(0,(wt=k).idbdb,Nt),wt._dbSchema)).add.length||wt.change.some(function($t){return $t.add.length||$t.change.length}))&&!we)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Mt.close(),ue=Mt.version+1,we=!0,rt($e());ds(k,Nt)}catch{}ko.push(k),Mt.onversionchange=de(function($t){j.vcFired=!0,k.on("versionchange").fire($t)}),Mt.onclose=de(function($t){k.on("close").fire($t)}),qe&&(wt=k._deps,Nt=Qe,Mt=wt.indexedDB,wt=wt.IDBKeyRange,qd(Mt)||Nt===Gs||rp(Mt,wt).put({name:Nt}).catch(Ie)),rt()},Ge)}).catch(function(rt){switch(rt==null?void 0:rt.name){case"UnknownError":if(0<j.PR1398_maxLoop)return j.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ue)return ue=0,$e()}return M.reject(rt)})}var We,Ye=j.dbReadyResolve,tt=null,qe=!1;return M.race([te,(typeof navigator>"u"?M.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(rt){function Ge(){return indexedDB.databases().finally(rt)}We=setInterval(Ge,100),Ge()}).finally(function(){return clearInterval(We)}):Promise.resolve()).then($e)]).then(function(){return Me(),j.onReadyBeingFired=[],M.resolve(ap(function(){return k.on.ready.fire(k.vip)})).then(function rt(){if(0<j.onReadyBeingFired.length){var Ge=j.onReadyBeingFired.reduce(_e,Ie);return j.onReadyBeingFired=[],M.resolve(ap(function(){return Ge(k.vip)})).then(rt)}})}).finally(function(){j.openCanceller===te&&(j.onReadyBeingFired=null,j.isBeingOpened=!1)}).catch(function(rt){j.dbOpenError=rt;try{tt&&tt.abort()}catch{}return te===j.openCanceller&&k._close(),$r(rt)}).finally(function(){j.openComplete=!0,Ye()}).then(function(){var rt;return qe&&(rt={},k.tables.forEach(function(Ge){Ge.schema.indexes.forEach(function(Qe){Qe.name&&(rt["idb://".concat(k.name,"/").concat(Ge.name,"/").concat(Qe.name)]=new ba(-1/0,[[[]]]))}),rt["idb://".concat(k.name,"/").concat(Ge.name,"/")]=rt["idb://".concat(k.name,"/").concat(Ge.name,"/:dels")]=new ba(-1/0,[[[]]])}),ya(tu).fire(rt),cp(rt,!0)),k})}function Rc(k){function j(we){return k.next(we)}var Z=ue(j),te=ue(function(we){return k.throw(we)});function ue(we){return function(We){var $e=we(We),We=$e.value;return $e.done?We:We&&typeof We.then=="function"?We.then(Z,te):s(We)?Promise.all(We).then(Z,te):Z(We)}}return ue(j)()}function fs(k,j,Z){for(var te=s(k)?k.slice():[k],ue=0;ue<Z;++ue)te.push(j);return te}var k1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(k){return r(r({},k),{table:function(j){var Z=k.table(j),te=Z.schema,ue={},we=[];function Me(qe,rt,Ge){var Qe=Qr(qe),at=ue[Qe]=ue[Qe]||[],Xe=qe==null?0:typeof qe=="string"?1:qe.length,ft=0<rt,ft=r(r({},Ge),{name:ft?"".concat(Qe,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:ft,keyTail:rt,keyLength:Xe,extractKey:au(qe),unique:!ft&&Ge.unique});return at.push(ft),ft.isPrimaryKey||we.push(ft),1<Xe&&Me(Xe===2?qe[0]:qe.slice(0,Xe-1),rt+1,Ge),at.sort(function(gt,bt){return gt.keyTail-bt.keyTail}),ft}j=Me(te.primaryKey.keyPath,0,te.primaryKey),ue[":id"]=[j];for(var $e=0,We=te.indexes;$e<We.length;$e++){var Ye=We[$e];Me(Ye.keyPath,0,Ye)}function tt(qe){var rt,Ge=qe.query.index;return Ge.isVirtual?r(r({},qe),{query:{index:Ge.lowLevelIndex,range:(rt=qe.query.range,Ge=Ge.keyTail,{type:rt.type===1?2:rt.type,lower:fs(rt.lower,rt.lowerOpen?k.MAX_KEY:k.MIN_KEY,Ge),lowerOpen:!0,upper:fs(rt.upper,rt.upperOpen?k.MIN_KEY:k.MAX_KEY,Ge),upperOpen:!0})}}):qe}return r(r({},Z),{schema:r(r({},te),{primaryKey:j,indexes:we,getIndexByKeyPath:function(qe){return(qe=ue[Qr(qe)])&&qe[0]}}),count:function(qe){return Z.count(tt(qe))},query:function(qe){return Z.query(tt(qe))},openCursor:function(qe){var rt=qe.query.index,Ge=rt.keyTail,Qe=rt.isVirtual,at=rt.keyLength;return Qe?Z.openCursor(tt(qe)).then(function(ft){return ft&&Xe(ft)}):Z.openCursor(qe);function Xe(ft){return Object.create(ft,{continue:{value:function(gt){gt!=null?ft.continue(fs(gt,qe.reverse?k.MAX_KEY:k.MIN_KEY,Ge)):qe.unique?ft.continue(ft.key.slice(0,at).concat(qe.reverse?k.MIN_KEY:k.MAX_KEY,Ge)):ft.continue()}},continuePrimaryKey:{value:function(gt,bt){ft.continuePrimaryKey(fs(gt,k.MAX_KEY,Ge),bt)}},primaryKey:{get:function(){return ft.primaryKey}},key:{get:function(){var gt=ft.key;return at===1?gt[0]:gt.slice(0,at)}},value:{get:function(){return ft.value}}})}}})}})}};function Wd(k,j,Z,te){return Z=Z||{},te=te||"",o(k).forEach(function(ue){var we,Me,$e;h(j,ue)?(we=k[ue],Me=j[ue],typeof we=="object"&&typeof Me=="object"&&we&&Me?($e=he(we))!==he(Me)?Z[te+ue]=j[ue]:$e==="Object"?Wd(we,Me,Z,te+ue+"."):we!==Me&&(Z[te+ue]=j[ue]):we!==Me&&(Z[te+ue]=j[ue])):Z[te+ue]=void 0}),o(j).forEach(function(ue){h(k,ue)||(Z[te+ue]=j[ue])}),Z}function Kd(k,j){return j.type==="delete"?j.keys:j.keys||j.values.map(k.extractKey)}var Ng={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(k){return r(r({},k),{table:function(j){var Z=k.table(j),te=Z.schema.primaryKey;return r(r({},Z),{mutate:function(ue){var we=Ce.trans,Me=we.table(j).hook,$e=Me.deleting,We=Me.creating,Ye=Me.updating;switch(ue.type){case"add":if(We.fire===Ie)break;return we._promise("readwrite",function(){return tt(ue)},!0);case"put":if(We.fire===Ie&&Ye.fire===Ie)break;return we._promise("readwrite",function(){return tt(ue)},!0);case"delete":if($e.fire===Ie)break;return we._promise("readwrite",function(){return tt(ue)},!0);case"deleteRange":if($e.fire===Ie)break;return we._promise("readwrite",function(){return function qe(rt,Ge,Qe){return Z.query({trans:rt,values:!1,query:{index:te,range:Ge},limit:Qe}).then(function(at){var Xe=at.result;return tt({type:"delete",keys:Xe,trans:rt}).then(function(ft){return 0<ft.numFailures?Promise.reject(ft.failures[0]):Xe.length<Qe?{failures:[],numFailures:0,lastResult:void 0}:qe(rt,r(r({},Ge),{lower:Xe[Xe.length-1],lowerOpen:!0}),Qe)})})}(ue.trans,ue.range,1e4)},!0)}return Z.mutate(ue);function tt(qe){var rt,Ge,Qe,at=Ce.trans,Xe=qe.keys||Kd(te,qe);if(!Xe)throw new Error("Keys missing");return(qe=qe.type==="add"||qe.type==="put"?r(r({},qe),{keys:Xe}):r({},qe)).type!=="delete"&&(qe.values=a([],qe.values)),qe.keys&&(qe.keys=a([],qe.keys)),rt=Z,Qe=Xe,((Ge=qe).type==="add"?Promise.resolve([]):rt.getMany({trans:Ge.trans,keys:Qe,cache:"immutable"})).then(function(ft){var gt=Xe.map(function(bt,wt){var Mt,qt,Nt,$t=ft[wt],Ht={onerror:null,onsuccess:null};return qe.type==="delete"?$e.fire.call(Ht,bt,$t,at):qe.type==="add"||$t===void 0?(Mt=We.fire.call(Ht,bt,qe.values[wt],at),bt==null&&Mt!=null&&(qe.keys[wt]=bt=Mt,te.outbound||I(qe.values[wt],te.keyPath,bt))):(Mt=Wd($t,qe.values[wt]),(qt=Ye.fire.call(Ht,Mt,bt,$t,at))&&(Nt=qe.values[wt],Object.keys(qt).forEach(function(It){h(Nt,It)?Nt[It]=qt[It]:I(Nt,It,qt[It])}))),Ht});return Z.mutate(qe).then(function(bt){for(var wt=bt.failures,Mt=bt.results,qt=bt.numFailures,bt=bt.lastResult,Nt=0;Nt<Xe.length;++Nt){var $t=(Mt||Xe)[Nt],Ht=gt[Nt];$t==null?Ht.onerror&&Ht.onerror(wt[Nt]):Ht.onsuccess&&Ht.onsuccess(qe.type==="put"&&ft[Nt]?qe.values[Nt]:$t)}return{failures:wt,results:Mt,numFailures:qt,lastResult:bt}}).catch(function(bt){return gt.forEach(function(wt){return wt.onerror&&wt.onerror(bt)}),Promise.reject(bt)})})}}})}})}};function dp(k,j,Z){try{if(!j||j.keys.length<k.length)return null;for(var te=[],ue=0,we=0;ue<j.keys.length&&we<k.length;++ue)zn(j.keys[ue],k[we])===0&&(te.push(Z?W(j.values[ue]):j.values[ue]),++we);return te.length===k.length?te:null}catch{return null}}var Ig={stack:"dbcore",level:-1,create:function(k){return{table:function(j){var Z=k.table(j);return r(r({},Z),{getMany:function(te){if(!te.cache)return Z.getMany(te);var ue=dp(te.keys,te.trans._cache,te.cache==="clone");return ue?M.resolve(ue):Z.getMany(te).then(function(we){return te.trans._cache={keys:te.keys,values:te.cache==="clone"?W(we):we},we})},mutate:function(te){return te.type!=="add"&&(te.trans._cache=null),Z.mutate(te)}})}}}};function nl(k,j){return k.trans.mode==="readonly"&&!!k.subscr&&!k.trans.explicit&&k.trans.db._options.cache!=="disabled"&&!j.schema.primaryKey.outbound}function Og(k,j){switch(k){case"query":return j.values&&!j.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var A1={stack:"dbcore",level:0,name:"Observability",create:function(k){var j=k.schema.name,Z=new ba(k.MIN_KEY,k.MAX_KEY);return r(r({},k),{transaction:function(te,ue,we){if(Ce.subscr&&ue!=="readonly")throw new Te.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ce.querier));return k.transaction(te,ue,we)},table:function(te){var ue=k.table(te),we=ue.schema,Me=we.primaryKey,qe=we.indexes,$e=Me.extractKey,We=Me.outbound,Ye=Me.autoIncrement&&qe.filter(function(Ge){return Ge.compound&&Ge.keyPath.includes(Me.keyPath)}),tt=r(r({},ue),{mutate:function(Ge){function Qe(It){return It="idb://".concat(j,"/").concat(te,"/").concat(It),bt[It]||(bt[It]=new ba)}var at,Xe,ft,gt=Ge.trans,bt=Ge.mutatedParts||(Ge.mutatedParts={}),wt=Qe(""),Mt=Qe(":dels"),qt=Ge.type,Ht=Ge.type==="deleteRange"?[Ge.range]:Ge.type==="delete"?[Ge.keys]:Ge.values.length<50?[Kd(Me,Ge).filter(function(It){return It}),Ge.values]:[],Nt=Ht[0],$t=Ht[1],Ht=Ge.trans._cache;return s(Nt)?(wt.addKeys(Nt),(Ht=qt==="delete"||Nt.length===$t.length?dp(Nt,Ht):null)||Mt.addKeys(Nt),(Ht||$t)&&(at=Qe,Xe=Ht,ft=$t,we.indexes.forEach(function(It){var Zt=at(It.name||"");function cn(Sn){return Sn!=null?It.extractKey(Sn):null}function dn(Sn){return It.multiEntry&&s(Sn)?Sn.forEach(function(Oa){return Zt.addKey(Oa)}):Zt.addKey(Sn)}(Xe||ft).forEach(function(Sn,Kr){var yn=Xe&&cn(Xe[Kr]),Kr=ft&&cn(ft[Kr]);zn(yn,Kr)!==0&&(yn!=null&&dn(yn),Kr!=null&&dn(Kr))})}))):Nt?($t={from:($t=Nt.lower)!==null&&$t!==void 0?$t:k.MIN_KEY,to:($t=Nt.upper)!==null&&$t!==void 0?$t:k.MAX_KEY},Mt.add($t),wt.add($t)):(wt.add(Z),Mt.add(Z),we.indexes.forEach(function(It){return Qe(It.name).add(Z)})),ue.mutate(Ge).then(function(It){return!Nt||Ge.type!=="add"&&Ge.type!=="put"||(wt.addKeys(It.results),Ye&&Ye.forEach(function(Zt){for(var cn=Ge.values.map(function(yn){return Zt.extractKey(yn)}),dn=Zt.keyPath.findIndex(function(yn){return yn===Me.keyPath}),Sn=0,Oa=It.results.length;Sn<Oa;++Sn)cn[Sn][dn]=It.results[Sn];Qe(Zt.name).addKeys(cn)})),gt.mutatedParts=Vd(gt.mutatedParts||{},bt),It})}}),qe=function(Qe){var at=Qe.query,Qe=at.index,at=at.range;return[Qe,new ba((Qe=at.lower)!==null&&Qe!==void 0?Qe:k.MIN_KEY,(at=at.upper)!==null&&at!==void 0?at:k.MAX_KEY)]},rt={get:function(Ge){return[Me,new ba(Ge.key)]},getMany:function(Ge){return[Me,new ba().addKeys(Ge.keys)]},count:qe,query:qe,openCursor:qe};return o(rt).forEach(function(Ge){tt[Ge]=function(Qe){var at=Ce.subscr,Xe=!!at,ft=nl(Ce,ue)&&Og(Ge,Qe)?Qe.obsSet={}:at;if(Xe){var gt=function($t){return $t="idb://".concat(j,"/").concat(te,"/").concat($t),ft[$t]||(ft[$t]=new ba)},bt=gt(""),wt=gt(":dels"),at=rt[Ge](Qe),Xe=at[0],at=at[1];if((Ge==="query"&&Xe.isPrimaryKey&&!Qe.values?wt:gt(Xe.name||"")).add(at),!Xe.isPrimaryKey){if(Ge!=="count"){var Mt=Ge==="query"&&We&&Qe.values&&ue.query(r(r({},Qe),{values:!1}));return ue[Ge].apply(this,arguments).then(function($t){if(Ge==="query"){if(We&&Qe.values)return Mt.then(function(cn){return cn=cn.result,bt.addKeys(cn),$t});var Ht=Qe.values?$t.result.map($e):$t.result;(Qe.values?bt:wt).addKeys(Ht)}else if(Ge==="openCursor"){var It=$t,Zt=Qe.values;return It&&Object.create(It,{key:{get:function(){return wt.addKey(It.primaryKey),It.key}},primaryKey:{get:function(){var cn=It.primaryKey;return wt.addKey(cn),cn}},value:{get:function(){return Zt&&bt.addKey(It.primaryKey),It.value}}})}return $t})}wt.add(Z)}}return ue[Ge].apply(this,arguments)}}),tt}})}};function Dg(k,j,Z){if(Z.numFailures===0)return j;if(j.type==="deleteRange")return null;var te=j.keys?j.keys.length:"values"in j&&j.values?j.values.length:1;return Z.numFailures===te?null:(j=r({},j),s(j.keys)&&(j.keys=j.keys.filter(function(ue,we){return!(we in Z.failures)})),"values"in j&&s(j.values)&&(j.values=j.values.filter(function(ue,we){return!(we in Z.failures)})),j)}function Zd(k,j){return Z=k,((te=j).lower===void 0||(te.lowerOpen?0<zn(Z,te.lower):0<=zn(Z,te.lower)))&&(k=k,(j=j).upper===void 0||(j.upperOpen?zn(k,j.upper)<0:zn(k,j.upper)<=0));var Z,te}function fp(k,j,rt,te,ue,we){if(!rt||rt.length===0)return k;var Me=j.query.index,$e=Me.multiEntry,We=j.query.range,Ye=te.schema.primaryKey.extractKey,tt=Me.extractKey,qe=(Me.lowLevelIndex||Me).extractKey,rt=rt.reduce(function(Ge,Qe){var at=Ge,Xe=[];if(Qe.type==="add"||Qe.type==="put")for(var ft=new ba,gt=Qe.values.length-1;0<=gt;--gt){var bt,wt=Qe.values[gt],Mt=Ye(wt);ft.hasKey(Mt)||(bt=tt(wt),($e&&s(bt)?bt.some(function(It){return Zd(It,We)}):Zd(bt,We))&&(ft.addKey(Mt),Xe.push(wt)))}switch(Qe.type){case"add":var qt=new ba().addKeys(j.values?Ge.map(function(Zt){return Ye(Zt)}):Ge),at=Ge.concat(j.values?Xe.filter(function(Zt){return Zt=Ye(Zt),!qt.hasKey(Zt)&&(qt.addKey(Zt),!0)}):Xe.map(function(Zt){return Ye(Zt)}).filter(function(Zt){return!qt.hasKey(Zt)&&(qt.addKey(Zt),!0)}));break;case"put":var Nt=new ba().addKeys(Qe.values.map(function(Zt){return Ye(Zt)}));at=Ge.filter(function(Zt){return!Nt.hasKey(j.values?Ye(Zt):Zt)}).concat(j.values?Xe:Xe.map(function(Zt){return Ye(Zt)}));break;case"delete":var $t=new ba().addKeys(Qe.keys);at=Ge.filter(function(Zt){return!$t.hasKey(j.values?Ye(Zt):Zt)});break;case"deleteRange":var Ht=Qe.range;at=Ge.filter(function(Zt){return!Zd(Ye(Zt),Ht)})}return at},k);return rt===k?k:(rt.sort(function(Ge,Qe){return zn(qe(Ge),qe(Qe))||zn(Ye(Ge),Ye(Qe))}),j.limit&&j.limit<1/0&&(rt.length>j.limit?rt.length=j.limit:k.length===j.limit&&rt.length<j.limit&&(ue.dirty=!0)),we?Object.freeze(rt):rt)}function ou(k,j){return zn(k.lower,j.lower)===0&&zn(k.upper,j.upper)===0&&!!k.lowerOpen==!!j.lowerOpen&&!!k.upperOpen==!!j.upperOpen}function Nc(k,j){return function(Z,te,ue,we){if(Z===void 0)return te!==void 0?-1:0;if(te===void 0)return 1;if((te=zn(Z,te))===0){if(ue&&we)return 0;if(ue)return 1;if(we)return-1}return te}(k.lower,j.lower,k.lowerOpen,j.lowerOpen)<=0&&0<=function(Z,te,ue,we){if(Z===void 0)return te!==void 0?1:0;if(te===void 0)return-1;if((te=zn(Z,te))===0){if(ue&&we)return 0;if(ue)return-1;if(we)return 1}return te}(k.upper,j.upper,k.upperOpen,j.upperOpen)}function T1(k,j,Z,te){k.subscribers.add(Z),te.addEventListener("abort",function(){var ue,we;k.subscribers.delete(Z),k.subscribers.size===0&&(ue=k,we=j,setTimeout(function(){ue.subscribers.size===0&&ee(we,ue)},3e3))})}var Yd={stack:"dbcore",level:0,name:"Cache",create:function(k){var j=k.schema.name;return r(r({},k),{transaction:function(Z,te,ue){var we,Me,$e=k.transaction(Z,te,ue);return te==="readwrite"&&(Me=(we=new AbortController).signal,ue=function(We){return function(){if(we.abort(),te==="readwrite"){for(var Ye=new Set,tt=0,qe=Z;tt<qe.length;tt++){var rt=qe[tt],Ge=tl["idb://".concat(j,"/").concat(rt)];if(Ge){var Qe=k.table(rt),at=Ge.optimisticOps.filter(function(Zt){return Zt.trans===$e});if($e._explicit&&We&&$e.mutatedParts)for(var Xe=0,ft=Object.values(Ge.queries.query);Xe<ft.length;Xe++)for(var gt=0,bt=(qt=ft[Xe]).slice();gt<bt.length;gt++)sp((Nt=bt[gt]).obsSet,$e.mutatedParts)&&(ee(qt,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)}));else if(0<at.length){Ge.optimisticOps=Ge.optimisticOps.filter(function(Zt){return Zt.trans!==$e});for(var wt=0,Mt=Object.values(Ge.queries.query);wt<Mt.length;wt++)for(var qt,Nt,$t,Ht=0,It=(qt=Mt[wt]).slice();Ht<It.length;Ht++)(Nt=It[Ht]).res!=null&&$e.mutatedParts&&(We&&!Nt.dirty?($t=Object.isFrozen(Nt.res),$t=fp(Nt.res,Nt.req,at,Qe,Nt,$t),Nt.dirty?(ee(qt,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)})):$t!==Nt.res&&(Nt.res=$t,Nt.promise=M.resolve({result:$t}))):(Nt.dirty&&ee(qt,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)})))}}}Ye.forEach(function(Zt){return Zt()})}}},$e.addEventListener("abort",ue(!1),{signal:Me}),$e.addEventListener("error",ue(!1),{signal:Me}),$e.addEventListener("complete",ue(!0),{signal:Me})),$e},table:function(Z){var te=k.table(Z),ue=te.schema.primaryKey;return r(r({},te),{mutate:function(we){var Me=Ce.trans;if(ue.outbound||Me.db._options.cache==="disabled"||Me.explicit||Me.idbtrans.mode!=="readwrite")return te.mutate(we);var $e=tl["idb://".concat(j,"/").concat(Z)];return $e?(Me=te.mutate(we),we.type!=="add"&&we.type!=="put"||!(50<=we.values.length||Kd(ue,we).some(function(We){return We==null}))?($e.optimisticOps.push(we),we.mutatedParts&&Gd(we.mutatedParts),Me.then(function(We){0<We.numFailures&&(ee($e.optimisticOps,we),(We=Dg(0,we,We))&&$e.optimisticOps.push(We),we.mutatedParts&&Gd(we.mutatedParts))}),Me.catch(function(){ee($e.optimisticOps,we),we.mutatedParts&&Gd(we.mutatedParts)})):Me.then(function(We){var Ye=Dg(0,r(r({},we),{values:we.values.map(function(tt,qe){var rt;return We.failures[qe]?tt:(tt=(rt=ue.keyPath)!==null&&rt!==void 0&&rt.includes(".")?W(tt):r({},tt),I(tt,ue.keyPath,We.results[qe]),tt)})}),We);$e.optimisticOps.push(Ye),queueMicrotask(function(){return we.mutatedParts&&Gd(we.mutatedParts)})}),Me):te.mutate(we)},query:function(we){if(!nl(Ce,te)||!Og("query",we))return te.query(we);var Me=((Ye=Ce.trans)===null||Ye===void 0?void 0:Ye.db._options.cache)==="immutable",qe=Ce,$e=qe.requery,We=qe.signal,Ye=function(Qe,at,Xe,ft){var gt=tl["idb://".concat(Qe,"/").concat(at)];if(!gt)return[];if(!(at=gt.queries[Xe]))return[null,!1,gt,null];var bt=at[(ft.query?ft.query.index.name:null)||""];if(!bt)return[null,!1,gt,null];switch(Xe){case"query":var wt=bt.find(function(Mt){return Mt.req.limit===ft.limit&&Mt.req.values===ft.values&&ou(Mt.req.query.range,ft.query.range)});return wt?[wt,!0,gt,bt]:[bt.find(function(Mt){return("limit"in Mt.req?Mt.req.limit:1/0)>=ft.limit&&(!ft.values||Mt.req.values)&&Nc(Mt.req.query.range,ft.query.range)}),!1,gt,bt];case"count":return wt=bt.find(function(Mt){return ou(Mt.req.query.range,ft.query.range)}),[wt,!!wt,gt,bt]}}(j,Z,"query",we),tt=Ye[0],qe=Ye[1],rt=Ye[2],Ge=Ye[3];return tt&&qe?tt.obsSet=we.obsSet:(qe=te.query(we).then(function(Qe){var at=Qe.result;if(tt&&(tt.res=at),Me){for(var Xe=0,ft=at.length;Xe<ft;++Xe)Object.freeze(at[Xe]);Object.freeze(at)}else Qe.result=W(at);return Qe}).catch(function(Qe){return Ge&&tt&&ee(Ge,tt),Promise.reject(Qe)}),tt={obsSet:we.obsSet,promise:qe,subscribers:new Set,type:"query",req:we,dirty:!1},Ge?Ge.push(tt):(Ge=[tt],(rt=rt||(tl["idb://".concat(j,"/").concat(Z)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[we.query.index.name||""]=Ge)),T1(tt,Ge,$e,We),tt.promise.then(function(Qe){return{result:fp(Qe.result,we,rt==null?void 0:rt.optimisticOps,te,tt,Me)}})}})}})}};function Ic(k,j){return new Proxy(k,{get:function(Z,te,ue){return te==="db"?j:Reflect.get(Z,te,ue)}})}var Qi=(Ir.prototype.version=function(k){if(isNaN(k)||k<.1)throw new Te.Type("Given version is not a positive number");if(k=Math.round(10*k)/10,this.idbdb||this._state.isBeingOpened)throw new Te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,k);var j=this._versions,Z=j.filter(function(te){return te._cfg.version===k})[0];return Z||(Z=new this.Version(k),j.push(Z),j.sort(tp),Z.stores({}),this._state.autoSchema=!1,Z)},Ir.prototype._whenReady=function(k){var j=this;return this.idbdb&&(this._state.openComplete||Ce.letThrough||this._vip)?k():new M(function(Z,te){if(j._state.openComplete)return te(new Te.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return void te(new Te.DatabaseClosed);j.open().catch(Ie)}j._state.dbReadyPromise.then(Z,te)}).then(k)},Ir.prototype.use=function(k){var j=k.stack,Z=k.create,te=k.level,ue=k.name;return ue&&this.unuse({stack:j,name:ue}),k=this._middlewares[j]||(this._middlewares[j]=[]),k.push({stack:j,create:Z,level:te??10,name:ue}),k.sort(function(we,Me){return we.level-Me.level}),this},Ir.prototype.unuse=function(k){var j=k.stack,Z=k.name,te=k.create;return j&&this._middlewares[j]&&(this._middlewares[j]=this._middlewares[j].filter(function(ue){return te?ue.create!==te:!!Z&&ue.name!==Z})),this},Ir.prototype.open=function(){var k=this;return is(ve,function(){return C1(k)})},Ir.prototype._close=function(){var k=this._state,j=ko.indexOf(this);if(0<=j&&ko.splice(j,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}k.isBeingOpened||(k.dbReadyPromise=new M(function(Z){k.dbReadyResolve=Z}),k.openCanceller=new M(function(Z,te){k.cancelOpen=te}))},Ir.prototype.close=function(Z){var j=(Z===void 0?{disableAutoOpen:!0}:Z).disableAutoOpen,Z=this._state;j?(Z.isBeingOpened&&Z.cancelOpen(new Te.DatabaseClosed),this._close(),Z.autoOpen=!1,Z.dbOpenError=new Te.DatabaseClosed):(this._close(),Z.autoOpen=this._options.autoOpen||Z.isBeingOpened,Z.openComplete=!1,Z.dbOpenError=null)},Ir.prototype.delete=function(k){var j=this;k===void 0&&(k={disableAutoOpen:!0});var Z=0<arguments.length&&typeof arguments[0]!="object",te=this._state;return new M(function(ue,we){function Me(){j.close(k);var $e=j._deps.indexedDB.deleteDatabase(j.name);$e.onsuccess=de(function(){var We,Ye,tt;We=j._deps,Ye=j.name,tt=We.indexedDB,We=We.IDBKeyRange,qd(tt)||Ye===Gs||rp(tt,We).delete(Ye).catch(Ie),ue()}),$e.onerror=Di(we),$e.onblocked=j._fireOnBlocked}if(Z)throw new Te.InvalidArgument("Invalid closeOptions argument to db.delete()");te.isBeingOpened?te.dbReadyPromise.then(Me):Me()})},Ir.prototype.backendDB=function(){return this.idbdb},Ir.prototype.isOpen=function(){return this.idbdb!==null},Ir.prototype.hasBeenClosed=function(){var k=this._state.dbOpenError;return k&&k.name==="DatabaseClosed"},Ir.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ir.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ir.prototype,"tables",{get:function(){var k=this;return o(this._allTables).map(function(j){return k._allTables[j]})},enumerable:!1,configurable:!0}),Ir.prototype.transaction=function(){var k=(function(j,Z,te){var ue=arguments.length;if(ue<2)throw new Te.InvalidArgument("Too few arguments");for(var we=new Array(ue-1);--ue;)we[ue-1]=arguments[ue];return te=we.pop(),[j,K(we),te]}).apply(this,arguments);return this._transaction.apply(this,k)},Ir.prototype._transaction=function(k,j,Z){var te=this,ue=Ce.trans;ue&&ue.db===this&&k.indexOf("!")===-1||(ue=null);var we,Me,$e=k.indexOf("?")!==-1;k=k.replace("!","").replace("?","");try{if(Me=j.map(function(Ye){if(Ye=Ye instanceof te.Table?Ye.name:Ye,typeof Ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ye}),k=="r"||k===Oi)we=Oi;else{if(k!="rw"&&k!=Ec)throw new Te.InvalidArgument("Invalid transaction mode: "+k);we=Ec}if(ue){if(ue.mode===Oi&&we===Ec){if(!$e)throw new Te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ue=null}ue&&Me.forEach(function(Ye){if(ue&&ue.storeNames.indexOf(Ye)===-1){if(!$e)throw new Te.SubTransaction("Table "+Ye+" not included in parent transaction.");ue=null}}),$e&&ue&&!ue.active&&(ue=null)}}catch(Ye){return ue?ue._promise(null,function(tt,qe){qe(Ye)}):$r(Ye)}var We=(function Ye(tt,qe,rt,Ge,Qe){return M.resolve().then(function(){var at=Ce.transless||Ce,Xe=tt._createTransaction(qe,rt,tt._dbSchema,Ge);if(Xe.explicit=!0,at={trans:Xe,transless:at},Ge)Xe.idbtrans=Ge.idbtrans;else try{Xe.create(),Xe.idbtrans._explicit=!0,tt._state.PR1398_maxLoop=3}catch(bt){return bt.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,qe,rt,null,Qe)})):$r(bt)}var ft,gt=X(Qe);return gt&&Tn(),at=M.follow(function(){var bt;(ft=Qe.call(Xe,Xe))&&(gt?(bt=Bn.bind(null,null),ft.then(bt,bt)):typeof ft.next=="function"&&typeof ft.throw=="function"&&(ft=Rc(ft)))},at),(ft&&typeof ft.then=="function"?M.resolve(ft).then(function(bt){return Xe.active?bt:$r(new Te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):at.then(function(){return ft})).then(function(bt){return Ge&&Xe._resolve(),Xe._completion.then(function(){return bt})}).catch(function(bt){return Xe._reject(bt),$r(bt)})})}).bind(null,this,we,Me,ue,Z);return ue?ue._promise(we,We,"lock"):Ce.trans?is(Ce.transless,function(){return te._whenReady(We)}):this._whenReady(We)},Ir.prototype.table=function(k){if(!h(this._allTables,k))throw new Te.InvalidTable("Table ".concat(k," does not exist"));return this._allTables[k]},Ir);function Ir(k,j){var Z=this;this._middlewares={},this.verno=0;var te=Ir.dependencies;this._options=j=r({addons:Ir.addons,autoOpen:!0,indexedDB:te.indexedDB,IDBKeyRange:te.IDBKeyRange,cache:"cloned"},j),this._deps={indexedDB:j.indexedDB,IDBKeyRange:j.IDBKeyRange},te=j.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ue,we,Me,$e,We,Ye={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ie,dbReadyPromise:null,cancelOpen:Ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:j.autoOpen};Ye.dbReadyPromise=new M(function(qe){Ye.dbReadyResolve=qe}),Ye.openCanceller=new M(function(qe,rt){Ye.cancelOpen=rt}),this._state=Ye,this.name=k,this.on=cs(this,"populate","blocked","versionchange","close",{ready:[_e,Ie]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(qe){return function(rt,Ge){Ir.vip(function(){var Qe,at=Z._state;at.openComplete?(at.dbOpenError||M.resolve().then(rt),Ge&&qe(rt)):at.onReadyBeingFired?(at.onReadyBeingFired.push(rt),Ge&&qe(rt)):(qe(rt),Qe=Z,Ge||qe(function Xe(){Qe.on.ready.unsubscribe(rt),Qe.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(ue=this,Zl(Ql.prototype,function(ft,Xe){this.db=ue;var Ge=Ws,Qe=null;if(Xe)try{Ge=Xe()}catch(gt){Qe=gt}var at=ft._ctx,Xe=at.table,ft=Xe.hook.reading.fire;this._ctx={table:Xe,index:at.index,isPrimKey:!at.index||Xe.schema.primKey.keyPath&&at.index===Xe.schema.primKey.name,range:Ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Qe,or:at.or,valueMapper:ft!==Ae?ft:null}})),this.Table=(we=this,Zl(Zh.prototype,function(qe,rt,Ge){this.db=we,this._tx=Ge,this.name=qe,this.schema=rt,this.hook=we._allTables[qe]?we._allTables[qe].hook:cs(null,{creating:[Ne,Ie],reading:[z,Ae],updating:[ie,Ie],deleting:[ce,Ie]})})),this.Transaction=(Me=this,Zl(ep.prototype,function(qe,rt,Ge,Qe,at){var Xe=this;this.db=Me,this.mode=qe,this.storeNames=rt,this.schema=Ge,this.chromeTransactionDurability=Qe,this.idbtrans=null,this.on=cs(this,"complete","error","abort"),this.parent=at||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(ft,gt){Xe._resolve=ft,Xe._reject=gt}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(ft){var gt=Xe.active;return Xe.active=!1,Xe.on.error.fire(ft),Xe.parent?Xe.parent._reject(ft):gt&&Xe.idbtrans&&Xe.idbtrans.abort(),$r(ft)})})),this.Version=($e=this,Zl(E1.prototype,function(qe){this.db=$e,this._cfg={version:qe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(We=this,Zl(Ys.prototype,function(qe,rt,Ge){if(this.db=We,this._ctx={table:qe,index:rt===":id"?null:rt,or:Ge},this._cmp=this._ascending=zn,this._descending=function(Qe,at){return zn(at,Qe)},this._max=function(Qe,at){return 0<zn(Qe,at)?Qe:at},this._min=function(Qe,at){return zn(Qe,at)<0?Qe:at},this._IDBKeyRange=We._deps.IDBKeyRange,!this._IDBKeyRange)throw new Te.MissingAPI})),this.on("versionchange",function(qe){0<qe.newVersion?console.warn("Another connection wants to upgrade database '".concat(Z.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Z.name,"'. Closing db now to resume the delete request.")),Z.close({disableAutoOpen:!1})}),this.on("blocked",function(qe){!qe.newVersion||qe.newVersion<qe.oldVersion?console.warn("Dexie.delete('".concat(Z.name,"') was blocked")):console.warn("Upgrade '".concat(Z.name,"' blocked by other connection holding version ").concat(qe.oldVersion/10))}),this._maxKey=ru(j.IDBKeyRange),this._createTransaction=function(qe,rt,Ge,Qe){return new Z.Transaction(qe,rt,Ge,Z._options.chromeTransactionDurability,Qe)},this._fireOnBlocked=function(qe){Z.on("blocked").fire(qe),ko.filter(function(rt){return rt.name===Z.name&&rt!==Z&&!rt._state.vcFired}).map(function(rt){return rt.on("versionchange").fire(qe)})},this.use(Ig),this.use(Yd),this.use(A1),this.use(k1),this.use(Ng);var tt=new Proxy(this,{get:function(qe,rt,Ge){if(rt==="_vip")return!0;if(rt==="table")return function(at){return Ic(Z.table(at),tt)};var Qe=Reflect.get(qe,rt,Ge);return Qe instanceof Zh?Ic(Qe,tt):rt==="tables"?Qe.map(function(at){return Ic(at,tt)}):rt==="_createTransaction"?function(){return Ic(Qe.apply(this,arguments),tt)}:Qe}});this.vip=tt,te.forEach(function(qe){return qe(Z)})}var su,ai=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",jg=(Xd.prototype.subscribe=function(k,j,Z){return this._subscribe(k&&typeof k!="function"?k:{next:k,error:j,complete:Z})},Xd.prototype[ai]=function(){return this},Xd);function Xd(k){this._subscribe=k}try{su={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{su={indexedDB:null,IDBKeyRange:null}}function Mg(k){var j,Z=!1,te=new jg(function(ue){var we=X(k),Me,$e=!1,We={},Ye={},tt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,Me&&Me.abort(),qe&&ya.storagemutated.unsubscribe(Ge))}};ue.start&&ue.start(tt);var qe=!1,rt=function(){return ss(Qe)},Ge=function(at){Vd(We,at),sp(Ye,We)&&rt()},Qe=function(){var at,Xe,ft;!$e&&su.indexedDB&&(We={},at={},Me&&Me.abort(),Me=new AbortController,ft=function(gt){var bt=q();try{we&&Tn();var wt=Xt(k,gt);return wt=we?wt.finally(Bn):wt}finally{bt&&$()}}(Xe={subscr:at,signal:Me.signal,requery:rt,querier:k,trans:null}),Promise.resolve(ft).then(function(gt){Z=!0,j=gt,$e||Xe.signal.aborted||(We={},function(bt){for(var wt in bt)if(h(bt,wt))return;return 1}(Ye=at)||qe||(ya(tu,Ge),qe=!0),ss(function(){return!$e&&ue.next&&ue.next(gt)}))},function(gt){Z=!1,["DatabaseClosedError","AbortError"].includes(gt==null?void 0:gt.name)||$e||ss(function(){$e||ue.error&&ue.error(gt)})}))};return setTimeout(rt,0),tt});return te.hasValue=function(){return Z},te.getValue=function(){return j},te}var rl=Qi;function hp(k){var j=hs;try{hs=!0,ya.storagemutated.fire(k),cp(k,!0)}finally{hs=j}}m(rl,r(r({},it),{delete:function(k){return new rl(k,{addons:[]}).delete()},exists:function(k){return new rl(k,{addons:[]}).open().then(function(j){return j.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(k){try{return j=rl.dependencies,Z=j.indexedDB,j=j.IDBKeyRange,(qd(Z)?Promise.resolve(Z.databases()).then(function(te){return te.map(function(ue){return ue.name}).filter(function(ue){return ue!==Gs})}):rp(Z,j).toCollection().primaryKeys()).then(k)}catch{return $r(new Te.MissingAPI)}var j,Z},defineClass:function(){return function(k){u(this,k)}},ignoreTransaction:function(k){return Ce.trans?is(Ce.transless,k):k()},vip:ap,async:function(k){return function(){try{var j=Rc(k.apply(this,arguments));return j&&typeof j.then=="function"?j:M.resolve(j)}catch(Z){return $r(Z)}}},spawn:function(k,j,Z){try{var te=Rc(k.apply(Z,j||[]));return te&&typeof te.then=="function"?te:M.resolve(te)}catch(ue){return $r(ue)}},currentTransaction:{get:function(){return Ce.trans||null}},waitFor:function(k,j){return j=M.resolve(typeof k=="function"?rl.ignoreTransaction(k):k).timeout(j||6e4),Ce.trans?Ce.trans.waitFor(j):j},Promise:M,debug:{get:function(){return Le},set:function(k){xe(k)}},derive:v,extend:u,props:m,override:E,Events:cs,on:ya,liveQuery:Mg,extendObservabilitySet:Vd,getByKeyPath:O,setByKeyPath:I,delByKeyPath:function(k,j){typeof j=="string"?I(k,j,void 0):"length"in j&&[].map.call(j,function(Z){I(k,Z,void 0)})},shallowClone:D,deepClone:W,getObjectDiff:Wd,cmp:zn,asap:A,minKey:-1/0,addons:[],connections:ko,errnames:Pe,dependencies:su,cache:tl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(k){return parseInt(k)}).reduce(function(k,j,Z){return k+j/Math.pow(10,2*Z)})})),rl.maxKey=ru(rl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ya(tu,function(k){hs||(k=new CustomEvent(Js,{detail:k}),hs=!0,dispatchEvent(k),hs=!1)}),addEventListener(Js,function(k){k=k.detail,hs||hp(k)}));var lu,hs=!1,Ua=function(){};return typeof BroadcastChannel<"u"&&((Ua=function(){(lu=new BroadcastChannel(Js)).onmessage=function(k){return k.data&&hp(k.data)}})(),typeof lu.unref=="function"&&lu.unref(),ya(tu,function(k){hs||lu.postMessage(k)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(k){if(!Qi.disableBfCache&&k.persisted){Le&&console.debug("Dexie: handling persisted pagehide"),lu!=null&&lu.close();for(var j=0,Z=ko;j<Z.length;j++)Z[j].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(k){!Qi.disableBfCache&&k.persisted&&(Le&&console.debug("Dexie: handling persisted pageshow"),Ua(),hp({all:new ba(-1/0,[[]])}))})),M.rejectionMapper=function(k,j){return!k||k instanceof ne||k instanceof TypeError||k instanceof SyntaxError||!k.name||!He[k.name]?k:(j=new He[k.name](j||k.message,k),"stack"in k&&w(j,"stack",{get:function(){return this.inner.stack}}),j)},xe(Le),r(Qi,Object.freeze({__proto__:null,Dexie:Qi,liveQuery:Mg,Entity:Od,cmp:zn,PropModification:Jl,replacePrefix:function(k,j){return new Jl({replacePrefix:[k,j]})},add:function(k){return new Jl({add:k})},remove:function(k){return new Jl({remove:k})},default:Qi,RangeSet:ba,mergeRanges:el,rangesOverlap:Ag}),{default:Qi}),Qi})}(hb)),hb.exports}var yU=gU();const P2=Qa(yU),KR=Symbol.for("Dexie"),Ab=globalThis[KR]||(globalThis[KR]=P2);if(P2.semVer!==Ab.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${P2.semVer} and ${Ab.semVer}`);const{liveQuery:p1e,mergeRanges:m1e,rangesOverlap:g1e,RangeSet:y1e,cmp:b1e,Entity:v1e,PropModification:w1e,replacePrefix:_1e,add:x1e,remove:S1e}=Ab,Vv=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},Gn=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Bu=(...e)=>Gn(e.map(t=>t.trim()).filter(Boolean).join("/")),Gv=e=>{const t=Gn(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},oa=e=>{const t=Gn(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Tb=(e,t)=>Gn(e==="/"?`/${t}`:`${e}/${t}`);class bU extends Ab{constructor(){super("LiteChatDatabase_Rewrite_v1");Ha(this,"conversations");Ha(this,"interactions");Ha(this,"mods");Ha(this,"appState");Ha(this,"providerConfigs");Ha(this,"apiKeys");Ha(this,"syncRepos");Ha(this,"projects");this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}).upgrade(async n=>{console.log("Upgrading DB to version 5, adding unique path to projects.");const r=n.table("projects"),a=await r.toArray(),i=[],o=new Map(a.map(u=>[u.id,u])),s=(u,c)=>{if(!u.parentId)return Gn(`/${u.name}`);const f=c.get(u.parentId);if(!f)return console.error(`Upgrade Error: Parent project ${u.parentId} not found for project ${u.id}. Defaulting path.`),Gn(`/__ORPHANED__/${u.name}`);const h=s(f,c);return Gn(`${h}/${u.name}`)};for(const u of a)if(!u.path){const c=s(u,o);i.push(r.update(u.id,{path:c}))}await Promise.all(i),console.log(`Updated paths for ${i.length} projects.`)}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const sn=new bU,em=e=>({...e,...e.createdAt&&{createdAt:new Date(e.createdAt)},...e.updatedAt&&{updatedAt:new Date(e.updatedAt)}});class Wt{static async loadConversations(){try{return(await sn.conversations.orderBy("updatedAt").reverse().toArray()).map(em)}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await sn.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await sn.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await sn.interactions.where({conversationId:t}).sortBy("index")).map(r=>({...r,...r.startedAt&&{startedAt:new Date(r.startedAt)},...r.endedAt&&{endedAt:new Date(r.endedAt)}}))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await sn.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await sn.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await sn.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await sn.mods.orderBy("loadOrder").toArray()).map(n=>({...n,...n.createdAt&&{createdAt:new Date(n.createdAt)}}))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await sn.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await sn.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await sn.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await sn.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=sn.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>({...em(r),...r.modelsLastFetchedAt&&{modelsLastFetchedAt:new Date(r.modelsLastFetchedAt)}}))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await sn.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await sn.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=sn.apiKeys)==null?void 0:t.toArray())??[]).map(em)}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await sn.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await sn.transaction("rw",[sn.apiKeys,sn.providerConfigs],async()=>{const n=await sn.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await sn.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await sn.syncRepos.toArray()).map(n=>({...em(n),...n.lastPulledAt&&{lastPulledAt:new Date(n.lastPulledAt)},...n.lastPushedAt&&{lastPushedAt:new Date(n.lastPushedAt)}}))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await sn.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await sn.transaction("rw",[sn.syncRepos,sn.conversations],async()=>{const n=await sn.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await sn.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await sn.projects.orderBy("updatedAt").reverse().toArray()).map(em)}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,metadata:t.metadata?{...t.metadata}:{}};return await sn.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await sn.projects.where("parentId").equals(r).toArray();for(const o of a)await n(o.id);const i=await sn.conversations.where("projectId").equals(r).toArray();if(i.length>0){const o=i.map(s=>sn.conversations.update(s.id,{projectId:null}));await Promise.all(o),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await sn.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await sn.transaction("rw",[sn.projects,sn.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async clearAllData(){try{await sn.transaction("rw",[sn.conversations,sn.interactions,sn.mods,sn.appState,sn.providerConfigs,sn.apiKeys,sn.syncRepos,sn.projects],async()=>{await sn.interactions.clear(),await sn.conversations.clear(),await sn.projects.clear(),await sn.mods.clear(),await sn.appState.clear(),await sn.providerConfigs.clear(),await sn.apiKeys.clear(),await sn.syncRepos.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const ar=Ul(ql((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n});try{const r=await Wt.loadInteractionsForConversation(n);r.sort((a,i)=>a.index-i.index),e({interactions:r,status:"idle"})}catch(r){console.error("InteractionStore: Error loading interactions",r),e({error:"Failed load interactions",status:"error"})}},_addInteractionToState:n=>{const r=t().interactions;if(r.some(a=>a.id===n.id))console.warn(`InteractionStore: Interaction ${n.id} already exists in state.`);else{const a=[...r,n];a.sort((i,o)=>i.index-o.index),e({interactions:a})}},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(o=>o.id===n);if(i!==-1){const o=a.interactions[i];let s={...o.metadata||{}};r.metadata&&(s={...s,...r.metadata},r.metadata.toolCalls!==void 0&&(s.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&(s.toolResults=[...r.metadata.toolResults])),Object.assign(o,{...r,metadata:void 0}),o.metadata=s}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)?a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r:console.warn(`InteractionStore: Tried to append chunk to non-streaming interaction buffer ${n}.`)})},_removeInteractionFromState:n=>{const a=t().interactions.filter(i=>i.id!==n);e({interactions:a})},addInteractionAndPersist:async n=>{const a=t().interactions.filter(u=>u.conversationId===n.conversationId),i=a.reduce((u,c)=>Math.max(u,c.index),-1)+1,o=a.length>0?a[a.length-1].id:null,s={...n,index:i,parentId:o};t()._addInteractionToState(s);try{return await Wt.saveInteraction(s),s}catch(u){throw console.error("InteractionStore: Error persisting added interaction",u),t()._removeInteractionFromState(s.id),e({error:"Failed to save interaction"}),u}},updateInteractionAndPersist:async n=>{try{await Wt.saveInteraction({...n})}catch(r){throw console.error(`InteractionStore: Error persisting final update for ${n.id}`,r),e({error:"Failed to save final interaction state"}),r}},deleteInteraction:async n=>{const r=t().interactions.find(i=>i.id===n);if(!r)return;const a={...r};t()._removeInteractionFromState(n),t()._removeStreamingId(n);try{await Wt.deleteInteraction(n)}catch(i){throw console.error("InteractionStore: Error deleting interaction",i),t()._addInteractionToState(a),a.status==="STREAMING"&&t()._addStreamingId(n),e({error:"Failed to delete interaction"}),i}},setCurrentConversationId:n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions."),e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null})},setError:n=>{e(r=>{r.error=n,n?r.status="error":r.status==="error"&&(r.status=r.streamingInteractionIds.length>0?"streaming":"idle")})},setStatus:n=>{t().status!==n&&e({status:n})},_addStreamingId:n=>{e(r=>{r.streamingInteractionIds.includes(n)||(r.streamingInteractionIds.push(n),r.activeStreamBuffers[n]="",r.streamingInteractionIds.length===1&&(r.status="streaming"),r.error=null)})},_removeStreamingId:n=>{e(r=>{const a=r.streamingInteractionIds.indexOf(n);a!==-1&&(r.streamingInteractionIds.splice(a,1),delete r.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),r.streamingInteractionIds.length===0&&r.status==="streaming"&&(r.status=r.error?"error":"idle"))})}})));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),ZR=e=>{const t=wU(e);return t.charAt(0).toUpperCase()+t.slice(1)},PO=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _U={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},u)=>R.createElement("svg",{ref:u,..._U,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:PO("lucide",a),...s},[...o.map(([c,f])=>R.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=(e,t)=>{const n=R.forwardRef(({className:r,...a},i)=>R.createElement(xU,{ref:i,iconNode:t,className:PO(`lucide-${vU(ZR(e))}`,`lucide-${e}`,r),...a}));return n.displayName=ZR(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],EU=an("archive",SU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vo=an("check",CU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nC=an("chevron-down",kU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],TU=an("chevron-left",AU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],FO=an("chevron-right",RU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],IU=an("chevron-up",NU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Wv=an("chevrons-up-down",OU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ms=an("circle-alert",DU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Rb=an("circle-check",jU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],rC=an("clipboard",MU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],LO=an("cloud-upload",PU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$O=an("copy",FU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Nb=an("download",LU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],BU=an("eye-off",$U);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],UU=an("eye",zU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],HU=an("file-archive",qU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],GU=an("file-json",VU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],KU=an("file-question",WU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YU=an("file-text",ZU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],JU=an("file",XU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],eq=an("folder-git",QU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],nq=an("folder-open",tq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],aC=an("folder-plus",rq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]],iq=an("folder-sync",aq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],sq=an("folder-up",oq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Kv=an("folder",lq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],iC=an("git-branch",uq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],dq=an("git-commit-horizontal",cq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],hq=an("git-merge",fq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],mq=an("git-pull-request",pq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],yq=an("grip-vertical",gq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],vq=an("house",bq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_q=an("image",wq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],BO=an("info",xq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Eq=an("key",Sq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Jn=an("loader-circle",Cq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Aq=an("message-square",kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Rq=an("music",Tq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Iq=an("panel-left-close",Nq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],Dq=an("panel-right-close",Oq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],Mq=an("paperclip",jq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],oC=an("pen",Pq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zv=an("plus",Fq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Yv=an("refresh-cw",Lq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Bq=an("rotate-ccw",$q);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sC=an("save",zq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Xv=an("search",Uq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],Hq=an("send-horizontal",qq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Gq=an("settings-2",Vq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zO=an("settings",Wq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Zq=an("sliders-horizontal",Kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],F2=an("square-pen",Yq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Jq=an("square",Xq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Hu=an("trash-2",Qq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tH=an("triangle-alert",eH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],rH=an("upload",nH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],iH=an("user",aH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],sH=an("video",oH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],lC=an("wrench",lH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zs=an("x",uH),cH="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Po=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=cH[n[e]&63];return t};function dH(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ei=dH(),zu=Ul(ql(e=>({attachedFilesMetadata:[],enabledTools:new Set,addAttachedFile:t=>{e(n=>{if(n.attachedFilesMetadata.some(a=>a.source==="direct"&&t.source==="direct"?a.name===t.name:a.source==="vfs"&&t.source==="vfs"?a.path===t.path:!1))console.warn(`InputStore: File "${t.name}" (source: ${t.source}) already attached. Skipping.`);else{const a={id:crypto.randomUUID(),...t};n.attachedFilesMetadata.push(a)}})},removeAttachedFile:t=>{e(n=>{n.attachedFilesMetadata=n.attachedFilesMetadata.filter(r=>r.id!==t)})},clearAttachedFiles:()=>{e({attachedFilesMetadata:[],enabledTools:new Set})},setEnabledTools:t=>{e(n=>{n.enabledTools=t(n.enabledTools)})}}))),fH=QE("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function UO({className:e,variant:t,asChild:n=!1,...r}){const a=n?RO:"span";return y.jsx(a,{"data-slot":"badge",className:Dt(fH({variant:t}),e),...r})}var Ns=gO();const qO=Qa(Ns);function hH(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const pH=e=>{switch(e){case"success":return yH;case"info":return vH;case"warning":return bH;case"error":return wH;default:return null}},mH=Array(12).fill(0),gH=({visible:e,className:t})=>vt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},vt.createElement("div",{className:"sonner-spinner"},mH.map((n,r)=>vt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),yH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),bH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),vH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_H=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},vt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),vt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),xH=()=>{const[e,t]=vt.useState(document.hidden);return vt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let L2=1;class SH{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:L2++,o=this.toasts.find(u=>u.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:r}),{...u,...t,id:i,dismissible:s,title:r}):u):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const s=a.then(async c=>{if(o=["resolve",c],vt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(CH(c)&&!c.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,w=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...w})}else if(c instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(c):n.error,m=typeof n.description=="function"?await n.description(c):n.description,w=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...w})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(c):n.success,m=typeof n.description=="function"?await n.description(c):n.description,w=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...w})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,g=typeof f=="object"&&!vt.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((c,f)=>s.then(()=>o[0]==="reject"?f(o[1]):c(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||L2++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const wi=new SH,EH=(e,t)=>{const n=(t==null?void 0:t.id)||L2++;return wi.addToast({title:e,...t,id:n}),n},CH=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",kH=EH,AH=()=>wi.toasts,TH=()=>wi.getActiveToasts(),dt=Object.assign(kH,{success:wi.success,info:wi.info,warning:wi.warning,error:wi.error,custom:wi.custom,message:wi.message,promise:wi.promise,dismiss:wi.dismiss,loading:wi.loading},{getHistory:AH,getToasts:TH});hH("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function jy(e){return e.label!==void 0}const RH=3,NH="24px",IH="16px",YR=4e3,OH=356,DH=14,jH=45,MH=200;function ws(...e){return e.filter(Boolean).join(" ")}function PH(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const FH=e=>{var t,n,r,a,i,o,s,u,c;const{invert:f,toast:h,unstyled:m,interacting:g,setHeights:w,visibleToasts:v,heights:_,index:x,toasts:S,expanded:E,removeToast:C,defaultRichColors:A,closeButton:O,style:I,cancelButtonStyle:D,actionButtonStyle:B,className:K="",descriptionClassName:Q="",duration:F,position:W,gap:U,expandByDefault:he,classNames:ae,icons:re,closeButtonAriaLabel:ee="Close toast"}=e,[se,V]=vt.useState(null),[X,Y]=vt.useState(null),[ne,be]=vt.useState(!1),[Ee,De]=vt.useState(!1),[Pe,Re]=vt.useState(!1),[Te,He]=vt.useState(!1),[it,Ie]=vt.useState(!1),[Ae,z]=vt.useState(0),[ke,Ne]=vt.useState(0),ce=vt.useRef(h.duration||F||YR),ie=vt.useRef(null),J=vt.useRef(null),_e=x===0,Le=x+1<=v,xe=h.type,Ve=h.dismissible!==!1,xt=h.className||"",ht=h.descriptionClassName||"",Et=vt.useMemo(()=>_.findIndex(je=>je.toastId===h.id)||0,[_,h.id]),Lt=vt.useMemo(()=>{var je;return(je=h.closeButton)!=null?je:O},[h.closeButton,O]),Tt=vt.useMemo(()=>h.duration||F||YR,[h.duration,F]),zt=vt.useRef(0),ge=vt.useRef(0),N=vt.useRef(0),H=vt.useRef(null),[fe,Oe]=W.split("-"),ve=vt.useMemo(()=>_.reduce((je,Ke,Ct)=>Ct>=Et?je:je+Ke.height,0),[_,Et]),Ce=xH(),le=h.invert||f,ct=xe==="loading";ge.current=vt.useMemo(()=>Et*U+ve,[Et,ve]),vt.useEffect(()=>{ce.current=Tt},[Tt]),vt.useEffect(()=>{be(!0)},[]),vt.useEffect(()=>{const je=J.current;if(je){const Ke=je.getBoundingClientRect().height;return Ne(Ke),w(Ct=>[{toastId:h.id,height:Ke,position:h.position},...Ct]),()=>w(Ct=>Ct.filter(ye=>ye.toastId!==h.id))}},[w,h.id]),vt.useLayoutEffect(()=>{if(!ne)return;const je=J.current,Ke=je.style.height;je.style.height="auto";const Ct=je.getBoundingClientRect().height;je.style.height=Ke,Ne(Ct),w(ye=>ye.find($=>$.toastId===h.id)?ye.map($=>$.toastId===h.id?{...$,height:Ct}:$):[{toastId:h.id,height:Ct,position:h.position},...ye])},[ne,h.title,h.description,w,h.id]);const yt=vt.useCallback(()=>{De(!0),z(ge.current),w(je=>je.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},MH)},[h,C,w,ge]);vt.useEffect(()=>{if(h.promise&&xe==="loading"||h.duration===1/0||h.type==="loading")return;let je;return E||g||Ce?(()=>{if(N.current<zt.current){const ye=new Date().getTime()-zt.current;ce.current=ce.current-ye}N.current=new Date().getTime()})():(()=>{ce.current!==1/0&&(zt.current=new Date().getTime(),je=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),yt()},ce.current))})(),()=>clearTimeout(je)},[E,g,h,xe,Ce,yt]),vt.useEffect(()=>{h.delete&&yt()},[yt,h.delete]);function M(){var je;if(re!=null&&re.loading){var Ke;return vt.createElement("div",{className:ws(ae==null?void 0:ae.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":xe==="loading"},re.loading)}return vt.createElement(gH,{className:ws(ae==null?void 0:ae.loader,h==null||(je=h.classNames)==null?void 0:je.loader),visible:xe==="loading"})}const Be=h.icon||(re==null?void 0:re[xe])||pH(xe);var et,me;return vt.createElement("li",{tabIndex:0,ref:J,className:ws(K,xt,ae==null?void 0:ae.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ae==null?void 0:ae.default,ae==null?void 0:ae[xe],h==null||(n=h.classNames)==null?void 0:n[xe]),"data-sonner-toast":"","data-rich-colors":(et=h.richColors)!=null?et:A,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":ne,"data-promise":!!h.promise,"data-swiped":it,"data-removed":Ee,"data-visible":Le,"data-y-position":fe,"data-x-position":Oe,"data-index":x,"data-front":_e,"data-swiping":Pe,"data-dismissible":Ve,"data-type":xe,"data-invert":le,"data-swipe-out":Te,"data-swipe-direction":X,"data-expanded":!!(E||he&&ne),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${Ee?Ae:ge.current}px`,"--initial-height":he?"auto":`${ke}px`,...I,...h.style},onDragEnd:()=>{Re(!1),V(null),H.current=null},onPointerDown:je=>{ct||!Ve||(ie.current=new Date,z(ge.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(Re(!0),H.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,Ke,Ct;if(Te||!Ve)return;H.current=null;const ye=Number(((je=J.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),q=Number(((Ke=J.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$=new Date().getTime()-((Ct=ie.current)==null?void 0:Ct.getTime()),G=se==="x"?ye:q,pe=Math.abs(G)/$;if(Math.abs(G)>=jH||pe>.11){z(ge.current),h.onDismiss==null||h.onDismiss.call(h,h),Y(se==="x"?ye>0?"right":"left":q>0?"down":"up"),yt(),He(!0);return}else{var de,Fe;(de=J.current)==null||de.style.setProperty("--swipe-amount-x","0px"),(Fe=J.current)==null||Fe.style.setProperty("--swipe-amount-y","0px")}Ie(!1),Re(!1),V(null)},onPointerMove:je=>{var Ke,Ct,ye;if(!H.current||!Ve||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const $=je.clientY-H.current.y,G=je.clientX-H.current.x;var pe;const de=(pe=e.swipeDirections)!=null?pe:PH(W);!se&&(Math.abs(G)>1||Math.abs($)>1)&&V(Math.abs(G)>Math.abs($)?"x":"y");let Fe={x:0,y:0};const ot=jt=>1/(1.5+Math.abs(jt)/20);if(se==="y"){if(de.includes("top")||de.includes("bottom"))if(de.includes("top")&&$<0||de.includes("bottom")&&$>0)Fe.y=$;else{const jt=$*ot($);Fe.y=Math.abs(jt)<Math.abs($)?jt:$}}else if(se==="x"&&(de.includes("left")||de.includes("right")))if(de.includes("left")&&G<0||de.includes("right")&&G>0)Fe.x=G;else{const jt=G*ot(G);Fe.x=Math.abs(jt)<Math.abs(G)?jt:G}(Math.abs(Fe.x)>0||Math.abs(Fe.y)>0)&&Ie(!0),(Ct=J.current)==null||Ct.style.setProperty("--swipe-amount-x",`${Fe.x}px`),(ye=J.current)==null||ye.style.setProperty("--swipe-amount-y",`${Fe.y}px`)}},Lt&&!h.jsx&&xe!=="loading"?vt.createElement("button",{"aria-label":ee,"data-disabled":ct,"data-close-button":!0,onClick:ct||!Ve?()=>{}:()=>{yt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:ws(ae==null?void 0:ae.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(me=re==null?void 0:re.close)!=null?me:_H):null,(xe||h.icon||h.promise)&&h.icon!==null&&((re==null?void 0:re[xe])!==null||h.icon)?vt.createElement("div",{"data-icon":"",className:ws(ae==null?void 0:ae.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||M():null,h.type!=="loading"?Be:null):null,vt.createElement("div",{"data-content":"",className:ws(ae==null?void 0:ae.content,h==null||(i=h.classNames)==null?void 0:i.content)},vt.createElement("div",{"data-title":"",className:ws(ae==null?void 0:ae.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?vt.createElement("div",{"data-description":"",className:ws(Q,ht,ae==null?void 0:ae.description,h==null||(s=h.classNames)==null?void 0:s.description)},typeof h.description=="function"?h.description():h.description):null),vt.isValidElement(h.cancel)?h.cancel:h.cancel&&jy(h.cancel)?vt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||D,onClick:je=>{jy(h.cancel)&&Ve&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,je),yt())},className:ws(ae==null?void 0:ae.cancelButton,h==null||(u=h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,vt.isValidElement(h.action)?h.action:h.action&&jy(h.action)?vt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||B,onClick:je=>{jy(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,je),!je.defaultPrevented&&yt())},className:ws(ae==null?void 0:ae.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function XR(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function LH(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?IH:NH;function u(c){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=s:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):u(s)}),n}const $H=vt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:u,offset:c,mobileOffset:f,theme:h="light",richColors:m,duration:g,style:w,visibleToasts:v=RH,toastOptions:_,dir:x=XR(),gap:S=DH,icons:E,containerAriaLabel:C="Notifications"}=t,[A,O]=vt.useState([]),I=vt.useMemo(()=>Array.from(new Set([a].concat(A.filter(X=>X.position).map(X=>X.position)))),[A,a]),[D,B]=vt.useState([]),[K,Q]=vt.useState(!1),[F,W]=vt.useState(!1),[U,he]=vt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=vt.useRef(null),re=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=vt.useRef(null),se=vt.useRef(!1),V=vt.useCallback(X=>{O(Y=>{var ne;return(ne=Y.find(be=>be.id===X.id))!=null&&ne.delete||wi.dismiss(X.id),Y.filter(({id:be})=>be!==X.id)})},[]);return vt.useEffect(()=>wi.subscribe(X=>{if(X.dismiss){requestAnimationFrame(()=>{O(Y=>Y.map(ne=>ne.id===X.id?{...ne,delete:!0}:ne))});return}setTimeout(()=>{qO.flushSync(()=>{O(Y=>{const ne=Y.findIndex(be=>be.id===X.id);return ne!==-1?[...Y.slice(0,ne),{...Y[ne],...X},...Y.slice(ne+1)]:[X,...Y]})})})}),[A]),vt.useEffect(()=>{if(h!=="system"){he(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?he("dark"):he("light")),typeof window>"u")return;const X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:Y})=>{he(Y?"dark":"light")})}catch{X.addListener(({matches:ne})=>{try{he(ne?"dark":"light")}catch(be){console.error(be)}})}},[h]),vt.useEffect(()=>{A.length<=1&&Q(!1)},[A]),vt.useEffect(()=>{const X=Y=>{var ne;if(i.every(De=>Y[De]||Y.code===De)){var Ee;Q(!0),(Ee=ae.current)==null||Ee.focus()}Y.code==="Escape"&&(document.activeElement===ae.current||(ne=ae.current)!=null&&ne.contains(document.activeElement))&&Q(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[i]),vt.useEffect(()=>{if(ae.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,se.current=!1)}},[ae.current]),vt.createElement("section",{ref:n,"aria-label":`${C} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((X,Y)=>{var ne;const[be,Ee]=X.split("-");return A.length?vt.createElement("ol",{key:X,dir:x==="auto"?XR():x,tabIndex:-1,ref:ae,className:u,"data-sonner-toaster":!0,"data-sonner-theme":U,"data-y-position":be,"data-lifted":K&&A.length>1&&!o,"data-x-position":Ee,style:{"--front-toast-height":`${((ne=D[0])==null?void 0:ne.height)||0}px`,"--width":`${OH}px`,"--gap":`${S}px`,...w,...LH(c,f)},onBlur:De=>{se.current&&!De.currentTarget.contains(De.relatedTarget)&&(se.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:De=>{De.target instanceof HTMLElement&&De.target.dataset.dismissible==="false"||se.current||(se.current=!0,ee.current=De.relatedTarget)},onMouseEnter:()=>Q(!0),onMouseMove:()=>Q(!0),onMouseLeave:()=>{F||Q(!1)},onDragEnd:()=>Q(!1),onPointerDown:De=>{De.target instanceof HTMLElement&&De.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},A.filter(De=>!De.position&&Y===0||De.position===X).map((De,Pe)=>{var Re,Te;return vt.createElement(FH,{key:De.id,icons:E,index:Pe,toast:De,defaultRichColors:m,duration:(Re=_==null?void 0:_.duration)!=null?Re:g,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:v,closeButton:(Te=_==null?void 0:_.closeButton)!=null?Te:s,interacting:F,position:X,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:V,toasts:A.filter(He=>He.position==De.position),heights:D.filter(He=>He.position==De.position),setHeights:B,expandByDefault:o,gap:S,expanded:K,swipeDirections:t.swipeDirections})})):null}))});async function BH(e,t){const n=ma.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}const zH=({InputAreaRenderer:e,onSubmit:t,className:n,inputRef:r})=>{const[a,i]=R.useState(""),{attachedFilesMetadata:o,clearAttachedFiles:s,removeAttachedFile:u}=zu(),[c,f]=R.useState(!1),h=ma(C=>C.promptControls),m=ar(C=>C.status==="streaming"),g=R.useMemo(()=>Object.values(h).filter(C=>C.show?C.show():!0).sort((C,A)=>(C.order??1/0)-(A.order??1/0)),[h]),w=R.useCallback(()=>{i(""),s(),g.forEach(C=>{C.clearOnSubmit&&C.clearOnSubmit()})},[g,s]),v=R.useCallback(async C=>{C==null||C.preventDefault();const A=a.trim();if(m){console.warn("Submit prevented: AI is currently streaming.");return}const O=zu.getState().attachedFilesMetadata;if(!(A||O.length>0)){console.warn("Submit prevented: No content provided.");return}f(!0);const D=JSON.parse(JSON.stringify(O));let B={id:Po(),content:A,parameters:{},metadata:{attachedFiles:D}};for(const F of g){if(F.getParameters)try{const W=await F.getParameters();W&&typeof W=="object"&&(B.parameters={...B.parameters,...W})}catch(W){console.error(`Error getting parameters from control ${F.id}:`,W)}if(F.getMetadata)try{const W=await F.getMetadata();if(W&&typeof W=="object"){const{attachedFiles:U,...he}=W;U&&console.warn(`Control ${F.id} tried to overwrite attachedFiles metadata. Ignoring.`),B.metadata={...B.metadata,...he,attachedFiles:B.metadata.attachedFiles}}}catch(W){console.error(`Error getting metadata from control ${F.id}:`,W)}}Ei.emit("prompt:submitted",{turnData:B});const K=await BH("middleware:prompt:turnFinalize",{turnData:B});if(K===!1){console.log("Submission cancelled by middleware:prompt:turnFinalize."),f(!1);return}const Q=K&&typeof K=="object"?K.turnData:B;try{await t(Q),w()}catch(F){console.error("Error during final prompt submission:",F),dt.error(`Submission failed: ${F instanceof Error?F.message:String(F)}`)}finally{f(!1)}},[a,t,m,w,g]),_=R.useCallback(C=>{i(C)},[]),x=R.useCallback(()=>{v()},[v]),S=g.some(C=>!!C.renderer),E=g.some(C=>!!C.triggerRenderer);return R.useEffect(()=>()=>{s()},[s]),y.jsxs("form",{onSubmit:v,className:Dt("flex flex-col border-t border-[--border] bg-background",n),children:[S&&y.jsx("div",{className:"p-2 border-b border-[--border] bg-muted/30",children:y.jsx(PR,{controls:g,area:"panel"})}),o.length>0&&y.jsx("div",{className:"px-3 md:px-4 pt-2 border-b border-border/50 max-h-24 overflow-y-auto",children:y.jsx("div",{className:"flex flex-wrap gap-1.5 pb-1.5",children:o.map(C=>y.jsxs(UO,{variant:"secondary",className:"flex items-center gap-1.5 pl-1.5 pr-0.5 py-0.5 text-xs",children:[y.jsx("span",{className:"truncate max-w-[150px]",title:C.name,children:C.name}),y.jsxs("span",{className:"text-muted-foreground/80",children:["(",Vv(C.size),")"]}),y.jsx(Ut,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>u(C.id),"aria-label":`Remove ${C.name}`,disabled:c||m,children:y.jsx(zs,{className:"h-3 w-3"})})]},C.id))})}),y.jsxs("div",{className:"p-3 md:p-4 flex items-end gap-2",children:[y.jsx("div",{className:"flex-grow",children:y.jsx(e,{ref:r,value:a,onChange:_,onSubmit:x,disabled:c||m})}),y.jsx("div",{className:"flex-shrink-0",children:y.jsx(Ut,{type:"submit",disabled:c||m||!a.trim()&&o.length===0,size:"icon",className:"h-10 w-10 rounded-full","aria-label":"Send message",children:y.jsx(Hq,{className:"h-5 w-5"})})})]}),E&&y.jsx("div",{className:"px-3 md:px-4 pb-2 pt-1 flex-grow",children:y.jsx(PR,{controls:g,area:"trigger",className:"flex flex-wrap items-center gap-1 [&>*]:flex-shrink-0"})})]})};function Ft(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function UH(e,t){const n=R.createContext(t),r=i=>{const{children:o,...s}=i,u=R.useMemo(()=>s,Object.values(s));return y.jsx(n.Provider,{value:u,children:o})};r.displayName=e+"Provider";function a(i){const o=R.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function di(e,t=[]){let n=[];function r(i,o){const s=R.createContext(o),u=n.length;n=[...n,o];const c=h=>{var x;const{scope:m,children:g,...w}=h,v=((x=m==null?void 0:m[e])==null?void 0:x[u])||s,_=R.useMemo(()=>w,Object.values(w));return y.jsx(v.Provider,{value:_,children:g})};c.displayName=i+"Provider";function f(h,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[u])||s,w=R.useContext(g);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,f]}const a=()=>{const i=n.map(o=>R.createContext(o));return function(s){const u=(s==null?void 0:s[e])||i;return R.useMemo(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return a.scopeName=e,[r,qH(a,...t)]}function qH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:u,scopeName:c})=>{const h=u(i)[`__scope${c}`];return{...s,...h}},{});return R.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var HH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jt=HH.reduce((e,t)=>{const n=qu(`Primitive.${t}`),r=R.forwardRef((a,i)=>{const{asChild:o,...s}=a,u=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function HO(e,t){e&&Ns.flushSync(()=>e.dispatchEvent(t))}function ka(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e}),R.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function VH(e,t=globalThis==null?void 0:globalThis.document){const n=ka(e);R.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var GH="DismissableLayer",$2="dismissableLayer.update",WH="dismissableLayer.pointerDownOutside",KH="dismissableLayer.focusOutside",JR,VO=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_h=R.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...u}=e,c=R.useContext(VO),[f,h]=R.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=R.useState({}),w=_n(t,I=>h(I)),v=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(_),S=f?v.indexOf(f):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=S>=x,A=XH(I=>{const D=I.target,B=[...c.branches].some(K=>K.contains(D));!C||B||(a==null||a(I),o==null||o(I),I.defaultPrevented||s==null||s())},m),O=JH(I=>{const D=I.target;[...c.branches].some(K=>K.contains(D))||(i==null||i(I),o==null||o(I),I.defaultPrevented||s==null||s())},m);return VH(I=>{S===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&s&&(I.preventDefault(),s()))},m),R.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(JR=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),QR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=JR)}},[f,m,n,c]),R.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),QR())},[f,c]),R.useEffect(()=>{const I=()=>g({});return document.addEventListener($2,I),()=>document.removeEventListener($2,I)},[]),y.jsx(Jt.div,{...u,ref:w,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:Ft(e.onFocusCapture,O.onFocusCapture),onBlurCapture:Ft(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ft(e.onPointerDownCapture,A.onPointerDownCapture)})});_h.displayName=GH;var ZH="DismissableLayerBranch",YH=R.forwardRef((e,t)=>{const n=R.useContext(VO),r=R.useRef(null),a=_n(t,r);return R.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(Jt.div,{...e,ref:a})});YH.displayName=ZH;function XH(e,t=globalThis==null?void 0:globalThis.document){const n=ka(e),r=R.useRef(!1),a=R.useRef(()=>{});return R.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let u=function(){GO(WH,n,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function JH(e,t=globalThis==null?void 0:globalThis.document){const n=ka(e),r=R.useRef(!1);return R.useEffect(()=>{const a=i=>{i.target&&!r.current&&GO(KH,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function QR(){const e=new CustomEvent($2);document.dispatchEvent(e)}function GO(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?HO(a,i):a.dispatchEvent(i)}var $a=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},QH=mO[" useId ".trim().toString()]||(()=>{}),eV=0;function Ta(e){const[t,n]=R.useState(QH());return $a(()=>{n(r=>r??String(eV++))},[e]),t?`radix-${t}`:""}const tV=["top","right","bottom","left"],Vu=Math.min,Hi=Math.max,Ib=Math.round,My=Math.floor,js=e=>({x:e,y:e}),nV={left:"right",right:"left",bottom:"top",top:"bottom"},rV={start:"end",end:"start"};function B2(e,t,n){return Hi(e,Vu(t,n))}function jl(e,t){return typeof e=="function"?e(t):e}function Ml(e){return e.split("-")[0]}function xh(e){return e.split("-")[1]}function uC(e){return e==="x"?"y":"x"}function cC(e){return e==="y"?"height":"width"}function Gu(e){return["top","bottom"].includes(Ml(e))?"y":"x"}function dC(e){return uC(Gu(e))}function aV(e,t,n){n===void 0&&(n=!1);const r=xh(e),a=dC(e),i=cC(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Ob(o)),[o,Ob(o)]}function iV(e){const t=Ob(e);return[z2(e),t,z2(t)]}function z2(e){return e.replace(/start|end/g,t=>rV[t])}function oV(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function sV(e,t,n,r){const a=xh(e);let i=oV(Ml(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(z2)))),i}function Ob(e){return e.replace(/left|right|bottom|top/g,t=>nV[t])}function lV(e){return{top:0,right:0,bottom:0,left:0,...e}}function WO(e){return typeof e!="number"?lV(e):{top:e,right:e,bottom:e,left:e}}function Db(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function eN(e,t,n){let{reference:r,floating:a}=e;const i=Gu(t),o=dC(t),s=cC(o),u=Ml(t),c=i==="y",f=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[s]/2-a[s]/2;let g;switch(u){case"top":g={x:f,y:r.y-a.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(xh(t)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const uV=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:h}=eN(c,r,u),m=r,g={},w=0;for(let v=0;v<s.length;v++){const{name:_,fn:x}=s[v],{x:S,y:E,data:C,reset:A}=await x({x:f,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:g,rects:c,platform:o,elements:{reference:e,floating:t}});f=S??f,h=E??h,g={...g,[_]:{...g[_],...C}},A&&w<=50&&(w++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):A.rects),{x:f,y:h}=eN(c,m,u)),v=-1)}return{x:f,y:h,placement:m,strategy:a,middlewareData:g}};async function Cm(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=jl(t,e),w=WO(g),_=s[m?h==="floating"?"reference":"floating":h],x=Db(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:u})),S=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},A=Db(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:S,offsetParent:E,strategy:u}):S);return{top:(x.top-A.top+w.top)/C.y,bottom:(A.bottom-x.bottom+w.bottom)/C.y,left:(x.left-A.left+w.left)/C.x,right:(A.right-x.right+w.right)/C.x}}const cV=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:u}=t,{element:c,padding:f=0}=jl(e,t)||{};if(c==null)return{};const h=WO(f),m={x:n,y:r},g=dC(a),w=cC(g),v=await o.getDimensions(c),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",E=_?"clientHeight":"clientWidth",C=i.reference[w]+i.reference[g]-m[g]-i.floating[w],A=m[g]-i.reference[g],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=O?O[E]:0;(!I||!await(o.isElement==null?void 0:o.isElement(O)))&&(I=s.floating[E]||i.floating[w]);const D=C/2-A/2,B=I/2-v[w]/2-1,K=Vu(h[x],B),Q=Vu(h[S],B),F=K,W=I-v[w]-Q,U=I/2-v[w]/2+D,he=B2(F,U,W),ae=!u.arrow&&xh(a)!=null&&U!==he&&i.reference[w]/2-(U<F?K:Q)-v[w]/2<0,re=ae?U<F?U-F:U-W:0;return{[g]:m[g]+re,data:{[g]:he,centerOffset:U-he-re,...ae&&{alignmentOffset:re}},reset:ae}}}),dV=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:u,elements:c}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,..._}=jl(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Ml(a),S=Gu(s),E=Ml(s)===s,C=await(u.isRTL==null?void 0:u.isRTL(c.floating)),A=m||(E||!v?[Ob(s)]:iV(s)),O=w!=="none";!m&&O&&A.push(...sV(s,v,w,C));const I=[s,...A],D=await Cm(t,_),B=[];let K=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&B.push(D[x]),h){const U=aV(a,o,C);B.push(D[U[0]],D[U[1]])}if(K=[...K,{placement:a,overflows:B}],!B.every(U=>U<=0)){var Q,F;const U=(((Q=i.flip)==null?void 0:Q.index)||0)+1,he=I[U];if(he)return{data:{index:U,overflows:K},reset:{placement:he}};let ae=(F=K.filter(re=>re.overflows[0]<=0).sort((re,ee)=>re.overflows[1]-ee.overflows[1])[0])==null?void 0:F.placement;if(!ae)switch(g){case"bestFit":{var W;const re=(W=K.filter(ee=>{if(O){const se=Gu(ee.placement);return se===S||se==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(se=>se>0).reduce((se,V)=>se+V,0)]).sort((ee,se)=>ee[1]-se[1])[0])==null?void 0:W[0];re&&(ae=re);break}case"initialPlacement":ae=s;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function tN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function nN(e){return tV.some(t=>e[t]>=0)}const fV=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=jl(e,t);switch(r){case"referenceHidden":{const i=await Cm(t,{...a,elementContext:"reference"}),o=tN(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:nN(o)}}}case"escaped":{const i=await Cm(t,{...a,altBoundary:!0}),o=tN(i,n.floating);return{data:{escapedOffsets:o,escaped:nN(o)}}}default:return{}}}}};async function hV(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Ml(n),s=xh(n),u=Gu(n)==="y",c=["left","top"].includes(o)?-1:1,f=i&&u?-1:1,h=jl(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return s&&typeof w=="number"&&(g=s==="end"?w*-1:w),u?{x:g*f,y:m*c}:{x:m*c,y:g*f}}const pV=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,u=await hV(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:{...u,placement:o}}}}},mV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...u}=jl(e,t),c={x:n,y:r},f=await Cm(t,u),h=Gu(Ml(a)),m=uC(h);let g=c[m],w=c[h];if(i){const _=m==="y"?"top":"left",x=m==="y"?"bottom":"right",S=g+f[_],E=g-f[x];g=B2(S,g,E)}if(o){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",S=w+f[_],E=w-f[x];w=B2(S,w,E)}const v=s.fn({...t,[m]:g,[h]:w});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[h]:o}}}}}},gV=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:u=!0,crossAxis:c=!0}=jl(e,t),f={x:n,y:r},h=Gu(a),m=uC(h);let g=f[m],w=f[h];const v=jl(s,t),_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(u){const E=m==="y"?"height":"width",C=i.reference[m]-i.floating[E]+_.mainAxis,A=i.reference[m]+i.reference[E]-_.mainAxis;g<C?g=C:g>A&&(g=A)}if(c){var x,S;const E=m==="y"?"width":"height",C=["top","left"].includes(Ml(a)),A=i.reference[h]-i.floating[E]+(C&&((x=o.offset)==null?void 0:x[h])||0)+(C?0:_.crossAxis),O=i.reference[h]+i.reference[E]+(C?0:((S=o.offset)==null?void 0:S[h])||0)-(C?_.crossAxis:0);w<A?w=A:w>O&&(w=O)}return{[m]:g,[h]:w}}}},yV=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:u=()=>{},...c}=jl(e,t),f=await Cm(t,c),h=Ml(a),m=xh(a),g=Gu(a)==="y",{width:w,height:v}=i.floating;let _,x;h==="top"||h==="bottom"?(_=h,x=m===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(x=h,_=m==="end"?"top":"bottom");const S=v-f.top-f.bottom,E=w-f.left-f.right,C=Vu(v-f[_],S),A=Vu(w-f[x],E),O=!t.middlewareData.shift;let I=C,D=A;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(D=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(I=S),O&&!m){const K=Hi(f.left,0),Q=Hi(f.right,0),F=Hi(f.top,0),W=Hi(f.bottom,0);g?D=w-2*(K!==0||Q!==0?K+Q:Hi(f.left,f.right)):I=v-2*(F!==0||W!==0?F+W:Hi(f.top,f.bottom))}await u({...t,availableWidth:D,availableHeight:I});const B=await o.getDimensions(s.floating);return w!==B.width||v!==B.height?{reset:{rects:!0}}:{}}}};function Jv(){return typeof window<"u"}function Sh(e){return KO(e)?(e.nodeName||"").toLowerCase():"#document"}function Gi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Us(e){var t;return(t=(KO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function KO(e){return Jv()?e instanceof Node||e instanceof Gi(e).Node:!1}function Vo(e){return Jv()?e instanceof Element||e instanceof Gi(e).Element:!1}function Ps(e){return Jv()?e instanceof HTMLElement||e instanceof Gi(e).HTMLElement:!1}function rN(e){return!Jv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gi(e).ShadowRoot}function w0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Go(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function bV(e){return["table","td","th"].includes(Sh(e))}function Qv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function fC(e){const t=hC(),n=Vo(e)?Go(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function vV(e){let t=Wu(e);for(;Ps(t)&&!Yf(t);){if(fC(t))return t;if(Qv(t))return null;t=Wu(t)}return null}function hC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yf(e){return["html","body","#document"].includes(Sh(e))}function Go(e){return Gi(e).getComputedStyle(e)}function ew(e){return Vo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Wu(e){if(Sh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rN(e)&&e.host||Us(e);return rN(t)?t.host:t}function ZO(e){const t=Wu(e);return Yf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ps(t)&&w0(t)?t:ZO(t)}function km(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=ZO(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Gi(a);if(i){const s=U2(o);return t.concat(o,o.visualViewport||[],w0(a)?a:[],s&&n?km(s):[])}return t.concat(a,km(a,[],n))}function U2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function YO(e){const t=Go(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Ps(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=Ib(n)!==i||Ib(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function pC(e){return Vo(e)?e:e.contextElement}function Uf(e){const t=pC(e);if(!Ps(t))return js(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=YO(t);let o=(i?Ib(n.width):n.width)/r,s=(i?Ib(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const wV=js(0);function XO(e){const t=Gi(e);return!hC()||!t.visualViewport?wV:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _V(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Gi(e)?!1:t}function ld(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=pC(e);let o=js(1);t&&(r?Vo(r)&&(o=Uf(r)):o=Uf(e));const s=_V(i,n,r)?XO(i):js(0);let u=(a.left+s.x)/o.x,c=(a.top+s.y)/o.y,f=a.width/o.x,h=a.height/o.y;if(i){const m=Gi(i),g=r&&Vo(r)?Gi(r):r;let w=m,v=U2(w);for(;v&&r&&g!==w;){const _=Uf(v),x=v.getBoundingClientRect(),S=Go(v),E=x.left+(v.clientLeft+parseFloat(S.paddingLeft))*_.x,C=x.top+(v.clientTop+parseFloat(S.paddingTop))*_.y;u*=_.x,c*=_.y,f*=_.x,h*=_.y,u+=E,c+=C,w=Gi(v),v=U2(w)}}return Db({width:f,height:h,x:u,y:c})}function mC(e,t){const n=ew(e).scrollLeft;return t?t.left+n:ld(Us(e)).left+n}function JO(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:mC(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function xV(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Us(r),s=t?Qv(t.floating):!1;if(r===o||s&&i)return n;let u={scrollLeft:0,scrollTop:0},c=js(1);const f=js(0),h=Ps(r);if((h||!h&&!i)&&((Sh(r)!=="body"||w0(o))&&(u=ew(r)),Ps(r))){const g=ld(r);c=Uf(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const m=o&&!h&&!i?JO(o,u,!0):js(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+f.x+m.x,y:n.y*c.y-u.scrollTop*c.y+f.y+m.y}}function SV(e){return Array.from(e.getClientRects())}function EV(e){const t=Us(e),n=ew(e),r=e.ownerDocument.body,a=Hi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Hi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+mC(e);const s=-n.scrollTop;return Go(r).direction==="rtl"&&(o+=Hi(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function CV(e,t){const n=Gi(e),r=Us(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,u=0;if(a){i=a.width,o=a.height;const c=hC();(!c||c&&t==="fixed")&&(s=a.offsetLeft,u=a.offsetTop)}return{width:i,height:o,x:s,y:u}}function kV(e,t){const n=ld(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Ps(e)?Uf(e):js(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,u=a*i.x,c=r*i.y;return{width:o,height:s,x:u,y:c}}function aN(e,t,n){let r;if(t==="viewport")r=CV(e,n);else if(t==="document")r=EV(Us(e));else if(Vo(t))r=kV(t,n);else{const a=XO(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Db(r)}function QO(e,t){const n=Wu(e);return n===t||!Vo(n)||Yf(n)?!1:Go(n).position==="fixed"||QO(n,t)}function AV(e,t){const n=t.get(e);if(n)return n;let r=km(e,[],!1).filter(s=>Vo(s)&&Sh(s)!=="body"),a=null;const i=Go(e).position==="fixed";let o=i?Wu(e):e;for(;Vo(o)&&!Yf(o);){const s=Go(o),u=fC(o);!u&&s.position==="fixed"&&(a=null),(i?!u&&!a:!u&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||w0(o)&&!u&&QO(e,o))?r=r.filter(f=>f!==o):a=s,o=Wu(o)}return t.set(e,r),r}function TV(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Qv(t)?[]:AV(t,this._c):[].concat(n),r],s=o[0],u=o.reduce((c,f)=>{const h=aN(t,f,a);return c.top=Hi(h.top,c.top),c.right=Vu(h.right,c.right),c.bottom=Vu(h.bottom,c.bottom),c.left=Hi(h.left,c.left),c},aN(t,s,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function RV(e){const{width:t,height:n}=YO(e);return{width:t,height:n}}function NV(e,t,n){const r=Ps(t),a=Us(t),i=n==="fixed",o=ld(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const u=js(0);if(r||!r&&!i)if((Sh(t)!=="body"||w0(a))&&(s=ew(t)),r){const m=ld(t,!0,i,t);u.x=m.x+t.clientLeft,u.y=m.y+t.clientTop}else a&&(u.x=mC(a));const c=a&&!r&&!i?JO(a,s):js(0),f=o.left+s.scrollLeft-u.x-c.x,h=o.top+s.scrollTop-u.y-c.y;return{x:f,y:h,width:o.width,height:o.height}}function wx(e){return Go(e).position==="static"}function iN(e,t){if(!Ps(e)||Go(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Us(e)===n&&(n=n.ownerDocument.body),n}function eD(e,t){const n=Gi(e);if(Qv(e))return n;if(!Ps(e)){let a=Wu(e);for(;a&&!Yf(a);){if(Vo(a)&&!wx(a))return a;a=Wu(a)}return n}let r=iN(e,t);for(;r&&bV(r)&&wx(r);)r=iN(r,t);return r&&Yf(r)&&wx(r)&&!fC(r)?n:r||vV(e)||n}const IV=async function(e){const t=this.getOffsetParent||eD,n=this.getDimensions,r=await n(e.floating);return{reference:NV(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function OV(e){return Go(e).direction==="rtl"}const DV={convertOffsetParentRelativeRectToViewportRelativeRect:xV,getDocumentElement:Us,getClippingRect:TV,getOffsetParent:eD,getElementRects:IV,getClientRects:SV,getDimensions:RV,getScale:Uf,isElement:Vo,isRTL:OV};function tD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function jV(e,t){let n=null,r;const a=Us(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),i();const c=e.getBoundingClientRect(),{left:f,top:h,width:m,height:g}=c;if(s||t(),!m||!g)return;const w=My(h),v=My(a.clientWidth-(f+m)),_=My(a.clientHeight-(h+g)),x=My(f),E={rootMargin:-w+"px "+-v+"px "+-_+"px "+-x+"px",threshold:Hi(0,Vu(1,u))||1};let C=!0;function A(O){const I=O[0].intersectionRatio;if(I!==u){if(!C)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!tD(c,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(A,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(A,E)}n.observe(e)}return o(!0),i}function MV(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,c=pC(e),f=a||i?[...c?km(c):[],...km(t)]:[];f.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&s?jV(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),c&&!u&&g.observe(c),g.observe(t));let w,v=u?ld(e):null;u&&_();function _(){const x=ld(e);v&&!tD(v,x)&&n(),v=x,w=requestAnimationFrame(_)}return n(),()=>{var x;f.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,u&&cancelAnimationFrame(w)}}const PV=pV,FV=mV,LV=dV,$V=yV,BV=fV,oN=cV,zV=gV,UV=(e,t,n)=>{const r=new Map,a={platform:DV,...n},i={...a.platform,_c:r};return uV(e,t,{...a,platform:i})};var pb=typeof document<"u"?R.useLayoutEffect:R.useEffect;function jb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!jb(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!jb(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function nD(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function sN(e,t){const n=nD(e);return Math.round(t*n)/n}function _x(e){const t=R.useRef(e);return pb(()=>{t.current=e}),t}function qV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:u,open:c}=e,[f,h]=R.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=R.useState(r);jb(m,r)||g(r);const[w,v]=R.useState(null),[_,x]=R.useState(null),S=R.useCallback(ee=>{ee!==O.current&&(O.current=ee,v(ee))},[]),E=R.useCallback(ee=>{ee!==I.current&&(I.current=ee,x(ee))},[]),C=i||w,A=o||_,O=R.useRef(null),I=R.useRef(null),D=R.useRef(f),B=u!=null,K=_x(u),Q=_x(a),F=_x(c),W=R.useCallback(()=>{if(!O.current||!I.current)return;const ee={placement:t,strategy:n,middleware:m};Q.current&&(ee.platform=Q.current),UV(O.current,I.current,ee).then(se=>{const V={...se,isPositioned:F.current!==!1};U.current&&!jb(D.current,V)&&(D.current=V,Ns.flushSync(()=>{h(V)}))})},[m,t,n,Q,F]);pb(()=>{c===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,h(ee=>({...ee,isPositioned:!1})))},[c]);const U=R.useRef(!1);pb(()=>(U.current=!0,()=>{U.current=!1}),[]),pb(()=>{if(C&&(O.current=C),A&&(I.current=A),C&&A){if(K.current)return K.current(C,A,W);W()}},[C,A,W,K,B]);const he=R.useMemo(()=>({reference:O,floating:I,setReference:S,setFloating:E}),[S,E]),ae=R.useMemo(()=>({reference:C,floating:A}),[C,A]),re=R.useMemo(()=>{const ee={position:n,left:0,top:0};if(!ae.floating)return ee;const se=sN(ae.floating,f.x),V=sN(ae.floating,f.y);return s?{...ee,transform:"translate("+se+"px, "+V+"px)",...nD(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:se,top:V}},[n,s,ae.floating,f.x,f.y]);return R.useMemo(()=>({...f,update:W,refs:he,elements:ae,floatingStyles:re}),[f,W,he,ae,re])}const HV=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?oN({element:r.current,padding:a}).fn(n):{}:r?oN({element:r,padding:a}).fn(n):{}}}},VV=(e,t)=>({...PV(e),options:[e,t]}),GV=(e,t)=>({...FV(e),options:[e,t]}),WV=(e,t)=>({...zV(e),options:[e,t]}),KV=(e,t)=>({...LV(e),options:[e,t]}),ZV=(e,t)=>({...$V(e),options:[e,t]}),YV=(e,t)=>({...BV(e),options:[e,t]}),XV=(e,t)=>({...HV(e),options:[e,t]});var JV="Arrow",rD=R.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return y.jsx(Jt.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});rD.displayName=JV;var QV=rD;function tw(e){const[t,n]=R.useState(void 0);return $a(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const u=i.borderBoxSize,c=Array.isArray(u)?u[0]:u;o=c.inlineSize,s=c.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var gC="Popper",[aD,dc]=di(gC),[eG,iD]=aD(gC),oD=e=>{const{__scopePopper:t,children:n}=e,[r,a]=R.useState(null);return y.jsx(eG,{scope:t,anchor:r,onAnchorChange:a,children:n})};oD.displayName=gC;var sD="PopperAnchor",lD=R.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=iD(sD,n),o=R.useRef(null),s=_n(t,o);return R.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(Jt.div,{...a,ref:s})});lD.displayName=sD;var yC="PopperContent",[tG,nG]=aD(yC),uD=R.forwardRef((e,t)=>{var Pe,Re,Te,He,it,Ie;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:w,...v}=e,_=iD(yC,n),[x,S]=R.useState(null),E=_n(t,Ae=>S(Ae)),[C,A]=R.useState(null),O=tw(C),I=(O==null?void 0:O.width)??0,D=(O==null?void 0:O.height)??0,B=r+(i!=="center"?"-"+i:""),K=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},Q=Array.isArray(c)?c:[c],F=Q.length>0,W={padding:K,boundary:Q.filter(aG),altBoundary:F},{refs:U,floatingStyles:he,placement:ae,isPositioned:re,middlewareData:ee}=qV({strategy:"fixed",placement:B,whileElementsMounted:(...Ae)=>MV(...Ae,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[VV({mainAxis:a+D,alignmentAxis:o}),u&&GV({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?WV():void 0,...W}),u&&KV({...W}),ZV({...W,apply:({elements:Ae,rects:z,availableWidth:ke,availableHeight:Ne})=>{const{width:ce,height:ie}=z.reference,J=Ae.floating.style;J.setProperty("--radix-popper-available-width",`${ke}px`),J.setProperty("--radix-popper-available-height",`${Ne}px`),J.setProperty("--radix-popper-anchor-width",`${ce}px`),J.setProperty("--radix-popper-anchor-height",`${ie}px`)}}),C&&XV({element:C,padding:s}),iG({arrowWidth:I,arrowHeight:D}),m&&YV({strategy:"referenceHidden",...W})]}),[se,V]=fD(ae),X=ka(w);$a(()=>{re&&(X==null||X())},[re,X]);const Y=(Pe=ee.arrow)==null?void 0:Pe.x,ne=(Re=ee.arrow)==null?void 0:Re.y,be=((Te=ee.arrow)==null?void 0:Te.centerOffset)!==0,[Ee,De]=R.useState();return $a(()=>{x&&De(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...he,transform:re?he.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[(He=ee.transformOrigin)==null?void 0:He.x,(it=ee.transformOrigin)==null?void 0:it.y].join(" "),...((Ie=ee.hide)==null?void 0:Ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(tG,{scope:n,placedSide:se,onArrowChange:A,arrowX:Y,arrowY:ne,shouldHideArrow:be,children:y.jsx(Jt.div,{"data-side":se,"data-align":V,...v,ref:E,style:{...v.style,animation:re?void 0:"none"}})})})});uD.displayName=yC;var cD="PopperArrow",rG={top:"bottom",right:"left",bottom:"top",left:"right"},dD=R.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=nG(cD,r),o=rG[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(QV,{...a,ref:n,style:{...a.style,display:"block"}})})});dD.displayName=cD;function aG(e){return e!==null}var iG=e=>({name:"transformOrigin",options:e,fn(t){var _,x,S;const{placement:n,rects:r,middlewareData:a}=t,o=((_=a.arrow)==null?void 0:_.centerOffset)!==0,s=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[c,f]=fD(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(((x=a.arrow)==null?void 0:x.x)??0)+s/2,g=(((S=a.arrow)==null?void 0:S.y)??0)+u/2;let w="",v="";return c==="bottom"?(w=o?h:`${m}px`,v=`${-u}px`):c==="top"?(w=o?h:`${m}px`,v=`${r.floating.height+u}px`):c==="right"?(w=`${-u}px`,v=o?h:`${g}px`):c==="left"&&(w=`${r.floating.width+u}px`,v=o?h:`${g}px`),{data:{x:w,y:v}}}});function fD(e){const[t,n="center"]=e.split("-");return[t,n]}var nw=oD,_0=lD,rw=uD,aw=dD,oG="Portal",Eh=R.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=R.useState(!1);$a(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?qO.createPortal(y.jsx(Jt.div,{...r,ref:t}),o):null});Eh.displayName=oG;function sG(e,t){return R.useReducer((n,r)=>t[n][r]??n,e)}var Ia=e=>{const{present:t,children:n}=e,r=lG(t),a=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),i=_n(r.ref,uG(a));return typeof n=="function"||r.isPresent?R.cloneElement(a,{ref:i}):null};Ia.displayName="Presence";function lG(e){const[t,n]=R.useState(),r=R.useRef(null),a=R.useRef(e),i=R.useRef("none"),o=e?"mounted":"unmounted",[s,u]=sG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const c=Py(r.current);i.current=s==="mounted"?c:"none"},[s]),$a(()=>{const c=r.current,f=a.current;if(f!==e){const m=i.current,g=Py(c);e?u("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(f&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),$a(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,h=g=>{const v=Py(r.current).includes(g.animationName);if(g.target===t&&v&&(u("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},m=g=>{g.target===t&&(i.current=Py(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:R.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Py(e){return(e==null?void 0:e.animationName)||"none"}function uG(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var cG=mO[" useInsertionEffect ".trim().toString()]||$a;function Wo({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=dG({defaultProp:t,onChange:n}),s=e!==void 0,u=s?e:a;{const f=R.useRef(e!==void 0);R.useEffect(()=>{const h=f.current;h!==s&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=s},[s,r])}const c=R.useCallback(f=>{var h;if(s){const m=fG(f)?f(e):f;m!==e&&((h=o.current)==null||h.call(o,m))}else i(f)},[s,e,i,o]);return[u,c]}function dG({defaultProp:e,onChange:t}){const[n,r]=R.useState(e),a=R.useRef(n),i=R.useRef(t);return cG(()=>{i.current=t},[t]),R.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function fG(e){return typeof e=="function"}var hD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hG="VisuallyHidden",pD=R.forwardRef((e,t)=>y.jsx(Jt.span,{...e,ref:t,style:{...hD,...e.style}}));pD.displayName=hG;var pG=pD,[iw,E1e]=di("Tooltip",[dc]),ow=dc(),mD="TooltipProvider",mG=700,q2="tooltip.open",[gG,bC]=iw(mD),gD=e=>{const{__scopeTooltip:t,delayDuration:n=mG,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=R.useRef(!0),s=R.useRef(!1),u=R.useRef(0);return R.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),y.jsx(gG,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:R.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:R.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:R.useCallback(c=>{s.current=c},[]),disableHoverableContent:a,children:i})};gD.displayName=mD;var Am="Tooltip",[yG,x0]=iw(Am),yD=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,u=bC(Am,e.__scopeTooltip),c=ow(t),[f,h]=R.useState(null),m=Ta(),g=R.useRef(0),w=o??u.disableHoverableContent,v=s??u.delayDuration,_=R.useRef(!1),[x,S]=Wo({prop:r,defaultProp:a??!1,onChange:I=>{I?(u.onOpen(),document.dispatchEvent(new CustomEvent(q2))):u.onClose(),i==null||i(I)},caller:Am}),E=R.useMemo(()=>x?_.current?"delayed-open":"instant-open":"closed",[x]),C=R.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,S(!0)},[S]),A=R.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),O=R.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,S(!0),g.current=0},v)},[v,S]);return R.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),y.jsx(nw,{...c,children:y.jsx(yG,{scope:t,contentId:m,open:x,stateAttribute:E,trigger:f,onTriggerChange:h,onTriggerEnter:R.useCallback(()=>{u.isOpenDelayedRef.current?O():C()},[u.isOpenDelayedRef,O,C]),onTriggerLeave:R.useCallback(()=>{w?A():(window.clearTimeout(g.current),g.current=0)},[A,w]),onOpen:C,onClose:A,disableHoverableContent:w,children:n})})};yD.displayName=Am;var H2="TooltipTrigger",bD=R.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=x0(H2,n),i=bC(H2,n),o=ow(n),s=R.useRef(null),u=_n(t,s,a.onTriggerChange),c=R.useRef(!1),f=R.useRef(!1),h=R.useCallback(()=>c.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(_0,{asChild:!0,...o,children:y.jsx(Jt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:u,onPointerMove:Ft(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ft(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:Ft(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ft(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:Ft(e.onBlur,a.onClose),onClick:Ft(e.onClick,a.onClose)})})});bD.displayName=H2;var vC="TooltipPortal",[bG,vG]=iw(vC,{forceMount:void 0}),vD=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=x0(vC,t);return y.jsx(bG,{scope:t,forceMount:n,children:y.jsx(Ia,{present:n||i.open,children:y.jsx(Eh,{asChild:!0,container:a,children:r})})})};vD.displayName=vC;var Xf="TooltipContent",wD=R.forwardRef((e,t)=>{const n=vG(Xf,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=x0(Xf,e.__scopeTooltip);return y.jsx(Ia,{present:r||o.open,children:o.disableHoverableContent?y.jsx(_D,{side:a,...i,ref:t}):y.jsx(wG,{side:a,...i,ref:t})})}),wG=R.forwardRef((e,t)=>{const n=x0(Xf,e.__scopeTooltip),r=bC(Xf,e.__scopeTooltip),a=R.useRef(null),i=_n(t,a),[o,s]=R.useState(null),{trigger:u,onClose:c}=n,f=a.current,{onPointerInTransitChange:h}=r,m=R.useCallback(()=>{s(null),h(!1)},[h]),g=R.useCallback((w,v)=>{const _=w.currentTarget,x={x:w.clientX,y:w.clientY},S=EG(x,_.getBoundingClientRect()),E=CG(x,S),C=kG(v.getBoundingClientRect()),A=TG([...E,...C]);s(A),h(!0)},[h]);return R.useEffect(()=>()=>m(),[m]),R.useEffect(()=>{if(u&&f){const w=_=>g(_,f),v=_=>g(_,u);return u.addEventListener("pointerleave",w),f.addEventListener("pointerleave",v),()=>{u.removeEventListener("pointerleave",w),f.removeEventListener("pointerleave",v)}}},[u,f,g,m]),R.useEffect(()=>{if(o){const w=v=>{const _=v.target,x={x:v.clientX,y:v.clientY},S=(u==null?void 0:u.contains(_))||(f==null?void 0:f.contains(_)),E=!AG(x,o);S?m():E&&(m(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[u,f,o,c,m]),y.jsx(_D,{...e,ref:i})}),[_G,xG]=iw(Am,{isInside:!1}),SG=Kz("TooltipContent"),_D=R.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,u=x0(Xf,n),c=ow(n),{onClose:f}=u;return R.useEffect(()=>(document.addEventListener(q2,f),()=>document.removeEventListener(q2,f)),[f]),R.useEffect(()=>{if(u.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(u.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[u.trigger,f]),y.jsx(_h,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:y.jsxs(rw,{"data-state":u.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(SG,{children:r}),y.jsx(_G,{scope:n,isInside:!0,children:y.jsx(pG,{id:u.contentId,role:"tooltip",children:a||r})})]})})});wD.displayName=Xf;var xD="TooltipArrow",SD=R.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=ow(n);return xG(xD,n).isInside?null:y.jsx(aw,{...a,...r,ref:t})});SD.displayName=xD;function EG(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function CG(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function kG(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function AG(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,m=u.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function TG(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),RG(t)}function RG(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var NG=gD,IG=yD,OG=bD,DG=vD,jG=wD,MG=SD;function kn({delayDuration:e=0,...t}){return y.jsx(NG,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Nn({...e}){return y.jsx(kn,{children:y.jsx(IG,{"data-slot":"tooltip",...e})})}function In({...e}){return y.jsx(OG,{"data-slot":"tooltip-trigger",...e})}function On({className:e,sideOffset:t=0,children:n,...r}){return y.jsx(DG,{children:y.jsxs(jG,{"data-slot":"tooltip-content",sideOffset:t,className:Dt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,y.jsx(MG,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const lN={};function PG(e){let t=lN[e];if(t)return t;t=lN[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Jf(e,t){typeof t!="string"&&(t=Jf.defaultChars);const n=PG(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,o=r.length;i<o;i+=3){const s=parseInt(r.slice(i+1,i+3),16);if(s<128){a+=n[s];continue}if((s&224)===192&&i+3<o){const u=parseInt(r.slice(i+4,i+6),16);if((u&192)===128){const c=s<<6&1984|u&63;c<128?a+="":a+=String.fromCharCode(c),i+=3;continue}}if((s&240)===224&&i+6<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((u&192)===128&&(c&192)===128){const f=s<<12&61440|u<<6&4032|c&63;f<2048||f>=55296&&f<=57343?a+="":a+=String.fromCharCode(f),i+=6;continue}}if((s&248)===240&&i+9<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),f=parseInt(r.slice(i+10,i+12),16);if((u&192)===128&&(c&192)===128&&(f&192)===128){let h=s<<18&1835008|u<<12&258048|c<<6&4032|f&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Jf.defaultChars=";/?:@&=+$,#";Jf.componentChars="";const uN={};function FG(e){let t=uN[e];if(t)return t;t=uN[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function S0(e,t,n){typeof t!="string"&&(n=t,t=S0.defaultChars),typeof n>"u"&&(n=!0);const r=FG(t);let a="";for(let i=0,o=e.length;i<o;i++){const s=e.charCodeAt(i);if(n&&s===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(s<128){a+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<o){const u=e.charCodeAt(i+1);if(u>=56320&&u<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}S0.defaultChars=";/?:@&=+$,-_.!~*'()#";S0.componentChars="-_.!~*'()";function wC(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Mb(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const LG=/^([a-z0-9.+-]+:)/i,$G=/:[0-9]*$/,BG=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,zG=["<",">",'"',"`"," ","\r",`
`,"	"],UG=["{","}","|","\\","^","`"].concat(zG),qG=["'"].concat(UG),cN=["%","/","?",";","#"].concat(qG),dN=["/","?","#"],HG=255,fN=/^[+a-z0-9A-Z_-]{0,63}$/,VG=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hN={javascript:!0,"javascript:":!0},pN={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function _C(e,t){if(e&&e instanceof Mb)return e;const n=new Mb;return n.parse(e,t),n}Mb.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=BG.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=LG.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(o&&hN[o])&&(i=i.substr(2),this.slashes=!0)),!hN[o]&&(a||o&&!pN[o])){let c=-1;for(let w=0;w<dN.length;w++)r=i.indexOf(dN[w]),r!==-1&&(c===-1||r<c)&&(c=r);let f,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(f=i.slice(0,h),i=i.slice(h+1),this.auth=f),c=-1;for(let w=0;w<cN.length;w++)r=i.indexOf(cN[w]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const m=i.slice(0,c);i=i.slice(c),this.parseHost(m),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const w=this.hostname.split(/\./);for(let v=0,_=w.length;v<_;v++){const x=w[v];if(x&&!x.match(fN)){let S="";for(let E=0,C=x.length;E<C;E++)x.charCodeAt(E)>127?S+="x":S+=x[E];if(!S.match(fN)){const E=w.slice(0,v),C=w.slice(v+1),A=x.match(VG);A&&(E.push(A[1]),C.unshift(A[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>HG&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=i.indexOf("#");s!==-1&&(this.hash=i.substr(s),i=i.slice(0,s));const u=i.indexOf("?");return u!==-1&&(this.search=i.substr(u),i=i.slice(0,u)),i&&(this.pathname=i),pN[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Mb.prototype.parseHost=function(e){let t=$G.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const GG=Object.freeze(Object.defineProperty({__proto__:null,decode:Jf,encode:S0,format:wC,parse:_C},Symbol.toStringTag,{value:"Module"})),ED=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,CD=/[\0-\x1F\x7F-\x9F]/,WG=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,xC=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,kD=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,AD=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,KG=Object.freeze(Object.defineProperty({__proto__:null,Any:ED,Cc:CD,Cf:WG,P:xC,S:kD,Z:AD},Symbol.toStringTag,{value:"Module"})),ZG=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),YG=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var xx;const XG=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),JG=(xx=String.fromCodePoint)!==null&&xx!==void 0?xx:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function QG(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=XG.get(e))!==null&&t!==void 0?t:e}var Aa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Aa||(Aa={}));const eW=32;var Fu;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Fu||(Fu={}));function V2(e){return e>=Aa.ZERO&&e<=Aa.NINE}function tW(e){return e>=Aa.UPPER_A&&e<=Aa.UPPER_F||e>=Aa.LOWER_A&&e<=Aa.LOWER_F}function nW(e){return e>=Aa.UPPER_A&&e<=Aa.UPPER_Z||e>=Aa.LOWER_A&&e<=Aa.LOWER_Z||V2(e)}function rW(e){return e===Aa.EQUALS||nW(e)}var Sa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Sa||(Sa={}));var Pu;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Pu||(Pu={}));class aW{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Sa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Pu.Strict}startEntity(t){this.decodeMode=t,this.state=Sa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Sa.EntityStart:return t.charCodeAt(n)===Aa.NUM?(this.state=Sa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Sa.NamedEntity,this.stateNamedEntity(t,n));case Sa.NumericStart:return this.stateNumericStart(t,n);case Sa.NumericDecimal:return this.stateNumericDecimal(t,n);case Sa.NumericHex:return this.stateNumericHex(t,n);case Sa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|eW)===Aa.LOWER_X?(this.state=Sa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Sa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(V2(a)||tW(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(V2(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Aa.SEMI)this.consumed+=1;else if(this.decodeMode===Pu.Strict)return 0;return this.emitCodePoint(QG(this.result),this.consumed),this.errors&&(t!==Aa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Fu.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=iW(r,a,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Pu.Attribute&&(i===0||rW(o))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Fu.VALUE_LENGTH)>>14,i!==0){if(o===Aa.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Pu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Fu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Fu.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Sa.NamedEntity:return this.result!==0&&(this.decodeMode!==Pu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Sa.NumericDecimal:return this.emitNumericEntity(0,2);case Sa.NumericHex:return this.emitNumericEntity(0,3);case Sa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Sa.EntityStart:return 0}}}function TD(e){let t="";const n=new aW(e,r=>t+=JG(r));return function(a,i){let o=0,s=0;for(;(s=a.indexOf("&",s))>=0;){t+=a.slice(o,s),n.startEntity(i);const c=n.write(a,s+1);if(c<0){o=s+n.end();break}o=s+c,s=c===0?o+1:o}const u=t+a.slice(o);return t="",u}}function iW(e,t,n,r){const a=(t&Fu.BRANCH_LENGTH)>>7,i=t&Fu.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const u=r-i;return u<0||u>=a?-1:e[n+u]-1}let o=n,s=o+a-1;for(;o<=s;){const u=o+s>>>1,c=e[u];if(c<r)o=u+1;else if(c>r)s=u-1;else return e[u+a]}return-1}const oW=TD(ZG);TD(YG);function RD(e,t=Pu.Legacy){return oW(e,t)}function sW(e){return Object.prototype.toString.call(e)}function SC(e){return sW(e)==="[object String]"}const lW=Object.prototype.hasOwnProperty;function uW(e,t){return lW.call(e,t)}function sw(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function ND(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function EC(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Pb(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const ID=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,cW=/&([a-z#][a-z0-9]{1,31});/gi,dW=new RegExp(ID.source+"|"+cW.source,"gi"),fW=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function hW(e,t){if(t.charCodeAt(0)===35&&fW.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return EC(r)?Pb(r):e}const n=RD(e);return n!==e?n:e}function pW(e){return e.indexOf("\\")<0?e:e.replace(ID,"$1")}function Qf(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(dW,function(t,n,r){return n||hW(t,r)})}const mW=/[&<>"]/,gW=/[&<>"]/g,yW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function bW(e){return yW[e]}function Ku(e){return mW.test(e)?e.replace(gW,bW):e}const vW=/[.?*+^$[\]\\(){}|-]/g;function wW(e){return e.replace(vW,"\\$&")}function Tr(e){switch(e){case 9:case 32:return!0}return!1}function Tm(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Rm(e){return xC.test(e)||kD.test(e)}function Nm(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function lw(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const _W={mdurl:GG,ucmicro:KG},xW=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:ND,assign:sw,escapeHtml:Ku,escapeRE:wW,fromCodePoint:Pb,has:uW,isMdAsciiPunct:Nm,isPunctChar:Rm,isSpace:Tr,isString:SC,isValidEntityCode:EC,isWhiteSpace:Tm,lib:_W,normalizeReference:lw,unescapeAll:Qf,unescapeMd:pW},Symbol.toStringTag,{value:"Module"}));function SW(e,t,n){let r,a,i,o;const s=e.posMax,u=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=u,-1}}let c=-1;return a&&(c=e.pos),e.pos=u,c}function EW(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Qf(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let o=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}a++}return t===a||o!==0||(i.str=Qf(e.slice(t,a)),i.pos=a,i.ok=!0),i}function CW(e,t,n,r){let a,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let s=e.charCodeAt(i);if(s!==34&&s!==39&&s!==40)return o;t++,i++,s===40&&(s=41),o.marker=s}for(;i<n;){if(a=e.charCodeAt(i),a===o.marker)return o.pos=i+1,o.str+=Qf(e.slice(t,i)),o.ok=!0,o;if(a===40&&o.marker===41)return o;a===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=Qf(e.slice(t,i)),o}const kW=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:EW,parseLinkLabel:SW,parseLinkTitle:CW},Symbol.toStringTag,{value:"Module"})),qs={};qs.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Ku(i.content)+"</code>"};qs.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Ku(e[t].content)+`</code></pre>
`};qs.fence=function(e,t,n,r,a){const i=e[t],o=i.info?Qf(i.info).trim():"";let s="",u="";if(o){const f=o.split(/(\s+)/g);s=f[0],u=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,s,u)||Ku(i.content):c=Ku(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const f=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];f<0?h.push(["class",n.langPrefix+s]):(h[f]=h[f].slice(),h[f][1]+=" "+n.langPrefix+s);const m={attrs:h};return`<pre><code${a.renderAttrs(m)}>${c}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${c}</code></pre>
`};qs.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};qs.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};qs.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};qs.text=function(e,t){return Ku(e[t].content)};qs.html_block=function(e,t){return e[t].content};qs.html_inline=function(e,t){return e[t].content};function Ch(){this.rules=sw({},qs)}Ch.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Ku(t.attrs[n][0])+'="'+Ku(t.attrs[n][1])+'"';return a};Ch.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(a.block&&(o=!0,a.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===a.tag)&&(o=!1)}return i+=o?`>
`:">",i};Ch.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};Ch.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Ch.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;s==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Ti(){this.__rules__=[],this.__cache__=null}Ti.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ti.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Ti.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Ti.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Ti.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ti.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ti.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ti.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Qo(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Qo.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};Qo.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Qo.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};Qo.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Qo.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function OD(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}OD.prototype.Token=Qo;const AW=/\r\n?|\n/g,TW=/\0/g;function RW(e){let t;t=e.src.replace(AW,`
`),t=t.replace(TW,""),e.src=t}function NW(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function IW(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function OW(e){return/^<a[>\s]/i.test(e)}function DW(e){return/^<\/a\s*>/i.test(e)}function jW(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let o=a.length-1;o>=0;o--){const s=a[o];if(s.type==="link_close"){for(o--;a[o].level!==s.level&&a[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(OW(s.content)&&i>0&&i--,DW(s.content)&&i++),!(i>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const u=s.content;let c=e.md.linkify.match(u);const f=[];let h=s.level,m=0;c.length>0&&c[0].index===0&&o>0&&a[o-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const w=c[g].url,v=e.md.normalizeLink(w);if(!e.md.validateLink(v))continue;let _=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(_)?_=e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):_=e.md.normalizeLinkText(_):_=e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,"");const x=c[g].index;if(x>m){const A=new e.Token("text","",0);A.content=u.slice(m,x),A.level=h,f.push(A)}const S=new e.Token("link_open","a",1);S.attrs=[["href",v]],S.level=h++,S.markup="linkify",S.info="auto",f.push(S);const E=new e.Token("text","",0);E.content=_,E.level=h,f.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",f.push(C),m=c[g].lastIndex}if(m<u.length){const g=new e.Token("text","",0);g.content=u.slice(m),g.level=h,f.push(g)}t[n].children=a=ND(a,o,f)}}}}const DD=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,MW=/\((c|tm|r)\)/i,PW=/\((c|tm|r)\)/ig,FW={c:"",r:"",tm:""};function LW(e,t){return FW[t.toLowerCase()]}function $W(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(PW,LW)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function BW(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&DD.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function zW(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(MW.test(e.tokens[t].content)&&$W(e.tokens[t].children),DD.test(e.tokens[t].content)&&BW(e.tokens[t].children))}const UW=/['"]/,mN=/['"]/g,gN="";function Fy(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function qW(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],o=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let s=i.content,u=0,c=s.length;e:for(;u<c;){mN.lastIndex=u;const f=mN.exec(s);if(!f)break;let h=!0,m=!0;u=f.index+1;const g=f[0]==="'";let w=32;if(f.index-1>=0)w=s.charCodeAt(f.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){w=e[n].content.charCodeAt(e[n].content.length-1);break}let v=32;if(u<c)v=s.charCodeAt(u);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){v=e[n].content.charCodeAt(0);break}const _=Nm(w)||Rm(String.fromCharCode(w)),x=Nm(v)||Rm(String.fromCharCode(v)),S=Tm(w),E=Tm(v);if(E?h=!1:x&&(S||_||(h=!1)),S?m=!1:_&&(E||x||(m=!1)),v===34&&f[0]==='"'&&w>=48&&w<=57&&(m=h=!1),h&&m&&(h=_,m=x),!h&&!m){g&&(i.content=Fy(i.content,f.index,gN));continue}if(m)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<o)break;if(C.single===g&&r[n].level===o){C=r[n];let A,O;g?(A=t.md.options.quotes[2],O=t.md.options.quotes[3]):(A=t.md.options.quotes[0],O=t.md.options.quotes[1]),i.content=Fy(i.content,f.index,O),e[C.token].content=Fy(e[C.token].content,C.pos,A),u+=O.length-1,C.token===a&&(u+=A.length-1),s=i.content,c=s.length,r.length=n;continue e}}h?r.push({token:a,pos:f.index,single:g,level:o}):m&&g&&(i.content=Fy(i.content,f.index,gN))}}}function HW(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!UW.test(e.tokens[t].content)||qW(e.tokens[t].children,e)}function VW(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const o=r[i].children,s=o.length;for(t=0;t<s;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<s;t++)o[t].type==="text"&&t+1<s&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const Sx=[["normalize",RW],["block",NW],["inline",IW],["linkify",jW],["replacements",zW],["smartquotes",HW],["text_join",VW]];function CC(){this.ruler=new Ti;for(let e=0;e<Sx.length;e++)this.ruler.push(Sx[e][0],Sx[e][1])}CC.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};CC.prototype.State=OD;function Hs(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,o=0,s=0,u=0,c=a.length,f=!1;o<c;o++){const h=a.charCodeAt(o);if(!f)if(Tr(h)){s++,h===9?u+=4-u%4:u++;continue}else f=!0;(h===10||o===c-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(u),this.bsCount.push(0),f=!1,s=0,u=0,i=o+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Hs.prototype.push=function(e,t,n){const r=new Qo(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Hs.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Hs.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Hs.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Tr(r))break}return t};Hs.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Tr(this.src.charCodeAt(--t)))return t+1;return t};Hs.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Hs.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Hs.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let o=0,s=t;s<n;s++,o++){let u=0;const c=this.bMarks[s];let f=c,h;for(s+1<n||a?h=this.eMarks[s]+1:h=this.eMarks[s];f<h&&u<r;){const m=this.src.charCodeAt(f);if(Tr(m))m===9?u+=4-(u+this.bsCount[s])%4:u++;else if(f-c<this.tShift[s])u++;else break;f++}u>r?i[o]=new Array(u-r+1).join(" ")+this.src.slice(f,h):i[o]=this.src.slice(f,h)}return i.join("")};Hs.prototype.Token=Qo;const GW=65536;function Ex(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function yN(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,o=0,s="";for(;r<n;)a===124&&(i?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function WW(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58&&!Tr(s)||o===45&&Tr(s))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Tr(C))return!1;i++}let u=Ex(e,t+1),c=u.split("|");const f=[];for(let C=0;C<c.length;C++){const A=c[C].trim();if(!A){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(A))return!1;A.charCodeAt(A.length-1)===58?f.push(A.charCodeAt(0)===58?"center":"right"):A.charCodeAt(0)===58?f.push("left"):f.push("")}if(u=Ex(e,t).trim(),u.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=yN(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==f.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),w=e.push("table_open","table",1),v=[t,0];w.map=v;const _=e.push("thead_open","thead",1);_.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<c.length;C++){const A=e.push("th_open","th",1);f[C]&&(A.attrs=[["style","text-align:"+f[C]]]);const O=e.push("inline","",0);O.content=c[C].trim(),O.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let O=0,I=g.length;O<I;O++)if(g[O](e,a,n,!0)){C=!0;break}if(C||(u=Ex(e,a).trim(),!u)||e.sCount[a]-e.blkIndent>=4||(c=yN(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=h-c.length,E>GW))break;if(a===t+2){const O=e.push("tbody_open","tbody",1);O.map=S=[t+2,0]}const A=e.push("tr_open","tr",1);A.map=[a,a+1];for(let O=0;O<h;O++){const I=e.push("td_open","td",1);f[O]&&(I.attrs=[["style","text-align:"+f[O]]]);const D=e.push("inline","",0);D.content=c[O]?c[O].trim():"",D.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),v[1]=a,e.parentType=m,e.line=a,!0}function KW(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function ZW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const o=e.src.charCodeAt(a);if(o!==126&&o!==96)return!1;let s=a;a=e.skipChars(a,o);let u=a-s;if(u<3)return!1;const c=e.src.slice(s,a),f=e.src.slice(a,i);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(a=s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===o&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,o),!(a-s<u)&&(a=e.skipSpaces(a),!(a<i)))){m=!0;break}u=e.sCount[t],e.line=h+(m?1:0);const g=e.push("fence","code",0);return g.info=f,g.content=e.getLines(t+1,h,u,!0),g.markup=c,g.map=[t,e.line],!0}function YW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const s=[],u=[],c=[],f=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let g=!1,w;for(w=t;w<n;w++){const E=e.sCount[w]<e.blkIndent;if(a=e.bMarks[w]+e.tShift[w],i=e.eMarks[w],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let A=e.sCount[w]+1,O,I;e.src.charCodeAt(a)===32?(a++,A++,I=!1,O=!0):e.src.charCodeAt(a)===9?(O=!0,(e.bsCount[w]+A)%4===3?(a++,A++,I=!1):I=!0):O=!1;let D=A;for(s.push(e.bMarks[w]),e.bMarks[w]=a;a<i;){const B=e.src.charCodeAt(a);if(Tr(B))B===9?D+=4-(D+e.bsCount[w]+(I?1:0))%4:D++;else break;a++}g=a>=i,u.push(e.bsCount[w]),e.bsCount[w]=e.sCount[w]+1+(O?1:0),c.push(e.sCount[w]),e.sCount[w]=D-A,f.push(e.tShift[w]),e.tShift[w]=a-e.bMarks[w];continue}if(g)break;let C=!1;for(let A=0,O=h.length;A<O;A++)if(h[A](e,w,n,!0)){C=!0;break}if(C){e.lineMax=w,e.blkIndent!==0&&(s.push(e.bMarks[w]),u.push(e.bsCount[w]),f.push(e.tShift[w]),c.push(e.sCount[w]),e.sCount[w]-=e.blkIndent);break}s.push(e.bMarks[w]),u.push(e.bsCount[w]),f.push(e.tShift[w]),c.push(e.sCount[w]),e.sCount[w]=-1}const v=e.blkIndent;e.blkIndent=0;const _=e.push("blockquote_open","blockquote",1);_.markup=">";const x=[t,0];_.map=x,e.md.block.tokenize(e,t,w);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=o,e.parentType=m,x[1]=e.line;for(let E=0;E<f.length;E++)e.bMarks[E+t]=s[E],e.tShift[E+t]=f[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=u[E];return e.blkIndent=v,!0}function XW(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;i<a;){const c=e.src.charCodeAt(i++);if(c!==o&&!Tr(c))return!1;c===o&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const u=e.push("hr","hr",0);return u.map=[t,e.line],u.markup=Array(s+1).join(String.fromCharCode(o)),!0}function bN(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Tr(i))return-1}return r}function vN(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Tr(i))?-1:a}function JW(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function QW(e,t,n,r){let a,i,o,s,u=t,c=!0;if(e.sCount[u]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[u]-e.listIndent>=4&&e.sCount[u]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[u]>=e.blkIndent&&(f=!0);let h,m,g;if((g=vN(e,u))>=0){if(h=!0,o=e.bMarks[u]+e.tShift[u],m=Number(e.src.slice(o,g-1)),f&&m!==1)return!1}else if((g=bN(e,u))>=0)h=!1;else return!1;if(f&&e.skipSpaces(g)>=e.eMarks[u])return!1;if(r)return!0;const w=e.src.charCodeAt(g-1),v=e.tokens.length;h?(s=e.push("ordered_list_open","ol",1),m!==1&&(s.attrs=[["start",m]])):s=e.push("bullet_list_open","ul",1);const _=[u,0];s.map=_,s.markup=String.fromCharCode(w);let x=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";u<n;){i=g,a=e.eMarks[u];const C=e.sCount[u]+g-(e.bMarks[u]+e.tShift[u]);let A=C;for(;i<a;){const he=e.src.charCodeAt(i);if(he===9)A+=4-(A+e.bsCount[u])%4;else if(he===32)A++;else break;i++}const O=i;let I;O>=a?I=1:I=A-C,I>4&&(I=1);const D=C+I;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(w);const B=[u,0];s.map=B,h&&(s.info=e.src.slice(o,g-1));const K=e.tight,Q=e.tShift[u],F=e.sCount[u],W=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=D,e.tight=!0,e.tShift[u]=O-e.bMarks[u],e.sCount[u]=A,O>=a&&e.isEmpty(u+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,u,n,!0),(!e.tight||x)&&(c=!1),x=e.line-u>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=W,e.tShift[u]=Q,e.sCount[u]=F,e.tight=K,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(w),u=e.line,B[1]=u,u>=n||e.sCount[u]<e.blkIndent||e.sCount[u]-e.blkIndent>=4)break;let U=!1;for(let he=0,ae=S.length;he<ae;he++)if(S[he](e,u,n,!0)){U=!0;break}if(U)break;if(h){if(g=vN(e,u),g<0)break;o=e.bMarks[u]+e.tShift[u]}else if(g=bN(e,u),g<0)break;if(w!==e.src.charCodeAt(g-1))break}return h?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(w),_[1]=u,e.line=u,e.parentType=E,c&&JW(e,v),!0}function eK(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function s(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const I=e.md.block.ruler.getRules("reference"),D=e.parentType;e.parentType="reference";let B=!1;for(let K=0,Q=I.length;K<Q;K++)if(I[K](e,S,E,!0)){B=!0;break}if(e.parentType=D,B)return null}const A=e.bMarks[S]+e.tShift[S],O=e.eMarks[S];return e.src.slice(A,O+1)}let u=e.src.slice(a,i+1);i=u.length;let c=-1;for(a=1;a<i;a++){const S=u.charCodeAt(a);if(S===91)return!1;if(S===93){c=a;break}else if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(S===92&&(a++,a<i&&u.charCodeAt(a)===10)){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(a=c+2;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(S))break}const f=e.md.helpers.parseLinkDestination(u,a,i);if(!f.ok)return!1;const h=e.md.normalizeLink(f.str);if(!e.md.validateLink(h))return!1;a=f.pos;const m=a,g=o,w=a;for(;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(S))break}let v=e.md.helpers.parseLinkTitle(u,a,i);for(;v.can_continue;){const S=s(o);if(S===null)break;u+=S,a=i,i=u.length,o++,v=e.md.helpers.parseLinkTitle(u,a,i,v)}let _;for(a<i&&w!==a&&v.ok?(_=v.str,a=v.pos):(_="",a=m,o=g);a<i;){const S=u.charCodeAt(a);if(!Tr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10&&_)for(_="",a=m,o=g;a<i;){const S=u.charCodeAt(a);if(!Tr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10)return!1;const x=lw(u.slice(1,c));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:_,href:h}),e.line=o),!0):!1}const tK=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],nK="[a-zA-Z_:][a-zA-Z0-9:._-]*",rK="[^\"'=<>`\\x00-\\x20]+",aK="'[^']*'",iK='"[^"]*"',oK="(?:"+rK+"|"+aK+"|"+iK+")",sK="(?:\\s+"+nK+"(?:\\s*=\\s*"+oK+")?)",jD="<[A-Za-z][A-Za-z0-9\\-]*"+sK+"*\\s*\\/?>",MD="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",lK="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",uK="<[?][\\s\\S]*?[?]>",cK="<![A-Za-z][^>]*>",dK="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",fK=new RegExp("^(?:"+jD+"|"+MD+"|"+lK+"|"+uK+"|"+cK+"|"+dK+")"),hK=new RegExp("^(?:"+jD+"|"+MD+")"),Sf=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+tK.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(hK.source+"\\s*$"),/^$/,!1]];function pK(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let o=e.src.slice(a,i),s=0;for(;s<Sf.length&&!Sf[s][0].test(o);s++);if(s===Sf.length)return!1;if(r)return Sf[s][2];let u=t+1;if(!Sf[s][1].test(o)){for(;u<n&&!(e.sCount[u]<e.blkIndent);u++)if(a=e.bMarks[u]+e.tShift[u],i=e.eMarks[u],o=e.src.slice(a,i),Sf[s][1].test(o)){o.length!==0&&u++;break}}e.line=u;const c=e.push("html_block","",0);return c.map=[t,u],c.content=e.getLines(t,u,e.blkIndent,!0),!0}function mK(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(a);if(o!==35||a>=i)return!1;let s=1;for(o=e.src.charCodeAt(++a);o===35&&a<i&&s<=6;)s++,o=e.src.charCodeAt(++a);if(s>6||a<i&&!Tr(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const u=e.skipCharsBack(i,35,a);u>a&&Tr(e.src.charCodeAt(u-1))&&(i=u),e.line=t+1;const c=e.push("heading_open","h"+String(s),1);c.markup="########".slice(0,s),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(a,i).trim(),f.map=[t,e.line],f.children=[];const h=e.push("heading_close","h"+String(s),-1);return h.markup="########".slice(0,s),!0}function gK(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,o,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let g=e.bMarks[s]+e.tShift[s];const w=e.eMarks[s];if(g<w&&(o=e.src.charCodeAt(g),(o===45||o===61)&&(g=e.skipChars(g,o),g=e.skipSpaces(g),g>=w))){i=o===61?1:2;break}}if(e.sCount[s]<0)continue;let m=!1;for(let g=0,w=r.length;g<w;g++)if(r[g](e,s,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const u=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const f=e.push("inline","",0);f.content=u,f.map=[t,e.line-1],f.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),e.parentType=a,!0}function yK(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let f=0,h=r.length;f<h;f++)if(r[f](e,i,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const u=e.push("inline","",0);return u.content=o,u.map=[t,e.line],u.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const Ly=[["table",WW,["paragraph","reference"]],["code",KW],["fence",ZW,["paragraph","reference","blockquote","list"]],["blockquote",YW,["paragraph","reference","blockquote","list"]],["hr",XW,["paragraph","reference","blockquote","list"]],["list",QW,["paragraph","reference","blockquote"]],["reference",eK],["html_block",pK,["paragraph","reference","blockquote"]],["heading",mK,["paragraph","reference","blockquote"]],["lheading",gK],["paragraph",yK]];function uw(){this.ruler=new Ti;for(let e=0;e<Ly.length;e++)this.ruler.push(Ly[e][0],Ly[e][1],{alt:(Ly[e][2]||[]).slice()})}uw.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const u=e.line;let c=!1;for(let f=0;f<a;f++)if(c=r[f](e,o,n,!1),c){if(u>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),o=e.line,o<n&&e.isEmpty(o)&&(s=!0,o++,e.line=o)}};uw.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};uw.prototype.State=Hs;function E0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}E0.prototype.pushPending=function(){const e=new Qo("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};E0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Qo(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};E0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,s=i<n?this.src.charCodeAt(i):32,u=Nm(a)||Rm(String.fromCharCode(a)),c=Nm(s)||Rm(String.fromCharCode(s)),f=Tm(a),h=Tm(s),m=!h&&(!c||f||u),g=!f&&(!u||h||c);return{can_open:m&&(t||!g||u),can_close:g&&(t||!m||c),length:o}};E0.prototype.Token=Qo;function bK(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function vK(e,t){let n=e.pos;for(;n<e.posMax&&!bK(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const wK=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function _K(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(wK);if(!a)return!1;const i=a[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const u=e.md.normalizeLink(s);if(!e.md.validateLink(u))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const c=e.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(s);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=s.length-i.length,!0}function xK(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Tr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const kC=[];for(let e=0;e<256;e++)kC.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){kC[e.charCodeAt(0)]=1});function SK(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Tr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const s=e.push("text_special","",0);a<256&&kC[a]!==0?s.content=i:s.content=o,s.markup=o,s.info="escape"}return e.pos=n+1,!0}function EK(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(a,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=a)return t||(e.pending+=o),e.pos+=s,!0;let u=n,c;for(;(c=e.src.indexOf("`",u))!==-1;){for(u=c+1;u<i&&e.src.charCodeAt(u)===96;)u++;const f=u-c;if(f===s){if(!t){const h=e.push("code_inline","code",0);h.markup=o,h.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=u,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function CK(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const o=String.fromCharCode(r);if(i<2)return!1;let s;i%2&&(s=e.push("text","",0),s.content=o,i--);for(let u=0;u<i;u+=2)s=e.push("text","",0),s.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function wN(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const s=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function kK(e){const t=e.tokens_meta,n=e.tokens_meta.length;wN(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&wN(e,t[r].delimiters)}const PD={tokenize:CK,postProcess:kK};function AK(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function _N(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],o=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,s=String.fromCharCode(a.marker),u=e.tokens[a.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?s+s:s,u.content="";const c=e.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?s+s:s,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function TK(e){const t=e.tokens_meta,n=e.tokens_meta.length;_N(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&_N(e,t[r].delimiters)}const FD={tokenize:AK,postProcess:TK};function RK(e,t){let n,r,a,i,o="",s="",u=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,h=e.posMax,m=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let w=g+1;if(w<h&&e.src.charCodeAt(w)===40){for(c=!1,w++;w<h&&(n=e.src.charCodeAt(w),!(!Tr(n)&&n!==10));w++);if(w>=h)return!1;if(u=w,a=e.md.helpers.parseLinkDestination(e.src,w,e.posMax),a.ok){for(o=e.md.normalizeLink(a.str),e.md.validateLink(o)?w=a.pos:o="",u=w;w<h&&(n=e.src.charCodeAt(w),!(!Tr(n)&&n!==10));w++);if(a=e.md.helpers.parseLinkTitle(e.src,w,e.posMax),w<h&&u!==w&&a.ok)for(s=a.str,w=a.pos;w<h&&(n=e.src.charCodeAt(w),!(!Tr(n)&&n!==10));w++);}(w>=h||e.src.charCodeAt(w)!==41)&&(c=!0),w++}if(c){if(typeof e.env.references>"u")return!1;if(w<h&&e.src.charCodeAt(w)===91?(u=w+1,w=e.md.helpers.parseLinkLabel(e,w),w>=0?r=e.src.slice(u,w++):w=g+1):w=g+1,r||(r=e.src.slice(m,g)),i=e.env.references[lw(r)],!i)return e.pos=f,!1;o=i.href,s=i.title}if(!t){e.pos=m,e.posMax=g;const v=e.push("link_open","a",1),_=[["href",o]];v.attrs=_,s&&_.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=w,e.posMax=h,!0}function NK(e,t){let n,r,a,i,o,s,u,c,f="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,w=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(w<0)return!1;if(i=w+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(i>=m)return!1;for(c=i,s=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),s.ok&&(f=e.md.normalizeLink(s.str),e.md.validateLink(f)?i=s.pos:f=""),c=i;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(s=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&c!==i&&s.ok)for(u=s.str,i=s.pos;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);else u="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(c,i++):i=w+1):i=w+1,a||(a=e.src.slice(g,w)),o=e.env.references[lw(a)],!o)return e.pos=h,!1;f=o.href,u=o.title}if(!t){r=e.src.slice(g,w);const v=[];e.md.inline.parse(r,e.md,e.env,v);const _=e.push("image","img",0),x=[["src",f],["alt",""]];_.attrs=x,_.children=v,_.content=r,u&&x.push(["title",u])}return e.pos=i,e.posMax=m,!0}const IK=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,OK=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function DK(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(OK.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(IK.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function jK(e){return/^<a[>\s]/i.test(e)}function MK(e){return/^<\/a\s*>/i.test(e)}function PK(e){const t=e|32;return t>=97&&t<=122}function FK(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!PK(a))return!1;const i=e.src.slice(r).match(fK);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],jK(o.content)&&e.linkLevel++,MK(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const LK=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,$K=/^&([a-z][a-z0-9]{1,31});/i;function BK(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(LK);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0);s.content=EC(o)?Pb(o):Pb(65533),s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match($K);if(i){const o=RD(i[0]);if(o!==i[0]){if(!t){const s=e.push("text_special","",0);s.content=o,s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function xN(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let o=0;o<n;o++){const s=e[o];if(i.push(0),(e[r].marker!==s.marker||a!==s.token-1)&&(r=o),a=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const u=t[s.marker][(s.open?3:0)+s.length%3];let c=r-i[r]-1,f=c;for(;c>u;c-=i[c]+1){const h=e[c];if(h.marker===s.marker&&h.open&&h.end<0){let m=!1;if((h.close||s.open)&&(h.length+s.length)%3===0&&(h.length%3!==0||s.length%3!==0)&&(m=!0),!m){const g=c>0&&!e[c-1].open?i[c-1]+1:0;i[o]=o-c+g,i[c]=g,s.open=!1,h.end=o,h.close=!1,f=-1,a=-2;break}}}f!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=f)}}function zK(e){const t=e.tokens_meta,n=e.tokens_meta.length;xN(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&xN(t[r].delimiters)}function UK(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const Cx=[["text",vK],["linkify",_K],["newline",xK],["escape",SK],["backticks",EK],["strikethrough",PD.tokenize],["emphasis",FD.tokenize],["link",RK],["image",NK],["autolink",DK],["html_inline",FK],["entity",BK]],kx=[["balance_pairs",zK],["strikethrough",PD.postProcess],["emphasis",FD.postProcess],["fragments_join",UK]];function C0(){this.ruler=new Ti;for(let e=0;e<Cx.length;e++)this.ruler.push(Cx[e][0],Cx[e][1]);this.ruler2=new Ti;for(let e=0;e<kx.length;e++)this.ruler2.push(kx[e][0],kx[e][1])}C0.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<a){for(let s=0;s<r;s++)if(e.level++,o=n[s](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};C0.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<a){for(let s=0;s<n;s++)if(o=t[s](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};C0.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),o=i.length;for(let s=0;s<o;s++)i[s](a)};C0.prototype.State=E0;function qK(e){const t={};e=e||{},t.src_Any=ED.source,t.src_Cc=CD.source,t.src_Z=AD.source,t.src_P=xC.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function G2(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function cw(e){return Object.prototype.toString.call(e)}function HK(e){return cw(e)==="[object String]"}function VK(e){return cw(e)==="[object Object]"}function GK(e){return cw(e)==="[object RegExp]"}function SN(e){return cw(e)==="[object Function]"}function WK(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const LD={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function KK(e){return Object.keys(e||{}).reduce(function(t,n){return t||LD.hasOwnProperty(n)},!1)}const ZK={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},YK="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",XK="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function JK(e){e.__index__=-1,e.__text_cache__=""}function QK(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function EN(){return function(e,t){t.normalize(e)}}function Fb(e){const t=e.re=qK(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(YK),n.push(t.src_xn),t.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(s,u){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+u)}Object.keys(e.__schemas__).forEach(function(s){const u=e.__schemas__[s];if(u===null)return;const c={validate:null,link:null};if(e.__compiled__[s]=c,VK(u)){GK(u.validate)?c.validate=QK(u.validate):SN(u.validate)?c.validate=u.validate:i(s,u),SN(u.normalize)?c.normalize=u.normalize:u.normalize?i(s,u):c.normalize=EN();return}if(HK(u)){a.push(s);return}i(s,u)}),a.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:EN()};const o=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(WK).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),JK(e)}function eZ(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function W2(e,t){const n=new eZ(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Zi(e,t){if(!(this instanceof Zi))return new Zi(e,t);t||KK(e)&&(t=e,e={}),this.__opts__=G2({},LD,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=G2({},ZK,e),this.__compiled__={},this.__tlds__=XK,this.__tlds_replaced__=!1,this.re={},Fb(this)}Zi.prototype.add=function(t,n){return this.__schemas__[t]=n,Fb(this),this};Zi.prototype.set=function(t){return this.__opts__=G2(this.__opts__,t),this};Zi.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,o,s,u,c,f;if(this.re.schema_test.test(t)){for(u=this.re.schema_search,u.lastIndex=0;(n=u.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],u.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(o=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};Zi.prototype.pretest=function(t){return this.re.pretest.test(t)};Zi.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Zi.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(W2(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(W2(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Zi.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,W2(this,0)):null};Zi.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Fb(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Fb(this),this)};Zi.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Zi.prototype.onCompile=function(){};const qf=2147483647,Is=36,AC=1,Im=26,tZ=38,nZ=700,$D=72,BD=128,zD="-",rZ=/^xn--/,aZ=/[^\0-\x7F]/,iZ=/[\x2E\u3002\uFF0E\uFF61]/g,oZ={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ax=Is-AC,Os=Math.floor,Tx=String.fromCharCode;function ju(e){throw new RangeError(oZ[e])}function sZ(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function UD(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(iZ,".");const a=e.split("."),i=sZ(a,t).join(".");return r+i}function qD(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const lZ=e=>String.fromCodePoint(...e),uZ=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Is},CN=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},HD=function(e,t,n){let r=0;for(e=n?Os(e/nZ):e>>1,e+=Os(e/t);e>Ax*Im>>1;r+=Is)e=Os(e/Ax);return Os(r+(Ax+1)*e/(e+tZ))},VD=function(e){const t=[],n=e.length;let r=0,a=BD,i=$D,o=e.lastIndexOf(zD);o<0&&(o=0);for(let s=0;s<o;++s)e.charCodeAt(s)>=128&&ju("not-basic"),t.push(e.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const u=r;for(let f=1,h=Is;;h+=Is){s>=n&&ju("invalid-input");const m=uZ(e.charCodeAt(s++));m>=Is&&ju("invalid-input"),m>Os((qf-r)/f)&&ju("overflow"),r+=m*f;const g=h<=i?AC:h>=i+Im?Im:h-i;if(m<g)break;const w=Is-g;f>Os(qf/w)&&ju("overflow"),f*=w}const c=t.length+1;i=HD(r-u,c,u==0),Os(r/c)>qf-a&&ju("overflow"),a+=Os(r/c),r%=c,t.splice(r++,0,a)}return String.fromCodePoint(...t)},GD=function(e){const t=[];e=qD(e);const n=e.length;let r=BD,a=0,i=$D;for(const u of e)u<128&&t.push(Tx(u));const o=t.length;let s=o;for(o&&t.push(zD);s<n;){let u=qf;for(const f of e)f>=r&&f<u&&(u=f);const c=s+1;u-r>Os((qf-a)/c)&&ju("overflow"),a+=(u-r)*c,r=u;for(const f of e)if(f<r&&++a>qf&&ju("overflow"),f===r){let h=a;for(let m=Is;;m+=Is){const g=m<=i?AC:m>=i+Im?Im:m-i;if(h<g)break;const w=h-g,v=Is-g;t.push(Tx(CN(g+w%v,0))),h=Os(w/v)}t.push(Tx(CN(h,0))),i=HD(a,c,s===o),a=0,++s}++a,++r}return t.join("")},cZ=function(e){return UD(e,function(t){return rZ.test(t)?VD(t.slice(4).toLowerCase()):t})},dZ=function(e){return UD(e,function(t){return aZ.test(t)?"xn--"+GD(t):t})},WD={version:"2.3.1",ucs2:{decode:qD,encode:lZ},decode:VD,encode:GD,toASCII:dZ,toUnicode:cZ},fZ={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},hZ={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},pZ={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},mZ={default:fZ,zero:hZ,commonmark:pZ},gZ=/^(vbscript|javascript|file|data):/,yZ=/^data:image\/(gif|png|jpeg|webp);/;function bZ(e){const t=e.trim().toLowerCase();return gZ.test(t)?yZ.test(t):!0}const KD=["http:","https:","mailto:"];function vZ(e){const t=_C(e,!0);if(t.hostname&&(!t.protocol||KD.indexOf(t.protocol)>=0))try{t.hostname=WD.toASCII(t.hostname)}catch{}return S0(wC(t))}function wZ(e){const t=_C(e,!0);if(t.hostname&&(!t.protocol||KD.indexOf(t.protocol)>=0))try{t.hostname=WD.toUnicode(t.hostname)}catch{}return Jf(wC(t),Jf.defaultChars+"%")}function wo(e,t){if(!(this instanceof wo))return new wo(e,t);t||SC(e)||(t=e||{},e="default"),this.inline=new C0,this.block=new uw,this.core=new CC,this.renderer=new Ch,this.linkify=new Zi,this.validateLink=bZ,this.normalizeLink=vZ,this.normalizeLinkText=wZ,this.utils=xW,this.helpers=sw({},kW),this.options={},this.configure(e),t&&this.set(t)}wo.prototype.set=function(e){return sw(this.options,e),this};wo.prototype.configure=function(e){const t=this;if(SC(e)){const n=e;if(e=mZ[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};wo.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};wo.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};wo.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};wo.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};wo.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};wo.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};wo.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const Rx=new wo({html:!1,linkify:!0,breaks:!0});function ZD(e){return R.useMemo(()=>{var n;if(!e)return[];try{const r=Rx.parse(e,{}),a=[];let i="",o=0;for(;o<r.length;){const s=r[o];if(s.type==="fence"){i&&(a.push(i),i="");const u=((n=s.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:u,code:s.content}),o++}else{const u=[];for(;o<r.length&&r[o].type!=="fence";)u.push(r[o]),o++;u.length>0&&(i+=Rx.renderer.render(u,Rx.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}var Nx={exports:{}},kN;function _Z(){return kN||(kN=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,o={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof u?new u(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var A,O;switch(s.util.type(E)){case"Object":if(O=s.util.objId(E),C[O])return C[O];A={},C[O]=A;for(var I in E)E.hasOwnProperty(I)&&(A[I]=S(E[I],C));return A;case"Array":return O=s.util.objId(E),C[O]?C[O]:(A=[],C[O]=A,E.forEach(function(D,B){A[B]=S(D,C)}),A);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(A){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(A.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var A="no-"+E;S;){var O=S.classList;if(O.contains(E))return!0;if(O.contains(A))return!1;S=S.parentElement}return!!C}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(S,E){var C=s.util.clone(s.languages[S]);for(var A in E)C[A]=E[A];return C},insertBefore:function(S,E,C,A){A=A||s.languages;var O=A[S],I={};for(var D in O)if(O.hasOwnProperty(D)){if(D==E)for(var B in C)C.hasOwnProperty(B)&&(I[B]=C[B]);C.hasOwnProperty(D)||(I[D]=O[D])}var K=A[S];return A[S]=I,s.languages.DFS(s.languages,function(Q,F){F===K&&Q!=S&&(this[Q]=I)}),I},DFS:function S(E,C,A,O){O=O||{};var I=s.util.objId;for(var D in E)if(E.hasOwnProperty(D)){C.call(E,D,E[D],A||D);var B=E[D],K=s.util.type(B);K==="Object"&&!O[I(B)]?(O[I(B)]=!0,S(B,C,null,O)):K==="Array"&&!O[I(B)]&&(O[I(B)]=!0,S(B,C,D,O))}}},plugins:{},highlightAll:function(S,E){s.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var A={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",A),A.elements=Array.prototype.slice.apply(A.container.querySelectorAll(A.selector)),s.hooks.run("before-all-elements-highlight",A);for(var O=0,I;I=A.elements[O++];)s.highlightElement(I,E===!0,A.callback)},highlightElement:function(S,E,C){var A=s.util.getLanguage(S),O=s.languages[A];s.util.setLanguage(S,A);var I=S.parentElement;I&&I.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(I,A);var D=S.textContent,B={element:S,language:A,grammar:O,code:D};function K(F){B.highlightedCode=F,s.hooks.run("before-insert",B),B.element.innerHTML=B.highlightedCode,s.hooks.run("after-highlight",B),s.hooks.run("complete",B),C&&C.call(B.element)}if(s.hooks.run("before-sanity-check",B),I=B.element.parentElement,I&&I.nodeName.toLowerCase()==="pre"&&!I.hasAttribute("tabindex")&&I.setAttribute("tabindex","0"),!B.code){s.hooks.run("complete",B),C&&C.call(B.element);return}if(s.hooks.run("before-highlight",B),!B.grammar){K(s.util.encode(B.code));return}if(E&&r.Worker){var Q=new Worker(s.filename);Q.onmessage=function(F){K(F.data)},Q.postMessage(JSON.stringify({language:B.language,code:B.code,immediateClose:!0}))}else K(s.highlight(B.code,B.grammar,B.language))},highlight:function(S,E,C){var A={code:S,grammar:E,language:C};if(s.hooks.run("before-tokenize",A),!A.grammar)throw new Error('The language "'+A.language+'" has no grammar.');return A.tokens=s.tokenize(A.code,A.grammar),s.hooks.run("after-tokenize",A),u.stringify(s.util.encode(A.tokens),A.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var A in C)E[A]=C[A];delete E.rest}var O=new h;return m(O,O.head,S),f(S,O,E,O.head,0),w(O)},hooks:{all:{},add:function(S,E){var C=s.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=s.hooks.all[S];if(!(!C||!C.length))for(var A=0,O;O=C[A++];)O(E)}},Token:u};r.Prism=s;function u(S,E,C,A){this.type=S,this.content=E,this.alias=C,this.length=(A||"").length|0}u.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var A="";return E.forEach(function(K){A+=S(K,C)}),A}var O={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},I=E.alias;I&&(Array.isArray(I)?Array.prototype.push.apply(O.classes,I):O.classes.push(I)),s.hooks.run("wrap",O);var D="";for(var B in O.attributes)D+=" "+B+'="'+(O.attributes[B]||"").replace(/"/g,"&quot;")+'"';return"<"+O.tag+' class="'+O.classes.join(" ")+'"'+D+">"+O.content+"</"+O.tag+">"};function c(S,E,C,A){S.lastIndex=E;var O=S.exec(C);if(O&&A&&O[1]){var I=O[1].length;O.index+=I,O[0]=O[0].slice(I)}return O}function f(S,E,C,A,O,I){for(var D in C)if(!(!C.hasOwnProperty(D)||!C[D])){var B=C[D];B=Array.isArray(B)?B:[B];for(var K=0;K<B.length;++K){if(I&&I.cause==D+","+K)return;var Q=B[K],F=Q.inside,W=!!Q.lookbehind,U=!!Q.greedy,he=Q.alias;if(U&&!Q.pattern.global){var ae=Q.pattern.toString().match(/[imsuy]*$/)[0];Q.pattern=RegExp(Q.pattern.source,ae+"g")}for(var re=Q.pattern||Q,ee=A.next,se=O;ee!==E.tail&&!(I&&se>=I.reach);se+=ee.value.length,ee=ee.next){var V=ee.value;if(E.length>S.length)return;if(!(V instanceof u)){var X=1,Y;if(U){if(Y=c(re,se,S,W),!Y||Y.index>=S.length)break;var De=Y.index,ne=Y.index+Y[0].length,be=se;for(be+=ee.value.length;De>=be;)ee=ee.next,be+=ee.value.length;if(be-=ee.value.length,se=be,ee.value instanceof u)continue;for(var Ee=ee;Ee!==E.tail&&(be<ne||typeof Ee.value=="string");Ee=Ee.next)X++,be+=Ee.value.length;X--,V=S.slice(se,be),Y.index-=se}else if(Y=c(re,0,V,W),!Y)continue;var De=Y.index,Pe=Y[0],Re=V.slice(0,De),Te=V.slice(De+Pe.length),He=se+V.length;I&&He>I.reach&&(I.reach=He);var it=ee.prev;Re&&(it=m(E,it,Re),se+=Re.length),g(E,it,X);var Ie=new u(D,F?s.tokenize(Pe,F):Pe,he,Pe);if(ee=m(E,it,Ie),Te&&m(E,ee,Te),X>1){var Ae={cause:D+","+K,reach:He};f(S,E,C,ee.prev,se,Ae),I&&Ae.reach>I.reach&&(I.reach=Ae.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function m(S,E,C){var A=E.next,O={value:C,prev:E,next:A};return E.next=O,A.prev=O,S.length++,O}function g(S,E,C){for(var A=E.next,O=0;O<C&&A!==S.tail;O++)A=A.next;E.next=A,A.prev=E,S.length-=O}function w(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,A=E.code,O=E.immediateClose;r.postMessage(s.highlight(A,s.languages[C],C)),O&&r.close()},!1)),s;var v=s.util.currentScript();v&&(s.filename=v.src,v.hasAttribute("data-manual")&&(s.manual=!0));function _(){s.manual||s.highlightAll()}if(!s.manual){var x=document.readyState;x==="loading"||x==="interactive"&&v&&v.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return s}(t);e.exports&&(e.exports=n),typeof nd<"u"&&(nd.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var o={};o["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};s["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var u={};u[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(v,_){return" Error "+v+" while fetching file: "+_},i=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",u="loading",c="loaded",f="failed",h="pre[data-src]:not(["+s+'="'+c+'"]):not(['+s+'="'+u+'"])';function m(v,_,x){var S=new XMLHttpRequest;S.open("GET",v,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?_(S.responseText):S.status>=400?x(a(S.status,S.statusText)):x(i))},S.send(null)}function g(v){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(v||"");if(_){var x=Number(_[1]),S=_[2],E=_[3];return S?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(v){v.selector+=", "+h}),n.hooks.add("before-sanity-check",function(v){var _=v.element;if(_.matches(h)){v.code="",_.setAttribute(s,u);var x=_.appendChild(document.createElement("CODE"));x.textContent=r;var S=_.getAttribute("data-src"),E=v.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=o[C]||C}n.util.setLanguage(x,E),n.util.setLanguage(_,E);var A=n.plugins.autoloader;A&&A.loadLanguages(E),m(S,function(O){_.setAttribute(s,c);var I=g(_.getAttribute("data-range"));if(I){var D=O.split(/\r\n?|\n/g),B=I[0],K=I[1]==null?D.length:I[1];B<0&&(B+=D.length),B=Math.max(0,Math.min(B-1,D.length)),K<0&&(K+=D.length),K=Math.max(0,Math.min(K,D.length)),O=D.slice(B,K).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(B+1))}x.textContent=O,n.highlightElement(x)},function(O){_.setAttribute(s,f),x.textContent=O})}}),n.plugins.fileHighlight={highlight:function(_){for(var x=(_||document).querySelectorAll(h),S=0,E;E=x[S++];)n.highlightElement(E)}};var w=!1;n.fileHighlight=function(){w||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),w=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(Nx)),Nx.exports}var xZ=_Z();const SZ=Qa(xZ);var AN={},TN;function EZ(){return TN||(TN=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),AN}EZ();var RN={},NN;function CZ(){return NN||(NN=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),RN}CZ();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,o=0;o<a.length;o++)i[a[o]]=e.languages.bash[a[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(f){return f=f.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+f+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(f){["url","bold","italic","strike","code-snippet"].forEach(function(h){f!==h&&(e.languages.markdown[f].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(f){if(f.language!=="markdown"&&f.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var g=0,w=m.length;g<w;g++){var v=m[g];if(v.type!=="code"){h(v.content);continue}var _=v.content[1],x=v.content[3];if(_&&x&&_.type==="code-language"&&x.type==="code-block"&&typeof _.content=="string"){var S=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(f.tokens)}),e.hooks.add("wrap",function(f){if(f.type==="code-block"){for(var h="",m=0,g=f.classes.length;m<g;m++){var w=f.classes[m],v=/language-(.+)/.exec(w);if(v){h=v[1];break}}var _=e.languages[h];if(_)f.content=e.highlight(c(f.content),_,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);f.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(x);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function c(f){var h=f.replace(o,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,g){if(g=g.toLowerCase(),g[0]==="#"){var w;return g[1]==="x"?w=parseInt(g.slice(2),16):w=Number(g.slice(1)),u(w)}else{var v=s[g];return v||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(s,u){u=(u||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return s});return RegExp(c,u)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(i),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var IN={},ON;function kZ(){return ON||(ON=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),IN}kZ();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const TC=({lang:e,code:t})=>{const[n,r]=R.useState(!1),[a,i]=R.useState(!1),o=R.useRef(null),s=R.useCallback(()=>{if(o.current&&t)try{o.current.textContent=t,SZ.highlightElement(o.current)}catch(m){console.error("Prism highlight error:",m),o.current.textContent=t}else o.current&&(o.current.textContent="")},[t]);R.useEffect(()=>{a||s()},[t,e,a,s]);const u=async()=>{try{await navigator.clipboard.writeText(t),r(!0),dt.success("Code copied to clipboard!"),setTimeout(()=>r(!1),1500)}catch(m){dt.error("Failed to copy code."),console.error("Clipboard copy failed:",m)}},c=()=>{const m=a;i(g=>!g),m&&setTimeout(s,0)},f=e?`language-${e}`:"language-plaintext",h=R.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return y.jsxs("div",{className:"code-block-container my-4",children:[y.jsxs("div",{className:"code-block-header",children:[y.jsx("span",{className:"text-xs text-muted-foreground",children:e||"code"}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:c,"aria-label":a?"Unfold code":"Fold code",children:y.jsx(Wv,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:a?"Unfold":"Fold"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:u,"aria-label":"Copy code",children:n?y.jsx(vo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(rC,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Copy"})]})})]})]}),!a&&y.jsx("pre",{className:Dt("code-block-content"),children:y.jsx("code",{ref:o,className:Dt(f),children:t})}),a&&y.jsx("div",{className:"folded-content-preview p-4 pt-0",onClick:c,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:h})})]})},AZ=({toolCallStrings:e,toolResultStrings:t})=>{if(!e||e.length===0)return null;const n=[],r=[];e.forEach(i=>{try{const o=JSON.parse(i);o&&o.type==="tool-call"&&o.toolCallId&&o.toolName&&o.args!==void 0?n.push(o):console.warn("Skipping invalid tool call string:",i)}catch(o){console.error("Failed to parse tool call string for display:",i,o)}}),(t??[]).forEach(i=>{try{const o=JSON.parse(i);o&&o.type==="tool-result"&&o.toolCallId&&o.toolName&&o.result!==void 0?r.push(o):console.warn("Skipping invalid tool result string:",i)}catch(o){console.error("Failed to parse tool result string for display:",i,o)}});const a=new Map(r.map(i=>[i.toolCallId,i]));return y.jsx("div",{className:"mt-2 space-y-2 border-t border-border/50 pt-2",children:n.map(i=>{const o=a.get(i.toolCallId),s=o&&typeof o.result=="object"&&o.result!==null&&o.result._isError===!0,u=s?String(o.result.error):null,c=o?s?"error":"completed":"pending",f=o?s?`Error: ${u}`:JSON.stringify(o.result,null,2):"Waiting for result...";return y.jsxs("div",{className:"p-2 border rounded bg-muted/30 text-xs",children:[y.jsxs("div",{className:"flex items-center gap-1.5 font-medium mb-1",children:[c==="pending"&&y.jsx(Jn,{className:"h-3.5 w-3.5 animate-spin text-blue-500"}),c==="completed"&&y.jsx(Rb,{className:"h-3.5 w-3.5 text-green-500"}),c==="error"&&y.jsx(Ms,{className:"h-3.5 w-3.5 text-destructive"}),y.jsx(lC,{className:"h-3.5 w-3.5 text-muted-foreground"}),y.jsxs("span",{children:["Tool Call: ",i.toolName]})]}),y.jsxs("div",{className:"pl-5 space-y-1",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold",children:"Args:"}),y.jsx("pre",{className:"text-[11px] bg-background/50 p-1 rounded mt-0.5 whitespace-pre-wrap break-words",children:JSON.stringify(i.args,null,2)})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold",children:"Result:"}),y.jsx("pre",{className:Dt("text-[11px] p-1 rounded mt-0.5 whitespace-pre-wrap break-words",s?"bg-destructive/10 text-destructive":"bg-background/50"),children:f})]})]})]},i.toolCallId)})})},TZ=({interaction:e,allInteractionsInGroup:t,onRegenerate:n,className:r})=>{var F,W,U,he,ae,re,ee,se,V,X,Y,ne,be;const[a,i]=R.useState(0),[o,s]=R.useState(!1),[u,c]=R.useState(!1),[f,h]=R.useState(!1),m=R.useMemo(()=>t.filter(Ee=>Ee.type==="message.user_assistant"&&Ee.status==="COMPLETED"&&Ee.prompt===null).sort((Ee,De)=>{var Pe,Re;return(((Pe=De.startedAt)==null?void 0:Pe.getTime())??0)-(((Re=Ee.startedAt)==null?void 0:Re.getTime())??0)}),[t]),g=m.length>0?m[a]:e,w=typeof g.response=="string"?g.response:null,v=ZD(w),_=e.prompt&&g.status==="COMPLETED"&&typeof n=="function"&&a===0,x=Ee=>{Ee.stopPropagation(),n&&e.prompt?n(e.id):console.error("Could not regenerate: No callback or prompt data found in the original interaction.",e)},S=Ee=>{i(De=>Ee==="prev"?Math.min(De+1,m.length-1):Math.max(De-1,0))},E=R.useCallback(async()=>{if(w)try{await navigator.clipboard.writeText(w),c(!0),dt.success("Response copied to clipboard!"),setTimeout(()=>c(!1),1500)}catch(Ee){dt.error("Failed to copy response."),console.error("Clipboard copy failed:",Ee)}},[w]),C=R.useCallback(async()=>{try{await navigator.clipboard.writeText(g.id),h(!0),dt.success("Interaction ID copied to clipboard!"),setTimeout(()=>h(!1),1500)}catch(Ee){dt.error("Failed to copy interaction ID."),console.error("Clipboard copy failed:",Ee)}},[g.id]),A=()=>s(Ee=>!Ee),O=m.length>1,I=a<m.length-1,D=a>0,B=R.useMemo(()=>w?w.split(`
`).slice(0,3).join(`
`):"",[w]),K=R.useMemo(()=>g.startedAt&&g.endedAt?((g.endedAt.getTime()-g.startedAt.getTime())/1e3).toFixed(2):null,[g.startedAt,g.endedAt]),Q=(((W=(F=g.metadata)==null?void 0:F.toolCalls)==null?void 0:W.length)??0)>0;return y.jsxs("div",{className:Dt("p-3 my-2 border rounded-md shadow-sm bg-card relative group",r),children:[y.jsxs("div",{className:"text-xs text-muted-foreground mb-1 flex justify-between items-center",children:[y.jsxs("span",{children:["Assistant | ",g.status,((U=g.metadata)==null?void 0:U.modelId)&&y.jsxs("span",{className:"ml-2 text-blue-400",children:["(",g.metadata.modelId,")"]})]}),y.jsxs("div",{className:"interaction-card-actions-sticky",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:A,"aria-label":o?"Unfold response":"Fold response",children:y.jsx(Wv,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:o?"Unfold":"Fold"})]})}),O&&y.jsxs("div",{className:"flex items-center border border-border rounded bg-background/50",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>S("prev"),disabled:!I,"aria-label":"Previous revision",children:y.jsx(TU,{className:"h-3 w-3"})})}),y.jsx(On,{side:"top",children:"Previous Revision"})]})}),y.jsxs("span",{className:"text-[10px] px-1 text-muted-foreground select-none",children:[a+1,"/",m.length]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>S("next"),disabled:!D,"aria-label":"Next revision",children:y.jsx(FO,{className:"h-3 w-3"})})}),y.jsx(On,{side:"top",children:"Next Revision"})]})})]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:C,"aria-label":"Copy interaction ID",children:f?y.jsx(vo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx($O,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Copy ID"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:E,"aria-label":"Copy response",disabled:!w,children:u?y.jsx(vo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(rC,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Copy"})]})}),_&&y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:x,"aria-label":"Regenerate response",children:y.jsx(Yv,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Regenerate"})]})})]})]}),y.jsx("div",{className:"text-sm markdown-content",children:o?y.jsx("div",{className:"folded-content-preview cursor-pointer",onClick:A,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground",children:B||(Q?"[Tool Activity]":"")})}):y.jsxs(y.Fragment,{children:[v.map((Ee,De)=>typeof Ee=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:Ee}},De):Ee.type==="code"?y.jsx(TC,{lang:Ee.lang,code:Ee.code},De):null),y.jsx(AZ,{toolCallStrings:(he=g.metadata)==null?void 0:he.toolCalls,toolResultStrings:(ae=g.metadata)==null?void 0:ae.toolResults})]})}),!o&&(((re=g.metadata)==null?void 0:re.promptTokens)||((ee=g.metadata)==null?void 0:ee.completionTokens)||K)&&y.jsxs("div",{className:"mt-2 pt-2 border-t border-border/50 text-xs text-muted-foreground flex justify-start gap-3",children:[K&&y.jsxs("span",{children:["Time: ",K,"s"]}),(((se=g.metadata)==null?void 0:se.promptTokens)||((V=g.metadata)==null?void 0:V.completionTokens))&&y.jsxs("span",{children:["Tokens: ",((X=g.metadata)==null?void 0:X.promptTokens)??"?"," ","(in) / ",((Y=g.metadata)==null?void 0:Y.completionTokens)??"?"," ","(out)"]})]}),g.status==="ERROR"&&((ne=g.metadata)==null?void 0:ne.error)&&y.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-destructive",children:[y.jsx(Ms,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Error: ",g.metadata.error]})]}),g.status==="WARNING"&&((be=g.metadata)==null?void 0:be.error)&&y.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-accent",children:[y.jsx(Ms,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Error: ",g.metadata.error]})]})]})},RZ=R.memo(TZ);var st;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(st||(st={}));const DN={[st.EPERM]:"Operation not permitted",[st.ENOENT]:"No such file or directory",[st.EINTR]:"Interrupted system call",[st.EIO]:"Input/output error",[st.ENXIO]:"No such device or address",[st.EBADF]:"Bad file descriptor",[st.EAGAIN]:"Resource temporarily unavailable",[st.ENOMEM]:"Cannot allocate memory",[st.EACCES]:"Permission denied",[st.EFAULT]:"Bad address",[st.ENOTBLK]:"Block device required",[st.EBUSY]:"Resource busy or locked",[st.EEXIST]:"File exists",[st.EXDEV]:"Invalid cross-device link",[st.ENODEV]:"No such device",[st.ENOTDIR]:"File is not a directory",[st.EISDIR]:"File is a directory",[st.EINVAL]:"Invalid argument",[st.ENFILE]:"Too many open files in system",[st.EMFILE]:"Too many open files",[st.ETXTBSY]:"Text file busy",[st.EFBIG]:"File is too big",[st.ENOSPC]:"No space left on disk",[st.ESPIPE]:"Illegal seek",[st.EROFS]:"Cannot modify a read-only file system",[st.EMLINK]:"Too many links",[st.EPIPE]:"Broken pipe",[st.EDOM]:"Numerical argument out of domain",[st.ERANGE]:"Numerical result out of range",[st.EDEADLK]:"Resource deadlock would occur",[st.ENAMETOOLONG]:"File name too long",[st.ENOLCK]:"No locks available",[st.ENOSYS]:"Function not implemented",[st.ENOTEMPTY]:"Directory is not empty",[st.ELOOP]:"Too many levels of symbolic links",[st.ENOMSG]:"No message of desired type",[st.EBADE]:"Invalid exchange",[st.EBADR]:"Invalid request descriptor",[st.EXFULL]:"Exchange full",[st.ENOANO]:"No anode",[st.EBADRQC]:"Invalid request code",[st.ENOSTR]:"Device not a stream",[st.ENODATA]:"No data available",[st.ETIME]:"Timer expired",[st.ENOSR]:"Out of streams resources",[st.ENONET]:"Machine is not on the network",[st.EREMOTE]:"Object is remote",[st.ENOLINK]:"Link has been severed",[st.ECOMM]:"Communication error on send",[st.EPROTO]:"Protocol error",[st.EBADMSG]:"Bad message",[st.EOVERFLOW]:"Value too large for defined data type",[st.EBADFD]:"File descriptor in bad state",[st.ESTRPIPE]:"Streams pipe error",[st.ENOTSOCK]:"Socket operation on non-socket",[st.EDESTADDRREQ]:"Destination address required",[st.EMSGSIZE]:"Message too long",[st.EPROTOTYPE]:"Protocol wrong type for socket",[st.ENOPROTOOPT]:"Protocol not available",[st.EPROTONOSUPPORT]:"Protocol not supported",[st.ESOCKTNOSUPPORT]:"Socket type not supported",[st.ENOTSUP]:"Operation is not supported",[st.ENETDOWN]:"Network is down",[st.ENETUNREACH]:"Network is unreachable",[st.ENETRESET]:"Network dropped connection on reset",[st.ETIMEDOUT]:"Connection timed out",[st.ECONNREFUSED]:"Connection refused",[st.EHOSTDOWN]:"Host is down",[st.EHOSTUNREACH]:"No route to host",[st.EALREADY]:"Operation already in progress",[st.EINPROGRESS]:"Operation now in progress",[st.ESTALE]:"Stale file handle",[st.EREMOTEIO]:"Remote I/O error",[st.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(st[t],DN[st[t]],n,r)}constructor(t,n=DN[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=st[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var Ix={exports:{}},jN;function NZ(){return jN||(jN=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function i(u,c,f,h,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,h||u,m),w=n?n+c:c;return u._events[w]?u._events[w].fn?u._events[w]=[u._events[w],g]:u._events[w].push(g):(u._events[w]=g,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)t.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},s.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,w=new Array(g);m<g;m++)w[m]=h[m].fn;return w},s.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},s.prototype.emit=function(c,f,h,m,g,w){var v=n?n+c:c;if(!this._events[v])return!1;var _=this._events[v],x=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),x){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,h),!0;case 4:return _.fn.call(_.context,f,h,m),!0;case 5:return _.fn.call(_.context,f,h,m,g),!0;case 6:return _.fn.call(_.context,f,h,m,g,w),!0}for(E=1,S=new Array(x-1);E<x;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var C=_.length,A;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),x){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,f);break;case 3:_[E].fn.call(_[E].context,f,h);break;case 4:_[E].fn.call(_[E].context,f,h,m);break;default:if(!S)for(A=1,S=new Array(x-1);A<x;A++)S[A-1]=arguments[A];_[E].fn.apply(_[E].context,S)}}return!0},s.prototype.on=function(c,f,h){return i(this,c,f,h,!1)},s.prototype.once=function(c,f,h){return i(this,c,f,h,!0)},s.prototype.removeListener=function(c,f,h,m){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return o(this,g),this;var w=this._events[g];if(w.fn)w.fn===f&&(!m||w.once)&&(!h||w.context===h)&&o(this,g);else{for(var v=0,_=[],x=w.length;v<x;v++)(w[v].fn!==f||m&&!w[v].once||h&&w[v].context!==h)&&_.push(w[v]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},s.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(Ix)),Ix.exports}var IZ=NZ();const RC=Qa(IZ);var cO;let OZ=class extends RC{constructor(n){super();Ha(this,cO,"List");Ha(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),o=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),o}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(cO=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function MN(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function ur(e){throw e}const PN=Intl.NumberFormat("en",{notation:"compact"});PN.format.bind(PN);function bd(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function DZ(e){try{return JSON.parse(e),!0}catch{return!1}}function K2(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function NC(e){return e.at(0).toUpperCase()+e.slice(1)}const jZ=new TextEncoder;function ed(e){return jZ.encode(e)}const FN=new TextDecoder;function IC(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return FN.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),FN.decode(t)}function Om(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Om(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function MZ(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var PZ={};let FZ="process"in globalThis&&"env"in globalThis.process&&PZ.U_DEBUG=="true";function Dm(...e){FZ&&console.debug("[U]",...e)}const LN=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],LZ=[...LN,...LN.map(e=>NC(e)),"char"],OC=/^(u?int|float)(8|16|32|64|128)$/i;function YD(e){return e=="char"?"uint8":e.toLowerCase()}function DC(e){return OC.test(e.toString())}function Z2(e){return e=="char"||OC.test(e.toString().toLowerCase())}function $Z(e){if(!Z2(e))throw new TypeError("Not a valid primitive type: "+e)}const $N=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function XD(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function BZ(e){return e!=null&&typeof e=="object"&&"struct"in e}function dw(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function Bo(e){return typeof e=="function"&&Symbol.metadata in e&&BZ(e[Symbol.metadata])}function k0(e){return e!=null&&typeof e=="object"&&Bo(e.constructor)}function JD(e){if(!k0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function jC(e){return k0(e)||Bo(e)}function QD(e){if(!jC(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function MC(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function jr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=jr(e[i]);return a}if(typeof e=="string")return $Z(e),+YD(e).match(OC)[2]/8;if(MC(e))return e[Symbol.size];QD(e);const t=Bo(e)?e:e.constructor;dw(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(Bo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(k0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,jr(i)):r+=jr(i);continue}if(typeof a.length!="string")continue;let o=0;for(let s=0;s<e[a.length];s++)o+=jr(jC(i[s])?i[s]:a.type);n.isUnion?r=Math.max(r,o):r+=o}return r}function zZ(e,t){var i;QD(e);const n=Bo(e)?e:e.constructor;dw(n);const{struct:r}=n[Symbol.metadata];if(Bo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??ur(new Error("Struct does not have member: "+t));let a=0;for(const o of r.members.values()){if(o.name==t)return a;const s=e[o.name];a+=jr(jC(s)?s:o.type)}throw new Error("Struct does not have member: "+t)}function UZ(e,t){return Math.ceil(e/t)*t}function vd(e={}){return function(n,r){const a=new Map;let i=0,o=!1;for(const{name:s,type:u,length:c}of XD(r)){if(!Z2(u)&&!Bo(u))throw new TypeError("Not a valid type: "+u);if(typeof c=="string"){const m=a.get(c);if(!m)throw new Error(`"${c}" is undefined or declared after "${s}"`);if(!DC(m.type))throw new Error(`"${c}" is not a number and cannot be used to count "${s}"`)}let f=`${typeof u=="string"?u:u.name} ${s}`;c!==void 0&&(f+=`[${c}]`),a.set(s,{name:s,staticOffset:e.isUnion?0:i,type:Z2(u)?YD(u):u,length:c,decl:f});const h=typeof c=="string"||Bo(u)&&u[Symbol.metadata].struct.isDynamic?0:jr(u)*(c||1);o||(o=Bo(u)?u[Symbol.metadata].struct.isDynamic:typeof c=="string"),i=e.isUnion?Math.max(i,h):i+h,i=UZ(i,e.align||1),Dm("define",n.name+"."+s)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:o,isUnion:e.isUnion??!1},n}}function jm(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return XD(r).push({name:a,type:e,length:t}),n}}function ej(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:ur(new Error("Array lengths must be natural numbers"))}function Pa(e){if(MC(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();JD(e),dw(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=jr(e),a=new Uint8Array(r),i=new DataView(a.buffer);Dm("serialize",e.constructor.name);let o=0,s=0;for(const u of n.values()){const c=ej(e,u);Dm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name][f]:e[u.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),o=s,s+=k0(h)?jr(h):jr(u.type),!DC(u.type)){a.set(h?Pa(h):new Uint8Array(jr(u.type)),o);continue}const m=`set${NC(u.type)}`;if(m=="setInt64"){i.setBigInt64(o,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(o,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(o+(t.bigEndian?8:0),h&$N,!t.bigEndian),i.setBigInt64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(o+(t.bigEndian?8:0),h&$N,!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(o+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](o,Number(h),!t.bigEndian)}}return a}function fw(e,t){const n=MZ(t);if(MC(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);JD(e),dw(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);Dm("deserialize",e.constructor.name);let o=0,s=0;for(const u of a.values()){const c=ej(e,u);Dm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name]:e;const m=c!=-1?f:u.name,g=h[m]===null||h[m]===void 0,w=g&&Bo(u.type)&&u.type[Symbol.metadata].struct.isDynamic;if(o=s,!k0(h[m])&&!w&&(s+=jr(u.type)),typeof e[u.name]=="string"){e[u.name]=e[u.name].slice(0,f)+String.fromCharCode(i.getUint8(o))+e[u.name].slice(f+1);continue}if(!DC(u.type)){if(w&&Bo(u.type))h[m]??(h[m]=new u.type);else if(g)continue;fw(h[m],new Uint8Array(n.subarray(o))),s+=jr(h[m]);continue}c&&c!=-1&&(h||(h=[]));const v=`get${NC(u.type)}`;if(v=="getInt64"){h[m]=i.getBigInt64(o,!r.bigEndian);continue}if(v=="getUint64"){h[m]=i.getBigUint64(o,!r.bigEndian);continue}if(v=="getInt128"){h[m]=i.getBigInt64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(v=="getUint128"){h[m]=i.getBigUint64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(v=="getFloat128"){h[m]=i.getFloat64(o+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[v](o,!r.bigEndian)}}}function qZ(e){function t(n,r){return typeof n=="number"||typeof n=="string"?jm(e,n):jm(e)(n,r)}return t}const gn=Object.fromEntries(LZ.map(e=>[e,qZ(e)]));function HZ(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const es={root:"/",pwd:"/",credentials:HZ({uid:0,gid:0}),descriptors:new Map};function tj(e,t){let n="",r=0,a=-1,i=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o=="/")break;o="/"}if(o=="/"){if(!(a===s-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const u=n.lastIndexOf("/");u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}else if(n.length!==0){n="",r=0,a=s,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o==="."&&i!==-1?++i:i=-1}return n}function Pl(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:es.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=tj(n,!r),r?`/${n}`:n.length?n:"/"}function VZ(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=tj(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function tr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?VZ(t):"."}function nj(e,t){if(e===t||(e=Pl.call(this,e),t=Pl.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,o=t.length-i,s=a<o?a:o;let u=-1,c=0;for(;c<s;c++){const h=e[n+c];if(h!==t[i+c])break;h==="/"&&(u=c)}if(c===s)if(o>s){if(t[i+c]==="/")return t.slice(i+c+1);if(c===0)return t.slice(i+c)}else a>s&&(e[n+c]==="/"?u=c:c===0&&(u=0));let f="";for(c=n+u+1;c<=r;++c)(c===r||e[c]==="/")&&(f+=f.length===0?"..":"/..");return`${f}${t.slice(i+u)}`}function Yn(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function eh(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function Ss(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,o=-1,s=!0,u=e.length-1,c=0;for(;u>=r;--u){if(e[u]==="/"){if(!s){i=u+1;break}continue}o===-1&&(s=!1,o=u+1),e[u]==="."?a===-1?a=u:c!==1&&(c=1):a!==-1&&(c=-1)}if(o!==-1){const f=i===0&&t?1:i;a===-1||c===0||c===1&&a===o-1&&a===i+1?n.base=n.name=e.slice(f,o):(n.name=e.slice(f,a),n.base=e.slice(f,o),n.ext=e.slice(a,o))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var pn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(pn||(pn={}));pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";const GZ=new OZ;function WZ(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};GZ.add(n),tY(n)}function KZ(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+tr(i,e.path)}function fc(e){return function(t,n={}){return WZ(e,KZ(t,n)),t}}fc(pn.EMERG);const ZZ=fc(pn.ALERT),hw=fc(pn.CRIT),_i=fc(pn.ERR),Ka=fc(pn.WARN),PC=fc(pn.NOTICE),rj=fc(pn.INFO),mm=fc(pn.DEBUG);function YZ(e,t){return`\x1B[${t}m${e}\x1B[0m`}function XZ(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[YZ(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"",pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"",pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";let JZ=e=>[...XZ(e),e.message];function QZ(e){const t=JZ(e);return typeof t=="string"?[t]:Array.from(t)}let eY=console.error;function tY(e){e.level>nY||eY(...QZ(e))}let nY=pn.ALERT;function FC(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function rY(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function aY(e,t){if(typeof t!="object"||t===null)throw _i(new Ue(st.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){mm("Using default for option: "+n);continue}throw _i(new Ue(st.EINVAL,"Missing required option: "+n))}const i=(c,f=a)=>{var h;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?a instanceof c:c(a):typeof a===c||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===c};if(Array.isArray(r.type)?r.type.some(c=>i(c)):i(r.type))continue;const o=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,s=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,u=Array.isArray(r.type)?`one of ${r.type.map(s).join(", ")}`:s(r.type);throw _i(new Ue(st.EINVAL,`Incorrect type for "${n}": ${o} (expected ${u})`))}}function aj(e){return e!=null&&typeof e=="object"&&"backend"in e&&FC(e.backend)}const LC=0,ha=4,Gr=2,mb=1,$C=1,iY=2,oY=4,ij=0,Wa=1,Tl=2,pw=64,mw=128,sY=256,gw=512,ud=1024,lY=65536,uY=262144,cY=131072,yw=1052672,dY=4096,fY=32768,hY=16384,pY=2048,yr=61440,wd=49152,Hl=40960,zo=32768,_d=24576,aa=16384,xd=8192,Sd=4096,A0=2048,T0=1024,mY=512,gY=448,oj=256,sj=128,lj=64,yY=56,uj=32,cj=16,dj=8,bY=7,fj=4,hj=2,pj=1,vY=0,ui=4294967295,mj=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:$C,COPYFILE_FICLONE:iY,COPYFILE_FICLONE_FORCE:oY,F_OK:LC,O_APPEND:ud,O_CREAT:pw,O_DIRECT:hY,O_DIRECTORY:lY,O_DSYNC:dY,O_EXCL:mw,O_NOATIME:uY,O_NOCTTY:sY,O_NOFOLLOW:cY,O_NONBLOCK:pY,O_RDONLY:ij,O_RDWR:Tl,O_SYMLINK:fY,O_SYNC:yw,O_TRUNC:gw,O_WRONLY:Wa,R_OK:ha,S_IFBLK:_d,S_IFCHR:xd,S_IFDIR:aa,S_IFIFO:Sd,S_IFLNK:Hl,S_IFMT:yr,S_IFREG:zo,S_IFSOCK:wd,S_IRGRP:uj,S_IROTH:fj,S_IRUSR:oj,S_IRWXG:yY,S_IRWXO:bY,S_IRWXU:gY,S_ISGID:T0,S_ISUID:A0,S_ISVTX:mY,S_IWGRP:cj,S_IWOTH:hj,S_IWUSR:sj,S_IXGRP:dj,S_IXOTH:pj,S_IXUSR:lj,UV_FS_O_FILEMAP:vY,W_OK:Gr,X_OK:mb,size_max:ui},Symbol.toStringTag,{value:"Module"})),$y=BigInt(1e3);class gj{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:o,size:s,mode:u,ino:c,...f}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(o??0),this.size=this._convert(s??0),this.ino=this._convert(c??0),this.mode=this._convert(u??420&zo),(this.mode&yr)==0&&(this.mode=this.mode|this._convert(zo)),Object.assign(this,f)}isFile(){return(this.mode&yr)===zo}isDirectory(){return(this.mode&yr)===aa}isSymbolicLink(){return(this.mode&yr)===Hl}isSocket(){return(this.mode&yr)===wd}isBlockDevice(){return(this.mode&yr)===_d}isCharacterDevice(){return(this.mode&yr)===xd}isFIFO(){return(this.mode&yr)===Sd}toJSON(){return bd(this,Y2)}hasAccess(t,n){return ir(n,this._isBigint?new Vl(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*$y}get mtimeNs(){return BigInt(this.mtimeMs)*$y}get ctimeNs(){return BigInt(this.ctimeMs)*$y}get birthtimeNs(){return BigInt(this.birthtimeMs)*$y}}function yj(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<ui?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<ui?e.gid=n:r=!1,r}class Vl extends gj{constructor(){super(...arguments),this._isBigint=!1}}class Ed extends gj{constructor(){super(...arguments),this._isBigint=!0}}function wY(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class _Y{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=ui,this.ffree=ui}}class xY{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(ui),this.ffree=BigInt(ui)}}var Cr=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var w={};for(var v in r)w[v]=v==="access"?{}:r[v];for(var v in r.access)w.access[v]=r.access[v];w.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],w);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},hn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},BC=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const Bi=0,SY=1024;let BN=(()=>{var e,t;let n=[vd()],r,a=[],i,o,s=[],u=[],c,f=[],h=[],m,g=[],w=[],v,_=[],x=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=hn(this,s,0),this.valueSize=(hn(this,u),hn(this,f,0)),this._key=(hn(this,h),hn(this,g,"")),this._value=(hn(this,w),hn(this,_,new Uint8Array(SY))),hn(this,x),S&&(this.key=S),E&&(this.value=E)}},BC(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[(e=gn).uint32.bind(e)],c=[(t=gn).uint32.bind(t)],m=[gn.char("keySize")],v=[gn.uint8("valueSize")],Cr(null,null,o,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},s,u),Cr(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},f,h),Cr(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},g,w),Cr(null,null,v,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},_,x),Cr(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),hn(i,a)})(),i})(),Zu=(()=>{var e;let t=[vd()],n,r=[],a,i,o=[],s=[],u,c=[],f=[];return a=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const g=this.get(h);if(g){g.value=m;return}this.data.push(new BN(h,m)),this.size++}remove(h){const m=this.data.findIndex(g=>g.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=hn(this,o,0),this.data=(hn(this,s),hn(this,c,[])),hn(this,f)}},BC(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=gn).uint32.bind(e)],u=[jm(BN,"size")],Cr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,g)=>{m.size=g}},metadata:h},o,s),Cr(null,null,u,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,g)=>{m.data=g}},metadata:h},c,f),Cr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),hn(a,r)})(),a})();const Y2=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],EY=4;var xi;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(xi||(xi={}));let ra=(()=>{var e,t,n,r,a,i,o,s,u,c,f,h,m,g,w,v;let _=[vd()],x,S=[],E,C,A=[],O=[],I,D=[],B=[],K,Q=[],F=[],W,U=[],he=[],ae,re=[],ee=[],se,V=[],X=[],Y,ne=[],be=[],Ee,De=[],Pe=[],Re,Te=[],He=[],it,Ie=[],Ae=[],z,ke=[],Ne=[],ce,ie=[],J=[],_e,Le=[],xe=[],Ve,xt=[],ht=[],Et,Lt=[],Tt=[],zt,ge=[],N=[],H,fe=[],Oe=[],ve,Ce=[],le=[];var ct=E=class{constructor(yt){if(this.data=hn(this,A,K2(0,ui)),this.__data_old=(hn(this,O),hn(this,D,0)),this.size=(hn(this,B),hn(this,Q,0)),this.mode=(hn(this,F),hn(this,U,0)),this.nlink=(hn(this,he),hn(this,re,1)),this.uid=(hn(this,ee),hn(this,V,0)),this.gid=(hn(this,X),hn(this,ne,0)),this.atimeMs=(hn(this,be),hn(this,De,Date.now())),this.birthtimeMs=(hn(this,Pe),hn(this,Te,Date.now())),this.mtimeMs=(hn(this,He),hn(this,Ie,Date.now())),this.ctimeMs=(hn(this,Ae),hn(this,ke,Date.now())),this.ino=(hn(this,Ne),hn(this,ie,K2(0,ui))),this.__ino_old=(hn(this,J),hn(this,Le,0)),this.flags=(hn(this,xe),hn(this,xt,0)),this.__after_flags=(hn(this,ht),hn(this,Lt,0)),this.version=(hn(this,Tt),hn(this,ge,0)),this.__padding=(hn(this,N),hn(this,fe,[])),this.attributes=(hn(this,Oe),hn(this,Ce,new Zu)),hn(this,le),!!yt){if(!("byteLength"in yt)){Object.assign(this,yt);return}if(yt.byteLength<jr(ct))throw hw(new Ue(st.EIO,"Buffer is too small to create an inode"));fw(this,yt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...bd(this,Y2),attributes:this.attributes}}toStats(){return new Vl(this)}update(yt){if(!yt)return!1;let M=!1;for(const Be of Y2)yt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==yt[Be]&&(Be=="atimeMs"&&this.flags&xi.NoAtime||(this[Be]=yt[Be],M=!0)));return yt.attributes&&(this.attributes=yt.attributes,M=!0),M&&(this.ctimeMs=Date.now()),M}};return BC(E,"Inode"),(()=>{const yt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=gn).uint32.bind(e)],I=[(t=gn).uint32.bind(t)],K=[(n=gn).uint32.bind(n)],W=[(r=gn).uint16.bind(r)],ae=[(a=gn).uint32.bind(a)],se=[(i=gn).uint32.bind(i)],Y=[(o=gn).uint32.bind(o)],Ee=[(s=gn).float64.bind(s)],Re=[(u=gn).float64.bind(u)],it=[(c=gn).float64.bind(c)],z=[(f=gn).float64.bind(f)],ce=[(h=gn).uint32.bind(h)],_e=[(m=gn).uint32.bind(m)],Ve=[(g=gn).uint32.bind(g)],Et=[(w=gn).uint16.bind(w)],zt=[(v=gn).uint32.bind(v)],H=[gn.uint8(48)],ve=[jm(Zu)],Cr(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:M=>"data"in M,get:M=>M.data,set:(M,Be)=>{M.data=Be}},metadata:yt},A,O),Cr(null,null,I,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:M=>"__data_old"in M,get:M=>M.__data_old,set:(M,Be)=>{M.__data_old=Be}},metadata:yt},D,B),Cr(null,null,K,{kind:"field",name:"size",static:!1,private:!1,access:{has:M=>"size"in M,get:M=>M.size,set:(M,Be)=>{M.size=Be}},metadata:yt},Q,F),Cr(null,null,W,{kind:"field",name:"mode",static:!1,private:!1,access:{has:M=>"mode"in M,get:M=>M.mode,set:(M,Be)=>{M.mode=Be}},metadata:yt},U,he),Cr(null,null,ae,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:M=>"nlink"in M,get:M=>M.nlink,set:(M,Be)=>{M.nlink=Be}},metadata:yt},re,ee),Cr(null,null,se,{kind:"field",name:"uid",static:!1,private:!1,access:{has:M=>"uid"in M,get:M=>M.uid,set:(M,Be)=>{M.uid=Be}},metadata:yt},V,X),Cr(null,null,Y,{kind:"field",name:"gid",static:!1,private:!1,access:{has:M=>"gid"in M,get:M=>M.gid,set:(M,Be)=>{M.gid=Be}},metadata:yt},ne,be),Cr(null,null,Ee,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:M=>"atimeMs"in M,get:M=>M.atimeMs,set:(M,Be)=>{M.atimeMs=Be}},metadata:yt},De,Pe),Cr(null,null,Re,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:M=>"birthtimeMs"in M,get:M=>M.birthtimeMs,set:(M,Be)=>{M.birthtimeMs=Be}},metadata:yt},Te,He),Cr(null,null,it,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:M=>"mtimeMs"in M,get:M=>M.mtimeMs,set:(M,Be)=>{M.mtimeMs=Be}},metadata:yt},Ie,Ae),Cr(null,null,z,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:M=>"ctimeMs"in M,get:M=>M.ctimeMs,set:(M,Be)=>{M.ctimeMs=Be}},metadata:yt},ke,Ne),Cr(null,null,ce,{kind:"field",name:"ino",static:!1,private:!1,access:{has:M=>"ino"in M,get:M=>M.ino,set:(M,Be)=>{M.ino=Be}},metadata:yt},ie,J),Cr(null,null,_e,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:M=>"__ino_old"in M,get:M=>M.__ino_old,set:(M,Be)=>{M.__ino_old=Be}},metadata:yt},Le,xe),Cr(null,null,Ve,{kind:"field",name:"flags",static:!1,private:!1,access:{has:M=>"flags"in M,get:M=>M.flags,set:(M,Be)=>{M.flags=Be}},metadata:yt},xt,ht),Cr(null,null,Et,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:M=>"__after_flags"in M,get:M=>M.__after_flags,set:(M,Be)=>{M.__after_flags=Be}},metadata:yt},Lt,Tt),Cr(null,null,zt,{kind:"field",name:"version",static:!1,private:!1,access:{has:M=>"version"in M,get:M=>M.version,set:(M,Be)=>{M.version=Be}},metadata:yt},ge,N),Cr(null,null,H,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:M=>"__padding"in M,get:M=>M.__padding,set:(M,Be)=>{M.__padding=Be}},metadata:yt},fe,Oe),Cr(null,null,ve,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:M=>"attributes"in M,get:M=>M.attributes,set:(M,Be)=>{M.attributes=Be}},metadata:yt},Ce,le),Cr(null,x={value:E},_,{kind:"class",name:E.name,metadata:yt},null,S),ct=E=x.value,yt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:yt}),hn(E,S)})(),ct=E})();function CY(e){return(e.mode&yr)===zo}function Ko(e){return(e.mode&yr)===aa}function th(e){return(e.mode&yr)===Hl}function kY(e){return(e.mode&yr)===wd}function Mm(e){return(e.mode&yr)===_d}function Pm(e){return(e.mode&yr)===xd}function AY(e){return(e.mode&yr)===Sd}function ir(e,t,n){const r=(e==null?void 0:e.credentials)||es.credentials;if(th(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&oj&&(a|=ha),t.mode&sj&&(a|=Gr),t.mode&lj&&(a|=mb)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&uj&&(a|=ha),t.mode&cj&&(a|=Gr),t.mode&dj&&(a|=mb)),t.mode&fj&&(a|=ha),t.mode&hj&&(a|=Gr),t.mode&pj&&(a|=mb),(a&n)===n}const zN=1;class Lb extends Map{constructor(){super(...arguments),this.maxSize=ui}toJSON(){return{version:zN,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*jr(ra);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&yr)!=aa)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())Yn(a)==t&&a!=t&&(r[eh(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&yr)!=aa)continue;const a={};for(const i of this.keys())Yn(i)==n&&i!=n&&(a[eh(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=zN)throw new Ue(st.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=K2(1,ui)),r=="/"&&(a.ino=0),this.set(r,new ra(a));return this}static parse(t){if(!DZ(t))throw new Ue(st.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new Lb;return r.fromJSON(n),r}}const Ox=4096;let zC=class X2{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===X2.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===X2.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:o=a}=n;for(let s=i;s<o;s+=Ox){const u=s+Ox>o?o-s:Ox,c=new Uint8Array(u);await this.read(t,c,s,s+u).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,o)=>{let s=!1;const u=f=>{s=!0,o.error(f)},{size:c}=await this.stat(t);await this.write(t,i,a).catch(u),!s&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,a)}).catch(u))}})}};function oi(e){return JSON.parse(IC(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function oo(e){return ed(JSON.stringify(e))}function hc(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(st.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function $b(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(st.EINVAL,"Invalid time.")}}function ln(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(st.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(st.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(st.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Pl(e)}function Rl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:hc("mode"in e?e==null?void 0:e.mode:null,r)}}class TY{constructor(t,n,r,a){Ha(this,"id");Ha(this,"_size");Ha(this,"options");Ha(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,o)=>i.start-o.start),r.ranges=r.ranges.reduce((i,o)=>(!i.length||i.at(-1).end<o.start?i.push(o):i.at(-1).end=Math.max(i.at(-1).end,o.end),i),[]),r.data=Om(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const o of i.ranges)if(!(o.end<=t)){if(o.start>=n)break;r.push({start:Math.max(t,o.start),end:Math.min(n,o.end)})}}r.sort((i,o)=>i.start-o.start);const a=[];for(const i of r){const o=a.at(-1);o&&i.start<=o.end?o.end=Math.max(o.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=Om(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((s,u)=>s.start-u.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},o=this.regions.findIndex(s=>s.offset>n);return o==-1?this.regions.push(i):this.regions.splice(o,0,i),this.collect(),this}}var Dx,jx,Mx;(Dx=Promise.withResolvers)!==null&&Dx!==void 0||(Promise.withResolvers=(Ka("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(jx=Symbol.dispose)!==null&&jx!==void 0||(Symbol.dispose=(Ka("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(Mx=Symbol.asyncDispose)!==null&&Mx!==void 0||(Symbol.asyncDispose=(Ka("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class bj{constructor(t){this.store=t}}class RY extends bj{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class J2 extends bj{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new TY(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const o=i.missing(n,r);for(const{start:u,end:c}of o)this.async(this.get(t,u,c));if(o.length)throw _i(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const s=i.regionAt(n);if(!s){Ka("Missing cache region for "+t);return}return s.data.subarray(n-s.offset,r-s.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class NY{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof J2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,await this.raw.get(t,u.start,u.end),u.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof J2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,this.raw.getSync(t,u.start,u.end),u.start)}}}var Sr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Er=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class vj extends zC{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const o=nj(t,a);if(o.startsWith(".."))continue;let s=tr(n,o);s.endsWith("/")&&(s=s.slice(0,-1)),r.push({oldKey:a,newKey:s,ino:i})}for(const{oldKey:a,newKey:i,ino:o}of r){this._ids.delete(a),this._ids.set(i,o);const s=this._paths.get(o);if(!s){Ka("Missing paths in table for ino "+o);continue}s.delete(a),s.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,mm(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Sr(n,this.transaction(),!0),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),await r.set(o.ino,Pa(o)),a.has(i)&&await r.set(o.data,oo(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Er(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Sr(n,this.transaction(),!1),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),r.setSync(o.ino,Pa(o)),a.has(i)&&r.setSync(o.data,oo(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Er(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Lb,a=Sr(n,this.transaction(),!0),i=[["/",0]],o=MN(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new ra(await a.get(u));if(r.set(s,c),c.mode&aa){const f=oi((t=await a.get(c.data))!==null&&t!==void 0?t:ur(Ue.With("ENODATA",s)));for(const[h,m]of Object.entries(f))i.push([tr(s,h),m])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Er(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Lb,a=Sr(n,this.transaction(),!1),i=[["/",0]],o=MN(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new ra(a.getSync(u));if(r.set(s,c),c.mode&aa){const f=oi((t=a.getSync(c.data))!==null&&t!==void 0?t:ur(Ue.With("ENODATA",s)));for(const[h,m]of Object.entries(f))i.push([tr(s,h),m])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{Er(n)}}async rename(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Sr(o,this.transaction(),!0),u=Ss(t),c=Ss(n),f=await this.findInode(s,u.dir,"rename"),h=oi((r=await s.get(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const m=h[u.base];if(m!=this._ids.get(t)&&_i(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(st.EBUSY,u.dir);const g=c.dir==u.dir,w=g?f:await this.findInode(s,c.dir,"rename"),v=g?h:oi((a=await s.get(w.data))!==null&&a!==void 0?a:ur(Ue.With("ENODATA",c.dir,"rename")));if(v[c.base]){const _=new ra((i=await s.get(v[c.base]))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");await s.remove(_.data),await s.remove(v[c.base])}v[c.base]=m,await s.set(f.data,oo(h)),await s.set(w.data,oo(v)),await s.commit(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{const s=Er(o);s&&await s}}renameSync(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Sr(o,this.transaction(),!1),u=Ss(t),c=Ss(n),f=this.findInodeSync(s,u.dir,"rename"),h=oi((r=s.getSync(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const m=h[u.base];if(m!=this._ids.get(t)&&_i(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(st.EBUSY,u.dir);const g=c.dir===u.dir,w=g?f:this.findInodeSync(s,c.dir,"rename"),v=g?h:oi((a=s.getSync(w.data))!==null&&a!==void 0?a:ur(Ue.With("ENODATA",c.dir,"rename")));if(v[c.base]){const _=new ra((i=s.getSync(v[c.base]))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");s.removeSync(_.data),s.removeSync(v[c.base])}v[c.base]=m,s.setSync(f.data,oo(h)),s.setSync(w.data,oo(v)),s.commitSync(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{Er(o)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Sr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Er(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Sr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Er(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Sr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Pa(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Er(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Sr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Pa(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Er(r)}}async createFile(t,n){return n.mode|=zo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=zo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=aa,await this.commitNew(t,n,ed("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=aa,this.commitNewSync(t,n,ed("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Sr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(oi((n=await a.get(i.data))!==null&&n!==void 0?n:ur(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Er(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Sr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(oi((n=a.getSync(i.data))!==null&&n!==void 0?n:ur(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Er(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Sr(a,this.transaction(),!0),o=await this.findInode(i,t,"sync");n&&await i.set(o.data,n),o.update(r)&&(this._add(o.ino,t),await i.set(o.ino,Pa(o))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Er(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Sr(a,this.transaction(),!1),o=this.findInodeSync(i,t,"sync");n&&i.setSync(o.data,n),o.update(r)&&(this._add(o.ino,t),i.setSync(o.ino,Pa(o))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Er(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Sr(a,this.transaction(),!0),o=Yn(n),s=await this.findInode(i,o,"link"),u=oi((r=await i.get(s.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",o,"link"))),c=await this.findInode(i,t,"link");c.nlink++,u[eh(n)]=c.ino,this._add(c.ino,n),await i.set(c.ino,Pa(c)),await i.set(s.data,oo(u)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Er(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Sr(a,this.transaction(),!1),o=Yn(n),s=this.findInodeSync(i,o,"link"),u=oi((r=i.getSync(s.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",o,"link"))),c=this.findInodeSync(i,t,"link");c.nlink++,u[eh(n)]=c.ino,this._add(c.ino,n),i.setSync(c.ino,Pa(c)),i.setSync(s.data,oo(u)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Er(a)}}async read(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Sr(o,this.transaction(),!0),u=await this.findInode(s,t,"read");if(u.size==0)return;const c=(i=await s.get(u.data,r,a))!==null&&i!==void 0?i:ur(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&_i(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{const s=Er(o);s&&await s}}readSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Sr(o,this.transaction(),!1),u=this.findInodeSync(s,t,"read");if(u.size==0)return;const c=(i=s.getSync(u.data,r,a))!==null&&i!==void 0?i:ur(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&_i(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{Er(o)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Sr(i,this.transaction(),!0),s=await this.findInode(o,t,"write");let u=n;o.flag("partial")||(u=Om((a=await o.get(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),await o.set(s.data,u,r),this._add(s.ino,t),await o.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Er(i);o&&await o}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Sr(i,this.transaction(),!1),s=this.findInodeSync(o,t,"write");let u=n;o.flag("partial")||(u=Om((a=o.getSync(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),o.setSync(s.data,u,r),this._add(s.ino,t),o.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Er(i)}}transaction(){return new NY(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Sr(t,this.transaction(),!0);if(await n.get(Bi))return;const r=new ra({ino:Bi,data:1,mode:511|aa});await n.set(r.data,ed("{}")),this._add(Bi,"/"),await n.set(Bi,Pa(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Er(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Sr(t,this.transaction(),!1);if(n.getSync(Bi))return;const r=new ra({ino:Bi,data:1,mode:511|aa});n.setSync(r.data,ed("{}")),this._add(Bi,"/"),n.setSync(Bi,Pa(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Er(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Ka("Attempted to populate tables after initialization");return}mm("Populating tables with existing store metadata");const n=Sr(t,this.transaction(),!0),r=await n.get(Bi);if(!r){PC("Store does not have a root inode");const s=new ra({ino:Bi,data:1,mode:511|aa});await n.set(s.data,ed("{}")),this._add(Bi,"/"),await n.set(Bi,Pa(s)),await n.commit();return}if(r.length<jr(ra)){hw("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const o=[["/",Bi]];for(;o.length>0;){i++;const[s,u]=o.shift();this._add(u,s);const c=await n.get(u);if(!c){Ka("Store is missing data for inode: "+u);continue}if(c.length<jr(ra)){Ka(`Invalid inode size for ino ${u}: ${c.length}`);continue}const f=new ra(c);if((f.mode&aa)!=aa||a.has(u))continue;a.add(u);const h=await n.get(f.data);if(!h){Ka("Store is missing directory data: "+f.data);continue}const m=oi(h);for(const[g,w]of Object.entries(m))o.push([tr(s,g),w])}mm(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Er(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ra((a=await t.get(i))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ra((a=t.getSync(i))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>ui)throw _i(new Ue(st.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=Sr(o,this.transaction(),!0),{dir:u,base:c}=Ss(t),f=await this.findInode(s,u,a),h=oi((i=await s.get(f.data))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new ra({...n,ino:m,data:m+1,size:r.byteLength});return await s.set(g.ino,Pa(g)),await s.set(g.data,r),h[c]=g.ino,await s.set(f.data,oo(h)),await s.commit(),g}catch(s){o.error=s,o.hasError=!0}finally{const s=Er(o);s&&await s}}commitNewSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=Sr(o,this.transaction(),!1),{dir:u,base:c}=Ss(t),f=this.findInodeSync(s,u,a),h=oi((i=s.getSync(f.data))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new ra({...n,ino:m,data:m+1,size:r.byteLength});return s.setSync(g.ino,Pa(g)),s.setSync(g.data,r),h[c]=g.ino,s.setSync(f.data,oo(h)),s.commitSync(),g}catch(s){o.error=s,o.hasError=!0}finally{Er(o)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Sr(i,this.transaction(),!0),{dir:u,base:c}=Ss(t),f=await this.findInode(s,u,o),h=oi((r=await s.get(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",u,o)));if(!h[c])throw Ue.With("ENOENT",t,o);const m=h[c],g=new ra((a=await s.get(m))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Ko(g))throw Ue.With("EISDIR",t,o);await s.set(f.data,oo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await s.set(g.ino,Pa(g))):(await s.remove(g.data),await s.remove(m),this._remove(m)),await s.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Er(i);o&&await o}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Sr(i,this.transaction(),!1),{dir:u,base:c}=Ss(t),f=this.findInodeSync(s,u,o),h=oi((r=s.getSync(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",u,o))),m=h[c];if(!m)throw Ue.With("ENOENT",t,o);const g=new ra((a=s.getSync(m))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Ko(g))throw Ue.With("EISDIR",t,o);s.setSync(f.data,oo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),s.setSync(g.ino,Pa(g))):(s.removeSync(g.data),s.removeSync(m),this._remove(m)),s.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Er(i)}}}class IY extends RY{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class OY extends Map{constructor(t=ui,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new IY(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const DY={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new vj(new OY(e,t));return n.checkRootSync(),n}},jY=DY;let pa=!0;var UC={},bw={};bw.byteLength=FY;bw.toByteArray=$Y;bw.fromByteArray=UY;var ks=[],fo=[],MY=typeof Uint8Array<"u"?Uint8Array:Array,Px="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ef=0,PY=Px.length;Ef<PY;++Ef)ks[Ef]=Px[Ef],fo[Px.charCodeAt(Ef)]=Ef;fo[45]=62;fo[95]=63;function wj(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function FY(e){var t=wj(e),n=t[0],r=t[1];return(n+r)*3/4-r}function LY(e,t,n){return(t+n)*3/4-n}function $Y(e){var t,n=wj(e),r=n[0],a=n[1],i=new MY(LY(e,r,a)),o=0,s=a>0?r-4:r,u;for(u=0;u<s;u+=4)t=fo[e.charCodeAt(u)]<<18|fo[e.charCodeAt(u+1)]<<12|fo[e.charCodeAt(u+2)]<<6|fo[e.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=fo[e.charCodeAt(u)]<<2|fo[e.charCodeAt(u+1)]>>4,i[o++]=t&255),a===1&&(t=fo[e.charCodeAt(u)]<<10|fo[e.charCodeAt(u+1)]<<4|fo[e.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function BY(e){return ks[e>>18&63]+ks[e>>12&63]+ks[e>>6&63]+ks[e&63]}function zY(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(BY(r));return a.join("")}function UY(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,s=n-r;o<s;o+=i)a.push(zY(e,o,o+i>s?s:o+i));return r===1?(t=e[n-1],a.push(ks[t>>2]+ks[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(ks[t>>10]+ks[t>>4&63]+ks[t<<2&63]+"=")),a.join("")}var qC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */qC.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,u=(1<<s)-1,c=u>>1,f=-7,h=n?a-1:0,m=n?-1:1,g=e[t+h];for(h+=m,i=g&(1<<-f)-1,g>>=-f,f+=s;f>0;i=i*256+e[t+h],h+=m,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;f>0;o=o*256+e[t+h],h+=m,f-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(g?-1:1)*o*Math.pow(2,i-r)};qC.write=function(e,t,n,r,a,i){var o,s,u,c=i*8-a-1,f=(1<<c)-1,h=f>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,w=r?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=m/u:t+=m*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=f?(s=0,o=f):o+h>=1?(s=(t*u-1)*Math.pow(2,a),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+g]=s&255,g+=w,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[n+g]=o&255,g+=w,o/=256,c-=8);e[n+g-w]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=bw,n=qC,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;f.TYPED_ARRAY_SUPPORT=u(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const ge=new i(1),N={foo:function(){return 42}};return Object.setPrototypeOf(N,i.prototype),Object.setPrototypeOf(ge,N),ge.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function c(ge){if(ge>a)throw new RangeError('The value "'+ge+'" is invalid for option "size"');const N=new i(ge);return Object.setPrototypeOf(N,f.prototype),N}function f(ge,N,H){if(typeof ge=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(ge)}return h(ge,N,H)}f.poolSize=8192;function h(ge,N,H){if(typeof ge=="string")return v(ge,N);if(o.isView(ge))return x(ge);if(ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge);if(ht(ge,o)||ge&&ht(ge.buffer,o)||typeof s<"u"&&(ht(ge,s)||ge&&ht(ge.buffer,s)))return S(ge,N,H);if(typeof ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const fe=ge.valueOf&&ge.valueOf();if(fe!=null&&fe!==ge)return f.from(fe,N,H);const Oe=E(ge);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ge[Symbol.toPrimitive]=="function")return f.from(ge[Symbol.toPrimitive]("string"),N,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge)}f.from=function(ge,N,H){return h(ge,N,H)},Object.setPrototypeOf(f.prototype,i.prototype),Object.setPrototypeOf(f,i);function m(ge){if(typeof ge!="number")throw new TypeError('"size" argument must be of type number');if(ge<0)throw new RangeError('The value "'+ge+'" is invalid for option "size"')}function g(ge,N,H){return m(ge),ge<=0?c(ge):N!==void 0?typeof H=="string"?c(ge).fill(N,H):c(ge).fill(N):c(ge)}f.alloc=function(ge,N,H){return g(ge,N,H)};function w(ge){return m(ge),c(ge<0?0:C(ge)|0)}f.allocUnsafe=function(ge){return w(ge)},f.allocUnsafeSlow=function(ge){return w(ge)};function v(ge,N){if((typeof N!="string"||N==="")&&(N="utf8"),!f.isEncoding(N))throw new TypeError("Unknown encoding: "+N);const H=O(ge,N)|0;let fe=c(H);const Oe=fe.write(ge,N);return Oe!==H&&(fe=fe.slice(0,Oe)),fe}function _(ge){const N=ge.length<0?0:C(ge.length)|0,H=c(N);for(let fe=0;fe<N;fe+=1)H[fe]=ge[fe]&255;return H}function x(ge){if(ht(ge,i)){const N=new i(ge);return S(N.buffer,N.byteOffset,N.byteLength)}return _(ge)}function S(ge,N,H){if(N<0||ge.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<N+(H||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return N===void 0&&H===void 0?fe=new i(ge):H===void 0?fe=new i(ge,N):fe=new i(ge,N,H),Object.setPrototypeOf(fe,f.prototype),fe}function E(ge){if(f.isBuffer(ge)){const N=C(ge.length)|0,H=c(N);return H.length===0||ge.copy(H,0,0,N),H}if(ge.length!==void 0)return typeof ge.length!="number"||Et(ge.length)?c(0):_(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return _(ge.data)}function C(ge){if(ge>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ge|0}function A(ge){return+ge!=ge&&(ge=0),f.alloc(+ge)}f.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==f.prototype},f.compare=function(N,H){if(ht(N,i)&&(N=f.from(N,N.offset,N.byteLength)),ht(H,i)&&(H=f.from(H,H.offset,H.byteLength)),!f.isBuffer(N)||!f.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===H)return 0;let fe=N.length,Oe=H.length;for(let ve=0,Ce=Math.min(fe,Oe);ve<Ce;++ve)if(N[ve]!==H[ve]){fe=N[ve],Oe=H[ve];break}return fe<Oe?-1:Oe<fe?1:0},f.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(N,H){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return f.alloc(0);let fe;if(H===void 0)for(H=0,fe=0;fe<N.length;++fe)H+=N[fe].length;const Oe=f.allocUnsafe(H);let ve=0;for(fe=0;fe<N.length;++fe){let Ce=N[fe];if(ht(Ce,i))ve+Ce.length>Oe.length?(f.isBuffer(Ce)||(Ce=f.from(Ce)),Ce.copy(Oe,ve)):i.prototype.set.call(Oe,Ce,ve);else if(f.isBuffer(Ce))Ce.copy(Oe,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=Ce.length}return Oe};function O(ge,N){if(f.isBuffer(ge))return ge.length;if(o.isView(ge)||ht(ge,o))return ge.byteLength;if(typeof ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ge);const H=ge.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&H===0)return 0;let Oe=!1;for(;;)switch(N){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return _e(ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H*2;case"hex":return H>>>1;case"base64":return Ve(ge).length;default:if(Oe)return fe?-1:_e(ge).length;N=(""+N).toLowerCase(),Oe=!0}}f.byteLength=O;function I(ge,N,H){let fe=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((H===void 0||H>this.length)&&(H=this.length),H<=0)||(H>>>=0,N>>>=0,H<=N))return"";for(ge||(ge="utf8");;)switch(ge){case"hex":return Y(this,N,H);case"utf8":case"utf-8":return re(this,N,H);case"ascii":return V(this,N,H);case"latin1":case"binary":return X(this,N,H);case"base64":return ae(this,N,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,N,H);default:if(fe)throw new TypeError("Unknown encoding: "+ge);ge=(ge+"").toLowerCase(),fe=!0}}f.prototype._isBuffer=!0;function D(ge,N,H){const fe=ge[N];ge[N]=ge[H],ge[H]=fe}f.prototype.swap16=function(){const N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let H=0;H<N;H+=2)D(this,H,H+1);return this},f.prototype.swap32=function(){const N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let H=0;H<N;H+=4)D(this,H,H+3),D(this,H+1,H+2);return this},f.prototype.swap64=function(){const N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let H=0;H<N;H+=8)D(this,H,H+7),D(this,H+1,H+6),D(this,H+2,H+5),D(this,H+3,H+4);return this},f.prototype.toString=function(){const N=this.length;return N===0?"":arguments.length===0?re(this,0,N):I.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(N){if(!f.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:f.compare(this,N)===0},f.prototype.inspect=function(){let N="";const H=e.INSPECT_MAX_BYTES;return N=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(N+=" ... "),"<Buffer "+N+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(N,H,fe,Oe,ve){if(ht(N,i)&&(N=f.from(N,N.offset,N.byteLength)),!f.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(H===void 0&&(H=0),fe===void 0&&(fe=N?N.length:0),Oe===void 0&&(Oe=0),ve===void 0&&(ve=this.length),H<0||fe>N.length||Oe<0||ve>this.length)throw new RangeError("out of range index");if(Oe>=ve&&H>=fe)return 0;if(Oe>=ve)return-1;if(H>=fe)return 1;if(H>>>=0,fe>>>=0,Oe>>>=0,ve>>>=0,this===N)return 0;let Ce=ve-Oe,le=fe-H;const ct=Math.min(Ce,le),yt=this.slice(Oe,ve),M=N.slice(H,fe);for(let Be=0;Be<ct;++Be)if(yt[Be]!==M[Be]){Ce=yt[Be],le=M[Be];break}return Ce<le?-1:le<Ce?1:0};function B(ge,N,H,fe,Oe){if(ge.length===0)return-1;if(typeof H=="string"?(fe=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),H=+H,Et(H)&&(H=Oe?0:ge.length-1),H<0&&(H=ge.length+H),H>=ge.length){if(Oe)return-1;H=ge.length-1}else if(H<0)if(Oe)H=0;else return-1;if(typeof N=="string"&&(N=f.from(N,fe)),f.isBuffer(N))return N.length===0?-1:K(ge,N,H,fe,Oe);if(typeof N=="number")return N=N&255,typeof i.prototype.indexOf=="function"?Oe?i.prototype.indexOf.call(ge,N,H):i.prototype.lastIndexOf.call(ge,N,H):K(ge,[N],H,fe,Oe);throw new TypeError("val must be string, number or Buffer")}function K(ge,N,H,fe,Oe){let ve=1,Ce=ge.length,le=N.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(ge.length<2||N.length<2)return-1;ve=2,Ce/=2,le/=2,H/=2}function ct(M,Be){return ve===1?M[Be]:M.readUInt16BE(Be*ve)}let yt;if(Oe){let M=-1;for(yt=H;yt<Ce;yt++)if(ct(ge,yt)===ct(N,M===-1?0:yt-M)){if(M===-1&&(M=yt),yt-M+1===le)return M*ve}else M!==-1&&(yt-=yt-M),M=-1}else for(H+le>Ce&&(H=Ce-le),yt=H;yt>=0;yt--){let M=!0;for(let Be=0;Be<le;Be++)if(ct(ge,yt+Be)!==ct(N,Be)){M=!1;break}if(M)return yt}return-1}f.prototype.includes=function(N,H,fe){return this.indexOf(N,H,fe)!==-1},f.prototype.indexOf=function(N,H,fe){return B(this,N,H,fe,!0)},f.prototype.lastIndexOf=function(N,H,fe){return B(this,N,H,fe,!1)};function Q(ge,N,H,fe){H=Number(H)||0;const Oe=ge.length-H;fe?(fe=Number(fe),fe>Oe&&(fe=Oe)):fe=Oe;const ve=N.length;fe>ve/2&&(fe=ve/2);let Ce;for(Ce=0;Ce<fe;++Ce){const le=parseInt(N.substr(Ce*2,2),16);if(Et(le))return Ce;ge[H+Ce]=le}return Ce}function F(ge,N,H,fe){return xt(_e(N,ge.length-H),ge,H,fe)}function W(ge,N,H,fe){return xt(Le(N),ge,H,fe)}function U(ge,N,H,fe){return xt(Ve(N),ge,H,fe)}function he(ge,N,H,fe){return xt(xe(N,ge.length-H),ge,H,fe)}f.prototype.write=function(N,H,fe,Oe){if(H===void 0)Oe="utf8",fe=this.length,H=0;else if(fe===void 0&&typeof H=="string")Oe=H,fe=this.length,H=0;else if(isFinite(H))H=H>>>0,isFinite(fe)?(fe=fe>>>0,Oe===void 0&&(Oe="utf8")):(Oe=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ve=this.length-H;if((fe===void 0||fe>ve)&&(fe=ve),N.length>0&&(fe<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let Ce=!1;for(;;)switch(Oe){case"hex":return Q(this,N,H,fe);case"utf8":case"utf-8":return F(this,N,H,fe);case"ascii":case"latin1":case"binary":return W(this,N,H,fe);case"base64":return U(this,N,H,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,N,H,fe);default:if(Ce)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),Ce=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(ge,N,H){return N===0&&H===ge.length?t.fromByteArray(ge):t.fromByteArray(ge.slice(N,H))}function re(ge,N,H){H=Math.min(ge.length,H);const fe=[];let Oe=N;for(;Oe<H;){const ve=ge[Oe];let Ce=null,le=ve>239?4:ve>223?3:ve>191?2:1;if(Oe+le<=H){let ct,yt,M,Be;switch(le){case 1:ve<128&&(Ce=ve);break;case 2:ct=ge[Oe+1],(ct&192)===128&&(Be=(ve&31)<<6|ct&63,Be>127&&(Ce=Be));break;case 3:ct=ge[Oe+1],yt=ge[Oe+2],(ct&192)===128&&(yt&192)===128&&(Be=(ve&15)<<12|(ct&63)<<6|yt&63,Be>2047&&(Be<55296||Be>57343)&&(Ce=Be));break;case 4:ct=ge[Oe+1],yt=ge[Oe+2],M=ge[Oe+3],(ct&192)===128&&(yt&192)===128&&(M&192)===128&&(Be=(ve&15)<<18|(ct&63)<<12|(yt&63)<<6|M&63,Be>65535&&Be<1114112&&(Ce=Be))}}Ce===null?(Ce=65533,le=1):Ce>65535&&(Ce-=65536,fe.push(Ce>>>10&1023|55296),Ce=56320|Ce&1023),fe.push(Ce),Oe+=le}return se(fe)}const ee=4096;function se(ge){const N=ge.length;if(N<=ee)return String.fromCharCode.apply(String,ge);let H="",fe=0;for(;fe<N;)H+=String.fromCharCode.apply(String,ge.slice(fe,fe+=ee));return H}function V(ge,N,H){let fe="";H=Math.min(ge.length,H);for(let Oe=N;Oe<H;++Oe)fe+=String.fromCharCode(ge[Oe]&127);return fe}function X(ge,N,H){let fe="";H=Math.min(ge.length,H);for(let Oe=N;Oe<H;++Oe)fe+=String.fromCharCode(ge[Oe]);return fe}function Y(ge,N,H){const fe=ge.length;(!N||N<0)&&(N=0),(!H||H<0||H>fe)&&(H=fe);let Oe="";for(let ve=N;ve<H;++ve)Oe+=Lt[ge[ve]];return Oe}function ne(ge,N,H){const fe=ge.slice(N,H);let Oe="";for(let ve=0;ve<fe.length-1;ve+=2)Oe+=String.fromCharCode(fe[ve]+fe[ve+1]*256);return Oe}f.prototype.slice=function(N,H){const fe=this.length;N=~~N,H=H===void 0?fe:~~H,N<0?(N+=fe,N<0&&(N=0)):N>fe&&(N=fe),H<0?(H+=fe,H<0&&(H=0)):H>fe&&(H=fe),H<N&&(H=N);const Oe=this.subarray(N,H);return Object.setPrototypeOf(Oe,f.prototype),Oe};function be(ge,N,H){if(ge%1!==0||ge<0)throw new RangeError("offset is not uint");if(ge+N>H)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(N,H,fe){N=N>>>0,H=H>>>0,fe||be(N,H,this.length);let Oe=this[N],ve=1,Ce=0;for(;++Ce<H&&(ve*=256);)Oe+=this[N+Ce]*ve;return Oe},f.prototype.readUintBE=f.prototype.readUIntBE=function(N,H,fe){N=N>>>0,H=H>>>0,fe||be(N,H,this.length);let Oe=this[N+--H],ve=1;for(;H>0&&(ve*=256);)Oe+=this[N+--H]*ve;return Oe},f.prototype.readUint8=f.prototype.readUInt8=function(N,H){return N=N>>>0,H||be(N,1,this.length),this[N]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(N,H){return N=N>>>0,H||be(N,2,this.length),this[N]|this[N+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(N,H){return N=N>>>0,H||be(N,2,this.length),this[N]<<8|this[N+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(N,H){return N=N>>>0,H||be(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(N,H){return N=N>>>0,H||be(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},f.prototype.readBigUInt64LE=Tt(function(N){N=N>>>0,Ne(N,"offset");const H=this[N],fe=this[N+7];(H===void 0||fe===void 0)&&ce(N,this.length-8);const Oe=H+this[++N]*2**8+this[++N]*2**16+this[++N]*2**24,ve=this[++N]+this[++N]*2**8+this[++N]*2**16+fe*2**24;return BigInt(Oe)+(BigInt(ve)<<BigInt(32))}),f.prototype.readBigUInt64BE=Tt(function(N){N=N>>>0,Ne(N,"offset");const H=this[N],fe=this[N+7];(H===void 0||fe===void 0)&&ce(N,this.length-8);const Oe=H*2**24+this[++N]*2**16+this[++N]*2**8+this[++N],ve=this[++N]*2**24+this[++N]*2**16+this[++N]*2**8+fe;return(BigInt(Oe)<<BigInt(32))+BigInt(ve)}),f.prototype.readIntLE=function(N,H,fe){N=N>>>0,H=H>>>0,fe||be(N,H,this.length);let Oe=this[N],ve=1,Ce=0;for(;++Ce<H&&(ve*=256);)Oe+=this[N+Ce]*ve;return ve*=128,Oe>=ve&&(Oe-=Math.pow(2,8*H)),Oe},f.prototype.readIntBE=function(N,H,fe){N=N>>>0,H=H>>>0,fe||be(N,H,this.length);let Oe=H,ve=1,Ce=this[N+--Oe];for(;Oe>0&&(ve*=256);)Ce+=this[N+--Oe]*ve;return ve*=128,Ce>=ve&&(Ce-=Math.pow(2,8*H)),Ce},f.prototype.readInt8=function(N,H){return N=N>>>0,H||be(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},f.prototype.readInt16LE=function(N,H){N=N>>>0,H||be(N,2,this.length);const fe=this[N]|this[N+1]<<8;return fe&32768?fe|4294901760:fe},f.prototype.readInt16BE=function(N,H){N=N>>>0,H||be(N,2,this.length);const fe=this[N+1]|this[N]<<8;return fe&32768?fe|4294901760:fe},f.prototype.readInt32LE=function(N,H){return N=N>>>0,H||be(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},f.prototype.readInt32BE=function(N,H){return N=N>>>0,H||be(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},f.prototype.readBigInt64LE=Tt(function(N){N=N>>>0,Ne(N,"offset");const H=this[N],fe=this[N+7];(H===void 0||fe===void 0)&&ce(N,this.length-8);const Oe=this[N+4]+this[N+5]*2**8+this[N+6]*2**16+(fe<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(H+this[++N]*2**8+this[++N]*2**16+this[++N]*2**24)}),f.prototype.readBigInt64BE=Tt(function(N){N=N>>>0,Ne(N,"offset");const H=this[N],fe=this[N+7];(H===void 0||fe===void 0)&&ce(N,this.length-8);const Oe=(H<<24)+this[++N]*2**16+this[++N]*2**8+this[++N];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++N]*2**24+this[++N]*2**16+this[++N]*2**8+fe)}),f.prototype.readFloatLE=function(N,H){return N=N>>>0,H||be(N,4,this.length),n.read(this,N,!0,23,4)},f.prototype.readFloatBE=function(N,H){return N=N>>>0,H||be(N,4,this.length),n.read(this,N,!1,23,4)},f.prototype.readDoubleLE=function(N,H){return N=N>>>0,H||be(N,8,this.length),n.read(this,N,!0,52,8)},f.prototype.readDoubleBE=function(N,H){return N=N>>>0,H||be(N,8,this.length),n.read(this,N,!1,52,8)};function Ee(ge,N,H,fe,Oe,ve){if(!f.isBuffer(ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Oe||N<ve)throw new RangeError('"value" argument is out of bounds');if(H+fe>ge.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(N,H,fe,Oe){if(N=+N,H=H>>>0,fe=fe>>>0,!Oe){const le=Math.pow(2,8*fe)-1;Ee(this,N,H,fe,le,0)}let ve=1,Ce=0;for(this[H]=N&255;++Ce<fe&&(ve*=256);)this[H+Ce]=N/ve&255;return H+fe},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(N,H,fe,Oe){if(N=+N,H=H>>>0,fe=fe>>>0,!Oe){const le=Math.pow(2,8*fe)-1;Ee(this,N,H,fe,le,0)}let ve=fe-1,Ce=1;for(this[H+ve]=N&255;--ve>=0&&(Ce*=256);)this[H+ve]=N/Ce&255;return H+fe},f.prototype.writeUint8=f.prototype.writeUInt8=function(N,H,fe){return N=+N,H=H>>>0,fe||Ee(this,N,H,1,255,0),this[H]=N&255,H+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(N,H,fe){return N=+N,H=H>>>0,fe||Ee(this,N,H,2,65535,0),this[H]=N&255,this[H+1]=N>>>8,H+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(N,H,fe){return N=+N,H=H>>>0,fe||Ee(this,N,H,2,65535,0),this[H]=N>>>8,this[H+1]=N&255,H+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(N,H,fe){return N=+N,H=H>>>0,fe||Ee(this,N,H,4,4294967295,0),this[H+3]=N>>>24,this[H+2]=N>>>16,this[H+1]=N>>>8,this[H]=N&255,H+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(N,H,fe){return N=+N,H=H>>>0,fe||Ee(this,N,H,4,4294967295,0),this[H]=N>>>24,this[H+1]=N>>>16,this[H+2]=N>>>8,this[H+3]=N&255,H+4};function De(ge,N,H,fe,Oe){ke(N,fe,Oe,ge,H,7);let ve=Number(N&BigInt(4294967295));ge[H++]=ve,ve=ve>>8,ge[H++]=ve,ve=ve>>8,ge[H++]=ve,ve=ve>>8,ge[H++]=ve;let Ce=Number(N>>BigInt(32)&BigInt(4294967295));return ge[H++]=Ce,Ce=Ce>>8,ge[H++]=Ce,Ce=Ce>>8,ge[H++]=Ce,Ce=Ce>>8,ge[H++]=Ce,H}function Pe(ge,N,H,fe,Oe){ke(N,fe,Oe,ge,H,7);let ve=Number(N&BigInt(4294967295));ge[H+7]=ve,ve=ve>>8,ge[H+6]=ve,ve=ve>>8,ge[H+5]=ve,ve=ve>>8,ge[H+4]=ve;let Ce=Number(N>>BigInt(32)&BigInt(4294967295));return ge[H+3]=Ce,Ce=Ce>>8,ge[H+2]=Ce,Ce=Ce>>8,ge[H+1]=Ce,Ce=Ce>>8,ge[H]=Ce,H+8}f.prototype.writeBigUInt64LE=Tt(function(N,H=0){return De(this,N,H,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Tt(function(N,H=0){return Pe(this,N,H,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(N,H,fe,Oe){if(N=+N,H=H>>>0,!Oe){const ct=Math.pow(2,8*fe-1);Ee(this,N,H,fe,ct-1,-ct)}let ve=0,Ce=1,le=0;for(this[H]=N&255;++ve<fe&&(Ce*=256);)N<0&&le===0&&this[H+ve-1]!==0&&(le=1),this[H+ve]=(N/Ce>>0)-le&255;return H+fe},f.prototype.writeIntBE=function(N,H,fe,Oe){if(N=+N,H=H>>>0,!Oe){const ct=Math.pow(2,8*fe-1);Ee(this,N,H,fe,ct-1,-ct)}let ve=fe-1,Ce=1,le=0;for(this[H+ve]=N&255;--ve>=0&&(Ce*=256);)N<0&&le===0&&this[H+ve+1]!==0&&(le=1),this[H+ve]=(N/Ce>>0)-le&255;return H+fe},f.prototype.writeInt8=function(N,H,fe){return N=+N,H=H>>>0,fe||Ee(this,N,H,1,127,-128),N<0&&(N=255+N+1),this[H]=N&255,H+1},f.prototype.writeInt16LE=function(N,H,fe){return N=+N,H=H>>>0,fe||Ee(this,N,H,2,32767,-32768),this[H]=N&255,this[H+1]=N>>>8,H+2},f.prototype.writeInt16BE=function(N,H,fe){return N=+N,H=H>>>0,fe||Ee(this,N,H,2,32767,-32768),this[H]=N>>>8,this[H+1]=N&255,H+2},f.prototype.writeInt32LE=function(N,H,fe){return N=+N,H=H>>>0,fe||Ee(this,N,H,4,2147483647,-2147483648),this[H]=N&255,this[H+1]=N>>>8,this[H+2]=N>>>16,this[H+3]=N>>>24,H+4},f.prototype.writeInt32BE=function(N,H,fe){return N=+N,H=H>>>0,fe||Ee(this,N,H,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[H]=N>>>24,this[H+1]=N>>>16,this[H+2]=N>>>8,this[H+3]=N&255,H+4},f.prototype.writeBigInt64LE=Tt(function(N,H=0){return De(this,N,H,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Tt(function(N,H=0){return Pe(this,N,H,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(ge,N,H,fe,Oe,ve){if(H+fe>ge.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function Te(ge,N,H,fe,Oe){return N=+N,H=H>>>0,Oe||Re(ge,N,H,4),n.write(ge,N,H,fe,23,4),H+4}f.prototype.writeFloatLE=function(N,H,fe){return Te(this,N,H,!0,fe)},f.prototype.writeFloatBE=function(N,H,fe){return Te(this,N,H,!1,fe)};function He(ge,N,H,fe,Oe){return N=+N,H=H>>>0,Oe||Re(ge,N,H,8),n.write(ge,N,H,fe,52,8),H+8}f.prototype.writeDoubleLE=function(N,H,fe){return He(this,N,H,!0,fe)},f.prototype.writeDoubleBE=function(N,H,fe){return He(this,N,H,!1,fe)},f.prototype.copy=function(N,H,fe,Oe){if(!f.isBuffer(N))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!Oe&&Oe!==0&&(Oe=this.length),H>=N.length&&(H=N.length),H||(H=0),Oe>0&&Oe<fe&&(Oe=fe),Oe===fe||N.length===0||this.length===0)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),N.length-H<Oe-fe&&(Oe=N.length-H+fe);const ve=Oe-fe;return this===N&&typeof i.prototype.copyWithin=="function"?this.copyWithin(H,fe,Oe):i.prototype.set.call(N,this.subarray(fe,Oe),H),ve},f.prototype.fill=function(N,H,fe,Oe){if(typeof N=="string"){if(typeof H=="string"?(Oe=H,H=0,fe=this.length):typeof fe=="string"&&(Oe=fe,fe=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!f.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(N.length===1){const Ce=N.charCodeAt(0);(Oe==="utf8"&&Ce<128||Oe==="latin1")&&(N=Ce)}}else typeof N=="number"?N=N&255:typeof N=="boolean"&&(N=Number(N));if(H<0||this.length<H||this.length<fe)throw new RangeError("Out of range index");if(fe<=H)return this;H=H>>>0,fe=fe===void 0?this.length:fe>>>0,N||(N=0);let ve;if(typeof N=="number")for(ve=H;ve<fe;++ve)this[ve]=N;else{const Ce=f.isBuffer(N)?N:f.from(N,Oe),le=Ce.length;if(le===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ve=0;ve<fe-H;++ve)this[ve+H]=Ce[ve%le]}return this};const it={};function Ie(ge,N,H){it[ge]=class extends H{constructor(){super(),Object.defineProperty(this,"message",{value:N.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ge}]`,this.stack,delete this.name}get code(){return ge}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${ge}]: ${this.message}`}}}Ie("ERR_BUFFER_OUT_OF_BOUNDS",function(ge){return ge?`${ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ie("ERR_INVALID_ARG_TYPE",function(ge,N){return`The "${ge}" argument must be of type number. Received type ${typeof N}`},TypeError),Ie("ERR_OUT_OF_RANGE",function(ge,N,H){let fe=`The value of "${ge}" is out of range.`,Oe=H;return Number.isInteger(H)&&Math.abs(H)>2**32?Oe=Ae(String(H)):typeof H=="bigint"&&(Oe=String(H),(H>BigInt(2)**BigInt(32)||H<-(BigInt(2)**BigInt(32)))&&(Oe=Ae(Oe)),Oe+="n"),fe+=` It must be ${N}. Received ${Oe}`,fe},RangeError);function Ae(ge){let N="",H=ge.length;const fe=ge[0]==="-"?1:0;for(;H>=fe+4;H-=3)N=`_${ge.slice(H-3,H)}${N}`;return`${ge.slice(0,H)}${N}`}function z(ge,N,H){Ne(N,"offset"),(ge[N]===void 0||ge[N+H]===void 0)&&ce(N,ge.length-(H+1))}function ke(ge,N,H,fe,Oe,ve){if(ge>H||ge<N){const Ce=typeof N=="bigint"?"n":"";let le;throw N===0||N===BigInt(0)?le=`>= 0${Ce} and < 2${Ce} ** ${(ve+1)*8}${Ce}`:le=`>= -(2${Ce} ** ${(ve+1)*8-1}${Ce}) and < 2 ** ${(ve+1)*8-1}${Ce}`,new it.ERR_OUT_OF_RANGE("value",le,ge)}z(fe,Oe,ve)}function Ne(ge,N){if(typeof ge!="number")throw new it.ERR_INVALID_ARG_TYPE(N,"number",ge)}function ce(ge,N,H){throw Math.floor(ge)!==ge?(Ne(ge,H),new it.ERR_OUT_OF_RANGE("offset","an integer",ge)):N<0?new it.ERR_BUFFER_OUT_OF_BOUNDS:new it.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${N}`,ge)}const ie=/[^+/0-9A-Za-z-_]/g;function J(ge){if(ge=ge.split("=")[0],ge=ge.trim().replace(ie,""),ge.length<2)return"";for(;ge.length%4!==0;)ge=ge+"=";return ge}function _e(ge,N){N=N||1/0;let H;const fe=ge.length;let Oe=null;const ve=[];for(let Ce=0;Ce<fe;++Ce){if(H=ge.charCodeAt(Ce),H>55295&&H<57344){if(!Oe){if(H>56319){(N-=3)>-1&&ve.push(239,191,189);continue}else if(Ce+1===fe){(N-=3)>-1&&ve.push(239,191,189);continue}Oe=H;continue}if(H<56320){(N-=3)>-1&&ve.push(239,191,189),Oe=H;continue}H=(Oe-55296<<10|H-56320)+65536}else Oe&&(N-=3)>-1&&ve.push(239,191,189);if(Oe=null,H<128){if((N-=1)<0)break;ve.push(H)}else if(H<2048){if((N-=2)<0)break;ve.push(H>>6|192,H&63|128)}else if(H<65536){if((N-=3)<0)break;ve.push(H>>12|224,H>>6&63|128,H&63|128)}else if(H<1114112){if((N-=4)<0)break;ve.push(H>>18|240,H>>12&63|128,H>>6&63|128,H&63|128)}else throw new Error("Invalid code point")}return ve}function Le(ge){const N=[];for(let H=0;H<ge.length;++H)N.push(ge.charCodeAt(H)&255);return N}function xe(ge,N){let H,fe,Oe;const ve=[];for(let Ce=0;Ce<ge.length&&!((N-=2)<0);++Ce)H=ge.charCodeAt(Ce),fe=H>>8,Oe=H%256,ve.push(Oe),ve.push(fe);return ve}function Ve(ge){return t.toByteArray(J(ge))}function xt(ge,N,H,fe){let Oe;for(Oe=0;Oe<fe&&!(Oe+H>=N.length||Oe>=ge.length);++Oe)N[Oe+H]=ge[Oe];return Oe}function ht(ge,N){return ge instanceof N||ge!=null&&ge.constructor!=null&&ge.constructor.name!=null&&ge.constructor.name===N.name}function Et(ge){return ge!==ge}const Lt=function(){const ge="0123456789abcdef",N=new Array(256);for(let H=0;H<16;++H){const fe=H*16;for(let Oe=0;Oe<16;++Oe)N[fe+Oe]=ge[H]+ge[Oe]}return N}();function Tt(ge){return typeof BigInt>"u"?zt:ge}function zt(){throw new Error("BigInt not supported")}})(UC);const Gt=UC.Buffer,Rr=UC.Buffer;class UN extends RC{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let s=this._buffer.substring(0,o);s.endsWith("\r")&&(s=s.substring(0,s.length-1)),this._buffer=this._buffer.substring(o+1),this.line=s,s.trim()&&!s.trim().match(/^\s*$/)&&this._history.at(-1)!=s&&(this._history.push(s),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",s)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;so(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;so(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);By(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);By(this.output,0),so(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,so(this.output,-a.length,0),so(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;so(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(so(this.output,-this._cursor,0),so(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);By(this.output,0),so(this.output,0,0),this.output.write(this._prompt+r),this.line=r,so(this.output,-r.length,0),so(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(By(this.output,0),so(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Ka("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Ka("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function qY(e,t,n,r){return"input"in e?new UN(e.input,e.output,e.completer,e.terminal):new UN(e,t,n,r)}function By(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function so(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Bb{get position(){return this.flag&ud?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,o){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=o,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&yw||this.inode.flags&xi.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Wa||this.flag&Tl))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&Wa||this.flag&Tl))throw new Ue(st.EPERM,"File not opened with a writeable mode");if(this.inode.flags&xi.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Pm(this.inode)&&!Mm(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,this.fs.writeSync(this.internalPath,o,a),this._isSync&&this.sync(),o.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Wa)throw new Ue(st.EPERM,"File not opened with a readable mode");this.inode.flags&xi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Pm(this.inode)&&!Mm(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>yr?-61441:yr)|t,(this._isSync||t>yr)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,yj(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&xi.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function zb(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:es.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function ei(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:es.descriptors).get(t);if(!a)throw new Ue(st.EBADF);return a}function _j(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:es.descriptors).delete(t)}const HY=/[rwasx]{1,2}\+?/;function Nl(e){if(typeof e=="number")return e;if(!HY.test(e))throw new Ue(st.EINVAL,"Invalid flag string: "+e);return VY(e)}function VY(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(st.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?ij:pw;return e.includes("w")&&(t|=gw),e.includes("a")&&(t|=ud),e.includes("+")?t|=Tl:e.includes("r")||(t|=Wa),e.includes("s")&&(t|=yw),e.includes("x")&&(t|=mw),t}function xj(e){let t=0;return e&Wa||(t|=ha),(e&Wa||e&Tl)&&(t|=Gr),t}const Fm=new Map;HC("/",jY.create({label:"root"}));function HC(e,t){if(e[0]!="/"&&(e="/"+e),e=Pl.call(this,e),Fm.has(e))throw _i(new Ue(st.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Fm.set(e,t),rj(`Mounted ${t.name} on ${e}`),mm(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function Sj(e){if(e[0]!="/"&&(e="/"+e),e=Pl.call(this,e),!Fm.has(e)){Ka(e+" is already unmounted");return}Fm.delete(e),PC("Unmounted "+e)}function jn(e,t){const n=(t==null?void 0:t.root)||es.root;e=ln(tr(n,e));const r=[...Fm].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(WY(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw ZZ(new Ue(st.EIO,"No file system",e))}function Fx(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function or(e,t){typeof e.stack=="string"&&(e.stack=Fx(e.stack,t));try{e.message=Fx(e.message,t)}catch{}return e.path&&(e.path=Fx(e.path,t)),e}function Ej(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||ui),files:(t?BigInt:Number)(n.totalNodes||ui),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function GY(e){var t,n,r,a,i,o,s;const u=this!==null&&this!==void 0?this:es;if(((t=u.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=u.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=u.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=u.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(st.EPERM,"Can not chroot() as non-root user");(i=u.root)!==null&&i!==void 0||(u.root="/");const c=tr(u.root,e);for(const f of(s=(o=u.descriptors)===null||o===void 0?void 0:o.values())!==null&&s!==void 0?s:[]){if(!f.path.startsWith(u.root))throw Ue.With("EBUSY",f.path,"chroot");f.path=f.path.slice(u.root.length)}if(c.length>u.root.length)throw new Ue(st.EPERM,"Can not chroot() outside of current root");u.root=c}function WY(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class Cj extends RC{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class kj extends Cj{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?tr(t.root,n):n,ZY(this.realpath,this)}close(){super.emit("close"),YY(this.realpath,this)}[Symbol.dispose](){this.close()}}class KY extends Cj{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Yu(this.path);wY(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Yu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Lu=new Map;function ZY(e,t){const n=ln(e);Lu.has(n)||Lu.set(n,new Set),Lu.get(n).add(t)}function YY(e,t){const n=ln(e);Lu.has(n)&&(Lu.get(n).delete(t),Lu.get(n).size===0&&Lu.delete(n))}function La(e,t,n){var r;e&&(n=tr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=ln(n);for(let a=n;a!="/";a=Yn(a)){const i=Lu.get(a);if(i)for(const o of i)o.emit("change",t,nj.call(o._context,a,n)||eh(n))}}var R0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},N0=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function XY(e,t){e=ln(e),t=ln(t);const n=jn(e,this),r=jn(t,this);if(!Yu.call(this,Yn(e)).hasAccess(Gr,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),La(this,"rename",e.toString()),La(this,"change",t.toString());return}ZC.call(this,t,KC(e)),WC.call(this,e),La(this,"rename",e.toString())}catch(a){throw or(a,{[n.path]:e,[r.path]:t})}}function VC(e){e=ln(e);try{const{fs:t,path:n}=jn(pc.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==st.ENOENT)return!1;throw t}}function Yu(e,t){e=ln(e);const{fs:n,path:r}=jn(pc.call(this,e),this);try{const a=n.statSync(r);if(pa&&!ir(this,a,ha))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Ed(a):new Vl(a)}catch(a){throw or(a,{[r]:e})}}function GC(e,t){e=ln(e);const{fs:n,path:r}=jn(e,this);try{const a=n.statSync(r);if(pa&&!ir(this,a,ha))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Ed(a):new Vl(a)}catch(a){throw or(a,{[r]:e})}}function JY(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=R0(n,Cd.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(st.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{N0(n)}}function WC(e){e=ln(e);const{fs:t,path:n}=jn(e,this);try{if(pa&&!ir(this,t.statSync(n),Gr))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),La(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}function Cd(e,t){var n;e=ln(e);const r=hc(t.mode,420),a=Nl(t.flag);e=t.preserveSymlinks?e:pc.call(this,e);const{fs:i,path:o}=jn(e,this);let s;try{s=i.statSync(o)}catch{}if(!s){if(!(a&pw))throw Ue.With("ENOENT",e,"_open");const c=i.statSync(Yn(o));if(!ir(this,c,Gr))throw Ue.With("EACCES",Yn(e),"_open");if(!Ko(c))throw Ue.With("ENOTDIR",Yn(e),"_open");if(!t.allowDirectory&&r&aa)throw Ue.With("EISDIR",e,"_open");if(!ir(this,c,Gr))throw Ue.With("EACCES",Yn(o),"_open");const{euid:f,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:es.credentials,m=i.createFileSync(o,{mode:r,uid:c.mode&A0?c.uid:f,gid:c.mode&T0?c.gid:h});return new Bb(this,e,i,o,a,m)}if(!ir(this,s,r)||!ir(this,s,xj(a)))throw Ue.With("EACCES",e,"_open");if(a&mw)throw Ue.With("EEXIST",e,"_open");const u=new Bb(this,e,i,o,a,s);if(a&gw&&u.truncate(0),!t.allowDirectory&&s.mode&aa)throw Ue.With("EISDIR",e,"_open");return u}function vw(e,t,n=LC){return zb(Cd.call(this,e,{flag:t,mode:n}))}function ww(e,t,n){return zb(Cd.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function Aj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=R0(r,typeof e=="number"?ei(this,e):Cd.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),o=new Uint8Array(i);return a.read(o,0,i,0),o}catch(a){r.error=a,r.hasError=!0}finally{N0(r)}}function KC(e,t={}){const n=Rl(t,null,"r",420);if(Nl(n.flag)&Wa)throw new Ue(st.EINVAL,"Flag passed to readFile must allow for reading");const a=Rr.from(Aj.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function ZC(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Rl(n,"utf8","w+",420),i=Nl(a.flag);if(!(i&Wa||i&Tl))throw new Ue(st.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new Ue(st.EINVAL,"Data not specified");R0(r,typeof e=="number"?ei(this,e):Cd.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength,0),La(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{N0(r)}}function QY(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Rl(n,"utf8","a+",420),i=Nl(a.flag);if(!(i&ud))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);R0(r,Cd.call(this,typeof e=="number"?ei(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{N0(r)}}function eX(e,t){const n=ei(this,e).stat();return t!=null&&t.bigint?new Ed(n):new Vl(n)}function kd(e){ei(this,e).close(),_j(this,e)}function tX(e,t=0){if(t||(t=0),t<0)throw new Ue(st.EINVAL);ei(this,e).truncate(t)}function nX(e){ei(this,e).sync()}function rX(e){ei(this,e).datasync()}function aX(e,t,n,r,a){let i,o,s,u;if(typeof t=="string"){u=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";o=0,i=Rr.from(t,h),s=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,u=typeof a=="number"?a:null;const c=ei(this,e);u??(u=c.position);const f=c.write(i,o,s,u);return La(this,"change",c.path),f}function iX(e,t,n,r,a){const i=ei(this,e),o=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,o,r,a)}function YC(e,t,n){ei(this,e).chown(t,n)}function XC(e,t){const n=hc(t,-1);if(n<0)throw new Ue(st.EINVAL,"Invalid mode.");ei(this,e).chmod(n)}function JC(e,t,n){ei(this,e).utimes($b(t),$b(n))}function Tj(e){e=ln(e);const{fs:t,path:n}=jn(pc.call(this,e),this);try{const r=t.statSync(n);if(!Ko(r))throw Ue.With("ENOTDIR",n,"rmdir");if(pa&&!ir(this,r,Gr))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),La(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}function QC(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:es.credentials;t=typeof t=="object"?t:{mode:t};const o=hc(t==null?void 0:t.mode,511);e=pc.call(this,e);const{fs:s,path:u,root:c}=jn(e,this),f={[u]:e},h=(m,g)=>{if(!ir(this,g,Gr))throw Ue.With("EACCES",Yn(m),"mkdir");const w=s.mkdirSync(m,{mode:o,uid:g.mode&A0?g.uid:a,gid:g.mode&T0?g.gid:i});return La(this,"rename",m),w};try{if(!(t!=null&&t.recursive)){h(u,s.statSync(Yn(u)));return}const m=[];for(let w=u,v=e;!s.existsSync(w);w=Yn(w),v=Yn(v))m.unshift(w),f[w]=v;if(!m.length)return;const g=[s.statSync(Yn(m[0]))];for(const[w,v]of m.entries())g.push(h(v,g[w]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw or(m,f)}}function kh(e,t){t=typeof t=="object"?t:{encoding:t},e=ln(e);const{fs:n,path:r}=jn(pc.call(this,e),this);let a;try{const o=n.statSync(r);if(pa&&!ir(this,o,ha))throw Ue.With("EACCES",r,"readdir");if(!Ko(o))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(o){throw or(o,{[r]:e})}const i=[];for(const o of a){let s;try{s=n.statSync(tr(r,o))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new Lm(o,s)):(t==null?void 0:t.encoding)=="buffer"?i.push(Rr.from(o)):i.push(o),!(!Ko(s)||!(t!=null&&t.recursive)))for(const u of kh.call(this,tr(e,o),t))u instanceof Lm?(u.path=tr(o,u.path),i.push(u)):Rr.isBuffer(u)?i.push(Rr.from(tr(o,IC(u)))):i.push(tr(o,u))}return i}function oX(e,t){if(e=ln(e),!Yu(Yn(e)).hasAccess(ha,this))throw Ue.With("EACCES",Yn(e),"link");if(t=ln(t),!Yu(Yn(t)).hasAccess(Gr,this))throw Ue.With("EACCES",Yn(t),"link");const{fs:n,path:r}=jn(e,this),a=jn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(pa&&!ir(this,n.statSync(r),ha))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw or(i,{[r]:e,[a.path]:t})}}function sX(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(st.EINVAL,"Invalid type: "+n);t=ln(t);const a=R0(r,Cd.call(this,t,{flag:"wx",mode:420}),!1);a.write(ed(ln(e,!0))),a.chmod(Hl)}catch(a){r.error=a,r.hasError=!0}finally{N0(r)}}function Q2(e,t){const n=Rr.from(Aj.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function lX(e,t,n){const r=vw.call(this,e,"r+");YC.call(this,r,t,n),kd.call(this,r)}function uX(e,t,n){const r=ww.call(this,e,"r+");YC.call(this,r,t,n),kd.call(this,r)}function cX(e,t){const n=vw.call(this,e,"r+");XC.call(this,n,t),kd.call(this,n)}function dX(e,t){const n=ww.call(this,e,"r+");XC.call(this,n,t),kd.call(this,n)}function Rj(e,t,n){const r=vw.call(this,e,"r+");JC.call(this,r,t,n),kd.call(this,r)}function fX(e,t,n){const r=ww.call(this,e,"r+");JC.call(this,r,t,n),kd.call(this,r)}function eE(e,t,n){try{const u=jn(t,e),c=u.fs.statSync(u.path);if(!th(c))return{...u,fullPath:t,stats:c};const f=Pl.call(e,Yn(t),Q2.call(e,t).toString());return eE(e,f)}catch{}const{base:r,dir:a}=Ss(t),i=a=="/"?"/":pc.call(e,a),o=tr(i,r),s=jn(o,e);try{const u=s.fs.statSync(s.path);if(!th(u))return{...s,fullPath:o,stats:u};const c=Pl.call(e,i,Q2.call(e,o).toString());return eE(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw or(u,{[s.path]:o})}}function pc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=eE(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Rr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function hX(e,t=384){if(!ir(this,Yu.call(this,e),t))throw new Ue(st.EACCES)}function Nj(e,t){e=ln(e);let n;try{n=GC.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&yr){case aa:if(t!=null&&t.recursive)for(const r of kh.call(this,e))Nj.call(this,tr(e,r),t);Tj.call(this,e);break;case zo:case Hl:case _d:case xd:WC.call(this,e);break;case Sd:case wd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}}function pX(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return QC.call(this,a),n=="buffer"?Rr.from(a):a}function Ij(e,t,n){if(e=ln(e),t=ln(t),n&&n&$C&&VC(t))throw new Ue(st.EEXIST,"Destination file already exists",t,"copyFile");ZC.call(this,t,KC(e)),La(this,"rename",t.toString())}function mX(e,t,n){const r=ei(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function gX(e,t,n){const r=ei(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function yX(e,t){return e=ln(e),new ek(e,this)}function Oj(e,t,n){e=ln(e),t=ln(t);const r=GC.call(this,e);if(n!=null&&n.errorOnExist&&VC.call(this,t))throw new Ue(st.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&yr){case aa:if(!(n!=null&&n.recursive))throw new Ue(st.EISDIR,e+" is a directory (not copied)",e,"cp");QC.call(this,t,{recursive:!0});for(const a of kh.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(tr(e,a.name),tr(t,a.name))||Oj.call(this,tr(e,a.name),tr(t,a.name),n);break;case zo:case Hl:Ij.call(this,e,t);break;case _d:case xd:case Sd:case wd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&Rj.call(this,t,r.atime,r.mtime)}function bX(e,t){e=ln(e);const{fs:n}=jn(e,this);return Ej(n,t==null?void 0:t.bigint)}function vX(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(u=>(u=u.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${u}$`))),o=[];function s(u){const c=kh(u,{withFileTypes:r,encoding:"utf8"});for(const f of c){const h=r?f.path:u+"/"+f;a(r?f:h)||(Yu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&s(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&o.push(r?f.path:h.replace(/^\/+/g,"")))}}return s(n),o}class Lm{get name(){return eh(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return CY(this.stats)}isDirectory(){return Ko(this.stats)}isBlockDevice(){return Mm(this.stats)}isCharacterDevice(){return Pm(this.stats)}isSymbolicLink(){return th(this.stats)}isFIFO(){return AY(this.stats)}isSocket(){return kY(this.stats)}}class ek{checkClosed(){if(this.closed)throw new Ue(st.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await yc.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=kh.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var Lx={exports:{}},$x={exports:{}},Bx={},qN;function mc(){return qN||(qN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=f,n.toByteArray=m,n.fromByteArray=v;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;a[45]=62,a[95]=63;function c(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var A=C===E?0:4-C%4;return[C,A]}function f(S){var E=c(S),C=E[0],A=E[1];return(C+A)*3/4-A}function h(S,E,C){return(E+C)*3/4-C}function m(S){var E,C=c(S),A=C[0],O=C[1],I=new i(h(S,A,O)),D=0,B=O>0?A-4:A,K;for(K=0;K<B;K+=4)E=a[S.charCodeAt(K)]<<18|a[S.charCodeAt(K+1)]<<12|a[S.charCodeAt(K+2)]<<6|a[S.charCodeAt(K+3)],I[D++]=E>>16&255,I[D++]=E>>8&255,I[D++]=E&255;return O===2&&(E=a[S.charCodeAt(K)]<<2|a[S.charCodeAt(K+1)]>>4,I[D++]=E&255),O===1&&(E=a[S.charCodeAt(K)]<<10|a[S.charCodeAt(K+1)]<<4|a[S.charCodeAt(K+2)]>>2,I[D++]=E>>8&255,I[D++]=E&255),I}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function w(S,E,C){for(var A,O=[],I=E;I<C;I+=3)A=(S[I]<<16&16711680)+(S[I+1]<<8&65280)+(S[I+2]&255),O.push(g(A));return O.join("")}function v(S){for(var E,C=S.length,A=C%3,O=[],I=16383,D=0,B=C-A;D<B;D+=I)O.push(w(S,D,D+I>B?B:D+I));return A===1?(E=S[C-1],O.push(r[E>>2]+r[E<<4&63]+"==")):A===2&&(E=(S[C-2]<<8)+S[C-1],O.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),O.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(S,E,C,A,O){var I,D,B=O*8-A-1,K=(1<<B)-1,Q=K>>1,F=-7,W=C?O-1:0,U=C?-1:1,he=S[E+W];for(W+=U,I=he&(1<<-F)-1,he>>=-F,F+=B;F>0;I=I*256+S[E+W],W+=U,F-=8);for(D=I&(1<<-F)-1,I>>=-F,F+=A;F>0;D=D*256+S[E+W],W+=U,F-=8);if(I===0)I=1-Q;else{if(I===K)return D?NaN:(he?-1:1)*(1/0);D=D+Math.pow(2,A),I=I-Q}return(he?-1:1)*D*Math.pow(2,I-A)},_.write=function(S,E,C,A,O,I){var D,B,K,Q=I*8-O-1,F=(1<<Q)-1,W=F>>1,U=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,he=A?0:I-1,ae=A?1:-1,re=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(B=isNaN(E)?1:0,D=F):(D=Math.floor(Math.log(E)/Math.LN2),E*(K=Math.pow(2,-D))<1&&(D--,K*=2),D+W>=1?E+=U/K:E+=U*Math.pow(2,1-W),E*K>=2&&(D++,K/=2),D+W>=F?(B=0,D=F):D+W>=1?(B=(E*K-1)*Math.pow(2,O),D=D+W):(B=E*Math.pow(2,W-1)*Math.pow(2,O),D=0));O>=8;S[C+he]=B&255,he+=ae,B/=256,O-=8);for(D=D<<O|B,Q+=O;Q>0;S[C+he]=D&255,he+=ae,D/=256,Q-=8);S[C+he-ae]|=re*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=_,A=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=F,S.SlowBuffer=ne,S.INSPECT_MAX_BYTES=50;const O=2147483647;S.kMaxLength=O;const{Uint8Array:I,ArrayBuffer:D,SharedArrayBuffer:B}=globalThis;F.TYPED_ARRAY_SUPPORT=K(),!F.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function K(){try{const q=new I(1),$={foo:function(){return 42}};return Object.setPrototypeOf($,I.prototype),Object.setPrototypeOf(q,$),q.foo()===42}catch{return!1}}Object.defineProperty(F.prototype,"parent",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.buffer}}),Object.defineProperty(F.prototype,"offset",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.byteOffset}});function Q(q){if(q>O)throw new RangeError('The value "'+q+'" is invalid for option "size"');const $=new I(q);return Object.setPrototypeOf($,F.prototype),$}function F(q,$,G){if(typeof q=="number"){if(typeof $=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae(q)}return W(q,$,G)}F.poolSize=8192;function W(q,$,G){if(typeof q=="string")return re(q,$);if(D.isView(q))return se(q);if(q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(me(q,D)||q&&me(q.buffer,D)||typeof B<"u"&&(me(q,B)||q&&me(q.buffer,B)))return V(q,$,G);if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=q.valueOf&&q.valueOf();if(pe!=null&&pe!==q)return F.from(pe,$,G);const de=X(q);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return F.from(q[Symbol.toPrimitive]("string"),$,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}F.from=function(q,$,G){return W(q,$,G)},Object.setPrototypeOf(F.prototype,I.prototype),Object.setPrototypeOf(F,I);function U(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function he(q,$,G){return U(q),q<=0?Q(q):$!==void 0?typeof G=="string"?Q(q).fill($,G):Q(q).fill($):Q(q)}F.alloc=function(q,$,G){return he(q,$,G)};function ae(q){return U(q),Q(q<0?0:Y(q)|0)}F.allocUnsafe=function(q){return ae(q)},F.allocUnsafeSlow=function(q){return ae(q)};function re(q,$){if((typeof $!="string"||$==="")&&($="utf8"),!F.isEncoding($))throw new TypeError("Unknown encoding: "+$);const G=be(q,$)|0;let pe=Q(G);const de=pe.write(q,$);return de!==G&&(pe=pe.slice(0,de)),pe}function ee(q){const $=q.length<0?0:Y(q.length)|0,G=Q($);for(let pe=0;pe<$;pe+=1)G[pe]=q[pe]&255;return G}function se(q){if(me(q,I)){const $=new I(q);return V($.buffer,$.byteOffset,$.byteLength)}return ee(q)}function V(q,$,G){if($<0||q.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<$+(G||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return $===void 0&&G===void 0?pe=new I(q):G===void 0?pe=new I(q,$):pe=new I(q,$,G),Object.setPrototypeOf(pe,F.prototype),pe}function X(q){if(F.isBuffer(q)){const $=Y(q.length)|0,G=Q($);return G.length===0||q.copy(G,0,0,$),G}if(q.length!==void 0)return typeof q.length!="number"||je(q.length)?Q(0):ee(q);if(q.type==="Buffer"&&Array.isArray(q.data))return ee(q.data)}function Y(q){if(q>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return q|0}function ne(q){return+q!=q&&(q=0),F.alloc(+q)}F.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==F.prototype},F.compare=function($,G){if(me($,I)&&($=F.from($,$.offset,$.byteLength)),me(G,I)&&(G=F.from(G,G.offset,G.byteLength)),!F.isBuffer($)||!F.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===G)return 0;let pe=$.length,de=G.length;for(let Fe=0,ot=Math.min(pe,de);Fe<ot;++Fe)if($[Fe]!==G[Fe]){pe=$[Fe],de=G[Fe];break}return pe<de?-1:de<pe?1:0},F.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},F.concat=function($,G){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return F.alloc(0);let pe;if(G===void 0)for(G=0,pe=0;pe<$.length;++pe)G+=$[pe].length;const de=F.allocUnsafe(G);let Fe=0;for(pe=0;pe<$.length;++pe){let ot=$[pe];if(me(ot,I))Fe+ot.length>de.length?(F.isBuffer(ot)||(ot=F.from(ot)),ot.copy(de,Fe)):I.prototype.set.call(de,ot,Fe);else if(F.isBuffer(ot))ot.copy(de,Fe);else throw new TypeError('"list" argument must be an Array of Buffers');Fe+=ot.length}return de};function be(q,$){if(F.isBuffer(q))return q.length;if(D.isView(q)||me(q,D))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);const G=q.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&G===0)return 0;let de=!1;for(;;)switch($){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return ct(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G*2;case"hex":return G>>>1;case"base64":return Be(q).length;default:if(de)return pe?-1:ct(q).length;$=(""+$).toLowerCase(),de=!0}}F.byteLength=be;function Ee(q,$,G){let pe=!1;if(($===void 0||$<0)&&($=0),$>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0,$>>>=0,G<=$))return"";for(q||(q="utf8");;)switch(q){case"hex":return _e(this,$,G);case"utf8":case"utf-8":return ke(this,$,G);case"ascii":return ie(this,$,G);case"latin1":case"binary":return J(this,$,G);case"base64":return z(this,$,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,$,G);default:if(pe)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),pe=!0}}F.prototype._isBuffer=!0;function De(q,$,G){const pe=q[$];q[$]=q[G],q[G]=pe}F.prototype.swap16=function(){const $=this.length;if($%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let G=0;G<$;G+=2)De(this,G,G+1);return this},F.prototype.swap32=function(){const $=this.length;if($%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let G=0;G<$;G+=4)De(this,G,G+3),De(this,G+1,G+2);return this},F.prototype.swap64=function(){const $=this.length;if($%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let G=0;G<$;G+=8)De(this,G,G+7),De(this,G+1,G+6),De(this,G+2,G+5),De(this,G+3,G+4);return this},F.prototype.toString=function(){const $=this.length;return $===0?"":arguments.length===0?ke(this,0,$):Ee.apply(this,arguments)},F.prototype.toLocaleString=F.prototype.toString,F.prototype.equals=function($){if(!F.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$?!0:F.compare(this,$)===0},F.prototype.inspect=function(){let $="";const G=S.INSPECT_MAX_BYTES;return $=this.toString("hex",0,G).replace(/(.{2})/g,"$1 ").trim(),this.length>G&&($+=" ... "),"<Buffer "+$+">"},A&&(F.prototype[A]=F.prototype.inspect),F.prototype.compare=function($,G,pe,de,Fe){if(me($,I)&&($=F.from($,$.offset,$.byteLength)),!F.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(G===void 0&&(G=0),pe===void 0&&(pe=$?$.length:0),de===void 0&&(de=0),Fe===void 0&&(Fe=this.length),G<0||pe>$.length||de<0||Fe>this.length)throw new RangeError("out of range index");if(de>=Fe&&G>=pe)return 0;if(de>=Fe)return-1;if(G>=pe)return 1;if(G>>>=0,pe>>>=0,de>>>=0,Fe>>>=0,this===$)return 0;let ot=Fe-de,jt=pe-G;const un=Math.min(ot,jt),Bt=this.slice(de,Fe),Vt=$.slice(G,pe);for(let Xt=0;Xt<un;++Xt)if(Bt[Xt]!==Vt[Xt]){ot=Bt[Xt],jt=Vt[Xt];break}return ot<jt?-1:jt<ot?1:0};function Pe(q,$,G,pe,de){if(q.length===0)return-1;if(typeof G=="string"?(pe=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,je(G)&&(G=de?0:q.length-1),G<0&&(G=q.length+G),G>=q.length){if(de)return-1;G=q.length-1}else if(G<0)if(de)G=0;else return-1;if(typeof $=="string"&&($=F.from($,pe)),F.isBuffer($))return $.length===0?-1:Re(q,$,G,pe,de);if(typeof $=="number")return $=$&255,typeof I.prototype.indexOf=="function"?de?I.prototype.indexOf.call(q,$,G):I.prototype.lastIndexOf.call(q,$,G):Re(q,[$],G,pe,de);throw new TypeError("val must be string, number or Buffer")}function Re(q,$,G,pe,de){let Fe=1,ot=q.length,jt=$.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(q.length<2||$.length<2)return-1;Fe=2,ot/=2,jt/=2,G/=2}function un(Vt,Xt){return Fe===1?Vt[Xt]:Vt.readUInt16BE(Xt*Fe)}let Bt;if(de){let Vt=-1;for(Bt=G;Bt<ot;Bt++)if(un(q,Bt)===un($,Vt===-1?0:Bt-Vt)){if(Vt===-1&&(Vt=Bt),Bt-Vt+1===jt)return Vt*Fe}else Vt!==-1&&(Bt-=Bt-Vt),Vt=-1}else for(G+jt>ot&&(G=ot-jt),Bt=G;Bt>=0;Bt--){let Vt=!0;for(let Xt=0;Xt<jt;Xt++)if(un(q,Bt+Xt)!==un($,Xt)){Vt=!1;break}if(Vt)return Bt}return-1}F.prototype.includes=function($,G,pe){return this.indexOf($,G,pe)!==-1},F.prototype.indexOf=function($,G,pe){return Pe(this,$,G,pe,!0)},F.prototype.lastIndexOf=function($,G,pe){return Pe(this,$,G,pe,!1)};function Te(q,$,G,pe){G=Number(G)||0;const de=q.length-G;pe?(pe=Number(pe),pe>de&&(pe=de)):pe=de;const Fe=$.length;pe>Fe/2&&(pe=Fe/2);let ot;for(ot=0;ot<pe;++ot){const jt=parseInt($.substr(ot*2,2),16);if(je(jt))return ot;q[G+ot]=jt}return ot}function He(q,$,G,pe){return et(ct($,q.length-G),q,G,pe)}function it(q,$,G,pe){return et(yt($),q,G,pe)}function Ie(q,$,G,pe){return et(Be($),q,G,pe)}function Ae(q,$,G,pe){return et(M($,q.length-G),q,G,pe)}F.prototype.write=function($,G,pe,de){if(G===void 0)de="utf8",pe=this.length,G=0;else if(pe===void 0&&typeof G=="string")de=G,pe=this.length,G=0;else if(isFinite(G))G=G>>>0,isFinite(pe)?(pe=pe>>>0,de===void 0&&(de="utf8")):(de=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Fe=this.length-G;if((pe===void 0||pe>Fe)&&(pe=Fe),$.length>0&&(pe<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let ot=!1;for(;;)switch(de){case"hex":return Te(this,$,G,pe);case"utf8":case"utf-8":return He(this,$,G,pe);case"ascii":case"latin1":case"binary":return it(this,$,G,pe);case"base64":return Ie(this,$,G,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ae(this,$,G,pe);default:if(ot)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),ot=!0}},F.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(q,$,G){return $===0&&G===q.length?E.fromByteArray(q):E.fromByteArray(q.slice($,G))}function ke(q,$,G){G=Math.min(q.length,G);const pe=[];let de=$;for(;de<G;){const Fe=q[de];let ot=null,jt=Fe>239?4:Fe>223?3:Fe>191?2:1;if(de+jt<=G){let un,Bt,Vt,Xt;switch(jt){case 1:Fe<128&&(ot=Fe);break;case 2:un=q[de+1],(un&192)===128&&(Xt=(Fe&31)<<6|un&63,Xt>127&&(ot=Xt));break;case 3:un=q[de+1],Bt=q[de+2],(un&192)===128&&(Bt&192)===128&&(Xt=(Fe&15)<<12|(un&63)<<6|Bt&63,Xt>2047&&(Xt<55296||Xt>57343)&&(ot=Xt));break;case 4:un=q[de+1],Bt=q[de+2],Vt=q[de+3],(un&192)===128&&(Bt&192)===128&&(Vt&192)===128&&(Xt=(Fe&15)<<18|(un&63)<<12|(Bt&63)<<6|Vt&63,Xt>65535&&Xt<1114112&&(ot=Xt))}}ot===null?(ot=65533,jt=1):ot>65535&&(ot-=65536,pe.push(ot>>>10&1023|55296),ot=56320|ot&1023),pe.push(ot),de+=jt}return ce(pe)}const Ne=4096;function ce(q){const $=q.length;if($<=Ne)return String.fromCharCode.apply(String,q);let G="",pe=0;for(;pe<$;)G+=String.fromCharCode.apply(String,q.slice(pe,pe+=Ne));return G}function ie(q,$,G){let pe="";G=Math.min(q.length,G);for(let de=$;de<G;++de)pe+=String.fromCharCode(q[de]&127);return pe}function J(q,$,G){let pe="";G=Math.min(q.length,G);for(let de=$;de<G;++de)pe+=String.fromCharCode(q[de]);return pe}function _e(q,$,G){const pe=q.length;(!$||$<0)&&($=0),(!G||G<0||G>pe)&&(G=pe);let de="";for(let Fe=$;Fe<G;++Fe)de+=Ke[q[Fe]];return de}function Le(q,$,G){const pe=q.slice($,G);let de="";for(let Fe=0;Fe<pe.length-1;Fe+=2)de+=String.fromCharCode(pe[Fe]+pe[Fe+1]*256);return de}F.prototype.slice=function($,G){const pe=this.length;$=~~$,G=G===void 0?pe:~~G,$<0?($+=pe,$<0&&($=0)):$>pe&&($=pe),G<0?(G+=pe,G<0&&(G=0)):G>pe&&(G=pe),G<$&&(G=$);const de=this.subarray($,G);return Object.setPrototypeOf(de,F.prototype),de};function xe(q,$,G){if(q%1!==0||q<0)throw new RangeError("offset is not uint");if(q+$>G)throw new RangeError("Trying to access beyond buffer length")}F.prototype.readUintLE=F.prototype.readUIntLE=function($,G,pe){$=$>>>0,G=G>>>0,pe||xe($,G,this.length);let de=this[$],Fe=1,ot=0;for(;++ot<G&&(Fe*=256);)de+=this[$+ot]*Fe;return de},F.prototype.readUintBE=F.prototype.readUIntBE=function($,G,pe){$=$>>>0,G=G>>>0,pe||xe($,G,this.length);let de=this[$+--G],Fe=1;for(;G>0&&(Fe*=256);)de+=this[$+--G]*Fe;return de},F.prototype.readUint8=F.prototype.readUInt8=function($,G){return $=$>>>0,G||xe($,1,this.length),this[$]},F.prototype.readUint16LE=F.prototype.readUInt16LE=function($,G){return $=$>>>0,G||xe($,2,this.length),this[$]|this[$+1]<<8},F.prototype.readUint16BE=F.prototype.readUInt16BE=function($,G){return $=$>>>0,G||xe($,2,this.length),this[$]<<8|this[$+1]},F.prototype.readUint32LE=F.prototype.readUInt32LE=function($,G){return $=$>>>0,G||xe($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+this[$+3]*16777216},F.prototype.readUint32BE=F.prototype.readUInt32BE=function($,G){return $=$>>>0,G||xe($,4,this.length),this[$]*16777216+(this[$+1]<<16|this[$+2]<<8|this[$+3])},F.prototype.readBigUInt64LE=Ct(function($){$=$>>>0,Oe($,"offset");const G=this[$],pe=this[$+7];(G===void 0||pe===void 0)&&ve($,this.length-8);const de=G+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24,Fe=this[++$]+this[++$]*2**8+this[++$]*2**16+pe*2**24;return BigInt(de)+(BigInt(Fe)<<BigInt(32))}),F.prototype.readBigUInt64BE=Ct(function($){$=$>>>0,Oe($,"offset");const G=this[$],pe=this[$+7];(G===void 0||pe===void 0)&&ve($,this.length-8);const de=G*2**24+this[++$]*2**16+this[++$]*2**8+this[++$],Fe=this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+pe;return(BigInt(de)<<BigInt(32))+BigInt(Fe)}),F.prototype.readIntLE=function($,G,pe){$=$>>>0,G=G>>>0,pe||xe($,G,this.length);let de=this[$],Fe=1,ot=0;for(;++ot<G&&(Fe*=256);)de+=this[$+ot]*Fe;return Fe*=128,de>=Fe&&(de-=Math.pow(2,8*G)),de},F.prototype.readIntBE=function($,G,pe){$=$>>>0,G=G>>>0,pe||xe($,G,this.length);let de=G,Fe=1,ot=this[$+--de];for(;de>0&&(Fe*=256);)ot+=this[$+--de]*Fe;return Fe*=128,ot>=Fe&&(ot-=Math.pow(2,8*G)),ot},F.prototype.readInt8=function($,G){return $=$>>>0,G||xe($,1,this.length),this[$]&128?(255-this[$]+1)*-1:this[$]},F.prototype.readInt16LE=function($,G){$=$>>>0,G||xe($,2,this.length);const pe=this[$]|this[$+1]<<8;return pe&32768?pe|4294901760:pe},F.prototype.readInt16BE=function($,G){$=$>>>0,G||xe($,2,this.length);const pe=this[$+1]|this[$]<<8;return pe&32768?pe|4294901760:pe},F.prototype.readInt32LE=function($,G){return $=$>>>0,G||xe($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},F.prototype.readInt32BE=function($,G){return $=$>>>0,G||xe($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},F.prototype.readBigInt64LE=Ct(function($){$=$>>>0,Oe($,"offset");const G=this[$],pe=this[$+7];(G===void 0||pe===void 0)&&ve($,this.length-8);const de=this[$+4]+this[$+5]*2**8+this[$+6]*2**16+(pe<<24);return(BigInt(de)<<BigInt(32))+BigInt(G+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24)}),F.prototype.readBigInt64BE=Ct(function($){$=$>>>0,Oe($,"offset");const G=this[$],pe=this[$+7];(G===void 0||pe===void 0)&&ve($,this.length-8);const de=(G<<24)+this[++$]*2**16+this[++$]*2**8+this[++$];return(BigInt(de)<<BigInt(32))+BigInt(this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+pe)}),F.prototype.readFloatLE=function($,G){return $=$>>>0,G||xe($,4,this.length),C.read(this,$,!0,23,4)},F.prototype.readFloatBE=function($,G){return $=$>>>0,G||xe($,4,this.length),C.read(this,$,!1,23,4)},F.prototype.readDoubleLE=function($,G){return $=$>>>0,G||xe($,8,this.length),C.read(this,$,!0,52,8)},F.prototype.readDoubleBE=function($,G){return $=$>>>0,G||xe($,8,this.length),C.read(this,$,!1,52,8)};function Ve(q,$,G,pe,de,Fe){if(!F.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if($>de||$<Fe)throw new RangeError('"value" argument is out of bounds');if(G+pe>q.length)throw new RangeError("Index out of range")}F.prototype.writeUintLE=F.prototype.writeUIntLE=function($,G,pe,de){if($=+$,G=G>>>0,pe=pe>>>0,!de){const jt=Math.pow(2,8*pe)-1;Ve(this,$,G,pe,jt,0)}let Fe=1,ot=0;for(this[G]=$&255;++ot<pe&&(Fe*=256);)this[G+ot]=$/Fe&255;return G+pe},F.prototype.writeUintBE=F.prototype.writeUIntBE=function($,G,pe,de){if($=+$,G=G>>>0,pe=pe>>>0,!de){const jt=Math.pow(2,8*pe)-1;Ve(this,$,G,pe,jt,0)}let Fe=pe-1,ot=1;for(this[G+Fe]=$&255;--Fe>=0&&(ot*=256);)this[G+Fe]=$/ot&255;return G+pe},F.prototype.writeUint8=F.prototype.writeUInt8=function($,G,pe){return $=+$,G=G>>>0,pe||Ve(this,$,G,1,255,0),this[G]=$&255,G+1},F.prototype.writeUint16LE=F.prototype.writeUInt16LE=function($,G,pe){return $=+$,G=G>>>0,pe||Ve(this,$,G,2,65535,0),this[G]=$&255,this[G+1]=$>>>8,G+2},F.prototype.writeUint16BE=F.prototype.writeUInt16BE=function($,G,pe){return $=+$,G=G>>>0,pe||Ve(this,$,G,2,65535,0),this[G]=$>>>8,this[G+1]=$&255,G+2},F.prototype.writeUint32LE=F.prototype.writeUInt32LE=function($,G,pe){return $=+$,G=G>>>0,pe||Ve(this,$,G,4,4294967295,0),this[G+3]=$>>>24,this[G+2]=$>>>16,this[G+1]=$>>>8,this[G]=$&255,G+4},F.prototype.writeUint32BE=F.prototype.writeUInt32BE=function($,G,pe){return $=+$,G=G>>>0,pe||Ve(this,$,G,4,4294967295,0),this[G]=$>>>24,this[G+1]=$>>>16,this[G+2]=$>>>8,this[G+3]=$&255,G+4};function xt(q,$,G,pe,de){fe($,pe,de,q,G,7);let Fe=Number($&BigInt(4294967295));q[G++]=Fe,Fe=Fe>>8,q[G++]=Fe,Fe=Fe>>8,q[G++]=Fe,Fe=Fe>>8,q[G++]=Fe;let ot=Number($>>BigInt(32)&BigInt(4294967295));return q[G++]=ot,ot=ot>>8,q[G++]=ot,ot=ot>>8,q[G++]=ot,ot=ot>>8,q[G++]=ot,G}function ht(q,$,G,pe,de){fe($,pe,de,q,G,7);let Fe=Number($&BigInt(4294967295));q[G+7]=Fe,Fe=Fe>>8,q[G+6]=Fe,Fe=Fe>>8,q[G+5]=Fe,Fe=Fe>>8,q[G+4]=Fe;let ot=Number($>>BigInt(32)&BigInt(4294967295));return q[G+3]=ot,ot=ot>>8,q[G+2]=ot,ot=ot>>8,q[G+1]=ot,ot=ot>>8,q[G]=ot,G+8}F.prototype.writeBigUInt64LE=Ct(function($,G=0){return xt(this,$,G,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeBigUInt64BE=Ct(function($,G=0){return ht(this,$,G,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeIntLE=function($,G,pe,de){if($=+$,G=G>>>0,!de){const un=Math.pow(2,8*pe-1);Ve(this,$,G,pe,un-1,-un)}let Fe=0,ot=1,jt=0;for(this[G]=$&255;++Fe<pe&&(ot*=256);)$<0&&jt===0&&this[G+Fe-1]!==0&&(jt=1),this[G+Fe]=($/ot>>0)-jt&255;return G+pe},F.prototype.writeIntBE=function($,G,pe,de){if($=+$,G=G>>>0,!de){const un=Math.pow(2,8*pe-1);Ve(this,$,G,pe,un-1,-un)}let Fe=pe-1,ot=1,jt=0;for(this[G+Fe]=$&255;--Fe>=0&&(ot*=256);)$<0&&jt===0&&this[G+Fe+1]!==0&&(jt=1),this[G+Fe]=($/ot>>0)-jt&255;return G+pe},F.prototype.writeInt8=function($,G,pe){return $=+$,G=G>>>0,pe||Ve(this,$,G,1,127,-128),$<0&&($=255+$+1),this[G]=$&255,G+1},F.prototype.writeInt16LE=function($,G,pe){return $=+$,G=G>>>0,pe||Ve(this,$,G,2,32767,-32768),this[G]=$&255,this[G+1]=$>>>8,G+2},F.prototype.writeInt16BE=function($,G,pe){return $=+$,G=G>>>0,pe||Ve(this,$,G,2,32767,-32768),this[G]=$>>>8,this[G+1]=$&255,G+2},F.prototype.writeInt32LE=function($,G,pe){return $=+$,G=G>>>0,pe||Ve(this,$,G,4,2147483647,-2147483648),this[G]=$&255,this[G+1]=$>>>8,this[G+2]=$>>>16,this[G+3]=$>>>24,G+4},F.prototype.writeInt32BE=function($,G,pe){return $=+$,G=G>>>0,pe||Ve(this,$,G,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[G]=$>>>24,this[G+1]=$>>>16,this[G+2]=$>>>8,this[G+3]=$&255,G+4},F.prototype.writeBigInt64LE=Ct(function($,G=0){return xt(this,$,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),F.prototype.writeBigInt64BE=Ct(function($,G=0){return ht(this,$,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(q,$,G,pe,de,Fe){if(G+pe>q.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function Lt(q,$,G,pe,de){return $=+$,G=G>>>0,de||Et(q,$,G,4),C.write(q,$,G,pe,23,4),G+4}F.prototype.writeFloatLE=function($,G,pe){return Lt(this,$,G,!0,pe)},F.prototype.writeFloatBE=function($,G,pe){return Lt(this,$,G,!1,pe)};function Tt(q,$,G,pe,de){return $=+$,G=G>>>0,de||Et(q,$,G,8),C.write(q,$,G,pe,52,8),G+8}F.prototype.writeDoubleLE=function($,G,pe){return Tt(this,$,G,!0,pe)},F.prototype.writeDoubleBE=function($,G,pe){return Tt(this,$,G,!1,pe)},F.prototype.copy=function($,G,pe,de){if(!F.isBuffer($))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!de&&de!==0&&(de=this.length),G>=$.length&&(G=$.length),G||(G=0),de>0&&de<pe&&(de=pe),de===pe||$.length===0||this.length===0)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),$.length-G<de-pe&&(de=$.length-G+pe);const Fe=de-pe;return this===$&&typeof I.prototype.copyWithin=="function"?this.copyWithin(G,pe,de):I.prototype.set.call($,this.subarray(pe,de),G),Fe},F.prototype.fill=function($,G,pe,de){if(typeof $=="string"){if(typeof G=="string"?(de=G,G=0,pe=this.length):typeof pe=="string"&&(de=pe,pe=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!F.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if($.length===1){const ot=$.charCodeAt(0);(de==="utf8"&&ot<128||de==="latin1")&&($=ot)}}else typeof $=="number"?$=$&255:typeof $=="boolean"&&($=Number($));if(G<0||this.length<G||this.length<pe)throw new RangeError("Out of range index");if(pe<=G)return this;G=G>>>0,pe=pe===void 0?this.length:pe>>>0,$||($=0);let Fe;if(typeof $=="number")for(Fe=G;Fe<pe;++Fe)this[Fe]=$;else{const ot=F.isBuffer($)?$:F.from($,de),jt=ot.length;if(jt===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(Fe=0;Fe<pe-G;++Fe)this[Fe+G]=ot[Fe%jt]}return this};const zt={};function ge(q,$,G){zt[q]=class extends G{constructor(){super(),Object.defineProperty(this,"message",{value:$.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${q}]`,this.stack,delete this.name}get code(){return q}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return`${this.name} [${q}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(q){return q?`${q} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(q,$){return`The "${q}" argument must be of type number. Received type ${typeof $}`},TypeError),ge("ERR_OUT_OF_RANGE",function(q,$,G){let pe=`The value of "${q}" is out of range.`,de=G;return Number.isInteger(G)&&Math.abs(G)>2**32?de=N(String(G)):typeof G=="bigint"&&(de=String(G),(G>BigInt(2)**BigInt(32)||G<-(BigInt(2)**BigInt(32)))&&(de=N(de)),de+="n"),pe+=` It must be ${$}. Received ${de}`,pe},RangeError);function N(q){let $="",G=q.length;const pe=q[0]==="-"?1:0;for(;G>=pe+4;G-=3)$=`_${q.slice(G-3,G)}${$}`;return`${q.slice(0,G)}${$}`}function H(q,$,G){Oe($,"offset"),(q[$]===void 0||q[$+G]===void 0)&&ve($,q.length-(G+1))}function fe(q,$,G,pe,de,Fe){if(q>G||q<$){const ot=typeof $=="bigint"?"n":"";let jt;throw $===0||$===BigInt(0)?jt=`>= 0${ot} and < 2${ot} ** ${(Fe+1)*8}${ot}`:jt=`>= -(2${ot} ** ${(Fe+1)*8-1}${ot}) and < 2 ** ${(Fe+1)*8-1}${ot}`,new zt.ERR_OUT_OF_RANGE("value",jt,q)}H(pe,de,Fe)}function Oe(q,$){if(typeof q!="number")throw new zt.ERR_INVALID_ARG_TYPE($,"number",q)}function ve(q,$,G){throw Math.floor(q)!==q?(Oe(q,G),new zt.ERR_OUT_OF_RANGE("offset","an integer",q)):$<0?new zt.ERR_BUFFER_OUT_OF_BOUNDS:new zt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${$}`,q)}const Ce=/[^+/0-9A-Za-z-_]/g;function le(q){if(q=q.split("=")[0],q=q.trim().replace(Ce,""),q.length<2)return"";for(;q.length%4!==0;)q=q+"=";return q}function ct(q,$){$=$||1/0;let G;const pe=q.length;let de=null;const Fe=[];for(let ot=0;ot<pe;++ot){if(G=q.charCodeAt(ot),G>55295&&G<57344){if(!de){if(G>56319){($-=3)>-1&&Fe.push(239,191,189);continue}else if(ot+1===pe){($-=3)>-1&&Fe.push(239,191,189);continue}de=G;continue}if(G<56320){($-=3)>-1&&Fe.push(239,191,189),de=G;continue}G=(de-55296<<10|G-56320)+65536}else de&&($-=3)>-1&&Fe.push(239,191,189);if(de=null,G<128){if(($-=1)<0)break;Fe.push(G)}else if(G<2048){if(($-=2)<0)break;Fe.push(G>>6|192,G&63|128)}else if(G<65536){if(($-=3)<0)break;Fe.push(G>>12|224,G>>6&63|128,G&63|128)}else if(G<1114112){if(($-=4)<0)break;Fe.push(G>>18|240,G>>12&63|128,G>>6&63|128,G&63|128)}else throw new Error("Invalid code point")}return Fe}function yt(q){const $=[];for(let G=0;G<q.length;++G)$.push(q.charCodeAt(G)&255);return $}function M(q,$){let G,pe,de;const Fe=[];for(let ot=0;ot<q.length&&!(($-=2)<0);++ot)G=q.charCodeAt(ot),pe=G>>8,de=G%256,Fe.push(de),Fe.push(pe);return Fe}function Be(q){return E.toByteArray(le(q))}function et(q,$,G,pe){let de;for(de=0;de<pe&&!(de+G>=$.length||de>=q.length);++de)$[de+G]=q[de];return de}function me(q,$){return q instanceof $||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===$.name}function je(q){return q!==q}const Ke=function(){const q="0123456789abcdef",$=new Array(256);for(let G=0;G<16;++G){const pe=G*16;for(let de=0;de<16;++de)$[pe+de]=q[G]+q[de]}return $}();function Ct(q){return typeof BigInt>"u"?ye:q}function ye(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(Bx)),Bx}var zx,HN;function Ur(){if(HN)return zx;HN=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return zx={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},zx}var Ux={exports:{}},qx,VN;function Dj(){return VN||(VN=1,qx={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),qx}var Hx,GN;function fi(){if(GN)return Hx;GN=1;const{format:e,inspect:t}=Dj(),{AggregateError:n}=Ur(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function c(_,x){if(!_)throw new u.ERR_INTERNAL_ASSERTION(x)}function f(_){let x="",S=_.length;const E=_[0]==="-"?1:0;for(;S>=E+4;S-=3)x=`_${_.slice(S-3,S)}${x}`;return`${_.slice(0,S)}${x}`}function h(_,x,S){if(typeof x=="function")return c(x.length<=S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${x.length}).`),x(...S);const E=(x.match(/%[dfijoOs]/g)||[]).length;return c(E===S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?x:e(x,...S)}function m(_,x,S){S||(S=Error);class E extends S{constructor(...A){super(h(_,x,A))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[a]=!0,u[_]=E}function g(_){const x=s+_.name;return Object.defineProperty(_,"name",{value:x}),_}function w(_,x){if(_&&x&&_!==x){if(Array.isArray(x.errors))return x.errors.push(_),x;const S=new r([x,_],x.message);return S.code=x.code,S}return _||x}class v extends Error{constructor(x="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",S);super(x,S),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(_,x,S)=>{c(typeof _=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const C=[],A=[],O=[];for(const D of x)c(typeof D=="string","All expected entries have to be of type string"),i.includes(D)?C.push(D.toLowerCase()):o.test(D)?A.push(D):(c(D!=="object",'The value "object" should be written as "Object"'),O.push(D));if(A.length>0){const D=C.indexOf("object");D!==-1&&(C.splice(C,D,1),A.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const D=C.pop();E+=`one of type ${C.join(", ")}, or ${D}`}}(A.length>0||O.length>0)&&(E+=" or ")}if(A.length>0){switch(A.length){case 1:E+=`an instance of ${A[0]}`;break;case 2:E+=`an instance of ${A[0]} or ${A[1]}`;break;default:{const D=A.pop();E+=`an instance of ${A.join(", ")}, or ${D}`}}O.length>0&&(E+=" or ")}switch(O.length){case 0:break;case 1:O[0].toLowerCase()!==O[0]&&(E+="an "),E+=`${O[0]}`;break;case 2:E+=`one of ${O[0]} or ${O[1]}`;break;default:{const D=O.pop();E+=`one of ${O.join(", ")}, or ${D}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var I;if((I=S.constructor)!==null&&I!==void 0&&I.name)E+=`. Received an instance of ${S.constructor.name}`;else{const D=t(S,{depth:-1});E+=`. Received ${D}`}}else{let D=t(S,{colors:!1});D.length>25&&(D=`${D.slice(0,25)}...`),E+=`. Received type ${typeof S} (${D})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(_,x,S="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${S}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(_,x,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${_} to be returned from the "${x}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(..._)=>{c(_.length>0,"At least one arg needs to be specified");let x;const S=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),S){case 1:x+=`The ${_[0]} argument`;break;case 2:x+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();x+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(_,x,S)=>{c(x,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=f(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=f(E)),E+="n"}else E=t(S);return`The value of "${_}" is out of range. It must be ${x}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Hx={AbortError:v,aggregateTwoErrors:g(w),hideStackFrames:g,codes:u},Hx}var tm={exports:{}},WN;function $m(){if(WN)return tm.exports;WN=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return tm.exports=e,tm.exports.AbortSignal=t,tm.exports.default=e,tm.exports}var zy={exports:{}},KN;function _w(){if(KN)return zy.exports;KN=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(A,O,I){return Function.prototype.apply.call(A,O,I)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:n=function(A){return Object.getOwnPropertyNames(A)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(A){return A!==A};function i(){i.init.call(this)}zy.exports=i,zy.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||a(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function u(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(A){for(var O=[],I=1;I<arguments.length;I++)O.push(arguments[I]);var D=A==="error",B=this._events;if(B!==void 0)D=D&&B.error===void 0;else if(!D)return!1;if(D){var K;if(O.length>0&&(K=O[0]),K instanceof Error)throw K;var Q=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw Q.context=K,Q}var F=B[A];if(F===void 0)return!1;if(typeof F=="function")t(F,this,O);else for(var W=F.length,U=w(F,W),I=0;I<W;++I)t(U[I],this,O);return!0};function c(C,A,O,I){var D,B,K;if(s(O),B=C._events,B===void 0?(B=C._events=Object.create(null),C._eventsCount=0):(B.newListener!==void 0&&(C.emit("newListener",A,O.listener?O.listener:O),B=C._events),K=B[A]),K===void 0)K=B[A]=O,++C._eventsCount;else if(typeof K=="function"?K=B[A]=I?[O,K]:[K,O]:I?K.unshift(O):K.push(O),D=u(C),D>0&&K.length>D&&!K.warned){K.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=C,Q.type=A,Q.count=K.length,r(Q)}return C}i.prototype.addListener=function(A,O){return c(this,A,O,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(A,O){return c(this,A,O,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,A,O){var I={fired:!1,wrapFn:void 0,target:C,type:A,listener:O},D=f.bind(I);return D.listener=O,I.wrapFn=D,D}i.prototype.once=function(A,O){return s(O),this.on(A,h(this,A,O)),this},i.prototype.prependOnceListener=function(A,O){return s(O),this.prependListener(A,h(this,A,O)),this},i.prototype.removeListener=function(A,O){var I,D,B,K,Q;if(s(O),D=this._events,D===void 0)return this;if(I=D[A],I===void 0)return this;if(I===O||I.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete D[A],D.removeListener&&this.emit("removeListener",A,I.listener||O));else if(typeof I!="function"){for(B=-1,K=I.length-1;K>=0;K--)if(I[K]===O||I[K].listener===O){Q=I[K].listener,B=K;break}if(B<0)return this;B===0?I.shift():v(I,B),I.length===1&&(D[A]=I[0]),D.removeListener!==void 0&&this.emit("removeListener",A,Q||O)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(A){var O,I,D;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[A]),this;if(arguments.length===0){var B=Object.keys(I),K;for(D=0;D<B.length;++D)K=B[D],K!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=I[A],typeof O=="function")this.removeListener(A,O);else if(O!==void 0)for(D=O.length-1;D>=0;D--)this.removeListener(A,O[D]);return this};function m(C,A,O){var I=C._events;if(I===void 0)return[];var D=I[A];return D===void 0?[]:typeof D=="function"?O?[D.listener||D]:[D]:O?_(D):w(D,D.length)}i.prototype.listeners=function(A){return m(this,A,!0)},i.prototype.rawListeners=function(A){return m(this,A,!1)},i.listenerCount=function(C,A){return typeof C.listenerCount=="function"?C.listenerCount(A):g.call(C,A)},i.prototype.listenerCount=g;function g(C){var A=this._events;if(A!==void 0){var O=A[C];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function w(C,A){for(var O=new Array(A),I=0;I<A;++I)O[I]=C[I];return O}function v(C,A){for(;A+1<C.length;A++)C[A]=C[A+1];C.pop()}function _(C){for(var A=new Array(C.length),O=0;O<A.length;++O)A[O]=C[O].listener||C[O];return A}function x(C,A){return new Promise(function(O,I){function D(K){C.removeListener(A,B),I(K)}function B(){typeof C.removeListener=="function"&&C.removeListener("error",D),O([].slice.call(arguments))}E(C,A,B,{once:!0}),A!=="error"&&S(C,D,{once:!0})})}function S(C,A,O){typeof C.on=="function"&&E(C,"error",A,O)}function E(C,A,O,I){if(typeof C.on=="function")I.once?C.once(A,O):C.on(A,O);else if(typeof C.addEventListener=="function")C.addEventListener(A,function D(B){I.once&&C.removeEventListener(A,D),O(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return zy.exports}var ZN;function Ci(){return ZN||(ZN=1,function(e){const t=mc(),{format:n,inspect:r}=Dj(),{codes:{ERR_INVALID_ARG_TYPE:a}}=fi(),{kResistStopPropagation:i,AggregateError:o,SymbolDispose:s}=Ur(),u=globalThis.AbortSignal||$m().AbortSignal,c=globalThis.AbortController||$m().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(_){return _ instanceof h}:function(_){return!1},g=(v,_)=>{if(v!==void 0&&(v===null||typeof v!="object"||!("aborted"in v)))throw new a(_,"AbortSignal",v)},w=(v,_)=>{if(typeof v!="function")throw new a(_,"Function",v)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(v){let _=!1;return function(...x){_||(_=!0,v.apply(this,x))}},createDeferredPromise:function(){let v,_;return{promise:new Promise((S,E)=>{v=S,_=E}),resolve:v,reject:_}},promisify(v){return new Promise((_,x)=>{v((S,...E)=>S?x(S):_(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(v){return v instanceof f},isArrayBufferView(v){return ArrayBuffer.isView(v)}},isBlob:m,deprecate(v,_){return v},addAbortListener:_w().addAbortListener||function(_,x){if(_===void 0)throw new a("signal","AbortSignal",_);g(_,"signal"),w(x,"listener");let S;return _.aborted?queueMicrotask(()=>x()):(_.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),S=()=>{_.removeEventListener("abort",x)}),{__proto__:null,[s](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:u.any||function(_){if(_.length===1)return _[0];const x=new c,S=()=>x.abort();return _.forEach(E=>{g(E,"signals"),E.addEventListener("abort",S,{once:!0})}),x.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Ux)),Ux.exports}var Uy={},Vx,YN;function I0(){if(YN)return Vx;YN=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=Ur(),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=fi(),{normalizeEncoding:C}=Ci(),{isAsyncFunction:A,isArrayBufferView:O}=Ci().types,I={};function D(J){return J===(J|0)}function B(J){return J===J>>>0}const K=/^[0-7]+$/,Q="must be a 32-bit unsigned integer or an octal string";function F(J,_e,Le){if(typeof J>"u"&&(J=Le),typeof J=="string"){if(f(K,J)===null)throw new x(_e,J,Q);J=u(J,8)}return he(J,_e),J}const W=w((J,_e,Le=s,xe=o)=>{if(typeof J!="number")throw new _(_e,"number",J);if(!a(J))throw new S(_e,"an integer",J);if(J<Le||J>xe)throw new S(_e,`>= ${Le} && <= ${xe}`,J)}),U=w((J,_e,Le=-2147483648,xe=2147483647)=>{if(typeof J!="number")throw new _(_e,"number",J);if(!a(J))throw new S(_e,"an integer",J);if(J<Le||J>xe)throw new S(_e,`>= ${Le} && <= ${xe}`,J)}),he=w((J,_e,Le=!1)=>{if(typeof J!="number")throw new _(_e,"number",J);if(!a(J))throw new S(_e,"an integer",J);const xe=Le?1:0,Ve=4294967295;if(J<xe||J>Ve)throw new S(_e,`>= ${xe} && <= ${Ve}`,J)});function ae(J,_e){if(typeof J!="string")throw new _(_e,"string",J)}function re(J,_e,Le=void 0,xe){if(typeof J!="number")throw new _(_e,"number",J);if(Le!=null&&J<Le||xe!=null&&J>xe||(Le!=null||xe!=null)&&i(J))throw new S(_e,`${Le!=null?`>= ${Le}`:""}${Le!=null&&xe!=null?" && ":""}${xe!=null?`<= ${xe}`:""}`,J)}const ee=w((J,_e,Le)=>{if(!t(Le,J)){const Ve="must be one of: "+n(r(Le,xt=>typeof xt=="string"?`'${xt}'`:h(xt)),", ");throw new x(_e,J,Ve)}});function se(J,_e){if(typeof J!="boolean")throw new _(_e,"boolean",J)}function V(J,_e,Le){return J==null||!c(J,_e)?Le:J[_e]}const X=w((J,_e,Le=null)=>{const xe=V(Le,"allowArray",!1),Ve=V(Le,"allowFunction",!1);if(!V(Le,"nullable",!1)&&J===null||!xe&&e(J)||typeof J!="object"&&(!Ve||typeof J!="function"))throw new _(_e,"Object",J)}),Y=w((J,_e)=>{if(J!=null&&typeof J!="object"&&typeof J!="function")throw new _(_e,"a dictionary",J)}),ne=w((J,_e,Le=0)=>{if(!e(J))throw new _(_e,"Array",J);if(J.length<Le){const xe=`must be longer than ${Le}`;throw new x(_e,J,xe)}});function be(J,_e){ne(J,_e);for(let Le=0;Le<J.length;Le++)ae(J[Le],`${_e}[${Le}]`)}function Ee(J,_e){ne(J,_e);for(let Le=0;Le<J.length;Le++)se(J[Le],`${_e}[${Le}]`)}function De(J,_e){ne(J,_e);for(let Le=0;Le<J.length;Le++){const xe=J[Le],Ve=`${_e}[${Le}]`;if(xe==null)throw new _(Ve,"AbortSignal",xe);it(xe,Ve)}}function Pe(J,_e="signal"){if(ae(J,_e),I[J]===void 0)throw I[m(J)]!==void 0?new E(J+" (signals must use all capital letters)"):new E(J)}const Re=w((J,_e="buffer")=>{if(!O(J))throw new _(_e,["Buffer","TypedArray","DataView"],J)});function Te(J,_e){const Le=C(_e),xe=J.length;if(Le==="hex"&&xe%2!==0)throw new x("encoding",_e,`is invalid for data of length ${xe}`)}function He(J,_e="Port",Le=!0){if(typeof J!="number"&&typeof J!="string"||typeof J=="string"&&g(J).length===0||+J!==+J>>>0||J>65535||J===0&&!Le)throw new v(_e,J,Le);return J|0}const it=w((J,_e)=>{if(J!==void 0&&(J===null||typeof J!="object"||!("aborted"in J)))throw new _(_e,"AbortSignal",J)}),Ie=w((J,_e)=>{if(typeof J!="function")throw new _(_e,"Function",J)}),Ae=w((J,_e)=>{if(typeof J!="function"||A(J))throw new _(_e,"Function",J)}),z=w((J,_e)=>{if(J!==void 0)throw new _(_e,"undefined",J)});function ke(J,_e,Le){if(!t(Le,J))throw new _(_e,`('${n(Le,"|")}')`,J)}const Ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ce(J,_e){if(typeof J>"u"||!f(Ne,J))throw new x(_e,J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ie(J){if(typeof J=="string")return ce(J,"hints"),J;if(e(J)){const _e=J.length;let Le="";if(_e===0)return Le;for(let xe=0;xe<_e;xe++){const Ve=J[xe];ce(Ve,"hints"),Le+=Ve,xe!==_e-1&&(Le+=", ")}return Le}throw new x("hints",J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Vx={isInt32:D,isUint32:B,parseFileMode:F,validateArray:ne,validateStringArray:be,validateBooleanArray:Ee,validateAbortSignalArray:De,validateBoolean:se,validateBuffer:Re,validateDictionary:Y,validateEncoding:Te,validateFunction:Ie,validateInt32:U,validateInteger:W,validateNumber:re,validateObject:X,validateOneOf:ee,validatePlainFunction:Ae,validatePort:He,validateSignalName:Pe,validateString:ae,validateUint32:he,validateUndefined:z,validateUnion:ke,validateAbortSignal:it,validateLinkHeaderValue:ie},Vx}var qy={exports:{}},Gx={},XN;function Ad(){return XN||(XN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=o}catch{a=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function u(C){if(a===setTimeout)return setTimeout(C,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(i===clearTimeout)return clearTimeout(C);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var f=[],h=!1,m,g=-1;function w(){!h||!m||(h=!1,m.length?f=m.concat(f):g=-1,f.length&&v())}function v(){if(!h){var C=u(w);h=!0;for(var A=f.length;A;){for(m=f,f=[];++g<A;)m&&m[g].run();g=-1,A=f.length}m=null,h=!1,c(C)}}r.nextTick=function(C){var A=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)A[O-1]=arguments[O];f.push(new _(C,A)),f.length===1&&!h&&u(v)};function _(C,A){this.fun=C,this.array=A}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(Gx)),Gx}var Wx,JN;function Gl(){if(JN)return Wx;JN=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Ur(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),u=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function f(V,X=!1){var Y;return!!(V&&typeof V.pipe=="function"&&typeof V.on=="function"&&(!X||typeof V.pause=="function"&&typeof V.resume=="function")&&(!V._writableState||((Y=V._readableState)===null||Y===void 0?void 0:Y.readable)!==!1)&&(!V._writableState||V._readableState))}function h(V){var X;return!!(V&&typeof V.write=="function"&&typeof V.on=="function"&&(!V._readableState||((X=V._writableState)===null||X===void 0?void 0:X.writable)!==!1))}function m(V){return!!(V&&typeof V.pipe=="function"&&V._readableState&&typeof V.on=="function"&&typeof V.write=="function")}function g(V){return V&&(V._readableState||V._writableState||typeof V.write=="function"&&typeof V.on=="function"||typeof V.pipe=="function"&&typeof V.on=="function")}function w(V){return!!(V&&!g(V)&&typeof V.pipeThrough=="function"&&typeof V.getReader=="function"&&typeof V.cancel=="function")}function v(V){return!!(V&&!g(V)&&typeof V.getWriter=="function"&&typeof V.abort=="function")}function _(V){return!!(V&&!g(V)&&typeof V.readable=="object"&&typeof V.writable=="object")}function x(V){return w(V)||v(V)||_(V)}function S(V,X){return V==null?!1:X===!0?typeof V[e]=="function":X===!1?typeof V[t]=="function":typeof V[e]=="function"||typeof V[t]=="function"}function E(V){if(!g(V))return null;const X=V._writableState,Y=V._readableState,ne=X||Y;return!!(V.destroyed||V[r]||ne!=null&&ne.destroyed)}function C(V){if(!h(V))return null;if(V.writableEnded===!0)return!0;const X=V._writableState;return X!=null&&X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function A(V,X){if(!h(V))return null;if(V.writableFinished===!0)return!0;const Y=V._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.finished)!="boolean"?null:!!(Y.finished||X===!1&&Y.ended===!0&&Y.length===0)}function O(V){if(!f(V))return null;if(V.readableEnded===!0)return!0;const X=V._readableState;return!X||X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function I(V,X){if(!f(V))return null;const Y=V._readableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.endEmitted)!="boolean"?null:!!(Y.endEmitted||X===!1&&Y.ended===!0&&Y.length===0)}function D(V){return V&&V[i]!=null?V[i]:typeof(V==null?void 0:V.readable)!="boolean"?null:E(V)?!1:f(V)&&V.readable&&!I(V)}function B(V){return V&&V[o]!=null?V[o]:typeof(V==null?void 0:V.writable)!="boolean"?null:E(V)?!1:h(V)&&V.writable&&!C(V)}function K(V,X){return g(V)?E(V)?!0:!((X==null?void 0:X.readable)!==!1&&D(V)||(X==null?void 0:X.writable)!==!1&&B(V)):null}function Q(V){var X,Y;return g(V)?V.writableErrored?V.writableErrored:(X=(Y=V._writableState)===null||Y===void 0?void 0:Y.errored)!==null&&X!==void 0?X:null:null}function F(V){var X,Y;return g(V)?V.readableErrored?V.readableErrored:(X=(Y=V._readableState)===null||Y===void 0?void 0:Y.errored)!==null&&X!==void 0?X:null:null}function W(V){if(!g(V))return null;if(typeof V.closed=="boolean")return V.closed;const X=V._writableState,Y=V._readableState;return typeof(X==null?void 0:X.closed)=="boolean"||typeof(Y==null?void 0:Y.closed)=="boolean"?(X==null?void 0:X.closed)||(Y==null?void 0:Y.closed):typeof V._closed=="boolean"&&U(V)?V._closed:null}function U(V){return typeof V._closed=="boolean"&&typeof V._defaultKeepAlive=="boolean"&&typeof V._removedConnection=="boolean"&&typeof V._removedContLen=="boolean"}function he(V){return typeof V._sent100=="boolean"&&U(V)}function ae(V){var X;return typeof V._consuming=="boolean"&&typeof V._dumped=="boolean"&&((X=V.req)===null||X===void 0?void 0:X.upgradeOrConnect)===void 0}function re(V){if(!g(V))return null;const X=V._writableState,Y=V._readableState,ne=X||Y;return!ne&&he(V)||!!(ne&&ne.autoDestroy&&ne.emitClose&&ne.closed===!1)}function ee(V){var X;return!!(V&&((X=V[s])!==null&&X!==void 0?X:V.readableDidRead||V.readableAborted))}function se(V){var X,Y,ne,be,Ee,De,Pe,Re,Te,He;return!!(V&&((X=(Y=(ne=(be=(Ee=(De=V[a])!==null&&De!==void 0?De:V.readableErrored)!==null&&Ee!==void 0?Ee:V.writableErrored)!==null&&be!==void 0?be:(Pe=V._readableState)===null||Pe===void 0?void 0:Pe.errorEmitted)!==null&&ne!==void 0?ne:(Re=V._writableState)===null||Re===void 0?void 0:Re.errorEmitted)!==null&&Y!==void 0?Y:(Te=V._readableState)===null||Te===void 0?void 0:Te.errored)!==null&&X!==void 0?X:!((He=V._writableState)===null||He===void 0)&&He.errored))}return Wx={isDestroyed:E,kIsDestroyed:r,isDisturbed:ee,kIsDisturbed:s,isErrored:se,kIsErrored:a,isReadable:D,kIsReadable:i,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:o,isClosed:W,isDuplexNodeStream:m,isFinished:K,isIterable:S,isReadableNodeStream:f,isReadableStream:w,isReadableEnded:O,isReadableFinished:I,isReadableErrored:F,isNodeStream:g,isWebStream:x,isWritable:B,isWritableNodeStream:h,isWritableStream:v,isWritableEnded:C,isWritableFinished:A,isWritableErrored:Q,isServerRequest:ae,isServerResponse:he,willEmitClose:re,isTransformStream:_},Wx}var QN;function gc(){if(QN)return qy.exports;QN=1;const e=Ad(),{AbortError:t,codes:n}=fi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:o}=Ci(),{validateAbortSignal:s,validateFunction:u,validateObject:c,validateBoolean:f}=I0(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:g}=Ur(),{isClosed:w,isReadable:v,isReadableNodeStream:_,isReadableStream:x,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:A,isWritableStream:O,isWritableFinished:I,isWritableErrored:D,isNodeStream:B,willEmitClose:K,kIsClosedPromise:Q}=Gl();let F;function W(ee){return ee.setHeader&&typeof ee.abort=="function"}const U=()=>{};function he(ee,se,V){var X,Y;if(arguments.length===2?(V=se,se=i):se==null?se=i:c(se,"options"),u(V,"callback"),s(se.signal,"options.signal"),V=o(V),x(ee)||O(ee))return ae(ee,se,V);if(!B(ee))throw new r("stream",["ReadableStream","WritableStream","Stream"],ee);const ne=(X=se.readable)!==null&&X!==void 0?X:_(ee),be=(Y=se.writable)!==null&&Y!==void 0?Y:A(ee),Ee=ee._writableState,De=ee._readableState,Pe=()=>{ee.writable||He()};let Re=K(ee)&&_(ee)===ne&&A(ee)===be,Te=I(ee,!1);const He=()=>{Te=!0,ee.destroyed&&(Re=!1),!(Re&&(!ee.readable||ne))&&(!ne||it)&&V.call(ee)};let it=S(ee,!1);const Ie=()=>{it=!0,ee.destroyed&&(Re=!1),!(Re&&(!ee.writable||be))&&(!be||Te)&&V.call(ee)},Ae=J=>{V.call(ee,J)};let z=w(ee);const ke=()=>{z=!0;const J=D(ee)||E(ee);if(J&&typeof J!="boolean")return V.call(ee,J);if(ne&&!it&&_(ee,!0)&&!S(ee,!1))return V.call(ee,new a);if(be&&!Te&&!I(ee,!1))return V.call(ee,new a);V.call(ee)},Ne=()=>{z=!0;const J=D(ee)||E(ee);if(J&&typeof J!="boolean")return V.call(ee,J);V.call(ee)},ce=()=>{ee.req.on("finish",He)};W(ee)?(ee.on("complete",He),Re||ee.on("abort",ke),ee.req?ce():ee.on("request",ce)):be&&!Ee&&(ee.on("end",Pe),ee.on("close",Pe)),!Re&&typeof ee.aborted=="boolean"&&ee.on("aborted",ke),ee.on("end",Ie),ee.on("finish",He),se.error!==!1&&ee.on("error",Ae),ee.on("close",ke),z?e.nextTick(ke):Ee!=null&&Ee.errorEmitted||De!=null&&De.errorEmitted?Re||e.nextTick(Ne):(!ne&&(!Re||v(ee))&&(Te||C(ee)===!1)||!be&&(!Re||C(ee))&&(it||v(ee)===!1)||De&&ee.req&&ee.aborted)&&e.nextTick(Ne);const ie=()=>{V=U,ee.removeListener("aborted",ke),ee.removeListener("complete",He),ee.removeListener("abort",ke),ee.removeListener("request",ce),ee.req&&ee.req.removeListener("finish",He),ee.removeListener("end",Pe),ee.removeListener("close",Pe),ee.removeListener("finish",He),ee.removeListener("end",Ie),ee.removeListener("error",Ae),ee.removeListener("close",ke)};if(se.signal&&!z){const J=()=>{const _e=V;ie(),_e.call(ee,new t(void 0,{cause:se.signal.reason}))};if(se.signal.aborted)e.nextTick(J);else{F=F||Ci().addAbortListener;const _e=F(se.signal,J),Le=V;V=o((...xe)=>{_e[g](),Le.apply(ee,xe)})}}return ie}function ae(ee,se,V){let X=!1,Y=U;if(se.signal)if(Y=()=>{X=!0,V.call(ee,new t(void 0,{cause:se.signal.reason}))},se.signal.aborted)e.nextTick(Y);else{F=F||Ci().addAbortListener;const be=F(se.signal,Y),Ee=V;V=o((...De)=>{be[g](),Ee.apply(ee,De)})}const ne=(...be)=>{X||e.nextTick(()=>V.apply(ee,be))};return m(ee[Q].promise,ne,ne),U}function re(ee,se){var V;let X=!1;return se===null&&(se=i),(V=se)!==null&&V!==void 0&&V.cleanup&&(f(se.cleanup,"cleanup"),X=se.cleanup),new h((Y,ne)=>{const be=he(ee,se,Ee=>{X&&be(),Ee?ne(Ee):Y()})})}return qy.exports=he,qy.exports.finished=re,qy.exports}var Kx,eI;function Ah(){if(eI)return Kx;eI=1;const e=Ad(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=fi(),{Symbol:a}=Ur(),{kIsDestroyed:i,isDestroyed:o,isFinished:s,isServerRequest:u}=Gl(),c=a("kDestroy"),f=a("kConstruct");function h(K,Q,F){K&&(K.stack,Q&&!Q.errored&&(Q.errored=K),F&&!F.errored&&(F.errored=K))}function m(K,Q){const F=this._readableState,W=this._writableState,U=W||F;return W!=null&&W.destroyed||F!=null&&F.destroyed?(typeof Q=="function"&&Q(),this):(h(K,W,F),W&&(W.destroyed=!0),F&&(F.destroyed=!0),U.constructed?g(this,K,Q):this.once(c,function(he){g(this,t(he,K),Q)}),this)}function g(K,Q,F){let W=!1;function U(he){if(W)return;W=!0;const ae=K._readableState,re=K._writableState;h(he,re,ae),re&&(re.closed=!0),ae&&(ae.closed=!0),typeof F=="function"&&F(he),he?e.nextTick(w,K,he):e.nextTick(v,K)}try{K._destroy(Q||null,U)}catch(he){U(he)}}function w(K,Q){_(K,Q),v(K)}function v(K){const Q=K._readableState,F=K._writableState;F&&(F.closeEmitted=!0),Q&&(Q.closeEmitted=!0),(F!=null&&F.emitClose||Q!=null&&Q.emitClose)&&K.emit("close")}function _(K,Q){const F=K._readableState,W=K._writableState;W!=null&&W.errorEmitted||F!=null&&F.errorEmitted||(W&&(W.errorEmitted=!0),F&&(F.errorEmitted=!0),K.emit("error",Q))}function x(){const K=this._readableState,Q=this._writableState;K&&(K.constructed=!0,K.closed=!1,K.closeEmitted=!1,K.destroyed=!1,K.errored=null,K.errorEmitted=!1,K.reading=!1,K.ended=K.readable===!1,K.endEmitted=K.readable===!1),Q&&(Q.constructed=!0,Q.destroyed=!1,Q.closed=!1,Q.closeEmitted=!1,Q.errored=null,Q.errorEmitted=!1,Q.finalCalled=!1,Q.prefinished=!1,Q.ended=Q.writable===!1,Q.ending=Q.writable===!1,Q.finished=Q.writable===!1)}function S(K,Q,F){const W=K._readableState,U=K._writableState;if(U!=null&&U.destroyed||W!=null&&W.destroyed)return this;W!=null&&W.autoDestroy||U!=null&&U.autoDestroy?K.destroy(Q):Q&&(Q.stack,U&&!U.errored&&(U.errored=Q),W&&!W.errored&&(W.errored=Q),F?e.nextTick(_,K,Q):_(K,Q))}function E(K,Q){if(typeof K._construct!="function")return;const F=K._readableState,W=K._writableState;F&&(F.constructed=!1),W&&(W.constructed=!1),K.once(f,Q),!(K.listenerCount(f)>1)&&e.nextTick(C,K)}function C(K){let Q=!1;function F(W){if(Q){S(K,W??new n);return}Q=!0;const U=K._readableState,he=K._writableState,ae=he||U;U&&(U.constructed=!0),he&&(he.constructed=!0),ae.destroyed?K.emit(c,W):W?S(K,W,!0):e.nextTick(A,K)}try{K._construct(W=>{e.nextTick(F,W)})}catch(W){e.nextTick(F,W)}}function A(K){K.emit(f)}function O(K){return(K==null?void 0:K.setHeader)&&typeof K.abort=="function"}function I(K){K.emit("close")}function D(K,Q){K.emit("error",Q),e.nextTick(I,K)}function B(K,Q){!K||o(K)||(!Q&&!s(K)&&(Q=new r),u(K)?(K.socket=null,K.destroy(Q)):O(K)?K.abort():O(K.req)?K.req.abort():typeof K.destroy=="function"?K.destroy(Q):typeof K.close=="function"?K.close():Q?e.nextTick(D,K,Q):e.nextTick(I,K),K.destroyed||(K[i]=!0))}return Kx={construct:E,destroyer:B,destroy:m,undestroy:x,errorOrDestroy:S},Kx}var Zx,tI;function tk(){if(tI)return Zx;tI=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Ur(),{EventEmitter:n}=_w();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,o){const s=this;function u(v){i.writable&&i.write(v)===!1&&s.pause&&s.pause()}s.on("data",u);function c(){s.readable&&s.resume&&s.resume()}i.on("drain",c),!i._isStdio&&(!o||o.end!==!1)&&(s.on("end",h),s.on("close",m));let f=!1;function h(){f||(f=!0,i.end())}function m(){f||(f=!0,typeof i.destroy=="function"&&i.destroy())}function g(v){w(),n.listenerCount(this,"error")===0&&this.emit("error",v)}a(s,"error",g),a(i,"error",g);function w(){s.removeListener("data",u),i.removeListener("drain",c),s.removeListener("end",h),s.removeListener("close",m),s.removeListener("error",g),i.removeListener("error",g),s.removeListener("end",w),s.removeListener("close",w),i.removeListener("close",w)}return s.on("end",w),s.on("close",w),i.on("close",w),i.emit("pipe",s),i};function a(i,o,s){if(typeof i.prependListener=="function")return i.prependListener(o,s);!i._events||!i._events[o]?i.on(o,s):e(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]}return Zx={Stream:r,prependListener:a},Zx}var Yx={exports:{}},nI;function xw(){return nI||(nI=1,function(e){const{SymbolDispose:t}=Ur(),{AbortError:n,codes:r}=fi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:o}=Gl(),s=gc(),{ERR_INVALID_ARG_TYPE:u}=r;let c;const f=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new u(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,g){if(f(m,"signal"),!a(g)&&!i(g))throw new u("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(m,g)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const g=a(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[o](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{c=c||Ci().addAbortListener;const w=c(h,g);s(m,w[t])}return m}}(Yx)),Yx.exports}var Xx,rI;function wX(){if(rI)return Xx;rI=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Ur(),{Buffer:a}=mc(),{inspect:i}=Ci();return Xx=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const u={data:s,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(s){const u={data:s,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=s+u.data;return c}concat(s){if(this.length===0)return a.alloc(0);const u=a.allocUnsafe(s>>>0);let c=this.head,f=0;for(;c;)n(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(s,u){const c=this.head.data;if(s<c.length){const f=c.slice(0,s);return this.head.data=c.slice(s),f}return s===c.length?this.shift():u?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let u="",c=this.head,f=0;do{const h=c.data;if(s>h.length)u+=h,s-=h.length;else{s===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=e(h,0,s),this.head=c,c.data=e(h,s));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(s){const u=a.allocUnsafe(s),c=s;let f=this.head,h=0;do{const m=f.data;if(s>m.length)n(u,m,c-s),s-=m.length;else{s===m.length?(n(u,m,c-s),++h,f.next?this.head=f.next:this.head=this.tail=null):(n(u,new r(m.buffer,m.byteOffset,s),c-s),this.head=f,f.data=m.slice(s));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](s,u){return i(this,{...u,depth:0,customInspect:!1})}},Xx}var Jx,aI;function Sw(){if(aI)return Jx;aI=1;const{MathFloor:e,NumberIsInteger:t}=Ur(),{validateInteger:n}=I0(),{ERR_INVALID_ARG_VALUE:r}=fi().codes;let a=16*1024,i=16;function o(f,h,m){return f.highWaterMark!=null?f.highWaterMark:h?f[m]:null}function s(f){return f?i:a}function u(f,h){n(h,"value",0),f?i=h:a=h}function c(f,h,m,g){const w=o(h,g,m);if(w!=null){if(!t(w)||w<0){const v=g?`options.${m}`:"options.highWaterMark";throw new r(v,w)}return e(w)}return s(f.objectMode)}return Jx={getHighWaterMark:c,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u},Jx}var Qx={},Hy={exports:{}},iI;function nk(){return iI||(iI=1,function(e,t){var n=mc(),r=n.Buffer;function a(o,s){for(var u in o)s[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(o,s,u){return r(o,s,u)}a(r,i),i.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,u)},i.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(Hy,Hy.exports)),Hy.exports}var oI;function _X(){if(oI)return Qx;oI=1;var e=nk().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function r(x){var S=n(x);if(typeof S!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return S||x}Qx.StringDecoder=a;function a(x){this.encoding=r(x);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=m,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=g,this.end=w,S=3;break;default:this.write=v,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(x){if(x.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?S?S+this.text(x,E):this.text(x,E):S||""},a.prototype.end=f,a.prototype.text=c,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function o(x,S,E){var C=S.length-1;if(C<E)return 0;var A=i(S[C]);return A>=0?(A>0&&(x.lastNeed=A-1),A):--C<E||A===-2?0:(A=i(S[C]),A>=0?(A>0&&(x.lastNeed=A-2),A):--C<E||A===-2?0:(A=i(S[C]),A>=0?(A>0&&(A===2?A=0:x.lastNeed=A-3),A):0))}function s(x,S,E){if((S[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,""}}function u(x){var S=this.lastTotal-this.lastNeed,E=s(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function c(x,S){var E=o(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=E;var C=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",S,C)}function f(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"":S}function h(x,S){if((x.length-S)%2===0){var E=x.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function m(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function g(x,S){var E=(x.length-S)%3;return E===0?x.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-E))}function w(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function v(x){return x.toString(this.encoding)}function _(x){return x&&x.length?this.write(x):""}return Qx}var eS,sI;function jj(){if(sI)return eS;sI=1;const e=Ad(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Ur(),{Buffer:a}=mc(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:o}=fi().codes;function s(u,c,f){let h;if(typeof c=="string"||c instanceof a)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let m;if(c&&c[n])m=!0,h=c[n]();else if(c&&c[r])m=!1,h=c[r]();else throw new i("iterable",["Iterable"],c);const g=new u({objectMode:!0,highWaterMark:1,...f});let w=!1;g._read=function(){w||(w=!0,_())},g._destroy=function(x,S){t(v(x),()=>e.nextTick(S,x),E=>e.nextTick(S,E||x))};async function v(x){const S=x!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:A}=await h.throw(x);if(await C,A)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function _(){for(;;){try{const{value:x,done:S}=m?await h.next():h.next();if(S)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw w=!1,new o;if(g.push(E))continue;w=!1}}catch(x){g.destroy(x)}break}}return g}return eS=s,eS}var tS,lI;function Ew(){if(lI)return tS;lI=1;const e=Ad(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:m}=Ur();tS=xe,xe.ReadableState=Le;const{EventEmitter:g}=_w(),{Stream:w,prependListener:v}=tk(),{Buffer:_}=mc(),{addAbortSignal:x}=xw(),S=gc();let E=Ci().debuglog("stream",ye=>{E=ye});const C=wX(),A=Ah(),{getHighWaterMark:O,getDefaultHighWaterMark:I}=Sw(),{aggregateTwoErrors:D,codes:{ERR_INVALID_ARG_TYPE:B,ERR_METHOD_NOT_IMPLEMENTED:K,ERR_OUT_OF_RANGE:Q,ERR_STREAM_PUSH_AFTER_EOF:F,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:W},AbortError:U}=fi(),{validateObject:he}=I0(),ae=m("kPaused"),{StringDecoder:re}=_X(),ee=jj();s(xe.prototype,w.prototype),s(xe,w);const se=()=>{},{errorOrDestroy:V}=A,X=1,Y=2,ne=4,be=8,Ee=16,De=32,Pe=64,Re=128,Te=256,He=512,it=1024,Ie=2048,Ae=4096,z=8192,ke=16384,Ne=32768,ce=65536,ie=1<<17,J=1<<18;function _e(ye){return{enumerable:!1,get(){return(this.state&ye)!==0},set(q){q?this.state|=ye:this.state&=~ye}}}i(Le.prototype,{objectMode:_e(X),ended:_e(Y),endEmitted:_e(ne),reading:_e(be),constructed:_e(Ee),sync:_e(De),needReadable:_e(Pe),emittedReadable:_e(Re),readableListening:_e(Te),resumeScheduled:_e(He),errorEmitted:_e(it),emitClose:_e(Ie),autoDestroy:_e(Ae),destroyed:_e(z),closed:_e(ke),closeEmitted:_e(Ne),multiAwaitDrain:_e(ce),readingMore:_e(ie),dataEmitted:_e(J)});function Le(ye,q,$){typeof $!="boolean"&&($=q instanceof Fl()),this.state=Ie|Ae|Ee|De,ye&&ye.objectMode&&(this.state|=X),$&&ye&&ye.readableObjectMode&&(this.state|=X),this.highWaterMark=ye?O(this,ye,"readableHighWaterMark",$):I(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ae]=null,ye&&ye.emitClose===!1&&(this.state&=-2049),ye&&ye.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=ye&&ye.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ye&&ye.encoding&&(this.decoder=new re(ye.encoding),this.encoding=ye.encoding)}function xe(ye){if(!(this instanceof xe))return new xe(ye);const q=this instanceof Fl();this._readableState=new Le(ye,this,q),ye&&(typeof ye.read=="function"&&(this._read=ye.read),typeof ye.destroy=="function"&&(this._destroy=ye.destroy),typeof ye.construct=="function"&&(this._construct=ye.construct),ye.signal&&!q&&x(ye.signal,this)),w.call(this,ye),A.construct(this,()=>{this._readableState.needReadable&&N(this,this._readableState)})}xe.prototype.destroy=A.destroy,xe.prototype._undestroy=A.undestroy,xe.prototype._destroy=function(ye,q){q(ye)},xe.prototype[g.captureRejectionSymbol]=function(ye){this.destroy(ye)},xe.prototype[f]=function(){let ye;return this.destroyed||(ye=this.readableEnded?null:new U,this.destroy(ye)),new u((q,$)=>S(this,G=>G&&G!==ye?$(G):q(null)))},xe.prototype.push=function(ye,q){return Ve(this,ye,q,!1)},xe.prototype.unshift=function(ye,q){return Ve(this,ye,q,!0)};function Ve(ye,q,$,G){E("readableAddChunk",q);const pe=ye._readableState;let de;if((pe.state&X)===0&&(typeof q=="string"?($=$||pe.defaultEncoding,pe.encoding!==$&&(G&&pe.encoding?q=_.from(q,$).toString(pe.encoding):(q=_.from(q,$),$=""))):q instanceof _?$="":w._isUint8Array(q)?(q=w._uint8ArrayToBuffer(q),$=""):q!=null&&(de=new B("chunk",["string","Buffer","Uint8Array"],q))),de)V(ye,de);else if(q===null)pe.state&=-9,Tt(ye,pe);else if((pe.state&X)!==0||q&&q.length>0)if(G)if((pe.state&ne)!==0)V(ye,new W);else{if(pe.destroyed||pe.errored)return!1;xt(ye,pe,q,!0)}else if(pe.ended)V(ye,new F);else{if(pe.destroyed||pe.errored)return!1;pe.state&=-9,pe.decoder&&!$?(q=pe.decoder.write(q),pe.objectMode||q.length!==0?xt(ye,pe,q,!1):N(ye,pe)):xt(ye,pe,q,!1)}else G||(pe.state&=-9,N(ye,pe));return!pe.ended&&(pe.length<pe.highWaterMark||pe.length===0)}function xt(ye,q,$,G){q.flowing&&q.length===0&&!q.sync&&ye.listenerCount("data")>0?((q.state&ce)!==0?q.awaitDrainWriters.clear():q.awaitDrainWriters=null,q.dataEmitted=!0,ye.emit("data",$)):(q.length+=q.objectMode?1:$.length,G?q.buffer.unshift($):q.buffer.push($),(q.state&Pe)!==0&&zt(ye)),N(ye,q)}xe.prototype.isPaused=function(){const ye=this._readableState;return ye[ae]===!0||ye.flowing===!1},xe.prototype.setEncoding=function(ye){const q=new re(ye);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;const $=this._readableState.buffer;let G="";for(const pe of $)G+=q.write(pe);return $.clear(),G!==""&&$.push(G),this._readableState.length=G.length,this};const ht=1073741824;function Et(ye){if(ye>ht)throw new Q("size","<= 1GiB",ye);return ye--,ye|=ye>>>1,ye|=ye>>>2,ye|=ye>>>4,ye|=ye>>>8,ye|=ye>>>16,ye++,ye}function Lt(ye,q){return ye<=0||q.length===0&&q.ended?0:(q.state&X)!==0?1:r(ye)?q.flowing&&q.length?q.buffer.first().length:q.length:ye<=q.length?ye:q.ended?q.length:0}xe.prototype.read=function(ye){E("read",ye),ye===void 0?ye=NaN:n(ye)||(ye=a(ye,10));const q=this._readableState,$=ye;if(ye>q.highWaterMark&&(q.highWaterMark=Et(ye)),ye!==0&&(q.state&=-129),ye===0&&q.needReadable&&((q.highWaterMark!==0?q.length>=q.highWaterMark:q.length>0)||q.ended))return E("read: emitReadable",q.length,q.ended),q.length===0&&q.ended?et(this):zt(this),null;if(ye=Lt(ye,q),ye===0&&q.ended)return q.length===0&&et(this),null;let G=(q.state&Pe)!==0;if(E("need readable",G),(q.length===0||q.length-ye<q.highWaterMark)&&(G=!0,E("length less than watermark",G)),q.ended||q.reading||q.destroyed||q.errored||!q.constructed)G=!1,E("reading, ended or constructing",G);else if(G){E("do read"),q.state|=be|De,q.length===0&&(q.state|=Pe);try{this._read(q.highWaterMark)}catch(de){V(this,de)}q.state&=-33,q.reading||(ye=Lt($,q))}let pe;return ye>0?pe=Be(ye,q):pe=null,pe===null?(q.needReadable=q.length<=q.highWaterMark,ye=0):(q.length-=ye,q.multiAwaitDrain?q.awaitDrainWriters.clear():q.awaitDrainWriters=null),q.length===0&&(q.ended||(q.needReadable=!0),$!==ye&&q.ended&&et(this)),pe!==null&&!q.errorEmitted&&!q.closeEmitted&&(q.dataEmitted=!0,this.emit("data",pe)),pe};function Tt(ye,q){if(E("onEofChunk"),!q.ended){if(q.decoder){const $=q.decoder.end();$&&$.length&&(q.buffer.push($),q.length+=q.objectMode?1:$.length)}q.ended=!0,q.sync?zt(ye):(q.needReadable=!1,q.emittedReadable=!0,ge(ye))}}function zt(ye){const q=ye._readableState;E("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(E("emitReadable",q.flowing),q.emittedReadable=!0,e.nextTick(ge,ye))}function ge(ye){const q=ye._readableState;E("emitReadable_",q.destroyed,q.length,q.ended),!q.destroyed&&!q.errored&&(q.length||q.ended)&&(ye.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,ct(ye)}function N(ye,q){!q.readingMore&&q.constructed&&(q.readingMore=!0,e.nextTick(H,ye,q))}function H(ye,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&q.length===0);){const $=q.length;if(E("maybeReadMore read 0"),ye.read(0),$===q.length)break}q.readingMore=!1}xe.prototype._read=function(ye){throw new K("_read()")},xe.prototype.pipe=function(ye,q){const $=this,G=this._readableState;G.pipes.length===1&&(G.multiAwaitDrain||(G.multiAwaitDrain=!0,G.awaitDrainWriters=new c(G.awaitDrainWriters?[G.awaitDrainWriters]:[]))),G.pipes.push(ye),E("pipe count=%d opts=%j",G.pipes.length,q);const de=(!q||q.end!==!1)&&ye!==e.stdout&&ye!==e.stderr?ot:hr;G.endEmitted?e.nextTick(de):$.once("end",de),ye.on("unpipe",Fe);function Fe(Dn,ti){E("onunpipe"),Dn===$&&ti&&ti.hasUnpiped===!1&&(ti.hasUnpiped=!0,Bt())}function ot(){E("onend"),ye.end()}let jt,un=!1;function Bt(){E("cleanup"),ye.removeListener("close",Bn),ye.removeListener("finish",fr),jt&&ye.removeListener("drain",jt),ye.removeListener("error",Tn),ye.removeListener("unpipe",Fe),$.removeListener("end",ot),$.removeListener("end",hr),$.removeListener("data",Xt),un=!0,jt&&G.awaitDrainWriters&&(!ye._writableState||ye._writableState.needDrain)&&jt()}function Vt(){un||(G.pipes.length===1&&G.pipes[0]===ye?(E("false write response, pause",0),G.awaitDrainWriters=ye,G.multiAwaitDrain=!1):G.pipes.length>1&&G.pipes.includes(ye)&&(E("false write response, pause",G.awaitDrainWriters.size),G.awaitDrainWriters.add(ye)),$.pause()),jt||(jt=fe($,ye),ye.on("drain",jt))}$.on("data",Xt);function Xt(Dn){E("ondata");const ti=ye.write(Dn);E("dest.write",ti),ti===!1&&Vt()}function Tn(Dn){if(E("onerror",Dn),hr(),ye.removeListener("error",Tn),ye.listenerCount("error")===0){const ti=ye._writableState||ye._readableState;ti&&!ti.errorEmitted?V(ye,Dn):ye.emit("error",Dn)}}v(ye,"error",Tn);function Bn(){ye.removeListener("finish",fr),hr()}ye.once("close",Bn);function fr(){E("onfinish"),ye.removeListener("close",Bn),hr()}ye.once("finish",fr);function hr(){E("unpipe"),$.unpipe(ye)}return ye.emit("pipe",$),ye.writableNeedDrain===!0?Vt():G.flowing||(E("pipe resume"),$.resume()),ye};function fe(ye,q){return function(){const G=ye._readableState;G.awaitDrainWriters===q?(E("pipeOnDrain",1),G.awaitDrainWriters=null):G.multiAwaitDrain&&(E("pipeOnDrain",G.awaitDrainWriters.size),G.awaitDrainWriters.delete(q)),(!G.awaitDrainWriters||G.awaitDrainWriters.size===0)&&ye.listenerCount("data")&&ye.resume()}}xe.prototype.unpipe=function(ye){const q=this._readableState,$={hasUnpiped:!1};if(q.pipes.length===0)return this;if(!ye){const pe=q.pipes;q.pipes=[],this.pause();for(let de=0;de<pe.length;de++)pe[de].emit("unpipe",this,{hasUnpiped:!1});return this}const G=t(q.pipes,ye);return G===-1?this:(q.pipes.splice(G,1),q.pipes.length===0&&this.pause(),ye.emit("unpipe",this,$),this)},xe.prototype.on=function(ye,q){const $=w.prototype.on.call(this,ye,q),G=this._readableState;return ye==="data"?(G.readableListening=this.listenerCount("readable")>0,G.flowing!==!1&&this.resume()):ye==="readable"&&!G.endEmitted&&!G.readableListening&&(G.readableListening=G.needReadable=!0,G.flowing=!1,G.emittedReadable=!1,E("on readable",G.length,G.reading),G.length?zt(this):G.reading||e.nextTick(ve,this)),$},xe.prototype.addListener=xe.prototype.on,xe.prototype.removeListener=function(ye,q){const $=w.prototype.removeListener.call(this,ye,q);return ye==="readable"&&e.nextTick(Oe,this),$},xe.prototype.off=xe.prototype.removeListener,xe.prototype.removeAllListeners=function(ye){const q=w.prototype.removeAllListeners.apply(this,arguments);return(ye==="readable"||ye===void 0)&&e.nextTick(Oe,this),q};function Oe(ye){const q=ye._readableState;q.readableListening=ye.listenerCount("readable")>0,q.resumeScheduled&&q[ae]===!1?q.flowing=!0:ye.listenerCount("data")>0?ye.resume():q.readableListening||(q.flowing=null)}function ve(ye){E("readable nexttick read 0"),ye.read(0)}xe.prototype.resume=function(){const ye=this._readableState;return ye.flowing||(E("resume"),ye.flowing=!ye.readableListening,Ce(this,ye)),ye[ae]=!1,this};function Ce(ye,q){q.resumeScheduled||(q.resumeScheduled=!0,e.nextTick(le,ye,q))}function le(ye,q){E("resume",q.reading),q.reading||ye.read(0),q.resumeScheduled=!1,ye.emit("resume"),ct(ye),q.flowing&&!q.reading&&ye.read(0)}xe.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ae]=!0,this};function ct(ye){const q=ye._readableState;for(E("flow",q.flowing);q.flowing&&ye.read()!==null;);}xe.prototype.wrap=function(ye){let q=!1;ye.on("data",G=>{!this.push(G)&&ye.pause&&(q=!0,ye.pause())}),ye.on("end",()=>{this.push(null)}),ye.on("error",G=>{V(this,G)}),ye.on("close",()=>{this.destroy()}),ye.on("destroy",()=>{this.destroy()}),this._read=()=>{q&&ye.resume&&(q=!1,ye.resume())};const $=o(ye);for(let G=1;G<$.length;G++){const pe=$[G];this[pe]===void 0&&typeof ye[pe]=="function"&&(this[pe]=ye[pe].bind(ye))}return this},xe.prototype[h]=function(){return yt(this)},xe.prototype.iterator=function(ye){return ye!==void 0&&he(ye,"options"),yt(this,ye)};function yt(ye,q){typeof ye.read!="function"&&(ye=xe.wrap(ye,{objectMode:!0}));const $=M(ye,q);return $.stream=ye,$}async function*M(ye,q){let $=se;function G(Fe){this===ye?($(),$=se):$=Fe}ye.on("readable",G);let pe;const de=S(ye,{writable:!1},Fe=>{pe=Fe?D(pe,Fe):null,$(),$=se});try{for(;;){const Fe=ye.destroyed?null:ye.read();if(Fe!==null)yield Fe;else{if(pe)throw pe;if(pe===null)return;await new u(G)}}}catch(Fe){throw pe=D(pe,Fe),pe}finally{(pe||(q==null?void 0:q.destroyOnReturn)!==!1)&&(pe===void 0||ye._readableState.autoDestroy)?A.destroyer(ye,null):(ye.off("readable",G),de())}}i(xe.prototype,{readable:{__proto__:null,get(){const ye=this._readableState;return!!ye&&ye.readable!==!1&&!ye.destroyed&&!ye.errorEmitted&&!ye.endEmitted},set(ye){this._readableState&&(this._readableState.readable=!!ye)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ye){this._readableState&&(this._readableState.flowing=ye)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ye){this._readableState&&(this._readableState.destroyed=ye)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Le.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ae]!==!1},set(ye){this[ae]=!!ye}}}),xe._fromList=Be;function Be(ye,q){if(q.length===0)return null;let $;return q.objectMode?$=q.buffer.shift():!ye||ye>=q.length?(q.decoder?$=q.buffer.join(""):q.buffer.length===1?$=q.buffer.first():$=q.buffer.concat(q.length),q.buffer.clear()):$=q.buffer.consume(ye,q.decoder),$}function et(ye){const q=ye._readableState;E("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,e.nextTick(me,q,ye))}function me(ye,q){if(E("endReadableNT",ye.endEmitted,ye.length),!ye.errored&&!ye.closeEmitted&&!ye.endEmitted&&ye.length===0){if(ye.endEmitted=!0,q.emit("end"),q.writable&&q.allowHalfOpen===!1)e.nextTick(je,q);else if(ye.autoDestroy){const $=q._writableState;(!$||$.autoDestroy&&($.finished||$.writable===!1))&&q.destroy()}}}function je(ye){ye.writable&&!ye.writableEnded&&!ye.destroyed&&ye.end()}xe.from=function(ye,q){return ee(xe,ye,q)};let Ke;function Ct(){return Ke===void 0&&(Ke={}),Ke}return xe.fromWeb=function(ye,q){return Ct().newStreamReadableFromReadableStream(ye,q)},xe.toWeb=function(ye,q){return Ct().newReadableStreamFromStreamReadable(ye,q)},xe.wrap=function(ye,q){var $,G;return new xe({objectMode:($=(G=ye.readableObjectMode)!==null&&G!==void 0?G:ye.objectMode)!==null&&$!==void 0?$:!0,...q,destroy(pe,de){A.destroyer(ye,pe),de(pe)}}).wrap(ye)},tS}var nS,uI;function rk(){if(uI)return nS;uI=1;const e=Ad(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:c}=Ur();nS=he,he.WritableState=W;const{EventEmitter:f}=_w(),h=tk().Stream,{Buffer:m}=mc(),g=Ah(),{addAbortSignal:w}=xw(),{getHighWaterMark:v,getDefaultHighWaterMark:_}=Sw(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:O,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:D,ERR_UNKNOWN_ENCODING:B}=fi().codes,{errorOrDestroy:K}=g;o(he.prototype,h.prototype),o(he,h);function Q(){}const F=u("kOnFinished");function W(Ae,z,ke){typeof ke!="boolean"&&(ke=z instanceof Fl()),this.objectMode=!!(Ae&&Ae.objectMode),ke&&(this.objectMode=this.objectMode||!!(Ae&&Ae.writableObjectMode)),this.highWaterMark=Ae?v(this,Ae,"writableHighWaterMark",ke):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ne=!!(Ae&&Ae.decodeStrings===!1);this.decodeStrings=!Ne,this.defaultEncoding=Ae&&Ae.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=V.bind(void 0,z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,U(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ae||Ae.emitClose!==!1,this.autoDestroy=!Ae||Ae.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[F]=[]}function U(Ae){Ae.buffered=[],Ae.bufferedIndex=0,Ae.allBuffers=!0,Ae.allNoop=!0}W.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(W.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function he(Ae){const z=this instanceof Fl();if(!z&&!r(he,this))return new he(Ae);this._writableState=new W(Ae,this,z),Ae&&(typeof Ae.write=="function"&&(this._write=Ae.write),typeof Ae.writev=="function"&&(this._writev=Ae.writev),typeof Ae.destroy=="function"&&(this._destroy=Ae.destroy),typeof Ae.final=="function"&&(this._final=Ae.final),typeof Ae.construct=="function"&&(this._construct=Ae.construct),Ae.signal&&w(Ae.signal,this)),h.call(this,Ae),g.construct(this,()=>{const ke=this._writableState;ke.writing||be(this,ke),Re(this,ke)})}a(he,c,{__proto__:null,value:function(Ae){return r(this,Ae)?!0:this!==he?!1:Ae&&Ae._writableState instanceof W}}),he.prototype.pipe=function(){K(this,new C)};function ae(Ae,z,ke,Ne){const ce=Ae._writableState;if(typeof ke=="function")Ne=ke,ke=ce.defaultEncoding;else{if(!ke)ke=ce.defaultEncoding;else if(ke!=="buffer"&&!m.isEncoding(ke))throw new B(ke);typeof Ne!="function"&&(Ne=Q)}if(z===null)throw new I;if(!ce.objectMode)if(typeof z=="string")ce.decodeStrings!==!1&&(z=m.from(z,ke),ke="buffer");else if(z instanceof m)ke="buffer";else if(h._isUint8Array(z))z=h._uint8ArrayToBuffer(z),ke="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],z);let ie;return ce.ending?ie=new D:ce.destroyed&&(ie=new A("write")),ie?(e.nextTick(Ne,ie),K(Ae,ie,!0),ie):(ce.pendingcb++,re(Ae,ce,z,ke,Ne))}he.prototype.write=function(Ae,z,ke){return ae(this,Ae,z,ke)===!0},he.prototype.cork=function(){this._writableState.corked++},he.prototype.uncork=function(){const Ae=this._writableState;Ae.corked&&(Ae.corked--,Ae.writing||be(this,Ae))},he.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=s(z)),!m.isEncoding(z))throw new B(z);return this._writableState.defaultEncoding=z,this};function re(Ae,z,ke,Ne,ce){const ie=z.objectMode?1:ke.length;z.length+=ie;const J=z.length<z.highWaterMark;return J||(z.needDrain=!0),z.writing||z.corked||z.errored||!z.constructed?(z.buffered.push({chunk:ke,encoding:Ne,callback:ce}),z.allBuffers&&Ne!=="buffer"&&(z.allBuffers=!1),z.allNoop&&ce!==Q&&(z.allNoop=!1)):(z.writelen=ie,z.writecb=ce,z.writing=!0,z.sync=!0,Ae._write(ke,Ne,z.onwrite),z.sync=!1),J&&!z.errored&&!z.destroyed}function ee(Ae,z,ke,Ne,ce,ie,J){z.writelen=Ne,z.writecb=J,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new A("write")):ke?Ae._writev(ce,z.onwrite):Ae._write(ce,ie,z.onwrite),z.sync=!1}function se(Ae,z,ke,Ne){--z.pendingcb,Ne(ke),ne(z),K(Ae,ke)}function V(Ae,z){const ke=Ae._writableState,Ne=ke.sync,ce=ke.writecb;if(typeof ce!="function"){K(Ae,new E);return}ke.writing=!1,ke.writecb=null,ke.length-=ke.writelen,ke.writelen=0,z?(z.stack,ke.errored||(ke.errored=z),Ae._readableState&&!Ae._readableState.errored&&(Ae._readableState.errored=z),Ne?e.nextTick(se,Ae,ke,z,ce):se(Ae,ke,z,ce)):(ke.buffered.length>ke.bufferedIndex&&be(Ae,ke),Ne?ke.afterWriteTickInfo!==null&&ke.afterWriteTickInfo.cb===ce?ke.afterWriteTickInfo.count++:(ke.afterWriteTickInfo={count:1,cb:ce,stream:Ae,state:ke},e.nextTick(X,ke.afterWriteTickInfo)):Y(Ae,ke,1,ce))}function X({stream:Ae,state:z,count:ke,cb:Ne}){return z.afterWriteTickInfo=null,Y(Ae,z,ke,Ne)}function Y(Ae,z,ke,Ne){for(!z.ending&&!Ae.destroyed&&z.length===0&&z.needDrain&&(z.needDrain=!1,Ae.emit("drain"));ke-- >0;)z.pendingcb--,Ne();z.destroyed&&ne(z),Re(Ae,z)}function ne(Ae){if(Ae.writing)return;for(let ce=Ae.bufferedIndex;ce<Ae.buffered.length;++ce){var z;const{chunk:ie,callback:J}=Ae.buffered[ce],_e=Ae.objectMode?1:ie.length;Ae.length-=_e,J((z=Ae.errored)!==null&&z!==void 0?z:new A("write"))}const ke=Ae[F].splice(0);for(let ce=0;ce<ke.length;ce++){var Ne;ke[ce]((Ne=Ae.errored)!==null&&Ne!==void 0?Ne:new A("end"))}U(Ae)}function be(Ae,z){if(z.corked||z.bufferProcessing||z.destroyed||!z.constructed)return;const{buffered:ke,bufferedIndex:Ne,objectMode:ce}=z,ie=ke.length-Ne;if(!ie)return;let J=Ne;if(z.bufferProcessing=!0,ie>1&&Ae._writev){z.pendingcb-=ie-1;const _e=z.allNoop?Q:xe=>{for(let Ve=J;Ve<ke.length;++Ve)ke[Ve].callback(xe)},Le=z.allNoop&&J===0?ke:t(ke,J);Le.allBuffers=z.allBuffers,ee(Ae,z,!0,z.length,Le,"",_e),U(z)}else{do{const{chunk:_e,encoding:Le,callback:xe}=ke[J];ke[J++]=null;const Ve=ce?1:_e.length;ee(Ae,z,!1,Ve,_e,Le,xe)}while(J<ke.length&&!z.writing);J===ke.length?U(z):J>256?(ke.splice(0,J),z.bufferedIndex=0):z.bufferedIndex=J}z.bufferProcessing=!1}he.prototype._write=function(Ae,z,ke){if(this._writev)this._writev([{chunk:Ae,encoding:z}],ke);else throw new S("_write()")},he.prototype._writev=null,he.prototype.end=function(Ae,z,ke){const Ne=this._writableState;typeof Ae=="function"?(ke=Ae,Ae=null,z=null):typeof z=="function"&&(ke=z,z=null);let ce;if(Ae!=null){const ie=ae(this,Ae,z);ie instanceof n&&(ce=ie)}return Ne.corked&&(Ne.corked=1,this.uncork()),ce||(!Ne.errored&&!Ne.ending?(Ne.ending=!0,Re(this,Ne,!0),Ne.ended=!0):Ne.finished?ce=new O("end"):Ne.destroyed&&(ce=new A("end"))),typeof ke=="function"&&(ce||Ne.finished?e.nextTick(ke,ce):Ne[F].push(ke)),this};function Ee(Ae){return Ae.ending&&!Ae.destroyed&&Ae.constructed&&Ae.length===0&&!Ae.errored&&Ae.buffered.length===0&&!Ae.finished&&!Ae.writing&&!Ae.errorEmitted&&!Ae.closeEmitted}function De(Ae,z){let ke=!1;function Ne(ce){if(ke){K(Ae,ce??E());return}if(ke=!0,z.pendingcb--,ce){const ie=z[F].splice(0);for(let J=0;J<ie.length;J++)ie[J](ce);K(Ae,ce,z.sync)}else Ee(z)&&(z.prefinished=!0,Ae.emit("prefinish"),z.pendingcb++,e.nextTick(Te,Ae,z))}z.sync=!0,z.pendingcb++;try{Ae._final(Ne)}catch(ce){Ne(ce)}z.sync=!1}function Pe(Ae,z){!z.prefinished&&!z.finalCalled&&(typeof Ae._final=="function"&&!z.destroyed?(z.finalCalled=!0,De(Ae,z)):(z.prefinished=!0,Ae.emit("prefinish")))}function Re(Ae,z,ke){Ee(z)&&(Pe(Ae,z),z.pendingcb===0&&(ke?(z.pendingcb++,e.nextTick((Ne,ce)=>{Ee(ce)?Te(Ne,ce):ce.pendingcb--},Ae,z)):Ee(z)&&(z.pendingcb++,Te(Ae,z))))}function Te(Ae,z){z.pendingcb--,z.finished=!0;const ke=z[F].splice(0);for(let Ne=0;Ne<ke.length;Ne++)ke[Ne]();if(Ae.emit("finish"),z.autoDestroy){const Ne=Ae._readableState;(!Ne||Ne.autoDestroy&&(Ne.endEmitted||Ne.readable===!1))&&Ae.destroy()}}i(he.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ae){this._writableState&&(this._writableState.destroyed=Ae)}},writable:{__proto__:null,get(){const Ae=this._writableState;return!!Ae&&Ae.writable!==!1&&!Ae.destroyed&&!Ae.errored&&!Ae.ending&&!Ae.ended},set(Ae){this._writableState&&(this._writableState.writable=!!Ae)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ae=this._writableState;return Ae?!Ae.destroyed&&!Ae.ending&&Ae.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const He=g.destroy;he.prototype.destroy=function(Ae,z){const ke=this._writableState;return!ke.destroyed&&(ke.bufferedIndex<ke.buffered.length||ke[F].length)&&e.nextTick(ne,ke),He.call(this,Ae,z),this},he.prototype._undestroy=g.undestroy,he.prototype._destroy=function(Ae,z){z(Ae)},he.prototype[f.captureRejectionSymbol]=function(Ae){this.destroy(Ae)};let it;function Ie(){return it===void 0&&(it={}),it}return he.fromWeb=function(Ae,z){return Ie().newStreamWritableFromWritableStream(Ae,z)},he.toWeb=function(Ae){return Ie().newWritableStreamFromStreamWritable(Ae)},nS}var rS,cI;function xX(){if(cI)return rS;cI=1;const e=Ad(),t=mc(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=Gl(),h=gc(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:w}}=fi(),{destroyer:v}=Ah(),_=Fl(),x=Ew(),S=rk(),{createDeferredPromise:E}=Ci(),C=jj(),A=globalThis.Blob||t.Blob,O=typeof A<"u"?function(W){return W instanceof A}:function(W){return!1},I=globalThis.AbortController||$m().AbortController,{FunctionPrototypeCall:D}=Ur();class B extends _{constructor(W){super(W),(W==null?void 0:W.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(W==null?void 0:W.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}rS=function F(W,U){if(u(W))return W;if(o(W))return Q({readable:W});if(s(W))return Q({writable:W});if(i(W))return Q({writable:!1,readable:!1});if(c(W))return Q({readable:x.fromWeb(W)});if(f(W))return Q({writable:S.fromWeb(W)});if(typeof W=="function"){const{value:ae,write:re,final:ee,destroy:se}=K(W);if(a(ae))return C(B,ae,{objectMode:!0,write:re,final:ee,destroy:se});const V=ae==null?void 0:ae.then;if(typeof V=="function"){let X;const Y=D(V,ae,ne=>{if(ne!=null)throw new w("nully","body",ne)},ne=>{v(X,ne)});return X=new B({objectMode:!0,readable:!1,write:re,final(ne){ee(async()=>{try{await Y,e.nextTick(ne,null)}catch(be){e.nextTick(ne,be)}})},destroy:se})}throw new w("Iterable, AsyncIterable or AsyncFunction",U,ae)}if(O(W))return F(W.arrayBuffer());if(a(W))return C(B,W,{objectMode:!0,writable:!1});if(c(W==null?void 0:W.readable)&&f(W==null?void 0:W.writable))return B.fromWeb(W);if(typeof(W==null?void 0:W.writable)=="object"||typeof(W==null?void 0:W.readable)=="object"){const ae=W!=null&&W.readable?o(W==null?void 0:W.readable)?W==null?void 0:W.readable:F(W.readable):void 0,re=W!=null&&W.writable?s(W==null?void 0:W.writable)?W==null?void 0:W.writable:F(W.writable):void 0;return Q({readable:ae,writable:re})}const he=W==null?void 0:W.then;if(typeof he=="function"){let ae;return D(he,W,re=>{re!=null&&ae.push(re),ae.push(null)},re=>{v(ae,re)}),ae=new B({objectMode:!0,writable:!1,read(){}})}throw new g(U,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],W)};function K(F){let{promise:W,resolve:U}=E();const he=new I,ae=he.signal;return{value:F(async function*(){for(;;){const ee=W;W=null;const{chunk:se,done:V,cb:X}=await ee;if(e.nextTick(X),V)return;if(ae.aborted)throw new m(void 0,{cause:ae.reason});({promise:W,resolve:U}=E()),yield se}}(),{signal:ae}),write(ee,se,V){const X=U;U=null,X({chunk:ee,done:!1,cb:V})},final(ee){const se=U;U=null,se({done:!0,cb:ee})},destroy(ee,se){he.abort(),se(ee)}}}function Q(F){const W=F.readable&&typeof F.readable.read!="function"?x.wrap(F.readable):F.readable,U=F.writable;let he=!!n(W),ae=!!r(U),re,ee,se,V,X;function Y(ne){const be=V;V=null,be?be(ne):ne&&X.destroy(ne)}return X=new B({readableObjectMode:!!(W!=null&&W.readableObjectMode),writableObjectMode:!!(U!=null&&U.writableObjectMode),readable:he,writable:ae}),ae&&(h(U,ne=>{ae=!1,ne&&v(W,ne),Y(ne)}),X._write=function(ne,be,Ee){U.write(ne,be)?Ee():re=Ee},X._final=function(ne){U.end(),ee=ne},U.on("drain",function(){if(re){const ne=re;re=null,ne()}}),U.on("finish",function(){if(ee){const ne=ee;ee=null,ne()}})),he&&(h(W,ne=>{he=!1,ne&&v(W,ne),Y(ne)}),W.on("readable",function(){if(se){const ne=se;se=null,ne()}}),W.on("end",function(){X.push(null)}),X._read=function(){for(;;){const ne=W.read();if(ne===null){se=X._read;return}if(!X.push(ne))return}}),X._destroy=function(ne,be){!ne&&V!==null&&(ne=new m),se=null,re=null,ee=null,V===null?be(ne):(V=be,v(U,ne),v(W,ne))},X}return rS}var aS,dI;function Fl(){if(dI)return aS;dI=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Ur();aS=o;const a=Ew(),i=rk();r(o.prototype,a.prototype),r(o,a);{const f=n(i.prototype);for(let h=0;h<f.length;h++){const m=f[h];o.prototype[m]||(o.prototype[m]=i.prototype[m])}}function o(f){if(!(this instanceof o))return new o(f);a.call(this,f),i.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let s;function u(){return s===void 0&&(s={}),s}o.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},o.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return o.from=function(f){return c||(c=xX()),c(f,"body")},aS}var iS,fI;function Mj(){if(fI)return iS;fI=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Ur();iS=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=fi().codes,r=Fl(),{getHighWaterMark:a}=Sw();e(o.prototype,r.prototype),e(o,r);const i=t("kCallback");function o(c){if(!(this instanceof o))return new o(c);const f=c?a(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[i]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function s(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(c,f,h){throw new n("_transform()")},o.prototype._write=function(c,f,h){const m=this._readableState,g=this._writableState,w=m.length;this._transform(c,f,(v,_)=>{if(v){h(v);return}_!=null&&this.push(_),g.ended||w===m.length||m.length<m.highWaterMark?h():this[i]=h})},o.prototype._read=function(){if(this[i]){const c=this[i];this[i]=null,c()}},iS}var oS,hI;function Pj(){if(hI)return oS;hI=1;const{ObjectSetPrototypeOf:e}=Ur();oS=n;const t=Mj();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},oS}var sS,pI;function ak(){if(pI)return sS;pI=1;const e=Ad(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Ur(),i=gc(),{once:o}=Ci(),s=Ah(),u=Fl(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:v}=fi(),{validateFunction:_,validateAbortSignal:x}=I0(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:A,isTransformStream:O,isWebStream:I,isReadableStream:D,isReadableFinished:B}=Gl(),K=globalThis.AbortController||$m().AbortController;let Q,F,W;function U(ne,be,Ee){let De=!1;ne.on("close",()=>{De=!0});const Pe=i(ne,{readable:be,writable:Ee},Re=>{De=!Re});return{destroy:Re=>{De||(De=!0,s.destroyer(ne,Re||new g("pipe")))},cleanup:Pe}}function he(ne){return _(ne[ne.length-1],"streams[stream.length - 1]"),ne.pop()}function ae(ne){if(S(ne))return ne;if(C(ne))return re(ne);throw new f("val",["Readable","Iterable","AsyncIterable"],ne)}async function*re(ne){F||(F=Ew()),yield*F.prototype[r].call(ne)}async function ee(ne,be,Ee,{end:De}){let Pe,Re=null;const Te=Ie=>{if(Ie&&(Pe=Ie),Re){const Ae=Re;Re=null,Ae()}},He=()=>new n((Ie,Ae)=>{Pe?Ae(Pe):Re=()=>{Pe?Ae(Pe):Ie()}});be.on("drain",Te);const it=i(be,{readable:!1},Te);try{be.writableNeedDrain&&await He();for await(const Ie of ne)be.write(Ie)||await He();De&&(be.end(),await He()),Ee()}catch(Ie){Ee(Pe!==Ie?c(Pe,Ie):Ie)}finally{it(),be.off("drain",Te)}}async function se(ne,be,Ee,{end:De}){O(be)&&(be=be.writable);const Pe=be.getWriter();try{for await(const Re of ne)await Pe.ready,Pe.write(Re).catch(()=>{});await Pe.ready,De&&await Pe.close(),Ee()}catch(Re){try{await Pe.abort(Re),Ee(Re)}catch(Te){Ee(Te)}}}function V(...ne){return X(ne,o(he(ne)))}function X(ne,be,Ee){if(ne.length===1&&t(ne[0])&&(ne=ne[0]),ne.length<2)throw new m("streams");const De=new K,Pe=De.signal,Re=Ee==null?void 0:Ee.signal,Te=[];x(Re,"options.signal");function He(){ce(new v)}W=W||Ci().addAbortListener;let it;Re&&(it=W(Re,He));let Ie,Ae;const z=[];let ke=0;function Ne(xe){ce(xe,--ke===0)}function ce(xe,Ve){var xt;if(xe&&(!Ie||Ie.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Ie=xe),!(!Ie&&!Ve)){for(;z.length;)z.shift()(Ie);(xt=it)===null||xt===void 0||xt[a](),De.abort(),Ve&&(Ie||Te.forEach(ht=>ht()),e.nextTick(be,Ie,Ae))}}let ie;for(let xe=0;xe<ne.length;xe++){const Ve=ne[xe],xt=xe<ne.length-1,ht=xe>0,Et=xt||(Ee==null?void 0:Ee.end)!==!1,Lt=xe===ne.length-1;if(A(Ve)){let Tt=function(zt){zt&&zt.name!=="AbortError"&&zt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ne(zt)};var Le=Tt;if(Et){const{destroy:zt,cleanup:ge}=U(Ve,xt,ht);z.push(zt),E(Ve)&&Lt&&Te.push(ge)}Ve.on("error",Tt),E(Ve)&&Lt&&Te.push(()=>{Ve.removeListener("error",Tt)})}if(xe===0)if(typeof Ve=="function"){if(ie=Ve({signal:Pe}),!S(ie))throw new h("Iterable, AsyncIterable or Stream","source",ie)}else S(Ve)||C(Ve)||O(Ve)?ie=Ve:ie=u.from(Ve);else if(typeof Ve=="function"){if(O(ie)){var J;ie=ae((J=ie)===null||J===void 0?void 0:J.readable)}else ie=ae(ie);if(ie=Ve(ie,{signal:Pe}),xt){if(!S(ie,!0))throw new h("AsyncIterable",`transform[${xe-1}]`,ie)}else{var _e;Q||(Q=Pj());const Tt=new Q({objectMode:!0}),zt=(_e=ie)===null||_e===void 0?void 0:_e.then;if(typeof zt=="function")ke++,zt.call(ie,H=>{Ae=H,H!=null&&Tt.write(H),Et&&Tt.end(),e.nextTick(Ne)},H=>{Tt.destroy(H),e.nextTick(Ne,H)});else if(S(ie,!0))ke++,ee(ie,Tt,Ne,{end:Et});else if(D(ie)||O(ie)){const H=ie.readable||ie;ke++,ee(H,Tt,Ne,{end:Et})}else throw new h("AsyncIterable or Promise","destination",ie);ie=Tt;const{destroy:ge,cleanup:N}=U(ie,!1,!0);z.push(ge),Lt&&Te.push(N)}}else if(A(Ve)){if(C(ie)){ke+=2;const Tt=Y(ie,Ve,Ne,{end:Et});E(Ve)&&Lt&&Te.push(Tt)}else if(O(ie)||D(ie)){const Tt=ie.readable||ie;ke++,ee(Tt,Ve,Ne,{end:Et})}else if(S(ie))ke++,ee(ie,Ve,Ne,{end:Et});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ve}else if(I(Ve)){if(C(ie))ke++,se(ae(ie),Ve,Ne,{end:Et});else if(D(ie)||S(ie))ke++,se(ie,Ve,Ne,{end:Et});else if(O(ie))ke++,se(ie.readable,Ve,Ne,{end:Et});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ve}else ie=u.from(Ve)}return(Pe!=null&&Pe.aborted||Re!=null&&Re.aborted)&&e.nextTick(He),ie}function Y(ne,be,Ee,{end:De}){let Pe=!1;if(be.on("close",()=>{Pe||Ee(new w)}),ne.pipe(be,{end:!1}),De){let Te=function(){Pe=!0,be.end()};var Re=Te;B(ne)?e.nextTick(Te):ne.once("end",Te)}else Ee();return i(ne,{readable:!0,writable:!1},Te=>{const He=ne._readableState;Te&&Te.code==="ERR_STREAM_PREMATURE_CLOSE"&&He&&He.ended&&!He.errored&&!He.errorEmitted?ne.once("end",Ee).once("error",Ee):Ee(Te)}),i(be,{readable:!1,writable:!0},Ee)}return sS={pipelineImpl:X,pipeline:V},sS}var lS,mI;function Fj(){if(mI)return lS;mI=1;const{pipeline:e}=ak(),t=Fl(),{destroyer:n}=Ah(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:o,isTransformStream:s,isWritableStream:u,isReadableStream:c}=Gl(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=fi(),g=gc();return lS=function(...v){if(v.length===0)throw new m("streams");if(v.length===1)return t.from(v[0]);const _=[...v];if(typeof v[0]=="function"&&(v[0]=t.from(v[0])),typeof v[v.length-1]=="function"){const Q=v.length-1;v[Q]=t.from(v[Q])}for(let Q=0;Q<v.length;++Q)if(!(!r(v[Q])&&!o(v[Q]))){if(Q<v.length-1&&!(a(v[Q])||c(v[Q])||s(v[Q])))throw new h(`streams[${Q}]`,_[Q],"must be readable");if(Q>0&&!(i(v[Q])||u(v[Q])||s(v[Q])))throw new h(`streams[${Q}]`,_[Q],"must be writable")}let x,S,E,C,A;function O(Q){const F=C;C=null,F?F(Q):Q?A.destroy(Q):!K&&!B&&A.destroy()}const I=v[0],D=e(v,O),B=!!(i(I)||u(I)||s(I)),K=!!(a(D)||c(D)||s(D));if(A=new t({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(D!=null&&D.readableObjectMode),writable:B,readable:K}),B){if(r(I))A._write=function(F,W,U){I.write(F,W)?U():x=U},A._final=function(F){I.end(),S=F},I.on("drain",function(){if(x){const F=x;x=null,F()}});else if(o(I)){const W=(s(I)?I.writable:I).getWriter();A._write=async function(U,he,ae){try{await W.ready,W.write(U).catch(()=>{}),ae()}catch(re){ae(re)}},A._final=async function(U){try{await W.ready,W.close().catch(()=>{}),S=U}catch(he){U(he)}}}const Q=s(D)?D.readable:D;g(Q,()=>{if(S){const F=S;S=null,F()}})}if(K){if(r(D))D.on("readable",function(){if(E){const Q=E;E=null,Q()}}),D.on("end",function(){A.push(null)}),A._read=function(){for(;;){const Q=D.read();if(Q===null){E=A._read;return}if(!A.push(Q))return}};else if(o(D)){const F=(s(D)?D.readable:D).getReader();A._read=async function(){for(;;)try{const{value:W,done:U}=await F.read();if(!A.push(W))return;if(U){A.push(null);return}}catch{return}}}}return A._destroy=function(Q,F){!Q&&C!==null&&(Q=new f),E=null,x=null,S=null,C===null?F(Q):(C=F,r(D)&&n(D,Q))},A},lS}var gI;function SX(){if(gI)return Uy;gI=1;const e=globalThis.AbortController||$m().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=fi(),{validateAbortSignal:o,validateInteger:s,validateObject:u}=I0(),c=Ur().Symbol("kWeak"),f=Ur().Symbol("kResistStopPropagation"),{finished:h}=gc(),m=Fj(),{addAbortSignalNoValidate:g}=xw(),{isWritable:w,isNodeStream:v}=Gl(),{deprecate:_}=Ci(),{ArrayPrototypePush:x,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:A,Promise:O,PromiseReject:I,PromiseResolve:D,PromisePrototypeThen:B,Symbol:K}=Ur(),Q=K("kEmpty"),F=K("kEof");function W(Re,Te){if(Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),v(Re)&&!w(Re))throw new t("stream",Re,"must be writable");const He=m(this,Re);return Te!=null&&Te.signal&&g(Te.signal,He),He}function U(Re,Te){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal");let He=1;(Te==null?void 0:Te.concurrency)!=null&&(He=E(Te.concurrency));let it=He-1;return(Te==null?void 0:Te.highWaterMark)!=null&&(it=E(Te.highWaterMark)),s(He,"options.concurrency",1),s(it,"options.highWaterMark",0),it+=He,(async function*(){const Ae=Ci().AbortSignalAny([Te==null?void 0:Te.signal].filter(S)),z=this,ke=[],Ne={signal:Ae};let ce,ie,J=!1,_e=0;function Le(){J=!0,xe()}function xe(){_e-=1,Ve()}function Ve(){ie&&!J&&_e<He&&ke.length<it&&(ie(),ie=null)}async function xt(){try{for await(let ht of z){if(J)return;if(Ae.aborted)throw new i;try{if(ht=Re(ht,Ne),ht===Q)continue;ht=D(ht)}catch(Et){ht=I(Et)}_e+=1,B(ht,xe,Le),ke.push(ht),ce&&(ce(),ce=null),!J&&(ke.length>=it||_e>=He)&&await new O(Et=>{ie=Et})}ke.push(F)}catch(ht){const Et=I(ht);B(Et,xe,Le),ke.push(Et)}finally{J=!0,ce&&(ce(),ce=null)}}xt();try{for(;;){for(;ke.length>0;){const ht=await ke[0];if(ht===F)return;if(Ae.aborted)throw new i;ht!==Q&&(yield ht),ke.shift(),Ve()}await new O(ht=>{ce=ht})}}finally{J=!0,ie&&(ie(),ie=null)}}).call(this)}function he(Re=void 0){return Re!=null&&u(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal"),(async function*(){let He=0;for await(const Ie of this){var it;if(Re!=null&&(it=Re.signal)!==null&&it!==void 0&&it.aborted)throw new i({cause:Re.signal.reason});yield[He++,Ie]}}).call(this)}async function ae(Re,Te=void 0){for await(const He of V.call(this,Re,Te))return!0;return!1}async function re(Re,Te=void 0){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);return!await ae.call(this,async(...He)=>!await Re(...He),Te)}async function ee(Re,Te){for await(const He of V.call(this,Re,Te))return He}async function se(Re,Te){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function He(it,Ie){return await Re(it,Ie),Q}for await(const it of U.call(this,He,Te));}function V(Re,Te){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function He(it,Ie){return await Re(it,Ie)?it:Q}return U.call(this,He,Te)}class X extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Y(Re,Te,He){var it;if(typeof Re!="function")throw new n("reducer",["Function","AsyncFunction"],Re);He!=null&&u(He,"options"),(He==null?void 0:He.signal)!=null&&o(He.signal,"options.signal");let Ie=arguments.length>1;if(He!=null&&(it=He.signal)!==null&&it!==void 0&&it.aborted){const ce=new i(void 0,{cause:He.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(ce)),ce}const Ae=new e,z=Ae.signal;if(He!=null&&He.signal){const ce={once:!0,[c]:this,[f]:!0};He.signal.addEventListener("abort",()=>Ae.abort(),ce)}let ke=!1;try{for await(const ce of this){var Ne;if(ke=!0,He!=null&&(Ne=He.signal)!==null&&Ne!==void 0&&Ne.aborted)throw new i;Ie?Te=await Re(Te,ce,{signal:z}):(Te=ce,Ie=!0)}if(!ke&&!Ie)throw new X}finally{Ae.abort()}return Te}async function ne(Re){Re!=null&&u(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal");const Te=[];for await(const it of this){var He;if(Re!=null&&(He=Re.signal)!==null&&He!==void 0&&He.aborted)throw new i(void 0,{cause:Re.signal.reason});x(Te,it)}return Te}function be(Re,Te){const He=U.call(this,Re,Te);return(async function*(){for await(const Ie of He)yield*Ie}).call(this)}function Ee(Re){if(Re=C(Re),A(Re))return 0;if(Re<0)throw new a("number",">= 0",Re);return Re}function De(Re,Te=void 0){return Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),Re=Ee(Re),(async function*(){var it;if(Te!=null&&(it=Te.signal)!==null&&it!==void 0&&it.aborted)throw new i;for await(const Ae of this){var Ie;if(Te!=null&&(Ie=Te.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new i;Re--<=0&&(yield Ae)}}).call(this)}function Pe(Re,Te=void 0){return Te!=null&&u(Te,"options"),(Te==null?void 0:Te.signal)!=null&&o(Te.signal,"options.signal"),Re=Ee(Re),(async function*(){var it;if(Te!=null&&(it=Te.signal)!==null&&it!==void 0&&it.aborted)throw new i;for await(const Ae of this){var Ie;if(Te!=null&&(Ie=Te.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new i;if(Re-- >0&&(yield Ae),Re<=0)return}}).call(this)}return Uy.streamReturningOperators={asIndexedPairs:_(he,"readable.asIndexedPairs will be removed in a future version."),drop:De,filter:V,flatMap:be,map:U,take:Pe,compose:W},Uy.promiseReturningOperators={every:re,forEach:se,reduce:Y,toArray:ne,some:ae,find:ee},Uy}var uS,yI;function Lj(){if(yI)return uS;yI=1;const{ArrayPrototypePop:e,Promise:t}=Ur(),{isIterable:n,isNodeStream:r,isWebStream:a}=Gl(),{pipelineImpl:i}=ak(),{finished:o}=gc();$j();function s(...u){return new t((c,f)=>{let h,m;const g=u[u.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const w=e(u);h=w.signal,m=w.end}i(u,(w,v)=>{w?f(w):c(v)},{signal:h,end:m})})}return uS={finished:o,pipeline:s},uS}var bI;function $j(){if(bI)return $x.exports;bI=1;const{Buffer:e}=mc(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Ur(),{promisify:{custom:a}}=Ci(),{streamReturningOperators:i,promiseReturningOperators:o}=SX(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=fi(),u=Fj(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=Sw(),{pipeline:h}=ak(),{destroyer:m}=Ah(),g=gc(),w=Lj(),v=Gl(),_=$x.exports=tk().Stream;_.isDestroyed=v.isDestroyed,_.isDisturbed=v.isDisturbed,_.isErrored=v.isErrored,_.isReadable=v.isReadable,_.isWritable=v.isWritable,_.Readable=Ew();for(const E of n(i)){let A=function(...O){if(new.target)throw s();return _.Readable.from(r(C,this,O))};var S=A;const C=i[E];t(A,"name",{__proto__:null,value:C.name}),t(A,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(o)){let A=function(...I){if(new.target)throw s();return r(C,this,I)};var S=A;const C=o[E];t(A,"name",{__proto__:null,value:C.name}),t(A,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}_.Writable=rk(),_.Duplex=Fl(),_.Transform=Mj(),_.PassThrough=Pj(),_.pipeline=h;const{addAbortSignal:x}=xw();return _.addAbortSignal=x,_.finished=g,_.destroy=m,_.compose=u,_.setDefaultHighWaterMark=c,_.getDefaultHighWaterMark=f,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return w}}),t(h,a,{__proto__:null,enumerable:!0,get(){return w.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return w.finished}}),_.Stream=_,_._isUint8Array=function(C){return C instanceof Uint8Array},_._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},$x.exports}var vI;function EX(){return vI||(vI=1,function(e){const t=$j(),n=Lj(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(Lx)),Lx.exports}var Bj=EX();class ik extends Bj.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(st.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(st.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class ok extends Bj.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(Ka(new Ue(st.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(Ka(new Ue(st.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(st.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(st.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(st.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var xo=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},So=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Za{get position(){return this.flag&ud?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=ei(t,n);Object.assign(this,bd(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&yw||this.inode.flags&xi.Sync)}_emitChange(){La(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,yj(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=hc(t,-1);if(n<0)throw new Ue(st.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>yr?-61441:yr)|n,(this._isSync||n>yr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(st.EINVAL);if(this.dirty=!0,!(this.flag&Wa||this.flag&Tl))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=$b(t),this.inode.mtimeMs=$b(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Rl(n,"utf8","a",420);if(!(Nl(r.flag)&ud))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const i=typeof t=="string"?Rr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Wa)throw new Ue(st.EPERM,"File not opened with a readable mode");this.inode.flags&xi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Pm(this.inode)&&!Mm(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=Rl(t,null,"r",292);if(Nl(n.flag)&Wa)throw new Ue(st.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),o=Rr.from(i);return n.encoding?o.toString(n.encoding):o}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&xi.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Wa)throw Ue.With("EBADF",this.path,"readLines");return qY({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!ir(this.context,this.inode,ha))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new Ed(this.inode):new Vl(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&xi.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Wa||this.flag&Tl))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Pm(this.inode)&&!Mm(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,await this.fs.write(this.internalPath,o,a),this._isSync&&await this.sync(),o.byteLength}async write(t,n,r,a){let i,o,s;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,o=0,i=Rr.from(t,typeof r=="string"?r:"utf8"),s=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n??0,s=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const u=await this._write(i,o,s,a);return this._emitChange(),{buffer:t,bytesWritten:u}}async writeFile(t,n={}){const r=Rl(n,"utf8","w",420),a=Nl(r.flag);if(!(a&Wa||a&Tl))throw new Ue(st.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const i=typeof t=="string"?Rr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),_j(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Wa)throw Ue.With("EBADF",this.path,"createReadStream");return new ik(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&xi.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"createWriteStream");return new ok(t,this)}}async function sk(e,t){e=ln(e),t=ln(t);const n=jn(e,this),r=jn(t,this);if(!(await _o.call(this,Yn(e))).hasAccess(Gr,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),La(this,"rename",e.toString()),La(this,"change",t.toString());return}await M0.call(this,t,await j0(e)),await D0.call(this,e),La(this,"rename",e.toString())}catch(a){throw or(a,{[n.path]:e,[r.path]:t})}}async function O0(e){try{const{fs:t,path:n}=jn(await bc.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function _o(e,t){e=ln(e);const{fs:n,path:r}=jn(await bc.call(this,e),this);try{const a=await n.stat(r);if(pa&&!ir(this,a,ha))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Ed(a):new Vl(a)}catch(a){throw or(a,{[r]:e})}}async function Cw(e,t){e=ln(e);const{fs:n,path:r}=jn(e,this);try{const a=await n.stat(r);if(pa&&!ir(this,a,ha))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Ed(a):new Vl(a)}catch(a){throw or(a,{[r]:e})}}async function zj(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await xo(n,await Eo.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=So(n);r&&await r}}async function D0(e){e=ln(e);const{fs:t,path:n}=jn(e,this);try{if(pa&&!ir(this,await t.stat(n),Gr))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),La(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}async function Th(e,t,n){var r;t=ln(t);const a=hc(n.mode,420),i=Nl(n.flag),{fullPath:o,fs:s,path:u,stats:c}=await qb(e,t.toString(),n.preserveSymlinks);if(!c){if(!(i&pw))throw Ue.With("ENOENT",o,"_open");const h=await s.stat(Yn(u));if(!ir(e,h,Gr))throw Ue.With("EACCES",Yn(o),"_open");if(!Ko(h))throw Ue.With("ENOTDIR",Yn(o),"_open");const{euid:m,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:es.credentials,w=await s.createFile(u,{mode:a,uid:h.mode&A0?h.uid:m,gid:h.mode&T0?h.gid:g});return new Za(e,zb(new Bb(e,t,s,u,i,w)))}if(!ir(e,c,xj(i)))throw Ue.With("EACCES",o,"_open");if(i&mw)throw Ue.With("EEXIST",o,"_open");const f=new Za(e,zb(new Bb(e,t,s,u,i,c)));return i&gw&&await f.truncate(0),f}async function Eo(e,t="r",n=420){return await Th(this,e,{flag:t,mode:n})}async function j0(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Rl(t,null,"r",292);return await xo(n,typeof e=="object"&&"fd"in e?e:await Eo.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=So(n);r&&await r}}async function M0(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Rl(n,"utf8","w+",420),i=xo(r,e instanceof Za?e:await Eo.call(this,e.toString(),a.flag,a.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new Ue(st.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=So(r);a&&await a}}async function Uj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Rl(n,"utf8","a",420);if(!(Nl(a.flag)&ud))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await xo(r,typeof e=="object"&&"fd"in e?e:await Eo.call(this,e,a.flag,a.mode),!0).appendFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=So(r);a&&await a}}async function lk(e){e=await bc.call(this,e);const{fs:t,path:n}=jn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!Ko(r))throw Ue.With("ENOTDIR",n,"rmdir");if(pa&&!ir(this,r,Gr))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),La(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}async function P0(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:es.credentials;t=typeof t=="object"?t:{mode:t};const o=hc(t==null?void 0:t.mode,511);e=await bc.call(this,e);const{fs:s,path:u,root:c}=jn(e,this),f={[u]:e},h=async(m,g)=>{if(!ir(this,g,Gr))throw Ue.With("EACCES",Yn(m),"mkdir");const w=await s.mkdir(m,{mode:o,uid:g.mode&A0?g.uid:a,gid:g.mode&T0?g.gid:i});return La(this,"rename",m),w};try{if(!(t!=null&&t.recursive)){await h(u,await s.stat(Yn(u)));return}const m=[];for(let w=u,v=e;!await s.exists(w);w=Yn(w),v=Yn(v))m.unshift(w),f[w]=v;if(!m.length)return;const g=[await s.stat(Yn(m[0]))];for(const[w,v]of m.entries())g.push(await h(v,g[w]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw or(m,f)}}async function yc(e,t){t=typeof t=="object"?t:{encoding:t},e=await bc.call(this,e);const{fs:n,path:r}=jn(e,this),a=await n.stat(r).catch(u=>ur(or(u,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!ir(this,a,ha))throw Ue.With("EACCES",e,"readdir");if(!Ko(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(u=>ur(or(u,{[r]:e}))),o=[],s=async u=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(tr(r,u)).catch(f=>{if(f.code!="ENOENT")throw or(f,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?o.push(new Lm(u,c)):(t==null?void 0:t.encoding)=="buffer"?o.push(Rr.from(u)):o.push(u),!(!(t!=null&&t.recursive)||!Ko(c))))for(const f of await yc.call(this,tr(e,u),t))f instanceof Lm?(f.path=tr(u,f.path),o.push(f)):Rr.isBuffer(f)?o.push(Rr.from(tr(u,IC(f)))):o.push(tr(u,f))};return await Promise.all(i.map(s)),o}async function qj(e,t){e=ln(e),t=ln(t);const{fs:n,path:r}=jn(e,this),a=jn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(pa&&!ir(this,await n.stat(Yn(r)),ha))throw Ue.With("EACCES",Yn(r),"link");if(pa&&!(await _o.call(this,Yn(t))).hasAccess(Gr,this))throw Ue.With("EACCES",Yn(t),"link");if(pa&&!ir(this,await n.stat(r),ha))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw or(i,{[a.path]:t,[r]:e})}}async function Hj(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(st.EINVAL,"Invalid symlink type: "+n);if(t=ln(t),await O0.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=xo(r,await Th(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(ln(e,!0)),await a.chmod(Hl)}catch(a){r.error=a,r.hasError=!0}finally{const a=So(r);a&&await a}}async function Ub(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await xo(n,await Th(this,ln(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=So(n);r&&await r}}async function Vj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await xo(r,await Eo.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=So(r);a&&await a}}async function Gj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await xo(r,await Th(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=So(r);a&&await a}}async function Wj(e,t){const n={stack:[],error:void 0,hasError:!1};try{await xo(n,await Eo.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=So(n);r&&await r}}async function Kj(e,t){const n={stack:[],error:void 0,hasError:!1};try{await xo(n,await Th(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=So(n);r&&await r}}async function uk(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await xo(r,await Eo.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=So(r);a&&await a}}async function Zj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await xo(r,await Th(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=So(r);a&&await a}}async function qb(e,t,n){if(n){const u=jn(t,e),c=await u.fs.stat(u.path).catch(()=>{});return{...u,fullPath:t,stats:c}}try{const u=jn(t,e),c=await u.fs.stat(u.path);if(!th(c))return{...u,fullPath:t,stats:c};const f=Pl.call(e,Yn(t),(await Ub.call(e,t)).toString());return await qb(e,f)}catch{}const{base:r,dir:a}=Ss(t),i=a=="/"?"/":await bc.call(e,a),o=tr(i,r),s=jn(o,e);try{const u=await s.fs.stat(s.path);if(!th(u))return{...s,fullPath:o,stats:u};const c=Pl.call(e,i,(await Ub.call(e,o)).toString());return await qb(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw or(u,{[s.path]:o})}}async function bc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=await qb(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Rr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function CX(e,t={}){const n=new kj(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(o,s)=>{var u;(u=r.shift())===null||u===void 0||u({value:{eventType:o,filename:s},done:!1})});function i(){a=!0,n.close();for(const o of r)o({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:o,resolve:s}=Promise.withResolvers();return r.push(s),o},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function Yj(e,t=LC){if(!(await _o.call(this,e)).hasAccess(t,this))throw new Ue(st.EACCES)}async function F0(e,t){e=ln(e);const n=await Cw.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&yr){case aa:if(t!=null&&t.recursive)for(const r of await yc.call(this,e))await F0.call(this,tr(e,r),t);await lk.call(this,e);break;case zo:case Hl:case _d:case xd:await D0.call(this,e);break;case Sd:case wd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}}async function Xj(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await P0.call(this,a),n=="buffer"?Rr.from(a):a}async function ck(e,t,n){if(e=ln(e),t=ln(t),n&&n&$C&&await O0.call(this,t))throw new Ue(st.EEXIST,"Destination file already exists",t,"copyFile");await M0.call(this,t,await j0.call(this,e)),La(this,"rename",t.toString())}function Jj(e,t){return e=ln(e),Promise.resolve(new ek(e,this))}async function dk(e,t,n){e=ln(e),t=ln(t);const r=await Cw.call(this,e);if(n!=null&&n.errorOnExist&&await O0.call(this,t))throw new Ue(st.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&yr){case aa:{if(!(n!=null&&n.recursive))throw new Ue(st.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([yc.call(this,e,{withFileTypes:!0}),P0.call(this,t,{recursive:!0})]),i=async o=>{n.filter&&!n.filter(tr(e,o.name),tr(t,o.name))||await dk.call(this,tr(e,o.name),tr(t,o.name),n)};await Promise.all(a.map(i));break}case zo:case Hl:await ck.call(this,e,t);break;case _d:case xd:case Sd:case wd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await uk.call(this,t,r.atime,r.mtime)}async function Qj(e,t){e=ln(e);const{fs:n}=jn(e,this);return Promise.resolve(Ej(n,t==null?void 0:t.bigint))}function eM(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(s=>(s=s.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${s}$`)));async function*o(s){const u=await yc(s,{withFileTypes:r,encoding:"utf8"});for(const c of u){const f=r?c.path:s+"/"+c;a(r?c:f)||((await _o(f)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*o(f)),i.some(h=>h.test(f.replace(/^\/+/g,"")))&&(yield r?c:f.replace(/^\/+/g,"")))}}return o(n)}const kX=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Za,access:Yj,appendFile:Uj,chmod:Wj,chown:Vj,constants:mj,copyFile:ck,cp:dk,exists:O0,glob:eM,lchmod:Kj,lchown:Gj,link:qj,lstat:Cw,lutimes:Zj,mkdir:P0,mkdtemp:Xj,open:Eo,opendir:Jj,readFile:j0,readdir:yc,readlink:Ub,realpath:bc,rename:sk,rm:F0,rmdir:lk,stat:_o,statfs:Qj,symlink:Hj,truncate:zj,unlink:D0,utimes:uk,watch:CX,writeFile:M0},Symbol.toStringTag,{value:"Module"})),En=()=>{};async function AX(e){const t=[];for await(const n of e)t.push(n);return t}function TX(e,t,n=En){sk.call(this,e,t).then(()=>n()).catch(n)}function RX(e,t=En){O0.call(this,e).then(t).catch(()=>t(!1))}function NX(e,t,n=En){n=typeof t=="function"?t:n,_o.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function IX(e,t,n=En){n=typeof t=="function"?t:n,Cw.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function OX(e,t=0,n=En){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;zj.call(this,e,r).then(()=>n()).catch(n)}function DX(e,t=En){D0.call(this,e).then(()=>t()).catch(t)}function jX(e,t,n,r=En){const a=hc(n,420);r=typeof n=="function"?n:r,Eo.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function MX(e,t,n=En){n=typeof t=="function"?t:n,j0.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function PX(e,t,n,r=En){r=typeof n=="function"?n:r,M0.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function FX(e,t,n,r=En){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,Uj.call(this,e,t,a).then(()=>r()).catch(r)}function LX(e,t,n=En){n=typeof t=="function"?t:n,new Za(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new Ed(r):r)).catch(n)}function $X(e,t=En){new Za(this,e).close().then(()=>t()).catch(t)}function BX(e,t,n=En){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new Za(this,e);if(r<0)throw new Ue(st.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function zX(e,t=En){new Za(this,e).sync().then(()=>t()).catch(t)}function UX(e,t=En){new Za(this,e).datasync().then(()=>t()).catch(t)}function qX(e,t,n,r,a,i=En){let o,s,u,c,f;const h=new Za(this,e);if(typeof t=="string"){switch(f="utf8",typeof n){case"function":i=n;break;case"number":c=n,f=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(st.EINVAL,"Invalid arguments"));return}o=Rr.from(t),s=0,u=o.length;const m=i;h.write(o,s,u,c).then(({bytesWritten:g})=>m(void 0,g,o.toString(f))).catch(m)}else{o=Rr.from(t.buffer),s=n,u=r,c=typeof a=="number"?a:null;const m=typeof a=="function"?a:i;h.write(o,s,u,c).then(({bytesWritten:g})=>m(void 0,g,o)).catch(m)}}function HX(e,t,n,r,a,i=En){new Za(this,e).read(t,n,r,a).then(({bytesRead:o,buffer:s})=>i(void 0,o,s)).catch(i)}function VX(e,t,n,r=En){new Za(this,e).chown(t,n).then(()=>r()).catch(r)}function GX(e,t,n){new Za(this,e).chmod(t).then(()=>n()).catch(n)}function WX(e,t,n,r=En){new Za(this,e).utimes(t,n).then(()=>r()).catch(r)}function KX(e,t=En){lk.call(this,e).then(()=>t()).catch(t)}function ZX(e,t,n=En){P0.call(this,e,t).then(()=>n()).catch(n)}function YX(e,t,n=En){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};yc.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function XX(e,t,n=En){qj.call(this,e,t).then(()=>n()).catch(n)}function JX(e,t,n,r=En){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,Hj.call(this,e,t,a).then(()=>r()).catch(r)}function QX(e,t,n=En){n=typeof t=="function"?t:n,Ub.call(this,e).then(r=>n(void 0,r)).catch(n)}function eJ(e,t,n,r=En){Vj.call(this,e,t,n).then(()=>r()).catch(r)}function tJ(e,t,n,r=En){Gj.call(this,e,t,n).then(()=>r()).catch(r)}function nJ(e,t,n=En){Wj.call(this,e,t).then(()=>n()).catch(n)}function rJ(e,t,n=En){Kj.call(this,e,t).then(()=>n()).catch(n)}function aJ(e,t,n,r=En){uk.call(this,e,t,n).then(()=>r()).catch(r)}function iJ(e,t,n,r=En){Zj.call(this,e,t,n).then(()=>r()).catch(r)}function oJ(e,t,n=En){n=typeof t=="function"?t:n,bc.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function sJ(e,t,n=En){const r=typeof t=="number"?t:ha;n=typeof t=="function"?t:n,Yj.call(this,e,r).then(()=>n()).catch(n)}const Pf=new Map;function lJ(e,t,n){const r=ln(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(st.EINVAL,"No listener specified",e.toString(),"watchFile");if(Pf.has(r)){const o=Pf.get(r);o&&o.listeners.add(n);return}const i=new KY(this,r,a);i.on("change",(o,s)=>{const u=Pf.get(r);if(u)for(const c of u.listeners)c(o,s)}),Pf.set(r,{watcher:i,listeners:new Set})}function uJ(e,t=En){const n=ln(e),r=Pf.get(n);r&&(t&&t!==En?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Pf.delete(n)))}function cJ(e,t,n){const r=new kj(this,ln(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||En),r}function dJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=Eo.call(this,e,"r",t==null?void 0:t.mode);return new ik({...t,autoClose:!0},n)}function fJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=Eo.call(this,e,"w",t==null?void 0:t.mode);return new ok(t,n)}function hJ(e,t,n=En){n=typeof t=="function"?t:n,F0.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function pJ(e,t,n=En){n=typeof t=="function"?t:n,Xj.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function mJ(e,t,n,r=En){r=typeof n=="function"?n:r,ck.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function gJ(e,t,n,r=En){r=typeof n=="function"?n:r,new Za(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function yJ(e,t,n,r=En){r=typeof n=="function"?n:r,new Za(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function bJ(e,t,n=En){n=typeof t=="function"?t:n,Jj.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function vJ(e,t,n,r=En){r=typeof n=="function"?n:r,dk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function wJ(e,t,n=En){n=typeof t=="function"?t:n,Qj.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function _J(e,t){const n=await Eo.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function xJ(e,t,n=En){n=typeof t=="function"?t:n;const r=eM.call(this,e,typeof t=="function"?void 0:t);AX(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Gc=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var w={};for(var v in r)w[v]=v==="access"?{}:r[v];for(var v in r.access)w.access[v]=r.access[v];w.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],w);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},zi=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},SJ=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},Hb;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(Hb||(Hb={}));let tM=(()=>{var e,t,n,r,a;let i=[vd()],o,s=[],u,c,f=[],h=[],m,g=[],w=[],v,_=[],x=[],S,E=[],C=[],A,O=[],I=[],D,B=[],K=[];return u=class{constructor(Q=ur(new Ue(st.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=zi(this,f,0),this.extsize=(zi(this,h),zi(this,g,0)),this.nextents=(zi(this,w),zi(this,_,0)),this.projid=(zi(this,x),zi(this,E,0)),this.cowextsize=(zi(this,C),zi(this,O,0)),this.pad=(zi(this,I),zi(this,B,[])),zi(this,K),this.extsize=Q.size,this.nextents=1,this.projid=Q.uid,this.cowextsize=Q.size;for(const F of Object.keys(xi))Q.flags&xi[F]&&F in Hb&&(this.xflags|=Hb[F])}},SJ(u,"fsxattr"),(()=>{const Q=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=gn).uint32.bind(e)],m=[(t=gn).uint32.bind(t)],v=[(n=gn).uint32.bind(n)],S=[(r=gn).uint32.bind(r)],A=[(a=gn).uint32.bind(a)],D=[gn.char(8)],Gc(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:F=>"xflags"in F,get:F=>F.xflags,set:(F,W)=>{F.xflags=W}},metadata:Q},f,h),Gc(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:F=>"extsize"in F,get:F=>F.extsize,set:(F,W)=>{F.extsize=W}},metadata:Q},g,w),Gc(null,null,v,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:F=>"nextents"in F,get:F=>F.nextents,set:(F,W)=>{F.nextents=W}},metadata:Q},_,x),Gc(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:F=>"projid"in F,get:F=>F.projid,set:(F,W)=>{F.projid=W}},metadata:Q},E,C),Gc(null,null,A,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:F=>"cowextsize"in F,get:F=>F.cowextsize,set:(F,W)=>{F.cowextsize=W}},metadata:Q},O,I),Gc(null,null,D,{kind:"field",name:"pad",static:!1,private:!1,access:{has:F=>"pad"in F,get:F=>F.pad,set:(F,W)=>{F.pad=W}},metadata:Q},B,K),Gc(null,o={value:u},i,{kind:"class",name:u.name,metadata:Q},null,s),u=o.value,Q&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q}),zi(u,s)})(),u})();var Dr;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Dr||(Dr={}));var Fo;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(Fo||(Fo={}));async function EJ(e,t,...n){e=ln(e);const{fs:r,path:a}=jn(e,this);try{const i=new ra(await r.stat(a));switch(t){case Dr.GetFlags:case Fo.GetFlags:return i.flags;case Dr.SetFlags:case Fo.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Dr.GetVersion:case Fo.GetVersion:return i.version;case Dr.SetVersion:case Fo.SetVersion:i.version=n[0],await r.touch(a,i);return;case Dr.Fiemap:break;case Dr.GetXattr:return new tM(i);case Dr.SetXattr:break;case Dr.GetLabel:return r.label;case Dr.SetLabel:r.label=n[0];return;case Dr.GetUUID:return r.uuid;case Dr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw or(i,{[a]:e})}throw new Ue(st.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function CJ(e,t,...n){e=ln(e);const{fs:r,path:a}=jn(e,this);try{const i=new ra(r.statSync(a));switch(t){case Dr.GetFlags:case Fo.GetFlags:return i.flags;case Dr.SetFlags:case Fo.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Dr.GetVersion:case Fo.GetVersion:return i.version;case Dr.SetVersion:case Fo.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Dr.Fiemap:break;case Dr.GetXattr:return new tM(i);case Dr.SetXattr:break;case Dr.GetLabel:return r.label;case Dr.SetLabel:r.label=n[0];return;case Dr.GetUUID:return r.uuid;case Dr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw or(i,{[a]:e})}throw new Ue(st.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const kJ=[];function Rh(e,t,n,r){if(!t.startsWith("user.")&&!kJ.includes(t))throw new Ue(st.EPERM,"Only attributes in the user namespace are supported",n,r)}async function AJ(e,t,n={}){var r;e=ln(e);const{fs:a,path:i}=jn(e,this);Rh(this,t,e,"xattr.get");try{const o=await a.stat(i);if(pa&&!ir(this,o,ha))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Zu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Rr.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw or(o,{[i]:e})}}function TJ(e,t,n={}){var r;e=ln(e),Rh(this,t,e,"xattr.get");const{fs:a,path:i}=jn(e,this);try{const o=a.statSync(i);if(pa&&!ir(this,o,ha))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Zu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Rr.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw or(o,{[i]:e})}}async function RJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=jn(e,this);Rh(this,t,e,"xattr.set");try{const s=await i.stat(o);if(pa&&!ir(this,s,Gr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Zu);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Rr.from(n)),await i.touch(o,bd(s,"attributes"))}catch(s){throw or(s,{[o]:e})}}function NJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=jn(e,this);Rh(this,t,e,"xattr.set");try{const s=i.statSync(o);if(pa&&!ir(this,s,Gr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Zu);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Rr.from(n)),i.touchSync(o,bd(s,"attributes"))}catch(s){throw or(s,{[o]:e})}}async function IJ(e,t){var n;e=ln(e);const{fs:r,path:a}=jn(e,this);Rh(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(pa&&!ir(this,i,Gr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Zu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,bd(i,"attributes"))}catch(i){throw or(i,{[a]:e})}}function OJ(e,t){var n;e=ln(e);const{fs:r,path:a}=jn(e,this);Rh(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(pa&&!ir(this,i,Gr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Zu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,bd(i,"attributes"))}catch(i){throw or(i,{[a]:e})}}async function DJ(e){e=ln(e);const{fs:t,path:n}=jn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw or(r,{[n]:e})}}function jJ(e){e=ln(e);const{fs:t,path:n}=jn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw or(r,{[n]:e})}}const MJ=Object.freeze(Object.defineProperty({__proto__:null,get:AJ,getSync:TJ,list:DJ,listSync:jJ,remove:IJ,removeSync:OJ,set:RJ,setSync:NJ},Symbol.toStringTag,{value:"Module"})),Fa=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:xY,Dir:ek,Dirent:Lm,get IOC(){return Dr},get IOC32(){return Fo},ReadStream:ik,Stats:Vl,StatsFs:_Y,WriteStream:ok,access:sJ,accessSync:hX,appendFile:FX,appendFileSync:QY,chmod:nJ,chmodSync:cX,chown:eJ,chownSync:lX,chroot:GY,close:$X,closeSync:kd,constants:mj,copyFile:mJ,copyFileSync:Ij,cp:vJ,cpSync:Oj,createReadStream:dJ,createWriteStream:fJ,exists:RX,existsSync:VC,fchmod:GX,fchmodSync:XC,fchown:VX,fchownSync:YC,fdatasync:UX,fdatasyncSync:rX,fstat:LX,fstatSync:eX,fsync:zX,fsyncSync:nX,ftruncate:BX,ftruncateSync:tX,futimes:WX,futimesSync:JC,glob:xJ,globSync:vX,ioctl:EJ,ioctlSync:CJ,lchmod:rJ,lchmodSync:dX,lchown:tJ,lchownSync:uX,link:XX,linkSync:oX,lopenSync:ww,lstat:IX,lstatSync:GC,lutimes:iJ,lutimesSync:fX,mkdir:ZX,mkdirSync:QC,mkdtemp:pJ,mkdtempSync:pX,mount:HC,open:jX,openAsBlob:_J,openSync:vw,opendir:bJ,opendirSync:yX,promises:kX,read:HX,readFile:MX,readFileSync:KC,readSync:iX,readdir:YX,readdirSync:kh,readlink:QX,readlinkSync:Q2,readv:gJ,readvSync:mX,realpath:oJ,realpathSync:pc,rename:TX,renameSync:XY,rm:hJ,rmSync:Nj,rmdir:KX,rmdirSync:Tj,stat:NX,statSync:Yu,statfs:wJ,statfsSync:bX,symlink:JX,symlinkSync:sX,truncate:OX,truncateSync:JY,umount:Sj,unlink:DX,unlinkSync:WC,unwatchFile:uJ,utimes:aJ,utimesSync:Rj,watch:cJ,watchFile:lJ,write:qX,writeFile:PX,writeFileSync:ZC,writeSync:aX,writev:yJ,writevSync:gX,xattr:MJ},Symbol.toStringTag,{value:"Module"}));function wI(e){return aj(e)||FC(e)||e instanceof zC}async function nM(e,t=0){if(typeof e!="object"||e==null)throw _i(new Ue(st.EINVAL,"Invalid options on mount configuration"));if(!wI(e))throw _i(new Ue(st.EINVAL,"Invalid mount configuration"));if(e instanceof zC)return await e.ready(),e;FC(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&wI(i)){if(rj("Resolving nested mount configuration: "+a),t>10)throw _i(new Ue(st.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await nM(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw _i(new Ue(st.EPERM,"Backend not available: "+n.name));aY(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function PJ(e){if(!aj(e))throw new TypeError("Invalid single mount point configuration");const t=await nM(e);Sj("/"),HC("/",t)}const FJ=["delete"];Math.max(...FJ.map(e=>e.length));rY("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const rM=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;rM[e]=t}function LJ(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^rM[(t^e[n])&255];return(t^4294967295)>>>0}var Or=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var w={};for(var v in r)w[v]=v==="access"?{}:r[v];for(var v in r.access)w.access[v]=r.access[v];w.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],w);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},wn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},fk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let _I=(()=>{var e,t,n,r;let a=[vd()],i,o=[],s,u,c=[],f=[],h,m=[],g=[],w,v=[],_=[],x,S=[],E=[];return s=class{constructor(){this.id=wn(this,c,0),this.offset_=(wn(this,f),wn(this,m,0)),this.offset=(wn(this,g),wn(this,v,0)),this.size=(wn(this,_),wn(this,S,0)),wn(this,E)}},fk(s,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=gn).uint32.bind(e)],h=[(t=gn).uint32.bind(t)],w=[(n=gn).uint32.bind(n)],x=[(r=gn).uint32.bind(r)],Or(null,null,u,{kind:"field",name:"id",static:!1,private:!1,access:{has:A=>"id"in A,get:A=>A.id,set:(A,O)=>{A.id=O}},metadata:C},c,f),Or(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:A=>"offset_"in A,get:A=>A.offset_,set:(A,O)=>{A.offset_=O}},metadata:C},m,g),Or(null,null,w,{kind:"field",name:"offset",static:!1,private:!1,access:{has:A=>"offset"in A,get:A=>A.offset,set:(A,O)=>{A.offset=O}},metadata:C},v,_),Or(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:A=>"size"in A,get:A=>A.size,set:(A,O)=>{A.size=O}},metadata:C},S,E),Or(null,i={value:s},a,{kind:"class",name:s.name,metadata:C},null,o),s=i.value,C&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),wn(s,o)})(),s})();const xI=255;let Wc=(()=>{var e,t,n,r;let a=[vd()],i,o=[],s,u,c=[],f=[],h,m=[],g=[],w,v=[],_=[],x,S=[],E=[],C,A=[],O=[];var I=s=class{constructor(D=ur(new Ue(st.EINVAL,"Metadata block must be initialized with a superblock")),B=0){if(this.superblock=D,this.offset=B,this.checksum=wn(this,c,0),this.timestamp=(wn(this,f),wn(this,m,Date.now())),this.previous_offset_=(wn(this,g),wn(this,v,0)),this.previous_offset=(wn(this,_),wn(this,S,0)),this._previous=wn(this,E),this.entries=wn(this,A,Array.from({length:xI},()=>new _I)),wn(this,O),this.superblock=D,this.offset=B,!!B&&(fw(this,D.store._buffer.subarray(B,B+jr(I))),!aM(this)))throw hw(new Ue(st.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+B.toString(16)))}get previous(){var D;if(this.previous_offset)return(D=this._previous)!==null&&D!==void 0||(this._previous=new I(this.superblock,this.previous_offset)),this._previous}};return fk(s,"MetadataBlock"),(()=>{const D=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=gn).uint32.bind(e)],h=[(t=gn).uint32.bind(t)],w=[(n=gn).uint32.bind(n)],x=[(r=gn).uint32.bind(r)],C=[jm(_I,xI)],Or(null,null,u,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:B=>"checksum"in B,get:B=>B.checksum,set:(B,K)=>{B.checksum=K}},metadata:D},c,f),Or(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:B=>"timestamp"in B,get:B=>B.timestamp,set:(B,K)=>{B.timestamp=K}},metadata:D},m,g),Or(null,null,w,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:B=>"previous_offset_"in B,get:B=>B.previous_offset_,set:(B,K)=>{B.previous_offset_=K}},metadata:D},v,_),Or(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:B=>"previous_offset"in B,get:B=>B.previous_offset,set:(B,K)=>{B.previous_offset=K}},metadata:D},S,E),Or(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:B=>"entries"in B,get:B=>B.entries,set:(B,K)=>{B.entries=K}},metadata:D},A,O),Or(null,i={value:s},a,{kind:"class",name:s.name,metadata:D},null,o),I=s=i.value,D&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:D}),wn(s,o)})(),I=s})();const SI=2049864546;(()=>{var e,t,n,r,a,i,o,s,u,c,f;let h=[vd()],m,g=[],w,v,_=[],x=[],S,E=[],C=[],A,O=[],I=[],D,B=[],K=[],Q,F=[],W=[],U,he=[],ae=[],re,ee=[],se=[],V,X=[],Y=[],ne,be=[],Ee=[],De,Pe=[],Re=[],Te,He=[],it=[],Ie,Ae=[],z=[],ke,Ne=[],ce=[];var ie=w=class{constructor(J=ur(new Ue(st.EINVAL,"Super block must be initialized with a store"))){if(this.store=J,this.checksum=wn(this,_,0),this.magic=(wn(this,x),wn(this,E,SI)),this.version=(wn(this,C),wn(this,O,1)),this.inode_format=(wn(this,I),wn(this,B,EY)),this.flags=(wn(this,K),wn(this,F,0)),this.used_bytes=(wn(this,W),wn(this,he,BigInt(0))),this.total_bytes=(wn(this,ae),wn(this,ee,BigInt(0))),this.uuid=(wn(this,se),wn(this,X,BigInt(0))),this.metadata_block_size=(wn(this,Y),wn(this,be,jr(Wc))),this.metadata_offset_=(wn(this,Ee),wn(this,Pe,0)),this.metadata_offset=(wn(this,Re),wn(this,He,0)),this.metadata=wn(this,it),this.label=wn(this,Ae,""),this._padding=(wn(this,z),wn(this,Ne,new Array(132).fill(0))),wn(this,ce),this.store=J,J._view.getUint32(zZ(ie,"magic"),!0)!=SI){Ka("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Wc(this),this.metadata.offset=jr(ie),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(jr(ie)+jr(Wc)),this.total_bytes=BigInt(J._buffer.byteLength),J._write(this),J._write(this.metadata);return}if(fw(this,J._buffer.subarray(0,jr(ie))),!aM(this))throw hw(new Ue(st.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Wc(this,this.metadata_offset)}rotateMetadata(){const J=new Wc(this);return J.offset=Number(this.used_bytes),J.previous_offset=this.metadata_offset,this.metadata=J,this.metadata_offset=J.offset,this.store._write(J),this.used_bytes+=BigInt(jr(Wc)),this.store._write(this),J}isUnused(J,_e){if(!_e)return!0;if(J+_e>this.total_bytes||J<jr(ie))return!1;for(let Le=this.metadata;Le;Le=Le.previous){if(J<Le.offset+jr(Wc)&&J+_e>Le.offset)return!1;for(const xe of Le.entries)if(xe.offset&&(J>=xe.offset&&J<xe.offset+xe.size||J+_e>xe.offset&&J+_e<=xe.offset+xe.size||J<=xe.offset&&J+_e>=xe.offset+xe.size))return!1}return!0}};return fk(w,"SuperBlock"),(()=>{const J=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;v=[(e=gn).uint32.bind(e)],S=[(t=gn).uint32.bind(t)],A=[(n=gn).uint16.bind(n)],D=[(r=gn).uint16.bind(r)],Q=[(a=gn).uint32.bind(a)],U=[(i=gn).uint64.bind(i)],re=[(o=gn).uint64.bind(o)],V=[(s=gn).uint128.bind(s)],ne=[(u=gn).uint32.bind(u)],De=[(c=gn).uint32.bind(c)],Te=[(f=gn).uint32.bind(f)],Ie=[gn.char(64)],ke=[gn.char(132)],Or(null,null,v,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:_e=>"checksum"in _e,get:_e=>_e.checksum,set:(_e,Le)=>{_e.checksum=Le}},metadata:J},_,x),Or(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:_e=>"magic"in _e,get:_e=>_e.magic,set:(_e,Le)=>{_e.magic=Le}},metadata:J},E,C),Or(null,null,A,{kind:"field",name:"version",static:!1,private:!1,access:{has:_e=>"version"in _e,get:_e=>_e.version,set:(_e,Le)=>{_e.version=Le}},metadata:J},O,I),Or(null,null,D,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:_e=>"inode_format"in _e,get:_e=>_e.inode_format,set:(_e,Le)=>{_e.inode_format=Le}},metadata:J},B,K),Or(null,null,Q,{kind:"field",name:"flags",static:!1,private:!1,access:{has:_e=>"flags"in _e,get:_e=>_e.flags,set:(_e,Le)=>{_e.flags=Le}},metadata:J},F,W),Or(null,null,U,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:_e=>"used_bytes"in _e,get:_e=>_e.used_bytes,set:(_e,Le)=>{_e.used_bytes=Le}},metadata:J},he,ae),Or(null,null,re,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:_e=>"total_bytes"in _e,get:_e=>_e.total_bytes,set:(_e,Le)=>{_e.total_bytes=Le}},metadata:J},ee,se),Or(null,null,V,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:_e=>"uuid"in _e,get:_e=>_e.uuid,set:(_e,Le)=>{_e.uuid=Le}},metadata:J},X,Y),Or(null,null,ne,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:_e=>"metadata_block_size"in _e,get:_e=>_e.metadata_block_size,set:(_e,Le)=>{_e.metadata_block_size=Le}},metadata:J},be,Ee),Or(null,null,De,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:_e=>"metadata_offset_"in _e,get:_e=>_e.metadata_offset_,set:(_e,Le)=>{_e.metadata_offset_=Le}},metadata:J},Pe,Re),Or(null,null,Te,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:_e=>"metadata_offset"in _e,get:_e=>_e.metadata_offset,set:(_e,Le)=>{_e.metadata_offset=Le}},metadata:J},He,it),Or(null,null,Ie,{kind:"field",name:"label",static:!1,private:!1,access:{has:_e=>"label"in _e,get:_e=>_e.label,set:(_e,Le)=>{_e.label=Le}},metadata:J},Ae,z),Or(null,null,ke,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:_e=>"_padding"in _e,get:_e=>_e._padding,set:(_e,Le)=>{_e._padding=Le}},metadata:J},Ne,ce),Or(null,m={value:w},h,{kind:"class",name:w.name,metadata:J},null,g),ie=w=m.value,J&&Object.defineProperty(w,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:J}),wn(w,g)})(),ie=w})();function aM(e){const t=Pa(e),n=LJ(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Fa;function $J(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function tE(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?st[$J(e)]:st.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Ff(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(tE(e.error))}})}class BJ extends J2{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Ff(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Ff(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Ff(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Ff(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(tE(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(tE(this.tx.error)),this.tx.abort(),t}}async function zJ(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(Ka("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Ff(n)}class UJ{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new BJ(t,this)}}const qJ={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Ff(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await zJ(e.storeName||"zenfs",e.idbFactory),n=new UJ(t),r=new vj(n);if(e!=null&&e.disableAsyncCache)return PC("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},HJ=qJ,Vb={APP_LOADED:"app:loaded",APP_ERROR:"app:error",CONVERSATION_SELECTED:"conversation:selected",CONVERSATION_CREATED:"conversation:created",CONVERSATION_DELETED:"conversation:deleted",CONVERSATION_RENAMED:"conversation:renamed",INTERACTION_STARTED:"interaction:started",INTERACTION_STREAM_CHUNK:"interaction:stream_chunk",INTERACTION_COMPLETED:"interaction:completed",PROMPT_SUBMITTED:"prompt:submitted",PROMPT_FINALISED:"prompt:finalised",SETTINGS_OPENED:"settings:opened",SETTINGS_CLOSED:"settings:closed",MOD_LOADED:"mod:loaded",MOD_ERROR:"mod:error",VFS_FILE_READ:"vfs:file:read",VFS_FILE_WRITTEN:"vfs:file:written",VFS_FILE_DELETED:"vfs:file:deleted"};function Vy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cS={exports:{}},EI;function VJ(){return EI||(EI=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function o(c,f){if(!a[c]){if(!r[c]){var h=typeof Vy=="function"&&Vy;if(!f&&h)return h(c,!0);if(s)return s(c,!0);var m=new Error("Cannot find module '"+c+"'");throw m.code="MODULE_NOT_FOUND",m}var g=a[c]={exports:{}};r[c][0].call(g.exports,function(w){var v=r[c][1][w];return o(v||w)},g,g.exports,n,r,a,i)}return a[c].exports}for(var s=typeof Vy=="function"&&Vy,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var c,f,h,m,g,w,v,_=[],x=0,S=u.length,E=S,C=i.getTypeOf(u)!=="string";x<u.length;)E=S-x,h=C?(c=u[x++],f=x<S?u[x++]:0,x<S?u[x++]:0):(c=u.charCodeAt(x++),f=x<S?u.charCodeAt(x++):0,x<S?u.charCodeAt(x++):0),m=c>>2,g=(3&c)<<4|f>>4,w=1<E?(15&f)<<2|h>>6:64,v=2<E?63&h:64,_.push(s.charAt(m)+s.charAt(g)+s.charAt(w)+s.charAt(v));return _.join("")},a.decode=function(u){var c,f,h,m,g,w,v=0,_=0,x="data:";if(u.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&E--,u.charAt(u.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|E):new Array(0|E);v<u.length;)c=s.indexOf(u.charAt(v++))<<2|(m=s.indexOf(u.charAt(v++)))>>4,f=(15&m)<<4|(g=s.indexOf(u.charAt(v++)))>>2,h=(3&g)<<6|(w=s.indexOf(u.charAt(v++))),S[_++]=c,g!==64&&(S[_++]=f),w!==64&&(S[_++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function c(f,h,m,g,w){this.compressedSize=f,this.uncompressedSize=h,this.crc32=m,this.compression=g,this.compressedContent=w}c.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,h,m){return f.pipe(new s).pipe(new u("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=function(){for(var s,u=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[c]=s}return u}();r.exports=function(s,u){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(c,f,h,m){var g=o,w=m+h;c^=-1;for(var v=m;v<w;v++)c=c>>>8^g[255&(c^f[v])];return-1^c}(0|u,s,s.length,0):function(c,f,h,m){var g=o,w=m+h;c^=-1;for(var v=m;v<w;v++)c=c>>>8^g[255&(c^f.charCodeAt(v))];return-1^c}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),u=n("./stream/GenericWorker"),c=i?"uint8array":"array";function f(h,m){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}a.magic="\b\0",s.inherits(f,u),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,h.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},a.compressWorker=function(h){return new f("Deflate",h)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,w){var v,_="";for(v=0;v<w;v++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,w,v,_,x,S){var E,C,A=g.file,O=g.compression,I=S!==c.utf8encode,D=s.transformTo("string",S(A.name)),B=s.transformTo("string",c.utf8encode(A.name)),K=A.comment,Q=s.transformTo("string",S(K)),F=s.transformTo("string",c.utf8encode(K)),W=B.length!==A.name.length,U=F.length!==K.length,he="",ae="",re="",ee=A.dir,se=A.date,V={crc32:0,compressedSize:0,uncompressedSize:0};w&&!v||(V.crc32=g.crc32,V.compressedSize=g.compressedSize,V.uncompressedSize=g.uncompressedSize);var X=0;w&&(X|=8),I||!W&&!U||(X|=2048);var Y=0,ne=0;ee&&(Y|=16),x==="UNIX"?(ne=798,Y|=function(Ee,De){var Pe=Ee;return Ee||(Pe=De?16893:33204),(65535&Pe)<<16}(A.unixPermissions,ee)):(ne=20,Y|=function(Ee){return 63&(Ee||0)}(A.dosPermissions)),E=se.getUTCHours(),E<<=6,E|=se.getUTCMinutes(),E<<=5,E|=se.getUTCSeconds()/2,C=se.getUTCFullYear()-1980,C<<=4,C|=se.getUTCMonth()+1,C<<=5,C|=se.getUTCDate(),W&&(ae=i(1,1)+i(f(D),4)+B,he+="up"+i(ae.length,2)+ae),U&&(re=i(1,1)+i(f(Q),4)+F,he+="uc"+i(re.length,2)+re);var be="";return be+=`
\0`,be+=i(X,2),be+=O.magic,be+=i(E,2),be+=i(C,2),be+=i(V.crc32,4),be+=i(V.compressedSize,4),be+=i(V.uncompressedSize,4),be+=i(D.length,2),be+=i(he.length,2),{fileRecord:h.LOCAL_FILE_HEADER+be+D+he,dirRecord:h.CENTRAL_FILE_HEADER+i(ne,2)+be+i(Q.length,2)+"\0\0\0\0"+i(Y,4)+i(_,4)+D+he+Q}}var s=n("../utils"),u=n("../stream/GenericWorker"),c=n("../utf8"),f=n("../crc32"),h=n("../signature");function m(g,w,v,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=v,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(m,u),m.prototype.push=function(g){var w=g.meta.percent||0,v=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:v?(w+100*(v-_-1))/v:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var w=this.streamFiles&&!g.file.dir;if(w){var v=o(g,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var w=this.streamFiles&&!g.file.dir,v=o(g,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),w)this.push({data:function(_){return h.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var v=this.bytesWritten-g,_=function(x,S,E,C,A){var O=s.transformTo("string",A(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(S,4)+i(E,4)+i(O.length,2)+O}(this.dirRecords.length,v,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var w=this;return g.on("data",function(v){w.processChunk(v)}),g.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),g.on("error",function(v){w.error(v)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var w=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var v=0;v<w.length;v++)try{w[v].error(g)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,w=0;w<g.length;w++)g[w].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(s,u,c){var f=new o(u.streamFiles,c,u.platform,u.encodeFileName),h=0;try{s.forEach(function(m,g){h++;var w=function(S,E){var C=S||E,A=i[C];if(!A)throw new Error(C+" is not a valid compression method !");return A}(g.options.compression,u.compression),v=g.options.compressionOptions||u.compressionOptions||{},_=g.dir,x=g.date;g._compressWorker(w,v).withStreamInfo("file",{name:m,dir:_,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(m){f.error(m)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),s=n("./utf8"),u=n("./zipEntries"),c=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function h(m){return new o.Promise(function(g,w){var v=m.decompressed.getContentWorker().pipe(new c);v.on("error",function(_){w(_)}).on("end",function(){v.streamInfo.crc32!==m.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var w=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(v){var _=new u(g);return _.load(v),_}).then(function(v){var _=[o.Promise.resolve(v)],x=v.files;if(g.checkCRC32)for(var S=0;S<x.length;S++)_.push(h(x[S]));return o.Promise.all(_)}).then(function(v){for(var _=v.shift(),x=_.files,S=0;S<x.length;S++){var E=x[S],C=E.fileNameStr,A=i.resolve(E.fileNameStr);w.file(A,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(w.file(A).unsafeOriginalName=C)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function s(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(s,o),s.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(s,u,c){i.call(this,u),this._helper=s;var f=this;s.on("data",function(h,m){f.push(h)||f._helper.pause(),c&&c(m)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Gt<"u",newBufferFrom:function(i,o){if(Gt.from&&Gt.from!==Uint8Array.from)return Gt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Gt(i,o)},allocBuffer:function(i){if(Gt.alloc)return Gt.alloc(i);var o=new Gt(i);return o.fill(0),o},isBuffer:function(i){return Gt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(A,O,I){var D,B=s.getTypeOf(O),K=s.extend(I||{},f);K.date=K.date||new Date,K.compression!==null&&(K.compression=K.compression.toUpperCase()),typeof K.unixPermissions=="string"&&(K.unixPermissions=parseInt(K.unixPermissions,8)),K.unixPermissions&&16384&K.unixPermissions&&(K.dir=!0),K.dosPermissions&&16&K.dosPermissions&&(K.dir=!0),K.dir&&(A=x(A)),K.createFolders&&(D=_(A))&&S.call(this,D,!0);var Q=B==="string"&&K.binary===!1&&K.base64===!1;I&&I.binary!==void 0||(K.binary=!Q),(O instanceof h&&O.uncompressedSize===0||K.dir||!O||O.length===0)&&(K.base64=!1,K.binary=!0,O="",K.compression="STORE",B="string");var F=null;F=O instanceof h||O instanceof u?O:w.isNode&&w.isStream(O)?new v(A,O):s.prepareContent(A,O,K.binary,K.optimizedBinaryString,K.base64);var W=new m(A,F,K);this.files[A]=W}var o=n("./utf8"),s=n("./utils"),u=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),f=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),w=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),_=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var O=A.lastIndexOf("/");return 0<O?A.substring(0,O):""},x=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},S=function(A,O){return O=O!==void 0?O:f.createFolders,A=x(A),this.files[A]||i.call(this,A,null,{dir:!0,createFolders:O}),this.files[A]};function E(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var O,I,D;for(O in this.files)D=this.files[O],(I=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&A(I,D)},filter:function(A){var O=[];return this.forEach(function(I,D){A(I,D)&&O.push(D)}),O},file:function(A,O,I){if(arguments.length!==1)return A=this.root+A,i.call(this,A,O,I),this;if(E(A)){var D=A;return this.filter(function(K,Q){return!Q.dir&&D.test(K)})}var B=this.files[this.root+A];return B&&!B.dir?B:null},folder:function(A){if(!A)return this;if(E(A))return this.filter(function(B,K){return K.dir&&A.test(B)});var O=this.root+A,I=S.call(this,O),D=this.clone();return D.root=I.name,D},remove:function(A){A=this.root+A;var O=this.files[A];if(O||(A.slice(-1)!=="/"&&(A+="/"),O=this.files[A]),O&&!O.dir)delete this.files[A];else for(var I=this.filter(function(B,K){return K.name.slice(0,A.length)===A}),D=0;D<I.length;D++)delete this.files[I[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var O,I={};try{if((I=s.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");s.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var D=I.comment||this.comment||"";O=g.generateWorker(this,I,D)}catch(B){(O=new u("error")).error(B)}return new c(O,I.type||"string",I.mimeType)},generateAsync:function(A,O){return this.generateInternalStream(A).accumulate(O)},generateNodeStream:function(A,O){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(O)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===c&&this.data[m+2]===f&&this.data[m+3]===h)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),m=this.readData(4);return u===m[0]&&c===m[1]&&f===m[2]&&h===m[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,c=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=s,c},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),u=n("./StringReader"),c=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new c(h):o.uint8array?new f(i.transformTo("uint8array",h)):new s(i.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function s(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,i),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(s,o),s.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=i.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),u=n("../base64"),c=n("../support"),f=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(w,v){return new f.Promise(function(_,x){var S=[],E=w._internalType,C=w._outputType,A=w._mimeType;w.on("data",function(O,I){S.push(O),v&&v(I)}).on("error",function(O){S=[],x(O)}).on("end",function(){try{var O=function(I,D,B){switch(I){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),B);case"base64":return u.encode(D);default:return i.transformTo(I,D)}}(C,function(I,D){var B,K=0,Q=null,F=0;for(B=0;B<D.length;B++)F+=D[B].length;switch(I){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(Q=new Uint8Array(F),B=0;B<D.length;B++)Q.set(D[B],K),K+=D[B].length;return Q;case"nodebuffer":return Gt.concat(D);default:throw new Error("concat : unsupported type '"+I+"'")}}(E,S),A);_(O)}catch(I){x(I)}S=[]}).resume()})}function g(w,v,_){var x=v;switch(v){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=v,this._mimeType=_,i.checkSupport(x),this._worker=w.pipe(new o(x)),w.lock()}catch(S){this._worker=new s("error"),this._worker.error(S)}}g.prototype={accumulate:function(w){return m(this,w)},on:function(w,v){var _=this;return w==="data"?this._worker.on(w,function(x){v.call(_,x.data,x.meta)}):this._worker.on(w,function(){i.delay(v,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Gt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),u=n("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;c[254]=c[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(w){var v,_,x,S,E,C=w.length,A=0;for(S=0;S<C;S++)(64512&(_=w.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=w.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),A+=_<128?1:_<2048?2:_<65536?3:4;for(v=o.uint8array?new Uint8Array(A):new Array(A),S=E=0;E<A;S++)(64512&(_=w.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=w.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),_<128?v[E++]=_:(_<2048?v[E++]=192|_>>>6:(_<65536?v[E++]=224|_>>>12:(v[E++]=240|_>>>18,v[E++]=128|_>>>12&63),v[E++]=128|_>>>6&63),v[E++]=128|63&_);return v}(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(w){var v,_,x,S,E=w.length,C=new Array(2*E);for(v=_=0;v<E;)if((x=w[v++])<128)C[_++]=x;else if(4<(S=c[x]))C[_++]=65533,v+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&v<E;)x=x<<6|63&w[v++],S--;1<S?C[_++]=65533:x<65536?C[_++]=x:(x-=65536,C[_++]=55296|x>>10&1023,C[_++]=56320|1023&x)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),i.applyFromCharCode(C)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,u),h.prototype.processChunk=function(g){var w=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=w;(w=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),w.set(v,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+c[S[C]]>E?C:E}(w),x=w;_!==w.length&&(o.uint8array?(x=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(x=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(m,u),m.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),u=n("./external");function c(v){return v}function f(v,_){for(var x=0;x<v.length;++x)_[x]=255&v.charCodeAt(x);return _}n("setimmediate"),a.newBlob=function(v,_){a.checkSupport("blob");try{return new Blob([v],{type:_})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(v),x.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(v,_,x){var S=[],E=0,C=v.length;if(C<=x)return String.fromCharCode.apply(null,v);for(;E<C;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,v.slice(E,Math.min(E+x,C)))):S.push(String.fromCharCode.apply(null,v.subarray(E,Math.min(E+x,C)))),E+=x;return S.join("")},stringifyByChar:function(v){for(var _="",x=0;x<v.length;x++)_+=String.fromCharCode(v[x]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function m(v){var _=65536,x=a.getTypeOf(v),S=!0;if(x==="uint8array"?S=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return h.stringifyByChunk(v,x,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(v)}function g(v,_){for(var x=0;x<v.length;x++)_[x]=v[x];return _}a.applyFromCharCode=m;var w={};w.string={string:c,array:function(v){return f(v,new Array(v.length))},arraybuffer:function(v){return w.string.uint8array(v).buffer},uint8array:function(v){return f(v,new Uint8Array(v.length))},nodebuffer:function(v){return f(v,s.allocBuffer(v.length))}},w.array={string:m,array:c,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return s.newBufferFrom(v)}},w.arraybuffer={string:function(v){return m(new Uint8Array(v))},array:function(v){return g(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:c,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return s.newBufferFrom(new Uint8Array(v))}},w.uint8array={string:m,array:function(v){return g(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:c,nodebuffer:function(v){return s.newBufferFrom(v)}},w.nodebuffer={string:m,array:function(v){return g(v,new Array(v.length))},arraybuffer:function(v){return w.nodebuffer.uint8array(v).buffer},uint8array:function(v){return g(v,new Uint8Array(v.length))},nodebuffer:c},a.transformTo=function(v,_){if(_=_||"",!v)return _;a.checkSupport(v);var x=a.getTypeOf(_);return w[x][v](_)},a.resolve=function(v){for(var _=v.split("/"),x=[],S=0;S<_.length;S++){var E=_[S];E==="."||E===""&&S!==0&&S!==_.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(v)?"nodebuffer":i.uint8array&&v instanceof Uint8Array?"uint8array":i.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(v){if(!i[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(v){var _,x,S="";for(x=0;x<(v||"").length;x++)S+="\\x"+((_=v.charCodeAt(x))<16?"0":"")+_.toString(16).toUpperCase();return S},a.delay=function(v,_,x){setImmediate(function(){v.apply(x||null,_||[])})},a.inherits=function(v,_){function x(){}x.prototype=_.prototype,v.prototype=new x},a.extend=function(){var v,_,x={};for(v=0;v<arguments.length;v++)for(_ in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],_)&&x[_]===void 0&&(x[_]=arguments[v][_]);return x},a.prepareContent=function(v,_,x,S,E){return u.Promise.resolve(_).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(A,O){var I=new FileReader;I.onload=function(D){A(D.target.result)},I.onerror=function(D){O(D.target.error)},I.readAsArrayBuffer(C)}):C}).then(function(C){var A=a.getTypeOf(C);return A?(A==="arraybuffer"?C=a.transformTo("uint8array",C):A==="string"&&(E?C=o.decode(C):x&&S!==!0&&(C=function(O){return f(O,i.uint8array?new Uint8Array(O.length):new Array(O.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),u=n("./zipEntry"),c=n("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(h)+")")}},isSignature:function(h,m){var g=this.reader.index;this.reader.setIndex(h);var w=this.reader.readString(4)===m;return this.reader.setIndex(g),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=c.uint8array?"uint8array":"array",g=o.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,g,w=this.zip64EndOfCentralSize-44;0<w;)h=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var w=m-g;if(0<w)this.isSignature(m,s.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),u=n("./crc32"),c=n("./utf8"),f=n("./compressions"),h=n("./support");function m(g,w){this.options=g,this.loadOptions=w}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var w,v;if(g.skip(22),this.fileNameLength=g.readInt(2),v=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(_){for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)&&f[x].magic===_)return f[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,w,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var w=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(w),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var w,v,_,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)w=g.readInt(2),v=g.readInt(2),_=g.readData(v),this.extraFields[w]={id:w,length:v,value:_};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var v=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var x=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var w=i(g.value);return w.readInt(1)!==1||u(this.fileName)!==w.readInt(4)?null:c.utf8decode(w.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var w=i(g.value);return w.readInt(1)!==1||u(this.fileComment)!==w.readInt(4)?null:c.utf8decode(w.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(w,v,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=v,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),u=n("./utf8"),c=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(w){var v=null,_="string";try{if(!w)throw new Error("No output type specified.");var x=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),v=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(v=v.pipe(new u.Utf8EncodeWorker)),!S&&x&&(v=v.pipe(new u.Utf8DecodeWorker))}catch(E){(v=new f("error")).error(E)}return new o(v,_,"")},async:function(w,v){return this.internalStream(w).accumulate(v)},nodeStream:function(w,v){return this.internalStream(w||"nodebuffer").toNodejsStream(v)},_compressWorker:function(w,v){if(this._data instanceof c&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(_,w,v)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,s,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var c=0,f=new u(w),h=i.document.createTextNode("");f.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var v=i.document.createElement("script");v.onreadystatechange=function(){w(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},i.document.documentElement.appendChild(v)}:function(){setTimeout(w,0)};else{var m=new i.MessageChannel;m.port1.onmessage=w,o=function(){m.port2.postMessage(0)}}var g=[];function w(){var v,_;s=!0;for(var x=g.length;x;){for(_=g,g=[],v=-1;++v<x;)_[v]();x=g.length}s=!1}r.exports=function(v){g.push(v)!==1||s||o()}}).call(this,typeof nd<"u"?nd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var s={},u=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,x!==o&&v(this,x)}function m(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,S,E){i(function(){var C;try{C=S(E)}catch(A){return s.reject(x,A)}C===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,C)})}function w(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function v(x,S){var E=!1;function C(I){E||(E=!0,s.reject(x,I))}function A(I){E||(E=!0,s.resolve(x,I))}var O=_(function(){S(A,C)});O.status==="error"&&C(O.value)}function _(x,S){var E={};try{E.value=x(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(x()).then(function(){return E})},function(E){return S.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,S){if(typeof x!="function"&&this.state===c||typeof S!="function"&&this.state===u)return this;var E=new this.constructor(o);return this.state!==f?g(E,this.state===c?x:S,this.outcome):this.queue.push(new m(E,x,S)),E},m.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){s.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},s.resolve=function(x,S){var E=_(w,S);if(E.status==="error")return s.reject(x,E.value);var C=E.value;if(C)v(x,C);else{x.state=c,x.outcome=S;for(var A=-1,O=x.queue.length;++A<O;)x.queue[A].callFulfilled(S)}return x},s.reject=function(x,S){x.state=u,x.outcome=S;for(var E=-1,C=x.queue.length;++E<C;)x.queue[E].callRejected(S);return x},h.resolve=function(x){return x instanceof this?x:s.resolve(new this(o),x)},h.reject=function(x){var S=new this(o);return s.reject(S,x)},h.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var A=new Array(E),O=0,I=-1,D=new this(o);++I<E;)B(x[I],I);return D;function B(K,Q){S.resolve(K).then(function(F){A[Q]=F,++O!==E||C||(C=!0,s.resolve(D,A))},function(F){C||(C=!0,s.reject(D,F))})}},h.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var A=-1,O=new this(o);++A<E;)I=x[A],S.resolve(I).then(function(D){C||(C=!0,s.resolve(O,D))},function(D){C||(C=!0,s.reject(O,D))});var I;return O}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=Object.prototype.toString,h=0,m=-1,g=0,w=8;function v(x){if(!(this instanceof v))return new v(x);this.options=o.assign({level:m,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(u[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?s.string2buf(S.dictionary):f.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(u[E]);this._dict_set=!0}}function _(x,S){var E=new v(S);if(E.push(x,!0),E.err)throw E.msg||u[E.err];return E.result}v.prototype.push=function(x,S){var E,C,A=this.strm,O=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof x=="string"?A.input=s.string2buf(x):f.call(x)==="[object ArrayBuffer]"?A.input=new Uint8Array(x):A.input=x,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(O),A.next_out=0,A.avail_out=O),(E=i.deflate(A,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(A.output,A.next_out))):this.onData(o.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(A.avail_out=0))},v.prototype.onData=function(x){this.chunks.push(x)},v.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=v,a.deflate=_,a.deflateRaw=function(x,S){return(S=S||{}).raw=!0,_(x,S)},a.gzip=function(x,S){return(S=S||{}).gzip=!0,_(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/constants"),c=n("./zlib/messages"),f=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function g(v){if(!(this instanceof g))return new g(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||v&&v.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,_.windowBits);if(x!==u.Z_OK)throw new Error(c[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function w(v,_){var x=new g(_);if(x.push(v,!0),x.err)throw x.msg||c[x.err];return x.result}g.prototype.push=function(v,_){var x,S,E,C,A,O,I=this.strm,D=this.options.chunkSize,B=this.options.dictionary,K=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof v=="string"?I.input=s.binstring2buf(v):m.call(v)==="[object ArrayBuffer]"?I.input=new Uint8Array(v):I.input=v,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8(D),I.next_out=0,I.avail_out=D),(x=i.inflate(I,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&B&&(O=typeof B=="string"?s.string2buf(B):m.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,x=i.inflateSetDictionary(this.strm,O)),x===u.Z_BUF_ERROR&&K===!0&&(x=u.Z_OK,K=!1),x!==u.Z_STREAM_END&&x!==u.Z_OK)return this.onEnd(x),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&x!==u.Z_STREAM_END&&(I.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(I.output,I.next_out),C=I.next_out-E,A=s.buf2string(I.output,E),I.next_out=C,I.avail_out=D-C,C&&o.arraySet(I.output,I.output,E,C,0),this.onData(A)):this.onData(o.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(K=!0)}while((0<I.avail_in||I.avail_out===0)&&x!==u.Z_STREAM_END);return x===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(I.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},a.Inflate=g,a.inflate=w,a.inflateRaw=function(v,_){return(_=_||{}).raw=!0,w(v,_)},a.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])}}return u},a.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,f,h,m){if(c.subarray&&u.subarray)u.set(c.subarray(f,f+h),m);else for(var g=0;g<h;g++)u[m+g]=c[f+g]},flattenChunks:function(u){var c,f,h,m,g,w;for(c=h=0,f=u.length;c<f;c++)h+=u[c].length;for(w=new Uint8Array(h),c=m=0,f=u.length;c<f;c++)g=u[c],w.set(g,m),m+=g.length;return w}},s={arraySet:function(u,c,f,h,m){for(var g=0;g<h;g++)u[m+g]=c[f+g]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new i.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(h,m){if(m<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var g="",w=0;w<m;w++)g+=String.fromCharCode(h[w]);return g}u[254]=u[254]=1,a.string2buf=function(h){var m,g,w,v,_,x=h.length,S=0;for(v=0;v<x;v++)(64512&(g=h.charCodeAt(v)))==55296&&v+1<x&&(64512&(w=h.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(w-56320),v++),S+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(S),v=_=0;_<S;v++)(64512&(g=h.charCodeAt(v)))==55296&&v+1<x&&(64512&(w=h.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(w-56320),v++),g<128?m[_++]=g:(g<2048?m[_++]=192|g>>>6:(g<65536?m[_++]=224|g>>>12:(m[_++]=240|g>>>18,m[_++]=128|g>>>12&63),m[_++]=128|g>>>6&63),m[_++]=128|63&g);return m},a.buf2binstring=function(h){return f(h,h.length)},a.binstring2buf=function(h){for(var m=new i.Buf8(h.length),g=0,w=m.length;g<w;g++)m[g]=h.charCodeAt(g);return m},a.buf2string=function(h,m){var g,w,v,_,x=m||h.length,S=new Array(2*x);for(g=w=0;g<x;)if((v=h[g++])<128)S[w++]=v;else if(4<(_=u[v]))S[w++]=65533,g+=_-1;else{for(v&=_===2?31:_===3?15:7;1<_&&g<x;)v=v<<6|63&h[g++],_--;1<_?S[w++]=65533:v<65536?S[w++]=v:(v-=65536,S[w++]=55296|v>>10&1023,S[w++]=56320|1023&v)}return f(S,w)},a.utf8border=function(h,m){var g;for((m=m||h.length)>h.length&&(m=h.length),g=m-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?m:g+u[h[g]]>m?g:m}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,s,u){for(var c=65535&i|0,f=i>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;f=f+(c=c+o[u++]|0)|0,--h;);c%=65521,f%=65521}return c|f<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();r.exports=function(o,s,u,c){var f=i,h=c+u;o^=-1;for(var m=c;m<h;m++)o=o>>>8^f[255&(o^s[m])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),s=n("./trees"),u=n("./adler32"),c=n("./crc32"),f=n("./messages"),h=0,m=4,g=0,w=-2,v=-1,_=4,x=2,S=8,E=9,C=286,A=30,O=19,I=2*C+1,D=15,B=3,K=258,Q=K+B+1,F=42,W=113,U=1,he=2,ae=3,re=4;function ee(z,ke){return z.msg=f[ke],ke}function se(z){return(z<<1)-(4<z?9:0)}function V(z){for(var ke=z.length;0<=--ke;)z[ke]=0}function X(z){var ke=z.state,Ne=ke.pending;Ne>z.avail_out&&(Ne=z.avail_out),Ne!==0&&(o.arraySet(z.output,ke.pending_buf,ke.pending_out,Ne,z.next_out),z.next_out+=Ne,ke.pending_out+=Ne,z.total_out+=Ne,z.avail_out-=Ne,ke.pending-=Ne,ke.pending===0&&(ke.pending_out=0))}function Y(z,ke){s._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,ke),z.block_start=z.strstart,X(z.strm)}function ne(z,ke){z.pending_buf[z.pending++]=ke}function be(z,ke){z.pending_buf[z.pending++]=ke>>>8&255,z.pending_buf[z.pending++]=255&ke}function Ee(z,ke){var Ne,ce,ie=z.max_chain_length,J=z.strstart,_e=z.prev_length,Le=z.nice_match,xe=z.strstart>z.w_size-Q?z.strstart-(z.w_size-Q):0,Ve=z.window,xt=z.w_mask,ht=z.prev,Et=z.strstart+K,Lt=Ve[J+_e-1],Tt=Ve[J+_e];z.prev_length>=z.good_match&&(ie>>=2),Le>z.lookahead&&(Le=z.lookahead);do if(Ve[(Ne=ke)+_e]===Tt&&Ve[Ne+_e-1]===Lt&&Ve[Ne]===Ve[J]&&Ve[++Ne]===Ve[J+1]){J+=2,Ne++;do;while(Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&J<Et);if(ce=K-(Et-J),J=Et-K,_e<ce){if(z.match_start=ke,Le<=(_e=ce))break;Lt=Ve[J+_e-1],Tt=Ve[J+_e]}}while((ke=ht[ke&xt])>xe&&--ie!=0);return _e<=z.lookahead?_e:z.lookahead}function De(z){var ke,Ne,ce,ie,J,_e,Le,xe,Ve,xt,ht=z.w_size;do{if(ie=z.window_size-z.lookahead-z.strstart,z.strstart>=ht+(ht-Q)){for(o.arraySet(z.window,z.window,ht,ht,0),z.match_start-=ht,z.strstart-=ht,z.block_start-=ht,ke=Ne=z.hash_size;ce=z.head[--ke],z.head[ke]=ht<=ce?ce-ht:0,--Ne;);for(ke=Ne=ht;ce=z.prev[--ke],z.prev[ke]=ht<=ce?ce-ht:0,--Ne;);ie+=ht}if(z.strm.avail_in===0)break;if(_e=z.strm,Le=z.window,xe=z.strstart+z.lookahead,Ve=ie,xt=void 0,xt=_e.avail_in,Ve<xt&&(xt=Ve),Ne=xt===0?0:(_e.avail_in-=xt,o.arraySet(Le,_e.input,_e.next_in,xt,xe),_e.state.wrap===1?_e.adler=u(_e.adler,Le,xt,xe):_e.state.wrap===2&&(_e.adler=c(_e.adler,Le,xt,xe)),_e.next_in+=xt,_e.total_in+=xt,xt),z.lookahead+=Ne,z.lookahead+z.insert>=B)for(J=z.strstart-z.insert,z.ins_h=z.window[J],z.ins_h=(z.ins_h<<z.hash_shift^z.window[J+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[J+B-1])&z.hash_mask,z.prev[J&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=J,J++,z.insert--,!(z.lookahead+z.insert<B)););}while(z.lookahead<Q&&z.strm.avail_in!==0)}function Pe(z,ke){for(var Ne,ce;;){if(z.lookahead<Q){if(De(z),z.lookahead<Q&&ke===h)return U;if(z.lookahead===0)break}if(Ne=0,z.lookahead>=B&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),Ne!==0&&z.strstart-Ne<=z.w_size-Q&&(z.match_length=Ee(z,Ne)),z.match_length>=B)if(ce=s._tr_tally(z,z.strstart-z.match_start,z.match_length-B),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=B){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else ce=s._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(ce&&(Y(z,!1),z.strm.avail_out===0))return U}return z.insert=z.strstart<B-1?z.strstart:B-1,ke===m?(Y(z,!0),z.strm.avail_out===0?ae:re):z.last_lit&&(Y(z,!1),z.strm.avail_out===0)?U:he}function Re(z,ke){for(var Ne,ce,ie;;){if(z.lookahead<Q){if(De(z),z.lookahead<Q&&ke===h)return U;if(z.lookahead===0)break}if(Ne=0,z.lookahead>=B&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=B-1,Ne!==0&&z.prev_length<z.max_lazy_match&&z.strstart-Ne<=z.w_size-Q&&(z.match_length=Ee(z,Ne),z.match_length<=5&&(z.strategy===1||z.match_length===B&&4096<z.strstart-z.match_start)&&(z.match_length=B-1)),z.prev_length>=B&&z.match_length<=z.prev_length){for(ie=z.strstart+z.lookahead-B,ce=s._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-B),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=ie&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=B-1,z.strstart++,ce&&(Y(z,!1),z.strm.avail_out===0))return U}else if(z.match_available){if((ce=s._tr_tally(z,0,z.window[z.strstart-1]))&&Y(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return U}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(ce=s._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<B-1?z.strstart:B-1,ke===m?(Y(z,!0),z.strm.avail_out===0?ae:re):z.last_lit&&(Y(z,!1),z.strm.avail_out===0)?U:he}function Te(z,ke,Ne,ce,ie){this.good_length=z,this.max_lazy=ke,this.nice_length=Ne,this.max_chain=ce,this.func=ie}function He(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*I),this.dyn_dtree=new o.Buf16(2*(2*A+1)),this.bl_tree=new o.Buf16(2*(2*O+1)),V(this.dyn_ltree),V(this.dyn_dtree),V(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(D+1),this.heap=new o.Buf16(2*C+1),V(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),V(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function it(z){var ke;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=x,(ke=z.state).pending=0,ke.pending_out=0,ke.wrap<0&&(ke.wrap=-ke.wrap),ke.status=ke.wrap?F:W,z.adler=ke.wrap===2?0:1,ke.last_flush=h,s._tr_init(ke),g):ee(z,w)}function Ie(z){var ke=it(z);return ke===g&&function(Ne){Ne.window_size=2*Ne.w_size,V(Ne.head),Ne.max_lazy_match=i[Ne.level].max_lazy,Ne.good_match=i[Ne.level].good_length,Ne.nice_match=i[Ne.level].nice_length,Ne.max_chain_length=i[Ne.level].max_chain,Ne.strstart=0,Ne.block_start=0,Ne.lookahead=0,Ne.insert=0,Ne.match_length=Ne.prev_length=B-1,Ne.match_available=0,Ne.ins_h=0}(z.state),ke}function Ae(z,ke,Ne,ce,ie,J){if(!z)return w;var _e=1;if(ke===v&&(ke=6),ce<0?(_e=0,ce=-ce):15<ce&&(_e=2,ce-=16),ie<1||E<ie||Ne!==S||ce<8||15<ce||ke<0||9<ke||J<0||_<J)return ee(z,w);ce===8&&(ce=9);var Le=new He;return(z.state=Le).strm=z,Le.wrap=_e,Le.gzhead=null,Le.w_bits=ce,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=ie+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+B-1)/B),Le.window=new o.Buf8(2*Le.w_size),Le.head=new o.Buf16(Le.hash_size),Le.prev=new o.Buf16(Le.w_size),Le.lit_bufsize=1<<ie+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new o.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=ke,Le.strategy=J,Le.method=Ne,Ie(z)}i=[new Te(0,0,0,0,function(z,ke){var Ne=65535;for(Ne>z.pending_buf_size-5&&(Ne=z.pending_buf_size-5);;){if(z.lookahead<=1){if(De(z),z.lookahead===0&&ke===h)return U;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var ce=z.block_start+Ne;if((z.strstart===0||z.strstart>=ce)&&(z.lookahead=z.strstart-ce,z.strstart=ce,Y(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-Q&&(Y(z,!1),z.strm.avail_out===0))return U}return z.insert=0,ke===m?(Y(z,!0),z.strm.avail_out===0?ae:re):(z.strstart>z.block_start&&(Y(z,!1),z.strm.avail_out),U)}),new Te(4,4,8,4,Pe),new Te(4,5,16,8,Pe),new Te(4,6,32,32,Pe),new Te(4,4,16,16,Re),new Te(8,16,32,32,Re),new Te(8,16,128,128,Re),new Te(8,32,128,256,Re),new Te(32,128,258,1024,Re),new Te(32,258,258,4096,Re)],a.deflateInit=function(z,ke){return Ae(z,ke,S,15,8,0)},a.deflateInit2=Ae,a.deflateReset=Ie,a.deflateResetKeep=it,a.deflateSetHeader=function(z,ke){return z&&z.state?z.state.wrap!==2?w:(z.state.gzhead=ke,g):w},a.deflate=function(z,ke){var Ne,ce,ie,J;if(!z||!z.state||5<ke||ke<0)return z?ee(z,w):w;if(ce=z.state,!z.output||!z.input&&z.avail_in!==0||ce.status===666&&ke!==m)return ee(z,z.avail_out===0?-5:w);if(ce.strm=z,Ne=ce.last_flush,ce.last_flush=ke,ce.status===F)if(ce.wrap===2)z.adler=0,ne(ce,31),ne(ce,139),ne(ce,8),ce.gzhead?(ne(ce,(ce.gzhead.text?1:0)+(ce.gzhead.hcrc?2:0)+(ce.gzhead.extra?4:0)+(ce.gzhead.name?8:0)+(ce.gzhead.comment?16:0)),ne(ce,255&ce.gzhead.time),ne(ce,ce.gzhead.time>>8&255),ne(ce,ce.gzhead.time>>16&255),ne(ce,ce.gzhead.time>>24&255),ne(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),ne(ce,255&ce.gzhead.os),ce.gzhead.extra&&ce.gzhead.extra.length&&(ne(ce,255&ce.gzhead.extra.length),ne(ce,ce.gzhead.extra.length>>8&255)),ce.gzhead.hcrc&&(z.adler=c(z.adler,ce.pending_buf,ce.pending,0)),ce.gzindex=0,ce.status=69):(ne(ce,0),ne(ce,0),ne(ce,0),ne(ce,0),ne(ce,0),ne(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),ne(ce,3),ce.status=W);else{var _e=S+(ce.w_bits-8<<4)<<8;_e|=(2<=ce.strategy||ce.level<2?0:ce.level<6?1:ce.level===6?2:3)<<6,ce.strstart!==0&&(_e|=32),_e+=31-_e%31,ce.status=W,be(ce,_e),ce.strstart!==0&&(be(ce,z.adler>>>16),be(ce,65535&z.adler)),z.adler=1}if(ce.status===69)if(ce.gzhead.extra){for(ie=ce.pending;ce.gzindex<(65535&ce.gzhead.extra.length)&&(ce.pending!==ce.pending_buf_size||(ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),X(z),ie=ce.pending,ce.pending!==ce.pending_buf_size));)ne(ce,255&ce.gzhead.extra[ce.gzindex]),ce.gzindex++;ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),ce.gzindex===ce.gzhead.extra.length&&(ce.gzindex=0,ce.status=73)}else ce.status=73;if(ce.status===73)if(ce.gzhead.name){ie=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),X(z),ie=ce.pending,ce.pending===ce.pending_buf_size)){J=1;break}J=ce.gzindex<ce.gzhead.name.length?255&ce.gzhead.name.charCodeAt(ce.gzindex++):0,ne(ce,J)}while(J!==0);ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),J===0&&(ce.gzindex=0,ce.status=91)}else ce.status=91;if(ce.status===91)if(ce.gzhead.comment){ie=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),X(z),ie=ce.pending,ce.pending===ce.pending_buf_size)){J=1;break}J=ce.gzindex<ce.gzhead.comment.length?255&ce.gzhead.comment.charCodeAt(ce.gzindex++):0,ne(ce,J)}while(J!==0);ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),J===0&&(ce.status=103)}else ce.status=103;if(ce.status===103&&(ce.gzhead.hcrc?(ce.pending+2>ce.pending_buf_size&&X(z),ce.pending+2<=ce.pending_buf_size&&(ne(ce,255&z.adler),ne(ce,z.adler>>8&255),z.adler=0,ce.status=W)):ce.status=W),ce.pending!==0){if(X(z),z.avail_out===0)return ce.last_flush=-1,g}else if(z.avail_in===0&&se(ke)<=se(Ne)&&ke!==m)return ee(z,-5);if(ce.status===666&&z.avail_in!==0)return ee(z,-5);if(z.avail_in!==0||ce.lookahead!==0||ke!==h&&ce.status!==666){var Le=ce.strategy===2?function(xe,Ve){for(var xt;;){if(xe.lookahead===0&&(De(xe),xe.lookahead===0)){if(Ve===h)return U;break}if(xe.match_length=0,xt=s._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++,xt&&(Y(xe,!1),xe.strm.avail_out===0))return U}return xe.insert=0,Ve===m?(Y(xe,!0),xe.strm.avail_out===0?ae:re):xe.last_lit&&(Y(xe,!1),xe.strm.avail_out===0)?U:he}(ce,ke):ce.strategy===3?function(xe,Ve){for(var xt,ht,Et,Lt,Tt=xe.window;;){if(xe.lookahead<=K){if(De(xe),xe.lookahead<=K&&Ve===h)return U;if(xe.lookahead===0)break}if(xe.match_length=0,xe.lookahead>=B&&0<xe.strstart&&(ht=Tt[Et=xe.strstart-1])===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]){Lt=xe.strstart+K;do;while(ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&Et<Lt);xe.match_length=K-(Lt-Et),xe.match_length>xe.lookahead&&(xe.match_length=xe.lookahead)}if(xe.match_length>=B?(xt=s._tr_tally(xe,1,xe.match_length-B),xe.lookahead-=xe.match_length,xe.strstart+=xe.match_length,xe.match_length=0):(xt=s._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++),xt&&(Y(xe,!1),xe.strm.avail_out===0))return U}return xe.insert=0,Ve===m?(Y(xe,!0),xe.strm.avail_out===0?ae:re):xe.last_lit&&(Y(xe,!1),xe.strm.avail_out===0)?U:he}(ce,ke):i[ce.level].func(ce,ke);if(Le!==ae&&Le!==re||(ce.status=666),Le===U||Le===ae)return z.avail_out===0&&(ce.last_flush=-1),g;if(Le===he&&(ke===1?s._tr_align(ce):ke!==5&&(s._tr_stored_block(ce,0,0,!1),ke===3&&(V(ce.head),ce.lookahead===0&&(ce.strstart=0,ce.block_start=0,ce.insert=0))),X(z),z.avail_out===0))return ce.last_flush=-1,g}return ke!==m?g:ce.wrap<=0?1:(ce.wrap===2?(ne(ce,255&z.adler),ne(ce,z.adler>>8&255),ne(ce,z.adler>>16&255),ne(ce,z.adler>>24&255),ne(ce,255&z.total_in),ne(ce,z.total_in>>8&255),ne(ce,z.total_in>>16&255),ne(ce,z.total_in>>24&255)):(be(ce,z.adler>>>16),be(ce,65535&z.adler)),X(z),0<ce.wrap&&(ce.wrap=-ce.wrap),ce.pending!==0?g:1)},a.deflateEnd=function(z){var ke;return z&&z.state?(ke=z.state.status)!==F&&ke!==69&&ke!==73&&ke!==91&&ke!==103&&ke!==W&&ke!==666?ee(z,w):(z.state=null,ke===W?ee(z,-3):g):w},a.deflateSetDictionary=function(z,ke){var Ne,ce,ie,J,_e,Le,xe,Ve,xt=ke.length;if(!z||!z.state||(J=(Ne=z.state).wrap)===2||J===1&&Ne.status!==F||Ne.lookahead)return w;for(J===1&&(z.adler=u(z.adler,ke,xt,0)),Ne.wrap=0,xt>=Ne.w_size&&(J===0&&(V(Ne.head),Ne.strstart=0,Ne.block_start=0,Ne.insert=0),Ve=new o.Buf8(Ne.w_size),o.arraySet(Ve,ke,xt-Ne.w_size,Ne.w_size,0),ke=Ve,xt=Ne.w_size),_e=z.avail_in,Le=z.next_in,xe=z.input,z.avail_in=xt,z.next_in=0,z.input=ke,De(Ne);Ne.lookahead>=B;){for(ce=Ne.strstart,ie=Ne.lookahead-(B-1);Ne.ins_h=(Ne.ins_h<<Ne.hash_shift^Ne.window[ce+B-1])&Ne.hash_mask,Ne.prev[ce&Ne.w_mask]=Ne.head[Ne.ins_h],Ne.head[Ne.ins_h]=ce,ce++,--ie;);Ne.strstart=ce,Ne.lookahead=B-1,De(Ne)}return Ne.strstart+=Ne.lookahead,Ne.block_start=Ne.strstart,Ne.insert=Ne.lookahead,Ne.lookahead=0,Ne.match_length=Ne.prev_length=B-1,Ne.match_available=0,z.next_in=Le,z.input=xe,z.avail_in=_e,Ne.wrap=J,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var s,u,c,f,h,m,g,w,v,_,x,S,E,C,A,O,I,D,B,K,Q,F,W,U,he;s=i.state,u=i.next_in,U=i.input,c=u+(i.avail_in-5),f=i.next_out,he=i.output,h=f-(o-i.avail_out),m=f+(i.avail_out-257),g=s.dmax,w=s.wsize,v=s.whave,_=s.wnext,x=s.window,S=s.hold,E=s.bits,C=s.lencode,A=s.distcode,O=(1<<s.lenbits)-1,I=(1<<s.distbits)-1;e:do{E<15&&(S+=U[u++]<<E,E+=8,S+=U[u++]<<E,E+=8),D=C[S&O];t:for(;;){if(S>>>=B=D>>>24,E-=B,(B=D>>>16&255)===0)he[f++]=65535&D;else{if(!(16&B)){if((64&B)==0){D=C[(65535&D)+(S&(1<<B)-1)];continue t}if(32&B){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}K=65535&D,(B&=15)&&(E<B&&(S+=U[u++]<<E,E+=8),K+=S&(1<<B)-1,S>>>=B,E-=B),E<15&&(S+=U[u++]<<E,E+=8,S+=U[u++]<<E,E+=8),D=A[S&I];n:for(;;){if(S>>>=B=D>>>24,E-=B,!(16&(B=D>>>16&255))){if((64&B)==0){D=A[(65535&D)+(S&(1<<B)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(Q=65535&D,E<(B&=15)&&(S+=U[u++]<<E,(E+=8)<B&&(S+=U[u++]<<E,E+=8)),g<(Q+=S&(1<<B)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(S>>>=B,E-=B,(B=f-h)<Q){if(v<(B=Q-B)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(W=x,(F=0)===_){if(F+=w-B,B<K){for(K-=B;he[f++]=x[F++],--B;);F=f-Q,W=he}}else if(_<B){if(F+=w+_-B,(B-=_)<K){for(K-=B;he[f++]=x[F++],--B;);if(F=0,_<K){for(K-=B=_;he[f++]=x[F++],--B;);F=f-Q,W=he}}}else if(F+=_-B,B<K){for(K-=B;he[f++]=x[F++],--B;);F=f-Q,W=he}for(;2<K;)he[f++]=W[F++],he[f++]=W[F++],he[f++]=W[F++],K-=3;K&&(he[f++]=W[F++],1<K&&(he[f++]=W[F++]))}else{for(F=f-Q;he[f++]=he[F++],he[f++]=he[F++],he[f++]=he[F++],2<(K-=3););K&&(he[f++]=he[F++],1<K&&(he[f++]=he[F++]))}break}}break}}while(u<c&&f<m);u-=K=E>>3,S&=(1<<(E-=K<<3))-1,i.next_in=u,i.next_out=f,i.avail_in=u<c?c-u+5:5-(u-c),i.avail_out=f<m?m-f+257:257-(f-m),s.hold=S,s.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),u=n("./inffast"),c=n("./inftrees"),f=1,h=2,m=0,g=-2,w=1,v=852,_=592;function x(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(F){var W;return F&&F.state?(W=F.state,F.total_in=F.total_out=W.total=0,F.msg="",W.wrap&&(F.adler=1&W.wrap),W.mode=w,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new i.Buf32(v),W.distcode=W.distdyn=new i.Buf32(_),W.sane=1,W.back=-1,m):g}function C(F){var W;return F&&F.state?((W=F.state).wsize=0,W.whave=0,W.wnext=0,E(F)):g}function A(F,W){var U,he;return F&&F.state?(he=F.state,W<0?(U=0,W=-W):(U=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?g:(he.window!==null&&he.wbits!==W&&(he.window=null),he.wrap=U,he.wbits=W,C(F))):g}function O(F,W){var U,he;return F?(he=new S,(F.state=he).window=null,(U=A(F,W))!==m&&(F.state=null),U):g}var I,D,B=!0;function K(F){if(B){var W;for(I=new i.Buf32(512),D=new i.Buf32(32),W=0;W<144;)F.lens[W++]=8;for(;W<256;)F.lens[W++]=9;for(;W<280;)F.lens[W++]=7;for(;W<288;)F.lens[W++]=8;for(c(f,F.lens,0,288,I,0,F.work,{bits:9}),W=0;W<32;)F.lens[W++]=5;c(h,F.lens,0,32,D,0,F.work,{bits:5}),B=!1}F.lencode=I,F.lenbits=9,F.distcode=D,F.distbits=5}function Q(F,W,U,he){var ae,re=F.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new i.Buf8(re.wsize)),he>=re.wsize?(i.arraySet(re.window,W,U-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(he<(ae=re.wsize-re.wnext)&&(ae=he),i.arraySet(re.window,W,U-he,ae,re.wnext),(he-=ae)?(i.arraySet(re.window,W,U-he,he,0),re.wnext=he,re.whave=re.wsize):(re.wnext+=ae,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=ae))),0}a.inflateReset=C,a.inflateReset2=A,a.inflateResetKeep=E,a.inflateInit=function(F){return O(F,15)},a.inflateInit2=O,a.inflate=function(F,W){var U,he,ae,re,ee,se,V,X,Y,ne,be,Ee,De,Pe,Re,Te,He,it,Ie,Ae,z,ke,Ne,ce,ie=0,J=new i.Buf8(4),_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return g;(U=F.state).mode===12&&(U.mode=13),ee=F.next_out,ae=F.output,V=F.avail_out,re=F.next_in,he=F.input,se=F.avail_in,X=U.hold,Y=U.bits,ne=se,be=V,ke=m;e:for(;;)switch(U.mode){case w:if(U.wrap===0){U.mode=13;break}for(;Y<16;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}if(2&U.wrap&&X===35615){J[U.check=0]=255&X,J[1]=X>>>8&255,U.check=s(U.check,J,2,0),Y=X=0,U.mode=2;break}if(U.flags=0,U.head&&(U.head.done=!1),!(1&U.wrap)||(((255&X)<<8)+(X>>8))%31){F.msg="incorrect header check",U.mode=30;break}if((15&X)!=8){F.msg="unknown compression method",U.mode=30;break}if(Y-=4,z=8+(15&(X>>>=4)),U.wbits===0)U.wbits=z;else if(z>U.wbits){F.msg="invalid window size",U.mode=30;break}U.dmax=1<<z,F.adler=U.check=1,U.mode=512&X?10:12,Y=X=0;break;case 2:for(;Y<16;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}if(U.flags=X,(255&U.flags)!=8){F.msg="unknown compression method",U.mode=30;break}if(57344&U.flags){F.msg="unknown header flags set",U.mode=30;break}U.head&&(U.head.text=X>>8&1),512&U.flags&&(J[0]=255&X,J[1]=X>>>8&255,U.check=s(U.check,J,2,0)),Y=X=0,U.mode=3;case 3:for(;Y<32;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}U.head&&(U.head.time=X),512&U.flags&&(J[0]=255&X,J[1]=X>>>8&255,J[2]=X>>>16&255,J[3]=X>>>24&255,U.check=s(U.check,J,4,0)),Y=X=0,U.mode=4;case 4:for(;Y<16;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}U.head&&(U.head.xflags=255&X,U.head.os=X>>8),512&U.flags&&(J[0]=255&X,J[1]=X>>>8&255,U.check=s(U.check,J,2,0)),Y=X=0,U.mode=5;case 5:if(1024&U.flags){for(;Y<16;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}U.length=X,U.head&&(U.head.extra_len=X),512&U.flags&&(J[0]=255&X,J[1]=X>>>8&255,U.check=s(U.check,J,2,0)),Y=X=0}else U.head&&(U.head.extra=null);U.mode=6;case 6:if(1024&U.flags&&(se<(Ee=U.length)&&(Ee=se),Ee&&(U.head&&(z=U.head.extra_len-U.length,U.head.extra||(U.head.extra=new Array(U.head.extra_len)),i.arraySet(U.head.extra,he,re,Ee,z)),512&U.flags&&(U.check=s(U.check,he,Ee,re)),se-=Ee,re+=Ee,U.length-=Ee),U.length))break e;U.length=0,U.mode=7;case 7:if(2048&U.flags){if(se===0)break e;for(Ee=0;z=he[re+Ee++],U.head&&z&&U.length<65536&&(U.head.name+=String.fromCharCode(z)),z&&Ee<se;);if(512&U.flags&&(U.check=s(U.check,he,Ee,re)),se-=Ee,re+=Ee,z)break e}else U.head&&(U.head.name=null);U.length=0,U.mode=8;case 8:if(4096&U.flags){if(se===0)break e;for(Ee=0;z=he[re+Ee++],U.head&&z&&U.length<65536&&(U.head.comment+=String.fromCharCode(z)),z&&Ee<se;);if(512&U.flags&&(U.check=s(U.check,he,Ee,re)),se-=Ee,re+=Ee,z)break e}else U.head&&(U.head.comment=null);U.mode=9;case 9:if(512&U.flags){for(;Y<16;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}if(X!==(65535&U.check)){F.msg="header crc mismatch",U.mode=30;break}Y=X=0}U.head&&(U.head.hcrc=U.flags>>9&1,U.head.done=!0),F.adler=U.check=0,U.mode=12;break;case 10:for(;Y<32;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}F.adler=U.check=x(X),Y=X=0,U.mode=11;case 11:if(U.havedict===0)return F.next_out=ee,F.avail_out=V,F.next_in=re,F.avail_in=se,U.hold=X,U.bits=Y,2;F.adler=U.check=1,U.mode=12;case 12:if(W===5||W===6)break e;case 13:if(U.last){X>>>=7&Y,Y-=7&Y,U.mode=27;break}for(;Y<3;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}switch(U.last=1&X,Y-=1,3&(X>>>=1)){case 0:U.mode=14;break;case 1:if(K(U),U.mode=20,W!==6)break;X>>>=2,Y-=2;break e;case 2:U.mode=17;break;case 3:F.msg="invalid block type",U.mode=30}X>>>=2,Y-=2;break;case 14:for(X>>>=7&Y,Y-=7&Y;Y<32;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}if((65535&X)!=(X>>>16^65535)){F.msg="invalid stored block lengths",U.mode=30;break}if(U.length=65535&X,Y=X=0,U.mode=15,W===6)break e;case 15:U.mode=16;case 16:if(Ee=U.length){if(se<Ee&&(Ee=se),V<Ee&&(Ee=V),Ee===0)break e;i.arraySet(ae,he,re,Ee,ee),se-=Ee,re+=Ee,V-=Ee,ee+=Ee,U.length-=Ee;break}U.mode=12;break;case 17:for(;Y<14;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}if(U.nlen=257+(31&X),X>>>=5,Y-=5,U.ndist=1+(31&X),X>>>=5,Y-=5,U.ncode=4+(15&X),X>>>=4,Y-=4,286<U.nlen||30<U.ndist){F.msg="too many length or distance symbols",U.mode=30;break}U.have=0,U.mode=18;case 18:for(;U.have<U.ncode;){for(;Y<3;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}U.lens[_e[U.have++]]=7&X,X>>>=3,Y-=3}for(;U.have<19;)U.lens[_e[U.have++]]=0;if(U.lencode=U.lendyn,U.lenbits=7,Ne={bits:U.lenbits},ke=c(0,U.lens,0,19,U.lencode,0,U.work,Ne),U.lenbits=Ne.bits,ke){F.msg="invalid code lengths set",U.mode=30;break}U.have=0,U.mode=19;case 19:for(;U.have<U.nlen+U.ndist;){for(;Te=(ie=U.lencode[X&(1<<U.lenbits)-1])>>>16&255,He=65535&ie,!((Re=ie>>>24)<=Y);){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}if(He<16)X>>>=Re,Y-=Re,U.lens[U.have++]=He;else{if(He===16){for(ce=Re+2;Y<ce;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}if(X>>>=Re,Y-=Re,U.have===0){F.msg="invalid bit length repeat",U.mode=30;break}z=U.lens[U.have-1],Ee=3+(3&X),X>>>=2,Y-=2}else if(He===17){for(ce=Re+3;Y<ce;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}Y-=Re,z=0,Ee=3+(7&(X>>>=Re)),X>>>=3,Y-=3}else{for(ce=Re+7;Y<ce;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}Y-=Re,z=0,Ee=11+(127&(X>>>=Re)),X>>>=7,Y-=7}if(U.have+Ee>U.nlen+U.ndist){F.msg="invalid bit length repeat",U.mode=30;break}for(;Ee--;)U.lens[U.have++]=z}}if(U.mode===30)break;if(U.lens[256]===0){F.msg="invalid code -- missing end-of-block",U.mode=30;break}if(U.lenbits=9,Ne={bits:U.lenbits},ke=c(f,U.lens,0,U.nlen,U.lencode,0,U.work,Ne),U.lenbits=Ne.bits,ke){F.msg="invalid literal/lengths set",U.mode=30;break}if(U.distbits=6,U.distcode=U.distdyn,Ne={bits:U.distbits},ke=c(h,U.lens,U.nlen,U.ndist,U.distcode,0,U.work,Ne),U.distbits=Ne.bits,ke){F.msg="invalid distances set",U.mode=30;break}if(U.mode=20,W===6)break e;case 20:U.mode=21;case 21:if(6<=se&&258<=V){F.next_out=ee,F.avail_out=V,F.next_in=re,F.avail_in=se,U.hold=X,U.bits=Y,u(F,be),ee=F.next_out,ae=F.output,V=F.avail_out,re=F.next_in,he=F.input,se=F.avail_in,X=U.hold,Y=U.bits,U.mode===12&&(U.back=-1);break}for(U.back=0;Te=(ie=U.lencode[X&(1<<U.lenbits)-1])>>>16&255,He=65535&ie,!((Re=ie>>>24)<=Y);){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}if(Te&&(240&Te)==0){for(it=Re,Ie=Te,Ae=He;Te=(ie=U.lencode[Ae+((X&(1<<it+Ie)-1)>>it)])>>>16&255,He=65535&ie,!(it+(Re=ie>>>24)<=Y);){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}X>>>=it,Y-=it,U.back+=it}if(X>>>=Re,Y-=Re,U.back+=Re,U.length=He,Te===0){U.mode=26;break}if(32&Te){U.back=-1,U.mode=12;break}if(64&Te){F.msg="invalid literal/length code",U.mode=30;break}U.extra=15&Te,U.mode=22;case 22:if(U.extra){for(ce=U.extra;Y<ce;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}U.length+=X&(1<<U.extra)-1,X>>>=U.extra,Y-=U.extra,U.back+=U.extra}U.was=U.length,U.mode=23;case 23:for(;Te=(ie=U.distcode[X&(1<<U.distbits)-1])>>>16&255,He=65535&ie,!((Re=ie>>>24)<=Y);){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}if((240&Te)==0){for(it=Re,Ie=Te,Ae=He;Te=(ie=U.distcode[Ae+((X&(1<<it+Ie)-1)>>it)])>>>16&255,He=65535&ie,!(it+(Re=ie>>>24)<=Y);){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}X>>>=it,Y-=it,U.back+=it}if(X>>>=Re,Y-=Re,U.back+=Re,64&Te){F.msg="invalid distance code",U.mode=30;break}U.offset=He,U.extra=15&Te,U.mode=24;case 24:if(U.extra){for(ce=U.extra;Y<ce;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}U.offset+=X&(1<<U.extra)-1,X>>>=U.extra,Y-=U.extra,U.back+=U.extra}if(U.offset>U.dmax){F.msg="invalid distance too far back",U.mode=30;break}U.mode=25;case 25:if(V===0)break e;if(Ee=be-V,U.offset>Ee){if((Ee=U.offset-Ee)>U.whave&&U.sane){F.msg="invalid distance too far back",U.mode=30;break}De=Ee>U.wnext?(Ee-=U.wnext,U.wsize-Ee):U.wnext-Ee,Ee>U.length&&(Ee=U.length),Pe=U.window}else Pe=ae,De=ee-U.offset,Ee=U.length;for(V<Ee&&(Ee=V),V-=Ee,U.length-=Ee;ae[ee++]=Pe[De++],--Ee;);U.length===0&&(U.mode=21);break;case 26:if(V===0)break e;ae[ee++]=U.length,V--,U.mode=21;break;case 27:if(U.wrap){for(;Y<32;){if(se===0)break e;se--,X|=he[re++]<<Y,Y+=8}if(be-=V,F.total_out+=be,U.total+=be,be&&(F.adler=U.check=U.flags?s(U.check,ae,be,ee-be):o(U.check,ae,be,ee-be)),be=V,(U.flags?X:x(X))!==U.check){F.msg="incorrect data check",U.mode=30;break}Y=X=0}U.mode=28;case 28:if(U.wrap&&U.flags){for(;Y<32;){if(se===0)break e;se--,X+=he[re++]<<Y,Y+=8}if(X!==(4294967295&U.total)){F.msg="incorrect length check",U.mode=30;break}Y=X=0}U.mode=29;case 29:ke=1;break e;case 30:ke=-3;break e;case 31:return-4;case 32:default:return g}return F.next_out=ee,F.avail_out=V,F.next_in=re,F.avail_in=se,U.hold=X,U.bits=Y,(U.wsize||be!==F.avail_out&&U.mode<30&&(U.mode<27||W!==4))&&Q(F,F.output,F.next_out,be-F.avail_out)?(U.mode=31,-4):(ne-=F.avail_in,be-=F.avail_out,F.total_in+=ne,F.total_out+=be,U.total+=be,U.wrap&&be&&(F.adler=U.check=U.flags?s(U.check,ae,be,F.next_out-be):o(U.check,ae,be,F.next_out-be)),F.data_type=U.bits+(U.last?64:0)+(U.mode===12?128:0)+(U.mode===20||U.mode===15?256:0),(ne==0&&be===0||W===4)&&ke===m&&(ke=-5),ke)},a.inflateEnd=function(F){if(!F||!F.state)return g;var W=F.state;return W.window&&(W.window=null),F.state=null,m},a.inflateGetHeader=function(F,W){var U;return F&&F.state?(2&(U=F.state).wrap)==0?g:((U.head=W).done=!1,m):g},a.inflateSetDictionary=function(F,W){var U,he=W.length;return F&&F.state?(U=F.state).wrap!==0&&U.mode!==11?g:U.mode===11&&o(1,W,he,0)!==U.check?-3:Q(F,W,he,he)?(U.mode=31,-4):(U.havedict=1,m):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,h,m,g,w,v,_,x){var S,E,C,A,O,I,D,B,K,Q=x.bits,F=0,W=0,U=0,he=0,ae=0,re=0,ee=0,se=0,V=0,X=0,Y=null,ne=0,be=new i.Buf16(16),Ee=new i.Buf16(16),De=null,Pe=0;for(F=0;F<=15;F++)be[F]=0;for(W=0;W<g;W++)be[h[m+W]]++;for(ae=Q,he=15;1<=he&&be[he]===0;he--);if(he<ae&&(ae=he),he===0)return w[v++]=20971520,w[v++]=20971520,x.bits=1,0;for(U=1;U<he&&be[U]===0;U++);for(ae<U&&(ae=U),F=se=1;F<=15;F++)if(se<<=1,(se-=be[F])<0)return-1;if(0<se&&(f===0||he!==1))return-1;for(Ee[1]=0,F=1;F<15;F++)Ee[F+1]=Ee[F]+be[F];for(W=0;W<g;W++)h[m+W]!==0&&(_[Ee[h[m+W]]++]=W);if(I=f===0?(Y=De=_,19):f===1?(Y=o,ne-=257,De=s,Pe-=257,256):(Y=u,De=c,-1),F=U,O=v,ee=W=X=0,C=-1,A=(V=1<<(re=ae))-1,f===1&&852<V||f===2&&592<V)return 1;for(;;){for(D=F-ee,K=_[W]<I?(B=0,_[W]):_[W]>I?(B=De[Pe+_[W]],Y[ne+_[W]]):(B=96,0),S=1<<F-ee,U=E=1<<re;w[O+(X>>ee)+(E-=S)]=D<<24|B<<16|K|0,E!==0;);for(S=1<<F-1;X&S;)S>>=1;if(S!==0?(X&=S-1,X+=S):X=0,W++,--be[F]==0){if(F===he)break;F=h[m+_[W]]}if(ae<F&&(X&A)!==C){for(ee===0&&(ee=ae),O+=U,se=1<<(re=F-ee);re+ee<he&&!((se-=be[re+ee])<=0);)re++,se<<=1;if(V+=1<<re,f===1&&852<V||f===2&&592<V)return 1;w[C=X&A]=ae<<24|re<<16|O-v|0}}return X!==0&&(w[O+X]=F-ee<<24|64<<16|0),x.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,s=1;function u(ie){for(var J=ie.length;0<=--J;)ie[J]=0}var c=0,f=29,h=256,m=h+1+f,g=30,w=19,v=2*m+1,_=15,x=16,S=7,E=256,C=16,A=17,O=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(m+2));u(Q);var F=new Array(2*g);u(F);var W=new Array(512);u(W);var U=new Array(256);u(U);var he=new Array(f);u(he);var ae,re,ee,se=new Array(g);function V(ie,J,_e,Le,xe){this.static_tree=ie,this.extra_bits=J,this.extra_base=_e,this.elems=Le,this.max_length=xe,this.has_stree=ie&&ie.length}function X(ie,J){this.dyn_tree=ie,this.max_code=0,this.stat_desc=J}function Y(ie){return ie<256?W[ie]:W[256+(ie>>>7)]}function ne(ie,J){ie.pending_buf[ie.pending++]=255&J,ie.pending_buf[ie.pending++]=J>>>8&255}function be(ie,J,_e){ie.bi_valid>x-_e?(ie.bi_buf|=J<<ie.bi_valid&65535,ne(ie,ie.bi_buf),ie.bi_buf=J>>x-ie.bi_valid,ie.bi_valid+=_e-x):(ie.bi_buf|=J<<ie.bi_valid&65535,ie.bi_valid+=_e)}function Ee(ie,J,_e){be(ie,_e[2*J],_e[2*J+1])}function De(ie,J){for(var _e=0;_e|=1&ie,ie>>>=1,_e<<=1,0<--J;);return _e>>>1}function Pe(ie,J,_e){var Le,xe,Ve=new Array(_+1),xt=0;for(Le=1;Le<=_;Le++)Ve[Le]=xt=xt+_e[Le-1]<<1;for(xe=0;xe<=J;xe++){var ht=ie[2*xe+1];ht!==0&&(ie[2*xe]=De(Ve[ht]++,ht))}}function Re(ie){var J;for(J=0;J<m;J++)ie.dyn_ltree[2*J]=0;for(J=0;J<g;J++)ie.dyn_dtree[2*J]=0;for(J=0;J<w;J++)ie.bl_tree[2*J]=0;ie.dyn_ltree[2*E]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function Te(ie){8<ie.bi_valid?ne(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function He(ie,J,_e,Le){var xe=2*J,Ve=2*_e;return ie[xe]<ie[Ve]||ie[xe]===ie[Ve]&&Le[J]<=Le[_e]}function it(ie,J,_e){for(var Le=ie.heap[_e],xe=_e<<1;xe<=ie.heap_len&&(xe<ie.heap_len&&He(J,ie.heap[xe+1],ie.heap[xe],ie.depth)&&xe++,!He(J,Le,ie.heap[xe],ie.depth));)ie.heap[_e]=ie.heap[xe],_e=xe,xe<<=1;ie.heap[_e]=Le}function Ie(ie,J,_e){var Le,xe,Ve,xt,ht=0;if(ie.last_lit!==0)for(;Le=ie.pending_buf[ie.d_buf+2*ht]<<8|ie.pending_buf[ie.d_buf+2*ht+1],xe=ie.pending_buf[ie.l_buf+ht],ht++,Le===0?Ee(ie,xe,J):(Ee(ie,(Ve=U[xe])+h+1,J),(xt=I[Ve])!==0&&be(ie,xe-=he[Ve],xt),Ee(ie,Ve=Y(--Le),_e),(xt=D[Ve])!==0&&be(ie,Le-=se[Ve],xt)),ht<ie.last_lit;);Ee(ie,E,J)}function Ae(ie,J){var _e,Le,xe,Ve=J.dyn_tree,xt=J.stat_desc.static_tree,ht=J.stat_desc.has_stree,Et=J.stat_desc.elems,Lt=-1;for(ie.heap_len=0,ie.heap_max=v,_e=0;_e<Et;_e++)Ve[2*_e]!==0?(ie.heap[++ie.heap_len]=Lt=_e,ie.depth[_e]=0):Ve[2*_e+1]=0;for(;ie.heap_len<2;)Ve[2*(xe=ie.heap[++ie.heap_len]=Lt<2?++Lt:0)]=1,ie.depth[xe]=0,ie.opt_len--,ht&&(ie.static_len-=xt[2*xe+1]);for(J.max_code=Lt,_e=ie.heap_len>>1;1<=_e;_e--)it(ie,Ve,_e);for(xe=Et;_e=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],it(ie,Ve,1),Le=ie.heap[1],ie.heap[--ie.heap_max]=_e,ie.heap[--ie.heap_max]=Le,Ve[2*xe]=Ve[2*_e]+Ve[2*Le],ie.depth[xe]=(ie.depth[_e]>=ie.depth[Le]?ie.depth[_e]:ie.depth[Le])+1,Ve[2*_e+1]=Ve[2*Le+1]=xe,ie.heap[1]=xe++,it(ie,Ve,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],function(Tt,zt){var ge,N,H,fe,Oe,ve,Ce=zt.dyn_tree,le=zt.max_code,ct=zt.stat_desc.static_tree,yt=zt.stat_desc.has_stree,M=zt.stat_desc.extra_bits,Be=zt.stat_desc.extra_base,et=zt.stat_desc.max_length,me=0;for(fe=0;fe<=_;fe++)Tt.bl_count[fe]=0;for(Ce[2*Tt.heap[Tt.heap_max]+1]=0,ge=Tt.heap_max+1;ge<v;ge++)et<(fe=Ce[2*Ce[2*(N=Tt.heap[ge])+1]+1]+1)&&(fe=et,me++),Ce[2*N+1]=fe,le<N||(Tt.bl_count[fe]++,Oe=0,Be<=N&&(Oe=M[N-Be]),ve=Ce[2*N],Tt.opt_len+=ve*(fe+Oe),yt&&(Tt.static_len+=ve*(ct[2*N+1]+Oe)));if(me!==0){do{for(fe=et-1;Tt.bl_count[fe]===0;)fe--;Tt.bl_count[fe]--,Tt.bl_count[fe+1]+=2,Tt.bl_count[et]--,me-=2}while(0<me);for(fe=et;fe!==0;fe--)for(N=Tt.bl_count[fe];N!==0;)le<(H=Tt.heap[--ge])||(Ce[2*H+1]!==fe&&(Tt.opt_len+=(fe-Ce[2*H+1])*Ce[2*H],Ce[2*H+1]=fe),N--)}}(ie,J),Pe(Ve,Lt,ie.bl_count)}function z(ie,J,_e){var Le,xe,Ve=-1,xt=J[1],ht=0,Et=7,Lt=4;for(xt===0&&(Et=138,Lt=3),J[2*(_e+1)+1]=65535,Le=0;Le<=_e;Le++)xe=xt,xt=J[2*(Le+1)+1],++ht<Et&&xe===xt||(ht<Lt?ie.bl_tree[2*xe]+=ht:xe!==0?(xe!==Ve&&ie.bl_tree[2*xe]++,ie.bl_tree[2*C]++):ht<=10?ie.bl_tree[2*A]++:ie.bl_tree[2*O]++,Ve=xe,Lt=(ht=0)===xt?(Et=138,3):xe===xt?(Et=6,3):(Et=7,4))}function ke(ie,J,_e){var Le,xe,Ve=-1,xt=J[1],ht=0,Et=7,Lt=4;for(xt===0&&(Et=138,Lt=3),Le=0;Le<=_e;Le++)if(xe=xt,xt=J[2*(Le+1)+1],!(++ht<Et&&xe===xt)){if(ht<Lt)for(;Ee(ie,xe,ie.bl_tree),--ht!=0;);else xe!==0?(xe!==Ve&&(Ee(ie,xe,ie.bl_tree),ht--),Ee(ie,C,ie.bl_tree),be(ie,ht-3,2)):ht<=10?(Ee(ie,A,ie.bl_tree),be(ie,ht-3,3)):(Ee(ie,O,ie.bl_tree),be(ie,ht-11,7));Ve=xe,Lt=(ht=0)===xt?(Et=138,3):xe===xt?(Et=6,3):(Et=7,4)}}u(se);var Ne=!1;function ce(ie,J,_e,Le){be(ie,(c<<1)+(Le?1:0),3),function(xe,Ve,xt,ht){Te(xe),ne(xe,xt),ne(xe,~xt),i.arraySet(xe.pending_buf,xe.window,Ve,xt,xe.pending),xe.pending+=xt}(ie,J,_e)}a._tr_init=function(ie){Ne||(function(){var J,_e,Le,xe,Ve,xt=new Array(_+1);for(xe=Le=0;xe<f-1;xe++)for(he[xe]=Le,J=0;J<1<<I[xe];J++)U[Le++]=xe;for(U[Le-1]=xe,xe=Ve=0;xe<16;xe++)for(se[xe]=Ve,J=0;J<1<<D[xe];J++)W[Ve++]=xe;for(Ve>>=7;xe<g;xe++)for(se[xe]=Ve<<7,J=0;J<1<<D[xe]-7;J++)W[256+Ve++]=xe;for(_e=0;_e<=_;_e++)xt[_e]=0;for(J=0;J<=143;)Q[2*J+1]=8,J++,xt[8]++;for(;J<=255;)Q[2*J+1]=9,J++,xt[9]++;for(;J<=279;)Q[2*J+1]=7,J++,xt[7]++;for(;J<=287;)Q[2*J+1]=8,J++,xt[8]++;for(Pe(Q,m+1,xt),J=0;J<g;J++)F[2*J+1]=5,F[2*J]=De(J,5);ae=new V(Q,I,h+1,m,_),re=new V(F,D,0,g,_),ee=new V(new Array(0),B,0,w,S)}(),Ne=!0),ie.l_desc=new X(ie.dyn_ltree,ae),ie.d_desc=new X(ie.dyn_dtree,re),ie.bl_desc=new X(ie.bl_tree,ee),ie.bi_buf=0,ie.bi_valid=0,Re(ie)},a._tr_stored_block=ce,a._tr_flush_block=function(ie,J,_e,Le){var xe,Ve,xt=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=function(ht){var Et,Lt=4093624447;for(Et=0;Et<=31;Et++,Lt>>>=1)if(1&Lt&&ht.dyn_ltree[2*Et]!==0)return o;if(ht.dyn_ltree[18]!==0||ht.dyn_ltree[20]!==0||ht.dyn_ltree[26]!==0)return s;for(Et=32;Et<h;Et++)if(ht.dyn_ltree[2*Et]!==0)return s;return o}(ie)),Ae(ie,ie.l_desc),Ae(ie,ie.d_desc),xt=function(ht){var Et;for(z(ht,ht.dyn_ltree,ht.l_desc.max_code),z(ht,ht.dyn_dtree,ht.d_desc.max_code),Ae(ht,ht.bl_desc),Et=w-1;3<=Et&&ht.bl_tree[2*K[Et]+1]===0;Et--);return ht.opt_len+=3*(Et+1)+5+5+4,Et}(ie),xe=ie.opt_len+3+7>>>3,(Ve=ie.static_len+3+7>>>3)<=xe&&(xe=Ve)):xe=Ve=_e+5,_e+4<=xe&&J!==-1?ce(ie,J,_e,Le):ie.strategy===4||Ve===xe?(be(ie,2+(Le?1:0),3),Ie(ie,Q,F)):(be(ie,4+(Le?1:0),3),function(ht,Et,Lt,Tt){var zt;for(be(ht,Et-257,5),be(ht,Lt-1,5),be(ht,Tt-4,4),zt=0;zt<Tt;zt++)be(ht,ht.bl_tree[2*K[zt]+1],3);ke(ht,ht.dyn_ltree,Et-1),ke(ht,ht.dyn_dtree,Lt-1)}(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,xt+1),Ie(ie,ie.dyn_ltree,ie.dyn_dtree)),Re(ie),Le&&Te(ie)},a._tr_tally=function(ie,J,_e){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=J>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&J,ie.pending_buf[ie.l_buf+ie.last_lit]=255&_e,ie.last_lit++,J===0?ie.dyn_ltree[2*_e]++:(ie.matches++,J--,ie.dyn_ltree[2*(U[_e]+h+1)]++,ie.dyn_dtree[2*Y(J)]++),ie.last_lit===ie.lit_bufsize-1},a._tr_align=function(ie){be(ie,2,3),Ee(ie,E,Q),function(J){J.bi_valid===16?(ne(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)}(ie)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,s){if(!o.setImmediate){var u,c,f,h,m=1,g={},w=!1,v=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(C){Vr.nextTick(function(){S(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,A=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=A,C}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){f.port2.postMessage(C)}):v&&"onreadystatechange"in v.createElement("script")?(c=v.documentElement,function(C){var A=v.createElement("script");A.onreadystatechange=function(){S(C),A.onreadystatechange=null,c.removeChild(A),A=null},c.appendChild(A)}):function(C){setTimeout(S,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var A=new Array(arguments.length-1),O=0;O<A.length;O++)A[O]=arguments[O+1];var I={callback:C,args:A};return g[m]=I,u(m),m++},_.clearImmediate=x}function x(C){delete g[C]}function S(C){if(w)setTimeout(S,0,C);else{var A=g[C];if(A){w=!0;try{(function(O){var I=O.callback,D=O.args;switch(D.length){case 0:I();break;case 1:I(D[0]);break;case 2:I(D[0],D[1]);break;case 3:I(D[0],D[1],D[2]);break;default:I.apply(s,D)}})(A)}finally{x(C),w=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof nd<"u"?nd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(cS)),cS.exports}var GJ=VJ();const iM=Qa(GJ);var dS,CI;function WJ(){if(CI)return dS;CI=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Vr>"u"||typeof Vr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,o=null,s=null;typeof r!="function"&&(a=r,r=null,s=new this.Promise(function(E,C){i=E,o=C})),a=a||{};var u=!1,c=null,f=null,h=null,m=this,g=function(E,C,A){f&&(clearTimeout(f),f=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),u||(s?C?o(C):i(A):typeof r=="function"&&r(C,A),u=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},w=function(E){if(u)return g(E);c&&(clearTimeout(c),c=null),m.domainReentrant&&E&&(m.domains[t]=Vr.domain);var C=a.maxExecutionTime||m.maxExecutionTime;if(C&&(h=setTimeout(function(){m.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var A=!1;try{n(function(O,I){A||(A=!0,g(E,O,I))})}catch(O){A||(A=!0,g(E,O))}}else m._promiseTry(function(){return n()}).then(function(O){g(E,void 0,O)},function(O){g(E,O)})};m.domainReentrant&&Vr.domain&&(w=Vr.domain.bind(w));var v=a.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],w(!0);else if(m.domainReentrant&&Vr.domain&&Vr.domain===m.domains[t])w(!1);else if(m.queues[t].length>=v)g(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){w(!0)};a.skipQueue?m.queues[t].unshift(_):m.queues[t].push(_);var x=a.timeout||m.timeout;x&&(c=setTimeout(function(){c=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var S=a.maxOccupationTime||m.maxOccupationTime;if(S&&(f=setTimeout(function(){m.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),s)return s},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,o=function(u,c){return function(f){i.acquire(u,c,f,a)}},s=t.reduceRight(function(u,c){return o(c,u)},n);if(typeof r=="function")s(r);else return new this.Promise(function(u,c){s.length===1?s(function(f,h){f?c(f):u(h)}):u(s())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},dS=e,dS}var fS,kI;function KJ(){return kI||(kI=1,fS=WJ()),fS}var ZJ=KJ();const Bm=Qa(ZJ);var Gy={exports:{}},AI;function YJ(){return AI||(AI=1,typeof Object.create=="function"?Gy.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Gy.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Gy.exports}var hS,TI;function XJ(){if(TI)return hS;TI=1;var e=nk().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,o=n.length,s=this._len,u=0;u<o;){for(var c=s%i,f=Math.min(o-u,i-c),h=0;h<f;h++)a[c+h]=n[u+h];s+=f,u+=f,s%i===0&&this._update(a)}return this._len+=o,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,o=(a-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hS=t,hS}var pS,RI;function JJ(){if(RI)return pS;RI=1;var e=YJ(),t=XJ(),n=nk().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(f){return f<<1|f>>>31}function s(f){return f<<5|f>>>27}function u(f){return f<<30|f>>>2}function c(f,h,m,g){return f===0?h&m|~h&g:f===2?h&m|h&g|m&g:h^m^g}return i.prototype._update=function(f){for(var h=this._w,m=this._a|0,g=this._b|0,w=this._c|0,v=this._d|0,_=this._e|0,x=0;x<16;++x)h[x]=f.readInt32BE(x*4);for(;x<80;++x)h[x]=o(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=s(m)+c(E,g,w,v)+_+h[S]+r[E]|0;_=v,v=w,w=u(g),g=m,m=C}this._a=m+this._a|0,this._b=g+this._b|0,this._c=w+this._c|0,this._d=v+this._d|0,this._e=_+this._e|0},i.prototype._hash=function(){var f=n.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},pS=i,pS}var QJ=JJ();const oM=Qa(QJ);var mS,NI;function eQ(){if(NI)return mS;NI=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",s=0,u=-1,c=0,f,h=0;h<=a.length;++h){if(h<a.length)f=a.charCodeAt(h);else{if(f===47)break;f=47}if(f===47){if(!(u===h-1||c===1))if(u!==h-1&&c===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var m=o.lastIndexOf("/");if(m!==o.length-1){m===-1?(o="",s=0):(o=o.slice(0,m),s=o.length-1-o.lastIndexOf("/")),u=h,c=0;continue}}else if(o.length===2||o.length===1){o="",s=0,u=h,c=0;continue}}i&&(o.length>0?o+="/..":o="..",s=2)}else o.length>0?o+="/"+a.slice(u+1,h):o=a.slice(u+1,h),s=h-u-1;u=h,c=0}else f===46&&c!==-1?++c:c=-1}return o}function n(a,i){var o=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+s:o+a+s:s}var r={resolve:function(){for(var i="",o=!1,s,u=arguments.length-1;u>=-1&&!o;u--){var c;u>=0?c=arguments[u]:(s===void 0&&(s=Vr.cwd()),c=s),e(c),c.length!==0&&(i=c+"/"+i,o=c.charCodeAt(0)===47)}return i=t(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,s=i.charCodeAt(i.length-1)===47;return i=t(i,!o),i.length===0&&!o&&(i="."),i.length>0&&s&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var s=arguments[o];e(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i),o=r.resolve(o),i===o))return"";for(var s=1;s<i.length&&i.charCodeAt(s)===47;++s);for(var u=i.length,c=u-s,f=1;f<o.length&&o.charCodeAt(f)===47;++f);for(var h=o.length,m=h-f,g=c<m?c:m,w=-1,v=0;v<=g;++v){if(v===g){if(m>g){if(o.charCodeAt(f+v)===47)return o.slice(f+v+1);if(v===0)return o.slice(f+v)}else c>g&&(i.charCodeAt(s+v)===47?w=v:v===0&&(w=0));break}var _=i.charCodeAt(s+v),x=o.charCodeAt(f+v);if(_!==x)break;_===47&&(w=v)}var S="";for(v=s+w+1;v<=u;++v)(v===u||i.charCodeAt(v)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+o.slice(f+w):(f+=w,o.charCodeAt(f)===47&&++f,o.slice(f))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),s=o===47,u=-1,c=!0,f=i.length-1;f>=1;--f)if(o=i.charCodeAt(f),o===47){if(!c){u=f;break}}else c=!1;return u===-1?s?"/":".":s&&u===1?"//":i.slice(0,u)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var s=0,u=-1,c=!0,f;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var h=o.length-1,m=-1;for(f=i.length-1;f>=0;--f){var g=i.charCodeAt(f);if(g===47){if(!c){s=f+1;break}}else m===-1&&(c=!1,m=f+1),h>=0&&(g===o.charCodeAt(h)?--h===-1&&(u=f):(h=-1,u=m))}return s===u?u=m:u===-1&&(u=i.length),i.slice(s,u)}else{for(f=i.length-1;f>=0;--f)if(i.charCodeAt(f)===47){if(!c){s=f+1;break}}else u===-1&&(c=!1,u=f+1);return u===-1?"":i.slice(s,u)}},extname:function(i){e(i);for(var o=-1,s=0,u=-1,c=!0,f=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!c){s=h+1;break}continue}u===-1&&(c=!1,u=h+1),m===46?o===-1?o=h:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||u===-1||f===0||f===1&&o===u-1&&o===s+1?"":i.slice(o,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var s=i.charCodeAt(0),u=s===47,c;u?(o.root="/",c=1):c=0;for(var f=-1,h=0,m=-1,g=!0,w=i.length-1,v=0;w>=c;--w){if(s=i.charCodeAt(w),s===47){if(!g){h=w+1;break}continue}m===-1&&(g=!1,m=w+1),s===46?f===-1?f=w:v!==1&&(v=1):f!==-1&&(v=-1)}return f===-1||m===-1||v===0||v===1&&f===m-1&&f===h+1?m!==-1&&(h===0&&u?o.base=o.name=i.slice(1,m):o.base=o.name=i.slice(h,m)):(h===0&&u?(o.name=i.slice(1,f),o.base=i.slice(1,m)):(o.name=i.slice(h,f),o.base=i.slice(h,m)),o.ext=i.slice(f,m)),h>0?o.dir=i.slice(0,h-1):u&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,mS=r,mS}var At=eQ(),gS={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var II;function tQ(){return II||(II=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var D=0,B=new Array(256),K=0;K!=256;++K)D=K,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,B[K]=D;return typeof Int32Array<"u"?new Int32Array(B):B}var r=n();function a(D){var B=0,K=0,Q=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Q=0;Q!=256;++Q)F[Q]=D[Q];for(Q=0;Q!=256;++Q)for(K=D[Q],B=256+Q;B<4096;B+=256)K=F[B]=K>>>8^D[K&255];var W=[];for(Q=1;Q!=16;++Q)W[Q-1]=typeof Int32Array<"u"?F.subarray(Q*256,Q*256+256):F.slice(Q*256,Q*256+256);return W}var i=a(r),o=i[0],s=i[1],u=i[2],c=i[3],f=i[4],h=i[5],m=i[6],g=i[7],w=i[8],v=i[9],_=i[10],x=i[11],S=i[12],E=i[13],C=i[14];function A(D,B){for(var K=B^-1,Q=0,F=D.length;Q<F;)K=K>>>8^r[(K^D.charCodeAt(Q++))&255];return~K}function O(D,B){for(var K=B^-1,Q=D.length-15,F=0;F<Q;)K=C[D[F++]^K&255]^E[D[F++]^K>>8&255]^S[D[F++]^K>>16&255]^x[D[F++]^K>>>24]^_[D[F++]]^v[D[F++]]^w[D[F++]]^g[D[F++]]^m[D[F++]]^h[D[F++]]^f[D[F++]]^c[D[F++]]^u[D[F++]]^s[D[F++]]^o[D[F++]]^r[D[F++]];for(Q+=15;F<Q;)K=K>>>8^r[(K^D[F++])&255];return~K}function I(D,B){for(var K=B^-1,Q=0,F=D.length,W=0,U=0;Q<F;)W=D.charCodeAt(Q++),W<128?K=K>>>8^r[(K^W)&255]:W<2048?(K=K>>>8^r[(K^(192|W>>6&31))&255],K=K>>>8^r[(K^(128|W&63))&255]):W>=55296&&W<57344?(W=(W&1023)+64,U=D.charCodeAt(Q++)&1023,K=K>>>8^r[(K^(240|W>>8&7))&255],K=K>>>8^r[(K^(128|W>>2&63))&255],K=K>>>8^r[(K^(128|U>>6&15|(W&3)<<4))&255],K=K>>>8^r[(K^(128|U&63))&255]):(K=K>>>8^r[(K^(224|W>>12&15))&255],K=K>>>8^r[(K^(128|W>>6&63))&255],K=K>>>8^r[(K^(128|W&63))&255]);return~K}t.table=r,t.bstr=A,t.buf=O,t.str=I})}(gS)),gS}var nQ=tQ();const rQ=Qa(nQ);var yS={},OI;function vc(){return OI||(OI=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}e.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)n(s,u)&&(i[u]=s[u])}}return i},e.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,s,u,c){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+u),c);return}for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){var o,s,u,c,f,h;for(u=0,o=0,s=i.length;o<s;o++)u+=i[o].length;for(h=new Uint8Array(u),c=0,o=0,s=i.length;o<s;o++)f=i[o],h.set(f,c),c+=f.length;return h}},a={arraySet:function(i,o,s,u,c){for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(yS)),yS}var Cf={},Io={},Kc={},DI;function aQ(){if(DI)return Kc;DI=1;var e=vc(),t=4,n=0,r=1,a=2;function i(N){for(var H=N.length;--H>=0;)N[H]=0}var o=0,s=1,u=2,c=3,f=258,h=29,m=256,g=m+1+h,w=30,v=19,_=2*g+1,x=15,S=16,E=7,C=256,A=16,O=17,I=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=512,W=new Array((g+2)*2);i(W);var U=new Array(w*2);i(U);var he=new Array(F);i(he);var ae=new Array(f-c+1);i(ae);var re=new Array(h);i(re);var ee=new Array(w);i(ee);function se(N,H,fe,Oe,ve){this.static_tree=N,this.extra_bits=H,this.extra_base=fe,this.elems=Oe,this.max_length=ve,this.has_stree=N&&N.length}var V,X,Y;function ne(N,H){this.dyn_tree=N,this.max_code=0,this.stat_desc=H}function be(N){return N<256?he[N]:he[256+(N>>>7)]}function Ee(N,H){N.pending_buf[N.pending++]=H&255,N.pending_buf[N.pending++]=H>>>8&255}function De(N,H,fe){N.bi_valid>S-fe?(N.bi_buf|=H<<N.bi_valid&65535,Ee(N,N.bi_buf),N.bi_buf=H>>S-N.bi_valid,N.bi_valid+=fe-S):(N.bi_buf|=H<<N.bi_valid&65535,N.bi_valid+=fe)}function Pe(N,H,fe){De(N,fe[H*2],fe[H*2+1])}function Re(N,H){var fe=0;do fe|=N&1,N>>>=1,fe<<=1;while(--H>0);return fe>>>1}function Te(N){N.bi_valid===16?(Ee(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):N.bi_valid>=8&&(N.pending_buf[N.pending++]=N.bi_buf&255,N.bi_buf>>=8,N.bi_valid-=8)}function He(N,H){var fe=H.dyn_tree,Oe=H.max_code,ve=H.stat_desc.static_tree,Ce=H.stat_desc.has_stree,le=H.stat_desc.extra_bits,ct=H.stat_desc.extra_base,yt=H.stat_desc.max_length,M,Be,et,me,je,Ke,Ct=0;for(me=0;me<=x;me++)N.bl_count[me]=0;for(fe[N.heap[N.heap_max]*2+1]=0,M=N.heap_max+1;M<_;M++)Be=N.heap[M],me=fe[fe[Be*2+1]*2+1]+1,me>yt&&(me=yt,Ct++),fe[Be*2+1]=me,!(Be>Oe)&&(N.bl_count[me]++,je=0,Be>=ct&&(je=le[Be-ct]),Ke=fe[Be*2],N.opt_len+=Ke*(me+je),Ce&&(N.static_len+=Ke*(ve[Be*2+1]+je)));if(Ct!==0){do{for(me=yt-1;N.bl_count[me]===0;)me--;N.bl_count[me]--,N.bl_count[me+1]+=2,N.bl_count[yt]--,Ct-=2}while(Ct>0);for(me=yt;me!==0;me--)for(Be=N.bl_count[me];Be!==0;)et=N.heap[--M],!(et>Oe)&&(fe[et*2+1]!==me&&(N.opt_len+=(me-fe[et*2+1])*fe[et*2],fe[et*2+1]=me),Be--)}}function it(N,H,fe){var Oe=new Array(x+1),ve=0,Ce,le;for(Ce=1;Ce<=x;Ce++)Oe[Ce]=ve=ve+fe[Ce-1]<<1;for(le=0;le<=H;le++){var ct=N[le*2+1];ct!==0&&(N[le*2]=Re(Oe[ct]++,ct))}}function Ie(){var N,H,fe,Oe,ve,Ce=new Array(x+1);for(fe=0,Oe=0;Oe<h-1;Oe++)for(re[Oe]=fe,N=0;N<1<<D[Oe];N++)ae[fe++]=Oe;for(ae[fe-1]=Oe,ve=0,Oe=0;Oe<16;Oe++)for(ee[Oe]=ve,N=0;N<1<<B[Oe];N++)he[ve++]=Oe;for(ve>>=7;Oe<w;Oe++)for(ee[Oe]=ve<<7,N=0;N<1<<B[Oe]-7;N++)he[256+ve++]=Oe;for(H=0;H<=x;H++)Ce[H]=0;for(N=0;N<=143;)W[N*2+1]=8,N++,Ce[8]++;for(;N<=255;)W[N*2+1]=9,N++,Ce[9]++;for(;N<=279;)W[N*2+1]=7,N++,Ce[7]++;for(;N<=287;)W[N*2+1]=8,N++,Ce[8]++;for(it(W,g+1,Ce),N=0;N<w;N++)U[N*2+1]=5,U[N*2]=Re(N,5);V=new se(W,D,m+1,g,x),X=new se(U,B,0,w,x),Y=new se(new Array(0),K,0,v,E)}function Ae(N){var H;for(H=0;H<g;H++)N.dyn_ltree[H*2]=0;for(H=0;H<w;H++)N.dyn_dtree[H*2]=0;for(H=0;H<v;H++)N.bl_tree[H*2]=0;N.dyn_ltree[C*2]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function z(N){N.bi_valid>8?Ee(N,N.bi_buf):N.bi_valid>0&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function ke(N,H,fe,Oe){z(N),Ee(N,fe),Ee(N,~fe),e.arraySet(N.pending_buf,N.window,H,fe,N.pending),N.pending+=fe}function Ne(N,H,fe,Oe){var ve=H*2,Ce=fe*2;return N[ve]<N[Ce]||N[ve]===N[Ce]&&Oe[H]<=Oe[fe]}function ce(N,H,fe){for(var Oe=N.heap[fe],ve=fe<<1;ve<=N.heap_len&&(ve<N.heap_len&&Ne(H,N.heap[ve+1],N.heap[ve],N.depth)&&ve++,!Ne(H,Oe,N.heap[ve],N.depth));)N.heap[fe]=N.heap[ve],fe=ve,ve<<=1;N.heap[fe]=Oe}function ie(N,H,fe){var Oe,ve,Ce=0,le,ct;if(N.last_lit!==0)do Oe=N.pending_buf[N.d_buf+Ce*2]<<8|N.pending_buf[N.d_buf+Ce*2+1],ve=N.pending_buf[N.l_buf+Ce],Ce++,Oe===0?Pe(N,ve,H):(le=ae[ve],Pe(N,le+m+1,H),ct=D[le],ct!==0&&(ve-=re[le],De(N,ve,ct)),Oe--,le=be(Oe),Pe(N,le,fe),ct=B[le],ct!==0&&(Oe-=ee[le],De(N,Oe,ct)));while(Ce<N.last_lit);Pe(N,C,H)}function J(N,H){var fe=H.dyn_tree,Oe=H.stat_desc.static_tree,ve=H.stat_desc.has_stree,Ce=H.stat_desc.elems,le,ct,yt=-1,M;for(N.heap_len=0,N.heap_max=_,le=0;le<Ce;le++)fe[le*2]!==0?(N.heap[++N.heap_len]=yt=le,N.depth[le]=0):fe[le*2+1]=0;for(;N.heap_len<2;)M=N.heap[++N.heap_len]=yt<2?++yt:0,fe[M*2]=1,N.depth[M]=0,N.opt_len--,ve&&(N.static_len-=Oe[M*2+1]);for(H.max_code=yt,le=N.heap_len>>1;le>=1;le--)ce(N,fe,le);M=Ce;do le=N.heap[1],N.heap[1]=N.heap[N.heap_len--],ce(N,fe,1),ct=N.heap[1],N.heap[--N.heap_max]=le,N.heap[--N.heap_max]=ct,fe[M*2]=fe[le*2]+fe[ct*2],N.depth[M]=(N.depth[le]>=N.depth[ct]?N.depth[le]:N.depth[ct])+1,fe[le*2+1]=fe[ct*2+1]=M,N.heap[1]=M++,ce(N,fe,1);while(N.heap_len>=2);N.heap[--N.heap_max]=N.heap[1],He(N,H),it(fe,yt,N.bl_count)}function _e(N,H,fe){var Oe,ve=-1,Ce,le=H[0*2+1],ct=0,yt=7,M=4;for(le===0&&(yt=138,M=3),H[(fe+1)*2+1]=65535,Oe=0;Oe<=fe;Oe++)Ce=le,le=H[(Oe+1)*2+1],!(++ct<yt&&Ce===le)&&(ct<M?N.bl_tree[Ce*2]+=ct:Ce!==0?(Ce!==ve&&N.bl_tree[Ce*2]++,N.bl_tree[A*2]++):ct<=10?N.bl_tree[O*2]++:N.bl_tree[I*2]++,ct=0,ve=Ce,le===0?(yt=138,M=3):Ce===le?(yt=6,M=3):(yt=7,M=4))}function Le(N,H,fe){var Oe,ve=-1,Ce,le=H[0*2+1],ct=0,yt=7,M=4;for(le===0&&(yt=138,M=3),Oe=0;Oe<=fe;Oe++)if(Ce=le,le=H[(Oe+1)*2+1],!(++ct<yt&&Ce===le)){if(ct<M)do Pe(N,Ce,N.bl_tree);while(--ct!==0);else Ce!==0?(Ce!==ve&&(Pe(N,Ce,N.bl_tree),ct--),Pe(N,A,N.bl_tree),De(N,ct-3,2)):ct<=10?(Pe(N,O,N.bl_tree),De(N,ct-3,3)):(Pe(N,I,N.bl_tree),De(N,ct-11,7));ct=0,ve=Ce,le===0?(yt=138,M=3):Ce===le?(yt=6,M=3):(yt=7,M=4)}}function xe(N){var H;for(_e(N,N.dyn_ltree,N.l_desc.max_code),_e(N,N.dyn_dtree,N.d_desc.max_code),J(N,N.bl_desc),H=v-1;H>=3&&N.bl_tree[Q[H]*2+1]===0;H--);return N.opt_len+=3*(H+1)+5+5+4,H}function Ve(N,H,fe,Oe){var ve;for(De(N,H-257,5),De(N,fe-1,5),De(N,Oe-4,4),ve=0;ve<Oe;ve++)De(N,N.bl_tree[Q[ve]*2+1],3);Le(N,N.dyn_ltree,H-1),Le(N,N.dyn_dtree,fe-1)}function xt(N){var H=4093624447,fe;for(fe=0;fe<=31;fe++,H>>>=1)if(H&1&&N.dyn_ltree[fe*2]!==0)return n;if(N.dyn_ltree[9*2]!==0||N.dyn_ltree[10*2]!==0||N.dyn_ltree[13*2]!==0)return r;for(fe=32;fe<m;fe++)if(N.dyn_ltree[fe*2]!==0)return r;return n}var ht=!1;function Et(N){ht||(Ie(),ht=!0),N.l_desc=new ne(N.dyn_ltree,V),N.d_desc=new ne(N.dyn_dtree,X),N.bl_desc=new ne(N.bl_tree,Y),N.bi_buf=0,N.bi_valid=0,Ae(N)}function Lt(N,H,fe,Oe){De(N,(o<<1)+(Oe?1:0),3),ke(N,H,fe)}function Tt(N){De(N,s<<1,3),Pe(N,C,W),Te(N)}function zt(N,H,fe,Oe){var ve,Ce,le=0;N.level>0?(N.strm.data_type===a&&(N.strm.data_type=xt(N)),J(N,N.l_desc),J(N,N.d_desc),le=xe(N),ve=N.opt_len+3+7>>>3,Ce=N.static_len+3+7>>>3,Ce<=ve&&(ve=Ce)):ve=Ce=fe+5,fe+4<=ve&&H!==-1?Lt(N,H,fe,Oe):N.strategy===t||Ce===ve?(De(N,(s<<1)+(Oe?1:0),3),ie(N,W,U)):(De(N,(u<<1)+(Oe?1:0),3),Ve(N,N.l_desc.max_code+1,N.d_desc.max_code+1,le+1),ie(N,N.dyn_ltree,N.dyn_dtree)),Ae(N),Oe&&z(N)}function ge(N,H,fe){return N.pending_buf[N.d_buf+N.last_lit*2]=H>>>8&255,N.pending_buf[N.d_buf+N.last_lit*2+1]=H&255,N.pending_buf[N.l_buf+N.last_lit]=fe&255,N.last_lit++,H===0?N.dyn_ltree[fe*2]++:(N.matches++,H--,N.dyn_ltree[(ae[fe]+m+1)*2]++,N.dyn_dtree[be(H)*2]++),N.last_lit===N.lit_bufsize-1}return Kc._tr_init=Et,Kc._tr_stored_block=Lt,Kc._tr_flush_block=zt,Kc._tr_tally=ge,Kc._tr_align=Tt,Kc}var bS,jI;function sM(){if(jI)return bS;jI=1;function e(t,n,r,a){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+n[a++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}return bS=e,bS}var vS,MI;function lM(){if(MI)return vS;MI=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,o){var s=t,u=o+i;r^=-1;for(var c=o;c<u;c++)r=r>>>8^s[(r^a[c])&255];return r^-1}return vS=n,vS}var wS,PI;function hk(){return PI||(PI=1,wS={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),wS}var FI;function iQ(){if(FI)return Io;FI=1;var e=vc(),t=aQ(),n=sM(),r=lM(),a=hk(),i=0,o=1,s=3,u=4,c=5,f=0,h=1,m=-2,g=-3,w=-5,v=-1,_=1,x=2,S=3,E=4,C=0,A=2,O=8,I=9,D=15,B=8,K=29,Q=256,F=Q+1+K,W=30,U=19,he=2*F+1,ae=15,re=3,ee=258,se=ee+re+1,V=32,X=42,Y=69,ne=73,be=91,Ee=103,De=113,Pe=666,Re=1,Te=2,He=3,it=4,Ie=3;function Ae(M,Be){return M.msg=a[Be],Be}function z(M){return(M<<1)-(M>4?9:0)}function ke(M){for(var Be=M.length;--Be>=0;)M[Be]=0}function Ne(M){var Be=M.state,et=Be.pending;et>M.avail_out&&(et=M.avail_out),et!==0&&(e.arraySet(M.output,Be.pending_buf,Be.pending_out,et,M.next_out),M.next_out+=et,Be.pending_out+=et,M.total_out+=et,M.avail_out-=et,Be.pending-=et,Be.pending===0&&(Be.pending_out=0))}function ce(M,Be){t._tr_flush_block(M,M.block_start>=0?M.block_start:-1,M.strstart-M.block_start,Be),M.block_start=M.strstart,Ne(M.strm)}function ie(M,Be){M.pending_buf[M.pending++]=Be}function J(M,Be){M.pending_buf[M.pending++]=Be>>>8&255,M.pending_buf[M.pending++]=Be&255}function _e(M,Be,et,me){var je=M.avail_in;return je>me&&(je=me),je===0?0:(M.avail_in-=je,e.arraySet(Be,M.input,M.next_in,je,et),M.state.wrap===1?M.adler=n(M.adler,Be,je,et):M.state.wrap===2&&(M.adler=r(M.adler,Be,je,et)),M.next_in+=je,M.total_in+=je,je)}function Le(M,Be){var et=M.max_chain_length,me=M.strstart,je,Ke,Ct=M.prev_length,ye=M.nice_match,q=M.strstart>M.w_size-se?M.strstart-(M.w_size-se):0,$=M.window,G=M.w_mask,pe=M.prev,de=M.strstart+ee,Fe=$[me+Ct-1],ot=$[me+Ct];M.prev_length>=M.good_match&&(et>>=2),ye>M.lookahead&&(ye=M.lookahead);do if(je=Be,!($[je+Ct]!==ot||$[je+Ct-1]!==Fe||$[je]!==$[me]||$[++je]!==$[me+1])){me+=2,je++;do;while($[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&me<de);if(Ke=ee-(de-me),me=de-ee,Ke>Ct){if(M.match_start=Be,Ct=Ke,Ke>=ye)break;Fe=$[me+Ct-1],ot=$[me+Ct]}}while((Be=pe[Be&G])>q&&--et!==0);return Ct<=M.lookahead?Ct:M.lookahead}function xe(M){var Be=M.w_size,et,me,je,Ke,Ct;do{if(Ke=M.window_size-M.lookahead-M.strstart,M.strstart>=Be+(Be-se)){e.arraySet(M.window,M.window,Be,Be,0),M.match_start-=Be,M.strstart-=Be,M.block_start-=Be,me=M.hash_size,et=me;do je=M.head[--et],M.head[et]=je>=Be?je-Be:0;while(--me);me=Be,et=me;do je=M.prev[--et],M.prev[et]=je>=Be?je-Be:0;while(--me);Ke+=Be}if(M.strm.avail_in===0)break;if(me=_e(M.strm,M.window,M.strstart+M.lookahead,Ke),M.lookahead+=me,M.lookahead+M.insert>=re)for(Ct=M.strstart-M.insert,M.ins_h=M.window[Ct],M.ins_h=(M.ins_h<<M.hash_shift^M.window[Ct+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[Ct+re-1])&M.hash_mask,M.prev[Ct&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=Ct,Ct++,M.insert--,!(M.lookahead+M.insert<re)););}while(M.lookahead<se&&M.strm.avail_in!==0)}function Ve(M,Be){var et=65535;for(et>M.pending_buf_size-5&&(et=M.pending_buf_size-5);;){if(M.lookahead<=1){if(xe(M),M.lookahead===0&&Be===i)return Re;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var me=M.block_start+et;if((M.strstart===0||M.strstart>=me)&&(M.lookahead=M.strstart-me,M.strstart=me,ce(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-se&&(ce(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===u?(ce(M,!0),M.strm.avail_out===0?He:it):(M.strstart>M.block_start&&(ce(M,!1),M.strm.avail_out===0),Re)}function xt(M,Be){for(var et,me;;){if(M.lookahead<se){if(xe(M),M.lookahead<se&&Be===i)return Re;if(M.lookahead===0)break}if(et=0,M.lookahead>=re&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),et!==0&&M.strstart-et<=M.w_size-se&&(M.match_length=Le(M,et)),M.match_length>=re)if(me=t._tr_tally(M,M.strstart-M.match_start,M.match_length-re),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=re){M.match_length--;do M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart;while(--M.match_length!==0);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else me=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(me&&(ce(M,!1),M.strm.avail_out===0))return Re}return M.insert=M.strstart<re-1?M.strstart:re-1,Be===u?(ce(M,!0),M.strm.avail_out===0?He:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Re:Te}function ht(M,Be){for(var et,me,je;;){if(M.lookahead<se){if(xe(M),M.lookahead<se&&Be===i)return Re;if(M.lookahead===0)break}if(et=0,M.lookahead>=re&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=re-1,et!==0&&M.prev_length<M.max_lazy_match&&M.strstart-et<=M.w_size-se&&(M.match_length=Le(M,et),M.match_length<=5&&(M.strategy===_||M.match_length===re&&M.strstart-M.match_start>4096)&&(M.match_length=re-1)),M.prev_length>=re&&M.match_length<=M.prev_length){je=M.strstart+M.lookahead-re,me=t._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-re),M.lookahead-=M.prev_length-1,M.prev_length-=2;do++M.strstart<=je&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart);while(--M.prev_length!==0);if(M.match_available=0,M.match_length=re-1,M.strstart++,me&&(ce(M,!1),M.strm.avail_out===0))return Re}else if(M.match_available){if(me=t._tr_tally(M,0,M.window[M.strstart-1]),me&&ce(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return Re}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(me=t._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<re-1?M.strstart:re-1,Be===u?(ce(M,!0),M.strm.avail_out===0?He:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Re:Te}function Et(M,Be){for(var et,me,je,Ke,Ct=M.window;;){if(M.lookahead<=ee){if(xe(M),M.lookahead<=ee&&Be===i)return Re;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=re&&M.strstart>0&&(je=M.strstart-1,me=Ct[je],me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je])){Ke=M.strstart+ee;do;while(me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&je<Ke);M.match_length=ee-(Ke-je),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=re?(et=t._tr_tally(M,1,M.match_length-re),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(et=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),et&&(ce(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===u?(ce(M,!0),M.strm.avail_out===0?He:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Re:Te}function Lt(M,Be){for(var et;;){if(M.lookahead===0&&(xe(M),M.lookahead===0)){if(Be===i)return Re;break}if(M.match_length=0,et=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,et&&(ce(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===u?(ce(M,!0),M.strm.avail_out===0?He:it):M.last_lit&&(ce(M,!1),M.strm.avail_out===0)?Re:Te}function Tt(M,Be,et,me,je){this.good_length=M,this.max_lazy=Be,this.nice_length=et,this.max_chain=me,this.func=je}var zt;zt=[new Tt(0,0,0,0,Ve),new Tt(4,4,8,4,xt),new Tt(4,5,16,8,xt),new Tt(4,6,32,32,xt),new Tt(4,4,16,16,ht),new Tt(8,16,32,32,ht),new Tt(8,16,128,128,ht),new Tt(8,32,128,256,ht),new Tt(32,128,258,1024,ht),new Tt(32,258,258,4096,ht)];function ge(M){M.window_size=2*M.w_size,ke(M.head),M.max_lazy_match=zt[M.level].max_lazy,M.good_match=zt[M.level].good_length,M.nice_match=zt[M.level].nice_length,M.max_chain_length=zt[M.level].max_chain,M.strstart=0,M.block_start=0,M.lookahead=0,M.insert=0,M.match_length=M.prev_length=re-1,M.match_available=0,M.ins_h=0}function N(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(he*2),this.dyn_dtree=new e.Buf16((2*W+1)*2),this.bl_tree=new e.Buf16((2*U+1)*2),ke(this.dyn_ltree),ke(this.dyn_dtree),ke(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ae+1),this.heap=new e.Buf16(2*F+1),ke(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*F+1),ke(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(M){var Be;return!M||!M.state?Ae(M,m):(M.total_in=M.total_out=0,M.data_type=A,Be=M.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?X:De,M.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),f)}function fe(M){var Be=H(M);return Be===f&&ge(M.state),Be}function Oe(M,Be){return!M||!M.state||M.state.wrap!==2?m:(M.state.gzhead=Be,f)}function ve(M,Be,et,me,je,Ke){if(!M)return m;var Ct=1;if(Be===v&&(Be=6),me<0?(Ct=0,me=-me):me>15&&(Ct=2,me-=16),je<1||je>I||et!==O||me<8||me>15||Be<0||Be>9||Ke<0||Ke>E)return Ae(M,m);me===8&&(me=9);var ye=new N;return M.state=ye,ye.strm=M,ye.wrap=Ct,ye.gzhead=null,ye.w_bits=me,ye.w_size=1<<ye.w_bits,ye.w_mask=ye.w_size-1,ye.hash_bits=je+7,ye.hash_size=1<<ye.hash_bits,ye.hash_mask=ye.hash_size-1,ye.hash_shift=~~((ye.hash_bits+re-1)/re),ye.window=new e.Buf8(ye.w_size*2),ye.head=new e.Buf16(ye.hash_size),ye.prev=new e.Buf16(ye.w_size),ye.lit_bufsize=1<<je+6,ye.pending_buf_size=ye.lit_bufsize*4,ye.pending_buf=new e.Buf8(ye.pending_buf_size),ye.d_buf=1*ye.lit_bufsize,ye.l_buf=3*ye.lit_bufsize,ye.level=Be,ye.strategy=Ke,ye.method=et,fe(M)}function Ce(M,Be){return ve(M,Be,O,D,B,C)}function le(M,Be){var et,me,je,Ke;if(!M||!M.state||Be>c||Be<0)return M?Ae(M,m):m;if(me=M.state,!M.output||!M.input&&M.avail_in!==0||me.status===Pe&&Be!==u)return Ae(M,M.avail_out===0?w:m);if(me.strm=M,et=me.last_flush,me.last_flush=Be,me.status===X)if(me.wrap===2)M.adler=0,ie(me,31),ie(me,139),ie(me,8),me.gzhead?(ie(me,(me.gzhead.text?1:0)+(me.gzhead.hcrc?2:0)+(me.gzhead.extra?4:0)+(me.gzhead.name?8:0)+(me.gzhead.comment?16:0)),ie(me,me.gzhead.time&255),ie(me,me.gzhead.time>>8&255),ie(me,me.gzhead.time>>16&255),ie(me,me.gzhead.time>>24&255),ie(me,me.level===9?2:me.strategy>=x||me.level<2?4:0),ie(me,me.gzhead.os&255),me.gzhead.extra&&me.gzhead.extra.length&&(ie(me,me.gzhead.extra.length&255),ie(me,me.gzhead.extra.length>>8&255)),me.gzhead.hcrc&&(M.adler=r(M.adler,me.pending_buf,me.pending,0)),me.gzindex=0,me.status=Y):(ie(me,0),ie(me,0),ie(me,0),ie(me,0),ie(me,0),ie(me,me.level===9?2:me.strategy>=x||me.level<2?4:0),ie(me,Ie),me.status=De);else{var Ct=O+(me.w_bits-8<<4)<<8,ye=-1;me.strategy>=x||me.level<2?ye=0:me.level<6?ye=1:me.level===6?ye=2:ye=3,Ct|=ye<<6,me.strstart!==0&&(Ct|=V),Ct+=31-Ct%31,me.status=De,J(me,Ct),me.strstart!==0&&(J(me,M.adler>>>16),J(me,M.adler&65535)),M.adler=1}if(me.status===Y)if(me.gzhead.extra){for(je=me.pending;me.gzindex<(me.gzhead.extra.length&65535)&&!(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),Ne(M),je=me.pending,me.pending===me.pending_buf_size));)ie(me,me.gzhead.extra[me.gzindex]&255),me.gzindex++;me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),me.gzindex===me.gzhead.extra.length&&(me.gzindex=0,me.status=ne)}else me.status=ne;if(me.status===ne)if(me.gzhead.name){je=me.pending;do{if(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),Ne(M),je=me.pending,me.pending===me.pending_buf_size)){Ke=1;break}me.gzindex<me.gzhead.name.length?Ke=me.gzhead.name.charCodeAt(me.gzindex++)&255:Ke=0,ie(me,Ke)}while(Ke!==0);me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),Ke===0&&(me.gzindex=0,me.status=be)}else me.status=be;if(me.status===be)if(me.gzhead.comment){je=me.pending;do{if(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),Ne(M),je=me.pending,me.pending===me.pending_buf_size)){Ke=1;break}me.gzindex<me.gzhead.comment.length?Ke=me.gzhead.comment.charCodeAt(me.gzindex++)&255:Ke=0,ie(me,Ke)}while(Ke!==0);me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),Ke===0&&(me.status=Ee)}else me.status=Ee;if(me.status===Ee&&(me.gzhead.hcrc?(me.pending+2>me.pending_buf_size&&Ne(M),me.pending+2<=me.pending_buf_size&&(ie(me,M.adler&255),ie(me,M.adler>>8&255),M.adler=0,me.status=De)):me.status=De),me.pending!==0){if(Ne(M),M.avail_out===0)return me.last_flush=-1,f}else if(M.avail_in===0&&z(Be)<=z(et)&&Be!==u)return Ae(M,w);if(me.status===Pe&&M.avail_in!==0)return Ae(M,w);if(M.avail_in!==0||me.lookahead!==0||Be!==i&&me.status!==Pe){var q=me.strategy===x?Lt(me,Be):me.strategy===S?Et(me,Be):zt[me.level].func(me,Be);if((q===He||q===it)&&(me.status=Pe),q===Re||q===He)return M.avail_out===0&&(me.last_flush=-1),f;if(q===Te&&(Be===o?t._tr_align(me):Be!==c&&(t._tr_stored_block(me,0,0,!1),Be===s&&(ke(me.head),me.lookahead===0&&(me.strstart=0,me.block_start=0,me.insert=0))),Ne(M),M.avail_out===0))return me.last_flush=-1,f}return Be!==u?f:me.wrap<=0?h:(me.wrap===2?(ie(me,M.adler&255),ie(me,M.adler>>8&255),ie(me,M.adler>>16&255),ie(me,M.adler>>24&255),ie(me,M.total_in&255),ie(me,M.total_in>>8&255),ie(me,M.total_in>>16&255),ie(me,M.total_in>>24&255)):(J(me,M.adler>>>16),J(me,M.adler&65535)),Ne(M),me.wrap>0&&(me.wrap=-me.wrap),me.pending!==0?f:h)}function ct(M){var Be;return!M||!M.state?m:(Be=M.state.status,Be!==X&&Be!==Y&&Be!==ne&&Be!==be&&Be!==Ee&&Be!==De&&Be!==Pe?Ae(M,m):(M.state=null,Be===De?Ae(M,g):f))}function yt(M,Be){var et=Be.length,me,je,Ke,Ct,ye,q,$,G;if(!M||!M.state||(me=M.state,Ct=me.wrap,Ct===2||Ct===1&&me.status!==X||me.lookahead))return m;for(Ct===1&&(M.adler=n(M.adler,Be,et,0)),me.wrap=0,et>=me.w_size&&(Ct===0&&(ke(me.head),me.strstart=0,me.block_start=0,me.insert=0),G=new e.Buf8(me.w_size),e.arraySet(G,Be,et-me.w_size,me.w_size,0),Be=G,et=me.w_size),ye=M.avail_in,q=M.next_in,$=M.input,M.avail_in=et,M.next_in=0,M.input=Be,xe(me);me.lookahead>=re;){je=me.strstart,Ke=me.lookahead-(re-1);do me.ins_h=(me.ins_h<<me.hash_shift^me.window[je+re-1])&me.hash_mask,me.prev[je&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=je,je++;while(--Ke);me.strstart=je,me.lookahead=re-1,xe(me)}return me.strstart+=me.lookahead,me.block_start=me.strstart,me.insert=me.lookahead,me.lookahead=0,me.match_length=me.prev_length=re-1,me.match_available=0,M.next_in=q,M.input=$,M.avail_in=ye,me.wrap=Ct,f}return Io.deflateInit=Ce,Io.deflateInit2=ve,Io.deflateReset=fe,Io.deflateResetKeep=H,Io.deflateSetHeader=Oe,Io.deflate=le,Io.deflateEnd=ct,Io.deflateSetDictionary=yt,Io.deflateInfo="pako deflate (from Nodeca project)",Io}var Zc={},LI;function uM(){if(LI)return Zc;LI=1;var e=vc(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,Zc.string2buf=function(o){var s,u,c,f,h,m=o.length,g=0;for(f=0;f<m;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<m&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),g+=u<128?1:u<2048?2:u<65536?3:4;for(s=new e.Buf8(g),h=0,f=0;h<g;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<m&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),u<128?s[h++]=u:u<2048?(s[h++]=192|u>>>6,s[h++]=128|u&63):u<65536?(s[h++]=224|u>>>12,s[h++]=128|u>>>6&63,s[h++]=128|u&63):(s[h++]=240|u>>>18,s[h++]=128|u>>>12&63,s[h++]=128|u>>>6&63,s[h++]=128|u&63);return s};function i(o,s){if(s<65534&&(o.subarray&&n||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var u="",c=0;c<s;c++)u+=String.fromCharCode(o[c]);return u}return Zc.buf2binstring=function(o){return i(o,o.length)},Zc.binstring2buf=function(o){for(var s=new e.Buf8(o.length),u=0,c=s.length;u<c;u++)s[u]=o.charCodeAt(u);return s},Zc.buf2string=function(o,s){var u,c,f,h,m=s||o.length,g=new Array(m*2);for(c=0,u=0;u<m;){if(f=o[u++],f<128){g[c++]=f;continue}if(h=r[f],h>4){g[c++]=65533,u+=h-1;continue}for(f&=h===2?31:h===3?15:7;h>1&&u<m;)f=f<<6|o[u++]&63,h--;if(h>1){g[c++]=65533;continue}f<65536?g[c++]=f:(f-=65536,g[c++]=55296|f>>10&1023,g[c++]=56320|f&1023)}return i(g,c)},Zc.utf8border=function(o,s){var u;for(s=s||o.length,s>o.length&&(s=o.length),u=s-1;u>=0&&(o[u]&192)===128;)u--;return u<0||u===0?s:u+r[o[u]]>s?u:s},Zc}var _S,$I;function cM(){if($I)return _S;$I=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return _S=e,_S}var BI;function oQ(){if(BI)return Cf;BI=1;var e=iQ(),t=vc(),n=uM(),r=hk(),a=cM(),i=Object.prototype.toString,o=0,s=4,u=0,c=1,f=2,h=-1,m=0,g=8;function w(S){if(!(this instanceof w))return new w(S);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==u)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var A;if(typeof E.dictionary=="string"?A=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?A=new Uint8Array(E.dictionary):A=E.dictionary,C=e.deflateSetDictionary(this.strm,A),C!==u)throw new Error(r[C]);this._dict_set=!0}}w.prototype.push=function(S,E){var C=this.strm,A=this.options.chunkSize,O,I;if(this.ended)return!1;I=E===~~E?E:E===!0?s:o,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(A),C.next_out=0,C.avail_out=A),O=e.deflate(C,I),O!==c&&O!==u)return this.onEnd(O),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(I===s||I===f))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&O!==c);return I===s?(O=e.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===u):(I===f&&(this.onEnd(u),C.avail_out=0),!0)},w.prototype.onData=function(S){this.chunks.push(S)},w.prototype.onEnd=function(S){S===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function v(S,E){var C=new w(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function _(S,E){return E=E||{},E.raw=!0,v(S,E)}function x(S,E){return E=E||{},E.gzip=!0,v(S,E)}return Cf.Deflate=w,Cf.deflate=v,Cf.deflateRaw=_,Cf.gzip=x,Cf}var kf={},lo={},xS,zI;function sQ(){if(zI)return xS;zI=1;var e=30,t=12;return xS=function(r,a){var i,o,s,u,c,f,h,m,g,w,v,_,x,S,E,C,A,O,I,D,B,K,Q,F,W;i=r.state,o=r.next_in,F=r.input,s=o+(r.avail_in-5),u=r.next_out,W=r.output,c=u-(a-r.avail_out),f=u+(r.avail_out-257),h=i.dmax,m=i.wsize,g=i.whave,w=i.wnext,v=i.window,_=i.hold,x=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,A=(1<<i.distbits)-1;e:do{x<15&&(_+=F[o++]<<x,x+=8,_+=F[o++]<<x,x+=8),O=S[_&C];t:for(;;){if(I=O>>>24,_>>>=I,x-=I,I=O>>>16&255,I===0)W[u++]=O&65535;else if(I&16){D=O&65535,I&=15,I&&(x<I&&(_+=F[o++]<<x,x+=8),D+=_&(1<<I)-1,_>>>=I,x-=I),x<15&&(_+=F[o++]<<x,x+=8,_+=F[o++]<<x,x+=8),O=E[_&A];n:for(;;){if(I=O>>>24,_>>>=I,x-=I,I=O>>>16&255,I&16){if(B=O&65535,I&=15,x<I&&(_+=F[o++]<<x,x+=8,x<I&&(_+=F[o++]<<x,x+=8)),B+=_&(1<<I)-1,B>h){r.msg="invalid distance too far back",i.mode=e;break e}if(_>>>=I,x-=I,I=u-c,B>I){if(I=B-I,I>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(K=0,Q=v,w===0){if(K+=m-I,I<D){D-=I;do W[u++]=v[K++];while(--I);K=u-B,Q=W}}else if(w<I){if(K+=m+w-I,I-=w,I<D){D-=I;do W[u++]=v[K++];while(--I);if(K=0,w<D){I=w,D-=I;do W[u++]=v[K++];while(--I);K=u-B,Q=W}}}else if(K+=w-I,I<D){D-=I;do W[u++]=v[K++];while(--I);K=u-B,Q=W}for(;D>2;)W[u++]=Q[K++],W[u++]=Q[K++],W[u++]=Q[K++],D-=3;D&&(W[u++]=Q[K++],D>1&&(W[u++]=Q[K++]))}else{K=u-B;do W[u++]=W[K++],W[u++]=W[K++],W[u++]=W[K++],D-=3;while(D>2);D&&(W[u++]=W[K++],D>1&&(W[u++]=W[K++]))}}else if((I&64)===0){O=E[(O&65535)+(_&(1<<I)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((I&64)===0){O=S[(O&65535)+(_&(1<<I)-1)];continue t}else if(I&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(o<s&&u<f);D=x>>3,o-=D,x-=D<<3,_&=(1<<x)-1,r.next_in=o,r.next_out=u,r.avail_in=o<s?5+(s-o):5-(o-s),r.avail_out=u<f?257+(f-u):257-(u-f),i.hold=_,i.bits=x},xS}var SS,UI;function lQ(){if(UI)return SS;UI=1;var e=vc(),t=15,n=852,r=592,a=0,i=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return SS=function(m,g,w,v,_,x,S,E){var C=E.bits,A=0,O=0,I=0,D=0,B=0,K=0,Q=0,F=0,W=0,U=0,he,ae,re,ee,se,V=null,X=0,Y,ne=new e.Buf16(t+1),be=new e.Buf16(t+1),Ee=null,De=0,Pe,Re,Te;for(A=0;A<=t;A++)ne[A]=0;for(O=0;O<v;O++)ne[g[w+O]]++;for(B=C,D=t;D>=1&&ne[D]===0;D--);if(B>D&&(B=D),D===0)return _[x++]=1<<24|64<<16|0,_[x++]=1<<24|64<<16|0,E.bits=1,0;for(I=1;I<D&&ne[I]===0;I++);for(B<I&&(B=I),F=1,A=1;A<=t;A++)if(F<<=1,F-=ne[A],F<0)return-1;if(F>0&&(m===a||D!==1))return-1;for(be[1]=0,A=1;A<t;A++)be[A+1]=be[A]+ne[A];for(O=0;O<v;O++)g[w+O]!==0&&(S[be[g[w+O]]++]=O);if(m===a?(V=Ee=S,Y=19):m===i?(V=s,X-=257,Ee=u,De-=257,Y=256):(V=c,Ee=f,Y=-1),U=0,O=0,A=I,se=x,K=B,Q=0,re=-1,W=1<<B,ee=W-1,m===i&&W>n||m===o&&W>r)return 1;for(;;){Pe=A-Q,S[O]<Y?(Re=0,Te=S[O]):S[O]>Y?(Re=Ee[De+S[O]],Te=V[X+S[O]]):(Re=96,Te=0),he=1<<A-Q,ae=1<<K,I=ae;do ae-=he,_[se+(U>>Q)+ae]=Pe<<24|Re<<16|Te|0;while(ae!==0);for(he=1<<A-1;U&he;)he>>=1;if(he!==0?(U&=he-1,U+=he):U=0,O++,--ne[A]===0){if(A===D)break;A=g[w+S[O]]}if(A>B&&(U&ee)!==re){for(Q===0&&(Q=B),se+=I,K=A-Q,F=1<<K;K+Q<D&&(F-=ne[K+Q],!(F<=0));)K++,F<<=1;if(W+=1<<K,m===i&&W>n||m===o&&W>r)return 1;re=U&ee,_[re]=B<<24|K<<16|se-x|0}}return U!==0&&(_[se+U]=A-Q<<24|64<<16|0),E.bits=B,0},SS}var qI;function uQ(){if(qI)return lo;qI=1;var e=vc(),t=sM(),n=lM(),r=sQ(),a=lQ(),i=0,o=1,s=2,u=4,c=5,f=6,h=0,m=1,g=2,w=-2,v=-3,_=-4,x=-5,S=8,E=1,C=2,A=3,O=4,I=5,D=6,B=7,K=8,Q=9,F=10,W=11,U=12,he=13,ae=14,re=15,ee=16,se=17,V=18,X=19,Y=20,ne=21,be=22,Ee=23,De=24,Pe=25,Re=26,Te=27,He=28,it=29,Ie=30,Ae=31,z=32,ke=852,Ne=592,ce=15,ie=ce;function J(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function _e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Le(ve){var Ce;return!ve||!ve.state?w:(Ce=ve.state,ve.total_in=ve.total_out=Ce.total=0,ve.msg="",Ce.wrap&&(ve.adler=Ce.wrap&1),Ce.mode=E,Ce.last=0,Ce.havedict=0,Ce.dmax=32768,Ce.head=null,Ce.hold=0,Ce.bits=0,Ce.lencode=Ce.lendyn=new e.Buf32(ke),Ce.distcode=Ce.distdyn=new e.Buf32(Ne),Ce.sane=1,Ce.back=-1,h)}function xe(ve){var Ce;return!ve||!ve.state?w:(Ce=ve.state,Ce.wsize=0,Ce.whave=0,Ce.wnext=0,Le(ve))}function Ve(ve,Ce){var le,ct;return!ve||!ve.state||(ct=ve.state,Ce<0?(le=0,Ce=-Ce):(le=(Ce>>4)+1,Ce<48&&(Ce&=15)),Ce&&(Ce<8||Ce>15))?w:(ct.window!==null&&ct.wbits!==Ce&&(ct.window=null),ct.wrap=le,ct.wbits=Ce,xe(ve))}function xt(ve,Ce){var le,ct;return ve?(ct=new _e,ve.state=ct,ct.window=null,le=Ve(ve,Ce),le!==h&&(ve.state=null),le):w}function ht(ve){return xt(ve,ie)}var Et=!0,Lt,Tt;function zt(ve){if(Et){var Ce;for(Lt=new e.Buf32(512),Tt=new e.Buf32(32),Ce=0;Ce<144;)ve.lens[Ce++]=8;for(;Ce<256;)ve.lens[Ce++]=9;for(;Ce<280;)ve.lens[Ce++]=7;for(;Ce<288;)ve.lens[Ce++]=8;for(a(o,ve.lens,0,288,Lt,0,ve.work,{bits:9}),Ce=0;Ce<32;)ve.lens[Ce++]=5;a(s,ve.lens,0,32,Tt,0,ve.work,{bits:5}),Et=!1}ve.lencode=Lt,ve.lenbits=9,ve.distcode=Tt,ve.distbits=5}function ge(ve,Ce,le,ct){var yt,M=ve.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new e.Buf8(M.wsize)),ct>=M.wsize?(e.arraySet(M.window,Ce,le-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(yt=M.wsize-M.wnext,yt>ct&&(yt=ct),e.arraySet(M.window,Ce,le-ct,yt,M.wnext),ct-=yt,ct?(e.arraySet(M.window,Ce,le-ct,ct,0),M.wnext=ct,M.whave=M.wsize):(M.wnext+=yt,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=yt))),0}function N(ve,Ce){var le,ct,yt,M,Be,et,me,je,Ke,Ct,ye,q,$,G,pe=0,de,Fe,ot,jt,un,Bt,Vt,Xt,Tn=new e.Buf8(4),Bn,fr,hr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return w;le=ve.state,le.mode===U&&(le.mode=he),Be=ve.next_out,yt=ve.output,me=ve.avail_out,M=ve.next_in,ct=ve.input,et=ve.avail_in,je=le.hold,Ke=le.bits,Ct=et,ye=me,Xt=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=he;break}for(;Ke<16;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(le.wrap&2&&je===35615){le.check=0,Tn[0]=je&255,Tn[1]=je>>>8&255,le.check=n(le.check,Tn,2,0),je=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((je&255)<<8)+(je>>8))%31){ve.msg="incorrect header check",le.mode=Ie;break}if((je&15)!==S){ve.msg="unknown compression method",le.mode=Ie;break}if(je>>>=4,Ke-=4,Vt=(je&15)+8,le.wbits===0)le.wbits=Vt;else if(Vt>le.wbits){ve.msg="invalid window size",le.mode=Ie;break}le.dmax=1<<Vt,ve.adler=le.check=1,le.mode=je&512?F:U,je=0,Ke=0;break;case C:for(;Ke<16;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(le.flags=je,(le.flags&255)!==S){ve.msg="unknown compression method",le.mode=Ie;break}if(le.flags&57344){ve.msg="unknown header flags set",le.mode=Ie;break}le.head&&(le.head.text=je>>8&1),le.flags&512&&(Tn[0]=je&255,Tn[1]=je>>>8&255,le.check=n(le.check,Tn,2,0)),je=0,Ke=0,le.mode=A;case A:for(;Ke<32;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.head&&(le.head.time=je),le.flags&512&&(Tn[0]=je&255,Tn[1]=je>>>8&255,Tn[2]=je>>>16&255,Tn[3]=je>>>24&255,le.check=n(le.check,Tn,4,0)),je=0,Ke=0,le.mode=O;case O:for(;Ke<16;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.head&&(le.head.xflags=je&255,le.head.os=je>>8),le.flags&512&&(Tn[0]=je&255,Tn[1]=je>>>8&255,le.check=n(le.check,Tn,2,0)),je=0,Ke=0,le.mode=I;case I:if(le.flags&1024){for(;Ke<16;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.length=je,le.head&&(le.head.extra_len=je),le.flags&512&&(Tn[0]=je&255,Tn[1]=je>>>8&255,le.check=n(le.check,Tn,2,0)),je=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=D;case D:if(le.flags&1024&&(q=le.length,q>et&&(q=et),q&&(le.head&&(Vt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ct,M,q,Vt)),le.flags&512&&(le.check=n(le.check,ct,q,M)),et-=q,M+=q,le.length-=q),le.length))break e;le.length=0,le.mode=B;case B:if(le.flags&2048){if(et===0)break e;q=0;do Vt=ct[M+q++],le.head&&Vt&&le.length<65536&&(le.head.name+=String.fromCharCode(Vt));while(Vt&&q<et);if(le.flags&512&&(le.check=n(le.check,ct,q,M)),et-=q,M+=q,Vt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=K;case K:if(le.flags&4096){if(et===0)break e;q=0;do Vt=ct[M+q++],le.head&&Vt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Vt));while(Vt&&q<et);if(le.flags&512&&(le.check=n(le.check,ct,q,M)),et-=q,M+=q,Vt)break e}else le.head&&(le.head.comment=null);le.mode=Q;case Q:if(le.flags&512){for(;Ke<16;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(je!==(le.check&65535)){ve.msg="header crc mismatch",le.mode=Ie;break}je=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),ve.adler=le.check=0,le.mode=U;break;case F:for(;Ke<32;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}ve.adler=le.check=J(je),je=0,Ke=0,le.mode=W;case W:if(le.havedict===0)return ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=je,le.bits=Ke,g;ve.adler=le.check=1,le.mode=U;case U:if(Ce===c||Ce===f)break e;case he:if(le.last){je>>>=Ke&7,Ke-=Ke&7,le.mode=Te;break}for(;Ke<3;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}switch(le.last=je&1,je>>>=1,Ke-=1,je&3){case 0:le.mode=ae;break;case 1:if(zt(le),le.mode=Y,Ce===f){je>>>=2,Ke-=2;break e}break;case 2:le.mode=se;break;case 3:ve.msg="invalid block type",le.mode=Ie}je>>>=2,Ke-=2;break;case ae:for(je>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if((je&65535)!==(je>>>16^65535)){ve.msg="invalid stored block lengths",le.mode=Ie;break}if(le.length=je&65535,je=0,Ke=0,le.mode=re,Ce===f)break e;case re:le.mode=ee;case ee:if(q=le.length,q){if(q>et&&(q=et),q>me&&(q=me),q===0)break e;e.arraySet(yt,ct,M,q,Be),et-=q,M+=q,me-=q,Be+=q,le.length-=q;break}le.mode=U;break;case se:for(;Ke<14;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(le.nlen=(je&31)+257,je>>>=5,Ke-=5,le.ndist=(je&31)+1,je>>>=5,Ke-=5,le.ncode=(je&15)+4,je>>>=4,Ke-=4,le.nlen>286||le.ndist>30){ve.msg="too many length or distance symbols",le.mode=Ie;break}le.have=0,le.mode=V;case V:for(;le.have<le.ncode;){for(;Ke<3;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.lens[hr[le.have++]]=je&7,je>>>=3,Ke-=3}for(;le.have<19;)le.lens[hr[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,Bn={bits:le.lenbits},Xt=a(i,le.lens,0,19,le.lencode,0,le.work,Bn),le.lenbits=Bn.bits,Xt){ve.msg="invalid code lengths set",le.mode=Ie;break}le.have=0,le.mode=X;case X:for(;le.have<le.nlen+le.ndist;){for(;pe=le.lencode[je&(1<<le.lenbits)-1],de=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(de<=Ke);){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(ot<16)je>>>=de,Ke-=de,le.lens[le.have++]=ot;else{if(ot===16){for(fr=de+2;Ke<fr;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(je>>>=de,Ke-=de,le.have===0){ve.msg="invalid bit length repeat",le.mode=Ie;break}Vt=le.lens[le.have-1],q=3+(je&3),je>>>=2,Ke-=2}else if(ot===17){for(fr=de+3;Ke<fr;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}je>>>=de,Ke-=de,Vt=0,q=3+(je&7),je>>>=3,Ke-=3}else{for(fr=de+7;Ke<fr;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}je>>>=de,Ke-=de,Vt=0,q=11+(je&127),je>>>=7,Ke-=7}if(le.have+q>le.nlen+le.ndist){ve.msg="invalid bit length repeat",le.mode=Ie;break}for(;q--;)le.lens[le.have++]=Vt}}if(le.mode===Ie)break;if(le.lens[256]===0){ve.msg="invalid code -- missing end-of-block",le.mode=Ie;break}if(le.lenbits=9,Bn={bits:le.lenbits},Xt=a(o,le.lens,0,le.nlen,le.lencode,0,le.work,Bn),le.lenbits=Bn.bits,Xt){ve.msg="invalid literal/lengths set",le.mode=Ie;break}if(le.distbits=6,le.distcode=le.distdyn,Bn={bits:le.distbits},Xt=a(s,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,Bn),le.distbits=Bn.bits,Xt){ve.msg="invalid distances set",le.mode=Ie;break}if(le.mode=Y,Ce===f)break e;case Y:le.mode=ne;case ne:if(et>=6&&me>=258){ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=je,le.bits=Ke,r(ve,ye),Be=ve.next_out,yt=ve.output,me=ve.avail_out,M=ve.next_in,ct=ve.input,et=ve.avail_in,je=le.hold,Ke=le.bits,le.mode===U&&(le.back=-1);break}for(le.back=0;pe=le.lencode[je&(1<<le.lenbits)-1],de=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(de<=Ke);){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(Fe&&(Fe&240)===0){for(jt=de,un=Fe,Bt=ot;pe=le.lencode[Bt+((je&(1<<jt+un)-1)>>jt)],de=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(jt+de<=Ke);){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}je>>>=jt,Ke-=jt,le.back+=jt}if(je>>>=de,Ke-=de,le.back+=de,le.length=ot,Fe===0){le.mode=Re;break}if(Fe&32){le.back=-1,le.mode=U;break}if(Fe&64){ve.msg="invalid literal/length code",le.mode=Ie;break}le.extra=Fe&15,le.mode=be;case be:if(le.extra){for(fr=le.extra;Ke<fr;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.length+=je&(1<<le.extra)-1,je>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=Ee;case Ee:for(;pe=le.distcode[je&(1<<le.distbits)-1],de=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(de<=Ke);){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if((Fe&240)===0){for(jt=de,un=Fe,Bt=ot;pe=le.distcode[Bt+((je&(1<<jt+un)-1)>>jt)],de=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(jt+de<=Ke);){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}je>>>=jt,Ke-=jt,le.back+=jt}if(je>>>=de,Ke-=de,le.back+=de,Fe&64){ve.msg="invalid distance code",le.mode=Ie;break}le.offset=ot,le.extra=Fe&15,le.mode=De;case De:if(le.extra){for(fr=le.extra;Ke<fr;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.offset+=je&(1<<le.extra)-1,je>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){ve.msg="invalid distance too far back",le.mode=Ie;break}le.mode=Pe;case Pe:if(me===0)break e;if(q=ye-me,le.offset>q){if(q=le.offset-q,q>le.whave&&le.sane){ve.msg="invalid distance too far back",le.mode=Ie;break}q>le.wnext?(q-=le.wnext,$=le.wsize-q):$=le.wnext-q,q>le.length&&(q=le.length),G=le.window}else G=yt,$=Be-le.offset,q=le.length;q>me&&(q=me),me-=q,le.length-=q;do yt[Be++]=G[$++];while(--q);le.length===0&&(le.mode=ne);break;case Re:if(me===0)break e;yt[Be++]=le.length,me--,le.mode=ne;break;case Te:if(le.wrap){for(;Ke<32;){if(et===0)break e;et--,je|=ct[M++]<<Ke,Ke+=8}if(ye-=me,ve.total_out+=ye,le.total+=ye,ye&&(ve.adler=le.check=le.flags?n(le.check,yt,ye,Be-ye):t(le.check,yt,ye,Be-ye)),ye=me,(le.flags?je:J(je))!==le.check){ve.msg="incorrect data check",le.mode=Ie;break}je=0,Ke=0}le.mode=He;case He:if(le.wrap&&le.flags){for(;Ke<32;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(je!==(le.total&4294967295)){ve.msg="incorrect length check",le.mode=Ie;break}je=0,Ke=0}le.mode=it;case it:Xt=m;break e;case Ie:Xt=v;break e;case Ae:return _;case z:default:return w}return ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=je,le.bits=Ke,(le.wsize||ye!==ve.avail_out&&le.mode<Ie&&(le.mode<Te||Ce!==u))&&ge(ve,ve.output,ve.next_out,ye-ve.avail_out),Ct-=ve.avail_in,ye-=ve.avail_out,ve.total_in+=Ct,ve.total_out+=ye,le.total+=ye,le.wrap&&ye&&(ve.adler=le.check=le.flags?n(le.check,yt,ye,ve.next_out-ye):t(le.check,yt,ye,ve.next_out-ye)),ve.data_type=le.bits+(le.last?64:0)+(le.mode===U?128:0)+(le.mode===Y||le.mode===re?256:0),(Ct===0&&ye===0||Ce===u)&&Xt===h&&(Xt=x),Xt}function H(ve){if(!ve||!ve.state)return w;var Ce=ve.state;return Ce.window&&(Ce.window=null),ve.state=null,h}function fe(ve,Ce){var le;return!ve||!ve.state||(le=ve.state,(le.wrap&2)===0)?w:(le.head=Ce,Ce.done=!1,h)}function Oe(ve,Ce){var le=Ce.length,ct,yt,M;return!ve||!ve.state||(ct=ve.state,ct.wrap!==0&&ct.mode!==W)?w:ct.mode===W&&(yt=1,yt=t(yt,Ce,le,0),yt!==ct.check)?v:(M=ge(ve,Ce,le,le),M?(ct.mode=Ae,_):(ct.havedict=1,h))}return lo.inflateReset=xe,lo.inflateReset2=Ve,lo.inflateResetKeep=Le,lo.inflateInit=ht,lo.inflateInit2=xt,lo.inflate=N,lo.inflateEnd=H,lo.inflateGetHeader=fe,lo.inflateSetDictionary=Oe,lo.inflateInfo="pako inflate (from Nodeca project)",lo}var ES,HI;function dM(){return HI||(HI=1,ES={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),ES}var CS,VI;function cQ(){if(VI)return CS;VI=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return CS=e,CS}var GI;function dQ(){if(GI)return kf;GI=1;var e=uQ(),t=vc(),n=uM(),r=dM(),a=hk(),i=cM(),o=cQ(),s=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,m.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):s.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(g=e.inflateSetDictionary(this.strm,m.dictionary),g!==r.Z_OK)))throw new Error(a[g])}u.prototype.push=function(h,m){var g=this.strm,w=this.options.chunkSize,v=this.options.dictionary,_,x,S,E,C,A=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(w),g.next_out=0,g.avail_out=w),_=e.inflate(g,r.Z_NO_FLUSH),_===r.Z_NEED_DICT&&v&&(_=e.inflateSetDictionary(this.strm,v)),_===r.Z_BUF_ERROR&&A===!0&&(_=r.Z_OK,A=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(g.output,g.next_out),E=g.next_out-S,C=n.buf2string(g.output,S),g.next_out=E,g.avail_out=w-E,E&&t.arraySet(g.output,g.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(A=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,m){var g=new u(m);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function f(h,m){return m=m||{},m.raw=!0,c(h,m)}return kf.Inflate=u,kf.inflate=c,kf.inflateRaw=f,kf.ungzip=c,kf}var kS,WI;function fQ(){if(WI)return kS;WI=1;var e=vc().assign,t=oQ(),n=dQ(),r=dM(),a={};return e(a,t,n,r),kS=a,kS}var hQ=fQ();const pk=Qa(hQ);var AS,KI;function pQ(){if(KI)return AS;KI=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,o)=>{n.multiArgs?r.push((...s)=>{n.errorFirst?s[0]?o(s):(s.shift(),i(s)):i(s)}):n.errorFirst?r.push((s,u)=>{s?o(s):i(u)}):r.push(i),t.apply(this,r)})};return AS=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=o=>{const s=u=>typeof u=="string"?o===u:u.test(o);return n.include?n.include.some(s):!n.exclude.some(s)};let i;r==="function"?i=function(...o){return n.excludeMain?t(...o):e(t,n).apply(this,o)}:i=Object.create(Object.getPrototypeOf(t));for(const o in t){const s=t[o];i[o]=typeof s=="function"&&a(o)?e(s,n):s}return i},AS}var mQ=pQ();const TS=Qa(mQ);var RS,ZI;function gQ(){if(ZI)return RS;ZI=1;var e={};function t(re){return Array.isArray(re)?re:[re]}const n="",r=" ",a="\\",i=/^\s+$/,o=/(?:[^\\]|^)\\$/,s=/^\\!/,u=/^\\#/,c=/\r?\n/g,f=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const g=m,w=(re,ee,se)=>Object.defineProperty(re,ee,{value:se}),v=/([0-z])-([0-z])/g,_=()=>!1,x=re=>re.replace(v,(ee,se,V)=>se.charCodeAt(0)<=V.charCodeAt(0)?ee:n),S=re=>{const{length:ee}=re;return re.slice(0,ee-ee%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(re,ee,se)=>ee+(se.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(re,ee)=>{const{length:se}=ee;return ee.slice(0,se-se%2)+r}],[/[\\$.|*+(){^]/g,re=>`\\${re}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(re,ee,se)=>ee+6<se.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(re,ee,se)=>{const V=se.replace(/\\\*/g,"[^\\/]*");return ee+V}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(re,ee,se,V,X)=>ee===a?`\\[${se}${S(V)}${X}`:X==="]"&&V.length%2===0?`[${x(se)}${V}]`:"[]"],[/(?:[^*])$/,re=>/\/$/.test(re)?`${re}$`:`${re}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(re,ee)=>`${ee?`${ee}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),A=(re,ee)=>{let se=C[re];return se||(se=E.reduce((V,[X,Y])=>V.replace(X,Y.bind(re)),re),C[re]=se),ee?new RegExp(se,"i"):new RegExp(se)},O=re=>typeof re=="string",I=re=>re&&O(re)&&!i.test(re)&&!o.test(re)&&re.indexOf("#")!==0,D=re=>re.split(c);class B{constructor(ee,se,V,X){this.origin=ee,this.pattern=se,this.negative=V,this.regex=X}}const K=(re,ee)=>{const se=re;let V=!1;re.indexOf("!")===0&&(V=!0,re=re.substr(1)),re=re.replace(s,"!").replace(u,"#");const X=A(re,ee);return new B(se,re,V,X)},Q=(re,ee)=>{throw new ee(re)},F=(re,ee,se)=>O(re)?re?F.isNotRelative(re)?se(`path should be a \`path.relative()\`d string, but got "${ee}"`,RangeError):!0:se("path must not be empty",TypeError):se(`path must be a string, but got \`${ee}\``,TypeError),W=re=>f.test(re);F.isNotRelative=W,F.convert=re=>re;class U{constructor({ignorecase:ee=!0,ignoreCase:se=ee,allowRelativePaths:V=!1}={}){w(this,g,!0),this._rules=[],this._ignoreCase=se,this._allowRelativePaths=V,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(ee){if(ee&&ee[g]){this._rules=this._rules.concat(ee._rules),this._added=!0;return}if(I(ee)){const se=K(ee,this._ignoreCase);this._added=!0,this._rules.push(se)}}add(ee){return this._added=!1,t(O(ee)?D(ee):ee).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(ee){return this.add(ee)}_testOne(ee,se){let V=!1,X=!1;return this._rules.forEach(Y=>{const{negative:ne}=Y;if(X===ne&&V!==X||ne&&!V&&!X&&!se)return;Y.regex.test(ee)&&(V=!ne,X=ne)}),{ignored:V,unignored:X}}_test(ee,se,V,X){const Y=ee&&F.convert(ee);return F(Y,ee,this._allowRelativePaths?_:Q),this._t(Y,se,V,X)}_t(ee,se,V,X){if(ee in se)return se[ee];if(X||(X=ee.split(h)),X.pop(),!X.length)return se[ee]=this._testOne(ee,V);const Y=this._t(X.join(h)+h,se,V,X);return se[ee]=Y.ignored?Y:this._testOne(ee,V)}ignores(ee){return this._test(ee,this._ignoreCache,!1).ignored}createFilter(){return ee=>!this.ignores(ee)}filter(ee){return t(ee).filter(this.createFilter())}test(ee){return this._test(ee,this._testCache,!0)}}const he=re=>new U(re),ae=re=>F(re&&F.convert(re),re,_);if(he.isPathValid=ae,he.default=he,RS=he,typeof Vr<"u"&&(e&&e.IGNORE_TEST_WIN32||Vr.platform==="win32")){const re=se=>/^\\\\\?\\/.test(se)||/["<>|\u0000-\u001F]+/u.test(se)?se:se.replace(/\\/g,"/");F.convert=re;const ee=/^[a-z]:\//i;F.isNotRelative=se=>ee.test(se)||W(se)}return RS}var yQ=gQ();const bQ=Qa(yQ);var NS,YI;function vQ(){if(YI)return NS;YI=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return NS=n,NS}var wQ=vQ();const Ds=Qa(wQ);var IS,XI;function _Q(){return XI||(XI=1,IS=function(e,t){var n=e,r=t,a=n.length,i=r.length,o=!1,s=null,u=a+1,c=[],f=[],h=[],m="",g=-1,w=0,v=1,_,x,S=function(){a>=i&&(_=n,x=a,n=r,r=_,a=i,i=x,o=!0,u=a+1)},E=function(I,D,B){return{x:I,y:D,k:B}},C=function(I,D){return{elem:I,t:D}},A=function(I,D,B){var K,Q,F;for(D>B?K=c[I-1+u]:K=c[I+1+u],F=Math.max(D,B),Q=F-I;Q<a&&F<i&&n[Q]===r[F];)++Q,++F;return c[I+u]=f.length,f[f.length]=new E(Q,F,K),F},O=function(I){var D,B,K;for(D=B=0,K=I.length-1;K>=0;--K)for(;D<I[K].x||B<I[K].y;)I[K].y-I[K].x>B-D?(o?h[h.length]=new C(r[B],g):h[h.length]=new C(r[B],v),++B):I[K].y-I[K].x<B-D?(o?h[h.length]=new C(n[D],v):h[h.length]=new C(n[D],g),++D):(h[h.length]=new C(n[D],w),m+=n[D],++D,++B)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return m},getses:function(){return h},compose:function(){var I,D,B,K,Q,F,W,U;for(I=i-a,D=a+i+3,B={},W=0;W<D;++W)B[W]=-1,c[W]=-1;K=-1;do{for(++K,U=-K;U<=I-1;++U)B[U+u]=A(U,B[U-1+u]+1,B[U+1+u]);for(U=I+K;U>=I+1;--U)B[U+u]=A(U,B[U-1+u]+1,B[U+1+u]);B[I+u]=A(I,B[I-1+u]+1,B[I+1+u])}while(B[I+u]!==i);for(s=I+2*K,Q=c[I+u],F=[];Q!==-1;)F[F.length]=new E(f[Q].x,f[Q].y,null),Q=f[Q].k;O(F)}}}),IS}var OS,JI;function xQ(){if(JI)return OS;JI=1;var e=_Q();function t(i,o){var s=new e(i,o);s.compose();for(var u=s.getses(),c,f,h=i.length-1,m=o.length-1,g=u.length-1;g>=0;--g)u[g].t===s.SES_COMMON?(f?(f.chain={file1index:h,file2index:m,chain:null},f=f.chain):(c={file1index:h,file2index:m,chain:null},f=c),h--,m--):u[g].t===s.SES_DELETE?h--:u[g].t===s.SES_ADD&&m--;var w={file1index:-1,file2index:-1,chain:null};return f?(f.chain=w,c):w}function n(i,o){for(var s=[],u=i.length,c=o.length,f=t(i,o);f!==null;f=f.chain){var h=u-f.file1index-1,m=c-f.file2index-1;u=f.file1index,c=f.file2index,(h||m)&&s.push({file1:[u+1,h],file2:[c+1,m]})}return s.reverse(),s}function r(i,o,s){var u,c=n(o,i),f=n(o,s),h=[];function m(ee,se){h.push([ee.file1[0],se,ee.file1[1],ee.file2[0],ee.file2[1]])}for(u=0;u<c.length;u++)m(c[u],0);for(u=0;u<f.length;u++)m(f[u],2);h.sort(function(ee,se){return ee[0]-se[0]});var g=[],w=0;function v(ee){ee>w&&(g.push([1,w,ee-w]),w=ee)}for(var _=0;_<h.length;_++){for(var x=_,S=h[_],E=S[0],C=E+S[2];_<h.length-1;){var A=h[_+1],O=A[0];if(O>C)break;C=Math.max(C,O+A[2]),_++}if(v(E),x==_)S[4]>0&&g.push([S[1],S[3],S[4]]);else{var I={0:[i.length,-1,o.length,-1],2:[s.length,-1,o.length,-1]};for(u=x;u<=_;u++){S=h[u];var D=S[1],B=I[D],K=S[0],Q=K+S[2],F=S[3],W=F+S[4];B[0]=Math.min(F,B[0]),B[1]=Math.max(W,B[1]),B[2]=Math.min(K,B[2]),B[3]=Math.max(Q,B[3])}var U=I[0][0]+(E-I[0][2]),he=I[0][1]+(C-I[0][3]),ae=I[2][0]+(E-I[2][2]),re=I[2][1]+(C-I[2][3]);g.push([-1,U,he-U,E,C-E,ae,re-ae])}w=C}return v(o.length),g}function a(i,o,s){var u=[],c=[i,o,s],f=r(i,o,s),h=[];function m(){h.length&&u.push({ok:h}),h=[]}function g(S){for(var E=0;E<S.length;E++)h.push(S[E])}function w(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],A=0;A<S[2];A++)if(i[A+E]!=s[A+C])return!0;return!1}for(var v=0;v<f.length;v++){var _=f[v],x=_[0];x==-1?w(_)?(m(),u.push({conflict:{a:i.slice(_[1],_[1]+_[2]),aIndex:_[1],o:o.slice(_[3],_[3]+_[4]),oIndex:_[3],b:s.slice(_[5],_[5]+_[6]),bIndex:_[5]}})):g(c[0].slice(_[1],_[1]+_[2])):g(c[x].slice(_[1],_[1]+_[2]))}return m(),u}return OS=a,OS}var SQ=xQ();const EQ=Qa(SQ);class Xn extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Xn(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class L0 extends Xn{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=L0.code,this.data={filepaths:t}}}L0.code="UnmergedPathsError";class Cn extends Xn{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=Cn.code,this.data={message:t}}}Cn.code="InternalError";class Nh extends Xn{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Nh.code,this.data={filepath:t}}}Nh.code="UnsafeFilepathError";class As{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function kw(e,t){return-(e<t)||+(e>t)}function fM(e,t){return kw(e.path,t.path)}function hM(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const _s=2**32;function QI(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function nh(e){const[t,n]=QI(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=QI(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%_s,ctimeNanoseconds:n%_s,mtimeSeconds:r%_s,mtimeNanoseconds:a%_s,dev:e.dev%_s,ino:e.ino%_s,mode:hM(e.mode%_s),uid:e.uid%_s,gid:e.gid%_s,size:e.size>-1?e.size%_s:0}}function CQ(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let DS=null;async function Ll(e){return DS===null&&(DS=await AQ()),DS?pM(e):kQ(e)}function kQ(e){return new oM().update(e).digest("hex")}async function pM(e){const t=await crypto.subtle.digest("SHA-1",e);return CQ(t)}async function AQ(){try{if(await pM(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function TQ(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function RQ(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Gt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class td{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Gt.isBuffer(t))return td.fromBuffer(t);if(t===null)return new td(null);throw new Cn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new Cn("Index file is empty (.git/index)");const n=new td,r=new As(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new Cn(`Invalid dircache magic file number: ${a}`);const i=await Ll(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==i)throw new Cn(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const s=r.readUInt32BE();if(s!==2)throw new Cn(`Unsupported dircache version: ${s}`);const u=r.readUInt32BE();let c=0;for(;!r.eof()&&c<u;){const f={};f.ctimeSeconds=r.readUInt32BE(),f.ctimeNanoseconds=r.readUInt32BE(),f.mtimeSeconds=r.readUInt32BE(),f.mtimeNanoseconds=r.readUInt32BE(),f.dev=r.readUInt32BE(),f.ino=r.readUInt32BE(),f.mode=r.readUInt32BE(),f.uid=r.readUInt32BE(),f.gid=r.readUInt32BE(),f.size=r.readUInt32BE(),f.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();f.flags=TQ(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new Cn(`Got a path length of: ${m}`);if(f.path=r.toString("utf8",m),f.path.includes("..\\")||f.path.includes("../"))throw new Nh(f.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const w=r.readUInt8();if(w!==0)throw new Cn(`Expected 1-8 null characters but got '${w}' after ${f.path}`);if(r.eof())throw new Cn("Unexpected end of file")}f.stages=[],n._addEntry(f),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(fM)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=nh(n);const i=Gt.from(t),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Gt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Gt.alloc(r),i=new As(a),o=nh(t);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(RQ(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Gt.alloc(12),n=new As(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const s of this.entries)if(r.push(td._entryToBuffer(s)),s.stages.length>1)for(const u of s.stages)u&&u!==s&&r.push(td._entryToBuffer(u));r=await Promise.all(r);const a=Gt.concat(r),i=Gt.concat([t,a]),o=await Ll(i);return Gt.concat([i,Gt.from(o,"hex")])}}function Gb(e,t,n=!0,r=!0){const a=nh(e),i=nh(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let jS=null;const MS=Symbol("IndexCache");function NQ(){return{map:new Map,stats:new Map}}async function IQ(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await td.from(a);n.map.set(t,i),n.stats.set(t,r)}async function OQ(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Gb(r,a)}class Ra{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[MS]||(r[MS]=NQ());const o=`${n}/index`;jS===null&&(jS=new Bm({maxPending:1/0}));let s,u=[];return await jS.acquire(o,async()=>{const c=r[MS];await OQ(t,o,c)&&await IQ(t,o,c);const f=c.map.get(o);if(u=f.unmergedPaths,u.length&&!a)throw new L0(u);if(s=await i(f),f._dirty){const h=await f.toObject();await t.write(o,h),c.stats.set(o,await t.lstat(o)),f._dirty=!1}}),s}}function Wb(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function rh(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function mM(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Wb(a),metadata:{},children:[]};t.set(a,i),i.parent=n(rh(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const o={type:"blob",fullpath:a,basename:Wb(a),metadata:i,parent:n(rh(a)),children:[]};o.parent&&o.parent.children.push(o),t.set(a,o)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function DQ(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Cn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class jQ{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Ra.acquire({fs:t,gitdir:n,cache:r},async function(i){return mM(i.entries)});const a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(o=>o.fullpath);return i.sort(kw),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:nh(r.metadata);t._type=r.type==="tree"?"tree":DQ(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const Aw=Symbol("GitWalkSymbol");function Ih(){const e=Object.create(null);return Object.defineProperty(e,Aw,{value:function({fs:t,gitdir:n,cache:r}){return new jQ({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class vr extends Xn{constructor(t){super(`Could not find ${t}.`),this.code=this.name=vr.code,this.data={what:t}}}vr.code="NotFoundError";class hi extends Xn{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=hi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}hi.code="ObjectTypeError";class Xu extends Xn{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Xu.code,this.data={value:t}}}Xu.code="InvalidOidError";class $0 extends Xn{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=$0.code,this.data={remote:t}}}$0.code="NoRefspecError";class Kb{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Kb(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Zb{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=n==="+",u=a==="*";if(u!==(o==="*"))throw new Cn("Invalid refspec");return new Zb({remotePath:r,localPath:i,force:s,matchPrefix:u})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class mk{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Zb.from(r));return new mk(n)}add(t){const n=Zb.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function MQ(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const PQ=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},nm=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},e4={core:{filemode:nm,bare:nm,logallrefupdates:nm,symlinks:nm,ignorecase:nm,bigFileThreshold:PQ}},FQ=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,LQ=/^[A-Za-z0-9-.]+$/,$Q=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,BQ=/^[A-Za-z][A-Za-z-]*$/,zQ=/^(.*?)( *[#;].*)$/,UQ=e=>{const t=FQ.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},qQ=e=>{const t=$Q.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=HQ(r),i=VQ(a);return[n,i]}return null},HQ=e=>{const t=zQ.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return t4(n)&&t4(r)?`${n}${r}`:n},t4=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,VQ=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",o=n==="\\"&&a[r+1]==='"';return i||o?t:t+n},""),n4=e=>e!=null?e.toLowerCase():null,nE=(e,t,n)=>[n4(e),t,n4(n)].filter(r=>r!=null).join("."),r4=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:nE(n,a,r),sectionPath:nE(n,a,null),isSection:!!n}},GQ=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class gk{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,o=null;const s=a.trim(),u=UQ(s),c=u!=null;if(c)[n,r]=u;else{const h=qQ(s);h!=null&&([i,o]=h)}const f=nE(n,r,i);return{line:a,isSection:c,section:n,subsection:r,name:i,value:o,path:f}}):[]}static from(t){return new gk(t)}async get(t,n=!1){const r=r4(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:s})=>{const u=e4[i]&&e4[i][o];return u?u(s):s});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:o,path:s,sectionPath:u,isSection:c}=r4(t),f=GQ(this.parsedConfig,h=>h.path===s);if(n==null)f!==-1&&this.parsedConfig.splice(f,1);else if(f!==-1){const h=this.parsedConfig[f],m=Object.assign({},h,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(f+1,0,m):this.parsedConfig[f]=m}else{const h=this.parsedConfig.findIndex(g=>g.path===u),m={section:a,subsection:i,name:o,value:n,modified:!0,path:s};if(LQ.test(a)&&BQ.test(o))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const g={isSection:c,section:a,subsection:i,modified:!0,path:u};this.parsedConfig.push(g,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:o=!1})=>o?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class sa{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return gk.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const Wy=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],WQ=["config","description","index","shallow","commondir"];let PS;async function Iu(e,t){return PS===void 0&&(PS=new Bm),PS.acquire(e,t)}class Ot{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:o,refspecs:s=void 0,prune:u=!1,pruneTags:c=!1}){for(const _ of a.values())if(!_.match(/[0-9a-f]{40}/))throw new Xu(_);const f=await sa.get({fs:t,gitdir:n});if(!s){if(s=await f.getall(`remote.${r}.fetch`),s.length===0)throw new $0(r);s.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=mk.from(s),m=new Map;if(c){const _=await Ot.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Ot.deleteRefs({fs:t,gitdir:n,refs:_.map(x=>`refs/tags/${x}`)})}if(o){for(const _ of a.keys())if(_.startsWith("refs/tags")&&!_.endsWith("^{}")&&!await Ot.exists({fs:t,gitdir:n,ref:_})){const x=a.get(_);m.set(_,x)}}const g=h.translate([...a.keys()]);for(const[_,x]of g){const S=a.get(_);m.set(x,S)}const w=h.translate([...i.keys()]);for(const[_,x]of w){const S=i.get(_),E=h.translateOne(S);E&&m.set(x,`ref: ${E}`)}const v=[];if(u){for(const _ of h.localNamespaces()){const x=(await Ot.listRefs({fs:t,gitdir:n,filepath:_})).map(S=>`${_}/${S}`);for(const S of x)m.has(S)||v.push(S)}v.length>0&&await Ot.deleteRefs({fs:t,gitdir:n,refs:v})}for(const[_,x]of m)await Iu(_,async()=>t.write(At.join(n,_),`${x.trim()}
`,"utf8"));return{pruned:v}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Xu(a);await Iu(r,async()=>t.write(At.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Iu(r,async()=>t.write(At.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Ot.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(s=>t.rm(At.join(n,s))));let a=await Iu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Kb.from(a),o=i.refs.size;for(const s of r)i.refs.has(s)&&i.delete(s);i.refs.size<o&&(a=i.toString(),await Iu("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Ot.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Ot.packedRefs({fs:t,gitdir:n}),o=Wy(r).filter(s=>!WQ.includes(s));for(const s of o){const u=await Iu(s,async()=>await t.read(`${n}/${s}`,{encoding:"utf8"})||i.get(s));if(u)return Ot.resolve({fs:t,gitdir:n,ref:u.trim(),depth:a})}throw new vr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Ot.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Ot.packedRefs({fs:t,gitdir:n}),i=Wy(r);for(const o of i)if(await Iu(o,async()=>t.exists(`${n}/${o}`))||a.has(o))return o;throw new vr(r)}static async expandAgainstMap({ref:t,map:n}){const r=Wy(t);for(const a of r)if(await n.has(a))return a;throw new vr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Ot.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=Wy(t);for(const o of i){const s=a.get(o);if(s)return Ot.resolveAgainstMap({ref:s.trim(),fullref:o,depth:r,map:a})}throw new vr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Iu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Kb.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Ot.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await a).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(MQ),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Ot.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Ot.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Ot.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function KQ(e,t){return kw(a4(e),a4(t))}function a4(e){return e.mode==="040000"?e.path+"/":e.path}function gM(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Cn(`Unexpected GitTree entry mode: ${e}`)}function ZQ(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new Cn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new Cn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=gM(i),s=e.slice(r+1,a).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new Nh(s);const u=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:s,oid:u,type:o})}return t}function YQ(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new Cn(`Could not understand file mode: ${e}`)}function XQ(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=YQ(e.mode),e.type||(e.type=gM(e.mode)),e}class Ri{constructor(t){if(Gt.isBuffer(t))this._entries=ZQ(t);else if(Array.isArray(t))this._entries=t.map(XQ);else throw new Cn("invalid type passed to GitTree constructor");this._entries.sort(fM)}static from(t){return new Ri(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(KQ),Gt.concat(t.map(n=>{const r=Gt.from(n.mode.replace(/^0/,"")),a=Gt.from(" "),i=Gt.from(n.path,"utf8"),o=Gt.from([0]),s=Gt.from(n.oid,"hex");return Gt.concat([r,a,i,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Oh{static wrap({type:t,object:n}){return Gt.concat([Gt.from(`${t} ${n.byteLength.toString()}\0`),Gt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),o=t.length-(r+1);if(parseInt(i)!==o)throw new Cn(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:a,object:Gt.from(t.slice(r+1))}}}async function yM({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function JQ(e,t){const n=new As(e),r=i4(n);if(r!==t.byteLength)throw new Cn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=i4(n);let i;const o=s4(n,t);if(o.byteLength===a)i=o;else{i=Gt.alloc(a);const s=new As(i);for(s.copy(o);!n.eof();)s.copy(s4(n,t));const u=s.tell();if(a!==u)throw new Cn(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${u} bytes`)}return i}function i4(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function o4(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function s4(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const o=o4(e,n&a,4);let s=o4(e,(n&i)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(n)}function QQ(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function bM(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:QQ(e)}class vM{constructor(t){if(typeof Gt>"u")throw new Error("Missing Buffer dependency");this.stream=bM(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Gt.alloc(0):(n&&(n=Gt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>eee(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Gt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function eee(e){return e.reduce((t,n)=>t+n.length,0)}async function tee(e,t){const n=new vM(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new Cn(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new Cn(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:s,length:u,ofs:c,reference:f}=await nee(n),h=new pk.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new Cn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==u)throw new Cn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:s,num:i,offset:o,end:g,reference:f,ofs:c})}}}}async function nee(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let o=4;do t=await e.byte(),r|=(t&127)<<o,o+=7;while(t&128)}let a,i;if(n===6){let o=0;a=0;const s=[];do t=await e.byte(),a|=(t&127)<<o,o+=7,s.push(t);while(t&128);i=Gt.from(s)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function wM(e){return pk.inflate(e)}function ree(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function aee(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class ah{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new As(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new Cn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new Cn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),s=[];for(let f=0;f<o;f++){const h=r.slice(20).toString("hex");s[f]=h}r.seek(r.tell()+4*o);const u=new Map;for(let f=0;f<o;f++)u.set(s[f],r.readUInt32BE());const c=r.slice(20).toString("hex");return new ah({hashes:s,crcs:{},offsets:u,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=t.slice(-20).toString("hex"),s=[],u={},c=new Map;let f=null,h=null;await tee([t],async({data:_,type:x,reference:S,offset:E,num:C})=>{f===null&&(f=C);const A=Math.floor((f-C)*100/f);A!==h&&r&&await r({phase:"Receiving objects",loaded:f-C,total:f}),h=A,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const m=Object.keys(i).map(Number);for(const[_,x]of m.entries()){const S=_+1===m.length?t.byteLength-20:m[_+1],E=i[x],C=rQ.buf(t.slice(x,S))>>>0;E.end=S,E.crc=C}const g=new ah({pack:Promise.resolve(t),packfileSha:o,crcs:u,hashes:s,offsets:c,getExternalRefDelta:n});h=null;let w=0;const v=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _ in i){_=Number(_);const x=Math.floor(w*100/f);x!==h&&r&&await r({phase:"Resolving deltas",loaded:w,total:f}),w++,h=x;const S=i[_];if(!S.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:_});v[g.readDepth]+=1;const A=await Ll(Oh.wrap({type:E,object:C}));S.oid=A,s.push(A),c.set(A,_),u[A]=S.crc}catch{continue}}return s.sort(),g}async toBuffer(){const t=[],n=(c,f)=>{t.push(Gt.from(c,f))};n("ff744f63","hex"),n("00000002","hex");const r=new As(Gt.alloc(256*4));for(let c=0;c<256;c++){let f=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&f++;r.writeUInt32BE(f)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const a=new As(Gt.alloc(this.hashes.length*4));for(const c of this.hashes)a.writeUInt32BE(this.crcs[c]);t.push(a.buffer);const i=new As(Gt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));t.push(i.buffer),n(this.packfileSha,"hex");const o=Gt.concat(t),s=await Ll(o),u=Gt.alloc(20);return u.write(s,"hex"),Gt.concat([o,u])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new Cn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Cn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new As(r),i=a.readUInt8(),o=i&112;let s=n[o];if(s===void 0)throw new Cn("Unrecognized type: 0b"+o.toString(2));const u=i&15;let c=u;i&128&&(c=aee(a,u));let h=null,m=null;if(s==="ofs_delta"){const w=ree(a),v=t-w;({object:h,type:s}=await this.readSlice({start:v}))}if(s==="ref_delta"){const w=a.slice(20).toString("hex");({object:h,type:s}=await this.read({oid:w}))}const g=r.slice(a.tell());if(m=Gt.from(await wM(g)),m.byteLength!==c)throw new Cn(`Packfile told us object would have length ${c} but it had length ${m.byteLength}`);return h&&(m=Gt.from(JQ(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:m}),{type:s,format:"content",object:m}}}const Ky=Symbol("PackfileCache");async function iee({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return ah.fromIdx({idx:i,getExternalRefDelta:n})}function yk({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[Ky]||(t[Ky]=new Map);let o=t[Ky].get(n);return o||(o=iee({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[Ky].set(n,o)),o}async function oee({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let o=await e.readdir(At.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await yk({fs:e,cache:t,filename:u,getExternalRefDelta:i});if(c.error)throw new Cn(c.error);if(c.offsets.has(r)){if(!c.pack){const h=u.replace(/idx$/,"pack");c.pack=e.read(h)}const f=await c.read({oid:r,getExternalRefDelta:i});return f.format="content",f.source=`objects/pack/${s.replace(/idx$/,"pack")}`,f}}return null}async function Lr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=f=>Lr({fs:e,cache:t,gitdir:n,oid:f});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Gt.from("tree 0\0")}),o||(o=await yM({fs:e,gitdir:n,oid:r})),!o){if(o=await oee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new vr(r);return o}if(a==="deflated"||(o.format==="deflated"&&(o.object=Gt.from(await wM(o.object)),o.format="wrapped"),a==="wrapped"))return o;const s=await Ll(o.object);if(s!==r)throw new Cn(`SHA check failed! Expected ${r}, computed ${s}`);const{object:u,type:c}=Oh.unwrap(o.object);if(o.type=c,o.object=u,o.format="content",a==="content")return o;throw new Cn(`invalid requested format "${a}"`)}class ts extends Xn{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=ts.code,this.data={noun:t,where:n,canForce:r}}}ts.code="AlreadyExistsError";class B0 extends Xn{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=B0.code,this.data={nouns:t,short:n,matches:r}}}B0.code="AmbiguousError";class z0 extends Xn{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=z0.code,this.data={filepaths:t}}}z0.code="CheckoutConflictError";class U0 extends Xn{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=U0.code,this.data={ref:t,oid:n}}}U0.code="CommitNotFetchedError";class q0 extends Xn{constructor(){super("Empty response from git server."),this.code=this.name=q0.code,this.data={}}}q0.code="EmptyServerResponseError";class H0 extends Xn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=H0.code,this.data={}}}H0.code="FastForwardError";class V0 extends Xn{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=V0.code,this.data={prettyDetails:t,result:n}}}V0.code="GitPushError";class ih extends Xn{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=ih.code,this.data={statusCode:t,statusMessage:n,response:r}}}ih.code="HttpError";class Ju extends Xn{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Ju.code,this.data={reason:t}}}Ju.code="InvalidFilepathError";class Zo extends Xn{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Zo.code,this.data={ref:t,suggestion:n}}}Zo.code="InvalidRefNameError";class G0 extends Xn{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=G0.code,this.data={depth:t}}}G0.code="MaxDepthError";class Dh extends Xn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Dh.code,this.data={}}}Dh.code="MergeNotSupportedError";class jh extends Xn{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=jh.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}jh.code="MergeConflictError";class Ya extends Xn{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Ya.code,this.data={role:t}}}Ya.code="MissingNameError";class ki extends Xn{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=ki.code,this.data={parameter:t}}}ki.code="MissingParameterError";class W0 extends Xn{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=W0.code,this.data={errors:t},this.errors=t}}W0.code="MultipleGitError";let K0=class _M extends Xn{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=_M.code,this.data={expected:t,actual:n}}};K0.code="ParseError";class oh extends Xn{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=oh.code,this.data={reason:t}}}oh.code="PushRejectedError";class $u extends Xn{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=$u.code,this.data={capability:t,parameter:n}}}$u.code="RemoteCapabilityError";class Z0 extends Xn{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=Z0.code,this.data={preview:t,response:n}}}Z0.code="SmartHttpError";class Y0 extends Xn{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=Y0.code,this.data={url:t,transport:n,suggestion:r}}}Y0.code="UnknownTransportError";class X0 extends Xn{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=X0.code,this.data={url:t}}}X0.code="UrlParseError";class Mh extends Xn{constructor(){super("The operation was canceled."),this.code=this.name=Mh.code,this.data={}}}Mh.code="UserCanceledError";class J0 extends Xn{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=J0.code,this.data={filepath:t}}}J0.code="IndexResetError";class Q0 extends Xn{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Q0.code,this.data={ref:t}}}Q0.code="NoCommitError";var see=Object.freeze({__proto__:null,AlreadyExistsError:ts,AmbiguousError:B0,CheckoutConflictError:z0,CommitNotFetchedError:U0,EmptyServerResponseError:q0,FastForwardError:H0,GitPushError:V0,HttpError:ih,InternalError:Cn,InvalidFilepathError:Ju,InvalidOidError:Xu,InvalidRefNameError:Zo,MaxDepthError:G0,MergeNotSupportedError:Dh,MergeConflictError:jh,MissingNameError:Ya,MissingParameterError:ki,MultipleGitError:W0,NoRefspecError:$0,NotFoundError:vr,ObjectTypeError:hi,ParseError:K0,PushRejectedError:oh,RemoteCapabilityError:$u,SmartHttpError:Z0,UnknownTransportError:Y0,UnsafeFilepathError:Nh,UrlParseError:X0,UserCanceledError:Mh,UnmergedPathsError:L0,IndexResetError:J0,NoCommitError:Q0});function rE({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=lee(r),`${e} <${t}> ${n} ${r}`}function lee(e){const t=uee(cee(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function uee(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function cee(e){return e===0?e:-e}function xl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Yb(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:dee(a)}}function dee(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),fee(r)}function fee(e){return e===0?e:-e}class li{constructor(t){if(typeof t=="string")this._tag=t;else if(Gt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=li.render(t);else throw new Cn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new li(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${rE(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=Yb(r.tagger)),r.committer&&(r.committer=Yb(r.committer)),r}withoutSignature(){const t=xl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return xl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Gt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=xl(i);const o=a+i;return li.from(o)}}function FS(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function hee(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Fr{constructor(t){if(typeof t=="string")this._commit=t;else if(Gt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Fr.render(t);else throw new Cn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Fr.justHeaders(t),a=Fr.justMessage(t),i=xl(r+`
gpgsig`+FS(n)+`
`+a);return new Fr(i)}static from(t){return new Fr(t)}toObject(){return Gt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Fr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return xl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Fr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=Yb(r.author)),r.committer&&(r.committer=Yb(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new Cn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${rE(r)}
`;const a=t.committer||t.author;return n+=`committer ${rE(a)}
`,t.gpgsig&&(n+="gpgsig"+FS(t.gpgsig)),n}static render(t){return Fr.renderHeaders(t)+`
`+xl(t.message)}render(){return this._commit}withoutSignature(){const t=xl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return xl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return hee(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Fr.justMessage(t._commit);let{signature:o}=await n({payload:a,secretKey:r});o=xl(o);const u=Fr.justHeaders(t._commit)+`
gpgsig`+FS(o)+`
`+i;return Fr.from(u)}}async function sh({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ri.from([]),oid:r};const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=li.from(i).parse().object,sh({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Fr.from(i).parse().tree,sh({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new hi(r,a,"tree");return{tree:Ri.from(i),oid:r}}class pee{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let s;try{s=await Ot.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof vr&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const u=await sh({fs:t,cache:this.cache,gitdir:n,oid:s});return u.type="tree",u.mode="40000",o.set(".",u),o})();const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,o=await this.mapPromise,s=o.get(n);if(!s)throw new Error(`No obj for ${n}`);const u=s.oid;if(!u)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;const{type:c,object:f}=await Lr({fs:r,cache:a,gitdir:i,oid:u});if(c!==s.type)throw new hi(u,c,s.type);const h=Ri.from(f);for(const m of h)o.set(At.join(n,m.path),m);return h.entries().map(m=>At.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=hM(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,s=n.get(t._fullpath).oid,{type:u,object:c}=await Lr({fs:r,cache:a,gitdir:i,oid:s});u!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function yo({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,Aw,{value:function({fs:n,gitdir:r,cache:a}){return new pee({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class mee{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(At.join(a,n));return i===null?null:i.map(o=>At.join(n,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=nh(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const o=await(await this._getGitConfig(n,a)).get("core.autocrlf"),s=await n.read(`${r}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let o;await Ra.acquire({fs:r,gitdir:a,cache:i},async function(s){const u=s.entriesMap.get(t._fullpath),c=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),m=typeof Vr<"u"?Vr.platform!=="win32":!0;if(!u||Gb(c,u,h,m)){const g=await t.content();g===void 0?o=void 0:(o=await Ll(Oh.wrap({type:"blob",object:g})),u&&o===u.oid&&(!h||c.mode===u.mode)&&Gb(c,u,h,m)&&s.insert({filepath:t._fullpath,stats:c,oid:o}))}else o=u.oid}),t._oid=o}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await sa.get({fs:t,gitdir:n}),this.config)}}function eg(){const e=Object.create(null);return Object.defineProperty(e,Aw,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new mee({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function gee(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const xM=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class yee{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*bee(e){const t=new yee;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let o=0;o<a;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=e[o].next().value):i[o]=null,r[o]!==void 0&&t.consider(r[o]);if(yield i,t.value===null)return}}async function Qu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(u,c)=>c,reduce:o=async(u,c)=>{const f=xM(c);return u!==void 0&&f.unshift(u),f},iterate:s=(u,c)=>Promise.all([...c].map(u))}){const u=a.map(g=>g[Aw]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(u.length).fill("."),f=gee(0,u.length),h=async g=>{f.map(_=>{const x=g[_];g[_]=x&&new u[_].ConstructEntry(x)});const v=(await Promise.all(f.map(_=>{const x=g[_];return x?u[_].readdir(x):[]}))).map(_=>(_===null?[]:_)[Symbol.iterator]());return{entries:g,children:bee(v)}},m=async g=>{const{entries:w,children:v}=await h(g),_=w.find(S=>S&&S._fullpath)._fullpath,x=await i(_,w);if(x!==null){let S=await s(m,v);return S=S.filter(E=>E!==void 0),o(x,S)}};return m(c)}async function aE(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=At.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?aE(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function vee(e){return wee(e)&&l4(e.then)&&l4(e.catch)}function wee(e){return e&&typeof e=="object"}function l4(e){return typeof e=="function"}function u4(e){return vee((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const c4=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function d4(e,t){if(u4(t))for(const n of c4)e[`_${n}`]=t[n].bind(t);else for(const n of c4)e[`_${n}`]=TS(t[n].bind(t));u4(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=aE.bind(null,e):t.rm?e._rm=TS(t.rm.bind(t)):t.rmdir.length>2?e._rm=TS(t.rmdir.bind(t)):e._rm=aE.bind(null,e)}class nn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?d4(this,t.promises):d4(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Gt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(rh(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=rh(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(kw),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Gt.isBuffer(r)?r:Gt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Je(e,t){if(t===void 0)throw new ki(e)}async function Xb(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function _ee({fs:e,dir:t,gitdir:n=At.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Je("fs",e),Je("dir",t),Je("gitdir",n);const i=new nn(e),o=[yo({ref:r}),eg(),Ih()];let s=[];await Ra.acquire({fs:i,gitdir:n,cache:a},async function(c){s=c.unmergedPaths});const u=await Qu({fs:i,cache:a,dir:t,gitdir:n,trees:o,map:async function(c,[f,h,m]){const g=!await Xb(h,m),w=s.includes(c),v=!await Xb(m,f);if(g||w)return f?{path:c,mode:await f.mode(),oid:await f.oid(),type:await f.type(),content:await f.content()}:void 0;if(v)return!1;throw new J0(c)}});await Ra.acquire({fs:i,gitdir:n,cache:a},async function(c){for(const f of u)if(f!==!1){if(!f){await i.rmdir(`${t}/${f.path}`,{recursive:!0}),c.delete({filepath:f.path});continue}if(f.type==="blob"){const h=new TextDecoder().decode(f.content);await i.write(`${t}/${f.path}`,h,{mode:f.mode}),c.insert({filepath:f.path,oid:f.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class Ph{static async isIgnored({fs:t,dir:n,gitdir:r=At.join(n,".git"),filepath:a}){if(Wb(a)===".git")return!0;if(a===".")return!1;let i="";const o=At.join(r,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:At.join(n,".gitignore"),filepath:a}],u=a.split("/").filter(Boolean);for(let f=1;f<u.length;f++){const h=u.slice(0,f).join("/"),m=u.slice(f).join("/");s.push({gitignore:At.join(n,h,".gitignore"),filepath:m})}let c=!1;for(const f of s){let h;try{h=await t.read(f.gitignore,"utf8")}catch(w){if(w.code==="NOENT")continue}const m=bQ().add(i);m.add(h);const g=rh(f.filepath);if(g!=="."&&m.ignores(g))return!0;c?c=!m.test(f.filepath).unignored:c=m.test(f.filepath).ignored}return c}}async function xee({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,o=`${t}/${i}`;await e.exists(o)||await e.write(o,n)}let LS=null;async function SM(e){return LS===null&&(LS=Eee()),LS?See(e):pk.deflate(e)}async function See(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function Eee(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Ni({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:o=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Oh.wrap({type:n,object:r})),i=await Ll(r),r=Gt.from(await SM(r))),o||await xee({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function EM(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function Cee({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:o=!0}){try{Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r);const s=new nn(e);await Ra.acquire({fs:s,gitdir:n,cache:a},async u=>{const f=await(await sa.get({fs:s,gitdir:n})).get("core.autocrlf");return iE({dir:t,gitdir:n,fs:s,filepath:r,index:u,force:i,parallel:o,autocrlf:f})})}catch(s){throw s.caller="git.add",s}}async function iE({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:o,autocrlf:s}){r=Array.isArray(r)?r:[r];const u=r.map(async m=>{if(!i&&await Ph.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const g=await n.lstat(At.join(e,m));if(!g)throw new vr(m);if(g.isDirectory()){const w=await n.readdir(At.join(e,m));if(o){const v=w.map(_=>iE({dir:e,gitdir:t,fs:n,filepath:[At.join(m,_)],index:a,force:i,parallel:o,autocrlf:s}));await Promise.all(v)}else for(const v of w)await iE({dir:e,gitdir:t,fs:n,filepath:[At.join(m,v)],index:a,force:i,parallel:o,autocrlf:s})}else{const w=g.isSymbolicLink()?await n.readlink(At.join(e,m)).then(EM):await n.read(At.join(e,m),{autocrlf:s});if(w===null)throw new vr(m);const v=await Ni({fs:n,gitdir:t,type:"blob",object:w});a.insert({filepath:m,stats:g,oid:v})}}),c=await Promise.allSettled(u),f=c.filter(m=>m.status==="rejected").map(m=>m.reason);if(f.length>1)throw new W0(f);if(f.length===1)throw f[0];return c.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function zm({fs:e,gitdir:t,path:n}){return(await sa.get({fs:e,gitdir:t})).get(n)}function CM(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function ec({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await zm({fs:e,gitdir:t,path:"user.name"}),email:await zm({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=CM({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function lh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),o={name:await zm({fs:e,gitdir:t,path:"user.name"}),email:await zm({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=CM({},o,a?a.committer:void 0,n,r);if(s.name!==void 0)return s}async function kM({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=li.from(i).parse().object,kM({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new hi(r,a,"commit");return{commit:Fr.from(i),oid:r}}async function uh({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await kM({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function Tw({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:m,tree:g}){let w=!1;h||(h=await Ot.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let v,_;try{v=await Ot.resolve({fs:e,gitdir:r,ref:h}),_=await uh({fs:e,gitdir:r,oid:v,cache:{}})}catch{w=!0}if(u&&w)throw new Q0(h);const x=u?await ec({fs:e,gitdir:r,author:i,commit:_.commit}):await ec({fs:e,gitdir:r,author:i});if(!x)throw new Ya("author");const S=u?await lh({fs:e,gitdir:r,author:x,committer:o,commit:_.commit}):await lh({fs:e,gitdir:r,author:x,committer:o});if(!S)throw new Ya("committer");return Ra.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const A=mM(E.entries).get(".");if(g||(g=await AM({fs:e,gitdir:r,inode:A,dryRun:c})),m?m=await Promise.all(m.map(D=>Ot.resolve({fs:e,gitdir:r,ref:D}))):u?m=_.commit.parent:m=v?[v]:[],!a)if(u)a=_.commit.message;else throw new ki("message");let O=Fr.from({tree:g,parent:m,author:x,committer:S,message:a});s&&(O=await Fr.sign(O,n,s));const I=await Ni({fs:e,gitdir:r,type:"commit",object:O.toObject(),dryRun:c});return!f&&!c&&await Ot.writeRef({fs:e,gitdir:r,ref:h,value:I}),I})}async function AM({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const u of a)u.type==="tree"&&(u.metadata.mode="040000",u.metadata.oid=await AM({fs:e,gitdir:t,inode:u,dryRun:r}));const i=a.map(u=>({mode:u.metadata.mode,path:u.basename,oid:u.metadata.oid,type:u.type})),o=Ri.from(i);return await Ni({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:r})}async function tg({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Ju("leading-slash");if(a.endsWith("/"))throw new Ju("trailing-slash");const i=r,o=await sh({fs:e,cache:t,gitdir:n,oid:r}),s=o.tree;if(a==="")r=o.oid;else{const u=a.split("/");r=await TM({fs:e,cache:t,gitdir:n,tree:s,pathArray:u,oid:i,filepath:a})}return r}async function TM({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o}){const s=a.shift();for(const u of r)if(u.path===s){if(a.length===0)return u.oid;{const{type:c,object:f}=await Lr({fs:e,cache:t,gitdir:n,oid:u.oid});if(c!=="tree")throw new hi(i,c,"tree",o);return r=Ri.from(f),TM({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o})}}throw new vr(`file or directory found at "${i}:${o}"`)}async function Fh({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await tg({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:o}=await sh({fs:e,cache:t,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function ng({fs:e,gitdir:t,tree:n}){const r=Ri.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function kee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:o,force:s,author:u,committer:c,signingKey:f}){let h;try{h=await Ot.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof vr))throw x}let g=(await Fh({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new ts("note",i);typeof o=="string"&&(o=Gt.from(o,"utf8"));const w=await Ni({fs:e,gitdir:r,type:"blob",object:o,format:"content"});g.push({mode:"100644",path:i,oid:w,type:"blob"});const v=await ng({fs:e,gitdir:r,tree:g});return await Tw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:v,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:u,committer:c,signingKey:f})}async function Aee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:o,force:s,author:u,committer:c,signingKey:f,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i),Je("note",o),f&&Je("onSign",t);const m=new nn(e),g=await ec({fs:m,gitdir:r,author:u});if(!g)throw new Ya("author");const w=await lh({fs:m,gitdir:r,author:g,committer:c});if(!w)throw new Ya("committer");return await kee({fs:new nn(m),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:o,force:s,author:g,committer:w,signingKey:f})}catch(m){throw m.caller="git.addNote",m}}async function RM({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==Ds.clean(n))throw new Zo(n,Ds.clean(n));const i=await sa.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new ts("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await sa.save({fs:e,gitdir:t,config:i})}async function Tee({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("remote",r),Je("url",a),await RM({fs:new nn(e),gitdir:n,remote:r,url:a,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function Ree({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!f&&await Ot.exists({fs:e,gitdir:r,ref:a}))throw new ts("tag",a);const h=await Ot.resolve({fs:e,gitdir:r,ref:u||"HEAD"}),{type:m}=await Lr({fs:e,cache:t,gitdir:r,oid:h});let g=li.from({object:h,type:m,tag:a.replace("refs/tags/",""),tagger:i,message:o,gpgsig:s});c&&(g=await li.sign(g,n,c));const w=await Ni({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Ot.writeRef({fs:e,gitdir:r,ref:a,value:w})}async function Nee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("ref",a),c&&Je("onSign",t);const m=new nn(e),g=await ec({fs:m,gitdir:r,author:i});if(!g)throw new Ya("tagger");return await Ree({fs:m,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:o,gpgsig:s,object:u,signingKey:c,force:f})}catch(m){throw m.caller="git.annotatedTag",m}}async function Iee({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==Ds.clean(n))throw new Zo(n,Ds.clean(n));const o=`refs/heads/${n}`;if(!i&&await Ot.exists({fs:e,gitdir:t,ref:o}))throw new ts("branch",n,!1);let s;try{s=await Ot.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}s&&await Ot.writeRef({fs:e,gitdir:t,ref:o,value:s}),a&&await Ot.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Oee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,object:a,checkout:i=!1,force:o=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Iee({fs:new nn(e),gitdir:n,ref:r,object:a,checkout:i,force:o})}catch(s){throw s.caller="git.branch",s}}const NM=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function bk({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:o,ref:s,filepaths:u,noCheckout:c,noUpdateHead:f,dryRun:h,force:m,track:g=!0}){let w;if(r)try{w=await Ot.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{w="0000000000000000000000000000000000000000"}let v;try{v=await Ot.resolve({fs:e,gitdir:i,ref:s})}catch(_){if(s==="HEAD")throw _;const x=`${o}/${s}`;if(v=await Ot.resolve({fs:e,gitdir:i,ref:x}),g){const S=await sa.get({fs:e,gitdir:i});await S.set(`branch.${s}.remote`,o),await S.set(`branch.${s}.merge`,`refs/heads/${s}`),await sa.save({fs:e,gitdir:i,config:S})}await Ot.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:v})}if(!c){let _;try{_=await Dee({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:s,force:m,filepaths:u})}catch(A){throw A instanceof vr&&A.data.what===v?new U0(s,v):A}const x=_.filter(([A])=>A==="conflict").map(([A,O])=>O);if(x.length>0)throw new z0(x);const S=_.filter(([A])=>A==="error").map(([A,O])=>O);if(S.length>0)throw new Cn(S.join(", "));if(h){r&&await r({previousHead:w,newHead:v,type:u!=null&&u.length>0?"file":"branch"});return}let E=0;const C=_.length;await Ra.acquire({fs:e,gitdir:i,cache:t},async function(A){await Promise.all(_.filter(([O])=>O==="delete"||O==="delete-index").map(async function([O,I]){const D=`${a}/${I}`;O==="delete"&&await e.rm(D),A.delete({filepath:I}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Ra.acquire({fs:e,gitdir:i,cache:t},async function(A){for(const[O,I]of _)if(O==="rmdir"||O==="rmdir-index"){const D=`${a}/${I}`;try{O==="rmdir-index"&&A.delete({filepath:I}),await e.rmdir(D),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(B){if(B.code==="ENOTEMPTY")console.log(`Did not delete ${I} because directory is not empty`);else throw B}}}),await Promise.all(_.filter(([A])=>A==="mkdir"||A==="mkdir-index").map(async function([A,O]){const I=`${a}/${O}`;await e.mkdir(I),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Ra.acquire({fs:e,gitdir:i,cache:t},async function(A){await Promise.all(_.filter(([O])=>O==="create"||O==="create-index"||O==="update"||O==="mkdir-index").map(async function([O,I,D,B,K]){const Q=`${a}/${I}`;try{if(O!=="create-index"&&O!=="mkdir-index"){const{object:W}=await Lr({fs:e,cache:t,gitdir:i,oid:D});if(K&&await e.rm(Q),B===33188)await e.write(Q,W);else if(B===33261)await e.write(Q,W,{mode:511});else if(B===40960)await e.writelink(Q,W);else throw new Cn(`Invalid mode 0o${B.toString(8)} detected in blob ${D}`)}const F=await e.lstat(Q);B===33261&&(F.mode=493),O==="mkdir-index"&&(F.mode=57344),A.insert({filepath:I,stats:F,oid:D}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(F){console.log(F)}}))}),r&&await r({previousHead:w,newHead:v,type:u!=null&&u.length>0?"file":"branch"})}if(!f){const _=await Ot.expand({fs:e,gitdir:i,ref:s});_.startsWith("refs/heads")?await Ot.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:_}):await Ot.writeRef({fs:e,gitdir:i,ref:"HEAD",value:v})}}async function Dee({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:o,filepaths:s}){let u=0;return Qu({fs:e,cache:t,dir:r,gitdir:a,trees:[yo({ref:i}),eg(),Ih()],map:async function(c,[f,h,m]){if(c===".")return;if(s&&!s.some(w=>NM(c,w)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++u}),[!!m,!!f,!!h].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(c)?["delete",c]:void 0;case"010":switch(await f.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await f.oid(),await f.mode()];case"commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`new entry Unhandled type ${await f.type()}`]}case"011":switch(`${await f.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await f.oid()!==await h.oid()?o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]:await f.mode()!==await h.mode()?o?["update",c,await f.oid(),await f.mode(),!0]:["conflict",c]:["create-index",c,await f.oid(),await f.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${f.type}`]}case"100":return["delete-index",c];case"101":switch(await m.type()){case"tree":return["rmdir",c];case"blob":return await m.oid()!==await h.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await f.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await f.oid()&&await m.mode()===await f.mode()&&!o)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await f.oid())return o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]}else if(o)return["update",c,await f.oid(),await f.mode(),await f.mode()!==await m.mode()];return await f.mode()!==await m.mode()?["update",c,await f.oid(),await f.mode(),!0]:await f.oid()!==await m.oid()?["update",c,await f.oid(),await f.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await f.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await f.type()}`]}}},reduce:async function(c,f){return f=xM(f),c?c&&c[0]==="rmdir"?(f.push(c),f):(f.unshift(c),f):f}})}async function IM({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=At.join(r,".git"),remote:i="origin",ref:o,filepaths:s,noCheckout:u=!1,noUpdateHead:c=o===void 0,dryRun:f=!1,force:h=!1,track:m=!0,cache:g={}}){try{Je("fs",e),Je("dir",r),Je("gitdir",a);const w=o||"HEAD";return await bk({fs:new nn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:w,filepaths:s,noCheckout:u,noUpdateHead:c,dryRun:f,force:h,track:m})}catch(w){throw w.caller="git.checkout",w}}const jee=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function ad(e){const t=jee.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function wc({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Ot.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Ot.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:ad(a)}function Mee(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function OM({username:e="",password:t=""}){return`Basic ${Gt.from(`${e}:${t}`).toString("base64")}`}async function rg(e,t){const n=bM(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Jb(e){let t=0;const n=[];await rg(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function f4(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function oE(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class Xr{static flush(){return Gt.from("0000","utf8")}static delim(){return Gt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Gt.from(t));const n=t.length+4,r=oE(4,n);return Gt.concat([Gt.from(r,"utf8"),t])}static streamReader(t){const n=new vM(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function h4(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function p4(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=Xr.streamReader(e);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new q0;if(o.includes("version 2"))return h4(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new K0(`# service=${t}\\n`,o.toString("utf8"));let s=await i();for(;s===null;)s=await i();if(s===!0)return{capabilities:n,refs:r,symrefs:a};if(s=s.toString("utf8"),s.includes("version 2"))return h4(i);const[u,c]=$S(s,"\0","\\x00");if(c.split(" ").map(f=>n.add(f)),u!=="0000000000000000000000000000000000000000 capabilities^{}"){const[f,h]=$S(u," "," ");for(r.set(h,f);;){const m=await i();if(m===!0)break;if(m!==null){const[g,w]=$S(m.toString("utf8")," "," ");r.set(w,g)}}}for(const f of n)if(f.startsWith("symref=")){const h=f.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function $S(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new K0(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const m4=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,g4=(e,t)=>{(t.username||t.password)&&(e.Authorization=OM(t)),t.headers&&Object.assign(e,t.headers)},BS=async e=>{try{const t=Gt.from(await Jb(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Qb{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:o,service:s,url:u,headers:c,protocolVersion:f}){let{url:h,auth:m}=f4(u);const g=o?m4(o,h):h;(m.username||m.password)&&(c.Authorization=OM(m)),f===2&&(c["Git-Protocol"]="version=2");let w,v,_=!1;do if(w=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${s}`,headers:c}),v=!1,w.statusCode===401||w.statusCode===203){const x=_?i:r;if(x){if(m=await x(h,{...m,headers:{...c}}),m&&m.cancel)throw new Mh;m&&(g4(c,m),_=!0,v=!0)}}else w.statusCode===200&&_&&a&&await a(h,m);while(v);if(w.statusCode!==200){const{response:x}=await BS(w);throw new ih(w.statusCode,w.statusMessage,x)}if(w.headers["content-type"]===`application/x-${s}-advertisement`){const x=await p4(w.body,{service:s});return x.auth=m,x}else{const{preview:x,response:S,data:E}=await BS(w);try{const C=await p4([E],{service:s});return C.auth=m,C}catch{throw new Z0(x,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:o,body:s,headers:u}){const c=f4(i);c&&(i=c.url),r&&(i=m4(r,i)),u["content-type"]=`application/x-${a}-request`,u.accept=`application/x-${a}-result`,g4(u,o);const f=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:s,headers:u});if(f.statusCode!==200){const{response:h}=BS(f);throw new ih(f.statusCode,f.statusMessage,h)}return f}}function Pee({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class Rw{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Qb),n.set("https",Qb);const r=Pee({url:t});if(!r)throw new X0(t);if(n.has(r.transport))return n.get(r.transport);throw new Y0(t,r.transport,r.transport==="ssh"?Mee(t):void 0)}}let Yc=null;class Um{static async read({fs:t,gitdir:n}){Yc===null&&(Yc=new Bm);const r=At.join(n,"shallow"),a=new Set;return await Yc.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(o=>a.add(o))}),a}static async write({fs:t,gitdir:n,oids:r}){Yc===null&&(Yc=new Bm);const a=At.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Yc.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Yc.acquire(a,async function(){await t.rm(a)})}}async function Fee({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function Lee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(At.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const s=`${n}/objects/pack/${o}`,u=await yk({fs:e,cache:t,filename:s,getExternalRefDelta:a});if(u.error)throw new Cn(u.error);if(u.offsets.has(r))return!0}return!1}async function y4({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=s=>Lr({fs:e,cache:t,gitdir:n,oid:s});let o=await Fee({fs:e,gitdir:n,oid:r});return o||(o=await Lee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),o}function $ee(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function DM(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const Nw={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class gb{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Bee(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function jM(e){const t=new gb;let n="";return(async()=>(await rg(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Bee(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class MM{static demux(t){const n=Xr.streamReader(t),r=new gb,a=new gb,i=new gb,o=async function(){const s=await n();if(s===null)return o();if(s===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(s[0]){case 1:{a.write(s.slice(1));break}case 2:{i.write(s.slice(1));break}case 3:{const u=s.slice(1);i.write(u),r.end(),i.end(),a.destroy(new Error(u.toString("utf8")));return}default:r.write(s)}o()};return o(),{packetlines:r,packfile:a,progress:i}}}async function zee(e){const{packetlines:t,packfile:n,progress:r}=MM.demux(e),a=[],i=[],o=[];let s=!1,u=!1;return new Promise((c,f)=>{rg(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const g=m.slice(-41).trim();g.length!==40&&f(new Xu(g)),a.push(g)}else if(m.startsWith("unshallow")){const g=m.slice(-41).trim();g.length!==40&&f(new Xu(g)),i.push(g)}else if(m.startsWith("ACK")){const[,g,w]=m.split(" ");o.push({oid:g,status:w}),w||(u=!0)}else m.startsWith("NAK")?(s=!0,u=!0):(u=!0,s=!0);u&&(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))}).finally(()=>{u||(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))})})}function Uee({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:o=[]}){const s=[];t=[...new Set(t)];let u=` ${e.join(" ")}`;for(const c of t)s.push(Xr.encode(`want ${c}${u}
`)),u="";for(const c of r)s.push(Xr.encode(`shallow ${c}
`));a!==null&&s.push(Xr.encode(`deepen ${a}
`)),i!==null&&s.push(Xr.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)s.push(Xr.encode(`deepen-not ${c}
`));s.push(Xr.flush());for(const c of n)s.push(Xr.encode(`have ${c}
`));return s.push(Xr.encode(`done
`)),s}async function vk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:u,ref:c,remoteRef:f,remote:h,url:m,corsProxy:g,depth:w=null,since:v=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:A=!1,pruneTags:O=!1}){const I=c||await wc({fs:e,gitdir:u,test:!0}),D=await sa.get({fs:e,gitdir:u}),B=h||I&&await D.get(`branch.${I}.remote`)||"origin",K=m||await D.get(`remote.${B}.url`);if(typeof K>"u")throw new ki("remote OR url");const Q=f||I&&await D.get(`branch.${I}.merge`)||c||"HEAD";g===void 0&&(g=await D.get("http.corsProxy"));const F=Rw.getRemoteHelperFor({url:K}),W=await F.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:g,service:"git-upload-pack",url:K,headers:C,protocolVersion:1}),U=W.auth,he=W.refs;if(he.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(w!==null&&!W.capabilities.has("shallow"))throw new $u("shallow","depth");if(v!==null&&!W.capabilities.has("deepen-since"))throw new $u("deepen-since","since");if(_.length>0&&!W.capabilities.has("deepen-not"))throw new $u("deepen-not","exclude");if(x===!0&&!W.capabilities.has("deepen-relative"))throw new $u("deepen-relative","relative");const{oid:ae,fullref:re}=Ot.resolveAgainstMap({ref:Q,map:he});for(const Ie of he.keys())Ie===re||Ie==="HEAD"||Ie.startsWith("refs/heads/")||S&&Ie.startsWith("refs/tags/")||he.delete(Ie);const ee=DM([...W.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Nw.agent}`]);x&&ee.push("deepen-relative");const se=E?[ae]:he.values(),V=E?[I]:await Ot.listRefs({fs:e,gitdir:u,filepath:"refs"});let X=[];for(let Ie of V)try{Ie=await Ot.expand({fs:e,gitdir:u,ref:Ie});const Ae=await Ot.resolve({fs:e,gitdir:u,ref:Ie});await y4({fs:e,cache:t,gitdir:u,oid:Ae})&&X.push(Ae)}catch{}X=[...new Set(X)];const Y=await Um.read({fs:e,gitdir:u}),ne=W.capabilities.has("shallow")?[...Y]:[],be=Uee({capabilities:ee,wants:se,haves:X,shallows:ne,depth:w,since:v,exclude:_}),Ee=Gt.from(await Jb(be)),De=await F.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:K,auth:U,body:[Ee],headers:C}),Pe=await zee(De.body);De.headers&&(Pe.headers=De.headers);for(const Ie of Pe.shallows)if(!Y.has(Ie))try{const{object:Ae}=await Lr({fs:e,cache:t,gitdir:u,oid:Ie}),z=new Fr(Ae),ke=await Promise.all(z.headers().parent.map(ce=>y4({fs:e,cache:t,gitdir:u,oid:ce})));ke.length===0||ke.every(ce=>ce)||Y.add(Ie)}catch{Y.add(Ie)}for(const Ie of Pe.unshallows)Y.delete(Ie);if(await Um.write({fs:e,gitdir:u,oids:Y}),E){const Ie=new Map([[re,ae]]),Ae=new Map;let z=10,ke=re;for(;z--;){const ie=W.symrefs.get(ke);if(ie===void 0)break;Ae.set(ke,ie),ke=ie}const Ne=he.get(ke);Ne&&Ie.set(ke,Ne);const{pruned:ce}=await Ot.updateRemoteRefs({fs:e,gitdir:u,remote:B,refs:Ie,symrefs:Ae,tags:S,prune:A});A&&(Pe.pruned=ce)}else{const{pruned:Ie}=await Ot.updateRemoteRefs({fs:e,gitdir:u,remote:B,refs:he,symrefs:W.symrefs,tags:S,prune:A,pruneTags:O});A&&(Pe.pruned=Ie)}if(Pe.HEAD=W.symrefs.get("HEAD"),Pe.HEAD===void 0){const{oid:Ie}=Ot.resolveAgainstMap({ref:"HEAD",map:he});for(const[Ae,z]of he.entries())if(Ae!=="HEAD"&&z===Ie){Pe.HEAD=Ae;break}}const Re=re.startsWith("refs/tags")?"tag":"branch";if(Pe.FETCH_HEAD={oid:ae,description:`${Re} '${ad(re)}' of ${K}`},r||a){const Ie=jM(Pe.progress);rg(Ie,async Ae=>{if(a&&await a(Ae),r){const z=Ae.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);z&&await r({phase:z[1].trim(),loaded:parseInt(z[2],10),total:parseInt(z[3],10)})}})}const Te=Gt.from(await Jb(Pe.packfile));if(De.body.error)throw De.body.error;const He=Te.slice(-20).toString("hex"),it={defaultBranch:Pe.HEAD,fetchHead:Pe.FETCH_HEAD.oid,fetchHeadDescription:Pe.FETCH_HEAD.description};if(Pe.headers&&(it.headers=Pe.headers),A&&(it.pruned=Pe.pruned),He!==""&&!$ee(Te)){it.packfile=`objects/pack/pack-${He}.pack`;const Ie=At.join(u,it.packfile);await e.write(Ie,Te);const Ae=ke=>Lr({fs:e,cache:t,gitdir:u,oid:ke}),z=await ah.fromPack({pack:Te,getExternalRefDelta:Ae,onProgress:r});await e.write(Ie.replace(/\.pack$/,".idx"),await z.toBuffer())}return it}async function PM({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:At.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await e.mkdir(o);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function qee({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:u,dir:c,gitdir:f,url:h,corsProxy:m,ref:g,remote:w,depth:v,since:_,exclude:x,relative:S,singleBranch:E,noCheckout:C,noTags:A,headers:O}){try{if(await PM({fs:e,gitdir:f}),await RM({fs:e,gitdir:f,remote:w,url:h,force:!1}),m){const B=await sa.get({fs:e,gitdir:f});await B.set("http.corsProxy",m),await sa.save({fs:e,gitdir:f,config:B})}const{defaultBranch:I,fetchHead:D}=await vk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:f,ref:g,remote:w,corsProxy:m,depth:v,since:_,exclude:x,relative:S,singleBranch:E,headers:O,tags:!A});if(D===null)return;g=g||I,g=g.replace("refs/heads/",""),await bk({fs:e,cache:t,onProgress:r,onPostCheckout:u,dir:c,gitdir:f,ref:g,remote:w,noCheckout:C})}catch(I){throw await e.rmdir(f,{recursive:!0,maxRetries:10}).catch(()=>{}),I}}async function Hee({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c=At.join(u,".git"),url:f,corsProxy:h=void 0,ref:m=void 0,remote:g="origin",depth:w=void 0,since:v=void 0,exclude:_=[],relative:x=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:A={},cache:O={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",c),E||Je("dir",u),Je("url",f),await qee({fs:new nn(e),cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c,url:f,corsProxy:h,ref:m,remote:g,depth:w,since:v,exclude:_,relative:x,singleBranch:S,noCheckout:E,noTags:C,headers:A})}catch(I){throw I.caller="git.clone",I}}async function Vee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:m,tree:g,cache:w={}}){try{Je("fs",e),u||Je("message",a),s&&Je("onSign",t);const v=new nn(e);return await Tw({fs:v,cache:w,onSign:t,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u,dryRun:c,noUpdateBranch:f,ref:h,parent:m,tree:g})}catch(v){throw v.caller="git.commit",v}}async function Gee({fs:e,dir:t,gitdir:n=At.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Je("fs",e),Je("gitdir",n),await wc({fs:new nn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Wee({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Ot.exists({fs:e,gitdir:t,ref:n}))throw new vr(n);const a=await Ot.expand({fs:e,gitdir:t,ref:n}),i=await wc({fs:e,gitdir:t,fullname:!0});if(a===i){const u=await Ot.resolve({fs:e,gitdir:t,ref:a});await Ot.writeRef({fs:e,gitdir:t,ref:"HEAD",value:u})}await Ot.deleteRef({fs:e,gitdir:t,ref:a});const o=ad(n),s=await sa.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await sa.save({fs:e,gitdir:t,config:s})}async function Kee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Wee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Zee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{Je("fs",e),Je("ref",r),await Ot.deleteRef({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Yee({fs:e,gitdir:t,remote:n}){const r=await sa.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await sa.save({fs:e,gitdir:t,config:r})}async function Xee({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r}){try{return Je("fs",e),Je("remote",r),await Yee({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Jee({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Ot.deleteRef({fs:e,gitdir:t,ref:n})}async function Qee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Jee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function ete({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function tte({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let o=await e.readdir(At.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await yk({fs:e,cache:t,filename:u,getExternalRefDelta:a});if(c.error)throw new Cn(c.error);for(const f of c.offsets.keys())f.startsWith(r)&&i.push(f)}return i}async function nte({fs:e,cache:t,gitdir:n,oid:r}){const a=s=>Lr({fs:e,cache:t,gitdir:n,oid:s}),i=await ete({fs:e,gitdir:n,oid:r}),o=await tte({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const s of o)i.indexOf(s)===-1&&i.push(s);if(i.length===1)return i[0];throw i.length>1?new B0("oids",r,i):new vr(`an object matching "${r}"`)}async function rte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await nte({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function ate({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ot.expand({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function wk({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let o=r.map((s,u)=>({index:u,oid:s}));for(;o.length;){const s=new Set;for(const{oid:c,index:f}of o)a[c]||(a[c]=new Set),a[c].add(f),a[c].size===i&&s.add(c);if(s.size>0)return[...s];const u=new Map;for(const{oid:c,index:f}of o)try{const{object:h}=await Lr({fs:e,cache:t,gitdir:n,oid:c}),m=Fr.from(h),{parent:g}=m.parseHeaders();for(const w of g)(!a[w]||!a[w].has(f))&&u.set(w+":"+f,{oid:w,index:f})}catch{}o=Array.from(u.values())}return[]}const zS=/^.*(\r?\n|$)/gm;function ite({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],o=t[2],s=i.match(zS),u=a.match(zS),c=o.match(zS),f=EQ(s,u,c),h=7;let m="",g=!0;for(const w of f)w.ok&&(m+=w.ok.join("")),w.conflict&&(g=!1,m+=`${"<".repeat(h)} ${n}
`,m+=w.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=w.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:m}}async function ote({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),index:a,ourOid:i,baseOid:o,theirOid:s,ourName:u="ours",baseName:c="base",theirName:f="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:g}){const w=yo({ref:i}),v=yo({ref:o}),_=yo({ref:s}),x=[],S=[],E=[],C=[],A=await Qu({fs:e,cache:t,dir:n,gitdir:r,trees:[w,v,_],map:async function(O,[I,D,B]){const K=Wb(O),Q=await Xb(I,D),F=await Xb(B,D);switch(`${Q}-${F}`){case"false-false":return{mode:await D.mode(),path:K,oid:await D.oid(),type:await D.type()};case"false-true":return B?{mode:await B.mode(),path:K,oid:await B.oid(),type:await B.type()}:void 0;case"true-false":return I?{mode:await I.mode(),path:K,oid:await I.oid(),type:await I.type()}:void 0;case"true-true":{if(I&&D&&B&&await I.type()==="blob"&&await D.type()==="blob"&&await B.type()==="blob")return ste({fs:e,gitdir:r,path:K,ours:I,base:D,theirs:B,ourName:u,baseName:c,theirName:f,mergeDriver:g}).then(async W=>{if(W.cleanMerge)m||a.insert({filepath:O,oid:W.mergeResult.oid,stage:0});else if(x.push(O),S.push(O),!m){const U=await D.oid(),he=await I.oid(),ae=await B.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:U,stage:1}),a.insert({filepath:O,oid:he,stage:2}),a.insert({filepath:O,oid:ae,stage:3})}return W.mergeResult});if(D&&!I&&B&&await D.type()==="blob"&&await B.type()==="blob"){if(x.push(O),E.push(O),!m){const W=await D.oid(),U=await B.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:W,stage:1}),a.insert({filepath:O,oid:U,stage:3})}return{mode:await B.mode(),oid:await B.oid(),type:"blob",path:K}}if(D&&I&&!B&&await D.type()==="blob"&&await I.type()==="blob"){if(x.push(O),C.push(O),!m){const W=await D.oid(),U=await I.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:W,stage:1}),a.insert({filepath:O,oid:U,stage:2})}return{mode:await I.mode(),oid:await I.oid(),type:"blob",path:K}}if(D&&!I&&!B&&await D.type()==="blob")return;throw new Dh}}},reduce:x.length!==0&&(!n||m)?void 0:async(O,I)=>{const D=I.filter(Boolean);if(O&&!(O&&O.type==="tree"&&D.length===0)){if(D.length>0){const K=new Ri(D).toObject(),Q=await Ni({fs:e,gitdir:r,type:"tree",object:K,dryRun:h});O.oid=Q}return O}}});return x.length!==0?(n&&!m&&await Qu({fs:e,cache:t,dir:n,gitdir:r,trees:[yo({ref:A.oid})],map:async function(O,[I]){const D=`${n}/${O}`;if(await I.type()==="blob"){const B=await I.mode(),K=new TextDecoder().decode(await I.content());await e.write(D,K,{mode:B})}return!0}}),new jh(x,S,E,C)):A.oid}async function ste({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:o,theirName:s,baseName:u,dryRun:c,mergeDriver:f=ite}){const h="blob",m=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const g=Gt.from(await r.content()).toString("utf8"),w=Gt.from(await a.content()).toString("utf8"),v=Gt.from(await i.content()).toString("utf8"),{mergedText:_,cleanMerge:x}=await f({branches:[u,o,s],contents:[w,g,v],path:n}),S=await Ni({fs:e,gitdir:t,type:"blob",object:Gt.from(_,"utf8"),dryRun:c});return{cleanMerge:x,mergeResult:{mode:m,path:n,oid:S,type:h}}}async function FM({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:m,committer:g,signingKey:w,onSign:v,mergeDriver:_}){a===void 0&&(a=await wc({fs:e,gitdir:r,fullname:!0})),a=await Ot.expand({fs:e,gitdir:r,ref:a}),i=await Ot.expand({fs:e,gitdir:r,ref:i});const x=await Ot.resolve({fs:e,gitdir:r,ref:a}),S=await Ot.resolve({fs:e,gitdir:r,ref:i}),E=await wk({fs:e,cache:t,gitdir:r,oids:[x,S]});if(E.length!==1)throw new Dh;const C=E[0];if(C===S)return{oid:x,alreadyMerged:!0};if(o&&C===x)return!u&&!c&&await Ot.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(s)throw new H0;const A=await Ra.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async I=>ote({fs:e,cache:t,dir:n,gitdir:r,index:I,ourOid:x,theirOid:S,baseOid:C,ourName:ad(a),baseName:"base",theirName:ad(i),dryRun:u,abortOnConflict:f,mergeDriver:_}));if(A instanceof jh)throw A;return h||(h=`Merge branch '${ad(i)}' into ${ad(a)}`),{oid:await Tw({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:A,parent:[x,S],author:m,committer:g,signingKey:w,onSign:v,dryRun:u,noUpdateBranch:c}),tree:A,mergeCommit:!0}}}async function LM({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:u,gitdir:c,ref:f,url:h,remote:m,remoteRef:g,prune:w,pruneTags:v,fastForward:_,fastForwardOnly:x,corsProxy:S,singleBranch:E,headers:C,author:A,committer:O,signingKey:I}){try{if(!f){const K=await wc({fs:e,gitdir:c});if(!K)throw new ki("ref");f=K}const{fetchHead:D,fetchHeadDescription:B}=await vk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:c,corsProxy:S,ref:f,url:h,remote:m,remoteRef:g,singleBranch:E,headers:C,prune:w,pruneTags:v});await FM({fs:e,cache:t,gitdir:c,ours:f,theirs:D,fastForward:_,fastForwardOnly:x,message:`Merge ${B}`,author:A,committer:O,signingKey:I,dryRun:!1,noUpdateBranch:!1}),await bk({fs:e,cache:t,onProgress:r,dir:u,gitdir:c,ref:f,remote:m,noCheckout:!1})}catch(D){throw D.caller="git.pull",D}}async function lte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,url:f,remote:h,remoteRef:m,corsProxy:g,singleBranch:w,headers:v={},cache:_={}}){try{Je("fs",e),Je("http",t),Je("gitdir",u);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await LM({fs:new nn(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:g,singleBranch:w,headers:v,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function ute({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,remote:f,remoteRef:h,url:m,corsProxy:g,depth:w=null,since:v=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:A=!1,pruneTags:O=!1,cache:I={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",u),await vk({fs:new nn(e),cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,gitdir:u,ref:c,remote:f,remoteRef:h,url:m,corsProxy:g,depth:w,since:v,exclude:_,relative:x,tags:S,singleBranch:E,headers:C,prune:A,pruneTags:O})}catch(D){throw D.caller="git.fetch",D}}async function cte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oids:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await wk({fs:new nn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function $M({fs:e,filepath:t}){if(await e.exists(At.join(t,".git")))return t;{const n=rh(t);if(n===t)throw new vr(`git root for ${t}`);return $M({fs:e,filepath:n})}}async function dte({fs:e,filepath:t}){try{return Je("fs",e),Je("filepath",t),await $M({fs:new nn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function fte({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await zm({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function hte({fs:e,gitdir:t,path:n}){return(await sa.get({fs:e,gitdir:t})).getall(n)}async function pte({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await hte({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function mte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1}){try{Je("http",e),Je("url",i);const c=await Rw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),f={capabilities:[...c.capabilities]};for(const[h,m]of c.refs){const g=h.split("/"),w=g.pop();let v=f;for(const _ of g)v[_]=v[_]||{},v=v[_];v[w]=m}for(const[h,m]of c.symrefs){const g=h.split("/"),w=g.pop();let v=f;for(const _ of g)v[_]=v[_]||{},v=v[_];v[w]=m}return f}catch(u){throw u.caller="git.getRemoteInfo",u}}function BM(e,t,n,r){const a=[];for(const[i,o]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const u=i.replace("^{}",""),c=a[a.length-1],f=c.ref===u?c:a.find(h=>h.ref===u);if(f===void 0)throw new Error("I did not expect this to happen");f.peeled=o}continue}const s={ref:i,oid:o};n&&e.symrefs.has(i)&&(s.target=e.symrefs.get(i)),a.push(s)}return a}async function gte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2}){try{Je("http",e),Je("url",i);const f=await Rw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(f.protocolVersion===2)return{protocolVersion:f.protocolVersion,capabilities:f.capabilities2};const h={};for(const m of f.capabilities){const[g,w]=m.split("=");w?h[g]=w:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:BM(f,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function yte({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Oh.wrap({type:e,object:t})),r=await Ll(t)),{oid:r,object:t}}async function bte({object:e}){try{Je("object",e),typeof e=="string"?e=Gt.from(e,"utf8"):e=Gt.from(e);const t="blob",{oid:n,object:r}=await yte({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function vte({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=At.join(r,i);const o=await e.read(i),s=c=>Lr({fs:e,cache:t,gitdir:a,oid:c}),u=await ah.fromPack({pack:o,getExternalRefDelta:s,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await u.toBuffer()),{oids:[...u.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function wte({fs:e,onProgress:t,dir:n,gitdir:r=At.join(n,".git"),filepath:a,cache:i={}}){try{return Je("fs",e),Je("dir",n),Je("gitdir",n),Je("filepath",a),await vte({fs:new nn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(o){throw o.caller="git.indexPack",o}}async function _te({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:At.join(n,".git"),defaultBranch:a="master"}){try{return Je("fs",e),Je("gitdir",r),t||Je("dir",n),await PM({fs:new nn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function zM({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const o=await Um.read({fs:e,gitdir:n});if(!r)throw new ki("oid");if(!a)throw new ki("ancestor");if(r===a)return!1;const s=[r],u=new Set;let c=0;for(;s.length;){if(c++===i)throw new G0(i);const f=s.shift(),{type:h,object:m}=await Lr({fs:e,cache:t,gitdir:n,oid:f});if(h!=="commit")throw new hi(f,h,"commit");const g=Fr.from(m).parse();for(const w of g.parent)if(w===a)return!0;if(!o.has(f))for(const w of g.parent)u.has(w)||(s.push(w),u.add(w))}return!1}async function xte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:o={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),Je("ancestor",a),await zM({fs:new nn(e),cache:o,gitdir:n,oid:r,ancestor:a,depth:i})}catch(s){throw s.caller="git.isDescendent",s}}async function Ste({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r),Ph.isIgnored({fs:new nn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function Ete({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r}){try{return Je("fs",e),Je("gitdir",n),Ot.listBranches({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function Cte({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Ot.resolve({gitdir:t,fs:e,ref:n}),i=[];return await UM({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Ra.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function UM({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:o}=await Fh({fs:e,cache:t,gitdir:n,oid:r});for(const s of o)s.type==="tree"?await UM({fs:e,cache:t,gitdir:n,oid:s.oid,filenames:a,prefix:At.join(i,s.path)}):a.push(At.join(i,s.path))}async function kte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),await Cte({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function Ate({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Ot.resolve({gitdir:n,fs:e,ref:r})}catch(s){if(s instanceof vr)return[]}return(await Fh({fs:e,cache:t,gitdir:n,oid:a})).tree.map(s=>({target:s.path,note:s.oid}))}async function Tte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ate({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function Rte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("gitdir",n),Ot.listRefs({fs:new nn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function Nte({fs:e,gitdir:t}){const n=await sa.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function Ite({fs:e,dir:t,gitdir:n=At.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),await Nte({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Ote(e){const t=Xr.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...o]=r.split(" "),s={ref:i,oid:a};for(const u of o){const[c,f]=u.split(":");c==="symref-target"?s.target=f:c==="peeled"&&(s.peeled=f)}n.push(s)}return n}async function Dte({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(Xr.encode(`command=ls-refs
`)),r.push(Xr.encode(`agent=${Nw.agent}
`)),(n||t||e)&&r.push(Xr.delim()),n&&r.push(Xr.encode("peel")),t&&r.push(Xr.encode("symrefs")),e&&r.push(Xr.encode(`ref-prefix ${e}`)),r.push(Xr.flush()),r}async function jte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2,prefix:c,symrefs:f,peelTags:h}){try{Je("http",e),Je("url",i);const m=await Qb.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(m.protocolVersion===1)return BM(m,c,f,h);const g=await Dte({prefix:c,symrefs:f,peelTags:h}),w=await Qb.connect({http:e,auth:m.auth,headers:o,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,body:g});return Ote(w.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function Mte({fs:e,dir:t,gitdir:n=At.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),Ot.listTags({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Pte(e,t){return e.committer.timestamp-t.committer.timestamp}const Fte="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function b4({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===Fte)return;const i=r;let o;const s=await sh({fs:e,cache:t,gitdir:n,oid:r}),u=s.tree;return a===s.oid?o=s.path:(o=await qM({fs:e,cache:t,gitdir:n,tree:u,fileId:a,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function qM({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:o=[],parentPath:s=""}){const u=r.entries().map(function(c){let f;return c.oid===a?(f=At.join(s,c.path),o.push(f)):c.type==="tree"&&(f=Lr({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:h}){return qM({fs:e,cache:t,gitdir:n,tree:Ri.from(h),fileId:a,oid:i,filepaths:o,parentPath:At.join(s,c.path)})})),f});return await Promise.all(u),o}async function Lte({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),f=[],h=await Um.read({fs:e,gitdir:n}),m=await Ot.resolve({fs:e,gitdir:n,ref:a}),g=[await uh({fs:e,cache:t,gitdir:n,oid:m})];let w,v,_;function x(S){_&&r&&f.push(S)}for(;g.length>0;){const S=g.pop();if(c!==void 0&&S.commit.committer.timestamp<=c)break;if(r){let E;try{E=await tg({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),v&&w!==E&&f.push(v),w=E,v=S,_=!0}catch(C){if(C instanceof vr){let A=u&&w;if(A&&(A=await b4({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:w}),A))if(Array.isArray(A)){if(v){const O=await b4({fs:e,cache:t,gitdir:n,oid:v.commit.tree,fileId:w});if(Array.isArray(O))if(A=A.filter(I=>O.indexOf(I)===-1),A.length===1)A=A[0],r=A,v&&f.push(v);else{A=!1,v&&f.push(v);break}}}else r=A,v&&f.push(v);if(!A){if(_&&w&&(f.push(v),!s))break;if(!s&&!u)throw C}v=S,_=!1}else throw C}}else f.push(S);if(i!==void 0&&f.length===i){x(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await uh({fs:e,cache:t,gitdir:n,oid:E});g.map(A=>A.oid).includes(C.oid)||g.push(C)}g.length===0&&x(S),g.sort((E,C)=>Pte(E.commit,C.commit))}return f}async function $te({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:o,force:s,follow:u,cache:c={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",a),await Lte({fs:new nn(e),cache:c,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u})}catch(f){throw f.caller="git.log",f}}async function Bte({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:m,committer:g,signingKey:w,cache:v={},mergeDriver:_}){try{Je("fs",e),w&&Je("onSign",t);const x=new nn(e),S=await ec({fs:x,gitdir:r,author:m});if(!S&&(!s||!o))throw new Ya("author");const E=await lh({fs:x,gitdir:r,author:S,committer:g});if(!E&&(!s||!o))throw new Ya("committer");return await FM({fs:x,cache:v,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o,fastForwardOnly:s,dryRun:u,noUpdateBranch:c,abortOnConflict:f,message:h,author:S,committer:E,signingKey:w,onSign:t,mergeDriver:_})}catch(x){throw x.caller="git.merge",x}}const zte={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function HM({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),oids:a}){const i=new oM,o=[];function s(f,h){const m=Gt.from(f,h);o.push(m),i.update(m)}async function u({stype:f,object:h}){const m=zte[f];let g=h.length,w=g>15?128:0;const v=g&15;g=g>>>4;let _=(w|m|v).toString(16);for(s(_,"hex");w;)w=g>127?128:0,_=w|g&127,s(oE(2,_),"hex"),g=g>>>7;s(Gt.from(await SM(h)))}s("PACK"),s("00000002","hex"),s(oE(8,a.length),"hex");for(const f of a){const{type:h,object:m}=await Lr({fs:e,cache:t,gitdir:r,oid:f});await u({object:m,stype:h})}const c=i.digest();return o.push(c),o}async function Ute({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await HM({fs:e,cache:t,gitdir:n,oids:r}),o=Gt.from(await Jb(i)),u=`pack-${o.slice(-20).toString("hex")}.pack`;return a?(await e.write(At.join(n,`objects/pack/${u}`),o),{filename:u}):{filename:u,packfile:new Uint8Array(o)}}async function qte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await Ute({fs:new nn(e),cache:i,gitdir:n,oids:r,write:a})}catch(o){throw o.caller="git.packObjects",o}}async function Hte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,url:f,remote:h,remoteRef:m,prune:g=!1,pruneTags:w=!1,fastForward:v=!0,fastForwardOnly:_=!1,corsProxy:x,singleBranch:S,headers:E={},author:C,committer:A,signingKey:O,cache:I={}}){try{Je("fs",e),Je("gitdir",u);const D=new nn(e),B=await ec({fs:D,gitdir:u,author:C});if(!B)throw new Ya("author");const K=await lh({fs:D,gitdir:u,author:B,committer:A});if(!K)throw new Ya("committer");return await LM({fs:D,cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:m,fastForward:v,fastForwardOnly:_,corsProxy:x,singleBranch:S,headers:E,author:B,committer:K,signingKey:O,prune:g,pruneTags:w})}catch(D){throw D.caller="git.pull",D}}async function Vte({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),start:a,finish:i}){const o=await Um.read({fs:e,gitdir:r}),s=new Set,u=new Set;for(const h of a)s.add(await Ot.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await Ot.resolve({fs:e,gitdir:r,ref:h});u.add(m)}catch{}const c=new Set;async function f(h){c.add(h);const{type:m,object:g}=await Lr({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const v=li.from(g).headers().object;return f(v)}if(m!=="commit")throw new hi(h,m,"commit");if(!o.has(h)){const v=Fr.from(g).headers().parent;for(h of v)!u.has(h)&&!c.has(h)&&await f(h)}}for(const h of s)await f(h);return c}async function US({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),oids:a}){const i=new Set;async function o(s){if(i.has(s))return;i.add(s);const{type:u,object:c}=await Lr({fs:e,cache:t,gitdir:r,oid:s});if(u==="tag"){const h=li.from(c).headers().object;await o(h)}else if(u==="commit"){const h=Fr.from(c).headers().tree;await o(h)}else if(u==="tree"){const f=Ri.from(c);for(const h of f)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const s of a)await o(s);return i}async function Gte(e){const t={};let n="";const r=Xr.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new K0('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const o of i){if(o.trim()==="")continue;const s=o.slice(0,2),u=o.slice(3);let c=u.indexOf(" ");c===-1&&(c=u.length);const f=u.slice(0,c),h=u.slice(c+1);t.refs[f]={ok:s==="ok",error:h}}return t}async function Wte({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(Xr.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(Xr.flush()),n}async function Kte({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:u,gitdir:c,ref:f,remoteRef:h,remote:m,url:g,force:w=!1,delete:v=!1,corsProxy:_,headers:x={}}){const S=f||await wc({fs:e,gitdir:c});if(typeof S>"u")throw new ki("ref");const E=await sa.get({fs:e,gitdir:c});m=m||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=g||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof C>"u")throw new ki("remote OR url");const A=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new ki("remoteRef");_===void 0&&(_=await E.get("http.corsProxy"));const O=await Ot.expand({fs:e,gitdir:c,ref:S}),I=v?"0000000000000000000000000000000000000000":await Ot.resolve({fs:e,gitdir:c,ref:O}),D=Rw.getRemoteHelperFor({url:C}),B=await D.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:_,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),K=B.auth;let Q;if(!A)Q=O;else try{Q=await Ot.expandAgainstMap({ref:A,map:B.refs})}catch(Y){if(Y instanceof vr)Q=A.startsWith("refs/")?A:`refs/heads/${A}`;else throw Y}const F=B.refs.get(Q)||"0000000000000000000000000000000000000000";if(u&&!await u({remote:m,url:C,localRef:{ref:v?"(delete)":O,oid:I},remoteRef:{ref:Q,oid:F}}))throw new Mh;const W=!B.capabilities.has("no-thin");let U=new Set;if(!v){const Y=[...B.refs.values()];let ne=new Set;if(F!=="0000000000000000000000000000000000000000"){const be=await wk({fs:e,cache:t,gitdir:c,oids:[I,F]});for(const Ee of be)Y.push(Ee);W&&(ne=await US({fs:e,cache:t,gitdir:c,oids:be}))}if(!Y.includes(I)){const be=await Vte({fs:e,cache:t,gitdir:c,start:[I],finish:Y});U=await US({fs:e,cache:t,gitdir:c,oids:be})}if(W){try{const be=await Ot.resolve({fs:e,gitdir:c,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:Ee}=await Ot.resolveAgainstMap({ref:be.replace(`refs/remotes/${m}/`,""),fullref:be,map:B.refs}),De=[Ee];for(const Pe of await US({fs:e,cache:t,gitdir:c,oids:De}))ne.add(Pe)}catch{}for(const be of ne)U.delete(be)}if(I===F&&(w=!0),!w){if(O.startsWith("refs/tags")&&F!=="0000000000000000000000000000000000000000")throw new oh("tag-exists");if(I!=="0000000000000000000000000000000000000000"&&F!=="0000000000000000000000000000000000000000"&&!await zM({fs:e,cache:t,gitdir:c,oid:I,ancestor:F,depth:-1}))throw new oh("not-fast-forward")}}const he=DM([...B.capabilities],["report-status","side-band-64k",`agent=${Nw.agent}`]),ae=await Wte({capabilities:he,triplets:[{oldoid:F,oid:I,fullRef:Q}]}),re=v?[]:await HM({fs:e,cache:t,gitdir:c,oids:[...U]}),ee=await D.connect({http:n,onProgress:r,corsProxy:_,service:"git-receive-pack",url:C,auth:K,headers:x,body:[...ae,...re]}),{packfile:se,progress:V}=await MM.demux(ee.body);if(a){const Y=jM(V);rg(Y,async ne=>{await a(ne)})}const X=await Gte(se);if(ee.headers&&(X.headers=ee.headers),m&&X.ok&&X.refs[Q].ok&&!O.startsWith("refs/tags")){const Y=`refs/remotes/${m}/${Q.replace("refs/heads","")}`;v?await Ot.deleteRef({fs:e,gitdir:c,ref:Y}):await Ot.writeRef({fs:e,gitdir:c,ref:Y,value:I})}if(X.ok&&Object.values(X.refs).every(Y=>Y.ok))return X;{const Y=Object.entries(X.refs).filter(([ne,be])=>!be.ok).map(([ne,be])=>`
  - ${ne}: ${be.error}`).join("");throw new V0(Y,X)}}async function Zte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,dir:u,gitdir:c=At.join(u,".git"),ref:f,remoteRef:h,remote:m="origin",url:g,force:w=!1,delete:v=!1,corsProxy:_,headers:x={},cache:S={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",c),await Kte({fs:new nn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,gitdir:c,ref:f,remoteRef:h,remote:m,url:g,force:w,delete:v,corsProxy:_,headers:x})}catch(E){throw E.caller="git.push",E}}async function VM({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=li.from(i).parse().object,VM({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new hi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function GM({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await tg({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await VM({fs:e,cache:t,gitdir:n,oid:r})}async function Yte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await GM({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readBlob",o}}async function WM({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await uh({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Xte({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Ot.resolve({gitdir:n,fs:e,ref:r}),{blob:o}=await GM({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return o}async function Jte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oid",a),await Xte({fs:new nn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(o){throw o.caller="git.readNote",o}}async function Qte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:o=void 0,cache:s={}}){try{Je("fs",e),Je("gitdir",n),Je("oid",r);const u=new nn(e);i!==void 0&&(r=await tg({fs:u,cache:s,gitdir:n,oid:r,filepath:i}));const f=await Lr({fs:u,cache:s,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(f.oid=r,a==="parsed")switch(f.format="parsed",f.type){case"commit":f.object=Fr.from(f.object).parse();break;case"tree":f.object=Ri.from(f.object).entries();break;case"blob":o?f.object=f.object.toString(o):(f.object=new Uint8Array(f.object),f.format="content");break;case"tag":f.object=li.from(f.object).parse();break;default:throw new hi(f.oid,f.type,"blob|commit|tag|tree")}else(f.format==="deflated"||f.format==="wrapped")&&(f.type=f.format);return f}catch(u){throw u.caller="git.readObject",u}}async function ene({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new hi(r,a,"tag");const o=li.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function tne({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await ene({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function nne({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Fh({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readTree",o}}async function rne({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r),await Ra.acquire({fs:new nn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function ane({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u}){let c;try{c=await Ot.resolve({gitdir:r,fs:e,ref:a})}catch(w){if(!(w instanceof vr))throw w}let h=(await Fh({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(w=>w.path!==i);const m=await ng({fs:e,gitdir:r,tree:h});return await Tw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:m,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:u})}async function ine({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u,cache:c={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i);const f=new nn(e),h=await ec({fs:f,gitdir:r,author:o});if(!h)throw new Ya("author");const m=await lh({fs:f,gitdir:r,author:h,committer:s});if(!m)throw new Ya("committer");return await ane({fs:f,cache:c,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:m,signingKey:u})}catch(f){throw f.caller="git.removeNote",f}}async function one({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==Ds.clean(r))throw new Zo(r,Ds.clean(r));if(n!==Ds.clean(n))throw new Zo(n,Ds.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await Ot.exists({fs:e,gitdir:t,ref:o}))throw new ts("branch",r,!1);const u=await Ot.resolve({fs:e,gitdir:t,ref:i,depth:1});await Ot.writeRef({fs:e,gitdir:t,ref:o,value:u}),await Ot.deleteRef({fs:e,gitdir:t,ref:i});const f=await wc({fs:e,gitdir:t,fullname:!0})===i;(a||f)&&await Ot.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function sne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oldref",a),await one({fs:new nn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function KM({gitdir:e,type:t,object:n}){return Ll(Oh.wrap({type:t,object:n}))}async function lne({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const o=new nn(e);let s,u;try{s=await Ot.resolve({fs:o,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(s)try{s=await tg({fs:o,cache:i,gitdir:n,oid:s,filepath:r})}catch{s=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const f=t&&await o.read(At.join(t,r));f&&(u=await KM({gitdir:n,type:"blob",object:f}),s===u&&(c=await o.lstat(At.join(t,r)))),await Ra.acquire({fs:o,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),s&&h.insert({filepath:r,stats:c,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function une({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,depth:a}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ot.resolve({fs:new nn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function cne({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r,value:a,append:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("path",r);const o=new nn(e),s=await sa.get({fs:o,gitdir:n});i?await s.append(r,a):await s.set(r,a),await sa.save({fs:o,gitdir:n,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function ZM({fs:e,gitdir:t,commit:n}){const r=Fr.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class ev{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=ev.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${o} ${s}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const dne={stage:Ih,workdir:eg};let qS;async function ch(e,t){return qS===void 0&&(qS=new Bm),qS.acquire(e,t)}async function fne(e,t,n,r,a=null){const i=At.join(n,r),o=await e.lstat(i);if(!o)throw new vr(i);if(o.isDirectory())throw new Cn(`${i}: file expected, but found directory`);const s=a?await yM({fs:e,gitdir:t,oid:a}):void 0;let u=s?a:void 0;return s||await ch({fs:e,gitdir:t,currentFilepath:i},async()=>{const c=o.isSymbolicLink()?await e.readlink(i).then(EM):await e.read(i);if(c===null)throw new vr(i);u=await Ni({fs:e,gitdir:t,type:"blob",object:c})}),u}async function hne({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(a));i.oid=await ng({fs:e,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await fne(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function v4({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?dne[g]():g),o=[],f=await Qu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[w,v])=>{if(!(g==="."||await Ph.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&v)return(!w||await w.oid()!==await v.oid()&&await v.oid()!==void 0)&&o.push([w,v]),{mode:await v.mode(),path:g,oid:await v.oid(),type:await v.type()}},reduce:async(g,w)=>(w=w.filter(Boolean),g?(g.children=w,g):w.length>0?w:void 0),iterate:async(g,w)=>{const v=[];for(const _ of w){const[x,S]=_;a?S&&(await e.exists(`${t}/${S.toString()}`)?v.push(_):o.push([null,S])):x&&(S?v.push(_):o.push([x,null]))}return v.length?Promise.all(v.map(g)):[]}});if(o.length===0||f.length===0)return null;const m=(await hne({fs:e,dir:t,gitdir:n,entries:f})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return ng({fs:e,gitdir:n,tree:m})}async function pne({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const o=[],s=[],u=await Qu({fs:e,cache:{},dir:t,gitdir:n,trees:[yo({ref:a}),yo({ref:r})],map:async(c,[f,h])=>{if(c==="."||await Ph.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const m=h?await h.type():await f.type();if(m!=="tree"&&m!=="blob")return;if(!h&&f){const w=m==="tree"?"rmdir":"rm";return m==="tree"&&o.push(c),m==="blob"&&i&&s.push({filepath:c,oid:await f.oid()}),{method:w,filepath:c}}const g=await h.oid();if(!f||await f.oid()!==g)return m==="tree"?{method:"mkdir",filepath:c}:(i&&s.push({filepath:c,oid:g,stats:await e.lstat(At.join(t,c))}),{method:"write",filepath:c,oid:g})}});await ch({fs:e,gitdir:n,dirRemoved:o,ops:u},async()=>{for(const c of u){const f=At.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(f);break;case"mkdir":await e.mkdir(f);break;case"rm":await e.rm(f);break;case"write":if(!o.some(h=>f.startsWith(h))){const{object:h}=await Lr({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(f)&&await e.rm(f),await e.write(f,h)}break}}}),await Ra.acquire({fs:e,gitdir:n,cache:{}},async c=>{s.forEach(({filepath:f,stats:h,oid:m})=>{c.insert({filepath:f,stats:h,oid:m})})})}class Il{constructor({fs:t,dir:n,gitdir:r=At.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return At.join(this.gitdir,Il.refStash)}get refLogsStashPath(){return At.join(this.gitdir,Il.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await ec({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Ya("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return ZM({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Zo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?uh({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Ot.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Il.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=ev.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await ch({filepath:i,entry:a},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return ev.getStashReflogEntry(r,t)}}async function mne({fs:e,dir:t,gitdir:n,message:r=""}){const a=new Il({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await wc({fs:e,gitdir:n,fullname:!1}),o=await Ot.resolve({fs:e,gitdir:n,ref:"HEAD"}),u=(await WM({fs:e,dir:t,gitdir:n,oid:o})).commit.message,c=[o];let f=null,h=yo({ref:"HEAD"});const m=await v4({fs:e,dir:t,gitdir:n,treePair:[yo({ref:"HEAD"}),"stage"]});if(m){const _=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:c});c.push(_),f=m,h=Ih()}const g=await v4({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const _=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[c[c.length-1]]});c.push(_),f=g}if(!f||!m&&!g)throw new vr("changes, nothing to stash");const w=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${u}`,v=await a.writeStashCommit({message:w,tree:f,parent:c});return await a.writeStashRef(v),await a.writeStashReflogEntry({stashCommit:v,message:w}),await IM({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),v}async function YM({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new Il({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){const c=(await uh({fs:e,cache:{},gitdir:n,oid:o[s+1]})).commit.message.startsWith("stash-Index");await pne({fs:e,dir:t,gitdir:n,stashCommit:o[s+1],parentCommit:o[s],wasStaged:c})}}async function XM({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new Il({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const o=a.refStashPath;await ch(o,async()=>{await e.exists(o)&&await e.rm(o)});const s=await a.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(r,1);const u=a.refLogsStashPath;await ch({reflogEntries:s,stashReflogPath:u,stashMgr:a},async()=>{if(s.length){await e.write(u,s.join(`
`),"utf8");const c=s[s.length-1].split(" ")[1];await a.writeStashRef(c)}else await e.rm(u)})}async function gne({fs:e,dir:t,gitdir:n}){return new Il({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function yne({fs:e,dir:t,gitdir:n}){const r=new Il({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await ch(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function bne({fs:e,dir:t,gitdir:n,refIdx:r=0}){await YM({fs:e,dir:t,gitdir:n,refIdx:r}),await XM({fs:e,dir:t,gitdir:n,refIdx:r})}async function vne({fs:e,dir:t,gitdir:n=At.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Je("fs",e),Je("dir",t),Je("gitdir",n),Je("op",r);const o={push:mne,apply:YM,drop:XM,list:gne,clear:yne,pop:bne},s=["apply","drop","pop"];try{const u=new nn(e);["refs","logs","logs/refs"].map(h=>At.join(n,h)).forEach(async h=>{await u.exists(h)||await u.mkdir(h)});const f=o[r];if(f){if(s.includes(r)&&i<0)throw new Zo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await f({fs:u,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(u){throw u.caller="git.stash",u}}async function wne({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const i=new nn(e);if(await Ph.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const s=await _ne({fs:i,cache:a,gitdir:n}),u=await JM({fs:i,cache:a,gitdir:n,tree:s,path:r}),c=await Ra.acquire({fs:i,gitdir:n,cache:a},async function(v){for(const _ of v)if(_.path===r)return _;return null}),f=await i.lstat(At.join(t,r)),h=u!==null,m=c!==null,g=f!==null,w=async()=>{if(m&&!Gb(c,f))return c.oid;{const v=await i.read(At.join(t,r)),_=await KM({gitdir:n,type:"blob",object:v});return m&&c.oid===_&&f.size!==-1&&Ra.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:f,oid:_})}),_}};if(!h&&!g&&!m)return"absent";if(!h&&!g&&m)return"*absent";if(!h&&g&&!m)return"*added";if(!h&&g&&m)return await w()===c.oid?"added":"*added";if(h&&!g&&!m)return"deleted";if(h&&!g&&m)return u===c.oid,"*deleted";if(h&&g&&!m)return await w()===u?"*undeleted":"*undeletemodified";if(h&&g&&m){const v=await w();return v===u?v===c.oid?"unmodified":"*unmodified":v===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function JM({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const o of r)if(o.path===i){if(a.length===0)return o.oid;const{type:s,object:u}=await Lr({fs:e,cache:t,gitdir:n,oid:o.oid});if(s==="tree"){const c=Ri.from(u);return JM({fs:e,cache:t,gitdir:n,tree:c,path:a})}if(s==="blob")throw new hi(o.oid,s,"blob",a.join("/"))}return null}async function _ne({fs:e,cache:t,gitdir:n}){let r;try{r=await Ot.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof vr)return[]}const{tree:a}=await Fh({fs:e,cache:t,gitdir:n,oid:r});return a}async function xne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:o={},ignored:s=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const u=new nn(e);return await Qu({fs:u,cache:o,dir:t,gitdir:n,trees:[yo({ref:r}),eg(),Ih()],map:async function(c,[f,h,m]){if(!f&&!m&&h&&!s&&await Ph.isIgnored({fs:u,dir:t,filepath:c})||!a.some(O=>NM(c,O)))return null;if(i&&!i(c))return;const[g,w,v]=await Promise.all([f&&f.type(),h&&h.type(),m&&m.type()]),_=[g,w,v].includes("blob");if((g==="tree"||g==="special")&&!_)return;if(g==="commit")return null;if((w==="tree"||w==="special")&&!_)return;if(v==="commit")return null;if((v==="tree"||v==="special")&&!_)return;const x=g==="blob"?await f.oid():void 0,S=v==="blob"?await m.oid():void 0;let E;g!=="blob"&&w==="blob"&&v!=="blob"?E="42":w==="blob"&&(E=await h.oid());const C=[void 0,x,E,S],A=C.map(O=>C.indexOf(O));return A.shift(),[c,...A]}})}catch(u){throw u.caller="git.statusMatrix",u}}async function Sne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,object:a,force:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const o=new nn(e);if(r===void 0)throw new ki("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const s=await Ot.resolve({fs:o,gitdir:n,ref:a||"HEAD"});if(!i&&await Ot.exists({fs:o,gitdir:n,ref:r}))throw new ts("tag",r);await Ot.writeRef({fs:o,gitdir:n,ref:r,value:s})}catch(o){throw o.caller="git.tag",o}}async function Ene({fs:e,dir:t,gitdir:n=At.join(t,".git"),cache:r={},filepath:a,oid:i,mode:o,add:s,remove:u,force:c}){try{Je("fs",e),Je("gitdir",n),Je("filepath",a);const f=new nn(e);if(u)return await Ra.acquire({fs:f,gitdir:n,cache:r},async function(m){if(!c){const g=await f.lstat(At.join(t,a));if(g){if(g.isDirectory())throw new Ju("directory");return}}m.has({filepath:a})&&m.delete({filepath:a})});let h;if(!i){if(h=await f.lstat(At.join(t,a)),!h)throw new vr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Ju("directory")}return await Ra.acquire({fs:f,gitdir:n,cache:r},async function(m){if(!s&&!m.has({filepath:a}))throw new vr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{g=h;const w=g.isSymbolicLink()?await f.readlink(At.join(t,a)):await f.read(At.join(t,a));i=await Ni({fs:f,gitdir:n,type:"blob",format:"content",object:w})}return m.insert({filepath:a,oid:i,stats:g}),i})}catch(f){throw f.caller="git.updateIndex",f}}function Cne(){try{return Nw.version}catch(e){throw e.caller="git.version",e}}async function kne({fs:e,dir:t,gitdir:n=At.join(t,".git"),trees:r,map:a,reduce:i,iterate:o,cache:s={}}){try{return Je("fs",e),Je("gitdir",n),Je("trees",r),await Qu({fs:new nn(e),cache:s,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:o})}catch(u){throw u.caller="git.walk",u}}async function Ane({fs:e,dir:t,gitdir:n=At.join(t,".git"),blob:r}){try{return Je("fs",e),Je("gitdir",n),Je("blob",r),await Ni({fs:new nn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function Tne({fs:e,dir:t,gitdir:n=At.join(t,".git"),commit:r}){try{return Je("fs",e),Je("gitdir",n),Je("commit",r),await ZM({fs:new nn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function Rne({fs:e,dir:t,gitdir:n=At.join(t,".git"),type:r,object:a,format:i="parsed",oid:o,encoding:s=void 0}){try{const u=new nn(e);if(i==="parsed"){switch(r){case"commit":a=Fr.from(a).toObject();break;case"tree":a=Ri.from(a).toObject();break;case"blob":a=Gt.from(a,s);break;case"tag":a=li.from(a).toObject();break;default:throw new hi(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await Ni({fs:u,gitdir:n,type:r,object:a,oid:o,format:i}),o}catch(u){throw u.caller="git.writeObject",u}}async function Nne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:o=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r),Je("value",a);const s=new nn(e);if(r!==Ds.clean(r))throw new Zo(r,Ds.clean(r));if(!i&&await Ot.exists({fs:s,gitdir:n,ref:r}))throw new ts("ref",r);o?await Ot.writeSymbolicRef({fs:s,gitdir:n,ref:r,value:a}):(a=await Ot.resolve({fs:s,gitdir:n,ref:a}),await Ot.writeRef({fs:s,gitdir:n,ref:r,value:a}))}catch(s){throw s.caller="git.writeRef",s}}async function Ine({fs:e,gitdir:t,tag:n}){const r=li.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function One({fs:e,dir:t,gitdir:n=At.join(t,".git"),tag:r}){try{return Je("fs",e),Je("gitdir",n),Je("tag",r),await Ine({fs:new nn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function Dne({fs:e,dir:t,gitdir:n=At.join(t,".git"),tree:r}){try{return Je("fs",e),Je("gitdir",n),Je("tree",r),await ng({fs:new nn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Si={Errors:see,STAGE:Ih,TREE:yo,WORKDIR:eg,add:Cee,abortMerge:_ee,addNote:Aee,addRemote:Tee,annotatedTag:Nee,branch:Oee,checkout:IM,clone:Hee,commit:Vee,getConfig:fte,getConfigAll:pte,setConfig:cne,currentBranch:Gee,deleteBranch:Kee,deleteRef:Zee,deleteRemote:Xee,deleteTag:Qee,expandOid:rte,expandRef:ate,fastForward:lte,fetch:ute,findMergeBase:cte,findRoot:dte,getRemoteInfo:mte,getRemoteInfo2:gte,hashBlob:bte,indexPack:wte,init:_te,isDescendent:xte,isIgnored:Ste,listBranches:Ete,listFiles:kte,listNotes:Tte,listRefs:Rte,listRemotes:Ite,listServerRefs:jte,listTags:Mte,log:$te,merge:Bte,packObjects:qte,pull:Hte,push:Zte,readBlob:Yte,readCommit:WM,readNote:Jte,readObject:Qte,readTag:tne,readTree:nne,remove:rne,removeNote:ine,renameBranch:sne,resetIndex:lne,updateIndex:Ene,resolveRef:une,status:wne,statusMatrix:xne,tag:Sne,version:Cne,walk:kne,writeBlob:Ane,writeCommit:Tne,writeObject:Rne,writeRef:Nne,writeTag:One,writeTree:Dne,stash:vne};function jne(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Mne(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:jne(e)}async function Pne(e,t){const n=Mne(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Fne(e){let t=0;const n=[];await Pne(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function Lne(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function $ne({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await Fne(a));const i=await fetch(t,{method:n,headers:r,body:a}),o=i.body&&i.body.getReader?Lne(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[s,u]of i.headers.entries())r[s]=u;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var _k={request:$ne};const Zy="system",w4="You are a helpful AI assistant.",_4=.7,x4=null,S4=null,E4=null,C4=0,k4=0,A4=!0,Yy=!0,Xy=30,Jy=10,T4=null,R4=null,ga=Ul(ql(e=>({theme:Zy,globalSystemPrompt:w4,temperature:_4,maxTokens:x4,topP:S4,topK:E4,presencePenalty:C4,frequencyPenalty:k4,enableAdvancedSettings:A4,enableStreamingMarkdown:Yy,streamingRenderFPS:Xy,streamingCodeRenderFPS:Jy,gitUserName:T4,gitUserEmail:R4,setTheme:t=>{e({theme:t}),Wt.saveSetting("theme",t)},setGlobalSystemPrompt:t=>{e({globalSystemPrompt:t}),Wt.saveSetting("globalSystemPrompt",t)},setTemperature:t=>{e({temperature:t}),Wt.saveSetting("temperature",t)},setMaxTokens:t=>{e({maxTokens:t}),Wt.saveSetting("maxTokens",t)},setTopP:t=>{e({topP:t}),Wt.saveSetting("topP",t)},setTopK:t=>{e({topK:t}),Wt.saveSetting("topK",t)},setPresencePenalty:t=>{e({presencePenalty:t}),Wt.saveSetting("presencePenalty",t)},setFrequencyPenalty:t=>{e({frequencyPenalty:t}),Wt.saveSetting("frequencyPenalty",t)},setEnableAdvancedSettings:t=>{e({enableAdvancedSettings:t}),Wt.saveSetting("enableAdvancedSettings",t)},setEnableStreamingMarkdown:t=>{e({enableStreamingMarkdown:t}),Wt.saveSetting("enableStreamingMarkdown",t)},setStreamingRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingRenderFPS:n}),Wt.saveSetting("streamingRenderFPS",n)},setStreamingCodeRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingCodeRenderFPS:n}),Wt.saveSetting("streamingCodeRenderFPS",n)},setGitUserName:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserName:n}),Wt.saveSetting("gitUserName",n)},setGitUserEmail:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserEmail:n}),Wt.saveSetting("gitUserEmail",n)},loadSettings:async()=>{try{const[t,n,r,a,i,o,s,u,c,f,h,m,g,w]=await Promise.all([Wt.loadSetting("theme",Zy),Wt.loadSetting("temperature",_4),Wt.loadSetting("maxTokens",x4),Wt.loadSetting("topP",S4),Wt.loadSetting("topK",E4),Wt.loadSetting("presencePenalty",C4),Wt.loadSetting("frequencyPenalty",k4),Wt.loadSetting("globalSystemPrompt",w4),Wt.loadSetting("enableAdvancedSettings",A4),Wt.loadSetting("enableStreamingMarkdown",Yy),Wt.loadSetting("streamingRenderFPS",Xy),Wt.loadSetting("streamingCodeRenderFPS",Jy),Wt.loadSetting("gitUserName",T4),Wt.loadSetting("gitUserEmail",R4)]);e({theme:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,globalSystemPrompt:u,enableAdvancedSettings:c,enableStreamingMarkdown:f,streamingRenderFPS:h,streamingCodeRenderFPS:m,gitUserName:g,gitUserEmail:w})}catch(t){console.error("SettingsStore: Error loading settings",t)}},resetGeneralSettings:async()=>{try{e({theme:Zy,enableStreamingMarkdown:Yy,streamingRenderFPS:Xy,streamingCodeRenderFPS:Jy}),await Promise.all([Wt.saveSetting("theme",Zy),Wt.saveSetting("enableStreamingMarkdown",Yy),Wt.saveSetting("streamingRenderFPS",Xy),Wt.saveSetting("streamingCodeRenderFPS",Jy)]),dt.success("General settings reset to defaults.")}catch(t){console.error("SettingsStore: Error resetting general settings",t),dt.error("Failed to reset general settings.")}}}))),xk="https://cors.isomorphic-git.org",tc=async e=>{const t=Gn(e);if(t!=="/")try{await P0(t,{recursive:!0})}catch(n){if(n instanceof Error&&n.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${t}`);return}throw console.error(`[VFS Op] Failed to create directory ${t}:`,n),dt.error(`Error creating directory "${oa(t)}": ${n instanceof Error?n.message:String(n)}`),n}},QM=async e=>{const{gitUserName:t,gitUserEmail:n}=ga.getState();if(!t||!n)return dt.error("Git user name and email must be configured in Settings before committing."),!1;try{const r=await Si.getConfig({fs:Fa,dir:e,path:"user.name"}),a=await Si.getConfig({fs:Fa,dir:e,path:"user.email"});return r!==t&&await Si.setConfig({fs:Fa,dir:e,path:"user.name",value:t}),a!==n&&await Si.setConfig({fs:Fa,dir:e,path:"user.email",value:n}),!0}catch(r){return console.error("[VFS Op] Error checking/setting Git config:",r),dt.error(`Failed to configure Git user: ${r instanceof Error?r.message:String(r)}`),!1}},Sk=e=>(console.warn(`[VFS Op] Git Auth requested for ${e}. No credentials configured.`),null),Ek=(e,t)=>(console.error(`[VFS Op] Git Auth FAILED for ${e}`,t),dt.error(`Authentication failed for ${e}`),null),Ck=(e,t)=>{console.log(`[VFS Op] Git Auth SUCCESS for ${e}`,t)},Bne=async e=>{try{const t={backend:HJ,name:`litechat_vfs_${e}`};return await PJ(t),Fa}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),dt.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},kk=async e=>{const t=Gn(e);try{try{await _o(t)}catch(o){if(o.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${t}`),await tc(t),[];throw o}const r=(await yc(t)).map(async o=>{const s=Bu(t,o);try{const u=await _o(s);return{name:o,path:s,isDirectory:u.isDirectory(),size:u.size,lastModified:u.mtime}}catch(u){return console.error(`[VFS Op] Failed to stat ${s}:`,u),null}});return(await Promise.all(r)).filter(o=>o!==null)}catch(n){throw console.error(`[VFS Op] Failed to list directory ${t}:`,n),dt.error(`Error listing files: ${n instanceof Error?n.message:String(n)}`),n}},Lh=async e=>{const t=Gn(e);try{const n=await j0(t);return Ei.emit(Vb.VFS_FILE_READ,{path:t}),n}catch(n){throw console.error(`[VFS Op] Failed to read file ${t}:`,n),dt.error(`Error reading file "${oa(t)}": ${n instanceof Error?n.message:String(n)}`),n}},Iw=async(e,t)=>{const n=Gn(e),r=Gv(n);try{r!=="/"&&await tc(r),await M0(n,t),Ei.emit(Vb.VFS_FILE_WRITTEN,{path:n})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${n}:`,a),dt.error(`Error writing file "${oa(n)}": ${a instanceof Error?a.message:String(a)}`)),a}},Ak=async(e,t=!1)=>{const n=Gn(e);if(n==="/")throw dt.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await _o(n)).isDirectory()?(await F0(n,{recursive:t}),Ei.emit(Vb.VFS_FILE_DELETED,{path:n})):(await D0(n),Ei.emit(Vb.VFS_FILE_DELETED,{path:n})),dt.success(`"${oa(n)}" deleted.`)}catch(r){if(r instanceof Error&&r.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${n}`);return}throw console.error(`[VFS Op] Failed to delete ${n}:`,r),dt.error(`Error deleting "${oa(n)}": ${r instanceof Error?r.message:String(r)}`),r}},e8=async e=>{await tc(e)},zne=async(e,t)=>{try{const n=await Lh(e),r=new Blob([n]),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a;const o=Gn(e);i.download=t||oa(o),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch(n){console.error(`[VFS Op] Failed to initiate download for ${e}:`,n),n instanceof Error&&n.message.includes("Error reading file")||dt.error(`Download failed: ${n instanceof Error?n.message:String(n)}`)}},t8=async(e,t)=>{const n=Gn(t);let r=0,a=0;const i=Array.from(e);try{await tc(n);for(const o of i){const s=Bu(n,o.name);try{const u=await o.arrayBuffer();await Iw(s,new Uint8Array(u)),r++}catch(u){a++,console.error(`[VFS Op] Failed to upload ${o.name}:`,u)}}}catch(o){a=i.length,console.error(`[VFS Op] Failed to prepare target directory ${n} for upload:`,o)}finally{a>0&&r>0?dt.warning(`Upload complete with issues. ${r} succeeded, ${a} failed.`):a===0&&r>0?dt.success(`Successfully uploaded ${r} file(s) to ${n==="/"?"root":oa(n)}.`):a>0&&r===0&&dt.error("Upload failed. Could not upload any files.")}},Une=async(e,t)=>{if(!e.name.toLowerCase().endsWith(".zip")){dt.error("Please select a valid ZIP file.");return}const n=Gn(t);let r;try{await tc(n),r=await iM.loadAsync(e);const a=Object.values(r.files),i=await Promise.allSettled(a.map(async c=>{const f=Bu(n,c.name);if(c.dir)await tc(f);else{const h=await c.async("uint8array");await Iw(f,h)}return{name:c.name,isDir:c.dir}}));let o=0,s=0,u=0;i.forEach(c=>{c.status==="fulfilled"&&c.value?c.value.isDir?s++:o++:c.status==="rejected"&&(u++,console.error("[VFS Op] ZIP Extraction item failed:",c.reason))}),u>0?dt.warning(`Finished extracting "${e.name}". ${o+s} items succeeded, ${u} failed.`):dt.success(`Successfully extracted ${o} files and ${s} folders from "${e.name}" to ${n==="/"?"root":oa(n)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),dt.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},N4=async(e,t="/")=>{const n=new iM,r=Gn(t),a=oa(r)||"root";try{try{if(!(await _o(r)).isDirectory()){dt.error(`Cannot export: "${a}" is not a directory.`);return}}catch(f){f instanceof Error&&f.code==="ENOENT"?dt.error(`Cannot export: Path "${a}" not found.`):dt.error(`Cannot export: Error accessing path "${a}". ${f instanceof Error?f.message:String(f)}`);return}const i=async(f,h)=>{const m=await kk(f);for(const g of m)if(g.isDirectory){if(g.name===".git")continue;const w=h.folder(g.name);if(w)await i(g.path,w);else throw new Error(`Failed to create subfolder ${g.name} in zip.`)}else{const w=await Lh(g.path);h.file(g.name,w)}};await i(r,n);const o=await n.generateAsync({type:"blob"}),s=URL.createObjectURL(o),u=document.createElement("a");u.href=s;const c=`vfs_${a}_export.zip`;u.download=e||c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s),dt.success(`"${a}" exported as ${u.download}.`)}catch(i){console.error("[VFS Op] Failed to download all as zip:",i),i instanceof Error&&(i.message.includes("Error listing files")||i.message.includes("Error reading file")||i.message.includes("Cannot export"))||dt.error(`ZIP export failed: ${i instanceof Error?i.message:String(i)}`)}},qne=async(e,t)=>{const n=Gn(e),r=Gn(t);if(n==="/"||r==="/")throw dt.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(n!==r)try{const a=Gv(r);a!=="/"&&await tc(a),await sk(n,r),dt.success(`Renamed "${oa(n)}" to "${oa(r)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||dt.error(`Rename failed: Original item "${oa(n)}" not found.`):a instanceof Error&&a.code==="EEXIST"?dt.error(`Rename failed: An item named "${oa(r)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||dt.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${n} to ${r}:`,a),a}},Hne=async e=>{const t=Gn(e),n=Bu(t,".git");try{return(await _o(n)).isDirectory()}catch(r){return r instanceof Error&&r.code==="ENOENT"||console.error(`[VFS Op] Error checking for .git in ${t}:`,r),!1}},Tk=async(e,t,n)=>{const r=Gn(e),a=oa(t.replace(/\/$/,"").replace(/\.git$/,"")),i=Bu(r,a);try{try{await _o(i),dt.error(`Directory "${a}" already exists in target location.`);return}catch(o){if(o.code!=="ENOENT")throw o}await tc(r),await Si.clone({fs:Fa,http:_k,dir:i,corsProxy:xk,url:t,ref:n||void 0,singleBranch:!!n,depth:10,onAuth:Sk,onAuthFailure:Ek,onAuthSuccess:Ck,onProgress:o=>{o.phase==="counting objects"&&o.total?console.log(`Clone progress: ${o.phase} ${o.loaded}/${o.total}`):o.phase==="receiving objects"&&o.total?console.log(`Clone progress: ${o.phase} ${o.loaded}/${o.total}`):console.log(`Clone progress: ${o.phase}`)}}),dt.success(`Repository "${a}" cloned successfully into ${i}.`)}catch(o){console.error(`[VFS Op] Git clone failed for ${t}:`,o),dt.error(`Git clone failed: ${o instanceof Error?o.message:String(o)}`);try{await F0(i,{recursive:!0,force:!0})}catch(s){console.warn(`[VFS Op] Failed cleanup ${i}:`,s)}throw o}},n8=async e=>{const t=Gn(e);try{await Si.init({fs:Fa,dir:t}),dt.success(`Initialized empty Git repository in "${oa(t)}"`)}catch(n){throw console.error(`[VFS Op] Git init failed for ${t}:`,n),dt.error(`Git init failed: ${n instanceof Error?n.message:String(n)}`),n}},Rk=async(e,t)=>{const n=Gn(e);try{if(!await QM(n))throw new Error("Git user configuration is missing or invalid.");const a=await Si.statusMatrix({fs:Fa,dir:n});let i=!1;for(const[s,u,c]of a)c===2&&(await Si.add({fs:Fa,dir:n,filepath:s}),i=!0),u!==0&&c===0&&(await Si.remove({fs:Fa,dir:n,filepath:s}),i=!0);if(!i){dt.info("No changes detected to commit.");return}const o=await Si.commit({fs:Fa,dir:n,message:t,author:{name:ga.getState().gitUserName,email:ga.getState().gitUserEmail}});dt.success(`Changes committed: ${o.substring(0,7)}`)}catch(r){throw console.error(`[VFS Op] Git commit failed for ${n}:`,r),dt.error(`Git commit failed: ${r instanceof Error?r.message:String(r)}`),r}},Nk=async e=>{const t=Gn(e);try{if(!await QM(t))throw new Error("Git user configuration is missing or invalid.");const r=await Si.currentBranch({fs:Fa,dir:t});if(!r)throw new Error("Current branch not found.");await Si.pull({fs:Fa,http:_k,dir:t,corsProxy:xk,ref:r,singleBranch:!0,author:{name:ga.getState().gitUserName,email:ga.getState().gitUserEmail},onAuth:Sk,onAuthFailure:Ek,onAuthSuccess:Ck}),dt.success(`Pulled latest changes for "${oa(t)}"`)}catch(n){throw console.error(`[VFS Op] Git pull failed for ${t}:`,n),dt.error(`Git pull failed: ${n instanceof Error?n.message:String(n)}`),n}},Ik=async e=>{const t=Gn(e);try{const n=await Si.push({fs:Fa,http:_k,dir:t,corsProxy:xk,onAuth:Sk,onAuthFailure:Ek,onAuthSuccess:Ck});if(n.ok)dt.success(`Pushed changes successfully for "${oa(t)}"`);else throw new Error(n.error||"Push failed")}catch(n){throw console.error(`[VFS Op] Git push failed for ${t}:`,n),dt.error(`Git push failed: ${n instanceof Error?n.message:String(n)}`),n}},r8=async e=>{const t=Gn(e);console.log(`[VFS Op] Git Status on ${t}`);try{const n=await Si.statusMatrix({fs:Fa,dir:t});console.log("Git Status:",n);const r=n.map(([a,i,o,s])=>{let u="";return o===0?u="deleted":i===0&&o===2?u="new file":i===1&&o===2?u="modified":i===1&&o===1?u="unmodified":u=`h:${i} w:${o} s:${s}`,`${a}: ${u}`}).join(`
`);dt.info(`Git Status for "${oa(t)}":
${r||"No changes"}`,{duration:15e3})}catch(n){throw console.error(`[VFS Op] Git status failed for ${t}:`,n),dt.error(`Git status failed: ${n instanceof Error?n.message:String(n)}`),n}},sE=Fa,Vne=1024*5,Gne=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},Wne=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},Kne=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],Zne=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:Kne.some(r=>n.endsWith(r))},Yne=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=R.useState(null),[i,o]=R.useState(null),[s,u]=R.useState(!1),c=e.type||"application/octet-stream",f=Zne(e.name,c),h=c.startsWith("image/"),m=c.startsWith("audio/"),g=c.startsWith("video/");R.useEffect(()=>{let x=null;return o(null),!f&&e.contentBase64?(x=Gne(e.contentBase64,c),x||o("Failed to decode file content for preview."),a(x)):a(null),()=>{x&&(URL.revokeObjectURL(x),a(null))}},[e.contentBase64,c,f]),R.useEffect(()=>{f&&e.contentText&&e.contentText.length>Vne?o(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):f&&e.contentText===void 0&&o("Text content missing from metadata.")},[e.contentText,e.size,f]);const w=async()=>{if(e.source==="vfs"){dt.info("File is already in VFS.");return}const x=Wne(e);if(!x){dt.error("Cannot add to VFS: Failed to reconstruct file data.");return}u(!0);try{await t8([x],"/"),dt.success(`"${e.name}" added to VFS root.`)}catch(S){console.error("Failed to add file to VFS:",S),dt.error(`Failed to add "${e.name}" to VFS.`)}finally{u(!1)}},v=()=>f?y.jsx(YU,{className:"h-5 w-5 text-blue-500"}):h?y.jsx(_q,{className:"h-5 w-5 text-purple-500"}):m?y.jsx(Rq,{className:"h-5 w-5 text-green-500"}):g?y.jsx(sH,{className:"h-5 w-5 text-orange-500"}):y.jsx(KU,{className:"h-5 w-5 text-muted-foreground"}),_=()=>i?y.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[y.jsx(Ms,{className:"h-4 w-4"}),y.jsx("span",{children:i})]}):f&&e.contentText!==void 0?y.jsx(TC,{lang:c==="text/markdown"?"markdown":"text",code:e.contentText}):h&&r?y.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):m&&r?y.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):g&&r?y.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."});return y.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-2",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[v(),y.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),y.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",Vv(e.size),")"]}),e.source==="vfs"&&e.path&&y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsxs("span",{className:"text-xs text-blue-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),y.jsx(On,{children:y.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),!n&&t&&y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.source==="direct"&&y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:w,disabled:s,"aria-label":"Add to VFS",children:s?y.jsx(Jn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(LO,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{children:"Add to VFS"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:y.jsx(zs,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{children:"Remove from Prompt"})]})})]})]}),y.jsx("div",{className:Dt("p-2 max-h-80 overflow-y-auto"),children:_()})]})},Xne=({interaction:e,className:t})=>{var v,_,x;const[n,r]=R.useState(!1),[a,i]=R.useState(!1),[o,s]=R.useState(!1),u=(v=e.prompt)!=null&&v.content&&typeof e.prompt.content=="string"?e.prompt.content:"",c=((x=(_=e.prompt)==null?void 0:_.metadata)==null?void 0:x.attachedFiles)||[],f=u||c.length>0,h=R.useCallback(async()=>{if(u)try{await navigator.clipboard.writeText(u),i(!0),dt.success("Prompt text copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(S){dt.error("Failed to copy prompt text."),console.error("Clipboard copy failed:",S)}},[u]),m=R.useCallback(async()=>{try{await navigator.clipboard.writeText(e.id),s(!0),dt.success("Interaction ID copied to clipboard!"),setTimeout(()=>s(!1),1500)}catch(S){dt.error("Failed to copy interaction ID."),console.error("Clipboard copy failed:",S)}},[e.id]),g=()=>r(S=>!S),w=R.useMemo(()=>u?u.split(`
`).slice(0,3).join(`
`):"",[u]);return y.jsxs("div",{className:Dt("flex items-start gap-3 my-2 group",t),children:[y.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-primary/20 text-primary flex items-center justify-center mt-1",children:y.jsx(iH,{className:"h-5 w-5"})}),y.jsxs("div",{className:"p-3 border rounded-md shadow-sm bg-muted/50 flex-grow min-w-0 relative",children:[y.jsxs("div",{className:"interaction-card-actions-sticky",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:g,"aria-label":n?"Unfold prompt":"Fold prompt",disabled:!f,children:y.jsx(Wv,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:n?"Unfold":"Fold"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:m,"aria-label":"Copy interaction ID",children:o?y.jsx(vo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx($O,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Copy ID"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:h,"aria-label":"Copy prompt text",disabled:!u,children:a?y.jsx(vo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(rC,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Copy Text"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:()=>dt.info("Edit functionality coming soon!"),"aria-label":"Edit prompt (coming soon)",children:y.jsx(F2,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Edit (Soon)"})]})})]}),y.jsx("div",{className:"text-sm",children:n?y.jsxs("div",{className:"folded-content-preview cursor-pointer",onClick:g,children:[u?y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground",children:w}):y.jsx("span",{className:"text-muted-foreground italic",children:"[No text content]"}),c.length>0&&y.jsxs("span",{className:"text-muted-foreground text-xs ml-1",children:["(+",c.length," file(s))"]})]}):y.jsxs(y.Fragment,{children:[u?y.jsx("pre",{className:"whitespace-pre-wrap break-words mb-2",children:u}):!c.length&&y.jsx("span",{className:"text-muted-foreground italic",children:"[No text content]"}),c.length>0&&y.jsx("div",{className:"mt-2 space-y-2",children:c.map(S=>y.jsx(Yne,{fileMeta:S,isReadOnly:!0},S.id))})]})})]})]})},I4=e=>Symbol.iterator in e,O4=e=>"entries"in e,D4=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},Jne=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function Qne(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!I4(e)||!I4(t)?D4({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):O4(e)&&O4(t)?D4(e,t):Jne(e,t)}function Hn(e){const t=vt.useRef(void 0);return n=>{const r=e(n);return Qne(t.current,r)?t.current:t.current=r}}const ere=({interactionId:e,onStop:t,className:n})=>{const r=a=>{a.stopPropagation(),t(e)};return y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"destructive",size:"icon",className:Dt("h-6 w-6",n),onClick:r,"aria-label":"Stop generation",children:y.jsx(Jq,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:y.jsx("p",{children:"Stop Generation"})})]})})};function j4(e,t){let n,r,a;return function(){n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-a>=t&&(e(),a=Date.now())},t-(Date.now()-a))):(e(),a=Date.now(),n=!0)}}const M4=e=>/```/.test(e),a8=R.memo(({interactionId:e})=>{const t=ar(m=>m.activeStreamBuffers[e]),{enableStreamingMarkdown:n,streamingRenderFPS:r,streamingCodeRenderFPS:a}=ga(Hn(m=>({enableStreamingMarkdown:m.enableStreamingMarkdown,streamingRenderFPS:m.streamingRenderFPS,streamingCodeRenderFPS:m.streamingCodeRenderFPS}))),[i,o]=R.useState(""),s=R.useRef(""),u=R.useRef(void 0),c=R.useRef(100),f=R.useRef(!1);R.useEffect(()=>{s.current=t??"",f.current=!0},[t]),R.useEffect(()=>{var v;const g=M4(s.current)?a:r,w=g>0?1e3/g:100;w!==c.current&&(c.current=w,u.current=j4(()=>{i!==s.current&&o(s.current),f.current=!1},w)),f.current&&((v=u.current)==null||v.call(u))},[t,r,a,i]),R.useEffect(()=>{const m=ar.getState().activeStreamBuffers[e]??"";s.current=m;const w=M4(m)?a:r,v=w>0?1e3/w:100;c.current=v,u.current=j4(()=>{i!==s.current&&o(s.current),f.current=!1},v),o(m),f.current=!1},[e,r,a]);const h=ZD(n?i:null);return n?y.jsx("div",{className:"text-sm markdown-content",children:h.map((m,g)=>typeof m=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:m}},g):m.type==="code"?y.jsx(TC,{lang:m.lang,code:m.code},g):null)}):y.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:i})});a8.displayName="StreamingContentView";const i8=R.memo(({interactionId:e,onStop:t})=>{const n=ar(Hn(u=>{var m,g,w;const c=u.interactions.find(v=>v.id===e),f=(((g=(m=c==null?void 0:c.metadata)==null?void 0:m.toolCalls)==null?void 0:g.length)??0)>0,h=!u.activeStreamBuffers[e];return c&&c.status==="STREAMING"?{index:c.index,type:c.type,modelId:(w=c.metadata)==null?void 0:w.modelId,hasToolCalls:f,showToolPlaceholder:f&&h}:null}));if(!n)return console.log(`[StreamingInteractionCard] Shell data not found or not streaming for ${e}, rendering null.`),null;const{index:r,type:a,modelId:i,hasToolCalls:o,showToolPlaceholder:s}=n;return y.jsxs("div",{className:Dt("p-3 my-2 border rounded-md shadow-sm bg-card border-dashed relative group"),children:[y.jsxs("div",{className:"text-xs text-muted-foreground mb-1 flex justify-between items-center",children:[y.jsxs("span",{className:"flex items-center gap-1.5",children:["Idx:",r," | ",a," | Streaming",y.jsxs("span",{className:"relative flex h-2 w-2",children:[y.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"}),y.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-sky-500"})]}),i&&y.jsxs("span",{className:"ml-1 text-blue-400",children:["(",i,")"]}),o&&y.jsxs("span",{className:"ml-2 flex items-center gap-1 text-orange-400",children:[y.jsx(lC,{className:"h-3 w-3"}),"(Using Tools...)"]})]}),y.jsx("div",{className:"interaction-card-actions-sticky",children:y.jsx(ere,{interactionId:e,onStop:t})})]}),y.jsx(a8,{interactionId:e}),s&&y.jsxs("div",{className:"mt-2 text-xs text-muted-foreground italic flex items-center gap-1",children:[y.jsx(Jn,{className:"h-3 w-3 animate-spin"}),"Executing tools..."]})]},e)});i8.displayName="StreamingInteractionCard";function Mr({className:e,...t}){return y.jsx("div",{"data-slot":"skeleton",className:Dt("bg-accent animate-pulse rounded-md",e),...t})}const tre=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onStopInteraction:i})=>{const o=ar(Hn(c=>new Set(c.streamingInteractionIds))),s=t.reduce((c,f)=>{if(f.type==="message.user_assistant"){const h=f.index??-1;(c[h]=c[h]||[]).push(f)}return c},{}),u=Object.keys(s).map(Number).filter(c=>!isNaN(c)&&c>=0).sort((c,f)=>c-f);return y.jsxs("div",{className:Dt(r),children:[u.map(c=>{const f=s[c]||[],h=f.sort((m,g)=>{var w,v;return(((w=g.startedAt)==null?void 0:w.getTime())??0)-(((v=m.startedAt)==null?void 0:v.getTime())??0)})[0];return h?y.jsxs(vt.Fragment,{children:[h.prompt&&y.jsx(Xne,{interaction:h}),(h.response!==null||h.status==="STREAMING")&&(o.has(h.id)?y.jsx(i8,{interactionId:h.id,onStop:i}):y.jsx(RZ,{interaction:h,allInteractionsInGroup:f,onRegenerate:a}))]},`${c}-${h.id}`):null}),n==="loading"&&y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsx(Mr,{className:"h-16 w-3/4 ml-auto rounded-md"}),y.jsx(Mr,{className:"h-12 w-3/4 mr-auto rounded-md"}),y.jsx(Mr,{className:"h-16 w-3/4 ml-auto rounded-md"}),y.jsx(Mr,{className:"h-12 w-3/4 mr-auto rounded-md"})]}),t.length===0&&n==="idle"&&!e&&y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select or start a new conversation."}),t.length===0&&n==="idle"&&e&&y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Send a message to start chatting."})]})},Qy=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0)).sort((i,o)=>(i.order??1/0)-(o.order??1/0));return a.length===0?null:y.jsx("div",{className:Dt(r),children:a.map(i=>{const o=n==="icon"?i.iconRenderer:i.renderer;return y.jsx(vt.Fragment,{children:o?o():null},i.id)})})},o8=6048e5,nre=864e5,P4=Symbol.for("constructDateFrom");function nc(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&P4 in e?e[P4](t):e instanceof Date?new e.constructor(t):new Date(t)}function ns(e,t){return nc(t||e,e)}let rre={};function Ow(){return rre}function qm(e,t){var s,u,c,f;const n=Ow(),r=(t==null?void 0:t.weekStartsOn)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,a=ns(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function tv(e,t){return qm(e,{...t,weekStartsOn:1})}function s8(e,t){const n=ns(e,t==null?void 0:t.in),r=n.getFullYear(),a=nc(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=tv(a),o=nc(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=tv(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function F4(e){const t=ns(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function are(e,...t){const n=nc.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function L4(e,t){const n=ns(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function ire(e,t,n){const[r,a]=are(n==null?void 0:n.in,e,t),i=L4(r),o=L4(a),s=+i-F4(i),u=+o-F4(o);return Math.round((s-u)/nre)}function ore(e,t){const n=s8(e,t),r=nc(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),tv(r)}function sre(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function lre(e){return!(!sre(e)&&typeof e!="number"||isNaN(+ns(e)))}function ure(e,t){const n=ns(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const cre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dre=(e,t,n)=>{let r;const a=cre[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function HS(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const fre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mre={date:HS({formats:fre,defaultWidth:"full"}),time:HS({formats:hre,defaultWidth:"full"}),dateTime:HS({formats:pre,defaultWidth:"full"})},gre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},yre=(e,t,n,r)=>gre[e];function rm(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const bre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_re={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Sre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ere=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Cre={ordinalNumber:Ere,era:rm({values:bre,defaultWidth:"wide"}),quarter:rm({values:vre,defaultWidth:"wide",argumentCallback:e=>e-1}),month:rm({values:wre,defaultWidth:"wide"}),day:rm({values:_re,defaultWidth:"wide"}),dayPeriod:rm({values:xre,defaultWidth:"wide",formattingValues:Sre,defaultFormattingWidth:"wide"})};function am(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?Are(s,h=>h.test(o)):kre(s,h=>h.test(o));let c;c=e.valueCallback?e.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(o.length);return{value:c,rest:f}}}function kre(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Are(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Tre(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const Rre=/^(\d+)(th|st|nd|rd)?/i,Nre=/\d+/i,Ire={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ore={any:[/^b/i,/^(a|c)/i]},Dre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jre={any:[/1/i,/2/i,/3/i,/4/i]},Mre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Fre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Lre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$re={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zre={ordinalNumber:Tre({matchPattern:Rre,parsePattern:Nre,valueCallback:e=>parseInt(e,10)}),era:am({matchPatterns:Ire,defaultMatchWidth:"wide",parsePatterns:Ore,defaultParseWidth:"any"}),quarter:am({matchPatterns:Dre,defaultMatchWidth:"wide",parsePatterns:jre,defaultParseWidth:"any",valueCallback:e=>e+1}),month:am({matchPatterns:Mre,defaultMatchWidth:"wide",parsePatterns:Pre,defaultParseWidth:"any"}),day:am({matchPatterns:Fre,defaultMatchWidth:"wide",parsePatterns:Lre,defaultParseWidth:"any"}),dayPeriod:am({matchPatterns:$re,defaultMatchWidth:"any",parsePatterns:Bre,defaultParseWidth:"any"})},Ure={code:"en-US",formatDistance:dre,formatLong:mre,formatRelative:yre,localize:Cre,match:zre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qre(e,t){const n=ns(e,t==null?void 0:t.in);return ire(n,ure(n))+1}function Hre(e,t){const n=ns(e,t==null?void 0:t.in),r=+tv(n)-+ore(n);return Math.round(r/o8)+1}function l8(e,t){var f,h,m,g;const n=ns(e,t==null?void 0:t.in),r=n.getFullYear(),a=Ow(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(m=a.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=nc((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=qm(o,t),u=nc((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=qm(u,t);return+n>=+s?r+1:+n>=+c?r:r-1}function Vre(e,t){var s,u,c,f;const n=Ow(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,a=l8(e,t),i=nc((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),qm(i,t)}function Gre(e,t){const n=ns(e,t==null?void 0:t.in),r=+qm(n,t)-+Vre(n,t);return Math.round(r/o8)+1}function cr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ou={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return cr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):cr(n+1,2)},d(e,t){return cr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return cr(e.getHours()%12||12,t.length)},H(e,t){return cr(e.getHours(),t.length)},m(e,t){return cr(e.getMinutes(),t.length)},s(e,t){return cr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return cr(a,t.length)}},Af={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$4={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Ou.y(e,t)},Y:function(e,t,n,r){const a=l8(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return cr(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):cr(i,t.length)},R:function(e,t){const n=s8(e);return cr(n,t.length)},u:function(e,t){const n=e.getFullYear();return cr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return cr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return cr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ou.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return cr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Gre(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):cr(a,t.length)},I:function(e,t,n){const r=Hre(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):cr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ou.d(e,t)},D:function(e,t,n){const r=qre(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):cr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return cr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return cr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return cr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Af.noon:r===0?a=Af.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Af.evening:r>=12?a=Af.afternoon:r>=4?a=Af.morning:a=Af.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ou.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ou.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ou.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ou.s(e,t)},S:function(e,t){return Ou.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return z4(r);case"XXXX":case"XX":return Qc(r);case"XXXXX":case"XXX":default:return Qc(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return z4(r);case"xxxx":case"xx":return Qc(r);case"xxxxx":case"xxx":default:return Qc(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+B4(r,":");case"OOOO":default:return"GMT"+Qc(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+B4(r,":");case"zzzz":default:return"GMT"+Qc(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return cr(r,t.length)},T:function(e,t,n){return cr(+e,t.length)}};function B4(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+cr(i,2)}function z4(e,t){return e%60===0?(e>0?"-":"+")+cr(Math.abs(e)/60,2):Qc(e,t)}function Qc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=cr(Math.trunc(r/60),2),i=cr(r%60,2);return n+a+t+i}const U4=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},u8=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Wre=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return U4(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",U4(r,t)).replace("{{time}}",u8(a,t))},Kre={p:u8,P:Wre},Zre=/^D+$/,Yre=/^Y+$/,Xre=["D","DD","YY","YYYY"];function Jre(e){return Zre.test(e)}function Qre(e){return Yre.test(e)}function eae(e,t,n){const r=tae(e,t,n);if(console.warn(r),Xre.includes(e))throw new RangeError(r)}function tae(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const nae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aae=/^'([^]*?)'?$/,iae=/''/g,oae=/[a-zA-Z]/;function q4(e,t,n){var f,h,m,g;const r=Ow(),a=r.locale??Ure,i=r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,s=ns(e,n==null?void 0:n.in);if(!lre(s))throw new RangeError("Invalid time value");let u=t.match(rae).map(w=>{const v=w[0];if(v==="p"||v==="P"){const _=Kre[v];return _(w,a.formatLong)}return w}).join("").match(nae).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const v=w[0];if(v==="'")return{isToken:!1,value:sae(w)};if($4[v])return{isToken:!0,value:w};if(v.match(oae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(u=a.localize.preprocessor(s,u));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(w=>{if(!w.isToken)return w.value;const v=w.value;(Qre(v)||Jre(v))&&eae(v,t,String(e));const _=$4[v[0]];return _(s,v,a.localize,c)}).join("")}function sae(e){const t=e.match(aae);return t?t[1].replace(iae,"'"):e}const lae=".litechat/conversations",uae=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${q4(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${q4(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,o,s,u,c,f,h;((a=r.prompt)!=null&&a.content||(s=(o=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:o.attachedFiles)!=null&&s.length)&&(n+=`## User (Index: ${r.index})

`,(u=r.prompt.metadata)!=null&&u.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${Vv(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((f=r.metadata)!=null&&f.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n},VS=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},Wl=Ul(ql((e,t)=>({conversations:[],projects:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},isLoading:!1,error:null,loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([Wt.loadConversations(),Wt.loadProjects(),Wt.loadSyncRepos()]),i={};n.forEach(o=>{i[o.id]="idle"}),e({conversations:n,projects:r,syncRepos:a,conversationSyncStatus:i,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=Po(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:n.metadata??{},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(o=>{o.conversations.some(s=>s.id===i.id)||(o.conversations.unshift(i),o.conversationSyncStatus[r]="idle")});try{const o=t().getConversationById(r);if(o)await Wt.saveConversation(o);else throw new Error("Failed to retrieve newly added conversation state");return r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),e(s=>({error:"Failed to save new conversation",conversations:s.conversations.filter(u=>u.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([u])=>u!==r))})),o}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(o=>{const s=o.conversations.findIndex(u=>u.id===n);s!==-1&&(Object.assign(o.conversations[s],{...r,updatedAt:new Date}),(r.title!==void 0||r.metadata!==void 0||r.syncRepoId!==void 0||r.projectId!==void 0)&&o.conversations[s].syncRepoId&&o.conversationSyncStatus[n]==="idle"&&(o.conversationSyncStatus[n]="needs-sync"))});const i=t().getConversationById(n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Wt.saveConversation(o)}catch(o){throw console.error("ConversationStore: Error updating conversation",o),e(s=>{const u=s.conversations.findIndex(c=>c.id===n);u!==-1&&(s.conversations[u]=a),s.conversationSyncStatus[n]==="needs-sync"&&(s.conversationSyncStatus[n]="idle"),s.error="Failed to save conversation update"}),o}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(o=>{const s=o.conversations.findIndex(u=>u.id===n);s!==-1&&(o.conversations[s]=a),o.conversationSyncStatus[n]==="needs-sync"&&(o.conversationSyncStatus[n]="idle"),o.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(o=>o.id===n);if(i){e(o=>({conversations:o.conversations.filter(s=>s.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([s])=>s!==n))}));try{await Wt.deleteConversation(n),await Wt.deleteInteractionsForConversation(n),r===n&&a==="conversation"&&ar.getState().setCurrentConversationId(null)}catch(o){throw console.error("ConversationStore: Error deleting conversation",o),e(s=>{i&&(s.conversations.push(i),s.conversationSyncStatus[n]="idle"),r===n&&a==="conversation"&&(s.selectedItemId=n,s.selectedItemType="conversation"),s.error="Failed to delete conversation"}),o}}},addProject:async n=>{const r=n.parentId??null,a=t().getProjectById(r),i=a?a.path:"/",o=n.name.trim(),s=Tb(i,o),u=Po(),c=new Date,f={id:u,path:s,createdAt:c,updatedAt:c,name:o,parentId:r,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,metadata:n.metadata??{}};e(h=>{h.projects.push(f)});try{const h=t().getProjectById(u);if(h){const m=JSON.parse(JSON.stringify(h));await Wt.saveProject(m)}else throw new Error("Failed to retrieve newly added project state");return u}catch(h){throw console.error("ConversationStore: Error adding project",h),h.name==="ConstraintError"?dt.error(`A project or folder named "${o}" already exists in this location.`):dt.error("Failed to save new project."),e(m=>({error:"Failed to save new project",projects:m.projects.filter(g=>g.id!==u)})),h}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ConversationStore: Project ${n} not found.`);return}let i=a.path,o=a.name;if(r.name!==void 0&&r.name!==a.name){o=r.name.trim();const u=t().getProjectById(a.parentId),c=u?u.path:"/";i=Tb(c,o)}e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&Object.assign(u.projects[c],{...r,name:o,path:i,updatedAt:new Date})});const s=t().getProjectById(n);if(s)try{const u=JSON.parse(JSON.stringify(s));await Wt.saveProject(u)}catch(u){throw console.error("ConversationStore: Error updating project",u),u.name==="ConstraintError"?dt.error(`A project or folder named "${o}" already exists in this location.`):dt.error("Failed to save project update."),e(c=>{const f=c.projects.findIndex(h=>h.id===n);f!==-1&&(c.projects[f]=a),c.error="Failed to save project update"}),u}else console.error("ConversationStore: Failed to retrieve updated project state after update."),e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&(u.projects[c]=a),u.error="Failed to save project update (state error)"})},deleteProject:async n=>{const r=t().selectedItemId,a=t().selectedItemType;if(!t().projects.find(c=>c.id===n))return;const o=new Set,s=new Set,u=c=>{o.add(c),t().projects.filter(f=>f.parentId===c).forEach(f=>u(f.id)),t().conversations.filter(f=>f.projectId===c).forEach(f=>s.add(f.id))};u(n),e(c=>({projects:c.projects.filter(f=>!o.has(f.id)),conversations:c.conversations.map(f=>s.has(f.id)?{...f,projectId:null}:f),selectedItemId:o.has(r??"")?null:r,selectedItemType:o.has(r??"")?null:a}));try{await Wt.deleteProject(n),o.has(r??"")&&ar.getState().setCurrentConversationId(null)}catch(c){throw console.error("ConversationStore: Error deleting project",c),e({error:"Failed to delete project. Please reload."}),c}},selectItem:(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),r==="conversation"?ar.getState().setCurrentConversationId(n):ar.getState().setCurrentConversationId(null)):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{try{const r=await n.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.conversation||!Array.isArray(a.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const i=a.conversation,o=a.interactions;if(!i.id||!i.title||!i.createdAt||!i.updatedAt)throw new Error("Invalid conversation data in import file.");const s=await t().addConversation({title:i.title||"Imported Chat",metadata:i.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(c=>Wt.saveInteraction({...c,conversationId:s,id:Po()}));await Promise.all(u),t().selectItem(s,"conversation"),dt.success("Conversation imported successfully.")}catch(r){throw console.error("ConversationStore: Error importing conversation",r),dt.error(`Import failed: ${r instanceof Error?r.message:String(r)}`),r}},exportConversation:async(n,r)=>{try{const a=t().conversations.find(c=>c.id===n);if(!a)throw new Error("Conversation not found.");const i=await Wt.loadInteractionsForConversation(n);let o,s;const u=a.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(r==="json"){const f=JSON.stringify({conversation:a,interactions:i},null,2);o=new Blob([f],{type:"application/json"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.json`}else if(r==="md"){const c=uae(a,i);o=new Blob([c],{type:"text/markdown"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");VS(o,s),dt.success(`Conversation exported as ${r.toUpperCase()}.`)}catch(a){throw console.error("ConversationStore: Error exporting conversation",a),dt.error(`Export failed: ${a instanceof Error?a.message:String(a)}`),a}},exportProject:async n=>{try{const r=t().getProjectById(n);if(!r)throw new Error("Project not found.");const a=t().projects,i=t().conversations,o=async m=>{const g=a.find(x=>x.id===m);if(!g)throw new Error(`Project ${m} not found in state.`);const w=a.filter(x=>x.parentId===m),v=i.filter(x=>x.projectId===m),_=[];for(const x of w)_.push(await o(x.id));for(const x of v){const S=await Wt.loadInteractionsForConversation(x.id);_.push({conversation:x,interactions:S})}return{project:g,children:_}},s=await o(n),u=JSON.stringify(s,null,2),c=new Blob([u],{type:"application/json"}),h=`litechat_project_${r.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${n.substring(0,6)}.json`;VS(c,h),dt.success(`Project "${r.name}" exported.`)}catch(r){throw console.error("ConversationStore: Error exporting project",r),dt.error(`Project export failed: ${r instanceof Error?r.message:String(r)}`),r}},exportAllConversations:async()=>{try{const n=t().conversations,r=[];for(const s of n){const u=await Wt.loadInteractionsForConversation(s.id);r.push({conversation:s,interactions:u})}const a=JSON.stringify(r,null,2),i=new Blob([a],{type:"application/json"}),o=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;VS(i,o),dt.success("All conversations exported.")}catch(n){throw console.error("ConversationStore: Error exporting conversations",n),dt.error(`Export failed: ${n instanceof Error?n.message:String(n)}`),n}},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Wt.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=Po(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(o=>{o.syncRepos.push(i)});try{const o=t().syncRepos.find(s=>s.id===r);if(o){const s=JSON.parse(JSON.stringify(o));await Wt.saveSyncRepo(s)}else throw new Error("Failed to retrieve newly added sync repo state");return dt.success(`Sync repository "${i.name}" added.`),r}catch(o){throw console.error("ConversationStore: Error adding sync repo",o),e(s=>({error:"Failed to save sync repository",syncRepos:s.syncRepos.filter(u=>u.id!==r)})),o}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(o=>o.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&Object.assign(o.syncRepos[s],{...r,updatedAt:new Date})});const i=t().syncRepos.find(o=>o.id===n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Wt.saveSyncRepo(o),dt.success(`Sync repository "${i.name}" updated.`)}catch(o){throw console.error("ConversationStore: Error updating sync repo",o),e(s=>{const u=s.syncRepos.findIndex(c=>c.id===n);u!==-1&&(s.syncRepos[u]=a),s.error="Failed to save sync repository update"}),o}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&(o.syncRepos[s]=a),o.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(a=>a.id===n);if(r){e(a=>({syncRepos:a.syncRepos.filter(i=>i.id!==n)}));try{await Wt.deleteSyncRepo(n),dt.success(`Sync repository "${r.name}" deleted.`)}catch(a){throw console.error("ConversationStore: Error deleting sync repo",a),e(i=>{r&&i.syncRepos.push(r),i.error="Failed to delete sync repository"}),a}}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,"idle"),dt.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)})},syncConversation:async n=>{var h,m;const{conversations:r,syncRepos:a,_setConversationSyncStatus:i,updateConversation:o}=t(),s=r.find(g=>g.id===n);if(!s){dt.error("Conversation not found for syncing.");return}if(!s.syncRepoId){dt.info("Conversation not linked to a sync repository.");return}const u=a.find(g=>g.id===s.syncRepoId);if(!u){dt.error("Sync repository configuration not found."),i(n,"error","Repo not found");return}i(n,"syncing");const c=Gn(`/synced_convos/${u.id}`),f=Bu(c,lae,`${n}.json`);try{let g=!1;try{await sE.promises.stat(Bu(c,".git")),g=!0}catch(S){if(S.code!=="ENOENT")throw S}if(g)dt.info(`Pulling latest changes for "${u.name}"...`),await Nk(c);else{dt.info(`Cloning repository "${u.name}" for first sync...`),await Tk(Gv(c),u.remoteUrl,u.branch);try{await sE.promises.stat(Bu(c,".git"))}catch{throw new Error(`Clone seemed successful but repo dir "${c}" not found.`)}}let w=null,v=null;try{const S=await Lh(f),E=new TextDecoder().decode(S);w=JSON.parse(E),v=(h=w==null?void 0:w.conversation)!=null&&h.updatedAt?new Date(w.conversation.updatedAt).getTime():null}catch(S){if(S.code==="ENOENT")console.log(`Conversation file ${f} not found in repo. Will push local version.`);else throw new Error(`Failed to read remote conversation file: ${S.message}`)}const _=s.updatedAt.getTime(),x=((m=s.lastSyncedAt)==null?void 0:m.getTime())??0;if(!w||_>(v??0)||_>x){dt.info("Local changes detected. Pushing to remote...");const S=await Wt.loadInteractionsForConversation(n),E={...s,lastSyncedAt:null},C=JSON.stringify({conversation:E,interactions:S},null,2);await Iw(f,C),await Rk(c,`Sync conversation: ${s.title} (${n})`),await Ik(c),await o(n,{lastSyncedAt:new Date}),i(n,"idle"),dt.success("Conversation synced successfully (pushed).")}else if(v&&v>_){dt.info("Remote changes detected. Updating local conversation...");const S={...w.conversation,lastSyncedAt:new Date};await Wt.saveConversation(S),await Wt.deleteInteractionsForConversation(n);const E=w.interactions.map(C=>Wt.saveInteraction({...C,conversationId:n}));await Promise.all(E),e(C=>{const A=C.conversations.findIndex(O=>O.id===n);A!==-1&&(C.conversations[A]=S)}),t().selectedItemId===n&&t().selectedItemType==="conversation"&&ar.getState().loadInteractions(n),i(n,"idle"),dt.success("Conversation synced successfully (pulled).")}else dt.info("Conversation already up-to-date."),await o(n,{lastSyncedAt:new Date}),i(n,"idle")}catch(g){console.error(`Sync failed for conversation ${n}:`,g);const w=g instanceof Error?g.message:String(g);dt.error(`Sync failed: ${w}`),i(n,"error",w)}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},getTopLevelProjectId:(n,r)=>{if(!n||!r)return null;if(r==="conversation"){const i=t().getConversationById(n);n=(i==null?void 0:i.projectId)??null,r="project"}if(r!=="project"||!n)return null;let a=t().getProjectById(n);for(;a!=null&&a.parentId;){const i=t().getProjectById(a.parentId);if(!i)return a.id;a=i}return(a==null?void 0:a.id)??null}}))),Uo=Ul(ql(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t]})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})}})));var c8="vercel.ai.error",cae=Symbol.for(c8),d8,dae=class f8 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[d8]=!0,this.name=t,this.cause=r}static isInstance(t){return f8.hasMarker(t,c8)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};d8=cae;var xn=dae,h8="AI_APICallError",p8=`vercel.ai.error.${h8}`,fae=Symbol.for(p8),m8,fa=class extends xn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:h8,message:t,cause:s}),this[m8]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return xn.hasMarker(t,p8)}};m8=fae;var g8="AI_EmptyResponseBodyError",y8=`vercel.ai.error.${g8}`,hae=Symbol.for(y8),b8,Ok=class extends xn{constructor({message:t="Empty response body"}={}){super({name:g8,message:t}),this[b8]=!0}static isInstance(t){return xn.hasMarker(t,y8)}};b8=hae;function ag(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var v8="AI_InvalidArgumentError",w8=`vercel.ai.error.${v8}`,pae=Symbol.for(w8),_8,Dk=class extends xn{constructor({message:t,cause:n,argument:r}){super({name:v8,message:t,cause:n}),this[_8]=!0,this.argument=r}static isInstance(t){return xn.hasMarker(t,w8)}};_8=pae;var x8="AI_InvalidPromptError",S8=`vercel.ai.error.${x8}`,mae=Symbol.for(S8),E8,wl=class extends xn{constructor({prompt:t,message:n,cause:r}){super({name:x8,message:`Invalid prompt: ${n}`,cause:r}),this[E8]=!0,this.prompt=t}static isInstance(t){return xn.hasMarker(t,S8)}};E8=mae;var C8="AI_InvalidResponseDataError",k8=`vercel.ai.error.${C8}`,gae=Symbol.for(k8),A8,Hf=class extends xn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:C8,message:n}),this[A8]=!0,this.data=t}static isInstance(t){return xn.hasMarker(t,k8)}};A8=gae;var T8="AI_JSONParseError",R8=`vercel.ai.error.${T8}`,yae=Symbol.for(R8),N8,rc=class extends xn{constructor({text:t,cause:n}){super({name:T8,message:`JSON parsing failed: Text: ${t}.
Error message: ${ag(n)}`,cause:n}),this[N8]=!0,this.text=t}static isInstance(t){return xn.hasMarker(t,R8)}};N8=yae;var I8="AI_LoadAPIKeyError",O8=`vercel.ai.error.${I8}`,bae=Symbol.for(O8),D8,eb=class extends xn{constructor({message:t}){super({name:I8,message:t}),this[D8]=!0}static isInstance(t){return xn.hasMarker(t,O8)}};D8=bae;var j8="AI_TooManyEmbeddingValuesForCallError",M8=`vercel.ai.error.${j8}`,vae=Symbol.for(M8),P8,jk=class extends xn{constructor(t){super({name:j8,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[P8]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return xn.hasMarker(t,M8)}};P8=vae;var F8="AI_TypeValidationError",L8=`vercel.ai.error.${F8}`,wae=Symbol.for(L8),$8,_ae=class lE extends xn{constructor({value:t,cause:n}){super({name:F8,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${ag(n)}`,cause:n}),this[$8]=!0,this.value=t}static isInstance(t){return xn.hasMarker(t,L8)}static wrap({value:t,cause:n}){return lE.isInstance(n)&&n.value===t?n:new lE({value:t,cause:n})}};$8=wae;var ac=_ae,B8="AI_UnsupportedFunctionalityError",z8=`vercel.ai.error.${B8}`,xae=Symbol.for(z8),U8,wr=class extends xn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:B8,message:n}),this[U8]=!0,this.functionality=t}static isInstance(t){return xn.hasMarker(t,z8)}};U8=xae;let Sae=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var Xc={exports:{}},H4;function Eae(){if(H4)return Xc.exports;H4=1;const e=typeof Gt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,u,c){c==null&&u!==null&&typeof u=="object"&&(c=u,u=void 0),e&&Gt.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const f=JSON.parse(s,u);if(f===null||typeof f!="object")return f;const h=c&&c.protoAction||"error",m=c&&c.constructorAction||"error";if(h==="ignore"&&m==="ignore")return f;if(h!=="ignore"&&m!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return f}else if(h!=="ignore"&&m==="ignore"){if(t.test(s)===!1)return f}else if(n.test(s)===!1)return f;return a(f,{protoAction:h,constructorAction:m,safe:c&&c.safe})}function a(s,{protoAction:u="error",constructorAction:c="error",safe:f}={}){let h=[s];for(;h.length;){const m=h;h=[];for(const g of m){if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(f===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(f===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const w in g){const v=g[w];v&&typeof v=="object"&&h.push(v)}}}return s}function i(s,u,c){const f=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,c)}finally{Error.stackTraceLimit=f}}function o(s,u){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return Xc.exports=i,Xc.exports.default=i,Xc.exports.parse=i,Xc.exports.safeParse=o,Xc.exports.scan=a,Xc.exports}var Cae=Eae();const rs=Qa(Cae);var kae={};function Fs(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Aae(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function Tae(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function Rae(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=Nae(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function Nae(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function ig(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Td=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Sae(n,t);if(e==null)return a;if(n.includes(r))throw new Dk({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Ts=Td();function Iae(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function Oae(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function yb(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Dae({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new eb({message:`${r} API key must be a string.`});if(typeof Vr>"u")throw new eb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=kae[t],e==null)throw new eb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new eb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var nv=Symbol.for("vercel.ai.validator");function jae(e){return{[nv]:!0,validate:e}}function Mae(e){return typeof e=="object"&&e!==null&&nv in e&&e[nv]===!0&&"validate"in e}function Pae(e){return Mae(e)?e:Fae(e)}function Fae(e){return jae(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Lae({value:e,schema:t}){const n=$h({value:e,schema:t});if(!n.success)throw ac.wrap({value:e,cause:n.error});return n.value}function $h({value:e,schema:t}){const n=Pae(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ac.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ac.wrap({value:e,cause:r})}}}function $ae({text:e,schema:t}){try{const n=rs.parse(e);return t==null?n:Lae({value:n,schema:t})}catch(n){throw rc.isInstance(n)||ac.isInstance(n)?n:new rc({text:e,cause:n})}}function cd({text:e,schema:t}){try{const n=rs.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=$h({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:rc.isInstance(n)?n:new rc({text:e,cause:n})}}}function V4(e){try{return rs.parse(e),!0}catch{return!1}}function Bae({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=$h({value:t[e],schema:n});if(!r.success)throw new Dk({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var zae=()=>globalThis.fetch,Yo=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Uae({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Uae=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=zae()})=>{try{const s=await o(e,{method:"POST",headers:Oae(t),body:n.content,signal:i}),u=ig(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw yb(f)||fa.isInstance(f)?f:new fa({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(yb(c)||fa.isInstance(c))?c:new fa({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(yb(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new fa({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},q8=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=ig(r);if(o.trim()==="")return{responseHeaders:s,value:new fa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=$ae({text:o,schema:e});return{responseHeaders:s,value:new fa({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new fa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},Mk=e=>async({response:t})=>{const n=ig(t);if(t.body==null)throw new Ok({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(Rae()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(cd({text:r,schema:e}))}}))}},Rd=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=cd({text:a,schema:e}),o=ig(t);if(!i.success)throw new fa({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:qae,atob:Hae}=globalThis;function H8(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=Hae(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function dh(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return qae(t)}function V8(e){return e==null?void 0:e.replace(/\/$/,"")}const Vae=Symbol("Let zodToJsonSchema decide on which parser to use"),G4={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Gae=e=>typeof e=="string"?{...G4,name:e}:{...G4,...e},Wae=e=>{const t=Gae(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function G8(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function dr(e,t,n,r,a){e[t]=n,G8(e,t,r,a)}var Zn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Zn||(Zn={}));var uE;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(uE||(uE={}));const Yt=Zn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Sl=e=>{switch(typeof e){case"undefined":return Yt.undefined;case"string":return Yt.string;case"number":return isNaN(e)?Yt.nan:Yt.number;case"boolean":return Yt.boolean;case"function":return Yt.function;case"bigint":return Yt.bigint;case"symbol":return Yt.symbol;case"object":return Array.isArray(e)?Yt.array:e===null?Yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Yt.promise:typeof Map<"u"&&e instanceof Map?Yt.map:typeof Set<"u"&&e instanceof Set?Yt.set:typeof Date<"u"&&e instanceof Date?Yt.date:Yt.object;default:return Yt.unknown}},Rt=Zn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Kae=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Wi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,u=0;for(;u<o.path.length;){const c=o.path[u];u===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(n(o))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}};return a(this),r}static assert(t){if(!(t instanceof Wi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Zn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Wi.create=e=>new Wi(e);const fh=(e,t)=>{let n;switch(e.code){case Rt.invalid_type:e.received===Yt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Rt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Zn.jsonStringifyReplacer)}`;break;case Rt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Zn.joinValues(e.keys,", ")}`;break;case Rt.invalid_union:n="Invalid input";break;case Rt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Zn.joinValues(e.options)}`;break;case Rt.invalid_enum_value:n=`Invalid enum value. Expected ${Zn.joinValues(e.options)}, received '${e.received}'`;break;case Rt.invalid_arguments:n="Invalid function arguments";break;case Rt.invalid_return_type:n="Invalid function return type";break;case Rt.invalid_date:n="Invalid date";break;case Rt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Zn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Rt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Rt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Rt.custom:n="Invalid input";break;case Rt.invalid_intersection_types:n="Intersection results could not be merged";break;case Rt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Rt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Zn.assertNever(e)}return{message:n}};let W8=fh;function Zae(e){W8=e}function rv(){return W8}const av=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)s=c(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},Yae=[];function Kt(e,t){const n=rv(),r=av({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===fh?void 0:fh].filter(a=>!!a)});e.common.issues.push(r)}class Xa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return vn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Xa.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return vn;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const vn=Object.freeze({status:"aborted"}),Lf=e=>({status:"dirty",value:e}),ci=e=>({status:"valid",value:e}),cE=e=>e.status==="aborted",dE=e=>e.status==="dirty",dd=e=>e.status==="valid",Hm=e=>typeof Promise<"u"&&e instanceof Promise;function iv(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function K8(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var rn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(rn||(rn={}));var dm,fm;class Ls{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const W4=(e,t)=>{if(dd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Wi(e.common.issues);return this._error=n,this._error}}};function An(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var u,c;const{message:f}=e;return o.code==="invalid_enum_value"?{message:f??s.defaultError}:typeof s.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(c=f??n)!==null&&c!==void 0?c:s.defaultError}},description:a}}class Mn{get description(){return this._def.description}_getType(t){return Sl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Sl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Xa,ctx:{common:t.parent.common,data:t.data,parsedType:Sl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Hm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Sl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return W4(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Sl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return dd(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>dd(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Sl(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(Hm(a)?a:Promise.resolve(a));return W4(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:Rt.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Xo({schema:this,typeName:Pt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ho.create(this,this._def)}nullable(){return lc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qo.create(this)}promise(){return ph.create(this,this._def)}or(t){return Km.create([this,t],this._def)}and(t){return Zm.create(this,t,this._def)}transform(t){return new Xo({...An(this._def),schema:this,typeName:Pt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new e0({...An(this._def),innerType:this,defaultValue:n,typeName:Pt.ZodDefault})}brand(){return new Pk({typeName:Pt.ZodBranded,type:this,...An(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new t0({...An(this._def),innerType:this,catchValue:n,typeName:Pt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return og.create(this,t)}readonly(){return n0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Xae=/^c[^\s-]{8,}$/i,Jae=/^[0-9a-z]+$/,Qae=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eie=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tie=/^[a-z0-9_-]{21}$/i,nie=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rie=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,aie=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iie="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let GS;const oie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,sie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,lie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,uie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cie=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,die=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Z8="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fie=new RegExp(`^${Z8}$`);function Y8(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function hie(e){return new RegExp(`^${Y8(e)}$`)}function X8(e){let t=`${Z8}T${Y8(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function pie(e,t){return!!((t==="v4"||!t)&&oie.test(e)||(t==="v6"||!t)&&lie.test(e))}function mie(e,t){if(!nie.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function gie(e,t){return!!((t==="v4"||!t)&&sie.test(e)||(t==="v6"||!t)&&uie.test(e))}class Lo extends Mn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Yt.string){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.string,received:i.parsedType}),vn}const r=new Xa;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?Kt(a,{code:Rt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&Kt(a,{code:Rt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")aie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"email",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")GS||(GS=new RegExp(iie,"u")),GS.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"emoji",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")eie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"uuid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")tie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"nanoid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Xae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cuid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Jae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cuid2",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Qae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"ulid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Kt(a,{validation:"url",code:Rt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"regex",code:Rt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?X8(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?fie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?hie(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?rie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"duration",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?pie(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"ip",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?mie(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"jwt",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?gie(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cidr",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?cie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"base64",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?die.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"base64url",code:Rt.invalid_string,message:i.message}),r.dirty()):Zn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Rt.invalid_string,...rn.errToObj(r)})}_addCheck(t){return new Lo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...rn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...rn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...rn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...rn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...rn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...rn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...rn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...rn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...rn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...rn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...rn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...rn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...rn.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...rn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...rn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...rn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...rn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...rn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...rn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...rn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...rn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...rn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...rn.errToObj(n)})}nonempty(t){return this.min(1,rn.errToObj(t))}trim(){return new Lo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Lo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Lo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Lo.create=e=>{var t;return new Lo({checks:[],typeName:Pt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...An(e)})};function yie(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class ic extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Yt.number){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.number,received:i.parsedType}),vn}let r;const a=new Xa;for(const i of this._def.checks)i.kind==="int"?Zn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?yie(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_finite,message:i.message}),a.dirty()):Zn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,rn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,rn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,rn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,rn.toString(n))}setLimit(t,n,r,a){return new ic({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:rn.toString(a)}]})}_addCheck(t){return new ic({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:rn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:rn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:rn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Zn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}ic.create=e=>new ic({checks:[],typeName:Pt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...An(e)});class oc extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Yt.bigint)return this._getInvalidInput(t);let r;const a=new Xa;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Zn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Kt(n,{code:Rt.invalid_type,expected:Yt.bigint,received:n.parsedType}),vn}gte(t,n){return this.setLimit("min",t,!0,rn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,rn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,rn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,rn.toString(n))}setLimit(t,n,r,a){return new oc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:rn.toString(a)}]})}_addCheck(t){return new oc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:rn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}oc.create=e=>{var t;return new oc({checks:[],typeName:Pt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...An(e)})};class Vm extends Mn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Yt.boolean){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.boolean,received:r.parsedType}),vn}return ci(t.data)}}Vm.create=e=>new Vm({typeName:Pt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...An(e)});class fd extends Mn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Yt.date){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.date,received:i.parsedType}),vn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_date}),vn}const r=new Xa;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Zn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new fd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:rn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:rn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}fd.create=e=>new fd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Pt.ZodDate,...An(e)});class ov extends Mn{_parse(t){if(this._getType(t)!==Yt.symbol){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.symbol,received:r.parsedType}),vn}return ci(t.data)}}ov.create=e=>new ov({typeName:Pt.ZodSymbol,...An(e)});class Gm extends Mn{_parse(t){if(this._getType(t)!==Yt.undefined){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.undefined,received:r.parsedType}),vn}return ci(t.data)}}Gm.create=e=>new Gm({typeName:Pt.ZodUndefined,...An(e)});class Wm extends Mn{_parse(t){if(this._getType(t)!==Yt.null){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.null,received:r.parsedType}),vn}return ci(t.data)}}Wm.create=e=>new Wm({typeName:Pt.ZodNull,...An(e)});class hh extends Mn{constructor(){super(...arguments),this._any=!0}_parse(t){return ci(t.data)}}hh.create=e=>new hh({typeName:Pt.ZodAny,...An(e)});class od extends Mn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ci(t.data)}}od.create=e=>new od({typeName:Pt.ZodUnknown,...An(e)});class $l extends Mn{_parse(t){const n=this._getOrReturnCtx(t);return Kt(n,{code:Rt.invalid_type,expected:Yt.never,received:n.parsedType}),vn}}$l.create=e=>new $l({typeName:Pt.ZodNever,...An(e)});class sv extends Mn{_parse(t){if(this._getType(t)!==Yt.undefined){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.void,received:r.parsedType}),vn}return ci(t.data)}}sv.create=e=>new sv({typeName:Pt.ZodVoid,...An(e)});class qo extends Mn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==Yt.array)return Kt(n,{code:Rt.invalid_type,expected:Yt.array,received:n.parsedType}),vn;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,s=n.data.length<a.exactLength.value;(o||s)&&(Kt(n,{code:o?Rt.too_big:Rt.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Kt(n,{code:Rt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Kt(n,{code:Rt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>a.type._parseAsync(new Ls(n,o,n.path,s)))).then(o=>Xa.mergeArray(r,o));const i=[...n.data].map((o,s)=>a.type._parseSync(new Ls(n,o,n.path,s)));return Xa.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new qo({...this._def,minLength:{value:t,message:rn.toString(n)}})}max(t,n){return new qo({...this._def,maxLength:{value:t,message:rn.toString(n)}})}length(t,n){return new qo({...this._def,exactLength:{value:t,message:rn.toString(n)}})}nonempty(t){return this.min(1,t)}}qo.create=(e,t)=>new qo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Pt.ZodArray,...An(t)});function Of(e){if(e instanceof zr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ho.create(Of(r))}return new zr({...e._def,shape:()=>t})}else return e instanceof qo?new qo({...e._def,type:Of(e.element)}):e instanceof Ho?Ho.create(Of(e.unwrap())):e instanceof lc?lc.create(Of(e.unwrap())):e instanceof $s?$s.create(e.items.map(t=>Of(t))):e}class zr extends Mn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Zn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==Yt.object){const c=this._getOrReturnCtx(t);return Kt(c,{code:Rt.invalid_type,expected:Yt.object,received:c.parsedType}),vn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof $l&&this._def.unknownKeys==="strip"))for(const c in a.data)o.includes(c)||s.push(c);const u=[];for(const c of o){const f=i[c],h=a.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new Ls(a,h,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof $l){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of s)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(c==="strict")s.length>0&&(Kt(a,{code:Rt.unrecognized_keys,keys:s}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of s){const h=a.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new Ls(a,h,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const h=await f.key,m=await f.value;c.push({key:h,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>Xa.mergeObjectSync(r,c)):Xa.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return rn.errToObj,new zr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,o,s;const u=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=rn.errToObj(t).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new zr({...this._def,unknownKeys:"strip"})}passthrough(){return new zr({...this._def,unknownKeys:"passthrough"})}extend(t){return new zr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new zr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Pt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new zr({...this._def,catchall:t})}pick(t){const n={};return Zn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new zr({...this._def,shape:()=>n})}omit(t){const n={};return Zn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new zr({...this._def,shape:()=>n})}deepPartial(){return Of(this)}partial(t){const n={};return Zn.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new zr({...this._def,shape:()=>n})}required(t){const n={};return Zn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ho;)i=i._def.innerType;n[r]=i}}),new zr({...this._def,shape:()=>n})}keyof(){return J8(Zn.objectKeys(this.shape))}}zr.create=(e,t)=>new zr({shape:()=>e,unknownKeys:"strip",catchall:$l.create(),typeName:Pt.ZodObject,...An(t)});zr.strictCreate=(e,t)=>new zr({shape:()=>e,unknownKeys:"strict",catchall:$l.create(),typeName:Pt.ZodObject,...An(t)});zr.lazycreate=(e,t)=>new zr({shape:e,unknownKeys:"strip",catchall:$l.create(),typeName:Pt.ZodObject,...An(t)});class Km extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new Wi(s.ctx.common.issues));return Kt(n,{code:Rt.invalid_union,unionErrors:o}),vn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(u=>new Wi(u));return Kt(n,{code:Rt.invalid_union,unionErrors:s}),vn}}get options(){return this._def.options}}Km.create=(e,t)=>new Km({options:e,typeName:Pt.ZodUnion,...An(t)});const vl=e=>e instanceof Xm?vl(e.schema):e instanceof Xo?vl(e.innerType()):e instanceof Jm?[e.value]:e instanceof sc?e.options:e instanceof Qm?Zn.objectValues(e.enum):e instanceof e0?vl(e._def.innerType):e instanceof Gm?[void 0]:e instanceof Wm?[null]:e instanceof Ho?[void 0,...vl(e.unwrap())]:e instanceof lc?[null,...vl(e.unwrap())]:e instanceof Pk||e instanceof n0?vl(e.unwrap()):e instanceof t0?vl(e._def.innerType):[];class Dw extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.object)return Kt(n,{code:Rt.invalid_type,expected:Yt.object,received:n.parsedType}),vn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Kt(n,{code:Rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),vn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const o=vl(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new Dw({typeName:Pt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...An(r)})}}function fE(e,t){const n=Sl(e),r=Sl(t);if(e===t)return{valid:!0,data:e};if(n===Yt.object&&r===Yt.object){const a=Zn.objectKeys(t),i=Zn.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const u=fE(e[s],t[s]);if(!u.valid)return{valid:!1};o[s]=u.data}return{valid:!0,data:o}}else if(n===Yt.array&&r===Yt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],u=fE(o,s);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return n===Yt.date&&r===Yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Zm extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(cE(i)||cE(o))return vn;const s=fE(i.value,o.value);return s.valid?((dE(i)||dE(o))&&n.dirty(),{status:n.value,value:s.data}):(Kt(r,{code:Rt.invalid_intersection_types}),vn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Zm.create=(e,t,n)=>new Zm({left:e,right:t,typeName:Pt.ZodIntersection,...An(n)});class $s extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.array)return Kt(r,{code:Rt.invalid_type,expected:Yt.array,received:r.parsedType}),vn;if(r.data.length<this._def.items.length)return Kt(r,{code:Rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),vn;!this._def.rest&&r.data.length>this._def.items.length&&(Kt(r,{code:Rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,s)=>{const u=this._def.items[s]||this._def.rest;return u?u._parse(new Ls(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Xa.mergeArray(n,o)):Xa.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new $s({...this._def,rest:t})}}$s.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $s({items:e,typeName:Pt.ZodTuple,rest:null,...An(t)})};class Ym extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.object)return Kt(r,{code:Rt.invalid_type,expected:Yt.object,received:r.parsedType}),vn;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)a.push({key:i._parse(new Ls(r,s,r.path,s)),value:o._parse(new Ls(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?Xa.mergeObjectAsync(n,a):Xa.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Mn?new Ym({keyType:t,valueType:n,typeName:Pt.ZodRecord,...An(r)}):new Ym({keyType:Lo.create(),valueType:t,typeName:Pt.ZodRecord,...An(n)})}}class lv extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.map)return Kt(r,{code:Rt.invalid_type,expected:Yt.map,received:r.parsedType}),vn;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([s,u],c)=>({key:a._parse(new Ls(r,s,r.path,[c,"key"])),value:i._parse(new Ls(r,u,r.path,[c,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const u of o){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return vn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const u of o){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return vn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}}}}lv.create=(e,t,n)=>new lv({valueType:t,keyType:e,typeName:Pt.ZodMap,...An(n)});class hd extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.set)return Kt(r,{code:Rt.invalid_type,expected:Yt.set,received:r.parsedType}),vn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Kt(r,{code:Rt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Kt(r,{code:Rt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const c=new Set;for(const f of u){if(f.status==="aborted")return vn;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const s=[...r.data.values()].map((u,c)=>i._parse(new Ls(r,u,r.path,c)));return r.common.async?Promise.all(s).then(u=>o(u)):o(s)}min(t,n){return new hd({...this._def,minSize:{value:t,message:rn.toString(n)}})}max(t,n){return new hd({...this._def,maxSize:{value:t,message:rn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}hd.create=(e,t)=>new hd({valueType:e,minSize:null,maxSize:null,typeName:Pt.ZodSet,...An(t)});class Vf extends Mn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.function)return Kt(n,{code:Rt.invalid_type,expected:Yt.function,received:n.parsedType}),vn;function r(s,u){return av({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,rv(),fh].filter(c=>!!c),issueData:{code:Rt.invalid_arguments,argumentsError:u}})}function a(s,u){return av({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,rv(),fh].filter(c=>!!c),issueData:{code:Rt.invalid_return_type,returnTypeError:u}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof ph){const s=this;return ci(async function(...u){const c=new Wi([]),f=await s._def.args.parseAsync(u,i).catch(g=>{throw c.addIssue(r(u,g)),c}),h=await Reflect.apply(o,this,f);return await s._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(a(h,g)),c})})}else{const s=this;return ci(function(...u){const c=s._def.args.safeParse(u,i);if(!c.success)throw new Wi([r(u,c.error)]);const f=Reflect.apply(o,this,c.data),h=s._def.returns.safeParse(f,i);if(!h.success)throw new Wi([a(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Vf({...this._def,args:$s.create(t).rest(od.create())})}returns(t){return new Vf({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Vf({args:t||$s.create([]).rest(od.create()),returns:n||od.create(),typeName:Pt.ZodFunction,...An(r)})}}class Xm extends Mn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Xm.create=(e,t)=>new Xm({getter:e,typeName:Pt.ZodLazy,...An(t)});class Jm extends Mn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Kt(n,{received:n.data,code:Rt.invalid_literal,expected:this._def.value}),vn}return{status:"valid",value:t.data}}get value(){return this._def.value}}Jm.create=(e,t)=>new Jm({value:e,typeName:Pt.ZodLiteral,...An(t)});function J8(e,t){return new sc({values:e,typeName:Pt.ZodEnum,...An(t)})}class sc extends Mn{constructor(){super(...arguments),dm.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Kt(n,{expected:Zn.joinValues(r),received:n.parsedType,code:Rt.invalid_type}),vn}if(iv(this,dm)||K8(this,dm,new Set(this._def.values)),!iv(this,dm).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Kt(n,{received:n.data,code:Rt.invalid_enum_value,options:r}),vn}return ci(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return sc.create(t,{...this._def,...n})}exclude(t,n=this._def){return sc.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}dm=new WeakMap;sc.create=J8;class Qm extends Mn{constructor(){super(...arguments),fm.set(this,void 0)}_parse(t){const n=Zn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Yt.string&&r.parsedType!==Yt.number){const a=Zn.objectValues(n);return Kt(r,{expected:Zn.joinValues(a),received:r.parsedType,code:Rt.invalid_type}),vn}if(iv(this,fm)||K8(this,fm,new Set(Zn.getValidEnumValues(this._def.values))),!iv(this,fm).has(t.data)){const a=Zn.objectValues(n);return Kt(r,{received:r.data,code:Rt.invalid_enum_value,options:a}),vn}return ci(t.data)}get enum(){return this._def.values}}fm=new WeakMap;Qm.create=(e,t)=>new Qm({values:e,typeName:Pt.ZodNativeEnum,...An(t)});class ph extends Mn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.promise&&n.common.async===!1)return Kt(n,{code:Rt.invalid_type,expected:Yt.promise,received:n.parsedType}),vn;const r=n.parsedType===Yt.promise?n.data:Promise.resolve(n.data);return ci(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ph.create=(e,t)=>new ph({type:e,typeName:Pt.ZodPromise,...An(t)});class Xo extends Mn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Kt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return vn;const u=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return u.status==="aborted"?vn:u.status==="dirty"||n.value==="dirty"?Lf(u.value):u});{if(n.value==="aborted")return vn;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?vn:s.status==="dirty"||n.value==="dirty"?Lf(s.value):s}}if(a.type==="refinement"){const o=s=>{const u=a.refinement(s,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?vn:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?vn:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!dd(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>dd(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:n.value,value:s})):o);Zn.assertNever(a)}}Xo.create=(e,t,n)=>new Xo({schema:e,typeName:Pt.ZodEffects,effect:t,...An(n)});Xo.createWithPreprocess=(e,t,n)=>new Xo({schema:t,effect:{type:"preprocess",transform:e},typeName:Pt.ZodEffects,...An(n)});class Ho extends Mn{_parse(t){return this._getType(t)===Yt.undefined?ci(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ho.create=(e,t)=>new Ho({innerType:e,typeName:Pt.ZodOptional,...An(t)});class lc extends Mn{_parse(t){return this._getType(t)===Yt.null?ci(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}lc.create=(e,t)=>new lc({innerType:e,typeName:Pt.ZodNullable,...An(t)});class e0 extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Yt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}e0.create=(e,t)=>new e0({innerType:e,typeName:Pt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...An(t)});class t0 extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Hm(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wi(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Wi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}t0.create=(e,t)=>new t0({innerType:e,typeName:Pt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...An(t)});class uv extends Mn{_parse(t){if(this._getType(t)!==Yt.nan){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.nan,received:r.parsedType}),vn}return{status:"valid",value:t.data}}}uv.create=e=>new uv({typeName:Pt.ZodNaN,...An(e)});const bie=Symbol("zod_brand");class Pk extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class og extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?vn:i.status==="dirty"?(n.dirty(),Lf(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?vn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new og({in:t,out:n,typeName:Pt.ZodPipeline})}}class n0 extends Mn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(dd(a)&&(a.value=Object.freeze(a.value)),a);return Hm(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}n0.create=(e,t)=>new n0({innerType:e,typeName:Pt.ZodReadonly,...An(t)});function K4(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function Q8(e,t={},n){return e?hh.create().superRefine((r,a)=>{var i,o;const s=e(r);if(s instanceof Promise)return s.then(u=>{var c,f;if(!u){const h=K4(t,r),m=(f=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&f!==void 0?f:!0;a.addIssue({code:"custom",...h,fatal:m})}});if(!s){const u=K4(t,r),c=(o=(i=u.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...u,fatal:c})}}):hh.create()}const vie={object:zr.lazycreate};var Pt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Pt||(Pt={}));const wie=(e,t={message:`Input not instance of ${e.name}`})=>Q8(n=>n instanceof e,t),e5=Lo.create,t5=ic.create,_ie=uv.create,xie=oc.create,n5=Vm.create,Sie=fd.create,Eie=ov.create,Cie=Gm.create,kie=Wm.create,Aie=hh.create,Tie=od.create,Rie=$l.create,Nie=sv.create,Iie=qo.create,Oie=zr.create,Die=zr.strictCreate,jie=Km.create,Mie=Dw.create,Pie=Zm.create,Fie=$s.create,Lie=Ym.create,$ie=lv.create,Bie=hd.create,zie=Vf.create,Uie=Xm.create,qie=Jm.create,Hie=sc.create,Vie=Qm.create,Gie=ph.create,Z4=Xo.create,Wie=Ho.create,Kie=lc.create,Zie=Xo.createWithPreprocess,Yie=og.create,Xie=()=>e5().optional(),Jie=()=>t5().optional(),Qie=()=>n5().optional(),eoe={string:e=>Lo.create({...e,coerce:!0}),number:e=>ic.create({...e,coerce:!0}),boolean:e=>Vm.create({...e,coerce:!0}),bigint:e=>oc.create({...e,coerce:!0}),date:e=>fd.create({...e,coerce:!0})},toe=vn;var L=Object.freeze({__proto__:null,defaultErrorMap:fh,setErrorMap:Zae,getErrorMap:rv,makeIssue:av,EMPTY_PATH:Yae,addIssueToContext:Kt,ParseStatus:Xa,INVALID:vn,DIRTY:Lf,OK:ci,isAborted:cE,isDirty:dE,isValid:dd,isAsync:Hm,get util(){return Zn},get objectUtil(){return uE},ZodParsedType:Yt,getParsedType:Sl,ZodType:Mn,datetimeRegex:X8,ZodString:Lo,ZodNumber:ic,ZodBigInt:oc,ZodBoolean:Vm,ZodDate:fd,ZodSymbol:ov,ZodUndefined:Gm,ZodNull:Wm,ZodAny:hh,ZodUnknown:od,ZodNever:$l,ZodVoid:sv,ZodArray:qo,ZodObject:zr,ZodUnion:Km,ZodDiscriminatedUnion:Dw,ZodIntersection:Zm,ZodTuple:$s,ZodRecord:Ym,ZodMap:lv,ZodSet:hd,ZodFunction:Vf,ZodLazy:Xm,ZodLiteral:Jm,ZodEnum:sc,ZodNativeEnum:Qm,ZodPromise:ph,ZodEffects:Xo,ZodTransformer:Xo,ZodOptional:Ho,ZodNullable:lc,ZodDefault:e0,ZodCatch:t0,ZodNaN:uv,BRAND:bie,ZodBranded:Pk,ZodPipeline:og,ZodReadonly:n0,custom:Q8,Schema:Mn,ZodSchema:Mn,late:vie,get ZodFirstPartyTypeKind(){return Pt},coerce:eoe,any:Aie,array:Iie,bigint:xie,boolean:n5,date:Sie,discriminatedUnion:Mie,effect:Z4,enum:Hie,function:zie,instanceof:wie,intersection:Pie,lazy:Uie,literal:qie,map:$ie,nan:_ie,nativeEnum:Vie,never:Rie,null:kie,nullable:Kie,number:t5,object:Oie,oboolean:Qie,onumber:Jie,optional:Wie,ostring:Xie,pipeline:Yie,preprocess:Zie,promise:Gie,record:Lie,set:Bie,strictObject:Die,string:e5,symbol:Eie,transformer:Z4,tuple:Fie,undefined:Cie,union:jie,unknown:Tie,void:Nie,NEVER:toe,ZodIssueCode:Rt,quotelessJson:Kae,ZodError:Wi});function noe(){return{}}function roe(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Pt.ZodAny&&(n.items=nr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&dr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&dr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(dr(n,"minItems",e.exactLength.value,e.exactLength.message,t),dr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function aoe(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?dr(n,"minimum",r.value,r.message,t):dr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dr(n,"maximum",r.value,r.message,t):dr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dr(n,"maximum",r.value,r.message,t));break;case"multipleOf":dr(n,"multipleOf",r.value,r.message,t);break}return n}function ioe(){return{type:"boolean"}}function r5(e,t){return nr(e.type._def,t)}const ooe=(e,t)=>nr(e.innerType._def,t);function a5(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>a5(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return soe(e,t)}}const soe=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":dr(n,"minimum",r.value,r.message,t);break;case"max":dr(n,"maximum",r.value,r.message,t);break}return n};function loe(e,t){return{...nr(e.innerType._def,t),default:e.defaultValue()}}function uoe(e,t){return t.effectStrategy==="input"?nr(e.schema._def,t):{}}function coe(e){return{type:"string",enum:Array.from(e.values)}}const doe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function foe(e,t){const n=[nr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),nr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(doe(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:s,...u}=i;o=u}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function hoe(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let WS;const Oo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(WS===void 0&&(WS=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),WS),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function i5(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":dr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":dr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Do(n,"email",r.message,t);break;case"format:idn-email":Do(n,"idn-email",r.message,t);break;case"pattern:zod":si(n,Oo.email,r.message,t);break}break;case"url":Do(n,"uri",r.message,t);break;case"uuid":Do(n,"uuid",r.message,t);break;case"regex":si(n,r.regex,r.message,t);break;case"cuid":si(n,Oo.cuid,r.message,t);break;case"cuid2":si(n,Oo.cuid2,r.message,t);break;case"startsWith":si(n,RegExp(`^${KS(r.value,t)}`),r.message,t);break;case"endsWith":si(n,RegExp(`${KS(r.value,t)}$`),r.message,t);break;case"datetime":Do(n,"date-time",r.message,t);break;case"date":Do(n,"date",r.message,t);break;case"time":Do(n,"time",r.message,t);break;case"duration":Do(n,"duration",r.message,t);break;case"length":dr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),dr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{si(n,RegExp(KS(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Do(n,"ipv4",r.message,t),r.version!=="v4"&&Do(n,"ipv6",r.message,t);break}case"base64url":si(n,Oo.base64url,r.message,t);break;case"jwt":si(n,Oo.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&si(n,Oo.ipv4Cidr,r.message,t),r.version!=="v4"&&si(n,Oo.ipv6Cidr,r.message,t);break}case"emoji":si(n,Oo.emoji(),r.message,t);break;case"ulid":{si(n,Oo.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Do(n,"binary",r.message,t);break}case"contentEncoding:base64":{dr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{si(n,Oo.base64,r.message,t);break}}break}case"nanoid":si(n,Oo.nanoid,r.message,t)}return n}function KS(e,t){return t.patternStrategy==="escape"?moe(e):e}const poe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function moe(e){let t="";for(let n=0;n<e.length;n++)poe.has(e[n])||(t+="\\"),t+=e[n];return t}function Do(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):dr(e,"format",t,n,r)}function si(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:Y4(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):dr(e,"pattern",Y4(t,r),n,r)}function Y4(e,t){var u;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,s=!1;for(let c=0;c<r.length;c++){if(i){a+=r[c],i=!1;continue}if(n.i){if(o){if(r[c].match(/[a-z]/)){s?(a+=r[c],a+=`${r[c-2]}-${r[c]}`.toUpperCase(),s=!1):r[c+1]==="-"&&((u=r[c+2])!=null&&u.match(/[a-z]/))?(a+=r[c],s=!0):a+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){a+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){a+=o?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}a+=r[c],r[c]==="\\"?i=!0:o&&r[c]==="]"?o=!1:!o&&r[c]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function o5(e,t){var r,a,i,o,s,u;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Pt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,f)=>({...c,[f]:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",f]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Pt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:c,...f}=i5(e.keyType._def,t);return{...n,propertyNames:f}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===Pt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===Pt.ZodBranded&&e.keyType._def.type._def.typeName===Pt.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){const{type:c,...f}=r5(e.keyType._def,t);return{...n,propertyNames:f}}}return n}function goe(e,t){if(t.mapStrategy==="record")return o5(e,t);const n=nr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function yoe(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function boe(){return{not:{}}}function voe(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const cv={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function woe(e,t){if(t.target==="openApi3")return X4(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in cv&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const o=cv[i._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,o,s)=>s.indexOf(i)===o);return{type:a.length>1?a:a[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return X4(e,t)}const X4=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>nr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function _oe(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:cv[e.innerType._def.typeName],nullable:!0}:{type:[cv[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=nr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=nr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function xoe(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",G8(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?dr(n,"minimum",r.value,r.message,t):dr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dr(n,"maximum",r.value,r.message,t):dr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dr(n,"maximum",r.value,r.message,t));break;case"multipleOf":dr(n,"multipleOf",r.value,r.message,t);break}return n}function Soe(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const s in i){let u=i[s];if(u===void 0||u._def===void 0)continue;let c=Coe(u);c&&n&&(u instanceof Ho&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),c=!1);const f=nr(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});f!==void 0&&(r.properties[s]=f,c||a.push(s))}a.length&&(r.required=a);const o=Eoe(e,t);return o!==void 0&&(r.additionalProperties=o),r}function Eoe(e,t){if(e.catchall._def.typeName!=="ZodNever")return nr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Coe(e){try{return e.isOptional()}catch{return!0}}const koe=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return nr(e.innerType._def,t);const n=nr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Aoe=(e,t)=>{if(t.pipeStrategy==="input")return nr(e.in._def,t);if(t.pipeStrategy==="output")return nr(e.out._def,t);const n=nr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=nr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function Toe(e,t){return nr(e.type._def,t)}function Roe(e,t){const r={type:"array",uniqueItems:!0,items:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&dr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&dr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Noe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>nr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:nr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>nr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Ioe(){return{not:{}}}function Ooe(){return{}}const Doe=(e,t)=>nr(e.innerType._def,t),joe=(e,t,n)=>{switch(t){case Pt.ZodString:return i5(e,n);case Pt.ZodNumber:return xoe(e,n);case Pt.ZodObject:return Soe(e,n);case Pt.ZodBigInt:return aoe(e,n);case Pt.ZodBoolean:return ioe();case Pt.ZodDate:return a5(e,n);case Pt.ZodUndefined:return Ioe();case Pt.ZodNull:return voe(n);case Pt.ZodArray:return roe(e,n);case Pt.ZodUnion:case Pt.ZodDiscriminatedUnion:return woe(e,n);case Pt.ZodIntersection:return foe(e,n);case Pt.ZodTuple:return Noe(e,n);case Pt.ZodRecord:return o5(e,n);case Pt.ZodLiteral:return hoe(e,n);case Pt.ZodEnum:return coe(e);case Pt.ZodNativeEnum:return yoe(e);case Pt.ZodNullable:return _oe(e,n);case Pt.ZodOptional:return koe(e,n);case Pt.ZodMap:return goe(e,n);case Pt.ZodSet:return Roe(e,n);case Pt.ZodLazy:return()=>e.getter()._def;case Pt.ZodPromise:return Toe(e,n);case Pt.ZodNaN:case Pt.ZodNever:return boe();case Pt.ZodEffects:return uoe(e,n);case Pt.ZodAny:return noe();case Pt.ZodUnknown:return Ooe();case Pt.ZodDefault:return loe(e,n);case Pt.ZodBranded:return r5(e,n);case Pt.ZodReadonly:return Doe(e,n);case Pt.ZodCatch:return ooe(e,n);case Pt.ZodPipeline:return Aoe(e,n);case Pt.ZodFunction:case Pt.ZodVoid:case Pt.ZodSymbol:return;default:return(r=>{})()}};function nr(e,t,n=!1){var s;const r=t.seen.get(e);if(t.override){const u=(s=t.override)==null?void 0:s.call(t,e,t,r,n);if(u!==Vae)return u}if(r&&!n){const u=Moe(r,t);if(u!==void 0)return u}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=joe(e,e.typeName,t),o=typeof i=="function"?nr(i(),t):i;if(o&&Foe(e,t,o),t.postProcess){const u=t.postProcess(o,e,t);return a.jsonSchema=o,u}return a.jsonSchema=o,o}const Moe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Poe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Poe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Foe=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Loe=(e,t)=>{const n=Wae(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,f])=>({...u,[c]:nr(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=nr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const s=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var r0={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},a0={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},i0={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},o0={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},s0={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},$oe=[r0,a0,i0,o0,s0];r0.code+"",a0.code+"",i0.code+"",o0.code+"",s0.code+"";r0.name+"",r0.code,a0.name+"",a0.code,i0.name+"",i0.code,o0.name+"",o0.code,s0.name+"",s0.code;$oe.map(e=>e.code);function Boe(e){const t=["ROOT"];let n=-1,r=null;function a(u,c,f){switch(u){case'"':{n=c,t.pop(),t.push(f),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(f),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(f),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(f),t.push("INSIDE_ARRAY_START");break}}}function i(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function o(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let u=0;u<e.length;u++){const c=e[u];switch(t[t.length-1]){case"ROOT":a(c,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(c,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,u);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=u}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=u,t.pop();break}default:{n=u,a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}default:{n=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=u;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,u+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u)):n=u;break}}}let s=e.slice(0,n+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const f=e.substring(r,e.length);"true".startsWith(f)?s+="true".slice(f.length):"false".startsWith(f)?s+="false".slice(f.length):"null".startsWith(f)&&(s+="null".slice(f.length))}}return s}function zoe(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=cd({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=cd({text:Boe(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Uoe={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},qoe={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},Hoe={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Voe={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},Goe={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Woe={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},Koe={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},Zoe={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Yoe={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},Xoe={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},Joe={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},Qoe={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},ese={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},tse={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},nse={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},rse={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},jw=[Uoe,qoe,Hoe,Voe,Goe,Woe,Koe,Zoe,Yoe,Xoe,Joe,Qoe,ese,tse,nse,rse];Object.fromEntries(jw.map(e=>[e.code,e]));Object.fromEntries(jw.map(e=>[e.name,e.code]));jw.map(e=>e.code);function Ga(e,t){const n=jw.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function ase(e,t){var n;const r=(n=void 0)!=null?n:!1;return ise(Loe(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var hE=Symbol.for("vercel.ai.schema");function ise(e,{validate:t}={}){return{[hE]:!0,_type:void 0,[nv]:!0,jsonSchema:e,validate:t}}function ose(e){return typeof e=="object"&&e!==null&&hE in e&&e[hE]===!0&&"jsonSchema"in e&&"validate"in e}function Mw(e){return ose(e)?e:ase(e)}const J4=globalThis||void 0||self;var sse=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof J4=="object"?J4:{},id="1.9.0",Q4=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function lse(e){var t=new Set([e]),n=new Set,r=e.match(Q4);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(u){return u===e};function i(s){return n.add(s),!1}function o(s){return t.add(s),!0}return function(u){if(t.has(u))return!0;if(n.has(u))return!1;var c=u.match(Q4);if(!c)return i(u);var f={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return f.prerelease!=null||a.major!==f.major?i(u):a.major===0?a.minor===f.minor&&a.patch<=f.patch?o(u):i(u):a.minor<=f.minor?o(u):i(u)}}var use=lse(id),cse=id.split(".")[0],l0=Symbol.for("opentelemetry.js.api."+cse),u0=sse;function Fk(e,t,n,r){var a;r===void 0&&(r=!1);var i=u0[l0]=(a=u0[l0])!==null&&a!==void 0?a:{version:id};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==id){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+id);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+id+"."),!0}function c0(e){var t,n,r=(t=u0[l0])===null||t===void 0?void 0:t.version;if(!(!r||!use(r)))return(n=u0[l0])===null||n===void 0?void 0:n[e]}function Lk(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+id+".");var n=u0[l0];n&&delete n[e]}var dse=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},fse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},hse=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return im("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return im("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return im("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return im("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return im("verbose",this._namespace,t)},e}();function im(e,t,n){var r=c0("diag");if(r)return n.unshift(t),r[e].apply(r,fse([],dse(n),!1))}var Ui;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Ui||(Ui={}));function pse(e,t){e<Ui.NONE?e=Ui.NONE:e>Ui.ALL&&(e=Ui.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",Ui.ERROR),warn:n("warn",Ui.WARN),info:n("info",Ui.INFO),debug:n("debug",Ui.DEBUG),verbose:n("verbose",Ui.VERBOSE)}}var mse=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},gse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},yse="diag",dv=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=c0("diag");if(s)return s[a].apply(s,gse([],mse(i),!1))}}var n=this,r=function(a,i){var o,s,u;if(i===void 0&&(i={logLevel:Ui.INFO}),a===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof i=="number"&&(i={logLevel:i});var f=c0("diag"),h=pse((s=i.logLevel)!==null&&s!==void 0?s:Ui.INFO,a);if(f&&!i.suppressOverrideMessage){var m=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return Fk("diag",h,n,!0)};n.setLogger=r,n.disable=function(){Lk(yse,n)},n.createComponentLogger=function(a){return new hse(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function bse(e){return Symbol.for(e)}var vse=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),wse=new vse,_se=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},xse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Sse=function(){function e(){}return e.prototype.active=function(){return wse},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,xse([r],_se(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Ese=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Cse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},ZS="context",kse=new Sse,s5=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Fk(ZS,t,dv.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,Cse([t,n,r],Ese(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return c0(ZS)||kse},e.prototype.disable=function(){this._getContextManager().disable(),Lk(ZS,dv.instance())},e}(),pE;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(pE||(pE={}));var l5="0000000000000000",u5="00000000000000000000000000000000",Ase={traceId:u5,spanId:l5,traceFlags:pE.NONE},gm=function(){function e(t){t===void 0&&(t=Ase),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),$k=bse("OpenTelemetry Context Key SPAN");function Bk(e){return e.getValue($k)||void 0}function Tse(){return Bk(s5.getInstance().active())}function zk(e,t){return e.setValue($k,t)}function Rse(e){return e.deleteValue($k)}function Nse(e,t){return zk(e,new gm(t))}function c5(e){var t;return(t=Bk(e))===null||t===void 0?void 0:t.spanContext()}var Ise=/^([0-9a-f]{32})$/i,Ose=/^[0-9a-f]{16}$/i;function Dse(e){return Ise.test(e)&&e!==u5}function jse(e){return Ose.test(e)&&e!==l5}function d5(e){return Dse(e.traceId)&&jse(e.spanId)}function Mse(e){return new gm(e)}var YS=s5.getInstance(),f5=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=YS.active());var a=!!(n!=null&&n.root);if(a)return new gm;var i=r&&c5(r);return Pse(i)&&d5(i)?new gm(i):new gm},e.prototype.startActiveSpan=function(t,n,r,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=n:arguments.length===3?(i=n,s=r):(i=n,o=r,s=a);var u=o??YS.active(),c=this.startSpan(t,i,u),f=zk(u,c);return YS.with(f,s,void 0,c)}},e}();function Pse(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Fse=new f5,Lse=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Fse},e}(),$se=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new f5},e}(),Bse=new $se,e6=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Lse(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Bse},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),fv;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(fv||(fv={}));var XS="trace",zse=function(){function e(){this._proxyTracerProvider=new e6,this.wrapSpanContext=Mse,this.isSpanContextValid=d5,this.deleteSpan=Rse,this.getSpan=Bk,this.getActiveSpan=Tse,this.getSpanContext=c5,this.setSpan=zk,this.setSpanContext=Nse}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=Fk(XS,this._proxyTracerProvider,dv.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return c0(XS)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Lk(XS,dv.instance()),this._proxyTracerProvider=new e6},e}(),Use=zse.getInstance(),qse=Object.defineProperty,Uk=(e,t)=>{for(var n in t)qse(e,n,{get:t[n],enumerable:!0})};function hv(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function t6(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function n6({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:s,value:u}=await i.read();if(s)break;e.write(u)}}catch(s){throw s}finally{e.end()}})()}var h5="AI_InvalidArgumentError",p5=`vercel.ai.error.${h5}`,Hse=Symbol.for(p5),m5,Mo=class extends xn{constructor({parameter:t,value:n,message:r}){super({name:h5,message:`Invalid argument for parameter ${t}: ${r}`}),this[m5]=!0,this.parameter=t,this.value=n}static isInstance(t){return xn.hasMarker(t,p5)}};m5=Hse;var g5="AI_RetryError",y5=`vercel.ai.error.${g5}`,Vse=Symbol.for(y5),b5,r6=class extends xn{constructor({message:e,reason:t,errors:n}){super({name:g5,message:e}),this[b5]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return xn.hasMarker(e,y5)}};b5=Vse;var Gse=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>v5(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function v5(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(yb(i)||t===0)throw i;const o=Iae(i),s=[...a,i],u=s.length;if(u>t)throw new r6({message:`Failed after ${u} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(i instanceof Error&&fa.isInstance(i)&&i.isRetryable===!0&&u<=t)return await Tae(n),v5(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw u===1?i:new r6({message:`Failed after ${u} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function Wse({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Mo({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Mo({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:Gse({maxRetries:t})}}function mE({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function Kse({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[o,s])=>(i[`ai.settings.${o}`]=s,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[o,s])=>(i[`ai.telemetry.metadata.${o}`]=s,i),{}),...Object.entries(r??{}).reduce((i,[o,s])=>(s!==void 0&&(i[`ai.request.headers.${o}`]=s),i),{})}}var Zse={startSpan(){return tb},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(tb);if(typeof n=="function")return n(tb);if(typeof r=="function")return r(tb)}},tb={spanContext(){return Yse},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Yse={traceId:"",spanId:"",traceFlags:0};function Xse({isEnabled:e=!1,tracer:t}={}){return e?t||Use.getTracer("ai"):Zse}function gE({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const o=await r(i);return a&&i.end(),o}catch(o){try{o instanceof Error?(i.recordException({name:o.name,message:o.message,stack:o.stack}),i.setStatus({code:fv.ERROR,message:o.message})):i.setStatus({code:fv.ERROR})}finally{i.end()}throw o}})}function $f({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var Jse=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=dh(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=H8(this.base64Data)),this.uint8ArrayData}},Qse=class extends Jse{constructor(e){super(e),this.type="file"}},ele=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function tle(e){for(const t of ele)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var w5="AI_NoObjectGeneratedError",_5=`vercel.ai.error.${w5}`,nle=Symbol.for(_5),x5,a6=class extends xn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:w5,message:e,cause:t}),this[x5]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return xn.hasMarker(e,_5)}};x5=nle;var S5="AI_DownloadError",E5=`vercel.ai.error.${S5}`,rle=Symbol.for(E5),C5,JS=class extends xn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:S5,message:a,cause:r}),this[C5]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return xn.hasMarker(e,E5)}};C5=rle;async function ale({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new JS({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw JS.isInstance(a)?a:new JS({url:r,cause:a})}}var k5="AI_InvalidDataContentError",A5=`vercel.ai.error.${k5}`,ile=Symbol.for(A5),T5,i6=class extends xn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:k5,message:n,cause:t}),this[T5]=!0,this.content=e}static isInstance(e){return xn.hasMarker(e,A5)}};T5=ile;var R5=L.union([L.string(),L.instanceof(Uint8Array),L.instanceof(ArrayBuffer),L.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function N5(e){return typeof e=="string"?e:e instanceof ArrayBuffer?dh(new Uint8Array(e)):dh(e)}function pv(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return H8(e)}catch(t){throw new i6({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new i6({content:e})}function ole(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var I5="AI_InvalidMessageRoleError",O5=`vercel.ai.error.${I5}`,sle=Symbol.for(O5),D5,lle=class extends xn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:I5,message:t}),this[D5]=!0,this.role=e}static isInstance(e){return xn.hasMarker(e,O5)}};D5=sle;function ule(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function cle({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=ale}){const a=await fle(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>dle(i,a))]}function dle(e,t){var n,r,a,i,o,s;const u=e.role;switch(u){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>hle(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var f;const h=(f=c.providerOptions)!=null?f:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:N5(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:h};case"text":return{type:"text",text:c.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:h}}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var f;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(f=c.providerOptions)!=null?f:c.experimental_providerMetadata}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};default:{const c=u;throw new lle({role:c})}}}async function fle(e,t,n,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&n===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!r(o)),i=await Promise.all(a.map(async o=>({url:o,data:await t({url:o})})));return Object.fromEntries(i.map(({url:o,data:s})=>[o.toString(),s]))}function hle(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let o=e.mimeType,s,u,c;const f=e.type;switch(f){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${f}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){const{mimeType:h,base64Content:m}=ule(u.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${f}`);o=h,c=pv(m)}else{const h=t[u.toString()];h?(c=h.data,o??(o=h.mimeType)):c=u}else c=pv(u);switch(f){case"image":return c instanceof Uint8Array&&(o=(r=tle(c))!=null?r:o),{type:"image",image:c,mimeType:o,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(o==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?N5(c):c,filename:e.filename,mimeType:o,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function ple({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o,seed:s}){if(e!=null){if(!Number.isInteger(e))throw new Mo({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Mo({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Mo({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Mo({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Mo({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Mo({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Mo({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Mo({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o!=null&&o.length>0?o:void 0,seed:s}}function o6(e){var t,n,r;const a=[];for(const i of e){let o;try{o=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(o.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:o});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:o,mimeType:i.contentType})}break}case"data:":{let s,u,c;try{[s,u]=i.url.split(","),c=s.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||u==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:pv(u)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:ole(pv(u))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:u,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return a}var j5="AI_MessageConversionError",M5=`vercel.ai.error.${j5}`,mle=Symbol.for(M5),P5,QS=class extends xn{constructor({originalMessage:e,message:t}){super({name:j5,message:t}),this[P5]=!0,this.originalMessage=e}static isInstance(e){return xn.hasMarker(e,M5)}};P5=mle;function gle(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let o=0;o<e.length;o++){const s=e[o],u=o===e.length-1,{role:c,content:f,experimental_attachments:h}=s;switch(c){case"system":{i.push({role:"system",content:f});break}case"user":{if(s.parts==null)i.push({role:"user",content:h?[{type:"text",text:f},...o6(h)]:f});else{const m=s.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...m,...o6(h)]:m})}break}case"assistant":{if(s.parts!=null){let w=function(){const S=[];for(const C of x)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const A of C.details)switch(A.type){case"text":S.push({type:"reasoning",text:A.text,signature:A.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:A.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const A=C;throw new Error(`Unsupported part: ${A}`)}}i.push({role:"assistant",content:S});const E=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new QS({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:A,toolName:O,result:I}=C,D=a[O];return(D==null?void 0:D.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:A,toolName:O,result:D.experimental_toToolResultContent(I),experimental_content:D.experimental_toToolResultContent(I)}:{type:"tool-result",toolCallId:A,toolName:O,result:I}})}),x=[],_=!1,v++},v=0,_=!1,x=[];for(const S of s.parts)switch(S.type){case"text":{_&&w(),x.push(S);break}case"file":case"reasoning":{x.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==v&&w(),x.push(S),_=!0;break}}w();break}const m=s.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:f});break}const g=m.reduce((w,v)=>{var _;return Math.max(w,(_=v.step)!=null?_:0)},0);for(let w=0;w<=g;w++){const v=m.filter(_=>{var x;return((x=_.step)!=null?x:0)===w});v.length!==0&&(i.push({role:"assistant",content:[...u&&f&&w===0?[{type:"text",text:f}]:[],...v.map(({toolCallId:_,toolName:x,args:S})=>({type:"tool-call",toolCallId:_,toolName:x,args:S}))]}),i.push({role:"tool",content:v.map(_=>{if(!("result"in _))throw new QS({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:x,toolName:S,result:E}=_,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:S,result:E}})}))}f&&!u&&i.push({role:"assistant",content:f});break}case"data":break;default:{const m=c;throw new QS({originalMessage:s,message:`Unsupported role: ${m}`})}}}return i}function yle(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(ble);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function ble(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var yE=L.lazy(()=>L.union([L.null(),L.string(),L.number(),L.boolean(),L.record(L.string(),yE),L.array(yE)])),Wr=L.record(L.string(),L.record(L.string(),yE)),vle=L.array(L.union([L.object({type:L.literal("text"),text:L.string()}),L.object({type:L.literal("image"),data:L.string(),mimeType:L.string().optional()})])),F5=L.object({type:L.literal("text"),text:L.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),wle=L.object({type:L.literal("image"),image:L.union([R5,L.instanceof(URL)]),mimeType:L.string().optional(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),L5=L.object({type:L.literal("file"),data:L.union([R5,L.instanceof(URL)]),filename:L.string().optional(),mimeType:L.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),_le=L.object({type:L.literal("reasoning"),text:L.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),xle=L.object({type:L.literal("redacted-reasoning"),data:L.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Sle=L.object({type:L.literal("tool-call"),toolCallId:L.string(),toolName:L.string(),args:L.unknown(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Ele=L.object({type:L.literal("tool-result"),toolCallId:L.string(),toolName:L.string(),result:L.unknown(),content:vle.optional(),isError:L.boolean().optional(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Cle=L.object({role:L.literal("system"),content:L.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),kle=L.object({role:L.literal("user"),content:L.union([L.string(),L.array(L.union([F5,wle,L5]))]),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Ale=L.object({role:L.literal("assistant"),content:L.union([L.string(),L.array(L.union([F5,L5,_le,xle,Sle]))]),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Tle=L.object({role:L.literal("tool"),content:L.array(Ele),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Rle=L.union([Cle,kle,Ale,Tle]);function Nle({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new wl({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new wl({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new wl({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new wl({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=yle(e.messages);if(n==="other")throw new wl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?gle(e.messages,{tools:t}):e.messages;if(r.length===0)throw new wl({prompt:e,message:"messages must not be empty"});const a=$h({value:r,schema:L.array(Rle)});if(!a.success)throw new wl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Ile({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Ole(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Dle="JSON schema:",jle="You MUST answer with a JSON object that matches the JSON schema above.",Mle="You MUST answer with JSON.";function Ple({prompt:e,schema:t,schemaPrefix:n=t!=null?Dle:void 0,schemaSuffix:r=t!=null?jle:Mle}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function e2(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}Td({prefix:"aiobj",size:24});var vi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function s6(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Fle(){let e=[],t=null,n=!1,r=s6();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=s6(),await r.promise,a();try{const{value:i,done:o}=await e[0].read();o?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function Lle(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Td({prefix:"aiobj",size:24});var $5="AI_NoOutputSpecifiedError",B5=`vercel.ai.error.${$5}`,$le=Symbol.for(B5),z5,Ble=class extends xn{constructor({message:e="No output specified."}={}){super({name:$5,message:e}),this[z5]=!0}static isInstance(e){return xn.hasMarker(e,B5)}};z5=$le;var U5="AI_ToolExecutionError",q5=`vercel.ai.error.${U5}`,zle=Symbol.for(q5),H5,Ule=class extends xn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${ag(r)}`}){super({name:U5,message:a,cause:r}),this[H5]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return xn.hasMarker(e,q5)}};H5=zle;function qle(e){return e!=null&&Object.keys(e).length>0}function Hle({tools:e,toolChoice:t,activeTools:n}){return qle(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const o=i.type;switch(o){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:Mw(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const s=o;throw new Error(`Unsupported tool type: ${s}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var Vle=/^([\s\S]*?)(\s+)(\S*)$/;function Gle(e){const t=e.match(Vle);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var V5="AI_InvalidToolArgumentsError",G5=`vercel.ai.error.${V5}`,Wle=Symbol.for(G5),W5,K5=class extends xn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${ag(n)}`}){super({name:V5,message:r,cause:n}),this[W5]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return xn.hasMarker(e,G5)}};W5=Wle;var Z5="AI_NoSuchToolError",Y5=`vercel.ai.error.${Z5}`,Kle=Symbol.for(Y5),X5,bE=class extends xn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:Z5,message:n}),this[X5]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return xn.hasMarker(e,Y5)}};X5=Kle;var J5="AI_ToolCallRepairError",Q5=`vercel.ai.error.${J5}`,Zle=Symbol.for(Q5),eP,Yle=class extends xn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${ag(e)}`}){super({name:J5,message:n,cause:e}),this[eP]=!0,this.originalError=t}static isInstance(e){return xn.hasMarker(e,Q5)}};eP=Zle;async function Xle({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new bE({toolName:e.toolName});try{return await l6({toolCall:e,tools:t})}catch(i){if(n==null||!(bE.isInstance(i)||K5.isInstance(i)))throw i;let o=null;try{o=await n({toolCall:e,tools:t,parameterSchema:({toolName:s})=>Mw(t[s].parameters).jsonSchema,system:r,messages:a,error:i})}catch(s){throw new Yle({cause:s,originalError:i})}if(o==null)throw i;return await l6({toolCall:o,tools:t})}}async function l6({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new bE({toolName:e.toolName,availableTools:Object.keys(t)});const a=Mw(r.parameters),i=e.args.trim()===""?$h({value:{},schema:a}):cd({text:e.args,schema:a});if(i.success===!1)throw new K5({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function Jle(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function u6({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:o,generateMessageId:s}){const u=[];return u.push({role:"assistant",content:[...n.map(c=>c.type==="text"?{...c,type:"reasoning"}:{...c,type:"redacted-reasoning"}),...t.map(c=>({type:"file",data:c.base64,mimeType:c.mimeType})),{type:"text",text:e},...a],id:o}),i.length>0&&u.push({role:"tool",id:s(),content:i.map(c=>{const f=r[c.toolName];return(f==null?void 0:f.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:f.experimental_toToolResultContent(c.result),experimental_content:f.experimental_toToolResultContent(c.result)}:{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result}})}),u}Td({prefix:"aitxt",size:24});Td({prefix:"msg",size:24});var Qle={};Uk(Qle,{object:()=>rue,text:()=>nue});var tP="AI_InvalidStreamPartError",nP=`vercel.ai.error.${tP}`,eue=Symbol.for(nP),rP,tue=class extends xn{constructor({chunk:e,message:t}){super({name:tP,message:t}),this[rP]=!0,this.chunk=e}static isInstance(e){return xn.hasMarker(e,nP)}};rP=eue;var nue=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),rue=({schema:e})=>{const t=Mw(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Ple({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=zoe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=cd({text:n});if(!a.success)throw new a6({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=$h({value:a.value,schema:t});if(!i.success)throw new a6({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function aue(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function qk(e,t){const n=e.getReader(),r=t.getReader();let a,i,o=!1,s=!1;async function u(f){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}async function c(f){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}return new ReadableStream({async pull(f){try{if(o){await c(f);return}if(s){await u(f);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||f.enqueue(h.value),m===n?(a=void 0,h.done&&(await c(f),o=!0)):(i=void 0,h.done&&(s=!0,await u(f)))}catch(h){f.error(h)}},cancel(){n.cancel(),r.cancel()}})}function iue({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:o,abortSignal:s,repairToolCall:u}){let c=null;const f=new ReadableStream({start(x){c=x}}),h={},m=new Set;let g=!1,w;function v(){g&&m.size===0&&(w!=null&&c.enqueue(w),c.close())}const _=new TransformStream({async transform(x,S){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(x);break}case"file":{S.enqueue(new Qse({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await Xle({toolCall:x,tools:e,repairToolCall:u,system:i,messages:o});S.enqueue(C);const A=e[C.toolName];if(A.execute!=null){const O=Ts();m.add(O),gE({name:"ai.toolCall",attributes:$f({telemetry:a,attributes:{...mE({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async I=>A.execute(C.args,{toolCallId:C.toolCallId,messages:o,abortSignal:s}).then(D=>{c.enqueue({...C,type:"tool-result",result:D}),m.delete(O),v();try{I.setAttributes($f({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(D)}}}))}catch{}},D=>{c.enqueue({type:"error",error:new Ule({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:D})}),m.delete(O),v()})})}}catch(C){c.enqueue({type:"error",error:C})}break}case"finish":{w={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:Ile(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,v()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(_).pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){}})),f.pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){x.close()}}))])}})}var oue=Td({prefix:"aitxt",size:24}),sue=Td({prefix:"msg",size:24});function lue({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:u,maxSteps:c=1,experimental_generateMessageId:f=sue,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:g,experimental_providerMetadata:w,providerOptions:v=w,experimental_toolCallStreaming:_=!1,toolCallStreaming:x=_,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:A,onError:O,onFinish:I,onStepFinish:D,_internal:{now:B=Lle,generateId:K=oue,currentDate:Q=()=>new Date}={},...F}){return new cue({model:e,telemetry:g,headers:u,settings:F,maxRetries:o,abortSignal:s,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:aue(C),activeTools:S,repairToolCall:E,maxSteps:c,output:h,continueSteps:m,providerOptions:v,onChunk:A,onError:O,onFinish:I,onStepFinish:D,now:B,currentDate:Q,generateId:K,generateMessageId:f})}function uue(e){if(!e)return new TransformStream({transform(i,o){o.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:o=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:o}),n=""}return new TransformStream({transform(i,o){if(i.type==="step-finish"&&a({controller:o}),i.type!=="text-delta"){o.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const s=e.parsePartial({text:t});if(s!=null){const u=JSON.stringify(s.partial);u!==r&&(a({controller:o,partialOutput:s.partial}),r=u)}},flush(i){n.length>0&&a({controller:i})}})}var cue=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:o,prompt:s,messages:u,tools:c,toolChoice:f,toolCallStreaming:h,transforms:m,activeTools:g,repairToolCall:w,maxSteps:v,output:_,continueSteps:x,providerOptions:S,now:E,currentDate:C,generateId:A,generateMessageId:O,onChunk:I,onError:D,onFinish:B,onStepFinish:K}){this.warningsPromise=new vi,this.usagePromise=new vi,this.finishReasonPromise=new vi,this.providerMetadataPromise=new vi,this.textPromise=new vi,this.reasoningPromise=new vi,this.reasoningDetailsPromise=new vi,this.sourcesPromise=new vi,this.filesPromise=new vi,this.toolCallsPromise=new vi,this.toolResultsPromise=new vi,this.requestPromise=new vi,this.responsePromise=new vi,this.stepsPromise=new vi;var Q;if(v<1)throw new Mo({parameter:"maxSteps",value:v,message:"maxSteps must be at least 1"});this.output=_;let F="",W="",U="",he=[],ae=[],re,ee=[];const se=[],V={id:A(),timestamp:C(),modelId:e.modelId,messages:[]};let X=[],Y=[],ne,be,Ee="initial";const De=[];let Pe;const Re=new TransformStream({async transform(ce,ie){ie.enqueue(ce);const{part:J}=ce;if((J.type==="text-delta"||J.type==="reasoning"||J.type==="source"||J.type==="tool-call"||J.type==="tool-result"||J.type==="tool-call-streaming-start"||J.type==="tool-call-delta")&&await(I==null?void 0:I({chunk:J})),J.type==="error"&&await(D==null?void 0:D({error:J.error})),J.type==="text-delta"&&(F+=J.textDelta,W+=J.textDelta,U+=J.textDelta),J.type==="reasoning"&&(re==null?(re={type:"text",text:J.textDelta},he.push(re)):re.text+=J.textDelta),J.type==="reasoning-signature"){if(re==null)throw new xn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});re.signature=J.signature,re=void 0}if(J.type==="redacted-reasoning"&&he.push({type:"redacted",data:J.data}),J.type==="file"&&ae.push(J),J.type==="source"&&(se.push(J.source),ee.push(J.source)),J.type==="tool-call"&&X.push(J),J.type==="tool-result"&&Y.push(J),J.type==="step-finish"){const _e=u6({text:W,files:ae,reasoning:he,tools:c??{},toolCalls:X,toolResults:Y,messageId:J.messageId,generateMessageId:O}),Le=De.length;let xe="done";Le+1<v&&(x&&J.finishReason==="length"&&X.length===0?xe="continue":X.length>0&&Y.length===X.length&&(xe="tool-result"));const Ve={stepType:Ee,text:F,reasoning:Jle(he),reasoningDetails:he,files:ae,sources:ee,toolCalls:X,toolResults:Y,finishReason:J.finishReason,usage:J.usage,warnings:J.warnings,logprobs:J.logprobs,request:J.request,response:{...J.response,messages:[...V.messages,..._e]},providerMetadata:J.experimental_providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,isContinued:J.isContinued};await(K==null?void 0:K(Ve)),De.push(Ve),X=[],Y=[],F="",ee=[],he=[],ae=[],re=void 0,xe!=="done"&&(Ee=xe),xe!=="continue"&&(V.messages.push(..._e),W="")}J.type==="finish"&&(V.id=J.response.id,V.timestamp=J.response.timestamp,V.modelId=J.response.modelId,V.headers=J.response.headers,be=J.usage,ne=J.finishReason)},async flush(ce){var ie;try{if(De.length===0)return;const J=De[De.length-1];Ne.warningsPromise.resolve(J.warnings),Ne.requestPromise.resolve(J.request),Ne.responsePromise.resolve(J.response),Ne.toolCallsPromise.resolve(J.toolCalls),Ne.toolResultsPromise.resolve(J.toolResults),Ne.providerMetadataPromise.resolve(J.experimental_providerMetadata),Ne.reasoningPromise.resolve(J.reasoning),Ne.reasoningDetailsPromise.resolve(J.reasoningDetails);const _e=ne??"unknown",Le=be??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ne.finishReasonPromise.resolve(_e),Ne.usagePromise.resolve(Le),Ne.textPromise.resolve(U),Ne.sourcesPromise.resolve(se),Ne.filesPromise.resolve(J.files),Ne.stepsPromise.resolve(De),await(B==null?void 0:B({finishReason:_e,logprobs:void 0,usage:Le,text:U,reasoning:J.reasoning,reasoningDetails:J.reasoningDetails,files:J.files,sources:J.sources,toolCalls:J.toolCalls,toolResults:J.toolResults,request:(ie=J.request)!=null?ie:{},response:J.response,warnings:J.warnings,providerMetadata:J.providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,steps:De})),Pe.setAttributes($f({telemetry:t,attributes:{"ai.response.finishReason":_e,"ai.response.text":{output:()=>U},"ai.response.toolCalls":{output:()=>{var xe;return(xe=J.toolCalls)!=null&&xe.length?JSON.stringify(J.toolCalls):void 0}},"ai.usage.promptTokens":Le.promptTokens,"ai.usage.completionTokens":Le.completionTokens}}))}catch(J){ce.error(J)}finally{Pe.end()}}}),Te=Fle();this.addStream=Te.addStream,this.closeStream=Te.close;let He=Te.stream;for(const ce of m)He=He.pipeThrough(ce({tools:c,stopStream(){Te.terminate()}}));this.baseStream=He.pipeThrough(uue(_)).pipeThrough(Re);const{maxRetries:it,retry:Ie}=Wse({maxRetries:a}),Ae=Xse(t),z=Kse({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:it}}),ke=Nle({prompt:{system:(Q=_==null?void 0:_.injectIntoSystemPrompt({system:o,model:e}))!=null?Q:o,prompt:s,messages:u},tools:c}),Ne=this;gE({name:"ai.streamText",attributes:$f({telemetry:t,attributes:{...mE({operationId:"ai.streamText",telemetry:t}),...z,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:u})},"ai.settings.maxSteps":v}}),tracer:Ae,endWhenDone:!1,fn:async ce=>{Pe=ce;async function ie({currentStep:J,responseMessages:_e,usage:Le,stepType:xe,previousStepText:Ve,hasLeadingWhitespace:xt,messageId:ht}){var Et;const Lt=_e.length===0?ke.type:"messages",Tt=[...ke.messages,..._e],zt=await cle({prompt:{type:Lt,system:ke.system,messages:Tt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(Et=e.supportsUrl)==null?void 0:Et.bind(e)}),ge={type:"regular",...Hle({tools:c,toolChoice:f,activeTools:g})},{result:{stream:N,warnings:H,rawResponse:fe,request:Oe},doStreamSpan:ve,startTimestampMs:Ce}=await Ie(()=>gE({name:"ai.streamText.doStream",attributes:$f({telemetry:t,attributes:{...mE({operationId:"ai.streamText.doStream",telemetry:t}),...z,"ai.prompt.format":{input:()=>Lt},"ai.prompt.messages":{input:()=>JSON.stringify(zt)},"ai.prompt.tools":{input:()=>{var Bt;return(Bt=ge.tools)==null?void 0:Bt.map(Vt=>JSON.stringify(Vt))}},"ai.prompt.toolChoice":{input:()=>ge.toolChoice!=null?JSON.stringify(ge.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ae,endWhenDone:!1,fn:async Bt=>({startTimestampMs:E(),doStreamSpan:Bt,result:await e.doStream({mode:ge,...ple(r),inputFormat:Lt,responseFormat:_==null?void 0:_.responseFormat({model:e}),prompt:zt,providerMetadata:S,abortSignal:i,headers:n})})})),le=iue({tools:c,generatorStream:N,toolCallStreaming:h,tracer:Ae,telemetry:t,system:o,messages:Tt,repairToolCall:w,abortSignal:i}),ct=Oe??{},yt=[],M=[],Be=[],et=[];let me,je="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Ct,ye=!0,q="",$=xe==="continue"?Ve:"",G,pe={id:A(),timestamp:C(),modelId:e.modelId},de="",Fe=!1,ot=!0,jt=!1;async function un({controller:Bt,chunk:Vt}){Bt.enqueue(Vt),q+=Vt.textDelta,$+=Vt.textDelta,Fe=!0,jt=Vt.textDelta.trimEnd()!==Vt.textDelta}Ne.addStream(le.pipeThrough(new TransformStream({async transform(Bt,Vt){var Xt,Tn,Bn;if(ye){const hr=E()-Ce;ye=!1,ve.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":hr}),ve.setAttributes({"ai.response.msToFirstChunk":hr}),Vt.enqueue({type:"step-start",messageId:ht,request:ct,warnings:H??[]})}if(Bt.type==="text-delta"&&Bt.textDelta.length===0)return;const fr=Bt.type;switch(fr){case"text-delta":{if(x){const hr=ot&&xt?Bt.textDelta.trimStart():Bt.textDelta;if(hr.length===0)break;ot=!1,de+=hr;const Dn=Gle(de);Dn!=null&&(de=Dn.suffix,await un({controller:Vt,chunk:{type:"text-delta",textDelta:Dn.prefix+Dn.whitespace}}))}else await un({controller:Vt,chunk:Bt});break}case"reasoning":{Vt.enqueue(Bt),me==null?(me={type:"text",text:Bt.textDelta},Be.push(me)):me.text+=Bt.textDelta;break}case"reasoning-signature":{if(Vt.enqueue(Bt),me==null)throw new tue({chunk:Bt,message:"reasoning-signature without reasoning"});me.signature=Bt.signature,me=void 0;break}case"redacted-reasoning":{Vt.enqueue(Bt),Be.push({type:"redacted",data:Bt.data});break}case"tool-call":{Vt.enqueue(Bt),yt.push(Bt);break}case"tool-result":{Vt.enqueue(Bt),M.push(Bt);break}case"response-metadata":{pe={id:(Xt=Bt.id)!=null?Xt:pe.id,timestamp:(Tn=Bt.timestamp)!=null?Tn:pe.timestamp,modelId:(Bn=Bt.modelId)!=null?Bn:pe.modelId};break}case"finish":{Ke=Bt.usage,je=Bt.finishReason,Ct=Bt.experimental_providerMetadata,G=Bt.logprobs;const hr=E()-Ce;ve.addEvent("ai.stream.finish"),ve.setAttributes({"ai.response.msToFinish":hr,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/hr});break}case"file":{et.push(Bt),Vt.enqueue(Bt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Vt.enqueue(Bt);break}case"error":{Vt.enqueue(Bt),je="error";break}default:{const hr=fr;throw new Error(`Unknown chunk type: ${hr}`)}}},async flush(Bt){const Vt=yt.length>0?JSON.stringify(yt):void 0;let Xt="done";J+1<v&&(x&&je==="length"&&yt.length===0?Xt="continue":yt.length>0&&M.length===yt.length&&(Xt="tool-result")),x&&de.length>0&&(Xt!=="continue"||xe==="continue"&&!Fe)&&(await un({controller:Bt,chunk:{type:"text-delta",textDelta:de}}),de="");try{ve.setAttributes($f({telemetry:t,attributes:{"ai.response.finishReason":je,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>Vt},"ai.response.id":pe.id,"ai.response.model":pe.modelId,"ai.response.timestamp":pe.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[je],"gen_ai.response.id":pe.id,"gen_ai.response.model":pe.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{ve.end()}Bt.enqueue({type:"step-finish",finishReason:je,usage:Ke,providerMetadata:Ct,experimental_providerMetadata:Ct,logprobs:G,request:ct,response:{...pe,headers:fe==null?void 0:fe.headers},warnings:H,isContinued:Xt==="continue",messageId:ht});const Tn=Ole(Le,Ke);if(Xt==="done")Bt.enqueue({type:"finish",finishReason:je,usage:Tn,providerMetadata:Ct,experimental_providerMetadata:Ct,logprobs:G,response:{...pe,headers:fe==null?void 0:fe.headers}}),Ne.closeStream();else{if(xe==="continue"){const Bn=_e[_e.length-1];typeof Bn.content=="string"?Bn.content+=q:Bn.content.push({text:q,type:"text"})}else _e.push(...u6({text:q,files:et,reasoning:Be,tools:c??{},toolCalls:yt,toolResults:M,messageId:ht,generateMessageId:O}));await ie({currentStep:J+1,responseMessages:_e,usage:Tn,stepType:Xt,previousStepText:$,hasLeadingWhitespace:jt,messageId:Xt==="continue"?ht:O()})}}})))}await ie({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:O()})}}).catch(ce=>{Ne.addStream(new ReadableStream({start(ie){ie.enqueue({type:"error",error:ce}),ie.close()}})),Ne.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return e2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return e2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new Ble;return e2(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,o)=>{const s=i.type;switch(s){case"text-delta":{o.enqueue(Ga("text",i.textDelta));break}case"reasoning":{n&&o.enqueue(Ga("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&o.enqueue(Ga("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&o.enqueue(Ga("reasoning_signature",{signature:i.signature}));break}case"file":{o.enqueue(Ga("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&o.enqueue(Ga("source",i.source));break}case"tool-call-streaming-start":{o.enqueue(Ga("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{o.enqueue(Ga("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{o.enqueue(Ga("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{o.enqueue(Ga("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{o.enqueue(Ga("error",e(i.error)));break}case"step-start":{o.enqueue(Ga("start_step",{messageId:i.messageId}));break}case"step-finish":{o.enqueue(Ga("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&o.enqueue(Ga("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const u=s;throw new Error(`Unknown chunk type: ${u}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c}={}){n6({response:e,status:t,statusText:n,headers:t6(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){n6({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:t6(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?qk(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}),{status:t,statusText:n,headers:hv(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:hv(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};var due=L.object({name:L.string(),version:L.string()}).passthrough(),Hk=L.object({_meta:L.optional(L.object({}).passthrough())}).passthrough(),d0=Hk,fue=L.object({method:L.string(),params:L.optional(Hk)}),hue=L.object({experimental:L.optional(L.object({}).passthrough()),logging:L.optional(L.object({}).passthrough()),prompts:L.optional(L.object({listChanged:L.optional(L.boolean())}).passthrough()),resources:L.optional(L.object({subscribe:L.optional(L.boolean()),listChanged:L.optional(L.boolean())}).passthrough()),tools:L.optional(L.object({listChanged:L.optional(L.boolean())}).passthrough())}).passthrough();d0.extend({protocolVersion:L.string(),capabilities:hue,serverInfo:due,instructions:L.optional(L.string())});var pue=d0.extend({nextCursor:L.optional(L.string())}),mue=L.object({name:L.string(),description:L.optional(L.string()),inputSchema:L.object({type:L.literal("object"),properties:L.optional(L.object({}).passthrough())}).passthrough()}).passthrough();pue.extend({tools:L.array(mue)});var gue=L.object({type:L.literal("text"),text:L.string()}).passthrough(),yue=L.object({type:L.literal("image"),data:L.string().base64(),mimeType:L.string()}).passthrough(),aP=L.object({uri:L.string(),mimeType:L.optional(L.string())}).passthrough(),bue=aP.extend({text:L.string()}),vue=aP.extend({blob:L.string().base64()}),wue=L.object({type:L.literal("resource"),resource:L.union([bue,vue])}).passthrough();d0.extend({content:L.array(L.union([gue,yue,wue])),isError:L.boolean().default(!1).optional()}).or(d0.extend({toolResult:L.unknown()}));var Pw="2.0",_ue=L.object({jsonrpc:L.literal(Pw),id:L.union([L.string(),L.number().int()])}).merge(fue).strict(),xue=L.object({jsonrpc:L.literal(Pw),id:L.union([L.string(),L.number().int()]),result:d0}).strict(),Sue=L.object({jsonrpc:L.literal(Pw),id:L.union([L.string(),L.number().int()]),error:L.object({code:L.number().int(),message:L.string(),data:L.optional(L.unknown())})}).strict(),Eue=L.object({jsonrpc:L.literal(Pw)}).merge(L.object({method:L.string(),params:L.optional(Hk)})).strict();L.union([_ue,Eue,xue,Sue]);var Cue={};Uk(Cue,{mergeIntoDataStream:()=>Tue,toDataStream:()=>kue,toDataStreamResponse:()=>Aue});function iP(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function Vk(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&c6((a=n.data)==null?void 0:a.chunk,r);return}c6(n,r)}})).pipeThrough(iP(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Ga("text",n))}}))}function kue(e,t){return Vk(e,t).pipeThrough(new TextEncoderStream)}function Aue(e,t){var n;const r=Vk(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,o=a?qk(a.stream,r):r;return new Response(o,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:hv(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Tue(e,t){t.dataStream.merge(Vk(e,t.callbacks))}function c6(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var Rue={};Uk(Rue,{mergeIntoDataStream:()=>Oue,toDataStream:()=>Nue,toDataStreamResponse:()=>Iue});function Gk(e,t){const n=Due();return Aae(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(iP(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(Ga("text",r))}}))}function Nue(e,t){return Gk(e,t).pipeThrough(new TextEncoderStream)}function Iue(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,o=Gk(e,i).pipeThrough(new TextEncoderStream),s=a?qk(a.stream,o):o;return new Response(s,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:hv(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Oue(e,t){t.dataStream.merge(Gk(e,t.callbacks))}function Due(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}function jue({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:o}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:o});break}case"developer":{r.push({role:"developer",content:o});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=n;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{if(o.length===1&&o[0].type==="text"){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map((s,u)=>{var c,f,h,m;switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(c=s.mimeType)!=null?c:"image/jpeg"};base64,${dh(s.image)}`,detail:(h=(f=s.providerMetadata)==null?void 0:f.openai)==null?void 0:h.imageDetail}};case"file":{if(s.data instanceof URL)throw new wr({functionality:"'File content parts with URL data' functionality not supported."});switch(s.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:s.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:s.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=s.filename)!=null?m:`part-${u}.pdf`,file_data:`data:application/pdf;base64,${s.data}`}};default:throw new wr({functionality:`File content part type ${s.mimeType} in user messages`})}}}})});break}case"assistant":{let s="";const u=[];for(const c of o)switch(c.type){case"text":{s+=c.text;break}case"tool-call":{u.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(u.length>1)throw new wr({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:s,function_call:u.length>0?u[0].function:void 0})}else r.push({role:"assistant",content:s,tool_calls:u.length>0?u:void 0});break}case"tool":{for(const s of o)t?r.push({role:"function",name:s.toolName,content:JSON.stringify(s.result)}):r.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result)});break}default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return{messages:r,warnings:a}}function d6(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function mv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Wk=L.object({error:L.object({message:L.string(),type:L.string().nullish(),param:L.any().nullish(),code:L.union([L.string(),L.number()]).nullish()})}),uc=q8({errorSchema:Wk,errorToMessage:e=>e.error.message});function gv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Mue({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice;if(t){const c=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):c.push({name:h.name,description:h.description,parameters:h.parameters});if(o==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new wr({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:o.toolName},toolWarnings:i}}}const s=[];for(const c of a)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):s.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(o==null)return{tools:s,tool_choice:void 0,toolWarnings:i};const u=o.type;switch(u){case"auto":case"none":case"required":return{tools:s,tool_choice:u,toolWarnings:i};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const c=u;throw new wr({functionality:`Unsupported tool choice type: ${c}`})}}}var Pue=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:vE(this.modelId)}get defaultObjectGenerationMode(){return $ue(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var m,g,w,v,_,x,S,E;const C=e.type,A=[];i!=null&&A.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&A.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const O=this.settings.useLegacyFunctionCalling;if(O&&this.settings.parallelToolCalls===!0)throw new wr({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(O&&this.supportsStructuredOutputs)throw new wr({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:I,warnings:D}=jue({prompt:t,useLegacyFunctionCalling:O,systemMessageMode:Bue(this.modelId)});A.push(...D);const B={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(m=c.name)!=null?m:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:f,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(w=h==null?void 0:h.openai)==null?void 0:w.store,metadata:(v=h==null?void 0:h.openai)==null?void 0:v.metadata,prediction:(_=h==null?void 0:h.openai)==null?void 0:_.prediction,reasoning_effort:(S=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:I};switch(vE(this.modelId)&&(B.temperature!=null&&(B.temperature=void 0,A.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),B.top_p!=null&&(B.top_p=void 0,A.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),B.frequency_penalty!=null&&(B.frequency_penalty=void 0,A.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),B.presence_penalty!=null&&(B.presence_penalty=void 0,A.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),B.logit_bias!=null&&(B.logit_bias=void 0,A.push({type:"other",message:"logitBias is not supported for reasoning models"})),B.logprobs!=null&&(B.logprobs=void 0,A.push({type:"other",message:"logprobs is not supported for reasoning models"})),B.top_logprobs!=null&&(B.top_logprobs=void 0,A.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),B.max_tokens!=null&&(B.max_completion_tokens==null&&(B.max_completion_tokens=B.max_tokens),B.max_tokens=void 0)),C){case"regular":{const{tools:K,tool_choice:Q,functions:F,function_call:W,toolWarnings:U}=Mue({mode:e,useLegacyFunctionCalling:O,structuredOutputs:this.supportsStructuredOutputs});return{args:{...B,tools:K,tool_choice:Q,functions:F,function_call:W},warnings:[...A,...U]}}case"object-json":return{args:{...B,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:A};case"object-tool":return{args:O?{...B,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...B,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:A};default:{const K=C;throw new Error(`Unsupported type: ${K}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u;const{args:c,warnings:f}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:g}=await Yo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:c,failedResponseHandler:uc,successfulResponseHandler:Rd(Fue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:w,...v}=c,_=m.choices[0],x=(t=m.usage)==null?void 0:t.completion_tokens_details,S=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=_.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&_.message.function_call?[{toolCallType:"function",toolCallId:Ts(),toolName:_.message.function_call.name,args:_.message.function_call.arguments}]:(a=_.message.tool_calls)==null?void 0:a.map(C=>{var A;return{toolCallType:"function",toolCallId:(A=C.id)!=null?A:Ts(),toolName:C.function.name,args:C.function.arguments}}),finishReason:mv(_.finish_reason),usage:{promptTokens:(o=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(u=(s=m.usage)==null?void 0:s.completion_tokens)!=null?u:NaN},rawCall:{rawPrompt:w,rawSettings:v},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(c)},response:gv(m),warnings:f,logprobs:d6(_.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...v.response}),v.text&&x.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const S of v.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),x.enqueue({type:"tool-call",...S});x.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),x.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Yo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:r,failedResponseHandler:uc,successfulResponseHandler:Mk(Lue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...s}=t,u=[];let c="unknown",f={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:g}=this.settings,w={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(v,_){var x,S,E,C,A,O,I,D,B,K,Q,F;if(!v.success){c="error",_.enqueue({type:"error",error:v.error});return}const W=v.value;if("error"in W){c="error",_.enqueue({type:"error",error:W.error});return}if(m&&(m=!1,_.enqueue({type:"response-metadata",...gv(W)})),W.usage!=null){const{prompt_tokens:ee,completion_tokens:se,prompt_tokens_details:V,completion_tokens_details:X}=W.usage;f={promptTokens:ee??void 0,completionTokens:se??void 0},(X==null?void 0:X.reasoning_tokens)!=null&&(w.openai.reasoningTokens=X==null?void 0:X.reasoning_tokens),(X==null?void 0:X.accepted_prediction_tokens)!=null&&(w.openai.acceptedPredictionTokens=X==null?void 0:X.accepted_prediction_tokens),(X==null?void 0:X.rejected_prediction_tokens)!=null&&(w.openai.rejectedPredictionTokens=X==null?void 0:X.rejected_prediction_tokens),(V==null?void 0:V.cached_tokens)!=null&&(w.openai.cachedPromptTokens=V==null?void 0:V.cached_tokens)}const U=W.choices[0];if((U==null?void 0:U.finish_reason)!=null&&(c=mv(U.finish_reason)),(U==null?void 0:U.delta)==null)return;const he=U.delta;he.content!=null&&_.enqueue({type:"text-delta",textDelta:he.content});const ae=d6(U==null?void 0:U.logprobs);ae!=null&&ae.length&&(h===void 0&&(h=[]),h.push(...ae));const re=g&&he.function_call!=null?[{type:"function",id:Ts(),function:he.function_call,index:0}]:he.tool_calls;if(re!=null)for(const ee of re){const se=ee.index;if(u[se]==null){if(ee.type!=="function")throw new Hf({data:ee,message:"Expected 'function' type."});if(ee.id==null)throw new Hf({data:ee,message:"Expected 'id' to be a string."});if(((x=ee.function)==null?void 0:x.name)==null)throw new Hf({data:ee,message:"Expected 'function.name' to be a string."});u[se]={id:ee.id,type:"function",function:{name:ee.function.name,arguments:(S=ee.function.arguments)!=null?S:""},hasFinished:!1};const X=u[se];((E=X.function)==null?void 0:E.name)!=null&&((C=X.function)==null?void 0:C.arguments)!=null&&(X.function.arguments.length>0&&_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:X.id,toolName:X.function.name,argsTextDelta:X.function.arguments}),V4(X.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(A=X.id)!=null?A:Ts(),toolName:X.function.name,args:X.function.arguments}),X.hasFinished=!0));continue}const V=u[se];V.hasFinished||(((O=ee.function)==null?void 0:O.arguments)!=null&&(V.function.arguments+=(D=(I=ee.function)==null?void 0:I.arguments)!=null?D:""),_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:V.id,toolName:V.function.name,argsTextDelta:(B=ee.function.arguments)!=null?B:""}),((K=V.function)==null?void 0:K.name)!=null&&((Q=V.function)==null?void 0:Q.arguments)!=null&&V4(V.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(F=V.id)!=null?F:Ts(),toolName:V.function.name,args:V.function.arguments}),V.hasFinished=!0))}},flush(v){var _,x;v.enqueue({type:"finish",finishReason:c,logprobs:h,usage:{promptTokens:(_=f.promptTokens)!=null?_:NaN,completionTokens:(x=f.completionTokens)!=null?x:NaN},...w!=null?{providerMetadata:w}:{}})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},oP=L.object({prompt_tokens:L.number().nullish(),completion_tokens:L.number().nullish(),prompt_tokens_details:L.object({cached_tokens:L.number().nullish()}).nullish(),completion_tokens_details:L.object({reasoning_tokens:L.number().nullish(),accepted_prediction_tokens:L.number().nullish(),rejected_prediction_tokens:L.number().nullish()}).nullish()}).nullish(),Fue=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({message:L.object({role:L.literal("assistant").nullish(),content:L.string().nullish(),function_call:L.object({arguments:L.string(),name:L.string()}).nullish(),tool_calls:L.array(L.object({id:L.string().nullish(),type:L.literal("function"),function:L.object({name:L.string(),arguments:L.string()})})).nullish()}),index:L.number(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullish(),finish_reason:L.string().nullish()})),usage:oP}),Lue=L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({delta:L.object({role:L.enum(["assistant"]).nullish(),content:L.string().nullish(),function_call:L.object({name:L.string().optional(),arguments:L.string().optional()}).nullish(),tool_calls:L.array(L.object({index:L.number(),id:L.string().nullish(),type:L.literal("function").optional(),function:L.object({name:L.string().nullish(),arguments:L.string().nullish()})})).nullish()}).nullish(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullish(),finish_reason:L.string().nullable().optional(),index:L.number()})),usage:oP}),Wk]);function vE(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function $ue(e){return e.startsWith("gpt-4o-audio-preview")}function Bue(e){var t,n;return vE(e)?(n=(t=zue[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var zue={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function Uue({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new wl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new wr({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new wr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new wr({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function f6(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var que=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h}){var m;const g=e.type,w=[];o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:v,stopSequences:_}=Uue({prompt:n,inputFormat:t}),x=[..._??[],...c??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,prompt:v,stop:x.length>0?x:void 0};switch(g){case"regular":{if((m=e.tools)!=null&&m.length)throw new wr({functionality:"tools"});if(e.toolChoice)throw new wr({functionality:"toolChoice"});return{args:S,warnings:w}}case"object-json":throw new wr({functionality:"object-json mode"});case"object-tool":throw new wr({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Yo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:t,failedResponseHandler:uc,successfulResponseHandler:Rd(Hue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,u=a.choices[0];return{text:u.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:mv(u.finish_reason),logprobs:f6(u.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r,body:i},response:gv(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Yo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:r,failedResponseHandler:uc,successfulResponseHandler:Mk(Vue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,g){if(!m.success){u="error",g.enqueue({type:"error",error:m.error});return}const w=m.value;if("error"in w){u="error",g.enqueue({type:"error",error:w.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...gv(w)})),w.usage!=null&&(c={promptTokens:w.usage.prompt_tokens,completionTokens:w.usage.completion_tokens});const v=w.choices[0];(v==null?void 0:v.finish_reason)!=null&&(u=mv(v.finish_reason)),(v==null?void 0:v.text)!=null&&g.enqueue({type:"text-delta",textDelta:v.text});const _=f6(v==null?void 0:v.logprobs);_!=null&&_.length&&(f===void 0&&(f=[]),f.push(..._))},flush(m){m.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},Hue=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string(),logprobs:L.object({tokens:L.array(L.string()),token_logprobs:L.array(L.number()),top_logprobs:L.array(L.record(L.string(),L.number())).nullable()}).nullish()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()})}),Vue=L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string().nullish(),index:L.number(),logprobs:L.object({tokens:L.array(L.string()),token_logprobs:L.array(L.number()),top_logprobs:L.array(L.record(L.string(),L.number())).nullable()}).nullish()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).nullish()}),Wk]),Gue=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new jk({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Yo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Fs(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:uc,successfulResponseHandler:Rd(Wue),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Wue=L.object({data:L.array(L.object({embedding:L.array(L.number())})),usage:L.object({prompt_tokens:L.number()}).nullish()}),Kue={"dall-e-3":1,"dall-e-2":10},Zue=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:Kue[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&m.push({type:"unsupported-setting",setting:"seed"});const g=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:w,responseHeaders:v}=await Yo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Fs(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:uc,successfulResponseHandler:Rd(Yue),abortSignal:s,fetch:this.config.fetch});return{images:w.data.map(_=>_.b64_json),warnings:m,response:{timestamp:g,modelId:this.modelId,headers:v}}}},Yue=L.object({data:L.array(L.object({b64_json:L.string()}))});function Xue({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=t;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{n.push({role:"user",content:i.map((o,s)=>{var u,c,f,h;switch(o.type){case"text":return{type:"input_text",text:o.text};case"image":return{type:"input_image",image_url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${dh(o.image)}`,detail:(f=(c=o.providerMetadata)==null?void 0:c.openai)==null?void 0:f.imageDetail};case"file":{if(o.data instanceof URL)throw new wr({functionality:"File URLs in user messages"});switch(o.mimeType){case"application/pdf":return{type:"input_file",filename:(h=o.filename)!=null?h:`part-${s}.pdf`,file_data:`data:application/pdf;base64,${o.data}`};default:throw new wr({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const o of i)switch(o.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:o.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:o.toolCallId,name:o.toolName,arguments:JSON.stringify(o.args)});break}}break}case"tool":{for(const o of i)n.push({type:"function_call_output",call_id:o.toolCallId,output:JSON.stringify(o.result)});break}default:{const o=a;throw new Error(`Unsupported role: ${o}`)}}return{messages:n,warnings:r}}function h6({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function Jue({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)switch(u.type){case"function":o.push({type:"function",name:u.name,description:u.description,parameters:u.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(u.id){case"openai.web_search_preview":o.push({type:"web_search_preview",search_context_size:u.args.searchContextSize,user_location:u.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:u});break}break;default:a.push({type:"unsupported-tool",tool:u});break}if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:o,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:o,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const u=s;throw new wr({functionality:`Unsupported tool choice type: ${u}`})}}}var Que=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,seed:u,prompt:c,providerMetadata:f,responseFormat:h}){var m,g,w;const v=[],_=mce(this.modelId),x=e.type;i!=null&&v.push({type:"unsupported-setting",setting:"topK"}),u!=null&&v.push({type:"unsupported-setting",setting:"seed"}),o!=null&&v.push({type:"unsupported-setting",setting:"presencePenalty"}),s!=null&&v.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&v.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=Xue({prompt:c,systemMessageMode:_.systemMessageMode});v.push(...E);const C=Bae({provider:"openai",providerOptions:f,schema:gce}),A=(m=C==null?void 0:C.strictSchemas)!=null?m:!0,O={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:A,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,..._.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},..._.requiredAutoTruncation&&{truncation:"auto"}};switch(_.isReasoningModel&&(O.temperature!=null&&(O.temperature=void 0,v.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),O.top_p!=null&&(O.top_p=void 0,v.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:I,tool_choice:D,toolWarnings:B}=Jue({mode:e,strict:A});return{args:{...O,tools:I,tool_choice:D},warnings:[...v,...B]}}case"object-json":return{args:{...O,text:{format:e.schema!=null?{type:"json_schema",strict:A,name:(w=e.name)!=null?w:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:v};case"object-tool":return{args:{...O,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:A}]},warnings:v};default:{const I=x;throw new Error(`Unsupported type: ${I}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=this.getArgs(e),{responseHeaders:u,value:c,rawValue:f}=await Yo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:o,failedResponseHandler:uc,successfulResponseHandler:Rd(L.object({id:L.string(),created_at:L.number(),model:L.string(),output:L.array(L.discriminatedUnion("type",[L.object({type:L.literal("message"),role:L.literal("assistant"),content:L.array(L.object({type:L.literal("output_text"),text:L.string(),annotations:L.array(L.object({type:L.literal("url_citation"),start_index:L.number(),end_index:L.number(),url:L.string(),title:L.string()}))}))}),L.object({type:L.literal("function_call"),call_id:L.string(),name:L.string(),arguments:L.string()}),L.object({type:L.literal("web_search_call")}),L.object({type:L.literal("computer_call")}),L.object({type:L.literal("reasoning")})])),incomplete_details:L.object({reason:L.string()}).nullable(),usage:sP})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),m=c.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(w=>{var v,_,x;return{sourceType:"url",id:(x=(_=(v=this.config).generateId)==null?void 0:_.call(v))!=null?x:Ts(),url:w.url,title:w.title}})),finishReason:h6({finishReason:(t=c.incomplete_details)==null?void 0:t.reason,hasToolCalls:m.length>0}),toolCalls:m.length>0?m:void 0,usage:{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:u,body:f},request:{body:JSON.stringify(o)},response:{id:c.id,timestamp:new Date(c.created_at*1e3),modelId:c.model},providerMetadata:{openai:{responseId:c.id,cachedPromptTokens:(r=(n=c.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=c.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:s}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Yo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:uc,successfulResponseHandler:Mk(sce),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let o="unknown",s=NaN,u=NaN,c=null,f=null,h=null;const m={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(w,v){var _,x,S,E,C,A,O,I;if(!w.success){o="error",v.enqueue({type:"error",error:w.error});return}const D=w.value;if(hce(D))D.item.type==="function_call"&&(m[D.output_index]={toolName:D.item.name,toolCallId:D.item.call_id},v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:D.item.call_id,toolName:D.item.name,argsTextDelta:D.item.arguments}));else if(fce(D)){const B=m[D.output_index];B!=null&&v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:B.toolCallId,toolName:B.toolName,argsTextDelta:D.delta})}else dce(D)?(h=D.response.id,v.enqueue({type:"response-metadata",id:D.response.id,timestamp:new Date(D.response.created_at*1e3),modelId:D.response.model})):lce(D)?v.enqueue({type:"text-delta",textDelta:D.delta}):uce(D)&&D.item.type==="function_call"?(m[D.output_index]=void 0,g=!0,v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:D.item.call_id,toolName:D.item.name,args:D.item.arguments})):cce(D)?(o=h6({finishReason:(_=D.response.incomplete_details)==null?void 0:_.reason,hasToolCalls:g}),s=D.response.usage.input_tokens,u=D.response.usage.output_tokens,c=(S=(x=D.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?S:c,f=(C=(E=D.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:f):pce(D)&&v.enqueue({type:"source",source:{sourceType:"url",id:(I=(O=(A=i.config).generateId)==null?void 0:O.call(A))!=null?I:Ts(),url:D.annotation.url,title:D.annotation.title}})},flush(w){w.enqueue({type:"finish",finishReason:o,usage:{promptTokens:s,completionTokens:u},...(c!=null||f!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:c,reasoningTokens:f}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},sP=L.object({input_tokens:L.number(),input_tokens_details:L.object({cached_tokens:L.number().nullish()}).nullish(),output_tokens:L.number(),output_tokens_details:L.object({reasoning_tokens:L.number().nullish()}).nullish()}),ece=L.object({type:L.literal("response.output_text.delta"),delta:L.string()}),tce=L.object({type:L.enum(["response.completed","response.incomplete"]),response:L.object({incomplete_details:L.object({reason:L.string()}).nullish(),usage:sP})}),nce=L.object({type:L.literal("response.created"),response:L.object({id:L.string(),created_at:L.number(),model:L.string()})}),rce=L.object({type:L.literal("response.output_item.done"),output_index:L.number(),item:L.discriminatedUnion("type",[L.object({type:L.literal("message")}),L.object({type:L.literal("function_call"),id:L.string(),call_id:L.string(),name:L.string(),arguments:L.string(),status:L.literal("completed")})])}),ace=L.object({type:L.literal("response.function_call_arguments.delta"),item_id:L.string(),output_index:L.number(),delta:L.string()}),ice=L.object({type:L.literal("response.output_item.added"),output_index:L.number(),item:L.discriminatedUnion("type",[L.object({type:L.literal("message")}),L.object({type:L.literal("function_call"),id:L.string(),call_id:L.string(),name:L.string(),arguments:L.string()})])}),oce=L.object({type:L.literal("response.output_text.annotation.added"),annotation:L.object({type:L.literal("url_citation"),url:L.string(),title:L.string()})}),sce=L.union([ece,tce,nce,rce,ace,ice,oce,L.object({type:L.string()}).passthrough()]);function lce(e){return e.type==="response.output_text.delta"}function uce(e){return e.type==="response.output_item.done"}function cce(e){return e.type==="response.completed"||e.type==="response.incomplete"}function dce(e){return e.type==="response.created"}function fce(e){return e.type==="response.function_call_arguments.delta"}function hce(e){return e.type==="response.output_item.added"}function pce(e){return e.type==="response.output_text.annotation.added"}function mce(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var gce=L.object({metadata:L.any().nullish(),parallelToolCalls:L.boolean().nullish(),previousResponseId:L.string().nullish(),store:L.boolean().nullish(),user:L.string().nullish(),reasoningEffort:L.string().nullish(),strictSchemas:L.boolean().nullish(),instructions:L.string().nullish()}),yce=L.object({});function bce({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:yce}}var vce={webSearchPreview:bce};function lP(e={}){var t,n,r;const a=(t=V8(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",o=(r=e.name)!=null?r:"openai",s=()=>({Authorization:`Bearer ${Dae({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),u=(v,_={})=>new Pue(v,_,{provider:`${o}.chat`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),c=(v,_={})=>new que(v,_,{provider:`${o}.completion`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),f=(v,_={})=>new Gue(v,_,{provider:`${o}.embedding`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),h=(v,_={})=>new Zue(v,_,{provider:`${o}.image`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),m=(v,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return v==="gpt-3.5-turbo-instruct"?c(v,_):u(v,_)},g=v=>new Que(v,{provider:`${o}.responses`,url:({path:_})=>`${a}${_}`,headers:s,fetch:e.fetch}),w=function(v,_){return m(v,_)};return w.languageModel=m,w.chat=u,w.completion=c,w.responses=g,w.embedding=f,w.textEmbedding=f,w.textEmbeddingModel=f,w.image=h,w.imageModel=h,w.tools=vce,w}lP({compatibility:"strict"});var uP="vercel.ai.error",wce=Symbol.for(uP),cP,_ce=class dP extends Error{constructor({name:t,message:n,cause:r}){super(n),this[cP]=!0,this.name=t,this.cause=r}static isInstance(t){return dP.hasMarker(t,uP)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};cP=wce;var Ja=_ce,fP="AI_APICallError",hP=`vercel.ai.error.${fP}`,xce=Symbol.for(hP),pP,El=class extends Ja{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:fP,message:t,cause:s}),this[pP]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Ja.hasMarker(t,hP)}};pP=xce;var mP="AI_EmptyResponseBodyError",gP=`vercel.ai.error.${mP}`,Sce=Symbol.for(gP),yP,Ece=class extends Ja{constructor({message:t="Empty response body"}={}){super({name:mP,message:t}),this[yP]=!0}static isInstance(t){return Ja.hasMarker(t,gP)}};yP=Sce;function bP(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var vP="AI_InvalidArgumentError",wP=`vercel.ai.error.${vP}`,Cce=Symbol.for(wP),_P,xP=class extends Ja{constructor({message:t,cause:n,argument:r}){super({name:vP,message:t,cause:n}),this[_P]=!0,this.argument=r}static isInstance(t){return Ja.hasMarker(t,wP)}};_P=Cce;var SP="AI_JSONParseError",EP=`vercel.ai.error.${SP}`,kce=Symbol.for(EP),CP,yv=class extends Ja{constructor({text:t,cause:n}){super({name:SP,message:`JSON parsing failed: Text: ${t}.
Error message: ${bP(n)}`,cause:n}),this[CP]=!0,this.text=t}static isInstance(t){return Ja.hasMarker(t,EP)}};CP=kce;var kP="AI_LoadAPIKeyError",AP=`vercel.ai.error.${kP}`,Ace=Symbol.for(AP),TP,nb=class extends Ja{constructor({message:t}){super({name:kP,message:t}),this[TP]=!0}static isInstance(t){return Ja.hasMarker(t,AP)}};TP=Ace;var RP="AI_TooManyEmbeddingValuesForCallError",NP=`vercel.ai.error.${RP}`,Tce=Symbol.for(NP),IP,Rce=class extends Ja{constructor(e){super({name:RP,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[IP]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Ja.hasMarker(e,NP)}};IP=Tce;var OP="AI_TypeValidationError",DP=`vercel.ai.error.${OP}`,Nce=Symbol.for(DP),jP,Ice=class wE extends Ja{constructor({value:t,cause:n}){super({name:OP,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${bP(n)}`,cause:n}),this[jP]=!0,this.value=t}static isInstance(t){return Ja.hasMarker(t,DP)}static wrap({value:t,cause:n}){return wE.isInstance(n)&&n.value===t?n:new wE({value:t,cause:n})}};jP=Nce;var bv=Ice,MP="AI_UnsupportedFunctionalityError",PP=`vercel.ai.error.${MP}`,Oce=Symbol.for(PP),FP,bb=class extends Ja{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:MP,message:n}),this[FP]=!0,this.functionality=t}static isInstance(t){return Ja.hasMarker(t,PP)}};FP=Oce;let Dce=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var jce={};function _E(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Mce(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=Pce(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function Pce(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Fw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Fce=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Dce(n,t);if(e==null)return a;if(n.includes(r))throw new xP({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Lce=Fce();function $ce(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function t2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Bce({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new nb({message:`${r} API key must be a string.`});if(typeof Vr>"u")throw new nb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=jce[t],e==null)throw new nb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new nb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var xE=Symbol.for("vercel.ai.validator");function zce(e){return{[xE]:!0,validate:e}}function Uce(e){return typeof e=="object"&&e!==null&&xE in e&&e[xE]===!0&&"validate"in e}function qce(e){return Uce(e)?e:Hce(e)}function Hce(e){return zce(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Vce({value:e,schema:t}){const n=Kk({value:e,schema:t});if(!n.success)throw bv.wrap({value:e,cause:n.error});return n.value}function Kk({value:e,schema:t}){const n=qce(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:bv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:bv.wrap({value:e,cause:r})}}}function Gce({text:e,schema:t}){try{const n=rs.parse(e);return t==null?n:Vce({value:n,schema:t})}catch(n){throw yv.isInstance(n)||bv.isInstance(n)?n:new yv({text:e,cause:n})}}function LP({text:e,schema:t}){try{const n=rs.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Kk({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:yv.isInstance(n)?n:new yv({text:e,cause:n})}}}function Wce({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Kk({value:t[e],schema:n});if(!r.success)throw new xP({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var Kce=()=>globalThis.fetch,SE=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Zce({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Zce=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=Kce()})=>{try{const s=await o(e,{method:"POST",headers:$ce(t),body:n.content,signal:i}),u=Fw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw t2(f)||El.isInstance(f)?f:new El({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(t2(c)||El.isInstance(c))?c:new El({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(t2(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new El({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}};async function EE(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Yce=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Fw(r);if(o.trim()==="")return{responseHeaders:s,value:new El({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=Gce({text:o,schema:e});return{responseHeaders:s,value:new El({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new El({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},Xce=e=>async({response:t})=>{const n=Fw(t);if(t.body==null)throw new Ece({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(Mce()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(LP({text:r,schema:e}))}}))}},$P=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=LP({text:a,schema:e}),o=Fw(t);if(!i.success)throw new El({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Jce}=globalThis;function Qce(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Jce(t)}function ede(e){return e==null?void 0:e.replace(/\/$/,"")}function ho(e){if(tde(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:o,anyOf:s,oneOf:u,format:c,const:f,minLength:h,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),f!==void 0&&(g.enum=[f]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(w=>w!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),m!==void 0&&(g.enum=m),a!=null&&(g.properties=Object.entries(a).reduce((w,[v,_])=>(w[v]=ho(_),w),{})),i&&(g.items=Array.isArray(i)?i.map(ho):ho(i)),o&&(g.allOf=o.map(ho)),s)if(s.some(w=>typeof w=="object"&&(w==null?void 0:w.type)==="null")){const w=s.filter(v=>!(typeof v=="object"&&(v==null?void 0:v.type)==="null"));if(w.length===1){const v=ho(w[0]);typeof v=="object"&&(g.nullable=!0,Object.assign(g,v))}else g.anyOf=w.map(ho),g.nullable=!0}else g.anyOf=s.map(ho);return u&&(g.oneOf=u.map(ho)),h!==void 0&&(g.minLength=h),g}function tde(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function nde(e){var t,n;const r=[],a=[];let i=!0;for(const{role:o,content:s}of e)switch(o){case"system":{if(!i)throw new bb({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break}case"user":{i=!1;const u=[];for(const c of s)switch(c.type){case"text":{u.push({text:c.text});break}case"image":{u.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:Qce(c.image)}});break}case"file":{u.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}a.push({role:"user",parts:u});break}case"assistant":{i=!1,a.push({role:"model",parts:s.map(u=>{switch(u.type){case"text":return u.text.length===0?void 0:{text:u.text};case"file":{if(u.mimeType!=="image/png")throw new bb({functionality:"Only PNG images are supported in assistant messages"});if(u.data instanceof URL)throw new bb({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:u.mimeType,data:u.data}}}case"tool-call":return{functionCall:{name:u.toolName,args:u.args}}}}).filter(u=>u!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:s.map(u=>({functionResponse:{name:u.toolName,response:{name:u.toolName,content:u.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function p6(e){return e.includes("/")?e:`models/${e}`}var rde=L.object({error:L.object({code:L.number().nullable(),message:L.string(),status:L.string()})}),CE=Yce({errorSchema:rde,errorToMessage:e=>e.error.message});function ade(e,t,n,r){var a,i;const o=(a=e.tools)!=null&&a.length?e.tools:void 0,s=[],u=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:u?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:s};if(o==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const f=[];for(const g of o)g.type==="provider-defined"?s.push({type:"unsupported-tool",tool:g}):f.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:ho(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:f},toolConfig:void 0,toolWarnings:s};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:s};default:{const g=m;throw new bb({functionality:`Unsupported tool choice type: ${g}`})}}}function m6({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var ide=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var m,g;const w=e.type,v=[],_=Wce({provider:"google",providerOptions:h,schema:ude}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:o,presencePenalty:s,stopSequences:u,seed:f,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?ho(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:_==null?void 0:_.responseModalities},{contents:S,systemInstruction:E}=nde(t);switch(w){case"regular":{const{tools:C,toolConfig:A,toolWarnings:O}=ade(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:A,cachedContent:this.settings.cachedContent},warnings:[...v,...O]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?ho(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:v};case"object-tool":return{args:{generationConfig:x,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:ho(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:v};default:{const C=w;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=await this.getArgs(e),u=JSON.stringify(o),c=_E(await EE(this.config.headers),e.headers),{responseHeaders:f,value:h,rawValue:m}=await SE({url:`${this.config.baseURL}/${p6(this.modelId)}:generateContent`,headers:c,body:o,failedResponseHandler:CE,successfulResponseHandler:$P(sde),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...w}=o,v=h.candidates[0],_=v.content==null||typeof v.content!="object"||!("parts"in v.content)?[]:v.content.parts,x=g6({parts:_,generateId:this.config.generateId}),S=h.usageMetadata;return{text:y6(_),files:(t=b6(_))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:m6({finishReason:v.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:w},rawResponse:{headers:f,body:m},warnings:s,providerMetadata:{google:{groundingMetadata:(a=v.groundingMetadata)!=null?a:null,safetyRatings:(i=v.safetyRatings)!=null?i:null}},sources:v6({groundingMetadata:v.groundingMetadata,generateId:this.config.generateId}),request:{body:u}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=_E(await EE(this.config.headers),e.headers),{responseHeaders:i,value:o}=await SE({url:`${this.config.baseURL}/${p6(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:CE,successfulResponseHandler:Xce(lde),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...u}=t;let c="unknown",f={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let g=!1;return{stream:o.pipeThrough(new TransformStream({transform(w,v){var _,x,S,E,C,A;if(!w.success){v.enqueue({type:"error",error:w.error});return}const O=w.value,I=O.usageMetadata;I!=null&&(f={promptTokens:(_=I.promptTokenCount)!=null?_:NaN,completionTokens:(x=I.candidatesTokenCount)!=null?x:NaN});const D=(S=O.candidates)==null?void 0:S[0];if(D==null)return;const B=D.content;if(B!=null){const K=y6(B.parts);K!=null&&v.enqueue({type:"text-delta",textDelta:K});const Q=b6(B.parts);if(Q!=null)for(const W of Q)v.enqueue({type:"file",mimeType:W.inlineData.mimeType,data:W.inlineData.data});const F=g6({parts:B.parts,generateId:m});if(F!=null)for(const W of F)v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:W.toolCallId,toolName:W.toolName,argsTextDelta:W.args}),v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:W.toolCallId,toolName:W.toolName,args:W.args}),g=!0}if(D.finishReason!=null){c=m6({finishReason:D.finishReason,hasToolCalls:g});const K=(E=v6({groundingMetadata:D.groundingMetadata,generateId:m}))!=null?E:[];for(const Q of K)v.enqueue({type:"source",source:Q});h={google:{groundingMetadata:(C=D.groundingMetadata)!=null?C:null,safetyRatings:(A=D.safetyRatings)!=null?A:null}}}},flush(w){w.enqueue({type:"finish",finishReason:c,usage:f,providerMetadata:h})}})),rawCall:{rawPrompt:s,rawSettings:u},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function g6({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function y6(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function b6(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function v6({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var BP=L.object({role:L.string(),parts:L.array(L.union([L.object({text:L.string()}),L.object({functionCall:L.object({name:L.string(),args:L.unknown()})}),L.object({inlineData:L.object({mimeType:L.string(),data:L.string()})})])).nullish()}),ode=L.object({web:L.object({uri:L.string(),title:L.string()}).nullish(),retrievedContext:L.object({uri:L.string(),title:L.string()}).nullish()}),zP=L.object({webSearchQueries:L.array(L.string()).nullish(),retrievalQueries:L.array(L.string()).nullish(),searchEntryPoint:L.object({renderedContent:L.string()}).nullish(),groundingChunks:L.array(ode).nullish(),groundingSupports:L.array(L.object({segment:L.object({startIndex:L.number().nullish(),endIndex:L.number().nullish(),text:L.string().nullish()}),segment_text:L.string().nullish(),groundingChunkIndices:L.array(L.number()).nullish(),supportChunkIndices:L.array(L.number()).nullish(),confidenceScores:L.array(L.number()).nullish(),confidenceScore:L.array(L.number()).nullish()})).nullish(),retrievalMetadata:L.union([L.object({webDynamicRetrievalScore:L.number()}),L.object({})]).nullish()}),UP=L.object({category:L.string(),probability:L.string(),probabilityScore:L.number().nullish(),severity:L.string().nullish(),severityScore:L.number().nullish(),blocked:L.boolean().nullish()}),sde=L.object({candidates:L.array(L.object({content:BP.nullish().or(L.object({}).strict()),finishReason:L.string().nullish(),safetyRatings:L.array(UP).nullish(),groundingMetadata:zP.nullish()})),usageMetadata:L.object({promptTokenCount:L.number().nullish(),candidatesTokenCount:L.number().nullish(),totalTokenCount:L.number().nullish()}).nullish()}),lde=L.object({candidates:L.array(L.object({content:BP.nullish(),finishReason:L.string().nullish(),safetyRatings:L.array(UP).nullish(),groundingMetadata:zP.nullish()})).nullish(),usageMetadata:L.object({promptTokenCount:L.number().nullish(),candidatesTokenCount:L.number().nullish(),totalTokenCount:L.number().nullish()}).nullish()}),ude=L.object({responseModalities:L.array(L.enum(["TEXT","IMAGE"])).nullish()}),cde=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Rce({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=_E(await EE(this.config.headers),t),{responseHeaders:a,value:i}=await SE({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:CE,successfulResponseHandler:$P(dde),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:a}}}},dde=L.object({embeddings:L.array(L.object({values:L.array(L.number())}))});function fde(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function qP(e={}){var t;const n=(t=ede(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":Bce({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(s,u={})=>{var c;return new ide(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:Lce,isSupportedUrl:fde,fetch:e.fetch})},i=(s,u={})=>new cde(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),o=function(s,u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(s,u)};return o.languageModel=a,o.chat=a,o.generativeAI=a,o.embedding=i,o.textEmbedding=i,o.textEmbeddingModel=i,o}qP();var HP="vercel.ai.error",hde=Symbol.for(HP),VP,pde=class GP extends Error{constructor({name:t,message:n,cause:r}){super(n),this[VP]=!0,this.name=t,this.cause=r}static isInstance(t){return GP.hasMarker(t,HP)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};VP=hde;var Na=pde,WP="AI_APICallError",KP=`vercel.ai.error.${WP}`,mde=Symbol.for(KP),ZP,Cl=class extends Na{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:u}){super({name:WP,message:e,cause:o}),this[ZP]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=s,this.data=u}static isInstance(e){return Na.hasMarker(e,KP)}};ZP=mde;var YP="AI_EmptyResponseBodyError",XP=`vercel.ai.error.${YP}`,gde=Symbol.for(XP),JP,yde=class extends Na{constructor({message:e="Empty response body"}={}){super({name:YP,message:e}),this[JP]=!0}static isInstance(e){return Na.hasMarker(e,XP)}};JP=gde;function QP(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var eF="AI_InvalidArgumentError",tF=`vercel.ai.error.${eF}`,bde=Symbol.for(tF),nF,vde=class extends Na{constructor({message:e,cause:t,argument:n}){super({name:eF,message:e,cause:t}),this[nF]=!0,this.argument=n}static isInstance(e){return Na.hasMarker(e,tF)}};nF=bde;var rF="AI_InvalidPromptError",aF=`vercel.ai.error.${rF}`,wde=Symbol.for(aF),iF,_de=class extends Na{constructor({prompt:e,message:t,cause:n}){super({name:rF,message:`Invalid prompt: ${t}`,cause:n}),this[iF]=!0,this.prompt=e}static isInstance(e){return Na.hasMarker(e,aF)}};iF=wde;var oF="AI_InvalidResponseDataError",sF=`vercel.ai.error.${oF}`,xde=Symbol.for(sF),lF,n2=class extends Na{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:oF,message:t}),this[lF]=!0,this.data=e}static isInstance(e){return Na.hasMarker(e,sF)}};lF=xde;var uF="AI_JSONParseError",cF=`vercel.ai.error.${uF}`,Sde=Symbol.for(cF),dF,vv=class extends Na{constructor({text:e,cause:t}){super({name:uF,message:`JSON parsing failed: Text: ${e}.
Error message: ${QP(t)}`,cause:t}),this[dF]=!0,this.text=e}static isInstance(e){return Na.hasMarker(e,cF)}};dF=Sde;var fF="AI_LoadAPIKeyError",hF=`vercel.ai.error.${fF}`,Ede=Symbol.for(hF),pF,rb=class extends Na{constructor({message:e}){super({name:fF,message:e}),this[pF]=!0}static isInstance(e){return Na.hasMarker(e,hF)}};pF=Ede;var mF="AI_TypeValidationError",gF=`vercel.ai.error.${mF}`,Cde=Symbol.for(gF),yF,kde=class kE extends Na{constructor({value:t,cause:n}){super({name:mF,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${QP(n)}`,cause:n}),this[yF]=!0,this.value=t}static isInstance(t){return Na.hasMarker(t,gF)}static wrap({value:t,cause:n}){return kE.isInstance(n)&&n.value===t?n:new kE({value:t,cause:n})}};yF=Cde;var wv=kde,bF="AI_UnsupportedFunctionalityError",vF=`vercel.ai.error.${bF}`,Ade=Symbol.for(vF),wF,mo=class extends Na{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:bF,message:t}),this[wF]=!0,this.functionality=e}static isInstance(e){return Na.hasMarker(e,vF)}};wF=Ade;let Tde=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};class w6 extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function r2(e){}function Rde(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=r2,onError:n=r2,onRetry:r=r2,onComment:a}=e;let i="",o=!0,s,u="",c="";function f(v){const _=o?v.replace(/^\xEF\xBB\xBF/,""):v,[x,S]=Nde(`${i}${_}`);for(const E of x)h(E);i=S,o=!1}function h(v){if(v===""){g();return}if(v.startsWith(":")){a&&a(v.slice(v.startsWith(": ")?2:1));return}const _=v.indexOf(":");if(_!==-1){const x=v.slice(0,_),S=v[_+1]===" "?2:1,E=v.slice(_+S);m(x,E,v);return}m(v,"",v)}function m(v,_,x){switch(v){case"event":c=_;break;case"data":u=`${u}${_}
`;break;case"id":s=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):n(new w6(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:x}));break;default:n(new w6(`Unknown field "${v.length>20?`${v.slice(0,20)}`:v}"`,{type:"unknown-field",field:v,value:_,line:x}));break}}function g(){u.length>0&&t({id:s,event:c||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),s=void 0,u="",c=""}function w(v={}){i&&v.consume&&h(i),o=!0,s=void 0,u="",c="",i=""}return{feed:f,reset:w}}function Nde(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let o=-1;if(a!==-1&&i!==-1?o=Math.min(a,i):a!==-1?o=a:i!==-1&&(o=i),o===-1){n=e.slice(r);break}else{const s=e.slice(r,o);t.push(s),r=o+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class Ide extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=Rde({onEvent:o=>{i.enqueue(o)},onError(o){t==="terminate"?i.error(o):typeof t=="function"&&t(o)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var Ode={};function _v(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Lw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Dde=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Tde(n,t);if(e==null)return a;if(n.includes(r))throw new vde({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},ab=Dde();function jde(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function a2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Mde({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new rb({message:`${r} API key must be a string.`});if(typeof Vr>"u")throw new rb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Ode[t],e==null)throw new rb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new rb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var AE=Symbol.for("vercel.ai.validator");function Pde(e){return{[AE]:!0,validate:e}}function Fde(e){return typeof e=="object"&&e!==null&&AE in e&&e[AE]===!0&&"validate"in e}function Lde(e){return Fde(e)?e:$de(e)}function $de(e){return Pde(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Bde({value:e,schema:t}){const n=_F({value:e,schema:t});if(!n.success)throw wv.wrap({value:e,cause:n.error});return n.value}function _F({value:e,schema:t}){const n=Lde(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:wv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:wv.wrap({value:e,cause:r})}}}function zde({text:e,schema:t}){try{const n=rs.parse(e);return t==null?n:Bde({value:n,schema:t})}catch(n){throw vv.isInstance(n)||wv.isInstance(n)?n:new vv({text:e,cause:n})}}function xF({text:e,schema:t}){try{const n=rs.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=_F({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:vv.isInstance(n)?n:new vv({text:e,cause:n})}}}function i2(e){try{return rs.parse(e),!0}catch{return!1}}var Ude=()=>globalThis.fetch,xv=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>qde({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),qde=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=Ude()})=>{try{const s=await o(e,{method:"POST",headers:jde(t),body:n.content,signal:i}),u=Lw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw a2(f)||Cl.isInstance(f)?f:new Cl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(a2(c)||Cl.isInstance(c))?c:new Cl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(a2(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new Cl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},Hde=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Lw(r);if(o.trim()==="")return{responseHeaders:s,value:new Cl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=zde({text:o,schema:e});return{responseHeaders:s,value:new Cl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new Cl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},SF=e=>async({response:t})=>{const n=Lw(t);if(t.body==null)throw new yde({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Ide).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(xF({text:r,schema:e}))}}))}},EF=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=xF({text:a,schema:e}),o=Lw(t);if(!i.success)throw new Cl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Vde}=globalThis;function Gde(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Vde(t)}function Wde(e){return e==null?void 0:e.replace(/\/$/,"")}var Kde=Object.defineProperty,Zde=Object.defineProperties,Yde=Object.getOwnPropertyDescriptors,Sv=Object.getOwnPropertySymbols,CF=Object.prototype.hasOwnProperty,kF=Object.prototype.propertyIsEnumerable,_6=(e,t,n)=>t in e?Kde(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qi=(e,t)=>{for(var n in t||(t={}))CF.call(t,n)&&_6(e,n,t[n]);if(Sv)for(var n of Sv(t))kF.call(t,n)&&_6(e,n,t[n]);return e},vb=(e,t)=>Zde(e,Yde(t)),Ev=(e,t)=>{var n={};for(var r in e)CF.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Sv)for(var r of Sv(e))t.indexOf(r)<0&&kF.call(e,r)&&(n[r]=e[r]);return n};function xs(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function Xde(e){var t,n,r;const a=[];for(const{role:i,content:o,providerMetadata:s}of e)switch(i){case"system":{a.push({role:"system",content:o,cache_control:xs(s)});break}case"user":{if(o.length===1&&((t=o[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:o[0].text,cache_control:(n=xs(s))!=null?n:xs(o[0].providerMetadata)});break}const u=xs(s),c=o.map(f=>{var h,m,g,w;switch(f.type){case"text":return{type:"text",text:f.text,cache_control:(h=xs(f.providerMetadata))!=null?h:u};case"image":return{type:"image_url",image_url:{url:f.image instanceof URL?f.image.toString():`data:${(m=f.mimeType)!=null?m:"image/jpeg"};base64,${Gde(f.image)}`},cache_control:(g=xs(f.providerMetadata))!=null?g:u};case"file":return{type:"text",text:f.data instanceof URL?f.data.toString():f.data,cache_control:(w=xs(f.providerMetadata))!=null?w:u};default:{const v=f;throw new Error(`Unsupported content part type: ${v}`)}}});a.push({role:"user",content:c});break}case"assistant":{let u="";const c=[];for(const f of o)switch(f.type){case"text":{u+=f.text;break}case"tool-call":{c.push({id:f.toolCallId,type:"function",function:{name:f.toolName,arguments:JSON.stringify(f.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=f;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:u,tool_calls:c.length>0?c:void 0,cache_control:xs(s)});break}case"tool":{for(const u of o)a.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result),cache_control:(r=xs(s))!=null?r:xs(u.providerMetadata)});break}default:{const u=i;throw new Error(`Unsupported role: ${u}`)}}return a}function x6(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function Cv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Zk=L.object({error:L.object({message:L.string(),type:L.string(),param:L.any().nullable(),code:L.string().nullable()})}),kv=Hde({errorSchema:Zk,errorToMessage:e=>e.error.message});function Jde(e){return"parameters"in e}var Qde=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:o,seed:s,stopSequences:u,responseFormat:c,topK:f,providerMetadata:h}){var m;const g=e.type,w=(m=h==null?void 0:h.openrouter)!=null?m:{},v=qi(qi(qi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:o,seed:s,stop:u,response_format:c,top_k:f,messages:Xde(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),w);switch(g){case"regular":return qi(qi({},v),nfe(e));case"object-json":return vb(qi({},v),{response_format:{type:"json_object"}});case"object-tool":return vb(qi({},v),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const _=g;throw new mo({functionality:`${_} mode`})}}}async doGenerate(e){var t,n,r,a,i,o,s;const u=this.getArgs(e),{responseHeaders:c,value:f}=await xv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_v(this.config.headers(),e.headers),body:u,failedResponseHandler:kv,successfulResponseHandler:EF(efe),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u,{messages:m}=h,g=Ev(h,["messages"]),w=f.choices[0];if(!w)throw new Error("No choice in response");return{response:{id:f.id,modelId:f.model},text:(t=w.message.content)!=null?t:void 0,reasoning:(n=w.message.reasoning)!=null?n:void 0,toolCalls:(r=w.message.tool_calls)==null?void 0:r.map(v=>{var _;return{toolCallType:"function",toolCallId:(_=v.id)!=null?_:ab(),toolName:v.function.name,args:v.function.arguments}}),finishReason:Cv(w.finish_reason),usage:{promptTokens:(i=(a=f.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(s=(o=f.usage)==null?void 0:o.completion_tokens)!=null?s:0},rawCall:{rawPrompt:m,rawSettings:g},rawResponse:{headers:c},warnings:[],logprobs:x6(w.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await xv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_v(this.config.headers(),e.headers),body:vb(qi({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:kv,successfulResponseHandler:SF(tfe),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,o=Ev(a,["messages"]),s=[];let u="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var g,w,v,_,x,S,E,C,A,O,I,D;if(!h.success){u="error",m.enqueue({type:"error",error:h.error});return}const B=h.value;if("error"in B){u="error",m.enqueue({type:"error",error:B.error});return}B.id&&m.enqueue({type:"response-metadata",id:B.id}),B.model&&m.enqueue({type:"response-metadata",modelId:B.model}),B.usage!=null&&(c={promptTokens:B.usage.prompt_tokens,completionTokens:B.usage.completion_tokens});const K=B.choices[0];if((K==null?void 0:K.finish_reason)!=null&&(u=Cv(K.finish_reason)),(K==null?void 0:K.delta)==null)return;const Q=K.delta;Q.content!=null&&m.enqueue({type:"text-delta",textDelta:Q.content}),Q.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:Q.reasoning});const F=x6(K==null?void 0:K.logprobs);if(F!=null&&F.length&&(f===void 0&&(f=[]),f.push(...F)),Q.tool_calls!=null)for(const W of Q.tool_calls){const U=W.index;if(s[U]==null){if(W.type!=="function")throw new n2({data:W,message:"Expected 'function' type."});if(W.id==null)throw new n2({data:W,message:"Expected 'id' to be a string."});if(((g=W.function)==null?void 0:g.name)==null)throw new n2({data:W,message:"Expected 'function.name' to be a string."});s[U]={id:W.id,type:"function",function:{name:W.function.name,arguments:(w=W.function.arguments)!=null?w:""},sent:!1};const ae=s[U];if(ae==null)throw new Error("Tool call is missing");((v=ae.function)==null?void 0:v.name)!=null&&((_=ae.function)==null?void 0:_.arguments)!=null&&i2(ae.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:ae.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=ae.id)!=null?x:ab(),toolName:ae.function.name,args:ae.function.arguments}),ae.sent=!0);continue}const he=s[U];if(he==null)throw new Error("Tool call is missing");((S=W.function)==null?void 0:S.arguments)!=null&&(he.function.arguments+=(C=(E=W.function)==null?void 0:E.arguments)!=null?C:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:he.id,toolName:he.function.name,argsTextDelta:(A=W.function.arguments)!=null?A:""}),((O=he.function)==null?void 0:O.name)!=null&&((I=he.function)==null?void 0:I.arguments)!=null&&i2(he.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(D=he.id)!=null?D:ab(),toolName:he.function.name,args:he.function.arguments}),he.sent=!0)}},flush(h){var m;if(u==="tool-calls")for(const g of s)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=g.id)!=null?m:ab(),toolName:g.function.name,args:i2(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},AF=L.object({id:L.string().optional(),model:L.string().optional(),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number(),total_tokens:L.number()}).nullish()}),efe=AF.extend({choices:L.array(L.object({message:L.object({role:L.literal("assistant"),content:L.string().nullable().optional(),reasoning:L.string().nullable().optional(),tool_calls:L.array(L.object({id:L.string().optional().nullable(),type:L.literal("function"),function:L.object({name:L.string(),arguments:L.string()})})).optional()}),index:L.number(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullable().optional(),finish_reason:L.string().optional().nullable()}))}),tfe=L.union([AF.extend({choices:L.array(L.object({delta:L.object({role:L.enum(["assistant"]).optional(),content:L.string().nullish(),reasoning:L.string().nullish().optional(),tool_calls:L.array(L.object({index:L.number(),id:L.string().nullish(),type:L.literal("function").optional(),function:L.object({name:L.string().nullish(),arguments:L.string().nullish()})})).nullish()}).nullish(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullish(),finish_reason:L.string().nullable().optional(),index:L.number()}))}),Zk]);function nfe(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>Jde(o)?{type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}}:{type:"function",function:{name:o.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function rfe({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new _de({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new mo({functionality:"images"});case"file":throw new mo({functionality:"file attachments"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new mo({functionality:"tool-call messages"});case"reasoning":throw new mo({functionality:"reasoning messages"});case"redacted-reasoning":throw new mo({functionality:"redacted reasoning messages"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new mo({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a}}function S6(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var afe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:s,seed:u,responseFormat:c,topK:f,stopSequences:h,providerMetadata:m}){var g,w;const v=e.type,_=(g=m==null?void 0:m.openrouter)!=null?g:{},{prompt:x}=rfe({prompt:n,inputFormat:t}),S=qi(qi(qi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:s,seed:u,stop:h,response_format:c,top_k:f,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),_);switch(v){case"regular":{if((w=e.tools)!=null&&w.length)throw new mo({functionality:"tools"});if(e.toolChoice)throw new mo({functionality:"toolChoice"});return S}case"object-json":throw new mo({functionality:"object-json mode"});case"object-tool":throw new mo({functionality:"object-tool mode"});default:{const E=v;throw new mo({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const o=this.getArgs(e),{responseHeaders:s,value:u}=await xv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_v(this.config.headers(),e.headers),body:o,failedResponseHandler:kv,successfulResponseHandler:EF(E6),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=o,{prompt:f}=c,h=Ev(c,["prompt"]);if("error"in u)throw new Error(`${u.error.message}`);const m=u.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:u.id,modelId:u.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=u.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=u.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:Cv(m.finish_reason),logprobs:S6(m.logprobs),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await xv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_v(this.config.headers(),e.headers),body:vb(qi({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:kv,successfulResponseHandler:SF(E6),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,o=Ev(a,["prompt"]);let s="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(f,h){if(!f.success){s="error",h.enqueue({type:"error",error:f.error});return}const m=f.value;if("error"in m){s="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(u={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const g=m.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=Cv(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const w=S6(g==null?void 0:g.logprobs);w!=null&&w.length&&(c===void 0&&(c=[]),c.push(...w))},flush(f){f.enqueue({type:"finish",finishReason:s,logprobs:c,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},E6=L.union([L.object({id:L.string().optional(),model:L.string().optional(),choices:L.array(L.object({text:L.string(),reasoning:L.string().nullish().optional(),finish_reason:L.string().nullish(),index:L.number(),logprobs:L.object({tokens:L.array(L.string()),token_logprobs:L.array(L.number()),top_logprobs:L.array(L.record(L.string(),L.number())).nullable()}).nullable().optional()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).optional().nullable()}),Zk]);function TF(e={}){var t,n,r;const a=(n=Wde((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",o=()=>qi({Authorization:`Bearer ${Mde({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),s=(h,m={})=>new Qde(h,m,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,m={})=>new afe(h,m,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?u(h,m):s(h,m)},f=function(h,m){return c(h,m)};return f.languageModel=c,f.chat=s,f.completion=u,f}TF({compatibility:"strict"});var Jc={},o2={},C6;function k6(){return C6||(C6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(o2)),o2}var A6;function ife(){return A6||(A6=1,function(e){var t=Jc&&Jc.__createBinding||(Object.create?function(c,f,h,m){m===void 0&&(m=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,m,g)}:function(c,f,h,m){m===void 0&&(m=h),c[m]=f[h]}),n=Jc&&Jc.__exportStar||function(c,f){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&t(f,c,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=k6();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(k6(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function o(c,f=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return s(c.trim(),f)}e.parseJSON=o;const s=(c,f)=>{const h=c.length;let m=0;const g=A=>{throw new a(`${A} at position ${m}`)},w=A=>{throw new i(`${A} at position ${m}`)},v=()=>(C(),m>=h&&g("Unexpected end of input"),c[m]==='"'?_():c[m]==="{"?x():c[m]==="["?S():c.substring(m,m+4)==="null"||r.Allow.NULL&f&&h-m<4&&"null".startsWith(c.substring(m))?(m+=4,null):c.substring(m,m+4)==="true"||r.Allow.BOOL&f&&h-m<4&&"true".startsWith(c.substring(m))?(m+=4,!0):c.substring(m,m+5)==="false"||r.Allow.BOOL&f&&h-m<5&&"false".startsWith(c.substring(m))?(m+=5,!1):c.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&f&&h-m<8&&"Infinity".startsWith(c.substring(m))?(m+=8,1/0):c.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&f&&1<h-m&&h-m<9&&"-Infinity".startsWith(c.substring(m))?(m+=9,-1/0):c.substring(m,m+3)==="NaN"||r.Allow.NAN&f&&h-m<3&&"NaN".startsWith(c.substring(m))?(m+=3,NaN):E()),_=()=>{const A=m;let O=!1;for(m++;m<h&&(c[m]!=='"'||O&&c[m-1]==="\\");)O=c[m]==="\\"?!O:!1,m++;if(c.charAt(m)=='"')try{return JSON.parse(c.substring(A,++m-Number(O)))}catch(I){w(String(I))}else if(r.Allow.STR&f)try{return JSON.parse(c.substring(A,m-Number(O))+'"')}catch{return JSON.parse(c.substring(A,c.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{m++,C();const A={};try{for(;c[m]!=="}";){if(C(),m>=h&&r.Allow.OBJ&f)return A;const O=_();C(),m++;try{const I=v();A[O]=I}catch(I){if(r.Allow.OBJ&f)return A;throw I}C(),c[m]===","&&m++}}catch{if(r.Allow.OBJ&f)return A;g("Expected '}' at end of object")}return m++,A},S=()=>{m++;const A=[];try{for(;c[m]!=="]";)A.push(v()),C(),c[m]===","&&m++}catch{if(r.Allow.ARR&f)return A;g("Expected ']' at end of array")}return m++,A},E=()=>{if(m===0){c==="-"&&w("Not sure what '-' is");try{return JSON.parse(c)}catch(O){if(r.Allow.NUM&f)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}w(String(O))}}const A=m;for(c[m]==="-"&&m++;c[m]&&",]}".indexOf(c[m])===-1;)m++;m==h&&!(r.Allow.NUM&f)&&g("Unterminated number literal");try{return JSON.parse(c.substring(A,m))}catch{c.substring(A,m)==="-"&&g("Not sure what '-' is");try{return JSON.parse(c.substring(A,c.lastIndexOf("e")))}catch(I){w(String(I))}}},C=()=>{for(;m<h&&` 
\r	`.includes(c[m]);)m++};return v()},u=o;e.parse=u}(Jc)),Jc}var ofe=ife();function s2(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new wr({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(dh(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const o of n)switch(o.type){case"text":{a.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const s=o;throw new Error(`Unsupported part: ${s}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var sfe=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=ofe.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const o=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:Ts(),type:"function"});const s=this._toolCalls[a];s.function.arguments=o,e.enqueue({argsTextDelta:t,toolCallId:s.id,toolCallType:"function",toolName:s.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function lfe({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var ufe=L.object({error:L.object({code:L.string().nullable(),message:L.string(),param:L.any().nullable(),type:L.string()})}),TE=q8({errorSchema:ufe,errorToMessage:e=>e.error.message});function cfe({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const s of n)s.type==="provider-defined"?r.push({tool:s,type:"unsupported-tool"}):i.push({function:{description:s.description,name:s.name,parameters:s.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const o=a.type;switch(o){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const s=o;throw new wr({functionality:`Unsupported tool choice type: ${s}`})}}}function dfe(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var ffe=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},hfe=e=>async({response:t})=>{const n=ig(t);if(t.body===null)throw new Ok({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new ffe).pipeThrough(new TransformStream({transform(r,a){a.enqueue(cd({schema:e,text:r}))}}))}},pfe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:o,stopSequences:s,temperature:u,topK:c,topP:f}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:dfe({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:s,temperature:u,tfs_z:this.settings.tfsZ,top_k:c,top_p:f,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:w,toolWarnings:v}=cfe({mode:n});return{args:{...g,messages:s2(a),tools:w},type:h,warnings:[...m,...v]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:s2(a)},type:h,warnings:m};case"object-tool":return{args:{...g,messages:s2(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const w=h;throw new Error(`Unsupported type: ${w}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:o,value:s}=await Yo({abortSignal:e.abortSignal,body:i,failedResponseHandler:TE,fetch:this.config.fetch,headers:Fs(this.config.headers(),e.headers),successfulResponseHandler:Rd(mfe),url:`${this.config.baseURL}/chat`}),{messages:u,...c}=i,f=(t=s.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:Ts(),toolCallType:"function",toolName:h.function.name}});return{finishReason:lfe({finishReason:s.done_reason,hasToolCalls:f!==void 0&&f.length>0}),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},request:{body:JSON.stringify(i)},text:(n=s.message.content)!=null?n:void 0,toolCalls:f,usage:{completionTokens:s.eval_count||0,promptTokens:s.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),w=new ReadableStream({start(v){if(v.enqueue({type:"response-metadata",...g.response}),g.text&&v.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const _ of g.toolCalls)v.enqueue({argsTextDelta:_.args,toolCallId:_.toolCallId,toolCallType:"function",toolName:_.toolName,type:"tool-call-delta"}),v.enqueue({type:"tool-call",..._});v.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),v.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:w,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Yo({abortSignal:e.abortSignal,body:t,failedResponseHandler:TE,fetch:this.config.fetch,headers:Fs(this.config.headers(),e.headers),successfulResponseHandler:hfe(gfe),url:`${this.config.baseURL}/chat`}),{messages:o,...s}=t,u=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new sfe({tools:u,type:n});let f="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:f,type:"finish",usage:h})},async transform(g,w){if(!g.success){w.enqueue({error:g.error,type:"error"});return}const v=g.value;if(v.done){f=c.finish({controller:w}),h={completionTokens:v.eval_count,promptTokens:v.prompt_eval_count||0};return}m&&c.parse({controller:w,delta:v.message.content})||v.message.content!==null&&w.enqueue({textDelta:v.message.content,type:"text-delta"})}})),warnings:r}}},mfe=L.object({created_at:L.string(),done:L.literal(!0),done_reason:L.string().optional().nullable(),eval_count:L.number(),eval_duration:L.number(),load_duration:L.number().optional(),message:L.object({content:L.string(),role:L.string(),tool_calls:L.array(L.object({function:L.object({arguments:L.record(L.any()),name:L.string()}),id:L.string().optional()})).optional().nullable()}),model:L.string(),prompt_eval_count:L.number().optional(),prompt_eval_duration:L.number().optional(),total_duration:L.number()}),gfe=L.discriminatedUnion("done",[L.object({created_at:L.string(),done:L.literal(!1),message:L.object({content:L.string(),role:L.string()}),model:L.string()}),L.object({created_at:L.string(),done:L.literal(!0),eval_count:L.number(),eval_duration:L.number(),load_duration:L.number().optional(),model:L.string(),prompt_eval_count:L.number().optional(),prompt_eval_duration:L.number().optional(),total_duration:L.number()})]),yfe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new jk({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Yo({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:TE,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Rd(bfe),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},bfe=L.object({embeddings:L.array(L.array(L.number())),prompt_eval_count:L.number().nullable()});function RF(e={}){var t;const n=(t=V8(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(s,u={})=>new pfe(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(s,u={})=>new yfe(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),o=function(s,u){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(s,u)};return o.chat=a,o.embedding=i,o.languageModel=a,o.textEmbedding=i,o.textEmbeddingModel=i,o}RF();let vfe=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function mh(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function wfe(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=_fe(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function _fe(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function $w(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var xfe=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=vfe(n,t);if(e==null)return a;if(n.includes(r))throw new Dk({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},l2=xfe();function Sfe(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function u2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var RE=Symbol.for("vercel.ai.validator");function Efe(e){return{[RE]:!0,validate:e}}function Cfe(e){return typeof e=="object"&&e!==null&&RE in e&&e[RE]===!0&&"validate"in e}function kfe(e){return Cfe(e)?e:Afe(e)}function Afe(e){return Efe(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Tfe({value:e,schema:t}){const n=NF({value:e,schema:t});if(!n.success)throw ac.wrap({value:e,cause:n.error});return n.value}function NF({value:e,schema:t}){const n=kfe(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ac.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ac.wrap({value:e,cause:r})}}}function Rfe({text:e,schema:t}){try{const n=rs.parse(e);return t==null?n:Tfe({value:n,schema:t})}catch(n){throw rc.isInstance(n)||ac.isInstance(n)?n:new rc({text:e,cause:n})}}function IF({text:e,schema:t}){try{const n=rs.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=NF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:rc.isInstance(n)?n:new rc({text:e,cause:n})}}}function T6(e){try{return rs.parse(e),!0}catch{return!1}}var Nfe=()=>globalThis.fetch,gh=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Ife({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Ife=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=Nfe()})=>{try{const s=await o(e,{method:"POST",headers:Sfe(t),body:n.content,signal:i}),u=$w(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw u2(f)||fa.isInstance(f)?f:new fa({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(u2(c)||fa.isInstance(c))?c:new fa({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(u2(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new fa({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},Bw=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=$w(r);if(o.trim()==="")return{responseHeaders:s,value:new fa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=Rfe({text:o,schema:e});return{responseHeaders:s,value:new fa({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new fa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},OF=e=>async({response:t})=>{const n=$w(t);if(t.body==null)throw new Ok({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(wfe()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(IF({text:r,schema:e}))}}))}},zw=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=IF({text:a,schema:e}),o=$w(t);if(!i.success)throw new fa({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Ofe}=globalThis;function Dfe(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Ofe(t)}function jfe(e){return e==null?void 0:e.replace(/\/$/,"")}function om(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function Mfe(e){const t=[];for(const{role:n,content:r,...a}of e){const i=om({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...om(r[0])});break}t.push({role:"user",content:r.map(o=>{var s;const u=om(o);switch(o.type){case"text":return{type:"text",text:o.text,...u};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${Dfe(o.image)}`},...u};case"file":throw new wr({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const s=[];for(const u of r){const c=om(u);switch(u.type){case"text":{o+=u.text;break}case"tool-call":{s.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)},...c});break}}}t.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0,...i});break}case"tool":{for(const o of r){const s=om(o);t.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...s})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return t}function Av({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Tv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Pfe=L.object({error:L.object({message:L.string(),type:L.string().nullish(),param:L.any().nullish(),code:L.union([L.string(),L.number()]).nullish()})}),Uw={errorSchema:Pfe,errorToMessage:e=>e.error.message};function Ffe({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)u.type==="provider-defined"?a.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const u=s;throw new wr({functionality:`Unsupported tool choice type: ${u}`})}}}var Lfe=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:Uw;this.chunkSchema=Bfe(i.errorSchema),this.failedResponseHandler=Bw(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,providerMetadata:u,stopSequences:c,responseFormat:f,seed:h}){var m,g;const w=e.type,v=[];i!=null&&v.push({type:"unsupported-setting",setting:"topK"}),(f==null?void 0:f.type)==="json"&&f.schema!=null&&!this.supportsStructuredOutputs&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(f==null?void 0:f.type)==="json"?this.supportsStructuredOutputs===!0&&f.schema!=null?{type:"json_schema",json_schema:{schema:f.schema,name:(m=f.name)!=null?m:"response",description:f.description}}:{type:"json_object"}:void 0,stop:c,seed:h,...u==null?void 0:u[this.providerOptionsName],messages:Mfe(t)};switch(w){case"regular":{const{tools:x,tool_choice:S,toolWarnings:E}=Ffe({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:x,tool_choice:S},warnings:[...v,...E]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:v};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:v};default:{const x=w;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u,c;const{args:f,warnings:h}=this.getArgs({...e}),m=JSON.stringify(f),{responseHeaders:g,value:w,rawValue:v}=await gh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:mh(this.config.headers(),e.headers),body:f,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:zw($fe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...x}=f,S=w.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:v});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var A;return{toolCallType:"function",toolCallId:(A=C.id)!=null?A:l2(),toolName:C.function.name,args:C.function.arguments}}),finishReason:Tv(S.finish_reason),usage:{promptTokens:(s=(o=w.usage)==null?void 0:o.prompt_tokens)!=null?s:NaN,completionTokens:(c=(u=w.usage)==null?void 0:u.completion_tokens)!=null?c:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:_,rawSettings:x},rawResponse:{headers:g,body:v},response:Av(w),warnings:h,request:{body:m}}}async doStream(e){var t;if(this.settings.simulateStreaming){const w=await this.doGenerate(e);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...w.response}),w.reasoning)if(Array.isArray(w.reasoning))for(const x of w.reasoning)x.type==="text"&&_.enqueue({type:"reasoning",textDelta:x.text});else _.enqueue({type:"reasoning",textDelta:w.reasoning});if(w.text&&_.enqueue({type:"text-delta",textDelta:w.text}),w.toolCalls)for(const x of w.toolCalls)_.enqueue({type:"tool-call",...x});_.enqueue({type:"finish",finishReason:w.finishReason,usage:w.usage,logprobs:w.logprobs,providerMetadata:w.providerMetadata}),_.close()}}),rawCall:w.rawCall,rawResponse:w.rawResponse,warnings:w.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:o,value:s}=await gh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:mh(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:OF(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:u,...c}=n,f=[];let h="unknown",m={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:s.pipeThrough(new TransformStream({transform(w,v){var _,x,S,E,C,A,O,I,D,B,K,Q,F,W;if(!w.success){h="error",v.enqueue({type:"error",error:w.error});return}const U=w.value;if(i==null||i.processChunk(w.rawValue),"error"in U){h="error",v.enqueue({type:"error",error:U.error.message});return}g&&(g=!1,v.enqueue({type:"response-metadata",...Av(U)})),U.usage!=null&&(m={promptTokens:(_=U.usage.prompt_tokens)!=null?_:void 0,completionTokens:(x=U.usage.completion_tokens)!=null?x:void 0});const he=U.choices[0];if((he==null?void 0:he.finish_reason)!=null&&(h=Tv(he.finish_reason)),(he==null?void 0:he.delta)==null)return;const ae=he.delta;if(ae.reasoning_content!=null&&v.enqueue({type:"reasoning",textDelta:ae.reasoning_content}),ae.content!=null&&v.enqueue({type:"text-delta",textDelta:ae.content}),ae.tool_calls!=null)for(const re of ae.tool_calls){const ee=re.index;if(f[ee]==null){if(re.type!=="function")throw new Hf({data:re,message:"Expected 'function' type."});if(re.id==null)throw new Hf({data:re,message:"Expected 'id' to be a string."});if(((S=re.function)==null?void 0:S.name)==null)throw new Hf({data:re,message:"Expected 'function.name' to be a string."});f[ee]={id:re.id,type:"function",function:{name:re.function.name,arguments:(E=re.function.arguments)!=null?E:""},hasFinished:!1};const V=f[ee];((C=V.function)==null?void 0:C.name)!=null&&((A=V.function)==null?void 0:A.arguments)!=null&&(V.function.arguments.length>0&&v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:V.id,toolName:V.function.name,argsTextDelta:V.function.arguments}),T6(V.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=V.id)!=null?O:l2(),toolName:V.function.name,args:V.function.arguments}),V.hasFinished=!0));continue}const se=f[ee];se.hasFinished||(((I=re.function)==null?void 0:I.arguments)!=null&&(se.function.arguments+=(B=(D=re.function)==null?void 0:D.arguments)!=null?B:""),v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:se.id,toolName:se.function.name,argsTextDelta:(K=re.function.arguments)!=null?K:""}),((Q=se.function)==null?void 0:Q.name)!=null&&((F=se.function)==null?void 0:F.arguments)!=null&&T6(se.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(W=se.id)!=null?W:l2(),toolName:se.function.name,args:se.function.arguments}),se.hasFinished=!0))}},flush(w){var v,_;const x=i==null?void 0:i.buildMetadata();w.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(v=m.promptTokens)!=null?v:NaN,completionTokens:(_=m.completionTokens)!=null?_:NaN},...x&&{providerMetadata:x}})}})),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},warnings:r,request:{body:a}}}},$fe=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({message:L.object({role:L.literal("assistant").nullish(),content:L.string().nullish(),reasoning_content:L.string().nullish(),tool_calls:L.array(L.object({id:L.string().nullish(),type:L.literal("function"),function:L.object({name:L.string(),arguments:L.string()})})).nullish()}),finish_reason:L.string().nullish()})),usage:L.object({prompt_tokens:L.number().nullish(),completion_tokens:L.number().nullish()}).nullish()}),Bfe=e=>L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({delta:L.object({role:L.enum(["assistant"]).nullish(),content:L.string().nullish(),reasoning_content:L.string().nullish(),tool_calls:L.array(L.object({index:L.number(),id:L.string().nullish(),type:L.literal("function").optional(),function:L.object({name:L.string().nullish(),arguments:L.string().nullish()})})).nullish()}).nullish(),finish_reason:L.string().nullish()})),usage:L.object({prompt_tokens:L.number().nullish(),completion_tokens:L.number().nullish()}).nullish()}),e]);function zfe({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new wl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new wr({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new wr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new wr({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var Ufe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:Uw;this.chunkSchema=Hfe(a.errorSchema),this.failedResponseHandler=Bw(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h,providerMetadata:m}){var g;const w=e.type,v=[];o!=null&&v.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:_,stopSequences:x}=zfe({prompt:n,inputFormat:t}),S=[...x??[],...c??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:_,stop:S.length>0?S:void 0};switch(w){case"regular":{if((g=e.tools)!=null&&g.length)throw new wr({functionality:"tools"});if(e.toolChoice)throw new wr({functionality:"toolChoice"});return{args:E,warnings:v}}case"object-json":throw new wr({functionality:"object-json mode"});case"object-tool":throw new wr({functionality:"object-tool mode"});default:{const C=w;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:o}=this.getArgs(e),{responseHeaders:s,value:u,rawValue:c}=await gh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:mh(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:zw(qfe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:f,...h}=i,m=u.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=u.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=u.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:Tv(m.finish_reason),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s,body:c},response:Av(u),warnings:o,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await gh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:mh(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:OF(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){u="error",m.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){u="error",m.enqueue({type:"error",error:g.error});return}f&&(f=!1,m.enqueue({type:"response-metadata",...Av(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const w=g.choices[0];(w==null?void 0:w.finish_reason)!=null&&(u=Tv(w.finish_reason)),(w==null?void 0:w.text)!=null&&m.enqueue({type:"text-delta",textDelta:w.text})},flush(h){h.enqueue({type:"finish",finishReason:u,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},qfe=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).nullish()}),Hfe=e=>L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string().nullish(),index:L.number()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).nullish()}),e]),Vfe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new jk({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await gh({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:mh(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Bw((r=this.config.errorStructure)!=null?r:Uw),successfulResponseHandler:zw(Gfe),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(o=>o.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},Gfe=L.object({data:L.array(L.object({embedding:L.array(L.number())})),usage:L.object({prompt_tokens:L.number()}).nullish()}),Wfe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h,m;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const w=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:v,responseHeaders:_}=await gh({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:mh(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:Bw((m=this.config.errorStructure)!=null?m:Uw),successfulResponseHandler:zw(Kfe),abortSignal:s,fetch:this.config.fetch});return{images:v.data.map(x=>x.b64_json),warnings:g,response:{timestamp:w,modelId:this.modelId,headers:_}}}},Kfe=L.object({data:L.array(L.object({b64_json:L.string()}))});function Zfe(e){const t=jfe(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:m})=>{const g=new URL(`${t}${m}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>o(h,m),o=(h,m={})=>new Lfe(h,m,{...a("chat"),defaultObjectGenerationMode:"tool"}),s=(h,m={})=>new Ufe(h,m,a("completion")),u=(h,m={})=>new Vfe(h,m,a("embedding")),c=(h,m={})=>new Wfe(h,m,a("image")),f=(h,m)=>i(h,m);return f.languageModel=i,f.chatModel=o,f.completionModel=s,f.textEmbeddingModel=u,f.imageModel=c,f}const Yk=e=>e==="openai"||e==="openrouter"||e==="google",Xk=e=>e==="ollama"||e==="openai-compatible",ym=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",DF=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],Df={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},jF=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function Yfe(e,t,n){try{switch(e.type){case"openai":return lP({apiKey:n})(t);case"google":return qP({apiKey:n})(t);case"openrouter":return TF({apiKey:n})(t);case"ollama":return RF({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return Zfe({baseURL:jF(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function Xfe(e,t,n){const r=e.type,i=(e.fetchedModels&&e.fetchedModels.length>0?e.fetchedModels:Df[r]||[]).find(c=>c.id===t);if(!i)return;const o=Yfe(e,t,n);if(!o)return;const s=e.type==="openai",u=["openai","google","openrouter"].includes(e.type);return{id:`${e.id}:${t}`,name:i.name,providerId:e.id,providerName:e.name,instance:o,supportsImageGeneration:s,supportsToolCalling:u}}const sm=new Map,Jfe=5*60*1e3;async function Qfe(e,t){const n=`${e.id}-${e.baseURL||""}`,r=sm.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var s,u,c;let i;const o={Accept:"application/json"};t&&(o.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":{if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break}case"openrouter":{if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",o["HTTP-Referer"]=((s=globalThis.location)==null?void 0:s.origin)||"http://localhost:3000",o["X-Title"]="LiteChat";break}case"ollama":{const f=((u=e.baseURL)==null?void 0:u.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",f).toString(),delete o.Authorization;break}case"openai-compatible":{if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const f=jF(e.baseURL);i=new URL("models",f.endsWith("/")?f:f+"/").toString();break}case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(f){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,f),dt.error(`Invalid Base URL for ${e.name}: ${f instanceof Error?f.message:String(f)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const f=await fetch(i,{headers:o});if(!f.ok){let g=`(${f.status} ${f.statusText})`;try{const w=await f.text();try{const v=JSON.parse(w);g=((c=v==null?void 0:v.error)==null?void 0:c.message)||(v==null?void 0:v.message)||w||g}catch{g=w||g}}catch(w){console.warn("[ModelFetcher] Failed to read error response body:",w)}throw new Error(`API Error: ${g}`)}const h=await f.json();let m=[];if(e.type==="ollama")h.models&&Array.isArray(h.models)?m=h.models.map(g=>({id:g.name,name:g.name})):console.warn(`[ModelFetcher] Unexpected response structure from Ollama for ${e.name}:`,h);else{const g=h.data||h;Array.isArray(g)?m=g.map(w=>({id:w.id,name:w.name||w.id})):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}return m.sort((g,w)=>(g.name||g.id).localeCompare(w.name||w.id)),console.log(`[ModelFetcher] Fetched ${m.length} models for ${e.name}`),m}catch(f){const h=f instanceof Error?f.message:String(f);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),dt.error(`Failed to fetch models for ${e.name}: ${h}`),sm.delete(n),[]}})();return sm.set(n,a),setTimeout(()=>{sm.get(n)===a&&(sm.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},Jfe),a}const c2="provider:lastModelSelection",R6="provider:globalModelSortOrder",lm=(e,t)=>`${e}:${t}`,ehe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},Ai=Ul(ql((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Wt.saveSetting("enableApiKeyManagement",n)},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Wt.loadSetting("enableApiKeyManagement",!0),[r,a,i,o]=await Promise.all([Wt.loadProviderConfigs(),Wt.loadApiKeys(),Wt.loadSetting(R6,[]),Wt.loadSetting(c2,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const s=r.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(w=>{m.push(lm(g.id,w))}),m),[]),u=new Set(s),c=i.filter(m=>u.has(m));e({globalModelSortOrder:c});let f=o;f&&u.has(f)||(f=c[0]??null,f||(f=s[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${f}`)),e({selectedModelId:f,isLoading:!1}),await Wt.saveSetting(c2,f)}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),dt.error("Failed to load provider data")}},selectModel:n=>{e({selectedModelId:n}),Wt.saveSetting(c2,n)},addApiKey:async(n,r,a)=>{const i=Po(),o=new Date,s={id:i,name:n,value:a,providerId:r,createdAt:o,updatedAt:o};try{return await Wt.saveApiKey(s),e(u=>{u.dbApiKeys.push(s)}),dt.success(`API Key "${n}" added.`),i}catch(u){throw console.error("ProviderStore: Error adding API key",u),dt.error(`Failed to add API Key: ${u instanceof Error?u.message:String(u)}`),u}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await Wt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(o=>o.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(o=>o.apiKeyId===n?{...o,apiKeyId:null}:o)}),dt.success(`API Key "${r}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting API key",i),dt.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=Po(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Wt.saveProviderConfig(i),e(o=>{o.dbProviderConfigs.push(i)}),dt.success(`Provider "${n.name}" added.`),r}catch(o){throw console.error("ProviderStore: Error adding provider config",o),dt.error(`Failed to add Provider: ${o instanceof Error?o.message:String(o)}`),o}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(o=>o.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await Wt.saveProviderConfig(i),e(h=>{const m=h.dbProviderConfigs.findIndex(g=>g.id===n);m!==-1&&(h.dbProviderConfigs[m]=i)});const o=t().globalModelSortOrder;let s=[...o],u=!1;const c=(i.fetchedModels??Df[i.type]??[]).map(h=>lm(n,h.id)),f=new Set((i.enabledModels??[]).map(h=>lm(n,h)));r.isEnabled===!1?(s=s.filter(h=>!c.includes(h)),u=!0):(r.isEnabled===!0||r.enabledModels)&&(s=s.filter(h=>!c.includes(h)||f.has(h)),f.forEach(h=>{s.includes(h)||s.push(h)}),u=!0),(JSON.stringify(s)!==JSON.stringify(o)||u)&&await t().setGlobalModelSortOrder(s)}catch(o){throw console.error("ProviderStore: Error updating provider config",o),dt.error(`Failed to update Provider: ${o instanceof Error?o.message:String(o)}`),o}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await Wt.deleteProviderConfig(n);const i=(r.fetchedModels??Df[r.type]??[]).map(u=>lm(n,u.id)),s=t().globalModelSortOrder.filter(u=>!i.includes(u));e(u=>{u.dbProviderConfigs=u.dbProviderConfigs.filter(c=>c.id!==n)}),await t().setGlobalModelSortOrder(s),dt.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),dt.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){dt.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,o=(a=t().dbApiKeys.find(u=>u.id===i))==null?void 0:a.value,s=await Qfe(r,o);await t().updateProviderConfig(n,{fetchedModels:s,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),dt.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{var s,u;const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Wt.saveSetting(R6,r);const a=t().selectedModelId,i=t().getGloballyEnabledAndOrderedModels(),o=new Set(i.map(c=>c.id));if(a&&!o.has(a)){const c=r.find(f=>o.has(f))??((s=i[0])==null?void 0:s.id)??null;console.log(`[ProviderStore] Selection ${a} invalidated by order change. Selecting ${c}`),t().selectModel(c)}else if(!a&&r.length>0){const c=r.find(f=>o.has(f))??((u=i[0])==null?void 0:u.id)??null;console.log(`[ProviderStore] No selection, selecting first from new order: ${c}`),t().selectModel(c)}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:o}=ehe(n);if(!i||!o)return;const s=r.find(c=>c.id===i);if(!s)return;const u=a.find(c=>c.id===s.apiKeyId);return Xfe(s,o,u==null?void 0:u.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=n.type,a=[...n.fetchedModels??(Df[r]||[])];return{id:n.id,name:n.name,type:n.type,allAvailableModels:a}}),getGloballyEnabledAndOrderedModels:()=>{const{dbProviderConfigs:n,globalModelSortOrder:r}=t(),a=new Map,i=new Set;n.forEach(c=>{if(!c.isEnabled||!c.enabledModels)return;const f=c.type,h=c.fetchedModels??Df[f]??[],m=new Map(h.map(g=>[g.id,g]));c.enabledModels.forEach(g=>{const w=lm(c.id,g),v=m.get(g);v&&(i.add(w),a.set(w,{id:w,name:v.name||g,providerId:c.id,providerName:c.name}))})});const o=[],s=new Set;r.forEach(c=>{if(i.has(c)){const f=a.get(c);f&&!s.has(c)&&(o.push(f),s.add(c))}});const u=Array.from(i).filter(c=>!s.has(c)).map(c=>a.get(c)).filter(c=>!!c).sort((c,f)=>c.name.localeCompare(f.name));return[...o,...u]},getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return[];const a=r.type;return[...r.fetchedModels??(Df[a]||[])]}})));async function N6(e,t){const n=ma.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}const the=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}};function nhe(){const e=ar.getState(),t=Ai.getState(),n=ga.getState(),{providerId:r}=the(t.selectedModelId);return{selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme}}function rhe(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}const ahe=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"];function ihe(e){try{const t=e.type||"application/octet-stream",n=e.name.toLowerCase(),r=t.startsWith("text/")||t==="application/json"||ahe.some(i=>n.endsWith(i)),a=t.startsWith("image/");if(r&&e.contentText!==void 0)return{type:"text",text:e.contentText};if(a&&e.contentBase64!==void 0)return{type:"image",image:rhe(e.contentBase64),mimeType:t};if(!r&&e.contentBase64!==void 0)return console.warn(`AIService: Unsupported file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw new Error(`Missing content or unable to determine type for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),dt.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}class wb{static async startInteraction(t,n){var D,B,K,Q,F,W,U,he;const r=ar.getState(),a=r.currentConversationId;if(!a)return r.setError("No active conversation."),dt.error("Cannot start interaction: No active conversation."),null;const i=await N6("middleware:interaction:beforeStart",{prompt:t,conversationId:a});if(i===!1)return console.log("AIService: Interaction start cancelled by middleware."),null;const o=i&&typeof i=="object"?i.prompt:t,s=Po(),u=new AbortController;this.activeStreams.set(s,u);const f=r.interactions.filter(ae=>ae.conversationId===a),h=f.reduce((ae,re)=>Math.max(ae,re.index),-1)+1,m=f.length>0?f[f.length-1].id:null,g=[...o.messages];let w=-1;for(let ae=g.length-1;ae>=0;ae--)if(g[ae].role==="user"){w=ae;break}if(w!==-1&&((D=n.metadata)!=null&&D.attachedFiles)&&n.metadata.attachedFiles.length>0){const ae=g[w],re=n.metadata.attachedFiles.map(ihe).filter(se=>se!==null);let ee=[];typeof ae.content=="string"?ae.content.trim()&&ee.push({type:"text",text:ae.content}):Array.isArray(ae.content)&&(ee=ae.content.filter(se=>se&&typeof se=="object"&&"type"in se&&(se.type==="text"||se.type==="image"))),g[w]={...ae,content:[...re,...ee]},console.log(`AIService: Added ${re.length} file(s) to user message content.`)}const v={id:s,conversationId:a,type:"message.user_assistant",prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...o.metadata,attachedFiles:(B=n.metadata.attachedFiles)==null?void 0:B.map(({contentBase64:ae,contentText:re,...ee})=>ee),toolCalls:[],toolResults:[]},index:h,parentId:m};r._addInteractionToState(v),r._addStreamingId(s),Wt.saveInteraction({...v}).catch(ae=>{console.error(`AIService: Failed initial persistence for ${s}`,ae)}),Ei.emit("interaction:started",{interactionId:s,conversationId:a,type:v.type});let _,x="ERROR",S,E,C,A;const O=[],I=[];try{const ae=(K=Ai.getState().getSelectedModel())==null?void 0:K.instance;if(!ae)throw new Error("Selected model instance not available.");const re=ma.getState().getRegisteredTools(),se=(((Q=o.metadata)==null?void 0:Q.enabledTools)??[]).reduce((X,Y)=>{const ne=re[Y];if(ne){const be={...ne.definition};ne.implementation&&(be.execute=async Ee=>{try{const De=nhe(),Pe=ne.definition.parameters.parse(Ee),Re=ne.implementation;return await Re(Pe,De)}catch(De){console.error(`[AIService] Error executing tool ${Y} via SDK:`,De);const Pe=De instanceof Error?De.message:String(De);return De instanceof L.ZodError?{_isError:!0,error:`Invalid arguments: ${De.errors.map(Re=>`${Re.path.join(".")} (${Re.message})`).join(", ")}`}:{_isError:!0,error:Pe}}}),X[Y]=be}return X},{}),V={model:ae,messages:g,abortSignal:u.signal,maxSteps:5};Object.keys(se).length>0&&(V.tools=se),V.toolChoice=o.toolChoice??(Object.keys(se).length>0?"auto":"none"),o.system&&(V.system=o.system),o.parameters&&(o.parameters.temperature!==void 0&&(V.temperature=o.parameters.temperature),o.parameters.max_tokens!==void 0&&(V.maxTokens=o.parameters.max_tokens),o.parameters.top_p!==void 0&&(V.topP=o.parameters.top_p),o.parameters.top_k!==void 0&&(V.topK=o.parameters.top_k),o.parameters.presence_penalty!==void 0&&(V.presencePenalty=o.parameters.presence_penalty),o.parameters.frequency_penalty!==void 0&&(V.frequencyPenalty=o.parameters.frequency_penalty)),console.log(`AIService: Calling streamText with options for ${s}:`,{model:V.model,messages:JSON.stringify(V.messages),system:V.system,temperature:V.temperature,maxTokens:V.maxTokens,topP:V.topP,topK:V.topK,presencePenalty:V.presencePenalty,frequencyPenalty:V.frequencyPenalty,toolChoice:V.toolChoice,tools:V.tools?Object.keys(V.tools):void 0,maxSteps:V.maxSteps}),_=await lue(V);for await(const X of _.fullStream){if(u.signal.aborted)throw console.log(`AIService: Stream ${s} aborted by signal.`),A="stop",new Error("Stream aborted by user.");switch(X.type){case"text-delta":{const Y={interactionId:s,chunk:X.textDelta},ne=await N6("middleware:interaction:processChunk",Y);if(ne!==!1){const be=ne&&typeof ne=="object"&&"chunk"in ne?ne.chunk:X.textDelta;ar.getState().appendInteractionResponseChunk(s,be),Ei.emit("interaction:stream_chunk",{interactionId:s,chunk:be})}break}case"tool-call":{const Y=JSON.stringify(X);O.push(Y),ar.getState()._updateInteractionInState(s,{metadata:{...(F=ar.getState().interactions.find(ne=>ne.id===s))==null?void 0:F.metadata,toolCalls:[...O]}}),console.log(`[AIService] Tool call observed: ${X.toolName}`,X.args);break}case"tool-result":{const Y=JSON.stringify(X);I.push(Y),ar.getState()._updateInteractionInState(s,{metadata:{...(W=ar.getState().interactions.find(ne=>ne.id===s))==null?void 0:W.metadata,toolResults:[...I]}}),console.log(`[AIService] Tool result observed for ${X.toolName} (Call ID: ${X.toolCallId})`,X.result);break}case"finish":console.log("[AIService] Stream finish part received:",X),A=X.finishReason,E=X.usage,C=X.providerMetadata;break;case"error":throw console.error("[AIService] Stream error part:",X.error),A="error",new Error(`AI Stream Error: ${X.error instanceof Error?X.error.message:X.error}`);case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"file":case"tool-call-streaming-start":case"tool-call-delta":case"step-start":case"step-finish":break}}if(u.signal.aborted)throw A="stop",new Error("Stream aborted by user.");A===void 0&&(console.warn(`[AIService] Stream loop finished for ${s} without receiving a 'finish' part.`),A="other")}catch(ae){console.error(`AIService: Error during interaction ${s}:`,ae);const re=ae instanceof Error&&ae.message==="Stream aborted by user.";A=A??(re?"stop":"error"),S=re?void 0:ae instanceof Error?ae.message:String(ae),re?(console.log(`AIService: Interaction ${s} cancelled.`),dt.info("Interaction cancelled.")):dt.error(`AI Interaction Error: ${S}`)}finally{this.activeStreams.delete(s);const ae=ar.getState().activeStreamBuffers[s]||"";switch(A){case"stop":case"length":case"tool-calls":x="COMPLETED";break;case"error":x="ERROR";break;case"other":default:ae.trim()||O.length>0?(x="COMPLETED",console.warn(`[AIService] Interaction ${s} finished with reason '${A||"unknown"}', but content exists. Marking COMPLETED.`)):(x="WARNING",S=S??"Stream ended unexpectedly without output.",console.warn(`[AIService] Interaction ${s} finished with reason '${A||"unknown"}' and no content. Marking WARNING.`));break}const re=((U=ar.getState().interactions.find(Y=>Y.id===s))==null?void 0:U.metadata)||v.metadata,ee={status:x,endedAt:new Date,response:ae,metadata:{...re,...E&&{promptTokens:E.promptTokens,completionTokens:E.completionTokens,totalTokens:E.totalTokens},...C&&{providerMetadata:C},...(x==="ERROR"||x==="WARNING")&&{error:S},toolCalls:O,toolResults:I,attachedFiles:(he=v.metadata.attachedFiles)==null?void 0:he.map(({contentBase64:Y,contentText:ne,...be})=>be)}};ar.getState()._updateInteractionInState(s,ee),ar.getState()._removeStreamingId(s);const se=ar.getState().interactions.find(Y=>Y.id===s);se?ar.getState().updateInteractionAndPersist({...se}).catch(Y=>{console.error(`AIService: Failed final persistence for ${s}`,Y)}):console.error(`AIService: CRITICAL - Could not find final state for interaction ${s} to persist after updates. State might be inconsistent.`);let V=[],X=[];try{V=O.map(Y=>JSON.parse(Y)),X=I.map(Y=>JSON.parse(Y))}catch(Y){console.error("[AIService] Failed to parse tool strings for event emitter:",Y)}Ei.emit("interaction:completed",{interactionId:s,status:x,error:S??void 0,toolCalls:V,toolResults:X}),console.log(`AIService: Finalized interaction ${s} with status ${x}.`)}return s}static stopInteraction(t){const n=this.activeStreams.get(t),r=ar.getState();if(n&&!n.signal.aborted)console.log(`AIService: Aborting interaction ${t}...`),n.abort();else{console.log(`AIService: No active controller found or already aborted for interaction ${t}. Attempting store cleanup if needed.`);const a=r.interactions.find(i=>i.id===t);if(a&&a.status==="STREAMING"&&(!n||n.signal.aborted)){console.warn(`AIService: Forcing CANCELLED status for interaction ${t} without active controller or already aborted.`);const i=r.activeStreamBuffers[t]||"",o={status:"CANCELLED",endedAt:new Date,response:i};r._updateInteractionInState(t,o),r._removeStreamingId(t);const s=ar.getState().interactions.find(u=>u.id===t);s&&r.updateInteractionAndPersist({...s}).catch(u=>{console.error(`AIService: Failed persistence for forced cancel of ${t}`,u)})}}}}Ha(wb,"activeStreams",new Map);const f0=Ul(ql((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Wt.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),dt.error(r)}},addDbMod:async n=>{const r=Po(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((o,s)=>o.loadOrder-s.loadOrder)});try{return await Wt.saveMod(a),dt.success(`Mod "${a.name}" added.`),r}catch(i){const o="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(s=>{s.dbMods=s.dbMods.filter(u=>u.id!==r),s.error=o}),dt.error(o),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(s=>{i=s.dbMods.findIndex(u=>u.id===n),i!==-1?(a={...s.dbMods[i]},s.dbMods[i]={...s.dbMods[i],...r},r.loadOrder!==void 0&&s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const o=i!==-1?t().dbMods[i]:void 0;if(o)try{await Wt.saveMod(o),dt.success(`Mod "${o.name}" updated.`)}catch(s){const u="Failed to save mod update";throw console.error("ModStore: Error updating mod",s),e(c=>{const f=c.dbMods.findIndex(h=>h.id===n);f!==-1&&a&&(c.dbMods[f]=a,c.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),c.error=u}),dt.error(u),s}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(o=>o.id!==n)}));try{await Wt.deleteMod(n),dt.success(`Mod "${a}" deleted.`)}catch(i){const o="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(s=>{s.dbMods.push(r),s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder),s.error=o}),dt.error(o),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}}))),ohe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}};function I6(e){const t=e.id,n=e.name,r=ma.getState(),a=f0.getState();return{modId:t,modName:n,registerPromptControl:o=>r.registerPromptControl(o),registerChatControl:o=>r.registerChatControl(o),registerTool:(o,s,u)=>(console.log(`[${n}] Registering tool: ${o}`),r.registerTool(t,o,s,u)),on:(o,s)=>(Ei.on(o,s),()=>Ei.off(o,s)),addMiddleware:(o,s)=>r.registerMiddleware(o,t,s),registerSettingsTab:o=>(a._addSettingsTab(o),()=>a._removeSettingsTab(o.id)),getContextSnapshot:()=>{const o=ar.getState(),s=Wl.getState(),u=ga.getState(),c=Ai.getState(),{providerId:f}=ohe(c.selectedModelId),h=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(o.currentConversationId===h?o.interactions.map(m=>Object.freeze({...m})):[]),isStreaming:o.status==="streaming",selectedProviderId:f,selectedModelId:c.selectedModelId,activeSystemPrompt:u.globalSystemPrompt,temperature:u.temperature,maxTokens:u.maxTokens,theme:u.theme})},showToast:(o,s)=>{dt[o](`[${n}] ${s}`)},log:(o,...s)=>{console[o](`[Mod: ${n}]`,...s)}}}async function she(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,o=null;try{if(i=I6(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);a=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(u){o=u instanceof Error?u:String(u),console.error(`[ModLoader] Error loading mod "${r.name}":`,u),dt.error(`Error loading mod "${r.name}": ${o instanceof Error?o.message:o}`)}i||(i=I6(r));const s={id:r.id,name:r.name,api:i,error:o??void 0};return Ei.emit(s.error?"mod:error":"mod:loaded",{id:r.id,name:r.name,error:s.error}),s}));return Ei.emit("app:loaded",void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var lhe=(e,t,n,r,a,i,o,s)=>{let u=document.documentElement,c=["light","dark"];function f(g){(Array.isArray(e)?e:[e]).forEach(w=>{let v=w==="class",_=v&&i?a.map(x=>i[x]||x):a;v?(u.classList.remove(..._),u.classList.add(i&&i[g]?i[g]:g)):u.setAttribute(w,g)}),h(g)}function h(g){s&&c.includes(g)&&(u.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let g=localStorage.getItem(t)||n,w=o&&g==="system"?m():g;f(w)}catch{}},uhe=R.createContext(void 0),che={setTheme:e=>{},themes:[]},dhe=()=>{var e;return(e=R.useContext(uhe))!=null?e:che};R.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:s,nonce:u,scriptProps:c})=>{let f=JSON.stringify([n,t,i,e,s,o,r,a]).slice(1,-1);return R.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${lhe.toString()})(${f})`}})});const fhe=({...e})=>{const{theme:t="system"}=dhe();return y.jsx($H,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function Jk({className:e,...t}){return y.jsx("textarea",{"data-slot":"textarea",className:Dt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const MF=R.forwardRef(({value:e,onChange:t,onSubmit:n,disabled:r,placeholder:a="Type message... (Shift+Enter for new line)"},i)=>{const o=R.useRef(null);R.useImperativeHandle(i,()=>o.current,[]);const{focusInputOnNextRender:s,setFocusInputFlag:u}=Uo(Hn(h=>({focusInputOnNextRender:h.focusInputOnNextRender,setFocusInputFlag:h.setFocusInputFlag})));R.useEffect(()=>{s&&o.current&&(u(!1),requestAnimationFrame(()=>{var h;(h=o.current)==null||h.focus()}))},[s,u]);const c=h=>{h.key==="Enter"&&!h.shiftKey&&!r&&(h.preventDefault(),n())},f=h=>{t(h.target.value)};return R.useEffect(()=>{const h=o.current;if(h){h.style.height="auto";const m=h.scrollHeight,g=250;h.style.height=`${Math.min(m,g)}px`}},[e]),y.jsx(Jk,{ref:o,value:e,onChange:f,onKeyDown:c,disabled:r,placeholder:a,rows:3,className:Dt("w-full p-3 border border-[--border] rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-[--primary] outline-none disabled:opacity-50 overflow-y-auto","min-h-[80px] max-h-[250px]"),"aria-label":"Chat input"})});MF.displayName="InputArea";var hhe=R.createContext(void 0);function Bh(e){const t=R.useContext(hhe);return e||t||"ltr"}function h0(e,[t,n]){return Math.min(n,Math.max(t,e))}function phe(e,t){return R.useReducer((n,r)=>t[n][r]??n,e)}var Qk="ScrollArea",[PF,K1e]=di(Qk),[mhe,Co]=PF(Qk),FF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,u]=R.useState(null),[c,f]=R.useState(null),[h,m]=R.useState(null),[g,w]=R.useState(null),[v,_]=R.useState(null),[x,S]=R.useState(0),[E,C]=R.useState(0),[A,O]=R.useState(!1),[I,D]=R.useState(!1),B=_n(t,Q=>u(Q)),K=Bh(a);return y.jsx(mhe,{scope:n,type:r,dir:K,scrollHideDelay:i,scrollArea:s,viewport:c,onViewportChange:f,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:w,scrollbarXEnabled:A,onScrollbarXEnabledChange:O,scrollbarY:v,onScrollbarYChange:_,scrollbarYEnabled:I,onScrollbarYEnabledChange:D,onCornerWidthChange:S,onCornerHeightChange:C,children:y.jsx(Jt.div,{dir:K,...o,ref:B,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});FF.displayName=Qk;var LF="ScrollAreaViewport",$F=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=Co(LF,n),s=R.useRef(null),u=_n(t,s,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),y.jsx(Jt.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});$F.displayName=LF;var Vs="ScrollAreaScrollbar",BF=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Co(Vs,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return R.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?y.jsx(ghe,{...r,ref:t,forceMount:n}):a.type==="scroll"?y.jsx(yhe,{...r,ref:t,forceMount:n}):a.type==="auto"?y.jsx(zF,{...r,ref:t,forceMount:n}):a.type==="always"?y.jsx(eA,{...r,ref:t}):null});BF.displayName=Vs;var ghe=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Co(Vs,e.__scopeScrollArea),[i,o]=R.useState(!1);return R.useEffect(()=>{const s=a.scrollArea;let u=0;if(s){const c=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),y.jsx(Ia,{present:n||i,children:y.jsx(zF,{"data-state":i?"visible":"hidden",...r,ref:t})})}),yhe=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Co(Vs,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Hw(()=>u("SCROLL_END"),100),[s,u]=phe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return R.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,a.scrollHideDelay,u]),R.useEffect(()=>{const c=a.viewport,f=i?"scrollLeft":"scrollTop";if(c){let h=c[f];const m=()=>{const g=c[f];h!==g&&(u("SCROLL"),o()),h=g};return c.addEventListener("scroll",m),()=>c.removeEventListener("scroll",m)}},[a.viewport,i,u,o]),y.jsx(Ia,{present:n||s!=="hidden",children:y.jsx(eA,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ft(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Ft(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),zF=R.forwardRef((e,t)=>{const n=Co(Vs,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=R.useState(!1),s=e.orientation==="horizontal",u=Hw(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(s?c:f)}},10);return yh(n.viewport,u),yh(n.content,u),y.jsx(Ia,{present:r||i,children:y.jsx(eA,{"data-state":i?"visible":"hidden",...a,ref:t})})}),eA=R.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Co(Vs,e.__scopeScrollArea),i=R.useRef(null),o=R.useRef(0),[s,u]=R.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=GF(s.viewport,s.content),f={...r,sizes:s,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,g){return She(m,o.current,s,g)}return n==="horizontal"?y.jsx(bhe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=O6(m,s,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?y.jsx(vhe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=O6(m,s);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),bhe=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Co(Vs,e.__scopeScrollArea),[o,s]=R.useState(),u=R.useRef(null),c=_n(t,u,i.onScrollbarXChange);return R.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(qF,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":qw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),KF(m,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Nv(o.paddingLeft),paddingEnd:Nv(o.paddingRight)}})}})}),vhe=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Co(Vs,e.__scopeScrollArea),[o,s]=R.useState(),u=R.useRef(null),c=_n(t,u,i.onScrollbarYChange);return R.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(qF,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":qw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(i.viewport){const m=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),KF(m,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Nv(o.paddingTop),paddingEnd:Nv(o.paddingBottom)}})}})}),[whe,UF]=PF(Vs),qF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:u,onDragScroll:c,onWheelScroll:f,onResize:h,...m}=e,g=Co(Vs,n),[w,v]=R.useState(null),_=_n(t,B=>v(B)),x=R.useRef(null),S=R.useRef(""),E=g.viewport,C=r.content-r.viewport,A=ka(f),O=ka(u),I=Hw(h,10);function D(B){if(x.current){const K=B.clientX-x.current.left,Q=B.clientY-x.current.top;c({x:K,y:Q})}}return R.useEffect(()=>{const B=K=>{const Q=K.target;(w==null?void 0:w.contains(Q))&&A(K,C)};return document.addEventListener("wheel",B,{passive:!1}),()=>document.removeEventListener("wheel",B,{passive:!1})},[E,w,C,A]),R.useEffect(O,[r,O]),yh(w,I),yh(g.content,I),y.jsx(whe,{scope:n,scrollbar:w,hasThumb:a,onThumbChange:ka(i),onThumbPointerUp:ka(o),onThumbPositionChange:O,onThumbPointerDown:ka(s),children:y.jsx(Jt.div,{...m,ref:_,style:{position:"absolute",...m.style},onPointerDown:Ft(e.onPointerDown,B=>{B.button===0&&(B.target.setPointerCapture(B.pointerId),x.current=w.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),D(B))}),onPointerMove:Ft(e.onPointerMove,D),onPointerUp:Ft(e.onPointerUp,B=>{const K=B.target;K.hasPointerCapture(B.pointerId)&&K.releasePointerCapture(B.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),Rv="ScrollAreaThumb",HF=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=UF(Rv,e.__scopeScrollArea);return y.jsx(Ia,{present:n||a.hasThumb,children:y.jsx(_he,{ref:t,...r})})}),_he=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Co(Rv,n),o=UF(Rv,n),{onThumbPositionChange:s}=o,u=_n(t,h=>o.onThumbChange(h)),c=R.useRef(void 0),f=Hw(()=>{c.current&&(c.current(),c.current=void 0)},100);return R.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(f(),!c.current){const g=Ehe(h,s);c.current=g,s()}};return s(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,f,s]),y.jsx(Jt.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ft(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),w=h.clientX-g.left,v=h.clientY-g.top;o.onThumbPointerDown({x:w,y:v})}),onPointerUp:Ft(e.onPointerUp,o.onThumbPointerUp)})});HF.displayName=Rv;var tA="ScrollAreaCorner",VF=R.forwardRef((e,t)=>{const n=Co(tA,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(xhe,{...e,ref:t}):null});VF.displayName=tA;var xhe=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Co(tA,n),[i,o]=R.useState(0),[s,u]=R.useState(0),c=!!(i&&s);return yh(a.scrollbarX,()=>{var h;const f=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(f),u(f)}),yh(a.scrollbarY,()=>{var h;const f=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),c?y.jsx(Jt.div,{...r,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Nv(e){return e?parseInt(e,10):0}function GF(e,t){const n=e/t;return isNaN(n)?0:n}function qw(e){const t=GF(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function She(e,t,n,r="ltr"){const a=qw(n),i=a/2,o=t||i,s=a-o,u=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-s,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return WF([u,c],h)(e)}function O6(e,t,n="ltr"){const r=qw(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-r,u=n==="ltr"?[0,o]:[o*-1,0],c=h0(e,u);return WF([0,o],[0,s])(c)}function WF(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function KF(e,t){return e>0&&e<t}var Ehe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,s=n.top!==i.top;(o||s)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Hw(e,t){const n=ka(e),r=R.useRef(0);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),R.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function yh(e,t){const n=ka(t);$a(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var Che=FF,khe=$F,Ahe=VF;function sg({className:e,children:t,...n}){return y.jsxs(Che,{"data-slot":"scroll-area",className:Dt("relative",e),...n,children:[y.jsx(khe,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),y.jsx(The,{}),y.jsx(Ahe,{})]})}function The({className:e,orientation:t="vertical",...n}){return y.jsx(BF,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Dt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:y.jsx(HF,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function kr({className:e,type:t,...n}){return y.jsx("input",{type:t,"data-slot":"input",className:Dt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const Rhe=(e,t)=>{if(!t)return null;let n=iC,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Jn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Ms,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=Ms,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=Rb,r="text-green-500",a=`Synced with ${t}`;break}return y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(n,{className:Dt("h-3 w-3 ml-1 flex-shrink-0",r)})}),y.jsx(On,{side:"right",children:a})]})})},Iv=R.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:w,editingItemType:v,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:I})=>{const D=e.id===n,B=e.itemType==="project",K=e.id===w&&e.itemType===v,Q=B&&f.has(e.id),{projects:F,conversations:W}=B?m(e.id,g):{projects:[],conversations:[]},U=F.length>0||W.length>0,he=!B&&e.syncRepoId?r[e.id]:void 0,ae=!B&&e.syncRepoId?a.get(e.syncRepoId):void 0,re=!B&&ae?Rhe(he,ae):null,ee=()=>{K||(B&&U&&h(e.id),i(e.id,e.itemType))},se=ne=>{ne.stopPropagation(),B?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&s(e.id,ne):o(e.id,ne)},V=ne=>{ne.stopPropagation(),E(e)},X=ne=>{ne.key==="Enter"?(ne.preventDefault(),C()):ne.key==="Escape"&&A(B&&_==="New Project")};R.useEffect(()=>{var ne,be;K&&((ne=I.current)==null||ne.focus(),(be=I.current)==null||be.select())},[K,I]);const Y=B?e.name:e.title;return y.jsxs(y.Fragment,{children:[y.jsxs("li",{className:Dt("flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!K&&"hover:bg-muted/50 hover:text-primary/80",D&&!K?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",K&&"bg-muted ring-1 ring-primary",!K&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ee,children:[y.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[B&&U&&y.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:ne=>{ne.stopPropagation(),h(e.id)},children:Q?y.jsx(nC,{className:"h-3 w-3 text-muted-foreground"}):y.jsx(FO,{className:"h-3 w-3 text-muted-foreground"})}),B&&!U&&y.jsx("span",{className:"w-3 flex-shrink-0"}),B?y.jsx(Kv,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):y.jsx(Aq,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),K?y.jsx(kr,{ref:I,value:x,onChange:ne=>S(ne.target.value),onKeyDown:X,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:ne=>ne.stopPropagation(),disabled:O}):y.jsx("span",{className:"truncate pr-1",children:Y}),re]}),y.jsx("div",{className:"flex items-center flex-shrink-0",children:K?y.jsxs(y.Fragment,{children:[y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-5 w-5 text-green-500 hover:text-green-600",onClick:ne=>{ne.stopPropagation(),C()},disabled:O||!x.trim()||x.trim()===_,"aria-label":"Save changes",children:O?y.jsx(Jn,{className:"h-3 w-3 animate-spin"}):y.jsx(vo,{className:"h-3 w-3"})}),y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:ne=>{ne.stopPropagation(),A(B&&_==="New Project")},disabled:O,"aria-label":"Cancel edit",children:y.jsx(zs,{className:"h-3 w-3"})})]}):y.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:V,"aria-label":`Edit ${Y}`,children:y.jsx(oC,{className:"h-3 w-3"})})}),y.jsx(On,{side:"top",children:"Edit"})]})}),B?y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:ne=>c(e.id,ne),"aria-label":`Export project ${Y}`,children:y.jsx(GU,{className:"h-3 w-3"})})}),y.jsx(On,{side:"top",children:"Export Project (JSON)"})]})}):y.jsxs("div",{className:"relative group/export",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx("div",{className:"p-1 rounded hover:bg-muted cursor-pointer","aria-label":`Export ${Y}`,children:y.jsx(Nb,{className:"h-3 w-3 text-muted-foreground group-hover/export:text-foreground"})})}),y.jsx(On,{side:"top",children:"Export Conversation"})]})}),y.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:ne=>ne.stopPropagation(),children:[y.jsx(Ut,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:ne=>u(e.id,"json",ne),children:"JSON"}),y.jsx(Ut,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:ne=>u(e.id,"md",ne),children:"MD"})]})]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-5 w-5 text-destructive hover:text-destructive/80",onClick:se,"aria-label":`Delete ${Y}`,children:y.jsx(Hu,{className:"h-3 w-3"})})}),y.jsx(On,{side:"top",children:"Delete"})]})})]})})]},e.id),B&&Q&&y.jsxs(y.Fragment,{children:[F.sort((ne,be)=>be.updatedAt.getTime()-ne.updatedAt.getTime()).map(ne=>y.jsx(Iv,{item:{...ne,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:w,editingItemType:v,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:I},ne.id)),W.sort((ne,be)=>be.updatedAt.getTime()-ne.updatedAt.getTime()).map(ne=>y.jsx(Iv,{item:{...ne,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:w,editingItemType:v,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:I},ne.id))]})]})});Iv.displayName="ConversationItemRenderer";const Nhe=({updateProject:e,updateConversation:t,deleteProject:n})=>{const[r,a]=R.useState(null),[i,o]=R.useState(null),[s,u]=R.useState(""),[c,f]=R.useState(""),[h,m]=R.useState(!1),g=R.useRef(null),w=R.useCallback(S=>{a(S.id),o(S.itemType);const E=S.itemType==="project"?S.name:S.title;u(E),f(E),m(!1)},[]),v=R.useCallback(()=>{a(null),o(null),u(""),f(""),m(!1)},[]),_=R.useCallback(async()=>{if(!r||!i||h)return;const S=c.trim();if(!S||S===s){S||dt.error("Name cannot be empty."),v();return}m(!0);try{i==="project"?await e(r,{name:S}):await t(r,{title:S}),v()}catch(E){console.error("Failed to save edit:",E),m(!1)}},[r,i,c,s,h,e,t,v]),x=R.useCallback((S=!1)=>{S&&i==="project"&&s==="New Project"&&r&&n(r).catch(E=>{console.error("Failed to delete new project on cancel:",E),dt.error("Failed to clean up new project.")}),v()},[r,i,s,n,v]);return{editingItemId:r,editingItemType:i,editingName:s,localEditingName:c,setLocalEditingName:f,isSavingEdit:h,editInputRef:g,handleStartEditing:w,handleSaveEdit:_,handleCancelEdit:x}},NE=(e,t,n,r,a,i,o,s,u)=>{if(!n)return!0;const c=`${t}-${e}`;if(u[c]!==void 0)return u[c];let f=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))f=!0;else{const m=s.get(e)||[],g=o.get(e)||[];for(const w of g)if(w.title.toLowerCase().includes(n)){f=!0;break}if(!f){for(const w of m)if(NE(w.id,"project",n,r,a,i,o,s,u)){f=!0;break}}}}return u[c]=f,f},Ihe=()=>{const{conversations:e,projects:t,selectItem:n,selectedItemId:r,selectedItemType:a,addConversation:i,updateConversation:o,deleteConversation:s,addProject:u,updateProject:c,deleteProject:f,exportConversation:h,exportProject:m,isLoading:g,syncRepos:w,conversationSyncStatus:v,getConversationById:_,getProjectById:x}=Wl(Hn(Ie=>({conversations:Ie.conversations,projects:Ie.projects,selectItem:Ie.selectItem,selectedItemId:Ie.selectedItemId,selectedItemType:Ie.selectedItemType,addConversation:Ie.addConversation,updateConversation:Ie.updateConversation,deleteConversation:Ie.deleteConversation,addProject:Ie.addProject,updateProject:Ie.updateProject,deleteProject:Ie.deleteProject,exportConversation:Ie.exportConversation,exportProject:Ie.exportProject,isLoading:Ie.isLoading,syncRepos:Ie.syncRepos,conversationSyncStatus:Ie.conversationSyncStatus,getConversationById:Ie.getConversationById,getProjectById:Ie.getProjectById}))),S=Uo(Ie=>Ie.setFocusInputFlag),[E,C]=vt.useState(new Set),[A,O]=R.useState(""),{editingItemId:I,editingItemType:D,editingName:B,localEditingName:K,setLocalEditingName:Q,isSavingEdit:F,editInputRef:W,handleStartEditing:U,handleSaveEdit:he,handleCancelEdit:ae}=Nhe({updateProject:c,updateConversation:o,deleteProject:f,getProjectById:x,getConversationById:_}),re=R.useCallback(Ie=>{C(Ae=>{const z=new Set(Ae);return z.has(Ie)?z.delete(Ie):z.add(Ie),z})},[]),ee=R.useCallback(()=>{if(a==="project")return r;if(a==="conversation"&&r){const Ie=_(r);return(Ie==null?void 0:Ie.projectId)??null}return null},[r,a,_]),se=R.useCallback(async()=>{if(!I)try{const Ie=ee(),Ae=await i({title:"New Chat",projectId:Ie});n(Ae,"conversation"),setTimeout(()=>S(!0),0)}catch(Ie){console.error("Failed to create new chat:",Ie),dt.error("Failed to create new chat.")}},[I,ee,i,n,S]),V=R.useCallback(async()=>{if(!I)try{const Ie=ee(),Ae=await u({name:"New Project",parentId:Ie});n(Ae,"project"),C(z=>new Set(z).add(Ae)),setTimeout(()=>{const z=x(Ae);z?U({...z,itemType:"project"}):(console.warn("New project data not found immediately, using fallback"),U({id:Ae,itemType:"project",name:"New Project",parentId:Ie,createdAt:new Date,updatedAt:new Date,path:"/New Project"}))},50)}catch(Ie){console.error("Failed to create new project:",Ie)}},[I,ee,u,n,x,U]),X=R.useCallback((Ie,Ae)=>{Ie!==I&&(I&&Ie!==I&&(K.trim()&&K.trim()!==B?he():ae(D==="project"&&B==="New Project")),!(Ie===r&&Ae===a)&&(n(Ie,Ae),Ae==="conversation"&&setTimeout(()=>S(!0),0)))},[I,D,B,K,r,a,he,ae,n,S]),Y=R.useCallback((Ie,Ae)=>{Ae.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&s(Ie).catch(z=>{console.error("Failed to delete conversation:",z),dt.error("Failed to delete conversation.")})},[s]),ne=R.useCallback((Ie,Ae)=>{Ae.stopPropagation(),f(Ie).catch(z=>{console.error("Failed to delete project:",z),dt.error("Failed to delete project.")})},[f]),be=R.useCallback(async(Ie,Ae,z)=>{z.stopPropagation();try{await h(Ie,Ae)}catch(ke){console.error(`Failed to export conversation as ${Ae}:`,ke)}},[h]),Ee=R.useCallback(async(Ie,Ae)=>{Ae.stopPropagation();try{await m(Ie)}catch(z){console.error("Failed to export project:",z)}},[m]),De=R.useMemo(()=>new Map(w.map(Ie=>[Ie.id,Ie.name])),[w]),{projectsById:Pe,conversationsByProjectId:Re,projectsByParentId:Te}=R.useMemo(()=>{const Ie=new Map(t.map(ke=>[ke.id,ke])),Ae=new Map;e.forEach(ke=>{const Ne=ke.projectId??null;Ae.has(Ne)||Ae.set(Ne,[]),Ae.get(Ne).push(ke)});const z=new Map;return t.forEach(ke=>{const Ne=ke.parentId??null;z.has(Ne)||z.set(Ne,[]),z.get(Ne).push(ke)}),{projectsById:Ie,conversationsByProjectId:Ae,projectsByParentId:z}},[t,e]),He=R.useCallback((Ie,Ae)=>{const z=Ae.toLowerCase(),ke={},Ne=(Te.get(Ie)||[]).filter(ie=>NE(ie.id,"project",z,t,e,Pe,Re,Te,ke)),ce=(Re.get(Ie)||[]).filter(ie=>ie.title.toLowerCase().includes(z));return Ne.sort((ie,J)=>J.updatedAt.getTime()-ie.updatedAt.getTime()),ce.sort((ie,J)=>J.updatedAt.getTime()-ie.updatedAt.getTime()),{projects:Ne,conversations:ce}},[t,e,Pe,Re,Te]),it=R.useMemo(()=>{const Ie=A.toLowerCase(),Ae={},z=(Te.get(null)||[]).filter(ce=>NE(ce.id,"project",Ie,t,e,Pe,Re,Te,Ae)),ke=(Re.get(null)||[]).filter(ce=>ce.title.toLowerCase().includes(Ie)),Ne=[...z.map(ce=>({...ce,itemType:"project"})),...ke.map(ce=>({...ce,itemType:"conversation"}))];return Ne.sort((ce,ie)=>ie.updatedAt.getTime()-ce.updatedAt.getTime()),Ne},[t,e,A,Pe,Re,Te]);return y.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[y.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{size:"sm",variant:"ghost",onClick:V,"aria-label":"New Project",disabled:g||!!I,className:"h-7 w-7 p-0",children:y.jsx(aC,{className:"h-4 w-4"})})}),y.jsx(On,{side:"bottom",children:"New Project"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{size:"sm",variant:"ghost",onClick:se,"aria-label":"New Chat",disabled:g||!!I,className:"h-7 w-7 p-0",children:y.jsx(Zv,{className:"h-4 w-4"})})}),y.jsx(On,{side:"bottom",children:"New Chat"})]})})]})]}),y.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[y.jsx(Xv,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),y.jsx(kr,{type:"search",placeholder:"Filter...",value:A,onChange:Ie=>O(Ie.target.value),className:"h-8 text-xs pl-8",disabled:g})]}),y.jsx(sg,{className:"flex-grow",children:g?y.jsxs("div",{className:"space-y-1 p-1",children:[y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"})]}):it.length===0?y.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:A.trim()!==""?"No items match your filter.":"Workspace is empty."}):y.jsx("ul",{className:"space-y-0.5 p-1",children:it.map(Ie=>y.jsx(Iv,{item:Ie,level:0,selectedItemId:r,conversationSyncStatus:v,repoNameMap:De,onSelectItem:X,onDeleteConversation:Y,onDeleteProject:ne,onExportConversation:be,onExportProject:Ee,expandedProjects:E,toggleProjectExpansion:re,getChildren:He,filterText:A,editingItemId:I,editingItemType:D,editingName:B,localEditingName:K,setLocalEditingName:Q,handleStartEditing:U,handleSaveEdit:he,handleCancelEdit:ae,isSavingEdit:F,editInputRef:W},Ie.id))})})]})},Ohe=()=>{const{addConversation:e,addProject:t,selectItem:n,selectedItemId:r,selectedItemType:a,getConversationById:i}=Wl(Hn(f=>({addConversation:f.addConversation,addProject:f.addProject,selectItem:f.selectItem,selectedItemId:f.selectedItemId,selectedItemType:f.selectedItemType,getConversationById:f.getConversationById}))),o=Uo(f=>f.setFocusInputFlag),s=()=>{if(a==="project")return r;if(a==="conversation"&&r){const f=i(r);return(f==null?void 0:f.projectId)??null}return null},u=async()=>{try{const f=s(),h=await e({title:"New Chat",projectId:f});n(h,"conversation"),setTimeout(()=>o(!0),0)}catch(f){console.error("Failed to create new chat:",f)}},c=async()=>{try{const f=s(),h=await t({name:"New Project",parentId:f});n(h,"project")}catch(f){console.error("Failed to create new project:",f)}};return y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",onClick:c,className:"h-8 w-8","aria-label":"New Project",children:y.jsx(aC,{className:"h-4 w-4"})})}),y.jsx(On,{side:"right",children:"New Project"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8","aria-label":"New Chat",children:y.jsx(Zv,{className:"h-4 w-4"})})}),y.jsx(On,{side:"right",children:"New Chat"})]})})]})},Dhe=()=>{const e=ma(n=>n.registerChatControl),t=Wl(n=>n.isLoading);return vt.useEffect(()=>e({id:"core-conversation-list",status:()=>t?"loading":"ready",panel:"sidebar",renderer:()=>y.jsx(Ihe,{}),iconRenderer:()=>y.jsx(Ohe,{}),show:()=>!0,order:10}),[e,t]),null};var d2="focusScope.autoFocusOnMount",f2="focusScope.autoFocusOnUnmount",D6={bubbles:!1,cancelable:!0},jhe="FocusScope",lg=R.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,u]=R.useState(null),c=ka(a),f=ka(i),h=R.useRef(null),m=_n(t,v=>u(v)),g=R.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;R.useEffect(()=>{if(r){let v=function(E){if(g.paused||!s)return;const C=E.target;s.contains(C)?h.current=C:Du(h.current,{select:!0})},_=function(E){if(g.paused||!s)return;const C=E.relatedTarget;C!==null&&(s.contains(C)||Du(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const A of E)A.removedNodes.length>0&&Du(s)};document.addEventListener("focusin",v),document.addEventListener("focusout",_);const S=new MutationObserver(x);return s&&S.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",_),S.disconnect()}}},[r,s,g.paused]),R.useEffect(()=>{if(s){M6.add(g);const v=document.activeElement;if(!s.contains(v)){const x=new CustomEvent(d2,D6);s.addEventListener(d2,c),s.dispatchEvent(x),x.defaultPrevented||(Mhe(Bhe(ZF(s)),{select:!0}),document.activeElement===v&&Du(s))}return()=>{s.removeEventListener(d2,c),setTimeout(()=>{const x=new CustomEvent(f2,D6);s.addEventListener(f2,f),s.dispatchEvent(x),x.defaultPrevented||Du(v??document.body,{select:!0}),s.removeEventListener(f2,f),M6.remove(g)},0)}}},[s,c,f,g]);const w=R.useCallback(v=>{if(!n&&!r||g.paused)return;const _=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(_&&x){const S=v.currentTarget,[E,C]=Phe(S);E&&C?!v.shiftKey&&x===C?(v.preventDefault(),n&&Du(E,{select:!0})):v.shiftKey&&x===E&&(v.preventDefault(),n&&Du(C,{select:!0})):x===S&&v.preventDefault()}},[n,r,g.paused]);return y.jsx(Jt.div,{tabIndex:-1,...o,ref:m,onKeyDown:w})});lg.displayName=jhe;function Mhe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Du(r,{select:t}),document.activeElement!==n)return}function Phe(e){const t=ZF(e),n=j6(t,e),r=j6(t.reverse(),e);return[n,r]}function ZF(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function j6(e,t){for(const n of e)if(!Fhe(n,{upTo:t}))return n}function Fhe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Lhe(e){return e instanceof HTMLInputElement&&"select"in e}function Du(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Lhe(e)&&t&&e.select()}}var M6=$he();function $he(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=P6(e,t),e.unshift(t)},remove(t){var n;e=P6(e,t),(n=e[0])==null||n.resume()}}}function P6(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Bhe(e){return e.filter(t=>t.tagName!=="A")}var h2=0;function Vw(){R.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??F6()),document.body.insertAdjacentElement("beforeend",e[1]??F6()),h2++,()=>{h2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),h2--}},[])}function F6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Rs=function(){return Rs=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Rs.apply(this,arguments)};function YF(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function zhe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var _b="right-scroll-bar-position",xb="width-before-scroll-bar",Uhe="with-scroll-bars-hidden",qhe="--removed-body-scroll-bar-size";function p2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Hhe(e,t){var n=R.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Vhe=typeof window<"u"?R.useLayoutEffect:R.useEffect,L6=new WeakMap;function Ghe(e,t){var n=Hhe(null,function(r){return e.forEach(function(a){return p2(a,r)})});return Vhe(function(){var r=L6.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||p2(s,null)}),i.forEach(function(s){a.has(s)||p2(s,o)})}L6.set(n,e)},[e]),n}function Whe(e){return e}function Khe(e,t){t===void 0&&(t=Whe);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var u=function(){var f=o;o=[],f.forEach(i)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(f){o.push(f),c()},filter:function(f){return o=o.filter(f),n}}}};return a}function Zhe(e){e===void 0&&(e={});var t=Khe(null);return t.options=Rs({async:!0,ssr:!1},e),t}var XF=function(e){var t=e.sideCar,n=YF(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return R.createElement(r,Rs({},n))};XF.isSideCarExport=!0;function Yhe(e,t){return e.useMedium(t),XF}var JF=Zhe(),m2=function(){},Gw=R.forwardRef(function(e,t){var n=R.useRef(null),r=R.useState({onScrollCapture:m2,onWheelCapture:m2,onTouchMoveCapture:m2}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,u=e.className,c=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,w=e.inert,v=e.allowPinchZoom,_=e.as,x=_===void 0?"div":_,S=e.gapMode,E=YF(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,A=Ghe([n,t]),O=Rs(Rs({},E),a);return R.createElement(R.Fragment,null,f&&R.createElement(C,{sideCar:JF,removeScrollBar:c,shards:h,noIsolation:g,inert:w,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:S}),o?R.cloneElement(R.Children.only(s),Rs(Rs({},O),{ref:A})):R.createElement(x,Rs({},O,{className:u,ref:A}),s))});Gw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gw.classNames={fullWidth:xb,zeroRight:_b};var Xhe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Jhe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Xhe();return t&&e.setAttribute("nonce",t),e}function Qhe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function epe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var tpe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Jhe())&&(Qhe(t,n),epe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},npe=function(){var e=tpe();return function(t,n){R.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},QF=function(){var e=npe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},rpe={left:0,top:0,right:0,gap:0},g2=function(e){return parseInt(e||"",10)||0},ape=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[g2(n),g2(r),g2(a)]},ipe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return rpe;var t=ape(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},ope=QF(),Gf="data-scroll-locked",spe=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Uhe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Gf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_b,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(xb,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(_b," .").concat(_b,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(xb," .").concat(xb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Gf,`] {
    `).concat(qhe,": ").concat(s,`px;
  }
`)},$6=function(){var e=parseInt(document.body.getAttribute(Gf)||"0",10);return isFinite(e)?e:0},lpe=function(){R.useEffect(function(){return document.body.setAttribute(Gf,($6()+1).toString()),function(){var e=$6()-1;e<=0?document.body.removeAttribute(Gf):document.body.setAttribute(Gf,e.toString())}},[])},upe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;lpe();var i=R.useMemo(function(){return ipe(a)},[a]);return R.createElement(ope,{styles:spe(i,!t,a,n?"":"!important")})},IE=!1;if(typeof window<"u")try{var ib=Object.defineProperty({},"passive",{get:function(){return IE=!0,!0}});window.addEventListener("test",ib,ib),window.removeEventListener("test",ib,ib)}catch{IE=!1}var Tf=IE?{passive:!1}:!1,cpe=function(e){return e.tagName==="TEXTAREA"},eL=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!cpe(e)&&n[t]==="visible")},dpe=function(e){return eL(e,"overflowY")},fpe=function(e){return eL(e,"overflowX")},B6=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=tL(e,r);if(a){var i=nL(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},hpe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},ppe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},tL=function(e,t){return e==="v"?dpe(t):fpe(t)},nL=function(e,t){return e==="v"?hpe(t):ppe(t)},mpe=function(e,t){return e==="h"&&t==="rtl"?-1:1},gpe=function(e,t,n,r,a){var i=mpe(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,u=t.contains(s),c=!1,f=o>0,h=0,m=0;do{var g=nL(e,s),w=g[0],v=g[1],_=g[2],x=v-_-i*w;(w||x)&&tL(e,s)&&(h+=x,m+=w),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(f&&Math.abs(h)<1||!f&&Math.abs(m)<1)&&(c=!0),c},ob=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},z6=function(e){return[e.deltaX,e.deltaY]},U6=function(e){return e&&"current"in e?e.current:e},ype=function(e,t){return e[0]===t[0]&&e[1]===t[1]},bpe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vpe=0,Rf=[];function wpe(e){var t=R.useRef([]),n=R.useRef([0,0]),r=R.useRef(),a=R.useState(vpe++)[0],i=R.useState(QF)[0],o=R.useRef(e);R.useEffect(function(){o.current=e},[e]),R.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=zhe([e.lockRef.current],(e.shards||[]).map(U6),!0).filter(Boolean);return v.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=R.useCallback(function(v,_){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=ob(v),S=n.current,E="deltaX"in v?v.deltaX:S[0]-x[0],C="deltaY"in v?v.deltaY:S[1]-x[1],A,O=v.target,I=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in v&&I==="h"&&O.type==="range")return!1;var D=B6(I,O);if(!D)return!0;if(D?A=I:(A=I==="v"?"h":"v",D=B6(I,O)),!D)return!1;if(!r.current&&"changedTouches"in v&&(E||C)&&(r.current=A),!A)return!0;var B=r.current||A;return gpe(B,_,v,B==="h"?E:C)},[]),u=R.useCallback(function(v){var _=v;if(!(!Rf.length||Rf[Rf.length-1]!==i)){var x="deltaY"in _?z6(_):ob(_),S=t.current.filter(function(A){return A.name===_.type&&(A.target===_.target||_.target===A.shadowParent)&&ype(A.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(U6).filter(Boolean).filter(function(A){return A.contains(_.target)}),C=E.length>0?s(_,E[0]):!o.current.noIsolation;C&&_.cancelable&&_.preventDefault()}}},[]),c=R.useCallback(function(v,_,x,S){var E={name:v,delta:_,target:x,should:S,shadowParent:_pe(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),f=R.useCallback(function(v){n.current=ob(v),r.current=void 0},[]),h=R.useCallback(function(v){c(v.type,z6(v),v.target,s(v,e.lockRef.current))},[]),m=R.useCallback(function(v){c(v.type,ob(v),v.target,s(v,e.lockRef.current))},[]);R.useEffect(function(){return Rf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",u,Tf),document.addEventListener("touchmove",u,Tf),document.addEventListener("touchstart",f,Tf),function(){Rf=Rf.filter(function(v){return v!==i}),document.removeEventListener("wheel",u,Tf),document.removeEventListener("touchmove",u,Tf),document.removeEventListener("touchstart",f,Tf)}},[]);var g=e.removeScrollBar,w=e.inert;return R.createElement(R.Fragment,null,w?R.createElement(i,{styles:bpe(a)}):null,g?R.createElement(upe,{gapMode:e.gapMode}):null)}function _pe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xpe=Yhe(JF,wpe);var ug=R.forwardRef(function(e,t){return R.createElement(Gw,Rs({},e,{ref:t,sideCar:xpe}))});ug.classNames=Gw.classNames;var Spe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Nf=new WeakMap,sb=new WeakMap,lb={},y2=0,rL=function(e){return e&&(e.host||rL(e.parentNode))},Epe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=rL(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Cpe=function(e,t,n,r){var a=Epe(t,Array.isArray(e)?e:[e]);lb[n]||(lb[n]=new WeakMap);var i=lb[n],o=[],s=new Set,u=new Set(a),c=function(h){!h||s.has(h)||(s.add(h),c(h.parentNode))};a.forEach(c);var f=function(h){!h||u.has(h)||Array.prototype.forEach.call(h.children,function(m){if(s.has(m))f(m);else try{var g=m.getAttribute(r),w=g!==null&&g!=="false",v=(Nf.get(m)||0)+1,_=(i.get(m)||0)+1;Nf.set(m,v),i.set(m,_),o.push(m),v===1&&w&&sb.set(m,!0),_===1&&m.setAttribute(n,"true"),w||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return f(t),s.clear(),y2++,function(){o.forEach(function(h){var m=Nf.get(h)-1,g=i.get(h)-1;Nf.set(h,m),i.set(h,g),m||(sb.has(h)||h.removeAttribute(r),sb.delete(h)),g||h.removeAttribute(n)}),y2--,y2||(Nf=new WeakMap,Nf=new WeakMap,sb=new WeakMap,lb={})}},Ww=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Spe(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Cpe(r,a,n,"aria-hidden")):function(){return null}},Kw="Dialog",[aL,Z1e]=di(Kw),[kpe,as]=aL(Kw),iL=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=R.useRef(null),u=R.useRef(null),[c,f]=Wo({prop:r,defaultProp:a??!1,onChange:i,caller:Kw});return y.jsx(kpe,{scope:t,triggerRef:s,contentRef:u,contentId:Ta(),titleId:Ta(),descriptionId:Ta(),open:c,onOpenChange:f,onOpenToggle:R.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};iL.displayName=Kw;var oL="DialogTrigger",sL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=as(oL,n),i=_n(t,a.triggerRef);return y.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":aA(a.open),...r,ref:i,onClick:Ft(e.onClick,a.onOpenToggle)})});sL.displayName=oL;var nA="DialogPortal",[Ape,lL]=aL(nA,{forceMount:void 0}),uL=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=as(nA,t);return y.jsx(Ape,{scope:t,forceMount:n,children:R.Children.map(r,o=>y.jsx(Ia,{present:n||i.open,children:y.jsx(Eh,{asChild:!0,container:a,children:o})}))})};uL.displayName=nA;var Ov="DialogOverlay",cL=R.forwardRef((e,t)=>{const n=lL(Ov,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=as(Ov,e.__scopeDialog);return i.modal?y.jsx(Ia,{present:r||i.open,children:y.jsx(Rpe,{...a,ref:t})}):null});cL.displayName=Ov;var Tpe=qu("DialogOverlay.RemoveScroll"),Rpe=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=as(Ov,n);return y.jsx(ug,{as:Tpe,allowPinchZoom:!0,shards:[a.contentRef],children:y.jsx(Jt.div,{"data-state":aA(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),pd="DialogContent",dL=R.forwardRef((e,t)=>{const n=lL(pd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=as(pd,e.__scopeDialog);return y.jsx(Ia,{present:r||i.open,children:i.modal?y.jsx(Npe,{...a,ref:t}):y.jsx(Ipe,{...a,ref:t})})});dL.displayName=pd;var Npe=R.forwardRef((e,t)=>{const n=as(pd,e.__scopeDialog),r=R.useRef(null),a=_n(t,n.contentRef,r);return R.useEffect(()=>{const i=r.current;if(i)return Ww(i)},[]),y.jsx(fL,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:Ft(e.onFocusOutside,i=>i.preventDefault())})}),Ipe=R.forwardRef((e,t)=>{const n=as(pd,e.__scopeDialog),r=R.useRef(!1),a=R.useRef(!1);return y.jsx(fL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),fL=R.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=as(pd,n),u=R.useRef(null),c=_n(t,u);return Vw(),y.jsxs(y.Fragment,{children:[y.jsx(lg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(_h,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":aA(s.open),...o,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(Ope,{titleId:s.titleId}),y.jsx(jpe,{contentRef:u,descriptionId:s.descriptionId})]})]})}),rA="DialogTitle",hL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=as(rA,n);return y.jsx(Jt.h2,{id:a.titleId,...r,ref:t})});hL.displayName=rA;var pL="DialogDescription",mL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=as(pL,n);return y.jsx(Jt.p,{id:a.descriptionId,...r,ref:t})});mL.displayName=pL;var gL="DialogClose",yL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=as(gL,n);return y.jsx(Jt.button,{type:"button",...r,ref:t,onClick:Ft(e.onClick,()=>a.onOpenChange(!1))})});yL.displayName=gL;function aA(e){return e?"open":"closed"}var bL="DialogTitleWarning",[Y1e,vL]=UH(bL,{contentName:pd,titleName:rA,docsSlug:"dialog"}),Ope=({titleId:e})=>{const t=vL(bL),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return R.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Dpe="DialogDescriptionWarning",jpe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vL(Dpe).contentName}}.`;return R.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},wL=iL,Mpe=sL,_L=uL,xL=cL,SL=dL,Ppe=hL,Fpe=mL,EL=yL;function Zw({...e}){return y.jsx(wL,{"data-slot":"dialog",...e})}function Lpe({...e}){return y.jsx(Mpe,{"data-slot":"dialog-trigger",...e})}function $pe({...e}){return y.jsx(_L,{"data-slot":"dialog-portal",...e})}function Bpe({...e}){return y.jsx(EL,{"data-slot":"dialog-close",...e})}function zpe({className:e,...t}){return y.jsx(xL,{"data-slot":"dialog-overlay",className:Dt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Yw({className:e,children:t,...n}){return y.jsxs($pe,{"data-slot":"dialog-portal",children:[y.jsx(zpe,{}),y.jsxs(SL,{"data-slot":"dialog-content",className:Dt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,y.jsxs(EL,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[y.jsx(zs,{}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Xw({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-header",className:Dt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Jw({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-footer",className:Dt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Qw({className:e,...t}){return y.jsx(Ppe,{"data-slot":"dialog-title",className:Dt("text-lg leading-none font-semibold",e),...t})}function e1({className:e,...t}){return y.jsx(Fpe,{"data-slot":"dialog-description",className:Dt("text-muted-foreground text-sm",e),...t})}function t1(e){const t=e+"CollectionProvider",[n,r]=di(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:_,children:x}=v,S=vt.useRef(null),E=vt.useRef(new Map).current;return y.jsx(a,{scope:_,itemMap:E,collectionRef:S,children:x})};o.displayName=t;const s=e+"CollectionSlot",u=qu(s),c=vt.forwardRef((v,_)=>{const{scope:x,children:S}=v,E=i(s,x),C=_n(_,E.collectionRef);return y.jsx(u,{ref:C,children:S})});c.displayName=s;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=qu(f),g=vt.forwardRef((v,_)=>{const{scope:x,children:S,...E}=v,C=vt.useRef(null),A=_n(_,C),O=i(f,x);return vt.useEffect(()=>(O.itemMap.set(C,{ref:C,...E}),()=>void O.itemMap.delete(C))),y.jsx(m,{[h]:"",ref:A,children:S})});g.displayName=f;function w(v){const _=i(e+"CollectionConsumer",v);return vt.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((O,I)=>E.indexOf(O.ref.current)-E.indexOf(I.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},w,r]}var b2="rovingFocusGroup.onEntryFocus",Upe={bubbles:!1,cancelable:!0},cg="RovingFocusGroup",[OE,CL,qpe]=t1(cg),[Hpe,n1]=di(cg,[qpe]),[Vpe,Gpe]=Hpe(cg),kL=R.forwardRef((e,t)=>y.jsx(OE.Provider,{scope:e.__scopeRovingFocusGroup,children:y.jsx(OE.Slot,{scope:e.__scopeRovingFocusGroup,children:y.jsx(Wpe,{...e,ref:t})})}));kL.displayName=cg;var Wpe=R.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=e,m=R.useRef(null),g=_n(t,m),w=Bh(i),[v,_]=Wo({prop:o,defaultProp:s??null,onChange:u,caller:cg}),[x,S]=R.useState(!1),E=ka(c),C=CL(n),A=R.useRef(!1),[O,I]=R.useState(0);return R.useEffect(()=>{const D=m.current;if(D)return D.addEventListener(b2,E),()=>D.removeEventListener(b2,E)},[E]),y.jsx(Vpe,{scope:n,orientation:r,dir:w,loop:a,currentTabStopId:v,onItemFocus:R.useCallback(D=>_(D),[_]),onItemShiftTab:R.useCallback(()=>S(!0),[]),onFocusableItemAdd:R.useCallback(()=>I(D=>D+1),[]),onFocusableItemRemove:R.useCallback(()=>I(D=>D-1),[]),children:y.jsx(Jt.div,{tabIndex:x||O===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:Ft(e.onMouseDown,()=>{A.current=!0}),onFocus:Ft(e.onFocus,D=>{const B=!A.current;if(D.target===D.currentTarget&&B&&!x){const K=new CustomEvent(b2,Upe);if(D.currentTarget.dispatchEvent(K),!K.defaultPrevented){const Q=C().filter(ae=>ae.focusable),F=Q.find(ae=>ae.active),W=Q.find(ae=>ae.id===v),he=[F,W,...Q].filter(Boolean).map(ae=>ae.ref.current);RL(he,f)}}A.current=!1}),onBlur:Ft(e.onBlur,()=>S(!1))})})}),AL="RovingFocusGroupItem",TL=R.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,u=Ta(),c=i||u,f=Gpe(AL,n),h=f.currentTabStopId===c,m=CL(n),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:v}=f;return R.useEffect(()=>{if(r)return g(),()=>w()},[r,g,w]),y.jsx(OE.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:y.jsx(Jt.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...s,ref:t,onMouseDown:Ft(e.onMouseDown,_=>{r?f.onItemFocus(c):_.preventDefault()}),onFocus:Ft(e.onFocus,()=>f.onItemFocus(c)),onKeyDown:Ft(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=Ype(_,f.orientation,f.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let E=m().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const C=E.indexOf(_.currentTarget);E=f.loop?Xpe(E,C+1):E.slice(C+1)}setTimeout(()=>RL(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o})})});TL.displayName=AL;var Kpe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Zpe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ype(e,t,n){const r=Zpe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Kpe[r]}function RL(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Xpe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var NL=kL,IL=TL,r1="Tabs",[Jpe,X1e]=di(r1,[n1]),OL=n1(),[Qpe,iA]=Jpe(r1),DL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:u="automatic",...c}=e,f=Bh(s),[h,m]=Wo({prop:r,onChange:a,defaultProp:i??"",caller:r1});return y.jsx(Qpe,{scope:n,baseId:Ta(),value:h,onValueChange:m,orientation:o,dir:f,activationMode:u,children:y.jsx(Jt.div,{dir:f,"data-orientation":o,...c,ref:t})})});DL.displayName=r1;var jL="TabsList",ML=R.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=iA(jL,n),o=OL(n);return y.jsx(NL,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(Jt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});ML.displayName=jL;var PL="TabsTrigger",FL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=iA(PL,n),s=OL(n),u=BL(o.baseId,r),c=zL(o.baseId,r),f=r===o.value;return y.jsx(IL,{asChild:!0,...s,focusable:!a,active:f,children:y.jsx(Jt.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:Ft(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Ft(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Ft(e.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!a&&h&&o.onValueChange(r)})})})});FL.displayName=PL;var LL="TabsContent",$L=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=iA(LL,n),u=BL(s.baseId,r),c=zL(s.baseId,r),f=r===s.value,h=R.useRef(f);return R.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),y.jsx(Ia,{present:a||f,children:({present:m})=>y.jsx(Jt.div,{"data-state":f?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!m,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});$L.displayName=LL;function BL(e,t){return`${e}-trigger-${t}`}function zL(e,t){return`${e}-content-${t}`}var eme=DL,tme=ML,nme=FL,rme=$L;function DE({className:e,...t}){return y.jsx(eme,{"data-slot":"tabs",className:Dt("flex flex-col gap-2",e),...t})}function jE({className:e,...t}){return y.jsx(tme,{"data-slot":"tabs-list",className:Dt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function uo({className:e,...t}){return y.jsx(nme,{"data-slot":"tabs-trigger",className:Dt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function co({className:e,...t}){return y.jsx(rme,{"data-slot":"tabs-content",className:Dt("flex-1 outline-none",e),...t})}var ame="Label",UL=R.forwardRef((e,t)=>y.jsx(Jt.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));UL.displayName=ame;var ime=UL;function Ln({className:e,...t}){return y.jsx(ime,{"data-slot":"label",className:Dt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function a1(e){const t=R.useRef({value:e,previous:e});return R.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var i1="Switch",[ome,J1e]=di(i1),[sme,lme]=ome(i1),qL=R.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[m,g]=R.useState(null),w=_n(t,E=>g(E)),v=R.useRef(!1),_=m?f||!!m.closest("form"):!0,[x,S]=Wo({prop:a,defaultProp:i??!1,onChange:c,caller:i1});return y.jsxs(sme,{scope:n,checked:x,disabled:s,children:[y.jsx(Jt.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":WL(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:w,onClick:Ft(e.onClick,E=>{S(C=>!C),_&&(v.current=E.isPropagationStopped(),v.current||E.stopPropagation())})}),_&&y.jsx(GL,{control:m,bubbles:!v.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"}})]})});qL.displayName=i1;var HL="SwitchThumb",VL=R.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=lme(HL,n);return y.jsx(Jt.span,{"data-state":WL(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});VL.displayName=HL;var ume="SwitchBubbleInput",GL=R.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=R.useRef(null),s=_n(o,i),u=a1(n),c=tw(t);return R.useEffect(()=>{const f=o.current;if(!f)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&g){const w=new Event("click",{bubbles:r});g.call(f,n),f.dispatchEvent(w)}},[u,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});GL.displayName=ume;function WL(e){return e?"checked":"unchecked"}var cme=qL,dme=VL;function Bl({className:e,...t}){return y.jsx(cme,{"data-slot":"switch",className:Dt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(dme,{"data-slot":"switch-thumb",className:Dt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var fme=[" ","Enter","ArrowUp","ArrowDown"],hme=[" ","Enter"],md="Select",[o1,s1,pme]=t1(md),[zh,Q1e]=di(md,[pme,dc]),l1=dc(),[mme,_c]=zh(md),[gme,yme]=zh(md),KL=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:u,dir:c,name:f,autoComplete:h,disabled:m,required:g,form:w}=e,v=l1(t),[_,x]=R.useState(null),[S,E]=R.useState(null),[C,A]=R.useState(!1),O=Bh(c),[I,D]=Wo({prop:r,defaultProp:a??!1,onChange:i,caller:md}),[B,K]=Wo({prop:o,defaultProp:s,onChange:u,caller:md}),Q=R.useRef(null),F=_?w||!!_.closest("form"):!0,[W,U]=R.useState(new Set),he=Array.from(W).map(ae=>ae.props.value).join(";");return y.jsx(nw,{...v,children:y.jsxs(mme,{required:g,scope:t,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:A,contentId:Ta(),value:B,onValueChange:K,open:I,onOpenChange:D,dir:O,triggerPointerDownPosRef:Q,disabled:m,children:[y.jsx(o1.Provider,{scope:t,children:y.jsx(gme,{scope:e.__scopeSelect,onNativeOptionAdd:R.useCallback(ae=>{U(re=>new Set(re).add(ae))},[]),onNativeOptionRemove:R.useCallback(ae=>{U(re=>{const ee=new Set(re);return ee.delete(ae),ee})},[]),children:n})}),F?y.jsxs(g9,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:B,onChange:ae=>K(ae.target.value),disabled:m,form:w,children:[B===void 0?y.jsx("option",{value:""}):null,Array.from(W)]},he):null]})})};KL.displayName=md;var ZL="SelectTrigger",YL=R.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=l1(n),o=_c(ZL,n),s=o.disabled||r,u=_n(t,o.onTriggerChange),c=s1(n),f=R.useRef("touch"),[h,m,g]=b9(v=>{const _=c().filter(E=>!E.disabled),x=_.find(E=>E.value===o.value),S=v9(_,v,x);S!==void 0&&o.onValueChange(S.value)}),w=v=>{s||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return y.jsx(_0,{asChild:!0,...i,children:y.jsx(Jt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":y9(o.value)?"":void 0,...a,ref:u,onClick:Ft(a.onClick,v=>{v.currentTarget.focus(),f.current!=="mouse"&&w(v)}),onPointerDown:Ft(a.onPointerDown,v=>{f.current=v.pointerType;const _=v.target;_.hasPointerCapture(v.pointerId)&&_.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:Ft(a.onKeyDown,v=>{const _=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(_&&v.key===" ")&&fme.includes(v.key)&&(w(),v.preventDefault())})})})});YL.displayName=ZL;var XL="SelectValue",JL=R.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,u=_c(XL,n),{onValueNodeHasChildrenChange:c}=u,f=i!==void 0,h=_n(t,u.onValueNodeChange);return $a(()=>{c(f)},[c,f]),y.jsx(Jt.span,{...s,ref:h,style:{pointerEvents:"none"},children:y9(u.value)?y.jsx(y.Fragment,{children:o}):i})});JL.displayName=XL;var bme="SelectIcon",QL=R.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return y.jsx(Jt.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});QL.displayName=bme;var vme="SelectPortal",e9=e=>y.jsx(Eh,{asChild:!0,...e});e9.displayName=vme;var gd="SelectContent",t9=R.forwardRef((e,t)=>{const n=_c(gd,e.__scopeSelect),[r,a]=R.useState();if($a(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Ns.createPortal(y.jsx(n9,{scope:e.__scopeSelect,children:y.jsx(o1.Slot,{scope:e.__scopeSelect,children:y.jsx("div",{children:e.children})})}),i):null}return y.jsx(r9,{...e,ref:t})});t9.displayName=gd;var jo=10,[n9,xc]=zh(gd),wme="SelectContentImpl",_me=qu("SelectContent.RemoveScroll"),r9=R.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_,...x}=e,S=_c(gd,n),[E,C]=R.useState(null),[A,O]=R.useState(null),I=_n(t,Pe=>C(Pe)),[D,B]=R.useState(null),[K,Q]=R.useState(null),F=s1(n),[W,U]=R.useState(!1),he=R.useRef(!1);R.useEffect(()=>{if(E)return Ww(E)},[E]),Vw();const ae=R.useCallback(Pe=>{const[Re,...Te]=F().map(Ie=>Ie.ref.current),[He]=Te.slice(-1),it=document.activeElement;for(const Ie of Pe)if(Ie===it||(Ie==null||Ie.scrollIntoView({block:"nearest"}),Ie===Re&&A&&(A.scrollTop=0),Ie===He&&A&&(A.scrollTop=A.scrollHeight),Ie==null||Ie.focus(),document.activeElement!==it))return},[F,A]),re=R.useCallback(()=>ae([D,E]),[ae,D,E]);R.useEffect(()=>{W&&re()},[W,re]);const{onOpenChange:ee,triggerPointerDownPosRef:se}=S;R.useEffect(()=>{if(E){let Pe={x:0,y:0};const Re=He=>{var it,Ie;Pe={x:Math.abs(Math.round(He.pageX)-(((it=se.current)==null?void 0:it.x)??0)),y:Math.abs(Math.round(He.pageY)-(((Ie=se.current)==null?void 0:Ie.y)??0))}},Te=He=>{Pe.x<=10&&Pe.y<=10?He.preventDefault():E.contains(He.target)||ee(!1),document.removeEventListener("pointermove",Re),se.current=null};return se.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",Te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",Te,{capture:!0})}}},[E,ee,se]),R.useEffect(()=>{const Pe=()=>ee(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[ee]);const[V,X]=b9(Pe=>{const Re=F().filter(it=>!it.disabled),Te=Re.find(it=>it.ref.current===document.activeElement),He=v9(Re,Pe,Te);He&&setTimeout(()=>He.ref.current.focus())}),Y=R.useCallback((Pe,Re,Te)=>{const He=!he.current&&!Te;(S.value!==void 0&&S.value===Re||He)&&(B(Pe),He&&(he.current=!0))},[S.value]),ne=R.useCallback(()=>E==null?void 0:E.focus(),[E]),be=R.useCallback((Pe,Re,Te)=>{const He=!he.current&&!Te;(S.value!==void 0&&S.value===Re||He)&&Q(Pe)},[S.value]),Ee=r==="popper"?ME:a9,De=Ee===ME?{side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_}:{};return y.jsx(n9,{scope:n,content:E,viewport:A,onViewportChange:O,itemRefCallback:Y,selectedItem:D,onItemLeave:ne,itemTextRefCallback:be,focusSelectedItem:re,selectedItemText:K,position:r,isPositioned:W,searchRef:V,children:y.jsx(ug,{as:_me,allowPinchZoom:!0,children:y.jsx(lg,{asChild:!0,trapped:S.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:Ft(a,Pe=>{var Re;(Re=S.trigger)==null||Re.focus({preventScroll:!0}),Pe.preventDefault()}),children:y.jsx(_h,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(Ee,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Pe=>Pe.preventDefault(),...x,...De,onPlaced:()=>U(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Ft(x.onKeyDown,Pe=>{const Re=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Re&&Pe.key.length===1&&X(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let He=F().filter(it=>!it.disabled).map(it=>it.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&(He=He.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const it=Pe.target,Ie=He.indexOf(it);He=He.slice(Ie+1)}setTimeout(()=>ae(He)),Pe.preventDefault()}})})})})})})});r9.displayName=wme;var xme="SelectItemAlignedPosition",a9=R.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=_c(gd,n),o=xc(gd,n),[s,u]=R.useState(null),[c,f]=R.useState(null),h=_n(t,I=>f(I)),m=s1(n),g=R.useRef(!1),w=R.useRef(!0),{viewport:v,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,E=R.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&v&&_&&x){const I=i.trigger.getBoundingClientRect(),D=c.getBoundingClientRect(),B=i.valueNode.getBoundingClientRect(),K=x.getBoundingClientRect();if(i.dir!=="rtl"){const it=K.left-D.left,Ie=B.left-it,Ae=I.left-Ie,z=I.width+Ae,ke=Math.max(z,D.width),Ne=window.innerWidth-jo,ce=h0(Ie,[jo,Math.max(jo,Ne-ke)]);s.style.minWidth=z+"px",s.style.left=ce+"px"}else{const it=D.right-K.right,Ie=window.innerWidth-B.right-it,Ae=window.innerWidth-I.right-Ie,z=I.width+Ae,ke=Math.max(z,D.width),Ne=window.innerWidth-jo,ce=h0(Ie,[jo,Math.max(jo,Ne-ke)]);s.style.minWidth=z+"px",s.style.right=ce+"px"}const Q=m(),F=window.innerHeight-jo*2,W=v.scrollHeight,U=window.getComputedStyle(c),he=parseInt(U.borderTopWidth,10),ae=parseInt(U.paddingTop,10),re=parseInt(U.borderBottomWidth,10),ee=parseInt(U.paddingBottom,10),se=he+ae+W+ee+re,V=Math.min(_.offsetHeight*5,se),X=window.getComputedStyle(v),Y=parseInt(X.paddingTop,10),ne=parseInt(X.paddingBottom,10),be=I.top+I.height/2-jo,Ee=F-be,De=_.offsetHeight/2,Pe=_.offsetTop+De,Re=he+ae+Pe,Te=se-Re;if(Re<=be){const it=Q.length>0&&_===Q[Q.length-1].ref.current;s.style.bottom="0px";const Ie=c.clientHeight-v.offsetTop-v.offsetHeight,Ae=Math.max(Ee,De+(it?ne:0)+Ie+re),z=Re+Ae;s.style.height=z+"px"}else{const it=Q.length>0&&_===Q[0].ref.current;s.style.top="0px";const Ae=Math.max(be,he+v.offsetTop+(it?Y:0)+De)+Te;s.style.height=Ae+"px",v.scrollTop=Re-be+v.offsetTop}s.style.margin=`${jo}px 0`,s.style.minHeight=V+"px",s.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,s,c,v,_,x,i.dir,r]);$a(()=>E(),[E]);const[C,A]=R.useState();$a(()=>{c&&A(window.getComputedStyle(c).zIndex)},[c]);const O=R.useCallback(I=>{I&&w.current===!0&&(E(),S==null||S(),w.current=!1)},[E,S]);return y.jsx(Eme,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:O,children:y.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:y.jsx(Jt.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});a9.displayName=xme;var Sme="SelectPopperPosition",ME=R.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=jo,...i}=e,o=l1(n);return y.jsx(rw,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ME.displayName=Sme;var[Eme,oA]=zh(gd,{}),PE="SelectViewport",i9=R.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=xc(PE,n),o=oA(PE,n),s=_n(t,i.onViewportChange),u=R.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(o1.Slot,{scope:n,children:y.jsx(Jt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ft(a.onScroll,c=>{const f=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(u.current-f.scrollTop);if(g>0){const w=window.innerHeight-jo*2,v=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),x=Math.max(v,_);if(x<w){const S=x+g,E=Math.min(w,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});i9.displayName=PE;var o9="SelectGroup",[Cme,kme]=zh(o9),Ame=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ta();return y.jsx(Cme,{scope:n,id:a,children:y.jsx(Jt.div,{role:"group","aria-labelledby":a,...r,ref:t})})});Ame.displayName=o9;var s9="SelectLabel",Tme=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=kme(s9,n);return y.jsx(Jt.div,{id:a.id,...r,ref:t})});Tme.displayName=s9;var Dv="SelectItem",[Rme,l9]=zh(Dv),u9=R.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=_c(Dv,n),u=xc(Dv,n),c=s.value===r,[f,h]=R.useState(i??""),[m,g]=R.useState(!1),w=_n(t,S=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,S,r,a)}),v=Ta(),_=R.useRef("touch"),x=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(Rme,{scope:n,value:r,disabled:a,textId:v,isSelected:c,onItemTextChange:R.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(o1.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:y.jsx(Jt.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:w,onFocus:Ft(o.onFocus,()=>g(!0)),onBlur:Ft(o.onBlur,()=>g(!1)),onClick:Ft(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:Ft(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:Ft(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:Ft(o.onPointerMove,S=>{var E;_.current=S.pointerType,a?(E=u.onItemLeave)==null||E.call(u):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ft(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:Ft(o.onKeyDown,S=>{var C;((C=u.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(hme.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});u9.displayName=Dv;var hm="SelectItemText",c9=R.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=_c(hm,n),s=xc(hm,n),u=l9(hm,n),c=yme(hm,n),[f,h]=R.useState(null),m=_n(t,x=>h(x),u.onItemTextChange,x=>{var S;return(S=s.itemTextRefCallback)==null?void 0:S.call(s,x,u.value,u.disabled)}),g=f==null?void 0:f.textContent,w=R.useMemo(()=>y.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:_}=c;return $a(()=>(v(w),()=>_(w)),[v,_,w]),y.jsxs(y.Fragment,{children:[y.jsx(Jt.span,{id:u.textId,...i,ref:m}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ns.createPortal(i.children,o.valueNode):null]})});c9.displayName=hm;var d9="SelectItemIndicator",f9=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return l9(d9,n).isSelected?y.jsx(Jt.span,{"aria-hidden":!0,...r,ref:t}):null});f9.displayName=d9;var FE="SelectScrollUpButton",h9=R.forwardRef((e,t)=>{const n=xc(FE,e.__scopeSelect),r=oA(FE,e.__scopeSelect),[a,i]=R.useState(!1),o=_n(t,r.onScrollButtonChange);return $a(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollTop>0;i(c)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(m9,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});h9.displayName=FE;var LE="SelectScrollDownButton",p9=R.forwardRef((e,t)=>{const n=xc(LE,e.__scopeSelect),r=oA(LE,e.__scopeSelect),[a,i]=R.useState(!1),o=_n(t,r.onScrollButtonChange);return $a(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<c;i(f)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(m9,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});p9.displayName=LE;var m9=R.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=xc("SelectScrollButton",n),o=R.useRef(null),s=s1(n),u=R.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return R.useEffect(()=>()=>u(),[u]),$a(()=>{var f;const c=s().find(h=>h.ref.current===document.activeElement);(f=c==null?void 0:c.ref.current)==null||f.scrollIntoView({block:"nearest"})},[s]),y.jsx(Jt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ft(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ft(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ft(a.onPointerLeave,()=>{u()})})}),Nme="SelectSeparator",Ime=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return y.jsx(Jt.div,{"aria-hidden":!0,...r,ref:t})});Ime.displayName=Nme;var $E="SelectArrow",Ome=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=l1(n),i=_c($E,n),o=xc($E,n);return i.open&&o.position==="popper"?y.jsx(aw,{...a,...r,ref:t}):null});Ome.displayName=$E;var Dme="SelectBubbleInput",g9=R.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=R.useRef(null),i=_n(r,a),o=a1(t);return R.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("change",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(Jt.select,{...n,style:{...hD,...n.style},ref:i,defaultValue:t})});g9.displayName=Dme;function y9(e){return e===""||e===void 0}function b9(e){const t=ka(e),n=R.useRef(""),r=R.useRef(0),a=R.useCallback(o=>{const s=n.current+o;t(s),function u(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(s)},[t]),i=R.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function v9(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=jme(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function jme(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Mme=KL,Pme=YL,Fme=JL,Lme=QL,$me=e9,Bme=t9,zme=i9,Ume=u9,qme=c9,Hme=f9,Vme=h9,Gme=p9;function dg({...e}){return y.jsx(Mme,{"data-slot":"select",...e})}function fg({...e}){return y.jsx(Fme,{"data-slot":"select-value",...e})}function hg({className:e,size:t="default",children:n,...r}){return y.jsxs(Pme,{"data-slot":"select-trigger","data-size":t,className:Dt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,y.jsx(Lme,{asChild:!0,children:y.jsx(nC,{className:"size-4 opacity-50"})})]})}function pg({className:e,children:t,position:n="popper",...r}){return y.jsx($me,{children:y.jsxs(Bme,{"data-slot":"select-content",className:Dt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[y.jsx(Wme,{}),y.jsx(zme,{className:Dt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),y.jsx(Kme,{})]})})}function $o({className:e,children:t,...n}){return y.jsxs(Ume,{"data-slot":"select-item",className:Dt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[y.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:y.jsx(Hme,{children:y.jsx(vo,{className:"size-4"})})}),y.jsx(qme,{children:t})]})}function Wme({className:e,...t}){return y.jsx(Vme,{"data-slot":"select-scroll-up-button",className:Dt("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(IU,{className:"size-4"})})}function Kme({className:e,...t}){return y.jsx(Gme,{"data-slot":"select-scroll-down-button",className:Dt("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(nC,{className:"size-4"})})}var w9=["PageUp","PageDown"],_9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],x9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Uh="Slider",[BE,Zme,Yme]=t1(Uh),[S9,e_e]=di(Uh,[Yme]),[Xme,u1]=S9(Uh),E9=R.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:s=!1,minStepsBetweenThumbs:u=0,defaultValue:c=[r],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:w,...v}=e,_=R.useRef(new Set),x=R.useRef(0),E=o==="horizontal"?Jme:Qme,[C=[],A]=Wo({prop:f,defaultProp:c,onChange:Q=>{var W;(W=[..._.current][x.current])==null||W.focus(),h(Q)}}),O=R.useRef(C);function I(Q){const F=a0e(C,Q);K(Q,F)}function D(Q){K(Q,x.current)}function B(){const Q=O.current[x.current];C[x.current]!==Q&&m(C)}function K(Q,F,{commit:W}={commit:!1}){const U=l0e(i),he=u0e(Math.round((Q-r)/i)*i+r,U),ae=h0(he,[r,a]);A((re=[])=>{const ee=n0e(re,ae,F);if(s0e(ee,u*i)){x.current=ee.indexOf(ae);const se=String(ee)!==String(re);return se&&W&&m(ee),se?ee:re}else return re})}return y.jsx(Xme,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:a,valueIndexToChangeRef:x,thumbs:_.current,values:C,orientation:o,form:w,children:y.jsx(BE.Provider,{scope:e.__scopeSlider,children:y.jsx(BE.Slot,{scope:e.__scopeSlider,children:y.jsx(E,{"aria-disabled":s,"data-disabled":s?"":void 0,...v,ref:t,onPointerDown:Ft(v.onPointerDown,()=>{s||(O.current=C)}),min:r,max:a,inverted:g,onSlideStart:s?void 0:I,onSlideMove:s?void 0:D,onSlideEnd:s?void 0:B,onHomeKeyDown:()=>!s&&K(r,0,{commit:!0}),onEndKeyDown:()=>!s&&K(a,C.length-1,{commit:!0}),onStepKeyDown:({event:Q,direction:F})=>{if(!s){const he=w9.includes(Q.key)||Q.shiftKey&&_9.includes(Q.key)?10:1,ae=x.current,re=C[ae],ee=i*he*F;K(re+ee,ae,{commit:!0})}}})})})})});E9.displayName=Uh;var[C9,k9]=S9(Uh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Jme=R.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:u,onStepKeyDown:c,...f}=e,[h,m]=R.useState(null),g=_n(t,E=>m(E)),w=R.useRef(void 0),v=Bh(a),_=v==="ltr",x=_&&!i||!_&&i;function S(E){const C=w.current||h.getBoundingClientRect(),A=[0,C.width],I=sA(A,x?[n,r]:[r,n]);return w.current=C,I(E-C.left)}return y.jsx(C9,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(A9,{dir:v,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=S(E.clientX);s==null||s(C)},onSlideEnd:()=>{w.current=void 0,u==null||u()},onStepKeyDown:E=>{const A=x9[x?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:A?-1:1})}})})}),Qme=R.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onStepKeyDown:u,...c}=e,f=R.useRef(null),h=_n(t,f),m=R.useRef(void 0),g=!a;function w(v){const _=m.current||f.current.getBoundingClientRect(),x=[0,_.height],E=sA(x,g?[r,n]:[n,r]);return m.current=_,E(v-_.top)}return y.jsx(C9,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(A9,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const _=w(v.clientY);i==null||i(_)},onSlideMove:v=>{const _=w(v.clientY);o==null||o(_)},onSlideEnd:()=>{m.current=void 0,s==null||s()},onStepKeyDown:v=>{const x=x9[g?"from-bottom":"from-top"].includes(v.key);u==null||u({event:v,direction:x?-1:1})}})})}),A9=R.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:s,onStepKeyDown:u,...c}=e,f=u1(Uh,n);return y.jsx(Jt.span,{...c,ref:t,onKeyDown:Ft(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(s(h),h.preventDefault()):w9.concat(_9).includes(h.key)&&(u(h),h.preventDefault())}),onPointerDown:Ft(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():r(h)}),onPointerMove:Ft(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Ft(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),T9="SliderTrack",R9=R.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=u1(T9,n);return y.jsx(Jt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});R9.displayName=T9;var zE="SliderRange",N9=R.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=u1(zE,n),i=k9(zE,n),o=R.useRef(null),s=_n(t,o),u=a.values.length,c=a.values.map(m=>D9(m,a.min,a.max)),f=u>1?Math.min(...c):0,h=100-Math.max(...c);return y.jsx(Jt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:h+"%"}})});N9.displayName=zE;var UE="SliderThumb",I9=R.forwardRef((e,t)=>{const n=Zme(e.__scopeSlider),[r,a]=R.useState(null),i=_n(t,s=>a(s)),o=R.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return y.jsx(e0e,{...e,ref:i,index:o})}),e0e=R.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=u1(UE,n),s=k9(UE,n),[u,c]=R.useState(null),f=_n(t,S=>c(S)),h=u?o.form||!!u.closest("form"):!0,m=tw(u),g=o.values[r],w=g===void 0?0:D9(g,o.min,o.max),v=r0e(r,o.values.length),_=m==null?void 0:m[s.size],x=_?i0e(_,w,s.direction):0;return R.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${w}% + ${x}px)`},children:[y.jsx(BE.ItemSlot,{scope:e.__scopeSlider,children:y.jsx(Jt.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:Ft(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&y.jsx(O9,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});I9.displayName=UE;var t0e="RadioBubbleInput",O9=R.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=R.useRef(null),i=_n(a,r),o=a1(t);return R.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("input",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(Jt.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});O9.displayName=t0e;function n0e(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function D9(e,t,n){const i=100/(n-t)*(e-t);return h0(i,[0,100])}function r0e(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function a0e(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function i0e(e,t,n){const r=e/2,i=sA([0,50],[0,r]);return(r-i(t)*n)*n}function o0e(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function s0e(e,t){if(t>0){const n=o0e(e);return Math.min(...n)>=t}return!0}function sA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function l0e(e){return(String(e).split(".")[1]||"").length}function u0e(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var c0e=E9,d0e=R9,f0e=N9,h0e=I9;function Bf({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const o=R.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return y.jsxs(c0e,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:Dt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[y.jsx(d0e,{"data-slot":"slider-track",className:Dt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:y.jsx(f0e,{"data-slot":"slider-range",className:Dt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(s,u)=>y.jsx(h0e,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}var p0e="Separator",q6="horizontal",m0e=["horizontal","vertical"],j9=R.forwardRef((e,t)=>{const{decorative:n,orientation:r=q6,...a}=e,i=g0e(r)?r:q6,s=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return y.jsx(Jt.div,{"data-orientation":i,...s,...a,ref:t})});j9.displayName=p0e;function g0e(e){return m0e.includes(e)}var y0e=j9;function jv({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return y.jsx(y0e,{"data-slot":"separator-root",decorative:n,orientation:t,className:Dt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const b0e=()=>{const{theme:e,setTheme:t,enableAdvancedSettings:n,setEnableAdvancedSettings:r,enableStreamingMarkdown:a,setEnableStreamingMarkdown:i,streamingRenderFPS:o,setStreamingRenderFPS:s,streamingCodeRenderFPS:u,setStreamingCodeRenderFPS:c,resetGeneralSettings:f}=ga(Hn(O=>({theme:O.theme,setTheme:O.setTheme,enableAdvancedSettings:O.enableAdvancedSettings,setEnableAdvancedSettings:O.setEnableAdvancedSettings,enableStreamingMarkdown:O.enableStreamingMarkdown,setEnableStreamingMarkdown:O.setEnableStreamingMarkdown,streamingRenderFPS:O.streamingRenderFPS,setStreamingRenderFPS:O.setStreamingRenderFPS,streamingCodeRenderFPS:O.streamingCodeRenderFPS,setStreamingCodeRenderFPS:O.setStreamingCodeRenderFPS,resetGeneralSettings:O.resetGeneralSettings}))),[h,m]=R.useState(o),[g,w]=R.useState(u),v=R.useCallback(O=>{m(O[0])},[]),_=R.useCallback(O=>{s(O[0])},[s]),x=R.useCallback(O=>{const I=O.target.value,D=I===""?30:parseInt(I.replace(/[^0-9]/g,""),10);if(!isNaN(D)){const B=Math.max(1,Math.min(60,D));s(B),m(B)}},[s]),S=R.useCallback(O=>{w(O[0])},[]),E=R.useCallback(O=>{c(O[0])},[c]),C=R.useCallback(O=>{const I=O.target.value,D=I===""?10:parseInt(I.replace(/[^0-9]/g,""),10);if(!isNaN(D)){const B=Math.max(1,Math.min(60,D));c(B),w(B)}},[c]);R.useEffect(()=>{m(o)},[o]),R.useEffect(()=>{w(u)},[u]);const A=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&f()};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsx(Ln,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),y.jsxs(dg,{value:e??"system",onValueChange:O=>t(O),children:[y.jsx(hg,{id:"theme-select",className:"w-[180px]",children:y.jsx(fg,{placeholder:"Select theme"})}),y.jsxs(pg,{children:[y.jsx($o,{value:"light",children:"Light"}),y.jsx($o,{value:"dark",children:"Dark"}),y.jsx($o,{value:"system",children:"System"})]})]})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(Ln,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),y.jsx(Bl,{id:"streaming-markdown-switch",checked:a??!0,onCheckedChange:i})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(Ln,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["General Streaming Update Rate (",h," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how smoothly streaming text appears. (Default: 30)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Bf,{id:"streaming-fps-slider",min:1,max:60,step:1,value:[h],onValueChange:v,onValueCommit:_,className:"flex-grow"}),y.jsx(kr,{type:"number",min:1,max:60,step:1,value:h,onChange:x,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(Ln,{htmlFor:"streaming-code-fps-slider",className:"font-medium",children:["Code Block Streaming Update Rate (",g," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Specific update rate when code blocks are streaming (lower values reduce lag). (Default: 10)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Bf,{id:"streaming-code-fps-slider",min:1,max:60,step:1,value:[g],onValueChange:S,onValueCommit:E,className:"flex-grow"}),y.jsx(kr,{type:"number",min:1,max:60,step:1,value:g,onChange:C,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),y.jsx(jv,{}),y.jsxs("div",{className:"space-y-2 hidden",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Advanced Settings"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(Ln,{htmlFor:"advanced-settings-switch",className:"font-medium",children:"Enable Advanced Controls"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Show controls for AI parameters (temperature, etc.) and Assistant settings tab."})]}),y.jsx(Bl,{id:"advanced-settings-switch",checked:n??!1,onCheckedChange:r})]})]}),y.jsx(jv,{}),y.jsx("div",{className:"flex justify-end pt-4",children:y.jsxs(Ut,{variant:"outline",size:"sm",onClick:A,children:[y.jsx(Bq,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},v0e=vt.memo(b0e),w0e=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t}=ga(Hn(n=>({globalSystemPrompt:n.globalSystemPrompt,setGlobalSystemPrompt:n.setGlobalSystemPrompt})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt configuration"}),y.jsx(Ln,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-3 block",children:"System prompt"}),y.jsx(Jk,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:n=>t(n.target.value),rows:4})]})})},_0e=vt.memo(w0e);function c1({className:e,...t}){return y.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:y.jsx("table",{"data-slot":"table",className:Dt("w-full caption-bottom text-sm",e),...t})})}function d1({className:e,...t}){return y.jsx("thead",{"data-slot":"table-header",className:Dt("[&_tr]:border-b",e),...t})}function f1({className:e,...t}){return y.jsx("tbody",{"data-slot":"table-body",className:Dt("[&_tr:last-child]:border-0",e),...t})}function Vi({className:e,...t}){return y.jsx("tr",{"data-slot":"table-row",className:Dt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function ia({className:e,...t}){return y.jsx("th",{"data-slot":"table-head",className:Dt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function br({className:e,...t}){return y.jsx("td",{"data-slot":"table-cell",className:Dt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const x0e=()=>{const{addApiKey:e,deleteApiKey:t,enableApiKeyManagement:n,dbApiKeys:r,dbProviderConfigs:a,isLoading:i}=Ai(Hn(I=>({addApiKey:I.addApiKey,deleteApiKey:I.deleteApiKey,enableApiKeyManagement:I.enableApiKeyManagement,dbApiKeys:I.dbApiKeys,dbProviderConfigs:I.dbProviderConfigs,isLoading:I.isLoading}))),[o,s]=R.useState(""),[u,c]=R.useState(""),[f,h]=R.useState(""),[m,g]=R.useState(!1),[w,v]=R.useState({}),[_,x]=R.useState({}),S=R.useCallback(async I=>{if(I.preventDefault(),!o.trim()||!u.trim()||!f){dt.error("Please fill in all fields for the API key.");return}g(!0);try{await e(o.trim(),f,u.trim()),s(""),c(""),h("")}catch(D){console.error("Failed to add API key (from component):",D)}finally{g(!1)}},[e,o,u,f]),E=R.useCallback(async(I,D)=>{if(window.confirm(`Are you sure you want to delete the API key "${D}"? This will also unlink it from any providers using it. This action cannot be undone.`)){v(B=>({...B,[I]:!0}));try{await t(I),x(B=>{const K={...B};return delete K[I],K})}catch(B){console.error("Failed to delete API key (from component):",B)}finally{v(B=>({...B,[I]:!1}))}}},[t]),C=R.useMemo(()=>{const I=new Map;return(r||[]).forEach(D=>{const B=(a||[]).filter(K=>K.apiKeyId===D.id);I.set(D.id,B.length===0?"Not linked":B.map(K=>K.name).join(", "))}),I},[r,a]);if(!n)return y.jsxs("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400 flex items-center justify-center gap-2 bg-gray-800/30 rounded-md border border-dashed border-gray-700 min-h-[200px]",children:[y.jsx(BO,{className:"h-5 w-5"}),"API Key Management is disabled in the configuration."]});const A=I=>{x(D=>({...D,[I]:!D[I]}))},O=I=>({openai:"OpenAI",google:"Google",openrouter:"OpenRouter","openai-compatible":"OpenAI-Compatible"})[I]||"Unknown/Custom";return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("form",{onSubmit:S,className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Add New API Key"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(Ln,{htmlFor:"new-key-name",children:"Name"}),y.jsx(kr,{id:"new-key-name",value:o,onChange:I=>s(I.target.value),placeholder:"e.g., My Personal Key",required:!0,className:"mt-1",disabled:m})]}),y.jsxs("div",{children:[y.jsx(Ln,{htmlFor:"new-key-provider-type",children:"Intended Provider Type"}),y.jsxs(dg,{value:f,onValueChange:h,required:!0,disabled:m,children:[y.jsx(hg,{id:"new-key-provider-type",className:"mt-1",children:y.jsx(fg,{placeholder:"Select Type..."})}),y.jsxs(pg,{children:[y.jsx($o,{value:"openai",children:"OpenAI"}),y.jsx($o,{value:"google",children:"Google"}),y.jsx($o,{value:"openrouter",children:"OpenRouter"}),y.jsx($o,{value:"openai-compatible",children:"OpenAI-Compatible"})]})]})]}),y.jsxs("div",{children:[y.jsx(Ln,{htmlFor:"new-key-value",children:"API Key Value"}),y.jsx(kr,{id:"new-key-value",type:"password",value:u,onChange:I=>c(I.target.value),placeholder:"Paste your API key here",required:!0,className:"mt-1",disabled:m})]})]}),y.jsxs(Ut,{type:"submit",disabled:m,children:[m&&y.jsx(Jn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Key"]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Stored API Keys"}),i?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"})]}):(r||[]).length===0?y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No API keys stored yet. Add one above. Link keys to providers in the 'Providers' tab."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(c1,{children:[y.jsx(d1,{children:y.jsxs(Vi,{children:[y.jsx(ia,{children:"Name"}),y.jsx(ia,{children:"Type"}),y.jsx(ia,{children:"Linked To"}),y.jsx(ia,{children:"Key Value"}),y.jsx(ia,{className:"text-right",children:"Actions"})]})}),y.jsx(f1,{children:(r||[]).map(I=>{const D=w[I.id];return y.jsxs(Vi,{children:[y.jsx(br,{className:"font-medium",children:I.name}),y.jsx(br,{children:O(I.providerId)}),y.jsx(br,{className:"text-xs text-muted-foreground",children:C.get(I.id)??"Not linked"}),y.jsx(br,{children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-mono text-xs",children:_[I.id]?I.value:""}),y.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>A(I.id),className:"h-6 w-6","aria-label":_[I.id]?"Hide key":"Show key",disabled:D,children:_[I.id]?y.jsx(BU,{className:"h-4 w-4"}):y.jsx(UU,{className:"h-4 w-4"})})]})}),y.jsx(br,{className:"text-right",children:y.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>E(I.id,I.name),className:"text-red-600 hover:text-red-700 h-8 w-8","aria-label":`Delete key ${I.name}`,disabled:D,children:D?y.jsx(Jn,{className:"h-4 w-4 animate-spin"}):y.jsx(Hu,{className:"h-4 w-4"})})})]},I.id)})})]})})]})]})},S0e=vt.memo(x0e),E0e=()=>{const{importConversation:e,exportAllConversations:t}=Wl(Hn(g=>({importConversation:g.importConversation,exportAllConversations:g.exportAllConversations}))),n=R.useRef(null),[r,a]=R.useState(!1),[i,o]=R.useState(!1),[s,u]=R.useState(!1),c=()=>{var g;(g=n.current)==null||g.click()},f=R.useCallback(async g=>{var v;const w=(v=g.target.files)==null?void 0:v[0];if(w){a(!0);try{await e(w)}catch(_){console.error("Import failed (from component):",_)}finally{n.current&&(n.current.value=""),a(!1)}}},[e]),h=R.useCallback(async()=>{o(!0);try{await t()}catch(g){console.error("Export all failed (from component):",g)}finally{o(!1)}},[t]),m=R.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await Wt.clearAllData(),dt.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(g){const w="Failed to clear all data";console.error(w,g),dt.error(`${w}: ${g instanceof Error?g.message:String(g)}`),u(!1)}}},[]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Import Conversation"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Import a previously exported conversation (.json file). It will be added as a new chat."}),y.jsx("input",{type:"file",ref:n,onChange:f,accept:".json",className:"hidden",id:"import-file-input",disabled:r}),y.jsxs(Ut,{onClick:c,variant:"outline",disabled:r,children:[r?y.jsx(Jn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(rH,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Select Import File..."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Data"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Export all your conversations and messages into a single JSON file."}),y.jsxs(Ut,{onClick:h,variant:"outline",disabled:i,children:[i?y.jsx(Jn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Nb,{className:"mr-2 h-4 w-4"}),i?"Exporting...":"Export All Chats"]})]}),y.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[y.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),y.jsxs(Ut,{onClick:m,variant:"destructive",disabled:s,children:[s?y.jsx(Jn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Hu,{className:"mr-2 h-4 w-4"}),s?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},C0e=vt.memo(E0e),k0e=QE("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function A0e({className:e,variant:t,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:Dt(k0e({variant:t}),e),...n})}function T0e({className:e,...t}){return y.jsx("div",{"data-slot":"alert-title",className:Dt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function R0e({className:e,...t}){return y.jsx("div",{"data-slot":"alert-description",className:Dt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const N0e=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=f0(Hn(O=>({loadedMods:O.loadedMods,addDbMod:O.addDbMod,updateDbMod:O.updateDbMod,deleteDbMod:O.deleteDbMod,dbMods:O.dbMods,isLoading:O.isLoading}))),[o,s]=R.useState(""),[u,c]=R.useState(""),[f,h]=R.useState(""),[m,g]=R.useState(!1),[w,v]=R.useState({}),[_,x]=R.useState({}),S=R.useCallback(async()=>{if(!o.trim()){dt.error("Mod name cannot be empty.");return}if(!u.trim()&&!f.trim()){dt.error("Either Mod URL or Script Content must be provided.");return}if(u.trim()&&f.trim()){dt.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const O={name:o.trim(),sourceUrl:u.trim()||null,scriptContent:f.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(O),s(""),c(""),h(""),dt.info("Mod added. Reload required for changes to take effect.")}catch(O){console.error("Failed to add mod (from component):",O)}finally{g(!1)}},[o,u,f,t,a==null?void 0:a.length]),E=R.useCallback(async O=>{v(I=>({...I,[O.id]:!0}));try{await n(O.id,{enabled:!O.enabled}),dt.info(`Mod "${O.name}" ${O.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(I){console.error("Failed to update mod (from component):",I)}finally{v(I=>({...I,[O.id]:!1}))}},[n]),C=R.useCallback(async O=>{if(window.confirm(`Are you sure you want to delete the mod "${O.name}"? This cannot be undone.`)){x(I=>({...I,[O.id]:!0}));try{await r(O.id),dt.info("Mod deleted. Reload required for changes to take effect.")}catch(I){console.error("Failed to delete mod (from component):",I)}finally{x(I=>({...I,[O.id]:!1}))}}},[r]),A=R.useCallback(O=>{const I=e.find(B=>B.id===O);if(I)if(I.error){const B=I.error instanceof Error?I.error.message:String(I.error);return{status:"Error",error:I.error,tooltip:B}}else return{status:"Loaded"};const D=(a||[]).find(B=>B.id===O);return D?D.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs(A0e,{variant:"destructive",className:"border-destructive/50",children:[y.jsx(tH,{className:"h-4 w-4"}),y.jsx(T0e,{children:"Security Warning"}),y.jsx(R0e,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),y.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(Ln,{htmlFor:"mod-name",children:"Mod Name"}),y.jsx(kr,{id:"mod-name",value:o,onChange:O=>s(O.target.value),placeholder:"My Awesome Mod",disabled:m})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(Ln,{htmlFor:"mod-url",children:"Source URL (Optional)"}),y.jsx(kr,{id:"mod-url",type:"url",value:u,onChange:O=>c(O.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!f.trim()})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(Ln,{htmlFor:"mod-script",children:"Script Content (Optional)"}),y.jsx(Jk,{id:"mod-script",value:f,onChange:O=>h(O.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!u.trim()})]}),y.jsxs(Ut,{onClick:S,disabled:m,children:[m&&y.jsx(Jn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),y.jsx("div",{className:"rounded-md border",children:y.jsx(kn,{delayDuration:100,children:y.jsxs(c1,{children:[y.jsx(d1,{children:y.jsxs(Vi,{children:[y.jsx(ia,{children:"Name"}),y.jsx(ia,{children:"Source"}),y.jsx(ia,{children:"Status"}),y.jsx(ia,{className:"text-center",children:"Enabled"}),y.jsx(ia,{className:"text-right",children:"Actions"})]})}),y.jsx(f1,{children:i?y.jsxs(y.Fragment,{children:[y.jsx(Vi,{children:y.jsx(br,{colSpan:5,children:y.jsx(Mr,{className:"h-10 w-full"})})}),y.jsx(Vi,{children:y.jsx(br,{colSpan:5,children:y.jsx(Mr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?y.jsx(Vi,{children:y.jsx(br,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(O=>{const{status:I,error:D,tooltip:B}=A(O.id),K=O.sourceUrl?new URL(O.sourceUrl).hostname:"Direct Script",Q=w[O.id],F=_[O.id],W=Q||F,U=I==="Error";return y.jsxs(Vi,{children:[y.jsx(br,{className:"font-medium",children:O.name}),y.jsx(br,{className:"text-muted-foreground",children:K}),y.jsxs(br,{children:[y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx("span",{className:U?"text-destructive font-semibold cursor-help":"",children:I})}),B&&y.jsx(On,{className:"max-w-xs break-words",children:y.jsx("p",{children:B})})]}),U&&D&&y.jsx("p",{className:"text-xs text-destructive truncate",children:D instanceof Error?D.message:String(D)})]}),y.jsxs(br,{className:"text-center",children:[y.jsx(Bl,{checked:O.enabled??!1,onCheckedChange:()=>E(O),disabled:W,"aria-label":`Enable ${O.name}`}),Q&&y.jsx(Jn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),y.jsx(br,{className:"text-right",children:y.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>C(O),disabled:W,"aria-label":`Delete ${O.name}`,className:"text-destructive hover:text-destructive/80",children:F?y.jsx(Jn,{className:"h-4 w-4 animate-spin"}):y.jsx(Hu,{className:"h-4 w-4"})})})]},O.id)})})]})})})]})]})},I0e=vt.memo(N0e),M9=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:o="h-48"})=>{const[s,u]=R.useState(""),c=R.useMemo(()=>{if(!s)return t;const f=s.toLowerCase();return t.filter(h=>h.name.toLowerCase().includes(f)||h.id.toLowerCase().includes(f))},[t,s]);return a?y.jsxs("div",{className:`space-y-2 ${o}`,children:[y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"})]}):t.length===0?y.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):y.jsxs("div",{className:"space-y-2",children:[y.jsx(kr,{value:s,onChange:f=>u(f.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),y.jsx(sg,{className:`${o} w-full rounded-md border border-border p-3 bg-background/50`,children:y.jsx("div",{className:"space-y-2",children:c.map(f=>y.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[y.jsx(Ln,{htmlFor:`enable-model-${e}-${f.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:f.name||f.id,children:f.name||f.id}),y.jsx(Bl,{id:`enable-model-${e}-${f.id}`,checked:n.has(f.id),onCheckedChange:h=>r(f.id,h),className:"flex-shrink-0",disabled:i,"aria-label":`Enable model ${f.name||f.id}`})]},f.id))})})]})},O0e=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:o,isDeleting:s})=>{var C;const u=Yk(e.type),c=Xk(e.type),f=ym(e.type),h=o==="fetching"||s,m=s||o==="fetching",g=s||o==="fetching",v=Ai(A=>A.getAllAvailableModelDefsForProvider)(e.id),_=R.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),x=e.apiKeyId?t.some(A=>A.id===e.apiKeyId):!1,S=u&&!x,E=R.useCallback(async(A,O)=>{const I=new Set(e.enabledModels??[]);O?I.add(A):I.delete(A);const D=Array.from(I);try{await i(e.id,{enabledModels:D})}catch(B){dt.error("Failed to update model status."),console.error("Failed to save model toggle:",B)}},[e.enabledModels,e.id,i]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{children:y.jsx("span",{className:Dt("h-2.5 w-2.5 rounded-full flex-shrink-0 block",o==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),y.jsx(On,{side:"top",children:o==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),y.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),y.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),S&&y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{children:y.jsx(Ms,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),y.jsx(On,{side:"top",children:y.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),y.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",onClick:n,disabled:m,"aria-label":"Edit provider",className:"h-8 w-8",children:y.jsx(oC,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Edit"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",onClick:r,disabled:g,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",children:s?y.jsx(Jn,{className:"h-4 w-4 animate-spin"}):y.jsx(Hu,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Delete"})]})})]})]}),y.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[u&&y.jsxs("div",{children:["API Key:"," ",e.apiKeyId?x?y.jsx("span",{className:"text-green-400",children:((C=t.find(A=>A.id===e.apiKeyId))==null?void 0:C.name)||"Linked (Unnamed Key)"}):y.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):y.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),c&&y.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),y.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?y.jsx("span",{className:"text-green-400",children:"Enabled"}):y.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&y.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),f&&y.jsx("div",{className:"pt-1",children:y.jsxs(Ut,{variant:"outline",size:"sm",onClick:a,disabled:h,className:"text-xs h-7 px-2",children:[o==="fetching"&&y.jsx(Jn,{className:"h-3 w-3 mr-1 animate-spin"}),o==="success"&&y.jsx(vo,{className:"h-3 w-3 mr-1 text-green-500"}),o==="error"&&y.jsx(Ms,{className:"h-3 w-3 mr-1 text-destructive"}),o==="idle"&&y.jsx(Yv,{className:"h-3 w-3 mr-1"}),o==="fetching"?"Fetching...":o==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"font-medium text-card-foreground text-sm",children:"Model Enablement (Saves Immediately):"}),y.jsx(M9,{providerId:e.id,allAvailableModels:v,enabledModelIds:_,onToggleModel:E,isLoading:o==="fetching",disabled:s,listHeightClass:"h-64"})]})]})},D0e=vt.memo(O0e),P9=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var c;const o=f=>{r(f==="none"?null:f)},s=(c=a.find(f=>f.id===n))==null?void 0:c.name,u=n?s||`Key ID: ${n.substring(0,6)}...`:"None";return y.jsxs(dg,{value:n??"none",onValueChange:o,disabled:i||a.length===0,children:[y.jsx(hg,{className:Dt("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:y.jsx(fg,{asChild:!0,children:y.jsxs("div",{className:"flex items-center overflow-hidden",children:[y.jsx(Eq,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),y.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&y.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?y.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):u]})]})})}),y.jsxs(pg,{className:"bg-popover border-border text-popover-foreground",children:[y.jsx($o,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(f=>y.jsx($o,{value:f.id,children:f.name||`Key ID: ${f.id.substring(0,6)}...`},f.id))]})]})},j0e=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:o,onChange:s})=>{const u=Yk(t.type??null),c=Xk(t.type??null),f=ym(t.type??null),h=t.isEnabled??!1,m=t.autoFetchModels??!1,g=R.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),w=R.useCallback((v,_)=>{const x=new Set(t.enabledModels??[]);_?x.add(v):x.delete(v);const S=Array.from(x);s("enabledModels",S)},[t.enabledModels,s]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(Ln,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),y.jsx(kr,{id:`edit-name-${e}`,value:t.name||"",onChange:v=>s("name",v.target.value),placeholder:"Provider Name",disabled:a})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(Ln,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),y.jsxs(dg,{value:t.type??"",onValueChange:v=>s("type",v),disabled:a,children:[y.jsx(hg,{id:`edit-type-${e}`,children:y.jsx(fg,{placeholder:"Select Type"})}),y.jsx(pg,{children:DF.map(v=>y.jsx($o,{value:v.value,children:v.label},v.value))})]})]}),u&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(Ln,{children:"API Key"}),y.jsx(P9,{selectedKeyId:t.apiKeyId??null,onKeySelected:v=>s("apiKeyId",v),apiKeys:n,disabled:a})]}),c&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(Ln,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),y.jsx(kr,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:v=>s("baseURL",v.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),y.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[y.jsx(Bl,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:v=>s("isEnabled",v),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),y.jsx(Ln,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Bl,{id:`edit-autofetch-${e}`,checked:m,onCheckedChange:v=>s("autoFetchModels",v),disabled:!f||a,"aria-labelledby":`edit-autofetch-label-${e}`}),y.jsxs(Ln,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:f?"":"text-muted-foreground",children:["Auto-fetch models ",f?"":"(Not Supported)"]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),y.jsx(M9,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:w,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),y.jsx(jv,{className:"my-4"}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Ut,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[y.jsx(zs,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),y.jsxs(Ut,{variant:"secondary",size:"sm",onClick:o,disabled:a,type:"button",children:[a&&y.jsx(Jn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(sC,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},M0e=vt.memo(j0e),P0e=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i})=>{const[o,s]=R.useState(!1),[u,c]=R.useState(!1),[f,h]=R.useState(!1),[m,g]=R.useState({}),w=Ai(D=>D.getAllAvailableModelDefsForProvider),[v,_]=R.useState([]),x=R.useMemo(()=>[...v].sort((D,B)=>(D.name||D.id).localeCompare(B.name||B.id)),[v]);R.useEffect(()=>{if(o){const D=w(e.id);_(D),g({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else _([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,e.fetchedModels,w]);const S=()=>s(!0),E=()=>{s(!1),g({}),c(!1)},C=R.useCallback(async()=>{c(!0);try{const D=m.enabledModels&&m.enabledModels.length>0?m.enabledModels:null,B={name:m.name,type:m.type,isEnabled:m.isEnabled,apiKeyId:m.apiKeyId,baseURL:m.baseURL,autoFetchModels:m.autoFetchModels,enabledModels:D};Object.keys(B).forEach(K=>{B[K]===void 0&&delete B[K]}),await n(e.id,B),s(!1),g({}),dt.success(`Provider "${B.name||e.name}" updated.`)}catch(D){console.error("Failed to save provider update:",D),dt.error("Failed to save provider configuration.")}finally{c(!1)}},[m,n,e.id,e.name]),A=R.useCallback((D,B)=>{g(K=>({...K,[D]:B}))},[]),O=R.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){h(!0);try{await r(e.id)}catch(D){console.error("Failed to delete provider:",D),h(!1)}}},[r,e.id,e.name]),I=R.useCallback(async()=>{if(await a(e.id),o){const D=w(e.id);_(D)}},[a,e.id,o,w]);return y.jsx("div",{className:"border-b border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?y.jsx(M0e,{providerId:e.id,editData:m,apiKeys:t,allAvailableModels:x,isSaving:u,onCancel:E,onSave:C,onChange:A,onUpdate:n}):y.jsx(D0e,{provider:e,apiKeys:t,onEdit:S,onDelete:O,onFetchModels:I,onUpdate:n,fetchStatus:i,isDeleting:f})})},F0e=vt.memo(P0e),L0e=({apiKeys:e,onAddProvider:t,onCancel:n})=>{const[r,a]=R.useState(!1),[i,o]=R.useState({name:"",type:"openai",isEnabled:!0,apiKeyId:null,baseURL:null,enabledModels:null,autoFetchModels:!0,fetchedModels:null,modelsLastFetchedAt:null}),s=R.useCallback((m,g)=>{o(w=>{const v={...w,[m]:g};if(m==="type"){const _=g;v.apiKeyId=null,v.baseURL=null,v.autoFetchModels=ym(_),v.enabledModels=null}return(m==="isEnabled"||m==="autoFetchModels")&&(v[m]=!!g),v})},[]),u=R.useCallback(async()=>{if(!i.name||!i.type){dt.error("Provider Name and Type are required.");return}a(!0);try{const m=i.type,g=i.autoFetchModels??ym(m),w={name:i.name,type:m,isEnabled:i.isEnabled??!0,apiKeyId:i.apiKeyId??null,baseURL:i.baseURL??null,enabledModels:null,autoFetchModels:g,fetchedModels:null,modelsLastFetchedAt:null};await t(w),n()}catch(m){console.error("Failed to add provider (from form component):",m)}finally{a(!1)}},[i,t,n]),c=Yk(i.type??null),f=Xk(i.type??null),h=ym(i.type??null);return y.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(kr,{value:i.name||"",onChange:m=>s("name",m.target.value),placeholder:"Provider Name (e.g., My Ollama)",className:"flex-grow",disabled:r,"aria-label":"Provider Name"}),y.jsxs(dg,{value:i.type??"openai",onValueChange:m=>s("type",m),disabled:r,children:[y.jsx(hg,{className:"w-[200px]","aria-label":"Provider Type",children:y.jsx(fg,{placeholder:"Select Type"})}),y.jsx(pg,{children:DF.map(m=>y.jsx($o,{value:m.value,children:m.label},m.value))})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Bl,{id:"new-enabled",checked:i.isEnabled??!0,onCheckedChange:m=>s("isEnabled",m),disabled:r,"aria-labelledby":"new-enabled-label"}),y.jsx(Ln,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]})]}),(c||f)&&y.jsxs("div",{className:"flex items-center space-x-2",children:[c&&y.jsx(P9,{label:"API Key:",selectedKeyId:i.apiKeyId??null,onKeySelected:m=>s("apiKeyId",m),apiKeys:e||[],className:"flex-grow",disabled:r}),f&&y.jsx(kr,{value:i.baseURL||"",onChange:m=>s("baseURL",m.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",className:"flex-grow",disabled:r,"aria-label":"Base URL"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Bl,{id:"new-autofetch",checked:i.autoFetchModels??!1,onCheckedChange:m=>s("autoFetchModels",m),disabled:!h||r,"aria-labelledby":"new-autofetch-label"}),y.jsxs(Ln,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:h?"":"text-muted-foreground",children:["Auto-fetch models ",h?"":"(Not Supported)"]})]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Ut,{variant:"ghost",size:"sm",onClick:n,disabled:r,type:"button",children:[y.jsx(zs,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Ut,{variant:"secondary",size:"sm",onClick:u,disabled:r||!i.name||!i.type,type:"button",children:[r&&y.jsx(Jn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(sC,{className:"h-4 w-4 mr-1"})," ",r?"Adding...":"Add Provider"]})]})]})},$0e=()=>{const{addDbProviderConfig:e,updateDbProviderConfig:t,deleteDbProviderConfig:n,fetchModels:r,providerFetchStatus:a,dbProviderConfigs:i,apiKeys:o,isLoading:s}=Ai(Hn(w=>({addDbProviderConfig:w.addProviderConfig,updateDbProviderConfig:w.updateProviderConfig,deleteDbProviderConfig:w.deleteProviderConfig,fetchModels:w.fetchModels,providerFetchStatus:w.providerFetchStatus,dbProviderConfigs:w.dbProviderConfigs,apiKeys:w.dbApiKeys,isLoading:w.isLoading}))),[u,c]=R.useState(!1),f=()=>c(!0),h=R.useCallback(()=>c(!1),[]),m=R.useCallback(async w=>{await r(w)},[r]),g=R.useMemo(()=>i||[],[i]);return y.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section."})]}),y.jsx("div",{className:"flex-shrink-0",children:u?y.jsx(L0e,{apiKeys:o||[],onAddProvider:e,onCancel:h}):y.jsxs(Ut,{onClick:f,variant:"outline",className:"w-full",disabled:s,children:[y.jsx(Zv,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),y.jsx("div",{className:"flex-grow overflow-hidden border-t border-border pt-4 mt-4",children:y.jsxs("div",{className:"space-y-2",children:[s&&!u?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[y.jsx(Mr,{className:"h-24 w-full"}),y.jsx(Mr,{className:"h-24 w-full"}),y.jsx(Mr,{className:"h-24 w-full"})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:g.map(w=>y.jsx(F0e,{provider:w,apiKeys:o||[],onUpdate:t,onDelete:n,onFetchModels:m,fetchStatus:a[w.id]||"idle"},w.id))}),!s&&g.length===0&&!u&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},B0e=vt.memo($0e);function z0e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const h1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function lA(e){return"nodeType"in e}function Ii(e){var t,n;return e?qh(e)?e:lA(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function uA(e){const{Document:t}=Ii(e);return e instanceof t}function mg(e){return qh(e)?!1:e instanceof Ii(e).HTMLElement}function F9(e){return e instanceof Ii(e).SVGElement}function Hh(e){return e?qh(e)?e.document:lA(e)?uA(e)?e:mg(e)||F9(e)?e.ownerDocument:document:document:document}const Bs=h1?R.useLayoutEffect:R.useEffect;function cA(e){const t=R.useRef(e);return Bs(()=>{t.current=e}),R.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function U0e(){const e=R.useRef(null),t=R.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=R.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function p0(e,t){t===void 0&&(t=[e]);const n=R.useRef(e);return Bs(()=>{n.current!==e&&(n.current=e)},t),n}function gg(e,t){const n=R.useRef();return R.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Mv(e){const t=cA(e),n=R.useRef(null),r=R.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function qE(e){const t=R.useRef();return R.useEffect(()=>{t.current=e},[e]),t.current}let v2={};function yg(e,t){return R.useMemo(()=>{if(t)return t;const n=v2[e]==null?0:v2[e]+1;return v2[e]=n,e+"-"+n},[e,t])}function L9(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const s=Object.entries(o);for(const[u,c]of s){const f=i[u];f!=null&&(i[u]=f+e*c)}return i},{...t})}}const Wf=L9(1),m0=L9(-1);function q0e(e){return"clientX"in e&&"clientY"in e}function dA(e){if(!e)return!1;const{KeyboardEvent:t}=Ii(e.target);return t&&e instanceof t}function H0e(e){if(!e)return!1;const{TouchEvent:t}=Ii(e.target);return t&&e instanceof t}function HE(e){if(H0e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return q0e(e)?{x:e.clientX,y:e.clientY}:null}const g0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[g0.Translate.toString(e),g0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),H6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function V0e(e){return e.matches(H6)?e:e.querySelector(H6)}const G0e={display:"none"};function W0e(e){let{id:t,value:n}=e;return vt.createElement("div",{id:t,style:G0e},n)}function K0e(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return vt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function Z0e(){const[e,t]=R.useState("");return{announce:R.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const $9=R.createContext(null);function Y0e(e){const t=R.useContext($9);R.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function X0e(){const[e]=R.useState(()=>new Set),t=R.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[R.useCallback(r=>{let{type:a,event:i}=r;e.forEach(o=>{var s;return(s=o[a])==null?void 0:s.call(o,i)})},[e]),t]}const J0e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Q0e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ege(e){let{announcements:t=Q0e,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=J0e}=e;const{announce:i,announcement:o}=Z0e(),s=yg("DndLiveRegion"),[u,c]=R.useState(!1);if(R.useEffect(()=>{c(!0)},[]),Y0e(R.useMemo(()=>({onDragStart(h){let{active:m}=h;i(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:g}=h;t.onDragMove&&i(t.onDragMove({active:m,over:g}))},onDragOver(h){let{active:m,over:g}=h;i(t.onDragOver({active:m,over:g}))},onDragEnd(h){let{active:m,over:g}=h;i(t.onDragEnd({active:m,over:g}))},onDragCancel(h){let{active:m,over:g}=h;i(t.onDragCancel({active:m,over:g}))}}),[i,t])),!u)return null;const f=vt.createElement(vt.Fragment,null,vt.createElement(W0e,{id:r,value:a.draggable}),vt.createElement(K0e,{id:s,announcement:o}));return n?Ns.createPortal(f,n):f}var da;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(da||(da={}));function Pv(){}function V6(e,t){return R.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function tge(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Jo=Object.freeze({x:0,y:0});function B9(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function z9(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function nge(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function G6(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function U9(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function W6(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const rge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=W6(t,t.left,t.top),i=[];for(const o of r){const{id:s}=o,u=n.get(s);if(u){const c=B9(W6(u),a);i.push({id:s,data:{droppableContainer:o,value:c}})}}return i.sort(z9)},age=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=G6(t),i=[];for(const o of r){const{id:s}=o,u=n.get(s);if(u){const c=G6(u),f=a.reduce((m,g,w)=>m+B9(c[w],g),0),h=Number((f/4).toFixed(4));i.push({id:s,data:{droppableContainer:o,value:h}})}}return i.sort(z9)};function ige(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-r,s=i-n;if(r<a&&n<i){const u=t.width*t.height,c=e.width*e.height,f=o*s,h=f/(u+c-f);return Number(h.toFixed(4))}return 0}const oge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:o}=i,s=n.get(o);if(s){const u=ige(s,t);u>0&&a.push({id:o,data:{droppableContainer:i,value:u}})}}return a.sort(nge)};function sge(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function q9(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Jo}function lge(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((o,s)=>({...o,top:o.top+e*s.y,bottom:o.bottom+e*s.y,left:o.left+e*s.x,right:o.right+e*s.x}),{...n})}}const uge=lge(1);function cge(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function dge(e,t,n){const r=cge(t);if(!r)return e;const{scaleX:a,scaleY:i,x:o,y:s}=r,u=e.left-o-(1-a)*parseFloat(n),c=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:f,height:h,top:c,right:u+f,bottom:c+h,left:u}}const fge={ignoreTransform:!1};function Vh(e,t){t===void 0&&(t=fge);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:f}=Ii(e).getComputedStyle(e);c&&(n=dge(n,c,f))}const{top:r,left:a,width:i,height:o,bottom:s,right:u}=n;return{top:r,left:a,width:i,height:o,bottom:s,right:u}}function K6(e){return Vh(e,{ignoreTransform:!0})}function hge(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function pge(e,t){return t===void 0&&(t=Ii(e).getComputedStyle(e)),t.position==="fixed"}function mge(e,t){t===void 0&&(t=Ii(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function p1(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(uA(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!mg(a)||F9(a)||n.includes(a))return n;const i=Ii(e).getComputedStyle(a);return a!==e&&mge(a,i)&&n.push(a),pge(a,i)?n:r(a.parentNode)}return e?r(e):n}function H9(e){const[t]=p1(e,1);return t??null}function w2(e){return!h1||!e?null:qh(e)?e:lA(e)?uA(e)||e===Hh(e).scrollingElement?window:mg(e)?e:null:null}function V9(e){return qh(e)?e.scrollX:e.scrollLeft}function G9(e){return qh(e)?e.scrollY:e.scrollTop}function VE(e){return{x:V9(e),y:G9(e)}}var Ca;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ca||(Ca={}));function W9(e){return!h1||!e?!1:e===document.scrollingElement}function K9(e){const t={x:0,y:0},n=W9(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,s=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:s,maxScroll:r,minScroll:t}}const gge={x:.2,y:.2};function yge(e,t,n,r,a){let{top:i,left:o,right:s,bottom:u}=n;r===void 0&&(r=10),a===void 0&&(a=gge);const{isTop:c,isBottom:f,isLeft:h,isRight:m}=K9(e),g={x:0,y:0},w={x:0,y:0},v={height:t.height*a.y,width:t.width*a.x};return!c&&i<=t.top+v.height?(g.y=Ca.Backward,w.y=r*Math.abs((t.top+v.height-i)/v.height)):!f&&u>=t.bottom-v.height&&(g.y=Ca.Forward,w.y=r*Math.abs((t.bottom-v.height-u)/v.height)),!m&&s>=t.right-v.width?(g.x=Ca.Forward,w.x=r*Math.abs((t.right-v.width-s)/v.width)):!h&&o<=t.left+v.width&&(g.x=Ca.Backward,w.x=r*Math.abs((t.left+v.width-o)/v.width)),{direction:g,speed:w}}function bge(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Z9(e){return e.reduce((t,n)=>Wf(t,VE(n)),Jo)}function vge(e){return e.reduce((t,n)=>t+V9(n),0)}function wge(e){return e.reduce((t,n)=>t+G9(n),0)}function _ge(e,t){if(t===void 0&&(t=Vh),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);H9(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const xge=[["x",["left","right"],vge],["y",["top","bottom"],wge]];class fA{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=p1(n),a=Z9(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,s]of xge)for(const u of o)Object.defineProperty(this,u,{get:()=>{const c=s(r),f=a[i]-c;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bm{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Sge(e){const{EventTarget:t}=Ii(e);return e instanceof t?e:Hh(e)}function _2(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var po;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(po||(po={}));function Z6(e){e.preventDefault()}function Ege(e){e.stopPropagation()}var Vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Vn||(Vn={}));const Y9={start:[Vn.Space,Vn.Enter],cancel:[Vn.Esc],end:[Vn.Space,Vn.Enter,Vn.Tab]},Cge=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Vn.Right:return{...n,x:n.x+25};case Vn.Left:return{...n,x:n.x-25};case Vn.Down:return{...n,y:n.y+25};case Vn.Up:return{...n,y:n.y-25}}};class hA{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new bm(Hh(n)),this.windowListeners=new bm(Ii(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(po.Resize,this.handleCancel),this.windowListeners.add(po.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(po.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&_ge(r),n(Jo)}handleKeyDown(t){if(dA(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=Y9,coordinateGetter:o=Cge,scrollBehavior:s="smooth"}=a,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:c}=r.current,f=c?{x:c.left,y:c.top}:Jo;this.referenceCoordinates||(this.referenceCoordinates=f);const h=o(t,{active:n,context:r.current,currentCoordinates:f});if(h){const m=m0(h,f),g={x:0,y:0},{scrollableAncestors:w}=r.current;for(const v of w){const _=t.code,{isTop:x,isRight:S,isLeft:E,isBottom:C,maxScroll:A,minScroll:O}=K9(v),I=bge(v),D={x:Math.min(_===Vn.Right?I.right-I.width/2:I.right,Math.max(_===Vn.Right?I.left:I.left+I.width/2,h.x)),y:Math.min(_===Vn.Down?I.bottom-I.height/2:I.bottom,Math.max(_===Vn.Down?I.top:I.top+I.height/2,h.y))},B=_===Vn.Right&&!S||_===Vn.Left&&!E,K=_===Vn.Down&&!C||_===Vn.Up&&!x;if(B&&D.x!==h.x){const Q=v.scrollLeft+m.x,F=_===Vn.Right&&Q<=A.x||_===Vn.Left&&Q>=O.x;if(F&&!m.y){v.scrollTo({left:Q,behavior:s});return}F?g.x=v.scrollLeft-Q:g.x=_===Vn.Right?v.scrollLeft-A.x:v.scrollLeft-O.x,g.x&&v.scrollBy({left:-g.x,behavior:s});break}else if(K&&D.y!==h.y){const Q=v.scrollTop+m.y,F=_===Vn.Down&&Q<=A.y||_===Vn.Up&&Q>=O.y;if(F&&!m.x){v.scrollTo({top:Q,behavior:s});return}F?g.y=v.scrollTop-Q:g.y=_===Vn.Down?v.scrollTop-A.y:v.scrollTop-O.y,g.y&&v.scrollBy({top:-g.y,behavior:s});break}}this.handleMove(t,Wf(m0(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}hA.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Y9,onActivation:a}=t,{active:i}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const s=i.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function Y6(e){return!!(e&&"distance"in e)}function X6(e){return!!(e&&"delay"in e)}class pA{constructor(t,n,r){var a;r===void 0&&(r=Sge(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:o}=i;this.props=t,this.events=n,this.document=Hh(o),this.documentListeners=new bm(this.document),this.listeners=new bm(r),this.windowListeners=new bm(Ii(o)),this.initialCoordinates=(a=HE(i))!=null?a:Jo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(po.Resize,this.handleCancel),this.windowListeners.add(po.DragStart,Z6),this.windowListeners.add(po.VisibilityChange,this.handleCancel),this.windowListeners.add(po.ContextMenu,Z6),this.documentListeners.add(po.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(X6(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Y6(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(po.Click,Ege,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(po.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:s}}=i;if(!a)return;const u=(n=HE(t))!=null?n:Jo,c=m0(a,u);if(!r&&s){if(Y6(s)){if(s.tolerance!=null&&_2(c,s.tolerance))return this.handleCancel();if(_2(c,s.distance))return this.handleStart()}if(X6(s)&&_2(c,s.tolerance))return this.handleCancel();this.handlePending(s,c);return}t.cancelable&&t.preventDefault(),o(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const kge={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class mA extends pA{constructor(t){const{event:n}=t,r=Hh(n.target);super(t,kge,r)}}mA.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Age={move:{name:"mousemove"},end:{name:"mouseup"}};var GE;(function(e){e[e.RightClick=2]="RightClick"})(GE||(GE={}));class Tge extends pA{constructor(t){super(t,Age,Hh(t.event.target))}}Tge.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===GE.RightClick?!1:(r==null||r({event:n}),!0)}}];const x2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Rge extends pA{constructor(t){super(t,x2)}static setup(){return window.addEventListener(x2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(x2.move.name,t)};function t(){}}}Rge.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var vm;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(vm||(vm={}));var Fv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Fv||(Fv={}));function Nge(e){let{acceleration:t,activator:n=vm.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:s=Fv.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:f,delta:h,threshold:m}=e;const g=Oge({delta:h,disabled:!i}),[w,v]=U0e(),_=R.useRef({x:0,y:0}),x=R.useRef({x:0,y:0}),S=R.useMemo(()=>{switch(n){case vm.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case vm.DraggableRect:return a}},[n,a,u]),E=R.useRef(null),C=R.useCallback(()=>{const O=E.current;if(!O)return;const I=_.current.x*x.current.x,D=_.current.y*x.current.y;O.scrollBy(I,D)},[]),A=R.useMemo(()=>s===Fv.TreeOrder?[...c].reverse():c,[s,c]);R.useEffect(()=>{if(!i||!c.length||!S){v();return}for(const O of A){if((r==null?void 0:r(O))===!1)continue;const I=c.indexOf(O),D=f[I];if(!D)continue;const{direction:B,speed:K}=yge(O,D,S,t,m);for(const Q of["x","y"])g[Q][B[Q]]||(K[Q]=0,B[Q]=0);if(K.x>0||K.y>0){v(),E.current=O,w(C,o),_.current=K,x.current=B;return}}_.current={x:0,y:0},x.current={x:0,y:0},v()},[t,C,r,v,i,o,JSON.stringify(S),JSON.stringify(g),w,c,A,f,JSON.stringify(m)])}const Ige={x:{[Ca.Backward]:!1,[Ca.Forward]:!1},y:{[Ca.Backward]:!1,[Ca.Forward]:!1}};function Oge(e){let{delta:t,disabled:n}=e;const r=qE(t);return gg(a=>{if(n||!r||!a)return Ige;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Ca.Backward]:a.x[Ca.Backward]||i.x===-1,[Ca.Forward]:a.x[Ca.Forward]||i.x===1},y:{[Ca.Backward]:a.y[Ca.Backward]||i.y===-1,[Ca.Forward]:a.y[Ca.Forward]||i.y===1}}},[n,t,r])}function Dge(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return gg(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function jge(e,t){return R.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...i]},[]),[e,t])}var y0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(y0||(y0={}));var WE;(function(e){e.Optimized="optimized"})(WE||(WE={}));const J6=new Map;function Mge(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,o]=R.useState(null),{frequency:s,measure:u,strategy:c}=a,f=R.useRef(e),h=_(),m=p0(h),g=R.useCallback(function(x){x===void 0&&(x=[]),!m.current&&o(S=>S===null?x:S.concat(x.filter(E=>!S.includes(E))))},[m]),w=R.useRef(null),v=gg(x=>{if(h&&!n)return J6;if(!x||x===J6||f.current!==e||i!=null){const S=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,A=C?new fA(u(C),C):null;E.rect.current=A,A&&S.set(E.id,A)}return S}return x},[e,i,n,h,u]);return R.useEffect(()=>{f.current=e},[e]),R.useEffect(()=>{h||g()},[n,h]),R.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),R.useEffect(()=>{h||typeof s!="number"||w.current!==null||(w.current=setTimeout(()=>{g(),w.current=null},s))},[s,h,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(c){case y0.Always:return!1;case y0.BeforeDragging:return n;default:return!n}}}function X9(e,t){return gg(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Pge(e,t){return X9(e,t)}function Fge(e){let{callback:t,disabled:n}=e;const r=cA(t),a=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return R.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function m1(e){let{callback:t,disabled:n}=e;const r=cA(t),a=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return R.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Lge(e){return new fA(Vh(e),e)}function Q6(e,t,n){t===void 0&&(t=Lge);const[r,a]=R.useState(null);function i(){a(u=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=u??n)!=null?c:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const o=Fge({callback(u){if(e)for(const c of u){const{type:f,target:h}=c;if(f==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),s=m1({callback:i});return Bs(()=>{i(),e?(s==null||s.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(s==null||s.disconnect(),o==null||o.disconnect())},[e]),r}function $ge(e){const t=X9(e);return q9(e,t)}const eO=[];function Bge(e){const t=R.useRef(e),n=gg(r=>e?r&&r!==eO&&e&&t.current&&e.parentNode===t.current.parentNode?r:p1(e):eO,[e]);return R.useEffect(()=>{t.current=e},[e]),n}function zge(e){const[t,n]=R.useState(null),r=R.useRef(e),a=R.useCallback(i=>{const o=w2(i.target);o&&n(s=>s?(s.set(o,VE(o)),new Map(s)):null)},[]);return R.useEffect(()=>{const i=r.current;if(e!==i){o(i);const s=e.map(u=>{const c=w2(u);return c?(c.addEventListener("scroll",a,{passive:!0}),[c,VE(c)]):null}).filter(u=>u!=null);n(s.length?new Map(s):null),r.current=e}return()=>{o(e),o(i)};function o(s){s.forEach(u=>{const c=w2(u);c==null||c.removeEventListener("scroll",a)})}},[a,e]),R.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>Wf(i,o),Jo):Z9(e):Jo,[e,t])}function tO(e,t){t===void 0&&(t=[]);const n=R.useRef(null);return R.useEffect(()=>{n.current=null},t),R.useEffect(()=>{const r=e!==Jo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?m0(e,n.current):Jo}function Uge(e){R.useEffect(()=>{if(!h1)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function qge(e,t){return R.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,t)},n},{}),[e,t])}function J9(e){return R.useMemo(()=>e?hge(e):null,[e])}const nO=[];function Hge(e,t){t===void 0&&(t=Vh);const[n]=e,r=J9(n?Ii(n):null),[a,i]=R.useState(nO);function o(){i(()=>e.length?e.map(u=>W9(u)?r:new fA(t(u),u)):nO)}const s=m1({callback:o});return Bs(()=>{s==null||s.disconnect(),o(),e.forEach(u=>s==null?void 0:s.observe(u))},[e]),a}function Vge(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return mg(t)?t:e}function Gge(e){let{measure:t}=e;const[n,r]=R.useState(null),a=R.useCallback(c=>{for(const{target:f}of c)if(mg(f)){r(h=>{const m=t(f);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),i=m1({callback:a}),o=R.useCallback(c=>{const f=Vge(c);i==null||i.disconnect(),f&&(i==null||i.observe(f)),r(f?t(f):null)},[t,i]),[s,u]=Mv(o);return R.useMemo(()=>({nodeRef:s,rect:n,setRef:u}),[n,s,u])}const Wge=[{sensor:mA,options:{}},{sensor:hA,options:{}}],Kge={current:{}},Sb={draggable:{measure:K6},droppable:{measure:K6,strategy:y0.WhileDragging,frequency:WE.Optimized},dragOverlay:{measure:Vh}};class wm extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Zge={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Pv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Sb,measureDroppableContainers:Pv,windowRect:null,measuringScheduled:!1},Yge={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Pv,draggableNodes:new Map,over:null,measureDroppableContainers:Pv},g1=R.createContext(Yge),Q9=R.createContext(Zge);function Xge(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wm}}}function Jge(e,t){switch(t.type){case da.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case da.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case da.DragEnd:case da.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case da.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new wm(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case da.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new wm(e.droppable.containers);return o.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case da.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new wm(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Qge(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=R.useContext(g1),i=qE(r),o=qE(n==null?void 0:n.id);return R.useEffect(()=>{if(!t&&!r&&i&&o!=null){if(!dA(i)||document.activeElement===i.target)return;const s=a.get(o);if(!s)return;const{activatorNode:u,node:c}=s;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[u.current,c.current]){if(!f)continue;const h=V0e(f);if(h){h.focus();break}}})}},[r,t,a,o,i]),null}function eye(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function tye(e){return R.useMemo(()=>({draggable:{...Sb.draggable,...e==null?void 0:e.draggable},droppable:{...Sb.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Sb.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function nye(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=R.useRef(!1),{x:o,y:s}=typeof a=="boolean"?{x:a,y:a}:a;Bs(()=>{if(!o&&!s||!t){i.current=!1;return}if(i.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const f=n(c),h=q9(f,r);if(o||(h.x=0),s||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=H9(c);m&&m.scrollBy({top:h.y,left:h.x})}},[t,o,s,r,n])}const e$=R.createContext({...Jo,scaleX:1,scaleY:1});var Mu;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Mu||(Mu={}));const rye=R.memo(function(t){var n,r,a,i;let{id:o,accessibility:s,autoScroll:u=!0,children:c,sensors:f=Wge,collisionDetection:h=oge,measuring:m,modifiers:g,...w}=t;const v=R.useReducer(Jge,void 0,Xge),[_,x]=v,[S,E]=X0e(),[C,A]=R.useState(Mu.Uninitialized),O=C===Mu.Initialized,{draggable:{active:I,nodes:D,translate:B},droppable:{containers:K}}=_,Q=I!=null?D.get(I):null,F=R.useRef({initial:null,translated:null}),W=R.useMemo(()=>{var et;return I!=null?{id:I,data:(et=Q==null?void 0:Q.data)!=null?et:Kge,rect:F}:null},[I,Q]),U=R.useRef(null),[he,ae]=R.useState(null),[re,ee]=R.useState(null),se=p0(w,Object.values(w)),V=yg("DndDescribedBy",o),X=R.useMemo(()=>K.getEnabled(),[K]),Y=tye(m),{droppableRects:ne,measureDroppableContainers:be,measuringScheduled:Ee}=Mge(X,{dragging:O,dependencies:[B.x,B.y],config:Y.droppable}),De=Dge(D,I),Pe=R.useMemo(()=>re?HE(re):null,[re]),Re=Be(),Te=Pge(De,Y.draggable.measure);nye({activeNode:I!=null?D.get(I):null,config:Re.layoutShiftCompensation,initialRect:Te,measure:Y.draggable.measure});const He=Q6(De,Y.draggable.measure,Te),it=Q6(De?De.parentElement:null),Ie=R.useRef({activatorEvent:null,active:null,activeNode:De,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ae=K.getNodeFor((n=Ie.current.over)==null?void 0:n.id),z=Gge({measure:Y.dragOverlay.measure}),ke=(r=z.nodeRef.current)!=null?r:De,Ne=O?(a=z.rect)!=null?a:He:null,ce=!!(z.nodeRef.current&&z.rect),ie=$ge(ce?null:He),J=J9(ke?Ii(ke):null),_e=Bge(O?Ae??De:null),Le=Hge(_e),xe=eye(g,{transform:{x:B.x-ie.x,y:B.y-ie.y,scaleX:1,scaleY:1},activatorEvent:re,active:W,activeNodeRect:He,containerNodeRect:it,draggingNodeRect:Ne,over:Ie.current.over,overlayNodeRect:z.rect,scrollableAncestors:_e,scrollableAncestorRects:Le,windowRect:J}),Ve=Pe?Wf(Pe,B):null,xt=zge(_e),ht=tO(xt),Et=tO(xt,[He]),Lt=Wf(xe,ht),Tt=Ne?uge(Ne,xe):null,zt=W&&Tt?h({active:W,collisionRect:Tt,droppableRects:ne,droppableContainers:X,pointerCoordinates:Ve}):null,ge=U9(zt,"id"),[N,H]=R.useState(null),fe=ce?xe:Wf(xe,Et),Oe=sge(fe,(i=N==null?void 0:N.rect)!=null?i:null,He),ve=R.useRef(null),Ce=R.useCallback((et,me)=>{let{sensor:je,options:Ke}=me;if(U.current==null)return;const Ct=D.get(U.current);if(!Ct)return;const ye=et.nativeEvent,q=new je({active:U.current,activeNode:Ct,event:ye,options:Ke,context:Ie,onAbort(G){if(!D.get(G))return;const{onDragAbort:de}=se.current,Fe={id:G};de==null||de(Fe),S({type:"onDragAbort",event:Fe})},onPending(G,pe,de,Fe){if(!D.get(G))return;const{onDragPending:jt}=se.current,un={id:G,constraint:pe,initialCoordinates:de,offset:Fe};jt==null||jt(un),S({type:"onDragPending",event:un})},onStart(G){const pe=U.current;if(pe==null)return;const de=D.get(pe);if(!de)return;const{onDragStart:Fe}=se.current,ot={activatorEvent:ye,active:{id:pe,data:de.data,rect:F}};Ns.unstable_batchedUpdates(()=>{Fe==null||Fe(ot),A(Mu.Initializing),x({type:da.DragStart,initialCoordinates:G,active:pe}),S({type:"onDragStart",event:ot}),ae(ve.current),ee(ye)})},onMove(G){x({type:da.DragMove,coordinates:G})},onEnd:$(da.DragEnd),onCancel:$(da.DragCancel)});ve.current=q;function $(G){return async function(){const{active:de,collisions:Fe,over:ot,scrollAdjustedTranslate:jt}=Ie.current;let un=null;if(de&&jt){const{cancelDrop:Bt}=se.current;un={activatorEvent:ye,active:de,collisions:Fe,delta:jt,over:ot},G===da.DragEnd&&typeof Bt=="function"&&await Promise.resolve(Bt(un))&&(G=da.DragCancel)}U.current=null,Ns.unstable_batchedUpdates(()=>{x({type:G}),A(Mu.Uninitialized),H(null),ae(null),ee(null),ve.current=null;const Bt=G===da.DragEnd?"onDragEnd":"onDragCancel";if(un){const Vt=se.current[Bt];Vt==null||Vt(un),S({type:Bt,event:un})}})}}},[D]),le=R.useCallback((et,me)=>(je,Ke)=>{const Ct=je.nativeEvent,ye=D.get(Ke);if(U.current!==null||!ye||Ct.dndKit||Ct.defaultPrevented)return;const q={active:ye};et(je,me.options,q)===!0&&(Ct.dndKit={capturedBy:me.sensor},U.current=Ke,Ce(je,me))},[D,Ce]),ct=jge(f,le);Uge(f),Bs(()=>{He&&C===Mu.Initializing&&A(Mu.Initialized)},[He,C]),R.useEffect(()=>{const{onDragMove:et}=se.current,{active:me,activatorEvent:je,collisions:Ke,over:Ct}=Ie.current;if(!me||!je)return;const ye={active:me,activatorEvent:je,collisions:Ke,delta:{x:Lt.x,y:Lt.y},over:Ct};Ns.unstable_batchedUpdates(()=>{et==null||et(ye),S({type:"onDragMove",event:ye})})},[Lt.x,Lt.y]),R.useEffect(()=>{const{active:et,activatorEvent:me,collisions:je,droppableContainers:Ke,scrollAdjustedTranslate:Ct}=Ie.current;if(!et||U.current==null||!me||!Ct)return;const{onDragOver:ye}=se.current,q=Ke.get(ge),$=q&&q.rect.current?{id:q.id,rect:q.rect.current,data:q.data,disabled:q.disabled}:null,G={active:et,activatorEvent:me,collisions:je,delta:{x:Ct.x,y:Ct.y},over:$};Ns.unstable_batchedUpdates(()=>{H($),ye==null||ye(G),S({type:"onDragOver",event:G})})},[ge]),Bs(()=>{Ie.current={activatorEvent:re,active:W,activeNode:De,collisionRect:Tt,collisions:zt,droppableRects:ne,draggableNodes:D,draggingNode:ke,draggingNodeRect:Ne,droppableContainers:K,over:N,scrollableAncestors:_e,scrollAdjustedTranslate:Lt},F.current={initial:Ne,translated:Tt}},[W,De,zt,Tt,D,ke,Ne,ne,K,N,_e,Lt]),Nge({...Re,delta:B,draggingRect:Tt,pointerCoordinates:Ve,scrollableAncestors:_e,scrollableAncestorRects:Le});const yt=R.useMemo(()=>({active:W,activeNode:De,activeNodeRect:He,activatorEvent:re,collisions:zt,containerNodeRect:it,dragOverlay:z,draggableNodes:D,droppableContainers:K,droppableRects:ne,over:N,measureDroppableContainers:be,scrollableAncestors:_e,scrollableAncestorRects:Le,measuringConfiguration:Y,measuringScheduled:Ee,windowRect:J}),[W,De,He,re,zt,it,z,D,K,ne,N,be,_e,Le,Y,Ee,J]),M=R.useMemo(()=>({activatorEvent:re,activators:ct,active:W,activeNodeRect:He,ariaDescribedById:{draggable:V},dispatch:x,draggableNodes:D,over:N,measureDroppableContainers:be}),[re,ct,W,He,x,V,D,N,be]);return vt.createElement($9.Provider,{value:E},vt.createElement(g1.Provider,{value:M},vt.createElement(Q9.Provider,{value:yt},vt.createElement(e$.Provider,{value:Oe},c)),vt.createElement(Qge,{disabled:(s==null?void 0:s.restoreFocus)===!1})),vt.createElement(ege,{...s,hiddenTextDescribedById:V}));function Be(){const et=(he==null?void 0:he.autoScrollEnabled)===!1,me=typeof u=="object"?u.enabled===!1:u===!1,je=O&&!et&&!me;return typeof u=="object"?{...u,enabled:je}:{enabled:je}}}),aye=R.createContext(null),rO="button",iye="Draggable";function oye(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=yg(iye),{activators:o,activatorEvent:s,active:u,activeNodeRect:c,ariaDescribedById:f,draggableNodes:h,over:m}=R.useContext(g1),{role:g=rO,roleDescription:w="draggable",tabIndex:v=0}=a??{},_=(u==null?void 0:u.id)===t,x=R.useContext(_?e$:aye),[S,E]=Mv(),[C,A]=Mv(),O=qge(o,t),I=p0(n);Bs(()=>(h.set(t,{id:t,key:i,node:S,activatorNode:C,data:I}),()=>{const B=h.get(t);B&&B.key===i&&h.delete(t)}),[h,t]);const D=R.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":_&&g===rO?!0:void 0,"aria-roledescription":w,"aria-describedby":f.draggable}),[r,g,v,_,w,f.draggable]);return{active:u,activatorEvent:s,activeNodeRect:c,attributes:D,isDragging:_,listeners:r?void 0:O,node:S,over:m,setNodeRef:E,setActivatorNodeRef:A,transform:x}}function sye(){return R.useContext(Q9)}const lye="Droppable",uye={timeout:25};function cye(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=yg(lye),{active:o,dispatch:s,over:u,measureDroppableContainers:c}=R.useContext(g1),f=R.useRef({disabled:n}),h=R.useRef(!1),m=R.useRef(null),g=R.useRef(null),{disabled:w,updateMeasurementsFor:v,timeout:_}={...uye,...a},x=p0(v??r),S=R.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),g.current=null},_)},[_]),E=m1({callback:S,disabled:w||!o}),C=R.useCallback((D,B)=>{E&&(B&&(E.unobserve(B),h.current=!1),D&&E.observe(D))},[E]),[A,O]=Mv(C),I=p0(t);return R.useEffect(()=>{!E||!A.current||(E.disconnect(),h.current=!1,E.observe(A.current))},[A,E]),R.useEffect(()=>(s({type:da.RegisterDroppable,element:{id:r,key:i,disabled:n,node:A,rect:m,data:I}}),()=>s({type:da.UnregisterDroppable,key:i,id:r})),[r]),R.useEffect(()=>{n!==f.current.disabled&&(s({type:da.SetDroppableDisabled,id:r,key:i,disabled:n}),f.current.disabled=n)},[r,i,n,s]),{active:o,rect:m,isOver:(u==null?void 0:u.id)===r,node:A,over:u,setNodeRef:O}}function gA(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function dye(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function ub(e){return e!==null&&e>=0}function fye(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function hye(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const t$=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=gA(t,r,n),o=t[a],s=i[a];return!s||!o?null:{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}},cb={scaleX:1,scaleY:1},pye=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:o}=e;const s=(t=i[n])!=null?t:r;if(!s)return null;if(a===n){const c=i[o];return c?{x:0,y:n<o?c.top+c.height-(s.top+s.height):c.top-s.top,...cb}:null}const u=mye(i,a,n);return a>n&&a<=o?{x:0,y:-s.height-u,...cb}:a<n&&a>=o?{x:0,y:s.height+u,...cb}:{x:0,y:0,...cb}};function mye(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const n$="Sortable",r$=vt.createContext({activeIndex:-1,containerId:n$,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:t$,disabled:{draggable:!1,droppable:!1}});function gye(e){let{children:t,id:n,items:r,strategy:a=t$,disabled:i=!1}=e;const{active:o,dragOverlay:s,droppableRects:u,over:c,measureDroppableContainers:f}=sye(),h=yg(n$,n),m=s.rect!==null,g=R.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),w=o!=null,v=o?g.indexOf(o.id):-1,_=c?g.indexOf(c.id):-1,x=R.useRef(g),S=!fye(g,x.current),E=_!==-1&&v===-1||S,C=hye(i);Bs(()=>{S&&w&&f(g)},[S,g,w,f]),R.useEffect(()=>{x.current=g},[g]);const A=R.useMemo(()=>({activeIndex:v,containerId:h,disabled:C,disableTransforms:E,items:g,overIndex:_,useDragOverlay:m,sortedRects:dye(g,u),strategy:a}),[v,h,C.draggable,C.droppable,E,g,_,u,m,a]);return vt.createElement(r$.Provider,{value:A},t)}const yye=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return gA(n,r,a).indexOf(t)},bye=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:o,previousItems:s,previousContainerId:u,transition:c}=e;return!c||!r||s!==i&&a===o?!1:n?!0:o!==a&&t===u},vye={duration:200,easing:"ease"},a$="transform",wye=g0.Transition.toString({property:a$,duration:0,easing:"linear"}),_ye={roleDescription:"sortable"};function xye(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,o]=R.useState(null),s=R.useRef(n);return Bs(()=>{if(!t&&n!==s.current&&r.current){const u=a.current;if(u){const c=Vh(r.current,{ignoreTransform:!0}),f={x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height};(f.x||f.y)&&o(f)}}n!==s.current&&(s.current=n)},[t,n,r,a]),R.useEffect(()=>{i&&o(null)},[i]),i}function Sye(e){let{animateLayoutChanges:t=bye,attributes:n,disabled:r,data:a,getNewIndex:i=yye,id:o,strategy:s,resizeObserverConfig:u,transition:c=vye}=e;const{items:f,containerId:h,activeIndex:m,disabled:g,disableTransforms:w,sortedRects:v,overIndex:_,useDragOverlay:x,strategy:S}=R.useContext(r$),E=Eye(r,g),C=f.indexOf(o),A=R.useMemo(()=>({sortable:{containerId:h,index:C,items:f},...a}),[h,a,C,f]),O=R.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:I,node:D,isOver:B,setNodeRef:K}=cye({id:o,data:A,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...u}}),{active:Q,activatorEvent:F,activeNodeRect:W,attributes:U,setNodeRef:he,listeners:ae,isDragging:re,over:ee,setActivatorNodeRef:se,transform:V}=oye({id:o,data:A,attributes:{..._ye,...n},disabled:E.draggable}),X=z0e(K,he),Y=!!Q,ne=Y&&!w&&ub(m)&&ub(_),be=!x&&re,Ee=be&&ne?V:null,Pe=ne?Ee??(s??S)({rects:v,activeNodeRect:W,activeIndex:m,overIndex:_,index:C}):null,Re=ub(m)&&ub(_)?i({id:o,items:f,activeIndex:m,overIndex:_}):C,Te=Q==null?void 0:Q.id,He=R.useRef({activeId:Te,items:f,newIndex:Re,containerId:h}),it=f!==He.current.items,Ie=t({active:Q,containerId:h,isDragging:re,isSorting:Y,id:o,index:C,items:f,newIndex:He.current.newIndex,previousItems:He.current.items,previousContainerId:He.current.containerId,transition:c,wasDragging:He.current.activeId!=null}),Ae=xye({disabled:!Ie,index:C,node:D,rect:I});return R.useEffect(()=>{Y&&He.current.newIndex!==Re&&(He.current.newIndex=Re),h!==He.current.containerId&&(He.current.containerId=h),f!==He.current.items&&(He.current.items=f)},[Y,Re,h,f]),R.useEffect(()=>{if(Te===He.current.activeId)return;if(Te!=null&&He.current.activeId==null){He.current.activeId=Te;return}const ke=setTimeout(()=>{He.current.activeId=Te},50);return()=>clearTimeout(ke)},[Te]),{active:Q,activeIndex:m,attributes:U,data:A,rect:I,index:C,newIndex:Re,items:f,isOver:B,isSorting:Y,isDragging:re,listeners:ae,node:D,overIndex:_,over:ee,setNodeRef:X,setActivatorNodeRef:se,setDroppableNodeRef:K,setDraggableNodeRef:he,transform:Ae??Pe,transition:z()};function z(){if(Ae||it&&He.current.newIndex===C)return wye;if(!(be&&!dA(F)||!c)&&(Y||Ie))return g0.Transition.toString({...c,property:a$})}}function Eye(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Lv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Cye=[Vn.Down,Vn.Right,Vn.Up,Vn.Left],kye=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:s}}=t;if(Cye.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=a.get(h.id);if(m)switch(e.code){case Vn.Down:r.top<m.top&&u.push(h);break;case Vn.Up:r.top>m.top&&u.push(h);break;case Vn.Left:r.left>m.left&&u.push(h);break;case Vn.Right:r.left<m.left&&u.push(h);break}});const c=age({collisionRect:r,droppableRects:a,droppableContainers:u});let f=U9(c,"id");if(f===(o==null?void 0:o.id)&&c.length>1&&(f=c[1].id),f!=null){const h=i.get(n.id),m=i.get(f),g=m?a.get(m.id):null,w=m==null?void 0:m.node.current;if(w&&g&&h&&m){const _=p1(w).some((O,I)=>s[I]!==O),x=i$(h,m),S=Aye(h,m),E=_||!x?{x:0,y:0}:{x:S?r.width-g.width:0,y:S?r.height-g.height:0},C={x:g.left,y:g.top};return E.x&&E.y?C:m0(C,E)}}}};function i$(e,t){return!Lv(e)||!Lv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Aye(e,t){return!Lv(e)||!Lv(t)||!i$(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Tye=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:o,transition:s,isDragging:u}=Sye({id:e,disabled:n}),c={transform:g0.Transform.toString(o),transition:s,zIndex:u?10:void 0,opacity:n?.5:1};return y.jsxs("div",{ref:i,style:c,...r,...a,className:Dt("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",u&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[y.jsx(yq,{className:Dt("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),y.jsx(Ln,{className:Dt("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},Rye=()=>{const{setGlobalModelSortOrder:e,getGloballyEnabledAndOrderedModels:t,dbProviderConfigs:n,globalModelSortOrder:r,isLoading:a}=Ai(Hn(m=>({setGlobalModelSortOrder:m.setGlobalModelSortOrder,getGloballyEnabledAndOrderedModels:m.getGloballyEnabledAndOrderedModels,dbProviderConfigs:m.dbProviderConfigs,globalModelSortOrder:m.globalModelSortOrder,isLoading:m.isLoading}))),[i,o]=R.useState(""),s=R.useMemo(()=>t?t():[],[t,n,r]),u=R.useMemo(()=>{if(!i.trim())return s;const m=i.toLowerCase();return s.filter(g=>g.name.toLowerCase().includes(m)||g.providerName.toLowerCase().includes(m)||g.id.toLowerCase().includes(m))},[s,i]),c=R.useMemo(()=>u.map(m=>m.id),[u]),f=R.useCallback(m=>{const{active:g,over:w}=m;if(w&&g.id!==w.id){const v=s.map(C=>C.id),_=g.id,x=w.id,S=v.indexOf(_),E=v.indexOf(x);if(S!==-1&&E!==-1){const C=gA(v,S,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[s,e]),h=tge(V6(mA),V6(hA,{coordinateGetter:kye}));return a?y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx(Mr,{className:"h-8 w-1/3"}),y.jsx(Mr,{className:"h-6 w-1/2"}),y.jsx(Mr,{className:"h-64 w-full"})]}):y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),y.jsx(jv,{}),y.jsxs("div",{className:"space-y-3",children:[y.jsx(Ln,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),y.jsxs("div",{className:"relative",children:[y.jsx(Xv,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(kr,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:m=>o(m.target.value),className:"pl-8 w-full",disabled:a})]}),y.jsx(sg,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:u.length>0?y.jsx(rye,{sensors:h,collisionDetection:rge,onDragEnd:f,children:y.jsx(gye,{items:c,strategy:pye,children:u.map(m=>y.jsx(Tye,{id:m.id,name:`${m.name} (${m.providerName})`},m.id))})}):y.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},Nye=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=ga(Hn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Git User Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set your user name and email for Git commits made within the VFS. This is required for committing changes."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 rounded-lg border p-4 shadow-sm bg-card",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(Ln,{htmlFor:"git-user-name",children:"Git User Name"}),y.jsx(kr,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(Ln,{htmlFor:"git-user-email",children:"Git User Email"}),y.jsx(kr,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})]})})},Iye=vt.memo(Nye),Oye=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,isLoading:a}=Wl(Hn(A=>({syncRepos:A.syncRepos,addSyncRepo:A.addSyncRepo,updateSyncRepo:A.updateSyncRepo,deleteSyncRepo:A.deleteSyncRepo,isLoading:A.isLoading}))),[i,o]=R.useState(!1),[s,u]=R.useState(null),[c,f]=R.useState({name:"",remoteUrl:"",branch:"main"}),[h,m]=R.useState(!1),[g,w]=R.useState({}),v=R.useCallback(()=>{f({name:"",remoteUrl:"",branch:"main"}),o(!1),u(null),m(!1)},[]),_=R.useCallback((A,O)=>{f(I=>({...I,[A]:O}))},[]),x=R.useCallback(async()=>{var A,O,I,D;if(!((A=c.name)!=null&&A.trim())||!((O=c.remoteUrl)!=null&&O.trim())){dt.error("Repository Name and Remote URL are required.");return}m(!0);try{s?await n(s,{name:c.name.trim(),remoteUrl:c.remoteUrl.trim(),branch:((I=c.branch)==null?void 0:I.trim())||"main"}):await t({name:c.name.trim(),remoteUrl:c.remoteUrl.trim(),branch:((D=c.branch)==null?void 0:D.trim())||"main"}),v()}catch(B){console.error("Failed to save sync repo:",B)}finally{m(!1)}},[c,s,t,n,v]),S=A=>{u(A.id),f({name:A.name,remoteUrl:A.remoteUrl,branch:A.branch}),o(!1)},E=R.useCallback(async(A,O)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${O}"? This will unlink it from any conversations.`)){w(I=>({...I,[A]:!0}));try{await r(A),s===A&&v()}catch(I){console.error("Failed to delete sync repo:",I)}finally{w(I=>({...I,[A]:!1}))}}},[r,s,v]),C=()=>{var A,O;return y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:s?"Edit Sync Repository":"Add New Sync Repository"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(Ln,{htmlFor:"repo-name",children:"Name"}),y.jsx(kr,{id:"repo-name",value:c.name||"",onChange:I=>_("name",I.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:h})]}),y.jsxs("div",{children:[y.jsx(Ln,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),y.jsx(kr,{id:"repo-url",type:"url",value:c.remoteUrl||"",onChange:I=>_("remoteUrl",I.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:h})]}),y.jsxs("div",{children:[y.jsx(Ln,{htmlFor:"repo-branch",children:"Branch"}),y.jsx(kr,{id:"repo-branch",value:c.branch||"",onChange:I=>_("branch",I.target.value),placeholder:"main",required:!0,className:"mt-1",disabled:h})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Ut,{variant:"ghost",size:"sm",onClick:v,disabled:h,type:"button",children:[y.jsx(zs,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Ut,{variant:"secondary",size:"sm",onClick:x,disabled:h||!((A=c.name)!=null&&A.trim())||!((O=c.remoteUrl)!=null&&O.trim()),type:"button",children:[h&&y.jsx(Jn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(sC,{className:"h-4 w-4 mr-1"})," ",h?"Saving...":"Save Repository"]})]})]})};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area."})]}),!i&&!s&&y.jsxs(Ut,{onClick:()=>o(!0),variant:"outline",className:"w-full mb-4",disabled:a,children:[y.jsx(Zv,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(i||s)&&C(),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),a&&!i&&!s?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"})]}):e.length===0&&!i&&!s?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(c1,{children:[y.jsx(d1,{children:y.jsxs(Vi,{children:[y.jsx(ia,{children:"Name"}),y.jsx(ia,{children:"Remote URL"}),y.jsx(ia,{children:"Branch"}),y.jsx(ia,{className:"text-right",children:"Actions"})]})}),y.jsx(f1,{children:e.map(A=>{const O=g[A.id],I=s===A.id;return y.jsxs(Vi,{className:I?"bg-muted/50":"",children:[y.jsx(br,{className:"font-medium",children:A.name}),y.jsx(br,{className:"text-xs truncate max-w-xs",children:A.remoteUrl}),y.jsx(br,{children:A.branch}),y.jsxs(br,{className:"text-right",children:[y.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>S(A),className:"h-8 w-8 mr-1","aria-label":`Edit repo ${A.name}`,disabled:O||h||!!s,children:y.jsx(oC,{className:"h-4 w-4"})}),y.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>E(A.id,A.name),className:"text-red-600 hover:text-red-700 h-8 w-8","aria-label":`Delete repo ${A.name}`,disabled:O||h,children:O?y.jsx(Jn,{className:"h-4 w-4 animate-spin"}):y.jsx(Hu,{className:"h-4 w-4"})})]})]},A.id)})})]})})]})]})},Dye=vt.memo(Oye),jye=()=>{const e=Dt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsxs(DE,{defaultValue:"config",className:"flex flex-col h-full",children:[y.jsxs(jE,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(uo,{value:"config",className:e,children:"User Config"}),y.jsx(uo,{value:"sync",className:e,children:"Sync Repositories"})]}),y.jsxs("div",{className:"flex-grow mt-4 overflow-y-auto",children:[y.jsx(co,{value:"config",children:y.jsx(Iye,{})}),y.jsx(co,{value:"sync",children:y.jsx(Dye,{})})]})]})},Mye=vt.memo(jye),o$=R.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=ga(Hn(s=>({enableAdvancedSettings:s.enableAdvancedSettings}))),{enableApiKeyManagement:r}=Ai(Hn(s=>({enableApiKeyManagement:s.enableApiKeyManagement}))),{customSettingsTabs:a}=f0(Hn(s=>({customSettingsTabs:s.modSettingsTabs||[]}))),i=s=>{s||t()},o=Dt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(Zw,{open:e,onOpenChange:i,children:y.jsxs(Yw,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[y.jsxs(Xw,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsx(Qw,{children:"Settings"}),y.jsx(e1,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),y.jsxs(DE,{defaultValue:"general",className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(jE,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(uo,{value:"general",className:o,children:"General"}),y.jsx(uo,{value:"providers",className:o,children:"Providers & Models"}),n&&y.jsx(uo,{value:"assistant",className:o,children:"Assistant"}),y.jsx(uo,{value:"git",className:o,children:"Git"}),y.jsx(uo,{value:"data",className:o,children:"Data"}),y.jsx(uo,{value:"mods",className:o,children:"Mods"}),a.map(s=>y.jsx(uo,{value:s.id,className:o,children:s.title},s.id))]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(co,{value:"general",children:y.jsx(v0e,{})}),y.jsx(co,{value:"providers",className:"flex flex-col data-[state=inactive]:hidden",children:y.jsxs(DE,{defaultValue:"model-order",className:"flex flex-col",children:[y.jsxs(jE,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(uo,{value:"model-order",className:o,children:"Global Model Order"}),y.jsx(uo,{value:"provider-list",className:o,children:"Provider List & Config"}),r&&y.jsx(uo,{value:"api-keys",className:o,children:"API Keys"})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx(co,{value:"model-order",children:y.jsx(Rye,{})}),y.jsx(co,{value:"provider-list",children:y.jsx(B0e,{})}),r&&y.jsx(co,{value:"api-keys",children:y.jsx(S0e,{})})]})]})}),n&&y.jsx(co,{value:"assistant",children:y.jsx(_0e,{})}),y.jsx(co,{value:"git",className:"h-full",children:y.jsx(Mye,{})}),y.jsx(co,{value:"data",children:y.jsx(C0e,{})}),y.jsx(co,{value:"mods",children:y.jsx(I0e,{})}),a.map(s=>y.jsx(co,{value:s.id,children:vt.isValidElement(s.component)?s.component:typeof s.component=="function"?y.jsx(s.component,{}):null},s.id))]})]}),y.jsx(Jw,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:y.jsx(Ut,{variant:"outline",onClick:()=>i(!1),children:"Close"})})]})})});o$.displayName="SettingsModalComponent";const Pye=o$,Fye=()=>{const e=Uo(n=>n.toggleChatControlPanel),t=()=>{e("settingsModal")};return y.jsx(Ut,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Open Settings",className:"h-8 w-8",children:y.jsx(zO,{className:"h-4 w-4"})})},Lye=()=>{const e=Uo(n=>n.toggleChatControlPanel),t=()=>{e("settingsModal")};return y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8","aria-label":"Open Settings",children:y.jsx(zO,{className:"h-4 w-4"})})}),y.jsx(On,{side:"right",children:"Settings"})]})})},$ye=()=>{const e=ma(r=>r.registerChatControl),{isModalOpen:t,toggleModal:n}=Uo(Hn(r=>({isModalOpen:r.isChatControlPanelOpen.settingsModal??!1,toggleModal:r.toggleChatControlPanel})));return vt.useEffect(()=>e({id:"core-settings-trigger",status:()=>"ready",panel:"sidebar-footer",renderer:()=>y.jsx(Fye,{}),iconRenderer:()=>y.jsx(Lye,{}),show:()=>!0,order:100,settingsConfig:{tabId:"mainSettingsModal",title:"Settings"},settingsRenderer:()=>t?y.jsx(Pye,{isOpen:t,onClose:()=>n("settingsModal",!1)}):null}),[e,t,n]),null},s$=({isCollapsed:e,onClick:t})=>y.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>t(),className:"h-8 w-8","aria-label":e?"Open sidebar":"Close sidebar",children:e?y.jsx(Dq,{className:"h-4 w-4"}):y.jsx(Iq,{className:"h-4 w-4"})}),Bye=()=>{const{isSidebarCollapsed:e,toggleSidebar:t}=Uo(Hn(n=>({isSidebarCollapsed:n.isSidebarCollapsed,toggleSidebar:n.toggleSidebar})));return y.jsx(s$,{isCollapsed:e,onClick:t})},zye=()=>{const{isSidebarCollapsed:e,toggleSidebar:t}=Uo(Hn(n=>({isSidebarCollapsed:n.isSidebarCollapsed,toggleSidebar:n.toggleSidebar})));return y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(s$,{isCollapsed:e,onClick:t})}),y.jsx(On,{side:"right",children:e?"Open Sidebar":"Close Sidebar"})]})})},Uye=()=>{const e=ma(t=>t.registerChatControl);return vt.useEffect(()=>e({id:"core-sidebar-toggle",status:()=>"ready",panel:"sidebar-footer",renderer:()=>y.jsx(Bye,{}),iconRenderer:()=>y.jsx(zye,{}),show:()=>!0,order:10}),[e]),null};var aO=1,qye=.9,Hye=.8,Vye=.17,S2=.1,E2=.999,Gye=.9999,Wye=.99,Kye=/[\\\/_+.#"@\[\(\{&]/,Zye=/[\\\/_+.#"@\[\(\{&]/g,Yye=/[\s-]/,l$=/[\s-]/g;function KE(e,t,n,r,a,i,o){if(i===t.length)return a===e.length?aO:Wye;var s=`${a},${i}`;if(o[s]!==void 0)return o[s];for(var u=r.charAt(i),c=n.indexOf(u,a),f=0,h,m,g,w;c>=0;)h=KE(e,t,n,r,c+1,i+1,o),h>f&&(c===a?h*=aO:Kye.test(e.charAt(c-1))?(h*=Hye,g=e.slice(a,c-1).match(Zye),g&&a>0&&(h*=Math.pow(E2,g.length))):Yye.test(e.charAt(c-1))?(h*=qye,w=e.slice(a,c-1).match(l$),w&&a>0&&(h*=Math.pow(E2,w.length))):(h*=Vye,a>0&&(h*=Math.pow(E2,c-a))),e.charAt(c)!==t.charAt(i)&&(h*=Gye)),(h<S2&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(m=KE(e,t,n,r,c+1,i+2,o),m*S2>h&&(h=m*S2)),h>f&&(f=h),c=n.indexOf(u,c+1);return o[s]=f,f}function iO(e){return e.toLowerCase().replace(l$," ")}function Xye(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,KE(e,t,iO(e),iO(t),0,0,{})}var um='[cmdk-group=""]',C2='[cmdk-group-items=""]',Jye='[cmdk-group-heading=""]',u$='[cmdk-item=""]',oO=`${u$}:not([aria-disabled="true"])`,ZE="cmdk-item-select",jf="data-value",Qye=(e,t,n)=>Xye(e,t,n),c$=R.createContext(void 0),bg=()=>R.useContext(c$),d$=R.createContext(void 0),yA=()=>R.useContext(d$),f$=R.createContext(void 0),h$=R.forwardRef((e,t)=>{let n=Mf(()=>{var Y,ne;return{search:"",value:(ne=(Y=e.value)!=null?Y:e.defaultValue)!=null?ne:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Mf(()=>new Set),a=Mf(()=>new Map),i=Mf(()=>new Map),o=Mf(()=>new Set),s=p$(e),{label:u,children:c,value:f,onValueChange:h,filter:m,shouldFilter:g,loop:w,disablePointerSelection:v=!1,vimBindings:_=!0,...x}=e,S=Ta(),E=Ta(),C=Ta(),A=R.useRef(null),O=cbe();yd(()=>{if(f!==void 0){let Y=f.trim();n.current.value=Y,I.emit()}},[f]),yd(()=>{O(6,W)},[]);let I=R.useMemo(()=>({subscribe:Y=>(o.current.add(Y),()=>o.current.delete(Y)),snapshot:()=>n.current,setState:(Y,ne,be)=>{var Ee,De,Pe,Re;if(!Object.is(n.current[Y],ne)){if(n.current[Y]=ne,Y==="search")F(),K(),O(1,Q);else if(Y==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Te=document.getElementById(C);Te?Te.focus():(Ee=document.getElementById(S))==null||Ee.focus()}if(O(7,()=>{var Te;n.current.selectedItemId=(Te=U())==null?void 0:Te.id,I.emit()}),be||O(5,W),((De=s.current)==null?void 0:De.value)!==void 0){let Te=ne??"";(Re=(Pe=s.current).onValueChange)==null||Re.call(Pe,Te);return}}I.emit()}},emit:()=>{o.current.forEach(Y=>Y())}}),[]),D=R.useMemo(()=>({value:(Y,ne,be)=>{var Ee;ne!==((Ee=i.current.get(Y))==null?void 0:Ee.value)&&(i.current.set(Y,{value:ne,keywords:be}),n.current.filtered.items.set(Y,B(ne,be)),O(2,()=>{K(),I.emit()}))},item:(Y,ne)=>(r.current.add(Y),ne&&(a.current.has(ne)?a.current.get(ne).add(Y):a.current.set(ne,new Set([Y]))),O(3,()=>{F(),K(),n.current.value||Q(),I.emit()}),()=>{i.current.delete(Y),r.current.delete(Y),n.current.filtered.items.delete(Y);let be=U();O(4,()=>{F(),(be==null?void 0:be.getAttribute("id"))===Y&&Q(),I.emit()})}),group:Y=>(a.current.has(Y)||a.current.set(Y,new Set),()=>{i.current.delete(Y),a.current.delete(Y)}),filter:()=>s.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:A}),[]);function B(Y,ne){var be,Ee;let De=(Ee=(be=s.current)==null?void 0:be.filter)!=null?Ee:Qye;return Y?De(Y,n.current.search,ne):0}function K(){if(!n.current.search||s.current.shouldFilter===!1)return;let Y=n.current.filtered.items,ne=[];n.current.filtered.groups.forEach(Ee=>{let De=a.current.get(Ee),Pe=0;De.forEach(Re=>{let Te=Y.get(Re);Pe=Math.max(Te,Pe)}),ne.push([Ee,Pe])});let be=A.current;he().sort((Ee,De)=>{var Pe,Re;let Te=Ee.getAttribute("id"),He=De.getAttribute("id");return((Pe=Y.get(He))!=null?Pe:0)-((Re=Y.get(Te))!=null?Re:0)}).forEach(Ee=>{let De=Ee.closest(C2);De?De.appendChild(Ee.parentElement===De?Ee:Ee.closest(`${C2} > *`)):be.appendChild(Ee.parentElement===be?Ee:Ee.closest(`${C2} > *`))}),ne.sort((Ee,De)=>De[1]-Ee[1]).forEach(Ee=>{var De;let Pe=(De=A.current)==null?void 0:De.querySelector(`${um}[${jf}="${encodeURIComponent(Ee[0])}"]`);Pe==null||Pe.parentElement.appendChild(Pe)})}function Q(){let Y=he().find(be=>be.getAttribute("aria-disabled")!=="true"),ne=Y==null?void 0:Y.getAttribute(jf);I.setState("value",ne||void 0)}function F(){var Y,ne,be,Ee;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let De=0;for(let Pe of r.current){let Re=(ne=(Y=i.current.get(Pe))==null?void 0:Y.value)!=null?ne:"",Te=(Ee=(be=i.current.get(Pe))==null?void 0:be.keywords)!=null?Ee:[],He=B(Re,Te);n.current.filtered.items.set(Pe,He),He>0&&De++}for(let[Pe,Re]of a.current)for(let Te of Re)if(n.current.filtered.items.get(Te)>0){n.current.filtered.groups.add(Pe);break}n.current.filtered.count=De}function W(){var Y,ne,be;let Ee=U();Ee&&(((Y=Ee.parentElement)==null?void 0:Y.firstChild)===Ee&&((be=(ne=Ee.closest(um))==null?void 0:ne.querySelector(Jye))==null||be.scrollIntoView({block:"nearest"})),Ee.scrollIntoView({block:"nearest"}))}function U(){var Y;return(Y=A.current)==null?void 0:Y.querySelector(`${u$}[aria-selected="true"]`)}function he(){var Y;return Array.from(((Y=A.current)==null?void 0:Y.querySelectorAll(oO))||[])}function ae(Y){let ne=he()[Y];ne&&I.setState("value",ne.getAttribute(jf))}function re(Y){var ne;let be=U(),Ee=he(),De=Ee.findIndex(Re=>Re===be),Pe=Ee[De+Y];(ne=s.current)!=null&&ne.loop&&(Pe=De+Y<0?Ee[Ee.length-1]:De+Y===Ee.length?Ee[0]:Ee[De+Y]),Pe&&I.setState("value",Pe.getAttribute(jf))}function ee(Y){let ne=U(),be=ne==null?void 0:ne.closest(um),Ee;for(;be&&!Ee;)be=Y>0?lbe(be,um):ube(be,um),Ee=be==null?void 0:be.querySelector(oO);Ee?I.setState("value",Ee.getAttribute(jf)):re(Y)}let se=()=>ae(he().length-1),V=Y=>{Y.preventDefault(),Y.metaKey?se():Y.altKey?ee(1):re(1)},X=Y=>{Y.preventDefault(),Y.metaKey?ae(0):Y.altKey?ee(-1):re(-1)};return R.createElement(Jt.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:Y=>{var ne;(ne=x.onKeyDown)==null||ne.call(x,Y);let be=Y.nativeEvent.isComposing||Y.keyCode===229;if(!(Y.defaultPrevented||be))switch(Y.key){case"n":case"j":{_&&Y.ctrlKey&&V(Y);break}case"ArrowDown":{V(Y);break}case"p":case"k":{_&&Y.ctrlKey&&X(Y);break}case"ArrowUp":{X(Y);break}case"Home":{Y.preventDefault(),ae(0);break}case"End":{Y.preventDefault(),se();break}case"Enter":{Y.preventDefault();let Ee=U();if(Ee){let De=new Event(ZE);Ee.dispatchEvent(De)}}}}},R.createElement("label",{"cmdk-label":"",htmlFor:D.inputId,id:D.labelId,style:fbe},u),y1(e,Y=>R.createElement(d$.Provider,{value:I},R.createElement(c$.Provider,{value:D},Y))))}),ebe=R.forwardRef((e,t)=>{var n,r;let a=Ta(),i=R.useRef(null),o=R.useContext(f$),s=bg(),u=p$(e),c=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;yd(()=>{if(!c)return s.item(a,o==null?void 0:o.id)},[c]);let f=m$(a,i,[e.value,e.children,i],e.keywords),h=yA(),m=cc(O=>O.value&&O.value===f.current),g=cc(O=>c||s.filter()===!1?!0:O.search?O.filtered.items.get(a)>0:!0);R.useEffect(()=>{let O=i.current;if(!(!O||e.disabled))return O.addEventListener(ZE,w),()=>O.removeEventListener(ZE,w)},[g,e.onSelect,e.disabled]);function w(){var O,I;v(),(I=(O=u.current).onSelect)==null||I.call(O,f.current)}function v(){h.setState("value",f.current,!0)}if(!g)return null;let{disabled:_,value:x,onSelect:S,forceMount:E,keywords:C,...A}=e;return R.createElement(Jt.div,{ref:Ol(i,t),...A,id:a,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!m,"data-disabled":!!_,"data-selected":!!m,onPointerMove:_||s.getDisablePointerSelection()?void 0:v,onClick:_?void 0:w},e.children)}),tbe=R.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,o=Ta(),s=R.useRef(null),u=R.useRef(null),c=Ta(),f=bg(),h=cc(g=>a||f.filter()===!1?!0:g.search?g.filtered.groups.has(o):!0);yd(()=>f.group(o),[]),m$(o,s,[e.value,e.heading,u]);let m=R.useMemo(()=>({id:o,forceMount:a}),[a]);return R.createElement(Jt.div,{ref:Ol(s,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&R.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),y1(e,g=>R.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},R.createElement(f$.Provider,{value:m},g))))}),nbe=R.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=R.useRef(null),i=cc(o=>!o.search);return!n&&!i?null:R.createElement(Jt.div,{ref:Ol(a,t),...r,"cmdk-separator":"",role:"separator"})}),rbe=R.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=yA(),o=cc(c=>c.search),s=cc(c=>c.selectedItemId),u=bg();return R.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),R.createElement(Jt.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":s,id:u.inputId,type:"text",value:a?e.value:o,onChange:c=>{a||i.setState("search",c.target.value),n==null||n(c.target.value)}})}),abe=R.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=R.useRef(null),o=R.useRef(null),s=cc(c=>c.selectedItemId),u=bg();return R.useEffect(()=>{if(o.current&&i.current){let c=o.current,f=i.current,h,m=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=c.offsetHeight;f.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return m.observe(c),()=>{cancelAnimationFrame(h),m.unobserve(c)}}},[]),R.createElement(Jt.div,{ref:Ol(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:u.listId},y1(e,c=>R.createElement("div",{ref:Ol(o,u.listInnerRef),"cmdk-list-sizer":""},c)))}),ibe=R.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:o,...s}=e;return R.createElement(wL,{open:n,onOpenChange:r},R.createElement(_L,{container:o},R.createElement(xL,{"cmdk-overlay":"",className:a}),R.createElement(SL,{"aria-label":e.label,"cmdk-dialog":"",className:i},R.createElement(h$,{ref:t,...s}))))}),obe=R.forwardRef((e,t)=>cc(n=>n.filtered.count===0)?R.createElement(Jt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),sbe=R.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return R.createElement(Jt.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},y1(e,o=>R.createElement("div",{"aria-hidden":!0},o)))}),Gh=Object.assign(h$,{List:abe,Item:ebe,Input:rbe,Group:tbe,Separator:nbe,Dialog:ibe,Empty:obe,Loading:sbe});function lbe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function ube(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function p$(e){let t=R.useRef(e);return yd(()=>{t.current=e}),t}var yd=typeof window>"u"?R.useEffect:R.useLayoutEffect;function Mf(e){let t=R.useRef();return t.current===void 0&&(t.current=e()),t}function cc(e){let t=yA(),n=()=>e(t.snapshot());return R.useSyncExternalStore(t.subscribe,n,n)}function m$(e,t,n,r=[]){let a=R.useRef(),i=bg();return yd(()=>{var o;let s=(()=>{var c;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(c=f.current.textContent)==null?void 0:c.trim():a.current}})(),u=r.map(c=>c.trim());i.value(e,s,u),(o=t.current)==null||o.setAttribute(jf,s),a.current=s}),a}var cbe=()=>{let[e,t]=R.useState(),n=Mf(()=>new Map);return yd(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function dbe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function y1({asChild:e,children:t},n){return e&&R.isValidElement(t)?R.cloneElement(dbe(t),{ref:t.ref},n(t.props.children)):n(t)}var fbe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function hbe({className:e,...t}){return y.jsx(Gh,{"data-slot":"command",className:Dt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function pbe({className:e,...t}){return y.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[y.jsx(Xv,{className:"size-4 shrink-0 opacity-50"}),y.jsx(Gh.Input,{"data-slot":"command-input",className:Dt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function mbe({className:e,...t}){return y.jsx(Gh.List,{"data-slot":"command-list",className:Dt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function gbe({...e}){return y.jsx(Gh.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function ybe({className:e,...t}){return y.jsx(Gh.Group,{"data-slot":"command-group",className:Dt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function bbe({className:e,...t}){return y.jsx(Gh.Item,{"data-slot":"command-item",className:Dt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}var b1="Popover",[g$,t_e]=di(b1,[dc]),vg=dc(),[vbe,Sc]=g$(b1),y$=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=vg(t),u=R.useRef(null),[c,f]=R.useState(!1),[h,m]=Wo({prop:r,defaultProp:a??!1,onChange:i,caller:b1});return y.jsx(nw,{...s,children:y.jsx(vbe,{scope:t,contentId:Ta(),triggerRef:u,open:h,onOpenChange:m,onOpenToggle:R.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:R.useCallback(()=>f(!0),[]),onCustomAnchorRemove:R.useCallback(()=>f(!1),[]),modal:o,children:n})})};y$.displayName=b1;var b$="PopoverAnchor",wbe=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Sc(b$,n),i=vg(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return R.useEffect(()=>(o(),()=>s()),[o,s]),y.jsx(_0,{...i,...r,ref:t})});wbe.displayName=b$;var v$="PopoverTrigger",w$=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Sc(v$,n),i=vg(n),o=_n(t,a.triggerRef),s=y.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":C$(a.open),...r,ref:o,onClick:Ft(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:y.jsx(_0,{asChild:!0,...i,children:s})});w$.displayName=v$;var bA="PopoverPortal",[_be,xbe]=g$(bA,{forceMount:void 0}),_$=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=Sc(bA,t);return y.jsx(_be,{scope:t,forceMount:n,children:y.jsx(Ia,{present:n||i.open,children:y.jsx(Eh,{asChild:!0,container:a,children:r})})})};_$.displayName=bA;var bh="PopoverContent",x$=R.forwardRef((e,t)=>{const n=xbe(bh,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=Sc(bh,e.__scopePopover);return y.jsx(Ia,{present:r||i.open,children:i.modal?y.jsx(Ebe,{...a,ref:t}):y.jsx(Cbe,{...a,ref:t})})});x$.displayName=bh;var Sbe=qu("PopoverContent.RemoveScroll"),Ebe=R.forwardRef((e,t)=>{const n=Sc(bh,e.__scopePopover),r=R.useRef(null),a=_n(t,r),i=R.useRef(!1);return R.useEffect(()=>{const o=r.current;if(o)return Ww(o)},[]),y.jsx(ug,{as:Sbe,allowPinchZoom:!0,children:y.jsx(S$,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,c=s.button===2||u;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ft(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Cbe=R.forwardRef((e,t)=>{const n=Sc(bh,e.__scopePopover),r=R.useRef(!1),a=R.useRef(!1);return y.jsx(S$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),S$=R.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:f,...h}=e,m=Sc(bh,n),g=vg(n);return Vw(),y.jsx(lg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(_h,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:y.jsx(rw,{"data-state":C$(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),E$="PopoverClose",kbe=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Sc(E$,n);return y.jsx(Jt.button,{type:"button",...r,ref:t,onClick:Ft(e.onClick,()=>a.onOpenChange(!1))})});kbe.displayName=E$;var Abe="PopoverArrow",Tbe=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=vg(n);return y.jsx(aw,{...a,...r,ref:t})});Tbe.displayName=Abe;function C$(e){return e?"open":"closed"}var Rbe=y$,Nbe=w$,Ibe=_$,Obe=x$;function vA({...e}){return y.jsx(Rbe,{"data-slot":"popover",...e})}function wA({...e}){return y.jsx(Nbe,{"data-slot":"popover-trigger",...e})}function _A({className:e,align:t="center",sideOffset:n=4,...r}){return y.jsx(Ibe,{children:y.jsx(Obe,{"data-slot":"popover-content",align:t,sideOffset:n,className:Dt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function Dbe({options:e,value:t,onChange:n,placeholder:r="Select...",searchPlaceholder:a="Search...",emptyText:i="Nothing found.",triggerClassName:o,contentClassName:s,disabled:u=!1}){var m;const[c,f]=R.useState(!1),h=(m=e.find(g=>g.value===t))==null?void 0:m.label;return y.jsxs(vA,{open:c,onOpenChange:f,children:[y.jsx(wA,{asChild:!0,children:y.jsxs(Ut,{variant:"outline",role:"combobox","aria-expanded":c,className:Dt("w-[200px] justify-between",o),disabled:u,children:[h||r,y.jsx(Wv,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),y.jsx(_A,{className:Dt("w-[200px] p-0",s),children:y.jsxs(hbe,{children:[y.jsx(pbe,{placeholder:a}),y.jsxs(mbe,{children:[y.jsx(gbe,{children:i}),y.jsx(ybe,{children:e.map(g=>y.jsxs(bbe,{value:g.value,onSelect:w=>{n(w===t?"":w),f(!1)},children:[y.jsx(vo,{className:Dt("mr-2 h-4 w-4",t===g.value?"opacity-100":"opacity-0")}),g.label]},g.value))})]})]})})]})}const jbe=()=>{const{selectedModelId:e,selectModel:t,getGloballyEnabledAndOrderedModels:n,dbProviderConfigs:r,globalModelSortOrder:a,isLoading:i}=Ai(Hn(u=>({selectedModelId:u.selectedModelId,selectModel:u.selectModel,getGloballyEnabledAndOrderedModels:u.getGloballyEnabledAndOrderedModels,dbProviderConfigs:u.dbProviderConfigs,globalModelSortOrder:u.globalModelSortOrder,isLoading:u.isLoading}))),o=R.useMemo(()=>n?n():[],[n,r,a]),s=vt.useMemo(()=>o.map(u=>({value:u.id,label:`${u.name} (${u.providerName})`})),[o]);return i?y.jsx(Mr,{className:"h-10 w-[250px]"}):y.jsx(Dbe,{options:s,value:e??"",onChange:u=>t(u||null),placeholder:"Select Model...",searchPlaceholder:"Search models...",emptyText:"No models enabled.",triggerClassName:"h-10 w-full min-w-[200px] max-w-[300px] text-xs",contentClassName:"w-[--radix-popover-trigger-width]",disabled:i||s.length===0})},Mbe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},Pbe=()=>{const e=ma(n=>n.registerPromptControl),t=Ai(Hn(n=>({isLoading:n.isLoading,selectedModelId:n.selectedModelId})));return vt.useEffect(()=>e({id:"core-global-model-selector",triggerRenderer:()=>y.jsx(jbe,{}),show:()=>!0,getMetadata:()=>{const a=t.selectedModelId,{providerId:i,modelId:o}=Mbe(a);return{providerId:i,modelId:o}},order:10}),[e,t.isLoading,t.selectedModelId]),null},Fbe=({className:e})=>{const{temperature:t,setTemperature:n,topP:r,setTopP:a,maxTokens:i,setMaxTokens:o,topK:s,setTopK:u,presencePenalty:c,setPresencePenalty:f,frequencyPenalty:h,setFrequencyPenalty:m}=ga(Hn(D=>({temperature:D.temperature,setTemperature:D.setTemperature,topP:D.topP,setTopP:D.setTopP,maxTokens:D.maxTokens,setMaxTokens:D.setMaxTokens,topK:D.topK,setTopK:D.setTopK,presencePenalty:D.presencePenalty,setPresencePenalty:D.setPresencePenalty,frequencyPenalty:D.frequencyPenalty,setFrequencyPenalty:D.setFrequencyPenalty}))),[g,w]=R.useState(t),[v,_]=R.useState(r??1),[x,S]=R.useState(c??0),[E,C]=R.useState(h??0);R.useEffect(()=>w(t),[t]),R.useEffect(()=>_(r??1),[r]),R.useEffect(()=>S(c??0),[c]),R.useEffect(()=>C(h??0),[h]);const A=R.useCallback((D,B)=>{const K=B.target.value,Q=K===""?null:parseInt(K,10);(K===""||!isNaN(Q)&&Q!==null)&&D(Q)},[]),O=R.useCallback((D,B)=>{D(B[0])},[]),I=R.useCallback((D,B)=>{D(B[0])},[]);return y.jsxs("div",{className:Dt("space-y-4 p-4 w-80",e),children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(Ln,{htmlFor:"popover-temperature",className:"text-xs",children:["Temperature (",g.toFixed(2),")"]}),y.jsx(Bf,{id:"popover-temperature",min:0,max:1,step:.01,value:[g],onValueChange:D=>O(w,D),onValueCommit:D=>I(n,D)})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(Ln,{htmlFor:"popover-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),y.jsx(Bf,{id:"popover-top-p",min:0,max:1,step:.01,value:[v],onValueChange:D=>O(_,D),onValueCommit:D=>I(a,D)})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(Ln,{htmlFor:"popover-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(kr,{id:"popover-max-tokens",type:"number",placeholder:"Default",value:i??"",onChange:D=>A(o,D),min:"1",className:"h-8 text-xs"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(Ln,{htmlFor:"popover-top-k",className:"text-xs",children:"Top K"}),y.jsx(kr,{id:"popover-top-k",type:"number",placeholder:"Default",value:s??"",onChange:D=>A(u,D),min:"1",className:"h-8 text-xs"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(Ln,{htmlFor:"popover-presence-penalty",className:"text-xs",children:["Presence Penalty (",x.toFixed(2),")"]}),y.jsx(Bf,{id:"popover-presence-penalty",min:-2,max:2,step:.01,value:[x],onValueChange:D=>O(S,D),onValueCommit:D=>I(f,D)})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(Ln,{htmlFor:"popover-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",E.toFixed(2),")"]}),y.jsx(Bf,{id:"popover-frequency-penalty",min:-2,max:2,step:.01,value:[E],onValueChange:D=>O(C,D),onValueCommit:D=>I(m,D)})]})]})},Lbe=()=>{const e=ma(u=>u.registerPromptControl),{enableAdvancedSettings:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s}=ga(Hn(u=>({enableAdvancedSettings:u.enableAdvancedSettings,temperature:u.temperature,maxTokens:u.maxTokens,topP:u.topP,topK:u.topK,presencePenalty:u.presencePenalty,frequencyPenalty:u.frequencyPenalty})));return vt.useEffect(()=>e({id:"core-parameter-control",triggerRenderer:()=>y.jsxs(vA,{children:[y.jsx(wA,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full","aria-label":"Adjust AI Parameters",children:y.jsx(Zq,{className:"h-5 w-5"})})}),y.jsx(_A,{className:"w-auto p-0",side:"top",align:"end",children:y.jsx(Fbe,{})})]}),show:()=>t,getParameters:()=>{const f=ga.getState(),h={};return f.temperature!==.7&&(h.temperature=f.temperature),f.maxTokens!==null&&(h.max_tokens=f.maxTokens),f.topP!==null&&(h.top_p=f.topP),f.topK!==null&&(h.top_k=f.topK),f.presencePenalty!==0&&(h.presence_penalty=f.presencePenalty),f.frequencyPenalty!==0&&(h.frequency_penalty=f.frequencyPenalty),Object.keys(h).length>0?h:void 0},order:20}),[e,t,n,r,a,i,o,s]),null},k$=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],$be=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{if(typeof r.result=="string"){const a=r.result.split(",")[1];a?t(a):n(new Error("Failed to extract base64 content from data URL."))}else n(new Error("FileReader result is not a string."))},r.onerror=a=>n(a),r.readAsDataURL(e)}),Bbe=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{typeof r.result=="string"?t(r.result):n(new Error("FileReader result is not a string."))},r.onerror=a=>n(a),r.readAsText(e)}),zbe=()=>{const e=ma(i=>i.registerPromptControl),t=zu(i=>i.addAttachedFile),n=R.useRef(null),r=R.useCallback(()=>{var i;(i=n.current)==null||i.click()},[]),a=R.useCallback(async i=>{const o=i.target.files;if(o){const s=Array.from(o).map(async u=>{try{const c=u.type||"application/octet-stream",f=u.name.toLowerCase();if(c.startsWith("text/")||c==="application/json"||k$.some(m=>f.endsWith(m))){const m=await Bbe(u);t({source:"direct",name:u.name,type:c,size:u.size,contentText:m})}else{const m=await $be(u);t({source:"direct",name:u.name,type:c,size:u.size,contentBase64:m})}}catch(c){console.error(`Error reading file ${u.name}:`,c),dt.error(`Failed to read file "${u.name}": ${c instanceof Error?c.message:"Unknown error"}`)}});await Promise.all(s),i.target&&(i.target.value="")}},[t]);return vt.useEffect(()=>e({id:"core-file-control",triggerRenderer:()=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",multiple:!0}),y.jsx(Ut,{type:"button",variant:"ghost",size:"icon",onClick:r,className:"h-10 w-10 rounded-full","aria-label":"Attach file(s)",children:y.jsx(Mq,{className:"h-5 w-5"})})]}),show:()=>!0,order:30}),[e,t,r,a]),null},kl=Ul(ql((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,isVfsEnabledForItem:!1,vfsKey:null,configuredVfsKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,n&&dt.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const o=i.parentId??r.rootId??"";a[o]||(a[o]=r.childrenMap[o]?[...r.childrenMap[o]]:[]),a[o].includes(i.id)||a[o].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const o=i.parentId??r.rootId??"";if(r.childrenMap[o]&&(r.childrenMap[o]=r.childrenMap[o].filter(s=>s!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const s=Object.values(r.nodes).filter(u=>u.parentId===a).map(u=>u.id);s.length>0&&t()._removeNodes(s),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?t().initializeVFS(t().vfsKey||"default_fallback_key"):e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1})},setIsVfsEnabledForItem:n=>{console.log(`[VfsStore] Setting isVfsEnabledForItem to: ${n}`),e({isVfsEnabledForItem:n}),n?t().initializeVFS(t().vfsKey||"default_fallback_key"):(t().clearSelection(),t().vfsKey===t().configuredVfsKey&&e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1}))},setVfsKey:n=>{const r=t().configuredVfsKey;console.log(`[VfsStore] Setting vfsKey to: ${n} (Current configured: ${r})`),e({vfsKey:n}),n!==r?(console.log("[VfsStore] vfsKey changed. Resetting VFS state."),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1}),t().initializeVFS(n||"default_fallback_key")):n===r&&!t().fs&&(console.log("[VfsStore] vfsKey matches configured key, but fs not ready. Retrying initialization."),t().initializeVFS(n||"default_fallback_key"))},setConfiguredVfsKey:n=>{e({configuredVfsKey:n})},initializeVFS:async(n=t().vfsKey||"default_fallback_key")=>{if(!n){console.warn("[VfsStore] initializeVFS called without a valid vfsKey.");return}if(t().configuredVfsKey===n&&t().fs||t().loading){console.log(`[VfsStore] Initialization skipped for key "${n}" (already initialized or loading).`);return}const{_setLoading:r,_setError:a,_addNodes:i,_setFsInstance:o,setConfiguredVfsKey:s}=t();r(!0),a(null),o(null),console.log(`[VfsStore] Initializing VFS with key: ${n}`);try{const u=await Bne(n);if(!u)throw new Error("Filesystem backend initialization failed.");o(u),s(n),console.log(`[VfsStore] VFS instance set for key: ${n}`);const c="vfs-root";let f=t().nodes[c];try{await u.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(h){if(h.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw h}if(!f||f.path!=="/"){const h=Date.now();f={id:c,parentId:null,name:"",path:"/",type:"folder",createdAt:h,lastModified:h},i([f]),console.log("[VfsStore] Root node added/updated in state.")}e(h=>{h.rootId=f.id,h.currentParentId=f.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${f.id}`),await t().fetchNodes(f.id)}catch(u){console.error("Failed to initialize VFS:",u),a("Failed to initialize VFS."),o(null),s(null)}finally{r(!1)}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:o,nodes:s,rootId:u}=t();if(!o){a("Filesystem not initialized.");return}r(!0);try{const c=n?s[n]:s[u||""],f=c?c.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${f}`);const h=await kk(f);console.log(`[VfsStore] Fetched ${h.length} entries for ${f}`);const m=n??u??"",g=new Set(h.map(_=>_.path)),w=Object.values(s).filter(_=>_.parentId===n&&!g.has(_.path)).map(_=>_.id);w.length>0&&(console.log(`[VfsStore] Removing ${w.length} nodes.`),t()._removeNodes(w));const v=h.map(_=>{const x=Object.values(s).find(E=>E.path===_.path),S=Date.now();return{id:(x==null?void 0:x.id)||Po(),parentId:n,name:_.name,path:_.path,type:_.isDirectory?"folder":"file",size:_.size,createdAt:(x==null?void 0:x.createdAt)??S,lastModified:_.lastModified.getTime(),mimeType:_.isDirectory?void 0:_.mimeType}});v.length>0&&(console.log(`[VfsStore] Adding/Updating ${v.length} nodes.`),i(v)),e(_=>{const x=v.map(S=>S.id);(!_.childrenMap[m]||JSON.stringify(_.childrenMap[m].sort())!==JSON.stringify(x.sort()))&&(_.childrenMap[m]=x,console.log(`[VfsStore] Updated childrenMap for parent: ${m}`))})}catch(c){console.error("Failed to fetch VFS nodes:",c),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=Gn(n);if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i}=t(),o=Gn(n),s=r(o);s&&s.type==="folder"?(e(u=>{u.currentParentId=s.id}),t().childrenMap[s.id]||await a(s.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,_addNodes:c}=t();if(!o){i("Filesystem not initialized.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const f=n?s[n]:s[u||""],h=f?f.path:"/",m=Tb(h,r.trim());try{throw await o.promises.stat(m),new Error(`"${r.trim()}" already exists.`)}catch(_){if(_.code!=="ENOENT")throw _}await e8(m);const g=Date.now(),v={id:Po(),parentId:n,name:r.trim(),path:m,type:"folder",createdAt:g,lastModified:g};c([v])}catch(f){console.error("Failed to create directory:",f),i(f.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u}=t();if(!o){i("Filesystem not initialized.");return}a(!0);try{const c=n?s[n]:s[u||""],f=c?c.path:"/";await t8(Array.from(r),f),await t().fetchNodes(n)}catch(c){console.error("Failed to upload files:",c),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:o}=t();if(!o){a("Filesystem not initialized.");return}r(!0);try{for(const s of n){const u=t().nodes[s];u&&await Ak(u.path,u.type==="folder")}i(n)}catch(s){console.error("Failed to delete nodes:",s),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:o,nodes:s,fs:u,rootId:c}=t();if(!u){i("Filesystem not initialized.");return}if(!r.trim()){i("Name cannot be empty.");return}const f=s[n];if(!f){i("Item not found.");return}if(f.name!==r.trim()){a(!0);try{const h=f.parentId?s[f.parentId]:s[c||""],m=h?h.path:"/",g=Tb(m,r.trim());try{throw await u.promises.stat(g),new Error(`"${r.trim()}" already exists.`)}catch(v){if(v.code!=="ENOENT")throw v}await qne(f.path,g);const w={name:r.trim(),path:g,lastModified:Date.now()};o(n,w),await t().fetchNodes(f.parentId)}catch(h){console.error("Failed to rename item:",h),i(h.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i}=t();if(!a)return i("Filesystem not initialized."),null;const o=r[n];if(!o||o.type!=="file")return i("File not found."),null;try{const s=await Lh(o.path),u=o.mimeType||"application/octet-stream",c=new Blob([s],{type:u});return{name:o.name,blob:c}}catch(s){return console.error("Failed to download file:",s),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),Ube=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const o=s=>{s.key==="Enter"?n():s.key==="Escape"&&r()};return y.jsxs(Vi,{className:"bg-muted/30",children:[y.jsx(br,{className:"px-2 py-1"}),y.jsx(br,{className:"px-2 py-1",children:y.jsx(Kv,{className:"h-5 w-5 text-yellow-400"})}),y.jsx(br,{className:"py-1 px-2",colSpan:3,children:y.jsx(kr,{ref:a,value:e,onChange:s=>t(s.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),y.jsx(br,{className:"text-right pr-4 py-1",children:y.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?y.jsx(Jn,{className:"h-4 w-4 animate-spin"}):y.jsx(vo,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Create (Enter)"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:y.jsx(zs,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var v1="Checkbox",[qbe,n_e]=di(v1),[Hbe,Vbe]=qbe(v1),A$=R.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[m,g]=R.useState(null),w=_n(t,C=>g(C)),v=R.useRef(!1),_=m?f||!!m.closest("form"):!0,[x,S]=Wo({prop:a,defaultProp:i??!1,onChange:c,caller:v1}),E=R.useRef(x);return R.useEffect(()=>{const C=m==null?void 0:m.form;if(C){const A=()=>S(E.current);return C.addEventListener("reset",A),()=>C.removeEventListener("reset",A)}},[m,S]),y.jsxs(Hbe,{scope:n,state:x,disabled:s,children:[y.jsx(Jt.button,{type:"button",role:"checkbox","aria-checked":Uu(x)?"mixed":x,"aria-required":o,"data-state":I$(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:w,onKeyDown:Ft(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Ft(e.onClick,C=>{S(A=>Uu(A)?!0:!A),_&&(v.current=C.isPropagationStopped(),v.current||C.stopPropagation())})}),_&&y.jsx(N$,{control:m,bubbles:!v.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Uu(i)?!1:i})]})});A$.displayName=v1;var T$="CheckboxIndicator",R$=R.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Vbe(T$,n);return y.jsx(Ia,{present:r||Uu(i.state)||i.state===!0,children:y.jsx(Jt.span,{"data-state":I$(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});R$.displayName=T$;var Gbe="CheckboxBubbleInput",N$=R.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},o)=>{const s=R.useRef(null),u=_n(s,o),c=a1(n),f=tw(t);R.useEffect(()=>{const m=s.current;if(!m)return;const g=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&v){const _=new Event("click",{bubbles:r});m.indeterminate=Uu(n),v.call(m,Uu(n)?!1:n),m.dispatchEvent(_)}},[c,n,r]);const h=R.useRef(Uu(n)?!1:n);return y.jsx(Jt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:u,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});N$.displayName=Gbe;function Uu(e){return e==="indeterminate"}function I$(e){return Uu(e)?"indeterminate":e?"checked":"unchecked"}var Wbe=A$,Kbe=R$;function Zbe({className:e,...t}){return y.jsx(Wbe,{"data-slot":"checkbox",className:Dt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(Kbe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(vo,{className:"size-3.5"})})})}var YE=["Enter"," "],Ybe=["ArrowDown","PageUp","Home"],O$=["ArrowUp","PageDown","End"],Xbe=[...Ybe,...O$],Jbe={ltr:[...YE,"ArrowRight"],rtl:[...YE,"ArrowLeft"]},Qbe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},wg="Menu",[b0,eve,tve]=t1(wg),[Nd,w1]=di(wg,[tve,dc,n1]),_1=dc(),D$=n1(),[nve,Id]=Nd(wg),[rve,_g]=Nd(wg),j$=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=_1(t),[u,c]=R.useState(null),f=R.useRef(!1),h=ka(i),m=Bh(a);return R.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),y.jsx(nw,{...s,children:y.jsx(nve,{scope:t,open:n,onOpenChange:h,content:u,onContentChange:c,children:y.jsx(rve,{scope:t,onClose:R.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:m,modal:o,children:r})})})};j$.displayName=wg;var ave="MenuAnchor",xA=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=_1(n);return y.jsx(_0,{...a,...r,ref:t})});xA.displayName=ave;var SA="MenuPortal",[ive,M$]=Nd(SA,{forceMount:void 0}),P$=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Id(SA,t);return y.jsx(ive,{scope:t,forceMount:n,children:y.jsx(Ia,{present:n||i.open,children:y.jsx(Eh,{asChild:!0,container:a,children:r})})})};P$.displayName=SA;var bo="MenuContent",[ove,EA]=Nd(bo),F$=R.forwardRef((e,t)=>{const n=M$(bo,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Id(bo,e.__scopeMenu),o=_g(bo,e.__scopeMenu);return y.jsx(b0.Provider,{scope:e.__scopeMenu,children:y.jsx(Ia,{present:r||i.open,children:y.jsx(b0.Slot,{scope:e.__scopeMenu,children:o.modal?y.jsx(sve,{...a,ref:t}):y.jsx(lve,{...a,ref:t})})})})}),sve=R.forwardRef((e,t)=>{const n=Id(bo,e.__scopeMenu),r=R.useRef(null),a=_n(t,r);return R.useEffect(()=>{const i=r.current;if(i)return Ww(i)},[]),y.jsx(CA,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ft(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),lve=R.forwardRef((e,t)=>{const n=Id(bo,e.__scopeMenu);return y.jsx(CA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),uve=qu("MenuContent.ScrollLock"),CA=R.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:w,...v}=e,_=Id(bo,n),x=_g(bo,n),S=_1(n),E=D$(n),C=eve(n),[A,O]=R.useState(null),I=R.useRef(null),D=_n(t,I,_.onContentChange),B=R.useRef(0),K=R.useRef(""),Q=R.useRef(0),F=R.useRef(null),W=R.useRef("right"),U=R.useRef(0),he=w?ug:R.Fragment,ae=w?{as:uve,allowPinchZoom:!0}:void 0,re=se=>{var Pe,Re;const V=K.current+se,X=C().filter(Te=>!Te.disabled),Y=document.activeElement,ne=(Pe=X.find(Te=>Te.ref.current===Y))==null?void 0:Pe.textValue,be=X.map(Te=>Te.textValue),Ee=_ve(be,V,ne),De=(Re=X.find(Te=>Te.textValue===Ee))==null?void 0:Re.ref.current;(function Te(He){K.current=He,window.clearTimeout(B.current),He!==""&&(B.current=window.setTimeout(()=>Te(""),1e3))})(V),De&&setTimeout(()=>De.focus())};R.useEffect(()=>()=>window.clearTimeout(B.current),[]),Vw();const ee=R.useCallback(se=>{var X,Y;return W.current===((X=F.current)==null?void 0:X.side)&&Sve(se,(Y=F.current)==null?void 0:Y.area)},[]);return y.jsx(ove,{scope:n,searchRef:K,onItemEnter:R.useCallback(se=>{ee(se)&&se.preventDefault()},[ee]),onItemLeave:R.useCallback(se=>{var V;ee(se)||((V=I.current)==null||V.focus(),O(null))},[ee]),onTriggerLeave:R.useCallback(se=>{ee(se)&&se.preventDefault()},[ee]),pointerGraceTimerRef:Q,onPointerGraceIntentChange:R.useCallback(se=>{F.current=se},[]),children:y.jsx(he,{...ae,children:y.jsx(lg,{asChild:!0,trapped:a,onMountAutoFocus:Ft(i,se=>{var V;se.preventDefault(),(V=I.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(_h,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:y.jsx(NL,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:O,onEntryFocus:Ft(u,se=>{x.isUsingKeyboardRef.current||se.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(rw,{role:"menu","aria-orientation":"vertical","data-state":Q$(_.open),"data-radix-menu-content":"",dir:x.dir,...S,...v,ref:D,style:{outline:"none",...v.style},onKeyDown:Ft(v.onKeyDown,se=>{const X=se.target.closest("[data-radix-menu-content]")===se.currentTarget,Y=se.ctrlKey||se.altKey||se.metaKey,ne=se.key.length===1;X&&(se.key==="Tab"&&se.preventDefault(),!Y&&ne&&re(se.key));const be=I.current;if(se.target!==be||!Xbe.includes(se.key))return;se.preventDefault();const De=C().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);O$.includes(se.key)&&De.reverse(),vve(De)}),onBlur:Ft(e.onBlur,se=>{se.currentTarget.contains(se.target)||(window.clearTimeout(B.current),K.current="")}),onPointerMove:Ft(e.onPointerMove,v0(se=>{const V=se.target,X=U.current!==se.clientX;if(se.currentTarget.contains(V)&&X){const Y=se.clientX>U.current?"right":"left";W.current=Y,U.current=se.clientX}}))})})})})})})});F$.displayName=bo;var cve="MenuGroup",kA=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{role:"group",...r,ref:t})});kA.displayName=cve;var dve="MenuLabel",L$=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{...r,ref:t})});L$.displayName=dve;var $v="MenuItem",sO="menu.itemSelect",x1=R.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=R.useRef(null),o=_g($v,e.__scopeMenu),s=EA($v,e.__scopeMenu),u=_n(t,i),c=R.useRef(!1),f=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(sO,{bubbles:!0,cancelable:!0});h.addEventListener(sO,g=>r==null?void 0:r(g),{once:!0}),HO(h,m),m.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx($$,{...a,ref:u,disabled:n,onClick:Ft(e.onClick,f),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),c.current=!0},onPointerUp:Ft(e.onPointerUp,h=>{var m;c.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:Ft(e.onKeyDown,h=>{const m=s.searchRef.current!=="";n||m&&h.key===" "||YE.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});x1.displayName=$v;var $$=R.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=EA($v,n),s=D$(n),u=R.useRef(null),c=_n(t,u),[f,h]=R.useState(!1),[m,g]=R.useState("");return R.useEffect(()=>{const w=u.current;w&&g((w.textContent??"").trim())},[i.children]),y.jsx(b0.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:y.jsx(IL,{asChild:!0,...s,focusable:!r,children:y.jsx(Jt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Ft(e.onPointerMove,v0(w=>{r?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ft(e.onPointerLeave,v0(w=>o.onItemLeave(w))),onFocus:Ft(e.onFocus,()=>h(!0)),onBlur:Ft(e.onBlur,()=>h(!1))})})})}),fve="MenuCheckboxItem",B$=R.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return y.jsx(V$,{scope:e.__scopeMenu,checked:n,children:y.jsx(x1,{role:"menuitemcheckbox","aria-checked":Bv(n)?"mixed":n,...a,ref:t,"data-state":TA(n),onSelect:Ft(a.onSelect,()=>r==null?void 0:r(Bv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});B$.displayName=fve;var z$="MenuRadioGroup",[hve,pve]=Nd(z$,{value:void 0,onValueChange:()=>{}}),U$=R.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=ka(r);return y.jsx(hve,{scope:e.__scopeMenu,value:n,onValueChange:i,children:y.jsx(kA,{...a,ref:t})})});U$.displayName=z$;var q$="MenuRadioItem",H$=R.forwardRef((e,t)=>{const{value:n,...r}=e,a=pve(q$,e.__scopeMenu),i=n===a.value;return y.jsx(V$,{scope:e.__scopeMenu,checked:i,children:y.jsx(x1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":TA(i),onSelect:Ft(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});H$.displayName=q$;var AA="MenuItemIndicator",[V$,mve]=Nd(AA,{checked:!1}),G$=R.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=mve(AA,n);return y.jsx(Ia,{present:r||Bv(i.checked)||i.checked===!0,children:y.jsx(Jt.span,{...a,ref:t,"data-state":TA(i.checked)})})});G$.displayName=AA;var gve="MenuSeparator",W$=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});W$.displayName=gve;var yve="MenuArrow",K$=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=_1(n);return y.jsx(aw,{...a,...r,ref:t})});K$.displayName=yve;var bve="MenuSub",[r_e,Z$]=Nd(bve),pm="MenuSubTrigger",Y$=R.forwardRef((e,t)=>{const n=Id(pm,e.__scopeMenu),r=_g(pm,e.__scopeMenu),a=Z$(pm,e.__scopeMenu),i=EA(pm,e.__scopeMenu),o=R.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:u}=i,c={__scopeMenu:e.__scopeMenu},f=R.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return R.useEffect(()=>f,[f]),R.useEffect(()=>{const h=s.current;return()=>{window.clearTimeout(h),u(null)}},[s,u]),y.jsx(xA,{asChild:!0,...c,children:y.jsx($$,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Q$(n.open),...e,ref:Ol(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ft(e.onPointerMove,v0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ft(e.onPointerLeave,v0(h=>{var g,w;f();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(w=n.content)==null?void 0:w.dataset.side,_=v==="right",x=_?-5:5,S=m[_?"left":"right"],E=m[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:S,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:S,y:m.bottom}],side:v}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ft(e.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||Jbe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});Y$.displayName=pm;var X$="MenuSubContent",J$=R.forwardRef((e,t)=>{const n=M$(bo,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Id(bo,e.__scopeMenu),o=_g(bo,e.__scopeMenu),s=Z$(X$,e.__scopeMenu),u=R.useRef(null),c=_n(t,u);return y.jsx(b0.Provider,{scope:e.__scopeMenu,children:y.jsx(Ia,{present:r||i.open,children:y.jsx(b0.Slot,{scope:e.__scopeMenu,children:y.jsx(CA,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=u.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ft(e.onFocusOutside,f=>{f.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ft(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ft(e.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),m=Qbe[o.dir].includes(f.key);h&&m&&(i.onOpenChange(!1),(g=s.trigger)==null||g.focus(),f.preventDefault())})})})})})});J$.displayName=X$;function Q$(e){return e?"open":"closed"}function Bv(e){return e==="indeterminate"}function TA(e){return Bv(e)?"indeterminate":e?"checked":"unchecked"}function vve(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function wve(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function _ve(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=wve(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function xve(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,m=u.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function Sve(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return xve(n,t)}function v0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var eB=j$,tB=xA,nB=P$,rB=F$,aB=kA,iB=L$,oB=x1,sB=B$,lB=U$,uB=H$,cB=G$,dB=W$,fB=K$,hB=Y$,pB=J$,RA="ContextMenu",[Eve,a_e]=di(RA,[w1]),pi=w1(),[Cve,mB]=Eve(RA),gB=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[o,s]=R.useState(!1),u=pi(t),c=ka(r),f=R.useCallback(h=>{s(h),c(h)},[c]);return y.jsx(Cve,{scope:t,open:o,onOpenChange:f,modal:i,children:y.jsx(eB,{...u,dir:a,open:o,onOpenChange:f,modal:i,children:n})})};gB.displayName=RA;var yB="ContextMenuTrigger",bB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=mB(yB,n),o=pi(n),s=R.useRef({x:0,y:0}),u=R.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),c=R.useRef(0),f=R.useCallback(()=>window.clearTimeout(c.current),[]),h=m=>{s.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return R.useEffect(()=>f,[f]),R.useEffect(()=>void(r&&f()),[r,f]),y.jsxs(y.Fragment,{children:[y.jsx(tB,{...o,virtualRef:u}),y.jsx(Jt.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Ft(e.onContextMenu,m=>{f(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:Ft(e.onPointerDown,db(m=>{f(),c.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:Ft(e.onPointerMove,db(f)),onPointerCancel:r?e.onPointerCancel:Ft(e.onPointerCancel,db(f)),onPointerUp:r?e.onPointerUp:Ft(e.onPointerUp,db(f))})]})});bB.displayName=yB;var kve="ContextMenuPortal",vB=e=>{const{__scopeContextMenu:t,...n}=e,r=pi(t);return y.jsx(nB,{...r,...n})};vB.displayName=kve;var wB="ContextMenuContent",_B=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=mB(wB,n),i=pi(n),o=R.useRef(!1);return y.jsx(rB,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var u;(u=e.onCloseAutoFocus)==null||u.call(e,s),!s.defaultPrevented&&o.current&&s.preventDefault(),o.current=!1},onInteractOutside:s=>{var u;(u=e.onInteractOutside)==null||u.call(e,s),!s.defaultPrevented&&!a.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_B.displayName=wB;var Ave="ContextMenuGroup",Tve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(aB,{...a,...r,ref:t})});Tve.displayName=Ave;var Rve="ContextMenuLabel",Nve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(iB,{...a,...r,ref:t})});Nve.displayName=Rve;var Ive="ContextMenuItem",xB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(oB,{...a,...r,ref:t})});xB.displayName=Ive;var Ove="ContextMenuCheckboxItem",Dve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(sB,{...a,...r,ref:t})});Dve.displayName=Ove;var jve="ContextMenuRadioGroup",Mve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(lB,{...a,...r,ref:t})});Mve.displayName=jve;var Pve="ContextMenuRadioItem",Fve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(uB,{...a,...r,ref:t})});Fve.displayName=Pve;var Lve="ContextMenuItemIndicator",$ve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(cB,{...a,...r,ref:t})});$ve.displayName=Lve;var Bve="ContextMenuSeparator",SB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(dB,{...a,...r,ref:t})});SB.displayName=Bve;var zve="ContextMenuArrow",Uve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(fB,{...a,...r,ref:t})});Uve.displayName=zve;var qve="ContextMenuSubTrigger",Hve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(hB,{...a,...r,ref:t})});Hve.displayName=qve;var Vve="ContextMenuSubContent",Gve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(pB,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Gve.displayName=Vve;function db(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Wve=gB,Kve=bB,Zve=vB,Yve=_B,Xve=xB,Jve=SB;function Qve({...e}){return y.jsx(Wve,{"data-slot":"context-menu",...e})}function ewe({...e}){return y.jsx(Kve,{"data-slot":"context-menu-trigger",...e})}function twe({className:e,...t}){return y.jsx(Zve,{children:y.jsx(Yve,{"data-slot":"context-menu-content",className:Dt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function bl({className:e,inset:t,variant:n="default",...r}){return y.jsx(Xve,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:Dt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function lO({className:e,...t}){return y.jsx(Jve,{"data-slot":"context-menu-separator",className:Dt("bg-border -mx-1 my-1 h-px",e),...t})}const nwe=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:m,handleDelete:g,setNewName:w,renameInputRef:v,handleGitInit:_,handleGitPull:x,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const A=Q=>{Q.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||!t&&!i&&s(e)},O=Q=>{Q.key==="Enter"?h():Q.key==="Escape"&&f()},I=e.type==="folder",D=I?r?eq:Kv:JU,B=I?r?"text-green-400":"text-yellow-400":"text-blue-400",K=y.jsxs(Vi,{className:Dt("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed"),onClick:A,onDoubleClick:()=>!i&&!t&&s(e),children:[y.jsx(br,{className:"px-2 py-1",children:y.jsx(Zbe,{checked:n,onCheckedChange:Q=>u(!!Q,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||I})}),y.jsx(br,{className:"px-2 py-1",children:y.jsx(D,{className:Dt("h-5 w-5",B)})}),y.jsx(br,{className:"py-1 px-2",children:t?y.jsx(kr,{ref:v,value:a,onChange:Q=>w(Q.target.value),onBlur:h,onKeyDown:O,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:Q=>Q.stopPropagation(),disabled:i}):y.jsx("span",{className:Dt("truncate",I&&"cursor-pointer hover:underline"),title:e.name,onClick:Q=>{I&&(Q.stopPropagation(),s(e))},children:e.name})}),y.jsx(br,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?Vv(e.size):""}),y.jsx(br,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),y.jsx(br,{className:"text-right pr-4 py-1",children:y.jsx("div",{className:Dt("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?y.jsxs(y.Fragment,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:Q=>{Q.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),children:i?y.jsx(Jn,{className:"h-4 w-4 animate-spin"}):y.jsx(vo,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Save (Enter)"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),f()},"aria-label":"Cancel edit",disabled:i,children:y.jsx(zs,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Cancel (Esc)"})]})})]}):y.jsxs(y.Fragment,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),c(e)},"aria-label":"Rename",disabled:i||o,children:y.jsx(F2,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Rename"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),m(e)},"aria-label":I?"Download folder as ZIP":"Download file",disabled:i,children:y.jsx(Nb,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:I?"Download folder (.zip)":"Download file"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:Q=>{Q.stopPropagation(),g(e)},"aria-label":`Delete ${I?"folder":"file"}`,disabled:i,children:y.jsx(Hu,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Delete"})]})})]})})})]},e.id);return I?y.jsxs(Qve,{children:[y.jsx(ewe,{disabled:t||i,asChild:!0,children:K}),y.jsxs(twe,{children:[y.jsx(bl,{onSelect:()=>s(e),disabled:t||i,children:"Open Folder"}),y.jsx(lO,{}),r?y.jsxs(y.Fragment,{children:[y.jsxs(bl,{onSelect:()=>x(e.path),disabled:i,children:[y.jsx(hq,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),y.jsxs(bl,{onSelect:()=>S(e.path),disabled:i,children:[y.jsx(dq,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),y.jsxs(bl,{onSelect:()=>E(e.path),disabled:i,children:[y.jsx(mq,{className:"mr-2 h-4 w-4"}),"Git Push"]}),y.jsxs(bl,{onSelect:()=>C(e.path),disabled:i,children:[y.jsx(BO,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):y.jsxs(bl,{onSelect:()=>_(e.path),disabled:i,children:[y.jsx(iC,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),y.jsx(lO,{}),y.jsxs(bl,{onSelect:()=>c(e),disabled:i,children:[y.jsx(F2,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(bl,{onSelect:()=>m(e),disabled:i,children:[y.jsx(Nb,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),y.jsxs(bl,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx(Hu,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):K},rwe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:w,handleDelete:v,setNewName:_,setNewFolderName:x,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:A,handleGitPull:O,handleGitCommit:I,handleGitPush:D,handleGitStatus:B})=>{const K=R.useMemo(()=>e,[e]);return o&&e.length===0&&!r?y.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):y.jsx(sg,{className:"flex-grow h-0 border-t border-border",children:y.jsxs(c1,{className:"w-full text-sm",children:[y.jsx(d1,{className:"sticky top-0 bg-card z-10",children:y.jsxs(Vi,{className:"hover:bg-card",children:[y.jsx(ia,{className:"w-[40px] px-2"}),y.jsx(ia,{className:"w-[40px] px-2"}),y.jsx(ia,{children:"Name"}),y.jsx(ia,{className:"w-[100px] text-right",children:"Size"}),y.jsx(ia,{className:"w-[150px] text-right",children:"Modified"}),y.jsx(ia,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),y.jsxs(f1,{children:[r&&y.jsx(Ube,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:o}),K.map(Q=>{const F=t===Q.path,W=i.has(Q.id),U=C[Q.path]??!1;return y.jsx(nwe,{entry:Q,isEditingThis:F,isChecked:W,isGitRepo:U,newName:F?n:"",isOperationLoading:o,creatingFolder:r,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:w,handleDelete:v,setNewName:_,renameInputRef:S,handleGitInit:A,handleGitPull:O,handleGitCommit:I,handleGitPush:D,handleGitStatus:B},Q.id)}),e.length===0&&!r&&!o&&y.jsx(Vi,{children:y.jsx(br,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},awe=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:o,handleNavigateUp:s,handleRefresh:u,startCreatingFolder:c,handleUploadClick:f,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:g,handleCloneClick:w,fileInputRef:v,folderInputRef:_,archiveInputRef:x,handleFileChange:S,handleArchiveChange:E})=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:v,onChange:S,className:"hidden",multiple:!0,disabled:t}),y.jsx("input",{type:"file",ref:_,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),y.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),y.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(Ut,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:y.jsx(vq,{className:"h-4 w-4"})}),y.jsx(Ut,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:y.jsx(sq,{className:"h-4 w-4"})}),y.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),y.jsx("div",{className:"flex-grow"}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[y.jsx(Ut,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?y.jsx(Jn,{className:"h-4 w-4 animate-spin"}):y.jsx(Yv,{className:"h-4 w-4"})}),y.jsxs(Ut,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),c()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?y.jsx(Jn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(aC,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Ut,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),f()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?y.jsx(Jn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(LO,{className:"h-4 w-4 mr-1"}),"Files"]}),y.jsxs(Ut,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?y.jsx(Jn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Kv,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Ut,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?y.jsx(Jn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(HU,{className:"h-4 w-4 mr-1"}),"ZIP"]}),y.jsxs(Ut,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),w()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?y.jsx(Jn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(iC,{className:"h-4 w-4 mr-1"}),"Clone"]}),y.jsxs(Ut,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?y.jsx(Jn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(EU,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),iwe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:o,onSubmitClone:s,currentPath:u})=>y.jsx(Zw,{open:e,onOpenChange:t,children:y.jsxs(Yw,{children:[y.jsxs(Xw,{children:[y.jsx(Qw,{children:"Clone Git Repository"}),y.jsxs(e1,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",y.jsx("code",{children:u}),"."]})]}),y.jsxs("div",{className:"grid gap-4 py-4",children:[y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(Ln,{htmlFor:"clone-url",className:"text-right",children:"URL"}),y.jsx(kr,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:o})]}),y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(Ln,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),y.jsx(kr,{id:"clone-branch",value:a,onChange:c=>i(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:o})]})]}),y.jsxs(Jw,{children:[y.jsx(Ut,{variant:"outline",onClick:()=>t(!1),disabled:o,children:"Cancel"}),y.jsx(Ut,{onClick:s,disabled:o||!n.trim(),children:o?y.jsxs(y.Fragment,{children:[y.jsx(Jn,{className:"mr-2 h-4 w-4 animate-spin"}),"Cloning..."]}):"Clone"})]})]})}),owe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:o})=>y.jsx(Zw,{open:e,onOpenChange:t,children:y.jsxs(Yw,{children:[y.jsxs(Xw,{children:[y.jsx(Qw,{children:"Commit Changes"}),y.jsxs(e1,{children:["Enter a commit message for the changes in ",y.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]})]}),y.jsx("div",{className:"grid gap-4 py-4",children:y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(Ln,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),y.jsx(kr,{id:"commit-msg",value:r,onChange:s=>a(s.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})}),y.jsxs(Jw,{children:[y.jsx(Ut,{variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),y.jsx(Ut,{onClick:o,disabled:i||!r.trim(),children:i?y.jsxs(y.Fragment,{children:[y.jsx(Jn,{className:"mr-2 h-4 w-4 animate-spin"}),"Committing..."]}):"Commit"})]})]})}),EB=R.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,error:a,fetchNodes:i,createDirectory:o,uploadFiles:s,deleteNodes:u,renameNode:c,setCurrentPath:f,initializeVFS:h,rootId:m,fs:g,_setError:w,selectFile:v,deselectFile:_,selectedFileIds:x}=kl(Hn(de=>({nodes:de.nodes,childrenMap:de.childrenMap,currentParentId:de.currentParentId,selectedFileIds:de.selectedFileIds,loading:de.loading,error:de.error,fetchNodes:de.fetchNodes,createDirectory:de.createDirectory,uploadFiles:de.uploadFiles,deleteNodes:de.deleteNodes,renameNode:de.renameNode,selectFile:de.selectFile,deselectFile:de.deselectFile,setCurrentPath:de.setCurrentPath,initializeVFS:de.initializeVFS,rootId:de.rootId,fs:de.fs,_setOperationLoading:de._setOperationLoading,_setError:de._setError,_addNodes:de._addNodes,_removeNodes:de._removeNodes}))),[S,E]=R.useState(""),[C,A]=R.useState(null),[O,I]=R.useState(!1),[D,B]=R.useState(""),[K,Q]=R.useState(!1),[F,W]=R.useState({}),[U,he]=R.useState(!1),[ae,re]=R.useState(""),[ee,se]=R.useState(""),[V,X]=R.useState(!1),[Y,ne]=R.useState(!1),[be,Ee]=R.useState(null),[De,Pe]=R.useState(""),[Re,Te]=R.useState(!1),[He,it]=R.useState({}),Ie=R.useRef(null),Ae=R.useRef(null),z=R.useRef(null),ke=R.useRef(null),Ne=R.useRef(null),ce=n?e[n]:null,ie=ce?ce.path:"/",_e=(t[n||m||""]||[]).map(de=>e[de]).filter(de=>!!de).sort((de,Fe)=>de.type==="folder"&&Fe.type==="file"?-1:de.type==="file"&&Fe.type==="folder"?1:de.name.localeCompare(Fe.name)),Le=R.useMemo(()=>_e.filter(de=>de.type==="folder").map(de=>de.path),[_e]),xe=r||K||V||Re;R.useEffect(()=>{!m&&!r&&h("default_vfs_key")},[m,h,r]),R.useEffect(()=>{n!==null&&!t[n]&&!r&&g?i(n):n===null&&m&&!t[m]&&!r&&g&&i(m)},[n,i,t,m,r,g]),R.useEffect(()=>{var de,Fe;C&&((de=ke.current)==null||de.focus(),(Fe=ke.current)==null||Fe.select())},[C]),R.useEffect(()=>{var de;O&&((de=Ne.current)==null||de.focus())},[O]),R.useEffect(()=>{(async()=>{if(!g||Le.length===0)return;const Fe={};let ot=!1;for(const jt of Le)try{const un=await Hne(jt);F[jt]!==un&&(Fe[jt]=un,ot=!0)}catch(un){console.error(`Error checking git status for ${jt}:`,un),F[jt]!==!1&&(Fe[jt]=!1,ot=!0)}ot&&W(jt=>({...jt,...Fe}))})()},[Le,g,F]);const Ve=R.useCallback(async(de,Fe=!0)=>{if(!xe){Fe&&Q(!0),w(null);try{await de()}catch(ot){console.error("[FileManager Operation Error]:",ot)}finally{Fe&&Q(!1)}}},[xe,w]),xt=R.useCallback(de=>{xe||C||de.type==="folder"&&Ve(()=>f(de.path),!1)},[xe,C,f,Ve]),ht=R.useCallback(()=>{if(xe||ie==="/")return;const de=Gv(ie);Ve(()=>f(de),!1)},[xe,ie,f,Ve]),Et=R.useCallback(()=>{xe||ie==="/"||Ve(()=>f("/"),!1)},[xe,ie,f,Ve]),Lt=R.useCallback(()=>{Ve(()=>i(n))},[Ve,i,n]),Tt=R.useCallback((de,Fe)=>{const ot=e[Fe];ot&&ot.type==="file"?de?v(Fe):_(Fe):ot&&ot.type==="folder"&&dt.info("Folders cannot be attached to the prompt.")},[v,_,e]),zt=R.useCallback(de=>{xe||O||(A(de.path),E(de.name),I(!1))},[xe,O]),ge=R.useCallback(()=>{A(null),E("")},[]),N=R.useCallback(async()=>{if(!C||!S.trim()){ge();return}const de=Object.values(e).find(Fe=>Fe.path===C);de&&de.name!==S.trim()&&await Ve(()=>c(de.id,S.trim())),ge()},[C,S,c,ge,e,Ve]),H=R.useCallback(()=>{xe||C||(I(!0),B(""),A(null))},[xe,C]),fe=R.useCallback(()=>{I(!1),B("")},[]),Oe=R.useCallback(async()=>{if(!D.trim()){fe();return}await Ve(()=>o(n,D.trim())),fe()},[D,o,n,fe,Ve]),ve=()=>{var de;return(de=Ie.current)==null?void 0:de.click()},Ce=()=>{var de;return(de=Ae.current)==null?void 0:de.click()},le=()=>{var de;return(de=z.current)==null?void 0:de.click()},ct=R.useCallback(async de=>{const Fe=de.target.files;Fe&&Fe.length>0&&(await Ve(()=>s(n,Fe)),de.target&&(de.target.value=""))},[s,n,Ve]),yt=R.useCallback(async de=>{var ot;const Fe=(ot=de.target.files)==null?void 0:ot[0];Fe&&(await Ve(async()=>{await Une(Fe,ie),await i(n)}),de.target&&(de.target.value=""))},[ie,i,n,Ve]),M=R.useCallback(async de=>{window.confirm(`Delete ${de.type} "${de.name}"?${de.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ve(()=>u([de.id]))},[u,Ve]),Be=R.useCallback(async de=>{await Ve(async()=>{de.type==="file"?await zne(de.path):await N4(`${de.name}.zip`,de.path)})},[Ve]),et=R.useCallback(async()=>{_e.length!==0&&await Ve(async()=>{const de=oa(ie)||"root";await N4(`${de}_export.zip`,ie)})},[ie,_e.length,Ve]),me=R.useCallback(async(de,Fe)=>{if(!He[de]){it(ot=>({...ot,[de]:!0})),w(null);try{await Fe()}catch(ot){console.error(`[FileManager Git Op Error @ ${de}]:`,ot)}finally{it(ot=>({...ot,[de]:!1}))}}},[w,He]),je=R.useCallback(de=>{me(de,async()=>{await n8(de),W(Fe=>({...Fe,[de]:!0}))})},[me]),Ke=R.useCallback(de=>{me(de,()=>Nk(de))},[me]),Ct=R.useCallback(de=>{Ee(de),Pe(""),ne(!0)},[]),ye=R.useCallback(de=>{me(de,()=>Ik(de))},[me]),q=R.useCallback(de=>{me(de,()=>r8(de))},[me]),$=R.useCallback(()=>{re(""),se(""),he(!0)},[]),G=R.useCallback(async()=>{if(!ae.trim()){dt.error("Repository URL cannot be empty.");return}X(!0),w(null);try{await Tk(ie,ae.trim(),ee.trim()||void 0),he(!1),await Lt()}catch{}finally{X(!1)}},[ae,ee,ie,w,Lt]),pe=R.useCallback(async()=>{if(!be||!De.trim()){dt.error("Commit message cannot be empty.");return}Te(!0),w(null);try{await Rk(be,De.trim()),ne(!1)}catch{}finally{Te(!1)}},[be,De,w]);return y.jsxs("div",{className:"flex h-full flex-col bg-card text-card-foreground rounded-lg border border-border shadow-sm overflow-hidden",children:[y.jsx(awe,{currentPath:ie,isAnyLoading:xe,isOperationLoading:K,entries:_e,editingPath:C,creatingFolder:O,handleNavigateHome:Et,handleNavigateUp:ht,handleRefresh:Lt,startCreatingFolder:H,handleUploadClick:ve,handleFolderUploadClick:Ce,handleArchiveUploadClick:le,handleDownloadAll:et,handleCloneClick:$,fileInputRef:Ie,folderInputRef:Ae,archiveInputRef:z,handleFileChange:ct,handleArchiveChange:yt}),a&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-xs text-center flex-shrink-0",children:["Error: ",a]}),y.jsx(rwe,{entries:_e,editingPath:C,newName:S,creatingFolder:O,newFolderName:D,selectedFileIds:x,isOperationLoading:K||Object.values(He).some(Boolean),handleNavigate:xt,handleCheckboxChange:Tt,startEditing:zt,cancelEditing:ge,handleRename:N,cancelCreatingFolder:fe,handleCreateFolder:Oe,handleDownload:Be,handleDelete:M,setNewName:E,setNewFolderName:B,renameInputRef:ke,newFolderInputRef:Ne,gitRepoStatus:F,handleGitInit:je,handleGitPull:Ke,handleGitCommit:Ct,handleGitPush:ye,handleGitStatus:q}),y.jsx(iwe,{isOpen:U,onOpenChange:he,cloneRepoUrl:ae,setCloneRepoUrl:re,cloneBranch:ee,setCloneBranch:se,isCloning:V,onSubmitClone:G,currentPath:ie}),y.jsx(owe,{isOpen:Y,onOpenChange:ne,commitPath:be,commitMessage:De,setCommitMessage:Pe,isCommitting:Re,onSubmitCommit:pe})]})});EB.displayName="FileManager";const swe="core-vfs-control",lwe=e=>{let t="";const n=new Uint8Array(e),r=n.byteLength;for(let a=0;a<r;a++)t+=String.fromCharCode(n[a]);return btoa(t)},uwe=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:k$.some(r=>n.endsWith(r))},cwe=()=>{const[e,t]=R.useState(!1),[n,r]=R.useState(!1),{nodes:a,selectedFileIds:i,clearSelection:o,uploadFiles:s}=kl(Hn(S=>({nodes:S.nodes,selectedFileIds:S.selectedFileIds,clearSelection:S.clearSelection,uploadFiles:S.uploadFiles,currentParentId:S.currentParentId}))),{addAttachedFile:u,attachedFilesMetadata:c}=zu(Hn(S=>({addAttachedFile:S.addAttachedFile,attachedFilesMetadata:S.attachedFilesMetadata}))),f=vt.useMemo(()=>Array.from(i).map(S=>a[S]).filter(S=>!!S&&S.type==="file"),[i,a]),h=R.useCallback(async()=>{if(f.length===0||n)return;r(!0);let S=0,E=0;const C=f.map(async A=>{try{const O=await Lh(A.path),I=A.mimeType||"application/octet-stream",D=uwe(A.name,I),B={source:"vfs",name:A.name,type:I,size:A.size,path:A.path};D?B.contentText=new TextDecoder().decode(O):B.contentBase64=lwe(O),u(B),S++}catch(O){E++,console.error(`Failed to read VFS file ${A.path}:`,O),dt.error(`Failed to attach "${A.name}": ${O instanceof Error?O.message:"Read error"}`)}});await Promise.all(C),S>0&&dt.success(`${S} file(s) attached from VFS.`),E>0&&dt.warning(`${E} file(s) could not be attached.`),o(),r(!1),t(!1)},[f,u,o,n]),m=R.useCallback(S=>{S?t(!0):(i.size>0&&o(),t(!1))},[o,i.size]),g=kl.getState().currentParentId,w=R.useCallback(()=>{const S=g?kl.getState().nodes[g]:kl.getState().nodes[kl.getState().rootId||""];return(S==null?void 0:S.path)||"/"},[g]),v=R.useCallback(async S=>{S.preventDefault(),S.stopPropagation();const E=S.dataTransfer.files;if(E&&E.length>0)try{await s(g,E),dt.success(`${E.length} file(s) added to VFS at ${w()}. Select them in the manager.`)}catch(C){console.error("Error adding files via drop:",C),dt.error("Failed to add dropped files.")}},[s,g,w]),_=R.useCallback(S=>{S.preventDefault(),S.stopPropagation()},[]),x=c.filter(S=>S.source==="vfs").length;return y.jsxs(Zw,{open:e,onOpenChange:m,children:[y.jsx(kn,{children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx("div",{onDrop:v,onDragOver:_,className:"inline-block",children:y.jsx(Lpe,{asChild:!0,children:y.jsxs(Ut,{variant:"ghost",size:"icon",className:Dt("relative h-10 w-10 rounded-full",x>0&&"text-blue-500 hover:text-blue-600"),"aria-label":`Attach files from VFS (${x} selected)`,children:[y.jsx(nq,{className:"h-5 w-5"}),x>0&&y.jsx("span",{className:"absolute -right-1 -top-1 flex h-4 w-4 items-center justify-center rounded-full bg-blue-500 text-xs text-white",children:x})]})})})}),y.jsxs(On,{children:[y.jsxs("p",{children:["Attach files from VFS (",x," selected)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag & drop enabled"})]})]})}),y.jsxs(Yw,{className:"max-w-[1200px] h-[85vh] sm:max-w-4xl flex flex-col",children:[y.jsxs(Xw,{children:[y.jsx(Qw,{children:"File Manager"}),y.jsx(e1,{children:'Manage files in the virtual filesystem. Select files and click "Attach Selected" to add them to your prompt.'})]}),y.jsx("div",{className:"flex-grow overflow-hidden",children:y.jsx(EB,{})}),y.jsxs(Jw,{children:[y.jsx(Bpe,{asChild:!0,children:y.jsx(Ut,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})}),y.jsxs(Ut,{onClick:h,disabled:f.length===0||n,children:[n&&y.jsx(Jn,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Attaching...":`Attach Selected (${f.length})`]})]})]})]})},dwe=()=>{const e=ma(n=>n.registerPromptControl),{enableVfs:t}=kl(Hn(n=>({enableVfs:n.enableVfs})));return R.useEffect(()=>e({id:swe,triggerRenderer:()=>y.jsx(cwe,{}),show:()=>t,order:40}),[e,t]),null};var S1="DropdownMenu",[fwe,i_e]=di(S1,[w1]),mi=w1(),[hwe,CB]=fwe(S1),kB=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,u=mi(t),c=R.useRef(null),[f,h]=Wo({prop:a,defaultProp:i??!1,onChange:o,caller:S1});return y.jsx(hwe,{scope:t,triggerId:Ta(),triggerRef:c,contentId:Ta(),open:f,onOpenChange:h,onOpenToggle:R.useCallback(()=>h(m=>!m),[h]),modal:s,children:y.jsx(eB,{...u,open:f,onOpenChange:h,dir:r,modal:s,children:n})})};kB.displayName=S1;var AB="DropdownMenuTrigger",TB=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=CB(AB,n),o=mi(n);return y.jsx(tB,{asChild:!0,...o,children:y.jsx(Jt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Ol(t,i.triggerRef),onPointerDown:Ft(e.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(i.onOpenToggle(),i.open||s.preventDefault())}),onKeyDown:Ft(e.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&i.onOpenToggle(),s.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});TB.displayName=AB;var pwe="DropdownMenuPortal",RB=e=>{const{__scopeDropdownMenu:t,...n}=e,r=mi(t);return y.jsx(nB,{...r,...n})};RB.displayName=pwe;var NB="DropdownMenuContent",IB=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=CB(NB,n),i=mi(n),o=R.useRef(!1);return y.jsx(rB,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:Ft(e.onCloseAutoFocus,s=>{var u;o.current||(u=a.triggerRef.current)==null||u.focus(),o.current=!1,s.preventDefault()}),onInteractOutside:Ft(e.onInteractOutside,s=>{const u=s.detail.originalEvent,c=u.button===0&&u.ctrlKey===!0,f=u.button===2||c;(!a.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IB.displayName=NB;var mwe="DropdownMenuGroup",gwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(aB,{...a,...r,ref:t})});gwe.displayName=mwe;var ywe="DropdownMenuLabel",OB=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(iB,{...a,...r,ref:t})});OB.displayName=ywe;var bwe="DropdownMenuItem",DB=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(oB,{...a,...r,ref:t})});DB.displayName=bwe;var vwe="DropdownMenuCheckboxItem",wwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(sB,{...a,...r,ref:t})});wwe.displayName=vwe;var _we="DropdownMenuRadioGroup",xwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(lB,{...a,...r,ref:t})});xwe.displayName=_we;var Swe="DropdownMenuRadioItem",Ewe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(uB,{...a,...r,ref:t})});Ewe.displayName=Swe;var Cwe="DropdownMenuItemIndicator",kwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(cB,{...a,...r,ref:t})});kwe.displayName=Cwe;var Awe="DropdownMenuSeparator",jB=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(dB,{...a,...r,ref:t})});jB.displayName=Awe;var Twe="DropdownMenuArrow",Rwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(fB,{...a,...r,ref:t})});Rwe.displayName=Twe;var Nwe="DropdownMenuSubTrigger",Iwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(hB,{...a,...r,ref:t})});Iwe.displayName=Nwe;var Owe="DropdownMenuSubContent",Dwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(pB,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Dwe.displayName=Owe;var jwe=kB,Mwe=TB,Pwe=RB,Fwe=IB,Lwe=OB,$we=DB,Bwe=jB;function zwe({...e}){return y.jsx(jwe,{"data-slot":"dropdown-menu",...e})}function Uwe({...e}){return y.jsx(Mwe,{"data-slot":"dropdown-menu-trigger",...e})}function qwe({className:e,sideOffset:t=4,...n}){return y.jsx(Pwe,{children:y.jsx(Fwe,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Dt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function cm({className:e,inset:t,variant:n="default",...r}){return y.jsx($we,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:Dt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function Hwe({className:e,inset:t,...n}){return y.jsx(Lwe,{"data-slot":"dropdown-menu-label","data-inset":t,className:Dt("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function uO({className:e,...t}){return y.jsx(Bwe,{"data-slot":"dropdown-menu-separator",className:Dt("bg-border -mx-1 my-1 h-px",e),...t})}const Vwe=()=>{const{selectedItemId:e,selectedItemType:t,conversations:n,syncRepos:r,conversationSyncStatus:a,linkConversationToRepo:i,syncConversation:o}=Wl(Hn(S=>({selectedItemId:S.selectedItemId,selectedItemType:S.selectedItemType,conversations:S.conversations,syncRepos:S.syncRepos,conversationSyncStatus:S.conversationSyncStatus,linkConversationToRepo:S.linkConversationToRepo,syncConversation:S.syncConversation}))),s=t==="conversation"?e:null,u=n.find(S=>S.id===s),c=u==null?void 0:u.syncRepoId,f=r.find(S=>S.id===c),h=s?a[s]??"idle":"idle",m=S=>{s&&i(s,S)},g=()=>{s&&c&&o(s)},w=()=>{alert("Please go to Settings -> Git -> Sync Repositories to configure sync.")},_=f?(()=>{switch(h){case"syncing":return{icon:y.jsx(Jn,{className:"h-3 w-3 animate-spin text-blue-500"}),tooltip:`Syncing with ${f==null?void 0:f.name}...`,colorClass:"text-blue-500"};case"error":return{icon:y.jsx(Ms,{className:"h-3 w-3 text-destructive fill-destructive/30"}),tooltip:`Sync error with ${f==null?void 0:f.name}. Check console/logs.`,colorClass:"text-destructive"};case"needs-sync":return{icon:y.jsx(Ms,{className:"h-3 w-3 text-orange-500 fill-orange-300"}),tooltip:`Local changes need sync with ${f==null?void 0:f.name}.`,colorClass:"text-orange-500"};case"idle":default:return{icon:y.jsx(Rb,{className:"h-3 w-3 text-green-500"}),tooltip:`Synced with ${f==null?void 0:f.name}.`,colorClass:"text-green-500"}}})():null,x=!s;return y.jsxs(zwe,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Uwe,{asChild:!0,disabled:x,children:y.jsxs(Ut,{type:"button",variant:"ghost",size:"icon",className:Dt("h-10 w-10 rounded-full relative",!f&&"text-muted-foreground hover:text-foreground",_==null?void 0:_.colorClass,x&&"opacity-50 cursor-not-allowed"),"aria-label":"Conversation Git Sync Status",children:[y.jsx(iq,{className:"h-5 w-5"}),_&&y.jsx("span",{className:"absolute top-0 right-0",children:_.icon})]})})}),y.jsx(On,{side:"top",children:x?"Select a conversation to manage sync":f?_==null?void 0:_.tooltip:"Link conversation to sync repository"})]})}),y.jsxs(qwe,{align:"end",children:[y.jsx(Hwe,{children:"Conversation Sync"}),y.jsx(uO,{}),r.map(S=>y.jsxs(cm,{onClick:()=>m(S.id),disabled:!s||h==="syncing",children:[c===S.id&&y.jsx(Rb,{className:"mr-2 h-4 w-4 text-green-500"}),"Link to: ",S.name]},S.id)),c&&y.jsxs(cm,{onClick:()=>m(null),disabled:!s||h==="syncing",children:[y.jsx(zs,{className:"mr-2 h-4 w-4 text-muted-foreground"}),"Unlink Repository"]}),r.length===0&&y.jsx(cm,{disabled:!0,children:"No sync repos configured"}),y.jsx(uO,{}),y.jsxs(cm,{onClick:g,disabled:!s||!c||h==="syncing",children:[h==="syncing"?y.jsx(Jn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Yv,{className:"mr-2 h-4 w-4"}),"Sync Now"]}),y.jsxs(cm,{onClick:w,children:[y.jsx(Gq,{className:"mr-2 h-4 w-4"}),"Configure Repositories..."]})]})]})},Gwe=()=>{const e=ma(n=>n.registerPromptControl),t=Wl(n=>n.syncRepos.length);return vt.useEffect(()=>e({id:"core-git-sync-control",triggerRenderer:()=>y.jsx(Vwe,{}),show:()=>!0,order:50}),[e,t]),null};async function Wh(e){const{fs:t,initializeVFS:n,vfsKey:r}=kl.getState();if(t)return t;console.log(`[${e}] VFS not ready. Attempting initialization with key: ${r||"default_fallback_key"}...`),dt.info(`Initializing filesystem for ${e}...`);try{await n(r||"default_fallback_key");const{fs:a}=kl.getState();if(a)return console.log(`[${e}] VFS initialization successful.`),dt.success(`Filesystem ready for ${e}.`),a;throw new Error("VFS initialization failed after attempt.")}catch(a){return console.error(`[${e}] Failed to ensure VFS readiness:`,a),dt.error(`Filesystem unavailable for ${e}: ${a instanceof Error?a.message:String(a)}`),null}}const Wwe={description:"Lists files and folders within a specified directory in the Virtual File System (VFS). Use '/' for the root directory.",parameters:L.object({path:L.string().describe("The absolute path of the directory to list (e.g., '/', '/documents', '/project/code').")})},Kwe={description:"Reads the content of a specified file from the Virtual File System (VFS). Returns the content as a string.",parameters:L.object({path:L.string().describe("The absolute path of the file to read (e.g., '/documents/notes.txt', '/project/code/main.py').")})},Zwe={description:"Writes or overwrites a file with the given content in the Virtual File System (VFS). Creates parent directories if they don't exist.",parameters:L.object({path:L.string().describe("The absolute path where the file should be written (e.g., '/documents/new_notes.txt', '/project/data.json')."),content:L.string().describe("The text content to write into the file.")})},Ywe={description:"Creates a new directory (and any necessary parent directories) at the specified path in the Virtual File System (VFS).",parameters:L.object({path:L.string().describe("The absolute path of the directory to create (e.g., '/new_folder', '/project/assets/images').")})},Xwe={description:"Deletes a file or an empty directory from the Virtual File System (VFS). Use with caution.",parameters:L.object({path:L.string().describe("The absolute path of the file or empty directory to delete (e.g., '/documents/old_notes.txt', '/temp_folder').")})},Jwe={description:"Deletes a directory and ALL its contents (files and subdirectories) recursively from the Virtual File System (VFS). VERY DANGEROUS - USE WITH EXTREME CAUTION.",parameters:L.object({path:L.string().describe("The absolute path of the directory to delete recursively (e.g., '/project_to_delete', '/old_backups'). Cannot be '/'.")})},Qwe=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_list_directory called for path: ${e.path}`),!await Wh("vfs_list_directory"))return{status:"error",error:"Filesystem not available."};console.log("[VFS Tool Execute] VfsOps.VFS instance state:",sE);try{const r=await kk(e.path);return{status:"success",isEmpty:r.length===0,content:r.map(a=>({name:a.name,type:a.isDirectory?"folder":"file",size:a.size,lastModified:a.lastModified.toISOString()}))}}catch(r){return{status:"error",error:`Failed to list directory: ${r.message}`}}},e1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_read_file called for path: ${e.path}`),!await Wh("vfs_read_file"))return{status:"error",error:"Filesystem not available."};try{const r=await Lh(e.path);return{status:"success",content:new TextDecoder().decode(r)}}catch(r){return{status:"error",error:`Failed to read file: ${r.message}`}}},t1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_write_file called for path: ${e.path}`),!await Wh("vfs_write_file"))return{status:"error",error:"Filesystem not available."};try{return await Iw(e.path,e.content),{status:"success"}}catch(r){return{status:"error",error:`Failed to write file: ${r.message}`}}},n1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_create_directory called for path: ${e.path}`),!await Wh("vfs_create_directory"))return{status:"error",error:"Filesystem not available."};try{return await e8(e.path),{status:"success"}}catch(r){return{status:"error",error:`Failed to create directory: ${r.message}`}}},r1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_delete called for path: ${e.path}`),!await Wh("vfs_delete"))return{status:"error",error:"Filesystem not available."};if(e.path==="/")return{status:"error",error:"Cannot delete the root directory."};try{return await Ak(e.path,!1),{status:"success"}}catch(r){return{status:"error",error:`Failed to delete item: ${r.message}`}}},a1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_delete_recursive called for path: ${e.path}`),!await Wh("vfs_delete_recursive"))return{status:"error",error:"Filesystem not available."};if(e.path==="/")return{status:"error",error:"Cannot delete the root directory."};try{return await Ak(e.path,!0),{status:"success"}}catch(r){return{status:"error",error:`Failed to delete directory recursively: ${r.message}`}}},i1e=()=>{const{registerTool:e}=ma();R.useEffect(()=>{const t=[],n=(r,a,i)=>{const o=async(s,u)=>i(s,u);t.push(e("core",r,a,o))};return n("vfs_list_directory",Wwe,Qwe),n("vfs_read_file",Kwe,e1e),n("vfs_write_file",Zwe,t1e),n("vfs_create_directory",Ywe,n1e),n("vfs_delete",Xwe,r1e),n("vfs_delete_recursive",Jwe,a1e),()=>{console.log("[useVfsToolsRegistration] VFS tools unregistered"),t.forEach(r=>r())}},[e])},If="core-git-tools";function o1e(){const{registerTool:e,unregisterTool:t}=ma.getState();R.useEffect(()=>{const n=[],r=()=>{const{gitUserName:f,gitUserEmail:h}=ga.getState();return!f||!h?(dt.error("Git user name and email must be configured in Settings before using Git tools."),!1):!0},a={description:"Clones a remote Git repository into a specified parent directory within the VFS. Creates a new folder named after the repository.",parameters:L.object({parentPath:L.string().describe("The absolute path of the directory *where* the new repository folder should be created (e.g., '/', '/projects')."),repoUrl:L.string().url().describe("The HTTPS URL of the remote Git repository to clone."),branch:L.string().optional().describe("Optional specific branch to clone (defaults to the repository's default branch).")}),execute:async({parentPath:f,repoUrl:h,branch:m})=>{const g=Gn(f);try{await Tk(g,h,m);const w=oa(h.replace(/\/$/,"").replace(/\.git$/,""));return{status:"success",path:Gn(`${g}/${w}`)}}catch(w){return{status:"error",message:w.message||"An unknown error occurred during clone."}}}};n.push(e(If,"git_clone",a));const i={description:"Pulls the latest changes from the remote repository for a specified local Git repository path within the VFS.",parameters:L.object({path:L.string().describe("The absolute path of the local Git repository directory in the VFS.")}),execute:async({path:f})=>{if(!r())return{status:"error",message:"Git user config missing."};const h=Gn(f);try{return await Nk(h),{status:"success",path:h}}catch(m){return{status:"error",message:m.message||"An unknown error occurred during pull."}}}};n.push(e(If,"git_pull",i));const o={description:"Pushes local commits from a specified local Git repository path within the VFS to its configured remote repository.",parameters:L.object({path:L.string().describe("The absolute path of the local Git repository directory in the VFS.")}),execute:async({path:f})=>{const h=Gn(f);try{return await Ik(h),{status:"success",path:h}}catch(m){return{status:"error",message:m.message||"An unknown error occurred during push."}}}};n.push(e(If,"git_push",o));const s={description:"Stages all changes (new, modified, deleted files) and commits them with a message to the specified local Git repository path within the VFS.",parameters:L.object({path:L.string().describe("The absolute path of the local Git repository directory in the VFS."),message:L.string().describe("The commit message.")}),execute:async({path:f,message:h})=>{if(!r())return{status:"error",message:"Git user config missing."};const m=Gn(f);if(!h.trim())return{status:"error",message:"Commit message cannot be empty."};try{return await Rk(m,h),{status:"success",path:m}}catch(g){return{status:"error",message:g.message||"An unknown error occurred during commit."}}}};n.push(e(If,"git_commit",s));const u={description:"Shows the working tree status (changes not staged for commit) for a specified local Git repository path within the VFS.",parameters:L.object({path:L.string().describe("The absolute path of the local Git repository directory in the VFS.")}),execute:async({path:f})=>{const h=Gn(f);try{return await r8(h),{status:"success",path:h}}catch(m){return{status:"error",message:m.message||"An unknown error occurred checking status."}}}};n.push(e(If,"git_status",u));const c={description:"Initializes a new, empty Git repository at the specified directory path within the VFS.",parameters:L.object({path:L.string().describe("The absolute path of the directory to initialize as a Git repository.")}),execute:async({path:f})=>{const h=Gn(f);try{return await n8(h),{status:"success",path:h}}catch(m){return{status:"error",message:m.message||"An unknown error occurred during git init."}}}};return n.push(e(If,"git_init",c)),()=>{n.forEach(f=>f()),console.log("[useGitToolsRegistration] Git tools unregistered")}},[e,t])}const s1e=({className:e})=>{const{enabledTools:t,setEnabledTools:n}=zu(Hn(f=>({enabledTools:f.enabledTools,setEnabledTools:f.setEnabledTools}))),r=ma(f=>f.tools),[a,i]=R.useState(""),o=R.useMemo(()=>Object.entries(r).map(([f,{definition:h,modId:m}])=>({name:f,description:h.description??"No description provided.",modId:m})).sort((f,h)=>f.name.localeCompare(h.name)),[r]),s=R.useMemo(()=>{if(!a.trim())return o;const f=a.toLowerCase();return o.filter(h=>h.name.toLowerCase().includes(f)||h.description.toLowerCase().includes(f)||h.modId.toLowerCase().includes(f))},[o,a]),u=R.useCallback((f,h)=>{n(m=>{const g=new Set(m);return h?g.add(f):g.delete(f),g})},[n]),c=R.useCallback(f=>{n(()=>f?new Set(o.map(h=>h.name)):new Set)},[o,n]);return y.jsxs("div",{className:Dt("p-4 h-96 max-w-2xl space-y-3",e),children:[y.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),y.jsxs("div",{className:"relative",children:[y.jsx(Xv,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(kr,{type:"search",placeholder:"Filter tools...",value:a,onChange:f=>i(f.target.value),className:"pl-8 h-9"})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs(Ln,{className:"text-xs text-muted-foreground",children:[s.length," tools shown (",t.size," enabled)"]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx(Ut,{variant:"outline",size:"sm",onClick:()=>c(!0),disabled:o.length===0,children:"Enable All"}),y.jsx(Ut,{variant:"outline",size:"sm",onClick:()=>c(!1),disabled:o.length===0||t.size===0,children:"Disable All"})]})]}),y.jsx(sg,{className:"h-56 border rounded-md p-2 bg-background/50",children:o.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):s.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):y.jsx("div",{className:"space-y-1",children:s.map(f=>y.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[y.jsx(Bl,{id:`tool-switch-${f.name}`,checked:t.has(f.name),onCheckedChange:h=>u(f.name,h),className:"flex-shrink-0"}),y.jsxs(Ln,{htmlFor:`tool-switch-${f.name}`,className:"text-sm font-normal flex-grow cursor-pointer pl-2",title:`${f.name} (from ${f.modId})`,children:[y.jsx("span",{className:"block font-medium",children:f.name}),y.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:f.description})]})]},f.name))})})]})};function l1e(){const e=ma(t=>t.registerPromptControl);R.useEffect(()=>e({id:"core-tool-selector",order:30,show:()=>Object.keys(ma.getState().tools).length>0,triggerRenderer:()=>{const n=zu.getState().enabledTools.size;return y.jsxs(vA,{children:[y.jsx(wA,{asChild:!0,children:y.jsxs(Ut,{variant:"outline",size:"sm",className:"h-8 relative","aria-label":"Select Tools",children:[y.jsx(lC,{className:"h-4 w-4 mr-1"}),"Tools",n>0&&y.jsx(UO,{variant:"secondary",className:"absolute -top-1 -right-1 px-1.5 py-0 text-[10px] leading-none rounded-full",children:n})]})}),y.jsx(_A,{className:"w-auto p-0",align:"start",children:y.jsx(s1e,{})})]})},renderer:void 0,getMetadata:()=>{const n=zu.getState().enabledTools;return{enabledTools:n.size>0?Array.from(n):void 0}},clearOnSubmit:()=>{zu.getState().setEnabledTools(()=>new Set)}}),[e])}const u1e=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},c1e=()=>{const{selectedItemId:e,selectedItemType:t,loadSidebarItems:n,addConversation:r,selectItem:a,getProjectById:i,getConversationById:o}=Wl(Hn(W=>({selectedItemId:W.selectedItemId,selectedItemType:W.selectedItemType,loadSidebarItems:W.loadSidebarItems,addConversation:W.addConversation,selectItem:W.selectItem,getProjectById:W.getProjectById,getConversationById:W.getConversationById}))),{interactions:s,status:u,setCurrentConversationId:c}=ar(Hn(W=>({interactions:W.interactions,status:W.status,setCurrentConversationId:W.setCurrentConversationId}))),{globalError:f,isSidebarCollapsed:h}=Uo(Hn(W=>({globalError:W.globalError,isSidebarCollapsed:W.isSidebarCollapsed}))),m=Uo(W=>W.isChatControlPanelOpen.settingsModal??!1),g=ma(W=>W.chatControls),w=R.useMemo(()=>Object.values(g),[g]),{loadDbMods:v,setLoadedMods:_}=f0(Hn(W=>({loadDbMods:W.loadDbMods,setLoadedMods:W.setLoadedMods}))),{loadInitialData:x}=Ai(Hn(W=>({loadInitialData:W.loadInitialData}))),{loadSettings:S,globalSystemPrompt:E}=ga(Hn(W=>({loadSettings:W.loadSettings,globalSystemPrompt:W.globalSystemPrompt})));Dhe(),$ye(),Uye(),Pbe(),Lbe(),zbe(),dwe(),Gwe(),i1e(),o1e(),l1e(),R.useEffect(()=>{let W=!0;return(async()=>{if(console.log("LiteChat: Starting initialization..."),!!W&&(await S(),console.log("LiteChat: Settings loaded."),!!W&&(await x(),console.log("LiteChat: Provider data loaded."),!!W&&(await n(),console.log("LiteChat: Sidebar items loaded."),!!W&&(await v(),console.log("LiteChat: DB Mods loaded."),!!W))))){try{const he=f0.getState().dbMods;if(console.log(`LiteChat: Loading ${he.length} mods...`),!W)return;const ae=await she(he);W&&(_(ae),console.log(`LiteChat: ${ae.length} mods processed.`))}catch(he){console.error("LiteChat: Failed to load mods:",he)}W&&console.log("LiteChat: Initialization complete.")}})(),()=>{W=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[n,v,_,x,S]);const C=R.useCallback(W=>W.flatMap(U=>{var ae,re,ee,se,V,X;const he=[];if((ae=U.prompt)!=null&&ae.content&&typeof U.prompt.content=="string"?he.push({role:"user",content:U.prompt.content}):(ee=(re=U.prompt)==null?void 0:re.metadata)!=null&&ee.attachedFiles&&U.prompt.metadata.attachedFiles.length>0&&((se=U.prompt)!=null&&se.content),U.response&&typeof U.response=="string"&&he.push({role:"assistant",content:U.response}),(V=U.metadata)!=null&&V.toolCalls&&Array.isArray(U.metadata.toolCalls)){const Y=[];U.metadata.toolCalls.forEach(ne=>{try{const be=JSON.parse(ne);be&&be.type==="tool-call"&&be.toolCallId&&be.toolName&&be.args!==void 0?Y.push(be):console.warn("[LiteChat] buildHistory: Invalid tool call structure after parsing:",ne)}catch(be){console.error("[LiteChat] buildHistory: Failed to parse tool call string:",ne,be)}}),Y.length>0&&he.push({role:"assistant",content:Y})}if((X=U.metadata)!=null&&X.toolResults&&Array.isArray(U.metadata.toolResults)){const Y=[];U.metadata.toolResults.forEach(ne=>{try{const be=JSON.parse(ne);be&&be.type==="tool-result"&&be.toolCallId&&be.toolName&&be.result!==void 0?Y.push(be):console.warn("[LiteChat] buildHistory: Invalid tool result structure after parsing:",ne)}catch(be){console.error("[LiteChat] buildHistory: Failed to parse tool result string:",ne,be)}}),Y.length>0&&he.push({role:"tool",content:Y})}return he}),[]),A=R.useCallback(async W=>{var Ee,De,Pe;let U=t==="conversation"?e:null;const he=t==="project"?e:t==="conversation"?((Ee=o(e))==null?void 0:Ee.projectId)??null:null,ae=Uo.getState().setFocusInputFlag;if(!Ai.getState().selectedModelId){dt.error("Please select a model before sending a message.");return}if(!U){console.log("LiteChat: No conversation selected, creating new one...");try{U=await r({title:"New Chat",projectId:he}),a(U,"conversation"),setTimeout(()=>ae(!0),0),await new Promise(Re=>setTimeout(Re,0)),console.log(`LiteChat: New conversation created and selected: ${U}`)}catch(Re){console.error("LiteChat: Failed to create new conversation",Re),dt.error("Failed to start new chat.");return}}ar.getState().currentConversationId!==U&&(console.log(`LiteChat: Syncing InteractionStore to conversation ${U}`),c(U),setTimeout(()=>ae(!0),0),await new Promise(Re=>setTimeout(Re,0)));const V=ar.getState().interactions.filter(Re=>Re.status==="COMPLETED"&&Re.type==="message.user_assistant"),X=C(V);if(W.content)X.push({role:"user",content:W.content});else if((Pe=(De=W.metadata)==null?void 0:De.attachedFiles)!=null&&Pe.length)X.push({role:"user",content:""});else{console.error("LiteChat: Attempting to submit with no content."),dt.error("Cannot send an empty message.");return}const Y=i(he),be={system:(Y==null?void 0:Y.systemPrompt)??E??void 0,messages:X,parameters:W.parameters,metadata:W.metadata};Ei.emit("prompt:finalised",{prompt:be}),console.log("LiteChat: Submitting prompt to AIService:",be);try{await wb.startInteraction(be,W),console.log("LiteChat: AIService interaction started.")}catch(Re){console.error("LiteChat: Error starting AI interaction:",Re),dt.error(`Failed to start AI interaction: ${Re instanceof Error?Re.message:String(Re)}`)}},[e,t,r,a,c,E,C,i,o]),O=R.useCallback(async W=>{var Re,Te,He,it,Ie;console.log(`LiteChat: Regenerating interaction ${W}`);const U=ar.getState(),he=U.interactions.find(Ae=>Ae.id===W);if(!he||!he.prompt){console.error(`LiteChat: Cannot regenerate - interaction ${W} or its prompt not found.`),dt.error("Cannot regenerate: Original interaction data missing.");return}if(he.type!=="message.user_assistant"){console.error(`LiteChat: Cannot regenerate non-user_assistant interaction: ${W}`),dt.error("Can only regenerate from a user message interaction.");return}const ae=o(he.conversationId),re=(ae==null?void 0:ae.projectId)??null,ee=i(re),se=Ai.getState().selectedModelId;if(!se){dt.error("Please select a model before regenerating.");return}const{providerId:V,modelId:X}=u1e(se);if(!V||!X){dt.error("Invalid model selection for regeneration.");return}const Y=he.index,ne=U.interactions.filter(Ae=>Ae.conversationId===he.conversationId&&Ae.index<Y&&Ae.status==="COMPLETED"&&Ae.type==="message.user_assistant").sort((Ae,z)=>Ae.index-z.index),be=C(ne);if((Re=he.prompt)!=null&&Re.content&&typeof he.prompt.content=="string")be.push({role:"user",content:he.prompt.content});else if((it=(He=(Te=he.prompt)==null?void 0:Te.metadata)==null?void 0:He.attachedFiles)!=null&&it.length)be.push({role:"user",content:""});else{console.error(`LiteChat: Cannot regenerate - missing or invalid user prompt content in interaction ${W}.`),dt.error("Cannot regenerate: Original user prompt missing.");return}const Ee=(ee==null?void 0:ee.systemPrompt)??ga.getState().globalSystemPrompt??void 0,De={...he.prompt.metadata,regeneratedFromId:W,providerId:V,modelId:X,attachedFiles:void 0,enabledTools:(Ie=he.prompt.metadata)==null?void 0:Ie.enabledTools},Pe={system:Ee,messages:be,parameters:he.prompt.parameters,metadata:De};Ei.emit("prompt:finalised",{prompt:Pe}),console.log(`LiteChat: Submitting regeneration request for ${W}:`,Pe);try{await wb.startInteraction(Pe,he.prompt),console.log(`LiteChat: AIService regeneration interaction started for ${W}.`)}catch(Ae){console.error(`LiteChat: Error starting regeneration for ${W}:`,Ae),dt.error("Failed to start regeneration.")}},[C,i,o]),I=R.useCallback(W=>{console.log(`LiteChat: Stopping interaction ${W}`),wb.stopInteraction(W)},[]),D=R.useMemo(()=>w.filter(W=>(W.panel??"main")==="sidebar"&&(W.show?W.show():!0)).sort((W,U)=>(W.order??1/0)-(U.order??1/0)),[w]),B=R.useMemo(()=>w.filter(W=>W.panel==="sidebar-footer"&&(W.show?W.show():!0)).sort((W,U)=>(W.order??1/0)-(U.order??1/0)),[w]),K=R.useMemo(()=>w.filter(W=>W.panel==="header"&&(W.show?W.show():!0)).sort((W,U)=>(W.order??1/0)-(U.order??1/0)),[w]),Q=R.useMemo(()=>{var W;return(W=w.find(U=>U.id==="core-settings-trigger"))==null?void 0:W.settingsRenderer},[w]),F=t==="conversation"?e:null;return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Dt("flex h-full w-full border border-[--border] rounded-lg overflow-hidden bg-background text-foreground"),children:[y.jsxs("div",{className:Dt("hidden md:flex flex-col border-r border-[--border] bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",h?"w-16":"w-64"),children:[y.jsxs("div",{className:Dt("flex-grow overflow-y-auto overflow-x-hidden"),children:[y.jsx("div",{className:Dt(h?"hidden":"block"),children:y.jsx(Qy,{controls:D,panelId:"sidebar",renderMode:"full",className:"h-full"})}),y.jsx("div",{className:Dt(h?"block":"hidden"),children:y.jsx(Qy,{controls:D,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),y.jsx("div",{className:Dt("flex-shrink-0 border-t border-[--border] p-2",h?"flex flex-col items-center gap-2":"flex items-center justify-between"),children:y.jsx(Qy,{controls:B,panelId:"sidebar-footer",renderMode:h?"icon":"full",className:Dt("flex",h?"flex-col gap-2":"items-center gap-1")})})]}),y.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center justify-end p-2 border-b border-[--border] bg-card flex-shrink-0",children:y.jsx(Qy,{controls:K,panelId:"header",className:"flex items-center justify-end gap-1"})}),y.jsx(tre,{conversationId:F,interactions:s,onRegenerateInteraction:O,onStopInteraction:I,status:u,className:"flex-grow overflow-y-auto p-4 space-y-4"}),f&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",f]}),y.jsx(zH,{InputAreaRenderer:MF,onSubmit:A,className:"border-t border-[--border] bg-card flex-shrink-0"})]})]}),m&&Q&&Q(),y.jsx(fhe,{richColors:!0,position:"top-right"})]})};function d1e(){return y.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:y.jsx("main",{className:"flex-grow overflow-hidden",children:y.jsx(c1e,{})})})}fU();function f1e({children:e}){const t=ga(n=>n.theme);return R.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),y.jsx(y.Fragment,{children:e})}fz.createRoot(document.getElementById("root")).render(y.jsx(vt.StrictMode,{children:y.jsx(f1e,{children:y.jsx(d1e,{})})}));
