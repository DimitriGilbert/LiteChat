const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dagre-OKDRZEBW-Bouhw-G9.js","assets/graph-Du28OEgt.js","assets/_baseUniq-BxaFkORA.js","assets/layout-OLwvrPzv.js","assets/_basePickBy-BIs2yWHQ.js","assets/clone-DUV_2toT.js","assets/c4Diagram-VJAJSXHY-CeR5mAZe.js","assets/chunk-D6G4REZN-zKf9EKPF.js","assets/flowDiagram-4HSFHLVR-BrbjO9jf.js","assets/chunk-RZ5BOZE2-B1wScoS-.js","assets/channel-k1ZKg02k.js","assets/erDiagram-Q7BY3M3F-dpgpAh85.js","assets/gitGraphDiagram-7IBYFJ6S-DgpZ79PR.js","assets/chunk-4BMEZGHF-GXUPwi_C.js","assets/chunk-XZIHB7SX-BLCTsCF8.js","assets/radar-MK3ICKWK-D_uaUBR0.js","assets/ganttDiagram-APWFNJXF-DNj2O2Nh.js","assets/linear-V0W7ws32.js","assets/init-Gi6I4Gst.js","assets/infoDiagram-PH2N3AL5-c3SyRa8v.js","assets/pieDiagram-IB7DONF6-DSBUQhop.js","assets/arc-BswGg-7r.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-7GDLP6J5-DE8tEgp8.js","assets/xychartDiagram-VJFVF3MP-DzmPN1hM.js","assets/requirementDiagram-KVF5MWMF-DNurxv1a.js","assets/sequenceDiagram-X6HHIX6F-qVjFHMm1.js","assets/classDiagram-GIVACNV2-Cu1h-hIZ.js","assets/chunk-A2AXSNBT-jYXxeHFv.js","assets/classDiagram-v2-COTLJTTW-Cu1h-hIZ.js","assets/stateDiagram-DGXRK772-gLshp-wv.js","assets/chunk-AEK57VVT-EuPoaL0q.js","assets/stateDiagram-v2-YXO3MK2T-B6kWpfrU.js","assets/journeyDiagram-U35MCT3I-Bmv61SIJ.js","assets/timeline-definition-BDJGKUSR-DiCFFxoj.js","assets/mindmap-definition-ALO5MXBD-DRlGWT3o.js","assets/cytoscape.esm-5mnZSJFx.js","assets/sankeyDiagram-QLVOVGJD-WsflEHXC.js","assets/diagram-VNBRO52H--1nayhVw.js","assets/diagram-SSKATNLV-BlZ__QQf.js","assets/blockDiagram-JOT3LUYC-B3h2gQZO.js","assets/architectureDiagram-IEHRJDOE-BdpKqh0S.js"])))=>i.map(i=>d[i]);
var gfe=Object.defineProperty;var yfe=(e,t,n)=>t in e?gfe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var we=(e,t,n)=>yfe(e,typeof t!="symbol"?t+"":t,n);function bfe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var mp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ma(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var TR={exports:{}},Vb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xL;function vfe(){if(xL)return Vb;xL=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Vb.Fragment=t,Vb.jsx=n,Vb.jsxs=n,Vb}var wL;function xfe(){return wL||(wL=1,TR.exports=vfe()),TR.exports}var p=xfe(),AR={exports:{}};function wfe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tH={exports:{}},fs=tH.exports={},$c,zc;function a3(){throw new Error("setTimeout has not been defined")}function o3(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?$c=setTimeout:$c=a3}catch{$c=a3}try{typeof clearTimeout=="function"?zc=clearTimeout:zc=o3}catch{zc=o3}})();function nH(e){if($c===setTimeout)return setTimeout(e,0);if(($c===a3||!$c)&&setTimeout)return $c=setTimeout,setTimeout(e,0);try{return $c(e,0)}catch{try{return $c.call(null,e,0)}catch{return $c.call(this,e,0)}}}function _fe(e){if(zc===clearTimeout)return clearTimeout(e);if((zc===o3||!zc)&&clearTimeout)return zc=clearTimeout,clearTimeout(e);try{return zc(e)}catch{try{return zc.call(null,e)}catch{return zc.call(this,e)}}}var ad=[],qg=!1,gp,BS=-1;function Sfe(){!qg||!gp||(qg=!1,gp.length?ad=gp.concat(ad):BS=-1,ad.length&&rH())}function rH(){if(!qg){var e=nH(Sfe);qg=!0;for(var t=ad.length;t;){for(gp=ad,ad=[];++BS<t;)gp&&gp[BS].run();BS=-1,t=ad.length}gp=null,qg=!1,_fe(e)}}fs.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ad.push(new iH(e,t)),ad.length===1&&!qg&&nH(rH)};function iH(e,t){this.fun=e,this.array=t}iH.prototype.run=function(){this.fun.apply(null,this.array)};fs.title="browser";fs.browser=!0;fs.env={};fs.argv=[];fs.version="";fs.versions={};function Rd(){}fs.on=Rd;fs.addListener=Rd;fs.once=Rd;fs.off=Rd;fs.removeListener=Rd;fs.removeAllListeners=Rd;fs.emit=Rd;fs.prependListener=Rd;fs.prependOnceListener=Rd;fs.listeners=function(e){return[]};fs.binding=function(e){throw new Error("process.binding is not supported")};fs.cwd=function(){return"/"};fs.chdir=function(e){throw new Error("process.chdir is not supported")};fs.umask=function(){return 0};var Cfe=tH.exports;const os=wfe(Cfe);var _r={},_L;function kfe(){if(_L)return _r;_L=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(H){return H===null||typeof H!="object"?null:(H=d&&H[d]||H["@@iterator"],typeof H=="function"?H:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function v(H,te,ee){this.props=H,this.context=te,this.refs=b,this.updater=ee||m}v.prototype.isReactComponent={},v.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},v.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function x(){}x.prototype=v.prototype;function _(H,te,ee){this.props=H,this.context=te,this.refs=b,this.updater=ee||m}var S=_.prototype=new x;S.constructor=_,y(S,v.prototype),S.isPureReactComponent=!0;var C=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},A=Object.prototype.hasOwnProperty;function R(H,te,ee,se,he,ce){return ee=ce.ref,{$$typeof:e,type:H,key:te,ref:ee!==void 0?ee:null,props:ce}}function N(H,te){return R(H.type,te,void 0,void 0,void 0,H.props)}function M(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function P(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ee){return te[ee]})}var L=/\/+/g;function O(H,te){return typeof H=="object"&&H!==null&&H.key!=null?P(""+H.key):te.toString(36)}function V(){}function F(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(V,V):(H.status="pending",H.then(function(te){H.status==="pending"&&(H.status="fulfilled",H.value=te)},function(te){H.status==="pending"&&(H.status="rejected",H.reason=te)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function J(H,te,ee,se,he){var ce=typeof H;(ce==="undefined"||ce==="boolean")&&(H=null);var Me=!1;if(H===null)Me=!0;else switch(ce){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(H.$$typeof){case e:case t:Me=!0;break;case u:return Me=H._init,J(Me(H._payload),te,ee,se,he)}}if(Me)return he=he(H),Me=se===""?"."+O(H,0):se,C(he)?(ee="",Me!=null&&(ee=Me.replace(L,"$&/")+"/"),J(he,te,ee,"",function(Ce){return Ce})):he!=null&&(M(he)&&(he=N(he,ee+(he.key==null||H&&H.key===he.key?"":(""+he.key).replace(L,"$&/")+"/")+Me)),te.push(he)),1;Me=0;var je=se===""?".":se+":";if(C(H))for(var Ne=0;Ne<H.length;Ne++)se=H[Ne],ce=je+O(se,Ne),Me+=J(se,te,ee,ce,he);else if(Ne=h(H),typeof Ne=="function")for(H=Ne.call(H),Ne=0;!(se=H.next()).done;)se=se.value,ce=je+O(se,Ne++),Me+=J(se,te,ee,ce,he);else if(ce==="object"){if(typeof H.then=="function")return J(F(H),te,ee,se,he);throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Me}function U(H,te,ee){if(H==null)return H;var se=[],he=0;return J(H,se,"","",function(ce){return te.call(ee,ce,he++)}),se}function G(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(ee){(H._status===0||H._status===-1)&&(H._status=1,H._result=ee)},function(ee){(H._status===0||H._status===-1)&&(H._status=2,H._result=ee)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var $=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(te))return}else if(typeof os=="object"&&typeof os.emit=="function"){os.emit("uncaughtException",H);return}console.error(H)};function ne(){}return _r.Children={map:U,forEach:function(H,te,ee){U(H,function(){te.apply(this,arguments)},ee)},count:function(H){var te=0;return U(H,function(){te++}),te},toArray:function(H){return U(H,function(te){return te})||[]},only:function(H){if(!M(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},_r.Component=v,_r.Fragment=n,_r.Profiler=i,_r.PureComponent=_,_r.StrictMode=r,_r.Suspense=l,_r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,_r.__COMPILER_RUNTIME={__proto__:null,c:function(H){return E.H.useMemoCache(H)}},_r.cache=function(H){return function(){return H.apply(null,arguments)}},_r.cloneElement=function(H,te,ee){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var se=y({},H.props),he=H.key,ce=void 0;if(te!=null)for(Me in te.ref!==void 0&&(ce=void 0),te.key!==void 0&&(he=""+te.key),te)!A.call(te,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&te.ref===void 0||(se[Me]=te[Me]);var Me=arguments.length-2;if(Me===1)se.children=ee;else if(1<Me){for(var je=Array(Me),Ne=0;Ne<Me;Ne++)je[Ne]=arguments[Ne+2];se.children=je}return R(H.type,he,void 0,void 0,ce,se)},_r.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:s,_context:H},H},_r.createElement=function(H,te,ee){var se,he={},ce=null;if(te!=null)for(se in te.key!==void 0&&(ce=""+te.key),te)A.call(te,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(he[se]=te[se]);var Me=arguments.length-2;if(Me===1)he.children=ee;else if(1<Me){for(var je=Array(Me),Ne=0;Ne<Me;Ne++)je[Ne]=arguments[Ne+2];he.children=je}if(H&&H.defaultProps)for(se in Me=H.defaultProps,Me)he[se]===void 0&&(he[se]=Me[se]);return R(H,ce,void 0,void 0,null,he)},_r.createRef=function(){return{current:null}},_r.forwardRef=function(H){return{$$typeof:o,render:H}},_r.isValidElement=M,_r.lazy=function(H){return{$$typeof:u,_payload:{_status:-1,_result:H},_init:G}},_r.memo=function(H,te){return{$$typeof:c,type:H,compare:te===void 0?null:te}},_r.startTransition=function(H){var te=E.T,ee={};E.T=ee;try{var se=H(),he=E.S;he!==null&&he(ee,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ne,$)}catch(ce){$(ce)}finally{E.T=te}},_r.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},_r.use=function(H){return E.H.use(H)},_r.useActionState=function(H,te,ee){return E.H.useActionState(H,te,ee)},_r.useCallback=function(H,te){return E.H.useCallback(H,te)},_r.useContext=function(H){return E.H.useContext(H)},_r.useDebugValue=function(){},_r.useDeferredValue=function(H,te){return E.H.useDeferredValue(H,te)},_r.useEffect=function(H,te,ee){var se=E.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(H,te)},_r.useId=function(){return E.H.useId()},_r.useImperativeHandle=function(H,te,ee){return E.H.useImperativeHandle(H,te,ee)},_r.useInsertionEffect=function(H,te){return E.H.useInsertionEffect(H,te)},_r.useLayoutEffect=function(H,te){return E.H.useLayoutEffect(H,te)},_r.useMemo=function(H,te){return E.H.useMemo(H,te)},_r.useOptimistic=function(H,te){return E.H.useOptimistic(H,te)},_r.useReducer=function(H,te,ee){return E.H.useReducer(H,te,ee)},_r.useRef=function(H){return E.H.useRef(H)},_r.useState=function(H){return E.H.useState(H)},_r.useSyncExternalStore=function(H,te,ee){return E.H.useSyncExternalStore(H,te,ee)},_r.useTransition=function(){return E.H.useTransition()},_r.version="19.1.0",_r}var SL;function vw(){return SL||(SL=1,AR.exports=kfe()),AR.exports}var T=vw();const lt=ma(T),sH=bfe({__proto__:null,default:lt},[T]);var RR={exports:{}},Hb={},IR={exports:{}},NR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CL;function Efe(){return CL||(CL=1,function(e){function t(U,G){var $=U.length;U.push(G);e:for(;0<$;){var ne=$-1>>>1,H=U[ne];if(0<i(H,G))U[ne]=G,U[$]=H,$=ne;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var G=U[0],$=U.pop();if($!==G){U[0]=$;e:for(var ne=0,H=U.length,te=H>>>1;ne<te;){var ee=2*(ne+1)-1,se=U[ee],he=ee+1,ce=U[he];if(0>i(se,$))he<H&&0>i(ce,se)?(U[ne]=ce,U[he]=$,ne=he):(U[ne]=se,U[ee]=$,ne=ee);else if(he<H&&0>i(ce,$))U[ne]=ce,U[he]=$,ne=he;else break e}}return G}function i(U,G){var $=U.sortIndex-G.sortIndex;return $!==0?$:U.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,m=!1,y=!1,b=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function C(U){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=U)r(c),G.sortIndex=G.expirationTime,t(l,G);else break;G=n(c)}}function E(U){if(b=!1,C(U),!y)if(n(l)!==null)y=!0,A||(A=!0,O());else{var G=n(c);G!==null&&J(E,G.startTime-U)}}var A=!1,R=-1,N=5,M=-1;function P(){return v?!0:!(e.unstable_now()-M<N)}function L(){if(v=!1,A){var U=e.unstable_now();M=U;var G=!0;try{e:{y=!1,b&&(b=!1,_(R),R=-1),m=!0;var $=h;try{t:{for(C(U),d=n(l);d!==null&&!(d.expirationTime>U&&P());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,h=d.priorityLevel;var H=ne(d.expirationTime<=U);if(U=e.unstable_now(),typeof H=="function"){d.callback=H,C(U),G=!0;break t}d===n(l)&&r(l),C(U)}else r(l);d=n(l)}if(d!==null)G=!0;else{var te=n(c);te!==null&&J(E,te.startTime-U),G=!1}}break e}finally{d=null,h=$,m=!1}G=void 0}}finally{G?O():A=!1}}}var O;if(typeof S=="function")O=function(){S(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,F=V.port2;V.port1.onmessage=L,O=function(){F.postMessage(null)}}else O=function(){x(L,0)};function J(U,G){R=x(function(){U(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(U){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var $=h;h=G;try{return U()}finally{h=$}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var $=h;h=U;try{return G()}finally{h=$}},e.unstable_scheduleCallback=function(U,G,$){var ne=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ne+$:ne):$=ne,U){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=$+H,U={id:u++,callback:G,priorityLevel:U,startTime:$,expirationTime:H,sortIndex:-1},$>ne?(U.sortIndex=$,t(c,U),n(l)===null&&U===n(c)&&(b?(_(R),R=-1):b=!0,J(E,$-ne))):(U.sortIndex=H,t(l,U),y||m||(y=!0,A||(A=!0,O()))),U},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(U){var G=h;return function(){var $=h;h=G;try{return U.apply(this,arguments)}finally{h=$}}}}(NR)),NR}var kL;function Tfe(){return kL||(kL=1,IR.exports=Efe()),IR.exports}var MR={exports:{}},xa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EL;function Afe(){if(EL)return xa;EL=1;var e=vw();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:u}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return xa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xa.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return s(l,c,null,u)},xa.flushSync=function(l){var c=a.T,u=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=u,r.d.f()}},xa.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},xa.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},xa.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,d=o(u,c.crossOrigin),h=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:h,fetchPriority:m}):u==="script"&&r.d.X(l,{crossOrigin:d,integrity:h,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},xa.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},xa.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,d=o(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},xa.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},xa.requestFormReset=function(l){r.d.r(l)},xa.unstable_batchedUpdates=function(l,c){return l(c)},xa.useFormState=function(l,c,u){return a.H.useFormState(l,c,u)},xa.useFormStatus=function(){return a.H.useHostTransitionStatus()},xa.version="19.1.0",xa}var TL;function aH(){if(TL)return MR.exports;TL=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),MR.exports=Afe(),MR.exports}var AL;function Rfe(){if(AL)return Hb;AL=1;var e=Tfe(),t=vw(),n=aH();function r(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var g=f,w=f;if(f.alternate)for(;g.return;)g=g.return;else{f=g;do g=f,(g.flags&4098)!==0&&(w=g.return),f=g.return;while(f)}return g.tag===3?w:null}function a(f){if(f.tag===13){var g=f.memoizedState;if(g===null&&(f=f.alternate,f!==null&&(g=f.memoizedState)),g!==null)return g.dehydrated}return null}function o(f){if(s(f)!==f)throw Error(r(188))}function l(f){var g=f.alternate;if(!g){if(g=s(f),g===null)throw Error(r(188));return g!==f?null:f}for(var w=f,k=g;;){var j=w.return;if(j===null)break;var q=j.alternate;if(q===null){if(k=j.return,k!==null){w=k;continue}break}if(j.child===q.child){for(q=j.child;q;){if(q===w)return o(j),f;if(q===k)return o(j),g;q=q.sibling}throw Error(r(188))}if(w.return!==k.return)w=j,k=q;else{for(var ue=!1,Te=j.child;Te;){if(Te===w){ue=!0,w=j,k=q;break}if(Te===k){ue=!0,k=j,w=q;break}Te=Te.sibling}if(!ue){for(Te=q.child;Te;){if(Te===w){ue=!0,w=q,k=j;break}if(Te===k){ue=!0,k=q,w=j;break}Te=Te.sibling}if(!ue)throw Error(r(189))}}if(w.alternate!==k)throw Error(r(190))}if(w.tag!==3)throw Error(r(188));return w.stateNode.current===w?f:g}function c(f){var g=f.tag;if(g===5||g===26||g===27||g===6)return f;for(f=f.child;f!==null;){if(g=c(f),g!==null)return g;f=f.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function O(f){return f===null||typeof f!="object"?null:(f=L&&f[L]||f["@@iterator"],typeof f=="function"?f:null)}var V=Symbol.for("react.client.reference");function F(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===V?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case y:return"Fragment";case v:return"Profiler";case b:return"StrictMode";case E:return"Suspense";case A:return"SuspenseList";case M:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case m:return"Portal";case S:return(f.displayName||"Context")+".Provider";case _:return(f._context.displayName||"Context")+".Consumer";case C:var g=f.render;return f=f.displayName,f||(f=g.displayName||g.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case R:return g=f.displayName||null,g!==null?g:F(f.type)||"Memo";case N:g=f._payload,f=f._init;try{return F(f(g))}catch{}}return null}var J=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},ne=[],H=-1;function te(f){return{current:f}}function ee(f){0>H||(f.current=ne[H],ne[H]=null,H--)}function se(f,g){H++,ne[H]=f.current,f.current=g}var he=te(null),ce=te(null),Me=te(null),je=te(null);function Ne(f,g){switch(se(Me,g),se(ce,f),se(he,null),g.nodeType){case 9:case 11:f=(f=g.documentElement)&&(f=f.namespaceURI)?K8(f):0;break;default:if(f=g.tagName,g=g.namespaceURI)g=K8(g),f=Y8(g,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}ee(he),se(he,f)}function Ce(){ee(he),ee(ce),ee(Me)}function Ue(f){f.memoizedState!==null&&se(je,f);var g=he.current,w=Y8(g,f.type);g!==w&&(se(ce,f),se(he,w))}function et(f){ce.current===f&&(ee(he),ee(ce)),je.current===f&&(ee(je),Bb._currentValue=$)}var qe=Object.prototype.hasOwnProperty,Re=e.unstable_scheduleCallback,K=e.unstable_cancelCallback,ge=e.unstable_shouldYield,Ae=e.unstable_requestPaint,le=e.unstable_now,oe=e.unstable_getCurrentPriorityLevel,ie=e.unstable_ImmediatePriority,Ee=e.unstable_UserBlockingPriority,Be=e.unstable_NormalPriority,ke=e.unstable_LowPriority,ct=e.unstable_IdlePriority,It=e.log,ht=e.unstable_setDisableYieldValue,Ot=null,zt=null;function Bt(f){if(typeof It=="function"&&ht(f),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Ot,f)}catch{}}var rn=Math.clz32?Math.clz32:Z,ve=Math.log,D=Math.LN2;function Z(f){return f>>>=0,f===0?32:31-(ve(f)/D|0)|0}var pe=256,Oe=4194304;function xe(f){var g=f&42;if(g!==0)return g;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function Ie(f,g,w){var k=f.pendingLanes;if(k===0)return 0;var j=0,q=f.suspendedLanes,ue=f.pingedLanes;f=f.warmLanes;var Te=k&134217727;return Te!==0?(k=Te&~q,k!==0?j=xe(k):(ue&=Te,ue!==0?j=xe(ue):w||(w=Te&~f,w!==0&&(j=xe(w))))):(Te=k&~q,Te!==0?j=xe(Te):ue!==0?j=xe(ue):w||(w=k&~f,w!==0&&(j=xe(w)))),j===0?0:g!==0&&g!==j&&(g&q)===0&&(q=j&-j,w=g&-g,q>=w||q===32&&(w&4194048)!==0)?g:j}function de(f,g){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&g)===0}function bt(f,g){switch(f){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function St(){var f=pe;return pe<<=1,(pe&4194048)===0&&(pe=256),f}function z(){var f=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),f}function Ve(f){for(var g=[],w=0;31>w;w++)g.push(f);return g}function it(f,g){f.pendingLanes|=g,g!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function be(f,g,w,k,j,q){var ue=f.pendingLanes;f.pendingLanes=w,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=w,f.entangledLanes&=w,f.errorRecoveryDisabledLanes&=w,f.shellSuspendCounter=0;var Te=f.entanglements,Ge=f.expirationTimes,vt=f.hiddenUpdates;for(w=ue&~w;0<w;){var jt=31-rn(w),Ft=1<<jt;Te[jt]=0,Ge[jt]=-1;var _t=vt[jt];if(_t!==null)for(vt[jt]=null,jt=0;jt<_t.length;jt++){var Ct=_t[jt];Ct!==null&&(Ct.lane&=-536870913)}w&=~Ft}k!==0&&_e(f,k,0),q!==0&&j===0&&f.tag!==0&&(f.suspendedLanes|=q&~(ue&~g))}function _e(f,g,w){f.pendingLanes|=g,f.suspendedLanes&=~g;var k=31-rn(g);f.entangledLanes|=g,f.entanglements[k]=f.entanglements[k]|1073741824|w&4194090}function ze(f,g){var w=f.entangledLanes|=g;for(f=f.entanglements;w;){var k=31-rn(w),j=1<<k;j&g|f[k]&g&&(f[k]|=g),w&=~j}}function Rt(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function me(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function Y(){var f=G.p;return f!==0?f:(f=window.event,f===void 0?32:pL(f.type))}function W(f,g){var w=G.p;try{return G.p=f,g()}finally{G.p=w}}var X=Math.random().toString(36).slice(2),ye="__reactFiber$"+X,Pe="__reactProps$"+X,We="__reactContainer$"+X,xt="__reactEvents$"+X,Qt="__reactListeners$"+X,Fn="__reactHandles$"+X,Zt="__reactResources$"+X,tn="__reactMarker$"+X;function cn(f){delete f[ye],delete f[Pe],delete f[xt],delete f[Qt],delete f[Fn]}function dr(f){var g=f[ye];if(g)return g;for(var w=f.parentNode;w;){if(g=w[We]||w[ye]){if(w=g.alternate,g.child!==null||w!==null&&w.child!==null)for(f=Q8(f);f!==null;){if(w=f[ye])return w;f=Q8(f)}return g}f=w,w=f.parentNode}return null}function Cr(f){if(f=f[ye]||f[We]){var g=f.tag;if(g===5||g===6||g===13||g===26||g===27||g===3)return f}return null}function Jr(f){var g=f.tag;if(g===5||g===26||g===27||g===6)return f.stateNode;throw Error(r(33))}function Qr(f){var g=f[Zt];return g||(g=f[Zt]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function br(f){f[tn]=!0}var hn=new Set,Xe={};function Ut(f,g){pn(f,g),pn(f+"Capture",g)}function pn(f,g){for(Xe[f]=g,f=0;f<g.length;f++)hn.add(g[f])}var Xn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_i={},Yr={};function ks(f){return qe.call(Yr,f)?!0:qe.call(_i,f)?!1:Xn.test(f)?Yr[f]=!0:(_i[f]=!0,!1)}function ts(f,g,w){if(ks(g))if(w===null)f.removeAttribute(g);else{switch(typeof w){case"undefined":case"function":case"symbol":f.removeAttribute(g);return;case"boolean":var k=g.toLowerCase().slice(0,5);if(k!=="data-"&&k!=="aria-"){f.removeAttribute(g);return}}f.setAttribute(g,""+w)}}function Pa(f,g,w){if(w===null)f.removeAttribute(g);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(g);return}f.setAttribute(g,""+w)}}function ra(f,g,w,k){if(k===null)f.removeAttribute(w);else{switch(typeof k){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(w);return}f.setAttributeNS(g,w,""+k)}}var Li,Ro;function el(f){if(Li===void 0)try{throw Error()}catch(w){var g=w.stack.trim().match(/\n( *(at )?)/);Li=g&&g[1]||"",Ro=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Li+f+Ro}var Bd=!1;function Sm(f,g){if(!f||Bd)return"";Bd=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var k={DetermineComponentFrameRoot:function(){try{if(g){var Ft=function(){throw Error()};if(Object.defineProperty(Ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ft,[])}catch(Ct){var _t=Ct}Reflect.construct(f,[],Ft)}else{try{Ft.call()}catch(Ct){_t=Ct}f.call(Ft.prototype)}}else{try{throw Error()}catch(Ct){_t=Ct}(Ft=f())&&typeof Ft.catch=="function"&&Ft.catch(function(){})}}catch(Ct){if(Ct&&_t&&typeof Ct.stack=="string")return[Ct.stack,_t.stack]}return[null,null]}};k.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(k.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(k.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=k.DetermineComponentFrameRoot(),ue=q[0],Te=q[1];if(ue&&Te){var Ge=ue.split(`
`),vt=Te.split(`
`);for(j=k=0;k<Ge.length&&!Ge[k].includes("DetermineComponentFrameRoot");)k++;for(;j<vt.length&&!vt[j].includes("DetermineComponentFrameRoot");)j++;if(k===Ge.length||j===vt.length)for(k=Ge.length-1,j=vt.length-1;1<=k&&0<=j&&Ge[k]!==vt[j];)j--;for(;1<=k&&0<=j;k--,j--)if(Ge[k]!==vt[j]){if(k!==1||j!==1)do if(k--,j--,0>j||Ge[k]!==vt[j]){var jt=`
`+Ge[k].replace(" at new "," at ");return f.displayName&&jt.includes("<anonymous>")&&(jt=jt.replace("<anonymous>",f.displayName)),jt}while(1<=k&&0<=j);break}}}finally{Bd=!1,Error.prepareStackTrace=w}return(w=f?f.displayName||f.name:"")?el(w):""}function Mr(f){switch(f.tag){case 26:case 27:case 5:return el(f.type);case 16:return el("Lazy");case 13:return el("Suspense");case 19:return el("SuspenseList");case 0:case 15:return Sm(f.type,!1);case 11:return Sm(f.type.render,!1);case 1:return Sm(f.type,!0);case 31:return el("Activity");default:return""}}function zy(f){try{var g="";do g+=Mr(f),f=f.return;while(f);return g}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function Oa(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Uy(f){var g=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Si(f){var g=Uy(f)?"checked":"value",w=Object.getOwnPropertyDescriptor(f.constructor.prototype,g),k=""+f[g];if(!f.hasOwnProperty(g)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var j=w.get,q=w.set;return Object.defineProperty(f,g,{configurable:!0,get:function(){return j.call(this)},set:function(ue){k=""+ue,q.call(this,ue)}}),Object.defineProperty(f,g,{enumerable:w.enumerable}),{getValue:function(){return k},setValue:function(ue){k=""+ue},stopTracking:function(){f._valueTracker=null,delete f[g]}}}}function wc(f){f._valueTracker||(f._valueTracker=Si(f))}function $d(f){if(!f)return!1;var g=f._valueTracker;if(!g)return!0;var w=g.getValue(),k="";return f&&(k=Uy(f)?f.checked?"true":"false":f.value),f=k,f!==w?(g.setValue(f),!0):!1}function zl(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var qy=/[\n"\\]/g;function ga(f){return f.replace(qy,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function zd(f,g,w,k,j,q,ue,Te){f.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?f.type=ue:f.removeAttribute("type"),g!=null?ue==="number"?(g===0&&f.value===""||f.value!=g)&&(f.value=""+Oa(g)):f.value!==""+Oa(g)&&(f.value=""+Oa(g)):ue!=="submit"&&ue!=="reset"||f.removeAttribute("value"),g!=null?Ud(f,ue,Oa(g)):w!=null?Ud(f,ue,Oa(w)):k!=null&&f.removeAttribute("value"),j==null&&q!=null&&(f.defaultChecked=!!q),j!=null&&(f.checked=j&&typeof j!="function"&&typeof j!="symbol"),Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"?f.name=""+Oa(Te):f.removeAttribute("name")}function Vy(f,g,w,k,j,q,ue,Te){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(f.type=q),g!=null||w!=null){if(!(q!=="submit"&&q!=="reset"||g!=null))return;w=w!=null?""+Oa(w):"",g=g!=null?""+Oa(g):w,Te||g===f.value||(f.value=g),f.defaultValue=g}k=k??j,k=typeof k!="function"&&typeof k!="symbol"&&!!k,f.checked=Te?f.checked:!!k,f.defaultChecked=!!k,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(f.name=ue)}function Ud(f,g,w){g==="number"&&zl(f.ownerDocument)===f||f.defaultValue===""+w||(f.defaultValue=""+w)}function Cu(f,g,w,k){if(f=f.options,g){g={};for(var j=0;j<w.length;j++)g["$"+w[j]]=!0;for(w=0;w<f.length;w++)j=g.hasOwnProperty("$"+f[w].value),f[w].selected!==j&&(f[w].selected=j),j&&k&&(f[w].defaultSelected=!0)}else{for(w=""+Oa(w),g=null,j=0;j<f.length;j++){if(f[j].value===w){f[j].selected=!0,k&&(f[j].defaultSelected=!0);return}g!==null||f[j].disabled||(g=f[j])}g!==null&&(g.selected=!0)}}function qd(f,g,w){if(g!=null&&(g=""+Oa(g),g!==f.value&&(f.value=g),w==null)){f.defaultValue!==g&&(f.defaultValue=g);return}f.defaultValue=w!=null?""+Oa(w):""}function Hy(f,g,w,k){if(g==null){if(k!=null){if(w!=null)throw Error(r(92));if(J(k)){if(1<k.length)throw Error(r(93));k=k[0]}w=k}w==null&&(w=""),g=w}w=Oa(g),f.defaultValue=w,k=f.textContent,k===w&&k!==""&&k!==null&&(f.value=k)}function Vd(f,g){if(g){var w=f.firstChild;if(w&&w===f.lastChild&&w.nodeType===3){w.nodeValue=g;return}}f.textContent=g}var zr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cm(f,g,w){var k=g.indexOf("--")===0;w==null||typeof w=="boolean"||w===""?k?f.setProperty(g,""):g==="float"?f.cssFloat="":f[g]="":k?f.setProperty(g,w):typeof w!="number"||w===0||zr.has(g)?g==="float"?f.cssFloat=w:f[g]=(""+w).trim():f[g]=w+"px"}function R1(f,g,w){if(g!=null&&typeof g!="object")throw Error(r(62));if(f=f.style,w!=null){for(var k in w)!w.hasOwnProperty(k)||g!=null&&g.hasOwnProperty(k)||(k.indexOf("--")===0?f.setProperty(k,""):k==="float"?f.cssFloat="":f[k]="");for(var j in g)k=g[j],g.hasOwnProperty(j)&&w[j]!==k&&Cm(f,j,k)}else for(var q in g)g.hasOwnProperty(q)&&Cm(f,q,g[q])}function Wy(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Da=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ku(f){return Hd.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var tl=null;function km(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Eu=null,Mi=null;function Io(f){var g=Cr(f);if(g&&(f=g.stateNode)){var w=f[Pe]||null;e:switch(f=g.stateNode,g.type){case"input":if(zd(f,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name),g=w.name,w.type==="radio"&&g!=null){for(w=f;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll('input[name="'+ga(""+g)+'"][type="radio"]'),g=0;g<w.length;g++){var k=w[g];if(k!==f&&k.form===f.form){var j=k[Pe]||null;if(!j)throw Error(r(90));zd(k,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(g=0;g<w.length;g++)k=w[g],k.form===f.form&&$d(k)}break e;case"textarea":qd(f,w.value,w.defaultValue);break e;case"select":g=w.value,g!=null&&Cu(f,!!w.multiple,g,!1)}}}var Tu=!1;function Wd(f,g,w){if(Tu)return f(g,w);Tu=!0;try{var k=f(g);return k}finally{if(Tu=!1,(Eu!==null||Mi!==null)&&(y_(),Eu&&(g=Eu,f=Mi,Mi=Eu=null,Io(g),f)))for(g=0;g<f.length;g++)Io(f[g])}}function Au(f,g){var w=f.stateNode;if(w===null)return null;var k=w[Pe]||null;if(k===null)return null;w=k[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(f=f.type,k=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!k;break e;default:f=!1}if(f)return null;if(w&&typeof w!="function")throw Error(r(231,g,typeof w));return w}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gy=!1;if(Fs)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){Gy=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{Gy=!1}var nl=null,Em=null,Gd=null;function Kd(){if(Gd)return Gd;var f,g=Em,w=g.length,k,j="value"in nl?nl.value:nl.textContent,q=j.length;for(f=0;f<w&&g[f]===j[f];f++);var ue=w-f;for(k=1;k<=ue&&g[w-k]===j[q-k];k++);return Gd=j.slice(f,1<k?1-k:void 0)}function Yd(f){var g=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&g===13&&(f=13)):f=g,f===10&&(f=13),32<=f||f===13?f:0}function Nh(){return!0}function I1(){return!1}function ps(f){function g(w,k,j,q,ue){this._reactName=w,this._targetInst=j,this.type=k,this.nativeEvent=q,this.target=ue,this.currentTarget=null;for(var Te in f)f.hasOwnProperty(Te)&&(w=f[Te],this[Te]=w?w(q):q[Te]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Nh:I1,this.isPropagationStopped=I1,this}return u(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Nh)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Nh)},persist:function(){},isPersistent:Nh}),g}var Ru={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tm=ps(Ru),_c=u({},Ru,{view:0,detail:0}),Am=ps(_c),Mh,Ky,jh,Rm=u({},_c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iu,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==jh&&(jh&&f.type==="mousemove"?(Mh=f.screenX-jh.screenX,Ky=f.screenY-jh.screenY):Ky=Mh=0,jh=f),Mh)},movementY:function(f){return"movementY"in f?f.movementY:Ky}}),Im=ps(Rm),Yy=u({},Rm,{dataTransfer:0}),N1=ps(Yy),Nm=u({},_c,{relatedTarget:0}),Zd=ps(Nm),Mm=u({},Ru,{animationName:0,elapsedTime:0,pseudoElement:0}),M1=ps(Mm),zT=u({},Ru,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),jm=ps(zT),Zy=u({},Ru,{data:0}),Pm=ps(Zy),Xy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ls={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ph(f){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(f):(f=Ls[f])?!!g[f]:!1}function Iu(){return Ph}var j1=u({},_c,{key:function(f){if(f.key){var g=Xy[f.key]||f.key;if(g!=="Unidentified")return g}return f.type==="keypress"?(f=Yd(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Jy[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iu,charCode:function(f){return f.type==="keypress"?Yd(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Yd(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Om=ps(j1),P1=u({},Rm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qy=ps(P1),Dm=u({},_c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iu}),eb=ps(Dm),Nu=u({},Ru,{propertyName:0,elapsedTime:0,pseudoElement:0}),tb=ps(Nu),nb=u({},Rm,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Fm=ps(nb),rb=u({},Ru,{newState:0,oldState:0}),O1=ps(rb),UT=[9,13,27,32],Oh=Fs&&"CompositionEvent"in window,Sc=null;Fs&&"documentMode"in document&&(Sc=document.documentMode);var qT=Fs&&"TextEvent"in window&&!Sc,Lm=Fs&&(!Oh||Sc&&8<Sc&&11>=Sc),Bm=" ",D1=!1;function ib(f,g){switch(f){case"keyup":return UT.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F1(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Mu=!1;function L1(f,g){switch(f){case"compositionend":return F1(g);case"keypress":return g.which!==32?null:(D1=!0,Bm);case"textInput":return f=g.data,f===Bm&&D1?null:f;default:return null}}function VT(f,g){if(Mu)return f==="compositionend"||!Oh&&ib(f,g)?(f=Kd(),Gd=Em=nl=null,Mu=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Lm&&g.locale!=="ko"?null:g.data;default:return null}}var B1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $m(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g==="input"?!!B1[f.type]:g==="textarea"}function sb(f,g,w,k){Eu?Mi?Mi.push(k):Mi=[k]:Eu=k,g=S_(g,"onChange"),0<g.length&&(w=new Tm("onChange","change",null,w,k),f.push({event:w,listeners:g}))}var Xd=null,Dh=null;function HT(f){q8(f,0)}function zm(f){var g=Jr(f);if($d(g))return f}function Fh(f,g){if(f==="change")return g}var rl=!1;if(Fs){var ji;if(Fs){var Jd="oninput"in document;if(!Jd){var Fa=document.createElement("div");Fa.setAttribute("oninput","return;"),Jd=typeof Fa.oninput=="function"}ji=Jd}else ji=!1;rl=ji&&(!document.documentMode||9<document.documentMode)}function $1(){Xd&&(Xd.detachEvent("onpropertychange",Um),Dh=Xd=null)}function Um(f){if(f.propertyName==="value"&&zm(Dh)){var g=[];sb(g,Dh,f,km(f)),Wd(HT,g)}}function z1(f,g,w){f==="focusin"?($1(),Xd=g,Dh=w,Xd.attachEvent("onpropertychange",Um)):f==="focusout"&&$1()}function ju(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return zm(Dh)}function ab(f,g){if(f==="click")return zm(g)}function Qd(f,g){if(f==="input"||f==="change")return zm(g)}function Cc(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var ba=typeof Object.is=="function"?Object.is:Cc;function I(f,g){if(ba(f,g))return!0;if(typeof f!="object"||f===null||typeof g!="object"||g===null)return!1;var w=Object.keys(f),k=Object.keys(g);if(w.length!==k.length)return!1;for(k=0;k<w.length;k++){var j=w[k];if(!qe.call(g,j)||!ba(f[j],g[j]))return!1}return!0}function B(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Q(f,g){var w=B(f);f=0;for(var k;w;){if(w.nodeType===3){if(k=f+w.textContent.length,f<=g&&k>=g)return{node:w,offset:g-f};f=k}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=B(w)}}function ae(f,g){return f&&g?f===g?!0:f&&f.nodeType===3?!1:g&&g.nodeType===3?ae(f,g.parentNode):"contains"in f?f.contains(g):f.compareDocumentPosition?!!(f.compareDocumentPosition(g)&16):!1:!1}function fe(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var g=zl(f.document);g instanceof f.HTMLIFrameElement;){try{var w=typeof g.contentWindow.location.href=="string"}catch{w=!1}if(w)f=g.contentWindow;else break;g=zl(f.document)}return g}function Se(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g&&(g==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||g==="textarea"||f.contentEditable==="true")}var Fe=Fs&&"documentMode"in document&&11>=document.documentMode,He=null,Qe=null,nt=null,ot=!1;function Ye(f,g,w){var k=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;ot||He==null||He!==zl(k)||(k=He,"selectionStart"in k&&Se(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),nt&&I(nt,k)||(nt=k,k=S_(Qe,"onSelect"),0<k.length&&(g=new Tm("onSelect","select",null,g,w),f.push({event:g,listeners:k}),g.target=He)))}function dt(f,g){var w={};return w[f.toLowerCase()]=g.toLowerCase(),w["Webkit"+f]="webkit"+g,w["Moz"+f]="moz"+g,w}var Je={animationend:dt("Animation","AnimationEnd"),animationiteration:dt("Animation","AnimationIteration"),animationstart:dt("Animation","AnimationStart"),transitionrun:dt("Transition","TransitionRun"),transitionstart:dt("Transition","TransitionStart"),transitioncancel:dt("Transition","TransitionCancel"),transitionend:dt("Transition","TransitionEnd")},at={},pt={};Fs&&(pt=document.createElement("div").style,"AnimationEvent"in window||(delete Je.animationend.animation,delete Je.animationiteration.animation,delete Je.animationstart.animation),"TransitionEvent"in window||delete Je.transitionend.transition);function rt(f){if(at[f])return at[f];if(!Je[f])return f;var g=Je[f],w;for(w in g)if(g.hasOwnProperty(w)&&w in pt)return at[f]=g[w];return f}var wt=rt("animationend"),kt=rt("animationiteration"),Et=rt("animationstart"),Mt=rt("transitionrun"),Kt=rt("transitionstart"),nn=rt("transitioncancel"),Ht=rt("transitionend"),Xt=new Map,an="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");an.push("scrollEnd");function Wt(f,g){Xt.set(f,g),Ut(g,[f])}var mn=new WeakMap;function On(f,g){if(typeof f=="object"&&f!==null){var w=mn.get(f);return w!==void 0?w:(g={value:f,source:g,stack:zy(g)},mn.set(f,g),g)}return{value:f,source:g,stack:zy(g)}}var zn=[],cr=0,ia=0;function Jn(){for(var f=cr,g=ia=cr=0;g<f;){var w=zn[g];zn[g++]=null;var k=zn[g];zn[g++]=null;var j=zn[g];zn[g++]=null;var q=zn[g];if(zn[g++]=null,k!==null&&j!==null){var ue=k.pending;ue===null?j.next=j:(j.next=ue.next,ue.next=j),k.pending=j}q!==0&&Bs(w,j,q)}}function ns(f,g,w,k){zn[cr++]=f,zn[cr++]=g,zn[cr++]=w,zn[cr++]=k,ia|=k,f.lanes|=k,f=f.alternate,f!==null&&(f.lanes|=k)}function ms(f,g,w,k){return ns(f,g,w,k),il(f)}function Ul(f,g){return ns(f,null,null,g),il(f)}function Bs(f,g,w){f.lanes|=w;var k=f.alternate;k!==null&&(k.lanes|=w);for(var j=!1,q=f.return;q!==null;)q.childLanes|=w,k=q.alternate,k!==null&&(k.childLanes|=w),q.tag===22&&(f=q.stateNode,f===null||f._visibility&1||(j=!0)),f=q,q=q.return;return f.tag===3?(q=f.stateNode,j&&g!==null&&(j=31-rn(w),f=q.hiddenUpdates,k=f[j],k===null?f[j]=[g]:k.push(g),g.lane=w|536870912),q):null}function il(f){if(50<Nb)throw Nb=0,XA=null,Error(r(185));for(var g=f.return;g!==null;)f=g,g=f.return;return f.tag===3?f.stateNode:null}var kc={};function tde(f,g,w,k){this.tag=f,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function No(f,g,w,k){return new tde(f,g,w,k)}function WT(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Pu(f,g){var w=f.alternate;return w===null?(w=No(f.tag,g,f.key,f.mode),w.elementType=f.elementType,w.type=f.type,w.stateNode=f.stateNode,w.alternate=f,f.alternate=w):(w.pendingProps=g,w.type=f.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=f.flags&65011712,w.childLanes=f.childLanes,w.lanes=f.lanes,w.child=f.child,w.memoizedProps=f.memoizedProps,w.memoizedState=f.memoizedState,w.updateQueue=f.updateQueue,g=f.dependencies,w.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},w.sibling=f.sibling,w.index=f.index,w.ref=f.ref,w.refCleanup=f.refCleanup,w}function A5(f,g){f.flags&=65011714;var w=f.alternate;return w===null?(f.childLanes=0,f.lanes=g,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=w.childLanes,f.lanes=w.lanes,f.child=w.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=w.memoizedProps,f.memoizedState=w.memoizedState,f.updateQueue=w.updateQueue,f.type=w.type,g=w.dependencies,f.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),f}function U1(f,g,w,k,j,q){var ue=0;if(k=f,typeof f=="function")WT(f)&&(ue=1);else if(typeof f=="string")ue=rfe(f,w,he.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case M:return f=No(31,w,g,j),f.elementType=M,f.lanes=q,f;case y:return Lh(w.children,j,q,g);case b:ue=8,j|=24;break;case v:return f=No(12,w,g,j|2),f.elementType=v,f.lanes=q,f;case E:return f=No(13,w,g,j),f.elementType=E,f.lanes=q,f;case A:return f=No(19,w,g,j),f.elementType=A,f.lanes=q,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case x:case S:ue=10;break e;case _:ue=9;break e;case C:ue=11;break e;case R:ue=14;break e;case N:ue=16,k=null;break e}ue=29,w=Error(r(130,f===null?"null":typeof f,"")),k=null}return g=No(ue,w,g,j),g.elementType=f,g.type=k,g.lanes=q,g}function Lh(f,g,w,k){return f=No(7,f,k,g),f.lanes=w,f}function GT(f,g,w){return f=No(6,f,null,g),f.lanes=w,f}function KT(f,g,w){return g=No(4,f.children!==null?f.children:[],f.key,g),g.lanes=w,g.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},g}var qm=[],Vm=0,q1=null,V1=0,sl=[],al=0,Bh=null,Ou=1,Du="";function $h(f,g){qm[Vm++]=V1,qm[Vm++]=q1,q1=f,V1=g}function R5(f,g,w){sl[al++]=Ou,sl[al++]=Du,sl[al++]=Bh,Bh=f;var k=Ou;f=Du;var j=32-rn(k)-1;k&=~(1<<j),w+=1;var q=32-rn(g)+j;if(30<q){var ue=j-j%5;q=(k&(1<<ue)-1).toString(32),k>>=ue,j-=ue,Ou=1<<32-rn(g)+j|w<<j|k,Du=q+f}else Ou=1<<q|w<<j|k,Du=f}function YT(f){f.return!==null&&($h(f,1),R5(f,1,0))}function ZT(f){for(;f===q1;)q1=qm[--Vm],qm[Vm]=null,V1=qm[--Vm],qm[Vm]=null;for(;f===Bh;)Bh=sl[--al],sl[al]=null,Du=sl[--al],sl[al]=null,Ou=sl[--al],sl[al]=null}var La=null,Zi=null,ei=!1,zh=null,Ec=!1,XT=Error(r(519));function Uh(f){var g=Error(r(418,""));throw cb(On(g,f)),XT}function I5(f){var g=f.stateNode,w=f.type,k=f.memoizedProps;switch(g[ye]=f,g[Pe]=k,w){case"dialog":Pr("cancel",g),Pr("close",g);break;case"iframe":case"object":case"embed":Pr("load",g);break;case"video":case"audio":for(w=0;w<jb.length;w++)Pr(jb[w],g);break;case"source":Pr("error",g);break;case"img":case"image":case"link":Pr("error",g),Pr("load",g);break;case"details":Pr("toggle",g);break;case"input":Pr("invalid",g),Vy(g,k.value,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name,!0),wc(g);break;case"select":Pr("invalid",g);break;case"textarea":Pr("invalid",g),Hy(g,k.value,k.defaultValue,k.children),wc(g)}w=k.children,typeof w!="string"&&typeof w!="number"&&typeof w!="bigint"||g.textContent===""+w||k.suppressHydrationWarning===!0||G8(g.textContent,w)?(k.popover!=null&&(Pr("beforetoggle",g),Pr("toggle",g)),k.onScroll!=null&&Pr("scroll",g),k.onScrollEnd!=null&&Pr("scrollend",g),k.onClick!=null&&(g.onclick=C_),g=!0):g=!1,g||Uh(f)}function N5(f){for(La=f.return;La;)switch(La.tag){case 5:case 13:Ec=!1;return;case 27:case 3:Ec=!0;return;default:La=La.return}}function ob(f){if(f!==La)return!1;if(!ei)return N5(f),ei=!0,!1;var g=f.tag,w;if((w=g!==3&&g!==27)&&((w=g===5)&&(w=f.type,w=!(w!=="form"&&w!=="button")||hR(f.type,f.memoizedProps)),w=!w),w&&Zi&&Uh(f),N5(f),g===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));e:{for(f=f.nextSibling,g=0;f;){if(f.nodeType===8)if(w=f.data,w==="/$"){if(g===0){Zi=Vl(f.nextSibling);break e}g--}else w!=="$"&&w!=="$!"&&w!=="$?"||g++;f=f.nextSibling}Zi=null}}else g===27?(g=Zi,gf(f.type)?(f=yR,yR=null,Zi=f):Zi=g):Zi=La?Vl(f.stateNode.nextSibling):null;return!0}function lb(){Zi=La=null,ei=!1}function M5(){var f=zh;return f!==null&&(ao===null?ao=f:ao.push.apply(ao,f),zh=null),f}function cb(f){zh===null?zh=[f]:zh.push(f)}var JT=te(null),qh=null,Fu=null;function ef(f,g,w){se(JT,g._currentValue),g._currentValue=w}function Lu(f){f._currentValue=JT.current,ee(JT)}function QT(f,g,w){for(;f!==null;){var k=f.alternate;if((f.childLanes&g)!==g?(f.childLanes|=g,k!==null&&(k.childLanes|=g)):k!==null&&(k.childLanes&g)!==g&&(k.childLanes|=g),f===w)break;f=f.return}}function eA(f,g,w,k){var j=f.child;for(j!==null&&(j.return=f);j!==null;){var q=j.dependencies;if(q!==null){var ue=j.child;q=q.firstContext;e:for(;q!==null;){var Te=q;q=j;for(var Ge=0;Ge<g.length;Ge++)if(Te.context===g[Ge]){q.lanes|=w,Te=q.alternate,Te!==null&&(Te.lanes|=w),QT(q.return,w,f),k||(ue=null);break e}q=Te.next}}else if(j.tag===18){if(ue=j.return,ue===null)throw Error(r(341));ue.lanes|=w,q=ue.alternate,q!==null&&(q.lanes|=w),QT(ue,w,f),ue=null}else ue=j.child;if(ue!==null)ue.return=j;else for(ue=j;ue!==null;){if(ue===f){ue=null;break}if(j=ue.sibling,j!==null){j.return=ue.return,ue=j;break}ue=ue.return}j=ue}}function ub(f,g,w,k){f=null;for(var j=g,q=!1;j!==null;){if(!q){if((j.flags&524288)!==0)q=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var ue=j.alternate;if(ue===null)throw Error(r(387));if(ue=ue.memoizedProps,ue!==null){var Te=j.type;ba(j.pendingProps.value,ue.value)||(f!==null?f.push(Te):f=[Te])}}else if(j===je.current){if(ue=j.alternate,ue===null)throw Error(r(387));ue.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(f!==null?f.push(Bb):f=[Bb])}j=j.return}f!==null&&eA(g,f,w,k),g.flags|=262144}function H1(f){for(f=f.firstContext;f!==null;){if(!ba(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function Vh(f){qh=f,Fu=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function va(f){return j5(qh,f)}function W1(f,g){return qh===null&&Vh(f),j5(f,g)}function j5(f,g){var w=g._currentValue;if(g={context:g,memoizedValue:w,next:null},Fu===null){if(f===null)throw Error(r(308));Fu=g,f.dependencies={lanes:0,firstContext:g},f.flags|=524288}else Fu=Fu.next=g;return w}var nde=typeof AbortController<"u"?AbortController:function(){var f=[],g=this.signal={aborted:!1,addEventListener:function(w,k){f.push(k)}};this.abort=function(){g.aborted=!0,f.forEach(function(w){return w()})}},rde=e.unstable_scheduleCallback,ide=e.unstable_NormalPriority,Es={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tA(){return{controller:new nde,data:new Map,refCount:0}}function db(f){f.refCount--,f.refCount===0&&rde(ide,function(){f.controller.abort()})}var fb=null,nA=0,Hm=0,Wm=null;function sde(f,g){if(fb===null){var w=fb=[];nA=0,Hm=iR(),Wm={status:"pending",value:void 0,then:function(k){w.push(k)}}}return nA++,g.then(P5,P5),g}function P5(){if(--nA===0&&fb!==null){Wm!==null&&(Wm.status="fulfilled");var f=fb;fb=null,Hm=0,Wm=null;for(var g=0;g<f.length;g++)(0,f[g])()}}function ade(f,g){var w=[],k={status:"pending",value:null,reason:null,then:function(j){w.push(j)}};return f.then(function(){k.status="fulfilled",k.value=g;for(var j=0;j<w.length;j++)(0,w[j])(g)},function(j){for(k.status="rejected",k.reason=j,j=0;j<w.length;j++)(0,w[j])(void 0)}),k}var O5=U.S;U.S=function(f,g){typeof g=="object"&&g!==null&&typeof g.then=="function"&&sde(f,g),O5!==null&&O5(f,g)};var Hh=te(null);function rA(){var f=Hh.current;return f!==null?f:Ri.pooledCache}function G1(f,g){g===null?se(Hh,Hh.current):se(Hh,g.pool)}function D5(){var f=rA();return f===null?null:{parent:Es._currentValue,pool:f}}var hb=Error(r(460)),F5=Error(r(474)),K1=Error(r(542)),iA={then:function(){}};function L5(f){return f=f.status,f==="fulfilled"||f==="rejected"}function Y1(){}function B5(f,g,w){switch(w=f[w],w===void 0?f.push(g):w!==g&&(g.then(Y1,Y1),g=w),g.status){case"fulfilled":return g.value;case"rejected":throw f=g.reason,z5(f),f;default:if(typeof g.status=="string")g.then(Y1,Y1);else{if(f=Ri,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=g,f.status="pending",f.then(function(k){if(g.status==="pending"){var j=g;j.status="fulfilled",j.value=k}},function(k){if(g.status==="pending"){var j=g;j.status="rejected",j.reason=k}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw f=g.reason,z5(f),f}throw pb=g,hb}}var pb=null;function $5(){if(pb===null)throw Error(r(459));var f=pb;return pb=null,f}function z5(f){if(f===hb||f===K1)throw Error(r(483))}var tf=!1;function sA(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function aA(f,g){f=f.updateQueue,g.updateQueue===f&&(g.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function nf(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function rf(f,g,w){var k=f.updateQueue;if(k===null)return null;if(k=k.shared,(ui&2)!==0){var j=k.pending;return j===null?g.next=g:(g.next=j.next,j.next=g),k.pending=g,g=il(f),Bs(f,null,w),g}return ns(f,k,g,w),il(f)}function mb(f,g,w){if(g=g.updateQueue,g!==null&&(g=g.shared,(w&4194048)!==0)){var k=g.lanes;k&=f.pendingLanes,w|=k,g.lanes=w,ze(f,w)}}function oA(f,g){var w=f.updateQueue,k=f.alternate;if(k!==null&&(k=k.updateQueue,w===k)){var j=null,q=null;if(w=w.firstBaseUpdate,w!==null){do{var ue={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};q===null?j=q=ue:q=q.next=ue,w=w.next}while(w!==null);q===null?j=q=g:q=q.next=g}else j=q=g;w={baseState:k.baseState,firstBaseUpdate:j,lastBaseUpdate:q,shared:k.shared,callbacks:k.callbacks},f.updateQueue=w;return}f=w.lastBaseUpdate,f===null?w.firstBaseUpdate=g:f.next=g,w.lastBaseUpdate=g}var lA=!1;function gb(){if(lA){var f=Wm;if(f!==null)throw f}}function yb(f,g,w,k){lA=!1;var j=f.updateQueue;tf=!1;var q=j.firstBaseUpdate,ue=j.lastBaseUpdate,Te=j.shared.pending;if(Te!==null){j.shared.pending=null;var Ge=Te,vt=Ge.next;Ge.next=null,ue===null?q=vt:ue.next=vt,ue=Ge;var jt=f.alternate;jt!==null&&(jt=jt.updateQueue,Te=jt.lastBaseUpdate,Te!==ue&&(Te===null?jt.firstBaseUpdate=vt:Te.next=vt,jt.lastBaseUpdate=Ge))}if(q!==null){var Ft=j.baseState;ue=0,jt=vt=Ge=null,Te=q;do{var _t=Te.lane&-536870913,Ct=_t!==Te.lane;if(Ct?(Ur&_t)===_t:(k&_t)===_t){_t!==0&&_t===Hm&&(lA=!0),jt!==null&&(jt=jt.next={lane:0,tag:Te.tag,payload:Te.payload,callback:null,next:null});e:{var Qn=f,Un=Te;_t=g;var yi=w;switch(Un.tag){case 1:if(Qn=Un.payload,typeof Qn=="function"){Ft=Qn.call(yi,Ft,_t);break e}Ft=Qn;break e;case 3:Qn.flags=Qn.flags&-65537|128;case 0:if(Qn=Un.payload,_t=typeof Qn=="function"?Qn.call(yi,Ft,_t):Qn,_t==null)break e;Ft=u({},Ft,_t);break e;case 2:tf=!0}}_t=Te.callback,_t!==null&&(f.flags|=64,Ct&&(f.flags|=8192),Ct=j.callbacks,Ct===null?j.callbacks=[_t]:Ct.push(_t))}else Ct={lane:_t,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},jt===null?(vt=jt=Ct,Ge=Ft):jt=jt.next=Ct,ue|=_t;if(Te=Te.next,Te===null){if(Te=j.shared.pending,Te===null)break;Ct=Te,Te=Ct.next,Ct.next=null,j.lastBaseUpdate=Ct,j.shared.pending=null}}while(!0);jt===null&&(Ge=Ft),j.baseState=Ge,j.firstBaseUpdate=vt,j.lastBaseUpdate=jt,q===null&&(j.shared.lanes=0),ff|=ue,f.lanes=ue,f.memoizedState=Ft}}function U5(f,g){if(typeof f!="function")throw Error(r(191,f));f.call(g)}function q5(f,g){var w=f.callbacks;if(w!==null)for(f.callbacks=null,f=0;f<w.length;f++)U5(w[f],g)}var Gm=te(null),Z1=te(0);function V5(f,g){f=Hu,se(Z1,f),se(Gm,g),Hu=f|g.baseLanes}function cA(){se(Z1,Hu),se(Gm,Gm.current)}function uA(){Hu=Z1.current,ee(Gm),ee(Z1)}var sf=0,Tr=null,mi=null,gs=null,X1=!1,Km=!1,Wh=!1,J1=0,bb=0,Ym=null,ode=0;function rs(){throw Error(r(321))}function dA(f,g){if(g===null)return!1;for(var w=0;w<g.length&&w<f.length;w++)if(!ba(f[w],g[w]))return!1;return!0}function fA(f,g,w,k,j,q){return sf=q,Tr=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,U.H=f===null||f.memoizedState===null?TF:AF,Wh=!1,q=w(k,j),Wh=!1,Km&&(q=W5(g,w,k,j)),H5(f),q}function H5(f){U.H=i_;var g=mi!==null&&mi.next!==null;if(sf=0,gs=mi=Tr=null,X1=!1,bb=0,Ym=null,g)throw Error(r(300));f===null||$s||(f=f.dependencies,f!==null&&H1(f)&&($s=!0))}function W5(f,g,w,k){Tr=f;var j=0;do{if(Km&&(Ym=null),bb=0,Km=!1,25<=j)throw Error(r(301));if(j+=1,gs=mi=null,f.updateQueue!=null){var q=f.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}U.H=pde,q=g(w,k)}while(Km);return q}function lde(){var f=U.H,g=f.useState()[0];return g=typeof g.then=="function"?vb(g):g,f=f.useState()[0],(mi!==null?mi.memoizedState:null)!==f&&(Tr.flags|=1024),g}function hA(){var f=J1!==0;return J1=0,f}function pA(f,g,w){g.updateQueue=f.updateQueue,g.flags&=-2053,f.lanes&=~w}function mA(f){if(X1){for(f=f.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}X1=!1}sf=0,gs=mi=Tr=null,Km=!1,bb=J1=0,Ym=null}function io(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gs===null?Tr.memoizedState=gs=f:gs=gs.next=f,gs}function ys(){if(mi===null){var f=Tr.alternate;f=f!==null?f.memoizedState:null}else f=mi.next;var g=gs===null?Tr.memoizedState:gs.next;if(g!==null)gs=g,mi=f;else{if(f===null)throw Tr.alternate===null?Error(r(467)):Error(r(310));mi=f,f={memoizedState:mi.memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},gs===null?Tr.memoizedState=gs=f:gs=gs.next=f}return gs}function gA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vb(f){var g=bb;return bb+=1,Ym===null&&(Ym=[]),f=B5(Ym,f,g),g=Tr,(gs===null?g.memoizedState:gs.next)===null&&(g=g.alternate,U.H=g===null||g.memoizedState===null?TF:AF),f}function Q1(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return vb(f);if(f.$$typeof===S)return va(f)}throw Error(r(438,String(f)))}function yA(f){var g=null,w=Tr.updateQueue;if(w!==null&&(g=w.memoCache),g==null){var k=Tr.alternate;k!==null&&(k=k.updateQueue,k!==null&&(k=k.memoCache,k!=null&&(g={data:k.data.map(function(j){return j.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),w===null&&(w=gA(),Tr.updateQueue=w),w.memoCache=g,w=g.data[g.index],w===void 0)for(w=g.data[g.index]=Array(f),k=0;k<f;k++)w[k]=P;return g.index++,w}function Bu(f,g){return typeof g=="function"?g(f):g}function e_(f){var g=ys();return bA(g,mi,f)}function bA(f,g,w){var k=f.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=w;var j=f.baseQueue,q=k.pending;if(q!==null){if(j!==null){var ue=j.next;j.next=q.next,q.next=ue}g.baseQueue=j=q,k.pending=null}if(q=f.baseState,j===null)f.memoizedState=q;else{g=j.next;var Te=ue=null,Ge=null,vt=g,jt=!1;do{var Ft=vt.lane&-536870913;if(Ft!==vt.lane?(Ur&Ft)===Ft:(sf&Ft)===Ft){var _t=vt.revertLane;if(_t===0)Ge!==null&&(Ge=Ge.next={lane:0,revertLane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),Ft===Hm&&(jt=!0);else if((sf&_t)===_t){vt=vt.next,_t===Hm&&(jt=!0);continue}else Ft={lane:0,revertLane:vt.revertLane,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},Ge===null?(Te=Ge=Ft,ue=q):Ge=Ge.next=Ft,Tr.lanes|=_t,ff|=_t;Ft=vt.action,Wh&&w(q,Ft),q=vt.hasEagerState?vt.eagerState:w(q,Ft)}else _t={lane:Ft,revertLane:vt.revertLane,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},Ge===null?(Te=Ge=_t,ue=q):Ge=Ge.next=_t,Tr.lanes|=Ft,ff|=Ft;vt=vt.next}while(vt!==null&&vt!==g);if(Ge===null?ue=q:Ge.next=Te,!ba(q,f.memoizedState)&&($s=!0,jt&&(w=Wm,w!==null)))throw w;f.memoizedState=q,f.baseState=ue,f.baseQueue=Ge,k.lastRenderedState=q}return j===null&&(k.lanes=0),[f.memoizedState,k.dispatch]}function vA(f){var g=ys(),w=g.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=f;var k=w.dispatch,j=w.pending,q=g.memoizedState;if(j!==null){w.pending=null;var ue=j=j.next;do q=f(q,ue.action),ue=ue.next;while(ue!==j);ba(q,g.memoizedState)||($s=!0),g.memoizedState=q,g.baseQueue===null&&(g.baseState=q),w.lastRenderedState=q}return[q,k]}function G5(f,g,w){var k=Tr,j=ys(),q=ei;if(q){if(w===void 0)throw Error(r(407));w=w()}else w=g();var ue=!ba((mi||j).memoizedState,w);ue&&(j.memoizedState=w,$s=!0),j=j.queue;var Te=Z5.bind(null,k,j,f);if(xb(2048,8,Te,[f]),j.getSnapshot!==g||ue||gs!==null&&gs.memoizedState.tag&1){if(k.flags|=2048,Zm(9,t_(),Y5.bind(null,k,j,w,g),null),Ri===null)throw Error(r(349));q||(sf&124)!==0||K5(k,g,w)}return w}function K5(f,g,w){f.flags|=16384,f={getSnapshot:g,value:w},g=Tr.updateQueue,g===null?(g=gA(),Tr.updateQueue=g,g.stores=[f]):(w=g.stores,w===null?g.stores=[f]:w.push(f))}function Y5(f,g,w,k){g.value=w,g.getSnapshot=k,X5(g)&&J5(f)}function Z5(f,g,w){return w(function(){X5(g)&&J5(f)})}function X5(f){var g=f.getSnapshot;f=f.value;try{var w=g();return!ba(f,w)}catch{return!0}}function J5(f){var g=Ul(f,2);g!==null&&Do(g,f,2)}function xA(f){var g=io();if(typeof f=="function"){var w=f;if(f=w(),Wh){Bt(!0);try{w()}finally{Bt(!1)}}}return g.memoizedState=g.baseState=f,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:f},g}function Q5(f,g,w,k){return f.baseState=w,bA(f,mi,typeof k=="function"?k:Bu)}function cde(f,g,w,k,j){if(r_(f))throw Error(r(485));if(f=g.action,f!==null){var q={payload:j,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){q.listeners.push(ue)}};U.T!==null?w(!0):q.isTransition=!1,k(q),w=g.pending,w===null?(q.next=g.pending=q,eF(g,q)):(q.next=w.next,g.pending=w.next=q)}}function eF(f,g){var w=g.action,k=g.payload,j=f.state;if(g.isTransition){var q=U.T,ue={};U.T=ue;try{var Te=w(j,k),Ge=U.S;Ge!==null&&Ge(ue,Te),tF(f,g,Te)}catch(vt){wA(f,g,vt)}finally{U.T=q}}else try{q=w(j,k),tF(f,g,q)}catch(vt){wA(f,g,vt)}}function tF(f,g,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(k){nF(f,g,k)},function(k){return wA(f,g,k)}):nF(f,g,w)}function nF(f,g,w){g.status="fulfilled",g.value=w,rF(g),f.state=w,g=f.pending,g!==null&&(w=g.next,w===g?f.pending=null:(w=w.next,g.next=w,eF(f,w)))}function wA(f,g,w){var k=f.pending;if(f.pending=null,k!==null){k=k.next;do g.status="rejected",g.reason=w,rF(g),g=g.next;while(g!==k)}f.action=null}function rF(f){f=f.listeners;for(var g=0;g<f.length;g++)(0,f[g])()}function iF(f,g){return g}function sF(f,g){if(ei){var w=Ri.formState;if(w!==null){e:{var k=Tr;if(ei){if(Zi){t:{for(var j=Zi,q=Ec;j.nodeType!==8;){if(!q){j=null;break t}if(j=Vl(j.nextSibling),j===null){j=null;break t}}q=j.data,j=q==="F!"||q==="F"?j:null}if(j){Zi=Vl(j.nextSibling),k=j.data==="F!";break e}}Uh(k)}k=!1}k&&(g=w[0])}}return w=io(),w.memoizedState=w.baseState=g,k={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iF,lastRenderedState:g},w.queue=k,w=CF.bind(null,Tr,k),k.dispatch=w,k=xA(!1),q=EA.bind(null,Tr,!1,k.queue),k=io(),j={state:g,dispatch:null,action:f,pending:null},k.queue=j,w=cde.bind(null,Tr,j,q,w),j.dispatch=w,k.memoizedState=f,[g,w,!1]}function aF(f){var g=ys();return oF(g,mi,f)}function oF(f,g,w){if(g=bA(f,g,iF)[0],f=e_(Bu)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var k=vb(g)}catch(ue){throw ue===hb?K1:ue}else k=g;g=ys();var j=g.queue,q=j.dispatch;return w!==g.memoizedState&&(Tr.flags|=2048,Zm(9,t_(),ude.bind(null,j,w),null)),[k,q,f]}function ude(f,g){f.action=g}function lF(f){var g=ys(),w=mi;if(w!==null)return oF(g,w,f);ys(),g=g.memoizedState,w=ys();var k=w.queue.dispatch;return w.memoizedState=f,[g,k,!1]}function Zm(f,g,w,k){return f={tag:f,create:w,deps:k,inst:g,next:null},g=Tr.updateQueue,g===null&&(g=gA(),Tr.updateQueue=g),w=g.lastEffect,w===null?g.lastEffect=f.next=f:(k=w.next,w.next=f,f.next=k,g.lastEffect=f),f}function t_(){return{destroy:void 0,resource:void 0}}function cF(){return ys().memoizedState}function n_(f,g,w,k){var j=io();k=k===void 0?null:k,Tr.flags|=f,j.memoizedState=Zm(1|g,t_(),w,k)}function xb(f,g,w,k){var j=ys();k=k===void 0?null:k;var q=j.memoizedState.inst;mi!==null&&k!==null&&dA(k,mi.memoizedState.deps)?j.memoizedState=Zm(g,q,w,k):(Tr.flags|=f,j.memoizedState=Zm(1|g,q,w,k))}function uF(f,g){n_(8390656,8,f,g)}function dF(f,g){xb(2048,8,f,g)}function fF(f,g){return xb(4,2,f,g)}function hF(f,g){return xb(4,4,f,g)}function pF(f,g){if(typeof g=="function"){f=f();var w=g(f);return function(){typeof w=="function"?w():g(null)}}if(g!=null)return f=f(),g.current=f,function(){g.current=null}}function mF(f,g,w){w=w!=null?w.concat([f]):null,xb(4,4,pF.bind(null,g,f),w)}function _A(){}function gF(f,g){var w=ys();g=g===void 0?null:g;var k=w.memoizedState;return g!==null&&dA(g,k[1])?k[0]:(w.memoizedState=[f,g],f)}function yF(f,g){var w=ys();g=g===void 0?null:g;var k=w.memoizedState;if(g!==null&&dA(g,k[1]))return k[0];if(k=f(),Wh){Bt(!0);try{f()}finally{Bt(!1)}}return w.memoizedState=[k,g],k}function SA(f,g,w){return w===void 0||(sf&1073741824)!==0?f.memoizedState=g:(f.memoizedState=w,f=x8(),Tr.lanes|=f,ff|=f,w)}function bF(f,g,w,k){return ba(w,g)?w:Gm.current!==null?(f=SA(f,w,k),ba(f,g)||($s=!0),f):(sf&42)===0?($s=!0,f.memoizedState=w):(f=x8(),Tr.lanes|=f,ff|=f,g)}function vF(f,g,w,k,j){var q=G.p;G.p=q!==0&&8>q?q:8;var ue=U.T,Te={};U.T=Te,EA(f,!1,g,w);try{var Ge=j(),vt=U.S;if(vt!==null&&vt(Te,Ge),Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"){var jt=ade(Ge,k);wb(f,g,jt,Oo(f))}else wb(f,g,k,Oo(f))}catch(Ft){wb(f,g,{then:function(){},status:"rejected",reason:Ft},Oo())}finally{G.p=q,U.T=ue}}function dde(){}function CA(f,g,w,k){if(f.tag!==5)throw Error(r(476));var j=xF(f).queue;vF(f,j,g,$,w===null?dde:function(){return wF(f),w(k)})}function xF(f){var g=f.memoizedState;if(g!==null)return g;g={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:$},next:null};var w={};return g.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:w},next:null},f.memoizedState=g,f=f.alternate,f!==null&&(f.memoizedState=g),g}function wF(f){var g=xF(f).next.queue;wb(f,g,{},Oo())}function kA(){return va(Bb)}function _F(){return ys().memoizedState}function SF(){return ys().memoizedState}function fde(f){for(var g=f.return;g!==null;){switch(g.tag){case 24:case 3:var w=Oo();f=nf(w);var k=rf(g,f,w);k!==null&&(Do(k,g,w),mb(k,g,w)),g={cache:tA()},f.payload=g;return}g=g.return}}function hde(f,g,w){var k=Oo();w={lane:k,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null},r_(f)?kF(g,w):(w=ms(f,g,w,k),w!==null&&(Do(w,f,k),EF(w,g,k)))}function CF(f,g,w){var k=Oo();wb(f,g,w,k)}function wb(f,g,w,k){var j={lane:k,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null};if(r_(f))kF(g,j);else{var q=f.alternate;if(f.lanes===0&&(q===null||q.lanes===0)&&(q=g.lastRenderedReducer,q!==null))try{var ue=g.lastRenderedState,Te=q(ue,w);if(j.hasEagerState=!0,j.eagerState=Te,ba(Te,ue))return ns(f,g,j,0),Ri===null&&Jn(),!1}catch{}finally{}if(w=ms(f,g,j,k),w!==null)return Do(w,f,k),EF(w,g,k),!0}return!1}function EA(f,g,w,k){if(k={lane:2,revertLane:iR(),action:k,hasEagerState:!1,eagerState:null,next:null},r_(f)){if(g)throw Error(r(479))}else g=ms(f,w,k,2),g!==null&&Do(g,f,2)}function r_(f){var g=f.alternate;return f===Tr||g!==null&&g===Tr}function kF(f,g){Km=X1=!0;var w=f.pending;w===null?g.next=g:(g.next=w.next,w.next=g),f.pending=g}function EF(f,g,w){if((w&4194048)!==0){var k=g.lanes;k&=f.pendingLanes,w|=k,g.lanes=w,ze(f,w)}}var i_={readContext:va,use:Q1,useCallback:rs,useContext:rs,useEffect:rs,useImperativeHandle:rs,useLayoutEffect:rs,useInsertionEffect:rs,useMemo:rs,useReducer:rs,useRef:rs,useState:rs,useDebugValue:rs,useDeferredValue:rs,useTransition:rs,useSyncExternalStore:rs,useId:rs,useHostTransitionStatus:rs,useFormState:rs,useActionState:rs,useOptimistic:rs,useMemoCache:rs,useCacheRefresh:rs},TF={readContext:va,use:Q1,useCallback:function(f,g){return io().memoizedState=[f,g===void 0?null:g],f},useContext:va,useEffect:uF,useImperativeHandle:function(f,g,w){w=w!=null?w.concat([f]):null,n_(4194308,4,pF.bind(null,g,f),w)},useLayoutEffect:function(f,g){return n_(4194308,4,f,g)},useInsertionEffect:function(f,g){n_(4,2,f,g)},useMemo:function(f,g){var w=io();g=g===void 0?null:g;var k=f();if(Wh){Bt(!0);try{f()}finally{Bt(!1)}}return w.memoizedState=[k,g],k},useReducer:function(f,g,w){var k=io();if(w!==void 0){var j=w(g);if(Wh){Bt(!0);try{w(g)}finally{Bt(!1)}}}else j=g;return k.memoizedState=k.baseState=j,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:j},k.queue=f,f=f.dispatch=hde.bind(null,Tr,f),[k.memoizedState,f]},useRef:function(f){var g=io();return f={current:f},g.memoizedState=f},useState:function(f){f=xA(f);var g=f.queue,w=CF.bind(null,Tr,g);return g.dispatch=w,[f.memoizedState,w]},useDebugValue:_A,useDeferredValue:function(f,g){var w=io();return SA(w,f,g)},useTransition:function(){var f=xA(!1);return f=vF.bind(null,Tr,f.queue,!0,!1),io().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,g,w){var k=Tr,j=io();if(ei){if(w===void 0)throw Error(r(407));w=w()}else{if(w=g(),Ri===null)throw Error(r(349));(Ur&124)!==0||K5(k,g,w)}j.memoizedState=w;var q={value:w,getSnapshot:g};return j.queue=q,uF(Z5.bind(null,k,q,f),[f]),k.flags|=2048,Zm(9,t_(),Y5.bind(null,k,q,w,g),null),w},useId:function(){var f=io(),g=Ri.identifierPrefix;if(ei){var w=Du,k=Ou;w=(k&~(1<<32-rn(k)-1)).toString(32)+w,g="«"+g+"R"+w,w=J1++,0<w&&(g+="H"+w.toString(32)),g+="»"}else w=ode++,g="«"+g+"r"+w.toString(32)+"»";return f.memoizedState=g},useHostTransitionStatus:kA,useFormState:sF,useActionState:sF,useOptimistic:function(f){var g=io();g.memoizedState=g.baseState=f;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=w,g=EA.bind(null,Tr,!0,w),w.dispatch=g,[f,g]},useMemoCache:yA,useCacheRefresh:function(){return io().memoizedState=fde.bind(null,Tr)}},AF={readContext:va,use:Q1,useCallback:gF,useContext:va,useEffect:dF,useImperativeHandle:mF,useInsertionEffect:fF,useLayoutEffect:hF,useMemo:yF,useReducer:e_,useRef:cF,useState:function(){return e_(Bu)},useDebugValue:_A,useDeferredValue:function(f,g){var w=ys();return bF(w,mi.memoizedState,f,g)},useTransition:function(){var f=e_(Bu)[0],g=ys().memoizedState;return[typeof f=="boolean"?f:vb(f),g]},useSyncExternalStore:G5,useId:_F,useHostTransitionStatus:kA,useFormState:aF,useActionState:aF,useOptimistic:function(f,g){var w=ys();return Q5(w,mi,f,g)},useMemoCache:yA,useCacheRefresh:SF},pde={readContext:va,use:Q1,useCallback:gF,useContext:va,useEffect:dF,useImperativeHandle:mF,useInsertionEffect:fF,useLayoutEffect:hF,useMemo:yF,useReducer:vA,useRef:cF,useState:function(){return vA(Bu)},useDebugValue:_A,useDeferredValue:function(f,g){var w=ys();return mi===null?SA(w,f,g):bF(w,mi.memoizedState,f,g)},useTransition:function(){var f=vA(Bu)[0],g=ys().memoizedState;return[typeof f=="boolean"?f:vb(f),g]},useSyncExternalStore:G5,useId:_F,useHostTransitionStatus:kA,useFormState:lF,useActionState:lF,useOptimistic:function(f,g){var w=ys();return mi!==null?Q5(w,mi,f,g):(w.baseState=f,[f,w.queue.dispatch])},useMemoCache:yA,useCacheRefresh:SF},Xm=null,_b=0;function s_(f){var g=_b;return _b+=1,Xm===null&&(Xm=[]),B5(Xm,f,g)}function Sb(f,g){g=g.props.ref,f.ref=g!==void 0?g:null}function a_(f,g){throw g.$$typeof===d?Error(r(525)):(f=Object.prototype.toString.call(g),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":f)))}function RF(f){var g=f._init;return g(f._payload)}function IF(f){function g(ut,tt){if(f){var yt=ut.deletions;yt===null?(ut.deletions=[tt],ut.flags|=16):yt.push(tt)}}function w(ut,tt){if(!f)return null;for(;tt!==null;)g(ut,tt),tt=tt.sibling;return null}function k(ut){for(var tt=new Map;ut!==null;)ut.key!==null?tt.set(ut.key,ut):tt.set(ut.index,ut),ut=ut.sibling;return tt}function j(ut,tt){return ut=Pu(ut,tt),ut.index=0,ut.sibling=null,ut}function q(ut,tt,yt){return ut.index=yt,f?(yt=ut.alternate,yt!==null?(yt=yt.index,yt<tt?(ut.flags|=67108866,tt):yt):(ut.flags|=67108866,tt)):(ut.flags|=1048576,tt)}function ue(ut){return f&&ut.alternate===null&&(ut.flags|=67108866),ut}function Te(ut,tt,yt,Dt){return tt===null||tt.tag!==6?(tt=GT(yt,ut.mode,Dt),tt.return=ut,tt):(tt=j(tt,yt),tt.return=ut,tt)}function Ge(ut,tt,yt,Dt){var yn=yt.type;return yn===y?jt(ut,tt,yt.props.children,Dt,yt.key):tt!==null&&(tt.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===N&&RF(yn)===tt.type)?(tt=j(tt,yt.props),Sb(tt,yt),tt.return=ut,tt):(tt=U1(yt.type,yt.key,yt.props,null,ut.mode,Dt),Sb(tt,yt),tt.return=ut,tt)}function vt(ut,tt,yt,Dt){return tt===null||tt.tag!==4||tt.stateNode.containerInfo!==yt.containerInfo||tt.stateNode.implementation!==yt.implementation?(tt=KT(yt,ut.mode,Dt),tt.return=ut,tt):(tt=j(tt,yt.children||[]),tt.return=ut,tt)}function jt(ut,tt,yt,Dt,yn){return tt===null||tt.tag!==7?(tt=Lh(yt,ut.mode,Dt,yn),tt.return=ut,tt):(tt=j(tt,yt),tt.return=ut,tt)}function Ft(ut,tt,yt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return tt=GT(""+tt,ut.mode,yt),tt.return=ut,tt;if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case h:return yt=U1(tt.type,tt.key,tt.props,null,ut.mode,yt),Sb(yt,tt),yt.return=ut,yt;case m:return tt=KT(tt,ut.mode,yt),tt.return=ut,tt;case N:var Dt=tt._init;return tt=Dt(tt._payload),Ft(ut,tt,yt)}if(J(tt)||O(tt))return tt=Lh(tt,ut.mode,yt,null),tt.return=ut,tt;if(typeof tt.then=="function")return Ft(ut,s_(tt),yt);if(tt.$$typeof===S)return Ft(ut,W1(ut,tt),yt);a_(ut,tt)}return null}function _t(ut,tt,yt,Dt){var yn=tt!==null?tt.key:null;if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return yn!==null?null:Te(ut,tt,""+yt,Dt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case h:return yt.key===yn?Ge(ut,tt,yt,Dt):null;case m:return yt.key===yn?vt(ut,tt,yt,Dt):null;case N:return yn=yt._init,yt=yn(yt._payload),_t(ut,tt,yt,Dt)}if(J(yt)||O(yt))return yn!==null?null:jt(ut,tt,yt,Dt,null);if(typeof yt.then=="function")return _t(ut,tt,s_(yt),Dt);if(yt.$$typeof===S)return _t(ut,tt,W1(ut,yt),Dt);a_(ut,yt)}return null}function Ct(ut,tt,yt,Dt,yn){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return ut=ut.get(yt)||null,Te(tt,ut,""+Dt,yn);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case h:return ut=ut.get(Dt.key===null?yt:Dt.key)||null,Ge(tt,ut,Dt,yn);case m:return ut=ut.get(Dt.key===null?yt:Dt.key)||null,vt(tt,ut,Dt,yn);case N:var Nr=Dt._init;return Dt=Nr(Dt._payload),Ct(ut,tt,yt,Dt,yn)}if(J(Dt)||O(Dt))return ut=ut.get(yt)||null,jt(tt,ut,Dt,yn,null);if(typeof Dt.then=="function")return Ct(ut,tt,yt,s_(Dt),yn);if(Dt.$$typeof===S)return Ct(ut,tt,yt,W1(tt,Dt),yn);a_(tt,Dt)}return null}function Qn(ut,tt,yt,Dt){for(var yn=null,Nr=null,In=tt,Hn=tt=0,Us=null;In!==null&&Hn<yt.length;Hn++){In.index>Hn?(Us=In,In=null):Us=In.sibling;var Zr=_t(ut,In,yt[Hn],Dt);if(Zr===null){In===null&&(In=Us);break}f&&In&&Zr.alternate===null&&g(ut,In),tt=q(Zr,tt,Hn),Nr===null?yn=Zr:Nr.sibling=Zr,Nr=Zr,In=Us}if(Hn===yt.length)return w(ut,In),ei&&$h(ut,Hn),yn;if(In===null){for(;Hn<yt.length;Hn++)In=Ft(ut,yt[Hn],Dt),In!==null&&(tt=q(In,tt,Hn),Nr===null?yn=In:Nr.sibling=In,Nr=In);return ei&&$h(ut,Hn),yn}for(In=k(In);Hn<yt.length;Hn++)Us=Ct(In,ut,Hn,yt[Hn],Dt),Us!==null&&(f&&Us.alternate!==null&&In.delete(Us.key===null?Hn:Us.key),tt=q(Us,tt,Hn),Nr===null?yn=Us:Nr.sibling=Us,Nr=Us);return f&&In.forEach(function(wf){return g(ut,wf)}),ei&&$h(ut,Hn),yn}function Un(ut,tt,yt,Dt){if(yt==null)throw Error(r(151));for(var yn=null,Nr=null,In=tt,Hn=tt=0,Us=null,Zr=yt.next();In!==null&&!Zr.done;Hn++,Zr=yt.next()){In.index>Hn?(Us=In,In=null):Us=In.sibling;var wf=_t(ut,In,Zr.value,Dt);if(wf===null){In===null&&(In=Us);break}f&&In&&wf.alternate===null&&g(ut,In),tt=q(wf,tt,Hn),Nr===null?yn=wf:Nr.sibling=wf,Nr=wf,In=Us}if(Zr.done)return w(ut,In),ei&&$h(ut,Hn),yn;if(In===null){for(;!Zr.done;Hn++,Zr=yt.next())Zr=Ft(ut,Zr.value,Dt),Zr!==null&&(tt=q(Zr,tt,Hn),Nr===null?yn=Zr:Nr.sibling=Zr,Nr=Zr);return ei&&$h(ut,Hn),yn}for(In=k(In);!Zr.done;Hn++,Zr=yt.next())Zr=Ct(In,ut,Hn,Zr.value,Dt),Zr!==null&&(f&&Zr.alternate!==null&&In.delete(Zr.key===null?Hn:Zr.key),tt=q(Zr,tt,Hn),Nr===null?yn=Zr:Nr.sibling=Zr,Nr=Zr);return f&&In.forEach(function(mfe){return g(ut,mfe)}),ei&&$h(ut,Hn),yn}function yi(ut,tt,yt,Dt){if(typeof yt=="object"&&yt!==null&&yt.type===y&&yt.key===null&&(yt=yt.props.children),typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case h:e:{for(var yn=yt.key;tt!==null;){if(tt.key===yn){if(yn=yt.type,yn===y){if(tt.tag===7){w(ut,tt.sibling),Dt=j(tt,yt.props.children),Dt.return=ut,ut=Dt;break e}}else if(tt.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===N&&RF(yn)===tt.type){w(ut,tt.sibling),Dt=j(tt,yt.props),Sb(Dt,yt),Dt.return=ut,ut=Dt;break e}w(ut,tt);break}else g(ut,tt);tt=tt.sibling}yt.type===y?(Dt=Lh(yt.props.children,ut.mode,Dt,yt.key),Dt.return=ut,ut=Dt):(Dt=U1(yt.type,yt.key,yt.props,null,ut.mode,Dt),Sb(Dt,yt),Dt.return=ut,ut=Dt)}return ue(ut);case m:e:{for(yn=yt.key;tt!==null;){if(tt.key===yn)if(tt.tag===4&&tt.stateNode.containerInfo===yt.containerInfo&&tt.stateNode.implementation===yt.implementation){w(ut,tt.sibling),Dt=j(tt,yt.children||[]),Dt.return=ut,ut=Dt;break e}else{w(ut,tt);break}else g(ut,tt);tt=tt.sibling}Dt=KT(yt,ut.mode,Dt),Dt.return=ut,ut=Dt}return ue(ut);case N:return yn=yt._init,yt=yn(yt._payload),yi(ut,tt,yt,Dt)}if(J(yt))return Qn(ut,tt,yt,Dt);if(O(yt)){if(yn=O(yt),typeof yn!="function")throw Error(r(150));return yt=yn.call(yt),Un(ut,tt,yt,Dt)}if(typeof yt.then=="function")return yi(ut,tt,s_(yt),Dt);if(yt.$$typeof===S)return yi(ut,tt,W1(ut,yt),Dt);a_(ut,yt)}return typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint"?(yt=""+yt,tt!==null&&tt.tag===6?(w(ut,tt.sibling),Dt=j(tt,yt),Dt.return=ut,ut=Dt):(w(ut,tt),Dt=GT(yt,ut.mode,Dt),Dt.return=ut,ut=Dt),ue(ut)):w(ut,tt)}return function(ut,tt,yt,Dt){try{_b=0;var yn=yi(ut,tt,yt,Dt);return Xm=null,yn}catch(In){if(In===hb||In===K1)throw In;var Nr=No(29,In,null,ut.mode);return Nr.lanes=Dt,Nr.return=ut,Nr}finally{}}}var Jm=IF(!0),NF=IF(!1),ol=te(null),Tc=null;function af(f){var g=f.alternate;se(Ts,Ts.current&1),se(ol,f),Tc===null&&(g===null||Gm.current!==null||g.memoizedState!==null)&&(Tc=f)}function MF(f){if(f.tag===22){if(se(Ts,Ts.current),se(ol,f),Tc===null){var g=f.alternate;g!==null&&g.memoizedState!==null&&(Tc=f)}}else of()}function of(){se(Ts,Ts.current),se(ol,ol.current)}function $u(f){ee(ol),Tc===f&&(Tc=null),ee(Ts)}var Ts=te(0);function o_(f){for(var g=f;g!==null;){if(g.tag===13){var w=g.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||gR(w)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function TA(f,g,w,k){g=f.memoizedState,w=w(k,g),w=w==null?g:u({},g,w),f.memoizedState=w,f.lanes===0&&(f.updateQueue.baseState=w)}var AA={enqueueSetState:function(f,g,w){f=f._reactInternals;var k=Oo(),j=nf(k);j.payload=g,w!=null&&(j.callback=w),g=rf(f,j,k),g!==null&&(Do(g,f,k),mb(g,f,k))},enqueueReplaceState:function(f,g,w){f=f._reactInternals;var k=Oo(),j=nf(k);j.tag=1,j.payload=g,w!=null&&(j.callback=w),g=rf(f,j,k),g!==null&&(Do(g,f,k),mb(g,f,k))},enqueueForceUpdate:function(f,g){f=f._reactInternals;var w=Oo(),k=nf(w);k.tag=2,g!=null&&(k.callback=g),g=rf(f,k,w),g!==null&&(Do(g,f,w),mb(g,f,w))}};function jF(f,g,w,k,j,q,ue){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(k,q,ue):g.prototype&&g.prototype.isPureReactComponent?!I(w,k)||!I(j,q):!0}function PF(f,g,w,k){f=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(w,k),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(w,k),g.state!==f&&AA.enqueueReplaceState(g,g.state,null)}function Gh(f,g){var w=g;if("ref"in g){w={};for(var k in g)k!=="ref"&&(w[k]=g[k])}if(f=f.defaultProps){w===g&&(w=u({},w));for(var j in f)w[j]===void 0&&(w[j]=f[j])}return w}var l_=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(g))return}else if(typeof os=="object"&&typeof os.emit=="function"){os.emit("uncaughtException",f);return}console.error(f)};function OF(f){l_(f)}function DF(f){console.error(f)}function FF(f){l_(f)}function c_(f,g){try{var w=f.onUncaughtError;w(g.value,{componentStack:g.stack})}catch(k){setTimeout(function(){throw k})}}function LF(f,g,w){try{var k=f.onCaughtError;k(w.value,{componentStack:w.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function RA(f,g,w){return w=nf(w),w.tag=3,w.payload={element:null},w.callback=function(){c_(f,g)},w}function BF(f){return f=nf(f),f.tag=3,f}function $F(f,g,w,k){var j=w.type.getDerivedStateFromError;if(typeof j=="function"){var q=k.value;f.payload=function(){return j(q)},f.callback=function(){LF(g,w,k)}}var ue=w.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(f.callback=function(){LF(g,w,k),typeof j!="function"&&(hf===null?hf=new Set([this]):hf.add(this));var Te=k.stack;this.componentDidCatch(k.value,{componentStack:Te!==null?Te:""})})}function mde(f,g,w,k,j){if(w.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){if(g=w.alternate,g!==null&&ub(g,w,j,!0),w=ol.current,w!==null){switch(w.tag){case 13:return Tc===null?QA():w.alternate===null&&Xi===0&&(Xi=3),w.flags&=-257,w.flags|=65536,w.lanes=j,k===iA?w.flags|=16384:(g=w.updateQueue,g===null?w.updateQueue=new Set([k]):g.add(k),tR(f,k,j)),!1;case 22:return w.flags|=65536,k===iA?w.flags|=16384:(g=w.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([k])},w.updateQueue=g):(w=g.retryQueue,w===null?g.retryQueue=new Set([k]):w.add(k)),tR(f,k,j)),!1}throw Error(r(435,w.tag))}return tR(f,k,j),QA(),!1}if(ei)return g=ol.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=j,k!==XT&&(f=Error(r(422),{cause:k}),cb(On(f,w)))):(k!==XT&&(g=Error(r(423),{cause:k}),cb(On(g,w))),f=f.current.alternate,f.flags|=65536,j&=-j,f.lanes|=j,k=On(k,w),j=RA(f.stateNode,k,j),oA(f,j),Xi!==4&&(Xi=2)),!1;var q=Error(r(520),{cause:k});if(q=On(q,w),Ib===null?Ib=[q]:Ib.push(q),Xi!==4&&(Xi=2),g===null)return!0;k=On(k,w),w=g;do{switch(w.tag){case 3:return w.flags|=65536,f=j&-j,w.lanes|=f,f=RA(w.stateNode,k,f),oA(w,f),!1;case 1:if(g=w.type,q=w.stateNode,(w.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(hf===null||!hf.has(q))))return w.flags|=65536,j&=-j,w.lanes|=j,j=BF(j),$F(j,f,w,k),oA(w,j),!1}w=w.return}while(w!==null);return!1}var zF=Error(r(461)),$s=!1;function sa(f,g,w,k){g.child=f===null?NF(g,null,w,k):Jm(g,f.child,w,k)}function UF(f,g,w,k,j){w=w.render;var q=g.ref;if("ref"in k){var ue={};for(var Te in k)Te!=="ref"&&(ue[Te]=k[Te])}else ue=k;return Vh(g),k=fA(f,g,w,ue,q,j),Te=hA(),f!==null&&!$s?(pA(f,g,j),zu(f,g,j)):(ei&&Te&&YT(g),g.flags|=1,sa(f,g,k,j),g.child)}function qF(f,g,w,k,j){if(f===null){var q=w.type;return typeof q=="function"&&!WT(q)&&q.defaultProps===void 0&&w.compare===null?(g.tag=15,g.type=q,VF(f,g,q,k,j)):(f=U1(w.type,null,k,g,g.mode,j),f.ref=g.ref,f.return=g,g.child=f)}if(q=f.child,!FA(f,j)){var ue=q.memoizedProps;if(w=w.compare,w=w!==null?w:I,w(ue,k)&&f.ref===g.ref)return zu(f,g,j)}return g.flags|=1,f=Pu(q,k),f.ref=g.ref,f.return=g,g.child=f}function VF(f,g,w,k,j){if(f!==null){var q=f.memoizedProps;if(I(q,k)&&f.ref===g.ref)if($s=!1,g.pendingProps=k=q,FA(f,j))(f.flags&131072)!==0&&($s=!0);else return g.lanes=f.lanes,zu(f,g,j)}return IA(f,g,w,k,j)}function HF(f,g,w){var k=g.pendingProps,j=k.children,q=f!==null?f.memoizedState:null;if(k.mode==="hidden"){if((g.flags&128)!==0){if(k=q!==null?q.baseLanes|w:w,f!==null){for(j=g.child=f.child,q=0;j!==null;)q=q|j.lanes|j.childLanes,j=j.sibling;g.childLanes=q&~k}else g.childLanes=0,g.child=null;return WF(f,g,k,w)}if((w&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},f!==null&&G1(g,q!==null?q.cachePool:null),q!==null?V5(g,q):cA(),MF(g);else return g.lanes=g.childLanes=536870912,WF(f,g,q!==null?q.baseLanes|w:w,w)}else q!==null?(G1(g,q.cachePool),V5(g,q),of(),g.memoizedState=null):(f!==null&&G1(g,null),cA(),of());return sa(f,g,j,w),g.child}function WF(f,g,w,k){var j=rA();return j=j===null?null:{parent:Es._currentValue,pool:j},g.memoizedState={baseLanes:w,cachePool:j},f!==null&&G1(g,null),cA(),MF(g),f!==null&&ub(f,g,k,!0),null}function u_(f,g){var w=g.ref;if(w===null)f!==null&&f.ref!==null&&(g.flags|=4194816);else{if(typeof w!="function"&&typeof w!="object")throw Error(r(284));(f===null||f.ref!==w)&&(g.flags|=4194816)}}function IA(f,g,w,k,j){return Vh(g),w=fA(f,g,w,k,void 0,j),k=hA(),f!==null&&!$s?(pA(f,g,j),zu(f,g,j)):(ei&&k&&YT(g),g.flags|=1,sa(f,g,w,j),g.child)}function GF(f,g,w,k,j,q){return Vh(g),g.updateQueue=null,w=W5(g,k,w,j),H5(f),k=hA(),f!==null&&!$s?(pA(f,g,q),zu(f,g,q)):(ei&&k&&YT(g),g.flags|=1,sa(f,g,w,q),g.child)}function KF(f,g,w,k,j){if(Vh(g),g.stateNode===null){var q=kc,ue=w.contextType;typeof ue=="object"&&ue!==null&&(q=va(ue)),q=new w(k,q),g.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=AA,g.stateNode=q,q._reactInternals=g,q=g.stateNode,q.props=k,q.state=g.memoizedState,q.refs={},sA(g),ue=w.contextType,q.context=typeof ue=="object"&&ue!==null?va(ue):kc,q.state=g.memoizedState,ue=w.getDerivedStateFromProps,typeof ue=="function"&&(TA(g,w,ue,k),q.state=g.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(ue=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),ue!==q.state&&AA.enqueueReplaceState(q,q.state,null),yb(g,k,q,j),gb(),q.state=g.memoizedState),typeof q.componentDidMount=="function"&&(g.flags|=4194308),k=!0}else if(f===null){q=g.stateNode;var Te=g.memoizedProps,Ge=Gh(w,Te);q.props=Ge;var vt=q.context,jt=w.contextType;ue=kc,typeof jt=="object"&&jt!==null&&(ue=va(jt));var Ft=w.getDerivedStateFromProps;jt=typeof Ft=="function"||typeof q.getSnapshotBeforeUpdate=="function",Te=g.pendingProps!==Te,jt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(Te||vt!==ue)&&PF(g,q,k,ue),tf=!1;var _t=g.memoizedState;q.state=_t,yb(g,k,q,j),gb(),vt=g.memoizedState,Te||_t!==vt||tf?(typeof Ft=="function"&&(TA(g,w,Ft,k),vt=g.memoizedState),(Ge=tf||jF(g,w,Ge,k,_t,vt,ue))?(jt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(g.flags|=4194308)):(typeof q.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=k,g.memoizedState=vt),q.props=k,q.state=vt,q.context=ue,k=Ge):(typeof q.componentDidMount=="function"&&(g.flags|=4194308),k=!1)}else{q=g.stateNode,aA(f,g),ue=g.memoizedProps,jt=Gh(w,ue),q.props=jt,Ft=g.pendingProps,_t=q.context,vt=w.contextType,Ge=kc,typeof vt=="object"&&vt!==null&&(Ge=va(vt)),Te=w.getDerivedStateFromProps,(vt=typeof Te=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ue!==Ft||_t!==Ge)&&PF(g,q,k,Ge),tf=!1,_t=g.memoizedState,q.state=_t,yb(g,k,q,j),gb();var Ct=g.memoizedState;ue!==Ft||_t!==Ct||tf||f!==null&&f.dependencies!==null&&H1(f.dependencies)?(typeof Te=="function"&&(TA(g,w,Te,k),Ct=g.memoizedState),(jt=tf||jF(g,w,jt,k,_t,Ct,Ge)||f!==null&&f.dependencies!==null&&H1(f.dependencies))?(vt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(k,Ct,Ge),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(k,Ct,Ge)),typeof q.componentDidUpdate=="function"&&(g.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof q.componentDidUpdate!="function"||ue===f.memoizedProps&&_t===f.memoizedState||(g.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===f.memoizedProps&&_t===f.memoizedState||(g.flags|=1024),g.memoizedProps=k,g.memoizedState=Ct),q.props=k,q.state=Ct,q.context=Ge,k=jt):(typeof q.componentDidUpdate!="function"||ue===f.memoizedProps&&_t===f.memoizedState||(g.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===f.memoizedProps&&_t===f.memoizedState||(g.flags|=1024),k=!1)}return q=k,u_(f,g),k=(g.flags&128)!==0,q||k?(q=g.stateNode,w=k&&typeof w.getDerivedStateFromError!="function"?null:q.render(),g.flags|=1,f!==null&&k?(g.child=Jm(g,f.child,null,j),g.child=Jm(g,null,w,j)):sa(f,g,w,j),g.memoizedState=q.state,f=g.child):f=zu(f,g,j),f}function YF(f,g,w,k){return lb(),g.flags|=256,sa(f,g,w,k),g.child}var NA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function MA(f){return{baseLanes:f,cachePool:D5()}}function jA(f,g,w){return f=f!==null?f.childLanes&~w:0,g&&(f|=ll),f}function ZF(f,g,w){var k=g.pendingProps,j=!1,q=(g.flags&128)!==0,ue;if((ue=q)||(ue=f!==null&&f.memoizedState===null?!1:(Ts.current&2)!==0),ue&&(j=!0,g.flags&=-129),ue=(g.flags&32)!==0,g.flags&=-33,f===null){if(ei){if(j?af(g):of(),ei){var Te=Zi,Ge;if(Ge=Te){e:{for(Ge=Te,Te=Ec;Ge.nodeType!==8;){if(!Te){Te=null;break e}if(Ge=Vl(Ge.nextSibling),Ge===null){Te=null;break e}}Te=Ge}Te!==null?(g.memoizedState={dehydrated:Te,treeContext:Bh!==null?{id:Ou,overflow:Du}:null,retryLane:536870912,hydrationErrors:null},Ge=No(18,null,null,0),Ge.stateNode=Te,Ge.return=g,g.child=Ge,La=g,Zi=null,Ge=!0):Ge=!1}Ge||Uh(g)}if(Te=g.memoizedState,Te!==null&&(Te=Te.dehydrated,Te!==null))return gR(Te)?g.lanes=32:g.lanes=536870912,null;$u(g)}return Te=k.children,k=k.fallback,j?(of(),j=g.mode,Te=d_({mode:"hidden",children:Te},j),k=Lh(k,j,w,null),Te.return=g,k.return=g,Te.sibling=k,g.child=Te,j=g.child,j.memoizedState=MA(w),j.childLanes=jA(f,ue,w),g.memoizedState=NA,k):(af(g),PA(g,Te))}if(Ge=f.memoizedState,Ge!==null&&(Te=Ge.dehydrated,Te!==null)){if(q)g.flags&256?(af(g),g.flags&=-257,g=OA(f,g,w)):g.memoizedState!==null?(of(),g.child=f.child,g.flags|=128,g=null):(of(),j=k.fallback,Te=g.mode,k=d_({mode:"visible",children:k.children},Te),j=Lh(j,Te,w,null),j.flags|=2,k.return=g,j.return=g,k.sibling=j,g.child=k,Jm(g,f.child,null,w),k=g.child,k.memoizedState=MA(w),k.childLanes=jA(f,ue,w),g.memoizedState=NA,g=j);else if(af(g),gR(Te)){if(ue=Te.nextSibling&&Te.nextSibling.dataset,ue)var vt=ue.dgst;ue=vt,k=Error(r(419)),k.stack="",k.digest=ue,cb({value:k,source:null,stack:null}),g=OA(f,g,w)}else if($s||ub(f,g,w,!1),ue=(w&f.childLanes)!==0,$s||ue){if(ue=Ri,ue!==null&&(k=w&-w,k=(k&42)!==0?1:Rt(k),k=(k&(ue.suspendedLanes|w))!==0?0:k,k!==0&&k!==Ge.retryLane))throw Ge.retryLane=k,Ul(f,k),Do(ue,f,k),zF;Te.data==="$?"||QA(),g=OA(f,g,w)}else Te.data==="$?"?(g.flags|=192,g.child=f.child,g=null):(f=Ge.treeContext,Zi=Vl(Te.nextSibling),La=g,ei=!0,zh=null,Ec=!1,f!==null&&(sl[al++]=Ou,sl[al++]=Du,sl[al++]=Bh,Ou=f.id,Du=f.overflow,Bh=g),g=PA(g,k.children),g.flags|=4096);return g}return j?(of(),j=k.fallback,Te=g.mode,Ge=f.child,vt=Ge.sibling,k=Pu(Ge,{mode:"hidden",children:k.children}),k.subtreeFlags=Ge.subtreeFlags&65011712,vt!==null?j=Pu(vt,j):(j=Lh(j,Te,w,null),j.flags|=2),j.return=g,k.return=g,k.sibling=j,g.child=k,k=j,j=g.child,Te=f.child.memoizedState,Te===null?Te=MA(w):(Ge=Te.cachePool,Ge!==null?(vt=Es._currentValue,Ge=Ge.parent!==vt?{parent:vt,pool:vt}:Ge):Ge=D5(),Te={baseLanes:Te.baseLanes|w,cachePool:Ge}),j.memoizedState=Te,j.childLanes=jA(f,ue,w),g.memoizedState=NA,k):(af(g),w=f.child,f=w.sibling,w=Pu(w,{mode:"visible",children:k.children}),w.return=g,w.sibling=null,f!==null&&(ue=g.deletions,ue===null?(g.deletions=[f],g.flags|=16):ue.push(f)),g.child=w,g.memoizedState=null,w)}function PA(f,g){return g=d_({mode:"visible",children:g},f.mode),g.return=f,f.child=g}function d_(f,g){return f=No(22,f,null,g),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function OA(f,g,w){return Jm(g,f.child,null,w),f=PA(g,g.pendingProps.children),f.flags|=2,g.memoizedState=null,f}function XF(f,g,w){f.lanes|=g;var k=f.alternate;k!==null&&(k.lanes|=g),QT(f.return,g,w)}function DA(f,g,w,k,j){var q=f.memoizedState;q===null?f.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:k,tail:w,tailMode:j}:(q.isBackwards=g,q.rendering=null,q.renderingStartTime=0,q.last=k,q.tail=w,q.tailMode=j)}function JF(f,g,w){var k=g.pendingProps,j=k.revealOrder,q=k.tail;if(sa(f,g,k.children,w),k=Ts.current,(k&2)!==0)k=k&1|2,g.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=g.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&XF(f,w,g);else if(f.tag===19)XF(f,w,g);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===g)break e;for(;f.sibling===null;){if(f.return===null||f.return===g)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}k&=1}switch(se(Ts,k),j){case"forwards":for(w=g.child,j=null;w!==null;)f=w.alternate,f!==null&&o_(f)===null&&(j=w),w=w.sibling;w=j,w===null?(j=g.child,g.child=null):(j=w.sibling,w.sibling=null),DA(g,!1,j,w,q);break;case"backwards":for(w=null,j=g.child,g.child=null;j!==null;){if(f=j.alternate,f!==null&&o_(f)===null){g.child=j;break}f=j.sibling,j.sibling=w,w=j,j=f}DA(g,!0,w,null,q);break;case"together":DA(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function zu(f,g,w){if(f!==null&&(g.dependencies=f.dependencies),ff|=g.lanes,(w&g.childLanes)===0)if(f!==null){if(ub(f,g,w,!1),(w&g.childLanes)===0)return null}else return null;if(f!==null&&g.child!==f.child)throw Error(r(153));if(g.child!==null){for(f=g.child,w=Pu(f,f.pendingProps),g.child=w,w.return=g;f.sibling!==null;)f=f.sibling,w=w.sibling=Pu(f,f.pendingProps),w.return=g;w.sibling=null}return g.child}function FA(f,g){return(f.lanes&g)!==0?!0:(f=f.dependencies,!!(f!==null&&H1(f)))}function gde(f,g,w){switch(g.tag){case 3:Ne(g,g.stateNode.containerInfo),ef(g,Es,f.memoizedState.cache),lb();break;case 27:case 5:Ue(g);break;case 4:Ne(g,g.stateNode.containerInfo);break;case 10:ef(g,g.type,g.memoizedProps.value);break;case 13:var k=g.memoizedState;if(k!==null)return k.dehydrated!==null?(af(g),g.flags|=128,null):(w&g.child.childLanes)!==0?ZF(f,g,w):(af(g),f=zu(f,g,w),f!==null?f.sibling:null);af(g);break;case 19:var j=(f.flags&128)!==0;if(k=(w&g.childLanes)!==0,k||(ub(f,g,w,!1),k=(w&g.childLanes)!==0),j){if(k)return JF(f,g,w);g.flags|=128}if(j=g.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),se(Ts,Ts.current),k)break;return null;case 22:case 23:return g.lanes=0,HF(f,g,w);case 24:ef(g,Es,f.memoizedState.cache)}return zu(f,g,w)}function QF(f,g,w){if(f!==null)if(f.memoizedProps!==g.pendingProps)$s=!0;else{if(!FA(f,w)&&(g.flags&128)===0)return $s=!1,gde(f,g,w);$s=(f.flags&131072)!==0}else $s=!1,ei&&(g.flags&1048576)!==0&&R5(g,V1,g.index);switch(g.lanes=0,g.tag){case 16:e:{f=g.pendingProps;var k=g.elementType,j=k._init;if(k=j(k._payload),g.type=k,typeof k=="function")WT(k)?(f=Gh(k,f),g.tag=1,g=KF(null,g,k,f,w)):(g.tag=0,g=IA(null,g,k,f,w));else{if(k!=null){if(j=k.$$typeof,j===C){g.tag=11,g=UF(null,g,k,f,w);break e}else if(j===R){g.tag=14,g=qF(null,g,k,f,w);break e}}throw g=F(k)||k,Error(r(306,g,""))}}return g;case 0:return IA(f,g,g.type,g.pendingProps,w);case 1:return k=g.type,j=Gh(k,g.pendingProps),KF(f,g,k,j,w);case 3:e:{if(Ne(g,g.stateNode.containerInfo),f===null)throw Error(r(387));k=g.pendingProps;var q=g.memoizedState;j=q.element,aA(f,g),yb(g,k,null,w);var ue=g.memoizedState;if(k=ue.cache,ef(g,Es,k),k!==q.cache&&eA(g,[Es],w,!0),gb(),k=ue.element,q.isDehydrated)if(q={element:k,isDehydrated:!1,cache:ue.cache},g.updateQueue.baseState=q,g.memoizedState=q,g.flags&256){g=YF(f,g,k,w);break e}else if(k!==j){j=On(Error(r(424)),g),cb(j),g=YF(f,g,k,w);break e}else{switch(f=g.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(Zi=Vl(f.firstChild),La=g,ei=!0,zh=null,Ec=!0,w=NF(g,null,k,w),g.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling}else{if(lb(),k===j){g=zu(f,g,w);break e}sa(f,g,k,w)}g=g.child}return g;case 26:return u_(f,g),f===null?(w=rL(g.type,null,g.pendingProps,null))?g.memoizedState=w:ei||(w=g.type,f=g.pendingProps,k=k_(Me.current).createElement(w),k[ye]=g,k[Pe]=f,oa(k,w,f),br(k),g.stateNode=k):g.memoizedState=rL(g.type,f.memoizedProps,g.pendingProps,f.memoizedState),null;case 27:return Ue(g),f===null&&ei&&(k=g.stateNode=eL(g.type,g.pendingProps,Me.current),La=g,Ec=!0,j=Zi,gf(g.type)?(yR=j,Zi=Vl(k.firstChild)):Zi=j),sa(f,g,g.pendingProps.children,w),u_(f,g),f===null&&(g.flags|=4194304),g.child;case 5:return f===null&&ei&&((j=k=Zi)&&(k=Vde(k,g.type,g.pendingProps,Ec),k!==null?(g.stateNode=k,La=g,Zi=Vl(k.firstChild),Ec=!1,j=!0):j=!1),j||Uh(g)),Ue(g),j=g.type,q=g.pendingProps,ue=f!==null?f.memoizedProps:null,k=q.children,hR(j,q)?k=null:ue!==null&&hR(j,ue)&&(g.flags|=32),g.memoizedState!==null&&(j=fA(f,g,lde,null,null,w),Bb._currentValue=j),u_(f,g),sa(f,g,k,w),g.child;case 6:return f===null&&ei&&((f=w=Zi)&&(w=Hde(w,g.pendingProps,Ec),w!==null?(g.stateNode=w,La=g,Zi=null,f=!0):f=!1),f||Uh(g)),null;case 13:return ZF(f,g,w);case 4:return Ne(g,g.stateNode.containerInfo),k=g.pendingProps,f===null?g.child=Jm(g,null,k,w):sa(f,g,k,w),g.child;case 11:return UF(f,g,g.type,g.pendingProps,w);case 7:return sa(f,g,g.pendingProps,w),g.child;case 8:return sa(f,g,g.pendingProps.children,w),g.child;case 12:return sa(f,g,g.pendingProps.children,w),g.child;case 10:return k=g.pendingProps,ef(g,g.type,k.value),sa(f,g,k.children,w),g.child;case 9:return j=g.type._context,k=g.pendingProps.children,Vh(g),j=va(j),k=k(j),g.flags|=1,sa(f,g,k,w),g.child;case 14:return qF(f,g,g.type,g.pendingProps,w);case 15:return VF(f,g,g.type,g.pendingProps,w);case 19:return JF(f,g,w);case 31:return k=g.pendingProps,w=g.mode,k={mode:k.mode,children:k.children},f===null?(w=d_(k,w),w.ref=g.ref,g.child=w,w.return=g,g=w):(w=Pu(f.child,k),w.ref=g.ref,g.child=w,w.return=g,g=w),g;case 22:return HF(f,g,w);case 24:return Vh(g),k=va(Es),f===null?(j=rA(),j===null&&(j=Ri,q=tA(),j.pooledCache=q,q.refCount++,q!==null&&(j.pooledCacheLanes|=w),j=q),g.memoizedState={parent:k,cache:j},sA(g),ef(g,Es,j)):((f.lanes&w)!==0&&(aA(f,g),yb(g,null,null,w),gb()),j=f.memoizedState,q=g.memoizedState,j.parent!==k?(j={parent:k,cache:k},g.memoizedState=j,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=j),ef(g,Es,k)):(k=q.cache,ef(g,Es,k),k!==j.cache&&eA(g,[Es],w,!0))),sa(f,g,g.pendingProps.children,w),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function Uu(f){f.flags|=4}function e8(f,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!lL(g)){if(g=ol.current,g!==null&&((Ur&4194048)===Ur?Tc!==null:(Ur&62914560)!==Ur&&(Ur&536870912)===0||g!==Tc))throw pb=iA,F5;f.flags|=8192}}function f_(f,g){g!==null&&(f.flags|=4),f.flags&16384&&(g=f.tag!==22?z():536870912,f.lanes|=g,ng|=g)}function Cb(f,g){if(!ei)switch(f.tailMode){case"hidden":g=f.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?f.tail=null:w.sibling=null;break;case"collapsed":w=f.tail;for(var k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?g||f.tail===null?f.tail=null:f.tail.sibling=null:k.sibling=null}}function Vi(f){var g=f.alternate!==null&&f.alternate.child===f.child,w=0,k=0;if(g)for(var j=f.child;j!==null;)w|=j.lanes|j.childLanes,k|=j.subtreeFlags&65011712,k|=j.flags&65011712,j.return=f,j=j.sibling;else for(j=f.child;j!==null;)w|=j.lanes|j.childLanes,k|=j.subtreeFlags,k|=j.flags,j.return=f,j=j.sibling;return f.subtreeFlags|=k,f.childLanes=w,g}function yde(f,g,w){var k=g.pendingProps;switch(ZT(g),g.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(g),null;case 1:return Vi(g),null;case 3:return w=g.stateNode,k=null,f!==null&&(k=f.memoizedState.cache),g.memoizedState.cache!==k&&(g.flags|=2048),Lu(Es),Ce(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(f===null||f.child===null)&&(ob(g)?Uu(g):f===null||f.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,M5())),Vi(g),null;case 26:return w=g.memoizedState,f===null?(Uu(g),w!==null?(Vi(g),e8(g,w)):(Vi(g),g.flags&=-16777217)):w?w!==f.memoizedState?(Uu(g),Vi(g),e8(g,w)):(Vi(g),g.flags&=-16777217):(f.memoizedProps!==k&&Uu(g),Vi(g),g.flags&=-16777217),null;case 27:et(g),w=Me.current;var j=g.type;if(f!==null&&g.stateNode!=null)f.memoizedProps!==k&&Uu(g);else{if(!k){if(g.stateNode===null)throw Error(r(166));return Vi(g),null}f=he.current,ob(g)?I5(g):(f=eL(j,k,w),g.stateNode=f,Uu(g))}return Vi(g),null;case 5:if(et(g),w=g.type,f!==null&&g.stateNode!=null)f.memoizedProps!==k&&Uu(g);else{if(!k){if(g.stateNode===null)throw Error(r(166));return Vi(g),null}if(f=he.current,ob(g))I5(g);else{switch(j=k_(Me.current),f){case 1:f=j.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:f=j.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":f=j.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":f=j.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":f=j.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof k.is=="string"?j.createElement("select",{is:k.is}):j.createElement("select"),k.multiple?f.multiple=!0:k.size&&(f.size=k.size);break;default:f=typeof k.is=="string"?j.createElement(w,{is:k.is}):j.createElement(w)}}f[ye]=g,f[Pe]=k;e:for(j=g.child;j!==null;){if(j.tag===5||j.tag===6)f.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===g)break e;for(;j.sibling===null;){if(j.return===null||j.return===g)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}g.stateNode=f;e:switch(oa(f,w,k),w){case"button":case"input":case"select":case"textarea":f=!!k.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Uu(g)}}return Vi(g),g.flags&=-16777217,null;case 6:if(f&&g.stateNode!=null)f.memoizedProps!==k&&Uu(g);else{if(typeof k!="string"&&g.stateNode===null)throw Error(r(166));if(f=Me.current,ob(g)){if(f=g.stateNode,w=g.memoizedProps,k=null,j=La,j!==null)switch(j.tag){case 27:case 5:k=j.memoizedProps}f[ye]=g,f=!!(f.nodeValue===w||k!==null&&k.suppressHydrationWarning===!0||G8(f.nodeValue,w)),f||Uh(g)}else f=k_(f).createTextNode(k),f[ye]=g,g.stateNode=f}return Vi(g),null;case 13:if(k=g.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(j=ob(g),k!==null&&k.dehydrated!==null){if(f===null){if(!j)throw Error(r(318));if(j=g.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(r(317));j[ye]=g}else lb(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Vi(g),j=!1}else j=M5(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=j),j=!0;if(!j)return g.flags&256?($u(g),g):($u(g),null)}if($u(g),(g.flags&128)!==0)return g.lanes=w,g;if(w=k!==null,f=f!==null&&f.memoizedState!==null,w){k=g.child,j=null,k.alternate!==null&&k.alternate.memoizedState!==null&&k.alternate.memoizedState.cachePool!==null&&(j=k.alternate.memoizedState.cachePool.pool);var q=null;k.memoizedState!==null&&k.memoizedState.cachePool!==null&&(q=k.memoizedState.cachePool.pool),q!==j&&(k.flags|=2048)}return w!==f&&w&&(g.child.flags|=8192),f_(g,g.updateQueue),Vi(g),null;case 4:return Ce(),f===null&&lR(g.stateNode.containerInfo),Vi(g),null;case 10:return Lu(g.type),Vi(g),null;case 19:if(ee(Ts),j=g.memoizedState,j===null)return Vi(g),null;if(k=(g.flags&128)!==0,q=j.rendering,q===null)if(k)Cb(j,!1);else{if(Xi!==0||f!==null&&(f.flags&128)!==0)for(f=g.child;f!==null;){if(q=o_(f),q!==null){for(g.flags|=128,Cb(j,!1),f=q.updateQueue,g.updateQueue=f,f_(g,f),g.subtreeFlags=0,f=w,w=g.child;w!==null;)A5(w,f),w=w.sibling;return se(Ts,Ts.current&1|2),g.child}f=f.sibling}j.tail!==null&&le()>m_&&(g.flags|=128,k=!0,Cb(j,!1),g.lanes=4194304)}else{if(!k)if(f=o_(q),f!==null){if(g.flags|=128,k=!0,f=f.updateQueue,g.updateQueue=f,f_(g,f),Cb(j,!0),j.tail===null&&j.tailMode==="hidden"&&!q.alternate&&!ei)return Vi(g),null}else 2*le()-j.renderingStartTime>m_&&w!==536870912&&(g.flags|=128,k=!0,Cb(j,!1),g.lanes=4194304);j.isBackwards?(q.sibling=g.child,g.child=q):(f=j.last,f!==null?f.sibling=q:g.child=q,j.last=q)}return j.tail!==null?(g=j.tail,j.rendering=g,j.tail=g.sibling,j.renderingStartTime=le(),g.sibling=null,f=Ts.current,se(Ts,k?f&1|2:f&1),g):(Vi(g),null);case 22:case 23:return $u(g),uA(),k=g.memoizedState!==null,f!==null?f.memoizedState!==null!==k&&(g.flags|=8192):k&&(g.flags|=8192),k?(w&536870912)!==0&&(g.flags&128)===0&&(Vi(g),g.subtreeFlags&6&&(g.flags|=8192)):Vi(g),w=g.updateQueue,w!==null&&f_(g,w.retryQueue),w=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),k=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(k=g.memoizedState.cachePool.pool),k!==w&&(g.flags|=2048),f!==null&&ee(Hh),null;case 24:return w=null,f!==null&&(w=f.memoizedState.cache),g.memoizedState.cache!==w&&(g.flags|=2048),Lu(Es),Vi(g),null;case 25:return null;case 30:return null}throw Error(r(156,g.tag))}function bde(f,g){switch(ZT(g),g.tag){case 1:return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 3:return Lu(Es),Ce(),f=g.flags,(f&65536)!==0&&(f&128)===0?(g.flags=f&-65537|128,g):null;case 26:case 27:case 5:return et(g),null;case 13:if($u(g),f=g.memoizedState,f!==null&&f.dehydrated!==null){if(g.alternate===null)throw Error(r(340));lb()}return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 19:return ee(Ts),null;case 4:return Ce(),null;case 10:return Lu(g.type),null;case 22:case 23:return $u(g),uA(),f!==null&&ee(Hh),f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 24:return Lu(Es),null;case 25:return null;default:return null}}function t8(f,g){switch(ZT(g),g.tag){case 3:Lu(Es),Ce();break;case 26:case 27:case 5:et(g);break;case 4:Ce();break;case 13:$u(g);break;case 19:ee(Ts);break;case 10:Lu(g.type);break;case 22:case 23:$u(g),uA(),f!==null&&ee(Hh);break;case 24:Lu(Es)}}function kb(f,g){try{var w=g.updateQueue,k=w!==null?w.lastEffect:null;if(k!==null){var j=k.next;w=j;do{if((w.tag&f)===f){k=void 0;var q=w.create,ue=w.inst;k=q(),ue.destroy=k}w=w.next}while(w!==j)}}catch(Te){Ci(g,g.return,Te)}}function lf(f,g,w){try{var k=g.updateQueue,j=k!==null?k.lastEffect:null;if(j!==null){var q=j.next;k=q;do{if((k.tag&f)===f){var ue=k.inst,Te=ue.destroy;if(Te!==void 0){ue.destroy=void 0,j=g;var Ge=w,vt=Te;try{vt()}catch(jt){Ci(j,Ge,jt)}}}k=k.next}while(k!==q)}}catch(jt){Ci(g,g.return,jt)}}function n8(f){var g=f.updateQueue;if(g!==null){var w=f.stateNode;try{q5(g,w)}catch(k){Ci(f,f.return,k)}}}function r8(f,g,w){w.props=Gh(f.type,f.memoizedProps),w.state=f.memoizedState;try{w.componentWillUnmount()}catch(k){Ci(f,g,k)}}function Eb(f,g){try{var w=f.ref;if(w!==null){switch(f.tag){case 26:case 27:case 5:var k=f.stateNode;break;case 30:k=f.stateNode;break;default:k=f.stateNode}typeof w=="function"?f.refCleanup=w(k):w.current=k}}catch(j){Ci(f,g,j)}}function Ac(f,g){var w=f.ref,k=f.refCleanup;if(w!==null)if(typeof k=="function")try{k()}catch(j){Ci(f,g,j)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(j){Ci(f,g,j)}else w.current=null}function i8(f){var g=f.type,w=f.memoizedProps,k=f.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":w.autoFocus&&k.focus();break e;case"img":w.src?k.src=w.src:w.srcSet&&(k.srcset=w.srcSet)}}catch(j){Ci(f,f.return,j)}}function LA(f,g,w){try{var k=f.stateNode;Bde(k,f.type,w,g),k[Pe]=g}catch(j){Ci(f,f.return,j)}}function s8(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&gf(f.type)||f.tag===4}function BA(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||s8(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&gf(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function $A(f,g,w){var k=f.tag;if(k===5||k===6)f=f.stateNode,g?(w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w).insertBefore(f,g):(g=w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w,g.appendChild(f),w=w._reactRootContainer,w!=null||g.onclick!==null||(g.onclick=C_));else if(k!==4&&(k===27&&gf(f.type)&&(w=f.stateNode,g=null),f=f.child,f!==null))for($A(f,g,w),f=f.sibling;f!==null;)$A(f,g,w),f=f.sibling}function h_(f,g,w){var k=f.tag;if(k===5||k===6)f=f.stateNode,g?w.insertBefore(f,g):w.appendChild(f);else if(k!==4&&(k===27&&gf(f.type)&&(w=f.stateNode),f=f.child,f!==null))for(h_(f,g,w),f=f.sibling;f!==null;)h_(f,g,w),f=f.sibling}function a8(f){var g=f.stateNode,w=f.memoizedProps;try{for(var k=f.type,j=g.attributes;j.length;)g.removeAttributeNode(j[0]);oa(g,k,w),g[ye]=f,g[Pe]=w}catch(q){Ci(f,f.return,q)}}var qu=!1,is=!1,zA=!1,o8=typeof WeakSet=="function"?WeakSet:Set,zs=null;function vde(f,g){if(f=f.containerInfo,dR=N_,f=fe(f),Se(f)){if("selectionStart"in f)var w={start:f.selectionStart,end:f.selectionEnd};else e:{w=(w=f.ownerDocument)&&w.defaultView||window;var k=w.getSelection&&w.getSelection();if(k&&k.rangeCount!==0){w=k.anchorNode;var j=k.anchorOffset,q=k.focusNode;k=k.focusOffset;try{w.nodeType,q.nodeType}catch{w=null;break e}var ue=0,Te=-1,Ge=-1,vt=0,jt=0,Ft=f,_t=null;t:for(;;){for(var Ct;Ft!==w||j!==0&&Ft.nodeType!==3||(Te=ue+j),Ft!==q||k!==0&&Ft.nodeType!==3||(Ge=ue+k),Ft.nodeType===3&&(ue+=Ft.nodeValue.length),(Ct=Ft.firstChild)!==null;)_t=Ft,Ft=Ct;for(;;){if(Ft===f)break t;if(_t===w&&++vt===j&&(Te=ue),_t===q&&++jt===k&&(Ge=ue),(Ct=Ft.nextSibling)!==null)break;Ft=_t,_t=Ft.parentNode}Ft=Ct}w=Te===-1||Ge===-1?null:{start:Te,end:Ge}}else w=null}w=w||{start:0,end:0}}else w=null;for(fR={focusedElem:f,selectionRange:w},N_=!1,zs=g;zs!==null;)if(g=zs,f=g.child,(g.subtreeFlags&1024)!==0&&f!==null)f.return=g,zs=f;else for(;zs!==null;){switch(g=zs,q=g.alternate,f=g.flags,g.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&q!==null){f=void 0,w=g,j=q.memoizedProps,q=q.memoizedState,k=w.stateNode;try{var Qn=Gh(w.type,j,w.elementType===w.type);f=k.getSnapshotBeforeUpdate(Qn,q),k.__reactInternalSnapshotBeforeUpdate=f}catch(Un){Ci(w,w.return,Un)}}break;case 3:if((f&1024)!==0){if(f=g.stateNode.containerInfo,w=f.nodeType,w===9)mR(f);else if(w===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":mR(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=g.sibling,f!==null){f.return=g.return,zs=f;break}zs=g.return}}function l8(f,g,w){var k=w.flags;switch(w.tag){case 0:case 11:case 15:cf(f,w),k&4&&kb(5,w);break;case 1:if(cf(f,w),k&4)if(f=w.stateNode,g===null)try{f.componentDidMount()}catch(ue){Ci(w,w.return,ue)}else{var j=Gh(w.type,g.memoizedProps);g=g.memoizedState;try{f.componentDidUpdate(j,g,f.__reactInternalSnapshotBeforeUpdate)}catch(ue){Ci(w,w.return,ue)}}k&64&&n8(w),k&512&&Eb(w,w.return);break;case 3:if(cf(f,w),k&64&&(f=w.updateQueue,f!==null)){if(g=null,w.child!==null)switch(w.child.tag){case 27:case 5:g=w.child.stateNode;break;case 1:g=w.child.stateNode}try{q5(f,g)}catch(ue){Ci(w,w.return,ue)}}break;case 27:g===null&&k&4&&a8(w);case 26:case 5:cf(f,w),g===null&&k&4&&i8(w),k&512&&Eb(w,w.return);break;case 12:cf(f,w);break;case 13:cf(f,w),k&4&&d8(f,w),k&64&&(f=w.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(w=Ade.bind(null,w),Wde(f,w))));break;case 22:if(k=w.memoizedState!==null||qu,!k){g=g!==null&&g.memoizedState!==null||is,j=qu;var q=is;qu=k,(is=g)&&!q?uf(f,w,(w.subtreeFlags&8772)!==0):cf(f,w),qu=j,is=q}break;case 30:break;default:cf(f,w)}}function c8(f){var g=f.alternate;g!==null&&(f.alternate=null,c8(g)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(g=f.stateNode,g!==null&&cn(g)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Bi=null,so=!1;function Vu(f,g,w){for(w=w.child;w!==null;)u8(f,g,w),w=w.sibling}function u8(f,g,w){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Ot,w)}catch{}switch(w.tag){case 26:is||Ac(w,g),Vu(f,g,w),w.memoizedState?w.memoizedState.count--:w.stateNode&&(w=w.stateNode,w.parentNode.removeChild(w));break;case 27:is||Ac(w,g);var k=Bi,j=so;gf(w.type)&&(Bi=w.stateNode,so=!1),Vu(f,g,w),Ob(w.stateNode),Bi=k,so=j;break;case 5:is||Ac(w,g);case 6:if(k=Bi,j=so,Bi=null,Vu(f,g,w),Bi=k,so=j,Bi!==null)if(so)try{(Bi.nodeType===9?Bi.body:Bi.nodeName==="HTML"?Bi.ownerDocument.body:Bi).removeChild(w.stateNode)}catch(q){Ci(w,g,q)}else try{Bi.removeChild(w.stateNode)}catch(q){Ci(w,g,q)}break;case 18:Bi!==null&&(so?(f=Bi,J8(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,w.stateNode),qb(f)):J8(Bi,w.stateNode));break;case 4:k=Bi,j=so,Bi=w.stateNode.containerInfo,so=!0,Vu(f,g,w),Bi=k,so=j;break;case 0:case 11:case 14:case 15:is||lf(2,w,g),is||lf(4,w,g),Vu(f,g,w);break;case 1:is||(Ac(w,g),k=w.stateNode,typeof k.componentWillUnmount=="function"&&r8(w,g,k)),Vu(f,g,w);break;case 21:Vu(f,g,w);break;case 22:is=(k=is)||w.memoizedState!==null,Vu(f,g,w),is=k;break;default:Vu(f,g,w)}}function d8(f,g){if(g.memoizedState===null&&(f=g.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{qb(f)}catch(w){Ci(g,g.return,w)}}function xde(f){switch(f.tag){case 13:case 19:var g=f.stateNode;return g===null&&(g=f.stateNode=new o8),g;case 22:return f=f.stateNode,g=f._retryCache,g===null&&(g=f._retryCache=new o8),g;default:throw Error(r(435,f.tag))}}function UA(f,g){var w=xde(f);g.forEach(function(k){var j=Rde.bind(null,f,k);w.has(k)||(w.add(k),k.then(j,j))})}function Mo(f,g){var w=g.deletions;if(w!==null)for(var k=0;k<w.length;k++){var j=w[k],q=f,ue=g,Te=ue;e:for(;Te!==null;){switch(Te.tag){case 27:if(gf(Te.type)){Bi=Te.stateNode,so=!1;break e}break;case 5:Bi=Te.stateNode,so=!1;break e;case 3:case 4:Bi=Te.stateNode.containerInfo,so=!0;break e}Te=Te.return}if(Bi===null)throw Error(r(160));u8(q,ue,j),Bi=null,so=!1,q=j.alternate,q!==null&&(q.return=null),j.return=null}if(g.subtreeFlags&13878)for(g=g.child;g!==null;)f8(g,f),g=g.sibling}var ql=null;function f8(f,g){var w=f.alternate,k=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Mo(g,f),jo(f),k&4&&(lf(3,f,f.return),kb(3,f),lf(5,f,f.return));break;case 1:Mo(g,f),jo(f),k&512&&(is||w===null||Ac(w,w.return)),k&64&&qu&&(f=f.updateQueue,f!==null&&(k=f.callbacks,k!==null&&(w=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=w===null?k:w.concat(k))));break;case 26:var j=ql;if(Mo(g,f),jo(f),k&512&&(is||w===null||Ac(w,w.return)),k&4){var q=w!==null?w.memoizedState:null;if(k=f.memoizedState,w===null)if(k===null)if(f.stateNode===null){e:{k=f.type,w=f.memoizedProps,j=j.ownerDocument||j;t:switch(k){case"title":q=j.getElementsByTagName("title")[0],(!q||q[tn]||q[ye]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=j.createElement(k),j.head.insertBefore(q,j.querySelector("head > title"))),oa(q,k,w),q[ye]=f,br(q),k=q;break e;case"link":var ue=aL("link","href",j).get(k+(w.href||""));if(ue){for(var Te=0;Te<ue.length;Te++)if(q=ue[Te],q.getAttribute("href")===(w.href==null||w.href===""?null:w.href)&&q.getAttribute("rel")===(w.rel==null?null:w.rel)&&q.getAttribute("title")===(w.title==null?null:w.title)&&q.getAttribute("crossorigin")===(w.crossOrigin==null?null:w.crossOrigin)){ue.splice(Te,1);break t}}q=j.createElement(k),oa(q,k,w),j.head.appendChild(q);break;case"meta":if(ue=aL("meta","content",j).get(k+(w.content||""))){for(Te=0;Te<ue.length;Te++)if(q=ue[Te],q.getAttribute("content")===(w.content==null?null:""+w.content)&&q.getAttribute("name")===(w.name==null?null:w.name)&&q.getAttribute("property")===(w.property==null?null:w.property)&&q.getAttribute("http-equiv")===(w.httpEquiv==null?null:w.httpEquiv)&&q.getAttribute("charset")===(w.charSet==null?null:w.charSet)){ue.splice(Te,1);break t}}q=j.createElement(k),oa(q,k,w),j.head.appendChild(q);break;default:throw Error(r(468,k))}q[ye]=f,br(q),k=q}f.stateNode=k}else oL(j,f.type,f.stateNode);else f.stateNode=sL(j,k,f.memoizedProps);else q!==k?(q===null?w.stateNode!==null&&(w=w.stateNode,w.parentNode.removeChild(w)):q.count--,k===null?oL(j,f.type,f.stateNode):sL(j,k,f.memoizedProps)):k===null&&f.stateNode!==null&&LA(f,f.memoizedProps,w.memoizedProps)}break;case 27:Mo(g,f),jo(f),k&512&&(is||w===null||Ac(w,w.return)),w!==null&&k&4&&LA(f,f.memoizedProps,w.memoizedProps);break;case 5:if(Mo(g,f),jo(f),k&512&&(is||w===null||Ac(w,w.return)),f.flags&32){j=f.stateNode;try{Vd(j,"")}catch(Ct){Ci(f,f.return,Ct)}}k&4&&f.stateNode!=null&&(j=f.memoizedProps,LA(f,j,w!==null?w.memoizedProps:j)),k&1024&&(zA=!0);break;case 6:if(Mo(g,f),jo(f),k&4){if(f.stateNode===null)throw Error(r(162));k=f.memoizedProps,w=f.stateNode;try{w.nodeValue=k}catch(Ct){Ci(f,f.return,Ct)}}break;case 3:if(A_=null,j=ql,ql=E_(g.containerInfo),Mo(g,f),ql=j,jo(f),k&4&&w!==null&&w.memoizedState.isDehydrated)try{qb(g.containerInfo)}catch(Ct){Ci(f,f.return,Ct)}zA&&(zA=!1,h8(f));break;case 4:k=ql,ql=E_(f.stateNode.containerInfo),Mo(g,f),jo(f),ql=k;break;case 12:Mo(g,f),jo(f);break;case 13:Mo(g,f),jo(f),f.child.flags&8192&&f.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(KA=le()),k&4&&(k=f.updateQueue,k!==null&&(f.updateQueue=null,UA(f,k)));break;case 22:j=f.memoizedState!==null;var Ge=w!==null&&w.memoizedState!==null,vt=qu,jt=is;if(qu=vt||j,is=jt||Ge,Mo(g,f),is=jt,qu=vt,jo(f),k&8192)e:for(g=f.stateNode,g._visibility=j?g._visibility&-2:g._visibility|1,j&&(w===null||Ge||qu||is||Kh(f)),w=null,g=f;;){if(g.tag===5||g.tag===26){if(w===null){Ge=w=g;try{if(q=Ge.stateNode,j)ue=q.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{Te=Ge.stateNode;var Ft=Ge.memoizedProps.style,_t=Ft!=null&&Ft.hasOwnProperty("display")?Ft.display:null;Te.style.display=_t==null||typeof _t=="boolean"?"":(""+_t).trim()}}catch(Ct){Ci(Ge,Ge.return,Ct)}}}else if(g.tag===6){if(w===null){Ge=g;try{Ge.stateNode.nodeValue=j?"":Ge.memoizedProps}catch(Ct){Ci(Ge,Ge.return,Ct)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===f)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break e;for(;g.sibling===null;){if(g.return===null||g.return===f)break e;w===g&&(w=null),g=g.return}w===g&&(w=null),g.sibling.return=g.return,g=g.sibling}k&4&&(k=f.updateQueue,k!==null&&(w=k.retryQueue,w!==null&&(k.retryQueue=null,UA(f,w))));break;case 19:Mo(g,f),jo(f),k&4&&(k=f.updateQueue,k!==null&&(f.updateQueue=null,UA(f,k)));break;case 30:break;case 21:break;default:Mo(g,f),jo(f)}}function jo(f){var g=f.flags;if(g&2){try{for(var w,k=f.return;k!==null;){if(s8(k)){w=k;break}k=k.return}if(w==null)throw Error(r(160));switch(w.tag){case 27:var j=w.stateNode,q=BA(f);h_(f,q,j);break;case 5:var ue=w.stateNode;w.flags&32&&(Vd(ue,""),w.flags&=-33);var Te=BA(f);h_(f,Te,ue);break;case 3:case 4:var Ge=w.stateNode.containerInfo,vt=BA(f);$A(f,vt,Ge);break;default:throw Error(r(161))}}catch(jt){Ci(f,f.return,jt)}f.flags&=-3}g&4096&&(f.flags&=-4097)}function h8(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var g=f;h8(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),f=f.sibling}}function cf(f,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)l8(f,g.alternate,g),g=g.sibling}function Kh(f){for(f=f.child;f!==null;){var g=f;switch(g.tag){case 0:case 11:case 14:case 15:lf(4,g,g.return),Kh(g);break;case 1:Ac(g,g.return);var w=g.stateNode;typeof w.componentWillUnmount=="function"&&r8(g,g.return,w),Kh(g);break;case 27:Ob(g.stateNode);case 26:case 5:Ac(g,g.return),Kh(g);break;case 22:g.memoizedState===null&&Kh(g);break;case 30:Kh(g);break;default:Kh(g)}f=f.sibling}}function uf(f,g,w){for(w=w&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var k=g.alternate,j=f,q=g,ue=q.flags;switch(q.tag){case 0:case 11:case 15:uf(j,q,w),kb(4,q);break;case 1:if(uf(j,q,w),k=q,j=k.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(vt){Ci(k,k.return,vt)}if(k=q,j=k.updateQueue,j!==null){var Te=k.stateNode;try{var Ge=j.shared.hiddenCallbacks;if(Ge!==null)for(j.shared.hiddenCallbacks=null,j=0;j<Ge.length;j++)U5(Ge[j],Te)}catch(vt){Ci(k,k.return,vt)}}w&&ue&64&&n8(q),Eb(q,q.return);break;case 27:a8(q);case 26:case 5:uf(j,q,w),w&&k===null&&ue&4&&i8(q),Eb(q,q.return);break;case 12:uf(j,q,w);break;case 13:uf(j,q,w),w&&ue&4&&d8(j,q);break;case 22:q.memoizedState===null&&uf(j,q,w),Eb(q,q.return);break;case 30:break;default:uf(j,q,w)}g=g.sibling}}function qA(f,g){var w=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),f=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(f=g.memoizedState.cachePool.pool),f!==w&&(f!=null&&f.refCount++,w!=null&&db(w))}function VA(f,g){f=null,g.alternate!==null&&(f=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==f&&(g.refCount++,f!=null&&db(f))}function Rc(f,g,w,k){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)p8(f,g,w,k),g=g.sibling}function p8(f,g,w,k){var j=g.flags;switch(g.tag){case 0:case 11:case 15:Rc(f,g,w,k),j&2048&&kb(9,g);break;case 1:Rc(f,g,w,k);break;case 3:Rc(f,g,w,k),j&2048&&(f=null,g.alternate!==null&&(f=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==f&&(g.refCount++,f!=null&&db(f)));break;case 12:if(j&2048){Rc(f,g,w,k),f=g.stateNode;try{var q=g.memoizedProps,ue=q.id,Te=q.onPostCommit;typeof Te=="function"&&Te(ue,g.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Ge){Ci(g,g.return,Ge)}}else Rc(f,g,w,k);break;case 13:Rc(f,g,w,k);break;case 23:break;case 22:q=g.stateNode,ue=g.alternate,g.memoizedState!==null?q._visibility&2?Rc(f,g,w,k):Tb(f,g):q._visibility&2?Rc(f,g,w,k):(q._visibility|=2,Qm(f,g,w,k,(g.subtreeFlags&10256)!==0)),j&2048&&qA(ue,g);break;case 24:Rc(f,g,w,k),j&2048&&VA(g.alternate,g);break;default:Rc(f,g,w,k)}}function Qm(f,g,w,k,j){for(j=j&&(g.subtreeFlags&10256)!==0,g=g.child;g!==null;){var q=f,ue=g,Te=w,Ge=k,vt=ue.flags;switch(ue.tag){case 0:case 11:case 15:Qm(q,ue,Te,Ge,j),kb(8,ue);break;case 23:break;case 22:var jt=ue.stateNode;ue.memoizedState!==null?jt._visibility&2?Qm(q,ue,Te,Ge,j):Tb(q,ue):(jt._visibility|=2,Qm(q,ue,Te,Ge,j)),j&&vt&2048&&qA(ue.alternate,ue);break;case 24:Qm(q,ue,Te,Ge,j),j&&vt&2048&&VA(ue.alternate,ue);break;default:Qm(q,ue,Te,Ge,j)}g=g.sibling}}function Tb(f,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var w=f,k=g,j=k.flags;switch(k.tag){case 22:Tb(w,k),j&2048&&qA(k.alternate,k);break;case 24:Tb(w,k),j&2048&&VA(k.alternate,k);break;default:Tb(w,k)}g=g.sibling}}var Ab=8192;function eg(f){if(f.subtreeFlags&Ab)for(f=f.child;f!==null;)m8(f),f=f.sibling}function m8(f){switch(f.tag){case 26:eg(f),f.flags&Ab&&f.memoizedState!==null&&sfe(ql,f.memoizedState,f.memoizedProps);break;case 5:eg(f);break;case 3:case 4:var g=ql;ql=E_(f.stateNode.containerInfo),eg(f),ql=g;break;case 22:f.memoizedState===null&&(g=f.alternate,g!==null&&g.memoizedState!==null?(g=Ab,Ab=16777216,eg(f),Ab=g):eg(f));break;default:eg(f)}}function g8(f){var g=f.alternate;if(g!==null&&(f=g.child,f!==null)){g.child=null;do g=f.sibling,f.sibling=null,f=g;while(f!==null)}}function Rb(f){var g=f.deletions;if((f.flags&16)!==0){if(g!==null)for(var w=0;w<g.length;w++){var k=g[w];zs=k,b8(k,f)}g8(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)y8(f),f=f.sibling}function y8(f){switch(f.tag){case 0:case 11:case 15:Rb(f),f.flags&2048&&lf(9,f,f.return);break;case 3:Rb(f);break;case 12:Rb(f);break;case 22:var g=f.stateNode;f.memoizedState!==null&&g._visibility&2&&(f.return===null||f.return.tag!==13)?(g._visibility&=-3,p_(f)):Rb(f);break;default:Rb(f)}}function p_(f){var g=f.deletions;if((f.flags&16)!==0){if(g!==null)for(var w=0;w<g.length;w++){var k=g[w];zs=k,b8(k,f)}g8(f)}for(f=f.child;f!==null;){switch(g=f,g.tag){case 0:case 11:case 15:lf(8,g,g.return),p_(g);break;case 22:w=g.stateNode,w._visibility&2&&(w._visibility&=-3,p_(g));break;default:p_(g)}f=f.sibling}}function b8(f,g){for(;zs!==null;){var w=zs;switch(w.tag){case 0:case 11:case 15:lf(8,w,g);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var k=w.memoizedState.cachePool.pool;k!=null&&k.refCount++}break;case 24:db(w.memoizedState.cache)}if(k=w.child,k!==null)k.return=w,zs=k;else e:for(w=f;zs!==null;){k=zs;var j=k.sibling,q=k.return;if(c8(k),k===w){zs=null;break e}if(j!==null){j.return=q,zs=j;break e}zs=q}}}var wde={getCacheForType:function(f){var g=va(Es),w=g.data.get(f);return w===void 0&&(w=f(),g.data.set(f,w)),w}},_de=typeof WeakMap=="function"?WeakMap:Map,ui=0,Ri=null,jr=null,Ur=0,di=0,Po=null,df=!1,tg=!1,HA=!1,Hu=0,Xi=0,ff=0,Yh=0,WA=0,ll=0,ng=0,Ib=null,ao=null,GA=!1,KA=0,m_=1/0,g_=null,hf=null,aa=0,pf=null,rg=null,ig=0,YA=0,ZA=null,v8=null,Nb=0,XA=null;function Oo(){if((ui&2)!==0&&Ur!==0)return Ur&-Ur;if(U.T!==null){var f=Hm;return f!==0?f:iR()}return Y()}function x8(){ll===0&&(ll=(Ur&536870912)===0||ei?St():536870912);var f=ol.current;return f!==null&&(f.flags|=32),ll}function Do(f,g,w){(f===Ri&&(di===2||di===9)||f.cancelPendingCommit!==null)&&(sg(f,0),mf(f,Ur,ll,!1)),it(f,w),((ui&2)===0||f!==Ri)&&(f===Ri&&((ui&2)===0&&(Yh|=w),Xi===4&&mf(f,Ur,ll,!1)),Ic(f))}function w8(f,g,w){if((ui&6)!==0)throw Error(r(327));var k=!w&&(g&124)===0&&(g&f.expiredLanes)===0||de(f,g),j=k?kde(f,g):eR(f,g,!0),q=k;do{if(j===0){tg&&!k&&mf(f,g,0,!1);break}else{if(w=f.current.alternate,q&&!Sde(w)){j=eR(f,g,!1),q=!1;continue}if(j===2){if(q=g,f.errorRecoveryDisabledLanes&q)var ue=0;else ue=f.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){g=ue;e:{var Te=f;j=Ib;var Ge=Te.current.memoizedState.isDehydrated;if(Ge&&(sg(Te,ue).flags|=256),ue=eR(Te,ue,!1),ue!==2){if(HA&&!Ge){Te.errorRecoveryDisabledLanes|=q,Yh|=q,j=4;break e}q=ao,ao=j,q!==null&&(ao===null?ao=q:ao.push.apply(ao,q))}j=ue}if(q=!1,j!==2)continue}}if(j===1){sg(f,0),mf(f,g,0,!0);break}e:{switch(k=f,q=j,q){case 0:case 1:throw Error(r(345));case 4:if((g&4194048)!==g)break;case 6:mf(k,g,ll,!df);break e;case 2:ao=null;break;case 3:case 5:break;default:throw Error(r(329))}if((g&62914560)===g&&(j=KA+300-le(),10<j)){if(mf(k,g,ll,!df),Ie(k,0,!0)!==0)break e;k.timeoutHandle=Z8(_8.bind(null,k,w,ao,g_,GA,g,ll,Yh,ng,df,q,2,-0,0),j);break e}_8(k,w,ao,g_,GA,g,ll,Yh,ng,df,q,0,-0,0)}}break}while(!0);Ic(f)}function _8(f,g,w,k,j,q,ue,Te,Ge,vt,jt,Ft,_t,Ct){if(f.timeoutHandle=-1,Ft=g.subtreeFlags,(Ft&8192||(Ft&16785408)===16785408)&&(Lb={stylesheets:null,count:0,unsuspend:ife},m8(g),Ft=afe(),Ft!==null)){f.cancelPendingCommit=Ft(R8.bind(null,f,g,q,w,k,j,ue,Te,Ge,jt,1,_t,Ct)),mf(f,q,ue,!vt);return}R8(f,g,q,w,k,j,ue,Te,Ge)}function Sde(f){for(var g=f;;){var w=g.tag;if((w===0||w===11||w===15)&&g.flags&16384&&(w=g.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var k=0;k<w.length;k++){var j=w[k],q=j.getSnapshot;j=j.value;try{if(!ba(q(),j))return!1}catch{return!1}}if(w=g.child,g.subtreeFlags&16384&&w!==null)w.return=g,g=w;else{if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function mf(f,g,w,k){g&=~WA,g&=~Yh,f.suspendedLanes|=g,f.pingedLanes&=~g,k&&(f.warmLanes|=g),k=f.expirationTimes;for(var j=g;0<j;){var q=31-rn(j),ue=1<<q;k[q]=-1,j&=~ue}w!==0&&_e(f,w,g)}function y_(){return(ui&6)===0?(Mb(0),!1):!0}function JA(){if(jr!==null){if(di===0)var f=jr.return;else f=jr,Fu=qh=null,mA(f),Xm=null,_b=0,f=jr;for(;f!==null;)t8(f.alternate,f),f=f.return;jr=null}}function sg(f,g){var w=f.timeoutHandle;w!==-1&&(f.timeoutHandle=-1,zde(w)),w=f.cancelPendingCommit,w!==null&&(f.cancelPendingCommit=null,w()),JA(),Ri=f,jr=w=Pu(f.current,null),Ur=g,di=0,Po=null,df=!1,tg=de(f,g),HA=!1,ng=ll=WA=Yh=ff=Xi=0,ao=Ib=null,GA=!1,(g&8)!==0&&(g|=g&32);var k=f.entangledLanes;if(k!==0)for(f=f.entanglements,k&=g;0<k;){var j=31-rn(k),q=1<<j;g|=f[j],k&=~q}return Hu=g,Jn(),w}function S8(f,g){Tr=null,U.H=i_,g===hb||g===K1?(g=$5(),di=3):g===F5?(g=$5(),di=4):di=g===zF?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Po=g,jr===null&&(Xi=1,c_(f,On(g,f.current)))}function C8(){var f=U.H;return U.H=i_,f===null?i_:f}function k8(){var f=U.A;return U.A=wde,f}function QA(){Xi=4,df||(Ur&4194048)!==Ur&&ol.current!==null||(tg=!0),(ff&134217727)===0&&(Yh&134217727)===0||Ri===null||mf(Ri,Ur,ll,!1)}function eR(f,g,w){var k=ui;ui|=2;var j=C8(),q=k8();(Ri!==f||Ur!==g)&&(g_=null,sg(f,g)),g=!1;var ue=Xi;e:do try{if(di!==0&&jr!==null){var Te=jr,Ge=Po;switch(di){case 8:JA(),ue=6;break e;case 3:case 2:case 9:case 6:ol.current===null&&(g=!0);var vt=di;if(di=0,Po=null,ag(f,Te,Ge,vt),w&&tg){ue=0;break e}break;default:vt=di,di=0,Po=null,ag(f,Te,Ge,vt)}}Cde(),ue=Xi;break}catch(jt){S8(f,jt)}while(!0);return g&&f.shellSuspendCounter++,Fu=qh=null,ui=k,U.H=j,U.A=q,jr===null&&(Ri=null,Ur=0,Jn()),ue}function Cde(){for(;jr!==null;)E8(jr)}function kde(f,g){var w=ui;ui|=2;var k=C8(),j=k8();Ri!==f||Ur!==g?(g_=null,m_=le()+500,sg(f,g)):tg=de(f,g);e:do try{if(di!==0&&jr!==null){g=jr;var q=Po;t:switch(di){case 1:di=0,Po=null,ag(f,g,q,1);break;case 2:case 9:if(L5(q)){di=0,Po=null,T8(g);break}g=function(){di!==2&&di!==9||Ri!==f||(di=7),Ic(f)},q.then(g,g);break e;case 3:di=7;break e;case 4:di=5;break e;case 7:L5(q)?(di=0,Po=null,T8(g)):(di=0,Po=null,ag(f,g,q,7));break;case 5:var ue=null;switch(jr.tag){case 26:ue=jr.memoizedState;case 5:case 27:var Te=jr;if(!ue||lL(ue)){di=0,Po=null;var Ge=Te.sibling;if(Ge!==null)jr=Ge;else{var vt=Te.return;vt!==null?(jr=vt,b_(vt)):jr=null}break t}}di=0,Po=null,ag(f,g,q,5);break;case 6:di=0,Po=null,ag(f,g,q,6);break;case 8:JA(),Xi=6;break e;default:throw Error(r(462))}}Ede();break}catch(jt){S8(f,jt)}while(!0);return Fu=qh=null,U.H=k,U.A=j,ui=w,jr!==null?0:(Ri=null,Ur=0,Jn(),Xi)}function Ede(){for(;jr!==null&&!ge();)E8(jr)}function E8(f){var g=QF(f.alternate,f,Hu);f.memoizedProps=f.pendingProps,g===null?b_(f):jr=g}function T8(f){var g=f,w=g.alternate;switch(g.tag){case 15:case 0:g=GF(w,g,g.pendingProps,g.type,void 0,Ur);break;case 11:g=GF(w,g,g.pendingProps,g.type.render,g.ref,Ur);break;case 5:mA(g);default:t8(w,g),g=jr=A5(g,Hu),g=QF(w,g,Hu)}f.memoizedProps=f.pendingProps,g===null?b_(f):jr=g}function ag(f,g,w,k){Fu=qh=null,mA(g),Xm=null,_b=0;var j=g.return;try{if(mde(f,j,g,w,Ur)){Xi=1,c_(f,On(w,f.current)),jr=null;return}}catch(q){if(j!==null)throw jr=j,q;Xi=1,c_(f,On(w,f.current)),jr=null;return}g.flags&32768?(ei||k===1?f=!0:tg||(Ur&536870912)!==0?f=!1:(df=f=!0,(k===2||k===9||k===3||k===6)&&(k=ol.current,k!==null&&k.tag===13&&(k.flags|=16384))),A8(g,f)):b_(g)}function b_(f){var g=f;do{if((g.flags&32768)!==0){A8(g,df);return}f=g.return;var w=yde(g.alternate,g,Hu);if(w!==null){jr=w;return}if(g=g.sibling,g!==null){jr=g;return}jr=g=f}while(g!==null);Xi===0&&(Xi=5)}function A8(f,g){do{var w=bde(f.alternate,f);if(w!==null){w.flags&=32767,jr=w;return}if(w=f.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!g&&(f=f.sibling,f!==null)){jr=f;return}jr=f=w}while(f!==null);Xi=6,jr=null}function R8(f,g,w,k,j,q,ue,Te,Ge){f.cancelPendingCommit=null;do v_();while(aa!==0);if((ui&6)!==0)throw Error(r(327));if(g!==null){if(g===f.current)throw Error(r(177));if(q=g.lanes|g.childLanes,q|=ia,be(f,w,q,ue,Te,Ge),f===Ri&&(jr=Ri=null,Ur=0),rg=g,pf=f,ig=w,YA=q,ZA=j,v8=k,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,Ide(Be,function(){return P8(),null})):(f.callbackNode=null,f.callbackPriority=0),k=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||k){k=U.T,U.T=null,j=G.p,G.p=2,ue=ui,ui|=4;try{vde(f,g,w)}finally{ui=ue,G.p=j,U.T=k}}aa=1,I8(),N8(),M8()}}function I8(){if(aa===1){aa=0;var f=pf,g=rg,w=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||w){w=U.T,U.T=null;var k=G.p;G.p=2;var j=ui;ui|=4;try{f8(g,f);var q=fR,ue=fe(f.containerInfo),Te=q.focusedElem,Ge=q.selectionRange;if(ue!==Te&&Te&&Te.ownerDocument&&ae(Te.ownerDocument.documentElement,Te)){if(Ge!==null&&Se(Te)){var vt=Ge.start,jt=Ge.end;if(jt===void 0&&(jt=vt),"selectionStart"in Te)Te.selectionStart=vt,Te.selectionEnd=Math.min(jt,Te.value.length);else{var Ft=Te.ownerDocument||document,_t=Ft&&Ft.defaultView||window;if(_t.getSelection){var Ct=_t.getSelection(),Qn=Te.textContent.length,Un=Math.min(Ge.start,Qn),yi=Ge.end===void 0?Un:Math.min(Ge.end,Qn);!Ct.extend&&Un>yi&&(ue=yi,yi=Un,Un=ue);var ut=Q(Te,Un),tt=Q(Te,yi);if(ut&&tt&&(Ct.rangeCount!==1||Ct.anchorNode!==ut.node||Ct.anchorOffset!==ut.offset||Ct.focusNode!==tt.node||Ct.focusOffset!==tt.offset)){var yt=Ft.createRange();yt.setStart(ut.node,ut.offset),Ct.removeAllRanges(),Un>yi?(Ct.addRange(yt),Ct.extend(tt.node,tt.offset)):(yt.setEnd(tt.node,tt.offset),Ct.addRange(yt))}}}}for(Ft=[],Ct=Te;Ct=Ct.parentNode;)Ct.nodeType===1&&Ft.push({element:Ct,left:Ct.scrollLeft,top:Ct.scrollTop});for(typeof Te.focus=="function"&&Te.focus(),Te=0;Te<Ft.length;Te++){var Dt=Ft[Te];Dt.element.scrollLeft=Dt.left,Dt.element.scrollTop=Dt.top}}N_=!!dR,fR=dR=null}finally{ui=j,G.p=k,U.T=w}}f.current=g,aa=2}}function N8(){if(aa===2){aa=0;var f=pf,g=rg,w=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||w){w=U.T,U.T=null;var k=G.p;G.p=2;var j=ui;ui|=4;try{l8(f,g.alternate,g)}finally{ui=j,G.p=k,U.T=w}}aa=3}}function M8(){if(aa===4||aa===3){aa=0,Ae();var f=pf,g=rg,w=ig,k=v8;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?aa=5:(aa=0,rg=pf=null,j8(f,f.pendingLanes));var j=f.pendingLanes;if(j===0&&(hf=null),me(w),g=g.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Ot,g,void 0,(g.current.flags&128)===128)}catch{}if(k!==null){g=U.T,j=G.p,G.p=2,U.T=null;try{for(var q=f.onRecoverableError,ue=0;ue<k.length;ue++){var Te=k[ue];q(Te.value,{componentStack:Te.stack})}}finally{U.T=g,G.p=j}}(ig&3)!==0&&v_(),Ic(f),j=f.pendingLanes,(w&4194090)!==0&&(j&42)!==0?f===XA?Nb++:(Nb=0,XA=f):Nb=0,Mb(0)}}function j8(f,g){(f.pooledCacheLanes&=g)===0&&(g=f.pooledCache,g!=null&&(f.pooledCache=null,db(g)))}function v_(f){return I8(),N8(),M8(),P8()}function P8(){if(aa!==5)return!1;var f=pf,g=YA;YA=0;var w=me(ig),k=U.T,j=G.p;try{G.p=32>w?32:w,U.T=null,w=ZA,ZA=null;var q=pf,ue=ig;if(aa=0,rg=pf=null,ig=0,(ui&6)!==0)throw Error(r(331));var Te=ui;if(ui|=4,y8(q.current),p8(q,q.current,ue,w),ui=Te,Mb(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Ot,q)}catch{}return!0}finally{G.p=j,U.T=k,j8(f,g)}}function O8(f,g,w){g=On(w,g),g=RA(f.stateNode,g,2),f=rf(f,g,2),f!==null&&(it(f,2),Ic(f))}function Ci(f,g,w){if(f.tag===3)O8(f,f,w);else for(;g!==null;){if(g.tag===3){O8(g,f,w);break}else if(g.tag===1){var k=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(hf===null||!hf.has(k))){f=On(w,f),w=BF(2),k=rf(g,w,2),k!==null&&($F(w,k,g,f),it(k,2),Ic(k));break}}g=g.return}}function tR(f,g,w){var k=f.pingCache;if(k===null){k=f.pingCache=new _de;var j=new Set;k.set(g,j)}else j=k.get(g),j===void 0&&(j=new Set,k.set(g,j));j.has(w)||(HA=!0,j.add(w),f=Tde.bind(null,f,g,w),g.then(f,f))}function Tde(f,g,w){var k=f.pingCache;k!==null&&k.delete(g),f.pingedLanes|=f.suspendedLanes&w,f.warmLanes&=~w,Ri===f&&(Ur&w)===w&&(Xi===4||Xi===3&&(Ur&62914560)===Ur&&300>le()-KA?(ui&2)===0&&sg(f,0):WA|=w,ng===Ur&&(ng=0)),Ic(f)}function D8(f,g){g===0&&(g=z()),f=Ul(f,g),f!==null&&(it(f,g),Ic(f))}function Ade(f){var g=f.memoizedState,w=0;g!==null&&(w=g.retryLane),D8(f,w)}function Rde(f,g){var w=0;switch(f.tag){case 13:var k=f.stateNode,j=f.memoizedState;j!==null&&(w=j.retryLane);break;case 19:k=f.stateNode;break;case 22:k=f.stateNode._retryCache;break;default:throw Error(r(314))}k!==null&&k.delete(g),D8(f,w)}function Ide(f,g){return Re(f,g)}var x_=null,og=null,nR=!1,w_=!1,rR=!1,Zh=0;function Ic(f){f!==og&&f.next===null&&(og===null?x_=og=f:og=og.next=f),w_=!0,nR||(nR=!0,Mde())}function Mb(f,g){if(!rR&&w_){rR=!0;do for(var w=!1,k=x_;k!==null;){if(f!==0){var j=k.pendingLanes;if(j===0)var q=0;else{var ue=k.suspendedLanes,Te=k.pingedLanes;q=(1<<31-rn(42|f)+1)-1,q&=j&~(ue&~Te),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(w=!0,$8(k,q))}else q=Ur,q=Ie(k,k===Ri?q:0,k.cancelPendingCommit!==null||k.timeoutHandle!==-1),(q&3)===0||de(k,q)||(w=!0,$8(k,q));k=k.next}while(w);rR=!1}}function Nde(){F8()}function F8(){w_=nR=!1;var f=0;Zh!==0&&($de()&&(f=Zh),Zh=0);for(var g=le(),w=null,k=x_;k!==null;){var j=k.next,q=L8(k,g);q===0?(k.next=null,w===null?x_=j:w.next=j,j===null&&(og=w)):(w=k,(f!==0||(q&3)!==0)&&(w_=!0)),k=j}Mb(f)}function L8(f,g){for(var w=f.suspendedLanes,k=f.pingedLanes,j=f.expirationTimes,q=f.pendingLanes&-62914561;0<q;){var ue=31-rn(q),Te=1<<ue,Ge=j[ue];Ge===-1?((Te&w)===0||(Te&k)!==0)&&(j[ue]=bt(Te,g)):Ge<=g&&(f.expiredLanes|=Te),q&=~Te}if(g=Ri,w=Ur,w=Ie(f,f===g?w:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),k=f.callbackNode,w===0||f===g&&(di===2||di===9)||f.cancelPendingCommit!==null)return k!==null&&k!==null&&K(k),f.callbackNode=null,f.callbackPriority=0;if((w&3)===0||de(f,w)){if(g=w&-w,g===f.callbackPriority)return g;switch(k!==null&&K(k),me(w)){case 2:case 8:w=Ee;break;case 32:w=Be;break;case 268435456:w=ct;break;default:w=Be}return k=B8.bind(null,f),w=Re(w,k),f.callbackPriority=g,f.callbackNode=w,g}return k!==null&&k!==null&&K(k),f.callbackPriority=2,f.callbackNode=null,2}function B8(f,g){if(aa!==0&&aa!==5)return f.callbackNode=null,f.callbackPriority=0,null;var w=f.callbackNode;if(v_()&&f.callbackNode!==w)return null;var k=Ur;return k=Ie(f,f===Ri?k:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),k===0?null:(w8(f,k,g),L8(f,le()),f.callbackNode!=null&&f.callbackNode===w?B8.bind(null,f):null)}function $8(f,g){if(v_())return null;w8(f,g,!0)}function Mde(){Ude(function(){(ui&6)!==0?Re(ie,Nde):F8()})}function iR(){return Zh===0&&(Zh=St()),Zh}function z8(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:ku(""+f)}function U8(f,g){var w=g.ownerDocument.createElement("input");return w.name=g.name,w.value=g.value,f.id&&w.setAttribute("form",f.id),g.parentNode.insertBefore(w,g),f=new FormData(f),w.parentNode.removeChild(w),f}function jde(f,g,w,k,j){if(g==="submit"&&w&&w.stateNode===j){var q=z8((j[Pe]||null).action),ue=k.submitter;ue&&(g=(g=ue[Pe]||null)?z8(g.formAction):ue.getAttribute("formAction"),g!==null&&(q=g,ue=null));var Te=new Tm("action","action",null,k,j);f.push({event:Te,listeners:[{instance:null,listener:function(){if(k.defaultPrevented){if(Zh!==0){var Ge=ue?U8(j,ue):new FormData(j);CA(w,{pending:!0,data:Ge,method:j.method,action:q},null,Ge)}}else typeof q=="function"&&(Te.preventDefault(),Ge=ue?U8(j,ue):new FormData(j),CA(w,{pending:!0,data:Ge,method:j.method,action:q},q,Ge))},currentTarget:j}]})}}for(var sR=0;sR<an.length;sR++){var aR=an[sR],Pde=aR.toLowerCase(),Ode=aR[0].toUpperCase()+aR.slice(1);Wt(Pde,"on"+Ode)}Wt(wt,"onAnimationEnd"),Wt(kt,"onAnimationIteration"),Wt(Et,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(Mt,"onTransitionRun"),Wt(Kt,"onTransitionStart"),Wt(nn,"onTransitionCancel"),Wt(Ht,"onTransitionEnd"),pn("onMouseEnter",["mouseout","mouseover"]),pn("onMouseLeave",["mouseout","mouseover"]),pn("onPointerEnter",["pointerout","pointerover"]),pn("onPointerLeave",["pointerout","pointerover"]),Ut("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ut("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ut("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ut("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ut("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ut("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dde=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jb));function q8(f,g){g=(g&4)!==0;for(var w=0;w<f.length;w++){var k=f[w],j=k.event;k=k.listeners;e:{var q=void 0;if(g)for(var ue=k.length-1;0<=ue;ue--){var Te=k[ue],Ge=Te.instance,vt=Te.currentTarget;if(Te=Te.listener,Ge!==q&&j.isPropagationStopped())break e;q=Te,j.currentTarget=vt;try{q(j)}catch(jt){l_(jt)}j.currentTarget=null,q=Ge}else for(ue=0;ue<k.length;ue++){if(Te=k[ue],Ge=Te.instance,vt=Te.currentTarget,Te=Te.listener,Ge!==q&&j.isPropagationStopped())break e;q=Te,j.currentTarget=vt;try{q(j)}catch(jt){l_(jt)}j.currentTarget=null,q=Ge}}}}function Pr(f,g){var w=g[xt];w===void 0&&(w=g[xt]=new Set);var k=f+"__bubble";w.has(k)||(V8(g,f,2,!1),w.add(k))}function oR(f,g,w){var k=0;g&&(k|=4),V8(w,f,k,g)}var __="_reactListening"+Math.random().toString(36).slice(2);function lR(f){if(!f[__]){f[__]=!0,hn.forEach(function(w){w!=="selectionchange"&&(Dde.has(w)||oR(w,!1,f),oR(w,!0,f))});var g=f.nodeType===9?f:f.ownerDocument;g===null||g[__]||(g[__]=!0,oR("selectionchange",!1,g))}}function V8(f,g,w,k){switch(pL(g)){case 2:var j=cfe;break;case 8:j=ufe;break;default:j=_R}w=j.bind(null,g,w,f),j=void 0,!Gy||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(j=!0),k?j!==void 0?f.addEventListener(g,w,{capture:!0,passive:j}):f.addEventListener(g,w,!0):j!==void 0?f.addEventListener(g,w,{passive:j}):f.addEventListener(g,w,!1)}function cR(f,g,w,k,j){var q=k;if((g&1)===0&&(g&2)===0&&k!==null)e:for(;;){if(k===null)return;var ue=k.tag;if(ue===3||ue===4){var Te=k.stateNode.containerInfo;if(Te===j)break;if(ue===4)for(ue=k.return;ue!==null;){var Ge=ue.tag;if((Ge===3||Ge===4)&&ue.stateNode.containerInfo===j)return;ue=ue.return}for(;Te!==null;){if(ue=dr(Te),ue===null)return;if(Ge=ue.tag,Ge===5||Ge===6||Ge===26||Ge===27){k=q=ue;continue e}Te=Te.parentNode}}k=k.return}Wd(function(){var vt=q,jt=km(w),Ft=[];e:{var _t=Xt.get(f);if(_t!==void 0){var Ct=Tm,Qn=f;switch(f){case"keypress":if(Yd(w)===0)break e;case"keydown":case"keyup":Ct=Om;break;case"focusin":Qn="focus",Ct=Zd;break;case"focusout":Qn="blur",Ct=Zd;break;case"beforeblur":case"afterblur":Ct=Zd;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ct=Im;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ct=N1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ct=eb;break;case wt:case kt:case Et:Ct=M1;break;case Ht:Ct=tb;break;case"scroll":case"scrollend":Ct=Am;break;case"wheel":Ct=Fm;break;case"copy":case"cut":case"paste":Ct=jm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ct=Qy;break;case"toggle":case"beforetoggle":Ct=O1}var Un=(g&4)!==0,yi=!Un&&(f==="scroll"||f==="scrollend"),ut=Un?_t!==null?_t+"Capture":null:_t;Un=[];for(var tt=vt,yt;tt!==null;){var Dt=tt;if(yt=Dt.stateNode,Dt=Dt.tag,Dt!==5&&Dt!==26&&Dt!==27||yt===null||ut===null||(Dt=Au(tt,ut),Dt!=null&&Un.push(Pb(tt,Dt,yt))),yi)break;tt=tt.return}0<Un.length&&(_t=new Ct(_t,Qn,null,w,jt),Ft.push({event:_t,listeners:Un}))}}if((g&7)===0){e:{if(_t=f==="mouseover"||f==="pointerover",Ct=f==="mouseout"||f==="pointerout",_t&&w!==tl&&(Qn=w.relatedTarget||w.fromElement)&&(dr(Qn)||Qn[We]))break e;if((Ct||_t)&&(_t=jt.window===jt?jt:(_t=jt.ownerDocument)?_t.defaultView||_t.parentWindow:window,Ct?(Qn=w.relatedTarget||w.toElement,Ct=vt,Qn=Qn?dr(Qn):null,Qn!==null&&(yi=s(Qn),Un=Qn.tag,Qn!==yi||Un!==5&&Un!==27&&Un!==6)&&(Qn=null)):(Ct=null,Qn=vt),Ct!==Qn)){if(Un=Im,Dt="onMouseLeave",ut="onMouseEnter",tt="mouse",(f==="pointerout"||f==="pointerover")&&(Un=Qy,Dt="onPointerLeave",ut="onPointerEnter",tt="pointer"),yi=Ct==null?_t:Jr(Ct),yt=Qn==null?_t:Jr(Qn),_t=new Un(Dt,tt+"leave",Ct,w,jt),_t.target=yi,_t.relatedTarget=yt,Dt=null,dr(jt)===vt&&(Un=new Un(ut,tt+"enter",Qn,w,jt),Un.target=yt,Un.relatedTarget=yi,Dt=Un),yi=Dt,Ct&&Qn)t:{for(Un=Ct,ut=Qn,tt=0,yt=Un;yt;yt=lg(yt))tt++;for(yt=0,Dt=ut;Dt;Dt=lg(Dt))yt++;for(;0<tt-yt;)Un=lg(Un),tt--;for(;0<yt-tt;)ut=lg(ut),yt--;for(;tt--;){if(Un===ut||ut!==null&&Un===ut.alternate)break t;Un=lg(Un),ut=lg(ut)}Un=null}else Un=null;Ct!==null&&H8(Ft,_t,Ct,Un,!1),Qn!==null&&yi!==null&&H8(Ft,yi,Qn,Un,!0)}}e:{if(_t=vt?Jr(vt):window,Ct=_t.nodeName&&_t.nodeName.toLowerCase(),Ct==="select"||Ct==="input"&&_t.type==="file")var yn=Fh;else if($m(_t))if(rl)yn=Qd;else{yn=ju;var Nr=z1}else Ct=_t.nodeName,!Ct||Ct.toLowerCase()!=="input"||_t.type!=="checkbox"&&_t.type!=="radio"?vt&&Wy(vt.elementType)&&(yn=Fh):yn=ab;if(yn&&(yn=yn(f,vt))){sb(Ft,yn,w,jt);break e}Nr&&Nr(f,_t,vt),f==="focusout"&&vt&&_t.type==="number"&&vt.memoizedProps.value!=null&&Ud(_t,"number",_t.value)}switch(Nr=vt?Jr(vt):window,f){case"focusin":($m(Nr)||Nr.contentEditable==="true")&&(He=Nr,Qe=vt,nt=null);break;case"focusout":nt=Qe=He=null;break;case"mousedown":ot=!0;break;case"contextmenu":case"mouseup":case"dragend":ot=!1,Ye(Ft,w,jt);break;case"selectionchange":if(Fe)break;case"keydown":case"keyup":Ye(Ft,w,jt)}var In;if(Oh)e:{switch(f){case"compositionstart":var Hn="onCompositionStart";break e;case"compositionend":Hn="onCompositionEnd";break e;case"compositionupdate":Hn="onCompositionUpdate";break e}Hn=void 0}else Mu?ib(f,w)&&(Hn="onCompositionEnd"):f==="keydown"&&w.keyCode===229&&(Hn="onCompositionStart");Hn&&(Lm&&w.locale!=="ko"&&(Mu||Hn!=="onCompositionStart"?Hn==="onCompositionEnd"&&Mu&&(In=Kd()):(nl=jt,Em="value"in nl?nl.value:nl.textContent,Mu=!0)),Nr=S_(vt,Hn),0<Nr.length&&(Hn=new Pm(Hn,f,null,w,jt),Ft.push({event:Hn,listeners:Nr}),In?Hn.data=In:(In=F1(w),In!==null&&(Hn.data=In)))),(In=qT?L1(f,w):VT(f,w))&&(Hn=S_(vt,"onBeforeInput"),0<Hn.length&&(Nr=new Pm("onBeforeInput","beforeinput",null,w,jt),Ft.push({event:Nr,listeners:Hn}),Nr.data=In)),jde(Ft,f,vt,w,jt)}q8(Ft,g)})}function Pb(f,g,w){return{instance:f,listener:g,currentTarget:w}}function S_(f,g){for(var w=g+"Capture",k=[];f!==null;){var j=f,q=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||q===null||(j=Au(f,w),j!=null&&k.unshift(Pb(f,j,q)),j=Au(f,g),j!=null&&k.push(Pb(f,j,q))),f.tag===3)return k;f=f.return}return[]}function lg(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function H8(f,g,w,k,j){for(var q=g._reactName,ue=[];w!==null&&w!==k;){var Te=w,Ge=Te.alternate,vt=Te.stateNode;if(Te=Te.tag,Ge!==null&&Ge===k)break;Te!==5&&Te!==26&&Te!==27||vt===null||(Ge=vt,j?(vt=Au(w,q),vt!=null&&ue.unshift(Pb(w,vt,Ge))):j||(vt=Au(w,q),vt!=null&&ue.push(Pb(w,vt,Ge)))),w=w.return}ue.length!==0&&f.push({event:g,listeners:ue})}var Fde=/\r\n?/g,Lde=/\u0000|\uFFFD/g;function W8(f){return(typeof f=="string"?f:""+f).replace(Fde,`
`).replace(Lde,"")}function G8(f,g){return g=W8(g),W8(f)===g}function C_(){}function gi(f,g,w,k,j,q){switch(w){case"children":typeof k=="string"?g==="body"||g==="textarea"&&k===""||Vd(f,k):(typeof k=="number"||typeof k=="bigint")&&g!=="body"&&Vd(f,""+k);break;case"className":Pa(f,"class",k);break;case"tabIndex":Pa(f,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":Pa(f,w,k);break;case"style":R1(f,k,q);break;case"data":if(g!=="object"){Pa(f,"data",k);break}case"src":case"href":if(k===""&&(g!=="a"||w!=="href")){f.removeAttribute(w);break}if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean"){f.removeAttribute(w);break}k=ku(""+k),f.setAttribute(w,k);break;case"action":case"formAction":if(typeof k=="function"){f.setAttribute(w,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(w==="formAction"?(g!=="input"&&gi(f,g,"name",j.name,j,null),gi(f,g,"formEncType",j.formEncType,j,null),gi(f,g,"formMethod",j.formMethod,j,null),gi(f,g,"formTarget",j.formTarget,j,null)):(gi(f,g,"encType",j.encType,j,null),gi(f,g,"method",j.method,j,null),gi(f,g,"target",j.target,j,null)));if(k==null||typeof k=="symbol"||typeof k=="boolean"){f.removeAttribute(w);break}k=ku(""+k),f.setAttribute(w,k);break;case"onClick":k!=null&&(f.onclick=C_);break;case"onScroll":k!=null&&Pr("scroll",f);break;case"onScrollEnd":k!=null&&Pr("scrollend",f);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(w=k.__html,w!=null){if(j.children!=null)throw Error(r(60));f.innerHTML=w}}break;case"multiple":f.multiple=k&&typeof k!="function"&&typeof k!="symbol";break;case"muted":f.muted=k&&typeof k!="function"&&typeof k!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(k==null||typeof k=="function"||typeof k=="boolean"||typeof k=="symbol"){f.removeAttribute("xlink:href");break}w=ku(""+k),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":k!=null&&typeof k!="function"&&typeof k!="symbol"?f.setAttribute(w,""+k):f.removeAttribute(w);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"?f.setAttribute(w,""):f.removeAttribute(w);break;case"capture":case"download":k===!0?f.setAttribute(w,""):k!==!1&&k!=null&&typeof k!="function"&&typeof k!="symbol"?f.setAttribute(w,k):f.removeAttribute(w);break;case"cols":case"rows":case"size":case"span":k!=null&&typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k?f.setAttribute(w,k):f.removeAttribute(w);break;case"rowSpan":case"start":k==null||typeof k=="function"||typeof k=="symbol"||isNaN(k)?f.removeAttribute(w):f.setAttribute(w,k);break;case"popover":Pr("beforetoggle",f),Pr("toggle",f),ts(f,"popover",k);break;case"xlinkActuate":ra(f,"http://www.w3.org/1999/xlink","xlink:actuate",k);break;case"xlinkArcrole":ra(f,"http://www.w3.org/1999/xlink","xlink:arcrole",k);break;case"xlinkRole":ra(f,"http://www.w3.org/1999/xlink","xlink:role",k);break;case"xlinkShow":ra(f,"http://www.w3.org/1999/xlink","xlink:show",k);break;case"xlinkTitle":ra(f,"http://www.w3.org/1999/xlink","xlink:title",k);break;case"xlinkType":ra(f,"http://www.w3.org/1999/xlink","xlink:type",k);break;case"xmlBase":ra(f,"http://www.w3.org/XML/1998/namespace","xml:base",k);break;case"xmlLang":ra(f,"http://www.w3.org/XML/1998/namespace","xml:lang",k);break;case"xmlSpace":ra(f,"http://www.w3.org/XML/1998/namespace","xml:space",k);break;case"is":ts(f,"is",k);break;case"innerText":case"textContent":break;default:(!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(w=Da.get(w)||w,ts(f,w,k))}}function uR(f,g,w,k,j,q){switch(w){case"style":R1(f,k,q);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(w=k.__html,w!=null){if(j.children!=null)throw Error(r(60));f.innerHTML=w}}break;case"children":typeof k=="string"?Vd(f,k):(typeof k=="number"||typeof k=="bigint")&&Vd(f,""+k);break;case"onScroll":k!=null&&Pr("scroll",f);break;case"onScrollEnd":k!=null&&Pr("scrollend",f);break;case"onClick":k!=null&&(f.onclick=C_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xe.hasOwnProperty(w))e:{if(w[0]==="o"&&w[1]==="n"&&(j=w.endsWith("Capture"),g=w.slice(2,j?w.length-7:void 0),q=f[Pe]||null,q=q!=null?q[w]:null,typeof q=="function"&&f.removeEventListener(g,q,j),typeof k=="function")){typeof q!="function"&&q!==null&&(w in f?f[w]=null:f.hasAttribute(w)&&f.removeAttribute(w)),f.addEventListener(g,k,j);break e}w in f?f[w]=k:k===!0?f.setAttribute(w,""):ts(f,w,k)}}}function oa(f,g,w){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pr("error",f),Pr("load",f);var k=!1,j=!1,q;for(q in w)if(w.hasOwnProperty(q)){var ue=w[q];if(ue!=null)switch(q){case"src":k=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:gi(f,g,q,ue,w,null)}}j&&gi(f,g,"srcSet",w.srcSet,w,null),k&&gi(f,g,"src",w.src,w,null);return;case"input":Pr("invalid",f);var Te=q=ue=j=null,Ge=null,vt=null;for(k in w)if(w.hasOwnProperty(k)){var jt=w[k];if(jt!=null)switch(k){case"name":j=jt;break;case"type":ue=jt;break;case"checked":Ge=jt;break;case"defaultChecked":vt=jt;break;case"value":q=jt;break;case"defaultValue":Te=jt;break;case"children":case"dangerouslySetInnerHTML":if(jt!=null)throw Error(r(137,g));break;default:gi(f,g,k,jt,w,null)}}Vy(f,q,Te,Ge,vt,ue,j,!1),wc(f);return;case"select":Pr("invalid",f),k=ue=q=null;for(j in w)if(w.hasOwnProperty(j)&&(Te=w[j],Te!=null))switch(j){case"value":q=Te;break;case"defaultValue":ue=Te;break;case"multiple":k=Te;default:gi(f,g,j,Te,w,null)}g=q,w=ue,f.multiple=!!k,g!=null?Cu(f,!!k,g,!1):w!=null&&Cu(f,!!k,w,!0);return;case"textarea":Pr("invalid",f),q=j=k=null;for(ue in w)if(w.hasOwnProperty(ue)&&(Te=w[ue],Te!=null))switch(ue){case"value":k=Te;break;case"defaultValue":j=Te;break;case"children":q=Te;break;case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(91));break;default:gi(f,g,ue,Te,w,null)}Hy(f,k,j,q),wc(f);return;case"option":for(Ge in w)if(w.hasOwnProperty(Ge)&&(k=w[Ge],k!=null))switch(Ge){case"selected":f.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:gi(f,g,Ge,k,w,null)}return;case"dialog":Pr("beforetoggle",f),Pr("toggle",f),Pr("cancel",f),Pr("close",f);break;case"iframe":case"object":Pr("load",f);break;case"video":case"audio":for(k=0;k<jb.length;k++)Pr(jb[k],f);break;case"image":Pr("error",f),Pr("load",f);break;case"details":Pr("toggle",f);break;case"embed":case"source":case"link":Pr("error",f),Pr("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(vt in w)if(w.hasOwnProperty(vt)&&(k=w[vt],k!=null))switch(vt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:gi(f,g,vt,k,w,null)}return;default:if(Wy(g)){for(jt in w)w.hasOwnProperty(jt)&&(k=w[jt],k!==void 0&&uR(f,g,jt,k,w,void 0));return}}for(Te in w)w.hasOwnProperty(Te)&&(k=w[Te],k!=null&&gi(f,g,Te,k,w,null))}function Bde(f,g,w,k){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,q=null,ue=null,Te=null,Ge=null,vt=null,jt=null;for(Ct in w){var Ft=w[Ct];if(w.hasOwnProperty(Ct)&&Ft!=null)switch(Ct){case"checked":break;case"value":break;case"defaultValue":Ge=Ft;default:k.hasOwnProperty(Ct)||gi(f,g,Ct,null,k,Ft)}}for(var _t in k){var Ct=k[_t];if(Ft=w[_t],k.hasOwnProperty(_t)&&(Ct!=null||Ft!=null))switch(_t){case"type":q=Ct;break;case"name":j=Ct;break;case"checked":vt=Ct;break;case"defaultChecked":jt=Ct;break;case"value":ue=Ct;break;case"defaultValue":Te=Ct;break;case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(r(137,g));break;default:Ct!==Ft&&gi(f,g,_t,Ct,k,Ft)}}zd(f,ue,Te,Ge,vt,jt,q,j);return;case"select":Ct=ue=Te=_t=null;for(q in w)if(Ge=w[q],w.hasOwnProperty(q)&&Ge!=null)switch(q){case"value":break;case"multiple":Ct=Ge;default:k.hasOwnProperty(q)||gi(f,g,q,null,k,Ge)}for(j in k)if(q=k[j],Ge=w[j],k.hasOwnProperty(j)&&(q!=null||Ge!=null))switch(j){case"value":_t=q;break;case"defaultValue":Te=q;break;case"multiple":ue=q;default:q!==Ge&&gi(f,g,j,q,k,Ge)}g=Te,w=ue,k=Ct,_t!=null?Cu(f,!!w,_t,!1):!!k!=!!w&&(g!=null?Cu(f,!!w,g,!0):Cu(f,!!w,w?[]:"",!1));return;case"textarea":Ct=_t=null;for(Te in w)if(j=w[Te],w.hasOwnProperty(Te)&&j!=null&&!k.hasOwnProperty(Te))switch(Te){case"value":break;case"children":break;default:gi(f,g,Te,null,k,j)}for(ue in k)if(j=k[ue],q=w[ue],k.hasOwnProperty(ue)&&(j!=null||q!=null))switch(ue){case"value":_t=j;break;case"defaultValue":Ct=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:j!==q&&gi(f,g,ue,j,k,q)}qd(f,_t,Ct);return;case"option":for(var Qn in w)if(_t=w[Qn],w.hasOwnProperty(Qn)&&_t!=null&&!k.hasOwnProperty(Qn))switch(Qn){case"selected":f.selected=!1;break;default:gi(f,g,Qn,null,k,_t)}for(Ge in k)if(_t=k[Ge],Ct=w[Ge],k.hasOwnProperty(Ge)&&_t!==Ct&&(_t!=null||Ct!=null))switch(Ge){case"selected":f.selected=_t&&typeof _t!="function"&&typeof _t!="symbol";break;default:gi(f,g,Ge,_t,k,Ct)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Un in w)_t=w[Un],w.hasOwnProperty(Un)&&_t!=null&&!k.hasOwnProperty(Un)&&gi(f,g,Un,null,k,_t);for(vt in k)if(_t=k[vt],Ct=w[vt],k.hasOwnProperty(vt)&&_t!==Ct&&(_t!=null||Ct!=null))switch(vt){case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(r(137,g));break;default:gi(f,g,vt,_t,k,Ct)}return;default:if(Wy(g)){for(var yi in w)_t=w[yi],w.hasOwnProperty(yi)&&_t!==void 0&&!k.hasOwnProperty(yi)&&uR(f,g,yi,void 0,k,_t);for(jt in k)_t=k[jt],Ct=w[jt],!k.hasOwnProperty(jt)||_t===Ct||_t===void 0&&Ct===void 0||uR(f,g,jt,_t,k,Ct);return}}for(var ut in w)_t=w[ut],w.hasOwnProperty(ut)&&_t!=null&&!k.hasOwnProperty(ut)&&gi(f,g,ut,null,k,_t);for(Ft in k)_t=k[Ft],Ct=w[Ft],!k.hasOwnProperty(Ft)||_t===Ct||_t==null&&Ct==null||gi(f,g,Ft,_t,k,Ct)}var dR=null,fR=null;function k_(f){return f.nodeType===9?f:f.ownerDocument}function K8(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y8(f,g){if(f===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&g==="foreignObject"?0:f}function hR(f,g){return f==="textarea"||f==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var pR=null;function $de(){var f=window.event;return f&&f.type==="popstate"?f===pR?!1:(pR=f,!0):(pR=null,!1)}var Z8=typeof setTimeout=="function"?setTimeout:void 0,zde=typeof clearTimeout=="function"?clearTimeout:void 0,X8=typeof Promise=="function"?Promise:void 0,Ude=typeof queueMicrotask=="function"?queueMicrotask:typeof X8<"u"?function(f){return X8.resolve(null).then(f).catch(qde)}:Z8;function qde(f){setTimeout(function(){throw f})}function gf(f){return f==="head"}function J8(f,g){var w=g,k=0,j=0;do{var q=w.nextSibling;if(f.removeChild(w),q&&q.nodeType===8)if(w=q.data,w==="/$"){if(0<k&&8>k){w=k;var ue=f.ownerDocument;if(w&1&&Ob(ue.documentElement),w&2&&Ob(ue.body),w&4)for(w=ue.head,Ob(w),ue=w.firstChild;ue;){var Te=ue.nextSibling,Ge=ue.nodeName;ue[tn]||Ge==="SCRIPT"||Ge==="STYLE"||Ge==="LINK"&&ue.rel.toLowerCase()==="stylesheet"||w.removeChild(ue),ue=Te}}if(j===0){f.removeChild(q),qb(g);return}j--}else w==="$"||w==="$?"||w==="$!"?j++:k=w.charCodeAt(0)-48;else k=0;w=q}while(w);qb(g)}function mR(f){var g=f.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var w=g;switch(g=g.nextSibling,w.nodeName){case"HTML":case"HEAD":case"BODY":mR(w),cn(w);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(w.rel.toLowerCase()==="stylesheet")continue}f.removeChild(w)}}function Vde(f,g,w,k){for(;f.nodeType===1;){var j=w;if(f.nodeName.toLowerCase()!==g.toLowerCase()){if(!k&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(k){if(!f[tn])switch(g){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(q=f.getAttribute("rel"),q==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(q!==j.rel||f.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||f.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||f.getAttribute("title")!==(j.title==null?null:j.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(q=f.getAttribute("src"),(q!==(j.src==null?null:j.src)||f.getAttribute("type")!==(j.type==null?null:j.type)||f.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&q&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(g==="input"&&f.type==="hidden"){var q=j.name==null?null:""+j.name;if(j.type==="hidden"&&f.getAttribute("name")===q)return f}else return f;if(f=Vl(f.nextSibling),f===null)break}return null}function Hde(f,g,w){if(g==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!w||(f=Vl(f.nextSibling),f===null))return null;return f}function gR(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function Wde(f,g){var w=f.ownerDocument;if(f.data!=="$?"||w.readyState==="complete")g();else{var k=function(){g(),w.removeEventListener("DOMContentLoaded",k)};w.addEventListener("DOMContentLoaded",k),f._reactRetry=k}}function Vl(f){for(;f!=null;f=f.nextSibling){var g=f.nodeType;if(g===1||g===3)break;if(g===8){if(g=f.data,g==="$"||g==="$!"||g==="$?"||g==="F!"||g==="F")break;if(g==="/$")return null}}return f}var yR=null;function Q8(f){f=f.previousSibling;for(var g=0;f;){if(f.nodeType===8){var w=f.data;if(w==="$"||w==="$!"||w==="$?"){if(g===0)return f;g--}else w==="/$"&&g++}f=f.previousSibling}return null}function eL(f,g,w){switch(g=k_(w),f){case"html":if(f=g.documentElement,!f)throw Error(r(452));return f;case"head":if(f=g.head,!f)throw Error(r(453));return f;case"body":if(f=g.body,!f)throw Error(r(454));return f;default:throw Error(r(451))}}function Ob(f){for(var g=f.attributes;g.length;)f.removeAttributeNode(g[0]);cn(f)}var cl=new Map,tL=new Set;function E_(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Wu=G.d;G.d={f:Gde,r:Kde,D:Yde,C:Zde,L:Xde,m:Jde,X:efe,S:Qde,M:tfe};function Gde(){var f=Wu.f(),g=y_();return f||g}function Kde(f){var g=Cr(f);g!==null&&g.tag===5&&g.type==="form"?wF(g):Wu.r(f)}var cg=typeof document>"u"?null:document;function nL(f,g,w){var k=cg;if(k&&typeof g=="string"&&g){var j=ga(g);j='link[rel="'+f+'"][href="'+j+'"]',typeof w=="string"&&(j+='[crossorigin="'+w+'"]'),tL.has(j)||(tL.add(j),f={rel:f,crossOrigin:w,href:g},k.querySelector(j)===null&&(g=k.createElement("link"),oa(g,"link",f),br(g),k.head.appendChild(g)))}}function Yde(f){Wu.D(f),nL("dns-prefetch",f,null)}function Zde(f,g){Wu.C(f,g),nL("preconnect",f,g)}function Xde(f,g,w){Wu.L(f,g,w);var k=cg;if(k&&f&&g){var j='link[rel="preload"][as="'+ga(g)+'"]';g==="image"&&w&&w.imageSrcSet?(j+='[imagesrcset="'+ga(w.imageSrcSet)+'"]',typeof w.imageSizes=="string"&&(j+='[imagesizes="'+ga(w.imageSizes)+'"]')):j+='[href="'+ga(f)+'"]';var q=j;switch(g){case"style":q=ug(f);break;case"script":q=dg(f)}cl.has(q)||(f=u({rel:"preload",href:g==="image"&&w&&w.imageSrcSet?void 0:f,as:g},w),cl.set(q,f),k.querySelector(j)!==null||g==="style"&&k.querySelector(Db(q))||g==="script"&&k.querySelector(Fb(q))||(g=k.createElement("link"),oa(g,"link",f),br(g),k.head.appendChild(g)))}}function Jde(f,g){Wu.m(f,g);var w=cg;if(w&&f){var k=g&&typeof g.as=="string"?g.as:"script",j='link[rel="modulepreload"][as="'+ga(k)+'"][href="'+ga(f)+'"]',q=j;switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=dg(f)}if(!cl.has(q)&&(f=u({rel:"modulepreload",href:f},g),cl.set(q,f),w.querySelector(j)===null)){switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(w.querySelector(Fb(q)))return}k=w.createElement("link"),oa(k,"link",f),br(k),w.head.appendChild(k)}}}function Qde(f,g,w){Wu.S(f,g,w);var k=cg;if(k&&f){var j=Qr(k).hoistableStyles,q=ug(f);g=g||"default";var ue=j.get(q);if(!ue){var Te={loading:0,preload:null};if(ue=k.querySelector(Db(q)))Te.loading=5;else{f=u({rel:"stylesheet",href:f,"data-precedence":g},w),(w=cl.get(q))&&bR(f,w);var Ge=ue=k.createElement("link");br(Ge),oa(Ge,"link",f),Ge._p=new Promise(function(vt,jt){Ge.onload=vt,Ge.onerror=jt}),Ge.addEventListener("load",function(){Te.loading|=1}),Ge.addEventListener("error",function(){Te.loading|=2}),Te.loading|=4,T_(ue,g,k)}ue={type:"stylesheet",instance:ue,count:1,state:Te},j.set(q,ue)}}}function efe(f,g){Wu.X(f,g);var w=cg;if(w&&f){var k=Qr(w).hoistableScripts,j=dg(f),q=k.get(j);q||(q=w.querySelector(Fb(j)),q||(f=u({src:f,async:!0},g),(g=cl.get(j))&&vR(f,g),q=w.createElement("script"),br(q),oa(q,"link",f),w.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},k.set(j,q))}}function tfe(f,g){Wu.M(f,g);var w=cg;if(w&&f){var k=Qr(w).hoistableScripts,j=dg(f),q=k.get(j);q||(q=w.querySelector(Fb(j)),q||(f=u({src:f,async:!0,type:"module"},g),(g=cl.get(j))&&vR(f,g),q=w.createElement("script"),br(q),oa(q,"link",f),w.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},k.set(j,q))}}function rL(f,g,w,k){var j=(j=Me.current)?E_(j):null;if(!j)throw Error(r(446));switch(f){case"meta":case"title":return null;case"style":return typeof w.precedence=="string"&&typeof w.href=="string"?(g=ug(w.href),w=Qr(j).hoistableStyles,k=w.get(g),k||(k={type:"style",instance:null,count:0,state:null},w.set(g,k)),k):{type:"void",instance:null,count:0,state:null};case"link":if(w.rel==="stylesheet"&&typeof w.href=="string"&&typeof w.precedence=="string"){f=ug(w.href);var q=Qr(j).hoistableStyles,ue=q.get(f);if(ue||(j=j.ownerDocument||j,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(f,ue),(q=j.querySelector(Db(f)))&&!q._p&&(ue.instance=q,ue.state.loading=5),cl.has(f)||(w={rel:"preload",as:"style",href:w.href,crossOrigin:w.crossOrigin,integrity:w.integrity,media:w.media,hrefLang:w.hrefLang,referrerPolicy:w.referrerPolicy},cl.set(f,w),q||nfe(j,f,w,ue.state))),g&&k===null)throw Error(r(528,""));return ue}if(g&&k!==null)throw Error(r(529,""));return null;case"script":return g=w.async,w=w.src,typeof w=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=dg(w),w=Qr(j).hoistableScripts,k=w.get(g),k||(k={type:"script",instance:null,count:0,state:null},w.set(g,k)),k):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,f))}}function ug(f){return'href="'+ga(f)+'"'}function Db(f){return'link[rel="stylesheet"]['+f+"]"}function iL(f){return u({},f,{"data-precedence":f.precedence,precedence:null})}function nfe(f,g,w,k){f.querySelector('link[rel="preload"][as="style"]['+g+"]")?k.loading=1:(g=f.createElement("link"),k.preload=g,g.addEventListener("load",function(){return k.loading|=1}),g.addEventListener("error",function(){return k.loading|=2}),oa(g,"link",w),br(g),f.head.appendChild(g))}function dg(f){return'[src="'+ga(f)+'"]'}function Fb(f){return"script[async]"+f}function sL(f,g,w){if(g.count++,g.instance===null)switch(g.type){case"style":var k=f.querySelector('style[data-href~="'+ga(w.href)+'"]');if(k)return g.instance=k,br(k),k;var j=u({},w,{"data-href":w.href,"data-precedence":w.precedence,href:null,precedence:null});return k=(f.ownerDocument||f).createElement("style"),br(k),oa(k,"style",j),T_(k,w.precedence,f),g.instance=k;case"stylesheet":j=ug(w.href);var q=f.querySelector(Db(j));if(q)return g.state.loading|=4,g.instance=q,br(q),q;k=iL(w),(j=cl.get(j))&&bR(k,j),q=(f.ownerDocument||f).createElement("link"),br(q);var ue=q;return ue._p=new Promise(function(Te,Ge){ue.onload=Te,ue.onerror=Ge}),oa(q,"link",k),g.state.loading|=4,T_(q,w.precedence,f),g.instance=q;case"script":return q=dg(w.src),(j=f.querySelector(Fb(q)))?(g.instance=j,br(j),j):(k=w,(j=cl.get(q))&&(k=u({},w),vR(k,j)),f=f.ownerDocument||f,j=f.createElement("script"),br(j),oa(j,"link",k),f.head.appendChild(j),g.instance=j);case"void":return null;default:throw Error(r(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(k=g.instance,g.state.loading|=4,T_(k,w.precedence,f));return g.instance}function T_(f,g,w){for(var k=w.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=k.length?k[k.length-1]:null,q=j,ue=0;ue<k.length;ue++){var Te=k[ue];if(Te.dataset.precedence===g)q=Te;else if(q!==j)break}q?q.parentNode.insertBefore(f,q.nextSibling):(g=w.nodeType===9?w.head:w,g.insertBefore(f,g.firstChild))}function bR(f,g){f.crossOrigin==null&&(f.crossOrigin=g.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=g.referrerPolicy),f.title==null&&(f.title=g.title)}function vR(f,g){f.crossOrigin==null&&(f.crossOrigin=g.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=g.referrerPolicy),f.integrity==null&&(f.integrity=g.integrity)}var A_=null;function aL(f,g,w){if(A_===null){var k=new Map,j=A_=new Map;j.set(w,k)}else j=A_,k=j.get(w),k||(k=new Map,j.set(w,k));if(k.has(f))return k;for(k.set(f,null),w=w.getElementsByTagName(f),j=0;j<w.length;j++){var q=w[j];if(!(q[tn]||q[ye]||f==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=q.getAttribute(g)||"";ue=f+ue;var Te=k.get(ue);Te?Te.push(q):k.set(ue,[q])}}return k}function oL(f,g,w){f=f.ownerDocument||f,f.head.insertBefore(w,g==="title"?f.querySelector("head > title"):null)}function rfe(f,g,w){if(w===1||g.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return f=g.disabled,typeof g.precedence=="string"&&f==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function lL(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var Lb=null;function ife(){}function sfe(f,g,w){if(Lb===null)throw Error(r(475));var k=Lb;if(g.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var j=ug(w.href),q=f.querySelector(Db(j));if(q){f=q._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(k.count++,k=R_.bind(k),f.then(k,k)),g.state.loading|=4,g.instance=q,br(q);return}q=f.ownerDocument||f,w=iL(w),(j=cl.get(j))&&bR(w,j),q=q.createElement("link"),br(q);var ue=q;ue._p=new Promise(function(Te,Ge){ue.onload=Te,ue.onerror=Ge}),oa(q,"link",w),g.instance=q}k.stylesheets===null&&(k.stylesheets=new Map),k.stylesheets.set(g,f),(f=g.state.preload)&&(g.state.loading&3)===0&&(k.count++,g=R_.bind(k),f.addEventListener("load",g),f.addEventListener("error",g))}}function afe(){if(Lb===null)throw Error(r(475));var f=Lb;return f.stylesheets&&f.count===0&&xR(f,f.stylesheets),0<f.count?function(g){var w=setTimeout(function(){if(f.stylesheets&&xR(f,f.stylesheets),f.unsuspend){var k=f.unsuspend;f.unsuspend=null,k()}},6e4);return f.unsuspend=g,function(){f.unsuspend=null,clearTimeout(w)}}:null}function R_(){if(this.count--,this.count===0){if(this.stylesheets)xR(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var I_=null;function xR(f,g){f.stylesheets=null,f.unsuspend!==null&&(f.count++,I_=new Map,g.forEach(ofe,f),I_=null,R_.call(f))}function ofe(f,g){if(!(g.state.loading&4)){var w=I_.get(f);if(w)var k=w.get(null);else{w=new Map,I_.set(f,w);for(var j=f.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<j.length;q++){var ue=j[q];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(w.set(ue.dataset.precedence,ue),k=ue)}k&&w.set(null,k)}j=g.instance,ue=j.getAttribute("data-precedence"),q=w.get(ue)||k,q===k&&w.set(null,j),w.set(ue,j),this.count++,k=R_.bind(this),j.addEventListener("load",k),j.addEventListener("error",k),q?q.parentNode.insertBefore(j,q.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(j,f.firstChild)),g.state.loading|=4}}var Bb={$$typeof:S,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function lfe(f,g,w,k,j,q,ue,Te){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ve(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.hiddenUpdates=Ve(null),this.identifierPrefix=k,this.onUncaughtError=j,this.onCaughtError=q,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Te,this.incompleteTransitions=new Map}function cL(f,g,w,k,j,q,ue,Te,Ge,vt,jt,Ft){return f=new lfe(f,g,w,ue,Te,Ge,vt,Ft),g=1,q===!0&&(g|=24),q=No(3,null,null,g),f.current=q,q.stateNode=f,g=tA(),g.refCount++,f.pooledCache=g,g.refCount++,q.memoizedState={element:k,isDehydrated:w,cache:g},sA(q),f}function uL(f){return f?(f=kc,f):kc}function dL(f,g,w,k,j,q){j=uL(j),k.context===null?k.context=j:k.pendingContext=j,k=nf(g),k.payload={element:w},q=q===void 0?null:q,q!==null&&(k.callback=q),w=rf(f,k,g),w!==null&&(Do(w,f,g),mb(w,f,g))}function fL(f,g){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var w=f.retryLane;f.retryLane=w!==0&&w<g?w:g}}function wR(f,g){fL(f,g),(f=f.alternate)&&fL(f,g)}function hL(f){if(f.tag===13){var g=Ul(f,67108864);g!==null&&Do(g,f,67108864),wR(f,67108864)}}var N_=!0;function cfe(f,g,w,k){var j=U.T;U.T=null;var q=G.p;try{G.p=2,_R(f,g,w,k)}finally{G.p=q,U.T=j}}function ufe(f,g,w,k){var j=U.T;U.T=null;var q=G.p;try{G.p=8,_R(f,g,w,k)}finally{G.p=q,U.T=j}}function _R(f,g,w,k){if(N_){var j=SR(k);if(j===null)cR(f,g,k,M_,w),mL(f,k);else if(ffe(j,f,g,w,k))k.stopPropagation();else if(mL(f,k),g&4&&-1<dfe.indexOf(f)){for(;j!==null;){var q=Cr(j);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var ue=xe(q.pendingLanes);if(ue!==0){var Te=q;for(Te.pendingLanes|=2,Te.entangledLanes|=2;ue;){var Ge=1<<31-rn(ue);Te.entanglements[1]|=Ge,ue&=~Ge}Ic(q),(ui&6)===0&&(m_=le()+500,Mb(0))}}break;case 13:Te=Ul(q,2),Te!==null&&Do(Te,q,2),y_(),wR(q,2)}if(q=SR(k),q===null&&cR(f,g,k,M_,w),q===j)break;j=q}j!==null&&k.stopPropagation()}else cR(f,g,k,null,w)}}function SR(f){return f=km(f),CR(f)}var M_=null;function CR(f){if(M_=null,f=dr(f),f!==null){var g=s(f);if(g===null)f=null;else{var w=g.tag;if(w===13){if(f=a(g),f!==null)return f;f=null}else if(w===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;f=null}else g!==f&&(f=null)}}return M_=f,null}function pL(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oe()){case ie:return 2;case Ee:return 8;case Be:case ke:return 32;case ct:return 268435456;default:return 32}default:return 32}}var kR=!1,yf=null,bf=null,vf=null,$b=new Map,zb=new Map,xf=[],dfe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mL(f,g){switch(f){case"focusin":case"focusout":yf=null;break;case"dragenter":case"dragleave":bf=null;break;case"mouseover":case"mouseout":vf=null;break;case"pointerover":case"pointerout":$b.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":zb.delete(g.pointerId)}}function Ub(f,g,w,k,j,q){return f===null||f.nativeEvent!==q?(f={blockedOn:g,domEventName:w,eventSystemFlags:k,nativeEvent:q,targetContainers:[j]},g!==null&&(g=Cr(g),g!==null&&hL(g)),f):(f.eventSystemFlags|=k,g=f.targetContainers,j!==null&&g.indexOf(j)===-1&&g.push(j),f)}function ffe(f,g,w,k,j){switch(g){case"focusin":return yf=Ub(yf,f,g,w,k,j),!0;case"dragenter":return bf=Ub(bf,f,g,w,k,j),!0;case"mouseover":return vf=Ub(vf,f,g,w,k,j),!0;case"pointerover":var q=j.pointerId;return $b.set(q,Ub($b.get(q)||null,f,g,w,k,j)),!0;case"gotpointercapture":return q=j.pointerId,zb.set(q,Ub(zb.get(q)||null,f,g,w,k,j)),!0}return!1}function gL(f){var g=dr(f.target);if(g!==null){var w=s(g);if(w!==null){if(g=w.tag,g===13){if(g=a(w),g!==null){f.blockedOn=g,W(f.priority,function(){if(w.tag===13){var k=Oo();k=Rt(k);var j=Ul(w,k);j!==null&&Do(j,w,k),wR(w,k)}});return}}else if(g===3&&w.stateNode.current.memoizedState.isDehydrated){f.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}f.blockedOn=null}function j_(f){if(f.blockedOn!==null)return!1;for(var g=f.targetContainers;0<g.length;){var w=SR(f.nativeEvent);if(w===null){w=f.nativeEvent;var k=new w.constructor(w.type,w);tl=k,w.target.dispatchEvent(k),tl=null}else return g=Cr(w),g!==null&&hL(g),f.blockedOn=w,!1;g.shift()}return!0}function yL(f,g,w){j_(f)&&w.delete(g)}function hfe(){kR=!1,yf!==null&&j_(yf)&&(yf=null),bf!==null&&j_(bf)&&(bf=null),vf!==null&&j_(vf)&&(vf=null),$b.forEach(yL),zb.forEach(yL)}function P_(f,g){f.blockedOn===g&&(f.blockedOn=null,kR||(kR=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hfe)))}var O_=null;function bL(f){O_!==f&&(O_=f,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){O_===f&&(O_=null);for(var g=0;g<f.length;g+=3){var w=f[g],k=f[g+1],j=f[g+2];if(typeof k!="function"){if(CR(k||w)===null)continue;break}var q=Cr(w);q!==null&&(f.splice(g,3),g-=3,CA(q,{pending:!0,data:j,method:w.method,action:k},k,j))}}))}function qb(f){function g(Ge){return P_(Ge,f)}yf!==null&&P_(yf,f),bf!==null&&P_(bf,f),vf!==null&&P_(vf,f),$b.forEach(g),zb.forEach(g);for(var w=0;w<xf.length;w++){var k=xf[w];k.blockedOn===f&&(k.blockedOn=null)}for(;0<xf.length&&(w=xf[0],w.blockedOn===null);)gL(w),w.blockedOn===null&&xf.shift();if(w=(f.ownerDocument||f).$$reactFormReplay,w!=null)for(k=0;k<w.length;k+=3){var j=w[k],q=w[k+1],ue=j[Pe]||null;if(typeof q=="function")ue||bL(w);else if(ue){var Te=null;if(q&&q.hasAttribute("formAction")){if(j=q,ue=q[Pe]||null)Te=ue.formAction;else if(CR(j)!==null)continue}else Te=ue.action;typeof Te=="function"?w[k+1]=Te:(w.splice(k,3),k-=3),bL(w)}}}function ER(f){this._internalRoot=f}D_.prototype.render=ER.prototype.render=function(f){var g=this._internalRoot;if(g===null)throw Error(r(409));var w=g.current,k=Oo();dL(w,k,f,g,null,null)},D_.prototype.unmount=ER.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var g=f.containerInfo;dL(f.current,2,null,f,null,null),y_(),g[We]=null}};function D_(f){this._internalRoot=f}D_.prototype.unstable_scheduleHydration=function(f){if(f){var g=Y();f={blockedOn:null,target:f,priority:g};for(var w=0;w<xf.length&&g!==0&&g<xf[w].priority;w++);xf.splice(w,0,f),w===0&&gL(f)}};var vL=t.version;if(vL!=="19.1.0")throw Error(r(527,vL,"19.1.0"));G.findDOMNode=function(f){var g=f._reactInternals;if(g===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=l(g),f=f!==null?c(f):null,f=f===null?null:f.stateNode,f};var pfe={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var F_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!F_.isDisabled&&F_.supportsFiber)try{Ot=F_.inject(pfe),zt=F_}catch{}}return Hb.createRoot=function(f,g){if(!i(f))throw Error(r(299));var w=!1,k="",j=OF,q=DF,ue=FF,Te=null;return g!=null&&(g.unstable_strictMode===!0&&(w=!0),g.identifierPrefix!==void 0&&(k=g.identifierPrefix),g.onUncaughtError!==void 0&&(j=g.onUncaughtError),g.onCaughtError!==void 0&&(q=g.onCaughtError),g.onRecoverableError!==void 0&&(ue=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Te=g.unstable_transitionCallbacks)),g=cL(f,1,!1,null,null,w,k,j,q,ue,Te,null),f[We]=g.current,lR(f),new ER(g)},Hb.hydrateRoot=function(f,g,w){if(!i(f))throw Error(r(299));var k=!1,j="",q=OF,ue=DF,Te=FF,Ge=null,vt=null;return w!=null&&(w.unstable_strictMode===!0&&(k=!0),w.identifierPrefix!==void 0&&(j=w.identifierPrefix),w.onUncaughtError!==void 0&&(q=w.onUncaughtError),w.onCaughtError!==void 0&&(ue=w.onCaughtError),w.onRecoverableError!==void 0&&(Te=w.onRecoverableError),w.unstable_transitionCallbacks!==void 0&&(Ge=w.unstable_transitionCallbacks),w.formState!==void 0&&(vt=w.formState)),g=cL(f,1,!0,g,w??null,k,j,q,ue,Te,Ge,vt),g.context=uL(null),w=g.current,k=Oo(),k=Rt(k),j=nf(k),j.callback=null,rf(w,j,k),w=k,g.current.lanes=w,it(g,w),Ic(g),f[We]=g.current,lR(f),new D_(g)},Hb.version="19.1.0",Hb}var RL;function Ife(){if(RL)return RR.exports;RL=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),RR.exports=Rfe(),RR.exports}var Nfe=Ife();const Mfe=ma(Nfe);function IL(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ko(...e){return t=>{let n=!1;const r=e.map(i=>{const s=IL(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():IL(e[i],null)}}}}function En(...e){return T.useCallback(Ko(...e),e)}function ou(e){const t=jfe(e),n=T.forwardRef((r,i)=>{const{children:s,...a}=r,o=T.Children.toArray(s),l=o.find(Ofe);if(l){const c=l.props.children,u=o.map(d=>d===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...a,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return p.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}var oH=ou("Slot");function jfe(e){const t=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const a=Ffe(i),o=Dfe(s,i.props);return i.type!==T.Fragment&&(o.ref=r?Ko(r,a):a),T.cloneElement(i,o)}return T.Children.count(i)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Pfe=Symbol("radix.slottable");function Ofe(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Pfe}function Dfe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{const l=s(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function Ffe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function lH(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=lH(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function cH(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=lH(e))&&(r&&(r+=" "),r+=t);return r}const NL=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ML=cH,Qj=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return ML(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const h=NL(u)||NL(d);return i[c][h]}),o=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...m}=u;return Object.entries(m).every(y=>{let[b,v]=y;return Array.isArray(v)?v.includes({...s,...o}[b]):{...s,...o}[b]===v})?[...c,d,h]:c},[]);return ML(e,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},eP="-",Lfe=e=>{const t=$fe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const o=a.split(eP);return o[0]===""&&o.length!==1&&o.shift(),uH(o,t)||Bfe(a)},getConflictingClassGroupIds:(a,o)=>{const l=n[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},uH=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?uH(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(eP);return(a=t.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},jL=/^\[(.+)\]$/,Bfe=e=>{if(jL.test(e)){const t=jL.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},$fe=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const i in n)l3(n[i],r,i,t);return r},l3=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:PL(t,i);s.classGroupId=n;return}if(typeof i=="function"){if(zfe(i)){l3(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{l3(a,PL(t,s),n,r)})})},PL=(e,t)=>{let n=e;return t.split(eP).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},zfe=e=>e.isThemeGetter,Ufe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},c3="!",u3=":",qfe=u3.length,Vfe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const s=[];let a=0,o=0,l=0,c;for(let y=0;y<i.length;y++){let b=i[y];if(a===0&&o===0){if(b===u3){s.push(i.slice(l,y)),l=y+qfe;continue}if(b==="/"){c=y;continue}}b==="["?a++:b==="]"?a--:b==="("?o++:b===")"&&o--}const u=s.length===0?i:i.substring(l),d=Hfe(u),h=d!==u,m=c&&c>l?c-l:void 0;return{modifiers:s,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:m}};if(t){const i=t+u3,s=r;r=a=>a.startsWith(i)?s(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},Hfe=e=>e.endsWith(c3)?e.substring(0,e.length-1):e.startsWith(c3)?e.substring(1):e,Wfe=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(a=>{a[0]==="["||t[a]?(i.push(...s.sort(),a),s=[]):s.push(a)}),i.push(...s.sort()),i}},Gfe=e=>({cache:Ufe(e.cacheSize),parseClassName:Vfe(e),sortModifiers:Wfe(e),...Lfe(e)}),Kfe=/\s+/,Yfe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=t,a=[],o=e.trim().split(Kfe);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{isExternal:d,modifiers:h,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:b}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let v=!!b,x=r(v?y.substring(0,b):y);if(!x){if(!v){l=u+(l.length>0?" "+l:l);continue}if(x=r(y),!x){l=u+(l.length>0?" "+l:l);continue}v=!1}const _=s(h).join(":"),S=m?_+c3:_,C=S+x;if(a.includes(C))continue;a.push(C);const E=i(x,v);for(let A=0;A<E.length;++A){const R=E[A];a.push(S+R)}l=u+(l.length>0?" "+l:l)}return l};function Zfe(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=dH(t))&&(r&&(r+=" "),r+=n);return r}const dH=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=dH(e[r]))&&(n&&(n+=" "),n+=t);return n};function Xfe(e,...t){let n,r,i,s=a;function a(l){const c=t.reduce((u,d)=>d(u),e());return n=Gfe(c),r=n.cache.get,i=n.cache.set,s=o,o(l)}function o(l){const c=r(l);if(c)return c;const u=Yfe(l,n);return i(l,u),u}return function(){return s(Zfe.apply(null,arguments))}}const As=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},fH=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,hH=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Jfe=/^\d+\/\d+$/,Qfe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ehe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,the=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nhe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rhe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fg=e=>Jfe.test(e),Ar=e=>!!e&&!Number.isNaN(Number(e)),_f=e=>!!e&&Number.isInteger(Number(e)),jR=e=>e.endsWith("%")&&Ar(e.slice(0,-1)),Gu=e=>Qfe.test(e),ihe=()=>!0,she=e=>ehe.test(e)&&!the.test(e),pH=()=>!1,ahe=e=>nhe.test(e),ohe=e=>rhe.test(e),lhe=e=>!bn(e)&&!vn(e),che=e=>G0(e,yH,pH),bn=e=>fH.test(e),Xh=e=>G0(e,bH,she),PR=e=>G0(e,phe,Ar),OL=e=>G0(e,mH,pH),uhe=e=>G0(e,gH,ohe),L_=e=>G0(e,vH,ahe),vn=e=>hH.test(e),Wb=e=>K0(e,bH),dhe=e=>K0(e,mhe),DL=e=>K0(e,mH),fhe=e=>K0(e,yH),hhe=e=>K0(e,gH),B_=e=>K0(e,vH,!0),G0=(e,t,n)=>{const r=fH.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},K0=(e,t,n=!1)=>{const r=hH.exec(e);return r?r[1]?t(r[1]):n:!1},mH=e=>e==="position"||e==="percentage",gH=e=>e==="image"||e==="url",yH=e=>e==="length"||e==="size"||e==="bg-size",bH=e=>e==="length",phe=e=>e==="number",mhe=e=>e==="family-name",vH=e=>e==="shadow",ghe=()=>{const e=As("color"),t=As("font"),n=As("text"),r=As("font-weight"),i=As("tracking"),s=As("leading"),a=As("breakpoint"),o=As("container"),l=As("spacing"),c=As("radius"),u=As("shadow"),d=As("inset-shadow"),h=As("text-shadow"),m=As("drop-shadow"),y=As("blur"),b=As("perspective"),v=As("aspect"),x=As("ease"),_=As("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...C(),vn,bn],A=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],N=()=>[vn,bn,l],M=()=>[fg,"full","auto",...N()],P=()=>[_f,"none","subgrid",vn,bn],L=()=>["auto",{span:["full",_f,vn,bn]},_f,vn,bn],O=()=>[_f,"auto",vn,bn],V=()=>["auto","min","max","fr",vn,bn],F=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],U=()=>["auto",...N()],G=()=>[fg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],$=()=>[e,vn,bn],ne=()=>[...C(),DL,OL,{position:[vn,bn]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],te=()=>["auto","cover","contain",fhe,che,{size:[vn,bn]}],ee=()=>[jR,Wb,Xh],se=()=>["","none","full",c,vn,bn],he=()=>["",Ar,Wb,Xh],ce=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],je=()=>[Ar,jR,DL,OL],Ne=()=>["","none",y,vn,bn],Ce=()=>["none",Ar,vn,bn],Ue=()=>["none",Ar,vn,bn],et=()=>[Ar,vn,bn],qe=()=>[fg,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Gu],breakpoint:[Gu],color:[ihe],container:[Gu],"drop-shadow":[Gu],ease:["in","out","in-out"],font:[lhe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Gu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Gu],shadow:[Gu],spacing:["px",Ar],text:[Gu],"text-shadow":[Gu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",fg,bn,vn,v]}],container:["container"],columns:[{columns:[Ar,bn,vn,o]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[_f,"auto",vn,bn]}],basis:[{basis:[fg,"full","auto",o,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ar,fg,"auto","initial","none",bn]}],grow:[{grow:["",Ar,vn,bn]}],shrink:[{shrink:["",Ar,vn,bn]}],order:[{order:[_f,"first","last","none",vn,bn]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...F(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...F()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":F()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:U()}],mx:[{mx:U()}],my:[{my:U()}],ms:[{ms:U()}],me:[{me:U()}],mt:[{mt:U()}],mr:[{mr:U()}],mb:[{mb:U()}],ml:[{ml:U()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[o,"screen",...G()]}],"min-w":[{"min-w":[o,"screen","none",...G()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...G()]}],h:[{h:["screen",...G()]}],"min-h":[{"min-h":["screen","none",...G()]}],"max-h":[{"max-h":["screen",...G()]}],"font-size":[{text:["base",n,Wb,Xh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,vn,PR]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",jR,bn]}],"font-family":[{font:[dhe,bn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,vn,bn]}],"line-clamp":[{"line-clamp":[Ar,"none",vn,PR]}],leading:[{leading:[s,...N()]}],"list-image":[{"list-image":["none",vn,bn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",vn,bn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ar,"from-font","auto",vn,Xh]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[Ar,"auto",vn,bn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vn,bn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vn,bn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ne()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:te()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_f,vn,bn],radial:["",vn,bn],conic:[_f,vn,bn]},hhe,uhe]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:he()}],"border-w-x":[{"border-x":he()}],"border-w-y":[{"border-y":he()}],"border-w-s":[{"border-s":he()}],"border-w-e":[{"border-e":he()}],"border-w-t":[{"border-t":he()}],"border-w-r":[{"border-r":he()}],"border-w-b":[{"border-b":he()}],"border-w-l":[{"border-l":he()}],"divide-x":[{"divide-x":he()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":he()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ce(),"hidden","none"]}],"divide-style":[{divide:[...ce(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ar,vn,bn]}],"outline-w":[{outline:["",Ar,Wb,Xh]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",u,B_,L_]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",d,B_,L_]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:he()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[Ar,Xh]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":he()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",h,B_,L_]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[Ar,vn,bn]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ar]}],"mask-image-linear-from-pos":[{"mask-linear-from":je()}],"mask-image-linear-to-pos":[{"mask-linear-to":je()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":je()}],"mask-image-t-to-pos":[{"mask-t-to":je()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":je()}],"mask-image-r-to-pos":[{"mask-r-to":je()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":je()}],"mask-image-b-to-pos":[{"mask-b-to":je()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":je()}],"mask-image-l-to-pos":[{"mask-l-to":je()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":je()}],"mask-image-x-to-pos":[{"mask-x-to":je()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":je()}],"mask-image-y-to-pos":[{"mask-y-to":je()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[vn,bn]}],"mask-image-radial-from-pos":[{"mask-radial-from":je()}],"mask-image-radial-to-pos":[{"mask-radial-to":je()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Ar]}],"mask-image-conic-from-pos":[{"mask-conic-from":je()}],"mask-image-conic-to-pos":[{"mask-conic-to":je()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ne()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:te()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",vn,bn]}],filter:[{filter:["","none",vn,bn]}],blur:[{blur:Ne()}],brightness:[{brightness:[Ar,vn,bn]}],contrast:[{contrast:[Ar,vn,bn]}],"drop-shadow":[{"drop-shadow":["","none",m,B_,L_]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",Ar,vn,bn]}],"hue-rotate":[{"hue-rotate":[Ar,vn,bn]}],invert:[{invert:["",Ar,vn,bn]}],saturate:[{saturate:[Ar,vn,bn]}],sepia:[{sepia:["",Ar,vn,bn]}],"backdrop-filter":[{"backdrop-filter":["","none",vn,bn]}],"backdrop-blur":[{"backdrop-blur":Ne()}],"backdrop-brightness":[{"backdrop-brightness":[Ar,vn,bn]}],"backdrop-contrast":[{"backdrop-contrast":[Ar,vn,bn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ar,vn,bn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ar,vn,bn]}],"backdrop-invert":[{"backdrop-invert":["",Ar,vn,bn]}],"backdrop-opacity":[{"backdrop-opacity":[Ar,vn,bn]}],"backdrop-saturate":[{"backdrop-saturate":[Ar,vn,bn]}],"backdrop-sepia":[{"backdrop-sepia":["",Ar,vn,bn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",vn,bn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ar,"initial",vn,bn]}],ease:[{ease:["linear","initial",x,vn,bn]}],delay:[{delay:[Ar,vn,bn]}],animate:[{animate:["none",_,vn,bn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,vn,bn]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:Ce()}],"rotate-x":[{"rotate-x":Ce()}],"rotate-y":[{"rotate-y":Ce()}],"rotate-z":[{"rotate-z":Ce()}],scale:[{scale:Ue()}],"scale-x":[{"scale-x":Ue()}],"scale-y":[{"scale-y":Ue()}],"scale-z":[{"scale-z":Ue()}],"scale-3d":["scale-3d"],skew:[{skew:et()}],"skew-x":[{"skew-x":et()}],"skew-y":[{"skew-y":et()}],transform:[{transform:[vn,bn,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:qe()}],"translate-x":[{"translate-x":qe()}],"translate-y":[{"translate-y":qe()}],"translate-z":[{"translate-z":qe()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vn,bn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vn,bn]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[Ar,Wb,Xh,PR]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},yhe=Xfe(ghe);function ft(...e){return yhe(cH(e))}const bhe=Qj("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Tt({className:e,variant:t,size:n,asChild:r=!1,...i}){const s=r?oH:"button";return p.jsx(s,{"data-slot":"button",className:ft(bhe({variant:t,size:n,className:e})),...i})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vhe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xhe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),FL=e=>{const t=xhe(e);return t.charAt(0).toUpperCase()+t.slice(1)},xH=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var whe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _he=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>T.createElement("svg",{ref:l,...whe,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:xH("lucide",i),...o},[...a.map(([c,u])=>T.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=(e,t)=>{const n=T.forwardRef(({className:r,...i},s)=>T.createElement(_he,{ref:s,iconNode:t,className:xH(`lucide-${vhe(FL(e))}`,`lucide-${e}`,r),...i}));return n.displayName=FL(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const She=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],wH=qt("archive",She);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Che=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],_H=qt("arrow-down",Che);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const khe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ehe=qt("arrow-right",khe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const The=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Ahe=qt("arrow-up",The);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rhe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],Ihe=qt("ban",Rhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nhe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],SH=qt("bot",Nhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mhe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],fh=qt("brain-circuit",Mhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jhe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],LL=qt("brain",jhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ka=qt("check",Phe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ohe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yu=qt("chevron-down",Ohe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dhe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],CH=qt("chevron-right",Dhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fhe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],hh=qt("chevron-up",Fhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lhe=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Mk=qt("chevrons-up-down",Lhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bhe=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],$he=qt("chevrons-up",Bhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zhe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],lc=qt("circle-alert",zhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uhe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jk=qt("circle-check",Uhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qhe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],Vhe=qt("circle-stop",qhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hhe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Whe=qt("circle",Hhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ghe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Pk=qt("clipboard",Ghe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Khe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Yhe=qt("clock",Khe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zhe=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],kH=qt("cloud-upload",Zhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xhe=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],EH=qt("code",Xhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jhe=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],Qhe=qt("cog",Jhe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const epe=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],tpe=qt("coins",epe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const npe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],rpe=qt("copy",npe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ipe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],spe=qt("dollar-sign",ipe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ape=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Jc=qt("download",ape);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ope=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],lpe=qt("ellipsis-vertical",ope);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cpe=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],upe=qt("file-archive",cpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dpe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],fpe=qt("file-down",dpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hpe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],ppe=qt("file-json",hpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mpe=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],gpe=qt("file-question",mpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ype=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],bpe=qt("file-text",ype);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vpe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],xpe=qt("file-up",vpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wpe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],TH=qt("file",wpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _pe=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],AH=qt("folder-git",_pe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Spe=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],RH=qt("folder-plus",Spe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpe=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],BL=qt("folder-tree",Cpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kpe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],Epe=qt("folder-up",kpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tpe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Uf=qt("folder",Tpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ape=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],tP=qt("funnel",Ape);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rpe=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],cc=qt("git-branch",Rpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ipe=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],IH=qt("git-commit-horizontal",Ipe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Npe=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],NH=qt("git-merge",Npe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mpe=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],nP=qt("git-pull-request",Mpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Ppe=qt("github",jpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ope=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$L=qt("globe",Ope);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Fpe=qt("grip-vertical",Dpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lpe=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],rP=qt("hard-drive",Lpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bpe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],$pe=qt("history",Bpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zpe=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Upe=qt("house",zpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qpe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Mp=qt("image",qpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vpe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],iP=qt("info",Vpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hpe=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Qv=qt("key",Hpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wpe=[["path",{d:"m12 8 6-3-6-3v10",key:"mvpnpy"}],["path",{d:"m8 11.99-5.5 3.14a1 1 0 0 0 0 1.74l8.5 4.86a2 2 0 0 0 2 0l8.5-4.86a1 1 0 0 0 0-1.74L16 12",key:"ek95tt"}],["path",{d:"m6.49 12.85 11.02 6.3",key:"1kt42w"}],["path",{d:"M17.51 12.85 6.5 19.15",key:"v55bdg"}]],MH=qt("land-plot",Wpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gpe=[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M7 12H3",key:"13ou7f"}],["path",{d:"M7 18H3",key:"1sijw9"}],["path",{d:"M12 18a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L11 14",key:"qth677"}],["path",{d:"M11 10v4h4",key:"172dkj"}]],Kpe=qt("list-restart",Gpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ype=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yn=qt("loader-circle",Ype);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zpe=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Xpe=qt("menu",Zpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jpe=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],Qpe=qt("message-square-plus",Jpe);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eme=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]],zL=qt("message-square-text",eme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tme=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],d3=qt("message-square",tme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nme=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],rme=qt("music",nme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ime=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],jH=qt("notebook-pen",ime);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sme=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],b2=qt("palette",sme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ame=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],ome=qt("panel-left-close",ame);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lme=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],cme=qt("panel-right-close",lme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ume=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],sP=qt("paperclip",ume);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dme=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],fme=qt("pause",dme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hme=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xw=qt("pen",hme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pme=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],mme=qt("play",pme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gme=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Y0=qt("plus",gme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yme=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],UL=qt("puzzle",yme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bme=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jp=qt("refresh-cw",bme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vme=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],xme=qt("rocket",vme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wme=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],aP=qt("rotate-ccw",wme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _me=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ph=qt("save",_me);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sme=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Aa=qt("search",Sme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cme=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],kme=qt("send-horizontal",Cme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eme=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],v2=qt("server",Eme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tme=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],f3=qt("settings",Tme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ame=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],qL=qt("shield-alert",Ame);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rme=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Ime=qt("sliders-horizontal",Rme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nme=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Mme=qt("smile",Nme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jme=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],PH=qt("sparkles",jme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pme=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]],VL=qt("sparkle",Pme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ome=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],$S=qt("square-pen",Ome);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dme=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Fme=qt("square",Dme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lme=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Bme=qt("star",Lme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $me=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],h3=qt("tags",$me);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zme=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],Ume=qt("text",zme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qme=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ho=qt("trash-2",qme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vme=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oP=qt("triangle-alert",Vme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hme=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],OH=qt("upload",Hme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wme=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Gme=qt("user",Wme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kme=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],HL=qt("users",Kme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yme=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Zme=qt("video",Yme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xme=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Pp=qt("wrench",Xme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jme=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ya=qt("x",Jme);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qme=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ege=qt("zap",Qme),WL=({controls:e,area:t,className:n})=>{const r=e.filter(i=>t==="trigger"?!!i.triggerRenderer:!!i.renderer);return r.length===0?null:p.jsx("div",{className:ft(n),children:r.map(i=>{var a,o;const s=t==="trigger"?(a=i.triggerRenderer)==null?void 0:a.call(i):(o=i.renderer)==null?void 0:o.call(i);return s?p.jsx(lt.Fragment,{children:s},i.id):null})})},GL=e=>{let t;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=u??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(m=>m(t,h))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,i,o);return o},tge=e=>e?GL(e):GL,nge=e=>e;function rge(e,t=nge){const n=lt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return lt.useDebugValue(n),n}const KL=e=>{const t=tge(e),n=r=>rge(t,r);return Object.assign(n,t),n},Il=e=>e?KL(e):KL;var DH=Symbol.for("immer-nothing"),YL=Symbol.for("immer-draftable"),ii=Symbol.for("immer-state");function Sl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var u0=Object.getPrototypeOf;function d0(e){return!!e&&!!e[ii]}function yd(e){var t;return e?FH(e)||Array.isArray(e)||!!e[YL]||!!((t=e.constructor)!=null&&t[YL])||Dk(e)||Fk(e):!1}var ige=Object.prototype.constructor.toString();function FH(e){if(!e||typeof e!="object")return!1;const t=u0(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===ige}function ex(e,t){Ok(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Ok(e){const t=e[ii];return t?t.type_:Array.isArray(e)?1:Dk(e)?2:Fk(e)?3:0}function p3(e,t){return Ok(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function LH(e,t,n){const r=Ok(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function sge(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Dk(e){return e instanceof Map}function Fk(e){return e instanceof Set}function Hs(e){return e.copy_||e.base_}function m3(e,t){if(Dk(e))return new Map(e);if(Fk(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=FH(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ii];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(u0(e),r)}else{const r=u0(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function lP(e,t=!1){return Lk(e)||d0(e)||!yd(e)||(Ok(e)>1&&(e.set=e.add=e.clear=e.delete=age),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>lP(r,!0))),e}function age(){Sl(2)}function Lk(e){return Object.isFrozen(e)}var g3={};function Op(e){const t=g3[e];return t||Sl(0,e),t}function oge(e,t){g3[e]||(g3[e]=t)}var tx;function x2(){return tx}function lge(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ZL(e,t){t&&(Op("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function y3(e){b3(e),e.drafts_.forEach(cge),e.drafts_=null}function b3(e){e===tx&&(tx=e.parent_)}function XL(e){return tx=lge(tx,e)}function cge(e){const t=e[ii];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function JL(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ii].modified_&&(y3(t),Sl(4)),yd(e)&&(e=w2(t,e),t.parent_||_2(t,e)),t.patches_&&Op("Patches").generateReplacementPatches_(n[ii].base_,e,t.patches_,t.inversePatches_)):e=w2(t,n,[]),y3(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==DH?e:void 0}function w2(e,t,n){if(Lk(t))return t;const r=t[ii];if(!r)return ex(t,(i,s)=>QL(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return _2(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,a=!1;r.type_===3&&(s=new Set(i),i.clear(),a=!0),ex(s,(o,l)=>QL(e,r,i,o,l,n,a)),_2(e,i,!1),n&&e.patches_&&Op("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function QL(e,t,n,r,i,s,a){if(d0(i)){const o=s&&t&&t.type_!==3&&!p3(t.assigned_,r)?s.concat(r):void 0,l=w2(e,i,o);if(LH(n,r,l),d0(l))e.canAutoFreeze_=!1;else return}else a&&n.add(i);if(yd(i)&&!Lk(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;w2(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&_2(e,i)}}function _2(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lP(t,n)}function uge(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:x2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=cP;n&&(i=[r],s=nx);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var cP={get(e,t){if(t===ii)return e;const n=Hs(e);if(!p3(n,t))return dge(e,n,t);const r=n[t];return e.finalized_||!yd(r)?r:r===OR(e.base_,t)?(DR(e),e.copy_[t]=rx(r,e)):r},has(e,t){return t in Hs(e)},ownKeys(e){return Reflect.ownKeys(Hs(e))},set(e,t,n){const r=BH(Hs(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=OR(Hs(e),t),s=i==null?void 0:i[ii];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(sge(n,i)&&(n!==void 0||p3(e.base_,t)))return!0;DR(e),nd(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return OR(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,DR(e),nd(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Hs(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Sl(11)},getPrototypeOf(e){return u0(e.base_)},setPrototypeOf(){Sl(12)}},nx={};ex(cP,(e,t)=>{nx[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});nx.deleteProperty=function(e,t){return nx.set.call(this,e,t,void 0)};nx.set=function(e,t,n){return cP.set.call(this,e[0],t,n,e[0])};function OR(e,t){const n=e[ii];return(n?Hs(n):e)[t]}function dge(e,t,n){var i;const r=BH(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function BH(e,t){if(!(t in e))return;let n=u0(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=u0(n)}}function nd(e){e.modified_||(e.modified_=!0,e.parent_&&nd(e.parent_))}function DR(e){e.copy_||(e.copy_=m3(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var fge=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const a=this;return function(l=s,...c){return a.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Sl(6),r!==void 0&&typeof r!="function"&&Sl(7);let i;if(yd(t)){const s=XL(this),a=rx(t,void 0);let o=!0;try{i=n(a),o=!1}finally{o?y3(s):b3(s)}return ZL(s,r),JL(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===DH&&(i=void 0),this.autoFreeze_&&lP(i,!0),r){const s=[],a=[];Op("Patches").generateReplacementPatches_(t,i,s,a),r(s,a)}return i}else Sl(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(a,...o)=>this.produceWithPatches(a,l=>t(l,...o));let r,i;return[this.produce(t,n,(a,o)=>{r=a,i=o}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){yd(e)||Sl(8),d0(e)&&(e=hge(e));const t=XL(this),n=rx(e,void 0);return n[ii].isManual_=!0,b3(t),n}finishDraft(e,t){const n=e&&e[ii];(!n||!n.isManual_)&&Sl(9);const{scope_:r}=n;return ZL(r,t),JL(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Op("Patches").applyPatches_;return d0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function rx(e,t){const n=Dk(e)?Op("MapSet").proxyMap_(e,t):Fk(e)?Op("MapSet").proxySet_(e,t):uge(e,t);return(t?t.scope_:x2()).drafts_.push(n),n}function hge(e){return d0(e)||Sl(10,e),$H(e)}function $H(e){if(!yd(e)||Lk(e))return e;const t=e[ii];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=m3(e,t.scope_.immer_.useStrictShallowCopy_)}else n=m3(e,!0);return ex(n,(r,i)=>{LH(n,r,$H(i))}),t&&(t.finalized_=!1),n}function pge(){class e extends Map{constructor(l,c){super(),this[ii]={type_:2,parent_:c,scope_:c?c.scope_:x2(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Hs(this[ii]).size}has(l){return Hs(this[ii]).has(l)}set(l,c){const u=this[ii];return a(u),(!Hs(u).has(l)||Hs(u).get(l)!==c)&&(n(u),nd(u),u.assigned_.set(l,!0),u.copy_.set(l,c),u.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const c=this[ii];return a(c),n(c),nd(c),c.base_.has(l)?c.assigned_.set(l,!1):c.assigned_.delete(l),c.copy_.delete(l),!0}clear(){const l=this[ii];a(l),Hs(l).size&&(n(l),nd(l),l.assigned_=new Map,ex(l.base_,c=>{l.assigned_.set(c,!1)}),l.copy_.clear())}forEach(l,c){const u=this[ii];Hs(u).forEach((d,h,m)=>{l.call(c,this.get(h),h,this)})}get(l){const c=this[ii];a(c);const u=Hs(c).get(l);if(c.finalized_||!yd(u)||u!==c.base_.get(l))return u;const d=rx(u,c);return n(c),c.copy_.set(l,d),d}keys(){return Hs(this[ii]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=l.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=l.next();if(c.done)return c;const u=this.get(c.value);return{done:!1,value:[c.value,u]}}}}[Symbol.iterator](){return this.entries()}}function t(o,l){return new e(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class r extends Set{constructor(l,c){super(),this[ii]={type_:3,parent_:c,scope_:c?c.scope_:x2(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Hs(this[ii]).size}has(l){const c=this[ii];return a(c),c.copy_?!!(c.copy_.has(l)||c.drafts_.has(l)&&c.copy_.has(c.drafts_.get(l))):c.base_.has(l)}add(l){const c=this[ii];return a(c),this.has(l)||(s(c),nd(c),c.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const c=this[ii];return a(c),s(c),nd(c),c.copy_.delete(l)||(c.drafts_.has(l)?c.copy_.delete(c.drafts_.get(l)):!1)}clear(){const l=this[ii];a(l),Hs(l).size&&(s(l),nd(l),l.copy_.clear())}values(){const l=this[ii];return a(l),s(l),l.copy_.values()}entries(){const l=this[ii];return a(l),s(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,c){const u=this.values();let d=u.next();for(;!d.done;)l.call(c,d.value,d.value,this),d=u.next()}}function i(o,l){return new r(o,l)}function s(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(yd(l)){const c=rx(l,o);o.drafts_.set(l,c),o.copy_.add(c)}else o.copy_.add(l)}))}function a(o){o.revoked_&&Sl(3,JSON.stringify(Hs(o)))}oge("MapSet",{proxyMap_:t,proxySet_:i})}var Yo=new fge,mge=Yo.produce;Yo.produceWithPatches.bind(Yo);Yo.setAutoFreeze.bind(Yo);Yo.setUseStrictShallowCopy.bind(Yo);Yo.applyPatches.bind(Yo);Yo.createDraft.bind(Yo);Yo.finishDraft.bind(Yo);const gge=e=>(t,n,r)=>(r.setState=(i,s,...a)=>{const o=typeof i=="function"?mge(i):i;return t(o,s,...a)},e(r.setState,n,r)),Nl=gge;function yge(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const Le=yge(),Dr={promptControlsChanged:"control.registry.prompt.controls.changed",chatControlsChanged:"control.registry.chat.controls.changed",canvasControlsChanged:"control.registry.canvas.controls.changed",middlewareChanged:"control.registry.middleware.changed",toolsChanged:"control.registry.tools.changed",modalProvidersChanged:"control.registry.modal.providers.changed",registerPromptControlRequest:"control.registry.register.prompt.control.request",unregisterPromptControlRequest:"control.registry.unregister.prompt.control.request",registerChatControlRequest:"control.registry.register.chat.control.request",unregisterChatControlRequest:"control.registry.unregister.chat.control.request",registerCanvasControlRequest:"control.registry.register.canvas.control.request",unregisterCanvasControlRequest:"control.registry.unregister.canvas.control.request",registerMiddlewareRequest:"control.registry.register.middleware.request",unregisterMiddlewareRequest:"control.registry.unregister.middleware.request",registerToolRequest:"control.registry.register.tool.request",unregisterToolRequest:"control.registry.unregister.tool.request",registerModalProviderRequest:"control.registry.register.modal.provider.request",unregisterModalProviderRequest:"control.registry.unregister.modal.provider.request"},Qo=Il(Nl((e,t)=>({promptControls:{},chatControls:{},canvasControls:{},middlewareRegistry:{},tools:{},modalProviders:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),Le.emit(Dr.promptControlsChanged,{controls:t().promptControls}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)}),Le.emit(Dr.promptControlsChanged,{controls:t().promptControls})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),Le.emit(Dr.chatControlsChanged,{controls:t().chatControls}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)}),Le.emit(Dr.chatControlsChanged,{controls:t().chatControls})},registerCanvasControl:n=>(e(r=>{r.canvasControls[n.id]&&console.warn(`ControlRegistryStore: CanvasControl with ID "${n.id}" already registered. Overwriting.`),r.canvasControls[n.id]=n}),Le.emit(Dr.canvasControlsChanged,{controls:t().canvasControls}),()=>t().unregisterCanvasControl(n.id)),unregisterCanvasControl:n=>{e(r=>{r.canvasControls[n]?delete r.canvasControls[n]:console.warn(`ControlRegistryStore: CanvasControl with ID "${n}" not found for unregistration.`)}),Le.emit(Dr.canvasControlsChanged,{controls:t().canvasControls})},registerMiddleware:(n,r,i,s=0)=>{const a={modId:r,callback:i,order:s};return e(o=>{o.middlewareRegistry[n]||(o.middlewareRegistry[n]=[]),o.middlewareRegistry[n].push(a),o.middlewareRegistry[n].sort((l,c)=>(l.order??0)-(c.order??0))}),Le.emit(Dr.middlewareChanged,{middleware:t().middlewareRegistry}),()=>t().unregisterMiddleware(n,r,i)},unregisterMiddleware:(n,r,i)=>{e(s=>{var a;s.middlewareRegistry[n]?(s.middlewareRegistry[n]=s.middlewareRegistry[n].filter(o=>!(o.modId===r&&o.callback===i)),((a=s.middlewareRegistry[n])==null?void 0:a.length)===0&&delete s.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)}),Le.emit(Dr.middlewareChanged,{middleware:t().middlewareRegistry})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((i,s)=>(i.order??0)-(s.order??0)))},registerTool:(n,r,i,s)=>(e(a=>{a.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${a.tools[r].modId}". Overwriting with registration from mod "${n}".`),a.tools[r]={definition:i,implementation:s,modId:n}}),Le.emit(Dr.toolsChanged,{tools:t().tools}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)}),Le.emit(Dr.toolsChanged,{tools:t().tools})},getRegisteredTools:()=>Object.freeze({...t().tools}),registerModalProvider:(n,r)=>(e(i=>{i.modalProviders[n]&&console.warn(`ControlRegistryStore: ModalProvider with ID "${n}" already registered. Overwriting.`),i.modalProviders[n]=r}),Le.emit(Dr.modalProvidersChanged,{providers:t().modalProviders}),()=>t().unregisterModalProvider(n)),unregisterModalProvider:n=>{e(r=>{r.modalProviders[n]?delete r.modalProviders[n]:console.warn(`ControlRegistryStore: ModalProvider with ID "${n}" not found for unregistration.`)}),Le.emit(Dr.modalProvidersChanged,{providers:t().modalProviders})},getRegisteredActionHandlers:()=>{const n="controlRegistryStore",r=t();return[{eventName:Dr.registerPromptControlRequest,handler:i=>{r.registerPromptControl(i.control)},storeId:n},{eventName:Dr.unregisterPromptControlRequest,handler:i=>{r.unregisterPromptControl(i.id)},storeId:n},{eventName:Dr.registerChatControlRequest,handler:i=>{r.registerChatControl(i.control)},storeId:n},{eventName:Dr.unregisterChatControlRequest,handler:i=>{r.unregisterChatControl(i.id)},storeId:n},{eventName:Dr.registerCanvasControlRequest,handler:i=>{r.registerCanvasControl(i.control)},storeId:n},{eventName:Dr.unregisterCanvasControlRequest,handler:i=>{r.unregisterCanvasControl(i.id)},storeId:n},{eventName:Dr.registerMiddlewareRequest,handler:i=>{r.registerMiddleware(i.hookName,i.modId,i.callback,i.order)},storeId:n},{eventName:Dr.unregisterMiddlewareRequest,handler:i=>{r.unregisterMiddleware(i.hookName,i.modId,i.callback)},storeId:n},{eventName:Dr.registerToolRequest,handler:i=>{r.registerTool(i.modId,i.toolName,i.definition,i.implementation)},storeId:n},{eventName:Dr.unregisterToolRequest,handler:i=>{r.unregisterTool(i.toolName)},storeId:n},{eventName:Dr.registerModalProviderRequest,handler:i=>{r.registerModalProvider(i.modalId,i.provider)},storeId:n},{eventName:Dr.unregisterModalProviderRequest,handler:i=>{r.unregisterModalProvider(i.modalId)},storeId:n}]}})));var zS={exports:{}},bge=zS.exports,eB;function vge(){return eB||(eB=1,function(e,t){(function(n,r){e.exports=r()})(bge,function(){var n=function(I,B){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ae){Q.__proto__=ae}||function(Q,ae){for(var fe in ae)Object.prototype.hasOwnProperty.call(ae,fe)&&(Q[fe]=ae[fe])})(I,B)},r=function(){return(r=Object.assign||function(I){for(var B,Q=1,ae=arguments.length;Q<ae;Q++)for(var fe in B=arguments[Q])Object.prototype.hasOwnProperty.call(B,fe)&&(I[fe]=B[fe]);return I}).apply(this,arguments)};function i(I,B,Q){for(var ae,fe=0,Se=B.length;fe<Se;fe++)!ae&&fe in B||((ae=ae||Array.prototype.slice.call(B,0,fe))[fe]=B[fe]);return I.concat(ae||Array.prototype.slice.call(B))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:mp,a=Object.keys,o=Array.isArray;function l(I,B){return typeof B!="object"||a(B).forEach(function(Q){I[Q]=B[Q]}),I}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var c=Object.getPrototypeOf,u={}.hasOwnProperty;function d(I,B){return u.call(I,B)}function h(I,B){typeof B=="function"&&(B=B(c(I))),(typeof Reflect>"u"?a:Reflect.ownKeys)(B).forEach(function(Q){y(I,Q,B[Q])})}var m=Object.defineProperty;function y(I,B,Q,ae){m(I,B,l(Q&&d(Q,"get")&&typeof Q.get=="function"?{get:Q.get,set:Q.set,configurable:!0}:{value:Q,configurable:!0,writable:!0},ae))}function b(I){return{from:function(B){return I.prototype=Object.create(B.prototype),y(I.prototype,"constructor",I),{extend:h.bind(null,I.prototype)}}}}var v=Object.getOwnPropertyDescriptor,x=[].slice;function _(I,B,Q){return x.call(I,B,Q)}function S(I,B){return B(I)}function C(I){if(!I)throw new Error("Assertion Failed")}function E(I){s.setImmediate?setImmediate(I):setTimeout(I,0)}function A(I,B){if(typeof B=="string"&&d(I,B))return I[B];if(!B)return I;if(typeof B!="string"){for(var Q=[],ae=0,fe=B.length;ae<fe;++ae){var Se=A(I,B[ae]);Q.push(Se)}return Q}var Fe=B.indexOf(".");if(Fe!==-1){var He=I[B.substr(0,Fe)];return He==null?void 0:A(He,B.substr(Fe+1))}}function R(I,B,Q){if(I&&B!==void 0&&!("isFrozen"in Object&&Object.isFrozen(I)))if(typeof B!="string"&&"length"in B){C(typeof Q!="string"&&"length"in Q);for(var ae=0,fe=B.length;ae<fe;++ae)R(I,B[ae],Q[ae])}else{var Se,Fe,He=B.indexOf(".");He!==-1?(Se=B.substr(0,He),(Fe=B.substr(He+1))===""?Q===void 0?o(I)&&!isNaN(parseInt(Se))?I.splice(Se,1):delete I[Se]:I[Se]=Q:R(He=!(He=I[Se])||!d(I,Se)?I[Se]={}:He,Fe,Q)):Q===void 0?o(I)&&!isNaN(parseInt(B))?I.splice(B,1):delete I[B]:I[B]=Q}}function N(I){var B,Q={};for(B in I)d(I,B)&&(Q[B]=I[B]);return Q}var M=[].concat;function P(I){return M.apply([],I)}var Ot="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(P([8,16,32,64].map(function(I){return["Int","Uint","Float"].map(function(B){return B+I+"Array"})}))).filter(function(I){return s[I]}),L=new Set(Ot.map(function(I){return s[I]})),O=null;function V(I){return O=new WeakMap,I=function B(Q){if(!Q||typeof Q!="object")return Q;var ae=O.get(Q);if(ae)return ae;if(o(Q)){ae=[],O.set(Q,ae);for(var fe=0,Se=Q.length;fe<Se;++fe)ae.push(B(Q[fe]))}else if(L.has(Q.constructor))ae=Q;else{var Fe,He=c(Q);for(Fe in ae=He===Object.prototype?{}:Object.create(He),O.set(Q,ae),Q)d(Q,Fe)&&(ae[Fe]=B(Q[Fe]))}return ae}(I),O=null,I}var F={}.toString;function J(I){return F.call(I).slice(8,-1)}var U=typeof Symbol<"u"?Symbol.iterator:"@@iterator",G=typeof U=="symbol"?function(I){var B;return I!=null&&(B=I[U])&&B.apply(I)}:function(){return null};function $(I,B){return B=I.indexOf(B),0<=B&&I.splice(B,1),0<=B}var ne={};function H(I){var B,Q,ae,fe;if(arguments.length===1){if(o(I))return I.slice();if(this===ne&&typeof I=="string")return[I];if(fe=G(I)){for(Q=[];!(ae=fe.next()).done;)Q.push(ae.value);return Q}if(I==null)return[I];if(typeof(B=I.length)!="number")return[I];for(Q=new Array(B);B--;)Q[B]=I[B];return Q}for(B=arguments.length,Q=new Array(B);B--;)Q[B]=arguments[B];return Q}var te=typeof Symbol<"u"?function(I){return I[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ht=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Fa=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ht),ee={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function se(I,B){this.name=I,this.message=B}function he(I,B){return I+". Errors: "+Object.keys(B).map(function(Q){return B[Q].toString()}).filter(function(Q,ae,fe){return fe.indexOf(Q)===ae}).join(`
`)}function ce(I,B,Q,ae){this.failures=B,this.failedKeys=ae,this.successCount=Q,this.message=he(I,B)}function Me(I,B){this.name="BulkError",this.failures=Object.keys(B).map(function(Q){return B[Q]}),this.failuresByPos=B,this.message=he(I,this.failures)}b(se).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ce).from(se),b(Me).from(se);var je=Fa.reduce(function(I,B){return I[B]=B+"Error",I},{}),Ne=se,Ce=Fa.reduce(function(I,B){var Q=B+"Error";function ae(fe,Se){this.name=Q,fe?typeof fe=="string"?(this.message="".concat(fe).concat(Se?`
 `+Se:""),this.inner=Se||null):typeof fe=="object"&&(this.message="".concat(fe.name," ").concat(fe.message),this.inner=fe):(this.message=ee[B]||Q,this.inner=null)}return b(ae).from(Ne),I[B]=ae,I},{});Ce.Syntax=SyntaxError,Ce.Type=TypeError,Ce.Range=RangeError;var Ue=ht.reduce(function(I,B){return I[B+"Error"]=Ce[B],I},{}),et=Fa.reduce(function(I,B){return["Syntax","Type","Range"].indexOf(B)===-1&&(I[B+"Error"]=Ce[B]),I},{});function qe(){}function Re(I){return I}function K(I,B){return I==null||I===Re?B:function(Q){return B(I(Q))}}function ge(I,B){return function(){I.apply(this,arguments),B.apply(this,arguments)}}function Ae(I,B){return I===qe?B:function(){var Q=I.apply(this,arguments);Q!==void 0&&(arguments[0]=Q);var ae=this.onsuccess,fe=this.onerror;this.onsuccess=null,this.onerror=null;var Se=B.apply(this,arguments);return ae&&(this.onsuccess=this.onsuccess?ge(ae,this.onsuccess):ae),fe&&(this.onerror=this.onerror?ge(fe,this.onerror):fe),Se!==void 0?Se:Q}}function le(I,B){return I===qe?B:function(){I.apply(this,arguments);var Q=this.onsuccess,ae=this.onerror;this.onsuccess=this.onerror=null,B.apply(this,arguments),Q&&(this.onsuccess=this.onsuccess?ge(Q,this.onsuccess):Q),ae&&(this.onerror=this.onerror?ge(ae,this.onerror):ae)}}function oe(I,B){return I===qe?B:function(Q){var ae=I.apply(this,arguments);l(Q,ae);var fe=this.onsuccess,Se=this.onerror;return this.onsuccess=null,this.onerror=null,Q=B.apply(this,arguments),fe&&(this.onsuccess=this.onsuccess?ge(fe,this.onsuccess):fe),Se&&(this.onerror=this.onerror?ge(Se,this.onerror):Se),ae===void 0?Q===void 0?void 0:Q:l(ae,Q)}}function ie(I,B){return I===qe?B:function(){return B.apply(this,arguments)!==!1&&I.apply(this,arguments)}}function Ee(I,B){return I===qe?B:function(){var Q=I.apply(this,arguments);if(Q&&typeof Q.then=="function"){for(var ae=this,fe=arguments.length,Se=new Array(fe);fe--;)Se[fe]=arguments[fe];return Q.then(function(){return B.apply(ae,Se)})}return B.apply(this,arguments)}}et.ModifyError=ce,et.DexieError=se,et.BulkError=Me;var Be=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ke(I){Be=I}var ct={},It=100,Ot=typeof Promise>"u"?[]:function(){var I=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[I,c(I),I];var B=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[B,c(B),I]}(),ht=Ot[0],Fa=Ot[1],Ot=Ot[2],Fa=Fa&&Fa.then,zt=ht&&ht.constructor,Bt=!!Ot,rn=function(I,B){de.push([I,B]),D&&(queueMicrotask(me),D=!1)},ve=!0,D=!0,Z=[],pe=[],Oe=Re,xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:qe,pgp:!1,env:{},finalize:qe},Ie=xe,de=[],bt=0,St=[];function z(I){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var B=this._PSD=Ie;if(typeof I!="function"){if(I!==ct)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&be(this,this._value))}this._state=null,this._value=null,++B.ref,function Q(ae,fe){try{fe(function(Se){if(ae._state===null){if(Se===ae)throw new TypeError("A promise cannot be resolved with itself.");var Fe=ae._lib&&Y();Se&&typeof Se.then=="function"?Q(ae,function(He,Qe){Se instanceof z?Se._then(He,Qe):Se.then(He,Qe)}):(ae._state=!0,ae._value=Se,_e(ae)),Fe&&W()}},be.bind(null,ae))}catch(Se){be(ae,Se)}}(this,I)}var Ve={get:function(){var I=Ie,B=Zt;function Q(ae,fe){var Se=this,Fe=!I.global&&(I!==Ie||B!==Zt),He=Fe&&!Cr(),Qe=new z(function(nt,ot){ze(Se,new it(Ut(ae,I,Fe,He),Ut(fe,I,Fe,He),nt,ot,I))});return this._consoleTask&&(Qe._consoleTask=this._consoleTask),Qe}return Q.prototype=ct,Q},set:function(I){y(this,"then",I&&I.prototype===ct?Ve:{get:function(){return I},set:Ve.set})}};function it(I,B,Q,ae,fe){this.onFulfilled=typeof I=="function"?I:null,this.onRejected=typeof B=="function"?B:null,this.resolve=Q,this.reject=ae,this.psd=fe}function be(I,B){var Q,ae;pe.push(B),I._state===null&&(Q=I._lib&&Y(),B=Oe(B),I._state=!1,I._value=B,ae=I,Z.some(function(fe){return fe._value===ae._value})||Z.push(ae),_e(I),Q&&W())}function _e(I){var B=I._listeners;I._listeners=[];for(var Q=0,ae=B.length;Q<ae;++Q)ze(I,B[Q]);var fe=I._PSD;--fe.ref||fe.finalize(),bt===0&&(++bt,rn(function(){--bt==0&&X()},[]))}function ze(I,B){if(I._state!==null){var Q=I._state?B.onFulfilled:B.onRejected;if(Q===null)return(I._state?B.resolve:B.reject)(I._value);++B.psd.ref,++bt,rn(Rt,[Q,I,B])}else I._listeners.push(B)}function Rt(I,B,Q){try{var ae,fe=B._value;!B._state&&pe.length&&(pe=[]),ae=Be&&B._consoleTask?B._consoleTask.run(function(){return I(fe)}):I(fe),B._state||pe.indexOf(fe)!==-1||function(Se){for(var Fe=Z.length;Fe;)if(Z[--Fe]._value===Se._value)return Z.splice(Fe,1)}(B),Q.resolve(ae)}catch(Se){Q.reject(Se)}finally{--bt==0&&X(),--Q.psd.ref||Q.psd.finalize()}}function me(){Xe(xe,function(){Y()&&W()})}function Y(){var I=ve;return D=ve=!1,I}function W(){var I,B,Q;do for(;0<de.length;)for(I=de,de=[],Q=I.length,B=0;B<Q;++B){var ae=I[B];ae[0].apply(null,ae[1])}while(0<de.length);D=ve=!0}function X(){var I=Z;Z=[],I.forEach(function(ae){ae._PSD.onunhandled.call(null,ae._value,ae)});for(var B=St.slice(0),Q=B.length;Q;)B[--Q]()}function ye(I){return new z(ct,!1,I)}function Pe(I,B){var Q=Ie;return function(){var ae=Y(),fe=Ie;try{return br(Q,!0),I.apply(this,arguments)}catch(Se){B&&B(Se)}finally{br(fe,!1),ae&&W()}}}h(z.prototype,{then:Ve,_then:function(I,B){ze(this,new it(null,null,I,B,Ie))},catch:function(I){if(arguments.length===1)return this.then(null,I);var B=I,Q=arguments[1];return typeof B=="function"?this.then(null,function(ae){return(ae instanceof B?Q:ye)(ae)}):this.then(null,function(ae){return(ae&&ae.name===B?Q:ye)(ae)})},finally:function(I){return this.then(function(B){return z.resolve(I()).then(function(){return B})},function(B){return z.resolve(I()).then(function(){return ye(B)})})},timeout:function(I,B){var Q=this;return I<1/0?new z(function(ae,fe){var Se=setTimeout(function(){return fe(new Ce.Timeout(B))},I);Q.then(ae,fe).finally(clearTimeout.bind(null,Se))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&y(z.prototype,Symbol.toStringTag,"Dexie.Promise"),xe.env=hn(),h(z,{all:function(){var I=H.apply(null,arguments).map(Jr);return new z(function(B,Q){I.length===0&&B([]);var ae=I.length;I.forEach(function(fe,Se){return z.resolve(fe).then(function(Fe){I[Se]=Fe,--ae||B(I)},Q)})})},resolve:function(I){return I instanceof z?I:I&&typeof I.then=="function"?new z(function(B,Q){I.then(B,Q)}):new z(ct,!0,I)},reject:ye,race:function(){var I=H.apply(null,arguments).map(Jr);return new z(function(B,Q){I.map(function(ae){return z.resolve(ae).then(B,Q)})})},PSD:{get:function(){return Ie},set:function(I){return Ie=I}},totalEchoes:{get:function(){return Zt}},newPSD:cn,usePSD:Xe,scheduler:{get:function(){return rn},set:function(I){rn=I}},rejectionMapper:{get:function(){return Oe},set:function(I){Oe=I}},follow:function(I,B){return new z(function(Q,ae){return cn(function(fe,Se){var Fe=Ie;Fe.unhandleds=[],Fe.onunhandled=Se,Fe.finalize=ge(function(){var He,Qe=this;He=function(){Qe.unhandleds.length===0?fe():Se(Qe.unhandleds[0])},St.push(function nt(){He(),St.splice(St.indexOf(nt),1)}),++bt,rn(function(){--bt==0&&X()},[])},Fe.finalize),I()},B,Q,ae)})}}),zt&&(zt.allSettled&&y(z,"allSettled",function(){var I=H.apply(null,arguments).map(Jr);return new z(function(B){I.length===0&&B([]);var Q=I.length,ae=new Array(Q);I.forEach(function(fe,Se){return z.resolve(fe).then(function(Fe){return ae[Se]={status:"fulfilled",value:Fe}},function(Fe){return ae[Se]={status:"rejected",reason:Fe}}).then(function(){return--Q||B(ae)})})})}),zt.any&&typeof AggregateError<"u"&&y(z,"any",function(){var I=H.apply(null,arguments).map(Jr);return new z(function(B,Q){I.length===0&&Q(new AggregateError([]));var ae=I.length,fe=new Array(ae);I.forEach(function(Se,Fe){return z.resolve(Se).then(function(He){return B(He)},function(He){fe[Fe]=He,--ae||Q(new AggregateError(fe))})})})}),zt.withResolvers&&(z.withResolvers=zt.withResolvers));var We={awaits:0,echoes:0,id:0},xt=0,Qt=[],Fn=0,Zt=0,tn=0;function cn(I,B,Q,ae){var fe=Ie,Se=Object.create(fe);return Se.parent=fe,Se.ref=0,Se.global=!1,Se.id=++tn,xe.env,Se.env=Bt?{Promise:z,PromiseProp:{value:z,configurable:!0,writable:!0},all:z.all,race:z.race,allSettled:z.allSettled,any:z.any,resolve:z.resolve,reject:z.reject}:{},B&&l(Se,B),++fe.ref,Se.finalize=function(){--this.parent.ref||this.parent.finalize()},ae=Xe(Se,I,Q,ae),Se.ref===0&&Se.finalize(),ae}function dr(){return We.id||(We.id=++xt),++We.awaits,We.echoes+=It,We.id}function Cr(){return!!We.awaits&&(--We.awaits==0&&(We.id=0),We.echoes=We.awaits*It,!0)}function Jr(I){return We.echoes&&I&&I.constructor===zt?(dr(),I.then(function(B){return Cr(),B},function(B){return Cr(),Xn(B)})):I}function Qr(){var I=Qt[Qt.length-1];Qt.pop(),br(I,!1)}function br(I,B){var Q,ae=Ie;(B?!We.echoes||Fn++&&I===Ie:!Fn||--Fn&&I===Ie)||queueMicrotask(B?(function(fe){++Zt,We.echoes&&--We.echoes!=0||(We.echoes=We.awaits=We.id=0),Qt.push(Ie),br(fe,!0)}).bind(null,I):Qr),I!==Ie&&(Ie=I,ae===xe&&(xe.env=hn()),Bt&&(Q=xe.env.Promise,B=I.env,(ae.global||I.global)&&(Object.defineProperty(s,"Promise",B.PromiseProp),Q.all=B.all,Q.race=B.race,Q.resolve=B.resolve,Q.reject=B.reject,B.allSettled&&(Q.allSettled=B.allSettled),B.any&&(Q.any=B.any))))}function hn(){var I=s.Promise;return Bt?{Promise:I,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:I.all,race:I.race,allSettled:I.allSettled,any:I.any,resolve:I.resolve,reject:I.reject}:{}}function Xe(I,B,Q,ae,fe){var Se=Ie;try{return br(I,!0),B(Q,ae,fe)}finally{br(Se,!1)}}function Ut(I,B,Q,ae){return typeof I!="function"?I:function(){var fe=Ie;Q&&dr(),br(B,!0);try{return I.apply(this,arguments)}finally{br(fe,!1),ae&&queueMicrotask(Cr)}}}function pn(I){Promise===zt&&We.echoes===0?Fn===0?I():enqueueNativeMicroTask(I):setTimeout(I,0)}(""+Fa).indexOf("[native code]")===-1&&(dr=Cr=qe);var Xn=z.reject,_i="￿",Yr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ks="String expected.",ts=[],Pa="__dbnames",ra="readonly",Li="readwrite";function Ro(I,B){return I?B?function(){return I.apply(this,arguments)&&B.apply(this,arguments)}:I:B}var el={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Bd(I){return typeof I!="string"||/\./.test(I)?function(B){return B}:function(B){return B[I]===void 0&&I in B&&delete(B=V(B))[I],B}}function Sm(){throw Ce.Type()}function Mr(I,B){try{var Q=zy(I),ae=zy(B);if(Q!==ae)return Q==="Array"?1:ae==="Array"?-1:Q==="binary"?1:ae==="binary"?-1:Q==="string"?1:ae==="string"?-1:Q==="Date"?1:ae!=="Date"?NaN:-1;switch(Q){case"number":case"Date":case"string":return B<I?1:I<B?-1:0;case"binary":return function(fe,Se){for(var Fe=fe.length,He=Se.length,Qe=Fe<He?Fe:He,nt=0;nt<Qe;++nt)if(fe[nt]!==Se[nt])return fe[nt]<Se[nt]?-1:1;return Fe===He?0:Fe<He?-1:1}(Oa(I),Oa(B));case"Array":return function(fe,Se){for(var Fe=fe.length,He=Se.length,Qe=Fe<He?Fe:He,nt=0;nt<Qe;++nt){var ot=Mr(fe[nt],Se[nt]);if(ot!==0)return ot}return Fe===He?0:Fe<He?-1:1}(I,B)}}catch{}return NaN}function zy(I){var B=typeof I;return B!="object"?B:ArrayBuffer.isView(I)?"binary":(I=J(I),I==="ArrayBuffer"?"binary":I)}function Oa(I){return I instanceof Uint8Array?I:ArrayBuffer.isView(I)?new Uint8Array(I.buffer,I.byteOffset,I.byteLength):new Uint8Array(I)}var Uy=(Si.prototype._trans=function(I,B,Q){var ae=this._tx||Ie.trans,fe=this.name,Se=Be&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(I==="readonly"?"read":"write"," ").concat(this.name));function Fe(nt,ot,Ye){if(!Ye.schema[fe])throw new Ce.NotFound("Table "+fe+" not part of transaction");return B(Ye.idbtrans,Ye)}var He=Y();try{var Qe=ae&&ae.db._novip===this.db._novip?ae===Ie.trans?ae._promise(I,Fe,Q):cn(function(){return ae._promise(I,Fe,Q)},{trans:ae,transless:Ie.transless||Ie}):function nt(ot,Ye,dt,Je){if(ot.idbdb&&(ot._state.openComplete||Ie.letThrough||ot._vip)){var at=ot._createTransaction(Ye,dt,ot._dbSchema);try{at.create(),ot._state.PR1398_maxLoop=3}catch(pt){return pt.name===je.InvalidState&&ot.isOpen()&&0<--ot._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ot.close({disableAutoOpen:!1}),ot.open().then(function(){return nt(ot,Ye,dt,Je)})):Xn(pt)}return at._promise(Ye,function(pt,rt){return cn(function(){return Ie.trans=at,Je(pt,rt,at)})}).then(function(pt){if(Ye==="readwrite")try{at.idbtrans.commit()}catch{}return Ye==="readonly"?pt:at._completion.then(function(){return pt})})}if(ot._state.openComplete)return Xn(new Ce.DatabaseClosed(ot._state.dbOpenError));if(!ot._state.isBeingOpened){if(!ot._state.autoOpen)return Xn(new Ce.DatabaseClosed);ot.open().catch(qe)}return ot._state.dbReadyPromise.then(function(){return nt(ot,Ye,dt,Je)})}(this.db,I,[this.name],Fe);return Se&&(Qe._consoleTask=Se,Qe=Qe.catch(function(nt){return console.trace(nt),Xn(nt)})),Qe}finally{He&&W()}},Si.prototype.get=function(I,B){var Q=this;return I&&I.constructor===Object?this.where(I).first(B):I==null?Xn(new Ce.Type("Invalid argument to Table.get()")):this._trans("readonly",function(ae){return Q.core.get({trans:ae,key:I}).then(function(fe){return Q.hook.reading.fire(fe)})}).then(B)},Si.prototype.where=function(I){if(typeof I=="string")return new this.db.WhereClause(this,I);if(o(I))return new this.db.WhereClause(this,"[".concat(I.join("+"),"]"));var B=a(I);if(B.length===1)return this.where(B[0]).equals(I[B[0]]);var Q=this.schema.indexes.concat(this.schema.primKey).filter(function(He){if(He.compound&&B.every(function(nt){return 0<=He.keyPath.indexOf(nt)})){for(var Qe=0;Qe<B.length;++Qe)if(B.indexOf(He.keyPath[Qe])===-1)return!1;return!0}return!1}).sort(function(He,Qe){return He.keyPath.length-Qe.keyPath.length})[0];if(Q&&this.db._maxKey!==_i){var Se=Q.keyPath.slice(0,B.length);return this.where(Se).equals(Se.map(function(Qe){return I[Qe]}))}!Q&&Be&&console.warn("The query ".concat(JSON.stringify(I)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(B.join("+"),"]"));var ae=this.schema.idxByName;function fe(He,Qe){return Mr(He,Qe)===0}var Fe=B.reduce(function(Ye,Qe){var nt=Ye[0],ot=Ye[1],Ye=ae[Qe],dt=I[Qe];return[nt||Ye,nt||!Ye?Ro(ot,Ye&&Ye.multi?function(Je){return Je=A(Je,Qe),o(Je)&&Je.some(function(at){return fe(dt,at)})}:function(Je){return fe(dt,A(Je,Qe))}):ot]},[null,null]),Se=Fe[0],Fe=Fe[1];return Se?this.where(Se.name).equals(I[Se.keyPath]).filter(Fe):Q?this.filter(Fe):this.where(B).equals("")},Si.prototype.filter=function(I){return this.toCollection().and(I)},Si.prototype.count=function(I){return this.toCollection().count(I)},Si.prototype.offset=function(I){return this.toCollection().offset(I)},Si.prototype.limit=function(I){return this.toCollection().limit(I)},Si.prototype.each=function(I){return this.toCollection().each(I)},Si.prototype.toArray=function(I){return this.toCollection().toArray(I)},Si.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Si.prototype.orderBy=function(I){return new this.db.Collection(new this.db.WhereClause(this,o(I)?"[".concat(I.join("+"),"]"):I))},Si.prototype.reverse=function(){return this.toCollection().reverse()},Si.prototype.mapToClass=function(I){var B,Q=this.db,ae=this.name;function fe(){return B!==null&&B.apply(this,arguments)||this}(this.schema.mappedClass=I).prototype instanceof Sm&&(function(Qe,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Class extends value "+String(nt)+" is not a constructor or null");function ot(){this.constructor=Qe}n(Qe,nt),Qe.prototype=nt===null?Object.create(nt):(ot.prototype=nt.prototype,new ot)}(fe,B=I),Object.defineProperty(fe.prototype,"db",{get:function(){return Q},enumerable:!1,configurable:!0}),fe.prototype.table=function(){return ae},I=fe);for(var Se=new Set,Fe=I.prototype;Fe;Fe=c(Fe))Object.getOwnPropertyNames(Fe).forEach(function(Qe){return Se.add(Qe)});function He(Qe){if(!Qe)return Qe;var nt,ot=Object.create(I.prototype);for(nt in Qe)if(!Se.has(nt))try{ot[nt]=Qe[nt]}catch{}return ot}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=He,this.hook("reading",He),I},Si.prototype.defineClass=function(){return this.mapToClass(function(I){l(this,I)})},Si.prototype.add=function(I,B){var Q=this,ae=this.schema.primKey,fe=ae.auto,Se=ae.keyPath,Fe=I;return Se&&fe&&(Fe=Bd(Se)(I)),this._trans("readwrite",function(He){return Q.core.mutate({trans:He,type:"add",keys:B!=null?[B]:null,values:[Fe]})}).then(function(He){return He.numFailures?z.reject(He.failures[0]):He.lastResult}).then(function(He){if(Se)try{R(I,Se,He)}catch{}return He})},Si.prototype.update=function(I,B){return typeof I!="object"||o(I)?this.where(":id").equals(I).modify(B):(I=A(I,this.schema.primKey.keyPath),I===void 0?Xn(new Ce.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(I).modify(B))},Si.prototype.put=function(I,B){var Q=this,ae=this.schema.primKey,fe=ae.auto,Se=ae.keyPath,Fe=I;return Se&&fe&&(Fe=Bd(Se)(I)),this._trans("readwrite",function(He){return Q.core.mutate({trans:He,type:"put",values:[Fe],keys:B!=null?[B]:null})}).then(function(He){return He.numFailures?z.reject(He.failures[0]):He.lastResult}).then(function(He){if(Se)try{R(I,Se,He)}catch{}return He})},Si.prototype.delete=function(I){var B=this;return this._trans("readwrite",function(Q){return B.core.mutate({trans:Q,type:"delete",keys:[I]})}).then(function(Q){return Q.numFailures?z.reject(Q.failures[0]):void 0})},Si.prototype.clear=function(){var I=this;return this._trans("readwrite",function(B){return I.core.mutate({trans:B,type:"deleteRange",range:el})}).then(function(B){return B.numFailures?z.reject(B.failures[0]):void 0})},Si.prototype.bulkGet=function(I){var B=this;return this._trans("readonly",function(Q){return B.core.getMany({keys:I,trans:Q}).then(function(ae){return ae.map(function(fe){return B.hook.reading.fire(fe)})})})},Si.prototype.bulkAdd=function(I,B,Q){var ae=this,fe=Array.isArray(B)?B:void 0,Se=(Q=Q||(fe?void 0:B))?Q.allKeys:void 0;return this._trans("readwrite",function(Fe){var nt=ae.schema.primKey,He=nt.auto,nt=nt.keyPath;if(nt&&fe)throw new Ce.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(fe&&fe.length!==I.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var Qe=I.length,nt=nt&&He?I.map(Bd(nt)):I;return ae.core.mutate({trans:Fe,type:"add",keys:fe,values:nt,wantResults:Se}).then(function(at){var Ye=at.numFailures,dt=at.results,Je=at.lastResult,at=at.failures;if(Ye===0)return Se?dt:Je;throw new Me("".concat(ae.name,".bulkAdd(): ").concat(Ye," of ").concat(Qe," operations failed"),at)})})},Si.prototype.bulkPut=function(I,B,Q){var ae=this,fe=Array.isArray(B)?B:void 0,Se=(Q=Q||(fe?void 0:B))?Q.allKeys:void 0;return this._trans("readwrite",function(Fe){var nt=ae.schema.primKey,He=nt.auto,nt=nt.keyPath;if(nt&&fe)throw new Ce.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(fe&&fe.length!==I.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var Qe=I.length,nt=nt&&He?I.map(Bd(nt)):I;return ae.core.mutate({trans:Fe,type:"put",keys:fe,values:nt,wantResults:Se}).then(function(at){var Ye=at.numFailures,dt=at.results,Je=at.lastResult,at=at.failures;if(Ye===0)return Se?dt:Je;throw new Me("".concat(ae.name,".bulkPut(): ").concat(Ye," of ").concat(Qe," operations failed"),at)})})},Si.prototype.bulkUpdate=function(I){var B=this,Q=this.core,ae=I.map(function(Fe){return Fe.key}),fe=I.map(function(Fe){return Fe.changes}),Se=[];return this._trans("readwrite",function(Fe){return Q.getMany({trans:Fe,keys:ae,cache:"clone"}).then(function(He){var Qe=[],nt=[];I.forEach(function(Ye,dt){var Je=Ye.key,at=Ye.changes,pt=He[dt];if(pt){for(var rt=0,wt=Object.keys(at);rt<wt.length;rt++){var kt=wt[rt],Et=at[kt];if(kt===B.schema.primKey.keyPath){if(Mr(Et,Je)!==0)throw new Ce.Constraint("Cannot update primary key in bulkUpdate()")}else R(pt,kt,Et)}Se.push(dt),Qe.push(Je),nt.push(pt)}});var ot=Qe.length;return Q.mutate({trans:Fe,type:"put",keys:Qe,values:nt,updates:{keys:ae,changeSpecs:fe}}).then(function(Ye){var dt=Ye.numFailures,Je=Ye.failures;if(dt===0)return ot;for(var at=0,pt=Object.keys(Je);at<pt.length;at++){var rt,wt=pt[at],kt=Se[Number(wt)];kt!=null&&(rt=Je[wt],delete Je[wt],Je[kt]=rt)}throw new Me("".concat(B.name,".bulkUpdate(): ").concat(dt," of ").concat(ot," operations failed"),Je)})})})},Si.prototype.bulkDelete=function(I){var B=this,Q=I.length;return this._trans("readwrite",function(ae){return B.core.mutate({trans:ae,type:"delete",keys:I})}).then(function(Fe){var fe=Fe.numFailures,Se=Fe.lastResult,Fe=Fe.failures;if(fe===0)return Se;throw new Me("".concat(B.name,".bulkDelete(): ").concat(fe," of ").concat(Q," operations failed"),Fe)})},Si);function Si(){}function wc(I){function B(Fe,He){if(He){for(var Qe=arguments.length,nt=new Array(Qe-1);--Qe;)nt[Qe-1]=arguments[Qe];return Q[Fe].subscribe.apply(null,nt),I}if(typeof Fe=="string")return Q[Fe]}var Q={};B.addEventType=Se;for(var ae=1,fe=arguments.length;ae<fe;++ae)Se(arguments[ae]);return B;function Se(Fe,He,Qe){if(typeof Fe!="object"){var nt;He=He||ie;var ot={subscribers:[],fire:Qe=Qe||qe,subscribe:function(Ye){ot.subscribers.indexOf(Ye)===-1&&(ot.subscribers.push(Ye),ot.fire=He(ot.fire,Ye))},unsubscribe:function(Ye){ot.subscribers=ot.subscribers.filter(function(dt){return dt!==Ye}),ot.fire=ot.subscribers.reduce(He,Qe)}};return Q[Fe]=B[Fe]=ot}a(nt=Fe).forEach(function(Ye){var dt=nt[Ye];if(o(dt))Se(Ye,nt[Ye][0],nt[Ye][1]);else{if(dt!=="asap")throw new Ce.InvalidArgument("Invalid event config");var Je=Se(Ye,Re,function(){for(var at=arguments.length,pt=new Array(at);at--;)pt[at]=arguments[at];Je.subscribers.forEach(function(rt){E(function(){rt.apply(null,pt)})})})}})}}function $d(I,B){return b(B).from({prototype:I}),B}function zl(I,B){return!(I.filter||I.algorithm||I.or)&&(B?I.justLimit:!I.replayFilter)}function qy(I,B){I.filter=Ro(I.filter,B)}function ga(I,B,Q){var ae=I.replayFilter;I.replayFilter=ae?function(){return Ro(ae(),B())}:B,I.justLimit=Q&&!ae}function zd(I,B){if(I.isPrimKey)return B.primaryKey;var Q=B.getIndexByKeyPath(I.index);if(!Q)throw new Ce.Schema("KeyPath "+I.index+" on object store "+B.name+" is not indexed");return Q}function Vy(I,B,Q){var ae=zd(I,B.schema);return B.openCursor({trans:Q,values:!I.keysOnly,reverse:I.dir==="prev",unique:!!I.unique,query:{index:ae,range:I.range}})}function Ud(I,B,Q,ae){var fe=I.replayFilter?Ro(I.filter,I.replayFilter()):I.filter;if(I.or){var Se={},Fe=function(He,Qe,nt){var ot,Ye;fe&&!fe(Qe,nt,function(dt){return Qe.stop(dt)},function(dt){return Qe.fail(dt)})||((Ye=""+(ot=Qe.primaryKey))=="[object ArrayBuffer]"&&(Ye=""+new Uint8Array(ot)),d(Se,Ye)||(Se[Ye]=!0,B(He,Qe,nt)))};return Promise.all([I.or._iterate(Fe,Q),Cu(Vy(I,ae,Q),I.algorithm,Fe,!I.keysOnly&&I.valueMapper)])}return Cu(Vy(I,ae,Q),Ro(I.algorithm,fe),B,!I.keysOnly&&I.valueMapper)}function Cu(I,B,Q,ae){var fe=Pe(ae?function(Se,Fe,He){return Q(ae(Se),Fe,He)}:Q);return I.then(function(Se){if(Se)return Se.start(function(){var Fe=function(){return Se.continue()};B&&!B(Se,function(He){return Fe=He},function(He){Se.stop(He),Fe=qe},function(He){Se.fail(He),Fe=qe})||fe(Se.value,Se,function(He){return Fe=He}),Fe()})})}var qd=(Hy.prototype.execute=function(I){var B=this["@@propmod"];if(B.add!==void 0){var Q=B.add;if(o(Q))return i(i([],o(I)?I:[],!0),Q).sort();if(typeof Q=="number")return(Number(I)||0)+Q;if(typeof Q=="bigint")try{return BigInt(I)+Q}catch{return BigInt(0)+Q}throw new TypeError("Invalid term ".concat(Q))}if(B.remove!==void 0){var ae=B.remove;if(o(ae))return o(I)?I.filter(function(fe){return!ae.includes(fe)}).sort():[];if(typeof ae=="number")return Number(I)-ae;if(typeof ae=="bigint")try{return BigInt(I)-ae}catch{return BigInt(0)-ae}throw new TypeError("Invalid subtrahend ".concat(ae))}return Q=(Q=B.replacePrefix)===null||Q===void 0?void 0:Q[0],Q&&typeof I=="string"&&I.startsWith(Q)?B.replacePrefix[1]+I.substring(Q.length):I},Hy);function Hy(I){this["@@propmod"]=I}var Vd=(zr.prototype._read=function(I,B){var Q=this._ctx;return Q.error?Q.table._trans(null,Xn.bind(null,Q.error)):Q.table._trans("readonly",I).then(B)},zr.prototype._write=function(I){var B=this._ctx;return B.error?B.table._trans(null,Xn.bind(null,B.error)):B.table._trans("readwrite",I,"locked")},zr.prototype._addAlgorithm=function(I){var B=this._ctx;B.algorithm=Ro(B.algorithm,I)},zr.prototype._iterate=function(I,B){return Ud(this._ctx,I,B,this._ctx.table.core)},zr.prototype.clone=function(I){var B=Object.create(this.constructor.prototype),Q=Object.create(this._ctx);return I&&l(Q,I),B._ctx=Q,B},zr.prototype.raw=function(){return this._ctx.valueMapper=null,this},zr.prototype.each=function(I){var B=this._ctx;return this._read(function(Q){return Ud(B,I,Q,B.table.core)})},zr.prototype.count=function(I){var B=this;return this._read(function(Q){var ae=B._ctx,fe=ae.table.core;if(zl(ae,!0))return fe.count({trans:Q,query:{index:zd(ae,fe.schema),range:ae.range}}).then(function(Fe){return Math.min(Fe,ae.limit)});var Se=0;return Ud(ae,function(){return++Se,!1},Q,fe).then(function(){return Se})}).then(I)},zr.prototype.sortBy=function(I,B){var Q=I.split(".").reverse(),ae=Q[0],fe=Q.length-1;function Se(Qe,nt){return nt?Se(Qe[Q[nt]],nt-1):Qe[ae]}var Fe=this._ctx.dir==="next"?1:-1;function He(Qe,nt){return Mr(Se(Qe,fe),Se(nt,fe))*Fe}return this.toArray(function(Qe){return Qe.sort(He)}).then(B)},zr.prototype.toArray=function(I){var B=this;return this._read(function(Q){var ae=B._ctx;if(ae.dir==="next"&&zl(ae,!0)&&0<ae.limit){var fe=ae.valueMapper,Se=zd(ae,ae.table.core.schema);return ae.table.core.query({trans:Q,limit:ae.limit,values:!0,query:{index:Se,range:ae.range}}).then(function(He){return He=He.result,fe?He.map(fe):He})}var Fe=[];return Ud(ae,function(He){return Fe.push(He)},Q,ae.table.core).then(function(){return Fe})},I)},zr.prototype.offset=function(I){var B=this._ctx;return I<=0||(B.offset+=I,zl(B)?ga(B,function(){var Q=I;return function(ae,fe){return Q===0||(Q===1?--Q:fe(function(){ae.advance(Q),Q=0}),!1)}}):ga(B,function(){var Q=I;return function(){return--Q<0}})),this},zr.prototype.limit=function(I){return this._ctx.limit=Math.min(this._ctx.limit,I),ga(this._ctx,function(){var B=I;return function(Q,ae,fe){return--B<=0&&ae(fe),0<=B}},!0),this},zr.prototype.until=function(I,B){return qy(this._ctx,function(Q,ae,fe){return!I(Q.value)||(ae(fe),B)}),this},zr.prototype.first=function(I){return this.limit(1).toArray(function(B){return B[0]}).then(I)},zr.prototype.last=function(I){return this.reverse().first(I)},zr.prototype.filter=function(I){var B;return qy(this._ctx,function(Q){return I(Q.value)}),(B=this._ctx).isMatch=Ro(B.isMatch,I),this},zr.prototype.and=function(I){return this.filter(I)},zr.prototype.or=function(I){return new this.db.WhereClause(this._ctx.table,I,this)},zr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},zr.prototype.desc=function(){return this.reverse()},zr.prototype.eachKey=function(I){var B=this._ctx;return B.keysOnly=!B.isMatch,this.each(function(Q,ae){I(ae.key,ae)})},zr.prototype.eachUniqueKey=function(I){return this._ctx.unique="unique",this.eachKey(I)},zr.prototype.eachPrimaryKey=function(I){var B=this._ctx;return B.keysOnly=!B.isMatch,this.each(function(Q,ae){I(ae.primaryKey,ae)})},zr.prototype.keys=function(I){var B=this._ctx;B.keysOnly=!B.isMatch;var Q=[];return this.each(function(ae,fe){Q.push(fe.key)}).then(function(){return Q}).then(I)},zr.prototype.primaryKeys=function(I){var B=this._ctx;if(B.dir==="next"&&zl(B,!0)&&0<B.limit)return this._read(function(ae){var fe=zd(B,B.table.core.schema);return B.table.core.query({trans:ae,values:!1,limit:B.limit,query:{index:fe,range:B.range}})}).then(function(ae){return ae.result}).then(I);B.keysOnly=!B.isMatch;var Q=[];return this.each(function(ae,fe){Q.push(fe.primaryKey)}).then(function(){return Q}).then(I)},zr.prototype.uniqueKeys=function(I){return this._ctx.unique="unique",this.keys(I)},zr.prototype.firstKey=function(I){return this.limit(1).keys(function(B){return B[0]}).then(I)},zr.prototype.lastKey=function(I){return this.reverse().firstKey(I)},zr.prototype.distinct=function(){var I=this._ctx,I=I.index&&I.table.schema.idxByName[I.index];if(!I||!I.multi)return this;var B={};return qy(this._ctx,function(fe){var ae=fe.primaryKey.toString(),fe=d(B,ae);return B[ae]=!0,!fe}),this},zr.prototype.modify=function(I){var B=this,Q=this._ctx;return this._write(function(ae){var fe,Se,Fe;Fe=typeof I=="function"?I:(fe=a(I),Se=fe.length,function(rt){for(var wt=!1,kt=0;kt<Se;++kt){var Et=fe[kt],Mt=I[Et],Kt=A(rt,Et);Mt instanceof qd?(R(rt,Et,Mt.execute(Kt)),wt=!0):Kt!==Mt&&(R(rt,Et,Mt),wt=!0)}return wt});var He=Q.table.core,Ye=He.schema.primaryKey,Qe=Ye.outbound,nt=Ye.extractKey,ot=200,Ye=B.db._options.modifyChunkSize;Ye&&(ot=typeof Ye=="object"?Ye[He.name]||Ye["*"]||200:Ye);function dt(rt,Et){var kt=Et.failures,Et=Et.numFailures;at+=rt-Et;for(var Mt=0,Kt=a(kt);Mt<Kt.length;Mt++){var nn=Kt[Mt];Je.push(kt[nn])}}var Je=[],at=0,pt=[];return B.clone().primaryKeys().then(function(rt){function wt(Et){var Mt=Math.min(ot,rt.length-Et);return He.getMany({trans:ae,keys:rt.slice(Et,Et+Mt),cache:"immutable"}).then(function(Kt){for(var nn=[],Ht=[],Xt=Qe?[]:null,an=[],Wt=0;Wt<Mt;++Wt){var mn=Kt[Wt],On={value:V(mn),primKey:rt[Et+Wt]};Fe.call(On,On.value,On)!==!1&&(On.value==null?an.push(rt[Et+Wt]):Qe||Mr(nt(mn),nt(On.value))===0?(Ht.push(On.value),Qe&&Xt.push(rt[Et+Wt])):(an.push(rt[Et+Wt]),nn.push(On.value)))}return Promise.resolve(0<nn.length&&He.mutate({trans:ae,type:"add",values:nn}).then(function(zn){for(var cr in zn.failures)an.splice(parseInt(cr),1);dt(nn.length,zn)})).then(function(){return(0<Ht.length||kt&&typeof I=="object")&&He.mutate({trans:ae,type:"put",keys:Xt,values:Ht,criteria:kt,changeSpec:typeof I!="function"&&I,isAdditionalChunk:0<Et}).then(function(zn){return dt(Ht.length,zn)})}).then(function(){return(0<an.length||kt&&I===Cm)&&He.mutate({trans:ae,type:"delete",keys:an,criteria:kt,isAdditionalChunk:0<Et}).then(function(zn){return dt(an.length,zn)})}).then(function(){return rt.length>Et+Mt&&wt(Et+ot)})})}var kt=zl(Q)&&Q.limit===1/0&&(typeof I!="function"||I===Cm)&&{index:Q.index,range:Q.range};return wt(0).then(function(){if(0<Je.length)throw new ce("Error modifying one or more objects",Je,at,pt);return rt.length})})})},zr.prototype.delete=function(){var I=this._ctx,B=I.range;return zl(I)&&(I.isPrimKey||B.type===3)?this._write(function(Q){var ae=I.table.core.schema.primaryKey,fe=B;return I.table.core.count({trans:Q,query:{index:ae,range:fe}}).then(function(Se){return I.table.core.mutate({trans:Q,type:"deleteRange",range:fe}).then(function(Fe){var He=Fe.failures;if(Fe.lastResult,Fe.results,Fe=Fe.numFailures,Fe)throw new ce("Could not delete some values",Object.keys(He).map(function(Qe){return He[Qe]}),Se-Fe);return Se-Fe})})}):this.modify(Cm)},zr);function zr(){}var Cm=function(I,B){return B.value=null};function R1(I,B){return I<B?-1:I===B?0:1}function Wy(I,B){return B<I?-1:I===B?0:1}function Da(I,B,Q){return I=I instanceof Eu?new I.Collection(I):I,I._ctx.error=new(Q||TypeError)(B),I}function Hd(I){return new I.Collection(I,function(){return km("")}).limit(0)}function ku(I,B,Q,ae){var fe,Se,Fe,He,Qe,nt,ot,Ye=Q.length;if(!Q.every(function(at){return typeof at=="string"}))return Da(I,ks);function dt(at){fe=at==="next"?function(rt){return rt.toUpperCase()}:function(rt){return rt.toLowerCase()},Se=at==="next"?function(rt){return rt.toLowerCase()}:function(rt){return rt.toUpperCase()},Fe=at==="next"?R1:Wy;var pt=Q.map(function(rt){return{lower:Se(rt),upper:fe(rt)}}).sort(function(rt,wt){return Fe(rt.lower,wt.lower)});He=pt.map(function(rt){return rt.upper}),Qe=pt.map(function(rt){return rt.lower}),ot=(nt=at)==="next"?"":ae}dt("next"),I=new I.Collection(I,function(){return tl(He[0],Qe[Ye-1]+ae)}),I._ondirectionchange=function(at){dt(at)};var Je=0;return I._addAlgorithm(function(at,pt,rt){var wt=at.key;if(typeof wt!="string")return!1;var kt=Se(wt);if(B(kt,Qe,Je))return!0;for(var Et=null,Mt=Je;Mt<Ye;++Mt){var Kt=function(nn,Ht,Xt,an,Wt,mn){for(var On=Math.min(nn.length,an.length),zn=-1,cr=0;cr<On;++cr){var ia=Ht[cr];if(ia!==an[cr])return Wt(nn[cr],Xt[cr])<0?nn.substr(0,cr)+Xt[cr]+Xt.substr(cr+1):Wt(nn[cr],an[cr])<0?nn.substr(0,cr)+an[cr]+Xt.substr(cr+1):0<=zn?nn.substr(0,zn)+Ht[zn]+Xt.substr(zn+1):null;Wt(nn[cr],ia)<0&&(zn=cr)}return On<an.length&&mn==="next"?nn+Xt.substr(nn.length):On<nn.length&&mn==="prev"?nn.substr(0,Xt.length):zn<0?null:nn.substr(0,zn)+an[zn]+Xt.substr(zn+1)}(wt,kt,He[Mt],Qe[Mt],Fe,nt);Kt===null&&Et===null?Je=Mt+1:(Et===null||0<Fe(Et,Kt))&&(Et=Kt)}return pt(Et!==null?function(){at.continue(Et+ot)}:rt),!1}),I}function tl(I,B,Q,ae){return{type:2,lower:I,upper:B,lowerOpen:Q,upperOpen:ae}}function km(I){return{type:1,lower:I,upper:I}}var Eu=(Object.defineProperty(Mi.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Mi.prototype.between=function(I,B,Q,ae){Q=Q!==!1,ae=ae===!0;try{return 0<this._cmp(I,B)||this._cmp(I,B)===0&&(Q||ae)&&(!Q||!ae)?Hd(this):new this.Collection(this,function(){return tl(I,B,!Q,!ae)})}catch{return Da(this,Yr)}},Mi.prototype.equals=function(I){return I==null?Da(this,Yr):new this.Collection(this,function(){return km(I)})},Mi.prototype.above=function(I){return I==null?Da(this,Yr):new this.Collection(this,function(){return tl(I,void 0,!0)})},Mi.prototype.aboveOrEqual=function(I){return I==null?Da(this,Yr):new this.Collection(this,function(){return tl(I,void 0,!1)})},Mi.prototype.below=function(I){return I==null?Da(this,Yr):new this.Collection(this,function(){return tl(void 0,I,!1,!0)})},Mi.prototype.belowOrEqual=function(I){return I==null?Da(this,Yr):new this.Collection(this,function(){return tl(void 0,I)})},Mi.prototype.startsWith=function(I){return typeof I!="string"?Da(this,ks):this.between(I,I+_i,!0,!0)},Mi.prototype.startsWithIgnoreCase=function(I){return I===""?this.startsWith(I):ku(this,function(B,Q){return B.indexOf(Q[0])===0},[I],_i)},Mi.prototype.equalsIgnoreCase=function(I){return ku(this,function(B,Q){return B===Q[0]},[I],"")},Mi.prototype.anyOfIgnoreCase=function(){var I=H.apply(ne,arguments);return I.length===0?Hd(this):ku(this,function(B,Q){return Q.indexOf(B)!==-1},I,"")},Mi.prototype.startsWithAnyOfIgnoreCase=function(){var I=H.apply(ne,arguments);return I.length===0?Hd(this):ku(this,function(B,Q){return Q.some(function(ae){return B.indexOf(ae)===0})},I,_i)},Mi.prototype.anyOf=function(){var I=this,B=H.apply(ne,arguments),Q=this._cmp;try{B.sort(Q)}catch{return Da(this,Yr)}if(B.length===0)return Hd(this);var ae=new this.Collection(this,function(){return tl(B[0],B[B.length-1])});ae._ondirectionchange=function(Se){Q=Se==="next"?I._ascending:I._descending,B.sort(Q)};var fe=0;return ae._addAlgorithm(function(Se,Fe,He){for(var Qe=Se.key;0<Q(Qe,B[fe]);)if(++fe===B.length)return Fe(He),!1;return Q(Qe,B[fe])===0||(Fe(function(){Se.continue(B[fe])}),!1)}),ae},Mi.prototype.notEqual=function(I){return this.inAnyRange([[-1/0,I],[I,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Mi.prototype.noneOf=function(){var I=H.apply(ne,arguments);if(I.length===0)return new this.Collection(this);try{I.sort(this._ascending)}catch{return Da(this,Yr)}var B=I.reduce(function(Q,ae){return Q?Q.concat([[Q[Q.length-1][1],ae]]):[[-1/0,ae]]},null);return B.push([I[I.length-1],this.db._maxKey]),this.inAnyRange(B,{includeLowers:!1,includeUppers:!1})},Mi.prototype.inAnyRange=function(wt,B){var Q=this,ae=this._cmp,fe=this._ascending,Se=this._descending,Fe=this._min,He=this._max;if(wt.length===0)return Hd(this);if(!wt.every(function(kt){return kt[0]!==void 0&&kt[1]!==void 0&&fe(kt[0],kt[1])<=0}))return Da(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ce.InvalidArgument);var Qe=!B||B.includeLowers!==!1,nt=B&&B.includeUppers===!0,ot,Ye=fe;function dt(kt,Et){return Ye(kt[0],Et[0])}try{(ot=wt.reduce(function(kt,Et){for(var Mt=0,Kt=kt.length;Mt<Kt;++Mt){var nn=kt[Mt];if(ae(Et[0],nn[1])<0&&0<ae(Et[1],nn[0])){nn[0]=Fe(nn[0],Et[0]),nn[1]=He(nn[1],Et[1]);break}}return Mt===Kt&&kt.push(Et),kt},[])).sort(dt)}catch{return Da(this,Yr)}var Je=0,at=nt?function(kt){return 0<fe(kt,ot[Je][1])}:function(kt){return 0<=fe(kt,ot[Je][1])},pt=Qe?function(kt){return 0<Se(kt,ot[Je][0])}:function(kt){return 0<=Se(kt,ot[Je][0])},rt=at,wt=new this.Collection(this,function(){return tl(ot[0][0],ot[ot.length-1][1],!Qe,!nt)});return wt._ondirectionchange=function(kt){Ye=kt==="next"?(rt=at,fe):(rt=pt,Se),ot.sort(dt)},wt._addAlgorithm(function(kt,Et,Mt){for(var Kt,nn=kt.key;rt(nn);)if(++Je===ot.length)return Et(Mt),!1;return!at(Kt=nn)&&!pt(Kt)||(Q._cmp(nn,ot[Je][1])===0||Q._cmp(nn,ot[Je][0])===0||Et(function(){Ye===fe?kt.continue(ot[Je][0]):kt.continue(ot[Je][1])}),!1)}),wt},Mi.prototype.startsWithAnyOf=function(){var I=H.apply(ne,arguments);return I.every(function(B){return typeof B=="string"})?I.length===0?Hd(this):this.inAnyRange(I.map(function(B){return[B,B+_i]})):Da(this,"startsWithAnyOf() only works with strings")},Mi);function Mi(){}function Io(I){return Pe(function(B){return Tu(B),I(B.target.error),!1})}function Tu(I){I.stopPropagation&&I.stopPropagation(),I.preventDefault&&I.preventDefault()}var Wd="storagemutated",Au="x-storagemutated-1",Fs=wc(null,Wd),Gy=(ya.prototype._lock=function(){return C(!Ie.global),++this._reculock,this._reculock!==1||Ie.global||(Ie.lockOwnerFor=this),this},ya.prototype._unlock=function(){if(C(!Ie.global),--this._reculock==0)for(Ie.global||(Ie.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var I=this._blockedFuncs.shift();try{Xe(I[1],I[0])}catch{}}return this},ya.prototype._locked=function(){return this._reculock&&Ie.lockOwnerFor!==this},ya.prototype.create=function(I){var B=this;if(!this.mode)return this;var Q=this.db.idbdb,ae=this.db._state.dbOpenError;if(C(!this.idbtrans),!I&&!Q)switch(ae&&ae.name){case"DatabaseClosedError":throw new Ce.DatabaseClosed(ae);case"MissingAPIError":throw new Ce.MissingAPI(ae.message,ae);default:throw new Ce.OpenFailed(ae)}if(!this.active)throw new Ce.TransactionInactive;return C(this._completion._state===null),(I=this.idbtrans=I||(this.db.core||Q).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Pe(function(fe){Tu(fe),B._reject(I.error)}),I.onabort=Pe(function(fe){Tu(fe),B.active&&B._reject(new Ce.Abort(I.error)),B.active=!1,B.on("abort").fire(fe)}),I.oncomplete=Pe(function(){B.active=!1,B._resolve(),"mutatedParts"in I&&Fs.storagemutated.fire(I.mutatedParts)}),this},ya.prototype._promise=function(I,B,Q){var ae=this;if(I==="readwrite"&&this.mode!=="readwrite")return Xn(new Ce.ReadOnly("Transaction is readonly"));if(!this.active)return Xn(new Ce.TransactionInactive);if(this._locked())return new z(function(Se,Fe){ae._blockedFuncs.push([function(){ae._promise(I,B,Q).then(Se,Fe)},Ie])});if(Q)return cn(function(){var Se=new z(function(Fe,He){ae._lock();var Qe=B(Fe,He,ae);Qe&&Qe.then&&Qe.then(Fe,He)});return Se.finally(function(){return ae._unlock()}),Se._lib=!0,Se});var fe=new z(function(Se,Fe){var He=B(Se,Fe,ae);He&&He.then&&He.then(Se,Fe)});return fe._lib=!0,fe},ya.prototype._root=function(){return this.parent?this.parent._root():this},ya.prototype.waitFor=function(I){var B,Q=this._root(),ae=z.resolve(I);Q._waitingFor?Q._waitingFor=Q._waitingFor.then(function(){return ae}):(Q._waitingFor=ae,Q._waitingQueue=[],B=Q.idbtrans.objectStore(Q.storeNames[0]),function Se(){for(++Q._spinCount;Q._waitingQueue.length;)Q._waitingQueue.shift()();Q._waitingFor&&(B.get(-1/0).onsuccess=Se)}());var fe=Q._waitingFor;return new z(function(Se,Fe){ae.then(function(He){return Q._waitingQueue.push(Pe(Se.bind(null,He)))},function(He){return Q._waitingQueue.push(Pe(Fe.bind(null,He)))}).finally(function(){Q._waitingFor===fe&&(Q._waitingFor=null)})})},ya.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ce.Abort))},ya.prototype.table=function(I){var B=this._memoizedTables||(this._memoizedTables={});if(d(B,I))return B[I];var Q=this.schema[I];if(!Q)throw new Ce.NotFound("Table "+I+" not part of transaction");return Q=new this.db.Table(I,Q,this),Q.core=this.db.core.table(I),B[I]=Q},ya);function ya(){}function nl(I,B,Q,ae,fe,Se,Fe){return{name:I,keyPath:B,unique:Q,multi:ae,auto:fe,compound:Se,src:(Q&&!Fe?"&":"")+(ae?"*":"")+(fe?"++":"")+Em(B)}}function Em(I){return typeof I=="string"?I:I?"["+[].join.call(I,"+")+"]":""}function Gd(I,B,Q){return{name:I,primKey:B,indexes:Q,mappedClass:null,idxByName:(ae=function(fe){return[fe.name,fe]},Q.reduce(function(fe,Se,Fe){return Fe=ae(Se,Fe),Fe&&(fe[Fe[0]]=Fe[1]),fe},{}))};var ae}var Kd=function(I){try{return I.only([[]]),Kd=function(){return[[]]},[[]]}catch{return Kd=function(){return _i},_i}};function Yd(I){return I==null?function(){}:typeof I=="string"?(B=I).split(".").length===1?function(Q){return Q[B]}:function(Q){return A(Q,B)}:function(Q){return A(Q,I)};var B}function Nh(I){return[].slice.call(I)}var I1=0;function ps(I){return I==null?":id":typeof I=="string"?I:"[".concat(I.join("+"),"]")}function Ru(I,B,Qe){function ae(rt){if(rt.type===3)return null;if(rt.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Je=rt.lower,at=rt.upper,pt=rt.lowerOpen,rt=rt.upperOpen;return Je===void 0?at===void 0?null:B.upperBound(at,!!rt):at===void 0?B.lowerBound(Je,!!pt):B.bound(Je,at,!!pt,!!rt)}function fe(dt){var Je,at=dt.name;return{name:at,schema:dt,mutate:function(pt){var rt=pt.trans,wt=pt.type,kt=pt.keys,Et=pt.values,Mt=pt.range;return new Promise(function(Kt,nn){Kt=Pe(Kt);var Ht=rt.objectStore(at),Xt=Ht.keyPath==null,an=wt==="put"||wt==="add";if(!an&&wt!=="delete"&&wt!=="deleteRange")throw new Error("Invalid operation type: "+wt);var Wt,mn=(kt||Et||{length:1}).length;if(kt&&Et&&kt.length!==Et.length)throw new Error("Given keys array must have same length as given values array.");if(mn===0)return Kt({numFailures:0,failures:{},results:[],lastResult:void 0});function On(Bs){++ia,Tu(Bs)}var zn=[],cr=[],ia=0;if(wt==="deleteRange"){if(Mt.type===4)return Kt({numFailures:ia,failures:cr,results:[],lastResult:void 0});Mt.type===3?zn.push(Wt=Ht.clear()):zn.push(Wt=Ht.delete(ae(Mt)))}else{var Xt=an?Xt?[Et,kt]:[Et,null]:[kt,null],Jn=Xt[0],ns=Xt[1];if(an)for(var ms=0;ms<mn;++ms)zn.push(Wt=ns&&ns[ms]!==void 0?Ht[wt](Jn[ms],ns[ms]):Ht[wt](Jn[ms])),Wt.onerror=On;else for(ms=0;ms<mn;++ms)zn.push(Wt=Ht[wt](Jn[ms])),Wt.onerror=On}function Ul(Bs){Bs=Bs.target.result,zn.forEach(function(il,kc){return il.error!=null&&(cr[kc]=il.error)}),Kt({numFailures:ia,failures:cr,results:wt==="delete"?kt:zn.map(function(il){return il.result}),lastResult:Bs})}Wt.onerror=function(Bs){On(Bs),Ul(Bs)},Wt.onsuccess=Ul})},getMany:function(pt){var rt=pt.trans,wt=pt.keys;return new Promise(function(kt,Et){kt=Pe(kt);for(var Mt,Kt=rt.objectStore(at),nn=wt.length,Ht=new Array(nn),Xt=0,an=0,Wt=function(zn){zn=zn.target,Ht[zn._pos]=zn.result,++an===Xt&&kt(Ht)},mn=Io(Et),On=0;On<nn;++On)wt[On]!=null&&((Mt=Kt.get(wt[On]))._pos=On,Mt.onsuccess=Wt,Mt.onerror=mn,++Xt);Xt===0&&kt(Ht)})},get:function(pt){var rt=pt.trans,wt=pt.key;return new Promise(function(kt,Et){kt=Pe(kt);var Mt=rt.objectStore(at).get(wt);Mt.onsuccess=function(Kt){return kt(Kt.target.result)},Mt.onerror=Io(Et)})},query:(Je=nt,function(pt){return new Promise(function(rt,wt){rt=Pe(rt);var kt,Et,Mt,Xt=pt.trans,Kt=pt.values,nn=pt.limit,Wt=pt.query,Ht=nn===1/0?void 0:nn,an=Wt.index,Wt=Wt.range,Xt=Xt.objectStore(at),an=an.isPrimaryKey?Xt:Xt.index(an.name),Wt=ae(Wt);if(nn===0)return rt({result:[]});Je?((Ht=Kt?an.getAll(Wt,Ht):an.getAllKeys(Wt,Ht)).onsuccess=function(mn){return rt({result:mn.target.result})},Ht.onerror=Io(wt)):(kt=0,Et=!Kt&&"openKeyCursor"in an?an.openKeyCursor(Wt):an.openCursor(Wt),Mt=[],Et.onsuccess=function(mn){var On=Et.result;return On?(Mt.push(Kt?On.value:On.primaryKey),++kt===nn?rt({result:Mt}):void On.continue()):rt({result:Mt})},Et.onerror=Io(wt))})}),openCursor:function(pt){var rt=pt.trans,wt=pt.values,kt=pt.query,Et=pt.reverse,Mt=pt.unique;return new Promise(function(Kt,nn){Kt=Pe(Kt);var an=kt.index,Ht=kt.range,Xt=rt.objectStore(at),Xt=an.isPrimaryKey?Xt:Xt.index(an.name),an=Et?Mt?"prevunique":"prev":Mt?"nextunique":"next",Wt=!wt&&"openKeyCursor"in Xt?Xt.openKeyCursor(ae(Ht),an):Xt.openCursor(ae(Ht),an);Wt.onerror=Io(nn),Wt.onsuccess=Pe(function(mn){var On,zn,cr,ia,Jn=Wt.result;Jn?(Jn.___id=++I1,Jn.done=!1,On=Jn.continue.bind(Jn),zn=(zn=Jn.continuePrimaryKey)&&zn.bind(Jn),cr=Jn.advance.bind(Jn),ia=function(){throw new Error("Cursor not stopped")},Jn.trans=rt,Jn.stop=Jn.continue=Jn.continuePrimaryKey=Jn.advance=function(){throw new Error("Cursor not started")},Jn.fail=Pe(nn),Jn.next=function(){var ns=this,ms=1;return this.start(function(){return ms--?ns.continue():ns.stop()}).then(function(){return ns})},Jn.start=function(ns){function ms(){if(Wt.result)try{ns()}catch(Bs){Jn.fail(Bs)}else Jn.done=!0,Jn.start=function(){throw new Error("Cursor behind last entry")},Jn.stop()}var Ul=new Promise(function(Bs,il){Bs=Pe(Bs),Wt.onerror=Io(il),Jn.fail=il,Jn.stop=function(kc){Jn.stop=Jn.continue=Jn.continuePrimaryKey=Jn.advance=ia,Bs(kc)}});return Wt.onsuccess=Pe(function(Bs){Wt.onsuccess=ms,ms()}),Jn.continue=On,Jn.continuePrimaryKey=zn,Jn.advance=cr,ms(),Ul},Kt(Jn)):Kt(null)},nn)})},count:function(pt){var rt=pt.query,wt=pt.trans,kt=rt.index,Et=rt.range;return new Promise(function(Mt,Kt){var nn=wt.objectStore(at),Ht=kt.isPrimaryKey?nn:nn.index(kt.name),nn=ae(Et),Ht=nn?Ht.count(nn):Ht.count();Ht.onsuccess=Pe(function(Xt){return Mt(Xt.target.result)}),Ht.onerror=Io(Kt)})}}}var Se,Fe,He,ot=(Fe=Qe,He=Nh((Se=I).objectStoreNames),{schema:{name:Se.name,tables:He.map(function(dt){return Fe.objectStore(dt)}).map(function(dt){var Je=dt.keyPath,rt=dt.autoIncrement,at=o(Je),pt={},rt={name:dt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Je==null,compound:at,keyPath:Je,autoIncrement:rt,unique:!0,extractKey:Yd(Je)},indexes:Nh(dt.indexNames).map(function(wt){return dt.index(wt)}).map(function(Mt){var kt=Mt.name,Et=Mt.unique,Kt=Mt.multiEntry,Mt=Mt.keyPath,Kt={name:kt,compound:o(Mt),keyPath:Mt,unique:Et,multiEntry:Kt,extractKey:Yd(Mt)};return pt[ps(Mt)]=Kt}),getIndexByKeyPath:function(wt){return pt[ps(wt)]}};return pt[":id"]=rt.primaryKey,Je!=null&&(pt[ps(Je)]=rt.primaryKey),rt})},hasGetAll:0<He.length&&"getAll"in Fe.objectStore(He[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Qe=ot.schema,nt=ot.hasGetAll,ot=Qe.tables.map(fe),Ye={};return ot.forEach(function(dt){return Ye[dt.name]=dt}),{stack:"dbcore",transaction:I.transaction.bind(I),table:function(dt){if(!Ye[dt])throw new Error("Table '".concat(dt,"' not found"));return Ye[dt]},MIN_KEY:-1/0,MAX_KEY:Kd(B),schema:Qe}}function Tm(I,B,Q,ae){var fe=Q.IDBKeyRange;return Q.indexedDB,{dbcore:(ae=Ru(B,fe,ae),I.dbcore.reduce(function(Se,Fe){return Fe=Fe.create,r(r({},Se),Fe(Se))},ae))}}function _c(I,ae){var Q=ae.db,ae=Tm(I._middlewares,Q,I._deps,ae);I.core=ae.dbcore,I.tables.forEach(function(fe){var Se=fe.name;I.core.schema.tables.some(function(Fe){return Fe.name===Se})&&(fe.core=I.core.table(Se),I[Se]instanceof I.Table&&(I[Se].core=fe.core))})}function Am(I,B,Q,ae){Q.forEach(function(fe){var Se=ae[fe];B.forEach(function(Fe){var He=function Qe(nt,ot){return v(nt,ot)||(nt=c(nt))&&Qe(nt,ot)}(Fe,fe);(!He||"value"in He&&He.value===void 0)&&(Fe===I.Transaction.prototype||Fe instanceof I.Transaction?y(Fe,fe,{get:function(){return this.table(fe)},set:function(Qe){m(this,fe,{value:Qe,writable:!0,configurable:!0,enumerable:!0})}}):Fe[fe]=new I.Table(fe,Se))})})}function Mh(I,B){B.forEach(function(Q){for(var ae in Q)Q[ae]instanceof I.Table&&delete Q[ae]})}function Ky(I,B){return I._cfg.version-B._cfg.version}function jh(I,B,Q,ae){var fe=I._dbSchema;Q.objectStoreNames.contains("$meta")&&!fe.$meta&&(fe.$meta=Gd("$meta",M1("")[0],[]),I._storeNames.push("$meta"));var Se=I._createTransaction("readwrite",I._storeNames,fe);Se.create(Q),Se._completion.catch(ae);var Fe=Se._reject.bind(Se),He=Ie.transless||Ie;cn(function(){return Ie.trans=Se,Ie.transless=He,B!==0?(_c(I,Q),nt=B,((Qe=Se).storeNames.includes("$meta")?Qe.table("$meta").get("version").then(function(ot){return ot??nt}):z.resolve(nt)).then(function(ot){return dt=ot,Je=Se,at=Q,pt=[],ot=(Ye=I)._versions,rt=Ye._dbSchema=Zd(0,Ye.idbdb,at),(ot=ot.filter(function(wt){return wt._cfg.version>=dt})).length!==0?(ot.forEach(function(wt){pt.push(function(){var kt=rt,Et=wt._cfg.dbschema;Mm(Ye,kt,at),Mm(Ye,Et,at),rt=Ye._dbSchema=Et;var Mt=Im(kt,Et);Mt.add.forEach(function(an){Yy(at,an[0],an[1].primKey,an[1].indexes)}),Mt.change.forEach(function(an){if(an.recreate)throw new Ce.Upgrade("Not yet support for changing primary key");var Wt=at.objectStore(an.name);an.add.forEach(function(mn){return Nm(Wt,mn)}),an.change.forEach(function(mn){Wt.deleteIndex(mn.name),Nm(Wt,mn)}),an.del.forEach(function(mn){return Wt.deleteIndex(mn)})});var Kt=wt._cfg.contentUpgrade;if(Kt&&wt._cfg.version>dt){_c(Ye,at),Je._memoizedTables={};var nn=N(Et);Mt.del.forEach(function(an){nn[an]=kt[an]}),Mh(Ye,[Ye.Transaction.prototype]),Am(Ye,[Ye.Transaction.prototype],a(nn),nn),Je.schema=nn;var Ht,Xt=te(Kt);return Xt&&dr(),Mt=z.follow(function(){var an;(Ht=Kt(Je))&&Xt&&(an=Cr.bind(null,null),Ht.then(an,an))}),Ht&&typeof Ht.then=="function"?z.resolve(Ht):Mt.then(function(){return Ht})}}),pt.push(function(kt){var Et,Mt,Kt=wt._cfg.dbschema;Et=Kt,Mt=kt,[].slice.call(Mt.db.objectStoreNames).forEach(function(nn){return Et[nn]==null&&Mt.db.deleteObjectStore(nn)}),Mh(Ye,[Ye.Transaction.prototype]),Am(Ye,[Ye.Transaction.prototype],Ye._storeNames,Ye._dbSchema),Je.schema=Ye._dbSchema}),pt.push(function(kt){Ye.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Ye.idbdb.version/10)===wt._cfg.version?(Ye.idbdb.deleteObjectStore("$meta"),delete Ye._dbSchema.$meta,Ye._storeNames=Ye._storeNames.filter(function(Et){return Et!=="$meta"})):kt.objectStore("$meta").put(wt._cfg.version,"version"))})}),function wt(){return pt.length?z.resolve(pt.shift()(Je.idbtrans)).then(wt):z.resolve()}().then(function(){N1(rt,at)})):z.resolve();var Ye,dt,Je,at,pt,rt}).catch(Fe)):(a(fe).forEach(function(ot){Yy(Q,ot,fe[ot].primKey,fe[ot].indexes)}),_c(I,Q),void z.follow(function(){return I.on.populate.fire(Se)}).catch(Fe));var Qe,nt})}function Rm(I,B){N1(I._dbSchema,B),B.db.version%10!=0||B.objectStoreNames.contains("$meta")||B.db.createObjectStore("$meta").add(Math.ceil(B.db.version/10-1),"version");var Q=Zd(0,I.idbdb,B);Mm(I,I._dbSchema,B);for(var ae=0,fe=Im(Q,I._dbSchema).change;ae<fe.length;ae++){var Se=function(Fe){if(Fe.change.length||Fe.recreate)return console.warn("Unable to patch indexes of table ".concat(Fe.name," because it has changes on the type of index or primary key.")),{value:void 0};var He=B.objectStore(Fe.name);Fe.add.forEach(function(Qe){Be&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Fe.name,".").concat(Qe.src)),Nm(He,Qe)})}(fe[ae]);if(typeof Se=="object")return Se.value}}function Im(I,B){var Q,ae={del:[],add:[],change:[]};for(Q in I)B[Q]||ae.del.push(Q);for(Q in B){var fe=I[Q],Se=B[Q];if(fe){var Fe={name:Q,def:Se,recreate:!1,del:[],add:[],change:[]};if(""+(fe.primKey.keyPath||"")!=""+(Se.primKey.keyPath||"")||fe.primKey.auto!==Se.primKey.auto)Fe.recreate=!0,ae.change.push(Fe);else{var He=fe.idxByName,Qe=Se.idxByName,nt=void 0;for(nt in He)Qe[nt]||Fe.del.push(nt);for(nt in Qe){var ot=He[nt],Ye=Qe[nt];ot?ot.src!==Ye.src&&Fe.change.push(Ye):Fe.add.push(Ye)}(0<Fe.del.length||0<Fe.add.length||0<Fe.change.length)&&ae.change.push(Fe)}}else ae.add.push([Q,Se])}return ae}function Yy(I,B,Q,ae){var fe=I.db.createObjectStore(B,Q.keyPath?{keyPath:Q.keyPath,autoIncrement:Q.auto}:{autoIncrement:Q.auto});return ae.forEach(function(Se){return Nm(fe,Se)}),fe}function N1(I,B){a(I).forEach(function(Q){B.db.objectStoreNames.contains(Q)||(Be&&console.debug("Dexie: Creating missing table",Q),Yy(B,Q,I[Q].primKey,I[Q].indexes))})}function Nm(I,B){I.createIndex(B.name,B.keyPath,{unique:B.unique,multiEntry:B.multi})}function Zd(I,B,Q){var ae={};return _(B.objectStoreNames,0).forEach(function(fe){for(var Se=Q.objectStore(fe),Fe=nl(Em(nt=Se.keyPath),nt||"",!0,!1,!!Se.autoIncrement,nt&&typeof nt!="string",!0),He=[],Qe=0;Qe<Se.indexNames.length;++Qe){var ot=Se.index(Se.indexNames[Qe]),nt=ot.keyPath,ot=nl(ot.name,nt,!!ot.unique,!!ot.multiEntry,!1,nt&&typeof nt!="string",!1);He.push(ot)}ae[fe]=Gd(fe,Fe,He)}),ae}function Mm(I,B,Q){for(var ae=Q.db.objectStoreNames,fe=0;fe<ae.length;++fe){var Se=ae[fe],Fe=Q.objectStore(Se);I._hasGetAll="getAll"in Fe;for(var He=0;He<Fe.indexNames.length;++He){var Qe=Fe.indexNames[He],nt=Fe.index(Qe).keyPath,ot=typeof nt=="string"?nt:"["+_(nt).join("+")+"]";!B[Se]||(nt=B[Se].idxByName[ot])&&(nt.name=Qe,delete B[Se].idxByName[ot],B[Se].idxByName[Qe]=nt)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(I._hasGetAll=!1)}function M1(I){return I.split(",").map(function(B,Q){var ae=(B=B.trim()).replace(/([&*]|\+\+)/g,""),fe=/^\[/.test(ae)?ae.match(/^\[(.*)\]$/)[1].split("+"):ae;return nl(ae,fe||null,/\&/.test(B),/\*/.test(B),/\+\+/.test(B),o(fe),Q===0)})}var zT=(jm.prototype._parseStoresSpec=function(I,B){a(I).forEach(function(Q){if(I[Q]!==null){var ae=M1(I[Q]),fe=ae.shift();if(fe.unique=!0,fe.multi)throw new Ce.Schema("Primary key cannot be multi-valued");ae.forEach(function(Se){if(Se.auto)throw new Ce.Schema("Only primary key can be marked as autoIncrement (++)");if(!Se.keyPath)throw new Ce.Schema("Index must have a name and cannot be an empty string")}),B[Q]=Gd(Q,fe,ae)}})},jm.prototype.stores=function(Q){var B=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,Q):Q;var Q=B._versions,ae={},fe={};return Q.forEach(function(Se){l(ae,Se._cfg.storesSource),fe=Se._cfg.dbschema={},Se._parseStoresSpec(ae,fe)}),B._dbSchema=fe,Mh(B,[B._allTables,B,B.Transaction.prototype]),Am(B,[B._allTables,B,B.Transaction.prototype,this._cfg.tables],a(fe),fe),B._storeNames=a(fe),this},jm.prototype.upgrade=function(I){return this._cfg.contentUpgrade=Ee(this._cfg.contentUpgrade||qe,I),this},jm);function jm(){}function Zy(I,B){var Q=I._dbNamesDB;return Q||(Q=I._dbNamesDB=new rl(Pa,{addons:[],indexedDB:I,IDBKeyRange:B})).version(1).stores({dbnames:"name"}),Q.table("dbnames")}function Pm(I){return I&&typeof I.databases=="function"}function Xy(I){return cn(function(){return Ie.letThrough=!0,I()})}function Jy(I){return!("from"in I)}var Ls=function(I,B){if(!this){var Q=new Ls;return I&&"d"in I&&l(Q,I),Q}l(this,arguments.length?{d:1,from:I,to:1<arguments.length?B:I}:{d:0})};function Ph(I,B,Q){var ae=Mr(B,Q);if(!isNaN(ae)){if(0<ae)throw RangeError();if(Jy(I))return l(I,{from:B,to:Q,d:1});var fe=I.l,ae=I.r;if(Mr(Q,I.from)<0)return fe?Ph(fe,B,Q):I.l={from:B,to:Q,d:1,l:null,r:null},P1(I);if(0<Mr(B,I.to))return ae?Ph(ae,B,Q):I.r={from:B,to:Q,d:1,l:null,r:null},P1(I);Mr(B,I.from)<0&&(I.from=B,I.l=null,I.d=ae?ae.d+1:1),0<Mr(Q,I.to)&&(I.to=Q,I.r=null,I.d=I.l?I.l.d+1:1),Q=!I.r,fe&&!I.l&&Iu(I,fe),ae&&Q&&Iu(I,ae)}}function Iu(I,B){Jy(B)||function Q(ae,Qe){var Se=Qe.from,Fe=Qe.to,He=Qe.l,Qe=Qe.r;Ph(ae,Se,Fe),He&&Q(ae,He),Qe&&Q(ae,Qe)}(I,B)}function j1(I,B){var Q=Om(B),ae=Q.next();if(ae.done)return!1;for(var fe=ae.value,Se=Om(I),Fe=Se.next(fe.from),He=Fe.value;!ae.done&&!Fe.done;){if(Mr(He.from,fe.to)<=0&&0<=Mr(He.to,fe.from))return!0;Mr(fe.from,He.from)<0?fe=(ae=Q.next(He.from)).value:He=(Fe=Se.next(fe.from)).value}return!1}function Om(I){var B=Jy(I)?null:{s:0,n:I};return{next:function(Q){for(var ae=0<arguments.length;B;)switch(B.s){case 0:if(B.s=1,ae)for(;B.n.l&&Mr(Q,B.n.from)<0;)B={up:B,n:B.n.l,s:1};else for(;B.n.l;)B={up:B,n:B.n.l,s:1};case 1:if(B.s=2,!ae||Mr(Q,B.n.to)<=0)return{value:B.n,done:!1};case 2:if(B.n.r){B.s=3,B={up:B,n:B.n.r,s:0};continue}case 3:B=B.up}return{done:!0}}}}function P1(I){var B,Q,ae=(((B=I.r)===null||B===void 0?void 0:B.d)||0)-(((Q=I.l)===null||Q===void 0?void 0:Q.d)||0),fe=1<ae?"r":ae<-1?"l":"";fe&&(B=fe=="r"?"l":"r",Q=r({},I),ae=I[fe],I.from=ae.from,I.to=ae.to,I[fe]=ae[fe],Q[fe]=ae[B],(I[B]=Q).d=Qy(Q)),I.d=Qy(I)}function Qy(Q){var B=Q.r,Q=Q.l;return(B?Q?Math.max(B.d,Q.d):B.d:Q?Q.d:0)+1}function Dm(I,B){return a(B).forEach(function(Q){I[Q]?Iu(I[Q],B[Q]):I[Q]=function ae(fe){var Se,Fe,He={};for(Se in fe)d(fe,Se)&&(Fe=fe[Se],He[Se]=!Fe||typeof Fe!="object"||L.has(Fe.constructor)?Fe:ae(Fe));return He}(B[Q])}),I}function eb(I,B){return I.all||B.all||Object.keys(I).some(function(Q){return B[Q]&&j1(B[Q],I[Q])})}h(Ls.prototype,((Fa={add:function(I){return Iu(this,I),this},addKey:function(I){return Ph(this,I,I),this},addKeys:function(I){var B=this;return I.forEach(function(Q){return Ph(B,Q,Q)}),this},hasKey:function(I){var B=Om(this).next(I).value;return B&&Mr(B.from,I)<=0&&0<=Mr(B.to,I)}})[U]=function(){return Om(this)},Fa));var Nu={},tb={},nb=!1;function Fm(I){Dm(tb,I),nb||(nb=!0,setTimeout(function(){nb=!1,rb(tb,!(tb={}))},0))}function rb(I,B){B===void 0&&(B=!1);var Q=new Set;if(I.all)for(var ae=0,fe=Object.values(Nu);ae<fe.length;ae++)O1(Fe=fe[ae],I,Q,B);else for(var Se in I){var Fe,He=/^idb\:\/\/(.*)\/(.*)\//.exec(Se);He&&(Se=He[1],He=He[2],(Fe=Nu["idb://".concat(Se,"/").concat(He)])&&O1(Fe,I,Q,B))}Q.forEach(function(Qe){return Qe()})}function O1(I,B,Q,ae){for(var fe=[],Se=0,Fe=Object.entries(I.queries.query);Se<Fe.length;Se++){for(var He=Fe[Se],Qe=He[0],nt=[],ot=0,Ye=He[1];ot<Ye.length;ot++){var dt=Ye[ot];eb(B,dt.obsSet)?dt.subscribers.forEach(function(rt){return Q.add(rt)}):ae&&nt.push(dt)}ae&&fe.push([Qe,nt])}if(ae)for(var Je=0,at=fe;Je<at.length;Je++){var pt=at[Je],Qe=pt[0],nt=pt[1];I.queries.query[Qe]=nt}}function UT(I){var B=I._state,Q=I._deps.indexedDB;if(B.isBeingOpened||I.idbdb)return B.dbReadyPromise.then(function(){return B.dbOpenError?Xn(B.dbOpenError):I});B.isBeingOpened=!0,B.dbOpenError=null,B.openComplete=!1;var ae=B.openCanceller,fe=Math.round(10*I.verno),Se=!1;function Fe(){if(B.openCanceller!==ae)throw new Ce.DatabaseClosed("db.open() was cancelled")}function He(){return new z(function(dt,Je){if(Fe(),!Q)throw new Ce.MissingAPI;var at=I.name,pt=B.autoSchema||!fe?Q.open(at):Q.open(at,fe);if(!pt)throw new Ce.MissingAPI;pt.onerror=Io(Je),pt.onblocked=Pe(I._fireOnBlocked),pt.onupgradeneeded=Pe(function(rt){var wt;ot=pt.transaction,B.autoSchema&&!I._options.allowEmptyDB?(pt.onerror=Tu,ot.abort(),pt.result.close(),(wt=Q.deleteDatabase(at)).onsuccess=wt.onerror=Pe(function(){Je(new Ce.NoSuchDatabase("Database ".concat(at," doesnt exist")))})):(ot.onerror=Io(Je),rt=rt.oldVersion>Math.pow(2,62)?0:rt.oldVersion,Ye=rt<1,I.idbdb=pt.result,Se&&Rm(I,ot),jh(I,rt/10,ot,Je))},Je),pt.onsuccess=Pe(function(){ot=null;var rt,wt,kt,Et,Mt,Kt=I.idbdb=pt.result,nn=_(Kt.objectStoreNames);if(0<nn.length)try{var Ht=Kt.transaction((Et=nn).length===1?Et[0]:Et,"readonly");if(B.autoSchema)wt=Kt,kt=Ht,(rt=I).verno=wt.version/10,kt=rt._dbSchema=Zd(0,wt,kt),rt._storeNames=_(wt.objectStoreNames,0),Am(rt,[rt._allTables],a(kt),kt);else if(Mm(I,I._dbSchema,Ht),((Mt=Im(Zd(0,(Mt=I).idbdb,Ht),Mt._dbSchema)).add.length||Mt.change.some(function(Xt){return Xt.add.length||Xt.change.length}))&&!Se)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Kt.close(),fe=Kt.version+1,Se=!0,dt(He());_c(I,Ht)}catch{}ts.push(I),Kt.onversionchange=Pe(function(Xt){B.vcFired=!0,I.on("versionchange").fire(Xt)}),Kt.onclose=Pe(function(Xt){I.on("close").fire(Xt)}),Ye&&(Mt=I._deps,Ht=at,Kt=Mt.indexedDB,Mt=Mt.IDBKeyRange,Pm(Kt)||Ht===Pa||Zy(Kt,Mt).put({name:Ht}).catch(qe)),dt()},Je)}).catch(function(dt){switch(dt==null?void 0:dt.name){case"UnknownError":if(0<B.PR1398_maxLoop)return B.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),He();break;case"VersionError":if(0<fe)return fe=0,He()}return z.reject(dt)})}var Qe,nt=B.dbReadyResolve,ot=null,Ye=!1;return z.race([ae,(typeof navigator>"u"?z.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(dt){function Je(){return indexedDB.databases().finally(dt)}Qe=setInterval(Je,100),Je()}).finally(function(){return clearInterval(Qe)}):Promise.resolve()).then(He)]).then(function(){return Fe(),B.onReadyBeingFired=[],z.resolve(Xy(function(){return I.on.ready.fire(I.vip)})).then(function dt(){if(0<B.onReadyBeingFired.length){var Je=B.onReadyBeingFired.reduce(Ee,qe);return B.onReadyBeingFired=[],z.resolve(Xy(function(){return Je(I.vip)})).then(dt)}})}).finally(function(){B.openCanceller===ae&&(B.onReadyBeingFired=null,B.isBeingOpened=!1)}).catch(function(dt){B.dbOpenError=dt;try{ot&&ot.abort()}catch{}return ae===B.openCanceller&&I._close(),Xn(dt)}).finally(function(){B.openComplete=!0,nt()}).then(function(){var dt;return Ye&&(dt={},I.tables.forEach(function(Je){Je.schema.indexes.forEach(function(at){at.name&&(dt["idb://".concat(I.name,"/").concat(Je.name,"/").concat(at.name)]=new Ls(-1/0,[[[]]]))}),dt["idb://".concat(I.name,"/").concat(Je.name,"/")]=dt["idb://".concat(I.name,"/").concat(Je.name,"/:dels")]=new Ls(-1/0,[[[]]])}),Fs(Wd).fire(dt),rb(dt,!0)),I})}function Oh(I){function B(Se){return I.next(Se)}var Q=fe(B),ae=fe(function(Se){return I.throw(Se)});function fe(Se){return function(Qe){var He=Se(Qe),Qe=He.value;return He.done?Qe:Qe&&typeof Qe.then=="function"?Qe.then(Q,ae):o(Qe)?Promise.all(Qe).then(Q,ae):Q(Qe)}}return fe(B)()}function Sc(I,B,Q){for(var ae=o(I)?I.slice():[I],fe=0;fe<Q;++fe)ae.push(B);return ae}var qT={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(I){return r(r({},I),{table:function(B){var Q=I.table(B),ae=Q.schema,fe={},Se=[];function Fe(Ye,dt,Je){var at=ps(Ye),pt=fe[at]=fe[at]||[],rt=Ye==null?0:typeof Ye=="string"?1:Ye.length,wt=0<dt,wt=r(r({},Je),{name:wt?"".concat(at,"(virtual-from:").concat(Je.name,")"):Je.name,lowLevelIndex:Je,isVirtual:wt,keyTail:dt,keyLength:rt,extractKey:Yd(Ye),unique:!wt&&Je.unique});return pt.push(wt),wt.isPrimaryKey||Se.push(wt),1<rt&&Fe(rt===2?Ye[0]:Ye.slice(0,rt-1),dt+1,Je),pt.sort(function(kt,Et){return kt.keyTail-Et.keyTail}),wt}B=Fe(ae.primaryKey.keyPath,0,ae.primaryKey),fe[":id"]=[B];for(var He=0,Qe=ae.indexes;He<Qe.length;He++){var nt=Qe[He];Fe(nt.keyPath,0,nt)}function ot(Ye){var dt,Je=Ye.query.index;return Je.isVirtual?r(r({},Ye),{query:{index:Je.lowLevelIndex,range:(dt=Ye.query.range,Je=Je.keyTail,{type:dt.type===1?2:dt.type,lower:Sc(dt.lower,dt.lowerOpen?I.MAX_KEY:I.MIN_KEY,Je),lowerOpen:!0,upper:Sc(dt.upper,dt.upperOpen?I.MIN_KEY:I.MAX_KEY,Je),upperOpen:!0})}}):Ye}return r(r({},Q),{schema:r(r({},ae),{primaryKey:B,indexes:Se,getIndexByKeyPath:function(Ye){return(Ye=fe[ps(Ye)])&&Ye[0]}}),count:function(Ye){return Q.count(ot(Ye))},query:function(Ye){return Q.query(ot(Ye))},openCursor:function(Ye){var dt=Ye.query.index,Je=dt.keyTail,at=dt.isVirtual,pt=dt.keyLength;return at?Q.openCursor(ot(Ye)).then(function(wt){return wt&&rt(wt)}):Q.openCursor(Ye);function rt(wt){return Object.create(wt,{continue:{value:function(kt){kt!=null?wt.continue(Sc(kt,Ye.reverse?I.MAX_KEY:I.MIN_KEY,Je)):Ye.unique?wt.continue(wt.key.slice(0,pt).concat(Ye.reverse?I.MIN_KEY:I.MAX_KEY,Je)):wt.continue()}},continuePrimaryKey:{value:function(kt,Et){wt.continuePrimaryKey(Sc(kt,I.MAX_KEY,Je),Et)}},primaryKey:{get:function(){return wt.primaryKey}},key:{get:function(){var kt=wt.key;return pt===1?kt[0]:kt.slice(0,pt)}},value:{get:function(){return wt.value}}})}}})}})}};function Lm(I,B,Q,ae){return Q=Q||{},ae=ae||"",a(I).forEach(function(fe){var Se,Fe,He;d(B,fe)?(Se=I[fe],Fe=B[fe],typeof Se=="object"&&typeof Fe=="object"&&Se&&Fe?(He=J(Se))!==J(Fe)?Q[ae+fe]=B[fe]:He==="Object"?Lm(Se,Fe,Q,ae+fe+"."):Se!==Fe&&(Q[ae+fe]=B[fe]):Se!==Fe&&(Q[ae+fe]=B[fe])):Q[ae+fe]=void 0}),a(B).forEach(function(fe){d(I,fe)||(Q[ae+fe]=B[fe])}),Q}function Bm(I,B){return B.type==="delete"?B.keys:B.keys||B.values.map(I.extractKey)}var D1={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(I){return r(r({},I),{table:function(B){var Q=I.table(B),ae=Q.schema.primaryKey;return r(r({},Q),{mutate:function(fe){var Se=Ie.trans,Fe=Se.table(B).hook,He=Fe.deleting,Qe=Fe.creating,nt=Fe.updating;switch(fe.type){case"add":if(Qe.fire===qe)break;return Se._promise("readwrite",function(){return ot(fe)},!0);case"put":if(Qe.fire===qe&&nt.fire===qe)break;return Se._promise("readwrite",function(){return ot(fe)},!0);case"delete":if(He.fire===qe)break;return Se._promise("readwrite",function(){return ot(fe)},!0);case"deleteRange":if(He.fire===qe)break;return Se._promise("readwrite",function(){return function Ye(dt,Je,at){return Q.query({trans:dt,values:!1,query:{index:ae,range:Je},limit:at}).then(function(pt){var rt=pt.result;return ot({type:"delete",keys:rt,trans:dt}).then(function(wt){return 0<wt.numFailures?Promise.reject(wt.failures[0]):rt.length<at?{failures:[],numFailures:0,lastResult:void 0}:Ye(dt,r(r({},Je),{lower:rt[rt.length-1],lowerOpen:!0}),at)})})}(fe.trans,fe.range,1e4)},!0)}return Q.mutate(fe);function ot(Ye){var dt,Je,at,pt=Ie.trans,rt=Ye.keys||Bm(ae,Ye);if(!rt)throw new Error("Keys missing");return(Ye=Ye.type==="add"||Ye.type==="put"?r(r({},Ye),{keys:rt}):r({},Ye)).type!=="delete"&&(Ye.values=i([],Ye.values)),Ye.keys&&(Ye.keys=i([],Ye.keys)),dt=Q,at=rt,((Je=Ye).type==="add"?Promise.resolve([]):dt.getMany({trans:Je.trans,keys:at,cache:"immutable"})).then(function(wt){var kt=rt.map(function(Et,Mt){var Kt,nn,Ht,Xt=wt[Mt],an={onerror:null,onsuccess:null};return Ye.type==="delete"?He.fire.call(an,Et,Xt,pt):Ye.type==="add"||Xt===void 0?(Kt=Qe.fire.call(an,Et,Ye.values[Mt],pt),Et==null&&Kt!=null&&(Ye.keys[Mt]=Et=Kt,ae.outbound||R(Ye.values[Mt],ae.keyPath,Et))):(Kt=Lm(Xt,Ye.values[Mt]),(nn=nt.fire.call(an,Kt,Et,Xt,pt))&&(Ht=Ye.values[Mt],Object.keys(nn).forEach(function(Wt){d(Ht,Wt)?Ht[Wt]=nn[Wt]:R(Ht,Wt,nn[Wt])}))),an});return Q.mutate(Ye).then(function(Et){for(var Mt=Et.failures,Kt=Et.results,nn=Et.numFailures,Et=Et.lastResult,Ht=0;Ht<rt.length;++Ht){var Xt=(Kt||rt)[Ht],an=kt[Ht];Xt==null?an.onerror&&an.onerror(Mt[Ht]):an.onsuccess&&an.onsuccess(Ye.type==="put"&&wt[Ht]?Ye.values[Ht]:Xt)}return{failures:Mt,results:Kt,numFailures:nn,lastResult:Et}}).catch(function(Et){return kt.forEach(function(Mt){return Mt.onerror&&Mt.onerror(Et)}),Promise.reject(Et)})})}}})}})}};function ib(I,B,Q){try{if(!B||B.keys.length<I.length)return null;for(var ae=[],fe=0,Se=0;fe<B.keys.length&&Se<I.length;++fe)Mr(B.keys[fe],I[Se])===0&&(ae.push(Q?V(B.values[fe]):B.values[fe]),++Se);return ae.length===I.length?ae:null}catch{return null}}var F1={stack:"dbcore",level:-1,create:function(I){return{table:function(B){var Q=I.table(B);return r(r({},Q),{getMany:function(ae){if(!ae.cache)return Q.getMany(ae);var fe=ib(ae.keys,ae.trans._cache,ae.cache==="clone");return fe?z.resolve(fe):Q.getMany(ae).then(function(Se){return ae.trans._cache={keys:ae.keys,values:ae.cache==="clone"?V(Se):Se},Se})},mutate:function(ae){return ae.type!=="add"&&(ae.trans._cache=null),Q.mutate(ae)}})}}}};function Mu(I,B){return I.trans.mode==="readonly"&&!!I.subscr&&!I.trans.explicit&&I.trans.db._options.cache!=="disabled"&&!B.schema.primaryKey.outbound}function L1(I,B){switch(I){case"query":return B.values&&!B.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var VT={stack:"dbcore",level:0,name:"Observability",create:function(I){var B=I.schema.name,Q=new Ls(I.MIN_KEY,I.MAX_KEY);return r(r({},I),{transaction:function(ae,fe,Se){if(Ie.subscr&&fe!=="readonly")throw new Ce.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ie.querier));return I.transaction(ae,fe,Se)},table:function(ae){var fe=I.table(ae),Se=fe.schema,Fe=Se.primaryKey,Ye=Se.indexes,He=Fe.extractKey,Qe=Fe.outbound,nt=Fe.autoIncrement&&Ye.filter(function(Je){return Je.compound&&Je.keyPath.includes(Fe.keyPath)}),ot=r(r({},fe),{mutate:function(Je){function at(Wt){return Wt="idb://".concat(B,"/").concat(ae,"/").concat(Wt),Et[Wt]||(Et[Wt]=new Ls)}var pt,rt,wt,kt=Je.trans,Et=Je.mutatedParts||(Je.mutatedParts={}),Mt=at(""),Kt=at(":dels"),nn=Je.type,an=Je.type==="deleteRange"?[Je.range]:Je.type==="delete"?[Je.keys]:Je.values.length<50?[Bm(Fe,Je).filter(function(Wt){return Wt}),Je.values]:[],Ht=an[0],Xt=an[1],an=Je.trans._cache;return o(Ht)?(Mt.addKeys(Ht),(an=nn==="delete"||Ht.length===Xt.length?ib(Ht,an):null)||Kt.addKeys(Ht),(an||Xt)&&(pt=at,rt=an,wt=Xt,Se.indexes.forEach(function(Wt){var mn=pt(Wt.name||"");function On(cr){return cr!=null?Wt.extractKey(cr):null}function zn(cr){return Wt.multiEntry&&o(cr)?cr.forEach(function(ia){return mn.addKey(ia)}):mn.addKey(cr)}(rt||wt).forEach(function(cr,ns){var Jn=rt&&On(rt[ns]),ns=wt&&On(wt[ns]);Mr(Jn,ns)!==0&&(Jn!=null&&zn(Jn),ns!=null&&zn(ns))})}))):Ht?(Xt={from:(Xt=Ht.lower)!==null&&Xt!==void 0?Xt:I.MIN_KEY,to:(Xt=Ht.upper)!==null&&Xt!==void 0?Xt:I.MAX_KEY},Kt.add(Xt),Mt.add(Xt)):(Mt.add(Q),Kt.add(Q),Se.indexes.forEach(function(Wt){return at(Wt.name).add(Q)})),fe.mutate(Je).then(function(Wt){return!Ht||Je.type!=="add"&&Je.type!=="put"||(Mt.addKeys(Wt.results),nt&&nt.forEach(function(mn){for(var On=Je.values.map(function(Jn){return mn.extractKey(Jn)}),zn=mn.keyPath.findIndex(function(Jn){return Jn===Fe.keyPath}),cr=0,ia=Wt.results.length;cr<ia;++cr)On[cr][zn]=Wt.results[cr];at(mn.name).addKeys(On)})),kt.mutatedParts=Dm(kt.mutatedParts||{},Et),Wt})}}),Ye=function(at){var pt=at.query,at=pt.index,pt=pt.range;return[at,new Ls((at=pt.lower)!==null&&at!==void 0?at:I.MIN_KEY,(pt=pt.upper)!==null&&pt!==void 0?pt:I.MAX_KEY)]},dt={get:function(Je){return[Fe,new Ls(Je.key)]},getMany:function(Je){return[Fe,new Ls().addKeys(Je.keys)]},count:Ye,query:Ye,openCursor:Ye};return a(dt).forEach(function(Je){ot[Je]=function(at){var pt=Ie.subscr,rt=!!pt,wt=Mu(Ie,fe)&&L1(Je,at)?at.obsSet={}:pt;if(rt){var kt=function(Xt){return Xt="idb://".concat(B,"/").concat(ae,"/").concat(Xt),wt[Xt]||(wt[Xt]=new Ls)},Et=kt(""),Mt=kt(":dels"),pt=dt[Je](at),rt=pt[0],pt=pt[1];if((Je==="query"&&rt.isPrimaryKey&&!at.values?Mt:kt(rt.name||"")).add(pt),!rt.isPrimaryKey){if(Je!=="count"){var Kt=Je==="query"&&Qe&&at.values&&fe.query(r(r({},at),{values:!1}));return fe[Je].apply(this,arguments).then(function(Xt){if(Je==="query"){if(Qe&&at.values)return Kt.then(function(On){return On=On.result,Et.addKeys(On),Xt});var an=at.values?Xt.result.map(He):Xt.result;(at.values?Et:Mt).addKeys(an)}else if(Je==="openCursor"){var Wt=Xt,mn=at.values;return Wt&&Object.create(Wt,{key:{get:function(){return Mt.addKey(Wt.primaryKey),Wt.key}},primaryKey:{get:function(){var On=Wt.primaryKey;return Mt.addKey(On),On}},value:{get:function(){return mn&&Et.addKey(Wt.primaryKey),Wt.value}}})}return Xt})}Mt.add(Q)}}return fe[Je].apply(this,arguments)}}),ot}})}};function B1(I,B,Q){if(Q.numFailures===0)return B;if(B.type==="deleteRange")return null;var ae=B.keys?B.keys.length:"values"in B&&B.values?B.values.length:1;return Q.numFailures===ae?null:(B=r({},B),o(B.keys)&&(B.keys=B.keys.filter(function(fe,Se){return!(Se in Q.failures)})),"values"in B&&o(B.values)&&(B.values=B.values.filter(function(fe,Se){return!(Se in Q.failures)})),B)}function $m(I,B){return Q=I,((ae=B).lower===void 0||(ae.lowerOpen?0<Mr(Q,ae.lower):0<=Mr(Q,ae.lower)))&&(I=I,(B=B).upper===void 0||(B.upperOpen?Mr(I,B.upper)<0:Mr(I,B.upper)<=0));var Q,ae}function sb(I,B,dt,ae,fe,Se){if(!dt||dt.length===0)return I;var Fe=B.query.index,He=Fe.multiEntry,Qe=B.query.range,nt=ae.schema.primaryKey.extractKey,ot=Fe.extractKey,Ye=(Fe.lowLevelIndex||Fe).extractKey,dt=dt.reduce(function(Je,at){var pt=Je,rt=[];if(at.type==="add"||at.type==="put")for(var wt=new Ls,kt=at.values.length-1;0<=kt;--kt){var Et,Mt=at.values[kt],Kt=nt(Mt);wt.hasKey(Kt)||(Et=ot(Mt),(He&&o(Et)?Et.some(function(Wt){return $m(Wt,Qe)}):$m(Et,Qe))&&(wt.addKey(Kt),rt.push(Mt)))}switch(at.type){case"add":var nn=new Ls().addKeys(B.values?Je.map(function(mn){return nt(mn)}):Je),pt=Je.concat(B.values?rt.filter(function(mn){return mn=nt(mn),!nn.hasKey(mn)&&(nn.addKey(mn),!0)}):rt.map(function(mn){return nt(mn)}).filter(function(mn){return!nn.hasKey(mn)&&(nn.addKey(mn),!0)}));break;case"put":var Ht=new Ls().addKeys(at.values.map(function(mn){return nt(mn)}));pt=Je.filter(function(mn){return!Ht.hasKey(B.values?nt(mn):mn)}).concat(B.values?rt:rt.map(function(mn){return nt(mn)}));break;case"delete":var Xt=new Ls().addKeys(at.keys);pt=Je.filter(function(mn){return!Xt.hasKey(B.values?nt(mn):mn)});break;case"deleteRange":var an=at.range;pt=Je.filter(function(mn){return!$m(nt(mn),an)})}return pt},I);return dt===I?I:(dt.sort(function(Je,at){return Mr(Ye(Je),Ye(at))||Mr(nt(Je),nt(at))}),B.limit&&B.limit<1/0&&(dt.length>B.limit?dt.length=B.limit:I.length===B.limit&&dt.length<B.limit&&(fe.dirty=!0)),Se?Object.freeze(dt):dt)}function Xd(I,B){return Mr(I.lower,B.lower)===0&&Mr(I.upper,B.upper)===0&&!!I.lowerOpen==!!B.lowerOpen&&!!I.upperOpen==!!B.upperOpen}function Dh(I,B){return function(Q,ae,fe,Se){if(Q===void 0)return ae!==void 0?-1:0;if(ae===void 0)return 1;if((ae=Mr(Q,ae))===0){if(fe&&Se)return 0;if(fe)return 1;if(Se)return-1}return ae}(I.lower,B.lower,I.lowerOpen,B.lowerOpen)<=0&&0<=function(Q,ae,fe,Se){if(Q===void 0)return ae!==void 0?1:0;if(ae===void 0)return-1;if((ae=Mr(Q,ae))===0){if(fe&&Se)return 0;if(fe)return-1;if(Se)return 1}return ae}(I.upper,B.upper,I.upperOpen,B.upperOpen)}function HT(I,B,Q,ae){I.subscribers.add(Q),ae.addEventListener("abort",function(){var fe,Se;I.subscribers.delete(Q),I.subscribers.size===0&&(fe=I,Se=B,setTimeout(function(){fe.subscribers.size===0&&$(Se,fe)},3e3))})}var zm={stack:"dbcore",level:0,name:"Cache",create:function(I){var B=I.schema.name;return r(r({},I),{transaction:function(Q,ae,fe){var Se,Fe,He=I.transaction(Q,ae,fe);return ae==="readwrite"&&(Fe=(Se=new AbortController).signal,fe=function(Qe){return function(){if(Se.abort(),ae==="readwrite"){for(var nt=new Set,ot=0,Ye=Q;ot<Ye.length;ot++){var dt=Ye[ot],Je=Nu["idb://".concat(B,"/").concat(dt)];if(Je){var at=I.table(dt),pt=Je.optimisticOps.filter(function(mn){return mn.trans===He});if(He._explicit&&Qe&&He.mutatedParts)for(var rt=0,wt=Object.values(Je.queries.query);rt<wt.length;rt++)for(var kt=0,Et=(nn=wt[rt]).slice();kt<Et.length;kt++)eb((Ht=Et[kt]).obsSet,He.mutatedParts)&&($(nn,Ht),Ht.subscribers.forEach(function(mn){return nt.add(mn)}));else if(0<pt.length){Je.optimisticOps=Je.optimisticOps.filter(function(mn){return mn.trans!==He});for(var Mt=0,Kt=Object.values(Je.queries.query);Mt<Kt.length;Mt++)for(var nn,Ht,Xt,an=0,Wt=(nn=Kt[Mt]).slice();an<Wt.length;an++)(Ht=Wt[an]).res!=null&&He.mutatedParts&&(Qe&&!Ht.dirty?(Xt=Object.isFrozen(Ht.res),Xt=sb(Ht.res,Ht.req,pt,at,Ht,Xt),Ht.dirty?($(nn,Ht),Ht.subscribers.forEach(function(mn){return nt.add(mn)})):Xt!==Ht.res&&(Ht.res=Xt,Ht.promise=z.resolve({result:Xt}))):(Ht.dirty&&$(nn,Ht),Ht.subscribers.forEach(function(mn){return nt.add(mn)})))}}}nt.forEach(function(mn){return mn()})}}},He.addEventListener("abort",fe(!1),{signal:Fe}),He.addEventListener("error",fe(!1),{signal:Fe}),He.addEventListener("complete",fe(!0),{signal:Fe})),He},table:function(Q){var ae=I.table(Q),fe=ae.schema.primaryKey;return r(r({},ae),{mutate:function(Se){var Fe=Ie.trans;if(fe.outbound||Fe.db._options.cache==="disabled"||Fe.explicit||Fe.idbtrans.mode!=="readwrite")return ae.mutate(Se);var He=Nu["idb://".concat(B,"/").concat(Q)];return He?(Fe=ae.mutate(Se),Se.type!=="add"&&Se.type!=="put"||!(50<=Se.values.length||Bm(fe,Se).some(function(Qe){return Qe==null}))?(He.optimisticOps.push(Se),Se.mutatedParts&&Fm(Se.mutatedParts),Fe.then(function(Qe){0<Qe.numFailures&&($(He.optimisticOps,Se),(Qe=B1(0,Se,Qe))&&He.optimisticOps.push(Qe),Se.mutatedParts&&Fm(Se.mutatedParts))}),Fe.catch(function(){$(He.optimisticOps,Se),Se.mutatedParts&&Fm(Se.mutatedParts)})):Fe.then(function(Qe){var nt=B1(0,r(r({},Se),{values:Se.values.map(function(ot,Ye){var dt;return Qe.failures[Ye]?ot:(ot=(dt=fe.keyPath)!==null&&dt!==void 0&&dt.includes(".")?V(ot):r({},ot),R(ot,fe.keyPath,Qe.results[Ye]),ot)})}),Qe);He.optimisticOps.push(nt),queueMicrotask(function(){return Se.mutatedParts&&Fm(Se.mutatedParts)})}),Fe):ae.mutate(Se)},query:function(Se){if(!Mu(Ie,ae)||!L1("query",Se))return ae.query(Se);var Fe=((nt=Ie.trans)===null||nt===void 0?void 0:nt.db._options.cache)==="immutable",Ye=Ie,He=Ye.requery,Qe=Ye.signal,nt=function(at,pt,rt,wt){var kt=Nu["idb://".concat(at,"/").concat(pt)];if(!kt)return[];if(!(pt=kt.queries[rt]))return[null,!1,kt,null];var Et=pt[(wt.query?wt.query.index.name:null)||""];if(!Et)return[null,!1,kt,null];switch(rt){case"query":var Mt=Et.find(function(Kt){return Kt.req.limit===wt.limit&&Kt.req.values===wt.values&&Xd(Kt.req.query.range,wt.query.range)});return Mt?[Mt,!0,kt,Et]:[Et.find(function(Kt){return("limit"in Kt.req?Kt.req.limit:1/0)>=wt.limit&&(!wt.values||Kt.req.values)&&Dh(Kt.req.query.range,wt.query.range)}),!1,kt,Et];case"count":return Mt=Et.find(function(Kt){return Xd(Kt.req.query.range,wt.query.range)}),[Mt,!!Mt,kt,Et]}}(B,Q,"query",Se),ot=nt[0],Ye=nt[1],dt=nt[2],Je=nt[3];return ot&&Ye?ot.obsSet=Se.obsSet:(Ye=ae.query(Se).then(function(at){var pt=at.result;if(ot&&(ot.res=pt),Fe){for(var rt=0,wt=pt.length;rt<wt;++rt)Object.freeze(pt[rt]);Object.freeze(pt)}else at.result=V(pt);return at}).catch(function(at){return Je&&ot&&$(Je,ot),Promise.reject(at)}),ot={obsSet:Se.obsSet,promise:Ye,subscribers:new Set,type:"query",req:Se,dirty:!1},Je?Je.push(ot):(Je=[ot],(dt=dt||(Nu["idb://".concat(B,"/").concat(Q)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[Se.query.index.name||""]=Je)),HT(ot,Je,He,Qe),ot.promise.then(function(at){return{result:sb(at.result,Se,dt==null?void 0:dt.optimisticOps,ae,ot,Fe)}})}})}})}};function Fh(I,B){return new Proxy(I,{get:function(Q,ae,fe){return ae==="db"?B:Reflect.get(Q,ae,fe)}})}var rl=(ji.prototype.version=function(I){if(isNaN(I)||I<.1)throw new Ce.Type("Given version is not a positive number");if(I=Math.round(10*I)/10,this.idbdb||this._state.isBeingOpened)throw new Ce.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,I);var B=this._versions,Q=B.filter(function(ae){return ae._cfg.version===I})[0];return Q||(Q=new this.Version(I),B.push(Q),B.sort(Ky),Q.stores({}),this._state.autoSchema=!1,Q)},ji.prototype._whenReady=function(I){var B=this;return this.idbdb&&(this._state.openComplete||Ie.letThrough||this._vip)?I():new z(function(Q,ae){if(B._state.openComplete)return ae(new Ce.DatabaseClosed(B._state.dbOpenError));if(!B._state.isBeingOpened){if(!B._state.autoOpen)return void ae(new Ce.DatabaseClosed);B.open().catch(qe)}B._state.dbReadyPromise.then(Q,ae)}).then(I)},ji.prototype.use=function(I){var B=I.stack,Q=I.create,ae=I.level,fe=I.name;return fe&&this.unuse({stack:B,name:fe}),I=this._middlewares[B]||(this._middlewares[B]=[]),I.push({stack:B,create:Q,level:ae??10,name:fe}),I.sort(function(Se,Fe){return Se.level-Fe.level}),this},ji.prototype.unuse=function(I){var B=I.stack,Q=I.name,ae=I.create;return B&&this._middlewares[B]&&(this._middlewares[B]=this._middlewares[B].filter(function(fe){return ae?fe.create!==ae:!!Q&&fe.name!==Q})),this},ji.prototype.open=function(){var I=this;return Xe(xe,function(){return UT(I)})},ji.prototype._close=function(){var I=this._state,B=ts.indexOf(this);if(0<=B&&ts.splice(B,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}I.isBeingOpened||(I.dbReadyPromise=new z(function(Q){I.dbReadyResolve=Q}),I.openCanceller=new z(function(Q,ae){I.cancelOpen=ae}))},ji.prototype.close=function(Q){var B=(Q===void 0?{disableAutoOpen:!0}:Q).disableAutoOpen,Q=this._state;B?(Q.isBeingOpened&&Q.cancelOpen(new Ce.DatabaseClosed),this._close(),Q.autoOpen=!1,Q.dbOpenError=new Ce.DatabaseClosed):(this._close(),Q.autoOpen=this._options.autoOpen||Q.isBeingOpened,Q.openComplete=!1,Q.dbOpenError=null)},ji.prototype.delete=function(I){var B=this;I===void 0&&(I={disableAutoOpen:!0});var Q=0<arguments.length&&typeof arguments[0]!="object",ae=this._state;return new z(function(fe,Se){function Fe(){B.close(I);var He=B._deps.indexedDB.deleteDatabase(B.name);He.onsuccess=Pe(function(){var Qe,nt,ot;Qe=B._deps,nt=B.name,ot=Qe.indexedDB,Qe=Qe.IDBKeyRange,Pm(ot)||nt===Pa||Zy(ot,Qe).delete(nt).catch(qe),fe()}),He.onerror=Io(Se),He.onblocked=B._fireOnBlocked}if(Q)throw new Ce.InvalidArgument("Invalid closeOptions argument to db.delete()");ae.isBeingOpened?ae.dbReadyPromise.then(Fe):Fe()})},ji.prototype.backendDB=function(){return this.idbdb},ji.prototype.isOpen=function(){return this.idbdb!==null},ji.prototype.hasBeenClosed=function(){var I=this._state.dbOpenError;return I&&I.name==="DatabaseClosed"},ji.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ji.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ji.prototype,"tables",{get:function(){var I=this;return a(this._allTables).map(function(B){return I._allTables[B]})},enumerable:!1,configurable:!0}),ji.prototype.transaction=function(){var I=(function(B,Q,ae){var fe=arguments.length;if(fe<2)throw new Ce.InvalidArgument("Too few arguments");for(var Se=new Array(fe-1);--fe;)Se[fe-1]=arguments[fe];return ae=Se.pop(),[B,P(Se),ae]}).apply(this,arguments);return this._transaction.apply(this,I)},ji.prototype._transaction=function(I,B,Q){var ae=this,fe=Ie.trans;fe&&fe.db===this&&I.indexOf("!")===-1||(fe=null);var Se,Fe,He=I.indexOf("?")!==-1;I=I.replace("!","").replace("?","");try{if(Fe=B.map(function(nt){if(nt=nt instanceof ae.Table?nt.name:nt,typeof nt!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return nt}),I=="r"||I===ra)Se=ra;else{if(I!="rw"&&I!=Li)throw new Ce.InvalidArgument("Invalid transaction mode: "+I);Se=Li}if(fe){if(fe.mode===ra&&Se===Li){if(!He)throw new Ce.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");fe=null}fe&&Fe.forEach(function(nt){if(fe&&fe.storeNames.indexOf(nt)===-1){if(!He)throw new Ce.SubTransaction("Table "+nt+" not included in parent transaction.");fe=null}}),He&&fe&&!fe.active&&(fe=null)}}catch(nt){return fe?fe._promise(null,function(ot,Ye){Ye(nt)}):Xn(nt)}var Qe=(function nt(ot,Ye,dt,Je,at){return z.resolve().then(function(){var pt=Ie.transless||Ie,rt=ot._createTransaction(Ye,dt,ot._dbSchema,Je);if(rt.explicit=!0,pt={trans:rt,transless:pt},Je)rt.idbtrans=Je.idbtrans;else try{rt.create(),rt.idbtrans._explicit=!0,ot._state.PR1398_maxLoop=3}catch(Et){return Et.name===je.InvalidState&&ot.isOpen()&&0<--ot._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ot.close({disableAutoOpen:!1}),ot.open().then(function(){return nt(ot,Ye,dt,null,at)})):Xn(Et)}var wt,kt=te(at);return kt&&dr(),pt=z.follow(function(){var Et;(wt=at.call(rt,rt))&&(kt?(Et=Cr.bind(null,null),wt.then(Et,Et)):typeof wt.next=="function"&&typeof wt.throw=="function"&&(wt=Oh(wt)))},pt),(wt&&typeof wt.then=="function"?z.resolve(wt).then(function(Et){return rt.active?Et:Xn(new Ce.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):pt.then(function(){return wt})).then(function(Et){return Je&&rt._resolve(),rt._completion.then(function(){return Et})}).catch(function(Et){return rt._reject(Et),Xn(Et)})})}).bind(null,this,Se,Fe,fe,Q);return fe?fe._promise(Se,Qe,"lock"):Ie.trans?Xe(Ie.transless,function(){return ae._whenReady(Qe)}):this._whenReady(Qe)},ji.prototype.table=function(I){if(!d(this._allTables,I))throw new Ce.InvalidTable("Table ".concat(I," does not exist"));return this._allTables[I]},ji);function ji(I,B){var Q=this;this._middlewares={},this.verno=0;var ae=ji.dependencies;this._options=B=r({addons:ji.addons,autoOpen:!0,indexedDB:ae.indexedDB,IDBKeyRange:ae.IDBKeyRange,cache:"cloned"},B),this._deps={indexedDB:B.indexedDB,IDBKeyRange:B.IDBKeyRange},ae=B.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var fe,Se,Fe,He,Qe,nt={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:qe,dbReadyPromise:null,cancelOpen:qe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:B.autoOpen};nt.dbReadyPromise=new z(function(Ye){nt.dbReadyResolve=Ye}),nt.openCanceller=new z(function(Ye,dt){nt.cancelOpen=dt}),this._state=nt,this.name=I,this.on=wc(this,"populate","blocked","versionchange","close",{ready:[Ee,qe]}),this.on.ready.subscribe=S(this.on.ready.subscribe,function(Ye){return function(dt,Je){ji.vip(function(){var at,pt=Q._state;pt.openComplete?(pt.dbOpenError||z.resolve().then(dt),Je&&Ye(dt)):pt.onReadyBeingFired?(pt.onReadyBeingFired.push(dt),Je&&Ye(dt)):(Ye(dt),at=Q,Je||Ye(function rt(){at.on.ready.unsubscribe(dt),at.on.ready.unsubscribe(rt)}))})}}),this.Collection=(fe=this,$d(Vd.prototype,function(wt,rt){this.db=fe;var Je=el,at=null;if(rt)try{Je=rt()}catch(kt){at=kt}var pt=wt._ctx,rt=pt.table,wt=rt.hook.reading.fire;this._ctx={table:rt,index:pt.index,isPrimKey:!pt.index||rt.schema.primKey.keyPath&&pt.index===rt.schema.primKey.name,range:Je,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:at,or:pt.or,valueMapper:wt!==Re?wt:null}})),this.Table=(Se=this,$d(Uy.prototype,function(Ye,dt,Je){this.db=Se,this._tx=Je,this.name=Ye,this.schema=dt,this.hook=Se._allTables[Ye]?Se._allTables[Ye].hook:wc(null,{creating:[Ae,qe],reading:[K,Re],updating:[oe,qe],deleting:[le,qe]})})),this.Transaction=(Fe=this,$d(Gy.prototype,function(Ye,dt,Je,at,pt){var rt=this;this.db=Fe,this.mode=Ye,this.storeNames=dt,this.schema=Je,this.chromeTransactionDurability=at,this.idbtrans=null,this.on=wc(this,"complete","error","abort"),this.parent=pt||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new z(function(wt,kt){rt._resolve=wt,rt._reject=kt}),this._completion.then(function(){rt.active=!1,rt.on.complete.fire()},function(wt){var kt=rt.active;return rt.active=!1,rt.on.error.fire(wt),rt.parent?rt.parent._reject(wt):kt&&rt.idbtrans&&rt.idbtrans.abort(),Xn(wt)})})),this.Version=(He=this,$d(zT.prototype,function(Ye){this.db=He,this._cfg={version:Ye,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Qe=this,$d(Eu.prototype,function(Ye,dt,Je){if(this.db=Qe,this._ctx={table:Ye,index:dt===":id"?null:dt,or:Je},this._cmp=this._ascending=Mr,this._descending=function(at,pt){return Mr(pt,at)},this._max=function(at,pt){return 0<Mr(at,pt)?at:pt},this._min=function(at,pt){return Mr(at,pt)<0?at:pt},this._IDBKeyRange=Qe._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ce.MissingAPI})),this.on("versionchange",function(Ye){0<Ye.newVersion?console.warn("Another connection wants to upgrade database '".concat(Q.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Q.name,"'. Closing db now to resume the delete request.")),Q.close({disableAutoOpen:!1})}),this.on("blocked",function(Ye){!Ye.newVersion||Ye.newVersion<Ye.oldVersion?console.warn("Dexie.delete('".concat(Q.name,"') was blocked")):console.warn("Upgrade '".concat(Q.name,"' blocked by other connection holding version ").concat(Ye.oldVersion/10))}),this._maxKey=Kd(B.IDBKeyRange),this._createTransaction=function(Ye,dt,Je,at){return new Q.Transaction(Ye,dt,Je,Q._options.chromeTransactionDurability,at)},this._fireOnBlocked=function(Ye){Q.on("blocked").fire(Ye),ts.filter(function(dt){return dt.name===Q.name&&dt!==Q&&!dt._state.vcFired}).map(function(dt){return dt.on("versionchange").fire(Ye)})},this.use(F1),this.use(zm),this.use(VT),this.use(qT),this.use(D1);var ot=new Proxy(this,{get:function(Ye,dt,Je){if(dt==="_vip")return!0;if(dt==="table")return function(pt){return Fh(Q.table(pt),ot)};var at=Reflect.get(Ye,dt,Je);return at instanceof Uy?Fh(at,ot):dt==="tables"?at.map(function(pt){return Fh(pt,ot)}):dt==="_createTransaction"?function(){return Fh(at.apply(this,arguments),ot)}:at}});this.vip=ot,ae.forEach(function(Ye){return Ye(Q)})}var Jd,Fa=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",$1=(Um.prototype.subscribe=function(I,B,Q){return this._subscribe(I&&typeof I!="function"?I:{next:I,error:B,complete:Q})},Um.prototype[Fa]=function(){return this},Um);function Um(I){this._subscribe=I}try{Jd={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Jd={indexedDB:null,IDBKeyRange:null}}function z1(I){var B,Q=!1,ae=new $1(function(fe){var Se=te(I),Fe,He=!1,Qe={},nt={},ot={get closed(){return He},unsubscribe:function(){He||(He=!0,Fe&&Fe.abort(),Ye&&Fs.storagemutated.unsubscribe(Je))}};fe.start&&fe.start(ot);var Ye=!1,dt=function(){return pn(at)},Je=function(pt){Dm(Qe,pt),eb(nt,Qe)&&dt()},at=function(){var pt,rt,wt;!He&&Jd.indexedDB&&(Qe={},pt={},Fe&&Fe.abort(),Fe=new AbortController,wt=function(kt){var Et=Y();try{Se&&dr();var Mt=cn(I,kt);return Mt=Se?Mt.finally(Cr):Mt}finally{Et&&W()}}(rt={subscr:pt,signal:Fe.signal,requery:dt,querier:I,trans:null}),Promise.resolve(wt).then(function(kt){Q=!0,B=kt,He||rt.signal.aborted||(Qe={},function(Et){for(var Mt in Et)if(d(Et,Mt))return;return 1}(nt=pt)||Ye||(Fs(Wd,Je),Ye=!0),pn(function(){return!He&&fe.next&&fe.next(kt)}))},function(kt){Q=!1,["DatabaseClosedError","AbortError"].includes(kt==null?void 0:kt.name)||He||pn(function(){He||fe.error&&fe.error(kt)})}))};return setTimeout(dt,0),ot});return ae.hasValue=function(){return Q},ae.getValue=function(){return B},ae}var ju=rl;function ab(I){var B=Cc;try{Cc=!0,Fs.storagemutated.fire(I),rb(I,!0)}finally{Cc=B}}h(ju,r(r({},et),{delete:function(I){return new ju(I,{addons:[]}).delete()},exists:function(I){return new ju(I,{addons:[]}).open().then(function(B){return B.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(I){try{return B=ju.dependencies,Q=B.indexedDB,B=B.IDBKeyRange,(Pm(Q)?Promise.resolve(Q.databases()).then(function(ae){return ae.map(function(fe){return fe.name}).filter(function(fe){return fe!==Pa})}):Zy(Q,B).toCollection().primaryKeys()).then(I)}catch{return Xn(new Ce.MissingAPI)}var B,Q},defineClass:function(){return function(I){l(this,I)}},ignoreTransaction:function(I){return Ie.trans?Xe(Ie.transless,I):I()},vip:Xy,async:function(I){return function(){try{var B=Oh(I.apply(this,arguments));return B&&typeof B.then=="function"?B:z.resolve(B)}catch(Q){return Xn(Q)}}},spawn:function(I,B,Q){try{var ae=Oh(I.apply(Q,B||[]));return ae&&typeof ae.then=="function"?ae:z.resolve(ae)}catch(fe){return Xn(fe)}},currentTransaction:{get:function(){return Ie.trans||null}},waitFor:function(I,B){return B=z.resolve(typeof I=="function"?ju.ignoreTransaction(I):I).timeout(B||6e4),Ie.trans?Ie.trans.waitFor(B):B},Promise:z,debug:{get:function(){return Be},set:function(I){ke(I)}},derive:b,extend:l,props:h,override:S,Events:wc,on:Fs,liveQuery:z1,extendObservabilitySet:Dm,getByKeyPath:A,setByKeyPath:R,delByKeyPath:function(I,B){typeof B=="string"?R(I,B,void 0):"length"in B&&[].map.call(B,function(Q){R(I,Q,void 0)})},shallowClone:N,deepClone:V,getObjectDiff:Lm,cmp:Mr,asap:E,minKey:-1/0,addons:[],connections:ts,errnames:je,dependencies:Jd,cache:Nu,semVer:"4.0.11",version:"4.0.11".split(".").map(function(I){return parseInt(I)}).reduce(function(I,B,Q){return I+B/Math.pow(10,2*Q)})})),ju.maxKey=Kd(ju.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Fs(Wd,function(I){Cc||(I=new CustomEvent(Au,{detail:I}),Cc=!0,dispatchEvent(I),Cc=!1)}),addEventListener(Au,function(I){I=I.detail,Cc||ab(I)}));var Qd,Cc=!1,ba=function(){};return typeof BroadcastChannel<"u"&&((ba=function(){(Qd=new BroadcastChannel(Au)).onmessage=function(I){return I.data&&ab(I.data)}})(),typeof Qd.unref=="function"&&Qd.unref(),Fs(Wd,function(I){Cc||Qd.postMessage(I)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(I){if(!rl.disableBfCache&&I.persisted){Be&&console.debug("Dexie: handling persisted pagehide"),Qd!=null&&Qd.close();for(var B=0,Q=ts;B<Q.length;B++)Q[B].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(I){!rl.disableBfCache&&I.persisted&&(Be&&console.debug("Dexie: handling persisted pageshow"),ba(),ab({all:new Ls(-1/0,[[]])}))})),z.rejectionMapper=function(I,B){return!I||I instanceof se||I instanceof TypeError||I instanceof SyntaxError||!I.name||!Ue[I.name]?I:(B=new Ue[I.name](B||I.message,I),"stack"in I&&y(B,"stack",{get:function(){return this.inner.stack}}),B)},ke(Be),r(rl,Object.freeze({__proto__:null,Dexie:rl,liveQuery:z1,Entity:Sm,cmp:Mr,PropModification:qd,replacePrefix:function(I,B){return new qd({replacePrefix:[I,B]})},add:function(I){return new qd({add:I})},remove:function(I){return new qd({remove:I})},default:rl,RangeSet:Ls,mergeRanges:Iu,rangesOverlap:j1}),{default:rl}),rl})}(zS)),zS.exports}var xge=vge();const v3=ma(xge),tB=Symbol.for("Dexie"),S2=globalThis[tB]||(globalThis[tB]=v3);if(v3.semVer!==S2.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${v3.semVer} and ${S2.semVer}`);const{liveQuery:uot,mergeRanges:dot,rangesOverlap:fot,RangeSet:hot,cmp:pot,Entity:mot,PropModification:got,replacePrefix:yot,add:bot,remove:vot}=S2;class wge extends S2{constructor(){super("LiteChatDatabase_Rewrite_v1");we(this,"conversations");we(this,"interactions");we(this,"mods");we(this,"appState");we(this,"providerConfigs");we(this,"apiKeys");we(this,"syncRepos");we(this,"projects");we(this,"rules");we(this,"tags");we(this,"tagRuleLinks");this.version(8).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId, rating",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(7).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const Pt=new wge,qs=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class Nt{static async loadConversations(){try{return(await Pt.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>qs(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await Pt.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await Pt.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await Pt.interactions.where({conversationId:t}).sortBy("index")).map(r=>qs(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await Pt.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await Pt.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await Pt.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await Pt.mods.orderBy("loadOrder").toArray()).map(n=>qs(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await Pt.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await Pt.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await Pt.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await Pt.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=Pt.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>qs(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await Pt.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await Pt.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=Pt.apiKeys)==null?void 0:t.toArray())??[]).map(r=>qs(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await Pt.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await Pt.transaction("rw",[Pt.apiKeys,Pt.providerConfigs],async()=>{const n=await Pt.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(i=>Pt.providerConfigs.update(i.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await Pt.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await Pt.syncRepos.toArray()).map(n=>qs(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await Pt.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await Pt.transaction("rw",[Pt.syncRepos,Pt.conversations],async()=>{const n=await Pt.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(i=>Pt.conversations.update(i.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await Pt.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await Pt.projects.orderBy("updatedAt").reverse().toArray()).map(n=>qs(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,maxTokens:t.maxTokens??null,topP:t.topP??null,topK:t.topK??null,presencePenalty:t.presencePenalty??null,frequencyPenalty:t.frequencyPenalty??null,defaultTagIds:t.defaultTagIds??null,defaultRuleIds:t.defaultRuleIds??null,metadata:t.metadata?{...t.metadata}:{}};return await Pt.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const i=await Pt.projects.where("parentId").equals(r).toArray();for(const s of i)await n(s.id);await Pt.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await Pt.transaction("rw",[Pt.projects],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async loadRules(){try{return(await Pt.rules.orderBy("name").toArray()).map(n=>qs(n))}catch(t){throw console.error("PersistenceService: Error loading rules:",t),t}}static async saveRule(t){try{return await Pt.rules.put(t)}catch(n){throw console.error("PersistenceService: Error saving rule:",n),n}}static async deleteRule(t){try{await Pt.transaction("rw",[Pt.rules,Pt.tagRuleLinks],async()=>{await Pt.tagRuleLinks.where("ruleId").equals(t).delete(),await Pt.rules.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting rule:",n),n}}static async loadTags(){try{return(await Pt.tags.orderBy("name").toArray()).map(n=>qs(n))}catch(t){throw console.error("PersistenceService: Error loading tags:",t),t}}static async saveTag(t){try{return await Pt.tags.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag:",n),n}}static async deleteTag(t){try{await Pt.transaction("rw",[Pt.tags,Pt.tagRuleLinks],async()=>{await Pt.tagRuleLinks.where("tagId").equals(t).delete(),await Pt.tags.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting tag:",n),n}}static async loadTagRuleLinks(){try{return await Pt.tagRuleLinks.toArray()}catch(t){throw console.error("PersistenceService: Error loading tag-rule links:",t),t}}static async saveTagRuleLink(t){try{return await Pt.tagRuleLinks.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag-rule link:",n),n}}static async deleteTagRuleLink(t){try{await Pt.tagRuleLinks.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting tag-rule link:",n),n}}static async getAllDataForExport(t){const n={version:1,exportedAt:new Date().toISOString()};if(t.importSettings){const r=await Pt.appState.toArray();n.settings={},r.forEach(i=>{i.key.startsWith("settings:")&&(n.settings[i.key.substring(9)]=i.value)})}return t.importApiKeys&&(n.apiKeys=await Pt.apiKeys.toArray()),t.importProviderConfigs&&(n.providerConfigs=await Pt.providerConfigs.toArray()),t.importProjects&&(n.projects=await Pt.projects.toArray()),t.importConversations&&(n.conversations=await Pt.conversations.toArray(),n.interactions=await Pt.interactions.toArray()),t.importRulesAndTags&&(n.rules=await Pt.rules.toArray(),n.tags=await Pt.tags.toArray(),n.tagRuleLinks=await Pt.tagRuleLinks.toArray()),t.importMods&&(n.mods=await Pt.mods.toArray()),t.importSyncRepos&&(n.syncRepos=await Pt.syncRepos.toArray()),n}static async importAllData(t,n){if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}. Expected version 1.`);await Pt.transaction("rw",[Pt.appState,Pt.apiKeys,Pt.providerConfigs,Pt.projects,Pt.conversations,Pt.interactions,Pt.rules,Pt.tags,Pt.tagRuleLinks,Pt.mods,Pt.syncRepos],async()=>{if(n.importSettings&&await Pt.appState.clear(),n.importApiKeys&&await Pt.apiKeys.clear(),n.importProviderConfigs&&await Pt.providerConfigs.clear(),n.importProjects&&await Pt.projects.clear(),n.importConversations&&(await Pt.conversations.clear(),await Pt.interactions.clear()),n.importRulesAndTags&&(await Pt.rules.clear(),await Pt.tags.clear(),await Pt.tagRuleLinks.clear()),n.importMods&&await Pt.mods.clear(),n.importSyncRepos&&await Pt.syncRepos.clear(),n.importSettings&&t.settings){const r=Object.entries(t.settings).map(([i,s])=>({key:`settings:${i}`,value:s}));await Pt.appState.bulkPut(r)}n.importApiKeys&&t.apiKeys&&await Pt.apiKeys.bulkPut(t.apiKeys.map(r=>qs(r))),n.importProviderConfigs&&t.providerConfigs&&await Pt.providerConfigs.bulkPut(t.providerConfigs.map(r=>qs(r,["modelsLastFetchedAt"]))),n.importProjects&&t.projects&&await Pt.projects.bulkPut(t.projects.map(r=>qs(r))),n.importConversations&&t.conversations&&(await Pt.conversations.bulkPut(t.conversations.map(r=>qs(r,["lastSyncedAt"]))),t.interactions&&await Pt.interactions.bulkPut(t.interactions.map(r=>qs(r,["startedAt","endedAt"])))),n.importRulesAndTags&&(t.rules&&await Pt.rules.bulkPut(t.rules.map(r=>qs(r))),t.tags&&await Pt.tags.bulkPut(t.tags.map(r=>qs(r))),t.tagRuleLinks&&await Pt.tagRuleLinks.bulkPut(t.tagRuleLinks)),n.importMods&&t.mods&&await Pt.mods.bulkPut(t.mods.map(r=>qs(r))),n.importSyncRepos&&t.syncRepos&&await Pt.syncRepos.bulkPut(t.syncRepos.map(r=>qs(r,["lastPulledAt","lastPushedAt"])))})}static async clearAllData(){try{await Pt.transaction("rw",[Pt.conversations,Pt.interactions,Pt.mods,Pt.appState,Pt.providerConfigs,Pt.apiKeys,Pt.syncRepos,Pt.projects,Pt.rules,Pt.tags,Pt.tagRuleLinks],async()=>{await Pt.interactions.clear(),await Pt.conversations.clear(),await Pt.projects.clear(),await Pt.mods.clear(),await Pt.appState.clear(),await Pt.providerConfigs.clear(),await Pt.apiKeys.clear(),await Pt.syncRepos.clear(),await Pt.rules.clear(),await Pt.tags.clear(),await Pt.tagRuleLinks.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const tr={loaded:"interaction.loaded",currentConversationIdChanged:"interaction.current.conversation.id.changed",added:"interaction.added",updated:"interaction.updated",streamingIdsChanged:"interaction.streaming.ids.changed",activeStreamBuffersChanged:"interaction.active.stream.buffers.changed",activeReasoningBuffersChanged:"interaction.active.reasoning.buffers.changed",statusChanged:"interaction.status.changed",errorChanged:"interaction.error.changed",interactionRated:"interaction.rated",started:"interaction.sdk.started",streamChunk:"interaction.sdk.streamChunk",completed:"interaction.sdk.completed",loadInteractionsRequest:"interaction.load.interactions.request",rateInteractionRequest:"interaction.rate.interaction.request",setCurrentConversationIdRequest:"interaction.set.current.conversation.id.request",clearInteractionsRequest:"interaction.clear.interactions.request",setErrorRequest:"interaction.set.error.request",setStatusRequest:"interaction.set.status.request"};var Vo=aH();const Bk=ma(Vo);function _ge(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const Sge=e=>{switch(e){case"success":return Ege;case"info":return Age;case"warning":return Tge;case"error":return Rge;default:return null}},Cge=Array(12).fill(0),kge=({visible:e,className:t})=>lt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},lt.createElement("div",{className:"sonner-spinner"},Cge.map((n,r)=>lt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Ege=lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},lt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Tge=lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},lt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Age=lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},lt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Rge=lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},lt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ige=lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},lt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),lt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Nge=()=>{const[e,t]=lt.useState(document.hidden);return lt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let x3=1;class Mge{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...i}=t,s=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:x3++,a=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:r}),{...l,...t,id:s,dismissible:o,title:r}):l):this.addToast({title:r,...i,dismissible:o,id:s}),s},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(t instanceof Function?t():t);let s=r!==void 0,a;const o=i.then(async c=>{if(a=["resolve",c],lt.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(Pge(c)&&!c.ok){s=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,y=typeof d=="object"&&!lt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...y})}else if(c instanceof Error){s=!1;const d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,y=typeof d=="object"&&!lt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...y})}else if(n.success!==void 0){s=!1;const d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description,y=typeof d=="object"&&!lt.isValidElement(d)?d:{message:d};this.create({id:r,type:"success",description:h,...y})}}).catch(async c=>{if(a=["reject",c],n.error!==void 0){s=!1;const u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description,m=typeof u=="object"&&!lt.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:d,...m})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||x3++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const co=new Mge,jge=(e,t)=>{const n=(t==null?void 0:t.id)||x3++;return co.addToast({title:e,...t,id:n}),n},Pge=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Oge=jge,Dge=()=>co.toasts,Fge=()=>co.getActiveToasts(),De=Object.assign(Oge,{success:co.success,info:co.info,warning:co.warning,error:co.error,custom:co.custom,message:co.message,promise:co.promise,dismiss:co.dismiss,loading:co.loading},{getHistory:Dge,getToasts:Fge});_ge("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function $_(e){return e.label!==void 0}const Lge=3,Bge="24px",$ge="16px",nB=4e3,zge=356,Uge=14,qge=45,Vge=200;function Nc(...e){return e.filter(Boolean).join(" ")}function Hge(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const Wge=e=>{var t,n,r,i,s,a,o,l,c;const{invert:u,toast:d,unstyled:h,interacting:m,setHeights:y,visibleToasts:b,heights:v,index:x,toasts:_,expanded:S,removeToast:C,defaultRichColors:E,closeButton:A,style:R,cancelButtonStyle:N,actionButtonStyle:M,className:P="",descriptionClassName:L="",duration:O,position:V,gap:F,expandByDefault:J,classNames:U,icons:G,closeButtonAriaLabel:$="Close toast"}=e,[ne,H]=lt.useState(null),[te,ee]=lt.useState(null),[se,he]=lt.useState(!1),[ce,Me]=lt.useState(!1),[je,Ne]=lt.useState(!1),[Ce,Ue]=lt.useState(!1),[et,qe]=lt.useState(!1),[Re,K]=lt.useState(0),[ge,Ae]=lt.useState(0),le=lt.useRef(d.duration||O||nB),oe=lt.useRef(null),ie=lt.useRef(null),Ee=x===0,Be=x+1<=b,ke=d.type,ct=d.dismissible!==!1,It=d.className||"",ht=d.descriptionClassName||"",Ot=lt.useMemo(()=>v.findIndex(_e=>_e.toastId===d.id)||0,[v,d.id]),zt=lt.useMemo(()=>{var _e;return(_e=d.closeButton)!=null?_e:A},[d.closeButton,A]),Bt=lt.useMemo(()=>d.duration||O||nB,[d.duration,O]),rn=lt.useRef(0),ve=lt.useRef(0),D=lt.useRef(0),Z=lt.useRef(null),[pe,Oe]=V.split("-"),xe=lt.useMemo(()=>v.reduce((_e,ze,Rt)=>Rt>=Ot?_e:_e+ze.height,0),[v,Ot]),Ie=Nge(),de=d.invert||u,bt=ke==="loading";ve.current=lt.useMemo(()=>Ot*F+xe,[Ot,xe]),lt.useEffect(()=>{le.current=Bt},[Bt]),lt.useEffect(()=>{he(!0)},[]),lt.useEffect(()=>{const _e=ie.current;if(_e){const ze=_e.getBoundingClientRect().height;return Ae(ze),y(Rt=>[{toastId:d.id,height:ze,position:d.position},...Rt]),()=>y(Rt=>Rt.filter(me=>me.toastId!==d.id))}},[y,d.id]),lt.useLayoutEffect(()=>{if(!se)return;const _e=ie.current,ze=_e.style.height;_e.style.height="auto";const Rt=_e.getBoundingClientRect().height;_e.style.height=ze,Ae(Rt),y(me=>me.find(W=>W.toastId===d.id)?me.map(W=>W.toastId===d.id?{...W,height:Rt}:W):[{toastId:d.id,height:Rt,position:d.position},...me])},[se,d.title,d.description,y,d.id]);const St=lt.useCallback(()=>{Me(!0),K(ve.current),y(_e=>_e.filter(ze=>ze.toastId!==d.id)),setTimeout(()=>{C(d)},Vge)},[d,C,y,ve]);lt.useEffect(()=>{if(d.promise&&ke==="loading"||d.duration===1/0||d.type==="loading")return;let _e;return S||m||Ie?(()=>{if(D.current<rn.current){const me=new Date().getTime()-rn.current;le.current=le.current-me}D.current=new Date().getTime()})():(()=>{le.current!==1/0&&(rn.current=new Date().getTime(),_e=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),St()},le.current))})(),()=>clearTimeout(_e)},[S,m,d,ke,Ie,St]),lt.useEffect(()=>{d.delete&&St()},[St,d.delete]);function z(){var _e;if(G!=null&&G.loading){var ze;return lt.createElement("div",{className:Nc(U==null?void 0:U.loader,d==null||(ze=d.classNames)==null?void 0:ze.loader,"sonner-loader"),"data-visible":ke==="loading"},G.loading)}return lt.createElement(kge,{className:Nc(U==null?void 0:U.loader,d==null||(_e=d.classNames)==null?void 0:_e.loader),visible:ke==="loading"})}const Ve=d.icon||(G==null?void 0:G[ke])||Sge(ke);var it,be;return lt.createElement("li",{tabIndex:0,ref:ie,className:Nc(P,It,U==null?void 0:U.toast,d==null||(t=d.classNames)==null?void 0:t.toast,U==null?void 0:U.default,U==null?void 0:U[ke],d==null||(n=d.classNames)==null?void 0:n[ke]),"data-sonner-toast":"","data-rich-colors":(it=d.richColors)!=null?it:E,"data-styled":!(d.jsx||d.unstyled||h),"data-mounted":se,"data-promise":!!d.promise,"data-swiped":et,"data-removed":ce,"data-visible":Be,"data-y-position":pe,"data-x-position":Oe,"data-index":x,"data-front":Ee,"data-swiping":je,"data-dismissible":ct,"data-type":ke,"data-invert":de,"data-swipe-out":Ce,"data-swipe-direction":te,"data-expanded":!!(S||J&&se),style:{"--index":x,"--toasts-before":x,"--z-index":_.length-x,"--offset":`${ce?Re:ve.current}px`,"--initial-height":J?"auto":`${ge}px`,...R,...d.style},onDragEnd:()=>{Ne(!1),H(null),Z.current=null},onPointerDown:_e=>{bt||!ct||(oe.current=new Date,K(ve.current),_e.target.setPointerCapture(_e.pointerId),_e.target.tagName!=="BUTTON"&&(Ne(!0),Z.current={x:_e.clientX,y:_e.clientY}))},onPointerUp:()=>{var _e,ze,Rt;if(Ce||!ct)return;Z.current=null;const me=Number(((_e=ie.current)==null?void 0:_e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Y=Number(((ze=ie.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),W=new Date().getTime()-((Rt=oe.current)==null?void 0:Rt.getTime()),X=ne==="x"?me:Y,ye=Math.abs(X)/W;if(Math.abs(X)>=qge||ye>.11){K(ve.current),d.onDismiss==null||d.onDismiss.call(d,d),ee(ne==="x"?me>0?"right":"left":Y>0?"down":"up"),St(),Ue(!0);return}else{var Pe,We;(Pe=ie.current)==null||Pe.style.setProperty("--swipe-amount-x","0px"),(We=ie.current)==null||We.style.setProperty("--swipe-amount-y","0px")}qe(!1),Ne(!1),H(null)},onPointerMove:_e=>{var ze,Rt,me;if(!Z.current||!ct||((ze=window.getSelection())==null?void 0:ze.toString().length)>0)return;const W=_e.clientY-Z.current.y,X=_e.clientX-Z.current.x;var ye;const Pe=(ye=e.swipeDirections)!=null?ye:Hge(V);!ne&&(Math.abs(X)>1||Math.abs(W)>1)&&H(Math.abs(X)>Math.abs(W)?"x":"y");let We={x:0,y:0};const xt=Qt=>1/(1.5+Math.abs(Qt)/20);if(ne==="y"){if(Pe.includes("top")||Pe.includes("bottom"))if(Pe.includes("top")&&W<0||Pe.includes("bottom")&&W>0)We.y=W;else{const Qt=W*xt(W);We.y=Math.abs(Qt)<Math.abs(W)?Qt:W}}else if(ne==="x"&&(Pe.includes("left")||Pe.includes("right")))if(Pe.includes("left")&&X<0||Pe.includes("right")&&X>0)We.x=X;else{const Qt=X*xt(X);We.x=Math.abs(Qt)<Math.abs(X)?Qt:X}(Math.abs(We.x)>0||Math.abs(We.y)>0)&&qe(!0),(Rt=ie.current)==null||Rt.style.setProperty("--swipe-amount-x",`${We.x}px`),(me=ie.current)==null||me.style.setProperty("--swipe-amount-y",`${We.y}px`)}},zt&&!d.jsx&&ke!=="loading"?lt.createElement("button",{"aria-label":$,"data-disabled":bt,"data-close-button":!0,onClick:bt||!ct?()=>{}:()=>{St(),d.onDismiss==null||d.onDismiss.call(d,d)},className:Nc(U==null?void 0:U.closeButton,d==null||(r=d.classNames)==null?void 0:r.closeButton)},(be=G==null?void 0:G.close)!=null?be:Ige):null,(ke||d.icon||d.promise)&&d.icon!==null&&((G==null?void 0:G[ke])!==null||d.icon)?lt.createElement("div",{"data-icon":"",className:Nc(U==null?void 0:U.icon,d==null||(i=d.classNames)==null?void 0:i.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||z():null,d.type!=="loading"?Ve:null):null,lt.createElement("div",{"data-content":"",className:Nc(U==null?void 0:U.content,d==null||(s=d.classNames)==null?void 0:s.content)},lt.createElement("div",{"data-title":"",className:Nc(U==null?void 0:U.title,d==null||(a=d.classNames)==null?void 0:a.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?lt.createElement("div",{"data-description":"",className:Nc(L,ht,U==null?void 0:U.description,d==null||(o=d.classNames)==null?void 0:o.description)},typeof d.description=="function"?d.description():d.description):null),lt.isValidElement(d.cancel)?d.cancel:d.cancel&&$_(d.cancel)?lt.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||N,onClick:_e=>{$_(d.cancel)&&ct&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,_e),St())},className:Nc(U==null?void 0:U.cancelButton,d==null||(l=d.classNames)==null?void 0:l.cancelButton)},d.cancel.label):null,lt.isValidElement(d.action)?d.action:d.action&&$_(d.action)?lt.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||M,onClick:_e=>{$_(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,_e),!_e.defaultPrevented&&St())},className:Nc(U==null?void 0:U.actionButton,d==null||(c=d.classNames)==null?void 0:c.actionButton)},d.action.label):null)};function rB(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Gge(e,t){const n={};return[e,t].forEach((r,i)=>{const s=i===1,a=s?"--mobile-offset":"--offset",o=s?$ge:Bge;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${a}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${a}-${c}`]=o:n[`${a}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(o)}),n}const Kge=lt.forwardRef(function(t,n){const{invert:r,position:i="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:m,style:y,visibleToasts:b=Lge,toastOptions:v,dir:x=rB(),gap:_=Uge,icons:S,containerAriaLabel:C="Notifications"}=t,[E,A]=lt.useState([]),R=lt.useMemo(()=>Array.from(new Set([i].concat(E.filter(te=>te.position).map(te=>te.position)))),[E,i]),[N,M]=lt.useState([]),[P,L]=lt.useState(!1),[O,V]=lt.useState(!1),[F,J]=lt.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=lt.useRef(null),G=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=lt.useRef(null),ne=lt.useRef(!1),H=lt.useCallback(te=>{A(ee=>{var se;return(se=ee.find(he=>he.id===te.id))!=null&&se.delete||co.dismiss(te.id),ee.filter(({id:he})=>he!==te.id)})},[]);return lt.useEffect(()=>co.subscribe(te=>{if(te.dismiss){requestAnimationFrame(()=>{A(ee=>ee.map(se=>se.id===te.id?{...se,delete:!0}:se))});return}setTimeout(()=>{Bk.flushSync(()=>{A(ee=>{const se=ee.findIndex(he=>he.id===te.id);return se!==-1?[...ee.slice(0,se),{...ee[se],...te},...ee.slice(se+1)]:[te,...ee]})})})}),[E]),lt.useEffect(()=>{if(d!=="system"){J(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?J("dark"):J("light")),typeof window>"u")return;const te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:ee})=>{J(ee?"dark":"light")})}catch{te.addListener(({matches:se})=>{try{J(se?"dark":"light")}catch(he){console.error(he)}})}},[d]),lt.useEffect(()=>{E.length<=1&&L(!1)},[E]),lt.useEffect(()=>{const te=ee=>{var se;if(s.every(Me=>ee[Me]||ee.code===Me)){var ce;L(!0),(ce=U.current)==null||ce.focus()}ee.code==="Escape"&&(document.activeElement===U.current||(se=U.current)!=null&&se.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[s]),lt.useEffect(()=>{if(U.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,ne.current=!1)}},[U.current]),lt.createElement("section",{ref:n,"aria-label":`${C} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((te,ee)=>{var se;const[he,ce]=te.split("-");return E.length?lt.createElement("ol",{key:te,dir:x==="auto"?rB():x,tabIndex:-1,ref:U,className:l,"data-sonner-toaster":!0,"data-sonner-theme":F,"data-y-position":he,"data-lifted":P&&E.length>1&&!a,"data-x-position":ce,style:{"--front-toast-height":`${((se=N[0])==null?void 0:se.height)||0}px`,"--width":`${zge}px`,"--gap":`${_}px`,...y,...Gge(c,u)},onBlur:Me=>{ne.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(ne.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,$.current=Me.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{O||L(!1)},onDragEnd:()=>L(!1),onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||V(!0)},onPointerUp:()=>V(!1)},E.filter(Me=>!Me.position&&ee===0||Me.position===te).map((Me,je)=>{var Ne,Ce;return lt.createElement(Wge,{key:Me.id,icons:S,index:je,toast:Me,defaultRichColors:h,duration:(Ne=v==null?void 0:v.duration)!=null?Ne:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Ce=v==null?void 0:v.closeButton)!=null?Ce:o,interacting:O,position:te,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,closeButtonAriaLabel:v==null?void 0:v.closeButtonAriaLabel,removeToast:H,toasts:E.filter(Ue=>Ue.position==Me.position),heights:N.filter(Ue=>Ue.position==Me.position),setHeights:M,expandByDefault:a,gap:_,expanded:P,swipeDirections:t.swipeDirections})})):null}))}),Ln=Il(Nl((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(t().currentConversationId!==n){console.warn(`InteractionStore: loadInteractions called for ${n}, but current is ${t().currentConversationId}. Aborting load.`);return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{}}),r!=="loading"&&Le.emit(tr.statusChanged,{status:"loading"});try{const i=await Nt.loadInteractionsForConversation(n);i.sort((l,c)=>l.index-c.index);const s=t().interactions.filter(l=>l.conversationId===n),a=new Set(i.map(l=>l.id)),o=[...i,...s.filter(l=>!a.has(l.id))];o.sort((l,c)=>l.index-c.index),t().currentConversationId===n?(e({interactions:o,status:"idle"}),Le.emit(tr.loaded,{conversationId:n,interactions:o}),Le.emit(tr.statusChanged,{status:"idle"})):console.warn(`InteractionStore: loadInteractions for ${n} completed, but currentConversationId changed during fetch to ${t().currentConversationId}. Discarding.`)}catch(i){console.error(`InteractionStore: Error loading interactions for ${n}`,i),t().currentConversationId===n&&(e({error:"Failed load interactions",status:"error"}),Le.emit(tr.statusChanged,{status:"error"}),Le.emit(tr.errorChanged,{error:"Failed load interactions"}))}},_addInteractionToState:n=>{e(r=>{if(r.currentConversationId!==n.conversationId){console.warn(`InteractionStore: Attempted to add interaction for ${n.conversationId} but current is ${r.currentConversationId}. Skipping.`);return}if(!r.interactions.some(i=>i.id===n.id))r.interactions.push(n),r.interactions.sort((i,s)=>i.index-s.index);else{const i=r.interactions.findIndex(s=>s.id===n.id);i!==-1&&(r.interactions[i]={...r.interactions[i],...n})}}),Le.emit(tr.added,{interaction:n})},_updateInteractionInState:(n,r)=>{e(i=>{const s=i.interactions.findIndex(a=>a.id===n);if(s!==-1){if(i.currentConversationId!==i.interactions[s].conversationId){console.warn(`InteractionStore: Attempted to update interaction ${n} which is not in the current conversation ${i.currentConversationId}. Skipping.`);return}const a=i.interactions[s];let o={...a.metadata||{}};r.metadata&&(o={...o,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(o.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(o.toolResults=[...r.metadata.toolResults]),r.metadata.reasoning!==void 0&&(o.reasoning=r.metadata.reasoning));const l={...a,...r,metadata:o};"response"in r&&(l.response=r.response),"rating"in r&&(l.rating=r.rating),i.interactions[s]=l}}),Le.emit(tr.updated,{interactionId:n,updates:r})},appendInteractionResponseChunk:(n,r)=>{e(i=>{var s;i.streamingInteractionIds.includes(n)&&i.currentConversationId===((s=i.interactions.find(a=>a.id===n))==null?void 0:s.conversationId)&&(i.activeStreamBuffers[n]=(i.activeStreamBuffers[n]||"")+r)}),Le.emit(tr.activeStreamBuffersChanged,{buffers:t().activeStreamBuffers})},appendReasoningChunk:(n,r)=>{e(i=>{var s;i.streamingInteractionIds.includes(n)&&i.currentConversationId===((s=i.interactions.find(a=>a.id===n))==null?void 0:s.conversationId)&&(i.activeReasoningBuffers[n]=(i.activeReasoningBuffers[n]||"")+r)}),Le.emit(tr.activeReasoningBuffersChanged,{buffers:t().activeReasoningBuffers})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(i=>i.id!==n)})},rateInteraction:async(n,r)=>{const i=t().interactions.find(s=>s.id===n);if(i&&t().currentConversationId===i.conversationId){t()._updateInteractionInState(n,{rating:r});try{await Nt.saveInteraction({...i,rating:r}),Le.emit(tr.interactionRated,{interactionId:n,rating:r})}catch{t()._updateInteractionInState(n,{rating:i.rating}),De.error("Failed to save rating.")}}},setCurrentConversationId:async n=>{const r=t().currentConversationId;if(r===n){n&&t().interactions.length===0&&t().status!=="loading"?(console.warn(`InteractionStore: Current ID ${n} matches, but no interactions. Forcing reload.`),await t().loadInteractions(n)):console.log(`InteractionStore: setCurrentConversationId called with the same ID (${n}). No change needed or already handled.`);return}console.log(`InteractionStore: Setting current conversation ID from ${r} to ${n}`),e({currentConversationId:n}),Le.emit(tr.currentConversationIdChanged,{conversationId:n}),n?await t().loadInteractions(n):t().clearInteractions()},clearInteractions:()=>{const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&Le.emit(tr.statusChanged,{status:"idle"}),Le.emit(tr.currentConversationIdChanged,{conversationId:null})},setError:n=>{const r=t().status;let i="idle";e(s=>{s.error=n,n?(i="error",s.status="error"):s.status==="error"?(i=s.streamingInteractionIds.length>0?"streaming":"idle",s.status=i):i=s.status}),r!==i&&Le.emit(tr.statusChanged,{status:i}),Le.emit(tr.errorChanged,{error:n})},setStatus:n=>{t().status!==n&&(e({status:n}),Le.emit(tr.statusChanged,{status:n}))},_addStreamingId:n=>{let r=!1;e(i=>{i.streamingInteractionIds.includes(n)||(i.streamingInteractionIds.push(n),i.activeStreamBuffers[n]="",i.activeReasoningBuffers[n]="",i.streamingInteractionIds.length===1&&(i.status="streaming",r=!0),i.error=null)}),r&&Le.emit(tr.statusChanged,{status:"streaming"}),Le.emit(tr.streamingIdsChanged,{streamingIds:t().streamingInteractionIds})},_removeStreamingId:n=>{let r=!1;e(i=>{const s=i.streamingInteractionIds.indexOf(n);s!==-1&&(i.streamingInteractionIds.splice(s,1),delete i.activeStreamBuffers[n],delete i.activeReasoningBuffers[n],i.streamingInteractionIds.length===0&&i.status==="streaming"&&(i.status=i.error?"error":"idle",r=!0))}),r&&Le.emit(tr.statusChanged,{status:t().status}),Le.emit(tr.streamingIdsChanged,{streamingIds:t().streamingInteractionIds})},getRegisteredActionHandlers:()=>{const n="interactionStore",r=t();return[{eventName:tr.loadInteractionsRequest,handler:i=>r.loadInteractions(i.conversationId),storeId:n},{eventName:tr.rateInteractionRequest,handler:i=>r.rateInteraction(i.interactionId,i.rating),storeId:n},{eventName:tr.setCurrentConversationIdRequest,handler:i=>r.setCurrentConversationId(i.id),storeId:n},{eventName:tr.clearInteractionsRequest,handler:()=>r.clearInteractions(),storeId:n},{eventName:tr.setErrorRequest,handler:i=>r.setError(i.error),storeId:n},{eventName:tr.setStatusRequest,handler:i=>r.setStatus(i.status),storeId:n}]}}))),Yge="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Xs=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=Yge[n[e]&63];return t};const wl={attachedFilesChanged:"input.attached.files.changed",addAttachedFileRequest:"input.add.attached.file.request",removeAttachedFileRequest:"input.remove.attached.file.request",clearAttachedFilesRequest:"input.clear.attached.files.request"},qf=Il(Nl((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(i=>{if(i.attachedFilesMetadata.some(a=>a.source==="direct"&&n.source==="direct"?a.name===n.name&&a.size===n.size:a.source==="vfs"&&n.source==="vfs"?a.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const a={id:Xs(),...n};i.attachedFilesMetadata.push(a),r=!0}}),r&&Le.emit(wl.attachedFilesChanged,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(i=>{const s=i.attachedFilesMetadata.length;i.attachedFilesMetadata=i.attachedFilesMetadata.filter(a=>a.id!==n),r=i.attachedFilesMetadata.length<s}),r&&Le.emit(wl.attachedFilesChanged,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&Le.emit(wl.attachedFilesChanged,{files:[]})},getRegisteredActionHandlers:()=>{const n="inputStore",r=t();return[{eventName:wl.addAttachedFileRequest,handler:i=>r.addAttachedFile(i),storeId:n},{eventName:wl.removeAttachedFileRequest,handler:i=>r.removeAttachedFile(i.attachmentId),storeId:n},{eventName:wl.clearAttachedFilesRequest,handler:()=>r.clearAttachedFiles(),storeId:n}]}}))),zH=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(zH);const ix=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml"||n.split(".").length<2)return!0;const i="."+n.split(".").pop();return zH.has(i)};var UH="vercel.ai.error",Zge=Symbol.for(UH),qH,Xge=class VH extends Error{constructor({name:t,message:n,cause:r}){super(n),this[qH]=!0,this.name=t,this.cause=r}static isInstance(t){return VH.hasMarker(t,UH)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};qH=Zge;var ar=Xge,HH="AI_APICallError",WH=`vercel.ai.error.${HH}`,Jge=Symbol.for(WH),GH,Cl=class extends ar{constructor({message:t,url:n,requestBodyValues:r,statusCode:i,responseHeaders:s,responseBody:a,cause:o,isRetryable:l=i!=null&&(i===408||i===409||i===429||i>=500),data:c}){super({name:HH,message:t,cause:o}),this[GH]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=i,this.responseHeaders=s,this.responseBody=a,this.isRetryable=l,this.data=c}static isInstance(t){return ar.hasMarker(t,WH)}};GH=Jge;var KH="AI_EmptyResponseBodyError",YH=`vercel.ai.error.${KH}`,Qge=Symbol.for(YH),ZH,XH=class extends ar{constructor({message:t="Empty response body"}={}){super({name:KH,message:t}),this[ZH]=!0}static isInstance(t){return ar.hasMarker(t,YH)}};ZH=Qge;function ww(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var JH="AI_InvalidArgumentError",QH=`vercel.ai.error.${JH}`,e0e=Symbol.for(QH),eW,tW=class extends ar{constructor({message:t,cause:n,argument:r}){super({name:JH,message:t,cause:n}),this[eW]=!0,this.argument=r}static isInstance(t){return ar.hasMarker(t,QH)}};eW=e0e;var nW="AI_InvalidPromptError",rW=`vercel.ai.error.${nW}`,t0e=Symbol.for(rW),iW,qc=class extends ar{constructor({prompt:t,message:n,cause:r}){super({name:nW,message:`Invalid prompt: ${n}`,cause:r}),this[iW]=!0,this.prompt=t}static isInstance(t){return ar.hasMarker(t,rW)}};iW=t0e;var sW="AI_InvalidResponseDataError",aW=`vercel.ai.error.${sW}`,n0e=Symbol.for(aW),oW,Vg=class extends ar{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:sW,message:n}),this[oW]=!0,this.data=t}static isInstance(t){return ar.hasMarker(t,aW)}};oW=n0e;var lW="AI_JSONParseError",cW=`vercel.ai.error.${lW}`,r0e=Symbol.for(cW),uW,C2=class extends ar{constructor({text:t,cause:n}){super({name:lW,message:`JSON parsing failed: Text: ${t}.
Error message: ${ww(n)}`,cause:n}),this[uW]=!0,this.text=t}static isInstance(t){return ar.hasMarker(t,cW)}};uW=r0e;var dW="AI_LoadAPIKeyError",fW=`vercel.ai.error.${dW}`,i0e=Symbol.for(fW),hW,z_=class extends ar{constructor({message:t}){super({name:dW,message:t}),this[hW]=!0}static isInstance(t){return ar.hasMarker(t,fW)}};hW=i0e;var pW="AI_TooManyEmbeddingValuesForCallError",mW=`vercel.ai.error.${pW}`,s0e=Symbol.for(mW),gW,$k=class extends ar{constructor(e){super({name:pW,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[gW]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return ar.hasMarker(e,mW)}};gW=s0e;var yW="AI_TypeValidationError",bW=`vercel.ai.error.${yW}`,a0e=Symbol.for(bW),vW,o0e=class w3 extends ar{constructor({value:t,cause:n}){super({name:yW,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${ww(n)}`,cause:n}),this[vW]=!0,this.value=t}static isInstance(t){return ar.hasMarker(t,bW)}static wrap({value:t,cause:n}){return w3.isInstance(n)&&n.value===t?n:new w3({value:t,cause:n})}};vW=a0e;var k2=o0e,xW="AI_UnsupportedFunctionalityError",wW=`vercel.ai.error.${xW}`,l0e=Symbol.for(wW),_W,Xr=class extends ar{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:xW,message:n}),this[_W]=!0,this.functionality=t}static isInstance(t){return ar.hasMarker(t,wW)}};_W=l0e;let c0e=(e,t=21)=>(n=t)=>{let r="",i=n|0;for(;i--;)r+=e[Math.random()*e.length|0];return r};var uP={},zk={};zk.byteLength=f0e;zk.toByteArray=p0e;zk.fromByteArray=y0e;var Hc=[],bl=[],u0e=typeof Uint8Array<"u"?Uint8Array:Array,FR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var hg=0,d0e=FR.length;hg<d0e;++hg)Hc[hg]=FR[hg],bl[FR.charCodeAt(hg)]=hg;bl[45]=62;bl[95]=63;function SW(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function f0e(e){var t=SW(e),n=t[0],r=t[1];return(n+r)*3/4-r}function h0e(e,t,n){return(t+n)*3/4-n}function p0e(e){var t,n=SW(e),r=n[0],i=n[1],s=new u0e(h0e(e,r,i)),a=0,o=i>0?r-4:r,l;for(l=0;l<o;l+=4)t=bl[e.charCodeAt(l)]<<18|bl[e.charCodeAt(l+1)]<<12|bl[e.charCodeAt(l+2)]<<6|bl[e.charCodeAt(l+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=t&255;return i===2&&(t=bl[e.charCodeAt(l)]<<2|bl[e.charCodeAt(l+1)]>>4,s[a++]=t&255),i===1&&(t=bl[e.charCodeAt(l)]<<10|bl[e.charCodeAt(l+1)]<<4|bl[e.charCodeAt(l+2)]>>2,s[a++]=t>>8&255,s[a++]=t&255),s}function m0e(e){return Hc[e>>18&63]+Hc[e>>12&63]+Hc[e>>6&63]+Hc[e&63]}function g0e(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(m0e(r));return i.join("")}function y0e(e){for(var t,n=e.length,r=n%3,i=[],s=16383,a=0,o=n-r;a<o;a+=s)i.push(g0e(e,a,a+s>o?o:a+s));return r===1?(t=e[n-1],i.push(Hc[t>>2]+Hc[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(Hc[t>>10]+Hc[t>>4&63]+Hc[t<<2&63]+"=")),i.join("")}var dP={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */dP.read=function(e,t,n,r,i){var s,a,o=i*8-r-1,l=(1<<o)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,m=e[t+d];for(d+=h,s=m&(1<<-u)-1,m>>=-u,u+=o;u>0;s=s*256+e[t+d],d+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=r;u>0;a=a*256+e[t+d],d+=h,u-=8);if(s===0)s=1-c;else{if(s===l)return a?NaN:(m?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-c}return(m?-1:1)*a*Math.pow(2,s-r)};dP.write=function(e,t,n,r,i,s){var a,o,l,c=s*8-i-1,u=(1<<c)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:s-1,y=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=u?(o=0,a=u):a+d>=1?(o=(t*l-1)*Math.pow(2,i),a=a+d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+m]=o&255,m+=y,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;e[n+m]=a&255,m+=y,a/=256,c-=8);e[n+m-y]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=zk,n=dP,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:a,SharedArrayBuffer:o}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ve=new s(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,s.prototype),Object.setPrototypeOf(ve,D),ve.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(ve){if(ve>i)throw new RangeError('The value "'+ve+'" is invalid for option "size"');const D=new s(ve);return Object.setPrototypeOf(D,u.prototype),D}function u(ve,D,Z){if(typeof ve=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(ve)}return d(ve,D,Z)}u.poolSize=8192;function d(ve,D,Z){if(typeof ve=="string")return b(ve,D);if(a.isView(ve))return x(ve);if(ve==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ve);if(ht(ve,a)||ve&&ht(ve.buffer,a)||typeof o<"u"&&(ht(ve,o)||ve&&ht(ve.buffer,o)))return _(ve,D,Z);if(typeof ve=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=ve.valueOf&&ve.valueOf();if(pe!=null&&pe!==ve)return u.from(pe,D,Z);const Oe=S(ve);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ve[Symbol.toPrimitive]=="function")return u.from(ve[Symbol.toPrimitive]("string"),D,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ve)}u.from=function(ve,D,Z){return d(ve,D,Z)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function h(ve){if(typeof ve!="number")throw new TypeError('"size" argument must be of type number');if(ve<0)throw new RangeError('The value "'+ve+'" is invalid for option "size"')}function m(ve,D,Z){return h(ve),ve<=0?c(ve):D!==void 0?typeof Z=="string"?c(ve).fill(D,Z):c(ve).fill(D):c(ve)}u.alloc=function(ve,D,Z){return m(ve,D,Z)};function y(ve){return h(ve),c(ve<0?0:C(ve)|0)}u.allocUnsafe=function(ve){return y(ve)},u.allocUnsafeSlow=function(ve){return y(ve)};function b(ve,D){if((typeof D!="string"||D==="")&&(D="utf8"),!u.isEncoding(D))throw new TypeError("Unknown encoding: "+D);const Z=A(ve,D)|0;let pe=c(Z);const Oe=pe.write(ve,D);return Oe!==Z&&(pe=pe.slice(0,Oe)),pe}function v(ve){const D=ve.length<0?0:C(ve.length)|0,Z=c(D);for(let pe=0;pe<D;pe+=1)Z[pe]=ve[pe]&255;return Z}function x(ve){if(ht(ve,s)){const D=new s(ve);return _(D.buffer,D.byteOffset,D.byteLength)}return v(ve)}function _(ve,D,Z){if(D<0||ve.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(ve.byteLength<D+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return D===void 0&&Z===void 0?pe=new s(ve):Z===void 0?pe=new s(ve,D):pe=new s(ve,D,Z),Object.setPrototypeOf(pe,u.prototype),pe}function S(ve){if(u.isBuffer(ve)){const D=C(ve.length)|0,Z=c(D);return Z.length===0||ve.copy(Z,0,0,D),Z}if(ve.length!==void 0)return typeof ve.length!="number"||Ot(ve.length)?c(0):v(ve);if(ve.type==="Buffer"&&Array.isArray(ve.data))return v(ve.data)}function C(ve){if(ve>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return ve|0}function E(ve){return+ve!=ve&&(ve=0),u.alloc(+ve)}u.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==u.prototype},u.compare=function(D,Z){if(ht(D,s)&&(D=u.from(D,D.offset,D.byteLength)),ht(Z,s)&&(Z=u.from(Z,Z.offset,Z.byteLength)),!u.isBuffer(D)||!u.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===Z)return 0;let pe=D.length,Oe=Z.length;for(let xe=0,Ie=Math.min(pe,Oe);xe<Ie;++xe)if(D[xe]!==Z[xe]){pe=D[xe],Oe=Z[xe];break}return pe<Oe?-1:Oe<pe?1:0},u.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(D,Z){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return u.alloc(0);let pe;if(Z===void 0)for(Z=0,pe=0;pe<D.length;++pe)Z+=D[pe].length;const Oe=u.allocUnsafe(Z);let xe=0;for(pe=0;pe<D.length;++pe){let Ie=D[pe];if(ht(Ie,s))xe+Ie.length>Oe.length?(u.isBuffer(Ie)||(Ie=u.from(Ie)),Ie.copy(Oe,xe)):s.prototype.set.call(Oe,Ie,xe);else if(u.isBuffer(Ie))Ie.copy(Oe,xe);else throw new TypeError('"list" argument must be an Array of Buffers');xe+=Ie.length}return Oe};function A(ve,D){if(u.isBuffer(ve))return ve.length;if(a.isView(ve)||ht(ve,a))return ve.byteLength;if(typeof ve!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ve);const Z=ve.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&Z===0)return 0;let Oe=!1;for(;;)switch(D){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return Ee(ve).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return ct(ve).length;default:if(Oe)return pe?-1:Ee(ve).length;D=(""+D).toLowerCase(),Oe=!0}}u.byteLength=A;function R(ve,D,Z){let pe=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,D>>>=0,Z<=D))return"";for(ve||(ve="utf8");;)switch(ve){case"hex":return ee(this,D,Z);case"utf8":case"utf-8":return G(this,D,Z);case"ascii":return H(this,D,Z);case"latin1":case"binary":return te(this,D,Z);case"base64":return U(this,D,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,D,Z);default:if(pe)throw new TypeError("Unknown encoding: "+ve);ve=(ve+"").toLowerCase(),pe=!0}}u.prototype._isBuffer=!0;function N(ve,D,Z){const pe=ve[D];ve[D]=ve[Z],ve[Z]=pe}u.prototype.swap16=function(){const D=this.length;if(D%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<D;Z+=2)N(this,Z,Z+1);return this},u.prototype.swap32=function(){const D=this.length;if(D%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<D;Z+=4)N(this,Z,Z+3),N(this,Z+1,Z+2);return this},u.prototype.swap64=function(){const D=this.length;if(D%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<D;Z+=8)N(this,Z,Z+7),N(this,Z+1,Z+6),N(this,Z+2,Z+5),N(this,Z+3,Z+4);return this},u.prototype.toString=function(){const D=this.length;return D===0?"":arguments.length===0?G(this,0,D):R.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(D){if(!u.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D?!0:u.compare(this,D)===0},u.prototype.inspect=function(){let D="";const Z=e.INSPECT_MAX_BYTES;return D=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(D+=" ... "),"<Buffer "+D+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(D,Z,pe,Oe,xe){if(ht(D,s)&&(D=u.from(D,D.offset,D.byteLength)),!u.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(Z===void 0&&(Z=0),pe===void 0&&(pe=D?D.length:0),Oe===void 0&&(Oe=0),xe===void 0&&(xe=this.length),Z<0||pe>D.length||Oe<0||xe>this.length)throw new RangeError("out of range index");if(Oe>=xe&&Z>=pe)return 0;if(Oe>=xe)return-1;if(Z>=pe)return 1;if(Z>>>=0,pe>>>=0,Oe>>>=0,xe>>>=0,this===D)return 0;let Ie=xe-Oe,de=pe-Z;const bt=Math.min(Ie,de),St=this.slice(Oe,xe),z=D.slice(Z,pe);for(let Ve=0;Ve<bt;++Ve)if(St[Ve]!==z[Ve]){Ie=St[Ve],de=z[Ve];break}return Ie<de?-1:de<Ie?1:0};function M(ve,D,Z,pe,Oe){if(ve.length===0)return-1;if(typeof Z=="string"?(pe=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Ot(Z)&&(Z=Oe?0:ve.length-1),Z<0&&(Z=ve.length+Z),Z>=ve.length){if(Oe)return-1;Z=ve.length-1}else if(Z<0)if(Oe)Z=0;else return-1;if(typeof D=="string"&&(D=u.from(D,pe)),u.isBuffer(D))return D.length===0?-1:P(ve,D,Z,pe,Oe);if(typeof D=="number")return D=D&255,typeof s.prototype.indexOf=="function"?Oe?s.prototype.indexOf.call(ve,D,Z):s.prototype.lastIndexOf.call(ve,D,Z):P(ve,[D],Z,pe,Oe);throw new TypeError("val must be string, number or Buffer")}function P(ve,D,Z,pe,Oe){let xe=1,Ie=ve.length,de=D.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(ve.length<2||D.length<2)return-1;xe=2,Ie/=2,de/=2,Z/=2}function bt(z,Ve){return xe===1?z[Ve]:z.readUInt16BE(Ve*xe)}let St;if(Oe){let z=-1;for(St=Z;St<Ie;St++)if(bt(ve,St)===bt(D,z===-1?0:St-z)){if(z===-1&&(z=St),St-z+1===de)return z*xe}else z!==-1&&(St-=St-z),z=-1}else for(Z+de>Ie&&(Z=Ie-de),St=Z;St>=0;St--){let z=!0;for(let Ve=0;Ve<de;Ve++)if(bt(ve,St+Ve)!==bt(D,Ve)){z=!1;break}if(z)return St}return-1}u.prototype.includes=function(D,Z,pe){return this.indexOf(D,Z,pe)!==-1},u.prototype.indexOf=function(D,Z,pe){return M(this,D,Z,pe,!0)},u.prototype.lastIndexOf=function(D,Z,pe){return M(this,D,Z,pe,!1)};function L(ve,D,Z,pe){Z=Number(Z)||0;const Oe=ve.length-Z;pe?(pe=Number(pe),pe>Oe&&(pe=Oe)):pe=Oe;const xe=D.length;pe>xe/2&&(pe=xe/2);let Ie;for(Ie=0;Ie<pe;++Ie){const de=parseInt(D.substr(Ie*2,2),16);if(Ot(de))return Ie;ve[Z+Ie]=de}return Ie}function O(ve,D,Z,pe){return It(Ee(D,ve.length-Z),ve,Z,pe)}function V(ve,D,Z,pe){return It(Be(D),ve,Z,pe)}function F(ve,D,Z,pe){return It(ct(D),ve,Z,pe)}function J(ve,D,Z,pe){return It(ke(D,ve.length-Z),ve,Z,pe)}u.prototype.write=function(D,Z,pe,Oe){if(Z===void 0)Oe="utf8",pe=this.length,Z=0;else if(pe===void 0&&typeof Z=="string")Oe=Z,pe=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(pe)?(pe=pe>>>0,Oe===void 0&&(Oe="utf8")):(Oe=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const xe=this.length-Z;if((pe===void 0||pe>xe)&&(pe=xe),D.length>0&&(pe<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let Ie=!1;for(;;)switch(Oe){case"hex":return L(this,D,Z,pe);case"utf8":case"utf-8":return O(this,D,Z,pe);case"ascii":case"latin1":case"binary":return V(this,D,Z,pe);case"base64":return F(this,D,Z,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,D,Z,pe);default:if(Ie)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),Ie=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(ve,D,Z){return D===0&&Z===ve.length?t.fromByteArray(ve):t.fromByteArray(ve.slice(D,Z))}function G(ve,D,Z){Z=Math.min(ve.length,Z);const pe=[];let Oe=D;for(;Oe<Z;){const xe=ve[Oe];let Ie=null,de=xe>239?4:xe>223?3:xe>191?2:1;if(Oe+de<=Z){let bt,St,z,Ve;switch(de){case 1:xe<128&&(Ie=xe);break;case 2:bt=ve[Oe+1],(bt&192)===128&&(Ve=(xe&31)<<6|bt&63,Ve>127&&(Ie=Ve));break;case 3:bt=ve[Oe+1],St=ve[Oe+2],(bt&192)===128&&(St&192)===128&&(Ve=(xe&15)<<12|(bt&63)<<6|St&63,Ve>2047&&(Ve<55296||Ve>57343)&&(Ie=Ve));break;case 4:bt=ve[Oe+1],St=ve[Oe+2],z=ve[Oe+3],(bt&192)===128&&(St&192)===128&&(z&192)===128&&(Ve=(xe&15)<<18|(bt&63)<<12|(St&63)<<6|z&63,Ve>65535&&Ve<1114112&&(Ie=Ve))}}Ie===null?(Ie=65533,de=1):Ie>65535&&(Ie-=65536,pe.push(Ie>>>10&1023|55296),Ie=56320|Ie&1023),pe.push(Ie),Oe+=de}return ne(pe)}const $=4096;function ne(ve){const D=ve.length;if(D<=$)return String.fromCharCode.apply(String,ve);let Z="",pe=0;for(;pe<D;)Z+=String.fromCharCode.apply(String,ve.slice(pe,pe+=$));return Z}function H(ve,D,Z){let pe="";Z=Math.min(ve.length,Z);for(let Oe=D;Oe<Z;++Oe)pe+=String.fromCharCode(ve[Oe]&127);return pe}function te(ve,D,Z){let pe="";Z=Math.min(ve.length,Z);for(let Oe=D;Oe<Z;++Oe)pe+=String.fromCharCode(ve[Oe]);return pe}function ee(ve,D,Z){const pe=ve.length;(!D||D<0)&&(D=0),(!Z||Z<0||Z>pe)&&(Z=pe);let Oe="";for(let xe=D;xe<Z;++xe)Oe+=zt[ve[xe]];return Oe}function se(ve,D,Z){const pe=ve.slice(D,Z);let Oe="";for(let xe=0;xe<pe.length-1;xe+=2)Oe+=String.fromCharCode(pe[xe]+pe[xe+1]*256);return Oe}u.prototype.slice=function(D,Z){const pe=this.length;D=~~D,Z=Z===void 0?pe:~~Z,D<0?(D+=pe,D<0&&(D=0)):D>pe&&(D=pe),Z<0?(Z+=pe,Z<0&&(Z=0)):Z>pe&&(Z=pe),Z<D&&(Z=D);const Oe=this.subarray(D,Z);return Object.setPrototypeOf(Oe,u.prototype),Oe};function he(ve,D,Z){if(ve%1!==0||ve<0)throw new RangeError("offset is not uint");if(ve+D>Z)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(D,Z,pe){D=D>>>0,Z=Z>>>0,pe||he(D,Z,this.length);let Oe=this[D],xe=1,Ie=0;for(;++Ie<Z&&(xe*=256);)Oe+=this[D+Ie]*xe;return Oe},u.prototype.readUintBE=u.prototype.readUIntBE=function(D,Z,pe){D=D>>>0,Z=Z>>>0,pe||he(D,Z,this.length);let Oe=this[D+--Z],xe=1;for(;Z>0&&(xe*=256);)Oe+=this[D+--Z]*xe;return Oe},u.prototype.readUint8=u.prototype.readUInt8=function(D,Z){return D=D>>>0,Z||he(D,1,this.length),this[D]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(D,Z){return D=D>>>0,Z||he(D,2,this.length),this[D]|this[D+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(D,Z){return D=D>>>0,Z||he(D,2,this.length),this[D]<<8|this[D+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(D,Z){return D=D>>>0,Z||he(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+this[D+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(D,Z){return D=D>>>0,Z||he(D,4,this.length),this[D]*16777216+(this[D+1]<<16|this[D+2]<<8|this[D+3])},u.prototype.readBigUInt64LE=Bt(function(D){D=D>>>0,Ae(D,"offset");const Z=this[D],pe=this[D+7];(Z===void 0||pe===void 0)&&le(D,this.length-8);const Oe=Z+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24,xe=this[++D]+this[++D]*2**8+this[++D]*2**16+pe*2**24;return BigInt(Oe)+(BigInt(xe)<<BigInt(32))}),u.prototype.readBigUInt64BE=Bt(function(D){D=D>>>0,Ae(D,"offset");const Z=this[D],pe=this[D+7];(Z===void 0||pe===void 0)&&le(D,this.length-8);const Oe=Z*2**24+this[++D]*2**16+this[++D]*2**8+this[++D],xe=this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+pe;return(BigInt(Oe)<<BigInt(32))+BigInt(xe)}),u.prototype.readIntLE=function(D,Z,pe){D=D>>>0,Z=Z>>>0,pe||he(D,Z,this.length);let Oe=this[D],xe=1,Ie=0;for(;++Ie<Z&&(xe*=256);)Oe+=this[D+Ie]*xe;return xe*=128,Oe>=xe&&(Oe-=Math.pow(2,8*Z)),Oe},u.prototype.readIntBE=function(D,Z,pe){D=D>>>0,Z=Z>>>0,pe||he(D,Z,this.length);let Oe=Z,xe=1,Ie=this[D+--Oe];for(;Oe>0&&(xe*=256);)Ie+=this[D+--Oe]*xe;return xe*=128,Ie>=xe&&(Ie-=Math.pow(2,8*Z)),Ie},u.prototype.readInt8=function(D,Z){return D=D>>>0,Z||he(D,1,this.length),this[D]&128?(255-this[D]+1)*-1:this[D]},u.prototype.readInt16LE=function(D,Z){D=D>>>0,Z||he(D,2,this.length);const pe=this[D]|this[D+1]<<8;return pe&32768?pe|4294901760:pe},u.prototype.readInt16BE=function(D,Z){D=D>>>0,Z||he(D,2,this.length);const pe=this[D+1]|this[D]<<8;return pe&32768?pe|4294901760:pe},u.prototype.readInt32LE=function(D,Z){return D=D>>>0,Z||he(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},u.prototype.readInt32BE=function(D,Z){return D=D>>>0,Z||he(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},u.prototype.readBigInt64LE=Bt(function(D){D=D>>>0,Ae(D,"offset");const Z=this[D],pe=this[D+7];(Z===void 0||pe===void 0)&&le(D,this.length-8);const Oe=this[D+4]+this[D+5]*2**8+this[D+6]*2**16+(pe<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(Z+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24)}),u.prototype.readBigInt64BE=Bt(function(D){D=D>>>0,Ae(D,"offset");const Z=this[D],pe=this[D+7];(Z===void 0||pe===void 0)&&le(D,this.length-8);const Oe=(Z<<24)+this[++D]*2**16+this[++D]*2**8+this[++D];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+pe)}),u.prototype.readFloatLE=function(D,Z){return D=D>>>0,Z||he(D,4,this.length),n.read(this,D,!0,23,4)},u.prototype.readFloatBE=function(D,Z){return D=D>>>0,Z||he(D,4,this.length),n.read(this,D,!1,23,4)},u.prototype.readDoubleLE=function(D,Z){return D=D>>>0,Z||he(D,8,this.length),n.read(this,D,!0,52,8)},u.prototype.readDoubleBE=function(D,Z){return D=D>>>0,Z||he(D,8,this.length),n.read(this,D,!1,52,8)};function ce(ve,D,Z,pe,Oe,xe){if(!u.isBuffer(ve))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>Oe||D<xe)throw new RangeError('"value" argument is out of bounds');if(Z+pe>ve.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(D,Z,pe,Oe){if(D=+D,Z=Z>>>0,pe=pe>>>0,!Oe){const de=Math.pow(2,8*pe)-1;ce(this,D,Z,pe,de,0)}let xe=1,Ie=0;for(this[Z]=D&255;++Ie<pe&&(xe*=256);)this[Z+Ie]=D/xe&255;return Z+pe},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(D,Z,pe,Oe){if(D=+D,Z=Z>>>0,pe=pe>>>0,!Oe){const de=Math.pow(2,8*pe)-1;ce(this,D,Z,pe,de,0)}let xe=pe-1,Ie=1;for(this[Z+xe]=D&255;--xe>=0&&(Ie*=256);)this[Z+xe]=D/Ie&255;return Z+pe},u.prototype.writeUint8=u.prototype.writeUInt8=function(D,Z,pe){return D=+D,Z=Z>>>0,pe||ce(this,D,Z,1,255,0),this[Z]=D&255,Z+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(D,Z,pe){return D=+D,Z=Z>>>0,pe||ce(this,D,Z,2,65535,0),this[Z]=D&255,this[Z+1]=D>>>8,Z+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(D,Z,pe){return D=+D,Z=Z>>>0,pe||ce(this,D,Z,2,65535,0),this[Z]=D>>>8,this[Z+1]=D&255,Z+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(D,Z,pe){return D=+D,Z=Z>>>0,pe||ce(this,D,Z,4,4294967295,0),this[Z+3]=D>>>24,this[Z+2]=D>>>16,this[Z+1]=D>>>8,this[Z]=D&255,Z+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(D,Z,pe){return D=+D,Z=Z>>>0,pe||ce(this,D,Z,4,4294967295,0),this[Z]=D>>>24,this[Z+1]=D>>>16,this[Z+2]=D>>>8,this[Z+3]=D&255,Z+4};function Me(ve,D,Z,pe,Oe){ge(D,pe,Oe,ve,Z,7);let xe=Number(D&BigInt(4294967295));ve[Z++]=xe,xe=xe>>8,ve[Z++]=xe,xe=xe>>8,ve[Z++]=xe,xe=xe>>8,ve[Z++]=xe;let Ie=Number(D>>BigInt(32)&BigInt(4294967295));return ve[Z++]=Ie,Ie=Ie>>8,ve[Z++]=Ie,Ie=Ie>>8,ve[Z++]=Ie,Ie=Ie>>8,ve[Z++]=Ie,Z}function je(ve,D,Z,pe,Oe){ge(D,pe,Oe,ve,Z,7);let xe=Number(D&BigInt(4294967295));ve[Z+7]=xe,xe=xe>>8,ve[Z+6]=xe,xe=xe>>8,ve[Z+5]=xe,xe=xe>>8,ve[Z+4]=xe;let Ie=Number(D>>BigInt(32)&BigInt(4294967295));return ve[Z+3]=Ie,Ie=Ie>>8,ve[Z+2]=Ie,Ie=Ie>>8,ve[Z+1]=Ie,Ie=Ie>>8,ve[Z]=Ie,Z+8}u.prototype.writeBigUInt64LE=Bt(function(D,Z=0){return Me(this,D,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Bt(function(D,Z=0){return je(this,D,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(D,Z,pe,Oe){if(D=+D,Z=Z>>>0,!Oe){const bt=Math.pow(2,8*pe-1);ce(this,D,Z,pe,bt-1,-bt)}let xe=0,Ie=1,de=0;for(this[Z]=D&255;++xe<pe&&(Ie*=256);)D<0&&de===0&&this[Z+xe-1]!==0&&(de=1),this[Z+xe]=(D/Ie>>0)-de&255;return Z+pe},u.prototype.writeIntBE=function(D,Z,pe,Oe){if(D=+D,Z=Z>>>0,!Oe){const bt=Math.pow(2,8*pe-1);ce(this,D,Z,pe,bt-1,-bt)}let xe=pe-1,Ie=1,de=0;for(this[Z+xe]=D&255;--xe>=0&&(Ie*=256);)D<0&&de===0&&this[Z+xe+1]!==0&&(de=1),this[Z+xe]=(D/Ie>>0)-de&255;return Z+pe},u.prototype.writeInt8=function(D,Z,pe){return D=+D,Z=Z>>>0,pe||ce(this,D,Z,1,127,-128),D<0&&(D=255+D+1),this[Z]=D&255,Z+1},u.prototype.writeInt16LE=function(D,Z,pe){return D=+D,Z=Z>>>0,pe||ce(this,D,Z,2,32767,-32768),this[Z]=D&255,this[Z+1]=D>>>8,Z+2},u.prototype.writeInt16BE=function(D,Z,pe){return D=+D,Z=Z>>>0,pe||ce(this,D,Z,2,32767,-32768),this[Z]=D>>>8,this[Z+1]=D&255,Z+2},u.prototype.writeInt32LE=function(D,Z,pe){return D=+D,Z=Z>>>0,pe||ce(this,D,Z,4,2147483647,-2147483648),this[Z]=D&255,this[Z+1]=D>>>8,this[Z+2]=D>>>16,this[Z+3]=D>>>24,Z+4},u.prototype.writeInt32BE=function(D,Z,pe){return D=+D,Z=Z>>>0,pe||ce(this,D,Z,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[Z]=D>>>24,this[Z+1]=D>>>16,this[Z+2]=D>>>8,this[Z+3]=D&255,Z+4},u.prototype.writeBigInt64LE=Bt(function(D,Z=0){return Me(this,D,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Bt(function(D,Z=0){return je(this,D,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne(ve,D,Z,pe,Oe,xe){if(Z+pe>ve.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function Ce(ve,D,Z,pe,Oe){return D=+D,Z=Z>>>0,Oe||Ne(ve,D,Z,4),n.write(ve,D,Z,pe,23,4),Z+4}u.prototype.writeFloatLE=function(D,Z,pe){return Ce(this,D,Z,!0,pe)},u.prototype.writeFloatBE=function(D,Z,pe){return Ce(this,D,Z,!1,pe)};function Ue(ve,D,Z,pe,Oe){return D=+D,Z=Z>>>0,Oe||Ne(ve,D,Z,8),n.write(ve,D,Z,pe,52,8),Z+8}u.prototype.writeDoubleLE=function(D,Z,pe){return Ue(this,D,Z,!0,pe)},u.prototype.writeDoubleBE=function(D,Z,pe){return Ue(this,D,Z,!1,pe)},u.prototype.copy=function(D,Z,pe,Oe){if(!u.isBuffer(D))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Oe&&Oe!==0&&(Oe=this.length),Z>=D.length&&(Z=D.length),Z||(Z=0),Oe>0&&Oe<pe&&(Oe=pe),Oe===pe||D.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),D.length-Z<Oe-pe&&(Oe=D.length-Z+pe);const xe=Oe-pe;return this===D&&typeof s.prototype.copyWithin=="function"?this.copyWithin(Z,pe,Oe):s.prototype.set.call(D,this.subarray(pe,Oe),Z),xe},u.prototype.fill=function(D,Z,pe,Oe){if(typeof D=="string"){if(typeof Z=="string"?(Oe=Z,Z=0,pe=this.length):typeof pe=="string"&&(Oe=pe,pe=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!u.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(D.length===1){const Ie=D.charCodeAt(0);(Oe==="utf8"&&Ie<128||Oe==="latin1")&&(D=Ie)}}else typeof D=="number"?D=D&255:typeof D=="boolean"&&(D=Number(D));if(Z<0||this.length<Z||this.length<pe)throw new RangeError("Out of range index");if(pe<=Z)return this;Z=Z>>>0,pe=pe===void 0?this.length:pe>>>0,D||(D=0);let xe;if(typeof D=="number")for(xe=Z;xe<pe;++xe)this[xe]=D;else{const Ie=u.isBuffer(D)?D:u.from(D,Oe),de=Ie.length;if(de===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(xe=0;xe<pe-Z;++xe)this[xe+Z]=Ie[xe%de]}return this};const et={};function qe(ve,D,Z){et[ve]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:D.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ve}]`,this.stack,delete this.name}get code(){return ve}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${ve}]: ${this.message}`}}}qe("ERR_BUFFER_OUT_OF_BOUNDS",function(ve){return ve?`${ve} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),qe("ERR_INVALID_ARG_TYPE",function(ve,D){return`The "${ve}" argument must be of type number. Received type ${typeof D}`},TypeError),qe("ERR_OUT_OF_RANGE",function(ve,D,Z){let pe=`The value of "${ve}" is out of range.`,Oe=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?Oe=Re(String(Z)):typeof Z=="bigint"&&(Oe=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(Oe=Re(Oe)),Oe+="n"),pe+=` It must be ${D}. Received ${Oe}`,pe},RangeError);function Re(ve){let D="",Z=ve.length;const pe=ve[0]==="-"?1:0;for(;Z>=pe+4;Z-=3)D=`_${ve.slice(Z-3,Z)}${D}`;return`${ve.slice(0,Z)}${D}`}function K(ve,D,Z){Ae(D,"offset"),(ve[D]===void 0||ve[D+Z]===void 0)&&le(D,ve.length-(Z+1))}function ge(ve,D,Z,pe,Oe,xe){if(ve>Z||ve<D){const Ie=typeof D=="bigint"?"n":"";let de;throw D===0||D===BigInt(0)?de=`>= 0${Ie} and < 2${Ie} ** ${(xe+1)*8}${Ie}`:de=`>= -(2${Ie} ** ${(xe+1)*8-1}${Ie}) and < 2 ** ${(xe+1)*8-1}${Ie}`,new et.ERR_OUT_OF_RANGE("value",de,ve)}K(pe,Oe,xe)}function Ae(ve,D){if(typeof ve!="number")throw new et.ERR_INVALID_ARG_TYPE(D,"number",ve)}function le(ve,D,Z){throw Math.floor(ve)!==ve?(Ae(ve,Z),new et.ERR_OUT_OF_RANGE("offset","an integer",ve)):D<0?new et.ERR_BUFFER_OUT_OF_BOUNDS:new et.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${D}`,ve)}const oe=/[^+/0-9A-Za-z-_]/g;function ie(ve){if(ve=ve.split("=")[0],ve=ve.trim().replace(oe,""),ve.length<2)return"";for(;ve.length%4!==0;)ve=ve+"=";return ve}function Ee(ve,D){D=D||1/0;let Z;const pe=ve.length;let Oe=null;const xe=[];for(let Ie=0;Ie<pe;++Ie){if(Z=ve.charCodeAt(Ie),Z>55295&&Z<57344){if(!Oe){if(Z>56319){(D-=3)>-1&&xe.push(239,191,189);continue}else if(Ie+1===pe){(D-=3)>-1&&xe.push(239,191,189);continue}Oe=Z;continue}if(Z<56320){(D-=3)>-1&&xe.push(239,191,189),Oe=Z;continue}Z=(Oe-55296<<10|Z-56320)+65536}else Oe&&(D-=3)>-1&&xe.push(239,191,189);if(Oe=null,Z<128){if((D-=1)<0)break;xe.push(Z)}else if(Z<2048){if((D-=2)<0)break;xe.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((D-=3)<0)break;xe.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((D-=4)<0)break;xe.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return xe}function Be(ve){const D=[];for(let Z=0;Z<ve.length;++Z)D.push(ve.charCodeAt(Z)&255);return D}function ke(ve,D){let Z,pe,Oe;const xe=[];for(let Ie=0;Ie<ve.length&&!((D-=2)<0);++Ie)Z=ve.charCodeAt(Ie),pe=Z>>8,Oe=Z%256,xe.push(Oe),xe.push(pe);return xe}function ct(ve){return t.toByteArray(ie(ve))}function It(ve,D,Z,pe){let Oe;for(Oe=0;Oe<pe&&!(Oe+Z>=D.length||Oe>=ve.length);++Oe)D[Oe+Z]=ve[Oe];return Oe}function ht(ve,D){return ve instanceof D||ve!=null&&ve.constructor!=null&&ve.constructor.name!=null&&ve.constructor.name===D.name}function Ot(ve){return ve!==ve}const zt=function(){const ve="0123456789abcdef",D=new Array(256);for(let Z=0;Z<16;++Z){const pe=Z*16;for(let Oe=0;Oe<16;++Oe)D[pe+Oe]=ve[Z]+ve[Oe]}return D}();function Bt(ve){return typeof BigInt>"u"?rn:ve}function rn(){throw new Error("BigInt not supported")}})(uP);const on=uP.Buffer,Ii=uP.Buffer;var Jh={exports:{}},iB;function b0e(){if(iB)return Jh.exports;iB=1;const e=typeof on<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,c){c==null&&l!==null&&typeof l=="object"&&(c=l,l=void 0),e&&on.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const u=JSON.parse(o,l);if(u===null||typeof u!="object")return u;const d=c&&c.protoAction||"error",h=c&&c.constructorAction||"error";if(d==="ignore"&&h==="ignore")return u;if(d!=="ignore"&&h!=="ignore"){if(t.test(o)===!1&&n.test(o)===!1)return u}else if(d!=="ignore"&&h==="ignore"){if(t.test(o)===!1)return u}else if(n.test(o)===!1)return u;return i(u,{protoAction:d,constructorAction:h,safe:c&&c.safe})}function i(o,{protoAction:l="error",constructorAction:c="error",safe:u}={}){let d=[o];for(;d.length;){const h=d;d=[];for(const m of h){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"__proto__")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(m,"constructor")&&Object.prototype.hasOwnProperty.call(m.constructor,"prototype")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete m.constructor}for(const y in m){const b=m[y];b&&typeof b=="object"&&d.push(b)}}}return o}function s(o,l,c){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,c)}finally{Error.stackTraceLimit=u}}function a(o,l){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return Jh.exports=s,Jh.exports.default=s,Jh.exports.parse=s,Jh.exports.safeParse=a,Jh.exports.scan=i,Jh.exports}var v0e=b0e();const Z0=ma(v0e);var x0e={};function us(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function w0e(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function _0e(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function S0e(){let e="",t,n=[],r,i;function s(l,c){if(l===""){a(c);return}if(l.startsWith(":"))return;const u=l.indexOf(":");if(u===-1){o(l,"");return}const d=l.slice(0,u),h=u+1,m=h<l.length&&l[h]===" "?l.slice(h+1):l.slice(h);o(d,m)}function a(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:i}),n=[],t=void 0,i=void 0)}function o(l,c){switch(l){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const u=parseInt(c,10);isNaN(u)||(i=u);break}}return new TransformStream({transform(l,c){const{lines:u,incompleteLine:d}=C0e(e,l);e=d;for(let h=0;h<u.length;h++)s(u[h],c)},flush(l){s(e,l),a(l)}})}function C0e(e,t){const n=[];let r=e;for(let i=0;i<t.length;){const s=t[i++];s===`
`?(n.push(r),r=""):s==="\r"?(n.push(r),r="",t[i]===`
`&&i++):r+=s}return{lines:n,incompleteLine:r}}function X0(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var em=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const i=c0e(n,t);if(e==null)return i;if(n.includes(r))throw new tW({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return s=>`${e}${r}${i(s)}`},fo=em();function k0e(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function E0e(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function US(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function CW({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new z_({message:`${r} API key must be a string.`});if(typeof os>"u")throw new z_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=x0e[t],e==null)throw new z_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new z_({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var E2=Symbol.for("vercel.ai.validator");function T0e(e){return{[E2]:!0,validate:e}}function A0e(e){return typeof e=="object"&&e!==null&&E2 in e&&e[E2]===!0&&"validate"in e}function R0e(e){return A0e(e)?e:I0e(e)}function I0e(e){return T0e(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function N0e({value:e,schema:t}){const n=J0({value:e,schema:t});if(!n.success)throw k2.wrap({value:e,cause:n.error});return n.value}function J0({value:e,schema:t}){const n=R0e(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:k2.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:k2.wrap({value:e,cause:r})}}}function M0e({text:e,schema:t}){try{const n=Z0.parse(e);return t==null?n:N0e({value:n,schema:t})}catch(n){throw C2.isInstance(n)||k2.isInstance(n)?n:new C2({text:e,cause:n})}}function Dp({text:e,schema:t}){try{const n=Z0.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=J0({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:C2.isInstance(n)?n:new C2({text:e,cause:n})}}}function T2(e){try{return Z0.parse(e),!0}catch{return!1}}function Uk({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=J0({value:t[e],schema:n});if(!r.success)throw new tW({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var j0e=()=>globalThis.fetch,ds=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a})=>kW({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a}),P0e=async({url:e,headers:t,formData:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a})=>kW({url:e,headers:t,body:{content:n,values:Object.fromEntries(n.entries())},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a}),kW=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:s,fetch:a=j0e()})=>{try{const o=await a(e,{method:"POST",headers:E0e(t),body:n.content,signal:s}),l=X0(o);if(!o.ok){let c;try{c=await i({response:o,url:e,requestBodyValues:n.values})}catch(u){throw US(u)||Cl.isInstance(u)?u:new Cl({message:"Failed to process error response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(US(c)||Cl.isInstance(c))?c:new Cl({message:"Failed to process successful response",cause:c,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(US(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new Cl({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}};async function _3(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var tm=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:s})=>{const a=await r.text(),o=X0(r);if(a.trim()==="")return{responseHeaders:o,value:new Cl({message:r.statusText,url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})};try{const l=M0e({text:a,schema:e});return{responseHeaders:o,value:new Cl({message:t(l),url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new Cl({message:r.statusText,url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})}}},Q0=e=>async({response:t})=>{const n=X0(t);if(t.body==null)throw new XH({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(S0e()).pipeThrough(new TransformStream({transform({data:r},i){r!=="[DONE]"&&i.enqueue(Dp({text:r,schema:e}))}}))}},Eo=e=>async({response:t,url:n,requestBodyValues:r})=>{const i=await t.text(),s=Dp({text:i,schema:e}),a=X0(t);if(!s.success)throw new Cl({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:a,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:a,value:s.value,rawValue:s.rawValue}},O0e=()=>async({response:e,url:t,requestBodyValues:n})=>{const r=X0(e);if(!e.body)throw new Cl({message:"Response body is empty",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0});try{const i=await e.arrayBuffer();return{responseHeaders:r,value:new Uint8Array(i)}}catch(i){throw new Cl({message:"Failed to read response as array buffer",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0,cause:i})}},{btoa:D0e,atob:F0e}=globalThis;function qk(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=F0e(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function Vf(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return D0e(t)}function Vk(e){return e==null?void 0:e.replace(/\/$/,"")}var Kr;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return e.objectValues(a)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},e.find=(i,s)=>{for(const a of i)if(s(a))return a},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}e.joinValues=r,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Kr||(Kr={}));var sB;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(sB||(sB={}));const gn=Kr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),If=e=>{switch(typeof e){case"undefined":return gn.undefined;case"string":return gn.string;case"number":return Number.isNaN(e)?gn.nan:gn.number;case"boolean":return gn.boolean;case"function":return gn.function;case"bigint":return gn.bigint;case"symbol":return gn.symbol;case"object":return Array.isArray(e)?gn.array:e===null?gn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?gn.promise:typeof Map<"u"&&e instanceof Map?gn.map:typeof Set<"u"&&e instanceof Set?gn.set:typeof Date<"u"&&e instanceof Date?gn.date:gn.object;default:return gn.unknown}},Yt=Kr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class lu extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(s){return s.message},r={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),r}static assert(t){if(!(t instanceof lu))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}lu.create=e=>new lu(e);const S3=(e,t)=>{let n;switch(e.code){case Yt.invalid_type:e.received===gn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Yt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Kr.jsonStringifyReplacer)}`;break;case Yt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Kr.joinValues(e.keys,", ")}`;break;case Yt.invalid_union:n="Invalid input";break;case Yt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Kr.joinValues(e.options)}`;break;case Yt.invalid_enum_value:n=`Invalid enum value. Expected ${Kr.joinValues(e.options)}, received '${e.received}'`;break;case Yt.invalid_arguments:n="Invalid function arguments";break;case Yt.invalid_return_type:n="Invalid function return type";break;case Yt.invalid_date:n="Invalid date";break;case Yt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Kr.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Yt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Yt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Yt.custom:n="Invalid input";break;case Yt.invalid_intersection_types:n="Intersection results could not be merged";break;case Yt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Yt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Kr.assertNever(e)}return{message:n}};let L0e=S3;function B0e(){return L0e}const $0e=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}};function fn(e,t){const n=B0e(),r=$0e({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===S3?void 0:S3].filter(i=>!!i)});e.common.issues.push(r)}class Za{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return sr;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const s=await i.key,a=await i.value;r.push({key:s,value:a})}return Za.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return sr;s.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[s.value]=a.value)}return{status:t.value,value:r}}}const sr=Object.freeze({status:"aborted"}),gv=e=>({status:"dirty",value:e}),Ml=e=>({status:"valid",value:e}),aB=e=>e.status==="aborted",oB=e=>e.status==="dirty",f0=e=>e.status==="valid",A2=e=>typeof Promise<"u"&&e instanceof Promise;var Cn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Cn||(Cn={}));class cu{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const lB=(e,t)=>{if(f0(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new lu(e.common.issues);return this._error=n,this._error}}};function Sr(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(a,o)=>{const{message:l}=e;return a.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??r??o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:l??n??o.defaultError}},description:i}}class Lr{get description(){return this._def.description}_getType(t){return If(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:If(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Za,ctx:{common:t.parent.common,data:t.data,parsedType:If(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(A2(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:If(t)},i=this._parseSync({data:t,path:r.path,parent:r});return lB(r,i)}"~validate"(t){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:If(t)};if(!this["~standard"].async)try{const s=this._parseSync({data:t,path:[],parent:n});return f0(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(s=>f0(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:If(t)},i=this._parse({data:t,path:r.path,parent:r}),s=await(A2(i)?i:Promise.resolve(i));return lB(r,s)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const a=t(i),o=()=>s.addIssue({code:Yt.custom,...r(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new Bp({schema:this,typeName:Jt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return eu.create(this,this._def)}nullable(){return $p.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qc.create(this)}promise(){return D2.create(this,this._def)}or(t){return N2.create([this,t],this._def)}and(t){return M2.create(this,t,this._def)}transform(t){return new Bp({...Sr(this._def),schema:this,typeName:Jt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new F2({...Sr(this._def),innerType:this,defaultValue:n,typeName:Jt.ZodDefault})}brand(){return new RW({typeName:Jt.ZodBranded,type:this,...Sr(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new L2({...Sr(this._def),innerType:this,catchValue:n,typeName:Jt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return hP.create(this,t)}readonly(){return B2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const z0e=/^c[^\s-]{8,}$/i,U0e=/^[0-9a-z]+$/,q0e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,V0e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,H0e=/^[a-z0-9_-]{21}$/i,W0e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,G0e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,K0e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Y0e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let LR;const Z0e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,X0e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,J0e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Q0e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eye=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tye=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,EW="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nye=new RegExp(`^${EW}$`);function TW(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function rye(e){return new RegExp(`^${TW(e)}$`)}function iye(e){let t=`${EW}T${TW(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function sye(e,t){return!!((t==="v4"||!t)&&Z0e.test(e)||(t==="v6"||!t)&&J0e.test(e))}function aye(e,t){if(!W0e.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function oye(e,t){return!!((t==="v4"||!t)&&X0e.test(e)||(t==="v6"||!t)&&Q0e.test(e))}class od extends Lr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==gn.string){const s=this._getOrReturnCtx(t);return fn(s,{code:Yt.invalid_type,expected:gn.string,received:s.parsedType}),sr}const r=new Za;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),fn(i,{code:Yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),fn(i,{code:Yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const a=t.data.length>s.value,o=t.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(t,i),a?fn(i,{code:Yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&fn(i,{code:Yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")K0e.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"email",code:Yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")LR||(LR=new RegExp(Y0e,"u")),LR.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"emoji",code:Yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")V0e.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"uuid",code:Yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")H0e.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"nanoid",code:Yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")z0e.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"cuid",code:Yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")U0e.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"cuid2",code:Yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")q0e.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"ulid",code:Yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),fn(i,{validation:"url",code:Yt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"regex",code:Yt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Yt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Yt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Yt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?iye(s).test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Yt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?nye.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Yt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?rye(s).test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{code:Yt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?G0e.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"duration",code:Yt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?sye(t.data,s.version)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"ip",code:Yt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?aye(t.data,s.alg)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"jwt",code:Yt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?oye(t.data,s.version)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"cidr",code:Yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?eye.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"base64",code:Yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?tye.test(t.data)||(i=this._getOrReturnCtx(t,i),fn(i,{validation:"base64url",code:Yt.invalid_string,message:s.message}),r.dirty()):Kr.assertNever(s);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:Yt.invalid_string,...Cn.errToObj(r)})}_addCheck(t){return new od({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Cn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Cn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Cn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Cn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Cn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Cn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Cn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Cn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Cn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Cn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Cn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Cn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Cn.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Cn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Cn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Cn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Cn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Cn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Cn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Cn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Cn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Cn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Cn.errToObj(n)})}nonempty(t){return this.min(1,Cn.errToObj(t))}trim(){return new od({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new od({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new od({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}od.create=e=>new od({checks:[],typeName:Jt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Sr(e)});function lye(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(e.toFixed(i).replace(".","")),a=Number.parseInt(t.toFixed(i).replace(".",""));return s%a/10**i}class h0 extends Lr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==gn.number){const s=this._getOrReturnCtx(t);return fn(s,{code:Yt.invalid_type,expected:gn.number,received:s.parsedType}),sr}let r;const i=new Za;for(const s of this._def.checks)s.kind==="int"?Kr.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),fn(r,{code:Yt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Yt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Yt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?lye(t.data,s.value)!==0&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),fn(r,{code:Yt.not_finite,message:s.message}),i.dirty()):Kr.assertNever(s);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Cn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Cn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Cn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Cn.toString(n))}setLimit(t,n,r,i){return new h0({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Cn.toString(i)}]})}_addCheck(t){return new h0({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Cn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Cn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Cn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Cn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Cn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Cn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Cn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Cn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Cn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Kr.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}h0.create=e=>new h0({checks:[],typeName:Jt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Sr(e)});class sx extends Lr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==gn.bigint)return this._getInvalidInput(t);let r;const i=new Za;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Yt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Yt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),fn(r,{code:Yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Kr.assertNever(s);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return fn(n,{code:Yt.invalid_type,expected:gn.bigint,received:n.parsedType}),sr}gte(t,n){return this.setLimit("min",t,!0,Cn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Cn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Cn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Cn.toString(n))}setLimit(t,n,r,i){return new sx({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Cn.toString(i)}]})}_addCheck(t){return new sx({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Cn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Cn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Cn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Cn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Cn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}sx.create=e=>new sx({checks:[],typeName:Jt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Sr(e)});class C3 extends Lr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==gn.boolean){const r=this._getOrReturnCtx(t);return fn(r,{code:Yt.invalid_type,expected:gn.boolean,received:r.parsedType}),sr}return Ml(t.data)}}C3.create=e=>new C3({typeName:Jt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Sr(e)});class R2 extends Lr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==gn.date){const s=this._getOrReturnCtx(t);return fn(s,{code:Yt.invalid_type,expected:gn.date,received:s.parsedType}),sr}if(Number.isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return fn(s,{code:Yt.invalid_date}),sr}const r=new Za;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),fn(i,{code:Yt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),fn(i,{code:Yt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Kr.assertNever(s);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new R2({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Cn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Cn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}R2.create=e=>new R2({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Jt.ZodDate,...Sr(e)});class cB extends Lr{_parse(t){if(this._getType(t)!==gn.symbol){const r=this._getOrReturnCtx(t);return fn(r,{code:Yt.invalid_type,expected:gn.symbol,received:r.parsedType}),sr}return Ml(t.data)}}cB.create=e=>new cB({typeName:Jt.ZodSymbol,...Sr(e)});class k3 extends Lr{_parse(t){if(this._getType(t)!==gn.undefined){const r=this._getOrReturnCtx(t);return fn(r,{code:Yt.invalid_type,expected:gn.undefined,received:r.parsedType}),sr}return Ml(t.data)}}k3.create=e=>new k3({typeName:Jt.ZodUndefined,...Sr(e)});class I2 extends Lr{_parse(t){if(this._getType(t)!==gn.null){const r=this._getOrReturnCtx(t);return fn(r,{code:Yt.invalid_type,expected:gn.null,received:r.parsedType}),sr}return Ml(t.data)}}I2.create=e=>new I2({typeName:Jt.ZodNull,...Sr(e)});class ax extends Lr{constructor(){super(...arguments),this._any=!0}_parse(t){return Ml(t.data)}}ax.create=e=>new ax({typeName:Jt.ZodAny,...Sr(e)});class E3 extends Lr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ml(t.data)}}E3.create=e=>new E3({typeName:Jt.ZodUnknown,...Sr(e)});class Hf extends Lr{_parse(t){const n=this._getOrReturnCtx(t);return fn(n,{code:Yt.invalid_type,expected:gn.never,received:n.parsedType}),sr}}Hf.create=e=>new Hf({typeName:Jt.ZodNever,...Sr(e)});class uB extends Lr{_parse(t){if(this._getType(t)!==gn.undefined){const r=this._getOrReturnCtx(t);return fn(r,{code:Yt.invalid_type,expected:gn.void,received:r.parsedType}),sr}return Ml(t.data)}}uB.create=e=>new uB({typeName:Jt.ZodVoid,...Sr(e)});class Qc extends Lr{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==gn.array)return fn(n,{code:Yt.invalid_type,expected:gn.array,received:n.parsedType}),sr;if(i.exactLength!==null){const a=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(a||o)&&(fn(n,{code:a?Yt.too_big:Yt.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(fn(n,{code:Yt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(fn(n,{code:Yt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>i.type._parseAsync(new cu(n,a,n.path,o)))).then(a=>Za.mergeArray(r,a));const s=[...n.data].map((a,o)=>i.type._parseSync(new cu(n,a,n.path,o)));return Za.mergeArray(r,s)}get element(){return this._def.type}min(t,n){return new Qc({...this._def,minLength:{value:t,message:Cn.toString(n)}})}max(t,n){return new Qc({...this._def,maxLength:{value:t,message:Cn.toString(n)}})}length(t,n){return new Qc({...this._def,exactLength:{value:t,message:Cn.toString(n)}})}nonempty(t){return this.min(1,t)}}Qc.create=(e,t)=>new Qc({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Jt.ZodArray,...Sr(t)});function Eg(e){if(e instanceof xs){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=eu.create(Eg(r))}return new xs({...e._def,shape:()=>t})}else return e instanceof Qc?new Qc({...e._def,type:Eg(e.element)}):e instanceof eu?eu.create(Eg(e.unwrap())):e instanceof $p?$p.create(Eg(e.unwrap())):e instanceof Fp?Fp.create(e.items.map(t=>Eg(t))):e}class xs extends Lr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Kr.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==gn.object){const c=this._getOrReturnCtx(t);return fn(c,{code:Yt.invalid_type,expected:gn.object,received:c.parsedType}),sr}const{status:r,ctx:i}=this._processInputParams(t),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Hf&&this._def.unknownKeys==="strip"))for(const c in i.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const u=s[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new cu(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Hf){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")o.length>0&&(fn(i,{code:Yt.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new cu(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,h=await u.value;c.push({key:d,value:h,alwaysSet:u.alwaysSet})}return c}).then(c=>Za.mergeObjectSync(r,c)):Za.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return Cn.errToObj,new xs({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var s,a;const i=((a=(s=this._def).errorMap)==null?void 0:a.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Cn.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new xs({...this._def,unknownKeys:"strip"})}passthrough(){return new xs({...this._def,unknownKeys:"passthrough"})}extend(t){return new xs({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new xs({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Jt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new xs({...this._def,catchall:t})}pick(t){const n={};for(const r of Kr.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new xs({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Kr.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new xs({...this._def,shape:()=>n})}deepPartial(){return Eg(this)}partial(t){const n={};for(const r of Kr.objectKeys(this.shape)){const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}return new xs({...this._def,shape:()=>n})}required(t){const n={};for(const r of Kr.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof eu;)s=s._def.innerType;n[r]=s}return new xs({...this._def,shape:()=>n})}keyof(){return AW(Kr.objectKeys(this.shape))}}xs.create=(e,t)=>new xs({shape:()=>e,unknownKeys:"strip",catchall:Hf.create(),typeName:Jt.ZodObject,...Sr(t)});xs.strictCreate=(e,t)=>new xs({shape:()=>e,unknownKeys:"strict",catchall:Hf.create(),typeName:Jt.ZodObject,...Sr(t)});xs.lazycreate=(e,t)=>new xs({shape:e,unknownKeys:"strip",catchall:Hf.create(),typeName:Jt.ZodObject,...Sr(t)});class N2 extends Lr{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new lu(o.ctx.common.issues));return fn(n,{code:Yt.invalid_union,unionErrors:a}),sr}if(n.common.async)return Promise.all(r.map(async s=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(l=>new lu(l));return fn(n,{code:Yt.invalid_union,unionErrors:o}),sr}}get options(){return this._def.options}}N2.create=(e,t)=>new N2({options:e,typeName:Jt.ZodUnion,...Sr(t)});const Ju=e=>e instanceof P2?Ju(e.schema):e instanceof Bp?Ju(e.innerType()):e instanceof O2?[e.value]:e instanceof Lp?e.options:e instanceof A3?Kr.objectValues(e.enum):e instanceof F2?Ju(e._def.innerType):e instanceof k3?[void 0]:e instanceof I2?[null]:e instanceof eu?[void 0,...Ju(e.unwrap())]:e instanceof $p?[null,...Ju(e.unwrap())]:e instanceof RW||e instanceof B2?Ju(e.unwrap()):e instanceof L2?Ju(e._def.innerType):[];class fP extends Lr{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==gn.object)return fn(n,{code:Yt.invalid_type,expected:gn.object,received:n.parsedType}),sr;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(fn(n,{code:Yt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),sr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const s of n){const a=Ju(s.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);i.set(o,s)}}return new fP({typeName:Jt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Sr(r)})}}function T3(e,t){const n=If(e),r=If(t);if(e===t)return{valid:!0,data:e};if(n===gn.object&&r===gn.object){const i=Kr.objectKeys(t),s=Kr.objectKeys(e).filter(o=>i.indexOf(o)!==-1),a={...e,...t};for(const o of s){const l=T3(e[o],t[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===gn.array&&r===gn.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const a=e[s],o=t[s],l=T3(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===gn.date&&r===gn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class M2 extends Lr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(s,a)=>{if(aB(s)||aB(a))return sr;const o=T3(s.value,a.value);return o.valid?((oB(s)||oB(a))&&n.dirty(),{status:n.value,value:o.data}):(fn(r,{code:Yt.invalid_intersection_types}),sr)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}M2.create=(e,t,n)=>new M2({left:e,right:t,typeName:Jt.ZodIntersection,...Sr(n)});class Fp extends Lr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==gn.array)return fn(r,{code:Yt.invalid_type,expected:gn.array,received:r.parsedType}),sr;if(r.data.length<this._def.items.length)return fn(r,{code:Yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),sr;!this._def.rest&&r.data.length>this._def.items.length&&(fn(r,{code:Yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new cu(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>Za.mergeArray(n,a)):Za.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new Fp({...this._def,rest:t})}}Fp.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fp({items:e,typeName:Jt.ZodTuple,rest:null,...Sr(t)})};class j2 extends Lr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==gn.object)return fn(r,{code:Yt.invalid_type,expected:gn.object,received:r.parsedType}),sr;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in r.data)i.push({key:s._parse(new cu(r,o,r.path,o)),value:a._parse(new cu(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?Za.mergeObjectAsync(n,i):Za.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Lr?new j2({keyType:t,valueType:n,typeName:Jt.ZodRecord,...Sr(r)}):new j2({keyType:od.create(),valueType:t,typeName:Jt.ZodRecord,...Sr(n)})}}class dB extends Lr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==gn.map)return fn(r,{code:Yt.invalid_type,expected:gn.map,received:r.parsedType}),sr;const i=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([o,l],c)=>({key:i._parse(new cu(r,o,r.path,[c,"key"])),value:s._parse(new cu(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return sr;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(c.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return sr;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(c.value,u.value)}return{status:n.value,value:o}}}}dB.create=(e,t,n)=>new dB({valueType:t,keyType:e,typeName:Jt.ZodMap,...Sr(n)});class ox extends Lr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==gn.set)return fn(r,{code:Yt.invalid_type,expected:gn.set,received:r.parsedType}),sr;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(fn(r,{code:Yt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(fn(r,{code:Yt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function a(l){const c=new Set;for(const u of l){if(u.status==="aborted")return sr;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>s._parse(new cu(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(t,n){return new ox({...this._def,minSize:{value:t,message:Cn.toString(n)}})}max(t,n){return new ox({...this._def,maxSize:{value:t,message:Cn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}ox.create=(e,t)=>new ox({valueType:e,minSize:null,maxSize:null,typeName:Jt.ZodSet,...Sr(t)});class P2 extends Lr{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}P2.create=(e,t)=>new P2({getter:e,typeName:Jt.ZodLazy,...Sr(t)});class O2 extends Lr{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return fn(n,{received:n.data,code:Yt.invalid_literal,expected:this._def.value}),sr}return{status:"valid",value:t.data}}get value(){return this._def.value}}O2.create=(e,t)=>new O2({value:e,typeName:Jt.ZodLiteral,...Sr(t)});function AW(e,t){return new Lp({values:e,typeName:Jt.ZodEnum,...Sr(t)})}class Lp extends Lr{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return fn(n,{expected:Kr.joinValues(r),received:n.parsedType,code:Yt.invalid_type}),sr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return fn(n,{received:n.data,code:Yt.invalid_enum_value,options:r}),sr}return Ml(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Lp.create(t,{...this._def,...n})}exclude(t,n=this._def){return Lp.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Lp.create=AW;class A3 extends Lr{_parse(t){const n=Kr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==gn.string&&r.parsedType!==gn.number){const i=Kr.objectValues(n);return fn(r,{expected:Kr.joinValues(i),received:r.parsedType,code:Yt.invalid_type}),sr}if(this._cache||(this._cache=new Set(Kr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Kr.objectValues(n);return fn(r,{received:r.data,code:Yt.invalid_enum_value,options:i}),sr}return Ml(t.data)}get enum(){return this._def.values}}A3.create=(e,t)=>new A3({values:e,typeName:Jt.ZodNativeEnum,...Sr(t)});class D2 extends Lr{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==gn.promise&&n.common.async===!1)return fn(n,{code:Yt.invalid_type,expected:gn.promise,received:n.parsedType}),sr;const r=n.parsedType===gn.promise?n.data:Promise.resolve(n.data);return Ml(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}D2.create=(e,t)=>new D2({type:e,typeName:Jt.ZodPromise,...Sr(t)});class Bp extends Lr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Jt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:a=>{fn(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(r.data,s);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return sr;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?sr:l.status==="dirty"||n.value==="dirty"?gv(l.value):l});{if(n.value==="aborted")return sr;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?sr:o.status==="dirty"||n.value==="dirty"?gv(o.value):o}}if(i.type==="refinement"){const a=o=>{const l=i.refinement(o,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?sr:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?sr:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!f0(a))return sr;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>f0(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:n.value,value:o})):sr);Kr.assertNever(i)}}Bp.create=(e,t,n)=>new Bp({schema:e,typeName:Jt.ZodEffects,effect:t,...Sr(n)});Bp.createWithPreprocess=(e,t,n)=>new Bp({schema:t,effect:{type:"preprocess",transform:e},typeName:Jt.ZodEffects,...Sr(n)});class eu extends Lr{_parse(t){return this._getType(t)===gn.undefined?Ml(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}eu.create=(e,t)=>new eu({innerType:e,typeName:Jt.ZodOptional,...Sr(t)});class $p extends Lr{_parse(t){return this._getType(t)===gn.null?Ml(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}$p.create=(e,t)=>new $p({innerType:e,typeName:Jt.ZodNullable,...Sr(t)});class F2 extends Lr{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===gn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}F2.create=(e,t)=>new F2({innerType:e,typeName:Jt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Sr(t)});class L2 extends Lr{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return A2(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new lu(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new lu(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}L2.create=(e,t)=>new L2({innerType:e,typeName:Jt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Sr(t)});class fB extends Lr{_parse(t){if(this._getType(t)!==gn.nan){const r=this._getOrReturnCtx(t);return fn(r,{code:Yt.invalid_type,expected:gn.nan,received:r.parsedType}),sr}return{status:"valid",value:t.data}}}fB.create=e=>new fB({typeName:Jt.ZodNaN,...Sr(e)});class RW extends Lr{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class hP extends Lr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?sr:s.status==="dirty"?(n.dirty(),gv(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?sr:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new hP({in:t,out:n,typeName:Jt.ZodPipeline})}}class B2 extends Lr{_parse(t){const n=this._def.innerType._parse(t),r=i=>(f0(i)&&(i.value=Object.freeze(i.value)),i);return A2(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}B2.create=(e,t)=>new B2({innerType:e,typeName:Jt.ZodReadonly,...Sr(t)});function hB(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function IW(e,t={},n){return e?ax.create().superRefine((r,i)=>{const s=e(r);if(s instanceof Promise)return s.then(a=>{if(!a){const o=hB(t,r),l=o.fatal??n??!0;i.addIssue({code:"custom",...o,fatal:l})}});if(!s){const a=hB(t,r),o=a.fatal??n??!0;i.addIssue({code:"custom",...a,fatal:o})}}):ax.create()}var Jt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Jt||(Jt={}));const $2=(e,t={message:`Input not instance of ${e.name}`})=>IW(n=>n instanceof e,t),$e=od.create,At=h0.create,kr=C3.create,cye=I2.create,ey=ax.create,_w=E3.create;Hf.create;const dn=Qc.create,Ze=xs.create,Ai=N2.create,Hk=fP.create;M2.create;Fp.create;const Wf=j2.create,uye=P2.create,Pn=O2.create,jl=Lp.create;D2.create;const Ws=eu.create;$p.create;function dye({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],i=[];for(const{role:s,content:a}of e)switch(s){case"system":{switch(n){case"system":{r.push({role:"system",content:a});break}case"developer":{r.push({role:"developer",content:a});break}case"remove":{i.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(a.length===1&&a[0].type==="text"){r.push({role:"user",content:a[0].text});break}r.push({role:"user",content:a.map((o,l)=>{var c,u,d,h;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(c=o.mimeType)!=null?c:"image/jpeg"};base64,${Vf(o.image)}`,detail:(d=(u=o.providerMetadata)==null?void 0:u.openai)==null?void 0:d.imageDetail}};case"file":{if(o.data instanceof URL)throw new Xr({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(h=o.filename)!=null?h:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${o.data}`}};default:throw new Xr({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const l=[];for(const c of a)switch(c.type){case"text":{o+=c.text;break}case"tool-call":{l.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(l.length>1)throw new Xr({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const o of a)t?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=s;throw new Error(`Unsupported role: ${o}`)}}return{messages:r,warnings:i}}function pB(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:i,top_logprobs:s})=>({token:r,logprob:i,topLogprobs:s?s.map(({token:a,logprob:o})=>({token:a,logprob:o})):[]})))!=null?n:void 0}function z2(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var pP=Ze({error:Ze({message:$e(),type:$e().nullish(),param:ey().nullish(),code:Ai([$e(),At()]).nullish()})}),uu=tm({errorSchema:pP,errorToMessage:e=>e.error.message});function U2({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function fye({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const i=(r=e.tools)!=null&&r.length?e.tools:void 0,s=[];if(i==null)return{tools:void 0,tool_choice:void 0,toolWarnings:s};const a=e.toolChoice;if(t){const c=[];for(const d of i)d.type==="provider-defined"?s.push({type:"unsupported-tool",tool:d}):c.push({name:d.name,description:d.description,parameters:d.parameters});if(a==null)return{functions:c,function_call:void 0,toolWarnings:s};switch(a.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:s};case"required":throw new Xr({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:a.toolName},toolWarnings:s}}}const o=[];for(const c of i)c.type==="provider-defined"?s.push({type:"unsupported-tool",tool:c}):o.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(a==null)return{tools:o,tool_choice:void 0,toolWarnings:s};const l=a.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:s};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:a.toolName}},toolWarnings:s};default:{const c=l;throw new Xr({functionality:`Unsupported tool choice type: ${c}`})}}}var hye=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:R3(this.modelId)}get defaultObjectGenerationMode(){return gye(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,topK:s,frequencyPenalty:a,presencePenalty:o,stopSequences:l,responseFormat:c,seed:u,providerMetadata:d}){var h,m,y,b,v,x,_,S;const C=e.type,E=[];s!=null&&E.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&E.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const A=this.settings.useLegacyFunctionCalling;if(A&&this.settings.parallelToolCalls===!0)throw new Xr({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(A&&this.supportsStructuredOutputs)throw new Xr({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:R,warnings:N}=dye({prompt:t,useLegacyFunctionCalling:A,systemMessageMode:yye(this.modelId)});E.push(...N);const M={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:i,frequency_penalty:a,presence_penalty:o,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(h=c.name)!=null?h:"response",description:c.description}}:{type:"json_object"}:void 0,stop:l,seed:u,max_completion_tokens:(m=d==null?void 0:d.openai)==null?void 0:m.maxCompletionTokens,store:(y=d==null?void 0:d.openai)==null?void 0:y.store,metadata:(b=d==null?void 0:d.openai)==null?void 0:b.metadata,prediction:(v=d==null?void 0:d.openai)==null?void 0:v.prediction,reasoning_effort:(_=(x=d==null?void 0:d.openai)==null?void 0:x.reasoningEffort)!=null?_:this.settings.reasoningEffort,messages:R};switch(R3(this.modelId)?(M.temperature!=null&&(M.temperature=void 0,E.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),M.top_p!=null&&(M.top_p=void 0,E.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),M.frequency_penalty!=null&&(M.frequency_penalty=void 0,E.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),M.presence_penalty!=null&&(M.presence_penalty=void 0,E.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),M.logit_bias!=null&&(M.logit_bias=void 0,E.push({type:"other",message:"logitBias is not supported for reasoning models"})),M.logprobs!=null&&(M.logprobs=void 0,E.push({type:"other",message:"logprobs is not supported for reasoning models"})),M.top_logprobs!=null&&(M.top_logprobs=void 0,E.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),M.max_tokens!=null&&(M.max_completion_tokens==null&&(M.max_completion_tokens=M.max_tokens),M.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&M.temperature!=null&&(M.temperature=void 0,E.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),C){case"regular":{const{tools:P,tool_choice:L,functions:O,function_call:V,toolWarnings:F}=fye({mode:e,useLegacyFunctionCalling:A,structuredOutputs:this.supportsStructuredOutputs});return{args:{...M,tools:P,tool_choice:L,functions:O,function_call:V},warnings:[...E,...F]}}case"object-json":return{args:{...M,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(S=e.name)!=null?S:"response",description:e.description}}:{type:"json_object"}},warnings:E};case"object-tool":return{args:A?{...M,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...M,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:E};default:{const P=C;throw new Error(`Unsupported type: ${P}`)}}}async doGenerate(e){var t,n,r,i,s,a,o,l;const{args:c,warnings:u}=this.getArgs(e),{responseHeaders:d,value:h,rawValue:m}=await ds({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:c,failedResponseHandler:uu,successfulResponseHandler:Eo(pye),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:y,...b}=c,v=h.choices[0],x=(t=h.usage)==null?void 0:t.completion_tokens_details,_=(n=h.usage)==null?void 0:n.prompt_tokens_details,S={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(S.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(S.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(S.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(_==null?void 0:_.cached_tokens)!=null&&(S.openai.cachedPromptTokens=_==null?void 0:_.cached_tokens),{text:(r=v.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&v.message.function_call?[{toolCallType:"function",toolCallId:fo(),toolName:v.message.function_call.name,args:v.message.function_call.arguments}]:(i=v.message.tool_calls)==null?void 0:i.map(C=>{var E;return{toolCallType:"function",toolCallId:(E=C.id)!=null?E:fo(),toolName:C.function.name,args:C.function.arguments}}),finishReason:z2(v.finish_reason),usage:{promptTokens:(a=(s=h.usage)==null?void 0:s.prompt_tokens)!=null?a:NaN,completionTokens:(l=(o=h.usage)==null?void 0:o.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:y,rawSettings:b},rawResponse:{headers:d,body:m},request:{body:JSON.stringify(c)},response:U2(h),warnings:u,logprobs:pB(v.logprobs),providerMetadata:S}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const _ of b.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:_.toolCallId,toolName:_.toolName,argsTextDelta:_.args}),x.enqueue({type:"tool-call",..._});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:s}=await ds({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:r,failedResponseHandler:uu,successfulResponseHandler:Q0(mye),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:a,...o}=t,l=[];let c="unknown",u={promptTokens:void 0,completionTokens:void 0},d,h=!0;const{useLegacyFunctionCalling:m}=this.settings,y={openai:{}};return{stream:s.pipeThrough(new TransformStream({transform(b,v){var x,_,S,C,E,A,R,N,M,P,L,O;if(!b.success){c="error",v.enqueue({type:"error",error:b.error});return}const V=b.value;if("error"in V){c="error",v.enqueue({type:"error",error:V.error});return}if(h&&(h=!1,v.enqueue({type:"response-metadata",...U2(V)})),V.usage!=null){const{prompt_tokens:$,completion_tokens:ne,prompt_tokens_details:H,completion_tokens_details:te}=V.usage;u={promptTokens:$??void 0,completionTokens:ne??void 0},(te==null?void 0:te.reasoning_tokens)!=null&&(y.openai.reasoningTokens=te==null?void 0:te.reasoning_tokens),(te==null?void 0:te.accepted_prediction_tokens)!=null&&(y.openai.acceptedPredictionTokens=te==null?void 0:te.accepted_prediction_tokens),(te==null?void 0:te.rejected_prediction_tokens)!=null&&(y.openai.rejectedPredictionTokens=te==null?void 0:te.rejected_prediction_tokens),(H==null?void 0:H.cached_tokens)!=null&&(y.openai.cachedPromptTokens=H==null?void 0:H.cached_tokens)}const F=V.choices[0];if((F==null?void 0:F.finish_reason)!=null&&(c=z2(F.finish_reason)),(F==null?void 0:F.delta)==null)return;const J=F.delta;J.content!=null&&v.enqueue({type:"text-delta",textDelta:J.content});const U=pB(F==null?void 0:F.logprobs);U!=null&&U.length&&(d===void 0&&(d=[]),d.push(...U));const G=m&&J.function_call!=null?[{type:"function",id:fo(),function:J.function_call,index:0}]:J.tool_calls;if(G!=null)for(const $ of G){const ne=$.index;if(l[ne]==null){if($.type!=="function")throw new Vg({data:$,message:"Expected 'function' type."});if($.id==null)throw new Vg({data:$,message:"Expected 'id' to be a string."});if(((x=$.function)==null?void 0:x.name)==null)throw new Vg({data:$,message:"Expected 'function.name' to be a string."});l[ne]={id:$.id,type:"function",function:{name:$.function.name,arguments:(_=$.function.arguments)!=null?_:""},hasFinished:!1};const te=l[ne];((S=te.function)==null?void 0:S.name)!=null&&((C=te.function)==null?void 0:C.arguments)!=null&&(te.function.arguments.length>0&&v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:te.id,toolName:te.function.name,argsTextDelta:te.function.arguments}),T2(te.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(E=te.id)!=null?E:fo(),toolName:te.function.name,args:te.function.arguments}),te.hasFinished=!0));continue}const H=l[ne];H.hasFinished||(((A=$.function)==null?void 0:A.arguments)!=null&&(H.function.arguments+=(N=(R=$.function)==null?void 0:R.arguments)!=null?N:""),v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:H.id,toolName:H.function.name,argsTextDelta:(M=$.function.arguments)!=null?M:""}),((P=H.function)==null?void 0:P.name)!=null&&((L=H.function)==null?void 0:L.arguments)!=null&&T2(H.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=H.id)!=null?O:fo(),toolName:H.function.name,args:H.function.arguments}),H.hasFinished=!0))}},flush(b){var v,x;b.enqueue({type:"finish",finishReason:c,logprobs:d,usage:{promptTokens:(v=u.promptTokens)!=null?v:NaN,completionTokens:(x=u.completionTokens)!=null?x:NaN},...y!=null?{providerMetadata:y}:{}})}})),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:i},request:{body:JSON.stringify(r)},warnings:n}}},NW=Ze({prompt_tokens:At().nullish(),completion_tokens:At().nullish(),prompt_tokens_details:Ze({cached_tokens:At().nullish()}).nullish(),completion_tokens_details:Ze({reasoning_tokens:At().nullish(),accepted_prediction_tokens:At().nullish(),rejected_prediction_tokens:At().nullish()}).nullish()}).nullish(),pye=Ze({id:$e().nullish(),created:At().nullish(),model:$e().nullish(),choices:dn(Ze({message:Ze({role:Pn("assistant").nullish(),content:$e().nullish(),function_call:Ze({arguments:$e(),name:$e()}).nullish(),tool_calls:dn(Ze({id:$e().nullish(),type:Pn("function"),function:Ze({name:$e(),arguments:$e()})})).nullish()}),index:At(),logprobs:Ze({content:dn(Ze({token:$e(),logprob:At(),top_logprobs:dn(Ze({token:$e(),logprob:At()}))})).nullable()}).nullish(),finish_reason:$e().nullish()})),usage:NW}),mye=Ai([Ze({id:$e().nullish(),created:At().nullish(),model:$e().nullish(),choices:dn(Ze({delta:Ze({role:jl(["assistant"]).nullish(),content:$e().nullish(),function_call:Ze({name:$e().optional(),arguments:$e().optional()}).nullish(),tool_calls:dn(Ze({index:At(),id:$e().nullish(),type:Pn("function").nullish(),function:Ze({name:$e().nullish(),arguments:$e().nullish()})})).nullish()}).nullish(),logprobs:Ze({content:dn(Ze({token:$e(),logprob:At(),top_logprobs:dn(Ze({token:$e(),logprob:At()}))})).nullable()}).nullish(),finish_reason:$e().nullish(),index:At()})),usage:NW}),pP]);function R3(e){return e.startsWith("o")}function gye(e){return e.startsWith("gpt-4o-audio-preview")}function yye(e){var t,n;return R3(e)?(n=(t=bye[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var bye={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function vye({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let i="";e[0].role==="system"&&(i+=`${e[0].content}

`,e=e.slice(1));for(const{role:s,content:a}of e)switch(s){case"system":throw new qc({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Xr({functionality:"images"})}}).join("");i+=`${n}:
${o}

`;break}case"assistant":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Xr({functionality:"tool-call messages"})}}).join("");i+=`${r}:
${o}

`;break}case"tool":throw new Xr({functionality:"tool messages"});default:{const o=s;throw new Error(`Unsupported role: ${o}`)}}return i+=`${r}:
`,{prompt:i,stopSequences:[`
${n}:`]}}function mB(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,i])=>({token:r,logprob:i})):[]}))}var xye=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:i,topP:s,topK:a,frequencyPenalty:o,presencePenalty:l,stopSequences:c,responseFormat:u,seed:d}){var h;const m=e.type,y=[];a!=null&&y.push({type:"unsupported-setting",setting:"topK"}),u!=null&&u.type!=="text"&&y.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:v}=vye({prompt:n,inputFormat:t}),x=[...v??[],...c??[]],_={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:i,top_p:s,frequency_penalty:o,presence_penalty:l,seed:d,prompt:b,stop:x.length>0?x:void 0};switch(m){case"regular":{if((h=e.tools)!=null&&h.length)throw new Xr({functionality:"tools"});if(e.toolChoice)throw new Xr({functionality:"toolChoice"});return{args:_,warnings:y}}case"object-json":throw new Xr({functionality:"object-json mode"});case"object-tool":throw new Xr({functionality:"object-tool mode"});default:{const S=m;throw new Error(`Unsupported type: ${S}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:i,rawValue:s}=await ds({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:t,failedResponseHandler:uu,successfulResponseHandler:Eo(wye),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...o}=t,l=i.choices[0];return{text:l.text,usage:{promptTokens:i.usage.prompt_tokens,completionTokens:i.usage.completion_tokens},finishReason:z2(l.finish_reason),logprobs:mB(l.logprobs),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:r,body:s},response:U2(i),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:s}=await ds({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:r,failedResponseHandler:uu,successfulResponseHandler:Q0(_ye),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...o}=t;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u,d=!0;return{stream:s.pipeThrough(new TransformStream({transform(h,m){if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const y=h.value;if("error"in y){l="error",m.enqueue({type:"error",error:y.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...U2(y)})),y.usage!=null&&(c={promptTokens:y.usage.prompt_tokens,completionTokens:y.usage.completion_tokens});const b=y.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=z2(b.finish_reason)),(b==null?void 0:b.text)!=null&&m.enqueue({type:"text-delta",textDelta:b.text});const v=mB(b==null?void 0:b.logprobs);v!=null&&v.length&&(u===void 0&&(u=[]),u.push(...v))},flush(h){h.enqueue({type:"finish",finishReason:l,logprobs:u,usage:c})}})),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:i},warnings:n,request:{body:JSON.stringify(r)}}}},wye=Ze({id:$e().nullish(),created:At().nullish(),model:$e().nullish(),choices:dn(Ze({text:$e(),finish_reason:$e(),logprobs:Ze({tokens:dn($e()),token_logprobs:dn(At()),top_logprobs:dn(Wf($e(),At())).nullable()}).nullish()})),usage:Ze({prompt_tokens:At(),completion_tokens:At()})}),_ye=Ai([Ze({id:$e().nullish(),created:At().nullish(),model:$e().nullish(),choices:dn(Ze({text:$e(),finish_reason:$e().nullish(),index:At(),logprobs:Ze({tokens:dn($e()),token_logprobs:dn(At()),top_logprobs:dn(Wf($e(),At())).nullable()}).nullish()})),usage:Ze({prompt_tokens:At(),completion_tokens:At()}).nullish()}),pP]),Sye=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new $k({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:i}=await ds({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:us(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:uu,successfulResponseHandler:Eo(Cye),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(s=>s.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Cye=Ze({data:dn(Ze({embedding:dn(At())})),usage:Ze({prompt_tokens:At()}).nullish()}),kye={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10},Eye=new Set(["gpt-image-1"]),Tye=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:kye[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:i,providerOptions:s,headers:a,abortSignal:o}){var l,c,u,d;const h=[];r!=null&&h.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),i!=null&&h.push({type:"unsupported-setting",setting:"seed"});const m=(u=(c=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:c.call(l))!=null?u:new Date,{value:y,responseHeaders:b}=await ds({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:us(this.config.headers(),a),body:{model:this.modelId,prompt:e,n:t,size:n,...(d=s.openai)!=null?d:{},...Eye.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:uu,successfulResponseHandler:Eo(Aye),abortSignal:o,fetch:this.config.fetch});return{images:y.data.map(v=>v.b64_json),warnings:h,response:{timestamp:m,modelId:this.modelId,headers:b}}}},Aye=Ze({data:dn(Ze({b64_json:$e()}))}),Rye=Ze({include:dn($e()).nullish(),language:$e().nullish(),prompt:$e().nullish(),temperature:At().min(0).max(1).nullish().default(0),timestampGranularities:dn(jl(["word","segment"])).nullish().default(["segment"])}),gB={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},Iye=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({audio:e,mediaType:t,providerOptions:n}){var r,i,s,a,o;const l=[],c=Uk({provider:"openai",providerOptions:n,schema:Rye}),u=new FormData,d=e instanceof Uint8Array?new Blob([e]):new Blob([qk(e)]);if(u.append("model",this.modelId),u.append("file",new File([d],"audio",{type:t})),c){const h={include:(r=c.include)!=null?r:void 0,language:(i=c.language)!=null?i:void 0,prompt:(s=c.prompt)!=null?s:void 0,temperature:(a=c.temperature)!=null?a:void 0,timestamp_granularities:(o=c.timestampGranularities)!=null?o:void 0};for(const m in h){const y=h[m];y!==void 0&&u.append(m,String(y))}}return{formData:u,warnings:l}}async doGenerate(e){var t,n,r,i,s,a;const o=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{formData:l,warnings:c}=this.getArgs(e),{value:u,responseHeaders:d,rawValue:h}=await P0e({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),formData:l,failedResponseHandler:uu,successfulResponseHandler:Eo(Nye),abortSignal:e.abortSignal,fetch:this.config.fetch}),m=u.language!=null&&u.language in gB?gB[u.language]:void 0;return{text:u.text,segments:(s=(i=u.words)==null?void 0:i.map(y=>({text:y.word,startSecond:y.start,endSecond:y.end})))!=null?s:[],language:m,durationInSeconds:(a=u.duration)!=null?a:void 0,warnings:c,response:{timestamp:o,modelId:this.modelId,headers:d,body:h}}}},Nye=Ze({text:$e(),language:$e().nullish(),duration:At().nullish(),words:dn(Ze({word:$e(),start:At(),end:At()})).nullish()});function Mye({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:i,content:s}of e)switch(i){case"system":{switch(t){case"system":{n.push({role:"system",content:s});break}case"developer":{n.push({role:"developer",content:s});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const a=t;throw new Error(`Unsupported system message mode: ${a}`)}}break}case"user":{n.push({role:"user",content:s.map((a,o)=>{var l,c,u,d;switch(a.type){case"text":return{type:"input_text",text:a.text};case"image":return{type:"input_image",image_url:a.image instanceof URL?a.image.toString():`data:${(l=a.mimeType)!=null?l:"image/jpeg"};base64,${Vf(a.image)}`,detail:(u=(c=a.providerMetadata)==null?void 0:c.openai)==null?void 0:u.imageDetail};case"file":{if(a.data instanceof URL)throw new Xr({functionality:"File URLs in user messages"});switch(a.mimeType){case"application/pdf":return{type:"input_file",filename:(d=a.filename)!=null?d:`part-${o}.pdf`,file_data:`data:application/pdf;base64,${a.data}`};default:throw new Xr({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const a of s)switch(a.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:a.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:a.toolCallId,name:a.toolName,arguments:JSON.stringify(a.args)});break}}break}case"tool":{for(const a of s)n.push({type:"function_call_output",call_id:a.toolCallId,output:JSON.stringify(a.result)});break}default:{const a=i;throw new Error(`Unsupported role: ${a}`)}}return{messages:n,warnings:r}}function yB({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function jye({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,i=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice,a=[];for(const l of r)switch(l.type){case"function":a.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":a.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:i.push({type:"unsupported-tool",tool:l});break}break;default:i.push({type:"unsupported-tool",tool:l});break}if(s==null)return{tools:a,tool_choice:void 0,toolWarnings:i};const o=s.type;switch(o){case"auto":case"none":case"required":return{tools:a,tool_choice:o,toolWarnings:i};case"tool":return s.toolName==="web_search_preview"?{tools:a,tool_choice:{type:"web_search_preview"},toolWarnings:i}:{tools:a,tool_choice:{type:"function",name:s.toolName},toolWarnings:i};default:{const l=o;throw new Xr({functionality:`Unsupported tool choice type: ${l}`})}}}var Pye=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsStructuredOutputs=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:i,topK:s,presencePenalty:a,frequencyPenalty:o,seed:l,prompt:c,providerMetadata:u,responseFormat:d}){var h,m,y;const b=[],v=Jye(this.modelId),x=e.type;s!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),a!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),o!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:_,warnings:S}=Mye({prompt:c,systemMessageMode:v.systemMessageMode});b.push(...S);const C=Uk({provider:"openai",providerOptions:u,schema:Qye}),E=(h=C==null?void 0:C.strictSchemas)!=null?h:!0,A={model:this.modelId,input:_,temperature:n,top_p:i,max_output_tokens:t,...(d==null?void 0:d.type)==="json"&&{text:{format:d.schema!=null?{type:"json_schema",strict:E,name:(m=d.name)!=null?m:"response",description:d.description,schema:d.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,...v.isReasoningModel&&((C==null?void 0:C.reasoningEffort)!=null||(C==null?void 0:C.reasoningSummary)!=null)&&{reasoning:{...(C==null?void 0:C.reasoningEffort)!=null&&{effort:C.reasoningEffort},...(C==null?void 0:C.reasoningSummary)!=null&&{summary:C.reasoningSummary}}},...v.requiredAutoTruncation&&{truncation:"auto"}};switch(v.isReasoningModel&&(A.temperature!=null&&(A.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),A.top_p!=null&&(A.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:R,tool_choice:N,toolWarnings:M}=jye({mode:e,strict:E});return{args:{...A,tools:R,tool_choice:N},warnings:[...b,...M]}}case"object-json":return{args:{...A,text:{format:e.schema!=null?{type:"json_schema",strict:E,name:(y=e.name)!=null?y:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...A,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:E}]},warnings:b};default:{const R=x;throw new Error(`Unsupported type: ${R}`)}}}async doGenerate(e){var t,n,r,i,s,a,o;const{args:l,warnings:c}=this.getArgs(e),{responseHeaders:u,value:d,rawValue:h}=await ds({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:l,failedResponseHandler:uu,successfulResponseHandler:Eo(Ze({id:$e(),created_at:At(),model:$e(),output:dn(Hk("type",[Ze({type:Pn("message"),role:Pn("assistant"),content:dn(Ze({type:Pn("output_text"),text:$e(),annotations:dn(Ze({type:Pn("url_citation"),start_index:At(),end_index:At(),url:$e(),title:$e()}))}))}),Ze({type:Pn("function_call"),call_id:$e(),name:$e(),arguments:$e()}),Ze({type:Pn("web_search_call")}),Ze({type:Pn("computer_call")}),Ze({type:Pn("reasoning"),summary:dn(Ze({type:Pn("summary_text"),text:$e()}))})])),incomplete_details:Ze({reason:$e()}).nullable(),usage:MW})),abortSignal:e.abortSignal,fetch:this.config.fetch}),m=d.output.filter(v=>v.type==="message").flatMap(v=>v.content).filter(v=>v.type==="output_text"),y=d.output.filter(v=>v.type==="function_call").map(v=>({toolCallType:"function",toolCallId:v.call_id,toolName:v.name,args:v.arguments})),b=(n=(t=d.output.find(v=>v.type==="reasoning"))==null?void 0:t.summary)!=null?n:null;return{text:m.map(v=>v.text).join(`
`),sources:m.flatMap(v=>v.annotations.map(x=>{var _,S,C;return{sourceType:"url",id:(C=(S=(_=this.config).generateId)==null?void 0:S.call(_))!=null?C:fo(),url:x.url,title:x.title}})),finishReason:yB({finishReason:(r=d.incomplete_details)==null?void 0:r.reason,hasToolCalls:y.length>0}),toolCalls:y.length>0?y:void 0,reasoning:b?b.map(v=>({type:"text",text:v.text})):void 0,usage:{promptTokens:d.usage.input_tokens,completionTokens:d.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:u,body:h},request:{body:JSON.stringify(l)},response:{id:d.id,timestamp:new Date(d.created_at*1e3),modelId:d.model},providerMetadata:{openai:{responseId:d.id,cachedPromptTokens:(s=(i=d.usage.input_tokens_details)==null?void 0:i.cached_tokens)!=null?s:null,reasoningTokens:(o=(a=d.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?o:null}},warnings:c}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:i}=await ds({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:uu,successfulResponseHandler:Q0(qye),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=this;let a="unknown",o=NaN,l=NaN,c=null,u=null,d=null;const h={};let m=!1;return{stream:i.pipeThrough(new TransformStream({transform(y,b){var v,x,_,S,C,E,A,R;if(!y.success){a="error",b.enqueue({type:"error",error:y.error});return}const N=y.value;if(Yye(N))N.item.type==="function_call"&&(h[N.output_index]={toolName:N.item.name,toolCallId:N.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,argsTextDelta:N.item.arguments}));else if(Kye(N)){const M=h[N.output_index];M!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:M.toolCallId,toolName:M.toolName,argsTextDelta:N.delta})}else Gye(N)?(d=N.response.id,b.enqueue({type:"response-metadata",id:N.response.id,timestamp:new Date(N.response.created_at*1e3),modelId:N.response.model})):Vye(N)?b.enqueue({type:"text-delta",textDelta:N.delta}):Xye(N)?b.enqueue({type:"reasoning",textDelta:N.delta}):Hye(N)&&N.item.type==="function_call"?(h[N.output_index]=void 0,m=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,args:N.item.arguments})):Wye(N)?(a=yB({finishReason:(v=N.response.incomplete_details)==null?void 0:v.reason,hasToolCalls:m}),o=N.response.usage.input_tokens,l=N.response.usage.output_tokens,c=(_=(x=N.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?_:c,u=(C=(S=N.response.usage.output_tokens_details)==null?void 0:S.reasoning_tokens)!=null?C:u):Zye(N)&&b.enqueue({type:"source",source:{sourceType:"url",id:(R=(A=(E=s.config).generateId)==null?void 0:A.call(E))!=null?R:fo(),url:N.annotation.url,title:N.annotation.title}})},flush(y){y.enqueue({type:"finish",finishReason:a,usage:{promptTokens:o,completionTokens:l},...(c!=null||u!=null)&&{providerMetadata:{openai:{responseId:d,cachedPromptTokens:c,reasoningTokens:u}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},MW=Ze({input_tokens:At(),input_tokens_details:Ze({cached_tokens:At().nullish()}).nullish(),output_tokens:At(),output_tokens_details:Ze({reasoning_tokens:At().nullish()}).nullish()}),Oye=Ze({type:Pn("response.output_text.delta"),delta:$e()}),Dye=Ze({type:jl(["response.completed","response.incomplete"]),response:Ze({incomplete_details:Ze({reason:$e()}).nullish(),usage:MW})}),Fye=Ze({type:Pn("response.created"),response:Ze({id:$e(),created_at:At(),model:$e()})}),Lye=Ze({type:Pn("response.output_item.done"),output_index:At(),item:Hk("type",[Ze({type:Pn("message")}),Ze({type:Pn("function_call"),id:$e(),call_id:$e(),name:$e(),arguments:$e(),status:Pn("completed")})])}),Bye=Ze({type:Pn("response.function_call_arguments.delta"),item_id:$e(),output_index:At(),delta:$e()}),$ye=Ze({type:Pn("response.output_item.added"),output_index:At(),item:Hk("type",[Ze({type:Pn("message")}),Ze({type:Pn("function_call"),id:$e(),call_id:$e(),name:$e(),arguments:$e()})])}),zye=Ze({type:Pn("response.output_text.annotation.added"),annotation:Ze({type:Pn("url_citation"),url:$e(),title:$e()})}),Uye=Ze({type:Pn("response.reasoning_summary_text.delta"),item_id:$e(),output_index:At(),summary_index:At(),delta:$e()}),qye=Ai([Oye,Dye,Fye,Lye,Bye,$ye,zye,Uye,Ze({type:$e()}).passthrough()]);function Vye(e){return e.type==="response.output_text.delta"}function Hye(e){return e.type==="response.output_item.done"}function Wye(e){return e.type==="response.completed"||e.type==="response.incomplete"}function Gye(e){return e.type==="response.created"}function Kye(e){return e.type==="response.function_call_arguments.delta"}function Yye(e){return e.type==="response.output_item.added"}function Zye(e){return e.type==="response.output_text.annotation.added"}function Xye(e){return e.type==="response.reasoning_summary_text.delta"}function Jye(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var Qye=Ze({metadata:ey().nullish(),parallelToolCalls:kr().nullish(),previousResponseId:$e().nullish(),store:kr().nullish(),user:$e().nullish(),reasoningEffort:$e().nullish(),strictSchemas:kr().nullish(),instructions:$e().nullish(),reasoningSummary:$e().nullish()}),ebe=Ze({});function tbe({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:ebe}}var nbe={webSearchPreview:tbe},rbe=Ze({instructions:$e().nullish(),speed:At().min(.25).max(4).default(1).nullish()}),ibe=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({text:e,voice:t="alloy",outputFormat:n="mp3",speed:r,instructions:i,providerOptions:s}){const a=[],o=Uk({provider:"openai",providerOptions:s,schema:rbe}),l={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:r,instructions:i};if(n&&(["mp3","opus","aac","flac","wav","pcm"].includes(n)?l.response_format=n:a.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${n}. Using mp3 instead.`})),o){const c={};for(const u in c){const d=c[u];d!==void 0&&(l[u]=d)}}return{requestBody:l,warnings:a}}async doGenerate(e){var t,n,r;const i=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{requestBody:s,warnings:a}=this.getArgs(e),{value:o,responseHeaders:l,rawValue:c}=await ds({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:s,failedResponseHandler:uu,successfulResponseHandler:O0e(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:o,warnings:a,request:{body:JSON.stringify(s)},response:{timestamp:i,modelId:this.modelId,headers:l,body:c}}}};function jW(e={}){var t,n,r;const i=(t=Vk(e.baseURL))!=null?t:"https://api.openai.com/v1",s=(n=e.compatibility)!=null?n:"compatible",a=(r=e.name)!=null?r:"openai",o=()=>({Authorization:`Bearer ${CW({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(x,_={})=>new hye(x,_,{provider:`${a}.chat`,url:({path:S})=>`${i}${S}`,headers:o,compatibility:s,fetch:e.fetch}),c=(x,_={})=>new xye(x,_,{provider:`${a}.completion`,url:({path:S})=>`${i}${S}`,headers:o,compatibility:s,fetch:e.fetch}),u=(x,_={})=>new Sye(x,_,{provider:`${a}.embedding`,url:({path:S})=>`${i}${S}`,headers:o,fetch:e.fetch}),d=(x,_={})=>new Tye(x,_,{provider:`${a}.image`,url:({path:S})=>`${i}${S}`,headers:o,fetch:e.fetch}),h=x=>new Iye(x,{provider:`${a}.transcription`,url:({path:_})=>`${i}${_}`,headers:o,fetch:e.fetch}),m=x=>new ibe(x,{provider:`${a}.speech`,url:({path:_})=>`${i}${_}`,headers:o,fetch:e.fetch}),y=(x,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return x==="gpt-3.5-turbo-instruct"?c(x,_):l(x,_)},b=x=>new Pye(x,{provider:`${a}.responses`,url:({path:_})=>`${i}${_}`,headers:o,fetch:e.fetch}),v=function(x,_){return y(x,_)};return v.languageModel=y,v.chat=l,v.completion=c,v.responses=b,v.embedding=u,v.textEmbedding=u,v.textEmbeddingModel=u,v.image=d,v.imageModel=d,v.transcription=h,v.transcriptionModel=h,v.speech=m,v.speechModel=m,v.tools=nbe,v}jW({compatibility:"strict"});function vl(e){if(sbe(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:i,items:s,allOf:a,anyOf:o,oneOf:l,format:c,const:u,minLength:d,enum:h}=e,m={};if(n&&(m.description=n),r&&(m.required=r),c&&(m.format=c),u!==void 0&&(m.enum=[u]),t&&(Array.isArray(t)?t.includes("null")?(m.type=t.filter(y=>y!=="null")[0],m.nullable=!0):m.type=t:t==="null"?m.type="null":m.type=t),h!==void 0&&(m.enum=h),i!=null&&(m.properties=Object.entries(i).reduce((y,[b,v])=>(y[b]=vl(v),y),{})),s&&(m.items=Array.isArray(s)?s.map(vl):vl(s)),a&&(m.allOf=a.map(vl)),o)if(o.some(y=>typeof y=="object"&&(y==null?void 0:y.type)==="null")){const y=o.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(y.length===1){const b=vl(y[0]);typeof b=="object"&&(m.nullable=!0,Object.assign(m,b))}else m.anyOf=y.map(vl),m.nullable=!0}else m.anyOf=o.map(vl);return l&&(m.oneOf=l.map(vl)),d!==void 0&&(m.minLength=d),m}function sbe(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function abe(e){var t,n;const r=[],i=[];let s=!0;for(const{role:a,content:o}of e)switch(a){case"system":{if(!s)throw new Xr({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:o});break}case"user":{s=!1;const l=[];for(const c of o)switch(c.type){case"text":{l.push({text:c.text});break}case"image":{l.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:Vf(c.image)}});break}case"file":{l.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}i.push({role:"user",parts:l});break}case"assistant":{s=!1,i.push({role:"model",parts:o.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new Xr({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new Xr({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{s=!1,i.push({role:"user",parts:o.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:i}}function bB(e){return e.includes("/")?e:`models/${e}`}var obe=Ze({error:Ze({code:At().nullable(),message:$e(),status:$e()})}),I3=tm({errorSchema:obe,errorToMessage:e=>e.error.message});function lbe(e,t,n,r){var i,s;const a=(i=e.tools)!=null&&i.length?e.tools:void 0,o=[],l=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:o};if(a==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const u=[];for(const m of a)m.type==="provider-defined"?o.push({type:"unsupported-tool",tool:m}):u.push({name:m.name,description:(s=m.description)!=null?s:"",parameters:vl(m.parameters)});const d=e.toolChoice;if(d==null)return{tools:{functionDeclarations:u},toolConfig:void 0,toolWarnings:o};const h=d.type;switch(h){case"auto":return{tools:{functionDeclarations:u},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:u},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:u},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:u},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[d.toolName]}},toolWarnings:o};default:{const m=h;throw new Xr({functionality:`Unsupported tool choice type: ${m}`})}}}function vB({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var cbe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,topK:s,frequencyPenalty:a,presencePenalty:o,stopSequences:l,responseFormat:c,seed:u,providerMetadata:d}){var h,m,y;const b=e.type,v=[],x=Uk({provider:"google",providerOptions:d,schema:hbe});((h=x==null?void 0:x.thinkingConfig)==null?void 0:h.includeThoughts)===!0&&!this.config.provider.startsWith("google.vertex.")&&v.push({type:"other",message:`The 'includeThoughts' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const _={maxOutputTokens:n,temperature:r,topK:s,topP:i,frequencyPenalty:a,presencePenalty:o,stopSequences:l,seed:u,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?vl(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:x==null?void 0:x.responseModalities,thinkingConfig:x==null?void 0:x.thinkingConfig},{contents:S,systemInstruction:C}=abe(t);switch(b){case"regular":{const{tools:E,toolConfig:A,toolWarnings:R}=lbe(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:_,contents:S,systemInstruction:C,safetySettings:this.settings.safetySettings,tools:E,toolConfig:A,cachedContent:this.settings.cachedContent},warnings:[...v,...R]}}case"object-json":return{args:{generationConfig:{..._,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?vl(e.schema):void 0},contents:S,systemInstruction:C,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:v};case"object-tool":return{args:{generationConfig:_,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(y=e.tool.description)!=null?y:"",parameters:vl(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:v};default:{const E=b;throw new Error(`Unsupported type: ${E}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,i,s;const{args:a,warnings:o}=await this.getArgs(e),l=JSON.stringify(a),c=us(await _3(this.config.headers),e.headers),{responseHeaders:u,value:d,rawValue:h}=await ds({url:`${this.config.baseURL}/${bB(this.modelId)}:generateContent`,headers:c,body:a,failedResponseHandler:I3,successfulResponseHandler:Eo(dbe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:m,...y}=a,b=d.candidates[0],v=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,x=xB({parts:v,generateId:this.config.generateId}),_=d.usageMetadata;return{text:wB(v),reasoning:_B(v),files:(t=SB(v))==null?void 0:t.map(S=>({data:S.inlineData.data,mimeType:S.inlineData.mimeType})),toolCalls:x,finishReason:vB({finishReason:b.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=_==null?void 0:_.promptTokenCount)!=null?n:NaN,completionTokens:(r=_==null?void 0:_.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:m,rawSettings:y},rawResponse:{headers:u,body:h},warnings:o,providerMetadata:{google:{groundingMetadata:(i=b.groundingMetadata)!=null?i:null,safetyRatings:(s=b.safetyRatings)!=null?s:null}},sources:CB({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),i=us(await _3(this.config.headers),e.headers),{responseHeaders:s,value:a}=await ds({url:`${this.config.baseURL}/${bB(this.modelId)}:streamGenerateContent?alt=sse`,headers:i,body:t,failedResponseHandler:I3,successfulResponseHandler:Q0(fbe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:o,...l}=t;let c="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d;const h=this.config.generateId;let m=!1;return{stream:a.pipeThrough(new TransformStream({transform(y,b){var v,x,_,S,C,E;if(!y.success){b.enqueue({type:"error",error:y.error});return}const A=y.value,R=A.usageMetadata;R!=null&&(u={promptTokens:(v=R.promptTokenCount)!=null?v:NaN,completionTokens:(x=R.candidatesTokenCount)!=null?x:NaN});const N=(_=A.candidates)==null?void 0:_[0];if(N==null)return;const M=N.content;if(M!=null){const P=wB(M.parts);P!=null&&b.enqueue({type:"text-delta",textDelta:P});const L=_B(M.parts);if(L!=null)for(const F of L)b.enqueue({type:"reasoning",textDelta:F.text});const O=SB(M.parts);if(O!=null)for(const F of O)b.enqueue({type:"file",mimeType:F.inlineData.mimeType,data:F.inlineData.data});const V=xB({parts:M.parts,generateId:h});if(V!=null)for(const F of V)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:F.toolCallId,toolName:F.toolName,argsTextDelta:F.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:F.toolCallId,toolName:F.toolName,args:F.args}),m=!0}if(N.finishReason!=null){c=vB({finishReason:N.finishReason,hasToolCalls:m});const P=(S=CB({groundingMetadata:N.groundingMetadata,generateId:h}))!=null?S:[];for(const L of P)b.enqueue({type:"source",source:L});d={google:{groundingMetadata:(C=N.groundingMetadata)!=null?C:null,safetyRatings:(E=N.safetyRatings)!=null?E:null}}}},flush(y){y.enqueue({type:"finish",finishReason:c,usage:u,providerMetadata:d})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:s},warnings:n,request:{body:r}}}};function xB({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function wB(e){const t=e==null?void 0:e.filter(n=>"text"in n&&n.thought!==!0);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function _B(e){const t=e==null?void 0:e.filter(n=>"text"in n&&n.thought===!0&&n.text!=null);return t==null||t.length===0?void 0:t.map(n=>({type:"text",text:n.text}))}function SB(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function CB({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var PW=Ze({parts:dn(Ai([Ze({functionCall:Ze({name:$e(),args:_w()})}),Ze({inlineData:Ze({mimeType:$e(),data:$e()})}),Ze({text:$e().nullish(),thought:kr().nullish()})])).nullish()}),ube=Ze({web:Ze({uri:$e(),title:$e()}).nullish(),retrievedContext:Ze({uri:$e(),title:$e()}).nullish()}),OW=Ze({webSearchQueries:dn($e()).nullish(),retrievalQueries:dn($e()).nullish(),searchEntryPoint:Ze({renderedContent:$e()}).nullish(),groundingChunks:dn(ube).nullish(),groundingSupports:dn(Ze({segment:Ze({startIndex:At().nullish(),endIndex:At().nullish(),text:$e().nullish()}),segment_text:$e().nullish(),groundingChunkIndices:dn(At()).nullish(),supportChunkIndices:dn(At()).nullish(),confidenceScores:dn(At()).nullish(),confidenceScore:dn(At()).nullish()})).nullish(),retrievalMetadata:Ai([Ze({webDynamicRetrievalScore:At()}),Ze({})]).nullish()}),DW=Ze({category:$e().nullish(),probability:$e().nullish(),probabilityScore:At().nullish(),severity:$e().nullish(),severityScore:At().nullish(),blocked:kr().nullish()}),dbe=Ze({candidates:dn(Ze({content:PW.nullish().or(Ze({}).strict()),finishReason:$e().nullish(),safetyRatings:dn(DW).nullish(),groundingMetadata:OW.nullish()})),usageMetadata:Ze({promptTokenCount:At().nullish(),candidatesTokenCount:At().nullish(),totalTokenCount:At().nullish()}).nullish()}),fbe=Ze({candidates:dn(Ze({content:PW.nullish(),finishReason:$e().nullish(),safetyRatings:dn(DW).nullish(),groundingMetadata:OW.nullish()})).nullish(),usageMetadata:Ze({promptTokenCount:At().nullish(),candidatesTokenCount:At().nullish(),totalTokenCount:At().nullish()}).nullish()}),hbe=Ze({responseModalities:dn(jl(["TEXT","IMAGE"])).nullish(),thinkingConfig:Ze({thinkingBudget:At().nullish(),includeThoughts:kr().nullish()}).nullish()}),pbe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new $k({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=us(await _3(this.config.headers),t),{responseHeaders:i,value:s}=await ds({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(a=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:a}]},outputDimensionality:this.settings.outputDimensionality,taskType:this.settings.taskType}))},failedResponseHandler:I3,successfulResponseHandler:Eo(mbe),abortSignal:n,fetch:this.config.fetch});return{embeddings:s.embeddings.map(a=>a.values),usage:void 0,rawResponse:{headers:i}}}},mbe=Ze({embeddings:dn(Ze({values:dn(At())}))});function gbe(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function FW(e={}){var t;const n=(t=Vk(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":CW({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),i=(o,l={})=>{var c;return new cbe(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:fo,isSupportedUrl:gbe,fetch:e.fetch})},s=(o,l={})=>new pbe(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),a=function(o,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(o,l)};return a.languageModel=i,a.chat=i,a.generativeAI=i,a.embedding=s,a.textEmbedding=s,a.textEmbeddingModel=s,a}FW();var LW="vercel.ai.error",ybe=Symbol.for(LW),BW,bbe=class $W extends Error{constructor({name:t,message:n,cause:r}){super(n),this[BW]=!0,this.name=t,this.cause=r}static isInstance(t){return $W.hasMarker(t,LW)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};BW=ybe;var Js=bbe,zW="AI_APICallError",UW=`vercel.ai.error.${zW}`,vbe=Symbol.for(UW),qW,sd=class extends Js{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:i,responseBody:s,cause:a,isRetryable:o=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:zW,message:e,cause:a}),this[qW]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=i,this.responseBody=s,this.isRetryable=o,this.data=l}static isInstance(e){return Js.hasMarker(e,UW)}};qW=vbe;var VW="AI_EmptyResponseBodyError",HW=`vercel.ai.error.${VW}`,xbe=Symbol.for(HW),WW,wbe=class extends Js{constructor({message:e="Empty response body"}={}){super({name:VW,message:e}),this[WW]=!0}static isInstance(e){return Js.hasMarker(e,HW)}};WW=xbe;function GW(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var KW="AI_InvalidArgumentError",YW=`vercel.ai.error.${KW}`,_be=Symbol.for(YW),ZW,Sbe=class extends Js{constructor({message:t,cause:n,argument:r}){super({name:KW,message:t,cause:n}),this[ZW]=!0,this.argument=r}static isInstance(t){return Js.hasMarker(t,YW)}};ZW=_be;var XW="AI_InvalidPromptError",JW=`vercel.ai.error.${XW}`,Cbe=Symbol.for(JW),QW,kbe=class extends Js{constructor({prompt:e,message:t,cause:n}){super({name:XW,message:`Invalid prompt: ${t}`,cause:n}),this[QW]=!0,this.prompt=e}static isInstance(e){return Js.hasMarker(e,JW)}};QW=Cbe;var eG="AI_InvalidResponseDataError",tG=`vercel.ai.error.${eG}`,Ebe=Symbol.for(tG),nG,BR=class extends Js{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:eG,message:t}),this[nG]=!0,this.data=e}static isInstance(e){return Js.hasMarker(e,tG)}};nG=Ebe;var rG="AI_JSONParseError",iG=`vercel.ai.error.${rG}`,Tbe=Symbol.for(iG),sG,q2=class extends Js{constructor({text:e,cause:t}){super({name:rG,message:`JSON parsing failed: Text: ${e}.
Error message: ${GW(t)}`,cause:t}),this[sG]=!0,this.text=e}static isInstance(e){return Js.hasMarker(e,iG)}};sG=Tbe;var aG="AI_LoadAPIKeyError",oG=`vercel.ai.error.${aG}`,Abe=Symbol.for(oG),lG,U_=class extends Js{constructor({message:e}){super({name:aG,message:e}),this[lG]=!0}static isInstance(e){return Js.hasMarker(e,oG)}};lG=Abe;var cG="AI_TypeValidationError",uG=`vercel.ai.error.${cG}`,Rbe=Symbol.for(uG),dG,Ibe=class N3 extends Js{constructor({value:t,cause:n}){super({name:cG,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${GW(n)}`,cause:n}),this[dG]=!0,this.value=t}static isInstance(t){return Js.hasMarker(t,uG)}static wrap({value:t,cause:n}){return N3.isInstance(n)&&n.value===t?n:new N3({value:t,cause:n})}};dG=Rbe;var V2=Ibe,fG="AI_UnsupportedFunctionalityError",hG=`vercel.ai.error.${fG}`,Nbe=Symbol.for(hG),pG,_l=class extends Js{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:fG,message:t}),this[pG]=!0,this.functionality=e}static isInstance(e){return Js.hasMarker(e,hG)}};pG=Nbe;let Mbe=(e,t=21)=>(n=t)=>{let r="",i=n|0;for(;i--;)r+=e[Math.random()*e.length|0];return r},kB=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function $R(e){}function jbe(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=$R,onError:n=$R,onRetry:r=$R,onComment:i}=e;let s="",a=!0,o,l="",c="";function u(b){const v=a?b.replace(/^\xEF\xBB\xBF/,""):b,[x,_]=Pbe(`${s}${v}`);for(const S of x)d(S);s=_,a=!1}function d(b){if(b===""){m();return}if(b.startsWith(":")){i&&i(b.slice(b.startsWith(": ")?2:1));return}const v=b.indexOf(":");if(v!==-1){const x=b.slice(0,v),_=b[v+1]===" "?2:1,S=b.slice(v+_);h(x,S,b);return}h(b,"",b)}function h(b,v,x){switch(b){case"event":c=v;break;case"data":l=`${l}${v}
`;break;case"id":o=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?r(parseInt(v,10)):n(new kB(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:x}));break;default:n(new kB(`Unknown field "${b.length>20?`${b.slice(0,20)}…`:b}"`,{type:"unknown-field",field:b,value:v,line:x}));break}}function m(){l.length>0&&t({id:o,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",c=""}function y(b={}){s&&b.consume&&d(s),a=!0,o=void 0,l="",c="",s=""}return{feed:u,reset:y}}function Pbe(e){const t=[];let n="",r=0;for(;r<e.length;){const i=e.indexOf("\r",r),s=e.indexOf(`
`,r);let a=-1;if(i!==-1&&s!==-1?a=Math.min(i,s):i!==-1?a=i:s!==-1&&(a=s),a===-1){n=e.slice(r);break}else{const o=e.slice(r,a);t.push(o),r=a+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class Obe extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let i;super({start(s){i=jbe({onEvent:a=>{s.enqueue(a)},onError(a){t==="terminate"?s.error(a):typeof t=="function"&&t(a)},onRetry:n,onComment:r})},transform(s){i.feed(s)}})}}var Dbe={};function H2(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Wk(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Fbe=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const i=Mbe(n,t);if(e==null)return i;if(n.includes(r))throw new Sbe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return s=>`${e}${r}${i(s)}`},q_=Fbe();function Lbe(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function zR(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Bbe({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new U_({message:`${r} API key must be a string.`});if(typeof os>"u")throw new U_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Dbe[t],e==null)throw new U_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new U_({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var M3=Symbol.for("vercel.ai.validator");function $be(e){return{[M3]:!0,validate:e}}function zbe(e){return typeof e=="object"&&e!==null&&M3 in e&&e[M3]===!0&&"validate"in e}function Ube(e){return zbe(e)?e:qbe(e)}function qbe(e){return $be(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Vbe({value:e,schema:t}){const n=mG({value:e,schema:t});if(!n.success)throw V2.wrap({value:e,cause:n.error});return n.value}function mG({value:e,schema:t}){const n=Ube(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:V2.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:V2.wrap({value:e,cause:r})}}}function Hbe({text:e,schema:t}){try{const n=Z0.parse(e);return t==null?n:Vbe({value:n,schema:t})}catch(n){throw q2.isInstance(n)||V2.isInstance(n)?n:new q2({text:e,cause:n})}}function gG({text:e,schema:t}){try{const n=Z0.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=mG({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:q2.isInstance(n)?n:new q2({text:e,cause:n})}}}function UR(e){try{return Z0.parse(e),!0}catch{return!1}}var Wbe=()=>globalThis.fetch,W2=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a})=>Gbe({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:s,fetch:a}),Gbe=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:s,fetch:a=Wbe()})=>{try{const o=await a(e,{method:"POST",headers:Lbe(t),body:n.content,signal:s}),l=Wk(o);if(!o.ok){let c;try{c=await i({response:o,url:e,requestBodyValues:n.values})}catch(u){throw zR(u)||sd.isInstance(u)?u:new sd({message:"Failed to process error response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(zR(c)||sd.isInstance(c))?c:new sd({message:"Failed to process successful response",cause:c,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(zR(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new sd({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},Kbe=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:s})=>{const a=await r.text(),o=Wk(r);if(a.trim()==="")return{responseHeaders:o,value:new sd({message:r.statusText,url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})};try{const l=Hbe({text:a,schema:e});return{responseHeaders:o,value:new sd({message:t(l),url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new sd({message:r.statusText,url:i,requestBodyValues:s,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})}}},yG=e=>async({response:t})=>{const n=Wk(t);if(t.body==null)throw new wbe({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Obe).pipeThrough(new TransformStream({transform({data:r},i){r!=="[DONE]"&&i.enqueue(gG({text:r,schema:e}))}}))}},bG=e=>async({response:t,url:n,requestBodyValues:r})=>{const i=await t.text(),s=gG({text:i,schema:e}),a=Wk(t);if(!s.success)throw new sd({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:a,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:a,value:s.value,rawValue:s.rawValue}},{btoa:Ybe}=globalThis;function EB(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Ybe(t)}function Zbe(e){return e==null?void 0:e.replace(/\/$/,"")}var Xbe=Object.defineProperty,Jbe=Object.defineProperties,Qbe=Object.getOwnPropertyDescriptors,G2=Object.getOwnPropertySymbols,vG=Object.prototype.hasOwnProperty,xG=Object.prototype.propertyIsEnumerable,TB=(e,t,n)=>t in e?Xbe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uo=(e,t)=>{for(var n in t||(t={}))vG.call(t,n)&&TB(e,n,t[n]);if(G2)for(var n of G2(t))xG.call(t,n)&&TB(e,n,t[n]);return e},qS=(e,t)=>Jbe(e,Qbe(t)),K2=(e,t)=>{var n={};for(var r in e)vG.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&G2)for(var r of G2(e))t.indexOf(r)<0&&xG.call(e,r)&&(n[r]=e[r]);return n};function Mc(e){var t,n,r;const i=e==null?void 0:e.anthropic,s=e==null?void 0:e.openrouter;return(r=(n=(t=s==null?void 0:s.cacheControl)!=null?t:s==null?void 0:s.cache_control)!=null?n:i==null?void 0:i.cacheControl)!=null?r:i==null?void 0:i.cache_control}function eve(e){var t,n,r;const i=[];for(const{role:s,content:a,providerMetadata:o}of e)switch(s){case"system":{i.push({role:"system",content:a,cache_control:Mc(o)});break}case"user":{if(a.length===1&&((t=a[0])==null?void 0:t.type)==="text"){i.push({role:"user",content:a[0].text,cache_control:(n=Mc(o))!=null?n:Mc(a[0].providerMetadata)});break}const l=Mc(o),c=a.map(u=>{var d,h,m,y,b,v;switch(u.type){case"text":return{type:"text",text:u.text,cache_control:(d=Mc(u.providerMetadata))!=null?d:l};case"image":return{type:"image_url",image_url:{url:u.image instanceof URL?u.image.toString():`data:${(h=u.mimeType)!=null?h:"image/jpeg"};base64,${EB(u.image)}`},cache_control:(m=Mc(u.providerMetadata))!=null?m:l};case"file":return{type:"file",file:{filename:String((b=(y=u.providerMetadata)==null?void 0:y.openrouter)==null?void 0:b.filename),file_data:u.data instanceof Uint8Array?`data:${u.mimeType};base64,${EB(u.data)}`:`data:${u.mimeType};base64,${u.data}`},cache_control:(v=Mc(u.providerMetadata))!=null?v:l};default:{const x=u;throw new Error(`Unsupported content part type: ${x}`)}}});i.push({role:"user",content:c});break}case"assistant":{let l="";const c=[];for(const u of a)switch(u.type){case"text":{l+=u.text;break}case"tool-call":{c.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const d=u;throw new Error(`Unsupported part: ${d}`)}}i.push({role:"assistant",content:l,tool_calls:c.length>0?c:void 0,cache_control:Mc(o)});break}case"tool":{for(const l of a)i.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=Mc(o))!=null?r:Mc(l.providerMetadata)});break}default:{const l=s;throw new Error(`Unsupported role: ${l}`)}}return i}function AB(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:i,top_logprobs:s})=>({token:r,logprob:i,topLogprobs:s?s.map(({token:a,logprob:o})=>({token:a,logprob:o})):[]})))!=null?n:void 0}function Y2(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var mP=Ze({error:Ze({message:$e(),type:$e(),param:ey().nullable(),code:$e().nullable()})}),Z2=Kbe({errorSchema:mP,errorToMessage:e=>e.error.message});function tve(e){return"parameters"in e}var nve=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,frequencyPenalty:s,presencePenalty:a,seed:o,stopSequences:l,responseFormat:c,topK:u,providerMetadata:d}){var h;const m=e.type,y=(h=d==null?void 0:d.openrouter)!=null?h:{},b=Uo(Uo(Uo({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:i,frequency_penalty:s,presence_penalty:a,seed:o,stop:l,response_format:c,top_k:u,messages:eve(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),y);switch(m){case"regular":return Uo(Uo({},b),sve(e));case"object-json":return qS(Uo({},b),{response_format:{type:"json_object"}});case"object-tool":return qS(Uo({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const v=m;throw new _l({functionality:`${v} mode`})}}}async doGenerate(e){var t,n,r,i,s,a,o;const l=this.getArgs(e),{responseHeaders:c,value:u}=await W2({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:H2(this.config.headers(),e.headers),body:l,failedResponseHandler:Z2,successfulResponseHandler:bG(rve),abortSignal:e.abortSignal,fetch:this.config.fetch}),d=l,{messages:h}=d,m=K2(d,["messages"]),y=u.choices[0];if(!y)throw new Error("No choice in response");return{response:{id:u.id,modelId:u.model},text:(t=y.message.content)!=null?t:void 0,reasoning:(n=y.message.reasoning)!=null?n:void 0,toolCalls:(r=y.message.tool_calls)==null?void 0:r.map(b=>{var v;return{toolCallType:"function",toolCallId:(v=b.id)!=null?v:q_(),toolName:b.function.name,args:b.function.arguments}}),finishReason:Y2(y.finish_reason),usage:{promptTokens:(s=(i=u.usage)==null?void 0:i.prompt_tokens)!=null?s:0,completionTokens:(o=(a=u.usage)==null?void 0:a.completion_tokens)!=null?o:0},rawCall:{rawPrompt:h,rawSettings:m},rawResponse:{headers:c},warnings:[],logprobs:AB(y.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await W2({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:H2(this.config.headers(),e.headers),body:qS(Uo({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Z2,successfulResponseHandler:yG(ive),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=t,{messages:s}=i,a=K2(i,["messages"]),o=[];let l="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){var m,y,b,v,x,_,S,C,E,A,R,N;if(!d.success){l="error",h.enqueue({type:"error",error:d.error});return}const M=d.value;if("error"in M){l="error",h.enqueue({type:"error",error:M.error});return}M.id&&h.enqueue({type:"response-metadata",id:M.id}),M.model&&h.enqueue({type:"response-metadata",modelId:M.model}),M.usage!=null&&(c={promptTokens:M.usage.prompt_tokens,completionTokens:M.usage.completion_tokens});const P=M.choices[0];if((P==null?void 0:P.finish_reason)!=null&&(l=Y2(P.finish_reason)),(P==null?void 0:P.delta)==null)return;const L=P.delta;L.content!=null&&h.enqueue({type:"text-delta",textDelta:L.content}),L.reasoning!=null&&h.enqueue({type:"reasoning",textDelta:L.reasoning});const O=AB(P==null?void 0:P.logprobs);if(O!=null&&O.length&&(u===void 0&&(u=[]),u.push(...O)),L.tool_calls!=null)for(const V of L.tool_calls){const F=V.index;if(o[F]==null){if(V.type!=="function")throw new BR({data:V,message:"Expected 'function' type."});if(V.id==null)throw new BR({data:V,message:"Expected 'id' to be a string."});if(((m=V.function)==null?void 0:m.name)==null)throw new BR({data:V,message:"Expected 'function.name' to be a string."});o[F]={id:V.id,type:"function",function:{name:V.function.name,arguments:(y=V.function.arguments)!=null?y:""},sent:!1};const U=o[F];if(U==null)throw new Error("Tool call is missing");((b=U.function)==null?void 0:b.name)!=null&&((v=U.function)==null?void 0:v.arguments)!=null&&UR(U.function.arguments)&&(h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:U.id,toolName:U.function.name,argsTextDelta:U.function.arguments}),h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=U.id)!=null?x:q_(),toolName:U.function.name,args:U.function.arguments}),U.sent=!0);continue}const J=o[F];if(J==null)throw new Error("Tool call is missing");((_=V.function)==null?void 0:_.arguments)!=null&&(J.function.arguments+=(C=(S=V.function)==null?void 0:S.arguments)!=null?C:""),h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:(E=V.function.arguments)!=null?E:""}),((A=J.function)==null?void 0:A.name)!=null&&((R=J.function)==null?void 0:R.arguments)!=null&&UR(J.function.arguments)&&(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(N=J.id)!=null?N:q_(),toolName:J.function.name,args:J.function.arguments}),J.sent=!0)}},flush(d){var h;if(l==="tool-calls")for(const m of o)m.sent||(d.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(h=m.id)!=null?h:q_(),toolName:m.function.name,args:UR(m.function.arguments)?m.function.arguments:"{}"}),m.sent=!0);d.enqueue({type:"finish",finishReason:l,logprobs:u,usage:c})}})),rawCall:{rawPrompt:s,rawSettings:a},rawResponse:{headers:n},warnings:[]}}},wG=Ze({id:$e().optional(),model:$e().optional(),usage:Ze({prompt_tokens:At(),completion_tokens:At(),total_tokens:At()}).nullish()}),rve=wG.extend({choices:dn(Ze({message:Ze({role:Pn("assistant"),content:$e().nullable().optional(),reasoning:$e().nullable().optional(),tool_calls:dn(Ze({id:$e().optional().nullable(),type:Pn("function"),function:Ze({name:$e(),arguments:$e()})})).optional()}),index:At(),logprobs:Ze({content:dn(Ze({token:$e(),logprob:At(),top_logprobs:dn(Ze({token:$e(),logprob:At()}))})).nullable()}).nullable().optional(),finish_reason:$e().optional().nullable()}))}),ive=Ai([wG.extend({choices:dn(Ze({delta:Ze({role:jl(["assistant"]).optional(),content:$e().nullish(),reasoning:$e().nullish().optional(),tool_calls:dn(Ze({index:At(),id:$e().nullish(),type:Pn("function").optional(),function:Ze({name:$e().nullish(),arguments:$e().nullish()})})).nullish()}).nullish(),logprobs:Ze({content:dn(Ze({token:$e(),logprob:At(),top_logprobs:dn(Ze({token:$e(),logprob:At()}))})).nullable()}).nullish(),finish_reason:$e().nullable().optional(),index:At()}))}),mP]);function sve(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(a=>tve(a)?{type:"function",function:{name:a.name,description:a.description,parameters:a.parameters}}:{type:"function",function:{name:a.name}}),i=e.toolChoice;if(i==null)return{tools:r,tool_choice:void 0};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:r,tool_choice:s};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:i.toolName}}};default:{const a=s;throw new Error(`Unsupported tool choice type: ${a}`)}}}function ave({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let i="";e[0]&&e[0].role==="system"&&(i+=`${e[0].content}

`,e=e.slice(1));for(const{role:s,content:a}of e)switch(s){case"system":throw new kbe({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new _l({functionality:"images"});case"file":throw new _l({functionality:"file attachments"});default:{const c=l;throw new Error(`Unsupported content type: ${c}`)}}}).join("");i+=`${n}:
${o}

`;break}case"assistant":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new _l({functionality:"tool-call messages"});case"reasoning":throw new _l({functionality:"reasoning messages"});case"redacted-reasoning":throw new _l({functionality:"redacted reasoning messages"});default:{const c=l;throw new Error(`Unsupported content type: ${c}`)}}}).join("");i+=`${r}:
${o}

`;break}case"tool":throw new _l({functionality:"tool messages"});default:{const o=s;throw new Error(`Unsupported role: ${o}`)}}return i+=`${r}:
`,{prompt:i}}function RB(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,i;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((i=e.top_logprobs[n])!=null?i:{}).map(([s,a])=>({token:s,logprob:a})):[]}})}var ove=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:i,topP:s,frequencyPenalty:a,presencePenalty:o,seed:l,responseFormat:c,topK:u,stopSequences:d,providerMetadata:h}){var m,y;const b=e.type,v=(m=h==null?void 0:h.openrouter)!=null?m:{},{prompt:x}=ave({prompt:n,inputFormat:t}),_=Uo(Uo(Uo({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:i,top_p:s,frequency_penalty:a,presence_penalty:o,seed:l,stop:d,response_format:c,top_k:u,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(b){case"regular":{if((y=e.tools)!=null&&y.length)throw new _l({functionality:"tools"});if(e.toolChoice)throw new _l({functionality:"toolChoice"});return _}case"object-json":throw new _l({functionality:"object-json mode"});case"object-tool":throw new _l({functionality:"object-tool mode"});default:{const S=b;throw new _l({functionality:`${S} mode`})}}}async doGenerate(e){var t,n,r,i,s;const a=this.getArgs(e),{responseHeaders:o,value:l}=await W2({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:H2(this.config.headers(),e.headers),body:a,failedResponseHandler:Z2,successfulResponseHandler:bG(IB),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=a,{prompt:u}=c,d=K2(c,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const h=l.choices[0];if(!h)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=h.text)!=null?t:"",reasoning:h.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(s=(i=l.usage)==null?void 0:i.completion_tokens)!=null?s:0},finishReason:Y2(h.finish_reason),logprobs:RB(h.logprobs),rawCall:{rawPrompt:u,rawSettings:d},rawResponse:{headers:o},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await W2({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:H2(this.config.headers(),e.headers),body:qS(Uo({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Z2,successfulResponseHandler:yG(IB),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=t,{prompt:s}=i,a=K2(i,["prompt"]);let o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(u,d){if(!u.success){o="error",d.enqueue({type:"error",error:u.error});return}const h=u.value;if("error"in h){o="error",d.enqueue({type:"error",error:h.error});return}h.usage!=null&&(l={promptTokens:h.usage.prompt_tokens,completionTokens:h.usage.completion_tokens});const m=h.choices[0];(m==null?void 0:m.finish_reason)!=null&&(o=Y2(m.finish_reason)),(m==null?void 0:m.text)!=null&&d.enqueue({type:"text-delta",textDelta:m.text});const y=RB(m==null?void 0:m.logprobs);y!=null&&y.length&&(c===void 0&&(c=[]),c.push(...y))},flush(u){u.enqueue({type:"finish",finishReason:o,logprobs:c,usage:l})}})),rawCall:{rawPrompt:s,rawSettings:a},rawResponse:{headers:n},warnings:[]}}},IB=Ai([Ze({id:$e().optional(),model:$e().optional(),choices:dn(Ze({text:$e(),reasoning:$e().nullish().optional(),finish_reason:$e().nullish(),index:At(),logprobs:Ze({tokens:dn($e()),token_logprobs:dn(At()),top_logprobs:dn(Wf($e(),At())).nullable()}).nullable().optional()})),usage:Ze({prompt_tokens:At(),completion_tokens:At()}).optional().nullable()}),mP]);function _G(e={}){var t,n,r;const i=(n=Zbe((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",s=(r=e.compatibility)!=null?r:"compatible",a=()=>Uo({Authorization:`Bearer ${Bbe({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),o=(d,h={})=>new nve(d,h,{provider:"openrouter.chat",url:({path:m})=>`${i}${m}`,headers:a,compatibility:s,fetch:e.fetch,extraBody:e.extraBody}),l=(d,h={})=>new ove(d,h,{provider:"openrouter.completion",url:({path:m})=>`${i}${m}`,headers:a,compatibility:s,fetch:e.fetch,extraBody:e.extraBody}),c=(d,h)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return d==="openai/gpt-3.5-turbo-instruct"?l(d,h):o(d,h)},u=function(d,h){return c(d,h)};return u.languageModel=c,u.chat=o,u.completion=l,u}_G({compatibility:"strict"});var Qh={},qR={},NB;function MB(){return NB||(NB=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(qR)),qR}var jB;function lve(){return jB||(jB=1,function(e){var t=Qh&&Qh.__createBinding||(Object.create?function(c,u,d,h){h===void 0&&(h=d);var m=Object.getOwnPropertyDescriptor(u,d);(!m||("get"in m?!u.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(c,h,m)}:function(c,u,d,h){h===void 0&&(h=d),c[h]=u[d]}),n=Qh&&Qh.__exportStar||function(c,u){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&t(u,c,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=MB();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(MB(),e);class i extends Error{}e.PartialJSON=i;class s extends Error{}e.MalformedJSON=s;function a(c,u=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return o(c.trim(),u)}e.parseJSON=a;const o=(c,u)=>{const d=c.length;let h=0;const m=E=>{throw new i(`${E} at position ${h}`)},y=E=>{throw new s(`${E} at position ${h}`)},b=()=>(C(),h>=d&&m("Unexpected end of input"),c[h]==='"'?v():c[h]==="{"?x():c[h]==="["?_():c.substring(h,h+4)==="null"||r.Allow.NULL&u&&d-h<4&&"null".startsWith(c.substring(h))?(h+=4,null):c.substring(h,h+4)==="true"||r.Allow.BOOL&u&&d-h<4&&"true".startsWith(c.substring(h))?(h+=4,!0):c.substring(h,h+5)==="false"||r.Allow.BOOL&u&&d-h<5&&"false".startsWith(c.substring(h))?(h+=5,!1):c.substring(h,h+8)==="Infinity"||r.Allow.INFINITY&u&&d-h<8&&"Infinity".startsWith(c.substring(h))?(h+=8,1/0):c.substring(h,h+9)==="-Infinity"||r.Allow._INFINITY&u&&1<d-h&&d-h<9&&"-Infinity".startsWith(c.substring(h))?(h+=9,-1/0):c.substring(h,h+3)==="NaN"||r.Allow.NAN&u&&d-h<3&&"NaN".startsWith(c.substring(h))?(h+=3,NaN):S()),v=()=>{const E=h;let A=!1;for(h++;h<d&&(c[h]!=='"'||A&&c[h-1]==="\\");)A=c[h]==="\\"?!A:!1,h++;if(c.charAt(h)=='"')try{return JSON.parse(c.substring(E,++h-Number(A)))}catch(R){y(String(R))}else if(r.Allow.STR&u)try{return JSON.parse(c.substring(E,h-Number(A))+'"')}catch{return JSON.parse(c.substring(E,c.lastIndexOf("\\"))+'"')}m("Unterminated string literal")},x=()=>{h++,C();const E={};try{for(;c[h]!=="}";){if(C(),h>=d&&r.Allow.OBJ&u)return E;const A=v();C(),h++;try{const R=b();E[A]=R}catch(R){if(r.Allow.OBJ&u)return E;throw R}C(),c[h]===","&&h++}}catch{if(r.Allow.OBJ&u)return E;m("Expected '}' at end of object")}return h++,E},_=()=>{h++;const E=[];try{for(;c[h]!=="]";)E.push(b()),C(),c[h]===","&&h++}catch{if(r.Allow.ARR&u)return E;m("Expected ']' at end of array")}return h++,E},S=()=>{if(h===0){c==="-"&&y("Not sure what '-' is");try{return JSON.parse(c)}catch(A){if(r.Allow.NUM&u)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}y(String(A))}}const E=h;for(c[h]==="-"&&h++;c[h]&&",]}".indexOf(c[h])===-1;)h++;h==d&&!(r.Allow.NUM&u)&&m("Unterminated number literal");try{return JSON.parse(c.substring(E,h))}catch{c.substring(E,h)==="-"&&m("Not sure what '-' is");try{return JSON.parse(c.substring(E,c.lastIndexOf("e")))}catch(R){y(String(R))}}},C=()=>{for(;h<d&&` 
\r	`.includes(c[h]);)h++};return b()},l=a;e.parse=l}(Qh)),Qh}var cve=lve();function VR(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((i,s)=>{if(s.type==="text")i.content+=s.text;else{if(s.type==="image"&&s.image instanceof URL)throw new Xr({functionality:"Image URLs in user messages"});s.type==="image"&&s.image instanceof Uint8Array&&(i.images=i.images||[],i.images.push(Vf(s.image)))}return i},{content:""}),role:"user"});break}case"assistant":{const i=[],s=[];for(const a of n)switch(a.type){case"text":{i.push(a.text);break}case"tool-call":{s.push({function:{arguments:a.args,name:a.toolName},id:a.toolCallId,type:"function"});break}default:{const o=a;throw new Error(`Unsupported part: ${o}`)}}t.push({content:i.join(","),role:"assistant",tool_calls:s.length>0?s:void 0});break}case"tool":{t.push(...n.map(i=>({content:typeof i.result=="object"?JSON.stringify(i.result):`${i.result}`,role:"tool",tool_call_id:i.toolCallId})));break}default:{const i=r;throw new Error(`Unsupported role: ${i}`)}}return t}var uve=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=cve.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[i,s]of r.entries()){const a=(n=JSON.stringify(s==null?void 0:s.parameters))!=null?n:"";if(a==="")continue;this._toolCalls[i]||(this._toolCalls[i]={function:{arguments:"",name:s.name},id:fo(),type:"function"});const o=this._toolCalls[i];o.function.arguments=a,e.enqueue({argsTextDelta:t,toolCallId:o.id,toolCallType:"function",toolName:o.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function dve({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var fve=Ze({error:Ze({code:$e().nullable(),message:$e(),param:ey().nullable(),type:$e()})}),j3=tm({errorSchema:fve,errorToMessage:e=>e.error.message});function hve({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],i=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const s=[];for(const o of n)o.type==="provider-defined"?r.push({tool:o,type:"unsupported-tool"}):s.push({function:{description:o.description,name:o.name,parameters:o.parameters},type:"function"});if(i===void 0)return{tools:s,toolWarnings:r};const a=i.type;switch(a){case"auto":return{tools:s,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const o=a;throw new Xr({functionality:`Unsupported tool choice type: ${o}`})}}}function pve(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var mve=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},gve=e=>async({response:t})=>{const n=X0(t);if(t.body===null)throw new XH({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new mve).pipeThrough(new TransformStream({transform(r,i){i.enqueue(Dp({schema:e,text:r}))}}))}},yve=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:i,responseFormat:s,seed:a,stopSequences:o,temperature:l,topK:c,topP:u}){const d=n.type,h=[];s!==void 0&&s.type==="json"&&s.schema!==void 0&&!this.supportsStructuredOutputs&&h.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const m={format:s==null?void 0:s.type,model:this.modelId,options:pve({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:a,stop:o,temperature:l,tfs_z:this.settings.tfsZ,top_k:c,top_p:u,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(d){case"regular":{const{tools:y,toolWarnings:b}=hve({mode:n});return{args:{...m,messages:VR(i),tools:y},type:d,warnings:[...h,...b]}}case"object-json":return{args:{...m,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:VR(i)},type:d,warnings:h};case"object-tool":return{args:{...m,messages:VR(i),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:d,warnings:h};default:{const y=d;throw new Error(`Unsupported type: ${y}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:i}=this.getArguments(e),s={...r,stream:!1},{responseHeaders:a,value:o}=await ds({abortSignal:e.abortSignal,body:s,failedResponseHandler:j3,fetch:this.config.fetch,headers:us(this.config.headers(),e.headers),successfulResponseHandler:Eo(bve),url:`${this.config.baseURL}/chat`}),{messages:l,...c}=s,u=(t=o.message.tool_calls)==null?void 0:t.map(d=>{var h;return{args:JSON.stringify(d.function.arguments),toolCallId:(h=d.id)!=null?h:fo(),toolCallType:"function",toolName:d.function.name}});return{finishReason:dve({finishReason:o.done_reason,hasToolCalls:u!==void 0&&u.length>0}),rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:a},request:{body:JSON.stringify(s)},text:(n=o.message.content)!=null?n:void 0,toolCalls:u,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:i}}async doStream(e){if(this.settings.simulateStreaming){const m=await this.doGenerate(e),y=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...m.response}),m.text&&b.enqueue({textDelta:m.text,type:"text-delta"}),m.toolCalls)for(const v of m.toolCalls)b.enqueue({argsTextDelta:v.args,toolCallId:v.toolCallId,toolCallType:"function",toolName:v.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",...v});b.enqueue({finishReason:m.finishReason,logprobs:m.logprobs,providerMetadata:m.providerMetadata,type:"finish",usage:m.usage}),b.close()}});return{rawCall:m.rawCall,rawResponse:m.rawResponse,stream:y,warnings:m.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:i,value:s}=await ds({abortSignal:e.abortSignal,body:t,failedResponseHandler:j3,fetch:this.config.fetch,headers:us(this.config.headers(),e.headers),successfulResponseHandler:gve(vve),url:`${this.config.baseURL}/chat`}),{messages:a,...o}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new uve({tools:l,type:n});let u="other",d={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:h=!0}=this.settings;return{rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:i},request:{body:JSON.stringify(t)},stream:s.pipeThrough(new TransformStream({async flush(m){m.enqueue({finishReason:u,type:"finish",usage:d})},async transform(m,y){if(!m.success){y.enqueue({error:m.error,type:"error"});return}const b=m.value;if(b.done){u=c.finish({controller:y}),d={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}h&&c.parse({controller:y,delta:b.message.content})||b.message.content!==null&&y.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},bve=Ze({created_at:$e(),done:Pn(!0),done_reason:$e().optional().nullable(),eval_count:At(),eval_duration:At(),load_duration:At().optional(),message:Ze({content:$e(),role:$e(),tool_calls:dn(Ze({function:Ze({arguments:Wf(ey()),name:$e()}),id:$e().optional()})).optional().nullable()}),model:$e(),prompt_eval_count:At().optional(),prompt_eval_duration:At().optional(),total_duration:At()}),vve=Hk("done",[Ze({created_at:$e(),done:Pn(!1),message:Ze({content:$e(),role:$e()}),model:$e()}),Ze({created_at:$e(),done:Pn(!0),eval_count:At(),eval_duration:At(),load_duration:At().optional(),model:$e(),prompt_eval_count:At().optional(),prompt_eval_duration:At().optional(),total_duration:At()})]),xve=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new $k({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await ds({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:j3,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Eo(wve),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},wve=Ze({embeddings:dn(dn(At())),prompt_eval_count:At().nullable()});function SG(e={}){var t;const n=(t=Vk(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),i=(o,l={})=>new yve(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),s=(o,l={})=>new xve(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),a=function(o,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return i(o,l)};return a.chat=i,a.embedding=s,a.languageModel=i,a.textEmbedding=s,a.textEmbeddingModel=s,a}SG();function Gb(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function _ve(e){const t=[];for(const{role:n,content:r,...i}of e){const s=Gb({...i});switch(n){case"system":{t.push({role:"system",content:r,...s});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Gb(r[0])});break}t.push({role:"user",content:r.map(a=>{var o;const l=Gb(a);switch(a.type){case"text":return{type:"text",text:a.text,...l};case"image":return{type:"image_url",image_url:{url:a.image instanceof URL?a.image.toString():`data:${(o=a.mimeType)!=null?o:"image/jpeg"};base64,${Vf(a.image)}`},...l};case"file":throw new Xr({functionality:"File content parts in user messages"})}}),...s});break}case"assistant":{let a="";const o=[];for(const l of r){const c=Gb(l);switch(l.type){case"text":{a+=l.text;break}case"tool-call":{o.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...c});break}}}t.push({role:"assistant",content:a,tool_calls:o.length>0?o:void 0,...s});break}case"tool":{for(const a of r){const o=Gb(a);t.push({role:"tool",tool_call_id:a.toolCallId,content:JSON.stringify(a.result),...o})}break}default:{const a=n;throw new Error(`Unsupported role: ${a}`)}}}return t}function X2({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function J2(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Sve=Ze({error:Ze({message:$e(),type:$e().nullish(),param:ey().nullish(),code:Ai([$e(),At()]).nullish()})}),Gk={errorSchema:Sve,errorToMessage:e=>e.error.message};function Cve({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,i=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice,a=[];for(const l of r)l.type==="provider-defined"?i.push({type:"unsupported-tool",tool:l}):a.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(s==null)return{tools:a,tool_choice:void 0,toolWarnings:i};const o=s.type;switch(o){case"auto":case"none":case"required":return{tools:a,tool_choice:o,toolWarnings:i};case"tool":return{tools:a,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:{const l=o;throw new Xr({functionality:`Unsupported tool choice type: ${l}`})}}}var kve=class{constructor(e,t,n){this.specificationVersion="v1";var r,i;this.modelId=e,this.settings=t,this.config=n;const s=(r=n.errorStructure)!=null?r:Gk;this.chunkSchema=Tve(s.errorSchema),this.failedResponseHandler=tm(s),this.supportsStructuredOutputs=(i=n.supportsStructuredOutputs)!=null?i:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,topK:s,frequencyPenalty:a,presencePenalty:o,providerMetadata:l,stopSequences:c,responseFormat:u,seed:d}){var h,m,y,b,v;const x=e.type,_=[];s!=null&&_.push({type:"unsupported-setting",setting:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&_.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const S={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:i,frequency_penalty:a,presence_penalty:o,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs===!0&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,name:(h=u.name)!=null?h:"response",description:u.description}}:{type:"json_object"}:void 0,stop:c,seed:d,...l==null?void 0:l[this.providerOptionsName],reasoning_effort:(b=(m=l==null?void 0:l[this.providerOptionsName])==null?void 0:m.reasoningEffort)!=null?b:(y=l==null?void 0:l["openai-compatible"])==null?void 0:y.reasoningEffort,messages:_ve(t)};switch(x){case"regular":{const{tools:C,tool_choice:E,toolWarnings:A}=Cve({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...S,tools:C,tool_choice:E},warnings:[..._,...A]}}case"object-json":return{args:{...S,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(v=e.name)!=null?v:"response",description:e.description}}:{type:"json_object"}},warnings:_};case"object-tool":return{args:{...S,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:_};default:{const C=x;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,i,s,a,o,l,c,u,d;const{args:h,warnings:m}=this.getArgs({...e}),y=JSON.stringify(h),{responseHeaders:b,value:v,rawValue:x}=await ds({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:h,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Eo(Eve),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...S}=h,C=v.choices[0],E={[this.providerOptionsName]:{},...(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:x})},A=(r=v.usage)==null?void 0:r.completion_tokens_details,R=(i=v.usage)==null?void 0:i.prompt_tokens_details;return(A==null?void 0:A.reasoning_tokens)!=null&&(E[this.providerOptionsName].reasoningTokens=A==null?void 0:A.reasoning_tokens),(A==null?void 0:A.accepted_prediction_tokens)!=null&&(E[this.providerOptionsName].acceptedPredictionTokens=A==null?void 0:A.accepted_prediction_tokens),(A==null?void 0:A.rejected_prediction_tokens)!=null&&(E[this.providerOptionsName].rejectedPredictionTokens=A==null?void 0:A.rejected_prediction_tokens),(R==null?void 0:R.cached_tokens)!=null&&(E[this.providerOptionsName].cachedPromptTokens=R==null?void 0:R.cached_tokens),{text:(s=C.message.content)!=null?s:void 0,reasoning:(a=C.message.reasoning_content)!=null?a:void 0,toolCalls:(o=C.message.tool_calls)==null?void 0:o.map(N=>{var M;return{toolCallType:"function",toolCallId:(M=N.id)!=null?M:fo(),toolName:N.function.name,args:N.function.arguments}}),finishReason:J2(C.finish_reason),usage:{promptTokens:(c=(l=v.usage)==null?void 0:l.prompt_tokens)!=null?c:NaN,completionTokens:(d=(u=v.usage)==null?void 0:u.completion_tokens)!=null?d:NaN},providerMetadata:E,rawCall:{rawPrompt:_,rawSettings:S},rawResponse:{headers:b,body:x},response:X2(v),warnings:m,request:{body:y}}}async doStream(e){var t;if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.reasoning)if(Array.isArray(b.reasoning))for(const _ of b.reasoning)_.type==="text"&&x.enqueue({type:"reasoning",textDelta:_.text});else x.enqueue({type:"reasoning",textDelta:b.reasoning});if(b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const _ of b.toolCalls)x.enqueue({type:"tool-call",..._});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),i={...n,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},s=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:a,value:o}=await ds({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Q0(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...c}=n,u=[];let d="unknown",h={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0}},m=!0,y=this.providerOptionsName;return{stream:o.pipeThrough(new TransformStream({transform(b,v){var x,_,S,C,E,A,R,N,M,P,L,O;if(!b.success){d="error",v.enqueue({type:"error",error:b.error});return}const V=b.value;if(s==null||s.processChunk(b.rawValue),"error"in V){d="error",v.enqueue({type:"error",error:V.error.message});return}if(m&&(m=!1,v.enqueue({type:"response-metadata",...X2(V)})),V.usage!=null){const{prompt_tokens:U,completion_tokens:G,prompt_tokens_details:$,completion_tokens_details:ne}=V.usage;h.promptTokens=U??void 0,h.completionTokens=G??void 0,(ne==null?void 0:ne.reasoning_tokens)!=null&&(h.completionTokensDetails.reasoningTokens=ne==null?void 0:ne.reasoning_tokens),(ne==null?void 0:ne.accepted_prediction_tokens)!=null&&(h.completionTokensDetails.acceptedPredictionTokens=ne==null?void 0:ne.accepted_prediction_tokens),(ne==null?void 0:ne.rejected_prediction_tokens)!=null&&(h.completionTokensDetails.rejectedPredictionTokens=ne==null?void 0:ne.rejected_prediction_tokens),($==null?void 0:$.cached_tokens)!=null&&(h.promptTokensDetails.cachedTokens=$==null?void 0:$.cached_tokens)}const F=V.choices[0];if((F==null?void 0:F.finish_reason)!=null&&(d=J2(F.finish_reason)),(F==null?void 0:F.delta)==null)return;const J=F.delta;if(J.reasoning_content!=null&&v.enqueue({type:"reasoning",textDelta:J.reasoning_content}),J.content!=null&&v.enqueue({type:"text-delta",textDelta:J.content}),J.tool_calls!=null)for(const U of J.tool_calls){const G=U.index;if(u[G]==null){if(U.type!=="function")throw new Vg({data:U,message:"Expected 'function' type."});if(U.id==null)throw new Vg({data:U,message:"Expected 'id' to be a string."});if(((x=U.function)==null?void 0:x.name)==null)throw new Vg({data:U,message:"Expected 'function.name' to be a string."});u[G]={id:U.id,type:"function",function:{name:U.function.name,arguments:(_=U.function.arguments)!=null?_:""},hasFinished:!1};const ne=u[G];((S=ne.function)==null?void 0:S.name)!=null&&((C=ne.function)==null?void 0:C.arguments)!=null&&(ne.function.arguments.length>0&&v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ne.id,toolName:ne.function.name,argsTextDelta:ne.function.arguments}),T2(ne.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(E=ne.id)!=null?E:fo(),toolName:ne.function.name,args:ne.function.arguments}),ne.hasFinished=!0));continue}const $=u[G];$.hasFinished||(((A=U.function)==null?void 0:A.arguments)!=null&&($.function.arguments+=(N=(R=U.function)==null?void 0:R.arguments)!=null?N:""),v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:$.id,toolName:$.function.name,argsTextDelta:(M=U.function.arguments)!=null?M:""}),((P=$.function)==null?void 0:P.name)!=null&&((L=$.function)==null?void 0:L.arguments)!=null&&T2($.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=$.id)!=null?O:fo(),toolName:$.function.name,args:$.function.arguments}),$.hasFinished=!0))}},flush(b){var v,x;const _={[y]:{},...s==null?void 0:s.buildMetadata()};h.completionTokensDetails.reasoningTokens!=null&&(_[y].reasoningTokens=h.completionTokensDetails.reasoningTokens),h.completionTokensDetails.acceptedPredictionTokens!=null&&(_[y].acceptedPredictionTokens=h.completionTokensDetails.acceptedPredictionTokens),h.completionTokensDetails.rejectedPredictionTokens!=null&&(_[y].rejectedPredictionTokens=h.completionTokensDetails.rejectedPredictionTokens),h.promptTokensDetails.cachedTokens!=null&&(_[y].cachedPromptTokens=h.promptTokensDetails.cachedTokens),b.enqueue({type:"finish",finishReason:d,usage:{promptTokens:(v=h.promptTokens)!=null?v:NaN,completionTokens:(x=h.completionTokens)!=null?x:NaN},providerMetadata:_})}})),rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:a},warnings:r,request:{body:JSON.stringify(i)}}}},CG=Ze({prompt_tokens:At().nullish(),completion_tokens:At().nullish(),prompt_tokens_details:Ze({cached_tokens:At().nullish()}).nullish(),completion_tokens_details:Ze({reasoning_tokens:At().nullish(),accepted_prediction_tokens:At().nullish(),rejected_prediction_tokens:At().nullish()}).nullish()}).nullish(),Eve=Ze({id:$e().nullish(),created:At().nullish(),model:$e().nullish(),choices:dn(Ze({message:Ze({role:Pn("assistant").nullish(),content:$e().nullish(),reasoning_content:$e().nullish(),tool_calls:dn(Ze({id:$e().nullish(),type:Pn("function"),function:Ze({name:$e(),arguments:$e()})})).nullish()}),finish_reason:$e().nullish()})),usage:CG}),Tve=e=>Ai([Ze({id:$e().nullish(),created:At().nullish(),model:$e().nullish(),choices:dn(Ze({delta:Ze({role:jl(["assistant"]).nullish(),content:$e().nullish(),reasoning_content:$e().nullish(),tool_calls:dn(Ze({index:At(),id:$e().nullish(),type:Pn("function").nullish(),function:Ze({name:$e().nullish(),arguments:$e().nullish()})})).nullish()}).nullish(),finish_reason:$e().nullish()})),usage:CG}),e]);function Ave({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let i="";e[0].role==="system"&&(i+=`${e[0].content}

`,e=e.slice(1));for(const{role:s,content:a}of e)switch(s){case"system":throw new qc({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Xr({functionality:"images"})}}).join("");i+=`${n}:
${o}

`;break}case"assistant":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Xr({functionality:"tool-call messages"})}}).join("");i+=`${r}:
${o}

`;break}case"tool":throw new Xr({functionality:"tool messages"});default:{const o=s;throw new Error(`Unsupported role: ${o}`)}}return i+=`${r}:
`,{prompt:i,stopSequences:[`
${n}:`]}}var Rve=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:Gk;this.chunkSchema=Nve(i.errorSchema),this.failedResponseHandler=tm(i)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:i,topP:s,topK:a,frequencyPenalty:o,presencePenalty:l,stopSequences:c,responseFormat:u,seed:d,providerMetadata:h}){var m;const y=e.type,b=[];a!=null&&b.push({type:"unsupported-setting",setting:"topK"}),u!=null&&u.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:v,stopSequences:x}=Ave({prompt:n,inputFormat:t}),_=[...x??[],...c??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:i,top_p:s,frequency_penalty:o,presence_penalty:l,seed:d,...h==null?void 0:h[this.providerOptionsName],prompt:v,stop:_.length>0?_:void 0};switch(y){case"regular":{if((m=e.tools)!=null&&m.length)throw new Xr({functionality:"tools"});if(e.toolChoice)throw new Xr({functionality:"toolChoice"});return{args:S,warnings:b}}case"object-json":throw new Xr({functionality:"object-json mode"});case"object-tool":throw new Xr({functionality:"object-tool mode"});default:{const C=y;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,i;const{args:s,warnings:a}=this.getArgs(e),{responseHeaders:o,value:l,rawValue:c}=await ds({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:s,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Eo(Ive),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:u,...d}=s,h=l.choices[0];return{text:h.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(i=(r=l.usage)==null?void 0:r.completion_tokens)!=null?i:NaN},finishReason:J2(h.finish_reason),rawCall:{rawPrompt:u,rawSettings:d},rawResponse:{headers:o,body:c},response:X2(l),warnings:a,request:{body:JSON.stringify(s)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:i,value:s}=await ds({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:us(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Q0(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...o}=t;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u=!0;return{stream:s.pipeThrough(new TransformStream({transform(d,h){if(!d.success){l="error",h.enqueue({type:"error",error:d.error});return}const m=d.value;if("error"in m){l="error",h.enqueue({type:"error",error:m.error});return}u&&(u=!1,h.enqueue({type:"response-metadata",...X2(m)})),m.usage!=null&&(c={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const y=m.choices[0];(y==null?void 0:y.finish_reason)!=null&&(l=J2(y.finish_reason)),(y==null?void 0:y.text)!=null&&h.enqueue({type:"text-delta",textDelta:y.text})},flush(d){d.enqueue({type:"finish",finishReason:l,usage:c})}})),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:i},warnings:n,request:{body:JSON.stringify(r)}}}},Ive=Ze({id:$e().nullish(),created:At().nullish(),model:$e().nullish(),choices:dn(Ze({text:$e(),finish_reason:$e()})),usage:Ze({prompt_tokens:At(),completion_tokens:At()}).nullish()}),Nve=e=>Ai([Ze({id:$e().nullish(),created:At().nullish(),model:$e().nullish(),choices:dn(Ze({text:$e(),finish_reason:$e().nullish(),index:At()})),usage:Ze({prompt_tokens:At(),completion_tokens:At()}).nullish()}),e]),Mve=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new $k({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:i,value:s}=await ds({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:us(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:tm((r=this.config.errorStructure)!=null?r:Gk),successfulResponseHandler:Eo(jve),abortSignal:n,fetch:this.config.fetch});return{embeddings:s.data.map(a=>a.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:i}}}},jve=Ze({data:dn(Ze({embedding:dn(At())})),usage:Ze({prompt_tokens:At()}).nullish()}),Pve=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:i,providerOptions:s,headers:a,abortSignal:o}){var l,c,u,d,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),i!=null&&m.push({type:"unsupported-setting",setting:"seed"});const y=(u=(c=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:c.call(l))!=null?u:new Date,{value:b,responseHeaders:v}=await ds({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:us(this.config.headers(),a),body:{model:this.modelId,prompt:e,n:t,size:n,...(d=s.openai)!=null?d:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:tm((h=this.config.errorStructure)!=null?h:Gk),successfulResponseHandler:Eo(Ove),abortSignal:o,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:m,response:{timestamp:y,modelId:this.modelId,headers:v}}}},Ove=Ze({data:dn(Ze({b64_json:$e()}))});function Dve(e){const t=Vk(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),i=d=>({provider:`${n}.${d}`,url:({path:h})=>{const m=new URL(`${t}${h}`);return e.queryParams&&(m.search=new URLSearchParams(e.queryParams).toString()),m.toString()},headers:r,fetch:e.fetch}),s=(d,h={})=>a(d,h),a=(d,h={})=>new kve(d,h,{...i("chat"),defaultObjectGenerationMode:"tool"}),o=(d,h={})=>new Rve(d,h,i("completion")),l=(d,h={})=>new Mve(d,h,i("embedding")),c=(d,h={})=>new Pve(d,h,i("image")),u=(d,h)=>s(d,h);return u.languageModel=s,u.chatModel=a,u.completionModel=o,u.textEmbeddingModel=l,u.imageModel=c,u}const Mv=(e,t)=>`${e}:${t}`,rc=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},p0=e=>e==="openai"||e==="openrouter"||e==="google",Q2=e=>e==="ollama"||e==="openai-compatible",Ep=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",ho=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],Fve={openai:[{id:"gpt-4o",name:"GPT-4o"},{id:"dall-e-3",name:"DALL-E 3"},{id:"dall-e-2",name:"DALL-E 2"},{id:"o3-mini",name:"o3-mini"},{id:"o4-mini",name:"o4-mini"},{id:"o4-mini-high",name:"o4-mini-high"},{id:"o3-mini-high",name:"o3-mini-high"},{id:"o3",name:"o3"},{id:"4.1",name:"4.1"},{id:"4.1-mini",name:"4.1-mini"},{id:"4.1-nano",name:"4.1-nano"},{id:"o3-pro",name:"o3-pro"},{id:"codex-mini",name:"codex-mini"}],google:[{id:"gemini-2.5-pro-preview",name:"Gemini 2.5 Pro Preview"},{id:"gemini-2.5-flash-preview-05-20:thinking",name:"Gemini 2.5 Flash Preview (Thinking)"},{id:"gemini-2.5-flash-preview",name:"Gemini 2.5 Flash Preview"},{id:"gemini-2.0-flash-001",name:"Gemini 2.0 Flash"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},kG=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function gP(e,t,n){try{switch(e.type){case"openai":return jW({apiKey:n})(t);case"google":return FW({apiKey:n})(t);case"openrouter":return _G({apiKey:n,extraBody:{include_reasoning:!0}})(t);case"ollama":return SG({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return Dve({baseURL:kG(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function EG(e,t,n){const i=Ir.getState().getAllAvailableModelDefsForProvider(e.id).find(a=>a.id===t);if(!i){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const s=gP(e,t,n);if(!s){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:Mv(e.id,t),name:i.name,providerId:e.id,providerName:e.name,instance:s,metadata:i}}const TG={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]},Kb=new Map,Lve=5*60*1e3,Bve=(e,t)=>{var s,a,o,l,c,u,d,h,m,y,b,v,x,_;const n=e.id||e.name,r=e.name||n,i={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((s=e.architecture)==null?void 0:s.modality)??"text->text",input_modalities:((a=e.architecture)==null?void 0:a.input_modalities)??["text"],output_modalities:((o=e.architecture)==null?void 0:o.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((c=e.architecture)==null?void 0:c.instruct_type)??null},pricing:{prompt:((u=e.pricing)==null?void 0:u.prompt)??"0",completion:((d=e.pricing)==null?void 0:d.completion)??"0",request:((h=e.pricing)==null?void 0:h.request)??"0",image:((m=e.pricing)==null?void 0:m.image)??"0",web_search:((y=e.pricing)==null?void 0:y.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((v=e.top_provider)==null?void 0:v.context_length)??e.context_length??null,max_completion_tokens:((x=e.top_provider)==null?void 0:x.max_completion_tokens)??null,is_moderated:((_=e.top_provider)==null?void 0:_.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??TG[t]??[]};return t==="ollama"?(i.context_length=i.context_length??4096,i.top_provider&&(i.top_provider.context_length=i.context_length),i.architecture&&(i.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(i.context_length=8192),n.includes("gpt-4-32k")&&(i.context_length=32768),n.includes("gpt-4-turbo")&&(i.context_length=128e3),n.includes("gpt-4o")&&(i.context_length=128e3),n.includes("gpt-3.5-turbo")&&(i.context_length=16385),i.top_provider&&(i.top_provider.context_length=i.context_length),i.architecture&&(i.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?i.context_length=1048576:n.includes("gemini")&&(i.context_length=32768),i.top_provider&&(i.top_provider.context_length=i.context_length),i.architecture&&(i.architecture.tokenizer="Google")):t==="openai-compatible"&&(i.context_length=i.context_length??4096,i.top_provider&&(i.top_provider.context_length=i.context_length),i.architecture&&(i.architecture.tokenizer="Compatible")),i};async function $ve(e,t){const n=`${e.id}-${e.baseURL||""}`,r=Kb.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const i=(async()=>{var o,l,c;let s;const a={Accept:"application/json"};t&&(a.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");s="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");s="https://openrouter.ai/api/v1/models",a["HTTP-Referer"]=((o=globalThis.location)==null?void 0:o.origin)||"http://localhost:3000",a["X-Title"]="LiteChat";break;case"ollama":const u=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";s=new URL("/api/tags",u).toString(),delete a.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const d=kG(e.baseURL);s=new URL("models",d.endsWith("/")?d:d+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(u){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,u),De.error(`Invalid Base URL for ${e.name}: ${u instanceof Error?u.message:String(u)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${s}`);try{const u=await fetch(s,{headers:a});if(!u.ok){let y=`(${u.status} ${u.statusText})`;try{const b=await u.text();y=b||y;try{const v=JSON.parse(b);y=((c=v==null?void 0:v.error)==null?void 0:c.message)||(v==null?void 0:v.message)||y}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${y}`)}const d=await u.json();let h=[];if(e.type==="ollama"?h=d.models||[]:h=d.data||d||[],!Array.isArray(h))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,d),[];const m=h.map(y=>Bve(y,e.type));return m.sort((y,b)=>(y.name||y.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${m.length} models for ${e.name}`),m}catch(u){const d=u instanceof Error?u.message:String(u);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,d),De.error(`Failed to fetch models for ${e.name}: ${d}`),Kb.delete(n),[]}})();return Kb.set(n,i),setTimeout(()=>{Kb.get(n)===i&&(Kb.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},Lve),i}const lr={initialDataLoaded:"provider.initial.data.loaded",configsChanged:"provider.configs.changed",apiKeysChanged:"provider.api.keys.changed",selectedModelChanged:"provider.selected.model.changed",globalModelSortOrderChanged:"provider.global.model.sort.order.changed",fetchStatusChanged:"provider.fetch.status.changed",globallyEnabledModelsUpdated:"provider.globally.enabled.models.updated",selectedModelForDetailsChanged:"provider.selected.model.for.details.changed",enableApiKeyManagementChanged:"provider.enable.api.key.management.changed",loadInitialDataRequest:"provider.load.initial.data.request",selectModelRequest:"provider.select.model.request",addApiKeyRequest:"provider.add.api.key.request",deleteApiKeyRequest:"provider.delete.api.key.request",addProviderConfigRequest:"provider.add.config.request",updateProviderConfigRequest:"provider.update.config.request",deleteProviderConfigRequest:"provider.delete.config.request",fetchModelsRequest:"provider.fetch.models.request",setGlobalModelSortOrderRequest:"provider.set.global.model.sort.order.request",setEnableApiKeyManagementRequest:"provider.set.enable.api.key.management.request",setSelectedModelForDetailsRequest:"provider.set.selected.model.for.details.request"},HR="provider:lastModelSelection",PB="provider:globalModelSortOrder",Ir=Il(Nl((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,globallyEnabledModelDefinitions:[],_updateGloballyEnabledModelDefinitions:()=>{const{dbProviderConfigs:n,globalModelSortOrder:r}=t(),i=t().getAvailableModelListItems(),s=new Map(i.map(u=>[u.id,u])),a=new Set;n.forEach(u=>{u.isEnabled&&u.enabledModels&&u.enabledModels.forEach(d=>{a.add(Mv(u.id,d))})});const o=[],l=new Set;r.forEach(u=>{if(a.has(u)){const d=s.get(u);d&&!l.has(u)&&(o.push(d),l.add(u))}});const c=i.filter(u=>a.has(u.id)&&!l.has(u.id)).sort((u,d)=>u.name.localeCompare(d.name));o.push(...c),e({globallyEnabledModelDefinitions:o}),Le.emit(lr.globallyEnabledModelsUpdated,{models:o})},getGloballyEnabledModelDefinitions:()=>t().globallyEnabledModelDefinitions,createAiModelConfig:(n,r,i)=>{const a=t().getAllAvailableModelDefsForProvider(n.id).find(l=>l.id===r);if(!a){console.warn(`Model definition not found for ${r} in provider ${n.name}`);return}const o=gP(n,r,i);if(!o){console.warn(`Failed to instantiate AI SDK instance for ${r} from provider ${n.name}`);return}return{id:Mv(n.id,r),name:a.name,providerId:n.id,providerName:n.name,instance:o,metadata:a}},setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Nt.saveSetting("enableApiKeyManagement",n),Le.emit(lr.enableApiKeyManagementChanged,{enabled:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Nt.loadSetting("enableApiKeyManagement",!0),[r,i,s,a]=await Promise.all([Nt.loadProviderConfigs(),Nt.loadApiKeys(),Nt.loadSetting(PB,[]),Nt.loadSetting(HR,null)]);e({dbProviderConfigs:r,dbApiKeys:i,enableApiKeyManagement:n,globalModelSortOrder:s}),t()._updateGloballyEnabledModelDefinitions();const o=t().globallyEnabledModelDefinitions.map(d=>d.id),l=new Set(o);let c=a;c&&l.has(c)||(c=o[0]??null),e({selectedModelId:c,isLoading:!1}),await Nt.saveSetting(HR,c),Le.emit(lr.initialDataLoaded,{configs:r,apiKeys:i,selectedModelId:c,globalSortOrder:t().globalModelSortOrder}),t().selectedModelId!==c?t().selectModel(c):Le.emit(lr.selectedModelChanged,{modelId:c})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),De.error("Failed to load provider data")}},selectModel:n=>{t().selectedModelId!==n&&(e({selectedModelId:n}),Nt.saveSetting(HR,n),Le.emit(lr.selectedModelChanged,{modelId:n}))},addApiKey:async(n,r,i)=>{const s=Xs(),a=new Date,o={id:s,name:n,value:i,providerId:r,createdAt:a,updatedAt:a};try{return await Nt.saveApiKey(o),e(l=>{l.dbApiKeys.push(o)}),De.success(`API Key "${n}" added.`),Le.emit(lr.apiKeysChanged,{apiKeys:t().dbApiKeys}),s}catch(l){throw console.error("ProviderStore: Error adding API key",l),De.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var i;const r=((i=t().dbApiKeys.find(s=>s.id===n))==null?void 0:i.name)??"Unknown Key";try{await Nt.deleteApiKey(n),e(s=>{s.dbApiKeys=s.dbApiKeys.filter(a=>a.id!==n),s.dbProviderConfigs=s.dbProviderConfigs.map(a=>a.apiKeyId===n?{...a,apiKeyId:null}:a)}),De.success(`API Key "${r}" deleted.`),Le.emit(lr.apiKeysChanged,{apiKeys:t().dbApiKeys}),Le.emit(lr.configsChanged,{providerConfigs:t().dbProviderConfigs})}catch(s){throw console.error("ProviderStore: Error deleting API key",s),De.error(`Failed to delete API Key: ${s instanceof Error?s.message:String(s)}`),s}},addProviderConfig:async n=>{const r=Xs(),i=new Date,s={id:r,createdAt:i,updatedAt:i,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Nt.saveProviderConfig(s),e(a=>{a.dbProviderConfigs.push(s)}),t()._updateGloballyEnabledModelDefinitions(),De.success(`Provider "${n.name}" added.`),Le.emit(lr.configsChanged,{providerConfigs:t().dbProviderConfigs}),t().fetchModels(r).catch(a=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,a)}),r}catch(a){throw console.error("ProviderStore: Error adding provider config",a),De.error(`Failed to add Provider: ${a instanceof Error?a.message:String(a)}`),a}},updateProviderConfig:async(n,r)=>{const i=t().dbProviderConfigs.find(a=>a.id===n);if(!i)return;const s={...i,...r,fetchedModels:r.fetchedModels!==void 0?r.fetchedModels:i.fetchedModels,modelsLastFetchedAt:r.modelsLastFetchedAt!==void 0?r.modelsLastFetchedAt:i.modelsLastFetchedAt,updatedAt:new Date};try{await Nt.saveProviderConfig(s),e(a=>{const o=a.dbProviderConfigs.findIndex(l=>l.id===n);o!==-1&&(a.dbProviderConfigs[o]=s)}),t()._updateGloballyEnabledModelDefinitions(),Le.emit(lr.configsChanged,{providerConfigs:t().dbProviderConfigs})}catch(a){throw console.error("ProviderStore: Error updating provider config",a),De.error(`Failed to update Provider: ${a instanceof Error?a.message:String(a)}`),a}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r)return;const i=r.name;try{await Nt.deleteProviderConfig(n),e(s=>{s.dbProviderConfigs=s.dbProviderConfigs.filter(a=>a.id!==n),delete s.providerFetchStatus[n]}),t()._updateGloballyEnabledModelDefinitions(),Le.emit(lr.configsChanged,{providerConfigs:t().dbProviderConfigs}),De.success(`Provider "${i}" deleted.`)}catch(s){throw console.error("ProviderStore: Error deleting provider config",s),De.error(`Failed to delete Provider: ${s instanceof Error?s.message:String(s)}`),s}},fetchModels:async n=>{var i;const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r){De.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]!=="fetching"){t()._setProviderFetchStatus(n,"fetching");try{const s=r.apiKeyId,a=(i=t().dbApiKeys.find(l=>l.id===s))==null?void 0:i.value,o=await $ve(r,a);await t().updateProviderConfig(n,{fetchedModels:o,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),De.success(`Models fetched successfully for ${r.name}`)}catch(s){console.error(`Error fetching models for ${r.name}:`,s),t()._setProviderFetchStatus(n,"error")}}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Nt.saveSetting(PB,r),t()._updateGloballyEnabledModelDefinitions(),Le.emit(lr.globalModelSortOrderChanged,{ids:r});const i=t().selectedModelId,s=t().globallyEnabledModelDefinitions.map(o=>o.id),a=new Set(s);if(!i||!a.has(i)){const o=s[0]??null;o!==i&&t().selectModel(o)}},_setProviderFetchStatus:(n,r)=>{e(i=>{i.providerFetchStatus[n]=r}),Le.emit(lr.fetchStatusChanged,{providerId:n,status:r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n}),Le.emit(lr.selectedModelForDetailsChanged,{modelId:n})},getSelectedModel:()=>{const{selectedModelId:n}=t();if(!n)return;const{providerId:r,modelId:i}=rc(n);if(!r||!i)return;const s=t().dbProviderConfigs.find(o=>o.id===r);if(!s)return;const a=t().dbApiKeys.find(o=>o.id===s.apiKeyId);return t().createAiModelConfig(s,i,a==null?void 0:a.value)},getApiKeyForProvider:n=>{var i;const r=t().dbProviderConfigs.find(s=>s.id===n);return(i=t().dbApiKeys.find(s=>s.id===(r==null?void 0:r.apiKeyId)))==null?void 0:i.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(a=>a.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const i=r.type;return(Fve[i]||[]).map(a=>{let o="text->text",l=["text"],c=["text"];return(a.id.includes("dall-e")||a.id.includes("imagen")||a.id.includes("flux")||a.id.includes("stable-diffusion"))&&(o="text->image",l=["text"],c=["image"]),{id:a.id,name:a.name,context_length:4096,architecture:{modality:o,input_modalities:l,output_modalities:c},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:TG[r.type]??[]}})},getAvailableModelListItems:()=>{const{dbProviderConfigs:n}=t(),r=[];return n.forEach(i=>{t().getAllAvailableModelDefsForProvider(i.id).forEach(a=>{var o,l,c;r.push({id:Mv(i.id,a.id),name:a.name,providerId:i.id,providerName:i.name,metadataSummary:{context_length:((o=a.top_provider)==null?void 0:o.context_length)??a.context_length,supported_parameters:a.supported_parameters,input_modalities:(l=a.architecture)==null?void 0:l.input_modalities,output_modalities:(c=a.architecture)==null?void 0:c.output_modalities,pricing:a.pricing,description:a.description}})})}),r},getRegisteredActionHandlers:()=>{const n="providerStore",r=t();return[{eventName:lr.loadInitialDataRequest,handler:r.loadInitialData,storeId:n},{eventName:lr.selectModelRequest,handler:i=>r.selectModel(i.modelId),storeId:n},{eventName:lr.addApiKeyRequest,handler:i=>r.addApiKey(i.name,i.providerId,i.value).then(()=>{}),storeId:n},{eventName:lr.deleteApiKeyRequest,handler:i=>r.deleteApiKey(i.id),storeId:n},{eventName:lr.addProviderConfigRequest,handler:i=>r.addProviderConfig(i).then(()=>{}),storeId:n},{eventName:lr.updateProviderConfigRequest,handler:i=>r.updateProviderConfig(i.id,i.changes),storeId:n},{eventName:lr.deleteProviderConfigRequest,handler:i=>r.deleteProviderConfig(i.id),storeId:n},{eventName:lr.fetchModelsRequest,handler:i=>r.fetchModels(i.providerConfigId),storeId:n},{eventName:lr.setGlobalModelSortOrderRequest,handler:i=>r.setGlobalModelSortOrder(i.ids),storeId:n},{eventName:lr.setEnableApiKeyManagementRequest,handler:i=>r.setEnableApiKeyManagement(i.enabled),storeId:n},{eventName:lr.setSelectedModelForDetailsRequest,handler:i=>r.setSelectedModelForDetails(i.modelId),storeId:n}]}}))),sn={loaded:"settings.loaded",themeChanged:"settings.theme.changed",globalSystemPromptChanged:"settings.global.system.prompt.changed",temperatureChanged:"settings.temperature.changed",maxTokensChanged:"settings.max.tokens.changed",topPChanged:"settings.top.p.changed",topKChanged:"settings.top.k.changed",presencePenaltyChanged:"settings.presence.penalty.changed",frequencyPenaltyChanged:"settings.frequency.penalty.changed",enableAdvancedSettingsChanged:"settings.enable.advanced.settings.changed",enableStreamingMarkdownChanged:"settings.enable.streaming.markdown.changed",enableStreamingCodeBlockParsingChanged:"settings.enable.streaming.code.block.parsing.changed",foldStreamingCodeBlocksChanged:"settings.fold.streaming.code.blocks.changed",foldUserMessagesOnCompletionChanged:"settings.fold.user.messages.on.completion.changed",streamingRenderFpsChanged:"settings.streaming.render.fps.changed",gitUserNameChanged:"settings.git.user.name.changed",gitUserEmailChanged:"settings.git.user.email.changed",toolMaxStepsChanged:"settings.tool.max.steps.changed",prismThemeUrlChanged:"settings.prism.theme.url.changed",autoTitleEnabledChanged:"settings.auto.title.enabled.changed",autoTitleModelIdChanged:"settings.auto.title.model.id.changed",autoTitlePromptMaxLengthChanged:"settings.auto.title.prompt.max.length.changed",autoTitleIncludeFilesChanged:"settings.auto.title.include.files.changed",autoTitleIncludeRulesChanged:"settings.auto.title.include.rules.changed",customFontFamilyChanged:"settings.custom.font.family.changed",customFontSizeChanged:"settings.custom.font.size.changed",chatMaxWidthChanged:"settings.chat.max.width.changed",customThemeColorsChanged:"settings.custom.theme.colors.changed",autoScrollIntervalChanged:"settings.auto.scroll.interval.changed",enableAutoScrollOnStreamChanged:"settings.enable.auto.scroll.on.stream.changed",autoSyncOnStreamCompleteChanged:"settings.auto.sync.on.stream.complete.changed",autoInitializeReposOnStartupChanged:"settings.auto.initialize.repos.on.startup.changed",setThemeRequest:"settings.set.theme.request",setGlobalSystemPromptRequest:"settings.set.global.system.prompt.request",setTemperatureRequest:"settings.set.temperature.request",setMaxTokensRequest:"settings.set.max.tokens.request",setTopPRequest:"settings.set.top.p.request",setTopKRequest:"settings.set.top.k.request",setPresencePenaltyRequest:"settings.set.presence.penalty.request",setFrequencyPenaltyRequest:"settings.set.frequency.penalty.request",setEnableAdvancedSettingsRequest:"settings.set.enable.advanced.settings.request",setEnableStreamingMarkdownRequest:"settings.set.enable.streaming.markdown.request",setEnableStreamingCodeBlockParsingRequest:"settings.set.enable.streaming.code.block.parsing.request",setFoldStreamingCodeBlocksRequest:"settings.set.fold.streaming.code.blocks.request",setFoldUserMessagesOnCompletionRequest:"settings.set.fold.user.messages.on.completion.request",setStreamingRenderFpsRequest:"settings.set.streaming.render.fps.request",setGitUserNameRequest:"settings.set.git.user.name.request",setGitUserEmailRequest:"settings.set.git.user.email.request",setToolMaxStepsRequest:"settings.set.tool.max.steps.request",setPrismThemeUrlRequest:"settings.set.prism.theme.url.request",setAutoTitleEnabledRequest:"settings.set.auto.title.enabled.request",setAutoTitleModelIdRequest:"settings.set.auto.title.model.id.request",setAutoTitlePromptMaxLengthRequest:"settings.set.auto.title.prompt.max.length.request",setAutoTitleIncludeFilesRequest:"settings.set.auto.title.include.files.request",setAutoTitleIncludeRulesRequest:"settings.set.auto.title.include.rules.request",setCustomFontFamilyRequest:"settings.set.custom.font.family.request",setCustomFontSizeRequest:"settings.set.custom.font.size.request",setChatMaxWidthRequest:"settings.set.chat.max.width.request",setCustomThemeColorsRequest:"settings.set.custom.theme.colors.request",setCustomThemeColorRequest:"settings.set.custom.theme.color.request",setAutoScrollIntervalRequest:"settings.set.auto.scroll.interval.request",setEnableAutoScrollOnStreamRequest:"settings.set.enable.auto.scroll.on.stream.request",setAutoSyncOnStreamCompleteRequest:"settings.set.auto.sync.on.stream.complete.request",setAutoInitializeReposOnStartupRequest:"settings.set.auto.initialize.repos.on.startup.request",loadSettingsRequest:"settings.load.settings.request",resetGeneralSettingsRequest:"settings.reset.general.settings.request",resetAssistantSettingsRequest:"settings.reset.assistant.settings.request",resetThemeSettingsRequest:"settings.reset.theme.settings.request"},zve=`You are a helpful AI assistant.

You are knowledgeable, friendly, and always strive to provide accurate and useful information. When you don't know something, you admit it honestly. You communicate clearly and concisely, adapting your tone to be appropriate for the context.

Key principles:
- Be helpful and respectful
- Provide accurate information
- Ask clarifying questions when needed
- Explain complex concepts clearly
- Acknowledge limitations honestly 

When creating gated blocks, if you can infer a filepath for it, you should create it as follow : 
\`\`\`language:relative/path/to/file.ext
The file content would be completely normal
\`\`\`

examples : 
\`\`\`jsx:src/components/button.jsx
export const Button = ({ children, onClick }) => {
  return <button onClick={onClick}>{children}</button>;
};
\`\`\`

\`\`\`markdown:readme.md
---
title: My Project
description: This is a project description
---

# My Project

This is a project description
\`\`\``,WR="system",GR=zve,KR=.7,YR=null,ZR=null,XR=null,JR=0,QR=0,OB=!0,eI=!0,tI=!0,nI=!1,rI=!1,iI=15,DB=null,FB=null,sI=5,aI=null,oI=!0,lI=null,cI=768,uI=!1,dI=!1,fI=null,hI=16,pI="max-w-7xl",mI=null,gI=1e3,yI=!0,LB=!1,BB=!1,mr=Il(Nl((e,t)=>({theme:WR,globalSystemPrompt:GR,temperature:KR,maxTokens:YR,topP:ZR,topK:XR,presencePenalty:JR,frequencyPenalty:QR,enableAdvancedSettings:OB,enableStreamingMarkdown:eI,enableStreamingCodeBlockParsing:tI,foldStreamingCodeBlocks:nI,foldUserMessagesOnCompletion:rI,streamingRenderFPS:iI,gitUserName:DB,gitUserEmail:FB,toolMaxSteps:sI,prismThemeUrl:aI,autoTitleEnabled:oI,autoTitleModelId:lI,autoTitlePromptMaxLength:cI,autoTitleIncludeFiles:uI,autoTitleIncludeRules:dI,customFontFamily:fI,customFontSize:hI,chatMaxWidth:pI,customThemeColors:mI,autoScrollInterval:gI,enableAutoScrollOnStream:yI,autoSyncOnStreamComplete:LB,autoInitializeReposOnStartup:BB,setTheme:n=>{e({theme:n}),Nt.saveSetting("theme",n),Le.emit(sn.themeChanged,{theme:n})},setGlobalSystemPrompt:n=>{e({globalSystemPrompt:n}),Nt.saveSetting("globalSystemPrompt",n),Le.emit(sn.globalSystemPromptChanged,{prompt:n})},setTemperature:n=>{e({temperature:n}),Nt.saveSetting("temperature",n),Le.emit(sn.temperatureChanged,{value:n})},setMaxTokens:n=>{e({maxTokens:n}),Nt.saveSetting("maxTokens",n),Le.emit(sn.maxTokensChanged,{value:n})},setTopP:n=>{e({topP:n}),Nt.saveSetting("topP",n),Le.emit(sn.topPChanged,{value:n})},setTopK:n=>{e({topK:n}),Nt.saveSetting("topK",n),Le.emit(sn.topKChanged,{value:n})},setPresencePenalty:n=>{e({presencePenalty:n}),Nt.saveSetting("presencePenalty",n),Le.emit(sn.presencePenaltyChanged,{value:n})},setFrequencyPenalty:n=>{e({frequencyPenalty:n}),Nt.saveSetting("frequencyPenalty",n),Le.emit(sn.frequencyPenaltyChanged,{value:n})},setEnableAdvancedSettings:n=>{e({enableAdvancedSettings:n}),Nt.saveSetting("enableAdvancedSettings",n),Le.emit(sn.enableAdvancedSettingsChanged,{enabled:n})},setEnableStreamingMarkdown:n=>{e({enableStreamingMarkdown:n}),Nt.saveSetting("enableStreamingMarkdown",n),Le.emit(sn.enableStreamingMarkdownChanged,{enabled:n})},setEnableStreamingCodeBlockParsing:n=>{e({enableStreamingCodeBlockParsing:n}),Nt.saveSetting("enableStreamingCodeBlockParsing",n),Le.emit(sn.enableStreamingCodeBlockParsingChanged,{enabled:n})},setFoldStreamingCodeBlocks:n=>{e({foldStreamingCodeBlocks:n}),Nt.saveSetting("foldStreamingCodeBlocks",n),Le.emit(sn.foldStreamingCodeBlocksChanged,{fold:n})},setFoldUserMessagesOnCompletion:n=>{e({foldUserMessagesOnCompletion:n}),Nt.saveSetting("foldUserMessagesOnCompletion",n),Le.emit(sn.foldUserMessagesOnCompletionChanged,{fold:n})},setStreamingRenderFPS:n=>{const r=Math.max(3,Math.min(60,n));e({streamingRenderFPS:r}),Nt.saveSetting("streamingRenderFPS",r),Le.emit(sn.streamingRenderFpsChanged,{fps:r})},setGitUserName:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserName:r}),Nt.saveSetting("gitUserName",r),Le.emit(sn.gitUserNameChanged,{name:r})},setGitUserEmail:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserEmail:r}),Nt.saveSetting("gitUserEmail",r),Le.emit(sn.gitUserEmailChanged,{email:r})},setToolMaxSteps:n=>{const r=Math.max(1,Math.min(20,n));e({toolMaxSteps:r}),Nt.saveSetting("toolMaxSteps",r),Le.emit(sn.toolMaxStepsChanged,{steps:r})},setPrismThemeUrl:n=>{const r=(n==null?void 0:n.trim())||null;e({prismThemeUrl:r}),Nt.saveSetting("prismThemeUrl",r),Le.emit(sn.prismThemeUrlChanged,{url:r})},setAutoTitleEnabled:n=>{e({autoTitleEnabled:n}),Nt.saveSetting("autoTitleEnabled",n),Le.emit(sn.autoTitleEnabledChanged,{enabled:n})},setAutoTitleModelId:n=>{e({autoTitleModelId:n}),Nt.saveSetting("autoTitleModelId",n),Le.emit(sn.autoTitleModelIdChanged,{modelId:n})},setAutoTitlePromptMaxLength:n=>{const r=Math.max(100,Math.min(4e3,n));e({autoTitlePromptMaxLength:r}),Nt.saveSetting("autoTitlePromptMaxLength",r),Le.emit(sn.autoTitlePromptMaxLengthChanged,{length:r})},setAutoTitleIncludeFiles:n=>{e({autoTitleIncludeFiles:n}),Nt.saveSetting("autoTitleIncludeFiles",n),Le.emit(sn.autoTitleIncludeFilesChanged,{include:n})},setAutoTitleIncludeRules:n=>{e({autoTitleIncludeRules:n}),Nt.saveSetting("autoTitleIncludeRules",n),Le.emit(sn.autoTitleIncludeRulesChanged,{include:n})},setCustomFontFamily:n=>{const r=(n==null?void 0:n.trim())||null;e({customFontFamily:r}),Nt.saveSetting("customFontFamily",r),Le.emit(sn.customFontFamilyChanged,{fontFamily:r})},setCustomFontSize:n=>{const r=n===null?null:Math.max(10,Math.min(24,n));e({customFontSize:r}),Nt.saveSetting("customFontSize",r),Le.emit(sn.customFontSizeChanged,{fontSize:r})},setChatMaxWidth:n=>{e({chatMaxWidth:n}),Nt.saveSetting("chatMaxWidth",n),Le.emit(sn.chatMaxWidthChanged,{maxWidth:n})},setCustomThemeColors:n=>{e({customThemeColors:n}),Nt.saveSetting("customThemeColors",n),Le.emit(sn.customThemeColorsChanged,{colors:n})},setCustomThemeColor:(n,r)=>{e(s=>{const o={...s.customThemeColors??{}};r===null||r.trim()===""?delete o[n]:o[n]=r.trim(),s.customThemeColors=Object.keys(o).length>0?o:null});const i=t().customThemeColors;Nt.saveSetting("customThemeColors",i),Le.emit(sn.customThemeColorsChanged,{colors:i})},setAutoScrollInterval:n=>{const r=Math.max(50,n);e({autoScrollInterval:r}),Nt.saveSetting("autoScrollInterval",r),Le.emit(sn.autoScrollIntervalChanged,{interval:r})},setEnableAutoScrollOnStream:n=>{e({enableAutoScrollOnStream:n}),Nt.saveSetting("enableAutoScrollOnStream",n),Le.emit(sn.enableAutoScrollOnStreamChanged,{enabled:n})},setAutoSyncOnStreamComplete:n=>{e({autoSyncOnStreamComplete:n}),Nt.saveSetting("autoSyncOnStreamComplete",n),Le.emit(sn.autoSyncOnStreamCompleteChanged,{enabled:n})},setAutoInitializeReposOnStartup:n=>{e({autoInitializeReposOnStartup:n}),Nt.saveSetting("autoInitializeReposOnStartup",n),Le.emit(sn.autoInitializeReposOnStartupChanged,{enabled:n})},loadSettings:async()=>{try{const[n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,_,S,C,E,A,R,N,M,P,L,O,V,F,J,U]=await Promise.all([Nt.loadSetting("theme",WR),Nt.loadSetting("temperature",KR),Nt.loadSetting("maxTokens",YR),Nt.loadSetting("topP",ZR),Nt.loadSetting("topK",XR),Nt.loadSetting("presencePenalty",JR),Nt.loadSetting("frequencyPenalty",QR),Nt.loadSetting("globalSystemPrompt",GR),Nt.loadSetting("enableAdvancedSettings",OB),Nt.loadSetting("enableStreamingMarkdown",eI),Nt.loadSetting("enableStreamingCodeBlockParsing",tI),Nt.loadSetting("foldStreamingCodeBlocks",nI),Nt.loadSetting("foldUserMessagesOnCompletion",rI),Nt.loadSetting("streamingRenderFPS",iI),Nt.loadSetting("gitUserName",DB),Nt.loadSetting("gitUserEmail",FB),Nt.loadSetting("toolMaxSteps",sI),Nt.loadSetting("prismThemeUrl",aI),Nt.loadSetting("autoTitleEnabled",oI),Nt.loadSetting("autoTitleModelId",lI),Nt.loadSetting("autoTitlePromptMaxLength",cI),Nt.loadSetting("autoTitleIncludeFiles",uI),Nt.loadSetting("autoTitleIncludeRules",dI),Nt.loadSetting("customFontFamily",fI),Nt.loadSetting("customFontSize",hI),Nt.loadSetting("chatMaxWidth",pI),Nt.loadSetting("customThemeColors",mI),Nt.loadSetting("autoScrollInterval",gI),Nt.loadSetting("enableAutoScrollOnStream",yI),Nt.loadSetting("autoSyncOnStreamComplete",LB),Nt.loadSetting("autoInitializeReposOnStartup",BB)]),G={theme:n,temperature:r,maxTokens:i,topP:s,topK:a,presencePenalty:o,frequencyPenalty:l,globalSystemPrompt:c,enableAdvancedSettings:u,enableStreamingMarkdown:d,enableStreamingCodeBlockParsing:h,foldStreamingCodeBlocks:m,foldUserMessagesOnCompletion:y,streamingRenderFPS:b,gitUserName:v,gitUserEmail:x,toolMaxSteps:_,prismThemeUrl:S,autoTitleEnabled:C,autoTitleModelId:E,autoTitlePromptMaxLength:A,autoTitleIncludeFiles:R,autoTitleIncludeRules:N,customFontFamily:M,customFontSize:P,chatMaxWidth:L,customThemeColors:O,autoScrollInterval:V,enableAutoScrollOnStream:F,autoSyncOnStreamComplete:J,autoInitializeReposOnStartup:U};e(G),Le.emit(sn.loaded,{settings:G})}catch(n){console.error("SettingsStore: Error loading settings",n),Le.emit(sn.loaded,{settings:t()})}},resetGeneralSettings:async()=>{try{t().setEnableStreamingMarkdown(eI),t().setEnableStreamingCodeBlockParsing(tI),t().setFoldStreamingCodeBlocks(nI),t().setFoldUserMessagesOnCompletion(rI),t().setStreamingRenderFPS(iI),t().setAutoScrollInterval(gI),t().setEnableAutoScrollOnStream(yI),De.success("Streaming & Display settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting general settings",n),De.error("Failed to reset general settings.")}},resetAssistantSettings:async()=>{try{t().setGlobalSystemPrompt(GR),t().setTemperature(KR),t().setMaxTokens(YR),t().setTopP(ZR),t().setTopK(XR),t().setPresencePenalty(JR),t().setFrequencyPenalty(QR),t().setToolMaxSteps(sI),t().setAutoTitleEnabled(oI),t().setAutoTitleModelId(lI),t().setAutoTitlePromptMaxLength(cI),t().setAutoTitleIncludeFiles(uI),t().setAutoTitleIncludeRules(dI),De.success("Assistant settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting assistant settings",n),De.error("Failed to reset assistant settings.")}},resetThemeSettings:async()=>{try{t().setTheme(WR),t().setPrismThemeUrl(aI),t().setCustomFontFamily(fI),t().setCustomFontSize(hI),t().setChatMaxWidth(pI),t().setCustomThemeColors(mI),De.success("Theme settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting theme settings",n),De.error("Failed to reset theme settings.")}},getRegisteredActionHandlers:()=>{const n="settingsStore",r=t();return[{eventName:sn.setThemeRequest,handler:i=>r.setTheme(i.theme),storeId:n},{eventName:sn.setGlobalSystemPromptRequest,handler:i=>r.setGlobalSystemPrompt(i.prompt),storeId:n},{eventName:sn.setTemperatureRequest,handler:i=>r.setTemperature(i.value),storeId:n},{eventName:sn.setMaxTokensRequest,handler:i=>r.setMaxTokens(i.value),storeId:n},{eventName:sn.setTopPRequest,handler:i=>r.setTopP(i.value),storeId:n},{eventName:sn.setTopKRequest,handler:i=>r.setTopK(i.value),storeId:n},{eventName:sn.setPresencePenaltyRequest,handler:i=>r.setPresencePenalty(i.value),storeId:n},{eventName:sn.setFrequencyPenaltyRequest,handler:i=>r.setFrequencyPenalty(i.value),storeId:n},{eventName:sn.setEnableAdvancedSettingsRequest,handler:i=>r.setEnableAdvancedSettings(i.enabled),storeId:n},{eventName:sn.setEnableStreamingMarkdownRequest,handler:i=>r.setEnableStreamingMarkdown(i.enabled),storeId:n},{eventName:sn.setEnableStreamingCodeBlockParsingRequest,handler:i=>r.setEnableStreamingCodeBlockParsing(i.enabled),storeId:n},{eventName:sn.setFoldStreamingCodeBlocksRequest,handler:i=>r.setFoldStreamingCodeBlocks(i.fold),storeId:n},{eventName:sn.setFoldUserMessagesOnCompletionRequest,handler:i=>r.setFoldUserMessagesOnCompletion(i.fold),storeId:n},{eventName:sn.setStreamingRenderFpsRequest,handler:i=>r.setStreamingRenderFPS(i.fps),storeId:n},{eventName:sn.setGitUserNameRequest,handler:i=>r.setGitUserName(i.name),storeId:n},{eventName:sn.setGitUserEmailRequest,handler:i=>r.setGitUserEmail(i.email),storeId:n},{eventName:sn.setToolMaxStepsRequest,handler:i=>r.setToolMaxSteps(i.steps),storeId:n},{eventName:sn.setPrismThemeUrlRequest,handler:i=>r.setPrismThemeUrl(i.url),storeId:n},{eventName:sn.setAutoTitleEnabledRequest,handler:i=>r.setAutoTitleEnabled(i.enabled),storeId:n},{eventName:sn.setAutoTitleModelIdRequest,handler:i=>r.setAutoTitleModelId(i.modelId),storeId:n},{eventName:sn.setAutoTitlePromptMaxLengthRequest,handler:i=>r.setAutoTitlePromptMaxLength(i.length),storeId:n},{eventName:sn.setAutoTitleIncludeFilesRequest,handler:i=>r.setAutoTitleIncludeFiles(i.include),storeId:n},{eventName:sn.setAutoTitleIncludeRulesRequest,handler:i=>r.setAutoTitleIncludeRules(i.include),storeId:n},{eventName:sn.setCustomFontFamilyRequest,handler:i=>r.setCustomFontFamily(i.fontFamily),storeId:n},{eventName:sn.setCustomFontSizeRequest,handler:i=>r.setCustomFontSize(i.fontSize),storeId:n},{eventName:sn.setChatMaxWidthRequest,handler:i=>r.setChatMaxWidth(i.maxWidth),storeId:n},{eventName:sn.setCustomThemeColorsRequest,handler:i=>r.setCustomThemeColors(i.colors),storeId:n},{eventName:sn.setCustomThemeColorRequest,handler:i=>r.setCustomThemeColor(i.colorKey,i.value),storeId:n},{eventName:sn.setAutoScrollIntervalRequest,handler:i=>r.setAutoScrollInterval(i.interval),storeId:n},{eventName:sn.setEnableAutoScrollOnStreamRequest,handler:i=>r.setEnableAutoScrollOnStream(i.enabled),storeId:n},{eventName:sn.setAutoSyncOnStreamCompleteRequest,handler:i=>r.setAutoSyncOnStreamComplete(i.enabled),storeId:n},{eventName:sn.setAutoInitializeReposOnStartupRequest,handler:i=>r.setAutoInitializeReposOnStartup(i.enabled),storeId:n},{eventName:sn.loadSettingsRequest,handler:()=>r.loadSettings(),storeId:n},{eventName:sn.resetGeneralSettingsRequest,handler:()=>r.resetGeneralSettings(),storeId:n},{eventName:sn.resetAssistantSettingsRequest,handler:()=>r.resetAssistantSettings(),storeId:n},{eventName:sn.resetThemeSettingsRequest,handler:()=>r.resetThemeSettings(),storeId:n}]}})));async function eC(e,t){const n=Qo.getState().getMiddlewareForHook,r=n(e);let i=t;for(const s of r)try{const a=await s.callback(i);if(a===!1)return console.log(`Middleware ${s.modId} cancelled action for hook ${e}`),!1;a&&typeof a=="object"&&(i=a)}catch(a){return console.error(`Middleware error in mod ${s.modId} for hook ${e}:`,a),!1}return i}function Uve(){const e=Ln.getState(),t=Ir.getState(),n=mr.getState(),{providerId:r}=rc(t.selectedModelId),i={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme,gitUserName:n.gitUserName,gitUserEmail:n.gitUserEmail};return Object.freeze(i)}function qve(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function $B(e){try{const t=e.type||"application/octet-stream",n=ix(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:qve(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),De.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function P3(e){return e.flatMap(t=>{var i,s,a;const n=[],r=t.prompt;if(r){const o=[];r.content&&o.push({type:"text",text:r.content}),(i=r.metadata)!=null&&i.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{o.push({type:"text",text:`[User attached file: ${l.name}]`})}),o.length>0&&n.push({role:"user",content:o})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(s=t.metadata)!=null&&s.toolCalls&&Array.isArray(t.metadata.toolCalls)){const o=[];t.metadata.toolCalls.forEach(l=>{try{const c=JSON.parse(l);c&&c.type==="tool-call"&&c.toolCallId&&c.toolName&&c.args!==void 0?o.push(c):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(c){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,c)}}),o.length>0&&n.push({role:"assistant",content:o})}if((a=t.metadata)!=null&&a.toolResults&&Array.isArray(t.metadata.toolResults)){const o=[];t.metadata.toolResults.forEach(l=>{try{const c=JSON.parse(l);c&&c.type==="tool-result"&&c.toolCallId&&c.toolName&&c.result!==void 0?o.push(c):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(c){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,c)}}),o.length>0&&n.push({role:"tool",content:o})}return n})}const zB=e=>Symbol.iterator in e,UB=e=>"entries"in e,qB=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[i,s]of n)if(!Object.is(s,r.get(i)))return!1;return!0},Vve=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let i=n.next(),s=r.next();for(;!i.done&&!s.done;){if(!Object.is(i.value,s.value))return!1;i=n.next(),s=r.next()}return!!i.done&&!!s.done};function Hve(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!zB(e)||!zB(t)?qB({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):UB(e)&&UB(t)?qB(e,t):Vve(e,t)}function Tn(e){const t=lt.useRef(void 0);return n=>{const r=e(n);return Hve(t.current,r)?t.current:t.current=r}}var m0=(e=>(e.PROMPT_TURN_FINALIZE="middleware.prompt.turnFinalize",e.INTERACTION_BEFORE_START="middleware.interaction.beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware.interaction.processChunk",e))(m0||{});const Bn={initialized:"prompt.state.initialized",parameterChanged:"prompt.state.parameter.changed",transientParametersReset:"prompt.state.transient.parameters.reset",inputTextStateChanged:"prompt.state.input.text.changed",submitted:"prompt.state.submitted",setModelIdRequest:"prompt.state.set.model.id.request",setTemperatureRequest:"prompt.state.set.temperature.request",setMaxTokensRequest:"prompt.state.set.max.tokens.request",setTopPRequest:"prompt.state.set.top.p.request",setTopKRequest:"prompt.state.set.top.k.request",setPresencePenaltyRequest:"prompt.state.set.presence.penalty.request",setFrequencyPenaltyRequest:"prompt.state.set.frequency.penalty.request",setReasoningEnabledRequest:"prompt.state.set.reasoning.enabled.request",setWebSearchEnabledRequest:"prompt.state.set.web.search.enabled.request",setImageGenerationEnabledRequest:"prompt.state.set.image.generation.enabled.request",setStructuredOutputJsonRequest:"prompt.state.set.structured.output.json.request",initializePromptStateRequest:"prompt.state.initialize.prompt.state.request",resetTransientParametersRequest:"prompt.state.reset.transient.parameters.request",inputChanged:"prompt.inputChanged"},Hl=(e,t)=>{Le.emit(Bn.parameterChanged,{params:{[e]:t}})},_o=Il(Nl((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,imageGenerationEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),Hl("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),Hl("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),Hl("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),Hl("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),Hl("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),Hl("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),Hl("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),Hl("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),Hl("webSearchEnabled",n))},setImageGenerationEnabled:n=>{t().imageGenerationEnabled!==n&&(e({imageGenerationEnabled:n}),Hl("imageGenerationEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),Hl("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),i={};let s=!1;r.modelId!==n.modelId&&(i.modelId=n.modelId,s=!0),r.temperature!==n.temperature&&(i.temperature=n.temperature,s=!0),r.maxTokens!==n.maxTokens&&(i.maxTokens=n.maxTokens,s=!0),r.topP!==n.topP&&(i.topP=n.topP,s=!0),r.topK!==n.topK&&(i.topK=n.topK,s=!0),r.presencePenalty!==n.presencePenalty&&(i.presencePenalty=n.presencePenalty,s=!0),r.frequencyPenalty!==n.frequencyPenalty&&(i.frequencyPenalty=n.frequencyPenalty,s=!0),s&&(e(i),Le.emit(Bn.parameterChanged,{params:i})),Le.emit(Bn.initialized,{state:{...t()}})},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let i=!1;n.temperature!==null&&(r.temperature=null,i=!0),n.maxTokens!==null&&(r.maxTokens=null,i=!0),n.topP!==null&&(r.topP=null,i=!0),n.topK!==null&&(r.topK=null,i=!0),n.presencePenalty!==null&&(r.presencePenalty=null,i=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,i=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,i=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,i=!0),n.imageGenerationEnabled!==null&&(r.imageGenerationEnabled=null,i=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,i=!0),i&&(e(r),Le.emit(Bn.parameterChanged,{params:r})),Le.emit(Bn.transientParametersReset,void 0)},getRegisteredActionHandlers:()=>{const n="promptStateStore",r=t();return[{eventName:Bn.setModelIdRequest,handler:i=>r.setModelId(i.id),storeId:n},{eventName:Bn.setTemperatureRequest,handler:i=>r.setTemperature(i.value),storeId:n},{eventName:Bn.setMaxTokensRequest,handler:i=>r.setMaxTokens(i.value),storeId:n},{eventName:Bn.setTopPRequest,handler:i=>r.setTopP(i.value),storeId:n},{eventName:Bn.setTopKRequest,handler:i=>r.setTopK(i.value),storeId:n},{eventName:Bn.setPresencePenaltyRequest,handler:i=>r.setPresencePenalty(i.value),storeId:n},{eventName:Bn.setFrequencyPenaltyRequest,handler:i=>r.setFrequencyPenalty(i.value),storeId:n},{eventName:Bn.setReasoningEnabledRequest,handler:i=>r.setReasoningEnabled(i.enabled),storeId:n},{eventName:Bn.setWebSearchEnabledRequest,handler:i=>r.setWebSearchEnabled(i.enabled),storeId:n},{eventName:Bn.setImageGenerationEnabledRequest,handler:i=>r.setImageGenerationEnabled(i.enabled),storeId:n},{eventName:Bn.setStructuredOutputJsonRequest,handler:i=>r.setStructuredOutputJson(i.json),storeId:n},{eventName:Bn.initializePromptStateRequest,handler:i=>r.initializePromptState(i.effectiveSettings),storeId:n},{eventName:Bn.resetTransientParametersRequest,handler:()=>r.resetTransientParameters(),storeId:n}]}}))),Wve=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message...",inputAreaRef:i,selectedItemId:s,selectedItemType:a})=>{const[o,l]=T.useState(!1),[c,u]=T.useState(!1),d=Qo(Tn(E=>E.promptControls)),h=Ln(Tn(E=>E.status==="streaming")),{attachedFilesMetadata:m,clearAttachedFiles:y}=qf(Tn(E=>({attachedFilesMetadata:E.attachedFilesMetadata,clearAttachedFiles:E.clearAttachedFiles}))),b=_o(E=>E.modelId);T.useEffect(()=>{a==="conversation"&&s&&requestAnimationFrame(()=>{var E;(E=i.current)==null||E.focus()})},[s,a,i]);const v=T.useMemo(()=>Object.values(d),[d]),x=T.useMemo(()=>v.filter(E=>E.renderer),[v]),_=T.useMemo(()=>v.filter(E=>E.triggerRenderer),[v]),S=T.useCallback(async()=>{var N,M;const A=(((N=i==null?void 0:i.current)==null?void 0:N.getValue())??"").trim(),R=qf.getState().attachedFilesMetadata;if(!(!A&&R.length===0)&&!(h||o)){l(!0);try{let P={},L={};for(const U of v){if(U.getParameters){const G=await U.getParameters();G&&(P={...P,...G})}if(U.getMetadata){const G=await U.getMetadata();G&&(L={...L,...G})}}R.length>0&&(L.attachedFiles=[...R]),!L.modelId&&b&&(L.modelId=b);const O=v.find(U=>U.id==="core-rules-tags");if(O&&L.activeRuleIds&&L.activeTagIds){const U=[],G=new Set(L.activeRuleIds);L.activeTagIds.forEach($=>{O.getRulesForTag($).forEach(ne=>G.add(ne.id))}),G.forEach($=>{const ne=O.getRuleById($);ne&&U.push({type:ne.type,content:ne.content,sourceRuleId:ne.id})}),L.effectiveRulesContent=U}let V={id:Xs(),content:A,parameters:P,metadata:L};Le.emit(Bn.submitted,{turnData:V});const F=await eC(m0.PROMPT_TURN_FINALIZE,{turnData:V});if(F===!1){console.log("Prompt submission cancelled by middleware."),l(!1);return}const J=F&&typeof F=="object"?F.turnData:V;await t(J),y(),v.forEach(U=>{U.clearOnSubmit&&U.clearOnSubmit()}),(M=i.current)==null||M.clearValue(),u(!1)}catch(P){console.error("Error during prompt submission:",P),De.error(`Failed to send message: ${P instanceof Error?P.message:String(P)}`)}finally{l(!1)}}},[i,h,o,v,t,y,b]),C=T.useCallback(E=>{u(E.trim().length>0)},[]);return p.jsxs("div",{className:ft("p-2 md:p-4 space-y-2 md:space-y-3",n),children:[x.length>0&&p.jsx(WL,{controls:x,area:"panel",className:"flex flex-wrap gap-1 md:gap-2 items-start mb-1 md:mb-2"}),p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsx(e,{ref:i,onSubmit:S,disabled:h||o,placeholder:r,onValueChange:C,className:"flex-grow"}),p.jsx(Tt,{type:"button",size:"icon",onClick:S,disabled:h||o||!c&&m.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:o?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(kme,{className:"h-4 w-4"})})]})," ",p.jsx(WL,{controls:_,area:"trigger",className:"flex items-center gap-1 flex-wrap flex-shrink-0 mt-1 md:mt-2"})]})};function Vt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Gve(e,t){const n=T.createContext(t),r=s=>{const{children:a,...o}=s,l=T.useMemo(()=>o,Object.values(o));return p.jsx(n.Provider,{value:l,children:a})};r.displayName=e+"Provider";function i(s){const a=T.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,i]}function Ds(e,t=[]){let n=[];function r(s,a){const o=T.createContext(a),l=n.length;n=[...n,a];const c=d=>{var x;const{scope:h,children:m,...y}=d,b=((x=h==null?void 0:h[e])==null?void 0:x[l])||o,v=T.useMemo(()=>y,Object.values(y));return p.jsx(b.Provider,{value:v,children:m})};c.displayName=s+"Provider";function u(d,h){var b;const m=((b=h==null?void 0:h[e])==null?void 0:b[l])||o,y=T.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(a=>T.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[r,Kve(i,...t)]}function Kve(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...o,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Yve(e){const t=Zve(e),n=T.forwardRef((r,i)=>{const{children:s,...a}=r,o=T.Children.toArray(s),l=o.find(Jve);if(l){const c=l.props.children,u=o.map(d=>d===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...a,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return p.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function Zve(e){const t=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const a=exe(i),o=Qve(s,i.props);return i.type!==T.Fragment&&(o.ref=r?Ko(r,a):a),T.cloneElement(i,o)}return T.Children.count(i)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Xve=Symbol("radix.slottable");function Jve(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Xve}function Qve(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function exe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var txe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nr=txe.reduce((e,t)=>{const n=Yve(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function AG(e,t){e&&Vo.flushSync(()=>e.dispatchEvent(t))}function xi(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function yP(e,t=globalThis==null?void 0:globalThis.document){const n=xi(e);T.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var nxe="DismissableLayer",O3="dismissableLayer.update",rxe="dismissableLayer.pointerDownOutside",ixe="dismissableLayer.focusOutside",VB,RG=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Kk=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=T.useContext(RG),[u,d]=T.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=T.useState({}),y=En(t,R=>d(R)),b=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(v),_=u?b.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,C=_>=x,E=oxe(R=>{const N=R.target,M=[...c.branches].some(P=>P.contains(N));!C||M||(i==null||i(R),a==null||a(R),R.defaultPrevented||o==null||o())},h),A=lxe(R=>{const N=R.target;[...c.branches].some(P=>P.contains(N))||(s==null||s(R),a==null||a(R),R.defaultPrevented||o==null||o())},h);return yP(R=>{_===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&o&&(R.preventDefault(),o()))},h),T.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(VB=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),HB(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=VB)}},[u,h,n,c]),T.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),HB())},[u,c]),T.useEffect(()=>{const R=()=>m({});return document.addEventListener(O3,R),()=>document.removeEventListener(O3,R)},[]),p.jsx(nr.div,{...l,ref:y,style:{pointerEvents:S?C?"auto":"none":void 0,...e.style},onFocusCapture:Vt(e.onFocusCapture,A.onFocusCapture),onBlurCapture:Vt(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Vt(e.onPointerDownCapture,E.onPointerDownCapture)})});Kk.displayName=nxe;var sxe="DismissableLayerBranch",axe=T.forwardRef((e,t)=>{const n=T.useContext(RG),r=T.useRef(null),i=En(t,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(nr.div,{...e,ref:i})});axe.displayName=sxe;function oxe(e,t=globalThis==null?void 0:globalThis.document){const n=xi(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let l=function(){IG(rxe,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function lxe(e,t=globalThis==null?void 0:globalThis.document){const n=xi(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&IG(ixe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function HB(){const e=new CustomEvent(O3);document.dispatchEvent(e)}function IG(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?AG(i,s):i.dispatchEvent(s)}var Yi=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},cxe=sH[" useId ".trim().toString()]||(()=>{}),uxe=0;function Ys(e){const[t,n]=T.useState(cxe());return Yi(()=>{n(r=>r??String(uxe++))},[e]),t?`radix-${t}`:""}const dxe=["top","right","bottom","left"],Gf=Math.min,qo=Math.max,tC=Math.round,V_=Math.floor,tu=e=>({x:e,y:e}),fxe={left:"right",right:"left",bottom:"top",top:"bottom"},hxe={start:"end",end:"start"};function D3(e,t,n){return qo(e,Gf(t,n))}function bd(e,t){return typeof e=="function"?e(t):e}function vd(e){return e.split("-")[0]}function ty(e){return e.split("-")[1]}function bP(e){return e==="x"?"y":"x"}function vP(e){return e==="y"?"height":"width"}function Kf(e){return["top","bottom"].includes(vd(e))?"y":"x"}function xP(e){return bP(Kf(e))}function pxe(e,t,n){n===void 0&&(n=!1);const r=ty(e),i=xP(e),s=vP(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=nC(a)),[a,nC(a)]}function mxe(e){const t=nC(e);return[F3(e),t,F3(t)]}function F3(e){return e.replace(/start|end/g,t=>hxe[t])}function gxe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:a;default:return[]}}function yxe(e,t,n,r){const i=ty(e);let s=gxe(vd(e),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(F3)))),s}function nC(e){return e.replace(/left|right|bottom|top/g,t=>fxe[t])}function bxe(e){return{top:0,right:0,bottom:0,left:0,...e}}function NG(e){return typeof e!="number"?bxe(e):{top:e,right:e,bottom:e,left:e}}function rC(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function WB(e,t,n){let{reference:r,floating:i}=e;const s=Kf(t),a=xP(t),o=vP(a),l=vd(t),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(ty(t)){case"start":m[a]-=h*(n&&c?-1:1);break;case"end":m[a]+=h*(n&&c?-1:1);break}return m}const vxe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=WB(c,r,l),h=r,m={},y=0;for(let b=0;b<o.length;b++){const{name:v,fn:x}=o[b],{x:_,y:S,data:C,reset:E}=await x({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:m,rects:c,platform:a,elements:{reference:e,floating:t}});u=_??u,d=S??d,m={...m,[v]:{...m[v],...C}},E&&y<=50&&(y++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(c=E.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:u,y:d}=WB(c,h,l)),b=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:m}};async function lx(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=bd(t,e),y=NG(m),v=o[h?d==="floating"?"reference":"floating":d],x=rC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),C=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},E=rC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:S,strategy:l}):_);return{top:(x.top-E.top+y.top)/C.y,bottom:(E.bottom-x.bottom+y.bottom)/C.y,left:(x.left-E.left+y.left)/C.x,right:(E.right-x.right+y.right)/C.x}}const xxe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=bd(e,t)||{};if(c==null)return{};const d=NG(u),h={x:n,y:r},m=xP(i),y=vP(m),b=await a.getDimensions(c),v=m==="y",x=v?"top":"left",_=v?"bottom":"right",S=v?"clientHeight":"clientWidth",C=s.reference[y]+s.reference[m]-h[m]-s.floating[y],E=h[m]-s.reference[m],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let R=A?A[S]:0;(!R||!await(a.isElement==null?void 0:a.isElement(A)))&&(R=o.floating[S]||s.floating[y]);const N=C/2-E/2,M=R/2-b[y]/2-1,P=Gf(d[x],M),L=Gf(d[_],M),O=P,V=R-b[y]-L,F=R/2-b[y]/2+N,J=D3(O,F,V),U=!l.arrow&&ty(i)!=null&&F!==J&&s.reference[y]/2-(F<O?P:L)-b[y]/2<0,G=U?F<O?F-O:F-V:0;return{[m]:h[m]+G,data:{[m]:J,centerOffset:F-J-G,...U&&{alignmentOffset:G}},reset:U}}}),wxe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...v}=bd(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const x=vd(i),_=Kf(o),S=vd(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=h||(S||!b?[nC(o)]:mxe(o)),A=y!=="none";!h&&A&&E.push(...yxe(o,b,y,C));const R=[o,...E],N=await lx(t,v),M=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&M.push(N[x]),d){const F=pxe(i,a,C);M.push(N[F[0]],N[F[1]])}if(P=[...P,{placement:i,overflows:M}],!M.every(F=>F<=0)){var L,O;const F=(((L=s.flip)==null?void 0:L.index)||0)+1,J=R[F];if(J)return{data:{index:F,overflows:P},reset:{placement:J}};let U=(O=P.filter(G=>G.overflows[0]<=0).sort((G,$)=>G.overflows[1]-$.overflows[1])[0])==null?void 0:O.placement;if(!U)switch(m){case"bestFit":{var V;const G=(V=P.filter($=>{if(A){const ne=Kf($.placement);return ne===_||ne==="y"}return!0}).map($=>[$.placement,$.overflows.filter(ne=>ne>0).reduce((ne,H)=>ne+H,0)]).sort(($,ne)=>$[1]-ne[1])[0])==null?void 0:V[0];G&&(U=G);break}case"initialPlacement":U=o;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function GB(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function KB(e){return dxe.some(t=>e[t]>=0)}const _xe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=bd(e,t);switch(r){case"referenceHidden":{const s=await lx(t,{...i,elementContext:"reference"}),a=GB(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:KB(a)}}}case"escaped":{const s=await lx(t,{...i,altBoundary:!0}),a=GB(s,n.floating);return{data:{escapedOffsets:a,escaped:KB(a)}}}default:return{}}}}};async function Sxe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=vd(n),o=ty(n),l=Kf(n)==="y",c=["left","top"].includes(a)?-1:1,u=s&&l?-1:1,d=bd(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof y=="number"&&(m=o==="end"?y*-1:y),l?{x:m*u,y:h*c}:{x:h*c,y:m*u}}const Cxe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=t,l=await Sxe(t,e);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},kxe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:v=>{let{x,y:_}=v;return{x,y:_}}},...l}=bd(e,t),c={x:n,y:r},u=await lx(t,l),d=Kf(vd(i)),h=bP(d);let m=c[h],y=c[d];if(s){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",_=m+u[v],S=m-u[x];m=D3(_,m,S)}if(a){const v=d==="y"?"top":"left",x=d==="y"?"bottom":"right",_=y+u[v],S=y-u[x];y=D3(_,y,S)}const b=o.fn({...t,[h]:m,[d]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[h]:s,[d]:a}}}}}},Exe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=bd(e,t),u={x:n,y:r},d=Kf(i),h=bP(d);let m=u[h],y=u[d];const b=bd(o,t),v=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const S=h==="y"?"height":"width",C=s.reference[h]-s.floating[S]+v.mainAxis,E=s.reference[h]+s.reference[S]-v.mainAxis;m<C?m=C:m>E&&(m=E)}if(c){var x,_;const S=h==="y"?"width":"height",C=["top","left"].includes(vd(i)),E=s.reference[d]-s.floating[S]+(C&&((x=a.offset)==null?void 0:x[d])||0)+(C?0:v.crossAxis),A=s.reference[d]+s.reference[S]+(C?0:((_=a.offset)==null?void 0:_[d])||0)-(C?v.crossAxis:0);y<E?y=E:y>A&&(y=A)}return{[h]:m,[d]:y}}}},Txe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:l=()=>{},...c}=bd(e,t),u=await lx(t,c),d=vd(i),h=ty(i),m=Kf(i)==="y",{width:y,height:b}=s.floating;let v,x;d==="top"||d==="bottom"?(v=d,x=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(x=d,v=h==="end"?"top":"bottom");const _=b-u.top-u.bottom,S=y-u.left-u.right,C=Gf(b-u[v],_),E=Gf(y-u[x],S),A=!t.middlewareData.shift;let R=C,N=E;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=_),A&&!h){const P=qo(u.left,0),L=qo(u.right,0),O=qo(u.top,0),V=qo(u.bottom,0);m?N=y-2*(P!==0||L!==0?P+L:qo(u.left,u.right)):R=b-2*(O!==0||V!==0?O+V:qo(u.top,u.bottom))}await l({...t,availableWidth:N,availableHeight:R});const M=await a.getDimensions(o.floating);return y!==M.width||b!==M.height?{reset:{rects:!0}}:{}}}};function Yk(){return typeof window<"u"}function ny(e){return MG(e)?(e.nodeName||"").toLowerCase():"#document"}function Wo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function bu(e){var t;return(t=(MG(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function MG(e){return Yk()?e instanceof Node||e instanceof Wo(e).Node:!1}function uc(e){return Yk()?e instanceof Element||e instanceof Wo(e).Element:!1}function du(e){return Yk()?e instanceof HTMLElement||e instanceof Wo(e).HTMLElement:!1}function YB(e){return!Yk()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Wo(e).ShadowRoot}function Sw(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=dc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Axe(e){return["table","td","th"].includes(ny(e))}function Zk(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function wP(e){const t=_P(),n=uc(e)?dc(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Rxe(e){let t=Yf(e);for(;du(t)&&!g0(t);){if(wP(t))return t;if(Zk(t))return null;t=Yf(t)}return null}function _P(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function g0(e){return["html","body","#document"].includes(ny(e))}function dc(e){return Wo(e).getComputedStyle(e)}function Xk(e){return uc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Yf(e){if(ny(e)==="html")return e;const t=e.assignedSlot||e.parentNode||YB(e)&&e.host||bu(e);return YB(t)?t.host:t}function jG(e){const t=Yf(e);return g0(t)?e.ownerDocument?e.ownerDocument.body:e.body:du(t)&&Sw(t)?t:jG(t)}function cx(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=jG(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=Wo(i);if(s){const o=L3(a);return t.concat(a,a.visualViewport||[],Sw(i)?i:[],o&&n?cx(o):[])}return t.concat(i,cx(i,[],n))}function L3(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function PG(e){const t=dc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=du(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=tC(n)!==s||tC(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function SP(e){return uc(e)?e:e.contextElement}function Hg(e){const t=SP(e);if(!du(t))return tu(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=PG(t);let a=(s?tC(n.width):n.width)/r,o=(s?tC(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Ixe=tu(0);function OG(e){const t=Wo(e);return!_P()||!t.visualViewport?Ixe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Nxe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Wo(e)?!1:t}function zp(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=SP(e);let a=tu(1);t&&(r?uc(r)&&(a=Hg(r)):a=Hg(e));const o=Nxe(s,n,r)?OG(s):tu(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(s){const h=Wo(s),m=r&&uc(r)?Wo(r):r;let y=h,b=L3(y);for(;b&&r&&m!==y;){const v=Hg(b),x=b.getBoundingClientRect(),_=dc(b),S=x.left+(b.clientLeft+parseFloat(_.paddingLeft))*v.x,C=x.top+(b.clientTop+parseFloat(_.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=S,c+=C,y=Wo(b),b=L3(y)}}return rC({width:u,height:d,x:l,y:c})}function CP(e,t){const n=Xk(e).scrollLeft;return t?t.left+n:zp(bu(e)).left+n}function DG(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:CP(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function Mxe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",a=bu(r),o=t?Zk(t.floating):!1;if(r===a||o&&s)return n;let l={scrollLeft:0,scrollTop:0},c=tu(1);const u=tu(0),d=du(r);if((d||!d&&!s)&&((ny(r)!=="body"||Sw(a))&&(l=Xk(r)),du(r))){const m=zp(r);c=Hg(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const h=a&&!d&&!s?DG(a,l,!0):tu(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function jxe(e){return Array.from(e.getClientRects())}function Pxe(e){const t=bu(e),n=Xk(e),r=e.ownerDocument.body,i=qo(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=qo(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+CP(e);const o=-n.scrollTop;return dc(r).direction==="rtl"&&(a+=qo(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function Oxe(e,t){const n=Wo(e),r=bu(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const c=_P();(!c||c&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}function Dxe(e,t){const n=zp(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=du(e)?Hg(e):tu(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:a,height:o,x:l,y:c}}function ZB(e,t,n){let r;if(t==="viewport")r=Oxe(e,n);else if(t==="document")r=Pxe(bu(e));else if(uc(t))r=Dxe(t,n);else{const i=OG(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return rC(r)}function FG(e,t){const n=Yf(e);return n===t||!uc(n)||g0(n)?!1:dc(n).position==="fixed"||FG(n,t)}function Fxe(e,t){const n=t.get(e);if(n)return n;let r=cx(e,[],!1).filter(o=>uc(o)&&ny(o)!=="body"),i=null;const s=dc(e).position==="fixed";let a=s?Yf(e):e;for(;uc(a)&&!g0(a);){const o=dc(a),l=wP(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Sw(a)&&!l&&FG(e,a))?r=r.filter(u=>u!==a):i=o,a=Yf(a)}return t.set(e,r),r}function Lxe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?Zk(t)?[]:Fxe(t,this._c):[].concat(n),r],o=a[0],l=a.reduce((c,u)=>{const d=ZB(t,u,i);return c.top=qo(d.top,c.top),c.right=Gf(d.right,c.right),c.bottom=Gf(d.bottom,c.bottom),c.left=qo(d.left,c.left),c},ZB(t,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Bxe(e){const{width:t,height:n}=PG(e);return{width:t,height:n}}function $xe(e,t,n){const r=du(t),i=bu(t),s=n==="fixed",a=zp(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=tu(0);if(r||!r&&!s)if((ny(t)!=="body"||Sw(i))&&(o=Xk(t)),r){const h=zp(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&(l.x=CP(i));const c=i&&!r&&!s?DG(i,o):tu(0),u=a.left+o.scrollLeft-l.x-c.x,d=a.top+o.scrollTop-l.y-c.y;return{x:u,y:d,width:a.width,height:a.height}}function bI(e){return dc(e).position==="static"}function XB(e,t){if(!du(e)||dc(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return bu(e)===n&&(n=n.ownerDocument.body),n}function LG(e,t){const n=Wo(e);if(Zk(e))return n;if(!du(e)){let i=Yf(e);for(;i&&!g0(i);){if(uc(i)&&!bI(i))return i;i=Yf(i)}return n}let r=XB(e,t);for(;r&&Axe(r)&&bI(r);)r=XB(r,t);return r&&g0(r)&&bI(r)&&!wP(r)?n:r||Rxe(e)||n}const zxe=async function(e){const t=this.getOffsetParent||LG,n=this.getDimensions,r=await n(e.floating);return{reference:$xe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Uxe(e){return dc(e).direction==="rtl"}const qxe={convertOffsetParentRelativeRectToViewportRelativeRect:Mxe,getDocumentElement:bu,getClippingRect:Lxe,getOffsetParent:LG,getElementRects:zxe,getClientRects:jxe,getDimensions:Bxe,getScale:Hg,isElement:uc,isRTL:Uxe};function BG(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Vxe(e,t){let n=null,r;const i=bu(e);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:m}=c;if(o||t(),!h||!m)return;const y=V_(d),b=V_(i.clientWidth-(u+h)),v=V_(i.clientHeight-(d+m)),x=V_(u),S={rootMargin:-y+"px "+-b+"px "+-v+"px "+-x+"px",threshold:qo(0,Gf(1,l))||1};let C=!0;function E(A){const R=A[0].intersectionRatio;if(R!==l){if(!C)return a();R?a(!1,R):r=setTimeout(()=>{a(!1,1e-7)},1e3)}R===1&&!BG(c,e.getBoundingClientRect())&&a(),C=!1}try{n=new IntersectionObserver(E,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,S)}n.observe(e)}return a(!0),s}function kP(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=SP(e),u=i||s?[...c?cx(c):[],...cx(t)]:[];u.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),s&&x.addEventListener("resize",n)});const d=c&&o?Vxe(c,n):null;let h=-1,m=null;a&&(m=new ResizeObserver(x=>{let[_]=x;_&&_.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let y,b=l?zp(e):null;l&&v();function v(){const x=zp(e);b&&!BG(b,x)&&n(),b=x,y=requestAnimationFrame(v)}return n(),()=>{var x;u.forEach(_=>{i&&_.removeEventListener("scroll",n),s&&_.removeEventListener("resize",n)}),d==null||d(),(x=m)==null||x.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const Hxe=Cxe,Wxe=kxe,Gxe=wxe,Kxe=Txe,Yxe=_xe,JB=xxe,Zxe=Exe,Xxe=(e,t,n)=>{const r=new Map,i={platform:qxe,...n},s={...i.platform,_c:r};return vxe(e,t,{...i,platform:s})};var VS=typeof document<"u"?T.useLayoutEffect:T.useEffect;function iC(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!iC(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!iC(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function $G(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function QB(e,t){const n=$G(e);return Math.round(t*n)/n}function vI(e){const t=T.useRef(e);return VS(()=>{t.current=e}),t}function EP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,d]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=T.useState(r);iC(h,r)||m(r);const[y,b]=T.useState(null),[v,x]=T.useState(null),_=T.useCallback($=>{$!==A.current&&(A.current=$,b($))},[]),S=T.useCallback($=>{$!==R.current&&(R.current=$,x($))},[]),C=s||y,E=a||v,A=T.useRef(null),R=T.useRef(null),N=T.useRef(u),M=l!=null,P=vI(l),L=vI(i),O=vI(c),V=T.useCallback(()=>{if(!A.current||!R.current)return;const $={placement:t,strategy:n,middleware:h};L.current&&($.platform=L.current),Xxe(A.current,R.current,$).then(ne=>{const H={...ne,isPositioned:O.current!==!1};F.current&&!iC(N.current,H)&&(N.current=H,Vo.flushSync(()=>{d(H)}))})},[h,t,n,L,O]);VS(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d($=>({...$,isPositioned:!1})))},[c]);const F=T.useRef(!1);VS(()=>(F.current=!0,()=>{F.current=!1}),[]),VS(()=>{if(C&&(A.current=C),E&&(R.current=E),C&&E){if(P.current)return P.current(C,E,V);V()}},[C,E,V,P,M]);const J=T.useMemo(()=>({reference:A,floating:R,setReference:_,setFloating:S}),[_,S]),U=T.useMemo(()=>({reference:C,floating:E}),[C,E]),G=T.useMemo(()=>{const $={position:n,left:0,top:0};if(!U.floating)return $;const ne=QB(U.floating,u.x),H=QB(U.floating,u.y);return o?{...$,transform:"translate("+ne+"px, "+H+"px)",...$G(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:H}},[n,o,U.floating,u.x,u.y]);return T.useMemo(()=>({...u,update:V,refs:J,elements:U,floatingStyles:G}),[u,V,J,U,G])}const Jxe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?JB({element:r.current,padding:i}).fn(n):{}:r?JB({element:r,padding:i}).fn(n):{}}}},TP=(e,t)=>({...Hxe(e),options:[e,t]}),AP=(e,t)=>({...Wxe(e),options:[e,t]}),RP=(e,t)=>({...Zxe(e),options:[e,t]}),IP=(e,t)=>({...Gxe(e),options:[e,t]}),NP=(e,t)=>({...Kxe(e),options:[e,t]}),MP=(e,t)=>({...Yxe(e),options:[e,t]}),jP=(e,t)=>({...Jxe(e),options:[e,t]});var Qxe="Arrow",zG=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return p.jsx(nr.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});zG.displayName=Qxe;var ewe=zG;function ry(e){const[t,n]=T.useState(void 0);return Yi(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=e.offsetWidth,o=e.offsetHeight;n({width:a,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var PP="Popper",[UG,Jk]=Ds(PP),[twe,qG]=UG(PP),VG=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return p.jsx(twe,{scope:t,anchor:r,onAnchorChange:i,children:n})};VG.displayName=PP;var HG="PopperAnchor",WG=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=qG(HG,n),a=T.useRef(null),o=En(t,a);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:p.jsx(nr.div,{...i,ref:o})});WG.displayName=HG;var OP="PopperContent",[nwe,rwe]=UG(OP),GG=T.forwardRef((e,t)=>{var je,Ne,Ce,Ue,et,qe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...b}=e,v=qG(OP,n),[x,_]=T.useState(null),S=En(t,Re=>_(Re)),[C,E]=T.useState(null),A=ry(C),R=(A==null?void 0:A.width)??0,N=(A==null?void 0:A.height)??0,M=r+(s!=="center"?"-"+s:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],O=L.length>0,V={padding:P,boundary:L.filter(swe),altBoundary:O},{refs:F,floatingStyles:J,placement:U,isPositioned:G,middlewareData:$}=EP({strategy:"fixed",placement:M,whileElementsMounted:(...Re)=>kP(...Re,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[TP({mainAxis:i+N,alignmentAxis:a}),l&&AP({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?RP():void 0,...V}),l&&IP({...V}),NP({...V,apply:({elements:Re,rects:K,availableWidth:ge,availableHeight:Ae})=>{const{width:le,height:oe}=K.reference,ie=Re.floating.style;ie.setProperty("--radix-popper-available-width",`${ge}px`),ie.setProperty("--radix-popper-available-height",`${Ae}px`),ie.setProperty("--radix-popper-anchor-width",`${le}px`),ie.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),C&&jP({element:C,padding:o}),awe({arrowWidth:R,arrowHeight:N}),h&&MP({strategy:"referenceHidden",...V})]}),[ne,H]=ZG(U),te=xi(y);Yi(()=>{G&&(te==null||te())},[G,te]);const ee=(je=$.arrow)==null?void 0:je.x,se=(Ne=$.arrow)==null?void 0:Ne.y,he=((Ce=$.arrow)==null?void 0:Ce.centerOffset)!==0,[ce,Me]=T.useState();return Yi(()=>{x&&Me(window.getComputedStyle(x).zIndex)},[x]),p.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:G?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(Ue=$.transformOrigin)==null?void 0:Ue.x,(et=$.transformOrigin)==null?void 0:et.y].join(" "),...((qe=$.hide)==null?void 0:qe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(nwe,{scope:n,placedSide:ne,onArrowChange:E,arrowX:ee,arrowY:se,shouldHideArrow:he,children:p.jsx(nr.div,{"data-side":ne,"data-align":H,...b,ref:S,style:{...b.style,animation:G?void 0:"none"}})})})});GG.displayName=OP;var KG="PopperArrow",iwe={top:"bottom",right:"left",bottom:"top",left:"right"},YG=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=rwe(KG,r),a=iwe[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(ewe,{...i,ref:n,style:{...i.style,display:"block"}})})});YG.displayName=KG;function swe(e){return e!==null}var awe=e=>({name:"transformOrigin",options:e,fn(t){var v,x,_;const{placement:n,rects:r,middlewareData:i}=t,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,u]=ZG(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((x=i.arrow)==null?void 0:x.x)??0)+o/2,m=(((_=i.arrow)==null?void 0:_.y)??0)+l/2;let y="",b="";return c==="bottom"?(y=a?d:`${h}px`,b=`${-l}px`):c==="top"?(y=a?d:`${h}px`,b=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,b=a?d:`${m}px`):c==="left"&&(y=`${r.floating.width+l}px`,b=a?d:`${m}px`),{data:{x:y,y:b}}}});function ZG(e){const[t,n="center"]=e.split("-");return[t,n]}var XG=VG,JG=WG,QG=GG,eK=YG,owe="Portal",Qk=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=T.useState(!1);Yi(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?Bk.createPortal(p.jsx(nr.div,{...r,ref:t}),a):null});Qk.displayName=owe;function lwe(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var ta=e=>{const{present:t,children:n}=e,r=cwe(t),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=En(r.ref,uwe(i));return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};ta.displayName="Presence";function cwe(e){const[t,n]=T.useState(),r=T.useRef(null),i=T.useRef(e),s=T.useRef("none"),a=e?"mounted":"unmounted",[o,l]=lwe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const c=H_(r.current);s.current=o==="mounted"?c:"none"},[o]),Yi(()=>{const c=r.current,u=i.current;if(u!==e){const h=s.current,m=H_(c);e?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),Yi(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=m=>{const b=H_(r.current).includes(m.animationName);if(m.target===t&&b&&(l("ANIMATION_END"),!i.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=m=>{m.target===t&&(s.current=H_(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:T.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function H_(e){return(e==null?void 0:e.animationName)||"none"}function uwe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var dwe=Symbol("radix.slottable");function fwe(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=dwe,t}var hwe=sH[" useInsertionEffect ".trim().toString()]||Yi;function fc({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,a]=pwe({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:i;{const u=T.useRef(e!==void 0);T.useEffect(()=>{const d=u.current;d!==o&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const c=T.useCallback(u=>{var d;if(o){const h=mwe(u)?u(e):u;h!==e&&((d=a.current)==null||d.call(a,h))}else s(u)},[o,e,s,a]);return[l,c]}function pwe({defaultProp:e,onChange:t}){const[n,r]=T.useState(e),i=T.useRef(n),s=T.useRef(t);return hwe(()=>{s.current=t},[t]),T.useEffect(()=>{var a;i.current!==n&&((a=s.current)==null||a.call(s,n),i.current=n)},[n,i]),[n,r,s]}function mwe(e){return typeof e=="function"}var gwe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ywe="VisuallyHidden",tK=T.forwardRef((e,t)=>p.jsx(nr.span,{...e,ref:t,style:{...gwe,...e.style}}));tK.displayName=ywe;var bwe=tK,[eE,Not]=Ds("Tooltip",[Jk]),tE=Jk(),nK="TooltipProvider",vwe=700,B3="tooltip.open",[xwe,DP]=eE(nK),rK=e=>{const{__scopeTooltip:t,delayDuration:n=vwe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=e,a=T.useRef(!0),o=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),p.jsx(xwe,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:T.useCallback(c=>{o.current=c},[]),disableHoverableContent:i,children:s})};rK.displayName=nK;var ux="Tooltip",[wwe,Cw]=eE(ux),iK=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=e,l=DP(ux,e.__scopeTooltip),c=tE(t),[u,d]=T.useState(null),h=Ys(),m=T.useRef(0),y=a??l.disableHoverableContent,b=o??l.delayDuration,v=T.useRef(!1),[x,_]=fc({prop:r,defaultProp:i??!1,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(B3))):l.onClose(),s==null||s(R)},caller:ux}),S=T.useMemo(()=>x?v.current?"delayed-open":"instant-open":"closed",[x]),C=T.useCallback(()=>{window.clearTimeout(m.current),m.current=0,v.current=!1,_(!0)},[_]),E=T.useCallback(()=>{window.clearTimeout(m.current),m.current=0,_(!1)},[_]),A=T.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{v.current=!0,_(!0),m.current=0},b)},[b,_]);return T.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),p.jsx(XG,{...c,children:p.jsx(wwe,{scope:t,contentId:h,open:x,stateAttribute:S,trigger:u,onTriggerChange:d,onTriggerEnter:T.useCallback(()=>{l.isOpenDelayedRef.current?A():C()},[l.isOpenDelayedRef,A,C]),onTriggerLeave:T.useCallback(()=>{y?E():(window.clearTimeout(m.current),m.current=0)},[E,y]),onOpen:C,onClose:E,disableHoverableContent:y,children:n})})};iK.displayName=ux;var $3="TooltipTrigger",sK=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Cw($3,n),s=DP($3,n),a=tE(n),o=T.useRef(null),l=En(t,o,i.onTriggerChange),c=T.useRef(!1),u=T.useRef(!1),d=T.useCallback(()=>c.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(JG,{asChild:!0,...a,children:p.jsx(nr.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Vt(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Vt(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Vt(e.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Vt(e.onFocus,()=>{c.current||i.onOpen()}),onBlur:Vt(e.onBlur,i.onClose),onClick:Vt(e.onClick,i.onClose)})})});sK.displayName=$3;var FP="TooltipPortal",[_we,Swe]=eE(FP,{forceMount:void 0}),aK=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:i}=e,s=Cw(FP,t);return p.jsx(_we,{scope:t,forceMount:n,children:p.jsx(ta,{present:n||s.open,children:p.jsx(Qk,{asChild:!0,container:i,children:r})})})};aK.displayName=FP;var y0="TooltipContent",oK=T.forwardRef((e,t)=>{const n=Swe(y0,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=e,a=Cw(y0,e.__scopeTooltip);return p.jsx(ta,{present:r||a.open,children:a.disableHoverableContent?p.jsx(lK,{side:i,...s,ref:t}):p.jsx(Cwe,{side:i,...s,ref:t})})}),Cwe=T.forwardRef((e,t)=>{const n=Cw(y0,e.__scopeTooltip),r=DP(y0,e.__scopeTooltip),i=T.useRef(null),s=En(t,i),[a,o]=T.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:d}=r,h=T.useCallback(()=>{o(null),d(!1)},[d]),m=T.useCallback((y,b)=>{const v=y.currentTarget,x={x:y.clientX,y:y.clientY},_=Awe(x,v.getBoundingClientRect()),S=Rwe(x,_),C=Iwe(b.getBoundingClientRect()),E=Mwe([...S,...C]);o(E),d(!0)},[d]);return T.useEffect(()=>()=>h(),[h]),T.useEffect(()=>{if(l&&u){const y=v=>m(v,u),b=v=>m(v,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",b)}}},[l,u,m,h]),T.useEffect(()=>{if(a){const y=b=>{const v=b.target,x={x:b.clientX,y:b.clientY},_=(l==null?void 0:l.contains(v))||(u==null?void 0:u.contains(v)),S=!Nwe(x,a);_?h():S&&(h(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,a,c,h]),p.jsx(lK,{...e,ref:s})}),[kwe,Ewe]=eE(ux,{isInside:!1}),Twe=fwe("TooltipContent"),lK=T.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=e,l=Cw(y0,n),c=tE(n),{onClose:u}=l;return T.useEffect(()=>(document.addEventListener(B3,u),()=>document.removeEventListener(B3,u)),[u]),T.useEffect(()=>{if(l.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),p.jsx(Kk,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(QG,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(Twe,{children:r}),p.jsx(kwe,{scope:n,isInside:!0,children:p.jsx(bwe,{id:l.contentId,role:"tooltip",children:i||r})})]})})});oK.displayName=y0;var cK="TooltipArrow",uK=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=tE(n);return Ewe(cK,n).isInside?null:p.jsx(eK,{...i,...r,ref:t})});uK.displayName=cK;function Awe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Rwe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Iwe(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function Nwe(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s],l=t[a],c=o.x,u=o.y,d=l.x,h=l.y;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=!i)}return i}function Mwe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),jwe(t)}function jwe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const s=n[n.length-1],a=n[n.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Pwe=rK,Owe=iK,Dwe=sK,Fwe=aK,Lwe=oK,Bwe=uK;function yr({delayDuration:e=0,...t}){return p.jsx(Pwe,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function vr({...e}){return p.jsx(yr,{children:p.jsx(Owe,{"data-slot":"tooltip",...e})})}function xr({...e}){return p.jsx(Dwe,{"data-slot":"tooltip-trigger",...e})}function wr({className:e,sideOffset:t=0,children:n,...r}){return p.jsx(Fwe,{children:p.jsxs(Lwe,{"data-slot":"tooltip-content",sideOffset:t,className:ft("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,p.jsx(Bwe,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var xI={exports:{}},e$;function $we(){return e$||(e$=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,a={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function _(S){return S instanceof l?new l(S.type,_(S.content),S.alias):Array.isArray(S)?S.map(_):S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(_){return Object.prototype.toString.call(_).slice(8,-1)},objId:function(_){return _.__id||Object.defineProperty(_,"__id",{value:++s}),_.__id},clone:function _(S,C){C=C||{};var E,A;switch(o.util.type(S)){case"Object":if(A=o.util.objId(S),C[A])return C[A];E={},C[A]=E;for(var R in S)S.hasOwnProperty(R)&&(E[R]=_(S[R],C));return E;case"Array":return A=o.util.objId(S),C[A]?C[A]:(E=[],C[A]=E,S.forEach(function(N,M){E[M]=_(N,C)}),E);default:return S}},getLanguage:function(_){for(;_;){var S=i.exec(_.className);if(S)return S[1].toLowerCase();_=_.parentElement}return"none"},setLanguage:function(_,S){_.className=_.className.replace(RegExp(i,"gi"),""),_.classList.add("language-"+S)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(E){var _=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(E.stack)||[])[1];if(_){var S=document.getElementsByTagName("script");for(var C in S)if(S[C].src==_)return S[C]}return null}},isActive:function(_,S,C){for(var E="no-"+S;_;){var A=_.classList;if(A.contains(S))return!0;if(A.contains(E))return!1;_=_.parentElement}return!!C}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(_,S){var C=o.util.clone(o.languages[_]);for(var E in S)C[E]=S[E];return C},insertBefore:function(_,S,C,E){E=E||o.languages;var A=E[_],R={};for(var N in A)if(A.hasOwnProperty(N)){if(N==S)for(var M in C)C.hasOwnProperty(M)&&(R[M]=C[M]);C.hasOwnProperty(N)||(R[N]=A[N])}var P=E[_];return E[_]=R,o.languages.DFS(o.languages,function(L,O){O===P&&L!=_&&(this[L]=R)}),R},DFS:function _(S,C,E,A){A=A||{};var R=o.util.objId;for(var N in S)if(S.hasOwnProperty(N)){C.call(S,N,S[N],E||N);var M=S[N],P=o.util.type(M);P==="Object"&&!A[R(M)]?(A[R(M)]=!0,_(M,C,null,A)):P==="Array"&&!A[R(M)]&&(A[R(M)]=!0,_(M,C,N,A))}}},plugins:{},highlightAll:function(_,S){o.highlightAllUnder(document,_,S)},highlightAllUnder:function(_,S,C){var E={callback:C,container:_,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",E),E.elements=Array.prototype.slice.apply(E.container.querySelectorAll(E.selector)),o.hooks.run("before-all-elements-highlight",E);for(var A=0,R;R=E.elements[A++];)o.highlightElement(R,S===!0,E.callback)},highlightElement:function(_,S,C){var E=o.util.getLanguage(_),A=o.languages[E];o.util.setLanguage(_,E);var R=_.parentElement;R&&R.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(R,E);var N=_.textContent,M={element:_,language:E,grammar:A,code:N};function P(O){M.highlightedCode=O,o.hooks.run("before-insert",M),M.element.innerHTML=M.highlightedCode,o.hooks.run("after-highlight",M),o.hooks.run("complete",M),C&&C.call(M.element)}if(o.hooks.run("before-sanity-check",M),R=M.element.parentElement,R&&R.nodeName.toLowerCase()==="pre"&&!R.hasAttribute("tabindex")&&R.setAttribute("tabindex","0"),!M.code){o.hooks.run("complete",M),C&&C.call(M.element);return}if(o.hooks.run("before-highlight",M),!M.grammar){P(o.util.encode(M.code));return}if(S&&r.Worker){var L=new Worker(o.filename);L.onmessage=function(O){P(O.data)},L.postMessage(JSON.stringify({language:M.language,code:M.code,immediateClose:!0}))}else P(o.highlight(M.code,M.grammar,M.language))},highlight:function(_,S,C){var E={code:_,grammar:S,language:C};if(o.hooks.run("before-tokenize",E),!E.grammar)throw new Error('The language "'+E.language+'" has no grammar.');return E.tokens=o.tokenize(E.code,E.grammar),o.hooks.run("after-tokenize",E),l.stringify(o.util.encode(E.tokens),E.language)},tokenize:function(_,S){var C=S.rest;if(C){for(var E in C)S[E]=C[E];delete S.rest}var A=new d;return h(A,A.head,_),u(_,A,S,A.head,0),y(A)},hooks:{all:{},add:function(_,S){var C=o.hooks.all;C[_]=C[_]||[],C[_].push(S)},run:function(_,S){var C=o.hooks.all[_];if(!(!C||!C.length))for(var E=0,A;A=C[E++];)A(S)}},Token:l};r.Prism=o;function l(_,S,C,E){this.type=_,this.content=S,this.alias=C,this.length=(E||"").length|0}l.stringify=function _(S,C){if(typeof S=="string")return S;if(Array.isArray(S)){var E="";return S.forEach(function(P){E+=_(P,C)}),E}var A={type:S.type,content:_(S.content,C),tag:"span",classes:["token",S.type],attributes:{},language:C},R=S.alias;R&&(Array.isArray(R)?Array.prototype.push.apply(A.classes,R):A.classes.push(R)),o.hooks.run("wrap",A);var N="";for(var M in A.attributes)N+=" "+M+'="'+(A.attributes[M]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+N+">"+A.content+"</"+A.tag+">"};function c(_,S,C,E){_.lastIndex=S;var A=_.exec(C);if(A&&E&&A[1]){var R=A[1].length;A.index+=R,A[0]=A[0].slice(R)}return A}function u(_,S,C,E,A,R){for(var N in C)if(!(!C.hasOwnProperty(N)||!C[N])){var M=C[N];M=Array.isArray(M)?M:[M];for(var P=0;P<M.length;++P){if(R&&R.cause==N+","+P)return;var L=M[P],O=L.inside,V=!!L.lookbehind,F=!!L.greedy,J=L.alias;if(F&&!L.pattern.global){var U=L.pattern.toString().match(/[imsuy]*$/)[0];L.pattern=RegExp(L.pattern.source,U+"g")}for(var G=L.pattern||L,$=E.next,ne=A;$!==S.tail&&!(R&&ne>=R.reach);ne+=$.value.length,$=$.next){var H=$.value;if(S.length>_.length)return;if(!(H instanceof l)){var te=1,ee;if(F){if(ee=c(G,ne,_,V),!ee||ee.index>=_.length)break;var Me=ee.index,se=ee.index+ee[0].length,he=ne;for(he+=$.value.length;Me>=he;)$=$.next,he+=$.value.length;if(he-=$.value.length,ne=he,$.value instanceof l)continue;for(var ce=$;ce!==S.tail&&(he<se||typeof ce.value=="string");ce=ce.next)te++,he+=ce.value.length;te--,H=_.slice(ne,he),ee.index-=ne}else if(ee=c(G,0,H,V),!ee)continue;var Me=ee.index,je=ee[0],Ne=H.slice(0,Me),Ce=H.slice(Me+je.length),Ue=ne+H.length;R&&Ue>R.reach&&(R.reach=Ue);var et=$.prev;Ne&&(et=h(S,et,Ne),ne+=Ne.length),m(S,et,te);var qe=new l(N,O?o.tokenize(je,O):je,J,je);if($=h(S,et,qe),Ce&&h(S,$,Ce),te>1){var Re={cause:N+","+P,reach:Ue};u(_,S,C,$.prev,ne,Re),R&&Re.reach>R.reach&&(R.reach=Re.reach)}}}}}}function d(){var _={value:null,prev:null,next:null},S={value:null,prev:_,next:null};_.next=S,this.head=_,this.tail=S,this.length=0}function h(_,S,C){var E=S.next,A={value:C,prev:S,next:E};return S.next=A,E.prev=A,_.length++,A}function m(_,S,C){for(var E=S.next,A=0;A<C&&E!==_.tail;A++)E=E.next;S.next=E,E.prev=S,_.length-=A}function y(_){for(var S=[],C=_.head.next;C!==_.tail;)S.push(C.value),C=C.next;return S}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(_){var S=JSON.parse(_.data),C=S.language,E=S.code,A=S.immediateClose;r.postMessage(o.highlight(E,o.languages[C],C)),A&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function v(){o.manual||o.highlightAll()}if(!o.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o}(t);e.exports&&(e.exports=n),typeof mp<"u"&&(mp.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,s){var a={};a["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[s]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};o["language-"+s]={pattern:/[\s\S]+/,inside:n.languages[s]};var l={};l[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var s=r.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading…",i=function(b,v){return"✖ Error "+b+" while fetching file: "+v},s="✖ Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",c="loaded",u="failed",d="pre[data-src]:not(["+o+'="'+c+'"]):not(['+o+'="'+l+'"])';function h(b,v,x){var _=new XMLHttpRequest;_.open("GET",b,!0),_.onreadystatechange=function(){_.readyState==4&&(_.status<400&&_.responseText?v(_.responseText):_.status>=400?x(i(_.status,_.statusText)):x(s))},_.send(null)}function m(b){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(v){var x=Number(v[1]),_=v[2],S=v[3];return _?S?[x,Number(S)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+d}),n.hooks.add("before-sanity-check",function(b){var v=b.element;if(v.matches(d)){b.code="",v.setAttribute(o,l);var x=v.appendChild(document.createElement("CODE"));x.textContent=r;var _=v.getAttribute("data-src"),S=b.language;if(S==="none"){var C=(/\.(\w+)$/.exec(_)||[,"none"])[1];S=a[C]||C}n.util.setLanguage(x,S),n.util.setLanguage(v,S);var E=n.plugins.autoloader;E&&E.loadLanguages(S),h(_,function(A){v.setAttribute(o,c);var R=m(v.getAttribute("data-range"));if(R){var N=A.split(/\r\n?|\n/g),M=R[0],P=R[1]==null?N.length:R[1];M<0&&(M+=N.length),M=Math.max(0,Math.min(M-1,N.length)),P<0&&(P+=N.length),P=Math.max(0,Math.min(P,N.length)),A=N.slice(M,P).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(M+1))}x.textContent=A,n.highlightElement(x)},function(A){v.setAttribute(o,u),x.textContent=A})}}),n.plugins.fileHighlight={highlight:function(v){for(var x=(v||document).querySelectorAll(d),_=0,S;S=x[_++];)n.highlightElement(S)}};var y=!1;n.fileHighlight=function(){y||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),y=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(xI)),xI.exports}var zwe=$we();const Uwe=ma(zwe);var t$={},n$;function qwe(){return n$||(n$=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),t$}qwe();var r$={},i$;function Vwe(){return i$||(i$=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),r$}Vwe();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var i=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],s=r.variable[1].inside,a=0;a<i.length;a++)s[i[a]]=e.languages.bash[i[a]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(u){return u=u.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+u+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),s=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+s+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+s+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+s+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(u){["url","bold","italic","strike","code-snippet"].forEach(function(d){u!==d&&(e.languages.markdown[u].inside.content.inside[d]=e.languages.markdown[d])})}),e.hooks.add("after-tokenize",function(u){if(u.language!=="markdown"&&u.language!=="md")return;function d(h){if(!(!h||typeof h=="string"))for(var m=0,y=h.length;m<y;m++){var b=h[m];if(b.type!=="code"){d(b.content);continue}var v=b.content[1],x=b.content[3];if(v&&x&&v.type==="code-language"&&x.type==="code-block"&&typeof v.content=="string"){var _=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");_=(/[a-z][\w-]*/i.exec(_)||[""])[0].toLowerCase();var S="language-"+_;x.alias?typeof x.alias=="string"?x.alias=[x.alias,S]:x.alias.push(S):x.alias=[S]}}}d(u.tokens)}),e.hooks.add("wrap",function(u){if(u.type==="code-block"){for(var d="",h=0,m=u.classes.length;h<m;h++){var y=u.classes[h],b=/language-(.+)/.exec(y);if(b){d=b[1];break}}var v=e.languages[d];if(v)u.content=e.highlight(c(u.content),v,d);else if(d&&d!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);u.attributes.id=x,e.plugins.autoloader.loadLanguages(d,function(){var _=document.getElementById(x);_&&(_.innerHTML=e.highlight(_.textContent,e.languages[d],d))})}}});var a=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function c(u){var d=u.replace(a,"");return d=d.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(h,m){if(m=m.toLowerCase(),m[0]==="#"){var y;return m[1]==="x"?y=parseInt(m.slice(2),16):y=Number(m.slice(1)),l(y)}else{var b=o[m];return b||h}}),d}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],i=[];/^\w+$/.test(n)||i.push(/\w+/.exec(n)[0]),n==="diff"&&i.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:i,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",i=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),s=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function a(o,l){l=(l||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return o});return RegExp(c,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+i+"|"+s+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:a(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:a(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:a(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:a(s),lookbehind:!0,greedy:!0},number:{pattern:a(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var s$={},a$;function Hwe(){return a$||(a$=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),s$}Hwe();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const Wwe=({lang:e,code:t,filepath:n,isStreaming:r=!1})=>{const{foldStreamingCodeBlocks:i}=mr(Tn(b=>({foldStreamingCodeBlocks:b.foldStreamingCodeBlocks}))),[s,a]=T.useState(r?i:!1),o=T.useRef(null),l=Qo(Tn(b=>Object.values(b.canvasControls))),c=T.useCallback((b,v,x,_,S,C)=>l.filter(E=>E.type==="codeblock"&&E.targetSlot===b&&E.renderer).map(E=>{if(E.renderer){const A={codeBlockContent:v,codeBlockLang:x,codeBlockFilepath:_,isFolded:S,toggleFold:C,canvasContextType:"codeblock"};return p.jsx(lt.Fragment,{children:E.renderer(A)},E.id)}return null}).filter(Boolean),[l]),u=T.useCallback(()=>{if(o.current&&t)try{o.current.style.whiteSpace!=="pre-wrap"&&(o.current.style.whiteSpace="pre-wrap"),o.current.textContent=t,Uwe.highlightElement(o.current)}catch(b){console.error("Prism highlight error:",b),o.current.textContent=t}else o.current&&(o.current.textContent="")},[t]);T.useEffect(()=>{s||u()},[t,e,s,u]);const d=()=>{const b=s;a(v=>!v),b&&setTimeout(u,0)},h=e?`language-${e}`:"language-plaintext",m=T.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]),y=c("codeblock-header-actions",t,e,n,s,d);return p.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[p.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),n&&p.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:n}),p.jsx("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:y})]}),p.jsx("div",{})]}),!s&&p.jsx("div",{className:"overflow-hidden w-full",children:p.jsx("pre",{className:"overflow-x-auto w-full relative overflow-wrap-anywhere",children:p.jsx("code",{ref:o,className:h+" block"})})}),s&&p.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:d,children:p.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:m})})]})},iy=T.memo(Wwe);var mt;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(mt||(mt={}));const o$={[mt.EPERM]:"Operation not permitted",[mt.ENOENT]:"No such file or directory",[mt.EINTR]:"Interrupted system call",[mt.EIO]:"Input/output error",[mt.ENXIO]:"No such device or address",[mt.EBADF]:"Bad file descriptor",[mt.EAGAIN]:"Resource temporarily unavailable",[mt.ENOMEM]:"Cannot allocate memory",[mt.EACCES]:"Permission denied",[mt.EFAULT]:"Bad address",[mt.ENOTBLK]:"Block device required",[mt.EBUSY]:"Resource busy or locked",[mt.EEXIST]:"File exists",[mt.EXDEV]:"Invalid cross-device link",[mt.ENODEV]:"No such device",[mt.ENOTDIR]:"File is not a directory",[mt.EISDIR]:"File is a directory",[mt.EINVAL]:"Invalid argument",[mt.ENFILE]:"Too many open files in system",[mt.EMFILE]:"Too many open files",[mt.ETXTBSY]:"Text file busy",[mt.EFBIG]:"File is too big",[mt.ENOSPC]:"No space left on disk",[mt.ESPIPE]:"Illegal seek",[mt.EROFS]:"Cannot modify a read-only file system",[mt.EMLINK]:"Too many links",[mt.EPIPE]:"Broken pipe",[mt.EDOM]:"Numerical argument out of domain",[mt.ERANGE]:"Numerical result out of range",[mt.EDEADLK]:"Resource deadlock would occur",[mt.ENAMETOOLONG]:"File name too long",[mt.ENOLCK]:"No locks available",[mt.ENOSYS]:"Function not implemented",[mt.ENOTEMPTY]:"Directory is not empty",[mt.ELOOP]:"Too many levels of symbolic links",[mt.ENOMSG]:"No message of desired type",[mt.EBADE]:"Invalid exchange",[mt.EBADR]:"Invalid request descriptor",[mt.EXFULL]:"Exchange full",[mt.ENOANO]:"No anode",[mt.EBADRQC]:"Invalid request code",[mt.ENOSTR]:"Device not a stream",[mt.ENODATA]:"No data available",[mt.ETIME]:"Timer expired",[mt.ENOSR]:"Out of streams resources",[mt.ENONET]:"Machine is not on the network",[mt.EREMOTE]:"Object is remote",[mt.ENOLINK]:"Link has been severed",[mt.ECOMM]:"Communication error on send",[mt.EPROTO]:"Protocol error",[mt.EBADMSG]:"Bad message",[mt.EOVERFLOW]:"Value too large for defined data type",[mt.EBADFD]:"File descriptor in bad state",[mt.ESTRPIPE]:"Streams pipe error",[mt.ENOTSOCK]:"Socket operation on non-socket",[mt.EDESTADDRREQ]:"Destination address required",[mt.EMSGSIZE]:"Message too long",[mt.EPROTOTYPE]:"Protocol wrong type for socket",[mt.ENOPROTOOPT]:"Protocol not available",[mt.EPROTONOSUPPORT]:"Protocol not supported",[mt.ESOCKTNOSUPPORT]:"Socket type not supported",[mt.ENOTSUP]:"Operation is not supported",[mt.ENETDOWN]:"Network is down",[mt.ENETUNREACH]:"Network is unreachable",[mt.ENETRESET]:"Network dropped connection on reset",[mt.ETIMEDOUT]:"Connection timed out",[mt.ECONNREFUSED]:"Connection refused",[mt.EHOSTDOWN]:"Host is down",[mt.EHOSTUNREACH]:"No route to host",[mt.EALREADY]:"Operation already in progress",[mt.EINPROGRESS]:"Operation now in progress",[mt.ESTALE]:"Stale file handle",[mt.EREMOTEIO]:"Remote I/O error",[mt.EDQUOT]:"Disk quota exceeded"};class Ke extends Error{static fromJSON(t){const n=new Ke(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ke(mt[t],o$[mt[t]],n,r)}constructor(t,n=o$[t],r,i=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=i,this.code=mt[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var wI={exports:{}},l$;function Gwe(){return l$||(l$=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,d||l,h),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],m]:l._events[y].push(m):(l._events[y]=m,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)t.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,m=d.length,y=new Array(m);h<m;h++)y[h]=d[h].fn;return y},o.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,h,m,y){var b=n?n+c:c;if(!this._events[b])return!1;var v=this._events[b],x=arguments.length,_,S;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,d),!0;case 4:return v.fn.call(v.context,u,d,h),!0;case 5:return v.fn.call(v.context,u,d,h,m),!0;case 6:return v.fn.call(v.context,u,d,h,m,y),!0}for(S=1,_=new Array(x-1);S<x;S++)_[S-1]=arguments[S];v.fn.apply(v.context,_)}else{var C=v.length,E;for(S=0;S<C;S++)switch(v[S].once&&this.removeListener(c,v[S].fn,void 0,!0),x){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,u);break;case 3:v[S].fn.call(v[S].context,u,d);break;case 4:v[S].fn.call(v[S].context,u,d,h);break;default:if(!_)for(E=1,_=new Array(x-1);E<x;E++)_[E-1]=arguments[E];v[S].fn.apply(v[S].context,_)}}return!0},o.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,h){var m=n?n+c:c;if(!this._events[m])return this;if(!u)return a(this,m),this;var y=this._events[m];if(y.fn)y.fn===u&&(!h||y.once)&&(!d||y.context===d)&&a(this,m);else{for(var b=0,v=[],x=y.length;b<x;b++)(y[b].fn!==u||h&&!y[b].once||d&&y[b].context!==d)&&v.push(y[b]);v.length?this._events[m]=v.length===1?v[0]:v:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(wI)),wI.exports}var Kwe=Gwe();const LP=ma(Kwe);var eH;let Ywe=class extends LP{constructor(n){super();we(this,eH,"List");we(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,i=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const s=Array.from(this.data);s.splice(n,+i,r),this.data=new Set(s),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...i){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const s=Array.from(this.data),a=s.splice(n,r,...i);return this.data=new Set(s),this.emit("update"),a}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(eH=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function c$(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function fi(e){throw e}const u$=Intl.NumberFormat("en",{notation:"compact"});u$.format.bind(u$);function nm(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function Zwe(e){try{return JSON.parse(e),!0}catch{return!1}}function z3(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function BP(e){return e.at(0).toUpperCase()+e.slice(1)}const Xwe=new TextEncoder;function fp(e){return Xwe.encode(e)}const d$=new TextDecoder;function $P(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return d$.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),d$.decode(t)}function dx(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=dx(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function Jwe(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Qwe={};let e1e="process"in globalThis&&"env"in globalThis.process&&Qwe.U_DEBUG=="true";function fx(...e){e1e&&console.debug("[U]",...e)}const f$=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],t1e=[...f$,...f$.map(e=>BP(e)),"char"],zP=/^(u?int|float)(8|16|32|64|128)$/i;function dK(e){return e=="char"?"uint8":e.toLowerCase()}function UP(e){return zP.test(e.toString())}function U3(e){return e=="char"||zP.test(e.toString().toLowerCase())}function n1e(e){if(!U3(e))throw new TypeError("Not a valid primitive type: "+e)}const h$=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function fK(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function r1e(e){return e!=null&&typeof e=="object"&&"struct"in e}function nE(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function ic(e){return typeof e=="function"&&Symbol.metadata in e&&r1e(e[Symbol.metadata])}function kw(e){return e!=null&&typeof e=="object"&&ic(e.constructor)}function hK(e){if(!kw(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function qP(e){return kw(e)||ic(e)}function pK(e){if(!qP(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function VP(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Fi(e){if(e==null)return 0;if(Array.isArray(e)){let i=0;for(let s=0;s<e.length;s++)i+=Fi(e[s]);return i}if(typeof e=="string")return n1e(e),+dK(e).match(zP)[2]/8;if(VP(e))return e[Symbol.size];pK(e);const t=ic(e)?e:e.constructor;nE(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(ic(e))return r;for(const i of n.members.values()){const s=e[i.name];if(kw(s)&&s.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Fi(s)):r+=Fi(s);continue}if(typeof i.length!="string")continue;let a=0;for(let o=0;o<e[i.length];o++)a+=Fi(qP(s[o])?s[o]:i.type);n.isUnion?r=Math.max(r,a):r+=a}return r}function i1e(e,t){var s;pK(e);const n=ic(e)?e:e.constructor;nE(n);const{struct:r}=n[Symbol.metadata];if(ic(e)||!r.isDynamic)return((s=r.members.get(t))==null?void 0:s.staticOffset)??fi(new Error("Struct does not have member: "+t));let i=0;for(const a of r.members.values()){if(a.name==t)return i;const o=e[a.name];i+=Fi(qP(o)?o:a.type)}throw new Error("Struct does not have member: "+t)}function s1e(e,t){return Math.ceil(e/t)*t}function rm(e={}){return function(n,r){const i=new Map;let s=0,a=!1;for(const{name:o,type:l,length:c}of fK(r)){if(!U3(l)&&!ic(l))throw new TypeError("Not a valid type: "+l);if(typeof c=="string"){const h=i.get(c);if(!h)throw new Error(`"${c}" is undefined or declared after "${o}"`);if(!UP(h.type))throw new Error(`"${c}" is not a number and cannot be used to count "${o}"`)}let u=`${typeof l=="string"?l:l.name} ${o}`;c!==void 0&&(u+=`[${c}]`),i.set(o,{name:o,staticOffset:e.isUnion?0:s,type:U3(l)?dK(l):l,length:c,decl:u});const d=typeof c=="string"||ic(l)&&l[Symbol.metadata].struct.isDynamic?0:Fi(l)*(c||1);a||(a=ic(l)?l[Symbol.metadata].struct.isDynamic:typeof c=="string"),s=e.isUnion?Math.max(s,d):s+d,s=s1e(s,e.align||1),fx("define",n.name+"."+o)}return r.metadata.struct={options:e,members:i,staticSize:s,isDynamic:a,isUnion:e.isUnion??!1},n}}function hx(e,t){return function(n,r){let i=r.name;if(typeof i=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+i.toString()),i=i.toString()),!i)throw new ReferenceError("Invalid name for struct member");return fK(r).push({name:i,type:e,length:t}),n}}function mK(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:fi(new Error("Array lengths must be natural numbers"))}function ca(e){if(VP(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();hK(e),nE(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Fi(e),i=new Uint8Array(r),s=new DataView(i.buffer);fx("serialize",e.constructor.name);let a=0,o=0;for(const l of n.values()){const c=mK(e,l);fx("	",l.decl);for(let u=0;u<Math.abs(c);u++){let d=c!=-1?e[l.name][u]:e[l.name];if(typeof d=="string"&&(d=d.charCodeAt(0)),a=o,o+=kw(d)?Fi(d):Fi(l.type),!UP(l.type)){i.set(d?ca(d):new Uint8Array(Fi(l.type)),a);continue}const h=`set${BP(l.type)}`;if(h=="setInt64"){s.setBigInt64(a,BigInt(d),!t.bigEndian);continue}if(h=="setUint64"){s.setBigUint64(a,BigInt(d),!t.bigEndian);continue}if(h=="setInt128"){s.setBigUint64(a+(t.bigEndian?8:0),d&h$,!t.bigEndian),s.setBigInt64(a+(t.bigEndian?0:8),d>>BigInt(64),!t.bigEndian);continue}if(h=="setUint128"){s.setBigUint64(a+(t.bigEndian?8:0),d&h$,!t.bigEndian),s.setBigUint64(a+(t.bigEndian?0:8),d>>BigInt(64),!t.bigEndian);continue}if(h=="setFloat128"){s.setFloat64(a+(t.bigEndian?8:0),Number(d),!t.bigEndian),s.setBigUint64(a+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}s[h](a,Number(d),!t.bigEndian)}}return i}function rE(e,t){const n=Jwe(t);if(VP(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);hK(e),nE(e.constructor);const{options:r,members:i}=e.constructor[Symbol.metadata].struct,s=new DataView(n.buffer,n.byteOffset,n.byteLength);fx("deserialize",e.constructor.name);let a=0,o=0;for(const l of i.values()){const c=mK(e,l);fx("	",l.decl);for(let u=0;u<Math.abs(c);u++){let d=c!=-1?e[l.name]:e;const h=c!=-1?u:l.name,m=d[h]===null||d[h]===void 0,y=m&&ic(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(a=o,!kw(d[h])&&!y&&(o+=Fi(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,u)+String.fromCharCode(s.getUint8(a))+e[l.name].slice(u+1);continue}if(!UP(l.type)){if(y&&ic(l.type))d[h]??(d[h]=new l.type);else if(m)continue;rE(d[h],new Uint8Array(n.subarray(a))),o+=Fi(d[h]);continue}c&&c!=-1&&(d||(d=[]));const b=`get${BP(l.type)}`;if(b=="getInt64"){d[h]=s.getBigInt64(a,!r.bigEndian);continue}if(b=="getUint64"){d[h]=s.getBigUint64(a,!r.bigEndian);continue}if(b=="getInt128"){d[h]=s.getBigInt64(a+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|s.getBigUint64(a+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){d[h]=s.getBigUint64(a+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|s.getBigUint64(a+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){d[h]=s.getFloat64(a+(r.bigEndian?8:0),!r.bigEndian);continue}d[h]=s[b](a,!r.bigEndian)}}}function a1e(e){function t(n,r){return typeof n=="number"||typeof n=="string"?hx(e,n):hx(e)(n,r)}return t}const Gn=Object.fromEntries(t1e.map(e=>[e,a1e(e)]));function o1e(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const gc={root:"/",pwd:"/",credentials:o1e({uid:0,gid:0}),descriptors:new Map};function gK(e,t){let n="",r=0,i=-1,s=0,a="\0";for(let o=0;o<=e.length;++o){if(o<e.length)a=e[o];else{if(a=="/")break;a="/"}if(a=="/"){if(!(i===o-1||s===1))if(s===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}else if(n.length!==0){n="",r=0,i=o,s=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a==="."&&s!==-1?++s:s=-1}return n}function xd(...e){var t;let n="";for(const i of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:gc.pwd])if(i!=null&&i.length&&(n=`${i}/${n}`,i.startsWith("/")))break;const r=n.startsWith("/");return n=gK(n,!r),r?`/${n}`:n.length?n:"/"}function l1e(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=gK(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function ti(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?l1e(t):"."}function yK(e,t){if(e===t||(e=xd.call(this,e),t=xd.call(this,t),e===t))return"";const n=1,r=e.length,i=r-n,s=1,a=t.length-s,o=i<a?i:a;let l=-1,c=0;for(;c<o;c++){const d=e[n+c];if(d!==t[s+c])break;d==="/"&&(l=c)}if(c===o)if(a>o){if(t[s+c]==="/")return t.slice(s+c+1);if(c===0)return t.slice(s+c)}else i>o&&(e[n+c]==="/"?l=c:c===0&&(l=0));let u="";for(c=n+l+1;c<=r;++c)(c===r||e[c]==="/")&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(s+l)}`}function Vr(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let i=e.length-1;i>=1;--i)if(e[i]==="/"){if(!r){n=i;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function b0(e,t){let n=0,r=-1,i=!0;for(let s=e.length-1;s>=0;--s)if(e[s]==="/"){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":e.slice(n,r)}function Bc(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let i=-1,s=0,a=-1,o=!0,l=e.length-1,c=0;for(;l>=r;--l){if(e[l]==="/"){if(!o){s=l+1;break}continue}a===-1&&(o=!1,a=l+1),e[l]==="."?i===-1?i=l:c!==1&&(c=1):i!==-1&&(c=-1)}if(a!==-1){const u=s===0&&t?1:s;i===-1||c===0||c===1&&i===a-1&&i===s+1?n.base=n.name=e.slice(u,a):(n.name=e.slice(u,i),n.base=e.slice(u,a),n.ext=e.slice(i,a))}return s>0?n.dir=e.slice(0,s-1):t&&(n.dir="/"),n}var Vn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(Vn||(Vn={}));Vn.EMERG+"",Vn.ALERT+"",Vn.CRIT+"",Vn.ERR+"",Vn.WARN+"",Vn.NOTICE+"",Vn.INFO+"",Vn.DEBUG+"";const c1e=new Ywe;function u1e(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};c1e.add(n),b1e(n)}function d1e(e,t){var n,r;if(!(e instanceof Ke))return e.toString();const i=e.code+": "+e.message;if(!e.path)return i;const s=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return i+": "+ti(s,e.path)}function mh(e){return function(t,n={}){return u1e(e,d1e(t,n)),t}}mh(Vn.EMERG);const f1e=mh(Vn.ALERT),iE=mh(Vn.CRIT),po=mh(Vn.ERR),ka=mh(Vn.WARN),HP=mh(Vn.NOTICE),bK=mh(Vn.INFO),jv=mh(Vn.DEBUG);function h1e(e,t){return`\x1B[${t}m${e}\x1B[0m`}function p1e(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[h1e(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}Vn.EMERG+"",Vn.ALERT+"",Vn.CRIT+"",Vn.ERR+"",Vn.WARN+"",Vn.NOTICE+"",Vn.INFO+"",Vn.DEBUG+"",Vn.EMERG+"",Vn.ALERT+"",Vn.CRIT+"",Vn.ERR+"",Vn.WARN+"",Vn.NOTICE+"",Vn.INFO+"",Vn.DEBUG+"";Vn.EMERG+"",Vn.ALERT+"",Vn.CRIT+"",Vn.ERR+"",Vn.WARN+"",Vn.NOTICE+"",Vn.INFO+"",Vn.DEBUG+"",Vn.EMERG+"",Vn.ALERT+"",Vn.CRIT+"",Vn.ERR+"",Vn.WARN+"",Vn.NOTICE+"",Vn.INFO+"",Vn.DEBUG+"";let m1e=e=>[...p1e(e),e.message];function g1e(e){const t=m1e(e);return typeof t=="string"?[t]:Array.from(t)}let y1e=console.error;function b1e(e){e.level>v1e||y1e(...g1e(e))}let v1e=Vn.ALERT;function WP(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function x1e(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function w1e(e,t){if(typeof t!="object"||t===null)throw po(new Ke(mt.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const i=t==null?void 0:t[n];if(i==null){if(!r.required){jv("Using default for option: "+n);continue}throw po(new Ke(mt.EINVAL,"Missing required option: "+n))}const s=(c,u=i)=>{var d;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?i instanceof c:c(i):typeof i===c||((d=i==null?void 0:i.constructor)===null||d===void 0?void 0:d.name)===c};if(Array.isArray(r.type)?r.type.some(c=>s(c)):s(r.type))continue;const a=typeof i=="object"&&"constructor"in i?i.constructor.name:typeof i,o=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,l=Array.isArray(r.type)?`one of ${r.type.map(o).join(", ")}`:o(r.type);throw po(new Ke(mt.EINVAL,`Incorrect type for "${n}": ${a} (expected ${l})`))}}function vK(e){return e!=null&&typeof e=="object"&&"backend"in e&&WP(e.backend)}const GP=0,js=4,Qi=2,HS=1,KP=1,_1e=2,S1e=4,xK=0,Ca=1,ud=2,sE=64,aE=128,C1e=256,oE=512,Up=1024,k1e=65536,E1e=262144,T1e=131072,lE=1052672,A1e=4096,R1e=32768,I1e=16384,N1e=2048,bi=61440,im=49152,Id=40960,sc=32768,sm=24576,ws=16384,am=8192,om=4096,Ew=2048,Tw=1024,M1e=512,j1e=448,wK=256,_K=128,SK=64,P1e=56,CK=32,kK=16,EK=8,O1e=7,TK=4,AK=2,RK=1,D1e=0,Xa=4294967295,IK=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:KP,COPYFILE_FICLONE:_1e,COPYFILE_FICLONE_FORCE:S1e,F_OK:GP,O_APPEND:Up,O_CREAT:sE,O_DIRECT:I1e,O_DIRECTORY:k1e,O_DSYNC:A1e,O_EXCL:aE,O_NOATIME:E1e,O_NOCTTY:C1e,O_NOFOLLOW:T1e,O_NONBLOCK:N1e,O_RDONLY:xK,O_RDWR:ud,O_SYMLINK:R1e,O_SYNC:lE,O_TRUNC:oE,O_WRONLY:Ca,R_OK:js,S_IFBLK:sm,S_IFCHR:am,S_IFDIR:ws,S_IFIFO:om,S_IFLNK:Id,S_IFMT:bi,S_IFREG:sc,S_IFSOCK:im,S_IRGRP:CK,S_IROTH:TK,S_IRUSR:wK,S_IRWXG:P1e,S_IRWXO:O1e,S_IRWXU:j1e,S_ISGID:Tw,S_ISUID:Ew,S_ISVTX:M1e,S_IWGRP:kK,S_IWOTH:AK,S_IWUSR:_K,S_IXGRP:EK,S_IXOTH:RK,S_IXUSR:SK,UV_FS_O_FILEMAP:D1e,W_OK:Qi,X_OK:HS,size_max:Xa},Symbol.toStringTag,{value:"Module"})),W_=BigInt(1e3);class NK{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:i,uid:s,gid:a,size:o,mode:l,ino:c,...u}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const d=Date.now();this.atimeMs=this._convert(t??d),this.mtimeMs=this._convert(n??d),this.ctimeMs=this._convert(r??d),this.birthtimeMs=this._convert(i??d),this.uid=this._convert(s??0),this.gid=this._convert(a??0),this.size=this._convert(o??0),this.ino=this._convert(c??0),this.mode=this._convert(l??420&sc),(this.mode&bi)==0&&(this.mode=this.mode|this._convert(sc)),Object.assign(this,u)}isFile(){return(this.mode&bi)===sc}isDirectory(){return(this.mode&bi)===ws}isSymbolicLink(){return(this.mode&bi)===Id}isSocket(){return(this.mode&bi)===im}isBlockDevice(){return(this.mode&bi)===sm}isCharacterDevice(){return(this.mode&bi)===am}isFIFO(){return(this.mode&bi)===om}toJSON(){return nm(this,q3)}hasAccess(t,n){return oi(n,this._isBigint?new Nd(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*W_}get mtimeNs(){return BigInt(this.mtimeMs)*W_}get ctimeNs(){return BigInt(this.ctimeMs)*W_}get birthtimeNs(){return BigInt(this.birthtimeMs)*W_}}function MK(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<Xa?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<Xa?e.gid=n:r=!1,r}class Nd extends NK{constructor(){super(...arguments),this._isBigint=!1}}class lm extends NK{constructor(){super(...arguments),this._isBigint=!0}}function F1e(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class L1e{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=Xa,this.ffree=Xa}}class B1e{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(Xa),this.ffree=BigInt(Xa)}}var Ti=function(e,t,n,r,i,s){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,h=!1,m=n.length-1;m>=0;m--){var y={};for(var b in r)y[b]=b==="access"?{}:r[b];for(var b in r.access)y.access[b]=r.access[b];y.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(x||null))};var v=(0,n[m])(o==="accessor"?{get:u.get,set:u.set}:u[l],y);if(o==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=a(v.get))&&(u.get=d),(d=a(v.set))&&(u.set=d),(d=a(v.init))&&i.unshift(d)}else(d=a(v))&&(o==="field"?i.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),h=!0},qn=function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},YP=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const Fo=0,$1e=1024;let p$=(()=>{var e,t;let n=[rm()],r,i=[],s,a,o=[],l=[],c,u=[],d=[],h,m=[],y=[],b,v=[],x=[];return s=class{get key(){return this._key}set key(_){this._key=_,this.keySize=_.length}get value(){return this._value.subarray(0,this.valueSize)}set value(_){this._value=_,this.valueSize=_.length}constructor(_,S){this.keySize=qn(this,o,0),this.valueSize=(qn(this,l),qn(this,u,0)),this._key=(qn(this,d),qn(this,m,"")),this._value=(qn(this,y),qn(this,v,new Uint8Array($1e))),qn(this,x),_&&(this.key=_),S&&(this.value=S)}},YP(s,"Attribute"),(()=>{const _=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;a=[(e=Gn).uint32.bind(e)],c=[(t=Gn).uint32.bind(t)],h=[Gn.char("keySize")],b=[Gn.uint8("valueSize")],Ti(null,null,a,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:S=>"keySize"in S,get:S=>S.keySize,set:(S,C)=>{S.keySize=C}},metadata:_},o,l),Ti(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:S=>"valueSize"in S,get:S=>S.valueSize,set:(S,C)=>{S.valueSize=C}},metadata:_},u,d),Ti(null,null,h,{kind:"field",name:"_key",static:!1,private:!1,access:{has:S=>"_key"in S,get:S=>S._key,set:(S,C)=>{S._key=C}},metadata:_},m,y),Ti(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:S=>"_value"in S,get:S=>S._value,set:(S,C)=>{S._value=C}},metadata:_},v,x),Ti(null,r={value:s},n,{kind:"class",name:s.name,metadata:_},null,i),s=r.value,_&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_}),qn(s,i)})(),s})(),Zf=(()=>{var e;let t=[rm()],n,r=[],i,s,a=[],o=[],l,c=[],u=[];return i=class{has(d){return this.data.some(h=>h.key==d)}get(d){return this.data.find(h=>h.key==d)}set(d,h){const m=this.get(d);if(m){m.value=h;return}this.data.push(new p$(d,h)),this.size++}remove(d){const h=this.data.findIndex(m=>m.key==d);return h===-1?!1:(this.data.splice(h,1),this.size--,!0)}keys(){return this.data.map(d=>d.key)}values(){return this.data.map(d=>d.value)}entries(){return this.data.map(d=>[d.key,d.value])}constructor(){this.size=qn(this,a,0),this.data=(qn(this,o),qn(this,c,[])),qn(this,u)}},YP(i,"Attributes"),(()=>{const d=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[(e=Gn).uint32.bind(e)],l=[hx(p$,"size")],Ti(null,null,s,{kind:"field",name:"size",static:!1,private:!1,access:{has:h=>"size"in h,get:h=>h.size,set:(h,m)=>{h.size=m}},metadata:d},a,o),Ti(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:h=>"data"in h,get:h=>h.data,set:(h,m)=>{h.data=m}},metadata:d},c,u),Ti(null,n={value:i},t,{kind:"class",name:i.name,metadata:d},null,r),i=n.value,d&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),qn(i,r)})(),i})();const q3=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],z1e=4;var mo;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(mo||(mo={}));let bs=(()=>{var e,t,n,r,i,s,a,o,l,c,u,d,h,m,y,b;let v=[rm()],x,_=[],S,C,E=[],A=[],R,N=[],M=[],P,L=[],O=[],V,F=[],J=[],U,G=[],$=[],ne,H=[],te=[],ee,se=[],he=[],ce,Me=[],je=[],Ne,Ce=[],Ue=[],et,qe=[],Re=[],K,ge=[],Ae=[],le,oe=[],ie=[],Ee,Be=[],ke=[],ct,It=[],ht=[],Ot,zt=[],Bt=[],rn,ve=[],D=[],Z,pe=[],Oe=[],xe,Ie=[],de=[];var bt=S=class{constructor(St){if(this.data=qn(this,E,z3(0,Xa)),this.__data_old=(qn(this,A),qn(this,N,0)),this.size=(qn(this,M),qn(this,L,0)),this.mode=(qn(this,O),qn(this,F,0)),this.nlink=(qn(this,J),qn(this,G,1)),this.uid=(qn(this,$),qn(this,H,0)),this.gid=(qn(this,te),qn(this,se,0)),this.atimeMs=(qn(this,he),qn(this,Me,Date.now())),this.birthtimeMs=(qn(this,je),qn(this,Ce,Date.now())),this.mtimeMs=(qn(this,Ue),qn(this,qe,Date.now())),this.ctimeMs=(qn(this,Re),qn(this,ge,Date.now())),this.ino=(qn(this,Ae),qn(this,oe,z3(0,Xa))),this.__ino_old=(qn(this,ie),qn(this,Be,0)),this.flags=(qn(this,ke),qn(this,It,0)),this.__after_flags=(qn(this,ht),qn(this,zt,0)),this.version=(qn(this,Bt),qn(this,ve,0)),this.__padding=(qn(this,D),qn(this,pe,[])),this.attributes=(qn(this,Oe),qn(this,Ie,new Zf)),qn(this,de),!!St){if(!("byteLength"in St)){Object.assign(this,St);return}if(St.byteLength<Fi(bt))throw iE(new Ke(mt.EIO,"Buffer is too small to create an inode"));rE(this,St)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...nm(this,q3),attributes:this.attributes}}toStats(){return new Nd(this)}update(St){if(!St)return!1;let z=!1;for(const Ve of q3)St[Ve]!==void 0&&(Ve=="ino"||Ve=="data"||this[Ve]!==St[Ve]&&(Ve=="atimeMs"&&this.flags&mo.NoAtime||(this[Ve]=St[Ve],z=!0)));return St.attributes&&(this.attributes=St.attributes,z=!0),z&&(this.ctimeMs=Date.now()),z}};return YP(S,"Inode"),(()=>{const St=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=Gn).uint32.bind(e)],R=[(t=Gn).uint32.bind(t)],P=[(n=Gn).uint32.bind(n)],V=[(r=Gn).uint16.bind(r)],U=[(i=Gn).uint32.bind(i)],ne=[(s=Gn).uint32.bind(s)],ee=[(a=Gn).uint32.bind(a)],ce=[(o=Gn).float64.bind(o)],Ne=[(l=Gn).float64.bind(l)],et=[(c=Gn).float64.bind(c)],K=[(u=Gn).float64.bind(u)],le=[(d=Gn).uint32.bind(d)],Ee=[(h=Gn).uint32.bind(h)],ct=[(m=Gn).uint32.bind(m)],Ot=[(y=Gn).uint16.bind(y)],rn=[(b=Gn).uint32.bind(b)],Z=[Gn.uint8(48)],xe=[hx(Zf)],Ti(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:z=>"data"in z,get:z=>z.data,set:(z,Ve)=>{z.data=Ve}},metadata:St},E,A),Ti(null,null,R,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:z=>"__data_old"in z,get:z=>z.__data_old,set:(z,Ve)=>{z.__data_old=Ve}},metadata:St},N,M),Ti(null,null,P,{kind:"field",name:"size",static:!1,private:!1,access:{has:z=>"size"in z,get:z=>z.size,set:(z,Ve)=>{z.size=Ve}},metadata:St},L,O),Ti(null,null,V,{kind:"field",name:"mode",static:!1,private:!1,access:{has:z=>"mode"in z,get:z=>z.mode,set:(z,Ve)=>{z.mode=Ve}},metadata:St},F,J),Ti(null,null,U,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:z=>"nlink"in z,get:z=>z.nlink,set:(z,Ve)=>{z.nlink=Ve}},metadata:St},G,$),Ti(null,null,ne,{kind:"field",name:"uid",static:!1,private:!1,access:{has:z=>"uid"in z,get:z=>z.uid,set:(z,Ve)=>{z.uid=Ve}},metadata:St},H,te),Ti(null,null,ee,{kind:"field",name:"gid",static:!1,private:!1,access:{has:z=>"gid"in z,get:z=>z.gid,set:(z,Ve)=>{z.gid=Ve}},metadata:St},se,he),Ti(null,null,ce,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:z=>"atimeMs"in z,get:z=>z.atimeMs,set:(z,Ve)=>{z.atimeMs=Ve}},metadata:St},Me,je),Ti(null,null,Ne,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:z=>"birthtimeMs"in z,get:z=>z.birthtimeMs,set:(z,Ve)=>{z.birthtimeMs=Ve}},metadata:St},Ce,Ue),Ti(null,null,et,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:z=>"mtimeMs"in z,get:z=>z.mtimeMs,set:(z,Ve)=>{z.mtimeMs=Ve}},metadata:St},qe,Re),Ti(null,null,K,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:z=>"ctimeMs"in z,get:z=>z.ctimeMs,set:(z,Ve)=>{z.ctimeMs=Ve}},metadata:St},ge,Ae),Ti(null,null,le,{kind:"field",name:"ino",static:!1,private:!1,access:{has:z=>"ino"in z,get:z=>z.ino,set:(z,Ve)=>{z.ino=Ve}},metadata:St},oe,ie),Ti(null,null,Ee,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:z=>"__ino_old"in z,get:z=>z.__ino_old,set:(z,Ve)=>{z.__ino_old=Ve}},metadata:St},Be,ke),Ti(null,null,ct,{kind:"field",name:"flags",static:!1,private:!1,access:{has:z=>"flags"in z,get:z=>z.flags,set:(z,Ve)=>{z.flags=Ve}},metadata:St},It,ht),Ti(null,null,Ot,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:z=>"__after_flags"in z,get:z=>z.__after_flags,set:(z,Ve)=>{z.__after_flags=Ve}},metadata:St},zt,Bt),Ti(null,null,rn,{kind:"field",name:"version",static:!1,private:!1,access:{has:z=>"version"in z,get:z=>z.version,set:(z,Ve)=>{z.version=Ve}},metadata:St},ve,D),Ti(null,null,Z,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:z=>"__padding"in z,get:z=>z.__padding,set:(z,Ve)=>{z.__padding=Ve}},metadata:St},pe,Oe),Ti(null,null,xe,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:z=>"attributes"in z,get:z=>z.attributes,set:(z,Ve)=>{z.attributes=Ve}},metadata:St},Ie,de),Ti(null,x={value:S},v,{kind:"class",name:S.name,metadata:St},null,_),bt=S=x.value,St&&Object.defineProperty(S,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:St}),qn(S,_)})(),bt=S})();function U1e(e){return(e.mode&bi)===sc}function hc(e){return(e.mode&bi)===ws}function v0(e){return(e.mode&bi)===Id}function q1e(e){return(e.mode&bi)===im}function px(e){return(e.mode&bi)===sm}function mx(e){return(e.mode&bi)===am}function V1e(e){return(e.mode&bi)===om}function oi(e,t,n){const r=(e==null?void 0:e.credentials)||gc.credentials;if(v0(t)||r.euid===0||r.egid===0)return!0;let i=0;return r.uid===t.uid&&(t.mode&wK&&(i|=js),t.mode&_K&&(i|=Qi),t.mode&SK&&(i|=HS)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&CK&&(i|=js),t.mode&kK&&(i|=Qi),t.mode&EK&&(i|=HS)),t.mode&TK&&(i|=js),t.mode&AK&&(i|=Qi),t.mode&RK&&(i|=HS),(i&n)===n}const m$=1;class sC extends Map{constructor(){super(...arguments),this.maxSize=Xa}toJSON(){return{version:m$,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Fi(bs);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ke.With("ENOENT",t);if((n.mode&bi)!=ws)throw Ke.With("ENOTDIR",t);const r={};for(const i of this.keys())Vr(i)==t&&i!=t&&(r[b0(i)]=this.get(i).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&bi)!=ws)continue;const i={};for(const s of this.keys())Vr(s)==n&&s!=n&&(i[b0(s)]=this.get(s).ino);t.set(n,i)}return t}fromJSON(t){var n;if(t.version!=m$)throw new Ke(mt.EINVAL,"Index version mismatch");this.clear();for(const[r,i]of Object.entries(t.entries))(n=i.data)!==null&&n!==void 0||(i.data=z3(1,Xa)),r=="/"&&(i.ino=0),this.set(r,new bs(i));return this}static parse(t){if(!Zwe(t))throw new Ke(mt.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new sC;return r.fromJSON(n),r}}const _I=4096;let ZP=class V3{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===V3.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===V3.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:i}=await this.stat(t),{start:s=0,end:a=i}=n;for(let o=s;o<a;o+=_I){const l=o+_I>a?a-o:_I,c=new Uint8Array(l);await this.read(t,c,o,o+l).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let i=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(s,a)=>{let o=!1;const l=u=>{o=!0,a.error(u)},{size:c}=await this.stat(t);await this.write(t,s,i).catch(l),!o&&(i+=s.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,i)}).catch(l))}})}};function Ba(e){return JSON.parse($P(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function ul(e){return fp(JSON.stringify(e))}function gh(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ke(mt.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function aC(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ke(mt.EINVAL,"Invalid time.")}}function jn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ke(mt.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ke(mt.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ke(mt.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:xd(e)}function dd(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:gh("mode"in e?e==null?void 0:e.mode:null,r)}}class H1e{constructor(t,n,r,i){we(this,"id");we(this,"_size");we(this,"options");we(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),i==null||i.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const i=t-r.offset;r.data.byteLength>i&&(r.data=r.data.subarray(0,i)),r.ranges=r.ranges.filter(s=>s.start<t).map(s=>s.end>t?{start:s.start,end:t}:s)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],i=this.regions[n+1];if(i.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...i.ranges),r.ranges.sort((s,a)=>s.start-a.start),r.ranges=r.ranges.reduce((s,a)=>(!s.length||s.at(-1).end<a.start?s.push(a):s.at(-1).end=Math.max(s.at(-1).end,a.end),s),[]),r.data=dx(r.data,i.offset+i.data.byteLength),r.data.set(i.data,i.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const s of i.ranges)if(!(s.end<=t)&&(s.start>=n||(s.start>t&&r.push({start:t,end:Math.min(s.start,n)}),s.end>t&&(t=Math.max(t,s.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const s of this.regions){if(s.offset>=n)break;for(const a of s.ranges)if(!(a.end<=t)){if(a.start>=n)break;r.push({start:Math.max(t,a.start),end:Math.min(n,a.end)})}}r.sort((s,a)=>s.start-a.start);const i=[];for(const s of r){const a=i.at(-1);a&&s.start<=a.end?a.end=Math.max(a.end,s.end):i.push(s)}return i}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,i=this.regionAt(n);if(i)return i.data=dx(i.data,r),i.data.set(t,n),i.ranges.push({start:n,end:r}),i.ranges.sort((o,l)=>o.start-l.start),this.collect(),this;const s={data:t,offset:n,ranges:[{start:n,end:r}]},a=this.regions.findIndex(o=>o.offset>n);return a==-1?this.regions.push(s):this.regions.splice(a,0,s),this.collect(),this}}var SI,CI,kI;(SI=Promise.withResolvers)!==null&&SI!==void 0||(Promise.withResolvers=(ka("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}));(CI=Symbol.dispose)!==null&&CI!==void 0||(Symbol.dispose=(ka("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(kI=Symbol.asyncDispose)!==null&&kI!==void 0||(Symbol.asyncDispose=(ka("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class jK{constructor(t){this.store=t}}class W1e extends jK{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class H3 extends jK{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,i;(r=(i=this.store).cache)!==null&&r!==void 0||(i.cache=new Map);const s=this.store.cache.get(t);return s?(n&&(s.size=n.size),s):n?new H1e(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var i;const s=this._cached(t);if(!s)return;r??(r=s.size);const a=s.missing(n,r);for(const{start:l,end:c}of a)this.async(this.get(t,l,c));if(a.length)throw po(Ke.With("EAGAIN",(i=this.store._fs)===null||i===void 0?void 0:i._path(t)));const o=s.regionAt(n);if(!o){ka("Missing cache region for "+t);return}return o.data.subarray(n-o.offset,r-o.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class G1e{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const i=await this.raw.get(t,n,r);return this.stash(t),i}getSync(t,n=0,r){const i=this.raw.getSync(t,n,r);return this.stash(t),i}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const i=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,i),n)}catch(s){if(!(this.raw instanceof H3))throw s;const o=this.raw._cached(t);if(!o)throw s;for(const l of o.cached(n,i??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const i=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,i),n)}catch(s){if(!(this.raw instanceof H3))throw s;const o=this.raw._cached(t);if(!o)throw s;for(const l of o.cached(n,i??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var ki=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Ei=function(e){return function(t){function n(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,i=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&i===1)return i=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(a).then(s,function(o){return n(o),s()})}else i|=1}catch(o){n(o)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class PK extends ZP{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[i,s]of this._ids){const a=yK(t,i);if(a.startsWith(".."))continue;let o=ti(n,a);o.endsWith("/")&&(o=o.slice(0,-1)),r.push({oldKey:i,newKey:o,ino:s})}for(const{oldKey:i,newKey:s,ino:a}of r){this._ids.delete(i),this._ids.set(s,a);const o=this._paths.get(a);if(!o){ka("Missing paths in table for ino "+a);continue}o.delete(i),o.add(s)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,i;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,jv(this.name+": supports features: "+((i=this.store.flags)===null||i===void 0?void 0:i.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=ki(n,this.transaction(),!0),i=t.directories();for(const[s,a]of t)this._add(a.ino,s),await r.set(a.ino,ca(a)),i.has(s)&&await r.set(a.data,ul(i.get(s)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Ei(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=ki(n,this.transaction(),!1),i=t.directories();for(const[s,a]of t)this._add(a.ino,s),r.setSync(a.ino,ca(a)),i.has(s)&&r.setSync(a.data,ul(i.get(s)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Ei(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new sC,i=ki(n,this.transaction(),!0),s=[["/",0]],a=c$(Ke.With("EDEADLK"));for(;s.length;){const[o,l]=s.shift(),c=new bs(await i.get(l));if(r.set(o,c),c.mode&ws){const u=Ba((t=await i.get(c.data))!==null&&t!==void 0?t:fi(Ke.With("ENODATA",o)));for(const[d,h]of Object.entries(u))s.push([ti(o,d),h])}}return a(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Ei(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new sC,i=ki(n,this.transaction(),!1),s=[["/",0]],a=c$(Ke.With("EDEADLK"));for(;s.length;){const[o,l]=s.shift(),c=new bs(i.getSync(l));if(r.set(o,c),c.mode&ws){const u=Ba((t=i.getSync(c.data))!==null&&t!==void 0?t:fi(Ke.With("ENODATA",o)));for(const[d,h]of Object.entries(u))s.push([ti(o,d),h])}}return a(),r}catch(r){n.error=r,n.hasError=!0}finally{Ei(n)}}async rename(t,n){var r,i,s;const a={stack:[],error:void 0,hasError:!1};try{const o=ki(a,this.transaction(),!0),l=Bc(t),c=Bc(n),u=await this.findInode(o,l.dir,"rename"),d=Ba((r=await o.get(u.data))!==null&&r!==void 0?r:fi(Ke.With("ENODATA",l.dir,"rename")));if(!d[l.base])throw Ke.With("ENOENT",t,"rename");const h=d[l.base];if(h!=this._ids.get(t)&&po(`Ino mismatch while renaming ${t} to ${n}`),delete d[l.base],(c.dir+"/").startsWith(t+"/"))throw new Ke(mt.EBUSY,l.dir);const m=c.dir==l.dir,y=m?u:await this.findInode(o,c.dir,"rename"),b=m?d:Ba((i=await o.get(y.data))!==null&&i!==void 0?i:fi(Ke.With("ENODATA",c.dir,"rename")));if(b[c.base]){const v=new bs((s=await o.get(b[c.base]))!==null&&s!==void 0?s:fi(Ke.With("ENOENT",n,"rename")));if(!v.toStats().isFile())throw Ke.With("EPERM",n,"rename");await o.remove(v.data),await o.remove(b[c.base])}b[c.base]=h,await o.set(u.data,ul(d)),await o.set(y.data,ul(b)),await o.commit(),this._move(t,n)}catch(o){a.error=o,a.hasError=!0}finally{const o=Ei(a);o&&await o}}renameSync(t,n){var r,i,s;const a={stack:[],error:void 0,hasError:!1};try{const o=ki(a,this.transaction(),!1),l=Bc(t),c=Bc(n),u=this.findInodeSync(o,l.dir,"rename"),d=Ba((r=o.getSync(u.data))!==null&&r!==void 0?r:fi(Ke.With("ENODATA",l.dir,"rename")));if(!d[l.base])throw Ke.With("ENOENT",t,"rename");const h=d[l.base];if(h!=this._ids.get(t)&&po(`Ino mismatch while renaming ${t} to ${n}`),delete d[l.base],(c.dir+"/").startsWith(t+"/"))throw new Ke(mt.EBUSY,l.dir);const m=c.dir===l.dir,y=m?u:this.findInodeSync(o,c.dir,"rename"),b=m?d:Ba((i=o.getSync(y.data))!==null&&i!==void 0?i:fi(Ke.With("ENODATA",c.dir,"rename")));if(b[c.base]){const v=new bs((s=o.getSync(b[c.base]))!==null&&s!==void 0?s:fi(Ke.With("ENOENT",n,"rename")));if(!v.toStats().isFile())throw Ke.With("EPERM",n,"rename");o.removeSync(v.data),o.removeSync(b[c.base])}b[c.base]=h,o.setSync(u.data,ul(d)),o.setSync(y.data,ul(b)),o.commitSync(),this._move(t,n)}catch(o){a.error=o,a.hasError=!0}finally{Ei(a)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=ki(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Ei(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=ki(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Ei(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const i=ki(r,this.transaction(),!0),s=await this.findInode(i,t,"touch");s.update(n)&&(this._add(s.ino,t),i.setSync(s.ino,ca(s))),await i.commit()}catch(i){r.error=i,r.hasError=!0}finally{const i=Ei(r);i&&await i}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const i=ki(r,this.transaction(),!1),s=this.findInodeSync(i,t,"touch");s.update(n)&&(this._add(s.ino,t),i.setSync(s.ino,ca(s))),i.commitSync()}catch(i){r.error=i,r.hasError=!0}finally{Ei(r)}}async createFile(t,n){return n.mode|=sc,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=sc,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ke.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ke.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=ws,await this.commitNew(t,n,fp("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=ws,this.commitNewSync(t,n,fp("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const i=ki(r,this.transaction(),!0),s=await this.findInode(i,t,"readdir");return Object.keys(Ba((n=await i.get(s.data))!==null&&n!==void 0?n:fi(Ke.With("ENOENT",t,"readdir"))))}catch(i){r.error=i,r.hasError=!0}finally{const i=Ei(r);i&&await i}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const i=ki(r,this.transaction(),!1),s=this.findInodeSync(i,t,"readdir");return Object.keys(Ba((n=i.getSync(s.data))!==null&&n!==void 0?n:fi(Ke.With("ENOENT",t,"readdir"))))}catch(i){r.error=i,r.hasError=!0}finally{Ei(r)}}async sync(t,n,r){const i={stack:[],error:void 0,hasError:!1};try{const s=ki(i,this.transaction(),!0),a=await this.findInode(s,t,"sync");n&&await s.set(a.data,n),a.update(r)&&(this._add(a.ino,t),await s.set(a.ino,ca(a))),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Ei(i);s&&await s}}syncSync(t,n,r){const i={stack:[],error:void 0,hasError:!1};try{const s=ki(i,this.transaction(),!1),a=this.findInodeSync(s,t,"sync");n&&s.setSync(a.data,n),a.update(r)&&(this._add(a.ino,t),s.setSync(a.ino,ca(a))),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Ei(i)}}async link(t,n){var r;const i={stack:[],error:void 0,hasError:!1};try{const s=ki(i,this.transaction(),!0),a=Vr(n),o=await this.findInode(s,a,"link"),l=Ba((r=await s.get(o.data))!==null&&r!==void 0?r:fi(Ke.With("ENOENT",a,"link"))),c=await this.findInode(s,t,"link");c.nlink++,l[b0(n)]=c.ino,this._add(c.ino,n),await s.set(c.ino,ca(c)),await s.set(o.data,ul(l)),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Ei(i);s&&await s}}linkSync(t,n){var r;const i={stack:[],error:void 0,hasError:!1};try{const s=ki(i,this.transaction(),!1),a=Vr(n),o=this.findInodeSync(s,a,"link"),l=Ba((r=s.getSync(o.data))!==null&&r!==void 0?r:fi(Ke.With("ENOENT",a,"link"))),c=this.findInodeSync(s,t,"link");c.nlink++,l[b0(n)]=c.ino,this._add(c.ino,n),s.setSync(c.ino,ca(c)),s.setSync(o.data,ul(l)),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Ei(i)}}async read(t,n,r,i){var s;const a={stack:[],error:void 0,hasError:!1};try{const o=ki(a,this.transaction(),!0),l=await this.findInode(o,t,"read");if(l.size==0)return;const c=(s=await o.get(l.data,r,i))!==null&&s!==void 0?s:fi(Ke.With("ENODATA",t,"read")),u=o.flag("partial")?c:c.subarray(r,i);u.byteLength>n.byteLength&&po(`Trying to place ${u.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(u)}catch(o){a.error=o,a.hasError=!0}finally{const o=Ei(a);o&&await o}}readSync(t,n,r,i){var s;const a={stack:[],error:void 0,hasError:!1};try{const o=ki(a,this.transaction(),!1),l=this.findInodeSync(o,t,"read");if(l.size==0)return;const c=(s=o.getSync(l.data,r,i))!==null&&s!==void 0?s:fi(Ke.With("ENODATA",t,"read")),u=o.flag("partial")?c:c.subarray(r,i);u.byteLength>n.byteLength&&po(`Trying to place ${u.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(u)}catch(o){a.error=o,a.hasError=!0}finally{Ei(a)}}async write(t,n,r){var i;const s={stack:[],error:void 0,hasError:!1};try{const a=ki(s,this.transaction(),!0),o=await this.findInode(a,t,"write");let l=n;a.flag("partial")||(l=dx((i=await a.get(o.data))!==null&&i!==void 0?i:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await a.set(o.data,l,r),this._add(o.ino,t),await a.commit()}catch(a){s.error=a,s.hasError=!0}finally{const a=Ei(s);a&&await a}}writeSync(t,n,r){var i;const s={stack:[],error:void 0,hasError:!1};try{const a=ki(s,this.transaction(),!1),o=this.findInodeSync(a,t,"write");let l=n;a.flag("partial")||(l=dx((i=a.getSync(o.data))!==null&&i!==void 0?i:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),a.setSync(o.data,l,r),this._add(o.ino,t),a.commitSync()}catch(a){s.error=a,s.hasError=!0}finally{Ei(s)}}transaction(){return new G1e(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=ki(t,this.transaction(),!0);if(await n.get(Fo))return;const r=new bs({ino:Fo,data:1,mode:511|ws});await n.set(r.data,fp("{}")),this._add(Fo,"/"),await n.set(Fo,ca(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Ei(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=ki(t,this.transaction(),!1);if(n.getSync(Fo))return;const r=new bs({ino:Fo,data:1,mode:511|ws});n.setSync(r.data,fp("{}")),this._add(Fo,"/"),n.setSync(Fo,ca(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Ei(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){ka("Attempted to populate tables after initialization");return}jv("Populating tables with existing store metadata");const n=ki(t,this.transaction(),!0),r=await n.get(Fo);if(!r){HP("Store does not have a root inode");const o=new bs({ino:Fo,data:1,mode:511|ws});await n.set(o.data,fp("{}")),this._add(Fo,"/"),await n.set(Fo,ca(o)),await n.commit();return}if(r.length<Fi(bs)){iE("Store contains an invalid root inode. Refusing to populate tables");return}const i=new Set;let s=0;const a=[["/",Fo]];for(;a.length>0;){s++;const[o,l]=a.shift();this._add(l,o);const c=await n.get(l);if(!c){ka("Store is missing data for inode: "+l);continue}if(c.length<Fi(bs)){ka(`Invalid inode size for ino ${l}: ${c.length}`);continue}const u=new bs(c);if((u.mode&ws)!=ws||i.has(l))continue;i.add(l);const d=await n.get(u.data);if(!d){ka("Store is missing directory data: "+u.data);continue}const h=Ba(d);for(const[m,y]of Object.entries(h))a.push([ti(o,m),y])}jv(`Added ${s} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Ei(t);n&&await n}}async findInode(t,n,r){var i;const s=this._ids.get(n);if(s===void 0)throw Ke.With("ENOENT",n,r);return new bs((i=await t.get(s))!==null&&i!==void 0?i:fi(Ke.With("ENOENT",n,r)))}findInodeSync(t,n,r){var i;const s=this._ids.get(n);if(s===void 0)throw Ke.With("ENOENT",n,r);return new bs((i=t.getSync(s))!==null&&i!==void 0?i:fi(Ke.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const i=this._lastID;if(i>Xa)throw po(new Ke(mt.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(i,t),i}async commitNew(t,n,r,i){var s;const a={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ke.With("EEXIST",t,i);const o=ki(a,this.transaction(),!0),{dir:l,base:c}=Bc(t),u=await this.findInode(o,l,i),d=Ba((s=await o.get(u.data))!==null&&s!==void 0?s:fi(Ke.With("ENOENT",l,i)));if(d[c])throw Ke.With("EEXIST",t,i);const h=this.allocNew(t,i),m=new bs({...n,ino:h,data:h+1,size:r.byteLength});return await o.set(m.ino,ca(m)),await o.set(m.data,r),d[c]=m.ino,await o.set(u.data,ul(d)),await o.commit(),m}catch(o){a.error=o,a.hasError=!0}finally{const o=Ei(a);o&&await o}}commitNewSync(t,n,r,i){var s;const a={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ke.With("EEXIST",t,i);const o=ki(a,this.transaction(),!1),{dir:l,base:c}=Bc(t),u=this.findInodeSync(o,l,i),d=Ba((s=o.getSync(u.data))!==null&&s!==void 0?s:fi(Ke.With("ENOENT",l,i)));if(d[c])throw Ke.With("EEXIST",t,i);const h=this.allocNew(t,i),m=new bs({...n,ino:h,data:h+1,size:r.byteLength});return o.setSync(m.ino,ca(m)),o.setSync(m.data,r),d[c]=m.ino,o.setSync(u.data,ul(d)),o.commitSync(),m}catch(o){a.error=o,a.hasError=!0}finally{Ei(a)}}async remove(t,n){var r,i;const s={stack:[],error:void 0,hasError:!1};try{const a=n?"rmdir":"unlink",o=ki(s,this.transaction(),!0),{dir:l,base:c}=Bc(t),u=await this.findInode(o,l,a),d=Ba((r=await o.get(u.data))!==null&&r!==void 0?r:fi(Ke.With("ENOENT",l,a)));if(!d[c])throw Ke.With("ENOENT",t,a);const h=d[c],m=new bs((i=await o.get(h))!==null&&i!==void 0?i:fi(Ke.With("ENOENT",t,a)));if(delete d[c],!n&&hc(m))throw Ke.With("EISDIR",t,a);await o.set(u.data,ul(d)),m.nlink>1?(m.update({nlink:m.nlink-1}),await o.set(m.ino,ca(m))):(await o.remove(m.data),await o.remove(h),this._remove(h)),await o.commit()}catch(a){s.error=a,s.hasError=!0}finally{const a=Ei(s);a&&await a}}removeSync(t,n){var r,i;const s={stack:[],error:void 0,hasError:!1};try{const a=n?"rmdir":"unlink",o=ki(s,this.transaction(),!1),{dir:l,base:c}=Bc(t),u=this.findInodeSync(o,l,a),d=Ba((r=o.getSync(u.data))!==null&&r!==void 0?r:fi(Ke.With("ENOENT",l,a))),h=d[c];if(!h)throw Ke.With("ENOENT",t,a);const m=new bs((i=o.getSync(h))!==null&&i!==void 0?i:fi(Ke.With("ENOENT",t,a)));if(delete d[c],!n&&hc(m))throw Ke.With("EISDIR",t,a);o.setSync(u.data,ul(d)),m.nlink>1?(m.update({nlink:m.nlink-1}),o.setSync(m.ino,ca(m))):(o.removeSync(m.data),o.removeSync(h),this._remove(h)),o.commitSync()}catch(a){s.error=a,s.hasError=!0}finally{Ei(s)}}}class K1e extends W1e{async keys(){return this.store.keys()}async get(t){var n,r,i;return await((i=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&i!==void 0?i:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class Y1e extends Map{constructor(t=Xa,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new K1e(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const Z1e={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new PK(new Y1e(e,t));return n.checkRootSync(),n}},X1e=Z1e;let Ps=!0;class g$ extends LP{get cursor(){return this._cursor}constructor(t,n,r,i=!1){super(),this.input=t,this.output=n,this.terminal=i,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=s=>{if(!(this._paused||this._closed)){this._buffer+=typeof s=="string"?s:s.toString("utf8");for(let a=this._buffer.indexOf(`
`);a>=0;a=this._buffer.indexOf(`
`)){let o=this._buffer.substring(0,a);o.endsWith("\r")&&(o=o.substring(0,o.length-1)),this._buffer=this._buffer.substring(a+1),this.line=o,o.trim()&&!o.trim().match(/^\s*$/)&&this._history.at(-1)!=o&&(this._history.push(o),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",o)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;dl(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;dl(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);G_(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);G_(this.output,0),dl(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const i=this.line.slice(0,r+1)+this.line.slice(this._cursor),s=r+1;this._renderLine(i),this._cursor=s,this._cursor=s,dl(this.output,-i.length,0),dl(this.output,s,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const i=Math.max(0,Math.min(this.line.length,this._cursor+r));if(i==this._cursor)return;dl(this.output,r,0),this._cursor=i,this._cursor=i;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(dl(this.output,-this._cursor,0),dl(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);G_(this.output,0),dl(this.output,0,0),this.output.write(this._prompt+r),this.line=r,dl(this.output,-r.length,0),dl(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(G_(this.output,0),dl(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const i=typeof n=="function"?n:r;if(this._closed||!this.output){i("");return}this.output.write(t),this.once("line",i)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return ka("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return ka("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",i=>n({value:i,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function J1e(e,t,n,r){return"input"in e?new g$(e.input,e.output,e.completer,e.terminal):new g$(e,t,n,r)}function G_(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function dl(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class oC{get position(){return this.flag&Up?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,i,s,a){this.context=t,this.path=n,this.fs=r,this.internalPath=i,this.flag=s,this.inode=a,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&lE||this.inode.flags&mo.Sync)}sync(){if(this.closed)throw Ke.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ke.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ke.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ke.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ke.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ke.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Ca||this.flag&ud))throw new Ke(mt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,i=this.position){if(this.closed)throw Ke.With("EBADF",this.path,"write");if(!(this.flag&Ca||this.flag&ud))throw new Ke(mt.EPERM,"File not opened with a writeable mode");if(this.inode.flags&mo.Immutable)throw new Ke(mt.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const s=i+r,a=t.subarray(n,n+r);return!mx(this.inode)&&!px(this.inode)&&s>this.inode.size&&(this.inode.size=s),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=i+a.byteLength,this.fs.writeSync(this.internalPath,a,i),this._isSync&&this.sync(),a.byteLength}read(t,n=0,r=t.byteLength-n,i=this.position){if(this.closed)throw Ke.With("EBADF",this.path,"read");if(this.flag&Ca)throw new Ke(mt.EPERM,"File not opened with a readable mode");this.inode.flags&mo.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let s=i+r;!mx(this.inode)&&!px(this.inode)&&s>this.inode.size&&(s=i+Math.max(this.inode.size-i,0)),this._position=s;const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,a.subarray(n,n+r),i,s),this._isSync&&this.sync(),s-i}chmod(t){if(this.closed)throw Ke.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>bi?-61441:bi)|t,(this._isSync||t>bi)&&this.sync()}chown(t,n){if(this.closed)throw Ke.With("EBADF",this.path,"chown");this.dirty=!0,MK(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ke.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ke.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ke.With("EBADF",this.path,"streamWrite");if(this.inode.flags&mo.Immutable)throw new Ke(mt.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function lC(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:gc.descriptors,i=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(i,e),i}function Ma(e,t){var n;const i=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:gc.descriptors).get(t);if(!i)throw new Ke(mt.EBADF);return i}function OK(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:gc.descriptors).delete(t)}const Q1e=/[rwasx]{1,2}\+?/;function fd(e){if(typeof e=="number")return e;if(!Q1e.test(e))throw new Ke(mt.EINVAL,"Invalid flag string: "+e);return e_e(e)}function e_e(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ke(mt.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?xK:sE;return e.includes("w")&&(t|=oE),e.includes("a")&&(t|=Up),e.includes("+")?t|=ud:e.includes("r")||(t|=Ca),e.includes("s")&&(t|=lE),e.includes("x")&&(t|=aE),t}function DK(e){let t=0;return e&Ca||(t|=js),(e&Ca||e&ud)&&(t|=Qi),t}const gx=new Map;XP("/",X1e.create({label:"root"}));function XP(e,t){if(e[0]!="/"&&(e="/"+e),e=xd.call(this,e),gx.has(e))throw po(new Ke(mt.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,gx.set(e,t),bK(`Mounted ${t.name} on ${e}`),jv(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function FK(e){if(e[0]!="/"&&(e="/"+e),e=xd.call(this,e),!gx.has(e)){ka(e+" is already unmounted");return}gx.delete(e),HP("Unmounted "+e)}function Er(e,t){const n=(t==null?void 0:t.root)||gc.root;e=jn(ti(n,e));const r=[...gx].sort((i,s)=>i[0].length>s[0].length?-1:1);for(const[i,s]of r)if(n_e(i,e))return e=e.slice(i.length>1?i.length:0),e===""&&(e=n),{fs:s,path:e,mountPoint:i,root:n};throw f1e(new Ke(mt.EIO,"No file system",e))}function EI(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function li(e,t){typeof e.stack=="string"&&(e.stack=EI(e.stack,t));try{e.message=EI(e.message,t)}catch{}return e.path&&(e.path=EI(e.path,t)),e}function LK(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||Xa),files:(t?BigInt:Number)(n.totalNodes||Xa),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function t_e(e){var t,n,r,i,s,a,o;const l=this!==null&&this!==void 0?this:gc;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((i=l.credentials)===null||i===void 0?void 0:i.egid)!==0)throw new Ke(mt.EPERM,"Can not chroot() as non-root user");(s=l.root)!==null&&s!==void 0||(l.root="/");const c=ti(l.root,e);for(const u of(o=(a=l.descriptors)===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[]){if(!u.path.startsWith(l.root))throw Ke.With("EBUSY",u.path,"chroot");u.path=u.path.slice(l.root.length)}if(c.length>l.root.length)throw new Ke(mt.EPERM,"Can not chroot() outside of current root");l.root=c}function n_e(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class BK extends LP{off(t,n,r,i){return super.off(t,n,r,i)}removeListener(t,n,r,i){return super.removeListener(t,n,r,i)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ke.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ke.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ke.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ke.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ke.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class $K extends BK{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?ti(t.root,n):n,i_e(this.realpath,this)}close(){super.emit("close"),s_e(this.realpath,this)}[Symbol.dispose](){this.close()}}class r_e extends BK{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Xf(this.path);F1e(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Xf(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Of=new Map;function i_e(e,t){const n=jn(e);Of.has(n)||Of.set(n,new Set),Of.get(n).add(t)}function s_e(e,t){const n=jn(e);Of.has(n)&&(Of.get(n).delete(t),Of.get(n).size===0&&Of.delete(n))}function pa(e,t,n){var r;e&&(n=ti((r=e.root)!==null&&r!==void 0?r:"/",n)),n=jn(n);for(let i=n;i!="/";i=Vr(i)){const s=Of.get(i);if(s)for(const a of s)a.emit("change",t,yK.call(a._context,i,n)||b0(n))}}var Aw=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Rw=function(e){return function(t){function n(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,i=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&i===1)return i=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(a).then(s,function(o){return n(o),s()})}else i|=1}catch(o){n(o)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function a_e(e,t){e=jn(e),t=jn(t);const n=Er(e,this),r=Er(t,this);if(!Xf.call(this,Vr(e)).hasAccess(Qi,this))throw Ke.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),pa(this,"rename",e.toString()),pa(this,"change",t.toString());return}nO.call(this,t,tO(e)),eO.call(this,e),pa(this,"rename",e.toString())}catch(i){throw li(i,{[n.path]:e,[r.path]:t})}}function JP(e){e=jn(e);try{const{fs:t,path:n}=Er(yh.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==mt.ENOENT)return!1;throw t}}function Xf(e,t){e=jn(e);const{fs:n,path:r}=Er(yh.call(this,e),this);try{const i=n.statSync(r);if(Ps&&!oi(this,i,js))throw Ke.With("EACCES",r,"stat");return t!=null&&t.bigint?new lm(i):new Nd(i)}catch(i){throw li(i,{[r]:e})}}function QP(e,t){e=jn(e);const{fs:n,path:r}=Er(e,this);try{const i=n.statSync(r);if(Ps&&!oi(this,i,js))throw Ke.With("EACCES",r,"lstat");return t!=null&&t.bigint?new lm(i):new Nd(i)}catch(i){throw li(i,{[r]:e})}}function o_e(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=Aw(n,cm.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ke(mt.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{Rw(n)}}function eO(e){e=jn(e);const{fs:t,path:n}=Er(e,this);try{if(Ps&&!oi(this,t.statSync(n),Qi))throw Ke.With("EACCES",n,"unlink");t.unlinkSync(n),pa(this,"rename",e.toString())}catch(r){throw li(r,{[n]:e})}}function cm(e,t){var n;e=jn(e);const r=gh(t.mode,420),i=fd(t.flag);e=t.preserveSymlinks?e:yh.call(this,e);const{fs:s,path:a}=Er(e,this);let o;try{o=s.statSync(a)}catch{}if(!o){if(!(i&sE))throw Ke.With("ENOENT",e,"_open");const c=s.statSync(Vr(a));if(!oi(this,c,Qi))throw Ke.With("EACCES",Vr(e),"_open");if(!hc(c))throw Ke.With("ENOTDIR",Vr(e),"_open");if(!t.allowDirectory&&r&ws)throw Ke.With("EISDIR",e,"_open");if(!oi(this,c,Qi))throw Ke.With("EACCES",Vr(a),"_open");const{euid:u,egid:d}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:gc.credentials,h=s.createFileSync(a,{mode:r,uid:c.mode&Ew?c.uid:u,gid:c.mode&Tw?c.gid:d});return new oC(this,e,s,a,i,h)}if(!oi(this,o,r)||!oi(this,o,DK(i)))throw Ke.With("EACCES",e,"_open");if(i&aE)throw Ke.With("EEXIST",e,"_open");const l=new oC(this,e,s,a,i,o);if(i&oE&&l.truncate(0),!t.allowDirectory&&o.mode&ws)throw Ke.With("EISDIR",e,"_open");return l}function cE(e,t,n=GP){return lC(cm.call(this,e,{flag:t,mode:n}))}function uE(e,t,n){return lC(cm.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function zK(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const i=Aw(r,typeof e=="number"?Ma(this,e):cm.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:s}=i.stat(),a=new Uint8Array(s);return i.read(a,0,s,0),a}catch(i){r.error=i,r.hasError=!0}finally{Rw(r)}}function tO(e,t={}){const n=dd(t,null,"r",420);if(fd(n.flag)&Ca)throw new Ke(mt.EINVAL,"Flag passed to readFile must allow for reading");const i=Ii.from(zK.call(this,e,n.flag,!1));return n.encoding?i.toString(n.encoding):i}function nO(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const i=dd(n,"utf8","w+",420),s=fd(i.flag);if(!(s&Ca||s&ud))throw new Ke(mt.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!i.encoding)throw new Ke(mt.EINVAL,"Encoding not specified");const a=typeof t=="string"?Ii.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!a)throw new Ke(mt.EINVAL,"Data not specified");Aw(r,typeof e=="number"?Ma(this,e):cm.call(this,e.toString(),{flag:s,mode:i.mode,preserveSymlinks:!0}),!1).write(a,0,a.byteLength,0),pa(this,"change",e.toString())}catch(i){r.error=i,r.hasError=!0}finally{Rw(r)}}function l_e(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const i=dd(n,"utf8","a+",420),s=fd(i.flag);if(!(s&Up))throw new Ke(mt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!i.encoding)throw new Ke(mt.EINVAL,"Encoding not specified");const a=typeof t=="string"?Ii.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);Aw(r,cm.call(this,typeof e=="number"?Ma(this,e).path:e.toString(),{flag:s,mode:i.mode,preserveSymlinks:!0}),!1).write(a,0,a.byteLength)}catch(i){r.error=i,r.hasError=!0}finally{Rw(r)}}function c_e(e,t){const n=Ma(this,e).stat();return t!=null&&t.bigint?new lm(n):new Nd(n)}function um(e){Ma(this,e).close(),OK(this,e)}function u_e(e,t=0){if(t||(t=0),t<0)throw new Ke(mt.EINVAL);Ma(this,e).truncate(t)}function d_e(e){Ma(this,e).sync()}function f_e(e){Ma(this,e).datasync()}function h_e(e,t,n,r,i){let s,a,o,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const d=typeof r=="string"?r:"utf8";a=0,s=Ii.from(t,d),o=s.byteLength}else s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=n,o=r,l=typeof i=="number"?i:null;const c=Ma(this,e);l??(l=c.position);const u=c.write(s,a,o,l);return pa(this,"change",c.path),u}function p_e(e,t,n,r,i){const s=Ma(this,e),a=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,i=n.position),i=Number(i),isNaN(i)&&(i=s.position),s.read(t,a,r,i)}function rO(e,t,n){Ma(this,e).chown(t,n)}function iO(e,t){const n=gh(t,-1);if(n<0)throw new Ke(mt.EINVAL,"Invalid mode.");Ma(this,e).chmod(n)}function sO(e,t,n){Ma(this,e).utimes(aC(t),aC(n))}function UK(e){e=jn(e);const{fs:t,path:n}=Er(yh.call(this,e),this);try{const r=t.statSync(n);if(!hc(r))throw Ke.With("ENOTDIR",n,"rmdir");if(Ps&&!oi(this,r,Qi))throw Ke.With("EACCES",n,"rmdir");t.rmdirSync(n),pa(this,"rename",e.toString())}catch(r){throw li(r,{[n]:e})}}function aO(e,t){var n,r;const{euid:i,egid:s}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:gc.credentials;t=typeof t=="object"?t:{mode:t};const a=gh(t==null?void 0:t.mode,511);e=yh.call(this,e);const{fs:o,path:l,root:c}=Er(e,this),u={[l]:e},d=(h,m)=>{if(!oi(this,m,Qi))throw Ke.With("EACCES",Vr(h),"mkdir");const y=o.mkdirSync(h,{mode:a,uid:m.mode&Ew?m.uid:i,gid:m.mode&Tw?m.gid:s});return pa(this,"rename",h),y};try{if(!(t!=null&&t.recursive)){d(l,o.statSync(Vr(l)));return}const h=[];for(let y=l,b=e;!o.existsSync(y);y=Vr(y),b=Vr(b))h.unshift(y),u[y]=b;if(!h.length)return;const m=[o.statSync(Vr(h[0]))];for(const[y,b]of h.entries())m.push(d(b,m[y]));return c.length==1?h[0]:(r=h[0])===null||r===void 0?void 0:r.slice(c.length)}catch(h){throw li(h,u)}}function sy(e,t){t=typeof t=="object"?t:{encoding:t},e=jn(e);const{fs:n,path:r}=Er(yh.call(this,e),this);let i;try{const a=n.statSync(r);if(Ps&&!oi(this,a,js))throw Ke.With("EACCES",r,"readdir");if(!hc(a))throw Ke.With("ENOTDIR",r,"readdir");i=n.readdirSync(r)}catch(a){throw li(a,{[r]:e})}const s=[];for(const a of i){let o;try{o=n.statSync(ti(r,a))}catch{continue}if(t!=null&&t.withFileTypes?s.push(new yx(a,o)):(t==null?void 0:t.encoding)=="buffer"?s.push(Ii.from(a)):s.push(a),!(!hc(o)||!(t!=null&&t.recursive)))for(const l of sy.call(this,ti(e,a),t))l instanceof yx?(l.path=ti(a,l.path),s.push(l)):Ii.isBuffer(l)?s.push(Ii.from(ti(a,$P(l)))):s.push(ti(a,l))}return s}function m_e(e,t){if(e=jn(e),!Xf(Vr(e)).hasAccess(js,this))throw Ke.With("EACCES",Vr(e),"link");if(t=jn(t),!Xf(Vr(t)).hasAccess(Qi,this))throw Ke.With("EACCES",Vr(t),"link");const{fs:n,path:r}=Er(e,this),i=Er(t,this);if(n!=i.fs)throw Ke.With("EXDEV",t,"link");try{if(Ps&&!oi(this,n.statSync(r),js))throw Ke.With("EACCES",r,"link");return n.linkSync(r,i.path)}catch(s){throw li(s,{[r]:e,[i.path]:t})}}function g_e(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ke(mt.EINVAL,"Invalid type: "+n);t=jn(t);const i=Aw(r,cm.call(this,t,{flag:"wx",mode:420}),!1);i.write(fp(jn(e,!0))),i.chmod(Id)}catch(i){r.error=i,r.hasError=!0}finally{Rw(r)}}function W3(e,t){const n=Ii.from(zK.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function y_e(e,t,n){const r=cE.call(this,e,"r+");rO.call(this,r,t,n),um.call(this,r)}function b_e(e,t,n){const r=uE.call(this,e,"r+");rO.call(this,r,t,n),um.call(this,r)}function v_e(e,t){const n=cE.call(this,e,"r+");iO.call(this,n,t),um.call(this,n)}function x_e(e,t){const n=uE.call(this,e,"r+");iO.call(this,n,t),um.call(this,n)}function qK(e,t,n){const r=cE.call(this,e,"r+");sO.call(this,r,t,n),um.call(this,r)}function w_e(e,t,n){const r=uE.call(this,e,"r+");sO.call(this,r,t,n),um.call(this,r)}function G3(e,t,n){try{const l=Er(t,e),c=l.fs.statSync(l.path);if(!v0(c))return{...l,fullPath:t,stats:c};const u=xd.call(e,Vr(t),W3.call(e,t).toString());return G3(e,u)}catch{}const{base:r,dir:i}=Bc(t),s=i=="/"?"/":yh.call(e,i),a=ti(s,r),o=Er(a,e);try{const l=o.fs.statSync(o.path);if(!v0(l))return{...o,fullPath:a,stats:l};const c=xd.call(e,s,W3.call(e,a).toString());return G3(e,c)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw li(l,{[o.path]:a})}}function yh(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=jn(e);const{fullPath:i}=G3(this,e);if(r=="utf8"||r=="utf-8")return i;const s=Ii.from(i,"utf-8");return r=="buffer"?s:s.toString(r)}function __e(e,t=384){if(!oi(this,Xf.call(this,e),t))throw new Ke(mt.EACCES)}function VK(e,t){e=jn(e);let n;try{n=QP.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&bi){case ws:if(t!=null&&t.recursive)for(const r of sy.call(this,e))VK.call(this,ti(e,r),t);UK.call(this,e);break;case sc:case Id:case sm:case am:eO.call(this,e);break;case om:case im:default:throw new Ke(mt.EPERM,"File type not supported",e,"rm")}}function S_e(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",i="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return aO.call(this,i),n=="buffer"?Ii.from(i):i}function HK(e,t,n){if(e=jn(e),t=jn(t),n&&n&KP&&JP(t))throw new Ke(mt.EEXIST,"Destination file already exists",t,"copyFile");nO.call(this,t,tO(e)),pa(this,"rename",t.toString())}function C_e(e,t,n){const r=Ma(this,e);let i=0;for(const s of t)i+=r.read(s,0,s.byteLength,n+i);return i}function k_e(e,t,n){const r=Ma(this,e);let i=0;for(const s of t)i+=r.write(new Uint8Array(s.buffer),0,s.byteLength,n+i);return i}function E_e(e,t){return e=jn(e),new oO(e,this)}function WK(e,t,n){e=jn(e),t=jn(t);const r=QP.call(this,e);if(n!=null&&n.errorOnExist&&JP.call(this,t))throw new Ke(mt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&bi){case ws:if(!(n!=null&&n.recursive))throw new Ke(mt.EISDIR,e+" is a directory (not copied)",e,"cp");aO.call(this,t,{recursive:!0});for(const i of sy.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(ti(e,i.name),ti(t,i.name))||WK.call(this,ti(e,i.name),ti(t,i.name),n);break;case sc:case Id:HK.call(this,e,t);break;case sm:case am:case om:case im:default:throw new Ke(mt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&qK.call(this,t,r.atime,r.mtime)}function T_e(e,t){e=jn(e);const{fs:n}=Er(e,this);return LK(n,t==null?void 0:t.bigint)}function A_e(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:i=()=>!1}=t,s=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),a=[];function o(l){const c=sy(l,{withFileTypes:r,encoding:"utf8"});for(const u of c){const d=r?u.path:l+"/"+u;i(r?u:d)||(Xf(d).isDirectory()&&s.some(h=>h.source.includes(".*"))&&o(d),s.some(h=>h.test(d.replace(/^\/+/g,"")))&&a.push(r?u.path:d.replace(/^\/+/g,"")))}}return o(n),a}class yx{get name(){return b0(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return U1e(this.stats)}isDirectory(){return hc(this.stats)}isBlockDevice(){return px(this.stats)}isCharacterDevice(){return mx(this.stats)}isSymbolicLink(){return v0(this.stats)}isFIFO(){return V1e(this.stats)}isSocket(){return q1e(this.stats)}}class oO{checkClosed(){if(this.closed)throw new Ke(mt.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await fm.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=sy.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var TI={exports:{}},AI={exports:{}},RI={},y$;function bh(){return y$||(y$=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=u,n.toByteArray=h,n.fromByteArray=b;for(var r=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=a.length;o<l;++o)r[o]=a[o],i[a.charCodeAt(o)]=o;i[45]=62,i[95]=63;function c(_){var S=_.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=_.indexOf("=");C===-1&&(C=S);var E=C===S?0:4-C%4;return[C,E]}function u(_){var S=c(_),C=S[0],E=S[1];return(C+E)*3/4-E}function d(_,S,C){return(S+C)*3/4-C}function h(_){var S,C=c(_),E=C[0],A=C[1],R=new s(d(_,E,A)),N=0,M=A>0?E-4:E,P;for(P=0;P<M;P+=4)S=i[_.charCodeAt(P)]<<18|i[_.charCodeAt(P+1)]<<12|i[_.charCodeAt(P+2)]<<6|i[_.charCodeAt(P+3)],R[N++]=S>>16&255,R[N++]=S>>8&255,R[N++]=S&255;return A===2&&(S=i[_.charCodeAt(P)]<<2|i[_.charCodeAt(P+1)]>>4,R[N++]=S&255),A===1&&(S=i[_.charCodeAt(P)]<<10|i[_.charCodeAt(P+1)]<<4|i[_.charCodeAt(P+2)]>>2,R[N++]=S>>8&255,R[N++]=S&255),R}function m(_){return r[_>>18&63]+r[_>>12&63]+r[_>>6&63]+r[_&63]}function y(_,S,C){for(var E,A=[],R=S;R<C;R+=3)E=(_[R]<<16&16711680)+(_[R+1]<<8&65280)+(_[R+2]&255),A.push(m(E));return A.join("")}function b(_){for(var S,C=_.length,E=C%3,A=[],R=16383,N=0,M=C-E;N<M;N+=R)A.push(y(_,N,N+R>M?M:N+R));return E===1?(S=_[C-1],A.push(r[S>>2]+r[S<<4&63]+"==")):E===2&&(S=(_[C-2]<<8)+_[C-1],A.push(r[S>>10]+r[S>>4&63]+r[S<<2&63]+"=")),A.join("")}var v={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */v.read=function(_,S,C,E,A){var R,N,M=A*8-E-1,P=(1<<M)-1,L=P>>1,O=-7,V=C?A-1:0,F=C?-1:1,J=_[S+V];for(V+=F,R=J&(1<<-O)-1,J>>=-O,O+=M;O>0;R=R*256+_[S+V],V+=F,O-=8);for(N=R&(1<<-O)-1,R>>=-O,O+=E;O>0;N=N*256+_[S+V],V+=F,O-=8);if(R===0)R=1-L;else{if(R===P)return N?NaN:(J?-1:1)*(1/0);N=N+Math.pow(2,E),R=R-L}return(J?-1:1)*N*Math.pow(2,R-E)},v.write=function(_,S,C,E,A,R){var N,M,P,L=R*8-A-1,O=(1<<L)-1,V=O>>1,F=A===23?Math.pow(2,-24)-Math.pow(2,-77):0,J=E?0:R-1,U=E?1:-1,G=S<0||S===0&&1/S<0?1:0;for(S=Math.abs(S),isNaN(S)||S===1/0?(M=isNaN(S)?1:0,N=O):(N=Math.floor(Math.log(S)/Math.LN2),S*(P=Math.pow(2,-N))<1&&(N--,P*=2),N+V>=1?S+=F/P:S+=F*Math.pow(2,1-V),S*P>=2&&(N++,P/=2),N+V>=O?(M=0,N=O):N+V>=1?(M=(S*P-1)*Math.pow(2,A),N=N+V):(M=S*Math.pow(2,V-1)*Math.pow(2,A),N=0));A>=8;_[C+J]=M&255,J+=U,M/=256,A-=8);for(N=N<<A|M,L+=A;L>0;_[C+J]=N&255,J+=U,N/=256,L-=8);_[C+J-U]|=G*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(_){const S=n,C=v,E=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_.Buffer=O,_.SlowBuffer=se,_.INSPECT_MAX_BYTES=50;const A=2147483647;_.kMaxLength=A;const{Uint8Array:R,ArrayBuffer:N,SharedArrayBuffer:M}=globalThis;O.TYPED_ARRAY_SUPPORT=P(),!O.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function P(){try{const Y=new R(1),W={foo:function(){return 42}};return Object.setPrototypeOf(W,R.prototype),Object.setPrototypeOf(Y,W),Y.foo()===42}catch{return!1}}Object.defineProperty(O.prototype,"parent",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.buffer}}),Object.defineProperty(O.prototype,"offset",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.byteOffset}});function L(Y){if(Y>A)throw new RangeError('The value "'+Y+'" is invalid for option "size"');const W=new R(Y);return Object.setPrototypeOf(W,O.prototype),W}function O(Y,W,X){if(typeof Y=="number"){if(typeof W=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return U(Y)}return V(Y,W,X)}O.poolSize=8192;function V(Y,W,X){if(typeof Y=="string")return G(Y,W);if(N.isView(Y))return ne(Y);if(Y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y);if(be(Y,N)||Y&&be(Y.buffer,N)||typeof M<"u"&&(be(Y,M)||Y&&be(Y.buffer,M)))return H(Y,W,X);if(typeof Y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ye=Y.valueOf&&Y.valueOf();if(ye!=null&&ye!==Y)return O.from(ye,W,X);const Pe=te(Y);if(Pe)return Pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Y[Symbol.toPrimitive]=="function")return O.from(Y[Symbol.toPrimitive]("string"),W,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y)}O.from=function(Y,W,X){return V(Y,W,X)},Object.setPrototypeOf(O.prototype,R.prototype),Object.setPrototypeOf(O,R);function F(Y){if(typeof Y!="number")throw new TypeError('"size" argument must be of type number');if(Y<0)throw new RangeError('The value "'+Y+'" is invalid for option "size"')}function J(Y,W,X){return F(Y),Y<=0?L(Y):W!==void 0?typeof X=="string"?L(Y).fill(W,X):L(Y).fill(W):L(Y)}O.alloc=function(Y,W,X){return J(Y,W,X)};function U(Y){return F(Y),L(Y<0?0:ee(Y)|0)}O.allocUnsafe=function(Y){return U(Y)},O.allocUnsafeSlow=function(Y){return U(Y)};function G(Y,W){if((typeof W!="string"||W==="")&&(W="utf8"),!O.isEncoding(W))throw new TypeError("Unknown encoding: "+W);const X=he(Y,W)|0;let ye=L(X);const Pe=ye.write(Y,W);return Pe!==X&&(ye=ye.slice(0,Pe)),ye}function $(Y){const W=Y.length<0?0:ee(Y.length)|0,X=L(W);for(let ye=0;ye<W;ye+=1)X[ye]=Y[ye]&255;return X}function ne(Y){if(be(Y,R)){const W=new R(Y);return H(W.buffer,W.byteOffset,W.byteLength)}return $(Y)}function H(Y,W,X){if(W<0||Y.byteLength<W)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<W+(X||0))throw new RangeError('"length" is outside of buffer bounds');let ye;return W===void 0&&X===void 0?ye=new R(Y):X===void 0?ye=new R(Y,W):ye=new R(Y,W,X),Object.setPrototypeOf(ye,O.prototype),ye}function te(Y){if(O.isBuffer(Y)){const W=ee(Y.length)|0,X=L(W);return X.length===0||Y.copy(X,0,0,W),X}if(Y.length!==void 0)return typeof Y.length!="number"||_e(Y.length)?L(0):$(Y);if(Y.type==="Buffer"&&Array.isArray(Y.data))return $(Y.data)}function ee(Y){if(Y>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return Y|0}function se(Y){return+Y!=Y&&(Y=0),O.alloc(+Y)}O.isBuffer=function(W){return W!=null&&W._isBuffer===!0&&W!==O.prototype},O.compare=function(W,X){if(be(W,R)&&(W=O.from(W,W.offset,W.byteLength)),be(X,R)&&(X=O.from(X,X.offset,X.byteLength)),!O.isBuffer(W)||!O.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(W===X)return 0;let ye=W.length,Pe=X.length;for(let We=0,xt=Math.min(ye,Pe);We<xt;++We)if(W[We]!==X[We]){ye=W[We],Pe=X[We];break}return ye<Pe?-1:Pe<ye?1:0},O.isEncoding=function(W){switch(String(W).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},O.concat=function(W,X){if(!Array.isArray(W))throw new TypeError('"list" argument must be an Array of Buffers');if(W.length===0)return O.alloc(0);let ye;if(X===void 0)for(X=0,ye=0;ye<W.length;++ye)X+=W[ye].length;const Pe=O.allocUnsafe(X);let We=0;for(ye=0;ye<W.length;++ye){let xt=W[ye];if(be(xt,R))We+xt.length>Pe.length?(O.isBuffer(xt)||(xt=O.from(xt)),xt.copy(Pe,We)):R.prototype.set.call(Pe,xt,We);else if(O.isBuffer(xt))xt.copy(Pe,We);else throw new TypeError('"list" argument must be an Array of Buffers');We+=xt.length}return Pe};function he(Y,W){if(O.isBuffer(Y))return Y.length;if(N.isView(Y)||be(Y,N))return Y.byteLength;if(typeof Y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Y);const X=Y.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&X===0)return 0;let Pe=!1;for(;;)switch(W){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return bt(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X*2;case"hex":return X>>>1;case"base64":return Ve(Y).length;default:if(Pe)return ye?-1:bt(Y).length;W=(""+W).toLowerCase(),Pe=!0}}O.byteLength=he;function ce(Y,W,X){let ye=!1;if((W===void 0||W<0)&&(W=0),W>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0,W>>>=0,X<=W))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return Ee(this,W,X);case"utf8":case"utf-8":return ge(this,W,X);case"ascii":return oe(this,W,X);case"latin1":case"binary":return ie(this,W,X);case"base64":return K(this,W,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,W,X);default:if(ye)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),ye=!0}}O.prototype._isBuffer=!0;function Me(Y,W,X){const ye=Y[W];Y[W]=Y[X],Y[X]=ye}O.prototype.swap16=function(){const W=this.length;if(W%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let X=0;X<W;X+=2)Me(this,X,X+1);return this},O.prototype.swap32=function(){const W=this.length;if(W%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let X=0;X<W;X+=4)Me(this,X,X+3),Me(this,X+1,X+2);return this},O.prototype.swap64=function(){const W=this.length;if(W%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let X=0;X<W;X+=8)Me(this,X,X+7),Me(this,X+1,X+6),Me(this,X+2,X+5),Me(this,X+3,X+4);return this},O.prototype.toString=function(){const W=this.length;return W===0?"":arguments.length===0?ge(this,0,W):ce.apply(this,arguments)},O.prototype.toLocaleString=O.prototype.toString,O.prototype.equals=function(W){if(!O.isBuffer(W))throw new TypeError("Argument must be a Buffer");return this===W?!0:O.compare(this,W)===0},O.prototype.inspect=function(){let W="";const X=_.INSPECT_MAX_BYTES;return W=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X&&(W+=" ... "),"<Buffer "+W+">"},E&&(O.prototype[E]=O.prototype.inspect),O.prototype.compare=function(W,X,ye,Pe,We){if(be(W,R)&&(W=O.from(W,W.offset,W.byteLength)),!O.isBuffer(W))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof W);if(X===void 0&&(X=0),ye===void 0&&(ye=W?W.length:0),Pe===void 0&&(Pe=0),We===void 0&&(We=this.length),X<0||ye>W.length||Pe<0||We>this.length)throw new RangeError("out of range index");if(Pe>=We&&X>=ye)return 0;if(Pe>=We)return-1;if(X>=ye)return 1;if(X>>>=0,ye>>>=0,Pe>>>=0,We>>>=0,this===W)return 0;let xt=We-Pe,Qt=ye-X;const Fn=Math.min(xt,Qt),Zt=this.slice(Pe,We),tn=W.slice(X,ye);for(let cn=0;cn<Fn;++cn)if(Zt[cn]!==tn[cn]){xt=Zt[cn],Qt=tn[cn];break}return xt<Qt?-1:Qt<xt?1:0};function je(Y,W,X,ye,Pe){if(Y.length===0)return-1;if(typeof X=="string"?(ye=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),X=+X,_e(X)&&(X=Pe?0:Y.length-1),X<0&&(X=Y.length+X),X>=Y.length){if(Pe)return-1;X=Y.length-1}else if(X<0)if(Pe)X=0;else return-1;if(typeof W=="string"&&(W=O.from(W,ye)),O.isBuffer(W))return W.length===0?-1:Ne(Y,W,X,ye,Pe);if(typeof W=="number")return W=W&255,typeof R.prototype.indexOf=="function"?Pe?R.prototype.indexOf.call(Y,W,X):R.prototype.lastIndexOf.call(Y,W,X):Ne(Y,[W],X,ye,Pe);throw new TypeError("val must be string, number or Buffer")}function Ne(Y,W,X,ye,Pe){let We=1,xt=Y.length,Qt=W.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(Y.length<2||W.length<2)return-1;We=2,xt/=2,Qt/=2,X/=2}function Fn(tn,cn){return We===1?tn[cn]:tn.readUInt16BE(cn*We)}let Zt;if(Pe){let tn=-1;for(Zt=X;Zt<xt;Zt++)if(Fn(Y,Zt)===Fn(W,tn===-1?0:Zt-tn)){if(tn===-1&&(tn=Zt),Zt-tn+1===Qt)return tn*We}else tn!==-1&&(Zt-=Zt-tn),tn=-1}else for(X+Qt>xt&&(X=xt-Qt),Zt=X;Zt>=0;Zt--){let tn=!0;for(let cn=0;cn<Qt;cn++)if(Fn(Y,Zt+cn)!==Fn(W,cn)){tn=!1;break}if(tn)return Zt}return-1}O.prototype.includes=function(W,X,ye){return this.indexOf(W,X,ye)!==-1},O.prototype.indexOf=function(W,X,ye){return je(this,W,X,ye,!0)},O.prototype.lastIndexOf=function(W,X,ye){return je(this,W,X,ye,!1)};function Ce(Y,W,X,ye){X=Number(X)||0;const Pe=Y.length-X;ye?(ye=Number(ye),ye>Pe&&(ye=Pe)):ye=Pe;const We=W.length;ye>We/2&&(ye=We/2);let xt;for(xt=0;xt<ye;++xt){const Qt=parseInt(W.substr(xt*2,2),16);if(_e(Qt))return xt;Y[X+xt]=Qt}return xt}function Ue(Y,W,X,ye){return it(bt(W,Y.length-X),Y,X,ye)}function et(Y,W,X,ye){return it(St(W),Y,X,ye)}function qe(Y,W,X,ye){return it(Ve(W),Y,X,ye)}function Re(Y,W,X,ye){return it(z(W,Y.length-X),Y,X,ye)}O.prototype.write=function(W,X,ye,Pe){if(X===void 0)Pe="utf8",ye=this.length,X=0;else if(ye===void 0&&typeof X=="string")Pe=X,ye=this.length,X=0;else if(isFinite(X))X=X>>>0,isFinite(ye)?(ye=ye>>>0,Pe===void 0&&(Pe="utf8")):(Pe=ye,ye=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const We=this.length-X;if((ye===void 0||ye>We)&&(ye=We),W.length>0&&(ye<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");Pe||(Pe="utf8");let xt=!1;for(;;)switch(Pe){case"hex":return Ce(this,W,X,ye);case"utf8":case"utf-8":return Ue(this,W,X,ye);case"ascii":case"latin1":case"binary":return et(this,W,X,ye);case"base64":return qe(this,W,X,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,W,X,ye);default:if(xt)throw new TypeError("Unknown encoding: "+Pe);Pe=(""+Pe).toLowerCase(),xt=!0}},O.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K(Y,W,X){return W===0&&X===Y.length?S.fromByteArray(Y):S.fromByteArray(Y.slice(W,X))}function ge(Y,W,X){X=Math.min(Y.length,X);const ye=[];let Pe=W;for(;Pe<X;){const We=Y[Pe];let xt=null,Qt=We>239?4:We>223?3:We>191?2:1;if(Pe+Qt<=X){let Fn,Zt,tn,cn;switch(Qt){case 1:We<128&&(xt=We);break;case 2:Fn=Y[Pe+1],(Fn&192)===128&&(cn=(We&31)<<6|Fn&63,cn>127&&(xt=cn));break;case 3:Fn=Y[Pe+1],Zt=Y[Pe+2],(Fn&192)===128&&(Zt&192)===128&&(cn=(We&15)<<12|(Fn&63)<<6|Zt&63,cn>2047&&(cn<55296||cn>57343)&&(xt=cn));break;case 4:Fn=Y[Pe+1],Zt=Y[Pe+2],tn=Y[Pe+3],(Fn&192)===128&&(Zt&192)===128&&(tn&192)===128&&(cn=(We&15)<<18|(Fn&63)<<12|(Zt&63)<<6|tn&63,cn>65535&&cn<1114112&&(xt=cn))}}xt===null?(xt=65533,Qt=1):xt>65535&&(xt-=65536,ye.push(xt>>>10&1023|55296),xt=56320|xt&1023),ye.push(xt),Pe+=Qt}return le(ye)}const Ae=4096;function le(Y){const W=Y.length;if(W<=Ae)return String.fromCharCode.apply(String,Y);let X="",ye=0;for(;ye<W;)X+=String.fromCharCode.apply(String,Y.slice(ye,ye+=Ae));return X}function oe(Y,W,X){let ye="";X=Math.min(Y.length,X);for(let Pe=W;Pe<X;++Pe)ye+=String.fromCharCode(Y[Pe]&127);return ye}function ie(Y,W,X){let ye="";X=Math.min(Y.length,X);for(let Pe=W;Pe<X;++Pe)ye+=String.fromCharCode(Y[Pe]);return ye}function Ee(Y,W,X){const ye=Y.length;(!W||W<0)&&(W=0),(!X||X<0||X>ye)&&(X=ye);let Pe="";for(let We=W;We<X;++We)Pe+=ze[Y[We]];return Pe}function Be(Y,W,X){const ye=Y.slice(W,X);let Pe="";for(let We=0;We<ye.length-1;We+=2)Pe+=String.fromCharCode(ye[We]+ye[We+1]*256);return Pe}O.prototype.slice=function(W,X){const ye=this.length;W=~~W,X=X===void 0?ye:~~X,W<0?(W+=ye,W<0&&(W=0)):W>ye&&(W=ye),X<0?(X+=ye,X<0&&(X=0)):X>ye&&(X=ye),X<W&&(X=W);const Pe=this.subarray(W,X);return Object.setPrototypeOf(Pe,O.prototype),Pe};function ke(Y,W,X){if(Y%1!==0||Y<0)throw new RangeError("offset is not uint");if(Y+W>X)throw new RangeError("Trying to access beyond buffer length")}O.prototype.readUintLE=O.prototype.readUIntLE=function(W,X,ye){W=W>>>0,X=X>>>0,ye||ke(W,X,this.length);let Pe=this[W],We=1,xt=0;for(;++xt<X&&(We*=256);)Pe+=this[W+xt]*We;return Pe},O.prototype.readUintBE=O.prototype.readUIntBE=function(W,X,ye){W=W>>>0,X=X>>>0,ye||ke(W,X,this.length);let Pe=this[W+--X],We=1;for(;X>0&&(We*=256);)Pe+=this[W+--X]*We;return Pe},O.prototype.readUint8=O.prototype.readUInt8=function(W,X){return W=W>>>0,X||ke(W,1,this.length),this[W]},O.prototype.readUint16LE=O.prototype.readUInt16LE=function(W,X){return W=W>>>0,X||ke(W,2,this.length),this[W]|this[W+1]<<8},O.prototype.readUint16BE=O.prototype.readUInt16BE=function(W,X){return W=W>>>0,X||ke(W,2,this.length),this[W]<<8|this[W+1]},O.prototype.readUint32LE=O.prototype.readUInt32LE=function(W,X){return W=W>>>0,X||ke(W,4,this.length),(this[W]|this[W+1]<<8|this[W+2]<<16)+this[W+3]*16777216},O.prototype.readUint32BE=O.prototype.readUInt32BE=function(W,X){return W=W>>>0,X||ke(W,4,this.length),this[W]*16777216+(this[W+1]<<16|this[W+2]<<8|this[W+3])},O.prototype.readBigUInt64LE=Rt(function(W){W=W>>>0,Oe(W,"offset");const X=this[W],ye=this[W+7];(X===void 0||ye===void 0)&&xe(W,this.length-8);const Pe=X+this[++W]*2**8+this[++W]*2**16+this[++W]*2**24,We=this[++W]+this[++W]*2**8+this[++W]*2**16+ye*2**24;return BigInt(Pe)+(BigInt(We)<<BigInt(32))}),O.prototype.readBigUInt64BE=Rt(function(W){W=W>>>0,Oe(W,"offset");const X=this[W],ye=this[W+7];(X===void 0||ye===void 0)&&xe(W,this.length-8);const Pe=X*2**24+this[++W]*2**16+this[++W]*2**8+this[++W],We=this[++W]*2**24+this[++W]*2**16+this[++W]*2**8+ye;return(BigInt(Pe)<<BigInt(32))+BigInt(We)}),O.prototype.readIntLE=function(W,X,ye){W=W>>>0,X=X>>>0,ye||ke(W,X,this.length);let Pe=this[W],We=1,xt=0;for(;++xt<X&&(We*=256);)Pe+=this[W+xt]*We;return We*=128,Pe>=We&&(Pe-=Math.pow(2,8*X)),Pe},O.prototype.readIntBE=function(W,X,ye){W=W>>>0,X=X>>>0,ye||ke(W,X,this.length);let Pe=X,We=1,xt=this[W+--Pe];for(;Pe>0&&(We*=256);)xt+=this[W+--Pe]*We;return We*=128,xt>=We&&(xt-=Math.pow(2,8*X)),xt},O.prototype.readInt8=function(W,X){return W=W>>>0,X||ke(W,1,this.length),this[W]&128?(255-this[W]+1)*-1:this[W]},O.prototype.readInt16LE=function(W,X){W=W>>>0,X||ke(W,2,this.length);const ye=this[W]|this[W+1]<<8;return ye&32768?ye|4294901760:ye},O.prototype.readInt16BE=function(W,X){W=W>>>0,X||ke(W,2,this.length);const ye=this[W+1]|this[W]<<8;return ye&32768?ye|4294901760:ye},O.prototype.readInt32LE=function(W,X){return W=W>>>0,X||ke(W,4,this.length),this[W]|this[W+1]<<8|this[W+2]<<16|this[W+3]<<24},O.prototype.readInt32BE=function(W,X){return W=W>>>0,X||ke(W,4,this.length),this[W]<<24|this[W+1]<<16|this[W+2]<<8|this[W+3]},O.prototype.readBigInt64LE=Rt(function(W){W=W>>>0,Oe(W,"offset");const X=this[W],ye=this[W+7];(X===void 0||ye===void 0)&&xe(W,this.length-8);const Pe=this[W+4]+this[W+5]*2**8+this[W+6]*2**16+(ye<<24);return(BigInt(Pe)<<BigInt(32))+BigInt(X+this[++W]*2**8+this[++W]*2**16+this[++W]*2**24)}),O.prototype.readBigInt64BE=Rt(function(W){W=W>>>0,Oe(W,"offset");const X=this[W],ye=this[W+7];(X===void 0||ye===void 0)&&xe(W,this.length-8);const Pe=(X<<24)+this[++W]*2**16+this[++W]*2**8+this[++W];return(BigInt(Pe)<<BigInt(32))+BigInt(this[++W]*2**24+this[++W]*2**16+this[++W]*2**8+ye)}),O.prototype.readFloatLE=function(W,X){return W=W>>>0,X||ke(W,4,this.length),C.read(this,W,!0,23,4)},O.prototype.readFloatBE=function(W,X){return W=W>>>0,X||ke(W,4,this.length),C.read(this,W,!1,23,4)},O.prototype.readDoubleLE=function(W,X){return W=W>>>0,X||ke(W,8,this.length),C.read(this,W,!0,52,8)},O.prototype.readDoubleBE=function(W,X){return W=W>>>0,X||ke(W,8,this.length),C.read(this,W,!1,52,8)};function ct(Y,W,X,ye,Pe,We){if(!O.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(W>Pe||W<We)throw new RangeError('"value" argument is out of bounds');if(X+ye>Y.length)throw new RangeError("Index out of range")}O.prototype.writeUintLE=O.prototype.writeUIntLE=function(W,X,ye,Pe){if(W=+W,X=X>>>0,ye=ye>>>0,!Pe){const Qt=Math.pow(2,8*ye)-1;ct(this,W,X,ye,Qt,0)}let We=1,xt=0;for(this[X]=W&255;++xt<ye&&(We*=256);)this[X+xt]=W/We&255;return X+ye},O.prototype.writeUintBE=O.prototype.writeUIntBE=function(W,X,ye,Pe){if(W=+W,X=X>>>0,ye=ye>>>0,!Pe){const Qt=Math.pow(2,8*ye)-1;ct(this,W,X,ye,Qt,0)}let We=ye-1,xt=1;for(this[X+We]=W&255;--We>=0&&(xt*=256);)this[X+We]=W/xt&255;return X+ye},O.prototype.writeUint8=O.prototype.writeUInt8=function(W,X,ye){return W=+W,X=X>>>0,ye||ct(this,W,X,1,255,0),this[X]=W&255,X+1},O.prototype.writeUint16LE=O.prototype.writeUInt16LE=function(W,X,ye){return W=+W,X=X>>>0,ye||ct(this,W,X,2,65535,0),this[X]=W&255,this[X+1]=W>>>8,X+2},O.prototype.writeUint16BE=O.prototype.writeUInt16BE=function(W,X,ye){return W=+W,X=X>>>0,ye||ct(this,W,X,2,65535,0),this[X]=W>>>8,this[X+1]=W&255,X+2},O.prototype.writeUint32LE=O.prototype.writeUInt32LE=function(W,X,ye){return W=+W,X=X>>>0,ye||ct(this,W,X,4,4294967295,0),this[X+3]=W>>>24,this[X+2]=W>>>16,this[X+1]=W>>>8,this[X]=W&255,X+4},O.prototype.writeUint32BE=O.prototype.writeUInt32BE=function(W,X,ye){return W=+W,X=X>>>0,ye||ct(this,W,X,4,4294967295,0),this[X]=W>>>24,this[X+1]=W>>>16,this[X+2]=W>>>8,this[X+3]=W&255,X+4};function It(Y,W,X,ye,Pe){pe(W,ye,Pe,Y,X,7);let We=Number(W&BigInt(4294967295));Y[X++]=We,We=We>>8,Y[X++]=We,We=We>>8,Y[X++]=We,We=We>>8,Y[X++]=We;let xt=Number(W>>BigInt(32)&BigInt(4294967295));return Y[X++]=xt,xt=xt>>8,Y[X++]=xt,xt=xt>>8,Y[X++]=xt,xt=xt>>8,Y[X++]=xt,X}function ht(Y,W,X,ye,Pe){pe(W,ye,Pe,Y,X,7);let We=Number(W&BigInt(4294967295));Y[X+7]=We,We=We>>8,Y[X+6]=We,We=We>>8,Y[X+5]=We,We=We>>8,Y[X+4]=We;let xt=Number(W>>BigInt(32)&BigInt(4294967295));return Y[X+3]=xt,xt=xt>>8,Y[X+2]=xt,xt=xt>>8,Y[X+1]=xt,xt=xt>>8,Y[X]=xt,X+8}O.prototype.writeBigUInt64LE=Rt(function(W,X=0){return It(this,W,X,BigInt(0),BigInt("0xffffffffffffffff"))}),O.prototype.writeBigUInt64BE=Rt(function(W,X=0){return ht(this,W,X,BigInt(0),BigInt("0xffffffffffffffff"))}),O.prototype.writeIntLE=function(W,X,ye,Pe){if(W=+W,X=X>>>0,!Pe){const Fn=Math.pow(2,8*ye-1);ct(this,W,X,ye,Fn-1,-Fn)}let We=0,xt=1,Qt=0;for(this[X]=W&255;++We<ye&&(xt*=256);)W<0&&Qt===0&&this[X+We-1]!==0&&(Qt=1),this[X+We]=(W/xt>>0)-Qt&255;return X+ye},O.prototype.writeIntBE=function(W,X,ye,Pe){if(W=+W,X=X>>>0,!Pe){const Fn=Math.pow(2,8*ye-1);ct(this,W,X,ye,Fn-1,-Fn)}let We=ye-1,xt=1,Qt=0;for(this[X+We]=W&255;--We>=0&&(xt*=256);)W<0&&Qt===0&&this[X+We+1]!==0&&(Qt=1),this[X+We]=(W/xt>>0)-Qt&255;return X+ye},O.prototype.writeInt8=function(W,X,ye){return W=+W,X=X>>>0,ye||ct(this,W,X,1,127,-128),W<0&&(W=255+W+1),this[X]=W&255,X+1},O.prototype.writeInt16LE=function(W,X,ye){return W=+W,X=X>>>0,ye||ct(this,W,X,2,32767,-32768),this[X]=W&255,this[X+1]=W>>>8,X+2},O.prototype.writeInt16BE=function(W,X,ye){return W=+W,X=X>>>0,ye||ct(this,W,X,2,32767,-32768),this[X]=W>>>8,this[X+1]=W&255,X+2},O.prototype.writeInt32LE=function(W,X,ye){return W=+W,X=X>>>0,ye||ct(this,W,X,4,2147483647,-2147483648),this[X]=W&255,this[X+1]=W>>>8,this[X+2]=W>>>16,this[X+3]=W>>>24,X+4},O.prototype.writeInt32BE=function(W,X,ye){return W=+W,X=X>>>0,ye||ct(this,W,X,4,2147483647,-2147483648),W<0&&(W=4294967295+W+1),this[X]=W>>>24,this[X+1]=W>>>16,this[X+2]=W>>>8,this[X+3]=W&255,X+4},O.prototype.writeBigInt64LE=Rt(function(W,X=0){return It(this,W,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),O.prototype.writeBigInt64BE=Rt(function(W,X=0){return ht(this,W,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ot(Y,W,X,ye,Pe,We){if(X+ye>Y.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function zt(Y,W,X,ye,Pe){return W=+W,X=X>>>0,Pe||Ot(Y,W,X,4),C.write(Y,W,X,ye,23,4),X+4}O.prototype.writeFloatLE=function(W,X,ye){return zt(this,W,X,!0,ye)},O.prototype.writeFloatBE=function(W,X,ye){return zt(this,W,X,!1,ye)};function Bt(Y,W,X,ye,Pe){return W=+W,X=X>>>0,Pe||Ot(Y,W,X,8),C.write(Y,W,X,ye,52,8),X+8}O.prototype.writeDoubleLE=function(W,X,ye){return Bt(this,W,X,!0,ye)},O.prototype.writeDoubleBE=function(W,X,ye){return Bt(this,W,X,!1,ye)},O.prototype.copy=function(W,X,ye,Pe){if(!O.isBuffer(W))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),!Pe&&Pe!==0&&(Pe=this.length),X>=W.length&&(X=W.length),X||(X=0),Pe>0&&Pe<ye&&(Pe=ye),Pe===ye||W.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(Pe<0)throw new RangeError("sourceEnd out of bounds");Pe>this.length&&(Pe=this.length),W.length-X<Pe-ye&&(Pe=W.length-X+ye);const We=Pe-ye;return this===W&&typeof R.prototype.copyWithin=="function"?this.copyWithin(X,ye,Pe):R.prototype.set.call(W,this.subarray(ye,Pe),X),We},O.prototype.fill=function(W,X,ye,Pe){if(typeof W=="string"){if(typeof X=="string"?(Pe=X,X=0,ye=this.length):typeof ye=="string"&&(Pe=ye,ye=this.length),Pe!==void 0&&typeof Pe!="string")throw new TypeError("encoding must be a string");if(typeof Pe=="string"&&!O.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);if(W.length===1){const xt=W.charCodeAt(0);(Pe==="utf8"&&xt<128||Pe==="latin1")&&(W=xt)}}else typeof W=="number"?W=W&255:typeof W=="boolean"&&(W=Number(W));if(X<0||this.length<X||this.length<ye)throw new RangeError("Out of range index");if(ye<=X)return this;X=X>>>0,ye=ye===void 0?this.length:ye>>>0,W||(W=0);let We;if(typeof W=="number")for(We=X;We<ye;++We)this[We]=W;else{const xt=O.isBuffer(W)?W:O.from(W,Pe),Qt=xt.length;if(Qt===0)throw new TypeError('The value "'+W+'" is invalid for argument "value"');for(We=0;We<ye-X;++We)this[We+X]=xt[We%Qt]}return this};const rn={};function ve(Y,W,X){rn[Y]=class extends X{constructor(){super(),Object.defineProperty(this,"message",{value:W.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Y}]`,this.stack,delete this.name}get code(){return Y}set code(Pe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Pe,writable:!0})}toString(){return`${this.name} [${Y}]: ${this.message}`}}}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(Y){return Y?`${Y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(Y,W){return`The "${Y}" argument must be of type number. Received type ${typeof W}`},TypeError),ve("ERR_OUT_OF_RANGE",function(Y,W,X){let ye=`The value of "${Y}" is out of range.`,Pe=X;return Number.isInteger(X)&&Math.abs(X)>2**32?Pe=D(String(X)):typeof X=="bigint"&&(Pe=String(X),(X>BigInt(2)**BigInt(32)||X<-(BigInt(2)**BigInt(32)))&&(Pe=D(Pe)),Pe+="n"),ye+=` It must be ${W}. Received ${Pe}`,ye},RangeError);function D(Y){let W="",X=Y.length;const ye=Y[0]==="-"?1:0;for(;X>=ye+4;X-=3)W=`_${Y.slice(X-3,X)}${W}`;return`${Y.slice(0,X)}${W}`}function Z(Y,W,X){Oe(W,"offset"),(Y[W]===void 0||Y[W+X]===void 0)&&xe(W,Y.length-(X+1))}function pe(Y,W,X,ye,Pe,We){if(Y>X||Y<W){const xt=typeof W=="bigint"?"n":"";let Qt;throw W===0||W===BigInt(0)?Qt=`>= 0${xt} and < 2${xt} ** ${(We+1)*8}${xt}`:Qt=`>= -(2${xt} ** ${(We+1)*8-1}${xt}) and < 2 ** ${(We+1)*8-1}${xt}`,new rn.ERR_OUT_OF_RANGE("value",Qt,Y)}Z(ye,Pe,We)}function Oe(Y,W){if(typeof Y!="number")throw new rn.ERR_INVALID_ARG_TYPE(W,"number",Y)}function xe(Y,W,X){throw Math.floor(Y)!==Y?(Oe(Y,X),new rn.ERR_OUT_OF_RANGE("offset","an integer",Y)):W<0?new rn.ERR_BUFFER_OUT_OF_BOUNDS:new rn.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${W}`,Y)}const Ie=/[^+/0-9A-Za-z-_]/g;function de(Y){if(Y=Y.split("=")[0],Y=Y.trim().replace(Ie,""),Y.length<2)return"";for(;Y.length%4!==0;)Y=Y+"=";return Y}function bt(Y,W){W=W||1/0;let X;const ye=Y.length;let Pe=null;const We=[];for(let xt=0;xt<ye;++xt){if(X=Y.charCodeAt(xt),X>55295&&X<57344){if(!Pe){if(X>56319){(W-=3)>-1&&We.push(239,191,189);continue}else if(xt+1===ye){(W-=3)>-1&&We.push(239,191,189);continue}Pe=X;continue}if(X<56320){(W-=3)>-1&&We.push(239,191,189),Pe=X;continue}X=(Pe-55296<<10|X-56320)+65536}else Pe&&(W-=3)>-1&&We.push(239,191,189);if(Pe=null,X<128){if((W-=1)<0)break;We.push(X)}else if(X<2048){if((W-=2)<0)break;We.push(X>>6|192,X&63|128)}else if(X<65536){if((W-=3)<0)break;We.push(X>>12|224,X>>6&63|128,X&63|128)}else if(X<1114112){if((W-=4)<0)break;We.push(X>>18|240,X>>12&63|128,X>>6&63|128,X&63|128)}else throw new Error("Invalid code point")}return We}function St(Y){const W=[];for(let X=0;X<Y.length;++X)W.push(Y.charCodeAt(X)&255);return W}function z(Y,W){let X,ye,Pe;const We=[];for(let xt=0;xt<Y.length&&!((W-=2)<0);++xt)X=Y.charCodeAt(xt),ye=X>>8,Pe=X%256,We.push(Pe),We.push(ye);return We}function Ve(Y){return S.toByteArray(de(Y))}function it(Y,W,X,ye){let Pe;for(Pe=0;Pe<ye&&!(Pe+X>=W.length||Pe>=Y.length);++Pe)W[Pe+X]=Y[Pe];return Pe}function be(Y,W){return Y instanceof W||Y!=null&&Y.constructor!=null&&Y.constructor.name!=null&&Y.constructor.name===W.name}function _e(Y){return Y!==Y}const ze=function(){const Y="0123456789abcdef",W=new Array(256);for(let X=0;X<16;++X){const ye=X*16;for(let Pe=0;Pe<16;++Pe)W[ye+Pe]=Y[X]+Y[Pe]}return W}();function Rt(Y){return typeof BigInt>"u"?me:Y}function me(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(RI)),RI}var II,b$;function Gi(){if(b$)return II;b$=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let i=0;i<n.length;i++)r+=`    ${n[i].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return II={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},II}var NI={exports:{}},MI,v$;function GK(){return v$||(v$=1,MI={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const i=t.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),MI}var jI,x$;function eo(){if(x$)return jI;x$=1;const{format:e,inspect:t}=GK(),{AggregateError:n}=Gi(),r=globalThis.AggregateError||n,i=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function c(v,x){if(!v)throw new l.ERR_INTERNAL_ASSERTION(x)}function u(v){let x="",_=v.length;const S=v[0]==="-"?1:0;for(;_>=S+4;_-=3)x=`_${v.slice(_-3,_)}${x}`;return`${v.slice(0,_)}${x}`}function d(v,x,_){if(typeof x=="function")return c(x.length<=_.length,`Code: ${v}; The provided arguments length (${_.length}) does not match the required ones (${x.length}).`),x(..._);const S=(x.match(/%[dfijoOs]/g)||[]).length;return c(S===_.length,`Code: ${v}; The provided arguments length (${_.length}) does not match the required ones (${S}).`),_.length===0?x:e(x,..._)}function h(v,x,_){_||(_=Error);class S extends _{constructor(...E){super(d(v,x,E))}toString(){return`${this.name} [${v}]: ${this.message}`}}Object.defineProperties(S.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${v}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),S.prototype.code=v,S.prototype[i]=!0,l[v]=S}function m(v){const x=o+v.name;return Object.defineProperty(v,"name",{value:x}),v}function y(v,x){if(v&&x&&v!==x){if(Array.isArray(x.errors))return x.errors.push(v),x;const _=new r([x,v],x.message);return _.code=x.code,_}return v||x}class b extends Error{constructor(x="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",_);super(x,_),this.code="ABORT_ERR",this.name="AbortError"}}return h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(v,x,_)=>{c(typeof v=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let S="The ";v.endsWith(" argument")?S+=`${v} `:S+=`"${v}" ${v.includes(".")?"property":"argument"} `,S+="must be ";const C=[],E=[],A=[];for(const N of x)c(typeof N=="string","All expected entries have to be of type string"),s.includes(N)?C.push(N.toLowerCase()):a.test(N)?E.push(N):(c(N!=="object",'The value "object" should be written as "Object"'),A.push(N));if(E.length>0){const N=C.indexOf("object");N!==-1&&(C.splice(C,N,1),E.push("Object"))}if(C.length>0){switch(C.length){case 1:S+=`of type ${C[0]}`;break;case 2:S+=`one of type ${C[0]} or ${C[1]}`;break;default:{const N=C.pop();S+=`one of type ${C.join(", ")}, or ${N}`}}(E.length>0||A.length>0)&&(S+=" or ")}if(E.length>0){switch(E.length){case 1:S+=`an instance of ${E[0]}`;break;case 2:S+=`an instance of ${E[0]} or ${E[1]}`;break;default:{const N=E.pop();S+=`an instance of ${E.join(", ")}, or ${N}`}}A.length>0&&(S+=" or ")}switch(A.length){case 0:break;case 1:A[0].toLowerCase()!==A[0]&&(S+="an "),S+=`${A[0]}`;break;case 2:S+=`one of ${A[0]} or ${A[1]}`;break;default:{const N=A.pop();S+=`one of ${A.join(", ")}, or ${N}`}}if(_==null)S+=`. Received ${_}`;else if(typeof _=="function"&&_.name)S+=`. Received function ${_.name}`;else if(typeof _=="object"){var R;if((R=_.constructor)!==null&&R!==void 0&&R.name)S+=`. Received an instance of ${_.constructor.name}`;else{const N=t(_,{depth:-1});S+=`. Received ${N}`}}else{let N=t(_,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),S+=`. Received type ${typeof _} (${N})`}return S},TypeError),h("ERR_INVALID_ARG_VALUE",(v,x,_="is invalid")=>{let S=t(x);return S.length>128&&(S=S.slice(0,128)+"..."),`The ${v.includes(".")?"property":"argument"} '${v}' ${_}. Received ${S}`},TypeError),h("ERR_INVALID_RETURN_VALUE",(v,x,_)=>{var S;const C=_!=null&&(S=_.constructor)!==null&&S!==void 0&&S.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${v} to be returned from the "${x}" function but got ${C}.`},TypeError),h("ERR_MISSING_ARGS",(...v)=>{c(v.length>0,"At least one arg needs to be specified");let x;const _=v.length;switch(v=(Array.isArray(v)?v:[v]).map(S=>`"${S}"`).join(" or "),_){case 1:x+=`The ${v[0]} argument`;break;case 2:x+=`The ${v[0]} and ${v[1]} arguments`;break;default:{const S=v.pop();x+=`The ${v.join(", ")}, and ${S} arguments`}break}return`${x} must be specified`},TypeError),h("ERR_OUT_OF_RANGE",(v,x,_)=>{c(x,'Missing "range" argument');let S;if(Number.isInteger(_)&&Math.abs(_)>2**32)S=u(String(_));else if(typeof _=="bigint"){S=String(_);const C=BigInt(2)**BigInt(32);(_>C||_<-C)&&(S=u(S)),S+="n"}else S=t(_);return`The value of "${v}" is out of range. It must be ${x}. Received ${S}`},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),jI={AbortError:b,aggregateTwoErrors:m(y),hideStackFrames:m,codes:l},jI}var Yb={exports:{}},w$;function bx(){if(w$)return Yb.exports;w$=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Yb.exports=e,Yb.exports.AbortSignal=t,Yb.exports.default=e,Yb.exports}var K_={exports:{}},_$;function dE(){if(_$)return K_.exports;_$=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(E,A,R){return Function.prototype.apply.call(E,A,R)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:n=function(E){return Object.getOwnPropertyNames(E)};function r(C){console&&console.warn&&console.warn(C)}var i=Number.isNaN||function(E){return E!==E};function s(){s.init.call(this)}K_.exports=s,K_.exports.once=x,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(C){if(typeof C!="number"||C<0||i(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");a=C}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||i(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function l(C){return C._maxListeners===void 0?s.defaultMaxListeners:C._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(E){for(var A=[],R=1;R<arguments.length;R++)A.push(arguments[R]);var N=E==="error",M=this._events;if(M!==void 0)N=N&&M.error===void 0;else if(!N)return!1;if(N){var P;if(A.length>0&&(P=A[0]),P instanceof Error)throw P;var L=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw L.context=P,L}var O=M[E];if(O===void 0)return!1;if(typeof O=="function")t(O,this,A);else for(var V=O.length,F=y(O,V),R=0;R<V;++R)t(F[R],this,A);return!0};function c(C,E,A,R){var N,M,P;if(o(A),M=C._events,M===void 0?(M=C._events=Object.create(null),C._eventsCount=0):(M.newListener!==void 0&&(C.emit("newListener",E,A.listener?A.listener:A),M=C._events),P=M[E]),P===void 0)P=M[E]=A,++C._eventsCount;else if(typeof P=="function"?P=M[E]=R?[A,P]:[P,A]:R?P.unshift(A):P.push(A),N=l(C),N>0&&P.length>N&&!P.warned){P.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=C,L.type=E,L.count=P.length,r(L)}return C}s.prototype.addListener=function(E,A){return c(this,E,A,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(E,A){return c(this,E,A,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(C,E,A){var R={fired:!1,wrapFn:void 0,target:C,type:E,listener:A},N=u.bind(R);return N.listener=A,R.wrapFn=N,N}s.prototype.once=function(E,A){return o(A),this.on(E,d(this,E,A)),this},s.prototype.prependOnceListener=function(E,A){return o(A),this.prependListener(E,d(this,E,A)),this},s.prototype.removeListener=function(E,A){var R,N,M,P,L;if(o(A),N=this._events,N===void 0)return this;if(R=N[E],R===void 0)return this;if(R===A||R.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete N[E],N.removeListener&&this.emit("removeListener",E,R.listener||A));else if(typeof R!="function"){for(M=-1,P=R.length-1;P>=0;P--)if(R[P]===A||R[P].listener===A){L=R[P].listener,M=P;break}if(M<0)return this;M===0?R.shift():b(R,M),R.length===1&&(N[E]=R[0]),N.removeListener!==void 0&&this.emit("removeListener",E,L||A)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(E){var A,R,N;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[E]),this;if(arguments.length===0){var M=Object.keys(R),P;for(N=0;N<M.length;++N)P=M[N],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=R[E],typeof A=="function")this.removeListener(E,A);else if(A!==void 0)for(N=A.length-1;N>=0;N--)this.removeListener(E,A[N]);return this};function h(C,E,A){var R=C._events;if(R===void 0)return[];var N=R[E];return N===void 0?[]:typeof N=="function"?A?[N.listener||N]:[N]:A?v(N):y(N,N.length)}s.prototype.listeners=function(E){return h(this,E,!0)},s.prototype.rawListeners=function(E){return h(this,E,!1)},s.listenerCount=function(C,E){return typeof C.listenerCount=="function"?C.listenerCount(E):m.call(C,E)},s.prototype.listenerCount=m;function m(C){var E=this._events;if(E!==void 0){var A=E[C];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function y(C,E){for(var A=new Array(E),R=0;R<E;++R)A[R]=C[R];return A}function b(C,E){for(;E+1<C.length;E++)C[E]=C[E+1];C.pop()}function v(C){for(var E=new Array(C.length),A=0;A<E.length;++A)E[A]=C[A].listener||C[A];return E}function x(C,E){return new Promise(function(A,R){function N(P){C.removeListener(E,M),R(P)}function M(){typeof C.removeListener=="function"&&C.removeListener("error",N),A([].slice.call(arguments))}S(C,E,M,{once:!0}),E!=="error"&&_(C,N,{once:!0})})}function _(C,E,A){typeof C.on=="function"&&S(C,"error",E,A)}function S(C,E,A,R){if(typeof C.on=="function")R.once?C.once(E,A):C.on(E,A);else if(typeof C.addEventListener=="function")C.addEventListener(E,function N(M){R.once&&C.removeEventListener(E,N),A(M)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return K_.exports}var S$;function vo(){return S$||(S$=1,function(e){const t=bh(),{format:n,inspect:r}=GK(),{codes:{ERR_INVALID_ARG_TYPE:i}}=eo(),{kResistStopPropagation:s,AggregateError:a,SymbolDispose:o}=Gi(),l=globalThis.AbortSignal||bx().AbortSignal,c=globalThis.AbortController||bx().AbortController,u=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||t.Blob,h=typeof d<"u"?function(v){return v instanceof d}:function(v){return!1},m=(b,v)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new i(v,"AbortSignal",b)},y=(b,v)=>{if(typeof b!="function")throw new i(v,"Function",b)};e.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(b){let v=!1;return function(...x){v||(v=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,v;return{promise:new Promise((_,S)=>{b=_,v=S}),resolve:b,reject:v}},promisify(b){return new Promise((v,x)=>{b((_,...S)=>_?x(_):v(...S))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof u},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:h,deprecate(b,v){return b},addAbortListener:dE().addAbortListener||function(v,x){if(v===void 0)throw new i("signal","AbortSignal",v);m(v,"signal"),y(x,"listener");let _;return v.aborted?queueMicrotask(()=>x()):(v.addEventListener("abort",x,{__proto__:null,once:!0,[s]:!0}),_=()=>{v.removeEventListener("abort",x)}),{__proto__:null,[o](){var S;(S=_)===null||S===void 0||S()}}},AbortSignalAny:l.any||function(v){if(v.length===1)return v[0];const x=new c,_=()=>x.abort();return v.forEach(S=>{m(S,"signals"),S.addEventListener("abort",_,{once:!0})}),x.signal.addEventListener("abort",()=>{v.forEach(S=>S.removeEventListener("abort",_))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(NI)),NI.exports}var Y_={},PI,C$;function Iw(){if(C$)return PI;C$=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:i,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:u,String:d,StringPrototypeToUpperCase:h,StringPrototypeTrim:m}=Gi(),{hideStackFrames:y,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:S}}=eo(),{normalizeEncoding:C}=vo(),{isAsyncFunction:E,isArrayBufferView:A}=vo().types,R={};function N(ie){return ie===(ie|0)}function M(ie){return ie===ie>>>0}const P=/^[0-7]+$/,L="must be a 32-bit unsigned integer or an octal string";function O(ie,Ee,Be){if(typeof ie>"u"&&(ie=Be),typeof ie=="string"){if(u(P,ie)===null)throw new x(Ee,ie,L);ie=l(ie,8)}return J(ie,Ee),ie}const V=y((ie,Ee,Be=o,ke=a)=>{if(typeof ie!="number")throw new v(Ee,"number",ie);if(!i(ie))throw new _(Ee,"an integer",ie);if(ie<Be||ie>ke)throw new _(Ee,`>= ${Be} && <= ${ke}`,ie)}),F=y((ie,Ee,Be=-2147483648,ke=2147483647)=>{if(typeof ie!="number")throw new v(Ee,"number",ie);if(!i(ie))throw new _(Ee,"an integer",ie);if(ie<Be||ie>ke)throw new _(Ee,`>= ${Be} && <= ${ke}`,ie)}),J=y((ie,Ee,Be=!1)=>{if(typeof ie!="number")throw new v(Ee,"number",ie);if(!i(ie))throw new _(Ee,"an integer",ie);const ke=Be?1:0,ct=4294967295;if(ie<ke||ie>ct)throw new _(Ee,`>= ${ke} && <= ${ct}`,ie)});function U(ie,Ee){if(typeof ie!="string")throw new v(Ee,"string",ie)}function G(ie,Ee,Be=void 0,ke){if(typeof ie!="number")throw new v(Ee,"number",ie);if(Be!=null&&ie<Be||ke!=null&&ie>ke||(Be!=null||ke!=null)&&s(ie))throw new _(Ee,`${Be!=null?`>= ${Be}`:""}${Be!=null&&ke!=null?" && ":""}${ke!=null?`<= ${ke}`:""}`,ie)}const $=y((ie,Ee,Be)=>{if(!t(Be,ie)){const ct="must be one of: "+n(r(Be,It=>typeof It=="string"?`'${It}'`:d(It)),", ");throw new x(Ee,ie,ct)}});function ne(ie,Ee){if(typeof ie!="boolean")throw new v(Ee,"boolean",ie)}function H(ie,Ee,Be){return ie==null||!c(ie,Ee)?Be:ie[Ee]}const te=y((ie,Ee,Be=null)=>{const ke=H(Be,"allowArray",!1),ct=H(Be,"allowFunction",!1);if(!H(Be,"nullable",!1)&&ie===null||!ke&&e(ie)||typeof ie!="object"&&(!ct||typeof ie!="function"))throw new v(Ee,"Object",ie)}),ee=y((ie,Ee)=>{if(ie!=null&&typeof ie!="object"&&typeof ie!="function")throw new v(Ee,"a dictionary",ie)}),se=y((ie,Ee,Be=0)=>{if(!e(ie))throw new v(Ee,"Array",ie);if(ie.length<Be){const ke=`must be longer than ${Be}`;throw new x(Ee,ie,ke)}});function he(ie,Ee){se(ie,Ee);for(let Be=0;Be<ie.length;Be++)U(ie[Be],`${Ee}[${Be}]`)}function ce(ie,Ee){se(ie,Ee);for(let Be=0;Be<ie.length;Be++)ne(ie[Be],`${Ee}[${Be}]`)}function Me(ie,Ee){se(ie,Ee);for(let Be=0;Be<ie.length;Be++){const ke=ie[Be],ct=`${Ee}[${Be}]`;if(ke==null)throw new v(ct,"AbortSignal",ke);et(ke,ct)}}function je(ie,Ee="signal"){if(U(ie,Ee),R[ie]===void 0)throw R[h(ie)]!==void 0?new S(ie+" (signals must use all capital letters)"):new S(ie)}const Ne=y((ie,Ee="buffer")=>{if(!A(ie))throw new v(Ee,["Buffer","TypedArray","DataView"],ie)});function Ce(ie,Ee){const Be=C(Ee),ke=ie.length;if(Be==="hex"&&ke%2!==0)throw new x("encoding",Ee,`is invalid for data of length ${ke}`)}function Ue(ie,Ee="Port",Be=!0){if(typeof ie!="number"&&typeof ie!="string"||typeof ie=="string"&&m(ie).length===0||+ie!==+ie>>>0||ie>65535||ie===0&&!Be)throw new b(Ee,ie,Be);return ie|0}const et=y((ie,Ee)=>{if(ie!==void 0&&(ie===null||typeof ie!="object"||!("aborted"in ie)))throw new v(Ee,"AbortSignal",ie)}),qe=y((ie,Ee)=>{if(typeof ie!="function")throw new v(Ee,"Function",ie)}),Re=y((ie,Ee)=>{if(typeof ie!="function"||E(ie))throw new v(Ee,"Function",ie)}),K=y((ie,Ee)=>{if(ie!==void 0)throw new v(Ee,"undefined",ie)});function ge(ie,Ee,Be){if(!t(Be,ie))throw new v(Ee,`('${n(Be,"|")}')`,ie)}const Ae=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function le(ie,Ee){if(typeof ie>"u"||!u(Ae,ie))throw new x(Ee,ie,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function oe(ie){if(typeof ie=="string")return le(ie,"hints"),ie;if(e(ie)){const Ee=ie.length;let Be="";if(Ee===0)return Be;for(let ke=0;ke<Ee;ke++){const ct=ie[ke];le(ct,"hints"),Be+=ct,ke!==Ee-1&&(Be+=", ")}return Be}throw new x("hints",ie,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return PI={isInt32:N,isUint32:M,parseFileMode:O,validateArray:se,validateStringArray:he,validateBooleanArray:ce,validateAbortSignalArray:Me,validateBoolean:ne,validateBuffer:Ne,validateDictionary:ee,validateEncoding:Ce,validateFunction:qe,validateInt32:F,validateInteger:V,validateNumber:G,validateObject:te,validateOneOf:$,validatePlainFunction:Re,validatePort:Ue,validateSignalName:je,validateString:U,validateUint32:J,validateUndefined:K,validateUnion:ge,validateAbortSignal:et,validateLinkHeaderValue:oe},PI}var Z_={exports:{}},OI={},k$;function dm(){return k$||(k$=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},i,s;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=a}catch{i=a}try{typeof clearTimeout=="function"?s=clearTimeout:s=o}catch{s=o}})();function l(C){if(i===setTimeout)return setTimeout(C,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(C,0);try{return i(C,0)}catch{try{return i.call(null,C,0)}catch{return i.call(this,C,0)}}}function c(C){if(s===clearTimeout)return clearTimeout(C);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(C);try{return s(C)}catch{try{return s.call(null,C)}catch{return s.call(this,C)}}}var u=[],d=!1,h,m=-1;function y(){!d||!h||(d=!1,h.length?u=h.concat(u):m=-1,u.length&&b())}function b(){if(!d){var C=l(y);d=!0;for(var E=u.length;E;){for(h=u,u=[];++m<E;)h&&h[m].run();m=-1,E=u.length}h=null,d=!1,c(C)}}r.nextTick=function(C){var E=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)E[A-1]=arguments[A];u.push(new v(C,E)),u.length===1&&!d&&l(b)};function v(C,E){this.fun=C,this.array=E}v.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var _=n.exports;const S=t(_);e.default=S,e.process=S}(OI)),OI}var DI,E$;function Md(){if(E$)return DI;E$=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Gi(),r=n("nodejs.stream.destroyed"),i=n("nodejs.stream.errored"),s=n("nodejs.stream.readable"),a=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function u(H,te=!1){var ee;return!!(H&&typeof H.pipe=="function"&&typeof H.on=="function"&&(!te||typeof H.pause=="function"&&typeof H.resume=="function")&&(!H._writableState||((ee=H._readableState)===null||ee===void 0?void 0:ee.readable)!==!1)&&(!H._writableState||H._readableState))}function d(H){var te;return!!(H&&typeof H.write=="function"&&typeof H.on=="function"&&(!H._readableState||((te=H._writableState)===null||te===void 0?void 0:te.writable)!==!1))}function h(H){return!!(H&&typeof H.pipe=="function"&&H._readableState&&typeof H.on=="function"&&typeof H.write=="function")}function m(H){return H&&(H._readableState||H._writableState||typeof H.write=="function"&&typeof H.on=="function"||typeof H.pipe=="function"&&typeof H.on=="function")}function y(H){return!!(H&&!m(H)&&typeof H.pipeThrough=="function"&&typeof H.getReader=="function"&&typeof H.cancel=="function")}function b(H){return!!(H&&!m(H)&&typeof H.getWriter=="function"&&typeof H.abort=="function")}function v(H){return!!(H&&!m(H)&&typeof H.readable=="object"&&typeof H.writable=="object")}function x(H){return y(H)||b(H)||v(H)}function _(H,te){return H==null?!1:te===!0?typeof H[e]=="function":te===!1?typeof H[t]=="function":typeof H[e]=="function"||typeof H[t]=="function"}function S(H){if(!m(H))return null;const te=H._writableState,ee=H._readableState,se=te||ee;return!!(H.destroyed||H[r]||se!=null&&se.destroyed)}function C(H){if(!d(H))return null;if(H.writableEnded===!0)return!0;const te=H._writableState;return te!=null&&te.errored?!1:typeof(te==null?void 0:te.ended)!="boolean"?null:te.ended}function E(H,te){if(!d(H))return null;if(H.writableFinished===!0)return!0;const ee=H._writableState;return ee!=null&&ee.errored?!1:typeof(ee==null?void 0:ee.finished)!="boolean"?null:!!(ee.finished||te===!1&&ee.ended===!0&&ee.length===0)}function A(H){if(!u(H))return null;if(H.readableEnded===!0)return!0;const te=H._readableState;return!te||te.errored?!1:typeof(te==null?void 0:te.ended)!="boolean"?null:te.ended}function R(H,te){if(!u(H))return null;const ee=H._readableState;return ee!=null&&ee.errored?!1:typeof(ee==null?void 0:ee.endEmitted)!="boolean"?null:!!(ee.endEmitted||te===!1&&ee.ended===!0&&ee.length===0)}function N(H){return H&&H[s]!=null?H[s]:typeof(H==null?void 0:H.readable)!="boolean"?null:S(H)?!1:u(H)&&H.readable&&!R(H)}function M(H){return H&&H[a]!=null?H[a]:typeof(H==null?void 0:H.writable)!="boolean"?null:S(H)?!1:d(H)&&H.writable&&!C(H)}function P(H,te){return m(H)?S(H)?!0:!((te==null?void 0:te.readable)!==!1&&N(H)||(te==null?void 0:te.writable)!==!1&&M(H)):null}function L(H){var te,ee;return m(H)?H.writableErrored?H.writableErrored:(te=(ee=H._writableState)===null||ee===void 0?void 0:ee.errored)!==null&&te!==void 0?te:null:null}function O(H){var te,ee;return m(H)?H.readableErrored?H.readableErrored:(te=(ee=H._readableState)===null||ee===void 0?void 0:ee.errored)!==null&&te!==void 0?te:null:null}function V(H){if(!m(H))return null;if(typeof H.closed=="boolean")return H.closed;const te=H._writableState,ee=H._readableState;return typeof(te==null?void 0:te.closed)=="boolean"||typeof(ee==null?void 0:ee.closed)=="boolean"?(te==null?void 0:te.closed)||(ee==null?void 0:ee.closed):typeof H._closed=="boolean"&&F(H)?H._closed:null}function F(H){return typeof H._closed=="boolean"&&typeof H._defaultKeepAlive=="boolean"&&typeof H._removedConnection=="boolean"&&typeof H._removedContLen=="boolean"}function J(H){return typeof H._sent100=="boolean"&&F(H)}function U(H){var te;return typeof H._consuming=="boolean"&&typeof H._dumped=="boolean"&&((te=H.req)===null||te===void 0?void 0:te.upgradeOrConnect)===void 0}function G(H){if(!m(H))return null;const te=H._writableState,ee=H._readableState,se=te||ee;return!se&&J(H)||!!(se&&se.autoDestroy&&se.emitClose&&se.closed===!1)}function $(H){var te;return!!(H&&((te=H[o])!==null&&te!==void 0?te:H.readableDidRead||H.readableAborted))}function ne(H){var te,ee,se,he,ce,Me,je,Ne,Ce,Ue;return!!(H&&((te=(ee=(se=(he=(ce=(Me=H[i])!==null&&Me!==void 0?Me:H.readableErrored)!==null&&ce!==void 0?ce:H.writableErrored)!==null&&he!==void 0?he:(je=H._readableState)===null||je===void 0?void 0:je.errorEmitted)!==null&&se!==void 0?se:(Ne=H._writableState)===null||Ne===void 0?void 0:Ne.errorEmitted)!==null&&ee!==void 0?ee:(Ce=H._readableState)===null||Ce===void 0?void 0:Ce.errored)!==null&&te!==void 0?te:!((Ue=H._writableState)===null||Ue===void 0)&&Ue.errored))}return DI={isDestroyed:S,kIsDestroyed:r,isDisturbed:$,kIsDisturbed:o,isErrored:ne,kIsErrored:i,isReadable:N,kIsReadable:s,kIsClosedPromise:l,kControllerErrorFunction:c,kIsWritable:a,isClosed:V,isDuplexNodeStream:h,isFinished:P,isIterable:_,isReadableNodeStream:u,isReadableStream:y,isReadableEnded:A,isReadableFinished:R,isReadableErrored:O,isNodeStream:m,isWebStream:x,isWritable:M,isWritableNodeStream:d,isWritableStream:b,isWritableEnded:C,isWritableFinished:E,isWritableErrored:L,isServerRequest:U,isServerResponse:J,willEmitClose:G,isTransformStream:v},DI}var T$;function vh(){if(T$)return Z_.exports;T$=1;const e=dm(),{AbortError:t,codes:n}=eo(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:i}=n,{kEmptyObject:s,once:a}=vo(),{validateAbortSignal:o,validateFunction:l,validateObject:c,validateBoolean:u}=Iw(),{Promise:d,PromisePrototypeThen:h,SymbolDispose:m}=Gi(),{isClosed:y,isReadable:b,isReadableNodeStream:v,isReadableStream:x,isReadableFinished:_,isReadableErrored:S,isWritable:C,isWritableNodeStream:E,isWritableStream:A,isWritableFinished:R,isWritableErrored:N,isNodeStream:M,willEmitClose:P,kIsClosedPromise:L}=Md();let O;function V($){return $.setHeader&&typeof $.abort=="function"}const F=()=>{};function J($,ne,H){var te,ee;if(arguments.length===2?(H=ne,ne=s):ne==null?ne=s:c(ne,"options"),l(H,"callback"),o(ne.signal,"options.signal"),H=a(H),x($)||A($))return U($,ne,H);if(!M($))throw new r("stream",["ReadableStream","WritableStream","Stream"],$);const se=(te=ne.readable)!==null&&te!==void 0?te:v($),he=(ee=ne.writable)!==null&&ee!==void 0?ee:E($),ce=$._writableState,Me=$._readableState,je=()=>{$.writable||Ue()};let Ne=P($)&&v($)===se&&E($)===he,Ce=R($,!1);const Ue=()=>{Ce=!0,$.destroyed&&(Ne=!1),!(Ne&&(!$.readable||se))&&(!se||et)&&H.call($)};let et=_($,!1);const qe=()=>{et=!0,$.destroyed&&(Ne=!1),!(Ne&&(!$.writable||he))&&(!he||Ce)&&H.call($)},Re=ie=>{H.call($,ie)};let K=y($);const ge=()=>{K=!0;const ie=N($)||S($);if(ie&&typeof ie!="boolean")return H.call($,ie);if(se&&!et&&v($,!0)&&!_($,!1))return H.call($,new i);if(he&&!Ce&&!R($,!1))return H.call($,new i);H.call($)},Ae=()=>{K=!0;const ie=N($)||S($);if(ie&&typeof ie!="boolean")return H.call($,ie);H.call($)},le=()=>{$.req.on("finish",Ue)};V($)?($.on("complete",Ue),Ne||$.on("abort",ge),$.req?le():$.on("request",le)):he&&!ce&&($.on("end",je),$.on("close",je)),!Ne&&typeof $.aborted=="boolean"&&$.on("aborted",ge),$.on("end",qe),$.on("finish",Ue),ne.error!==!1&&$.on("error",Re),$.on("close",ge),K?e.nextTick(ge):ce!=null&&ce.errorEmitted||Me!=null&&Me.errorEmitted?Ne||e.nextTick(Ae):(!se&&(!Ne||b($))&&(Ce||C($)===!1)||!he&&(!Ne||C($))&&(et||b($)===!1)||Me&&$.req&&$.aborted)&&e.nextTick(Ae);const oe=()=>{H=F,$.removeListener("aborted",ge),$.removeListener("complete",Ue),$.removeListener("abort",ge),$.removeListener("request",le),$.req&&$.req.removeListener("finish",Ue),$.removeListener("end",je),$.removeListener("close",je),$.removeListener("finish",Ue),$.removeListener("end",qe),$.removeListener("error",Re),$.removeListener("close",ge)};if(ne.signal&&!K){const ie=()=>{const Ee=H;oe(),Ee.call($,new t(void 0,{cause:ne.signal.reason}))};if(ne.signal.aborted)e.nextTick(ie);else{O=O||vo().addAbortListener;const Ee=O(ne.signal,ie),Be=H;H=a((...ke)=>{Ee[m](),Be.apply($,ke)})}}return oe}function U($,ne,H){let te=!1,ee=F;if(ne.signal)if(ee=()=>{te=!0,H.call($,new t(void 0,{cause:ne.signal.reason}))},ne.signal.aborted)e.nextTick(ee);else{O=O||vo().addAbortListener;const he=O(ne.signal,ee),ce=H;H=a((...Me)=>{he[m](),ce.apply($,Me)})}const se=(...he)=>{te||e.nextTick(()=>H.apply($,he))};return h($[L].promise,se,se),F}function G($,ne){var H;let te=!1;return ne===null&&(ne=s),(H=ne)!==null&&H!==void 0&&H.cleanup&&(u(ne.cleanup,"cleanup"),te=ne.cleanup),new d((ee,se)=>{const he=J($,ne,ce=>{te&&he(),ce?se(ce):ee()})})}return Z_.exports=J,Z_.exports.finished=G,Z_.exports}var FI,A$;function ay(){if(A$)return FI;A$=1;const e=dm(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=eo(),{Symbol:i}=Gi(),{kIsDestroyed:s,isDestroyed:a,isFinished:o,isServerRequest:l}=Md(),c=i("kDestroy"),u=i("kConstruct");function d(P,L,O){P&&(P.stack,L&&!L.errored&&(L.errored=P),O&&!O.errored&&(O.errored=P))}function h(P,L){const O=this._readableState,V=this._writableState,F=V||O;return V!=null&&V.destroyed||O!=null&&O.destroyed?(typeof L=="function"&&L(),this):(d(P,V,O),V&&(V.destroyed=!0),O&&(O.destroyed=!0),F.constructed?m(this,P,L):this.once(c,function(J){m(this,t(J,P),L)}),this)}function m(P,L,O){let V=!1;function F(J){if(V)return;V=!0;const U=P._readableState,G=P._writableState;d(J,G,U),G&&(G.closed=!0),U&&(U.closed=!0),typeof O=="function"&&O(J),J?e.nextTick(y,P,J):e.nextTick(b,P)}try{P._destroy(L||null,F)}catch(J){F(J)}}function y(P,L){v(P,L),b(P)}function b(P){const L=P._readableState,O=P._writableState;O&&(O.closeEmitted=!0),L&&(L.closeEmitted=!0),(O!=null&&O.emitClose||L!=null&&L.emitClose)&&P.emit("close")}function v(P,L){const O=P._readableState,V=P._writableState;V!=null&&V.errorEmitted||O!=null&&O.errorEmitted||(V&&(V.errorEmitted=!0),O&&(O.errorEmitted=!0),P.emit("error",L))}function x(){const P=this._readableState,L=this._writableState;P&&(P.constructed=!0,P.closed=!1,P.closeEmitted=!1,P.destroyed=!1,P.errored=null,P.errorEmitted=!1,P.reading=!1,P.ended=P.readable===!1,P.endEmitted=P.readable===!1),L&&(L.constructed=!0,L.destroyed=!1,L.closed=!1,L.closeEmitted=!1,L.errored=null,L.errorEmitted=!1,L.finalCalled=!1,L.prefinished=!1,L.ended=L.writable===!1,L.ending=L.writable===!1,L.finished=L.writable===!1)}function _(P,L,O){const V=P._readableState,F=P._writableState;if(F!=null&&F.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||F!=null&&F.autoDestroy?P.destroy(L):L&&(L.stack,F&&!F.errored&&(F.errored=L),V&&!V.errored&&(V.errored=L),O?e.nextTick(v,P,L):v(P,L))}function S(P,L){if(typeof P._construct!="function")return;const O=P._readableState,V=P._writableState;O&&(O.constructed=!1),V&&(V.constructed=!1),P.once(u,L),!(P.listenerCount(u)>1)&&e.nextTick(C,P)}function C(P){let L=!1;function O(V){if(L){_(P,V??new n);return}L=!0;const F=P._readableState,J=P._writableState,U=J||F;F&&(F.constructed=!0),J&&(J.constructed=!0),U.destroyed?P.emit(c,V):V?_(P,V,!0):e.nextTick(E,P)}try{P._construct(V=>{e.nextTick(O,V)})}catch(V){e.nextTick(O,V)}}function E(P){P.emit(u)}function A(P){return(P==null?void 0:P.setHeader)&&typeof P.abort=="function"}function R(P){P.emit("close")}function N(P,L){P.emit("error",L),e.nextTick(R,P)}function M(P,L){!P||a(P)||(!L&&!o(P)&&(L=new r),l(P)?(P.socket=null,P.destroy(L)):A(P)?P.abort():A(P.req)?P.req.abort():typeof P.destroy=="function"?P.destroy(L):typeof P.close=="function"?P.close():L?e.nextTick(N,P,L):e.nextTick(R,P),P.destroyed||(P[s]=!0))}return FI={construct:S,destroyer:M,destroy:h,undestroy:x,errorOrDestroy:_},FI}var LI,R$;function lO(){if(R$)return LI;R$=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Gi(),{EventEmitter:n}=dE();function r(s){n.call(this,s)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(s,a){const o=this;function l(b){s.writable&&s.write(b)===!1&&o.pause&&o.pause()}o.on("data",l);function c(){o.readable&&o.resume&&o.resume()}s.on("drain",c),!s._isStdio&&(!a||a.end!==!1)&&(o.on("end",d),o.on("close",h));let u=!1;function d(){u||(u=!0,s.end())}function h(){u||(u=!0,typeof s.destroy=="function"&&s.destroy())}function m(b){y(),n.listenerCount(this,"error")===0&&this.emit("error",b)}i(o,"error",m),i(s,"error",m);function y(){o.removeListener("data",l),s.removeListener("drain",c),o.removeListener("end",d),o.removeListener("close",h),o.removeListener("error",m),s.removeListener("error",m),o.removeListener("end",y),o.removeListener("close",y),s.removeListener("close",y)}return o.on("end",y),o.on("close",y),s.on("close",y),s.emit("pipe",o),s};function i(s,a,o){if(typeof s.prependListener=="function")return s.prependListener(a,o);!s._events||!s._events[a]?s.on(a,o):e(s._events[a])?s._events[a].unshift(o):s._events[a]=[o,s._events[a]]}return LI={Stream:r,prependListener:i},LI}var BI={exports:{}},I$;function fE(){return I$||(I$=1,function(e){const{SymbolDispose:t}=Gi(),{AbortError:n,codes:r}=eo(),{isNodeStream:i,isWebStream:s,kControllerErrorFunction:a}=Md(),o=vh(),{ERR_INVALID_ARG_TYPE:l}=r;let c;const u=(d,h)=>{if(typeof d!="object"||!("aborted"in d))throw new l(h,"AbortSignal",d)};e.exports.addAbortSignal=function(h,m){if(u(h,"signal"),!i(m)&&!s(m))throw new l("stream",["ReadableStream","WritableStream","Stream"],m);return e.exports.addAbortSignalNoValidate(h,m)},e.exports.addAbortSignalNoValidate=function(d,h){if(typeof d!="object"||!("aborted"in d))return h;const m=i(h)?()=>{h.destroy(new n(void 0,{cause:d.reason}))}:()=>{h[a](new n(void 0,{cause:d.reason}))};if(d.aborted)m();else{c=c||vo().addAbortListener;const y=c(d,m);o(h,y[t])}return h}}(BI)),BI.exports}var $I,N$;function R_e(){if(N$)return $I;N$=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Gi(),{Buffer:i}=bh(),{inspect:s}=vo();return $I=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,c=""+l.data;for(;(l=l.next)!==null;)c+=o+l.data;return c}concat(o){if(this.length===0)return i.alloc(0);const l=i.allocUnsafe(o>>>0);let c=this.head,u=0;for(;c;)n(l,c.data,u),u+=c.data.length,c=c.next;return l}consume(o,l){const c=this.head.data;if(o<c.length){const u=c.slice(0,o);return this.head.data=c.slice(o),u}return o===c.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",c=this.head,u=0;do{const d=c.data;if(o>d.length)l+=d,o-=d.length;else{o===d.length?(l+=d,++u,c.next?this.head=c.next:this.head=this.tail=null):(l+=e(d,0,o),this.head=c,c.data=e(d,o));break}++u}while((c=c.next)!==null);return this.length-=u,l}_getBuffer(o){const l=i.allocUnsafe(o),c=o;let u=this.head,d=0;do{const h=u.data;if(o>h.length)n(l,h,c-o),o-=h.length;else{o===h.length?(n(l,h,c-o),++d,u.next?this.head=u.next:this.head=this.tail=null):(n(l,new r(h.buffer,h.byteOffset,o),c-o),this.head=u,u.data=h.slice(o));break}++d}while((u=u.next)!==null);return this.length-=d,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return s(this,{...l,depth:0,customInspect:!1})}},$I}var zI,M$;function hE(){if(M$)return zI;M$=1;const{MathFloor:e,NumberIsInteger:t}=Gi(),{validateInteger:n}=Iw(),{ERR_INVALID_ARG_VALUE:r}=eo().codes;let i=16*1024,s=16;function a(u,d,h){return u.highWaterMark!=null?u.highWaterMark:d?u[h]:null}function o(u){return u?s:i}function l(u,d){n(d,"value",0),u?s=d:i=d}function c(u,d,h,m){const y=a(d,m,h);if(y!=null){if(!t(y)||y<0){const b=m?`options.${h}`:"options.highWaterMark";throw new r(b,y)}return e(y)}return o(u.objectMode)}return zI={getHighWaterMark:c,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},zI}var UI={},X_={exports:{}},j$;function cO(){return j$||(j$=1,function(e,t){var n=bh(),r=n.Buffer;function i(a,o){for(var l in a)o[l]=a[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s);function s(a,o,l){return r(a,o,l)}i(r,s),s.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,o,l)},s.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=r(a);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(a)}}(X_,X_.exports)),X_.exports}var P$;function I_e(){if(P$)return UI;P$=1;var e=cO().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var _;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(_)return;x=(""+x).toLowerCase(),_=!0}}function r(x){var _=n(x);if(typeof _!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return _||x}UI.StringDecoder=i;function i(x){this.encoding=r(x);var _;switch(this.encoding){case"utf16le":this.text=d,this.end=h,_=4;break;case"utf8":this.fillLast=l,_=4;break;case"base64":this.text=m,this.end=y,_=3;break;default:this.write=b,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_)}i.prototype.write=function(x){if(x.length===0)return"";var _,S;if(this.lastNeed){if(_=this.fillLast(x),_===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<x.length?_?_+this.text(x,S):this.text(x,S):_||""},i.prototype.end=u,i.prototype.text=c,i.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function s(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function a(x,_,S){var C=_.length-1;if(C<S)return 0;var E=s(_[C]);return E>=0?(E>0&&(x.lastNeed=E-1),E):--C<S||E===-2?0:(E=s(_[C]),E>=0?(E>0&&(x.lastNeed=E-2),E):--C<S||E===-2?0:(E=s(_[C]),E>=0?(E>0&&(E===2?E=0:x.lastNeed=E-3),E):0))}function o(x,_,S){if((_[0]&192)!==128)return x.lastNeed=0,"�";if(x.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return x.lastNeed=1,"�";if(x.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return x.lastNeed=2,"�"}}function l(x){var _=this.lastTotal-this.lastNeed,S=o(this,x);if(S!==void 0)return S;if(this.lastNeed<=x.length)return x.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,_,0,x.length),this.lastNeed-=x.length}function c(x,_){var S=a(this,x,_);if(!this.lastNeed)return x.toString("utf8",_);this.lastTotal=S;var C=x.length-(S-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",_,C)}function u(x){var _=x&&x.length?this.write(x):"";return this.lastNeed?_+"�":_}function d(x,_){if((x.length-_)%2===0){var S=x.toString("utf16le",_);if(S){var C=S.charCodeAt(S.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",_,x.length-1)}function h(x){var _=x&&x.length?this.write(x):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,S)}return _}function m(x,_){var S=(x.length-_)%3;return S===0?x.toString("base64",_):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",_,x.length-S))}function y(x){var _=x&&x.length?this.write(x):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function b(x){return x.toString(this.encoding)}function v(x){return x&&x.length?this.write(x):""}return UI}var qI,O$;function KK(){if(O$)return qI;O$=1;const e=dm(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Gi(),{Buffer:i}=bh(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:a}=eo().codes;function o(l,c,u){let d;if(typeof c=="string"||c instanceof i)return new l({objectMode:!0,...u,read(){this.push(c),this.push(null)}});let h;if(c&&c[n])h=!0,d=c[n]();else if(c&&c[r])h=!1,d=c[r]();else throw new s("iterable",["Iterable"],c);const m=new l({objectMode:!0,highWaterMark:1,...u});let y=!1;m._read=function(){y||(y=!0,v())},m._destroy=function(x,_){t(b(x),()=>e.nextTick(_,x),S=>e.nextTick(_,S||x))};async function b(x){const _=x!=null,S=typeof d.throw=="function";if(_&&S){const{value:C,done:E}=await d.throw(x);if(await C,E)return}if(typeof d.return=="function"){const{value:C}=await d.return();await C}}async function v(){for(;;){try{const{value:x,done:_}=h?await d.next():d.next();if(_)m.push(null);else{const S=x&&typeof x.then=="function"?await x:x;if(S===null)throw y=!1,new a;if(m.push(S))continue;y=!1}}catch(x){m.destroy(x)}break}}return m}return qI=o,qI}var VI,D$;function pE(){if(D$)return VI;D$=1;const e=dm(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:a,ObjectSetPrototypeOf:o,Promise:l,SafeSet:c,SymbolAsyncDispose:u,SymbolAsyncIterator:d,Symbol:h}=Gi();VI=ke,ke.ReadableState=Be;const{EventEmitter:m}=dE(),{Stream:y,prependListener:b}=lO(),{Buffer:v}=bh(),{addAbortSignal:x}=fE(),_=vh();let S=vo().debuglog("stream",me=>{S=me});const C=R_e(),E=ay(),{getHighWaterMark:A,getDefaultHighWaterMark:R}=hE(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:M,ERR_METHOD_NOT_IMPLEMENTED:P,ERR_OUT_OF_RANGE:L,ERR_STREAM_PUSH_AFTER_EOF:O,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:V},AbortError:F}=eo(),{validateObject:J}=Iw(),U=h("kPaused"),{StringDecoder:G}=I_e(),$=KK();o(ke.prototype,y.prototype),o(ke,y);const ne=()=>{},{errorOrDestroy:H}=E,te=1,ee=2,se=4,he=8,ce=16,Me=32,je=64,Ne=128,Ce=256,Ue=512,et=1024,qe=2048,Re=4096,K=8192,ge=16384,Ae=32768,le=65536,oe=1<<17,ie=1<<18;function Ee(me){return{enumerable:!1,get(){return(this.state&me)!==0},set(Y){Y?this.state|=me:this.state&=~me}}}s(Be.prototype,{objectMode:Ee(te),ended:Ee(ee),endEmitted:Ee(se),reading:Ee(he),constructed:Ee(ce),sync:Ee(Me),needReadable:Ee(je),emittedReadable:Ee(Ne),readableListening:Ee(Ce),resumeScheduled:Ee(Ue),errorEmitted:Ee(et),emitClose:Ee(qe),autoDestroy:Ee(Re),destroyed:Ee(K),closed:Ee(ge),closeEmitted:Ee(Ae),multiAwaitDrain:Ee(le),readingMore:Ee(oe),dataEmitted:Ee(ie)});function Be(me,Y,W){typeof W!="boolean"&&(W=Y instanceof wd()),this.state=qe|Re|ce|Me,me&&me.objectMode&&(this.state|=te),W&&me&&me.readableObjectMode&&(this.state|=te),this.highWaterMark=me?A(this,me,"readableHighWaterMark",W):R(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[U]=null,me&&me.emitClose===!1&&(this.state&=-2049),me&&me.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=me&&me.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,me&&me.encoding&&(this.decoder=new G(me.encoding),this.encoding=me.encoding)}function ke(me){if(!(this instanceof ke))return new ke(me);const Y=this instanceof wd();this._readableState=new Be(me,this,Y),me&&(typeof me.read=="function"&&(this._read=me.read),typeof me.destroy=="function"&&(this._destroy=me.destroy),typeof me.construct=="function"&&(this._construct=me.construct),me.signal&&!Y&&x(me.signal,this)),y.call(this,me),E.construct(this,()=>{this._readableState.needReadable&&D(this,this._readableState)})}ke.prototype.destroy=E.destroy,ke.prototype._undestroy=E.undestroy,ke.prototype._destroy=function(me,Y){Y(me)},ke.prototype[m.captureRejectionSymbol]=function(me){this.destroy(me)},ke.prototype[u]=function(){let me;return this.destroyed||(me=this.readableEnded?null:new F,this.destroy(me)),new l((Y,W)=>_(this,X=>X&&X!==me?W(X):Y(null)))},ke.prototype.push=function(me,Y){return ct(this,me,Y,!1)},ke.prototype.unshift=function(me,Y){return ct(this,me,Y,!0)};function ct(me,Y,W,X){S("readableAddChunk",Y);const ye=me._readableState;let Pe;if((ye.state&te)===0&&(typeof Y=="string"?(W=W||ye.defaultEncoding,ye.encoding!==W&&(X&&ye.encoding?Y=v.from(Y,W).toString(ye.encoding):(Y=v.from(Y,W),W=""))):Y instanceof v?W="":y._isUint8Array(Y)?(Y=y._uint8ArrayToBuffer(Y),W=""):Y!=null&&(Pe=new M("chunk",["string","Buffer","Uint8Array"],Y))),Pe)H(me,Pe);else if(Y===null)ye.state&=-9,Bt(me,ye);else if((ye.state&te)!==0||Y&&Y.length>0)if(X)if((ye.state&se)!==0)H(me,new V);else{if(ye.destroyed||ye.errored)return!1;It(me,ye,Y,!0)}else if(ye.ended)H(me,new O);else{if(ye.destroyed||ye.errored)return!1;ye.state&=-9,ye.decoder&&!W?(Y=ye.decoder.write(Y),ye.objectMode||Y.length!==0?It(me,ye,Y,!1):D(me,ye)):It(me,ye,Y,!1)}else X||(ye.state&=-9,D(me,ye));return!ye.ended&&(ye.length<ye.highWaterMark||ye.length===0)}function It(me,Y,W,X){Y.flowing&&Y.length===0&&!Y.sync&&me.listenerCount("data")>0?((Y.state&le)!==0?Y.awaitDrainWriters.clear():Y.awaitDrainWriters=null,Y.dataEmitted=!0,me.emit("data",W)):(Y.length+=Y.objectMode?1:W.length,X?Y.buffer.unshift(W):Y.buffer.push(W),(Y.state&je)!==0&&rn(me)),D(me,Y)}ke.prototype.isPaused=function(){const me=this._readableState;return me[U]===!0||me.flowing===!1},ke.prototype.setEncoding=function(me){const Y=new G(me);this._readableState.decoder=Y,this._readableState.encoding=this._readableState.decoder.encoding;const W=this._readableState.buffer;let X="";for(const ye of W)X+=Y.write(ye);return W.clear(),X!==""&&W.push(X),this._readableState.length=X.length,this};const ht=1073741824;function Ot(me){if(me>ht)throw new L("size","<= 1GiB",me);return me--,me|=me>>>1,me|=me>>>2,me|=me>>>4,me|=me>>>8,me|=me>>>16,me++,me}function zt(me,Y){return me<=0||Y.length===0&&Y.ended?0:(Y.state&te)!==0?1:r(me)?Y.flowing&&Y.length?Y.buffer.first().length:Y.length:me<=Y.length?me:Y.ended?Y.length:0}ke.prototype.read=function(me){S("read",me),me===void 0?me=NaN:n(me)||(me=i(me,10));const Y=this._readableState,W=me;if(me>Y.highWaterMark&&(Y.highWaterMark=Ot(me)),me!==0&&(Y.state&=-129),me===0&&Y.needReadable&&((Y.highWaterMark!==0?Y.length>=Y.highWaterMark:Y.length>0)||Y.ended))return S("read: emitReadable",Y.length,Y.ended),Y.length===0&&Y.ended?it(this):rn(this),null;if(me=zt(me,Y),me===0&&Y.ended)return Y.length===0&&it(this),null;let X=(Y.state&je)!==0;if(S("need readable",X),(Y.length===0||Y.length-me<Y.highWaterMark)&&(X=!0,S("length less than watermark",X)),Y.ended||Y.reading||Y.destroyed||Y.errored||!Y.constructed)X=!1,S("reading, ended or constructing",X);else if(X){S("do read"),Y.state|=he|Me,Y.length===0&&(Y.state|=je);try{this._read(Y.highWaterMark)}catch(Pe){H(this,Pe)}Y.state&=-33,Y.reading||(me=zt(W,Y))}let ye;return me>0?ye=Ve(me,Y):ye=null,ye===null?(Y.needReadable=Y.length<=Y.highWaterMark,me=0):(Y.length-=me,Y.multiAwaitDrain?Y.awaitDrainWriters.clear():Y.awaitDrainWriters=null),Y.length===0&&(Y.ended||(Y.needReadable=!0),W!==me&&Y.ended&&it(this)),ye!==null&&!Y.errorEmitted&&!Y.closeEmitted&&(Y.dataEmitted=!0,this.emit("data",ye)),ye};function Bt(me,Y){if(S("onEofChunk"),!Y.ended){if(Y.decoder){const W=Y.decoder.end();W&&W.length&&(Y.buffer.push(W),Y.length+=Y.objectMode?1:W.length)}Y.ended=!0,Y.sync?rn(me):(Y.needReadable=!1,Y.emittedReadable=!0,ve(me))}}function rn(me){const Y=me._readableState;S("emitReadable",Y.needReadable,Y.emittedReadable),Y.needReadable=!1,Y.emittedReadable||(S("emitReadable",Y.flowing),Y.emittedReadable=!0,e.nextTick(ve,me))}function ve(me){const Y=me._readableState;S("emitReadable_",Y.destroyed,Y.length,Y.ended),!Y.destroyed&&!Y.errored&&(Y.length||Y.ended)&&(me.emit("readable"),Y.emittedReadable=!1),Y.needReadable=!Y.flowing&&!Y.ended&&Y.length<=Y.highWaterMark,bt(me)}function D(me,Y){!Y.readingMore&&Y.constructed&&(Y.readingMore=!0,e.nextTick(Z,me,Y))}function Z(me,Y){for(;!Y.reading&&!Y.ended&&(Y.length<Y.highWaterMark||Y.flowing&&Y.length===0);){const W=Y.length;if(S("maybeReadMore read 0"),me.read(0),W===Y.length)break}Y.readingMore=!1}ke.prototype._read=function(me){throw new P("_read()")},ke.prototype.pipe=function(me,Y){const W=this,X=this._readableState;X.pipes.length===1&&(X.multiAwaitDrain||(X.multiAwaitDrain=!0,X.awaitDrainWriters=new c(X.awaitDrainWriters?[X.awaitDrainWriters]:[]))),X.pipes.push(me),S("pipe count=%d opts=%j",X.pipes.length,Y);const Pe=(!Y||Y.end!==!1)&&me!==e.stdout&&me!==e.stderr?xt:Qr;X.endEmitted?e.nextTick(Pe):W.once("end",Pe),me.on("unpipe",We);function We(br,hn){S("onunpipe"),br===W&&hn&&hn.hasUnpiped===!1&&(hn.hasUnpiped=!0,Zt())}function xt(){S("onend"),me.end()}let Qt,Fn=!1;function Zt(){S("cleanup"),me.removeListener("close",Cr),me.removeListener("finish",Jr),Qt&&me.removeListener("drain",Qt),me.removeListener("error",dr),me.removeListener("unpipe",We),W.removeListener("end",xt),W.removeListener("end",Qr),W.removeListener("data",cn),Fn=!0,Qt&&X.awaitDrainWriters&&(!me._writableState||me._writableState.needDrain)&&Qt()}function tn(){Fn||(X.pipes.length===1&&X.pipes[0]===me?(S("false write response, pause",0),X.awaitDrainWriters=me,X.multiAwaitDrain=!1):X.pipes.length>1&&X.pipes.includes(me)&&(S("false write response, pause",X.awaitDrainWriters.size),X.awaitDrainWriters.add(me)),W.pause()),Qt||(Qt=pe(W,me),me.on("drain",Qt))}W.on("data",cn);function cn(br){S("ondata");const hn=me.write(br);S("dest.write",hn),hn===!1&&tn()}function dr(br){if(S("onerror",br),Qr(),me.removeListener("error",dr),me.listenerCount("error")===0){const hn=me._writableState||me._readableState;hn&&!hn.errorEmitted?H(me,br):me.emit("error",br)}}b(me,"error",dr);function Cr(){me.removeListener("finish",Jr),Qr()}me.once("close",Cr);function Jr(){S("onfinish"),me.removeListener("close",Cr),Qr()}me.once("finish",Jr);function Qr(){S("unpipe"),W.unpipe(me)}return me.emit("pipe",W),me.writableNeedDrain===!0?tn():X.flowing||(S("pipe resume"),W.resume()),me};function pe(me,Y){return function(){const X=me._readableState;X.awaitDrainWriters===Y?(S("pipeOnDrain",1),X.awaitDrainWriters=null):X.multiAwaitDrain&&(S("pipeOnDrain",X.awaitDrainWriters.size),X.awaitDrainWriters.delete(Y)),(!X.awaitDrainWriters||X.awaitDrainWriters.size===0)&&me.listenerCount("data")&&me.resume()}}ke.prototype.unpipe=function(me){const Y=this._readableState,W={hasUnpiped:!1};if(Y.pipes.length===0)return this;if(!me){const ye=Y.pipes;Y.pipes=[],this.pause();for(let Pe=0;Pe<ye.length;Pe++)ye[Pe].emit("unpipe",this,{hasUnpiped:!1});return this}const X=t(Y.pipes,me);return X===-1?this:(Y.pipes.splice(X,1),Y.pipes.length===0&&this.pause(),me.emit("unpipe",this,W),this)},ke.prototype.on=function(me,Y){const W=y.prototype.on.call(this,me,Y),X=this._readableState;return me==="data"?(X.readableListening=this.listenerCount("readable")>0,X.flowing!==!1&&this.resume()):me==="readable"&&!X.endEmitted&&!X.readableListening&&(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,S("on readable",X.length,X.reading),X.length?rn(this):X.reading||e.nextTick(xe,this)),W},ke.prototype.addListener=ke.prototype.on,ke.prototype.removeListener=function(me,Y){const W=y.prototype.removeListener.call(this,me,Y);return me==="readable"&&e.nextTick(Oe,this),W},ke.prototype.off=ke.prototype.removeListener,ke.prototype.removeAllListeners=function(me){const Y=y.prototype.removeAllListeners.apply(this,arguments);return(me==="readable"||me===void 0)&&e.nextTick(Oe,this),Y};function Oe(me){const Y=me._readableState;Y.readableListening=me.listenerCount("readable")>0,Y.resumeScheduled&&Y[U]===!1?Y.flowing=!0:me.listenerCount("data")>0?me.resume():Y.readableListening||(Y.flowing=null)}function xe(me){S("readable nexttick read 0"),me.read(0)}ke.prototype.resume=function(){const me=this._readableState;return me.flowing||(S("resume"),me.flowing=!me.readableListening,Ie(this,me)),me[U]=!1,this};function Ie(me,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,e.nextTick(de,me,Y))}function de(me,Y){S("resume",Y.reading),Y.reading||me.read(0),Y.resumeScheduled=!1,me.emit("resume"),bt(me),Y.flowing&&!Y.reading&&me.read(0)}ke.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[U]=!0,this};function bt(me){const Y=me._readableState;for(S("flow",Y.flowing);Y.flowing&&me.read()!==null;);}ke.prototype.wrap=function(me){let Y=!1;me.on("data",X=>{!this.push(X)&&me.pause&&(Y=!0,me.pause())}),me.on("end",()=>{this.push(null)}),me.on("error",X=>{H(this,X)}),me.on("close",()=>{this.destroy()}),me.on("destroy",()=>{this.destroy()}),this._read=()=>{Y&&me.resume&&(Y=!1,me.resume())};const W=a(me);for(let X=1;X<W.length;X++){const ye=W[X];this[ye]===void 0&&typeof me[ye]=="function"&&(this[ye]=me[ye].bind(me))}return this},ke.prototype[d]=function(){return St(this)},ke.prototype.iterator=function(me){return me!==void 0&&J(me,"options"),St(this,me)};function St(me,Y){typeof me.read!="function"&&(me=ke.wrap(me,{objectMode:!0}));const W=z(me,Y);return W.stream=me,W}async function*z(me,Y){let W=ne;function X(We){this===me?(W(),W=ne):W=We}me.on("readable",X);let ye;const Pe=_(me,{writable:!1},We=>{ye=We?N(ye,We):null,W(),W=ne});try{for(;;){const We=me.destroyed?null:me.read();if(We!==null)yield We;else{if(ye)throw ye;if(ye===null)return;await new l(X)}}}catch(We){throw ye=N(ye,We),ye}finally{(ye||(Y==null?void 0:Y.destroyOnReturn)!==!1)&&(ye===void 0||me._readableState.autoDestroy)?E.destroyer(me,null):(me.off("readable",X),Pe())}}s(ke.prototype,{readable:{__proto__:null,get(){const me=this._readableState;return!!me&&me.readable!==!1&&!me.destroyed&&!me.errorEmitted&&!me.endEmitted},set(me){this._readableState&&(this._readableState.readable=!!me)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(me){this._readableState&&(this._readableState.destroyed=me)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(Be.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[U]!==!1},set(me){this[U]=!!me}}}),ke._fromList=Ve;function Ve(me,Y){if(Y.length===0)return null;let W;return Y.objectMode?W=Y.buffer.shift():!me||me>=Y.length?(Y.decoder?W=Y.buffer.join(""):Y.buffer.length===1?W=Y.buffer.first():W=Y.buffer.concat(Y.length),Y.buffer.clear()):W=Y.buffer.consume(me,Y.decoder),W}function it(me){const Y=me._readableState;S("endReadable",Y.endEmitted),Y.endEmitted||(Y.ended=!0,e.nextTick(be,Y,me))}function be(me,Y){if(S("endReadableNT",me.endEmitted,me.length),!me.errored&&!me.closeEmitted&&!me.endEmitted&&me.length===0){if(me.endEmitted=!0,Y.emit("end"),Y.writable&&Y.allowHalfOpen===!1)e.nextTick(_e,Y);else if(me.autoDestroy){const W=Y._writableState;(!W||W.autoDestroy&&(W.finished||W.writable===!1))&&Y.destroy()}}}function _e(me){me.writable&&!me.writableEnded&&!me.destroyed&&me.end()}ke.from=function(me,Y){return $(ke,me,Y)};let ze;function Rt(){return ze===void 0&&(ze={}),ze}return ke.fromWeb=function(me,Y){return Rt().newStreamReadableFromReadableStream(me,Y)},ke.toWeb=function(me,Y){return Rt().newReadableStreamFromStreamReadable(me,Y)},ke.wrap=function(me,Y){var W,X;return new ke({objectMode:(W=(X=me.readableObjectMode)!==null&&X!==void 0?X:me.objectMode)!==null&&W!==void 0?W:!0,...Y,destroy(ye,Pe){E.destroyer(me,ye),Pe(ye)}}).wrap(me)},VI}var HI,F$;function uO(){if(F$)return HI;F$=1;const e=dm(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:c}=Gi();HI=J,J.WritableState=V;const{EventEmitter:u}=dE(),d=lO().Stream,{Buffer:h}=bh(),m=ay(),{addAbortSignal:y}=fE(),{getHighWaterMark:b,getDefaultHighWaterMark:v}=hE(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:S,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:M}=eo().codes,{errorOrDestroy:P}=m;a(J.prototype,d.prototype),a(J,d);function L(){}const O=l("kOnFinished");function V(Re,K,ge){typeof ge!="boolean"&&(ge=K instanceof wd()),this.objectMode=!!(Re&&Re.objectMode),ge&&(this.objectMode=this.objectMode||!!(Re&&Re.writableObjectMode)),this.highWaterMark=Re?b(this,Re,"writableHighWaterMark",ge):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ae=!!(Re&&Re.decodeStrings===!1);this.decodeStrings=!Ae,this.defaultEncoding=Re&&Re.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=H.bind(void 0,K),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,F(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Re||Re.emitClose!==!1,this.autoDestroy=!Re||Re.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[O]=[]}function F(Re){Re.buffered=[],Re.bufferedIndex=0,Re.allBuffers=!0,Re.allNoop=!0}V.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function J(Re){const K=this instanceof wd();if(!K&&!r(J,this))return new J(Re);this._writableState=new V(Re,this,K),Re&&(typeof Re.write=="function"&&(this._write=Re.write),typeof Re.writev=="function"&&(this._writev=Re.writev),typeof Re.destroy=="function"&&(this._destroy=Re.destroy),typeof Re.final=="function"&&(this._final=Re.final),typeof Re.construct=="function"&&(this._construct=Re.construct),Re.signal&&y(Re.signal,this)),d.call(this,Re),m.construct(this,()=>{const ge=this._writableState;ge.writing||he(this,ge),Ne(this,ge)})}i(J,c,{__proto__:null,value:function(Re){return r(this,Re)?!0:this!==J?!1:Re&&Re._writableState instanceof V}}),J.prototype.pipe=function(){P(this,new C)};function U(Re,K,ge,Ae){const le=Re._writableState;if(typeof ge=="function")Ae=ge,ge=le.defaultEncoding;else{if(!ge)ge=le.defaultEncoding;else if(ge!=="buffer"&&!h.isEncoding(ge))throw new M(ge);typeof Ae!="function"&&(Ae=L)}if(K===null)throw new R;if(!le.objectMode)if(typeof K=="string")le.decodeStrings!==!1&&(K=h.from(K,ge),ge="buffer");else if(K instanceof h)ge="buffer";else if(d._isUint8Array(K))K=d._uint8ArrayToBuffer(K),ge="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],K);let oe;return le.ending?oe=new N:le.destroyed&&(oe=new E("write")),oe?(e.nextTick(Ae,oe),P(Re,oe,!0),oe):(le.pendingcb++,G(Re,le,K,ge,Ae))}J.prototype.write=function(Re,K,ge){return U(this,Re,K,ge)===!0},J.prototype.cork=function(){this._writableState.corked++},J.prototype.uncork=function(){const Re=this._writableState;Re.corked&&(Re.corked--,Re.writing||he(this,Re))},J.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=o(K)),!h.isEncoding(K))throw new M(K);return this._writableState.defaultEncoding=K,this};function G(Re,K,ge,Ae,le){const oe=K.objectMode?1:ge.length;K.length+=oe;const ie=K.length<K.highWaterMark;return ie||(K.needDrain=!0),K.writing||K.corked||K.errored||!K.constructed?(K.buffered.push({chunk:ge,encoding:Ae,callback:le}),K.allBuffers&&Ae!=="buffer"&&(K.allBuffers=!1),K.allNoop&&le!==L&&(K.allNoop=!1)):(K.writelen=oe,K.writecb=le,K.writing=!0,K.sync=!0,Re._write(ge,Ae,K.onwrite),K.sync=!1),ie&&!K.errored&&!K.destroyed}function $(Re,K,ge,Ae,le,oe,ie){K.writelen=Ae,K.writecb=ie,K.writing=!0,K.sync=!0,K.destroyed?K.onwrite(new E("write")):ge?Re._writev(le,K.onwrite):Re._write(le,oe,K.onwrite),K.sync=!1}function ne(Re,K,ge,Ae){--K.pendingcb,Ae(ge),se(K),P(Re,ge)}function H(Re,K){const ge=Re._writableState,Ae=ge.sync,le=ge.writecb;if(typeof le!="function"){P(Re,new S);return}ge.writing=!1,ge.writecb=null,ge.length-=ge.writelen,ge.writelen=0,K?(K.stack,ge.errored||(ge.errored=K),Re._readableState&&!Re._readableState.errored&&(Re._readableState.errored=K),Ae?e.nextTick(ne,Re,ge,K,le):ne(Re,ge,K,le)):(ge.buffered.length>ge.bufferedIndex&&he(Re,ge),Ae?ge.afterWriteTickInfo!==null&&ge.afterWriteTickInfo.cb===le?ge.afterWriteTickInfo.count++:(ge.afterWriteTickInfo={count:1,cb:le,stream:Re,state:ge},e.nextTick(te,ge.afterWriteTickInfo)):ee(Re,ge,1,le))}function te({stream:Re,state:K,count:ge,cb:Ae}){return K.afterWriteTickInfo=null,ee(Re,K,ge,Ae)}function ee(Re,K,ge,Ae){for(!K.ending&&!Re.destroyed&&K.length===0&&K.needDrain&&(K.needDrain=!1,Re.emit("drain"));ge-- >0;)K.pendingcb--,Ae();K.destroyed&&se(K),Ne(Re,K)}function se(Re){if(Re.writing)return;for(let le=Re.bufferedIndex;le<Re.buffered.length;++le){var K;const{chunk:oe,callback:ie}=Re.buffered[le],Ee=Re.objectMode?1:oe.length;Re.length-=Ee,ie((K=Re.errored)!==null&&K!==void 0?K:new E("write"))}const ge=Re[O].splice(0);for(let le=0;le<ge.length;le++){var Ae;ge[le]((Ae=Re.errored)!==null&&Ae!==void 0?Ae:new E("end"))}F(Re)}function he(Re,K){if(K.corked||K.bufferProcessing||K.destroyed||!K.constructed)return;const{buffered:ge,bufferedIndex:Ae,objectMode:le}=K,oe=ge.length-Ae;if(!oe)return;let ie=Ae;if(K.bufferProcessing=!0,oe>1&&Re._writev){K.pendingcb-=oe-1;const Ee=K.allNoop?L:ke=>{for(let ct=ie;ct<ge.length;++ct)ge[ct].callback(ke)},Be=K.allNoop&&ie===0?ge:t(ge,ie);Be.allBuffers=K.allBuffers,$(Re,K,!0,K.length,Be,"",Ee),F(K)}else{do{const{chunk:Ee,encoding:Be,callback:ke}=ge[ie];ge[ie++]=null;const ct=le?1:Ee.length;$(Re,K,!1,ct,Ee,Be,ke)}while(ie<ge.length&&!K.writing);ie===ge.length?F(K):ie>256?(ge.splice(0,ie),K.bufferedIndex=0):K.bufferedIndex=ie}K.bufferProcessing=!1}J.prototype._write=function(Re,K,ge){if(this._writev)this._writev([{chunk:Re,encoding:K}],ge);else throw new _("_write()")},J.prototype._writev=null,J.prototype.end=function(Re,K,ge){const Ae=this._writableState;typeof Re=="function"?(ge=Re,Re=null,K=null):typeof K=="function"&&(ge=K,K=null);let le;if(Re!=null){const oe=U(this,Re,K);oe instanceof n&&(le=oe)}return Ae.corked&&(Ae.corked=1,this.uncork()),le||(!Ae.errored&&!Ae.ending?(Ae.ending=!0,Ne(this,Ae,!0),Ae.ended=!0):Ae.finished?le=new A("end"):Ae.destroyed&&(le=new E("end"))),typeof ge=="function"&&(le||Ae.finished?e.nextTick(ge,le):Ae[O].push(ge)),this};function ce(Re){return Re.ending&&!Re.destroyed&&Re.constructed&&Re.length===0&&!Re.errored&&Re.buffered.length===0&&!Re.finished&&!Re.writing&&!Re.errorEmitted&&!Re.closeEmitted}function Me(Re,K){let ge=!1;function Ae(le){if(ge){P(Re,le??S());return}if(ge=!0,K.pendingcb--,le){const oe=K[O].splice(0);for(let ie=0;ie<oe.length;ie++)oe[ie](le);P(Re,le,K.sync)}else ce(K)&&(K.prefinished=!0,Re.emit("prefinish"),K.pendingcb++,e.nextTick(Ce,Re,K))}K.sync=!0,K.pendingcb++;try{Re._final(Ae)}catch(le){Ae(le)}K.sync=!1}function je(Re,K){!K.prefinished&&!K.finalCalled&&(typeof Re._final=="function"&&!K.destroyed?(K.finalCalled=!0,Me(Re,K)):(K.prefinished=!0,Re.emit("prefinish")))}function Ne(Re,K,ge){ce(K)&&(je(Re,K),K.pendingcb===0&&(ge?(K.pendingcb++,e.nextTick((Ae,le)=>{ce(le)?Ce(Ae,le):le.pendingcb--},Re,K)):ce(K)&&(K.pendingcb++,Ce(Re,K))))}function Ce(Re,K){K.pendingcb--,K.finished=!0;const ge=K[O].splice(0);for(let Ae=0;Ae<ge.length;Ae++)ge[Ae]();if(Re.emit("finish"),K.autoDestroy){const Ae=Re._readableState;(!Ae||Ae.autoDestroy&&(Ae.endEmitted||Ae.readable===!1))&&Re.destroy()}}s(J.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Re){this._writableState&&(this._writableState.destroyed=Re)}},writable:{__proto__:null,get(){const Re=this._writableState;return!!Re&&Re.writable!==!1&&!Re.destroyed&&!Re.errored&&!Re.ending&&!Re.ended},set(Re){this._writableState&&(this._writableState.writable=!!Re)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Re=this._writableState;return Re?!Re.destroyed&&!Re.ending&&Re.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Ue=m.destroy;J.prototype.destroy=function(Re,K){const ge=this._writableState;return!ge.destroyed&&(ge.bufferedIndex<ge.buffered.length||ge[O].length)&&e.nextTick(se,ge),Ue.call(this,Re,K),this},J.prototype._undestroy=m.undestroy,J.prototype._destroy=function(Re,K){K(Re)},J.prototype[u.captureRejectionSymbol]=function(Re){this.destroy(Re)};let et;function qe(){return et===void 0&&(et={}),et}return J.fromWeb=function(Re,K){return qe().newStreamWritableFromWritableStream(Re,K)},J.toWeb=function(Re){return qe().newWritableStreamFromStreamWritable(Re)},HI}var WI,L$;function N_e(){if(L$)return WI;L$=1;const e=dm(),t=bh(),{isReadable:n,isWritable:r,isIterable:i,isNodeStream:s,isReadableNodeStream:a,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:c,isWritableStream:u}=Md(),d=vh(),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:y}}=eo(),{destroyer:b}=ay(),v=wd(),x=pE(),_=uO(),{createDeferredPromise:S}=vo(),C=KK(),E=globalThis.Blob||t.Blob,A=typeof E<"u"?function(V){return V instanceof E}:function(V){return!1},R=globalThis.AbortController||bx().AbortController,{FunctionPrototypeCall:N}=Gi();class M extends v{constructor(V){super(V),(V==null?void 0:V.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(V==null?void 0:V.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}WI=function O(V,F){if(l(V))return V;if(a(V))return L({readable:V});if(o(V))return L({writable:V});if(s(V))return L({writable:!1,readable:!1});if(c(V))return L({readable:x.fromWeb(V)});if(u(V))return L({writable:_.fromWeb(V)});if(typeof V=="function"){const{value:U,write:G,final:$,destroy:ne}=P(V);if(i(U))return C(M,U,{objectMode:!0,write:G,final:$,destroy:ne});const H=U==null?void 0:U.then;if(typeof H=="function"){let te;const ee=N(H,U,se=>{if(se!=null)throw new y("nully","body",se)},se=>{b(te,se)});return te=new M({objectMode:!0,readable:!1,write:G,final(se){$(async()=>{try{await ee,e.nextTick(se,null)}catch(he){e.nextTick(se,he)}})},destroy:ne})}throw new y("Iterable, AsyncIterable or AsyncFunction",F,U)}if(A(V))return O(V.arrayBuffer());if(i(V))return C(M,V,{objectMode:!0,writable:!1});if(c(V==null?void 0:V.readable)&&u(V==null?void 0:V.writable))return M.fromWeb(V);if(typeof(V==null?void 0:V.writable)=="object"||typeof(V==null?void 0:V.readable)=="object"){const U=V!=null&&V.readable?a(V==null?void 0:V.readable)?V==null?void 0:V.readable:O(V.readable):void 0,G=V!=null&&V.writable?o(V==null?void 0:V.writable)?V==null?void 0:V.writable:O(V.writable):void 0;return L({readable:U,writable:G})}const J=V==null?void 0:V.then;if(typeof J=="function"){let U;return N(J,V,G=>{G!=null&&U.push(G),U.push(null)},G=>{b(U,G)}),U=new M({objectMode:!0,writable:!1,read(){}})}throw new m(F,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],V)};function P(O){let{promise:V,resolve:F}=S();const J=new R,U=J.signal;return{value:O(async function*(){for(;;){const $=V;V=null;const{chunk:ne,done:H,cb:te}=await $;if(e.nextTick(te),H)return;if(U.aborted)throw new h(void 0,{cause:U.reason});({promise:V,resolve:F}=S()),yield ne}}(),{signal:U}),write($,ne,H){const te=F;F=null,te({chunk:$,done:!1,cb:H})},final($){const ne=F;F=null,ne({done:!0,cb:$})},destroy($,ne){J.abort(),ne($)}}}function L(O){const V=O.readable&&typeof O.readable.read!="function"?x.wrap(O.readable):O.readable,F=O.writable;let J=!!n(V),U=!!r(F),G,$,ne,H,te;function ee(se){const he=H;H=null,he?he(se):se&&te.destroy(se)}return te=new M({readableObjectMode:!!(V!=null&&V.readableObjectMode),writableObjectMode:!!(F!=null&&F.writableObjectMode),readable:J,writable:U}),U&&(d(F,se=>{U=!1,se&&b(V,se),ee(se)}),te._write=function(se,he,ce){F.write(se,he)?ce():G=ce},te._final=function(se){F.end(),$=se},F.on("drain",function(){if(G){const se=G;G=null,se()}}),F.on("finish",function(){if($){const se=$;$=null,se()}})),J&&(d(V,se=>{J=!1,se&&b(V,se),ee(se)}),V.on("readable",function(){if(ne){const se=ne;ne=null,se()}}),V.on("end",function(){te.push(null)}),te._read=function(){for(;;){const se=V.read();if(se===null){ne=te._read;return}if(!te.push(se))return}}),te._destroy=function(se,he){!se&&H!==null&&(se=new h),ne=null,G=null,$=null,H===null?he(se):(H=he,b(F,se),b(V,se))},te}return WI}var GI,B$;function wd(){if(B$)return GI;B$=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Gi();GI=a;const i=pE(),s=uO();r(a.prototype,i.prototype),r(a,i);{const u=n(s.prototype);for(let d=0;d<u.length;d++){const h=u[d];a.prototype[h]||(a.prototype[h]=s.prototype[h])}}function a(u){if(!(this instanceof a))return new a(u);i.call(this,u),s.call(this,u),u?(this.allowHalfOpen=u.allowHalfOpen!==!1,u.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),u.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(a.prototype,{writable:{__proto__:null,...t(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(s.prototype,"writableLength")},writableFinished:{__proto__:null,...t(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(u){this._readableState&&this._writableState&&(this._readableState.destroyed=u,this._writableState.destroyed=u)}}});let o;function l(){return o===void 0&&(o={}),o}a.fromWeb=function(u,d){return l().newStreamDuplexFromReadableWritablePair(u,d)},a.toWeb=function(u){return l().newReadableWritablePairFromDuplex(u)};let c;return a.from=function(u){return c||(c=N_e()),c(u,"body")},GI}var KI,$$;function YK(){if($$)return KI;$$=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Gi();KI=a;const{ERR_METHOD_NOT_IMPLEMENTED:n}=eo().codes,r=wd(),{getHighWaterMark:i}=hE();e(a.prototype,r.prototype),e(a,r);const s=t("kCallback");function a(c){if(!(this instanceof a))return new a(c);const u=c?i(this,c,"readableHighWaterMark",!0):null;u===0&&(c={...c,highWaterMark:null,readableHighWaterMark:u,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[s]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",l)}function o(c){typeof this._flush=="function"&&!this.destroyed?this._flush((u,d)=>{if(u){c?c(u):this.destroy(u);return}d!=null&&this.push(d),this.push(null),c&&c()}):(this.push(null),c&&c())}function l(){this._final!==o&&o.call(this)}return a.prototype._final=o,a.prototype._transform=function(c,u,d){throw new n("_transform()")},a.prototype._write=function(c,u,d){const h=this._readableState,m=this._writableState,y=h.length;this._transform(c,u,(b,v)=>{if(b){d(b);return}v!=null&&this.push(v),m.ended||y===h.length||h.length<h.highWaterMark?d():this[s]=d})},a.prototype._read=function(){if(this[s]){const c=this[s];this[s]=null,c()}},KI}var YI,z$;function ZK(){if(z$)return YI;z$=1;const{ObjectSetPrototypeOf:e}=Gi();YI=n;const t=YK();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,i,s){s(null,r)},YI}var ZI,U$;function dO(){if(U$)return ZI;U$=1;const e=dm(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:i}=Gi(),s=vh(),{once:a}=vo(),o=ay(),l=wd(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:b}=eo(),{validateFunction:v,validateAbortSignal:x}=Iw(),{isIterable:_,isReadable:S,isReadableNodeStream:C,isNodeStream:E,isTransformStream:A,isWebStream:R,isReadableStream:N,isReadableFinished:M}=Md(),P=globalThis.AbortController||bx().AbortController;let L,O,V;function F(se,he,ce){let Me=!1;se.on("close",()=>{Me=!0});const je=s(se,{readable:he,writable:ce},Ne=>{Me=!Ne});return{destroy:Ne=>{Me||(Me=!0,o.destroyer(se,Ne||new m("pipe")))},cleanup:je}}function J(se){return v(se[se.length-1],"streams[stream.length - 1]"),se.pop()}function U(se){if(_(se))return se;if(C(se))return G(se);throw new u("val",["Readable","Iterable","AsyncIterable"],se)}async function*G(se){O||(O=pE()),yield*O.prototype[r].call(se)}async function $(se,he,ce,{end:Me}){let je,Ne=null;const Ce=qe=>{if(qe&&(je=qe),Ne){const Re=Ne;Ne=null,Re()}},Ue=()=>new n((qe,Re)=>{je?Re(je):Ne=()=>{je?Re(je):qe()}});he.on("drain",Ce);const et=s(he,{readable:!1},Ce);try{he.writableNeedDrain&&await Ue();for await(const qe of se)he.write(qe)||await Ue();Me&&(he.end(),await Ue()),ce()}catch(qe){ce(je!==qe?c(je,qe):qe)}finally{et(),he.off("drain",Ce)}}async function ne(se,he,ce,{end:Me}){A(he)&&(he=he.writable);const je=he.getWriter();try{for await(const Ne of se)await je.ready,je.write(Ne).catch(()=>{});await je.ready,Me&&await je.close(),ce()}catch(Ne){try{await je.abort(Ne),ce(Ne)}catch(Ce){ce(Ce)}}}function H(...se){return te(se,a(J(se)))}function te(se,he,ce){if(se.length===1&&t(se[0])&&(se=se[0]),se.length<2)throw new h("streams");const Me=new P,je=Me.signal,Ne=ce==null?void 0:ce.signal,Ce=[];x(Ne,"options.signal");function Ue(){le(new b)}V=V||vo().addAbortListener;let et;Ne&&(et=V(Ne,Ue));let qe,Re;const K=[];let ge=0;function Ae(Be){le(Be,--ge===0)}function le(Be,ke){var ct;if(Be&&(!qe||qe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(qe=Be),!(!qe&&!ke)){for(;K.length;)K.shift()(qe);(ct=et)===null||ct===void 0||ct[i](),Me.abort(),ke&&(qe||Ce.forEach(It=>It()),e.nextTick(he,qe,Re))}}let oe;for(let Be=0;Be<se.length;Be++){const ke=se[Be],ct=Be<se.length-1,It=Be>0,ht=ct||(ce==null?void 0:ce.end)!==!1,Ot=Be===se.length-1;if(E(ke)){let zt=function(Bt){Bt&&Bt.name!=="AbortError"&&Bt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ae(Bt)};if(ht){const{destroy:Bt,cleanup:rn}=F(ke,ct,It);K.push(Bt),S(ke)&&Ot&&Ce.push(rn)}ke.on("error",zt),S(ke)&&Ot&&Ce.push(()=>{ke.removeListener("error",zt)})}if(Be===0)if(typeof ke=="function"){if(oe=ke({signal:je}),!_(oe))throw new d("Iterable, AsyncIterable or Stream","source",oe)}else _(ke)||C(ke)||A(ke)?oe=ke:oe=l.from(ke);else if(typeof ke=="function"){if(A(oe)){var ie;oe=U((ie=oe)===null||ie===void 0?void 0:ie.readable)}else oe=U(oe);if(oe=ke(oe,{signal:je}),ct){if(!_(oe,!0))throw new d("AsyncIterable",`transform[${Be-1}]`,oe)}else{var Ee;L||(L=ZK());const zt=new L({objectMode:!0}),Bt=(Ee=oe)===null||Ee===void 0?void 0:Ee.then;if(typeof Bt=="function")ge++,Bt.call(oe,D=>{Re=D,D!=null&&zt.write(D),ht&&zt.end(),e.nextTick(Ae)},D=>{zt.destroy(D),e.nextTick(Ae,D)});else if(_(oe,!0))ge++,$(oe,zt,Ae,{end:ht});else if(N(oe)||A(oe)){const D=oe.readable||oe;ge++,$(D,zt,Ae,{end:ht})}else throw new d("AsyncIterable or Promise","destination",oe);oe=zt;const{destroy:rn,cleanup:ve}=F(oe,!1,!0);K.push(rn),Ot&&Ce.push(ve)}}else if(E(ke)){if(C(oe)){ge+=2;const zt=ee(oe,ke,Ae,{end:ht});S(ke)&&Ot&&Ce.push(zt)}else if(A(oe)||N(oe)){const zt=oe.readable||oe;ge++,$(zt,ke,Ae,{end:ht})}else if(_(oe))ge++,$(oe,ke,Ae,{end:ht});else throw new u("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=ke}else if(R(ke)){if(C(oe))ge++,ne(U(oe),ke,Ae,{end:ht});else if(N(oe)||_(oe))ge++,ne(oe,ke,Ae,{end:ht});else if(A(oe))ge++,ne(oe.readable,ke,Ae,{end:ht});else throw new u("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=ke}else oe=l.from(ke)}return(je!=null&&je.aborted||Ne!=null&&Ne.aborted)&&e.nextTick(Ue),oe}function ee(se,he,ce,{end:Me}){let je=!1;if(he.on("close",()=>{je||ce(new y)}),se.pipe(he,{end:!1}),Me){let Ne=function(){je=!0,he.end()};M(se)?e.nextTick(Ne):se.once("end",Ne)}else ce();return s(se,{readable:!0,writable:!1},Ne=>{const Ce=se._readableState;Ne&&Ne.code==="ERR_STREAM_PREMATURE_CLOSE"&&Ce&&Ce.ended&&!Ce.errored&&!Ce.errorEmitted?se.once("end",ce).once("error",ce):ce(Ne)}),s(he,{readable:!1,writable:!0},ce)}return ZI={pipelineImpl:te,pipeline:H},ZI}var XI,q$;function XK(){if(q$)return XI;q$=1;const{pipeline:e}=dO(),t=wd(),{destroyer:n}=ay(),{isNodeStream:r,isReadable:i,isWritable:s,isWebStream:a,isTransformStream:o,isWritableStream:l,isReadableStream:c}=Md(),{AbortError:u,codes:{ERR_INVALID_ARG_VALUE:d,ERR_MISSING_ARGS:h}}=eo(),m=vh();return XI=function(...b){if(b.length===0)throw new h("streams");if(b.length===1)return t.from(b[0]);const v=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const L=b.length-1;b[L]=t.from(b[L])}for(let L=0;L<b.length;++L)if(!(!r(b[L])&&!a(b[L]))){if(L<b.length-1&&!(i(b[L])||c(b[L])||o(b[L])))throw new d(`streams[${L}]`,v[L],"must be readable");if(L>0&&!(s(b[L])||l(b[L])||o(b[L])))throw new d(`streams[${L}]`,v[L],"must be writable")}let x,_,S,C,E;function A(L){const O=C;C=null,O?O(L):L?E.destroy(L):!P&&!M&&E.destroy()}const R=b[0],N=e(b,A),M=!!(s(R)||l(R)||o(R)),P=!!(i(N)||c(N)||o(N));if(E=new t({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:M,readable:P}),M){if(r(R))E._write=function(O,V,F){R.write(O,V)?F():x=F},E._final=function(O){R.end(),_=O},R.on("drain",function(){if(x){const O=x;x=null,O()}});else if(a(R)){const V=(o(R)?R.writable:R).getWriter();E._write=async function(F,J,U){try{await V.ready,V.write(F).catch(()=>{}),U()}catch(G){U(G)}},E._final=async function(F){try{await V.ready,V.close().catch(()=>{}),_=F}catch(J){F(J)}}}const L=o(N)?N.readable:N;m(L,()=>{if(_){const O=_;_=null,O()}})}if(P){if(r(N))N.on("readable",function(){if(S){const L=S;S=null,L()}}),N.on("end",function(){E.push(null)}),E._read=function(){for(;;){const L=N.read();if(L===null){S=E._read;return}if(!E.push(L))return}};else if(a(N)){const O=(o(N)?N.readable:N).getReader();E._read=async function(){for(;;)try{const{value:V,done:F}=await O.read();if(!E.push(V))return;if(F){E.push(null);return}}catch{return}}}}return E._destroy=function(L,O){!L&&C!==null&&(L=new u),S=null,x=null,_=null,C===null?O(L):(C=O,r(N)&&n(N,L))},E},XI}var V$;function M_e(){if(V$)return Y_;V$=1;const e=globalThis.AbortController||bx().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:i},AbortError:s}=eo(),{validateAbortSignal:a,validateInteger:o,validateObject:l}=Iw(),c=Gi().Symbol("kWeak"),u=Gi().Symbol("kResistStopPropagation"),{finished:d}=vh(),h=XK(),{addAbortSignalNoValidate:m}=fE(),{isWritable:y,isNodeStream:b}=Md(),{deprecate:v}=vo(),{ArrayPrototypePush:x,Boolean:_,MathFloor:S,Number:C,NumberIsNaN:E,Promise:A,PromiseReject:R,PromiseResolve:N,PromisePrototypeThen:M,Symbol:P}=Gi(),L=P("kEmpty"),O=P("kEof");function V(Ne,Ce){if(Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&a(Ce.signal,"options.signal"),b(Ne)&&!y(Ne))throw new t("stream",Ne,"must be writable");const Ue=h(this,Ne);return Ce!=null&&Ce.signal&&m(Ce.signal,Ue),Ue}function F(Ne,Ce){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&a(Ce.signal,"options.signal");let Ue=1;(Ce==null?void 0:Ce.concurrency)!=null&&(Ue=S(Ce.concurrency));let et=Ue-1;return(Ce==null?void 0:Ce.highWaterMark)!=null&&(et=S(Ce.highWaterMark)),o(Ue,"options.concurrency",1),o(et,"options.highWaterMark",0),et+=Ue,(async function*(){const Re=vo().AbortSignalAny([Ce==null?void 0:Ce.signal].filter(_)),K=this,ge=[],Ae={signal:Re};let le,oe,ie=!1,Ee=0;function Be(){ie=!0,ke()}function ke(){Ee-=1,ct()}function ct(){oe&&!ie&&Ee<Ue&&ge.length<et&&(oe(),oe=null)}async function It(){try{for await(let ht of K){if(ie)return;if(Re.aborted)throw new s;try{if(ht=Ne(ht,Ae),ht===L)continue;ht=N(ht)}catch(Ot){ht=R(Ot)}Ee+=1,M(ht,ke,Be),ge.push(ht),le&&(le(),le=null),!ie&&(ge.length>=et||Ee>=Ue)&&await new A(Ot=>{oe=Ot})}ge.push(O)}catch(ht){const Ot=R(ht);M(Ot,ke,Be),ge.push(Ot)}finally{ie=!0,le&&(le(),le=null)}}It();try{for(;;){for(;ge.length>0;){const ht=await ge[0];if(ht===O)return;if(Re.aborted)throw new s;ht!==L&&(yield ht),ge.shift(),ct()}await new A(ht=>{le=ht})}}finally{ie=!0,oe&&(oe(),oe=null)}}).call(this)}function J(Ne=void 0){return Ne!=null&&l(Ne,"options"),(Ne==null?void 0:Ne.signal)!=null&&a(Ne.signal,"options.signal"),(async function*(){let Ue=0;for await(const qe of this){var et;if(Ne!=null&&(et=Ne.signal)!==null&&et!==void 0&&et.aborted)throw new s({cause:Ne.signal.reason});yield[Ue++,qe]}}).call(this)}async function U(Ne,Ce=void 0){for await(const Ue of H.call(this,Ne,Ce))return!0;return!1}async function G(Ne,Ce=void 0){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);return!await U.call(this,async(...Ue)=>!await Ne(...Ue),Ce)}async function $(Ne,Ce){for await(const Ue of H.call(this,Ne,Ce))return Ue}async function ne(Ne,Ce){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);async function Ue(et,qe){return await Ne(et,qe),L}for await(const et of F.call(this,Ue,Ce));}function H(Ne,Ce){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);async function Ue(et,qe){return await Ne(et,qe)?et:L}return F.call(this,Ue,Ce)}class te extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function ee(Ne,Ce,Ue){var et;if(typeof Ne!="function")throw new n("reducer",["Function","AsyncFunction"],Ne);Ue!=null&&l(Ue,"options"),(Ue==null?void 0:Ue.signal)!=null&&a(Ue.signal,"options.signal");let qe=arguments.length>1;if(Ue!=null&&(et=Ue.signal)!==null&&et!==void 0&&et.aborted){const le=new s(void 0,{cause:Ue.signal.reason});throw this.once("error",()=>{}),await d(this.destroy(le)),le}const Re=new e,K=Re.signal;if(Ue!=null&&Ue.signal){const le={once:!0,[c]:this,[u]:!0};Ue.signal.addEventListener("abort",()=>Re.abort(),le)}let ge=!1;try{for await(const le of this){var Ae;if(ge=!0,Ue!=null&&(Ae=Ue.signal)!==null&&Ae!==void 0&&Ae.aborted)throw new s;qe?Ce=await Ne(Ce,le,{signal:K}):(Ce=le,qe=!0)}if(!ge&&!qe)throw new te}finally{Re.abort()}return Ce}async function se(Ne){Ne!=null&&l(Ne,"options"),(Ne==null?void 0:Ne.signal)!=null&&a(Ne.signal,"options.signal");const Ce=[];for await(const et of this){var Ue;if(Ne!=null&&(Ue=Ne.signal)!==null&&Ue!==void 0&&Ue.aborted)throw new s(void 0,{cause:Ne.signal.reason});x(Ce,et)}return Ce}function he(Ne,Ce){const Ue=F.call(this,Ne,Ce);return(async function*(){for await(const qe of Ue)yield*qe}).call(this)}function ce(Ne){if(Ne=C(Ne),E(Ne))return 0;if(Ne<0)throw new i("number",">= 0",Ne);return Ne}function Me(Ne,Ce=void 0){return Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&a(Ce.signal,"options.signal"),Ne=ce(Ne),(async function*(){var et;if(Ce!=null&&(et=Ce.signal)!==null&&et!==void 0&&et.aborted)throw new s;for await(const Re of this){var qe;if(Ce!=null&&(qe=Ce.signal)!==null&&qe!==void 0&&qe.aborted)throw new s;Ne--<=0&&(yield Re)}}).call(this)}function je(Ne,Ce=void 0){return Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&a(Ce.signal,"options.signal"),Ne=ce(Ne),(async function*(){var et;if(Ce!=null&&(et=Ce.signal)!==null&&et!==void 0&&et.aborted)throw new s;for await(const Re of this){var qe;if(Ce!=null&&(qe=Ce.signal)!==null&&qe!==void 0&&qe.aborted)throw new s;if(Ne-- >0&&(yield Re),Ne<=0)return}}).call(this)}return Y_.streamReturningOperators={asIndexedPairs:v(J,"readable.asIndexedPairs will be removed in a future version."),drop:Me,filter:H,flatMap:he,map:F,take:je,compose:V},Y_.promiseReturningOperators={every:G,forEach:ne,reduce:ee,toArray:se,some:U,find:$},Y_}var JI,H$;function JK(){if(H$)return JI;H$=1;const{ArrayPrototypePop:e,Promise:t}=Gi(),{isIterable:n,isNodeStream:r,isWebStream:i}=Md(),{pipelineImpl:s}=dO(),{finished:a}=vh();QK();function o(...l){return new t((c,u)=>{let d,h;const m=l[l.length-1];if(m&&typeof m=="object"&&!r(m)&&!n(m)&&!i(m)){const y=e(l);d=y.signal,h=y.end}s(l,(y,b)=>{y?u(y):c(b)},{signal:d,end:h})})}return JI={finished:a,pipeline:o},JI}var W$;function QK(){if(W$)return AI.exports;W$=1;const{Buffer:e}=bh(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Gi(),{promisify:{custom:i}}=vo(),{streamReturningOperators:s,promiseReturningOperators:a}=M_e(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=eo(),l=XK(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:u}=hE(),{pipeline:d}=dO(),{destroyer:h}=ay(),m=vh(),y=JK(),b=Md(),v=AI.exports=lO().Stream;v.isDestroyed=b.isDestroyed,v.isDisturbed=b.isDisturbed,v.isErrored=b.isErrored,v.isReadable=b.isReadable,v.isWritable=b.isWritable,v.Readable=pE();for(const _ of n(s)){let C=function(...E){if(new.target)throw o();return v.Readable.from(r(S,this,E))};const S=s[_];t(C,"name",{__proto__:null,value:S.name}),t(C,"length",{__proto__:null,value:S.length}),t(v.Readable.prototype,_,{__proto__:null,value:C,enumerable:!1,configurable:!0,writable:!0})}for(const _ of n(a)){let C=function(...E){if(new.target)throw o();return r(S,this,E)};const S=a[_];t(C,"name",{__proto__:null,value:S.name}),t(C,"length",{__proto__:null,value:S.length}),t(v.Readable.prototype,_,{__proto__:null,value:C,enumerable:!1,configurable:!0,writable:!0})}v.Writable=uO(),v.Duplex=wd(),v.Transform=YK(),v.PassThrough=ZK(),v.pipeline=d;const{addAbortSignal:x}=fE();return v.addAbortSignal=x,v.finished=m,v.destroy=h,v.compose=l,v.setDefaultHighWaterMark=c,v.getDefaultHighWaterMark=u,t(v,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return y}}),t(d,i,{__proto__:null,enumerable:!0,get(){return y.pipeline}}),t(m,i,{__proto__:null,enumerable:!0,get(){return y.finished}}),v.Stream=v,v._isUint8Array=function(S){return S instanceof Uint8Array},v._uint8ArrayToBuffer=function(S){return e.from(S.buffer,S.byteOffset,S.byteLength)},AI.exports}var G$;function j_e(){return G$||(G$=1,function(e){const t=QK(),n=JK(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(TI)),TI.exports}var eY=j_e();class fO extends eY.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(i=>{this._path=i.path;const s=i.readableWebStream({start:t.start,end:t.end});this.reader=s.getReader(),this.pending=!1}).catch(i=>{this.destroy(i)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ke(mt.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ke(mt.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class hO extends eY.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const i=r.writableWebStream({start:t.start});this.writer=i.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(ka(new Ke(mt.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(ka(new Ke(mt.ENOTSUP,"Unsupported encoding for stream",this._path)));const i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(i),this._bytesWritten+=t.byteLength,r()}catch(s){r(new Ke(mt.EIO,s.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ke(mt.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ke(mt.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Pl=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Ol=function(e){return function(t){function n(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,i=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&i===1)return i=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(a).then(s,function(o){return n(o),s()})}else i|=1}catch(o){n(o)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Ra{get position(){return this.flag&Up?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=Ma(t,n);Object.assign(this,nm(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&lE||this.inode.flags&mo.Sync)}_emitChange(){pa(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ke.With("EBADF",this.path,"chown");this.dirty=!0,MK(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=gh(t,-1);if(n<0)throw new Ke(mt.EINVAL,"Invalid mode");if(this.closed)throw Ke.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>bi?-61441:bi)|n,(this._isSync||n>bi)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ke.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ke.With("EBADF",this.path,"truncate");if(t<0)throw new Ke(mt.EINVAL);if(this.dirty=!0,!(this.flag&Ca||this.flag&ud))throw new Ke(mt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ke.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=aC(t),this.inode.mtimeMs=aC(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=dd(n,"utf8","a",420);if(!(fd(r.flag)&Up))throw new Ke(mt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ke(mt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Ii.from(t,r.encoding):t;await this._write(s,0,s.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,i=this.position){if(this.closed)throw Ke.With("EBADF",this.path,"read");if(this.flag&Ca)throw new Ke(mt.EPERM,"File not opened with a readable mode");this.inode.flags&mo.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let s=i+r;!mx(this.inode)&&!px(this.inode)&&s>this.inode.size&&(s=i+Math.max(this.inode.size-i,0)),this._position=s;const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,a.subarray(n,n+r),i,s),this._isSync&&await this.sync(),{bytesRead:s-i,buffer:t}}async read(t,n,r,i){typeof n=="object"&&n!=null&&(i=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(i=t.position,r=t.length,n=t.offset,t=t.buffer);const s=Number.isSafeInteger(i)?i:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,s)}async readFile(t){const n=dd(t,null,"r",292);if(fd(n.flag)&Ca)throw new Ke(mt.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:i}=await this.stat(),{buffer:s}=await this._read(new Uint8Array(i),0,i,0),a=Ii.from(s);return n.encoding?a.toString(n.encoding):a}readableWebStream(t={}){if(this.closed)throw Ke.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ke.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&mo.Immutable)throw new Ke(mt.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Ca)throw Ke.With("EBADF",this.path,"readLines");return J1e({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ke.With("EBADF",this.path,"stat");if(!oi(this.context,this.inode,js))throw Ke.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new lm(this.inode):new Nd(this.inode)}async _write(t,n=0,r=t.byteLength-n,i=this.position){if(this.closed)throw Ke.With("EBADF",this.path,"write");if(this.inode.flags&mo.Immutable)throw new Ke(mt.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Ca||this.flag&ud))throw new Ke(mt.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const s=i+r,a=t.subarray(n,n+r);return!mx(this.inode)&&!px(this.inode)&&s>this.inode.size&&(this.inode.size=s),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=i+a.byteLength,await this.fs.write(this.internalPath,a,i),this._isSync&&await this.sync(),a.byteLength}async write(t,n,r,i){let s,a,o;typeof n=="object"&&n!=null&&(r=n.length,i=n.position,n=n.offset),typeof t=="string"?(i=typeof n=="number"?n:null,a=0,s=Ii.from(t,typeof r=="string"?r:"utf8"),o=s.length):(s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=n??0,o=typeof r=="number"?r:s.byteLength,i=typeof i=="number"?i:null),i??(i=this.position);const l=await this._write(s,a,o,i);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=dd(n,"utf8","w",420),i=fd(r.flag);if(!(i&Ca||i&ud))throw new Ke(mt.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ke(mt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Ii.from(t,r.encoding):t;await this._write(s,0,s.length,0),this._emitChange()}async close(){if(this.closed)throw Ke.With("EBADF",this.path,"close");await this.sync(),this.dispose(),OK(this.context,this.fd)}dispose(t){if(this.closed)throw Ke.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ke.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const i of t)r+=(await this.write(i)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const i of t)r+=(await this.read(i)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Ca)throw Ke.With("EBADF",this.path,"createReadStream");return new fO(t,this)}createWriteStream(t={}){if(this.closed)throw Ke.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&mo.Immutable)throw new Ke(mt.EPERM,"File is immutable",this.path,"createWriteStream");return new hO(t,this)}}async function tY(e,t){e=jn(e),t=jn(t);const n=Er(e,this),r=Er(t,this);if(!(await oy.call(this,Vr(e))).hasAccess(Qi,this))throw Ke.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),pa(this,"rename",e.toString()),pa(this,"change",t.toString());return}await bE.call(this,t,await yE(e)),await gE.call(this,e),pa(this,"rename",e.toString())}catch(i){throw li(i,{[n.path]:e,[r.path]:t})}}async function Nw(e){try{const{fs:t,path:n}=Er(await xh.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ke&&t.code=="ENOENT")return!1;throw t}}async function oy(e,t){e=jn(e);const{fs:n,path:r}=Er(await xh.call(this,e),this);try{const i=await n.stat(r);if(Ps&&!oi(this,i,js))throw Ke.With("EACCES",r,"stat");return t!=null&&t.bigint?new lm(i):new Nd(i)}catch(i){throw li(i,{[r]:e})}}async function mE(e,t){e=jn(e);const{fs:n,path:r}=Er(e,this);try{const i=await n.stat(r);if(Ps&&!oi(this,i,js))throw Ke.With("EACCES",r,"lstat");return t!=null&&t.bigint?new lm(i):new Nd(i)}catch(i){throw li(i,{[r]:e})}}async function nY(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Pl(n,await Dl.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ol(n);r&&await r}}async function gE(e){e=jn(e);const{fs:t,path:n}=Er(e,this);try{if(Ps&&!oi(this,await t.stat(n),Qi))throw Ke.With("EACCES",n,"unlink");await t.unlink(n),pa(this,"rename",e.toString())}catch(r){throw li(r,{[n]:e})}}async function ly(e,t,n){var r;t=jn(t);const i=gh(n.mode,420),s=fd(n.flag),{fullPath:a,fs:o,path:l,stats:c}=await uC(e,t.toString(),n.preserveSymlinks);if(!c){if(!(s&sE))throw Ke.With("ENOENT",a,"_open");const d=await o.stat(Vr(l));if(!oi(e,d,Qi))throw Ke.With("EACCES",Vr(a),"_open");if(!hc(d))throw Ke.With("ENOTDIR",Vr(a),"_open");const{euid:h,egid:m}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:gc.credentials,y=await o.createFile(l,{mode:i,uid:d.mode&Ew?d.uid:h,gid:d.mode&Tw?d.gid:m});return new Ra(e,lC(new oC(e,t,o,l,s,y)))}if(!oi(e,c,DK(s)))throw Ke.With("EACCES",a,"_open");if(s&aE)throw Ke.With("EEXIST",a,"_open");const u=new Ra(e,lC(new oC(e,t,o,l,s,c)));return s&oE&&await u.truncate(0),u}async function Dl(e,t="r",n=420){return await ly(this,e,{flag:t,mode:n})}async function yE(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=dd(t,null,"r",292);return await Pl(n,typeof e=="object"&&"fd"in e?e:await Dl.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ol(n);r&&await r}}async function bE(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const i=dd(n,"utf8","w+",420),s=Pl(r,e instanceof Ra?e:await Dl.call(this,e.toString(),i.flag,i.mode),!0),a=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof a!="string"&&!(a instanceof Uint8Array))throw new Ke(mt.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,s.path,"writeFile");await s.writeFile(a,i)}catch(i){r.error=i,r.hasError=!0}finally{const i=Ol(r);i&&await i}}async function rY(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const i=dd(n,"utf8","a",420);if(!(fd(i.flag)&Up))throw new Ke(mt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!i.encoding)throw new Ke(mt.EINVAL,"Encoding not specified");const a=typeof t=="string"?Ii.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Pl(r,typeof e=="object"&&"fd"in e?e:await Dl.call(this,e,i.flag,i.mode),!0).appendFile(a,i)}catch(i){r.error=i,r.hasError=!0}finally{const i=Ol(r);i&&await i}}async function pO(e){e=await xh.call(this,e);const{fs:t,path:n}=Er(e,this);try{const r=await t.stat(n);if(!r)throw Ke.With("ENOENT",e,"rmdir");if(!hc(r))throw Ke.With("ENOTDIR",n,"rmdir");if(Ps&&!oi(this,r,Qi))throw Ke.With("EACCES",n,"rmdir");await t.rmdir(n),pa(this,"rename",e.toString())}catch(r){throw li(r,{[n]:e})}}async function vE(e,t){var n,r;const{euid:i,egid:s}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:gc.credentials;t=typeof t=="object"?t:{mode:t};const a=gh(t==null?void 0:t.mode,511);e=await xh.call(this,e);const{fs:o,path:l,root:c}=Er(e,this),u={[l]:e},d=async(h,m)=>{if(!oi(this,m,Qi))throw Ke.With("EACCES",Vr(h),"mkdir");const y=await o.mkdir(h,{mode:a,uid:m.mode&Ew?m.uid:i,gid:m.mode&Tw?m.gid:s});return pa(this,"rename",h),y};try{if(!(t!=null&&t.recursive)){await d(l,await o.stat(Vr(l)));return}const h=[];for(let y=l,b=e;!await o.exists(y);y=Vr(y),b=Vr(b))h.unshift(y),u[y]=b;if(!h.length)return;const m=[await o.stat(Vr(h[0]))];for(const[y,b]of h.entries())m.push(await d(b,m[y]));return c.length==1?h[0]:(r=h[0])===null||r===void 0?void 0:r.slice(c.length)}catch(h){throw li(h,u)}}async function fm(e,t){t=typeof t=="object"?t:{encoding:t},e=await xh.call(this,e);const{fs:n,path:r}=Er(e,this),i=await n.stat(r).catch(l=>fi(li(l,{[r]:e})));if(!i)throw Ke.With("ENOENT",e,"readdir");if(!oi(this,i,js))throw Ke.With("EACCES",e,"readdir");if(!hc(i))throw Ke.With("ENOTDIR",e,"readdir");const s=await n.readdir(r).catch(l=>fi(li(l,{[r]:e}))),a=[],o=async l=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(ti(r,l)).catch(u=>{if(u.code!="ENOENT")throw li(u,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?a.push(new yx(l,c)):(t==null?void 0:t.encoding)=="buffer"?a.push(Ii.from(l)):a.push(l),!(!(t!=null&&t.recursive)||!hc(c))))for(const u of await fm.call(this,ti(e,l),t))u instanceof yx?(u.path=ti(l,u.path),a.push(u)):Ii.isBuffer(u)?a.push(Ii.from(ti(l,$P(u)))):a.push(ti(l,u))};return await Promise.all(s.map(o)),a}async function iY(e,t){e=jn(e),t=jn(t);const{fs:n,path:r}=Er(e,this),i=Er(t,this);if(n!=i.fs)throw Ke.With("EXDEV",t,"link");try{if(Ps&&!oi(this,await n.stat(Vr(r)),js))throw Ke.With("EACCES",Vr(r),"link");if(Ps&&!(await oy.call(this,Vr(t))).hasAccess(Qi,this))throw Ke.With("EACCES",Vr(t),"link");if(Ps&&!oi(this,await n.stat(r),js))throw Ke.With("EACCES",r,"link");return await n.link(r,i.path)}catch(s){throw li(s,{[i.path]:t,[r]:e})}}async function sY(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ke(mt.EINVAL,"Invalid symlink type: "+n);if(t=jn(t),await Nw.call(this,t))throw Ke.With("EEXIST",t,"symlink");const i=Pl(r,await ly(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await i.writeFile(jn(e,!0)),await i.chmod(Id)}catch(i){r.error=i,r.hasError=!0}finally{const i=Ol(r);i&&await i}}async function cC(e,t){const n={stack:[],error:void 0,hasError:!1};try{const i=await Pl(n,await ly(this,jn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),s=typeof t=="object"?t==null?void 0:t.encoding:t;return s=="buffer"?i:i.toString(s??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Ol(n);r&&await r}}async function aY(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Pl(r,await Dl.call(this,e,"r+"),!0).chown(t,n)}catch(i){r.error=i,r.hasError=!0}finally{const i=Ol(r);i&&await i}}async function oY(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Pl(r,await ly(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(i){r.error=i,r.hasError=!0}finally{const i=Ol(r);i&&await i}}async function lY(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Pl(n,await Dl.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ol(n);r&&await r}}async function cY(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Pl(n,await ly(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Ol(n);r&&await r}}async function mO(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Pl(r,await Dl.call(this,e,"r+"),!0).utimes(t,n)}catch(i){r.error=i,r.hasError=!0}finally{const i=Ol(r);i&&await i}}async function uY(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Pl(r,await ly(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(i){r.error=i,r.hasError=!0}finally{const i=Ol(r);i&&await i}}async function uC(e,t,n){if(n){const l=Er(t,e),c=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:c}}try{const l=Er(t,e),c=await l.fs.stat(l.path);if(!v0(c))return{...l,fullPath:t,stats:c};const u=xd.call(e,Vr(t),(await cC.call(e,t)).toString());return await uC(e,u)}catch{}const{base:r,dir:i}=Bc(t),s=i=="/"?"/":await xh.call(e,i),a=ti(s,r),o=Er(a,e);try{const l=await o.fs.stat(o.path);if(!v0(l))return{...o,fullPath:a,stats:l};const c=xd.call(e,s,(await cC.call(e,a)).toString());return await uC(e,c)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw li(l,{[o.path]:a})}}async function xh(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=jn(e);const{fullPath:i}=await uC(this,e);if(r=="utf8"||r=="utf-8")return i;const s=Ii.from(i,"utf-8");return r=="buffer"?s:s.toString(r)}function P_e(e,t={}){const n=new $K(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let i=!1;n.on("change",(a,o)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:a,filename:o},done:!1})});function s(){i=!0,n.close();for(const a of r)a({value:null,done:i});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(i)return Promise.resolve({value:null,done:i});const{promise:a,resolve:o}=Promise.withResolvers();return r.push(o),a},return:s,throw:s,async[Symbol.asyncDispose](){await s()},[Symbol.asyncIterator](){return this}}}async function dY(e,t=GP){if(!(await oy.call(this,e)).hasAccess(t,this))throw new Ke(mt.EACCES)}async function gO(e,t){e=jn(e);const n=await mE.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&bi){case ws:if(t!=null&&t.recursive)for(const r of await fm.call(this,e))await gO.call(this,ti(e,r),t);await pO.call(this,e);break;case sc:case Id:case sm:case am:await gE.call(this,e);break;case om:case im:default:throw new Ke(mt.EPERM,"File type not supported",e,"rm")}}async function fY(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",i="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await vE.call(this,i),n=="buffer"?Ii.from(i):i}async function yO(e,t,n){if(e=jn(e),t=jn(t),n&&n&KP&&await Nw.call(this,t))throw new Ke(mt.EEXIST,"Destination file already exists",t,"copyFile");await bE.call(this,t,await yE.call(this,e)),pa(this,"rename",t.toString())}function hY(e,t){return e=jn(e),Promise.resolve(new oO(e,this))}async function bO(e,t,n){e=jn(e),t=jn(t);const r=await mE.call(this,e);if(n!=null&&n.errorOnExist&&await Nw.call(this,t))throw new Ke(mt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&bi){case ws:{if(!(n!=null&&n.recursive))throw new Ke(mt.EISDIR,e+" is a directory (not copied)",e,"cp");const[i]=await Promise.all([fm.call(this,e,{withFileTypes:!0}),vE.call(this,t,{recursive:!0})]),s=async a=>{n.filter&&!n.filter(ti(e,a.name),ti(t,a.name))||await bO.call(this,ti(e,a.name),ti(t,a.name),n)};await Promise.all(i.map(s));break}case sc:case Id:await yO.call(this,e,t);break;case sm:case am:case om:case im:default:throw new Ke(mt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await mO.call(this,t,r.atime,r.mtime)}async function pY(e,t){e=jn(e);const{fs:n}=Er(e,this);return Promise.resolve(LK(n,t==null?void 0:t.bigint))}function mY(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:i=()=>!1}=t||{},s=e.map(o=>(o=o.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${o}$`)));async function*a(o){const l=await fm(o,{withFileTypes:r,encoding:"utf8"});for(const c of l){const u=r?c.path:o+"/"+c;i(r?c:u)||((await oy(u)).isDirectory()&&s.some(d=>d.source.includes(".*"))&&(yield*a(u)),s.some(d=>d.test(u.replace(/^\/+/g,"")))&&(yield r?c:u.replace(/^\/+/g,"")))}}return a(n)}const O_e=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Ra,access:dY,appendFile:rY,chmod:lY,chown:aY,constants:IK,copyFile:yO,cp:bO,exists:Nw,glob:mY,lchmod:cY,lchown:oY,link:iY,lstat:mE,lutimes:uY,mkdir:vE,mkdtemp:fY,open:Dl,opendir:hY,readFile:yE,readdir:fm,readlink:cC,realpath:xh,rename:tY,rm:gO,rmdir:pO,stat:oy,statfs:pY,symlink:sY,truncate:nY,unlink:gE,utimes:mO,watch:P_e,writeFile:bE},Symbol.toStringTag,{value:"Module"})),ur=()=>{};async function D_e(e){const t=[];for await(const n of e)t.push(n);return t}function F_e(e,t,n=ur){tY.call(this,e,t).then(()=>n()).catch(n)}function L_e(e,t=ur){Nw.call(this,e).then(t).catch(()=>t(!1))}function B_e(e,t,n=ur){n=typeof t=="function"?t:n,oy.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function $_e(e,t,n=ur){n=typeof t=="function"?t:n,mE.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function z_e(e,t=0,n=ur){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;nY.call(this,e,r).then(()=>n()).catch(n)}function U_e(e,t=ur){gE.call(this,e).then(()=>t()).catch(t)}function q_e(e,t,n,r=ur){const i=gh(n,420);r=typeof n=="function"?n:r,Dl.call(this,e,t,i).then(s=>r(void 0,s.fd)).catch(r)}function V_e(e,t,n=ur){n=typeof t=="function"?t:n,yE.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function H_e(e,t,n,r=ur){r=typeof n=="function"?n:r,bE.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function W_e(e,t,n,r=ur){const i=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,rY.call(this,e,t,i).then(()=>r()).catch(r)}function G_e(e,t,n=ur){n=typeof t=="function"?t:n,new Ra(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new lm(r):r)).catch(n)}function K_e(e,t=ur){new Ra(this,e).close().then(()=>t()).catch(t)}function Y_e(e,t,n=ur){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const i=new Ra(this,e);if(r<0)throw new Ke(mt.EINVAL);i.truncate(r).then(()=>n()).catch(n)}function Z_e(e,t=ur){new Ra(this,e).sync().then(()=>t()).catch(t)}function X_e(e,t=ur){new Ra(this,e).datasync().then(()=>t()).catch(t)}function J_e(e,t,n,r,i,s=ur){let a,o,l,c,u;const d=new Ra(this,e);if(typeof t=="string"){switch(u="utf8",typeof n){case"function":s=n;break;case"number":c=n,u=typeof r=="string"?r:"utf8",s=typeof i=="function"?i:s;break;default:s=typeof r=="function"?r:typeof i=="function"?i:s,s(new Ke(mt.EINVAL,"Invalid arguments"));return}a=Ii.from(t),o=0,l=a.length;const h=s;d.write(a,o,l,c).then(({bytesWritten:m})=>h(void 0,m,a.toString(u))).catch(h)}else{a=Ii.from(t.buffer),o=n,l=r,c=typeof i=="number"?i:null;const h=typeof i=="function"?i:s;d.write(a,o,l,c).then(({bytesWritten:m})=>h(void 0,m,a)).catch(h)}}function Q_e(e,t,n,r,i,s=ur){new Ra(this,e).read(t,n,r,i).then(({bytesRead:a,buffer:o})=>s(void 0,a,o)).catch(s)}function eSe(e,t,n,r=ur){new Ra(this,e).chown(t,n).then(()=>r()).catch(r)}function tSe(e,t,n){new Ra(this,e).chmod(t).then(()=>n()).catch(n)}function nSe(e,t,n,r=ur){new Ra(this,e).utimes(t,n).then(()=>r()).catch(r)}function rSe(e,t=ur){pO.call(this,e).then(()=>t()).catch(t)}function iSe(e,t,n=ur){vE.call(this,e,t).then(()=>n()).catch(n)}function sSe(e,t,n=ur){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};fm.call(this,e,r).then(i=>n(void 0,i)).catch(n)}function aSe(e,t,n=ur){iY.call(this,e,t).then(()=>n()).catch(n)}function oSe(e,t,n,r=ur){const i=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,sY.call(this,e,t,i).then(()=>r()).catch(r)}function lSe(e,t,n=ur){n=typeof t=="function"?t:n,cC.call(this,e).then(r=>n(void 0,r)).catch(n)}function cSe(e,t,n,r=ur){aY.call(this,e,t,n).then(()=>r()).catch(r)}function uSe(e,t,n,r=ur){oY.call(this,e,t,n).then(()=>r()).catch(r)}function dSe(e,t,n=ur){lY.call(this,e,t).then(()=>n()).catch(n)}function fSe(e,t,n=ur){cY.call(this,e,t).then(()=>n()).catch(n)}function hSe(e,t,n,r=ur){mO.call(this,e,t,n).then(()=>r()).catch(r)}function pSe(e,t,n,r=ur){uY.call(this,e,t,n).then(()=>r()).catch(r)}function mSe(e,t,n=ur){n=typeof t=="function"?t:n,xh.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function gSe(e,t,n=ur){const r=typeof t=="number"?t:js;n=typeof t=="function"?t:n,dY.call(this,e,r).then(()=>n()).catch(n)}const Mg=new Map;function ySe(e,t,n){const r=jn(e),i=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ke(mt.EINVAL,"No listener specified",e.toString(),"watchFile");if(Mg.has(r)){const a=Mg.get(r);a&&a.listeners.add(n);return}const s=new r_e(this,r,i);s.on("change",(a,o)=>{const l=Mg.get(r);if(l)for(const c of l.listeners)c(a,o)}),Mg.set(r,{watcher:s,listeners:new Set})}function bSe(e,t=ur){const n=jn(e),r=Mg.get(n);r&&(t&&t!==ur?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Mg.delete(n)))}function vSe(e,t,n){const r=new $K(this,jn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||ur),r}function xSe(e,t){t=typeof t=="object"?t:{encoding:t};const n=Dl.call(this,e,"r",t==null?void 0:t.mode);return new fO({...t,autoClose:!0},n)}function wSe(e,t){t=typeof t=="object"?t:{encoding:t};const n=Dl.call(this,e,"w",t==null?void 0:t.mode);return new hO(t,n)}function _Se(e,t,n=ur){n=typeof t=="function"?t:n,gO.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function SSe(e,t,n=ur){n=typeof t=="function"?t:n,fY.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function CSe(e,t,n,r=ur){r=typeof n=="function"?n:r,yO.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function kSe(e,t,n,r=ur){r=typeof n=="function"?n:r,new Ra(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:i,bytesRead:s})=>r(void 0,s,i)).catch(r)}function ESe(e,t,n,r=ur){r=typeof n=="function"?n:r,new Ra(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:i,bytesWritten:s})=>r(void 0,s,i)).catch(r)}function TSe(e,t,n=ur){n=typeof t=="function"?t:n,hY.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function ASe(e,t,n,r=ur){r=typeof n=="function"?n:r,bO.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function RSe(e,t,n=ur){n=typeof t=="function"?t:n,pY.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function ISe(e,t){const n=await Dl.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function NSe(e,t,n=ur){n=typeof t=="function"?t:n;const r=mY.call(this,e,typeof t=="function"?void 0:t);D_e(r).then(i=>{var s;return n(null,(s=i)!==null&&s!==void 0?s:[])}).catch(i=>n(i))}var ep=function(e,t,n,r,i,s){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,h=!1,m=n.length-1;m>=0;m--){var y={};for(var b in r)y[b]=b==="access"?{}:r[b];for(var b in r.access)y.access[b]=r.access[b];y.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(x||null))};var v=(0,n[m])(o==="accessor"?{get:u.get,set:u.set}:u[l],y);if(o==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=a(v.get))&&(u.get=d),(d=a(v.set))&&(u.set=d),(d=a(v.init))&&i.unshift(d)}else(d=a(v))&&(o==="field"?i.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),h=!0},Lo=function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},MSe=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},dC;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(dC||(dC={}));let gY=(()=>{var e,t,n,r,i;let s=[rm()],a,o=[],l,c,u=[],d=[],h,m=[],y=[],b,v=[],x=[],_,S=[],C=[],E,A=[],R=[],N,M=[],P=[];return l=class{constructor(L=fi(new Ke(mt.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=Lo(this,u,0),this.extsize=(Lo(this,d),Lo(this,m,0)),this.nextents=(Lo(this,y),Lo(this,v,0)),this.projid=(Lo(this,x),Lo(this,S,0)),this.cowextsize=(Lo(this,C),Lo(this,A,0)),this.pad=(Lo(this,R),Lo(this,M,[])),Lo(this,P),this.extsize=L.size,this.nextents=1,this.projid=L.uid,this.cowextsize=L.size;for(const O of Object.keys(mo))L.flags&mo[O]&&O in dC&&(this.xflags|=dC[O])}},MSe(l,"fsxattr"),(()=>{const L=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=Gn).uint32.bind(e)],h=[(t=Gn).uint32.bind(t)],b=[(n=Gn).uint32.bind(n)],_=[(r=Gn).uint32.bind(r)],E=[(i=Gn).uint32.bind(i)],N=[Gn.char(8)],ep(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:O=>"xflags"in O,get:O=>O.xflags,set:(O,V)=>{O.xflags=V}},metadata:L},u,d),ep(null,null,h,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:O=>"extsize"in O,get:O=>O.extsize,set:(O,V)=>{O.extsize=V}},metadata:L},m,y),ep(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:O=>"nextents"in O,get:O=>O.nextents,set:(O,V)=>{O.nextents=V}},metadata:L},v,x),ep(null,null,_,{kind:"field",name:"projid",static:!1,private:!1,access:{has:O=>"projid"in O,get:O=>O.projid,set:(O,V)=>{O.projid=V}},metadata:L},S,C),ep(null,null,E,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:O=>"cowextsize"in O,get:O=>O.cowextsize,set:(O,V)=>{O.cowextsize=V}},metadata:L},A,R),ep(null,null,N,{kind:"field",name:"pad",static:!1,private:!1,access:{has:O=>"pad"in O,get:O=>O.pad,set:(O,V)=>{O.pad=V}},metadata:L},M,P),ep(null,a={value:l},s,{kind:"class",name:l.name,metadata:L},null,o),l=a.value,L&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:L}),Lo(l,o)})(),l})();var Di;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Di||(Di={}));var tc;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(tc||(tc={}));async function jSe(e,t,...n){e=jn(e);const{fs:r,path:i}=Er(e,this);try{const s=new bs(await r.stat(i));switch(t){case Di.GetFlags:case tc.GetFlags:return s.flags;case Di.SetFlags:case tc.SetFlags:s.flags=n[0],await r.touch(i,s);return;case Di.GetVersion:case tc.GetVersion:return s.version;case Di.SetVersion:case tc.SetVersion:s.version=n[0],await r.touch(i,s);return;case Di.Fiemap:break;case Di.GetXattr:return new gY(s);case Di.SetXattr:break;case Di.GetLabel:return r.label;case Di.SetLabel:r.label=n[0];return;case Di.GetUUID:return r.uuid;case Di.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(s){throw li(s,{[i]:e})}throw new Ke(mt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function PSe(e,t,...n){e=jn(e);const{fs:r,path:i}=Er(e,this);try{const s=new bs(r.statSync(i));switch(t){case Di.GetFlags:case tc.GetFlags:return s.flags;case Di.SetFlags:case tc.SetFlags:s.flags=n[0],r.touchSync(i,s);return;case Di.GetVersion:case tc.GetVersion:return s.version;case Di.SetVersion:case tc.SetVersion:s.version=n[0],r.touchSync(i,s);return;case Di.Fiemap:break;case Di.GetXattr:return new gY(s);case Di.SetXattr:break;case Di.GetLabel:return r.label;case Di.SetLabel:r.label=n[0];return;case Di.GetUUID:return r.uuid;case Di.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(s){throw li(s,{[i]:e})}throw new Ke(mt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const OSe=[];function cy(e,t,n,r){if(!t.startsWith("user.")&&!OSe.includes(t))throw new Ke(mt.EPERM,"Only attributes in the user namespace are supported",n,r)}async function DSe(e,t,n={}){var r;e=jn(e);const{fs:i,path:s}=Er(e,this);cy(this,t,e,"xattr.get");try{const a=await i.stat(s);if(Ps&&!oi(this,a,js))throw Ke.With("EACCES",s,"xattr.get");(r=a.attributes)!==null&&r!==void 0||(a.attributes=new Zf);const o=a.attributes.get(t);if(!o)throw Ke.With("ENODATA",s,"xattr.get");const l=Ii.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(a){throw li(a,{[s]:e})}}function FSe(e,t,n={}){var r;e=jn(e),cy(this,t,e,"xattr.get");const{fs:i,path:s}=Er(e,this);try{const a=i.statSync(s);if(Ps&&!oi(this,a,js))throw Ke.With("EACCES",s,"xattr.get");(r=a.attributes)!==null&&r!==void 0||(a.attributes=new Zf);const o=a.attributes.get(t);if(!o)throw Ke.With("ENODATA",s,"xattr.get");const l=Ii.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(a){throw li(a,{[s]:e})}}async function LSe(e,t,n,r={}){var i;e=jn(e);const{fs:s,path:a}=Er(e,this);cy(this,t,e,"xattr.set");try{const o=await s.stat(a);if(Ps&&!oi(this,o,Qi))throw Ke.With("EACCES",a,"xattr.set");(i=o.attributes)!==null&&i!==void 0||(o.attributes=new Zf);const l=o.attributes.get(t);if(r.create&&l)throw Ke.With("EEXIST",a,"xattr.set");if(r.replace&&!l)throw Ke.With("ENODATA",a,"xattr.set");o.attributes.set(t,Ii.from(n)),await s.touch(a,nm(o,"attributes"))}catch(o){throw li(o,{[a]:e})}}function BSe(e,t,n,r={}){var i;e=jn(e);const{fs:s,path:a}=Er(e,this);cy(this,t,e,"xattr.set");try{const o=s.statSync(a);if(Ps&&!oi(this,o,Qi))throw Ke.With("EACCES",a,"xattr.set");(i=o.attributes)!==null&&i!==void 0||(o.attributes=new Zf);const l=o.attributes.get(t);if(r.create&&l)throw Ke.With("EEXIST",a,"xattr.set");if(r.replace&&!l)throw Ke.With("ENODATA",a,"xattr.set");o.attributes.set(t,Ii.from(n)),s.touchSync(a,nm(o,"attributes"))}catch(o){throw li(o,{[a]:e})}}async function $Se(e,t){var n;e=jn(e);const{fs:r,path:i}=Er(e,this);cy(this,t,e,"xattr.remove");try{const s=await r.stat(i);if(Ps&&!oi(this,s,Qi))throw Ke.With("EACCES",i,"xattr.remove");if((n=s.attributes)!==null&&n!==void 0||(s.attributes=new Zf),!s.attributes.get(t))throw Ke.With("ENODATA",i,"xattr.remove");s.attributes.remove(t),await r.touch(i,nm(s,"attributes"))}catch(s){throw li(s,{[i]:e})}}function zSe(e,t){var n;e=jn(e);const{fs:r,path:i}=Er(e,this);cy(this,t,e,"xattr.remove");try{const s=r.statSync(i);if(Ps&&!oi(this,s,Qi))throw Ke.With("EACCES",i,"xattr.remove");if((n=s.attributes)!==null&&n!==void 0||(s.attributes=new Zf),!s.attributes.get(t))throw Ke.With("ENODATA",i,"xattr.remove");s.attributes.remove(t),r.touchSync(i,nm(s,"attributes"))}catch(s){throw li(s,{[i]:e})}}async function USe(e){e=jn(e);const{fs:t,path:n}=Er(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw li(r,{[n]:e})}}function qSe(e){e=jn(e);const{fs:t,path:n}=Er(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw li(r,{[n]:e})}}const VSe=Object.freeze(Object.defineProperty({__proto__:null,get:DSe,getSync:FSe,list:USe,listSync:qSe,remove:$Se,removeSync:zSe,set:LSe,setSync:BSe},Symbol.toStringTag,{value:"Module"})),na=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:B1e,Dir:oO,Dirent:yx,get IOC(){return Di},get IOC32(){return tc},ReadStream:fO,Stats:Nd,StatsFs:L1e,WriteStream:hO,access:gSe,accessSync:__e,appendFile:W_e,appendFileSync:l_e,chmod:dSe,chmodSync:v_e,chown:cSe,chownSync:y_e,chroot:t_e,close:K_e,closeSync:um,constants:IK,copyFile:CSe,copyFileSync:HK,cp:ASe,cpSync:WK,createReadStream:xSe,createWriteStream:wSe,exists:L_e,existsSync:JP,fchmod:tSe,fchmodSync:iO,fchown:eSe,fchownSync:rO,fdatasync:X_e,fdatasyncSync:f_e,fstat:G_e,fstatSync:c_e,fsync:Z_e,fsyncSync:d_e,ftruncate:Y_e,ftruncateSync:u_e,futimes:nSe,futimesSync:sO,glob:NSe,globSync:A_e,ioctl:jSe,ioctlSync:PSe,lchmod:fSe,lchmodSync:x_e,lchown:uSe,lchownSync:b_e,link:aSe,linkSync:m_e,lopenSync:uE,lstat:$_e,lstatSync:QP,lutimes:pSe,lutimesSync:w_e,mkdir:iSe,mkdirSync:aO,mkdtemp:SSe,mkdtempSync:S_e,mount:XP,open:q_e,openAsBlob:ISe,openSync:cE,opendir:TSe,opendirSync:E_e,promises:O_e,read:Q_e,readFile:V_e,readFileSync:tO,readSync:p_e,readdir:sSe,readdirSync:sy,readlink:lSe,readlinkSync:W3,readv:kSe,readvSync:C_e,realpath:mSe,realpathSync:yh,rename:F_e,renameSync:a_e,rm:_Se,rmSync:VK,rmdir:rSe,rmdirSync:UK,stat:B_e,statSync:Xf,statfs:RSe,statfsSync:T_e,symlink:oSe,symlinkSync:g_e,truncate:z_e,truncateSync:o_e,umount:FK,unlink:U_e,unlinkSync:eO,unwatchFile:bSe,utimes:hSe,utimesSync:qK,watch:vSe,watchFile:ySe,write:J_e,writeFile:H_e,writeFileSync:nO,writeSync:h_e,writev:ESe,writevSync:k_e,xattr:VSe},Symbol.toStringTag,{value:"Module"}));function K$(e){return vK(e)||WP(e)||e instanceof ZP}async function yY(e,t=0){if(typeof e!="object"||e==null)throw po(new Ke(mt.EINVAL,"Invalid options on mount configuration"));if(!K$(e))throw po(new Ke(mt.EINVAL,"Invalid mount configuration"));if(e instanceof ZP)return await e.ready(),e;WP(e)&&(e={backend:e});for(const[i,s]of Object.entries(e))if(i!="backend"&&K$(s)){if(bK("Resolving nested mount configuration: "+i),t>10)throw po(new Ke(mt.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[i]=await yY(s,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw po(new Ke(mt.EPERM,"Backend not available: "+n.name));w1e(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function HSe(e){if(!vK(e))throw new TypeError("Invalid single mount point configuration");const t=await yY(e);FK("/"),XP("/",t)}const WSe=["delete"];Math.max(...WSe.map(e=>e.length));x1e("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const bY=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;bY[e]=t}function GSe(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^bY[(t^e[n])&255];return(t^4294967295)>>>0}var Oi=function(e,t,n,r,i,s){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,h=!1,m=n.length-1;m>=0;m--){var y={};for(var b in r)y[b]=b==="access"?{}:r[b];for(var b in r.access)y.access[b]=r.access[b];y.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(x||null))};var v=(0,n[m])(o==="accessor"?{get:u.get,set:u.set}:u[l],y);if(o==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=a(v.get))&&(u.get=d),(d=a(v.set))&&(u.set=d),(d=a(v.init))&&i.unshift(d)}else(d=a(v))&&(o==="field"?i.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),h=!0},rr=function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},vO=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let Y$=(()=>{var e,t,n,r;let i=[rm()],s,a=[],o,l,c=[],u=[],d,h=[],m=[],y,b=[],v=[],x,_=[],S=[];return o=class{constructor(){this.id=rr(this,c,0),this.offset_=(rr(this,u),rr(this,h,0)),this.offset=(rr(this,m),rr(this,b,0)),this.size=(rr(this,v),rr(this,_,0)),rr(this,S)}},vO(o,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=Gn).uint32.bind(e)],d=[(t=Gn).uint32.bind(t)],y=[(n=Gn).uint32.bind(n)],x=[(r=Gn).uint32.bind(r)],Oi(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:E=>"id"in E,get:E=>E.id,set:(E,A)=>{E.id=A}},metadata:C},c,u),Oi(null,null,d,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:E=>"offset_"in E,get:E=>E.offset_,set:(E,A)=>{E.offset_=A}},metadata:C},h,m),Oi(null,null,y,{kind:"field",name:"offset",static:!1,private:!1,access:{has:E=>"offset"in E,get:E=>E.offset,set:(E,A)=>{E.offset=A}},metadata:C},b,v),Oi(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:E=>"size"in E,get:E=>E.size,set:(E,A)=>{E.size=A}},metadata:C},_,S),Oi(null,s={value:o},i,{kind:"class",name:o.name,metadata:C},null,a),o=s.value,C&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),rr(o,a)})(),o})();const Z$=255;let tp=(()=>{var e,t,n,r;let i=[rm()],s,a=[],o,l,c=[],u=[],d,h=[],m=[],y,b=[],v=[],x,_=[],S=[],C,E=[],A=[];var R=o=class{constructor(N=fi(new Ke(mt.EINVAL,"Metadata block must be initialized with a superblock")),M=0){if(this.superblock=N,this.offset=M,this.checksum=rr(this,c,0),this.timestamp=(rr(this,u),rr(this,h,Date.now())),this.previous_offset_=(rr(this,m),rr(this,b,0)),this.previous_offset=(rr(this,v),rr(this,_,0)),this._previous=rr(this,S),this.entries=rr(this,E,Array.from({length:Z$},()=>new Y$)),rr(this,A),this.superblock=N,this.offset=M,!!M&&(rE(this,N.store._buffer.subarray(M,M+Fi(R))),!vY(this)))throw iE(new Ke(mt.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+M.toString(16)))}get previous(){var N;if(this.previous_offset)return(N=this._previous)!==null&&N!==void 0||(this._previous=new R(this.superblock,this.previous_offset)),this._previous}};return vO(o,"MetadataBlock"),(()=>{const N=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=Gn).uint32.bind(e)],d=[(t=Gn).uint32.bind(t)],y=[(n=Gn).uint32.bind(n)],x=[(r=Gn).uint32.bind(r)],C=[hx(Y$,Z$)],Oi(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:M=>"checksum"in M,get:M=>M.checksum,set:(M,P)=>{M.checksum=P}},metadata:N},c,u),Oi(null,null,d,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:M=>"timestamp"in M,get:M=>M.timestamp,set:(M,P)=>{M.timestamp=P}},metadata:N},h,m),Oi(null,null,y,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:M=>"previous_offset_"in M,get:M=>M.previous_offset_,set:(M,P)=>{M.previous_offset_=P}},metadata:N},b,v),Oi(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:M=>"previous_offset"in M,get:M=>M.previous_offset,set:(M,P)=>{M.previous_offset=P}},metadata:N},_,S),Oi(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:M=>"entries"in M,get:M=>M.entries,set:(M,P)=>{M.entries=P}},metadata:N},E,A),Oi(null,s={value:o},i,{kind:"class",name:o.name,metadata:N},null,a),R=o=s.value,N&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N}),rr(o,a)})(),R=o})();const X$=2049864546;(()=>{var e,t,n,r,i,s,a,o,l,c,u;let d=[rm()],h,m=[],y,b,v=[],x=[],_,S=[],C=[],E,A=[],R=[],N,M=[],P=[],L,O=[],V=[],F,J=[],U=[],G,$=[],ne=[],H,te=[],ee=[],se,he=[],ce=[],Me,je=[],Ne=[],Ce,Ue=[],et=[],qe,Re=[],K=[],ge,Ae=[],le=[];var oe=y=class{constructor(ie=fi(new Ke(mt.EINVAL,"Super block must be initialized with a store"))){if(this.store=ie,this.checksum=rr(this,v,0),this.magic=(rr(this,x),rr(this,S,X$)),this.version=(rr(this,C),rr(this,A,1)),this.inode_format=(rr(this,R),rr(this,M,z1e)),this.flags=(rr(this,P),rr(this,O,0)),this.used_bytes=(rr(this,V),rr(this,J,BigInt(0))),this.total_bytes=(rr(this,U),rr(this,$,BigInt(0))),this.uuid=(rr(this,ne),rr(this,te,BigInt(0))),this.metadata_block_size=(rr(this,ee),rr(this,he,Fi(tp))),this.metadata_offset_=(rr(this,ce),rr(this,je,0)),this.metadata_offset=(rr(this,Ne),rr(this,Ue,0)),this.metadata=rr(this,et),this.label=rr(this,Re,""),this._padding=(rr(this,K),rr(this,Ae,new Array(132).fill(0))),rr(this,le),this.store=ie,ie._view.getUint32(i1e(oe,"magic"),!0)!=X$){ka("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new tp(this),this.metadata.offset=Fi(oe),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Fi(oe)+Fi(tp)),this.total_bytes=BigInt(ie._buffer.byteLength),ie._write(this),ie._write(this.metadata);return}if(rE(this,ie._buffer.subarray(0,Fi(oe))),!vY(this))throw iE(new Ke(mt.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new tp(this,this.metadata_offset)}rotateMetadata(){const ie=new tp(this);return ie.offset=Number(this.used_bytes),ie.previous_offset=this.metadata_offset,this.metadata=ie,this.metadata_offset=ie.offset,this.store._write(ie),this.used_bytes+=BigInt(Fi(tp)),this.store._write(this),ie}isUnused(ie,Ee){if(!Ee)return!0;if(ie+Ee>this.total_bytes||ie<Fi(oe))return!1;for(let Be=this.metadata;Be;Be=Be.previous){if(ie<Be.offset+Fi(tp)&&ie+Ee>Be.offset)return!1;for(const ke of Be.entries)if(ke.offset&&(ie>=ke.offset&&ie<ke.offset+ke.size||ie+Ee>ke.offset&&ie+Ee<=ke.offset+ke.size||ie<=ke.offset&&ie+Ee>=ke.offset+ke.size))return!1}return!0}};return vO(y,"SuperBlock"),(()=>{const ie=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=Gn).uint32.bind(e)],_=[(t=Gn).uint32.bind(t)],E=[(n=Gn).uint16.bind(n)],N=[(r=Gn).uint16.bind(r)],L=[(i=Gn).uint32.bind(i)],F=[(s=Gn).uint64.bind(s)],G=[(a=Gn).uint64.bind(a)],H=[(o=Gn).uint128.bind(o)],se=[(l=Gn).uint32.bind(l)],Me=[(c=Gn).uint32.bind(c)],Ce=[(u=Gn).uint32.bind(u)],qe=[Gn.char(64)],ge=[Gn.char(132)],Oi(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:Ee=>"checksum"in Ee,get:Ee=>Ee.checksum,set:(Ee,Be)=>{Ee.checksum=Be}},metadata:ie},v,x),Oi(null,null,_,{kind:"field",name:"magic",static:!1,private:!1,access:{has:Ee=>"magic"in Ee,get:Ee=>Ee.magic,set:(Ee,Be)=>{Ee.magic=Be}},metadata:ie},S,C),Oi(null,null,E,{kind:"field",name:"version",static:!1,private:!1,access:{has:Ee=>"version"in Ee,get:Ee=>Ee.version,set:(Ee,Be)=>{Ee.version=Be}},metadata:ie},A,R),Oi(null,null,N,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:Ee=>"inode_format"in Ee,get:Ee=>Ee.inode_format,set:(Ee,Be)=>{Ee.inode_format=Be}},metadata:ie},M,P),Oi(null,null,L,{kind:"field",name:"flags",static:!1,private:!1,access:{has:Ee=>"flags"in Ee,get:Ee=>Ee.flags,set:(Ee,Be)=>{Ee.flags=Be}},metadata:ie},O,V),Oi(null,null,F,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:Ee=>"used_bytes"in Ee,get:Ee=>Ee.used_bytes,set:(Ee,Be)=>{Ee.used_bytes=Be}},metadata:ie},J,U),Oi(null,null,G,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:Ee=>"total_bytes"in Ee,get:Ee=>Ee.total_bytes,set:(Ee,Be)=>{Ee.total_bytes=Be}},metadata:ie},$,ne),Oi(null,null,H,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:Ee=>"uuid"in Ee,get:Ee=>Ee.uuid,set:(Ee,Be)=>{Ee.uuid=Be}},metadata:ie},te,ee),Oi(null,null,se,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:Ee=>"metadata_block_size"in Ee,get:Ee=>Ee.metadata_block_size,set:(Ee,Be)=>{Ee.metadata_block_size=Be}},metadata:ie},he,ce),Oi(null,null,Me,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:Ee=>"metadata_offset_"in Ee,get:Ee=>Ee.metadata_offset_,set:(Ee,Be)=>{Ee.metadata_offset_=Be}},metadata:ie},je,Ne),Oi(null,null,Ce,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:Ee=>"metadata_offset"in Ee,get:Ee=>Ee.metadata_offset,set:(Ee,Be)=>{Ee.metadata_offset=Be}},metadata:ie},Ue,et),Oi(null,null,qe,{kind:"field",name:"label",static:!1,private:!1,access:{has:Ee=>"label"in Ee,get:Ee=>Ee.label,set:(Ee,Be)=>{Ee.label=Be}},metadata:ie},Re,K),Oi(null,null,ge,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:Ee=>"_padding"in Ee,get:Ee=>Ee._padding,set:(Ee,Be)=>{Ee._padding=Be}},metadata:ie},Ae,le),Oi(null,h={value:y},d,{kind:"class",name:y.name,metadata:ie},null,m),oe=y=h.value,ie&&Object.defineProperty(y,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ie}),rr(y,m)})(),oe=y})();function vY(e){const t=ca(e),n=GSe(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=na;function KSe(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function K3(e,t,n){if(e instanceof Ke)return e;const r=e instanceof DOMException?mt[KSe(e)]:mt.EIO,i=new Ke(r,e.message,t,n);return i.stack=e.stack,i.cause=e.cause,i}function jg(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(K3(e.error))}})}class YSe extends H3{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await jg(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await jg(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await jg(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),jg(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(K3(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(K3(this.tx.error)),this.tx.abort(),t}}async function ZSe(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(ka("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await jg(n)}class XSe{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new YSe(t,this)}}const JSe={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await jg(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await ZSe(e.storeName||"zenfs",e.idbFactory),n=new XSe(t),r=new PK(n);if(e!=null&&e.disableAsyncCache)return HP("Async preloading disabled for IndexedDB"),r;const i=n.transaction();for(const s of await i.keys())await i.get(s);return r}},QSe=JSe,un={vfsKeyChanged:"vfs.key.changed",nodesUpdated:"vfs.nodes.updated",selectionChanged:"vfs.selection.changed",loadingStateChanged:"vfs.loading.state.changed",fsInstanceChanged:"vfs.instance.changed",vfsEnabledChanged:"vfs.enabled.changed",fileWritten:"vfs.sdk.fileWritten",fileRead:"vfs.sdk.fileRead",fileDeleted:"vfs.sdk.fileDeleted",setVfsKeyRequest:"vfs.set.vfs.key.request",initializeVFSRequest:"vfs.initialize.vfs.request",fetchNodesRequest:"vfs.fetch.nodes.request",setCurrentPathRequest:"vfs.set.current.path.request",createDirectoryRequest:"vfs.create.directory.request",uploadFilesRequest:"vfs.upload.files.request",deleteNodesRequest:"vfs.delete.nodes.request",renameNodeRequest:"vfs.rename.node.request",downloadFileRequest:"vfs.download.file.request",selectFileRequest:"vfs.select.file.request",deselectFileRequest:"vfs.deselect.file.request",clearSelectionRequest:"vfs.clear.selection.request",setEnableVfsRequest:"vfs.set.enable.vfs.request"};function J_(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var QI={exports:{}},J$;function e2e(){return J$||(J$=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function a(c,u){if(!i[c]){if(!r[c]){var d=typeof J_=="function"&&J_;if(!u&&d)return d(c,!0);if(o)return o(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var m=i[c]={exports:{}};r[c][0].call(m.exports,function(y){var b=r[c][1][y];return a(b||y)},m,m.exports,n,r,i,s)}return i[c].exports}for(var o=typeof J_=="function"&&J_,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(n,r,i){var s=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,d,h,m,y,b,v=[],x=0,_=l.length,S=_,C=s.getTypeOf(l)!=="string";x<l.length;)S=_-x,d=C?(c=l[x++],u=x<_?l[x++]:0,x<_?l[x++]:0):(c=l.charCodeAt(x++),u=x<_?l.charCodeAt(x++):0,x<_?l.charCodeAt(x++):0),h=c>>2,m=(3&c)<<4|u>>4,y=1<S?(15&u)<<2|d>>6:64,b=2<S?63&d:64,v.push(o.charAt(h)+o.charAt(m)+o.charAt(y)+o.charAt(b));return v.join("")},i.decode=function(l){var c,u,d,h,m,y,b=0,v=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var _,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&S--,l.charAt(l.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=a.uint8array?new Uint8Array(0|S):new Array(0|S);b<l.length;)c=o.indexOf(l.charAt(b++))<<2|(h=o.indexOf(l.charAt(b++)))>>4,u=(15&h)<<4|(m=o.indexOf(l.charAt(b++)))>>2,d=(3&m)<<6|(y=o.indexOf(l.charAt(b++))),_[v++]=c,m!==64&&(_[v++]=u),y!==64&&(_[v++]=d);return _}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(u,d,h,m,y){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=m,this.compressedContent=y}c.prototype={getContentWorker:function(){var u=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,d,h){return u.pipe(new o).pipe(new l("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),a=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(c,u,d,h){var m=a,y=h+d;c^=-1;for(var b=h;b<y;b++)c=c>>>8^m[255&(c^u[b])];return-1^c}(0|l,o,o.length,0):function(c,u,d,h){var m=a,y=h+d;c^=-1;for(var b=h;b<y;b++)c=c>>>8^m[255&(c^u.charCodeAt(b))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),c=s?"uint8array":"array";function u(d,h){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}i.magic="\b\0",o.inherits(u,l),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,d.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},i.compressWorker=function(d){return new u("Deflate",d)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(m,y){var b,v="";for(b=0;b<y;b++)v+=String.fromCharCode(255&m),m>>>=8;return v}function a(m,y,b,v,x,_){var S,C,E=m.file,A=m.compression,R=_!==c.utf8encode,N=o.transformTo("string",_(E.name)),M=o.transformTo("string",c.utf8encode(E.name)),P=E.comment,L=o.transformTo("string",_(P)),O=o.transformTo("string",c.utf8encode(P)),V=M.length!==E.name.length,F=O.length!==P.length,J="",U="",G="",$=E.dir,ne=E.date,H={crc32:0,compressedSize:0,uncompressedSize:0};y&&!b||(H.crc32=m.crc32,H.compressedSize=m.compressedSize,H.uncompressedSize=m.uncompressedSize);var te=0;y&&(te|=8),R||!V&&!F||(te|=2048);var ee=0,se=0;$&&(ee|=16),x==="UNIX"?(se=798,ee|=function(ce,Me){var je=ce;return ce||(je=Me?16893:33204),(65535&je)<<16}(E.unixPermissions,$)):(se=20,ee|=function(ce){return 63&(ce||0)}(E.dosPermissions)),S=ne.getUTCHours(),S<<=6,S|=ne.getUTCMinutes(),S<<=5,S|=ne.getUTCSeconds()/2,C=ne.getUTCFullYear()-1980,C<<=4,C|=ne.getUTCMonth()+1,C<<=5,C|=ne.getUTCDate(),V&&(U=s(1,1)+s(u(N),4)+M,J+="up"+s(U.length,2)+U),F&&(G=s(1,1)+s(u(L),4)+O,J+="uc"+s(G.length,2)+G);var he="";return he+=`
\0`,he+=s(te,2),he+=A.magic,he+=s(S,2),he+=s(C,2),he+=s(H.crc32,4),he+=s(H.compressedSize,4),he+=s(H.uncompressedSize,4),he+=s(N.length,2),he+=s(J.length,2),{fileRecord:d.LOCAL_FILE_HEADER+he+N+J,dirRecord:d.CENTRAL_FILE_HEADER+s(se,2)+he+s(L.length,2)+"\0\0\0\0"+s(ee,4)+s(v,4)+N+J+L}}var o=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),u=n("../crc32"),d=n("../signature");function h(m,y,b,v){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=b,this.encodeFileName=v,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,l),h.prototype.push=function(m){var y=m.meta.percent||0,b=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:b?(y+100*(b-v-1))/b:100}}))},h.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var y=this.streamFiles&&!m.file.dir;if(y){var b=a(m,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(m){this.accumulate=!1;var y=this.streamFiles&&!m.file.dir,b=a(m,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),y)this.push({data:function(v){return d.DATA_DESCRIPTOR+s(v.crc32,4)+s(v.compressedSize,4)+s(v.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var m=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var b=this.bytesWritten-m,v=function(x,_,S,C,E){var A=o.transformTo("string",E(C));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(x,2)+s(x,2)+s(_,4)+s(S,4)+s(A.length,2)+A}(this.dirRecords.length,b,m,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(m){this._sources.push(m);var y=this;return m.on("data",function(b){y.processChunk(b)}),m.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),m.on("error",function(b){y.error(b)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(m){var y=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var b=0;b<y.length;b++)try{y[b].error(m)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,y=0;y<m.length;y++)m[y].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),a=n("./ZipFileWorker");i.generateWorker=function(o,l,c){var u=new a(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{o.forEach(function(h,m){d++;var y=function(_,S){var C=_||S,E=s[C];if(!E)throw new Error(C+" is not a valid compression method !");return E}(m.options.compression,l.compression),b=m.options.compressionOptions||l.compressionOptions||{},v=m.dir,x=m.date;m._compressWorker(y,b).withStreamInfo("file",{name:h,dir:v,date:x,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),a=n("./external"),o=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function d(h){return new a.Promise(function(m,y){var b=h.decompressed.getContentWorker().pipe(new c);b.on("error",function(v){y(v)}).on("end",function(){b.streamInfo.crc32!==h.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(h,m){var y=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,m.optimizedBinaryString,m.base64).then(function(b){var v=new l(m);return v.load(b),v}).then(function(b){var v=[a.Promise.resolve(b)],x=b.files;if(m.checkCRC32)for(var _=0;_<x.length;_++)v.push(d(x[_]));return a.Promise.all(v)}).then(function(b){for(var v=b.shift(),x=v.files,_=0;_<x.length;_++){var S=x[_],C=S.fileNameStr,E=s.resolve(S.fileNameStr);y.file(E,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:m.createFolders}),S.dir||(y.file(E).unsafeOriginalName=C)}return v.zipComment.length&&(y.comment=v.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker");function o(l,c){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(o,a),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function a(o,l,c){s.call(this,l),this._helper=o;var u=this;o.on("data",function(d,h){u.push(d)||u._helper.pause(),c&&c(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}n("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof on<"u",newBufferFrom:function(s,a){if(on.from&&on.from!==Uint8Array.from)return on.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new on(s,a)},allocBuffer:function(s){if(on.alloc)return on.alloc(s);var a=new on(s);return a.fill(0),a},isBuffer:function(s){return on.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(E,A,R){var N,M=o.getTypeOf(A),P=o.extend(R||{},u);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(E=x(E)),P.createFolders&&(N=v(E))&&_.call(this,N,!0);var L=M==="string"&&P.binary===!1&&P.base64===!1;R&&R.binary!==void 0||(P.binary=!L),(A instanceof d&&A.uncompressedSize===0||P.dir||!A||A.length===0)&&(P.base64=!1,P.binary=!0,A="",P.compression="STORE",M="string");var O=null;O=A instanceof d||A instanceof l?A:y.isNode&&y.isStream(A)?new b(E,A):o.prepareContent(E,A,P.binary,P.optimizedBinaryString,P.base64);var V=new h(E,O,P);this.files[E]=V}var a=n("./utf8"),o=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),u=n("./defaults"),d=n("./compressedObject"),h=n("./zipObject"),m=n("./generate"),y=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),v=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var A=E.lastIndexOf("/");return 0<A?E.substring(0,A):""},x=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},_=function(E,A){return A=A!==void 0?A:u.createFolders,E=x(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:A}),this.files[E]};function S(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var A,R,N;for(A in this.files)N=this.files[A],(R=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&E(R,N)},filter:function(E){var A=[];return this.forEach(function(R,N){E(R,N)&&A.push(N)}),A},file:function(E,A,R){if(arguments.length!==1)return E=this.root+E,s.call(this,E,A,R),this;if(S(E)){var N=E;return this.filter(function(P,L){return!L.dir&&N.test(P)})}var M=this.files[this.root+E];return M&&!M.dir?M:null},folder:function(E){if(!E)return this;if(S(E))return this.filter(function(M,P){return P.dir&&E.test(M)});var A=this.root+E,R=_.call(this,A),N=this.clone();return N.root=R.name,N},remove:function(E){E=this.root+E;var A=this.files[E];if(A||(E.slice(-1)!=="/"&&(E+="/"),A=this.files[E]),A&&!A.dir)delete this.files[E];else for(var R=this.filter(function(M,P){return P.name.slice(0,E.length)===E}),N=0;N<R.length;N++)delete this.files[R[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var A,R={};try{if((R=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");o.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var N=R.comment||this.comment||"";A=m.generateWorker(this,R,N)}catch(M){(A=new l("error")).error(M)}return new c(A,R.type||"string",R.mimeType)},generateAsync:function(E,A){return this.generateInternalStream(E).accumulate(A)},generateNodeStream:function(E,A){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(A)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),d=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),d=o.charCodeAt(3),h=this.readData(4);return l===h[0]&&c===h[1]&&u===h[2]&&d===h[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),a=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(d){var h=s.getTypeOf(d);return s.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new c(d):a.uint8array?new u(s.transformTo("uint8array",d)):new o(s.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),a=n("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),a=n("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}a.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),c=n("../support"),u=n("../external"),d=null;if(c.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(y,b){return new u.Promise(function(v,x){var _=[],S=y._internalType,C=y._outputType,E=y._mimeType;y.on("data",function(A,R){_.push(A),b&&b(R)}).on("error",function(A){_=[],x(A)}).on("end",function(){try{var A=function(R,N,M){switch(R){case"blob":return s.newBlob(s.transformTo("arraybuffer",N),M);case"base64":return l.encode(N);default:return s.transformTo(R,N)}}(C,function(R,N){var M,P=0,L=null,O=0;for(M=0;M<N.length;M++)O+=N[M].length;switch(R){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(L=new Uint8Array(O),M=0;M<N.length;M++)L.set(N[M],P),P+=N[M].length;return L;case"nodebuffer":return on.concat(N);default:throw new Error("concat : unsupported type '"+R+"'")}}(S,_),E);v(A)}catch(R){x(R)}_=[]}).resume()})}function m(y,b,v){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=v,s.checkSupport(x),this._worker=y.pipe(new a(x)),y.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}m.prototype={accumulate:function(y){return h(this,y)},on:function(y,b){var v=this;return y==="data"?this._worker.on(y,function(x){b.call(v,x.data,x.meta)}):this._worker.on(y,function(){s.delay(b,arguments,v)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},y)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof on<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}i.utf8encode=function(m){return a.nodebuffer?o.newBufferFrom(m,"utf-8"):function(y){var b,v,x,_,S,C=y.length,E=0;for(_=0;_<C;_++)(64512&(v=y.charCodeAt(_)))==55296&&_+1<C&&(64512&(x=y.charCodeAt(_+1)))==56320&&(v=65536+(v-55296<<10)+(x-56320),_++),E+=v<128?1:v<2048?2:v<65536?3:4;for(b=a.uint8array?new Uint8Array(E):new Array(E),_=S=0;S<E;_++)(64512&(v=y.charCodeAt(_)))==55296&&_+1<C&&(64512&(x=y.charCodeAt(_+1)))==56320&&(v=65536+(v-55296<<10)+(x-56320),_++),v<128?b[S++]=v:(v<2048?b[S++]=192|v>>>6:(v<65536?b[S++]=224|v>>>12:(b[S++]=240|v>>>18,b[S++]=128|v>>>12&63),b[S++]=128|v>>>6&63),b[S++]=128|63&v);return b}(m)},i.utf8decode=function(m){return a.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(y){var b,v,x,_,S=y.length,C=new Array(2*S);for(b=v=0;b<S;)if((x=y[b++])<128)C[v++]=x;else if(4<(_=c[x]))C[v++]=65533,b+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&b<S;)x=x<<6|63&y[b++],_--;1<_?C[v++]=65533:x<65536?C[v++]=x:(x-=65536,C[v++]=55296|x>>10&1023,C[v++]=56320|1023&x)}return C.length!==v&&(C.subarray?C=C.subarray(0,v):C.length=v),s.applyFromCharCode(C)}(m=s.transformTo(a.uint8array?"uint8array":"array",m))},s.inherits(d,l),d.prototype.processChunk=function(m){var y=s.transformTo(a.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var b=y;(y=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),y.set(b,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var v=function(_,S){var C;for((S=S||_.length)>_.length&&(S=_.length),C=S-1;0<=C&&(192&_[C])==128;)C--;return C<0||C===0?S:C+c[_[C]]>S?C:S}(y),x=y;v!==y.length&&(a.uint8array?(x=y.subarray(0,v),this.leftOver=y.subarray(v,y.length)):(x=y.slice(0,v),this.leftOver=y.slice(v,y.length))),this.push({data:i.utf8decode(x),meta:m.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,s.inherits(h,l),h.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),l=n("./external");function c(b){return b}function u(b,v){for(var x=0;x<b.length;++x)v[x]=255&b.charCodeAt(x);return v}n("setimmediate"),i.newBlob=function(b,v){i.checkSupport("blob");try{return new Blob([b],{type:v})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(b,v,x){var _=[],S=0,C=b.length;if(C<=x)return String.fromCharCode.apply(null,b);for(;S<C;)v==="array"||v==="nodebuffer"?_.push(String.fromCharCode.apply(null,b.slice(S,Math.min(S+x,C)))):_.push(String.fromCharCode.apply(null,b.subarray(S,Math.min(S+x,C)))),S+=x;return _.join("")},stringifyByChar:function(b){for(var v="",x=0;x<b.length;x++)v+=String.fromCharCode(b[x]);return v},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function h(b){var v=65536,x=i.getTypeOf(b),_=!0;if(x==="uint8array"?_=d.applyCanBeUsed.uint8array:x==="nodebuffer"&&(_=d.applyCanBeUsed.nodebuffer),_)for(;1<v;)try{return d.stringifyByChunk(b,x,v)}catch{v=Math.floor(v/2)}return d.stringifyByChar(b)}function m(b,v){for(var x=0;x<b.length;x++)v[x]=b[x];return v}i.applyFromCharCode=h;var y={};y.string={string:c,array:function(b){return u(b,new Array(b.length))},arraybuffer:function(b){return y.string.uint8array(b).buffer},uint8array:function(b){return u(b,new Uint8Array(b.length))},nodebuffer:function(b){return u(b,o.allocBuffer(b.length))}},y.array={string:h,array:c,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},y.arraybuffer={string:function(b){return h(new Uint8Array(b))},array:function(b){return m(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:c,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},y.uint8array={string:h,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:c,nodebuffer:function(b){return o.newBufferFrom(b)}},y.nodebuffer={string:h,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return y.nodebuffer.uint8array(b).buffer},uint8array:function(b){return m(b,new Uint8Array(b.length))},nodebuffer:c},i.transformTo=function(b,v){if(v=v||"",!b)return v;i.checkSupport(b);var x=i.getTypeOf(v);return y[x][b](v)},i.resolve=function(b){for(var v=b.split("/"),x=[],_=0;_<v.length;_++){var S=v[_];S==="."||S===""&&_!==0&&_!==v.length-1||(S===".."?x.pop():x.push(S))}return x.join("/")},i.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(b)?"nodebuffer":s.uint8array&&b instanceof Uint8Array?"uint8array":s.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(b){if(!s[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(b){var v,x,_="";for(x=0;x<(b||"").length;x++)_+="\\x"+((v=b.charCodeAt(x))<16?"0":"")+v.toString(16).toUpperCase();return _},i.delay=function(b,v,x){setImmediate(function(){b.apply(x||null,v||[])})},i.inherits=function(b,v){function x(){}x.prototype=v.prototype,b.prototype=new x},i.extend=function(){var b,v,x={};for(b=0;b<arguments.length;b++)for(v in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],v)&&x[v]===void 0&&(x[v]=arguments[b][v]);return x},i.prepareContent=function(b,v,x,_,S){return l.Promise.resolve(v).then(function(C){return s.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(E,A){var R=new FileReader;R.onload=function(N){E(N.target.result)},R.onerror=function(N){A(N.target.error)},R.readAsArrayBuffer(C)}):C}).then(function(C){var E=i.getTypeOf(C);return E?(E==="arraybuffer"?C=i.transformTo("uint8array",C):E==="string"&&(S?C=a.decode(C):x&&_!==!0&&(C=function(A){return u(A,s.uint8array?new Uint8Array(A.length):new Array(A.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),l=n("./zipEntry"),c=n("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(d)+")")}},isSignature:function(d,h){var m=this.reader.index;this.reader.setIndex(d);var y=this.reader.readString(4)===h;return this.reader.setIndex(m),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",m=a.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,m,y=this.zip64EndOfCentralSize-44;0<y;)d=this.reader.readInt(2),h=this.reader.readInt(4),m=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var y=h-m;if(0<y)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),u=n("./compressions"),d=n("./support");function h(m,y){this.options=m,this.loadOptions=y}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var y,b;if(m.skip(22),this.fileNameLength=m.readInt(2),b=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(v){for(var x in u)if(Object.prototype.hasOwnProperty.call(u,x)&&u[x].magic===v)return u[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var y=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(y),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var y,b,v,x=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<x;)y=m.readInt(2),b=m.readInt(2),v=m.readData(b),this.extraFields[y]={id:y,length:b,value:v};m.setIndex(x)},handleUTF8:function(){var m=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var b=a.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var x=a.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var y=s(m.value);return y.readInt(1)!==1||l(this.fileName)!==y.readInt(4)?null:c.utf8decode(y.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var y=s(m.value);return y.readInt(1)!==1||l(this.fileComment)!==y.readInt(4)?null:c.utf8decode(y.readData(m.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(y,b,v){this.name=y,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=b,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),u=n("./stream/GenericWorker");s.prototype={internalStream:function(y){var b=null,v="string";try{if(!y)throw new Error("No output type specified.");var x=(v=y.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),b=this._decompressWorker();var _=!this._dataBinary;_&&!x&&(b=b.pipe(new l.Utf8EncodeWorker)),!_&&x&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(S){(b=new u("error")).error(S)}return new a(b,v,"")},async:function(y,b){return this.internalStream(y).accumulate(b)},nodeStream:function(y,b){return this.internalStream(y||"nodebuffer").toNodejsStream(b)},_compressWorker:function(y,b){if(this._data instanceof c&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(v,y,b)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<d.length;m++)s.prototype[d[m]]=h;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var a,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(y),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var b=s.document.createElement("script");b.onreadystatechange=function(){y(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},s.document.documentElement.appendChild(b)}:function(){setTimeout(y,0)};else{var h=new s.MessageChannel;h.port1.onmessage=y,a=function(){h.port2.postMessage(0)}}var m=[];function y(){var b,v;o=!0;for(var x=m.length;x;){for(v=m,m=[],b=-1;++b<x;)v[b]();x=m.length}o=!1}r.exports=function(b){m.push(b)!==1||o||a()}}).call(this,typeof mp<"u"?mp:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function d(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,x!==a&&b(this,x)}function h(x,_,S){this.promise=x,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function m(x,_,S){s(function(){var C;try{C=_(S)}catch(E){return o.reject(x,E)}C===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,C)})}function y(x){var _=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof _=="function")return function(){_.apply(x,arguments)}}function b(x,_){var S=!1;function C(R){S||(S=!0,o.reject(x,R))}function E(R){S||(S=!0,o.resolve(x,R))}var A=v(function(){_(E,C)});A.status==="error"&&C(A.value)}function v(x,_){var S={};try{S.value=x(_),S.status="success"}catch(C){S.status="error",S.value=C}return S}(r.exports=d).prototype.finally=function(x){if(typeof x!="function")return this;var _=this.constructor;return this.then(function(S){return _.resolve(x()).then(function(){return S})},function(S){return _.resolve(x()).then(function(){throw S})})},d.prototype.catch=function(x){return this.then(null,x)},d.prototype.then=function(x,_){if(typeof x!="function"&&this.state===c||typeof _!="function"&&this.state===l)return this;var S=new this.constructor(a);return this.state!==u?m(S,this.state===c?x:_,this.outcome):this.queue.push(new h(S,x,_)),S},h.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},h.prototype.otherCallFulfilled=function(x){m(this.promise,this.onFulfilled,x)},h.prototype.callRejected=function(x){o.reject(this.promise,x)},h.prototype.otherCallRejected=function(x){m(this.promise,this.onRejected,x)},o.resolve=function(x,_){var S=v(y,_);if(S.status==="error")return o.reject(x,S.value);var C=S.value;if(C)b(x,C);else{x.state=c,x.outcome=_;for(var E=-1,A=x.queue.length;++E<A;)x.queue[E].callFulfilled(_)}return x},o.reject=function(x,_){x.state=l,x.outcome=_;for(var S=-1,C=x.queue.length;++S<C;)x.queue[S].callRejected(_);return x},d.resolve=function(x){return x instanceof this?x:o.resolve(new this(a),x)},d.reject=function(x){var _=new this(a);return o.reject(_,x)},d.all=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,C=!1;if(!S)return this.resolve([]);for(var E=new Array(S),A=0,R=-1,N=new this(a);++R<S;)M(x[R],R);return N;function M(P,L){_.resolve(P).then(function(O){E[L]=O,++A!==S||C||(C=!0,o.resolve(N,E))},function(O){C||(C=!0,o.reject(N,O))})}},d.race=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,C=!1;if(!S)return this.resolve([]);for(var E=-1,A=new this(a);++E<S;)R=x[E],_.resolve(R).then(function(N){C||(C=!0,o.resolve(A,N))},function(N){C||(C=!0,o.reject(A,N))});var R;return A}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,m=0,y=8;function b(x){if(!(this instanceof b))return new b(x);this.options=a.assign({level:h,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},x||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var S=s.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(S!==d)throw new Error(l[S]);if(_.header&&s.deflateSetHeader(this.strm,_.header),_.dictionary){var C;if(C=typeof _.dictionary=="string"?o.string2buf(_.dictionary):u.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(S=s.deflateSetDictionary(this.strm,C))!==d)throw new Error(l[S]);this._dict_set=!0}}function v(x,_){var S=new b(_);if(S.push(x,!0),S.err)throw S.msg||l[S.err];return S.result}b.prototype.push=function(x,_){var S,C,E=this.strm,A=this.options.chunkSize;if(this.ended)return!1;C=_===~~_?_:_===!0?4:0,typeof x=="string"?E.input=o.string2buf(x):u.call(x)==="[object ArrayBuffer]"?E.input=new Uint8Array(x):E.input=x,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(A),E.next_out=0,E.avail_out=A),(S=s.deflate(E,C))!==1&&S!==d)return this.onEnd(S),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(E.output,E.next_out))):this.onData(a.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&S!==1);return C===4?(S=s.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===d):C!==2||(this.onEnd(d),!(E.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Deflate=b,i.deflate=v,i.deflateRaw=function(x,_){return(_=_||{}).raw=!0,v(x,_)},i.gzip=function(x,_){return(_=_||{}).gzip=!0,v(x,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=n("./zlib/gzheader"),h=Object.prototype.toString;function m(b){if(!(this instanceof m))return new m(b);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},b||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||b&&b.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&(15&v.windowBits)==0&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var x=s.inflateInit2(this.strm,v.windowBits);if(x!==l.Z_OK)throw new Error(c[x]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function y(b,v){var x=new m(v);if(x.push(b,!0),x.err)throw x.msg||c[x.err];return x.result}m.prototype.push=function(b,v){var x,_,S,C,E,A,R=this.strm,N=this.options.chunkSize,M=this.options.dictionary,P=!1;if(this.ended)return!1;_=v===~~v?v:v===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?R.input=o.binstring2buf(b):h.call(b)==="[object ArrayBuffer]"?R.input=new Uint8Array(b):R.input=b,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new a.Buf8(N),R.next_out=0,R.avail_out=N),(x=s.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&M&&(A=typeof M=="string"?o.string2buf(M):h.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,x=s.inflateSetDictionary(this.strm,A)),x===l.Z_BUF_ERROR&&P===!0&&(x=l.Z_OK,P=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&x!==l.Z_STREAM_END&&(R.avail_in!==0||_!==l.Z_FINISH&&_!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(R.output,R.next_out),C=R.next_out-S,E=o.buf2string(R.output,S),R.next_out=C,R.avail_out=N-C,C&&a.arraySet(R.output,R.output,S,C,0),this.onData(E)):this.onData(a.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(P=!0)}while((0<R.avail_in||R.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(_=l.Z_FINISH),_===l.Z_FINISH?(x=s.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):_!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(b){this.chunks.push(b)},m.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Inflate=m,i.inflate=y,i.inflateRaw=function(b,v){return(v=v||{}).raw=!0,y(b,v)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(l[d]=u[d])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var a={arraySet:function(l,c,u,d,h){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+d),h);else for(var m=0;m<d;m++)l[h+m]=c[u+m]},flattenChunks:function(l){var c,u,d,h,m,y;for(c=d=0,u=l.length;c<u;c++)d+=l[c].length;for(y=new Uint8Array(d),c=h=0,u=l.length;c<u;c++)m=l[c],y.set(m,h),h+=m.length;return y}},o={arraySet:function(l,c,u,d,h){for(var m=0;m<d;m++)l[h+m]=c[u+m]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(d,h){if(h<65537&&(d.subarray&&o||!d.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(d,h));for(var m="",y=0;y<h;y++)m+=String.fromCharCode(d[y]);return m}l[254]=l[254]=1,i.string2buf=function(d){var h,m,y,b,v,x=d.length,_=0;for(b=0;b<x;b++)(64512&(m=d.charCodeAt(b)))==55296&&b+1<x&&(64512&(y=d.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),b++),_+=m<128?1:m<2048?2:m<65536?3:4;for(h=new s.Buf8(_),b=v=0;v<_;b++)(64512&(m=d.charCodeAt(b)))==55296&&b+1<x&&(64512&(y=d.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),b++),m<128?h[v++]=m:(m<2048?h[v++]=192|m>>>6:(m<65536?h[v++]=224|m>>>12:(h[v++]=240|m>>>18,h[v++]=128|m>>>12&63),h[v++]=128|m>>>6&63),h[v++]=128|63&m);return h},i.buf2binstring=function(d){return u(d,d.length)},i.binstring2buf=function(d){for(var h=new s.Buf8(d.length),m=0,y=h.length;m<y;m++)h[m]=d.charCodeAt(m);return h},i.buf2string=function(d,h){var m,y,b,v,x=h||d.length,_=new Array(2*x);for(m=y=0;m<x;)if((b=d[m++])<128)_[y++]=b;else if(4<(v=l[b]))_[y++]=65533,m+=v-1;else{for(b&=v===2?31:v===3?15:7;1<v&&m<x;)b=b<<6|63&d[m++],v--;1<v?_[y++]=65533:b<65536?_[y++]=b:(b-=65536,_[y++]=55296|b>>10&1023,_[y++]=56320|1023&b)}return u(_,y)},i.utf8border=function(d,h){var m;for((h=h||d.length)>d.length&&(h=d.length),m=h-1;0<=m&&(192&d[m])==128;)m--;return m<0||m===0?h:m+l[d[m]]>h?m:h}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,a,o,l){for(var c=65535&s|0,u=s>>>16&65535|0,d=0;o!==0;){for(o-=d=2e3<o?2e3:o;u=u+(c=c+a[l++]|0)|0,--d;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();r.exports=function(a,o,l,c){var u=s,d=c+l;a^=-1;for(var h=c;h<d;h++)a=a>>>8^u[255&(a^o[h])];return-1^a}},{}],46:[function(n,r,i){var s,a=n("../utils/common"),o=n("./trees"),l=n("./adler32"),c=n("./crc32"),u=n("./messages"),d=0,h=4,m=0,y=-2,b=-1,v=4,x=2,_=8,S=9,C=286,E=30,A=19,R=2*C+1,N=15,M=3,P=258,L=P+M+1,O=42,V=113,F=1,J=2,U=3,G=4;function $(K,ge){return K.msg=u[ge],ge}function ne(K){return(K<<1)-(4<K?9:0)}function H(K){for(var ge=K.length;0<=--ge;)K[ge]=0}function te(K){var ge=K.state,Ae=ge.pending;Ae>K.avail_out&&(Ae=K.avail_out),Ae!==0&&(a.arraySet(K.output,ge.pending_buf,ge.pending_out,Ae,K.next_out),K.next_out+=Ae,ge.pending_out+=Ae,K.total_out+=Ae,K.avail_out-=Ae,ge.pending-=Ae,ge.pending===0&&(ge.pending_out=0))}function ee(K,ge){o._tr_flush_block(K,0<=K.block_start?K.block_start:-1,K.strstart-K.block_start,ge),K.block_start=K.strstart,te(K.strm)}function se(K,ge){K.pending_buf[K.pending++]=ge}function he(K,ge){K.pending_buf[K.pending++]=ge>>>8&255,K.pending_buf[K.pending++]=255&ge}function ce(K,ge){var Ae,le,oe=K.max_chain_length,ie=K.strstart,Ee=K.prev_length,Be=K.nice_match,ke=K.strstart>K.w_size-L?K.strstart-(K.w_size-L):0,ct=K.window,It=K.w_mask,ht=K.prev,Ot=K.strstart+P,zt=ct[ie+Ee-1],Bt=ct[ie+Ee];K.prev_length>=K.good_match&&(oe>>=2),Be>K.lookahead&&(Be=K.lookahead);do if(ct[(Ae=ge)+Ee]===Bt&&ct[Ae+Ee-1]===zt&&ct[Ae]===ct[ie]&&ct[++Ae]===ct[ie+1]){ie+=2,Ae++;do;while(ct[++ie]===ct[++Ae]&&ct[++ie]===ct[++Ae]&&ct[++ie]===ct[++Ae]&&ct[++ie]===ct[++Ae]&&ct[++ie]===ct[++Ae]&&ct[++ie]===ct[++Ae]&&ct[++ie]===ct[++Ae]&&ct[++ie]===ct[++Ae]&&ie<Ot);if(le=P-(Ot-ie),ie=Ot-P,Ee<le){if(K.match_start=ge,Be<=(Ee=le))break;zt=ct[ie+Ee-1],Bt=ct[ie+Ee]}}while((ge=ht[ge&It])>ke&&--oe!=0);return Ee<=K.lookahead?Ee:K.lookahead}function Me(K){var ge,Ae,le,oe,ie,Ee,Be,ke,ct,It,ht=K.w_size;do{if(oe=K.window_size-K.lookahead-K.strstart,K.strstart>=ht+(ht-L)){for(a.arraySet(K.window,K.window,ht,ht,0),K.match_start-=ht,K.strstart-=ht,K.block_start-=ht,ge=Ae=K.hash_size;le=K.head[--ge],K.head[ge]=ht<=le?le-ht:0,--Ae;);for(ge=Ae=ht;le=K.prev[--ge],K.prev[ge]=ht<=le?le-ht:0,--Ae;);oe+=ht}if(K.strm.avail_in===0)break;if(Ee=K.strm,Be=K.window,ke=K.strstart+K.lookahead,ct=oe,It=void 0,It=Ee.avail_in,ct<It&&(It=ct),Ae=It===0?0:(Ee.avail_in-=It,a.arraySet(Be,Ee.input,Ee.next_in,It,ke),Ee.state.wrap===1?Ee.adler=l(Ee.adler,Be,It,ke):Ee.state.wrap===2&&(Ee.adler=c(Ee.adler,Be,It,ke)),Ee.next_in+=It,Ee.total_in+=It,It),K.lookahead+=Ae,K.lookahead+K.insert>=M)for(ie=K.strstart-K.insert,K.ins_h=K.window[ie],K.ins_h=(K.ins_h<<K.hash_shift^K.window[ie+1])&K.hash_mask;K.insert&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[ie+M-1])&K.hash_mask,K.prev[ie&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=ie,ie++,K.insert--,!(K.lookahead+K.insert<M)););}while(K.lookahead<L&&K.strm.avail_in!==0)}function je(K,ge){for(var Ae,le;;){if(K.lookahead<L){if(Me(K),K.lookahead<L&&ge===d)return F;if(K.lookahead===0)break}if(Ae=0,K.lookahead>=M&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+M-1])&K.hash_mask,Ae=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),Ae!==0&&K.strstart-Ae<=K.w_size-L&&(K.match_length=ce(K,Ae)),K.match_length>=M)if(le=o._tr_tally(K,K.strstart-K.match_start,K.match_length-M),K.lookahead-=K.match_length,K.match_length<=K.max_lazy_match&&K.lookahead>=M){for(K.match_length--;K.strstart++,K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+M-1])&K.hash_mask,Ae=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart,--K.match_length!=0;);K.strstart++}else K.strstart+=K.match_length,K.match_length=0,K.ins_h=K.window[K.strstart],K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+1])&K.hash_mask;else le=o._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++;if(le&&(ee(K,!1),K.strm.avail_out===0))return F}return K.insert=K.strstart<M-1?K.strstart:M-1,ge===h?(ee(K,!0),K.strm.avail_out===0?U:G):K.last_lit&&(ee(K,!1),K.strm.avail_out===0)?F:J}function Ne(K,ge){for(var Ae,le,oe;;){if(K.lookahead<L){if(Me(K),K.lookahead<L&&ge===d)return F;if(K.lookahead===0)break}if(Ae=0,K.lookahead>=M&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+M-1])&K.hash_mask,Ae=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),K.prev_length=K.match_length,K.prev_match=K.match_start,K.match_length=M-1,Ae!==0&&K.prev_length<K.max_lazy_match&&K.strstart-Ae<=K.w_size-L&&(K.match_length=ce(K,Ae),K.match_length<=5&&(K.strategy===1||K.match_length===M&&4096<K.strstart-K.match_start)&&(K.match_length=M-1)),K.prev_length>=M&&K.match_length<=K.prev_length){for(oe=K.strstart+K.lookahead-M,le=o._tr_tally(K,K.strstart-1-K.prev_match,K.prev_length-M),K.lookahead-=K.prev_length-1,K.prev_length-=2;++K.strstart<=oe&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+M-1])&K.hash_mask,Ae=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),--K.prev_length!=0;);if(K.match_available=0,K.match_length=M-1,K.strstart++,le&&(ee(K,!1),K.strm.avail_out===0))return F}else if(K.match_available){if((le=o._tr_tally(K,0,K.window[K.strstart-1]))&&ee(K,!1),K.strstart++,K.lookahead--,K.strm.avail_out===0)return F}else K.match_available=1,K.strstart++,K.lookahead--}return K.match_available&&(le=o._tr_tally(K,0,K.window[K.strstart-1]),K.match_available=0),K.insert=K.strstart<M-1?K.strstart:M-1,ge===h?(ee(K,!0),K.strm.avail_out===0?U:G):K.last_lit&&(ee(K,!1),K.strm.avail_out===0)?F:J}function Ce(K,ge,Ae,le,oe){this.good_length=K,this.max_lazy=ge,this.nice_length=Ae,this.max_chain=le,this.func=oe}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*R),this.dyn_dtree=new a.Buf16(2*(2*E+1)),this.bl_tree=new a.Buf16(2*(2*A+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(N+1),this.heap=new a.Buf16(2*C+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*C+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function et(K){var ge;return K&&K.state?(K.total_in=K.total_out=0,K.data_type=x,(ge=K.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?O:V,K.adler=ge.wrap===2?0:1,ge.last_flush=d,o._tr_init(ge),m):$(K,y)}function qe(K){var ge=et(K);return ge===m&&function(Ae){Ae.window_size=2*Ae.w_size,H(Ae.head),Ae.max_lazy_match=s[Ae.level].max_lazy,Ae.good_match=s[Ae.level].good_length,Ae.nice_match=s[Ae.level].nice_length,Ae.max_chain_length=s[Ae.level].max_chain,Ae.strstart=0,Ae.block_start=0,Ae.lookahead=0,Ae.insert=0,Ae.match_length=Ae.prev_length=M-1,Ae.match_available=0,Ae.ins_h=0}(K.state),ge}function Re(K,ge,Ae,le,oe,ie){if(!K)return y;var Ee=1;if(ge===b&&(ge=6),le<0?(Ee=0,le=-le):15<le&&(Ee=2,le-=16),oe<1||S<oe||Ae!==_||le<8||15<le||ge<0||9<ge||ie<0||v<ie)return $(K,y);le===8&&(le=9);var Be=new Ue;return(K.state=Be).strm=K,Be.wrap=Ee,Be.gzhead=null,Be.w_bits=le,Be.w_size=1<<Be.w_bits,Be.w_mask=Be.w_size-1,Be.hash_bits=oe+7,Be.hash_size=1<<Be.hash_bits,Be.hash_mask=Be.hash_size-1,Be.hash_shift=~~((Be.hash_bits+M-1)/M),Be.window=new a.Buf8(2*Be.w_size),Be.head=new a.Buf16(Be.hash_size),Be.prev=new a.Buf16(Be.w_size),Be.lit_bufsize=1<<oe+6,Be.pending_buf_size=4*Be.lit_bufsize,Be.pending_buf=new a.Buf8(Be.pending_buf_size),Be.d_buf=1*Be.lit_bufsize,Be.l_buf=3*Be.lit_bufsize,Be.level=ge,Be.strategy=ie,Be.method=Ae,qe(K)}s=[new Ce(0,0,0,0,function(K,ge){var Ae=65535;for(Ae>K.pending_buf_size-5&&(Ae=K.pending_buf_size-5);;){if(K.lookahead<=1){if(Me(K),K.lookahead===0&&ge===d)return F;if(K.lookahead===0)break}K.strstart+=K.lookahead,K.lookahead=0;var le=K.block_start+Ae;if((K.strstart===0||K.strstart>=le)&&(K.lookahead=K.strstart-le,K.strstart=le,ee(K,!1),K.strm.avail_out===0)||K.strstart-K.block_start>=K.w_size-L&&(ee(K,!1),K.strm.avail_out===0))return F}return K.insert=0,ge===h?(ee(K,!0),K.strm.avail_out===0?U:G):(K.strstart>K.block_start&&(ee(K,!1),K.strm.avail_out),F)}),new Ce(4,4,8,4,je),new Ce(4,5,16,8,je),new Ce(4,6,32,32,je),new Ce(4,4,16,16,Ne),new Ce(8,16,32,32,Ne),new Ce(8,16,128,128,Ne),new Ce(8,32,128,256,Ne),new Ce(32,128,258,1024,Ne),new Ce(32,258,258,4096,Ne)],i.deflateInit=function(K,ge){return Re(K,ge,_,15,8,0)},i.deflateInit2=Re,i.deflateReset=qe,i.deflateResetKeep=et,i.deflateSetHeader=function(K,ge){return K&&K.state?K.state.wrap!==2?y:(K.state.gzhead=ge,m):y},i.deflate=function(K,ge){var Ae,le,oe,ie;if(!K||!K.state||5<ge||ge<0)return K?$(K,y):y;if(le=K.state,!K.output||!K.input&&K.avail_in!==0||le.status===666&&ge!==h)return $(K,K.avail_out===0?-5:y);if(le.strm=K,Ae=le.last_flush,le.last_flush=ge,le.status===O)if(le.wrap===2)K.adler=0,se(le,31),se(le,139),se(le,8),le.gzhead?(se(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),se(le,255&le.gzhead.time),se(le,le.gzhead.time>>8&255),se(le,le.gzhead.time>>16&255),se(le,le.gzhead.time>>24&255),se(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),se(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(se(le,255&le.gzhead.extra.length),se(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(K.adler=c(K.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(se(le,0),se(le,0),se(le,0),se(le,0),se(le,0),se(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),se(le,3),le.status=V);else{var Ee=_+(le.w_bits-8<<4)<<8;Ee|=(2<=le.strategy||le.level<2?0:le.level<6?1:le.level===6?2:3)<<6,le.strstart!==0&&(Ee|=32),Ee+=31-Ee%31,le.status=V,he(le,Ee),le.strstart!==0&&(he(le,K.adler>>>16),he(le,65535&K.adler)),K.adler=1}if(le.status===69)if(le.gzhead.extra){for(oe=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>oe&&(K.adler=c(K.adler,le.pending_buf,le.pending-oe,oe)),te(K),oe=le.pending,le.pending!==le.pending_buf_size));)se(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>oe&&(K.adler=c(K.adler,le.pending_buf,le.pending-oe,oe)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(le.status===73)if(le.gzhead.name){oe=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>oe&&(K.adler=c(K.adler,le.pending_buf,le.pending-oe,oe)),te(K),oe=le.pending,le.pending===le.pending_buf_size)){ie=1;break}ie=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,se(le,ie)}while(ie!==0);le.gzhead.hcrc&&le.pending>oe&&(K.adler=c(K.adler,le.pending_buf,le.pending-oe,oe)),ie===0&&(le.gzindex=0,le.status=91)}else le.status=91;if(le.status===91)if(le.gzhead.comment){oe=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>oe&&(K.adler=c(K.adler,le.pending_buf,le.pending-oe,oe)),te(K),oe=le.pending,le.pending===le.pending_buf_size)){ie=1;break}ie=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,se(le,ie)}while(ie!==0);le.gzhead.hcrc&&le.pending>oe&&(K.adler=c(K.adler,le.pending_buf,le.pending-oe,oe)),ie===0&&(le.status=103)}else le.status=103;if(le.status===103&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&te(K),le.pending+2<=le.pending_buf_size&&(se(le,255&K.adler),se(le,K.adler>>8&255),K.adler=0,le.status=V)):le.status=V),le.pending!==0){if(te(K),K.avail_out===0)return le.last_flush=-1,m}else if(K.avail_in===0&&ne(ge)<=ne(Ae)&&ge!==h)return $(K,-5);if(le.status===666&&K.avail_in!==0)return $(K,-5);if(K.avail_in!==0||le.lookahead!==0||ge!==d&&le.status!==666){var Be=le.strategy===2?function(ke,ct){for(var It;;){if(ke.lookahead===0&&(Me(ke),ke.lookahead===0)){if(ct===d)return F;break}if(ke.match_length=0,It=o._tr_tally(ke,0,ke.window[ke.strstart]),ke.lookahead--,ke.strstart++,It&&(ee(ke,!1),ke.strm.avail_out===0))return F}return ke.insert=0,ct===h?(ee(ke,!0),ke.strm.avail_out===0?U:G):ke.last_lit&&(ee(ke,!1),ke.strm.avail_out===0)?F:J}(le,ge):le.strategy===3?function(ke,ct){for(var It,ht,Ot,zt,Bt=ke.window;;){if(ke.lookahead<=P){if(Me(ke),ke.lookahead<=P&&ct===d)return F;if(ke.lookahead===0)break}if(ke.match_length=0,ke.lookahead>=M&&0<ke.strstart&&(ht=Bt[Ot=ke.strstart-1])===Bt[++Ot]&&ht===Bt[++Ot]&&ht===Bt[++Ot]){zt=ke.strstart+P;do;while(ht===Bt[++Ot]&&ht===Bt[++Ot]&&ht===Bt[++Ot]&&ht===Bt[++Ot]&&ht===Bt[++Ot]&&ht===Bt[++Ot]&&ht===Bt[++Ot]&&ht===Bt[++Ot]&&Ot<zt);ke.match_length=P-(zt-Ot),ke.match_length>ke.lookahead&&(ke.match_length=ke.lookahead)}if(ke.match_length>=M?(It=o._tr_tally(ke,1,ke.match_length-M),ke.lookahead-=ke.match_length,ke.strstart+=ke.match_length,ke.match_length=0):(It=o._tr_tally(ke,0,ke.window[ke.strstart]),ke.lookahead--,ke.strstart++),It&&(ee(ke,!1),ke.strm.avail_out===0))return F}return ke.insert=0,ct===h?(ee(ke,!0),ke.strm.avail_out===0?U:G):ke.last_lit&&(ee(ke,!1),ke.strm.avail_out===0)?F:J}(le,ge):s[le.level].func(le,ge);if(Be!==U&&Be!==G||(le.status=666),Be===F||Be===U)return K.avail_out===0&&(le.last_flush=-1),m;if(Be===J&&(ge===1?o._tr_align(le):ge!==5&&(o._tr_stored_block(le,0,0,!1),ge===3&&(H(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),te(K),K.avail_out===0))return le.last_flush=-1,m}return ge!==h?m:le.wrap<=0?1:(le.wrap===2?(se(le,255&K.adler),se(le,K.adler>>8&255),se(le,K.adler>>16&255),se(le,K.adler>>24&255),se(le,255&K.total_in),se(le,K.total_in>>8&255),se(le,K.total_in>>16&255),se(le,K.total_in>>24&255)):(he(le,K.adler>>>16),he(le,65535&K.adler)),te(K),0<le.wrap&&(le.wrap=-le.wrap),le.pending!==0?m:1)},i.deflateEnd=function(K){var ge;return K&&K.state?(ge=K.state.status)!==O&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==V&&ge!==666?$(K,y):(K.state=null,ge===V?$(K,-3):m):y},i.deflateSetDictionary=function(K,ge){var Ae,le,oe,ie,Ee,Be,ke,ct,It=ge.length;if(!K||!K.state||(ie=(Ae=K.state).wrap)===2||ie===1&&Ae.status!==O||Ae.lookahead)return y;for(ie===1&&(K.adler=l(K.adler,ge,It,0)),Ae.wrap=0,It>=Ae.w_size&&(ie===0&&(H(Ae.head),Ae.strstart=0,Ae.block_start=0,Ae.insert=0),ct=new a.Buf8(Ae.w_size),a.arraySet(ct,ge,It-Ae.w_size,Ae.w_size,0),ge=ct,It=Ae.w_size),Ee=K.avail_in,Be=K.next_in,ke=K.input,K.avail_in=It,K.next_in=0,K.input=ge,Me(Ae);Ae.lookahead>=M;){for(le=Ae.strstart,oe=Ae.lookahead-(M-1);Ae.ins_h=(Ae.ins_h<<Ae.hash_shift^Ae.window[le+M-1])&Ae.hash_mask,Ae.prev[le&Ae.w_mask]=Ae.head[Ae.ins_h],Ae.head[Ae.ins_h]=le,le++,--oe;);Ae.strstart=le,Ae.lookahead=M-1,Me(Ae)}return Ae.strstart+=Ae.lookahead,Ae.block_start=Ae.strstart,Ae.insert=Ae.lookahead,Ae.lookahead=0,Ae.match_length=Ae.prev_length=M-1,Ae.match_available=0,K.next_in=Be,K.input=ke,K.avail_in=Ee,Ae.wrap=ie,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,a){var o,l,c,u,d,h,m,y,b,v,x,_,S,C,E,A,R,N,M,P,L,O,V,F,J;o=s.state,l=s.next_in,F=s.input,c=l+(s.avail_in-5),u=s.next_out,J=s.output,d=u-(a-s.avail_out),h=u+(s.avail_out-257),m=o.dmax,y=o.wsize,b=o.whave,v=o.wnext,x=o.window,_=o.hold,S=o.bits,C=o.lencode,E=o.distcode,A=(1<<o.lenbits)-1,R=(1<<o.distbits)-1;e:do{S<15&&(_+=F[l++]<<S,S+=8,_+=F[l++]<<S,S+=8),N=C[_&A];t:for(;;){if(_>>>=M=N>>>24,S-=M,(M=N>>>16&255)===0)J[u++]=65535&N;else{if(!(16&M)){if((64&M)==0){N=C[(65535&N)+(_&(1<<M)-1)];continue t}if(32&M){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}P=65535&N,(M&=15)&&(S<M&&(_+=F[l++]<<S,S+=8),P+=_&(1<<M)-1,_>>>=M,S-=M),S<15&&(_+=F[l++]<<S,S+=8,_+=F[l++]<<S,S+=8),N=E[_&R];n:for(;;){if(_>>>=M=N>>>24,S-=M,!(16&(M=N>>>16&255))){if((64&M)==0){N=E[(65535&N)+(_&(1<<M)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(L=65535&N,S<(M&=15)&&(_+=F[l++]<<S,(S+=8)<M&&(_+=F[l++]<<S,S+=8)),m<(L+=_&(1<<M)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(_>>>=M,S-=M,(M=u-d)<L){if(b<(M=L-M)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(V=x,(O=0)===v){if(O+=y-M,M<P){for(P-=M;J[u++]=x[O++],--M;);O=u-L,V=J}}else if(v<M){if(O+=y+v-M,(M-=v)<P){for(P-=M;J[u++]=x[O++],--M;);if(O=0,v<P){for(P-=M=v;J[u++]=x[O++],--M;);O=u-L,V=J}}}else if(O+=v-M,M<P){for(P-=M;J[u++]=x[O++],--M;);O=u-L,V=J}for(;2<P;)J[u++]=V[O++],J[u++]=V[O++],J[u++]=V[O++],P-=3;P&&(J[u++]=V[O++],1<P&&(J[u++]=V[O++]))}else{for(O=u-L;J[u++]=J[O++],J[u++]=J[O++],J[u++]=J[O++],2<(P-=3););P&&(J[u++]=J[O++],1<P&&(J[u++]=J[O++]))}break}}break}}while(l<c&&u<h);l-=P=S>>3,_&=(1<<(S-=P<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<h?h-u+257:257-(u-h),o.hold=_,o.bits=S}},{}],49:[function(n,r,i){var s=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),u=1,d=2,h=0,m=-2,y=1,b=852,v=592;function x(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(O){var V;return O&&O.state?(V=O.state,O.total_in=O.total_out=V.total=0,O.msg="",V.wrap&&(O.adler=1&V.wrap),V.mode=y,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new s.Buf32(b),V.distcode=V.distdyn=new s.Buf32(v),V.sane=1,V.back=-1,h):m}function C(O){var V;return O&&O.state?((V=O.state).wsize=0,V.whave=0,V.wnext=0,S(O)):m}function E(O,V){var F,J;return O&&O.state?(J=O.state,V<0?(F=0,V=-V):(F=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?m:(J.window!==null&&J.wbits!==V&&(J.window=null),J.wrap=F,J.wbits=V,C(O))):m}function A(O,V){var F,J;return O?(J=new _,(O.state=J).window=null,(F=E(O,V))!==h&&(O.state=null),F):m}var R,N,M=!0;function P(O){if(M){var V;for(R=new s.Buf32(512),N=new s.Buf32(32),V=0;V<144;)O.lens[V++]=8;for(;V<256;)O.lens[V++]=9;for(;V<280;)O.lens[V++]=7;for(;V<288;)O.lens[V++]=8;for(c(u,O.lens,0,288,R,0,O.work,{bits:9}),V=0;V<32;)O.lens[V++]=5;c(d,O.lens,0,32,N,0,O.work,{bits:5}),M=!1}O.lencode=R,O.lenbits=9,O.distcode=N,O.distbits=5}function L(O,V,F,J){var U,G=O.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new s.Buf8(G.wsize)),J>=G.wsize?(s.arraySet(G.window,V,F-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(J<(U=G.wsize-G.wnext)&&(U=J),s.arraySet(G.window,V,F-J,U,G.wnext),(J-=U)?(s.arraySet(G.window,V,F-J,J,0),G.wnext=J,G.whave=G.wsize):(G.wnext+=U,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=U))),0}i.inflateReset=C,i.inflateReset2=E,i.inflateResetKeep=S,i.inflateInit=function(O){return A(O,15)},i.inflateInit2=A,i.inflate=function(O,V){var F,J,U,G,$,ne,H,te,ee,se,he,ce,Me,je,Ne,Ce,Ue,et,qe,Re,K,ge,Ae,le,oe=0,ie=new s.Buf8(4),Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return m;(F=O.state).mode===12&&(F.mode=13),$=O.next_out,U=O.output,H=O.avail_out,G=O.next_in,J=O.input,ne=O.avail_in,te=F.hold,ee=F.bits,se=ne,he=H,ge=h;e:for(;;)switch(F.mode){case y:if(F.wrap===0){F.mode=13;break}for(;ee<16;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(2&F.wrap&&te===35615){ie[F.check=0]=255&te,ie[1]=te>>>8&255,F.check=o(F.check,ie,2,0),ee=te=0,F.mode=2;break}if(F.flags=0,F.head&&(F.head.done=!1),!(1&F.wrap)||(((255&te)<<8)+(te>>8))%31){O.msg="incorrect header check",F.mode=30;break}if((15&te)!=8){O.msg="unknown compression method",F.mode=30;break}if(ee-=4,K=8+(15&(te>>>=4)),F.wbits===0)F.wbits=K;else if(K>F.wbits){O.msg="invalid window size",F.mode=30;break}F.dmax=1<<K,O.adler=F.check=1,F.mode=512&te?10:12,ee=te=0;break;case 2:for(;ee<16;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(F.flags=te,(255&F.flags)!=8){O.msg="unknown compression method",F.mode=30;break}if(57344&F.flags){O.msg="unknown header flags set",F.mode=30;break}F.head&&(F.head.text=te>>8&1),512&F.flags&&(ie[0]=255&te,ie[1]=te>>>8&255,F.check=o(F.check,ie,2,0)),ee=te=0,F.mode=3;case 3:for(;ee<32;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.head&&(F.head.time=te),512&F.flags&&(ie[0]=255&te,ie[1]=te>>>8&255,ie[2]=te>>>16&255,ie[3]=te>>>24&255,F.check=o(F.check,ie,4,0)),ee=te=0,F.mode=4;case 4:for(;ee<16;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.head&&(F.head.xflags=255&te,F.head.os=te>>8),512&F.flags&&(ie[0]=255&te,ie[1]=te>>>8&255,F.check=o(F.check,ie,2,0)),ee=te=0,F.mode=5;case 5:if(1024&F.flags){for(;ee<16;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.length=te,F.head&&(F.head.extra_len=te),512&F.flags&&(ie[0]=255&te,ie[1]=te>>>8&255,F.check=o(F.check,ie,2,0)),ee=te=0}else F.head&&(F.head.extra=null);F.mode=6;case 6:if(1024&F.flags&&(ne<(ce=F.length)&&(ce=ne),ce&&(F.head&&(K=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),s.arraySet(F.head.extra,J,G,ce,K)),512&F.flags&&(F.check=o(F.check,J,ce,G)),ne-=ce,G+=ce,F.length-=ce),F.length))break e;F.length=0,F.mode=7;case 7:if(2048&F.flags){if(ne===0)break e;for(ce=0;K=J[G+ce++],F.head&&K&&F.length<65536&&(F.head.name+=String.fromCharCode(K)),K&&ce<ne;);if(512&F.flags&&(F.check=o(F.check,J,ce,G)),ne-=ce,G+=ce,K)break e}else F.head&&(F.head.name=null);F.length=0,F.mode=8;case 8:if(4096&F.flags){if(ne===0)break e;for(ce=0;K=J[G+ce++],F.head&&K&&F.length<65536&&(F.head.comment+=String.fromCharCode(K)),K&&ce<ne;);if(512&F.flags&&(F.check=o(F.check,J,ce,G)),ne-=ce,G+=ce,K)break e}else F.head&&(F.head.comment=null);F.mode=9;case 9:if(512&F.flags){for(;ee<16;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(te!==(65535&F.check)){O.msg="header crc mismatch",F.mode=30;break}ee=te=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),O.adler=F.check=0,F.mode=12;break;case 10:for(;ee<32;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}O.adler=F.check=x(te),ee=te=0,F.mode=11;case 11:if(F.havedict===0)return O.next_out=$,O.avail_out=H,O.next_in=G,O.avail_in=ne,F.hold=te,F.bits=ee,2;O.adler=F.check=1,F.mode=12;case 12:if(V===5||V===6)break e;case 13:if(F.last){te>>>=7&ee,ee-=7&ee,F.mode=27;break}for(;ee<3;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}switch(F.last=1&te,ee-=1,3&(te>>>=1)){case 0:F.mode=14;break;case 1:if(P(F),F.mode=20,V!==6)break;te>>>=2,ee-=2;break e;case 2:F.mode=17;break;case 3:O.msg="invalid block type",F.mode=30}te>>>=2,ee-=2;break;case 14:for(te>>>=7&ee,ee-=7&ee;ee<32;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if((65535&te)!=(te>>>16^65535)){O.msg="invalid stored block lengths",F.mode=30;break}if(F.length=65535&te,ee=te=0,F.mode=15,V===6)break e;case 15:F.mode=16;case 16:if(ce=F.length){if(ne<ce&&(ce=ne),H<ce&&(ce=H),ce===0)break e;s.arraySet(U,J,G,ce,$),ne-=ce,G+=ce,H-=ce,$+=ce,F.length-=ce;break}F.mode=12;break;case 17:for(;ee<14;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(F.nlen=257+(31&te),te>>>=5,ee-=5,F.ndist=1+(31&te),te>>>=5,ee-=5,F.ncode=4+(15&te),te>>>=4,ee-=4,286<F.nlen||30<F.ndist){O.msg="too many length or distance symbols",F.mode=30;break}F.have=0,F.mode=18;case 18:for(;F.have<F.ncode;){for(;ee<3;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.lens[Ee[F.have++]]=7&te,te>>>=3,ee-=3}for(;F.have<19;)F.lens[Ee[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,Ae={bits:F.lenbits},ge=c(0,F.lens,0,19,F.lencode,0,F.work,Ae),F.lenbits=Ae.bits,ge){O.msg="invalid code lengths set",F.mode=30;break}F.have=0,F.mode=19;case 19:for(;F.have<F.nlen+F.ndist;){for(;Ce=(oe=F.lencode[te&(1<<F.lenbits)-1])>>>16&255,Ue=65535&oe,!((Ne=oe>>>24)<=ee);){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(Ue<16)te>>>=Ne,ee-=Ne,F.lens[F.have++]=Ue;else{if(Ue===16){for(le=Ne+2;ee<le;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(te>>>=Ne,ee-=Ne,F.have===0){O.msg="invalid bit length repeat",F.mode=30;break}K=F.lens[F.have-1],ce=3+(3&te),te>>>=2,ee-=2}else if(Ue===17){for(le=Ne+3;ee<le;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}ee-=Ne,K=0,ce=3+(7&(te>>>=Ne)),te>>>=3,ee-=3}else{for(le=Ne+7;ee<le;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}ee-=Ne,K=0,ce=11+(127&(te>>>=Ne)),te>>>=7,ee-=7}if(F.have+ce>F.nlen+F.ndist){O.msg="invalid bit length repeat",F.mode=30;break}for(;ce--;)F.lens[F.have++]=K}}if(F.mode===30)break;if(F.lens[256]===0){O.msg="invalid code -- missing end-of-block",F.mode=30;break}if(F.lenbits=9,Ae={bits:F.lenbits},ge=c(u,F.lens,0,F.nlen,F.lencode,0,F.work,Ae),F.lenbits=Ae.bits,ge){O.msg="invalid literal/lengths set",F.mode=30;break}if(F.distbits=6,F.distcode=F.distdyn,Ae={bits:F.distbits},ge=c(d,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,Ae),F.distbits=Ae.bits,ge){O.msg="invalid distances set",F.mode=30;break}if(F.mode=20,V===6)break e;case 20:F.mode=21;case 21:if(6<=ne&&258<=H){O.next_out=$,O.avail_out=H,O.next_in=G,O.avail_in=ne,F.hold=te,F.bits=ee,l(O,he),$=O.next_out,U=O.output,H=O.avail_out,G=O.next_in,J=O.input,ne=O.avail_in,te=F.hold,ee=F.bits,F.mode===12&&(F.back=-1);break}for(F.back=0;Ce=(oe=F.lencode[te&(1<<F.lenbits)-1])>>>16&255,Ue=65535&oe,!((Ne=oe>>>24)<=ee);){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(Ce&&(240&Ce)==0){for(et=Ne,qe=Ce,Re=Ue;Ce=(oe=F.lencode[Re+((te&(1<<et+qe)-1)>>et)])>>>16&255,Ue=65535&oe,!(et+(Ne=oe>>>24)<=ee);){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}te>>>=et,ee-=et,F.back+=et}if(te>>>=Ne,ee-=Ne,F.back+=Ne,F.length=Ue,Ce===0){F.mode=26;break}if(32&Ce){F.back=-1,F.mode=12;break}if(64&Ce){O.msg="invalid literal/length code",F.mode=30;break}F.extra=15&Ce,F.mode=22;case 22:if(F.extra){for(le=F.extra;ee<le;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.length+=te&(1<<F.extra)-1,te>>>=F.extra,ee-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=23;case 23:for(;Ce=(oe=F.distcode[te&(1<<F.distbits)-1])>>>16&255,Ue=65535&oe,!((Ne=oe>>>24)<=ee);){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if((240&Ce)==0){for(et=Ne,qe=Ce,Re=Ue;Ce=(oe=F.distcode[Re+((te&(1<<et+qe)-1)>>et)])>>>16&255,Ue=65535&oe,!(et+(Ne=oe>>>24)<=ee);){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}te>>>=et,ee-=et,F.back+=et}if(te>>>=Ne,ee-=Ne,F.back+=Ne,64&Ce){O.msg="invalid distance code",F.mode=30;break}F.offset=Ue,F.extra=15&Ce,F.mode=24;case 24:if(F.extra){for(le=F.extra;ee<le;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}F.offset+=te&(1<<F.extra)-1,te>>>=F.extra,ee-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){O.msg="invalid distance too far back",F.mode=30;break}F.mode=25;case 25:if(H===0)break e;if(ce=he-H,F.offset>ce){if((ce=F.offset-ce)>F.whave&&F.sane){O.msg="invalid distance too far back",F.mode=30;break}Me=ce>F.wnext?(ce-=F.wnext,F.wsize-ce):F.wnext-ce,ce>F.length&&(ce=F.length),je=F.window}else je=U,Me=$-F.offset,ce=F.length;for(H<ce&&(ce=H),H-=ce,F.length-=ce;U[$++]=je[Me++],--ce;);F.length===0&&(F.mode=21);break;case 26:if(H===0)break e;U[$++]=F.length,H--,F.mode=21;break;case 27:if(F.wrap){for(;ee<32;){if(ne===0)break e;ne--,te|=J[G++]<<ee,ee+=8}if(he-=H,O.total_out+=he,F.total+=he,he&&(O.adler=F.check=F.flags?o(F.check,U,he,$-he):a(F.check,U,he,$-he)),he=H,(F.flags?te:x(te))!==F.check){O.msg="incorrect data check",F.mode=30;break}ee=te=0}F.mode=28;case 28:if(F.wrap&&F.flags){for(;ee<32;){if(ne===0)break e;ne--,te+=J[G++]<<ee,ee+=8}if(te!==(4294967295&F.total)){O.msg="incorrect length check",F.mode=30;break}ee=te=0}F.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return m}return O.next_out=$,O.avail_out=H,O.next_in=G,O.avail_in=ne,F.hold=te,F.bits=ee,(F.wsize||he!==O.avail_out&&F.mode<30&&(F.mode<27||V!==4))&&L(O,O.output,O.next_out,he-O.avail_out)?(F.mode=31,-4):(se-=O.avail_in,he-=O.avail_out,O.total_in+=se,O.total_out+=he,F.total+=he,F.wrap&&he&&(O.adler=F.check=F.flags?o(F.check,U,he,O.next_out-he):a(F.check,U,he,O.next_out-he)),O.data_type=F.bits+(F.last?64:0)+(F.mode===12?128:0)+(F.mode===20||F.mode===15?256:0),(se==0&&he===0||V===4)&&ge===h&&(ge=-5),ge)},i.inflateEnd=function(O){if(!O||!O.state)return m;var V=O.state;return V.window&&(V.window=null),O.state=null,h},i.inflateGetHeader=function(O,V){var F;return O&&O.state?(2&(F=O.state).wrap)==0?m:((F.head=V).done=!1,h):m},i.inflateSetDictionary=function(O,V){var F,J=V.length;return O&&O.state?(F=O.state).wrap!==0&&F.mode!==11?m:F.mode===11&&a(1,V,J,0)!==F.check?-3:L(O,V,J,J)?(F.mode=31,-4):(F.havedict=1,h):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,d,h,m,y,b,v,x){var _,S,C,E,A,R,N,M,P,L=x.bits,O=0,V=0,F=0,J=0,U=0,G=0,$=0,ne=0,H=0,te=0,ee=null,se=0,he=new s.Buf16(16),ce=new s.Buf16(16),Me=null,je=0;for(O=0;O<=15;O++)he[O]=0;for(V=0;V<m;V++)he[d[h+V]]++;for(U=L,J=15;1<=J&&he[J]===0;J--);if(J<U&&(U=J),J===0)return y[b++]=20971520,y[b++]=20971520,x.bits=1,0;for(F=1;F<J&&he[F]===0;F++);for(U<F&&(U=F),O=ne=1;O<=15;O++)if(ne<<=1,(ne-=he[O])<0)return-1;if(0<ne&&(u===0||J!==1))return-1;for(ce[1]=0,O=1;O<15;O++)ce[O+1]=ce[O]+he[O];for(V=0;V<m;V++)d[h+V]!==0&&(v[ce[d[h+V]]++]=V);if(R=u===0?(ee=Me=v,19):u===1?(ee=a,se-=257,Me=o,je-=257,256):(ee=l,Me=c,-1),O=F,A=b,$=V=te=0,C=-1,E=(H=1<<(G=U))-1,u===1&&852<H||u===2&&592<H)return 1;for(;;){for(N=O-$,P=v[V]<R?(M=0,v[V]):v[V]>R?(M=Me[je+v[V]],ee[se+v[V]]):(M=96,0),_=1<<O-$,F=S=1<<G;y[A+(te>>$)+(S-=_)]=N<<24|M<<16|P|0,S!==0;);for(_=1<<O-1;te&_;)_>>=1;if(_!==0?(te&=_-1,te+=_):te=0,V++,--he[O]==0){if(O===J)break;O=d[h+v[V]]}if(U<O&&(te&E)!==C){for($===0&&($=U),A+=F,ne=1<<(G=O-$);G+$<J&&!((ne-=he[G+$])<=0);)G++,ne<<=1;if(H+=1<<G,u===1&&852<H||u===2&&592<H)return 1;y[C=te&E]=U<<24|G<<16|A-b|0}}return te!==0&&(y[A+te]=O-$<<24|64<<16|0),x.bits=U,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),a=0,o=1;function l(oe){for(var ie=oe.length;0<=--ie;)oe[ie]=0}var c=0,u=29,d=256,h=d+1+u,m=30,y=19,b=2*h+1,v=15,x=16,_=7,S=256,C=16,E=17,A=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(2*(h+2));l(L);var O=new Array(2*m);l(O);var V=new Array(512);l(V);var F=new Array(256);l(F);var J=new Array(u);l(J);var U,G,$,ne=new Array(m);function H(oe,ie,Ee,Be,ke){this.static_tree=oe,this.extra_bits=ie,this.extra_base=Ee,this.elems=Be,this.max_length=ke,this.has_stree=oe&&oe.length}function te(oe,ie){this.dyn_tree=oe,this.max_code=0,this.stat_desc=ie}function ee(oe){return oe<256?V[oe]:V[256+(oe>>>7)]}function se(oe,ie){oe.pending_buf[oe.pending++]=255&ie,oe.pending_buf[oe.pending++]=ie>>>8&255}function he(oe,ie,Ee){oe.bi_valid>x-Ee?(oe.bi_buf|=ie<<oe.bi_valid&65535,se(oe,oe.bi_buf),oe.bi_buf=ie>>x-oe.bi_valid,oe.bi_valid+=Ee-x):(oe.bi_buf|=ie<<oe.bi_valid&65535,oe.bi_valid+=Ee)}function ce(oe,ie,Ee){he(oe,Ee[2*ie],Ee[2*ie+1])}function Me(oe,ie){for(var Ee=0;Ee|=1&oe,oe>>>=1,Ee<<=1,0<--ie;);return Ee>>>1}function je(oe,ie,Ee){var Be,ke,ct=new Array(v+1),It=0;for(Be=1;Be<=v;Be++)ct[Be]=It=It+Ee[Be-1]<<1;for(ke=0;ke<=ie;ke++){var ht=oe[2*ke+1];ht!==0&&(oe[2*ke]=Me(ct[ht]++,ht))}}function Ne(oe){var ie;for(ie=0;ie<h;ie++)oe.dyn_ltree[2*ie]=0;for(ie=0;ie<m;ie++)oe.dyn_dtree[2*ie]=0;for(ie=0;ie<y;ie++)oe.bl_tree[2*ie]=0;oe.dyn_ltree[2*S]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function Ce(oe){8<oe.bi_valid?se(oe,oe.bi_buf):0<oe.bi_valid&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function Ue(oe,ie,Ee,Be){var ke=2*ie,ct=2*Ee;return oe[ke]<oe[ct]||oe[ke]===oe[ct]&&Be[ie]<=Be[Ee]}function et(oe,ie,Ee){for(var Be=oe.heap[Ee],ke=Ee<<1;ke<=oe.heap_len&&(ke<oe.heap_len&&Ue(ie,oe.heap[ke+1],oe.heap[ke],oe.depth)&&ke++,!Ue(ie,Be,oe.heap[ke],oe.depth));)oe.heap[Ee]=oe.heap[ke],Ee=ke,ke<<=1;oe.heap[Ee]=Be}function qe(oe,ie,Ee){var Be,ke,ct,It,ht=0;if(oe.last_lit!==0)for(;Be=oe.pending_buf[oe.d_buf+2*ht]<<8|oe.pending_buf[oe.d_buf+2*ht+1],ke=oe.pending_buf[oe.l_buf+ht],ht++,Be===0?ce(oe,ke,ie):(ce(oe,(ct=F[ke])+d+1,ie),(It=R[ct])!==0&&he(oe,ke-=J[ct],It),ce(oe,ct=ee(--Be),Ee),(It=N[ct])!==0&&he(oe,Be-=ne[ct],It)),ht<oe.last_lit;);ce(oe,S,ie)}function Re(oe,ie){var Ee,Be,ke,ct=ie.dyn_tree,It=ie.stat_desc.static_tree,ht=ie.stat_desc.has_stree,Ot=ie.stat_desc.elems,zt=-1;for(oe.heap_len=0,oe.heap_max=b,Ee=0;Ee<Ot;Ee++)ct[2*Ee]!==0?(oe.heap[++oe.heap_len]=zt=Ee,oe.depth[Ee]=0):ct[2*Ee+1]=0;for(;oe.heap_len<2;)ct[2*(ke=oe.heap[++oe.heap_len]=zt<2?++zt:0)]=1,oe.depth[ke]=0,oe.opt_len--,ht&&(oe.static_len-=It[2*ke+1]);for(ie.max_code=zt,Ee=oe.heap_len>>1;1<=Ee;Ee--)et(oe,ct,Ee);for(ke=Ot;Ee=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],et(oe,ct,1),Be=oe.heap[1],oe.heap[--oe.heap_max]=Ee,oe.heap[--oe.heap_max]=Be,ct[2*ke]=ct[2*Ee]+ct[2*Be],oe.depth[ke]=(oe.depth[Ee]>=oe.depth[Be]?oe.depth[Ee]:oe.depth[Be])+1,ct[2*Ee+1]=ct[2*Be+1]=ke,oe.heap[1]=ke++,et(oe,ct,1),2<=oe.heap_len;);oe.heap[--oe.heap_max]=oe.heap[1],function(Bt,rn){var ve,D,Z,pe,Oe,xe,Ie=rn.dyn_tree,de=rn.max_code,bt=rn.stat_desc.static_tree,St=rn.stat_desc.has_stree,z=rn.stat_desc.extra_bits,Ve=rn.stat_desc.extra_base,it=rn.stat_desc.max_length,be=0;for(pe=0;pe<=v;pe++)Bt.bl_count[pe]=0;for(Ie[2*Bt.heap[Bt.heap_max]+1]=0,ve=Bt.heap_max+1;ve<b;ve++)it<(pe=Ie[2*Ie[2*(D=Bt.heap[ve])+1]+1]+1)&&(pe=it,be++),Ie[2*D+1]=pe,de<D||(Bt.bl_count[pe]++,Oe=0,Ve<=D&&(Oe=z[D-Ve]),xe=Ie[2*D],Bt.opt_len+=xe*(pe+Oe),St&&(Bt.static_len+=xe*(bt[2*D+1]+Oe)));if(be!==0){do{for(pe=it-1;Bt.bl_count[pe]===0;)pe--;Bt.bl_count[pe]--,Bt.bl_count[pe+1]+=2,Bt.bl_count[it]--,be-=2}while(0<be);for(pe=it;pe!==0;pe--)for(D=Bt.bl_count[pe];D!==0;)de<(Z=Bt.heap[--ve])||(Ie[2*Z+1]!==pe&&(Bt.opt_len+=(pe-Ie[2*Z+1])*Ie[2*Z],Ie[2*Z+1]=pe),D--)}}(oe,ie),je(ct,zt,oe.bl_count)}function K(oe,ie,Ee){var Be,ke,ct=-1,It=ie[1],ht=0,Ot=7,zt=4;for(It===0&&(Ot=138,zt=3),ie[2*(Ee+1)+1]=65535,Be=0;Be<=Ee;Be++)ke=It,It=ie[2*(Be+1)+1],++ht<Ot&&ke===It||(ht<zt?oe.bl_tree[2*ke]+=ht:ke!==0?(ke!==ct&&oe.bl_tree[2*ke]++,oe.bl_tree[2*C]++):ht<=10?oe.bl_tree[2*E]++:oe.bl_tree[2*A]++,ct=ke,zt=(ht=0)===It?(Ot=138,3):ke===It?(Ot=6,3):(Ot=7,4))}function ge(oe,ie,Ee){var Be,ke,ct=-1,It=ie[1],ht=0,Ot=7,zt=4;for(It===0&&(Ot=138,zt=3),Be=0;Be<=Ee;Be++)if(ke=It,It=ie[2*(Be+1)+1],!(++ht<Ot&&ke===It)){if(ht<zt)for(;ce(oe,ke,oe.bl_tree),--ht!=0;);else ke!==0?(ke!==ct&&(ce(oe,ke,oe.bl_tree),ht--),ce(oe,C,oe.bl_tree),he(oe,ht-3,2)):ht<=10?(ce(oe,E,oe.bl_tree),he(oe,ht-3,3)):(ce(oe,A,oe.bl_tree),he(oe,ht-11,7));ct=ke,zt=(ht=0)===It?(Ot=138,3):ke===It?(Ot=6,3):(Ot=7,4)}}l(ne);var Ae=!1;function le(oe,ie,Ee,Be){he(oe,(c<<1)+(Be?1:0),3),function(ke,ct,It,ht){Ce(ke),se(ke,It),se(ke,~It),s.arraySet(ke.pending_buf,ke.window,ct,It,ke.pending),ke.pending+=It}(oe,ie,Ee)}i._tr_init=function(oe){Ae||(function(){var ie,Ee,Be,ke,ct,It=new Array(v+1);for(ke=Be=0;ke<u-1;ke++)for(J[ke]=Be,ie=0;ie<1<<R[ke];ie++)F[Be++]=ke;for(F[Be-1]=ke,ke=ct=0;ke<16;ke++)for(ne[ke]=ct,ie=0;ie<1<<N[ke];ie++)V[ct++]=ke;for(ct>>=7;ke<m;ke++)for(ne[ke]=ct<<7,ie=0;ie<1<<N[ke]-7;ie++)V[256+ct++]=ke;for(Ee=0;Ee<=v;Ee++)It[Ee]=0;for(ie=0;ie<=143;)L[2*ie+1]=8,ie++,It[8]++;for(;ie<=255;)L[2*ie+1]=9,ie++,It[9]++;for(;ie<=279;)L[2*ie+1]=7,ie++,It[7]++;for(;ie<=287;)L[2*ie+1]=8,ie++,It[8]++;for(je(L,h+1,It),ie=0;ie<m;ie++)O[2*ie+1]=5,O[2*ie]=Me(ie,5);U=new H(L,R,d+1,h,v),G=new H(O,N,0,m,v),$=new H(new Array(0),M,0,y,_)}(),Ae=!0),oe.l_desc=new te(oe.dyn_ltree,U),oe.d_desc=new te(oe.dyn_dtree,G),oe.bl_desc=new te(oe.bl_tree,$),oe.bi_buf=0,oe.bi_valid=0,Ne(oe)},i._tr_stored_block=le,i._tr_flush_block=function(oe,ie,Ee,Be){var ke,ct,It=0;0<oe.level?(oe.strm.data_type===2&&(oe.strm.data_type=function(ht){var Ot,zt=4093624447;for(Ot=0;Ot<=31;Ot++,zt>>>=1)if(1&zt&&ht.dyn_ltree[2*Ot]!==0)return a;if(ht.dyn_ltree[18]!==0||ht.dyn_ltree[20]!==0||ht.dyn_ltree[26]!==0)return o;for(Ot=32;Ot<d;Ot++)if(ht.dyn_ltree[2*Ot]!==0)return o;return a}(oe)),Re(oe,oe.l_desc),Re(oe,oe.d_desc),It=function(ht){var Ot;for(K(ht,ht.dyn_ltree,ht.l_desc.max_code),K(ht,ht.dyn_dtree,ht.d_desc.max_code),Re(ht,ht.bl_desc),Ot=y-1;3<=Ot&&ht.bl_tree[2*P[Ot]+1]===0;Ot--);return ht.opt_len+=3*(Ot+1)+5+5+4,Ot}(oe),ke=oe.opt_len+3+7>>>3,(ct=oe.static_len+3+7>>>3)<=ke&&(ke=ct)):ke=ct=Ee+5,Ee+4<=ke&&ie!==-1?le(oe,ie,Ee,Be):oe.strategy===4||ct===ke?(he(oe,2+(Be?1:0),3),qe(oe,L,O)):(he(oe,4+(Be?1:0),3),function(ht,Ot,zt,Bt){var rn;for(he(ht,Ot-257,5),he(ht,zt-1,5),he(ht,Bt-4,4),rn=0;rn<Bt;rn++)he(ht,ht.bl_tree[2*P[rn]+1],3);ge(ht,ht.dyn_ltree,Ot-1),ge(ht,ht.dyn_dtree,zt-1)}(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,It+1),qe(oe,oe.dyn_ltree,oe.dyn_dtree)),Ne(oe),Be&&Ce(oe)},i._tr_tally=function(oe,ie,Ee){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=ie>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&ie,oe.pending_buf[oe.l_buf+oe.last_lit]=255&Ee,oe.last_lit++,ie===0?oe.dyn_ltree[2*Ee]++:(oe.matches++,ie--,oe.dyn_ltree[2*(F[Ee]+d+1)]++,oe.dyn_dtree[2*ee(ie)]++),oe.last_lit===oe.lit_bufsize-1},i._tr_align=function(oe){he(oe,2,3),ce(oe,S,L),function(ie){ie.bi_valid===16?(se(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):8<=ie.bi_valid&&(ie.pending_buf[ie.pending++]=255&ie.bi_buf,ie.bi_buf>>=8,ie.bi_valid-=8)}(oe)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(a,o){if(!a.setImmediate){var l,c,u,d,h=1,m={},y=!1,b=a.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(a);v=v&&v.setTimeout?v:a,l={}.toString.call(a.process)==="[object process]"?function(C){os.nextTick(function(){_(C)})}:function(){if(a.postMessage&&!a.importScripts){var C=!0,E=a.onmessage;return a.onmessage=function(){C=!1},a.postMessage("","*"),a.onmessage=E,C}}()?(d="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",S,!1):a.attachEvent("onmessage",S),function(C){a.postMessage(d+C,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(C){_(C.data)},function(C){u.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(c=b.documentElement,function(C){var E=b.createElement("script");E.onreadystatechange=function(){_(C),E.onreadystatechange=null,c.removeChild(E),E=null},c.appendChild(E)}):function(C){setTimeout(_,0,C)},v.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var E=new Array(arguments.length-1),A=0;A<E.length;A++)E[A]=arguments[A+1];var R={callback:C,args:E};return m[h]=R,l(h),h++},v.clearImmediate=x}function x(C){delete m[C]}function _(C){if(y)setTimeout(_,0,C);else{var E=m[C];if(E){y=!0;try{(function(A){var R=A.callback,N=A.args;switch(N.length){case 0:R();break;case 1:R(N[0]);break;case 2:R(N[0],N[1]);break;case 3:R(N[0],N[1],N[2]);break;default:R.apply(o,N)}})(E)}finally{x(C),y=!1}}}}function S(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(d)===0&&_(+C.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof mp<"u"?mp:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(QI)),QI.exports}var t2e=e2e();const xO=ma(t2e),vx=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,s)).toFixed(r))+" "+i[s]},Fr=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},fu=(...e)=>Fr(e.map(t=>t.trim()).filter(Boolean).join("/")),xE=e=>{const t=Fr(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},cs=e=>{const t=Fr(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Y3=(e,t)=>Fr(e==="/"?`/${t}`:`${e}/${t}`);var eN,Q$;function n2e(){if(Q$)return eN;Q$=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof os>"u"||typeof os.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,i){if(Array.isArray(t))return this._acquireBatch(t,n,r,i);if(typeof n!="function")throw new Error("You must pass a function to execute");var s=null,a=null,o=null;typeof r!="function"&&(i=r,r=null,o=new this.Promise(function(S,C){s=S,a=C})),i=i||{};var l=!1,c=null,u=null,d=null,h=this,m=function(S,C,E){u&&(clearTimeout(u),u=null),d&&(clearTimeout(d),d=null),S&&(h.queues[t]&&h.queues[t].length===0&&delete h.queues[t],h.domainReentrant&&delete h.domains[t]),l||(o?C?a(C):s(E):typeof r=="function"&&r(C,E),l=!0),S&&h.queues[t]&&h.queues[t].length>0&&h.queues[t].shift()()},y=function(S){if(l)return m(S);c&&(clearTimeout(c),c=null),h.domainReentrant&&S&&(h.domains[t]=os.domain);var C=i.maxExecutionTime||h.maxExecutionTime;if(C&&(d=setTimeout(function(){h.queues[t]&&m(S,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var E=!1;try{n(function(A,R){E||(E=!0,m(S,A,R))})}catch(A){E||(E=!0,m(S,A))}}else h._promiseTry(function(){return n()}).then(function(A){m(S,void 0,A)},function(A){m(S,A)})};h.domainReentrant&&os.domain&&(y=os.domain.bind(y));var b=i.maxPending||h.maxPending;if(!h.queues[t])h.queues[t]=[],y(!0);else if(h.domainReentrant&&os.domain&&os.domain===h.domains[t])y(!1);else if(h.queues[t].length>=b)m(!1,new Error("Too many pending tasks in queue "+t));else{var v=function(){y(!0)};i.skipQueue?h.queues[t].unshift(v):h.queues[t].push(v);var x=i.timeout||h.timeout;x&&(c=setTimeout(function(){c=null,m(!1,new Error("async-lock timed out in queue "+t))},x))}var _=i.maxOccupationTime||h.maxOccupationTime;if(_&&(u=setTimeout(function(){h.queues[t]&&m(!1,new Error("Maximum occupation time is exceeded in queue "+t))},_)),o)return o},e.prototype._acquireBatch=function(t,n,r,i){typeof r!="function"&&(i=r,r=null);var s=this,a=function(l,c){return function(u){s.acquire(l,c,u,i)}},o=t.reduceRight(function(l,c){return a(c,l)},n);if(typeof r=="function")o(r);else return new this.Promise(function(l,c){o.length===1?o(function(u,d){u?c(u):l(d)}):l(o())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},eN=e,eN}var tN,e9;function r2e(){return e9||(e9=1,tN=n2e()),tN}var i2e=r2e();const xx=ma(i2e);var Q_={exports:{}},t9;function s2e(){return t9||(t9=1,typeof Object.create=="function"?Q_.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Q_.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Q_.exports}var nN,n9;function a2e(){if(n9)return nN;n9=1;var e=cO().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var i=this._block,s=this._blockSize,a=n.length,o=this._len,l=0;l<a;){for(var c=o%s,u=Math.min(a-l,s-c),d=0;d<u;d++)i[c+d]=n[l+d];o+=u,l+=u,o%s===0&&this._update(i)}return this._len+=a,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=this._len*8;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var s=(i&4294967295)>>>0,a=(i-s)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var o=this._hash();return n?o.toString(n):o},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},nN=t,nN}var rN,r9;function o2e(){if(r9)return rN;r9=1;var e=s2e(),t=a2e(),n=cO().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function s(){this.init(),this._w=i,t.call(this,64,56)}e(s,t),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function a(u){return u<<1|u>>>31}function o(u){return u<<5|u>>>27}function l(u){return u<<30|u>>>2}function c(u,d,h,m){return u===0?d&h|~d&m:u===2?d&h|d&m|h&m:d^h^m}return s.prototype._update=function(u){for(var d=this._w,h=this._a|0,m=this._b|0,y=this._c|0,b=this._d|0,v=this._e|0,x=0;x<16;++x)d[x]=u.readInt32BE(x*4);for(;x<80;++x)d[x]=a(d[x-3]^d[x-8]^d[x-14]^d[x-16]);for(var _=0;_<80;++_){var S=~~(_/20),C=o(h)+c(S,m,y,b)+v+d[_]+r[S]|0;v=b,b=y,y=l(m),m=h,h=C}this._a=h+this._a|0,this._b=m+this._b|0,this._c=y+this._c|0,this._d=b+this._d|0,this._e=v+this._e|0},s.prototype._hash=function(){var u=n.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},rN=s,rN}var l2e=o2e();const xY=ma(l2e);var iN,i9;function c2e(){if(i9)return iN;i9=1;function e(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function t(i,s){for(var a="",o=0,l=-1,c=0,u,d=0;d<=i.length;++d){if(d<i.length)u=i.charCodeAt(d);else{if(u===47)break;u=47}if(u===47){if(!(l===d-1||c===1))if(l!==d-1&&c===2){if(a.length<2||o!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var h=a.lastIndexOf("/");if(h!==a.length-1){h===-1?(a="",o=0):(a=a.slice(0,h),o=a.length-1-a.lastIndexOf("/")),l=d,c=0;continue}}else if(a.length===2||a.length===1){a="",o=0,l=d,c=0;continue}}s&&(a.length>0?a+="/..":a="..",o=2)}else a.length>0?a+="/"+i.slice(l+1,d):a=i.slice(l+1,d),o=d-l-1;l=d,c=0}else u===46&&c!==-1?++c:c=-1}return a}function n(i,s){var a=s.dir||s.root,o=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+o:a+i+o:o}var r={resolve:function(){for(var s="",a=!1,o,l=arguments.length-1;l>=-1&&!a;l--){var c;l>=0?c=arguments[l]:(o===void 0&&(o=os.cwd()),c=o),e(c),c.length!==0&&(s=c+"/"+s,a=c.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,o=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&o&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var o=arguments[a];e(o),o.length>0&&(s===void 0?s=o:s+="/"+o)}return s===void 0?".":r.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=r.resolve(s),a=r.resolve(a),s===a))return"";for(var o=1;o<s.length&&s.charCodeAt(o)===47;++o);for(var l=s.length,c=l-o,u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var d=a.length,h=d-u,m=c<h?c:h,y=-1,b=0;b<=m;++b){if(b===m){if(h>m){if(a.charCodeAt(u+b)===47)return a.slice(u+b+1);if(b===0)return a.slice(u+b)}else c>m&&(s.charCodeAt(o+b)===47?y=b:b===0&&(y=0));break}var v=s.charCodeAt(o+b),x=a.charCodeAt(u+b);if(v!==x)break;v===47&&(y=b)}var _="";for(b=o+y+1;b<=l;++b)(b===l||s.charCodeAt(b)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+a.slice(u+y):(u+=y,a.charCodeAt(u)===47&&++u,a.slice(u))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),o=a===47,l=-1,c=!0,u=s.length-1;u>=1;--u)if(a=s.charCodeAt(u),a===47){if(!c){l=u;break}}else c=!1;return l===-1?o?"/":".":o&&l===1?"//":s.slice(0,l)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var o=0,l=-1,c=!0,u;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,h=-1;for(u=s.length-1;u>=0;--u){var m=s.charCodeAt(u);if(m===47){if(!c){o=u+1;break}}else h===-1&&(c=!1,h=u+1),d>=0&&(m===a.charCodeAt(d)?--d===-1&&(l=u):(d=-1,l=h))}return o===l?l=h:l===-1&&(l=s.length),s.slice(o,l)}else{for(u=s.length-1;u>=0;--u)if(s.charCodeAt(u)===47){if(!c){o=u+1;break}}else l===-1&&(c=!1,l=u+1);return l===-1?"":s.slice(o,l)}},extname:function(s){e(s);for(var a=-1,o=0,l=-1,c=!0,u=0,d=s.length-1;d>=0;--d){var h=s.charCodeAt(d);if(h===47){if(!c){o=d+1;break}continue}l===-1&&(c=!1,l=d+1),h===46?a===-1?a=d:u!==1&&(u=1):a!==-1&&(u=-1)}return a===-1||l===-1||u===0||u===1&&a===l-1&&a===o+1?"":s.slice(a,l)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var o=s.charCodeAt(0),l=o===47,c;l?(a.root="/",c=1):c=0;for(var u=-1,d=0,h=-1,m=!0,y=s.length-1,b=0;y>=c;--y){if(o=s.charCodeAt(y),o===47){if(!m){d=y+1;break}continue}h===-1&&(m=!1,h=y+1),o===46?u===-1?u=y:b!==1&&(b=1):u!==-1&&(b=-1)}return u===-1||h===-1||b===0||b===1&&u===h-1&&u===d+1?h!==-1&&(d===0&&l?a.base=a.name=s.slice(1,h):a.base=a.name=s.slice(d,h)):(d===0&&l?(a.name=s.slice(1,u),a.base=s.slice(1,h)):(a.name=s.slice(d,u),a.base=s.slice(d,h)),a.ext=s.slice(u,h)),d>0?a.dir=s.slice(0,d-1):l&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,iN=r,iN}var Lt=c2e(),sN={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var s9;function u2e(){return s9||(s9=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var N=0,M=new Array(256),P=0;P!=256;++P)N=P,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,M[P]=N;return typeof Int32Array<"u"?new Int32Array(M):M}var r=n();function i(N){var M=0,P=0,L=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)O[L]=N[L];for(L=0;L!=256;++L)for(P=N[L],M=256+L;M<4096;M+=256)P=O[M]=P>>>8^N[P&255];var V=[];for(L=1;L!=16;++L)V[L-1]=typeof Int32Array<"u"?O.subarray(L*256,L*256+256):O.slice(L*256,L*256+256);return V}var s=i(r),a=s[0],o=s[1],l=s[2],c=s[3],u=s[4],d=s[5],h=s[6],m=s[7],y=s[8],b=s[9],v=s[10],x=s[11],_=s[12],S=s[13],C=s[14];function E(N,M){for(var P=M^-1,L=0,O=N.length;L<O;)P=P>>>8^r[(P^N.charCodeAt(L++))&255];return~P}function A(N,M){for(var P=M^-1,L=N.length-15,O=0;O<L;)P=C[N[O++]^P&255]^S[N[O++]^P>>8&255]^_[N[O++]^P>>16&255]^x[N[O++]^P>>>24]^v[N[O++]]^b[N[O++]]^y[N[O++]]^m[N[O++]]^h[N[O++]]^d[N[O++]]^u[N[O++]]^c[N[O++]]^l[N[O++]]^o[N[O++]]^a[N[O++]]^r[N[O++]];for(L+=15;O<L;)P=P>>>8^r[(P^N[O++])&255];return~P}function R(N,M){for(var P=M^-1,L=0,O=N.length,V=0,F=0;L<O;)V=N.charCodeAt(L++),V<128?P=P>>>8^r[(P^V)&255]:V<2048?(P=P>>>8^r[(P^(192|V>>6&31))&255],P=P>>>8^r[(P^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,F=N.charCodeAt(L++)&1023,P=P>>>8^r[(P^(240|V>>8&7))&255],P=P>>>8^r[(P^(128|V>>2&63))&255],P=P>>>8^r[(P^(128|F>>6&15|(V&3)<<4))&255],P=P>>>8^r[(P^(128|F&63))&255]):(P=P>>>8^r[(P^(224|V>>12&15))&255],P=P>>>8^r[(P^(128|V>>6&63))&255],P=P>>>8^r[(P^(128|V&63))&255]);return~P}t.table=r,t.bstr=E,t.buf=A,t.str=R})}(sN)),sN}var d2e=u2e();const f2e=ma(d2e);var aN={},a9;function wh(){return a9||(a9=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(s,a){return Object.prototype.hasOwnProperty.call(s,a)}e.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var o=a.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)n(o,l)&&(s[l]=o[l])}}return s},e.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var r={arraySet:function(s,a,o,l,c){if(a.subarray&&s.subarray){s.set(a.subarray(o,o+l),c);return}for(var u=0;u<l;u++)s[c+u]=a[o+u]},flattenChunks:function(s){var a,o,l,c,u,d;for(l=0,a=0,o=s.length;a<o;a++)l+=s[a].length;for(d=new Uint8Array(l),c=0,a=0,o=s.length;a<o;a++)u=s[a],d.set(u,c),c+=u.length;return d}},i={arraySet:function(s,a,o,l,c){for(var u=0;u<l;u++)s[c+u]=a[o+u]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)}(aN)),aN}var pg={},Wl={},np={},o9;function h2e(){if(o9)return np;o9=1;var e=wh(),t=4,n=0,r=1,i=2;function s(D){for(var Z=D.length;--Z>=0;)D[Z]=0}var a=0,o=1,l=2,c=3,u=258,d=29,h=256,m=h+1+d,y=30,b=19,v=2*m+1,x=15,_=16,S=7,C=256,E=16,A=17,R=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=512,V=new Array((m+2)*2);s(V);var F=new Array(y*2);s(F);var J=new Array(O);s(J);var U=new Array(u-c+1);s(U);var G=new Array(d);s(G);var $=new Array(y);s($);function ne(D,Z,pe,Oe,xe){this.static_tree=D,this.extra_bits=Z,this.extra_base=pe,this.elems=Oe,this.max_length=xe,this.has_stree=D&&D.length}var H,te,ee;function se(D,Z){this.dyn_tree=D,this.max_code=0,this.stat_desc=Z}function he(D){return D<256?J[D]:J[256+(D>>>7)]}function ce(D,Z){D.pending_buf[D.pending++]=Z&255,D.pending_buf[D.pending++]=Z>>>8&255}function Me(D,Z,pe){D.bi_valid>_-pe?(D.bi_buf|=Z<<D.bi_valid&65535,ce(D,D.bi_buf),D.bi_buf=Z>>_-D.bi_valid,D.bi_valid+=pe-_):(D.bi_buf|=Z<<D.bi_valid&65535,D.bi_valid+=pe)}function je(D,Z,pe){Me(D,pe[Z*2],pe[Z*2+1])}function Ne(D,Z){var pe=0;do pe|=D&1,D>>>=1,pe<<=1;while(--Z>0);return pe>>>1}function Ce(D){D.bi_valid===16?(ce(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):D.bi_valid>=8&&(D.pending_buf[D.pending++]=D.bi_buf&255,D.bi_buf>>=8,D.bi_valid-=8)}function Ue(D,Z){var pe=Z.dyn_tree,Oe=Z.max_code,xe=Z.stat_desc.static_tree,Ie=Z.stat_desc.has_stree,de=Z.stat_desc.extra_bits,bt=Z.stat_desc.extra_base,St=Z.stat_desc.max_length,z,Ve,it,be,_e,ze,Rt=0;for(be=0;be<=x;be++)D.bl_count[be]=0;for(pe[D.heap[D.heap_max]*2+1]=0,z=D.heap_max+1;z<v;z++)Ve=D.heap[z],be=pe[pe[Ve*2+1]*2+1]+1,be>St&&(be=St,Rt++),pe[Ve*2+1]=be,!(Ve>Oe)&&(D.bl_count[be]++,_e=0,Ve>=bt&&(_e=de[Ve-bt]),ze=pe[Ve*2],D.opt_len+=ze*(be+_e),Ie&&(D.static_len+=ze*(xe[Ve*2+1]+_e)));if(Rt!==0){do{for(be=St-1;D.bl_count[be]===0;)be--;D.bl_count[be]--,D.bl_count[be+1]+=2,D.bl_count[St]--,Rt-=2}while(Rt>0);for(be=St;be!==0;be--)for(Ve=D.bl_count[be];Ve!==0;)it=D.heap[--z],!(it>Oe)&&(pe[it*2+1]!==be&&(D.opt_len+=(be-pe[it*2+1])*pe[it*2],pe[it*2+1]=be),Ve--)}}function et(D,Z,pe){var Oe=new Array(x+1),xe=0,Ie,de;for(Ie=1;Ie<=x;Ie++)Oe[Ie]=xe=xe+pe[Ie-1]<<1;for(de=0;de<=Z;de++){var bt=D[de*2+1];bt!==0&&(D[de*2]=Ne(Oe[bt]++,bt))}}function qe(){var D,Z,pe,Oe,xe,Ie=new Array(x+1);for(pe=0,Oe=0;Oe<d-1;Oe++)for(G[Oe]=pe,D=0;D<1<<N[Oe];D++)U[pe++]=Oe;for(U[pe-1]=Oe,xe=0,Oe=0;Oe<16;Oe++)for($[Oe]=xe,D=0;D<1<<M[Oe];D++)J[xe++]=Oe;for(xe>>=7;Oe<y;Oe++)for($[Oe]=xe<<7,D=0;D<1<<M[Oe]-7;D++)J[256+xe++]=Oe;for(Z=0;Z<=x;Z++)Ie[Z]=0;for(D=0;D<=143;)V[D*2+1]=8,D++,Ie[8]++;for(;D<=255;)V[D*2+1]=9,D++,Ie[9]++;for(;D<=279;)V[D*2+1]=7,D++,Ie[7]++;for(;D<=287;)V[D*2+1]=8,D++,Ie[8]++;for(et(V,m+1,Ie),D=0;D<y;D++)F[D*2+1]=5,F[D*2]=Ne(D,5);H=new ne(V,N,h+1,m,x),te=new ne(F,M,0,y,x),ee=new ne(new Array(0),P,0,b,S)}function Re(D){var Z;for(Z=0;Z<m;Z++)D.dyn_ltree[Z*2]=0;for(Z=0;Z<y;Z++)D.dyn_dtree[Z*2]=0;for(Z=0;Z<b;Z++)D.bl_tree[Z*2]=0;D.dyn_ltree[C*2]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function K(D){D.bi_valid>8?ce(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function ge(D,Z,pe,Oe){K(D),ce(D,pe),ce(D,~pe),e.arraySet(D.pending_buf,D.window,Z,pe,D.pending),D.pending+=pe}function Ae(D,Z,pe,Oe){var xe=Z*2,Ie=pe*2;return D[xe]<D[Ie]||D[xe]===D[Ie]&&Oe[Z]<=Oe[pe]}function le(D,Z,pe){for(var Oe=D.heap[pe],xe=pe<<1;xe<=D.heap_len&&(xe<D.heap_len&&Ae(Z,D.heap[xe+1],D.heap[xe],D.depth)&&xe++,!Ae(Z,Oe,D.heap[xe],D.depth));)D.heap[pe]=D.heap[xe],pe=xe,xe<<=1;D.heap[pe]=Oe}function oe(D,Z,pe){var Oe,xe,Ie=0,de,bt;if(D.last_lit!==0)do Oe=D.pending_buf[D.d_buf+Ie*2]<<8|D.pending_buf[D.d_buf+Ie*2+1],xe=D.pending_buf[D.l_buf+Ie],Ie++,Oe===0?je(D,xe,Z):(de=U[xe],je(D,de+h+1,Z),bt=N[de],bt!==0&&(xe-=G[de],Me(D,xe,bt)),Oe--,de=he(Oe),je(D,de,pe),bt=M[de],bt!==0&&(Oe-=$[de],Me(D,Oe,bt)));while(Ie<D.last_lit);je(D,C,Z)}function ie(D,Z){var pe=Z.dyn_tree,Oe=Z.stat_desc.static_tree,xe=Z.stat_desc.has_stree,Ie=Z.stat_desc.elems,de,bt,St=-1,z;for(D.heap_len=0,D.heap_max=v,de=0;de<Ie;de++)pe[de*2]!==0?(D.heap[++D.heap_len]=St=de,D.depth[de]=0):pe[de*2+1]=0;for(;D.heap_len<2;)z=D.heap[++D.heap_len]=St<2?++St:0,pe[z*2]=1,D.depth[z]=0,D.opt_len--,xe&&(D.static_len-=Oe[z*2+1]);for(Z.max_code=St,de=D.heap_len>>1;de>=1;de--)le(D,pe,de);z=Ie;do de=D.heap[1],D.heap[1]=D.heap[D.heap_len--],le(D,pe,1),bt=D.heap[1],D.heap[--D.heap_max]=de,D.heap[--D.heap_max]=bt,pe[z*2]=pe[de*2]+pe[bt*2],D.depth[z]=(D.depth[de]>=D.depth[bt]?D.depth[de]:D.depth[bt])+1,pe[de*2+1]=pe[bt*2+1]=z,D.heap[1]=z++,le(D,pe,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],Ue(D,Z),et(pe,St,D.bl_count)}function Ee(D,Z,pe){var Oe,xe=-1,Ie,de=Z[0*2+1],bt=0,St=7,z=4;for(de===0&&(St=138,z=3),Z[(pe+1)*2+1]=65535,Oe=0;Oe<=pe;Oe++)Ie=de,de=Z[(Oe+1)*2+1],!(++bt<St&&Ie===de)&&(bt<z?D.bl_tree[Ie*2]+=bt:Ie!==0?(Ie!==xe&&D.bl_tree[Ie*2]++,D.bl_tree[E*2]++):bt<=10?D.bl_tree[A*2]++:D.bl_tree[R*2]++,bt=0,xe=Ie,de===0?(St=138,z=3):Ie===de?(St=6,z=3):(St=7,z=4))}function Be(D,Z,pe){var Oe,xe=-1,Ie,de=Z[0*2+1],bt=0,St=7,z=4;for(de===0&&(St=138,z=3),Oe=0;Oe<=pe;Oe++)if(Ie=de,de=Z[(Oe+1)*2+1],!(++bt<St&&Ie===de)){if(bt<z)do je(D,Ie,D.bl_tree);while(--bt!==0);else Ie!==0?(Ie!==xe&&(je(D,Ie,D.bl_tree),bt--),je(D,E,D.bl_tree),Me(D,bt-3,2)):bt<=10?(je(D,A,D.bl_tree),Me(D,bt-3,3)):(je(D,R,D.bl_tree),Me(D,bt-11,7));bt=0,xe=Ie,de===0?(St=138,z=3):Ie===de?(St=6,z=3):(St=7,z=4)}}function ke(D){var Z;for(Ee(D,D.dyn_ltree,D.l_desc.max_code),Ee(D,D.dyn_dtree,D.d_desc.max_code),ie(D,D.bl_desc),Z=b-1;Z>=3&&D.bl_tree[L[Z]*2+1]===0;Z--);return D.opt_len+=3*(Z+1)+5+5+4,Z}function ct(D,Z,pe,Oe){var xe;for(Me(D,Z-257,5),Me(D,pe-1,5),Me(D,Oe-4,4),xe=0;xe<Oe;xe++)Me(D,D.bl_tree[L[xe]*2+1],3);Be(D,D.dyn_ltree,Z-1),Be(D,D.dyn_dtree,pe-1)}function It(D){var Z=4093624447,pe;for(pe=0;pe<=31;pe++,Z>>>=1)if(Z&1&&D.dyn_ltree[pe*2]!==0)return n;if(D.dyn_ltree[9*2]!==0||D.dyn_ltree[10*2]!==0||D.dyn_ltree[13*2]!==0)return r;for(pe=32;pe<h;pe++)if(D.dyn_ltree[pe*2]!==0)return r;return n}var ht=!1;function Ot(D){ht||(qe(),ht=!0),D.l_desc=new se(D.dyn_ltree,H),D.d_desc=new se(D.dyn_dtree,te),D.bl_desc=new se(D.bl_tree,ee),D.bi_buf=0,D.bi_valid=0,Re(D)}function zt(D,Z,pe,Oe){Me(D,(a<<1)+(Oe?1:0),3),ge(D,Z,pe)}function Bt(D){Me(D,o<<1,3),je(D,C,V),Ce(D)}function rn(D,Z,pe,Oe){var xe,Ie,de=0;D.level>0?(D.strm.data_type===i&&(D.strm.data_type=It(D)),ie(D,D.l_desc),ie(D,D.d_desc),de=ke(D),xe=D.opt_len+3+7>>>3,Ie=D.static_len+3+7>>>3,Ie<=xe&&(xe=Ie)):xe=Ie=pe+5,pe+4<=xe&&Z!==-1?zt(D,Z,pe,Oe):D.strategy===t||Ie===xe?(Me(D,(o<<1)+(Oe?1:0),3),oe(D,V,F)):(Me(D,(l<<1)+(Oe?1:0),3),ct(D,D.l_desc.max_code+1,D.d_desc.max_code+1,de+1),oe(D,D.dyn_ltree,D.dyn_dtree)),Re(D),Oe&&K(D)}function ve(D,Z,pe){return D.pending_buf[D.d_buf+D.last_lit*2]=Z>>>8&255,D.pending_buf[D.d_buf+D.last_lit*2+1]=Z&255,D.pending_buf[D.l_buf+D.last_lit]=pe&255,D.last_lit++,Z===0?D.dyn_ltree[pe*2]++:(D.matches++,Z--,D.dyn_ltree[(U[pe]+h+1)*2]++,D.dyn_dtree[he(Z)*2]++),D.last_lit===D.lit_bufsize-1}return np._tr_init=Ot,np._tr_stored_block=zt,np._tr_flush_block=rn,np._tr_tally=ve,np._tr_align=Bt,np}var oN,l9;function wY(){if(l9)return oN;l9=1;function e(t,n,r,i){for(var s=t&65535|0,a=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+n[i++]|0,a=a+s|0;while(--o);s%=65521,a%=65521}return s|a<<16|0}return oN=e,oN}var lN,c9;function _Y(){if(c9)return lN;c9=1;function e(){for(var r,i=[],s=0;s<256;s++){r=s;for(var a=0;a<8;a++)r=r&1?3988292384^r>>>1:r>>>1;i[s]=r}return i}var t=e();function n(r,i,s,a){var o=t,l=a+s;r^=-1;for(var c=a;c<l;c++)r=r>>>8^o[(r^i[c])&255];return r^-1}return lN=n,lN}var cN,u9;function wO(){return u9||(u9=1,cN={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),cN}var d9;function p2e(){if(d9)return Wl;d9=1;var e=wh(),t=h2e(),n=wY(),r=_Y(),i=wO(),s=0,a=1,o=3,l=4,c=5,u=0,d=1,h=-2,m=-3,y=-5,b=-1,v=1,x=2,_=3,S=4,C=0,E=2,A=8,R=9,N=15,M=8,P=29,L=256,O=L+1+P,V=30,F=19,J=2*O+1,U=15,G=3,$=258,ne=$+G+1,H=32,te=42,ee=69,se=73,he=91,ce=103,Me=113,je=666,Ne=1,Ce=2,Ue=3,et=4,qe=3;function Re(z,Ve){return z.msg=i[Ve],Ve}function K(z){return(z<<1)-(z>4?9:0)}function ge(z){for(var Ve=z.length;--Ve>=0;)z[Ve]=0}function Ae(z){var Ve=z.state,it=Ve.pending;it>z.avail_out&&(it=z.avail_out),it!==0&&(e.arraySet(z.output,Ve.pending_buf,Ve.pending_out,it,z.next_out),z.next_out+=it,Ve.pending_out+=it,z.total_out+=it,z.avail_out-=it,Ve.pending-=it,Ve.pending===0&&(Ve.pending_out=0))}function le(z,Ve){t._tr_flush_block(z,z.block_start>=0?z.block_start:-1,z.strstart-z.block_start,Ve),z.block_start=z.strstart,Ae(z.strm)}function oe(z,Ve){z.pending_buf[z.pending++]=Ve}function ie(z,Ve){z.pending_buf[z.pending++]=Ve>>>8&255,z.pending_buf[z.pending++]=Ve&255}function Ee(z,Ve,it,be){var _e=z.avail_in;return _e>be&&(_e=be),_e===0?0:(z.avail_in-=_e,e.arraySet(Ve,z.input,z.next_in,_e,it),z.state.wrap===1?z.adler=n(z.adler,Ve,_e,it):z.state.wrap===2&&(z.adler=r(z.adler,Ve,_e,it)),z.next_in+=_e,z.total_in+=_e,_e)}function Be(z,Ve){var it=z.max_chain_length,be=z.strstart,_e,ze,Rt=z.prev_length,me=z.nice_match,Y=z.strstart>z.w_size-ne?z.strstart-(z.w_size-ne):0,W=z.window,X=z.w_mask,ye=z.prev,Pe=z.strstart+$,We=W[be+Rt-1],xt=W[be+Rt];z.prev_length>=z.good_match&&(it>>=2),me>z.lookahead&&(me=z.lookahead);do if(_e=Ve,!(W[_e+Rt]!==xt||W[_e+Rt-1]!==We||W[_e]!==W[be]||W[++_e]!==W[be+1])){be+=2,_e++;do;while(W[++be]===W[++_e]&&W[++be]===W[++_e]&&W[++be]===W[++_e]&&W[++be]===W[++_e]&&W[++be]===W[++_e]&&W[++be]===W[++_e]&&W[++be]===W[++_e]&&W[++be]===W[++_e]&&be<Pe);if(ze=$-(Pe-be),be=Pe-$,ze>Rt){if(z.match_start=Ve,Rt=ze,ze>=me)break;We=W[be+Rt-1],xt=W[be+Rt]}}while((Ve=ye[Ve&X])>Y&&--it!==0);return Rt<=z.lookahead?Rt:z.lookahead}function ke(z){var Ve=z.w_size,it,be,_e,ze,Rt;do{if(ze=z.window_size-z.lookahead-z.strstart,z.strstart>=Ve+(Ve-ne)){e.arraySet(z.window,z.window,Ve,Ve,0),z.match_start-=Ve,z.strstart-=Ve,z.block_start-=Ve,be=z.hash_size,it=be;do _e=z.head[--it],z.head[it]=_e>=Ve?_e-Ve:0;while(--be);be=Ve,it=be;do _e=z.prev[--it],z.prev[it]=_e>=Ve?_e-Ve:0;while(--be);ze+=Ve}if(z.strm.avail_in===0)break;if(be=Ee(z.strm,z.window,z.strstart+z.lookahead,ze),z.lookahead+=be,z.lookahead+z.insert>=G)for(Rt=z.strstart-z.insert,z.ins_h=z.window[Rt],z.ins_h=(z.ins_h<<z.hash_shift^z.window[Rt+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[Rt+G-1])&z.hash_mask,z.prev[Rt&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=Rt,Rt++,z.insert--,!(z.lookahead+z.insert<G)););}while(z.lookahead<ne&&z.strm.avail_in!==0)}function ct(z,Ve){var it=65535;for(it>z.pending_buf_size-5&&(it=z.pending_buf_size-5);;){if(z.lookahead<=1){if(ke(z),z.lookahead===0&&Ve===s)return Ne;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var be=z.block_start+it;if((z.strstart===0||z.strstart>=be)&&(z.lookahead=z.strstart-be,z.strstart=be,le(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-ne&&(le(z,!1),z.strm.avail_out===0))return Ne}return z.insert=0,Ve===l?(le(z,!0),z.strm.avail_out===0?Ue:et):(z.strstart>z.block_start&&(le(z,!1),z.strm.avail_out===0),Ne)}function It(z,Ve){for(var it,be;;){if(z.lookahead<ne){if(ke(z),z.lookahead<ne&&Ve===s)return Ne;if(z.lookahead===0)break}if(it=0,z.lookahead>=G&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+G-1])&z.hash_mask,it=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),it!==0&&z.strstart-it<=z.w_size-ne&&(z.match_length=Be(z,it)),z.match_length>=G)if(be=t._tr_tally(z,z.strstart-z.match_start,z.match_length-G),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=G){z.match_length--;do z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+G-1])&z.hash_mask,it=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart;while(--z.match_length!==0);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else be=t._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(be&&(le(z,!1),z.strm.avail_out===0))return Ne}return z.insert=z.strstart<G-1?z.strstart:G-1,Ve===l?(le(z,!0),z.strm.avail_out===0?Ue:et):z.last_lit&&(le(z,!1),z.strm.avail_out===0)?Ne:Ce}function ht(z,Ve){for(var it,be,_e;;){if(z.lookahead<ne){if(ke(z),z.lookahead<ne&&Ve===s)return Ne;if(z.lookahead===0)break}if(it=0,z.lookahead>=G&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+G-1])&z.hash_mask,it=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=G-1,it!==0&&z.prev_length<z.max_lazy_match&&z.strstart-it<=z.w_size-ne&&(z.match_length=Be(z,it),z.match_length<=5&&(z.strategy===v||z.match_length===G&&z.strstart-z.match_start>4096)&&(z.match_length=G-1)),z.prev_length>=G&&z.match_length<=z.prev_length){_e=z.strstart+z.lookahead-G,be=t._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-G),z.lookahead-=z.prev_length-1,z.prev_length-=2;do++z.strstart<=_e&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+G-1])&z.hash_mask,it=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart);while(--z.prev_length!==0);if(z.match_available=0,z.match_length=G-1,z.strstart++,be&&(le(z,!1),z.strm.avail_out===0))return Ne}else if(z.match_available){if(be=t._tr_tally(z,0,z.window[z.strstart-1]),be&&le(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return Ne}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(be=t._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<G-1?z.strstart:G-1,Ve===l?(le(z,!0),z.strm.avail_out===0?Ue:et):z.last_lit&&(le(z,!1),z.strm.avail_out===0)?Ne:Ce}function Ot(z,Ve){for(var it,be,_e,ze,Rt=z.window;;){if(z.lookahead<=$){if(ke(z),z.lookahead<=$&&Ve===s)return Ne;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=G&&z.strstart>0&&(_e=z.strstart-1,be=Rt[_e],be===Rt[++_e]&&be===Rt[++_e]&&be===Rt[++_e])){ze=z.strstart+$;do;while(be===Rt[++_e]&&be===Rt[++_e]&&be===Rt[++_e]&&be===Rt[++_e]&&be===Rt[++_e]&&be===Rt[++_e]&&be===Rt[++_e]&&be===Rt[++_e]&&_e<ze);z.match_length=$-(ze-_e),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=G?(it=t._tr_tally(z,1,z.match_length-G),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(it=t._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),it&&(le(z,!1),z.strm.avail_out===0))return Ne}return z.insert=0,Ve===l?(le(z,!0),z.strm.avail_out===0?Ue:et):z.last_lit&&(le(z,!1),z.strm.avail_out===0)?Ne:Ce}function zt(z,Ve){for(var it;;){if(z.lookahead===0&&(ke(z),z.lookahead===0)){if(Ve===s)return Ne;break}if(z.match_length=0,it=t._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,it&&(le(z,!1),z.strm.avail_out===0))return Ne}return z.insert=0,Ve===l?(le(z,!0),z.strm.avail_out===0?Ue:et):z.last_lit&&(le(z,!1),z.strm.avail_out===0)?Ne:Ce}function Bt(z,Ve,it,be,_e){this.good_length=z,this.max_lazy=Ve,this.nice_length=it,this.max_chain=be,this.func=_e}var rn;rn=[new Bt(0,0,0,0,ct),new Bt(4,4,8,4,It),new Bt(4,5,16,8,It),new Bt(4,6,32,32,It),new Bt(4,4,16,16,ht),new Bt(8,16,32,32,ht),new Bt(8,16,128,128,ht),new Bt(8,32,128,256,ht),new Bt(32,128,258,1024,ht),new Bt(32,258,258,4096,ht)];function ve(z){z.window_size=2*z.w_size,ge(z.head),z.max_lazy_match=rn[z.level].max_lazy,z.good_match=rn[z.level].good_length,z.nice_match=rn[z.level].nice_length,z.max_chain_length=rn[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=G-1,z.match_available=0,z.ins_h=0}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(J*2),this.dyn_dtree=new e.Buf16((2*V+1)*2),this.bl_tree=new e.Buf16((2*F+1)*2),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(U+1),this.heap=new e.Buf16(2*O+1),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*O+1),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Z(z){var Ve;return!z||!z.state?Re(z,h):(z.total_in=z.total_out=0,z.data_type=E,Ve=z.state,Ve.pending=0,Ve.pending_out=0,Ve.wrap<0&&(Ve.wrap=-Ve.wrap),Ve.status=Ve.wrap?te:Me,z.adler=Ve.wrap===2?0:1,Ve.last_flush=s,t._tr_init(Ve),u)}function pe(z){var Ve=Z(z);return Ve===u&&ve(z.state),Ve}function Oe(z,Ve){return!z||!z.state||z.state.wrap!==2?h:(z.state.gzhead=Ve,u)}function xe(z,Ve,it,be,_e,ze){if(!z)return h;var Rt=1;if(Ve===b&&(Ve=6),be<0?(Rt=0,be=-be):be>15&&(Rt=2,be-=16),_e<1||_e>R||it!==A||be<8||be>15||Ve<0||Ve>9||ze<0||ze>S)return Re(z,h);be===8&&(be=9);var me=new D;return z.state=me,me.strm=z,me.wrap=Rt,me.gzhead=null,me.w_bits=be,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=_e+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+G-1)/G),me.window=new e.Buf8(me.w_size*2),me.head=new e.Buf16(me.hash_size),me.prev=new e.Buf16(me.w_size),me.lit_bufsize=1<<_e+6,me.pending_buf_size=me.lit_bufsize*4,me.pending_buf=new e.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=Ve,me.strategy=ze,me.method=it,pe(z)}function Ie(z,Ve){return xe(z,Ve,A,N,M,C)}function de(z,Ve){var it,be,_e,ze;if(!z||!z.state||Ve>c||Ve<0)return z?Re(z,h):h;if(be=z.state,!z.output||!z.input&&z.avail_in!==0||be.status===je&&Ve!==l)return Re(z,z.avail_out===0?y:h);if(be.strm=z,it=be.last_flush,be.last_flush=Ve,be.status===te)if(be.wrap===2)z.adler=0,oe(be,31),oe(be,139),oe(be,8),be.gzhead?(oe(be,(be.gzhead.text?1:0)+(be.gzhead.hcrc?2:0)+(be.gzhead.extra?4:0)+(be.gzhead.name?8:0)+(be.gzhead.comment?16:0)),oe(be,be.gzhead.time&255),oe(be,be.gzhead.time>>8&255),oe(be,be.gzhead.time>>16&255),oe(be,be.gzhead.time>>24&255),oe(be,be.level===9?2:be.strategy>=x||be.level<2?4:0),oe(be,be.gzhead.os&255),be.gzhead.extra&&be.gzhead.extra.length&&(oe(be,be.gzhead.extra.length&255),oe(be,be.gzhead.extra.length>>8&255)),be.gzhead.hcrc&&(z.adler=r(z.adler,be.pending_buf,be.pending,0)),be.gzindex=0,be.status=ee):(oe(be,0),oe(be,0),oe(be,0),oe(be,0),oe(be,0),oe(be,be.level===9?2:be.strategy>=x||be.level<2?4:0),oe(be,qe),be.status=Me);else{var Rt=A+(be.w_bits-8<<4)<<8,me=-1;be.strategy>=x||be.level<2?me=0:be.level<6?me=1:be.level===6?me=2:me=3,Rt|=me<<6,be.strstart!==0&&(Rt|=H),Rt+=31-Rt%31,be.status=Me,ie(be,Rt),be.strstart!==0&&(ie(be,z.adler>>>16),ie(be,z.adler&65535)),z.adler=1}if(be.status===ee)if(be.gzhead.extra){for(_e=be.pending;be.gzindex<(be.gzhead.extra.length&65535)&&!(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>_e&&(z.adler=r(z.adler,be.pending_buf,be.pending-_e,_e)),Ae(z),_e=be.pending,be.pending===be.pending_buf_size));)oe(be,be.gzhead.extra[be.gzindex]&255),be.gzindex++;be.gzhead.hcrc&&be.pending>_e&&(z.adler=r(z.adler,be.pending_buf,be.pending-_e,_e)),be.gzindex===be.gzhead.extra.length&&(be.gzindex=0,be.status=se)}else be.status=se;if(be.status===se)if(be.gzhead.name){_e=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>_e&&(z.adler=r(z.adler,be.pending_buf,be.pending-_e,_e)),Ae(z),_e=be.pending,be.pending===be.pending_buf_size)){ze=1;break}be.gzindex<be.gzhead.name.length?ze=be.gzhead.name.charCodeAt(be.gzindex++)&255:ze=0,oe(be,ze)}while(ze!==0);be.gzhead.hcrc&&be.pending>_e&&(z.adler=r(z.adler,be.pending_buf,be.pending-_e,_e)),ze===0&&(be.gzindex=0,be.status=he)}else be.status=he;if(be.status===he)if(be.gzhead.comment){_e=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>_e&&(z.adler=r(z.adler,be.pending_buf,be.pending-_e,_e)),Ae(z),_e=be.pending,be.pending===be.pending_buf_size)){ze=1;break}be.gzindex<be.gzhead.comment.length?ze=be.gzhead.comment.charCodeAt(be.gzindex++)&255:ze=0,oe(be,ze)}while(ze!==0);be.gzhead.hcrc&&be.pending>_e&&(z.adler=r(z.adler,be.pending_buf,be.pending-_e,_e)),ze===0&&(be.status=ce)}else be.status=ce;if(be.status===ce&&(be.gzhead.hcrc?(be.pending+2>be.pending_buf_size&&Ae(z),be.pending+2<=be.pending_buf_size&&(oe(be,z.adler&255),oe(be,z.adler>>8&255),z.adler=0,be.status=Me)):be.status=Me),be.pending!==0){if(Ae(z),z.avail_out===0)return be.last_flush=-1,u}else if(z.avail_in===0&&K(Ve)<=K(it)&&Ve!==l)return Re(z,y);if(be.status===je&&z.avail_in!==0)return Re(z,y);if(z.avail_in!==0||be.lookahead!==0||Ve!==s&&be.status!==je){var Y=be.strategy===x?zt(be,Ve):be.strategy===_?Ot(be,Ve):rn[be.level].func(be,Ve);if((Y===Ue||Y===et)&&(be.status=je),Y===Ne||Y===Ue)return z.avail_out===0&&(be.last_flush=-1),u;if(Y===Ce&&(Ve===a?t._tr_align(be):Ve!==c&&(t._tr_stored_block(be,0,0,!1),Ve===o&&(ge(be.head),be.lookahead===0&&(be.strstart=0,be.block_start=0,be.insert=0))),Ae(z),z.avail_out===0))return be.last_flush=-1,u}return Ve!==l?u:be.wrap<=0?d:(be.wrap===2?(oe(be,z.adler&255),oe(be,z.adler>>8&255),oe(be,z.adler>>16&255),oe(be,z.adler>>24&255),oe(be,z.total_in&255),oe(be,z.total_in>>8&255),oe(be,z.total_in>>16&255),oe(be,z.total_in>>24&255)):(ie(be,z.adler>>>16),ie(be,z.adler&65535)),Ae(z),be.wrap>0&&(be.wrap=-be.wrap),be.pending!==0?u:d)}function bt(z){var Ve;return!z||!z.state?h:(Ve=z.state.status,Ve!==te&&Ve!==ee&&Ve!==se&&Ve!==he&&Ve!==ce&&Ve!==Me&&Ve!==je?Re(z,h):(z.state=null,Ve===Me?Re(z,m):u))}function St(z,Ve){var it=Ve.length,be,_e,ze,Rt,me,Y,W,X;if(!z||!z.state||(be=z.state,Rt=be.wrap,Rt===2||Rt===1&&be.status!==te||be.lookahead))return h;for(Rt===1&&(z.adler=n(z.adler,Ve,it,0)),be.wrap=0,it>=be.w_size&&(Rt===0&&(ge(be.head),be.strstart=0,be.block_start=0,be.insert=0),X=new e.Buf8(be.w_size),e.arraySet(X,Ve,it-be.w_size,be.w_size,0),Ve=X,it=be.w_size),me=z.avail_in,Y=z.next_in,W=z.input,z.avail_in=it,z.next_in=0,z.input=Ve,ke(be);be.lookahead>=G;){_e=be.strstart,ze=be.lookahead-(G-1);do be.ins_h=(be.ins_h<<be.hash_shift^be.window[_e+G-1])&be.hash_mask,be.prev[_e&be.w_mask]=be.head[be.ins_h],be.head[be.ins_h]=_e,_e++;while(--ze);be.strstart=_e,be.lookahead=G-1,ke(be)}return be.strstart+=be.lookahead,be.block_start=be.strstart,be.insert=be.lookahead,be.lookahead=0,be.match_length=be.prev_length=G-1,be.match_available=0,z.next_in=Y,z.input=W,z.avail_in=me,be.wrap=Rt,u}return Wl.deflateInit=Ie,Wl.deflateInit2=xe,Wl.deflateReset=pe,Wl.deflateResetKeep=Z,Wl.deflateSetHeader=Oe,Wl.deflate=de,Wl.deflateEnd=bt,Wl.deflateSetDictionary=St,Wl.deflateInfo="pako deflate (from Nodeca project)",Wl}var rp={},f9;function SY(){if(f9)return rp;f9=1;var e=wh(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),i=0;i<256;i++)r[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;r[254]=r[254]=1,rp.string2buf=function(a){var o,l,c,u,d,h=a.length,m=0;for(u=0;u<h;u++)l=a.charCodeAt(u),(l&64512)===55296&&u+1<h&&(c=a.charCodeAt(u+1),(c&64512)===56320&&(l=65536+(l-55296<<10)+(c-56320),u++)),m+=l<128?1:l<2048?2:l<65536?3:4;for(o=new e.Buf8(m),d=0,u=0;d<m;u++)l=a.charCodeAt(u),(l&64512)===55296&&u+1<h&&(c=a.charCodeAt(u+1),(c&64512)===56320&&(l=65536+(l-55296<<10)+(c-56320),u++)),l<128?o[d++]=l:l<2048?(o[d++]=192|l>>>6,o[d++]=128|l&63):l<65536?(o[d++]=224|l>>>12,o[d++]=128|l>>>6&63,o[d++]=128|l&63):(o[d++]=240|l>>>18,o[d++]=128|l>>>12&63,o[d++]=128|l>>>6&63,o[d++]=128|l&63);return o};function s(a,o){if(o<65534&&(a.subarray&&n||!a.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(a,o));for(var l="",c=0;c<o;c++)l+=String.fromCharCode(a[c]);return l}return rp.buf2binstring=function(a){return s(a,a.length)},rp.binstring2buf=function(a){for(var o=new e.Buf8(a.length),l=0,c=o.length;l<c;l++)o[l]=a.charCodeAt(l);return o},rp.buf2string=function(a,o){var l,c,u,d,h=o||a.length,m=new Array(h*2);for(c=0,l=0;l<h;){if(u=a[l++],u<128){m[c++]=u;continue}if(d=r[u],d>4){m[c++]=65533,l+=d-1;continue}for(u&=d===2?31:d===3?15:7;d>1&&l<h;)u=u<<6|a[l++]&63,d--;if(d>1){m[c++]=65533;continue}u<65536?m[c++]=u:(u-=65536,m[c++]=55296|u>>10&1023,m[c++]=56320|u&1023)}return s(m,c)},rp.utf8border=function(a,o){var l;for(o=o||a.length,o>a.length&&(o=a.length),l=o-1;l>=0&&(a[l]&192)===128;)l--;return l<0||l===0?o:l+r[a[l]]>o?l:o},rp}var uN,h9;function CY(){if(h9)return uN;h9=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return uN=e,uN}var p9;function m2e(){if(p9)return pg;p9=1;var e=p2e(),t=wh(),n=SY(),r=wO(),i=CY(),s=Object.prototype.toString,a=0,o=4,l=0,c=1,u=2,d=-1,h=0,m=8;function y(_){if(!(this instanceof y))return new y(_);this.options=t.assign({level:d,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},_||{});var S=this.options;S.raw&&S.windowBits>0?S.windowBits=-S.windowBits:S.gzip&&S.windowBits>0&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(C!==l)throw new Error(r[C]);if(S.header&&e.deflateSetHeader(this.strm,S.header),S.dictionary){var E;if(typeof S.dictionary=="string"?E=n.string2buf(S.dictionary):s.call(S.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(S.dictionary):E=S.dictionary,C=e.deflateSetDictionary(this.strm,E),C!==l)throw new Error(r[C]);this._dict_set=!0}}y.prototype.push=function(_,S){var C=this.strm,E=this.options.chunkSize,A,R;if(this.ended)return!1;R=S===~~S?S:S===!0?o:a,typeof _=="string"?C.input=n.string2buf(_):s.call(_)==="[object ArrayBuffer]"?C.input=new Uint8Array(_):C.input=_,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(E),C.next_out=0,C.avail_out=E),A=e.deflate(C,R),A!==c&&A!==l)return this.onEnd(A),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(R===o||R===u))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&A!==c);return R===o?(A=e.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===l):(R===u&&(this.onEnd(l),C.avail_out=0),!0)},y.prototype.onData=function(_){this.chunks.push(_)},y.prototype.onEnd=function(_){_===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function b(_,S){var C=new y(S);if(C.push(_,!0),C.err)throw C.msg||r[C.err];return C.result}function v(_,S){return S=S||{},S.raw=!0,b(_,S)}function x(_,S){return S=S||{},S.gzip=!0,b(_,S)}return pg.Deflate=y,pg.deflate=b,pg.deflateRaw=v,pg.gzip=x,pg}var mg={},fl={},dN,m9;function g2e(){if(m9)return dN;m9=1;var e=30,t=12;return dN=function(r,i){var s,a,o,l,c,u,d,h,m,y,b,v,x,_,S,C,E,A,R,N,M,P,L,O,V;s=r.state,a=r.next_in,O=r.input,o=a+(r.avail_in-5),l=r.next_out,V=r.output,c=l-(i-r.avail_out),u=l+(r.avail_out-257),d=s.dmax,h=s.wsize,m=s.whave,y=s.wnext,b=s.window,v=s.hold,x=s.bits,_=s.lencode,S=s.distcode,C=(1<<s.lenbits)-1,E=(1<<s.distbits)-1;e:do{x<15&&(v+=O[a++]<<x,x+=8,v+=O[a++]<<x,x+=8),A=_[v&C];t:for(;;){if(R=A>>>24,v>>>=R,x-=R,R=A>>>16&255,R===0)V[l++]=A&65535;else if(R&16){N=A&65535,R&=15,R&&(x<R&&(v+=O[a++]<<x,x+=8),N+=v&(1<<R)-1,v>>>=R,x-=R),x<15&&(v+=O[a++]<<x,x+=8,v+=O[a++]<<x,x+=8),A=S[v&E];n:for(;;){if(R=A>>>24,v>>>=R,x-=R,R=A>>>16&255,R&16){if(M=A&65535,R&=15,x<R&&(v+=O[a++]<<x,x+=8,x<R&&(v+=O[a++]<<x,x+=8)),M+=v&(1<<R)-1,M>d){r.msg="invalid distance too far back",s.mode=e;break e}if(v>>>=R,x-=R,R=l-c,M>R){if(R=M-R,R>m&&s.sane){r.msg="invalid distance too far back",s.mode=e;break e}if(P=0,L=b,y===0){if(P+=h-R,R<N){N-=R;do V[l++]=b[P++];while(--R);P=l-M,L=V}}else if(y<R){if(P+=h+y-R,R-=y,R<N){N-=R;do V[l++]=b[P++];while(--R);if(P=0,y<N){R=y,N-=R;do V[l++]=b[P++];while(--R);P=l-M,L=V}}}else if(P+=y-R,R<N){N-=R;do V[l++]=b[P++];while(--R);P=l-M,L=V}for(;N>2;)V[l++]=L[P++],V[l++]=L[P++],V[l++]=L[P++],N-=3;N&&(V[l++]=L[P++],N>1&&(V[l++]=L[P++]))}else{P=l-M;do V[l++]=V[P++],V[l++]=V[P++],V[l++]=V[P++],N-=3;while(N>2);N&&(V[l++]=V[P++],N>1&&(V[l++]=V[P++]))}}else if((R&64)===0){A=S[(A&65535)+(v&(1<<R)-1)];continue n}else{r.msg="invalid distance code",s.mode=e;break e}break}}else if((R&64)===0){A=_[(A&65535)+(v&(1<<R)-1)];continue t}else if(R&32){s.mode=t;break e}else{r.msg="invalid literal/length code",s.mode=e;break e}break}}while(a<o&&l<u);N=x>>3,a-=N,x-=N<<3,v&=(1<<x)-1,r.next_in=a,r.next_out=l,r.avail_in=a<o?5+(o-a):5-(a-o),r.avail_out=l<u?257+(u-l):257-(l-u),s.hold=v,s.bits=x},dN}var fN,g9;function y2e(){if(g9)return fN;g9=1;var e=wh(),t=15,n=852,r=592,i=0,s=1,a=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return fN=function(h,m,y,b,v,x,_,S){var C=S.bits,E=0,A=0,R=0,N=0,M=0,P=0,L=0,O=0,V=0,F=0,J,U,G,$,ne,H=null,te=0,ee,se=new e.Buf16(t+1),he=new e.Buf16(t+1),ce=null,Me=0,je,Ne,Ce;for(E=0;E<=t;E++)se[E]=0;for(A=0;A<b;A++)se[m[y+A]]++;for(M=C,N=t;N>=1&&se[N]===0;N--);if(M>N&&(M=N),N===0)return v[x++]=1<<24|64<<16|0,v[x++]=1<<24|64<<16|0,S.bits=1,0;for(R=1;R<N&&se[R]===0;R++);for(M<R&&(M=R),O=1,E=1;E<=t;E++)if(O<<=1,O-=se[E],O<0)return-1;if(O>0&&(h===i||N!==1))return-1;for(he[1]=0,E=1;E<t;E++)he[E+1]=he[E]+se[E];for(A=0;A<b;A++)m[y+A]!==0&&(_[he[m[y+A]]++]=A);if(h===i?(H=ce=_,ee=19):h===s?(H=o,te-=257,ce=l,Me-=257,ee=256):(H=c,ce=u,ee=-1),F=0,A=0,E=R,ne=x,P=M,L=0,G=-1,V=1<<M,$=V-1,h===s&&V>n||h===a&&V>r)return 1;for(;;){je=E-L,_[A]<ee?(Ne=0,Ce=_[A]):_[A]>ee?(Ne=ce[Me+_[A]],Ce=H[te+_[A]]):(Ne=96,Ce=0),J=1<<E-L,U=1<<P,R=U;do U-=J,v[ne+(F>>L)+U]=je<<24|Ne<<16|Ce|0;while(U!==0);for(J=1<<E-1;F&J;)J>>=1;if(J!==0?(F&=J-1,F+=J):F=0,A++,--se[E]===0){if(E===N)break;E=m[y+_[A]]}if(E>M&&(F&$)!==G){for(L===0&&(L=M),ne+=R,P=E-L,O=1<<P;P+L<N&&(O-=se[P+L],!(O<=0));)P++,O<<=1;if(V+=1<<P,h===s&&V>n||h===a&&V>r)return 1;G=F&$,v[G]=M<<24|P<<16|ne-x|0}}return F!==0&&(v[ne+F]=E-L<<24|64<<16|0),S.bits=M,0},fN}var y9;function b2e(){if(y9)return fl;y9=1;var e=wh(),t=wY(),n=_Y(),r=g2e(),i=y2e(),s=0,a=1,o=2,l=4,c=5,u=6,d=0,h=1,m=2,y=-2,b=-3,v=-4,x=-5,_=8,S=1,C=2,E=3,A=4,R=5,N=6,M=7,P=8,L=9,O=10,V=11,F=12,J=13,U=14,G=15,$=16,ne=17,H=18,te=19,ee=20,se=21,he=22,ce=23,Me=24,je=25,Ne=26,Ce=27,Ue=28,et=29,qe=30,Re=31,K=32,ge=852,Ae=592,le=15,oe=le;function ie(xe){return(xe>>>24&255)+(xe>>>8&65280)+((xe&65280)<<8)+((xe&255)<<24)}function Ee(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Be(xe){var Ie;return!xe||!xe.state?y:(Ie=xe.state,xe.total_in=xe.total_out=Ie.total=0,xe.msg="",Ie.wrap&&(xe.adler=Ie.wrap&1),Ie.mode=S,Ie.last=0,Ie.havedict=0,Ie.dmax=32768,Ie.head=null,Ie.hold=0,Ie.bits=0,Ie.lencode=Ie.lendyn=new e.Buf32(ge),Ie.distcode=Ie.distdyn=new e.Buf32(Ae),Ie.sane=1,Ie.back=-1,d)}function ke(xe){var Ie;return!xe||!xe.state?y:(Ie=xe.state,Ie.wsize=0,Ie.whave=0,Ie.wnext=0,Be(xe))}function ct(xe,Ie){var de,bt;return!xe||!xe.state||(bt=xe.state,Ie<0?(de=0,Ie=-Ie):(de=(Ie>>4)+1,Ie<48&&(Ie&=15)),Ie&&(Ie<8||Ie>15))?y:(bt.window!==null&&bt.wbits!==Ie&&(bt.window=null),bt.wrap=de,bt.wbits=Ie,ke(xe))}function It(xe,Ie){var de,bt;return xe?(bt=new Ee,xe.state=bt,bt.window=null,de=ct(xe,Ie),de!==d&&(xe.state=null),de):y}function ht(xe){return It(xe,oe)}var Ot=!0,zt,Bt;function rn(xe){if(Ot){var Ie;for(zt=new e.Buf32(512),Bt=new e.Buf32(32),Ie=0;Ie<144;)xe.lens[Ie++]=8;for(;Ie<256;)xe.lens[Ie++]=9;for(;Ie<280;)xe.lens[Ie++]=7;for(;Ie<288;)xe.lens[Ie++]=8;for(i(a,xe.lens,0,288,zt,0,xe.work,{bits:9}),Ie=0;Ie<32;)xe.lens[Ie++]=5;i(o,xe.lens,0,32,Bt,0,xe.work,{bits:5}),Ot=!1}xe.lencode=zt,xe.lenbits=9,xe.distcode=Bt,xe.distbits=5}function ve(xe,Ie,de,bt){var St,z=xe.state;return z.window===null&&(z.wsize=1<<z.wbits,z.wnext=0,z.whave=0,z.window=new e.Buf8(z.wsize)),bt>=z.wsize?(e.arraySet(z.window,Ie,de-z.wsize,z.wsize,0),z.wnext=0,z.whave=z.wsize):(St=z.wsize-z.wnext,St>bt&&(St=bt),e.arraySet(z.window,Ie,de-bt,St,z.wnext),bt-=St,bt?(e.arraySet(z.window,Ie,de-bt,bt,0),z.wnext=bt,z.whave=z.wsize):(z.wnext+=St,z.wnext===z.wsize&&(z.wnext=0),z.whave<z.wsize&&(z.whave+=St))),0}function D(xe,Ie){var de,bt,St,z,Ve,it,be,_e,ze,Rt,me,Y,W,X,ye=0,Pe,We,xt,Qt,Fn,Zt,tn,cn,dr=new e.Buf8(4),Cr,Jr,Qr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!xe||!xe.state||!xe.output||!xe.input&&xe.avail_in!==0)return y;de=xe.state,de.mode===F&&(de.mode=J),Ve=xe.next_out,St=xe.output,be=xe.avail_out,z=xe.next_in,bt=xe.input,it=xe.avail_in,_e=de.hold,ze=de.bits,Rt=it,me=be,cn=d;e:for(;;)switch(de.mode){case S:if(de.wrap===0){de.mode=J;break}for(;ze<16;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}if(de.wrap&2&&_e===35615){de.check=0,dr[0]=_e&255,dr[1]=_e>>>8&255,de.check=n(de.check,dr,2,0),_e=0,ze=0,de.mode=C;break}if(de.flags=0,de.head&&(de.head.done=!1),!(de.wrap&1)||(((_e&255)<<8)+(_e>>8))%31){xe.msg="incorrect header check",de.mode=qe;break}if((_e&15)!==_){xe.msg="unknown compression method",de.mode=qe;break}if(_e>>>=4,ze-=4,tn=(_e&15)+8,de.wbits===0)de.wbits=tn;else if(tn>de.wbits){xe.msg="invalid window size",de.mode=qe;break}de.dmax=1<<tn,xe.adler=de.check=1,de.mode=_e&512?O:F,_e=0,ze=0;break;case C:for(;ze<16;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}if(de.flags=_e,(de.flags&255)!==_){xe.msg="unknown compression method",de.mode=qe;break}if(de.flags&57344){xe.msg="unknown header flags set",de.mode=qe;break}de.head&&(de.head.text=_e>>8&1),de.flags&512&&(dr[0]=_e&255,dr[1]=_e>>>8&255,de.check=n(de.check,dr,2,0)),_e=0,ze=0,de.mode=E;case E:for(;ze<32;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}de.head&&(de.head.time=_e),de.flags&512&&(dr[0]=_e&255,dr[1]=_e>>>8&255,dr[2]=_e>>>16&255,dr[3]=_e>>>24&255,de.check=n(de.check,dr,4,0)),_e=0,ze=0,de.mode=A;case A:for(;ze<16;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}de.head&&(de.head.xflags=_e&255,de.head.os=_e>>8),de.flags&512&&(dr[0]=_e&255,dr[1]=_e>>>8&255,de.check=n(de.check,dr,2,0)),_e=0,ze=0,de.mode=R;case R:if(de.flags&1024){for(;ze<16;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}de.length=_e,de.head&&(de.head.extra_len=_e),de.flags&512&&(dr[0]=_e&255,dr[1]=_e>>>8&255,de.check=n(de.check,dr,2,0)),_e=0,ze=0}else de.head&&(de.head.extra=null);de.mode=N;case N:if(de.flags&1024&&(Y=de.length,Y>it&&(Y=it),Y&&(de.head&&(tn=de.head.extra_len-de.length,de.head.extra||(de.head.extra=new Array(de.head.extra_len)),e.arraySet(de.head.extra,bt,z,Y,tn)),de.flags&512&&(de.check=n(de.check,bt,Y,z)),it-=Y,z+=Y,de.length-=Y),de.length))break e;de.length=0,de.mode=M;case M:if(de.flags&2048){if(it===0)break e;Y=0;do tn=bt[z+Y++],de.head&&tn&&de.length<65536&&(de.head.name+=String.fromCharCode(tn));while(tn&&Y<it);if(de.flags&512&&(de.check=n(de.check,bt,Y,z)),it-=Y,z+=Y,tn)break e}else de.head&&(de.head.name=null);de.length=0,de.mode=P;case P:if(de.flags&4096){if(it===0)break e;Y=0;do tn=bt[z+Y++],de.head&&tn&&de.length<65536&&(de.head.comment+=String.fromCharCode(tn));while(tn&&Y<it);if(de.flags&512&&(de.check=n(de.check,bt,Y,z)),it-=Y,z+=Y,tn)break e}else de.head&&(de.head.comment=null);de.mode=L;case L:if(de.flags&512){for(;ze<16;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}if(_e!==(de.check&65535)){xe.msg="header crc mismatch",de.mode=qe;break}_e=0,ze=0}de.head&&(de.head.hcrc=de.flags>>9&1,de.head.done=!0),xe.adler=de.check=0,de.mode=F;break;case O:for(;ze<32;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}xe.adler=de.check=ie(_e),_e=0,ze=0,de.mode=V;case V:if(de.havedict===0)return xe.next_out=Ve,xe.avail_out=be,xe.next_in=z,xe.avail_in=it,de.hold=_e,de.bits=ze,m;xe.adler=de.check=1,de.mode=F;case F:if(Ie===c||Ie===u)break e;case J:if(de.last){_e>>>=ze&7,ze-=ze&7,de.mode=Ce;break}for(;ze<3;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}switch(de.last=_e&1,_e>>>=1,ze-=1,_e&3){case 0:de.mode=U;break;case 1:if(rn(de),de.mode=ee,Ie===u){_e>>>=2,ze-=2;break e}break;case 2:de.mode=ne;break;case 3:xe.msg="invalid block type",de.mode=qe}_e>>>=2,ze-=2;break;case U:for(_e>>>=ze&7,ze-=ze&7;ze<32;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}if((_e&65535)!==(_e>>>16^65535)){xe.msg="invalid stored block lengths",de.mode=qe;break}if(de.length=_e&65535,_e=0,ze=0,de.mode=G,Ie===u)break e;case G:de.mode=$;case $:if(Y=de.length,Y){if(Y>it&&(Y=it),Y>be&&(Y=be),Y===0)break e;e.arraySet(St,bt,z,Y,Ve),it-=Y,z+=Y,be-=Y,Ve+=Y,de.length-=Y;break}de.mode=F;break;case ne:for(;ze<14;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}if(de.nlen=(_e&31)+257,_e>>>=5,ze-=5,de.ndist=(_e&31)+1,_e>>>=5,ze-=5,de.ncode=(_e&15)+4,_e>>>=4,ze-=4,de.nlen>286||de.ndist>30){xe.msg="too many length or distance symbols",de.mode=qe;break}de.have=0,de.mode=H;case H:for(;de.have<de.ncode;){for(;ze<3;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}de.lens[Qr[de.have++]]=_e&7,_e>>>=3,ze-=3}for(;de.have<19;)de.lens[Qr[de.have++]]=0;if(de.lencode=de.lendyn,de.lenbits=7,Cr={bits:de.lenbits},cn=i(s,de.lens,0,19,de.lencode,0,de.work,Cr),de.lenbits=Cr.bits,cn){xe.msg="invalid code lengths set",de.mode=qe;break}de.have=0,de.mode=te;case te:for(;de.have<de.nlen+de.ndist;){for(;ye=de.lencode[_e&(1<<de.lenbits)-1],Pe=ye>>>24,We=ye>>>16&255,xt=ye&65535,!(Pe<=ze);){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}if(xt<16)_e>>>=Pe,ze-=Pe,de.lens[de.have++]=xt;else{if(xt===16){for(Jr=Pe+2;ze<Jr;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}if(_e>>>=Pe,ze-=Pe,de.have===0){xe.msg="invalid bit length repeat",de.mode=qe;break}tn=de.lens[de.have-1],Y=3+(_e&3),_e>>>=2,ze-=2}else if(xt===17){for(Jr=Pe+3;ze<Jr;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}_e>>>=Pe,ze-=Pe,tn=0,Y=3+(_e&7),_e>>>=3,ze-=3}else{for(Jr=Pe+7;ze<Jr;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}_e>>>=Pe,ze-=Pe,tn=0,Y=11+(_e&127),_e>>>=7,ze-=7}if(de.have+Y>de.nlen+de.ndist){xe.msg="invalid bit length repeat",de.mode=qe;break}for(;Y--;)de.lens[de.have++]=tn}}if(de.mode===qe)break;if(de.lens[256]===0){xe.msg="invalid code -- missing end-of-block",de.mode=qe;break}if(de.lenbits=9,Cr={bits:de.lenbits},cn=i(a,de.lens,0,de.nlen,de.lencode,0,de.work,Cr),de.lenbits=Cr.bits,cn){xe.msg="invalid literal/lengths set",de.mode=qe;break}if(de.distbits=6,de.distcode=de.distdyn,Cr={bits:de.distbits},cn=i(o,de.lens,de.nlen,de.ndist,de.distcode,0,de.work,Cr),de.distbits=Cr.bits,cn){xe.msg="invalid distances set",de.mode=qe;break}if(de.mode=ee,Ie===u)break e;case ee:de.mode=se;case se:if(it>=6&&be>=258){xe.next_out=Ve,xe.avail_out=be,xe.next_in=z,xe.avail_in=it,de.hold=_e,de.bits=ze,r(xe,me),Ve=xe.next_out,St=xe.output,be=xe.avail_out,z=xe.next_in,bt=xe.input,it=xe.avail_in,_e=de.hold,ze=de.bits,de.mode===F&&(de.back=-1);break}for(de.back=0;ye=de.lencode[_e&(1<<de.lenbits)-1],Pe=ye>>>24,We=ye>>>16&255,xt=ye&65535,!(Pe<=ze);){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}if(We&&(We&240)===0){for(Qt=Pe,Fn=We,Zt=xt;ye=de.lencode[Zt+((_e&(1<<Qt+Fn)-1)>>Qt)],Pe=ye>>>24,We=ye>>>16&255,xt=ye&65535,!(Qt+Pe<=ze);){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}_e>>>=Qt,ze-=Qt,de.back+=Qt}if(_e>>>=Pe,ze-=Pe,de.back+=Pe,de.length=xt,We===0){de.mode=Ne;break}if(We&32){de.back=-1,de.mode=F;break}if(We&64){xe.msg="invalid literal/length code",de.mode=qe;break}de.extra=We&15,de.mode=he;case he:if(de.extra){for(Jr=de.extra;ze<Jr;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}de.length+=_e&(1<<de.extra)-1,_e>>>=de.extra,ze-=de.extra,de.back+=de.extra}de.was=de.length,de.mode=ce;case ce:for(;ye=de.distcode[_e&(1<<de.distbits)-1],Pe=ye>>>24,We=ye>>>16&255,xt=ye&65535,!(Pe<=ze);){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}if((We&240)===0){for(Qt=Pe,Fn=We,Zt=xt;ye=de.distcode[Zt+((_e&(1<<Qt+Fn)-1)>>Qt)],Pe=ye>>>24,We=ye>>>16&255,xt=ye&65535,!(Qt+Pe<=ze);){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}_e>>>=Qt,ze-=Qt,de.back+=Qt}if(_e>>>=Pe,ze-=Pe,de.back+=Pe,We&64){xe.msg="invalid distance code",de.mode=qe;break}de.offset=xt,de.extra=We&15,de.mode=Me;case Me:if(de.extra){for(Jr=de.extra;ze<Jr;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}de.offset+=_e&(1<<de.extra)-1,_e>>>=de.extra,ze-=de.extra,de.back+=de.extra}if(de.offset>de.dmax){xe.msg="invalid distance too far back",de.mode=qe;break}de.mode=je;case je:if(be===0)break e;if(Y=me-be,de.offset>Y){if(Y=de.offset-Y,Y>de.whave&&de.sane){xe.msg="invalid distance too far back",de.mode=qe;break}Y>de.wnext?(Y-=de.wnext,W=de.wsize-Y):W=de.wnext-Y,Y>de.length&&(Y=de.length),X=de.window}else X=St,W=Ve-de.offset,Y=de.length;Y>be&&(Y=be),be-=Y,de.length-=Y;do St[Ve++]=X[W++];while(--Y);de.length===0&&(de.mode=se);break;case Ne:if(be===0)break e;St[Ve++]=de.length,be--,de.mode=se;break;case Ce:if(de.wrap){for(;ze<32;){if(it===0)break e;it--,_e|=bt[z++]<<ze,ze+=8}if(me-=be,xe.total_out+=me,de.total+=me,me&&(xe.adler=de.check=de.flags?n(de.check,St,me,Ve-me):t(de.check,St,me,Ve-me)),me=be,(de.flags?_e:ie(_e))!==de.check){xe.msg="incorrect data check",de.mode=qe;break}_e=0,ze=0}de.mode=Ue;case Ue:if(de.wrap&&de.flags){for(;ze<32;){if(it===0)break e;it--,_e+=bt[z++]<<ze,ze+=8}if(_e!==(de.total&4294967295)){xe.msg="incorrect length check",de.mode=qe;break}_e=0,ze=0}de.mode=et;case et:cn=h;break e;case qe:cn=b;break e;case Re:return v;case K:default:return y}return xe.next_out=Ve,xe.avail_out=be,xe.next_in=z,xe.avail_in=it,de.hold=_e,de.bits=ze,(de.wsize||me!==xe.avail_out&&de.mode<qe&&(de.mode<Ce||Ie!==l))&&ve(xe,xe.output,xe.next_out,me-xe.avail_out),Rt-=xe.avail_in,me-=xe.avail_out,xe.total_in+=Rt,xe.total_out+=me,de.total+=me,de.wrap&&me&&(xe.adler=de.check=de.flags?n(de.check,St,me,xe.next_out-me):t(de.check,St,me,xe.next_out-me)),xe.data_type=de.bits+(de.last?64:0)+(de.mode===F?128:0)+(de.mode===ee||de.mode===G?256:0),(Rt===0&&me===0||Ie===l)&&cn===d&&(cn=x),cn}function Z(xe){if(!xe||!xe.state)return y;var Ie=xe.state;return Ie.window&&(Ie.window=null),xe.state=null,d}function pe(xe,Ie){var de;return!xe||!xe.state||(de=xe.state,(de.wrap&2)===0)?y:(de.head=Ie,Ie.done=!1,d)}function Oe(xe,Ie){var de=Ie.length,bt,St,z;return!xe||!xe.state||(bt=xe.state,bt.wrap!==0&&bt.mode!==V)?y:bt.mode===V&&(St=1,St=t(St,Ie,de,0),St!==bt.check)?b:(z=ve(xe,Ie,de,de),z?(bt.mode=Re,v):(bt.havedict=1,d))}return fl.inflateReset=ke,fl.inflateReset2=ct,fl.inflateResetKeep=Be,fl.inflateInit=ht,fl.inflateInit2=It,fl.inflate=D,fl.inflateEnd=Z,fl.inflateGetHeader=pe,fl.inflateSetDictionary=Oe,fl.inflateInfo="pako inflate (from Nodeca project)",fl}var hN,b9;function kY(){return b9||(b9=1,hN={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),hN}var pN,v9;function v2e(){if(v9)return pN;v9=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return pN=e,pN}var x9;function x2e(){if(x9)return mg;x9=1;var e=b2e(),t=wh(),n=SY(),r=kY(),i=wO(),s=CY(),a=v2e(),o=Object.prototype.toString;function l(d){if(!(this instanceof l))return new l(d);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},d||{});var h=this.options;h.raw&&h.windowBits>=0&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),h.windowBits>=0&&h.windowBits<16&&!(d&&d.windowBits)&&(h.windowBits+=32),h.windowBits>15&&h.windowBits<48&&(h.windowBits&15)===0&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var m=e.inflateInit2(this.strm,h.windowBits);if(m!==r.Z_OK)throw new Error(i[m]);if(this.header=new a,e.inflateGetHeader(this.strm,this.header),h.dictionary&&(typeof h.dictionary=="string"?h.dictionary=n.string2buf(h.dictionary):o.call(h.dictionary)==="[object ArrayBuffer]"&&(h.dictionary=new Uint8Array(h.dictionary)),h.raw&&(m=e.inflateSetDictionary(this.strm,h.dictionary),m!==r.Z_OK)))throw new Error(i[m])}l.prototype.push=function(d,h){var m=this.strm,y=this.options.chunkSize,b=this.options.dictionary,v,x,_,S,C,E=!1;if(this.ended)return!1;x=h===~~h?h:h===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof d=="string"?m.input=n.binstring2buf(d):o.call(d)==="[object ArrayBuffer]"?m.input=new Uint8Array(d):m.input=d,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new t.Buf8(y),m.next_out=0,m.avail_out=y),v=e.inflate(m,r.Z_NO_FLUSH),v===r.Z_NEED_DICT&&b&&(v=e.inflateSetDictionary(this.strm,b)),v===r.Z_BUF_ERROR&&E===!0&&(v=r.Z_OK,E=!1),v!==r.Z_STREAM_END&&v!==r.Z_OK)return this.onEnd(v),this.ended=!0,!1;m.next_out&&(m.avail_out===0||v===r.Z_STREAM_END||m.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(_=n.utf8border(m.output,m.next_out),S=m.next_out-_,C=n.buf2string(m.output,_),m.next_out=S,m.avail_out=y-S,S&&t.arraySet(m.output,m.output,_,S,0),this.onData(C)):this.onData(t.shrinkBuf(m.output,m.next_out))),m.avail_in===0&&m.avail_out===0&&(E=!0)}while((m.avail_in>0||m.avail_out===0)&&v!==r.Z_STREAM_END);return v===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(v=e.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),m.avail_out=0),!0)},l.prototype.onData=function(d){this.chunks.push(d)},l.prototype.onEnd=function(d){d===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg};function c(d,h){var m=new l(h);if(m.push(d,!0),m.err)throw m.msg||i[m.err];return m.result}function u(d,h){return h=h||{},h.raw=!0,c(d,h)}return mg.Inflate=l,mg.inflate=c,mg.inflateRaw=u,mg.ungzip=c,mg}var mN,w9;function w2e(){if(w9)return mN;w9=1;var e=wh().assign,t=m2e(),n=x2e(),r=kY(),i={};return e(i,t,n,r),mN=i,mN}var _2e=w2e();const _O=ma(_2e);var gN,_9;function S2e(){if(_9)return gN;_9=1;const e=(t,n)=>function(...r){const i=n.promiseModule;return new i((s,a)=>{n.multiArgs?r.push((...o)=>{n.errorFirst?o[0]?a(o):(o.shift(),s(o)):s(o)}):n.errorFirst?r.push((o,l)=>{o?a(o):s(l)}):r.push(s),t.apply(this,r)})};return gN=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const i=a=>{const o=l=>typeof l=="string"?a===l:l.test(a);return n.include?n.include.some(o):!n.exclude.some(o)};let s;r==="function"?s=function(...a){return n.excludeMain?t(...a):e(t,n).apply(this,a)}:s=Object.create(Object.getPrototypeOf(t));for(const a in t){const o=t[a];s[a]=typeof o=="function"&&i(a)?e(o,n):o}return s},gN}var C2e=S2e();const yN=ma(C2e);var bN,S9;function k2e(){if(S9)return bN;S9=1;var e={};function t(G){return Array.isArray(G)?G:[G]}const n="",r=" ",i="\\",s=/^\s+$/,a=/(?:[^\\]|^)\\$/,o=/^\\!/,l=/^\\#/,c=/\r?\n/g,u=/^\.*\/|^\.+$/,d="/";let h="node-ignore";typeof Symbol<"u"&&(h=Symbol.for("node-ignore"));const m=h,y=(G,$,ne)=>Object.defineProperty(G,$,{value:ne}),b=/([0-z])-([0-z])/g,v=()=>!1,x=G=>G.replace(b,($,ne,H)=>ne.charCodeAt(0)<=H.charCodeAt(0)?$:n),_=G=>{const{length:$}=G;return G.slice(0,$-$%2)},S=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(G,$,ne)=>$+(ne.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(G,$)=>{const{length:ne}=$;return $.slice(0,ne-ne%2)+r}],[/[\\$.|*+(){^]/g,G=>`\\${G}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(G,$,ne)=>$+6<ne.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(G,$,ne)=>{const H=ne.replace(/\\\*/g,"[^\\/]*");return $+H}],[/\\\\\\(?=[$.|*+(){^])/g,()=>i],[/\\\\/g,()=>i],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(G,$,ne,H,te)=>$===i?`\\[${ne}${_(H)}${te}`:te==="]"&&H.length%2===0?`[${x(ne)}${H}]`:"[]"],[/(?:[^*])$/,G=>/\/$/.test(G)?`${G}$`:`${G}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(G,$)=>`${$?`${$}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),E=(G,$)=>{let ne=C[G];return ne||(ne=S.reduce((H,[te,ee])=>H.replace(te,ee.bind(G)),G),C[G]=ne),$?new RegExp(ne,"i"):new RegExp(ne)},A=G=>typeof G=="string",R=G=>G&&A(G)&&!s.test(G)&&!a.test(G)&&G.indexOf("#")!==0,N=G=>G.split(c);class M{constructor($,ne,H,te){this.origin=$,this.pattern=ne,this.negative=H,this.regex=te}}const P=(G,$)=>{const ne=G;let H=!1;G.indexOf("!")===0&&(H=!0,G=G.substr(1)),G=G.replace(o,"!").replace(l,"#");const te=E(G,$);return new M(ne,G,H,te)},L=(G,$)=>{throw new $(G)},O=(G,$,ne)=>A(G)?G?O.isNotRelative(G)?ne(`path should be a \`path.relative()\`d string, but got "${$}"`,RangeError):!0:ne("path must not be empty",TypeError):ne(`path must be a string, but got \`${$}\``,TypeError),V=G=>u.test(G);O.isNotRelative=V,O.convert=G=>G;class F{constructor({ignorecase:$=!0,ignoreCase:ne=$,allowRelativePaths:H=!1}={}){y(this,m,!0),this._rules=[],this._ignoreCase=ne,this._allowRelativePaths=H,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern($){if($&&$[m]){this._rules=this._rules.concat($._rules),this._added=!0;return}if(R($)){const ne=P($,this._ignoreCase);this._added=!0,this._rules.push(ne)}}add($){return this._added=!1,t(A($)?N($):$).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern($){return this.add($)}_testOne($,ne){let H=!1,te=!1;return this._rules.forEach(ee=>{const{negative:se}=ee;if(te===se&&H!==te||se&&!H&&!te&&!ne)return;ee.regex.test($)&&(H=!se,te=se)}),{ignored:H,unignored:te}}_test($,ne,H,te){const ee=$&&O.convert($);return O(ee,$,this._allowRelativePaths?v:L),this._t(ee,ne,H,te)}_t($,ne,H,te){if($ in ne)return ne[$];if(te||(te=$.split(d)),te.pop(),!te.length)return ne[$]=this._testOne($,H);const ee=this._t(te.join(d)+d,ne,H,te);return ne[$]=ee.ignored?ee:this._testOne($,H)}ignores($){return this._test($,this._ignoreCache,!1).ignored}createFilter(){return $=>!this.ignores($)}filter($){return t($).filter(this.createFilter())}test($){return this._test($,this._testCache,!0)}}const J=G=>new F(G),U=G=>O(G&&O.convert(G),G,v);if(J.isPathValid=U,J.default=J,bN=J,typeof os<"u"&&(e&&e.IGNORE_TEST_WIN32||os.platform==="win32")){const G=ne=>/^\\\\\?\\/.test(ne)||/["<>|\u0000-\u001F]+/u.test(ne)?ne:ne.replace(/\\/g,"/");O.convert=G;const $=/^[a-z]:\//i;O.isNotRelative=ne=>$.test(ne)||V(ne)}return bN}var E2e=k2e();const T2e=ma(E2e);var vN,C9;function A2e(){if(C9)return vN;C9=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,i,s){return i=i instanceof RegExp?i:new RegExp(e(i),"g"),r.replace(i,s)}var n={clean:function(i){if(typeof i!="string")throw new Error("Expected a string, received: "+i);return i=t(i,"./","/"),i=t(i,"..","."),i=t(i," ","-"),i=t(i,/^[~^:?*\\\-]/g,""),i=t(i,/[~^:?*\\]/g,"-"),i=t(i,/[~^:?*\\\-]$/g,""),i=t(i,"@{","-"),i=t(i,/\.$/g,""),i=t(i,/\/$/g,""),i=t(i,/\.lock$/g,""),i}};return vN=n,vN}var R2e=A2e();const Yc=ma(R2e);var xN,k9;function I2e(){return k9||(k9=1,xN=function(e,t){var n=e,r=t,i=n.length,s=r.length,a=!1,o=null,l=i+1,c=[],u=[],d=[],h="",m=-1,y=0,b=1,v,x,_=function(){i>=s&&(v=n,x=i,n=r,r=v,i=s,s=x,a=!0,l=i+1)},S=function(R,N,M){return{x:R,y:N,k:M}},C=function(R,N){return{elem:R,t:N}},E=function(R,N,M){var P,L,O;for(N>M?P=c[R-1+l]:P=c[R+1+l],O=Math.max(N,M),L=O-R;L<i&&O<s&&n[L]===r[O];)++L,++O;return c[R+l]=u.length,u[u.length]=new S(L,O,P),O},A=function(R){var N,M,P;for(N=M=0,P=R.length-1;P>=0;--P)for(;N<R[P].x||M<R[P].y;)R[P].y-R[P].x>M-N?(a?d[d.length]=new C(r[M],m):d[d.length]=new C(r[M],b),++M):R[P].y-R[P].x<M-N?(a?d[d.length]=new C(n[N],b):d[d.length]=new C(n[N],m),++N):(d[d.length]=new C(n[N],y),h+=n[N],++N,++M)};return _(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return h},getses:function(){return d},compose:function(){var R,N,M,P,L,O,V,F;for(R=s-i,N=i+s+3,M={},V=0;V<N;++V)M[V]=-1,c[V]=-1;P=-1;do{for(++P,F=-P;F<=R-1;++F)M[F+l]=E(F,M[F-1+l]+1,M[F+1+l]);for(F=R+P;F>=R+1;--F)M[F+l]=E(F,M[F-1+l]+1,M[F+1+l]);M[R+l]=E(R,M[R-1+l]+1,M[R+1+l])}while(M[R+l]!==s);for(o=R+2*P,L=c[R+l],O=[];L!==-1;)O[O.length]=new S(u[L].x,u[L].y,null),L=u[L].k;A(O)}}}),xN}var wN,E9;function N2e(){if(E9)return wN;E9=1;var e=I2e();function t(s,a){var o=new e(s,a);o.compose();for(var l=o.getses(),c,u,d=s.length-1,h=a.length-1,m=l.length-1;m>=0;--m)l[m].t===o.SES_COMMON?(u?(u.chain={file1index:d,file2index:h,chain:null},u=u.chain):(c={file1index:d,file2index:h,chain:null},u=c),d--,h--):l[m].t===o.SES_DELETE?d--:l[m].t===o.SES_ADD&&h--;var y={file1index:-1,file2index:-1,chain:null};return u?(u.chain=y,c):y}function n(s,a){for(var o=[],l=s.length,c=a.length,u=t(s,a);u!==null;u=u.chain){var d=l-u.file1index-1,h=c-u.file2index-1;l=u.file1index,c=u.file2index,(d||h)&&o.push({file1:[l+1,d],file2:[c+1,h]})}return o.reverse(),o}function r(s,a,o){var l,c=n(a,s),u=n(a,o),d=[];function h($,ne){d.push([$.file1[0],ne,$.file1[1],$.file2[0],$.file2[1]])}for(l=0;l<c.length;l++)h(c[l],0);for(l=0;l<u.length;l++)h(u[l],2);d.sort(function($,ne){return $[0]-ne[0]});var m=[],y=0;function b($){$>y&&(m.push([1,y,$-y]),y=$)}for(var v=0;v<d.length;v++){for(var x=v,_=d[v],S=_[0],C=S+_[2];v<d.length-1;){var E=d[v+1],A=E[0];if(A>C)break;C=Math.max(C,A+E[2]),v++}if(b(S),x==v)_[4]>0&&m.push([_[1],_[3],_[4]]);else{var R={0:[s.length,-1,a.length,-1],2:[o.length,-1,a.length,-1]};for(l=x;l<=v;l++){_=d[l];var N=_[1],M=R[N],P=_[0],L=P+_[2],O=_[3],V=O+_[4];M[0]=Math.min(O,M[0]),M[1]=Math.max(V,M[1]),M[2]=Math.min(P,M[2]),M[3]=Math.max(L,M[3])}var F=R[0][0]+(S-R[0][2]),J=R[0][1]+(C-R[0][3]),U=R[2][0]+(S-R[2][2]),G=R[2][1]+(C-R[2][3]);m.push([-1,F,J-F,S,C-S,U,G-U])}y=C}return b(a.length),m}function i(s,a,o){var l=[],c=[s,a,o],u=r(s,a,o),d=[];function h(){d.length&&l.push({ok:d}),d=[]}function m(_){for(var S=0;S<_.length;S++)d.push(_[S])}function y(_){if(_[2]!=_[6])return!0;for(var S=_[1],C=_[5],E=0;E<_[2];E++)if(s[E+S]!=o[E+C])return!0;return!1}for(var b=0;b<u.length;b++){var v=u[b],x=v[0];x==-1?y(v)?(h(),l.push({conflict:{a:s.slice(v[1],v[1]+v[2]),aIndex:v[1],o:a.slice(v[3],v[3]+v[4]),oIndex:v[3],b:o.slice(v[5],v[5]+v[6]),bIndex:v[5]}})):m(c[0].slice(v[1],v[1]+v[2])):m(c[x].slice(v[1],v[1]+v[2]))}return h(),l}return wN=i,wN}var M2e=N2e();const j2e=ma(M2e);class Gr extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Gr(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class Mw extends Gr{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=Mw.code,this.data={filepaths:t}}}Mw.code="UnmergedPathsError";class gr extends Gr{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=gr.code,this.data={message:t}}}gr.code="InternalError";class uy extends Gr{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=uy.code,this.data={filepath:t}}}uy.code="UnsafeFilepathError";class Wc{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const i=this.buffer.write(t,this._start,n,r);return this._start+=n,i}copy(t,n,r){const i=t.copy(this.buffer,this._start,n,r);return this._start+=i,i}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function wE(e,t){return-(e<t)||+(e>t)}function EY(e,t){return wE(e.path,t.path)}function TY(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const jc=2**32;function T9(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const i=Math.floor(n/1e3),s=(n-i*1e3)*1e6;return[i,s]}function x0(e){const[t,n]=T9(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,i]=T9(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%jc,ctimeNanoseconds:n%jc,mtimeSeconds:r%jc,mtimeNanoseconds:i%jc,dev:e.dev%jc,ino:e.ino%jc,mode:TY(e.mode%jc),uid:e.uid%jc,gid:e.gid%jc,size:e.size>-1?e.size%jc:0}}function P2e(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let _N=null;async function _d(e){return _N===null&&(_N=await D2e()),_N?AY(e):O2e(e)}function O2e(e){return new xY().update(e).digest("hex")}async function AY(e){const t=await crypto.subtle.digest("SHA-1",e);return P2e(t)}async function D2e(){try{if(await AY(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function F2e(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function L2e(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(on.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class hp{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(on.isBuffer(t))return hp.fromBuffer(t);if(t===null)return new hp(null);throw new gr("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new gr("Index file is empty (.git/index)");const n=new hp,r=new Wc(t),i=r.toString("utf8",4);if(i!=="DIRC")throw new gr(`Invalid dircache magic file number: ${i}`);const s=await _d(t.slice(0,-20)),a=t.slice(-20).toString("hex");if(a!==s)throw new gr(`Invalid checksum in GitIndex buffer: expected ${a} but saw ${s}`);const o=r.readUInt32BE();if(o!==2)throw new gr(`Unsupported dircache version: ${o}`);const l=r.readUInt32BE();let c=0;for(;!r.eof()&&c<l;){const u={};u.ctimeSeconds=r.readUInt32BE(),u.ctimeNanoseconds=r.readUInt32BE(),u.mtimeSeconds=r.readUInt32BE(),u.mtimeNanoseconds=r.readUInt32BE(),u.dev=r.readUInt32BE(),u.ino=r.readUInt32BE(),u.mode=r.readUInt32BE(),u.uid=r.readUInt32BE(),u.gid=r.readUInt32BE(),u.size=r.readUInt32BE(),u.oid=r.slice(20).toString("hex");const d=r.readUInt16BE();u.flags=F2e(d);const h=t.indexOf(0,r.tell()+1)-r.tell();if(h<1)throw new gr(`Got a path length of: ${h}`);if(u.path=r.toString("utf8",h),u.path.includes("..\\")||u.path.includes("../"))throw new uy(u.path);let m=8-(r.tell()-12)%8;for(m===0&&(m=8);m--;){const y=r.readUInt8();if(y!==0)throw new gr(`Expected 1-8 null characters but got '${y}' after ${u.path}`);if(r.eof())throw new gr("Unexpected end of file")}u.stages=[],n._addEntry(u),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(EY)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:i=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=x0(n);const s=on.from(t),a={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:i,nameLength:s.length<4095?s.length:4095},stages:[]};this._addEntry(a),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=on.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,i=on.alloc(r),s=new Wc(i),a=x0(t);return s.writeUInt32BE(a.ctimeSeconds),s.writeUInt32BE(a.ctimeNanoseconds),s.writeUInt32BE(a.mtimeSeconds),s.writeUInt32BE(a.mtimeNanoseconds),s.writeUInt32BE(a.dev),s.writeUInt32BE(a.ino),s.writeUInt32BE(a.mode),s.writeUInt32BE(a.uid),s.writeUInt32BE(a.gid),s.writeUInt32BE(a.size),s.write(t.oid,20,"hex"),s.writeUInt16BE(L2e(t)),s.write(t.path,n.length,"utf8"),i}async toObject(){const t=on.alloc(12),n=new Wc(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const o of this.entries)if(r.push(hp._entryToBuffer(o)),o.stages.length>1)for(const l of o.stages)l&&l!==o&&r.push(hp._entryToBuffer(l));r=await Promise.all(r);const i=on.concat(r),s=on.concat([t,i]),a=await _d(s);return on.concat([s,on.from(a,"hex")])}}function fC(e,t,n=!0,r=!0){const i=x0(e),s=x0(t);return n&&i.mode!==s.mode||i.mtimeSeconds!==s.mtimeSeconds||i.ctimeSeconds!==s.ctimeSeconds||i.uid!==s.uid||i.gid!==s.gid||r&&i.ino!==s.ino||i.size!==s.size}let SN=null;const CN=Symbol("IndexCache");function B2e(){return{map:new Map,stats:new Map}}async function $2e(e,t,n){const[r,i]=await Promise.all([e.lstat(t),e.read(t)]),s=await hp.from(i);n.map.set(t,s),n.stats.set(t,r)}async function z2e(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const i=await e.lstat(t);return i===null?!1:fC(r,i)}class Zs{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:i=!0},s){r[CN]||(r[CN]=B2e());const a=`${n}/index`;SN===null&&(SN=new xx({maxPending:1/0}));let o,l=[];return await SN.acquire(a,async()=>{const c=r[CN];await z2e(t,a,c)&&await $2e(t,a,c);const u=c.map.get(a);if(l=u.unmergedPaths,l.length&&!i)throw new Mw(l);if(o=await s(u),u._dirty){const d=await u.toObject();await t.write(a,d),c.stats.set(a,await t.lstat(a)),u._dirty=!1}}),o}}function hC(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function w0(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function RY(e){const t=new Map,n=function(i){if(!t.has(i)){const s={type:"tree",fullpath:i,basename:hC(i),metadata:{},children:[]};t.set(i,s),s.parent=n(w0(i)),s.parent&&s.parent!==s&&s.parent.children.push(s)}return t.get(i)},r=function(i,s){if(!t.has(i)){const a={type:"blob",fullpath:i,basename:hC(i),metadata:s,parent:n(w0(i)),children:[]};a.parent&&a.parent.children.push(a),t.set(i,a)}return t.get(i)};n(".");for(const i of e)r(i.path,i);return t}function U2e(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new gr(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class q2e{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Zs.acquire({fs:t,gitdir:n,cache:r},async function(s){return RY(s.entries)});const i=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,i=(await this.treePromise).get(n);if(!i||i.type==="blob")return null;if(i.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const s=i.children.map(a=>a.fullpath);return s.sort(wE),s}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const i=r.type==="tree"?{}:x0(r.metadata);t._type=r.type==="tree"?"tree":U2e(i.mode),t._mode=i.mode,r.type==="tree"?t._stat=void 0:t._stat=i}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const _E=Symbol("GitWalkSymbol");function dy(){const e=Object.create(null);return Object.defineProperty(e,_E,{value:function({fs:t,gitdir:n,cache:r}){return new q2e({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class wi extends Gr{constructor(t){super(`Could not find ${t}.`),this.code=this.name=wi.code,this.data={what:t}}}wi.code="NotFoundError";class to extends Gr{constructor(t,n,r,i){super(`Object ${t} ${i?`at ${i}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=to.code,this.data={oid:t,actual:n,expected:r,filepath:i}}}to.code="ObjectTypeError";class Jf extends Gr{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Jf.code,this.data={value:t}}}Jf.code="InvalidOidError";class jw extends Gr{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=jw.code,this.data={remote:t}}}jw.code="NoRefspecError";class pC{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const i=r.indexOf(" ");if(r.startsWith("^")){const s=r.slice(1);return this.refs.set(n+"^{}",s),{line:r,ref:n,peeled:s}}else{const s=r.slice(0,i);return n=r.slice(i+1),this.refs.set(n,s),{line:r,ref:n,oid:s}}})}return this}static from(t){return new pC(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class mC{constructor({remotePath:t,localPath:n,force:r,matchPrefix:i}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:i})}static from(t){const[n,r,i,s,a]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=n==="+",l=i==="*";if(l!==(a==="*"))throw new gr("Invalid refspec");return new mC({remotePath:r,localPath:s,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class SO{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(mC.from(r));return new SO(n)}add(t){const n=mC.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const i of t){const s=r.translate(i);s&&n.push([i,s])}return n}translateOne(t){let n=null;for(const r of this.rules){const i=r.translate(t);i&&(n=i)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function V2e(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),i=-(n<r)||+(n>r);return i===0?e.endsWith("^{}")?1:-1:i}const H2e=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Zb=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},A9={core:{filemode:Zb,bare:Zb,logallrefupdates:Zb,symlinks:Zb,ignorecase:Zb,bigFileThreshold:H2e}},W2e=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,G2e=/^[A-Za-z0-9-.]+$/,K2e=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,Y2e=/^[A-Za-z][A-Za-z-]*$/,Z2e=/^(.*?)( *[#;].*)$/,X2e=e=>{const t=W2e.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},J2e=e=>{const t=K2e.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),i=Q2e(r),s=eCe(i);return[n,s]}return null},Q2e=e=>{const t=Z2e.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return R9(n)&&R9(r)?`${n}${r}`:n},R9=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,eCe=e=>e.split("").reduce((t,n,r,i)=>{const s=n==='"'&&i[r-1]!=="\\",a=n==="\\"&&i[r+1]==='"';return s||a?t:t+n},""),I9=e=>e!=null?e.toLowerCase():null,Z3=(e,t,n)=>[I9(e),t,I9(n)].filter(r=>r!=null).join("."),N9=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),i=t.length?t.join("."):void 0;return{section:n,subsection:i,name:r,path:Z3(n,i,r),sectionPath:Z3(n,i,null),isSection:!!n}},tCe=(e,t)=>e.reduce((n,r,i)=>t(r)?i:n,-1);class CO{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(i=>{let s=null,a=null;const o=i.trim(),l=X2e(o),c=l!=null;if(c)[n,r]=l;else{const d=J2e(o);d!=null&&([s,a]=d)}const u=Z3(n,r,s);return{line:i,isSection:c,section:n,subsection:r,name:s,value:a,path:u}}):[]}static from(t){return new CO(t)}async get(t,n=!1){const r=N9(t).path,i=this.parsedConfig.filter(s=>s.path===r).map(({section:s,name:a,value:o})=>{const l=A9[s]&&A9[s][a];return l?l(o):o});return n?i:i.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:i,subsection:s,name:a,path:o,sectionPath:l,isSection:c}=N9(t),u=tCe(this.parsedConfig,d=>d.path===o);if(n==null)u!==-1&&this.parsedConfig.splice(u,1);else if(u!==-1){const d=this.parsedConfig[u],h=Object.assign({},d,{name:a,value:n,modified:!0});r?this.parsedConfig.splice(u+1,0,h):this.parsedConfig[u]=h}else{const d=this.parsedConfig.findIndex(m=>m.path===l),h={section:i,subsection:s,name:a,value:n,modified:!0,path:o};if(G2e.test(i)&&Y2e.test(a))if(d>=0)this.parsedConfig.splice(d+1,0,h);else{const m={isSection:c,section:i,subsection:s,modified:!0,path:l};this.parsedConfig.push(m,h)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:i,value:s,modified:a=!1})=>a?i!=null&&s!=null?typeof s=="string"&&/[#;]/.test(s)?`	${i} = "${s}"`:`	${i} = ${s}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class Cs{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return CO.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const eS=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],nCe=["config","description","index","shallow","commondir"];let kN;async function Sf(e,t){return kN===void 0&&(kN=new xx),kN.acquire(e,t)}class Gt{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:i,symrefs:s,tags:a,refspecs:o=void 0,prune:l=!1,pruneTags:c=!1}){for(const v of i.values())if(!v.match(/[0-9a-f]{40}/))throw new Jf(v);const u=await Cs.get({fs:t,gitdir:n});if(!o){if(o=await u.getall(`remote.${r}.fetch`),o.length===0)throw new jw(r);o.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const d=SO.from(o),h=new Map;if(c){const v=await Gt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Gt.deleteRefs({fs:t,gitdir:n,refs:v.map(x=>`refs/tags/${x}`)})}if(a){for(const v of i.keys())if(v.startsWith("refs/tags")&&!v.endsWith("^{}")&&!await Gt.exists({fs:t,gitdir:n,ref:v})){const x=i.get(v);h.set(v,x)}}const m=d.translate([...i.keys()]);for(const[v,x]of m){const _=i.get(v);h.set(x,_)}const y=d.translate([...s.keys()]);for(const[v,x]of y){const _=s.get(v),S=d.translateOne(_);S&&h.set(x,`ref: ${S}`)}const b=[];if(l){for(const v of d.localNamespaces()){const x=(await Gt.listRefs({fs:t,gitdir:n,filepath:v})).map(_=>`${v}/${_}`);for(const _ of x)h.has(_)||b.push(_)}b.length>0&&await Gt.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[v,x]of h)await Sf(v,async()=>t.write(Lt.join(n,v),`${x.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:i}){if(!i.match(/[0-9a-f]{40}/))throw new Jf(i);await Sf(r,async()=>t.write(Lt.join(n,r),`${i.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:i}){await Sf(r,async()=>t.write(Lt.join(n,r),`ref: ${i.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Gt.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(o=>t.rm(Lt.join(n,o))));let i=await Sf("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const s=pC.from(i),a=s.refs.size;for(const o of r)s.refs.has(o)&&s.delete(o);s.refs.size<a&&(i=s.toString(),await Sf("packed-refs",async()=>t.write(`${n}/packed-refs`,i,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:i=void 0}){if(i!==void 0&&(i--,i===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Gt.resolve({fs:t,gitdir:n,ref:r,depth:i});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const s=await Gt.packedRefs({fs:t,gitdir:n}),a=eS(r).filter(o=>!nCe.includes(o));for(const o of a){const l=await Sf(o,async()=>await t.read(`${n}/${o}`,{encoding:"utf8"})||s.get(o));if(l)return Gt.resolve({fs:t,gitdir:n,ref:l.trim(),depth:i})}throw new wi(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Gt.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Gt.packedRefs({fs:t,gitdir:n}),s=eS(r);for(const a of s)if(await Sf(a,async()=>t.exists(`${n}/${a}`))||i.has(a))return a;throw new wi(r)}static async expandAgainstMap({ref:t,map:n}){const r=eS(t);for(const i of r)if(await n.has(i))return i;throw new wi(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:i}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Gt.resolveAgainstMap({ref:t,fullref:n,depth:r,map:i});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const s=eS(t);for(const a of s){const o=i.get(a);if(o)return Gt.resolveAgainstMap({ref:o.trim(),fullref:a,depth:r,map:i})}throw new wi(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Sf("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return pC.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const i=Gt.packedRefs({fs:t,gitdir:n});let s=null;try{s=await t.readdirDeep(`${n}/${r}`),s=s.map(a=>a.replace(`${n}/${r}/`,""))}catch{s=[]}for(let a of(await i).keys())a.startsWith(r)&&(a=a.replace(r+"/",""),s.includes(a)||s.push(a));return s.sort(V2e),s}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Gt.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Gt.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Gt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(i=>!i.endsWith("^{}"))}}function rCe(e,t){return wE(M9(e),M9(t))}function M9(e){return e.mode==="040000"?e.path+"/":e.path}function IY(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new gr(`Unexpected GitTree entry mode: ${e}`)}function iCe(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new gr(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const i=e.indexOf(0,n);if(i===-1)throw new gr(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let s=e.slice(n,r).toString("utf8");s==="40000"&&(s="040000");const a=IY(s),o=e.slice(r+1,i).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new uy(o);const l=e.slice(i+1,i+21).toString("hex");n=i+21,t.push({mode:s,path:o,oid:l,type:a})}return t}function sCe(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new gr(`Could not understand file mode: ${e}`)}function aCe(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=sCe(e.mode),e.type||(e.type=IY(e.mode)),e}class So{constructor(t){if(on.isBuffer(t))this._entries=iCe(t);else if(Array.isArray(t))this._entries=t.map(aCe);else throw new gr("invalid type passed to GitTree constructor");this._entries.sort(EY)}static from(t){return new So(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(rCe),on.concat(t.map(n=>{const r=on.from(n.mode.replace(/^0/,"")),i=on.from(" "),s=on.from(n.path,"utf8"),a=on.from([0]),o=on.from(n.oid,"hex");return on.concat([r,i,s,a,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class fy{static wrap({type:t,object:n}){return on.concat([on.from(`${t} ${n.byteLength.toString()}\0`),on.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),i=t.slice(0,n).toString("utf8"),s=t.slice(n+1,r).toString("utf8"),a=t.length-(r+1);if(parseInt(s)!==a)throw new gr(`Length mismatch: expected ${s} bytes but got ${a} instead.`);return{type:i,object:on.from(t.slice(r+1))}}}async function NY({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,i=await e.read(`${t}/${r}`);return i?{object:i,format:"deflated",source:r}:null}function oCe(e,t){const n=new Wc(e),r=j9(n);if(r!==t.byteLength)throw new gr(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const i=j9(n);let s;const a=O9(n,t);if(a.byteLength===i)s=a;else{s=on.alloc(i);const o=new Wc(s);for(o.copy(a);!n.eof();)o.copy(O9(n,t));const l=o.tell();if(i!==l)throw new gr(`applyDelta expected target buffer to be ${i} bytes but the resulting buffer was ${l} bytes`)}return s}function j9(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function P9(e,t,n){let r=0,i=0;for(;n--;)t&1&&(r|=e.readUInt8()<<i),t>>=1,i+=8;return r}function O9(e,t){const n=e.readUInt8(),r=128,i=15,s=112;if(n&r){const a=P9(e,n&i,4);let o=P9(e,(n&s)>>4,3);return o===0&&(o=65536),t.slice(a,a+o)}else return e.slice(n)}function lCe(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function MY(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:lCe(e)}class jY{constructor(t){if(typeof on>"u")throw new Error("Missing Buffer dependency");this.stream=MY(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?on.alloc(0):(n&&(n=on.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>cCe(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=on.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function cCe(e){return e.reduce((t,n)=>t+n.length,0)}async function uCe(e,t){const n=new jY(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new gr(`Invalid PACK header '${r}'`);let i=await n.read(4);if(i=i.readUInt32BE(0),i!==2)throw new gr(`Invalid packfile version: ${i}`);let s=await n.read(4);if(s=s.readUInt32BE(0),!(s<1))for(;!n.eof()&&s--;){const a=n.tell(),{type:o,length:l,ofs:c,reference:u}=await dCe(n),d=new _O.Inflate;for(;!d.result;){const h=await n.chunk();if(!h)break;if(d.push(h,!1),d.err)throw new gr(`Pako error: ${d.msg}`);if(d.result){if(d.result.length!==l)throw new gr("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(h.length-d.strm.avail_in);const m=n.tell();await t({data:d.result,type:o,num:s,offset:a,end:m,reference:u,ofs:c})}}}}async function dCe(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let a=4;do t=await e.byte(),r|=(t&127)<<a,a+=7;while(t&128)}let i,s;if(n===6){let a=0;i=0;const o=[];do t=await e.byte(),i|=(t&127)<<a,a+=7,o.push(t);while(t&128);s=on.from(o)}return n===7&&(s=await e.read(20)),{type:n,length:r,ofs:i,reference:s}}async function PY(e){return _O.inflate(e)}function fCe(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const i=n&127;t.push(i),r=n&128}while(r);return t.reduce((i,s)=>i+1<<7|s,-1)}function hCe(e,t){let n=t,r=4,i=null;do i=e.readUInt8(),n|=(i&127)<<r,r+=7;while(i&128);return n}class _0{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new Wc(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const s=r.readUInt32BE();if(s!==2)throw new gr(`Unable to read version ${s} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new gr("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const a=r.readUInt32BE(),o=[];for(let u=0;u<a;u++){const d=r.slice(20).toString("hex");o[u]=d}r.seek(r.tell()+4*a);const l=new Map;for(let u=0;u<a;u++)l.set(o[u],r.readUInt32BE());const c=r.slice(20).toString("hex");return new _0({hashes:o,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const i={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},s={},a=t.slice(-20).toString("hex"),o=[],l={},c=new Map;let u=null,d=null;await uCe([t],async({data:v,type:x,reference:_,offset:S,num:C})=>{u===null&&(u=C);const E=Math.floor((u-C)*100/u);E!==d&&r&&await r({phase:"Receiving objects",loaded:u-C,total:u}),d=E,x=i[x],["commit","tree","blob","tag"].includes(x)?s[S]={type:x,offset:S}:x==="ofs-delta"?s[S]={type:x,offset:S}:x==="ref-delta"&&(s[S]={type:x,offset:S})});const h=Object.keys(s).map(Number);for(const[v,x]of h.entries()){const _=v+1===h.length?t.byteLength-20:h[v+1],S=s[x],C=f2e.buf(t.slice(x,_))>>>0;S.end=_,S.crc=C}const m=new _0({pack:Promise.resolve(t),packfileSha:a,crcs:l,hashes:o,offsets:c,getExternalRefDelta:n});d=null;let y=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let v in s){v=Number(v);const x=Math.floor(y*100/u);x!==d&&r&&await r({phase:"Resolving deltas",loaded:y,total:u}),y++,d=x;const _=s[v];if(!_.oid)try{m.readDepth=0,m.externalReadDepth=0;const{type:S,object:C}=await m.readSlice({start:v});b[m.readDepth]+=1;const E=await _d(fy.wrap({type:S,object:C}));_.oid=E,o.push(E),c.set(E,v),l[E]=_.crc}catch{continue}}return o.sort(),m}async toBuffer(){const t=[],n=(c,u)=>{t.push(on.from(c,u))};n("ff744f63","hex"),n("00000002","hex");const r=new Wc(on.alloc(256*4));for(let c=0;c<256;c++){let u=0;for(const d of this.hashes)parseInt(d.slice(0,2),16)<=c&&u++;r.writeUInt32BE(u)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const i=new Wc(on.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.crcs[c]);t.push(i.buffer);const s=new Wc(on.alloc(this.hashes.length*4));for(const c of this.hashes)s.writeUInt32BE(this.offsets.get(c));t.push(s.buffer),n(this.packfileSha,"hex");const a=on.concat(t),o=await _d(a),l=on.alloc(20);return l.write(o,"hex"),on.concat([a,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new gr(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new gr("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),i=new Wc(r),s=i.readUInt8(),a=s&112;let o=n[a];if(o===void 0)throw new gr("Unrecognized type: 0b"+a.toString(2));const l=s&15;let c=l;s&128&&(c=hCe(i,l));let d=null,h=null;if(o==="ofs_delta"){const y=fCe(i),b=t-y;({object:d,type:o}=await this.readSlice({start:b}))}if(o==="ref_delta"){const y=i.slice(20).toString("hex");({object:d,type:o}=await this.read({oid:y}))}const m=r.slice(i.tell());if(h=on.from(await PY(m)),h.byteLength!==c)throw new gr(`Packfile told us object would have length ${c} but it had length ${h.byteLength}`);return d&&(h=on.from(oCe(h,d))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:h}),{type:o,format:"content",object:h}}}const tS=Symbol("PackfileCache");async function pCe({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:i}){const s=await e.read(t);return _0.fromIdx({idx:s,getExternalRefDelta:n})}function kO({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:i,emitterPrefix:s}){t[tS]||(t[tS]=new Map);let a=t[tS].get(n);return a||(a=pCe({fs:e,filename:n,getExternalRefDelta:r,emitter:i,emitterPrefix:s}),t[tS].set(n,a)),a}async function mCe({fs:e,cache:t,gitdir:n,oid:r,format:i="content",getExternalRefDelta:s}){let a=await e.readdir(Lt.join(n,"objects/pack"));a=a.filter(o=>o.endsWith(".idx"));for(const o of a){const l=`${n}/objects/pack/${o}`,c=await kO({fs:e,cache:t,filename:l,getExternalRefDelta:s});if(c.error)throw new gr(c.error);if(c.offsets.has(r)){if(!c.pack){const d=l.replace(/idx$/,"pack");c.pack=e.read(d)}const u=await c.read({oid:r,getExternalRefDelta:s});return u.format="content",u.source=`objects/pack/${o.replace(/idx$/,"pack")}`,u}}return null}async function qi({fs:e,cache:t,gitdir:n,oid:r,format:i="content"}){const s=u=>qi({fs:e,cache:t,gitdir:n,oid:u});let a;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(a={format:"wrapped",object:on.from("tree 0\0")}),a||(a=await NY({fs:e,gitdir:n,oid:r})),!a){if(a=await mCe({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:s}),!a)throw new wi(r);return a}if(i==="deflated"||(a.format==="deflated"&&(a.object=on.from(await PY(a.object)),a.format="wrapped"),i==="wrapped"))return a;const o=await _d(a.object);if(o!==r)throw new gr(`SHA check failed! Expected ${r}, computed ${o}`);const{object:l,type:c}=fy.unwrap(a.object);if(a.type=c,a.object=l,a.format="content",i==="content")return a;throw new gr(`invalid requested format "${i}"`)}class yc extends Gr{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=yc.code,this.data={noun:t,where:n,canForce:r}}}yc.code="AlreadyExistsError";class Pw extends Gr{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=Pw.code,this.data={nouns:t,short:n,matches:r}}}Pw.code="AmbiguousError";class Ow extends Gr{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=Ow.code,this.data={filepaths:t}}}Ow.code="CheckoutConflictError";class Dw extends Gr{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=Dw.code,this.data={ref:t,oid:n}}}Dw.code="CommitNotFetchedError";class Fw extends Gr{constructor(){super("Empty response from git server."),this.code=this.name=Fw.code,this.data={}}}Fw.code="EmptyServerResponseError";class Lw extends Gr{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=Lw.code,this.data={}}}Lw.code="FastForwardError";class Bw extends Gr{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=Bw.code,this.data={prettyDetails:t,result:n}}}Bw.code="GitPushError";class S0 extends Gr{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=S0.code,this.data={statusCode:t,statusMessage:n,response:r}}}S0.code="HttpError";class Qf extends Gr{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Qf.code,this.data={reason:t}}}Qf.code="InvalidFilepathError";class pc extends Gr{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=pc.code,this.data={ref:t,suggestion:n}}}pc.code="InvalidRefNameError";class $w extends Gr{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=$w.code,this.data={depth:t}}}$w.code="MaxDepthError";class hy extends Gr{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=hy.code,this.data={}}}hy.code="MergeNotSupportedError";class py extends Gr{constructor(t,n,r,i){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=py.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:i}}}py.code="MergeConflictError";class Ia extends Gr{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Ia.code,this.data={role:t}}}Ia.code="MissingNameError";class xo extends Gr{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=xo.code,this.data={parameter:t}}}xo.code="MissingParameterError";class zw extends Gr{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=zw.code,this.data={errors:t},this.errors=t}}zw.code="MultipleGitError";class hm extends Gr{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=hm.code,this.data={expected:t,actual:n}}}hm.code="ParseError";class C0 extends Gr{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=C0.code,this.data={reason:t}}}C0.code="PushRejectedError";class Df extends Gr{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Df.code,this.data={capability:t,parameter:n}}}Df.code="RemoteCapabilityError";class Uw extends Gr{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=Uw.code,this.data={preview:t,response:n}}}Uw.code="SmartHttpError";class qw extends Gr{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=qw.code,this.data={url:t,transport:n,suggestion:r}}}qw.code="UnknownTransportError";class Vw extends Gr{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=Vw.code,this.data={url:t}}}Vw.code="UrlParseError";class my extends Gr{constructor(){super("The operation was canceled."),this.code=this.name=my.code,this.data={}}}my.code="UserCanceledError";class Hw extends Gr{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=Hw.code,this.data={filepath:t}}}Hw.code="IndexResetError";class Ww extends Gr{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Ww.code,this.data={ref:t}}}Ww.code="NoCommitError";var gCe=Object.freeze({__proto__:null,AlreadyExistsError:yc,AmbiguousError:Pw,CheckoutConflictError:Ow,CommitNotFetchedError:Dw,EmptyServerResponseError:Fw,FastForwardError:Lw,GitPushError:Bw,HttpError:S0,InternalError:gr,InvalidFilepathError:Qf,InvalidOidError:Jf,InvalidRefNameError:pc,MaxDepthError:$w,MergeNotSupportedError:hy,MergeConflictError:py,MissingNameError:Ia,MissingParameterError:xo,MultipleGitError:zw,NoRefspecError:jw,NotFoundError:wi,ObjectTypeError:to,ParseError:hm,PushRejectedError:C0,RemoteCapabilityError:Df,SmartHttpError:Uw,UnknownTransportError:qw,UnsafeFilepathError:uy,UrlParseError:Vw,UserCanceledError:my,UnmergedPathsError:Mw,IndexResetError:Hw,NoCommitError:Ww});function X3({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=yCe(r),`${e} <${t}> ${n} ${r}`}function yCe(e){const t=bCe(vCe(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),i=String(e);return r.length<2&&(r="0"+r),i.length<2&&(i="0"+i),(t===-1?"-":"+")+r+i}function bCe(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function vCe(e){return e===0?e:-e}function rd(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function gC(e){const[,t,n,r,i]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:xCe(i)}}function xCe(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),wCe(r)}function wCe(e){return e===0?e:-e}class Wa{constructor(t){if(typeof t=="string")this._tag=t;else if(on.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=Wa.render(t);else throw new gr("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new Wa(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${X3(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const i of t)i[0]===" "?n[n.length-1]+=`
`+i.slice(1):n.push(i);const r={};for(const i of n){const s=i.slice(0,i.indexOf(" ")),a=i.slice(i.indexOf(" ")+1);Array.isArray(r[s])?r[s].push(a):r[s]=a}return r.tagger&&(r.tagger=gC(r.tagger)),r.committer&&(r.committer=gC(r.committer)),r}withoutSignature(){const t=rd(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return rd(t)}payload(){return this.withoutSignature()+`
`}toObject(){return on.from(this._tag,"utf8")}static async sign(t,n,r){const i=t.payload();let{signature:s}=await n({payload:i,secretKey:r});s=rd(s);const a=i+s;return Wa.from(a)}}function EN(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function _Ce(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class zi{constructor(t){if(typeof t=="string")this._commit=t;else if(on.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=zi.render(t);else throw new gr("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=zi.justHeaders(t),i=zi.justMessage(t),s=rd(r+`
gpgsig`+EN(n)+`
`+i);return new zi(s)}static from(t){return new zi(t)}toObject(){return on.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return zi.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return rd(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=zi.justHeaders(this._commit).split(`
`),n=[];for(const i of t)i[0]===" "?n[n.length-1]+=`
`+i.slice(1):n.push(i);const r={parent:[]};for(const i of n){const s=i.slice(0,i.indexOf(" ")),a=i.slice(i.indexOf(" ")+1);Array.isArray(r[s])?r[s].push(a):r[s]=a}return r.author&&(r.author=gC(r.author)),r.committer&&(r.committer=gC(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new gr("commit 'parent' property should be an array");for(const s of t.parent)n+=`parent ${s}
`}const r=t.author;n+=`author ${X3(r)}
`;const i=t.committer||t.author;return n+=`committer ${X3(i)}
`,t.gpgsig&&(n+="gpgsig"+EN(t.gpgsig)),n}static render(t){return zi.renderHeaders(t)+`
`+rd(t.message)}render(){return this._commit}withoutSignature(){const t=rd(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return rd(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return _Ce(t)}static async sign(t,n,r){const i=t.withoutSignature(),s=zi.justMessage(t._commit);let{signature:a}=await n({payload:i,secretKey:r});a=rd(a);const l=zi.justHeaders(t._commit)+`
gpgsig`+EN(a)+`
`+s;return zi.from(l)}}async function k0({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:So.from([]),oid:r};const{type:i,object:s}=await qi({fs:e,cache:t,gitdir:n,oid:r});if(i==="tag")return r=Wa.from(s).parse().object,k0({fs:e,cache:t,gitdir:n,oid:r});if(i==="commit")return r=zi.from(s).parse().tree,k0({fs:e,cache:t,gitdir:n,oid:r});if(i!=="tree")throw new to(r,i,"tree");return{tree:So.from(s),oid:r}}class SCe{constructor({fs:t,gitdir:n,ref:r,cache:i}){this.fs=t,this.cache=i,this.gitdir=n,this.mapPromise=(async()=>{const a=new Map;let o;try{o=await Gt.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof wi&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await k0({fs:t,cache:this.cache,gitdir:n,oid:o});return l.type="tree",l.mode="40000",a.set(".",l),a})();const s=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:i,gitdir:s}=this,a=await this.mapPromise,o=a.get(n);if(!o)throw new Error(`No obj for ${n}`);const l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:c,object:u}=await qi({fs:r,cache:i,gitdir:s,oid:l});if(c!==o.type)throw new to(l,c,o.type);const d=So.from(u);for(const h of d)a.set(Lt.join(n,h.path),h);return d.entries().map(h=>Lt.join(n,h.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=TY(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:i,gitdir:s}=this,o=n.get(t._fullpath).oid,{type:l,object:c}=await qi({fs:r,cache:i,gitdir:s,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function kl({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,_E,{value:function({fs:n,gitdir:r,cache:i}){return new SCe({fs:n,gitdir:r,ref:e,cache:i})}}),Object.freeze(t),t}class CCe{constructor({fs:t,dir:n,gitdir:r,cache:i}){this.fs=t,this.cache=i,this.dir=n,this.gitdir=r,this.config=null;const s=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:i}=this,s=await r.readdir(Lt.join(i,n));return s===null?null:s.map(a=>Lt.join(n,a))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let i=await n.lstat(`${r}/${t._fullpath}`);if(!i)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let s=i.isDirectory()?"tree":"blob";s==="blob"&&!i.isFile()&&!i.isSymbolicLink()&&(s="special"),t._type=s,i=x0(i),t._mode=i.mode,i.size===-1&&t._actualSize&&(i.size=t._actualSize),t._stat=i}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:i}=this;if(await t.type()==="tree")t._content=void 0;else{const a=await(await this._getGitConfig(n,i)).get("core.autocrlf"),o=await n.read(`${r}/${t._fullpath}`,{autocrlf:a});t._actualSize=o.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:i,cache:s}=this;let a;await Zs.acquire({fs:r,gitdir:i,cache:s},async function(o){const l=o.entriesMap.get(t._fullpath),c=await t.stat(),d=await(await n._getGitConfig(r,i)).get("core.filemode"),h=typeof os<"u"?os.platform!=="win32":!0;if(!l||fC(c,l,d,h)){const m=await t.content();m===void 0?a=void 0:(a=await _d(fy.wrap({type:"blob",object:m})),l&&a===l.oid&&(!d||c.mode===l.mode)&&fC(c,l,d,h)&&o.insert({filepath:t._fullpath,stats:c,oid:a}))}else a=l.oid}),t._oid=a}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await Cs.get({fs:t,gitdir:n}),this.config)}}function Gw(){const e=Object.create(null);return Object.defineProperty(e,_E,{value:function({fs:t,dir:n,gitdir:r,cache:i}){return new CCe({fs:t,dir:n,gitdir:r,cache:i})}}),Object.freeze(e),e}function kCe(e,t){const n=t-e;return Array.from({length:n},(r,i)=>e+i)}const OY=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class ECe{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*TCe(e){const t=new ECe;let n;const r=[],i=e.length;for(let s=0;s<i;s++)r[s]=e[s].next().value,r[s]!==void 0&&t.consider(r[s]);if(t.value!==null)for(;;){const s=[];n=t.value,t.reset();for(let a=0;a<i;a++)r[a]!==void 0&&r[a]===n?(s[a]=r[a],r[a]=e[a].next().value):s[a]=null,r[a]!==void 0&&t.consider(r[a]);if(yield s,t.value===null)return}}async function eh({fs:e,cache:t,dir:n,gitdir:r,trees:i,map:s=async(l,c)=>c,reduce:a=async(l,c)=>{const u=OY(c);return l!==void 0&&u.unshift(l),u},iterate:o=(l,c)=>Promise.all([...c].map(l))}){const l=i.map(m=>m[_E]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(l.length).fill("."),u=kCe(0,l.length),d=async m=>{u.map(v=>{const x=m[v];m[v]=x&&new l[v].ConstructEntry(x)});const b=(await Promise.all(u.map(v=>{const x=m[v];return x?l[v].readdir(x):[]}))).map(v=>(v===null?[]:v)[Symbol.iterator]());return{entries:m,children:TCe(b)}},h=async m=>{const{entries:y,children:b}=await d(m),v=y.find(_=>_&&_._fullpath)._fullpath,x=await s(v,y);if(x!==null){let _=await o(h,b);return _=_.filter(S=>S!==void 0),a(x,_)}};return h(c)}async function J3(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const i=Lt.join(t,r);return e.lstat(i).then(s=>{if(s)return s.isDirectory()?J3(e,i):e.rm(i)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function ACe(e){return RCe(e)&&D9(e.then)&&D9(e.catch)}function RCe(e){return e&&typeof e=="object"}function D9(e){return typeof e=="function"}function F9(e){return ACe((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const L9=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function B9(e,t){if(F9(t))for(const n of L9)e[`_${n}`]=t[n].bind(t);else for(const n of L9)e[`_${n}`]=yN(t[n].bind(t));F9(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=J3.bind(null,e):t.rm?e._rm=yN(t.rm.bind(t)):t.rmdir.length>2?e._rm=yN(t.rmdir.bind(t)):e._rm=J3.bind(null,e)}class _n{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?B9(this,t.promises):B9(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=on.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(w0(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const i=w0(t);if(i==="."||i==="/"||i===t)throw r;await this.mkdir(i),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(wE),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async i=>{const s=t+"/"+i;return(await this._stat(s)).isDirectory()?this.readdirDeep(s):s}))).reduce((i,s)=>i.concat(s),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return on.isBuffer(r)?r:on.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function st(e,t){if(t===void 0)throw new xo(e)}async function yC(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function ICe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),commit:r="HEAD",cache:i={}}){try{st("fs",e),st("dir",t),st("gitdir",n);const s=new _n(e),a=[kl({ref:r}),Gw(),dy()];let o=[];await Zs.acquire({fs:s,gitdir:n,cache:i},async function(c){o=c.unmergedPaths});const l=await eh({fs:s,cache:i,dir:t,gitdir:n,trees:a,map:async function(c,[u,d,h]){const m=!await yC(d,h),y=o.includes(c),b=!await yC(h,u);if(m||y)return u?{path:c,mode:await u.mode(),oid:await u.oid(),type:await u.type(),content:await u.content()}:void 0;if(b)return!1;throw new Hw(c)}});await Zs.acquire({fs:s,gitdir:n,cache:i},async function(c){for(const u of l)if(u!==!1){if(!u){await s.rmdir(`${t}/${u.path}`,{recursive:!0}),c.delete({filepath:u.path});continue}if(u.type==="blob"){const d=new TextDecoder().decode(u.content);await s.write(`${t}/${u.path}`,d,{mode:u.mode}),c.insert({filepath:u.path,oid:u.oid,stage:0})}}})}catch(s){throw s.caller="git.abortMerge",s}}class gy{static async isIgnored({fs:t,dir:n,gitdir:r=Lt.join(n,".git"),filepath:i}){if(hC(i)===".git")return!0;if(i===".")return!1;let s="";const a=Lt.join(r,"info","exclude");await t.exists(a)&&(s=await t.read(a,"utf8"));const o=[{gitignore:Lt.join(n,".gitignore"),filepath:i}],l=i.split("/").filter(Boolean);for(let u=1;u<l.length;u++){const d=l.slice(0,u).join("/"),h=l.slice(u).join("/");o.push({gitignore:Lt.join(n,d,".gitignore"),filepath:h})}let c=!1;for(const u of o){let d;try{d=await t.read(u.gitignore,"utf8")}catch(y){if(y.code==="NOENT")continue}const h=T2e().add(s);h.add(d);const m=w0(u.filepath);if(m!=="."&&h.ignores(m))return!0;c?c=!h.test(u.filepath).unignored:c=h.test(u.filepath).ignored}return c}}async function NCe({fs:e,gitdir:t,object:n,format:r,oid:i}){const s=`objects/${i.slice(0,2)}/${i.slice(2)}`,a=`${t}/${s}`;await e.exists(a)||await e.write(a,n)}let TN=null;async function DY(e){return TN===null&&(TN=jCe()),TN?MCe(e):_O.deflate(e)}async function MCe(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function jCe(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function To({fs:e,gitdir:t,type:n,object:r,format:i="content",oid:s=void 0,dryRun:a=!1}){return i!=="deflated"&&(i!=="wrapped"&&(r=fy.wrap({type:n,object:r})),s=await _d(r),r=on.from(await DY(r))),a||await NCe({fs:e,gitdir:t,object:r,format:"deflated",oid:s}),s}function FY(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function PCe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r,cache:i={},force:s=!1,parallel:a=!0}){try{st("fs",e),st("dir",t),st("gitdir",n),st("filepath",r);const o=new _n(e);await Zs.acquire({fs:o,gitdir:n,cache:i},async l=>{const u=await(await Cs.get({fs:o,gitdir:n})).get("core.autocrlf");return Q3({dir:t,gitdir:n,fs:o,filepath:r,index:l,force:s,parallel:a,autocrlf:u})})}catch(o){throw o.caller="git.add",o}}async function Q3({dir:e,gitdir:t,fs:n,filepath:r,index:i,force:s,parallel:a,autocrlf:o}){r=Array.isArray(r)?r:[r];const l=r.map(async h=>{if(!s&&await gy.isIgnored({fs:n,dir:e,gitdir:t,filepath:h}))return;const m=await n.lstat(Lt.join(e,h));if(!m)throw new wi(h);if(m.isDirectory()){const y=await n.readdir(Lt.join(e,h));if(a){const b=y.map(v=>Q3({dir:e,gitdir:t,fs:n,filepath:[Lt.join(h,v)],index:i,force:s,parallel:a,autocrlf:o}));await Promise.all(b)}else for(const b of y)await Q3({dir:e,gitdir:t,fs:n,filepath:[Lt.join(h,b)],index:i,force:s,parallel:a,autocrlf:o})}else{const y=m.isSymbolicLink()?await n.readlink(Lt.join(e,h)).then(FY):await n.read(Lt.join(e,h),{autocrlf:o});if(y===null)throw new wi(h);const b=await To({fs:n,gitdir:t,type:"blob",object:y});i.insert({filepath:h,stats:m,oid:b})}}),c=await Promise.allSettled(l),u=c.filter(h=>h.status==="rejected").map(h=>h.reason);if(u.length>1)throw new zw(u);if(u.length===1)throw u[0];return c.filter(h=>h.status==="fulfilled"&&h.value).map(h=>h.value)}async function wx({fs:e,gitdir:t,path:n}){return(await Cs.get({fs:e,gitdir:t})).get(n)}function LY(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const i=n[r];i!==void 0&&(e[r]=i)}return e}async function th({fs:e,gitdir:t,author:n,commit:r}){const i=Math.floor(Date.now()/1e3),s={name:await wx({fs:e,gitdir:t,path:"user.name"}),email:await wx({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},a=LY({},s,r?r.author:void 0,n);if(a.name!==void 0)return a}async function E0({fs:e,gitdir:t,author:n,committer:r,commit:i}){const s=Math.floor(Date.now()/1e3),a={name:await wx({fs:e,gitdir:t,path:"user.name"}),email:await wx({fs:e,gitdir:t,path:"user.email"})||"",timestamp:s,timezoneOffset:new Date(s*1e3).getTimezoneOffset()},o=LY({},a,i?i.committer:void 0,n,r);if(o.name!==void 0)return o}async function BY({fs:e,cache:t,gitdir:n,oid:r}){const{type:i,object:s}=await qi({fs:e,cache:t,gitdir:n,oid:r});if(i==="tag")return r=Wa.from(s).parse().object,BY({fs:e,cache:t,gitdir:n,oid:r});if(i!=="commit")throw new to(r,i,"commit");return{commit:zi.from(s),oid:r}}async function T0({fs:e,cache:t,gitdir:n,oid:r}){const{commit:i,oid:s}=await BY({fs:e,cache:t,gitdir:n,oid:r});return{oid:s,commit:i.parse(),payload:i.withoutSignature()}}async function SE({fs:e,cache:t,onSign:n,gitdir:r,message:i,author:s,committer:a,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:d,parent:h,tree:m}){let y=!1;d||(d=await Gt.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,v;try{b=await Gt.resolve({fs:e,gitdir:r,ref:d}),v=await T0({fs:e,gitdir:r,oid:b,cache:{}})}catch{y=!0}if(l&&y)throw new Ww(d);const x=l?await th({fs:e,gitdir:r,author:s,commit:v.commit}):await th({fs:e,gitdir:r,author:s});if(!x)throw new Ia("author");const _=l?await E0({fs:e,gitdir:r,author:x,committer:a,commit:v.commit}):await E0({fs:e,gitdir:r,author:x,committer:a});if(!_)throw new Ia("committer");return Zs.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(S){const E=RY(S.entries).get(".");if(m||(m=await $Y({fs:e,gitdir:r,inode:E,dryRun:c})),h?h=await Promise.all(h.map(N=>Gt.resolve({fs:e,gitdir:r,ref:N}))):l?h=v.commit.parent:h=b?[b]:[],!i)if(l)i=v.commit.message;else throw new xo("message");let A=zi.from({tree:m,parent:h,author:x,committer:_,message:i});o&&(A=await zi.sign(A,n,o));const R=await To({fs:e,gitdir:r,type:"commit",object:A.toObject(),dryRun:c});return!u&&!c&&await Gt.writeRef({fs:e,gitdir:r,ref:d,value:R}),R})}async function $Y({fs:e,gitdir:t,inode:n,dryRun:r}){const i=n.children;for(const l of i)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await $Y({fs:e,gitdir:t,inode:l,dryRun:r}));const s=i.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),a=So.from(s);return await To({fs:e,gitdir:t,type:"tree",object:a.toObject(),dryRun:r})}async function Kw({fs:e,cache:t,gitdir:n,oid:r,filepath:i}){if(i.startsWith("/"))throw new Qf("leading-slash");if(i.endsWith("/"))throw new Qf("trailing-slash");const s=r,a=await k0({fs:e,cache:t,gitdir:n,oid:r}),o=a.tree;if(i==="")r=a.oid;else{const l=i.split("/");r=await zY({fs:e,cache:t,gitdir:n,tree:o,pathArray:l,oid:s,filepath:i})}return r}async function zY({fs:e,cache:t,gitdir:n,tree:r,pathArray:i,oid:s,filepath:a}){const o=i.shift();for(const l of r)if(l.path===o){if(i.length===0)return l.oid;{const{type:c,object:u}=await qi({fs:e,cache:t,gitdir:n,oid:l.oid});if(c!=="tree")throw new to(s,c,"tree",a);return r=So.from(u),zY({fs:e,cache:t,gitdir:n,tree:r,pathArray:i,oid:s,filepath:a})}}throw new wi(`file or directory found at "${s}:${a}"`)}async function yy({fs:e,cache:t,gitdir:n,oid:r,filepath:i=void 0}){i!==void 0&&(r=await Kw({fs:e,cache:t,gitdir:n,oid:r,filepath:i}));const{tree:s,oid:a}=await k0({fs:e,cache:t,gitdir:n,oid:r});return{oid:a,tree:s.entries()}}async function Yw({fs:e,gitdir:t,tree:n}){const r=So.from(n).toObject();return await To({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function OCe({fs:e,cache:t,onSign:n,gitdir:r,ref:i,oid:s,note:a,force:o,author:l,committer:c,signingKey:u}){let d;try{d=await Gt.resolve({gitdir:r,fs:e,ref:i})}catch(x){if(!(x instanceof wi))throw x}let m=(await yy({fs:e,cache:t,gitdir:r,oid:d||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)m=m.filter(x=>x.path!==s);else for(const x of m)if(x.path===s)throw new yc("note",s);typeof a=="string"&&(a=on.from(a,"utf8"));const y=await To({fs:e,gitdir:r,type:"blob",object:a,format:"content"});m.push({mode:"100644",path:s,oid:y,type:"blob"});const b=await Yw({fs:e,gitdir:r,tree:m});return await SE({fs:e,cache:t,onSign:n,gitdir:r,ref:i,tree:b,parent:d&&[d],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:c,signingKey:u})}async function DCe({fs:e,onSign:t,dir:n,gitdir:r=Lt.join(n,".git"),ref:i="refs/notes/commits",oid:s,note:a,force:o,author:l,committer:c,signingKey:u,cache:d={}}){try{st("fs",e),st("gitdir",r),st("oid",s),st("note",a),u&&st("onSign",t);const h=new _n(e),m=await th({fs:h,gitdir:r,author:l});if(!m)throw new Ia("author");const y=await E0({fs:h,gitdir:r,author:m,committer:c});if(!y)throw new Ia("committer");return await OCe({fs:new _n(h),cache:d,onSign:t,gitdir:r,ref:i,oid:s,note:a,force:o,author:m,committer:y,signingKey:u})}catch(h){throw h.caller="git.addNote",h}}async function UY({fs:e,gitdir:t,remote:n,url:r,force:i}){if(n!==Yc.clean(n))throw new pc(n,Yc.clean(n));const s=await Cs.get({fs:e,gitdir:t});if(!i&&(await s.getSubsections("remote")).includes(n)&&r!==await s.get(`remote.${n}.url`))throw new yc("remote",n);await s.set(`remote.${n}.url`,r),await s.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await Cs.save({fs:e,gitdir:t,config:s})}async function FCe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),remote:r,url:i,force:s=!1}){try{return st("fs",e),st("gitdir",n),st("remote",r),st("url",i),await UY({fs:new _n(e),gitdir:n,remote:r,url:i,force:s})}catch(a){throw a.caller="git.addRemote",a}}async function LCe({fs:e,cache:t,onSign:n,gitdir:r,ref:i,tagger:s,message:a=i,gpgsig:o,object:l,signingKey:c,force:u=!1}){if(i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,!u&&await Gt.exists({fs:e,gitdir:r,ref:i}))throw new yc("tag",i);const d=await Gt.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:h}=await qi({fs:e,cache:t,gitdir:r,oid:d});let m=Wa.from({object:d,type:h,tag:i.replace("refs/tags/",""),tagger:s,message:a,gpgsig:o});c&&(m=await Wa.sign(m,n,c));const y=await To({fs:e,gitdir:r,type:"tag",object:m.toObject()});await Gt.writeRef({fs:e,gitdir:r,ref:i,value:y})}async function BCe({fs:e,onSign:t,dir:n,gitdir:r=Lt.join(n,".git"),ref:i,tagger:s,message:a=i,gpgsig:o,object:l,signingKey:c,force:u=!1,cache:d={}}){try{st("fs",e),st("gitdir",r),st("ref",i),c&&st("onSign",t);const h=new _n(e),m=await th({fs:h,gitdir:r,author:s});if(!m)throw new Ia("tagger");return await LCe({fs:h,cache:d,onSign:t,gitdir:r,ref:i,tagger:m,message:a,gpgsig:o,object:l,signingKey:c,force:u})}catch(h){throw h.caller="git.annotatedTag",h}}async function $Ce({fs:e,gitdir:t,ref:n,object:r,checkout:i=!1,force:s=!1}){if(n!==Yc.clean(n))throw new pc(n,Yc.clean(n));const a=`refs/heads/${n}`;if(!s&&await Gt.exists({fs:e,gitdir:t,ref:a}))throw new yc("branch",n,!1);let o;try{o=await Gt.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}o&&await Gt.writeRef({fs:e,gitdir:t,ref:a,value:o}),i&&await Gt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:a})}async function zCe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,object:i,checkout:s=!1,force:a=!1}){try{return st("fs",e),st("gitdir",n),st("ref",r),await $Ce({fs:new _n(e),gitdir:n,ref:r,object:i,checkout:s,force:a})}catch(o){throw o.caller="git.branch",o}}const qY=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function EO({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:i,gitdir:s,remote:a,ref:o,filepaths:l,noCheckout:c,noUpdateHead:u,dryRun:d,force:h,track:m=!0}){let y;if(r)try{y=await Gt.resolve({fs:e,gitdir:s,ref:"HEAD"})}catch{y="0000000000000000000000000000000000000000"}let b;try{b=await Gt.resolve({fs:e,gitdir:s,ref:o})}catch(v){if(o==="HEAD")throw v;const x=`${a}/${o}`;if(b=await Gt.resolve({fs:e,gitdir:s,ref:x}),m){const _=await Cs.get({fs:e,gitdir:s});await _.set(`branch.${o}.remote`,a),await _.set(`branch.${o}.merge`,`refs/heads/${o}`),await Cs.save({fs:e,gitdir:s,config:_})}await Gt.writeRef({fs:e,gitdir:s,ref:`refs/heads/${o}`,value:b})}if(!c){let v;try{v=await UCe({fs:e,cache:t,onProgress:n,dir:i,gitdir:s,ref:o,force:h,filepaths:l})}catch(E){throw E instanceof wi&&E.data.what===b?new Dw(o,b):E}const x=v.filter(([E])=>E==="conflict").map(([E,A])=>A);if(x.length>0)throw new Ow(x);const _=v.filter(([E])=>E==="error").map(([E,A])=>A);if(_.length>0)throw new gr(_.join(", "));if(d){r&&await r({previousHead:y,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let S=0;const C=v.length;await Zs.acquire({fs:e,gitdir:s,cache:t},async function(E){await Promise.all(v.filter(([A])=>A==="delete"||A==="delete-index").map(async function([A,R]){const N=`${i}/${R}`;A==="delete"&&await e.rm(N),E.delete({filepath:R}),n&&await n({phase:"Updating workdir",loaded:++S,total:C})}))}),await Zs.acquire({fs:e,gitdir:s,cache:t},async function(E){for(const[A,R]of v)if(A==="rmdir"||A==="rmdir-index"){const N=`${i}/${R}`;try{A==="rmdir-index"&&E.delete({filepath:R}),await e.rmdir(N),n&&await n({phase:"Updating workdir",loaded:++S,total:C})}catch(M){if(M.code==="ENOTEMPTY")console.log(`Did not delete ${R} because directory is not empty`);else throw M}}}),await Promise.all(v.filter(([E])=>E==="mkdir"||E==="mkdir-index").map(async function([E,A]){const R=`${i}/${A}`;await e.mkdir(R),n&&await n({phase:"Updating workdir",loaded:++S,total:C})})),await Zs.acquire({fs:e,gitdir:s,cache:t},async function(E){await Promise.all(v.filter(([A])=>A==="create"||A==="create-index"||A==="update"||A==="mkdir-index").map(async function([A,R,N,M,P]){const L=`${i}/${R}`;try{if(A!=="create-index"&&A!=="mkdir-index"){const{object:V}=await qi({fs:e,cache:t,gitdir:s,oid:N});if(P&&await e.rm(L),M===33188)await e.write(L,V);else if(M===33261)await e.write(L,V,{mode:511});else if(M===40960)await e.writelink(L,V);else throw new gr(`Invalid mode 0o${M.toString(8)} detected in blob ${N}`)}const O=await e.lstat(L);M===33261&&(O.mode=493),A==="mkdir-index"&&(O.mode=57344),E.insert({filepath:R,stats:O,oid:N}),n&&await n({phase:"Updating workdir",loaded:++S,total:C})}catch(O){console.log(O)}}))}),r&&await r({previousHead:y,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!u){const v=await Gt.expand({fs:e,gitdir:s,ref:o});v.startsWith("refs/heads")?await Gt.writeSymbolicRef({fs:e,gitdir:s,ref:"HEAD",value:v}):await Gt.writeRef({fs:e,gitdir:s,ref:"HEAD",value:b})}}async function UCe({fs:e,cache:t,onProgress:n,dir:r,gitdir:i,ref:s,force:a,filepaths:o}){let l=0;return eh({fs:e,cache:t,dir:r,gitdir:i,trees:[kl({ref:s}),Gw(),dy()],map:async function(c,[u,d,h]){if(c===".")return;if(o&&!o.some(y=>qY(c,y)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!h,!!u,!!d].map(Number).join("")){case"000":return;case"001":return a&&o&&o.includes(c)?["delete",c]:void 0;case"010":switch(await u.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await u.oid(),await u.mode()];case"commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`new entry Unhandled type ${await u.type()}`]}case"011":switch(`${await u.type()}-${await d.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await u.oid()!==await d.oid()?a?["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()]:["conflict",c]:await u.mode()!==await d.mode()?a?["update",c,await u.oid(),await u.mode(),!0]:["conflict",c]:["create-index",c,await u.oid(),await u.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${u.type}`]}case"100":return["delete-index",c];case"101":switch(await h.type()){case"tree":return["rmdir",c];case"blob":return await h.oid()!==await d.oid()?a?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await h.type()}`]}case"110":case"111":switch(`${await h.type()}-${await u.type()}`){case"tree-tree":return;case"blob-blob":{if(await h.oid()===await u.oid()&&await h.mode()===await u.mode()&&!a)return;if(d){if(await d.oid()!==await h.oid()&&await d.oid()!==await u.oid())return a?["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()]:["conflict",c]}else if(a)return["update",c,await u.oid(),await u.mode(),await u.mode()!==await h.mode()];return await u.mode()!==await h.mode()?["update",c,await u.oid(),await u.mode(),!0]:await u.oid()!==await h.oid()?["update",c,await u.oid(),await u.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await u.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`update entry Unhandled type ${await h.type()}-${await u.type()}`]}}},reduce:async function(c,u){return u=OY(u),c?c&&c[0]==="rmdir"?(u.push(c),u):(u.unshift(c),u):u}})}async function VY({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:i=Lt.join(r,".git"),remote:s="origin",ref:a,filepaths:o,noCheckout:l=!1,noUpdateHead:c=a===void 0,dryRun:u=!1,force:d=!1,track:h=!0,cache:m={}}){try{st("fs",e),st("dir",r),st("gitdir",i);const y=a||"HEAD";return await EO({fs:new _n(e),cache:m,onProgress:t,onPostCheckout:n,dir:r,gitdir:i,remote:s,ref:y,filepaths:o,noCheckout:l,noUpdateHead:c,dryRun:u,force:d,track:h})}catch(y){throw y.caller="git.checkout",y}}const qCe=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function yp(e){const t=qCe.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function _h({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const i=await Gt.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Gt.resolve({fs:e,gitdir:t,ref:i})}catch{return}if(i.startsWith("refs/"))return n?i:yp(i)}function VCe(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function HY({username:e="",password:t=""}){return`Basic ${on.from(`${e}:${t}`).toString("base64")}`}async function Zw(e,t){const n=MY(e);for(;;){const{value:r,done:i}=await n.next();if(r&&await t(r),i)break}n.return&&n.return()}async function bC(e){let t=0;const n=[];await Zw(e,s=>{n.push(s),t+=s.byteLength});const r=new Uint8Array(t);let i=0;for(const s of n)r.set(s,i),i+=s.byteLength;return r}function $9(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function e4(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class as{static flush(){return on.from("0000","utf8")}static delim(){return on.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=on.from(t));const n=t.length+4,r=e4(4,n);return on.concat([on.from(r,"utf8"),t])}static streamReader(t){const n=new jY(t);return async function(){try{let i=await n.read(4);if(i==null)return!0;if(i=parseInt(i.toString("utf8"),16),i===0||i===1)return null;const s=await n.read(i-4);return s??!0}catch(i){return t.error=i,!0}}}}async function z9(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const i=n.slice(0,r),s=n.slice(r+1);t[i]=s}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function U9(e,{service:t}){const n=new Set,r=new Map,i=new Map,s=as.streamReader(e);let a=await s();for(;a===null;)a=await s();if(a===!0)throw new Fw;if(a.includes("version 2"))return z9(s);if(a.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new hm(`# service=${t}\\n`,a.toString("utf8"));let o=await s();for(;o===null;)o=await s();if(o===!0)return{capabilities:n,refs:r,symrefs:i};if(o=o.toString("utf8"),o.includes("version 2"))return z9(s);const[l,c]=AN(o,"\0","\\x00");if(c.split(" ").map(u=>n.add(u)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[u,d]=AN(l," "," ");for(r.set(d,u);;){const h=await s();if(h===!0)break;if(h!==null){const[m,y]=AN(h.toString("utf8")," "," ");r.set(y,m)}}}for(const u of n)if(u.startsWith("symref=")){const d=u.match(/symref=([^:]+):(.*)/);d.length===3&&i.set(d[1],d[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:i}}function AN(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new hm(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const q9=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,V9=(e,t)=>{(t.username||t.password)&&(e.Authorization=HY(t)),t.headers&&Object.assign(e,t.headers)},RN=async e=>{try{const t=on.from(await bC(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class vC{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:i,onAuthFailure:s,corsProxy:a,service:o,url:l,headers:c,protocolVersion:u}){let{url:d,auth:h}=$9(l);const m=a?q9(a,d):d;(h.username||h.password)&&(c.Authorization=HY(h)),u===2&&(c["Git-Protocol"]="version=2");let y,b,v=!1;do if(y=await t.request({onProgress:n,method:"GET",url:`${m}/info/refs?service=${o}`,headers:c}),b=!1,y.statusCode===401||y.statusCode===203){const x=v?s:r;if(x){if(h=await x(d,{...h,headers:{...c}}),h&&h.cancel)throw new my;h&&(V9(c,h),v=!0,b=!0)}}else y.statusCode===200&&v&&i&&await i(d,h);while(b);if(y.statusCode!==200){const{response:x}=await RN(y);throw new S0(y.statusCode,y.statusMessage,x)}if(y.headers["content-type"]===`application/x-${o}-advertisement`){const x=await U9(y.body,{service:o});return x.auth=h,x}else{const{preview:x,response:_,data:S}=await RN(y);try{const C=await U9([S],{service:o});return C.auth=h,C}catch{throw new Uw(x,_)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:i,url:s,auth:a,body:o,headers:l}){const c=$9(s);c&&(s=c.url),r&&(s=q9(r,s)),l["content-type"]=`application/x-${i}-request`,l.accept=`application/x-${i}-result`,V9(l,a);const u=await t.request({onProgress:n,method:"POST",url:`${s}/${i}`,body:o,headers:l});if(u.statusCode!==200){const{response:d}=RN(u);throw new S0(u.statusCode,u.statusMessage,d)}return u}}function HCe({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class CE{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",vC),n.set("https",vC);const r=HCe({url:t});if(!r)throw new Vw(t);if(n.has(r.transport))return n.get(r.transport);throw new qw(t,r.transport,r.transport==="ssh"?VCe(t):void 0)}}let ip=null;class _x{static async read({fs:t,gitdir:n}){ip===null&&(ip=new xx);const r=Lt.join(n,"shallow"),i=new Set;return await ip.acquire(r,async function(){const s=await t.read(r,{encoding:"utf8"});if(s===null||s.trim()==="")return i;s.trim().split(`
`).map(a=>i.add(a))}),i}static async write({fs:t,gitdir:n,oids:r}){ip===null&&(ip=new xx);const i=Lt.join(n,"shallow");if(r.size>0){const s=[...r].join(`
`)+`
`;await ip.acquire(i,async function(){await t.write(i,s,{encoding:"utf8"})})}else await ip.acquire(i,async function(){await t.rm(i)})}}async function WCe({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function GCe({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}){let s=await e.readdir(Lt.join(n,"objects/pack"));s=s.filter(a=>a.endsWith(".idx"));for(const a of s){const o=`${n}/objects/pack/${a}`,l=await kO({fs:e,cache:t,filename:o,getExternalRefDelta:i});if(l.error)throw new gr(l.error);if(l.offsets.has(r))return!0}return!1}async function H9({fs:e,cache:t,gitdir:n,oid:r,format:i="content"}){const s=o=>qi({fs:e,cache:t,gitdir:n,oid:o});let a=await WCe({fs:e,gitdir:n,oid:r});return a||(a=await GCe({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:s})),a}function KCe(e){const i="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===i}function WY(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const i=r.split("=",1)[0];return n.includes(i)})}const kE={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class WS{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function YCe(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function GY(e){const t=new WS;let n="";return(async()=>(await Zw(e,r=>{for(r=r.toString("utf8"),n+=r;;){const i=YCe(n);if(i===-1)break;t.write(n.slice(0,i)),n=n.slice(i)}}),n.length>0&&t.write(n),t.end()))(),t}class KY{static demux(t){const n=as.streamReader(t),r=new WS,i=new WS,s=new WS,a=async function(){const o=await n();if(o===null)return a();if(o===!0){r.end(),s.end(),t.error?i.destroy(t.error):i.end();return}switch(o[0]){case 1:{i.write(o.slice(1));break}case 2:{s.write(o.slice(1));break}case 3:{const l=o.slice(1);s.write(l),r.end(),s.end(),i.destroy(new Error(l.toString("utf8")));return}default:r.write(o)}a()};return a(),{packetlines:r,packfile:i,progress:s}}}async function ZCe(e){const{packetlines:t,packfile:n,progress:r}=KY.demux(e),i=[],s=[],a=[];let o=!1,l=!1;return new Promise((c,u)=>{Zw(t,d=>{const h=d.toString("utf8").trim();if(h.startsWith("shallow")){const m=h.slice(-41).trim();m.length!==40&&u(new Jf(m)),i.push(m)}else if(h.startsWith("unshallow")){const m=h.slice(-41).trim();m.length!==40&&u(new Jf(m)),s.push(m)}else if(h.startsWith("ACK")){const[,m,y]=h.split(" ");a.push({oid:m,status:y}),y||(l=!0)}else h.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(e.error?u(e.error):c({shallows:i,unshallows:s,acks:a,nak:o,packfile:n,progress:r}))}).finally(()=>{l||(e.error?u(e.error):c({shallows:i,unshallows:s,acks:a,nak:o,packfile:n,progress:r}))})})}function XCe({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:i=null,since:s=null,exclude:a=[]}){const o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const c of t)o.push(as.encode(`want ${c}${l}
`)),l="";for(const c of r)o.push(as.encode(`shallow ${c}
`));i!==null&&o.push(as.encode(`deepen ${i}
`)),s!==null&&o.push(as.encode(`deepen-since ${Math.floor(s.valueOf()/1e3)}
`));for(const c of a)o.push(as.encode(`deepen-not ${c}
`));o.push(as.flush());for(const c of n)o.push(as.encode(`have ${c}
`));return o.push(as.encode(`done
`)),o}async function TO({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,gitdir:l,ref:c,remoteRef:u,remote:d,url:h,corsProxy:m,depth:y=null,since:b=null,exclude:v=[],relative:x=!1,tags:_=!1,singleBranch:S=!1,headers:C={},prune:E=!1,pruneTags:A=!1}){const R=c||await _h({fs:e,gitdir:l,test:!0}),N=await Cs.get({fs:e,gitdir:l}),M=d||R&&await N.get(`branch.${R}.remote`)||"origin",P=h||await N.get(`remote.${M}.url`);if(typeof P>"u")throw new xo("remote OR url");const L=u||R&&await N.get(`branch.${R}.merge`)||c||"HEAD";m===void 0&&(m=await N.get("http.corsProxy"));const O=CE.getRemoteHelperFor({url:P}),V=await O.discover({http:n,onAuth:s,onAuthSuccess:a,onAuthFailure:o,corsProxy:m,service:"git-upload-pack",url:P,headers:C,protocolVersion:1}),F=V.auth,J=V.refs;if(J.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(y!==null&&!V.capabilities.has("shallow"))throw new Df("shallow","depth");if(b!==null&&!V.capabilities.has("deepen-since"))throw new Df("deepen-since","since");if(v.length>0&&!V.capabilities.has("deepen-not"))throw new Df("deepen-not","exclude");if(x===!0&&!V.capabilities.has("deepen-relative"))throw new Df("deepen-relative","relative");const{oid:U,fullref:G}=Gt.resolveAgainstMap({ref:L,map:J});for(const qe of J.keys())qe===G||qe==="HEAD"||qe.startsWith("refs/heads/")||_&&qe.startsWith("refs/tags/")||J.delete(qe);const $=WY([...V.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${kE.agent}`]);x&&$.push("deepen-relative");const ne=S?[U]:J.values(),H=S?[R]:await Gt.listRefs({fs:e,gitdir:l,filepath:"refs"});let te=[];for(let qe of H)try{qe=await Gt.expand({fs:e,gitdir:l,ref:qe});const Re=await Gt.resolve({fs:e,gitdir:l,ref:qe});await H9({fs:e,cache:t,gitdir:l,oid:Re})&&te.push(Re)}catch{}te=[...new Set(te)];const ee=await _x.read({fs:e,gitdir:l}),se=V.capabilities.has("shallow")?[...ee]:[],he=XCe({capabilities:$,wants:ne,haves:te,shallows:se,depth:y,since:b,exclude:v}),ce=on.from(await bC(he)),Me=await O.connect({http:n,onProgress:r,corsProxy:m,service:"git-upload-pack",url:P,auth:F,body:[ce],headers:C}),je=await ZCe(Me.body);Me.headers&&(je.headers=Me.headers);for(const qe of je.shallows)if(!ee.has(qe))try{const{object:Re}=await qi({fs:e,cache:t,gitdir:l,oid:qe}),K=new zi(Re),ge=await Promise.all(K.headers().parent.map(le=>H9({fs:e,cache:t,gitdir:l,oid:le})));ge.length===0||ge.every(le=>le)||ee.add(qe)}catch{ee.add(qe)}for(const qe of je.unshallows)ee.delete(qe);if(await _x.write({fs:e,gitdir:l,oids:ee}),S){const qe=new Map([[G,U]]),Re=new Map;let K=10,ge=G;for(;K--;){const oe=V.symrefs.get(ge);if(oe===void 0)break;Re.set(ge,oe),ge=oe}const Ae=J.get(ge);Ae&&qe.set(ge,Ae);const{pruned:le}=await Gt.updateRemoteRefs({fs:e,gitdir:l,remote:M,refs:qe,symrefs:Re,tags:_,prune:E});E&&(je.pruned=le)}else{const{pruned:qe}=await Gt.updateRemoteRefs({fs:e,gitdir:l,remote:M,refs:J,symrefs:V.symrefs,tags:_,prune:E,pruneTags:A});E&&(je.pruned=qe)}if(je.HEAD=V.symrefs.get("HEAD"),je.HEAD===void 0){const{oid:qe}=Gt.resolveAgainstMap({ref:"HEAD",map:J});for(const[Re,K]of J.entries())if(Re!=="HEAD"&&K===qe){je.HEAD=Re;break}}const Ne=G.startsWith("refs/tags")?"tag":"branch";if(je.FETCH_HEAD={oid:U,description:`${Ne} '${yp(G)}' of ${P}`},r||i){const qe=GY(je.progress);Zw(qe,async Re=>{if(i&&await i(Re),r){const K=Re.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);K&&await r({phase:K[1].trim(),loaded:parseInt(K[2],10),total:parseInt(K[3],10)})}})}const Ce=on.from(await bC(je.packfile));if(Me.body.error)throw Me.body.error;const Ue=Ce.slice(-20).toString("hex"),et={defaultBranch:je.HEAD,fetchHead:je.FETCH_HEAD.oid,fetchHeadDescription:je.FETCH_HEAD.description};if(je.headers&&(et.headers=je.headers),E&&(et.pruned=je.pruned),Ue!==""&&!KCe(Ce)){et.packfile=`objects/pack/pack-${Ue}.pack`;const qe=Lt.join(l,et.packfile);await e.write(qe,Ce);const Re=ge=>qi({fs:e,cache:t,gitdir:l,oid:ge}),K=await _0.fromPack({pack:Ce,getExternalRefDelta:Re,onProgress:r});await e.write(qe.replace(/\.pack$/,".idx"),await K.toBuffer())}return et}async function YY({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Lt.join(n,".git"),defaultBranch:i="master"}){if(await e.exists(r+"/config"))return;let s=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];s=s.map(a=>r+"/"+a);for(const a of s)await e.mkdir(a);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${i}
`)}async function JCe({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,onPostCheckout:l,dir:c,gitdir:u,url:d,corsProxy:h,ref:m,remote:y,depth:b,since:v,exclude:x,relative:_,singleBranch:S,noCheckout:C,noTags:E,headers:A}){try{if(await YY({fs:e,gitdir:u}),await UY({fs:e,gitdir:u,remote:y,url:d,force:!1}),h){const M=await Cs.get({fs:e,gitdir:u});await M.set("http.corsProxy",h),await Cs.save({fs:e,gitdir:u,config:M})}const{defaultBranch:R,fetchHead:N}=await TO({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,gitdir:u,ref:m,remote:y,corsProxy:h,depth:b,since:v,exclude:x,relative:_,singleBranch:S,headers:A,tags:!E});if(N===null)return;m=m||R,m=m.replace("refs/heads/",""),await EO({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:c,gitdir:u,ref:m,remote:y,noCheckout:C})}catch(R){throw await e.rmdir(u,{recursive:!0,maxRetries:10}).catch(()=>{}),R}}async function QCe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,onPostCheckout:o,dir:l,gitdir:c=Lt.join(l,".git"),url:u,corsProxy:d=void 0,ref:h=void 0,remote:m="origin",depth:y=void 0,since:b=void 0,exclude:v=[],relative:x=!1,singleBranch:_=!1,noCheckout:S=!1,noTags:C=!1,headers:E={},cache:A={}}){try{return st("fs",e),st("http",t),st("gitdir",c),S||st("dir",l),st("url",u),await JCe({fs:new _n(e),cache:A,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,onPostCheckout:o,dir:l,gitdir:c,url:u,corsProxy:d,ref:h,remote:m,depth:y,since:b,exclude:v,relative:x,singleBranch:_,noCheckout:S,noTags:C,headers:E})}catch(R){throw R.caller="git.clone",R}}async function eke({fs:e,onSign:t,dir:n,gitdir:r=Lt.join(n,".git"),message:i,author:s,committer:a,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:d,parent:h,tree:m,cache:y={}}){try{st("fs",e),l||st("message",i),o&&st("onSign",t);const b=new _n(e);return await SE({fs:b,cache:y,onSign:t,gitdir:r,message:i,author:s,committer:a,signingKey:o,amend:l,dryRun:c,noUpdateBranch:u,ref:d,parent:h,tree:m})}catch(b){throw b.caller="git.commit",b}}async function tke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),fullname:r=!1,test:i=!1}){try{return st("fs",e),st("gitdir",n),await _h({fs:new _n(e),gitdir:n,fullname:r,test:i})}catch(s){throw s.caller="git.currentBranch",s}}async function nke({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Gt.exists({fs:e,gitdir:t,ref:n}))throw new wi(n);const i=await Gt.expand({fs:e,gitdir:t,ref:n}),s=await _h({fs:e,gitdir:t,fullname:!0});if(i===s){const l=await Gt.resolve({fs:e,gitdir:t,ref:i});await Gt.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await Gt.deleteRef({fs:e,gitdir:t,ref:i});const a=yp(n),o=await Cs.get({fs:e,gitdir:t});await o.deleteSection("branch",a),await Cs.save({fs:e,gitdir:t,config:o})}async function rke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r}){try{return st("fs",e),st("ref",r),await nke({fs:new _n(e),gitdir:n,ref:r})}catch(i){throw i.caller="git.deleteBranch",i}}async function ike({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r}){try{st("fs",e),st("ref",r),await Gt.deleteRef({fs:new _n(e),gitdir:n,ref:r})}catch(i){throw i.caller="git.deleteRef",i}}async function ske({fs:e,gitdir:t,remote:n}){const r=await Cs.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await Cs.save({fs:e,gitdir:t,config:r})}async function ake({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),remote:r}){try{return st("fs",e),st("remote",r),await ske({fs:new _n(e),gitdir:n,remote:r})}catch(i){throw i.caller="git.deleteRemote",i}}async function oke({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Gt.deleteRef({fs:e,gitdir:t,ref:n})}async function lke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r}){try{return st("fs",e),st("ref",r),await oke({fs:new _n(e),gitdir:n,ref:r})}catch(i){throw i.caller="git.deleteTag",i}}async function cke({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(s=>`${r}${s}`).filter(s=>s.startsWith(n))}async function uke({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}){const s=[];let a=await e.readdir(Lt.join(n,"objects/pack"));a=a.filter(o=>o.endsWith(".idx"));for(const o of a){const l=`${n}/objects/pack/${o}`,c=await kO({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(c.error)throw new gr(c.error);for(const u of c.offsets.keys())u.startsWith(r)&&s.push(u)}return s}async function dke({fs:e,cache:t,gitdir:n,oid:r}){const i=o=>qi({fs:e,cache:t,gitdir:n,oid:o}),s=await cke({fs:e,gitdir:n,oid:r}),a=await uke({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i});for(const o of a)s.indexOf(o)===-1&&s.push(o);if(s.length===1)return s[0];throw s.length>1?new Pw("oids",r,s):new wi(`an object matching "${r}"`)}async function fke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,cache:i={}}){try{return st("fs",e),st("gitdir",n),st("oid",r),await dke({fs:new _n(e),cache:i,gitdir:n,oid:r})}catch(s){throw s.caller="git.expandOid",s}}async function hke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r}){try{return st("fs",e),st("gitdir",n),st("ref",r),await Gt.expand({fs:new _n(e),gitdir:n,ref:r})}catch(i){throw i.caller="git.expandRef",i}}async function AO({fs:e,cache:t,gitdir:n,oids:r}){const i={},s=r.length;let a=r.map((o,l)=>({index:l,oid:o}));for(;a.length;){const o=new Set;for(const{oid:c,index:u}of a)i[c]||(i[c]=new Set),i[c].add(u),i[c].size===s&&o.add(c);if(o.size>0)return[...o];const l=new Map;for(const{oid:c,index:u}of a)try{const{object:d}=await qi({fs:e,cache:t,gitdir:n,oid:c}),h=zi.from(d),{parent:m}=h.parseHeaders();for(const y of m)(!i[y]||!i[y].has(u))&&l.set(y+":"+u,{oid:y,index:u})}catch{}a=Array.from(l.values())}return[]}const IN=/^.*(\r?\n|$)/gm;function pke({branches:e,contents:t}){const n=e[1],r=e[2],i=t[0],s=t[1],a=t[2],o=s.match(IN),l=i.match(IN),c=a.match(IN),u=j2e(o,l,c),d=7;let h="",m=!0;for(const y of u)y.ok&&(h+=y.ok.join("")),y.conflict&&(m=!1,h+=`${"<".repeat(d)} ${n}
`,h+=y.conflict.a.join(""),h+=`${"=".repeat(d)}
`,h+=y.conflict.b.join(""),h+=`${">".repeat(d)} ${r}
`);return{cleanMerge:m,mergedText:h}}async function mke({fs:e,cache:t,dir:n,gitdir:r=Lt.join(n,".git"),index:i,ourOid:s,baseOid:a,theirOid:o,ourName:l="ours",baseName:c="base",theirName:u="theirs",dryRun:d=!1,abortOnConflict:h=!0,mergeDriver:m}){const y=kl({ref:s}),b=kl({ref:a}),v=kl({ref:o}),x=[],_=[],S=[],C=[],E=await eh({fs:e,cache:t,dir:n,gitdir:r,trees:[y,b,v],map:async function(A,[R,N,M]){const P=hC(A),L=await yC(R,N),O=await yC(M,N);switch(`${L}-${O}`){case"false-false":return{mode:await N.mode(),path:P,oid:await N.oid(),type:await N.type()};case"false-true":return M?{mode:await M.mode(),path:P,oid:await M.oid(),type:await M.type()}:void 0;case"true-false":return R?{mode:await R.mode(),path:P,oid:await R.oid(),type:await R.type()}:void 0;case"true-true":{if(R&&N&&M&&await R.type()==="blob"&&await N.type()==="blob"&&await M.type()==="blob")return gke({fs:e,gitdir:r,path:P,ours:R,base:N,theirs:M,ourName:l,baseName:c,theirName:u,mergeDriver:m}).then(async V=>{if(V.cleanMerge)h||i.insert({filepath:A,oid:V.mergeResult.oid,stage:0});else if(x.push(A),_.push(A),!h){const F=await N.oid(),J=await R.oid(),U=await M.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:F,stage:1}),i.insert({filepath:A,oid:J,stage:2}),i.insert({filepath:A,oid:U,stage:3})}return V.mergeResult});if(N&&!R&&M&&await N.type()==="blob"&&await M.type()==="blob"){if(x.push(A),S.push(A),!h){const V=await N.oid(),F=await M.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:V,stage:1}),i.insert({filepath:A,oid:F,stage:3})}return{mode:await M.mode(),oid:await M.oid(),type:"blob",path:P}}if(N&&R&&!M&&await N.type()==="blob"&&await R.type()==="blob"){if(x.push(A),C.push(A),!h){const V=await N.oid(),F=await R.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:V,stage:1}),i.insert({filepath:A,oid:F,stage:2})}return{mode:await R.mode(),oid:await R.oid(),type:"blob",path:P}}if(N&&!R&&!M&&await N.type()==="blob")return;throw new hy}}},reduce:x.length!==0&&(!n||h)?void 0:async(A,R)=>{const N=R.filter(Boolean);if(A&&!(A&&A.type==="tree"&&N.length===0)){if(N.length>0){const P=new So(N).toObject(),L=await To({fs:e,gitdir:r,type:"tree",object:P,dryRun:d});A.oid=L}return A}}});return x.length!==0?(n&&!h&&await eh({fs:e,cache:t,dir:n,gitdir:r,trees:[kl({ref:E.oid})],map:async function(A,[R]){const N=`${n}/${A}`;if(await R.type()==="blob"){const M=await R.mode(),P=new TextDecoder().decode(await R.content());await e.write(N,P,{mode:M})}return!0}}),new py(x,_,S,C)):E.oid}async function gke({fs:e,gitdir:t,path:n,ours:r,base:i,theirs:s,ourName:a,theirName:o,baseName:l,dryRun:c,mergeDriver:u=pke}){const d="blob",h=await i.mode()===await r.mode()?await s.mode():await r.mode();if(await r.oid()===await s.oid())return{cleanMerge:!0,mergeResult:{mode:h,path:n,oid:await r.oid(),type:d}};if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:h,path:n,oid:await s.oid(),type:d}};if(await s.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:h,path:n,oid:await r.oid(),type:d}};const m=on.from(await r.content()).toString("utf8"),y=on.from(await i.content()).toString("utf8"),b=on.from(await s.content()).toString("utf8"),{mergedText:v,cleanMerge:x}=await u({branches:[l,a,o],contents:[y,m,b],path:n}),_=await To({fs:e,gitdir:t,type:"blob",object:on.from(v,"utf8"),dryRun:c});return{cleanMerge:x,mergeResult:{mode:h,path:n,oid:_,type:d}}}async function ZY({fs:e,cache:t,dir:n,gitdir:r,ours:i,theirs:s,fastForward:a=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:d,author:h,committer:m,signingKey:y,onSign:b,mergeDriver:v}){i===void 0&&(i=await _h({fs:e,gitdir:r,fullname:!0})),i=await Gt.expand({fs:e,gitdir:r,ref:i}),s=await Gt.expand({fs:e,gitdir:r,ref:s});const x=await Gt.resolve({fs:e,gitdir:r,ref:i}),_=await Gt.resolve({fs:e,gitdir:r,ref:s}),S=await AO({fs:e,cache:t,gitdir:r,oids:[x,_]});if(S.length!==1)throw new hy;const C=S[0];if(C===_)return{oid:x,alreadyMerged:!0};if(a&&C===x)return!l&&!c&&await Gt.writeRef({fs:e,gitdir:r,ref:i,value:_}),{oid:_,fastForward:!0};{if(o)throw new Lw;const E=await Zs.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async R=>mke({fs:e,cache:t,dir:n,gitdir:r,index:R,ourOid:x,theirOid:_,baseOid:C,ourName:yp(i),baseName:"base",theirName:yp(s),dryRun:l,abortOnConflict:u,mergeDriver:v}));if(E instanceof py)throw E;return d||(d=`Merge branch '${yp(s)}' into ${yp(i)}`),{oid:await SE({fs:e,cache:t,gitdir:r,message:d,ref:i,tree:E,parent:[x,_],author:h,committer:m,signingKey:y,onSign:b,dryRun:l,noUpdateBranch:c}),tree:E,mergeCommit:!0}}}async function XY({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,dir:l,gitdir:c,ref:u,url:d,remote:h,remoteRef:m,prune:y,pruneTags:b,fastForward:v,fastForwardOnly:x,corsProxy:_,singleBranch:S,headers:C,author:E,committer:A,signingKey:R}){try{if(!u){const P=await _h({fs:e,gitdir:c});if(!P)throw new xo("ref");u=P}const{fetchHead:N,fetchHeadDescription:M}=await TO({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,gitdir:c,corsProxy:_,ref:u,url:d,remote:h,remoteRef:m,singleBranch:S,headers:C,prune:y,pruneTags:b});await ZY({fs:e,cache:t,gitdir:c,ours:u,theirs:N,fastForward:v,fastForwardOnly:x,message:`Merge ${M}`,author:E,committer:A,signingKey:R,dryRun:!1,noUpdateBranch:!1}),await EO({fs:e,cache:t,onProgress:r,dir:l,gitdir:c,ref:u,remote:h,noCheckout:!1})}catch(N){throw N.caller="git.pull",N}}async function yke({fs:e,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:l=Lt.join(o,".git"),ref:c,url:u,remote:d,remoteRef:h,corsProxy:m,singleBranch:y,headers:b={},cache:v={}}){try{st("fs",e),st("http",t),st("gitdir",l);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await XY({fs:new _n(e),cache:v,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:l,ref:c,url:u,remote:d,remoteRef:h,fastForwardOnly:!0,corsProxy:m,singleBranch:y,headers:b,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function bke({fs:e,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:l=Lt.join(o,".git"),ref:c,remote:u,remoteRef:d,url:h,corsProxy:m,depth:y=null,since:b=null,exclude:v=[],relative:x=!1,tags:_=!1,singleBranch:S=!1,headers:C={},prune:E=!1,pruneTags:A=!1,cache:R={}}){try{return st("fs",e),st("http",t),st("gitdir",l),await TO({fs:new _n(e),cache:R,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,gitdir:l,ref:c,remote:u,remoteRef:d,url:h,corsProxy:m,depth:y,since:b,exclude:v,relative:x,tags:_,singleBranch:S,headers:C,prune:E,pruneTags:A})}catch(N){throw N.caller="git.fetch",N}}async function vke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oids:r,cache:i={}}){try{return st("fs",e),st("gitdir",n),st("oids",r),await AO({fs:new _n(e),cache:i,gitdir:n,oids:r})}catch(s){throw s.caller="git.findMergeBase",s}}async function JY({fs:e,filepath:t}){if(await e.exists(Lt.join(t,".git")))return t;{const n=w0(t);if(n===t)throw new wi(`git root for ${t}`);return JY({fs:e,filepath:n})}}async function xke({fs:e,filepath:t}){try{return st("fs",e),st("filepath",t),await JY({fs:new _n(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function wke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),path:r}){try{return st("fs",e),st("gitdir",n),st("path",r),await wx({fs:new _n(e),gitdir:n,path:r})}catch(i){throw i.caller="git.getConfig",i}}async function _ke({fs:e,gitdir:t,path:n}){return(await Cs.get({fs:e,gitdir:t})).getall(n)}async function Ske({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),path:r}){try{return st("fs",e),st("gitdir",n),st("path",r),await _ke({fs:new _n(e),gitdir:n,path:r})}catch(i){throw i.caller="git.getConfigAll",i}}async function Cke({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:s,headers:a={},forPush:o=!1}){try{st("http",e),st("url",s);const c=await CE.getRemoteHelperFor({url:s}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,headers:a,protocolVersion:1}),u={capabilities:[...c.capabilities]};for(const[d,h]of c.refs){const m=d.split("/"),y=m.pop();let b=u;for(const v of m)b[v]=b[v]||{},b=b[v];b[y]=h}for(const[d,h]of c.symrefs){const m=d.split("/"),y=m.pop();let b=u;for(const v of m)b[v]=b[v]||{},b=b[v];b[y]=h}return u}catch(l){throw l.caller="git.getRemoteInfo",l}}function QY(e,t,n,r){const i=[];for(const[s,a]of e.refs){if(t&&!s.startsWith(t))continue;if(s.endsWith("^{}")){if(r){const l=s.replace("^{}",""),c=i[i.length-1],u=c.ref===l?c:i.find(d=>d.ref===l);if(u===void 0)throw new Error("I did not expect this to happen");u.peeled=a}continue}const o={ref:s,oid:a};n&&e.symrefs.has(s)&&(o.target=e.symrefs.get(s)),i.push(o)}return i}async function kke({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:s,headers:a={},forPush:o=!1,protocolVersion:l=2}){try{st("http",e),st("url",s);const u=await CE.getRemoteHelperFor({url:s}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,headers:a,protocolVersion:l});if(u.protocolVersion===2)return{protocolVersion:u.protocolVersion,capabilities:u.capabilities2};const d={};for(const h of u.capabilities){const[m,y]=h.split("=");y?d[m]=y:d[m]=!0}return{protocolVersion:1,capabilities:d,refs:QY(u,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function Eke({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=fy.wrap({type:e,object:t})),r=await _d(t)),{oid:r,object:t}}async function Tke({object:e}){try{st("object",e),typeof e=="string"?e=on.from(e,"utf8"):e=on.from(e);const t="blob",{oid:n,object:r}=await Eke({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function Ake({fs:e,cache:t,onProgress:n,dir:r,gitdir:i,filepath:s}){try{s=Lt.join(r,s);const a=await e.read(s),o=c=>qi({fs:e,cache:t,gitdir:i,oid:c}),l=await _0.fromPack({pack:a,getExternalRefDelta:o,onProgress:n});return await e.write(s.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(a){throw a.caller="git.indexPack",a}}async function Rke({fs:e,onProgress:t,dir:n,gitdir:r=Lt.join(n,".git"),filepath:i,cache:s={}}){try{return st("fs",e),st("dir",n),st("gitdir",n),st("filepath",i),await Ake({fs:new _n(e),cache:s,onProgress:t,dir:n,gitdir:r,filepath:i})}catch(a){throw a.caller="git.indexPack",a}}async function Ike({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Lt.join(n,".git"),defaultBranch:i="master"}){try{return st("fs",e),st("gitdir",r),t||st("dir",n),await YY({fs:new _n(e),bare:t,dir:n,gitdir:r,defaultBranch:i})}catch(s){throw s.caller="git.init",s}}async function eZ({fs:e,cache:t,gitdir:n,oid:r,ancestor:i,depth:s}){const a=await _x.read({fs:e,gitdir:n});if(!r)throw new xo("oid");if(!i)throw new xo("ancestor");if(r===i)return!1;const o=[r],l=new Set;let c=0;for(;o.length;){if(c++===s)throw new $w(s);const u=o.shift(),{type:d,object:h}=await qi({fs:e,cache:t,gitdir:n,oid:u});if(d!=="commit")throw new to(u,d,"commit");const m=zi.from(h).parse();for(const y of m.parent)if(y===i)return!0;if(!a.has(u))for(const y of m.parent)l.has(y)||(o.push(y),l.add(y))}return!1}async function Nke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,ancestor:i,depth:s=-1,cache:a={}}){try{return st("fs",e),st("gitdir",n),st("oid",r),st("ancestor",i),await eZ({fs:new _n(e),cache:a,gitdir:n,oid:r,ancestor:i,depth:s})}catch(o){throw o.caller="git.isDescendent",o}}async function Mke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r}){try{return st("fs",e),st("dir",t),st("gitdir",n),st("filepath",r),gy.isIgnored({fs:new _n(e),dir:t,gitdir:n,filepath:r})}catch(i){throw i.caller="git.isIgnored",i}}async function jke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),remote:r}){try{return st("fs",e),st("gitdir",n),Gt.listBranches({fs:new _n(e),gitdir:n,remote:r})}catch(i){throw i.caller="git.listBranches",i}}async function Pke({fs:e,gitdir:t,ref:n,cache:r}){if(n){const i=await Gt.resolve({gitdir:t,fs:e,ref:n}),s=[];return await tZ({fs:e,cache:r,gitdir:t,oid:i,filenames:s,prefix:""}),s}else return Zs.acquire({fs:e,gitdir:t,cache:r},async function(i){return i.entries.map(s=>s.path)})}async function tZ({fs:e,cache:t,gitdir:n,oid:r,filenames:i,prefix:s}){const{tree:a}=await yy({fs:e,cache:t,gitdir:n,oid:r});for(const o of a)o.type==="tree"?await tZ({fs:e,cache:t,gitdir:n,oid:o.oid,filenames:i,prefix:Lt.join(s,o.path)}):i.push(Lt.join(s,o.path))}async function Oke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,cache:i={}}){try{return st("fs",e),st("gitdir",n),await Pke({fs:new _n(e),cache:i,gitdir:n,ref:r})}catch(s){throw s.caller="git.listFiles",s}}async function Dke({fs:e,cache:t,gitdir:n,ref:r}){let i;try{i=await Gt.resolve({gitdir:n,fs:e,ref:r})}catch(o){if(o instanceof wi)return[]}return(await yy({fs:e,cache:t,gitdir:n,oid:i})).tree.map(o=>({target:o.path,note:o.oid}))}async function Fke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r="refs/notes/commits",cache:i={}}){try{return st("fs",e),st("gitdir",n),st("ref",r),await Dke({fs:new _n(e),cache:i,gitdir:n,ref:r})}catch(s){throw s.caller="git.listNotes",s}}async function Lke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r}){try{return st("fs",e),st("gitdir",n),Gt.listRefs({fs:new _n(e),gitdir:n,filepath:r})}catch(i){throw i.caller="git.listRefs",i}}async function Bke({fs:e,gitdir:t}){const n=await Cs.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async s=>{const a=await n.get(`remote.${s}.url`);return{remote:s,url:a}}))}async function $ke({fs:e,dir:t,gitdir:n=Lt.join(t,".git")}){try{return st("fs",e),st("gitdir",n),await Bke({fs:new _n(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function zke(e){const t=as.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[i,s,...a]=r.split(" "),o={ref:s,oid:i};for(const l of a){const[c,u]=l.split(":");c==="symref-target"?o.target=u:c==="peeled"&&(o.peeled=u)}n.push(o)}return n}async function Uke({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(as.encode(`command=ls-refs
`)),r.push(as.encode(`agent=${kE.agent}
`)),(n||t||e)&&r.push(as.delim()),n&&r.push(as.encode("peel")),t&&r.push(as.encode("symrefs")),e&&r.push(as.encode(`ref-prefix ${e}`)),r.push(as.flush()),r}async function qke({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:s,headers:a={},forPush:o=!1,protocolVersion:l=2,prefix:c,symrefs:u,peelTags:d}){try{st("http",e),st("url",s);const h=await vC.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,headers:a,protocolVersion:l});if(h.protocolVersion===1)return QY(h,c,u,d);const m=await Uke({prefix:c,symrefs:u,peelTags:d}),y=await vC.connect({http:e,auth:h.auth,headers:a,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:s,body:m});return zke(y.body)}catch(h){throw h.caller="git.listServerRefs",h}}async function Vke({fs:e,dir:t,gitdir:n=Lt.join(t,".git")}){try{return st("fs",e),st("gitdir",n),Gt.listTags({fs:new _n(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Hke(e,t){return e.committer.timestamp-t.committer.timestamp}const Wke="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function W9({fs:e,cache:t,gitdir:n,oid:r,fileId:i}){if(i===Wke)return;const s=r;let a;const o=await k0({fs:e,cache:t,gitdir:n,oid:r}),l=o.tree;return i===o.oid?a=o.path:(a=await nZ({fs:e,cache:t,gitdir:n,tree:l,fileId:i,oid:s}),Array.isArray(a)&&(a.length===0?a=void 0:a.length===1&&(a=a[0]))),a}async function nZ({fs:e,cache:t,gitdir:n,tree:r,fileId:i,oid:s,filepaths:a=[],parentPath:o=""}){const l=r.entries().map(function(c){let u;return c.oid===i?(u=Lt.join(o,c.path),a.push(u)):c.type==="tree"&&(u=qi({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:d}){return nZ({fs:e,cache:t,gitdir:n,tree:So.from(d),fileId:i,oid:s,filepaths:a,parentPath:Lt.join(o,c.path)})})),u});return await Promise.all(l),a}async function Gke({fs:e,cache:t,gitdir:n,filepath:r,ref:i,depth:s,since:a,force:o,follow:l}){const c=typeof a>"u"?void 0:Math.floor(a.valueOf()/1e3),u=[],d=await _x.read({fs:e,gitdir:n}),h=await Gt.resolve({fs:e,gitdir:n,ref:i}),m=[await T0({fs:e,cache:t,gitdir:n,oid:h})];let y,b,v;function x(_){v&&r&&u.push(_)}for(;m.length>0;){const _=m.pop();if(c!==void 0&&_.commit.committer.timestamp<=c)break;if(r){let S;try{S=await Kw({fs:e,cache:t,gitdir:n,oid:_.commit.tree,filepath:r}),b&&y!==S&&u.push(b),y=S,b=_,v=!0}catch(C){if(C instanceof wi){let E=l&&y;if(E&&(E=await W9({fs:e,cache:t,gitdir:n,oid:_.commit.tree,fileId:y}),E))if(Array.isArray(E)){if(b){const A=await W9({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:y});if(Array.isArray(A))if(E=E.filter(R=>A.indexOf(R)===-1),E.length===1)E=E[0],r=E,b&&u.push(b);else{E=!1,b&&u.push(b);break}}}else r=E,b&&u.push(b);if(!E){if(v&&y&&(u.push(b),!o))break;if(!o&&!l)throw C}b=_,v=!1}else throw C}}else u.push(_);if(s!==void 0&&u.length===s){x(_);break}if(!d.has(_.oid))for(const S of _.commit.parent){const C=await T0({fs:e,cache:t,gitdir:n,oid:S});m.map(E=>E.oid).includes(C.oid)||m.push(C)}m.length===0&&x(_),m.sort((S,C)=>Hke(S.commit,C.commit))}return u}async function Kke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r,ref:i="HEAD",depth:s,since:a,force:o,follow:l,cache:c={}}){try{return st("fs",e),st("gitdir",n),st("ref",i),await Gke({fs:new _n(e),cache:c,gitdir:n,filepath:r,ref:i,depth:s,since:a,force:o,follow:l})}catch(u){throw u.caller="git.log",u}}async function Yke({fs:e,onSign:t,dir:n,gitdir:r=Lt.join(n,".git"),ours:i,theirs:s,fastForward:a=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:d,author:h,committer:m,signingKey:y,cache:b={},mergeDriver:v}){try{st("fs",e),y&&st("onSign",t);const x=new _n(e),_=await th({fs:x,gitdir:r,author:h});if(!_&&(!o||!a))throw new Ia("author");const S=await E0({fs:x,gitdir:r,author:_,committer:m});if(!S&&(!o||!a))throw new Ia("committer");return await ZY({fs:x,cache:b,dir:n,gitdir:r,ours:i,theirs:s,fastForward:a,fastForwardOnly:o,dryRun:l,noUpdateBranch:c,abortOnConflict:u,message:d,author:_,committer:S,signingKey:y,onSign:t,mergeDriver:v})}catch(x){throw x.caller="git.merge",x}}const Zke={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function rZ({fs:e,cache:t,dir:n,gitdir:r=Lt.join(n,".git"),oids:i}){const s=new xY,a=[];function o(u,d){const h=on.from(u,d);a.push(h),s.update(h)}async function l({stype:u,object:d}){const h=Zke[u];let m=d.length,y=m>15?128:0;const b=m&15;m=m>>>4;let v=(y|h|b).toString(16);for(o(v,"hex");y;)y=m>127?128:0,v=y|m&127,o(e4(2,v),"hex"),m=m>>>7;o(on.from(await DY(d)))}o("PACK"),o("00000002","hex"),o(e4(8,i.length),"hex");for(const u of i){const{type:d,object:h}=await qi({fs:e,cache:t,gitdir:r,oid:u});await l({object:h,stype:d})}const c=s.digest();return a.push(c),a}async function Xke({fs:e,cache:t,gitdir:n,oids:r,write:i}){const s=await rZ({fs:e,cache:t,gitdir:n,oids:r}),a=on.from(await bC(s)),l=`pack-${a.slice(-20).toString("hex")}.pack`;return i?(await e.write(Lt.join(n,`objects/pack/${l}`),a),{filename:l}):{filename:l,packfile:new Uint8Array(a)}}async function Jke({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oids:r,write:i=!1,cache:s={}}){try{return st("fs",e),st("gitdir",n),st("oids",r),await Xke({fs:new _n(e),cache:s,gitdir:n,oids:r,write:i})}catch(a){throw a.caller="git.packObjects",a}}async function Qke({fs:e,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:l=Lt.join(o,".git"),ref:c,url:u,remote:d,remoteRef:h,prune:m=!1,pruneTags:y=!1,fastForward:b=!0,fastForwardOnly:v=!1,corsProxy:x,singleBranch:_,headers:S={},author:C,committer:E,signingKey:A,cache:R={}}){try{st("fs",e),st("gitdir",l);const N=new _n(e),M=await th({fs:N,gitdir:l,author:C});if(!M)throw new Ia("author");const P=await E0({fs:N,gitdir:l,author:M,committer:E});if(!P)throw new Ia("committer");return await XY({fs:N,cache:R,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,dir:o,gitdir:l,ref:c,url:u,remote:d,remoteRef:h,fastForward:b,fastForwardOnly:v,corsProxy:x,singleBranch:_,headers:S,author:M,committer:P,signingKey:A,prune:m,pruneTags:y})}catch(N){throw N.caller="git.pull",N}}async function eEe({fs:e,cache:t,dir:n,gitdir:r=Lt.join(n,".git"),start:i,finish:s}){const a=await _x.read({fs:e,gitdir:r}),o=new Set,l=new Set;for(const d of i)o.add(await Gt.resolve({fs:e,gitdir:r,ref:d}));for(const d of s)try{const h=await Gt.resolve({fs:e,gitdir:r,ref:d});l.add(h)}catch{}const c=new Set;async function u(d){c.add(d);const{type:h,object:m}=await qi({fs:e,cache:t,gitdir:r,oid:d});if(h==="tag"){const b=Wa.from(m).headers().object;return u(b)}if(h!=="commit")throw new to(d,h,"commit");if(!a.has(d)){const b=zi.from(m).headers().parent;for(d of b)!l.has(d)&&!c.has(d)&&await u(d)}}for(const d of o)await u(d);return c}async function NN({fs:e,cache:t,dir:n,gitdir:r=Lt.join(n,".git"),oids:i}){const s=new Set;async function a(o){if(s.has(o))return;s.add(o);const{type:l,object:c}=await qi({fs:e,cache:t,gitdir:r,oid:o});if(l==="tag"){const d=Wa.from(c).headers().object;await a(d)}else if(l==="commit"){const d=zi.from(c).headers().tree;await a(d)}else if(l==="tree"){const u=So.from(c);for(const d of u)d.type==="blob"&&s.add(d.oid),d.type==="tree"&&await a(d.oid)}}for(const o of i)await a(o);return s}async function tEe(e){const t={};let n="";const r=as.streamReader(e);let i=await r();for(;i!==!0;)i!==null&&(n+=i.toString("utf8")+`
`),i=await r();const s=n.toString("utf8").split(`
`);if(i=s.shift(),!i.startsWith("unpack "))throw new hm('unpack ok" or "unpack [error message]',i);t.ok=i==="unpack ok",t.ok||(t.error=i.slice(7)),t.refs={};for(const a of s){if(a.trim()==="")continue;const o=a.slice(0,2),l=a.slice(3);let c=l.indexOf(" ");c===-1&&(c=l.length);const u=l.slice(0,c),d=l.slice(c+1);t.refs[u]={ok:o==="ok",error:d}}return t}async function nEe({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const i of t)n.push(as.encode(`${i.oldoid} ${i.oid} ${i.fullRef}${r}
`)),r="";return n.push(as.flush()),n}async function rEe({fs:e,cache:t,http:n,onProgress:r,onMessage:i,onAuth:s,onAuthSuccess:a,onAuthFailure:o,onPrePush:l,gitdir:c,ref:u,remoteRef:d,remote:h,url:m,force:y=!1,delete:b=!1,corsProxy:v,headers:x={}}){const _=u||await _h({fs:e,gitdir:c});if(typeof _>"u")throw new xo("ref");const S=await Cs.get({fs:e,gitdir:c});h=h||await S.get(`branch.${_}.pushRemote`)||await S.get("remote.pushDefault")||await S.get(`branch.${_}.remote`)||"origin";const C=m||await S.get(`remote.${h}.pushurl`)||await S.get(`remote.${h}.url`);if(typeof C>"u")throw new xo("remote OR url");const E=d||await S.get(`branch.${_}.merge`);if(typeof C>"u")throw new xo("remoteRef");v===void 0&&(v=await S.get("http.corsProxy"));const A=await Gt.expand({fs:e,gitdir:c,ref:_}),R=b?"0000000000000000000000000000000000000000":await Gt.resolve({fs:e,gitdir:c,ref:A}),N=CE.getRemoteHelperFor({url:C}),M=await N.discover({http:n,onAuth:s,onAuthSuccess:a,onAuthFailure:o,corsProxy:v,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),P=M.auth;let L;if(!E)L=A;else try{L=await Gt.expandAgainstMap({ref:E,map:M.refs})}catch(ee){if(ee instanceof wi)L=E.startsWith("refs/")?E:`refs/heads/${E}`;else throw ee}const O=M.refs.get(L)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:h,url:C,localRef:{ref:b?"(delete)":A,oid:R},remoteRef:{ref:L,oid:O}}))throw new my;const V=!M.capabilities.has("no-thin");let F=new Set;if(!b){const ee=[...M.refs.values()];let se=new Set;if(O!=="0000000000000000000000000000000000000000"){const he=await AO({fs:e,cache:t,gitdir:c,oids:[R,O]});for(const ce of he)ee.push(ce);V&&(se=await NN({fs:e,cache:t,gitdir:c,oids:he}))}if(!ee.includes(R)){const he=await eEe({fs:e,cache:t,gitdir:c,start:[R],finish:ee});F=await NN({fs:e,cache:t,gitdir:c,oids:he})}if(V){try{const he=await Gt.resolve({fs:e,gitdir:c,ref:`refs/remotes/${h}/HEAD`,depth:2}),{oid:ce}=await Gt.resolveAgainstMap({ref:he.replace(`refs/remotes/${h}/`,""),fullref:he,map:M.refs}),Me=[ce];for(const je of await NN({fs:e,cache:t,gitdir:c,oids:Me}))se.add(je)}catch{}for(const he of se)F.delete(he)}if(R===O&&(y=!0),!y){if(A.startsWith("refs/tags")&&O!=="0000000000000000000000000000000000000000")throw new C0("tag-exists");if(R!=="0000000000000000000000000000000000000000"&&O!=="0000000000000000000000000000000000000000"&&!await eZ({fs:e,cache:t,gitdir:c,oid:R,ancestor:O,depth:-1}))throw new C0("not-fast-forward")}}const J=WY([...M.capabilities],["report-status","side-band-64k",`agent=${kE.agent}`]),U=await nEe({capabilities:J,triplets:[{oldoid:O,oid:R,fullRef:L}]}),G=b?[]:await rZ({fs:e,cache:t,gitdir:c,oids:[...F]}),$=await N.connect({http:n,onProgress:r,corsProxy:v,service:"git-receive-pack",url:C,auth:P,headers:x,body:[...U,...G]}),{packfile:ne,progress:H}=await KY.demux($.body);if(i){const ee=GY(H);Zw(ee,async se=>{await i(se)})}const te=await tEe(ne);if($.headers&&(te.headers=$.headers),h&&te.ok&&te.refs[L].ok&&!A.startsWith("refs/tags")){const ee=`refs/remotes/${h}/${L.replace("refs/heads","")}`;b?await Gt.deleteRef({fs:e,gitdir:c,ref:ee}):await Gt.writeRef({fs:e,gitdir:c,ref:ee,value:R})}if(te.ok&&Object.values(te.refs).every(ee=>ee.ok))return te;{const ee=Object.entries(te.refs).filter(([se,he])=>!he.ok).map(([se,he])=>`
  - ${se}: ${he.error}`).join("");throw new Bw(ee,te)}}async function iEe({fs:e,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,onPrePush:o,dir:l,gitdir:c=Lt.join(l,".git"),ref:u,remoteRef:d,remote:h="origin",url:m,force:y=!1,delete:b=!1,corsProxy:v,headers:x={},cache:_={}}){try{return st("fs",e),st("http",t),st("gitdir",c),await rEe({fs:new _n(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:s,onAuthFailure:a,onPrePush:o,gitdir:c,ref:u,remoteRef:d,remote:h,url:m,force:y,delete:b,corsProxy:v,headers:x})}catch(S){throw S.caller="git.push",S}}async function iZ({fs:e,cache:t,gitdir:n,oid:r}){const{type:i,object:s}=await qi({fs:e,cache:t,gitdir:n,oid:r});if(i==="tag")return r=Wa.from(s).parse().object,iZ({fs:e,cache:t,gitdir:n,oid:r});if(i!=="blob")throw new to(r,i,"blob");return{oid:r,blob:new Uint8Array(s)}}async function sZ({fs:e,cache:t,gitdir:n,oid:r,filepath:i=void 0}){return i!==void 0&&(r=await Kw({fs:e,cache:t,gitdir:n,oid:r,filepath:i})),await iZ({fs:e,cache:t,gitdir:n,oid:r})}async function sEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,filepath:i,cache:s={}}){try{return st("fs",e),st("gitdir",n),st("oid",r),await sZ({fs:new _n(e),cache:s,gitdir:n,oid:r,filepath:i})}catch(a){throw a.caller="git.readBlob",a}}async function aZ({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,cache:i={}}){try{return st("fs",e),st("gitdir",n),st("oid",r),await T0({fs:new _n(e),cache:i,gitdir:n,oid:r})}catch(s){throw s.caller="git.readCommit",s}}async function aEe({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:i}){const s=await Gt.resolve({gitdir:n,fs:e,ref:r}),{blob:a}=await sZ({fs:e,cache:t,gitdir:n,oid:s,filepath:i});return a}async function oEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r="refs/notes/commits",oid:i,cache:s={}}){try{return st("fs",e),st("gitdir",n),st("ref",r),st("oid",i),await aEe({fs:new _n(e),cache:s,gitdir:n,ref:r,oid:i})}catch(a){throw a.caller="git.readNote",a}}async function lEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,format:i="parsed",filepath:s=void 0,encoding:a=void 0,cache:o={}}){try{st("fs",e),st("gitdir",n),st("oid",r);const l=new _n(e);s!==void 0&&(r=await Kw({fs:l,cache:o,gitdir:n,oid:r,filepath:s}));const u=await qi({fs:l,cache:o,gitdir:n,oid:r,format:i==="parsed"?"content":i});if(u.oid=r,i==="parsed")switch(u.format="parsed",u.type){case"commit":u.object=zi.from(u.object).parse();break;case"tree":u.object=So.from(u.object).entries();break;case"blob":a?u.object=u.object.toString(a):(u.object=new Uint8Array(u.object),u.format="content");break;case"tag":u.object=Wa.from(u.object).parse();break;default:throw new to(u.oid,u.type,"blob|commit|tag|tree")}else(u.format==="deflated"||u.format==="wrapped")&&(u.type=u.format);return u}catch(l){throw l.caller="git.readObject",l}}async function cEe({fs:e,cache:t,gitdir:n,oid:r}){const{type:i,object:s}=await qi({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(i!=="tag")throw new to(r,i,"tag");const a=Wa.from(s);return{oid:r,tag:a.parse(),payload:a.payload()}}async function uEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,cache:i={}}){try{return st("fs",e),st("gitdir",n),st("oid",r),await cEe({fs:new _n(e),cache:i,gitdir:n,oid:r})}catch(s){throw s.caller="git.readTag",s}}async function dEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),oid:r,filepath:i=void 0,cache:s={}}){try{return st("fs",e),st("gitdir",n),st("oid",r),await yy({fs:new _n(e),cache:s,gitdir:n,oid:r,filepath:i})}catch(a){throw a.caller="git.readTree",a}}async function fEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r,cache:i={}}){try{st("fs",e),st("gitdir",n),st("filepath",r),await Zs.acquire({fs:new _n(e),gitdir:n,cache:i},async function(s){s.delete({filepath:r})})}catch(s){throw s.caller="git.remove",s}}async function hEe({fs:e,cache:t,onSign:n,gitdir:r,ref:i="refs/notes/commits",oid:s,author:a,committer:o,signingKey:l}){let c;try{c=await Gt.resolve({gitdir:r,fs:e,ref:i})}catch(y){if(!(y instanceof wi))throw y}let d=(await yy({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;d=d.filter(y=>y.path!==s);const h=await Yw({fs:e,gitdir:r,tree:d});return await SE({fs:e,cache:t,onSign:n,gitdir:r,ref:i,tree:h,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:a,committer:o,signingKey:l})}async function pEe({fs:e,onSign:t,dir:n,gitdir:r=Lt.join(n,".git"),ref:i="refs/notes/commits",oid:s,author:a,committer:o,signingKey:l,cache:c={}}){try{st("fs",e),st("gitdir",r),st("oid",s);const u=new _n(e),d=await th({fs:u,gitdir:r,author:a});if(!d)throw new Ia("author");const h=await E0({fs:u,gitdir:r,author:d,committer:o});if(!h)throw new Ia("committer");return await hEe({fs:u,cache:c,onSign:t,gitdir:r,ref:i,oid:s,author:d,committer:h,signingKey:l})}catch(u){throw u.caller="git.removeNote",u}}async function mEe({fs:e,gitdir:t,oldref:n,ref:r,checkout:i=!1}){if(r!==Yc.clean(r))throw new pc(r,Yc.clean(r));if(n!==Yc.clean(n))throw new pc(n,Yc.clean(n));const s=`refs/heads/${n}`,a=`refs/heads/${r}`;if(await Gt.exists({fs:e,gitdir:t,ref:a}))throw new yc("branch",r,!1);const l=await Gt.resolve({fs:e,gitdir:t,ref:s,depth:1});await Gt.writeRef({fs:e,gitdir:t,ref:a,value:l}),await Gt.deleteRef({fs:e,gitdir:t,ref:s});const u=await _h({fs:e,gitdir:t,fullname:!0})===s;(i||u)&&await Gt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:a})}async function gEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,oldref:i,checkout:s=!1}){try{return st("fs",e),st("gitdir",n),st("ref",r),st("oldref",i),await mEe({fs:new _n(e),gitdir:n,ref:r,oldref:i,checkout:s})}catch(a){throw a.caller="git.renameBranch",a}}async function oZ({gitdir:e,type:t,object:n}){return _d(fy.wrap({type:t,object:n}))}async function yEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r,ref:i,cache:s={}}){try{st("fs",e),st("gitdir",n),st("filepath",r);const a=new _n(e);let o,l;try{o=await Gt.resolve({fs:a,gitdir:n,ref:i||"HEAD"})}catch(d){if(i)throw d}if(o)try{o=await Kw({fs:a,cache:s,gitdir:n,oid:o,filepath:r})}catch{o=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const u=t&&await a.read(Lt.join(t,r));u&&(l=await oZ({gitdir:n,type:"blob",object:u}),o===l&&(c=await a.lstat(Lt.join(t,r)))),await Zs.acquire({fs:a,gitdir:n,cache:s},async function(d){d.delete({filepath:r}),o&&d.insert({filepath:r,stats:c,oid:o})})}catch(a){throw a.caller="git.reset",a}}async function bEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,depth:i}){try{return st("fs",e),st("gitdir",n),st("ref",r),await Gt.resolve({fs:new _n(e),gitdir:n,ref:r,depth:i})}catch(s){throw s.caller="git.resolveRef",s}}async function vEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),path:r,value:i,append:s=!1}){try{st("fs",e),st("gitdir",n),st("path",r);const a=new _n(e),o=await Cs.get({fs:a,gitdir:n});s?await o.append(r,i):await o.set(r,i),await Cs.save({fs:a,gitdir:n,config:o})}catch(a){throw a.caller="git.setConfig",a}}async function lZ({fs:e,gitdir:t,commit:n}){const r=zi.from(n).toObject();return await To({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class xC{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const i=t.name.replace(/\s/g,""),s="0000000000000000000000000000000000000000",a=Math.floor(Date.now()/1e3),o=xC.timezoneOffsetForRefLogEntry;return`${s} ${n} ${i} ${t.email} ${a} ${o}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(s=>s).reverse().map((s,a)=>n?`stash@{${a}}: ${s.split("	")[1]}`:s)}}const xEe={stage:dy,workdir:Gw};let MN;async function A0(e,t){return MN===void 0&&(MN=new xx),MN.acquire(e,t)}async function wEe(e,t,n,r,i=null){const s=Lt.join(n,r),a=await e.lstat(s);if(!a)throw new wi(s);if(a.isDirectory())throw new gr(`${s}: file expected, but found directory`);const o=i?await NY({fs:e,gitdir:t,oid:i}):void 0;let l=o?i:void 0;return o||await A0({fs:e,gitdir:t,currentFilepath:s},async()=>{const c=a.isSymbolicLink()?await e.readlink(s).then(FY):await e.read(s);if(c===null)throw new wi(s);l=await To({fs:e,gitdir:t,type:"blob",object:c})}),l}async function _Ee({fs:e,dir:t,gitdir:n,entries:r}){async function i(s){if(s.type==="tree"){if(!s.oid){const a=await Promise.all(s.children.map(i));s.oid=await Yw({fs:e,gitdir:n,tree:a}),s.mode=16384}}else s.type==="blob"&&(s.oid=await wEe(e,n,t,s.path,s.oid),s.mode=33188);return s.path=s.path.split("/").pop(),s}return Promise.all(r.map(i))}async function G9({fs:e,dir:t,gitdir:n,treePair:r}){const i=r[1]==="stage",s=r.map(m=>typeof m=="string"?xEe[m]():m),a=[],u=await eh({fs:e,cache:{},dir:t,gitdir:n,trees:s,map:async(m,[y,b])=>{if(!(m==="."||await gy.isIgnored({fs:e,dir:t,gitdir:n,filepath:m}))&&b)return(!y||await y.oid()!==await b.oid()&&await b.oid()!==void 0)&&a.push([y,b]),{mode:await b.mode(),path:m,oid:await b.oid(),type:await b.type()}},reduce:async(m,y)=>(y=y.filter(Boolean),m?(m.children=y,m):y.length>0?y:void 0),iterate:async(m,y)=>{const b=[];for(const v of y){const[x,_]=v;i?_&&(await e.exists(`${t}/${_.toString()}`)?b.push(v):a.push([null,_])):x&&(_?b.push(v):a.push([x,null]))}return b.length?Promise.all(b.map(m)):[]}});if(a.length===0||u.length===0)return null;const h=(await _Ee({fs:e,dir:t,gitdir:n,entries:u})).filter(Boolean).map(m=>({mode:m.mode,path:m.path,oid:m.oid,type:m.type}));return Yw({fs:e,gitdir:n,tree:h})}async function SEe({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:i,wasStaged:s}){const a=[],o=[],l=await eh({fs:e,cache:{},dir:t,gitdir:n,trees:[kl({ref:i}),kl({ref:r})],map:async(c,[u,d])=>{if(c==="."||await gy.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const h=d?await d.type():await u.type();if(h!=="tree"&&h!=="blob")return;if(!d&&u){const y=h==="tree"?"rmdir":"rm";return h==="tree"&&a.push(c),h==="blob"&&s&&o.push({filepath:c,oid:await u.oid()}),{method:y,filepath:c}}const m=await d.oid();if(!u||await u.oid()!==m)return h==="tree"?{method:"mkdir",filepath:c}:(s&&o.push({filepath:c,oid:m,stats:await e.lstat(Lt.join(t,c))}),{method:"write",filepath:c,oid:m})}});await A0({fs:e,gitdir:n,dirRemoved:a,ops:l},async()=>{for(const c of l){const u=Lt.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(u);break;case"mkdir":await e.mkdir(u);break;case"rm":await e.rm(u);break;case"write":if(!a.some(d=>u.startsWith(d))){const{object:d}=await qi({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(u)&&await e.rm(u),await e.write(u,d)}break}}}),await Zs.acquire({fs:e,gitdir:n,cache:{}},async c=>{o.forEach(({filepath:u,stats:d,oid:h})=>{c.insert({filepath:u,stats:d,oid:h})})})}class hd{constructor({fs:t,dir:n,gitdir:r=Lt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Lt.join(this.gitdir,hd.refStash)}get refLogsStashPath(){return Lt.join(this.gitdir,hd.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await th({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Ia("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return lZ({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new pc(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?T0({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Gt.writeRef({fs:this.fs,gitdir:this.gitdir,ref:hd.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),i=xC.createStashReflogEntry(r,t,n),s=this.refLogsStashPath;await A0({filepath:s,entry:i},async()=>{const a=await this.fs.exists(s)?await this.fs.read(s,"utf8"):"";await this.fs.write(s,a+i,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return xC.getStashReflogEntry(r,t)}}async function CEe({fs:e,dir:t,gitdir:n,message:r=""}){const i=new hd({fs:e,dir:t,gitdir:n});await i.getAuthor();const s=await _h({fs:e,gitdir:n,fullname:!1}),a=await Gt.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await aZ({fs:e,dir:t,gitdir:n,oid:a})).commit.message,c=[a];let u=null,d=kl({ref:"HEAD"});const h=await G9({fs:e,dir:t,gitdir:n,treePair:[kl({ref:"HEAD"}),"stage"]});if(h){const v=await i.writeStashCommit({message:`stash-Index: WIP on ${s} - ${new Date().toISOString()}`,tree:h,parent:c});c.push(v),u=h,d=dy()}const m=await G9({fs:e,dir:t,gitdir:n,treePair:[d,"workdir"]});if(m){const v=await i.writeStashCommit({message:`stash-WorkDir: WIP on ${s} - ${new Date().toISOString()}`,tree:m,parent:[c[c.length-1]]});c.push(v),u=m}if(!u||!h&&!m)throw new wi("changes, nothing to stash");const y=(r.trim()||`WIP on ${s}`)+`: ${a.substring(0,7)} ${l}`,b=await i.writeStashCommit({message:y,tree:u,parent:c});return await i.writeStashRef(b),await i.writeStashReflogEntry({stashCommit:b,message:y}),await VY({fs:e,dir:t,gitdir:n,ref:s,track:!1,force:!0}),b}async function cZ({fs:e,dir:t,gitdir:n,refIdx:r=0}){const s=await new hd({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:a=null}=s.commit?s.commit:{};if(!(!a||!Array.isArray(a)))for(let o=0;o<a.length-1;o++){const c=(await T0({fs:e,cache:{},gitdir:n,oid:a[o+1]})).commit.message.startsWith("stash-Index");await SEe({fs:e,dir:t,gitdir:n,stashCommit:a[o+1],parentCommit:a[o],wasStaged:c})}}async function uZ({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=new hd({fs:e,dir:t,gitdir:n});if(!(await i.readStashCommit(r)).commit)return;const a=i.refStashPath;await A0(a,async()=>{await e.exists(a)&&await e.rm(a)});const o=await i.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const l=i.refLogsStashPath;await A0({reflogEntries:o,stashReflogPath:l,stashMgr:i},async()=>{if(o.length){await e.write(l,o.join(`
`),"utf8");const c=o[o.length-1].split(" ")[1];await i.writeStashRef(c)}else await e.rm(l)})}async function kEe({fs:e,dir:t,gitdir:n}){return new hd({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function EEe({fs:e,dir:t,gitdir:n}){const r=new hd({fs:e,dir:t,gitdir:n}),i=[r.refStashPath,r.refLogsStashPath];await A0(i,async()=>{await Promise.all(i.map(async s=>{if(await e.exists(s))return e.rm(s)}))})}async function TEe({fs:e,dir:t,gitdir:n,refIdx:r=0}){await cZ({fs:e,dir:t,gitdir:n,refIdx:r}),await uZ({fs:e,dir:t,gitdir:n,refIdx:r})}async function AEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),op:r="push",message:i="",refIdx:s=0}){st("fs",e),st("dir",t),st("gitdir",n),st("op",r);const a={push:CEe,apply:cZ,drop:uZ,list:kEe,clear:EEe,pop:TEe},o=["apply","drop","pop"];try{const l=new _n(e);["refs","logs","logs/refs"].map(d=>Lt.join(n,d)).forEach(async d=>{await l.exists(d)||await l.mkdir(d)});const u=a[r];if(u){if(o.includes(r)&&s<0)throw new pc(`stash@${s}`,"number that is in range of [0, num of stash pushed]");return await u({fs:l,dir:t,gitdir:n,message:i,refIdx:s})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function REe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),filepath:r,cache:i={}}){try{st("fs",e),st("gitdir",n),st("filepath",r);const s=new _n(e);if(await gy.isIgnored({fs:s,gitdir:n,dir:t,filepath:r}))return"ignored";const o=await IEe({fs:s,cache:i,gitdir:n}),l=await dZ({fs:s,cache:i,gitdir:n,tree:o,path:r}),c=await Zs.acquire({fs:s,gitdir:n,cache:i},async function(b){for(const v of b)if(v.path===r)return v;return null}),u=await s.lstat(Lt.join(t,r)),d=l!==null,h=c!==null,m=u!==null,y=async()=>{if(h&&!fC(c,u))return c.oid;{const b=await s.read(Lt.join(t,r)),v=await oZ({gitdir:n,type:"blob",object:b});return h&&c.oid===v&&u.size!==-1&&Zs.acquire({fs:s,gitdir:n,cache:i},async function(x){x.insert({filepath:r,stats:u,oid:v})}),v}};if(!d&&!m&&!h)return"absent";if(!d&&!m&&h)return"*absent";if(!d&&m&&!h)return"*added";if(!d&&m&&h)return await y()===c.oid?"added":"*added";if(d&&!m&&!h)return"deleted";if(d&&!m&&h)return l===c.oid,"*deleted";if(d&&m&&!h)return await y()===l?"*undeleted":"*undeletemodified";if(d&&m&&h){const b=await y();return b===l?b===c.oid?"unmodified":"*unmodified":b===c.oid?"modified":"*modified"}}catch(s){throw s.caller="git.status",s}}async function dZ({fs:e,cache:t,gitdir:n,tree:r,path:i}){typeof i=="string"&&(i=i.split("/"));const s=i.shift();for(const a of r)if(a.path===s){if(i.length===0)return a.oid;const{type:o,object:l}=await qi({fs:e,cache:t,gitdir:n,oid:a.oid});if(o==="tree"){const c=So.from(l);return dZ({fs:e,cache:t,gitdir:n,tree:c,path:i})}if(o==="blob")throw new to(a.oid,o,"blob",i.join("/"))}return null}async function IEe({fs:e,cache:t,gitdir:n}){let r;try{r=await Gt.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(s){if(s instanceof wi)return[]}const{tree:i}=await yy({fs:e,cache:t,gitdir:n,oid:r});return i}async function NEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r="HEAD",filepaths:i=["."],filter:s,cache:a={},ignored:o=!1}){try{st("fs",e),st("gitdir",n),st("ref",r);const l=new _n(e);return await eh({fs:l,cache:a,dir:t,gitdir:n,trees:[kl({ref:r}),Gw(),dy()],map:async function(c,[u,d,h]){if(!u&&!h&&d&&!o&&await gy.isIgnored({fs:l,dir:t,filepath:c})||!i.some(A=>qY(c,A)))return null;if(s&&!s(c))return;const[m,y,b]=await Promise.all([u&&u.type(),d&&d.type(),h&&h.type()]),v=[m,y,b].includes("blob");if((m==="tree"||m==="special")&&!v)return;if(m==="commit")return null;if((y==="tree"||y==="special")&&!v)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!v)return;const x=m==="blob"?await u.oid():void 0,_=b==="blob"?await h.oid():void 0;let S;m!=="blob"&&y==="blob"&&b!=="blob"?S="42":y==="blob"&&(S=await d.oid());const C=[void 0,x,S,_],E=C.map(A=>C.indexOf(A));return E.shift(),[c,...E]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function MEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,object:i,force:s=!1}){try{st("fs",e),st("gitdir",n),st("ref",r);const a=new _n(e);if(r===void 0)throw new xo("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const o=await Gt.resolve({fs:a,gitdir:n,ref:i||"HEAD"});if(!s&&await Gt.exists({fs:a,gitdir:n,ref:r}))throw new yc("tag",r);await Gt.writeRef({fs:a,gitdir:n,ref:r,value:o})}catch(a){throw a.caller="git.tag",a}}async function jEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),cache:r={},filepath:i,oid:s,mode:a,add:o,remove:l,force:c}){try{st("fs",e),st("gitdir",n),st("filepath",i);const u=new _n(e);if(l)return await Zs.acquire({fs:u,gitdir:n,cache:r},async function(h){if(!c){const m=await u.lstat(Lt.join(t,i));if(m){if(m.isDirectory())throw new Qf("directory");return}}h.has({filepath:i})&&h.delete({filepath:i})});let d;if(!s){if(d=await u.lstat(Lt.join(t,i)),!d)throw new wi(`file at "${i}" on disk and "remove" not set`);if(d.isDirectory())throw new Qf("directory")}return await Zs.acquire({fs:u,gitdir:n,cache:r},async function(h){if(!o&&!h.has({filepath:i}))throw new wi(`file at "${i}" in index and "add" not set`);let m;if(s)m={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:a,uid:0,gid:0,size:0};else{m=d;const y=m.isSymbolicLink()?await u.readlink(Lt.join(t,i)):await u.read(Lt.join(t,i));s=await To({fs:u,gitdir:n,type:"blob",format:"content",object:y})}return h.insert({filepath:i,oid:s,stats:m}),s})}catch(u){throw u.caller="git.updateIndex",u}}function PEe(){try{return kE.version}catch(e){throw e.caller="git.version",e}}async function OEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),trees:r,map:i,reduce:s,iterate:a,cache:o={}}){try{return st("fs",e),st("gitdir",n),st("trees",r),await eh({fs:new _n(e),cache:o,dir:t,gitdir:n,trees:r,map:i,reduce:s,iterate:a})}catch(l){throw l.caller="git.walk",l}}async function DEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),blob:r}){try{return st("fs",e),st("gitdir",n),st("blob",r),await To({fs:new _n(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(i){throw i.caller="git.writeBlob",i}}async function FEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),commit:r}){try{return st("fs",e),st("gitdir",n),st("commit",r),await lZ({fs:new _n(e),gitdir:n,commit:r})}catch(i){throw i.caller="git.writeCommit",i}}async function LEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),type:r,object:i,format:s="parsed",oid:a,encoding:o=void 0}){try{const l=new _n(e);if(s==="parsed"){switch(r){case"commit":i=zi.from(i).toObject();break;case"tree":i=So.from(i).toObject();break;case"blob":i=on.from(i,o);break;case"tag":i=Wa.from(i).toObject();break;default:throw new to(a||"",r,"blob|commit|tag|tree")}s="content"}return a=await To({fs:l,gitdir:n,type:r,object:i,oid:a,format:s}),a}catch(l){throw l.caller="git.writeObject",l}}async function BEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),ref:r,value:i,force:s=!1,symbolic:a=!1}){try{st("fs",e),st("gitdir",n),st("ref",r),st("value",i);const o=new _n(e);if(r!==Yc.clean(r))throw new pc(r,Yc.clean(r));if(!s&&await Gt.exists({fs:o,gitdir:n,ref:r}))throw new yc("ref",r);a?await Gt.writeSymbolicRef({fs:o,gitdir:n,ref:r,value:i}):(i=await Gt.resolve({fs:o,gitdir:n,ref:i}),await Gt.writeRef({fs:o,gitdir:n,ref:r,value:i}))}catch(o){throw o.caller="git.writeRef",o}}async function $Ee({fs:e,gitdir:t,tag:n}){const r=Wa.from(n).toObject();return await To({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function zEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),tag:r}){try{return st("fs",e),st("gitdir",n),st("tag",r),await $Ee({fs:new _n(e),gitdir:n,tag:r})}catch(i){throw i.caller="git.writeTag",i}}async function UEe({fs:e,dir:t,gitdir:n=Lt.join(t,".git"),tree:r}){try{return st("fs",e),st("gitdir",n),st("tree",r),await Yw({fs:new _n(e),gitdir:n,tree:r})}catch(i){throw i.caller="git.writeTree",i}}var Ns={Errors:gCe,STAGE:dy,TREE:kl,WORKDIR:Gw,add:PCe,abortMerge:ICe,addNote:DCe,addRemote:FCe,annotatedTag:BCe,branch:zCe,checkout:VY,clone:QCe,commit:eke,getConfig:wke,getConfigAll:Ske,setConfig:vEe,currentBranch:tke,deleteBranch:rke,deleteRef:ike,deleteRemote:ake,deleteTag:lke,expandOid:fke,expandRef:hke,fastForward:yke,fetch:bke,findMergeBase:vke,findRoot:xke,getRemoteInfo:Cke,getRemoteInfo2:kke,hashBlob:Tke,indexPack:Rke,init:Ike,isDescendent:Nke,isIgnored:Mke,listBranches:jke,listFiles:Oke,listNotes:Fke,listRefs:Lke,listRemotes:$ke,listServerRefs:qke,listTags:Vke,log:Kke,merge:Yke,packObjects:Jke,pull:Qke,push:iEe,readBlob:sEe,readCommit:aZ,readNote:oEe,readObject:lEe,readTag:uEe,readTree:dEe,remove:fEe,removeNote:pEe,renameBranch:gEe,resetIndex:yEe,updateIndex:jEe,resolveRef:bEe,status:REe,statusMatrix:NEe,tag:MEe,version:PEe,walk:OEe,writeBlob:DEe,writeCommit:FEe,writeObject:LEe,writeRef:BEe,writeTag:zEe,writeTree:UEe,stash:AEe};function qEe(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function VEe(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:qEe(e)}async function HEe(e,t){const n=VEe(e);for(;;){const{value:r,done:i}=await n.next();if(r&&await t(r),i)break}n.return&&n.return()}async function WEe(e){let t=0;const n=[];await HEe(e,s=>{n.push(s),t+=s.byteLength});const r=new Uint8Array(t);let i=0;for(const s of n)r.set(s,i),i+=s.byteLength;return r}function GEe(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function KEe({onProgress:e,url:t,method:n="GET",headers:r={},body:i}){i&&(i=await WEe(i));const s=await fetch(t,{method:n,headers:r,body:i}),a=s.body&&s.body.getReader?GEe(s.body):[new Uint8Array(await s.arrayBuffer())];r={};for(const[o,l]of s.headers.entries())r[o]=l;return{url:s.url,method:s.method,statusCode:s.status,statusMessage:s.statusText,body:a,headers:r}}var Sx={request:KEe};const Cx="https://cors.isomorphic-git.org",R0=new Map,fZ=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=mr.getState();if(!n||!r)return De.error("Git user name and email must be configured in Settings before committing."),!1;try{const i=await Ns.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),s=await Ns.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return i!==n&&await Ns.setConfig({fs:t,dir:e,path:"user.name",value:n}),s!==r&&await Ns.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(i){return console.error("[VFS Git Op] Error checking/setting Git config:",i),De.error(`Failed to configure Git user: ${i instanceof Error?i.message:String(i)}`),!1}},kx=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=R0.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const i=window.prompt(`Enter username for ${e}`);if(!i)return De.error("Authentication cancelled: Username not provided."),null;const s=window.prompt(`Enter password or token for ${i}@${e}`);return s?(R0.set(n,{username:i,password:s}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:i,password:s,authScheme:"Basic"}):(De.error("Authentication cancelled: Password/token not provided."),null)},Ex=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),R0.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),R0.delete(n)),null},Tx=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!R0.has(n)&&t.username&&t.password&&(R0.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},Wg=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let i="";if(r)try{const s=JSON.parse(r);i=s.message||s.error||JSON.stringify(s)}catch{i=r}return`HTTP ${t} ${n}${i?`: ${i}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},YEe=async(e,t)=>{const n=na,r=Fr(e),i=fu(r,".git");try{return(await n.promises.stat(i)).isDirectory()}catch(s){return s instanceof Error&&s.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,s),!1}},hZ=async(e,t,n,r,i)=>{var o;const s=(i==null?void 0:i.fsInstance)??na,a=Fr(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${a}`);try{let l=!1;try{await s.promises.stat(fu(a,".git")),l=!0}catch(h){if(h.code!=="ENOENT")throw h}if(l)throw console.warn(`[VFS Git Op] Clone target ${a} already contains a .git directory.`),new Error(`Repository already cloned at ${a}.`);const c=xE(a);if(c!=="/")try{await s.promises.mkdir(c,{recursive:!0})}catch(h){if(h.code!=="EEXIST")throw h}let u=n;if(!u)try{if(u=(o=(await Ns.getRemoteInfo({http:Sx,url:t,corsProxy:Cx,onAuth:m=>kx(m,r),onAuthFailure:Ex,onAuthSuccess:Tx})).HEAD)==null?void 0:o.replace("refs/heads/",""),!u)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${u}`)}catch(h){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",h),new Error(`Failed to determine default branch: ${Wg(h)}`)}await Ns.clone({fs:s,http:Sx,dir:a,corsProxy:Cx,url:t,ref:u,singleBranch:!0,depth:10,onAuth:h=>kx(h,r),onAuthFailure:Ex,onAuthSuccess:Tx,onProgress:h=>{h.phase==="counting objects"&&h.total?console.log(`Clone progress: ${h.phase} ${h.loaded}/${h.total}`):h.phase==="receiving objects"&&h.total?console.log(`Clone progress: ${h.phase} ${h.loaded}/${h.total}`):console.log(`Clone progress: ${h.phase}`)}}),await s.promises.stat(fu(a,".git"));const d=await Ns.currentBranch({fs:s,dir:a,fullname:!1}).catch(()=>null);d!==u&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${d}, expected ${u}. Checking out...`),await Ns.checkout({fs:s,dir:a,ref:u})),De.success(`Repository cloned successfully into ${a} (branch: ${u}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const c=Wg(l);if(l instanceof Error&&l.message.includes("already cloned")||De.error(`Git clone failed: ${c}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${a}`),await s.promises.rm(a,{recursive:!0,force:!0})}catch(u){console.warn("[VFS Git Op] Failed cleanup after clone error:",u)}throw l}},pZ=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??na,r=Fr(e);try{await Ns.init({fs:n,dir:r}),De.success(`Initialized empty Git repository in "${cs(r)}"`)}catch(i){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,i),De.error(`Git init failed: ${i instanceof Error?i.message:String(i)}`),i}},RO=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??na,i=Fr(e);try{if(!await fZ(i,r))throw new Error("Git user configuration is missing or invalid.");if(await Ns.add({fs:r,dir:i,filepath:"."}),!(await Ns.statusMatrix({fs:r,dir:i})).some(([,,c])=>c!==0)){De.info("No changes detected to commit.");return}const l=await Ns.commit({fs:r,dir:i,message:t,author:{name:mr.getState().gitUserName,email:mr.getState().gitUserEmail}});De.success(`Changes committed: ${l.substring(0,7)}`)}catch(s){throw console.error(`[VFS Git Op] Git commit failed for ${i}:`,s),De.error(`Git commit failed: ${s instanceof Error?s.message:String(s)}`),s}},EE=async(e,t,n,r)=>{const i=(r==null?void 0:r.fsInstance)??na,s=Fr(e);try{if(!await fZ(s,i))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${s}`);const o=await Ns.currentBranch({fs:i,dir:s,fullname:!1}).catch(()=>null);if(o!==t){console.log(`[VFS Git Op] Current branch is ${o}, switching to ${t} before pull...`);try{await Ns.checkout({fs:i,dir:s,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await Ns.fetch({fs:i,http:Sx,dir:s,corsProxy:Cx,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:c=>kx(c,n),onAuthFailure:Ex,onAuthSuccess:Tx}),await Ns.branch({fs:i,dir:s,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(c){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,c),new Error(`Failed to switch to or create local branch "${t}": ${Wg(c)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${Wg(l)}`)}}await Ns.pull({fs:i,http:Sx,dir:s,ref:t,singleBranch:!0,author:{name:mr.getState().gitUserName,email:mr.getState().gitUserEmail},corsProxy:Cx,onAuth:l=>kx(l,n),onAuthFailure:Ex,onAuthSuccess:Tx}),De.success(`Pulled changes successfully for "${cs(s)}"`),console.log(`[VFS Git Op] Pull successful for ${s}`)}catch(a){if(console.error(`[VFS Git Op] Git pull failed for ${s}:`,a),a instanceof Error&&a.message.toLowerCase().includes("already up-to-date")?De.info(`Branch "${t}" is already up-to-date.`):De.error(`Git pull failed: ${Wg(a)}`),!(a instanceof Error&&a.message.toLowerCase().includes("already up-to-date")))throw a}},IO=async(e,t,n,r)=>{var a,o;const i=(r==null?void 0:r.fsInstance)??na,s=Fr(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${s}`);const l=await Ns.push({fs:i,http:Sx,dir:s,corsProxy:Cx,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:c=>kx(c,n),onAuthFailure:Ex,onAuthSuccess:Tx});if(l!=null&&l.ok)De.success(`Pushed changes successfully for "${cs(s)}"`);else if((a=l==null?void 0:l.error)!=null&&a.includes("up-to-date"))De.info(`Branch "${t}" already up-to-date on remote.`);else throw(o=l==null?void 0:l.error)!=null&&o.includes("rejected")?(De.error(`Push rejected for "${cs(s)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${s}:`,l),l instanceof Error&&l.message.includes("rejected")||De.error(`Git push failed: ${Wg(l)}`),l}},mZ=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??na,r=Fr(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const i=await Ns.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",i);const s=i.map(([a,o,l,c])=>{let u="";return c===2&&(u+="INDEX_Modified "),c===3&&(u+="INDEX_Added "),o===0&&l===2?u+="WT_New":o===1&&l===2?u+="WT_Modified":o===1&&l===0?u+="WT_Deleted":o===1&&l===1&&c===0&&(u="Unmodified"),(!u||u==="INDEX_Unmodified ")&&(u=`h:${o} w:${l} s:${c}`),`${a}: ${u.trim()}`}).filter(a=>!a.endsWith("Unmodified")).join(`
`);De.info(`Git Status for "${cs(r)}":
${s||"No changes"}`,{duration:15e3})}catch(i){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,i),De.error(`Git status failed: ${i instanceof Error?i.message:String(i)}`),i}},qp=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??na,r=Fr(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(i){if(i instanceof Error&&i.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,i),De.error(`Error creating directory "${cs(r)}": ${i instanceof Error?i.message:String(i)}`),i}},ZEe=async e=>{try{const t={backend:QSe,name:`litechat_vfs_${e}`};return await HSe(t),na}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),De.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},NO=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??na,r=Fr(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await qp(r,{fsInstance:n}),[];throw l}const s=(await n.promises.readdir(r)).map(async l=>{const c=fu(r,l);try{const u=await n.promises.stat(c);return{name:l,path:c,isDirectory:u.isDirectory(),size:u.size,lastModified:u.mtime}}catch(u){return console.error(`[VFS Op] Failed to stat ${c}:`,u),null}});return(await Promise.all(s)).filter(l=>l!==null)}catch(i){throw console.error(`[VFS Op] Failed to list directory ${r}:`,i),De.error(`Error listing files: ${i instanceof Error?i.message:String(i)}`),i}},Sh=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??na,r=Fr(e);try{const i=await n.promises.readFile(r);return Le.emit(un.fileRead,{path:r}),i}catch(i){throw console.error(`[VFS Op] Failed to read file ${r}:`,i),De.error(`Error reading file "${cs(r)}": ${i instanceof Error?i.message:String(i)}`),i}},TE=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??na,i=Fr(e),s=xE(i);try{s!=="/"&&await qp(s,{fsInstance:r}),await r.promises.writeFile(i,t),Le.emit(un.fileWritten,{path:i})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${i}:`,a),De.error(`Error writing file "${cs(i)}": ${a instanceof Error?a.message:String(a)}`)),a}},MO=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??na,i=Fr(e);if(i==="/")throw De.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(i)).isDirectory()?(await r.promises.rm(i,{recursive:t}),Le.emit(un.fileDeleted,{path:i})):(await r.promises.unlink(i),Le.emit(un.fileDeleted,{path:i})),De.success(`"${cs(i)}" deleted.`)}catch(s){if(s instanceof Error&&s.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${i}`);return}throw console.error(`[VFS Op] Failed to delete ${i}:`,s),De.error(`Error deleting "${cs(i)}": ${s instanceof Error?s.message:String(s)}`),s}},gZ=async(e,t)=>{await qp(e,t)},XEe=async(e,t,n)=>{try{const r=await Sh(e,n),i=new Blob([r]),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s;const o=Fr(e);a.download=t||cs(o),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||De.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},yZ=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??na,i=Fr(t);let s=0,a=0;const o=Array.from(e);try{await qp(i,{fsInstance:r});for(const l of o){const c=fu(i,l.name);try{const u=await l.arrayBuffer();await TE(c,new Uint8Array(u),{fsInstance:r}),s++}catch(u){a++,console.error(`[VFS Op] Failed to upload ${l.name}:`,u)}}}catch(l){a=o.length,console.error(`[VFS Op] Failed to prepare target directory ${i} for upload:`,l)}finally{a>0&&s>0?De.warning(`Upload complete with issues. ${s} succeeded, ${a} failed.`):a===0&&s>0&&De.success(`Successfully uploaded ${s} file(s) to ${i==="/"?"root":cs(i)}.`)}},JEe=async(e,t,n)=>{const r=na;if(!e.name.toLowerCase().endsWith(".zip")){De.error("Please select a valid ZIP file.");return}const i=Fr(t);let s;try{await qp(i,{fsInstance:r}),s=await xO.loadAsync(e);const a=Object.values(s.files),o=await Promise.allSettled(a.map(async d=>{const h=fu(i,d.name);if(d.dir)await qp(h,{fsInstance:r});else{const m=await d.async("uint8array");await TE(h,m,{fsInstance:r})}return{name:d.name,isDir:d.dir}}));let l=0,c=0,u=0;o.forEach(d=>{d.status==="fulfilled"&&d.value?d.value.isDir?c++:l++:d.status==="rejected"&&(u++,console.error("[VFS Op] ZIP Extraction item failed:",d.reason))}),u>0?De.warning(`Finished extracting "${e.name}". ${l+c} items succeeded, ${u} failed.`):De.success(`Successfully extracted ${l} files and ${c} folders from "${e.name}" to ${i==="/"?"root":cs(i)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),De.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},K9=async(e,t="/",n)=>{const r=na,i=new xO,s=Fr(t),a=cs(s)||"root";try{try{if(!(await r.promises.stat(s)).isDirectory()){De.error(`Cannot export: "${a}" is not a directory.`);return}}catch(h){h instanceof Error&&h.code==="ENOENT"?De.error(`Cannot export: Path "${a}" not found.`):De.error(`Cannot export: Error accessing path "${a}". ${h instanceof Error?h.message:String(h)}`);return}const o=async(h,m)=>{const y=await NO(h,{fsInstance:r});for(const b of y)if(b.isDirectory){if(b.name===".git")continue;const v=m.folder(b.name);if(v)await o(b.path,v);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const v=await Sh(b.path,{fsInstance:r});m.file(b.name,v)}};await o(s,i);const l=await i.generateAsync({type:"blob"}),c=URL.createObjectURL(l),u=document.createElement("a");u.href=c;const d=`vfs_${a}_export.zip`;u.download=e||d,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c),De.success(`"${a}" exported as ${u.download}.`)}catch(o){console.error("[VFS Op] Failed to download all as zip:",o),o instanceof Error&&(o.message.includes("Error listing files")||o.message.includes("Error reading file")||o.message.includes("Cannot export"))||De.error(`ZIP export failed: ${o instanceof Error?o.message:String(o)}`)}},bZ=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??na,i=Fr(e),s=Fr(t);if(i==="/"||s==="/")throw De.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(i!==s)try{const a=xE(s);a!=="/"&&await qp(a,{fsInstance:r}),await r.promises.rename(i,s),De.success(`Renamed "${cs(i)}" to "${cs(s)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||De.error(`Rename failed: Original item "${cs(i)}" not found.`):a instanceof Error&&a.code==="EEXIST"?De.error(`Rename failed: An item named "${cs(s)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||De.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${i} to ${s}:`,a),a}},QEe=1024*5,eTe=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);const i=new Uint8Array(r),s=new Blob([i],{type:t});return URL.createObjectURL(s)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},Y9=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const i=new Uint8Array(r);t=new Blob([i],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},vZ=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,i]=T.useState(null),[s,a]=T.useState(null),[o,l]=T.useState(!1),[c,u]=T.useState(!1),[d,h]=T.useState(!0),m=e.type||"application/octet-stream",y=ix(e.name,m),b=m.startsWith("image/"),v=m.startsWith("audio/"),x=m.startsWith("video/"),_=e.source==="vfs";T.useEffect(()=>{let M=null;return a(null),e.source==="direct"&&!y&&e.contentBase64?(M=eTe(e.contentBase64,m),M||a("Failed to decode file content for preview."),i(M)):i(null),e.source==="direct"&&y&&e.contentText&&e.contentText.length>QEe?a(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&y&&e.contentText===void 0&&a("Text content missing from metadata."),()=>{M&&(URL.revokeObjectURL(M),i(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,m,y]);const S=async()=>{if(e.source==="vfs"){De.info("File is already in VFS.");return}const M=Y9(e);if(!M){De.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await yZ([M],"/"),De.success(`"${e.name}" added to VFS root.`)}catch(P){console.error("Failed to add file to VFS:",P),De.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},C=async()=>{u(!0);try{let M;if(e.source==="vfs"&&e.path){const O=await Sh(e.path);M=new Blob([O],{type:m})}else{const O=Y9(e);if(!O)throw new Error("Could not reconstruct file data.");M=O}const P=URL.createObjectURL(M),L=document.createElement("a");L.href=P,L.download=e.name,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(P)}catch(M){console.error("Failed to download file:",M),De.error(`Download failed: ${M instanceof Error?M.message:String(M)}`)}finally{u(!1)}},E=()=>h(M=>!M),A=()=>_?p.jsx(rP,{className:"h-5 w-5 text-cyan-500"}):y?p.jsx(bpe,{className:"h-5 w-5 text-blue-500"}):b?p.jsx(Mp,{className:"h-5 w-5 text-purple-500"}):v?p.jsx(rme,{className:"h-5 w-5 text-green-500"}):x?p.jsx(Zme,{className:"h-5 w-5 text-orange-500"}):p.jsx(gpe,{className:"h-5 w-5 text-muted-foreground"}),R=()=>_?p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):s?p.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[p.jsx(lc,{className:"h-4 w-4"}),p.jsx("span",{children:s})]}):y&&e.contentText!==void 0?p.jsx(iy,{lang:m==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?p.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):v&&r?p.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):x&&r?p.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),N=T.useMemo(()=>{let M="File";return _?M="VFS File":y?M="Text":b?M="Image":v?M="Audio":x&&(M="Video"),`${M} (${vx(e.size)})`},[_,y,b,v,x,e.size]);return p.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[A(),p.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),p.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",vx(e.size),")"]}),_&&e.path&&p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),p.jsx(wr,{children:p.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,disabled:c,"aria-label":"Download file",children:c?p.jsx(Yn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(Jc,{className:"h-3.5 w-3.5"})})}),p.jsx(wr,{children:"Download File"})]})}),p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:E,"aria-label":d?"Unfold preview":"Fold preview",children:p.jsx(Mk,{className:"h-3.5 w-3.5"})})}),p.jsx(wr,{side:"top",children:d?"Unfold":"Fold"})]})}),!n&&t&&p.jsxs(p.Fragment,{children:[e.source==="direct"&&p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:S,disabled:o,"aria-label":"Add to VFS",children:o?p.jsx(Yn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(kH,{className:"h-3.5 w-3.5"})})}),p.jsx(wr,{children:"Add to VFS"})]})}),p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:p.jsx(Ya,{className:"h-3.5 w-3.5"})})}),p.jsx(wr,{children:"Remove from Prompt"})]})})]})]})]}),d?p.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:E,children:N}):p.jsx("div",{className:ft("p-2 max-h-80 overflow-y-auto"),children:R()})]})},xZ=6048e5,tTe=864e5,nS=43200,Z9=1440,X9=Symbol.for("constructDateFrom");function Sd(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&X9 in e?e[X9](t):e instanceof Date?new e.constructor(t):new Date(t)}function Qs(e,t){return Sd(t||e,e)}let nTe={};function Xw(){return nTe}function Ax(e,t){var o,l,c,u;const n=Xw(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Qs(e,t==null?void 0:t.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function wC(e,t){return Ax(e,{...t,weekStartsOn:1})}function wZ(e,t){const n=Qs(e,t==null?void 0:t.in),r=n.getFullYear(),i=Sd(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=wC(i),a=Sd(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=wC(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function _C(e){const t=Qs(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function AE(e,...t){const n=Sd.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function J9(e,t){const n=Qs(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function rTe(e,t,n){const[r,i]=AE(n==null?void 0:n.in,e,t),s=J9(r),a=J9(i),o=+s-_C(s),l=+a-_C(a);return Math.round((o-l)/tTe)}function iTe(e,t){const n=wZ(e,t),r=Sd(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),wC(r)}function GS(e,t){const n=+Qs(e)-+Qs(t);return n<0?-1:n>0?1:n}function sTe(e){return Sd(e,Date.now())}function aTe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function oTe(e){return!(!aTe(e)&&typeof e!="number"||isNaN(+Qs(e)))}function lTe(e,t,n){const[r,i]=AE(n==null?void 0:n.in,e,t),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function cTe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function uTe(e,t){return+Qs(e)-+Qs(t)}function dTe(e,t){const n=Qs(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function fTe(e,t){const n=Qs(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function hTe(e,t){const n=Qs(e,t==null?void 0:t.in);return+dTe(n,t)==+fTe(n,t)}function pTe(e,t,n){const[r,i,s]=AE(n==null?void 0:n.in,e,e,t),a=GS(i,s),o=Math.abs(lTe(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let l=GS(i,s)===-a;hTe(r)&&o===1&&GS(r,s)===1&&(l=!1);const c=a*(o-+l);return c===0?0:c}function mTe(e,t,n){const r=uTe(e,t)/1e3;return cTe(n==null?void 0:n.roundingMethod)(r)}function gTe(e,t){const n=Qs(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const yTe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},bTe=(e,t,n)=>{let r;const i=yTe[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function jN(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const vTe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xTe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wTe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_Te={date:jN({formats:vTe,defaultWidth:"full"}),time:jN({formats:xTe,defaultWidth:"full"}),dateTime:jN({formats:wTe,defaultWidth:"full"})},STe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},CTe=(e,t,n,r)=>STe[e];function Xb(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=e.formattingValues[o]||e.formattingValues[a]}else{const a=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[o]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const kTe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ETe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},TTe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ATe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},RTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ITe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NTe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},MTe={ordinalNumber:NTe,era:Xb({values:kTe,defaultWidth:"wide"}),quarter:Xb({values:ETe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Xb({values:TTe,defaultWidth:"wide"}),day:Xb({values:ATe,defaultWidth:"wide"}),dayPeriod:Xb({values:RTe,defaultWidth:"wide",formattingValues:ITe,defaultFormattingWidth:"wide"})};function Jb(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?PTe(o,d=>d.test(a)):jTe(o,d=>d.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(a.length);return{value:c,rest:u}}}function jTe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function PTe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function OTe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const DTe=/^(\d+)(th|st|nd|rd)?/i,FTe=/\d+/i,LTe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},BTe={any:[/^b/i,/^(a|c)/i]},$Te={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zTe={any:[/1/i,/2/i,/3/i,/4/i]},UTe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qTe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},VTe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},HTe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},WTe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GTe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},KTe={ordinalNumber:OTe({matchPattern:DTe,parsePattern:FTe,valueCallback:e=>parseInt(e,10)}),era:Jb({matchPatterns:LTe,defaultMatchWidth:"wide",parsePatterns:BTe,defaultParseWidth:"any"}),quarter:Jb({matchPatterns:$Te,defaultMatchWidth:"wide",parsePatterns:zTe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Jb({matchPatterns:UTe,defaultMatchWidth:"wide",parsePatterns:qTe,defaultParseWidth:"any"}),day:Jb({matchPatterns:VTe,defaultMatchWidth:"wide",parsePatterns:HTe,defaultParseWidth:"any"}),dayPeriod:Jb({matchPatterns:WTe,defaultMatchWidth:"any",parsePatterns:GTe,defaultParseWidth:"any"})},_Z={code:"en-US",formatDistance:bTe,formatLong:_Te,formatRelative:CTe,localize:MTe,match:KTe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function YTe(e,t){const n=Qs(e,t==null?void 0:t.in);return rTe(n,gTe(n))+1}function ZTe(e,t){const n=Qs(e,t==null?void 0:t.in),r=+wC(n)-+iTe(n);return Math.round(r/xZ)+1}function SZ(e,t){var u,d,h,m;const n=Qs(e,t==null?void 0:t.in),r=n.getFullYear(),i=Xw(),s=(t==null?void 0:t.firstWeekContainsDate)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(h=i.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,a=Sd((t==null?void 0:t.in)||e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Ax(a,t),l=Sd((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Ax(l,t);return+n>=+o?r+1:+n>=+c?r:r-1}function XTe(e,t){var o,l,c,u;const n=Xw(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=SZ(e,t),s=Sd((t==null?void 0:t.in)||e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Ax(s,t)}function JTe(e,t){const n=Qs(e,t==null?void 0:t.in),r=+Ax(n,t)-+XTe(n,t);return Math.round(r/xZ)+1}function hi(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Cf={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return hi(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):hi(n+1,2)},d(e,t){return hi(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return hi(e.getHours()%12||12,t.length)},H(e,t){return hi(e.getHours(),t.length)},m(e,t){return hi(e.getMinutes(),t.length)},s(e,t){return hi(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return hi(i,t.length)}},gg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Q9={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Cf.y(e,t)},Y:function(e,t,n,r){const i=SZ(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return hi(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):hi(s,t.length)},R:function(e,t){const n=wZ(e);return hi(n,t.length)},u:function(e,t){const n=e.getFullYear();return hi(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return hi(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return hi(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Cf.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return hi(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=JTe(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):hi(i,t.length)},I:function(e,t,n){const r=ZTe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):hi(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Cf.d(e,t)},D:function(e,t,n){const r=YTe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):hi(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return hi(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return hi(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return hi(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=gg.noon:r===0?i=gg.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=gg.evening:r>=12?i=gg.afternoon:r>=4?i=gg.morning:i=gg.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Cf.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Cf.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):hi(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):hi(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Cf.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Cf.s(e,t)},S:function(e,t){return Cf.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return tz(r);case"XXXX":case"XX":return op(r);case"XXXXX":case"XXX":default:return op(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return tz(r);case"xxxx":case"xx":return op(r);case"xxxxx":case"xxx":default:return op(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ez(r,":");case"OOOO":default:return"GMT"+op(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ez(r,":");case"zzzz":default:return"GMT"+op(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return hi(r,t.length)},T:function(e,t,n){return hi(+e,t.length)}};function ez(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+hi(s,2)}function tz(e,t){return e%60===0?(e>0?"-":"+")+hi(Math.abs(e)/60,2):op(e,t)}function op(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=hi(Math.trunc(r/60),2),s=hi(r%60,2);return n+i+t+s}const nz=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},CZ=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},QTe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return nz(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",nz(r,t)).replace("{{time}}",CZ(i,t))},eAe={p:CZ,P:QTe},tAe=/^D+$/,nAe=/^Y+$/,rAe=["D","DD","YY","YYYY"];function iAe(e){return tAe.test(e)}function sAe(e){return nAe.test(e)}function aAe(e,t,n){const r=oAe(e,t,n);if(console.warn(r),rAe.includes(e))throw new RangeError(r)}function oAe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lAe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cAe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uAe=/^'([^]*?)'?$/,dAe=/''/g,fAe=/[a-zA-Z]/;function t4(e,t,n){var u,d,h,m;const r=Xw(),i=r.locale??_Z,s=r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=r.weekStartsOn??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,o=Qs(e,n==null?void 0:n.in);if(!oTe(o))throw new RangeError("Invalid time value");let l=t.match(cAe).map(y=>{const b=y[0];if(b==="p"||b==="P"){const v=eAe[b];return v(y,i.formatLong)}return y}).join("").match(lAe).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:hAe(y)};if(Q9[b])return{isToken:!0,value:y};if(b.match(fAe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(y=>{if(!y.isToken)return y.value;const b=y.value;(sAe(b)||iAe(b))&&aAe(b,t,String(e));const v=Q9[b[0]];return v(o,b,i.localize,c)}).join("")}function hAe(e){const t=e.match(uAe);return t?t[1].replace(dAe,"'"):e}function pAe(e,t,n){const r=Xw(),i=(n==null?void 0:n.locale)??r.locale??_Z,s=2520,a=GS(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a}),[l,c]=AE(n==null?void 0:n.in,...a>0?[t,e]:[e,t]),u=mTe(c,l),d=(_C(c)-_C(l))/1e3,h=Math.round((u-d)/60);let m;if(h<2)return n!=null&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,o):u<10?i.formatDistance("lessThanXSeconds",10,o):u<20?i.formatDistance("lessThanXSeconds",20,o):u<40?i.formatDistance("halfAMinute",0,o):u<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):h===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",h,o);if(h<45)return i.formatDistance("xMinutes",h,o);if(h<90)return i.formatDistance("aboutXHours",1,o);if(h<Z9){const y=Math.round(h/60);return i.formatDistance("aboutXHours",y,o)}else{if(h<s)return i.formatDistance("xDays",1,o);if(h<nS){const y=Math.round(h/Z9);return i.formatDistance("xDays",y,o)}else if(h<nS*2)return m=Math.round(h/nS),i.formatDistance("aboutXMonths",m,o)}if(m=pTe(c,l),m<12){const y=Math.round(h/nS);return i.formatDistance("xMonths",y,o)}else{const y=m%12,b=Math.trunc(m/12);return y<3?i.formatDistance("aboutXYears",b,o):y<9?i.formatDistance("overXYears",b,o):i.formatDistance("almostXYears",b+1,o)}}function kZ(e,t){return pAe(e,sTe(e),t)}const Mn=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:i,disabled:s,variant:a="ghost",size:o="icon",className:l,"aria-label":c,...u})=>{const d=typeof t=="function";return p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:a,size:o,onClick:i,disabled:s,className:ft("h-6 w-6",l),"aria-label":c??e,...u,children:d?p.jsx(t,{className:ft("h-3.5 w-3.5",n)}):t})}),p.jsx(wr,{side:r,children:p.jsx("p",{children:e})})]})})},rz={};function mAe(e){let t=rz[e];if(t)return t;t=rz[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function I0(e,t){typeof t!="string"&&(t=I0.defaultChars);const n=mAe(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,a=r.length;s<a;s+=3){const o=parseInt(r.slice(s+1,s+3),16);if(o<128){i+=n[o];continue}if((o&224)===192&&s+3<a){const l=parseInt(r.slice(s+4,s+6),16);if((l&192)===128){const c=o<<6&1984|l&63;c<128?i+="��":i+=String.fromCharCode(c),s+=3;continue}}if((o&240)===224&&s+6<a){const l=parseInt(r.slice(s+4,s+6),16),c=parseInt(r.slice(s+7,s+9),16);if((l&192)===128&&(c&192)===128){const u=o<<12&61440|l<<6&4032|c&63;u<2048||u>=55296&&u<=57343?i+="���":i+=String.fromCharCode(u),s+=6;continue}}if((o&248)===240&&s+9<a){const l=parseInt(r.slice(s+4,s+6),16),c=parseInt(r.slice(s+7,s+9),16),u=parseInt(r.slice(s+10,s+12),16);if((l&192)===128&&(c&192)===128&&(u&192)===128){let d=o<<18&1835008|l<<12&258048|c<<6&4032|u&63;d<65536||d>1114111?i+="����":(d-=65536,i+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),s+=9;continue}}i+="�"}return i})}I0.defaultChars=";/?:@&=+$,#";I0.componentChars="";const iz={};function gAe(e){let t=iz[e];if(t)return t;t=iz[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Jw(e,t,n){typeof t!="string"&&(n=t,t=Jw.defaultChars),typeof n>"u"&&(n=!0);const r=gAe(t);let i="";for(let s=0,a=e.length;s<a;s++){const o=e.charCodeAt(s);if(n&&o===37&&s+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(s+1,s+3))){i+=e.slice(s,s+3),s+=2;continue}if(o<128){i+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&s+1<a){const l=e.charCodeAt(s+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(e[s]+e[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[s])}return i}Jw.defaultChars=";/?:@&=+$,-_.!~*'()#";Jw.componentChars="-_.!~*'()";function jO(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function SC(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const yAe=/^([a-z0-9.+-]+:)/i,bAe=/:[0-9]*$/,vAe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,xAe=["<",">",'"',"`"," ","\r",`
`,"	"],wAe=["{","}","|","\\","^","`"].concat(xAe),_Ae=["'"].concat(wAe),sz=["%","/","?",";","#"].concat(_Ae),az=["/","?","#"],SAe=255,oz=/^[+a-z0-9A-Z_-]{0,63}$/,CAe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,lz={javascript:!0,"javascript:":!0},cz={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function PO(e,t){if(e&&e instanceof SC)return e;const n=new SC;return n.parse(e,t),n}SC.prototype.parse=function(e,t){let n,r,i,s=e;if(s=s.trim(),!t&&e.split("#").length===1){const c=vAe.exec(s);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let a=yAe.exec(s);if(a&&(a=a[0],n=a.toLowerCase(),this.protocol=a,s=s.substr(a.length)),(t||a||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(a&&lz[a])&&(s=s.substr(2),this.slashes=!0)),!lz[a]&&(i||a&&!cz[a])){let c=-1;for(let y=0;y<az.length;y++)r=s.indexOf(az[y]),r!==-1&&(c===-1||r<c)&&(c=r);let u,d;c===-1?d=s.lastIndexOf("@"):d=s.lastIndexOf("@",c),d!==-1&&(u=s.slice(0,d),s=s.slice(d+1),this.auth=u),c=-1;for(let y=0;y<sz.length;y++)r=s.indexOf(sz[y]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=s.length),s[c-1]===":"&&c--;const h=s.slice(0,c);s=s.slice(c),this.parseHost(h),this.hostname=this.hostname||"";const m=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!m){const y=this.hostname.split(/\./);for(let b=0,v=y.length;b<v;b++){const x=y[b];if(x&&!x.match(oz)){let _="";for(let S=0,C=x.length;S<C;S++)x.charCodeAt(S)>127?_+="x":_+=x[S];if(!_.match(oz)){const S=y.slice(0,b),C=y.slice(b+1),E=x.match(CAe);E&&(S.push(E[1]),C.unshift(E[2])),C.length&&(s=C.join(".")+s),this.hostname=S.join(".");break}}}}this.hostname.length>SAe&&(this.hostname=""),m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=s.indexOf("#");o!==-1&&(this.hash=s.substr(o),s=s.slice(0,o));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),cz[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};SC.prototype.parseHost=function(e){let t=bAe.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const kAe=Object.freeze(Object.defineProperty({__proto__:null,decode:I0,encode:Jw,format:jO,parse:PO},Symbol.toStringTag,{value:"Module"})),EZ=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,TZ=/[\0-\x1F\x7F-\x9F]/,EAe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,OO=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,AZ=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,RZ=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,TAe=Object.freeze(Object.defineProperty({__proto__:null,Any:EZ,Cc:TZ,Cf:EAe,P:OO,S:AZ,Z:RZ},Symbol.toStringTag,{value:"Module"})),AAe=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),RAe=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var PN;const IAe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),NAe=(PN=String.fromCodePoint)!==null&&PN!==void 0?PN:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function MAe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=IAe.get(e))!==null&&t!==void 0?t:e}var Ks;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ks||(Ks={}));const jAe=32;var Ff;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Ff||(Ff={}));function n4(e){return e>=Ks.ZERO&&e<=Ks.NINE}function PAe(e){return e>=Ks.UPPER_A&&e<=Ks.UPPER_F||e>=Ks.LOWER_A&&e<=Ks.LOWER_F}function OAe(e){return e>=Ks.UPPER_A&&e<=Ks.UPPER_Z||e>=Ks.LOWER_A&&e<=Ks.LOWER_Z||n4(e)}function DAe(e){return e===Ks.EQUALS||OAe(e)}var Vs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Vs||(Vs={}));var Pf;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Pf||(Pf={}));class FAe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Vs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Pf.Strict}startEntity(t){this.decodeMode=t,this.state=Vs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Vs.EntityStart:return t.charCodeAt(n)===Ks.NUM?(this.state=Vs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Vs.NamedEntity,this.stateNamedEntity(t,n));case Vs.NumericStart:return this.stateNumericStart(t,n);case Vs.NumericDecimal:return this.stateNumericDecimal(t,n);case Vs.NumericHex:return this.stateNumericHex(t,n);case Vs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|jAe)===Ks.LOWER_X?(this.state=Vs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Vs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(n4(i)||PAe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(n4(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ks.SEMI)this.consumed+=1;else if(this.decodeMode===Pf.Strict)return 0;return this.emitCodePoint(MAe(this.result),this.consumed),this.errors&&(t!==Ks.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Ff.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=LAe(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===Pf.Attribute&&(s===0||DAe(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Ff.VALUE_LENGTH)>>14,s!==0){if(a===Ks.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Pf.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Ff.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Ff.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Vs.NamedEntity:return this.result!==0&&(this.decodeMode!==Pf.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Vs.NumericDecimal:return this.emitNumericEntity(0,2);case Vs.NumericHex:return this.emitNumericEntity(0,3);case Vs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Vs.EntityStart:return 0}}}function IZ(e){let t="";const n=new FAe(e,r=>t+=NAe(r));return function(i,s){let a=0,o=0;for(;(o=i.indexOf("&",o))>=0;){t+=i.slice(a,o),n.startEntity(s);const c=n.write(i,o+1);if(c<0){a=o+n.end();break}a=o+c,o=c===0?a+1:a}const l=t+i.slice(a);return t="",l}}function LAe(e,t,n,r){const i=(t&Ff.BRANCH_LENGTH)>>7,s=t&Ff.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let a=n,o=a+i-1;for(;a<=o;){const l=a+o>>>1,c=e[l];if(c<r)a=l+1;else if(c>r)o=l-1;else return e[l+i]}return-1}const BAe=IZ(AAe);IZ(RAe);function NZ(e,t=Pf.Legacy){return BAe(e,t)}function $Ae(e){return Object.prototype.toString.call(e)}function DO(e){return $Ae(e)==="[object String]"}const zAe=Object.prototype.hasOwnProperty;function UAe(e,t){return zAe.call(e,t)}function RE(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function MZ(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function FO(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function CC(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const jZ=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,qAe=/&([a-z#][a-z0-9]{1,31});/gi,VAe=new RegExp(jZ.source+"|"+qAe.source,"gi"),HAe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function WAe(e,t){if(t.charCodeAt(0)===35&&HAe.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return FO(r)?CC(r):e}const n=NZ(e);return n!==e?n:e}function GAe(e){return e.indexOf("\\")<0?e:e.replace(jZ,"$1")}function N0(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(VAe,function(t,n,r){return n||WAe(t,r)})}const KAe=/[&<>"]/,YAe=/[&<>"]/g,ZAe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function XAe(e){return ZAe[e]}function nh(e){return KAe.test(e)?e.replace(YAe,XAe):e}const JAe=/[.?*+^$[\]\\(){}|-]/g;function QAe(e){return e.replace(JAe,"\\$&")}function Ni(e){switch(e){case 9:case 32:return!0}return!1}function Rx(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Ix(e){return OO.test(e)||AZ.test(e)}function Nx(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function IE(e){return e=e.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(e=e.replace(/ẞ/g,"ß")),e.toLowerCase().toUpperCase()}const eRe={mdurl:kAe,ucmicro:TAe},tRe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:MZ,assign:RE,escapeHtml:nh,escapeRE:QAe,fromCodePoint:CC,has:UAe,isMdAsciiPunct:Nx,isPunctChar:Ix,isSpace:Ni,isString:DO,isValidEntityCode:FO,isWhiteSpace:Rx,lib:eRe,normalizeReference:IE,unescapeAll:N0,unescapeMd:GAe},Symbol.toStringTag,{value:"Module"}));function nRe(e,t,n){let r,i,s,a;const o=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<o;){if(s=e.src.charCodeAt(e.pos),s===93&&(r--,r===0)){i=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)r++;else if(n)return e.pos=l,-1}}let c=-1;return i&&(c=e.pos),e.pos=l,c}function rRe(e,t,n){let r,i=t;const s={ok:!1,pos:0,str:""};if(e.charCodeAt(i)===60){for(i++;i<n;){if(r=e.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=N0(e.slice(t+1,i)),s.ok=!0,s;if(r===92&&i+1<n){i+=2;continue}i++}return s}let a=0;for(;i<n&&(r=e.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(e.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(a++,a>32))return s;if(r===41){if(a===0)break;a--}i++}return t===i||a!==0||(s.str=N0(e.slice(t,i)),s.pos=i,s.ok=!0),s}function iRe(e,t,n,r){let i,s=t;const a={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)a.str=r.str,a.marker=r.marker;else{if(s>=n)return a;let o=e.charCodeAt(s);if(o!==34&&o!==39&&o!==40)return a;t++,s++,o===40&&(o=41),a.marker=o}for(;s<n;){if(i=e.charCodeAt(s),i===a.marker)return a.pos=s+1,a.str+=N0(e.slice(t,s)),a.ok=!0,a;if(i===40&&a.marker===41)return a;i===92&&s+1<n&&s++,s++}return a.can_continue=!0,a.str+=N0(e.slice(t,s)),a}const sRe=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:rRe,parseLinkLabel:nRe,parseLinkTitle:iRe},Symbol.toStringTag,{value:"Module"})),vu={};vu.code_inline=function(e,t,n,r,i){const s=e[t];return"<code"+i.renderAttrs(s)+">"+nh(s.content)+"</code>"};vu.code_block=function(e,t,n,r,i){const s=e[t];return"<pre"+i.renderAttrs(s)+"><code>"+nh(e[t].content)+`</code></pre>
`};vu.fence=function(e,t,n,r,i){const s=e[t],a=s.info?N0(s.info).trim():"";let o="",l="";if(a){const u=a.split(/(\s+)/g);o=u[0],l=u.slice(2).join("")}let c;if(n.highlight?c=n.highlight(s.content,o,l)||nh(s.content):c=nh(s.content),c.indexOf("<pre")===0)return c+`
`;if(a){const u=s.attrIndex("class"),d=s.attrs?s.attrs.slice():[];u<0?d.push(["class",n.langPrefix+o]):(d[u]=d[u].slice(),d[u][1]+=" "+n.langPrefix+o);const h={attrs:d};return`<pre><code${i.renderAttrs(h)}>${c}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${c}</code></pre>
`};vu.image=function(e,t,n,r,i){const s=e[t];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,n,r),i.renderToken(e,t,n)};vu.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};vu.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};vu.text=function(e,t){return nh(e[t].content)};vu.html_block=function(e,t){return e[t].content};vu.html_inline=function(e,t){return e[t].content};function by(){this.rules=RE({},vu)}by.prototype.renderAttrs=function(t){let n,r,i;if(!t.attrs)return"";for(i="",n=0,r=t.attrs.length;n<r;n++)i+=" "+nh(t.attrs[n][0])+'="'+nh(t.attrs[n][1])+'"';return i};by.prototype.renderToken=function(t,n,r){const i=t[n];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&t[n-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let a=!1;if(i.block&&(a=!0,i.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===i.tag)&&(a=!1)}return s+=a?`>
`:">",s};by.prototype.renderInline=function(e,t,n){let r="";const i=this.rules;for(let s=0,a=e.length;s<a;s++){const o=e[s].type;typeof i[o]<"u"?r+=i[o](e,s,t,n,this):r+=this.renderToken(e,s,t)}return r};by.prototype.renderInlineAsText=function(e,t,n){let r="";for(let i=0,s=e.length;i<s;i++)switch(e[i].type){case"text":r+=e[i].content;break;case"image":r+=this.renderInlineAsText(e[i].children,t,n);break;case"html_inline":case"html_block":r+=e[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};by.prototype.render=function(e,t,n){let r="";const i=this.rules;for(let s=0,a=e.length;s<a;s++){const o=e[s].type;o==="inline"?r+=this.renderInline(e[s].children,t,n):typeof i[o]<"u"?r+=i[o](e,s,t,n,this):r+=this.renderToken(e,s,t,n)}return r};function Co(){this.__rules__=[],this.__cache__=null}Co.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Co.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Co.prototype.at=function(e,t,n){const r=this.__find__(e),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Co.prototype.before=function(e,t,n,r){const i=this.__find__(e),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Co.prototype.after=function(e,t,n,r){const i=this.__find__(e),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Co.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Co.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Co.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Co.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Co.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function bc(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}bc.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===t)return r;return-1};bc.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};bc.prototype.attrSet=function(t,n){const r=this.attrIndex(t),i=[t,n];r<0?this.attrPush(i):this.attrs[r]=i};bc.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};bc.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function PZ(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}PZ.prototype.Token=bc;const aRe=/\r\n?|\n/g,oRe=/\0/g;function lRe(e){let t;t=e.src.replace(aRe,`
`),t=t.replace(oRe,"�"),e.src=t}function cRe(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function uRe(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const i=t[n];i.type==="inline"&&e.md.inline.parse(i.content,e.md,e.env,i.children)}}function dRe(e){return/^<a[>\s]/i.test(e)}function fRe(e){return/^<\/a\s*>/i.test(e)}function hRe(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let i=t[n].children,s=0;for(let a=i.length-1;a>=0;a--){const o=i[a];if(o.type==="link_close"){for(a--;i[a].level!==o.level&&i[a].type!=="link_open";)a--;continue}if(o.type==="html_inline"&&(dRe(o.content)&&s>0&&s--,fRe(o.content)&&s++),!(s>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const l=o.content;let c=e.md.linkify.match(l);const u=[];let d=o.level,h=0;c.length>0&&c[0].index===0&&a>0&&i[a-1].type==="text_special"&&(c=c.slice(1));for(let m=0;m<c.length;m++){const y=c[m].url,b=e.md.normalizeLink(y);if(!e.md.validateLink(b))continue;let v=c[m].text;c[m].schema?c[m].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,"");const x=c[m].index;if(x>h){const E=new e.Token("text","",0);E.content=l.slice(h,x),E.level=d,u.push(E)}const _=new e.Token("link_open","a",1);_.attrs=[["href",b]],_.level=d++,_.markup="linkify",_.info="auto",u.push(_);const S=new e.Token("text","",0);S.content=v,S.level=d,u.push(S);const C=new e.Token("link_close","a",-1);C.level=--d,C.markup="linkify",C.info="auto",u.push(C),h=c[m].lastIndex}if(h<l.length){const m=new e.Token("text","",0);m.content=l.slice(h),m.level=d,u.push(m)}t[n].children=i=MZ(i,a,u)}}}}const OZ=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,pRe=/\((c|tm|r)\)/i,mRe=/\((c|tm|r)\)/ig,gRe={c:"©",r:"®",tm:"™"};function yRe(e,t){return gRe[t.toLowerCase()]}function bRe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(mRe,yRe)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function vRe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&OZ.test(r.content)&&(r.content=r.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function xRe(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(pRe.test(e.tokens[t].content)&&bRe(e.tokens[t].children),OZ.test(e.tokens[t].content)&&vRe(e.tokens[t].children))}const wRe=/['"]/,uz=/['"]/g,dz="’";function rS(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function _Re(e,t){let n;const r=[];for(let i=0;i<e.length;i++){const s=e[i],a=e[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=a);n--);if(r.length=n+1,s.type!=="text")continue;let o=s.content,l=0,c=o.length;e:for(;l<c;){uz.lastIndex=l;const u=uz.exec(o);if(!u)break;let d=!0,h=!0;l=u.index+1;const m=u[0]==="'";let y=32;if(u.index-1>=0)y=o.charCodeAt(u.index-1);else for(n=i-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){y=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<c)b=o.charCodeAt(l);else for(n=i+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const v=Nx(y)||Ix(String.fromCharCode(y)),x=Nx(b)||Ix(String.fromCharCode(b)),_=Rx(y),S=Rx(b);if(S?d=!1:x&&(_||v||(d=!1)),_?h=!1:v&&(S||x||(h=!1)),b===34&&u[0]==='"'&&y>=48&&y<=57&&(h=d=!1),d&&h&&(d=v,h=x),!d&&!h){m&&(s.content=rS(s.content,u.index,dz));continue}if(h)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<a)break;if(C.single===m&&r[n].level===a){C=r[n];let E,A;m?(E=t.md.options.quotes[2],A=t.md.options.quotes[3]):(E=t.md.options.quotes[0],A=t.md.options.quotes[1]),s.content=rS(s.content,u.index,A),e[C.token].content=rS(e[C.token].content,C.pos,E),l+=A.length-1,C.token===i&&(l+=E.length-1),o=s.content,c=o.length,r.length=n;continue e}}d?r.push({token:i,pos:u.index,single:m,level:a}):h&&m&&(s.content=rS(s.content,u.index,dz))}}}function SRe(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!wRe.test(e.tokens[t].content)||_Re(e.tokens[t].children,e)}function CRe(e){let t,n;const r=e.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const a=r[s].children,o=a.length;for(t=0;t<o;t++)a[t].type==="text_special"&&(a[t].type="text");for(t=n=0;t<o;t++)a[t].type==="text"&&t+1<o&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}}const ON=[["normalize",lRe],["block",cRe],["inline",uRe],["linkify",hRe],["replacements",xRe],["smartquotes",SRe],["text_join",CRe]];function LO(){this.ruler=new Co;for(let e=0;e<ON.length;e++)this.ruler.push(ON[e][0],ON[e][1])}LO.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};LO.prototype.State=PZ;function xu(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,a=0,o=0,l=0,c=i.length,u=!1;a<c;a++){const d=i.charCodeAt(a);if(!u)if(Ni(d)){o++,d===9?l+=4-l%4:l++;continue}else u=!0;(d===10||a===c-1)&&(d!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(o),this.sCount.push(l),this.bsCount.push(0),u=!1,o=0,l=0,s=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}xu.prototype.push=function(e,t,n){const r=new bc(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};xu.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};xu.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};xu.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Ni(r))break}return t};xu.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Ni(this.src.charCodeAt(--t)))return t+1;return t};xu.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};xu.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};xu.prototype.getLines=function(t,n,r,i){if(t>=n)return"";const s=new Array(n-t);for(let a=0,o=t;o<n;o++,a++){let l=0;const c=this.bMarks[o];let u=c,d;for(o+1<n||i?d=this.eMarks[o]+1:d=this.eMarks[o];u<d&&l<r;){const h=this.src.charCodeAt(u);if(Ni(h))h===9?l+=4-(l+this.bsCount[o])%4:l++;else if(u-c<this.tShift[o])l++;else break;u++}l>r?s[a]=new Array(l-r+1).join(" ")+this.src.slice(u,d):s[a]=this.src.slice(u,d)}return s.join("")};xu.prototype.Token=bc;const kRe=65536;function DN(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function fz(e){const t=[],n=e.length;let r=0,i=e.charCodeAt(r),s=!1,a=0,o="";for(;r<n;)i===124&&(s?(o+=e.substring(a,r-1),a=r):(t.push(o+e.substring(a,r)),o="",a=r+1)),s=i===92,r++,i=e.charCodeAt(r);return t.push(o+e.substring(a)),t}function ERe(e,t,n,r){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let s=e.bMarks[i]+e.tShift[i];if(s>=e.eMarks[i])return!1;const a=e.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58||s>=e.eMarks[i])return!1;const o=e.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58&&!Ni(o)||a===45&&Ni(o))return!1;for(;s<e.eMarks[i];){const C=e.src.charCodeAt(s);if(C!==124&&C!==45&&C!==58&&!Ni(C))return!1;s++}let l=DN(e,t+1),c=l.split("|");const u=[];for(let C=0;C<c.length;C++){const E=c[C].trim();if(!E){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(E))return!1;E.charCodeAt(E.length-1)===58?u.push(E.charCodeAt(0)===58?"center":"right"):E.charCodeAt(0)===58?u.push("left"):u.push("")}if(l=DN(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=fz(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const d=c.length;if(d===0||d!==u.length)return!1;if(r)return!0;const h=e.parentType;e.parentType="table";const m=e.md.block.ruler.getRules("blockquote"),y=e.push("table_open","table",1),b=[t,0];y.map=b;const v=e.push("thead_open","thead",1);v.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<c.length;C++){const E=e.push("th_open","th",1);u[C]&&(E.attrs=[["style","text-align:"+u[C]]]);const A=e.push("inline","",0);A.content=c[C].trim(),A.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let _,S=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let C=!1;for(let A=0,R=m.length;A<R;A++)if(m[A](e,i,n,!0)){C=!0;break}if(C||(l=DN(e,i).trim(),!l)||e.sCount[i]-e.blkIndent>=4||(c=fz(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),S+=d-c.length,S>kRe))break;if(i===t+2){const A=e.push("tbody_open","tbody",1);A.map=_=[t+2,0]}const E=e.push("tr_open","tr",1);E.map=[i,i+1];for(let A=0;A<d;A++){const R=e.push("td_open","td",1);u[A]&&(R.attrs=[["style","text-align:"+u[A]]]);const N=e.push("inline","",0);N.content=c[A]?c[A].trim():"",N.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return _&&(e.push("tbody_close","tbody",-1),_[1]=i),e.push("table_close","table",-1),b[1]=i,e.parentType=h,e.line=i,!0}function TRe(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,i=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,i=r;continue}break}e.line=i;const s=e.push("code_block","code",0);return s.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,s.map=[t,e.line],!0}function ARe(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>s)return!1;const a=e.src.charCodeAt(i);if(a!==126&&a!==96)return!1;let o=i;i=e.skipChars(i,a);let l=i-o;if(l<3)return!1;const c=e.src.slice(o,i),u=e.src.slice(i,s);if(a===96&&u.indexOf(String.fromCharCode(a))>=0)return!1;if(r)return!0;let d=t,h=!1;for(;d++,!(d>=n||(i=o=e.bMarks[d]+e.tShift[d],s=e.eMarks[d],i<s&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(i)===a&&!(e.sCount[d]-e.blkIndent>=4)&&(i=e.skipChars(i,a),!(i-o<l)&&(i=e.skipSpaces(i),!(i<s)))){h=!0;break}l=e.sCount[t],e.line=d+(h?1:0);const m=e.push("fence","code",0);return m.info=u,m.content=e.getLines(t+1,d,l,!0),m.markup=c,m.map=[t,e.line],!0}function RRe(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];const a=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==62)return!1;if(r)return!0;const o=[],l=[],c=[],u=[],d=e.md.block.ruler.getRules("blockquote"),h=e.parentType;e.parentType="blockquote";let m=!1,y;for(y=t;y<n;y++){const S=e.sCount[y]<e.blkIndent;if(i=e.bMarks[y]+e.tShift[y],s=e.eMarks[y],i>=s)break;if(e.src.charCodeAt(i++)===62&&!S){let E=e.sCount[y]+1,A,R;e.src.charCodeAt(i)===32?(i++,E++,R=!1,A=!0):e.src.charCodeAt(i)===9?(A=!0,(e.bsCount[y]+E)%4===3?(i++,E++,R=!1):R=!0):A=!1;let N=E;for(o.push(e.bMarks[y]),e.bMarks[y]=i;i<s;){const M=e.src.charCodeAt(i);if(Ni(M))M===9?N+=4-(N+e.bsCount[y]+(R?1:0))%4:N++;else break;i++}m=i>=s,l.push(e.bsCount[y]),e.bsCount[y]=e.sCount[y]+1+(A?1:0),c.push(e.sCount[y]),e.sCount[y]=N-E,u.push(e.tShift[y]),e.tShift[y]=i-e.bMarks[y];continue}if(m)break;let C=!1;for(let E=0,A=d.length;E<A;E++)if(d[E](e,y,n,!0)){C=!0;break}if(C){e.lineMax=y,e.blkIndent!==0&&(o.push(e.bMarks[y]),l.push(e.bsCount[y]),u.push(e.tShift[y]),c.push(e.sCount[y]),e.sCount[y]-=e.blkIndent);break}o.push(e.bMarks[y]),l.push(e.bsCount[y]),u.push(e.tShift[y]),c.push(e.sCount[y]),e.sCount[y]=-1}const b=e.blkIndent;e.blkIndent=0;const v=e.push("blockquote_open","blockquote",1);v.markup=">";const x=[t,0];v.map=x,e.md.block.tokenize(e,t,y);const _=e.push("blockquote_close","blockquote",-1);_.markup=">",e.lineMax=a,e.parentType=h,x[1]=e.line;for(let S=0;S<u.length;S++)e.bMarks[S+t]=o[S],e.tShift[S+t]=u[S],e.sCount[S+t]=c[S],e.bsCount[S+t]=l[S];return e.blkIndent=b,!0}function IRe(e,t,n,r){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(s++);if(a!==42&&a!==45&&a!==95)return!1;let o=1;for(;s<i;){const c=e.src.charCodeAt(s++);if(c!==a&&!Ni(c))return!1;c===a&&o++}if(o<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(a)),!0}function hz(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const s=e.src.charCodeAt(r);if(!Ni(s))return-1}return r}function pz(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let i=n;if(i+1>=r)return-1;let s=e.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=e.src.charCodeAt(i++),s>=48&&s<=57){if(i-n>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=e.src.charCodeAt(i),!Ni(s))?-1:i}function NRe(e,t){const n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function MRe(e,t,n,r){let i,s,a,o,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let u=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(u=!0);let d,h,m;if((m=pz(e,l))>=0){if(d=!0,a=e.bMarks[l]+e.tShift[l],h=Number(e.src.slice(a,m-1)),u&&h!==1)return!1}else if((m=hz(e,l))>=0)d=!1;else return!1;if(u&&e.skipSpaces(m)>=e.eMarks[l])return!1;if(r)return!0;const y=e.src.charCodeAt(m-1),b=e.tokens.length;d?(o=e.push("ordered_list_open","ol",1),h!==1&&(o.attrs=[["start",h]])):o=e.push("bullet_list_open","ul",1);const v=[l,0];o.map=v,o.markup=String.fromCharCode(y);let x=!1;const _=e.md.block.ruler.getRules("list"),S=e.parentType;for(e.parentType="list";l<n;){s=m,i=e.eMarks[l];const C=e.sCount[l]+m-(e.bMarks[l]+e.tShift[l]);let E=C;for(;s<i;){const J=e.src.charCodeAt(s);if(J===9)E+=4-(E+e.bsCount[l])%4;else if(J===32)E++;else break;s++}const A=s;let R;A>=i?R=1:R=E-C,R>4&&(R=1);const N=C+R;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(y);const M=[l,0];o.map=M,d&&(o.info=e.src.slice(a,m-1));const P=e.tight,L=e.tShift[l],O=e.sCount[l],V=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=N,e.tight=!0,e.tShift[l]=A-e.bMarks[l],e.sCount[l]=E,A>=i&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||x)&&(c=!1),x=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=V,e.tShift[l]=L,e.sCount[l]=O,e.tight=P,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(y),l=e.line,M[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let F=!1;for(let J=0,U=_.length;J<U;J++)if(_[J](e,l,n,!0)){F=!0;break}if(F)break;if(d){if(m=pz(e,l),m<0)break;a=e.bMarks[l]+e.tShift[l]}else if(m=hz(e,l),m<0)break;if(y!==e.src.charCodeAt(m-1))break}return d?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(y),v[1]=l,e.line=l,e.parentType=S,c&&NRe(e,b),!0}function jRe(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t],a=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==91)return!1;function o(_){const S=e.lineMax;if(_>=S||e.isEmpty(_))return null;let C=!1;if(e.sCount[_]-e.blkIndent>3&&(C=!0),e.sCount[_]<0&&(C=!0),!C){const R=e.md.block.ruler.getRules("reference"),N=e.parentType;e.parentType="reference";let M=!1;for(let P=0,L=R.length;P<L;P++)if(R[P](e,_,S,!0)){M=!0;break}if(e.parentType=N,M)return null}const E=e.bMarks[_]+e.tShift[_],A=e.eMarks[_];return e.src.slice(E,A+1)}let l=e.src.slice(i,s+1);s=l.length;let c=-1;for(i=1;i<s;i++){const _=l.charCodeAt(i);if(_===91)return!1;if(_===93){c=i;break}else if(_===10){const S=o(a);S!==null&&(l+=S,s=l.length,a++)}else if(_===92&&(i++,i<s&&l.charCodeAt(i)===10)){const S=o(a);S!==null&&(l+=S,s=l.length,a++)}}if(c<0||l.charCodeAt(c+1)!==58)return!1;for(i=c+2;i<s;i++){const _=l.charCodeAt(i);if(_===10){const S=o(a);S!==null&&(l+=S,s=l.length,a++)}else if(!Ni(_))break}const u=e.md.helpers.parseLinkDestination(l,i,s);if(!u.ok)return!1;const d=e.md.normalizeLink(u.str);if(!e.md.validateLink(d))return!1;i=u.pos;const h=i,m=a,y=i;for(;i<s;i++){const _=l.charCodeAt(i);if(_===10){const S=o(a);S!==null&&(l+=S,s=l.length,a++)}else if(!Ni(_))break}let b=e.md.helpers.parseLinkTitle(l,i,s);for(;b.can_continue;){const _=o(a);if(_===null)break;l+=_,i=s,s=l.length,a++,b=e.md.helpers.parseLinkTitle(l,i,s,b)}let v;for(i<s&&y!==i&&b.ok?(v=b.str,i=b.pos):(v="",i=h,a=m);i<s;){const _=l.charCodeAt(i);if(!Ni(_))break;i++}if(i<s&&l.charCodeAt(i)!==10&&v)for(v="",i=h,a=m;i<s;){const _=l.charCodeAt(i);if(!Ni(_))break;i++}if(i<s&&l.charCodeAt(i)!==10)return!1;const x=IE(l.slice(1,c));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:v,href:d}),e.line=a),!0):!1}const PRe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ORe="[a-zA-Z_:][a-zA-Z0-9:._-]*",DRe="[^\"'=<>`\\x00-\\x20]+",FRe="'[^']*'",LRe='"[^"]*"',BRe="(?:"+DRe+"|"+FRe+"|"+LRe+")",$Re="(?:\\s+"+ORe+"(?:\\s*=\\s*"+BRe+")?)",DZ="<[A-Za-z][A-Za-z0-9\\-]*"+$Re+"*\\s*\\/?>",FZ="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",zRe="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",URe="<[?][\\s\\S]*?[?]>",qRe="<![A-Za-z][^>]*>",VRe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",HRe=new RegExp("^(?:"+DZ+"|"+FZ+"|"+zRe+"|"+URe+"|"+qRe+"|"+VRe+")"),WRe=new RegExp("^(?:"+DZ+"|"+FZ+")"),yg=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+PRe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(WRe.source+"\\s*$"),/^$/,!1]];function GRe(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(i)!==60)return!1;let a=e.src.slice(i,s),o=0;for(;o<yg.length&&!yg[o][0].test(a);o++);if(o===yg.length)return!1;if(r)return yg[o][2];let l=t+1;if(!yg[o][1].test(a)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],s=e.eMarks[l],a=e.src.slice(i,s),yg[o][1].test(a)){a.length!==0&&l++;break}}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0}function KRe(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.src.charCodeAt(i);if(a!==35||i>=s)return!1;let o=1;for(a=e.src.charCodeAt(++i);a===35&&i<s&&o<=6;)o++,a=e.src.charCodeAt(++i);if(o>6||i<s&&!Ni(a))return!1;if(r)return!0;s=e.skipSpacesBack(s,i);const l=e.skipCharsBack(s,35,i);l>i&&Ni(e.src.charCodeAt(l-1))&&(s=l),e.line=t+1;const c=e.push("heading_open","h"+String(o),1);c.markup="########".slice(0,o),c.map=[t,e.line];const u=e.push("inline","",0);u.content=e.src.slice(i,s).trim(),u.map=[t,e.line],u.children=[];const d=e.push("heading_close","h"+String(o),-1);return d.markup="########".slice(0,o),!0}function YRe(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let s=0,a,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let m=e.bMarks[o]+e.tShift[o];const y=e.eMarks[o];if(m<y&&(a=e.src.charCodeAt(m),(a===45||a===61)&&(m=e.skipChars(m,a),m=e.skipSpaces(m),m>=y))){s=a===61?1:2;break}}if(e.sCount[o]<0)continue;let h=!1;for(let m=0,y=r.length;m<y;m++)if(r[m](e,o,n,!0)){h=!0;break}if(h)break}if(!s)return!1;const l=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const c=e.push("heading_open","h"+String(s),1);c.markup=String.fromCharCode(a),c.map=[t,e.line];const u=e.push("inline","",0);u.content=l,u.map=[t,e.line-1],u.children=[];const d=e.push("heading_close","h"+String(s),-1);return d.markup=String.fromCharCode(a),e.parentType=i,!0}function ZRe(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let s=t+1;for(e.parentType="paragraph";s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3||e.sCount[s]<0)continue;let c=!1;for(let u=0,d=r.length;u<d;u++)if(r[u](e,s,n,!0)){c=!0;break}if(c)break}const a=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const l=e.push("inline","",0);return l.content=a,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}const iS=[["table",ERe,["paragraph","reference"]],["code",TRe],["fence",ARe,["paragraph","reference","blockquote","list"]],["blockquote",RRe,["paragraph","reference","blockquote","list"]],["hr",IRe,["paragraph","reference","blockquote","list"]],["list",MRe,["paragraph","reference","blockquote"]],["reference",jRe],["html_block",GRe,["paragraph","reference","blockquote"]],["heading",KRe,["paragraph","reference","blockquote"]],["lheading",YRe],["paragraph",ZRe]];function NE(){this.ruler=new Co;for(let e=0;e<iS.length;e++)this.ruler.push(iS[e][0],iS[e][1],{alt:(iS[e][2]||[]).slice()})}NE.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),i=r.length,s=e.md.options.maxNesting;let a=t,o=!1;for(;a<n&&(e.line=a=e.skipEmptyLines(a),!(a>=n||e.sCount[a]<e.blkIndent));){if(e.level>=s){e.line=n;break}const l=e.line;let c=!1;for(let u=0;u<i;u++)if(c=r[u](e,a,n,!1),c){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),a=e.line,a<n&&e.isEmpty(a)&&(o=!0,a++,e.line=a)}};NE.prototype.parse=function(e,t,n,r){if(!e)return;const i=new this.State(e,t,n,r);this.tokenize(i,i.line,i.lineMax)};NE.prototype.State=xu;function Qw(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Qw.prototype.pushPending=function(){const e=new bc("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Qw.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new bc(e,t,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};Qw.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let s=e;for(;s<n&&this.src.charCodeAt(s)===r;)s++;const a=s-e,o=s<n?this.src.charCodeAt(s):32,l=Nx(i)||Ix(String.fromCharCode(i)),c=Nx(o)||Ix(String.fromCharCode(o)),u=Rx(i),d=Rx(o),h=!d&&(!c||u||l),m=!u&&(!l||d||c);return{can_open:h&&(t||!m||l),can_close:m&&(t||!h||c),length:a}};Qw.prototype.Token=bc;function XRe(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function JRe(e,t){let n=e.pos;for(;n<e.posMax&&!XRe(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const QRe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function eIe(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const i=e.pending.match(QRe);if(!i)return!1;const s=i[1],a=e.md.linkify.matchAtStart(e.src.slice(n-s.length));if(!a)return!1;let o=a.url;if(o.length<=s.length)return!1;o=o.replace(/\*+$/,"");const l=e.md.normalizeLink(o);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-s.length);const c=e.push("link_open","a",1);c.attrs=[["href",l]],c.markup="linkify",c.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(o);const d=e.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return e.pos+=o.length-s.length,!0}function tIe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,i=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&e.pending.charCodeAt(s-1)===32;)s--;e.pending=e.pending.slice(0,s),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<i&&Ni(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const BO=[];for(let e=0;e<256;e++)BO.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){BO[e.charCodeAt(0)]=1});function nIe(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=e.src.charCodeAt(n);if(i===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(i=e.src.charCodeAt(n),!!Ni(i));)n++;return e.pos=n,!0}let s=e.src[n];if(i>=55296&&i<=56319&&n+1<r){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(s+=e.src[n+1],n++)}const a="\\"+s;if(!t){const o=e.push("text_special","",0);i<256&&BO[i]!==0?o.content=s:o.content=a,o.markup=a,o.info="escape"}return e.pos=n+1,!0}function rIe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const i=n;n++;const s=e.posMax;for(;n<s&&e.src.charCodeAt(n)===96;)n++;const a=e.src.slice(i,n),o=a.length;if(e.backticksScanned&&(e.backticks[o]||0)<=i)return t||(e.pending+=a),e.pos+=o,!0;let l=n,c;for(;(c=e.src.indexOf("`",l))!==-1;){for(l=c+1;l<s&&e.src.charCodeAt(l)===96;)l++;const u=l-c;if(u===o){if(!t){const d=e.push("code_inline","code",0);d.markup=a,d.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[u]=c}return e.backticksScanned=!0,t||(e.pending+=a),e.pos+=o,!0}function iIe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const i=e.scanDelims(e.pos,!0);let s=i.length;const a=String.fromCharCode(r);if(s<2)return!1;let o;s%2&&(o=e.push("text","",0),o.content=a,s--);for(let l=0;l<s;l+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function mz(e,t){let n;const r=[],i=t.length;for(let s=0;s<i;s++){const a=t[s];if(a.marker!==126||a.end===-1)continue;const o=t[a.end];n=e.tokens[a.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const s=r.pop();let a=s+1;for(;a<e.tokens.length&&e.tokens[a].type==="s_close";)a++;a--,s!==a&&(n=e.tokens[a],e.tokens[a]=e.tokens[s],e.tokens[s]=n)}}function sIe(e){const t=e.tokens_meta,n=e.tokens_meta.length;mz(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&mz(e,t[r].delimiters)}const LZ={tokenize:iIe,postProcess:sIe};function aIe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const i=e.scanDelims(e.pos,r===42);for(let s=0;s<i.length;s++){const a=e.push("text","",0);a.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0}function gz(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const i=t[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=t[i.end],a=r>0&&t[r-1].end===i.end+1&&t[r-1].marker===i.marker&&t[r-1].token===i.token-1&&t[i.end+1].token===s.token+1,o=String.fromCharCode(i.marker),l=e.tokens[i.token];l.type=a?"strong_open":"em_open",l.tag=a?"strong":"em",l.nesting=1,l.markup=a?o+o:o,l.content="";const c=e.tokens[s.token];c.type=a?"strong_close":"em_close",c.tag=a?"strong":"em",c.nesting=-1,c.markup=a?o+o:o,c.content="",a&&(e.tokens[t[r-1].token].content="",e.tokens[t[i.end+1].token].content="",r--)}}function oIe(e){const t=e.tokens_meta,n=e.tokens_meta.length;gz(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&gz(e,t[r].delimiters)}const BZ={tokenize:aIe,postProcess:oIe};function lIe(e,t){let n,r,i,s,a="",o="",l=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const u=e.pos,d=e.posMax,h=e.pos+1,m=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(m<0)return!1;let y=m+1;if(y<d&&e.src.charCodeAt(y)===40){for(c=!1,y++;y<d&&(n=e.src.charCodeAt(y),!(!Ni(n)&&n!==10));y++);if(y>=d)return!1;if(l=y,i=e.md.helpers.parseLinkDestination(e.src,y,e.posMax),i.ok){for(a=e.md.normalizeLink(i.str),e.md.validateLink(a)?y=i.pos:a="",l=y;y<d&&(n=e.src.charCodeAt(y),!(!Ni(n)&&n!==10));y++);if(i=e.md.helpers.parseLinkTitle(e.src,y,e.posMax),y<d&&l!==y&&i.ok)for(o=i.str,y=i.pos;y<d&&(n=e.src.charCodeAt(y),!(!Ni(n)&&n!==10));y++);}(y>=d||e.src.charCodeAt(y)!==41)&&(c=!0),y++}if(c){if(typeof e.env.references>"u")return!1;if(y<d&&e.src.charCodeAt(y)===91?(l=y+1,y=e.md.helpers.parseLinkLabel(e,y),y>=0?r=e.src.slice(l,y++):y=m+1):y=m+1,r||(r=e.src.slice(h,m)),s=e.env.references[IE(r)],!s)return e.pos=u,!1;a=s.href,o=s.title}if(!t){e.pos=h,e.posMax=m;const b=e.push("link_open","a",1),v=[["href",a]];b.attrs=v,o&&v.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=y,e.posMax=d,!0}function cIe(e,t){let n,r,i,s,a,o,l,c,u="";const d=e.pos,h=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const m=e.pos+2,y=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(y<0)return!1;if(s=y+1,s<h&&e.src.charCodeAt(s)===40){for(s++;s<h&&(n=e.src.charCodeAt(s),!(!Ni(n)&&n!==10));s++);if(s>=h)return!1;for(c=s,o=e.md.helpers.parseLinkDestination(e.src,s,e.posMax),o.ok&&(u=e.md.normalizeLink(o.str),e.md.validateLink(u)?s=o.pos:u=""),c=s;s<h&&(n=e.src.charCodeAt(s),!(!Ni(n)&&n!==10));s++);if(o=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<h&&c!==s&&o.ok)for(l=o.str,s=o.pos;s<h&&(n=e.src.charCodeAt(s),!(!Ni(n)&&n!==10));s++);else l="";if(s>=h||e.src.charCodeAt(s)!==41)return e.pos=d,!1;s++}else{if(typeof e.env.references>"u")return!1;if(s<h&&e.src.charCodeAt(s)===91?(c=s+1,s=e.md.helpers.parseLinkLabel(e,s),s>=0?i=e.src.slice(c,s++):s=y+1):s=y+1,i||(i=e.src.slice(m,y)),a=e.env.references[IE(i)],!a)return e.pos=d,!1;u=a.href,l=a.title}if(!t){r=e.src.slice(m,y);const b=[];e.md.inline.parse(r,e.md,e.env,b);const v=e.push("image","img",0),x=[["src",u],["alt",""]];v.attrs=x,v.children=b,v.content=r,l&&x.push(["title",l])}return e.pos=s,e.posMax=h,!0}const uIe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,dIe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function fIe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;const a=e.src.charCodeAt(n);if(a===60)return!1;if(a===62)break}const s=e.src.slice(r+1,n);if(dIe.test(s)){const a=e.md.normalizeLink(s);if(!e.md.validateLink(a))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",a]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(s);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=s.length+2,!0}if(uIe.test(s)){const a=e.md.normalizeLink("mailto:"+s);if(!e.md.validateLink(a))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",a]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(s);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=s.length+2,!0}return!1}function hIe(e){return/^<a[>\s]/i.test(e)}function pIe(e){return/^<\/a\s*>/i.test(e)}function mIe(e){const t=e|32;return t>=97&&t<=122}function gIe(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=e.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!mIe(i))return!1;const s=e.src.slice(r).match(HRe);if(!s)return!1;if(!t){const a=e.push("html_inline","",0);a.content=s[0],hIe(a.content)&&e.linkLevel++,pIe(a.content)&&e.linkLevel--}return e.pos+=s[0].length,!0}const yIe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,bIe=/^&([a-z][a-z0-9]{1,31});/i;function vIe(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const s=e.src.slice(n).match(yIe);if(s){if(!t){const a=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),o=e.push("text_special","",0);o.content=FO(a)?CC(a):CC(65533),o.markup=s[0],o.info="entity"}return e.pos+=s[0].length,!0}}else{const s=e.src.slice(n).match(bIe);if(s){const a=NZ(s[0]);if(a!==s[0]){if(!t){const o=e.push("text_special","",0);o.content=a,o.markup=s[0],o.info="entity"}return e.pos+=s[0].length,!0}}}return!1}function yz(e){const t={},n=e.length;if(!n)return;let r=0,i=-2;const s=[];for(let a=0;a<n;a++){const o=e[a];if(s.push(0),(e[r].marker!==o.marker||i!==o.token-1)&&(r=a),i=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[o.marker][(o.open?3:0)+o.length%3];let c=r-s[r]-1,u=c;for(;c>l;c-=s[c]+1){const d=e[c];if(d.marker===o.marker&&d.open&&d.end<0){let h=!1;if((d.close||o.open)&&(d.length+o.length)%3===0&&(d.length%3!==0||o.length%3!==0)&&(h=!0),!h){const m=c>0&&!e[c-1].open?s[c-1]+1:0;s[a]=a-c+m,s[c]=m,o.open=!1,d.end=a,d.close=!1,u=-1,i=-2;break}}}u!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=u)}}function xIe(e){const t=e.tokens_meta,n=e.tokens_meta.length;yz(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&yz(t[r].delimiters)}function wIe(e){let t,n,r=0;const i=e.tokens,s=e.tokens.length;for(t=n=0;t<s;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,i[t].type==="text"&&t+1<s&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}const FN=[["text",JRe],["linkify",eIe],["newline",tIe],["escape",nIe],["backticks",rIe],["strikethrough",LZ.tokenize],["emphasis",BZ.tokenize],["link",lIe],["image",cIe],["autolink",fIe],["html_inline",gIe],["entity",vIe]],LN=[["balance_pairs",xIe],["strikethrough",LZ.postProcess],["emphasis",BZ.postProcess],["fragments_join",wIe]];function e1(){this.ruler=new Co;for(let e=0;e<FN.length;e++)this.ruler.push(FN[e][0],FN[e][1]);this.ruler2=new Co;for(let e=0;e<LN.length;e++)this.ruler2.push(LN[e][0],LN[e][1])}e1.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,i=e.md.options.maxNesting,s=e.cache;if(typeof s[t]<"u"){e.pos=s[t];return}let a=!1;if(e.level<i){for(let o=0;o<r;o++)if(e.level++,a=n[o](e,!0),e.level--,a){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;a||e.pos++,s[t]=e.pos};e1.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,i=e.md.options.maxNesting;for(;e.pos<r;){const s=e.pos;let a=!1;if(e.level<i){for(let o=0;o<n;o++)if(a=t[o](e,!1),a){if(s>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(a){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};e1.prototype.parse=function(e,t,n,r){const i=new this.State(e,t,n,r);this.tokenize(i);const s=this.ruler2.getRules(""),a=s.length;for(let o=0;o<a;o++)s[o](i)};e1.prototype.State=Qw;function _Ie(e){const t={};e=e||{},t.src_Any=EZ.source,t.src_Cc=TZ.source,t.src_Z=RZ.source,t.src_P=OO.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><｜]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function r4(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function ME(e){return Object.prototype.toString.call(e)}function SIe(e){return ME(e)==="[object String]"}function CIe(e){return ME(e)==="[object Object]"}function kIe(e){return ME(e)==="[object RegExp]"}function bz(e){return ME(e)==="[object Function]"}function EIe(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const $Z={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function TIe(e){return Object.keys(e||{}).reduce(function(t,n){return t||$Z.hasOwnProperty(n)},!1)}const AIe={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},RIe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",IIe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function NIe(e){e.__index__=-1,e.__text_cache__=""}function MIe(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function vz(){return function(e,t){t.normalize(e)}}function kC(e){const t=e.re=_Ie(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(RIe),n.push(t.src_xn),t.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function s(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(e.__schemas__).forEach(function(o){const l=e.__schemas__[o];if(l===null)return;const c={validate:null,link:null};if(e.__compiled__[o]=c,CIe(l)){kIe(l.validate)?c.validate=MIe(l.validate):bz(l.validate)?c.validate=l.validate:s(o,l),bz(l.normalize)?c.normalize=l.normalize:l.normalize?s(o,l):c.normalize=vz();return}if(SIe(l)){i.push(o);return}s(o,l)}),i.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:vz()};const a=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(EIe).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+a+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+a+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),NIe(e)}function jIe(e,t){const n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function i4(e,t){const n=new jIe(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Zo(e,t){if(!(this instanceof Zo))return new Zo(e,t);t||TIe(e)&&(t=e,e={}),this.__opts__=r4({},$Z,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r4({},AIe,e),this.__compiled__={},this.__tlds__=IIe,this.__tlds_replaced__=!1,this.re={},kC(this)}Zo.prototype.add=function(t,n){return this.__schemas__[t]=n,kC(this),this};Zo.prototype.set=function(t){return this.__opts__=r4(this.__opts__,t),this};Zo.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,i,s,a,o,l,c,u;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(s=this.testSchemaAt(t,n[2],l.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(a=r.index+r[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=t.indexOf("@"),u>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(a=i.index+i[1].length,o=i.index+i[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=o))),this.__index__>=0};Zo.prototype.pretest=function(t){return this.re.pretest.test(t)};Zo.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Zo.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(i4(this,r)),r=this.__last_index__);let i=r?t.slice(r):t;for(;this.test(i);)n.push(i4(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Zo.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,i4(this,0)):null};Zo.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),kC(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,kC(this),this)};Zo.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Zo.prototype.onCompile=function(){};const Gg=2147483647,Zc=36,$O=1,Mx=26,PIe=38,OIe=700,zZ=72,UZ=128,qZ="-",DIe=/^xn--/,FIe=/[^\0-\x7F]/,LIe=/[\x2E\u3002\uFF0E\uFF61]/g,BIe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},BN=Zc-$O,Xc=Math.floor,$N=String.fromCharCode;function Nf(e){throw new RangeError(BIe[e])}function $Ie(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function VZ(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(LIe,".");const i=e.split("."),s=$Ie(i,t).join(".");return r+s}function HZ(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=e.charCodeAt(n++);(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}const zIe=e=>String.fromCodePoint(...e),UIe=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Zc},xz=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},WZ=function(e,t,n){let r=0;for(e=n?Xc(e/OIe):e>>1,e+=Xc(e/t);e>BN*Mx>>1;r+=Zc)e=Xc(e/BN);return Xc(r+(BN+1)*e/(e+PIe))},GZ=function(e){const t=[],n=e.length;let r=0,i=UZ,s=zZ,a=e.lastIndexOf(qZ);a<0&&(a=0);for(let o=0;o<a;++o)e.charCodeAt(o)>=128&&Nf("not-basic"),t.push(e.charCodeAt(o));for(let o=a>0?a+1:0;o<n;){const l=r;for(let u=1,d=Zc;;d+=Zc){o>=n&&Nf("invalid-input");const h=UIe(e.charCodeAt(o++));h>=Zc&&Nf("invalid-input"),h>Xc((Gg-r)/u)&&Nf("overflow"),r+=h*u;const m=d<=s?$O:d>=s+Mx?Mx:d-s;if(h<m)break;const y=Zc-m;u>Xc(Gg/y)&&Nf("overflow"),u*=y}const c=t.length+1;s=WZ(r-l,c,l==0),Xc(r/c)>Gg-i&&Nf("overflow"),i+=Xc(r/c),r%=c,t.splice(r++,0,i)}return String.fromCodePoint(...t)},KZ=function(e){const t=[];e=HZ(e);const n=e.length;let r=UZ,i=0,s=zZ;for(const l of e)l<128&&t.push($N(l));const a=t.length;let o=a;for(a&&t.push(qZ);o<n;){let l=Gg;for(const u of e)u>=r&&u<l&&(l=u);const c=o+1;l-r>Xc((Gg-i)/c)&&Nf("overflow"),i+=(l-r)*c,r=l;for(const u of e)if(u<r&&++i>Gg&&Nf("overflow"),u===r){let d=i;for(let h=Zc;;h+=Zc){const m=h<=s?$O:h>=s+Mx?Mx:h-s;if(d<m)break;const y=d-m,b=Zc-m;t.push($N(xz(m+y%b,0))),d=Xc(y/b)}t.push($N(xz(d,0))),s=WZ(i,c,o===a),i=0,++o}++i,++r}return t.join("")},qIe=function(e){return VZ(e,function(t){return DIe.test(t)?GZ(t.slice(4).toLowerCase()):t})},VIe=function(e){return VZ(e,function(t){return FIe.test(t)?"xn--"+KZ(t):t})},YZ={version:"2.3.1",ucs2:{decode:HZ,encode:zIe},decode:GZ,encode:KZ,toASCII:VIe,toUnicode:qIe},HIe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},WIe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},GIe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},KIe={default:HIe,zero:WIe,commonmark:GIe},YIe=/^(vbscript|javascript|file|data):/,ZIe=/^data:image\/(gif|png|jpeg|webp);/;function XIe(e){const t=e.trim().toLowerCase();return YIe.test(t)?ZIe.test(t):!0}const ZZ=["http:","https:","mailto:"];function JIe(e){const t=PO(e,!0);if(t.hostname&&(!t.protocol||ZZ.indexOf(t.protocol)>=0))try{t.hostname=YZ.toASCII(t.hostname)}catch{}return Jw(jO(t))}function QIe(e){const t=PO(e,!0);if(t.hostname&&(!t.protocol||ZZ.indexOf(t.protocol)>=0))try{t.hostname=YZ.toUnicode(t.hostname)}catch{}return I0(jO(t),I0.defaultChars+"%")}function Xo(e,t){if(!(this instanceof Xo))return new Xo(e,t);t||DO(e)||(t=e||{},e="default"),this.inline=new e1,this.block=new NE,this.core=new LO,this.renderer=new by,this.linkify=new Zo,this.validateLink=XIe,this.normalizeLink=JIe,this.normalizeLinkText=QIe,this.utils=tRe,this.helpers=RE({},sRe),this.options={},this.configure(e),t&&this.set(t)}Xo.prototype.set=function(e){return RE(this.options,e),this};Xo.prototype.configure=function(e){const t=this;if(DO(e)){const n=e;if(e=KIe[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Xo.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Xo.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Xo.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Xo.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Xo.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Xo.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Xo.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const zN=new Xo({html:!1,linkify:!0,breaks:!0});function jE(e){return T.useMemo(()=>{var n;if(!e)return[];try{const r=zN.parse(e,{}),i=[];let s="",a=0;for(;a<r.length;){const o=r[a];if(o.type==="fence"){s&&(i.push(s),s="");const l=((n=o.info)==null?void 0:n.trim())||"";let c,u;if(l.includes(":")){const[d,...h]=l.split(":");c=d||void 0,u=h.join(":")||void 0}else c=l.split(" ")[0]||void 0;c==="mermaid"?i.push({type:"mermaid",code:o.content}):i.push({type:"code",lang:c,code:o.content,filepath:u}),a++}else{const l=[];for(;a<r.length&&r[a].type!=="fence";)l.push(r[a]),a++;l.length>0&&(s+=zN.renderer.render(l,zN.options,{}))}}return s&&i.push(s),i}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const eNe="modulepreload",tNe=function(e){return"/"+e},wz={},Hr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let a=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=a(n.map(c=>{if(c=tNe(c),c in wz)return;wz[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":eNe,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};var KS={exports:{}},nNe=KS.exports,_z;function rNe(){return _z||(_z=1,function(e,t){(function(n,r){e.exports=r()})(nNe,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",a="second",o="minute",l="hour",c="day",u="week",d="month",h="quarter",m="year",y="date",b="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(F){var J=["th","st","nd","rd"],U=F%100;return"["+F+(J[(U-20)%10]||J[U]||J[0])+"]"}},S=function(F,J,U){var G=String(F);return!G||G.length>=J?F:""+Array(J+1-G.length).join(U)+F},C={s:S,z:function(F){var J=-F.utcOffset(),U=Math.abs(J),G=Math.floor(U/60),$=U%60;return(J<=0?"+":"-")+S(G,2,"0")+":"+S($,2,"0")},m:function F(J,U){if(J.date()<U.date())return-F(U,J);var G=12*(U.year()-J.year())+(U.month()-J.month()),$=J.clone().add(G,d),ne=U-$<0,H=J.clone().add(G+(ne?-1:1),d);return+(-(G+(U-$)/(ne?$-H:H-$))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:d,y:m,w:u,d:c,D:y,h:l,m:o,s:a,ms:s,Q:h}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},E="en",A={};A[E]=_;var R="$isDayjsObject",N=function(F){return F instanceof O||!(!F||!F[R])},M=function F(J,U,G){var $;if(!J)return E;if(typeof J=="string"){var ne=J.toLowerCase();A[ne]&&($=ne),U&&(A[ne]=U,$=ne);var H=J.split("-");if(!$&&H.length>1)return F(H[0])}else{var te=J.name;A[te]=J,$=te}return!G&&$&&(E=$),$||!G&&E},P=function(F,J){if(N(F))return F.clone();var U=typeof J=="object"?J:{};return U.date=F,U.args=arguments,new O(U)},L=C;L.l=M,L.i=N,L.w=function(F,J){return P(F,{locale:J.$L,utc:J.$u,x:J.$x,$offset:J.$offset})};var O=function(){function F(U){this.$L=M(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[R]=!0}var J=F.prototype;return J.parse=function(U){this.$d=function(G){var $=G.date,ne=G.utc;if($===null)return new Date(NaN);if(L.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var H=$.match(v);if(H){var te=H[2]-1||0,ee=(H[7]||"0").substring(0,3);return ne?new Date(Date.UTC(H[1],te,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ee)):new Date(H[1],te,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ee)}}return new Date($)}(U),this.init()},J.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},J.$utils=function(){return L},J.isValid=function(){return this.$d.toString()!==b},J.isSame=function(U,G){var $=P(U);return this.startOf(G)<=$&&$<=this.endOf(G)},J.isAfter=function(U,G){return P(U)<this.startOf(G)},J.isBefore=function(U,G){return this.endOf(G)<P(U)},J.$g=function(U,G,$){return L.u(U)?this[G]:this.set($,U)},J.unix=function(){return Math.floor(this.valueOf()/1e3)},J.valueOf=function(){return this.$d.getTime()},J.startOf=function(U,G){var $=this,ne=!!L.u(G)||G,H=L.p(U),te=function(Ce,Ue){var et=L.w($.$u?Date.UTC($.$y,Ue,Ce):new Date($.$y,Ue,Ce),$);return ne?et:et.endOf(c)},ee=function(Ce,Ue){return L.w($.toDate()[Ce].apply($.toDate("s"),(ne?[0,0,0,0]:[23,59,59,999]).slice(Ue)),$)},se=this.$W,he=this.$M,ce=this.$D,Me="set"+(this.$u?"UTC":"");switch(H){case m:return ne?te(1,0):te(31,11);case d:return ne?te(1,he):te(0,he+1);case u:var je=this.$locale().weekStart||0,Ne=(se<je?se+7:se)-je;return te(ne?ce-Ne:ce+(6-Ne),he);case c:case y:return ee(Me+"Hours",0);case l:return ee(Me+"Minutes",1);case o:return ee(Me+"Seconds",2);case a:return ee(Me+"Milliseconds",3);default:return this.clone()}},J.endOf=function(U){return this.startOf(U,!1)},J.$set=function(U,G){var $,ne=L.p(U),H="set"+(this.$u?"UTC":""),te=($={},$[c]=H+"Date",$[y]=H+"Date",$[d]=H+"Month",$[m]=H+"FullYear",$[l]=H+"Hours",$[o]=H+"Minutes",$[a]=H+"Seconds",$[s]=H+"Milliseconds",$)[ne],ee=ne===c?this.$D+(G-this.$W):G;if(ne===d||ne===m){var se=this.clone().set(y,1);se.$d[te](ee),se.init(),this.$d=se.set(y,Math.min(this.$D,se.daysInMonth())).$d}else te&&this.$d[te](ee);return this.init(),this},J.set=function(U,G){return this.clone().$set(U,G)},J.get=function(U){return this[L.p(U)]()},J.add=function(U,G){var $,ne=this;U=Number(U);var H=L.p(G),te=function(he){var ce=P(ne);return L.w(ce.date(ce.date()+Math.round(he*U)),ne)};if(H===d)return this.set(d,this.$M+U);if(H===m)return this.set(m,this.$y+U);if(H===c)return te(1);if(H===u)return te(7);var ee=($={},$[o]=r,$[l]=i,$[a]=n,$)[H]||1,se=this.$d.getTime()+U*ee;return L.w(se,this)},J.subtract=function(U,G){return this.add(-1*U,G)},J.format=function(U){var G=this,$=this.$locale();if(!this.isValid())return $.invalidDate||b;var ne=U||"YYYY-MM-DDTHH:mm:ssZ",H=L.z(this),te=this.$H,ee=this.$m,se=this.$M,he=$.weekdays,ce=$.months,Me=$.meridiem,je=function(Ue,et,qe,Re){return Ue&&(Ue[et]||Ue(G,ne))||qe[et].slice(0,Re)},Ne=function(Ue){return L.s(te%12||12,Ue,"0")},Ce=Me||function(Ue,et,qe){var Re=Ue<12?"AM":"PM";return qe?Re.toLowerCase():Re};return ne.replace(x,function(Ue,et){return et||function(qe){switch(qe){case"YY":return String(G.$y).slice(-2);case"YYYY":return L.s(G.$y,4,"0");case"M":return se+1;case"MM":return L.s(se+1,2,"0");case"MMM":return je($.monthsShort,se,ce,3);case"MMMM":return je(ce,se);case"D":return G.$D;case"DD":return L.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return je($.weekdaysMin,G.$W,he,2);case"ddd":return je($.weekdaysShort,G.$W,he,3);case"dddd":return he[G.$W];case"H":return String(te);case"HH":return L.s(te,2,"0");case"h":return Ne(1);case"hh":return Ne(2);case"a":return Ce(te,ee,!0);case"A":return Ce(te,ee,!1);case"m":return String(ee);case"mm":return L.s(ee,2,"0");case"s":return String(G.$s);case"ss":return L.s(G.$s,2,"0");case"SSS":return L.s(G.$ms,3,"0");case"Z":return H}return null}(Ue)||H.replace(":","")})},J.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},J.diff=function(U,G,$){var ne,H=this,te=L.p(G),ee=P(U),se=(ee.utcOffset()-this.utcOffset())*r,he=this-ee,ce=function(){return L.m(H,ee)};switch(te){case m:ne=ce()/12;break;case d:ne=ce();break;case h:ne=ce()/3;break;case u:ne=(he-se)/6048e5;break;case c:ne=(he-se)/864e5;break;case l:ne=he/i;break;case o:ne=he/r;break;case a:ne=he/n;break;default:ne=he}return $?ne:L.a(ne)},J.daysInMonth=function(){return this.endOf(d).$D},J.$locale=function(){return A[this.$L]},J.locale=function(U,G){if(!U)return this.$L;var $=this.clone(),ne=M(U,G,!0);return ne&&($.$L=ne),$},J.clone=function(){return L.w(this.$d,this)},J.toDate=function(){return new Date(this.valueOf())},J.toJSON=function(){return this.isValid()?this.toISOString():null},J.toISOString=function(){return this.$d.toISOString()},J.toString=function(){return this.$d.toUTCString()},F}(),V=O.prototype;return P.prototype=V,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",c],["$M",d],["$y",m],["$D",y]].forEach(function(F){V[F[1]]=function(J){return this.$g(J,F[0],F[1])}}),P.extend=function(F,J){return F.$i||(F(J,O,P),F.$i=!0),P},P.locale=M,P.isDayjs=N,P.unix=function(F){return P(1e3*F)},P.en=A[E],P.Ls=A,P.p={},P})}(KS)),KS.exports}var iNe=rNe();const sNe=ma(iNe),YS={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e),hsl2rgb:({h:e,s:t,l:n},r)=>{if(!t)return n*2.55;e/=360,t/=100,n/=100;const i=n<.5?n*(1+t):n+t-n*t,s=2*n-i;switch(r){case"r":return YS.hue2rgb(s,i,e+1/3)*255;case"g":return YS.hue2rgb(s,i,e)*255;case"b":return YS.hue2rgb(s,i,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:n},r)=>{e/=255,t/=255,n/=255;const i=Math.max(e,t,n),s=Math.min(e,t,n),a=(i+s)/2;if(r==="l")return a*100;if(i===s)return 0;const o=i-s,l=a>.5?o/(2-i-s):o/(i+s);if(r==="s")return l*100;switch(i){case e:return((t-n)/o+(t<n?6:0))*60;case t:return((n-e)/o+2)*60;case n:return((e-t)/o+4)*60;default:return-1}}},aNe={clamp:(e,t,n)=>t>n?Math.min(t,Math.max(n,e)):Math.min(n,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},oNe={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},ir={channel:YS,lang:aNe,unit:oNe},kf={};for(let e=0;e<=255;e++)kf[e]=ir.unit.dec2hex(e);const _a={ALL:0,RGB:1,HSL:2};class lNe{constructor(){this.type=_a.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=_a.ALL}is(t){return this.type===t}}class cNe{constructor(t,n){this.color=n,this.changed=!1,this.data=t,this.type=new lNe}set(t,n){return this.color=n,this.changed=!1,this.data=t,this.type.type=_a.ALL,this}_ensureHSL(){const t=this.data,{h:n,s:r,l:i}=t;n===void 0&&(t.h=ir.channel.rgb2hsl(t,"h")),r===void 0&&(t.s=ir.channel.rgb2hsl(t,"s")),i===void 0&&(t.l=ir.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r:n,g:r,b:i}=t;n===void 0&&(t.r=ir.channel.hsl2rgb(t,"r")),r===void 0&&(t.g=ir.channel.hsl2rgb(t,"g")),i===void 0&&(t.b=ir.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,n=t.r;return!this.type.is(_a.HSL)&&n!==void 0?n:(this._ensureHSL(),ir.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,n=t.g;return!this.type.is(_a.HSL)&&n!==void 0?n:(this._ensureHSL(),ir.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,n=t.b;return!this.type.is(_a.HSL)&&n!==void 0?n:(this._ensureHSL(),ir.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,n=t.h;return!this.type.is(_a.RGB)&&n!==void 0?n:(this._ensureRGB(),ir.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,n=t.s;return!this.type.is(_a.RGB)&&n!==void 0?n:(this._ensureRGB(),ir.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,n=t.l;return!this.type.is(_a.RGB)&&n!==void 0?n:(this._ensureRGB(),ir.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(_a.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(_a.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(_a.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(_a.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(_a.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(_a.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const PE=new cNe({r:0,g:0,b:0,a:0},"transparent"),Kg={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(Kg.re);if(!t)return;const n=t[1],r=parseInt(n,16),i=n.length,s=i%4===0,a=i>4,o=a?1:17,l=a?8:4,c=s?0:-1,u=a?255:15;return PE.set({r:(r>>l*(c+3)&u)*o,g:(r>>l*(c+2)&u)*o,b:(r>>l*(c+1)&u)*o,a:s?(r&u)*o/255:1},e)},stringify:e=>{const{r:t,g:n,b:r,a:i}=e;return i<1?`#${kf[Math.round(t)]}${kf[Math.round(n)]}${kf[Math.round(r)]}${kf[Math.round(i*255)]}`:`#${kf[Math.round(t)]}${kf[Math.round(n)]}${kf[Math.round(r)]}`}},bp={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(bp.hueRe);if(t){const[,n,r]=t;switch(r){case"grad":return ir.channel.clamp.h(parseFloat(n)*.9);case"rad":return ir.channel.clamp.h(parseFloat(n)*180/Math.PI);case"turn":return ir.channel.clamp.h(parseFloat(n)*360)}}return ir.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const n=e.match(bp.re);if(!n)return;const[,r,i,s,a,o]=n;return PE.set({h:bp._hue2deg(r),s:ir.channel.clamp.s(parseFloat(i)),l:ir.channel.clamp.l(parseFloat(s)),a:a?ir.channel.clamp.a(o?parseFloat(a)/100:parseFloat(a)):1},e)},stringify:e=>{const{h:t,s:n,l:r,a:i}=e;return i<1?`hsla(${ir.lang.round(t)}, ${ir.lang.round(n)}%, ${ir.lang.round(r)}%, ${i})`:`hsl(${ir.lang.round(t)}, ${ir.lang.round(n)}%, ${ir.lang.round(r)}%)`}},Pv={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=Pv.colors[e];if(t)return Kg.parse(t)},stringify:e=>{const t=Kg.stringify(e);for(const n in Pv.colors)if(Pv.colors[n]===t)return n}},yv={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const n=e.match(yv.re);if(!n)return;const[,r,i,s,a,o,l,c,u]=n;return PE.set({r:ir.channel.clamp.r(i?parseFloat(r)*2.55:parseFloat(r)),g:ir.channel.clamp.g(a?parseFloat(s)*2.55:parseFloat(s)),b:ir.channel.clamp.b(l?parseFloat(o)*2.55:parseFloat(o)),a:c?ir.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},e)},stringify:e=>{const{r:t,g:n,b:r,a:i}=e;return i<1?`rgba(${ir.lang.round(t)}, ${ir.lang.round(n)}, ${ir.lang.round(r)}, ${ir.lang.round(i)})`:`rgb(${ir.lang.round(t)}, ${ir.lang.round(n)}, ${ir.lang.round(r)})`}},hu={format:{keyword:Pv,hex:Kg,rgb:yv,rgba:yv,hsl:bp,hsla:bp},parse:e=>{if(typeof e!="string")return e;const t=Kg.parse(e)||yv.parse(e)||bp.parse(e)||Pv.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(_a.HSL)||e.data.r===void 0?bp.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?yv.stringify(e):Kg.stringify(e)},XZ=(e,t)=>{const n=hu.parse(e);for(const r in t)n[r]=ir.channel.clamp[r](t[r]);return hu.stringify(n)},Ov=(e,t,n=0,r=1)=>{if(typeof e!="number")return XZ(e,{a:t});const i=PE.set({r:ir.channel.clamp.r(e),g:ir.channel.clamp.g(t),b:ir.channel.clamp.b(n),a:ir.channel.clamp.a(r)});return hu.stringify(i)},uNe=e=>{const{r:t,g:n,b:r}=hu.parse(e),i=.2126*ir.channel.toLinear(t)+.7152*ir.channel.toLinear(n)+.0722*ir.channel.toLinear(r);return ir.lang.round(i)},dNe=e=>uNe(e)>=.5,t1=e=>!dNe(e),JZ=(e,t,n)=>{const r=hu.parse(e),i=r[t],s=ir.channel.clamp[t](i+n);return i!==s&&(r[t]=s),hu.stringify(r)},xn=(e,t)=>JZ(e,"l",t),Dn=(e,t)=>JZ(e,"l",-t),gt=(e,t)=>{const n=hu.parse(e),r={};for(const i in t)t[i]&&(r[i]=n[i]+t[i]);return XZ(e,r)},fNe=(e,t,n=50)=>{const{r,g:i,b:s,a}=hu.parse(e),{r:o,g:l,b:c,a:u}=hu.parse(t),d=n/100,h=d*2-1,m=a-u,b=((h*m===-1?h:(h+m)/(1+h*m))+1)/2,v=1-b,x=r*b+o*v,_=i*b+l*v,S=s*b+c*v,C=a*d+u*(1-d);return Ov(x,_,S,C)},ln=(e,t=100)=>{const n=hu.parse(e);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,fNe(n,e,t)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:QZ,setPrototypeOf:Sz,isFrozen:hNe,getPrototypeOf:pNe,getOwnPropertyDescriptor:mNe}=Object;let{freeze:Ja,seal:Al,create:eX}=Object,{apply:s4,construct:a4}=typeof Reflect<"u"&&Reflect;Ja||(Ja=function(t){return t});Al||(Al=function(t){return t});s4||(s4=function(t,n,r){return t.apply(n,r)});a4||(a4=function(t,n){return new t(...n)});const sS=Qa(Array.prototype.forEach),gNe=Qa(Array.prototype.lastIndexOf),Cz=Qa(Array.prototype.pop),Qb=Qa(Array.prototype.push),yNe=Qa(Array.prototype.splice),ZS=Qa(String.prototype.toLowerCase),UN=Qa(String.prototype.toString),kz=Qa(String.prototype.match),ev=Qa(String.prototype.replace),bNe=Qa(String.prototype.indexOf),vNe=Qa(String.prototype.trim),Yl=Qa(Object.prototype.hasOwnProperty),$a=Qa(RegExp.prototype.test),tv=xNe(TypeError);function Qa(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return s4(e,t,r)}}function xNe(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a4(e,n)}}function Or(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ZS;Sz&&Sz(e,null);let r=t.length;for(;r--;){let i=t[r];if(typeof i=="string"){const s=n(i);s!==i&&(hNe(t)||(t[r]=s),i=s)}e[i]=!0}return e}function wNe(e){for(let t=0;t<e.length;t++)Yl(e,t)||(e[t]=null);return e}function Qu(e){const t=eX(null);for(const[n,r]of QZ(e))Yl(e,n)&&(Array.isArray(r)?t[n]=wNe(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=Qu(r):t[n]=r);return t}function nv(e,t){for(;e!==null;){const r=mNe(e,t);if(r){if(r.get)return Qa(r.get);if(typeof r.value=="function")return Qa(r.value)}e=pNe(e)}function n(){return null}return n}const Ez=Ja(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qN=Ja(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),VN=Ja(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_Ne=Ja(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),HN=Ja(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),SNe=Ja(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Tz=Ja(["#text"]),Az=Ja(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),WN=Ja(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Rz=Ja(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),aS=Ja(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),CNe=Al(/\{\{[\w\W]*|[\w\W]*\}\}/gm),kNe=Al(/<%[\w\W]*|[\w\W]*%>/gm),ENe=Al(/\$\{[\w\W]*/gm),TNe=Al(/^data-[\-\w.\u00B7-\uFFFF]+$/),ANe=Al(/^aria-[\-\w]+$/),tX=Al(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),RNe=Al(/^(?:\w+script|data):/i),INe=Al(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nX=Al(/^html$/i),NNe=Al(/^[a-z][.\w]*(-[.\w]+)+$/i);var Iz=Object.freeze({__proto__:null,ARIA_ATTR:ANe,ATTR_WHITESPACE:INe,CUSTOM_ELEMENT:NNe,DATA_ATTR:TNe,DOCTYPE_NAME:nX,ERB_EXPR:kNe,IS_ALLOWED_URI:tX,IS_SCRIPT_OR_DATA:RNe,MUSTACHE_EXPR:CNe,TMPLIT_EXPR:ENe});const rv={element:1,text:3,progressingInstruction:7,comment:8,document:9},MNe=function(){return typeof window>"u"?null:window},jNe=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return t.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Nz=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function rX(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:MNe();const t=hn=>rX(hn);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==rv.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:m}=e,y=l.prototype,b=nv(y,"cloneNode"),v=nv(y,"remove"),x=nv(y,"nextSibling"),_=nv(y,"childNodes"),S=nv(y,"parentNode");if(typeof a=="function"){const hn=n.createElement("template");hn.content&&hn.content.ownerDocument&&(n=hn.content.ownerDocument)}let C,E="";const{implementation:A,createNodeIterator:R,createDocumentFragment:N,getElementsByTagName:M}=n,{importNode:P}=r;let L=Nz();t.isSupported=typeof QZ=="function"&&typeof S=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:O,ERB_EXPR:V,TMPLIT_EXPR:F,DATA_ATTR:J,ARIA_ATTR:U,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:$,CUSTOM_ELEMENT:ne}=Iz;let{IS_ALLOWED_URI:H}=Iz,te=null;const ee=Or({},[...Ez,...qN,...VN,...HN,...Tz]);let se=null;const he=Or({},[...Az,...WN,...Rz,...aS]);let ce=Object.seal(eX(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Me=null,je=null,Ne=!0,Ce=!0,Ue=!1,et=!0,qe=!1,Re=!0,K=!1,ge=!1,Ae=!1,le=!1,oe=!1,ie=!1,Ee=!0,Be=!1;const ke="user-content-";let ct=!0,It=!1,ht={},Ot=null;const zt=Or({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Bt=null;const rn=Or({},["audio","video","img","source","image","track"]);let ve=null;const D=Or({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Z="http://www.w3.org/1998/Math/MathML",pe="http://www.w3.org/2000/svg",Oe="http://www.w3.org/1999/xhtml";let xe=Oe,Ie=!1,de=null;const bt=Or({},[Z,pe,Oe],UN);let St=Or({},["mi","mo","mn","ms","mtext"]),z=Or({},["annotation-xml"]);const Ve=Or({},["title","style","font","a","script"]);let it=null;const be=["application/xhtml+xml","text/html"],_e="text/html";let ze=null,Rt=null;const me=n.createElement("form"),Y=function(Xe){return Xe instanceof RegExp||Xe instanceof Function},W=function(){let Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Rt&&Rt===Xe)){if((!Xe||typeof Xe!="object")&&(Xe={}),Xe=Qu(Xe),it=be.indexOf(Xe.PARSER_MEDIA_TYPE)===-1?_e:Xe.PARSER_MEDIA_TYPE,ze=it==="application/xhtml+xml"?UN:ZS,te=Yl(Xe,"ALLOWED_TAGS")?Or({},Xe.ALLOWED_TAGS,ze):ee,se=Yl(Xe,"ALLOWED_ATTR")?Or({},Xe.ALLOWED_ATTR,ze):he,de=Yl(Xe,"ALLOWED_NAMESPACES")?Or({},Xe.ALLOWED_NAMESPACES,UN):bt,ve=Yl(Xe,"ADD_URI_SAFE_ATTR")?Or(Qu(D),Xe.ADD_URI_SAFE_ATTR,ze):D,Bt=Yl(Xe,"ADD_DATA_URI_TAGS")?Or(Qu(rn),Xe.ADD_DATA_URI_TAGS,ze):rn,Ot=Yl(Xe,"FORBID_CONTENTS")?Or({},Xe.FORBID_CONTENTS,ze):zt,Me=Yl(Xe,"FORBID_TAGS")?Or({},Xe.FORBID_TAGS,ze):Qu({}),je=Yl(Xe,"FORBID_ATTR")?Or({},Xe.FORBID_ATTR,ze):Qu({}),ht=Yl(Xe,"USE_PROFILES")?Xe.USE_PROFILES:!1,Ne=Xe.ALLOW_ARIA_ATTR!==!1,Ce=Xe.ALLOW_DATA_ATTR!==!1,Ue=Xe.ALLOW_UNKNOWN_PROTOCOLS||!1,et=Xe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,qe=Xe.SAFE_FOR_TEMPLATES||!1,Re=Xe.SAFE_FOR_XML!==!1,K=Xe.WHOLE_DOCUMENT||!1,le=Xe.RETURN_DOM||!1,oe=Xe.RETURN_DOM_FRAGMENT||!1,ie=Xe.RETURN_TRUSTED_TYPE||!1,Ae=Xe.FORCE_BODY||!1,Ee=Xe.SANITIZE_DOM!==!1,Be=Xe.SANITIZE_NAMED_PROPS||!1,ct=Xe.KEEP_CONTENT!==!1,It=Xe.IN_PLACE||!1,H=Xe.ALLOWED_URI_REGEXP||tX,xe=Xe.NAMESPACE||Oe,St=Xe.MATHML_TEXT_INTEGRATION_POINTS||St,z=Xe.HTML_INTEGRATION_POINTS||z,ce=Xe.CUSTOM_ELEMENT_HANDLING||{},Xe.CUSTOM_ELEMENT_HANDLING&&Y(Xe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ce.tagNameCheck=Xe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Xe.CUSTOM_ELEMENT_HANDLING&&Y(Xe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ce.attributeNameCheck=Xe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Xe.CUSTOM_ELEMENT_HANDLING&&typeof Xe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ce.allowCustomizedBuiltInElements=Xe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),qe&&(Ce=!1),oe&&(le=!0),ht&&(te=Or({},Tz),se=[],ht.html===!0&&(Or(te,Ez),Or(se,Az)),ht.svg===!0&&(Or(te,qN),Or(se,WN),Or(se,aS)),ht.svgFilters===!0&&(Or(te,VN),Or(se,WN),Or(se,aS)),ht.mathMl===!0&&(Or(te,HN),Or(se,Rz),Or(se,aS))),Xe.ADD_TAGS&&(te===ee&&(te=Qu(te)),Or(te,Xe.ADD_TAGS,ze)),Xe.ADD_ATTR&&(se===he&&(se=Qu(se)),Or(se,Xe.ADD_ATTR,ze)),Xe.ADD_URI_SAFE_ATTR&&Or(ve,Xe.ADD_URI_SAFE_ATTR,ze),Xe.FORBID_CONTENTS&&(Ot===zt&&(Ot=Qu(Ot)),Or(Ot,Xe.FORBID_CONTENTS,ze)),ct&&(te["#text"]=!0),K&&Or(te,["html","head","body"]),te.table&&(Or(te,["tbody"]),delete Me.tbody),Xe.TRUSTED_TYPES_POLICY){if(typeof Xe.TRUSTED_TYPES_POLICY.createHTML!="function")throw tv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Xe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw tv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=Xe.TRUSTED_TYPES_POLICY,E=C.createHTML("")}else C===void 0&&(C=jNe(m,i)),C!==null&&typeof E=="string"&&(E=C.createHTML(""));Ja&&Ja(Xe),Rt=Xe}},X=Or({},[...qN,...VN,..._Ne]),ye=Or({},[...HN,...SNe]),Pe=function(Xe){let Ut=S(Xe);(!Ut||!Ut.tagName)&&(Ut={namespaceURI:xe,tagName:"template"});const pn=ZS(Xe.tagName),Xn=ZS(Ut.tagName);return de[Xe.namespaceURI]?Xe.namespaceURI===pe?Ut.namespaceURI===Oe?pn==="svg":Ut.namespaceURI===Z?pn==="svg"&&(Xn==="annotation-xml"||St[Xn]):!!X[pn]:Xe.namespaceURI===Z?Ut.namespaceURI===Oe?pn==="math":Ut.namespaceURI===pe?pn==="math"&&z[Xn]:!!ye[pn]:Xe.namespaceURI===Oe?Ut.namespaceURI===pe&&!z[Xn]||Ut.namespaceURI===Z&&!St[Xn]?!1:!ye[pn]&&(Ve[pn]||!X[pn]):!!(it==="application/xhtml+xml"&&de[Xe.namespaceURI]):!1},We=function(Xe){Qb(t.removed,{element:Xe});try{S(Xe).removeChild(Xe)}catch{v(Xe)}},xt=function(Xe,Ut){try{Qb(t.removed,{attribute:Ut.getAttributeNode(Xe),from:Ut})}catch{Qb(t.removed,{attribute:null,from:Ut})}if(Ut.removeAttribute(Xe),Xe==="is")if(le||oe)try{We(Ut)}catch{}else try{Ut.setAttribute(Xe,"")}catch{}},Qt=function(Xe){let Ut=null,pn=null;if(Ae)Xe="<remove></remove>"+Xe;else{const Yr=kz(Xe,/^[\r\n\t ]+/);pn=Yr&&Yr[0]}it==="application/xhtml+xml"&&xe===Oe&&(Xe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Xe+"</body></html>");const Xn=C?C.createHTML(Xe):Xe;if(xe===Oe)try{Ut=new h().parseFromString(Xn,it)}catch{}if(!Ut||!Ut.documentElement){Ut=A.createDocument(xe,"template",null);try{Ut.documentElement.innerHTML=Ie?E:Xn}catch{}}const _i=Ut.body||Ut.documentElement;return Xe&&pn&&_i.insertBefore(n.createTextNode(pn),_i.childNodes[0]||null),xe===Oe?M.call(Ut,K?"html":"body")[0]:K?Ut.documentElement:_i},Fn=function(Xe){return R.call(Xe.ownerDocument||Xe,Xe,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Zt=function(Xe){return Xe instanceof d&&(typeof Xe.nodeName!="string"||typeof Xe.textContent!="string"||typeof Xe.removeChild!="function"||!(Xe.attributes instanceof u)||typeof Xe.removeAttribute!="function"||typeof Xe.setAttribute!="function"||typeof Xe.namespaceURI!="string"||typeof Xe.insertBefore!="function"||typeof Xe.hasChildNodes!="function")},tn=function(Xe){return typeof o=="function"&&Xe instanceof o};function cn(hn,Xe,Ut){sS(hn,pn=>{pn.call(t,Xe,Ut,Rt)})}const dr=function(Xe){let Ut=null;if(cn(L.beforeSanitizeElements,Xe,null),Zt(Xe))return We(Xe),!0;const pn=ze(Xe.nodeName);if(cn(L.uponSanitizeElement,Xe,{tagName:pn,allowedTags:te}),Re&&Xe.hasChildNodes()&&!tn(Xe.firstElementChild)&&$a(/<[/\w!]/g,Xe.innerHTML)&&$a(/<[/\w!]/g,Xe.textContent)||Xe.nodeType===rv.progressingInstruction||Re&&Xe.nodeType===rv.comment&&$a(/<[/\w]/g,Xe.data))return We(Xe),!0;if(!te[pn]||Me[pn]){if(!Me[pn]&&Jr(pn)&&(ce.tagNameCheck instanceof RegExp&&$a(ce.tagNameCheck,pn)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(pn)))return!1;if(ct&&!Ot[pn]){const Xn=S(Xe)||Xe.parentNode,_i=_(Xe)||Xe.childNodes;if(_i&&Xn){const Yr=_i.length;for(let ks=Yr-1;ks>=0;--ks){const ts=b(_i[ks],!0);ts.__removalCount=(Xe.__removalCount||0)+1,Xn.insertBefore(ts,x(Xe))}}}return We(Xe),!0}return Xe instanceof l&&!Pe(Xe)||(pn==="noscript"||pn==="noembed"||pn==="noframes")&&$a(/<\/no(script|embed|frames)/i,Xe.innerHTML)?(We(Xe),!0):(qe&&Xe.nodeType===rv.text&&(Ut=Xe.textContent,sS([O,V,F],Xn=>{Ut=ev(Ut,Xn," ")}),Xe.textContent!==Ut&&(Qb(t.removed,{element:Xe.cloneNode()}),Xe.textContent=Ut)),cn(L.afterSanitizeElements,Xe,null),!1)},Cr=function(Xe,Ut,pn){if(Ee&&(Ut==="id"||Ut==="name")&&(pn in n||pn in me))return!1;if(!(Ce&&!je[Ut]&&$a(J,Ut))){if(!(Ne&&$a(U,Ut))){if(!se[Ut]||je[Ut]){if(!(Jr(Xe)&&(ce.tagNameCheck instanceof RegExp&&$a(ce.tagNameCheck,Xe)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(Xe))&&(ce.attributeNameCheck instanceof RegExp&&$a(ce.attributeNameCheck,Ut)||ce.attributeNameCheck instanceof Function&&ce.attributeNameCheck(Ut))||Ut==="is"&&ce.allowCustomizedBuiltInElements&&(ce.tagNameCheck instanceof RegExp&&$a(ce.tagNameCheck,pn)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(pn))))return!1}else if(!ve[Ut]){if(!$a(H,ev(pn,$,""))){if(!((Ut==="src"||Ut==="xlink:href"||Ut==="href")&&Xe!=="script"&&bNe(pn,"data:")===0&&Bt[Xe])){if(!(Ue&&!$a(G,ev(pn,$,"")))){if(pn)return!1}}}}}}return!0},Jr=function(Xe){return Xe!=="annotation-xml"&&kz(Xe,ne)},Qr=function(Xe){cn(L.beforeSanitizeAttributes,Xe,null);const{attributes:Ut}=Xe;if(!Ut||Zt(Xe))return;const pn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se,forceKeepAttr:void 0};let Xn=Ut.length;for(;Xn--;){const _i=Ut[Xn],{name:Yr,namespaceURI:ks,value:ts}=_i,Pa=ze(Yr),ra=ts;let Li=Yr==="value"?ra:vNe(ra);if(pn.attrName=Pa,pn.attrValue=Li,pn.keepAttr=!0,pn.forceKeepAttr=void 0,cn(L.uponSanitizeAttribute,Xe,pn),Li=pn.attrValue,Be&&(Pa==="id"||Pa==="name")&&(xt(Yr,Xe),Li=ke+Li),Re&&$a(/((--!?|])>)|<\/(style|title)/i,Li)){xt(Yr,Xe);continue}if(pn.forceKeepAttr)continue;if(!pn.keepAttr){xt(Yr,Xe);continue}if(!et&&$a(/\/>/i,Li)){xt(Yr,Xe);continue}qe&&sS([O,V,F],el=>{Li=ev(Li,el," ")});const Ro=ze(Xe.nodeName);if(!Cr(Ro,Pa,Li)){xt(Yr,Xe);continue}if(C&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!ks)switch(m.getAttributeType(Ro,Pa)){case"TrustedHTML":{Li=C.createHTML(Li);break}case"TrustedScriptURL":{Li=C.createScriptURL(Li);break}}if(Li!==ra)try{ks?Xe.setAttributeNS(ks,Yr,Li):Xe.setAttribute(Yr,Li),Zt(Xe)?We(Xe):Cz(t.removed)}catch{xt(Yr,Xe)}}cn(L.afterSanitizeAttributes,Xe,null)},br=function hn(Xe){let Ut=null;const pn=Fn(Xe);for(cn(L.beforeSanitizeShadowDOM,Xe,null);Ut=pn.nextNode();)cn(L.uponSanitizeShadowNode,Ut,null),dr(Ut),Qr(Ut),Ut.content instanceof s&&hn(Ut.content);cn(L.afterSanitizeShadowDOM,Xe,null)};return t.sanitize=function(hn){let Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ut=null,pn=null,Xn=null,_i=null;if(Ie=!hn,Ie&&(hn="<!-->"),typeof hn!="string"&&!tn(hn))if(typeof hn.toString=="function"){if(hn=hn.toString(),typeof hn!="string")throw tv("dirty is not a string, aborting")}else throw tv("toString is not a function");if(!t.isSupported)return hn;if(ge||W(Xe),t.removed=[],typeof hn=="string"&&(It=!1),It){if(hn.nodeName){const ts=ze(hn.nodeName);if(!te[ts]||Me[ts])throw tv("root node is forbidden and cannot be sanitized in-place")}}else if(hn instanceof o)Ut=Qt("<!---->"),pn=Ut.ownerDocument.importNode(hn,!0),pn.nodeType===rv.element&&pn.nodeName==="BODY"||pn.nodeName==="HTML"?Ut=pn:Ut.appendChild(pn);else{if(!le&&!qe&&!K&&hn.indexOf("<")===-1)return C&&ie?C.createHTML(hn):hn;if(Ut=Qt(hn),!Ut)return le?null:ie?E:""}Ut&&Ae&&We(Ut.firstChild);const Yr=Fn(It?hn:Ut);for(;Xn=Yr.nextNode();)dr(Xn),Qr(Xn),Xn.content instanceof s&&br(Xn.content);if(It)return hn;if(le){if(oe)for(_i=N.call(Ut.ownerDocument);Ut.firstChild;)_i.appendChild(Ut.firstChild);else _i=Ut;return(se.shadowroot||se.shadowrootmode)&&(_i=P.call(r,_i,!0)),_i}let ks=K?Ut.outerHTML:Ut.innerHTML;return K&&te["!doctype"]&&Ut.ownerDocument&&Ut.ownerDocument.doctype&&Ut.ownerDocument.doctype.name&&$a(nX,Ut.ownerDocument.doctype.name)&&(ks="<!DOCTYPE "+Ut.ownerDocument.doctype.name+`>
`+ks),qe&&sS([O,V,F],ts=>{ks=ev(ks,ts," ")}),C&&ie?C.createHTML(ks):ks},t.setConfig=function(){let hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};W(hn),ge=!0},t.clearConfig=function(){Rt=null,ge=!1},t.isValidAttribute=function(hn,Xe,Ut){Rt||W({});const pn=ze(hn),Xn=ze(Xe);return Cr(pn,Xn,Ut)},t.addHook=function(hn,Xe){typeof Xe=="function"&&Qb(L[hn],Xe)},t.removeHook=function(hn,Xe){if(Xe!==void 0){const Ut=gNe(L[hn],Xe);return Ut===-1?void 0:yNe(L[hn],Ut,1)[0]}return Cz(L[hn])},t.removeHooks=function(hn){L[hn]=[]},t.removeAllHooks=function(){L=Nz()},t}var M0=rX(),iX=Object.defineProperty,re=(e,t)=>iX(e,"name",{value:t,configurable:!0}),PNe=(e,t)=>{for(var n in t)iX(e,n,{get:t[n],enumerable:!0})},Ku={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},$t={trace:re((...e)=>{},"trace"),debug:re((...e)=>{},"debug"),info:re((...e)=>{},"info"),warn:re((...e)=>{},"warn"),error:re((...e)=>{},"error"),fatal:re((...e)=>{},"fatal")},zO=re(function(e="fatal"){let t=Ku.fatal;typeof e=="string"?e.toLowerCase()in Ku&&(t=Ku[e]):typeof e=="number"&&(t=e),$t.trace=()=>{},$t.debug=()=>{},$t.info=()=>{},$t.warn=()=>{},$t.error=()=>{},$t.fatal=()=>{},t<=Ku.fatal&&($t.fatal=console.error?console.error.bind(console,hl("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",hl("FATAL"))),t<=Ku.error&&($t.error=console.error?console.error.bind(console,hl("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",hl("ERROR"))),t<=Ku.warn&&($t.warn=console.warn?console.warn.bind(console,hl("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",hl("WARN"))),t<=Ku.info&&($t.info=console.info?console.info.bind(console,hl("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",hl("INFO"))),t<=Ku.debug&&($t.debug=console.debug?console.debug.bind(console,hl("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",hl("DEBUG"))),t<=Ku.trace&&($t.trace=console.debug?console.debug.bind(console,hl("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",hl("TRACE")))},"setLogLevel"),hl=re(e=>`%c${sNe().format("ss.SSS")} : ${e} : `,"format"),sX=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Dv=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,ONe=/\s*%%.*\n/gm,n0,aX=(n0=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},re(n0,"UnknownDiagramError"),n0),j0={},UO=re(function(e,t){e=e.replace(sX,"").replace(Dv,"").replace(ONe,`
`);for(const[n,{detector:r}]of Object.entries(j0))if(r(e,t))return n;throw new aX(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),oX=re((...e)=>{for(const{id:t,detector:n,loader:r}of e)lX(t,n,r)},"registerLazyLoadedDiagrams"),lX=re((e,t,n)=>{j0[e]&&$t.warn(`Detector with key ${e} already exists. Overwriting.`),j0[e]={detector:t,loader:n},$t.debug(`Detector with key ${e} added${n?" with loader":""}`)},"addDetector"),DNe=re(e=>j0[e].loader,"getDiagramLoader"),o4=re((e,t,{depth:n=2,clobber:r=!1}={})=>{const i={depth:n,clobber:r};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(s=>o4(e,s,i)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(s=>{e.includes(s)||e.push(s)}),e):e===void 0||n<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(s=>{typeof t[s]=="object"&&(e[s]===void 0||typeof e[s]=="object")?(e[s]===void 0&&(e[s]=Array.isArray(t[s])?[]:{}),e[s]=o4(e[s],t[s],{depth:n-1,clobber:r})):(r||typeof e[s]!="object"&&typeof t[s]!="object")&&(e[s]=t[s])}),e)},"assignWithDepth"),ha=o4,OE="#ffffff",DE="#f2f2f2",Ua=re((e,t)=>t?gt(e,{s:-40,l:10}):gt(e,{s:-40,l:-10}),"mkBorder"),r0,FNe=(r0=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,_,S,C,E,A;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||gt(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||gt(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Ua(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Ua(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Ua(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Ua(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ln(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ln(this.tertiaryColor),this.lineColor=this.lineColor||ln(this.background),this.arrowheadColor=this.arrowheadColor||ln(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Dn(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Dn(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ln(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||xn(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Dn(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Dn(this.mainBkg,10)):(this.rowOdd=this.rowOdd||xn(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||xn(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||gt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||gt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||gt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||gt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||gt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||gt(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||gt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||gt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||gt(this.primaryColor,{h:330}),this.darkMode)for(let R=0;R<this.THEME_COLOR_LIMIT;R++)this["cScale"+R]=Dn(this["cScale"+R],75);else for(let R=0;R<this.THEME_COLOR_LIMIT;R++)this["cScale"+R]=Dn(this["cScale"+R],25);for(let R=0;R<this.THEME_COLOR_LIMIT;R++)this["cScaleInv"+R]=this["cScaleInv"+R]||ln(this["cScale"+R]);for(let R=0;R<this.THEME_COLOR_LIMIT;R++)this.darkMode?this["cScalePeer"+R]=this["cScalePeer"+R]||xn(this["cScale"+R],10):this["cScalePeer"+R]=this["cScalePeer"+R]||Dn(this["cScale"+R],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let R=0;R<this.THEME_COLOR_LIMIT;R++)this["cScaleLabel"+R]=this["cScaleLabel"+R]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let R=0;R<5;R++)this["surface"+R]=this["surface"+R]||gt(this.mainBkg,{h:180,s:-15,l:t*(5+R*3)}),this["surfacePeer"+R]=this["surfacePeer"+R]||gt(this.mainBkg,{h:180,s:-15,l:t*(8+R*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||gt(this.primaryColor,{h:64}),this.fillType3=this.fillType3||gt(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||gt(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||gt(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||gt(this.primaryColor,{h:128}),this.fillType7=this.fillType7||gt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||gt(this.primaryColor,{l:-10}),this.pie5=this.pie5||gt(this.secondaryColor,{l:-10}),this.pie6=this.pie6||gt(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||gt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||gt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||gt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||gt(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||gt(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||gt(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((n=this.radar)==null?void 0:n.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((s=this.radar)==null?void 0:s.curveOpacity)||.5,curveStrokeWidth:((a=this.radar)==null?void 0:a.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((u=this.radar)==null?void 0:u.legendBoxSize)||12,legendFontSize:((d=this.radar)==null?void 0:d.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||gt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||gt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||gt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||gt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||gt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||gt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||t1(this.quadrant1Fill)?xn(this.quadrant1Fill):Dn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((h=this.xyChart)==null?void 0:h.backgroundColor)||this.background,titleColor:((m=this.xyChart)==null?void 0:m.titleColor)||this.primaryTextColor,xAxisTitleColor:((y=this.xyChart)==null?void 0:y.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((b=this.xyChart)==null?void 0:b.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((v=this.xyChart)==null?void 0:v.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((x=this.xyChart)==null?void 0:x.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((_=this.xyChart)==null?void 0:_.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((S=this.xyChart)==null?void 0:S.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((C=this.xyChart)==null?void 0:C.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((E=this.xyChart)==null?void 0:E.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((A=this.xyChart)==null?void 0:A.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Dn(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||gt(this.primaryColor,{h:-30}),this.git4=this.git4||gt(this.primaryColor,{h:-60}),this.git5=this.git5||gt(this.primaryColor,{h:-90}),this.git6=this.git6||gt(this.primaryColor,{h:60}),this.git7=this.git7||gt(this.primaryColor,{h:120}),this.darkMode?(this.git0=xn(this.git0,25),this.git1=xn(this.git1,25),this.git2=xn(this.git2,25),this.git3=xn(this.git3,25),this.git4=xn(this.git4,25),this.git5=xn(this.git5,25),this.git6=xn(this.git6,25),this.git7=xn(this.git7,25)):(this.git0=Dn(this.git0,25),this.git1=Dn(this.git1,25),this.git2=Dn(this.git2,25),this.git3=Dn(this.git3,25),this.git4=Dn(this.git4,25),this.git5=Dn(this.git5,25),this.git6=Dn(this.git6,25),this.git7=Dn(this.git7,25)),this.gitInv0=this.gitInv0||ln(this.git0),this.gitInv1=this.gitInv1||ln(this.git1),this.gitInv2=this.gitInv2||ln(this.git2),this.gitInv3=this.gitInv3||ln(this.git3),this.gitInv4=this.gitInv4||ln(this.git4),this.gitInv5=this.gitInv5||ln(this.git5),this.gitInv6=this.gitInv6||ln(this.git6),this.gitInv7=this.gitInv7||ln(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||OE,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||DE}calculate(t){if(typeof t!="object"){this.updateColors();return}const n=Object.keys(t);n.forEach(r=>{this[r]=t[r]}),this.updateColors(),n.forEach(r=>{this[r]=t[r]})}},re(r0,"Theme"),r0),LNe=re(e=>{const t=new FNe;return t.calculate(e),t},"getThemeVariables"),i0,BNe=(i0=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=xn(this.primaryColor,16),this.tertiaryColor=gt(this.primaryColor,{h:-160}),this.primaryBorderColor=ln(this.background),this.secondaryBorderColor=Ua(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ua(this.tertiaryColor,this.darkMode),this.primaryTextColor=ln(this.primaryColor),this.secondaryTextColor=ln(this.secondaryColor),this.tertiaryTextColor=ln(this.tertiaryColor),this.lineColor=ln(this.background),this.textColor=ln(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=xn(ln("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=Ov(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Dn("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Dn(this.sectionBkgColor,10),this.taskBorderColor=Ov(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Ov(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||xn(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Dn(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,_,S,C,E;this.secondBkg=xn(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=xn(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=xn(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=gt(this.primaryColor,{h:64}),this.fillType3=gt(this.secondaryColor,{h:64}),this.fillType4=gt(this.primaryColor,{h:-64}),this.fillType5=gt(this.secondaryColor,{h:-64}),this.fillType6=gt(this.primaryColor,{h:128}),this.fillType7=gt(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||gt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||gt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||gt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||gt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||gt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||gt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||gt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||gt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||gt(this.primaryColor,{h:330});for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleInv"+A]=this["cScaleInv"+A]||ln(this["cScale"+A]);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScalePeer"+A]=this["cScalePeer"+A]||xn(this["cScale"+A],10);for(let A=0;A<5;A++)this["surface"+A]=this["surface"+A]||gt(this.mainBkg,{h:30,s:-30,l:-(-10+A*4)}),this["surfacePeer"+A]=this["surfacePeer"+A]||gt(this.mainBkg,{h:30,s:-30,l:-(-7+A*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleLabel"+A]=this["cScaleLabel"+A]||this.scaleLabelColor;for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["pie"+A]=this["cScale"+A];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||gt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||gt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||gt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||gt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||gt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||gt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||t1(this.quadrant1Fill)?xn(this.quadrant1Fill):Dn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((h=this.radar)==null?void 0:h.axisColor)||this.lineColor,axisStrokeWidth:((m=this.radar)==null?void 0:m.axisStrokeWidth)||2,axisLabelFontSize:((y=this.radar)==null?void 0:y.axisLabelFontSize)||12,curveOpacity:((b=this.radar)==null?void 0:b.curveOpacity)||.5,curveStrokeWidth:((v=this.radar)==null?void 0:v.curveStrokeWidth)||2,graticuleColor:((x=this.radar)==null?void 0:x.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((_=this.radar)==null?void 0:_.graticuleStrokeWidth)||1,graticuleOpacity:((S=this.radar)==null?void 0:S.graticuleOpacity)||.3,legendBoxSize:((C=this.radar)==null?void 0:C.legendBoxSize)||12,legendFontSize:((E=this.radar)==null?void 0:E.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Dn(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=xn(this.secondaryColor,20),this.git1=xn(this.pie2||this.secondaryColor,20),this.git2=xn(this.pie3||this.tertiaryColor,20),this.git3=xn(this.pie4||gt(this.primaryColor,{h:-30}),20),this.git4=xn(this.pie5||gt(this.primaryColor,{h:-60}),20),this.git5=xn(this.pie6||gt(this.primaryColor,{h:-90}),10),this.git6=xn(this.pie7||gt(this.primaryColor,{h:60}),10),this.git7=xn(this.pie8||gt(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ln(this.git0),this.gitInv1=this.gitInv1||ln(this.git1),this.gitInv2=this.gitInv2||ln(this.git2),this.gitInv3=this.gitInv3||ln(this.git3),this.gitInv4=this.gitInv4||ln(this.git4),this.gitInv5=this.gitInv5||ln(this.git5),this.gitInv6=this.gitInv6||ln(this.git6),this.gitInv7=this.gitInv7||ln(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ln(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ln(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||xn(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||xn(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const n=Object.keys(t);n.forEach(r=>{this[r]=t[r]}),this.updateColors(),n.forEach(r=>{this[r]=t[r]})}},re(i0,"Theme"),i0),$Ne=re(e=>{const t=new BNe;return t.calculate(e),t},"getThemeVariables"),s0,zNe=(s0=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=gt(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=gt(this.primaryColor,{h:-160}),this.primaryBorderColor=Ua(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ua(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ua(this.tertiaryColor,this.darkMode),this.primaryTextColor=ln(this.primaryColor),this.secondaryTextColor=ln(this.secondaryColor),this.tertiaryTextColor=ln(this.tertiaryColor),this.lineColor=ln(this.background),this.textColor=ln(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Ov(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,_,S,C,E;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||gt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||gt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||gt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||gt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||gt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||gt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||gt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||gt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||gt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Dn(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Dn(this.tertiaryColor,40);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScale"+A]=Dn(this["cScale"+A],10),this["cScalePeer"+A]=this["cScalePeer"+A]||Dn(this["cScale"+A],25);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleInv"+A]=this["cScaleInv"+A]||gt(this["cScale"+A],{h:180});for(let A=0;A<5;A++)this["surface"+A]=this["surface"+A]||gt(this.mainBkg,{h:30,l:-(5+A*5)}),this["surfacePeer"+A]=this["surfacePeer"+A]||gt(this.mainBkg,{h:30,l:-(7+A*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ln(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ln(this.labelTextColor);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleLabel"+A]=this["cScaleLabel"+A]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=xn(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||xn(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||xn(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=gt(this.primaryColor,{h:64}),this.fillType3=gt(this.secondaryColor,{h:64}),this.fillType4=gt(this.primaryColor,{h:-64}),this.fillType5=gt(this.secondaryColor,{h:-64}),this.fillType6=gt(this.primaryColor,{h:128}),this.fillType7=gt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||gt(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||gt(this.primaryColor,{l:-10}),this.pie5=this.pie5||gt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||gt(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||gt(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||gt(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||gt(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||gt(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||gt(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||gt(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||gt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||gt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||gt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||gt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||gt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||gt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||t1(this.quadrant1Fill)?xn(this.quadrant1Fill):Dn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((r=this.radar)==null?void 0:r.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((a=this.radar)==null?void 0:a.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((o=this.radar)==null?void 0:o.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((h=this.xyChart)==null?void 0:h.titleColor)||this.primaryTextColor,xAxisTitleColor:((m=this.xyChart)==null?void 0:m.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((y=this.xyChart)==null?void 0:y.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((b=this.xyChart)==null?void 0:b.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((x=this.xyChart)==null?void 0:x.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((_=this.xyChart)==null?void 0:_.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((S=this.xyChart)==null?void 0:S.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((C=this.xyChart)==null?void 0:C.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((E=this.xyChart)==null?void 0:E.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||gt(this.primaryColor,{h:-30}),this.git4=this.git4||gt(this.primaryColor,{h:-60}),this.git5=this.git5||gt(this.primaryColor,{h:-90}),this.git6=this.git6||gt(this.primaryColor,{h:60}),this.git7=this.git7||gt(this.primaryColor,{h:120}),this.darkMode?(this.git0=xn(this.git0,25),this.git1=xn(this.git1,25),this.git2=xn(this.git2,25),this.git3=xn(this.git3,25),this.git4=xn(this.git4,25),this.git5=xn(this.git5,25),this.git6=xn(this.git6,25),this.git7=xn(this.git7,25)):(this.git0=Dn(this.git0,25),this.git1=Dn(this.git1,25),this.git2=Dn(this.git2,25),this.git3=Dn(this.git3,25),this.git4=Dn(this.git4,25),this.git5=Dn(this.git5,25),this.git6=Dn(this.git6,25),this.git7=Dn(this.git7,25)),this.gitInv0=this.gitInv0||Dn(ln(this.git0),25),this.gitInv1=this.gitInv1||ln(this.git1),this.gitInv2=this.gitInv2||ln(this.git2),this.gitInv3=this.gitInv3||ln(this.git3),this.gitInv4=this.gitInv4||ln(this.git4),this.gitInv5=this.gitInv5||ln(this.git5),this.gitInv6=this.gitInv6||ln(this.git6),this.gitInv7=this.gitInv7||ln(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ln(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ln(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||OE,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||DE}calculate(t){if(Object.keys(this).forEach(r=>{this[r]==="calculated"&&(this[r]=void 0)}),typeof t!="object"){this.updateColors();return}const n=Object.keys(t);n.forEach(r=>{this[r]=t[r]}),this.updateColors(),n.forEach(r=>{this[r]=t[r]})}},re(s0,"Theme"),s0),UNe=re(e=>{const t=new zNe;return t.calculate(e),t},"getThemeVariables"),a0,qNe=(a0=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=xn("#cde498",10),this.primaryBorderColor=Ua(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ua(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ua(this.tertiaryColor,this.darkMode),this.primaryTextColor=ln(this.primaryColor),this.secondaryTextColor=ln(this.secondaryColor),this.tertiaryTextColor=ln(this.primaryColor),this.lineColor=ln(this.background),this.textColor=ln(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,_,S,C,E;this.actorBorder=Dn(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||gt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||gt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||gt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||gt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||gt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||gt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||gt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||gt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||gt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Dn(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Dn(this.tertiaryColor,40);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScale"+A]=Dn(this["cScale"+A],10),this["cScalePeer"+A]=this["cScalePeer"+A]||Dn(this["cScale"+A],25);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleInv"+A]=this["cScaleInv"+A]||gt(this["cScale"+A],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleLabel"+A]=this["cScaleLabel"+A]||this.scaleLabelColor;for(let A=0;A<5;A++)this["surface"+A]=this["surface"+A]||gt(this.mainBkg,{h:30,s:-30,l:-(5+A*5)}),this["surfacePeer"+A]=this["surfacePeer"+A]||gt(this.mainBkg,{h:30,s:-30,l:-(8+A*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||xn(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||xn(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=gt(this.primaryColor,{h:64}),this.fillType3=gt(this.secondaryColor,{h:64}),this.fillType4=gt(this.primaryColor,{h:-64}),this.fillType5=gt(this.secondaryColor,{h:-64}),this.fillType6=gt(this.primaryColor,{h:128}),this.fillType7=gt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||gt(this.primaryColor,{l:-30}),this.pie5=this.pie5||gt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||gt(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||gt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||gt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||gt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||gt(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||gt(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||gt(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||gt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||gt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||gt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||gt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||gt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||gt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||t1(this.quadrant1Fill)?xn(this.quadrant1Fill):Dn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((n=this.radar)==null?void 0:n.axisStrokeWidth)||2,axisLabelFontSize:((r=this.radar)==null?void 0:r.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((a=this.radar)==null?void 0:a.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((o=this.radar)==null?void 0:o.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((h=this.xyChart)==null?void 0:h.titleColor)||this.primaryTextColor,xAxisTitleColor:((m=this.xyChart)==null?void 0:m.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((y=this.xyChart)==null?void 0:y.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((b=this.xyChart)==null?void 0:b.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((x=this.xyChart)==null?void 0:x.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((_=this.xyChart)==null?void 0:_.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((S=this.xyChart)==null?void 0:S.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((C=this.xyChart)==null?void 0:C.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((E=this.xyChart)==null?void 0:E.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||gt(this.primaryColor,{h:-30}),this.git4=this.git4||gt(this.primaryColor,{h:-60}),this.git5=this.git5||gt(this.primaryColor,{h:-90}),this.git6=this.git6||gt(this.primaryColor,{h:60}),this.git7=this.git7||gt(this.primaryColor,{h:120}),this.darkMode?(this.git0=xn(this.git0,25),this.git1=xn(this.git1,25),this.git2=xn(this.git2,25),this.git3=xn(this.git3,25),this.git4=xn(this.git4,25),this.git5=xn(this.git5,25),this.git6=xn(this.git6,25),this.git7=xn(this.git7,25)):(this.git0=Dn(this.git0,25),this.git1=Dn(this.git1,25),this.git2=Dn(this.git2,25),this.git3=Dn(this.git3,25),this.git4=Dn(this.git4,25),this.git5=Dn(this.git5,25),this.git6=Dn(this.git6,25),this.git7=Dn(this.git7,25)),this.gitInv0=this.gitInv0||ln(this.git0),this.gitInv1=this.gitInv1||ln(this.git1),this.gitInv2=this.gitInv2||ln(this.git2),this.gitInv3=this.gitInv3||ln(this.git3),this.gitInv4=this.gitInv4||ln(this.git4),this.gitInv5=this.gitInv5||ln(this.git5),this.gitInv6=this.gitInv6||ln(this.git6),this.gitInv7=this.gitInv7||ln(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ln(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ln(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||OE,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||DE}calculate(t){if(typeof t!="object"){this.updateColors();return}const n=Object.keys(t);n.forEach(r=>{this[r]=t[r]}),this.updateColors(),n.forEach(r=>{this[r]=t[r]})}},re(a0,"Theme"),a0),VNe=re(e=>{const t=new qNe;return t.calculate(e),t},"getThemeVariables"),o0,HNe=(o0=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=xn(this.contrast,55),this.background="#ffffff",this.tertiaryColor=gt(this.primaryColor,{h:-160}),this.primaryBorderColor=Ua(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ua(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ua(this.tertiaryColor,this.darkMode),this.primaryTextColor=ln(this.primaryColor),this.secondaryTextColor=ln(this.secondaryColor),this.tertiaryTextColor=ln(this.tertiaryColor),this.lineColor=ln(this.background),this.textColor=ln(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||xn(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,n,r,i,s,a,o,l,c,u,d,h,m,y,b,v,x,_,S,C,E;this.secondBkg=xn(this.contrast,55),this.border2=this.contrast,this.actorBorder=xn(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleInv"+A]=this["cScaleInv"+A]||ln(this["cScale"+A]);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this.darkMode?this["cScalePeer"+A]=this["cScalePeer"+A]||xn(this["cScale"+A],10):this["cScalePeer"+A]=this["cScalePeer"+A]||Dn(this["cScale"+A],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleLabel"+A]=this["cScaleLabel"+A]||this.scaleLabelColor;for(let A=0;A<5;A++)this["surface"+A]=this["surface"+A]||gt(this.mainBkg,{l:-(5+A*5)}),this["surfacePeer"+A]=this["surfacePeer"+A]||gt(this.mainBkg,{l:-(8+A*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=xn(this.contrast,30),this.sectionBkgColor2=xn(this.contrast,30),this.taskBorderColor=Dn(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=xn(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Dn(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=gt(this.primaryColor,{h:64}),this.fillType3=gt(this.secondaryColor,{h:64}),this.fillType4=gt(this.primaryColor,{h:-64}),this.fillType5=gt(this.secondaryColor,{h:-64}),this.fillType6=gt(this.primaryColor,{h:128}),this.fillType7=gt(this.secondaryColor,{h:128});for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["pie"+A]=this["cScale"+A];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||gt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||gt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||gt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||gt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||gt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||gt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||t1(this.quadrant1Fill)?xn(this.quadrant1Fill):Dn(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((n=this.xyChart)==null?void 0:n.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((h=this.radar)==null?void 0:h.axisColor)||this.lineColor,axisStrokeWidth:((m=this.radar)==null?void 0:m.axisStrokeWidth)||2,axisLabelFontSize:((y=this.radar)==null?void 0:y.axisLabelFontSize)||12,curveOpacity:((b=this.radar)==null?void 0:b.curveOpacity)||.5,curveStrokeWidth:((v=this.radar)==null?void 0:v.curveStrokeWidth)||2,graticuleColor:((x=this.radar)==null?void 0:x.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((_=this.radar)==null?void 0:_.graticuleStrokeWidth)||1,graticuleOpacity:((S=this.radar)==null?void 0:S.graticuleOpacity)||.3,legendBoxSize:((C=this.radar)==null?void 0:C.legendBoxSize)||12,legendFontSize:((E=this.radar)==null?void 0:E.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Dn(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||gt(this.primaryColor,{h:-30}),this.git4=this.pie5||gt(this.primaryColor,{h:-60}),this.git5=this.pie6||gt(this.primaryColor,{h:-90}),this.git6=this.pie7||gt(this.primaryColor,{h:60}),this.git7=this.pie8||gt(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ln(this.git0),this.gitInv1=this.gitInv1||ln(this.git1),this.gitInv2=this.gitInv2||ln(this.git2),this.gitInv3=this.gitInv3||ln(this.git3),this.gitInv4=this.gitInv4||ln(this.git4),this.gitInv5=this.gitInv5||ln(this.git5),this.gitInv6=this.gitInv6||ln(this.git6),this.gitInv7=this.gitInv7||ln(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||OE,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||DE}calculate(t){if(typeof t!="object"){this.updateColors();return}const n=Object.keys(t);n.forEach(r=>{this[r]=t[r]}),this.updateColors(),n.forEach(r=>{this[r]=t[r]})}},re(o0,"Theme"),o0),WNe=re(e=>{const t=new HNe;return t.calculate(e),t},"getThemeVariables"),pd={base:{getThemeVariables:LNe},dark:{getThemeVariables:$Ne},default:{getThemeVariables:UNe},forest:{getThemeVariables:VNe},neutral:{getThemeVariables:WNe}},Yu={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},cX={...Yu,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:pd.default.getThemeVariables(),sequence:{...Yu.sequence,messageFont:re(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:re(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:re(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Yu.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Yu.c4,useWidth:void 0,personFont:re(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),external_personFont:re(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:re(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:re(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:re(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:re(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:re(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:re(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:re(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:re(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:re(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:re(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:re(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:re(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:re(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:re(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:re(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:re(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:re(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:re(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:re(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:re(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Yu.pie,useWidth:984},xyChart:{...Yu.xyChart,useWidth:void 0},requirement:{...Yu.requirement,useWidth:void 0},packet:{...Yu.packet},radar:{...Yu.radar}},uX=re((e,t="")=>Object.keys(e).reduce((n,r)=>Array.isArray(e[r])?n:typeof e[r]=="object"&&e[r]!==null?[...n,t+r,...uX(e[r],"")]:[...n,t+r],[]),"keyify"),GNe=new Set(uX(cX,"")),dX=cX,EC=re(e=>{if($t.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>EC(t));return}for(const t of Object.keys(e)){if($t.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!GNe.has(t)||e[t]==null){$t.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){$t.debug("sanitizing object",t),EC(e[t]);continue}const n=["themeCSS","fontFamily","altFontFamily"];for(const r of n)t.includes(r)&&($t.debug("sanitizing css option",t),e[t]=KNe(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const n=e.themeVariables[t];n!=null&&n.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}$t.debug("After sanitization",e)}},"sanitizeDirective"),KNe=re(e=>{let t=0,n=0;for(const r of e){if(t<n)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?t++:r==="}"&&n++}return t!==n?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),P0=Object.freeze(dX),uo=ha({},P0),fX,O0=[],Fv=ha({},P0),FE=re((e,t)=>{let n=ha({},e),r={};for(const i of t)mX(i),r=ha(r,i);if(n=ha(n,r),r.theme&&r.theme in pd){const i=ha({},fX),s=ha(i.themeVariables||{},r.themeVariables);n.theme&&n.theme in pd&&(n.themeVariables=pd[n.theme].getThemeVariables(s))}return Fv=n,gX(Fv),Fv},"updateCurrentConfig"),YNe=re(e=>(uo=ha({},P0),uo=ha(uo,e),e.theme&&pd[e.theme]&&(uo.themeVariables=pd[e.theme].getThemeVariables(e.themeVariables)),FE(uo,O0),uo),"setSiteConfig"),ZNe=re(e=>{fX=ha({},e)},"saveConfigFromInitialize"),XNe=re(e=>(uo=ha(uo,e),FE(uo,O0),uo),"updateSiteConfig"),hX=re(()=>ha({},uo),"getSiteConfig"),pX=re(e=>(gX(e),ha(Fv,e),wo()),"setConfig"),wo=re(()=>ha({},Fv),"getConfig"),mX=re(e=>{e&&(["secure",...uo.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&($t.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&mX(e[t])}))},"sanitize"),JNe=re(e=>{var t;EC(e),e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),O0.push(e),FE(uo,O0)},"addDirective"),TC=re((e=uo)=>{O0=[],FE(e,O0)},"reset"),QNe={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Mz={},eMe=re(e=>{Mz[e]||($t.warn(QNe[e]),Mz[e]=!0)},"issueWarning"),gX=re(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&eMe("LAZY_LOAD_DEPRECATED")},"checkConfig"),n1=/<br\s*\/?>/gi,tMe=re(e=>e?vX(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),nMe=(()=>{let e=!1;return()=>{e||(yX(),e=!0)}})();function yX(){const e="data-temp-href-target";M0.addHook("beforeSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),M0.addHook("afterSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}re(yX,"setupDompurifyHooks");var bX=re(e=>(nMe(),M0.sanitize(e)),"removeScript"),jz=re((e,t)=>{var n;if(((n=t.flowchart)==null?void 0:n.htmlLabels)!==!1){const r=t.securityLevel;r==="antiscript"||r==="strict"?e=bX(e):r!=="loose"&&(e=vX(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=aMe(e))}return e},"sanitizeMore"),Vp=re((e,t)=>e&&(t.dompurifyConfig?e=M0.sanitize(jz(e,t),t.dompurifyConfig).toString():e=M0.sanitize(jz(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),rMe=re((e,t)=>typeof e=="string"?Vp(e,t):e.flat().map(n=>Vp(n,t)),"sanitizeTextOrArray"),iMe=re(e=>n1.test(e),"hasBreaks"),sMe=re(e=>e.split(n1),"splitBreaks"),aMe=re(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),vX=re(e=>e.replace(n1,"#br#"),"breakToPlaceholder"),oMe=re(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},"getUrl"),Os=re(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),lMe=re(function(...e){const t=e.filter(n=>!isNaN(n));return Math.max(...t)},"getMax"),cMe=re(function(...e){const t=e.filter(n=>!isNaN(n));return Math.min(...t)},"getMin"),Pz=re(function(e){const t=e.split(/(,)/),n=[];for(let r=0;r<t.length;r++){let i=t[r];if(i===","&&r>0&&r+1<t.length){const s=t[r-1],a=t[r+1];uMe(s,a)&&(i=s+","+a,r++,n.pop())}n.push(dMe(i))}return n.join("")},"parseGenericTypes"),l4=re((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),uMe=re((e,t)=>{const n=l4(e,"~"),r=l4(t,"~");return n===1&&r===1},"shouldCombineSets"),dMe=re(e=>{const t=l4(e,"~");let n=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),n=!0);const r=[...e];let i=r.indexOf("~"),s=r.lastIndexOf("~");for(;i!==-1&&s!==-1&&i!==s;)r[i]="<",r[s]=">",i=r.indexOf("~"),s=r.lastIndexOf("~");return n&&r.unshift("~"),r.join("")},"processSet"),Oz=re(()=>window.MathMLElement!==void 0,"isMathMLSupported"),c4=/\$\$(.*)\$\$/g,D0=re(e=>{var t;return(((t=e.match(c4))==null?void 0:t.length)??0)>0},"hasKatex"),Lot=re(async(e,t)=>{e=await qO(e,t);const n=document.createElement("div");n.innerHTML=e,n.id="katex-temp",n.style.visibility="hidden",n.style.position="absolute",n.style.top="0";const r=document.querySelector("body");r==null||r.insertAdjacentElement("beforeend",n);const i={width:n.clientWidth,height:n.clientHeight};return n.remove(),i},"calculateMathMLDimensions"),qO=re(async(e,t)=>{if(!D0(e))return e;if(!(Oz()||t.legacyMathML||t.forceLegacyMathML))return e.replace(c4,"MathML is unsupported in this environment.");const{default:n}=await Hr(async()=>{const{default:i}=await import("./katex-ChWnQ-fc.js");return{default:i}},[]),r=t.forceLegacyMathML||!Oz()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(n1).map(i=>D0(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(c4,(i,s)=>n.renderToString(s,{throwOnError:!0,displayMode:!0,output:r}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},"renderKatex"),vy={getRows:tMe,sanitizeText:Vp,sanitizeTextOrArray:rMe,hasBreaks:iMe,splitBreaks:sMe,lineBreakRegex:n1,removeScript:bX,getUrl:oMe,evaluate:Os,getMax:lMe,getMin:cMe},fMe=re(function(e,t){for(let n of t)e.attr(n[0],n[1])},"d3Attrs"),hMe=re(function(e,t,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${t}px;`)):(r.set("height",e),r.set("width",t)),r},"calculateSvgSizeAttrs"),xX=re(function(e,t,n,r){const i=hMe(t,n,r);fMe(e,i)},"configureSvgSize"),pMe=re(function(e,t,n,r){const i=t.node().getBBox(),s=i.width,a=i.height;$t.info(`SVG bounds: ${s}x${a}`,i);let o=0,l=0;$t.info(`Graph bounds: ${o}x${l}`,e),o=s+n*2,l=a+n*2,$t.info(`Calculated bounds: ${o}x${l}`),xX(t,l,o,r);const c=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;t.attr("viewBox",c)},"setupGraphViewbox"),XS={},mMe=re((e,t,n)=>{let r="";return e in XS&&XS[e]?r=XS[e](n):$t.warn(`No theme found for ${e}`),` & {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
    fill: ${n.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${n.errorBkgColor};
  }
  & .error-text {
    fill: ${n.errorTextColor};
    stroke: ${n.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${n.lineColor};
    stroke: ${n.lineColor};
  }
  & .marker.cross {
    stroke: ${n.lineColor};
  }

  & svg {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
  }
   & p {
    margin: 0
   }

  ${r}

  ${t}
`},"getStyles"),gMe=re((e,t)=>{t!==void 0&&(XS[e]=t)},"addStylesForDiagram"),yMe=mMe,wX={};PNe(wX,{clear:()=>bMe,getAccDescription:()=>_Me,getAccTitle:()=>xMe,getDiagramTitle:()=>CMe,setAccDescription:()=>wMe,setAccTitle:()=>vMe,setDiagramTitle:()=>SMe});var VO="",HO="",WO="",GO=re(e=>Vp(e,wo()),"sanitizeText"),bMe=re(()=>{VO="",WO="",HO=""},"clear"),vMe=re(e=>{VO=GO(e).replace(/^\s+/g,"")},"setAccTitle"),xMe=re(()=>VO,"getAccTitle"),wMe=re(e=>{WO=GO(e).replace(/\n\s+/g,`
`)},"setAccDescription"),_Me=re(()=>WO,"getAccDescription"),SMe=re(e=>{HO=GO(e)},"setDiagramTitle"),CMe=re(()=>HO,"getDiagramTitle"),Dz=$t,kMe=zO,ni=wo,Bot=pX,$ot=P0,KO=re(e=>Vp(e,ni()),"sanitizeText"),EMe=pMe,TMe=re(()=>wX,"getCommonDb"),AC={},RC=re((e,t,n)=>{var r;AC[e]&&Dz.warn(`Diagram with id ${e} already registered. Overwriting.`),AC[e]=t,n&&lX(e,n),gMe(e,t.styles),(r=t.injectUtils)==null||r.call(t,Dz,kMe,ni,KO,EMe,TMe(),()=>{})},"registerDiagram"),u4=re(e=>{if(e in AC)return AC[e];throw new AMe(e)},"getDiagram"),l0,AMe=(l0=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},re(l0,"DiagramNotFoundError"),l0);function YO(e){return typeof e>"u"||e===null}re(YO,"isNothing");function _X(e){return typeof e=="object"&&e!==null}re(_X,"isObject");function SX(e){return Array.isArray(e)?e:YO(e)?[]:[e]}re(SX,"toArray");function CX(e,t){var n,r,i,s;if(t)for(s=Object.keys(t),n=0,r=s.length;n<r;n+=1)i=s[n],e[i]=t[i];return e}re(CX,"extend");function kX(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}re(kX,"repeat");function EX(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}re(EX,"isNegativeZero");var RMe=YO,IMe=_X,NMe=SX,MMe=kX,jMe=EX,PMe=CX,Ms={isNothing:RMe,isObject:IMe,toArray:NMe,repeat:MMe,isNegativeZero:jMe,extend:PMe};function ZO(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}re(ZO,"formatError");function F0(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=ZO(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}re(F0,"YAMLException$1");F0.prototype=Object.create(Error.prototype);F0.prototype.constructor=F0;F0.prototype.toString=re(function(t){return this.name+": "+ZO(this,t)},"toString");var go=F0;function JS(e,t,n,r,i){var s="",a="",o=Math.floor(i/2)-1;return r-t>o&&(s=" ... ",t=r-o+s.length),n-r>o&&(a=" ...",n=r+o-a.length),{str:s+e.slice(t,n).replace(/\t/g,"→")+a,pos:r-t+s.length}}re(JS,"getLine");function QS(e,t){return Ms.repeat(" ",t-e.length)+e}re(QS,"padStart");function TX(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],s,a=-1;s=n.exec(e.buffer);)i.push(s.index),r.push(s.index+s[0].length),e.position<=s.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var o="",l,c,u=Math.min(e.line+t.linesAfter,i.length).toString().length,d=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(a-l<0);l++)c=JS(e.buffer,r[a-l],i[a-l],e.position-(r[a]-r[a-l]),d),o=Ms.repeat(" ",t.indent)+QS((e.line-l+1).toString(),u)+" | "+c.str+`
`+o;for(c=JS(e.buffer,r[a],i[a],e.position,d),o+=Ms.repeat(" ",t.indent)+QS((e.line+1).toString(),u)+" | "+c.str+`
`,o+=Ms.repeat("-",t.indent+u+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(a+l>=i.length);l++)c=JS(e.buffer,r[a+l],i[a+l],e.position-(r[a]-r[a+l]),d),o+=Ms.repeat(" ",t.indent)+QS((e.line+l+1).toString(),u)+" | "+c.str+`
`;return o.replace(/\n$/,"")}re(TX,"makeSnippet");var OMe=TX,DMe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],FMe=["scalar","sequence","mapping"];function AX(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}re(AX,"compileStyleAliases");function RX(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(DMe.indexOf(n)===-1)throw new go('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=AX(t.styleAliases||null),FMe.indexOf(this.kind)===-1)throw new go('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}re(RX,"Type$1");var Ta=RX;function d4(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(s,a){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=a)}),n[i]=r}),n}re(d4,"compileList");function IX(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(re(r,"collectType"),t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}re(IX,"compileMap");function IC(e){return this.extend(e)}re(IC,"Schema$1");IC.prototype.extend=re(function(t){var n=[],r=[];if(t instanceof Ta)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new go("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof Ta))throw new go("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new go("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new go("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof Ta))throw new go("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(IC.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=d4(i,"implicit"),i.compiledExplicit=d4(i,"explicit"),i.compiledTypeMap=IX(i.compiledImplicit,i.compiledExplicit),i},"extend");var LMe=IC,BMe=new Ta("tag:yaml.org,2002:str",{kind:"scalar",construct:re(function(e){return e!==null?e:""},"construct")}),$Me=new Ta("tag:yaml.org,2002:seq",{kind:"sequence",construct:re(function(e){return e!==null?e:[]},"construct")}),zMe=new Ta("tag:yaml.org,2002:map",{kind:"mapping",construct:re(function(e){return e!==null?e:{}},"construct")}),UMe=new LMe({explicit:[BMe,$Me,zMe]});function NX(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}re(NX,"resolveYamlNull");function MX(){return null}re(MX,"constructYamlNull");function jX(e){return e===null}re(jX,"isNull");var qMe=new Ta("tag:yaml.org,2002:null",{kind:"scalar",resolve:NX,construct:MX,predicate:jX,represent:{canonical:re(function(){return"~"},"canonical"),lowercase:re(function(){return"null"},"lowercase"),uppercase:re(function(){return"NULL"},"uppercase"),camelcase:re(function(){return"Null"},"camelcase"),empty:re(function(){return""},"empty")},defaultStyle:"lowercase"});function PX(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}re(PX,"resolveYamlBoolean");function OX(e){return e==="true"||e==="True"||e==="TRUE"}re(OX,"constructYamlBoolean");function DX(e){return Object.prototype.toString.call(e)==="[object Boolean]"}re(DX,"isBoolean");var VMe=new Ta("tag:yaml.org,2002:bool",{kind:"scalar",resolve:PX,construct:OX,predicate:DX,represent:{lowercase:re(function(e){return e?"true":"false"},"lowercase"),uppercase:re(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:re(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function FX(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}re(FX,"isHexCode");function LX(e){return 48<=e&&e<=55}re(LX,"isOctCode");function BX(e){return 48<=e&&e<=57}re(BX,"isDecCode");function $X(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!FX(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!LX(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!BX(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}re($X,"resolveYamlInteger");function zX(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}re(zX,"constructYamlInteger");function UX(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Ms.isNegativeZero(e)}re(UX,"isInteger");var HMe=new Ta("tag:yaml.org,2002:int",{kind:"scalar",resolve:$X,construct:zX,predicate:UX,represent:{binary:re(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:re(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:re(function(e){return e.toString(10)},"decimal"),hexadecimal:re(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),WMe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function qX(e){return!(e===null||!WMe.test(e)||e[e.length-1]==="_")}re(qX,"resolveYamlFloat");function VX(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}re(VX,"constructYamlFloat");var GMe=/^[-+]?[0-9]+e/;function HX(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ms.isNegativeZero(e))return"-0.0";return n=e.toString(10),GMe.test(n)?n.replace("e",".e"):n}re(HX,"representYamlFloat");function WX(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Ms.isNegativeZero(e))}re(WX,"isFloat");var KMe=new Ta("tag:yaml.org,2002:float",{kind:"scalar",resolve:qX,construct:VX,predicate:WX,represent:HX,defaultStyle:"lowercase"}),GX=UMe.extend({implicit:[qMe,VMe,HMe,KMe]}),YMe=GX,KX=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YX=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ZX(e){return e===null?!1:KX.exec(e)!==null||YX.exec(e)!==null}re(ZX,"resolveYamlTimestamp");function XX(e){var t,n,r,i,s,a,o,l=0,c=null,u,d,h;if(t=KX.exec(e),t===null&&(t=YX.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(s=+t[4],a=+t[5],o=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=+t[10],d=+(t[11]||0),c=(u*60+d)*6e4,t[9]==="-"&&(c=-c)),h=new Date(Date.UTC(n,r,i,s,a,o,l)),c&&h.setTime(h.getTime()-c),h}re(XX,"constructYamlTimestamp");function JX(e){return e.toISOString()}re(JX,"representYamlTimestamp");var ZMe=new Ta("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ZX,construct:XX,instanceOf:Date,represent:JX});function QX(e){return e==="<<"||e===null}re(QX,"resolveYamlMerge");var XMe=new Ta("tag:yaml.org,2002:merge",{kind:"scalar",resolve:QX}),XO=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function eJ(e){if(e===null)return!1;var t,n,r=0,i=e.length,s=XO;for(n=0;n<i;n++)if(t=s.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}re(eJ,"resolveYamlBinary");function tJ(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,s=XO,a=0,o=[];for(t=0;t<i;t++)t%4===0&&t&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|s.indexOf(r.charAt(t));return n=i%4*6,n===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):n===18?(o.push(a>>10&255),o.push(a>>2&255)):n===12&&o.push(a>>4&255),new Uint8Array(o)}re(tJ,"constructYamlBinary");function nJ(e){var t="",n=0,r,i,s=e.length,a=XO;for(r=0;r<s;r++)r%3===0&&r&&(t+=a[n>>18&63],t+=a[n>>12&63],t+=a[n>>6&63],t+=a[n&63]),n=(n<<8)+e[r];return i=s%3,i===0?(t+=a[n>>18&63],t+=a[n>>12&63],t+=a[n>>6&63],t+=a[n&63]):i===2?(t+=a[n>>10&63],t+=a[n>>4&63],t+=a[n<<2&63],t+=a[64]):i===1&&(t+=a[n>>2&63],t+=a[n<<4&63],t+=a[64],t+=a[64]),t}re(nJ,"representYamlBinary");function rJ(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}re(rJ,"isBinary");var JMe=new Ta("tag:yaml.org,2002:binary",{kind:"scalar",resolve:eJ,construct:tJ,predicate:rJ,represent:nJ}),QMe=Object.prototype.hasOwnProperty,e3e=Object.prototype.toString;function iJ(e){if(e===null)return!0;var t=[],n,r,i,s,a,o=e;for(n=0,r=o.length;n<r;n+=1){if(i=o[n],a=!1,e3e.call(i)!=="[object Object]")return!1;for(s in i)if(QMe.call(i,s))if(!a)a=!0;else return!1;if(!a)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}re(iJ,"resolveYamlOmap");function sJ(e){return e!==null?e:[]}re(sJ,"constructYamlOmap");var t3e=new Ta("tag:yaml.org,2002:omap",{kind:"sequence",resolve:iJ,construct:sJ}),n3e=Object.prototype.toString;function aJ(e){if(e===null)return!0;var t,n,r,i,s,a=e;for(s=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],n3e.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[t]=[i[0],r[i[0]]]}return!0}re(aJ,"resolveYamlPairs");function oJ(e){if(e===null)return[];var t,n,r,i,s,a=e;for(s=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],i=Object.keys(r),s[t]=[i[0],r[i[0]]];return s}re(oJ,"constructYamlPairs");var r3e=new Ta("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:aJ,construct:oJ}),i3e=Object.prototype.hasOwnProperty;function lJ(e){if(e===null)return!0;var t,n=e;for(t in n)if(i3e.call(n,t)&&n[t]!==null)return!1;return!0}re(lJ,"resolveYamlSet");function cJ(e){return e!==null?e:{}}re(cJ,"constructYamlSet");var s3e=new Ta("tag:yaml.org,2002:set",{kind:"mapping",resolve:lJ,construct:cJ}),uJ=YMe.extend({implicit:[ZMe,XMe],explicit:[JMe,t3e,r3e,s3e]}),rh=Object.prototype.hasOwnProperty,NC=1,dJ=2,fJ=3,MC=4,GN=1,a3e=2,Fz=3,o3e=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,l3e=/[\x85\u2028\u2029]/,c3e=/[,\[\]\{\}]/,hJ=/^(?:!|!!|![a-z\-]+!)$/i,pJ=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function f4(e){return Object.prototype.toString.call(e)}re(f4,"_class");function ac(e){return e===10||e===13}re(ac,"is_EOL");function Bf(e){return e===9||e===32}re(Bf,"is_WHITE_SPACE");function qa(e){return e===9||e===32||e===10||e===13}re(qa,"is_WS_OR_EOL");function vp(e){return e===44||e===91||e===93||e===123||e===125}re(vp,"is_FLOW_INDICATOR");function mJ(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}re(mJ,"fromHexCode");function gJ(e){return e===120?2:e===117?4:e===85?8:0}re(gJ,"escapedHexLen");function yJ(e){return 48<=e&&e<=57?e-48:-1}re(yJ,"fromDecimalCode");function h4(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}re(h4,"simpleEscapeSequence");function bJ(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}re(bJ,"charFromCodepoint");var vJ=new Array(256),xJ=new Array(256);for(sp=0;sp<256;sp++)vJ[sp]=h4(sp)?1:0,xJ[sp]=h4(sp);var sp;function wJ(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||uJ,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}re(wJ,"State$1");function JO(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=OMe(n),new go(t,n)}re(JO,"generateError");function Nn(e,t){throw JO(e,t)}re(Nn,"throwError");function jx(e,t){e.onWarning&&e.onWarning.call(null,JO(e,t))}re(jx,"throwWarning");var Lz={YAML:re(function(t,n,r){var i,s,a;t.version!==null&&Nn(t,"duplication of %YAML directive"),r.length!==1&&Nn(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&Nn(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),a=parseInt(i[2],10),s!==1&&Nn(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=a<2,a!==1&&a!==2&&jx(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:re(function(t,n,r){var i,s;r.length!==2&&Nn(t,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],hJ.test(i)||Nn(t,"ill-formed tag handle (first argument) of the TAG directive"),rh.call(t.tagMap,i)&&Nn(t,'there is a previously declared suffix for "'+i+'" tag handle'),pJ.test(s)||Nn(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Nn(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s},"handleTagDirective")};function md(e,t,n,r){var i,s,a,o;if(t<n){if(o=e.input.slice(t,n),r)for(i=0,s=o.length;i<s;i+=1)a=o.charCodeAt(i),a===9||32<=a&&a<=1114111||Nn(e,"expected valid JSON character");else o3e.test(o)&&Nn(e,"the stream contains non-printable characters");e.result+=o}}re(md,"captureSegment");function p4(e,t,n,r){var i,s,a,o;for(Ms.isObject(n)||Nn(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,o=i.length;a<o;a+=1)s=i[a],rh.call(t,s)||(t[s]=n[s],r[s]=!0)}re(p4,"mergeMappings");function xp(e,t,n,r,i,s,a,o,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&Nn(e,"nested arrays are not supported inside keys"),typeof i=="object"&&f4(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&f4(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)p4(e,t,s[c],n);else p4(e,t,s,n);else!e.json&&!rh.call(n,i)&&rh.call(t,i)&&(e.line=a||e.line,e.lineStart=o||e.lineStart,e.position=l||e.position,Nn(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete n[i];return t}re(xp,"storeMappingPair");function LE(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Nn(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}re(LE,"readLineBreak");function ls(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Bf(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(ac(i))for(LE(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&jx(e,"deficient indentation"),r}re(ls,"skipSeparationSpace");function r1(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||qa(n)))}re(r1,"testDocumentSeparator");function BE(e,t){t===1?e.result+=" ":t>1&&(e.result+=Ms.repeat(`
`,t-1))}re(BE,"writeFoldedLines");function _J(e,t,n){var r,i,s,a,o,l,c,u,d=e.kind,h=e.result,m;if(m=e.input.charCodeAt(e.position),qa(m)||vp(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(i=e.input.charCodeAt(e.position+1),qa(i)||n&&vp(i)))return!1;for(e.kind="scalar",e.result="",s=a=e.position,o=!1;m!==0;){if(m===58){if(i=e.input.charCodeAt(e.position+1),qa(i)||n&&vp(i))break}else if(m===35){if(r=e.input.charCodeAt(e.position-1),qa(r))break}else{if(e.position===e.lineStart&&r1(e)||n&&vp(m))break;if(ac(m))if(l=e.line,c=e.lineStart,u=e.lineIndent,ls(e,!1,-1),e.lineIndent>=t){o=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=l,e.lineStart=c,e.lineIndent=u;break}}o&&(md(e,s,a,!1),BE(e,e.line-l),s=a=e.position,o=!1),Bf(m)||(a=e.position+1),m=e.input.charCodeAt(++e.position)}return md(e,s,a,!1),e.result?!0:(e.kind=d,e.result=h,!1)}re(_J,"readPlainScalar");function SJ(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(md(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else ac(n)?(md(e,r,i,!0),BE(e,ls(e,!1,t)),r=i=e.position):e.position===e.lineStart&&r1(e)?Nn(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Nn(e,"unexpected end of the stream within a single quoted scalar")}re(SJ,"readSingleQuotedScalar");function CJ(e,t){var n,r,i,s,a,o;if(o=e.input.charCodeAt(e.position),o!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(o=e.input.charCodeAt(e.position))!==0;){if(o===34)return md(e,n,e.position,!0),e.position++,!0;if(o===92){if(md(e,n,e.position,!0),o=e.input.charCodeAt(++e.position),ac(o))ls(e,!1,t);else if(o<256&&vJ[o])e.result+=xJ[o],e.position++;else if((a=gJ(o))>0){for(i=a,s=0;i>0;i--)o=e.input.charCodeAt(++e.position),(a=mJ(o))>=0?s=(s<<4)+a:Nn(e,"expected hexadecimal character");e.result+=bJ(s),e.position++}else Nn(e,"unknown escape sequence");n=r=e.position}else ac(o)?(md(e,n,r,!0),BE(e,ls(e,!1,t)),n=r=e.position):e.position===e.lineStart&&r1(e)?Nn(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Nn(e,"unexpected end of the stream within a double quoted scalar")}re(CJ,"readDoubleQuotedScalar");function kJ(e,t){var n=!0,r,i,s,a=e.tag,o,l=e.anchor,c,u,d,h,m,y=Object.create(null),b,v,x,_;if(_=e.input.charCodeAt(e.position),_===91)u=93,m=!1,o=[];else if(_===123)u=125,m=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),_=e.input.charCodeAt(++e.position);_!==0;){if(ls(e,!0,t),_=e.input.charCodeAt(e.position),_===u)return e.position++,e.tag=a,e.anchor=l,e.kind=m?"mapping":"sequence",e.result=o,!0;n?_===44&&Nn(e,"expected the node content, but found ','"):Nn(e,"missed comma between flow collection entries"),v=b=x=null,d=h=!1,_===63&&(c=e.input.charCodeAt(e.position+1),qa(c)&&(d=h=!0,e.position++,ls(e,!0,t))),r=e.line,i=e.lineStart,s=e.position,Hp(e,t,NC,!1,!0),v=e.tag,b=e.result,ls(e,!0,t),_=e.input.charCodeAt(e.position),(h||e.line===r)&&_===58&&(d=!0,_=e.input.charCodeAt(++e.position),ls(e,!0,t),Hp(e,t,NC,!1,!0),x=e.result),m?xp(e,o,y,v,b,x,r,i,s):d?o.push(xp(e,null,y,v,b,x,r,i,s)):o.push(b),ls(e,!0,t),_=e.input.charCodeAt(e.position),_===44?(n=!0,_=e.input.charCodeAt(++e.position)):n=!1}Nn(e,"unexpected end of the stream within a flow collection")}re(kJ,"readFlowCollection");function EJ(e,t){var n,r,i=GN,s=!1,a=!1,o=t,l=0,c=!1,u,d;if(d=e.input.charCodeAt(e.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)GN===i?i=d===43?Fz:a3e:Nn(e,"repeat of a chomping mode identifier");else if((u=yJ(d))>=0)u===0?Nn(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?Nn(e,"repeat of an indentation width identifier"):(o=t+u-1,a=!0);else break;if(Bf(d)){do d=e.input.charCodeAt(++e.position);while(Bf(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!ac(d)&&d!==0)}for(;d!==0;){for(LE(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!a||e.lineIndent<o)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>o&&(o=e.lineIndent),ac(d)){l++;continue}if(e.lineIndent<o){i===Fz?e.result+=Ms.repeat(`
`,s?1+l:l):i===GN&&s&&(e.result+=`
`);break}for(r?Bf(d)?(c=!0,e.result+=Ms.repeat(`
`,s?1+l:l)):c?(c=!1,e.result+=Ms.repeat(`
`,l+1)):l===0?s&&(e.result+=" "):e.result+=Ms.repeat(`
`,l):e.result+=Ms.repeat(`
`,s?1+l:l),s=!0,a=!0,l=0,n=e.position;!ac(d)&&d!==0;)d=e.input.charCodeAt(++e.position);md(e,n,e.position,!1)}return!0}re(EJ,"readBlockScalar");function m4(e,t){var n,r=e.tag,i=e.anchor,s=[],a,o=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Nn(e,"tab characters must not be used in indentation")),!(l!==45||(a=e.input.charCodeAt(e.position+1),!qa(a))));){if(o=!0,e.position++,ls(e,!0,-1)&&e.lineIndent<=t){s.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,Hp(e,t,fJ,!1,!0),s.push(e.result),ls(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)Nn(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return o?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}re(m4,"readBlockSequence");function TJ(e,t,n){var r,i,s,a,o,l,c=e.tag,u=e.anchor,d={},h=Object.create(null),m=null,y=null,b=null,v=!1,x=!1,_;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),_=e.input.charCodeAt(e.position);_!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Nn(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),s=e.line,(_===63||_===58)&&qa(r))_===63?(v&&(xp(e,d,h,m,y,null,a,o,l),m=y=b=null),x=!0,v=!0,i=!0):v?(v=!1,i=!0):Nn(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,_=r;else{if(a=e.line,o=e.lineStart,l=e.position,!Hp(e,n,dJ,!1,!0))break;if(e.line===s){for(_=e.input.charCodeAt(e.position);Bf(_);)_=e.input.charCodeAt(++e.position);if(_===58)_=e.input.charCodeAt(++e.position),qa(_)||Nn(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(xp(e,d,h,m,y,null,a,o,l),m=y=b=null),x=!0,v=!1,i=!1,m=e.tag,y=e.result;else if(x)Nn(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=u,!0}else if(x)Nn(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=u,!0}if((e.line===s||e.lineIndent>t)&&(v&&(a=e.line,o=e.lineStart,l=e.position),Hp(e,t,MC,!0,i)&&(v?y=e.result:b=e.result),v||(xp(e,d,h,m,y,b,a,o,l),m=y=b=null),ls(e,!0,-1),_=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&_!==0)Nn(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&xp(e,d,h,m,y,null,a,o,l),x&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=d),x}re(TJ,"readBlockMapping");function AJ(e){var t,n=!1,r=!1,i,s,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&Nn(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(n=!0,a=e.input.charCodeAt(++e.position)):a===33?(r=!0,i="!!",a=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(s=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):Nn(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!qa(a);)a===33&&(r?Nn(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),hJ.test(i)||Nn(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),c3e.test(s)&&Nn(e,"tag suffix cannot contain flow indicator characters")}s&&!pJ.test(s)&&Nn(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{Nn(e,"tag name is malformed: "+s)}return n?e.tag=s:rh.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:Nn(e,'undeclared tag handle "'+i+'"'),!0}re(AJ,"readTagProperty");function RJ(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&Nn(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!qa(n)&&!vp(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Nn(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}re(RJ,"readAnchorProperty");function IJ(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!qa(r)&&!vp(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Nn(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),rh.call(e.anchorMap,n)||Nn(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],ls(e,!0,-1),!0}re(IJ,"readAlias");function Hp(e,t,n,r,i){var s,a,o,l=1,c=!1,u=!1,d,h,m,y,b,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=a=o=MC===n||fJ===n,r&&ls(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;AJ(e)||RJ(e);)ls(e,!0,-1)?(c=!0,o=s,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):o=!1;if(o&&(o=c||i),(l===1||MC===n)&&(NC===n||dJ===n?b=t:b=t+1,v=e.position-e.lineStart,l===1?o&&(m4(e,v)||TJ(e,v,b))||kJ(e,b)?u=!0:(a&&EJ(e,b)||SJ(e,b)||CJ(e,b)?u=!0:IJ(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&Nn(e,"alias node should not have any properties")):_J(e,b,NC===n)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(u=o&&m4(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Nn(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,h=e.implicitTypes.length;d<h;d+=1)if(y=e.implicitTypes[d],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(rh.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,m=e.typeMap.multi[e.kind||"fallback"],d=0,h=m.length;d<h;d+=1)if(e.tag.slice(0,m[d].tag.length)===m[d].tag){y=m[d];break}y||Nn(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&Nn(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Nn(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}re(Hp,"composeNode");function NJ(e){var t=e.position,n,r,i,s=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(a=e.input.charCodeAt(e.position))!==0&&(ls(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(s=!0,a=e.input.charCodeAt(++e.position),n=e.position;a!==0&&!qa(a);)a=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&Nn(e,"directive name must not be less than one character in length");a!==0;){for(;Bf(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!ac(a));break}if(ac(a))break;for(n=e.position;a!==0&&!qa(a);)a=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}a!==0&&LE(e),rh.call(Lz,r)?Lz[r](e,r,i):jx(e,'unknown document directive "'+r+'"')}if(ls(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ls(e,!0,-1)):s&&Nn(e,"directives end mark is expected"),Hp(e,e.lineIndent-1,MC,!1,!0),ls(e,!0,-1),e.checkLineBreaks&&l3e.test(e.input.slice(t,e.position))&&jx(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&r1(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ls(e,!0,-1));return}if(e.position<e.length-1)Nn(e,"end of the stream or a document separator is expected");else return}re(NJ,"readDocument");function QO(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new wJ(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,Nn(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)NJ(n);return n.documents}re(QO,"loadDocuments");function u3e(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=QO(e,n);if(typeof t!="function")return r;for(var i=0,s=r.length;i<s;i+=1)t(r[i])}re(u3e,"loadAll$1");function MJ(e,t){var n=QO(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new go("expected a single document in the stream, but found more")}}re(MJ,"load$1");var d3e=MJ,f3e={load:d3e},jJ=Object.prototype.toString,PJ=Object.prototype.hasOwnProperty,eD=65279,h3e=9,Px=10,p3e=13,m3e=32,g3e=33,y3e=34,g4=35,b3e=37,v3e=38,x3e=39,w3e=42,OJ=44,_3e=45,jC=58,S3e=61,C3e=62,k3e=63,E3e=64,DJ=91,FJ=93,T3e=96,LJ=123,A3e=124,BJ=125,ja={};ja[0]="\\0";ja[7]="\\a";ja[8]="\\b";ja[9]="\\t";ja[10]="\\n";ja[11]="\\v";ja[12]="\\f";ja[13]="\\r";ja[27]="\\e";ja[34]='\\"';ja[92]="\\\\";ja[133]="\\N";ja[160]="\\_";ja[8232]="\\L";ja[8233]="\\P";var R3e=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],I3e=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function $J(e,t){var n,r,i,s,a,o,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,s=r.length;i<s;i+=1)a=r[i],o=String(t[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=e.compiledTypeMap.fallback[a],l&&PJ.call(l.styleAliases,o)&&(o=l.styleAliases[o]),n[a]=o;return n}re($J,"compileStyleMap");function zJ(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new go("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Ms.repeat("0",r-t.length)+t}re(zJ,"encodeHex");var N3e=1,Ox=2;function UJ(e){this.schema=e.schema||uJ,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Ms.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=$J(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Ox:N3e,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}re(UJ,"State");function y4(e,t){for(var n=Ms.repeat(" ",t),r=0,i=-1,s="",a,o=e.length;r<o;)i=e.indexOf(`
`,r),i===-1?(a=e.slice(r),r=o):(a=e.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(s+=n),s+=a;return s}re(y4,"indentString");function PC(e,t){return`
`+Ms.repeat(" ",e.indent*t)}re(PC,"generateNextLine");function qJ(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}re(qJ,"testImplicitResolving");function Dx(e){return e===m3e||e===h3e}re(Dx,"isWhitespace");function L0(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==eD||65536<=e&&e<=1114111}re(L0,"isPrintable");function b4(e){return L0(e)&&e!==eD&&e!==p3e&&e!==Px}re(b4,"isNsCharOrWhitespace");function v4(e,t,n){var r=b4(e),i=r&&!Dx(e);return(n?r:r&&e!==OJ&&e!==DJ&&e!==FJ&&e!==LJ&&e!==BJ)&&e!==g4&&!(t===jC&&!i)||b4(t)&&!Dx(t)&&e===g4||t===jC&&i}re(v4,"isPlainSafe");function VJ(e){return L0(e)&&e!==eD&&!Dx(e)&&e!==_3e&&e!==k3e&&e!==jC&&e!==OJ&&e!==DJ&&e!==FJ&&e!==LJ&&e!==BJ&&e!==g4&&e!==v3e&&e!==w3e&&e!==g3e&&e!==A3e&&e!==S3e&&e!==C3e&&e!==x3e&&e!==y3e&&e!==b3e&&e!==E3e&&e!==T3e}re(VJ,"isPlainSafeFirst");function HJ(e){return!Dx(e)&&e!==jC}re(HJ,"isPlainSafeLast");function Pg(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}re(Pg,"codePointAt");function tD(e){var t=/^\n* /;return t.test(e)}re(tD,"needIndentIndicator");var WJ=1,x4=2,GJ=3,KJ=4,Tg=5;function YJ(e,t,n,r,i,s,a,o){var l,c=0,u=null,d=!1,h=!1,m=r!==-1,y=-1,b=VJ(Pg(e,0))&&HJ(Pg(e,e.length-1));if(t||a)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=Pg(e,l),!L0(c))return Tg;b=b&&v4(c,u,o),u=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=Pg(e,l),c===Px)d=!0,m&&(h=h||l-y-1>r&&e[y+1]!==" ",y=l);else if(!L0(c))return Tg;b=b&&v4(c,u,o),u=c}h=h||m&&l-y-1>r&&e[y+1]!==" "}return!d&&!h?b&&!a&&!i(e)?WJ:s===Ox?Tg:x4:n>9&&tD(e)?Tg:a?s===Ox?Tg:x4:h?KJ:GJ}re(YJ,"chooseScalarStyle");function ZJ(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===Ox?'""':"''";if(!e.noCompatMode&&(R3e.indexOf(t)!==-1||I3e.test(t)))return e.quotingType===Ox?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,n),a=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),o=r||e.flowLevel>-1&&n>=e.flowLevel;function l(c){return qJ(e,c)}switch(re(l,"testAmbiguity"),YJ(t,o,e.indent,a,l,e.quotingType,e.forceQuotes&&!r,i)){case WJ:return t;case x4:return"'"+t.replace(/'/g,"''")+"'";case GJ:return"|"+w4(t,e.indent)+_4(y4(t,s));case KJ:return">"+w4(t,e.indent)+_4(y4(XJ(t,a),s));case Tg:return'"'+JJ(t)+'"';default:throw new go("impossible error: invalid scalar style")}}()}re(ZJ,"writeScalar");function w4(e,t){var n=tD(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),s=i?"+":r?"":"-";return n+s+`
`}re(w4,"blockHeader");function _4(e){return e[e.length-1]===`
`?e.slice(0,-1):e}re(_4,"dropEndingNewline");function XJ(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,n.lastIndex=c,S4(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",s,a;a=n.exec(e);){var o=a[1],l=a[2];s=l[0]===" ",r+=o+(!i&&!s&&l!==""?`
`:"")+S4(l,t),i=s}return r}re(XJ,"foldString");function S4(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,s,a=0,o=0,l="";r=n.exec(e);)o=r.index,o-i>t&&(s=a>i?a:o,l+=`
`+e.slice(i,s),i=s+1),a=o;return l+=`
`,e.length-i>t&&a>i?l+=e.slice(i,a)+`
`+e.slice(a+1):l+=e.slice(i),l.slice(1)}re(S4,"foldLine");function JJ(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=Pg(e,i),r=ja[n],!r&&L0(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||zJ(n);return t}re(JJ,"escapeString");function QJ(e,t,n){var r="",i=e.tag,s,a,o;for(s=0,a=n.length;s<a;s+=1)o=n[s],e.replacer&&(o=e.replacer.call(n,String(s),o)),(pu(e,t,o,!1,!1)||typeof o>"u"&&pu(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}re(QJ,"writeFlowSequence");function C4(e,t,n,r){var i="",s=e.tag,a,o,l;for(a=0,o=n.length;a<o;a+=1)l=n[a],e.replacer&&(l=e.replacer.call(n,String(a),l)),(pu(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&pu(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=PC(e,t)),e.dump&&Px===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}re(C4,"writeBlockSequence");function eQ(e,t,n){var r="",i=e.tag,s=Object.keys(n),a,o,l,c,u;for(a=0,o=s.length;a<o;a+=1)u="",r!==""&&(u+=", "),e.condenseFlow&&(u+='"'),l=s[a],c=n[l],e.replacer&&(c=e.replacer.call(n,l,c)),pu(e,t,l,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),pu(e,t,c,!1,!1)&&(u+=e.dump,r+=u));e.tag=i,e.dump="{"+r+"}"}re(eQ,"writeFlowMapping");function tQ(e,t,n,r){var i="",s=e.tag,a=Object.keys(n),o,l,c,u,d,h;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new go("sortKeys must be a boolean or a function");for(o=0,l=a.length;o<l;o+=1)h="",(!r||i!=="")&&(h+=PC(e,t)),c=a[o],u=n[c],e.replacer&&(u=e.replacer.call(n,c,u)),pu(e,t+1,c,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&Px===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,d&&(h+=PC(e,t)),pu(e,t+1,u,!0,d)&&(e.dump&&Px===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,i+=h));e.tag=s,e.dump=i||"{}"}re(tQ,"writeBlockMapping");function k4(e,t,n){var r,i,s,a,o,l;for(i=n?e.explicitTypes:e.implicitTypes,s=0,a=i.length;s<a;s+=1)if(o=i[s],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof t=="object"&&t instanceof o.instanceOf)&&(!o.predicate||o.predicate(t))){if(n?o.multi&&o.representName?e.tag=o.representName(t):e.tag=o.tag:e.tag="?",o.represent){if(l=e.styleMap[o.tag]||o.defaultStyle,jJ.call(o.represent)==="[object Function]")r=o.represent(t,l);else if(PJ.call(o.represent,l))r=o.represent[l](t,l);else throw new go("!<"+o.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}re(k4,"detectType");function pu(e,t,n,r,i,s,a){e.tag=null,e.dump=n,k4(e,n,!1)||k4(e,n,!0);var o=jJ.call(e.dump),l=r,c;r&&(r=e.flowLevel<0||e.flowLevel>t);var u=o==="[object Object]"||o==="[object Array]",d,h;if(u&&(d=e.duplicates.indexOf(n),h=d!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&t>0)&&(i=!1),h&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(u&&h&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),o==="[object Object]")r&&Object.keys(e.dump).length!==0?(tQ(e,t,e.dump,i),h&&(e.dump="&ref_"+d+e.dump)):(eQ(e,t,e.dump),h&&(e.dump="&ref_"+d+" "+e.dump));else if(o==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!a&&t>0?C4(e,t-1,e.dump,i):C4(e,t,e.dump,i),h&&(e.dump="&ref_"+d+e.dump)):(QJ(e,t,e.dump),h&&(e.dump="&ref_"+d+" "+e.dump));else if(o==="[object String]")e.tag!=="?"&&ZJ(e,e.dump,t,s,l);else{if(o==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new go("unacceptable kind of an object to dump "+o)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}re(pu,"writeNode");function nQ(e,t){var n=[],r=[],i,s;for(OC(e,n,r),i=0,s=r.length;i<s;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(s)}re(nQ,"getDuplicateReferences");function OC(e,t,n){var r,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)OC(e[i],t,n);else for(r=Object.keys(e),i=0,s=r.length;i<s;i+=1)OC(e[r[i]],t,n)}re(OC,"inspectNode");function M3e(e,t){t=t||{};var n=new UJ(t);n.noRefs||nQ(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),pu(n,0,r,!0,!0)?n.dump+`
`:""}re(M3e,"dump$1");function j3e(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}re(j3e,"renamed");var P3e=GX,O3e=f3e.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var pl={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function bv(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=$i(e),t=$i(t);const[n,r]=[e.x,e.y],[i,s]=[t.x,t.y],a=i-n,o=s-r;return{angle:Math.atan(o/a),deltaX:a,deltaY:o}}re(bv,"calculateDeltaAndAngle");var $i=re(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),D3e=re(e=>({x:re(function(t,n,r){let i=0;const s=$i(r[0]).x<$i(r[r.length-1]).x?"left":"right";if(n===0&&Object.hasOwn(pl,e.arrowTypeStart)){const{angle:m,deltaX:y}=bv(r[0],r[1]);i=pl[e.arrowTypeStart]*Math.cos(m)*(y>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(pl,e.arrowTypeEnd)){const{angle:m,deltaX:y}=bv(r[r.length-1],r[r.length-2]);i=pl[e.arrowTypeEnd]*Math.cos(m)*(y>=0?1:-1)}const a=Math.abs($i(t).x-$i(r[r.length-1]).x),o=Math.abs($i(t).y-$i(r[r.length-1]).y),l=Math.abs($i(t).x-$i(r[0]).x),c=Math.abs($i(t).y-$i(r[0]).y),u=pl[e.arrowTypeStart],d=pl[e.arrowTypeEnd],h=1;if(a<d&&a>0&&o<d){let m=d+h-a;m*=s==="right"?-1:1,i-=m}if(l<u&&l>0&&c<u){let m=u+h-l;m*=s==="right"?-1:1,i+=m}return $i(t).x+i},"x"),y:re(function(t,n,r){let i=0;const s=$i(r[0]).y<$i(r[r.length-1]).y?"down":"up";if(n===0&&Object.hasOwn(pl,e.arrowTypeStart)){const{angle:m,deltaY:y}=bv(r[0],r[1]);i=pl[e.arrowTypeStart]*Math.abs(Math.sin(m))*(y>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(pl,e.arrowTypeEnd)){const{angle:m,deltaY:y}=bv(r[r.length-1],r[r.length-2]);i=pl[e.arrowTypeEnd]*Math.abs(Math.sin(m))*(y>=0?1:-1)}const a=Math.abs($i(t).y-$i(r[r.length-1]).y),o=Math.abs($i(t).x-$i(r[r.length-1]).x),l=Math.abs($i(t).y-$i(r[0]).y),c=Math.abs($i(t).x-$i(r[0]).x),u=pl[e.arrowTypeStart],d=pl[e.arrowTypeEnd],h=1;if(a<d&&a>0&&o<d){let m=d+h-a;m*=s==="up"?-1:1,i-=m}if(l<u&&l>0&&c<u){let m=u+h-l;m*=s==="up"?-1:1,i+=m}return $i(t).y+i},"y")}),"getLineFunctionsWithOffset"),nD=re(({flowchart:e})=>{var i,s;const t=((i=e==null?void 0:e.subGraphTitleMargin)==null?void 0:i.top)??0,n=((s=e==null?void 0:e.subGraphTitleMargin)==null?void 0:s.bottom)??0,r=t+n;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:n,subGraphTitleTotalMargin:r}},"getSubGraphTitleMargins");const F3e=Object.freeze({left:0,top:0,width:16,height:16}),DC=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),rQ=Object.freeze({...F3e,...DC}),L3e=Object.freeze({...rQ,body:"",hidden:!1}),B3e=Object.freeze({width:null,height:null}),$3e=Object.freeze({...B3e,...DC}),z3e=(e,t,n,r="")=>{const i=e.split(":");if(e.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const o=i.pop(),l=i.pop(),c={provider:i.length>0?i[0]:r,prefix:l,name:o};return KN(c)?c:null}const s=i[0],a=s.split("-");if(a.length>1){const o={provider:r,prefix:a.shift(),name:a.join("-")};return KN(o)?o:null}if(n&&r===""){const o={provider:r,prefix:"",name:s};return KN(o,n)?o:null}return null},KN=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function U3e(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const r=((e.rotate||0)+(t.rotate||0))%4;return r&&(n.rotate=r),n}function Bz(e,t){const n=U3e(e,t);for(const r in L3e)r in DC?r in e&&!(r in n)&&(n[r]=DC[r]):r in t?n[r]=t[r]:r in e&&(n[r]=e[r]);return n}function q3e(e,t){const n=e.icons,r=e.aliases||Object.create(null),i=Object.create(null);function s(a){if(n[a])return i[a]=[];if(!(a in i)){i[a]=null;const o=r[a]&&r[a].parent,l=o&&s(o);l&&(i[a]=[o].concat(l))}return i[a]}return(t||Object.keys(n).concat(Object.keys(r))).forEach(s),i}function $z(e,t,n){const r=e.icons,i=e.aliases||Object.create(null);let s={};function a(o){s=Bz(r[o]||i[o],s)}return a(t),n.forEach(a),Bz(e,s)}function V3e(e,t){if(e.icons[t])return $z(e,t,[]);const n=q3e(e,[t])[t];return n?$z(e,t,n):null}const H3e=/(-?[0-9.]*[0-9]+[0-9.]*)/g,W3e=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function zz(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const r=e.split(H3e);if(r===null||!r.length)return e;const i=[];let s=r.shift(),a=W3e.test(s);for(;;){if(a){const o=parseFloat(s);isNaN(o)?i.push(s):i.push(Math.ceil(o*t*n)/n)}else i.push(s);if(s=r.shift(),s===void 0)return i.join("");a=!a}}function G3e(e,t="defs"){let n="";const r=e.indexOf("<"+t);for(;r>=0;){const i=e.indexOf(">",r),s=e.indexOf("</"+t);if(i===-1||s===-1)break;const a=e.indexOf(">",s);if(a===-1)break;n+=e.slice(i+1,s).trim(),e=e.slice(0,r).trim()+e.slice(a+1)}return{defs:n,content:e}}function K3e(e,t){return e?"<defs>"+e+"</defs>"+t:t}function Y3e(e,t,n){const r=G3e(e);return K3e(r.defs,t+r.content+n)}const Z3e=e=>e==="unset"||e==="undefined"||e==="none";function X3e(e,t){const n={...rQ,...e},r={...$3e,...t},i={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,r].forEach(b=>{const v=[],x=b.hFlip,_=b.vFlip;let S=b.rotate;x?_?S+=2:(v.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),v.push("scale(-1 1)"),i.top=i.left=0):_&&(v.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),v.push("scale(1 -1)"),i.top=i.left=0);let C;switch(S<0&&(S-=Math.floor(S/4)*4),S=S%4,S){case 1:C=i.height/2+i.top,v.unshift("rotate(90 "+C.toString()+" "+C.toString()+")");break;case 2:v.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:C=i.width/2+i.left,v.unshift("rotate(-90 "+C.toString()+" "+C.toString()+")");break}S%2===1&&(i.left!==i.top&&(C=i.left,i.left=i.top,i.top=C),i.width!==i.height&&(C=i.width,i.width=i.height,i.height=C)),v.length&&(s=Y3e(s,'<g transform="'+v.join(" ")+'">',"</g>"))});const a=r.width,o=r.height,l=i.width,c=i.height;let u,d;a===null?(d=o===null?"1em":o==="auto"?c:o,u=zz(d,l/c)):(u=a==="auto"?l:a,d=o===null?zz(u,c/l):o==="auto"?c:o);const h={},m=(b,v)=>{Z3e(v)||(h[b]=v.toString())};m("width",u),m("height",d);const y=[i.left,i.top,l,c];return h.viewBox=y.join(" "),{attributes:h,viewBox:y,body:s}}const J3e=/\sid="(\S+)"/g,Q3e="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let e4e=0;function t4e(e,t=Q3e){const n=[];let r;for(;r=J3e.exec(e);)n.push(r[1]);if(!n.length)return e;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const a=typeof t=="function"?t(s):t+(e4e++).toString(),o=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+a+i+"$3")}),e=e.replace(new RegExp(i,"g"),""),e}function n4e(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in t)n+=" "+r+'="'+t[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}var r4e={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},E4=new Map,iQ=new Map,i4e=re(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if($t.debug("Registering icon pack:",t.name),"loader"in t)iQ.set(t.name,t.loader);else if("icons"in t)E4.set(t.name,t.icons);else throw $t.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),s4e=re(async(e,t)=>{const n=z3e(e,!0,t!==void 0);if(!n)throw new Error(`Invalid icon name: ${e}`);const r=n.prefix||t;if(!r)throw new Error(`Icon name must contain a prefix: ${e}`);let i=E4.get(r);if(!i){const a=iQ.get(r);if(!a)throw new Error(`Icon set not found: ${n.prefix}`);try{i={...await a(),prefix:r},E4.set(r,i)}catch(o){throw $t.error(o),new Error(`Failed to load icon set: ${n.prefix}`)}}const s=V3e(i,n.name);if(!s)throw new Error(`Icon not found: ${e}`);return s},"getRegisteredIconData"),$E=re(async(e,t)=>{let n;try{n=await s4e(e,t==null?void 0:t.fallbackPrefix)}catch(s){$t.error(s),n=r4e}const r=X3e(n,t);return n4e(t4e(r.body),r.attributes)},"getIconSVG"),iv={},Rs={},Uz;function a4e(){return Uz||(Uz=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.BLANK_URL=Rs.relativeFirstCharacters=Rs.whitespaceEscapeCharsRegex=Rs.urlSchemeRegex=Rs.ctrlCharactersRegex=Rs.htmlCtrlEntityRegex=Rs.htmlEntitiesRegex=Rs.invalidProtocolRegex=void 0,Rs.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Rs.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Rs.htmlCtrlEntityRegex=/&(newline|tab);/gi,Rs.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Rs.urlSchemeRegex=/^.+(:|&colon;)/gim,Rs.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Rs.relativeFirstCharacters=[".","/"],Rs.BLANK_URL="about:blank"),Rs}var qz;function o4e(){if(qz)return iv;qz=1,Object.defineProperty(iv,"__esModule",{value:!0}),iv.sanitizeUrl=void 0;var e=a4e();function t(a){return e.relativeFirstCharacters.indexOf(a[0])>-1}function n(a){var o=a.replace(e.ctrlCharactersRegex,"");return o.replace(e.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function r(a){return URL.canParse(a)}function i(a){try{return decodeURIComponent(a)}catch{return a}}function s(a){if(!a)return e.BLANK_URL;var o,l=i(a.trim());do l=n(l).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),l=i(l),o=l.match(e.ctrlCharactersRegex)||l.match(e.htmlEntitiesRegex)||l.match(e.htmlCtrlEntityRegex)||l.match(e.whitespaceEscapeCharsRegex);while(o&&o.length>0);var c=l;if(!c)return e.BLANK_URL;if(t(c))return c;var u=c.trimStart(),d=u.match(e.urlSchemeRegex);if(!d)return c;var h=d[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(h))return e.BLANK_URL;var m=u.replace(/\\/g,"/");if(h==="mailto:"||h.includes("://"))return m;if(h==="http:"||h==="https:"){if(!r(m))return e.BLANK_URL;var y=new URL(m);return y.protocol=y.protocol.toLowerCase(),y.hostname=y.hostname.toLowerCase(),y.toString()}return m}return iv.sanitizeUrl=s,iv}var l4e=o4e(),c4e={value:()=>{}};function sQ(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new e2(n)}function e2(e){this._=e}function u4e(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}e2.prototype=sQ.prototype={constructor:e2,on:function(e,t){var n=this._,r=u4e(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=d4e(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=Vz(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Vz(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new e2(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function d4e(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Vz(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=c4e,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var T4="http://www.w3.org/1999/xhtml";const Hz={svg:"http://www.w3.org/2000/svg",xhtml:T4,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zE(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Hz.hasOwnProperty(t)?{space:Hz[t],local:e}:e}function f4e(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===T4&&t.documentElement.namespaceURI===T4?t.createElement(e):t.createElementNS(n,e)}}function h4e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function aQ(e){var t=zE(e);return(t.local?h4e:f4e)(t)}function p4e(){}function rD(e){return e==null?p4e:function(){return this.querySelector(e)}}function m4e(e){typeof e!="function"&&(e=rD(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new Jo(r,this._parents)}function g4e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function y4e(){return[]}function oQ(e){return e==null?y4e:function(){return this.querySelectorAll(e)}}function b4e(e){return function(){return g4e(e.apply(this,arguments))}}function v4e(e){typeof e=="function"?e=b4e(e):e=oQ(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(e.call(l,l.__data__,c,a)),i.push(l));return new Jo(r,i)}function lQ(e){return function(){return this.matches(e)}}function cQ(e){return function(t){return t.matches(e)}}var x4e=Array.prototype.find;function w4e(e){return function(){return x4e.call(this.children,e)}}function _4e(){return this.firstElementChild}function S4e(e){return this.select(e==null?_4e:w4e(typeof e=="function"?e:cQ(e)))}var C4e=Array.prototype.filter;function k4e(){return Array.from(this.children)}function E4e(e){return function(){return C4e.call(this.children,e)}}function T4e(e){return this.selectAll(e==null?k4e:E4e(typeof e=="function"?e:cQ(e)))}function A4e(e){typeof e!="function"&&(e=lQ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new Jo(r,this._parents)}function uQ(e){return new Array(e.length)}function R4e(){return new Jo(this._enter||this._groups.map(uQ),this._parents)}function FC(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}FC.prototype={constructor:FC,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function I4e(e){return function(){return e}}function N4e(e,t,n,r,i,s){for(var a=0,o,l=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new FC(e,s[a]);for(;a<l;++a)(o=t[a])&&(i[a]=o)}function M4e(e,t,n,r,i,s,a){var o,l,c=new Map,u=t.length,d=s.length,h=new Array(u),m;for(o=0;o<u;++o)(l=t[o])&&(h[o]=m=a.call(l,l.__data__,o,t)+"",c.has(m)?i[o]=l:c.set(m,l));for(o=0;o<d;++o)m=a.call(e,s[o],o,s)+"",(l=c.get(m))?(r[o]=l,l.__data__=s[o],c.delete(m)):n[o]=new FC(e,s[o]);for(o=0;o<u;++o)(l=t[o])&&c.get(h[o])===l&&(i[o]=l)}function j4e(e){return e.__data__}function P4e(e,t){if(!arguments.length)return Array.from(this,j4e);var n=t?M4e:N4e,r=this._parents,i=this._groups;typeof e!="function"&&(e=I4e(e));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],d=i[c],h=d.length,m=O4e(e.call(u,u&&u.__data__,c,r)),y=m.length,b=o[c]=new Array(y),v=a[c]=new Array(y),x=l[c]=new Array(h);n(u,d,b,v,x,m,t);for(var _=0,S=0,C,E;_<y;++_)if(C=b[_]){for(_>=S&&(S=_+1);!(E=v[S])&&++S<y;);C._next=E||null}}return a=new Jo(a,r),a._enter=o,a._exit=l,a}function O4e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function D4e(){return new Jo(this._exit||this._groups.map(uQ),this._parents)}function F4e(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function L4e(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],d=c.length,h=o[l]=new Array(d),m,y=0;y<d;++y)(m=c[y]||u[y])&&(h[y]=m);for(;l<i;++l)o[l]=n[l];return new Jo(o,this._parents)}function B4e(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function $4e(e){e||(e=z4e);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(t)}return new Jo(i,this._parents).order()}function z4e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function U4e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function q4e(){return Array.from(this)}function V4e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function H4e(){let e=0;for(const t of this)++e;return e}function W4e(){return!this.node()}function G4e(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function K4e(e){return function(){this.removeAttribute(e)}}function Y4e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Z4e(e,t){return function(){this.setAttribute(e,t)}}function X4e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function J4e(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Q4e(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function eje(e,t){var n=zE(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Y4e:K4e:typeof t=="function"?n.local?Q4e:J4e:n.local?X4e:Z4e)(n,t))}function dQ(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function tje(e){return function(){this.style.removeProperty(e)}}function nje(e,t,n){return function(){this.style.setProperty(e,t,n)}}function rje(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ije(e,t,n){return arguments.length>1?this.each((t==null?tje:typeof t=="function"?rje:nje)(e,t,n??"")):B0(this.node(),e)}function B0(e,t){return e.style.getPropertyValue(t)||dQ(e).getComputedStyle(e,null).getPropertyValue(t)}function sje(e){return function(){delete this[e]}}function aje(e,t){return function(){this[e]=t}}function oje(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function lje(e,t){return arguments.length>1?this.each((t==null?sje:typeof t=="function"?oje:aje)(e,t)):this.node()[e]}function fQ(e){return e.trim().split(/^|\s+/)}function iD(e){return e.classList||new hQ(e)}function hQ(e){this._node=e,this._names=fQ(e.getAttribute("class")||"")}hQ.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function pQ(e,t){for(var n=iD(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function mQ(e,t){for(var n=iD(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function cje(e){return function(){pQ(this,e)}}function uje(e){return function(){mQ(this,e)}}function dje(e,t){return function(){(t.apply(this,arguments)?pQ:mQ)(this,e)}}function fje(e,t){var n=fQ(e+"");if(arguments.length<2){for(var r=iD(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?dje:t?cje:uje)(n,t))}function hje(){this.textContent=""}function pje(e){return function(){this.textContent=e}}function mje(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function gje(e){return arguments.length?this.each(e==null?hje:(typeof e=="function"?mje:pje)(e)):this.node().textContent}function yje(){this.innerHTML=""}function bje(e){return function(){this.innerHTML=e}}function vje(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xje(e){return arguments.length?this.each(e==null?yje:(typeof e=="function"?vje:bje)(e)):this.node().innerHTML}function wje(){this.nextSibling&&this.parentNode.appendChild(this)}function _je(){return this.each(wje)}function Sje(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cje(){return this.each(Sje)}function kje(e){var t=typeof e=="function"?e:aQ(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Eje(){return null}function Tje(e,t){var n=typeof e=="function"?e:aQ(e),r=t==null?Eje:typeof t=="function"?t:rD(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Aje(){var e=this.parentNode;e&&e.removeChild(this)}function Rje(){return this.each(Aje)}function Ije(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nje(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mje(e){return this.select(e?Nje:Ije)}function jje(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Pje(e){return function(t){e.call(this,t,this.__data__)}}function Oje(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Dje(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Fje(e,t,n){return function(){var r=this.__on,i,s=Pje(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Lje(e,t,n){var r=Oje(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=t?Fje:Dje,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function gQ(e,t,n){var r=dQ(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Bje(e,t){return function(){return gQ(this,e,t)}}function $je(e,t){return function(){return gQ(this,e,t.apply(this,arguments))}}function zje(e,t){return this.each((typeof t=="function"?$je:Bje)(e,t))}function*Uje(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var yQ=[null];function Jo(e,t){this._groups=e,this._parents=t}function i1(){return new Jo([[document.documentElement]],yQ)}function qje(){return this}Jo.prototype=i1.prototype={constructor:Jo,select:m4e,selectAll:v4e,selectChild:S4e,selectChildren:T4e,filter:A4e,data:P4e,enter:R4e,exit:D4e,join:F4e,merge:L4e,selection:qje,order:B4e,sort:$4e,call:U4e,nodes:q4e,node:V4e,size:H4e,empty:W4e,each:G4e,attr:eje,style:ije,property:lje,classed:fje,text:gje,html:xje,raise:_je,lower:Cje,append:kje,insert:Tje,remove:Rje,clone:Mje,datum:jje,on:Lje,dispatch:zje,[Symbol.iterator]:Uje};function qr(e){return typeof e=="string"?new Jo([[document.querySelector(e)]],[document.documentElement]):new Jo([[e]],yQ)}function sD(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bQ(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function s1(){}var Fx=.7,LC=1/Fx,Yg="\\s*([+-]?\\d+)\\s*",Lx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vje=/^#([0-9a-f]{3,8})$/,Hje=new RegExp(`^rgb\\(${Yg},${Yg},${Yg}\\)$`),Wje=new RegExp(`^rgb\\(${nu},${nu},${nu}\\)$`),Gje=new RegExp(`^rgba\\(${Yg},${Yg},${Yg},${Lx}\\)$`),Kje=new RegExp(`^rgba\\(${nu},${nu},${nu},${Lx}\\)$`),Yje=new RegExp(`^hsl\\(${Lx},${nu},${nu}\\)$`),Zje=new RegExp(`^hsla\\(${Lx},${nu},${nu},${Lx}\\)$`),Wz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sD(s1,Bx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gz,formatHex:Gz,formatHex8:Xje,formatHsl:Jje,formatRgb:Kz,toString:Kz});function Gz(){return this.rgb().formatHex()}function Xje(){return this.rgb().formatHex8()}function Jje(){return vQ(this).formatHsl()}function Kz(){return this.rgb().formatRgb()}function Bx(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vje.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yz(t):n===3?new yo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?oS(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?oS(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Hje.exec(e))?new yo(t[1],t[2],t[3],1):(t=Wje.exec(e))?new yo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Gje.exec(e))?oS(t[1],t[2],t[3],t[4]):(t=Kje.exec(e))?oS(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Yje.exec(e))?Jz(t[1],t[2]/100,t[3]/100,1):(t=Zje.exec(e))?Jz(t[1],t[2]/100,t[3]/100,t[4]):Wz.hasOwnProperty(e)?Yz(Wz[e]):e==="transparent"?new yo(NaN,NaN,NaN,0):null}function Yz(e){return new yo(e>>16&255,e>>8&255,e&255,1)}function oS(e,t,n,r){return r<=0&&(e=t=n=NaN),new yo(e,t,n,r)}function Qje(e){return e instanceof s1||(e=Bx(e)),e?(e=e.rgb(),new yo(e.r,e.g,e.b,e.opacity)):new yo}function A4(e,t,n,r){return arguments.length===1?Qje(e):new yo(e,t,n,r??1)}function yo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}sD(yo,A4,bQ(s1,{brighter(e){return e=e==null?LC:Math.pow(LC,e),new yo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fx:Math.pow(Fx,e),new yo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yo(Tp(this.r),Tp(this.g),Tp(this.b),BC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zz,formatHex:Zz,formatHex8:ePe,formatRgb:Xz,toString:Xz}));function Zz(){return`#${wp(this.r)}${wp(this.g)}${wp(this.b)}`}function ePe(){return`#${wp(this.r)}${wp(this.g)}${wp(this.b)}${wp((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xz(){const e=BC(this.opacity);return`${e===1?"rgb(":"rgba("}${Tp(this.r)}, ${Tp(this.g)}, ${Tp(this.b)}${e===1?")":`, ${e})`}`}function BC(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wp(e){return e=Tp(e),(e<16?"0":"")+e.toString(16)}function Jz(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ql(e,t,n,r)}function vQ(e){if(e instanceof Ql)return new Ql(e.h,e.s,e.l,e.opacity);if(e instanceof s1||(e=Bx(e)),!e)return new Ql;if(e instanceof Ql)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Ql(a,o,l,e.opacity)}function tPe(e,t,n,r){return arguments.length===1?vQ(e):new Ql(e,t,n,r??1)}function Ql(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}sD(Ql,tPe,bQ(s1,{brighter(e){return e=e==null?LC:Math.pow(LC,e),new Ql(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fx:Math.pow(Fx,e),new Ql(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yo(YN(e>=240?e-240:e+120,i,r),YN(e,i,r),YN(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ql(Qz(this.h),lS(this.s),lS(this.l),BC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=BC(this.opacity);return`${e===1?"hsl(":"hsla("}${Qz(this.h)}, ${lS(this.s)*100}%, ${lS(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qz(e){return e=(e||0)%360,e<0?e+360:e}function lS(e){return Math.max(0,Math.min(1,e||0))}function YN(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const aD=e=>()=>e;function xQ(e,t){return function(n){return e+n*t}}function nPe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function zot(e,t){var n=t-e;return n?xQ(e,n>180||n<-180?n-360*Math.round(n/360):n):aD(isNaN(e)?t:e)}function rPe(e){return(e=+e)==1?wQ:function(t,n){return n-t?nPe(t,n,e):aD(isNaN(t)?n:t)}}function wQ(e,t){var n=t-e;return n?xQ(e,n):aD(isNaN(e)?t:e)}const e7=function e(t){var n=rPe(t);function r(i,s){var a=n((i=A4(i)).r,(s=A4(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=wQ(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function Mf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var R4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ZN=new RegExp(R4.source,"g");function iPe(e){return function(){return e}}function sPe(e){return function(t){return e(t)+""}}function aPe(e,t){var n=R4.lastIndex=ZN.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(r=R4.exec(e))&&(i=ZN.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Mf(r,i)})),n=ZN.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?sPe(l[0].x):iPe(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)o[(d=l[u]).i]=d.x(c);return o.join("")})}var t7=180/Math.PI,I4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _Q(e,t,n,r,i,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*t7,skewX:Math.atan(l)*t7,scaleX:a,scaleY:o}}var cS;function oPe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?I4:_Q(t.a,t.b,t.c,t.d,t.e,t.f)}function lPe(e){return e==null||(cS||(cS=document.createElementNS("http://www.w3.org/2000/svg","g")),cS.setAttribute("transform",e),!(e=cS.transform.baseVal.consolidate()))?I4:(e=e.matrix,_Q(e.a,e.b,e.c,e.d,e.e,e.f))}function SQ(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,d,h,m,y){if(c!==d||u!==h){var b=m.push("translate(",null,t,null,n);y.push({i:b-4,x:Mf(c,d)},{i:b-2,x:Mf(u,h)})}else(d||h)&&m.push("translate("+d+t+h+n)}function a(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Mf(c,u)})):u&&d.push(i(d)+"rotate("+u+r)}function o(c,u,d,h){c!==u?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Mf(c,u)}):u&&d.push(i(d)+"skewX("+u+r)}function l(c,u,d,h,m,y){if(c!==d||u!==h){var b=m.push(i(m)+"scale(",null,",",null,")");y.push({i:b-4,x:Mf(c,d)},{i:b-2,x:Mf(u,h)})}else(d!==1||h!==1)&&m.push(i(m)+"scale("+d+","+h+")")}return function(c,u){var d=[],h=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,d,h),a(c.rotate,u.rotate,d,h),o(c.skewX,u.skewX,d,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(m){for(var y=-1,b=h.length,v;++y<b;)d[(v=h[y]).i]=v.x(m);return d.join("")}}}var cPe=SQ(oPe,"px, ","px)","deg)"),uPe=SQ(lPe,", ",")",")"),$0=0,vv=0,sv=0,CQ=1e3,$C,xv,zC=0,Wp=0,UE=0,$x=typeof performance=="object"&&performance.now?performance:Date,kQ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function oD(){return Wp||(kQ(dPe),Wp=$x.now()+UE)}function dPe(){Wp=0}function UC(){this._call=this._time=this._next=null}UC.prototype=EQ.prototype={constructor:UC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?oD():+n)+(t==null?0:+t),!this._next&&xv!==this&&(xv?xv._next=this:$C=this,xv=this),this._call=e,this._time=n,N4()},stop:function(){this._call&&(this._call=null,this._time=1/0,N4())}};function EQ(e,t,n){var r=new UC;return r.restart(e,t,n),r}function fPe(){oD(),++$0;for(var e=$C,t;e;)(t=Wp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$0}function n7(){Wp=(zC=$x.now())+UE,$0=vv=0;try{fPe()}finally{$0=0,pPe(),Wp=0}}function hPe(){var e=$x.now(),t=e-zC;t>CQ&&(UE-=t,zC=e)}function pPe(){for(var e,t=$C,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:$C=n);xv=e,N4(r)}function N4(e){if(!$0){vv&&(vv=clearTimeout(vv));var t=e-Wp;t>24?(e<1/0&&(vv=setTimeout(n7,e-$x.now()-UE)),sv&&(sv=clearInterval(sv))):(sv||(zC=$x.now(),sv=setInterval(hPe,CQ)),$0=1,kQ(n7))}}function r7(e,t,n){var r=new UC;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var mPe=sQ("start","end","cancel","interrupt"),gPe=[],TQ=0,i7=1,M4=2,t2=3,s7=4,j4=5,n2=6;function qE(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;yPe(e,n,{name:t,index:r,group:i,on:mPe,tween:gPe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:TQ})}function lD(e,t){var n=vc(e,t);if(n.state>TQ)throw new Error("too late; already scheduled");return n}function wu(e,t){var n=vc(e,t);if(n.state>t2)throw new Error("too late; already running");return n}function vc(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function yPe(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=EQ(s,0,n.time);function s(c){n.state=i7,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,d,h,m;if(n.state!==i7)return l();for(u in r)if(m=r[u],m.name===n.name){if(m.state===t2)return r7(a);m.state===s7?(m.state=n2,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[u]):+u<t&&(m.state=n2,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[u])}if(r7(function(){n.state===t2&&(n.state=s7,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=M4,n.on.call("start",e,e.__data__,n.index,n.group),n.state===M4){for(n.state=t2,i=new Array(h=n.tween.length),u=0,d=-1;u<h;++u)(m=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=m);i.length=d+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=j4,1),d=-1,h=i.length;++d<h;)i[d].call(e,u);n.state===j4&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=n2,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function bPe(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>M4&&r.state<j4,r.state=n2,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function vPe(e){return this.each(function(){bPe(this,e)})}function xPe(e,t){var n,r;return function(){var i=wu(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function wPe(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=wu(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function _Pe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=vc(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?xPe:wPe)(n,e,t))}function cD(e,t,n){var r=e._id;return e.each(function(){var i=wu(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return vc(i,r).value[t]}}function AQ(e,t){var n;return(typeof t=="number"?Mf:t instanceof Bx?e7:(n=Bx(t))?(t=n,e7):aPe)(e,t)}function SPe(e){return function(){this.removeAttribute(e)}}function CPe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kPe(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function EPe(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function TPe(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function APe(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function RPe(e,t){var n=zE(e),r=n==="transform"?uPe:AQ;return this.attrTween(e,typeof t=="function"?(n.local?APe:TPe)(n,r,cD(this,"attr."+e,t)):t==null?(n.local?CPe:SPe)(n):(n.local?EPe:kPe)(n,r,t))}function IPe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function NPe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function MPe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&NPe(e,s)),n}return i._value=t,i}function jPe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&IPe(e,s)),n}return i._value=t,i}function PPe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=zE(e);return this.tween(n,(r.local?MPe:jPe)(r,t))}function OPe(e,t){return function(){lD(this,e).delay=+t.apply(this,arguments)}}function DPe(e,t){return t=+t,function(){lD(this,e).delay=t}}function FPe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?OPe:DPe)(t,e)):vc(this.node(),t).delay}function LPe(e,t){return function(){wu(this,e).duration=+t.apply(this,arguments)}}function BPe(e,t){return t=+t,function(){wu(this,e).duration=t}}function $Pe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?LPe:BPe)(t,e)):vc(this.node(),t).duration}function zPe(e,t){if(typeof t!="function")throw new Error;return function(){wu(this,e).ease=t}}function UPe(e){var t=this._id;return arguments.length?this.each(zPe(t,e)):vc(this.node(),t).ease}function qPe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;wu(this,e).ease=n}}function VPe(e){if(typeof e!="function")throw new Error;return this.each(qPe(this._id,e))}function HPe(e){typeof e!="function"&&(e=lQ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new Cd(r,this._parents,this._name,this._id)}function WPe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=t[o],c=n[o],u=l.length,d=a[o]=new Array(u),h,m=0;m<u;++m)(h=l[m]||c[m])&&(d[m]=h);for(;o<r;++o)a[o]=t[o];return new Cd(a,this._parents,this._name,this._id)}function GPe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function KPe(e,t,n){var r,i,s=GPe(t)?lD:wu;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function YPe(e,t){var n=this._id;return arguments.length<2?vc(this.node(),n).on.on(e):this.each(KPe(n,e,t))}function ZPe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function XPe(){return this.on("end.remove",ZPe(this._id))}function JPe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rD(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),u,d,h=0;h<l;++h)(u=o[h])&&(d=e.call(u,u.__data__,h,o))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,qE(c[h],t,n,h,c,vc(u,n)));return new Cd(s,this._parents,t,n)}function QPe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=oQ(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var h=e.call(u,u.__data__,d,l),m,y=vc(u,n),b=0,v=h.length;b<v;++b)(m=h[b])&&qE(m,t,n,b,h,y);s.push(h),a.push(u)}return new Cd(s,a,t,n)}var eOe=i1.prototype.constructor;function tOe(){return new eOe(this._groups,this._parents)}function nOe(e,t){var n,r,i;return function(){var s=B0(this,e),a=(this.style.removeProperty(e),B0(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function RQ(e){return function(){this.style.removeProperty(e)}}function rOe(e,t,n){var r,i=n+"",s;return function(){var a=B0(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function iOe(e,t,n){var r,i,s;return function(){var a=B0(this,e),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),B0(this,e))),a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o))}}function sOe(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var l=wu(this,e),c=l.on,u=l.value[s]==null?o||(o=RQ(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function aOe(e,t,n){var r=(e+="")=="transform"?cPe:AQ;return t==null?this.styleTween(e,nOe(e,r)).on("end.style."+e,RQ(e)):typeof t=="function"?this.styleTween(e,iOe(e,r,cD(this,"style."+e,t))).each(sOe(this._id,e)):this.styleTween(e,rOe(e,r,t),n).on("end.style."+e,null)}function oOe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function lOe(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&oOe(e,a,n)),r}return s._value=t,s}function cOe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,lOe(e,t,n??""))}function uOe(e){return function(){this.textContent=e}}function dOe(e){return function(){var t=e(this);this.textContent=t??""}}function fOe(e){return this.tween("text",typeof e=="function"?dOe(cD(this,"text",e)):uOe(e==null?"":e+""))}function hOe(e){return function(t){this.textContent=e.call(this,t)}}function pOe(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&hOe(i)),t}return r._value=e,r}function mOe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,pOe(e))}function gOe(){for(var e=this._name,t=this._id,n=IQ(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=vc(l,t);qE(l,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Cd(r,this._parents,e,n)}function yOe(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=wu(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),c.on=t}),i===0&&s()})}var bOe=0;function Cd(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function IQ(){return++bOe}var Zu=i1.prototype;Cd.prototype={constructor:Cd,select:JPe,selectAll:QPe,selectChild:Zu.selectChild,selectChildren:Zu.selectChildren,filter:HPe,merge:WPe,selection:tOe,transition:gOe,call:Zu.call,nodes:Zu.nodes,node:Zu.node,size:Zu.size,empty:Zu.empty,each:Zu.each,on:YPe,attr:RPe,attrTween:PPe,style:aOe,styleTween:cOe,text:fOe,textTween:mOe,remove:XPe,tween:_Pe,delay:FPe,duration:$Pe,ease:UPe,easeVarying:VPe,end:yOe,[Symbol.iterator]:Zu[Symbol.iterator]};function vOe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var xOe={time:null,delay:0,duration:250,ease:vOe};function wOe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function _Oe(e){var t,n;e instanceof Cd?(t=e._id,e=e._name):(t=IQ(),(n=xOe).time=oD(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&qE(l,e,t,c,a,n||wOe(l,t));return new Cd(r,this._parents,e,t)}i1.prototype.interrupt=vPe;i1.prototype.transition=_Oe;const P4=Math.PI,O4=2*P4,lp=1e-6,SOe=O4-lp;function NQ(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function COe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return NQ;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class kOe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?NQ:COe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-t,c=i-n,u=a-t,d=o-n,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>lp)if(!(Math.abs(d*l-c*u)>lp)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-a,y=i-o,b=l*l+c*c,v=m*m+y*y,x=Math.sqrt(b),_=Math.sqrt(h),S=s*Math.tan((P4-Math.acos((b+h-v)/(2*x*_)))/2),C=S/_,E=S/x;Math.abs(C-1)>lp&&this._append`L${t+C*u},${n+C*d}`,this._append`A${s},${s},0,0,${+(d*m>u*y)},${this._x1=t+E*l},${this._y1=n+E*c}`}}arc(t,n,r,i,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=t+o,u=n+l,d=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>lp||Math.abs(this._y1-u)>lp)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%O4+O4),h>SOe?this._append`A${r},${r},0,1,${d},${t-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>lp&&this._append`A${r},${r},0,${+(h>=P4)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function bg(e){return function(){return e}}const Uot=Math.abs,qot=Math.atan2,Vot=Math.cos,Hot=Math.max,Wot=Math.min,Got=Math.sin,Kot=Math.sqrt,a7=1e-12,uD=Math.PI,o7=uD/2,Yot=2*uD;function Zot(e){return e>1?0:e<-1?uD:Math.acos(e)}function Xot(e){return e>=1?o7:e<=-1?-o7:Math.asin(e)}function EOe(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new kOe(t)}function TOe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function MQ(e){this._context=e}MQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qC(e){return new MQ(e)}function AOe(e){return e[0]}function ROe(e){return e[1]}function IOe(e,t){var n=bg(!0),r=null,i=qC,s=null,a=EOe(o);e=typeof e=="function"?e:e===void 0?AOe:bg(e),t=typeof t=="function"?t:t===void 0?ROe:bg(t);function o(l){var c,u=(l=TOe(l)).length,d,h=!1,m;for(r==null&&(s=i(m=a())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(d,c,l),+t(d,c,l));if(m)return s=null,m+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:bg(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:bg(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:bg(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}class jQ{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function PQ(e){return new jQ(e,!0)}function OQ(e){return new jQ(e,!1)}function ih(){}function VC(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function VE(e){this._context=e}VE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:VC(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:VC(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function r2(e){return new VE(e)}function DQ(e){this._context=e}DQ.prototype={areaStart:ih,areaEnd:ih,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:VC(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function NOe(e){return new DQ(e)}function FQ(e){this._context=e}FQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:VC(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function MOe(e){return new FQ(e)}function LQ(e,t){this._basis=new VE(e),this._beta=t}LQ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,a=t[n]-i,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(r+l*s),this._beta*t[o]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const jOe=function e(t){function n(r){return t===1?new VE(r):new LQ(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function HC(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function dD(e,t){this._context=e,this._k=(1-t)/6}dD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:HC(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:HC(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const BQ=function e(t){function n(r){return new dD(r,t)}return n.tension=function(r){return e(+r)},n}(0);function fD(e,t){this._context=e,this._k=(1-t)/6}fD.prototype={areaStart:ih,areaEnd:ih,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:HC(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const POe=function e(t){function n(r){return new fD(r,t)}return n.tension=function(r){return e(+r)},n}(0);function hD(e,t){this._context=e,this._k=(1-t)/6}hD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:HC(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const OOe=function e(t){function n(r){return new hD(r,t)}return n.tension=function(r){return e(+r)},n}(0);function pD(e,t,n){var r=e._x1,i=e._y1,s=e._x2,a=e._y2;if(e._l01_a>a7){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>a7){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,a,e._x2,e._y2)}function $Q(e,t){this._context=e,this._alpha=t}$Q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:pD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zQ=function e(t){function n(r){return t?new $Q(r,t):new dD(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function UQ(e,t){this._context=e,this._alpha=t}UQ.prototype={areaStart:ih,areaEnd:ih,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const DOe=function e(t){function n(r){return t?new UQ(r,t):new fD(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function qQ(e,t){this._context=e,this._alpha=t}qQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const FOe=function e(t){function n(r){return t?new qQ(r,t):new hD(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function VQ(e){this._context=e}VQ.prototype={areaStart:ih,areaEnd:ih,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function LOe(e){return new VQ(e)}function l7(e){return e<0?-1:1}function c7(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(l7(s)+l7(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function u7(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function XN(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function WC(e){this._context=e}WC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:XN(this,this._t0,u7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,XN(this,u7(this,n=c7(this,e,t)),n);break;default:XN(this,this._t0,n=c7(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function HQ(e){this._context=new WQ(e)}(HQ.prototype=Object.create(WC.prototype)).point=function(e,t){WC.prototype.point.call(this,t,e)};function WQ(e){this._context=e}WQ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function GQ(e){return new WC(e)}function KQ(e){return new HQ(e)}function YQ(e){this._context=e}YQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=d7(e),i=d7(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function d7(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function ZQ(e){return new YQ(e)}function HE(e,t){this._context=e,this._t=t}HE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function XQ(e){return new HE(e,.5)}function JQ(e){return new HE(e,0)}function QQ(e){return new HE(e,1)}function wv(e,t,n){this.k=e,this.x=t,this.y=n}wv.prototype={constructor:wv,scale:function(e){return e===1?this:new wv(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wv(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};wv.prototype;const Og=globalThis||void 0||self;var eee=typeof Og=="object"&&Og&&Og.Object===Object&&Og,BOe=typeof self=="object"&&self&&self.Object===Object&&self,_u=eee||BOe||Function("return this")(),GC=_u.Symbol,tee=Object.prototype,$Oe=tee.hasOwnProperty,zOe=tee.toString,av=GC?GC.toStringTag:void 0;function UOe(e){var t=$Oe.call(e,av),n=e[av];try{e[av]=void 0;var r=!0}catch{}var i=zOe.call(e);return r&&(t?e[av]=n:delete e[av]),i}var qOe=Object.prototype,VOe=qOe.toString;function HOe(e){return VOe.call(e)}var WOe="[object Null]",GOe="[object Undefined]",f7=GC?GC.toStringTag:void 0;function xy(e){return e==null?e===void 0?GOe:WOe:f7&&f7 in Object(e)?UOe(e):HOe(e)}function pm(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var KOe="[object AsyncFunction]",YOe="[object Function]",ZOe="[object GeneratorFunction]",XOe="[object Proxy]";function mD(e){if(!pm(e))return!1;var t=xy(e);return t==YOe||t==ZOe||t==KOe||t==XOe}var JN=_u["__core-js_shared__"],h7=function(){var e=/[^.]+$/.exec(JN&&JN.keys&&JN.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function JOe(e){return!!h7&&h7 in e}var QOe=Function.prototype,eDe=QOe.toString;function mm(e){if(e!=null){try{return eDe.call(e)}catch{}try{return e+""}catch{}}return""}var tDe=/[\\^$.*+?()[\]{}|]/g,nDe=/^\[object .+?Constructor\]$/,rDe=Function.prototype,iDe=Object.prototype,sDe=rDe.toString,aDe=iDe.hasOwnProperty,oDe=RegExp("^"+sDe.call(aDe).replace(tDe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lDe(e){if(!pm(e)||JOe(e))return!1;var t=mD(e)?oDe:nDe;return t.test(mm(e))}function cDe(e,t){return e==null?void 0:e[t]}function gm(e,t){var n=cDe(e,t);return lDe(n)?n:void 0}var zx=gm(Object,"create");function uDe(){this.__data__=zx?zx(null):{},this.size=0}function dDe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var fDe="__lodash_hash_undefined__",hDe=Object.prototype,pDe=hDe.hasOwnProperty;function mDe(e){var t=this.__data__;if(zx){var n=t[e];return n===fDe?void 0:n}return pDe.call(t,e)?t[e]:void 0}var gDe=Object.prototype,yDe=gDe.hasOwnProperty;function bDe(e){var t=this.__data__;return zx?t[e]!==void 0:yDe.call(t,e)}var vDe="__lodash_hash_undefined__";function xDe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zx&&t===void 0?vDe:t,this}function Gp(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Gp.prototype.clear=uDe;Gp.prototype.delete=dDe;Gp.prototype.get=mDe;Gp.prototype.has=bDe;Gp.prototype.set=xDe;function wDe(){this.__data__=[],this.size=0}function WE(e,t){return e===t||e!==e&&t!==t}function GE(e,t){for(var n=e.length;n--;)if(WE(e[n][0],t))return n;return-1}var _De=Array.prototype,SDe=_De.splice;function CDe(e){var t=this.__data__,n=GE(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():SDe.call(t,n,1),--this.size,!0}function kDe(e){var t=this.__data__,n=GE(t,e);return n<0?void 0:t[n][1]}function EDe(e){return GE(this.__data__,e)>-1}function TDe(e,t){var n=this.__data__,r=GE(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function jd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}jd.prototype.clear=wDe;jd.prototype.delete=CDe;jd.prototype.get=kDe;jd.prototype.has=EDe;jd.prototype.set=TDe;var Ux=gm(_u,"Map");function ADe(){this.size=0,this.__data__={hash:new Gp,map:new(Ux||jd),string:new Gp}}function RDe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function KE(e,t){var n=e.__data__;return RDe(t)?n[typeof t=="string"?"string":"hash"]:n.map}function IDe(e){var t=KE(this,e).delete(e);return this.size-=t?1:0,t}function NDe(e){return KE(this,e).get(e)}function MDe(e){return KE(this,e).has(e)}function jDe(e,t){var n=KE(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Ch(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ch.prototype.clear=ADe;Ch.prototype.delete=IDe;Ch.prototype.get=NDe;Ch.prototype.has=MDe;Ch.prototype.set=jDe;var PDe="Expected a function";function a1(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(PDe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(a1.Cache||Ch),n}a1.Cache=Ch;function ODe(){this.__data__=new jd,this.size=0}function DDe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function FDe(e){return this.__data__.get(e)}function LDe(e){return this.__data__.has(e)}var BDe=200;function $De(e,t){var n=this.__data__;if(n instanceof jd){var r=n.__data__;if(!Ux||r.length<BDe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ch(r)}return n.set(e,t),this.size=n.size,this}function wy(e){var t=this.__data__=new jd(e);this.size=t.size}wy.prototype.clear=ODe;wy.prototype.delete=DDe;wy.prototype.get=FDe;wy.prototype.has=LDe;wy.prototype.set=$De;var KC=function(){try{var e=gm(Object,"defineProperty");return e({},"",{}),e}catch{}}();function gD(e,t,n){t=="__proto__"&&KC?KC(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function D4(e,t,n){(n!==void 0&&!WE(e[t],n)||n===void 0&&!(t in e))&&gD(e,t,n)}function zDe(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var l=a[++i];if(n(s[l],l,s)===!1)break}return t}}var UDe=zDe(),nee=typeof exports=="object"&&exports&&!exports.nodeType&&exports,p7=nee&&typeof module=="object"&&module&&!module.nodeType&&module,qDe=p7&&p7.exports===nee,m7=qDe?_u.Buffer:void 0,g7=m7?m7.allocUnsafe:void 0;function VDe(e,t){if(t)return e.slice();var n=e.length,r=g7?g7(n):new e.constructor(n);return e.copy(r),r}var y7=_u.Uint8Array;function HDe(e){var t=new e.constructor(e.byteLength);return new y7(t).set(new y7(e)),t}function WDe(e,t){var n=t?HDe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function GDe(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var b7=Object.create,KDe=function(){function e(){}return function(t){if(!pm(t))return{};if(b7)return b7(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function ree(e,t){return function(n){return e(t(n))}}var iee=ree(Object.getPrototypeOf,Object),YDe=Object.prototype;function YE(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||YDe;return e===n}function ZDe(e){return typeof e.constructor=="function"&&!YE(e)?KDe(iee(e)):{}}function o1(e){return e!=null&&typeof e=="object"}var XDe="[object Arguments]";function v7(e){return o1(e)&&xy(e)==XDe}var see=Object.prototype,JDe=see.hasOwnProperty,QDe=see.propertyIsEnumerable,YC=v7(function(){return arguments}())?v7:function(e){return o1(e)&&JDe.call(e,"callee")&&!QDe.call(e,"callee")},ZC=Array.isArray,e6e=9007199254740991;function aee(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=e6e}function ZE(e){return e!=null&&aee(e.length)&&!mD(e)}function t6e(e){return o1(e)&&ZE(e)}function n6e(){return!1}var oee=typeof exports=="object"&&exports&&!exports.nodeType&&exports,x7=oee&&typeof module=="object"&&module&&!module.nodeType&&module,r6e=x7&&x7.exports===oee,w7=r6e?_u.Buffer:void 0,i6e=w7?w7.isBuffer:void 0,yD=i6e||n6e,s6e="[object Object]",a6e=Function.prototype,o6e=Object.prototype,lee=a6e.toString,l6e=o6e.hasOwnProperty,c6e=lee.call(Object);function u6e(e){if(!o1(e)||xy(e)!=s6e)return!1;var t=iee(e);if(t===null)return!0;var n=l6e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&lee.call(n)==c6e}var d6e="[object Arguments]",f6e="[object Array]",h6e="[object Boolean]",p6e="[object Date]",m6e="[object Error]",g6e="[object Function]",y6e="[object Map]",b6e="[object Number]",v6e="[object Object]",x6e="[object RegExp]",w6e="[object Set]",_6e="[object String]",S6e="[object WeakMap]",C6e="[object ArrayBuffer]",k6e="[object DataView]",E6e="[object Float32Array]",T6e="[object Float64Array]",A6e="[object Int8Array]",R6e="[object Int16Array]",I6e="[object Int32Array]",N6e="[object Uint8Array]",M6e="[object Uint8ClampedArray]",j6e="[object Uint16Array]",P6e="[object Uint32Array]",Pi={};Pi[E6e]=Pi[T6e]=Pi[A6e]=Pi[R6e]=Pi[I6e]=Pi[N6e]=Pi[M6e]=Pi[j6e]=Pi[P6e]=!0;Pi[d6e]=Pi[f6e]=Pi[C6e]=Pi[h6e]=Pi[k6e]=Pi[p6e]=Pi[m6e]=Pi[g6e]=Pi[y6e]=Pi[b6e]=Pi[v6e]=Pi[x6e]=Pi[w6e]=Pi[_6e]=Pi[S6e]=!1;function O6e(e){return o1(e)&&aee(e.length)&&!!Pi[xy(e)]}function D6e(e){return function(t){return e(t)}}var cee=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Lv=cee&&typeof module=="object"&&module&&!module.nodeType&&module,F6e=Lv&&Lv.exports===cee,QN=F6e&&eee.process,_7=function(){try{var e=Lv&&Lv.require&&Lv.require("util").types;return e||QN&&QN.binding&&QN.binding("util")}catch{}}(),S7=_7&&_7.isTypedArray,bD=S7?D6e(S7):O6e;function F4(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var L6e=Object.prototype,B6e=L6e.hasOwnProperty;function $6e(e,t,n){var r=e[t];(!(B6e.call(e,t)&&WE(r,n))||n===void 0&&!(t in e))&&gD(e,t,n)}function z6e(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=void 0;l===void 0&&(l=e[o]),i?gD(n,o,l):$6e(n,o,l)}return n}function U6e(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var q6e=9007199254740991,V6e=/^(?:0|[1-9]\d*)$/;function uee(e,t){var n=typeof e;return t=t??q6e,!!t&&(n=="number"||n!="symbol"&&V6e.test(e))&&e>-1&&e%1==0&&e<t}var H6e=Object.prototype,W6e=H6e.hasOwnProperty;function G6e(e,t){var n=ZC(e),r=!n&&YC(e),i=!n&&!r&&yD(e),s=!n&&!r&&!i&&bD(e),a=n||r||i||s,o=a?U6e(e.length,String):[],l=o.length;for(var c in e)(t||W6e.call(e,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||uee(c,l)))&&o.push(c);return o}function K6e(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Y6e=Object.prototype,Z6e=Y6e.hasOwnProperty;function X6e(e){if(!pm(e))return K6e(e);var t=YE(e),n=[];for(var r in e)r=="constructor"&&(t||!Z6e.call(e,r))||n.push(r);return n}function dee(e){return ZE(e)?G6e(e,!0):X6e(e)}function J6e(e){return z6e(e,dee(e))}function Q6e(e,t,n,r,i,s,a){var o=F4(e,n),l=F4(t,n),c=a.get(l);if(c){D4(e,n,c);return}var u=s?s(o,l,n+"",e,t,a):void 0,d=u===void 0;if(d){var h=ZC(l),m=!h&&yD(l),y=!h&&!m&&bD(l);u=l,h||m||y?ZC(o)?u=o:t6e(o)?u=GDe(o):m?(d=!1,u=VDe(l,!0)):y?(d=!1,u=WDe(l,!0)):u=[]:u6e(l)||YC(l)?(u=o,YC(o)?u=J6e(o):(!pm(o)||mD(o))&&(u=ZDe(l))):d=!1}d&&(a.set(l,u),i(u,l,r,s,a),a.delete(l)),D4(e,n,u)}function fee(e,t,n,r,i){e!==t&&UDe(t,function(s,a){if(i||(i=new wy),pm(s))Q6e(e,t,a,n,fee,r,i);else{var o=r?r(F4(e,a),s,a+"",e,t,i):void 0;o===void 0&&(o=s),D4(e,a,o)}},dee)}function hee(e){return e}function e5e(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var C7=Math.max;function t5e(e,t,n){return t=C7(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=C7(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),e5e(e,this,o)}}function n5e(e){return function(){return e}}var r5e=KC?function(e,t){return KC(e,"toString",{configurable:!0,enumerable:!1,value:n5e(t),writable:!0})}:hee,i5e=800,s5e=16,a5e=Date.now;function o5e(e){var t=0,n=0;return function(){var r=a5e(),i=s5e-(r-n);if(n=r,i>0){if(++t>=i5e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var l5e=o5e(r5e);function c5e(e,t){return l5e(t5e(e,t,hee),e+"")}function u5e(e,t,n){if(!pm(n))return!1;var r=typeof t;return(r=="number"?ZE(n)&&uee(t,n.length):r=="string"&&t in n)?WE(n[t],e):!1}function d5e(e){return c5e(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&u5e(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var o=n[r];o&&e(t,o,r,s)}return t})}var f5e=d5e(function(e,t,n){fee(e,t,n)}),h5e="​",p5e={curveBasis:r2,curveBasisClosed:NOe,curveBasisOpen:MOe,curveBumpX:PQ,curveBumpY:OQ,curveBundle:jOe,curveCardinalClosed:POe,curveCardinalOpen:OOe,curveCardinal:BQ,curveCatmullRomClosed:DOe,curveCatmullRomOpen:FOe,curveCatmullRom:zQ,curveLinear:qC,curveLinearClosed:LOe,curveMonotoneX:GQ,curveMonotoneY:KQ,curveNatural:ZQ,curveStep:XQ,curveStepAfter:QQ,curveStepBefore:JQ},m5e=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,g5e=re(function(e,t){const n=pee(e,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const a=n.map(o=>o.args);EC(a),r=ha(r,[...a])}else r=n.args;if(!r)return;let i=UO(e,t);const s="config";return r[s]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),r[i]=r[s],delete r[s]),r},"detectInit"),pee=re(function(e,t=null){var n,r;try{const i=new RegExp(`[%]{2}(?![{]${m5e.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(i,"").replace(/'/gm,'"'),$t.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let s;const a=[];for(;(s=Dv.exec(e))!==null;)if(s.index===Dv.lastIndex&&Dv.lastIndex++,s&&!t||t&&((n=s[1])!=null&&n.match(t))||t&&((r=s[2])!=null&&r.match(t))){const o=s[1]?s[1]:s[2],l=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;a.push({type:o,args:l})}return a.length===0?{type:e,args:null}:a.length===1?a[0]:a}catch(i){return $t.error(`ERROR: ${i.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),y5e=re(function(e){return e.replace(Dv,"")},"removeDirectives"),b5e=re(function(e,t){for(const[n,r]of t.entries())if(r.match(e))return n;return-1},"isSubstringInArray");function vD(e,t){if(!e)return t;const n=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return p5e[n]??t}re(vD,"interpolateToCurve");function mee(e,t){const n=e.trim();if(n)return t.securityLevel!=="loose"?l4e.sanitizeUrl(n):n}re(mee,"formatUrl");var v5e=re((e,...t)=>{const n=e.split("."),r=n.length-1,i=n[r];let s=window;for(let a=0;a<r;a++)if(s=s[n[a]],!s){$t.error(`Function name: ${e} not found in window`);return}s[i](...t)},"runFunc");function xD(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}re(xD,"distance");function gee(e){let t,n=0;e.forEach(i=>{n+=xD(i,t),t=i});const r=n/2;return wD(e,r)}re(gee,"traverseEdge");function yee(e){return e.length===1?e[0]:gee(e)}re(yee,"calcLabelPosition");var k7=re((e,t=2)=>{const n=Math.pow(10,t);return Math.round(e*n)/n},"roundNumber"),wD=re((e,t)=>{let n,r=t;for(const i of e){if(n){const s=xD(i,n);if(s===0)return n;if(s<r)r-=s;else{const a=r/s;if(a<=0)return n;if(a>=1)return{x:i.x,y:i.y};if(a>0&&a<1)return{x:k7((1-a)*n.x+a*i.x,5),y:k7((1-a)*n.y+a*i.y,5)}}}n=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),x5e=re((e,t,n)=>{$t.info(`our points ${JSON.stringify(t)}`),t[0]!==n&&(t=t.reverse());const i=wD(t,25),s=e?10:5,a=Math.atan2(t[0].y-i.y,t[0].x-i.x),o={x:0,y:0};return o.x=Math.sin(a)*s+(t[0].x+i.x)/2,o.y=-Math.cos(a)*s+(t[0].y+i.y)/2,o},"calcCardinalityPosition");function bee(e,t,n){const r=structuredClone(n);$t.info("our points",r),t!=="start_left"&&t!=="start_right"&&r.reverse();const i=25+e,s=wD(r,i),a=10+e*.5,o=Math.atan2(r[0].y-s.y,r[0].x-s.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(o+Math.PI)*a+(r[0].x+s.x)/2,l.y=-Math.cos(o+Math.PI)*a+(r[0].y+s.y)/2):t==="end_right"?(l.x=Math.sin(o-Math.PI)*a+(r[0].x+s.x)/2-5,l.y=-Math.cos(o-Math.PI)*a+(r[0].y+s.y)/2-5):t==="end_left"?(l.x=Math.sin(o)*a+(r[0].x+s.x)/2-5,l.y=-Math.cos(o)*a+(r[0].y+s.y)/2-5):(l.x=Math.sin(o)*a+(r[0].x+s.x)/2,l.y=-Math.cos(o)*a+(r[0].y+s.y)/2),l}re(bee,"calcTerminalLabelPosition");function vee(e){let t="",n="";for(const r of e)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?n=n+r+";":t=t+r+";");return{style:t,labelStyle:n}}re(vee,"getStylesFromArray");var E7=0,w5e=re(()=>(E7++,"id-"+Math.random().toString(36).substr(2,12)+"-"+E7),"generateId");function xee(e){let t="";const n="0123456789abcdef",r=n.length;for(let i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t}re(xee,"makeRandomHex");var _5e=re(e=>xee(e.length),"random"),S5e=re(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),C5e=re(function(e,t){const n=t.text.replace(vy.lineBreakRegex," "),[,r]=XE(t.fontSize),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.style("text-anchor",t.anchor),i.style("font-family",t.fontFamily),i.style("font-size",r),i.style("font-weight",t.fontWeight),i.attr("fill",t.fill),t.class!==void 0&&i.attr("class",t.class);const s=i.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.attr("fill",t.fill),s.text(n),i},"drawSimpleText"),k5e=a1((e,t,n)=>{if(!e||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),vy.lineBreakRegex.test(e)))return e;const r=e.split(" ").filter(Boolean),i=[];let s="";return r.forEach((a,o)=>{const l=kd(`${a} `,n),c=kd(s,n);if(l>t){const{hyphenatedStrings:h,remainingWord:m}=E5e(a,t,"-",n);i.push(s,...h),s=m}else c+l>=t?(i.push(s),s=a):s=[s,a].filter(Boolean).join(" ");o+1===r.length&&i.push(s)}),i.filter(a=>a!=="").join(n.joinWith)},(e,t,n)=>`${e}${t}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),E5e=a1((e,t,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=[...e],s=[];let a="";return i.forEach((o,l)=>{const c=`${a}${o}`;if(kd(c,r)>=t){const d=l+1,h=i.length===d,m=`${c}${n}`;s.push(h?c:m),a=""}else a=c}),{hyphenatedStrings:s,remainingWord:a}},(e,t,n="-",r)=>`${e}${t}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function wee(e,t){return _D(e,t).height}re(wee,"calculateTextHeight");function kd(e,t){return _D(e,t).width}re(kd,"calculateTextWidth");var _D=a1((e,t)=>{const{fontSize:n=12,fontFamily:r="Arial",fontWeight:i=400}=t;if(!e)return{width:0,height:0};const[,s]=XE(n),a=["sans-serif",r],o=e.split(vy.lineBreakRegex),l=[],c=qr("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const u=c.append("svg");for(const h of a){let m=0;const y={width:0,height:0,lineHeight:0};for(const b of o){const v=S5e();v.text=b||h5e;const x=C5e(u,v).style("font-size",s).style("font-weight",i).style("font-family",h),_=(x._groups||x)[0][0].getBBox();if(_.width===0&&_.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,_.width)),m=Math.round(_.height),y.height+=m,y.lineHeight=Math.round(Math.max(y.lineHeight,m))}l.push(y)}u.remove();const d=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[d]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),c0,T5e=(c0=class{constructor(t=!1,n){this.count=0,this.count=n?n.length:0,this.next=t?()=>this.count++:()=>Date.now()}},re(c0,"InitIDGenerator"),c0),uS,A5e=re(function(e){return uS=uS||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),uS.innerHTML=e,unescape(uS.textContent)},"entityDecode");function SD(e){return"str"in e}re(SD,"isDetailedError");var R5e=re((e,t,n,r)=>{var s;if(!r)return;const i=(s=e.node())==null?void 0:s.getBBox();i&&e.append("text").text(r).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-n).attr("class",t)},"insertTitle"),XE=re(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function CD(e,t){return f5e({},e,t)}re(CD,"cleanAndMerge");var Gc={assignWithDepth:ha,wrapLabel:k5e,calculateTextHeight:wee,calculateTextWidth:kd,calculateTextDimensions:_D,cleanAndMerge:CD,detectInit:g5e,detectDirective:pee,isSubstringInArray:b5e,interpolateToCurve:vD,calcLabelPosition:yee,calcCardinalityPosition:x5e,calcTerminalLabelPosition:bee,formatUrl:mee,getStylesFromArray:vee,generateId:w5e,random:_5e,runFunc:v5e,entityDecode:A5e,insertTitle:R5e,parseFontSize:XE,InitIDGenerator:T5e},I5e=re(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),t=t.replace(/#\w+;/g,function(n){const r=n.substring(1,n.length-1);return/^\+?\d+$/.test(r)?"ﬂ°°"+r+"¶ß":"ﬂ°"+r+"¶ß"}),t},"encodeEntities"),ym=re(function(e){return e.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),Jot=re((e,t,{counter:n=0,prefix:r,suffix:i},s)=>s||`${r?`${r}_`:""}${e}_${t}_${n}${i?`_${i}`:""}`,"getEdgeId");function Ga(e){return e??null}re(Ga,"handleUndefinedAttr");function kD(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var bm=kD();function _ee(e){bm=e}var Bv={exec:()=>null};function ci(e,t=""){let n=typeof e=="string"?e:e.source;const r={replace:(i,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(Va.caret,"$1"),n=n.replace(i,a),r},getRegex:()=>new RegExp(n,t)};return r}var Va={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},N5e=/^(?:[ \t]*(?:\n|$))+/,M5e=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,j5e=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,l1=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,P5e=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ED=/(?:[*+-]|\d{1,9}[.)])/,See=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Cee=ci(See).replace(/bull/g,ED).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),O5e=ci(See).replace(/bull/g,ED).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),TD=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,D5e=/^[^\n]+/,AD=/(?!\s*\])(?:\\.|[^\[\]\\])+/,F5e=ci(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",AD).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),L5e=ci(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ED).getRegex(),JE="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",RD=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,B5e=ci("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",RD).replace("tag",JE).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),kee=ci(TD).replace("hr",l1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",JE).getRegex(),$5e=ci(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",kee).getRegex(),ID={blockquote:$5e,code:M5e,def:F5e,fences:j5e,heading:P5e,hr:l1,html:B5e,lheading:Cee,list:L5e,newline:N5e,paragraph:kee,table:Bv,text:D5e},T7=ci("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",l1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",JE).getRegex(),z5e={...ID,lheading:O5e,table:T7,paragraph:ci(TD).replace("hr",l1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",T7).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",JE).getRegex()},U5e={...ID,html:ci(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",RD).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Bv,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ci(TD).replace("hr",l1).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Cee).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},q5e=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,V5e=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Eee=/^( {2,}|\\)\n(?!\s*$)/,H5e=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,QE=/[\p{P}\p{S}]/u,ND=/[\s\p{P}\p{S}]/u,Tee=/[^\s\p{P}\p{S}]/u,W5e=ci(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ND).getRegex(),Aee=/(?!~)[\p{P}\p{S}]/u,G5e=/(?!~)[\s\p{P}\p{S}]/u,K5e=/(?:[^\s\p{P}\p{S}]|~)/u,Y5e=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Ree=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Z5e=ci(Ree,"u").replace(/punct/g,QE).getRegex(),X5e=ci(Ree,"u").replace(/punct/g,Aee).getRegex(),Iee="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",J5e=ci(Iee,"gu").replace(/notPunctSpace/g,Tee).replace(/punctSpace/g,ND).replace(/punct/g,QE).getRegex(),Q5e=ci(Iee,"gu").replace(/notPunctSpace/g,K5e).replace(/punctSpace/g,G5e).replace(/punct/g,Aee).getRegex(),eFe=ci("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Tee).replace(/punctSpace/g,ND).replace(/punct/g,QE).getRegex(),tFe=ci(/\\(punct)/,"gu").replace(/punct/g,QE).getRegex(),nFe=ci(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),rFe=ci(RD).replace("(?:-->|$)","-->").getRegex(),iFe=ci("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",rFe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),XC=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,sFe=ci(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",XC).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Nee=ci(/^!?\[(label)\]\[(ref)\]/).replace("label",XC).replace("ref",AD).getRegex(),Mee=ci(/^!?\[(ref)\](?:\[\])?/).replace("ref",AD).getRegex(),aFe=ci("reflink|nolink(?!\\()","g").replace("reflink",Nee).replace("nolink",Mee).getRegex(),MD={_backpedal:Bv,anyPunctuation:tFe,autolink:nFe,blockSkip:Y5e,br:Eee,code:V5e,del:Bv,emStrongLDelim:Z5e,emStrongRDelimAst:J5e,emStrongRDelimUnd:eFe,escape:q5e,link:sFe,nolink:Mee,punctuation:W5e,reflink:Nee,reflinkSearch:aFe,tag:iFe,text:H5e,url:Bv},oFe={...MD,link:ci(/^!?\[(label)\]\((.*?)\)/).replace("label",XC).getRegex(),reflink:ci(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",XC).getRegex()},L4={...MD,emStrongRDelimAst:Q5e,emStrongLDelim:X5e,url:ci(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},lFe={...L4,br:ci(Eee).replace("{2,}","*").getRegex(),text:ci(L4.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},dS={normal:ID,gfm:z5e,pedantic:U5e},ov={normal:MD,gfm:L4,breaks:lFe,pedantic:oFe},cFe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},A7=e=>cFe[e];function Dc(e,t){if(t){if(Va.escapeTest.test(e))return e.replace(Va.escapeReplace,A7)}else if(Va.escapeTestNoEncode.test(e))return e.replace(Va.escapeReplaceNoEncode,A7);return e}function R7(e){try{e=encodeURI(e).replace(Va.percentDecode,"%")}catch{return null}return e}function I7(e,t){var s;const n=e.replace(Va.findPipe,(a,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Va.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Va.slashPipe,"|");return r}function lv(e,t,n){const r=e.length;if(r===0)return"";let i=0;for(;i<r&&e.charAt(r-i-1)===t;)i++;return e.slice(0,r-i)}function uFe(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function N7(e,t,n,r,i){const s=t.href,a=t.title||null,o=e[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:a,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,l}function dFe(e,t,n){const r=e.match(n.other.indentCodeCompensation);if(r===null)return t;const i=r[1];return t.split(`
`).map(s=>{const a=s.match(n.other.beginningSpace);if(a===null)return s;const[o]=a;return o.length>=i.length?s.slice(i.length):s}).join(`
`)}var JC=class{constructor(e){we(this,"options");we(this,"rules");we(this,"lexer");this.options=e||bm}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:lv(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],r=dFe(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const r=lv(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:lv(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=lv(t[0],`
`).split(`
`),r="",i="";const s=[];for(;n.length>0;){let a=!1;const o=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))o.push(n[l]),a=!0;else if(!a)o.push(n[l]);else break;n=n.slice(l);const c=o.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,i=i?`${i}
${u}`:u;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=d,n.length===0)break;const h=s.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){const m=h,y=m.raw+`
`+n.join(`
`),b=this.blockquote(y);s[s.length-1]=b,r=r.substring(0,r.length-m.raw.length)+b.raw,i=i.substring(0,i.length-m.text.length)+b.text;break}else if((h==null?void 0:h.type)==="list"){const m=h,y=m.raw+`
`+n.join(`
`),b=this.list(y);s[s.length-1]=b,r=r.substring(0,r.length-h.raw.length)+b.raw,i=i.substring(0,i.length-m.raw.length)+b.raw,n=y.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const s=this.rules.other.listItemRegex(n);let a=!1;for(;e;){let l=!1,c="",u="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let d=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),h=e.split(`
`,1)[0],m=!d.trim(),y=0;if(this.options.pedantic?(y=2,u=d.trimStart()):m?y=t[1].length+1:(y=t[2].search(this.rules.other.nonSpaceChar),y=y>4?1:y,u=d.slice(y),y+=t[1].length),m&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),l=!0),!l){const x=this.rules.other.nextBulletRegex(y),_=this.rules.other.hrRegex(y),S=this.rules.other.fencesBeginRegex(y),C=this.rules.other.headingBeginRegex(y),E=this.rules.other.htmlBeginRegex(y);for(;e;){const A=e.split(`
`,1)[0];let R;if(h=A,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),R=h):R=h.replace(this.rules.other.tabCharGlobal,"    "),S.test(h)||C.test(h)||E.test(h)||x.test(h)||_.test(h))break;if(R.search(this.rules.other.nonSpaceChar)>=y||!h.trim())u+=`
`+R.slice(y);else{if(m||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(d)||C.test(d)||_.test(d))break;u+=`
`+h}!m&&!h.trim()&&(m=!0),c+=A+`
`,e=e.substring(A.length+1),d=R.slice(y)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0));let b=null,v;this.options.gfm&&(b=this.rules.other.listIsTask.exec(u),b&&(v=b[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!b,checked:v,loose:!1,text:u,tokens:[]}),i.raw+=c}const o=i.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const c=i.items[l].tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:i}}}table(e){var a;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=I7(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const o of r)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<n.length;o++)s.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:s.align[o]});for(const o of i)s.rows.push(I7(o,s.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[c]})));return s}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const s=lv(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{const s=uFe(t[2],"()");if(s===-2)return;if(s>-1){const o=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),N7(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[r.toLowerCase()];if(!i){const s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return N7(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const s=[...r[0]].length-1;let a,o,l=s,c=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+s);(r=u.exec(t))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(o=[...a].length,r[3]||r[4]){l+=o;continue}else if((r[5]||r[6])&&s%3&&!((s+o)%3)){c+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+c);const d=[...r[0]][0].length,h=e.slice(0,s+r.index+d+o);if(Math.min(s,o)%2){const y=h.slice(1,-1);return{type:"em",raw:h,text:y,tokens:this.lexer.inlineTokens(y)}}const m=h.slice(2,-2);return{type:"strong",raw:h,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=t[1],r="mailto:"+n):(n=t[1],r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=t[0],i="mailto:"+r;else{let s;do s=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(s!==t[0]);r=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},ld=class B4{constructor(t){we(this,"tokens");we(this,"options");we(this,"state");we(this,"tokenizer");we(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||bm,this.options.tokenizer=this.options.tokenizer||new JC,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:Va,block:dS.normal,inline:ov.normal};this.options.pedantic?(n.block=dS.pedantic,n.inline=ov.pedantic):this.options.gfm&&(n.block=dS.gfm,this.options.breaks?n.inline=ov.breaks:n.inline=ov.gfm),this.tokenizer.rules=n}static get rules(){return{block:dS,inline:ov}}static lex(t,n){return new B4(n).lex(t)}static lexInline(t,n){return new B4(n).inlineTokens(t)}lex(t){t=t.replace(Va.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){var i,s,a;for(this.options.pedantic&&(t=t.replace(Va.tabCharGlobal,"    ").replace(Va.spaceLine,""));t;){let o;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(o=c.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);const c=n.at(-1);o.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.at(-1).src=c.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let l=t;if((a=this.options.extensions)!=null&&a.startBlock){let c=1/0;const u=t.slice(1);let d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(o=this.tokenizer.paragraph(l))){const c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(o),r=l.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(o);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var o,l,c;let r=t,i=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,a="";for(;t;){s||(a=""),s=!1;let u;if((l=(o=this.options.extensions)==null?void 0:o.inline)!=null&&l.some(h=>(u=h.call({lexer:this},t,n))?(t=t.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);const h=n.at(-1);u.type==="text"&&(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(t,r,a)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),n.push(u);continue}let d=t;if((c=this.options.extensions)!=null&&c.startInline){let h=1/0;const m=t.slice(1);let y;this.options.extensions.startInline.forEach(b=>{y=b.call({lexer:this},m),typeof y=="number"&&y>=0&&(h=Math.min(h,y))}),h<1/0&&h>=0&&(d=t.substring(0,h+1))}if(u=this.tokenizer.inlineText(d)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(a=u.raw.slice(-1)),s=!0;const h=n.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(t){const h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}},QC=class{constructor(e){we(this,"options");we(this,"parser");this.options=e||bm}space(e){return""}code({text:e,lang:t,escaped:n}){var s;const r=(s=(t||"").match(Va.notSpaceStart))==null?void 0:s[0],i=e.replace(Va.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Dc(r)+'">'+(n?i:Dc(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Dc(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let r="";for(let a=0;a<e.items.length;a++){const o=e.items[a];r+=this.listitem(o)}const i=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(e){var n;let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+Dc(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let r="";for(let i=0;i<e.rows.length;i++){const s=e.rows[i];n="";for(let a=0;a<s.length;a++)n+=this.tablecell(s[a]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Dc(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const r=this.parser.parseInline(n),i=R7(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+Dc(t)+'"'),s+=">"+r+"</a>",s}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const i=R7(e);if(i===null)return Dc(n);e=i;let s=`<img src="${e}" alt="${n}"`;return t&&(s+=` title="${Dc(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Dc(e.text)}},jD=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},cd=class $4{constructor(t){we(this,"options");we(this,"renderer");we(this,"textRenderer");this.options=t||bm,this.options.renderer=this.options.renderer||new QC,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new jD}static parse(t,n){return new $4(n).parse(t)}static parseInline(t,n){return new $4(n).parseInline(t)}parse(t,n=!0){var i,s;let r="";for(let a=0;a<t.length;a++){const o=t[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[o.type]){const c=o,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=u||"";continue}}const l=o;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;a+1<t.length&&t[a+1].type==="text";)c=t[++a],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(t,n=this.renderer){var i,s;let r="";for(let a=0;a<t.length;a++){const o=t[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[o.type]){const c=this.options.extensions.renderers[o.type].call({parser:this},o);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=c||"";continue}}const l=o;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},s3,i2=(s3=class{constructor(e){we(this,"options");we(this,"block");this.options=e||bm}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?ld.lex:ld.lexInline}provideParser(){return this.block?cd.parse:cd.parseInline}},we(s3,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),s3),fFe=class{constructor(...e){we(this,"defaults",kD());we(this,"options",this.setOptions);we(this,"parse",this.parseMarkdown(!0));we(this,"parseInline",this.parseMarkdown(!1));we(this,"Parser",cd);we(this,"Renderer",QC);we(this,"TextRenderer",jD);we(this,"Lexer",ld);we(this,"Tokenizer",JC);we(this,"Hooks",i2);this.use(...e)}walkTokens(e,t){var r,i;let n=[];for(const s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{const a=s;for(const o of a.header)n=n.concat(this.walkTokens(o.tokens,t));for(const o of a.rows)for(const l of o)n=n.concat(this.walkTokens(l.tokens,t));break}case"list":{const a=s;n=n.concat(this.walkTokens(a.items,t));break}default:{const a=s;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(o=>{const l=a[o].flat(1/0);n=n.concat(this.walkTokens(l,t))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=t.renderers[i.name];s?t.renderers[i.name]=function(...a){let o=i.renderer.apply(this,a);return o===!1&&(o=s.apply(this,a)),o}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=t[i.level];s?s.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),n.renderer){const i=this.defaults.renderer||new QC(this.defaults);for(const s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const a=s,o=n.renderer[a],l=i[a];i[a]=(...c)=>{let u=o.apply(i,c);return u===!1&&(u=l.apply(i,c)),u||""}}r.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new JC(this.defaults);for(const s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const a=s,o=n.tokenizer[a],l=i[a];i[a]=(...c)=>{let u=o.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}r.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new i2;for(const s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const a=s,o=n.hooks[a],l=i[a];i2.passThroughHooks.has(s)?i[a]=c=>{if(this.defaults.async)return Promise.resolve(o.call(i,c)).then(d=>l.call(i,d));const u=o.call(i,c);return l.call(i,u)}:i[a]=(...c)=>{let u=o.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}r.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(a){let o=[];return o.push(s.call(this,a)),i&&(o=o.concat(i.call(this,a))),o}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ld.lex(e,t??this.defaults)}parser(e,t){return cd.parse(e,t??this.defaults)}parseMarkdown(e){return(n,r)=>{const i={...r},s={...this.defaults,...i},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);const o=s.hooks?s.hooks.provideLexer():e?ld.lex:ld.lexInline,l=s.hooks?s.hooks.provideParser():e?cd.parse:cd.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(c=>o(c,s)).then(c=>s.hooks?s.hooks.processAllTokens(c):c).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>l(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(a);try{s.hooks&&(n=s.hooks.preprocess(n));let c=o(n,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let u=l(c,s);return s.hooks&&(u=s.hooks.postprocess(u)),u}catch(c){return a(c)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+Dc(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}},Kp=new fFe;function ai(e,t){return Kp.parse(e,t)}ai.options=ai.setOptions=function(e){return Kp.setOptions(e),ai.defaults=Kp.defaults,_ee(ai.defaults),ai};ai.getDefaults=kD;ai.defaults=bm;ai.use=function(...e){return Kp.use(...e),ai.defaults=Kp.defaults,_ee(ai.defaults),ai};ai.walkTokens=function(e,t){return Kp.walkTokens(e,t)};ai.parseInline=Kp.parseInline;ai.Parser=cd;ai.parser=cd.parse;ai.Renderer=QC;ai.TextRenderer=jD;ai.Lexer=ld;ai.lexer=ld.lex;ai.Tokenizer=JC;ai.Hooks=i2;ai.parse=ai;ai.options;ai.setOptions;ai.use;ai.walkTokens;ai.parseInline;cd.parse;ld.lex;function jee(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.from(typeof e=="string"?[e]:e);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(o,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?o.concat(c.map(function(u){var d,h;return(h=(d=u.match(/[\t ]/g))===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0})):o},[]);if(i.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(o){return o.replace(s,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return t.forEach(function(o,l){var c=a.match(/(?:^|\n)( *)$/),u=c?c[1]:"",d=o;typeof o=="string"&&o.includes(`
`)&&(d=String(o).split(`
`).map(function(h,m){return m===0?h:""+u+h}).join(`
`)),a+=d+r[l+1]}),a}function Pee(e,{markdownAutoWrap:t}){const r=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=jee(r);return t===!1?i.replace(/ /g,"&nbsp;"):i}re(Pee,"preprocessMarkdown");function Oee(e,t={}){const n=Pee(e,t),r=ai.lexer(n),i=[[]];let s=0;function a(o,l="normal"){o.type==="text"?o.text.split(`
`).forEach((u,d)=>{d!==0&&(s++,i.push([])),u.split(" ").forEach(h=>{h=h.replace(/&#39;/g,"'"),h&&i[s].push({content:h,type:l})})}):o.type==="strong"||o.type==="em"?o.tokens.forEach(c=>{a(c,o.type)}):o.type==="html"&&i[s].push({content:o.text,type:"normal"})}return re(a,"processNode"),r.forEach(o=>{var l;o.type==="paragraph"?(l=o.tokens)==null||l.forEach(c=>{a(c)}):o.type==="html"&&i[s].push({content:o.text,type:"normal"})}),i}re(Oee,"markdownToLines");function Dee(e,{markdownAutoWrap:t}={}){const n=ai.lexer(e);function r(i){var s,a,o;return i.type==="text"?t===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${(s=i.tokens)==null?void 0:s.map(r).join("")}</strong>`:i.type==="em"?`<em>${(a=i.tokens)==null?void 0:a.map(r).join("")}</em>`:i.type==="paragraph"?`<p>${(o=i.tokens)==null?void 0:o.map(r).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:`Unsupported markdown: ${i.type}`}return re(r,"output"),n.map(r).join("")}re(Dee,"markdownToHTML");function Fee(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}re(Fee,"splitTextToChars");function Lee(e,t){const n=Fee(t.content);return PD(e,[],n,t.type)}re(Lee,"splitWordToFitWidth");function PD(e,t,n,r){if(n.length===0)return[{content:t.join(""),type:r},{content:"",type:r}];const[i,...s]=n,a=[...t,i];return e([{content:a.join(""),type:r}])?PD(e,a,s,r):(t.length===0&&i&&(t.push(i),n.shift()),[{content:t.join(""),type:r},{content:n.join(""),type:r}])}re(PD,"splitWordToFitWidthRecursion");function Bee(e,t){if(e.some(({content:n})=>n.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return ek(e,t)}re(Bee,"splitLineToFitWidth");function ek(e,t,n=[],r=[]){if(e.length===0)return r.length>0&&n.push(r),n.length>0?n:[];let i="";e[0].content===" "&&(i=" ",e.shift());const s=e.shift()??{content:" ",type:"normal"},a=[...r];if(i!==""&&a.push({content:i,type:"normal"}),a.push(s),t(a))return ek(e,t,n,a);if(r.length>0)n.push(r),e.unshift(s);else if(s.content){const[o,l]=Lee(t,s);n.push([o]),l.content&&e.unshift(l)}return ek(e,t,n)}re(ek,"splitLineToFitWidthRecursion");function z4(e,t){t&&e.attr("style",t)}re(z4,"applyStyle");async function $ee(e,t,n,r,i=!1){const s=e.append("foreignObject");s.attr("width",`${10*n}px`),s.attr("height",`${10*n}px`);const a=s.append("xhtml:div");let o=t.label;t.label&&D0(t.label)&&(o=await qO(t.label.replace(vy.lineBreakRegex,`
`),ni()));const l=t.isNode?"nodeLabel":"edgeLabel",c=a.append("span");c.html(o),z4(c,t.labelStyle),c.attr("class",`${l} ${r}`),z4(a,t.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("line-height","1.5"),a.style("max-width",n+"px"),a.style("text-align","center"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&a.attr("class","labelBkg");let u=a.node().getBoundingClientRect();return u.width===n&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",n+"px"),u=a.node().getBoundingClientRect()),s.node()}re($ee,"addHtmlSpan");function eT(e,t,n){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*n-.1+"em").attr("dy",n+"em")}re(eT,"createTspan");function zee(e,t,n){const r=e.append("text"),i=eT(r,1,t);tT(i,n);const s=i.node().getComputedTextLength();return r.remove(),s}re(zee,"computeWidthOfText");function hFe(e,t,n){var a;const r=e.append("text"),i=eT(r,1,t);tT(i,[{content:n,type:"normal"}]);const s=(a=i.node())==null?void 0:a.getBoundingClientRect();return s&&r.remove(),s}re(hFe,"computeDimensionOfText");function Uee(e,t,n,r=!1){const s=t.append("g"),a=s.insert("rect").attr("class","background").attr("style","stroke: none"),o=s.append("text").attr("y","-10.1");let l=0;for(const c of n){const u=re(h=>zee(s,1.1,h)<=e,"checkWidth"),d=u(c)?[c]:Bee(c,u);for(const h of d){const m=eT(o,l,1.1);tT(m,h),l++}}if(r){const c=o.node().getBBox(),u=2;return a.attr("x",c.x-u).attr("y",c.y-u).attr("width",c.width+2*u).attr("height",c.height+2*u),s.node()}else return o.node()}re(Uee,"createFormattedText");function tT(e,t){e.text(""),t.forEach((n,r)=>{const i=e.append("tspan").attr("font-style",n.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",n.type==="strong"?"bold":"normal");r===0?i.text(n.content):i.text(" "+n.content)})}re(tT,"updateTextContentAndStyles");function qee(e){return e.replace(/fa[bklrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)}re(qee,"replaceIconSubstring");var kh=re(async(e,t="",{style:n="",isTitle:r=!1,classes:i="",useHtmlLabels:s=!0,isNode:a=!0,width:o=200,addSvgBackground:l=!1}={},c)=>{if($t.debug("XYZ createText",t,n,r,i,s,a,"addSvgBackground: ",l),s){const u=Dee(t,c),d=qee(ym(u)),h=t.replace(/\\\\/g,"\\"),m={isNode:a,label:D0(t)?h:d,labelStyle:n.replace("fill:","color:")};return await $ee(e,m,o,i,l)}else{const u=t.replace(/<br\s*\/?>/g,"<br/>"),d=Oee(u.replace("<br>","<br/>"),c),h=Uee(o,e,d,t?l:!1);if(a){/stroke:/.exec(n)&&(n=n.replace("stroke:","lineColor:"));const m=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");qr(h).attr("style",m)}else{const m=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");qr(h).select("rect").attr("style",m.replace(/background:/g,"fill:"));const y=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");qr(h).select("text").attr("style",y)}return h}},"createText");function eM(e,t,n){if(e&&e.length){const[r,i]=t,s=Math.PI/180*n,a=Math.cos(s),o=Math.sin(s);for(const l of e){const[c,u]=l;l[0]=(c-r)*a-(u-i)*o+r,l[1]=(c-r)*o+(u-i)*a+i}}}function pFe(e,t){return e[0]===t[0]&&e[1]===t[1]}function mFe(e,t,n,r=1){const i=n,s=Math.max(t,.1),a=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,o=[0,0];if(i)for(const c of a)eM(c,o,i);const l=function(c,u,d){const h=[];for(const _ of c){const S=[..._];pFe(S[0],S[S.length-1])||S.push([S[0][0],S[0][1]]),S.length>2&&h.push(S)}const m=[];u=Math.max(u,.1);const y=[];for(const _ of h)for(let S=0;S<_.length-1;S++){const C=_[S],E=_[S+1];if(C[1]!==E[1]){const A=Math.min(C[1],E[1]);y.push({ymin:A,ymax:Math.max(C[1],E[1]),x:A===C[1]?C[0]:E[0],islope:(E[0]-C[0])/(E[1]-C[1])})}}if(y.sort((_,S)=>_.ymin<S.ymin?-1:_.ymin>S.ymin?1:_.x<S.x?-1:_.x>S.x?1:_.ymax===S.ymax?0:(_.ymax-S.ymax)/Math.abs(_.ymax-S.ymax)),!y.length)return m;let b=[],v=y[0].ymin,x=0;for(;b.length||y.length;){if(y.length){let _=-1;for(let S=0;S<y.length&&!(y[S].ymin>v);S++)_=S;y.splice(0,_+1).forEach(S=>{b.push({s:v,edge:S})})}if(b=b.filter(_=>!(_.edge.ymax<=v)),b.sort((_,S)=>_.edge.x===S.edge.x?0:(_.edge.x-S.edge.x)/Math.abs(_.edge.x-S.edge.x)),(d!==1||x%u==0)&&b.length>1)for(let _=0;_<b.length;_+=2){const S=_+1;if(S>=b.length)break;const C=b[_].edge,E=b[S].edge;m.push([[Math.round(C.x),v],[Math.round(E.x),v]])}v+=d,b.forEach(_=>{_.edge.x=_.edge.x+d*_.edge.islope}),x++}return m}(a,s,r);if(i){for(const c of a)eM(c,o,-i);(function(c,u,d){const h=[];c.forEach(m=>h.push(...m)),eM(h,u,d)})(l,o,-i)}return l}function c1(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=4*t.strokeWidth),i=Math.round(Math.max(i,.1));let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),mFe(e,i,r,s||1)}class OD{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=c1(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function nT(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class gFe extends OD{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=4*n.strokeWidth),r=Math.max(r,.1);const i=c1(t,Object.assign({},n,{hachureGap:r})),s=Math.PI/180*n.hachureAngle,a=[],o=.5*r*Math.cos(s),l=.5*r*Math.sin(s);for(const[c,u]of i)nT([c,u])&&a.push([[c[0]-o,c[1]+l],[...u]],[[c[0]+o,c[1]-l],[...u]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class yFe extends OD{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,i);return r.ops=r.ops.concat(s.ops),r}}class bFe{constructor(t){this.helper=t}fillPolygons(t,n){const r=c1(t,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=4*n.strokeWidth),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const a=i/4;for(const o of t){const l=nT(o),c=l/i,u=Math.ceil(c)-1,d=l-u*i,h=(o[0][0]+o[1][0])/2-i/4,m=Math.min(o[0][1],o[1][1]);for(let y=0;y<u;y++){const b=m+d+y*i,v=h-a+2*Math.random()*a,x=b-a+2*Math.random()*a,_=this.helper.ellipse(v,x,s,s,n);r.push(..._.ops)}}return{type:"fillSketch",ops:r}}}class vFe{constructor(t){this.helper=t}fillPolygons(t,n){const r=c1(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,s=[];return t.forEach(a=>{const o=nT(a),l=Math.floor(o/(r+i)),c=(o+i-l*(r+i))/2;let u=a[0],d=a[1];u[0]>d[0]&&(u=a[1],d=a[0]);const h=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let m=0;m<l;m++){const y=m*(r+i),b=y+r,v=[u[0]+y*Math.cos(h)+c*Math.cos(h),u[1]+y*Math.sin(h)+c*Math.sin(h)],x=[u[0]+b*Math.cos(h)+c*Math.cos(h),u[1]+b*Math.sin(h)+c*Math.sin(h)];s.push(...this.helper.doubleLineOps(v[0],v[1],x[0],x[1],n))}}),s}}class xFe{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset,s=c1(t,n=Object.assign({},n,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(s=>{const a=nT(s),o=Math.round(a/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<o;d++){const h=2*d*n,m=2*(d+1)*n,y=Math.sqrt(2*Math.pow(n,2)),b=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],v=[l[0]+m*Math.cos(u),l[1]+m*Math.sin(u)],x=[b[0]+y*Math.cos(u+Math.PI/4),b[1]+y*Math.sin(u+Math.PI/4)];i.push(...this.helper.doubleLineOps(b[0],b[1],x[0],x[1],r),...this.helper.doubleLineOps(x[0],x[1],v[0],v[1],r))}}),i}}const oo={};let wFe=class{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}};const _Fe=0,tM=1,M7=2,fS={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function nM(e,t){return e.type===t}function DD(e){const t=[],n=function(a){const o=new Array;for(;a!=="";)if(a.match(/^([ \t\r\n,]+)/))a=a.substr(RegExp.$1.length);else if(a.match(/^([aAcChHlLmMqQsStTvVzZ])/))o[o.length]={type:_Fe,text:RegExp.$1},a=a.substr(RegExp.$1.length);else{if(!a.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];o[o.length]={type:tM,text:`${parseFloat(RegExp.$1)}`},a=a.substr(RegExp.$1.length)}return o[o.length]={type:M7,text:""},o}(e);let r="BOD",i=0,s=n[i];for(;!nM(s,M7);){let a=0;const o=[];if(r==="BOD"){if(s.text!=="M"&&s.text!=="m")return DD("M0,0"+e);i++,a=fS[s.text],r=s.text}else nM(s,tM)?a=fS[r]:(i++,a=fS[s.text],r=s.text);if(!(i+a<n.length))throw new Error("Path data ended short");for(let l=i;l<i+a;l++){const c=n[l];if(!nM(c,tM))throw new Error("Param not a number: "+r+","+c.text);o[o.length]=+c.text}if(typeof fS[r]!="number")throw new Error("Bad segment: "+r);{const l={key:r,data:o};t.push(l),i+=a,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}}return t}function Vee(e){let t=0,n=0,r=0,i=0;const s=[];for(const{key:a,data:o}of e)switch(a){case"M":s.push({key:"M",data:[...o]}),[t,n]=o,[r,i]=o;break;case"m":t+=o[0],n+=o[1],s.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":s.push({key:"L",data:[...o]}),[t,n]=o;break;case"l":t+=o[0],n+=o[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...o]}),t=o[4],n=o[5];break;case"c":{const l=o.map((c,u)=>u%2?c+n:c+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...o]}),t=o[2],n=o[3];break;case"q":{const l=o.map((c,u)=>u%2?c+n:c+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...o]}),t=o[5],n=o[6];break;case"a":t+=o[5],n+=o[6],s.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],t,n]});break;case"H":s.push({key:"H",data:[...o]}),t=o[0];break;case"h":t+=o[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...o]}),n=o[0];break;case"v":n+=o[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...o]}),t=o[2],n=o[3];break;case"s":{const l=o.map((c,u)=>u%2?c+n:c+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...o]}),t=o[0],n=o[1];break;case"t":t+=o[0],n+=o[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=r,n=i}return s}function Hee(e){const t=[];let n="",r=0,i=0,s=0,a=0,o=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[r,i]=u,[s,a]=u;break;case"C":t.push({key:"C",data:[...u]}),r=u[4],i=u[5],o=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[r,i]=u;break;case"H":r=u[0],t.push({key:"L",data:[r,i]});break;case"V":i=u[0],t.push({key:"L",data:[r,i]});break;case"S":{let d=0,h=0;n==="C"||n==="S"?(d=r+(r-o),h=i+(i-l)):(d=r,h=i),t.push({key:"C",data:[d,h,...u]}),o=u[0],l=u[1],r=u[2],i=u[3];break}case"T":{const[d,h]=u;let m=0,y=0;n==="Q"||n==="T"?(m=r+(r-o),y=i+(i-l)):(m=r,y=i);const b=r+2*(m-r)/3,v=i+2*(y-i)/3,x=d+2*(m-d)/3,_=h+2*(y-h)/3;t.push({key:"C",data:[b,v,x,_,d,h]}),o=m,l=y,r=d,i=h;break}case"Q":{const[d,h,m,y]=u,b=r+2*(d-r)/3,v=i+2*(h-i)/3,x=m+2*(d-m)/3,_=y+2*(h-y)/3;t.push({key:"C",data:[b,v,x,_,m,y]}),o=d,l=h,r=m,i=y;break}case"A":{const d=Math.abs(u[0]),h=Math.abs(u[1]),m=u[2],y=u[3],b=u[4],v=u[5],x=u[6];d===0||h===0?(t.push({key:"C",data:[r,i,v,x,v,x]}),r=v,i=x):(r!==v||i!==x)&&(Wee(r,i,v,x,d,h,m,y,b).forEach(function(_){t.push({key:"C",data:_})}),r=v,i=x);break}case"Z":t.push({key:"Z",data:[]}),r=s,i=a}n=c}return t}function cv(e,t,n){return[e*Math.cos(n)-t*Math.sin(n),e*Math.sin(n)+t*Math.cos(n)]}function Wee(e,t,n,r,i,s,a,o,l,c){const u=(d=a,Math.PI*d/180);var d;let h=[],m=0,y=0,b=0,v=0;if(c)[m,y,b,v]=c;else{[e,t]=cv(e,t,-u),[n,r]=cv(n,r,-u);const V=(e-n)/2,F=(t-r)/2;let J=V*V/(i*i)+F*F/(s*s);J>1&&(J=Math.sqrt(J),i*=J,s*=J);const U=i*i,G=s*s,$=U*G-U*F*F-G*V*V,ne=U*F*F+G*V*V,H=(o===l?-1:1)*Math.sqrt(Math.abs($/ne));b=H*i*F/s+(e+n)/2,v=H*-s*V/i+(t+r)/2,m=Math.asin(parseFloat(((t-v)/s).toFixed(9))),y=Math.asin(parseFloat(((r-v)/s).toFixed(9))),e<b&&(m=Math.PI-m),n<b&&(y=Math.PI-y),m<0&&(m=2*Math.PI+m),y<0&&(y=2*Math.PI+y),l&&m>y&&(m-=2*Math.PI),!l&&y>m&&(y-=2*Math.PI)}let x=y-m;if(Math.abs(x)>120*Math.PI/180){const V=y,F=n,J=r;y=l&&y>m?m+120*Math.PI/180*1:m+120*Math.PI/180*-1,h=Wee(n=b+i*Math.cos(y),r=v+s*Math.sin(y),F,J,i,s,a,0,l,[y,V,b,v])}x=y-m;const _=Math.cos(m),S=Math.sin(m),C=Math.cos(y),E=Math.sin(y),A=Math.tan(x/4),R=4/3*i*A,N=4/3*s*A,M=[e,t],P=[e+R*S,t-N*_],L=[n+R*E,r-N*C],O=[n,r];if(P[0]=2*M[0]-P[0],P[1]=2*M[1]-P[1],c)return[P,L,O].concat(h);{h=[P,L,O].concat(h);const V=[];for(let F=0;F<h.length;F+=3){const J=cv(h[F][0],h[F][1],u),U=cv(h[F+1][0],h[F+1][1],u),G=cv(h[F+2][0],h[F+2][1],u);V.push([J[0],J[1],U[0],U[1],G[0],G[1]])}return V}}const SFe={randOffset:function(e,t){return Kn(e,t)},randOffsetWithRange:function(e,t,n){return tk(e,t,n)},ellipse:function(e,t,n,r,i){const s=Kee(n,r,i);return U4(e,t,i,s).opset},doubleLineOps:function(e,t,n,r,i){return sh(e,t,n,r,i,!0)}};function Gee(e,t,n,r,i){return{type:"path",ops:sh(e,t,n,r,i)}}function s2(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...sh(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&i.push(...sh(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}return r===2?Gee(e[0][0],e[0][1],e[1][0],e[1][1],n):{type:"path",ops:[]}}function CFe(e,t,n,r,i){return function(s,a){return s2(s,!0,a)}([[e,t],[e+n,t],[e+n,t+r],[e,t+r]],i)}function j7(e,t){if(e.length){const n=typeof e[0][0]=="number"?[e]:e,r=hS(n[0],1*(1+.2*t.roughness),t),i=t.disableMultiStroke?[]:hS(n[0],1.5*(1+.22*t.roughness),D7(t));for(let s=1;s<n.length;s++){const a=n[s];if(a.length){const o=hS(a,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:hS(a,1.5*(1+.22*t.roughness),D7(t));for(const c of o)c.op!=="move"&&r.push(c);for(const c of l)c.op!=="move"&&i.push(c)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function Kee(e,t,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=2*Math.PI/i;let a=Math.abs(e/2),o=Math.abs(t/2);const l=1-n.curveFitting;return a+=Kn(a*l,n),o+=Kn(o*l,n),{increment:s,rx:a,ry:o}}function U4(e,t,n,r){const[i,s]=F7(r.increment,e,t,r.rx,r.ry,1,r.increment*tk(.1,tk(.4,1,n),n),n);let a=nk(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[o]=F7(r.increment,e,t,r.rx,r.ry,1.5,0,n),l=nk(o,null,n);a=a.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:a}}}function P7(e,t,n,r,i,s,a,o,l){const c=e,u=t;let d=Math.abs(n/2),h=Math.abs(r/2);d+=Kn(.01*d,l),h+=Kn(.01*h,l);let m=i,y=s;for(;m<0;)m+=2*Math.PI,y+=2*Math.PI;y-m>2*Math.PI&&(m=0,y=2*Math.PI);const b=2*Math.PI/l.curveStepCount,v=Math.min(b/2,(y-m)/2),x=L7(v,c,u,d,h,m,y,1,l);if(!l.disableMultiStroke){const _=L7(v,c,u,d,h,m,y,1.5,l);x.push(..._)}return a&&(o?x.push(...sh(c,u,c+d*Math.cos(m),u+h*Math.sin(m),l),...sh(c,u,c+d*Math.cos(y),u+h*Math.sin(y),l)):x.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(m),u+h*Math.sin(m)]})),{type:"path",ops:x}}function O7(e,t){const n=Hee(Vee(DD(e))),r=[];let i=[0,0],s=[0,0];for(const{key:a,data:o}of n)switch(a){case"M":s=[o[0],o[1]],i=[o[0],o[1]];break;case"L":r.push(...sh(s[0],s[1],o[0],o[1],t)),s=[o[0],o[1]];break;case"C":{const[l,c,u,d,h,m]=o;r.push(...kFe(l,c,u,d,h,m,s,t)),s=[h,m];break}case"Z":r.push(...sh(s[0],s[1],i[0],i[1],t)),s=[i[0],i[1]]}return{type:"path",ops:r}}function rM(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+Kn(i,t),r[0][1]+Kn(i,t)]});for(let a=1;a<s;a++)n.push({op:"lineTo",data:[r[a][0]+Kn(i,t),r[a][1]+Kn(i,t)]})}}return{type:"fillPath",ops:n}}function vg(e,t){return function(n,r){let i=n.fillStyle||"hachure";if(!oo[i])switch(i){case"zigzag":oo[i]||(oo[i]=new gFe(r));break;case"cross-hatch":oo[i]||(oo[i]=new yFe(r));break;case"dots":oo[i]||(oo[i]=new bFe(r));break;case"dashed":oo[i]||(oo[i]=new vFe(r));break;case"zigzag-line":oo[i]||(oo[i]=new xFe(r));break;default:i="hachure",oo[i]||(oo[i]=new OD(r))}return oo[i]}(t,SFe).fillPolygons(e,t)}function D7(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function Yee(e){return e.randomizer||(e.randomizer=new wFe(e.seed||0)),e.randomizer.next()}function tk(e,t,n,r=1){return n.roughness*r*(Yee(n)*(t-e)+e)}function Kn(e,t,n=1){return tk(-e,e,t,n)}function sh(e,t,n,r,i,s=!1){const a=s?i.disableMultiStrokeFill:i.disableMultiStroke,o=q4(e,t,n,r,i,!0,!1);if(a)return o;const l=q4(e,t,n,r,i,!0,!0);return o.concat(l)}function q4(e,t,n,r,i,s,a){const o=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(o);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let u=i.maxRandomnessOffset||0;u*u*100>o&&(u=l/10);const d=u/2,h=.2+.2*Yee(i);let m=i.bowing*i.maxRandomnessOffset*(r-t)/200,y=i.bowing*i.maxRandomnessOffset*(e-n)/200;m=Kn(m,i,c),y=Kn(y,i,c);const b=[],v=()=>Kn(d,i,c),x=()=>Kn(u,i,c),_=i.preserveVertices;return a?b.push({op:"move",data:[e+(_?0:v()),t+(_?0:v())]}):b.push({op:"move",data:[e+(_?0:Kn(u,i,c)),t+(_?0:Kn(u,i,c))]}),a?b.push({op:"bcurveTo",data:[m+e+(n-e)*h+v(),y+t+(r-t)*h+v(),m+e+2*(n-e)*h+v(),y+t+2*(r-t)*h+v(),n+(_?0:v()),r+(_?0:v())]}):b.push({op:"bcurveTo",data:[m+e+(n-e)*h+x(),y+t+(r-t)*h+x(),m+e+2*(n-e)*h+x(),y+t+2*(r-t)*h+x(),n+(_?0:x()),r+(_?0:x())]}),b}function hS(e,t,n){if(!e.length)return[];const r=[];r.push([e[0][0]+Kn(t,n),e[0][1]+Kn(t,n)]),r.push([e[0][0]+Kn(t,n),e[0][1]+Kn(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+Kn(t,n),e[i][1]+Kn(t,n)]),i===e.length-1&&r.push([e[i][0]+Kn(t,n),e[i][1]+Kn(t,n)]);return nk(r,null,n)}function nk(e,t,n){const r=e.length,i=[];if(r>3){const s=[],a=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let o=1;o+2<r;o++){const l=e[o];s[0]=[l[0],l[1]],s[1]=[l[0]+(a*e[o+1][0]-a*e[o-1][0])/6,l[1]+(a*e[o+1][1]-a*e[o-1][1])/6],s[2]=[e[o+1][0]+(a*e[o][0]-a*e[o+2][0])/6,e[o+1][1]+(a*e[o][1]-a*e[o+2][1])/6],s[3]=[e[o+1][0],e[o+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...q4(e[0][0],e[0][1],e[1][0],e[1][1],n,!0,!0));return i}function F7(e,t,n,r,i,s,a,o){const l=[],c=[];if(o.roughness===0){e/=4,c.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let u=0;u<=2*Math.PI;u+=e){const d=[t+r*Math.cos(u),n+i*Math.sin(u)];l.push(d),c.push(d)}c.push([t+r*Math.cos(0),n+i*Math.sin(0)]),c.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const u=Kn(.5,o)-Math.PI/2;c.push([Kn(s,o)+t+.9*r*Math.cos(u-e),Kn(s,o)+n+.9*i*Math.sin(u-e)]);const d=2*Math.PI+u-.01;for(let h=u;h<d;h+=e){const m=[Kn(s,o)+t+r*Math.cos(h),Kn(s,o)+n+i*Math.sin(h)];l.push(m),c.push(m)}c.push([Kn(s,o)+t+r*Math.cos(u+2*Math.PI+.5*a),Kn(s,o)+n+i*Math.sin(u+2*Math.PI+.5*a)]),c.push([Kn(s,o)+t+.98*r*Math.cos(u+a),Kn(s,o)+n+.98*i*Math.sin(u+a)]),c.push([Kn(s,o)+t+.9*r*Math.cos(u+.5*a),Kn(s,o)+n+.9*i*Math.sin(u+.5*a)])}return[c,l]}function L7(e,t,n,r,i,s,a,o,l){const c=s+Kn(.1,l),u=[];u.push([Kn(o,l)+t+.9*r*Math.cos(c-e),Kn(o,l)+n+.9*i*Math.sin(c-e)]);for(let d=c;d<=a;d+=e)u.push([Kn(o,l)+t+r*Math.cos(d),Kn(o,l)+n+i*Math.sin(d)]);return u.push([t+r*Math.cos(a),n+i*Math.sin(a)]),u.push([t+r*Math.cos(a),n+i*Math.sin(a)]),nk(u,null,l)}function kFe(e,t,n,r,i,s,a,o){const l=[],c=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3];let u=[0,0];const d=o.disableMultiStroke?1:2,h=o.preserveVertices;for(let m=0;m<d;m++)m===0?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+(h?0:Kn(c[0],o)),a[1]+(h?0:Kn(c[0],o))]}),u=h?[i,s]:[i+Kn(c[m],o),s+Kn(c[m],o)],l.push({op:"bcurveTo",data:[e+Kn(c[m],o),t+Kn(c[m],o),n+Kn(c[m],o),r+Kn(c[m],o),u[0],u[1]]});return l}function uv(e){return[...e]}function B7(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(uv(e[0]),uv(e[1]),uv(e[2]),uv(e[2]));else{const i=[];i.push(e[0],e[0]);for(let o=1;o<e.length;o++)i.push(e[o]),o===e.length-1&&i.push(e[o]);const s=[],a=1-t;r.push(uv(i[0]));for(let o=1;o+2<i.length;o++){const l=i[o];s[0]=[l[0],l[1]],s[1]=[l[0]+(a*i[o+1][0]-a*i[o-1][0])/6,l[1]+(a*i[o+1][1]-a*i[o-1][1])/6],s[2]=[i[o+1][0]+(a*i[o][0]-a*i[o+2][0])/6,i[o+1][1]+(a*i[o][1]-a*i[o+2][1])/6],s[3]=[i[o+1][0],i[o+1][1]],r.push(s[1],s[2],s[3])}}return r}function a2(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function EFe(e,t,n){const r=a2(t,n);if(r===0)return a2(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),a2(e,cp(t,n,i))}function cp(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function V4(e,t,n,r){const i=r||[];if(function(o,l){const c=o[l+0],u=o[l+1],d=o[l+2],h=o[l+3];let m=3*u[0]-2*c[0]-h[0];m*=m;let y=3*u[1]-2*c[1]-h[1];y*=y;let b=3*d[0]-2*h[0]-c[0];b*=b;let v=3*d[1]-2*h[1]-c[1];return v*=v,m<b&&(m=b),y<v&&(y=v),m+y}(e,t)<n){const o=e[t+0];i.length?(s=i[i.length-1],a=o,Math.sqrt(a2(s,a))>1&&i.push(o)):i.push(o),i.push(e[t+3])}else{const l=e[t+0],c=e[t+1],u=e[t+2],d=e[t+3],h=cp(l,c,.5),m=cp(c,u,.5),y=cp(u,d,.5),b=cp(h,m,.5),v=cp(m,y,.5),x=cp(b,v,.5);V4([l,h,b,x],0,n,i),V4([x,v,y,d],0,n,i)}var s,a;return i}function TFe(e,t){return rk(e,0,e.length,t)}function rk(e,t,n,r,i){const s=i||[],a=e[t],o=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=EFe(e[u],a,o);d>l&&(l=d,c=u)}return Math.sqrt(l)>r?(rk(e,t,c+1,r,s),rk(e,c,n,r,s)):(s.length||s.push(a),s.push(o)),s}function iM(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++)V4(e,3*s,t,r);return n&&n>0?rk(r,0,r.length,n):r}const Bo="none";class ik{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,s){const a=this._o(s);return this._d("line",[Gee(t,n,r,i,a)],a)}rectangle(t,n,r,i,s){const a=this._o(s),o=[],l=CFe(t,n,r,i,a);if(a.fill){const c=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];a.fillStyle==="solid"?o.push(rM([c],a)):o.push(vg([c],a))}return a.stroke!==Bo&&o.push(l),this._d("rectangle",o,a)}ellipse(t,n,r,i,s){const a=this._o(s),o=[],l=Kee(r,i,a),c=U4(t,n,a,l);if(a.fill)if(a.fillStyle==="solid"){const u=U4(t,n,a,l).opset;u.type="fillPath",o.push(u)}else o.push(vg([c.estimatedPoints],a));return a.stroke!==Bo&&o.push(c.opset),this._d("ellipse",o,a)}circle(t,n,r,i){const s=this.ellipse(t,n,r,r,i);return s.shape="circle",s}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[s2(t,!1,r)],r)}arc(t,n,r,i,s,a,o=!1,l){const c=this._o(l),u=[],d=P7(t,n,r,i,s,a,o,!0,c);if(o&&c.fill)if(c.fillStyle==="solid"){const h=Object.assign({},c);h.disableMultiStroke=!0;const m=P7(t,n,r,i,s,a,!0,!1,h);m.type="fillPath",u.push(m)}else u.push(function(h,m,y,b,v,x,_){const S=h,C=m;let E=Math.abs(y/2),A=Math.abs(b/2);E+=Kn(.01*E,_),A+=Kn(.01*A,_);let R=v,N=x;for(;R<0;)R+=2*Math.PI,N+=2*Math.PI;N-R>2*Math.PI&&(R=0,N=2*Math.PI);const M=(N-R)/_.curveStepCount,P=[];for(let L=R;L<=N;L+=M)P.push([S+E*Math.cos(L),C+A*Math.sin(L)]);return P.push([S+E*Math.cos(N),C+A*Math.sin(N)]),P.push([S,C]),vg([P],_)}(t,n,r,i,s,a,c));return c.stroke!==Bo&&u.push(d),this._d("arc",u,c)}curve(t,n){const r=this._o(n),i=[],s=j7(t,r);if(r.fill&&r.fill!==Bo)if(r.fillStyle==="solid"){const a=j7(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(a.ops)})}else{const a=[],o=t;if(o.length){const l=typeof o[0][0]=="number"?[o]:o;for(const c of l)c.length<3?a.push(...c):c.length===3?a.push(...iM(B7([c[0],c[0],c[1],c[2]]),10,(1+r.roughness)/2)):a.push(...iM(B7(c),10,(1+r.roughness)/2))}a.length&&i.push(vg([a],r))}return r.stroke!==Bo&&i.push(s),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],s=s2(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(rM([t],r)):i.push(vg([t],r))),r.stroke!==Bo&&i.push(s),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==Bo,a=r.stroke!==Bo,o=!!(r.simplification&&r.simplification<1),l=function(u,d,h){const m=Hee(Vee(DD(u))),y=[];let b=[],v=[0,0],x=[];const _=()=>{x.length>=4&&b.push(...iM(x,d)),x=[]},S=()=>{_(),b.length&&(y.push(b),b=[])};for(const{key:E,data:A}of m)switch(E){case"M":S(),v=[A[0],A[1]],b.push(v);break;case"L":_(),b.push([A[0],A[1]]);break;case"C":if(!x.length){const R=b.length?b[b.length-1]:v;x.push([R[0],R[1]])}x.push([A[0],A[1]]),x.push([A[2],A[3]]),x.push([A[4],A[5]]);break;case"Z":_(),b.push([v[0],v[1]])}if(S(),!h)return y;const C=[];for(const E of y){const A=TFe(E,h);A.length&&C.push(A)}return C}(t,1,o?4-4*(r.simplification||1):(1+r.roughness)/2),c=O7(t,r);if(s)if(r.fillStyle==="solid")if(l.length===1){const u=O7(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else i.push(rM(l,r));else i.push(vg(l,r));return a&&(o?l.forEach(u=>{i.push(s2(u,!1,r))}):i.push(c)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const s=typeof n=="number"&&n>=0?i.data.map(a=>+a.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const s of n){let a=null;switch(s.type){case"path":a={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:Bo};break;case"fillPath":a={d:this.opsToPath(s),stroke:Bo,strokeWidth:0,fill:r.fill||Bo};break;case"fillSketch":a=this.fillSketch(s,r)}a&&i.push(a)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Bo,strokeWidth:r,fill:Bo}}_mergedShape(t){return t.filter((n,r)=>r===0||n.op!=="move")}}class AFe{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new ik(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const a of n)switch(a.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,a,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const o=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,a,s,o),i.restore();break}case"fillSketch":this.fillSketch(i,a,r)}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const s of n.ops){const a=typeof r=="number"&&r>=0?s.data.map(o=>+o.toFixed(r)):s.data;switch(s.op){case"move":t.moveTo(a[0],a[1]);break;case"bcurveTo":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"lineTo":t.lineTo(a[0],a[1])}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,s){const a=this.gen.line(t,n,r,i,s);return this.draw(a),a}rectangle(t,n,r,i,s){const a=this.gen.rectangle(t,n,r,i,s);return this.draw(a),a}ellipse(t,n,r,i,s){const a=this.gen.ellipse(t,n,r,i,s);return this.draw(a),a}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s),s}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,s,a,o=!1,l){const c=this.gen.arc(t,n,r,i,s,a,o,l);return this.draw(c),c}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const pS="http://www.w3.org/2000/svg";class RFe{constructor(t,n){this.svg=t,this.gen=new ik(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(pS,"g"),a=t.options.fixedDecimalPlaceDigits;for(const o of n){let l=null;switch(o.type){case"path":l=i.createElementNS(pS,"path"),l.setAttribute("d",this.opsToPath(o,a)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":l=i.createElementNS(pS,"path"),l.setAttribute("d",this.opsToPath(o,a)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(i,o,r)}l&&s.appendChild(l)}return s}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=t.createElementNS(pS,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,s){const a=this.gen.line(t,n,r,i,s);return this.draw(a)}rectangle(t,n,r,i,s){const a=this.gen.rectangle(t,n,r,i,s);return this.draw(a)}ellipse(t,n,r,i,s){const a=this.gen.ellipse(t,n,r,i,s);return this.draw(a)}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,s,a,o=!1,l){const c=this.gen.arc(t,n,r,i,s,a,o,l);return this.draw(c)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}var Sn={canvas:(e,t)=>new AFe(e,t),svg:(e,t)=>new RFe(e,t),generator:e=>new ik(e),newSeed:()=>ik.newSeed()},or=re(async(e,t,n)=>{var d,h;let r;const i=t.useHtmlLabels||Os((d=ni())==null?void 0:d.htmlLabels);n?r=n:r="node default";const s=e.insert("g").attr("class",r).attr("id",t.domId||t.id),a=s.insert("g").attr("class","label").attr("style",Ga(t.labelStyle));let o;t.label===void 0?o="":o=typeof t.label=="string"?t.label:t.label[0];const l=await kh(a,Vp(ym(o),ni()),{useHtmlLabels:i,width:t.width||((h=ni().flowchart)==null?void 0:h.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let c=l.getBBox();const u=((t==null?void 0:t.padding)??0)/2;if(i){const m=l.children[0],y=qr(l),b=m.getElementsByTagName("img");if(b){const v=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(x=>new Promise(_=>{function S(){if(x.style.display="flex",x.style.flexDirection="column",v){const C=ni().fontSize?ni().fontSize:window.getComputedStyle(document.body).fontSize,E=5,[A=dX.fontSize]=XE(C),R=A*E+"px";x.style.minWidth=R,x.style.maxWidth=R}else x.style.width="100%";_(x)}re(S,"setupImage"),setTimeout(()=>{x.complete&&S()}),x.addEventListener("error",S),x.addEventListener("load",S)})))}c=m.getBoundingClientRect(),y.attr("width",c.width),y.attr("height",c.height)}return i?a.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):a.attr("transform","translate(0, "+-c.height/2+")"),t.centerLabel&&a.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),a.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:u,label:a}},"labelHelper"),sM=re(async(e,t,n)=>{var l,c,u,d,h,m;const r=n.useHtmlLabels||Os((c=(l=ni())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),i=e.insert("g").attr("class","label").attr("style",n.labelStyle||""),s=await kh(i,Vp(ym(t),ni()),{useHtmlLabels:r,width:n.width||((d=(u=ni())==null?void 0:u.flowchart)==null?void 0:d.wrappingWidth),style:n.labelStyle,addSvgBackground:!!n.icon||!!n.img});let a=s.getBBox();const o=n.padding/2;if(Os((m=(h=ni())==null?void 0:h.flowchart)==null?void 0:m.htmlLabels)){const y=s.children[0],b=qr(s);a=y.getBoundingClientRect(),b.attr("width",a.width),b.attr("height",a.height)}return r?i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"):i.attr("transform","translate(0, "+-a.height/2+")"),n.centerLabel&&i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:e,bbox:a,halfPadding:o,label:i}},"insertLabel"),An=re((e,t)=>{const n=t.node().getBBox();e.width=n.width,e.height=n.height},"updateNodeBounds"),Zn=re((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function Wr(e){const t=e.map((n,r)=>`${r===0?"M":"L"}${n.x},${n.y}`);return t.push("Z"),t.join(" ")}re(Wr,"createPathFromPoints");function ah(e,t,n,r,i,s){const a=[],l=n-e,c=r-t,u=l/s,d=2*Math.PI/u,h=t+c/2;for(let m=0;m<=50;m++){const y=m/50,b=e+y*l,v=h+i*Math.sin(d*(b-e));a.push({x:b,y:v})}return a}re(ah,"generateFullSineWavePoints");function FD(e,t,n,r,i,s){const a=[],o=i*Math.PI/180,u=(s*Math.PI/180-o)/(r-1);for(let d=0;d<r;d++){const h=o+d*u,m=e+n*Math.cos(h),y=t+n*Math.sin(h);a.push({x:-m,y:-y})}return a}re(FD,"generateCirclePoints");var IFe=re((e,t)=>{var n=e.x,r=e.y,i=t.x-n,s=t.y-r,a=e.width/2,o=e.height/2,l,c;return Math.abs(s)*a>Math.abs(i)*o?(s<0&&(o=-o),l=s===0?0:o*i/s,c=o):(i<0&&(a=-a),l=a,c=i===0?0:a*s/i),{x:n+l,y:r+c}},"intersectRect"),_y=IFe;function Zee(e,t){t&&e.attr("style",t)}re(Zee,"applyStyle");async function Xee(e){const t=qr(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=t.append("xhtml:div");let r=e.label;e.label&&D0(e.label)&&(r=await qO(e.label.replace(vy.lineBreakRegex,`
`),ni()));const i=e.isNode?"nodeLabel":"edgeLabel";return n.html('<span class="'+i+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+r+"</span>"),Zee(n,e.labelStyle),n.style("display","inline-block"),n.style("padding-right","1px"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}re(Xee,"addHtmlLabel");var NFe=re(async(e,t,n,r)=>{let i=e||"";if(typeof i=="object"&&(i=i[0]),Os(ni().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),$t.info("vertexText"+i);const s={isNode:r,label:ym(i).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await Xee(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",t.replace("color:","fill:"));let a=[];typeof i=="string"?a=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?a=i:a=[];for(const o of a){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),n?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o.trim(),s.appendChild(l)}return s}},"createLabel"),_p=NFe,Pd=re((e,t,n,r,i)=>["M",e+i,t,"H",e+n-i,"A",i,i,0,0,1,e+n,t+i,"V",t+r-i,"A",i,i,0,0,1,e+n-i,t+r,"H",e+i,"A",i,i,0,0,1,e,t+r-i,"V",t+i,"A",i,i,0,0,1,e+i,t,"Z"].join(" "),"createRoundedRectPathD"),MFe=re(e=>{const{handDrawnSeed:t}=ni();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),Sy=re(e=>{const t=jFe([...e.cssCompiledStyles||[],...e.cssStyles||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),jFe=re(e=>{const t=new Map;return e.forEach(n=>{const[r,i]=n.split(":");t.set(r.trim(),i==null?void 0:i.trim())}),t},"styles2Map"),Jee=re(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),Rn=re(e=>{const{stylesArray:t}=Sy(e),n=[],r=[],i=[],s=[];return t.forEach(a=>{const o=a[0];Jee(o)?n.push(a.join(":")+" !important"):(r.push(a.join(":")+" !important"),o.includes("stroke")&&i.push(a.join(":")+" !important"),o==="fill"&&s.push(a.join(":")+" !important"))}),{labelStyles:n.join(";"),nodeStyles:r.join(";"),stylesArray:t,borderStyles:i,backgroundStyles:s}},"styles2String"),kn=re((e,t)=>{var l;const{themeVariables:n,handDrawnSeed:r}=ni(),{nodeBorder:i,mainBkg:s}=n,{stylesMap:a}=Sy(e);return Object.assign({roughness:.7,fill:a.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:a.get("stroke")||i,seed:r,strokeWidth:((l=a.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0]},t)},"userNodeOverrides"),Qee=re(async(e,t)=>{$t.info("Creating subgraph rect for ",t.id,t);const n=ni(),{themeVariables:r,handDrawnSeed:i}=n,{clusterBkg:s,clusterBorder:a}=r,{labelStyles:o,nodeStyles:l,borderStyles:c,backgroundStyles:u}=Rn(t),d=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),h=Os(n.flowchart.htmlLabels),m=d.insert("g").attr("class","cluster-label "),y=await kh(m,t.label,{style:t.labelStyle,useHtmlLabels:h,isNode:!0});let b=y.getBBox();if(Os(n.flowchart.htmlLabels)){const R=y.children[0],N=qr(y);b=R.getBoundingClientRect(),N.attr("width",b.width),N.attr("height",b.height)}const v=t.width<=b.width+t.padding?b.width+t.padding:t.width;t.width<=b.width+t.padding?t.diff=(v-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height,_=t.x-v/2,S=t.y-x/2;$t.trace("Data ",t,JSON.stringify(t));let C;if(t.look==="handDrawn"){const R=Sn.svg(d),N=kn(t,{roughness:.7,fill:s,stroke:a,fillWeight:3,seed:i}),M=R.path(Pd(_,S,v,x,0),N);C=d.insert(()=>($t.debug("Rough node insert CXC",M),M),":first-child"),C.select("path:nth-child(2)").attr("style",c.join(";")),C.select("path").attr("style",u.join(";").replace("fill","stroke"))}else C=d.insert("rect",":first-child"),C.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",_).attr("y",S).attr("width",v).attr("height",x);const{subGraphTitleTopMargin:E}=nD(n);if(m.attr("transform",`translate(${t.x-b.width/2}, ${t.y-t.height/2+E})`),o){const R=m.select("span");R&&R.attr("style",o)}const A=C.node().getBBox();return t.offsetX=0,t.width=A.width,t.height=A.height,t.offsetY=b.height-t.padding/2,t.intersect=function(R){return _y(t,R)},{cluster:d,labelBBox:b}},"rect"),PFe=re((e,t)=>{const n=e.insert("g").attr("class","note-cluster").attr("id",t.id),r=n.insert("rect",":first-child"),i=0*t.padding,s=i/2;r.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-s).attr("y",t.y-t.height/2-s).attr("width",t.width+i).attr("height",t.height+i).attr("fill","none");const a=r.node().getBBox();return t.width=a.width,t.height=a.height,t.intersect=function(o){return _y(t,o)},{cluster:n,labelBBox:{width:0,height:0}}},"noteGroup"),OFe=re(async(e,t)=>{const n=ni(),{themeVariables:r,handDrawnSeed:i}=n,{altBackground:s,compositeBackground:a,compositeTitleBackground:o,nodeBorder:l}=r,c=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),u=c.insert("g",":first-child"),d=c.insert("g").attr("class","cluster-label");let h=c.append("rect");const m=d.node().appendChild(await _p(t.label,t.labelStyle,void 0,!0));let y=m.getBBox();if(Os(n.flowchart.htmlLabels)){const M=m.children[0],P=qr(m);y=M.getBoundingClientRect(),P.attr("width",y.width),P.attr("height",y.height)}const b=0*t.padding,v=b/2,x=(t.width<=y.width+t.padding?y.width+t.padding:t.width)+b;t.width<=y.width+t.padding?t.diff=(x-t.width)/2-t.padding:t.diff=-t.padding;const _=t.height+b,S=t.height+b-y.height-6,C=t.x-x/2,E=t.y-_/2;t.width=x;const A=t.y-t.height/2-v+y.height+2;let R;if(t.look==="handDrawn"){const M=t.cssClasses.includes("statediagram-cluster-alt"),P=Sn.svg(c),L=t.rx||t.ry?P.path(Pd(C,E,x,_,10),{roughness:.7,fill:o,fillStyle:"solid",stroke:l,seed:i}):P.rectangle(C,E,x,_,{seed:i});R=c.insert(()=>L,":first-child");const O=P.rectangle(C,A,x,S,{fill:M?s:a,fillStyle:M?"hachure":"solid",stroke:l,seed:i});R=c.insert(()=>L,":first-child"),h=c.insert(()=>O)}else R=u.insert("rect",":first-child"),R.attr("class","outer").attr("x",C).attr("y",E).attr("width",x).attr("height",_).attr("data-look",t.look),h.attr("class","inner").attr("x",C).attr("y",A).attr("width",x).attr("height",S);d.attr("transform",`translate(${t.x-y.width/2}, ${E+1-(Os(n.flowchart.htmlLabels)?0:3)})`);const N=R.node().getBBox();return t.height=N.height,t.offsetX=0,t.offsetY=y.height-t.padding/2,t.labelBBox=y,t.intersect=function(M){return _y(t,M)},{cluster:c,labelBBox:y}},"roundedWithTitle"),DFe=re(async(e,t)=>{$t.info("Creating subgraph rect for ",t.id,t);const n=ni(),{themeVariables:r,handDrawnSeed:i}=n,{clusterBkg:s,clusterBorder:a}=r,{labelStyles:o,nodeStyles:l,borderStyles:c,backgroundStyles:u}=Rn(t),d=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),h=Os(n.flowchart.htmlLabels),m=d.insert("g").attr("class","cluster-label "),y=await kh(m,t.label,{style:t.labelStyle,useHtmlLabels:h,isNode:!0,width:t.width});let b=y.getBBox();if(Os(n.flowchart.htmlLabels)){const R=y.children[0],N=qr(y);b=R.getBoundingClientRect(),N.attr("width",b.width),N.attr("height",b.height)}const v=t.width<=b.width+t.padding?b.width+t.padding:t.width;t.width<=b.width+t.padding?t.diff=(v-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height,_=t.x-v/2,S=t.y-x/2;$t.trace("Data ",t,JSON.stringify(t));let C;if(t.look==="handDrawn"){const R=Sn.svg(d),N=kn(t,{roughness:.7,fill:s,stroke:a,fillWeight:4,seed:i}),M=R.path(Pd(_,S,v,x,t.rx),N);C=d.insert(()=>($t.debug("Rough node insert CXC",M),M),":first-child"),C.select("path:nth-child(2)").attr("style",c.join(";")),C.select("path").attr("style",u.join(";").replace("fill","stroke"))}else C=d.insert("rect",":first-child"),C.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",_).attr("y",S).attr("width",v).attr("height",x);const{subGraphTitleTopMargin:E}=nD(n);if(m.attr("transform",`translate(${t.x-b.width/2}, ${t.y-t.height/2+E})`),o){const R=m.select("span");R&&R.attr("style",o)}const A=C.node().getBBox();return t.offsetX=0,t.width=A.width,t.height=A.height,t.offsetY=b.height-t.padding/2,t.intersect=function(R){return _y(t,R)},{cluster:d,labelBBox:b}},"kanbanSection"),FFe=re((e,t)=>{const n=ni(),{themeVariables:r,handDrawnSeed:i}=n,{nodeBorder:s}=r,a=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),o=a.insert("g",":first-child"),l=0*t.padding,c=t.width+l;t.diff=-t.padding;const u=t.height+l,d=t.x-c/2,h=t.y-u/2;t.width=c;let m;if(t.look==="handDrawn"){const v=Sn.svg(a).rectangle(d,h,c,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:i});m=a.insert(()=>v,":first-child")}else m=o.insert("rect",":first-child"),m.attr("class","divider").attr("x",d).attr("y",h).attr("width",c).attr("height",u).attr("data-look",t.look);const y=m.node().getBBox();return t.height=y.height,t.offsetX=0,t.offsetY=0,t.intersect=function(b){return _y(t,b)},{cluster:a,labelBBox:{}}},"divider"),LFe=Qee,BFe={rect:Qee,squareRect:LFe,roundedWithTitle:OFe,noteGroup:PFe,divider:FFe,kanbanSection:DFe},ete=new Map,$Fe=re(async(e,t)=>{const n=t.shape||"rect",r=await BFe[n](e,t);return ete.set(t.id,r),r},"insertCluster"),elt=re(()=>{ete=new Map},"clear");function tte(e,t){return e.intersect(t)}re(tte,"intersectNode");var zFe=tte;function nte(e,t,n,r){var i=e.x,s=e.y,a=i-r.x,o=s-r.y,l=Math.sqrt(t*t*o*o+n*n*a*a),c=Math.abs(t*n*a/l);r.x<i&&(c=-c);var u=Math.abs(t*n*o/l);return r.y<s&&(u=-u),{x:i+c,y:s+u}}re(nte,"intersectEllipse");var rte=nte;function ite(e,t,n){return rte(e,t,t,n)}re(ite,"intersectCircle");var UFe=ite;function ste(e,t,n,r){var i,s,a,o,l,c,u,d,h,m,y,b,v,x,_;if(i=t.y-e.y,a=e.x-t.x,l=t.x*e.y-e.x*t.y,h=i*n.x+a*n.y+l,m=i*r.x+a*r.y+l,!(h!==0&&m!==0&&H4(h,m))&&(s=r.y-n.y,o=n.x-r.x,c=r.x*n.y-n.x*r.y,u=s*e.x+o*e.y+c,d=s*t.x+o*t.y+c,!(u!==0&&d!==0&&H4(u,d))&&(y=i*o-s*a,y!==0)))return b=Math.abs(y/2),v=a*c-o*l,x=v<0?(v-b)/y:(v+b)/y,v=s*l-i*c,_=v<0?(v-b)/y:(v+b)/y,{x,y:_}}re(ste,"intersectLine");function H4(e,t){return e*t>0}re(H4,"sameSign");var qFe=ste;function ate(e,t,n){let r=e.x,i=e.y,s=[],a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(u){a=Math.min(a,u.x),o=Math.min(o,u.y)}):(a=Math.min(a,t.x),o=Math.min(o,t.y));let l=r-e.width/2-a,c=i-e.height/2-o;for(let u=0;u<t.length;u++){let d=t[u],h=t[u<t.length-1?u+1:0],m=qFe(e,n,{x:l+d.x,y:c+d.y},{x:l+h.x,y:c+h.y});m&&s.push(m)}return s.length?(s.length>1&&s.sort(function(u,d){let h=u.x-n.x,m=u.y-n.y,y=Math.sqrt(h*h+m*m),b=d.x-n.x,v=d.y-n.y,x=Math.sqrt(b*b+v*v);return y<x?-1:y===x?0:1}),s[0]):e}re(ate,"intersectPolygon");var VFe=ate,wn={node:zFe,circle:UFe,ellipse:rte,polygon:VFe,rect:_y};function ote(e,t){const{labelStyles:n}=Rn(t);t.labelStyle=n;const r=Zn(t);let i=r;r||(i="anchor");const s=e.insert("g").attr("class",i).attr("id",t.domId||t.id),a=1,{cssStyles:o}=t,l=Sn.svg(s),c=kn(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(c.roughness=0);const u=l.circle(0,0,a*2,c),d=s.insert(()=>u,":first-child");return d.attr("class","anchor").attr("style",Ga(o)),An(t,d),t.intersect=function(h){return $t.info("Circle intersect",t,a,h),wn.circle(t,a,h)},s}re(ote,"anchor");function W4(e,t,n,r,i,s,a){const l=(e+n)/2,c=(t+r)/2,u=Math.atan2(r-t,n-e),d=(n-e)/2,h=(r-t)/2,m=d/i,y=h/s,b=Math.sqrt(m**2+y**2);if(b>1)throw new Error("The given radii are too small to create an arc between the points.");const v=Math.sqrt(1-b**2),x=l+v*s*Math.sin(u)*(a?-1:1),_=c-v*i*Math.cos(u)*(a?-1:1),S=Math.atan2((t-_)/s,(e-x)/i);let E=Math.atan2((r-_)/s,(n-x)/i)-S;a&&E<0&&(E+=2*Math.PI),!a&&E>0&&(E-=2*Math.PI);const A=[];for(let R=0;R<20;R++){const N=R/19,M=S+N*E,P=x+i*Math.cos(M),L=_+s*Math.sin(M);A.push({x:P,y:L})}return A}re(W4,"generateArcPoints");async function lte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=s.width+t.padding+20,o=s.height+t.padding,l=o/2,c=l/(2.5+o/50),{cssStyles:u}=t,d=[{x:a/2,y:-o/2},{x:-a/2,y:-o/2},...W4(-a/2,-o/2,-a/2,o/2,c,l,!1),{x:a/2,y:o/2},...W4(a/2,o/2,a/2,-o/2,c,l,!0)],h=Sn.svg(i),m=kn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=Wr(d),b=h.path(y,m),v=i.insert(()=>b,":first-child");return v.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(${c/2}, 0)`),An(t,v),t.intersect=function(x){return wn.polygon(t,d,x)},i}re(lte,"bowTieRect");function Od(e,t,n,r){return e.insert("polygon",":first-child").attr("points",r.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+n/2+")")}re(Od,"insertPolygonShape");async function cte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=s.height+t.padding,o=12,l=s.width+t.padding+o,c=0,u=l,d=-a,h=0,m=[{x:c+o,y:d},{x:u,y:d},{x:u,y:h},{x:c,y:h},{x:c,y:d+o},{x:c+o,y:d}];let y;const{cssStyles:b}=t;if(t.look==="handDrawn"){const v=Sn.svg(i),x=kn(t,{}),_=Wr(m),S=v.path(_,x);y=i.insert(()=>S,":first-child").attr("transform",`translate(${-l/2}, ${a/2})`),b&&y.attr("style",b)}else y=Od(i,l,a,m);return r&&y.attr("style",r),An(t,y),t.intersect=function(v){return wn.polygon(t,m,v)},i}re(cte,"card");function ute(e,t){const{nodeStyles:n}=Rn(t);t.label="";const r=e.insert("g").attr("class",Zn(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,s=Math.max(28,t.width??0),a=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],o=Sn.svg(r),l=kn(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=Wr(a),u=o.path(c,l),d=r.insert(()=>u,":first-child");return i&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",i),n&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",n),t.width=28,t.height=28,t.intersect=function(h){return wn.polygon(t,a,h)},r}re(ute,"choice");async function dte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:a}=await or(e,t,Zn(t)),o=s.width/2+a;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=Sn.svg(i),d=kn(t,{}),h=u.circle(0,0,o*2,d);l=i.insert(()=>h,":first-child"),l.attr("class","basic label-container").attr("style",Ga(c))}else l=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",r).attr("r",o).attr("cx",0).attr("cy",0);return An(t,l),t.intersect=function(u){return $t.info("Circle intersect",t,o,u),wn.circle(t,o,u)},i}re(dte,"circle");function fte(e){const t=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4),r=e*2,i={x:r/2*t,y:r/2*n},s={x:-(r/2)*t,y:r/2*n},a={x:-(r/2)*t,y:-(r/2)*n},o={x:r/2*t,y:-(r/2)*n};return`M ${s.x},${s.y} L ${o.x},${o.y}
                   M ${i.x},${i.y} L ${a.x},${a.y}`}re(fte,"createLine");function hte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n,t.label="";const i=e.insert("g").attr("class",Zn(t)).attr("id",t.domId??t.id),s=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:a}=t,o=Sn.svg(i),l=kn(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=o.circle(0,0,s*2,l),u=fte(s),d=o.path(u,l),h=i.insert(()=>c,":first-child");return h.insert(()=>d),a&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",a),r&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",r),An(t,h),t.intersect=function(m){return $t.info("crossedCircle intersect",t,{radius:s,point:m}),wn.circle(t,s,m)},i}re(hte,"crossedCircle");function ed(e,t,n,r=100,i=0,s=180){const a=[],o=i*Math.PI/180,u=(s*Math.PI/180-o)/(r-1);for(let d=0;d<r;d++){const h=o+d*u,m=e+n*Math.cos(h),y=t+n*Math.sin(h);a.push({x:-m,y:-y})}return a}re(ed,"generateCirclePoints");async function pte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=t,d=[...ed(o/2,-l/2,c,30,-90,0),{x:-o/2-c,y:c},...ed(o/2+c*2,-c,c,20,-180,-270),...ed(o/2+c*2,c,c,20,-90,-180),{x:-o/2-c,y:-l/2},...ed(o/2,l/2,c,20,0,90)],h=[{x:o/2,y:-l/2-c},{x:-o/2,y:-l/2-c},...ed(o/2,-l/2,c,20,-90,0),{x:-o/2-c,y:-c},...ed(o/2+o*.1,-c,c,20,-180,-270),...ed(o/2+o*.1,c,c,20,-90,-180),{x:-o/2-c,y:l/2},...ed(o/2,l/2,c,20,0,90),{x:-o/2,y:l/2+c},{x:o/2,y:l/2+c}],m=Sn.svg(i),y=kn(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=Wr(d).replace("Z",""),x=m.path(v,y),_=Wr(h),S=m.path(_,{...y}),C=i.insert("g",":first-child");return C.insert(()=>S,":first-child").attr("stroke-opacity",0),C.insert(()=>x,":first-child"),C.attr("class","text"),u&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(${c}, 0)`),a.attr("transform",`translate(${-o/2+c-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),An(t,C),t.intersect=function(E){return wn.polygon(t,h,E)},i}re(pte,"curlyBraceLeft");function td(e,t,n,r=100,i=0,s=180){const a=[],o=i*Math.PI/180,u=(s*Math.PI/180-o)/(r-1);for(let d=0;d<r;d++){const h=o+d*u,m=e+n*Math.cos(h),y=t+n*Math.sin(h);a.push({x:m,y})}return a}re(td,"generateCirclePoints");async function mte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=t,d=[...td(o/2,-l/2,c,20,-90,0),{x:o/2+c,y:-c},...td(o/2+c*2,-c,c,20,-180,-270),...td(o/2+c*2,c,c,20,-90,-180),{x:o/2+c,y:l/2},...td(o/2,l/2,c,20,0,90)],h=[{x:-o/2,y:-l/2-c},{x:o/2,y:-l/2-c},...td(o/2,-l/2,c,20,-90,0),{x:o/2+c,y:-c},...td(o/2+c*2,-c,c,20,-180,-270),...td(o/2+c*2,c,c,20,-90,-180),{x:o/2+c,y:l/2},...td(o/2,l/2,c,20,0,90),{x:o/2,y:l/2+c},{x:-o/2,y:l/2+c}],m=Sn.svg(i),y=kn(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=Wr(d).replace("Z",""),x=m.path(v,y),_=Wr(h),S=m.path(_,{...y}),C=i.insert("g",":first-child");return C.insert(()=>S,":first-child").attr("stroke-opacity",0),C.insert(()=>x,":first-child"),C.attr("class","text"),u&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(${-c}, 0)`),a.attr("transform",`translate(${-o/2+(t.padding??0)/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),An(t,C),t.intersect=function(E){return wn.polygon(t,h,E)},i}re(mte,"curlyBraceRight");function la(e,t,n,r=100,i=0,s=180){const a=[],o=i*Math.PI/180,u=(s*Math.PI/180-o)/(r-1);for(let d=0;d<r;d++){const h=o+d*u,m=e+n*Math.cos(h),y=t+n*Math.sin(h);a.push({x:-m,y:-y})}return a}re(la,"generateCirclePoints");async function gte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=s.width+(t.padding??0),l=s.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=t,d=[...la(o/2,-l/2,c,30,-90,0),{x:-o/2-c,y:c},...la(o/2+c*2,-c,c,20,-180,-270),...la(o/2+c*2,c,c,20,-90,-180),{x:-o/2-c,y:-l/2},...la(o/2,l/2,c,20,0,90)],h=[...la(-o/2+c+c/2,-l/2,c,20,-90,-180),{x:o/2-c/2,y:c},...la(-o/2-c/2,-c,c,20,0,90),...la(-o/2-c/2,c,c,20,-90,0),{x:o/2-c/2,y:-c},...la(-o/2+c+c/2,l/2,c,30,-180,-270)],m=[{x:o/2,y:-l/2-c},{x:-o/2,y:-l/2-c},...la(o/2,-l/2,c,20,-90,0),{x:-o/2-c,y:-c},...la(o/2+c*2,-c,c,20,-180,-270),...la(o/2+c*2,c,c,20,-90,-180),{x:-o/2-c,y:l/2},...la(o/2,l/2,c,20,0,90),{x:-o/2,y:l/2+c},{x:o/2-c-c/2,y:l/2+c},...la(-o/2+c+c/2,-l/2,c,20,-90,-180),{x:o/2-c/2,y:c},...la(-o/2-c/2,-c,c,20,0,90),...la(-o/2-c/2,c,c,20,-90,0),{x:o/2-c/2,y:-c},...la(-o/2+c+c/2,l/2,c,30,-180,-270)],y=Sn.svg(i),b=kn(t,{fill:"none"});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=Wr(d).replace("Z",""),_=y.path(x,b),C=Wr(h).replace("Z",""),E=y.path(C,b),A=Wr(m),R=y.path(A,{...b}),N=i.insert("g",":first-child");return N.insert(()=>R,":first-child").attr("stroke-opacity",0),N.insert(()=>_,":first-child"),N.insert(()=>E,":first-child"),N.attr("class","text"),u&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",r),N.attr("transform",`translate(${c-c/4}, 0)`),a.attr("transform",`translate(${-o/2+(t.padding??0)/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)/2-(s.y-(s.top??0))})`),An(t,N),t.intersect=function(M){return wn.polygon(t,m,M)},i}re(gte,"curlyBraces");async function yte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=80,o=20,l=Math.max(a,(s.width+(t.padding??0)*2)*1.25,(t==null?void 0:t.width)??0),c=Math.max(o,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=c/2,{cssStyles:d}=t,h=Sn.svg(i),m=kn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=l,b=c,v=y-u,x=b/4,_=[{x:v,y:0},{x,y:0},{x:0,y:b/2},{x,y:b},{x:v,y:b},...FD(-v,-b/2,u,50,270,90)],S=Wr(_),C=h.path(S,m),E=i.insert(()=>C,":first-child");return E.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&E.selectChildren("path").attr("style",d),r&&t.look!=="handDrawn"&&E.selectChildren("path").attr("style",r),E.attr("transform",`translate(${-l/2}, ${-c/2})`),An(t,E),t.intersect=function(A){return wn.polygon(t,_,A)},i}re(yte,"curvedTrapezoid");var HFe=re((e,t,n,r,i,s)=>[`M${e},${t+s}`,`a${i},${s} 0,0,0 ${n},0`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`].join(" "),"createCylinderPathD"),WFe=re((e,t,n,r,i,s)=>[`M${e},${t+s}`,`M${e+n},${t+s}`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`].join(" "),"createOuterCylinderPathD"),GFe=re((e,t,n,r,i,s)=>[`M${e-n/2},${-r/2}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function bte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Math.max(s.width+t.padding,t.width??0),l=o/2,c=l/(2.5+o/50),u=Math.max(s.height+c+t.padding,t.height??0);let d;const{cssStyles:h}=t;if(t.look==="handDrawn"){const m=Sn.svg(i),y=WFe(0,0,o,u,l,c),b=GFe(0,c,o,u,l,c),v=m.path(y,kn(t,{})),x=m.path(b,kn(t,{fill:"none"}));d=i.insert(()=>x,":first-child"),d=i.insert(()=>v,":first-child"),d.attr("class","basic label-container"),h&&d.attr("style",h)}else{const m=HFe(0,0,o,u,l,c);d=i.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",Ga(h)).attr("style",r)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-o/2}, ${-(u/2+c)})`),An(t,d),a.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(t.padding??0)/1.5-(s.y-(s.top??0))})`),t.intersect=function(m){const y=wn.rect(t,m),b=y.x-(t.x??0);if(l!=0&&(Math.abs(b)<(t.width??0)/2||Math.abs(b)==(t.width??0)/2&&Math.abs(y.y-(t.y??0))>(t.height??0)/2-c)){let v=c*c*(1-b*b/(l*l));v>0&&(v=Math.sqrt(v)),v=c-v,m.y-(t.y??0)>0&&(v=-v),y.y+=v}return y},i}re(bte,"cylinder");async function vte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=s.width+t.padding,l=s.height+t.padding,c=l*.2,u=-o/2,d=-l/2-c/2,{cssStyles:h}=t,m=Sn.svg(i),y=kn(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:u,y:d+c},{x:-u,y:d+c},{x:-u,y:-d},{x:u,y:-d},{x:u,y:d},{x:-u,y:d},{x:-u,y:d+c}],v=m.polygon(b.map(_=>[_.x,_.y]),y),x=i.insert(()=>v,":first-child");return x.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",h),r&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",r),a.attr("transform",`translate(${u+(t.padding??0)/2-(s.x-(s.left??0))}, ${d+c+(t.padding??0)/2-(s.y-(s.top??0))})`),An(t,x),t.intersect=function(_){return wn.rect(t,_)},i}re(vte,"dividedRectangle");async function xte(e,t){var h,m;const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:a}=await or(e,t,Zn(t)),l=s.width/2+a+5,c=s.width/2+a;let u;const{cssStyles:d}=t;if(t.look==="handDrawn"){const y=Sn.svg(i),b=kn(t,{roughness:.2,strokeWidth:2.5}),v=kn(t,{roughness:.2,strokeWidth:1.5}),x=y.circle(0,0,l*2,b),_=y.circle(0,0,c*2,v);u=i.insert("g",":first-child"),u.attr("class",Ga(t.cssClasses)).attr("style",Ga(d)),(h=u.node())==null||h.appendChild(x),(m=u.node())==null||m.appendChild(_)}else{u=i.insert("g",":first-child");const y=u.insert("circle",":first-child"),b=u.insert("circle");u.attr("class","basic label-container").attr("style",r),y.attr("class","outer-circle").attr("style",r).attr("r",l).attr("cx",0).attr("cy",0),b.attr("class","inner-circle").attr("style",r).attr("r",c).attr("cx",0).attr("cy",0)}return An(t,u),t.intersect=function(y){return $t.info("DoubleCircle intersect",t,l,y),wn.circle(t,l,y)},i}re(xte,"doublecircle");function wte(e,t,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=Rn(t);t.label="",t.labelStyle=r;const s=e.insert("g").attr("class",Zn(t)).attr("id",t.domId??t.id),a=7,{cssStyles:o}=t,l=Sn.svg(s),{nodeBorder:c}=n,u=kn(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(u.roughness=0);const d=l.circle(0,0,a*2,u),h=s.insert(()=>d,":first-child");return h.selectAll("path").attr("style",`fill: ${c} !important;`),o&&o.length>0&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",o),i&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",i),An(t,h),t.intersect=function(m){return $t.info("filledCircle intersect",t,{radius:a,point:m}),wn.circle(t,a,m)},s}re(wte,"filledCircle");async function _te(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=s.width+(t.padding??0),l=o+s.height,c=o+s.height,u=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:d}=t,h=Sn.svg(i),m=kn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=Wr(u),b=h.path(y,m),v=i.insert(()=>b,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return d&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",d),r&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",r),t.width=o,t.height=l,An(t,v),a.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(t.padding??0)/2+(s.y-(s.top??0))})`),t.intersect=function(x){return $t.info("Triangle intersect",t,u,x),wn.polygon(t,u,x)},i}re(_te,"flippedTriangle");function Ste(e,t,{dir:n,config:{state:r,themeVariables:i}}){const{nodeStyles:s}=Rn(t);t.label="";const a=e.insert("g").attr("class",Zn(t)).attr("id",t.domId??t.id),{cssStyles:o}=t;let l=Math.max(70,(t==null?void 0:t.width)??0),c=Math.max(10,(t==null?void 0:t.height)??0);n==="LR"&&(l=Math.max(10,(t==null?void 0:t.width)??0),c=Math.max(70,(t==null?void 0:t.height)??0));const u=-1*l/2,d=-1*c/2,h=Sn.svg(a),m=kn(t,{stroke:i.lineColor,fill:i.lineColor});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=h.rectangle(u,d,l,c,m),b=a.insert(()=>y,":first-child");o&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",o),s&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",s),An(t,b);const v=(r==null?void 0:r.padding)??0;return t.width&&t.height&&(t.width+=v/2||0,t.height+=v/2||0),t.intersect=function(x){return wn.rect(t,x)},a}re(Ste,"forkJoin");async function Cte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const i=80,s=50,{shapeSvg:a,bbox:o}=await or(e,t,Zn(t)),l=Math.max(i,o.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s,o.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=c/2,{cssStyles:d}=t,h=Sn.svg(a),m=kn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-l/2,y:-c/2},{x:l/2-u,y:-c/2},...FD(-l/2+u,0,u,50,90,270),{x:l/2-u,y:c/2},{x:-l/2,y:c/2}],b=Wr(y),v=h.path(b,m),x=a.insert(()=>v,":first-child");return x.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),r&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",r),An(t,x),t.intersect=function(_){return $t.info("Pill intersect",t,{radius:u,point:_}),wn.polygon(t,y,_)},a}re(Cte,"halfRoundedRectangle");var KFe=re((e,t,n,r,i)=>[`M${e+i},${t}`,`L${e+n-i},${t}`,`L${e+n},${t-r/2}`,`L${e+n-i},${t-r}`,`L${e+i},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createHexagonPathD");async function kte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=4,o=s.height+t.padding,l=o/a,c=s.width+2*l+t.padding,u=[{x:l,y:0},{x:c-l,y:0},{x:c,y:-o/2},{x:c-l,y:-o},{x:l,y:-o},{x:0,y:-o/2}];let d;const{cssStyles:h}=t;if(t.look==="handDrawn"){const m=Sn.svg(i),y=kn(t,{}),b=KFe(0,0,c,o,l),v=m.path(b,y);d=i.insert(()=>v,":first-child").attr("transform",`translate(${-c/2}, ${o/2})`),h&&d.attr("style",h)}else d=Od(i,c,o,u);return r&&d.attr("style",r),t.width=c,t.height=o,An(t,d),t.intersect=function(m){return wn.polygon(t,u,m)},i}re(kte,"hexagon");async function Ete(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.label="",t.labelStyle=n;const{shapeSvg:i}=await or(e,t,Zn(t)),s=Math.max(30,(t==null?void 0:t.width)??0),a=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:o}=t,l=Sn.svg(i),c=kn(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const u=[{x:0,y:0},{x:s,y:0},{x:0,y:a},{x:s,y:a}],d=Wr(u),h=l.path(d,c),m=i.insert(()=>h,":first-child");return m.attr("class","basic label-container"),o&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",o),r&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",r),m.attr("transform",`translate(${-s/2}, ${-a/2})`),An(t,m),t.intersect=function(y){return $t.info("Pill intersect",t,{points:u}),wn.polygon(t,u,y)},i}re(Ete,"hourglass");async function Tte(e,t,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Rn(t);t.labelStyle=i;const s=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(s,a),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:c,bbox:u,label:d}=await or(e,t,"icon-shape default"),h=t.pos==="t",m=o,y=o,{nodeBorder:b}=n,{stylesMap:v}=Sy(t),x=-y/2,_=-m/2,S=t.label?8:0,C=Sn.svg(c),E=kn(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const A=C.rectangle(x,_,y,m,E),R=Math.max(y,u.width),N=m+u.height+S,M=C.rectangle(-R/2,-N/2,R,N,{...E,fill:"transparent",stroke:"none"}),P=c.insert(()=>A,":first-child"),L=c.insert(()=>M);if(t.icon){const O=c.append("g");O.html(`<g>${await $E(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const V=O.node().getBBox(),F=V.width,J=V.height,U=V.x,G=V.y;O.attr("transform",`translate(${-F/2-U},${h?u.height/2+S/2-J/2-G:-u.height/2-S/2-J/2-G})`),O.attr("style",`color: ${v.get("stroke")??b};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${h?-N/2:N/2-u.height})`),P.attr("transform",`translate(0,${h?u.height/2+S/2:-u.height/2-S/2})`),An(t,L),t.intersect=function(O){if($t.info("iconSquare intersect",t,O),!t.label)return wn.rect(t,O);const V=t.x??0,F=t.y??0,J=t.height??0;let U=[];return h?U=[{x:V-u.width/2,y:F-J/2},{x:V+u.width/2,y:F-J/2},{x:V+u.width/2,y:F-J/2+u.height+S},{x:V+y/2,y:F-J/2+u.height+S},{x:V+y/2,y:F+J/2},{x:V-y/2,y:F+J/2},{x:V-y/2,y:F-J/2+u.height+S},{x:V-u.width/2,y:F-J/2+u.height+S}]:U=[{x:V-y/2,y:F-J/2},{x:V+y/2,y:F-J/2},{x:V+y/2,y:F-J/2+m},{x:V+u.width/2,y:F-J/2+m},{x:V+u.width/2/2,y:F+J/2},{x:V-u.width/2,y:F+J/2},{x:V-u.width/2,y:F-J/2+m},{x:V-y/2,y:F-J/2+m}],wn.polygon(t,U,O)},c}re(Tte,"icon");async function Ate(e,t,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Rn(t);t.labelStyle=i;const s=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(s,a),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:c,bbox:u,label:d}=await or(e,t,"icon-shape default"),h=20,m=t.label?8:0,y=t.pos==="t",{nodeBorder:b,mainBkg:v}=n,{stylesMap:x}=Sy(t),_=Sn.svg(c),S=kn(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const C=x.get("fill");S.stroke=C??v;const E=c.append("g");t.icon&&E.html(`<g>${await $E(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const A=E.node().getBBox(),R=A.width,N=A.height,M=A.x,P=A.y,L=Math.max(R,N)*Math.SQRT2+h*2,O=_.circle(0,0,L,S),V=Math.max(L,u.width),F=L+u.height+m,J=_.rectangle(-V/2,-F/2,V,F,{...S,fill:"transparent",stroke:"none"}),U=c.insert(()=>O,":first-child"),G=c.insert(()=>J);return E.attr("transform",`translate(${-R/2-M},${y?u.height/2+m/2-N/2-P:-u.height/2-m/2-N/2-P})`),E.attr("style",`color: ${x.get("stroke")??b};`),d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${y?-F/2:F/2-u.height})`),U.attr("transform",`translate(0,${y?u.height/2+m/2:-u.height/2-m/2})`),An(t,G),t.intersect=function($){return $t.info("iconSquare intersect",t,$),wn.rect(t,$)},c}re(Ate,"iconCircle");async function Rte(e,t,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Rn(t);t.labelStyle=i;const s=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(s,a),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:c,bbox:u,halfPadding:d,label:h}=await or(e,t,"icon-shape default"),m=t.pos==="t",y=o+d*2,b=o+d*2,{nodeBorder:v,mainBkg:x}=n,{stylesMap:_}=Sy(t),S=-b/2,C=-y/2,E=t.label?8:0,A=Sn.svg(c),R=kn(t,{});t.look!=="handDrawn"&&(R.roughness=0,R.fillStyle="solid");const N=_.get("fill");R.stroke=N??x;const M=A.path(Pd(S,C,b,y,5),R),P=Math.max(b,u.width),L=y+u.height+E,O=A.rectangle(-P/2,-L/2,P,L,{...R,fill:"transparent",stroke:"none"}),V=c.insert(()=>M,":first-child").attr("class","icon-shape2"),F=c.insert(()=>O);if(t.icon){const J=c.append("g");J.html(`<g>${await $E(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const U=J.node().getBBox(),G=U.width,$=U.height,ne=U.x,H=U.y;J.attr("transform",`translate(${-G/2-ne},${m?u.height/2+E/2-$/2-H:-u.height/2-E/2-$/2-H})`),J.attr("style",`color: ${_.get("stroke")??v};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${m?-L/2:L/2-u.height})`),V.attr("transform",`translate(0,${m?u.height/2+E/2:-u.height/2-E/2})`),An(t,F),t.intersect=function(J){if($t.info("iconSquare intersect",t,J),!t.label)return wn.rect(t,J);const U=t.x??0,G=t.y??0,$=t.height??0;let ne=[];return m?ne=[{x:U-u.width/2,y:G-$/2},{x:U+u.width/2,y:G-$/2},{x:U+u.width/2,y:G-$/2+u.height+E},{x:U+b/2,y:G-$/2+u.height+E},{x:U+b/2,y:G+$/2},{x:U-b/2,y:G+$/2},{x:U-b/2,y:G-$/2+u.height+E},{x:U-u.width/2,y:G-$/2+u.height+E}]:ne=[{x:U-b/2,y:G-$/2},{x:U+b/2,y:G-$/2},{x:U+b/2,y:G-$/2+y},{x:U+u.width/2,y:G-$/2+y},{x:U+u.width/2/2,y:G+$/2},{x:U-u.width/2,y:G+$/2},{x:U-u.width/2,y:G-$/2+y},{x:U-b/2,y:G-$/2+y}],wn.polygon(t,ne,J)},c}re(Rte,"iconRounded");async function Ite(e,t,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Rn(t);t.labelStyle=i;const s=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(s,a),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:c,bbox:u,halfPadding:d,label:h}=await or(e,t,"icon-shape default"),m=t.pos==="t",y=o+d*2,b=o+d*2,{nodeBorder:v,mainBkg:x}=n,{stylesMap:_}=Sy(t),S=-b/2,C=-y/2,E=t.label?8:0,A=Sn.svg(c),R=kn(t,{});t.look!=="handDrawn"&&(R.roughness=0,R.fillStyle="solid");const N=_.get("fill");R.stroke=N??x;const M=A.path(Pd(S,C,b,y,.1),R),P=Math.max(b,u.width),L=y+u.height+E,O=A.rectangle(-P/2,-L/2,P,L,{...R,fill:"transparent",stroke:"none"}),V=c.insert(()=>M,":first-child"),F=c.insert(()=>O);if(t.icon){const J=c.append("g");J.html(`<g>${await $E(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const U=J.node().getBBox(),G=U.width,$=U.height,ne=U.x,H=U.y;J.attr("transform",`translate(${-G/2-ne},${m?u.height/2+E/2-$/2-H:-u.height/2-E/2-$/2-H})`),J.attr("style",`color: ${_.get("stroke")??v};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${m?-L/2:L/2-u.height})`),V.attr("transform",`translate(0,${m?u.height/2+E/2:-u.height/2-E/2})`),An(t,F),t.intersect=function(J){if($t.info("iconSquare intersect",t,J),!t.label)return wn.rect(t,J);const U=t.x??0,G=t.y??0,$=t.height??0;let ne=[];return m?ne=[{x:U-u.width/2,y:G-$/2},{x:U+u.width/2,y:G-$/2},{x:U+u.width/2,y:G-$/2+u.height+E},{x:U+b/2,y:G-$/2+u.height+E},{x:U+b/2,y:G+$/2},{x:U-b/2,y:G+$/2},{x:U-b/2,y:G-$/2+u.height+E},{x:U-u.width/2,y:G-$/2+u.height+E}]:ne=[{x:U-b/2,y:G-$/2},{x:U+b/2,y:G-$/2},{x:U+b/2,y:G-$/2+y},{x:U+u.width/2,y:G-$/2+y},{x:U+u.width/2/2,y:G+$/2},{x:U-u.width/2,y:G+$/2},{x:U-u.width/2,y:G-$/2+y},{x:U-b/2,y:G-$/2+y}],wn.polygon(t,ne,J)},c}re(Ite,"iconSquare");async function Nte(e,t,{config:{flowchart:n}}){const r=new Image;r.src=(t==null?void 0:t.img)??"",await r.decode();const i=Number(r.naturalWidth.toString().replace("px","")),s=Number(r.naturalHeight.toString().replace("px",""));t.imageAspectRatio=i/s;const{labelStyles:a}=Rn(t);t.labelStyle=a;const o=n==null?void 0:n.wrappingWidth;t.defaultWidth=n==null?void 0:n.wrappingWidth;const l=Math.max(t.label?o??0:0,(t==null?void 0:t.assetWidth)??i),c=t.constraint==="on"&&t!=null&&t.assetHeight?t.assetHeight*t.imageAspectRatio:l,u=t.constraint==="on"?c/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??s;t.width=Math.max(c,o??0);const{shapeSvg:d,bbox:h,label:m}=await or(e,t,"image-shape default"),y=t.pos==="t",b=-c/2,v=-u/2,x=t.label?8:0,_=Sn.svg(d),S=kn(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const C=_.rectangle(b,v,c,u,S),E=Math.max(c,h.width),A=u+h.height+x,R=_.rectangle(-E/2,-A/2,E,A,{...S,fill:"none",stroke:"none"}),N=d.insert(()=>C,":first-child"),M=d.insert(()=>R);if(t.img){const P=d.append("image");P.attr("href",t.img),P.attr("width",c),P.attr("height",u),P.attr("preserveAspectRatio","none"),P.attr("transform",`translate(${-c/2},${y?A/2-u:-A/2})`)}return m.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${y?-u/2-h.height/2-x/2:u/2-h.height/2+x/2})`),N.attr("transform",`translate(0,${y?h.height/2+x/2:-h.height/2-x/2})`),An(t,M),t.intersect=function(P){if($t.info("iconSquare intersect",t,P),!t.label)return wn.rect(t,P);const L=t.x??0,O=t.y??0,V=t.height??0;let F=[];return y?F=[{x:L-h.width/2,y:O-V/2},{x:L+h.width/2,y:O-V/2},{x:L+h.width/2,y:O-V/2+h.height+x},{x:L+c/2,y:O-V/2+h.height+x},{x:L+c/2,y:O+V/2},{x:L-c/2,y:O+V/2},{x:L-c/2,y:O-V/2+h.height+x},{x:L-h.width/2,y:O-V/2+h.height+x}]:F=[{x:L-c/2,y:O-V/2},{x:L+c/2,y:O-V/2},{x:L+c/2,y:O-V/2+u},{x:L+h.width/2,y:O-V/2+u},{x:L+h.width/2/2,y:O+V/2},{x:L-h.width/2,y:O+V/2},{x:L-h.width/2,y:O-V/2+u},{x:L-c/2,y:O-V/2+u}],wn.polygon(t,F,P)},d}re(Nte,"imageSquare");async function Mte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),o=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:a,y:0},{x:a+3*o/6,y:-o},{x:-3*o/6,y:-o}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=Sn.svg(i),h=kn(t,{}),m=Wr(l),y=d.path(m,h);c=i.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&c.attr("style",u)}else c=Od(i,a,o,l);return r&&c.attr("style",r),t.width=a,t.height=o,An(t,c),t.intersect=function(d){return wn.polygon(t,l,d)},i}re(Mte,"inv_trapezoid");async function u1(e,t,n){const{labelStyles:r,nodeStyles:i}=Rn(t);t.labelStyle=r;const{shapeSvg:s,bbox:a}=await or(e,t,Zn(t)),o=Math.max(a.width+n.labelPaddingX*2,(t==null?void 0:t.width)||0),l=Math.max(a.height+n.labelPaddingY*2,(t==null?void 0:t.height)||0),c=-o/2,u=-l/2;let d,{rx:h,ry:m}=t;const{cssStyles:y}=t;if(n!=null&&n.rx&&n.ry&&(h=n.rx,m=n.ry),t.look==="handDrawn"){const b=Sn.svg(s),v=kn(t,{}),x=h||m?b.path(Pd(c,u,o,l,h||0),v):b.rectangle(c,u,o,l,v);d=s.insert(()=>x,":first-child"),d.attr("class","basic label-container").attr("style",Ga(y))}else d=s.insert("rect",":first-child"),d.attr("class","basic label-container").attr("style",i).attr("rx",Ga(h)).attr("ry",Ga(m)).attr("x",c).attr("y",u).attr("width",o).attr("height",l);return An(t,d),t.intersect=function(b){return wn.rect(t,b)},s}re(u1,"drawRect");async function jte(e,t){const{shapeSvg:n,bbox:r,label:i}=await or(e,t,"label"),s=n.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(r.width/2)-(r.x-(r.left??0))}, ${-(r.height/2)-(r.y-(r.top??0))})`),An(t,s),t.intersect=function(l){return wn.rect(t,l)},n}re(jte,"labelRect");async function Pte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),o=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:a+3*o/6,y:0},{x:a,y:-o},{x:-(3*o)/6,y:-o}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=Sn.svg(i),h=kn(t,{}),m=Wr(l),y=d.path(m,h);c=i.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&c.attr("style",u)}else c=Od(i,a,o,l);return r&&c.attr("style",r),t.width=a,t.height=o,An(t,c),t.intersect=function(d){return wn.polygon(t,l,d)},i}re(Pte,"lean_left");async function Ote(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),o=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:-3*o/6,y:0},{x:a,y:0},{x:a+3*o/6,y:-o},{x:0,y:-o}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=Sn.svg(i),h=kn(t,{}),m=Wr(l),y=d.path(m,h);c=i.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&c.attr("style",u)}else c=Od(i,a,o,l);return r&&c.attr("style",r),t.width=a,t.height=o,An(t,c),t.intersect=function(d){return wn.polygon(t,l,d)},i}re(Ote,"lean_right");function Dte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.label="",t.labelStyle=n;const i=e.insert("g").attr("class",Zn(t)).attr("id",t.domId??t.id),{cssStyles:s}=t,a=Math.max(35,(t==null?void 0:t.width)??0),o=Math.max(35,(t==null?void 0:t.height)??0),l=7,c=[{x:a,y:0},{x:0,y:o+l/2},{x:a-2*l,y:o+l/2},{x:0,y:2*o},{x:a,y:o-l/2},{x:2*l,y:o-l/2}],u=Sn.svg(i),d=kn(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=Wr(c),m=u.path(h,d),y=i.insert(()=>m,":first-child");return s&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",s),r&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",r),y.attr("transform",`translate(-${a/2},${-o})`),An(t,y),t.intersect=function(b){return $t.info("lightningBolt intersect",t,b),wn.polygon(t,c,b)},i}re(Dte,"lightningBolt");var YFe=re((e,t,n,r,i,s,a)=>[`M${e},${t+s}`,`a${i},${s} 0,0,0 ${n},0`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`,`M${e},${t+s+a}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createCylinderPathD"),ZFe=re((e,t,n,r,i,s,a)=>[`M${e},${t+s}`,`M${e+n},${t+s}`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`,`M${e},${t+s+a}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createOuterCylinderPathD"),XFe=re((e,t,n,r,i,s)=>[`M${e-n/2},${-r/2}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function Fte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Math.max(s.width+(t.padding??0),t.width??0),l=o/2,c=l/(2.5+o/50),u=Math.max(s.height+c+(t.padding??0),t.height??0),d=u*.1;let h;const{cssStyles:m}=t;if(t.look==="handDrawn"){const y=Sn.svg(i),b=ZFe(0,0,o,u,l,c,d),v=XFe(0,c,o,u,l,c),x=kn(t,{}),_=y.path(b,x),S=y.path(v,x);i.insert(()=>S,":first-child").attr("class","line"),h=i.insert(()=>_,":first-child"),h.attr("class","basic label-container"),m&&h.attr("style",m)}else{const y=YFe(0,0,o,u,l,c,d);h=i.insert("path",":first-child").attr("d",y).attr("class","basic label-container").attr("style",Ga(m)).attr("style",r)}return h.attr("label-offset-y",c),h.attr("transform",`translate(${-o/2}, ${-(u/2+c)})`),An(t,h),a.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),t.intersect=function(y){const b=wn.rect(t,y),v=b.x-(t.x??0);if(l!=0&&(Math.abs(v)<(t.width??0)/2||Math.abs(v)==(t.width??0)/2&&Math.abs(b.y-(t.y??0))>(t.height??0)/2-c)){let x=c*c*(1-v*v/(l*l));x>0&&(x=Math.sqrt(x)),x=c-x,y.y-(t.y??0)>0&&(x=-x),b.y+=x}return b},i}re(Fte,"linedCylinder");async function Lte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,u=l+c,{cssStyles:d}=t,h=Sn.svg(i),m=kn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-o/2-o/2*.1,y:-u/2},{x:-o/2-o/2*.1,y:u/2},...ah(-o/2-o/2*.1,u/2,o/2+o/2*.1,u/2,c,.8),{x:o/2+o/2*.1,y:-u/2},{x:-o/2-o/2*.1,y:-u/2},{x:-o/2,y:-u/2},{x:-o/2,y:u/2*1.1},{x:-o/2,y:-u/2}],b=h.polygon(y.map(x=>[x.x,x.y]),m),v=i.insert(()=>b,":first-child");return v.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",d),r&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(0,${-c/2})`),a.attr("transform",`translate(${-o/2+(t.padding??0)+o/2*.1/2-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c/2-(s.y-(s.top??0))})`),An(t,v),t.intersect=function(x){return wn.polygon(t,y,x)},i}re(Lte,"linedWaveEdgedRect");async function Bte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,u=-o/2,d=-l/2,{cssStyles:h}=t,m=Sn.svg(i),y=kn(t,{}),b=[{x:u-c,y:d+c},{x:u-c,y:d+l+c},{x:u+o-c,y:d+l+c},{x:u+o-c,y:d+l},{x:u+o,y:d+l},{x:u+o,y:d+l-c},{x:u+o+c,y:d+l-c},{x:u+o+c,y:d-c},{x:u+c,y:d-c},{x:u+c,y:d},{x:u,y:d},{x:u,y:d+c}],v=[{x:u,y:d+c},{x:u+o-c,y:d+c},{x:u+o-c,y:d+l},{x:u+o,y:d+l},{x:u+o,y:d},{x:u,y:d}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=Wr(b),_=m.path(x,y),S=Wr(v),C=m.path(S,{...y,fill:"none"}),E=i.insert(()=>C,":first-child");return E.insert(()=>_,":first-child"),E.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&E.selectAll("path").attr("style",h),r&&t.look!=="handDrawn"&&E.selectAll("path").attr("style",r),a.attr("transform",`translate(${-(s.width/2)-c-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),An(t,E),t.intersect=function(A){return wn.polygon(t,b,A)},i}re(Bte,"multiRect");async function $te(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,u=l+c,d=-o/2,h=-u/2,m=5,{cssStyles:y}=t,b=ah(d-m,h+u+m,d+o-m,h+u+m,c,.8),v=b==null?void 0:b[b.length-1],x=[{x:d-m,y:h+m},{x:d-m,y:h+u+m},...b,{x:d+o-m,y:v.y-m},{x:d+o,y:v.y-m},{x:d+o,y:v.y-2*m},{x:d+o+m,y:v.y-2*m},{x:d+o+m,y:h-m},{x:d+m,y:h-m},{x:d+m,y:h},{x:d,y:h},{x:d,y:h+m}],_=[{x:d,y:h+m},{x:d+o-m,y:h+m},{x:d+o-m,y:v.y-m},{x:d+o,y:v.y-m},{x:d+o,y:h},{x:d,y:h}],S=Sn.svg(i),C=kn(t,{});t.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const E=Wr(x),A=S.path(E,C),R=Wr(_),N=S.path(R,C),M=i.insert(()=>A,":first-child");return M.insert(()=>N),M.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",y),r&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",r),M.attr("transform",`translate(0,${-c/2})`),a.attr("transform",`translate(${-(s.width/2)-m-(s.x-(s.left??0))}, ${-(s.height/2)+m-c/2-(s.y-(s.top??0))})`),An(t,M),t.intersect=function(P){return wn.polygon(t,x,P)},i}re($te,"multiWaveEdgedRectangle");async function zte(e,t,{config:{themeVariables:n}}){var x;const{labelStyles:r,nodeStyles:i}=Rn(t);t.labelStyle=r,t.useHtmlLabels||((x=wo().flowchart)==null?void 0:x.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:a,bbox:o}=await or(e,t,Zn(t)),l=Math.max(o.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(o.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-l/2,d=-c/2,{cssStyles:h}=t,m=Sn.svg(a),y=kn(t,{fill:n.noteBkgColor,stroke:n.noteBorderColor});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=m.rectangle(u,d,l,c,y),v=a.insert(()=>b,":first-child");return v.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",i),An(t,v),t.intersect=function(_){return wn.rect(t,_)},a}re(zte,"note");var JFe=re((e,t,n)=>[`M${e+n/2},${t}`,`L${e+n},${t-n/2}`,`L${e+n/2},${t-n}`,`L${e},${t-n/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function Ute(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=s.width+t.padding,o=s.height+t.padding,l=a+o,c=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let u;const{cssStyles:d}=t;if(t.look==="handDrawn"){const h=Sn.svg(i),m=kn(t,{}),y=JFe(0,0,l),b=h.path(y,m);u=i.insert(()=>b,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`),d&&u.attr("style",d)}else u=Od(i,l,l,c);return r&&u.attr("style",r),An(t,u),t.intersect=function(h){return $t.debug(`APA12 Intersect called SPLIT
point:`,h,`
node:
`,t,`
res:`,wn.polygon(t,c,h)),wn.polygon(t,c,h)},i}re(Ute,"question");async function qte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),c=-o/2,u=-l/2,d=u/2,h=[{x:c+d,y:u},{x:c,y:0},{x:c+d,y:-u},{x:-c,y:-u},{x:-c,y:u}],{cssStyles:m}=t,y=Sn.svg(i),b=kn(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const v=Wr(h),x=y.path(v,b),_=i.insert(()=>x,":first-child");return _.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",m),r&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",r),_.attr("transform",`translate(${-d/2},0)`),a.attr("transform",`translate(${-d/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),An(t,_),t.intersect=function(S){return wn.polygon(t,h,S)},i}re(qte,"rect_left_inv_arrow");async function Vte(e,t){var N,M;const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;let i;t.cssClasses?i="node "+t.cssClasses:i="node default";const s=e.insert("g").attr("class",i).attr("id",t.domId||t.id),a=s.insert("g"),o=s.insert("g").attr("class","label").attr("style",r),l=t.description,c=t.label,u=o.node().appendChild(await _p(c,t.labelStyle,!0,!0));let d={width:0,height:0};if(Os((M=(N=ni())==null?void 0:N.flowchart)==null?void 0:M.htmlLabels)){const P=u.children[0],L=qr(u);d=P.getBoundingClientRect(),L.attr("width",d.width),L.attr("height",d.height)}$t.info("Text 2",l);const h=l||[],m=u.getBBox(),y=o.node().appendChild(await _p(h.join?h.join("<br/>"):h,t.labelStyle,!0,!0)),b=y.children[0],v=qr(y);d=b.getBoundingClientRect(),v.attr("width",d.width),v.attr("height",d.height);const x=(t.padding||0)/2;qr(y).attr("transform","translate( "+(d.width>m.width?0:(m.width-d.width)/2)+", "+(m.height+x+5)+")"),qr(u).attr("transform","translate( "+(d.width<m.width?0:-(m.width-d.width)/2)+", 0)"),d=o.node().getBBox(),o.attr("transform","translate("+-d.width/2+", "+(-d.height/2-x+3)+")");const _=d.width+(t.padding||0),S=d.height+(t.padding||0),C=-d.width/2-x,E=-d.height/2-x;let A,R;if(t.look==="handDrawn"){const P=Sn.svg(s),L=kn(t,{}),O=P.path(Pd(C,E,_,S,t.rx||0),L),V=P.line(-d.width/2-x,-d.height/2-x+m.height+x,d.width/2+x,-d.height/2-x+m.height+x,L);R=s.insert(()=>($t.debug("Rough node insert CXC",O),V),":first-child"),A=s.insert(()=>($t.debug("Rough node insert CXC",O),O),":first-child")}else A=a.insert("rect",":first-child"),R=a.insert("line"),A.attr("class","outer title-state").attr("style",r).attr("x",-d.width/2-x).attr("y",-d.height/2-x).attr("width",d.width+(t.padding||0)).attr("height",d.height+(t.padding||0)),R.attr("class","divider").attr("x1",-d.width/2-x).attr("x2",d.width/2+x).attr("y1",-d.height/2-x+m.height+x).attr("y2",-d.height/2-x+m.height+x);return An(t,A),t.intersect=function(P){return wn.rect(t,P)},s}re(Vte,"rectWithTitle");async function Hte(e,t){const n={rx:5,ry:5,labelPaddingX:((t==null?void 0:t.padding)||0)*1,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return u1(e,t,n)}re(Hte,"roundedRect");async function Wte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=(t==null?void 0:t.padding)??0,l=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-s.width/2-o,d=-s.height/2-o,{cssStyles:h}=t,m=Sn.svg(i),y=kn(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:u,y:d},{x:u+l+8,y:d},{x:u+l+8,y:d+c},{x:u-8,y:d+c},{x:u-8,y:d},{x:u,y:d},{x:u,y:d+c}],v=m.polygon(b.map(_=>[_.x,_.y]),y),x=i.insert(()=>v,":first-child");return x.attr("class","basic label-container").attr("style",Ga(h)),r&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",r),h&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",r),a.attr("transform",`translate(${-l/2+4+(t.padding??0)-(s.x-(s.left??0))},${-c/2+(t.padding??0)-(s.y-(s.top??0))})`),An(t,x),t.intersect=function(_){return wn.rect(t,_)},i}re(Wte,"shadedProcess");async function Gte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=-o/2,u=-l/2,{cssStyles:d}=t,h=Sn.svg(i),m=kn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:c,y:u},{x:c,y:u+l},{x:c+o,y:u+l},{x:c+o,y:u-l/2}],b=Wr(y),v=h.path(b,m),x=i.insert(()=>v,":first-child");return x.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),r&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",r),x.attr("transform",`translate(0, ${l/4})`),a.attr("transform",`translate(${-o/2+(t.padding??0)-(s.x-(s.left??0))}, ${-l/4+(t.padding??0)-(s.y-(s.top??0))})`),An(t,x),t.intersect=function(_){return wn.polygon(t,y,_)},i}re(Gte,"slopedRect");async function Kte(e,t){const n={rx:0,ry:0,labelPaddingX:((t==null?void 0:t.padding)||0)*2,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return u1(e,t,n)}re(Kte,"squareRect");async function Yte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=s.height+t.padding,o=s.width+a/4+t.padding;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=Sn.svg(i),d=kn(t,{}),h=Pd(-o/2,-a/2,o,a,a/2),m=u.path(h,d);l=i.insert(()=>m,":first-child"),l.attr("class","basic label-container").attr("style",Ga(c))}else l=i.insert("rect",":first-child"),l.attr("class","basic label-container").attr("style",r).attr("rx",a/2).attr("ry",a/2).attr("x",-o/2).attr("y",-a/2).attr("width",o).attr("height",a);return An(t,l),t.intersect=function(u){return wn.rect(t,u)},i}re(Yte,"stadium");async function Zte(e,t){return u1(e,t,{rx:5,ry:5})}re(Zte,"state");function Xte(e,t,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=Rn(t);t.labelStyle=r;const{cssStyles:s}=t,{lineColor:a,stateBorder:o,nodeBorder:l}=n,c=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),u=Sn.svg(c),d=kn(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=u.circle(0,0,14,{...d,stroke:a,strokeWidth:2}),m=o??l,y=u.circle(0,0,5,{...d,fill:m,stroke:m,strokeWidth:2,fillStyle:"solid"}),b=c.insert(()=>h,":first-child");return b.insert(()=>y),s&&b.selectAll("path").attr("style",s),i&&b.selectAll("path").attr("style",i),An(t,b),t.intersect=function(v){return wn.circle(t,7,v)},c}re(Xte,"stateEnd");function Jte(e,t,{config:{themeVariables:n}}){const{lineColor:r}=n,i=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let s;if(t.look==="handDrawn"){const o=Sn.svg(i).circle(0,0,14,MFe(r));s=i.insert(()=>o),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=i.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return An(t,s),t.intersect=function(a){return wn.circle(t,7,a)},i}re(Jte,"stateStart");async function Qte(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=((t==null?void 0:t.padding)||0)/2,o=s.width+t.padding,l=s.height+t.padding,c=-s.width/2-a,u=-s.height/2-a,d=[{x:0,y:0},{x:o,y:0},{x:o,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(t.look==="handDrawn"){const h=Sn.svg(i),m=kn(t,{}),y=h.rectangle(c-8,u,o+16,l,m),b=h.line(c,u,c,u+l,m),v=h.line(c+o,u,c+o,u+l,m);i.insert(()=>b,":first-child"),i.insert(()=>v,":first-child");const x=i.insert(()=>y,":first-child"),{cssStyles:_}=t;x.attr("class","basic label-container").attr("style",Ga(_)),An(t,x)}else{const h=Od(i,o,l,d);r&&h.attr("style",r),An(t,h)}return t.intersect=function(h){return wn.polygon(t,d,h)},i}re(Qte,"subroutine");async function ene(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),o=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=-a/2,c=-o/2,u=.2*o,d=.2*o,{cssStyles:h}=t,m=Sn.svg(i),y=kn(t,{}),b=[{x:l-u/2,y:c},{x:l+a+u/2,y:c},{x:l+a+u/2,y:c+o},{x:l-u/2,y:c+o}],v=[{x:l+a-u/2,y:c+o},{x:l+a+u/2,y:c+o},{x:l+a+u/2,y:c+o-d}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=Wr(b),_=m.path(x,y),S=Wr(v),C=m.path(S,{...y,fillStyle:"solid"}),E=i.insert(()=>C,":first-child");return E.insert(()=>_,":first-child"),E.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&E.selectAll("path").attr("style",h),r&&t.look!=="handDrawn"&&E.selectAll("path").attr("style",r),An(t,E),t.intersect=function(A){return wn.polygon(t,b,A)},i}re(ene,"taggedRect");async function tne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,u=.2*o,d=.2*l,h=l+c,{cssStyles:m}=t,y=Sn.svg(i),b=kn(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const v=[{x:-o/2-o/2*.1,y:h/2},...ah(-o/2-o/2*.1,h/2,o/2+o/2*.1,h/2,c,.8),{x:o/2+o/2*.1,y:-h/2},{x:-o/2-o/2*.1,y:-h/2}],x=-o/2+o/2*.1,_=-h/2-d*.4,S=[{x:x+o-u,y:(_+l)*1.4},{x:x+o,y:_+l-d},{x:x+o,y:(_+l)*.9},...ah(x+o,(_+l)*1.3,x+o-u,(_+l)*1.5,-l*.03,.5)],C=Wr(v),E=y.path(C,b),A=Wr(S),R=y.path(A,{...b,fillStyle:"solid"}),N=i.insert(()=>R,":first-child");return N.insert(()=>E,":first-child"),N.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",m),r&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",r),N.attr("transform",`translate(0,${-c/2})`),a.attr("transform",`translate(${-o/2+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c/2-(s.y-(s.top??0))})`),An(t,N),t.intersect=function(M){return wn.polygon(t,v,M)},i}re(tne,"taggedWaveEdgedRectangle");async function nne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=Math.max(s.width+t.padding,(t==null?void 0:t.width)||0),o=Math.max(s.height+t.padding,(t==null?void 0:t.height)||0),l=-a/2,c=-o/2,u=i.insert("rect",":first-child");return u.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",a).attr("height",o),An(t,u),t.intersect=function(d){return wn.rect(t,d)},i}re(nne,"text");var QFe=re((e,t,n,r,i,s)=>`M${e},${t}
    a${i},${s} 0,0,1 0,${-r}
    l${n},0
    a${i},${s} 0,0,1 0,${r}
    M${n},${-r}
    a${i},${s} 0,0,0 0,${r}
    l${-n},0`,"createCylinderPathD"),e8e=re((e,t,n,r,i,s)=>[`M${e},${t}`,`M${e+n},${t}`,`a${i},${s} 0,0,0 0,${-r}`,`l${-n},0`,`a${i},${s} 0,0,0 0,${r}`,`l${n},0`].join(" "),"createOuterCylinderPathD"),t8e=re((e,t,n,r,i,s)=>[`M${e+n/2},${-r/2}`,`a${i},${s} 0,0,0 0,${r}`].join(" "),"createInnerCylinderPathD");async function rne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a,halfPadding:o}=await or(e,t,Zn(t)),l=t.look==="neo"?o*2:o,c=s.height+l,u=c/2,d=u/(2.5+c/50),h=s.width+d+l,{cssStyles:m}=t;let y;if(t.look==="handDrawn"){const b=Sn.svg(i),v=e8e(0,0,h,c,d,u),x=t8e(0,0,h,c,d,u),_=b.path(v,kn(t,{})),S=b.path(x,kn(t,{fill:"none"}));y=i.insert(()=>S,":first-child"),y=i.insert(()=>_,":first-child"),y.attr("class","basic label-container"),m&&y.attr("style",m)}else{const b=QFe(0,0,h,c,d,u);y=i.insert("path",":first-child").attr("d",b).attr("class","basic label-container").attr("style",Ga(m)).attr("style",r),y.attr("class","basic label-container"),m&&y.selectAll("path").attr("style",m),r&&y.selectAll("path").attr("style",r)}return y.attr("label-offset-x",d),y.attr("transform",`translate(${-h/2}, ${c/2} )`),a.attr("transform",`translate(${-(s.width/2)-d-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),An(t,y),t.intersect=function(b){const v=wn.rect(t,b),x=v.y-(t.y??0);if(u!=0&&(Math.abs(x)<(t.height??0)/2||Math.abs(x)==(t.height??0)/2&&Math.abs(v.x-(t.x??0))>(t.width??0)/2-d)){let _=d*d*(1-x*x/(u*u));_!=0&&(_=Math.sqrt(Math.abs(_))),_=d-_,b.x-(t.x??0)>0&&(_=-_),v.x+=_}return v},i}re(rne,"tiltedCylinder");async function ine(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=s.width+t.padding,o=s.height+t.padding,l=[{x:-3*o/6,y:0},{x:a+3*o/6,y:0},{x:a,y:-o},{x:0,y:-o}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=Sn.svg(i),h=kn(t,{}),m=Wr(l),y=d.path(m,h);c=i.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&c.attr("style",u)}else c=Od(i,a,o,l);return r&&c.attr("style",r),t.width=a,t.height=o,An(t,c),t.intersect=function(d){return wn.polygon(t,l,d)},i}re(ine,"trapezoid");async function sne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=60,o=20,l=Math.max(a,s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(o,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),{cssStyles:u}=t,d=Sn.svg(i),h=kn(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const m=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],y=Wr(m),b=d.path(y,h),v=i.insert(()=>b,":first-child");return v.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",u),r&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",r),An(t,v),t.intersect=function(x){return wn.polygon(t,m,x)},i}re(sne,"trapezoidalPentagon");async function ane(e,t){var _;const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Os((_=ni().flowchart)==null?void 0:_.htmlLabels),l=s.width+(t.padding??0),c=l+s.height,u=l+s.height,d=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-c}],{cssStyles:h}=t,m=Sn.svg(i),y=kn(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=Wr(d),v=m.path(b,y),x=i.insert(()=>v,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return h&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",h),r&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",r),t.width=l,t.height=c,An(t,x),a.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(t.padding??0)/(o?2:1)-(s.y-(s.top??0)))})`),t.intersect=function(S){return $t.info("Triangle intersect",t,d,S),wn.polygon(t,d,S)},i}re(ane,"triangle");async function one(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/8,u=l+c,{cssStyles:d}=t,m=70-o,y=m>0?m/2:0,b=Sn.svg(i),v=kn(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const x=[{x:-o/2-y,y:u/2},...ah(-o/2-y,u/2,o/2+y,u/2,c,.8),{x:o/2+y,y:-u/2},{x:-o/2-y,y:-u/2}],_=Wr(x),S=b.path(_,v),C=i.insert(()=>S,":first-child");return C.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",d),r&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(0,${-c/2})`),a.attr("transform",`translate(${-o/2+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-c-(s.y-(s.top??0))})`),An(t,C),t.intersect=function(E){return wn.polygon(t,x,E)},i}re(one,"waveEdgedRectangle");async function lne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await or(e,t,Zn(t)),a=100,o=50,l=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/c;let d=l,h=c;d>h*u?h=d/u:d=h*u,d=Math.max(d,a),h=Math.max(h,o);const m=Math.min(h*.2,h/4),y=h+m*2,{cssStyles:b}=t,v=Sn.svg(i),x=kn(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const _=[{x:-d/2,y:y/2},...ah(-d/2,y/2,d/2,y/2,m,1),{x:d/2,y:-y/2},...ah(d/2,-y/2,-d/2,-y/2,m,-1)],S=Wr(_),C=v.path(S,x),E=i.insert(()=>C,":first-child");return E.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&E.selectAll("path").attr("style",b),r&&t.look!=="handDrawn"&&E.selectAll("path").attr("style",r),An(t,E),t.intersect=function(A){return wn.polygon(t,_,A)},i}re(lne,"waveRectangle");async function cne(e,t){const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,label:a}=await or(e,t,Zn(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,u=-o/2,d=-l/2,{cssStyles:h}=t,m=Sn.svg(i),y=kn(t,{}),b=[{x:u-c,y:d-c},{x:u-c,y:d+l},{x:u+o,y:d+l},{x:u+o,y:d-c}],v=`M${u-c},${d-c} L${u+o},${d-c} L${u+o},${d+l} L${u-c},${d+l} L${u-c},${d-c}
                M${u-c},${d} L${u+o},${d}
                M${u},${d-c} L${u},${d+l}`;t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=m.path(v,y),_=i.insert(()=>x,":first-child");return _.attr("transform",`translate(${c/2}, ${c/2})`),_.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",h),r&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",r),a.attr("transform",`translate(${-(s.width/2)+c/2-(s.x-(s.left??0))}, ${-(s.height/2)+c/2-(s.y-(s.top??0))})`),An(t,_),t.intersect=function(S){return wn.polygon(t,b,S)},i}re(cne,"windowPane");async function LD(e,t){var ne,H,te;const n=t;if(n.alias&&(t.label=n.alias),t.look==="handDrawn"){const{themeVariables:ee}=wo(),{background:se}=ee,he={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${se}`]};await LD(e,he)}const r=wo();t.useHtmlLabels=r.htmlLabels;let i=((ne=r.er)==null?void 0:ne.diagramPadding)??10,s=((H=r.er)==null?void 0:H.entityPadding)??6;const{cssStyles:a}=t,{labelStyles:o}=Rn(t);if(n.attributes.length===0&&t.label){const ee={rx:0,ry:0,labelPaddingX:i,labelPaddingY:i*1.5};kd(t.label,r)+ee.labelPaddingX*2<r.er.minEntityWidth&&(t.width=r.er.minEntityWidth);const se=await u1(e,t,ee);if(!Os(r.htmlLabels)){const he=se.select("text"),ce=(te=he.node())==null?void 0:te.getBBox();he.attr("transform",`translate(${-ce.width/2}, 0)`)}return se}r.htmlLabels||(i*=1.25,s*=1.25);let l=Zn(t);l||(l="node default");const c=e.insert("g").attr("class",l).attr("id",t.domId||t.id),u=await Ag(c,t.label??"",r,0,0,["name"],o);u.height+=s;let d=0;const h=[];let m=0,y=0,b=0,v=0,x=!0,_=!0;for(const ee of n.attributes){const se=await Ag(c,ee.type,r,0,d,["attribute-type"],o);m=Math.max(m,se.width+i);const he=await Ag(c,ee.name,r,0,d,["attribute-name"],o);y=Math.max(y,he.width+i);const ce=await Ag(c,ee.keys.join(),r,0,d,["attribute-keys"],o);b=Math.max(b,ce.width+i);const Me=await Ag(c,ee.comment,r,0,d,["attribute-comment"],o);v=Math.max(v,Me.width+i),d+=Math.max(se.height,he.height,ce.height,Me.height)+s,h.push(d)}h.pop();let S=4;b<=i&&(x=!1,b=0,S--),v<=i&&(_=!1,v=0,S--);const C=c.node().getBBox();if(u.width+i*2-(m+y+b+v)>0){const ee=u.width+i*2-(m+y+b+v);m+=ee/S,y+=ee/S,b>0&&(b+=ee/S),v>0&&(v+=ee/S)}const E=m+y+b+v,A=Sn.svg(c),R=kn(t,{});t.look!=="handDrawn"&&(R.roughness=0,R.fillStyle="solid");const N=Math.max(C.width+i*2,(t==null?void 0:t.width)||0,E),M=Math.max(C.height+(h[0]||d)+s,(t==null?void 0:t.height)||0),P=-N/2,L=-M/2;c.selectAll("g:not(:first-child)").each((ee,se,he)=>{const ce=qr(he[se]),Me=ce.attr("transform");let je=0,Ne=0;if(Me){const Ue=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Me);Ue&&(je=parseFloat(Ue[1]),Ne=parseFloat(Ue[2]),ce.attr("class").includes("attribute-name")?je+=m:ce.attr("class").includes("attribute-keys")?je+=m+y:ce.attr("class").includes("attribute-comment")&&(je+=m+y+b))}ce.attr("transform",`translate(${P+i/2+je}, ${Ne+L+u.height+s/2})`)}),c.select(".name").attr("transform","translate("+-u.width/2+", "+(L+s/2)+")");const O=A.rectangle(P,L,N,M,R),V=c.insert(()=>O,":first-child").attr("style",a.join("")),{themeVariables:F}=wo(),{rowEven:J,rowOdd:U,nodeBorder:G}=F;h.push(0);for(const[ee,se]of h.entries()){if(ee===0&&h.length>1)continue;const he=ee%2===0&&se!==0,ce=A.rectangle(P,u.height+L+se,N,u.height,{...R,fill:he?J:U,stroke:G});c.insert(()=>ce,"g.label").attr("style",a.join("")).attr("class",`row-rect-${ee%2===0?"even":"odd"}`)}let $=A.line(P,u.height+L,N+P,u.height+L,R);c.insert(()=>$).attr("class","divider"),$=A.line(m+P,u.height+L,m+P,M+L,R),c.insert(()=>$).attr("class","divider"),x&&($=A.line(m+y+P,u.height+L,m+y+P,M+L,R),c.insert(()=>$).attr("class","divider")),_&&($=A.line(m+y+b+P,u.height+L,m+y+b+P,M+L,R),c.insert(()=>$).attr("class","divider"));for(const ee of h)$=A.line(P,u.height+L+ee,N+P,u.height+L+ee,R),c.insert(()=>$).attr("class","divider");return An(t,V),t.intersect=function(ee){return wn.rect(t,ee)},c}re(LD,"erBox");async function Ag(e,t,n,r=0,i=0,s=[],a=""){const o=e.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${r}, ${i})`).attr("style",a);t!==Pz(t)&&(t=Pz(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=o.node().appendChild(await kh(o,t,{width:kd(t,n)+100,style:a,useHtmlLabels:n.htmlLabels},n));if(t.includes("&lt;")||t.includes("&gt;")){let u=l.children[0];for(u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");u.childNodes[0];)u=u.childNodes[0],u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(Os(n.htmlLabels)){const u=l.children[0];u.style.textAlign="start";const d=qr(l);c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}return c}re(Ag,"addText");async function une(e,t,n,r,i=n.class.padding??12){const s=r?0:3,a=e.insert("g").attr("class",Zn(t)).attr("id",t.domId||t.id);let o=null,l=null,c=null,u=null,d=0,h=0,m=0;if(o=a.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const _=t.annotations[0];await _v(o,{text:`«${_}»`},0),d=o.node().getBBox().height}l=a.insert("g").attr("class","label-group text"),await _v(l,t,0,["font-weight: bolder"]);const y=l.node().getBBox();h=y.height,c=a.insert("g").attr("class","members-group text");let b=0;for(const _ of t.members){const S=await _v(c,_,b,[_.parseClassifier()]);b+=S+s}m=c.node().getBBox().height,m<=0&&(m=i/2),u=a.insert("g").attr("class","methods-group text");let v=0;for(const _ of t.methods){const S=await _v(u,_,v,[_.parseClassifier()]);v+=S+s}let x=a.node().getBBox();if(o!==null){const _=o.node().getBBox();o.attr("transform",`translate(${-_.width/2})`)}return l.attr("transform",`translate(${-y.width/2}, ${d})`),x=a.node().getBBox(),c.attr("transform",`translate(0, ${d+h+i*2})`),x=a.node().getBBox(),u.attr("transform",`translate(0, ${d+h+(m?m+i*4:i*2)})`),x=a.node().getBBox(),{shapeSvg:a,bbox:x}}re(une,"textHelper");async function _v(e,t,n,r=[]){const i=e.insert("g").attr("class","label").attr("style",r.join("; ")),s=wo();let a="useHtmlLabels"in t?t.useHtmlLabels:Os(s.htmlLabels)??!0,o="";"text"in t?o=t.text:o=t.label,!a&&o.startsWith("\\")&&(o=o.substring(1)),D0(o)&&(a=!0);const l=await kh(i,KO(ym(o)),{width:kd(o,s)+50,classes:"markdown-node-label",useHtmlLabels:a},s);let c,u=1;if(a){const d=l.children[0],h=qr(l);u=d.innerHTML.split("<br>").length,d.innerHTML.includes("</math>")&&(u+=d.innerHTML.split("<mrow>").length-1);const m=d.getElementsByTagName("img");if(m){const y=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(b=>new Promise(v=>{function x(){var _;if(b.style.display="flex",b.style.flexDirection="column",y){const S=((_=s.fontSize)==null?void 0:_.toString())??window.getComputedStyle(document.body).fontSize,E=parseInt(S,10)*5+"px";b.style.minWidth=E,b.style.maxWidth=E}else b.style.width="100%";v(b)}re(x,"setupImage"),setTimeout(()=>{b.complete&&x()}),b.addEventListener("error",x),b.addEventListener("load",x)})))}c=d.getBoundingClientRect(),h.attr("width",c.width),h.attr("height",c.height)}else{r.includes("font-weight: bolder")&&qr(l).selectAll("tspan").attr("font-weight",""),u=l.children.length;const d=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(d.textContent=o[0]+o.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),o[1]===" "&&(d.textContent=d.textContent[0]+" "+d.textContent.substring(1))),d.textContent==="undefined"&&(d.textContent=""),c=l.getBBox()}return i.attr("transform","translate(0,"+(-c.height/(2*u)+n)+")"),c.height}re(_v,"addText");async function dne(e,t){var M,P;const n=ni(),r=n.class.padding??12,i=r,s=t.useHtmlLabels??Os(n.htmlLabels)??!0,a=t;a.annotations=a.annotations??[],a.members=a.members??[],a.methods=a.methods??[];const{shapeSvg:o,bbox:l}=await une(e,t,n,s,i),{labelStyles:c,nodeStyles:u}=Rn(t);t.labelStyle=c,t.cssStyles=a.styles||"";const d=((M=a.styles)==null?void 0:M.join(";"))||u||"";t.cssStyles||(t.cssStyles=d.replaceAll("!important","").split(";"));const h=a.members.length===0&&a.methods.length===0&&!((P=n.class)!=null&&P.hideEmptyMembersBox),m=Sn.svg(o),y=kn(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=l.width;let v=l.height;a.members.length===0&&a.methods.length===0?v+=i:a.members.length>0&&a.methods.length===0&&(v+=i*2);const x=-b/2,_=-v/2,S=m.rectangle(x-r,_-r-(h?r:a.members.length===0&&a.methods.length===0?-r/2:0),b+2*r,v+2*r+(h?r*2:a.members.length===0&&a.methods.length===0?-r:0),y),C=o.insert(()=>S,":first-child");C.attr("class","basic label-container");const E=C.node().getBBox();o.selectAll(".text").each((L,O,V)=>{var ne;const F=qr(V[O]),J=F.attr("transform");let U=0;if(J){const te=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(J);te&&(U=parseFloat(te[2]))}let G=U+_+r-(h?r:a.members.length===0&&a.methods.length===0?-r/2:0);s||(G-=4);let $=x;(F.attr("class").includes("label-group")||F.attr("class").includes("annotation-group"))&&($=-((ne=F.node())==null?void 0:ne.getBBox().width)/2||0,o.selectAll("text").each(function(H,te,ee){window.getComputedStyle(ee[te]).textAnchor==="middle"&&($=0)})),F.attr("transform",`translate(${$}, ${G})`)});const A=o.select(".annotation-group").node().getBBox().height-(h?r/2:0)||0,R=o.select(".label-group").node().getBBox().height-(h?r/2:0)||0,N=o.select(".members-group").node().getBBox().height-(h?r/2:0)||0;if(a.members.length>0||a.methods.length>0||h){const L=m.line(E.x,A+R+_+r,E.x+E.width,A+R+_+r,y);o.insert(()=>L).attr("class","divider").attr("style",d)}if(h||a.members.length>0||a.methods.length>0){const L=m.line(E.x,A+R+N+_+i*2+r,E.x+E.width,A+R+N+_+r+i*2,y);o.insert(()=>L).attr("class","divider").attr("style",d)}if(a.look!=="handDrawn"&&o.selectAll("path").attr("style",d),C.select(":nth-child(2)").attr("style",d),o.selectAll(".divider").select("path").attr("style",d),t.labelStyle?o.selectAll("span").attr("style",t.labelStyle):o.selectAll("span").attr("style",d),!s){const L=RegExp(/color\s*:\s*([^;]*)/),O=L.exec(d);if(O){const V=O[0].replace("color","fill");o.selectAll("tspan").attr("style",V)}else if(c){const V=L.exec(c);if(V){const F=V[0].replace("color","fill");o.selectAll("tspan").attr("style",F)}}}return An(t,C),t.intersect=function(L){return wn.rect(t,L)},o}re(dne,"classBox");async function fne(e,t){var A,R;const{labelStyles:n,nodeStyles:r}=Rn(t);t.labelStyle=n;const i=t,s=t,a=20,o=20,l="verifyMethod"in t,c=Zn(t),u=e.insert("g").attr("class",c).attr("id",t.domId??t.id);let d;l?d=await Fc(u,`&lt;&lt;${i.type}&gt;&gt;`,0,t.labelStyle):d=await Fc(u,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let h=d;const m=await Fc(u,i.name,h,t.labelStyle+"; font-weight: bold;");if(h+=m+o,l){const N=await Fc(u,`${i.requirementId?`Id: ${i.requirementId}`:""}`,h,t.labelStyle);h+=N;const M=await Fc(u,`${i.text?`Text: ${i.text}`:""}`,h,t.labelStyle);h+=M;const P=await Fc(u,`${i.risk?`Risk: ${i.risk}`:""}`,h,t.labelStyle);h+=P,await Fc(u,`${i.verifyMethod?`Verification: ${i.verifyMethod}`:""}`,h,t.labelStyle)}else{const N=await Fc(u,`${s.type?`Type: ${s.type}`:""}`,h,t.labelStyle);h+=N,await Fc(u,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,h,t.labelStyle)}const y=(((A=u.node())==null?void 0:A.getBBox().width)??200)+a,b=(((R=u.node())==null?void 0:R.getBBox().height)??200)+a,v=-y/2,x=-b/2,_=Sn.svg(u),S=kn(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const C=_.rectangle(v,x,y,b,S),E=u.insert(()=>C,":first-child");if(E.attr("class","basic label-container").attr("style",r),u.selectAll(".label").each((N,M,P)=>{const L=qr(P[M]),O=L.attr("transform");let V=0,F=0;if(O){const $=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(O);$&&(V=parseFloat($[1]),F=parseFloat($[2]))}const J=F-b/2;let U=v+a/2;(M===0||M===1)&&(U=V),L.attr("transform",`translate(${U}, ${J+a})`)}),h>d+m+o){const N=_.line(v,x+d+m+o,v+y,x+d+m+o,S);u.insert(()=>N).attr("style",r)}return An(t,E),t.intersect=function(N){return wn.rect(t,N)},u}re(fne,"requirementBox");async function Fc(e,t,n,r=""){if(t==="")return 0;const i=e.insert("g").attr("class","label").attr("style",r),s=ni(),a=s.htmlLabels??!0,o=await kh(i,KO(ym(t)),{width:kd(t,s)+50,classes:"markdown-node-label",useHtmlLabels:a,style:r},s);let l;if(a){const c=o.children[0],u=qr(o);l=c.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}else{const c=o.children[0];for(const u of c.children)u.textContent=u.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),r&&u.setAttribute("style",r);l=o.getBBox(),l.height+=6}return i.attr("transform",`translate(${-l.width/2},${-l.height/2+n})`),l.height}re(Fc,"addText");var n8e=re(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function hne(e,t,{config:n}){var O,V;const{labelStyles:r,nodeStyles:i}=Rn(t);t.labelStyle=r||"";const s=10,a=t.width;t.width=(t.width??200)-10;const{shapeSvg:o,bbox:l,label:c}=await or(e,t,Zn(t)),u=t.padding||10;let d="",h;"ticket"in t&&t.ticket&&((O=n==null?void 0:n.kanban)!=null&&O.ticketBaseUrl)&&(d=(V=n==null?void 0:n.kanban)==null?void 0:V.ticketBaseUrl.replace("#TICKET#",t.ticket),h=o.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",d).attr("target","_blank"));const m={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let y,b;h?{label:y,bbox:b}=await sM(h,"ticket"in t&&t.ticket||"",m):{label:y,bbox:b}=await sM(o,"ticket"in t&&t.ticket||"",m);const{label:v,bbox:x}=await sM(o,"assigned"in t&&t.assigned||"",m);t.width=a;const _=10,S=(t==null?void 0:t.width)||0,C=Math.max(b.height,x.height)/2,E=Math.max(l.height+_*2,(t==null?void 0:t.height)||0)+C,A=-S/2,R=-E/2;c.attr("transform","translate("+(u-S/2)+", "+(-C-l.height/2)+")"),y.attr("transform","translate("+(u-S/2)+", "+(-C+l.height/2)+")"),v.attr("transform","translate("+(u+S/2-x.width-2*s)+", "+(-C+l.height/2)+")");let N;const{rx:M,ry:P}=t,{cssStyles:L}=t;if(t.look==="handDrawn"){const F=Sn.svg(o),J=kn(t,{}),U=M||P?F.path(Pd(A,R,S,E,M||0),J):F.rectangle(A,R,S,E,J);N=o.insert(()=>U,":first-child"),N.attr("class","basic label-container").attr("style",L||null)}else{N=o.insert("rect",":first-child"),N.attr("class","basic label-container __APA__").attr("style",i).attr("rx",M??5).attr("ry",P??5).attr("x",A).attr("y",R).attr("width",S).attr("height",E);const F="priority"in t&&t.priority;if(F){const J=o.append("line"),U=A+2,G=R+Math.floor((M??0)/2),$=R+E-Math.floor((M??0)/2);J.attr("x1",U).attr("y1",G).attr("x2",U).attr("y2",$).attr("stroke-width","4").attr("stroke",n8e(F))}}return An(t,N),t.height=E,t.intersect=function(F){return wn.rect(t,F)},o}re(hne,"kanbanItem");var r8e=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:Kte},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Hte},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Yte},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Qte},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:bte},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:dte},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:Ute},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:kte},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Ote},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:Pte},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:ine},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Mte},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:xte},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:nne},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:cte},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Wte},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:Jte},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Xte},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:Ste},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:Ete},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:pte},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:mte},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:gte},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:Dte},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:one},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:Cte},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:rne},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:Fte},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:yte},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:vte},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:ane},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:cne},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:wte},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:sne},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:_te},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Gte},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:$te},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Bte},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:lte},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:hte},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:tne},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:ene},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:lne},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:qte},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Lte}],i8e=re(()=>{const t=[...Object.entries({state:Zte,choice:ute,note:zte,rectWithTitle:Vte,labelRect:jte,iconSquare:Ite,iconCircle:Ate,icon:Tte,iconRounded:Rte,imageSquare:Nte,anchor:ote,kanbanItem:hne,classBox:dne,erBox:LD,requirementBox:fne}),...r8e.flatMap(n=>[n.shortName,..."aliases"in n?n.aliases:[],..."internalAliases"in n?n.internalAliases:[]].map(i=>[i,n.handler]))];return Object.fromEntries(t)},"generateShapeMap"),pne=i8e();function s8e(e){return e in pne}re(s8e,"isValidShape");var rT=new Map;async function mne(e,t,n){let r,i;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const s=t.shape?pne[t.shape]:void 0;if(!s)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let a;n.config.securityLevel==="sandbox"?a="_top":t.linkTarget&&(a=t.linkTarget||"_blank"),r=e.insert("svg:a").attr("xlink:href",t.link).attr("target",a??null),i=await s(r,t,n)}else i=await s(e,t,n),r=i;return t.tooltip&&i.attr("title",t.tooltip),rT.set(t.id,r),t.haveCallback&&r.attr("class",r.attr("class")+" clickable"),r}re(mne,"insertNode");var tlt=re((e,t)=>{rT.set(t.id,e)},"setNodeElem"),nlt=re(()=>{rT.clear()},"clear"),rlt=re(e=>{const t=rT.get(e.id);$t.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const n=8,r=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+r-e.width/2)+", "+(e.y-e.height/2-n)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),r},"positionNode"),a8e=re((e,t,n,r,i,s)=>{t.arrowTypeStart&&$7(e,"start",t.arrowTypeStart,n,r,i,s),t.arrowTypeEnd&&$7(e,"end",t.arrowTypeEnd,n,r,i,s)},"addEdgeMarkers"),o8e={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},$7=re((e,t,n,r,i,s,a)=>{var d;const o=o8e[n];if(!o){$t.warn(`Unknown arrow type: ${n}`);return}const l=o.type,u=`${i}_${s}-${l}${t==="start"?"Start":"End"}`;if(a&&a.trim()!==""){const h=a.replace(/[^\dA-Za-z]/g,"_"),m=`${u}_${h}`;if(!document.getElementById(m)){const y=document.getElementById(u);if(y){const b=y.cloneNode(!0);b.id=m,b.querySelectorAll("path, circle, line").forEach(x=>{x.setAttribute("stroke",a),o.fill&&x.setAttribute("fill",a)}),(d=y.parentNode)==null||d.appendChild(b)}}e.attr(`marker-${t}`,`url(${r}#${m})`)}else e.attr(`marker-${t}`,`url(${r}#${u})`)},"addEdgeMarker"),sk=new Map,ua=new Map,ilt=re(()=>{sk.clear(),ua.clear()},"clear"),dv=re(e=>e?e.reduce((n,r)=>n+";"+r,""):"","getLabelStyles"),l8e=re(async(e,t)=>{let n=Os(ni().flowchart.htmlLabels);const r=await kh(e,t.label,{style:dv(t.labelStyle),useHtmlLabels:n,addSvgBackground:!0,isNode:!1});$t.info("abc82",t,t.labelType);const i=e.insert("g").attr("class","edgeLabel"),s=i.insert("g").attr("class","label");s.node().appendChild(r);let a=r.getBBox();if(n){const l=r.children[0],c=qr(r);a=l.getBoundingClientRect(),c.attr("width",a.width),c.attr("height",a.height)}s.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),sk.set(t.id,i),t.width=a.width,t.height=a.height;let o;if(t.startLabelLeft){const l=await _p(t.startLabelLeft,dv(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");o=u.node().appendChild(l);const d=l.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),ua.get(t.id)||ua.set(t.id,{}),ua.get(t.id).startLeft=c,Sv(o,t.startLabelLeft)}if(t.startLabelRight){const l=await _p(t.startLabelRight,dv(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");o=c.node().appendChild(l),u.node().appendChild(l);const d=l.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),ua.get(t.id)||ua.set(t.id,{}),ua.get(t.id).startRight=c,Sv(o,t.startLabelRight)}if(t.endLabelLeft){const l=await _p(t.endLabelLeft,dv(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");o=u.node().appendChild(l);const d=l.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),c.node().appendChild(l),ua.get(t.id)||ua.set(t.id,{}),ua.get(t.id).endLeft=c,Sv(o,t.endLabelLeft)}if(t.endLabelRight){const l=await _p(t.endLabelRight,dv(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");o=u.node().appendChild(l);const d=l.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),c.node().appendChild(l),ua.get(t.id)||ua.set(t.id,{}),ua.get(t.id).endRight=c,Sv(o,t.endLabelRight)}return r},"insertEdgeLabel");function Sv(e,t){ni().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}re(Sv,"setTerminalWidth");var c8e=re((e,t)=>{$t.debug("Moving label abc88 ",e.id,e.label,sk.get(e.id),t);let n=t.updatedPath?t.updatedPath:t.originalPath;const r=ni(),{subGraphTitleTotalMargin:i}=nD(r);if(e.label){const s=sk.get(e.id);let a=e.x,o=e.y;if(n){const l=Gc.calcLabelPosition(n);$t.debug("Moving label "+e.label+" from (",a,",",o,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(a=l.x,o=l.y)}s.attr("transform",`translate(${a}, ${o+i/2})`)}if(e.startLabelLeft){const s=ua.get(e.id).startLeft;let a=e.x,o=e.y;if(n){const l=Gc.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",n);a=l.x,o=l.y}s.attr("transform",`translate(${a}, ${o})`)}if(e.startLabelRight){const s=ua.get(e.id).startRight;let a=e.x,o=e.y;if(n){const l=Gc.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",n);a=l.x,o=l.y}s.attr("transform",`translate(${a}, ${o})`)}if(e.endLabelLeft){const s=ua.get(e.id).endLeft;let a=e.x,o=e.y;if(n){const l=Gc.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",n);a=l.x,o=l.y}s.attr("transform",`translate(${a}, ${o})`)}if(e.endLabelRight){const s=ua.get(e.id).endRight;let a=e.x,o=e.y;if(n){const l=Gc.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",n);a=l.x,o=l.y}s.attr("transform",`translate(${a}, ${o})`)}},"positionEdgeLabel"),u8e=re((e,t)=>{const n=e.x,r=e.y,i=Math.abs(t.x-n),s=Math.abs(t.y-r),a=e.width/2,o=e.height/2;return i>=a||s>=o},"outsideNode"),d8e=re((e,t,n)=>{$t.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(n)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const r=e.x,i=e.y,s=Math.abs(r-n.x),a=e.width/2;let o=n.x<t.x?a-s:a+s;const l=e.height/2,c=Math.abs(t.y-n.y),u=Math.abs(t.x-n.x);if(Math.abs(i-t.y)*a>Math.abs(r-t.x)*l){let d=n.y<t.y?t.y-l-i:i-l-t.y;o=u*d/c;const h={x:n.x<t.x?n.x+o:n.x-u+o,y:n.y<t.y?n.y+c-d:n.y-c+d};return o===0&&(h.x=t.x,h.y=t.y),u===0&&(h.x=t.x),c===0&&(h.y=t.y),$t.debug(`abc89 top/bottom calc, Q ${c}, q ${d}, R ${u}, r ${o}`,h),h}else{n.x<t.x?o=t.x-a-r:o=r-a-t.x;let d=c*o/u,h=n.x<t.x?n.x+u-o:n.x-u+o,m=n.y<t.y?n.y+d:n.y-d;return $t.debug(`sides calc abc89, Q ${c}, q ${d}, R ${u}, r ${o}`,{_x:h,_y:m}),o===0&&(h=t.x,m=t.y),u===0&&(h=t.x),c===0&&(m=t.y),{x:h,y:m}}},"intersection"),z7=re((e,t)=>{$t.warn("abc88 cutPathAtIntersect",e,t);let n=[],r=e[0],i=!1;return e.forEach(s=>{if($t.info("abc88 checking point",s,t),!u8e(t,s)&&!i){const a=d8e(t,r,s);$t.debug("abc88 inside",s,r,a),$t.debug("abc88 intersection",a,t);let o=!1;n.forEach(l=>{o=o||l.x===a.x&&l.y===a.y}),n.some(l=>l.x===a.x&&l.y===a.y)?$t.warn("abc88 no intersect",a,n):n.push(a),i=!0}else $t.warn("abc88 outside",s,r),r=s,i||n.push(s)}),$t.debug("returning points",n),n},"cutPathAtIntersect");function gne(e){const t=[],n=[];for(let r=1;r<e.length-1;r++){const i=e[r-1],s=e[r],a=e[r+1];(i.x===s.x&&s.y===a.y&&Math.abs(s.x-a.x)>5&&Math.abs(s.y-i.y)>5||i.y===s.y&&s.x===a.x&&Math.abs(s.x-i.x)>5&&Math.abs(s.y-a.y)>5)&&(t.push(s),n.push(r))}return{cornerPoints:t,cornerPointPositions:n}}re(gne,"extractCornerPoints");var U7=re(function(e,t,n){const r=t.x-e.x,i=t.y-e.y,s=Math.sqrt(r*r+i*i),a=n/s;return{x:t.x-a*r,y:t.y-a*i}},"findAdjacentPoint"),f8e=re(function(e){const{cornerPointPositions:t}=gne(e),n=[];for(let r=0;r<e.length;r++)if(t.includes(r)){const i=e[r-1],s=e[r+1],a=e[r],o=U7(i,a,5),l=U7(s,a,5),c=l.x-o.x,u=l.y-o.y;n.push(o);const d=Math.sqrt(2)*2;let h={x:a.x,y:a.y};if(Math.abs(s.x-i.x)>10&&Math.abs(s.y-i.y)>=10){$t.debug("Corner point fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));const m=5;a.x===o.x?h={x:c<0?o.x-m+d:o.x+m-d,y:u<0?o.y-d:o.y+d}:h={x:c<0?o.x-d:o.x+d,y:u<0?o.y-m+d:o.y+m-d}}else $t.debug("Corner point skipping fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));n.push(h,l)}else n.push(e[r]);return n},"fixCorners"),h8e=re(function(e,t,n,r,i,s,a){var M;const{handDrawnSeed:o}=ni();let l=t.points,c=!1;const u=i;var d=s;const h=[];for(const P in t.cssCompiledStyles)Jee(P)||h.push(t.cssCompiledStyles[P]);d.intersect&&u.intersect&&(l=l.slice(1,t.points.length-1),l.unshift(u.intersect(l[0])),$t.debug("Last point APA12",t.start,"-->",t.end,l[l.length-1],d,d.intersect(l[l.length-1])),l.push(d.intersect(l[l.length-1]))),t.toCluster&&($t.info("to cluster abc88",n.get(t.toCluster)),l=z7(t.points,n.get(t.toCluster).node),c=!0),t.fromCluster&&($t.debug("from cluster abc88",n.get(t.fromCluster),JSON.stringify(l,null,2)),l=z7(l.reverse(),n.get(t.fromCluster).node).reverse(),c=!0);let m=l.filter(P=>!Number.isNaN(P.y));m=f8e(m);let y=r2;switch(y=qC,t.curve){case"linear":y=qC;break;case"basis":y=r2;break;case"cardinal":y=BQ;break;case"bumpX":y=PQ;break;case"bumpY":y=OQ;break;case"catmullRom":y=zQ;break;case"monotoneX":y=GQ;break;case"monotoneY":y=KQ;break;case"natural":y=ZQ;break;case"step":y=XQ;break;case"stepAfter":y=QQ;break;case"stepBefore":y=JQ;break;default:y=r2}const{x:b,y:v}=D3e(t),x=IOe().x(b).y(v).curve(y);let _;switch(t.thickness){case"normal":_="edge-thickness-normal";break;case"thick":_="edge-thickness-thick";break;case"invisible":_="edge-thickness-invisible";break;default:_="edge-thickness-normal"}switch(t.pattern){case"solid":_+=" edge-pattern-solid";break;case"dotted":_+=" edge-pattern-dotted";break;case"dashed":_+=" edge-pattern-dashed";break;default:_+=" edge-pattern-solid"}let S,C=x(m);const E=Array.isArray(t.style)?t.style:[t.style];let A=E.find(P=>P==null?void 0:P.startsWith("stroke:"));if(t.look==="handDrawn"){const P=Sn.svg(e);Object.assign([],m);const L=P.path(C,{roughness:.3,seed:o});_+=" transition",S=qr(L).select("path").attr("id",t.id).attr("class"," "+_+(t.classes?" "+t.classes:"")).attr("style",E?E.reduce((V,F)=>V+";"+F,""):"");let O=S.attr("d");S.attr("d",O),e.node().appendChild(S.node())}else{const P=h.join(";"),L=E?E.reduce((F,J)=>F+J+";",""):"";let O="";t.animate&&(O=" edge-animation-fast"),t.animation&&(O=" edge-animation-"+t.animation);const V=P?P+";"+L+";":L;S=e.append("path").attr("d",C).attr("id",t.id).attr("class"," "+_+(t.classes?" "+t.classes:"")+(O??"")).attr("style",V),A=(M=V.match(/stroke:([^;]+)/))==null?void 0:M[1]}let R="";(ni().flowchart.arrowMarkerAbsolute||ni().state.arrowMarkerAbsolute)&&(R=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,R=R.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),$t.info("arrowTypeStart",t.arrowTypeStart),$t.info("arrowTypeEnd",t.arrowTypeEnd),a8e(S,t,R,a,r,A);let N={};return c&&(N.updatedPath=l),N.originalPath=t.points,N},"insertEdge"),p8e=re((e,t,n,r)=>{t.forEach(i=>{I8e[i](e,n,r)})},"insertMarkers"),m8e=re((e,t,n)=>{$t.trace("Making markers for ",n),e.append("defs").append("marker").attr("id",n+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),g8e=re((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),y8e=re((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),b8e=re((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",n+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),v8e=re((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",n+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),x8e=re((e,t,n)=>{e.append("marker").attr("id",n+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",n+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),w8e=re((e,t,n)=>{e.append("marker").attr("id",n+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",n+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),_8e=re((e,t,n)=>{e.append("marker").attr("id",n+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",n+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),S8e=re((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),C8e=re((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",n+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),k8e=re((e,t,n)=>{const r=e.append("defs").append("marker").attr("id",n+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("d","M9,0 L9,18");const i=e.append("defs").append("marker").attr("id",n+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),E8e=re((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",n+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),T8e=re((e,t,n)=>{const r=e.append("defs").append("marker").attr("id",n+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=e.append("defs").append("marker").attr("id",n+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),A8e=re((e,t,n)=>{e.append("defs").append("marker").attr("id",n+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),R8e=re((e,t,n)=>{const r=e.append("defs").append("marker").attr("id",n+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");r.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),r.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),r.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),I8e={extension:m8e,composition:g8e,aggregation:y8e,dependency:b8e,lollipop:v8e,point:x8e,circle:w8e,cross:_8e,barb:S8e,only_one:C8e,zero_or_one:k8e,one_or_more:E8e,zero_or_more:T8e,requirement_arrow:A8e,requirement_contains:R8e},N8e=p8e,M8e={common:vy,getConfig:wo,insertCluster:$Fe,insertEdge:h8e,insertEdgeLabel:l8e,insertMarkers:N8e,insertNode:mne,interpolateToCurve:vD,labelHelper:or,log:$t,positionEdgeLabel:c8e},qx={},yne=re(e=>{for(const t of e)qx[t.name]=t},"registerLayoutLoaders"),j8e=re(()=>{yne([{name:"dagre",loader:re(async()=>await Hr(()=>import("./dagre-OKDRZEBW-Bouhw-G9.js"),__vite__mapDeps([0,1,2,3,4,5])),"loader")}])},"registerDefaultLayoutLoaders");j8e();var slt=re(async(e,t)=>{if(!(e.layoutAlgorithm in qx))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const n=qx[e.layoutAlgorithm];return(await n.loader()).render(e,t,M8e,{algorithm:n.algorithm})},"render"),alt=re((e="",{fallback:t="dagre"}={})=>{if(e in qx)return e;if(t in qx)return $t.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),q7={name:"mermaid",version:"11.6.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.0.4","@iconify/utils":"^2.1.33","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.13",dompurify:"^3.2.4",katex:"^0.16.9",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^15.0.7",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.2","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",chokidar:"^4.0.3",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.0.2",jison:"^0.4.18","js-base64":"^3.7.7",jsdom:"^26.0.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.2",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.10","type-fest":"^4.35.0",typedoc:"^0.27.8","typedoc-plugin-markdown":"^4.4.2",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.0.2","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},P8e=re(e=>{var i;const{securityLevel:t}=ni();let n=qr("body");if(t==="sandbox"){const a=((i=qr(`#i${e}`).node())==null?void 0:i.contentDocument)??document;n=qr(a.body)}return n.select(`#${e}`)},"selectSvgElement"),bne="comm",vne="rule",xne="decl",O8e="@import",D8e="@namespace",F8e="@keyframes",L8e="@layer",wne=Math.abs,BD=String.fromCharCode;function _ne(e){return e.trim()}function o2(e,t,n){return e.replace(t,n)}function B8e(e,t,n){return e.indexOf(t,n)}function Zg(e,t){return e.charCodeAt(t)|0}function z0(e,t,n){return e.slice(t,n)}function Uc(e){return e.length}function $8e(e){return e.length}function mS(e,t){return t.push(e),e}var iT=1,U0=1,Sne=0,Rl=0,_s=0,Cy="";function $D(e,t,n,r,i,s,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:iT,column:U0,length:a,return:"",siblings:o}}function z8e(){return _s}function U8e(){return _s=Rl>0?Zg(Cy,--Rl):0,U0--,_s===10&&(U0=1,iT--),_s}function oc(){return _s=Rl<Sne?Zg(Cy,Rl++):0,U0++,_s===10&&(U0=1,iT++),_s}function Lf(){return Zg(Cy,Rl)}function l2(){return Rl}function sT(e,t){return z0(Cy,e,t)}function Vx(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function q8e(e){return iT=U0=1,Sne=Uc(Cy=e),Rl=0,[]}function V8e(e){return Cy="",e}function aM(e){return _ne(sT(Rl-1,G4(e===91?e+2:e===40?e+1:e)))}function H8e(e){for(;(_s=Lf())&&_s<33;)oc();return Vx(e)>2||Vx(_s)>3?"":" "}function W8e(e,t){for(;--t&&oc()&&!(_s<48||_s>102||_s>57&&_s<65||_s>70&&_s<97););return sT(e,l2()+(t<6&&Lf()==32&&oc()==32))}function G4(e){for(;oc();)switch(_s){case e:return Rl;case 34:case 39:e!==34&&e!==39&&G4(_s);break;case 40:e===41&&G4(e);break;case 92:oc();break}return Rl}function G8e(e,t){for(;oc()&&e+_s!==57;)if(e+_s===84&&Lf()===47)break;return"/*"+sT(t,Rl-1)+"*"+BD(e===47?e:oc())}function K8e(e){for(;!Vx(Lf());)oc();return sT(e,Rl)}function Y8e(e){return V8e(c2("",null,null,null,[""],e=q8e(e),0,[0],e))}function c2(e,t,n,r,i,s,a,o,l){for(var c=0,u=0,d=a,h=0,m=0,y=0,b=1,v=1,x=1,_=0,S="",C=i,E=s,A=r,R=S;v;)switch(y=_,_=oc()){case 40:if(y!=108&&Zg(R,d-1)==58){B8e(R+=o2(aM(_),"&","&\f"),"&\f",wne(c?o[c-1]:0))!=-1&&(x=-1);break}case 34:case 39:case 91:R+=aM(_);break;case 9:case 10:case 13:case 32:R+=H8e(y);break;case 92:R+=W8e(l2()-1,7);continue;case 47:switch(Lf()){case 42:case 47:mS(Z8e(G8e(oc(),l2()),t,n,l),l),(Vx(y||1)==5||Vx(Lf()||1)==5)&&Uc(R)&&z0(R,-1,void 0)!==" "&&(R+=" ");break;default:R+="/"}break;case 123*b:o[c++]=Uc(R)*x;case 125*b:case 59:case 0:switch(_){case 0:case 125:v=0;case 59+u:x==-1&&(R=o2(R,/\f/g,"")),m>0&&(Uc(R)-d||b===0&&y===47)&&mS(m>32?H7(R+";",r,n,d-1,l):H7(o2(R," ","")+";",r,n,d-2,l),l);break;case 59:R+=";";default:if(mS(A=V7(R,t,n,c,u,i,o,S,C=[],E=[],d,s),s),_===123)if(u===0)c2(R,t,A,A,C,s,d,o,E);else{switch(h){case 99:if(Zg(R,3)===110)break;case 108:if(Zg(R,2)===97)break;default:u=0;case 100:case 109:case 115:}u?c2(e,A,A,r&&mS(V7(e,A,A,0,0,i,o,S,i,C=[],d,E),E),i,E,d,o,r?C:E):c2(R,A,A,A,[""],E,0,o,E)}}c=u=m=0,b=x=1,S=R="",d=a;break;case 58:d=1+Uc(R),m=y;default:if(b<1){if(_==123)--b;else if(_==125&&b++==0&&U8e()==125)continue}switch(R+=BD(_),_*b){case 38:x=u>0?1:(R+="\f",-1);break;case 44:o[c++]=(Uc(R)-1)*x,x=1;break;case 64:Lf()===45&&(R+=aM(oc())),h=Lf(),u=d=Uc(S=R+=K8e(l2())),_++;break;case 45:y===45&&Uc(R)==2&&(b=0)}}return s}function V7(e,t,n,r,i,s,a,o,l,c,u,d){for(var h=i-1,m=i===0?s:[""],y=$8e(m),b=0,v=0,x=0;b<r;++b)for(var _=0,S=z0(e,h+1,h=wne(v=a[b])),C=e;_<y;++_)(C=_ne(v>0?m[_]+" "+S:o2(S,/&\f/g,m[_])))&&(l[x++]=C);return $D(e,t,n,i===0?vne:o,l,c,u,d)}function Z8e(e,t,n,r){return $D(e,t,n,bne,BD(z8e()),z0(e,2,-2),0,r)}function H7(e,t,n,r,i){return $D(e,t,n,xne,z0(e,0,r),z0(e,r+1,-1),r,i)}function K4(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function X8e(e,t,n,r){switch(e.type){case L8e:if(e.children.length)break;case O8e:case D8e:case xne:return e.return=e.return||e.value;case bne:return"";case F8e:return e.return=e.value+"{"+K4(e.children,r)+"}";case vne:if(!Uc(e.value=e.props.join(",")))return""}return Uc(n=K4(e.children,r))?e.return=e.value+"{"+n+"}":""}var J8e=ree(Object.keys,Object),Q8e=Object.prototype,eLe=Q8e.hasOwnProperty;function tLe(e){if(!YE(e))return J8e(e);var t=[];for(var n in Object(e))eLe.call(e,n)&&n!="constructor"&&t.push(n);return t}var Y4=gm(_u,"DataView"),Z4=gm(_u,"Promise"),X4=gm(_u,"Set"),J4=gm(_u,"WeakMap"),W7="[object Map]",nLe="[object Object]",G7="[object Promise]",K7="[object Set]",Y7="[object WeakMap]",Z7="[object DataView]",rLe=mm(Y4),iLe=mm(Ux),sLe=mm(Z4),aLe=mm(X4),oLe=mm(J4),up=xy;(Y4&&up(new Y4(new ArrayBuffer(1)))!=Z7||Ux&&up(new Ux)!=W7||Z4&&up(Z4.resolve())!=G7||X4&&up(new X4)!=K7||J4&&up(new J4)!=Y7)&&(up=function(e){var t=xy(e),n=t==nLe?e.constructor:void 0,r=n?mm(n):"";if(r)switch(r){case rLe:return Z7;case iLe:return W7;case sLe:return G7;case aLe:return K7;case oLe:return Y7}return t});var lLe="[object Map]",cLe="[object Set]",uLe=Object.prototype,dLe=uLe.hasOwnProperty;function X7(e){if(e==null)return!0;if(ZE(e)&&(ZC(e)||typeof e=="string"||typeof e.splice=="function"||yD(e)||bD(e)||YC(e)))return!e.length;var t=up(e);if(t==lLe||t==cLe)return!e.size;if(YE(e))return!tLe(e).length;for(var n in e)if(dLe.call(e,n))return!1;return!0}var Cne="c4",fLe=re(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),hLe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./c4Diagram-VJAJSXHY-CeR5mAZe.js");return{diagram:t}},__vite__mapDeps([6,7]));return{id:Cne,diagram:e}},"loader"),pLe={id:Cne,detector:fLe,loader:hLe},mLe=pLe,kne="flowchart",gLe=re((e,t)=>{var n,r;return((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"||((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},"detector"),yLe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./flowDiagram-4HSFHLVR-BrbjO9jf.js");return{diagram:t}},__vite__mapDeps([8,9,10]));return{id:kne,diagram:e}},"loader"),bLe={id:kne,detector:gLe,loader:yLe},vLe=bLe,Ene="flowchart-v2",xLe=re((e,t)=>{var n,r,i;return((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="dagre-d3"?!1:(((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e))},"detector"),wLe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./flowDiagram-4HSFHLVR-BrbjO9jf.js");return{diagram:t}},__vite__mapDeps([8,9,10]));return{id:Ene,diagram:e}},"loader"),_Le={id:Ene,detector:xLe,loader:wLe},SLe=_Le,Tne="er",CLe=re(e=>/^\s*erDiagram/.test(e),"detector"),kLe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./erDiagram-Q7BY3M3F-dpgpAh85.js");return{diagram:t}},__vite__mapDeps([11,9,10]));return{id:Tne,diagram:e}},"loader"),ELe={id:Tne,detector:CLe,loader:kLe},TLe=ELe,Ane="gitGraph",ALe=re(e=>/^\s*gitGraph/.test(e),"detector"),RLe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./gitGraphDiagram-7IBYFJ6S-DgpZ79PR.js");return{diagram:t}},__vite__mapDeps([12,13,14,15,2,4,5]));return{id:Ane,diagram:e}},"loader"),ILe={id:Ane,detector:ALe,loader:RLe},NLe=ILe,Rne="gantt",MLe=re(e=>/^\s*gantt/.test(e),"detector"),jLe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./ganttDiagram-APWFNJXF-DNj2O2Nh.js");return{diagram:t}},__vite__mapDeps([16,17,18]));return{id:Rne,diagram:e}},"loader"),PLe={id:Rne,detector:MLe,loader:jLe},OLe=PLe,Ine="info",DLe=re(e=>/^\s*info/.test(e),"detector"),FLe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./infoDiagram-PH2N3AL5-c3SyRa8v.js");return{diagram:t}},__vite__mapDeps([19,15,2,4,5]));return{id:Ine,diagram:e}},"loader"),LLe={id:Ine,detector:DLe,loader:FLe},Nne="pie",BLe=re(e=>/^\s*pie/.test(e),"detector"),$Le=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./pieDiagram-IB7DONF6-DSBUQhop.js");return{diagram:t}},__vite__mapDeps([20,13,15,2,4,5,21,22,18]));return{id:Nne,diagram:e}},"loader"),zLe={id:Nne,detector:BLe,loader:$Le},Mne="quadrantChart",ULe=re(e=>/^\s*quadrantChart/.test(e),"detector"),qLe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./quadrantDiagram-7GDLP6J5-DE8tEgp8.js");return{diagram:t}},__vite__mapDeps([23,17,18]));return{id:Mne,diagram:e}},"loader"),VLe={id:Mne,detector:ULe,loader:qLe},HLe=VLe,jne="xychart",WLe=re(e=>/^\s*xychart-beta/.test(e),"detector"),GLe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./xychartDiagram-VJFVF3MP-DzmPN1hM.js");return{diagram:t}},__vite__mapDeps([24,18,22,17]));return{id:jne,diagram:e}},"loader"),KLe={id:jne,detector:WLe,loader:GLe},YLe=KLe,Pne="requirement",ZLe=re(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),XLe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./requirementDiagram-KVF5MWMF-DNurxv1a.js");return{diagram:t}},__vite__mapDeps([25,9]));return{id:Pne,diagram:e}},"loader"),JLe={id:Pne,detector:ZLe,loader:XLe},QLe=JLe,One="sequence",eBe=re(e=>/^\s*sequenceDiagram/.test(e),"detector"),tBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./sequenceDiagram-X6HHIX6F-qVjFHMm1.js");return{diagram:t}},__vite__mapDeps([26,7,14]));return{id:One,diagram:e}},"loader"),nBe={id:One,detector:eBe,loader:tBe},rBe=nBe,Dne="class",iBe=re((e,t)=>{var n;return((n=t==null?void 0:t.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},"detector"),sBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./classDiagram-GIVACNV2-Cu1h-hIZ.js");return{diagram:t}},__vite__mapDeps([27,28,9]));return{id:Dne,diagram:e}},"loader"),aBe={id:Dne,detector:iBe,loader:sBe},oBe=aBe,Fne="classDiagram",lBe=re((e,t)=>{var n;return/^\s*classDiagram/.test(e)&&((n=t==null?void 0:t.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},"detector"),cBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./classDiagram-v2-COTLJTTW-Cu1h-hIZ.js");return{diagram:t}},__vite__mapDeps([29,28,9]));return{id:Fne,diagram:e}},"loader"),uBe={id:Fne,detector:lBe,loader:cBe},dBe=uBe,Lne="state",fBe=re((e,t)=>{var n;return((n=t==null?void 0:t.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},"detector"),hBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./stateDiagram-DGXRK772-gLshp-wv.js");return{diagram:t}},__vite__mapDeps([30,31,9,1,2,3,4]));return{id:Lne,diagram:e}},"loader"),pBe={id:Lne,detector:fBe,loader:hBe},mBe=pBe,Bne="stateDiagram",gBe=re((e,t)=>{var n;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((n=t==null?void 0:t.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper")},"detector"),yBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./stateDiagram-v2-YXO3MK2T-B6kWpfrU.js");return{diagram:t}},__vite__mapDeps([32,31,9]));return{id:Bne,diagram:e}},"loader"),bBe={id:Bne,detector:gBe,loader:yBe},vBe=bBe,$ne="journey",xBe=re(e=>/^\s*journey/.test(e),"detector"),wBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./journeyDiagram-U35MCT3I-Bmv61SIJ.js");return{diagram:t}},__vite__mapDeps([33,7,21]));return{id:$ne,diagram:e}},"loader"),_Be={id:$ne,detector:xBe,loader:wBe},SBe=_Be,CBe=re((e,t,n)=>{$t.debug(`rendering svg for syntax error
`);const r=P8e(t),i=r.append("g");r.attr("viewBox","0 0 2412 512"),xX(r,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${n}`)},"draw"),zne={draw:CBe},kBe=zne,EBe={db:{},renderer:zne,parser:{parse:re(()=>{},"parse")}},TBe=EBe,Une="flowchart-elk",ABe=re((e,t={})=>{var n;return/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="elk"?(t.layout="elk",!0):!1},"detector"),RBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./flowDiagram-4HSFHLVR-BrbjO9jf.js");return{diagram:t}},__vite__mapDeps([8,9,10]));return{id:Une,diagram:e}},"loader"),IBe={id:Une,detector:ABe,loader:RBe},NBe=IBe,qne="timeline",MBe=re(e=>/^\s*timeline/.test(e),"detector"),jBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./timeline-definition-BDJGKUSR-DiCFFxoj.js");return{diagram:t}},__vite__mapDeps([34,21]));return{id:qne,diagram:e}},"loader"),PBe={id:qne,detector:MBe,loader:jBe},OBe=PBe,Vne="mindmap",DBe=re(e=>/^\s*mindmap/.test(e),"detector"),FBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./mindmap-definition-ALO5MXBD-DRlGWT3o.js");return{diagram:t}},__vite__mapDeps([35,36]));return{id:Vne,diagram:e}},"loader"),LBe={id:Vne,detector:DBe,loader:FBe},BBe=LBe,Hne="kanban",$Be=re(e=>/^\s*kanban/.test(e),"detector"),zBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./kanban-definition-NDS4AKOZ-CfLXOZAp.js");return{diagram:t}},[]);return{id:Hne,diagram:e}},"loader"),UBe={id:Hne,detector:$Be,loader:zBe},qBe=UBe,Wne="sankey",VBe=re(e=>/^\s*sankey-beta/.test(e),"detector"),HBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./sankeyDiagram-QLVOVGJD-WsflEHXC.js");return{diagram:t}},__vite__mapDeps([37,22,18]));return{id:Wne,diagram:e}},"loader"),WBe={id:Wne,detector:VBe,loader:HBe},GBe=WBe,Gne="packet",KBe=re(e=>/^\s*packet-beta/.test(e),"detector"),YBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./diagram-VNBRO52H--1nayhVw.js");return{diagram:t}},__vite__mapDeps([38,13,15,2,4,5]));return{id:Gne,diagram:e}},"loader"),ZBe={id:Gne,detector:KBe,loader:YBe},Kne="radar",XBe=re(e=>/^\s*radar-beta/.test(e),"detector"),JBe=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./diagram-SSKATNLV-BlZ__QQf.js");return{diagram:t}},__vite__mapDeps([39,13,15,2,4,5]));return{id:Kne,diagram:e}},"loader"),QBe={id:Kne,detector:XBe,loader:JBe},Yne="block",e$e=re(e=>/^\s*block-beta/.test(e),"detector"),t$e=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./blockDiagram-JOT3LUYC-B3h2gQZO.js");return{diagram:t}},__vite__mapDeps([40,5,2,1,10]));return{id:Yne,diagram:e}},"loader"),n$e={id:Yne,detector:e$e,loader:t$e},r$e=n$e,Zne="architecture",i$e=re(e=>/^\s*architecture/.test(e),"detector"),s$e=re(async()=>{const{diagram:e}=await Hr(async()=>{const{diagram:t}=await import("./architectureDiagram-IEHRJDOE-BdpKqh0S.js");return{diagram:t}},__vite__mapDeps([41,13,14,15,2,4,5,36]));return{id:Zne,diagram:e}},"loader"),a$e={id:Zne,detector:i$e,loader:s$e},o$e=a$e,J7=!1,aT=re(()=>{J7||(J7=!0,RC("error",TBe,e=>e.toLowerCase().trim()==="error"),RC("---",{db:{clear:re(()=>{},"clear")},styles:{},renderer:{draw:re(()=>{},"draw")},parser:{parse:re(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:re(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),oX(mLe,qBe,dBe,oBe,TLe,OLe,LLe,zLe,QLe,rBe,NBe,SLe,vLe,BBe,OBe,NLe,vBe,mBe,SBe,HLe,GBe,ZBe,YLe,r$e,o$e,QBe))},"addDiagrams"),l$e=re(async()=>{$t.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(j0).map(async([n,{detector:r,loader:i}])=>{if(i)try{u4(n)}catch{try{const{diagram:s,id:a}=await i();RC(a,s,r)}catch(s){throw $t.error(`Failed to load external diagram with key ${n}. Removing from detectors.`),delete j0[n],s}}}))).filter(n=>n.status==="rejected");if(t.length>0){$t.error(`Failed to load ${t.length} external diagrams`);for(const n of t)$t.error(n);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),c$e="graphics-document document";function Xne(e,t){e.attr("role",c$e),t!==""&&e.attr("aria-roledescription",t)}re(Xne,"setA11yDiagramInfo");function Jne(e,t,n,r){if(e.insert!==void 0){if(n){const i=`chart-desc-${r}`;e.attr("aria-describedby",i),e.insert("desc",":first-child").attr("id",i).text(n)}if(t){const i=`chart-title-${r}`;e.attr("aria-labelledby",i),e.insert("title",":first-child").attr("id",i).text(t)}}}re(Jne,"addSVGa11yTitleDescription");var Np,Q4=(Np=class{constructor(t,n,r,i,s){this.type=t,this.text=n,this.db=r,this.parser=i,this.renderer=s}static async fromText(t,n={}){var c,u;const r=wo(),i=UO(t,r);t=I5e(t)+`
`;try{u4(i)}catch{const d=DNe(i);if(!d)throw new aX(`Diagram ${i} not found.`);const{id:h,diagram:m}=await d();RC(h,m)}const{db:s,parser:a,renderer:o,init:l}=u4(i);return a.parser&&(a.parser.yy=s),(c=s.clear)==null||c.call(s),l==null||l(r),n.title&&((u=s.setDiagramTitle)==null||u.call(s,n.title)),await a.parse(t),new Np(i,t,s,a,o)}async render(t,n){await this.renderer.draw(this.text,t,n,this)}getParser(){return this.parser}getType(){return this.type}},re(Np,"Diagram"),Np),Q7=[],u$e=re(()=>{Q7.forEach(e=>{e()}),Q7=[]},"attachFunctions"),d$e=re(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function Qne(e){const t=e.match(sX);if(!t)return{text:e,metadata:{}};let n=O3e(t[1],{schema:P3e})??{};n=typeof n=="object"&&!Array.isArray(n)?n:{};const r={};return n.displayMode&&(r.displayMode=n.displayMode.toString()),n.title&&(r.title=n.title.toString()),n.config&&(r.config=n.config),{text:e.slice(t[0].length),metadata:r}}re(Qne,"extractFrontMatter");var f$e=re(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,n,r)=>"<"+n+r.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),h$e=re(e=>{const{text:t,metadata:n}=Qne(e),{displayMode:r,title:i,config:s={}}=n;return r&&(s.gantt||(s.gantt={}),s.gantt.displayMode=r),{title:i,config:s,text:t}},"processFrontmatter"),p$e=re(e=>{const t=Gc.detectInit(e)??{},n=Gc.detectDirective(e,"wrap");return Array.isArray(n)?t.wrap=n.some(({type:r})=>r==="wrap"):(n==null?void 0:n.type)==="wrap"&&(t.wrap=!0),{text:y5e(e),directive:t}},"processDirectives");function zD(e){const t=f$e(e),n=h$e(t),r=p$e(n.text),i=CD(n.config,r.directive);return e=d$e(r.text),{code:e,title:n.title,config:i}}re(zD,"preprocessDiagram");function ere(e){const t=new TextEncoder().encode(e),n=Array.from(t,r=>String.fromCodePoint(r)).join("");return btoa(n)}re(ere,"toBase64");var m$e=5e4,g$e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",y$e="sandbox",b$e="loose",v$e="http://www.w3.org/2000/svg",x$e="http://www.w3.org/1999/xlink",w$e="http://www.w3.org/1999/xhtml",_$e="100%",S$e="100%",C$e="border:0;margin:0;",k$e="margin:0",E$e="allow-top-navigation-by-user-activation allow-popups",T$e='The "iframe" tag is not supported by your browser.',A$e=["foreignobject"],R$e=["dominant-baseline"];function UD(e){const t=zD(e);return TC(),JNe(t.config??{}),t}re(UD,"processAndSetConfigs");async function tre(e,t){aT();try{const{code:n,config:r}=UD(e);return{diagramType:(await rre(n)).type,config:r}}catch(n){if(t!=null&&t.suppressErrors)return!1;throw n}}re(tre,"parse");var eU=re((e,t,n=[])=>`
.${e} ${t} { ${n.join(" !important; ")} !important; }`,"cssImportantStyles"),I$e=re((e,t=new Map)=>{var r;let n="";if(e.themeCSS!==void 0&&(n+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(n+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(n+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const o=e.htmlLabels??((r=e.flowchart)==null?void 0:r.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(l=>{X7(l.styles)||o.forEach(c=>{n+=eU(l.id,c,l.styles)}),X7(l.textStyles)||(n+=eU(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(c=>c.replace("color","fill"))))})}return n},"createCssStyles"),N$e=re((e,t,n,r)=>{const i=I$e(e,n),s=yMe(t,i,e.themeVariables);return K4(Y8e(`${r}{${s}}`),X8e)},"createUserStyles"),M$e=re((e="",t,n)=>{let r=e;return!n&&!t&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=ym(r),r=r.replace(/<br>/g,"<br/>"),r},"cleanUpSvgCode"),j$e=re((e="",t)=>{var i,s;const n=(s=(i=t==null?void 0:t.viewBox)==null?void 0:i.baseVal)!=null&&s.height?t.viewBox.baseVal.height+"px":S$e,r=ere(`<body style="${k$e}">${e}</body>`);return`<iframe style="width:${_$e};height:${n};${C$e}" src="data:text/html;charset=UTF-8;base64,${r}" sandbox="${E$e}">
  ${T$e}
</iframe>`},"putIntoIFrame"),tU=re((e,t,n,r,i)=>{const s=e.append("div");s.attr("id",n),r&&s.attr("style",r);const a=s.append("svg").attr("id",t).attr("width","100%").attr("xmlns",v$e);return i&&a.attr("xmlns:xlink",i),a.append("g"),e},"appendDivSvgG");function ej(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}re(ej,"sandboxedIframe");var P$e=re((e,t,n,r)=>{var i,s,a;(i=e.getElementById(t))==null||i.remove(),(s=e.getElementById(n))==null||s.remove(),(a=e.getElementById(r))==null||a.remove()},"removeExistingElements"),O$e=re(async function(e,t,n){var O,V,F,J,U,G;aT();const r=UD(t);t=r.code;const i=wo();$t.debug(i),t.length>((i==null?void 0:i.maxTextSize)??m$e)&&(t=g$e);const s="#"+e,a="i"+e,o="#"+a,l="d"+e,c="#"+l,u=re(()=>{const ne=qr(h?o:c).node();ne&&"remove"in ne&&ne.remove()},"removeTempElements");let d=qr("body");const h=i.securityLevel===y$e,m=i.securityLevel===b$e,y=i.fontFamily;if(n!==void 0){if(n&&(n.innerHTML=""),h){const $=ej(qr(n),a);d=qr($.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=qr(n);tU(d,e,l,`font-family: ${y}`,x$e)}else{if(P$e(document,e,l,a),h){const $=ej(qr("body"),a);d=qr($.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=qr("body");tU(d,e,l)}let b,v;try{b=await Q4.fromText(t,{title:r.title})}catch($){if(i.suppressErrorRendering)throw u(),$;b=await Q4.fromText("error"),v=$}const x=d.select(c).node(),_=b.type,S=x.firstChild,C=S.firstChild,E=(V=(O=b.renderer).getClasses)==null?void 0:V.call(O,t,b),A=N$e(i,_,E,s),R=document.createElement("style");R.innerHTML=A,S.insertBefore(R,C);try{await b.renderer.draw(t,e,q7.version,b)}catch($){throw i.suppressErrorRendering?u():kBe.draw(t,e,q7.version),$}const N=d.select(`${c} svg`),M=(J=(F=b.db).getAccTitle)==null?void 0:J.call(F),P=(G=(U=b.db).getAccDescription)==null?void 0:G.call(U);ire(_,N,M,P),d.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",w$e);let L=d.select(c).node().innerHTML;if($t.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),L=M$e(L,h,Os(i.arrowMarkerAbsolute)),h){const $=d.select(c+" svg").node();L=j$e(L,$)}else m||(L=M0.sanitize(L,{ADD_TAGS:A$e,ADD_ATTR:R$e,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(u$e(),v)throw v;return u(),{diagramType:_,svg:L,bindFunctions:b.db.bindFunctions}},"render");function nre(e={}){var r;const t=ha({},e);t!=null&&t.fontFamily&&!((r=t.themeVariables)!=null&&r.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),ZNe(t),t!=null&&t.theme&&t.theme in pd?t.themeVariables=pd[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=pd.default.getThemeVariables(t.themeVariables));const n=typeof t=="object"?YNe(t):hX();zO(n.logLevel),aT()}re(nre,"initialize");var rre=re((e,t={})=>{const{code:n}=zD(e);return Q4.fromText(n,t)},"getDiagramFromText");function ire(e,t,n,r){Xne(t,e),Jne(t,n,r,t.attr("id"))}re(ire,"addA11yInfo");var Yp=Object.freeze({render:O$e,parse:tre,getDiagramFromText:rre,initialize:nre,getConfig:wo,setConfig:pX,getSiteConfig:hX,updateSiteConfig:XNe,reset:re(()=>{TC()},"reset"),globalReset:re(()=>{TC(P0)},"globalReset"),defaultConfig:P0});zO(wo().logLevel);TC(wo());var D$e=re((e,t,n)=>{$t.warn(e),SD(e)?(n&&n(e.str,e.hash),t.push({...e,message:e.str,error:e})):(n&&n(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),sre=re(async function(e={querySelector:".mermaid"}){try{await F$e(e)}catch(t){if(SD(t)&&$t.error(t.str),Go.parseError&&Go.parseError(t),!e.suppressErrors)throw $t.error("Use the suppressErrors option to suppress these errors"),t}},"run"),F$e=re(async function({postRenderCallback:e,querySelector:t,nodes:n}={querySelector:".mermaid"}){const r=Yp.getConfig();$t.debug(`${e?"":"No "}Callback function found`);let i;if(n)i=n;else if(t)i=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");$t.debug(`Found ${i.length} diagrams`),(r==null?void 0:r.startOnLoad)!==void 0&&($t.debug("Start On Load: "+(r==null?void 0:r.startOnLoad)),Yp.updateSiteConfig({startOnLoad:r==null?void 0:r.startOnLoad}));const s=new Gc.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let a;const o=[];for(const l of Array.from(i)){if($t.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;a=l.innerHTML,a=jee(Gc.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=Gc.detectInit(a);u&&$t.debug("Detected early reinit: ",u);try{const{svg:d,bindFunctions:h}=await cre(c,a,l);l.innerHTML=d,e&&await e(c),h&&h(l)}catch(d){D$e(d,o,Go.parseError)}}if(o.length>0)throw o[0]},"runThrowsErrors"),are=re(function(e){Yp.initialize(e)},"initialize"),L$e=re(async function(e,t,n){$t.warn("mermaid.init is deprecated. Please use run instead."),e&&are(e);const r={postRenderCallback:n,querySelector:".mermaid"};typeof t=="string"?r.querySelector=t:t&&(t instanceof HTMLElement?r.nodes=[t]:r.nodes=t),await sre(r)},"init"),B$e=re(async(e,{lazyLoad:t=!0}={})=>{aT(),oX(...e),t===!1&&await l$e()},"registerExternalDiagrams"),ore=re(function(){if(Go.startOnLoad){const{startOnLoad:e}=Yp.getConfig();e&&Go.run().catch(t=>$t.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",ore,!1);var $$e=re(function(e){Go.parseError=e},"setParseErrorHandler"),ak=[],oM=!1,lre=re(async()=>{if(!oM){for(oM=!0;ak.length>0;){const e=ak.shift();if(e)try{await e()}catch(t){$t.error("Error executing queue",t)}}oM=!1}},"executeQueue"),z$e=re(async(e,t)=>new Promise((n,r)=>{const i=re(()=>new Promise((s,a)=>{Yp.parse(e,t).then(o=>{s(o),n(o)},o=>{var l;$t.error("Error parsing",o),(l=Go.parseError)==null||l.call(Go,o),a(o),r(o)})}),"performCall");ak.push(i),lre().catch(r)}),"parse"),cre=re((e,t,n)=>new Promise((r,i)=>{const s=re(()=>new Promise((a,o)=>{Yp.render(e,t,n).then(l=>{a(l),r(l)},l=>{var c;$t.error("Error parsing",l),(c=Go.parseError)==null||c.call(Go,l),o(l),i(l)})}),"performCall");ak.push(s),lre().catch(i)}),"render"),Go={startOnLoad:!0,mermaidAPI:Yp,parse:z$e,render:cre,init:L$e,run:sre,registerExternalDiagrams:B$e,registerLayoutLoaders:yne,initialize:are,parseError:void 0,contentLoaded:ore,setParseErrorHandler:$$e,detectType:UO,registerIconPacks:i4e},U$e=Go;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const q$e=new DOMParser,V$e=new XMLSerializer;function nU(e,t){const n=e.getAttribute(t);if(!n)return;let r="";for(const i of n.split(/\s+/)){const s=e.getElementById(i);s&&(r+=s.textContent)}return r}let rU=0;const H$e=async(e,t)=>{const n=document.createElement("div");n.ariaHidden="true",n.style.maxHeight="0",n.style.opacity="0",n.style.overflow="hidden",t!=null&&t.containerStyle&&Object.assign(n.style,t.containerStyle),document.body.append(n);const r=await Promise.allSettled(e.map(async i=>{const s=`${(t==null?void 0:t.prefix)??"mermaid"}-${rU}`;rU+=1;const{svg:a}=await U$e.render(s,i,n),o=q$e.parseFromString(a,"text/html"),[l]=o.getElementsByTagName("svg"),{height:c,width:u}=l.viewBox.baseVal,d=nU(l,"aria-describedby"),h=nU(l,"aria-labelledby"),m={height:c,id:s,svg:V$e.serializeToString(l),width:u};return d&&(m.description=d),h&&(m.title=h),m}));return n.remove(),r},W$e=()=>H$e,G$e=({code:e,isStreaming:t=!1})=>{const{foldStreamingCodeBlocks:n}=mr(Tn(_=>({foldStreamingCodeBlocks:_.foldStreamingCodeBlocks}))),[r,i]=T.useState(t?n:!1),[s,a]=T.useState(null),[o,l]=T.useState(!1),[c,u]=T.useState(null),d=T.useRef(null),h=Qo(Tn(_=>Object.values(_.canvasControls))),m=T.useCallback((_,S,C,E,A)=>h.filter(R=>R.type==="codeblock"&&R.targetSlot===_&&R.renderer).map(R=>{if(R.renderer){const N={codeBlockContent:S,codeBlockLang:"mermaid",isFolded:E,toggleFold:A,canvasContextType:"codeblock"};return p.jsx(lt.Fragment,{children:R.renderer(N)},R.id)}return null}).filter(Boolean),[h]),y=T.useCallback(async()=>{if(!(!e.trim()||r)){l(!0),u(null),a(null);try{const S=await W$e()([e]);if(S.length>0&&S[0].status==="fulfilled")a(S[0].value.svg);else if(S.length>0&&S[0].status==="rejected"){const C=S[0].reason;u((C==null?void 0:C.message)||"Failed to render Mermaid diagram")}else u("No results returned from Mermaid renderer")}catch(_){console.error("Mermaid rendering error:",_),u(_ instanceof Error?_.message:"Failed to render Mermaid diagram")}finally{l(!1)}}},[e,r]);T.useEffect(()=>{!r&&e.trim()&&y()},[e,r,y]);const b=()=>{const _=r;i(S=>!S),_&&setTimeout(y,0)},v=T.useMemo(()=>e?e.split(`
`).slice(0,3).join(`
`):"",[e]),x=m("codeblock-header-actions",e,"mermaid",r,b);return p.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[p.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"text-sm font-medium",children:"MERMAID"}),p.jsx("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:x})]}),p.jsx("div",{})]}),!r&&p.jsxs("div",{className:"overflow-hidden w-full",children:[o&&p.jsxs("div",{className:"flex items-center justify-center p-8",children:[p.jsx(Yn,{className:"h-6 w-6 animate-spin text-muted-foreground"}),p.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Rendering diagram..."})]}),c&&p.jsxs("div",{className:"flex items-center gap-2 p-4 border border-destructive/20 bg-destructive/10 rounded-md",children:[p.jsx(lc,{className:"h-5 w-5 text-destructive flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-destructive",children:[p.jsx("div",{className:"font-medium",children:"Failed to render Mermaid diagram"}),p.jsx("div",{className:"text-xs mt-1 opacity-80",children:c})]})]}),s&&!o&&!c&&p.jsx("div",{ref:d,className:"mermaid-container p-4 bg-background border rounded-md overflow-auto",dangerouslySetInnerHTML:{__html:s}})]}),r&&p.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:b,children:p.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:v})})]})},qD=T.memo(G$e),K$e=({markdownContent:e})=>{const t=jE(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const i=n;return p.jsx(iy,{lang:i.lang,code:i.code,filepath:i.filepath},`code-${r}`)}else if(n.type==="mermaid"){const i=n;return p.jsx(qD,{code:i.code},`mermaid-${r}`)}return null})}):null},oT=lt.memo(({turnData:e,timestamp:t,className:n,isAssistantComplete:r=!0})=>{var b,v;const i=mr(x=>x.foldUserMessagesOnCompletion),[s,a]=T.useState(r&&i),[o,l]=T.useState(!1);T.useEffect(()=>{r&&i&&a(!0)},[r,i]);const c=t?kZ(new Date(t),{addSuffix:!0}):"Sending...",u=((b=e.metadata)==null?void 0:b.attachedFiles)&&e.metadata.attachedFiles.length>0,d=e.content&&e.content.trim().length>0,h=T.useCallback(()=>a(x=>!x),[]),m=T.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),l(!0),De.success("User prompt copied!"),setTimeout(()=>l(!1),1500)}catch(x){De.error("Failed to copy prompt."),console.error("Clipboard copy failed:",x)}},[e.content]),y=T.useMemo(()=>{var _;let x="";return d&&(x+=`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`),d&&u&&(x+=" + "),u&&(x+=`${(_=e.metadata.attachedFiles)==null?void 0:_.length} file(s)`),x||"[Empty Prompt]"},[d,u,e.content,e.metadata]);return p.jsxs("div",{className:ft("user-prompt relative group/user overflow-wrap-anywhere",n),children:[p.jsxs("div",{className:ft("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-center gap-1 mb-1 sm:mb-0",children:[p.jsx(Gme,{className:"h-4 w-4 text-primary flex-shrink-0"}),p.jsx("span",{className:"text-xs font-semibold text-primary mr-1",children:"User"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity",children:[d&&p.jsx(Mn,{tooltipText:"Copy Prompt",onClick:m,"aria-label":"Copy user prompt",icon:o?p.jsx(Ka,{className:"text-green-500"}):p.jsx(Pk,{}),className:"h-5 w-5"}),(d||u)&&p.jsx(Mn,{tooltipText:s?"Unfold":"Fold",onClick:h,"aria-label":s?"Unfold prompt":"Fold prompt",icon:s?p.jsx(yu,{}):p.jsx(hh,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground",children:c})})]}),!s&&p.jsxs(p.Fragment,{children:[u&&p.jsx("div",{className:"mb-2 space-y-1",children:(v=e.metadata.attachedFiles)==null?void 0:v.map(x=>p.jsx(vZ,{fileMeta:x,isReadOnly:!0},x.id))}),p.jsx(K$e,{markdownContent:e.content})]}),s&&p.jsx("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:h,children:y})]})});oT.displayName="UserPromptDisplay";const Y$e=(e,t,n,r,i)=>{if(typeof e=="string")return e.trim()?p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e}},`html-${t}`):null;if(e.type==="code"){const s=e,a=s.lang?`language-${s.lang}`:"language-plaintext";return n?p.jsx(iy,{lang:s.lang,code:s.code,filepath:s.filepath,isStreaming:r},`code-${t}`):p.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[p.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:p.jsx("div",{className:"text-sm font-medium",children:s.lang?s.lang.toUpperCase():"CODE"})}),p.jsx("code",{className:ft(a,"block p-4 font-mono text-sm leading-relaxed"),children:s.code})]},`pre-${t}`)}else if(e.type==="mermaid"){const s=e;return p.jsx(qD,{code:s.code,isStreaming:r},`mermaid-${t}`)}return null},Z$e=({interactionId:e,markdownContent:t,isStreaming:n=!1,className:r})=>{const{enableStreamingMarkdown:i,enableStreamingCodeBlockParsing:s}=mr(Tn(m=>({enableStreamingMarkdown:m.enableStreamingMarkdown,enableStreamingCodeBlockParsing:m.enableStreamingCodeBlockParsing}))),a=jE(i?t:null),o=Qo(Tn(m=>Object.values(m.canvasControls))),l=T.useCallback((m,y)=>o.filter(b=>b.type==="tool-call-step"&&b.targetSlot===m&&b.renderer).map(b=>b.renderer?p.jsx(lt.Fragment,{children:b.renderer(y)},b.id):null).filter(Boolean),[o]),{toolCallStrings:c,toolResultStrings:u}=Ln(Tn(m=>{var b,v;const y=m.interactions.find(x=>x.id===e);return{toolCallStrings:(b=y==null?void 0:y.metadata)==null?void 0:b.toolCalls,toolResultStrings:(v=y==null?void 0:y.metadata)==null?void 0:v.toolResults}})),d=T.useMemo(()=>{if(!c)return[];try{const m=c.map(b=>JSON.parse(b)),y=(u==null?void 0:u.map(b=>JSON.parse(b)))??[];return m.map(b=>{const v=y.find(x=>x.toolCallId===b.toolCallId);return{call:b,result:v}})}catch(m){return console.error("[StreamingContentView] Error parsing tool call/result strings:",m),[]}},[c,u]),h=T.useMemo(()=>i?a.map((m,y)=>Y$e(m,y,s,n&&y===a.length-1)).filter(Boolean):[],[i,a,s,n,e]);return!i&&!t&&d.length===0?n?p.jsx("div",{className:ft("text-muted-foreground italic",r),children:"Generating response..."}):null:p.jsxs("div",{className:ft("streaming-content-view overflow-wrap-anywhere",r),children:[d.map(({call:m,result:y},b)=>{const v={interactionId:e,toolCall:m,toolResult:y,canvasContextType:"tool-call-step"};return p.jsx(lt.Fragment,{children:l("tool-call-content",v)},`tool-step-${m.toolCallId||b}`)}),i?h:t?p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:new Xo().render(t)}}):null]})},X$e=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":i="Stop Generation"})=>p.jsx(Mn,{tooltipText:"Stop",onClick:e,"aria-label":i,icon:p.jsx(Fme,{}),variant:r,size:n,className:t}),J$e=Symbol("Let zodToJsonSchema decide on which parser to use"),iU={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Q$e=e=>typeof e=="string"?{...iU,name:e}:{...iU,...e},e9e=e=>{const t=Q$e(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function ure(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function pi(e,t,n,r,i){e[t]=n,ure(e,t,r,i)}function t9e(){return{}}function n9e(e,t){var r,i,s;const n={type:"array"};return(r=e.type)!=null&&r._def&&((s=(i=e.type)==null?void 0:i._def)==null?void 0:s.typeName)!==Jt.ZodAny&&(n.items=ri(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&pi(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&pi(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(pi(n,"minItems",e.exactLength.value,e.exactLength.message,t),pi(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function r9e(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?pi(n,"minimum",r.value,r.message,t):pi(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),pi(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?pi(n,"maximum",r.value,r.message,t):pi(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),pi(n,"maximum",r.value,r.message,t));break;case"multipleOf":pi(n,"multipleOf",r.value,r.message,t);break}return n}function i9e(){return{type:"boolean"}}function dre(e,t){return ri(e.type._def,t)}const s9e=(e,t)=>ri(e.innerType._def,t);function fre(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,s)=>fre(e,t,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return a9e(e,t)}}const a9e=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":pi(n,"minimum",r.value,r.message,t);break;case"max":pi(n,"maximum",r.value,r.message,t);break}return n};function o9e(e,t){return{...ri(e.innerType._def,t),default:e.defaultValue()}}function l9e(e,t){return t.effectStrategy==="input"?ri(e.schema._def,t):{}}function c9e(e){return{type:"string",enum:Array.from(e.values)}}const u9e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function d9e(e,t){const n=[ri(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),ri(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(s=>{if(u9e(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:o,...l}=s;a=l}else r=void 0;i.push(a)}}),i.length?{allOf:i,...r}:void 0}function f9e(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let lM;const Gl={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(lM===void 0&&(lM=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),lM),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function hre(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":pi(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":pi(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Kl(n,"email",r.message,t);break;case"format:idn-email":Kl(n,"idn-email",r.message,t);break;case"pattern:zod":za(n,Gl.email,r.message,t);break}break;case"url":Kl(n,"uri",r.message,t);break;case"uuid":Kl(n,"uuid",r.message,t);break;case"regex":za(n,r.regex,r.message,t);break;case"cuid":za(n,Gl.cuid,r.message,t);break;case"cuid2":za(n,Gl.cuid2,r.message,t);break;case"startsWith":za(n,RegExp(`^${cM(r.value,t)}`),r.message,t);break;case"endsWith":za(n,RegExp(`${cM(r.value,t)}$`),r.message,t);break;case"datetime":Kl(n,"date-time",r.message,t);break;case"date":Kl(n,"date",r.message,t);break;case"time":Kl(n,"time",r.message,t);break;case"duration":Kl(n,"duration",r.message,t);break;case"length":pi(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),pi(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{za(n,RegExp(cM(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Kl(n,"ipv4",r.message,t),r.version!=="v4"&&Kl(n,"ipv6",r.message,t);break}case"base64url":za(n,Gl.base64url,r.message,t);break;case"jwt":za(n,Gl.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&za(n,Gl.ipv4Cidr,r.message,t),r.version!=="v4"&&za(n,Gl.ipv6Cidr,r.message,t);break}case"emoji":za(n,Gl.emoji(),r.message,t);break;case"ulid":{za(n,Gl.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Kl(n,"binary",r.message,t);break}case"contentEncoding:base64":{pi(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{za(n,Gl.base64,r.message,t);break}}break}case"nanoid":za(n,Gl.nanoid,r.message,t)}return n}function cM(e,t){return t.patternStrategy==="escape"?p9e(e):e}const h9e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function p9e(e){let t="";for(let n=0;n<e.length;n++)h9e.has(e[n])||(t+="\\"),t+=e[n];return t}function Kl(e,t,n,r){var i;e.format||(i=e.anyOf)!=null&&i.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):pi(e,"format",t,n,r)}function za(e,t,n,r){var i;e.pattern||(i=e.allOf)!=null&&i.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:sU(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):pi(e,"pattern",sU(t,r),n,r)}function sU(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let i="",s=!1,a=!1,o=!1;for(let c=0;c<r.length;c++){if(s){i+=r[c],s=!1;continue}if(n.i){if(a){if(r[c].match(/[a-z]/)){o?(i+=r[c],i+=`${r[c-2]}-${r[c]}`.toUpperCase(),o=!1):r[c+1]==="-"&&((l=r[c+2])!=null&&l.match(/[a-z]/))?(i+=r[c],o=!0):i+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){i+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){i+=a?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}i+=r[c],r[c]==="\\"?s=!0:a&&r[c]==="]"?a=!1:!a&&r[c]==="["&&(a=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function pre(e,t){var r,i,s,a,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Jt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,u)=>({...c,[u]:ri(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",u]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:ri(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((i=e.keyType)==null?void 0:i._def.typeName)===Jt.ZodString&&((s=e.keyType._def.checks)!=null&&s.length)){const{type:c,...u}=hre(e.keyType._def,t);return{...n,propertyNames:u}}else{if(((a=e.keyType)==null?void 0:a._def.typeName)===Jt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===Jt.ZodBranded&&e.keyType._def.type._def.typeName===Jt.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...u}=dre(e.keyType._def,t);return{...n,propertyNames:u}}}return n}function m9e(e,t){if(t.mapStrategy==="record")return pre(e,t);const n=ri(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=ri(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function g9e(e){const t=e.values,r=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),i=Array.from(new Set(r.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function y9e(){return{not:{}}}function b9e(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const ok={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function v9e(e,t){if(t.target==="openApi3")return aU(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in ok&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,s)=>{const a=ok[s._def.typeName];return a&&!i.includes(a)?[...i,a]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,s)=>{const a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...i,a];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((s,a,o)=>o.indexOf(s)===a);return{type:i.length>1?i:i[0],enum:n.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(s=>!r.includes(s))],[])};return aU(e,t)}const aU=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,i)=>ri(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function x9e(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:ok[e.innerType._def.typeName],nullable:!0}:{type:[ok[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=ri(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=ri(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function w9e(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",ure(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?pi(n,"minimum",r.value,r.message,t):pi(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),pi(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?pi(n,"maximum",r.value,r.message,t):pi(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),pi(n,"maximum",r.value,r.message,t));break;case"multipleOf":pi(n,"multipleOf",r.value,r.message,t);break}return n}function _9e(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},i=[],s=e.shape();for(const o in s){let l=s[o];if(l===void 0||l._def===void 0)continue;let c=C9e(l);c&&n&&(l instanceof eu&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const u=ri(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});u!==void 0&&(r.properties[o]=u,c||i.push(o))}i.length&&(r.required=i);const a=S9e(e,t);return a!==void 0&&(r.additionalProperties=a),r}function S9e(e,t){if(e.catchall._def.typeName!=="ZodNever")return ri(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function C9e(e){try{return e.isOptional()}catch{return!0}}const k9e=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return ri(e.innerType._def,t);const n=ri(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},E9e=(e,t)=>{if(t.pipeStrategy==="input")return ri(e.in._def,t);if(t.pipeStrategy==="output")return ri(e.out._def,t);const n=ri(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=ri(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function T9e(e,t){return ri(e.type._def,t)}function A9e(e,t){const r={type:"array",uniqueItems:!0,items:ri(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&pi(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&pi(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function R9e(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>ri(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:ri(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>ri(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function I9e(){return{not:{}}}function N9e(){return{}}const M9e=(e,t)=>ri(e.innerType._def,t),j9e=(e,t,n)=>{switch(t){case Jt.ZodString:return hre(e,n);case Jt.ZodNumber:return w9e(e,n);case Jt.ZodObject:return _9e(e,n);case Jt.ZodBigInt:return r9e(e,n);case Jt.ZodBoolean:return i9e();case Jt.ZodDate:return fre(e,n);case Jt.ZodUndefined:return I9e();case Jt.ZodNull:return b9e(n);case Jt.ZodArray:return n9e(e,n);case Jt.ZodUnion:case Jt.ZodDiscriminatedUnion:return v9e(e,n);case Jt.ZodIntersection:return d9e(e,n);case Jt.ZodTuple:return R9e(e,n);case Jt.ZodRecord:return pre(e,n);case Jt.ZodLiteral:return f9e(e,n);case Jt.ZodEnum:return c9e(e);case Jt.ZodNativeEnum:return g9e(e);case Jt.ZodNullable:return x9e(e,n);case Jt.ZodOptional:return k9e(e,n);case Jt.ZodMap:return m9e(e,n);case Jt.ZodSet:return A9e(e,n);case Jt.ZodLazy:return()=>e.getter()._def;case Jt.ZodPromise:return T9e(e,n);case Jt.ZodNaN:case Jt.ZodNever:return y9e();case Jt.ZodEffects:return l9e(e,n);case Jt.ZodAny:return t9e();case Jt.ZodUnknown:return N9e();case Jt.ZodDefault:return o9e(e,n);case Jt.ZodBranded:return dre(e,n);case Jt.ZodReadonly:return M9e(e,n);case Jt.ZodCatch:return s9e(e,n);case Jt.ZodPipeline:return E9e(e,n);case Jt.ZodFunction:case Jt.ZodVoid:case Jt.ZodSymbol:return;default:return(r=>{})()}};function ri(e,t,n=!1){var o;const r=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,r,n);if(l!==J$e)return l}if(r&&!n){const l=P9e(r,t);if(l!==void 0)return l}const i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);const s=j9e(e,e.typeName,t),a=typeof s=="function"?ri(s(),t):s;if(a&&D9e(e,t,a),t.postProcess){const l=t.postProcess(a,e,t);return i.jsonSchema=a,l}return i.jsonSchema=a,a}const P9e=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:O9e(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},O9e=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},D9e=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),F9e=(e,t)=>{const n=e9e(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[c,u])=>({...l,[c]:ri(u._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,i=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,s=ri(e._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??{},a=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;a!==void 0&&(s.title=a);const o=i===void 0?r?{...s,[n.definitionPath]:r}:s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:s}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var Hx={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Wx={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Gx={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Kx={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Yx={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},L9e=[Hx,Wx,Gx,Kx,Yx];Hx.code+"",Wx.code+"",Gx.code+"",Kx.code+"",Yx.code+"";Hx.name+"",Hx.code,Wx.name+"",Wx.code,Gx.name+"",Gx.code,Kx.name+"",Kx.code,Yx.name+"",Yx.code;L9e.map(e=>e.code);function B9e(e){const t=["ROOT"];let n=-1,r=null;function i(l,c,u){switch(l){case'"':{n=c,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function s(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function a(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":i(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{s(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,i(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const d=e.substring(r,l+1);!"false".startsWith(d)&&!"true".startsWith(d)&&!"null".startsWith(d)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?s(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(c,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const u=e.substring(r,e.length);"true".startsWith(u)?o+="true".slice(u.length):"false".startsWith(u)?o+="false".slice(u.length):"null".startsWith(u)&&(o+="null".slice(u.length))}}return o}function $9e(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Dp({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Dp({text:B9e(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var z9e={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},U9e={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},q9e={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},V9e={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},H9e={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},W9e={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},G9e={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},K9e={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Y9e={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},Z9e={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},X9e={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},J9e={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},Q9e={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},eze={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},tze={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},nze={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},lT=[z9e,U9e,q9e,V9e,H9e,W9e,G9e,K9e,Y9e,Z9e,X9e,J9e,Q9e,eze,tze,nze];Object.fromEntries(lT.map(e=>[e.code,e]));Object.fromEntries(lT.map(e=>[e.name,e.code]));lT.map(e=>e.code);function wa(e,t){const n=lT.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function rze(e,t){var n;const r=(n=void 0)!=null?n:!1;return ize(F9e(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:i=>{const s=e.safeParse(i);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}var tj=Symbol.for("vercel.ai.schema");function ize(e,{validate:t}={}){return{[tj]:!0,_type:void 0,[E2]:!0,jsonSchema:e,validate:t}}function sze(e){return typeof e=="object"&&e!==null&&tj in e&&e[tj]===!0&&"jsonSchema"in e&&"validate"in e}function cT(e){return sze(e)?e:rze(e)}var aze=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof Og=="object"?Og:{},Sp="1.9.0",oU=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function oze(e){var t=new Set([e]),n=new Set,r=e.match(oU);if(!r)return function(){return!1};var i={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(i.prerelease!=null)return function(l){return l===e};function s(o){return n.add(o),!1}function a(o){return t.add(o),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var c=l.match(oU);if(!c)return s(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||i.major!==u.major?s(l):i.major===0?i.minor===u.minor&&i.patch<=u.patch?a(l):s(l):i.minor<=u.minor?a(l):s(l)}}var lze=oze(Sp),cze=Sp.split(".")[0],Zx=Symbol.for("opentelemetry.js.api."+cze),Xx=aze;function VD(e,t,n,r){var i;r===void 0&&(r=!1);var s=Xx[Zx]=(i=Xx[Zx])!==null&&i!==void 0?i:{version:Sp};if(!r&&s[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}if(s.version!==Sp){var a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+Sp);return n.error(a.stack||a.message),!1}return s[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Sp+"."),!0}function Jx(e){var t,n,r=(t=Xx[Zx])===null||t===void 0?void 0:t.version;if(!(!r||!lze(r)))return(n=Xx[Zx])===null||n===void 0?void 0:n[e]}function HD(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Sp+".");var n=Xx[Zx];n&&delete n[e]}var uze=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},dze=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},fze=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fv("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fv("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fv("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fv("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fv("verbose",this._namespace,t)},e}();function fv(e,t,n){var r=Jx("diag");if(r)return n.unshift(t),r[e].apply(r,dze([],uze(n),!1))}var zo;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(zo||(zo={}));function hze(e,t){e<zo.NONE?e=zo.NONE:e>zo.ALL&&(e=zo.ALL),t=t||{};function n(r,i){var s=t[r];return typeof s=="function"&&e>=i?s.bind(t):function(){}}return{error:n("error",zo.ERROR),warn:n("warn",zo.WARN),info:n("info",zo.INFO),debug:n("debug",zo.DEBUG),verbose:n("verbose",zo.VERBOSE)}}var pze=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},mze=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},gze="diag",lk=function(){function e(){function t(i){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=Jx("diag");if(o)return o[i].apply(o,mze([],pze(s),!1))}}var n=this,r=function(i,s){var a,o,l;if(s===void 0&&(s={logLevel:zo.INFO}),i===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((a=c.stack)!==null&&a!==void 0?a:c.message),!1}typeof s=="number"&&(s={logLevel:s});var u=Jx("diag"),d=hze((o=s.logLevel)!==null&&o!==void 0?o:zo.INFO,i);if(u&&!s.suppressOverrideMessage){var h=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+h),d.warn("Current logger will overwrite one already registered from "+h)}return VD("diag",d,n,!0)};n.setLogger=r,n.disable=function(){HD(gze,n)},n.createComponentLogger=function(i){return new fze(i)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function yze(e){return Symbol.for(e)}var bze=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,i){var s=new e(n._currentContext);return s._currentContext.set(r,i),s},n.deleteValue=function(r){var i=new e(n._currentContext);return i._currentContext.delete(r),i}}return e}(),vze=new bze,xze=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},wze=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},_ze=function(){function e(){}return e.prototype.active=function(){return vze},e.prototype.with=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return n.call.apply(n,wze([r],xze(i),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Sze=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},Cze=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},uM="context",kze=new _ze,mre=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return VD(uM,t,lk.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return(i=this._getContextManager()).with.apply(i,Cze([t,n,r],Sze(s),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return Jx(uM)||kze},e.prototype.disable=function(){this._getContextManager().disable(),HD(uM,lk.instance())},e}(),nj;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(nj||(nj={}));var gre="0000000000000000",yre="00000000000000000000000000000000",Eze={traceId:yre,spanId:gre,traceFlags:nj.NONE},$v=function(){function e(t){t===void 0&&(t=Eze),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),WD=yze("OpenTelemetry Context Key SPAN");function GD(e){return e.getValue(WD)||void 0}function Tze(){return GD(mre.getInstance().active())}function KD(e,t){return e.setValue(WD,t)}function Aze(e){return e.deleteValue(WD)}function Rze(e,t){return KD(e,new $v(t))}function bre(e){var t;return(t=GD(e))===null||t===void 0?void 0:t.spanContext()}var Ize=/^([0-9a-f]{32})$/i,Nze=/^[0-9a-f]{16}$/i;function Mze(e){return Ize.test(e)&&e!==yre}function jze(e){return Nze.test(e)&&e!==gre}function vre(e){return Mze(e.traceId)&&jze(e.spanId)}function Pze(e){return new $v(e)}var dM=mre.getInstance(),xre=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=dM.active());var i=!!(n!=null&&n.root);if(i)return new $v;var s=r&&bre(r);return Oze(s)&&vre(s)?new $v(s):new $v},e.prototype.startActiveSpan=function(t,n,r,i){var s,a,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(s=n,o=r):(s=n,a=r,o=i);var l=a??dM.active(),c=this.startSpan(t,s,l),u=KD(l,c);return dM.with(u,o,void 0,c)}},e}();function Oze(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Dze=new xre,Fze=function(){function e(t,n,r,i){this._provider=t,this.name=n,this.version=r,this.options=i}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,i){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Dze},e}(),Lze=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new xre},e}(),Bze=new Lze,lU=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var i;return(i=this.getDelegateTracer(t,n,r))!==null&&i!==void 0?i:new Fze(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Bze},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(t,n,r)},e}(),ck;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(ck||(ck={}));var fM="trace",$ze=function(){function e(){this._proxyTracerProvider=new lU,this.wrapSpanContext=Pze,this.isSpanContextValid=vre,this.deleteSpan=Aze,this.getSpan=GD,this.getActiveSpan=Tze,this.getSpanContext=bre,this.setSpan=KD,this.setSpanContext=Rze}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=VD(fM,this._proxyTracerProvider,lk.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return Jx(fM)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){HD(fM,lk.instance()),this._proxyTracerProvider=new lU},e}(),zze=$ze.getInstance(),Uze=Object.defineProperty,YD=(e,t)=>{for(var n in t)Uze(e,n,{get:t[n],enumerable:!0})};function uk(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function cU(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[i,s]of Object.entries(e))r[i]=s;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function uU({response:e,status:t,statusText:n,headers:r,stream:i}){e.writeHead(t??200,n,r);const s=i.getReader();(async()=>{try{for(;;){const{done:o,value:l}=await s.read();if(o)break;e.write(l)}}catch(o){throw o}finally{e.end()}})()}var wre="AI_InvalidArgumentError",_re=`vercel.ai.error.${wre}`,qze=Symbol.for(_re),Sre,Jl=class extends ar{constructor({parameter:e,value:t,message:n}){super({name:wre,message:`Invalid argument for parameter ${e}: ${n}`}),this[Sre]=!0,this.parameter=e,this.value=t}static isInstance(e){return ar.hasMarker(e,_re)}};Sre=qze;var Cre="AI_RetryError",kre=`vercel.ai.error.${Cre}`,Vze=Symbol.for(kre),Ere,dU=class extends ar{constructor({message:e,reason:t,errors:n}){super({name:Cre,message:e}),this[Ere]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return ar.hasMarker(e,kre)}};Ere=Vze;var Hze=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>Tre(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function Tre(e,{maxRetries:t,delayInMs:n,backoffFactor:r},i=[]){try{return await e()}catch(s){if(US(s)||t===0)throw s;const a=k0e(s),o=[...i,s],l=o.length;if(l>t)throw new dU({message:`Failed after ${l} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:o});if(s instanceof Error&&Cl.isInstance(s)&&s.isRetryable===!0&&l<=t)return await _0e(n),Tre(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},o);throw l===1?s:new dU({message:`Failed after ${l} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:o})}}function Wze({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Jl({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Jl({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:Hze({maxRetries:t})}}function rj({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function Gze({model:e,settings:t,telemetry:n,headers:r}){var i;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((s,[a,o])=>(s[`ai.settings.${a}`]=o,s),{}),...Object.entries((i=n==null?void 0:n.metadata)!=null?i:{}).reduce((s,[a,o])=>(s[`ai.telemetry.metadata.${a}`]=o,s),{}),...Object.entries(r??{}).reduce((s,[a,o])=>(o!==void 0&&(s[`ai.request.headers.${a}`]=o),s),{})}}var Kze={startSpan(){return gS},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(gS);if(typeof n=="function")return n(gS);if(typeof r=="function")return r(gS)}},gS={spanContext(){return Yze},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Yze={traceId:"",spanId:"",traceFlags:0};function Zze({isEnabled:e=!1,tracer:t}={}){return e?t||zze.getTracer("ai"):Kze}function ij({name:e,tracer:t,attributes:n,fn:r,endWhenDone:i=!0}){return t.startActiveSpan(e,{attributes:n},async s=>{try{const a=await r(s);return i&&s.end(),a}catch(a){try{a instanceof Error?(s.recordException({name:a.name,message:a.message,stack:a.stack}),s.setStatus({code:ck.ERROR,message:a.message})):s.setStatus({code:ck.ERROR})}finally{s.end()}throw a}})}function Dg({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,i])=>{if(i===void 0)return n;if(typeof i=="object"&&"input"in i&&typeof i.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const s=i.input();return s===void 0?n:{...n,[r]:s}}if(typeof i=="object"&&"output"in i&&typeof i.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const s=i.output();return s===void 0?n:{...n,[r]:s}}return{...n,[r]:i}},{})}var Xze=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=Vf(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=qk(this.base64Data)),this.uint8ArrayData}},Jze=class extends Xze{constructor(e){super(e),this.type="file"}},Qze=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],e7e=e=>{const t=typeof e=="string"?qk(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function t7e(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?e7e(e):e}function n7e({data:e,signatures:t}){const n=t7e(e);for(const r of t)if(typeof n=="string"?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((i,s)=>n[s]===i))return r.mimeType}var Are="AI_NoObjectGeneratedError",Rre=`vercel.ai.error.${Are}`,r7e=Symbol.for(Rre),Ire,fU=class extends ar{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:i,finishReason:s}){super({name:Are,message:e,cause:t}),this[Ire]=!0,this.text=n,this.response=r,this.usage=i,this.finishReason=s}static isInstance(e){return ar.hasMarker(e,Rre)}};Ire=r7e;var Nre="AI_DownloadError",Mre=`vercel.ai.error.${Nre}`,i7e=Symbol.for(Mre),jre,hM=class extends ar{constructor({url:e,statusCode:t,statusText:n,cause:r,message:i=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:Nre,message:i,cause:r}),this[jre]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return ar.hasMarker(e,Mre)}};jre=i7e;async function s7e({url:e}){var t;const n=e.toString();try{const r=await fetch(n);if(!r.ok)throw new hM({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mimeType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw hM.isInstance(r)?r:new hM({url:n,cause:r})}}var Pre="AI_InvalidDataContentError",Ore=`vercel.ai.error.${Pre}`,a7e=Symbol.for(Ore),Dre,hU=class extends ar{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:Pre,message:n,cause:t}),this[Dre]=!0,this.content=e}static isInstance(e){return ar.hasMarker(e,Ore)}};Dre=a7e;var Fre=Ai([$e(),$2(Uint8Array),$2(ArrayBuffer),IW(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function ZD(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Vf(new Uint8Array(e)):Vf(e)}function dk(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return qk(e)}catch(t){throw new hU({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new hU({content:e})}function o7e(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var Lre="AI_InvalidMessageRoleError",Bre=`vercel.ai.error.${Lre}`,l7e=Symbol.for(Bre),$re,c7e=class extends ar{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Lre,message:t}),this[$re]=!0,this.role=e}static isInstance(e){return ar.hasMarker(e,Bre)}};$re=l7e;function u7e(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function d7e({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=s7e}){const i=await h7e(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(s=>f7e(s,i))]}function f7e(e,t){var n,r,i,s,a,o;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>p7e(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var u;const d=(u=c.providerOptions)!=null?u:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:ZD(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:d};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:d};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:d};case"text":return{type:"text",text:c.text,providerMetadata:d};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:d}}}),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var u;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(u=c.providerOptions)!=null?u:c.experimental_providerMetadata}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};default:{const c=l;throw new c7e({role:c})}}}async function h7e(e,t,n,r){const i=e.filter(a=>a.role==="user").map(a=>a.content).filter(a=>Array.isArray(a)).flat().filter(a=>a.type==="image"||a.type==="file").filter(a=>!(a.type==="image"&&n===!0)).map(a=>a.type==="image"?a.image:a.data).map(a=>typeof a=="string"&&(a.startsWith("http:")||a.startsWith("https:"))?new URL(a):a).filter(a=>a instanceof URL).filter(a=>!r(a)),s=await Promise.all(i.map(async a=>({url:a,data:await t({url:a})})));return Object.fromEntries(s.map(({url:a,data:o})=>[a.toString(),o]))}function p7e(e,t){var n,r,i,s;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let a=e.mimeType,o,l,c;const u=e.type;switch(u){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${u}`)}try{l=typeof o=="string"?new URL(o):o}catch{l=o}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:d,base64Content:h}=u7e(l.toString());if(d==null||h==null)throw new Error(`Invalid data URL format in part ${u}`);a=d,c=dk(h)}else{const d=t[l.toString()];d?(c=d.data,a??(a=d.mimeType)):c=l}else c=dk(l);switch(u){case"image":return c instanceof Uint8Array&&(a=(r=n7e({data:c,signatures:Qze}))!=null?r:a),{type:"image",image:c,mimeType:a,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata};case"file":{if(a==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?ZD(c):c,filename:e.filename,mimeType:a,providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata}}}}function m7e({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:i,frequencyPenalty:s,stopSequences:a,seed:o}){if(e!=null){if(!Number.isInteger(e))throw new Jl({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Jl({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Jl({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Jl({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Jl({parameter:"topK",value:r,message:"topK must be a number"});if(i!=null&&typeof i!="number")throw new Jl({parameter:"presencePenalty",value:i,message:"presencePenalty must be a number"});if(s!=null&&typeof s!="number")throw new Jl({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(o!=null&&!Number.isInteger(o))throw new Jl({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:i,frequencyPenalty:s,stopSequences:a!=null&&a.length>0?a:void 0,seed:o}}function pU(e){var t,n,r;const i=[];for(const s of e){let a;try{a=new URL(s.url)}catch{throw new Error(`Invalid URL: ${s.url}`)}switch(a.protocol){case"http:":case"https:":{if((t=s.contentType)!=null&&t.startsWith("image/"))i.push({type:"image",image:a});else{if(!s.contentType)throw new Error("If the attachment is not an image, it must specify a content type");i.push({type:"file",data:a,mimeType:s.contentType})}break}case"data:":{let o,l,c;try{[o,l]=s.url.split(","),c=o.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${s.url}`)}if(c==null||l==null)throw new Error(`Invalid data URL format: ${s.url}`);if((n=s.contentType)!=null&&n.startsWith("image/"))i.push({type:"image",image:dk(l)});else if((r=s.contentType)!=null&&r.startsWith("text/"))i.push({type:"text",text:o7e(dk(l))});else{if(!s.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");i.push({type:"file",data:l,mimeType:s.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${a.protocol}`)}}return i}var zre="AI_MessageConversionError",Ure=`vercel.ai.error.${zre}`,g7e=Symbol.for(Ure),qre,pM=class extends ar{constructor({originalMessage:e,message:t}){super({name:zre,message:t}),this[qre]=!0,this.originalMessage=e}static isInstance(e){return ar.hasMarker(e,Ure)}};qre=g7e;function y7e(e,t){var n,r;const i=(n=t==null?void 0:t.tools)!=null?n:{},s=[];for(let a=0;a<e.length;a++){const o=e[a],l=a===e.length-1,{role:c,content:u,experimental_attachments:d}=o;switch(c){case"system":{s.push({role:"system",content:u});break}case"user":{if(o.parts==null)s.push({role:"user",content:d?[{type:"text",text:u},...pU(d)]:u});else{const h=o.parts.filter(m=>m.type==="text").map(m=>({type:"text",text:m.text}));s.push({role:"user",content:d?[...h,...pU(d)]:h})}break}case"assistant":{if(o.parts!=null){let y=function(){const _=[];for(const C of x)switch(C.type){case"file":case"text":{_.push(C);break}case"reasoning":{for(const E of C.details)switch(E.type){case"text":_.push({type:"reasoning",text:E.text,signature:E.signature});break;case"redacted":_.push({type:"redacted-reasoning",data:E.data});break}break}case"tool-invocation":_.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const E=C;throw new Error(`Unsupported part: ${E}`)}}s.push({role:"assistant",content:_});const S=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);S.length>0&&s.push({role:"tool",content:S.map(C=>{if(!("result"in C))throw new pM({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:E,toolName:A,result:R}=C,N=i[A];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:E,toolName:A,result:N.experimental_toToolResultContent(R),experimental_content:N.experimental_toToolResultContent(R)}:{type:"tool-result",toolCallId:E,toolName:A,result:R}})}),x=[],v=!1,b++},b=0,v=!1,x=[];for(const _ of o.parts)switch(_.type){case"text":{v&&y(),x.push(_);break}case"file":case"reasoning":{x.push(_);break}case"tool-invocation":{((r=_.toolInvocation.step)!=null?r:0)!==b&&y(),x.push(_),v=!0;break}}y();break}const h=o.toolInvocations;if(h==null||h.length===0){s.push({role:"assistant",content:u});break}const m=h.reduce((y,b)=>{var v;return Math.max(y,(v=b.step)!=null?v:0)},0);for(let y=0;y<=m;y++){const b=h.filter(v=>{var x;return((x=v.step)!=null?x:0)===y});b.length!==0&&(s.push({role:"assistant",content:[...l&&u&&y===0?[{type:"text",text:u}]:[],...b.map(({toolCallId:v,toolName:x,args:_})=>({type:"tool-call",toolCallId:v,toolName:x,args:_}))]}),s.push({role:"tool",content:b.map(v=>{if(!("result"in v))throw new pM({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(v)});const{toolCallId:x,toolName:_,result:S}=v,C=i[_];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:_,result:C.experimental_toToolResultContent(S),experimental_content:C.experimental_toToolResultContent(S)}:{type:"tool-result",toolCallId:x,toolName:_,result:S}})}))}u&&!l&&s.push({role:"assistant",content:u});break}case"data":break;default:{const h=c;throw new pM({originalMessage:o,message:`Unsupported role: ${h}`})}}}return s}var sj=uye(()=>Ai([cye(),$e(),At(),kr(),Wf($e(),sj),dn(sj)])),es=Wf($e(),Wf($e(),sj)),b7e=dn(Ai([Ze({type:Pn("text"),text:$e()}),Ze({type:Pn("image"),data:$e(),mimeType:$e().optional()})])),Vre=Ze({type:Pn("text"),text:$e(),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),v7e=Ze({type:Pn("image"),image:Ai([Fre,$2(URL)]),mimeType:$e().optional(),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),Hre=Ze({type:Pn("file"),data:Ai([Fre,$2(URL)]),filename:$e().optional(),mimeType:$e(),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),x7e=Ze({type:Pn("reasoning"),text:$e(),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),w7e=Ze({type:Pn("redacted-reasoning"),data:$e(),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),_7e=Ze({type:Pn("tool-call"),toolCallId:$e(),toolName:$e(),args:_w(),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),S7e=Ze({type:Pn("tool-result"),toolCallId:$e(),toolName:$e(),result:_w(),content:b7e.optional(),isError:kr().optional(),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),C7e=Ze({role:Pn("system"),content:$e(),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),k7e=Ze({role:Pn("user"),content:Ai([$e(),dn(Ai([Vre,v7e,Hre]))]),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),E7e=Ze({role:Pn("assistant"),content:Ai([$e(),dn(Ai([Vre,Hre,x7e,w7e,_7e]))]),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),T7e=Ze({role:Pn("tool"),content:dn(S7e),providerOptions:es.optional(),experimental_providerMetadata:es.optional()}),A7e=Ai([C7e,k7e,E7e,T7e]);function R7e({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new qc({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new qc({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new qc({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new qc({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const r=I7e(e.messages)==="ui-messages"?y7e(e.messages,{tools:t}):e.messages;if(r.length===0)throw new qc({prompt:e,message:"messages must not be empty"});const i=J0({value:r,schema:dn(A7e)});if(!i.success)throw new qc({prompt:e,message:["message must be a CoreMessage or a UI message",`Validation error: ${i.error.message}`].join(`
`),cause:i.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function I7e(e){if(!Array.isArray(e))throw new qc({prompt:e,message:["messages must be an array of CoreMessage or UIMessage",`Received non-array value: ${JSON.stringify(e)}`].join(`
`),cause:e});if(e.length===0)return"messages";const t=e.map(N7e);if(t.some(r=>r==="has-ui-specific-parts"))return"ui-messages";const n=t.findIndex(r=>r!=="has-core-specific-parts"&&r!=="message");if(n===-1)return"messages";throw new qc({prompt:e,message:["messages must be an array of CoreMessage or UIMessage",`Received message of type: "${t[n]}" at index ${n}`,`messages[${n}]: ${JSON.stringify(e[n])}`].join(`
`),cause:e})}function N7e(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}function M7e({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function j7e(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var P7e="JSON schema:",O7e="You MUST answer with a JSON object that matches the JSON schema above.",D7e="You MUST answer with JSON.";function F7e({prompt:e,schema:t,schemaPrefix:n=t!=null?P7e:void 0,schemaSuffix:r=t!=null?O7e:D7e}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(i=>i!=null).join(`
`)}function mM(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:i}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:i}}}},t}function L7e(e){const t=e.map(n=>({...n,content:typeof n.content=="string"?n.content:n.content.map(B7e)}));return JSON.stringify(t)}function B7e(e){return e.type==="image"?{...e,image:e.image instanceof Uint8Array?ZD(e.image):e.image}:e}em({prefix:"aiobj",size:24});var lo=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function mU(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function $7e(){let e=[],t=null,n=!1,r=mU();const i=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=mU(),await r.promise,i();try{const{value:s,done:a}=await e[0].read();a?(e.shift(),e.length>0?await i():n&&(t==null||t.close())):t==null||t.enqueue(s)}catch(s){t==null||t.error(s),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(s){t=s},pull:i,async cancel(){for(const s of e)await s.cancel();e=[],n=!0}}),addStream:s=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(s.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(s=>s.cancel()),e=[],t==null||t.close()}}}function z7e(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}em({prefix:"aiobj",size:24});var Wre="AI_NoOutputSpecifiedError",Gre=`vercel.ai.error.${Wre}`,U7e=Symbol.for(Gre),Kre,q7e=class extends ar{constructor({message:e="No output specified."}={}){super({name:Wre,message:e}),this[Kre]=!0}static isInstance(e){return ar.hasMarker(e,Gre)}};Kre=U7e;var Yre="AI_ToolExecutionError",Zre=`vercel.ai.error.${Yre}`,V7e=Symbol.for(Zre),Xre,H7e=class extends ar{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:i=`Error executing tool ${t}: ${ww(r)}`}){super({name:Yre,message:i,cause:r}),this[Xre]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return ar.hasMarker(e,Zre)}};Xre=V7e;function W7e(e){return e!=null&&Object.keys(e).length>0}function G7e({tools:e,toolChoice:t,activeTools:n}){return W7e(e)?{tools:(n!=null?Object.entries(e).filter(([i])=>n.includes(i)):Object.entries(e)).map(([i,s])=>{const a=s.type;switch(a){case void 0:case"function":return{type:"function",name:i,description:s.description,parameters:cT(s.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:i,id:s.id,args:s.args};default:{const o=a;throw new Error(`Unsupported tool type: ${o}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var K7e=/^([\s\S]*?)(\s+)(\S*)$/;function Y7e(e){const t=e.match(K7e);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var Jre="AI_InvalidToolArgumentsError",Qre=`vercel.ai.error.${Jre}`,Z7e=Symbol.for(Qre),eie,tie=class extends ar{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${ww(n)}`}){super({name:Jre,message:r,cause:n}),this[eie]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return ar.hasMarker(e,Qre)}};eie=Z7e;var nie="AI_NoSuchToolError",rie=`vercel.ai.error.${nie}`,X7e=Symbol.for(rie),iie,aj=class extends ar{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:nie,message:n}),this[iie]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return ar.hasMarker(e,rie)}};iie=X7e;var sie="AI_ToolCallRepairError",aie=`vercel.ai.error.${sie}`,J7e=Symbol.for(aie),oie,Q7e=class extends ar{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${ww(e)}`}){super({name:sie,message:n,cause:e}),this[oie]=!0,this.originalError=t}static isInstance(e){return ar.hasMarker(e,aie)}};oie=J7e;async function eUe({toolCall:e,tools:t,repairToolCall:n,system:r,messages:i}){if(t==null)throw new aj({toolName:e.toolName});try{return await gU({toolCall:e,tools:t})}catch(s){if(n==null||!(aj.isInstance(s)||tie.isInstance(s)))throw s;let a=null;try{a=await n({toolCall:e,tools:t,parameterSchema:({toolName:o})=>cT(t[o].parameters).jsonSchema,system:r,messages:i,error:s})}catch(o){throw new Q7e({cause:o,originalError:s})}if(a==null)throw s;return await gU({toolCall:a,tools:t})}}async function gU({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new aj({toolName:e.toolName,availableTools:Object.keys(t)});const i=cT(r.parameters),s=e.args.trim()===""?J0({value:{},schema:i}):Dp({text:e.args,schema:i});if(s.success===!1)throw new tie({toolName:n,toolArgs:e.args,cause:s.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:s.value}}function tUe(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function yU({text:e="",files:t,reasoning:n,tools:r,toolCalls:i,toolResults:s,messageId:a,generateMessageId:o}){const l=[],c=[];return n.length>0&&c.push(...n.map(u=>u.type==="text"?{...u,type:"reasoning"}:{...u,type:"redacted-reasoning"})),t.length>0&&c.push(...t.map(u=>({type:"file",data:u.base64,mimeType:u.mimeType}))),e.length>0&&c.push({type:"text",text:e}),i.length>0&&c.push(...i),c.length>0&&l.push({role:"assistant",content:c,id:a}),s.length>0&&l.push({role:"tool",id:o(),content:s.map(u=>{const d=r[u.toolName];return(d==null?void 0:d.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:d.experimental_toToolResultContent(u.result),experimental_content:d.experimental_toToolResultContent(u.result)}:{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result}})}),l}em({prefix:"aitxt",size:24});em({prefix:"msg",size:24});var nUe={};YD(nUe,{object:()=>aUe,text:()=>sUe});var lie="AI_InvalidStreamPartError",cie=`vercel.ai.error.${lie}`,rUe=Symbol.for(cie),uie,iUe=class extends ar{constructor({chunk:e,message:t}){super({name:lie,message:t}),this[uie]=!0,this.chunk=e}static isInstance(e){return ar.hasMarker(e,cie)}};uie=rUe;var sUe=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),aUe=({schema:e})=>{const t=cT(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:F7e({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=$9e(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const i=r.state;throw new Error(`Unsupported parse state: ${i}`)}}},parseOutput({text:n},r){const i=Dp({text:n});if(!i.success)throw new fU({message:"No object generated: could not parse the response.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const s=J0({value:i.value,schema:t});if(!s.success)throw new fU({message:"No object generated: response did not match schema.",cause:s.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return s.value}}};function oUe(e){return e===void 0?[]:Array.isArray(e)?e:[e]}async function lUe({stream:e,onError:t}){const n=e.getReader();try{for(;;){const{done:r}=await n.read();if(r)break}}catch(r){t==null||t(r)}finally{n.releaseLock()}}function XD(e,t){const n=e.getReader(),r=t.getReader();let i,s,a=!1,o=!1;async function l(u){try{i==null&&(i=n.read());const d=await i;i=void 0,d.done?u.close():u.enqueue(d.value)}catch(d){u.error(d)}}async function c(u){try{s==null&&(s=r.read());const d=await s;s=void 0,d.done?u.close():u.enqueue(d.value)}catch(d){u.error(d)}}return new ReadableStream({async pull(u){try{if(a){await c(u);return}if(o){await l(u);return}i==null&&(i=n.read()),s==null&&(s=r.read());const{result:d,reader:h}=await Promise.race([i.then(m=>({result:m,reader:n})),s.then(m=>({result:m,reader:r}))]);d.done||u.enqueue(d.value),h===n?(i=void 0,d.done&&(await c(u),a=!0)):(s=void 0,d.done&&(o=!0,await l(u)))}catch(d){u.error(d)}},cancel(){n.cancel(),r.cancel()}})}function cUe({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:i,system:s,messages:a,abortSignal:o,repairToolCall:l}){let c=null;const u=new ReadableStream({start(x){c=x}}),d={},h=new Set;let m=!1,y;function b(){m&&h.size===0&&(y!=null&&c.enqueue(y),c.close())}const v=new TransformStream({async transform(x,_){const S=x.type;switch(S){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{_.enqueue(x);break}case"file":{_.enqueue(new Jze({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(d[x.toolCallId]||(_.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),d[x.toolCallId]=!0),_.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await eUe({toolCall:x,tools:e,repairToolCall:l,system:s,messages:a});_.enqueue(C);const E=e[C.toolName];if(E.execute!=null){const A=fo();h.add(A),ij({name:"ai.toolCall",attributes:Dg({telemetry:i,attributes:{...rj({operationId:"ai.toolCall",telemetry:i}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async R=>E.execute(C.args,{toolCallId:C.toolCallId,messages:a,abortSignal:o}).then(N=>{c.enqueue({...C,type:"tool-result",result:N}),h.delete(A),b();try{R.setAttributes(Dg({telemetry:i,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(N)}}}))}catch{}},N=>{c.enqueue({type:"error",error:new H7e({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:N})}),h.delete(A),b()})})}}catch(C){c.enqueue({type:"error",error:C})}break}case"finish":{y={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:M7e(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=S;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){m=!0,b()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(v).pipeTo(new WritableStream({write(_){x.enqueue(_)},close(){}})),u.pipeTo(new WritableStream({write(_){x.enqueue(_)},close(){x.close()}}))])}})}var uUe=em({prefix:"aitxt",size:24}),dUe=em({prefix:"msg",size:24});function fUe({model:e,tools:t,toolChoice:n,system:r,prompt:i,messages:s,maxRetries:a,abortSignal:o,headers:l,maxSteps:c=1,experimental_generateMessageId:u=dUe,experimental_output:d,experimental_continueSteps:h=!1,experimental_telemetry:m,experimental_providerMetadata:y,providerOptions:b=y,experimental_toolCallStreaming:v=!1,toolCallStreaming:x=v,experimental_activeTools:_,experimental_repairToolCall:S,experimental_transform:C,onChunk:E,onError:A,onFinish:R,onStepFinish:N,_internal:{now:M=z7e,generateId:P=uUe,currentDate:L=()=>new Date}={},...O}){return new pUe({model:e,telemetry:m,headers:l,settings:O,maxRetries:a,abortSignal:o,system:r,prompt:i,messages:s,tools:t,toolChoice:n,toolCallStreaming:x,transforms:oUe(C),activeTools:_,repairToolCall:S,maxSteps:c,output:d,continueSteps:h,providerOptions:b,onChunk:E,onError:A,onFinish:R,onStepFinish:N,now:M,currentDate:L,generateId:P,generateMessageId:u})}function hUe(e){if(!e)return new TransformStream({transform(s,a){a.enqueue({part:s,partialOutput:void 0})}});let t="",n="",r="";function i({controller:s,partialOutput:a=void 0}){s.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:a}),n=""}return new TransformStream({transform(s,a){if(s.type==="step-finish"&&i({controller:a}),s.type!=="text-delta"){a.enqueue({part:s,partialOutput:void 0});return}t+=s.textDelta,n+=s.textDelta;const o=e.parsePartial({text:t});if(o!=null){const l=JSON.stringify(o.partial);l!==r&&(i({controller:a,partialOutput:o.partial}),r=l)}},flush(s){n.length>0&&i({controller:s})}})}var pUe=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:i,abortSignal:s,system:a,prompt:o,messages:l,tools:c,toolChoice:u,toolCallStreaming:d,transforms:h,activeTools:m,repairToolCall:y,maxSteps:b,output:v,continueSteps:x,providerOptions:_,now:S,currentDate:C,generateId:E,generateMessageId:A,onChunk:R,onError:N,onFinish:M,onStepFinish:P}){this.warningsPromise=new lo,this.usagePromise=new lo,this.finishReasonPromise=new lo,this.providerMetadataPromise=new lo,this.textPromise=new lo,this.reasoningPromise=new lo,this.reasoningDetailsPromise=new lo,this.sourcesPromise=new lo,this.filesPromise=new lo,this.toolCallsPromise=new lo,this.toolResultsPromise=new lo,this.requestPromise=new lo,this.responsePromise=new lo,this.stepsPromise=new lo;var L;if(b<1)throw new Jl({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=v;let O="",V="",F="",J=[],U=[],G,$=[];const ne=[],H={id:E(),timestamp:C(),modelId:e.modelId,messages:[]};let te=[],ee=[],se,he,ce="initial";const Me=[];let je;const Ne=new TransformStream({async transform(le,oe){oe.enqueue(le);const{part:ie}=le;if((ie.type==="text-delta"||ie.type==="reasoning"||ie.type==="source"||ie.type==="tool-call"||ie.type==="tool-result"||ie.type==="tool-call-streaming-start"||ie.type==="tool-call-delta")&&await(R==null?void 0:R({chunk:ie})),ie.type==="error"&&await(N==null?void 0:N({error:ie.error})),ie.type==="text-delta"&&(O+=ie.textDelta,V+=ie.textDelta,F+=ie.textDelta),ie.type==="reasoning"&&(G==null?(G={type:"text",text:ie.textDelta},J.push(G)):G.text+=ie.textDelta),ie.type==="reasoning-signature"){if(G==null)throw new ar({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});G.signature=ie.signature,G=void 0}if(ie.type==="redacted-reasoning"&&J.push({type:"redacted",data:ie.data}),ie.type==="file"&&U.push(ie),ie.type==="source"&&(ne.push(ie.source),$.push(ie.source)),ie.type==="tool-call"&&te.push(ie),ie.type==="tool-result"&&ee.push(ie),ie.type==="step-finish"){const Ee=yU({text:V,files:U,reasoning:J,tools:c??{},toolCalls:te,toolResults:ee,messageId:ie.messageId,generateMessageId:A}),Be=Me.length;let ke="done";Be+1<b&&(x&&ie.finishReason==="length"&&te.length===0?ke="continue":te.length>0&&ee.length===te.length&&(ke="tool-result"));const ct={stepType:ce,text:O,reasoning:tUe(J),reasoningDetails:J,files:U,sources:$,toolCalls:te,toolResults:ee,finishReason:ie.finishReason,usage:ie.usage,warnings:ie.warnings,logprobs:ie.logprobs,request:ie.request,response:{...ie.response,messages:[...H.messages,...Ee]},providerMetadata:ie.experimental_providerMetadata,experimental_providerMetadata:ie.experimental_providerMetadata,isContinued:ie.isContinued};await(P==null?void 0:P(ct)),Me.push(ct),te=[],ee=[],O="",$=[],J=[],U=[],G=void 0,ke!=="done"&&(ce=ke),ke!=="continue"&&(H.messages.push(...Ee),V="")}ie.type==="finish"&&(H.id=ie.response.id,H.timestamp=ie.response.timestamp,H.modelId=ie.response.modelId,H.headers=ie.response.headers,he=ie.usage,se=ie.finishReason)},async flush(le){var oe;try{if(Me.length===0)return;const ie=Me[Me.length-1];Ae.warningsPromise.resolve(ie.warnings),Ae.requestPromise.resolve(ie.request),Ae.responsePromise.resolve(ie.response),Ae.toolCallsPromise.resolve(ie.toolCalls),Ae.toolResultsPromise.resolve(ie.toolResults),Ae.providerMetadataPromise.resolve(ie.experimental_providerMetadata),Ae.reasoningPromise.resolve(ie.reasoning),Ae.reasoningDetailsPromise.resolve(ie.reasoningDetails);const Ee=se??"unknown",Be=he??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ae.finishReasonPromise.resolve(Ee),Ae.usagePromise.resolve(Be),Ae.textPromise.resolve(F),Ae.sourcesPromise.resolve(ne),Ae.filesPromise.resolve(ie.files),Ae.stepsPromise.resolve(Me),await(M==null?void 0:M({finishReason:Ee,logprobs:void 0,usage:Be,text:F,reasoning:ie.reasoning,reasoningDetails:ie.reasoningDetails,files:ie.files,sources:ie.sources,toolCalls:ie.toolCalls,toolResults:ie.toolResults,request:(oe=ie.request)!=null?oe:{},response:ie.response,warnings:ie.warnings,providerMetadata:ie.providerMetadata,experimental_providerMetadata:ie.experimental_providerMetadata,steps:Me})),je.setAttributes(Dg({telemetry:t,attributes:{"ai.response.finishReason":Ee,"ai.response.text":{output:()=>F},"ai.response.toolCalls":{output:()=>{var ke;return(ke=ie.toolCalls)!=null&&ke.length?JSON.stringify(ie.toolCalls):void 0}},"ai.usage.promptTokens":Be.promptTokens,"ai.usage.completionTokens":Be.completionTokens}}))}catch(ie){le.error(ie)}finally{je.end()}}}),Ce=$7e();this.addStream=Ce.addStream,this.closeStream=Ce.close;let Ue=Ce.stream;for(const le of h)Ue=Ue.pipeThrough(le({tools:c,stopStream(){Ce.terminate()}}));this.baseStream=Ue.pipeThrough(hUe(v)).pipeThrough(Ne);const{maxRetries:et,retry:qe}=Wze({maxRetries:i}),Re=Zze(t),K=Gze({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:et}}),ge=R7e({prompt:{system:(L=v==null?void 0:v.injectIntoSystemPrompt({system:a,model:e}))!=null?L:a,prompt:o,messages:l},tools:c}),Ae=this;ij({name:"ai.streamText",attributes:Dg({telemetry:t,attributes:{...rj({operationId:"ai.streamText",telemetry:t}),...K,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:o,messages:l})},"ai.settings.maxSteps":b}}),tracer:Re,endWhenDone:!1,fn:async le=>{je=le;async function oe({currentStep:ie,responseMessages:Ee,usage:Be,stepType:ke,previousStepText:ct,hasLeadingWhitespace:It,messageId:ht}){var Ot;const zt=Ee.length===0?ge.type:"messages",Bt=[...ge.messages,...Ee],rn=await d7e({prompt:{type:zt,system:ge.system,messages:Bt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(Ot=e.supportsUrl)==null?void 0:Ot.bind(e)}),ve={type:"regular",...G7e({tools:c,toolChoice:u,activeTools:m})},{result:{stream:D,warnings:Z,rawResponse:pe,request:Oe},doStreamSpan:xe,startTimestampMs:Ie}=await qe(()=>ij({name:"ai.streamText.doStream",attributes:Dg({telemetry:t,attributes:{...rj({operationId:"ai.streamText.doStream",telemetry:t}),...K,"ai.prompt.format":{input:()=>zt},"ai.prompt.messages":{input:()=>L7e(rn)},"ai.prompt.tools":{input:()=>{var Zt;return(Zt=ve.tools)==null?void 0:Zt.map(tn=>JSON.stringify(tn))}},"ai.prompt.toolChoice":{input:()=>ve.toolChoice!=null?JSON.stringify(ve.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Re,endWhenDone:!1,fn:async Zt=>({startTimestampMs:S(),doStreamSpan:Zt,result:await e.doStream({mode:ve,...m7e(r),inputFormat:zt,responseFormat:v==null?void 0:v.responseFormat({model:e}),prompt:rn,providerMetadata:_,abortSignal:s,headers:n})})})),de=cUe({tools:c,generatorStream:D,toolCallStreaming:d,tracer:Re,telemetry:t,system:a,messages:Bt,repairToolCall:y,abortSignal:s}),bt=Oe??{},St=[],z=[],Ve=[],it=[];let be,_e="unknown",ze={promptTokens:0,completionTokens:0,totalTokens:0},Rt,me=!0,Y="",W=ke==="continue"?ct:"",X,ye={id:E(),timestamp:C(),modelId:e.modelId},Pe="",We=!1,xt=!0,Qt=!1;async function Fn({controller:Zt,chunk:tn}){Zt.enqueue(tn),Y+=tn.textDelta,W+=tn.textDelta,We=!0,Qt=tn.textDelta.trimEnd()!==tn.textDelta}Ae.addStream(de.pipeThrough(new TransformStream({async transform(Zt,tn){var cn,dr,Cr;if(me){const Qr=S()-Ie;me=!1,xe.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Qr}),xe.setAttributes({"ai.response.msToFirstChunk":Qr}),tn.enqueue({type:"step-start",messageId:ht,request:bt,warnings:Z??[]})}if(Zt.type==="text-delta"&&Zt.textDelta.length===0)return;const Jr=Zt.type;switch(Jr){case"text-delta":{if(x){const Qr=xt&&It?Zt.textDelta.trimStart():Zt.textDelta;if(Qr.length===0)break;xt=!1,Pe+=Qr;const br=Y7e(Pe);br!=null&&(Pe=br.suffix,await Fn({controller:tn,chunk:{type:"text-delta",textDelta:br.prefix+br.whitespace}}))}else await Fn({controller:tn,chunk:Zt});break}case"reasoning":{tn.enqueue(Zt),be==null?(be={type:"text",text:Zt.textDelta},Ve.push(be)):be.text+=Zt.textDelta;break}case"reasoning-signature":{if(tn.enqueue(Zt),be==null)throw new iUe({chunk:Zt,message:"reasoning-signature without reasoning"});be.signature=Zt.signature,be=void 0;break}case"redacted-reasoning":{tn.enqueue(Zt),Ve.push({type:"redacted",data:Zt.data});break}case"tool-call":{tn.enqueue(Zt),St.push(Zt);break}case"tool-result":{tn.enqueue(Zt),z.push(Zt);break}case"response-metadata":{ye={id:(cn=Zt.id)!=null?cn:ye.id,timestamp:(dr=Zt.timestamp)!=null?dr:ye.timestamp,modelId:(Cr=Zt.modelId)!=null?Cr:ye.modelId};break}case"finish":{ze=Zt.usage,_e=Zt.finishReason,Rt=Zt.experimental_providerMetadata,X=Zt.logprobs;const Qr=S()-Ie;xe.addEvent("ai.stream.finish"),xe.setAttributes({"ai.response.msToFinish":Qr,"ai.response.avgCompletionTokensPerSecond":1e3*ze.completionTokens/Qr});break}case"file":{it.push(Zt),tn.enqueue(Zt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{tn.enqueue(Zt);break}case"error":{tn.enqueue(Zt),_e="error";break}default:{const Qr=Jr;throw new Error(`Unknown chunk type: ${Qr}`)}}},async flush(Zt){const tn=St.length>0?JSON.stringify(St):void 0;let cn="done";ie+1<b&&(x&&_e==="length"&&St.length===0?cn="continue":St.length>0&&z.length===St.length&&(cn="tool-result")),x&&Pe.length>0&&(cn!=="continue"||ke==="continue"&&!We)&&(await Fn({controller:Zt,chunk:{type:"text-delta",textDelta:Pe}}),Pe="");try{xe.setAttributes(Dg({telemetry:t,attributes:{"ai.response.finishReason":_e,"ai.response.text":{output:()=>Y},"ai.response.toolCalls":{output:()=>tn},"ai.response.id":ye.id,"ai.response.model":ye.modelId,"ai.response.timestamp":ye.timestamp.toISOString(),"ai.usage.promptTokens":ze.promptTokens,"ai.usage.completionTokens":ze.completionTokens,"gen_ai.response.finish_reasons":[_e],"gen_ai.response.id":ye.id,"gen_ai.response.model":ye.modelId,"gen_ai.usage.input_tokens":ze.promptTokens,"gen_ai.usage.output_tokens":ze.completionTokens}}))}catch{}finally{xe.end()}Zt.enqueue({type:"step-finish",finishReason:_e,usage:ze,providerMetadata:Rt,experimental_providerMetadata:Rt,logprobs:X,request:bt,response:{...ye,headers:pe==null?void 0:pe.headers},warnings:Z,isContinued:cn==="continue",messageId:ht});const dr=j7e(Be,ze);if(cn==="done")Zt.enqueue({type:"finish",finishReason:_e,usage:dr,providerMetadata:Rt,experimental_providerMetadata:Rt,logprobs:X,response:{...ye,headers:pe==null?void 0:pe.headers}}),Ae.closeStream();else{if(ke==="continue"){const Cr=Ee[Ee.length-1];typeof Cr.content=="string"?Cr.content+=Y:Cr.content.push({text:Y,type:"text"})}else Ee.push(...yU({text:Y,files:it,reasoning:Ve,tools:c??{},toolCalls:St,toolResults:z,messageId:ht,generateMessageId:A}));await oe({currentStep:ie+1,responseMessages:Ee,usage:dr,stepType:cn,previousStepText:W,hasLeadingWhitespace:Qt,messageId:cn==="continue"?ht:A()})}}})))}await oe({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:A()})}}).catch(le=>{Ae.addStream(new ReadableStream({start(oe){oe.enqueue({type:"error",error:le}),oe.close()}})),Ae.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return mM(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return mM(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await lUe({stream:this.fullStream,onError:e==null?void 0:e.onError})}catch(n){(t=e==null?void 0:e.onError)==null||t.call(e,n)}}get experimental_partialOutputStream(){if(this.output==null)throw new q7e;return mM(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:i=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(s,a)=>{const o=s.type;switch(o){case"text-delta":{a.enqueue(wa("text",s.textDelta));break}case"reasoning":{n&&a.enqueue(wa("reasoning",s.textDelta));break}case"redacted-reasoning":{n&&a.enqueue(wa("redacted_reasoning",{data:s.data}));break}case"reasoning-signature":{n&&a.enqueue(wa("reasoning_signature",{signature:s.signature}));break}case"file":{a.enqueue(wa("file",{mimeType:s.mimeType,data:s.base64}));break}case"source":{r&&a.enqueue(wa("source",s.source));break}case"tool-call-streaming-start":{a.enqueue(wa("tool_call_streaming_start",{toolCallId:s.toolCallId,toolName:s.toolName}));break}case"tool-call-delta":{a.enqueue(wa("tool_call_delta",{toolCallId:s.toolCallId,argsTextDelta:s.argsTextDelta}));break}case"tool-call":{a.enqueue(wa("tool_call",{toolCallId:s.toolCallId,toolName:s.toolName,args:s.args}));break}case"tool-result":{a.enqueue(wa("tool_result",{toolCallId:s.toolCallId,result:s.result}));break}case"error":{a.enqueue(wa("error",e(s.error)));break}case"step-start":{a.enqueue(wa("start_step",{messageId:s.messageId}));break}case"step-finish":{a.enqueue(wa("finish_step",{finishReason:s.finishReason,usage:t?{promptTokens:s.usage.promptTokens,completionTokens:s.usage.completionTokens}:void 0,isContinued:s.isContinued}));break}case"finish":{i&&a.enqueue(wa("finish_message",{finishReason:s.finishReason,usage:t?{promptTokens:s.usage.promptTokens,completionTokens:s.usage.completionTokens}:void 0}));break}default:{const l=o;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:i,getErrorMessage:s,sendUsage:a,sendReasoning:o,sendSources:l,experimental_sendFinish:c}={}){uU({response:e,status:t,statusText:n,headers:cU(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:i,getErrorMessage:s,sendUsage:a,sendReasoning:o,sendSources:l,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){uU({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:cU(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?XD(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:i,sendUsage:s,sendReasoning:a,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:i,sendUsage:s,sendReasoning:a,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:n,headers:uk(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:uk(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},mUe=Ze({name:$e(),version:$e()}).passthrough(),JD=Ze({_meta:Ws(Ze({}).passthrough())}).passthrough(),Qx=JD,gUe=Ze({method:$e(),params:Ws(JD)}),yUe=Ze({experimental:Ws(Ze({}).passthrough()),logging:Ws(Ze({}).passthrough()),prompts:Ws(Ze({listChanged:Ws(kr())}).passthrough()),resources:Ws(Ze({subscribe:Ws(kr()),listChanged:Ws(kr())}).passthrough()),tools:Ws(Ze({listChanged:Ws(kr())}).passthrough())}).passthrough();Qx.extend({protocolVersion:$e(),capabilities:yUe,serverInfo:mUe,instructions:Ws($e())});var bUe=Qx.extend({nextCursor:Ws($e())}),vUe=Ze({name:$e(),description:Ws($e()),inputSchema:Ze({type:Pn("object"),properties:Ws(Ze({}).passthrough())}).passthrough()}).passthrough();bUe.extend({tools:dn(vUe)});var xUe=Ze({type:Pn("text"),text:$e()}).passthrough(),wUe=Ze({type:Pn("image"),data:$e().base64(),mimeType:$e()}).passthrough(),die=Ze({uri:$e(),mimeType:Ws($e())}).passthrough(),_Ue=die.extend({text:$e()}),SUe=die.extend({blob:$e().base64()}),CUe=Ze({type:Pn("resource"),resource:Ai([_Ue,SUe])}).passthrough();Qx.extend({content:dn(Ai([xUe,wUe,CUe])),isError:kr().default(!1).optional()}).or(Qx.extend({toolResult:_w()}));var uT="2.0",kUe=Ze({jsonrpc:Pn(uT),id:Ai([$e(),At().int()])}).merge(gUe).strict(),EUe=Ze({jsonrpc:Pn(uT),id:Ai([$e(),At().int()]),result:Qx}).strict(),TUe=Ze({jsonrpc:Pn(uT),id:Ai([$e(),At().int()]),error:Ze({code:At().int(),message:$e(),data:Ws(_w())})}).strict(),AUe=Ze({jsonrpc:Pn(uT)}).merge(Ze({method:$e(),params:Ws(JD)})).strict();Ai([kUe,AUe,EUe,TUe]);var RUe={};YD(RUe,{mergeIntoDataStream:()=>MUe,toDataStream:()=>IUe,toDataStreamResponse:()=>NUe});function fie(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,i){i.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function QD(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var i;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&bU((i=n.data)==null?void 0:i.chunk,r);return}bU(n,r)}})).pipeThrough(fie(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(wa("text",n))}}))}function IUe(e,t){return QD(e,t).pipeThrough(new TextEncoderStream)}function NUe(e,t){var n;const r=QD(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),i=t==null?void 0:t.data,s=t==null?void 0:t.init,a=i?XD(i.stream,r):r;return new Response(a,{status:(n=s==null?void 0:s.status)!=null?n:200,statusText:s==null?void 0:s.statusText,headers:uk(s==null?void 0:s.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function MUe(e,t){t.dataStream.merge(QD(e,t.callbacks))}function bU(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var jUe={};YD(jUe,{mergeIntoDataStream:()=>DUe,toDataStream:()=>PUe,toDataStreamResponse:()=>OUe});function e6(e,t){const n=FUe();return w0e(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,i){i.enqueue(n(r.delta))}})).pipeThrough(fie(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,i)=>{i.enqueue(wa("text",r))}}))}function PUe(e,t){return e6(e,t).pipeThrough(new TextEncoderStream)}function OUe(e,t={}){var n;const{init:r,data:i,callbacks:s}=t,a=e6(e,s).pipeThrough(new TextEncoderStream),o=i?XD(i.stream,a):a;return new Response(o,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:uk(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function DUe(e,t){t.dataStream.merge(e6(e,t.callbacks))}function FUe(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class LUe{static async executeInteraction(t,n,r){let i,s=!1,a=null,o,l,c;try{i=await fUe(n);for await(const u of i.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(u.type){case"text-delta":r.onChunk(u.textDelta);break;case"reasoning":r.onReasoningChunk(u.textDelta);break;case"tool-call":r.onToolCall(u);break;case"tool-result":r.onToolResult(u);break;case"step-start":r.onStepStart&&r.onStepStart({messageId:u.messageId,request:u.request,warnings:u.warnings||[]}),console.log(`[AIService] Step started for ${t} - Message ID: ${u.messageId}`);break;case"step-finish":r.onStepFinish&&r.onStepFinish({finishReason:u.finishReason,usage:u.usage,isContinued:u.isContinued||!1,warnings:u.warnings||[]}),console.log(`[AIService] Step finished for ${t} - Reason: ${u.finishReason}, Continued: ${u.isContinued}`);break;case"finish":s=!0,a=u.finishReason,o=u.usage,l=u.providerMetadata;break;case"error":r.onError(new Error(`AI Stream Error Part: ${u.error instanceof Error?u.error.message:u.error}`));return;default:console.warn(`[AIService] Received unexpected stream part type: ${u.type} for ${t}`,u);break}}i!=null&&i.reasoning?(c=await i.reasoning,console.log(`[AIService] Extracted final reasoning for ${t}`)):console.log(`[AIService] No final reasoning found in stream result for ${t}.`),!n.abortSignal.aborted&&s?r.onFinish({finishReason:a,usage:o,providerMetadata:l,reasoning:c}):!n.abortSignal.aborted&&!s&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(u){console.error(`[AIService] Error during streamText call for ${t}:`,u),u instanceof Error&&u.name==="AbortError"||r.onError(u instanceof Error?u:new Error(String(u)))}finally{console.log(`[AIService] Stream processing finished for ${t}.`)}}}const BUe=".litechat/conversations",hie="/synced_repos";async function $Ue(e,t,n,r=!1){n(t.id,"syncing");const i=Fr(`${hie}/${t.id}`),s={username:t.username,password:t.password},a=t.branch||"main";try{let o=!1;try{await e.promises.stat(fu(i,".git")),o=!0}catch(l){if(l.code==="ENOENT")o=!1;else throw l}o?(r||De.info(`Pulling latest changes for "${t.name}"...`),await EE(i,a,s,{fsInstance:e}),r||De.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(r||De.info(`Cloning repository "${t.name}"...`),await hZ(i,t.remoteUrl,a,s,{fsInstance:e}),r||De.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(o){console.error(`Failed to initialize/sync repository ${t.name}:`,o),n(t.id,"error")}}async function zUe(e,t,n,r,i,s,a,o=!1){var h,m;r(t.id,"syncing");const l=Fr(`${hie}/${n.id}`),c=fu(l,BUe,`${t.id}.json`),u={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(fu(l,".git"))}catch(_){if(_.code==="ENOENT"){De.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw _}o||De.info(`Pulling latest changes for "${n.name}"...`),await EE(l,d,u,{fsInstance:e});let y=null,b=null;try{const _=await Sh(c,{fsInstance:e}),S=new TextDecoder().decode(_);y=JSON.parse(S),b=(h=y==null?void 0:y.conversation)!=null&&h.updatedAt?new Date(y.conversation.updatedAt).getTime():null,isNaN(b??NaN)&&(b=null)}catch(_){_.code==="ENOENT"?console.log(`Conversation file ${c} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${_.message}`),De.warning(`Could not read remote version of conversation: ${_.message}`))}const v=t.updatedAt.getTime(),x=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!y||v>(b??0)||v>x&&v>=(b??0)){o||De.info("Local changes detected. Pushing to remote...");const _=await Nt.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...C}=t,E=JSON.stringify({conversation:C,interactions:_},null,2);await TE(c,E,{fsInstance:e}),await RO(l,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await IO(l,d,u,{fsInstance:e}),await i(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),o||De.success("Conversation synced successfully (pushed).")}else if(b&&b>v){o||De.info("Remote changes detected. Updating local conversation...");const _={...y.conversation,createdAt:new Date(y.conversation.createdAt),updatedAt:new Date(y.conversation.updatedAt),lastSyncedAt:new Date};await Nt.saveConversation(_),await Nt.deleteInteractionsForConversation(t.id);const S=y.interactions.map(C=>Nt.saveInteraction({...C,conversationId:t.id,startedAt:C.startedAt?new Date(C.startedAt):null,endedAt:C.endedAt?new Date(C.endedAt):null}));await Promise.all(S),s()===t.id&&a()==="conversation"&&await Ln.getState().loadInteractions(t.id),r(t.id,"idle"),o||De.success("Conversation synced successfully (pulled).")}else o||De.info("Conversation already up-to-date."),await i(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(y){console.error(`Sync failed for conversation ${t.id}:`,y),r(t.id,"error",y.message)}}const fa={loaded:"project.loaded",added:"project.added",updated:"project.updated",deleted:"project.deleted",loadingStateChanged:"project.loading.state.changed",loadProjectsRequest:"project.load.projects.request",addProjectRequest:"project.add.project.request",updateProjectRequest:"project.update.project.request",deleteProjectRequest:"project.delete.project.request"},Wn={conversationsLoaded:"conversation.conversations.loaded",selectedItemChanged:"conversation.selected.item.changed",conversationAdded:"conversation.added",conversationUpdated:"conversation.updated",conversationDeleted:"conversation.deleted",conversationSyncStatusChanged:"conversation.sync.status.changed",syncReposLoaded:"conversation.sync.repos.loaded",syncRepoChanged:"conversation.sync.repo.changed",syncRepoInitStatusChanged:"conversation.sync.repo.init.status.changed",loadingStateChanged:"conversation.loading.state.changed",loadConversationsRequest:"conversation.load.conversations.request",addConversationRequest:"conversation.add.conversation.request",updateConversationRequest:"conversation.update.conversation.request",deleteConversationRequest:"conversation.delete.conversation.request",selectItemRequest:"conversation.select.item.request",importConversationRequest:"conversation.import.conversation.request",exportConversationRequest:"conversation.export.conversation.request",exportProjectRequest:"conversation.export.project.request",exportAllConversationsRequest:"conversation.export.all.conversations.request",loadSyncReposRequest:"conversation.load.sync.repos.request",addSyncRepoRequest:"conversation.add.sync.repo.request",updateSyncRepoRequest:"conversation.update.sync.repo.request",deleteSyncRepoRequest:"conversation.delete.sync.repo.request",linkConversationToRepoRequest:"conversation.link.conversation.to.repo.request",syncConversationRequest:"conversation.sync.conversation.request",initializeOrSyncRepoRequest:"conversation.initialize.or.sync.repo.request",updateCurrentConversationToolSettingsRequest:"conversation.update.current.conversation.tool.settings.request"},ko=Il(Nl((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await Nt.loadProjects();e({projects:n,isLoading:!1}),Le.emit(fa.loaded,{projects:n})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1}),Le.emit(fa.loadingStateChanged,{isLoading:!1,error:"Failed to load projects"})}},addProject:async n=>{var l;const r=Xs(),i=new Date,s=n.parentId?((l=t().getProjectById(n.parentId))==null?void 0:l.path)??"/":"/",a=Fr(`${s}/${n.name.replace(/\s+/g,"-").toLowerCase()}-${r.substring(0,4)}`),o={id:r,path:a,createdAt:i,updatedAt:i,name:n.name,parentId:n.parentId??null,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,defaultTagIds:n.defaultTagIds??null,defaultRuleIds:n.defaultRuleIds??null,metadata:n.metadata??{}};try{return await Nt.saveProject(o),e(c=>{c.projects.unshift(o),c.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime())}),Le.emit(fa.added,{project:o}),r}catch(c){throw console.error("ProjectStore: Error adding project",c),e({error:"Failed to save new project"}),c}},updateProject:async(n,r)=>{var a;const i=t().getProjectById(n);if(!i){console.warn(`ProjectStore: Project ${n} not found for update.`);return}const s={...i,...r,updatedAt:new Date};if(r.name&&r.name!==i.name){const o=i.parentId?((a=t().getProjectById(i.parentId))==null?void 0:a.path)??"/":"/";s.path=Fr(`${o}/${r.name.replace(/\s+/g,"-").toLowerCase()}-${n.substring(0,4)}`)}try{await Nt.saveProject(s),e(o=>{const l=o.projects.findIndex(c=>c.id===n);l!==-1&&(o.projects[l]=s,o.projects.sort((c,u)=>u.updatedAt.getTime()-c.updatedAt.getTime()))}),Le.emit(fa.updated,{projectId:n,updates:s})}catch(o){throw console.error("ProjectStore: Error updating project",o),e({error:"Failed to save project update"}),o}},deleteProject:async n=>{const r=t().projects.find(a=>a.id===n);if(!r)return;const i=new Set,s=a=>{i.add(a),t().projects.filter(o=>o.parentId===a).forEach(o=>s(o.id))};s(n);try{await Nt.deleteProject(n),e(a=>({projects:a.projects.filter(o=>!i.has(o.id))})),Le.emit(Wn.loadConversationsRequest,void 0),Le.emit(fa.deleted,{projectId:n}),De.success(`Project "${r.name}" and its contents deleted.`)}catch(a){throw console.error("ProjectStore: Error deleting project",a),e({error:"Failed to delete project"}),a}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getTopLevelProjectId:n=>{if(!n)return null;let r=t().getProjectById(n);if(!r)return null;for(;r.parentId;){const i=t().getProjectById(r.parentId);if(!i)break;r=i}return r.id},getEffectiveProjectSettings:n=>{const r=mr.getState(),i=Ir.getState().selectedModelId,s={systemPrompt:r.globalSystemPrompt,modelId:i,temperature:r.temperature,maxTokens:r.maxTokens,topP:r.topP,topK:r.topK,presencePenalty:r.presencePenalty,frequencyPenalty:r.frequencyPenalty,defaultTagIds:null,defaultRuleIds:null};if(!n)return s;const a=t().getProjectById(n);if(!a)return s;const o=a.parentId?t().getEffectiveProjectSettings(a.parentId):s;return{systemPrompt:a.systemPrompt!==null&&a.systemPrompt!==void 0?a.systemPrompt:o.systemPrompt,modelId:a.modelId!==null&&a.modelId!==void 0?a.modelId:o.modelId,temperature:a.temperature!==null&&a.temperature!==void 0?a.temperature:o.temperature,maxTokens:a.maxTokens!==null&&a.maxTokens!==void 0?a.maxTokens:o.maxTokens,topP:a.topP!==null&&a.topP!==void 0?a.topP:o.topP,topK:a.topK!==null&&a.topK!==void 0?a.topK:o.topK,presencePenalty:a.presencePenalty!==null&&a.presencePenalty!==void 0?a.presencePenalty:o.presencePenalty,frequencyPenalty:a.frequencyPenalty!==null&&a.frequencyPenalty!==void 0?a.frequencyPenalty:o.frequencyPenalty,defaultTagIds:a.defaultTagIds!==null&&a.defaultTagIds!==void 0?a.defaultTagIds:o.defaultTagIds,defaultRuleIds:a.defaultRuleIds!==null&&a.defaultRuleIds!==void 0?a.defaultRuleIds:o.defaultRuleIds}},getRegisteredActionHandlers:()=>{const n="projectStore",r=t(),i=s=>async a=>{await s(a)};return[{eventName:fa.loadProjectsRequest,handler:r.loadProjects,storeId:n},{eventName:fa.addProjectRequest,handler:i(r.addProject),storeId:n},{eventName:fa.updateProjectRequest,handler:s=>r.updateProject(s.id,s.updates),storeId:n},{eventName:fa.deleteProjectRequest,handler:s=>r.deleteProject(s.id),storeId:n}]}}))),yS=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},UUe=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${t4(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${t4(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,i)=>r.index-i.index).forEach(r=>{var i,s,a,o,l,c,u,d;((i=r.prompt)!=null&&i.content||(o=(a=(s=r.prompt)==null?void 0:s.metadata)==null?void 0:a.attachedFiles)!=null&&o.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(h=>{n+=`- ${h.name} (${h.type}, ${vx(h.size)}) ${h.source==="vfs"?`(VFS: ${h.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((u=r.metadata)!=null&&u.promptTokens||(d=r.metadata)!=null&&d.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class Fg{static async importConversation(t,n,r){try{const i=await t.text(),s=JSON.parse(i);if(!s||typeof s!="object"||!s.conversation||!Array.isArray(s.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const a=s.conversation,o=s.interactions;if(!a.id||!a.title||!a.createdAt||!a.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:a.title||"Imported Chat",metadata:a.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),c=o.map(u=>Nt.saveInteraction({...u,conversationId:l,id:Xs()}));await Promise.all(c),await r(l,"conversation"),De.success("Conversation imported successfully.")}catch(i){throw console.error("ImportExportService: Error importing conversation",i),De.error(`Import failed: ${i instanceof Error?i.message:String(i)}`),i}}static async exportConversation(t,n){try{const r=$n.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const i=await Nt.loadInteractionsForConversation(t);let s,a;const o=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const c=JSON.stringify({conversation:r,interactions:i},null,2);s=new Blob([c],{type:"application/json"}),a=`litechat_conversation_${o}_${t.substring(0,6)}.json`}else if(n==="md"){const l=UUe(r,i);s=new Blob([l],{type:"text/markdown"}),a=`litechat_conversation_${o}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");yS(s,a),De.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),De.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=ko.getState(),{conversations:i}=$n.getState(),s=r(t);if(!s)throw new Error("Project not found.");const a=async h=>{const m=n.find(x=>x.id===h);if(!m)throw new Error(`Project ${h} not found in state.`);const y=n.filter(x=>x.parentId===h),b=i.filter(x=>x.projectId===h),v=[];for(const x of y)v.push(await a(x.id));for(const x of b){const _=await Nt.loadInteractionsForConversation(x.id);v.push({conversation:x,interactions:_})}return{project:m,children:v}},o=await a(t),l=JSON.stringify(o,null,2),c=new Blob([l],{type:"application/json"}),d=`litechat_project_${s.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;yS(c,d),De.success(`Project "${s.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),De.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=$n.getState().conversations,n=[];for(const a of t){const o=await Nt.loadInteractionsForConversation(a.id);n.push({conversation:a,interactions:o})}const r=JSON.stringify(n,null,2),i=new Blob([r],{type:"application/json"}),s=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;yS(i,s),De.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),De.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}static async exportFullConfiguration(t){try{const n=await Nt.getAllDataForExport(t),r=JSON.stringify(n,null,2),i=new Blob([r],{type:"application/json"}),s=`litechat_full_export_${new Date().toISOString().split("T")[0]}.json`;yS(i,s),De.success("Full configuration exported successfully.")}catch(n){throw console.error("ImportExportService: Error exporting full configuration",n),De.error(`Full export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async importFullConfiguration(t,n){try{const r=await t.text(),i=JSON.parse(r);if(!i||typeof i!="object"||!i.version)throw new Error("Invalid import file format. Missing version or basic structure.");await Nt.importAllData(i,n),De.success("Configuration imported successfully. Reloading application..."),setTimeout(()=>window.location.reload(),1500)}catch(r){throw console.error("ImportExportService: Error importing full configuration",r),De.error(`Full import failed: ${r instanceof Error?r.message:String(r)}`),r}}}const Pc="sync_repos",si={repoChanged:"sync.repo.changed",repoInitStatusChanged:"sync.repo.init.status.changed",bulkSyncStarted:"sync.bulk.sync.started",bulkSyncProgress:"sync.bulk.sync.progress",bulkSyncCompleted:"sync.bulk.sync.completed",bulkSyncFailed:"sync.bulk.sync.failed"},Hi=Il(Nl((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)}),Le.emit(un.loadingStateChanged,{isLoading:t().loading,operationLoading:t().operationLoading,error:t().error})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n}),Le.emit(un.loadingStateChanged,{isLoading:t().loading,operationLoading:t().operationLoading,error:t().error})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&De.error(`VFS Error: ${n}`)}),Le.emit(un.loadingStateChanged,{isLoading:t().loading,operationLoading:t().operationLoading,error:t().error})},_addNodes:n=>{e(r=>{const i={};n.forEach(s=>{r.nodes[s.id]=s;const a=s.parentId??r.rootId??"";i[a]||(i[a]=r.childrenMap[a]?[...r.childrenMap[a]]:[]),i[a].includes(s.id)||i[a].push(s.id)});for(const s in i)(!r.childrenMap[s]||JSON.stringify(r.childrenMap[s].sort())!==JSON.stringify(i[s].sort()))&&(r.childrenMap[s]=i[s])}),Le.emit(un.nodesUpdated,{vfsKey:t().vfsKey,nodes:t().nodes,childrenMap:t().childrenMap})},_updateNode:(n,r)=>{e(i=>{i.nodes[n]&&Object.assign(i.nodes[n],r)}),Le.emit(un.nodesUpdated,{vfsKey:t().vfsKey,nodes:t().nodes,childrenMap:t().childrenMap})},_removeNodes:n=>{e(r=>{n.forEach(i=>{const s=r.nodes[i];if(s){const a=s.parentId??r.rootId??"";if(r.childrenMap[a]&&(r.childrenMap[a]=r.childrenMap[a].filter(o=>o!==i)),delete r.nodes[i],r.selectedFileIds.delete(i),s.type==="folder"){const o=Object.values(r.nodes).filter(l=>l.parentId===i).map(l=>l.id);o.length>0&&t()._removeNodes(o),delete r.childrenMap[i]}}})}),Le.emit(un.nodesUpdated,{vfsKey:t().vfsKey,nodes:t().nodes,childrenMap:t().childrenMap}),Le.emit(un.selectionChanged,{selectedFileIds:Array.from(t().selectedFileIds)})},_setFsInstance:n=>{e({fs:n}),Le.emit(un.fsInstanceChanged,{fsInstance:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),Le.emit(un.vfsEnabledChanged,{enabled:n}),n||(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),Le.emit(un.vfsKeyChanged,{vfsKey:null,configuredVfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),Le.emit(un.vfsKeyChanged,{vfsKey:t().vfsKey,configuredVfsKey:n})},setVfsKey:n=>{if(n!==null){const r=t().vfsKey,i=t().configuredVfsKey;if(n===r){n&&n!==i&&!t().initializingKey&&t().initializeVFS(n).catch(s=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,s)});return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${i}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),Le.emit(un.vfsKeyChanged,{vfsKey:n,configuredVfsKey:null}),n!==null&&t().initializeVFS(n).catch(s=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,s)})}},initializeVFS:async(n,r)=>{let i,s;if(typeof n=="object"&&n!==null&&"vfsKey"in n)console.warn("[VfsStore] initializeVFS called with a single object payload. Correcting. Input:",JSON.parse(JSON.stringify(n))),i=String(n.vfsKey),s=n.options;else if(typeof n=="string")i=n,s=r;else{const h=`[VfsStore] initializeVFS called with invalid vfsKey type. Type: ${typeof n}, Value: "${String(n)}". Aborting.`;throw console.error(h,n),new Error("VFS key must be a string and cannot be empty.")}if(!i||i.trim()===""){const h=`[VfsStore] initializeVFS: Derived vfsKey is empty or invalid. Original param: ${String(n)}, Derived key: "${i}". Aborting.`;throw console.error(h,{originalVfsKeyParam:n,originalOptionsParam:r}),new Error("VFS key cannot be empty after processing.")}const a=(s==null?void 0:s.force)===!0;if(t().initializingKey===i){const h=`Initialization skipped for "${i}". Already actively initializing this exact key.`;return console.warn(`[VfsStore] ${h}`),new Promise((m,y)=>{const b=setInterval(()=>{const v=t();v.initializingKey!==i&&(clearInterval(b),v.configuredVfsKey===i&&v.fs?m(v.fs):y(new Error(`VFS initialization for "${i}" failed or was interrupted`)))},100);setTimeout(()=>{clearInterval(b),y(new Error(`Timeout waiting for VFS "${i}" initialization to complete`))},1e4)})}if(t().configuredVfsKey===i&&t().fs)return a||e({loading:!1}),t().fs;if(!a){if(t().vfsKey!==i){const h=`UI Initialization aborted for "${i}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${h}`),new Error(h)}if(t().initializingKey!==null&&t().initializingKey!==i){const h=`UI Initialization skipped for "${i}". Already initializing a different key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${h}`),new Error(h)}}const{_setLoading:o,_setError:l,_addNodes:c,_setFsInstance:u,_setConfiguredVfsKey:d}=t();console.log(`[VfsStore] Initializing VFS with key: ${i} (Forced: ${a})`),e({initializingKey:i}),a||(o(!0),l(null));try{const h=await ZEe(i);if(!h)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==i){const b=`UI Initialization for key "${i}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${b}`),e({initializingKey:null,loading:!1}),new Error(b)}if(a)return u(h),d(i),e({initializingKey:null}),Le.emit(un.loadingStateChanged,{isLoading:!1,operationLoading:!1,error:null}),h;u(h),d(i),console.log(`[VfsStore] UI VFS instance configured for key: ${i}`);const m="vfs-root";let y=t().nodes[m];try{await h.promises.stat("/")}catch(b){if(b.code==="ENOENT")console.warn("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw b}if(!y||y.path!=="/"){const b=Date.now();y={id:m,parentId:null,name:"",path:"/",type:"folder",createdAt:b,lastModified:b},c([y])}return e(b=>{b.rootId=y.id,b.currentParentId=y.id}),await t().fetchNodes(y.id),h}catch(h){const m=`Failed to initialize VFS (${i}): ${h instanceof Error?h.message:String(h)}`;throw console.error(`[VfsStore DEBUG] Error in initializeVFS catch block: ${m}`,h),t().initializingKey===i&&(l(m),a||(u(null),d(null))),new Error(m)}finally{t().initializingKey===i&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:i,_addNodes:s,fs:a,nodes:o,rootId:l,configuredVfsKey:c,vfsKey:u,initializingKey:d}=t();if(!a||c!==u||d){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!a}, Match: ${c===u}, Init: ${d}`);return}r(!0);try{const h=n?o[n]:o[l||""],m=h?h.path:"/",y=await NO(m,{fsInstance:a}),b=n??l??"",v=new Set(y.map(E=>E.path)),S=(t().childrenMap[b]||[]).map(E=>t().nodes[E]).filter(Boolean).filter(E=>!v.has(E.path)).map(E=>E.id);S.length>0&&t()._removeNodes(S);const C=y.map(E=>{const A=Object.values(t().nodes).find(N=>N.path===E.path),R=Date.now();return{id:(A==null?void 0:A.id)||Xs(),parentId:n,name:E.name,path:E.path,type:E.isDirectory?"folder":"file",size:E.size,createdAt:(A==null?void 0:A.createdAt)??R,lastModified:E.lastModified.getTime(),mimeType:E.isDirectory?void 0:E.mimeType}});C.length>0&&s(C),e(E=>{const A=C.map(R=>R.id);(!E.childrenMap[b]||JSON.stringify(E.childrenMap[b].sort())!==JSON.stringify(A.sort()))&&(E.childrenMap[b]=A)})}catch(h){console.error("Failed to fetch VFS nodes:",h),i("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=Fr(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const i=t().rootId;return i?t().nodes[i]:void 0}return Object.values(t().nodes).find(i=>i.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:i,rootId:s,fs:a}=t();if(!a||t().vfsKey!==t().configuredVfsKey)return;const o=Fr(n),l=r(o);l&&l.type==="folder"?(e(c=>{c.currentParentId=l.id}),t().childrenMap[l.id]||await i(l.id)):o==="/"&&s?(e(c=>{c.currentParentId=s}),t().childrenMap[s]||await i(s)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:i,_setError:s,fs:a,nodes:o,rootId:l,_addNodes:c,configuredVfsKey:u,vfsKey:d}=t();if(!a||u!==d){s("Filesystem not ready.");return}if(!r.trim()){s("Directory name cannot be empty.");return}i(!0);try{const h=n?o[n]:o[l||""],m=h?h.path:"/",y=Y3(m,r.trim());try{throw await a.promises.stat(y),new Error(`"${r.trim()}" already exists.`)}catch(_){if(_.code!=="ENOENT")throw _}await gZ(y,{fsInstance:a});const b=Date.now(),x={id:Xs(),parentId:n,name:r.trim(),path:y,type:"folder",createdAt:b,lastModified:b};c([x])}catch(h){console.error("Failed to create directory:",h),s(h.message||"Failed to create directory.")}finally{i(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:i,_setError:s,fs:a,nodes:o,rootId:l,configuredVfsKey:c,vfsKey:u}=t();if(!a||c!==u){s("Filesystem not ready.");return}i(!0);try{const d=n?o[n]:o[l||""],h=d?d.path:"/";await yZ(Array.from(r),h,{fsInstance:a}),await t().fetchNodes(n)}catch(d){console.error("Failed to upload files:",d),s("Failed to upload one or more files.")}finally{i(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:i,_removeNodes:s,fs:a,configuredVfsKey:o,vfsKey:l}=t();if(!a||o!==l){i("Filesystem not ready.");return}r(!0);try{const c=n.map(u=>t().nodes[u]).filter(Boolean);for(const u of c)await MO(u.path,u.type==="folder",{fsInstance:a});s(n)}catch(c){console.error("Failed to delete nodes:",c),i("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:i,_setError:s,_updateNode:a,nodes:o,fs:l,rootId:c,configuredVfsKey:u,vfsKey:d}=t();if(!l||u!==d){s("Filesystem not ready.");return}if(!r.trim()){s("Name cannot be empty.");return}const h=o[n];if(!h){s("Item not found.");return}if(h.name!==r.trim()){i(!0);try{const m=h.parentId?o[h.parentId]:o[c||""],y=m?m.path:"/",b=Y3(y,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await bZ(h.path,b,{fsInstance:l});const v={name:r.trim(),path:b,lastModified:Date.now()};a(n,v)}catch(m){console.error("Failed to rename item:",m),s(m.message||"Failed to rename item.")}finally{i(!1)}}},downloadFile:async n=>{const{nodes:r,fs:i,_setError:s,configuredVfsKey:a,vfsKey:o}=t();if(!i||a!==o)return s("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return s("File not found."),null;try{const c=await Sh(l.path,{fsInstance:i}),u=l.mimeType||"application/octet-stream",d=new Blob([c],{type:u});return{name:l.name,blob:d}}catch(c){return console.error("Failed to download file:",c),s("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{r.selectedFileIds.add(n)}),Le.emit(un.selectionChanged,{selectedFileIds:Array.from(t().selectedFileIds)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)}),Le.emit(un.selectionChanged,{selectedFileIds:Array.from(t().selectedFileIds)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()}),Le.emit(un.selectionChanged,{selectedFileIds:[]})},resetStuckInitialization:()=>{console.warn("[VfsStore] Force resetting stuck initialization state"),e({initializingKey:null,loading:!1,operationLoading:!1,error:null})},getRegisteredActionHandlers:()=>{const n="vfsStore",r=t(),i=s=>async a=>{await s(a)};return[{eventName:un.setVfsKeyRequest,handler:s=>r.setVfsKey(s.key),storeId:n},{eventName:un.initializeVFSRequest,handler:async s=>{await r.initializeVFS(s.vfsKey,s.options)},storeId:n},{eventName:un.fetchNodesRequest,handler:s=>r.fetchNodes(s.parentId),storeId:n},{eventName:un.setCurrentPathRequest,handler:s=>r.setCurrentPath(s.path),storeId:n},{eventName:un.createDirectoryRequest,handler:s=>r.createDirectory(s.parentId,s.name),storeId:n},{eventName:un.uploadFilesRequest,handler:s=>r.uploadFiles(s.parentId,s.files),storeId:n},{eventName:un.deleteNodesRequest,handler:s=>r.deleteNodes(s.ids),storeId:n},{eventName:un.renameNodeRequest,handler:s=>r.renameNode(s.id,s.newName),storeId:n},{eventName:un.downloadFileRequest,handler:i(r.downloadFile),storeId:n},{eventName:un.selectFileRequest,handler:s=>r.selectFile(s.fileId),storeId:n},{eventName:un.deselectFileRequest,handler:s=>r.deselectFile(s.fileId),storeId:n},{eventName:un.clearSelectionRequest,handler:r.clearSelection,storeId:n},{eventName:un.setEnableVfsRequest,handler:s=>r._setEnableVfs(s.enabled),storeId:n}]}}))),qUe="/synced_repos",$n=Il(Nl((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>(console.log("[ConversationStore] Ensuring Sync VFS is ready..."),Hi.getState().initializingKey===Pc&&(console.warn("[ConversationStore] VFS appears stuck in initializing state, resetting..."),Hi.getState().resetStuckInitialization()),new Promise((r,i)=>{let s=null;const a=()=>{Le.off(un.fsInstanceChanged,o),Le.off(un.loadingStateChanged,l),s&&(clearTimeout(s),s=null)},o=u=>{Hi.getState().configuredVfsKey===Pc&&u.fsInstance&&(console.log(`[ConversationStore] Sync VFS ready via fsInstanceChanged for key ${Pc}.`),a(),r(u.fsInstance))},l=u=>{const d=Hi.getState();d.configuredVfsKey===Pc&&(u.error?(console.error(`[ConversationStore] Sync VFS initialization error for key ${Pc}: ${u.error}`),a(),i(new Error(u.error))):!u.isLoading&&!u.operationLoading&&d.fs&&(console.log(`[ConversationStore] Sync VFS ready via loadingStateChanged for key ${Pc}.`),a(),r(d.fs)))};Le.on(un.fsInstanceChanged,o),Le.on(un.loadingStateChanged,l);const c=Hi.getState();if(c.configuredVfsKey===Pc&&c.fs&&!c.loading&&!c.operationLoading&&!c.error){console.log(`[ConversationStore] Sync VFS already ready for key ${Pc}.`),a(),r(c.fs);return}s=setTimeout(()=>{const u=`Timeout waiting for Sync VFS (${Pc}) to become ready.`;console.error(`[ConversationStore] ${u}`),a(),i(new Error(u))},3e4),Le.emit(un.initializeVFSRequest,{vfsKey:Pc,options:{force:!0}})})),loadConversations:async()=>{e({isLoading:!0,error:null});try{const[n,r]=await Promise.all([Nt.loadConversations(),Nt.loadSyncRepos()]),i={};n.forEach(s=>{if(s.syncRepoId){const a=s.lastSyncedAt instanceof Date?s.lastSyncedAt.getTime():null,o=s.updatedAt instanceof Date?s.updatedAt.getTime():null;a?o&&o>a?i[s.id]="needs-sync":i[s.id]="idle":i[s.id]="needs-sync"}else i[s.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:i,repoInitializationStatus:{},isLoading:!1}),Le.emit(Wn.conversationsLoaded,{conversations:n}),Le.emit(Wn.syncReposLoaded,{repos:r})}catch(n){console.error("ConversationStore: Error loading conversations",n),e({error:"Failed load conversations",isLoading:!1}),Le.emit(Wn.loadingStateChanged,{isLoading:!1,error:"Failed load conversations"})}},addConversation:async n=>{const r=Xs(),i=new Date,s={id:r,createdAt:i,updatedAt:i,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};let a=!1;try{const o=JSON.stringify(s);return await Nt.saveConversation(JSON.parse(o)),a=!0,e(l=>{l.conversations.some(c=>c.id===s.id)||(l.conversations.unshift(s),l.conversationSyncStatus[r]=s.syncRepoId?"needs-sync":"idle")}),Le.emit(Wn.conversationAdded,{conversation:s}),r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),a&&e(l=>({error:"Failed to save new conversation to state",conversations:l.conversations.filter(c=>c.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(l.conversationSyncStatus).filter(([c])=>c!==r))})),o}},updateConversation:async(n,r)=>{const i=t().getConversationById(n);if(!i){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(a=>{const o=a.conversations.findIndex(l=>l.id===n);if(o!==-1){const l=a.conversations[o].metadata??{},c=r.metadata??{},u={...l,...c};Object.assign(a.conversations[o],{...r,metadata:u,updatedAt:new Date});const d=["title","metadata","projectId"].some(y=>y in r),h=a.conversations[o].lastSyncedAt instanceof Date?a.conversations[o].lastSyncedAt.getTime():null,m=a.conversations[o].updatedAt.getTime();"syncRepoId"in r?a.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":d&&a.conversations[o].syncRepoId&&a.conversationSyncStatus[n]==="idle"&&(!h||m>h)&&(a.conversationSyncStatus[n]="needs-sync")}});const s=t().getConversationById(n);if(s)try{const a=JSON.parse(JSON.stringify(s));await Nt.saveConversation(a),Le.emit(Wn.conversationUpdated,{conversationId:n,updates:r})}catch(a){throw console.error("ConversationStore: Error updating conversation",a),e(o=>{const l=o.conversations.findIndex(c=>c.id===n);if(l!==-1){o.conversations[l]=i;const c=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,u=i.updatedAt.getTime();o.conversationSyncStatus[n]=i.syncRepoId&&c&&u<=c?"idle":i.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update"}),a}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(a=>{const o=a.conversations.findIndex(l=>l.id===n);if(o!==-1){a.conversations[o]=i;const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,c=i.updatedAt.getTime();a.conversationSyncStatus[n]=i.syncRepoId&&l&&c<=l?"idle":i.syncRepoId?"needs-sync":"idle"}a.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,i=t().selectedItemType,s=t().conversations.find(a=>a.id===n);if(s){e(a=>({conversations:a.conversations.filter(o=>o.id!==n),selectedItemId:r===n&&i==="conversation"?null:r,selectedItemType:r===n&&i==="conversation"?null:i,conversationSyncStatus:Object.fromEntries(Object.entries(a.conversationSyncStatus).filter(([o])=>o!==n))}));try{await Nt.deleteConversation(n),await Nt.deleteInteractionsForConversation(n),Le.emit(Wn.conversationDeleted,{conversationId:n}),r===n&&i==="conversation"&&(Le.emit(tr.setCurrentConversationIdRequest,{id:null}),Le.emit(Wn.selectedItemChanged,{itemId:null,itemType:null}))}catch(a){throw console.error("ConversationStore: Error deleting conversation",a),e(o=>{if(s){o.conversations.push(s);const l=s.lastSyncedAt instanceof Date?s.lastSyncedAt.getTime():null,c=s.updatedAt.getTime();o.conversationSyncStatus[n]=s.syncRepoId&&l&&c<=l?"idle":s.syncRepoId?"needs-sync":"idle"}r===n&&i==="conversation"&&(o.selectedItemId=n,o.selectedItemType="conversation"),o.error="Failed to delete conversation"}),a}}},selectItem:async(n,r)=>{const i=t().selectedItemId,s=t().selectedItemType;if(i===n&&s===r)return;console.log(`ConversationStore: Selecting item. ID: ${n}, Type: ${r}. Previous: ${i} (${s})`);const a=r==="conversation"?n:null;a&&(Le.emit(tr.setCurrentConversationIdRequest,{id:a}),Le.emit(tr.loadInteractionsRequest,{conversationId:a})),e({selectedItemId:n,selectedItemType:r}),Le.emit(Wn.selectedItemChanged,{itemId:n,itemType:r})},importConversation:async n=>{await Fg.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await Fg.exportConversation(n,r)},exportProject:async n=>{await Fg.exportProject(n)},exportAllConversations:async()=>{await Fg.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Nt.loadSyncRepos();e({syncRepos:n,isLoading:!1}),Le.emit(Wn.syncReposLoaded,{repos:n})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1}),Le.emit(Wn.loadingStateChanged,{isLoading:!1,error:"Failed load sync repositories"})}}},addSyncRepo:async n=>{const r=Xs(),i=new Date,s={id:r,createdAt:i,updatedAt:i,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(a=>{a.syncRepos.push(s)});try{const a=t().syncRepos.find(o=>o.id===r);if(a){const o=JSON.parse(JSON.stringify(a));await Nt.saveSyncRepo(o),Le.emit(si.repoChanged,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");De.success(`Sync repository "${s.name}" added.`);try{await t().initializeOrSyncRepo(r)}catch(o){console.warn(`Failed to automatically initialize repository "${s.name}":`,o),De.warning(`Repository "${s.name}" added but initialization failed. You can manually sync it later.`)}return r}catch(a){throw console.error("ConversationStore: Error adding sync repo",a),e(o=>({error:"Failed to save sync repository",syncRepos:o.syncRepos.filter(l=>l.id!==r)})),a}},updateSyncRepo:async(n,r)=>{const i=t().syncRepos.find(a=>a.id===n);if(!i){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(a=>{const o=a.syncRepos.findIndex(l=>l.id===n);o!==-1&&Object.assign(a.syncRepos[o],{...r,branch:r.branch||a.syncRepos[o].branch||"main",updatedAt:new Date})});const s=t().syncRepos.find(a=>a.id===n);if(s)try{const a=JSON.parse(JSON.stringify(s));await Nt.saveSyncRepo(a),Le.emit(si.repoChanged,{repoId:n,action:"updated"}),De.success(`Sync repository "${s.name}" updated.`)}catch(a){throw console.error("ConversationStore: Error updating sync repo",a),e(o=>{const l=o.syncRepos.findIndex(c=>c.id===n);l!==-1&&(o.syncRepos[l]=i),o.error="Failed to save sync repository update"}),a}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(a=>{const o=a.syncRepos.findIndex(l=>l.id===n);o!==-1&&(a.syncRepos[o]=i),a.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(r)try{let i;try{i=await t()._ensureSyncVfsReady()}catch(a){throw console.error("ConversationStore: Failed to initialize sync VFS for deletion",a),De.error("Failed to initialize filesystem for deletion. Repository not deleted."),a}await Nt.deleteSyncRepo(n);const s=Fr(`${qUe}/${n}`);try{await MO(s,!0,{fsInstance:i}),console.log(`[ConversationStore] Successfully deleted VFS directory: ${s}`)}catch(a){console.error(`[ConversationStore] Failed to delete VFS directory ${s}:`,a),a.code!=="ENOENT"&&console.warn(`Could not remove local sync folder for "${r.name}": ${a.message}`)}e(a=>({syncRepos:a.syncRepos.filter(o=>o.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(a.repoInitializationStatus).filter(([o])=>o!==n))})),Le.emit(si.repoChanged,{repoId:n,action:"deleted"}),De.success(`Sync repository "${r.name}" deleted.`)}catch(i){throw console.error("ConversationStore: Error deleting sync repo",i),e(s=>{s.error="Failed to delete sync repository"}),i}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),De.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,i=null)=>{e(s=>{s.conversationSyncStatus[n]=r,r==="error"&&i&&console.error(`Sync error for ${n}: ${i}`)}),Le.emit(Wn.conversationSyncStatusChanged,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(i=>{i.repoInitializationStatus[n]=r}),Le.emit(si.repoInitStatusChanged,{repoId:n,status:r})},initializeOrSyncRepo:async(n,r=!1)=>{const i=t().syncRepos.find(a=>a.id===n);if(!i){r||De.error("Sync repsitory configuration not found.");return}let s;try{s=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await $Ue(s,i,t()._setRepoInitializationStatus,r)},syncConversation:async(n,r=!1)=>{const i=t().getConversationById(n);if(!i){r||De.error("Conversation not found for syncing.");return}if(!i.syncRepoId){r||De.info("Conversation not linked to a sync repository.");return}const s=t().syncRepos.find(l=>l.id===i.syncRepoId);if(!s){r||De.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await zUe(a,i,s,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType,r);const o=t().getConversationById(n);o&&e(l=>{const c=l.conversations.findIndex(u=>u.id===n);c!==-1&&(l.conversations[c]=o)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},syncAllConversations:async()=>{const{BulkSyncService:n}=await Hr(async()=>{const{BulkSyncService:r}=await Promise.resolve().then(()=>e0);return{BulkSyncService:r}},void 0);await n.syncAll({syncRepos:!1,syncConversations:!0,continueOnError:!0,maxConcurrent:3})},syncPendingConversations:async()=>{const{BulkSyncService:n}=await Hr(async()=>{const{BulkSyncService:r}=await Promise.resolve().then(()=>e0);return{BulkSyncService:r}},void 0);await n.syncPendingConversations()},initializeAllRepositories:async()=>{const{BulkSyncService:n}=await Hr(async()=>{const{BulkSyncService:r}=await Promise.resolve().then(()=>e0);return{BulkSyncService:r}},void 0);await n.initializeAllRepositories()},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:i,updateConversation:s}=t();if(i!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const a=t().getConversationById(r);if(!a){console.warn("Cannot update tool settings: Selected conversation not found.");return}const o=a.metadata??{},l={...o};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(o)||!a.metadata)&&await s(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(i=>{i.conversations=i.conversations.map(s=>s.projectId&&r.has(s.projectId)?{...s,projectId:null}:s)})},getRegisteredActionHandlers:()=>{const n="conversationStore",r=t(),i=s=>async a=>{await s(a)};return[{eventName:Wn.loadConversationsRequest,handler:r.loadConversations,storeId:n},{eventName:Wn.addConversationRequest,handler:i(r.addConversation),storeId:n},{eventName:Wn.updateConversationRequest,handler:s=>r.updateConversation(s.id,s.updates),storeId:n},{eventName:Wn.deleteConversationRequest,handler:s=>r.deleteConversation(s.id),storeId:n},{eventName:Wn.selectItemRequest,handler:s=>r.selectItem(s.id,s.type),storeId:n},{eventName:Wn.importConversationRequest,handler:s=>r.importConversation(s.file),storeId:n},{eventName:Wn.exportConversationRequest,handler:s=>r.exportConversation(s.conversationId,s.format),storeId:n},{eventName:Wn.exportProjectRequest,handler:s=>r.exportProject(s.projectId),storeId:n},{eventName:Wn.exportAllConversationsRequest,handler:r.exportAllConversations,storeId:n},{eventName:Wn.loadSyncReposRequest,handler:r.loadSyncRepos,storeId:n},{eventName:Wn.addSyncRepoRequest,handler:i(r.addSyncRepo),storeId:n},{eventName:Wn.updateSyncRepoRequest,handler:s=>r.updateSyncRepo(s.id,s.updates),storeId:n},{eventName:Wn.deleteSyncRepoRequest,handler:s=>r.deleteSyncRepo(s.id),storeId:n},{eventName:Wn.linkConversationToRepoRequest,handler:s=>r.linkConversationToRepo(s.conversationId,s.repoId),storeId:n},{eventName:Wn.syncConversationRequest,handler:s=>r.syncConversation(s.conversationId),storeId:n},{eventName:Wn.initializeOrSyncRepoRequest,handler:s=>r.initializeOrSyncRepo(s.repoId),storeId:n},{eventName:Wn.updateCurrentConversationToolSettingsRequest,handler:s=>r.updateCurrentConversationToolSettings(s),storeId:n}]}}))),ec={copyInteractionResponseRequest:"canvas.interaction.copy.response.request",regenerateInteractionRequest:"canvas.interaction.regenerate.request",regenerateInteractionWithModelRequest:"canvas.interaction.regenerate.with.model.request",raceInteractionRequest:"canvas.interaction.race.request",editResponseRequest:"canvas.interaction.edit.response.request",copyCodeBlockRequest:"canvas.codeblock.copy.request"},zv={async submitPrompt(e){var P,L,O,V,F,J;console.log("[ConversationService] submitPrompt called",e);const t=Ln.getState(),n=ko.getState(),r=_o.getState(),i=$n.getState(),s=mr.getState(),a=t.currentConversationId;if(!a){De.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const o=i.getConversationById(a),l=(o==null?void 0:o.projectId)??null,c=n.getEffectiveProjectSettings(l),d=t.interactions.filter(U=>U.conversationId===a).length===0&&s.autoTitleEnabled&&((P=e.metadata)==null?void 0:P.autoTitleEnabledForTurn)===!0&&s.autoTitleModelId,m=t.interactions.filter(U=>U.parentId===null&&U.status==="COMPLETED").sort((U,G)=>U.index-G.index).map(U=>{var G;if(U.type==="message.assistant_regen"&&((G=U.metadata)!=null&&G.regeneratedFromId)){const $=t.interactions.find(ne=>ne.id===U.metadata.regeneratedFromId);if($&&$.prompt&&$.type==="message.user_assistant")return{...U,prompt:$.prompt,type:"message.user_assistant"}}return U.type==="message.user_assistant"&&U.prompt?U:null}).filter(Boolean),y=P3(m);let b=e.content;const v=[],x=((L=e.metadata)==null?void 0:L.effectiveRulesContent)??[],_=x.filter(U=>U.type==="system").map(U=>U.content),S=x.filter(U=>U.type==="before").map(U=>U.content),C=x.filter(U=>U.type==="after").map(U=>U.content);S.length>0&&(b=`${S.join(`
`)}

${b}`),C.length>0&&(b=`${b}

    ${C.join(`
`)}`),b&&v.push({type:"text",text:b});const E=((O=e.metadata)==null?void 0:O.attachedFiles)??[];if(E.length>0){const U=await this._processFilesForPrompt(E,a);v.unshift(...U)}v.length>0?y.push({role:"user",content:v}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");let R=((V=e.metadata)==null?void 0:V.turnSystemPrompt)??c.systemPrompt??void 0;_.length>0&&(R=`${R?`${R}

        `:""}${_.join(`
`)}`);const N={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(N).forEach(U=>{(N[U]===null||N[U]===void 0)&&delete N[U]});const M={system:R,messages:y,parameters:N,metadata:{...(({turnSystemPrompt:U,activeTagIds:G,activeRuleIds:$,effectiveRulesContent:ne,autoTitleEnabledForTurn:H,...te})=>({...te,effectivelyAppliedTagIds:G,effectivelyAppliedRuleIds:$}))(e.metadata??{}),modelId:r.modelId??void 0,attachedFiles:(F=e.metadata.attachedFiles)==null?void 0:F.map(({contentBase64:U,contentText:G,...$})=>$)}};try{const U=Ap.startInteraction(M,a,e);if(d){console.log("[ConversationService] Triggering asynchronous title generation.");const G=(((J=e.metadata)==null?void 0:J.effectiveRulesContent)??[]).map($=>({id:$.sourceRuleId||Xs(),name:$.sourceRuleId?`Rule ${$.sourceRuleId.substring(0,4)}`:"Context Rule",content:$.content,type:$.type,createdAt:new Date,updatedAt:new Date}));this.generateConversationTitle(a,e,G).catch($=>{console.error("[ConversationService] Background title generation failed:",$)})}await U}catch(U){throw console.error("[ConversationService] Error starting interaction:",U),De.error(`Failed to start interaction: ${U instanceof Error?U.message:String(U)}`),U}},async generateConversationTitle(e,t,n){var o,l;const r=mr.getState();if(!r.autoTitleModelId){console.warn("[ConversationService] Auto-title generation skipped: No model selected in settings.");return}let i=t.content;if(i.length>r.autoTitlePromptMaxLength&&(i=i.substring(0,r.autoTitlePromptMaxLength)+"..."),r.autoTitleIncludeFiles&&((l=(o=t.metadata)==null?void 0:o.attachedFiles)!=null&&l.length)){const c=t.metadata.attachedFiles.map(u=>u.name).join(", ");i+=`

[Attached files: ${c}]`}if(r.autoTitleIncludeRules&&n.length>0){const c=n.map(u=>u.name).join(", ");i+=`

[Active rules: ${c}]`}const s={system:"Generate a concise, descriptive title (max 8-10 words) for the following user prompt. Output ONLY the title text, nothing else.",messages:[{role:"user",content:i}],parameters:{temperature:.5,max_tokens:20},metadata:{modelId:r.autoTitleModelId,isTitleGeneration:!0},tools:void 0,toolChoice:"none"},a={id:Xs(),content:`[Generate title based on: ${t.content.substring(0,50)}...]`,parameters:s.parameters,metadata:{...s.metadata,originalTurnId:t.id}};try{await Ap.startInteraction(s,e,a,"conversation.title_generation")}catch(c){console.error("[ConversationService] Error starting title generation interaction:",c)}},async regenerateInteraction(e){var O,V,F,J;console.log(`[ConversationService] regenerateInteraction called for ID: ${e}`);const t=Ln.getState(),n=ko.getState(),r=_o.getState(),i=$n.getState(),s=t.interactions.find(U=>U.id===e);if(console.log("[ConversationService] Target interaction for regen:",JSON.parse(JSON.stringify(s))),!s||!s.prompt){De.error("Cannot regenerate: Original interaction data missing.");return}const a=null,o=s.index,l=s.prompt,c=s.conversationId,u=i.getConversationById(c),d=(u==null?void 0:u.projectId)??null,h=n.getEffectiveProjectSettings(d),m=s.index,y=t.interactions.filter(U=>U.conversationId===c&&U.index<m&&U.status==="COMPLETED"&&U.type==="message.user_assistant"&&U.parentId===null).sort((U,G)=>U.index-G.index),b=P3(y);let v=l.content;const x=[],_=((O=l.metadata)==null?void 0:O.effectiveRulesContent)??[],S=_.filter(U=>U.type==="system").map(U=>U.content),C=_.filter(U=>U.type==="before").map(U=>U.content),E=_.filter(U=>U.type==="after").map(U=>U.content);C.length>0&&(v=`${C.join(`
`)}

${v}`),E.length>0&&(v=`${v}

    ${E.join(`
`)}`),v&&x.push({type:"text",text:v});const A=((V=l.metadata)==null?void 0:V.attachedFiles)??[];if(A.length>0){const U=await this._processFilesForPrompt(A,c);x.unshift(...U)}x.length>0?b.push({role:"user",content:x}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");let N=((F=l.metadata)==null?void 0:F.turnSystemPrompt)??h.systemPrompt??void 0;S.length>0&&(N=`${N?`${N}

        `:""}${S.join(`
`)}`);const M={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...l.parameters??{}};Object.keys(M).forEach(U=>{(M[U]===null||M[U]===void 0)&&delete M[U]});const P={system:N,messages:b,parameters:M,metadata:{...(({turnSystemPrompt:U,activeTagIds:G,activeRuleIds:$,effectiveRulesContent:ne,autoTitleEnabledForTurn:H,...te})=>({...te,effectivelyAppliedTagIds:G,effectivelyAppliedRuleIds:$}))(l.metadata??{}),modelId:r.modelId??void 0,regeneratedFromId:e,attachedFiles:A.map(({contentBase64:U,contentText:G,...$})=>$)}};let L=null;try{if(L=await Ap.startInteraction(P,c,l,"message.assistant_regen"),!L)throw new Error("Failed to create new interaction for regeneration.");const U={};let G=!1;L.index!==o&&(U.index=o,G=!0),L.parentId!==a&&(U.parentId=a,G=!0);let $=L;G&&(t._updateInteractionInState(L.id,U),$={...L,...U},await Nt.saveInteraction($)),console.log("[ConversationService] New active interaction state after potential updates:",JSON.parse(JSON.stringify($)));const ne=[];let H=s;for(;H;){ne.push(H);const ee=(J=H.metadata)==null?void 0:J.regeneratedFromId;ee?H=t.interactions.find(se=>se.id===ee):H=null}const te=ne.sort((ee,se)=>{var Me,je;const he=((Me=ee.startedAt)==null?void 0:Me.getTime())??0,ce=((je=se.startedAt)==null?void 0:je.getTime())??0;return he-ce});for(let ee=0;ee<te.length;ee++){const se=te[ee],he={parentId:$.id,index:ee};console.log(`[ConversationService] Updating old version ${se.id} to be child of ${$.id} with childIndex ${ee}`,JSON.parse(JSON.stringify(he))),t._updateInteractionInState(se.id,he),await Nt.saveInteraction({...se,...he})}}catch(U){throw console.error("[ConversationService] Error during regeneration process:",U),De.error(`Failed to regenerate response: ${U instanceof Error?U.message:String(U)}`),U}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(s=>s.source==="vfs");let i;if(r.length>0){const s=$n.getState().getConversationById(t),a=(s==null?void 0:s.projectId)??"orphan";try{i=await this._ensureVfsReady(a)}catch{De.error(`Filesystem unavailable for key ${a}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),i=void 0}}for(const s of e){let a=null;try{if(s.source==="direct")a=$B(s);else if(s.source==="vfs"&&i&&s.path){console.log(`[ConversationService] Fetching VFS file: ${s.path}`);const o=await Sh(s.path,{fsInstance:i});a=$B({...s,contentBytes:o})}else if(s.source==="vfs"&&!i)continue;a&&n.push(a)}catch(o){console.error(`[ConversationService] Error processing file ${s.name}:`,o),n.push({type:"text",text:`[Error processing file: ${s.name}]`})}}return n},async _ensureVfsReady(e){return console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`),new Promise((t,n)=>{const r=o=>{Hi.getState().configuredVfsKey===e&&(s(),t(o.fsInstance))},i=o=>{if(Hi.getState().configuredVfsKey===e&&!o.isLoading&&!o.operationLoading)if(o.error)s(),n(new Error(o.error));else{const l=Hi.getState().fs;l&&(s(),t(l))}},s=()=>{Le.off(un.fsInstanceChanged,r),Le.off(un.loadingStateChanged,i)};Le.on(un.fsInstanceChanged,r),Le.on(un.loadingStateChanged,i);const a=Hi.getState();if(a.configuredVfsKey===e&&a.fs&&!a.loading&&!a.operationLoading&&!a.error){s(),t(a.fs);return}if(a.configuredVfsKey===e&&a.error&&!a.loading&&!a.operationLoading){s(),n(new Error(a.error));return}Le.emit(un.initializeVFSRequest,{vfsKey:e,options:{force:!0}})})}},Ap={_activeControllers:new Map,_streamingToolData:new Map,_firstChunkTimestamps:new Map,_interactionStartTimes:new Map,_pendingRegenerations:new Set,initializeCanvasEventHandlers(){Le.on(ec.copyInteractionResponseRequest,async e=>{const{interactionId:t}=e,n=Ln.getState().interactions.find(i=>i.id===t);if(!n){De.error(`Copy failed: Interaction ${t} not found.`),console.warn(`[InteractionService] Copy request for unknown interaction ${t}`);return}const r=n.response??"";if(typeof r!="string"||r.trim()===""){De.info("No response content to copy.");return}try{await navigator.clipboard.writeText(r),De.success("Response copied!")}catch(i){De.error("Failed to copy response."),console.error("[InteractionService] Error copying response:",i)}}),Le.on(ec.regenerateInteractionRequest,async e=>{const{interactionId:t}=e;if(console.log(`[InteractionService] Received regenerateInteractionRequest for ${t}`),this._pendingRegenerations.has(t)){console.warn(`[InteractionService] Regeneration already pending for ${t}. Ignoring request.`);return}const n=Ln.getState().interactions.find(o=>o.id===t);if(!n){De.error(`Regeneration failed: Interaction ${t} not found.`),console.warn(`[InteractionService] Regeneration request for unknown interaction ${t}`);return}const r=Ln.getState();if(r.status==="streaming"){De.info("Cannot regenerate while another response is streaming.");return}const s=r.interactions.filter(o=>o.conversationId===n.conversationId&&o.parentId===null&&(o.type==="message.user_assistant"||o.type==="message.assistant_regen")).sort((o,l)=>o.index-l.index),a=s.length>0?s[s.length-1]:null;if((a==null?void 0:a.id)!==t){De.info("Can only regenerate the last response in the conversation.");return}try{this._pendingRegenerations.add(t),console.log(`[InteractionService] Starting ConversationService.regenerateInteraction for ${t}`),await zv.regenerateInteraction(t),console.log(`[InteractionService] Finished ConversationService.regenerateInteraction for ${t}`)}catch(o){De.error(`Failed to regenerate response: ${String(o)}`),console.error(`[InteractionService] Error regenerating interaction ${t}:`,o)}finally{this._pendingRegenerations.delete(t)}}),Le.on(ec.regenerateInteractionWithModelRequest,async e=>{const{interactionId:t,modelId:n}=e;if(console.log(`[InteractionService] Received regenerateInteractionWithModelRequest for ${t} with model ${n}`),this._pendingRegenerations.has(t)){console.warn(`[InteractionService] Regeneration already pending for ${t}. Ignoring request.`);return}const r=Ln.getState().interactions.find(l=>l.id===t);if(!r){De.error(`Regeneration failed: Interaction ${t} not found.`),console.warn(`[InteractionService] Regeneration request for unknown interaction ${t}`);return}const i=Ln.getState();if(i.status==="streaming"){De.info("Cannot regenerate while another response is streaming.");return}const a=i.interactions.filter(l=>l.conversationId===r.conversationId&&l.parentId===null&&(l.type==="message.user_assistant"||l.type==="message.assistant_regen")).sort((l,c)=>l.index-c.index),o=a.length>0?a[a.length-1]:null;if((o==null?void 0:o.id)!==t){De.info("Can only regenerate the last response in the conversation.");return}try{this._pendingRegenerations.add(t);const l=_o.getState(),c=l.modelId;console.log(`[InteractionService] Temporarily setting model to ${n} for regeneration`),l.setModelId(n);try{console.log(`[InteractionService] Starting ConversationService.regenerateInteraction for ${t} with model ${n}`),await zv.regenerateInteraction(t),console.log(`[InteractionService] Finished ConversationService.regenerateInteraction for ${t}`)}finally{console.log(`[InteractionService] Restoring original model ${c}`),l.setModelId(c)}}catch(l){De.error(`Failed to regenerate response: ${String(l)}`),console.error(`[InteractionService] Error regenerating interaction ${t}:`,l)}finally{this._pendingRegenerations.delete(t)}}),Le.on(ec.raceInteractionRequest,async e=>{const{interactionId:t,modelIds:n,staggerMs:r}=e;console.log(`[InteractionService] Received raceInteractionRequest for ${t} with ${n.length} models`);const i=Ln.getState().interactions.find(c=>c.id===t);if(!i){De.error(`Race failed: Interaction ${t} not found.`),console.warn(`[InteractionService] Race request for unknown interaction ${t}`);return}const s=Ln.getState();if(s.status==="streaming"){De.info("Cannot start race while another response is streaming.");return}const o=s.interactions.filter(c=>c.conversationId===i.conversationId&&c.parentId===null&&(c.type==="message.user_assistant"||c.type==="message.assistant_regen")).sort((c,u)=>c.index-u.index),l=o.length>0?o[o.length-1]:null;if((l==null?void 0:l.id)!==t){De.info("Can only race from the last response in the conversation.");return}if(n.length<2){De.error("Need at least 2 models to race");return}try{const c=_o.getState(),u=c.modelId;console.log(`[InteractionService] Starting race with ${n.length} models`),De.info(`Starting race with ${n.length} models...`);const d=n.map((b,v)=>new Promise(x=>{setTimeout(async()=>{try{c.setModelId(b),console.log(`[InteractionService] Starting race participant ${v+1}/${n.length} with model ${b}`),await zv.regenerateInteraction(t),console.log(`[InteractionService] Race participant ${v+1} finished`),x({success:!0,modelId:b,index:v})}catch(_){console.error(`[InteractionService] Race participant ${v+1} failed:`,_),x({success:!1,modelId:b,index:v,error:_})}},v*r)})),h=await Promise.all(d);c.setModelId(u);const m=h.filter(b=>b.success).length,y=h.length-m;m>0?De.success(`Race completed! ${m} models responded${y>0?`, ${y} failed`:""}`):De.error(`Race failed: All ${n.length} models failed to respond`)}catch(c){De.error(`Race failed: ${String(c)}`),console.error("[InteractionService] Error during race:",c)}}),Le.on(ec.copyCodeBlockRequest,async e=>{const{content:t,interactionId:n,codeBlockId:r,language:i}=e;if(!t||t.trim()===""){De.info("No code to copy.");return}try{await navigator.clipboard.writeText(t),De.success(`Code block ${i?`(${i}) `:""}copied!`),console.log(`[InteractionService] Code block copied. InteractionID: ${n}, CodeBlockID: ${r}, Language: ${i}`)}catch(s){De.error("Failed to copy code block."),console.error("[InteractionService] Error copying code block:",s)}})},async startInteraction(e,t,n,r="message.user_assistant"){var M,P,L,O,V,F,J,U,G,$;console.log(`[InteractionService] startInteraction called (Type: ${r})`,e,t,n);const i=await eC(m0.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(i===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const s=i&&typeof i=="object"?i.prompt:e,a=Xs(),o=new AbortController;this._activeControllers.set(a,o),this._streamingToolData.set(a,{calls:[],results:[]}),this._firstChunkTimestamps.delete(a),this._interactionStartTimes.delete(a);const l=Ln.getState(),u=l.interactions.filter(ne=>ne.conversationId===t),d=r==="conversation.title_generation"?-1:u.reduce((ne,H)=>Math.max(ne,H.index),-1)+1,h=null,m=performance.now();this._interactionStartTimes.set(a,m);const y={id:a,conversationId:t,type:r,prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...s.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0,timeToFirstToken:void 0,generationTime:void 0,isTitleGeneration:r==="conversation.title_generation"},index:d,parentId:h};r!=="conversation.title_generation"?(l._addInteractionToState(y),l._addStreamingId(a)):(l._addInteractionToState(y),l._addStreamingId(a),console.log(`[InteractionService] Added title generation interaction ${a} to state.`)),Nt.saveInteraction({...y}).catch(ne=>{console.error(`[InteractionService] Failed initial persistence for ${a}`,ne)}),Le.emit(tr.started,{interactionId:a,conversationId:t,type:y.type});const b=(M=s.metadata)==null?void 0:M.modelId;if(!b)return this._finalizeInteraction(a,"ERROR",new Error("No model ID specified in prompt metadata."),r),null;const{providerId:v,modelId:x}=rc(b);if(!v||!x)return this._finalizeInteraction(a,"ERROR",new Error(`Invalid combined model ID format: ${b}`),r),null;const _=Ir.getState().dbProviderConfigs.find(ne=>ne.id===v);if(!_)return this._finalizeInteraction(a,"ERROR",new Error(`Provider configuration not found for ID: ${v}`),r),null;const S=Ir.getState().getApiKeyForProvider(v),C=gP(_,x,S);if(!C)return this._finalizeInteraction(a,"ERROR",new Error(`Failed to instantiate model instance ${b} from provider ${_.name}`),r),null;console.log(`[InteractionService] Using model instance for ${b}`);const E=r!=="conversation.title_generation"?(((P=s.metadata)==null?void 0:P.enabledTools)??[]).reduce((ne,H)=>{const ee=Qo.getState().getRegisteredTools()[H];if(ee!=null&&ee.implementation){const se={...ee.definition};se.execute=async he=>{const ce=Ln.getState().currentConversationId,Me=ce?$n.getState().getConversationById(ce):null;let je;Me&&Me.projectId?typeof Me.projectId=="string"?je=Me.projectId:(console.warn(`[InteractionService] conversation.projectId for conversation ${ce} is not a string (type: ${typeof Me.projectId}). Defaulting VFS key to "orphan". Value:`,Me.projectId),je="orphan"):je="orphan";let Ne;try{if(Le.emit(un.initializeVFSRequest,{vfsKey:je,options:{force:!0}}),await new Promise(Ce=>setTimeout(Ce,100)),Ne=Hi.getState().fs,Hi.getState().configuredVfsKey!==je||!Ne)throw new Error(`Filesystem for key "${je}" not ready after request.`)}catch(Ce){return{_isError:!0,error:`Filesystem error: ${Ce.message}`}}try{const Ce=Uve(),Ue=ee.definition.parameters.parse(he),et=ee.implementation,qe={...Ce,fsInstance:Ne};return await et(Ue,qe)}catch(Ce){const Ue=Ce instanceof Error?Ce.message:String(Ce);return Ce instanceof lu?{_isError:!0,error:`Invalid arguments: ${Ce.errors.map(et=>`${et.path.join(".")} (${et.message})`).join(", ")}`}:{_isError:!0,error:Ue}}},ne[H]=se}return ne},{}):void 0,A=((L=s.parameters)==null?void 0:L.maxSteps)??mr.getState().toolMaxSteps,R={model:C,messages:s.messages,abortSignal:o.signal,system:s.system,temperature:(O=s.parameters)==null?void 0:O.temperature,maxTokens:(V=s.parameters)==null?void 0:V.max_tokens,topP:(F=s.parameters)==null?void 0:F.top_p,topK:(J=s.parameters)==null?void 0:J.top_k,presencePenalty:(U=s.parameters)==null?void 0:U.presence_penalty,frequencyPenalty:(G=s.parameters)==null?void 0:G.frequency_penalty,maxSteps:A,...E&&Object.keys(E).length>0&&{tools:E},...(($=s.parameters)==null?void 0:$.providerOptions)&&{providerOptions:s.parameters.providerOptions},toolChoice:s.toolChoice},N={onChunk:ne=>this._handleChunk(a,ne),onReasoningChunk:ne=>this._handleReasoningChunk(a,ne),onToolCall:ne=>this._handleToolCall(a,ne),onToolResult:ne=>this._handleToolResult(a,ne),onFinish:ne=>this._handleFinish(a,ne,r),onError:ne=>this._handleError(a,ne,r)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${a}`),LUe.executeInteraction(a,R,N).catch(ne=>{console.error(`[InteractionService] Error during AIService.executeInteraction for ${a}:`,ne);const H=Ln.getState().interactions.find(te=>te.id===a);H&&H.status==="STREAMING"&&this._finalizeInteraction(a,"ERROR",ne instanceof Error?ne:new Error(String(ne)),r)}),y},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);if(t&&!t.signal.aborted)t.abort(),De.info("Interaction cancelled.");else{console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`);const n=Ln.getState(),r=n.interactions.find(i=>i.id===e);n.streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"),(r==null?void 0:r.type)??"message.user_assistant"))}},async _handleChunk(e,t){this._firstChunkTimestamps.has(e)||this._firstChunkTimestamps.set(e,performance.now());const n={interactionId:e,chunk:t},r=await eC(m0.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const i=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;Ln.getState().appendInteractionResponseChunk(e,i),Le.emit(tr.streamChunk,{interactionId:e,chunk:i})}},_handleReasoningChunk(e,t){Ln.getState().appendReasoningChunk(e,t)},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),Ln.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),Ln.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t,n){console.log(`[InteractionService] Finishing interaction ${e} (Type: ${n}). Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,n,t)},_handleError(e,t,n){console.error(`[InteractionService] Handling error for interaction ${e} (Type: ${n}):`,t);const r=t.name==="AbortError";this._finalizeInteraction(e,r?"CANCELLED":"ERROR",r?void 0:t,n)},_finalizeInteraction(e,t,n,r="message.user_assistant",i){var E;const s=Ln.getState(),a=s.interactions.find(A=>A.id===e);if(!a||a.status!=="STREAMING"&&r!=="conversation.title_generation"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e);return}const o=s.activeStreamBuffers[e]??"",l=s.activeReasoningBuffers[e]??"",c=this._streamingToolData.get(e)||{calls:[],results:[]},u=(a==null?void 0:a.metadata)||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}, Reasoning Length: ${l.length}`);const d=performance.now(),h=this._interactionStartTimes.get(e),m=this._firstChunkTimestamps.get(e),y=h?Math.round(d-h):void 0,b=h&&m?Math.round(m-h):void 0,v=(i==null?void 0:i.reasoning)??l,x={status:t,endedAt:new Date,response:o||null,metadata:{...u,...(i==null?void 0:i.usage)&&{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens,totalTokens:i.usage.totalTokens},...(i==null?void 0:i.providerMetadata)&&{providerMetadata:i.providerMetadata},toolCalls:c.calls,toolResults:c.results,reasoning:v||void 0,timeToFirstToken:b,generationTime:y,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};if(r==="conversation.title_generation"&&t==="COMPLETED"&&x.response&&typeof x.response=="string"){const A=x.response.trim().replace(/^"|"$/g,"");A&&a&&(console.log(`[InteractionService] Updating conversation ${a.conversationId} title to: "${A}"`),Le.emit(Wn.updateConversationRequest,{id:a.conversationId,updates:{title:A}}))}s._updateInteractionInState(e,x),s._removeStreamingId(e);const _=Ln.getState().interactions.find(A=>A.id===e);_?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((E=_.response)==null?void 0:E.length)??0}`),Nt.saveInteraction({..._}).catch(A=>{console.error(`[InteractionService] Failed final persistence for ${e}`,A)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let S=[],C=[];try{S=c.calls.map(A=>JSON.parse(A)),C=c.results.map(A=>JSON.parse(A))}catch(A){console.error("[InteractionService] Failed to parse tool strings for event emitter:",A)}Le.emit(tr.completed,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:S,toolResults:C}),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},fk=lt.memo(({interactionId:e,className:t,renderSlot:n,showPrompt:r=!0})=>{var F;const{interaction:i,interactionStatus:s}=Ln(Tn(J=>{const U=J.interactions.find(G=>G.id===e);return{interaction:U,interactionStatus:U==null?void 0:U.status}})),a=mr(J=>J.streamingRenderFPS),[o,l]=T.useState(""),[c,u]=T.useState(""),[d,h]=T.useState(!0),[m,y]=T.useState(!1),b=T.useRef(null),v=T.useRef(0),x=T.useRef(null);T.useEffect(()=>{const J=1e3/a;let U=!0;const G=$=>{if(!U)return;if(Ln.getState().streamingInteractionIds.includes(e)){if($-v.current>=J){const H=Ln.getState().activeStreamBuffers[e]??"",te=Ln.getState().activeReasoningBuffers[e]??"";l(H),u(te),v.current=$}b.current=requestAnimationFrame(G)}else{const H=Ln.getState().activeStreamBuffers[e]??"",te=Ln.getState().activeReasoningBuffers[e]??"";l(H),u(te),b.current=null}};return b.current=requestAnimationFrame(G),()=>{U=!1,b.current&&(cancelAnimationFrame(b.current),b.current=null)}},[e,a]),T.useEffect(()=>{if(s&&s!=="STREAMING"){const J=Ln.getState().activeStreamBuffers[e]??"",U=Ln.getState().activeReasoningBuffers[e]??"";l(J),u(U),b.current&&(cancelAnimationFrame(b.current),b.current=null)}},[s,e]);const{dbProviderConfigs:_,getAllAvailableModelDefsForProvider:S}=Ir(Tn(J=>({dbProviderConfigs:J.dbProviderConfigs,getAllAvailableModelDefsForProvider:J.getAllAvailableModelDefsForProvider}))),C=T.useMemo(()=>{var ee;const J=(ee=i==null?void 0:i.metadata)==null?void 0:ee.modelId;if(!J)return"Loading Model...";const{providerId:U,modelId:G}=rc(J);if(!U||!G)return J;const $=_.find(se=>se.id===U),ne=($==null?void 0:$.name)??U,te=S(U).find(se=>se.id===G);return`${(te==null?void 0:te.name)??G} (${ne})`},[(F=i==null?void 0:i.metadata)==null?void 0:F.modelId,_,S]),E=T.useCallback(()=>h(J=>!J),[]),A=T.useCallback(()=>{y(!1)},[]),R=T.useCallback(()=>{y(!0)},[]),N=T.useCallback(()=>{m?A():R()},[m,A,R]);if(!i)return r?p.jsxs("div",{className:ft("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",t),children:[p.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsxs("div",{className:"space-y-2 mt-2",children:[p.jsx("div",{className:"h-4 bg-muted rounded w-full"}),p.jsx("div",{className:"h-4 bg-muted rounded w-5/6"}),p.jsx("div",{className:"h-4 bg-muted rounded w-full"})]})]})]}):p.jsxs("div",{className:ft("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",t),children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsxs("div",{className:"space-y-2 mt-2",children:[p.jsx("div",{className:"h-4 bg-muted rounded w-full"}),p.jsx("div",{className:"h-4 bg-muted rounded w-5/6"}),p.jsx("div",{className:"h-4 bg-muted rounded w-full"})]})]});const M=()=>{Ap.abortInteraction(e)},P=n==null?void 0:n("header-actions",i,{isFolded:m,toggleFold:N}),L=n==null?void 0:n("actions",i),O=n==null?void 0:n("content",i),V=n==null?void 0:n("menu",i);return p.jsxs("div",{ref:x,className:ft("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors",s==="ERROR"?"border-destructive/50 bg-destructive/5":s==="STREAMING"?"border-primary/30":"border-border",t),children:[r&&i.prompt&&p.jsx(oT,{turnData:i.prompt,timestamp:i.startedAt,isAssistantComplete:!1}),p.jsxs("div",{className:ft("relative group/assistant",r&&i.prompt?"mt-3 pt-3 border-t border-border/50":""),children:[V,p.jsxs("div",{className:ft("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(SH,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsx("div",{className:"flex flex-col min-w-0",children:p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",C,")"]}),p.jsx("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:P})]})})]}),p.jsx("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:"Streaming..."})})]}),!m&&p.jsxs(p.Fragment,{children:[O,c&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1 cursor-pointer group/reasoning",onClick:E,children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(fh,{className:"h-3.5 w-3.5"})," Reasoning (Streaming)"]}),p.jsx("div",{className:"flex items-center opacity-0 group-hover/reasoning:opacity-100 focus-within:opacity-100 transition-opacity",children:p.jsx(Mn,{tooltipText:d?"Show Reasoning":"Hide Reasoning",onClick:J=>{J.stopPropagation(),E()},"aria-label":d?"Show reasoning":"Hide reasoning",icon:d?p.jsx(yu,{}):p.jsx(hh,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})})]}),!d&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:c})]}),p.jsx(Z$e,{interactionId:e,markdownContent:o,isStreaming:!0})]}),m&&p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:N,children:[c?"[Reasoning] ":"",o&&typeof o=="string"?`"${o.substring(0,80)}${o.length>80?"...":""}"`:"[Streaming...]"]})]}),p.jsxs("div",{className:ft("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:[L,p.jsx(X$e,{onStop:M,"aria-label":"Stop Generation"})]})]})});fk.displayName="StreamingInteractionCard";const vU=e=>e===void 0?"?":e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,VUe=({displayModelName:e,timeAgo:t,promptTokens:n,completionTokens:r,timeToFirstToken:i,generationTime:s,headerActionsSlot:a})=>{const o=n!==void 0&&r!==void 0?n+r:void 0;return p.jsxs("div",{className:ft("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(SH,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",e,")"]}),p.jsx("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:a})]}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[o!==void 0&&p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsxs(xr,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(tpe,{className:"h-3 w-3"}),p.jsx("span",{children:o.toLocaleString()})]}),p.jsxs(wr,{side:"bottom",children:["Tokens: ",n??"?"," (Prompt) +"," ",r??"?"," (Completion) = ",o]})]})}),i!==void 0&&p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsxs(xr,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(ege,{className:"h-3 w-3"}),p.jsx("span",{children:vU(i)})]}),p.jsx(wr,{side:"bottom",children:"Time to First Token"})]})}),s!==void 0&&p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsxs(xr,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(Yhe,{className:"h-3 w-3"}),p.jsx("span",{children:vU(s)})]}),p.jsx(wr,{side:"bottom",children:"Total Generation Time"})]})})]})]})]}),p.jsx("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:t})})]})},HUe=({markdownContent:e})=>{const t=jE(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const i=n;return p.jsx(iy,{lang:i.lang,code:i.code,filepath:i.filepath},`code-${r}`)}else if(n.type==="mermaid"){const i=n;return p.jsx(qD,{code:i.code},`mermaid-${r}`)}return null})}):null},WUe=({interactionId:e,response:t,toolCalls:n,toolResults:r,reasoning:i,isError:s,errorMessage:a,isFolded:o,toggleFold:l})=>{const[c,u]=T.useState(!0),[d,h]=T.useState(!1),m=Qo(Tn(E=>Object.values(E.canvasControls))),y=T.useCallback((E,A)=>m.filter(R=>R.type==="tool-call-step"&&R.targetSlot===E&&R.renderer).map(R=>R.renderer?p.jsx(lt.Fragment,{children:R.renderer(A)},R.id):null).filter(Boolean),[m]),b=T.useMemo(()=>{if(!n)return[];const E=n.map(R=>JSON.parse(R)),A=(r==null?void 0:r.map(R=>JSON.parse(R)))??[];return E.map(R=>{const N=A.find(M=>M.toolCallId===R.toolCallId);return{call:R,result:N}})},[n,r]),v=T.useCallback(()=>u(E=>!E),[]),x=T.useCallback(async()=>{if(i)try{await navigator.clipboard.writeText(i),h(!0),De.success("Reasoning copied!"),setTimeout(()=>h(!1),1500)}catch(E){De.error("Failed to copy reasoning."),console.error("Clipboard copy failed for reasoning:",E)}},[i]),_=!!i,S=t&&(typeof t!="string"||t.trim().length>0),C=b&&b.length>0;return o?p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:l,children:[_?"[Reasoning] ":"",C?`[${b==null?void 0:b.length} Tool Call(s)] `:"",S&&typeof t=="string"?`"${t.substring(0,80)}${t.length>80?"...":""}"`:C||_?"":"[No text response]"]}):p.jsxs(p.Fragment,{children:[s&&a&&p.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[p.jsx("p",{className:"font-semibold",children:"Error:"}),p.jsx("p",{children:a})]}),_&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1 cursor-pointer group/reasoning",onClick:v,children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(fh,{className:"h-3.5 w-3.5"})," Reasoning"]}),p.jsxs("div",{className:"flex items-center opacity-0 group-hover/reasoning:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(Mn,{tooltipText:"Copy Reasoning",onClick:E=>{E.stopPropagation(),x()},"aria-label":"Copy reasoning",icon:d?p.jsx(Ka,{className:"text-green-500"}):p.jsx(Pk,{}),className:"h-5 w-5 text-muted-foreground"}),p.jsx(Mn,{tooltipText:c?"Show Reasoning":"Hide Reasoning",onClick:E=>{E.stopPropagation(),v()},"aria-label":c?"Show reasoning":"Hide reasoning",icon:c?p.jsx(yu,{}):p.jsx(hh,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]})]}),!c&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:i})]}),b.map(({call:E,result:A},R)=>{const N={interactionId:e,toolCall:E,toolResult:A,canvasContextType:"tool-call-step"};return p.jsx(lt.Fragment,{children:y("tool-call-content",N)},`tool-step-${E.toolCallId||R}`)}),S&&typeof t=="string"&&p.jsx(HUe,{markdownContent:t,interactionId:e}),!S&&!C&&!_&&!s&&p.jsx("div",{className:"text-xs text-muted-foreground italic p-1",children:"[No text response]"})]})},oj=lt.memo(({interaction:e,className:t,renderSlot:n,showPrompt:r=!0})=>{var P,L,O,V,F,J,U,G,$,ne,H,te;const[i,s]=T.useState(!1),a=T.useRef(null),o=T.useCallback(()=>{s(!1)},[]),l=T.useCallback(()=>{s(!0)},[]),c=T.useCallback(()=>{i?o():l()},[i,o,l]),{dbProviderConfigs:u,getAllAvailableModelDefsForProvider:d}=Ir(Tn(ee=>({dbProviderConfigs:ee.dbProviderConfigs,getAllAvailableModelDefsForProvider:ee.getAllAvailableModelDefsForProvider}))),h=e.endedAt?kZ(new Date(e.endedAt),{addSuffix:!0}):"Processing...",m=T.useMemo(()=>{var Ce;const ee=(Ce=e.metadata)==null?void 0:Ce.modelId;if(!ee)return"Unknown Model";const{providerId:se,modelId:he}=rc(ee);if(!se||!he)return ee;const ce=u.find(Ue=>Ue.id===se),Me=(ce==null?void 0:ce.name)??se,Ne=d(se).find(Ue=>Ue.id===he);return`${(Ne==null?void 0:Ne.name)??he} (${Me})`},[(P=e.metadata)==null?void 0:P.modelId,u,d]),y=e.status==="COMPLETED",b=y||e.status==="ERROR",v=e.status==="ERROR",x=e.response&&(typeof e.response!="string"||e.response.trim().length>0),_=((L=e.metadata)==null?void 0:L.toolCalls)&&e.metadata.toolCalls.length>0,S=((O=e.metadata)==null?void 0:O.toolResults)&&e.metadata.toolResults.length>0,C=!!((V=e.metadata)!=null&&V.reasoning),E=x||_||S||C,A=n==null?void 0:n("header-actions",e,{isFolded:i,toggleFold:c}),R=n==null?void 0:n("actions",e),N=n==null?void 0:n("content",e),M=n==null?void 0:n("menu",e);return p.jsxs("div",{ref:a,className:ft("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors hover:bg-muted/50","overflow-wrap-anywhere",v?"border-destructive/50 bg-destructive/5":"border-border",t),children:[r&&e.prompt&&p.jsx(oT,{turnData:e.prompt,timestamp:e.startedAt,isAssistantComplete:y}),p.jsxs("div",{className:ft("relative group/assistant",r&&e.prompt?"mt-3 pt-3 border-t border-border/50":""),children:[M,p.jsx(VUe,{displayModelName:m,timeAgo:h,isFolded:i,toggleFold:c,canFold:E,promptTokens:(F=e.metadata)==null?void 0:F.promptTokens,completionTokens:(J=e.metadata)==null?void 0:J.completionTokens,timeToFirstToken:(U=e.metadata)==null?void 0:U.timeToFirstToken,generationTime:(G=e.metadata)==null?void 0:G.generationTime,headerActionsSlot:A&&A.length>0?p.jsx(p.Fragment,{children:A}):void 0}),N,p.jsx(WUe,{interactionId:e.id,response:e.response,toolCalls:($=e.metadata)==null?void 0:$.toolCalls,toolResults:(ne=e.metadata)==null?void 0:ne.toolResults,reasoning:(H=e.metadata)==null?void 0:H.reasoning,isError:v,errorMessage:(te=e.metadata)==null?void 0:te.error,isFolded:i,toggleFold:c})]}),b&&R&&R.length>0&&p.jsx("div",{className:ft("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:R})]})});oj.displayName="InteractionCard";const GUe=({interactionGroup:e,renderSlot:t,activeStreamingInteractionId:n})=>{const[r,i]=T.useState(0);if(!e||e.length===0)return null;if(e.length===1){const a=e[0];return p.jsxs("div",{className:"tab-content pt-0",children:[" ",a.id===n&&a.status==="STREAMING"?p.jsx(fk,{interactionId:a.id,renderSlot:t,showPrompt:!1},a.id):p.jsx(oj,{interaction:a,renderSlot:t,showPrompt:!1},a.id)]})}const s=e[r];return p.jsxs("div",{className:"response-tabs-container flex flex-col",children:[p.jsxs("div",{className:"tabs-header flex border-b mb-1",children:[" ",e.map((a,o)=>{const l=()=>{var c,u,d;return o===0?(c=a.metadata)!=null&&c.editedResponse?p.jsx(VL,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"}):p.jsx(VL,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"}):(u=a.metadata)!=null&&u.raceTab?p.jsx(MH,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"}):(d=a.metadata)!=null&&d.originalVersion?p.jsx(jH,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"}):p.jsx($pe,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"})};return p.jsxs(Tt,{variant:"ghost",size:"sm",onClick:()=>i(o),className:`mr-0.5 rounded-b-none flex items-center px-2 py-1 text-xs font-medium hover:bg-muted/50 focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-0 transition-colors duration-150 ease-in-out                 ${r===o?"border-b-2 border-primary text-primary":"border-b-2 border-transparent text-muted-foreground hover:text-foreground"}`,children:[l(),o+1," "]},a.id)})]}),p.jsxs("div",{className:"tab-content pt-1",children:[" ",s&&(s.id===n&&s.status==="STREAMING"?p.jsx(fk,{interactionId:s.id,renderSlot:t,showPrompt:!1},s.id):p.jsx(oj,{interaction:s,renderSlot:t,showPrompt:!1},s.id))]})]})};var KUe=T.createContext(void 0);function ky(e){const t=T.useContext(KUe);return e||t||"ltr"}function ew(e,[t,n]){return Math.min(n,Math.max(t,e))}function YUe(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var t6="ScrollArea",[pie,olt]=Ds(t6),[ZUe,Fl]=pie(t6),mie=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...a}=e,[o,l]=T.useState(null),[c,u]=T.useState(null),[d,h]=T.useState(null),[m,y]=T.useState(null),[b,v]=T.useState(null),[x,_]=T.useState(0),[S,C]=T.useState(0),[E,A]=T.useState(!1),[R,N]=T.useState(!1),M=En(t,L=>l(L)),P=ky(i);return p.jsx(ZUe,{scope:n,type:r,dir:P,scrollHideDelay:s,scrollArea:o,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:E,onScrollbarXEnabledChange:A,scrollbarY:b,onScrollbarYChange:v,scrollbarYEnabled:R,onScrollbarYEnabledChange:N,onCornerWidthChange:_,onCornerHeightChange:C,children:p.jsx(nr.div,{dir:P,...a,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})});mie.displayName=t6;var gie="ScrollAreaViewport",yie=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=e,a=Fl(gie,n),o=T.useRef(null),l=En(t,o,a.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(nr.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});yie.displayName=gie;var Su="ScrollAreaScrollbar",bie=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fl(Su,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=i,o=e.orientation==="horizontal";return T.useEffect(()=>(o?s(!0):a(!0),()=>{o?s(!1):a(!1)}),[o,s,a]),i.type==="hover"?p.jsx(XUe,{...r,ref:t,forceMount:n}):i.type==="scroll"?p.jsx(JUe,{...r,ref:t,forceMount:n}):i.type==="auto"?p.jsx(vie,{...r,ref:t,forceMount:n}):i.type==="always"?p.jsx(n6,{...r,ref:t}):null});bie.displayName=Su;var XUe=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fl(Su,e.__scopeScrollArea),[s,a]=T.useState(!1);return T.useEffect(()=>{const o=i.scrollArea;let l=0;if(o){const c=()=>{window.clearTimeout(l),a(!0)},u=()=>{l=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return o.addEventListener("pointerenter",c),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",c),o.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx(ta,{present:n||s,children:p.jsx(vie,{"data-state":s?"visible":"hidden",...r,ref:t})})}),JUe=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fl(Su,e.__scopeScrollArea),s=e.orientation==="horizontal",a=fT(()=>l("SCROLL_END"),100),[o,l]=YUe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,i.scrollHideDelay,l]),T.useEffect(()=>{const c=i.viewport,u=s?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const m=c[u];d!==m&&(l("SCROLL"),a()),d=m};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,s,l,a]),p.jsx(ta,{present:n||o!=="hidden",children:p.jsx(n6,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Vt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Vt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),vie=T.forwardRef((e,t)=>{const n=Fl(Su,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,a]=T.useState(!1),o=e.orientation==="horizontal",l=fT(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;a(o?c:u)}},10);return q0(n.viewport,l),q0(n.content,l),p.jsx(ta,{present:r||s,children:p.jsx(n6,{"data-state":s?"visible":"hidden",...i,ref:t})})}),n6=T.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=Fl(Su,e.__scopeScrollArea),s=T.useRef(null),a=T.useRef(0),[o,l]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Cie(o.viewport,o.content),u={...r,sizes:o,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function d(h,m){return iqe(h,a.current,o,m)}return n==="horizontal"?p.jsx(QUe,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollLeft,m=xU(h,o,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=d(h,i.dir))}}):n==="vertical"?p.jsx(eqe,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollTop,m=xU(h,o);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=d(h))}}):null}),QUe=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=Fl(Su,e.__scopeScrollArea),[a,o]=T.useState(),l=T.useRef(null),c=En(t,l,s.onScrollbarXChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(wie,{"data-orientation":"horizontal",...i,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":dT(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),Eie(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:pk(a.paddingLeft),paddingEnd:pk(a.paddingRight)}})}})}),eqe=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=Fl(Su,e.__scopeScrollArea),[a,o]=T.useState(),l=T.useRef(null),c=En(t,l,s.onScrollbarYChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(wie,{"data-orientation":"vertical",...i,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":dT(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),Eie(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:pk(a.paddingTop),paddingEnd:pk(a.paddingBottom)}})}})}),[tqe,xie]=pie(Su),wie=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=e,m=Fl(Su,n),[y,b]=T.useState(null),v=En(t,M=>b(M)),x=T.useRef(null),_=T.useRef(""),S=m.viewport,C=r.content-r.viewport,E=xi(u),A=xi(l),R=fT(d,10);function N(M){if(x.current){const P=M.clientX-x.current.left,L=M.clientY-x.current.top;c({x:P,y:L})}}return T.useEffect(()=>{const M=P=>{const L=P.target;(y==null?void 0:y.contains(L))&&E(P,C)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[S,y,C,E]),T.useEffect(A,[r,A]),q0(y,R),q0(m.content,R),p.jsx(tqe,{scope:n,scrollbar:y,hasThumb:i,onThumbChange:xi(s),onThumbPointerUp:xi(a),onThumbPositionChange:A,onThumbPointerDown:xi(o),children:p.jsx(nr.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:Vt(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),x.current=y.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),N(M))}),onPointerMove:Vt(e.onPointerMove,N),onPointerUp:Vt(e.onPointerUp,M=>{const P=M.target;P.hasPointerCapture(M.pointerId)&&P.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=_.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),hk="ScrollAreaThumb",_ie=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=xie(hk,e.__scopeScrollArea);return p.jsx(ta,{present:n||i.hasThumb,children:p.jsx(nqe,{ref:t,...r})})}),nqe=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=Fl(hk,n),a=xie(hk,n),{onThumbPositionChange:o}=a,l=En(t,d=>a.onThumbChange(d)),c=T.useRef(void 0),u=fT(()=>{c.current&&(c.current(),c.current=void 0)},100);return T.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(u(),!c.current){const m=sqe(d,o);c.current=m,o()}};return o(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,u,o]),p.jsx(nr.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Vt(e.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),y=d.clientX-m.left,b=d.clientY-m.top;a.onThumbPointerDown({x:y,y:b})}),onPointerUp:Vt(e.onPointerUp,a.onThumbPointerUp)})});_ie.displayName=hk;var r6="ScrollAreaCorner",Sie=T.forwardRef((e,t)=>{const n=Fl(r6,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(rqe,{...e,ref:t}):null});Sie.displayName=r6;var rqe=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=Fl(r6,n),[s,a]=T.useState(0),[o,l]=T.useState(0),c=!!(s&&o);return q0(i.scrollbarX,()=>{var d;const u=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(u),l(u)}),q0(i.scrollbarY,()=>{var d;const u=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(u),a(u)}),c?p.jsx(nr.div,{...r,ref:t,style:{width:s,height:o,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function pk(e){return e?parseInt(e,10):0}function Cie(e,t){const n=e/t;return isNaN(n)?0:n}function dT(e){const t=Cie(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function iqe(e,t,n,r="ltr"){const i=dT(n),s=i/2,a=t||s,o=i-a,l=n.scrollbar.paddingStart+a,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return kie([l,c],d)(e)}function xU(e,t,n="ltr"){const r=dT(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,a=t.content-t.viewport,o=s-r,l=n==="ltr"?[0,a]:[a*-1,0],c=ew(e,l);return kie([0,a],[0,o])(c)}function kie(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Eie(e,t){return e>0&&e<t}var sqe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},a=n.left!==s.left,o=n.top!==s.top;(a||o)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function fT(e,t){const n=xi(e),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function q0(e,t){const n=xi(t);Yi(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}var aqe=mie,oqe=yie,lqe=Sie;function Na({className:e,children:t,...n}){return p.jsxs(aqe,{"data-slot":"scroll-area",className:ft("relative",e),...n,children:[p.jsx(oqe,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),p.jsx(cqe,{}),p.jsx(lqe,{})]})}function cqe({className:e,orientation:t="vertical",...n}){return p.jsx(bie,{"data-slot":"scroll-area-scrollbar",orientation:t,className:ft("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:p.jsx(_ie,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function $r({className:e,...t}){return p.jsx("div",{"data-slot":"skeleton",className:ft("bg-accent animate-pulse rounded-md",e),...t})}const uqe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})};function i6({className:e,...t}){return p.jsx("div",{"data-slot":"card",className:ft("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function s6({className:e,...t}){return p.jsx("div",{"data-slot":"card-header",className:ft("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function a6({className:e,...t}){return p.jsx("div",{"data-slot":"card-title",className:ft("leading-none font-semibold",e),...t})}function Tie({className:e,...t}){return p.jsx("div",{"data-slot":"card-description",className:ft("text-muted-foreground text-sm",e),...t})}function o6({className:e,...t}){return p.jsx("div",{"data-slot":"card-content",className:ft("px-6",e),...t})}const Rr={sidebarVisibilityChanged:"ui.sidebar.visibility.changed",chatControlPanelVisibilityChanged:"ui.chat.control.panel.visibility.changed",promptControlPanelVisibilityChanged:"ui.prompt.control.panel.visibility.changed",globalLoadingChanged:"ui.global.loading.changed",globalErrorChanged:"ui.global.error.changed",focusInputFlagChanged:"ui.focus.input.flag.changed",modalStateChanged:"ui.modal.state.changed",toggleSidebarRequest:"ui.toggle.sidebar.request",toggleChatControlPanelRequest:"ui.toggle.chat.control.panel.request",togglePromptControlPanelRequest:"ui.toggle.prompt.control.panel.request",setGlobalLoadingRequest:"ui.set.global.loading.request",setGlobalErrorRequest:"ui.set.global.error.request",setFocusInputFlagRequest:"ui.set.focus.input.flag.request",openModalRequest:"ui.modal.open.request",closeModalRequest:"ui.modal.close.request",contextChanged:"ui.legacy.contextChanged"},dqe=({title:e,description:t,icon:n,onClick:r})=>p.jsxs(i6,{className:"hover:border-primary/50 hover:bg-muted/30 transition-all cursor-pointer group",onClick:r,children:[p.jsxs(s6,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsxs(a6,{className:"text-sm font-medium flex items-center gap-2",children:[n," ",e]}),p.jsx(Ehe,{className:"h-4 w-4 text-muted-foreground group-hover:translate-x-1 transition-transform"})]}),p.jsx(o6,{children:p.jsx("p",{className:"text-xs text-muted-foreground",children:t})})]}),Aie=()=>{const e=(r,i)=>{Le.emit(Rr.openModalRequest,{modalId:"settingsModal",initialTab:r,initialSubTab:i})},t=()=>{Le.emit(Rr.openModalRequest,{modalId:"core-vfs-modal-panel"})},n=[{title:"Configure Theme",description:"Customize colors, fonts, and code block appearance.",icon:p.jsx(b2,{className:"h-4 w-4 text-purple-500"}),onClick:()=>e("theme")},{title:"Manage Rules & Tags",description:"Define reusable prompt snippets and organize them.",icon:p.jsx(h3,{className:"h-4 w-4 text-blue-500"}),onClick:()=>e("rules-tags")},{title:"Add Files",description:"Upload or manage files in the virtual filesystem.",icon:p.jsx(rP,{className:"h-4 w-4 text-cyan-500"}),onClick:t},{title:"Add Provider",description:"Connect to AI services like OpenAI, Ollama, etc.",icon:p.jsx(v2,{className:"h-4 w-4 text-green-500"}),onClick:()=>e("providers","providers-config")},{title:"Add API Key",description:"Store API keys securely in your browser.",icon:p.jsx(Qv,{className:"h-4 w-4 text-amber-500"}),onClick:()=>e("providers","api-keys")},{title:"Setup Git Sync",description:"Configure repositories to sync conversations with Git.",icon:p.jsx(cc,{className:"h-4 w-4 text-orange-500"}),onClick:()=>e("git")}];return p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl w-full pt-4",children:n.map(r=>p.jsx(dqe,{title:r.title,description:r.description,icon:r.icon,onClick:r.onClick},r.title))})},wU=()=>p.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[p.jsx(uqe,{className:"h-16 w-16 text-muted-foreground mb-4"}),p.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),p.jsx("p",{className:"text-muted-foreground max-w-md mb-8",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat. You can also explore these setup options:"}),p.jsx(Aie,{})]}),l6=T.createContext({});function c6(e){const t=T.useRef(null);return t.current===null&&(t.current=e()),t.current}const u6=typeof window<"u",Rie=u6?T.useLayoutEffect:T.useEffect,hT=T.createContext(null),d6=T.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class fqe extends T.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=r instanceof HTMLElement&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function hqe({children:e,isPresent:t,anchorX:n}){const r=T.useId(),i=T.useRef(null),s=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=T.useContext(d6);return T.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:u,right:d}=s.current;if(t||!i.current||!o||!l)return;const h=n==="left"?`left: ${u}`:`right: ${d}`;i.current.dataset.motionPopId=r;const m=document.createElement("style");return a&&(m.nonce=a),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(m)&&document.head.removeChild(m)}},[t]),p.jsx(fqe,{isPresent:t,childRef:i,sizeRef:s,children:T.cloneElement(e,{ref:i})})}const pqe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:o})=>{const l=c6(mqe),c=T.useId();let u=!0,d=T.useMemo(()=>(u=!1,{id:c,initial:t,isPresent:n,custom:i,onExitComplete:h=>{l.set(h,!0);for(const m of l.values())if(!m)return;r&&r()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[n,l,r]);return s&&u&&(d={...d}),T.useMemo(()=>{l.forEach((h,m)=>l.set(m,!1))},[n]),T.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(e=p.jsx(hqe,{isPresent:n,anchorX:o,children:e})),p.jsx(hT.Provider,{value:d,children:e})};function mqe(){return new Map}function Iie(e=!0){const t=T.useContext(hT);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=T.useId();T.useEffect(()=>{if(e)return i(s)},[e]);const a=T.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,a]:[!0]}const bS=e=>e.key||"";function _U(e){const t=[];return T.Children.forEach(e,n=>{T.isValidElement(n)&&t.push(n)}),t}const gqe=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:o="left"})=>{const[l,c]=Iie(a),u=T.useMemo(()=>_U(e),[e]),d=a&&!l?[]:u.map(bS),h=T.useRef(!0),m=T.useRef(u),y=c6(()=>new Map),[b,v]=T.useState(u),[x,_]=T.useState(u);Rie(()=>{h.current=!1,m.current=u;for(let E=0;E<x.length;E++){const A=bS(x[E]);d.includes(A)?y.delete(A):y.get(A)!==!0&&y.set(A,!1)}},[x,d.length,d.join("-")]);const S=[];if(u!==b){let E=[...u];for(let A=0;A<x.length;A++){const R=x[A],N=bS(R);d.includes(N)||(E.splice(A,0,R),S.push(R))}return s==="wait"&&S.length&&(E=S),_(_U(E)),v(u),null}const{forceRender:C}=T.useContext(l6);return p.jsx(p.Fragment,{children:x.map(E=>{const A=bS(E),R=a&&!l?!1:u===x||d.includes(A),N=()=>{if(y.has(A))y.set(A,!0);else return;let M=!0;y.forEach(P=>{P||(M=!1)}),M&&(C==null||C(),_(m.current),a&&(c==null||c()),r&&r())};return p.jsx(pqe,{isPresent:R,initial:!h.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,onExitComplete:R?void 0:N,anchorX:o,children:E},A)})})},vS=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],SU={value:null};function yqe(e,t){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){a.has(d)&&(u.schedule(d),e()),l++,d(o)}const u={schedule:(d,h=!1,m=!1)=>{const b=m&&i?n:r;return h&&a.add(d),b.has(d)||b.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(o=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),t&&SU.value&&SU.value.frameloop[t].push(l),l=0,n.clear(),i=!1,s&&(s=!1,u.process(d))}};return u}const Ed={},bqe=40;function Nie(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=vS.reduce((S,C)=>(S[C]=yqe(s,t?C:void 0),S),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:m,postRender:y}=a,b=()=>{const S=Ed.useManualTiming?i.timestamp:performance.now();n=!1,Ed.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(S-i.timestamp,bqe),1)),i.timestamp=S,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),m.process(i),y.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(b))},v=()=>{n=!0,r=!0,i.isProcessing||e(b)};return{schedule:vS.reduce((S,C)=>{const E=a[C];return S[C]=(A,R=!1,N=!1)=>(n||v(),E.schedule(A,R,N)),S},{}),cancel:S=>{for(let C=0;C<vS.length;C++)a[vS[C]].cancel(S)},state:i,steps:a}}const El=e=>e,{schedule:Ki,cancel:oh,state:da,steps:gM}=Nie(typeof requestAnimationFrame<"u"?requestAnimationFrame:El,!0),Mie=T.createContext({strict:!1}),CU={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},V0={};for(const e in CU)V0[e]={isEnabled:t=>CU[e].some(n=>!!t[n])};function vqe(e){for(const t in e)V0[t]={...V0[t],...e[t]}}const xqe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mk(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||xqe.has(e)}let jie=e=>!mk(e);function wqe(e){e&&(jie=t=>t.startsWith("on")?!mk(t):e(t))}try{wqe(require("@emotion/is-prop-valid").default)}catch{}function _qe(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(jie(i)||n===!0&&mk(i)||!t&&!mk(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function Sqe(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const pT=T.createContext({});function mT(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function tw(e){return typeof e=="string"||Array.isArray(e)}const f6=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],h6=["initial",...f6];function gT(e){return mT(e.animate)||h6.some(t=>tw(e[t]))}function Pie(e){return!!(gT(e)||e.variants)}function Cqe(e,t){if(gT(e)){const{initial:n,animate:r}=e;return{initial:n===!1||tw(n)?n:void 0,animate:tw(r)?r:void 0}}return e.inherit!==!1?t:{}}function kqe(e){const{initial:t,animate:n}=Cqe(e,T.useContext(pT));return T.useMemo(()=>({initial:t,animate:n}),[kU(t),kU(n)])}function kU(e){return Array.isArray(e)?e.join(" "):e}const Eqe=Symbol.for("motionComponentSymbol");function Lg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Tqe(e,t,n){return T.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Lg(n)&&(n.current=r))},[t])}const p6=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Aqe="framerAppearId",Oie="data-"+p6(Aqe),Die=T.createContext({}),{schedule:m6}=Nie(queueMicrotask,!1);function Rqe(e,t,n,r,i){var b,v;const{visualElement:s}=T.useContext(pT),a=T.useContext(Mie),o=T.useContext(hT),l=T.useContext(d6).reducedMotion,c=T.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=T.useContext(Die);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&Iqe(c.current,n,i,d);const h=T.useRef(!1);T.useInsertionEffect(()=>{u&&h.current&&u.update(n,o)});const m=n[Oie],y=T.useRef(!!m&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,m))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,m)));return Rie(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),m6.render(u.render),y.current&&u.animationState&&u.animationState.animateChanges())}),T.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,m)}),y.current=!1))}),u}function Iqe(e,t,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Fie(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Lg(o),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function Fie(e){if(e)return e.options.allowProjection!==!1?e.projection:Fie(e.parent)}let g6=()=>{};function Nqe({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&vqe(e);function s(o,l){let c;const u={...T.useContext(d6),...o,layoutId:Mqe(o)},{isStatic:d}=u,h=kqe(o),m=r(o,d);if(!d&&u6){jqe();const y=Pqe(u);c=y.MeasureLayout,h.visualElement=Rqe(i,m,u,t,y.ProjectionNode)}return p.jsxs(pT.Provider,{value:h,children:[c&&h.visualElement?p.jsx(c,{visualElement:h.visualElement,...u}):null,n(i,o,Tqe(m,h.visualElement,l),m,d,h.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const a=T.forwardRef(s);return a[Eqe]=i,a}function Mqe({layoutId:e}){const t=T.useContext(l6).id;return t&&e!==void 0?t+"-"+e:e}function jqe(e,t){T.useContext(Mie).strict}function Pqe(e){const{drag:t,layout:n}=V0;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Lie=e=>t=>typeof t=="string"&&t.startsWith(e),y6=Lie("--"),Oqe=Lie("var(--"),b6=e=>Oqe(e)?Dqe.test(e.split("/*")[0].trim()):!1,Dqe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nw={};function Fqe(e){for(const t in e)nw[t]=e[t],y6(t)&&(nw[t].isCSSVariable=!0)}const Ey=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ty=new Set(Ey);function Bie(e,{layout:t,layoutId:n}){return Ty.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!nw[e]||e==="opacity")}const Ea=e=>!!(e&&e.getVelocity),$ie=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Td=(e,t,n)=>n>t?t:n<e?e:n,Ay={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},rw={...Ay,transform:e=>Td(0,1,e)},xS={...Ay,default:1},EU={...Ay,transform:Math.round},d1=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ef=d1("deg"),ru=d1("%"),er=d1("px"),Lqe=d1("vh"),Bqe=d1("vw"),TU={...ru,parse:e=>ru.parse(e)/100,transform:e=>ru.transform(e*100)},$qe={rotate:Ef,rotateX:Ef,rotateY:Ef,rotateZ:Ef,scale:xS,scaleX:xS,scaleY:xS,scaleZ:xS,skew:Ef,skewX:Ef,skewY:Ef,distance:er,translateX:er,translateY:er,translateZ:er,x:er,y:er,z:er,perspective:er,transformPerspective:er,opacity:rw,originX:TU,originY:TU,originZ:er},v6={borderWidth:er,borderTopWidth:er,borderRightWidth:er,borderBottomWidth:er,borderLeftWidth:er,borderRadius:er,radius:er,borderTopLeftRadius:er,borderTopRightRadius:er,borderBottomRightRadius:er,borderBottomLeftRadius:er,width:er,maxWidth:er,height:er,maxHeight:er,top:er,right:er,bottom:er,left:er,padding:er,paddingTop:er,paddingRight:er,paddingBottom:er,paddingLeft:er,margin:er,marginTop:er,marginRight:er,marginBottom:er,marginLeft:er,backgroundPositionX:er,backgroundPositionY:er,...$qe,zIndex:EU,fillOpacity:rw,strokeOpacity:rw,numOctaves:EU},zqe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Uqe=Ey.length;function qqe(e,t,n){let r="",i=!0;for(let s=0;s<Uqe;s++){const a=Ey[s],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=$ie(o,v6[a]);if(!l){i=!1;const u=zqe[a]||a;r+=`${u}(${c}) `}n&&(t[a]=c)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function x6(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const c=t[l];if(Ty.has(l)){a=!0;continue}else if(y6(l)){i[l]=c;continue}else{const u=$ie(c,v6[l]);l.startsWith("origin")?(o=!0,s[l]=u):r[l]=u}}if(t.transform||(a||n?r.transform=qqe(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const w6=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zie(e,t,n){for(const r in t)!Ea(t[r])&&!Bie(r,n)&&(e[r]=t[r])}function Vqe({transformTemplate:e},t){return T.useMemo(()=>{const n=w6();return x6(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Hqe(e,t){const n=e.style||{},r={};return zie(r,n,e),Object.assign(r,Vqe(e,t)),r}function Wqe(e,t){const n={},r=Hqe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Gqe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _6(e){return typeof e!="string"||e.includes("-")?!1:!!(Gqe.indexOf(e)>-1||/[A-Z]/u.test(e))}const Kqe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Yqe={offset:"strokeDashoffset",array:"strokeDasharray"};function Zqe(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?Kqe:Yqe;e[s.offset]=er.transform(-r);const a=er.transform(t),o=er.transform(n);e[s.array]=`${a} ${o}`}function Uie(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,c,u){if(x6(e,o,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&Zqe(d,i,s,a,!1)}const qie=()=>({...w6(),attrs:{}}),Vie=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Xqe(e,t,n,r){const i=T.useMemo(()=>{const s=qie();return Uie(s,t,Vie(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};zie(s,e.style,e),i.style={...s,...i.style}}return i}function Jqe(e=!1){return(n,r,i,{latestValues:s},a)=>{const l=(_6(n)?Xqe:Wqe)(r,s,a,n),c=_qe(r,typeof n=="string",e),u=n!==T.Fragment?{...c,...l,ref:i}:{},{children:d}=r,h=T.useMemo(()=>Ea(d)?d.get():d,[d]);return T.createElement(n,{...u,children:h})}}function AU(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function S6(e,t,n,r){if(typeof t=="function"){const[i,s]=AU(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=AU(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function u2(e){return Ea(e)?e.get():e}function Qqe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:eVe(n,r,i,e),renderState:t()}}const Hie=e=>(t,n)=>{const r=T.useContext(pT),i=T.useContext(hT),s=()=>Qqe(e,t,r,i);return n?s():c6(s)};function eVe(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=u2(s[h]);let{initial:a,animate:o}=e;const l=gT(e),c=Pie(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const d=u?o:a;if(d&&typeof d!="boolean"&&!mT(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const y=S6(e,h[m]);if(y){const{transitionEnd:b,transition:v,...x}=y;for(const _ in x){let S=x[_];if(Array.isArray(S)){const C=u?S.length-1:0;S=S[C]}S!==null&&(i[_]=S)}for(const _ in b)i[_]=b[_]}}}return i}function C6(e,t,n){var s;const{style:r}=e,i={};for(const a in r)(Ea(r[a])||t.style&&Ea(t.style[a])||Bie(a,e)||((s=n==null?void 0:n.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const tVe={useVisualState:Hie({scrapeMotionValuesFromProps:C6,createRenderState:w6})};function Wie(e,t,n){const r=C6(e,t,n);for(const i in e)if(Ea(e[i])||Ea(t[i])){const s=Ey.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const nVe={useVisualState:Hie({scrapeMotionValuesFromProps:Wie,createRenderState:qie})};function rVe(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={..._6(r)?nVe:tVe,preloadedFeatures:e,useRender:Jqe(i),createVisualElement:t,Component:r};return Nqe(a)}}function iw(e,t,n){const r=e.getProps();return S6(r,t,n!==void 0?n:r.custom,e)}const lj=e=>Array.isArray(e);let d2;function iVe(){d2=void 0}const bo={now:()=>(d2===void 0&&bo.set(da.isProcessing||Ed.useManualTiming?da.timestamp:performance.now()),d2),set:e=>{d2=e,queueMicrotask(iVe)}};function k6(e,t){e.indexOf(t)===-1&&e.push(t)}function E6(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class T6{constructor(){this.subscriptions=[]}add(t){return k6(this.subscriptions,t),()=>E6(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Gie(e,t){return t?e*(1e3/t):0}const RU=30,sVe=e=>!isNaN(parseFloat(e));class aVe{constructor(t,n={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var a,o;const s=bo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current)),i&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=bo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=sVe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new T6);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ki.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=bo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>RU)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,RU);return Gie(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t;(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function sw(e,t){return new aVe(e,t)}function oVe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,sw(n))}function lVe(e){return lj(e)?e[e.length-1]||0:e}function cVe(e,t){const n=iw(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=lVe(s[a]);oVe(e,a,o)}}function uVe(e){return!!(Ea(e)&&e.add)}function cj(e,t){const n=e.getValue("willChange");if(uVe(n))return n.add(t);if(!n&&Ed.WillChange){const r=new Ed.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Kie(e){return e.props[Oie]}const dVe=e=>e!==null;function fVe(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(dVe),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const hVe={type:"spring",stiffness:500,damping:25,restSpeed:10},pVe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),mVe={type:"keyframes",duration:.8},gVe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yVe=(e,{keyframes:t})=>t.length>2?mVe:Ty.has(e)?e.startsWith("scale")?pVe(t[1]):hVe:gVe;function bVe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function A6(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const iu=e=>e*1e3,su=e=>e/1e3,Uv=e=>Math.round(e*1e5)/1e5,R6=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function vVe(e){return e==null}const xVe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,I6=(e,t)=>n=>!!(typeof n=="string"&&xVe.test(n)&&n.startsWith(e)||t&&!vVe(n)&&Object.prototype.hasOwnProperty.call(n,t)),Yie=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(R6);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},wVe=e=>Td(0,255,e),yM={...Ay,transform:e=>Math.round(wVe(e))},Cp={test:I6("rgb","red"),parse:Yie("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+yM.transform(e)+", "+yM.transform(t)+", "+yM.transform(n)+", "+Uv(rw.transform(r))+")"};function _Ve(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const uj={test:I6("#"),parse:_Ve,transform:Cp.transform},Bg={test:I6("hsl","hue"),parse:Yie("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ru.transform(Uv(t))+", "+ru.transform(Uv(n))+", "+Uv(rw.transform(r))+")"},Sa={test:e=>Cp.test(e)||uj.test(e)||Bg.test(e),parse:e=>Cp.test(e)?Cp.parse(e):Bg.test(e)?Bg.parse(e):uj.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Cp.transform(e):Bg.transform(e)},SVe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function CVe(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(R6))==null?void 0:t.length)||0)+(((n=e.match(SVe))==null?void 0:n.length)||0)>0}const Zie="number",Xie="color",kVe="var",EVe="var(",IU="${}",TVe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function aw(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(TVe,l=>(Sa.test(l)?(r.color.push(s),i.push(Xie),n.push(Sa.parse(l))):l.startsWith(EVe)?(r.var.push(s),i.push(kVe),n.push(l)):(r.number.push(s),i.push(Zie),n.push(parseFloat(l))),++s,IU)).split(IU);return{values:n,split:o,indexes:r,types:i}}function Jie(e){return aw(e).values}function Qie(e){const{split:t,types:n}=aw(e),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=n[a];o===Zie?s+=Uv(i[a]):o===Xie?s+=Sa.transform(i[a]):s+=i[a]}return s}}const AVe=e=>typeof e=="number"?0:e;function RVe(e){const t=Jie(e);return Qie(e)(t.map(AVe))}const lh={test:CVe,parse:Jie,createTransformer:Qie,getAnimatableNone:RVe};function bM(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function IVe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,a=0;if(!t)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=bM(l,o,e+1/3),s=bM(l,o,e),a=bM(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function gk(e,t){return n=>n>0?t:e}const Wi=(e,t,n)=>e+(t-e)*n,vM=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},NVe=[uj,Cp,Bg],MVe=e=>NVe.find(t=>t.test(e));function NU(e){const t=MVe(e);if(!t)return!1;let n=t.parse(e);return t===Bg&&(n=IVe(n)),n}const MU=(e,t)=>{const n=NU(e),r=NU(t);if(!n||!r)return gk(e,t);const i={...n};return s=>(i.red=vM(n.red,r.red,s),i.green=vM(n.green,r.green,s),i.blue=vM(n.blue,r.blue,s),i.alpha=Wi(n.alpha,r.alpha,s),Cp.transform(i))},dj=new Set(["none","hidden"]);function jVe(e,t){return dj.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}const PVe=(e,t)=>n=>t(e(n)),f1=(...e)=>e.reduce(PVe);function OVe(e,t){return n=>Wi(e,t,n)}function N6(e){return typeof e=="number"?OVe:typeof e=="string"?b6(e)?gk:Sa.test(e)?MU:LVe:Array.isArray(e)?ese:typeof e=="object"?Sa.test(e)?MU:DVe:gk}function ese(e,t){const n=[...e],r=n.length,i=e.map((s,a)=>N6(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function DVe(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=N6(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function FVe(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],a=e.indexes[s][r[s]],o=e.values[a]??0;n[i]=o,r[s]++}return n}const LVe=(e,t)=>{const n=lh.createTransformer(t),r=aw(e),i=aw(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?dj.has(e)&&!i.values.length||dj.has(t)&&!r.values.length?jVe(e,t):f1(ese(FVe(r,i),i.values),n):gk(e,t)};function tse(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Wi(e,t,n):N6(e)(e,t)}const BVe=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ki.update(t,!0),stop:()=>oh(t),now:()=>da.isProcessing?da.timestamp:bo.now()}},nse=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=e(s/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`},yk=2e4;function M6(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<yk;)t+=n,r=e.next(t);return t>=yk?1/0:t}function $Ve(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(M6(r),yk);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:su(i)}}const zVe=5;function rse(e,t,n){const r=Math.max(t-zVe,0);return Gie(n-e(r),t-r)}const Ji={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jU=.001;function UVe({duration:e=Ji.duration,bounce:t=Ji.bounce,velocity:n=Ji.velocity,mass:r=Ji.mass}){let i,s,a=1-t;a=Td(Ji.minDamping,Ji.maxDamping,a),e=Td(Ji.minDuration,Ji.maxDuration,su(e)),a<1?(i=c=>{const u=c*a,d=u*e,h=u-n,m=fj(c,a),y=Math.exp(-d);return jU-h/m*y},s=c=>{const d=c*a*e,h=d*n+n,m=Math.pow(a,2)*Math.pow(c,2)*e,y=Math.exp(-d),b=fj(Math.pow(c,2),a);return(-i(c)+jU>0?-1:1)*((h-m)*y)/b}):(i=c=>{const u=Math.exp(-c*e),d=(c-n)*e+1;return-.001+u*d},s=c=>{const u=Math.exp(-c*e),d=(n-c)*(e*e);return u*d});const o=5/e,l=VVe(i,s,o);if(e=iu(e),isNaN(l))return{stiffness:Ji.stiffness,damping:Ji.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:e}}}const qVe=12;function VVe(e,t,n){let r=n;for(let i=1;i<qVe;i++)r=r-e(r)/t(r);return r}function fj(e,t){return e*Math.sqrt(1-t*t)}const HVe=["duration","bounce"],WVe=["stiffness","damping","mass"];function PU(e,t){return t.some(n=>e[n]!==void 0)}function GVe(e){let t={velocity:Ji.velocity,stiffness:Ji.stiffness,damping:Ji.damping,mass:Ji.mass,isResolvedFromDuration:!1,...e};if(!PU(e,WVe)&&PU(e,HVe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Td(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Ji.mass,stiffness:i,damping:s}}else{const n=UVe(e);t={...t,...n,mass:Ji.mass},t.isResolvedFromDuration=!0}return t}function bk(e=Ji.visualDuration,t=Ji.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:m}=GVe({...n,velocity:-su(n.velocity||0)}),y=h||0,b=c/(2*Math.sqrt(l*u)),v=a-s,x=su(Math.sqrt(l/u)),_=Math.abs(v)<5;r||(r=_?Ji.restSpeed.granular:Ji.restSpeed.default),i||(i=_?Ji.restDelta.granular:Ji.restDelta.default);let S;if(b<1){const E=fj(x,b);S=A=>{const R=Math.exp(-b*x*A);return a-R*((y+b*x*v)/E*Math.sin(E*A)+v*Math.cos(E*A))}}else if(b===1)S=E=>a-Math.exp(-x*E)*(v+(y+x*v)*E);else{const E=x*Math.sqrt(b*b-1);S=A=>{const R=Math.exp(-b*x*A),N=Math.min(E*A,300);return a-R*((y+b*x*v)*Math.sinh(N)+E*v*Math.cosh(N))/E}}const C={calculatedDuration:m&&d||null,next:E=>{const A=S(E);if(m)o.done=E>=d;else{let R=E===0?y:0;b<1&&(R=E===0?iu(y):rse(S,E,A));const N=Math.abs(R)<=r,M=Math.abs(a-A)<=i;o.done=N&&M}return o.value=o.done?a:A,o},toString:()=>{const E=Math.min(M6(C),yk),A=nse(R=>C.next(E*R).value,E,30);return E+"ms "+A},toTransition:()=>{}};return C}bk.applyToOptions=e=>{const t=$Ve(e,100,bk);return e.ease=t.ease,e.duration=iu(t.duration),e.type="keyframes",e};function hj({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],h={done:!1,value:d},m=N=>o!==void 0&&N<o||l!==void 0&&N>l,y=N=>o===void 0?l:l===void 0||Math.abs(o-N)<Math.abs(l-N)?o:l;let b=n*t;const v=d+b,x=a===void 0?v:a(v);x!==v&&(b=x-d);const _=N=>-b*Math.exp(-N/r),S=N=>x+_(N),C=N=>{const M=_(N),P=S(N);h.done=Math.abs(M)<=c,h.value=h.done?x:P};let E,A;const R=N=>{m(h.value)&&(E=N,A=bk({keyframes:[h.value,y(h.value)],velocity:rse(S,N,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return R(0),{calculatedDuration:null,next:N=>{let M=!1;return!A&&E===void 0&&(M=!0,C(N),R(N)),E!==void 0&&N>=E?A.next(N-E):(!M&&C(N),h)}}}const ow=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};function KVe(e,t,n){const r=[],i=n||Ed.mix||tse,s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||El:t;o=f1(l,o)}r.push(o)}return r}function YVe(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(g6(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=KVe(t,r,i),l=o.length,c=u=>{if(a&&u<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=ow(e[d],e[d+1],u);return o[d](h)};return n?u=>c(Td(e[0],e[s-1],u)):c}function ZVe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=ow(0,t,r);e.push(Wi(n,1,i))}}function XVe(e){const t=[0];return ZVe(t,e.length-1),t}function JVe(e,t){return e.map(n=>n*t)}const ise=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,QVe=1e-7,eHe=12;function tHe(e,t,n,r,i){let s,a,o=0;do a=t+(n-t)/2,s=ise(a,r,i)-e,s>0?n=a:t=a;while(Math.abs(s)>QVe&&++o<eHe);return a}function h1(e,t,n,r){if(e===t&&n===r)return El;const i=s=>tHe(s,0,1,e,n);return s=>s===0||s===1?s:ise(i(s),t,r)}const nHe=h1(.42,0,1,1),rHe=h1(0,0,.58,1),sse=h1(.42,0,.58,1),iHe=e=>Array.isArray(e)&&typeof e[0]!="number",ase=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ose=e=>t=>1-e(1-t),lse=h1(.33,1.53,.69,.99),j6=ose(lse),cse=ase(j6),use=e=>(e*=2)<1?.5*j6(e):.5*(2-Math.pow(2,-10*(e-1))),P6=e=>1-Math.sin(Math.acos(e)),dse=ose(P6),fse=ase(P6),hse=e=>Array.isArray(e)&&typeof e[0]=="number",sHe={linear:El,easeIn:nHe,easeInOut:sse,easeOut:rHe,circIn:P6,circInOut:fse,circOut:dse,backIn:j6,backInOut:cse,backOut:lse,anticipate:use},aHe=e=>typeof e=="string",OU=e=>{if(hse(e)){g6(e.length===4);const[t,n,r,i]=e;return h1(t,n,r,i)}else if(aHe(e))return sHe[e];return e};function oHe(e,t){return e.map(()=>t||sse).splice(0,e.length-1)}function qv({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=iHe(r)?r.map(OU):OU(r),s={done:!1,value:t[0]},a=JVe(n&&n.length===t.length?n:XVe(t),e),o=YVe(a,t,{ease:Array.isArray(i)?i:oHe(t,i)});return{calculatedDuration:e,next:l=>(s.value=o(l),s.done=l>=e,s)}}const lHe=e=>e!==null;function O6(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(lHe),o=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const cHe={decay:hj,inertia:hj,tween:qv,keyframes:qv,spring:bk};function pse(e){typeof e.type=="string"&&(e.type=cHe[e.type])}class D6{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const uHe=e=>e/100;class mse extends D6{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;if(n&&n.updatedAt!==bo.now()&&this.tick(bo.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:r}=this.options;r&&r()},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;pse(t);const{type:n=qv,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=t;let{keyframes:o}=t;const l=n||qv;l!==qv&&typeof o[0]!="number"&&(this.mixKeyframes=f1(uHe,tse(o[0],o[1])),o=[0,100]);const c=l({...t,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=M6(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:m,type:y,onUpdate:b,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?x<0:x>i;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let S=this.currentTime,C=r;if(d){const N=Math.min(this.currentTime,i)/o;let M=Math.floor(N),P=N%1;!P&&N>=1&&(P=1),P===1&&M--,M=Math.min(M,d+1),!!(M%2)&&(h==="reverse"?(P=1-P,m&&(P-=m/o)):h==="mirror"&&(C=a)),S=Td(0,1,P)*o}const E=_?{done:!1,value:u[0]}:C.next(S);s&&(E.value=s(E.value));let{done:A}=E;!_&&l!==null&&(A=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return R&&y!==hj&&(E.value=O6(u,this.options,v,this.speed)),b&&b(E.value),R&&this.finish(),E}then(t,n){return this.finished.then(t,n)}get duration(){return su(this.calculatedDuration)}get time(){return su(this.currentTime)}set time(t){t=iu(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(bo.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=su(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=BVe,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=r??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),t.observe(this)}}function dHe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const kp=e=>e*180/Math.PI,pj=e=>{const t=kp(Math.atan2(e[1],e[0]));return mj(t)},fHe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:pj,rotateZ:pj,skewX:e=>kp(Math.atan(e[1])),skewY:e=>kp(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},mj=e=>(e=e%360,e<0&&(e+=360),e),DU=pj,FU=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),LU=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),hHe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:FU,scaleY:LU,scale:e=>(FU(e)+LU(e))/2,rotateX:e=>mj(kp(Math.atan2(e[6],e[5]))),rotateY:e=>mj(kp(Math.atan2(-e[2],e[0]))),rotateZ:DU,rotate:DU,skewX:e=>kp(Math.atan(e[4])),skewY:e=>kp(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function BU(e){return e.includes("scale")?1:0}function gj(e,t){if(!e||e==="none")return BU(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=hHe,i=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=fHe,i=o}if(!i)return BU(t);const s=r[t],a=i[1].split(",").map(mHe);return typeof s=="function"?s(a):a[s]}const pHe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return gj(n,t)};function mHe(e){return parseFloat(e.trim())}const $U=e=>e===Ay||e===er,gHe=new Set(["x","y","z"]),yHe=Ey.filter(e=>!gHe.has(e));function bHe(e){const t=[];return yHe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Rp={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>gj(t,"x"),y:(e,{transform:t})=>gj(t,"y")};Rp.translateX=Rp.x;Rp.translateY=Rp.y;const Ip=new Set;let yj=!1,bj=!1,vj=!1;function gse(){if(bj){const e=Array.from(Ip).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=bHe(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}bj=!1,yj=!1,Ip.forEach(e=>e.complete(vj)),Ip.clear()}function yse(){Ip.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(bj=!0)})}function vHe(){vj=!0,yse(),gse(),vj=!1}class F6{constructor(t,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ip.add(this),yj||(yj=!0,Ki.read(yse),Ki.resolveKeyframes(gse))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const o=r.readValue(n,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),i&&s===void 0&&i.set(t[0])}dHe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ip.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ip.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const xHe=e=>e.startsWith("--");function wHe(e,t,n){xHe(t)?e.style.setProperty(t,n):e.style[t]=n}function L6(e){let t;return()=>(t===void 0&&(t=e()),t)}const _He=L6(()=>window.ScrollTimeline!==void 0),SHe={};function CHe(e,t){const n=L6(e);return()=>SHe[t]??n()}const bse=CHe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Cv=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,zU={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cv([0,.65,.55,1]),circOut:Cv([.55,0,1,.45]),backIn:Cv([.31,.01,.66,-.59]),backOut:Cv([.33,1.53,.69,.99])};function vse(e,t){if(e)return typeof e=="function"?bse()?nse(e,t):"ease-out":hse(e)?Cv(e):Array.isArray(e)?e.map(n=>vse(n,t)||zU.easeOut):zU[e]}function kHe(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[t]:n};l&&(u.offset=l);const d=vse(o,i);Array.isArray(d)&&(u.easing=d);const h={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),e.animate(u,h)}function xse(e){return typeof e=="function"&&"applyToOptions"in e}function EHe({type:e,...t}){return xse(e)&&bse()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class THe extends D6{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=t,g6(typeof t.type!="string");const c=EHe(t);this.animation=kHe(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=O6(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):wHe(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return su(Number(t))}get time(){return su(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=iu(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&_He()?(this.animation.timeline=t,El):n(this)}}const wse={anticipate:use,backInOut:cse,circInOut:fse};function AHe(e){return e in wse}function RHe(e){typeof e.ease=="string"&&AHe(e.ease)&&(e.ease=wse[e.ease])}const UU=10;class IHe extends THe{constructor(t){RHe(t),pse(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new mse({...a,autoplay:!1}),l=iu(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-UU).value,o.sample(l).value,UU),o.stop()}}const qU=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(lh.test(e)||e==="0")&&!e.startsWith("url("));function NHe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function MHe(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],a=qU(i,t),o=qU(s,t);return!a||!o?!1:NHe(e)||(n==="spring"||xse(n))&&r}const jHe=new Set(["opacity","clipPath","filter","transform"]),PHe=L6(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function OHe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return PHe()&&n&&jHe.has(n)&&(n!=="transform"||!l)&&!o&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const DHe=40;class FHe extends D6{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:u,...d}){var y;super(),this.stop=()=>{var b,v;this._animation?(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)):(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=bo.now();const h={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:c,element:u,...d},m=(u==null?void 0:u.KeyframeResolver)||F6;this.keyframeResolver=new m(o,(b,v,x)=>this.onKeyframesResolved(b,v,h,!x),l,c,u),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=bo.now(),MHe(t,s,a,o)||((Ed.instantAnimations||!l)&&(u==null||u(O6(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>DHe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!c&&OHe(h)?new IHe({...h,element:h.motionValue.owner.current}):new mse(h);m.finished.then(()=>this.notifyFinished()).catch(El),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||vHe(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const B6=(e,t,n,r={},i,s)=>a=>{const o=A6(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-iu(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};bVe(o)||Object.assign(u,yVe(e,u)),u.duration&&(u.duration=iu(u.duration)),u.repeatDelay&&(u.repeatDelay=iu(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),(Ed.instantAnimations||Ed.skipAnimations)&&(d=!0,u.duration=0,u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!s&&t.get()!==void 0){const h=fVe(u.keyframes,o);if(h!==void 0){Ki.update(()=>{u.onUpdate(h),u.onComplete()});return}}return new FHe(u)},_se=new Set(["width","height","top","left","right","bottom",...Ey]);function LHe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Sse(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const l=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const u in o){const d=e.getValue(u,e.latestValues[u]??null),h=o[u];if(h===void 0||c&&LHe(c,u))continue;const m={delay:n,...A6(s||{},u)},y=d.get();if(y!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===y&&!m.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const x=Kie(e);if(x){const _=window.MotionHandoffAnimation(x,u,Ki);_!==null&&(m.startTime=_,b=!0)}}cj(e,u),d.start(B6(u,d,h,e.shouldReduceMotion&&_se.has(u)?{type:!1}:m,e,b));const v=d.animation;v&&l.push(v)}return a&&Promise.all(l).then(()=>{Ki.update(()=>{a&&cVe(e,a)})}),l}function xj(e,t,n={}){var l;const r=iw(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Sse(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return BHe(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[s,a]:[a,s];return c().then(()=>u())}else return Promise.all([s(),a(n.delay)])}function BHe(e,t,n=0,r=0,i=1,s){const a=[],o=(e.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(e.variantChildren).sort($He).forEach((c,u)=>{c.notify("AnimationStart",t),a.push(xj(c,t,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function $He(e,t){return e.sortNodePosition(t)}function zHe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>xj(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=xj(e,t,n);else{const i=typeof t=="function"?iw(e,t,n.custom):t;r=Promise.all(Sse(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Cse(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const UHe=h6.length;function kse(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?kse(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<UHe;n++){const r=h6[n],i=e.props[r];(tw(i)||i===!1)&&(t[r]=i)}return t}const qHe=[...f6].reverse(),VHe=f6.length;function HHe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>zHe(e,n,r)))}function WHe(e){let t=HHe(e),n=VU(),r=!0;const i=l=>(c,u)=>{var h;const d=iw(e,u,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:m,transitionEnd:y,...b}=d;c={...c,...b,...y}}return c};function s(l){t=l(e)}function a(l){const{props:c}=e,u=kse(e.parent)||{},d=[],h=new Set;let m={},y=1/0;for(let v=0;v<VHe;v++){const x=qHe[v],_=n[x],S=c[x]!==void 0?c[x]:u[x],C=tw(S),E=x===l?_.isActive:null;E===!1&&(y=v);let A=S===u[x]&&S!==c[x]&&C;if(A&&r&&e.manuallyAnimateOnMount&&(A=!1),_.protectedKeys={...m},!_.isActive&&E===null||!S&&!_.prevProp||mT(S)||typeof S=="boolean")continue;const R=GHe(_.prevProp,S);let N=R||x===l&&_.isActive&&!A&&C||v>y&&C,M=!1;const P=Array.isArray(S)?S:[S];let L=P.reduce(i(x),{});E===!1&&(L={});const{prevResolvedValues:O={}}=_,V={...O,...L},F=G=>{N=!0,h.has(G)&&(M=!0,h.delete(G)),_.needsAnimating[G]=!0;const $=e.getValue(G);$&&($.liveStyle=!1)};for(const G in V){const $=L[G],ne=O[G];if(m.hasOwnProperty(G))continue;let H=!1;lj($)&&lj(ne)?H=!Cse($,ne):H=$!==ne,H?$!=null?F(G):h.add(G):$!==void 0&&h.has(G)?F(G):_.protectedKeys[G]=!0}_.prevProp=S,_.prevResolvedValues=L,_.isActive&&(m={...m,...L}),r&&e.blockInitialAnimation&&(N=!1),N&&(!(A&&R)||M)&&d.push(...P.map(G=>({animation:G,options:{type:x}})))}if(h.size){const v={};if(typeof c.initial!="boolean"){const x=iw(e,Array.isArray(c.initial)?c.initial[0]:c.initial);x&&x.transition&&(v.transition=x.transition)}h.forEach(x=>{const _=e.getBaseTarget(x),S=e.getValue(x);S&&(S.liveStyle=!0),v[x]=_??null}),d.push({animation:v})}let b=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(d):Promise.resolve()}function o(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(h=>{var m;return(m=h.animationState)==null?void 0:m.setActive(l,c)}),n[l].isActive=c;const u=a(l);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=VU(),r=!0}}}function GHe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Cse(t,e):!1}function ap(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VU(){return{animate:ap(!0),whileInView:ap(),whileHover:ap(),whileTap:ap(),whileDrag:ap(),whileFocus:ap(),exit:ap()}}class Eh{constructor(t){this.isMounted=!1,this.node=t}update(){}}class KHe extends Eh{constructor(t){super(t),t.animationState||(t.animationState=WHe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();mT(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let YHe=0;class ZHe extends Eh{constructor(){super(...arguments),this.id=YHe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const XHe={animation:{Feature:KHe},exit:{Feature:ZHe}};function lw(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const $6=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function p1(e){return{point:{x:e.pageX,y:e.pageY}}}const JHe=e=>t=>$6(t)&&e(t,p1(t));function Vv(e,t,n,r){return lw(e,t,JHe(n),r)}function Ese({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function QHe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function eWe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Tse=1e-4,tWe=1-Tse,nWe=1+Tse,Ase=.01,rWe=0-Ase,iWe=0+Ase;function Ha(e){return e.max-e.min}function sWe(e,t,n){return Math.abs(e-t)<=n}function HU(e,t,n,r=.5){e.origin=r,e.originPoint=Wi(t.min,t.max,e.origin),e.scale=Ha(n)/Ha(t),e.translate=Wi(n.min,n.max,e.origin)-e.originPoint,(e.scale>=tWe&&e.scale<=nWe||isNaN(e.scale))&&(e.scale=1),(e.translate>=rWe&&e.translate<=iWe||isNaN(e.translate))&&(e.translate=0)}function Hv(e,t,n,r){HU(e.x,t.x,n.x,r?r.originX:void 0),HU(e.y,t.y,n.y,r?r.originY:void 0)}function WU(e,t,n){e.min=n.min+t.min,e.max=e.min+Ha(t)}function aWe(e,t,n){WU(e.x,t.x,n.x),WU(e.y,t.y,n.y)}function GU(e,t,n){e.min=t.min-n.min,e.max=e.min+Ha(t)}function Wv(e,t,n){GU(e.x,t.x,n.x),GU(e.y,t.y,n.y)}const KU=()=>({translate:0,scale:1,origin:0,originPoint:0}),$g=()=>({x:KU(),y:KU()}),YU=()=>({min:0,max:0}),ss=()=>({x:YU(),y:YU()});function yl(e){return[e("x"),e("y")]}function xM(e){return e===void 0||e===1}function wj({scale:e,scaleX:t,scaleY:n}){return!xM(e)||!xM(t)||!xM(n)}function dp(e){return wj(e)||Rse(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Rse(e){return ZU(e.x)||ZU(e.y)}function ZU(e){return e&&e!=="0%"}function vk(e,t,n){const r=e-n,i=t*r;return n+i}function XU(e,t,n,r,i){return i!==void 0&&(e=vk(e,i,r)),vk(e,n,r)+t}function _j(e,t=0,n=1,r,i){e.min=XU(e.min,t,n,r,i),e.max=XU(e.max,t,n,r,i)}function Ise(e,{x:t,y:n}){_j(e.x,t.translate,t.scale,t.originPoint),_j(e.y,n.translate,n.scale,n.originPoint)}const JU=.999999999999,QU=1.0000000000001;function oWe(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ug(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Ise(e,a)),r&&dp(s.latestValues)&&Ug(e,s.latestValues))}t.x<QU&&t.x>JU&&(t.x=1),t.y<QU&&t.y>JU&&(t.y=1)}function zg(e,t){e.min=e.min+t,e.max=e.max+t}function eq(e,t,n,r,i=.5){const s=Wi(e.min,e.max,i);_j(e,t,n,s,r)}function Ug(e,t){eq(e.x,t.x,t.scaleX,t.scale,t.originX),eq(e.y,t.y,t.scaleY,t.scale,t.originY)}function Nse(e,t){return Ese(eWe(e.getBoundingClientRect(),t))}function lWe(e,t,n){const r=Nse(e,n),{scroll:i}=t;return i&&(zg(r.x,i.offset.x),zg(r.y,i.offset.y)),r}const Mse=({current:e})=>e?e.ownerDocument.defaultView:null,tq=(e,t)=>Math.abs(e-t);function cWe(e,t){const n=tq(e.x,t.x),r=tq(e.y,t.y);return Math.sqrt(n**2+r**2)}class jse{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=_M(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=cWe(d.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:y}=d,{timestamp:b}=da;this.history.push({...y,timestamp:b});const{onStart:v,onMove:x}=this.handlers;h||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=wM(h,this.transformPagePoint),Ki.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=_M(d.type==="pointercancel"?this.lastMoveEventInfo:wM(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,v),y&&y(d,v)},!$6(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=p1(t),o=wM(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=da;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(t,_M(o,this.history)),this.removeListeners=f1(Vv(this.contextWindow,"pointermove",this.handlePointerMove),Vv(this.contextWindow,"pointerup",this.handlePointerUp),Vv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),oh(this.updatePoint)}}function wM(e,t){return t?{point:t(e.point)}:e}function nq(e,t){return{x:e.x-t.x,y:e.y-t.y}}function _M({point:e},t){return{point:e,delta:nq(e,Pse(t)),offset:nq(e,uWe(t)),velocity:dWe(t,.1)}}function uWe(e){return e[0]}function Pse(e){return e[e.length-1]}function dWe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Pse(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>iu(t)));)n--;if(!r)return{x:0,y:0};const s=su(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function fWe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Wi(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Wi(n,e,r.max):Math.min(e,n)),e}function rq(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function hWe(e,{top:t,left:n,bottom:r,right:i}){return{x:rq(e.x,n,i),y:rq(e.y,t,r)}}function iq(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function pWe(e,t){return{x:iq(e.x,t.x),y:iq(e.y,t.y)}}function mWe(e,t){let n=.5;const r=Ha(e),i=Ha(t);return i>r?n=ow(t.min,t.max-r,e.min):r>i&&(n=ow(e.min,e.max-i,t.min)),Td(0,1,n)}function gWe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Sj=.35;function yWe(e=Sj){return e===!1?e=0:e===!0&&(e=Sj),{x:sq(e,"left","right"),y:sq(e,"top","bottom")}}function sq(e,t,n){return{min:aq(e,t),max:aq(e,n)}}function aq(e,t){return typeof e=="number"?e:e[t]||0}const Zl={x:!1,y:!1};function Ose(){return Zl.x||Zl.y}function bWe(e){return e==="x"||e==="y"?Zl[e]?null:(Zl[e]=!0,()=>{Zl[e]=!1}):Zl.x||Zl.y?null:(Zl.x=Zl.y=!0,()=>{Zl.x=Zl.y=!1})}const vWe=new WeakMap;class xWe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ss(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(p1(u).point)},s=(u,d)=>{const{drag:h,dragPropagation:m,onDragStart:y}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=bWe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yl(v=>{let x=this.getAxisMotionValue(v).get()||0;if(ru.test(x)){const{projection:_}=this.visualElement;if(_&&_.layout){const S=_.layout.layoutBox[v];S&&(x=Ha(S)*(parseFloat(x)/100))}}this.originPoint[v]=x}),y&&Ki.postRender(()=>y(u,d)),cj(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(u,d)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:y,onDrag:b}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=d;if(m&&this.currentDirection===null){this.currentDirection=wWe(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),b&&b(u,d)},o=(u,d)=>this.stop(u,d),l=()=>yl(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)==null?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new jse(t,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Mse(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ki.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!wS(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=fWe(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&Lg(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=hWe(r.layoutBox,t):this.constraints=!1,this.elastic=yWe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&yl(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=gWe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Lg(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=lWe(r,i.root,this.visualElement.getTransformPagePoint());let a=pWe(i.layout.layoutBox,s);if(n){const o=n(QHe(a));this.hasMutatedConstraints=!!o,o&&(a=Ese(o))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=yl(u=>{if(!wS(u,n,this.currentDirection))return;let d=l&&l[u]||{};a&&(d={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?t[u]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return cj(this.visualElement,t),r.start(B6(t,r,0,n,this.visualElement,!1))}stopAnimation(){yl(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){yl(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){yl(n=>{const{drag:r}=this.getProps();if(!wS(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(t[n]-Wi(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Lg(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};yl(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=mWe({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),yl(a=>{if(!wS(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(Wi(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;vWe.set(this.visualElement,this);const t=this.visualElement.current,n=Vv(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Lg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ki.read(r);const a=lw(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(yl(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=Sj,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function wS(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function wWe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class _We extends Eh{constructor(t){super(t),this.removeGroupControls=El,this.removeListeners=El,this.controls=new xWe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||El}unmount(){this.removeGroupControls(),this.removeListeners()}}const oq=e=>(t,n)=>{e&&Ki.postRender(()=>e(t,n))};class SWe extends Eh{constructor(){super(...arguments),this.removePointerDownListener=El}onPointerDown(t){this.session=new jse(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Mse(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:oq(t),onStart:oq(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Ki.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Vv(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const f2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lq(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const hv={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(er.test(e))e=parseFloat(e);else return e;const n=lq(e,t.target.x),r=lq(e,t.target.y);return`${n}% ${r}%`}},CWe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=lh.parse(e);if(i.length>5)return r;const s=lh.createTransformer(e),a=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const c=Wi(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};class kWe extends T.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;Fqe(EWe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),f2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||Ki.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),m6.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Dse(e){const[t,n]=Iie(),r=T.useContext(l6);return p.jsx(kWe,{...e,layoutGroup:r,switchLayoutGroup:T.useContext(Die),isPresent:t,safeToRemove:n})}const EWe={borderRadius:{...hv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hv,borderTopRightRadius:hv,borderBottomLeftRadius:hv,borderBottomRightRadius:hv,boxShadow:CWe};function TWe(e,t,n){const r=Ea(e)?e:sw(e);return r.start(B6("",r,t,n)),r.animation}function AWe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const RWe=(e,t)=>e.depth-t.depth;class IWe{constructor(){this.children=[],this.isDirty=!1}add(t){k6(this.children,t),this.isDirty=!0}remove(t){E6(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(RWe),this.isDirty=!1,this.children.forEach(t)}}function NWe(e,t){const n=bo.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(oh(r),e(s-t))};return Ki.setup(r,!0),()=>oh(r)}const Fse=["TopLeft","TopRight","BottomLeft","BottomRight"],MWe=Fse.length,cq=e=>typeof e=="string"?parseFloat(e):e,uq=e=>typeof e=="number"||er.test(e);function jWe(e,t,n,r,i,s){i?(e.opacity=Wi(0,n.opacity??1,PWe(r)),e.opacityExit=Wi(t.opacity??1,0,OWe(r))):s&&(e.opacity=Wi(t.opacity??1,n.opacity??1,r));for(let a=0;a<MWe;a++){const o=`border${Fse[a]}Radius`;let l=dq(t,o),c=dq(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||uq(l)===uq(c)?(e[o]=Math.max(Wi(cq(l),cq(c),r),0),(ru.test(c)||ru.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||n.rotate)&&(e.rotate=Wi(t.rotate||0,n.rotate||0,r))}function dq(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const PWe=Lse(0,.5,dse),OWe=Lse(.5,.95,El);function Lse(e,t,n){return r=>r<e?0:r>t?1:n(ow(e,t,r))}function fq(e,t){e.min=t.min,e.max=t.max}function ml(e,t){fq(e.x,t.x),fq(e.y,t.y)}function hq(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function pq(e,t,n,r,i){return e-=t,e=vk(e,1/n,r),i!==void 0&&(e=vk(e,1/i,r)),e}function DWe(e,t=0,n=1,r=.5,i,s=e,a=e){if(ru.test(t)&&(t=parseFloat(t),t=Wi(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=Wi(s.min,s.max,r);e===s&&(o-=t),e.min=pq(e.min,t,n,o,i),e.max=pq(e.max,t,n,o,i)}function mq(e,t,[n,r,i],s,a){DWe(e,t[n],t[r],t[i],t.scale,s,a)}const FWe=["x","scaleX","originX"],LWe=["y","scaleY","originY"];function gq(e,t,n,r){mq(e.x,t,FWe,n?n.x:void 0,r?r.x:void 0),mq(e.y,t,LWe,n?n.y:void 0,r?r.y:void 0)}function yq(e){return e.translate===0&&e.scale===1}function Bse(e){return yq(e.x)&&yq(e.y)}function bq(e,t){return e.min===t.min&&e.max===t.max}function BWe(e,t){return bq(e.x,t.x)&&bq(e.y,t.y)}function vq(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function $se(e,t){return vq(e.x,t.x)&&vq(e.y,t.y)}function xq(e){return Ha(e.x)/Ha(e.y)}function wq(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class $We{constructor(){this.members=[]}add(t){k6(this.members,t),t.scheduleRender()}remove(t){if(E6(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function zWe(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:m,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const SM=["","X","Y","Z"],UWe={visibility:"hidden"},_q=1e3;let qWe=0;function CM(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function zse(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Kie(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ki,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&zse(r)}function Use({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=qWe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(WWe),this.nodes.forEach(XWe),this.nodes.forEach(JWe),this.nodes.forEach(GWe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new IWe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new T6),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=AWe(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let u;const d=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=NWe(d,250),f2.hasAnimatedSinceResize&&(f2.hasAnimatedSinceResize=!1,this.nodes.forEach(Cq))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||rGe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=c.getProps(),x=!this.targetLayout||!$se(this.targetLayout,m),_=!d&&h;if(this.options.layoutRoot||this.resumeFrom||_||d&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,_);const S={...A6(y,"layout"),onPlay:b,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else d||Cq(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),oh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(QWe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zse(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Sq);return}this.isUpdating||this.nodes.forEach(YWe),this.isUpdating=!1,this.nodes.forEach(ZWe),this.nodes.forEach(VWe),this.nodes.forEach(HWe),this.clearAllSnapshots();const o=bo.now();da.delta=Td(0,1e3/60,o-da.timestamp),da.timestamp=o,da.isProcessing=!0,gM.update.process(da),gM.preRender.process(da),gM.render.process(da),da.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,m6.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KWe),this.sharedNodes.forEach(eGe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ki.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ki.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ha(this.snapshot.measuredBox.x)&&!Ha(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ss(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Bse(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||dp(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),iGe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return ss();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(sGe))){const{scroll:u}=this.root;u&&(zg(o.x,u.offset.x),zg(o.y,u.offset.y))}return o}removeElementScroll(a){var l;const o=ss();if(ml(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&ml(o,a),zg(o.x,d.offset.x),zg(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=ss();ml(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ug(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),dp(u.latestValues)&&Ug(l,u.latestValues)}return dp(this.latestValues)&&Ug(l,this.latestValues),l}removeTransform(a){const o=ss();ml(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!dp(c.latestValues))continue;wj(c.latestValues)&&c.updateSnapshot();const u=ss(),d=c.measurePageBox();ml(u,d),gq(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return dp(this.latestValues)&&gq(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==da.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=da.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ss(),this.relativeTargetOrigin=ss(),Wv(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ml(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ss(),this.targetWithTransforms=ss()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aWe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ml(this.target,this.layout.layoutBox),Ise(this.target,this.targetDelta)):ml(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ss(),this.relativeTargetOrigin=ss(),Wv(this.relativeTargetOrigin,this.target,m.target),ml(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||wj(this.parent.latestValues)||Rse(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===da.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;ml(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;oWe(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ss());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hq(this.prevProjectionDelta.x,this.projectionDelta.x),hq(this.prevProjectionDelta.y,this.projectionDelta.y)),Hv(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!wq(this.projectionDelta.x,this.prevProjectionDelta.x)||!wq(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$g(),this.projectionDelta=$g(),this.projectionDeltaWithTransform=$g()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=$g();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=ss(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,b=m!==y,v=this.getStack(),x=!v||v.members.length<=1,_=!!(b&&!x&&this.options.crossfade===!0&&!this.path.some(nGe));this.animationProgress=0;let S;this.mixTargetDelta=C=>{const E=C/1e3;kq(d.x,a.x,E),kq(d.y,a.y,E),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wv(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tGe(this.relativeTarget,this.relativeTargetOrigin,h,E),S&&BWe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ss()),ml(S,this.relativeTarget)),b&&(this.animationValues=u,jWe(u,c,this.latestValues,E,_,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(oh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ki.update(()=>{f2.hasAnimatedSinceResize=!0,this.currentAnimation=TWe(0,_q,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_q),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&qse(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ss();const d=Ha(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=Ha(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}ml(o,l),Ug(o,u),Hv(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new $We),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&CM("z",a,c,this.animationValues);for(let u=0;u<SM.length;u++)CM(`rotate${SM[u]}`,a,c,this.animationValues),CM(`skew${SM[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return UWe;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=u2(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=u2(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!dp(this.latestValues)&&(m.transform=l?l({},""):"none",this.hasProjected=!1),m}const u=c.animationValues||c.latestValues;this.applyTransformsToTarget(),o.transform=zWe(this.projectionDeltaWithTransform,this.treeScale,u),l&&(o.transform=l(u,o.transform));const{x:d,y:h}=this.projectionDelta;o.transformOrigin=`${d.origin*100}% ${h.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in nw){if(u[m]===void 0)continue;const{correct:y,applyTo:b,isCSSVariable:v}=nw[m],x=o.transform==="none"?u[m]:y(u[m],c);if(b){const _=b.length;for(let S=0;S<_;S++)o[b[S]]=x}else v?this.options.visualElement.renderState.vars[m]=x:o[m]=x}return this.options.layoutId&&(o.pointerEvents=c===this?u2(a==null?void 0:a.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(Sq),this.root.sharedNodes.clear()}}}function VWe(e){e.updateLayout()}function HWe(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?yl(d=>{const h=a?t.measuredBox[d]:t.layoutBox[d],m=Ha(h);h.min=r[d].min,h.max=h.min+m}):qse(s,t.layoutBox,r)&&yl(d=>{const h=a?t.measuredBox[d]:t.layoutBox[d],m=Ha(r[d]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const o=$g();Hv(o,r,t.layoutBox);const l=$g();a?Hv(l,e.applyTransform(i,!0),t.measuredBox):Hv(l,r,t.layoutBox);const c=!Bse(o);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const y=ss();Wv(y,t.layoutBox,h.layoutBox);const b=ss();Wv(b,r,m.layoutBox),$se(y,b)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=y,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function WWe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function GWe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function KWe(e){e.clearSnapshot()}function Sq(e){e.clearMeasurements()}function YWe(e){e.isLayoutDirty=!1}function ZWe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Cq(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function XWe(e){e.resolveTargetDelta()}function JWe(e){e.calcProjection()}function QWe(e){e.resetSkewAndRotation()}function eGe(e){e.removeLeadSnapshot()}function kq(e,t,n){e.translate=Wi(t.translate,0,n),e.scale=Wi(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Eq(e,t,n,r){e.min=Wi(t.min,n.min,r),e.max=Wi(t.max,n.max,r)}function tGe(e,t,n,r){Eq(e.x,t.x,n.x,r),Eq(e.y,t.y,n.y,r)}function nGe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const rGe={duration:.45,ease:[.4,0,.1,1]},Tq=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Aq=Tq("applewebkit/")&&!Tq("chrome/")?Math.round:El;function Rq(e){e.min=Aq(e.min),e.max=Aq(e.max)}function iGe(e){Rq(e.x),Rq(e.y)}function qse(e,t,n){return e==="position"||e==="preserve-aspect"&&!sWe(xq(t),xq(n),.2)}function sGe(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const aGe=Use({attachResizeListener:(e,t)=>lw(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kM={current:void 0},Vse=Use({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!kM.current){const e=new aGe({});e.mount(window),e.setOptions({layoutScroll:!0}),kM.current=e}return kM.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),oGe={pan:{Feature:SWe},drag:{Feature:_We,ProjectionNode:Vse,MeasureLayout:Dse}};function lGe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=(n==null?void 0:n[e])??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}function Hse(e,t){const n=lGe(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function Iq(e){return!(e.pointerType==="touch"||Ose())}function cGe(e,t,n={}){const[r,i,s]=Hse(e,n),a=o=>{if(!Iq(o))return;const{target:l}=o,c=t(l,o);if(typeof c!="function"||!l)return;const u=d=>{Iq(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}function Nq(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ki.postRender(()=>s(t,p1(t)))}class uGe extends Eh{mount(){const{current:t}=this.node;t&&(this.unmount=cGe(t,(n,r)=>(Nq(this.node,r,"Start"),i=>Nq(this.node,i,"End"))))}unmount(){}}class dGe extends Eh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=f1(lw(this.node.current,"focus",()=>this.onFocus()),lw(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Wse=(e,t)=>t?e===t?!0:Wse(e,t.parentElement):!1,fGe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hGe(e){return fGe.has(e.tagName)||e.tabIndex!==-1}const kv=new WeakSet;function Mq(e){return t=>{t.key==="Enter"&&e(t)}}function EM(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const pGe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Mq(()=>{if(kv.has(n))return;EM(n,"down");const i=Mq(()=>{EM(n,"up")}),s=()=>EM(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function jq(e){return $6(e)&&!Ose()}function mGe(e,t,n={}){const[r,i,s]=Hse(e,n),a=o=>{const l=o.currentTarget;if(!jq(o)||kv.has(l))return;kv.add(l);const c=t(l,o),u=(m,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!jq(m)||!kv.has(l))&&(kv.delete(l),typeof c=="function"&&c(m,{success:y}))},d=m=>{u(m,l===window||l===document||n.useGlobalTarget||Wse(l,m.target))},h=m=>{u(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o instanceof HTMLElement&&(o.addEventListener("focus",c=>pGe(c,i)),!hGe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function Pq(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ki.postRender(()=>s(t,p1(t)))}class gGe extends Eh{mount(){const{current:t}=this.node;t&&(this.unmount=mGe(t,(n,r)=>(Pq(this.node,r,"Start"),(i,{success:s})=>Pq(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Cj=new WeakMap,TM=new WeakMap,yGe=e=>{const t=Cj.get(e.target);t&&t(e)},bGe=e=>{e.forEach(yGe)};function vGe({root:e,...t}){const n=e||document;TM.has(n)||TM.set(n,{});const r=TM.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(bGe,{root:e,...t})),r[i]}function xGe(e,t,n){const r=vGe(t);return Cj.set(e,n),r.observe(e),()=>{Cj.delete(e),r.unobserve(e)}}const wGe={some:0,all:1};class _Ge extends Eh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:wGe[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return xGe(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(SGe(t,n))&&this.startObserver()}unmount(){}}function SGe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const CGe={inView:{Feature:_Ge},tap:{Feature:gGe},focus:{Feature:dGe},hover:{Feature:uGe}},kGe={layout:{ProjectionNode:Vse,MeasureLayout:Dse}},kj={current:null},Gse={current:!1};function EGe(){if(Gse.current=!0,!!u6)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>kj.current=e.matches;e.addListener(t),t()}else kj.current=!1}const TGe=new WeakMap;function AGe(e,t,n){for(const r in t){const i=t[r],s=n[r];if(Ea(i))e.addValue(r,i);else if(Ea(s))e.addValue(r,sw(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=e.getStaticValue(r);e.addValue(r,sw(a!==void 0?a:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Kse=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Yse=e=>/^0[^.\s]+$/u.test(e),RGe={test:e=>e==="auto",parse:e=>e},Zse=e=>t=>t.test(e),Xse=[Ay,er,ru,Ef,Bqe,Lqe,RGe],Oq=e=>Xse.find(Zse(e)),IGe=[...Xse,Sa,lh],NGe=e=>IGe.find(Zse(e)),MGe=new Set(["brightness","contrast","saturate","opacity"]);function jGe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(R6)||[];if(!r)return e;const i=n.replace(r,"");let s=MGe.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const PGe=/\b([a-z-]*)\(.*?\)/gu,Ej={...lh,getAnimatableNone:e=>{const t=e.match(PGe);return t?t.map(jGe).join(" "):e}},OGe={...v6,color:Sa,backgroundColor:Sa,outlineColor:Sa,fill:Sa,stroke:Sa,borderColor:Sa,borderTopColor:Sa,borderRightColor:Sa,borderBottomColor:Sa,borderLeftColor:Sa,filter:Ej,WebkitFilter:Ej},Jse=e=>OGe[e];function Qse(e,t){let n=Jse(e);return n!==Ej&&(n=lh),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Dq=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DGe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=F6,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=bo.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Ki.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=gT(n),this.isVariantNode=Pie(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const m=d[h];l[h]!==void 0&&Ea(m)&&m.set(l[h],!1)}}mount(t){this.current=t,TGe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Gse.current||EGe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kj.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),oh(this.notifyUpdate),oh(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ty.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ki.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in V0){const n=V0[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ss()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Dq.length;r++){const i=Dq[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=AGe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=sw(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Kse(r)||Yse(r))?r=parseFloat(r):!NGe(r)&&lh.test(n)&&(r=Qse(t,n)),this.setBaseTarget(t,Ea(r)?r.get():r)),Ea(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=S6(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Ea(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new T6),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}const FGe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function LGe(e){const t=FGe.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function eae(e,t,n=1){const[r,i]=LGe(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return Kse(a)?parseFloat(a):a}return b6(i)?eae(i,t,n+1):i}function BGe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Yse(e):!0}const $Ge=new Set(["auto","none","0"]);function zGe(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!$Ge.has(s)&&aw(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=Qse(n,i)}class UGe extends F6{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),b6(c))){const u=eae(c,n.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!_se.has(r)||t.length!==2)return;const[i,s]=t,a=Oq(i),o=Oq(s);if(a!==o)if($U(a)&&$U(o))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Rp[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||BGe(t[i]))&&r.push(i);r.length&&zGe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Rp[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=Rp[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}class tae extends DGe{constructor(){super(...arguments),this.KeyframeResolver=UGe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ea(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function nae(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}function qGe(e){return window.getComputedStyle(e)}class VGe extends tae{constructor(){super(...arguments),this.type="html",this.renderInstance=nae}readValueFromInstance(t,n){if(Ty.has(n))return pHe(t,n);{const r=qGe(t),i=(y6(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Nse(t,n)}build(t,n,r){x6(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return C6(t,n,r)}}const rae=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HGe(e,t,n,r){nae(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(rae.has(i)?i:p6(i),t.attrs[i])}class WGe extends tae{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ss}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ty.has(n)){const r=Jse(n);return r&&r.default||0}return n=rae.has(n)?n:p6(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Wie(t,n,r)}build(t,n,r){Uie(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){HGe(t,n,r,i)}mount(t){this.isSVGTag=Vie(t.tagName),super.mount(t)}}const GGe=(e,t)=>_6(e)?new WGe(t):new VGe(t,{allowProjection:e!==T.Fragment}),KGe=rVe({...XHe,...CGe,...oGe,...kGe},GGe),Vc=Sqe(KGe),Xg=new WeakMap,h2=new WeakMap,xk={current:[]};let AM=!1,Gv=0;const Ev=new Set,_S=new Map;function iae(e){const t=Array.from(e).sort((n,r)=>n instanceof gd&&n.options.deps.includes(r)?1:r instanceof gd&&r.options.deps.includes(n)?-1:0);for(const n of t){if(xk.current.includes(n))continue;xk.current.push(n),n.recompute();const r=h2.get(n);if(r)for(const i of r){const s=Xg.get(i);s&&iae(s)}}}function YGe(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function ZGe(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function sae(e){if(Gv>0&&!_S.has(e)&&_S.set(e,e.prevState),Ev.add(e),!(Gv>0)&&!AM)try{for(AM=!0;Ev.size>0;){const t=Array.from(Ev);Ev.clear();for(const n of t){const r=_S.get(n)??n.prevState;n.prevState=r,YGe(n)}for(const n of t){const r=Xg.get(n);r&&(xk.current.push(n),iae(r))}for(const n of t){const r=Xg.get(n);if(r)for(const i of r)ZGe(i)}}}finally{AM=!1,xk.current=[],_S.clear()}}function Lc(e){Gv++;try{e()}finally{if(Gv--,Gv===0){const t=Array.from(Ev)[0];t&&sae(t)}}}function XGe(e){return typeof e=="function"}class Tj{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const a=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),a==null||a()}},this.prevState=t,this.state=t,this.options=n}setState(t){var n,r,i;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(t):XGe(t)?this.state=t(this.prevState):this.state=t,(i=(r=this.options)==null?void 0:r.onUpdate)==null||i.call(r),sae(this)}}class gd{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:a}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:a}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof gd&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s==null||s()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const n of t)if(n instanceof gd)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof Tj){let r=Xg.get(n);r||(r=new Set,Xg.set(n,r)),r.add(this);let i=h2.get(this);i||(i=new Set,h2.set(this,i)),i.add(n)}}unregisterFromGraph(t=this.options.deps){for(const n of t)if(n instanceof gd)this.unregisterFromGraph(n.options.deps);else if(n instanceof Tj){const r=Xg.get(n);r&&r.delete(this);const i=h2.get(this);i&&i.delete(n)}}}function yT(e,t){return typeof e=="function"?e(t):e}function Tv(e,t){return z6(t).reduce((r,i)=>{if(r===null)return null;if(typeof r<"u")return r[i]},e)}function SS(e,t,n){const r=z6(t);function i(s){if(!r.length)return yT(n,s);const a=r.shift();if(typeof a=="string"||typeof a=="number"&&!Array.isArray(s))return typeof s=="object"?(s===null&&(s={}),{...s,[a]:i(s[a])}):{[a]:i()};if(Array.isArray(s)&&typeof a=="number"){const o=s.slice(0,a);return[...o.length?o:new Array(a),i(s[a]),...s.slice(a+1)]}return[...new Array(a),i()]}return i(e)}function JGe(e,t){const n=z6(t);function r(i){if(!i)return;if(n.length===1){const a=n[0];if(Array.isArray(i)&&typeof a=="number")return i.filter((c,u)=>u!==a);const{[a]:o,...l}=i;return l}const s=n.shift();if(typeof s=="string"&&typeof i=="object")return{...i,[s]:r(i[s])};if(typeof s=="number"&&Array.isArray(i)){if(s>=i.length)return i;const a=i.slice(0,s);return[...a.length?a:new Array(s),r(i[s]),...i.slice(s+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return r(e)}const QGe=/^(\d+)$/gm,eKe=/\.(\d+)(?=\.)/gm,tKe=/^(\d+)\./gm,nKe=/\.(\d+$)/gm,rKe=/\.{2,}/gm,Aj="__int__",CS=`${Aj}$1`;function z6(e){if(Array.isArray(e))return[...e];if(typeof e!="string")throw new Error("Path must be a string.");return e.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(QGe,CS).replace(eKe,`.${CS}.`).replace(tKe,`${CS}.`).replace(nKe,`.${CS}`).replace(rKe,".").split(".").map(t=>t.indexOf(Aj)===0?parseInt(t.substring(Aj.length),10):t)}function iKe(e){return!(Array.isArray(e)&&e.length===0)}function Rj(e,t){const{asyncDebounceMs:n}=t,{onChangeAsync:r,onBlurAsync:i,onSubmitAsync:s,onBlurAsyncDebounceMs:a,onChangeAsyncDebounceMs:o}=t.validators||{},l=n??0,c={cause:"change",validate:r,debounceMs:o??l},u={cause:"blur",validate:i,debounceMs:a??l},d={cause:"submit",validate:s,debounceMs:0},h=m=>({...m,debounceMs:0});switch(e){case"submit":return[h(c),h(u),d];case"blur":return[u];case"change":return[c];case"server":default:return[]}}function Ij(e,t){const{onChange:n,onBlur:r,onSubmit:i,onMount:s}=t.validators||{},a={cause:"change",validate:n},o={cause:"blur",validate:r},l={cause:"submit",validate:i},c={cause:"mount",validate:s},u={cause:"server",validate:()=>{}};switch(e){case"mount":return[c];case"submit":return[a,o,l,u];case"server":return[u];case"blur":return[o,u];case"change":default:return[a,u]}}const Nj=e=>!!e&&typeof e=="object"&&"fields"in e;function Rg(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,s]of e)if(!t.has(i)||!Object.is(s,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n)if(!r.includes(i)||!Rg(e[i],t[i]))return!1;return!0}const Fq=({newFormValidatorError:e,isPreviousErrorFromFormValidator:t,previousErrorValue:n})=>e?{newErrorValue:e,newSource:"form"}:t?{newErrorValue:void 0,newSource:void 0}:n?{newErrorValue:n,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},Lq=({formLevelError:e,fieldLevelError:t})=>t?{newErrorValue:t,newSource:"field"}:e?{newErrorValue:e,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function sKe(e){const t=new Map;for(const n of e){const r=[...n.path??[]].map(i=>{const s=typeof i=="object"?i.key:i;return typeof s=="number"?`[${s}]`:s}).join(".").replace(/\.\[/g,"[");t.set(r,(t.get(r)??[]).concat(n))}return Object.fromEntries(t)}const Bq=e=>{const t=sKe(e);return{form:t,fields:t}},Jg={validate({value:e,validationSource:t},n){const r=n["~standard"].validate(e);if(r instanceof Promise)throw new Error("async function passed to sync validator");if(r.issues)return t==="field"?r.issues:Bq(r.issues)},async validateAsync({value:e,validationSource:t},n){const r=await n["~standard"].validate(e);if(r.issues)return t==="field"?r.issues:Bq(r.issues)}},aae=e=>!!e&&"~standard"in e,wk={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function kS(e){function t(d,h,m,y){const b=r(d,h,m,y);({insert:()=>o(b,d,h),remove:()=>l(b),swap:()=>y!==void 0&&u(b,d,h,y),move:()=>y!==void 0&&c(b,d,h,y)})[m]()}function n(d,h){return`${d}[${h}]`}function r(d,h,m,y){const b=[n(d,h)];if(m==="swap")b.push(n(d,y));else if(m==="move"){const[v,x]=[Math.min(h,y),Math.max(h,y)];for(let _=v;_<=x;_++)b.push(n(d,_))}else{const v=e.getFieldValue(d),x=Array.isArray(v)?v.length:0;for(let _=h+1;_<x;_++)b.push(n(d,_))}return Object.keys(e.fieldInfo).filter(v=>b.some(x=>v.startsWith(x)))}function i(d,h){return d.replace(/\[(\d+)\]/,(m,y)=>{const b=parseInt(y,10);return`[${h==="up"?b+1:Math.max(0,b-1)}]`})}function s(d,h){(h==="up"?d:[...d].reverse()).forEach(y=>{const b=i(y.toString(),h),v=e.getFieldMeta(b);v?e.setFieldMeta(y,v):e.setFieldMeta(y,a())})}const a=()=>wk,o=(d,h,m)=>{s(d,"down"),d.forEach(y=>{y.toString().startsWith(n(h,m))&&e.setFieldMeta(y,a())})},l=d=>{s(d,"up")},c=(d,h,m,y)=>{const b=new Map(Object.keys(e.fieldInfo).filter(v=>v.startsWith(n(h,m))).map(v=>[v,e.getFieldMeta(v)]));s(d,m<y?"up":"down"),Object.keys(e.fieldInfo).filter(v=>v.startsWith(n(h,y))).forEach(v=>{const x=v.replace(n(h,y),n(h,m)),_=b.get(x);_&&e.setFieldMeta(v,_)})},u=(d,h,m,y)=>{d.forEach(b=>{if(!b.toString().startsWith(n(h,m)))return;const v=b.toString().replace(n(h,m),n(h,y)),[x,_]=[e.getFieldMeta(b),e.getFieldMeta(v)];x&&e.setFieldMeta(v,x),_&&e.setFieldMeta(b,_)})};return{handleArrayFieldMetaShift:t}}function RM(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,isSubmitSuccessful:e.isSubmitSuccessful??!1,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}class aKe{constructor(t){var n;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{var r,i;const s=this.fieldMetaDerived.mount(),a=this.store.mount(),o=()=>{s(),a()};(i=(r=this.options.listeners)==null?void 0:r.onMount)==null||i.call(r,{formApi:this});const{onMount:l}=this.options.validators||{};return l&&this.validateSync("mount"),o},this.update=r=>{var i,s;if(!r)return;const a=this.options;this.options=r;const o=!!((s=(i=r.transform)==null?void 0:i.deps)!=null&&s.some((u,d)=>u!==this.prevTransformArray[d])),l=r.defaultValues&&!Rg(r.defaultValues,a.defaultValues)&&!this.state.isTouched,c=!Rg(r.defaultState,a.defaultState)&&!this.state.isTouched;!l&&!c&&!o||Lc(()=>{this.baseStore.setState(()=>RM(Object.assign({},this.state,c?r.defaultState:{},l?{values:r.defaultValues}:{},o?{_force_re_eval:!this.state._force_re_eval}:{})))})},this.reset=(r,i)=>{const{fieldMeta:s}=this.state,a=this.resetFieldMeta(s);r&&!(i!=null&&i.keepDefaultValues)&&(this.options={...this.options,defaultValues:r}),this.baseStore.setState(()=>{var o;return RM({...this.options.defaultState,values:r??this.options.defaultValues??((o=this.options.defaultState)==null?void 0:o.values),fieldMetaBase:a})})},this.validateAllFields=async r=>{const i=[];return Lc(()=>{Object.values(this.fieldInfo).forEach(a=>{if(!a.instance)return;const o=a.instance;i.push(Promise.resolve().then(()=>o.validate(r,{skipFormValidation:!0}))),a.instance.state.meta.isTouched||a.instance.setMeta(l=>({...l,isTouched:!0}))})}),(await Promise.all(i)).flat()},this.validateArrayFieldsStartingFrom=async(r,i,s)=>{const a=this.getFieldValue(r),o=Array.isArray(a)?Math.max(a.length-1,0):null,l=[`${r}[${i}]`];for(let h=i+1;h<=(o??0);h++)l.push(`${r}[${h}]`);const c=Object.keys(this.fieldInfo).filter(h=>l.some(m=>h.startsWith(m))),u=[];return Lc(()=>{c.forEach(h=>{u.push(Promise.resolve().then(()=>this.validateField(h,s)))})}),(await Promise.all(u)).flat()},this.validateField=(r,i)=>{var s;const a=(s=this.fieldInfo[r])==null?void 0:s.instance;return a?(a.state.meta.isTouched||a.setMeta(o=>({...o,isTouched:!0})),a.validate(i)):[]},this.validateSync=r=>{const i=Ij(r,this.options);let s=!1;const a={};return Lc(()=>{var o,l;for(const u of i){if(!u.validate)continue;const d=this.runValidator({validate:u.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:h,fieldErrors:m}=p2(d),y=ES(u.cause);for(const b of Object.keys(this.state.fieldMeta)){const v=this.getFieldMeta(b);if(!v)continue;const{errorMap:x,errorSourceMap:_}=v,S=m==null?void 0:m[b],{newErrorValue:C,newSource:E}=Fq({newFormValidatorError:S,isPreviousErrorFromFormValidator:(_==null?void 0:_[y])==="form",previousErrorValue:x==null?void 0:x[y]});E==="form"&&(a[b]={...a[b],[y]:S}),(x==null?void 0:x[y])!==C&&this.setFieldMeta(b,A=>({...A,errorMap:{...A.errorMap,[y]:C},errorSourceMap:{...A.errorSourceMap,[y]:E}}))}((o=this.state.errorMap)==null?void 0:o[y])!==h&&this.baseStore.setState(b=>({...b,errorMap:{...b.errorMap,[y]:h}})),(h||m)&&(s=!0)}const c=ES("submit");(l=this.state.errorMap)!=null&&l[c]&&r!=="submit"&&!s&&this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[c]:void 0}}))}),{hasErrored:s,fieldsErrorMap:a}},this.validateAsync=async r=>{const i=Rj(r,this.options);this.state.isFormValidating||this.baseStore.setState(c=>({...c,isFormValidating:!0}));const s=[];let a;for(const c of i){if(!c.validate)continue;const u=ES(c.cause),d=this.state.validationMetaMap[u];d==null||d.lastAbortController.abort();const h=new AbortController;this.state.validationMetaMap[u]={lastAbortController:h},s.push(new Promise(async m=>{let y;try{y=await new Promise((_,S)=>{setTimeout(async()=>{if(h.signal.aborted)return _(void 0);try{_(await this.runValidator({validate:c.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:h.signal},type:"validateAsync"}))}catch(C){S(C)}},c.debounceMs)})}catch(_){y=_}const{formError:b,fieldErrors:v}=p2(y);v&&(a=a?{...a,...v}:v);const x=ES(c.cause);for(const _ of Object.keys(this.state.fieldMeta)){const S=this.getFieldMeta(_);if(!S)continue;const{errorMap:C,errorSourceMap:E}=S,A=a==null?void 0:a[_],{newErrorValue:R,newSource:N}=Fq({newFormValidatorError:A,isPreviousErrorFromFormValidator:(E==null?void 0:E[x])==="form",previousErrorValue:C==null?void 0:C[x]});(C==null?void 0:C[x])!==R&&this.setFieldMeta(_,M=>({...M,errorMap:{...M.errorMap,[x]:R},errorSourceMap:{...M.errorSourceMap,[x]:N}}))}this.baseStore.setState(_=>({..._,errorMap:{..._.errorMap,[x]:b}})),m(a?{fieldErrors:a,errorMapKey:x}:void 0)}))}let o=[];const l={};if(s.length){o=await Promise.all(s);for(const c of o)if(c!=null&&c.fieldErrors){const{errorMapKey:u}=c;for(const[d,h]of Object.entries(c.fieldErrors)){const y={...l[d]||{},[u]:h};l[d]=y}}}return this.baseStore.setState(c=>({...c,isFormValidating:!1})),l},this.validate=r=>{const{hasErrored:i,fieldsErrorMap:s}=this.validateSync(r);return i&&!this.options.asyncAlways?s:this.validateAsync(r)},this.getFieldValue=r=>Tv(this.state.values,r),this.getFieldMeta=r=>this.state.fieldMeta[r],this.getFieldInfo=r=>{var i;return(i=this.fieldInfo)[r]||(i[r]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(r,i)=>{this.baseStore.setState(s=>({...s,fieldMetaBase:{...s.fieldMetaBase,[r]:yT(i,s.fieldMetaBase[r])}}))},this.resetFieldMeta=r=>Object.keys(r).reduce((i,s)=>{const a=s;return i[a]=wk,i},{}),this.setFieldValue=(r,i,s)=>{const a=(s==null?void 0:s.dontUpdateMeta)??!1;Lc(()=>{a||this.setFieldMeta(r,o=>({...o,isTouched:!0,isDirty:!0,errorMap:{...o==null?void 0:o.errorMap,onMount:void 0}})),this.baseStore.setState(o=>({...o,values:SS(o.values,r,i)}))})},this.deleteField=r=>{const s=[...Object.keys(this.fieldInfo).filter(a=>{const o=r.toString();return a!==o&&a.startsWith(o)}),r];this.baseStore.setState(a=>{const o={...a};return s.forEach(l=>{o.values=JGe(o.values,l),delete this.fieldInfo[l],delete o.fieldMetaBase[l]}),o})},this.pushFieldValue=(r,i,s)=>{this.setFieldValue(r,a=>[...Array.isArray(a)?a:[],i],s),this.validateField(r,"change")},this.insertFieldValue=async(r,i,s,a)=>{this.setFieldValue(r,o=>[...o.slice(0,i),s,...o.slice(i)],a),await this.validateField(r,"change"),kS(this).handleArrayFieldMetaShift(r,i,"insert"),await this.validateArrayFieldsStartingFrom(r,i,"change")},this.replaceFieldValue=async(r,i,s,a)=>{this.setFieldValue(r,o=>o.map((l,c)=>c===i?s:l),a),await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,i,"change")},this.removeFieldValue=async(r,i,s)=>{const a=this.getFieldValue(r),o=Array.isArray(a)?Math.max(a.length-1,0):null;if(this.setFieldValue(r,l=>l.filter((c,u)=>u!==i),s),kS(this).handleArrayFieldMetaShift(r,i,"remove"),o!==null){const l=`${r}[${o}]`;this.deleteField(l)}await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,i,"change")},this.swapFieldValues=(r,i,s,a)=>{this.setFieldValue(r,o=>{const l=o[i],c=o[s];return SS(SS(o,`${i}`,c),`${s}`,l)},a),kS(this).handleArrayFieldMetaShift(r,i,"swap",s),this.validateField(r,"change"),this.validateField(`${r}[${i}]`,"change"),this.validateField(`${r}[${s}]`,"change")},this.moveFieldValues=(r,i,s,a)=>{this.setFieldValue(r,o=>{const l=[...o];return l.splice(s,0,l.splice(i,1)[0]),l},a),kS(this).handleArrayFieldMetaShift(r,i,"move",s),this.validateField(r,"change"),this.validateField(`${r}[${i}]`,"change"),this.validateField(`${r}[${s}]`,"change")},this.clearFieldValues=(r,i)=>{const s=this.getFieldValue(r),a=Array.isArray(s)?Math.max(s.length-1,0):null;if(this.setFieldValue(r,[],i),a!==null)for(let o=0;o<=a;o++){const l=`${r}[${o}]`;this.deleteField(l)}this.validateField(r,"change")},this.resetField=r=>{this.baseStore.setState(i=>({...i,fieldMetaBase:{...i.fieldMetaBase,[r]:wk},values:this.options.defaultValues?SS(i.values,r,Tv(this.options.defaultValues,r)):i.values}))},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((r,[i,s])=>(Object.keys(s).length&&s.errors.length&&(r[i]={errors:s.errors,errorMap:s.errorMap}),r),{})}),this.parseValuesWithSchema=r=>Jg.validate({value:this.state.values,validationSource:"form"},r),this.parseValuesWithSchemaAsync=r=>Jg.validateAsync({value:this.state.values,validationSource:"form"},r),this.baseStore=new Tj(RM({...t==null?void 0:t.defaultState,values:(t==null?void 0:t.defaultValues)??((n=t==null?void 0:t.defaultState)==null?void 0:n.values)})),this.fieldMetaDerived=new gd({deps:[this.baseStore],fn:({prevDepVals:r,currDepVals:i,prevVal:s})=>{var a,o,l;const c=s,u=r==null?void 0:r[0],d=i[0];let h=0;const m={};for(const y of Object.keys(d.fieldMetaBase)){const b=d.fieldMetaBase[y],v=u==null?void 0:u.fieldMetaBase[y],x=c==null?void 0:c[y],_=Tv(d.values,y);let S=x==null?void 0:x.errors;if(!v||b.errorMap!==v.errorMap){S=Object.values(b.errorMap??{}).filter(N=>N!==void 0);const R=(a=this.getFieldInfo(y))==null?void 0:a.instance;R&&!R.options.disableErrorFlat&&(S=S==null?void 0:S.flat(1))}const C=!iKe(S??[]),E=!b.isDirty,A=Rg(_,Tv(this.options.defaultValues,y))||Rg(_,(l=(o=this.getFieldInfo(y))==null?void 0:o.instance)==null?void 0:l.options.defaultValue);if(x&&x.isPristine===E&&x.isValid===C&&x.isDefaultValue===A&&x.errors===S&&b===v){m[y]=x,h++;continue}m[y]={...b,errors:S,isPristine:E,isValid:C,isDefaultValue:A}}return Object.keys(d.fieldMetaBase).length&&c&&h===Object.keys(d.fieldMetaBase).length?c:m}}),this.store=new gd({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:r,currDepVals:i,prevVal:s})=>{var a,o,l,c;const u=s,d=r==null?void 0:r[0],h=i[0],m=i[1],y=Object.values(m).filter(Boolean),b=y.some($=>$.isValidating),v=y.every($=>$.isValid),x=y.some($=>$.isTouched),_=y.some($=>$.isBlurred),S=y.every($=>$.isDefaultValue),C=x&&((a=h.errorMap)==null?void 0:a.onMount),E=y.some($=>$.isDirty),A=!E,R=!!((o=h.errorMap)!=null&&o.onMount||y.some($=>{var ne;return(ne=$==null?void 0:$.errorMap)==null?void 0:ne.onMount})),N=!!b;let M=(u==null?void 0:u.errors)??[];(!d||h.errorMap!==d.errorMap)&&(M=Object.values(h.errorMap).reduce(($,ne)=>ne===void 0?$:ne&&Nj(ne)?($.push(ne.form),$):($.push(ne),$),[]));const P=M.length===0,L=v&&P,O=this.options.canSubmitWhenInvalid??!1,V=h.submissionAttempts===0&&!x&&!R||!N&&!h.isSubmitting&&L||O;let F=h.errorMap;if(C&&(M=M.filter($=>$!==h.errorMap.onMount),F=Object.assign(F,{onMount:void 0})),u&&d&&u.errorMap===F&&u.fieldMeta===this.fieldMetaDerived.state&&u.errors===M&&u.isFieldsValidating===b&&u.isFieldsValid===v&&u.isFormValid===P&&u.isValid===L&&u.canSubmit===V&&u.isTouched===x&&u.isBlurred===_&&u.isPristine===A&&u.isDefaultValue===S&&u.isDirty===E&&Rg(d,h))return u;let J={...h,errorMap:F,fieldMeta:this.fieldMetaDerived.state,errors:M,isFieldsValidating:b,isFieldsValid:v,isFormValid:P,isValid:L,canSubmit:V,isTouched:x,isBlurred:_,isPristine:A,isDefaultValue:S,isDirty:E};const U=((l=this.options.transform)==null?void 0:l.deps)??[];if(U.length!==this.prevTransformArray.length||U.some(($,ne)=>$!==this.prevTransformArray[ne])){const $=Object.assign({},this,{state:J});(c=this.options.transform)==null||c.fn($),J=$.state,this.prevTransformArray=U}return J}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(t||{})}get state(){return this.store.state}runValidator(t){return aae(t.validate)?Jg[t.type](t.value,t.validate):t.validate(t.value)}async handleSubmit(t){var n,r,i,s,a,o,l,c;if(this.baseStore.setState(d=>({...d,isSubmitted:!1,submissionAttempts:d.submissionAttempts+1,isSubmitSuccessful:!1})),Lc(()=>{Object.values(this.fieldInfo).forEach(d=>{d.instance&&(d.instance.state.meta.isTouched||d.instance.setMeta(h=>({...h,isTouched:!0})))})}),!this.state.canSubmit)return;this.baseStore.setState(d=>({...d,isSubmitting:!0}));const u=()=>{this.baseStore.setState(d=>({...d,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){u(),(r=(n=this.options).onSubmitInvalid)==null||r.call(n,{value:this.state.values,formApi:this});return}if(await this.validate("submit"),!this.state.isValid){u(),(s=(i=this.options).onSubmitInvalid)==null||s.call(i,{value:this.state.values,formApi:this});return}Lc(()=>{Object.values(this.fieldInfo).forEach(d=>{var h,m,y;(y=(m=(h=d.instance)==null?void 0:h.options.listeners)==null?void 0:m.onSubmit)==null||y.call(m,{value:d.instance.state.value,fieldApi:d.instance})})}),(o=(a=this.options.listeners)==null?void 0:a.onSubmit)==null||o.call(a,{formApi:this});try{await((c=(l=this.options).onSubmit)==null?void 0:c.call(l,{value:this.state.values,formApi:this,meta:t??this.options.onSubmitMeta})),Lc(()=>{this.baseStore.setState(d=>({...d,isSubmitted:!0,isSubmitSuccessful:!0})),u()})}catch(d){throw this.baseStore.setState(h=>({...h,isSubmitSuccessful:!1})),u(),d}}setErrorMap(t){Lc(()=>{Object.entries(t).forEach(([n,r])=>{const i=n;if(Nj(r)){const{formError:s,fieldErrors:a}=p2(r);for(const o of Object.keys(this.fieldInfo))this.getFieldMeta(o)&&this.setFieldMeta(o,c=>({...c,errorMap:{...c.errorMap,[i]:a==null?void 0:a[o]},errorSourceMap:{...c.errorSourceMap,[i]:"form"}}));this.baseStore.setState(o=>({...o,errorMap:{...o.errorMap,[i]:s}}))}else this.baseStore.setState(s=>({...s,errorMap:{...s.errorMap,[i]:r}}))})})}}function p2(e){if(e){if(Nj(e)){const t=p2(e.form).formError,n=e.fields;return{formError:t,fieldErrors:n}}return{formError:e}}return{formError:void 0}}function ES(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}class oKe{constructor(t){this.options={},this.mount=()=>{var n,r;const i=this.store.mount();this.options.defaultValue!==void 0&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const s=this.getInfo();s.instance=this,this.update(this.options);const{onMount:a}=this.options.validators||{};if(a){const o=this.runValidator({validate:a,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});o&&this.setMeta(l=>({...l,errorMap:{...l==null?void 0:l.errorMap,onMount:o},errorSourceMap:{...l==null?void 0:l.errorSourceMap,onMount:"field"}}))}return(r=(n=this.options.listeners)==null?void 0:n.onMount)==null||r.call(n,{value:this.state.value,fieldApi:this}),i},this.update=n=>{this.options=n;const r=this.name!==n.name;if(this.name=n.name,this.state.value===void 0){const i=Tv(n.form.options.defaultValues,n.name),s=n.defaultValue??i;r?this.setValue(a=>a||s,{dontUpdateMeta:!0}):s!==void 0&&this.setValue(s,{dontUpdateMeta:!0})}this.form.getFieldMeta(this.name)===void 0&&this.setMeta(this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(n,r)=>{this.form.setFieldValue(this.name,n,r),this.triggerOnChangeListener(),this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=n=>this.form.setFieldMeta(this.name,n),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(n,r)=>{this.form.pushFieldValue(this.name,n,r),this.triggerOnChangeListener()},this.insertValue=(n,r,i)=>{this.form.insertFieldValue(this.name,n,r,i),this.triggerOnChangeListener()},this.replaceValue=(n,r,i)=>{this.form.replaceFieldValue(this.name,n,r,i),this.triggerOnChangeListener()},this.removeValue=(n,r)=>{this.form.removeFieldValue(this.name,n,r),this.triggerOnChangeListener()},this.swapValues=(n,r,i)=>{this.form.swapFieldValues(this.name,n,r,i),this.triggerOnChangeListener()},this.moveValue=(n,r,i)=>{this.form.moveFieldValues(this.name,n,r,i),this.triggerOnChangeListener()},this.clearValues=n=>{this.form.clearFieldValues(this.name,n),this.triggerOnChangeListener()},this.getLinkedFields=n=>{const r=Object.values(this.form.fieldInfo),i=[];for(const s of r){if(!s.instance)continue;const{onChangeListenTo:a,onBlurListenTo:o}=s.instance.options.validators||{};n==="change"&&(a!=null&&a.includes(this.name))&&i.push(s.instance),n==="blur"&&(o!=null&&o.includes(this.name))&&i.push(s.instance)}return i},this.validateSync=(n,r)=>{var i;const s=Ij(n,this.options),o=this.getLinkedFields(n).reduce((u,d)=>{const h=Ij(n,d.options);return h.forEach(m=>{m.field=d}),u.concat(h)},[]);let l=!1;Lc(()=>{const u=(d,h)=>{var m;const y=TS(h.cause),b=h.validate?$q(d.runValidator({validate:h.validate,value:{value:d.store.state.value,validationSource:"field",fieldApi:d},type:"validate"})):void 0,v=r[y],{newErrorValue:x,newSource:_}=Lq({formLevelError:v,fieldLevelError:b});((m=d.state.meta.errorMap)==null?void 0:m[y])!==x&&d.setMeta(S=>({...S,errorMap:{...S.errorMap,[y]:x},errorSourceMap:{...S.errorSourceMap,[y]:_}})),x&&(l=!0)};for(const d of s)u(this,d);for(const d of o)d.validate&&u(d.field,d)});const c=TS("submit");return(i=this.state.meta.errorMap)!=null&&i[c]&&n!=="submit"&&!l&&this.setMeta(u=>({...u,errorMap:{...u.errorMap,[c]:void 0},errorSourceMap:{...u.errorSourceMap,[c]:void 0}})),{hasErrored:l}},this.validateAsync=async(n,r)=>{const i=Rj(n,this.options),s=await r,a=this.getLinkedFields(n),o=a.reduce((h,m)=>{const y=Rj(n,m.options);return y.forEach(b=>{b.field=m}),h.concat(y)},[]);this.state.meta.isValidating||this.setMeta(h=>({...h,isValidating:!0}));for(const h of a)h.setMeta(m=>({...m,isValidating:!0}));const l=[],c=[],u=(h,m,y)=>{const b=TS(m.cause),v=h.getInfo().validationMetaMap[b];v==null||v.lastAbortController.abort();const x=new AbortController;this.getInfo().validationMetaMap[b]={lastAbortController:x},y.push(new Promise(async _=>{var S;let C;try{C=await new Promise((M,P)=>{this.timeoutIds.validations[m.cause]&&clearTimeout(this.timeoutIds.validations[m.cause]),this.timeoutIds.validations[m.cause]=setTimeout(async()=>{if(x.signal.aborted)return M(void 0);try{M(await this.runValidator({validate:m.validate,value:{value:h.store.state.value,fieldApi:h,signal:x.signal,validationSource:"field"},type:"validateAsync"}))}catch(L){P(L)}},m.debounceMs)})}catch(M){C=M}if(x.signal.aborted)return _(void 0);const E=$q(C),A=(S=s[this.name])==null?void 0:S[b],{newErrorValue:R,newSource:N}=Lq({formLevelError:A,fieldLevelError:E});h.setMeta(M=>({...M,errorMap:{...M==null?void 0:M.errorMap,[b]:R},errorSourceMap:{...M.errorSourceMap,[b]:N}})),_(R)}))};for(const h of i)h.validate&&u(this,h,l);for(const h of o)h.validate&&u(h.field,h,c);let d=[];(l.length||c.length)&&(d=await Promise.all(l),await Promise.all(c)),this.setMeta(h=>({...h,isValidating:!1}));for(const h of a)h.setMeta(m=>({...m,isValidating:!1}));return d.filter(Boolean)},this.validate=(n,r)=>{var i;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:s}=r!=null&&r.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(n),{hasErrored:a}=this.validateSync(n,s[this.name]??{});if(a&&!this.options.asyncAlways)return(i=this.getInfo().validationMetaMap[TS(n)])==null||i.lastAbortController.abort(),this.state.meta.errors;const o=r!=null&&r.skipFormValidation?Promise.resolve({}):this.form.validateAsync(n);return this.validateAsync(n,o)},this.handleChange=n=>{this.setValue(n)},this.handleBlur=()=>{this.state.meta.isTouched||(this.setMeta(r=>({...r,isTouched:!0})),this.validate("change")),this.state.meta.isBlurred||this.setMeta(r=>({...r,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.parseValueWithSchema=n=>Jg.validate({value:this.state.value,validationSource:"field"},n),this.parseValueWithSchemaAsync=n=>Jg.validateAsync({value:this.state.value,validationSource:"field"},n),this.form=t.form,this.name=t.name,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new gd({deps:[this.form.store],fn:()=>{const n=this.form.getFieldValue(this.name),r=this.form.getFieldMeta(this.name)??{...wk,...t.defaultMeta};return{value:n,meta:r}}}),this.options=t}get state(){return this.store.state}runValidator(t){return aae(t.validate)?Jg[t.type](t.value,t.validate):t.validate(t.value)}setErrorMap(t){this.setMeta(n=>({...n,errorMap:{...n.errorMap,...t}}))}triggerOnBlurListener(){var t,n,r,i,s,a;const o=(t=this.form.options.listeners)==null?void 0:t.onBlurDebounceMs;o&&o>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{var c,u;(u=(c=this.form.options.listeners)==null?void 0:c.onBlur)==null||u.call(c,{formApi:this.form,fieldApi:this})},o)):(r=(n=this.form.options.listeners)==null?void 0:n.onBlur)==null||r.call(n,{formApi:this.form,fieldApi:this});const l=(i=this.options.listeners)==null?void 0:i.onBlurDebounceMs;l&&l>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{var c,u;(u=(c=this.options.listeners)==null?void 0:c.onBlur)==null||u.call(c,{value:this.state.value,fieldApi:this})},l)):(a=(s=this.options.listeners)==null?void 0:s.onBlur)==null||a.call(s,{value:this.state.value,fieldApi:this})}triggerOnChangeListener(){var t,n,r,i,s,a;const o=(t=this.form.options.listeners)==null?void 0:t.onChangeDebounceMs;o&&o>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{var c,u;(u=(c=this.form.options.listeners)==null?void 0:c.onChange)==null||u.call(c,{formApi:this.form,fieldApi:this})},o)):(r=(n=this.form.options.listeners)==null?void 0:n.onChange)==null||r.call(n,{formApi:this.form,fieldApi:this});const l=(i=this.options.listeners)==null?void 0:i.onChangeDebounceMs;l&&l>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{var c,u;(u=(c=this.options.listeners)==null?void 0:c.onChange)==null||u.call(c,{value:this.state.value,fieldApi:this})},l)):(a=(s=this.options.listeners)==null?void 0:s.onChange)==null||a.call(s,{value:this.state.value,fieldApi:this})}}function $q(e){if(e)return e}function TS(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}var IM={exports:{}},NM={},MM={exports:{}},jM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zq;function lKe(){if(zq)return jM;zq=1;var e=vw();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,a=e.useDebugValue;function o(d,h){var m=h(),y=r({inst:{value:m,getSnapshot:h}}),b=y[0].inst,v=y[1];return s(function(){b.value=m,b.getSnapshot=h,l(b)&&v({inst:b})},[d,m,h]),i(function(){return l(b)&&v({inst:b}),d(function(){l(b)&&v({inst:b})})},[d]),a(m),m}function l(d){var h=d.getSnapshot;d=d.value;try{var m=h();return!n(d,m)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return jM.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,jM}var Uq;function cKe(){return Uq||(Uq=1,MM.exports=lKe()),MM.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qq;function uKe(){if(qq)return NM;qq=1;var e=vw(),t=cKe();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,a=e.useEffect,o=e.useMemo,l=e.useDebugValue;return NM.useSyncExternalStoreWithSelector=function(c,u,d,h,m){var y=s(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=o(function(){function x(A){if(!_){if(_=!0,S=A,A=h(A),m!==void 0&&b.hasValue){var R=b.value;if(m(R,A))return C=R}return C=A}if(R=C,r(S,A))return R;var N=h(A);return m!==void 0&&m(R,N)?(S=A,R):(S=A,C=N)}var _=!1,S,C,E=d===void 0?null:d;return[function(){return x(u())},E===null?void 0:function(){return x(E())}]},[u,d,h,m]);var v=i(c,y[0],y[1]);return a(function(){b.hasValue=!0,b.value=v},[v]),l(v),v},NM}var Vq;function dKe(){return Vq||(Vq=1,IM.exports=uKe()),IM.exports}var fKe=dKe();function U6(e,t=n=>n){return fKe.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,hKe)}function hKe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!t.has(r)||!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const _k=typeof window<"u"?T.useLayoutEffect:T.useEffect;function pKe(e){const[t]=T.useState(()=>{const r=new oKe({...e,form:e.form,name:e.name});return r.Field=oae,r});return _k(t.mount,[t]),_k(()=>{t.update(e)}),U6(t.store,e.mode==="array"?n=>[n.meta,Object.keys(n.value??[]).length]:void 0),t}const oae=({children:e,...t})=>{const n=pKe(t),r=T.useMemo(()=>yT(e,n),[e,n,n.state.value,n.state.meta]);return p.jsx(p.Fragment,{children:r})};function mKe({form:e,selector:t,children:n}){const r=U6(e.store,t);return yT(n,r)}function ea(e){const[t]=T.useState(()=>{const n=new aKe(e),r=n;return r.Field=function(s){return p.jsx(oae,{...s,form:n})},r.Subscribe=i=>p.jsx(mKe,{form:n,selector:i.selector,children:i.children}),r});return _k(t.mount,[]),U6(t.store,n=>n.isSubmitting),_k(()=>{t.update(e)}),t}function pr({className:e,type:t,...n}){return p.jsx("input",{type:t,"data-slot":"input",className:ft("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function gKe(e){const t=e+"CollectionProvider",[n,r]=Ds(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=b=>{const{scope:v,children:x}=b,_=lt.useRef(null),S=lt.useRef(new Map).current;return p.jsx(i,{scope:v,itemMap:S,collectionRef:_,children:x})};a.displayName=t;const o=e+"CollectionSlot",l=ou(o),c=lt.forwardRef((b,v)=>{const{scope:x,children:_}=b,S=s(o,x),C=En(v,S.collectionRef);return p.jsx(l,{ref:C,children:_})});c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=ou(u),m=lt.forwardRef((b,v)=>{const{scope:x,children:_,...S}=b,C=lt.useRef(null),E=En(v,C),A=s(u,x);return lt.useEffect(()=>(A.itemMap.set(C,{ref:C,...S}),()=>void A.itemMap.delete(C))),p.jsx(h,{[d]:"",ref:E,children:_})});m.displayName=u;function y(b){const v=s(e+"CollectionConsumer",b);return lt.useCallback(()=>{const _=v.collectionRef.current;if(!_)return[];const S=Array.from(_.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((A,R)=>S.indexOf(A.ref.current)-S.indexOf(R.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:c,ItemSlot:m},y,r]}var yKe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],hs=yKe.reduce((e,t)=>{const n=ou(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function bKe(e,t){e&&Vo.flushSync(()=>e.dispatchEvent(t))}var vKe="DismissableLayer",Mj="dismissableLayer.update",xKe="dismissableLayer.pointerDownOutside",wKe="dismissableLayer.focusOutside",Hq,lae=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cae=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=T.useContext(lae),[u,d]=T.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=T.useState({}),y=En(t,R=>d(R)),b=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(v),_=u?b.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,C=_>=x,E=CKe(R=>{const N=R.target,M=[...c.branches].some(P=>P.contains(N));!C||M||(i==null||i(R),a==null||a(R),R.defaultPrevented||o==null||o())},h),A=kKe(R=>{const N=R.target;[...c.branches].some(P=>P.contains(N))||(s==null||s(R),a==null||a(R),R.defaultPrevented||o==null||o())},h);return yP(R=>{_===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&o&&(R.preventDefault(),o()))},h),T.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Hq=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Wq(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Hq)}},[u,h,n,c]),T.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Wq())},[u,c]),T.useEffect(()=>{const R=()=>m({});return document.addEventListener(Mj,R),()=>document.removeEventListener(Mj,R)},[]),p.jsx(hs.div,{...l,ref:y,style:{pointerEvents:S?C?"auto":"none":void 0,...e.style},onFocusCapture:Vt(e.onFocusCapture,A.onFocusCapture),onBlurCapture:Vt(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Vt(e.onPointerDownCapture,E.onPointerDownCapture)})});cae.displayName=vKe;var _Ke="DismissableLayerBranch",SKe=T.forwardRef((e,t)=>{const n=T.useContext(lae),r=T.useRef(null),i=En(t,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(hs.div,{...e,ref:i})});SKe.displayName=_Ke;function CKe(e,t=globalThis==null?void 0:globalThis.document){const n=xi(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let l=function(){uae(xKe,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function kKe(e,t=globalThis==null?void 0:globalThis.document){const n=xi(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&uae(wKe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Wq(){const e=new CustomEvent(Mj);document.dispatchEvent(e)}function uae(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?bKe(i,s):i.dispatchEvent(s)}var PM=0;function bT(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Gq()),document.body.insertAdjacentElement("beforeend",e[1]??Gq()),PM++,()=>{PM===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),PM--}},[])}function Gq(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var OM="focusScope.autoFocusOnMount",DM="focusScope.autoFocusOnUnmount",Kq={bubbles:!1,cancelable:!0},EKe="FocusScope",dae=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=T.useState(null),c=xi(i),u=xi(s),d=T.useRef(null),h=En(t,b=>l(b)),m=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(S){if(m.paused||!o)return;const C=S.target;o.contains(C)?d.current=C:Tf(d.current,{select:!0})},v=function(S){if(m.paused||!o)return;const C=S.relatedTarget;C!==null&&(o.contains(C)||Tf(d.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const E of S)E.removedNodes.length>0&&Tf(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",v);const _=new MutationObserver(x);return o&&_.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",v),_.disconnect()}}},[r,o,m.paused]),T.useEffect(()=>{if(o){Zq.add(m);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(OM,Kq);o.addEventListener(OM,c),o.dispatchEvent(x),x.defaultPrevented||(TKe(MKe(fae(o)),{select:!0}),document.activeElement===b&&Tf(o))}return()=>{o.removeEventListener(OM,c),setTimeout(()=>{const x=new CustomEvent(DM,Kq);o.addEventListener(DM,u),o.dispatchEvent(x),x.defaultPrevented||Tf(b??document.body,{select:!0}),o.removeEventListener(DM,u),Zq.remove(m)},0)}}},[o,c,u,m]);const y=T.useCallback(b=>{if(!n&&!r||m.paused)return;const v=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(v&&x){const _=b.currentTarget,[S,C]=AKe(_);S&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&Tf(S,{select:!0})):b.shiftKey&&x===S&&(b.preventDefault(),n&&Tf(C,{select:!0})):x===_&&b.preventDefault()}},[n,r,m.paused]);return p.jsx(hs.div,{tabIndex:-1,...a,ref:h,onKeyDown:y})});dae.displayName=EKe;function TKe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Tf(r,{select:t}),document.activeElement!==n)return}function AKe(e){const t=fae(e),n=Yq(t,e),r=Yq(t.reverse(),e);return[n,r]}function fae(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Yq(e,t){for(const n of e)if(!RKe(n,{upTo:t}))return n}function RKe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function IKe(e){return e instanceof HTMLInputElement&&"select"in e}function Tf(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&IKe(e)&&t&&e.select()}}var Zq=NKe();function NKe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Xq(e,t),e.unshift(t)},remove(t){var n;e=Xq(e,t),(n=e[0])==null||n.resume()}}}function Xq(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function MKe(e){return e.filter(t=>t.tagName!=="A")}var jKe="Arrow",hae=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return p.jsx(hs.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});hae.displayName=jKe;var PKe=hae,q6="Popper",[pae,mae]=Ds(q6),[OKe,gae]=pae(q6),yae=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return p.jsx(OKe,{scope:t,anchor:r,onAnchorChange:i,children:n})};yae.displayName=q6;var bae="PopperAnchor",vae=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=gae(bae,n),a=T.useRef(null),o=En(t,a);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:p.jsx(hs.div,{...i,ref:o})});vae.displayName=bae;var V6="PopperContent",[DKe,FKe]=pae(V6),xae=T.forwardRef((e,t)=>{var je,Ne,Ce,Ue,et,qe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...b}=e,v=gae(V6,n),[x,_]=T.useState(null),S=En(t,Re=>_(Re)),[C,E]=T.useState(null),A=ry(C),R=(A==null?void 0:A.width)??0,N=(A==null?void 0:A.height)??0,M=r+(s!=="center"?"-"+s:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],O=L.length>0,V={padding:P,boundary:L.filter(BKe),altBoundary:O},{refs:F,floatingStyles:J,placement:U,isPositioned:G,middlewareData:$}=EP({strategy:"fixed",placement:M,whileElementsMounted:(...Re)=>kP(...Re,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[TP({mainAxis:i+N,alignmentAxis:a}),l&&AP({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?RP():void 0,...V}),l&&IP({...V}),NP({...V,apply:({elements:Re,rects:K,availableWidth:ge,availableHeight:Ae})=>{const{width:le,height:oe}=K.reference,ie=Re.floating.style;ie.setProperty("--radix-popper-available-width",`${ge}px`),ie.setProperty("--radix-popper-available-height",`${Ae}px`),ie.setProperty("--radix-popper-anchor-width",`${le}px`),ie.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),C&&jP({element:C,padding:o}),$Ke({arrowWidth:R,arrowHeight:N}),h&&MP({strategy:"referenceHidden",...V})]}),[ne,H]=Sae(U),te=xi(y);Yi(()=>{G&&(te==null||te())},[G,te]);const ee=(je=$.arrow)==null?void 0:je.x,se=(Ne=$.arrow)==null?void 0:Ne.y,he=((Ce=$.arrow)==null?void 0:Ce.centerOffset)!==0,[ce,Me]=T.useState();return Yi(()=>{x&&Me(window.getComputedStyle(x).zIndex)},[x]),p.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:G?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(Ue=$.transformOrigin)==null?void 0:Ue.x,(et=$.transformOrigin)==null?void 0:et.y].join(" "),...((qe=$.hide)==null?void 0:qe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(DKe,{scope:n,placedSide:ne,onArrowChange:E,arrowX:ee,arrowY:se,shouldHideArrow:he,children:p.jsx(hs.div,{"data-side":ne,"data-align":H,...b,ref:S,style:{...b.style,animation:G?void 0:"none"}})})})});xae.displayName=V6;var wae="PopperArrow",LKe={top:"bottom",right:"left",bottom:"top",left:"right"},_ae=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=FKe(wae,r),a=LKe[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(PKe,{...i,ref:n,style:{...i.style,display:"block"}})})});_ae.displayName=wae;function BKe(e){return e!==null}var $Ke=e=>({name:"transformOrigin",options:e,fn(t){var v,x,_;const{placement:n,rects:r,middlewareData:i}=t,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,u]=Sae(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((x=i.arrow)==null?void 0:x.x)??0)+o/2,m=(((_=i.arrow)==null?void 0:_.y)??0)+l/2;let y="",b="";return c==="bottom"?(y=a?d:`${h}px`,b=`${-l}px`):c==="top"?(y=a?d:`${h}px`,b=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,b=a?d:`${m}px`):c==="left"&&(y=`${r.floating.width+l}px`,b=a?d:`${m}px`),{data:{x:y,y:b}}}});function Sae(e){const[t,n="center"]=e.split("-");return[t,n]}var zKe=yae,UKe=vae,qKe=xae,VKe=_ae,HKe="Portal",Cae=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=T.useState(!1);Yi(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?Bk.createPortal(p.jsx(hs.div,{...r,ref:t}),a):null});Cae.displayName=HKe;function vT(e){const t=T.useRef({value:e,previous:e});return T.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var kae=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),WKe="VisuallyHidden",GKe=T.forwardRef((e,t)=>p.jsx(hs.span,{...e,ref:t,style:{...kae,...e.style}}));GKe.displayName=WKe;var KKe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},xg=new WeakMap,AS=new WeakMap,RS={},FM=0,Eae=function(e){return e&&(e.host||Eae(e.parentNode))},YKe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Eae(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},ZKe=function(e,t,n,r){var i=YKe(t,Array.isArray(e)?e:[e]);RS[n]||(RS[n]=new WeakMap);var s=RS[n],a=[],o=new Set,l=new Set(i),c=function(d){!d||o.has(d)||(o.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(o.has(h))u(h);else try{var m=h.getAttribute(r),y=m!==null&&m!=="false",b=(xg.get(h)||0)+1,v=(s.get(h)||0)+1;xg.set(h,b),s.set(h,v),a.push(h),b===1&&y&&AS.set(h,!0),v===1&&h.setAttribute(n,"true"),y||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return u(t),o.clear(),FM++,function(){a.forEach(function(d){var h=xg.get(d)-1,m=s.get(d)-1;xg.set(d,h),s.set(d,m),h||(AS.has(d)||d.removeAttribute(r),AS.delete(d)),m||d.removeAttribute(n)}),FM--,FM||(xg=new WeakMap,xg=new WeakMap,AS=new WeakMap,RS={})}},xT=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=KKe(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),ZKe(r,i,n,"aria-hidden")):function(){return null}},Kc=function(){return Kc=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Kc.apply(this,arguments)};function Tae(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function XKe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var m2="right-scroll-bar-position",g2="width-before-scroll-bar",JKe="with-scroll-bars-hidden",QKe="--removed-body-scroll-bar-size";function LM(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function eYe(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var tYe=typeof window<"u"?T.useLayoutEffect:T.useEffect,Jq=new WeakMap;function nYe(e,t){var n=eYe(null,function(r){return e.forEach(function(i){return LM(i,r)})});return tYe(function(){var r=Jq.get(n);if(r){var i=new Set(r),s=new Set(e),a=n.current;i.forEach(function(o){s.has(o)||LM(o,null)}),s.forEach(function(o){i.has(o)||LM(o,a)})}Jq.set(n,e)},[e]),n}function rYe(e){return e}function iYe(e,t){t===void 0&&(t=rYe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var l=function(){var u=a;a=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){a.push(u),c()},filter:function(u){return a=a.filter(u),n}}}};return i}function sYe(e){e===void 0&&(e={});var t=iYe(null);return t.options=Kc({async:!0,ssr:!1},e),t}var Aae=function(e){var t=e.sideCar,n=Tae(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,Kc({},n))};Aae.isSideCarExport=!0;function aYe(e,t){return e.useMedium(t),Aae}var Rae=sYe(),BM=function(){},wT=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:BM,onWheelCapture:BM,onTouchMoveCapture:BM}),i=r[0],s=r[1],a=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,m=e.noIsolation,y=e.inert,b=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,_=e.gapMode,S=Tae(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=h,E=nYe([n,t]),A=Kc(Kc({},S),i);return T.createElement(T.Fragment,null,u&&T.createElement(C,{sideCar:Rae,removeScrollBar:c,shards:d,noIsolation:m,inert:y,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:_}),a?T.cloneElement(T.Children.only(o),Kc(Kc({},A),{ref:E})):T.createElement(x,Kc({},A,{className:l,ref:E}),o))});wT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wT.classNames={fullWidth:g2,zeroRight:m2};var oYe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lYe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=oYe();return t&&e.setAttribute("nonce",t),e}function cYe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function uYe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var dYe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=lYe())&&(cYe(t,n),uYe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},fYe=function(){var e=dYe();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Iae=function(){var e=fYe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},hYe={left:0,top:0,right:0,gap:0},$M=function(e){return parseInt(e||"",10)||0},pYe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[$M(n),$M(r),$M(i)]},mYe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return hYe;var t=pYe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},gYe=Iae(),Qg="data-scroll-locked",yYe=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(JKe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Qg,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(m2,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(g2,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(m2," .").concat(m2,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(g2," .").concat(g2,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Qg,`] {
    `).concat(QKe,": ").concat(o,`px;
  }
`)},Qq=function(){var e=parseInt(document.body.getAttribute(Qg)||"0",10);return isFinite(e)?e:0},bYe=function(){T.useEffect(function(){return document.body.setAttribute(Qg,(Qq()+1).toString()),function(){var e=Qq()-1;e<=0?document.body.removeAttribute(Qg):document.body.setAttribute(Qg,e.toString())}},[])},vYe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;bYe();var s=T.useMemo(function(){return mYe(i)},[i]);return T.createElement(gYe,{styles:yYe(s,!t,i,n?"":"!important")})},jj=!1;if(typeof window<"u")try{var IS=Object.defineProperty({},"passive",{get:function(){return jj=!0,!0}});window.addEventListener("test",IS,IS),window.removeEventListener("test",IS,IS)}catch{jj=!1}var wg=jj?{passive:!1}:!1,xYe=function(e){return e.tagName==="TEXTAREA"},Nae=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!xYe(e)&&n[t]==="visible")},wYe=function(e){return Nae(e,"overflowY")},_Ye=function(e){return Nae(e,"overflowX")},eV=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Mae(e,r);if(i){var s=jae(e,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},SYe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},CYe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Mae=function(e,t){return e==="v"?wYe(t):_Ye(t)},jae=function(e,t){return e==="v"?SYe(t):CYe(t)},kYe=function(e,t){return e==="h"&&t==="rtl"?-1:1},EYe=function(e,t,n,r,i){var s=kYe(e,window.getComputedStyle(t).direction),a=s*r,o=n.target,l=t.contains(o),c=!1,u=a>0,d=0,h=0;do{var m=jae(e,o),y=m[0],b=m[1],v=m[2],x=b-v-s*y;(y||x)&&Mae(e,o)&&(d+=x,h+=y),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},NS=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tV=function(e){return[e.deltaX,e.deltaY]},nV=function(e){return e&&"current"in e?e.current:e},TYe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},AYe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},RYe=0,_g=[];function IYe(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),i=T.useState(RYe++)[0],s=T.useState(Iae)[0],a=T.useRef(e);T.useEffect(function(){a.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var b=XKe([e.lockRef.current],(e.shards||[]).map(nV),!0).filter(Boolean);return b.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),b.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=T.useCallback(function(b,v){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!a.current.allowPinchZoom;var x=NS(b),_=n.current,S="deltaX"in b?b.deltaX:_[0]-x[0],C="deltaY"in b?b.deltaY:_[1]-x[1],E,A=b.target,R=Math.abs(S)>Math.abs(C)?"h":"v";if("touches"in b&&R==="h"&&A.type==="range")return!1;var N=eV(R,A);if(!N)return!0;if(N?E=R:(E=R==="v"?"h":"v",N=eV(R,A)),!N)return!1;if(!r.current&&"changedTouches"in b&&(S||C)&&(r.current=E),!E)return!0;var M=r.current||E;return EYe(M,v,b,M==="h"?S:C)},[]),l=T.useCallback(function(b){var v=b;if(!(!_g.length||_g[_g.length-1]!==s)){var x="deltaY"in v?tV(v):NS(v),_=t.current.filter(function(E){return E.name===v.type&&(E.target===v.target||v.target===E.shadowParent)&&TYe(E.delta,x)})[0];if(_&&_.should){v.cancelable&&v.preventDefault();return}if(!_){var S=(a.current.shards||[]).map(nV).filter(Boolean).filter(function(E){return E.contains(v.target)}),C=S.length>0?o(v,S[0]):!a.current.noIsolation;C&&v.cancelable&&v.preventDefault()}}},[]),c=T.useCallback(function(b,v,x,_){var S={name:b,delta:v,target:x,should:_,shadowParent:NYe(x)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(C){return C!==S})},1)},[]),u=T.useCallback(function(b){n.current=NS(b),r.current=void 0},[]),d=T.useCallback(function(b){c(b.type,tV(b),b.target,o(b,e.lockRef.current))},[]),h=T.useCallback(function(b){c(b.type,NS(b),b.target,o(b,e.lockRef.current))},[]);T.useEffect(function(){return _g.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,wg),document.addEventListener("touchmove",l,wg),document.addEventListener("touchstart",u,wg),function(){_g=_g.filter(function(b){return b!==s}),document.removeEventListener("wheel",l,wg),document.removeEventListener("touchmove",l,wg),document.removeEventListener("touchstart",u,wg)}},[]);var m=e.removeScrollBar,y=e.inert;return T.createElement(T.Fragment,null,y?T.createElement(s,{styles:AYe(i)}):null,m?T.createElement(vYe,{gapMode:e.gapMode}):null)}function NYe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const MYe=aYe(Rae,IYe);var m1=T.forwardRef(function(e,t){return T.createElement(wT,Kc({},e,{ref:t,sideCar:MYe}))});m1.classNames=wT.classNames;var jYe=[" ","Enter","ArrowUp","ArrowDown"],PYe=[" ","Enter"],Zp="Select",[_T,ST,OYe]=gKe(Zp),[Ry,clt]=Ds(Zp,[OYe,mae]),CT=mae(),[DYe,Th]=Ry(Zp),[FYe,LYe]=Ry(Zp),Pae=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:m,form:y}=e,b=CT(t),[v,x]=T.useState(null),[_,S]=T.useState(null),[C,E]=T.useState(!1),A=ky(c),[R,N]=fc({prop:r,defaultProp:i??!1,onChange:s,caller:Zp}),[M,P]=fc({prop:a,defaultProp:o,onChange:l,caller:Zp}),L=T.useRef(null),O=v?y||!!v.closest("form"):!0,[V,F]=T.useState(new Set),J=Array.from(V).map(U=>U.props.value).join(";");return p.jsx(zKe,{...b,children:p.jsxs(DYe,{required:m,scope:t,trigger:v,onTriggerChange:x,valueNode:_,onValueNodeChange:S,valueNodeHasChildren:C,onValueNodeHasChildrenChange:E,contentId:Ys(),value:M,onValueChange:P,open:R,onOpenChange:N,dir:A,triggerPointerDownPosRef:L,disabled:h,children:[p.jsx(_T.Provider,{scope:t,children:p.jsx(FYe,{scope:e.__scopeSelect,onNativeOptionAdd:T.useCallback(U=>{F(G=>new Set(G).add(U))},[]),onNativeOptionRemove:T.useCallback(U=>{F(G=>{const $=new Set(G);return $.delete(U),$})},[]),children:n})}),O?p.jsxs(noe,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:U=>P(U.target.value),disabled:h,form:y,children:[M===void 0?p.jsx("option",{value:""}):null,Array.from(V)]},J):null]})})};Pae.displayName=Zp;var Oae="SelectTrigger",Dae=T.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,s=CT(n),a=Th(Oae,n),o=a.disabled||r,l=En(t,a.onTriggerChange),c=ST(n),u=T.useRef("touch"),[d,h,m]=ioe(b=>{const v=c().filter(S=>!S.disabled),x=v.find(S=>S.value===a.value),_=soe(v,b,x);_!==void 0&&a.onValueChange(_.value)}),y=b=>{o||(a.onOpenChange(!0),m()),b&&(a.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return p.jsx(UKe,{asChild:!0,...s,children:p.jsx(hs.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":roe(a.value)?"":void 0,...i,ref:l,onClick:Vt(i.onClick,b=>{b.currentTarget.focus(),u.current!=="mouse"&&y(b)}),onPointerDown:Vt(i.onPointerDown,b=>{u.current=b.pointerType;const v=b.target;v.hasPointerCapture(b.pointerId)&&v.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(y(b),b.preventDefault())}),onKeyDown:Vt(i.onKeyDown,b=>{const v=d.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&h(b.key),!(v&&b.key===" ")&&jYe.includes(b.key)&&(y(),b.preventDefault())})})})});Dae.displayName=Oae;var Fae="SelectValue",Lae=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:a="",...o}=e,l=Th(Fae,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=En(t,l.onValueNodeChange);return Yi(()=>{c(u)},[c,u]),p.jsx(hs.span,{...o,ref:d,style:{pointerEvents:"none"},children:roe(l.value)?p.jsx(p.Fragment,{children:a}):s})});Lae.displayName=Fae;var BYe="SelectIcon",Bae=T.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return p.jsx(hs.span,{"aria-hidden":!0,...i,ref:t,children:r||"▼"})});Bae.displayName=BYe;var $Ye="SelectPortal",$ae=e=>p.jsx(Cae,{asChild:!0,...e});$ae.displayName=$Ye;var Xp="SelectContent",zae=T.forwardRef((e,t)=>{const n=Th(Xp,e.__scopeSelect),[r,i]=T.useState();if(Yi(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Vo.createPortal(p.jsx(Uae,{scope:e.__scopeSelect,children:p.jsx(_T.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),s):null}return p.jsx(qae,{...e,ref:t})});zae.displayName=Xp;var Xl=10,[Uae,Ah]=Ry(Xp),zYe="SelectContentImpl",UYe=ou("SelectContent.RemoveScroll"),qae=T.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:b,avoidCollisions:v,...x}=e,_=Th(Xp,n),[S,C]=T.useState(null),[E,A]=T.useState(null),R=En(t,je=>C(je)),[N,M]=T.useState(null),[P,L]=T.useState(null),O=ST(n),[V,F]=T.useState(!1),J=T.useRef(!1);T.useEffect(()=>{if(S)return xT(S)},[S]),bT();const U=T.useCallback(je=>{const[Ne,...Ce]=O().map(qe=>qe.ref.current),[Ue]=Ce.slice(-1),et=document.activeElement;for(const qe of je)if(qe===et||(qe==null||qe.scrollIntoView({block:"nearest"}),qe===Ne&&E&&(E.scrollTop=0),qe===Ue&&E&&(E.scrollTop=E.scrollHeight),qe==null||qe.focus(),document.activeElement!==et))return},[O,E]),G=T.useCallback(()=>U([N,S]),[U,N,S]);T.useEffect(()=>{V&&G()},[V,G]);const{onOpenChange:$,triggerPointerDownPosRef:ne}=_;T.useEffect(()=>{if(S){let je={x:0,y:0};const Ne=Ue=>{var et,qe;je={x:Math.abs(Math.round(Ue.pageX)-(((et=ne.current)==null?void 0:et.x)??0)),y:Math.abs(Math.round(Ue.pageY)-(((qe=ne.current)==null?void 0:qe.y)??0))}},Ce=Ue=>{je.x<=10&&je.y<=10?Ue.preventDefault():S.contains(Ue.target)||$(!1),document.removeEventListener("pointermove",Ne),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",Ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",Ce,{capture:!0})}}},[S,$,ne]),T.useEffect(()=>{const je=()=>$(!1);return window.addEventListener("blur",je),window.addEventListener("resize",je),()=>{window.removeEventListener("blur",je),window.removeEventListener("resize",je)}},[$]);const[H,te]=ioe(je=>{const Ne=O().filter(et=>!et.disabled),Ce=Ne.find(et=>et.ref.current===document.activeElement),Ue=soe(Ne,je,Ce);Ue&&setTimeout(()=>Ue.ref.current.focus())}),ee=T.useCallback((je,Ne,Ce)=>{const Ue=!J.current&&!Ce;(_.value!==void 0&&_.value===Ne||Ue)&&(M(je),Ue&&(J.current=!0))},[_.value]),se=T.useCallback(()=>S==null?void 0:S.focus(),[S]),he=T.useCallback((je,Ne,Ce)=>{const Ue=!J.current&&!Ce;(_.value!==void 0&&_.value===Ne||Ue)&&L(je)},[_.value]),ce=r==="popper"?Pj:Vae,Me=ce===Pj?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:b,avoidCollisions:v}:{};return p.jsx(Uae,{scope:n,content:S,viewport:E,onViewportChange:A,itemRefCallback:ee,selectedItem:N,onItemLeave:se,itemTextRefCallback:he,focusSelectedItem:G,selectedItemText:P,position:r,isPositioned:V,searchRef:H,children:p.jsx(m1,{as:UYe,allowPinchZoom:!0,children:p.jsx(dae,{asChild:!0,trapped:_.open,onMountAutoFocus:je=>{je.preventDefault()},onUnmountAutoFocus:Vt(i,je=>{var Ne;(Ne=_.trigger)==null||Ne.focus({preventScroll:!0}),je.preventDefault()}),children:p.jsx(cae,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:je=>je.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:p.jsx(ce,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:je=>je.preventDefault(),...x,...Me,onPlaced:()=>F(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Vt(x.onKeyDown,je=>{const Ne=je.ctrlKey||je.altKey||je.metaKey;if(je.key==="Tab"&&je.preventDefault(),!Ne&&je.key.length===1&&te(je.key),["ArrowUp","ArrowDown","Home","End"].includes(je.key)){let Ue=O().filter(et=>!et.disabled).map(et=>et.ref.current);if(["ArrowUp","End"].includes(je.key)&&(Ue=Ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(je.key)){const et=je.target,qe=Ue.indexOf(et);Ue=Ue.slice(qe+1)}setTimeout(()=>U(Ue)),je.preventDefault()}})})})})})})});qae.displayName=zYe;var qYe="SelectItemAlignedPosition",Vae=T.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,s=Th(Xp,n),a=Ah(Xp,n),[o,l]=T.useState(null),[c,u]=T.useState(null),d=En(t,R=>u(R)),h=ST(n),m=T.useRef(!1),y=T.useRef(!0),{viewport:b,selectedItem:v,selectedItemText:x,focusSelectedItem:_}=a,S=T.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&c&&b&&v&&x){const R=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),M=s.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(s.dir!=="rtl"){const et=P.left-N.left,qe=M.left-et,Re=R.left-qe,K=R.width+Re,ge=Math.max(K,N.width),Ae=window.innerWidth-Xl,le=ew(qe,[Xl,Math.max(Xl,Ae-ge)]);o.style.minWidth=K+"px",o.style.left=le+"px"}else{const et=N.right-P.right,qe=window.innerWidth-M.right-et,Re=window.innerWidth-R.right-qe,K=R.width+Re,ge=Math.max(K,N.width),Ae=window.innerWidth-Xl,le=ew(qe,[Xl,Math.max(Xl,Ae-ge)]);o.style.minWidth=K+"px",o.style.right=le+"px"}const L=h(),O=window.innerHeight-Xl*2,V=b.scrollHeight,F=window.getComputedStyle(c),J=parseInt(F.borderTopWidth,10),U=parseInt(F.paddingTop,10),G=parseInt(F.borderBottomWidth,10),$=parseInt(F.paddingBottom,10),ne=J+U+V+$+G,H=Math.min(v.offsetHeight*5,ne),te=window.getComputedStyle(b),ee=parseInt(te.paddingTop,10),se=parseInt(te.paddingBottom,10),he=R.top+R.height/2-Xl,ce=O-he,Me=v.offsetHeight/2,je=v.offsetTop+Me,Ne=J+U+je,Ce=ne-Ne;if(Ne<=he){const et=L.length>0&&v===L[L.length-1].ref.current;o.style.bottom="0px";const qe=c.clientHeight-b.offsetTop-b.offsetHeight,Re=Math.max(ce,Me+(et?se:0)+qe+G),K=Ne+Re;o.style.height=K+"px"}else{const et=L.length>0&&v===L[0].ref.current;o.style.top="0px";const Re=Math.max(he,J+b.offsetTop+(et?ee:0)+Me)+Ce;o.style.height=Re+"px",b.scrollTop=Ne-he+b.offsetTop}o.style.margin=`${Xl}px 0`,o.style.minHeight=H+"px",o.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,o,c,b,v,x,s.dir,r]);Yi(()=>S(),[S]);const[C,E]=T.useState();Yi(()=>{c&&E(window.getComputedStyle(c).zIndex)},[c]);const A=T.useCallback(R=>{R&&y.current===!0&&(S(),_==null||_(),y.current=!1)},[S,_]);return p.jsx(HYe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:A,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:p.jsx(hs.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Vae.displayName=qYe;var VYe="SelectPopperPosition",Pj=T.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Xl,...s}=e,a=CT(n);return p.jsx(qKe,{...a,...s,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Pj.displayName=VYe;var[HYe,H6]=Ry(Xp,{}),Oj="SelectViewport",Hae=T.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,s=Ah(Oj,n),a=H6(Oj,n),o=En(t,s.onViewportChange),l=T.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(_T.Slot,{scope:n,children:p.jsx(hs.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Vt(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&d){const m=Math.abs(l.current-u.scrollTop);if(m>0){const y=window.innerHeight-Xl*2,b=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),x=Math.max(b,v);if(x<y){const _=x+m,S=Math.min(y,_),C=_-S;d.style.height=S+"px",d.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});Hae.displayName=Oj;var Wae="SelectGroup",[WYe,GYe]=Ry(Wae),KYe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Ys();return p.jsx(WYe,{scope:n,id:i,children:p.jsx(hs.div,{role:"group","aria-labelledby":i,...r,ref:t})})});KYe.displayName=Wae;var Gae="SelectLabel",YYe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=GYe(Gae,n);return p.jsx(hs.div,{id:i.id,...r,ref:t})});YYe.displayName=Gae;var Sk="SelectItem",[ZYe,Kae]=Ry(Sk),Yae=T.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...a}=e,o=Th(Sk,n),l=Ah(Sk,n),c=o.value===r,[u,d]=T.useState(s??""),[h,m]=T.useState(!1),y=En(t,_=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,_,r,i)}),b=Ys(),v=T.useRef("touch"),x=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(ZYe,{scope:n,value:r,disabled:i,textId:b,isSelected:c,onItemTextChange:T.useCallback(_=>{d(S=>S||((_==null?void 0:_.textContent)??"").trim())},[]),children:p.jsx(_T.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:p.jsx(hs.div,{role:"option","aria-labelledby":b,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:y,onFocus:Vt(a.onFocus,()=>m(!0)),onBlur:Vt(a.onBlur,()=>m(!1)),onClick:Vt(a.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:Vt(a.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:Vt(a.onPointerDown,_=>{v.current=_.pointerType}),onPointerMove:Vt(a.onPointerMove,_=>{var S;v.current=_.pointerType,i?(S=l.onItemLeave)==null||S.call(l):v.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Vt(a.onPointerLeave,_=>{var S;_.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:Vt(a.onKeyDown,_=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&_.key===" "||(PYe.includes(_.key)&&x(),_.key===" "&&_.preventDefault())})})})})});Yae.displayName=Sk;var Av="SelectItemText",Zae=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...s}=e,a=Th(Av,n),o=Ah(Av,n),l=Kae(Av,n),c=LYe(Av,n),[u,d]=T.useState(null),h=En(t,x=>d(x),l.onItemTextChange,x=>{var _;return(_=o.itemTextRefCallback)==null?void 0:_.call(o,x,l.value,l.disabled)}),m=u==null?void 0:u.textContent,y=T.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:b,onNativeOptionRemove:v}=c;return Yi(()=>(b(y),()=>v(y)),[b,v,y]),p.jsxs(p.Fragment,{children:[p.jsx(hs.span,{id:l.textId,...s,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Vo.createPortal(s.children,a.valueNode):null]})});Zae.displayName=Av;var Xae="SelectItemIndicator",Jae=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Kae(Xae,n).isSelected?p.jsx(hs.span,{"aria-hidden":!0,...r,ref:t}):null});Jae.displayName=Xae;var Dj="SelectScrollUpButton",Qae=T.forwardRef((e,t)=>{const n=Ah(Dj,e.__scopeSelect),r=H6(Dj,e.__scopeSelect),[i,s]=T.useState(!1),a=En(t,r.onScrollButtonChange);return Yi(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?p.jsx(toe,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});Qae.displayName=Dj;var Fj="SelectScrollDownButton",eoe=T.forwardRef((e,t)=>{const n=Ah(Fj,e.__scopeSelect),r=H6(Fj,e.__scopeSelect),[i,s]=T.useState(!1),a=En(t,r.onScrollButtonChange);return Yi(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?p.jsx(toe,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});eoe.displayName=Fj;var toe=T.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,s=Ah("SelectScrollButton",n),a=T.useRef(null),o=ST(n),l=T.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),Yi(()=>{var u;const c=o().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),p.jsx(hs.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Vt(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Vt(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Vt(i.onPointerLeave,()=>{l()})})}),XYe="SelectSeparator",JYe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return p.jsx(hs.div,{"aria-hidden":!0,...r,ref:t})});JYe.displayName=XYe;var Lj="SelectArrow",QYe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=CT(n),s=Th(Lj,n),a=Ah(Lj,n);return s.open&&a.position==="popper"?p.jsx(VKe,{...i,...r,ref:t}):null});QYe.displayName=Lj;var eZe="SelectBubbleInput",noe=T.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=T.useRef(null),s=En(r,i),a=vT(t);return T.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&u){const d=new Event("change",{bubbles:!0});u.call(o,t),o.dispatchEvent(d)}},[a,t]),p.jsx(hs.select,{...n,style:{...kae,...n.style},ref:s,defaultValue:t})});noe.displayName=eZe;function roe(e){return e===""||e===void 0}function ioe(e){const t=xi(e),n=T.useRef(""),r=T.useRef(0),i=T.useCallback(a=>{const o=n.current+a;t(o),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),s=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function soe(e,t,n){const i=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=tZe(e,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function tZe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var nZe=Pae,rZe=Dae,iZe=Lae,sZe=Bae,aZe=$ae,oZe=zae,lZe=Hae,cZe=Yae,uZe=Zae,dZe=Jae,fZe=Qae,hZe=eoe;function g1({...e}){return p.jsx(nZe,{"data-slot":"select",...e})}function y1({...e}){return p.jsx(iZe,{"data-slot":"select-value",...e})}function b1({className:e,size:t="default",children:n,...r}){return p.jsxs(rZe,{"data-slot":"select-trigger","data-size":t,className:ft("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,p.jsx(sZe,{asChild:!0,children:p.jsx(yu,{className:"size-4 opacity-50"})})]})}function v1({className:e,children:t,position:n="popper",...r}){return p.jsx(aZe,{children:p.jsxs(oZe,{"data-slot":"select-content",className:ft("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[p.jsx(pZe,{}),p.jsx(lZe,{className:ft("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),p.jsx(mZe,{})]})})}function ch({className:e,children:t,...n}){return p.jsxs(cZe,{"data-slot":"select-item",className:ft("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[p.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:p.jsx(dZe,{children:p.jsx(Ka,{className:"size-4"})})}),p.jsx(uZe,{children:t})]})}function pZe({className:e,...t}){return p.jsx(fZe,{"data-slot":"select-scroll-up-button",className:ft("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(hh,{className:"size-4"})})}function mZe({className:e,...t}){return p.jsx(hZe,{"data-slot":"select-scroll-down-button",className:ft("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(yu,{className:"size-4"})})}var gZe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yZe=gZe.reduce((e,t)=>{const n=ou(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),bZe="Label",aoe=T.forwardRef((e,t)=>p.jsx(yZe.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));aoe.displayName=bZe;var vZe=aoe;function en({className:e,...t}){return p.jsx(vZe,{"data-slot":"label",className:ft("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const Ss=({field:e,className:t})=>e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:`text-xs text-destructive mt-1 block ${t||""}`,children:e.state.meta.errors.map(r=>typeof r=="string"?r:typeof r=="object"&&r!==null&&"message"in r&&typeof r.message=="string"?r.message:(console.warn("[GlobalFieldMetaMessages] Encountered an unexpected error structure:",r),"Validation error")).join(", ")}):null,xZe=ho.map(e=>e.value),MS=Ze({keyName:$e().min(1,"Key Name is required."),providerType:jl(xZe,{errorMap:()=>({message:"Provider Type is required."})}),keyValue:$e().min(1,"API Key Value is required.")}),ooe=({initialProviderType:e=null,initialName:t="",initialValue:n="",onSave:r,onCancel:i,disabled:s=!1,className:a})=>{const o=T.useRef(null),l=ea({defaultValues:{keyName:t,providerType:e,keyValue:n},validators:{onChangeAsync:MS,onChangeAsyncDebounceMs:500},onSubmit:async({value:u})=>{await r(u.keyName,u.providerType,u.keyValue)}});T.useEffect(()=>{l.reset({keyName:t,providerType:e,keyValue:n})},[t,n,e,l]);const c=(u,d)=>{var b,v;if(!u)return;const h=(b=ho.find(x=>x.value===u))==null?void 0:b.label,m=l.getFieldValue("providerType"),y=(v=ho.find(x=>x.value===m))==null?void 0:v.label;h&&(!(d!=null&&d.trim())||d===y)&&l.setFieldValue("keyName",h),requestAnimationFrame(()=>{var x;(x=o.current)==null||x.focus()})};return p.jsxs("form",{onSubmit:u=>{u.preventDefault(),u.stopPropagation(),l.handleSubmit()},className:ft("space-y-6",a),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsx(l.Field,{name:"providerType",validators:{onChange:MS.shape.providerType},children:u=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:u.name,children:"Provider Type"}),p.jsxs(g1,{value:u.state.value??"",onValueChange:d=>{const h=d;u.handleChange(h),u.handleBlur(),c(h,l.getFieldValue("keyName"))},disabled:s||l.state.isSubmitting,children:[p.jsx(b1,{id:u.name,children:p.jsx(y1,{placeholder:"Select Provider Type"})}),p.jsx(v1,{children:ho.map(d=>p.jsx(ch,{value:d.value,children:d.label},d.value))})]}),p.jsx(Ss,{field:u})]})}),p.jsx(l.Field,{name:"keyName",validators:{onChange:MS.shape.keyName},children:u=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:u.name,children:"Key Name"}),p.jsx(pr,{id:u.name,value:u.state.value??"",onChange:d=>u.handleChange(d.target.value),onBlur:u.handleBlur,placeholder:"e.g., My OpenAI Key",disabled:s||l.state.isSubmitting}),p.jsx(Ss,{field:u})]})}),p.jsx(l.Field,{name:"keyValue",validators:{onChange:MS.shape.keyValue},children:u=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:u.name,children:"API Key Value"}),p.jsx(pr,{ref:o,id:u.name,type:"password",value:u.state.value??"",onChange:d=>u.handleChange(d.target.value),onBlur:u.handleBlur,placeholder:"Enter your API key",disabled:s||l.state.isSubmitting,autoComplete:"new-password"}),p.jsx(Ss,{field:u})]})})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Tt,{variant:"ghost",size:"sm",onClick:i,disabled:s||l.state.isSubmitting,type:"button",children:[p.jsx(Ya,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsx(l.Subscribe,{selector:u=>[u.canSubmit,u.isSubmitting,u.isValidating,u.isValid],children:([u,d,h,m])=>p.jsxs(Tt,{type:"submit",size:"sm",disabled:s||!u||d||h||!m,children:[(d||h)&&p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(ph,{className:"h-4 w-4 mr-1"}),d||h?"Saving...":"Save API Key"]})})]})]})},wZe=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:i,disabled:s=!1})=>{var c;const a=u=>{r(u==="none"?null:u)},o=(c=i.find(u=>u.id===n))==null?void 0:c.name,l=n?o||`Key ID: ${n.substring(0,6)}...`:"None";return p.jsxs(g1,{value:n??"none",onValueChange:a,disabled:s||i.length===0,children:[p.jsx(b1,{className:ft("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:p.jsx(y1,{asChild:!0,children:p.jsxs("div",{className:"flex items-center overflow-hidden",children:[p.jsx(Qv,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),p.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&p.jsxs("span",{className:"mr-1",children:[t,":"]}),i.length===0?p.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),p.jsxs(v1,{className:"bg-popover border-border text-popover-foreground",children:[p.jsx(ch,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),i.map(u=>p.jsx(ch,{value:u.id,children:u.name||`Key ID: ${u.id.substring(0,6)}...`},u.id))]})]})};function cw({form:e,name:t,label:n,type:r="text",placeholder:i,disabled:s,wrapperClassName:a,className:o,...l}){return p.jsx(e.Field,{name:t,children:c=>{const u=typeof c.state.value=="string"||typeof c.state.value=="number"?String(c.state.value):"";return p.jsxs("div",{className:ft("space-y-1.5",a),children:[p.jsx(en,{htmlFor:c.name,className:"text-sm",children:n}),p.jsx(pr,{id:c.name,name:c.name,type:r,value:u,onBlur:c.handleBlur,onChange:d=>c.handleChange(d.target.value),placeholder:i,disabled:s??c.form.state.isSubmitting,className:ft(o,c.state.meta.errors.length?"border-destructive":""),...l}),p.jsx(Ss,{field:c})]})}})}function Kv({form:e,name:t,label:n,options:r,placeholder:i,disabled:s,wrapperClassName:a,triggerClassName:o,contentClassName:l,...c}){return console.log("SelectField",t),p.jsx(e.Field,{name:t,children:u=>{const d=u.state.value!==null&&u.state.value!==void 0?String(u.state.value):"";return p.jsxs("div",{className:ft("space-y-1.5",a),children:[p.jsx(en,{htmlFor:u.name,className:"text-sm",children:n}),p.jsxs(g1,{value:d,onValueChange:h=>u.handleChange(h),disabled:s??u.form.state.isSubmitting,...c,children:[p.jsx(b1,{id:u.name,onBlur:u.handleBlur,className:ft(o,u.state.meta.errors.length?"border-destructive":""),children:p.jsx(y1,{placeholder:i})}),p.jsx(v1,{className:l,children:r.map(h=>p.jsx(ch,{value:String(h.value),disabled:h.disabled,children:h.label},h.value))})]}),p.jsx(Ss,{field:u})]})}})}var _Ze=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],loe=_Ze.reduce((e,t)=>{const n=ou(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),kT="Switch",[SZe,ult]=Ds(kT),[CZe,kZe]=SZe(kT),coe=T.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:l="on",onCheckedChange:c,form:u,...d}=e,[h,m]=T.useState(null),y=En(t,S=>m(S)),b=T.useRef(!1),v=h?u||!!h.closest("form"):!0,[x,_]=fc({prop:i,defaultProp:s??!1,onChange:c,caller:kT});return p.jsxs(CZe,{scope:n,checked:x,disabled:o,children:[p.jsx(loe.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":hoe(x),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:y,onClick:Vt(e.onClick,S=>{_(C=>!C),v&&(b.current=S.isPropagationStopped(),b.current||S.stopPropagation())})}),v&&p.jsx(foe,{control:h,bubbles:!b.current,name:r,value:l,checked:x,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});coe.displayName=kT;var uoe="SwitchThumb",doe=T.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=kZe(uoe,n);return p.jsx(loe.span,{"data-state":hoe(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});doe.displayName=uoe;var EZe="SwitchBubbleInput",foe=T.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...i},s)=>{const a=T.useRef(null),o=En(a,s),l=vT(n),c=ry(t);return T.useEffect(()=>{const u=a.current;if(!u)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&m){const y=new Event("click",{bubbles:r});m.call(u,n),u.dispatchEvent(y)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});foe.displayName=EZe;function hoe(e){return e?"checked":"unchecked"}var TZe=coe,AZe=doe;function au({className:e,...t}){return p.jsx(TZe,{"data-slot":"switch",className:ft("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(AZe,{"data-slot":"switch-thumb",className:ft("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function pp({form:e,name:t,label:n,description:r,disabled:i,wrapperClassName:s,className:a,labelClassName:o,...l}){return p.jsx(e.Field,{name:t,children:c=>{const u=typeof c.state.value=="boolean"?c.state.value:!1;return p.jsxs("div",{className:ft("space-y-1.5",s),children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(en,{htmlFor:c.name,className:ft("text-sm font-medium leading-none cursor-pointer",o),children:n}),p.jsx(au,{id:c.name,name:c.name,checked:u,onCheckedChange:d=>c.handleChange(d),onBlur:c.handleBlur,disabled:i??c.form.state.isSubmitting,className:ft(a,c.state.meta.errors.length?"border-destructive":""),...l})]}),r&&p.jsx("p",{className:"text-xs text-muted-foreground pt-1",children:r}),p.jsx(Ss,{field:c})]})}})}const RZe=ho.map(e=>e.value),IZe=Ze({name:$e().min(1,"Provider Name is required."),type:jl(RZe,{errorMap:()=>({message:"Provider Type is required."})}),isEnabled:kr(),apiKeyId:$e().nullable(),baseURL:$e().url().nullable().or(Pn("")),autoFetchModels:kr()}).refine(e=>Q2(e.type)?!(!e.baseURL||e.baseURL.trim()===""):!0,{message:"Base URL is required and must be a valid URL for this provider type.",path:["baseURL"]}).refine(e=>p0(e.type)?!!e.apiKeyId:!0,{message:"API Key is required for this provider type.",path:["apiKeyId"]}),NZe=ho.map(e=>({value:e.value,label:e.label})),poe=({initialData:e,onSubmit:t,onChange:n,onCancel:r,apiKeys:i,isSavingExt:s=!1,disabled:a=!1,className:o})=>{var v;const l=ea({defaultValues:{name:(e==null?void 0:e.name)||"",type:(e==null?void 0:e.type)||((v=ho[0])==null?void 0:v.value),isEnabled:(e==null?void 0:e.isEnabled)??!0,apiKeyId:(e==null?void 0:e.apiKeyId)||null,baseURL:(e==null?void 0:e.baseURL)||null,autoFetchModels:(e==null?void 0:e.autoFetchModels)??!1},validators:{onChangeAsync:IZe,onChangeAsyncDebounceMs:500},onSubmit:async({value:x})=>{const _={...x,baseURL:(x.baseURL===null||typeof x.baseURL=="string"&&x.baseURL.trim()==="")&&!Q2(x.type)?null:x.baseURL};await t(_)}}),c=T.useRef(l.state.values);T.useEffect(()=>{const x=l.store.subscribe(()=>{const _=l.state.values,S=c.current;if(n&&S)for(const C in _){const E=C;_[E]!==S[E]&&n(E,_[E])}c.current={..._}});return l.state.values!==c.current&&(c.current=l.state.values),x},[l,n]),T.useEffect(()=>{var S,C;const x=(e==null?void 0:e.type)||((S=ho[0])==null?void 0:S.value),_={name:(e==null?void 0:e.name)||((C=ho.find(E=>E.value===x))==null?void 0:C.label)||"",type:x,isEnabled:(e==null?void 0:e.isEnabled)??!0,apiKeyId:(e==null?void 0:e.apiKeyId)||null,baseURL:(e==null?void 0:e.baseURL)||null,autoFetchModels:(e==null?void 0:e.autoFetchModels)??Ep(x)};l.reset(_),c.current=_},[e]);const u=l.state.values.type,d=p0(u??null),h=Q2(u??null),m=Ep(u??null),y=T.useCallback(x=>{var S,C;if(!x)return;const _=l.state.values.type;if(x!==_){l.setFieldValue("apiKeyId",null),l.setFieldValue("baseURL",null),l.setFieldValue("autoFetchModels",Ep(x));const E=(S=ho.find(N=>N.value===x))==null?void 0:S.label,A=(C=ho.find(N=>N.value===_))==null?void 0:C.label,R=l.state.values.name;E&&(!(R!=null&&R.trim())||R===A)&&l.setFieldValue("name",E)}},[l]);T.useEffect(()=>{const x=l.state.values.type;x!==void 0&&y(x)},[l.state.values.type,y]);const b=(i||[]).filter(x=>!u||x.providerId===u);return p.jsxs("form",{onSubmit:x=>{x.preventDefault(),x.stopPropagation(),l.handleSubmit()},className:ft("space-y-4 border rounded-md p-4 bg-card shadow-sm",o),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-3",children:[p.jsx(Kv,{form:l,name:"type",label:"Provider Type",options:NZe,disabled:a||s,placeholder:"Select Type",wrapperClassName:"md:col-span-1"}),p.jsx(cw,{form:l,name:"name",label:"Provider Name",placeholder:"e.g., My Ollama",disabled:a||s,"aria-label":"Provider Name",wrapperClassName:"md:col-span-1"}),d&&p.jsx(l.Field,{name:"apiKeyId",children:x=>p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(en,{htmlFor:`${x.name}-trigger`,children:"API Key"})," ",p.jsx(wZe,{selectedKeyId:x.state.value??null,onKeySelected:_=>{x.handleChange(_),x.handleBlur()},apiKeys:b,disabled:a||s||!u}),p.jsx(Ss,{field:x})]})}),h&&p.jsx(cw,{form:l,name:"baseURL",label:"Base URL",placeholder:"e.g., http://localhost:11434",type:"url",disabled:a||s||!u,wrapperClassName:"md:col-span-2"}),m&&p.jsx(pp,{form:l,name:"autoFetchModels",label:"Auto-Fetch Models",description:"Automatically fetch and update the list of available models from this provider.",disabled:a||s||!u,wrapperClassName:"md:col-span-2"}),p.jsx(pp,{form:l,name:"isEnabled",label:"Enable Provider",description:"Allow this provider to be used for generating responses.",disabled:a||s,wrapperClassName:"md:col-span-2"})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Tt,{variant:"ghost",size:"sm",onClick:r,disabled:a||s,type:"button",children:[p.jsx(Ya,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsx(l.Subscribe,{selector:x=>[x.canSubmit,x.isSubmitting,x.isValidating,x.isValid],children:([x,_,S,C])=>p.jsxs(Tt,{type:"submit",size:"sm",disabled:a||s||!x||_||!C||S,children:[(s||_||S)&&p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(ph,{className:"h-4 w-4 mr-1"})," ",s||_||S?"Saving...":e!=null&&e.name?"Save Changes":"Add Provider"]})})]})]})},moe=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:i="",initialApiKeyId:s=null})=>{const[a,o]=T.useState(!1),[l,c]=T.useState({name:i,type:r,isEnabled:!0,apiKeyId:s,baseURL:null,autoFetchModels:Ep(r)});T.useEffect(()=>{c(h=>({...h,name:i||h.name||"",type:r||h.type||null,apiKeyId:s||h.apiKeyId||null,autoFetchModels:!1}))},[i,r,s]);const u=T.useCallback((h,m)=>new Promise(y=>{c(b=>{var _,S;const v={...b,[h]:m},x=b.name||"";if(h==="type"){const C=m,E=(_=ho.find(R=>R.value===b.type))==null?void 0:_.label;v.apiKeyId=null,v.baseURL=null,v.autoFetchModels=C?Ep(C):!1;const A=(S=ho.find(R=>R.value===C))==null?void 0:S.label;if(A&&(!x.trim()||x===E)&&(v.name=A),C&&p0(C)){const R=(e||[]).filter(N=>N.providerId===C);R.length>0&&(v.apiKeyId=R[0].id)}}return v}),y(void 0)}),[e]),d=T.useCallback(async()=>{var h,m;if(!((h=l.name)!=null&&h.trim())||!l.type){De.error("Provider Name and Type are required.");return}o(!0);try{const y=l.type,b=l.autoFetchModels??Ep(y),v={name:l.name.trim(),type:y,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((m=l.baseURL)==null?void 0:m.trim())||null,enabledModels:null,autoFetchModels:b,fetchedModels:null,modelsLastFetchedAt:null};await t(v),n()}catch(y){console.error("Failed to add provider (from form component):",y)}finally{o(!1)}},[l,t,n]);return p.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),p.jsx(poe,{initialData:l,onSubmit:d,onCancel:n,onChange:u,apiKeys:e,disabled:a})]})},id=lt.forwardRef(({className:e,href:t,children:n,...r},i)=>p.jsx("a",{ref:i,href:t,target:"_blank",rel:"noopener noreferrer",className:ft("font-medium text-primary underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r,children:n}));id.displayName="Lnk";const MZe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})},jZe=Qj("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function $f({className:e,variant:t,asChild:n=!1,...r}){const i=n?oH:"span";return p.jsx(i,{"data-slot":"badge",className:ft(jZe({variant:t}),e),...r})}const PZe=()=>{const[e,t]=T.useState(!1);T.useEffect(()=>{t(!0)},[]);const n={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},r={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},i=[{word:"LiteChat",color:"bg-gradient-to-tr from-lime-500 via-amber-400 to-red-600 bg-clip-text text-transparent"},{word:"library",color:"text-emerald-500"},{word:"browser",color:"text-violet-500"},{word:"local",color:"text-amber-500"},{word:"remote",color:"text-sky-500"},{word:"providers",color:"text-purple-500"},{word:" AI ",color:"bg-gradient-to-b from-amber-300 to-rose-700 bg-clip-text text-transparent"},{word:"Open Source",color:"bg-gradient-to-r from-lime-500 to-yellow-500 bg-clip-text text-transparent"}],s=o=>{let l=[o];return i.forEach(({word:c,color:u})=>{l=l.reduce((d,h)=>typeof h!="string"?(d.push(h),d):(h.split(new RegExp(`(${c})`,"gi")).forEach((y,b)=>{y.toLowerCase()===c.toLowerCase()?d.push(p.jsx("span",{className:`${u} font-medium`,children:y},`${y}-${b}`)):d.push(y)}),d),[])}),l=l.reduce((c,u,d)=>{if(typeof u!="string")return c.push(u),c;const h=/(\([^)]*\))/g;return u.split(h).forEach((y,b)=>{h.test(y)?c.push(p.jsx("span",{className:"text-sm text-muted",children:y},`paren-${d}-${b}`)):c.push(y)}),c},[]),l},a=["Oh, hey?! Hi there!! How are you doing!?","Nice of you to pop by to checkout LiteChat!","What'd you mean you don't know what LiteChat is? Oh Boy hey, you in for a treat!","To start with, it's an(other) AI chat app (yes...shocker, right ?) and it's Open Source ! ","But, it is also an extensible library, so you can go on and create your own, AI chat app! With your own functionnalities !","(are AI chat apps the new JS frameworks?)","And cause I might be a wee bit on the reluctant side when it comes to parting with my coins, it doesn't require no servers! It all stays in your browser.","(that means I couldn't snoop on what you do here, even if I wanted to!)","While able to run LLM both local (did I tell you I ain't liking throwing coins out?) and from remote providers","(but sometimes you have to :(..)","To cap things off, there is no fancy/crazy tech involved, I just glued bricks together with AI","(kids call it vibing apparently ^^)","Enough of this interminable babble! Go setup your future chat to prompt your brains out!"];return p.jsxs(Vc.div,{className:"text-center max-w-4xl mx-auto space-y-3 my-6",initial:"hidden",animate:e?"show":"hidden",variants:n,children:[p.jsx("div",{className:"flex justify-center mb-4",children:p.jsxs($f,{variant:"outline",className:"px-3 py-1 bg-black/5 dark:bg-white/10 backdrop-blur-sm border-none",children:[p.jsx(PH,{className:"w-4 h-4 mr-2 text-yellow-500"}),p.jsx("span",{className:"text-sm",children:"Welcome to your future AI chat"})]})}),a.map((o,l)=>p.jsx(Vc.p,{className:`text-sm md:text-base ${l===0?"font-medium":""} leading-relaxed`,variants:r,children:s(o)},l)),p.jsxs(Vc.div,{variants:r,className:"pt-2",children:[p.jsx($f,{className:"bg-gradient-to-r from-violet-600 to-primary border-none",children:"No server required!"}),p.jsx($f,{className:"ml-2 bg-gradient-to-r from-amber-500 to-emerald-500 border-none",children:"100% in-browser"})]})]})};var W6="Progress",G6=100,[OZe,dlt]=Ds(W6),[DZe,FZe]=OZe(W6),goe=T.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=LZe,...a}=e;(i||i===0)&&!rV(i)&&console.error(BZe(`${i}`,"Progress"));const o=rV(i)?i:G6;r!==null&&!iV(r,o)&&console.error($Ze(`${r}`,"Progress"));const l=iV(r,o)?r:null,c=Ck(l)?s(l,o):void 0;return p.jsx(DZe,{scope:n,value:l,max:o,children:p.jsx(nr.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Ck(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":voe(l,o),"data-value":l??void 0,"data-max":o,...a,ref:t})})});goe.displayName=W6;var yoe="ProgressIndicator",boe=T.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=FZe(yoe,n);return p.jsx(nr.div,{"data-state":voe(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});boe.displayName=yoe;function LZe(e,t){return`${Math.round(e/t*100)}%`}function voe(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ck(e){return typeof e=="number"}function rV(e){return Ck(e)&&!isNaN(e)&&e>0}function iV(e,t){return Ck(e)&&!isNaN(e)&&e<=t&&e>=0}function BZe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${G6}\`.`}function $Ze(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${G6} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var xoe=goe,zZe=boe;const uw=T.forwardRef(({className:e,value:t,...n},r)=>p.jsx(xoe,{ref:r,className:ft("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:p.jsx(zZe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));uw.displayName=xoe.displayName;var UZe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dd=UZe.reduce((e,t)=>{const n=ou(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function qZe(e,t){e&&Vo.flushSync(()=>e.dispatchEvent(t))}var VZe="DismissableLayer",Bj="dismissableLayer.update",HZe="dismissableLayer.pointerDownOutside",WZe="dismissableLayer.focusOutside",sV,woe=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_oe=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=T.useContext(woe),[u,d]=T.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=T.useState({}),y=En(t,R=>d(R)),b=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(v),_=u?b.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,C=_>=x,E=YZe(R=>{const N=R.target,M=[...c.branches].some(P=>P.contains(N));!C||M||(i==null||i(R),a==null||a(R),R.defaultPrevented||o==null||o())},h),A=ZZe(R=>{const N=R.target;[...c.branches].some(P=>P.contains(N))||(s==null||s(R),a==null||a(R),R.defaultPrevented||o==null||o())},h);return yP(R=>{_===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&o&&(R.preventDefault(),o()))},h),T.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(sV=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),aV(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=sV)}},[u,h,n,c]),T.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),aV())},[u,c]),T.useEffect(()=>{const R=()=>m({});return document.addEventListener(Bj,R),()=>document.removeEventListener(Bj,R)},[]),p.jsx(Dd.div,{...l,ref:y,style:{pointerEvents:S?C?"auto":"none":void 0,...e.style},onFocusCapture:Vt(e.onFocusCapture,A.onFocusCapture),onBlurCapture:Vt(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Vt(e.onPointerDownCapture,E.onPointerDownCapture)})});_oe.displayName=VZe;var GZe="DismissableLayerBranch",KZe=T.forwardRef((e,t)=>{const n=T.useContext(woe),r=T.useRef(null),i=En(t,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(Dd.div,{...e,ref:i})});KZe.displayName=GZe;function YZe(e,t=globalThis==null?void 0:globalThis.document){const n=xi(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let l=function(){Soe(HZe,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function ZZe(e,t=globalThis==null?void 0:globalThis.document){const n=xi(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&Soe(WZe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function aV(){const e=new CustomEvent(Bj);document.dispatchEvent(e)}function Soe(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?qZe(i,s):i.dispatchEvent(s)}var zM="focusScope.autoFocusOnMount",UM="focusScope.autoFocusOnUnmount",oV={bubbles:!1,cancelable:!0},XZe="FocusScope",Coe=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=T.useState(null),c=xi(i),u=xi(s),d=T.useRef(null),h=En(t,b=>l(b)),m=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(S){if(m.paused||!o)return;const C=S.target;o.contains(C)?d.current=C:Af(d.current,{select:!0})},v=function(S){if(m.paused||!o)return;const C=S.relatedTarget;C!==null&&(o.contains(C)||Af(d.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const E of S)E.removedNodes.length>0&&Af(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",v);const _=new MutationObserver(x);return o&&_.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",v),_.disconnect()}}},[r,o,m.paused]),T.useEffect(()=>{if(o){cV.add(m);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(zM,oV);o.addEventListener(zM,c),o.dispatchEvent(x),x.defaultPrevented||(JZe(rXe(koe(o)),{select:!0}),document.activeElement===b&&Af(o))}return()=>{o.removeEventListener(zM,c),setTimeout(()=>{const x=new CustomEvent(UM,oV);o.addEventListener(UM,u),o.dispatchEvent(x),x.defaultPrevented||Af(b??document.body,{select:!0}),o.removeEventListener(UM,u),cV.remove(m)},0)}}},[o,c,u,m]);const y=T.useCallback(b=>{if(!n&&!r||m.paused)return;const v=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(v&&x){const _=b.currentTarget,[S,C]=QZe(_);S&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&Af(S,{select:!0})):b.shiftKey&&x===S&&(b.preventDefault(),n&&Af(C,{select:!0})):x===_&&b.preventDefault()}},[n,r,m.paused]);return p.jsx(Dd.div,{tabIndex:-1,...a,ref:h,onKeyDown:y})});Coe.displayName=XZe;function JZe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Af(r,{select:t}),document.activeElement!==n)return}function QZe(e){const t=koe(e),n=lV(t,e),r=lV(t.reverse(),e);return[n,r]}function koe(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function lV(e,t){for(const n of e)if(!eXe(n,{upTo:t}))return n}function eXe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function tXe(e){return e instanceof HTMLInputElement&&"select"in e}function Af(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&tXe(e)&&t&&e.select()}}var cV=nXe();function nXe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=uV(e,t),e.unshift(t)},remove(t){var n;e=uV(e,t),(n=e[0])==null||n.resume()}}}function uV(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function rXe(e){return e.filter(t=>t.tagName!=="A")}var iXe="Arrow",Eoe=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return p.jsx(Dd.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});Eoe.displayName=iXe;var sXe=Eoe,K6="Popper",[Toe,Aoe]=Ds(K6),[aXe,Roe]=Toe(K6),Ioe=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return p.jsx(aXe,{scope:t,anchor:r,onAnchorChange:i,children:n})};Ioe.displayName=K6;var Noe="PopperAnchor",Moe=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=Roe(Noe,n),a=T.useRef(null),o=En(t,a);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:p.jsx(Dd.div,{...i,ref:o})});Moe.displayName=Noe;var Y6="PopperContent",[oXe,lXe]=Toe(Y6),joe=T.forwardRef((e,t)=>{var je,Ne,Ce,Ue,et,qe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...b}=e,v=Roe(Y6,n),[x,_]=T.useState(null),S=En(t,Re=>_(Re)),[C,E]=T.useState(null),A=ry(C),R=(A==null?void 0:A.width)??0,N=(A==null?void 0:A.height)??0,M=r+(s!=="center"?"-"+s:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],O=L.length>0,V={padding:P,boundary:L.filter(uXe),altBoundary:O},{refs:F,floatingStyles:J,placement:U,isPositioned:G,middlewareData:$}=EP({strategy:"fixed",placement:M,whileElementsMounted:(...Re)=>kP(...Re,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[TP({mainAxis:i+N,alignmentAxis:a}),l&&AP({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?RP():void 0,...V}),l&&IP({...V}),NP({...V,apply:({elements:Re,rects:K,availableWidth:ge,availableHeight:Ae})=>{const{width:le,height:oe}=K.reference,ie=Re.floating.style;ie.setProperty("--radix-popper-available-width",`${ge}px`),ie.setProperty("--radix-popper-available-height",`${Ae}px`),ie.setProperty("--radix-popper-anchor-width",`${le}px`),ie.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),C&&jP({element:C,padding:o}),dXe({arrowWidth:R,arrowHeight:N}),h&&MP({strategy:"referenceHidden",...V})]}),[ne,H]=Doe(U),te=xi(y);Yi(()=>{G&&(te==null||te())},[G,te]);const ee=(je=$.arrow)==null?void 0:je.x,se=(Ne=$.arrow)==null?void 0:Ne.y,he=((Ce=$.arrow)==null?void 0:Ce.centerOffset)!==0,[ce,Me]=T.useState();return Yi(()=>{x&&Me(window.getComputedStyle(x).zIndex)},[x]),p.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:G?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(Ue=$.transformOrigin)==null?void 0:Ue.x,(et=$.transformOrigin)==null?void 0:et.y].join(" "),...((qe=$.hide)==null?void 0:qe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(oXe,{scope:n,placedSide:ne,onArrowChange:E,arrowX:ee,arrowY:se,shouldHideArrow:he,children:p.jsx(Dd.div,{"data-side":ne,"data-align":H,...b,ref:S,style:{...b.style,animation:G?void 0:"none"}})})})});joe.displayName=Y6;var Poe="PopperArrow",cXe={top:"bottom",right:"left",bottom:"top",left:"right"},Ooe=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=lXe(Poe,r),a=cXe[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(sXe,{...i,ref:n,style:{...i.style,display:"block"}})})});Ooe.displayName=Poe;function uXe(e){return e!==null}var dXe=e=>({name:"transformOrigin",options:e,fn(t){var v,x,_;const{placement:n,rects:r,middlewareData:i}=t,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,u]=Doe(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((x=i.arrow)==null?void 0:x.x)??0)+o/2,m=(((_=i.arrow)==null?void 0:_.y)??0)+l/2;let y="",b="";return c==="bottom"?(y=a?d:`${h}px`,b=`${-l}px`):c==="top"?(y=a?d:`${h}px`,b=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,b=a?d:`${m}px`):c==="left"&&(y=`${r.floating.width+l}px`,b=a?d:`${m}px`),{data:{x:y,y:b}}}});function Doe(e){const[t,n="center"]=e.split("-");return[t,n]}var fXe=Ioe,Foe=Moe,hXe=joe,pXe=Ooe,mXe="Portal",Loe=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=T.useState(!1);Yi(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?Bk.createPortal(p.jsx(Dd.div,{...r,ref:t}),a):null});Loe.displayName=mXe;var ET="Popover",[Boe,flt]=Ds(ET,[Aoe]),x1=Aoe(),[gXe,Rh]=Boe(ET),$oe=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!1}=e,o=x1(t),l=T.useRef(null),[c,u]=T.useState(!1),[d,h]=fc({prop:r,defaultProp:i??!1,onChange:s,caller:ET});return p.jsx(fXe,{...o,children:p.jsx(gXe,{scope:t,contentId:Ys(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:T.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:c,onCustomAnchorAdd:T.useCallback(()=>u(!0),[]),onCustomAnchorRemove:T.useCallback(()=>u(!1),[]),modal:a,children:n})})};$oe.displayName=ET;var zoe="PopoverAnchor",yXe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Rh(zoe,n),s=x1(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=i;return T.useEffect(()=>(a(),()=>o()),[a,o]),p.jsx(Foe,{...s,...r,ref:t})});yXe.displayName=zoe;var Uoe="PopoverTrigger",qoe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Rh(Uoe,n),s=x1(n),a=En(t,i.triggerRef),o=p.jsx(Dd.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Koe(i.open),...r,ref:a,onClick:Vt(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?o:p.jsx(Foe,{asChild:!0,...s,children:o})});qoe.displayName=Uoe;var Z6="PopoverPortal",[bXe,vXe]=Boe(Z6,{forceMount:void 0}),Voe=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,s=Rh(Z6,t);return p.jsx(bXe,{scope:t,forceMount:n,children:p.jsx(ta,{present:n||s.open,children:p.jsx(Loe,{asChild:!0,container:i,children:r})})})};Voe.displayName=Z6;var H0="PopoverContent",Hoe=T.forwardRef((e,t)=>{const n=vXe(H0,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,s=Rh(H0,e.__scopePopover);return p.jsx(ta,{present:r||s.open,children:s.modal?p.jsx(wXe,{...i,ref:t}):p.jsx(_Xe,{...i,ref:t})})});Hoe.displayName=H0;var xXe=ou("PopoverContent.RemoveScroll"),wXe=T.forwardRef((e,t)=>{const n=Rh(H0,e.__scopePopover),r=T.useRef(null),i=En(t,r),s=T.useRef(!1);return T.useEffect(()=>{const a=r.current;if(a)return xT(a)},[]),p.jsx(m1,{as:xXe,allowPinchZoom:!0,children:p.jsx(Woe,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Vt(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),s.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Vt(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,c=o.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Vt(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),_Xe=T.forwardRef((e,t)=>{const n=Rh(H0,e.__scopePopover),r=T.useRef(!1),i=T.useRef(!1);return p.jsx(Woe,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Woe=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,h=Rh(H0,n),m=x1(n);return bT(),p.jsx(Coe,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(_oe,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:p.jsx(hXe,{"data-state":Koe(h.open),role:"dialog",id:h.contentId,...m,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Goe="PopoverClose",SXe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Rh(Goe,n);return p.jsx(Dd.button,{type:"button",...r,ref:t,onClick:Vt(e.onClick,()=>i.onOpenChange(!1))})});SXe.displayName=Goe;var CXe="PopoverArrow",kXe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=x1(n);return p.jsx(pXe,{...i,...r,ref:t})});kXe.displayName=CXe;function Koe(e){return e?"open":"closed"}var EXe=$oe,TXe=qoe,AXe=Voe,RXe=Hoe;function Ll({...e}){return p.jsx(EXe,{"data-slot":"popover",...e})}function Bl({...e}){return p.jsx(TXe,{"data-slot":"popover-trigger",...e})}function $l({className:e,align:t="center",sideOffset:n=4,...r}){return p.jsx(AXe,{children:p.jsx(RXe,{"data-slot":"popover-content",align:t,sideOffset:n,className:ft("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function Sg(e,t,n){let r=n.initialDeps??[],i;function s(){var a,o,l,c;let u;n.key&&((a=n.debug)!=null&&a.call(n))&&(u=Date.now());const d=e();if(!(d.length!==r.length||d.some((y,b)=>r[b]!==y)))return i;r=d;let m;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(m=Date.now()),i=t(...d),n.key&&((l=n.debug)!=null&&l.call(n))){const y=Math.round((Date.now()-u)*100)/100,b=Math.round((Date.now()-m)*100)/100,v=b/16,x=(_,S)=>{for(_=String(_);_.length<S;)_=" "+_;return _};console.info(`%c⏱ ${x(b,5)} /${x(y,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*v,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(c=n==null?void 0:n.onChange)==null||c.call(n,i),i}return s.updateDeps=a=>{r=a},s}function qM(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const IXe=(e,t)=>Math.abs(e-t)<=1,NXe=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},dV=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},MXe=e=>e,jXe=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},PXe=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=a=>{const{width:o,height:l}=a;t({width:Math.round(o),height:Math.round(l)})};if(i(dV(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const o=()=>{const l=a[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){i({width:c.inlineSize,height:c.blockSize});return}}i(dV(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},fV={passive:!0},hV=typeof window>"u"?!0:"onscrollend"in window,OXe=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const s=e.options.useScrollendEvent&&hV?()=>{}:NXe(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:d,isRtl:h}=e.options;i=d?n.scrollLeft*(h&&-1||1):n.scrollTop,s(),t(i,u)},o=a(!0),l=a(!1);l(),n.addEventListener("scroll",o,fV);const c=e.options.useScrollendEvent&&hV;return c&&n.addEventListener("scrollend",l,fV),()=>{n.removeEventListener("scroll",o),c&&n.removeEventListener("scrollend",l)}},DXe=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},FXe=(e,{adjustments:t=0,behavior:n},r)=>{var i,s;const a=e+t;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class LXe{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:MXe,rangeExtractor:jXe,onChange:()=>{},measureElement:DXe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Sg(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(i.has(o.lane))continue;const l=s.get(o.lane);if(l==null||o.end>l.end?s.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=Sg(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=Sg(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let u=l;u<n;u++){const d=s(u),h=this.options.lanes===1?c[u-1]:this.getFurthestMeasurement(c,u),m=h?h.end+this.options.gap:r+i,y=o.get(d),b=typeof y=="number"?y:this.options.estimateSize(u),v=m+b,x=h?h.lane:u%this.options.lanes;c[u]={index:u,start:m,size:b,end:v,key:d,lane:x}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Sg(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?BXe({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Sg(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Sg(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const o=n[s],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return qM(r[Yoe(0,r.length-1,i=>qM(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const o=this.getTotalSize()-s;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(n,r);if(!s)return;const[a,o]=s;this._scrollToOffset(a,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[c]=qM(this.getOffsetForIndex(n,o)),u=this.getScrollOffset();IXe(c,u)||this.scrollToIndex(n,{align:o,behavior:i})}else this.scrollToIndex(n,{align:o,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(o=>o===null);){const o=r[a];s[o.lane]===null&&(s[o.lane]=o.end),a--}i=Math.max(...s.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const Yoe=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,s=n(i);if(s<r)e=i+1;else if(s>r)t=i-1;else return i}return e>0?e-1:0};function BXe({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const i=e.length-1,s=l=>e[l].start;if(e.length<=r)return{startIndex:0,endIndex:i};let a=Yoe(0,i,s,n),o=a;if(r===1)for(;o<i&&e[o].end<n+t;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(u=>u<n+t);){const u=e[o];l[u.lane]=u.end,o++}const c=Array(r).fill(n+t);for(;a>=0&&c.some(u=>u>=n);){const u=e[a];c[u.lane]=u.start,a--}a=Math.max(0,a-a%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}const pV=typeof document<"u"?T.useLayoutEffect:T.useEffect;function $Xe(e){const t=T.useReducer(()=>({}),{})[1],n={...e,onChange:(i,s)=>{var a;s?Vo.flushSync(t):t(),(a=e.onChange)==null||a.call(e,i,s)}},[r]=T.useState(()=>new LXe(n));return r.setOptions(n),pV(()=>r._didMount(),[]),pV(()=>r._willUpdate()),r}function X6(e){return $Xe({observeElementRect:PXe,observeElementOffset:OXe,scrollToFn:FXe,...e})}const mV=e=>{if(!e)return null;const t=parseFloat(e);return isNaN(t)?null:t/1e6},J6=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:i=!1,disabled:s=!1,listHeightClass:a="h-[26rem]",onModelClick:o})=>{const[l,c]=T.useState(null),u=T.useCallback(J=>{if(J){const U=J.querySelector("[data-radix-scroll-area-viewport]");if(U)c(U);else{const G=new MutationObserver(()=>{const $=J.querySelector("[data-radix-scroll-area-viewport]");$&&(c($),G.disconnect())});return G.observe(J,{childList:!0,subtree:!0}),()=>G.disconnect()}}else c(null)},[]),[d,h]=T.useState(""),[m,y]=T.useState(!1),[b,v]=T.useState("all"),[x,_]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),[S,C]=T.useState(""),[E,A]=T.useState(""),[R,N]=T.useState(""),[M,P]=T.useState(""),L=T.useMemo(()=>{let J=[...t];if(b==="enabled"?J=J.filter(ce=>n.has(ce.id)):b==="disabled"&&(J=J.filter(ce=>!n.has(ce.id))),d.trim()){const ce=d.toLowerCase();J=J.filter(Me=>Me.name.toLowerCase().includes(ce)||Me.id.toLowerCase().includes(ce))}const U=Object.entries(x).filter(([,ce])=>ce).map(([ce])=>ce);U.length>0&&(J=J.filter(ce=>{var Ne;const Me=new Set(ce.supported_parameters??[]),je=new Set(((Ne=ce.architecture)==null?void 0:Ne.input_modalities)??[]);return U.every(Ce=>{switch(Ce){case"reasoning":return Me.has("reasoning");case"webSearch":return Me.has("web_search")||Me.has("web_search_options");case"tools":return Me.has("tools");case"multimodal":return Array.from(je).some(Ue=>Ue!=="text");default:return!0}})}));const G=parseFloat(S),$=parseFloat(E),ne=parseFloat(R),H=parseFloat(M),te=!isNaN(G),ee=!isNaN($),se=!isNaN(ne),he=!isNaN(H);return(te||ee||se||he)&&(J=J.filter(ce=>{var ge,Ae;const Me=mV((ge=ce.pricing)==null?void 0:ge.prompt),je=mV((Ae=ce.pricing)==null?void 0:Ae.completion),Ne=te?G/1e6:-1/0,Ce=ee?$/1e6:1/0,Ue=se?ne/1e6:-1/0,et=he?H/1e6:1/0,qe=Me!==null&&Me>=Ne&&Me<=Ce,Re=je!==null&&je>=Ue&&je<=et;let K=!0;return(te||ee)&&K&&(K=qe),(se||he)&&K&&(K=Re),K})),J},[t,d,b,n,x,S,E,R,M]),O=X6({count:L.length,getScrollElement:()=>l,estimateSize:()=>40,overscan:10}),V=J=>{_(U=>({...U,[J]:!U[J]}))},F=(b!=="all"?1:0)+Object.values(x).filter(Boolean).length+(S||E||R||M?1:0);return i?p.jsxs("div",{className:ft("space-y-2",a),children:[p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"})]}):t.length===0?p.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):p.jsxs("div",{className:"space-y-2 flex flex-col h-full",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(Aa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(pr,{value:d,onChange:J=>h(J.target.value),placeholder:"Filter models by name...",className:"pl-8 h-9 w-full text-xs",type:"text",disabled:s})]}),p.jsxs(Ll,{open:m,onOpenChange:y,children:[p.jsx(Bl,{asChild:!0,children:p.jsxs(Tt,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:s,children:[p.jsx(tP,{className:"h-4 w-4 mr-1"}),"Filters",F>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:F})]})}),p.jsxs($l,{className:"w-72 p-4 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(en,{className:"text-xs font-semibold",children:"Status"}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(Tt,{variant:b==="all"?"secondary":"outline",size:"sm",onClick:()=>v("all"),children:"All"}),p.jsxs(Tt,{variant:b==="enabled"?"secondary":"outline",size:"sm",onClick:()=>v("enabled"),children:[p.jsx(Ka,{className:"h-3 w-3 mr-1"})," Enabled"]}),p.jsxs(Tt,{variant:b==="disabled"?"secondary":"outline",size:"sm",onClick:()=>v("disabled"),children:[p.jsx(Ihe,{className:"h-3 w-3 mr-1"})," Disabled"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(en,{className:"text-xs font-semibold",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.jsx(Mn,{tooltipText:"Reasoning","aria-label":"Reasoning",icon:p.jsx(fh,{}),onClick:()=>V("reasoning"),variant:x.reasoning?"secondary":"outline",className:ft(x.reasoning&&"text-primary")}),p.jsx(Mn,{tooltipText:"Web Search","aria-label":"Web Search",icon:p.jsx(Aa,{}),onClick:()=>V("webSearch"),variant:x.webSearch?"secondary":"outline",className:ft(x.webSearch&&"text-primary")}),p.jsx(Mn,{tooltipText:"Tools","aria-label":"Tools",icon:p.jsx(Pp,{}),onClick:()=>V("tools"),variant:x.tools?"secondary":"outline",className:ft(x.tools&&"text-primary")}),p.jsx(Mn,{tooltipText:"Multimodal","aria-label":"Multimodal",icon:p.jsx(Mp,{}),onClick:()=>V("multimodal"),variant:x.multimodal?"secondary":"outline",className:ft(x.multimodal&&"text-primary")})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(en,{className:"text-xs font-semibold flex items-center gap-1",children:[p.jsx(spe,{className:"h-3 w-3"})," Price Range ($ / 1M Tokens)"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(pr,{type:"number",min:"0",step:"0.01",placeholder:"Min Input",value:S,onChange:J=>C(J.target.value),className:"h-8 text-xs"}),p.jsx(pr,{type:"number",min:"0",step:"0.01",placeholder:"Max Input",value:E,onChange:J=>A(J.target.value),className:"h-8 text-xs"}),p.jsx(pr,{type:"number",min:"0",step:"0.01",placeholder:"Min Output",value:R,onChange:J=>N(J.target.value),className:"h-8 text-xs"}),p.jsx(pr,{type:"number",min:"0",step:"0.01",placeholder:"Max Output",value:M,onChange:J=>P(J.target.value),className:"h-8 text-xs"})]})]})]})]})]}),p.jsxs(Na,{className:ft("w-full rounded-md border border-border p-1 bg-background/50 flex-grow",a),ref:u,children:[l&&p.jsx("div",{style:{height:`${O.getTotalSize()}px`,width:"100%",position:"relative"},children:L.length===0&&!i?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4 absolute inset-0 flex items-center justify-center",children:"No models match the current filters."}):O.getVirtualItems().map(J=>{const U=L[J.index];return U?p.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${J.size}px`,transform:`translateY(${J.start}px)`},className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[p.jsx(au,{id:`enable-model-${e}-${U.id}`,checked:n.has(U.id),onCheckedChange:G=>r(U.id,G),disabled:s,"aria-label":`Enable model ${U.name||U.id}`,className:"flex-shrink-0",onClick:G=>G.stopPropagation()}),p.jsx(en,{htmlFor:`enable-model-${e}-${U.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate pl-2",title:U.name||U.id,onClick:o?()=>o(U.id):void 0,children:U.name||U.id})]},U.id):null})}),!l&&!i&&p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Initializing list..."})]})]})},zXe=({stepNumber:e,title:t,description:n,isComplete:r,isActive:i,openOnComplete:s=!1,contentClassName:a="",icon:o,children:l})=>{const[c,u]=T.useState(!1);return T.useEffect(()=>{u(i||r&&s)},[i,r,s]),p.jsxs(i6,{className:`border border-border/40 bg-card/50 backdrop-blur-sm shadow-lg ${r?"border-l-4 border-l-green-500/70":i?"border-l-4 border-l-primary/70":""}`,children:[p.jsx(s6,{className:"pb-2",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${r?"bg-green-500/20 text-green-500":i?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:r?p.jsx(jk,{className:"h-5 w-5"}):p.jsx("div",{className:"flex items-center justify-center",children:o})}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>u(!c),children:[p.jsxs(a6,{className:"text-base",children:[p.jsxs("span",{className:"opacity-60 mr-2",children:[e,"."]}),t]}),p.jsx("button",{className:`p-1 rounded-full transition-all ${c?"rotate-90":""} hover:bg-muted/60`,children:p.jsx(CH,{className:"h-4 w-4"})})]}),!c&&p.jsx(Tie,{className:"text-xs mt-1",children:typeof n=="string"?n.substring(0,60)+(n.length>60?"...":""):"Click to expand"})]})]})}),p.jsx(gqe,{children:c&&p.jsx(Vc.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:p.jsxs(o6,{className:"pt-2",children:[typeof n=="string"?p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n}):p.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:n}),p.jsx("div",{className:a,children:l})]})})})]})},UXe=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:i,getAllAvailableModelDefsForProvider:s,isLoading:a,enableApiKeyManagement:o}=Ir(Tn(se=>({apiKeys:se.dbApiKeys,addApiKey:se.addApiKey,providers:se.dbProviderConfigs,addProviderConfig:se.addProviderConfig,updateProviderConfig:se.updateProviderConfig,getAllAvailableModelDefsForProvider:se.getAllAvailableModelDefsForProvider,isLoading:se.isLoading,enableApiKeyManagement:se.enableApiKeyManagement}))),{addConversation:l,selectItem:c}=$n(Tn(se=>({addConversation:se.addConversation,selectItem:se.selectItem}))),[u,d]=T.useState(!1),[h,m]=T.useState(!1),[y,b]=T.useState(!1),[v,x]=T.useState(!1),[_,S]=T.useState(!1),C=T.useMemo(()=>!o||e.length>0,[o,e]),E=T.useMemo(()=>n.length>0,[n]),A=T.useMemo(()=>n.some(se=>se.isEnabled&&se.enabledModels&&se.enabledModels.length>0),[n]),R=T.useMemo(()=>{const se=[...n].sort((he,ce)=>ce.createdAt.getTime()-he.createdAt.getTime());return se.length>0?se[0]:null},[n]),N=T.useMemo(()=>R?s(R.id):[],[R,s]),M=T.useMemo(()=>new Set((R==null?void 0:R.enabledModels)??[]),[R]),{initialProviderTypeForForm:P,initialProviderNameForForm:L,initialApiKeyIdForForm:O}=T.useMemo(()=>{var se;if(E)return{type:void 0,name:void 0,keyId:void 0};if(e.length>0){const ce=[...e].sort((Me,je)=>je.createdAt.getTime()-Me.createdAt.getTime()).find(Me=>p0(Me.providerId));if(ce){const Me=ce.providerId,je=((se=ho.find(Ne=>Ne.value===Me))==null?void 0:se.label)||Me;return{initialProviderTypeForForm:Me,initialProviderNameForForm:je,initialApiKeyIdForForm:ce.id}}}return{initialProviderTypeForForm:void 0,initialProviderNameForForm:void 0,initialApiKeyIdForForm:void 0}},[e,E]),V=T.useCallback(async(se,he,ce)=>{d(!0);try{await t(se,he,ce),De.success("API key added successfully!")}finally{d(!1)}},[t]),F=T.useCallback(async se=>{m(!0);try{const he={...se,apiKeyId:se.apiKeyId??(p0(se.type)?O??null:null)},ce=await r(he);return De.success("Provider added successfully!"),ce}finally{m(!1)}},[r,O]),J=T.useCallback(async(se,he)=>{if(!R)return;x(!0);const ce=new Set(R.enabledModels??[]);he?ce.add(se):ce.delete(se);const Me=Array.from(ce);try{await i(R.id,{enabledModels:Me}),De.success(he?"Model enabled successfully!":"Model disabled successfully!")}catch(je){De.error("Failed to update model status."),console.error("Failed to save model toggle:",je)}finally{x(!1)}},[R,i]),U=T.useCallback(async()=>{b(!0),S(!0);try{await new Promise(he=>setTimeout(he,800));const se=await l({title:"New Chat"});await c(se,"conversation"),De.success("Welcome to your first chat!")}catch(se){De.error("Failed to start your first chat."),console.error("Failed to start first chat:",se),b(!1),S(!1)}},[l,c]),G=()=>{Le.emit(Rr.openModalRequest,{modalId:"settingsModal",initialTab:"providers"})},$=[C,E,A].filter(Boolean).length,ne=o?3:2,H=$/ne*100,te=[...o?[{id:"api-key",title:"Add API Key",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["To use providers like"," ",p.jsx(id,{href:"https://platform.openai.com/api-keys",className:"text-blue-500 hover:text-blue-700 transition-colors",children:"OpenAI"}),","," ",p.jsx(id,{href:"https://aistudio.google.com/app/apikey",className:"text-green-600 hover:text-green-700 transition-colors",children:"Google"}),","," ",p.jsx(id,{href:"https://console.anthropic.com/settings/keys",className:"text-purple-500 hover:text-purple-700 transition-colors",children:"Anthropic (Claude)"}),", or"," ",p.jsx(id,{href:"https://openrouter.ai/keys",className:"text-orange-500 hover:text-orange-700 transition-colors",children:"OpenRouter"})," ","or any OpenAI API compatible provider, add an API key. Keys are stored securely in your browser."]}),p.jsxs("p",{children:['If you want truly local AI, "no internet required", you can setup'," ",p.jsx(id,{href:"https://www.ollama.com/",className:"text-teal-500 hover:text-teal-700 transition-colors",children:"Ollama"})," ","or,"," ",p.jsx(id,{href:"https://lmstudio.ai/",className:"text-indigo-500 hover:text-indigo-700 transition-colors",children:"LMStudio"})," ","(or any other local LLM solution with an OpenAI compatible API). These typically don't require API keys so see you in step 2."]})]}),isComplete:C,content:p.jsx(ooe,{onSave:V,onCancel:()=>{},disabled:u,className:"border-none shadow-none p-0",initialProviderType:P}),icon:p.jsx(Qv,{className:"h-4 w-4"})}]:[],{id:"add-provider",title:"Add AI Provider",description:p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{children:"Connect to an AI provider you configured the key for..."}),p.jsx("p",{children:"This might look redundant, but it allows you to have multiple keys for the same provider (personal, professional, etc.)"})]}),isComplete:E,content:p.jsx(moe,{apiKeys:e,onAddProvider:F,onCancel:()=>{},initialType:P,initialName:L,initialApiKeyId:O}),icon:p.jsx(v2,{className:"h-4 w-4"})},{id:"enable-models",title:"Enable Models",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["Enable models for the provider you just added (",p.jsx("span",{className:"font-medium text-primary",children:(R==null?void 0:R.name)||"..."}),")."]}),p.jsx("p",{children:"Enabling specific models improves the UI by reducing clutter and choice paralysis. You can enable more later in Settings."}),p.jsx("p",{children:"And just like before, you can choose to activate a model for a certain combination of key/provider!"})]}),isComplete:A,content:R?p.jsx("div",{className:"bg-card/40 rounded-lg p-3 border border-border/30 shadow-inner",children:p.jsx(J6,{providerId:R.id,allAvailableModels:N,enabledModelIds:M,onToggleModel:J,isLoading:a||v,listHeightClass:"h-[26rem]"})}):p.jsxs("p",{className:"text-sm text-muted-foreground italic flex items-center",children:[p.jsx(lc,{className:"h-4 w-4 mr-2 text-amber-500"}),"Add a provider in Step ",o?"2":"1"," first."]}),icon:p.jsx(fh,{className:"h-4 w-4"})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:p.jsxs("div",{children:[_&&p.jsx(Vc.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:p.jsx(uw,{value:y?void 0:100,className:"h-2"})}),p.jsxs(Tt,{onClick:U,disabled:y||!A,className:"w-full bg-gradient-to-r from-indigo-500 to-primary hover:opacity-90 transition-all",children:[p.jsx(Qpe,{className:"mr-2 h-4 w-4"}),y?"Launching...":"Start First Chat"]}),p.jsx(Aie,{})]}),contentClassName:"p-4",icon:p.jsx(xme,{className:"h-4 w-4"})}],ee=te.findIndex(se=>!se.isComplete);return a?p.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-4xl mx-auto w-full",children:p.jsxs(Vc.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full",children:[p.jsx($r,{className:"h-12 w-1/2 mx-auto mb-6"}),p.jsx($r,{className:"h-8 w-3/4 mx-auto mb-2"}),p.jsx($r,{className:"h-4 w-1/2 mx-auto mb-8"}),p.jsx($r,{className:"h-20 w-full mb-6"}),p.jsx($r,{className:"h-20 w-full mb-6"}),p.jsx($r,{className:"h-20 w-full"})]})}):p.jsx("div",{className:"flex h-full flex-col items-center justify-start p-4 bg-gradient-to-b from-background to-background/80",children:p.jsxs("div",{className:"w-full max-w-4xl space-y-6 pt-8",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx(Vc.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:p.jsxs("div",{className:"relative mx-auto w-16 h-16 mb-4",children:[p.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-xl"}),p.jsx("div",{className:"relative bg-gradient-to-br from-primary to-indigo-600 p-3 rounded-full",children:p.jsx(MZe,{className:"h-10 w-10 text-white"})})]})}),p.jsx("h2",{className:"text-3xl font-bold mb-3 bg-gradient-to-r from-primary to-indigo-500 bg-clip-text text-transparent",children:"Welcome to LiteChat"}),p.jsx(PZe,{})]}),p.jsxs(Vc.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[p.jsx(yr,{children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsxs("div",{className:"mt-6 bg-card/40 backdrop-blur-sm border border-border/30 rounded-xl p-3 w-3/4 mx-auto",children:[p.jsx(uw,{value:H,className:"h-1.5"}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Setup Progress: ",Math.round(H),"%"]})]})}),p.jsx(wr,{children:p.jsxs("p",{children:["Steps completed: ",$," of ",ne]})})]})}),te.map((se,he)=>{const ce=he===ee;return p.jsx(Vc.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:he*.1,duration:.3},children:p.jsx(zXe,{stepNumber:he+1,title:se.title,description:se.description,isComplete:se.id!=="start-chat"&&se.isComplete,isActive:ce,openOnComplete:se.id==="enable-models",contentClassName:se.id==="add-provider"||se.id==="api-key"?"p-0 border-none shadow-none bg-transparent":se.contentClassName,icon:se.icon,children:se.content})},se.id)})]}),!a&&!E&&ee===-1&&p.jsxs(Vc.div,{className:"text-center mt-6 p-4 bg-red-500/10 rounded-lg border border-red-500/30",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[p.jsx(lc,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),p.jsx("p",{className:"text-sm mb-3",children:"Configuration issue detected. Please review provider settings."}),p.jsx(Tt,{variant:"outline",size:"sm",onClick:G,className:"border-red-500/50 hover:bg-red-500/20 transition-colors",children:"Open Provider Settings"})]})]})})},jS=["conversation.title_generation"],qXe=({conversationId:e,interactions:t,status:n,className:r})=>{const i=T.useRef(null),s=T.useRef(null),[a,o]=T.useState(!1),l=T.useRef(null),c=Ln(F=>F.streamingInteractionIds),{chatMaxWidth:u,autoScrollInterval:d,enableAutoScrollOnStream:h}=mr(Tn(F=>({chatMaxWidth:F.chatMaxWidth,autoScrollInterval:F.autoScrollInterval,enableAutoScrollOnStream:F.enableAutoScrollOnStream}))),m=mr(F=>F.setEnableAutoScrollOnStream),y=T.useMemo(()=>F=>({isLoading:F.isLoading}),[]),b=T.useMemo(()=>F=>({conversationCount:F.conversations.length,isConversationLoading:F.isLoading}),[]),{isLoading:v}=Ir(Tn(y)),{conversationCount:x,isConversationLoading:_}=$n(Tn(b)),{projectCount:S,isProjectLoading:C}=ko(Tn(F=>({projectCount:F.projects.length,isProjectLoading:F.isLoading}))),E=T.useMemo(()=>v||_||C?!1:x===0&&S===0,[x,S,v,_,C]),A=T.useMemo(()=>t.filter(U=>U.parentId===null&&!jS.includes(U.type)).sort((U,G)=>U.index-G.index).map(U=>{const G=t.filter($=>$.parentId===U.id&&!jS.includes($.type)).sort(($,ne)=>$.index-ne.index);return[U,...G]}),[t]),R=Qo(Tn(F=>Object.values(F.canvasControls))),N=T.useCallback((F,J,U,G)=>R.filter(ne=>{const H=ne.type===F,te=ne.targetSlot===J,ee=!!ne.renderer;return H&&te&&ee}).map(ne=>{if(ne.renderer){const te={...{interaction:U,interactionId:U==null?void 0:U.id,responseContent:typeof(U==null?void 0:U.response)=="string"?U.response:void 0,canvasContextType:F},...G};return p.jsx(lt.Fragment,{children:ne.renderer(te)},ne.id)}return null}).filter(Boolean),[R]),M=(F="smooth")=>{s.current&&s.current.scrollTo({top:s.current.scrollHeight,behavior:F})};T.useEffect(()=>{if(s.current){const{scrollHeight:F,clientHeight:J,scrollTop:U}=s.current;(F-J<=U+150||n!=="streaming")&&requestAnimationFrame(()=>{M(n==="streaming"?"smooth":"auto")})}},[A.length,n]),T.useEffect(()=>(n==="streaming"&&h?(l.current&&clearInterval(l.current),l.current=setInterval(()=>{M("smooth")},d)):l.current&&(clearInterval(l.current),l.current=null),()=>{l.current&&clearInterval(l.current)}),[n,d,h]),T.useEffect(()=>{const F=s.current;if(!F)return;const J=()=>{if(!s.current)return;const{scrollHeight:U,clientHeight:G,scrollTop:$}=s.current,ne=$<U-G-G*.5;o(ne)};return F.addEventListener("scroll",J,{passive:!0}),J(),()=>{s.current&&s.current.removeEventListener("scroll",J)}},[]),T.useEffect(()=>{i.current&&(s.current=i.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const P=T.useMemo(()=>{const F=[];return[...t].sort((G,$)=>{var ne,H;return G.index!==$.index?G.index-$.index:G.parentId===null&&$.parentId!==null?-1:G.parentId!==null&&$.parentId===null?1:G.parentId!==null&&$.parentId!==null&&G.parentId===$.parentId?G.index-$.index:(((ne=G.startedAt)==null?void 0:ne.getTime())??0)-(((H=$.startedAt)==null?void 0:H.getTime())??0)}).filter(G=>G.parentId===null&&!jS.includes(G.type)).forEach(G=>{var te,ee;let $=null;if(G.type==="message.user_assistant"&&G.prompt)$=G.prompt;else if(G.type==="message.assistant_regen"&&((te=G.metadata)!=null&&te.regeneratedFromId)){let se,he=G;const ce=new Set;for(;he&&!ce.has(he.id);){if(ce.add(he.id),he.type==="message.user_assistant"&&he.prompt){se=he;break}if((ee=he.metadata)!=null&&ee.regeneratedFromId)he=t.find(Me=>Me.id===he.metadata.regeneratedFromId);else break}se?$=se.prompt:G.prompt?$=G.prompt:console.warn(`[ChatCanvas] Could not reliably find user prompt for active interaction ${G.id} of type ${G.type}. Displaying turn without prompt.`)}if($)F.push(p.jsx(oT,{turnData:$,timestamp:G.startedAt,isAssistantComplete:G.status==="COMPLETED"||G.status==="ERROR"},`prompt-${G.id}`));else if(G.type!=="message.user_assistant"&&G.type!=="message.assistant_regen"){console.log("[ChatCanvas] Skipping active interaction on spine due to no user prompt and non-standard type:",G.id,G.type);return}const ne=t.filter(se=>se.parentId===G.id&&!jS.includes(se.type)).sort((se,he)=>se.index-he.index),H=[G,...ne];H.length>0&&F.push(p.jsx(GUe,{interactionGroup:H,renderSlot:(se,he,ce)=>N("interaction",se,he,ce),activeStreamingInteractionId:c.find(se=>H.some(he=>he.id===se))},`tabs-${G.id}`))}),F},[t,N,c]),L=T.useMemo(()=>c.filter(F=>!t.some(J=>J.id===F)).map(F=>p.jsx(fk,{interactionId:F,renderSlot:(J,U,G)=>N("interaction",J,U,G)},`${F}-streaming-new`)),[c,t,N]),O=()=>v||_||C?p.jsxs("div",{className:"space-y-4 p-2 md:p-4",children:[p.jsx($r,{className:"h-24 w-full"}),p.jsx($r,{className:"h-32 w-full"}),p.jsx($r,{className:"h-20 w-full"})]}):e?A.length===0&&n!=="streaming"&&c.length===0?p.jsx(wU,{}):p.jsxs("div",{className:"space-y-4 p-2 md:p-4 break-words",children:[P,L]}):p.jsx(wU,{}),V=u||"max-w-7xl";return p.jsx("div",{className:ft("flex-grow relative",r),children:E?p.jsx(Na,{className:"h-full w-full",children:p.jsx("div",{className:ft("mx-auto w-full",V),children:p.jsx(UXe,{})})}):p.jsxs(p.Fragment,{children:[p.jsx(Na,{className:"h-full w-full",ref:i,children:p.jsx("div",{className:ft("mx-auto w-full",V),children:O()})}),a&&p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>M(),"aria-label":"Scroll to bottom",children:p.jsx(_H,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"left",children:"Scroll to Bottom"})]})}),n==="streaming"&&p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"outline",size:"icon",className:"absolute bottom-4 right-14 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>m(!h),"aria-label":h?"Disable follow stream":"Enable follow stream",children:h?p.jsx(fme,{className:"h-4 w-4"}):p.jsx(mme,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"left",children:h?"Stop Following Stream":"Follow Stream"})]})})]})})},VXe=lt.memo(qXe),Cg=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const i=e.filter(s=>(s.panel??"main")===t&&(s.show?s.show():!0));return i.length===0?null:p.jsx("div",{className:ft(r),children:i.map(s=>{const a=n==="icon"?s.iconRenderer:s.renderer;return p.jsx(lt.Fragment,{children:a?a():null},s.id)})})},dw=Il(Nl((e,t)=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,toggleChatControlPanel:(n,r)=>{const i=t().isChatControlPanelOpen[n]??!1,s=r??!i;i!==s&&(e(a=>{a.isChatControlPanelOpen[n]=s}),Le.emit(Rr.chatControlPanelVisibilityChanged,{panelId:n,isOpen:s}))},togglePromptControlPanel:(n,r)=>{const i=t().isPromptControlPanelOpen[n]??!1,s=r??!i;i!==s&&(e(a=>{a.isPromptControlPanelOpen[n]=s}),Le.emit(Rr.promptControlPanelVisibilityChanged,{controlId:n,isOpen:s}))},toggleSidebar:n=>{const r=t().isSidebarCollapsed,i=n??!r;r!==i&&(e({isSidebarCollapsed:i}),Le.emit(Rr.sidebarVisibilityChanged,{isCollapsed:i}))},setGlobalLoading:n=>{t().globalLoading!==n&&(e({globalLoading:n}),Le.emit(Rr.globalLoadingChanged,{loading:n}))},setGlobalError:n=>{t().globalError!==n&&(e({globalError:n}),Le.emit(Rr.globalErrorChanged,{error:n}))},setFocusInputFlag:n=>{t().focusInputOnNextRender!==n&&(e({focusInputOnNextRender:n}),Le.emit(Rr.focusInputFlagChanged,{focus:n}))},getRegisteredActionHandlers:()=>{const n="uiStateStore",r=t();return[{eventName:Rr.toggleSidebarRequest,handler:i=>r.toggleSidebar(i==null?void 0:i.isCollapsed),storeId:n},{eventName:Rr.toggleChatControlPanelRequest,handler:i=>r.toggleChatControlPanel(i.panelId,i.isOpen),storeId:n},{eventName:Rr.togglePromptControlPanelRequest,handler:i=>r.togglePromptControlPanel(i.controlId,i.isOpen),storeId:n},{eventName:Rr.setGlobalLoadingRequest,handler:i=>r.setGlobalLoading(i.loading),storeId:n},{eventName:Rr.setGlobalErrorRequest,handler:i=>r.setGlobalError(i.error),storeId:n},{eventName:Rr.setFocusInputFlagRequest,handler:i=>r.setFocusInputFlag(i.focus),storeId:n}]}})));var HXe=(e,t,n,r,i,s,a,o)=>{let l=document.documentElement,c=["light","dark"];function u(m){(Array.isArray(e)?e:[e]).forEach(y=>{let b=y==="class",v=b&&s?i.map(x=>s[x]||x):i;b?(l.classList.remove(...v),l.classList.add(s&&s[m]?s[m]:m)):l.setAttribute(y,m)}),d(m)}function d(m){o&&c.includes(m)&&(l.style.colorScheme=m)}function h(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let m=localStorage.getItem(t)||n,y=a&&m==="system"?h():m;u(y)}catch{}},WXe=T.createContext(void 0),GXe={setTheme:e=>{},themes:[]},KXe=()=>{var e;return(e=T.useContext(WXe))!=null?e:GXe};T.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:a,themes:o,nonce:l,scriptProps:c})=>{let u=JSON.stringify([n,t,s,e,o,a,r,i]).slice(1,-1);return T.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${HXe.toString()})(${u})`}})});const YXe=({...e})=>{const{theme:t="system"}=KXe();return p.jsx(Kge,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function Fd({className:e,...t}){return p.jsx("textarea",{"data-slot":"textarea",className:ft("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const Zoe=T.memo(T.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:i,onValueChange:s,...a},o)=>{const l=T.useRef(null),[c,u]=T.useState(e);T.useImperativeHandle(o,()=>({getValue:()=>c,setValue:m=>{u(m),s&&s(m),Le.emit(Bn.inputChanged,{value:m}),requestAnimationFrame(()=>{const y=l.current;y&&(y.style.height="auto",y.style.height=`${y.scrollHeight}px`,y.style.overflowY=y.scrollHeight>250?"auto":"hidden")})},focus:()=>{var m;return(m=l.current)==null?void 0:m.focus()},clearValue:()=>{u(""),s&&s(""),Le.emit(Bn.inputChanged,{value:""}),requestAnimationFrame(()=>{const m=l.current;m&&(m.style.height="auto",m.style.height=`${m.scrollHeight}px`,m.style.overflowY="hidden")})}}));const d=m=>{var y;if(m.key==="Enter"&&!m.shiftKey&&!n){m.preventDefault();const b=qf.getState().attachedFilesMetadata.length>0;(c.trim().length>0||b)&&(t(),(y=o==null?void 0:o.current)==null||y.clearValue())}},h=m=>{const y=m.target.value;u(y),s&&s(y),Le.emit(Bn.inputChanged,{value:y})};return T.useEffect(()=>{const m=l.current;if(m){m.style.height="auto";const y=m.scrollHeight,b=250;m.style.height=`${Math.min(y,b)}px`,m.style.overflowY=y>b?"auto":"hidden"}},[c]),T.useEffect(()=>{e!==c&&(u(e),s&&s(e))},[e,s]),p.jsx(Fd,{ref:l,value:c,onChange:h,onKeyDown:d,disabled:n,placeholder:r,rows:1,className:ft("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",i),"aria-label":"Chat input",...a})}));Zoe.displayName="InputArea";const vs={dbModsLoaded:"mod.db.mods.loaded",loadedInstancesChanged:"mod.loaded.instances.changed",settingsTabsChanged:"mod.settings.tabs.changed",loadingStateChanged:"mod.loading.state.changed",modLoaded:"mod.sdk.loaded",modError:"mod.sdk.error",loadDbModsRequest:"mod.load.db.mods.request",addDbModRequest:"mod.add.db.mod.request",updateDbModRequest:"mod.update.db.mod.request",deleteDbModRequest:"mod.delete.db.mod.request"},uh=Il(Nl((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Nt.loadMods();e({dbMods:n,isLoading:!1}),Le.emit(vs.dbModsLoaded,{dbMods:n})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),Le.emit(vs.loadingStateChanged,{isLoading:!1,error:r}),De.error(r)}},addDbMod:async n=>{const r=Xs(),i={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(s=>{s.dbMods.push(i),s.dbMods.sort((a,o)=>a.loadOrder-o.loadOrder)});try{return await Nt.saveMod(i),De.success(`Mod "${i.name}" added.`),Le.emit(vs.dbModsLoaded,{dbMods:t().dbMods}),r}catch(s){const a="Failed to save new mod";throw console.error("ModStore: Error adding mod",s),e(o=>{o.dbMods=o.dbMods.filter(l=>l.id!==r),o.error=a}),Le.emit(vs.loadingStateChanged,{isLoading:t().isLoading,error:a}),De.error(a),s}},updateDbMod:async(n,r)=>{let i,s=-1;e(o=>{s=o.dbMods.findIndex(l=>l.id===n),s!==-1?(i={...o.dbMods[s]},o.dbMods[s]={...o.dbMods[s],...r},r.loadOrder!==void 0&&o.dbMods.sort((l,c)=>l.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const a=s!==-1?t().dbMods[s]:void 0;if(a)try{await Nt.saveMod(a),De.success(`Mod "${a.name}" updated.`),Le.emit(vs.dbModsLoaded,{dbMods:t().dbMods})}catch(o){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",o),e(c=>{const u=c.dbMods.findIndex(d=>d.id===n);u!==-1&&i&&(c.dbMods[u]=i,c.dbMods.sort((d,h)=>d.loadOrder-h.loadOrder)),c.error=l}),Le.emit(vs.loadingStateChanged,{isLoading:t().isLoading,error:l}),De.error(l),o}},deleteDbMod:async n=>{const r=t().dbMods.find(s=>s.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const i=r.name;e(s=>({dbMods:s.dbMods.filter(a=>a.id!==n)}));try{await Nt.deleteMod(n),De.success(`Mod "${i}" deleted.`),Le.emit(vs.dbModsLoaded,{dbMods:t().dbMods})}catch(s){const a="Failed to delete mod";throw console.error("ModStore: Error deleting mod",s),e(o=>{o.dbMods.push(r),o.dbMods.sort((l,c)=>l.loadOrder-c.loadOrder),o.error=a}),Le.emit(vs.loadingStateChanged,{isLoading:t().isLoading,error:a}),De.error(a),s}},setLoadedMods:n=>{e({loadedMods:n}),Le.emit(vs.loadedInstancesChanged,{loadedMods:n})},_addSettingsTab:n=>{e(r=>{if(!r.modSettingsTabs.some(i=>i.id===n.id))r.modSettingsTabs.push(n),r.modSettingsTabs.sort((i,s)=>(i.order??999)-(s.order??999));else{console.warn(`ModStore: Settings tab with ID "${n.id}" already registered. Overwriting.`);const i=r.modSettingsTabs.findIndex(s=>s.id===n.id);r.modSettingsTabs[i]=n,r.modSettingsTabs.sort((s,a)=>(s.order??999)-(a.order??999))}}),Le.emit(vs.settingsTabsChanged,{tabs:t().modSettingsTabs})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(i=>i.id!==n)}),Le.emit(vs.settingsTabsChanged,{tabs:t().modSettingsTabs})},getRegisteredActionHandlers:()=>{const n="modStore",r=t(),i=s=>async a=>{await s(a)};return[{eventName:vs.loadDbModsRequest,handler:r.loadDbMods,storeId:n},{eventName:vs.addDbModRequest,handler:i(r.addDbMod),storeId:n},{eventName:vs.updateDbModRequest,handler:s=>r.updateDbMod(s.id,s.changes),storeId:n},{eventName:vs.deleteDbModRequest,handler:s=>r.deleteDbMod(s.id),storeId:n}]}}))),Ih={loaded:"app.loaded",errorBoundaryTriggered:"app.error.boundary.triggered",initializationPhaseCompleted:"app.initialization.phase.completed"};function $j(e){const t=e.id,n=e.name;return{modId:t,modName:n,registerPromptControl:i=>(Le.emit(Dr.registerPromptControlRequest,{control:i}),()=>Le.emit(Dr.unregisterPromptControlRequest,{id:i.id})),registerChatControl:i=>{const s={...i,status:i.status??(()=>"ready")};return Le.emit(Dr.registerChatControlRequest,{control:s}),()=>Le.emit(Dr.unregisterChatControlRequest,{id:i.id})},registerCanvasControl:i=>(Le.emit(Dr.registerCanvasControlRequest,{control:i}),()=>Le.emit(Dr.unregisterCanvasControlRequest,{id:i.id})),registerTool:(i,s,a)=>(console.log(`[${n}] Registering tool: ${i}`),Le.emit(Dr.registerToolRequest,{modId:t,toolName:i,definition:s,implementation:a}),()=>Le.emit(Dr.unregisterToolRequest,{toolName:i})),on:(i,s)=>(Le.on(i,s),()=>Le.off(i,s)),emit:(i,s)=>{Le.emit(i,s)},addMiddleware:(i,s)=>(Le.emit(Dr.registerMiddlewareRequest,{hookName:i,modId:t,callback:s}),()=>Le.emit(Dr.unregisterMiddlewareRequest,{hookName:i,modId:t,callback:s})),registerSettingsTab:i=>(uh.getState()._addSettingsTab(i),()=>uh.getState()._removeSettingsTab(i.id)),getContextSnapshot:()=>{const i=Ln.getState(),s=$n.getState(),a=mr.getState(),o=Ir.getState(),{providerId:l}=rc(o.selectedModelId),c=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:c,interactions:Object.freeze(i.currentConversationId===c?i.interactions.map(u=>Object.freeze({...u})):[]),isStreaming:i.status==="streaming",selectedProviderId:l,selectedModelId:o.selectedModelId,activeSystemPrompt:a.globalSystemPrompt,temperature:a.temperature,maxTokens:a.maxTokens,theme:a.theme,gitUserName:a.gitUserName,gitUserEmail:a.gitUserEmail})},showToast:(i,s)=>{De[i](`[Mod: ${n}] ${s}`)},log:(i,...s)=>{console[i](`[Mod: ${n}]`,...s)},registerModalProvider:(i,s)=>(Le.emit(Dr.registerModalProviderRequest,{modalId:i,provider:s}),()=>Le.emit(Dr.unregisterModalProviderRequest,{modalId:i})),getVfsInstance:async i=>Hi.getState().initializeVFS(i,{force:!0})}}async function ZXe(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let i=r.scriptContent,s=null,a=null;try{if(s=$j(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);i=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!i)throw new Error("Mod script content is empty.");new Function("modApi",i)(s),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){a=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),De.error(`Error loading mod "${r.name}": ${a instanceof Error?a.message:a}`)}s||(s=$j(r));const o={id:r.id,name:r.name,api:s,error:a};return Le.emit(o.error?vs.modError:vs.modLoaded,{id:r.id,name:r.name,error:o.error??"unknown error"}),o}));return Le.emit(Ih.loaded,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}const fr={dataLoaded:"rules.data.loaded",ruleSaved:"rules.rule.saved",ruleDeleted:"rules.rule.deleted",tagSaved:"rules.tag.saved",tagDeleted:"rules.tag.deleted",linkSaved:"rules.link.saved",linkDeleted:"rules.link.deleted",loadingStateChanged:"rules.loading.state.changed",loadRulesAndTagsRequest:"rules.load.rules.and.tags.request",addRuleRequest:"rules.add.rule.request",updateRuleRequest:"rules.update.rule.request",deleteRuleRequest:"rules.delete.rule.request",addTagRequest:"rules.add.tag.request",updateTagRequest:"rules.update.tag.request",deleteTagRequest:"rules.delete.tag.request",linkTagToRuleRequest:"rules.link.tag.to.rule.request",unlinkTagFromRuleRequest:"rules.unlink.tag.from.rule.request"},gV=null;class XXe{static async applyBundledConfig(t){{console.log("[BundledConfig] No bundled user configuration found, skipping...");return}}static hasBundledConfig(){return gV!==null}static getBundledConfig(){return gV}}class fw{static async syncAll(t={}){const n={syncRepos:!0,syncConversations:!0,continueOnError:!0,maxConcurrent:3,...t};if(this.isRunning){De.warning("Bulk sync already in progress");return}this.isRunning=!0,this.abortController=new AbortController;const r=$n.getState(),i=r.syncRepos,s=r.conversations.filter(o=>o.syncRepoId),a={totalRepos:n.syncRepos?i.length:0,completedRepos:0,totalConversations:n.syncConversations?s.length:0,completedConversations:0,currentOperation:"Starting bulk sync...",errors:[]};try{Le.emit(si.bulkSyncStarted,{progress:a}),De.info(`Starting bulk sync: ${i.length} repositories, ${s.length} conversations`),n.syncRepos&&i.length>0&&await this.syncRepositoriesInBatches(i,n,a),n.syncConversations&&s.length>0&&await this.syncConversationsInBatches(s,n,a);const o=a.errors.length>0;Le.emit(si.bulkSyncCompleted,{progress:a,success:!o}),o?(De.warning(`Bulk sync completed with ${a.errors.length} errors. Check console for details.`),console.warn("Bulk sync errors:",a.errors)):De.success("Bulk sync completed successfully!")}catch(o){console.error("Bulk sync failed:",o),De.error(`Bulk sync failed: ${o instanceof Error?o.message:"Unknown error"}`),Le.emit(si.bulkSyncFailed,{progress:a,error:String(o)})}finally{this.isRunning=!1,this.abortController=null}}static async syncPendingConversations(){const t=$n.getState(),n=t.conversations.filter(r=>{const i=t.conversationSyncStatus[r.id];return r.syncRepoId&&i==="needs-sync"});if(n.length===0){De.info("No conversations need syncing");return}De.info(`Syncing ${n.length} pending conversations...`),await this.syncAll({syncRepos:!1,syncConversations:!0,continueOnError:!0,maxConcurrent:2})}static async initializeAllRepositories(){const n=$n.getState().syncRepos;if(n.length===0){De.info("No repositories configured");return}De.info(`Initializing ${n.length} repositories...`),await this.syncAll({syncRepos:!0,syncConversations:!1,continueOnError:!0,maxConcurrent:2})}static abort(){this.isRunning&&this.abortController&&(this.abortController.abort(),De.info("Bulk sync operation cancelled"))}static isActive(){return this.isRunning}static async syncRepositoriesInBatches(t,n,r){var s;r.currentOperation="Initializing repositories...",Le.emit(si.bulkSyncProgress,{progress:r});const i=this.createBatches(t,n.maxConcurrent);for(const a of i){if((s=this.abortController)!=null&&s.signal.aborted)throw new Error("Operation cancelled");const o=a.map(async l=>{try{r.currentOperation=`Syncing repository: ${l.name}`,Le.emit(si.bulkSyncProgress,{progress:r}),await $n.getState().initializeOrSyncRepo(l.id,!0),r.completedRepos++}catch(c){const u=c instanceof Error?c.message:String(c);if(r.errors.push({type:"repo",id:l.id,error:u}),console.error(`Failed to sync repository ${l.name}:`,c),!n.continueOnError)throw c}});await Promise.all(o),Le.emit(si.bulkSyncProgress,{progress:r})}}static async syncConversationsInBatches(t,n,r){var s;r.currentOperation="Syncing conversations...",Le.emit(si.bulkSyncProgress,{progress:r});const i=this.createBatches(t,n.maxConcurrent);for(const a of i){if((s=this.abortController)!=null&&s.signal.aborted)throw new Error("Operation cancelled");const o=a.map(async l=>{try{r.currentOperation=`Syncing conversation: ${l.title}`,Le.emit(si.bulkSyncProgress,{progress:r}),await $n.getState().syncConversation(l.id,!0),r.completedConversations++}catch(c){const u=c instanceof Error?c.message:String(c);if(r.errors.push({type:"conversation",id:l.id,error:u}),console.error(`Failed to sync conversation ${l.title}:`,c),!n.continueOnError)throw c}});await Promise.all(o),Le.emit(si.bulkSyncProgress,{progress:r})}}static createBatches(t,n){const r=[];for(let i=0;i<t.length;i+=n)r.push(t.slice(i,i+n));return r}}we(fw,"isRunning",!1),we(fw,"abortController",null);const e0=Object.freeze(Object.defineProperty({__proto__:null,BulkSyncService:fw},Symbol.toStringTag,{value:"Module"}));class Xoe{static async runStartupSync(){if(!this.hasRunStartupSync){this.hasRunStartupSync=!0;try{const t=$n.getState(),n=mr.getState();await new Promise(o=>setTimeout(o,1e3));const r=t.syncRepos,i=t.conversations.filter(o=>o.syncRepoId);if(r.length===0){console.log("[StartupSync] No repositories configured, skipping startup sync");return}console.log(`[StartupSync] Found ${r.length} repositories and ${i.length} synced conversations`);const s=r.filter(o=>{const l=t.repoInitializationStatus[o.id];return!l||l==="error"});s.length>0&&n.autoInitializeReposOnStartup?(console.log(`[StartupSync] Initializing ${s.length} repositories in background`),setTimeout(async()=>{try{await fw.syncAll({syncRepos:!0,syncConversations:!1,continueOnError:!0,maxConcurrent:1})}catch(o){console.warn("[StartupSync] Background repo initialization failed:",o)}},2e3)):s.length>0&&console.log(`[StartupSync] Found ${s.length} uninitialized repositories, but auto-initialization is disabled`);const a=i.filter(o=>t.conversationSyncStatus[o.id]==="needs-sync");a.length>0&&n.autoSyncOnStreamComplete&&(console.log(`[StartupSync] Found ${a.length} conversations pending sync`),setTimeout(async()=>{try{await fw.syncPendingConversations()}catch(o){console.warn("[StartupSync] Background conversation sync failed:",o)}},5e3))}catch(t){console.error("[StartupSync] Startup sync failed:",t)}}}static reset(){this.hasRunStartupSync=!1}}we(Xoe,"hasRunStartupSync",!1);function JXe(e){const t=new Map(e.map(a=>[a.id,a])),n=new Set,r=new Set,i=[];function s(a){if(n.has(a.id))return!0;if(r.has(a.id))return console.error(`[Init] Circular dependency detected involving module: ${a.id}`),De.error("Initialization Error: Circular dependency in controls."),!1;r.add(a.id);for(const o of a.dependencies??[]){const l=t.get(o);if(!l)return console.error(`[Init] Missing dependency "${o}" for module "${a.id}"`),De.error(`Initialization Error: Missing dependency "${o}" for "${a.id}".`),r.delete(a.id),!1;if(!s(l))return r.delete(a.id),!1}return r.delete(a.id),n.add(a.id),i.push(a),!0}for(const a of e)if(!n.has(a.id)&&!s(a))return null;return i}async function QXe(e,t){console.log("[Init] Core Data: Applying bundled configuration..."),await XXe.applyBundledConfig(),console.log("[Init] Core Data: Requesting loads..."),t.emit(sn.loadSettingsRequest,void 0),t.emit(lr.loadInitialDataRequest,void 0),t.emit(fr.loadRulesAndTagsRequest,void 0),t.emit(Wn.loadConversationsRequest,void 0),t.emit(fa.loadProjectsRequest,void 0),await new Promise(n=>{let r=!1,i=!1,s=!1,a=!1,o=!1;const l=()=>{r&&i&&s&&a&&o&&n()},c=t.on(sn.loaded,()=>{r=!0,c(),l()}),u=t.on(lr.initialDataLoaded,()=>{i=!0,u(),l()}),d=t.on(fr.dataLoaded,()=>{s=!0,d(),l()}),h=t.on(Wn.conversationsLoaded,()=>{a=!0,h(),l()}),m=t.on(fa.loaded,()=>{o=!0,m(),l()})}),Le.emit(Ih.initializationPhaseCompleted,{phase:"coreData"}),console.log("[Init] Core Data: Loaded (or load requested)."),setTimeout(()=>{Xoe.runStartupSync().catch(n=>{console.warn("[Init] Startup sync failed:",n)})},1e3)}async function eJe(e,t){console.log("[Init] Control Modules: Instantiation & Dependency Resolution START");const n=e.map(i=>new i),r=JXe(n);if(!r)throw console.error("[Init] Control Modules: Dependency resolution FAILED."),new Error("Failed to resolve control module dependency order.");console.log(`[Init] Control Modules: Dependency order resolved (${r.length} modules):`,r.map(i=>i.id)),console.log("[Init] Control Modules: Instantiation & Dependency Resolution COMPLETE"),console.log("[Init] Control Modules: Initialization START");for(const i of r)try{await i.initialize(t)}catch(s){console.error(`[Init] Error initializing module "${i.id}":`,s),De.error(`Module Init Error (${i.id}): ${s instanceof Error?s.message:String(s)}`)}return Le.emit(Ih.initializationPhaseCompleted,{phase:"controlModulesInit"}),console.log("[Init] Control Modules: Initialization COMPLETE."),r}function tJe(e,t){console.log("[Init] Control Modules: Registration START");for(const n of e)try{n.register(t)}catch(r){console.error(`[Init] Error registering module "${n.id}":`,r),De.error(`Module Registration Error (${n.id}): ${r instanceof Error?r.message:String(r)}`)}Le.emit(Ih.initializationPhaseCompleted,{phase:"controlModulesRegister"}),console.log("[Init] Control Modules: Registration COMPLETE.")}async function nJe(e,t){console.log("[Init] External Mods: Loading DB records..."),t.emit(vs.loadDbModsRequest,void 0),await new Promise(i=>{const s=t.on(vs.dbModsLoaded,()=>{s(),i()})});const n=uh.getState().dbMods;console.log(`[Init] External Mods: Processing ${n.length} mods...`);const r=await ZXe(n);uh.getState().setLoadedMods(r),Le.emit(Ih.initializationPhaseCompleted,{phase:"externalMods"}),console.log(`[Init] External Mods: ${r.length} mods processed.`)}function rJe(e,t){var a;console.log("[Init] Core UI States: Initializing...");const n=e.selectedItemId,r=e.selectedItemType,i=r==="project"?n:r==="conversation"?((a=e.getConversationById(n))==null?void 0:a.projectId)??null:null,s=e.getEffectiveProjectSettings(i);t.emit(Bn.initializePromptStateRequest,{effectiveSettings:s}),Le.emit(Ih.initializationPhaseCompleted,{phase:"uiStateSync"}),console.log("[Init] Core UI States: Initial prompt state synchronization requested.")}async function iJe(e,t){console.log("[Init] LiteChat Full Initialization START"),Ap.initializeCanvasEventHandlers();const n={requestLoadSettings:()=>t.emit(sn.loadSettingsRequest,void 0),requestLoadProviderData:()=>t.emit(lr.loadInitialDataRequest,void 0),requestLoadRulesAndTags:()=>t.emit(fr.loadRulesAndTagsRequest,void 0),requestLoadConversations:()=>t.emit(Wn.loadConversationsRequest,void 0),requestLoadProjects:()=>t.emit(fa.loadProjectsRequest,void 0),requestLoadDbMods:()=>t.emit(vs.loadDbModsRequest,void 0),setLoadedMods:uh.getState().setLoadedMods,getConversationById:$n.getState().getConversationById,getEffectiveProjectSettings:ko.getState().getEffectiveProjectSettings,initializePromptState:_o.getState().initializePromptState,selectedItemId:$n.getState().selectedItemId,selectedItemType:$n.getState().selectedItemType};let r=[];try{await QXe(n,t),r=await eJe(e,t),tJe(r,t),await nJe(n,t),rJe(n,t),Le.emit(Ih.initializationPhaseCompleted,{phase:"all"}),console.log("LiteChat: Full initialization sequence COMPLETE.")}catch(i){throw console.error("LiteChat: Full initialization sequence FAILED:",i),De.error(`Initialization sequence failed: ${i instanceof Error?i.message:String(i)}`),dw.getState().setGlobalError("Initialization sequence failed."),i}return r}const sJe=Il(Nl((e,t)=>({rules:[],tags:[],tagRuleLinks:[],isLoading:!1,error:null,loadRulesAndTags:async()=>{e({isLoading:!0,error:null});try{const[n,r,i]=await Promise.all([Nt.loadRules(),Nt.loadTags(),Nt.loadTagRuleLinks()]);e({rules:n,tags:r,tagRuleLinks:i,isLoading:!1}),Le.emit(fr.dataLoaded,{rules:n,tags:r,links:i})}catch(n){console.error("RulesStore: Error loading rules and tags",n),e({error:"Failed load rules/tags",isLoading:!1}),De.error("Failed to load rules and tags."),Le.emit(fr.loadingStateChanged,{isLoading:!1,error:"Failed load rules/tags"})}},addRule:async n=>{const r=Xs(),i=new Date,s={id:r,createdAt:i,updatedAt:i,...n};e(a=>{a.rules.push(s),a.rules.sort((o,l)=>o.name.localeCompare(l.name))});try{await Nt.saveRule(s),De.success(`Rule "${s.name}" added.`),Le.emit(fr.ruleSaved,{rule:s});const{rules:a,tags:o,tagRuleLinks:l}=t();return Le.emit(fr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]}),r}catch(a){throw console.error("RulesStore: Error adding rule",a),e(o=>({error:"Failed to save new rule",rules:o.rules.filter(l=>l.id!==r)})),De.error("Failed to save new rule."),a}},updateRule:async(n,r)=>{const i=t().rules.find(a=>a.id===n);if(!i)throw De.error("Rule not found for update."),new Error("Rule not found");const s={...i,...r,updatedAt:new Date};e(a=>{const o=a.rules.findIndex(l=>l.id===n);o!==-1&&(a.rules[o]=s,a.rules.sort((l,c)=>l.name.localeCompare(c.name)))});try{await Nt.saveRule(s),De.success(`Rule "${s.name}" updated.`),Le.emit(fr.ruleSaved,{rule:s});const{rules:a,tags:o,tagRuleLinks:l}=t();Le.emit(fr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error updating rule",a),e(o=>{const l=o.rules.findIndex(c=>c.id===n);l!==-1&&(o.rules[l]=i,o.rules.sort((c,u)=>c.name.localeCompare(u.name))),o.error="Failed to save rule update"}),De.error("Failed to save rule update."),a}},deleteRule:async n=>{const r=t().rules.find(a=>a.id===n);if(!r)throw De.error("Rule not found for deletion."),new Error("Rule not found");const i=[...t().tagRuleLinks.filter(a=>a.ruleId===n)],s={...r};e(a=>{a.rules=a.rules.filter(o=>o.id!==n),a.tagRuleLinks=a.tagRuleLinks.filter(o=>o.ruleId!==n)});try{await Nt.deleteRule(n),De.success(`Rule "${r.name}" deleted.`),Le.emit(fr.ruleDeleted,{ruleId:n});const{rules:a,tags:o,tagRuleLinks:l}=t();Le.emit(fr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error deleting rule",a),e(o=>{o.rules.find(l=>l.id===s.id)||(o.rules.push(s),o.rules.sort((l,c)=>l.name.localeCompare(c.name))),i.forEach(l=>{o.tagRuleLinks.find(c=>c.tagId===l.tagId&&c.ruleId===l.ruleId)||o.tagRuleLinks.push(l)}),o.error="Failed to delete rule"}),De.error("Failed to delete rule."),a}},addTag:async n=>{const r=Xs(),i=new Date,s={id:r,createdAt:i,updatedAt:i,...n};e(a=>{a.tags.push(s),a.tags.sort((o,l)=>o.name.localeCompare(l.name))});try{await Nt.saveTag(s),De.success(`Tag "${s.name}" added.`),Le.emit(fr.tagSaved,{tag:s});const{rules:a,tags:o,tagRuleLinks:l}=t();return Le.emit(fr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]}),r}catch(a){throw console.error("RulesStore: Error adding tag",a),e(o=>({error:"Failed to save new tag",tags:o.tags.filter(l=>l.id!==r)})),De.error("Failed to save new tag."),a}},updateTag:async(n,r)=>{const i=t().tags.find(a=>a.id===n);if(!i)throw De.error("Tag not found for update."),new Error("Tag not found");const s={...i,...r,updatedAt:new Date};e(a=>{const o=a.tags.findIndex(l=>l.id===n);o!==-1&&(a.tags[o]=s,a.tags.sort((l,c)=>l.name.localeCompare(c.name)))});try{await Nt.saveTag(s),De.success(`Tag "${s.name}" updated.`),Le.emit(fr.tagSaved,{tag:s});const{rules:a,tags:o,tagRuleLinks:l}=t();Le.emit(fr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error updating tag",a),e(o=>{const l=o.tags.findIndex(c=>c.id===n);l!==-1&&(o.tags[l]=i,o.tags.sort((c,u)=>c.name.localeCompare(u.name))),o.error="Failed to save tag update"}),De.error("Failed to save tag update."),a}},deleteTag:async n=>{const r=t().tags.find(a=>a.id===n);if(!r)throw De.error("Tag not found for deletion."),new Error("Tag not found");const i={...r},s=[...t().tagRuleLinks.filter(a=>a.tagId===n)];e(a=>{a.tags=a.tags.filter(o=>o.id!==n),a.tagRuleLinks=a.tagRuleLinks.filter(o=>o.tagId!==n)});try{await Nt.deleteTag(n),De.success(`Tag "${r.name}" deleted.`),Le.emit(fr.tagDeleted,{tagId:n});const{rules:a,tags:o,tagRuleLinks:l}=t();Le.emit(fr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error deleting tag",a),e(o=>{o.tags.find(l=>l.id===i.id)||(o.tags.push(i),o.tags.sort((l,c)=>l.name.localeCompare(c.name))),s.forEach(l=>{o.tagRuleLinks.find(c=>c.tagId===l.tagId&&c.ruleId===l.ruleId)||o.tagRuleLinks.push(l)}),o.error="Failed to delete tag"}),De.error("Failed to delete tag."),a}},linkTagToRule:async(n,r)=>{const i=`${n}-${r}`;if(t().tagRuleLinks.some(a=>a.id===i)){De.info("Link already exists.");return}const s={id:i,tagId:n,ruleId:r};e(a=>{a.tagRuleLinks.push(s)});try{await Nt.saveTagRuleLink(s),De.success("Tag linked to rule."),fr.linkSaved&&Le.emit(fr.linkSaved,{link:s});const{rules:a,tags:o,tagRuleLinks:l}=t();Le.emit(fr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error linking tag to rule",a),e(o=>{o.tagRuleLinks=o.tagRuleLinks.filter(l=>l.id!==i),o.error="Failed to link tag to rule"}),De.error("Failed to link tag to rule."),a}},unlinkTagFromRule:async(n,r)=>{const i=`${n}-${r}`,s=t().tagRuleLinks.find(a=>a.id===i);s||De.info("Link not found for unlinking."),e(a=>{a.tagRuleLinks=a.tagRuleLinks.filter(o=>o.id!==i)});try{await Nt.deleteTagRuleLink(i),De.success("Tag unlinked from rule."),fr.linkDeleted&&Le.emit(fr.linkDeleted,{linkId:i});const{rules:a,tags:o,tagRuleLinks:l}=t();Le.emit(fr.dataLoaded,{rules:[...a],tags:[...o],links:[...l]})}catch(a){throw console.error("RulesStore: Error unlinking tag from rule",a),s&&e(o=>{o.tagRuleLinks.some(l=>l.id===s.id)||o.tagRuleLinks.push(s),o.error="Failed to unlink tag from rule"}),De.error("Failed to unlink tag from rule."),a}},getRulesForTag:n=>{const r=t(),i=new Set(r.tagRuleLinks.filter(s=>s.tagId===n).map(s=>s.ruleId));return r.rules.filter(s=>i.has(s.id))},getTagsForRule:n=>{const r=t(),i=new Set(r.tagRuleLinks.filter(s=>s.ruleId===n).map(s=>s.tagId));return r.tags.filter(s=>i.has(s.id))},getRuleById:n=>t().rules.find(r=>r.id===n),getTagById:n=>t().tags.find(r=>r.id===n),getRulesByIds:n=>{const r=new Set(n);return t().rules.filter(i=>r.has(i.id))},getRegisteredActionHandlers:()=>{const n="rulesStore",r=t(),i=s=>async a=>{await s(a)};return[{eventName:fr.loadRulesAndTagsRequest,handler:r.loadRulesAndTags,storeId:n},{eventName:fr.addRuleRequest,handler:i(r.addRule),storeId:n},{eventName:fr.updateRuleRequest,handler:s=>r.updateRule(s.id,s.updates),storeId:n},{eventName:fr.deleteRuleRequest,handler:s=>r.deleteRule(s.id),storeId:n},{eventName:fr.addTagRequest,handler:i(r.addTag),storeId:n},{eventName:fr.updateTagRequest,handler:s=>r.updateTag(s.id,s.updates),storeId:n},{eventName:fr.deleteTagRequest,handler:s=>r.deleteTag(s.id),storeId:n},{eventName:fr.linkTagToRuleRequest,handler:s=>r.linkTagToRule(s.tagId,s.ruleId),storeId:n},{eventName:fr.unlinkTagFromRuleRequest,handler:s=>r.unlinkTagFromRule(s.tagId,s.ruleId),storeId:n}]}}))),aJe=[mr,Ir,sJe,$n,ko,Ln,qf,_o,uh,dw,Hi,Qo];class Joe{static initialize(){if(this.isInitialized){console.warn("[Coordinator] Already initialized. Skipping re-initialization.");return}console.log("[Coordinator] Initializing dynamic event listeners for action requests...");const t=[];aJe.forEach(n=>{const r=n.getState();if(r&&typeof r.getRegisteredActionHandlers=="function")try{const i=r.getRegisteredActionHandlers();Array.isArray(i)?t.push(...i):console.warn(`[Coordinator] getRegisteredActionHandlers for store did not return an array. Store ID: ${r.id||"Unknown"}`)}catch(i){console.error("[Coordinator] Error calling getRegisteredActionHandlers for a store:",i)}}),t.length===0?console.warn("[Coordinator] No action handlers were registered by any store."):t.forEach(n=>{n&&n.eventName&&typeof n.handler=="function"?Le.on(n.eventName,n.handler):console.error("[Coordinator] Invalid action handler structure encountered:",n)}),this.isInitialized=!0,console.log(`[Coordinator] Dynamic event listeners initialized. Total handlers: ${t.length}.`)}}we(Joe,"isInitialized",!1);const oJe=()=>{const[e,t]=T.useState({}),n=Qo(r=>r.modalProviders);return T.useEffect(()=>{const r=s=>{t(a=>({...a,[s.modalId]:{...s,isOpen:!0}})),Le.emit(Rr.modalStateChanged,{...s,isOpen:!0})},i=s=>{t(a=>{const o={...a};return o[s.modalId]&&(o[s.modalId].isOpen=!1),o}),Le.emit(Rr.modalStateChanged,{modalId:s.modalId,isOpen:!1})};return Le.on(Rr.openModalRequest,r),Le.on(Rr.closeModalRequest,i),()=>{Le.off(Rr.openModalRequest,r),Le.off(Rr.closeModalRequest,i)}},[]),p.jsx(p.Fragment,{children:Object.entries(e).map(([r,i])=>{if(!i.isOpen)return null;const s=n[r];if(!s)return console.warn(`[ModalManager] No provider for modalId: ${r}`),null;const a={isOpen:!0,onClose:()=>Le.emit(Rr.closeModalRequest,{modalId:r}),modalProps:i.modalProps,targetId:i.targetId,initialTab:i.initialTab,initialSubTab:i.initialSubTab};return p.jsx(s,{...a},r)})})};let yV=[],bV=null,Xu=!1;const lJe=({controls:e=[]})=>{const[t,n]=T.useState(!0),[r,i]=T.useState(!1),s=T.useRef(null),a=T.useRef(null),{selectedItemId:o,selectedItemType:l,getConversationById:c}=$n(Tn(M=>({selectedItemId:M.selectedItemId,selectedItemType:M.selectedItemType,getConversationById:M.getConversationById}))),{getEffectiveProjectSettings:u}=ko(Tn(M=>({getEffectiveProjectSettings:M.getEffectiveProjectSettings}))),{interactions:d,status:h}=Ln(Tn(M=>({interactions:M.interactions,status:M.status}))),{globalError:m,isSidebarCollapsed:y,isChatControlPanelOpen:b}=dw(Tn(M=>({globalError:M.globalError,isSidebarCollapsed:M.isSidebarCollapsed,isChatControlPanelOpen:M.isChatControlPanelOpen}))),v=Qo(Tn(M=>Object.values(M.chatControls))),x=T.useMemo(()=>v.filter(M=>(M.panel??"main")==="sidebar"&&(M.show?M.show():!0)),[v]),_=T.useMemo(()=>v.filter(M=>M.panel==="sidebar-footer"&&(M.show?M.show():!0)),[v]),S=T.useMemo(()=>v.filter(M=>M.panel==="header"&&(M.show?M.show():!0)),[v]),C=T.useCallback(()=>{i(M=>!M)},[]);T.useEffect(()=>{r&&o&&(l==="conversation"||l==="project")&&i(!1)},[o,l]),T.useEffect(()=>{a.current||(a.current=$j({id:"core-litechat-app",name:"LiteChat App Core"}));const M=a.current;Joe.initialize(),bV||(bV=(async()=>{if(Xu){n(!1);return}n(!0);try{yV=await iJe(e,M),Xu=!0}catch(L){console.error("[LiteChat] App: Top-level initialization error:",L),Xu=!1}finally{n(!1)}})().then(()=>yV))},[e]);const E=T.useRef({itemId:null,itemType:null,effectiveSettingsString:""});T.useEffect(()=>{if(t||!Xu||!a.current)return;const M=a.current,P={itemId:o,itemType:l};let L=null;if(l==="project")L=o;else if(l==="conversation"&&o){const F=c(o);L=(F==null?void 0:F.projectId)??null}const O=u(L),V=JSON.stringify(O);(P.itemId!==E.current.itemId||P.itemType!==E.current.itemType||V!==E.current.effectiveSettingsString)&&(M.emit(Bn.initializePromptStateRequest,{effectiveSettings:O}),M.emit(Rr.contextChanged,{selectedItemId:o,selectedItemType:l}),E.current={...P,effectiveSettingsString:V})},[o,l,c,u,t,Xu]),T.useEffect(()=>{if(t||!Xu||!a.current)return;const M=a.current,P=()=>{let J=null;if(l==="project")J=o;else if(l==="conversation"&&o){const G=c(o);J=(G==null?void 0:G.projectId)??null}const U=u(J);M.emit(Bn.initializePromptStateRequest,{effectiveSettings:U})},L=M.on(sn.loaded,P),O=M.on(fa.updated,P),V=M.on(sn.globalSystemPromptChanged,P),F=M.on(sn.temperatureChanged,P);return()=>{L(),O(),V(),F()}},[o,l,c,u,t,Xu]),T.useEffect(()=>{if(t||!Xu||!a.current)return;const M=a.current;let P=null;if(b["core-vfs-modal-panel"]||l==="project")if(l==="project")P=o;else if(l==="conversation"){const V=c(o);P=(V==null?void 0:V.projectId)??"orphan"}else P="orphan";else if(l==="conversation"){const V=c(o);P=(V==null?void 0:V.projectId)??"orphan"}let O=null;typeof P=="string"?O=P:P===null?O=null:(console.warn(`[LiteChatVFS] Calculated VFS key was not a string or null. Type: ${typeof P}, Value:`,P,"Defaulting to 'orphan'."),O="orphan"),Hi.getState().vfsKey!==O&&M.emit(un.setVfsKeyRequest,{key:O})},[o,l,c,t,Xu,b]);const A=async M=>{const P=$n.getState(),L=await P.addConversation(M);return console.log("New conversation ID:",L),await P.selectItem(L,"conversation"),console.log("conv selected:",L),L},R=T.useCallback(async M=>{var V;if(!a.current){De.error("Application core not ready. Please try again.");return}const P=$n.getState();let L=P.selectedItemType==="conversation"?P.selectedItemId:null;const O=P.selectedItemType==="project"?P.selectedItemId:P.selectedItemType==="conversation"?((V=P.getConversationById(P.selectedItemId))==null?void 0:V.projectId)??null:null;if(!L)try{L=await A({title:"New Chat",projectId:O}),console.log("New conversation ID 2:",L)}catch(F){console.error("[LiteChat] App: Failed to create new conversation",F),De.error("Failed to start new chat.");return}try{const F=_o.getState(),J={...M,metadata:{...M.metadata,modelId:F.modelId}};await zv.submitPrompt(J)}catch(F){console.error("[LiteChat] App: Error submitting prompt:",F),De.error("Failed to send message.")}},[]),N=l==="conversation"?o:null;return t?p.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx(Yn,{className:"h-12 w-12 animate-spin text-primary"}),p.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):p.jsxs(p.Fragment,{children:[p.jsx(oJe,{}),p.jsxs("div",{className:"flex h-full w-full border border-border rounded-lg overflow-hidden bg-background text-foreground",children:[p.jsxs("div",{className:ft("hidden md:flex flex-col border-r border-border bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",y?"w-16":"w-64"),children:[p.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[p.jsx("div",{className:ft(y?"hidden":"block"),children:p.jsx(Cg,{controls:x,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:ft(y?"block":"hidden"),children:p.jsx(Cg,{controls:x,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),p.jsx("div",{className:ft("flex-shrink-0 border-t border-border p-2",y?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:p.jsx(Cg,{controls:_,panelId:"sidebar-footer",renderMode:y?"icon":"full",className:ft("flex",y?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),r&&p.jsxs("div",{className:"md:hidden fixed inset-0 z-40 flex",children:[p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:C}),p.jsxs("div",{className:"relative w-4/5 max-w-sm bg-card border-r border-border h-full flex flex-col animate-slideInFromLeft shadow-2xl",children:[p.jsxs("div",{className:"sticky top-0 z-10 flex justify-between items-center p-4 border-b border-border bg-card",children:[p.jsx("h2",{className:"font-semibold text-card-foreground",children:"LiteChat Menu"}),p.jsx("button",{onClick:C,className:"p-2 rounded-md hover:bg-muted text-card-foreground touch-manipulation","aria-label":"Close menu",style:{minHeight:"44px",minWidth:"44px"},children:p.jsx(Ya,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"flex-grow overflow-y-auto overflow-x-hidden bg-card",children:x.length>0?p.jsx(Cg,{controls:x,panelId:"sidebar",renderMode:"full",className:"h-full"}):p.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[p.jsx("p",{className:"text-sm",children:"Loading menu..."}),p.jsx("p",{className:"text-xs mt-2",children:"Please wait while the application initializes."})]})}),p.jsx("div",{className:"flex-shrink-0 border-t border-border p-4 bg-card",children:_.length>0?p.jsx(Cg,{controls:_,panelId:"sidebar-footer",renderMode:"full",className:"flex items-center justify-between"}):p.jsx("div",{className:"text-center text-muted-foreground text-xs",children:"Footer controls loading..."})})]})]}),p.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border bg-card flex-shrink-0",children:[p.jsx("button",{className:ft("md:hidden p-3 rounded-md hover:bg-muted active:bg-muted/80 transition-colors touch-manipulation",r&&"bg-muted"),onClick:C,"aria-label":r?"Close menu":"Open menu",style:{minHeight:"44px",minWidth:"44px"},children:r?p.jsx(Ya,{className:"h-6 w-6"}):p.jsx(Xpe,{className:"h-6 w-6"})}),p.jsx(Cg,{controls:S,panelId:"header",className:"flex items-center justify-end gap-1 flex-grow"})]}),p.jsx(VXe,{conversationId:N,interactions:d,status:h,className:"flex-grow overflow-y-hidden"}),m&&p.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",m]}),p.jsx(Wve,{InputAreaRenderer:Zoe,onSubmit:R,className:"border-t border-border bg-card flex-shrink-0",inputAreaRef:s,selectedItemId:o,selectedItemType:l})]})]}),p.jsx(YXe,{richColors:!0,position:"bottom-right",closeButton:!0})]})},cJe="prism-theme-link",uJe="prism-default-light-theme-link",dJe="prism-default-dark-theme-link",fJe="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",hJe="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css",VM=e=>{let t=document.getElementById(e);return t||(t=document.createElement("link"),t.id=e,t.rel="stylesheet",document.head.appendChild(t)),t},pJe=()=>{const{prismThemeUrl:e,theme:t}=mr(Tn(i=>({prismThemeUrl:i.prismThemeUrl,theme:i.theme}))),n=T.useMemo(()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),r=T.useMemo(()=>{const i=t==="system"?n:t;return i==="dark"||i==="TijuDark"?"dark":"light"},[t,n]);return T.useEffect(()=>{if(typeof window>"u")return;const i=VM(uJe),s=VM(dJe),a=VM(cJe);return i.disabled=!0,s.disabled=!0,a.disabled=!0,i.href=fJe,s.href=hJe,e?(a.href=e,a.disabled=!1):(console.log(r),r==="dark"?s.disabled=!1:i.disabled=!1),()=>{}},[e,r]),null},HM=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),WM=["background","foreground","card","cardForeground","popover","popoverForeground","primary","primaryForeground","secondary","secondaryForeground","muted","mutedForeground","accent","accentForeground","destructive","destructiveForeground","border","input","ring","chart1","chart2","chart3","chart4","chart5","sidebar","sidebarForeground","sidebarPrimary","sidebarPrimaryForeground","sidebarAccent","sidebarAccentForeground","sidebarBorder","sidebarRing"],mJe=()=>{const{theme:e,customFontFamily:t,customFontSize:n,customThemeColors:r}=mr(Tn(i=>({theme:i.theme,customFontFamily:i.customFontFamily,customFontSize:i.customFontSize,customThemeColors:i.customThemeColors})));return T.useEffect(()=>{const i=document.body,s=document.documentElement;i.classList.remove("light","dark","TijuLight","TijuDark","custom"),WM.forEach(a=>{s.style.removeProperty(`--${HM(a)}`)}),s.style.removeProperty("--custom-font-family"),s.style.removeProperty("--custom-font-size"),e==="light"?i.classList.add("light"):e==="dark"?i.classList.add("dark"):e==="TijuLight"?i.classList.add("TijuLight"):e==="TijuDark"?i.classList.add("TijuDark"):e==="custom"?(i.classList.add("custom"),t?s.style.setProperty("--custom-font-family",t):s.style.removeProperty("--custom-font-family"),n?s.style.setProperty("--custom-font-size",`${n}px`):s.style.removeProperty("--custom-font-size"),r&&Object.entries(r).forEach(([a,o])=>{if(o&&WM.includes(a)){const l=`--${HM(a)}`;s.style.setProperty(l,o)}else if(WM.includes(a)){const l=`--${HM(a)}`;s.style.removeProperty(l)}})):window.matchMedia("(prefers-color-scheme: dark)").matches?i.classList.add("dark"):i.classList.add("light")},[e,t,n,r]),null},gJe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1750 c-26 15 -48 65 -41 94
             15 61 181 167 304 196
             30 7 100 12 155 12
             81 -1 115 -6 178 -27
             135 -45 247 -133 249 -194
             2 -60 -48 -103 -104 -88
             -13 3 -50 25 -83 50
             -85 64 -172 90 -280 84
             -92 -6 -165 -35 -259 -103
             -49 -35 -86 -43 -119 -24z`})})]})},vV="0.1.0-dev",xV="https://github.com/DimitriGilbert/LiteChat",wV=({textToCopy:e,label:t,className:n})=>{const[r,i]=T.useState(!1),s=async()=>{try{await navigator.clipboard.writeText(e),i(!0),De.success(`${t} copied to clipboard!`),setTimeout(()=>i(!1),2e3)}catch(a){De.error(`Failed to copy ${t.toLowerCase()}.`),console.error(`Clipboard copy failed for ${t}:`,a)}};return p.jsxs(Tt,{variant:"outline",onClick:s,className:n,children:[r?p.jsx(Ka,{className:"mr-2 h-4 w-4 text-green-500"}):p.jsx(rpe,{className:"mr-2 h-4 w-4"}),r?"Copied!":`Copy ${t}`]})};class yJe extends T.Component{constructor(){super(...arguments);we(this,"state",{hasError:!1,error:null,errorInfo:null});we(this,"handleReportOnGitHub",async()=>{const n=this.generateErrorReport(!0);try{await navigator.clipboard.writeText(n),De.success("Error report copied to clipboard. Paste it into the GitHub issue body.");const r=`${xV}/issues/new?title=${encodeURIComponent(this.getGitHubIssueTitle())}`;window.open(r,"_blank","noopener,noreferrer")}catch(r){De.error("Failed to copy error report. Please copy manually."),console.error("Clipboard copy failed for GitHub report:",r);const i=`${xV}/issues/new?title=${encodeURIComponent(this.getGitHubIssueTitle())}`;window.open(i,"_blank","noopener,noreferrer")}})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),this.setState({errorInfo:r})}getGitHubIssueTitle(){var s;const{error:n,errorInfo:r}=this.state;let i="Crash Report: ";if(r!=null&&r.componentStack){const a=(s=r.componentStack.trim().split(/\s+at\s+/)[1])==null?void 0:s.split(" ")[0];a&&(i+=`Error in <${a}> - `)}return i+=(n==null?void 0:n.message.substring(0,70))??"Unknown Error",n&&n.message.length>70&&(i+="..."),i}generateErrorReport(n=!1){const{error:r,errorInfo:i}=this.state,s=`
`,a=n?"```":"";let o=`## LiteChat Error Report${s}${s}`;return o+=`**Version:** ${vV}${s}`,o+=`**Timestamp:** ${new Date().toISOString()}${s}`,o+=`**User Agent:** ${typeof navigator<"u"?navigator.userAgent:"N/A"}${s}${s}`,r?o+=`**Error Message:**${s}${a}${s}${r.message}${s}${a}${s}${s}`:o+=`**Error Message:** Unknown Error${s}${s}`,i!=null&&i.componentStack&&(o+=`**Component Stack:**${s}${a}text${s}${i.componentStack.trim()}${s}${a}${s}${s}`),r!=null&&r.stack&&(o+=`**Error Stack Trace:**${s}${a}text${s}${r.stack.trim()}${s}${a}${s}${s}`),o+=`**Steps to Reproduce (Please Describe):**${s}1. ...${s}2. ...${s}${s}`,o+=`**Expected Behavior:**${s}...${s}${s}`,o+=`**Actual Behavior:**${s}...${s}`,o}generateAIPrompt(){var s,a;const{error:n,errorInfo:r}=this.state;return`I encountered an error in a React application (LiteChat v${vV}). Please help me debug it.

Error Message:
\`\`\`
${(n==null?void 0:n.message)??"Unknown Error"}
\`\`\`

Component Stack (if available):
\`\`\`
${((s=r==null?void 0:r.componentStack)==null?void 0:s.trim())??"Not available"}
\`\`\`

Error Stack Trace (if available):
\`\`\`
${((a=n==null?void 0:n.stack)==null?void 0:a.trim())??"Not available"}
\`\`\`

Based on this information, what are the likely causes and potential solutions? Focus on React-specific issues if the component stack is present.`}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{role:"alert",className:"flex flex-col items-center justify-center h-screen w-screen p-4 bg-background text-foreground",children:p.jsxs("div",{className:"max-w-2xl w-full border border-destructive bg-destructive/10 rounded-lg p-6 text-center shadow-lg",children:[p.jsx(gJe,{className:"h-24 w-24 text-destructive mx-auto mb-4"}),p.jsx("h1",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),p.jsx("p",{className:"text-destructive/90 mb-4",children:"LiteChat encountered an unexpected error. Please try refreshing the page. If the problem persists, consider reporting the issue. Copy the details and paste them into the GitHub issue."}),p.jsx("pre",{className:"text-left text-xs bg-destructive/10 border border-destructive/30 rounded p-3 max-h-32 overflow-auto mb-4 font-mono text-destructive/80",children:((n=this.state.error)==null?void 0:n.message)??"Unknown Error"}),p.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[p.jsx(Tt,{variant:"destructive",onClick:()=>window.location.reload(),children:"Refresh Page"}),p.jsx(wV,{textToCopy:this.generateErrorReport(),label:"Details"}),p.jsx(wV,{textToCopy:this.generateAIPrompt(),label:"AI Debug Prompt"}),p.jsxs(Tt,{variant:"outline",onClick:this.handleReportOnGitHub,children:[p.jsx(EH,{className:"mr-2 h-4 w-4"})," Report on GitHub"]})]})]})}):this.props.children}}const Qoe=(e,t)=>{if(!t)return null;let n=cc,r="text-muted-foreground/70",i=`Linked to ${t}`;switch(e){case"syncing":n=Yn,r="animate-spin text-blue-500",i=`Syncing with ${t}...`;break;case"error":n=lc,r="text-destructive",i=`Sync error with ${t}`;break;case"needs-sync":n=oP,r="text-orange-500",i=`Needs sync with ${t}`;break;case"idle":n=jk,r="text-green-500",i=`Synced with ${t}`;break;default:n=cc,r="text-muted-foreground/70",i=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(n,{className:ft("h-3 w-3 ml-1 flex-shrink-0",r)})}),p.jsx(wr,{side:"right",children:i})]})})},ele=T.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:i,onSelectItem:s,onDeleteConversation:a,onDeleteProject:o,onExportConversation:l,onExportProject:c,expandedProjects:u,toggleProjectExpansion:d,editingItemId:h,editingItemType:m,handleStartEditing:y,handleSaveEdit:b,handleCancelEdit:v,isSavingEdit:x,originalNameToCompare:_})=>{const S=e.id===n,C=e.itemType==="project",E=e.id===h&&e.itemType===m,[A,R]=T.useState(C?e.name:e.title),N=T.useRef(null);T.useEffect(()=>{if(E){const ce=C?e.name:e.title;R(ce),requestAnimationFrame(()=>{var Me,je;(Me=N.current)==null||Me.focus(),(je=N.current)==null||je.select()})}},[E,e,C]),T.useEffect(()=>{if(!E){const ce=C?e.name:e.title;A!==ce&&R(ce)}},[C?e.name:e.title,E,A,C]);const M=C&&u.has(e.id),P=C,L=!C&&e.syncRepoId?r[e.id]:void 0,O=!C&&e.syncRepoId?i.get(e.syncRepoId):void 0,V=!C&&O?Qoe(L,O):null,F=ce=>{ce.stopPropagation(),Le.emit(Rr.openModalRequest,{modalId:"projectSettingsModal",targetId:e.id})},J=()=>{E||(C&&d(e.id),s(e.id,e.itemType))},U=ce=>{ce.stopPropagation(),C?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&o(e.id,ce):a(e.id,ce)},G=ce=>{ce.stopPropagation(),y(e)},$=()=>{R(_),v(e.itemType==="project"&&_==="New Project")},ne=async()=>{if(x)return;const ce=A.trim();await b(e.id,e.itemType,ce)},H=()=>{var je;if(x)return;const ce=A.trim(),Me=e.itemType==="project"&&_==="New Project";if(!ce){_!=="New Project"?(De.error("Name cannot be empty."),R(_),(je=N.current)==null||je.focus()):$();return}ce!==_||Me?ne():$()},te=ce=>{ce.key==="Enter"?(ce.preventDefault(),ne()):ce.key==="Escape"&&(ce.preventDefault(),$())},ee=C?e.name:e.title,se=x?Yn:Ka,he=x?"h-3 w-3 animate-spin":"h-3 w-3";return p.jsxs("li",{className:ft("relative flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!E&&"hover:bg-muted/50 hover:text-primary/80",S&&!E?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",E&&"bg-muted ring-1 ring-primary",!E&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:J,title:E?"":ee,children:[p.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[P&&p.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:ce=>{ce.stopPropagation(),d(e.id)},children:M?p.jsx(yu,{className:"h-3 w-3 text-muted-foreground"}):p.jsx(CH,{className:"h-3 w-3 text-muted-foreground"})}),!P&&p.jsx("span",{className:"w-3 flex-shrink-0"}),C?p.jsx(Uf,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):p.jsx(d3,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),E?p.jsx(pr,{ref:N,value:A,onChange:ce=>R(ce.target.value),onKeyDown:te,onBlur:H,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:ce=>ce.stopPropagation(),disabled:x}):p.jsx("span",{className:"truncate min-w-0 flex-1",children:ee}),V]}),p.jsx("div",{className:ft("items-center flex-shrink-0 ml-1",E?"flex":"hidden group-hover:flex transition-all duration-150"),onClick:ce=>ce.stopPropagation(),children:E?p.jsxs(p.Fragment,{children:[p.jsx(Mn,{tooltipText:"Save (Enter)",onClick:ce=>{ce.stopPropagation(),ne()},disabled:x||!A.trim(),"aria-label":"Save changes",icon:p.jsx(se,{}),iconClassName:he,className:"h-5 w-5 text-green-500 hover:text-green-600"}),p.jsx(Mn,{tooltipText:"Cancel (Esc)",onClick:ce=>{ce.stopPropagation(),$()},disabled:x,"aria-label":"Cancel edit",icon:p.jsx(Ya,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[C&&p.jsx(Mn,{tooltipText:"Project Settings",onClick:F,"aria-label":`Settings for ${ee}`,icon:p.jsx(Qhe,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),p.jsx(Mn,{tooltipText:"Edit",onClick:G,"aria-label":`Edit ${ee}`,icon:p.jsx(xw,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),C?p.jsx(Mn,{tooltipText:"Export Project (JSON)",onClick:ce=>c(e.id,ce),"aria-label":`Export project ${ee}`,icon:p.jsx(ppe,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):p.jsxs("div",{className:"relative group/export",children:[p.jsx(Mn,{tooltipText:"Export Conversation","aria-label":`Export ${ee}`,icon:p.jsx(Jc,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),p.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                 bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:ce=>ce.stopPropagation(),children:[p.jsx(Tt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:ce=>l(e.id,"json",ce),children:"JSON"}),p.jsx(Tt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:ce=>l(e.id,"md",ce),children:"MD"})]})]}),p.jsx(Mn,{tooltipText:"Delete",onClick:U,"aria-label":`Delete ${ee}`,icon:p.jsx(Ho,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]})});ele.displayName="ConversationItemRenderer";function bJe({updateProject:e,updateConversation:t,deleteProject:n}){const[r,i]=T.useState(null),[s,a]=T.useState(null),[o,l]=T.useState(""),[c,u]=T.useState(!1),d=T.useCallback(y=>{i(y.id),a(y.itemType);const b=y.itemType==="project"?y.name:y.title;l(b),u(!1)},[]),h=T.useCallback(y=>{const b=r,v=y??(s==="project"&&o==="New Project");i(null),a(null),l(""),u(!1),v&&b&&n(b).catch(x=>{console.error("Failed to delete new project on cancel:",x),De.error("Failed to clean up cancelled new project.")})},[r,s,o,n]),m=T.useCallback(async(y,b,v)=>{if(y!==r||b!==s||c)return;const x=v==null?void 0:v.trim();if(!x){De.error("Name cannot be empty.");return}if(x===o&&!(b==="project"&&o==="New Project")){h();return}u(!0);try{b==="project"?await e(y,{name:x}):await t(y,{title:x}),De.success("Item renamed successfully."),i(null),a(null),l("")}catch(S){console.error("Failed to save item name:",S),De.error(`Failed to rename item: ${S instanceof Error?S.message:String(S)}`)}finally{u(!1)}},[r,s,c,e,t,h,o]);return{editingItemId:r,editingItemType:s,isSavingEdit:c,handleStartEditing:d,handleSaveEdit:m,handleCancelEdit:h,originalNameToCompare:o}}const tle=(e,t,n,r,i,s,a,o,l)=>{if(!n)return!0;const c=`${t}-${e}`;if(l[c]!==void 0)return l[c];let u=!1;{const d=s.get(e);if(d)if(d.name.toLowerCase().includes(n))u=!0;else{const h=o.get(e)||[],m=a.get(e)||[];for(const y of m)if(y.title.toLowerCase().includes(n)){u=!0;break}if(!u){for(const y of h)if(tle(y.id,"project",n,r,i,s,a,o,l)){u=!0;break}}}}return l[c]=u,u},vJe=({module:e})=>{const t=T.useRef(null),n=T.useRef(null),[r,i]=T.useState(!1),[,s]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>s({})),e.isLoading&&!$n.getState().isLoading&&!ko.getState().isLoading&&e.setIsLoading(!1),()=>e.setNotifyCallback(null)),[e]),T.useEffect(()=>{const ge=t.current;if(ge){const Ae=ge.querySelector("[data-radix-scroll-area-viewport]");if(Ae&&n.current!==Ae?(n.current=Ae,r||i(!0),s({})):!Ae&&n.current&&(n.current=null,i(!1)),!n.current){const le=new MutationObserver(()=>{const oe=ge.querySelector("[data-radix-scroll-area-viewport]");oe&&n.current!==oe&&(n.current=oe,i(!0),s({}),le.disconnect())});return le.observe(ge,{childList:!0,subtree:!0}),()=>le.disconnect()}}},[t.current,r]);const{selectedItemId:a,selectedItemType:o,conversations:l,syncRepos:c,conversationSyncStatus:u,selectItem:d,addConversation:h,updateConversation:m,deleteConversation:y,exportConversation:b,exportProject:v,getConversationById:x}=$n(Tn(ge=>({selectedItemId:ge.selectedItemId,selectedItemType:ge.selectedItemType,conversations:ge.conversations,syncRepos:ge.syncRepos,conversationSyncStatus:ge.conversationSyncStatus,selectItem:ge.selectItem,addConversation:ge.addConversation,updateConversation:ge.updateConversation,deleteConversation:ge.deleteConversation,exportConversation:ge.exportConversation,exportProject:ge.exportProject,getConversationById:ge.getConversationById}))),{projects:_,addProject:S,updateProject:C,deleteProject:E,getProjectById:A}=ko(Tn(ge=>({projects:ge.projects,addProject:ge.addProject,updateProject:ge.updateProject,deleteProject:ge.deleteProject,getProjectById:ge.getProjectById}))),R=e.isLoading,[N,M]=lt.useState(new Set),[P,L]=T.useState(""),O=bJe({updateProject:C,updateConversation:m,deleteProject:E}),{editingItemId:V,editingItemType:F,isSavingEdit:J,handleStartEditing:U,handleSaveEdit:G,handleCancelEdit:$,originalNameToCompare:ne}=O,H=T.useCallback(ge=>{M(Ae=>{const le=new Set(Ae);return le.has(ge)?le.delete(ge):le.add(ge),le})},[]),te=T.useCallback(()=>{if(o==="project")return a;if(o==="conversation"&&a){const ge=x(a);return(ge==null?void 0:ge.projectId)??null}return null},[a,o,x]),ee=T.useCallback(async()=>{if(!V)try{const ge=te(),Ae=await h({title:"New Chat",projectId:ge});d(Ae,"conversation")}catch(ge){console.error("Failed to create new chat:",ge),De.error("Failed to create new chat.")}},[V,te,h,d]),se=T.useCallback(async()=>{if(!V)try{const ge=te(),Ae=await S({name:"New Project",parentId:ge});d(Ae,"project"),ge&&M(le=>new Set(le).add(ge)),setTimeout(()=>{const le=A(Ae);le&&U({...le,itemType:"project"})},50)}catch(ge){console.error("Failed to create new project:",ge)}},[V,te,S,d,A,U]),he=T.useCallback((ge,Ae)=>{ge===V&&Ae===F||(V&&(ge!==V||Ae!==F)&&$(),(ge!==a||Ae!==o)&&d(ge,Ae))},[V,F,a,o,$,d]),ce=T.useCallback((ge,Ae)=>{Ae.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&y(ge).catch(le=>{console.error("Failed to delete conversation:",le),De.error("Failed to delete conversation.")})},[y]),Me=T.useCallback((ge,Ae)=>{Ae.stopPropagation(),E(ge).catch(le=>{console.error("Failed to delete project:",le),De.error("Failed to delete project.")})},[E]),je=T.useCallback(async(ge,Ae,le)=>{le.stopPropagation();try{await b(ge,Ae)}catch(oe){console.error(`Failed to export conversation as ${Ae}:`,oe)}},[b]),Ne=T.useCallback(async(ge,Ae)=>{Ae.stopPropagation();try{await v(ge)}catch(le){console.error("Failed to export project:",le)}},[v]),Ce=T.useMemo(()=>new Map((c||[]).map(ge=>[ge.id,ge.name])),[c]),{projectsById:Ue,conversationsByProjectId:et,projectsByParentId:qe}=T.useMemo(()=>{const ge=new Map(_.map(oe=>[oe.id,oe])),Ae=new Map;l.forEach(oe=>{const ie=oe.projectId??null;Ae.has(ie)||Ae.set(ie,[]),Ae.get(ie).push(oe)});const le=new Map;return _.forEach(oe=>{const ie=oe.parentId??null;le.has(ie)||le.set(ie,[]),le.get(ie).push(oe)}),{projectsById:ge,conversationsByProjectId:Ae,projectsByParentId:le}},[_,l]),Re=T.useMemo(()=>{const ge=[],Ae=P.toLowerCase(),le={};function oe(ie,Ee){const Be=(qe.get(ie)||[]).filter(It=>tle(It.id,"project",Ae,_,l,Ue,et,qe,le)),ke=(et.get(ie)||[]).filter(It=>It.title.toLowerCase().includes(Ae)),ct=[...Be,...ke];ct.sort((It,ht)=>new Date(ht.updatedAt).getTime()-new Date(It.updatedAt).getTime()),ct.forEach(It=>{"path"in It?(ge.push({id:`project-${It.id}`,originalId:It.id,type:"project",level:Ee,data:It,updatedAt:It.updatedAt}),N.has(It.id)&&oe(It.id,Ee+1)):ge.push({id:`conversation-${It.id}`,originalId:It.id,type:"conversation",level:Ee,data:It,updatedAt:It.updatedAt})})}return oe(null,0),ge},[_,l,P,N,Ue,et,qe]),K=X6({count:Re.length,getScrollElement:()=>n.current,estimateSize:()=>30,overscan:10});return p.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("h3",{className:"text-sm font-semibold",children:"LiteChat"}),p.jsx(id,{href:"https://github.com/DimitriGilbert/LiteChat",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub Repository",children:p.jsx(Tt,{size:"sm",variant:"ghost",className:"h-4 w-4 p-0",children:p.jsx(Ppe,{className:"h-4 w-4"})})}),p.jsx(id,{href:"release/latest.zip",download:"LiteChat.zip","aria-label":"Download LiteChat",children:p.jsx(Tt,{size:"sm",variant:"ghost",className:"h-4 w-4 p-0",children:p.jsx(Jc,{className:"h-4 w-4"})})})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{size:"sm",variant:"ghost",onClick:se,"aria-label":"New Project",disabled:R||!!V,className:"h-7 w-7 p-0",children:p.jsx(RH,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"bottom",children:"New Project"})]})}),p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{size:"sm",variant:"ghost",onClick:ee,"aria-label":"New Chat",disabled:R||!!V,className:"h-7 w-7 p-0",children:p.jsx(Y0,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"bottom",children:"New Chat"})]})})]})]}),p.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[p.jsx(Aa,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),p.jsx(pr,{type:"search",placeholder:"Filter...",value:P,onChange:ge=>L(ge.target.value),className:"h-8 text-xs pl-8",disabled:R})]}),p.jsxs(Na,{className:"flex-grow",ref:t,children:[R&&Re.length===0?p.jsxs("div",{className:"space-y-1 p-1",children:[p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"})]}):!R&&Re.length===0?p.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:P.trim()!==""?"No items match your filter.":"Workspace is empty."}):r&&p.jsx("div",{style:{height:`${K.getTotalSize()}px`,width:"100%",position:"relative"},children:K.getVirtualItems().map(ge=>{const Ae=Re[ge.index];if(!Ae)return null;const le={...Ae.data,itemType:Ae.type};return p.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${ge.size}px`,transform:`translateY(${ge.start}px)`},className:"px-1",children:p.jsx(ele,{item:le,level:Ae.level,selectedItemId:a,conversationSyncStatus:u,repoNameMap:Ce,onSelectItem:()=>he(Ae.originalId,Ae.type),onDeleteConversation:ce,onDeleteProject:Me,onExportConversation:je,onExportProject:Ne,expandedProjects:N,toggleProjectExpansion:H,editingItemId:V,editingItemType:F,handleStartEditing:U,handleSaveEdit:G,handleCancelEdit:$,isSavingEdit:J,originalNameToCompare:ne})},Ae.id)})}),!r&&!R&&p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Initializing list..."})]})]})},xJe=({module:e})=>{const{selectedItemType:t}=$n(Tn(r=>({selectedItemType:r.selectedItemType})));return e.isLoading?p.jsx(Yn,{className:"h-5 w-5 animate-spin text-muted-foreground"}):t==="project"?p.jsx(Uf,{className:"h-5 w-5 text-primary"}):t==="conversation"?p.jsx(zL,{className:"h-5 w-5 text-primary"}):p.jsx(zL,{className:"h-5 w-5 text-muted-foreground"})};class wJe{constructor(){we(this,"id","core-conversation-list");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"isLoading",!0);we(this,"conversationsLoading",!0);we(this,"projectsLoading",!0);we(this,"notifyComponentUpdate",null);we(this,"setIsLoading",t=>{var n;this.isLoading!==t&&(this.isLoading=t,(n=this.notifyComponentUpdate)==null||n.call(this))});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.conversationsLoading=$n.getState().isLoading,this.projectsLoading=ko.getState().isLoading,this.updateCombinedLoadingState(),t.emit(Wn.loadConversationsRequest,void 0),t.emit(fa.loadProjectsRequest,void 0);const n=t.on(Wn.conversationsLoaded,()=>{this.conversationsLoading=!1,this.updateCombinedLoadingState()}),r=t.on(fa.loaded,()=>{this.projectsLoading=!1,this.updateCombinedLoadingState()}),i=t.on(Wn.loadingStateChanged,a=>{a.isLoading!==this.conversationsLoading&&(this.conversationsLoading=a.isLoading,this.updateCombinedLoadingState())}),s=t.on(fa.loadingStateChanged,a=>{a.isLoading!==this.projectsLoading&&(this.projectsLoading=a.isLoading,this.updateCombinedLoadingState())});this.eventUnsubscribers.push(n,r,i,s)}updateCombinedLoadingState(){var n;const t=this.conversationsLoading||this.projectsLoading;this.isLoading!==t&&(this.isLoading=t,(n=this.notifyComponentUpdate)==null||n.call(this))}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Module "${this.id}" already registered. Skipping.`);return}this.unregisterCallback=t.registerChatControl({id:this.id,panel:"sidebar",status:()=>this.isLoading?"loading":"ready",renderer:()=>lt.createElement(vJe,{module:this}),iconRenderer:()=>lt.createElement(xJe,{module:this}),show:()=>!0})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}const _V=({module:e})=>{const t=(n,r)=>{e.openSettingsModal(n,r)};return p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",onClick:()=>t(),className:"h-8 w-8","aria-label":"Open Settings",children:p.jsx(f3,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"top",children:"Settings"})]})})};var GM="focusScope.autoFocusOnMount",KM="focusScope.autoFocusOnUnmount",SV={bubbles:!1,cancelable:!0},_Je="FocusScope",Q6=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=T.useState(null),c=xi(i),u=xi(s),d=T.useRef(null),h=En(t,b=>l(b)),m=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(S){if(m.paused||!o)return;const C=S.target;o.contains(C)?d.current=C:Rf(d.current,{select:!0})},v=function(S){if(m.paused||!o)return;const C=S.relatedTarget;C!==null&&(o.contains(C)||Rf(d.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const E of S)E.removedNodes.length>0&&Rf(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",v);const _=new MutationObserver(x);return o&&_.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",v),_.disconnect()}}},[r,o,m.paused]),T.useEffect(()=>{if(o){kV.add(m);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(GM,SV);o.addEventListener(GM,c),o.dispatchEvent(x),x.defaultPrevented||(SJe(AJe(nle(o)),{select:!0}),document.activeElement===b&&Rf(o))}return()=>{o.removeEventListener(GM,c),setTimeout(()=>{const x=new CustomEvent(KM,SV);o.addEventListener(KM,u),o.dispatchEvent(x),x.defaultPrevented||Rf(b??document.body,{select:!0}),o.removeEventListener(KM,u),kV.remove(m)},0)}}},[o,c,u,m]);const y=T.useCallback(b=>{if(!n&&!r||m.paused)return;const v=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(v&&x){const _=b.currentTarget,[S,C]=CJe(_);S&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&Rf(S,{select:!0})):b.shiftKey&&x===S&&(b.preventDefault(),n&&Rf(C,{select:!0})):x===_&&b.preventDefault()}},[n,r,m.paused]);return p.jsx(nr.div,{tabIndex:-1,...a,ref:h,onKeyDown:y})});Q6.displayName=_Je;function SJe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Rf(r,{select:t}),document.activeElement!==n)return}function CJe(e){const t=nle(e),n=CV(t,e),r=CV(t.reverse(),e);return[n,r]}function nle(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function CV(e,t){for(const n of e)if(!kJe(n,{upTo:t}))return n}function kJe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function EJe(e){return e instanceof HTMLInputElement&&"select"in e}function Rf(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&EJe(e)&&t&&e.select()}}var kV=TJe();function TJe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=EV(e,t),e.unshift(t)},remove(t){var n;e=EV(e,t),(n=e[0])==null||n.resume()}}}function EV(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function AJe(e){return e.filter(t=>t.tagName!=="A")}function RJe(e){const t=IJe(e),n=T.forwardRef((r,i)=>{const{children:s,...a}=r,o=T.Children.toArray(s),l=o.find(MJe);if(l){const c=l.props.children,u=o.map(d=>d===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...a,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return p.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function IJe(e){const t=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const a=PJe(i),o=jJe(s,i.props);return i.type!==T.Fragment&&(o.ref=r?Ko(r,a):a),T.cloneElement(i,o)}return T.Children.count(i)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var NJe=Symbol("radix.slottable");function MJe(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===NJe}function jJe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function PJe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var TT="Dialog",[rle,hlt]=Ds(TT),[OJe,xc]=rle(TT),ile=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=T.useRef(null),l=T.useRef(null),[c,u]=fc({prop:r,defaultProp:i??!1,onChange:s,caller:TT});return p.jsx(OJe,{scope:t,triggerRef:o,contentRef:l,contentId:Ys(),titleId:Ys(),descriptionId:Ys(),open:c,onOpenChange:u,onOpenToggle:T.useCallback(()=>u(d=>!d),[u]),modal:a,children:n})};ile.displayName=TT;var sle="DialogTrigger",DJe=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=xc(sle,n),s=En(t,i.triggerRef);return p.jsx(nr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":n5(i.open),...r,ref:s,onClick:Vt(e.onClick,i.onOpenToggle)})});DJe.displayName=sle;var e5="DialogPortal",[FJe,ale]=rle(e5,{forceMount:void 0}),ole=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=xc(e5,t);return p.jsx(FJe,{scope:t,forceMount:n,children:T.Children.map(r,a=>p.jsx(ta,{present:n||s.open,children:p.jsx(Qk,{asChild:!0,container:i,children:a})}))})};ole.displayName=e5;var kk="DialogOverlay",lle=T.forwardRef((e,t)=>{const n=ale(kk,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=xc(kk,e.__scopeDialog);return s.modal?p.jsx(ta,{present:r||s.open,children:p.jsx(BJe,{...i,ref:t})}):null});lle.displayName=kk;var LJe=RJe("DialogOverlay.RemoveScroll"),BJe=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=xc(kk,n);return p.jsx(m1,{as:LJe,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(nr.div,{"data-state":n5(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Jp="DialogContent",cle=T.forwardRef((e,t)=>{const n=ale(Jp,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=xc(Jp,e.__scopeDialog);return p.jsx(ta,{present:r||s.open,children:s.modal?p.jsx($Je,{...i,ref:t}):p.jsx(zJe,{...i,ref:t})})});cle.displayName=Jp;var $Je=T.forwardRef((e,t)=>{const n=xc(Jp,e.__scopeDialog),r=T.useRef(null),i=En(t,n.contentRef,r);return T.useEffect(()=>{const s=r.current;if(s)return xT(s)},[]),p.jsx(ule,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Vt(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Vt(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:Vt(e.onFocusOutside,s=>s.preventDefault())})}),zJe=T.forwardRef((e,t)=>{const n=xc(Jp,e.__scopeDialog),r=T.useRef(!1),i=T.useRef(!1);return p.jsx(ule,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),ule=T.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=xc(Jp,n),l=T.useRef(null),c=En(t,l);return bT(),p.jsxs(p.Fragment,{children:[p.jsx(Q6,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(Kk,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":n5(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(UJe,{titleId:o.titleId}),p.jsx(VJe,{contentRef:l,descriptionId:o.descriptionId})]})]})}),t5="DialogTitle",dle=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=xc(t5,n);return p.jsx(nr.h2,{id:i.titleId,...r,ref:t})});dle.displayName=t5;var fle="DialogDescription",hle=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=xc(fle,n);return p.jsx(nr.p,{id:i.descriptionId,...r,ref:t})});hle.displayName=fle;var ple="DialogClose",mle=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=xc(ple,n);return p.jsx(nr.button,{type:"button",...r,ref:t,onClick:Vt(e.onClick,()=>i.onOpenChange(!1))})});mle.displayName=ple;function n5(e){return e?"open":"closed"}var gle="DialogTitleWarning",[plt,yle]=Gve(gle,{contentName:Jp,titleName:t5,docsSlug:"dialog"}),UJe=({titleId:e})=>{const t=yle(gle),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return T.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},qJe="DialogDescriptionWarning",VJe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yle(qJe).contentName}}.`;return T.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},ble=ile,vle=ole,xle=lle,wle=cle,HJe=dle,WJe=hle,_le=mle;function Iy({...e}){return p.jsx(ble,{"data-slot":"dialog",...e})}function GJe({...e}){return p.jsx(vle,{"data-slot":"dialog-portal",...e})}function KJe({...e}){return p.jsx(_le,{"data-slot":"dialog-close",...e})}function YJe({className:e,...t}){return p.jsx(xle,{"data-slot":"dialog-overlay",className:ft("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Ny({className:e,children:t,...n}){return p.jsxs(GJe,{"data-slot":"dialog-portal",children:[p.jsx(YJe,{}),p.jsxs(wle,{"data-slot":"dialog-content",className:ft("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,p.jsxs(_le,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[p.jsx(Ya,{}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function My({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-header",className:ft("flex flex-col gap-2 text-center sm:text-left",e),...t})}function jy({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-footer",className:ft("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Py({className:e,...t}){return p.jsx(HJe,{"data-slot":"dialog-title",className:ft("text-lg leading-none font-semibold",e),...t})}function w1({className:e,...t}){return p.jsx(WJe,{"data-slot":"dialog-description",className:ft("text-muted-foreground text-sm",e),...t})}function TV(e){const t=ZJe(e),n=T.forwardRef((r,i)=>{const{children:s,...a}=r,o=T.Children.toArray(s),l=o.find(JJe);if(l){const c=l.props.children,u=o.map(d=>d===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...a,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return p.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function ZJe(e){const t=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const a=eQe(i),o=QJe(s,i.props);return i.type!==T.Fragment&&(o.ref=r?Ko(r,a):a),T.cloneElement(i,o)}return T.Children.count(i)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var XJe=Symbol("radix.slottable");function JJe(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===XJe}function QJe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function eQe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function r5(e){const t=e+"CollectionProvider",[n,r]=Ds(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=b=>{const{scope:v,children:x}=b,_=lt.useRef(null),S=lt.useRef(new Map).current;return p.jsx(i,{scope:v,itemMap:S,collectionRef:_,children:x})};a.displayName=t;const o=e+"CollectionSlot",l=TV(o),c=lt.forwardRef((b,v)=>{const{scope:x,children:_}=b,S=s(o,x),C=En(v,S.collectionRef);return p.jsx(l,{ref:C,children:_})});c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=TV(u),m=lt.forwardRef((b,v)=>{const{scope:x,children:_,...S}=b,C=lt.useRef(null),E=En(v,C),A=s(u,x);return lt.useEffect(()=>(A.itemMap.set(C,{ref:C,...S}),()=>void A.itemMap.delete(C))),p.jsx(h,{[d]:"",ref:E,children:_})});m.displayName=u;function y(b){const v=s(e+"CollectionConsumer",b);return lt.useCallback(()=>{const _=v.collectionRef.current;if(!_)return[];const S=Array.from(_.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((A,R)=>S.indexOf(A.ref.current)-S.indexOf(R.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:c,ItemSlot:m},y,r]}var YM="rovingFocusGroup.onEntryFocus",tQe={bubbles:!1,cancelable:!0},_1="RovingFocusGroup",[zj,Sle,nQe]=r5(_1),[rQe,AT]=Ds(_1,[nQe]),[iQe,sQe]=rQe(_1),Cle=T.forwardRef((e,t)=>p.jsx(zj.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(zj.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(aQe,{...e,ref:t})})}));Cle.displayName=_1;var aQe=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=T.useRef(null),m=En(t,h),y=ky(s),[b,v]=fc({prop:a,defaultProp:o??null,onChange:l,caller:_1}),[x,_]=T.useState(!1),S=xi(c),C=Sle(n),E=T.useRef(!1),[A,R]=T.useState(0);return T.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(YM,S),()=>N.removeEventListener(YM,S)},[S]),p.jsx(iQe,{scope:n,orientation:r,dir:y,loop:i,currentTabStopId:b,onItemFocus:T.useCallback(N=>v(N),[v]),onItemShiftTab:T.useCallback(()=>_(!0),[]),onFocusableItemAdd:T.useCallback(()=>R(N=>N+1),[]),onFocusableItemRemove:T.useCallback(()=>R(N=>N-1),[]),children:p.jsx(nr.div,{tabIndex:x||A===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:Vt(e.onMouseDown,()=>{E.current=!0}),onFocus:Vt(e.onFocus,N=>{const M=!E.current;if(N.target===N.currentTarget&&M&&!x){const P=new CustomEvent(YM,tQe);if(N.currentTarget.dispatchEvent(P),!P.defaultPrevented){const L=C().filter(U=>U.focusable),O=L.find(U=>U.active),V=L.find(U=>U.id===b),J=[O,V,...L].filter(Boolean).map(U=>U.ref.current);Tle(J,u)}}E.current=!1}),onBlur:Vt(e.onBlur,()=>_(!1))})})}),kle="RovingFocusGroupItem",Ele=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:a,...o}=e,l=Ys(),c=s||l,u=sQe(kle,n),d=u.currentTabStopId===c,h=Sle(n),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:b}=u;return T.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),p.jsx(zj.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:p.jsx(nr.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:Vt(e.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:Vt(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Vt(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=cQe(v,u.orientation,u.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let S=h().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")S.reverse();else if(x==="prev"||x==="next"){x==="prev"&&S.reverse();const C=S.indexOf(v.currentTarget);S=u.loop?uQe(S,C+1):S.slice(C+1)}setTimeout(()=>Tle(S))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:b!=null}):a})})});Ele.displayName=kle;var oQe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lQe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function cQe(e,t,n){const r=lQe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return oQe[r]}function Tle(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function uQe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Ale=Cle,Rle=Ele,RT="Tabs",[dQe,mlt]=Ds(RT,[AT]),Ile=AT(),[fQe,i5]=dQe(RT),Nle=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=e,u=ky(o),[d,h]=fc({prop:r,onChange:i,defaultProp:s??"",caller:RT});return p.jsx(fQe,{scope:n,baseId:Ys(),value:d,onValueChange:h,orientation:a,dir:u,activationMode:l,children:p.jsx(nr.div,{dir:u,"data-orientation":a,...c,ref:t})})});Nle.displayName=RT;var Mle="TabsList",jle=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=i5(Mle,n),a=Ile(n);return p.jsx(Ale,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:r,children:p.jsx(nr.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});jle.displayName=Mle;var Ple="TabsTrigger",Ole=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,a=i5(Ple,n),o=Ile(n),l=Lle(a.baseId,r),c=Ble(a.baseId,r),u=r===a.value;return p.jsx(Rle,{asChild:!0,...o,focusable:!i,active:u,children:p.jsx(nr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:t,onMouseDown:Vt(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?a.onValueChange(r):d.preventDefault()}),onKeyDown:Vt(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(r)}),onFocus:Vt(e.onFocus,()=>{const d=a.activationMode!=="manual";!u&&!i&&d&&a.onValueChange(r)})})})});Ole.displayName=Ple;var Dle="TabsContent",Fle=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=e,o=i5(Dle,n),l=Lle(o.baseId,r),c=Ble(o.baseId,r),u=r===o.value,d=T.useRef(u);return T.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),p.jsx(ta,{present:i||u,children:({present:h})=>p.jsx(nr.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});Fle.displayName=Dle;function Lle(e,t){return`${e}-trigger-${t}`}function Ble(e,t){return`${e}-content-${t}`}var hQe=Nle,pQe=jle,mQe=Ole,gQe=Fle;function yQe({className:e,...t}){return p.jsx(hQe,{"data-slot":"tabs",className:ft("flex flex-col gap-2",e),...t})}function bQe({className:e,...t}){return p.jsx(pQe,{"data-slot":"tabs-list",className:ft("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function vQe({className:e,...t}){return p.jsx(mQe,{"data-slot":"tabs-trigger",className:ft("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function xQe({className:e,...t}){return p.jsx(gQe,{"data-slot":"tabs-content",className:ft("flex-1 outline-none",e),...t})}const Ld=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:i,listClassName:s,contentContainerClassName:a,scrollable:o})=>{var m;const[l,c]=T.useState(n??t??((m=e[0])==null?void 0:m.value));T.useEffect(()=>{n!==void 0&&n!==l&&c(n)},[n,l]);const u=y=>{console.log("handleValueChange",y),c(y),r&&r(y)},d=ft("px-1 py-0.25 text-xs sm:px-3 sm:py-1.5 sm:text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),h=({children:y})=>{const b=ft("flex-grow overflow-y-auto pb-2 sm:pb-6 pr-1 sm:pr-2 -mr-1 sm:-mr-2",a);return o?p.jsx(Na,{className:b,children:y}):p.jsx("div",{className:b,children:y})};return p.jsxs(yQe,{value:l,onValueChange:u,defaultValue:t,className:ft("flex flex-col h-full",i),children:[p.jsx(bQe,{className:ft("flex-shrink-0 sticky top-0 bg-background z-10 mb-2 sm:mb-4 flex-wrap h-auto justify-start border-b gap-0.5 sm:gap-1 p-0.5 sm:p-1 -mx-2 sm:-mx-6 px-2 sm:px-6",s),children:e.map(y=>p.jsx(vQe,{value:y.value,disabled:y.disabled,className:d,children:y.label},y.value))}),p.jsx(h,{children:e.map(y=>p.jsx(xQe,{value:y.value,className:"data-[state=inactive]:hidden h-full",children:y.content},y.value))})]})},$le=T.memo(({isOpen:e,onClose:t,initialTab:n})=>{const{modSettingsTabs:r}=uh(Tn(u=>({modSettingsTabs:u.modSettingsTabs||[]}))),i=T.useMemo(()=>[...r.map(h=>{const m=h.component;return{value:h.id,label:h.title,content:p.jsx(m,{}),order:h.order??999}})].sort((h,m)=>(h.order??999)-(m.order??999)),[r]),s=T.useCallback(()=>i.length>0?i[0].value:"general",[i]),[a,o]=T.useState(s());T.useEffect(()=>{if(e){let u=s();n&&i.some(d=>d.value===n)?u=n:n&&(console.warn(`[SettingsModal] Initial tab "${n}" not found. Defaulting to "${u}".`),De.error(`Settings tab "${n}" not found. Opening default tab.`)),o(u)}},[e,n,i,s]);const l=u=>{u||t()},c=u=>{o(u)};return p.jsx(Iy,{open:e,onOpenChange:l,children:p.jsxs(Ny,{className:ft("w-[95vw] h-[90vh] flex flex-col p-0","sm:w-[90vw] sm:h-[85vh]","md:w-[85vw] md:max-w-[1200px] md:h-[80vh]","lg:w-[75vw]","min-h-[500px] max-h-[95vh]"),children:[p.jsxs(My,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsx(Py,{children:"Settings"}),p.jsx(w1,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),i.length>0?p.jsx(Ld,{tabs:i,initialValue:a,onValueChange:c,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"flex-grow overflow-y-auto pb-4 md:pb-6",scrollable:!1},a):p.jsx("div",{className:"flex-grow flex items-center justify-center text-muted-foreground p-4",children:"No settings tabs available or still loading. Check console for module registration errors."}),p.jsx(jy,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:p.jsx(Tt,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});$le.displayName="SettingsModalComponent";const wQe=$le;class _Qe{constructor(){we(this,"id","core-settings-trigger");we(this,"modalId","settingsModal");we(this,"unregisterChatControlCallback",null);we(this,"unregisterModalProviderCallback",null);we(this,"modApiRef",null);we(this,"openSettingsModal",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(Rr.openModalRequest,{modalId:this.modalId,initialTab:t||"general",initialSubTab:n})});we(this,"closeSettingsModal",()=>{var t;(t=this.modApiRef)==null||t.emit(Rr.closeModalRequest,{modalId:this.modalId})})}async initialize(t){this.modApiRef=t}register(t){if(this.modApiRef=t,this.unregisterChatControlCallback&&this.unregisterModalProviderCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterChatControlCallback||(this.unregisterChatControlCallback=t.registerChatControl({id:this.id,panel:"sidebar-footer",status:()=>"ready",renderer:()=>lt.createElement(_V,{module:this}),iconRenderer:()=>lt.createElement(_V,{module:this}),show:()=>!0})),this.unregisterModalProviderCallback||(this.unregisterModalProviderCallback=t.registerModalProvider(this.modalId,n=>lt.createElement(wQe,{isOpen:n.isOpen,onClose:n.onClose,initialTab:n.initialTab,initialSubTab:n.initialSubTab})))}destroy(){this.unregisterChatControlCallback&&(this.unregisterChatControlCallback(),this.unregisterChatControlCallback=null),this.unregisterModalProviderCallback&&(this.unregisterModalProviderCallback(),this.unregisterModalProviderCallback=null),this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const SQe=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getIsSidebarCollapsed();return p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",onClick:()=>e.toggleSidebar(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?p.jsx(cme,{className:"h-4 w-4"}):p.jsx(ome,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};class CQe{constructor(){we(this,"id","core-sidebar-toggle");we(this,"unregisterCallback",null);we(this,"notifyComponentUpdate",null);we(this,"modApiRef",null);we(this,"getIsSidebarCollapsed",()=>dw.getState().isSidebarCollapsed);we(this,"toggleSidebar",t=>{var i,s;const n=dw.getState().isSidebarCollapsed,r=t??!n;n!==r&&((i=this.modApiRef)==null||i.emit(Rr.toggleSidebarRequest,{isCollapsed:r}),(s=this.notifyComponentUpdate)==null||s.call(this))});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=()=>lt.createElement(SQe,{module:this});this.unregisterCallback=t.registerChatControl({id:this.id,panel:"sidebar-footer",status:()=>"ready",renderer:n,iconRenderer:n,show:()=>!0})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}function W0({form:e,name:t,label:n,placeholder:r,disabled:i,wrapperClassName:s,allowNull:a=!1,min:o,max:l,step:c,className:u,onBlurInput:d,...h}){return p.jsx(e.Field,{name:t,children:m=>{const y=x=>{const _=x.target.value;if(_===""&&a)m.handleChange(null);else{const S=parseFloat(_);isNaN(S)?_===""&&!a&&m.handleChange(_):m.handleChange(S)}},b=typeof m.state.value=="number"?m.state.value.toString():(m.state.value===null&&a,""),v=x=>{m.handleBlur(),d&&d(x)};return p.jsxs("div",{className:ft("space-y-1.5",s),children:[" ",p.jsx(en,{htmlFor:m.name,className:"text-sm",children:n}),p.jsx(pr,{id:m.name,name:m.name,type:"number",value:b,onBlur:v,onChange:y,placeholder:r,disabled:i??m.form.state.isSubmitting,min:o,max:l,step:c,className:ft(u,m.state.meta.errors.length?"border-destructive":""),...h}),p.jsx(Ss,{field:m})]})}})}var zle=["PageUp","PageDown"],Ule=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],qle={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Oy="Slider",[Uj,kQe,EQe]=r5(Oy),[Vle,glt]=Ds(Oy,[EQe]),[TQe,IT]=Vle(Oy),Hle=T.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:m=!1,form:y,...b}=e,v=T.useRef(new Set),x=T.useRef(0),S=a==="horizontal"?AQe:RQe,[C=[],E]=fc({prop:u,defaultProp:c,onChange:L=>{var V;(V=[...v.current][x.current])==null||V.focus(),d(L)}}),A=T.useRef(C);function R(L){const O=PQe(C,L);P(L,O)}function N(L){P(L,x.current)}function M(){const L=A.current[x.current];C[x.current]!==L&&h(C)}function P(L,O,{commit:V}={commit:!1}){const F=LQe(s),J=BQe(Math.round((L-r)/s)*s+r,F),U=ew(J,[r,i]);E((G=[])=>{const $=MQe(G,U,O);if(FQe($,l*s)){x.current=$.indexOf(U);const ne=String($)!==String(G);return ne&&V&&h($),ne?$:G}else return G})}return p.jsx(TQe,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:i,valueIndexToChangeRef:x,thumbs:v.current,values:C,orientation:a,form:y,children:p.jsx(Uj.Provider,{scope:e.__scopeSlider,children:p.jsx(Uj.Slot,{scope:e.__scopeSlider,children:p.jsx(S,{"aria-disabled":o,"data-disabled":o?"":void 0,...b,ref:t,onPointerDown:Vt(b.onPointerDown,()=>{o||(A.current=C)}),min:r,max:i,inverted:m,onSlideStart:o?void 0:R,onSlideMove:o?void 0:N,onSlideEnd:o?void 0:M,onHomeKeyDown:()=>!o&&P(r,0,{commit:!0}),onEndKeyDown:()=>!o&&P(i,C.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:O})=>{if(!o){const J=zle.includes(L.key)||L.shiftKey&&Ule.includes(L.key)?10:1,U=x.current,G=C[U],$=s*J*O;P(G+$,U,{commit:!0})}}})})})})});Hle.displayName=Oy;var[Wle,Gle]=Vle(Oy,{startEdge:"left",endEdge:"right",size:"width",direction:1}),AQe=T.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,[d,h]=T.useState(null),m=En(t,S=>h(S)),y=T.useRef(void 0),b=ky(i),v=b==="ltr",x=v&&!s||!v&&s;function _(S){const C=y.current||d.getBoundingClientRect(),E=[0,C.width],R=s5(E,x?[n,r]:[r,n]);return y.current=C,R(S-C.left)}return p.jsx(Wle,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:p.jsx(Kle,{dir:b,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const C=_(S.clientX);a==null||a(C)},onSlideMove:S=>{const C=_(S.clientX);o==null||o(C)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:S=>{const E=qle[x?"from-left":"from-right"].includes(S.key);c==null||c({event:S,direction:E?-1:1})}})})}),RQe=T.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=e,u=T.useRef(null),d=En(t,u),h=T.useRef(void 0),m=!i;function y(b){const v=h.current||u.current.getBoundingClientRect(),x=[0,v.height],S=s5(x,m?[r,n]:[n,r]);return h.current=v,S(b-v.top)}return p.jsx(Wle,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:p.jsx(Kle,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const v=y(b.clientY);s==null||s(v)},onSlideMove:b=>{const v=y(b.clientY);a==null||a(v)},onSlideEnd:()=>{h.current=void 0,o==null||o()},onStepKeyDown:b=>{const x=qle[m?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:x?-1:1})}})})}),Kle=T.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=e,u=IT(Oy,n);return p.jsx(nr.span,{...c,ref:t,onKeyDown:Vt(e.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(o(d),d.preventDefault()):zle.concat(Ule).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Vt(e.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():r(d)}),onPointerMove:Vt(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:Vt(e.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),Yle="SliderTrack",Zle=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=IT(Yle,n);return p.jsx(nr.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:t})});Zle.displayName=Yle;var qj="SliderRange",Xle=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=IT(qj,n),s=Gle(qj,n),a=T.useRef(null),o=En(t,a),l=i.values.length,c=i.values.map(h=>ece(h,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return p.jsx(nr.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:o,style:{...e.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});Xle.displayName=qj;var Vj="SliderThumb",Jle=T.forwardRef((e,t)=>{const n=kQe(e.__scopeSlider),[r,i]=T.useState(null),s=En(t,o=>i(o)),a=T.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return p.jsx(IQe,{...e,ref:s,index:a})}),IQe=T.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:i,...s}=e,a=IT(Vj,n),o=Gle(Vj,n),[l,c]=T.useState(null),u=En(t,_=>c(_)),d=l?a.form||!!l.closest("form"):!0,h=ry(l),m=a.values[r],y=m===void 0?0:ece(m,a.min,a.max),b=jQe(r,a.values.length),v=h==null?void 0:h[o.size],x=v?OQe(v,y,o.direction):0;return T.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${y}% + ${x}px)`},children:[p.jsx(Uj.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(nr.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":a.min,"aria-valuenow":m,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:u,style:m===void 0?{display:"none"}:e.style,onFocus:Vt(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),d&&p.jsx(Qle,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:m},r)]})});Jle.displayName=Vj;var NQe="RadioBubbleInput",Qle=T.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const i=T.useRef(null),s=En(i,r),a=vT(t);return T.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&u){const d=new Event("input",{bubbles:!0});u.call(o,t),o.dispatchEvent(d)}},[a,t]),p.jsx(nr.input,{style:{display:"none"},...n,ref:s,defaultValue:t})});Qle.displayName=NQe;function MQe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((i,s)=>i-s)}function ece(e,t,n){const s=100/(n-t)*(e-t);return ew(s,[0,100])}function jQe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function PQe(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),r=Math.min(...n);return n.indexOf(r)}function OQe(e,t,n){const r=e/2,s=s5([0,50],[0,r]);return(r-s(t)*n)*n}function DQe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function FQe(e,t){if(t>0){const n=DQe(e);return Math.min(...n)>=t}return!0}function s5(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function LQe(e){return(String(e).split(".")[1]||"").length}function BQe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var $Qe=Hle,zQe=Zle,UQe=Xle,qQe=Jle;function Rv({className:e,defaultValue:t,value:n,min:r=0,max:i=100,...s}){const a=T.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,i],[n,t,r,i]);return p.jsxs($Qe,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:i,className:ft("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...s,children:[p.jsx(zQe,{"data-slot":"slider-track",className:ft("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:p.jsx(UQe,{"data-slot":"slider-range",className:ft("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(o,l)=>p.jsx(qQe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}function nc({form:e,name:t,label:n,valueLabelPrefix:r="",valueLabelSuffix:i="",valueDisplayPrecision:s=2,showRawValue:a=!1,disabled:o,wrapperClassName:l,className:c,min:u,max:d,step:h,...m}){return p.jsx(e.Field,{name:t,children:y=>{const b=typeof y.state.value=="number"?y.state.value:u??0,v=b.toFixed(s);return p.jsxs("div",{className:ft("space-y-1.5",l),children:[p.jsxs(en,{htmlFor:y.name,className:"text-sm",children:[n," (",r,v,i,")",a&&p.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(Raw: ",y.state.value,")"]})]}),p.jsx(Rv,{id:y.name,name:y.name,value:[b],onValueChange:x=>y.handleChange(x[0]),onBlur:y.handleBlur,disabled:o??y.form.state.isSubmitting,min:u,max:d,step:h,className:ft(c,y.state.meta.errors.length?"border-destructive":""),...m}),p.jsx(Ss,{field:y})]})}})}const VQe=Ze({temperature:At().min(0).max(1),topP:At().min(0).max(1),maxTokens:At().min(1).nullable(),topK:At().min(1).nullable(),presencePenalty:At().min(-2).max(2),frequencyPenalty:At().min(-2).max(2)}),HQe=({module:e,className:t})=>{const n=ea({defaultValues:{temperature:e.temperature??e.defaultTemperature??.7,topP:e.topP??e.defaultTopP??1,maxTokens:e.maxTokens??e.defaultMaxTokens??null,topK:e.topK??e.defaultTopK??null,presencePenalty:e.presencePenalty??e.defaultPresencePenalty??0,frequencyPenalty:e.frequencyPenalty??e.defaultFrequencyPenalty??0},validators:{onChangeAsync:VQe,onChangeAsyncDebounceMs:500}});T.useEffect(()=>{n.reset({temperature:e.temperature??e.defaultTemperature??.7,topP:e.topP??e.defaultTopP??1,maxTokens:e.maxTokens??e.defaultMaxTokens??null,topK:e.topK??e.defaultTopK??null,presencePenalty:e.presencePenalty??e.defaultPresencePenalty??0,frequencyPenalty:e.frequencyPenalty??e.defaultFrequencyPenalty??0})},[e.temperature,e.defaultTemperature,e.topP,e.defaultTopP,e.maxTokens,e.defaultMaxTokens,e.topK,e.defaultTopK,e.presencePenalty,e.defaultPresencePenalty,e.frequencyPenalty,e.defaultFrequencyPenalty]);const[,r]=lt.useState({});T.useEffect(()=>{const u=()=>r({});return e.setNotifyCallback(u),()=>e.setNotifyCallback(null)},[e]);const i=T.useCallback((u,d,h)=>{var m;((m=n.getFieldMeta(u))==null?void 0:m.errors.length)===0&&d(h)},[n,e]),s=T.useCallback((u,d)=>{var h;if(((h=n.getFieldMeta(u))==null?void 0:h.errors.length)===0){const m=n.getFieldValue(u);d(m)}},[n,e]),a=T.useCallback((u,d,h)=>{n.setFieldValue(u,h),d(null)},[n,e]),o=e.supportedParams,l=e.defaultTemperature!==void 0||e.defaultTopP!==void 0||e.defaultMaxTokens!==void 0||e.defaultTopK!==void 0||e.defaultPresencePenalty!==void 0||e.defaultFrequencyPenalty!==void 0,c=(u,d,h,m,y="N/A")=>{var b;return!l||m===void 0?null:p.jsxs(Tt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>a(u,h,m??null),disabled:d===null,children:["Use Default (",((b=m==null?void 0:m.toFixed)==null?void 0:b.call(m,2))??y,")"]})};return p.jsxs("div",{className:ft("space-y-4 p-4",t),children:[o.has("temperature")&&p.jsxs("div",{className:"space-y-0.5",children:[" ",p.jsx(nc,{form:n,name:"temperature",label:"Temperature",min:0,max:1,step:.01,valueDisplayPrecision:2,onValueCommit:u=>i("temperature",e.setTemperature,u[0]),wrapperClassName:"text-xs"}),c("temperature",e.temperature,e.setTemperature,e.defaultTemperature,"0.70")]}),o.has("top_p")&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsx(nc,{form:n,name:"topP",label:"Top P",min:0,max:1,step:.01,valueDisplayPrecision:2,onValueCommit:u=>i("topP",e.setTopP,u[0]),wrapperClassName:"text-xs"}),c("topP",e.topP,e.setTopP,e.defaultTopP,"1.00")]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-start",children:[" ",o.has("max_tokens")&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsx(W0,{form:n,name:"maxTokens",label:"Max Tokens",placeholder:`Default: ${e.defaultMaxTokens??"None"}`,min:1,allowNull:!0,onBlurInput:()=>s("maxTokens",e.setMaxTokens),className:"h-8 text-xs",wrapperClassName:"text-xs"}),c("maxTokens",e.maxTokens,e.setMaxTokens,e.defaultMaxTokens,"None")]}),o.has("top_k")&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsx(W0,{form:n,name:"topK",label:"Top K",placeholder:`Default: ${e.defaultTopK??"None"}`,min:1,allowNull:!0,onBlurInput:()=>s("topK",e.setTopK),className:"h-8 text-xs",wrapperClassName:"text-xs"}),c("topK",e.topK,e.setTopK,e.defaultTopK,"None")]})]}),o.has("presence_penalty")&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsx(nc,{form:n,name:"presencePenalty",label:"Presence Penalty",min:-2,max:2,step:.01,valueDisplayPrecision:2,onValueCommit:u=>i("presencePenalty",e.setPresencePenalty,u[0]),wrapperClassName:"text-xs"}),c("presencePenalty",e.presencePenalty,e.setPresencePenalty,e.defaultPresencePenalty,"0.00")]}),o.has("frequency_penalty")&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsx(nc,{form:n,name:"frequencyPenalty",label:"Frequency Penalty",min:-2,max:2,step:.01,valueDisplayPrecision:2,onValueCommit:u=>i("frequencyPenalty",e.setFrequencyPenalty,u[0]),wrapperClassName:"text-xs"}),c("frequencyPenalty",e.frequencyPenalty,e.setFrequencyPenalty,e.defaultFrequencyPenalty,"0.00")]})]})},WQe=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getIsStreaming();return e.getIsVisible()?p.jsxs(Ll,{children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Bl,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:n,"aria-label":"Adjust Advanced Parameters",children:p.jsx(Ime,{className:"h-4 w-4"})})})}),p.jsx(wr,{side:"top",children:"Advanced Parameters"})]})}),p.jsx($l,{className:"w-auto p-0",align:"start",children:p.jsx(HQe,{module:e})})]}):null};class GQe{constructor(){we(this,"id","core-parameters");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"temperature",null);we(this,"topP",null);we(this,"maxTokens",null);we(this,"topK",null);we(this,"presencePenalty",null);we(this,"frequencyPenalty",null);we(this,"defaultTemperature",null);we(this,"defaultTopP",null);we(this,"defaultMaxTokens",null);we(this,"defaultTopK",null);we(this,"defaultPresencePenalty",null);we(this,"defaultFrequencyPenalty",null);we(this,"isStreaming",!1);we(this,"isVisible",!0);we(this,"supportedParams",new Set);we(this,"notifyComponentUpdate",null);we(this,"getIsStreaming",()=>this.isStreaming);we(this,"getIsVisible",()=>this.isVisible);we(this,"setTemperature",t=>{var n,r;this.temperature=t,(n=this.modApiRef)==null||n.emit(Bn.setTemperatureRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});we(this,"setTopP",t=>{var n,r;this.topP=t,(n=this.modApiRef)==null||n.emit(Bn.setTopPRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});we(this,"setMaxTokens",t=>{var n,r;this.maxTokens=t,(n=this.modApiRef)==null||n.emit(Bn.setMaxTokensRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});we(this,"setTopK",t=>{var n,r;this.topK=t,(n=this.modApiRef)==null||n.emit(Bn.setTopKRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});we(this,"setPresencePenalty",t=>{var n,r;this.presencePenalty=t,(n=this.modApiRef)==null||n.emit(Bn.setPresencePenaltyRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});we(this,"setFrequencyPenalty",t=>{var n,r;this.frequencyPenalty=t,(n=this.modApiRef)==null||n.emit(Bn.setFrequencyPenaltyRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.loadInitialState(),this.updateSupportedParams();const n=t.on(tr.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(lr.selectedModelChanged,()=>{var a;this.updateSupportedParams(),this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(sn.enableAdvancedSettingsChanged,()=>{var a;this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),s=t.on(Bn.parameterChanged,a=>{var o;if(typeof a=="object"&&a&&"params"in a){const l=a.params;let c=!1;"temperature"in l&&this.temperature!==l.temperature&&(this.temperature=l.temperature??null,c=!0),"topP"in l&&this.topP!==l.topP&&(this.topP=l.topP??null,c=!0),"maxTokens"in l&&this.maxTokens!==l.maxTokens&&(this.maxTokens=l.maxTokens??null,c=!0),"topK"in l&&this.topK!==l.topK&&(this.topK=l.topK??null,c=!0),"presencePenalty"in l&&this.presencePenalty!==l.presencePenalty&&(this.presencePenalty=l.presencePenalty??null,c=!0),"frequencyPenalty"in l&&this.frequencyPenalty!==l.frequencyPenalty&&(this.frequencyPenalty=l.frequencyPenalty??null,c=!0),c&&((o=this.notifyComponentUpdate)==null||o.call(this))}});this.eventUnsubscribers.push(n,r,i,s)}loadInitialState(){const t=mr.getState(),n=_o.getState();this.isStreaming=Ln.getState().status==="streaming",this.temperature=n.temperature,this.topP=n.topP,this.maxTokens=n.maxTokens,this.topK=n.topK,this.presencePenalty=n.presencePenalty,this.frequencyPenalty=n.frequencyPenalty,this.defaultTemperature=t.temperature,this.defaultTopP=t.topP,this.defaultMaxTokens=t.maxTokens,this.defaultTopK=t.topK,this.defaultPresencePenalty=t.presencePenalty,this.defaultFrequencyPenalty=t.frequencyPenalty,this.updateVisibility()}updateSupportedParams(){var o;const t=Ir.getState();if(!t.selectedModelId){this.supportedParams=new Set;return}const{providerId:n,modelId:r}=rc(t.selectedModelId);if(!n||!r){this.supportedParams=new Set;return}const i=t.dbProviderConfigs.find(l=>l.id===n);if(!i){this.supportedParams=new Set;return}const s=t.dbApiKeys.find(l=>l.id===i.apiKeyId),a=EG(i,r,s==null?void 0:s.value);this.supportedParams=new Set(((o=a==null?void 0:a.metadata)==null?void 0:o.supported_parameters)??[])}updateVisibility(){const r=mr.getState().enableAdvancedSettings&&["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"].some(i=>this.supportedParams.has(i));this.isVisible!==r&&(this.isVisible=r)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>lt.createElement(WQe,{module:this}),getParameters:()=>{const n={},r=(i,s)=>{s!==null&&(n[i]=s)};return r("temperature",this.temperature),r("top_p",this.topP),r("max_tokens",this.maxTokens),r("top_k",this.topK),r("presence_penalty",this.presencePenalty),r("frequency_penalty",this.frequencyPenalty),Object.keys(n).length>0?n:void 0}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const KQe=({module:e})=>{const t=T.useRef(null),[,n]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>n({})),()=>e.setNotifyCallback(null)),[e]);const r=e.getIsStreaming(),i=e.getModelSupportsNonText(),s=T.useCallback(async l=>{const c=l.target.files;if(c){for(const u of Array.from(c))try{let d={};const h=e.isLikelyTextFile(u.name,u.type),m=u.type.startsWith("image/");if(h)d.contentText=await u.text();else if(m&&i){const y=new FileReader,b=new Promise((x,_)=>{y.onload=()=>x(y.result),y.onerror=S=>_(S)});y.readAsDataURL(u);const v=await b;v&&v.includes(",")&&(d.contentBase64=v.split(",")[1])}e.onFileAdd({source:"direct",name:u.name,type:u.type||"application/octet-stream",size:u.size,...d})}catch(d){console.error(`Error processing file ${u.name}:`,d),De.error(`Failed to process file "${u.name}": ${d instanceof Error?d.message:String(d)}`)}l.target&&(l.target.value="")}},[e,i]),a=()=>{var l;(l=t.current)==null||l.click()},o=i?"Attach Files (Text, Images, etc.)":"Attach Text Files";return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:t,onChange:s,multiple:!0,className:"hidden",disabled:r}),p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{type:"button",variant:"ghost",size:"icon",onClick:a,disabled:r,className:"h-8 w-8","aria-label":o,children:p.jsx(sP,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"top",children:o})]})})]})},YQe=({module:e})=>{const[,t]=T.useState({}),n=e.getAttachedFiles(),r=e.getIsStreaming();return T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]),n.length===0?null:p.jsx("div",{className:ft("max-h-40 overflow-y-auto pr-1","flex flex-wrap gap-1"),children:n.map(i=>p.jsx(vZ,{fileMeta:i,onRemove:e.onFileRemove,isReadOnly:r},i.id))})},tce=20,ZQe=tce*1024*1024;class XQe{constructor(){we(this,"id","core-file-attachment");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"isStreaming",!1);we(this,"modelSupportsNonText",!0);we(this,"attachedFiles",[]);we(this,"notifyComponentUpdate",null);we(this,"getIsStreaming",()=>this.isStreaming);we(this,"getModelSupportsNonText",()=>this.modelSupportsNonText);we(this,"getAttachedFiles",()=>this.attachedFiles);we(this,"isLikelyTextFile",(t,n)=>ix(t,n));we(this,"onFileAdd",t=>{var r;if(t.size>ZQe){De.error(`File "${t.name}" exceeds the ${tce}MB limit.`);return}if(!ix(t.name,t.type)&&!this.modelSupportsNonText){De.warning(`File "${t.name}" (${t.type}) cannot be uploaded. The current model only supports text input.`);return}(r=this.modApiRef)==null||r.emit(wl.addAttachedFileRequest,t)});we(this,"onFileRemove",t=>{var n;(n=this.modApiRef)==null||n.emit(wl.removeAttachedFileRequest,{attachmentId:t})});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var s;this.modApiRef=t,this.isStreaming=Ln.getState().status==="streaming",this.attachedFiles=qf.getState().attachedFilesMetadata,this.updateModelSupport(),(s=this.notifyComponentUpdate)==null||s.call(this);const n=t.on(tr.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(lr.selectedModelChanged,()=>{var a;this.updateModelSupport(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(wl.attachedFilesChanged,a=>{var o;typeof a=="object"&&a&&"files"in a&&JSON.stringify(this.attachedFiles)!==JSON.stringify(a.files)&&(this.attachedFiles=a.files,(o=this.notifyComponentUpdate)==null||o.call(this))});this.eventUnsubscribers.push(n,r,i)}updateModelSupport(){var s,a;const{getSelectedModel:t}=Ir.getState(),n=t(),r=(a=(s=n==null?void 0:n.metadata)==null?void 0:s.architecture)==null?void 0:a.input_modalities,i=!r||r.some(o=>o!=="text");this.modelSupportsNonText!==i&&(this.modelSupportsNonText=i)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,triggerRenderer:()=>lt.createElement(KQe,{module:this}),renderer:()=>lt.createElement(YQe,{module:this})})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const JQe=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>{if(e&&typeof e.setNotifyTriggerUpdate=="function")return e.setNotifyTriggerUpdate(()=>t({})),()=>{e&&typeof e.setNotifyTriggerUpdate=="function"&&e.setNotifyTriggerUpdate(null)}},[e]);const n=e&&typeof e.getIsVfsModalOpen=="function"?e.getIsVfsModalOpen():!1,r=e&&typeof e.getSelectedFileIdsCount=="function"?e.getSelectedFileIdsCount():0,i=e&&typeof e.getEnableVfs=="function"?e.getEnableVfs():!1,s=qf.getState().addAttachedFile,a=()=>{const o=Hi.getState().selectedFileIds;if(o.size===0){De.info("No files selected in VFS to attach.");return}let l=0;const c=e.getVfsNodes();o.forEach(u=>{const d=c[u];d&&d.type==="file"&&(s({source:"vfs",name:d.name,type:d.mimeType||"application/octet-stream",size:d.size,path:d.path}),l++)}),l>0?(De.success(`Attached ${l} file(s) from VFS to the next prompt.`),typeof e.clearVfsSelection=="function"&&e.clearVfsSelection(),e.toggleVfsModal):De.warning("No valid files were selected to attach.")};return i?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",className:ft("h-8 w-8",n&&"bg-muted text-primary"),onClick:()=>e&&typeof e.toggleVfsModal=="function"&&e.toggleVfsModal(),"aria-label":"Toggle Virtual File System",children:p.jsx(rP,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"top",children:"Virtual Filesystem"})]})}),r>0&&p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsxs(Tt,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:a,"aria-label":`Attach ${r} selected VFS file(s)`,children:[p.jsx(sP,{className:"h-4 w-4 mr-1"}),"Attach (",r,")"]})}),p.jsx(wr,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null};function vm({className:e,...t}){return p.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:p.jsx("table",{"data-slot":"table",className:ft("w-full caption-bottom text-sm",e),...t})})}function Dy({className:e,...t}){return p.jsx("thead",{"data-slot":"table-header",className:ft("[&_tr]:border-b",e),...t})}function xm({className:e,...t}){return p.jsx("tbody",{"data-slot":"table-body",className:ft("[&_tr:last-child]:border-0",e),...t})}function Ui({className:e,...t}){return p.jsx("tr",{"data-slot":"table-row",className:ft("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function vi({className:e,...t}){return p.jsx("th",{"data-slot":"table-head",className:ft("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function hr({className:e,...t}){return p.jsx("td",{"data-slot":"table-cell",className:ft("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function QQe({className:e,...t}){return p.jsx("caption",{"data-slot":"table-caption",className:ft("text-muted-foreground mt-4 text-sm",e),...t})}const nce=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:i,isOperationLoading:s,isMobile:a=!1})=>{const o=l=>{l.key==="Enter"?n():l.key==="Escape"&&r()};return a?p.jsxs("div",{className:"flex items-center gap-2 p-1",children:[p.jsx(Uf,{className:"h-5 w-5 text-yellow-400 flex-shrink-0"}),p.jsx(pr,{ref:i,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary flex-grow",placeholder:"New folder name",disabled:s}),p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:s||!e.trim(),children:s?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ka,{className:"h-4 w-4"})}),p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:s,children:p.jsx(Ya,{className:"h-4 w-4"})})]})]}):p.jsxs(Ui,{className:"bg-muted/30",children:[p.jsx(hr,{className:"px-2 py-1"}),p.jsx(hr,{className:"px-2 py-1",children:p.jsx(Uf,{className:"h-5 w-5 text-yellow-400"})}),p.jsx(hr,{className:"py-1 px-2",colSpan:3,children:p.jsx(pr,{ref:i,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:s})}),p.jsx(hr,{className:"text-right pr-4 py-1",children:p.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:s||!e.trim(),children:s?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ka,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"top",children:"Create (Enter)"})]})}),p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:s,children:p.jsx(Ya,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var eet=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],a5=eet.reduce((e,t)=>{const n=ou(`Primitive.${t}`),r=T.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),NT="Checkbox",[tet,ylt]=Ds(NT),[net,o5]=tet(NT);function ret(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:i,disabled:s,form:a,name:o,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=e,[h,m]=fc({prop:n,defaultProp:i??!1,onChange:l,caller:NT}),[y,b]=T.useState(null),[v,x]=T.useState(null),_=T.useRef(!1),S=y?!!a||!!y.closest("form"):!0,C={checked:h,disabled:s,setChecked:m,control:y,setControl:b,name:o,form:a,value:u,hasConsumerStoppedPropagationRef:_,required:c,defaultChecked:zf(i)?!1:i,isFormControl:S,bubbleInput:v,setBubbleInput:x};return p.jsx(net,{scope:t,...C,children:iet(d)?d(C):r})}var rce="CheckboxTrigger",ice=T.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},i)=>{const{control:s,value:a,disabled:o,checked:l,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:y}=o5(rce,e),b=En(i,u),v=T.useRef(l);return T.useEffect(()=>{const x=s==null?void 0:s.form;if(x){const _=()=>d(v.current);return x.addEventListener("reset",_),()=>x.removeEventListener("reset",_)}},[s,d]),p.jsx(a5.button,{type:"button",role:"checkbox","aria-checked":zf(l)?"mixed":l,"aria-required":c,"data-state":uce(l),"data-disabled":o?"":void 0,disabled:o,value:a,...r,ref:b,onKeyDown:Vt(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Vt(n,x=>{d(_=>zf(_)?!0:!_),y&&m&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});ice.displayName=rce;var sce=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:l,onCheckedChange:c,form:u,...d}=e;return p.jsx(ret,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:o,required:a,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:h})=>p.jsxs(p.Fragment,{children:[p.jsx(ice,{...d,ref:t,__scopeCheckbox:n}),h&&p.jsx(cce,{__scopeCheckbox:n})]})})});sce.displayName=NT;var ace="CheckboxIndicator",oce=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,s=o5(ace,n);return p.jsx(ta,{present:r||zf(s.checked)||s.checked===!0,children:p.jsx(a5.span,{"data-state":uce(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});oce.displayName=ace;var lce="CheckboxBubbleInput",cce=T.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:a,required:o,disabled:l,name:c,value:u,form:d,bubbleInput:h,setBubbleInput:m}=o5(lce,e),y=En(n,m),b=vT(s),v=ry(r);T.useEffect(()=>{const _=h;if(!_)return;const S=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(S,"checked").set,A=!i.current;if(b!==s&&E){const R=new Event("click",{bubbles:A});_.indeterminate=zf(s),E.call(_,zf(s)?!1:s),_.dispatchEvent(R)}},[h,b,s,i]);const x=T.useRef(zf(s)?!1:s);return p.jsx(a5.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??x.current,required:o,disabled:l,name:c,value:u,form:d,...t,tabIndex:-1,ref:y,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});cce.displayName=lce;function iet(e){return typeof e=="function"}function zf(e){return e==="indeterminate"}function uce(e){return zf(e)?"indeterminate":e?"checked":"unchecked"}function mu({className:e,...t}){return p.jsx(sce,{"data-slot":"checkbox",className:ft("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(oce,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:p.jsx(Ka,{className:"size-3.5"})})})}function set(e){const t=aet(e),n=T.forwardRef((r,i)=>{const{children:s,...a}=r,o=T.Children.toArray(s),l=o.find(cet);if(l){const c=l.props.children,u=o.map(d=>d===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...a,ref:i,children:T.isValidElement(c)?T.cloneElement(c,void 0,u):null})}return p.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function aet(e){const t=T.forwardRef((n,r)=>{const{children:i,...s}=n;if(T.isValidElement(i)){const a=det(i),o=uet(s,i.props);return i.type!==T.Fragment&&(o.ref=r?Ko(r,a):a),T.cloneElement(i,o)}return T.Children.count(i)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var oet=Symbol("radix.slottable");function cet(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===oet}function uet(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function det(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Hj=["Enter"," "],fet=["ArrowDown","PageUp","Home"],dce=["ArrowUp","PageDown","End"],het=[...fet,...dce],pet={ltr:[...Hj,"ArrowRight"],rtl:[...Hj,"ArrowLeft"]},met={ltr:["ArrowLeft"],rtl:["ArrowRight"]},S1="Menu",[hw,get,yet]=r5(S1),[wm,MT]=Ds(S1,[yet,Jk,AT]),jT=Jk(),fce=AT(),[bet,_m]=wm(S1),[vet,C1]=wm(S1),hce=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:s,modal:a=!0}=e,o=jT(t),[l,c]=T.useState(null),u=T.useRef(!1),d=xi(s),h=ky(i);return T.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),p.jsx(XG,{...o,children:p.jsx(bet,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:c,children:p.jsx(vet,{scope:t,onClose:T.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:a,children:r})})})};hce.displayName=S1;var xet="MenuAnchor",l5=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=jT(n);return p.jsx(JG,{...i,...r,ref:t})});l5.displayName=xet;var c5="MenuPortal",[wet,pce]=wm(c5,{forceMount:void 0}),mce=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,s=_m(c5,t);return p.jsx(wet,{scope:t,forceMount:n,children:p.jsx(ta,{present:n||s.open,children:p.jsx(Qk,{asChild:!0,container:i,children:r})})})};mce.displayName=c5;var Tl="MenuContent",[_et,u5]=wm(Tl),gce=T.forwardRef((e,t)=>{const n=pce(Tl,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,s=_m(Tl,e.__scopeMenu),a=C1(Tl,e.__scopeMenu);return p.jsx(hw.Provider,{scope:e.__scopeMenu,children:p.jsx(ta,{present:r||s.open,children:p.jsx(hw.Slot,{scope:e.__scopeMenu,children:a.modal?p.jsx(Cet,{...i,ref:t}):p.jsx(ket,{...i,ref:t})})})})}),Cet=T.forwardRef((e,t)=>{const n=_m(Tl,e.__scopeMenu),r=T.useRef(null),i=En(t,r);return T.useEffect(()=>{const s=r.current;if(s)return xT(s)},[]),p.jsx(d5,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Vt(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ket=T.forwardRef((e,t)=>{const n=_m(Tl,e.__scopeMenu);return p.jsx(d5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Eet=set("MenuContent.ScrollLock"),d5=T.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:y,...b}=e,v=_m(Tl,n),x=C1(Tl,n),_=jT(n),S=fce(n),C=get(n),[E,A]=T.useState(null),R=T.useRef(null),N=En(t,R,v.onContentChange),M=T.useRef(0),P=T.useRef(""),L=T.useRef(0),O=T.useRef(null),V=T.useRef("right"),F=T.useRef(0),J=y?m1:T.Fragment,U=y?{as:Eet,allowPinchZoom:!0}:void 0,G=ne=>{var je,Ne;const H=P.current+ne,te=C().filter(Ce=>!Ce.disabled),ee=document.activeElement,se=(je=te.find(Ce=>Ce.ref.current===ee))==null?void 0:je.textValue,he=te.map(Ce=>Ce.textValue),ce=Let(he,H,se),Me=(Ne=te.find(Ce=>Ce.textValue===ce))==null?void 0:Ne.ref.current;(function Ce(Ue){P.current=Ue,window.clearTimeout(M.current),Ue!==""&&(M.current=window.setTimeout(()=>Ce(""),1e3))})(H),Me&&setTimeout(()=>Me.focus())};T.useEffect(()=>()=>window.clearTimeout(M.current),[]),bT();const $=T.useCallback(ne=>{var te,ee;return V.current===((te=O.current)==null?void 0:te.side)&&$et(ne,(ee=O.current)==null?void 0:ee.area)},[]);return p.jsx(_et,{scope:n,searchRef:P,onItemEnter:T.useCallback(ne=>{$(ne)&&ne.preventDefault()},[$]),onItemLeave:T.useCallback(ne=>{var H;$(ne)||((H=R.current)==null||H.focus(),A(null))},[$]),onTriggerLeave:T.useCallback(ne=>{$(ne)&&ne.preventDefault()},[$]),pointerGraceTimerRef:L,onPointerGraceIntentChange:T.useCallback(ne=>{O.current=ne},[]),children:p.jsx(J,{...U,children:p.jsx(Q6,{asChild:!0,trapped:i,onMountAutoFocus:Vt(s,ne=>{var H;ne.preventDefault(),(H=R.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:p.jsx(Kk,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:p.jsx(Ale,{asChild:!0,...S,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:E,onCurrentTabStopIdChange:A,onEntryFocus:Vt(l,ne=>{x.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(QG,{role:"menu","aria-orientation":"vertical","data-state":Mce(v.open),"data-radix-menu-content":"",dir:x.dir,..._,...b,ref:N,style:{outline:"none",...b.style},onKeyDown:Vt(b.onKeyDown,ne=>{const te=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,ee=ne.ctrlKey||ne.altKey||ne.metaKey,se=ne.key.length===1;te&&(ne.key==="Tab"&&ne.preventDefault(),!ee&&se&&G(ne.key));const he=R.current;if(ne.target!==he||!het.includes(ne.key))return;ne.preventDefault();const Me=C().filter(je=>!je.disabled).map(je=>je.ref.current);dce.includes(ne.key)&&Me.reverse(),Det(Me)}),onBlur:Vt(e.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(M.current),P.current="")}),onPointerMove:Vt(e.onPointerMove,pw(ne=>{const H=ne.target,te=F.current!==ne.clientX;if(ne.currentTarget.contains(H)&&te){const ee=ne.clientX>F.current?"right":"left";V.current=ee,F.current=ne.clientX}}))})})})})})})});gce.displayName=Tl;var Tet="MenuGroup",f5=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(nr.div,{role:"group",...r,ref:t})});f5.displayName=Tet;var Aet="MenuLabel",yce=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(nr.div,{...r,ref:t})});yce.displayName=Aet;var Ek="MenuItem",AV="menu.itemSelect",PT=T.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,s=T.useRef(null),a=C1(Ek,e.__scopeMenu),o=u5(Ek,e.__scopeMenu),l=En(t,s),c=T.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(AV,{bubbles:!0,cancelable:!0});d.addEventListener(AV,m=>r==null?void 0:r(m),{once:!0}),AG(d,h),h.defaultPrevented?c.current=!1:a.onClose()}};return p.jsx(bce,{...i,ref:l,disabled:n,onClick:Vt(e.onClick,u),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),c.current=!0},onPointerUp:Vt(e.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:Vt(e.onKeyDown,d=>{const h=o.searchRef.current!=="";n||h&&d.key===" "||Hj.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});PT.displayName=Ek;var bce=T.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=e,a=u5(Ek,n),o=fce(n),l=T.useRef(null),c=En(t,l),[u,d]=T.useState(!1),[h,m]=T.useState("");return T.useEffect(()=>{const y=l.current;y&&m((y.textContent??"").trim())},[s.children]),p.jsx(hw.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:p.jsx(Rle,{asChild:!0,...o,focusable:!r,children:p.jsx(nr.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:Vt(e.onPointerMove,pw(y=>{r?a.onItemLeave(y):(a.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Vt(e.onPointerLeave,pw(y=>a.onItemLeave(y))),onFocus:Vt(e.onFocus,()=>d(!0)),onBlur:Vt(e.onBlur,()=>d(!1))})})})}),Ret="MenuCheckboxItem",vce=T.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return p.jsx(Cce,{scope:e.__scopeMenu,checked:n,children:p.jsx(PT,{role:"menuitemcheckbox","aria-checked":Tk(n)?"mixed":n,...i,ref:t,"data-state":p5(n),onSelect:Vt(i.onSelect,()=>r==null?void 0:r(Tk(n)?!0:!n),{checkForDefaultPrevented:!1})})})});vce.displayName=Ret;var xce="MenuRadioGroup",[Iet,Net]=wm(xce,{value:void 0,onValueChange:()=>{}}),wce=T.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,s=xi(r);return p.jsx(Iet,{scope:e.__scopeMenu,value:n,onValueChange:s,children:p.jsx(f5,{...i,ref:t})})});wce.displayName=xce;var _ce="MenuRadioItem",Sce=T.forwardRef((e,t)=>{const{value:n,...r}=e,i=Net(_ce,e.__scopeMenu),s=n===i.value;return p.jsx(Cce,{scope:e.__scopeMenu,checked:s,children:p.jsx(PT,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":p5(s),onSelect:Vt(r.onSelect,()=>{var a;return(a=i.onValueChange)==null?void 0:a.call(i,n)},{checkForDefaultPrevented:!1})})})});Sce.displayName=_ce;var h5="MenuItemIndicator",[Cce,Met]=wm(h5,{checked:!1}),kce=T.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,s=Met(h5,n);return p.jsx(ta,{present:r||Tk(s.checked)||s.checked===!0,children:p.jsx(nr.span,{...i,ref:t,"data-state":p5(s.checked)})})});kce.displayName=h5;var jet="MenuSeparator",Ece=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(nr.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Ece.displayName=jet;var Pet="MenuArrow",Tce=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=jT(n);return p.jsx(eK,{...i,...r,ref:t})});Tce.displayName=Pet;var Oet="MenuSub",[blt,Ace]=wm(Oet),Iv="MenuSubTrigger",Rce=T.forwardRef((e,t)=>{const n=_m(Iv,e.__scopeMenu),r=C1(Iv,e.__scopeMenu),i=Ace(Iv,e.__scopeMenu),s=u5(Iv,e.__scopeMenu),a=T.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},u=T.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return T.useEffect(()=>u,[u]),T.useEffect(()=>{const d=o.current;return()=>{window.clearTimeout(d),l(null)}},[o,l]),p.jsx(l5,{asChild:!0,...c,children:p.jsx(bce,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Mce(n.open),...e,ref:Ko(t,i.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Vt(e.onPointerMove,pw(d=>{s.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Vt(e.onPointerLeave,pw(d=>{var m,y;u();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const b=(y=n.content)==null?void 0:y.dataset.side,v=b==="right",x=v?-5:5,_=h[v?"left":"right"],S=h[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+x,y:d.clientY},{x:_,y:h.top},{x:S,y:h.top},{x:S,y:h.bottom},{x:_,y:h.bottom}],side:b}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Vt(e.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";e.disabled||h&&d.key===" "||pet[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});Rce.displayName=Iv;var Ice="MenuSubContent",Nce=T.forwardRef((e,t)=>{const n=pce(Tl,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,s=_m(Tl,e.__scopeMenu),a=C1(Tl,e.__scopeMenu),o=Ace(Ice,e.__scopeMenu),l=T.useRef(null),c=En(t,l);return p.jsx(hw.Provider,{scope:e.__scopeMenu,children:p.jsx(ta,{present:r||s.open,children:p.jsx(hw.Slot,{scope:e.__scopeMenu,children:p.jsx(d5,{id:o.contentId,"aria-labelledby":o.triggerId,...i,ref:c,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;a.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Vt(e.onFocusOutside,u=>{u.target!==o.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Vt(e.onEscapeKeyDown,u=>{a.onClose(),u.preventDefault()}),onKeyDown:Vt(e.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),h=met[a.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(m=o.trigger)==null||m.focus(),u.preventDefault())})})})})})});Nce.displayName=Ice;function Mce(e){return e?"open":"closed"}function Tk(e){return e==="indeterminate"}function p5(e){return Tk(e)?"indeterminate":e?"checked":"unchecked"}function Det(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Fet(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Let(e,t,n){const i=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=Fet(e,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Bet(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s],l=t[a],c=o.x,u=o.y,d=l.x,h=l.y;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=!i)}return i}function $et(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Bet(n,t)}function pw(e){return t=>t.pointerType==="mouse"?e(t):void 0}var jce=hce,Pce=l5,Oce=mce,Dce=gce,Fce=f5,Lce=yce,Bce=PT,$ce=vce,zce=wce,Uce=Sce,qce=kce,Vce=Ece,Hce=Tce,Wce=Rce,Gce=Nce,m5="ContextMenu",[zet,vlt]=Ds(m5,[MT]),no=MT(),[Uet,Kce]=zet(m5),Yce=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:i,modal:s=!0}=e,[a,o]=T.useState(!1),l=no(t),c=xi(r),u=T.useCallback(d=>{o(d),c(d)},[c]);return p.jsx(Uet,{scope:t,open:a,onOpenChange:u,modal:s,children:p.jsx(jce,{...l,dir:i,open:a,onOpenChange:u,modal:s,children:n})})};Yce.displayName=m5;var Zce="ContextMenuTrigger",Xce=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...i}=e,s=Kce(Zce,n),a=no(n),o=T.useRef({x:0,y:0}),l=T.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),c=T.useRef(0),u=T.useCallback(()=>window.clearTimeout(c.current),[]),d=h=>{o.current={x:h.clientX,y:h.clientY},s.onOpenChange(!0)};return T.useEffect(()=>u,[u]),T.useEffect(()=>void(r&&u()),[r,u]),p.jsxs(p.Fragment,{children:[p.jsx(Pce,{...a,virtualRef:l}),p.jsx(nr.span,{"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,...i,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Vt(e.onContextMenu,h=>{u(),d(h),h.preventDefault()}),onPointerDown:r?e.onPointerDown:Vt(e.onPointerDown,PS(h=>{u(),c.current=window.setTimeout(()=>d(h),700)})),onPointerMove:r?e.onPointerMove:Vt(e.onPointerMove,PS(u)),onPointerCancel:r?e.onPointerCancel:Vt(e.onPointerCancel,PS(u)),onPointerUp:r?e.onPointerUp:Vt(e.onPointerUp,PS(u))})]})});Xce.displayName=Zce;var qet="ContextMenuPortal",Jce=e=>{const{__scopeContextMenu:t,...n}=e,r=no(t);return p.jsx(Oce,{...r,...n})};Jce.displayName=qet;var Qce="ContextMenuContent",eue=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Kce(Qce,n),s=no(n),a=T.useRef(!1);return p.jsx(Dce,{...s,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,o),!o.defaultPrevented&&a.current&&o.preventDefault(),a.current=!1},onInteractOutside:o=>{var l;(l=e.onInteractOutside)==null||l.call(e,o),!o.defaultPrevented&&!i.modal&&(a.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});eue.displayName=Qce;var Vet="ContextMenuGroup",Het=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx(Fce,{...i,...r,ref:t})});Het.displayName=Vet;var Wet="ContextMenuLabel",Get=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx(Lce,{...i,...r,ref:t})});Get.displayName=Wet;var Ket="ContextMenuItem",tue=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx(Bce,{...i,...r,ref:t})});tue.displayName=Ket;var Yet="ContextMenuCheckboxItem",Zet=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx($ce,{...i,...r,ref:t})});Zet.displayName=Yet;var Xet="ContextMenuRadioGroup",Jet=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx(zce,{...i,...r,ref:t})});Jet.displayName=Xet;var Qet="ContextMenuRadioItem",ett=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx(Uce,{...i,...r,ref:t})});ett.displayName=Qet;var ttt="ContextMenuItemIndicator",ntt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx(qce,{...i,...r,ref:t})});ntt.displayName=ttt;var rtt="ContextMenuSeparator",nue=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx(Vce,{...i,...r,ref:t})});nue.displayName=rtt;var itt="ContextMenuArrow",stt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx(Hce,{...i,...r,ref:t})});stt.displayName=itt;var att="ContextMenuSubTrigger",ott=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx(Wce,{...i,...r,ref:t})});ott.displayName=att;var ltt="ContextMenuSubContent",ctt=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=no(n);return p.jsx(Gce,{...i,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ctt.displayName=ltt;function PS(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var utt=Yce,dtt=Xce,ftt=Jce,htt=eue,ptt=tue,mtt=nue;function RV({...e}){return p.jsx(utt,{"data-slot":"context-menu",...e})}function IV({...e}){return p.jsx(dtt,{"data-slot":"context-menu-trigger",...e})}function NV({className:e,...t}){return p.jsx(ftt,{children:p.jsx(htt,{"data-slot":"context-menu-content",className:ft("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function $o({className:e,inset:t,variant:n="default",...r}){return p.jsx(ptt,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:ft("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function MV({className:e,...t}){return p.jsx(mtt,{"data-slot":"context-menu-separator",className:ft("bg-border -mx-1 my-1 h-px",e),...t})}const gtt=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:i,isOperationLoading:s,creatingFolder:a,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:u,handleRename:d,handleDownload:h,handleDelete:m,setNewName:y,renameInputRef:b,handleGitInit:v,handleGitPull:x,handleGitCommit:_,handleGitPush:S,handleGitStatus:C})=>{const E=e.type==="folder",A=L=>{L.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||s||(E?o(e):l(!n,e.id))},R=L=>{L.key==="Enter"?d():L.key==="Escape"&&u()},N=E?r?AH:Uf:TH,M=E?r?"text-green-400":"text-yellow-400":"text-blue-400",P=p.jsxs(Ui,{className:ft("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",s&&"opacity-70 cursor-not-allowed",!E&&"cursor-pointer"),onClick:A,onDoubleClick:()=>!s&&!t&&o(e),children:[p.jsx(hr,{className:"px-2 py-1",children:p.jsx(mu,{checked:n,onCheckedChange:L=>l(!!L,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:s||E})}),p.jsx(hr,{className:"px-2 py-1",children:p.jsx(N,{className:ft("h-5 w-5",M)})}),p.jsx(hr,{className:"py-1 px-2",children:t?p.jsx(pr,{ref:b,value:i,onChange:L=>y(L.target.value),onBlur:d,onKeyDown:R,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:L=>L.stopPropagation(),disabled:s}):p.jsx("span",{className:ft("truncate",E&&"cursor-pointer hover:underline"),title:e.name,onClick:L=>{E&&(L.stopPropagation(),o(e))},children:e.name})}),p.jsx(hr,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?vx(e.size):""}),p.jsx(hr,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),p.jsx(hr,{className:"text-right pr-4 py-1",children:p.jsx("div",{className:ft("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",s&&"opacity-30"),children:t?p.jsxs(p.Fragment,{children:[p.jsx(Mn,{tooltipText:"Save (Enter)",onClick:L=>{L.stopPropagation(),d()},"aria-label":"Save name",disabled:s||!i.trim(),icon:s?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ka,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),p.jsx(Mn,{tooltipText:"Cancel (Esc)",onClick:L=>{L.stopPropagation(),u()},"aria-label":"Cancel edit",disabled:s,icon:p.jsx(Ya,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Mn,{tooltipText:"Rename",onClick:L=>{L.stopPropagation(),c(e)},"aria-label":"Rename",disabled:s||a,icon:p.jsx($S,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Mn,{tooltipText:E?"Download folder (.zip)":"Download file",onClick:L=>{L.stopPropagation(),h(e)},"aria-label":E?"Download folder as ZIP":"Download file",disabled:s,icon:p.jsx(Jc,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Mn,{tooltipText:"Delete",onClick:L=>{L.stopPropagation(),m(e)},"aria-label":`Delete ${E?"folder":"file"}`,disabled:s,icon:p.jsx(Ho,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return E?p.jsxs(RV,{children:[p.jsx(IV,{disabled:t||s,asChild:!0,children:P}),p.jsxs(NV,{children:[p.jsx($o,{onSelect:()=>o(e),disabled:t||s,children:"Open Folder"}),p.jsx(MV,{}),r?p.jsxs(p.Fragment,{children:[p.jsxs($o,{onSelect:()=>x(e.path),disabled:s,children:[p.jsx(NH,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),p.jsxs($o,{onSelect:()=>_(e.path),disabled:s,children:[p.jsx(IH,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),p.jsxs($o,{onSelect:()=>S(e.path),disabled:s,children:[p.jsx(nP,{className:"mr-2 h-4 w-4"}),"Git Push"]}),p.jsxs($o,{onSelect:()=>C(e.path),disabled:s,children:[p.jsx(iP,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):p.jsxs($o,{onSelect:()=>v(e.path),disabled:s,children:[p.jsx(cc,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),p.jsx(MV,{}),p.jsxs($o,{onSelect:()=>c(e),disabled:s,children:[p.jsx($S,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs($o,{onSelect:()=>h(e),disabled:s,children:[p.jsx(Jc,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),p.jsxs($o,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>m(e),disabled:s,children:[p.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):p.jsxs(RV,{children:[p.jsx(IV,{disabled:t||s,asChild:!0,children:P}),p.jsxs(NV,{children:[p.jsxs($o,{onSelect:()=>l(!n,e.id),disabled:s,children:[n?"Deselect":"Select"," File"]}),p.jsxs($o,{onSelect:()=>c(e),disabled:s,children:[p.jsx($S,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs($o,{onSelect:()=>h(e),disabled:s,children:[p.jsx(Jc,{className:"mr-2 h-4 w-4"}),"Download File"]}),p.jsxs($o,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>m(e),disabled:s,children:[p.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},ytt=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:i,selectedFileIds:s,isOperationLoading:a,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:u,handleRename:d,cancelCreatingFolder:h,handleCreateFolder:m,handleDownload:y,handleDelete:b,setNewName:v,setNewFolderName:x,renameInputRef:_,newFolderInputRef:S,gitRepoStatus:C,handleGitInit:E,handleGitPull:A,handleGitCommit:R,handleGitPush:N,handleGitStatus:M})=>{const P=T.useMemo(()=>e,[e]);return a&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):p.jsx("div",{className:"relative h-full",children:p.jsxs(vm,{className:"w-full text-sm",children:[p.jsx(Dy,{className:"sticky top-0 bg-card z-10",children:p.jsxs(Ui,{className:"hover:bg-card",children:[p.jsx(vi,{className:"w-[40px] px-2"}),p.jsx(vi,{className:"w-[40px] px-2"}),p.jsx(vi,{children:"Name"}),p.jsx(vi,{className:"w-[100px] text-right",children:"Size"}),p.jsx(vi,{className:"w-[150px] text-right",children:"Modified"}),p.jsx(vi,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),p.jsxs(xm,{children:[r&&p.jsx(nce,{newFolderName:i,setNewFolderName:x,handleCreateFolder:m,cancelCreatingFolder:h,newFolderInputRef:S,isOperationLoading:a}),P.map(L=>{const O=t===L.path,V=s.has(L.id),F=C[L.path]??!1;return p.jsx(gtt,{entry:L,isEditingThis:O,isChecked:V,isGitRepo:F,newName:O?n:"",isOperationLoading:a,creatingFolder:r,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:u,handleRename:d,handleDownload:y,handleDelete:b,setNewName:v,renameInputRef:_,handleGitInit:E,handleGitPull:A,handleGitCommit:R,handleGitPush:N,handleGitStatus:M},L.id)}),e.length===0&&!r&&!a&&p.jsx(Ui,{children:p.jsx(hr,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},btt=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:i,creatingFolder:s,handleNavigateHome:a,handleNavigateUp:o,handleRefresh:l,startCreatingFolder:c,handleUploadClick:u,handleFolderUploadClick:d,handleArchiveUploadClick:h,handleDownloadAll:m,handleCloneClick:y,fileInputRef:b,folderInputRef:v,archiveInputRef:x,handleFileChange:_,handleArchiveChange:S})=>p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:b,onChange:_,className:"hidden",multiple:!0,disabled:t}),p.jsx("input",{type:"file",ref:v,onChange:_,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),p.jsx("input",{type:"file",ref:x,onChange:S,className:"hidden",accept:".zip",disabled:t}),p.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(Tt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),a()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:p.jsx(Upe,{className:"h-4 w-4"})}),p.jsx(Tt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:p.jsx(Epe,{className:"h-4 w-4"})}),p.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[150px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),p.jsx("div",{className:"flex-grow"}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap justify-end",children:[" ",p.jsx(Tt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(jp,{className:"h-4 w-4"})}),p.jsxs(Tt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),c()},disabled:t||s||!!i,className:"h-8",title:"Create New Folder",type:"button",children:[n&&s?p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(RH,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(Tt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(kH,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Files"})," "]}),p.jsxs(Tt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(Uf,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(Tt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(upe,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"ZIP"})," "]}),p.jsxs(Tt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),y()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(cc,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Clone"})," "]}),p.jsxs(Tt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),m()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(wH,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Export"})," "]})]})]})]}),rue=({isOpen:e,onOpenChange:t,title:n,description:r,children:i,submitLabel:s="Submit",onSubmit:a,isSubmitting:o,submitDisabled:l=!1,className:c,contentClassName:u})=>{const d=async h=>{h==null||h.preventDefault(),!(o||l)&&await a()};return p.jsx(Iy,{open:e,onOpenChange:t,children:p.jsxs(Ny,{className:ft(c),children:[p.jsxs(My,{children:[p.jsx(Py,{children:n}),r&&p.jsx(w1,{children:r})]}),p.jsx("div",{className:ft("py-4",u),children:i}),p.jsxs(jy,{children:[p.jsx(KJe,{asChild:!0,children:p.jsx(Tt,{variant:"outline",disabled:o,children:"Cancel"})}),p.jsxs(Tt,{onClick:d,disabled:o||l,children:[o&&p.jsx(Yn,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Submitting...":s]})]})]})})},vtt=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:i,setCloneBranch:s,isCloning:a,onSubmitClone:o,currentPath:l})=>p.jsx(rue,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:p.jsxs(p.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",p.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:o,isSubmitting:a,submitDisabled:!n.trim(),children:p.jsxs("div",{className:"grid gap-4",children:[p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(en,{htmlFor:"clone-url",className:"text-right",children:"URL"}),p.jsx(pr,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:a})]}),p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(en,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),p.jsx(pr,{id:"clone-branch",value:i,onChange:c=>s(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:a})]})]})}),xtt=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:i,isCommitting:s,onSubmitCommit:a})=>p.jsx(rue,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:p.jsxs(p.Fragment,{children:["Enter a commit message for the changes in ",p.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:a,isSubmitting:s,submitDisabled:!r.trim(),children:p.jsx("div",{className:"grid gap-4",children:p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(en,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),p.jsx(pr,{id:"commit-msg",value:r,onChange:o=>i(o.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:s})]})})});var OT="DropdownMenu",[wtt,xlt]=Ds(OT,[MT]),ro=MT(),[_tt,iue]=wtt(OT),sue=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=ro(t),c=T.useRef(null),[u,d]=fc({prop:i,defaultProp:s??!1,onChange:a,caller:OT});return p.jsx(_tt,{scope:t,triggerId:Ys(),triggerRef:c,contentId:Ys(),open:u,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:o,children:p.jsx(jce,{...l,open:u,onOpenChange:d,dir:r,modal:o,children:n})})};sue.displayName=OT;var aue="DropdownMenuTrigger",oue=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,s=iue(aue,n),a=ro(n);return p.jsx(Pce,{asChild:!0,...a,children:p.jsx(nr.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Ko(t,s.triggerRef),onPointerDown:Vt(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(s.onOpenToggle(),s.open||o.preventDefault())}),onKeyDown:Vt(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&s.onOpenToggle(),o.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});oue.displayName=aue;var Stt="DropdownMenuPortal",lue=e=>{const{__scopeDropdownMenu:t,...n}=e,r=ro(t);return p.jsx(Oce,{...r,...n})};lue.displayName=Stt;var cue="DropdownMenuContent",uue=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=iue(cue,n),s=ro(n),a=T.useRef(!1);return p.jsx(Dce,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:t,onCloseAutoFocus:Vt(e.onCloseAutoFocus,o=>{var l;a.current||(l=i.triggerRef.current)==null||l.focus(),a.current=!1,o.preventDefault()}),onInteractOutside:Vt(e.onInteractOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});uue.displayName=cue;var Ctt="DropdownMenuGroup",ktt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx(Fce,{...i,...r,ref:t})});ktt.displayName=Ctt;var Ett="DropdownMenuLabel",Ttt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx(Lce,{...i,...r,ref:t})});Ttt.displayName=Ett;var Att="DropdownMenuItem",due=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx(Bce,{...i,...r,ref:t})});due.displayName=Att;var Rtt="DropdownMenuCheckboxItem",Itt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx($ce,{...i,...r,ref:t})});Itt.displayName=Rtt;var Ntt="DropdownMenuRadioGroup",Mtt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx(zce,{...i,...r,ref:t})});Mtt.displayName=Ntt;var jtt="DropdownMenuRadioItem",Ptt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx(Uce,{...i,...r,ref:t})});Ptt.displayName=jtt;var Ott="DropdownMenuItemIndicator",Dtt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx(qce,{...i,...r,ref:t})});Dtt.displayName=Ott;var Ftt="DropdownMenuSeparator",fue=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx(Vce,{...i,...r,ref:t})});fue.displayName=Ftt;var Ltt="DropdownMenuArrow",Btt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx(Hce,{...i,...r,ref:t})});Btt.displayName=Ltt;var $tt="DropdownMenuSubTrigger",ztt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx(Wce,{...i,...r,ref:t})});ztt.displayName=$tt;var Utt="DropdownMenuSubContent",qtt=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=ro(n);return p.jsx(Gce,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qtt.displayName=Utt;var Vtt=sue,Htt=oue,Wtt=lue,Gtt=uue,Ktt=due,Ytt=fue;function Ztt({...e}){return p.jsx(Vtt,{"data-slot":"dropdown-menu",...e})}function Xtt({...e}){return p.jsx(Htt,{"data-slot":"dropdown-menu-trigger",...e})}function Jtt({className:e,sideOffset:t=4,...n}){return p.jsx(Wtt,{children:p.jsx(Gtt,{"data-slot":"dropdown-menu-content",sideOffset:t,className:ft("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function Oc({className:e,inset:t,variant:n="default",...r}){return p.jsx(Ktt,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:ft("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function jV({className:e,...t}){return p.jsx(Ytt,{"data-slot":"dropdown-menu-separator",className:ft("bg-border -mx-1 my-1 h-px",e),...t})}const Qtt=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:i,selectedFileIds:s,isOperationLoading:a,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:u,handleRename:d,cancelCreatingFolder:h,handleCreateFolder:m,handleDownload:y,handleDelete:b,setNewName:v,setNewFolderName:x,renameInputRef:_,newFolderInputRef:S,gitRepoStatus:C,handleGitInit:E,handleGitPull:A,handleGitCommit:R,handleGitPush:N,handleGitStatus:M})=>{const P=L=>{L.key==="Enter"?d():L.key==="Escape"&&u()};return a&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4",children:"Loading..."}):p.jsxs("div",{className:"p-2 space-y-1",children:[r&&p.jsx("div",{className:"border rounded-md p-2 bg-muted/30",children:p.jsx(nce,{newFolderName:i,setNewFolderName:x,handleCreateFolder:m,cancelCreatingFolder:h,newFolderInputRef:S,isOperationLoading:a,isMobile:!0})}),e.map(L=>{const O=t===L.path,V=s.has(L.id),F=C[L.path]??!1,J=L.type==="folder",U=J?F?AH:Uf:TH,G=J?F?"text-green-400":"text-yellow-400":"text-blue-400";return p.jsxs("div",{className:ft("flex items-center justify-between p-2 border rounded-md",O&&"bg-muted ring-1 ring-primary",a&&"opacity-70 cursor-not-allowed",!O&&"hover:bg-muted/50",!O&&"cursor-pointer"),onClick:()=>{O||a||(J?o(L):l(!V,L.id))},children:[p.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[!J&&p.jsx(mu,{checked:V,onCheckedChange:$=>l(!!$,L.id),"aria-label":`Select ${L.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground flex-shrink-0",disabled:a,onClick:$=>$.stopPropagation()}),J&&p.jsx("div",{className:"w-6 flex-shrink-0"}),p.jsx(U,{className:ft("h-5 w-5 flex-shrink-0",G)}),p.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[O?p.jsx(pr,{ref:_,value:n,onChange:$=>v($.target.value),onBlur:d,onKeyDown:P,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:$=>$.stopPropagation(),disabled:a}):p.jsx("span",{className:"text-sm font-medium truncate",title:L.name,children:L.name}),p.jsx("span",{className:"text-xs text-muted-foreground",children:L.type==="file"&&L.size!==void 0?vx(L.size):L.type==="folder"?F?"Git Repository":"Folder":""})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 ml-2",children:O?p.jsxs(p.Fragment,{children:[p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-600",onClick:$=>{$.stopPropagation(),d()},disabled:a||!n.trim(),"aria-label":"Save name",children:a?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ka,{className:"h-4 w-4"})}),p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:$=>{$.stopPropagation(),u()},disabled:a,"aria-label":"Cancel edit",children:p.jsx(Ya,{className:"h-4 w-4"})})]}):p.jsxs(Ztt,{children:[p.jsx(Xtt,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:$=>$.stopPropagation(),disabled:a,"aria-label":"More actions",children:p.jsx(lpe,{className:"h-4 w-4"})})}),p.jsxs(Jtt,{align:"end",onClick:$=>$.stopPropagation(),children:[J&&p.jsx(Oc,{onSelect:()=>o(L),children:"Open Folder"}),!J&&p.jsxs(Oc,{onSelect:()=>l(!V,L.id),children:[V?"Deselect":"Select"," File"]}),p.jsxs(Oc,{onSelect:()=>c(L),children:[p.jsx($S,{className:"mr-2 h-4 w-4"})," Rename"]}),p.jsxs(Oc,{onSelect:()=>y(L),children:[p.jsx(Jc,{className:"mr-2 h-4 w-4"})," Download"," ",J?"as ZIP":""]}),J&&p.jsx(jV,{}),J&&F&&p.jsxs(p.Fragment,{children:[p.jsxs(Oc,{onSelect:()=>A(L.path),children:[p.jsx(NH,{className:"mr-2 h-4 w-4"})," Git Pull"]}),p.jsxs(Oc,{onSelect:()=>R(L.path),children:[p.jsx(IH,{className:"mr-2 h-4 w-4"})," Git Commit..."]}),p.jsxs(Oc,{onSelect:()=>N(L.path),children:[p.jsx(nP,{className:"mr-2 h-4 w-4"})," Git Push"]}),p.jsxs(Oc,{onSelect:()=>M(L.path),children:[p.jsx(iP,{className:"mr-2 h-4 w-4"})," Git Status"]})]}),J&&!F&&p.jsxs(Oc,{onSelect:()=>E(L.path),children:[p.jsx(cc,{className:"mr-2 h-4 w-4"})," Initialize Git Repo"]}),p.jsx(jV,{}),p.jsxs(Oc,{className:"text-red-600 focus:text-red-600",onSelect:()=>b(L),children:[p.jsx(Ho,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},L.id)}),e.length===0&&!r&&!a&&p.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Folder is empty"})]})},g5=T.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:i,error:s,rootId:a,selectedFileIds:o,vfsKey:l,configuredVfsKey:c,initializingKey:u}=Hi(Tn(_e=>({nodes:_e.nodes,childrenMap:_e.childrenMap,currentParentId:_e.currentParentId,selectedFileIds:_e.selectedFileIds,loading:_e.loading,operationLoading:_e.operationLoading,error:_e.error,rootId:_e.rootId,vfsKey:_e.vfsKey,configuredVfsKey:_e.configuredVfsKey,initializingKey:_e.initializingKey}))),[d,h]=T.useState(""),[m,y]=T.useState(null),[b,v]=T.useState(!1),[x,_]=T.useState(""),[S,C]=T.useState({}),[E,A]=T.useState(!1),[R,N]=T.useState(""),[M,P]=T.useState(""),[L,O]=T.useState(!1),[V,F]=T.useState(!1),[J,U]=T.useState(null),[G,$]=T.useState(""),[ne,H]=T.useState(!1),[te,ee]=T.useState({}),se=T.useRef(null),he=T.useRef(null),ce=T.useRef(null),Me=T.useRef(null),je=T.useRef(null),Ne=n?e[n]:null,Ce=Ne?Ne.path:"/",et=(t[n||a||""]||[]).map(_e=>e[_e]).filter(_e=>!!_e).sort((_e,ze)=>_e.type==="folder"&&ze.type==="file"?-1:_e.type==="file"&&ze.type==="folder"?1:_e.name.localeCompare(ze.name)),qe=T.useMemo(()=>et.filter(_e=>_e.type==="folder").map(_e=>_e.path),[et]),Re=r||u!==null||l!==c,K=i||L||ne||Object.values(te).some(Boolean);T.useEffect(()=>{n!==null&&!t[n]&&!Re&&c===l?Le.emit(un.fetchNodesRequest,{parentId:n}):n===null&&a&&!t[a]&&!Re&&c===l&&Le.emit(un.fetchNodesRequest,{parentId:a})},[n,t,a,Re,c,l]),T.useEffect(()=>{var _e,ze;m&&((_e=Me.current)==null||_e.focus(),(ze=Me.current)==null||ze.select())},[m]),T.useEffect(()=>{var _e;b&&((_e=je.current)==null||_e.focus())},[b]),T.useEffect(()=>{(async()=>{if(Re||qe.length===0)return;const ze={};let Rt=!1;for(const me of qe)try{const Y=await YEe(me);S[me]!==Y&&(ze[me]=Y,Rt=!0)}catch(Y){console.error(`Error checking git status for ${me}:`,Y),S[me]!==!1&&(ze[me]=!1,Rt=!0)}Rt&&C(me=>({...me,...ze}))})()},[qe,Re,S]);const ge=T.useCallback(async(_e,ze,Rt)=>{if(!(K||Re)){Rt!==!1&&Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{Le.emit(_e,ze)}catch(me){console.error("[FileManager Operation Error]:",me),Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:i,error:me instanceof Error?me.message:String(me)})}finally{Rt!==!1&&Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:!1,error:s})}}},[K,Re,r,i,s]),Ae=T.useCallback(_e=>{K||Re||m||_e.type==="folder"&&ge(un.setCurrentPathRequest,{path:_e.path},!1)},[K,Re,m,ge]),le=T.useCallback(()=>{if(K||Re||Ce==="/")return;const _e=xE(Ce);ge(un.setCurrentPathRequest,{path:_e},!1)},[K,Re,Ce,ge]),oe=T.useCallback(()=>{K||Re||Ce==="/"||ge(un.setCurrentPathRequest,{path:"/"},!1)},[K,Re,Ce,ge]),ie=T.useCallback(()=>{Re||ge(un.fetchNodesRequest,{parentId:n},!1)},[ge,n,Re]),Ee=T.useCallback((_e,ze)=>{const Rt=e[ze];Rt&&Rt.type==="file"?_e?Le.emit(un.selectFileRequest,{fileId:ze}):Le.emit(un.deselectFileRequest,{fileId:ze}):Rt&&Rt.type==="folder"&&De.info("Folders cannot be attached to the prompt.")},[e]),Be=T.useCallback(_e=>{K||Re||b||(y(_e.path),h(_e.name),v(!1))},[K,Re,b]),ke=T.useCallback(()=>{y(null),h("")},[]),ct=T.useCallback(async()=>{if(!m||!d.trim()){ke();return}const _e=Object.values(e).find(ze=>ze.path===m);_e&&_e.name!==d.trim()&&await ge(un.renameNodeRequest,{id:_e.id,newName:d.trim()}),ke()},[m,d,e,ke,ge]),It=T.useCallback(()=>{K||Re||m||(v(!0),_(""),y(null))},[K,Re,m]),ht=T.useCallback(()=>{v(!1),_("")},[]),Ot=T.useCallback(async()=>{if(!x.trim()){ht();return}await ge(un.createDirectoryRequest,{parentId:n,name:x.trim()}),ht()},[x,n,ht,ge]),zt=()=>{var _e;return(_e=se.current)==null?void 0:_e.click()},Bt=()=>{var _e;return(_e=he.current)==null?void 0:_e.click()},rn=()=>{var _e;return(_e=ce.current)==null?void 0:_e.click()},ve=T.useCallback(async _e=>{const ze=_e.target.files;ze&&ze.length>0&&(await ge(un.uploadFilesRequest,{parentId:n,files:ze}),_e.target&&(_e.target.value=""))},[n,ge]),D=T.useCallback(async _e=>{var Rt;const ze=(Rt=_e.target.files)==null?void 0:Rt[0];if(ze){Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{await JEe(ze,Ce),Le.emit(un.fetchNodesRequest,{parentId:n})}catch(me){console.error("Archive upload error:",me)}finally{Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:!1,error:s}),_e.target&&(_e.target.value="")}}},[Ce,n,r,s]),Z=T.useCallback(async _e=>{window.confirm(`Delete ${_e.type} "${_e.name}"?${_e.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await ge(un.deleteNodesRequest,{ids:[_e.id]})},[ge]),pe=T.useCallback(async _e=>{Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{_e.type==="file"?await XEe(_e.path):await K9(`${_e.name}.zip`,_e.path)}catch(ze){console.error("Download error:",ze)}finally{Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:!1,error:s})}},[r,s]),Oe=T.useCallback(async()=>{if(et.length!==0){Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{const _e=cs(Ce)||"root";await K9(`${_e}_export.zip`,Ce)}catch(_e){console.error("Download all error:",_e)}finally{Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:!1,error:s})}}},[Ce,et.length,r,s]),xe=T.useCallback(async(_e,ze)=>{if(!(te[_e]||Re||i)){ee(Rt=>({...Rt,[_e]:!0})),Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:i,error:null});try{await ze()}catch(Rt){console.error(`[FileManager Git Op Error @ ${_e}]:`,Rt)}finally{ee(Rt=>({...Rt,[_e]:!1}))}}},[te,Re,i,r]),Ie=T.useCallback(_e=>{xe(_e,async()=>{await pZ(_e),C(ze=>({...ze,[_e]:!0}))})},[xe]),de=T.useCallback(_e=>{De.info("Pulling default branch (auth not implemented yet)..."),xe(_e,()=>EE(_e,"main"))},[xe]),bt=T.useCallback(_e=>{U(_e),$(""),F(!0)},[]),St=T.useCallback(_e=>{De.info("Pushing default branch (auth not implemented yet)..."),xe(_e,()=>IO(_e,"main"))},[xe]),z=T.useCallback(_e=>{xe(_e,()=>mZ(_e))},[xe]),Ve=T.useCallback(()=>{N(""),P(""),A(!0)},[]),it=T.useCallback(async()=>{if(!R.trim()){De.error("Repository URL cannot be empty.");return}O(!0),Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:i,error:null});try{const _e=cs(R.trim().replace(/\.git$/,""))||"cloned_repo",ze=Y3(Ce,_e);await hZ(ze,R.trim(),M.trim()||void 0),A(!1),Le.emit(un.fetchNodesRequest,{parentId:n})}catch{}finally{O(!1)}},[R,M,Ce,n,r,i]),be=T.useCallback(async()=>{if(!J||!G.trim()){De.error("Commit message cannot be empty.");return}H(!0),Le.emit(un.loadingStateChanged,{isLoading:r,operationLoading:i,error:null});try{await RO(J,G.trim()),F(!1)}catch{}finally{H(!1)}},[J,G,r,i]);return Re?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[p.jsx(Yn,{className:"h-8 w-8 animate-spin mb-2"}),p.jsx("p",{children:u?`Initializing filesystem: ${u}`:"Loading filesystem..."}),s&&p.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",s]})]}):s&&!Re?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[p.jsxs("p",{children:["Error loading filesystem: ",s]}),p.jsx(Tt,{variant:"outline",size:"sm",onClick:()=>Le.emit(un.initializeVFSRequest,{vfsKey:l||"default_fallback_key"}),className:"mt-2",children:"Retry"})]}):p.jsxs("div",{className:ft("flex h-full flex-col bg-card text-card-foreground"),children:[p.jsx(btt,{currentPath:Ce,isAnyLoading:K||Re,isOperationLoading:i,entries:et,editingPath:m,creatingFolder:b,handleNavigateHome:oe,handleNavigateUp:le,handleRefresh:ie,startCreatingFolder:It,handleUploadClick:zt,handleFolderUploadClick:Bt,handleArchiveUploadClick:rn,handleDownloadAll:Oe,handleCloneClick:Ve,fileInputRef:se,folderInputRef:he,archiveInputRef:ce,handleFileChange:ve,handleArchiveChange:D}),p.jsx("div",{className:"flex-grow overflow-auto hidden md:block",children:p.jsx(ytt,{entries:et,editingPath:m,newName:d,creatingFolder:b,newFolderName:x,selectedFileIds:o,isOperationLoading:K,handleNavigate:Ae,handleCheckboxChange:Ee,startEditing:Be,cancelEditing:ke,handleRename:ct,cancelCreatingFolder:ht,handleCreateFolder:Ot,handleDownload:pe,handleDelete:Z,setNewName:h,setNewFolderName:_,renameInputRef:Me,newFolderInputRef:je,gitRepoStatus:S,handleGitInit:Ie,handleGitPull:de,handleGitCommit:bt,handleGitPush:St,handleGitStatus:z})}),p.jsx("div",{className:"flex-grow overflow-auto block md:hidden",children:p.jsx(Qtt,{entries:et,editingPath:m,newName:d,creatingFolder:b,newFolderName:x,selectedFileIds:o,isOperationLoading:K,handleNavigate:Ae,handleCheckboxChange:Ee,startEditing:Be,cancelEditing:ke,handleRename:ct,cancelCreatingFolder:ht,handleCreateFolder:Ot,handleDownload:pe,handleDelete:Z,setNewName:h,setNewFolderName:_,renameInputRef:Me,newFolderInputRef:je,gitRepoStatus:S,handleGitInit:Ie,handleGitPull:de,handleGitCommit:bt,handleGitPush:St,handleGitStatus:z})}),p.jsx(vtt,{isOpen:E,onOpenChange:A,cloneRepoUrl:R,setCloneRepoUrl:N,cloneBranch:M,setCloneBranch:P,isCloning:L,onSubmitClone:it,currentPath:Ce}),p.jsx(xtt,{isOpen:V,onOpenChange:F,commitPath:J,commitMessage:G,setCommitMessage:$,isCommitting:ne,onSubmitCommit:be})]})});g5.displayName="FileManager";const ent=({vfsKey:e,selectedItemType:t})=>e==="orphan"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(HL,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Shared VFS:"})," All chats ",p.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(HL,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(Uf,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null,tnt=({module:e,isOpen:t,onClose:n})=>{const[r,i]=T.useState(e.getSelectedFileIdsCount()),[s,a]=T.useState(null);T.useEffect(()=>{const u=h=>{i(h.selectedFileIds.length)},d=h=>{a(h.itemType)};return Le.on(un.selectionChanged,u),Le.on(Wn.selectedItemChanged,d),()=>{Le.off(un.selectionChanged,u),Le.off(Wn.selectedItemChanged,d)}},[]);const o=Hi.getState().vfsKey,l=()=>{const u=Hi.getState().selectedFileIds,d=e.getVfsNodes();if(u.size===0){De.info("No files selected in VFS to attach.");return}let h=0;u.forEach(m=>{const y=d[m];y&&y.type==="file"&&(Le.emit(wl.addAttachedFileRequest,{source:"vfs",name:y.name,type:y.mimeType||"application/octet-stream",size:y.size,path:y.path}),h++)}),h>0?(De.success(`Attached ${h} file(s) from VFS to the next prompt.`),e.clearVfsSelection(),n()):De.warning("No valid files were selected to attach.")},c=()=>{e.clearVfsSelection(),n()};return p.jsx(Iy,{open:t,onOpenChange:u=>!u&&c(),children:p.jsxs(Ny,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[p.jsxs(My,{className:"p-4 pb-2 border-b flex-shrink-0",children:[p.jsx(Py,{children:"Virtual Filesystem"}),p.jsx(w1,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),p.jsx(ent,{vfsKey:o,selectedItemType:s})]}),p.jsx("div",{className:"flex-grow overflow-hidden",children:p.jsx(g5,{})}),p.jsxs(jy,{className:"p-4 pt-2 border-t flex-shrink-0",children:[p.jsx(Tt,{variant:"outline",onClick:c,children:"Close"}),p.jsxs(Tt,{onClick:l,disabled:r===0,children:[p.jsx(sP,{className:"h-4 w-4 mr-2"}),"Attach Selected (",r,")"]})]})]})})};class nnt{constructor(){we(this,"id","core-vfs");we(this,"modalId","core-vfs-modal-panel");we(this,"unregisterCallbacks",[]);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"notifyTriggerUpdate",null);we(this,"isModalOpenByManager",!1);we(this,"getEnableVfs",()=>Hi.getState().enableVfs);we(this,"getIsVfsModalOpen",()=>this.isModalOpenByManager);we(this,"getSelectedFileIdsCount",()=>Hi.getState().selectedFileIds.size);we(this,"toggleVfsModal",()=>{var t,n;this.isModalOpenByManager?(t=this.modApiRef)==null||t.emit(Rr.closeModalRequest,{modalId:this.modalId}):(n=this.modApiRef)==null||n.emit(Rr.openModalRequest,{modalId:this.modalId})});we(this,"clearVfsSelection",()=>{var t;(t=this.modApiRef)==null||t.emit(un.clearSelectionRequest,void 0)});we(this,"getVfsNodes",()=>Hi.getState().nodes);we(this,"setNotifyTriggerUpdate",t=>{this.notifyTriggerUpdate=t})}async initialize(t){this.modApiRef=t,this.updateVfsKeyBasedOnContext();const n=t.on(Rr.contextChanged,()=>{var i;this.updateVfsKeyBasedOnContext(),(i=this.notifyTriggerUpdate)==null||i.call(this)}),r=t.on(Rr.modalStateChanged,i=>{var s;if(i.modalId===this.modalId){const a=i.isOpen;this.isModalOpenByManager!==a&&(this.isModalOpenByManager=a,(s=this.notifyTriggerUpdate)==null||s.call(this),a&&this.updateVfsKeyBasedOnContext())}});this.eventUnsubscribers.push(n,r)}updateVfsKeyBasedOnContext(){var s;const{selectedItemId:t,selectedItemType:n}=$n.getState(),r=Hi.getState().vfsKey;let i=null;if(this.isModalOpenByManager)if(n==="project")i=t;else if(n==="conversation"){const a=$n.getState().getConversationById(t);i=(a==null?void 0:a.projectId)??"orphan"}else i="orphan";else if(n==="project")i=t;else if(n==="conversation"){const a=$n.getState().getConversationById(t);i=(a==null?void 0:a.projectId)??"orphan"}else i="orphan";r!==i&&(console.log(`[${this.id}] Updating VFS key from "${r}" to "${i}"`),(s=this.modApiRef)==null||s.emit(un.setVfsKeyRequest,{key:i}))}register(t){if(this.modApiRef=t,this.unregisterCallbacks.length>0){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=t.registerPromptControl({id:"core-vfs-prompt-trigger",triggerRenderer:()=>lt.createElement(JQe,{module:this})});this.unregisterCallbacks.push(n);const r=t.registerModalProvider(this.modalId,i=>lt.createElement(tnt,{module:this,...i}));this.unregisterCallbacks.push(r)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallbacks.forEach(t=>t()),this.unregisterCallbacks=[],this.notifyTriggerUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const rnt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.selectedItemId,r=e.selectedItemType,i=e.syncRepos,s=e.conversationSyncStatus,a=e.isStreaming,[o,l]=T.useState(null),[c,u]=T.useState("idle"),[d,h]=T.useState(!1),[m,y]=T.useState(!1);T.useEffect(()=>{if(r==="conversation"&&n){const A=e.getConversationById(n);l((A==null?void 0:A.syncRepoId)??null),u(s[n]??"idle")}else l(null),u("idle")},[n,r,s,e]);const b=lt.useMemo(()=>new Map(i.map(A=>[A.id,A.name])),[i]),v=o?b.get(o):void 0,x=T.useCallback(async A=>{if(!n||r!=="conversation")return;h(!0);const R=A==="none"?null:A;await e.linkConversationToRepo(n,R),h(!1)},[n,r,e]),_=T.useCallback(async()=>{!n||!o||(y(!0),await e.syncConversation(n),y(!1))},[n,o,e]),S=Qoe(c,v),C=!o||m||d||a||c==="syncing";return r==="conversation"&&i.length>0?p.jsxs(Ll,{children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Bl,{asChild:!0,children:p.jsx(Tt,{variant:o?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:a||d||m,"aria-label":"Configure Git Sync",children:c==="syncing"||m||d?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(cc,{className:"h-4 w-4"})})})}),p.jsx(wr,{side:"top",children:o?`Sync Status: ${c}`:"Link to Sync Repo"})]})}),p.jsxs($l,{className:"w-64 p-4 space-y-3",align:"start",children:[p.jsx(en,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),p.jsxs(g1,{value:o??"none",onValueChange:x,disabled:d||m||a,children:[p.jsx(b1,{id:"sync-repo-select",className:"w-full h-9",children:p.jsx(y1,{placeholder:"Select repository..."})}),p.jsxs(v1,{children:[p.jsx(ch,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),i.map(A=>p.jsx(ch,{value:A.id,children:A.name},A.id))]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",S||"Not Linked"]}),p.jsxs(Tt,{size:"sm",variant:"outline",onClick:_,disabled:C,className:"h-8",children:[m||c==="syncing"?p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(nP,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]}):null},Nv=({title:e,description:t,children:n,className:r,titleClassName:i,descriptionClassName:s,contentClassName:a})=>p.jsxs("div",{className:ft("space-y-2",r),children:[p.jsxs("div",{children:[p.jsx("h3",{className:ft("text-lg font-medium",i),children:e}),t&&p.jsx("p",{className:ft("text-sm text-muted-foreground",s),children:t})]}),p.jsx("div",{className:ft(a),children:n})]}),int=Ze({gitUserName:$e().min(1,"User name cannot be empty."),gitUserEmail:$e().email("Invalid email address.")});function PV({field:e}){return p.jsx(p.Fragment,{children:e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:"text-xs text-destructive mt-1 block",children:e.state.meta.errors.map(t=>typeof t=="string"?t:typeof t=="object"&&t!==null&&"message"in t&&typeof t.message=="string"?t.message:(console.warn("FieldMetaMessages encountered an unexpected error object:",t),"Invalid input")).join(", ")}):null})}const snt=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=mr(Tn(s=>({gitUserName:s.gitUserName,setGitUserName:s.setGitUserName,gitUserEmail:s.gitUserEmail,setGitUserEmail:s.setGitUserEmail}))),i=ea({defaultValues:{gitUserName:e??"",gitUserEmail:n??""},validators:{onChange:int},onSubmit:async({value:s})=>{try{t(s.gitUserName),r(s.gitUserEmail),De.success("Git user configuration updated!")}catch(a){De.error("Failed to update Git configuration."),console.error("Error submitting Git config form:",a)}}});return T.useEffect(()=>{i.reset({gitUserName:e??"",gitUserEmail:n??""})},[e,n,i]),p.jsx("div",{className:"space-y-4 p-1",children:p.jsx(Nv,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-3 shadow-sm bg-card",children:p.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),i.handleSubmit()},className:"space-y-3",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsx(i.Field,{name:"gitUserName",children:s=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:s.name,children:"Git User Name"}),p.jsx(pr,{id:s.name,value:s.state.value,onBlur:s.handleBlur,onChange:a=>s.handleChange(a.target.value),placeholder:"Your Name",className:s.state.meta.errors.length?"border-destructive":""}),p.jsx(PV,{field:s})]})}),p.jsx(i.Field,{name:"gitUserEmail",children:s=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:s.name,children:"Git User Email"}),p.jsx(pr,{id:s.name,type:"email",value:s.state.value,onBlur:s.handleBlur,onChange:a=>s.handleChange(a.target.value),placeholder:"your.email@example.com",className:s.state.meta.errors.length?"border-destructive":""}),p.jsx(PV,{field:s})]})})]}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(i.Subscribe,{selector:s=>[s.canSubmit,s.isSubmitting,s.isValidating,s.isValid],children:([s,a,o,l])=>p.jsx(Tt,{type:"submit",size:"sm",disabled:!s||a||o||!l,children:a?"Saving...":o?"Validating...":"Save Git Config"})})})]})})})},ant=lt.memo(snt),ont=Qj("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function hue({className:e,variant:t,...n}){return p.jsx("div",{"data-slot":"alert",role:"alert",className:ft(ont({variant:t}),e),...n})}function pue({className:e,...t}){return p.jsx("div",{"data-slot":"alert-title",className:ft("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function mue({className:e,...t}){return p.jsx("div",{"data-slot":"alert-description",className:ft("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}var lnt="Separator",OV="horizontal",cnt=["horizontal","vertical"],gue=T.forwardRef((e,t)=>{const{decorative:n,orientation:r=OV,...i}=e,s=unt(r)?r:OV,o=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return p.jsx(nr.div,{"data-orientation":s,...o,...i,ref:t})});gue.displayName=lnt;function unt(e){return cnt.includes(e)}var dnt=gue;function Ad({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return p.jsx(dnt,{"data-slot":"separator-root",decorative:n,orientation:t,className:ft("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const fnt=({onSyncAll:e,onSyncPending:t,onInitializeRepos:n,onAbortSync:r,isRunning:i=!1,totalRepos:s,totalConversations:a,pendingConversations:o})=>{const[l,c]=T.useState(null),[u,d]=T.useState(!1);T.useEffect(()=>{const S=R=>{R&&R.progress&&(c(R.progress),d(!0))},C=R=>{R&&R.progress&&c(R.progress)},E=R=>{R&&R.progress&&(c(R.progress),setTimeout(()=>{c(null),d(!1)},2e3))},A=R=>{R&&R.progress&&(c(R.progress),setTimeout(()=>{c(null),d(!1)},5e3))};return Le.on(si.bulkSyncStarted,S),Le.on(si.bulkSyncProgress,C),Le.on(si.bulkSyncCompleted,E),Le.on(si.bulkSyncFailed,A),()=>{Le.off(si.bulkSyncStarted,S),Le.off(si.bulkSyncProgress,C),Le.off(si.bulkSyncCompleted,E),Le.off(si.bulkSyncFailed,A)}},[]);const h=i||u,m=l?l.completedRepos/Math.max(l.totalRepos,1)*100:0,y=l?l.completedConversations/Math.max(l.totalConversations,1)*100:0,b=async()=>{d(!0);try{await e()}catch(S){console.error("Sync all failed:",S),d(!1)}},v=async()=>{d(!0);try{await t()}catch(S){console.error("Sync pending failed:",S),d(!1)}},x=async()=>{d(!0);try{await n()}catch(S){console.error("Initialize repos failed:",S),d(!1)}},_=async()=>{try{await r()}catch(S){console.error("Abort sync failed:",S)}};return p.jsxs(i6,{className:"w-full",children:[p.jsxs(s6,{className:"pb-3",children:[p.jsxs(a6,{className:"flex items-center gap-2",children:[p.jsx(cc,{className:"h-5 w-5"}),"Bulk Git Sync"]}),p.jsx(Tie,{children:"Manage synchronization across all repositories and conversations"})]}),p.jsxs(o6,{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-medium text-lg",children:s}),p.jsx("div",{className:"text-muted-foreground",children:"Repositories"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-medium text-lg",children:a}),p.jsx("div",{className:"text-muted-foreground",children:"Total Conversations"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:ft("font-medium text-lg",o>0?"text-orange-600":"text-green-600"),children:o}),p.jsx("div",{className:"text-muted-foreground",children:"Pending Sync"})]})]}),p.jsx(Ad,{}),l&&p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"font-medium",children:"Current Operation"}),p.jsx($f,{variant:l.errors.length>0?"destructive":"default",children:l.errors.length>0?"Errors":"Running"})]}),p.jsx("div",{className:"text-sm text-muted-foreground bg-muted p-2 rounded",children:l.currentOperation}),l.totalRepos>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{children:"Repository Progress"}),p.jsxs("span",{children:[l.completedRepos,"/",l.totalRepos]})]}),p.jsx(uw,{value:m,className:"h-2"})]}),l.totalConversations>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{children:"Conversation Progress"}),p.jsxs("span",{children:[l.completedConversations,"/",l.totalConversations]})]}),p.jsx(uw,{value:y,className:"h-2"})]}),l.errors.length>0&&p.jsxs("div",{className:"mt-2",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive mb-2",children:[p.jsx(lc,{className:"h-4 w-4"}),l.errors.length," Error",l.errors.length!==1?"s":""]}),p.jsxs("div",{className:"max-h-24 overflow-y-auto space-y-1",children:[l.errors.slice(0,5).map((S,C)=>p.jsxs("div",{className:"text-xs text-muted-foreground bg-destructive/10 p-2 rounded",children:[p.jsxs("span",{className:"font-medium",children:[S.type,":"]})," ",S.error]},C)),l.errors.length>5&&p.jsxs("div",{className:"text-xs text-muted-foreground",children:["...and ",l.errors.length-5," more errors"]})]})]})]}),p.jsx(Ad,{}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(yr,{children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsxs(Tt,{onClick:x,disabled:h||s===0,variant:"outline",size:"sm",className:"w-full",children:[p.jsx(Jc,{className:"h-4 w-4 mr-1"}),"Clone Repos"]})}),p.jsx(wr,{children:"Initialize/clone all configured repositories"})]})}),p.jsx(yr,{children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsxs(Tt,{onClick:v,disabled:h||o===0,variant:"outline",size:"sm",className:"w-full",children:[p.jsx(OH,{className:"h-4 w-4 mr-1"}),"Sync Pending"]})}),p.jsx(wr,{children:"Sync only conversations that need syncing"})]})}),p.jsx(yr,{children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsxs(Tt,{onClick:b,disabled:h||s===0&&a===0,size:"sm",className:"w-full",children:[p.jsx(jp,{className:ft("h-4 w-4 mr-1",h&&"animate-spin")}),"Sync All"]})}),p.jsx(wr,{children:"Sync all repositories and conversations"})]})}),p.jsxs(Tt,{onClick:_,disabled:!h,variant:"destructive",size:"sm",className:"w-full",children:[p.jsx(Vhe,{className:"h-4 w-4 mr-1"}),"Stop"]})]})]})]})},hnt=Ze({name:$e().min(1,"Repository Name is required."),remoteUrl:$e().min(1,"Remote URL is required.").url("Invalid URL format (e.g., https://github.com/user/repo.git)"),branch:$e().min(1,"Branch name is required (e.g., main)."),username:$e().nullable().optional(),password:$e().nullable().optional()}),OS={name:"",remoteUrl:"",branch:"main",username:null,password:null},pnt=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,repoInitializationStatus:r,isLoading:i}=$n(Tn(C=>({syncRepos:C.syncRepos,addSyncRepo:C.addSyncRepo,updateSyncRepo:C.updateSyncRepo,repoInitializationStatus:C.repoInitializationStatus,isLoading:C.isLoading}))),{autoSyncOnStreamComplete:s,setAutoSyncOnStreamComplete:a}=mr(Tn(C=>({autoSyncOnStreamComplete:C.autoSyncOnStreamComplete,setAutoSyncOnStreamComplete:C.setAutoSyncOnStreamComplete}))),[o,l]=T.useState(!1),[c,u]=T.useState(null),[d,h]=T.useState({});T.useEffect(()=>{const C=E=>{E&&E.action==="deleted"&&E.repoId&&h(A=>({...A,[E.repoId]:!1}))};return Le.on(si.repoChanged,C),()=>Le.off(si.repoChanged,C)},[]);const m=ea({defaultValues:OS,validators:{onChangeAsync:hnt,onChangeAsyncDebounceMs:500},onSubmit:async({value:C})=>{var E,A,R,N;if(!((E=C.name)!=null&&E.trim())||!((A=C.remoteUrl)!=null&&A.trim())){De.error("Repository Name and Remote URL are required.");return}try{const M={name:C.name.trim(),remoteUrl:C.remoteUrl.trim(),branch:((R=C.branch)==null?void 0:R.trim())||"main",username:((N=C.username)==null?void 0:N.trim())||null,password:C.password||null};c?await n(c,M):await t(M),y()}catch(M){console.error("Failed to save sync repo:",M)}}}),y=T.useCallback(()=>{m.reset(OS),l(!1),u(null)},[m]);T.useEffect(()=>{if(c){const C=e.find(E=>E.id===c);C?(m.reset({name:C.name,remoteUrl:C.remoteUrl,branch:C.branch||"main",username:C.username??null,password:C.password??null}),l(!1)):y()}else o||m.reset(OS)},[c,e,m,o,y]);const b=C=>{u(C.id),l(!1)},v=T.useCallback((C,E)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${E}"? This will unlink it from any conversations and remove the local copy.`)){h(A=>({...A,[C]:!0}));try{Le.emit(Wn.deleteSyncRepoRequest,{id:C}),c===C&&y()}catch(A){console.error("Failed to delete sync repo:",A),h(R=>({...R,[C]:!1}))}}},[c,y]),x=T.useCallback(C=>{Le.emit(Wn.initializeOrSyncRepoRequest,{repoId:C})},[]),_=()=>{u(null),m.reset(OS),l(!0)},S=()=>p.jsxs("form",{onSubmit:C=>{C.preventDefault(),C.stopPropagation(),m.handleSubmit()},className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:c?"Edit Sync Repository":"Add New Sync Repository"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx(m.Field,{name:"name",children:C=>p.jsxs("div",{className:"sm:col-span-1 space-y-1.5",children:[p.jsx(en,{htmlFor:C.name,children:"Name"}),p.jsx(pr,{id:C.name,value:C.state.value??"",onChange:E=>C.handleChange(E.target.value),onBlur:C.handleBlur,placeholder:"e.g., My Backup",disabled:m.state.isSubmitting}),p.jsx(Ss,{field:C})]})}),p.jsx(m.Field,{name:"remoteUrl",children:C=>p.jsxs("div",{className:"sm:col-span-2 space-y-1.5",children:[p.jsx(en,{htmlFor:C.name,children:"Remote URL (HTTPS)"}),p.jsx(pr,{id:C.name,type:"url",value:C.state.value??"",onChange:E=>C.handleChange(E.target.value),onBlur:C.handleBlur,placeholder:"https://github.com/user/repo.git",disabled:m.state.isSubmitting}),p.jsx(Ss,{field:C})]})}),p.jsx(m.Field,{name:"branch",children:C=>p.jsxs("div",{className:"sm:col-span-1 space-y-1.5",children:[p.jsx(en,{htmlFor:C.name,children:"Branch"}),p.jsx(pr,{id:C.name,value:C.state.value??"",onChange:E=>C.handleChange(E.target.value),onBlur:C.handleBlur,placeholder:"main",disabled:m.state.isSubmitting}),p.jsx(Ss,{field:C})]})})]}),p.jsxs("div",{className:"pt-2",children:[p.jsx(en,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),p.jsxs(hue,{variant:"destructive",className:"mt-2 mb-3",children:[p.jsx(oP,{className:"h-4 w-4"}),p.jsx(pue,{children:"Security Warning"}),p.jsx(mue,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsx(m.Field,{name:"username",children:C=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:C.name,children:"Username"}),p.jsx(pr,{id:C.name,value:C.state.value??"",onChange:E=>C.handleChange(E.target.value),onBlur:C.handleBlur,placeholder:"Git Username (Optional)",disabled:m.state.isSubmitting,autoComplete:"off"}),p.jsx(Ss,{field:C})]})}),p.jsx(m.Field,{name:"password",children:C=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:C.name,children:"Password / Token"}),p.jsx(pr,{id:C.name,type:"password",value:C.state.value??"",onChange:E=>C.handleChange(E.target.value),onBlur:C.handleBlur,placeholder:"Password or PAT (Optional)",disabled:m.state.isSubmitting,autoComplete:"new-password"}),p.jsx(Ss,{field:C})]})})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Tt,{variant:"ghost",size:"sm",onClick:y,disabled:m.state.isSubmitting,type:"button",children:[p.jsx(Ya,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsx(m.Subscribe,{selector:C=>[C.canSubmit,C.isSubmitting,C.isValidating,C.isValid],children:([C,E,A,R])=>p.jsxs(Tt,{variant:"secondary",size:"sm",type:"submit",disabled:E||!C||!R||A,children:[(E||A)&&p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(ph,{className:"h-4 w-4 mr-1"})," ",E||A?"Saving...":"Save Repository"]})})]})]});return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-card",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx(en,{htmlFor:"auto-sync-toggle",className:"text-sm font-medium",children:"Auto-sync after stream completion"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically sync conversations with linked repositories when a message stream completes"})]}),p.jsx(au,{id:"auto-sync-toggle",checked:s,onCheckedChange:a})]}),p.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-card",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx(en,{htmlFor:"auto-init-repos-toggle",className:"text-sm font-medium",children:"Auto-initialize repositories on startup"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically clone/initialize configured repositories when the app starts (off by default)"})]}),p.jsx(au,{id:"auto-init-repos-toggle",checked:mr(C=>C.autoInitializeReposOnStartup),onCheckedChange:mr.getState().setAutoInitializeReposOnStartup})]})]}),e.length>0&&p.jsx(fnt,{onSyncAll:async()=>{await $n.getState().syncAllConversations()},onSyncPending:async()=>{await $n.getState().syncPendingConversations()},onInitializeRepos:async()=>{await $n.getState().initializeAllRepositories()},onAbortSync:async()=>{const{BulkSyncService:C}=await Hr(async()=>{const{BulkSyncService:E}=await Promise.resolve().then(()=>e0);return{BulkSyncService:E}},void 0);C.abort()},totalRepos:e.length,totalConversations:$n.getState().conversations.filter(C=>C.syncRepoId).length,pendingConversations:$n.getState().conversations.filter(C=>{const E=$n.getState().conversationSyncStatus[C.id];return C.syncRepoId&&E==="needs-sync"}).length})]}),!o&&!c&&p.jsxs(Tt,{onClick:_,variant:"outline",className:"w-full mb-4",disabled:i,children:[p.jsx(Y0,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(o||c)&&S(),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),i&&!o&&!c?p.jsxs("div",{className:"space-y-2",children:[p.jsx($r,{className:"h-10 w-full"}),p.jsx($r,{className:"h-10 w-full"}),p.jsx($r,{className:"h-10 w-full"})]}):e.length===0&&!o&&!c?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):p.jsx("div",{className:"border rounded-md overflow-x-auto",children:p.jsxs(vm,{children:[p.jsx(Dy,{children:p.jsxs(Ui,{children:[p.jsx(vi,{children:"Name"}),p.jsx(vi,{className:"hidden md:table-cell",children:"Remote URL"}),p.jsx(vi,{className:"hidden lg:table-cell",children:"Branch"}),p.jsx(vi,{className:"hidden lg:table-cell",children:"Auth"}),p.jsx(vi,{className:"text-right",children:"Actions"})]})}),p.jsx(xm,{children:e.map(C=>{const E=d[C.id],A=c===C.id,R=!!C.username||!!C.password,N=r[C.id]||"idle",M=N==="syncing",P=E||m.state.isSubmitting||!!c||M;let L=null,O="Initialize/Sync Repository";return N==="syncing"?(L=p.jsx(Yn,{className:"h-4 w-4 animate-spin mr-1"}),O="Initializing/Syncing..."):N==="idle"?(L=p.jsx(jk,{className:"h-4 w-4 text-green-500 mr-1"}),O="Sync Successful / Ready"):N==="error"?(L=p.jsx(lc,{className:"h-4 w-4 text-destructive mr-1"}),O="Sync Failed"):L=p.jsx(jp,{className:"h-4 w-4 mr-1"}),p.jsxs(Ui,{className:ft(A?"bg-muted/50":"",P&&!A?"opacity-70":""),children:[p.jsx(hr,{className:"font-medium truncate max-w-[100px] sm:max-w-xs",children:C.name}),p.jsx(hr,{className:"text-xs truncate max-w-[100px] sm:max-w-xs hidden md:table-cell",children:C.remoteUrl}),p.jsx(hr,{className:"hidden lg:table-cell",children:C.branch||"main"}),p.jsx(hr,{className:"text-xs hidden lg:table-cell",children:R?"Configured":"None"}),p.jsxs(hr,{className:"text-right space-x-1",children:[p.jsx(Mn,{tooltipText:O,onClick:()=>x(C.id),"aria-label":`Initialize or Sync repo ${C.name}`,disabled:P,icon:L,variant:"outline",className:"h-8 w-8"}),p.jsx(Mn,{tooltipText:"Edit",onClick:()=>b(C),"aria-label":`Edit repo ${C.name}`,disabled:P,icon:p.jsx(xw,{}),className:"h-8 w-8"}),p.jsx(Mn,{tooltipText:"Delete",onClick:()=>v(C.id,C.name),"aria-label":`Delete repo ${C.name}`,disabled:P,icon:E?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ho,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},C.id)})})]})})]})]})},mnt=lt.memo(pnt),gnt=()=>{const e=T.useMemo(()=>[{value:"config",label:"User Config",content:p.jsx(ant,{})},{value:"sync",label:"Sync Repositories",content:p.jsx(mnt,{})}],[]);return p.jsx(Ld,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},ynt=lt.memo(gnt);class bnt{constructor(){we(this,"id","core-git-sync");we(this,"unregisterPromptControlCallback",null);we(this,"unregisterSettingsTabCallback",null);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"selectedItemId",null);we(this,"selectedItemType",null);we(this,"syncRepos",[]);we(this,"conversationSyncStatus",{});we(this,"isStreaming",!1);we(this,"autoSyncEnabled",!1);we(this,"isBulkSyncing",!1);we(this,"bulkSyncProgress",null);we(this,"notifyComponentUpdate",null);we(this,"linkConversationToRepo",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(Wn.linkConversationToRepoRequest,{conversationId:t,repoId:n})});we(this,"syncConversation",t=>{var n;(n=this.modApiRef)==null||n.emit(Wn.syncConversationRequest,{conversationId:t})});we(this,"getConversationById",t=>$n.getState().getConversationById(t));we(this,"syncAllConversations",async()=>{await $n.getState().syncAllConversations()});we(this,"syncPendingConversations",async()=>{await $n.getState().syncPendingConversations()});we(this,"initializeAllRepositories",async()=>{await $n.getState().initializeAllRepositories()});we(this,"abortBulkSync",async()=>{const{BulkSyncService:t}=await Hr(async()=>{const{BulkSyncService:n}=await Promise.resolve().then(()=>e0);return{BulkSyncService:n}},void 0);t.abort()});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.loadInitialState();const n=t.on(Rr.contextChanged,m=>{var y;this.selectedItemId=m.selectedItemId,this.selectedItemType=m.selectedItemType,(y=this.notifyComponentUpdate)==null||y.call(this)}),r=t.on(si.repoChanged,()=>{var m;this.syncRepos=$n.getState().syncRepos,(m=this.notifyComponentUpdate)==null||m.call(this)}),i=t.on(Wn.conversationSyncStatusChanged,m=>{var y;typeof m=="object"&&m&&"conversationId"in m&&"status"in m&&(this.conversationSyncStatus={...this.conversationSyncStatus,[m.conversationId]:m.status},(y=this.notifyComponentUpdate)==null||y.call(this))}),s=t.on(tr.statusChanged,m=>{var y;typeof m=="object"&&m&&"status"in m&&(this.isStreaming=m.status==="streaming",(y=this.notifyComponentUpdate)==null||y.call(this))}),a=t.on(tr.completed,async m=>{typeof m=="object"&&m&&"interactionId"in m&&"status"in m&&m.status==="COMPLETED"&&this.autoSyncEnabled&&await this.handleAutoSync()}),o=t.on(sn.autoSyncOnStreamCompleteChanged,m=>{var y;typeof m=="object"&&m&&"enabled"in m&&(this.autoSyncEnabled=m.enabled,(y=this.notifyComponentUpdate)==null||y.call(this))}),l=t.on(si.bulkSyncStarted,m=>{var y;typeof m=="object"&&m&&"progress"in m&&(this.isBulkSyncing=!0,this.bulkSyncProgress=m.progress,(y=this.notifyComponentUpdate)==null||y.call(this))}),c=t.on(si.bulkSyncProgress,m=>{var y;typeof m=="object"&&m&&"progress"in m&&(this.bulkSyncProgress=m.progress,(y=this.notifyComponentUpdate)==null||y.call(this))}),u=t.on(si.bulkSyncCompleted,m=>{var y;typeof m=="object"&&m&&"progress"in m&&(this.isBulkSyncing=!1,this.bulkSyncProgress=null,(y=this.notifyComponentUpdate)==null||y.call(this))}),d=t.on(si.bulkSyncFailed,m=>{var y;typeof m=="object"&&m&&"progress"in m&&(this.isBulkSyncing=!1,this.bulkSyncProgress=null,(y=this.notifyComponentUpdate)==null||y.call(this))}),h=t.on(Wn.conversationUpdated,m=>{var y;typeof m=="object"&&m&&"conversationId"in m&&"updates"in m&&m.conversationId===this.selectedItemId&&m.updates.syncRepoId!==void 0&&(this.loadInitialState(),(y=this.notifyComponentUpdate)==null||y.call(this))});this.eventUnsubscribers.push(n,r,i,s,a,o,l,c,u,d,h)}loadInitialState(){const t=$n.getState();this.selectedItemId=t.selectedItemId,this.selectedItemType=t.selectedItemType,this.syncRepos=t.syncRepos,this.conversationSyncStatus=t.conversationSyncStatus,this.isStreaming=Ln.getState().status==="streaming",this.autoSyncEnabled=mr.getState().autoSyncOnStreamComplete}async handleAutoSync(){if(!this.selectedItemId||this.selectedItemType!=="conversation")return;const t=this.getConversationById(this.selectedItemId);if(!(t!=null&&t.syncRepoId))return;const n=this.conversationSyncStatus[this.selectedItemId];if(!(n==="syncing"||n==="idle")){console.log(`[GitSyncControlModule] Auto-syncing conversation ${this.selectedItemId}`);try{await this.syncConversation(this.selectedItemId)}catch(r){console.error("[GitSyncControlModule] Auto-sync failed:",r)}}}register(t){this.modApiRef=t,this.unregisterPromptControlCallback||(this.unregisterPromptControlCallback=t.registerPromptControl({id:this.id,triggerRenderer:()=>lt.createElement(rnt,{module:this})})),this.unregisterSettingsTabCallback||(this.unregisterSettingsTabCallback=t.registerSettingsTab({id:"git",title:"Git",component:ynt,order:60}))}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterPromptControlCallback&&(this.unregisterPromptControlCallback(),this.unregisterPromptControlCallback=null),this.unregisterSettingsTabCallback&&(this.unregisterSettingsTabCallback(),this.unregisterSettingsTabCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const vnt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const{syncRepos:n,repoInitializationStatus:r}=$n(Tn(c=>({syncRepos:c.syncRepos,repoInitializationStatus:c.repoInitializationStatus}))),i=()=>{e.syncAllRepos()},s=c=>{e.syncRepo(c)},a=e.isSyncing,o=n.length>0,l=Object.values(r).some(c=>c==="syncing");return p.jsx(yr,{delayDuration:100,children:p.jsxs(Ll,{children:[p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Bl,{asChild:!0,children:p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:!o,"aria-label":"Manual Git Sync",children:a||l?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(cc,{className:"h-4 w-4"})})})}),p.jsx(wr,{side:"top",children:o?"Manual Git Sync":"No sync repositories configured"})]}),p.jsx($l,{className:"w-80 p-4",align:"start",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h4",{className:"font-semibold text-sm",children:"Git Sync Repositories"}),p.jsxs(Tt,{variant:"outline",size:"sm",onClick:i,disabled:!o||a||l,className:"h-8",children:[a||l?p.jsx(Yn,{className:"h-3 w-3 mr-1 animate-spin"}):p.jsx(jp,{className:"h-3 w-3 mr-1"}),"Sync All"]})]}),o?p.jsx("div",{className:"space-y-2",children:n.map(c=>{const u=r[c.id]||"idle",d=u==="syncing";return p.jsxs("div",{className:ft("flex items-center justify-between p-3 border rounded-lg","bg-card hover:bg-muted/50 transition-colors"),children:[p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm font-medium truncate",children:c.name}),p.jsx($f,{variant:u==="idle"?"secondary":u==="syncing"?"default":u==="error"?"destructive":"outline",className:"text-xs",children:u==="idle"?"Ready":u==="syncing"?"Syncing":u==="error"?"Error":"Unknown"})]}),p.jsx("p",{className:"text-xs text-muted-foreground truncate",children:c.branch||"main"})]}),p.jsx(Tt,{variant:"ghost",size:"sm",onClick:()=>s(c.id),disabled:d||a,className:"h-8 w-8 p-0",children:d?p.jsx(Yn,{className:"h-3 w-3 animate-spin"}):p.jsx(jp,{className:"h-3 w-3"})})]},c.id)})}):p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured. Go to Settings → Git → Sync Repositories to add one."})]})})]})})};class xnt{constructor(){we(this,"id","core-manual-git-sync-sidebar");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"syncRepos",[]);we(this,"repoInitializationStatus",{});we(this,"isSyncing",!1);we(this,"notifyComponentUpdate",null);we(this,"syncAllRepos",async()=>{var t,n;if(!(this.isSyncing||this.syncRepos.length===0)){this.isSyncing=!0,(t=this.notifyComponentUpdate)==null||t.call(this);try{console.log("[ManualSyncSidebarControlModule] Starting bulk sync for all repositories and conversations");const{BulkSyncService:r}=await Hr(async()=>{const{BulkSyncService:i}=await Promise.resolve().then(()=>e0);return{BulkSyncService:i}},void 0);await r.syncAll({syncRepos:!0,syncConversations:!0,continueOnError:!0,maxConcurrent:3}),console.log("[ManualSyncSidebarControlModule] Completed bulk sync")}catch(r){console.error("[ManualSyncSidebarControlModule] Error in bulk sync:",r)}finally{this.isSyncing=!1,(n=this.notifyComponentUpdate)==null||n.call(this)}}});we(this,"syncRepo",async t=>{var r;const n=this.syncRepos.find(i=>i.id===t);if(!n){console.warn(`[ManualSyncSidebarControlModule] Repository ${t} not found`);return}console.log(`[ManualSyncSidebarControlModule] Starting sync for repository: ${n.name}`),(r=this.modApiRef)==null||r.emit(Wn.initializeOrSyncRepoRequest,{repoId:t})});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.loadInitialState();const n=t.on(si.repoChanged,()=>{var s;this.syncRepos=$n.getState().syncRepos,(s=this.notifyComponentUpdate)==null||s.call(this)}),r=t.on(si.repoInitStatusChanged,s=>{var a;typeof s=="object"&&s&&"repoId"in s&&"status"in s&&(this.repoInitializationStatus={...this.repoInitializationStatus,[s.repoId]:s.status},(a=this.notifyComponentUpdate)==null||a.call(this))}),i=t.on(Wn.syncReposLoaded,()=>{var s;this.loadInitialState(),(s=this.notifyComponentUpdate)==null||s.call(this)});this.eventUnsubscribers.push(n,r,i)}loadInitialState(){const t=$n.getState();this.syncRepos=t.syncRepos,this.repoInitializationStatus=t.repoInitializationStatus}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=()=>lt.createElement(vnt,{module:this});this.unregisterCallback=t.registerChatControl({id:this.id,panel:"sidebar-footer",status:()=>"ready",renderer:n,iconRenderer:n,show:()=>!0})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const wnt=Ze({path:$e().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),_nt=Ze({path:$e().describe("The path of the file to read within the VFS."),encoding:jl(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),Snt=Ze({path:$e().describe("The path where the file should be written."),content:$e().describe("The content to write to the file."),encoding:jl(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),Cnt=Ze({path:$e().describe("The path of the file or directory to delete."),recursive:kr().optional().default(!1).describe("Whether to delete directories recursively.")}),knt=Ze({path:$e().describe("The path of the directory to create (including parents).")}),Ent=Ze({oldPath:$e().describe("The current path of the item to rename."),newName:$e().describe("The new name for the item.")});class Tnt{constructor(){we(this,"id","core-vfs-tools");we(this,"unregisterCallbacks",[])}async initialize(t){console.log(`[${this.id}] Initialized.`)}register(t){if(this.unregisterCallbacks.length>0){console.warn(`[${this.id}] Already registered. Skipping.`);return}console.log(`[${this.id}] Registering Core VFS Tools...`);const n={description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:wnt};this.unregisterCallbacks.push(t.registerTool("vfsListFiles",n,async({path:l},c)=>{const u=c==null?void 0:c.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=Fr(l||"/");try{const h=await NO(d,{fsInstance:u});return{success:!0,path:d,entries:h.map(m=>({name:m.name,type:m.isDirectory?"folder":"file",size:m.size,lastModified:m.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}));const r={description:"Read the content of a file from the VFS.",parameters:_nt};this.unregisterCallbacks.push(t.registerTool("vfsReadFile",r,async({path:l,encoding:c},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Fr(l);try{const m=await Sh(h,{fsInstance:d});let y;return c==="base64"?y=btoa(String.fromCharCode(...m)):y=new TextDecoder().decode(m),{success:!0,path:h,content:y,encoding:c}}catch(m){return{success:!1,path:h,error:m.message}}}));const i={description:"Write content to a file in the VFS.",parameters:Snt};this.unregisterCallbacks.push(t.registerTool("vfsWriteFile",i,async({path:l,content:c,encoding:u},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const m=Fr(l);try{let y;if(u==="base64"){const b=atob(c),v=b.length,x=new Uint8Array(v);for(let _=0;_<v;_++)x[_]=b.charCodeAt(_);y=x}else y=c;return await TE(m,y,{fsInstance:h}),{success:!0,path:m}}catch(y){return{success:!1,path:m,error:y.message}}}));const s={description:"Delete a file or directory from the VFS.",parameters:Cnt};this.unregisterCallbacks.push(t.registerTool("vfsDelete",s,async({path:l,recursive:c},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Fr(l);try{return await MO(h,c,{fsInstance:d}),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}));const a={description:"Create a directory (including parents) in the VFS.",parameters:knt};this.unregisterCallbacks.push(t.registerTool("vfsCreateDirectory",a,async({path:l},c)=>{const u=c==null?void 0:c.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=Fr(l);try{return await gZ(d,{fsInstance:u}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}));const o={description:"Rename a file or directory in the VFS.",parameters:Ent};this.unregisterCallbacks.push(t.registerTool("vfsRename",o,async({oldPath:l,newName:c},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Fr(l),m=Fr(h.substring(0,h.lastIndexOf("/"))||"/"),y=fu(m,c);try{return await bZ(h,y,{fsInstance:d}),{success:!0,oldPath:h,newPath:y}}catch(b){return{success:!1,oldPath:h,newName:c,error:b.message}}})),console.log(`[${this.id}] Core VFS Tools Registered.`)}destroy(){this.unregisterCallbacks.forEach(t=>t()),this.unregisterCallbacks=[],console.log(`[${this.id}] Destroyed.`)}}const Ant=Ze({path:$e().describe("The directory path within the VFS to initialize as a Git repository.")}),Rnt=Ze({path:$e().describe("The directory path of the Git repository within the VFS to commit."),message:$e().describe("The commit message.")}),Int=Ze({path:$e().describe("The directory path of the Git repository within the VFS to pull from."),branch:$e().optional().describe("The branch name to pull.")}),Nnt=Ze({path:$e().describe("The directory path of the Git repository within the VFS to push."),branch:$e().optional().describe("The branch name to push.")}),Mnt=Ze({path:$e().describe("The directory path of the Git repository within the VFS to check status.")});class jnt{constructor(){we(this,"id","core-git-tools");we(this,"unregisterCallbacks",[])}async initialize(t){}register(t){if(this.unregisterCallbacks.length>0){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n={description:"Initialize an empty Git repository in a VFS directory.",parameters:Ant};this.unregisterCallbacks.push(t.registerTool("gitInit",n,async({path:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};try{return await pZ(o,{fsInstance:c}),{success:!0,message:`Repository initialized at ${o}`}}catch(u){return{success:!1,error:u.message}}}));const r={description:"Stage all changes and commit them in a VFS Git repository.",parameters:Rnt};this.unregisterCallbacks.push(t.registerTool("gitCommit",r,async({path:o,message:l},c)=>{const u=c==null?void 0:c.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=mr.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await RO(o,l,{fsInstance:u}),{success:!0,message:`Changes committed in ${o}`}}catch(h){return{success:!1,error:h.message}}}));const i={description:"Pull changes from the remote repository for the specified branch.",parameters:Int};this.unregisterCallbacks.push(t.registerTool("gitPull",i,async({path:o,branch:l},c)=>{const u=c==null?void 0:c.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await EE(o,l||"main",void 0,{fsInstance:u}),{success:!0,message:`Pulled changes for ${o}`}}catch(d){return{success:!1,error:d.message}}}));const s={description:"Push committed changes from the local branch to the remote repository.",parameters:Nnt};this.unregisterCallbacks.push(t.registerTool("gitPush",s,async({path:o,branch:l},c)=>{const u=c==null?void 0:c.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await IO(o,l||"main",void 0,{fsInstance:u}),{success:!0,message:`Pushed changes for ${o}`}}catch(d){return{success:!1,error:d.message}}}));const a={description:"Get the Git status for a VFS repository.",parameters:Mnt};this.unregisterCallbacks.push(t.registerTool("gitStatus",a,async({path:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};try{return await mZ(o,{fsInstance:c}),{success:!0,message:`Status checked for ${o}`}}catch(u){return{success:!1,error:u.message}}}))}destroy(){this.unregisterCallbacks.forEach(t=>t()),this.unregisterCallbacks=[],console.log(`[${this.id}] Destroyed.`)}}const Pnt=({module:e,popoverMaxSteps:t,setPopoverMaxSteps:n,className:r})=>{const i=e.getEnabledTools(),s=e.getSelectedItemId(),a=e.getSelectedItemType(),o=e.getGlobalDefaultMaxSteps(),l=Qo(_=>_.tools),[c,u]=T.useState(""),d=T.useMemo(()=>Object.entries(l).map(([_,{definition:S,modId:C}])=>({name:_,description:S.description??"No description provided.",modId:C})).sort((_,S)=>_.name.localeCompare(S.name)),[l]),h=T.useMemo(()=>{const _=c.trim().toLowerCase();return _?d.filter(S=>S.name.toLowerCase().includes(_)||S.description.toLowerCase().includes(_)||S.modId.toLowerCase().includes(_)):d},[d,c]),m=T.useCallback((_,S)=>{e.setEnabledTools(C=>{const E=new Set(C);return S?E.add(_):E.delete(_),E})},[e]),y=T.useCallback(_=>{e.setEnabledTools(()=>_?new Set(d.map(S=>S.name)):new Set)},[d,e]),b=_=>{const S=_.target.value;if(S===""){n(null);return}const C=parseInt(S,10);if(isNaN(C))n(null);else{const E=Math.max(1,Math.min(20,C));n(E)}},v=t===null?"":String(t),x=a!=="conversation"||!s;return p.jsxs("div",{className:ft("p-4 h-[28rem] max-w-2xl space-y-3",r),children:[p.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),p.jsxs("div",{className:"relative",children:[p.jsx(Aa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(pr,{type:"search",placeholder:"Filter tools...",value:c,onChange:_=>u(_.target.value),className:"pl-8 h-9",disabled:x})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs(en,{className:"text-xs text-muted-foreground",children:[h.length," tools shown (",i.size," enabled)"]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx(Tt,{variant:"outline",size:"sm",onClick:()=>y(!0),disabled:x||d.length===0,children:"Enable All"}),p.jsx(Tt,{variant:"outline",size:"sm",onClick:()=>y(!1),disabled:x||d.length===0||i.size===0,children:"Disable All"})]})]}),p.jsx(Na,{className:"h-56 border rounded-md p-2 bg-background/50",children:x?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):d.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):p.jsx("div",{className:"space-y-1",children:h.map(_=>p.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[p.jsx(au,{id:`tool-switch-${_.name}`,checked:i.has(_.name),onCheckedChange:S=>m(_.name,S),className:"flex-shrink-0",disabled:x}),p.jsxs(en,{htmlFor:`tool-switch-${_.name}`,className:ft("text-sm font-normal flex-grow pl-2 space-y-0.5",x?"cursor-not-allowed":"cursor-pointer"),title:`${_.name} (from ${_.modId})`,children:[p.jsx("span",{className:"block font-medium",children:_.name}),p.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:_.description})]})]},_.name))})}),p.jsxs("div",{className:"pt-2",children:[p.jsx(en,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),p.jsx(pr,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:v,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(o??5),disabled:x}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})},Ont=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const[n,r]=T.useState(!1),[i,s]=T.useState(e.getMaxStepsOverride()),a=e.getEnabledTools(),o=e.getMaxStepsOverride(),l=e.getIsStreaming(),c=e.getIsVisible();T.useEffect(()=>{s(e.getMaxStepsOverride())},[e.getMaxStepsOverride()]);const u=m=>{r(m),!m&&i!==e.getMaxStepsOverride()&&e.setMaxStepsOverride(i)},d=a.size>0||o!==null,h=l;return c?p.jsxs(Ll,{open:n,onOpenChange:u,children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Bl,{asChild:!0,children:p.jsx(Tt,{variant:d?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:h,"aria-label":"Configure Tools",children:p.jsx(Pp,{className:"h-4 w-4"})})})}),p.jsx(wr,{side:"top",children:`Tools (${a.size} enabled)`})]})}),p.jsx($l,{className:"w-auto p-0",align:"start",children:p.jsx(Pnt,{module:e,popoverMaxSteps:i,setPopoverMaxSteps:s})})]}):null};class Dnt{constructor(){we(this,"id","core-tool-selector");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"transientEnabledTools",new Set);we(this,"transientMaxStepsOverride",null);we(this,"isStreaming",!1);we(this,"isVisible",!0);we(this,"selectedItemId",null);we(this,"selectedItemType",null);we(this,"allToolsCount",0);we(this,"globalDefaultMaxSteps",5);we(this,"notifyComponentUpdate",null);we(this,"getEnabledTools",()=>this.transientEnabledTools);we(this,"getMaxStepsOverride",()=>this.transientMaxStepsOverride);we(this,"getIsStreaming",()=>this.isStreaming);we(this,"getIsVisible",()=>this.isVisible);we(this,"getSelectedItemId",()=>this.selectedItemId);we(this,"getSelectedItemType",()=>this.selectedItemType);we(this,"getAllToolsCount",()=>this.allToolsCount);we(this,"getGlobalDefaultMaxSteps",()=>this.globalDefaultMaxSteps);we(this,"setEnabledTools",t=>{var n;this.transientEnabledTools=t(this.transientEnabledTools),(n=this.notifyComponentUpdate)==null||n.call(this)});we(this,"setMaxStepsOverride",t=>{var n;this.transientMaxStepsOverride=t,(n=this.notifyComponentUpdate)==null||n.call(this)});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var o;this.loadInitialState(),this.updateVisibility(),(o=this.notifyComponentUpdate)==null||o.call(this);const n=t.on(tr.statusChanged,l=>{var c;typeof l=="object"&&l&&"status"in l&&this.isStreaming!==(l.status==="streaming")&&(this.isStreaming=l.status==="streaming",(c=this.notifyComponentUpdate)==null||c.call(this))}),r=t.on(lr.selectedModelChanged,()=>{var l;this.updateVisibility(),(l=this.notifyComponentUpdate)==null||l.call(this)}),i=t.on(Rr.contextChanged,l=>{var c;this.selectedItemId=l.selectedItemId,this.selectedItemType=l.selectedItemType,this.updateVisibility(),(c=this.notifyComponentUpdate)==null||c.call(this)}),s=t.on(sn.toolMaxStepsChanged,l=>{var c;typeof l=="object"&&l&&"steps"in l&&(this.globalDefaultMaxSteps=l.steps,(c=this.notifyComponentUpdate)==null||c.call(this))}),a=t.on(Dr.toolsChanged,l=>{var c;if(l&&typeof l.tools=="object"){const u=Object.keys(l.tools).length;this.allToolsCount!==u&&(this.allToolsCount=u,this.updateVisibility(),(c=this.notifyComponentUpdate)==null||c.call(this))}});this.eventUnsubscribers.push(n,r,i,s,a)}loadInitialState(){this.isStreaming=Ln.getState().status==="streaming",this.selectedItemId=$n.getState().selectedItemId,this.selectedItemType=$n.getState().selectedItemType,this.allToolsCount=Object.keys(Qo.getState().tools).length,this.globalDefaultMaxSteps=mr.getState().toolMaxSteps}updateVisibility(){var a,o;const{getSelectedModel:t}=Ir.getState(),n=t(),r=this.allToolsCount>0,i=((o=(a=n==null?void 0:n.metadata)==null?void 0:a.supported_parameters)==null?void 0:o.includes("tools"))??!1,s=r&&i;this.isVisible!==s&&(this.isVisible=s)}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,triggerRenderer:()=>lt.createElement(Ont,{module:this}),getMetadata:()=>{if(this.transientEnabledTools.size>0||this.transientMaxStepsOverride!==null)return{enabledTools:Array.from(this.transientEnabledTools),...this.transientMaxStepsOverride!==null&&{maxSteps:this.transientMaxStepsOverride}}},clearOnSubmit:()=>{var r;let n=!1;this.transientEnabledTools.size>0&&(this.transientEnabledTools=new Set,n=!0),this.transientMaxStepsOverride!==null&&(this.transientMaxStepsOverride=null,n=!0),n&&((r=this.notifyComponentUpdate)==null||r.call(this))}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}var DV=1,Fnt=.9,Lnt=.8,Bnt=.17,ZM=.1,XM=.999,$nt=.9999,znt=.99,Unt=/[\\\/_+.#"@\[\(\{&]/,qnt=/[\\\/_+.#"@\[\(\{&]/g,Vnt=/[\s-]/,yue=/[\s-]/g;function Wj(e,t,n,r,i,s,a){if(s===t.length)return i===e.length?DV:znt;var o=`${i},${s}`;if(a[o]!==void 0)return a[o];for(var l=r.charAt(s),c=n.indexOf(l,i),u=0,d,h,m,y;c>=0;)d=Wj(e,t,n,r,c+1,s+1,a),d>u&&(c===i?d*=DV:Unt.test(e.charAt(c-1))?(d*=Lnt,m=e.slice(i,c-1).match(qnt),m&&i>0&&(d*=Math.pow(XM,m.length))):Vnt.test(e.charAt(c-1))?(d*=Fnt,y=e.slice(i,c-1).match(yue),y&&i>0&&(d*=Math.pow(XM,y.length))):(d*=Bnt,i>0&&(d*=Math.pow(XM,c-i))),e.charAt(c)!==t.charAt(s)&&(d*=$nt)),(d<ZM&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(h=Wj(e,t,n,r,c+1,s+2,a),h*ZM>d&&(d=h*ZM)),d>u&&(u=d),c=n.indexOf(l,c+1);return a[o]=u,u}function FV(e){return e.toLowerCase().replace(yue," ")}function Hnt(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Wj(e,t,FV(e),FV(t),0,0,{})}var pv='[cmdk-group=""]',JM='[cmdk-group-items=""]',Wnt='[cmdk-group-heading=""]',bue='[cmdk-item=""]',LV=`${bue}:not([aria-disabled="true"])`,Gj="cmdk-item-select",Ig="data-value",Gnt=(e,t,n)=>Hnt(e,t,n),vue=T.createContext(void 0),k1=()=>T.useContext(vue),xue=T.createContext(void 0),y5=()=>T.useContext(xue),wue=T.createContext(void 0),_ue=T.forwardRef((e,t)=>{let n=Ng(()=>{var ee,se;return{search:"",value:(se=(ee=e.value)!=null?ee:e.defaultValue)!=null?se:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Ng(()=>new Set),i=Ng(()=>new Map),s=Ng(()=>new Map),a=Ng(()=>new Set),o=Sue(e),{label:l,children:c,value:u,onValueChange:d,filter:h,shouldFilter:m,loop:y,disablePointerSelection:b=!1,vimBindings:v=!0,...x}=e,_=Ys(),S=Ys(),C=Ys(),E=T.useRef(null),A=irt();Qp(()=>{if(u!==void 0){let ee=u.trim();n.current.value=ee,R.emit()}},[u]),Qp(()=>{A(6,V)},[]);let R=T.useMemo(()=>({subscribe:ee=>(a.current.add(ee),()=>a.current.delete(ee)),snapshot:()=>n.current,setState:(ee,se,he)=>{var ce,Me,je,Ne;if(!Object.is(n.current[ee],se)){if(n.current[ee]=se,ee==="search")O(),P(),A(1,L);else if(ee==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ce=document.getElementById(C);Ce?Ce.focus():(ce=document.getElementById(_))==null||ce.focus()}if(A(7,()=>{var Ce;n.current.selectedItemId=(Ce=F())==null?void 0:Ce.id,R.emit()}),he||A(5,V),((Me=o.current)==null?void 0:Me.value)!==void 0){let Ce=se??"";(Ne=(je=o.current).onValueChange)==null||Ne.call(je,Ce);return}}R.emit()}},emit:()=>{a.current.forEach(ee=>ee())}}),[]),N=T.useMemo(()=>({value:(ee,se,he)=>{var ce;se!==((ce=s.current.get(ee))==null?void 0:ce.value)&&(s.current.set(ee,{value:se,keywords:he}),n.current.filtered.items.set(ee,M(se,he)),A(2,()=>{P(),R.emit()}))},item:(ee,se)=>(r.current.add(ee),se&&(i.current.has(se)?i.current.get(se).add(ee):i.current.set(se,new Set([ee]))),A(3,()=>{O(),P(),n.current.value||L(),R.emit()}),()=>{s.current.delete(ee),r.current.delete(ee),n.current.filtered.items.delete(ee);let he=F();A(4,()=>{O(),(he==null?void 0:he.getAttribute("id"))===ee&&L(),R.emit()})}),group:ee=>(i.current.has(ee)||i.current.set(ee,new Set),()=>{s.current.delete(ee),i.current.delete(ee)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:_,inputId:C,labelId:S,listInnerRef:E}),[]);function M(ee,se){var he,ce;let Me=(ce=(he=o.current)==null?void 0:he.filter)!=null?ce:Gnt;return ee?Me(ee,n.current.search,se):0}function P(){if(!n.current.search||o.current.shouldFilter===!1)return;let ee=n.current.filtered.items,se=[];n.current.filtered.groups.forEach(ce=>{let Me=i.current.get(ce),je=0;Me.forEach(Ne=>{let Ce=ee.get(Ne);je=Math.max(Ce,je)}),se.push([ce,je])});let he=E.current;J().sort((ce,Me)=>{var je,Ne;let Ce=ce.getAttribute("id"),Ue=Me.getAttribute("id");return((je=ee.get(Ue))!=null?je:0)-((Ne=ee.get(Ce))!=null?Ne:0)}).forEach(ce=>{let Me=ce.closest(JM);Me?Me.appendChild(ce.parentElement===Me?ce:ce.closest(`${JM} > *`)):he.appendChild(ce.parentElement===he?ce:ce.closest(`${JM} > *`))}),se.sort((ce,Me)=>Me[1]-ce[1]).forEach(ce=>{var Me;let je=(Me=E.current)==null?void 0:Me.querySelector(`${pv}[${Ig}="${encodeURIComponent(ce[0])}"]`);je==null||je.parentElement.appendChild(je)})}function L(){let ee=J().find(he=>he.getAttribute("aria-disabled")!=="true"),se=ee==null?void 0:ee.getAttribute(Ig);R.setState("value",se||void 0)}function O(){var ee,se,he,ce;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Me=0;for(let je of r.current){let Ne=(se=(ee=s.current.get(je))==null?void 0:ee.value)!=null?se:"",Ce=(ce=(he=s.current.get(je))==null?void 0:he.keywords)!=null?ce:[],Ue=M(Ne,Ce);n.current.filtered.items.set(je,Ue),Ue>0&&Me++}for(let[je,Ne]of i.current)for(let Ce of Ne)if(n.current.filtered.items.get(Ce)>0){n.current.filtered.groups.add(je);break}n.current.filtered.count=Me}function V(){var ee,se,he;let ce=F();ce&&(((ee=ce.parentElement)==null?void 0:ee.firstChild)===ce&&((he=(se=ce.closest(pv))==null?void 0:se.querySelector(Wnt))==null||he.scrollIntoView({block:"nearest"})),ce.scrollIntoView({block:"nearest"}))}function F(){var ee;return(ee=E.current)==null?void 0:ee.querySelector(`${bue}[aria-selected="true"]`)}function J(){var ee;return Array.from(((ee=E.current)==null?void 0:ee.querySelectorAll(LV))||[])}function U(ee){let se=J()[ee];se&&R.setState("value",se.getAttribute(Ig))}function G(ee){var se;let he=F(),ce=J(),Me=ce.findIndex(Ne=>Ne===he),je=ce[Me+ee];(se=o.current)!=null&&se.loop&&(je=Me+ee<0?ce[ce.length-1]:Me+ee===ce.length?ce[0]:ce[Me+ee]),je&&R.setState("value",je.getAttribute(Ig))}function $(ee){let se=F(),he=se==null?void 0:se.closest(pv),ce;for(;he&&!ce;)he=ee>0?nrt(he,pv):rrt(he,pv),ce=he==null?void 0:he.querySelector(LV);ce?R.setState("value",ce.getAttribute(Ig)):G(ee)}let ne=()=>U(J().length-1),H=ee=>{ee.preventDefault(),ee.metaKey?ne():ee.altKey?$(1):G(1)},te=ee=>{ee.preventDefault(),ee.metaKey?U(0):ee.altKey?$(-1):G(-1)};return T.createElement(nr.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:ee=>{var se;(se=x.onKeyDown)==null||se.call(x,ee);let he=ee.nativeEvent.isComposing||ee.keyCode===229;if(!(ee.defaultPrevented||he))switch(ee.key){case"n":case"j":{v&&ee.ctrlKey&&H(ee);break}case"ArrowDown":{H(ee);break}case"p":case"k":{v&&ee.ctrlKey&&te(ee);break}case"ArrowUp":{te(ee);break}case"Home":{ee.preventDefault(),U(0);break}case"End":{ee.preventDefault(),ne();break}case"Enter":{ee.preventDefault();let ce=F();if(ce){let Me=new Event(Gj);ce.dispatchEvent(Me)}}}}},T.createElement("label",{"cmdk-label":"",htmlFor:N.inputId,id:N.labelId,style:art},l),DT(e,ee=>T.createElement(xue.Provider,{value:R},T.createElement(vue.Provider,{value:N},ee))))}),Knt=T.forwardRef((e,t)=>{var n,r;let i=Ys(),s=T.useRef(null),a=T.useContext(wue),o=k1(),l=Sue(e),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:a==null?void 0:a.forceMount;Qp(()=>{if(!c)return o.item(i,a==null?void 0:a.id)},[c]);let u=Cue(i,s,[e.value,e.children,s],e.keywords),d=y5(),h=dh(A=>A.value&&A.value===u.current),m=dh(A=>c||o.filter()===!1?!0:A.search?A.filtered.items.get(i)>0:!0);T.useEffect(()=>{let A=s.current;if(!(!A||e.disabled))return A.addEventListener(Gj,y),()=>A.removeEventListener(Gj,y)},[m,e.onSelect,e.disabled]);function y(){var A,R;b(),(R=(A=l.current).onSelect)==null||R.call(A,u.current)}function b(){d.setState("value",u.current,!0)}if(!m)return null;let{disabled:v,value:x,onSelect:_,forceMount:S,keywords:C,...E}=e;return T.createElement(nr.div,{ref:Ko(s,t),...E,id:i,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!h,"data-disabled":!!v,"data-selected":!!h,onPointerMove:v||o.getDisablePointerSelection()?void 0:b,onClick:v?void 0:y},e.children)}),Ynt=T.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...s}=e,a=Ys(),o=T.useRef(null),l=T.useRef(null),c=Ys(),u=k1(),d=dh(m=>i||u.filter()===!1?!0:m.search?m.filtered.groups.has(a):!0);Qp(()=>u.group(a),[]),Cue(a,o,[e.value,e.heading,l]);let h=T.useMemo(()=>({id:a,forceMount:i}),[i]);return T.createElement(nr.div,{ref:Ko(o,t),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&T.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),DT(e,m=>T.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},T.createElement(wue.Provider,{value:h},m))))}),Znt=T.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=T.useRef(null),s=dh(a=>!a.search);return!n&&!s?null:T.createElement(nr.div,{ref:Ko(i,t),...r,"cmdk-separator":"",role:"separator"})}),Xnt=T.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,s=y5(),a=dh(c=>c.search),o=dh(c=>c.selectedItemId),l=k1();return T.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),T.createElement(nr.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:i?e.value:a,onChange:c=>{i||s.setState("search",c.target.value),n==null||n(c.target.value)}})}),Jnt=T.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...i}=e,s=T.useRef(null),a=T.useRef(null),o=dh(c=>c.selectedItemId),l=k1();return T.useEffect(()=>{if(a.current&&s.current){let c=a.current,u=s.current,d,h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let m=c.offsetHeight;u.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(d),h.unobserve(c)}}},[]),T.createElement(nr.div,{ref:Ko(s,t),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},DT(e,c=>T.createElement("div",{ref:Ko(a,l.listInnerRef),"cmdk-list-sizer":""},c)))}),Qnt=T.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:s,container:a,...o}=e;return T.createElement(ble,{open:n,onOpenChange:r},T.createElement(vle,{container:a},T.createElement(xle,{"cmdk-overlay":"",className:i}),T.createElement(wle,{"aria-label":e.label,"cmdk-dialog":"",className:s},T.createElement(_ue,{ref:t,...o}))))}),ert=T.forwardRef((e,t)=>dh(n=>n.filtered.count===0)?T.createElement(nr.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),trt=T.forwardRef((e,t)=>{let{progress:n,children:r,label:i="Loading...",...s}=e;return T.createElement(nr.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},DT(e,a=>T.createElement("div",{"aria-hidden":!0},a)))}),Fy=Object.assign(_ue,{List:Jnt,Item:Knt,Input:Xnt,Group:Ynt,Separator:Znt,Dialog:Qnt,Empty:ert,Loading:trt});function nrt(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function rrt(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function Sue(e){let t=T.useRef(e);return Qp(()=>{t.current=e}),t}var Qp=typeof window>"u"?T.useEffect:T.useLayoutEffect;function Ng(e){let t=T.useRef();return t.current===void 0&&(t.current=e()),t}function dh(e){let t=y5(),n=()=>e(t.snapshot());return T.useSyncExternalStore(t.subscribe,n,n)}function Cue(e,t,n,r=[]){let i=T.useRef(),s=k1();return Qp(()=>{var a;let o=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():i.current}})(),l=r.map(c=>c.trim());s.value(e,o,l),(a=t.current)==null||a.setAttribute(Ig,o),i.current=o}),i}var irt=()=>{let[e,t]=T.useState(),n=Ng(()=>new Map);return Qp(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,i)=>{n.current.set(r,i),t({})}};function srt(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function DT({asChild:e,children:t},n){return e&&T.isValidElement(t)?T.cloneElement(srt(t),{ref:t.ref},n(t.props.children)):n(t)}var art={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function kue({className:e,...t}){return p.jsx(Fy,{"data-slot":"command",className:ft("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function Eue({className:e,...t}){return p.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[p.jsx(Aa,{className:"size-4 shrink-0 opacity-50"}),p.jsx(Fy.Input,{"data-slot":"command-input",className:ft("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function Tue({className:e,...t}){return p.jsx(Fy.List,{"data-slot":"command-list",className:ft("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function Aue({...e}){return p.jsx(Fy.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function Rue({className:e,...t}){return p.jsx(Fy.Group,{"data-slot":"command-group",className:ft("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function Iue({className:e,...t}){return p.jsx(Fy.Item,{"data-slot":"command-item",className:ft("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}const b5=({models:e,value:t,onChange:n,className:r,disabled:i,isLoading:s})=>{const[a,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1,imageGeneration:!1}),h=T.useMemo(()=>{let _=e;if(l.trim()){const C=l.toLowerCase();_=e.filter(E=>E.name.toLowerCase().includes(C)||E.providerName.toLowerCase().includes(C)||E.id.toLowerCase().includes(C))}const S=Object.entries(u).filter(([,C])=>C).map(([C])=>C);return S.length===0?_:_.filter(C=>{var N,M,P;const E=new Set(((N=C.metadataSummary)==null?void 0:N.supported_parameters)??[]),A=new Set(((M=C.metadataSummary)==null?void 0:M.input_modalities)??[]),R=new Set(((P=C.metadataSummary)==null?void 0:P.output_modalities)??[]);return S.every(L=>{switch(L){case"reasoning":return E.has("reasoning");case"webSearch":return E.has("web_search")||E.has("web_search_options");case"tools":return E.has("tools");case"multimodal":return Array.from(A).some(O=>O!=="text");case"imageGeneration":return R.has("image");default:return!0}})})},[e,l,u]),m=T.useMemo(()=>e.find(_=>_.id===t),[e,t]),y=T.useCallback(_=>{const S=_===t?null:_;n==null||n(S),o(!1),c("")},[t,n]),b=_=>{d(S=>({...S,[_]:!S[_]}))};if(s)return p.jsx($r,{className:ft("h-9 w-[250px]",r)});const x=Object.values(u).filter(Boolean).length;return p.jsxs(Ll,{open:a,onOpenChange:o,children:[p.jsx(Bl,{asChild:!0,children:p.jsxs(Tt,{variant:"outline",role:"combobox","aria-expanded":a,disabled:i||e.length===0,className:ft("w-auto justify-between h-9 text-sm font-normal relative",r),children:[p.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:m?`${m.name} (${m.providerName})`:"Select Model..."}),p.jsx(Mk,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"}),x>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:x})]})}),p.jsx($l,{className:"w-[--radix-popover-trigger-width] p-0",style:{maxHeight:"min(40vh, 400px)",overflow:"hidden"},children:p.jsxs(kue,{shouldFilter:!1,children:[p.jsxs("div",{className:"flex items-center border-b px-3",children:[p.jsx(Aa,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),p.jsx(Eue,{placeholder:"Search model...",value:l,onValueChange:c,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0 focus-visible:ring-offset-0"}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto pl-2",children:[p.jsx(Tt,{variant:u.reasoning?"secondary":"ghost",size:"sm",className:ft("h-7 w-7 p-0",u.reasoning&&"text-primary"),onClick:()=>b("reasoning"),title:"Filter: Reasoning","aria-label":"Filter by reasoning capability",children:p.jsx(LL,{className:"h-4 w-4"})}),p.jsx(Tt,{variant:u.webSearch?"secondary":"ghost",size:"sm",className:ft("h-7 w-7 p-0",u.webSearch&&"text-primary"),onClick:()=>b("webSearch"),title:"Filter: Web Search","aria-label":"Filter by web search capability",children:p.jsx($L,{className:"h-4 w-4"})}),p.jsx(Tt,{variant:u.tools?"secondary":"ghost",size:"sm",className:ft("h-7 w-7 p-0",u.tools&&"text-primary"),onClick:()=>b("tools"),title:"Filter: Tools","aria-label":"Filter by tool usage capability",children:p.jsx(Pp,{className:"h-4 w-4"})}),p.jsx(Tt,{variant:u.multimodal?"secondary":"ghost",size:"sm",className:ft("h-7 w-7 p-0",u.multimodal&&"text-primary"),onClick:()=>b("multimodal"),title:"Filter: Multimodal","aria-label":"Filter by multimodal capability",children:p.jsx(Mp,{className:"h-4 w-4"})}),p.jsx(Tt,{variant:u.imageGeneration?"secondary":"ghost",size:"sm",className:ft("h-7 w-7 p-0",u.imageGeneration&&"text-primary"),onClick:()=>b("imageGeneration"),title:"Filter: Image Generation","aria-label":"Filter by image generation capability",children:p.jsx(b2,{className:"h-4 w-4"})})]})]}),p.jsxs(Tue,{className:"max-h-[calc(min(40vh,400px)-70px)] overflow-y-auto",children:[p.jsx(Aue,{children:x>0?"No models match all active filters.":e.length===0?"No models available.":"No model found."}),p.jsx(Rue,{children:h.map(_=>{var S,C,E,A,R,N,M,P,L,O,V,F;return p.jsx(Iue,{value:_.id,onSelect:y,className:"flex items-center",children:p.jsxs("div",{className:"flex-1 truncate flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-medium",children:_.name}),p.jsx("div",{className:"text-xs text-muted-foreground",children:_.providerName})]}),p.jsxs("div",{className:"flex gap-1 ml-2",children:[((C=(S=_.metadataSummary)==null?void 0:S.supported_parameters)==null?void 0:C.includes("reasoning"))&&p.jsx(LL,{className:"h-3.5 w-3.5 text-purple-500"}),(((A=(E=_.metadataSummary)==null?void 0:E.supported_parameters)==null?void 0:A.includes("web_search"))||((N=(R=_.metadataSummary)==null?void 0:R.supported_parameters)==null?void 0:N.includes("web_search_options")))&&p.jsx($L,{className:"h-3.5 w-3.5 text-blue-500"}),((P=(M=_.metadataSummary)==null?void 0:M.supported_parameters)==null?void 0:P.includes("tools"))&&p.jsx(Pp,{className:"h-3.5 w-3.5 text-orange-500"}),((O=(L=_.metadataSummary)==null?void 0:L.input_modalities)==null?void 0:O.some(J=>J!=="text"))&&p.jsx(Mp,{className:"h-3.5 w-3.5 text-green-500"}),((F=(V=_.metadataSummary)==null?void 0:V.output_modalities)==null?void 0:F.includes("image"))&&p.jsx(b2,{className:"h-3.5 w-3.5 text-pink-500"})]})]})},_.id)})})]})]})})]})},QM=Ze({systemPrompt:$e().nullable(),modelId:$e().nullable()}),ort=({initialSystemPrompt:e,initialModelId:t,onSave:n,effectiveSystemPrompt:r,effectiveModelId:i,isParentSaving:s=!1})=>{var u;const{getAvailableModelListItems:a}=Ir(Tn(d=>({getAvailableModelListItems:d.getAvailableModelListItems}))),o=a(),l=((u=o.find(d=>d.id===i))==null?void 0:u.name)||i,c=ea({defaultValues:{systemPrompt:e??null,modelId:t??null},validators:{onChangeAsync:QM,onChangeAsyncDebounceMs:500},onSubmit:async({value:d})=>{await n({systemPrompt:d.systemPrompt,modelId:d.modelId})}});return T.useEffect(()=>{c.reset({systemPrompt:e??null,modelId:t??null})},[e,t,c]),p.jsxs("form",{onSubmit:d=>{d.preventDefault(),d.stopPropagation(),c.handleSubmit()},className:"space-y-6",children:[p.jsx(c.Field,{name:"systemPrompt",validators:{onChange:QM.shape.systemPrompt},children:d=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:`${d.name}-textarea`,children:"System Prompt (Overrides Parent/Global)"}),p.jsx(Fd,{id:`${d.name}-textarea`,placeholder:`Inherited: ${(r==null?void 0:r.substring(0,100))||"Default"}${r&&r.length>100?"...":""}`,value:d.state.value??"",onChange:h=>d.handleChange(h.target.value),onBlur:d.handleBlur,rows:6,disabled:c.state.isSubmitting||s,className:"mt-1"}),p.jsx(Ss,{field:d}),p.jsx(Tt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>c.setFieldValue("systemPrompt",null),disabled:c.state.isSubmitting||s||d.state.value===null,type:"button",children:"Use Inherited/Default"})]})}),p.jsx(c.Field,{name:"modelId",validators:{onChange:QM.shape.modelId},children:d=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{children:"Default Model (Overrides Parent/Global)"}),p.jsx(b5,{models:o,value:d.state.value,onChange:h=>{d.handleChange(h),d.handleBlur()},disabled:c.state.isSubmitting||s,className:"w-full mt-1"}),p.jsx(Ss,{field:d}),p.jsxs(Tt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>c.setFieldValue("modelId",null),disabled:c.state.isSubmitting||s||d.state.value===null,type:"button",children:["Use Inherited/Default (",l||"Global Default",")"]})]})}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(c.Subscribe,{selector:d=>[d.canSubmit,d.isSubmitting,d.isValidating,d.isValid],children:([d,h,m,y])=>p.jsxs(Tt,{type:"submit",size:"sm",disabled:s||!d||h||m||!y,children:[(h||m)&&p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(ph,{className:"h-4 w-4 mr-1"}),h||m?"Saving...":"Save Prompt Settings"]})})})]})};function kg({field:e}){return e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:"text-xs text-destructive pt-1 block",children:e.state.meta.errors.join(", ")}):null}const lrt=({form:e,isSaving:t,effectiveTemperature:n,effectiveMaxTokens:r,effectiveTopP:i,effectiveTopK:s,effectivePresencePenalty:a,effectiveFrequencyPenalty:o})=>p.jsxs("div",{className:"space-y-4",children:[p.jsx(e.Field,{name:"temperature",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(en,{htmlFor:l.name,className:"text-xs",children:["Temperature (",(l.state.value??n??.7).toFixed(2),")"]}),p.jsx(Rv,{id:l.name,min:0,max:1,step:.01,value:[l.state.value??n??.7],onValueChange:c=>l.handleChange(c[0]),onBlur:l.handleBlur,disabled:t}),p.jsxs(Tt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:["Use Inherited/Default (",(n==null?void 0:n.toFixed(2))??"N/A",")"]}),p.jsx(kg,{field:l})]})}),p.jsx(e.Field,{name:"topP",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(en,{htmlFor:l.name,className:"text-xs",children:["Top P (",(l.state.value??i??1).toFixed(2),")"]}),p.jsx(Rv,{id:l.name,min:0,max:1,step:.01,value:[l.state.value??i??1],onValueChange:c=>l.handleChange(c[0]),onBlur:l.handleBlur,disabled:t}),p.jsxs(Tt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:["Use Inherited/Default (",(i==null?void 0:i.toFixed(2))??"N/A",")"]}),p.jsx(kg,{field:l})]})}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsx(e.Field,{name:"maxTokens",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:l.name,className:"text-xs",children:"Max Tokens"}),p.jsx(pr,{id:l.name,type:"number",placeholder:`Inherited: ${r??"Default"}`,value:l.state.value??"",onChange:c=>l.handleChange(c.target.value===""?null:parseInt(c.target.value,10)),onBlur:l.handleBlur,min:"1",className:"h-8 text-xs",disabled:t}),p.jsx(Tt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:"Use Inherited/Default"}),p.jsx(kg,{field:l})]})}),p.jsx(e.Field,{name:"topK",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:l.name,className:"text-xs",children:"Top K"}),p.jsx(pr,{id:l.name,type:"number",placeholder:`Inherited: ${s??"Default"}`,value:l.state.value??"",onChange:c=>l.handleChange(c.target.value===""?null:parseInt(c.target.value,10)),onBlur:l.handleBlur,min:"1",className:"h-8 text-xs",disabled:t}),p.jsx(Tt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:"Use Inherited/Default"}),p.jsx(kg,{field:l})]})})]}),p.jsx(e.Field,{name:"presencePenalty",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(en,{htmlFor:l.name,className:"text-xs",children:["Presence Penalty (",(l.state.value??a??0).toFixed(2),")"]}),p.jsx(Rv,{id:l.name,min:-2,max:2,step:.01,value:[l.state.value??a??0],onValueChange:c=>l.handleChange(c[0]),onBlur:l.handleBlur,disabled:t}),p.jsxs(Tt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:["Use Inherited/Default (",(a==null?void 0:a.toFixed(2))??"N/A",")"]}),p.jsx(kg,{field:l})]})}),p.jsx(e.Field,{name:"frequencyPenalty",children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(en,{htmlFor:l.name,className:"text-xs",children:["Frequency Penalty (",(l.state.value??o??0).toFixed(2),")"]}),p.jsx(Rv,{id:l.name,min:-2,max:2,step:.01,value:[l.state.value??o??0],onValueChange:c=>l.handleChange(c[0]),onBlur:l.handleBlur,disabled:t}),p.jsxs(Tt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>l.handleChange(null),disabled:t||l.state.value===null,children:["Use Inherited/Default (",(o==null?void 0:o.toFixed(2))??"N/A",")"]}),p.jsx(kg,{field:l})]})})]}),BV=Ze({syncRepoId:$e().nullable()}),crt=({initialSyncRepoId:e,onSave:t,effectiveSyncRepoId:n,syncRepos:r,isParentSaving:i=!1})=>{var o;const s=((o=r.find(l=>l.id===n))==null?void 0:o.name)??"None",a=ea({defaultValues:{syncRepoId:e??null},validators:{onChangeAsync:BV,onChangeAsyncDebounceMs:500},onSubmit:async({value:l})=>{await t(l)}});return T.useEffect(()=>{a.reset({syncRepoId:e??null})},[e,a]),p.jsxs("form",{onSubmit:l=>{l.preventDefault(),l.stopPropagation(),a.handleSubmit()},className:"space-y-6",children:[p.jsx(a.Field,{name:"syncRepoId",validators:{onChange:BV.shape.syncRepoId},children:l=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:l.name,children:"Sync Repository (Overrides Parent/Global)"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),p.jsxs(g1,{value:l.state.value??"none",onValueChange:c=>{l.handleChange(c==="none"?null:c),l.handleBlur()},disabled:a.state.isSubmitting||i||r.length===0,children:[p.jsx(b1,{id:l.name,children:p.jsx(y1,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${s}`})}),p.jsxs(v1,{children:[p.jsx(ch,{value:"none",children:p.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",s,")"]})}),r.map(c=>p.jsx(ch,{value:c.id,children:c.name},c.id))]})]}),p.jsx(Ss,{field:l}),p.jsx(Tt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>a.setFieldValue("syncRepoId",null),disabled:a.state.isSubmitting||i||l.state.value===null,type:"button",children:"Use Inherited/Default"})]})}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(a.Subscribe,{selector:l=>[l.canSubmit,l.isSubmitting,l.isValidating,l.isValid],children:([l,c,u,d])=>p.jsxs(Tt,{type:"submit",size:"sm",disabled:i||!l||c||u||!d||r.length===0,children:[(c||u)&&p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(ph,{className:"h-4 w-4 mr-1"}),c||u?"Saving...":"Save Sync Settings"]})})})]})},urt=({projectId:e})=>{const t=T.useMemo(()=>[{value:"manage",label:"Manage Files",content:p.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?p.jsx(g5,{}):p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(en,{children:"Project Filesystem Info"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),p.jsxs("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2 break-all",children:[" ",p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",p.jsx("code",{className:"text-xs",children:e||"N/A"})]})]})]}),p.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[p.jsx(en,{className:"text-destructive",children:"Danger Zone"}),p.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."})]})]})}],[e]);return p.jsx(Ld,{tabs:t,defaultValue:"manage",className:"h-full flex flex-col",listClassName:ft("bg-muted/50 rounded-md","flex-wrap justify-start h-auto","p-1 gap-1"),contentContainerClassName:"mt-3 flex-grow flex flex-col overflow-y-auto"})},drt=({allRules:e,selectedRuleIds:t,onSelectionChange:n,disabled:r=!1})=>{const[i,s]=T.useState(""),a=T.useMemo(()=>{const o=i.toLowerCase();return o?e.filter(l=>l.name.toLowerCase().includes(o)||l.content.toLowerCase().includes(o)||l.type.toLowerCase().includes(o)):e},[e,i]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Aa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(pr,{type:"search",placeholder:"Filter rules...",value:i,onChange:o=>s(o.target.value),className:"pl-8 h-9",disabled:r})]}),p.jsx(Na,{className:"h-48 border rounded-md p-2 bg-background/50",children:a.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:e.length===0?"No rules defined globally.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:a.map(o=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(mu,{id:`project-default-rule-${o.id}`,checked:t.has(o.id),onCheckedChange:l=>n(o.id,!!l),className:"mt-0.5",disabled:r}),p.jsxs(en,{htmlFor:`project-default-rule-${o.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:o.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",o.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",o.content]})]})]})},o.id))})})]})},frt=({defaultRuleIds:e,setDefaultRuleIds:t,isSaving:n,allRules:r})=>{const i=T.useMemo(()=>new Set(e??[]),[e]),s=T.useCallback((a,o)=>{const l=new Set(i);o?l.add(a):l.delete(a);const c=Array.from(l);t(c.length>0?c:null)},[i,t]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx(en,{children:"Default Rules for this Project"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select rules that will be automatically applied to new conversations within this project. These can be overridden per-conversation or per-turn."}),p.jsx(drt,{allRules:r,selectedRuleIds:i,onSelectionChange:s,disabled:n})]})},hrt=({allTags:e,selectedTagIds:t,onSelectionChange:n,disabled:r=!1,getRulesForTag:i})=>{const[s,a]=T.useState(""),o=T.useMemo(()=>{const l=s.toLowerCase();return l?e.filter(c=>{var u;return c.name.toLowerCase().includes(l)||((u=c.description)==null?void 0:u.toLowerCase().includes(l))}):e},[e,s]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Aa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(pr,{type:"search",placeholder:"Filter tags...",value:s,onChange:l=>a(l.target.value),className:"pl-8 h-9",disabled:r})]}),p.jsx(Na,{className:"h-48 border rounded-md p-2 bg-background/50",children:o.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:e.length===0?"No tags defined globally.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:o.map(l=>{const c=i(l.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(mu,{id:`project-default-tag-${l.id}`,checked:t.has(l.id),onCheckedChange:u=>n(l.id,!!u),className:"mt-0.5",disabled:r}),p.jsxs(en,{htmlFor:`project-default-tag-${l.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:l.name}),l.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:l.description}),c.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",c.map(u=>u.name).join(", ")]})]})]})},l.id)})})})]})},prt=({defaultTagIds:e,setDefaultTagIds:t,isSaving:n,allTags:r,getRulesForTag:i})=>{const s=T.useMemo(()=>new Set(e??[]),[e]),a=T.useCallback((o,l)=>{const c=new Set(s);l?c.add(o):c.delete(o);const u=Array.from(c);t(u.length>0?u:null)},[s,t]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx(en,{children:"Default Tags for this Project"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select tags whose rules will be automatically applied to new conversations within this project. These can be overridden per-conversation or per-turn."}),p.jsx(hrt,{allTags:r,selectedTagIds:s,onSelectionChange:a,disabled:n,getRulesForTag:i})]})},mrt=Ze({temperature:At().min(0).max(1),topP:At().min(0).max(1),maxTokens:At().min(1).nullable(),topK:At().min(1).nullable(),presencePenalty:At().min(-2).max(2),frequencyPenalty:At().min(-2).max(2)}),grt=({isOpen:e,onClose:t,projectId:n,module:r})=>{const{getProjectById:i,updateProject:s}=ko(Tn(U=>({getProjectById:U.getProjectById,updateProject:U.updateProject}))),a=ko(U=>U.getEffectiveProjectSettings),o=$n(U=>U.syncRepos),l=mr(Tn(U=>({globalSystemPrompt:U.globalSystemPrompt,temperature:U.temperature,maxTokens:U.maxTokens,topP:U.topP,topK:U.topK,presencePenalty:U.presencePenalty,frequencyPenalty:U.frequencyPenalty}))),c=Ir(U=>U.selectedModelId),u=Hi(U=>U.setVfsKey),[d,h]=T.useState(null),[m,y]=T.useState(null),[b,v]=T.useState(null),[x,_]=T.useState(null),[S,C]=T.useState(null),[E,A]=T.useState(!1),[R,N]=T.useState("prompt"),{project:M,effectiveSettings:P}=T.useMemo(()=>{const U=n?i(n):null,G=n?a(n):null;return{project:U,effectiveSettings:G}},[n,i,a]),L=ea({defaultValues:{temperature:(M==null?void 0:M.temperature)??.7,topP:(M==null?void 0:M.topP)??1,maxTokens:(M==null?void 0:M.maxTokens)??null,topK:(M==null?void 0:M.topK)??null,presencePenalty:(M==null?void 0:M.presencePenalty)??0,frequencyPenalty:(M==null?void 0:M.presencePenalty)??0},validators:{onChangeAsync:mrt,onChangeAsyncDebounceMs:500}}),O=T.useCallback(U=>{var $;if(!U)return null;const G=i(U);return G?(($=G.metadata)==null?void 0:$.syncRepoId)!==void 0?G.metadata.syncRepoId:O(G.parentId):null},[i]),V=n?O(n):null;T.useEffect(()=>{var U;e&&n&&M&&P?(u(n),h(M.systemPrompt??null),y(M.modelId??null),v(((U=M.metadata)==null?void 0:U.syncRepoId)??null),_(M.defaultTagIds??null),C(M.defaultRuleIds??null),L.reset({temperature:M.temperature??.7,topP:M.topP??1,maxTokens:M.maxTokens??null,topK:M.topK??null,presencePenalty:M.presencePenalty??0,frequencyPenalty:M.frequencyPenalty??0}),N("prompt")):e||(u(null),h(null),y(null),v(null),_(null),C(null),L.reset({temperature:.7,topP:1,maxTokens:null,topK:null,presencePenalty:0,frequencyPenalty:0}))},[e,n,M,P,u,L]);const F=async()=>{if(!(!n||!M)){A(!0);try{const U=M.parentId?a(M.parentId):{systemPrompt:l.globalSystemPrompt,modelId:c,temperature:l.temperature,maxTokens:l.maxTokens,topP:l.topP,topK:l.topK,presencePenalty:l.presencePenalty,frequencyPenalty:l.frequencyPenalty,defaultTagIds:null,defaultRuleIds:null},G=M.parentId?O(M.parentId):null,$={},ne={...M.metadata??{}},H=L.state.values;d!==U.systemPrompt?$.systemPrompt=d:$.systemPrompt=void 0,m!==U.modelId?$.modelId=m:$.modelId=void 0,H.temperature!==U.temperature?$.temperature=H.temperature:$.temperature=void 0,H.maxTokens!==U.maxTokens?$.maxTokens=H.maxTokens:$.maxTokens=void 0,H.topP!==U.topP?$.topP=H.topP:$.topP=void 0,H.topK!==U.topK?$.topK=H.topK:$.topK=void 0,H.presencePenalty!==U.presencePenalty?$.presencePenalty=H.presencePenalty:$.presencePenalty=void 0,H.frequencyPenalty!==U.frequencyPenalty?$.frequencyPenalty=H.frequencyPenalty:$.frequencyPenalty=void 0,b!==G?ne.syncRepoId=b:delete ne.syncRepoId,JSON.stringify(x)!==JSON.stringify(U.defaultTagIds)?$.defaultTagIds=x:$.defaultTagIds=void 0,JSON.stringify(S)!==JSON.stringify(U.defaultRuleIds)?$.defaultRuleIds=S:$.defaultRuleIds=void 0,$.metadata=ne,await s(n,$),De.success(`Project "${M.name}" settings updated.`),t()}catch(U){De.error("Failed to save project settings."),console.error("Failed to save project settings:",U)}finally{A(!1)}}},J=T.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:p.jsx(ort,{initialSystemPrompt:d,initialModelId:m,onSave:({systemPrompt:U,modelId:G})=>{h(U),y(G)},effectiveSystemPrompt:(P==null?void 0:P.systemPrompt)??l.globalSystemPrompt,effectiveModelId:(P==null?void 0:P.modelId)??c,isParentSaving:E})},{value:"params",label:"Parameters",content:p.jsx(lrt,{form:L,effectiveTemperature:(P==null?void 0:P.temperature)??l.temperature,effectiveMaxTokens:(P==null?void 0:P.maxTokens)??l.maxTokens,effectiveTopP:(P==null?void 0:P.topP)??l.topP??1,effectiveTopK:(P==null?void 0:P.topK)??l.topK,effectivePresencePenalty:(P==null?void 0:P.presencePenalty)??l.presencePenalty??0,effectiveFrequencyPenalty:(P==null?void 0:P.frequencyPenalty)??l.frequencyPenalty??0,isSaving:E})},{value:"rules-tags",label:"Rules & Tags",content:p.jsxs("div",{className:"space-y-6",children:[p.jsx(frt,{defaultRuleIds:S,setDefaultRuleIds:C,isSaving:E,allRules:r.getAllRules()}),p.jsx(prt,{defaultTagIds:x,setDefaultTagIds:_,isSaving:E,allTags:r.getAllTags(),getRulesForTag:r.getRulesForTag})]})},{value:"sync",label:"Sync",content:p.jsx(crt,{initialSyncRepoId:b,onSave:({syncRepoId:U})=>{v(U)},effectiveSyncRepoId:V,syncRepos:o,isParentSaving:E})},{value:"vfs",label:"Filesystem",content:p.jsx(urt,{projectId:n,projectName:(M==null?void 0:M.name)??null,isSaving:E})}],[d,m,b,x,S,L,P,l,c,E,V,o,n,M==null?void 0:M.name,r]);return p.jsx(Iy,{open:e,onOpenChange:t,children:p.jsxs(Ny,{className:ft("w-[95vw] h-[85vh] flex flex-col p-0","sm:w-[90vw] sm:max-w-[800px]","md:h-[75vh]","min-h-[500px] max-h-[90vh]"),children:[p.jsxs(My,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsxs(Py,{children:["Project Settings: ",M==null?void 0:M.name]}),p.jsx(w1,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),p.jsx(Ld,{tabs:J,initialValue:R,onValueChange:N,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"pb-4 md:pb-6 overflow-y-auto",scrollable:!1}),p.jsxs(jy,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:[p.jsx(Tt,{variant:"outline",onClick:t,disabled:E,children:"Cancel"}),p.jsxs(Tt,{onClick:F,disabled:E,children:[E&&p.jsx(Yn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};class yrt{constructor(){we(this,"id","core-project-settings");we(this,"modalId","projectSettingsModal");we(this,"unregisterModalProviderCallback",null);we(this,"modApiRef",null);we(this,"eventUnsubscribers",[]);we(this,"allRules",[]);we(this,"allTags",[]);we(this,"tagRuleLinks",[]);we(this,"getAllRules",()=>this.allRules);we(this,"getAllTags",()=>this.allTags);we(this,"getRulesForTag",t=>{const n=new Set(this.tagRuleLinks.filter(r=>r.tagId===t).map(r=>r.ruleId));return this.allRules.filter(r=>n.has(r.id))});we(this,"openModal",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(Rr.openModalRequest,{modalId:this.modalId,targetId:t,initialTab:n})});we(this,"closeModal",()=>{var t;(t=this.modApiRef)==null||t.emit(Rr.closeModalRequest,{modalId:this.modalId})})}async initialize(t){this.modApiRef=t;const n=t.on(fr.dataLoaded,r=>{r&&(this.allRules=r.rules||[],this.allTags=r.tags||[],this.tagRuleLinks=(r.links||[]).map(i=>({tagId:i.tagId,ruleId:i.ruleId})))});this.eventUnsubscribers.push(n),t.emit(fr.loadRulesAndTagsRequest,void 0),console.log(`[${this.id}] Initialized.`)}register(t){if(this.modApiRef=t,this.unregisterModalProviderCallback){console.warn(`[${this.id}] Modal provider already registered. Skipping.`);return}this.unregisterModalProviderCallback=t.registerModalProvider(this.modalId,n=>lt.createElement(grt,{isOpen:n.isOpen,onClose:n.onClose,projectId:n.targetId||null,module:this})),console.log(`[${this.id}] Modal provider registered for ${this.modalId}.`)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterModalProviderCallback&&(this.unregisterModalProviderCallback(),this.unregisterModalProviderCallback=null),this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const v5=lt.memo(({module:e,value:t,onChange:n,className:r,disabled:i})=>{const[,s]=T.useState({});T.useEffect(()=>{if(e)return e.setNotifyCallback(()=>s({})),()=>e.setNotifyCallback(null)},[e]);const a=!!e,o=a?e.selectedModelId:t,l=a?e.isStreaming:i,c=a?e.isLoadingProviders:!1,u=a?e.globallyEnabledModels:Ir(h=>h.getGloballyEnabledModelDefinitions()),d=T.useCallback(h=>{a&&e?e.handleSelectionChange(h):n&&n(h)},[a,e,n]);return p.jsx(b5,{models:u,value:o,onChange:d,className:r,disabled:l,isLoading:c})});v5.displayName="GlobalModelSelector";class brt{constructor(){we(this,"id","core-global-model-selector");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"selectedModelId",null);we(this,"isStreaming",!1);we(this,"isLoadingProviders",!0);we(this,"globallyEnabledModels",[]);we(this,"notifyComponentUpdate",null);we(this,"handleSelectionChange",t=>{var n,r;(n=this.modApiRef)==null||n.emit(lr.selectModelRequest,{modelId:t}),(r=this.modApiRef)==null||r.emit(Bn.setModelIdRequest,{id:t})});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t;const n=Ir.getState();this.isLoadingProviders=n.isLoading,this.selectedModelId=n.selectedModelId,this.isStreaming=Ln.getState().status==="streaming",this.isLoadingProviders||(this.globallyEnabledModels=n.getGloballyEnabledModelDefinitions());const r=t.on(tr.statusChanged,o=>{var l;if(typeof o=="object"&&o&&"status"in o){const c=o.status==="streaming";this.isStreaming!==c&&(this.isStreaming=c,(l=this.notifyComponentUpdate)==null||l.call(this))}}),i=t.on(lr.selectedModelChanged,o=>{var l,c;typeof o=="object"&&o&&"modelId"in o&&this.selectedModelId!==o.modelId&&(this.selectedModelId=o.modelId,(l=this.modApiRef)==null||l.emit(Bn.setModelIdRequest,{id:o.modelId}),(c=this.notifyComponentUpdate)==null||c.call(this))}),s=t.on(lr.globallyEnabledModelsUpdated,o=>{var d,h;let l=!1;JSON.stringify(this.globallyEnabledModels)!==JSON.stringify(o.models)&&(this.globallyEnabledModels=o.models,l=!0);const c=Ir.getState().isLoading;this.isLoadingProviders!==c&&(this.isLoadingProviders=c,l=!0);const u=Ir.getState().selectedModelId;this.selectedModelId!==u&&(this.selectedModelId=u,(d=this.modApiRef)==null||d.emit(Bn.setModelIdRequest,{id:this.selectedModelId}),l=!0),l&&((h=this.notifyComponentUpdate)==null||h.call(this))}),a=t.on(lr.initialDataLoaded,()=>{var u,d;const o=Ir.getState();let l=!1;this.isLoadingProviders!==o.isLoading&&(this.isLoadingProviders=o.isLoading,l=!0),this.selectedModelId!==o.selectedModelId&&(this.selectedModelId=o.selectedModelId,(u=this.modApiRef)==null||u.emit(Bn.setModelIdRequest,{id:this.selectedModelId}),l=!0);const c=o.getGloballyEnabledModelDefinitions();JSON.stringify(this.globallyEnabledModels)!==JSON.stringify(c)&&(this.globallyEnabledModels=c,l=!0),l&&((d=this.notifyComponentUpdate)==null||d.call(this))});this.eventUnsubscribers.push(r,i,s,a)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>this.isLoadingProviders?"loading":"ready",triggerRenderer:()=>lt.createElement(v5,{module:this})})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const vrt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const[n,r]=T.useState(!1),[i,s]=T.useState(e.getTurnSystemPrompt()),a=e.getEffectiveSystemPrompt(),o=e.getIsStreaming(),l=e.getTurnSystemPrompt();T.useEffect(()=>{n&&s(e.getTurnSystemPrompt())},[n,e]),T.useEffect(()=>{const m=e.getTurnSystemPrompt();i!==m&&s(m)},[e.getTurnSystemPrompt(),i]);const c=T.useCallback(()=>{e.setTurnSystemPrompt(i.trim()),r(!1)},[i,e]),u=T.useCallback(()=>{s(""),e.setTurnSystemPrompt(""),r(!1)},[e]),d=m=>{m&&s(e.getTurnSystemPrompt()),r(m)},h=l.trim().length>0;return p.jsxs(Ll,{open:n,onOpenChange:d,children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Bl,{asChild:!0,children:p.jsx(Tt,{variant:h?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:o,"aria-label":"Set System Prompt for Next Turn",children:p.jsx(Ume,{className:"h-4 w-4"})})})}),p.jsx(wr,{side:"top",children:h?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),p.jsxs($l,{className:"w-80 p-4 space-y-3",align:"start",children:[p.jsx(en,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),p.jsx(Fd,{id:"turn-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,50))||"Default"}${a&&a.length>50?"...":""}`,value:i,onChange:m=>s(m.target.value),rows:5,className:"text-sm"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx(Tt,{variant:"outline",size:"sm",onClick:u,disabled:!i.trim(),children:"Clear Override"}),p.jsx(Tt,{size:"sm",onClick:c,children:"Set for Next Turn"})]})]})]})};class xrt{constructor(){we(this,"id","core-system-prompt");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"turnSystemPromptValue","");we(this,"effectiveSystemPrompt",null);we(this,"isStreaming",!1);we(this,"notifyComponentUpdate",null);we(this,"getTurnSystemPrompt",()=>this.turnSystemPromptValue);we(this,"getEffectiveSystemPrompt",()=>this.effectiveSystemPrompt);we(this,"getIsStreaming",()=>this.isStreaming);we(this,"setTurnSystemPrompt",t=>{var n;this.turnSystemPromptValue!==t&&(this.turnSystemPromptValue=t,(n=this.notifyComponentUpdate)==null||n.call(this))});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.isStreaming=Ln.getState().status==="streaming",this.updateEffectivePrompt();const n=t.on(tr.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(Rr.contextChanged,()=>{var a;this.updateEffectivePrompt(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(fa.updated,()=>{var a;this.updateEffectivePrompt(),(a=this.notifyComponentUpdate)==null||a.call(this)}),s=t.on(sn.globalSystemPromptChanged,()=>{var a;this.updateEffectivePrompt(),(a=this.notifyComponentUpdate)==null||a.call(this)});this.eventUnsubscribers.push(n,r,i,s)}updateEffectivePrompt(){var a;const t=$n.getState(),n=ko.getState(),r=mr.getState(),i=t.selectedItemType==="project"?t.selectedItemId:t.selectedItemType==="conversation"?((a=t.getConversationById(t.selectedItemId))==null?void 0:a.projectId)??null:null,s=n.getEffectiveProjectSettings(i).systemPrompt??r.globalSystemPrompt;this.effectiveSystemPrompt!==s&&(this.effectiveSystemPrompt=s)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>lt.createElement(vrt,{module:this}),getMetadata:()=>{const n=this.turnSystemPromptValue.trim();return n?{turnSystemPrompt:n}:void 0},clearOnSubmit:()=>{var n;this.turnSystemPromptValue!==""&&(this.turnSystemPromptValue="",(n=this.notifyComponentUpdate)==null||n.call(this))}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const wrt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getStructuredOutputJson(),[r,i]=T.useState(!1),[s,a]=T.useState(n??""),[o,l]=T.useState(""),[c,u]=T.useState([]),d=T.useCallback(()=>{try{JSON.parse(s),e.setStructuredOutputJson(s.trim()||null),i(!1),De.success("Structured output applied for next turn.")}catch{De.error("Invalid JSON format.")}},[s,e]),h=T.useCallback(()=>{a(""),e.setStructuredOutputJson(null),i(!1),De.info("Structured output cleared.")},[e]),m=T.useCallback(()=>{if(!o.trim()){De.error("Please provide a name to save to the library.");return}try{JSON.parse(s);const _={id:Date.now().toString(),name:o.trim(),json:s};u(S=>[...S,_]),l(""),De.success(`"${_.name}" saved to library.`)}catch{De.error("Cannot save invalid JSON to library.")}},[s,o]),y=T.useCallback(_=>{a(_.json),e.setStructuredOutputJson(_.json),i(!1),De.success(`Loaded "${_.name}" from library.`)},[e]),b=T.useCallback(_=>{u(S=>S.filter(C=>C.id!==_)),De.info("Item removed from library.")},[]);T.useEffect(()=>{r&&a(e.getStructuredOutputJson()??"")},[r,e]);const v=[{value:"entry",label:"Entry",content:p.jsxs("div",{className:"space-y-3 p-1",children:[p.jsx(en,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),p.jsx(Fd,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:s,onChange:_=>a(_.target.value),rows:8,className:"font-mono text-xs"}),p.jsxs("div",{className:"flex justify-between items-end gap-2",children:[p.jsxs("div",{className:"flex-grow space-y-1",children:[p.jsx(en,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),p.jsx(pr,{id:"structured-output-name",value:o,onChange:_=>l(_.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),p.jsxs(Tt,{size:"sm",variant:"outline",onClick:m,disabled:!o.trim()||!s.trim(),className:"h-8",children:[p.jsx(ph,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[p.jsx(Tt,{variant:"outline",size:"sm",onClick:h,disabled:!n,children:"Clear Applied Schema"}),p.jsx(Tt,{size:"sm",onClick:d,disabled:!s,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:p.jsx("div",{className:"space-y-2 p-1",children:c.length===0?p.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):c.map(_=>p.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[p.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:_.name}),p.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[p.jsx(Tt,{size:"sm",variant:"outline",onClick:()=>y(_),className:"h-7 px-2 text-xs",children:"Use"}),p.jsx(Tt,{size:"icon",variant:"ghost",onClick:()=>b(_.id),className:"h-7 w-7 text-destructive",children:p.jsx(Ho,{className:"h-3.5 w-3.5"})})]})]},_.id))})}],x=!!n;return p.jsxs(Ll,{open:r,onOpenChange:i,children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Bl,{asChild:!0,children:p.jsx(Tt,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:p.jsx(EH,{className:"h-4 w-4"})})})}),p.jsx(wr,{side:"top",children:x?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),p.jsx($l,{className:"w-[450px] p-0",align:"start",children:p.jsx(Ld,{tabs:v,defaultValue:"entry"})})]})},_rt=({module:e})=>{const[,t]=T.useState({});return T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]),e.getIsVisible()?p.jsx(wrt,{module:e}):null};class Srt{constructor(){we(this,"id","core-structured-output");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"structuredOutputJson",null);we(this,"isVisible",!0);we(this,"notifyComponentUpdate",null);we(this,"getStructuredOutputJson",()=>this.structuredOutputJson);we(this,"getIsVisible",()=>this.isVisible);we(this,"setStructuredOutputJson",t=>{var n,r;this.structuredOutputJson=t,(n=this.modApiRef)==null||n.emit(Bn.setStructuredOutputJsonRequest,{json:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var i;this.modApiRef=t,this.structuredOutputJson=_o.getState().structuredOutputJson,this.updateVisibility(),(i=this.notifyComponentUpdate)==null||i.call(this);const n=t.on(lr.selectedModelChanged,()=>{var s;this.updateVisibility(),(s=this.notifyComponentUpdate)==null||s.call(this)}),r=t.on(Bn.parameterChanged,s=>{var a;if(typeof s=="object"&&s&&"params"in s){const o=s.params;"structuredOutputJson"in o&&this.structuredOutputJson!==(o.structuredOutputJson??null)&&(this.structuredOutputJson=o.structuredOutputJson??null,(a=this.notifyComponentUpdate)==null||a.call(this))}});this.eventUnsubscribers.push(n,r)}updateVisibility(){var s;const{getSelectedModel:t}=Ir.getState(),n=t(),r=(s=n==null?void 0:n.metadata)==null?void 0:s.supported_parameters,i=Array.isArray(r)&&r.includes("structured_output");this.isVisible!==i&&(this.isVisible=i)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>lt.createElement(_rt,{module:this}),getParameters:()=>{if(this.structuredOutputJson)try{return{structured_output:JSON.parse(this.structuredOutputJson)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{var n;(n=this.modApiRef)==null||n.emit(Bn.setStructuredOutputJsonRequest,{json:null})}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const Crt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.contextLength,r=e.getEstimatedInputTokens(),i=e.getTotalEstimatedTokens(),s=e.getContextPercentage(),a=e.historyTokens,o=e.selectedModelId,l=T.useMemo(()=>s>85?"text-red-600 dark:text-red-500":s>70?"text-orange-500 dark:text-orange-400":s>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[s]);if(!(o!==null&&n>0))return null;const u=`Context: ~${i.toLocaleString()} / ${n.toLocaleString()} tokens (${s}%) [History: ${a}, Input: ${r}]`;return p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:p.jsx(Whe,{className:ft("h-3 w-3 fill-current",l)})})}),p.jsx(wr,{side:"top",children:u})]})})},Nue=4,krt=e=>{let t=0;return e.forEach(n=>{var r,i,s,a;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(a=(s=(i=n.prompt)==null?void 0:i.metadata)==null?void 0:s.attachedFiles)==null||a.forEach(o=>{t+=o.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/Nue)};class Ert{constructor(){we(this,"id","core-usage-display");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"currentInputText","");we(this,"historyTokens",0);we(this,"attachedFiles",[]);we(this,"selectedModelId",null);we(this,"contextLength",0);we(this,"notifyComponentUpdate",null);we(this,"getEstimatedInputTokens",()=>{const t=new TextEncoder().encode(this.currentInputText).length,n=this.attachedFiles.reduce((r,i)=>r+i.size,0);return Math.ceil((t+n)/Nue)});we(this,"getTotalEstimatedTokens",()=>this.historyTokens+this.getEstimatedInputTokens());we(this,"getContextPercentage",()=>this.contextLength?Math.min(100,Math.round(this.getTotalEstimatedTokens()/this.contextLength*100)):0);we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.loadInitialState(),this.updateContextLength();const n=t.on(Bn.inputChanged,o=>{var l;typeof o=="object"&&o&&"value"in o&&(this.currentInputText=o.value,(l=this.notifyComponentUpdate)==null||l.call(this))}),r=t.on(wl.attachedFilesChanged,o=>{var l;typeof o=="object"&&o&&"files"in o&&(this.attachedFiles=o.files,(l=this.notifyComponentUpdate)==null||l.call(this))}),i=t.on(lr.selectedModelChanged,o=>{var l;typeof o=="object"&&o&&"modelId"in o&&(this.selectedModelId=o.modelId,this.updateContextLength(),(l=this.notifyComponentUpdate)==null||l.call(this))}),s=t.on(tr.completed,()=>{var o;this.updateHistoryTokens(),(o=this.notifyComponentUpdate)==null||o.call(this)}),a=t.on(Rr.contextChanged,()=>{var o;this.updateHistoryTokens(),(o=this.notifyComponentUpdate)==null||o.call(this)});this.eventUnsubscribers.push(n,r,i,s,a),console.log(`[${this.id}] Initialized.`)}loadInitialState(){const t=qf.getState(),n=Ir.getState();this.attachedFiles=t.attachedFilesMetadata,this.selectedModelId=n.selectedModelId,this.updateHistoryTokens()}updateHistoryTokens(){const t=Ln.getState();if(t.currentConversationId){const n=t.interactions.filter(r=>r.status==="COMPLETED");this.historyTokens=krt(n)}else this.historyTokens=0}updateContextLength(){var c;if(!this.selectedModelId){this.contextLength=0;return}const{dbProviderConfigs:t,dbApiKeys:n}=Ir.getState(),{providerId:r,modelId:i}=rc(this.selectedModelId);if(!r||!i){this.contextLength=0;return}const s=t.find(u=>u.id===r);if(!s){this.contextLength=0;return}const a=n.find(u=>u.id===s.apiKeyId),o=EG(s,i,a==null?void 0:a.value),l=o==null?void 0:o.metadata;this.contextLength=((c=l==null?void 0:l.top_provider)==null?void 0:c.context_length)??(l==null?void 0:l.context_length)??0}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>lt.createElement(Crt,{module:this})}),console.log(`[${this.id}] Registered.`)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}const Trt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getReasoningEnabled(),r=e.getIsStreaming(),i=e.getIsVisible(),s=n===!0,a=T.useCallback(()=>{const o=s?null:!0;e.setReasoningEnabled(o)},[s,e]);return i?p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:s?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:a,disabled:r,"aria-label":s?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:p.jsx(fh,{className:ft("h-4 w-4",s?"text-primary":"text-muted-foreground")})})}),p.jsx(wr,{side:"top",children:s?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};class Art{constructor(){we(this,"id","core-reasoning");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"reasoningEnabled",null);we(this,"isStreaming",!1);we(this,"isVisible",!0);we(this,"notifyComponentUpdate",null);we(this,"getReasoningEnabled",()=>this.reasoningEnabled);we(this,"getIsStreaming",()=>this.isStreaming);we(this,"getIsVisible",()=>this.isVisible);we(this,"setReasoningEnabled",t=>{var n,r;this.reasoningEnabled=t,(n=this.modApiRef)==null||n.emit(Bn.setReasoningEnabledRequest,{enabled:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var s;this.modApiRef=t,this.reasoningEnabled=_o.getState().reasoningEnabled,this.isStreaming=Ln.getState().status==="streaming",this.updateVisibility(),(s=this.notifyComponentUpdate)==null||s.call(this);const n=t.on(tr.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(lr.selectedModelChanged,()=>{var a;this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(Bn.parameterChanged,a=>{var o;if(typeof a=="object"&&a&&"params"in a){const l=a.params;"reasoningEnabled"in l&&this.reasoningEnabled!==l.reasoningEnabled&&(this.reasoningEnabled=l.reasoningEnabled??null,(o=this.notifyComponentUpdate)==null||o.call(this))}});this.eventUnsubscribers.push(n,r,i)}updateVisibility(){var i,s;const{getSelectedModel:t}=Ir.getState(),n=t(),r=((s=(i=n==null?void 0:n.metadata)==null?void 0:i.supported_parameters)==null?void 0:s.includes("reasoning"))??!1;this.isVisible!==r&&(this.isVisible=r)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>lt.createElement(Trt,{module:this}),getMetadata:()=>this.reasoningEnabled===!0?{reasoningEnabled:!0}:void 0,clearOnSubmit:()=>{var n;(n=this.modApiRef)==null||n.emit(Bn.setReasoningEnabledRequest,{enabled:null})}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const Rrt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getWebSearchEnabled(),r=e.getIsStreaming(),i=e.getIsVisible(),s=n===!0,a=T.useCallback(()=>{const o=s?null:!0;e.setWebSearchEnabled(o)},[s,e]);return i?p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:s?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:a,disabled:r,"aria-label":s?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:p.jsx(Aa,{className:ft("h-4 w-4",s?"text-primary":"text-muted-foreground")})})}),p.jsx(wr,{side:"top",children:s?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};class Irt{constructor(){we(this,"id","core-web-search");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"webSearchEnabled",null);we(this,"isStreaming",!1);we(this,"isVisible",!0);we(this,"notifyComponentUpdate",null);we(this,"getWebSearchEnabled",()=>this.webSearchEnabled);we(this,"getIsStreaming",()=>this.isStreaming);we(this,"getIsVisible",()=>this.isVisible);we(this,"setWebSearchEnabled",t=>{var n,r;this.webSearchEnabled=t,(n=this.modApiRef)==null||n.emit(Bn.setWebSearchEnabledRequest,{enabled:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var s;this.modApiRef=t,this.webSearchEnabled=_o.getState().webSearchEnabled,this.isStreaming=Ln.getState().status==="streaming",this.updateVisibility(),(s=this.notifyComponentUpdate)==null||s.call(this);const n=t.on(tr.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(lr.selectedModelChanged,()=>{var a;this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(Bn.parameterChanged,a=>{var o;if(typeof a=="object"&&a&&"params"in a){const l=a.params;"webSearchEnabled"in l&&this.webSearchEnabled!==l.webSearchEnabled&&(this.webSearchEnabled=l.webSearchEnabled??null,(o=this.notifyComponentUpdate)==null||o.call(this))}});this.eventUnsubscribers.push(n,r,i)}updateVisibility(){var s;const{getSelectedModel:t}=Ir.getState(),n=t(),r=((s=n==null?void 0:n.metadata)==null?void 0:s.supported_parameters)??[],i=r.includes("web_search")||r.includes("web_search_options");this.isVisible!==i&&(this.isVisible=i)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>lt.createElement(Rrt,{module:this}),getParameters:()=>this.webSearchEnabled===!0?{web_search:!0}:void 0,clearOnSubmit:()=>{var n;(n=this.modApiRef)==null||n.emit(Bn.setWebSearchEnabledRequest,{enabled:null})}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const Nrt=({activeTagIds:e,activeRuleIds:t,onToggleTag:n,onToggleRule:r,allRules:i,allTags:s,getRulesForTag:a})=>{const[o,l]=T.useState(""),[c,u]=T.useState(""),d=T.useMemo(()=>{const _=o.toLowerCase();return _?s.filter(S=>{var C;return S.name.toLowerCase().includes(_)||((C=S.description)==null?void 0:C.toLowerCase().includes(_))}):s},[s,o]),h=T.useMemo(()=>{const _=c.toLowerCase();return _?i.filter(S=>S.name.toLowerCase().includes(_)||S.content.toLowerCase().includes(_)||S.type.toLowerCase().includes(_)):i},[i,c]),m=T.useCallback((_,S)=>{n(_,S)},[n]),y=T.useCallback((_,S)=>{r(_,S)},[r]),b=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Aa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(pr,{type:"search",placeholder:"Filter tags...",value:o,onChange:_=>l(_.target.value),className:"pl-8 h-9"})]}),p.jsx(Na,{className:"h-64 border rounded-md p-2 bg-background/50",children:d.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:s.length===0?"No tags defined.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:d.map(_=>{const S=a(_.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(mu,{id:`tag-activate-${_.id}`,checked:e.has(_.id),onCheckedChange:C=>m(_.id,!!C),className:"mt-0.5"}),p.jsxs(en,{htmlFor:`tag-activate-${_.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:_.name}),_.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:_.description}),S.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",S.map(C=>C.name).join(", ")]})]})]})},_.id)})})})]}),v=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Aa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(pr,{type:"search",placeholder:"Filter rules...",value:c,onChange:_=>u(_.target.value),className:"pl-8 h-9"})]}),p.jsx(Na,{className:"h-64 border rounded-md p-2 bg-background/50",children:h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:i.length===0?"No rules defined.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:h.map(_=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(mu,{id:`rule-activate-${_.id}`,checked:t.has(_.id),onCheckedChange:S=>y(_.id,!!S),className:"mt-0.5"}),p.jsxs(en,{htmlFor:`rule-activate-${_.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:_.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",_.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",_.content]})]})]})},_.id))})})]}),x=[{value:"tags",label:"Activate Tags",content:b()},{value:"rules",label:"Activate Rules",content:v()}];return p.jsx("div",{className:"p-0 h-[28rem] max-w-lg",children:p.jsx(Ld,{tabs:x,defaultValue:"tags"})})},Mrt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const[n,r]=T.useState(!1),i=e.getActiveTagIds(),s=e.getActiveRuleIds(),a=e.getIsStreaming(),o=e.getHasRulesOrTags(),l=e.getAllRules(),c=e.getAllTags(),u=e.getRulesForTag,d=T.useCallback((v,x)=>{e.setActiveTagIds(_=>{const S=new Set(_);return x?S.add(v):S.delete(v),S})},[e]),h=T.useCallback((v,x)=>{e.setActiveRuleIds(_=>{const S=new Set(_);return x?S.add(v):S.delete(v),S})},[e]),m=()=>{o?r(v=>!v):e.handleTriggerClick()&&r(!1)},y=i.size>0||s.size>0,b=a;return p.jsxs(Ll,{open:n,onOpenChange:r,children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:o?p.jsx(Bl,{asChild:!0,children:p.jsx(Tt,{variant:y?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:b,"aria-label":"Configure Rules & Tags for Next Turn",onClick:m,children:p.jsx(qL,{className:"h-4 w-4"})})}):p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:b,"aria-label":"Add Rules & Tags (Opens Settings)",onClick:m,children:p.jsx(qL,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"top",children:o?y?`Rules/Tags Active (${i.size} tags, ${s.size} rules)`:"Activate Rules/Tags (Next Turn)":"Add Rules/Tags (Opens Settings)"})]})}),o&&p.jsx($l,{className:"w-auto p-0",align:"start",children:p.jsx(Nrt,{activeTagIds:i,activeRuleIds:s,onToggleTag:d,onToggleRule:h,allRules:l,allTags:c,getRulesForTag:u})})]})};function jrt({form:e,name:t,label:n,description:r,placeholder:i,disabled:s,wrapperClassName:a,className:o,rows:l,...c}){return p.jsx(e.Field,{name:t,children:u=>{const d=typeof u.state.value=="string"||typeof u.state.value=="number"?String(u.state.value):"";return p.jsxs("div",{className:ft("space-y-1.5",a),children:[p.jsx(en,{htmlFor:u.name,className:"text-sm",children:n}),r&&p.jsx("p",{className:"text-xs text-muted-foreground",children:r}),p.jsx(Fd,{id:u.name,name:u.name,value:d,onBlur:u.handleBlur,onChange:h=>u.handleChange(h.target.value),placeholder:i,disabled:s??u.form.state.isSubmitting,rows:l,className:ft(o,u.state.meta.errors.length?"border-destructive":""),...c}),p.jsx(Ss,{field:u})]})}})}const Prt=Ze({name:$e().min(1,"Rule Name is required."),content:$e().min(1,"Rule Content is required."),type:jl(["system","before","after"],{errorMap:()=>({message:"Rule Type is required."})})}),Ort=[{value:"system",label:"System Prompt"},{value:"before",label:"Before User Prompt"},{value:"after",label:"After User Prompt"}],Drt=({initialData:e,isSavingExt:t,onSave:n,onCancel:r})=>{const i=ea({defaultValues:{name:(e==null?void 0:e.name)||"",content:(e==null?void 0:e.content)||"",type:(e==null?void 0:e.type)||"before"},validators:{onChangeAsync:Prt,onChangeAsyncDebounceMs:500},onSubmit:async({value:s})=>{await n({name:s.name.trim(),content:s.content.trim(),type:s.type})}});return T.useEffect(()=>{i.reset({name:(e==null?void 0:e.name)||"",content:(e==null?void 0:e.content)||"",type:(e==null?void 0:e.type)||"before"})},[e,i]),p.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),i.handleSubmit()},className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Rule":"Add New Rule"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsx(cw,{form:i,name:"name",label:"Rule Name",placeholder:"e.g., Always respond in JSON",required:!0,disabled:t,wrapperClassName:"md:col-span-2"}),p.jsx(Kv,{form:i,name:"type",label:"Rule Type",options:Ort,placeholder:"Select Type",disabled:t})]}),p.jsx(jrt,{form:i,name:"content",label:"Rule Content",placeholder:"Enter the rule text to be injected...",required:!0,rows:4,disabled:t,className:"font-mono text-xs"}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Tt,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(Ya,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsx(i.Subscribe,{selector:s=>[s.canSubmit,s.isSubmitting,s.isValidating,s.isValid],children:([s,a,o,l])=>p.jsxs(Tt,{variant:"secondary",size:"sm",type:"submit",disabled:t||!s||a||!l||o,children:[(t||a||o)&&p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(ph,{className:"h-4 w-4 mr-1"})," ",t||a||o?"Saving...":"Save Rule"]})})]})]})},Frt=({rules:e,isLoading:t,isDeleting:n,onEdit:r,onDelete:i})=>{const s=a=>{window.confirm(`Are you sure you want to delete the rule "${a.name}"? This will also remove it from any tags.`)&&i(a.id,a.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(vm,{children:[p.jsx(Dy,{children:p.jsxs(Ui,{children:[p.jsx(vi,{children:"Name"}),p.jsx(vi,{children:"Type"}),p.jsx(vi,{children:"Content Preview"}),p.jsx(vi,{className:"text-right",children:"Actions"})]})}),p.jsx(xm,{children:t?p.jsxs(p.Fragment,{children:[p.jsx(Ui,{children:p.jsx(hr,{colSpan:4,children:p.jsx($r,{className:"h-10 w-full"})})}),p.jsx(Ui,{children:p.jsx(hr,{colSpan:4,children:p.jsx($r,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Ui,{children:p.jsx(hr,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No rules defined yet."})}):e.map(a=>{const o=n[a.id];return p.jsxs(Ui,{children:[p.jsx(hr,{className:"font-medium",children:a.name}),p.jsx(hr,{className:"capitalize",children:a.type}),p.jsx(hr,{className:"text-xs text-muted-foreground truncate max-w-xs",children:a.content}),p.jsxs(hr,{className:"text-right space-x-1",children:[p.jsx(Mn,{tooltipText:"Edit Rule",onClick:()=>r(a),disabled:o,icon:p.jsx(xw,{}),className:"h-8 w-8","aria-label":`Edit rule ${a.name}`}),p.jsx(Mn,{tooltipText:"Delete Rule",onClick:()=>s(a),disabled:o,icon:o?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ho,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete rule ${a.name}`})]})]},a.id)})})]})})},Lrt=({module:e})=>{const[,t]=T.useState(Date.now()),n=e.getAllRules(),r=e.getIsLoadingRules(),[i,s]=T.useState(!1),[a,o]=T.useState(null),[l,c]=T.useState(!1),[u,d]=T.useState({});T.useEffect(()=>(e.setNotifySettingsCallback(()=>t(Date.now())),()=>{e.setNotifySettingsCallback(null)}),[e]);const h=()=>{o(null),s(!0)},m=x=>{o(x),s(!0)},y=T.useCallback(()=>{s(!1),o(null),c(!1)},[]),b=T.useCallback(async x=>{c(!0);try{a?e.updateRule(a.id,x):e.addRule(x),y()}catch{}finally{c(!1)}},[e,a,y]),v=T.useCallback(async x=>{d(_=>({..._,[x]:!0}));try{e.deleteRule(x),(a==null?void 0:a.id)===x&&y()}catch{}finally{d(_=>({..._,[x]:!1}))}},[e,a,y]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Rules"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create reusable text snippets (rules) that can be automatically injected into prompts based on assigned tags. Rules can modify the system prompt, or be added before/after the user's input."})]}),!i&&p.jsxs(Tt,{onClick:h,variant:"outline",className:"w-full",disabled:r,children:[p.jsx(Y0,{className:"h-4 w-4 mr-1"})," Add New Rule"]}),i&&p.jsx(Drt,{initialData:a??void 0,isSavingExt:l,onSave:b,onCancel:y}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Rules"}),p.jsx(Frt,{rules:n,isLoading:r,isDeleting:u,onEdit:m,onDelete:v})]})]})},e3=Ze({name:$e().min(1,"Tag Name is required."),description:$e().nullable()}),Brt=({initialData:e,isParentSaving:t=!1,onSave:n,onCancel:r})=>{const i=ea({defaultValues:{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||null},validators:{onChangeAsync:e3,onChangeAsyncDebounceMs:500},onSubmit:async({value:s})=>{var a;await n({name:s.name.trim(),description:((a=s.description)==null?void 0:a.trim())||null})}});return T.useEffect(()=>{i.reset({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||null})},[e,i]),p.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),i.handleSubmit()},className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Tag":"Add New Tag"}),p.jsx(i.Field,{name:"name",validators:{onChange:e3.shape.name},children:s=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:s.name,children:"Tag Name"}),p.jsx(pr,{id:s.name,value:s.state.value??"",onChange:a=>s.handleChange(a.target.value),onBlur:s.handleBlur,placeholder:"e.g., Code Generation, Summarization",disabled:i.state.isSubmitting||t}),p.jsx(Ss,{field:s})]})}),p.jsx(i.Field,{name:"description",validators:{onChange:e3.shape.description},children:s=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:s.name,children:"Description (Optional)"}),p.jsx(Fd,{id:s.name,value:s.state.value??"",onChange:a=>s.handleChange(a.target.value),onBlur:s.handleBlur,placeholder:"Describe when to use this tag...",rows:2,disabled:i.state.isSubmitting||t}),p.jsx(Ss,{field:s})]})}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Tt,{variant:"ghost",size:"sm",onClick:r,disabled:i.state.isSubmitting||t,type:"button",children:[p.jsx(Ya,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsx(i.Subscribe,{selector:s=>[s.canSubmit,s.isSubmitting,s.isValidating,s.isValid],children:([s,a,o,l])=>p.jsxs(Tt,{variant:"secondary",size:"sm",type:"submit",disabled:t||!s||a||o||!l,children:[(a||o)&&p.jsx(Yn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(ph,{className:"h-4 w-4 mr-1"})," ",a||o?"Saving...":"Save Tag"]})})]})]})},$rt=({tags:e,rulesByTagId:t,isLoading:n,isDeleting:r,onEdit:i,onDelete:s})=>{const a=o=>{window.confirm(`Are you sure you want to delete the tag "${o.name}"? This will remove it from all rules.`)&&s(o.id,o.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(vm,{children:[p.jsx(Dy,{children:p.jsxs(Ui,{children:[p.jsx(vi,{children:"Name"}),p.jsx(vi,{children:"Description"}),p.jsx(vi,{children:"Linked Rules"}),p.jsx(vi,{className:"text-right",children:"Actions"})]})}),p.jsx(xm,{children:n?p.jsxs(p.Fragment,{children:[p.jsx(Ui,{children:p.jsx(hr,{colSpan:4,children:p.jsx($r,{className:"h-10 w-full"})})}),p.jsx(Ui,{children:p.jsx(hr,{colSpan:4,children:p.jsx($r,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Ui,{children:p.jsx(hr,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No tags defined yet."})}):e.map(o=>{const l=r[o.id],c=t.get(o.id)||[];return p.jsxs(Ui,{children:[p.jsx(hr,{className:"font-medium",children:o.name}),p.jsx(hr,{className:"text-xs text-muted-foreground truncate max-w-xs",children:o.description||"-"}),p.jsx(hr,{className:"text-xs",children:c.length>0?c.map(u=>u.name).join(", "):"None"}),p.jsxs(hr,{className:"text-right space-x-1",children:[p.jsx(Mn,{tooltipText:"Edit Tag & Rules",onClick:()=>i(o),disabled:l,icon:p.jsx(xw,{}),className:"h-8 w-8","aria-label":`Edit tag ${o.name}`}),p.jsx(Mn,{tooltipText:"Delete Tag",onClick:()=>a(o),disabled:l,icon:l?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ho,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete tag ${o.name}`})]})]},o.id)})})]})})},zrt=({tag:e,allRules:t,linkedRuleIds:n,onLinkChange:r,disabled:i=!1})=>{const[s,a]=T.useState(!1),[o,l]=T.useState(""),c=T.useMemo(()=>[...t].sort((y,b)=>y.name.localeCompare(b.name)),[t]),u=T.useMemo(()=>{const y=o.toLowerCase();return y?c.filter(b=>b.name.toLowerCase().includes(y)||b.content.toLowerCase().includes(y)||b.type.toLowerCase().includes(y)):c},[c,o]),d=T.useCallback(y=>{const b=n.has(y);r(e.id,y,!b),l("")},[n,r,e.id]),h=T.useCallback((y,b)=>{b.stopPropagation(),r(e.id,y,!1)},[r,e.id]),m=T.useMemo(()=>c.filter(y=>n.has(y.id)),[c,n]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs(en,{className:"font-medium",children:['Associated Rules for "',e.name,'"']}),p.jsxs(Ll,{open:s,onOpenChange:a,children:[p.jsx(Bl,{asChild:!0,children:p.jsxs(Tt,{variant:"outline",role:"combobox","aria-expanded":s,className:"w-full justify-between h-9",disabled:i||t.length===0,children:[p.jsx("span",{className:"truncate",children:m.length>0?`${m.length} rule(s) selected`:"Select rules..."}),p.jsx(Mk,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx($l,{className:"w-[--radix-popover-trigger-width] p-0",children:p.jsxs(kue,{shouldFilter:!1,children:[p.jsx(Eue,{placeholder:"Search rules...",value:o,onValueChange:l}),p.jsxs(Tue,{children:[p.jsx(Aue,{children:t.length===0?"No rules defined.":"No rules found."}),p.jsx(Rue,{children:u.map(y=>{const b=n.has(y.id);return p.jsxs(Iue,{value:y.id,onSelect:()=>d(y.id),className:"cursor-pointer",children:[p.jsx(Ka,{className:ft("mr-2 h-4 w-4",b?"opacity-100":"opacity-0")}),p.jsx("span",{className:"truncate",children:y.name}),p.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",y.type,")"]})]},y.id)})})]})]})})]}),m.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:m.map(y=>p.jsxs($f,{variant:"secondary",className:"flex items-center gap-1",children:[p.jsx("span",{className:"truncate",children:y.name}),p.jsx(Tt,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive hover:bg-transparent",onClick:b=>h(y.id,b),disabled:i,"aria-label":`Unlink rule ${y.name}`,children:p.jsx(Ya,{className:"h-3 w-3"})})]},y.id))})]})},Urt=({module:e})=>{const[,t]=T.useState(Date.now()),n=e.getAllTags(),r=e.getAllRules(),i=e.getTagRuleLinks(),s=e.getRulesForTag,a=e.getIsLoadingRules(),[o,l]=T.useState(!1),[c,u]=T.useState(null),[d,h]=T.useState(!1),[m,y]=T.useState({});T.useEffect(()=>(e.setNotifySettingsCallback(()=>t(Date.now())),()=>{e.setNotifySettingsCallback(null)}),[e]);const b=()=>{u(null),l(!0)},v=R=>{u(R),l(!0)},x=T.useCallback(()=>{l(!1),u(null),h(!1)},[]),_=T.useCallback(async R=>{h(!0);try{c?e.updateTag(c.id,R):e.addTag(R),c||x()}catch{}finally{h(!1)}},[e,c,x]),S=T.useCallback(async R=>{y(N=>({...N,[R]:!0}));try{e.deleteTag(R),(c==null?void 0:c.id)===R&&x()}catch{}finally{y(N=>({...N,[R]:!1}))}},[e,c,x]),C=T.useCallback(async(R,N,M)=>{try{M?e.linkTagToRule(R,N):e.unlinkTagFromRule(R,N)}catch{}},[e]),E=T.useMemo(()=>{const R=new Map;return n.forEach(N=>{R.set(N.id,s(N.id))}),R},[n,s]),A=T.useMemo(()=>c?new Set(i.filter(R=>R.tagId===c.id).map(R=>R.ruleId)):new Set,[c,i]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Tags"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create tags to group related rules. You can activate tags before sending a prompt to apply their associated rules."})]}),!o&&p.jsxs(Tt,{onClick:b,variant:"outline",className:"w-full",disabled:a,children:[p.jsx(Y0,{className:"h-4 w-4 mr-1"})," Add New Tag"]}),o&&p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(Brt,{initialData:c??void 0,isParentSaving:d,onSave:_,onCancel:x}),c&&p.jsx(zrt,{tag:c,allRules:r,linkedRuleIds:A,onLinkChange:C,disabled:d})]}),p.jsx(Ad,{}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Tags"}),p.jsx($rt,{tags:n,rulesByTagId:E,isLoading:a,isDeleting:m,onEdit:v,onDelete:S})]})]})},qrt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifySettingsCallback(()=>t({})),()=>e.setNotifySettingsCallback(null)),[e]);const n=T.useMemo(()=>[{value:"rules",label:"Rules",content:p.jsx(Lrt,{module:e})},{value:"tags",label:"Tags",content:p.jsx(Urt,{module:e})}],[e]);return p.jsx(Ld,{tabs:n,defaultValue:"rules",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})};class Vrt{constructor(){we(this,"id","core-rules-tags");we(this,"unregisterPromptControlCallback",null);we(this,"unregisterSettingsTabCallback",null);we(this,"eventUnsubscribers",[]);we(this,"modApiRef",null);we(this,"allRules",[]);we(this,"allTags",[]);we(this,"tagRuleLinks",[]);we(this,"transientActiveTagIds",new Set);we(this,"transientActiveRuleIds",new Set);we(this,"isStreaming",!1);we(this,"hasRulesOrTags",!1);we(this,"isLoadingRules",!0);we(this,"notifyComponentUpdate",null);we(this,"notifySettingsComponentUpdate",null);we(this,"getAllRules",()=>this.allRules);we(this,"getAllTags",()=>this.allTags);we(this,"getTagRuleLinks",()=>this.tagRuleLinks);we(this,"getRulesForTag",t=>{const n=new Set(this.tagRuleLinks.filter(r=>r.tagId===t).map(r=>r.ruleId));return this.allRules.filter(r=>n.has(r.id))});we(this,"getRuleById",t=>this.allRules.find(n=>n.id===t));we(this,"getTagById",t=>this.allTags.find(n=>n.id===t));we(this,"getRulesByIds",t=>{const n=new Set(t);return this.allRules.filter(r=>n.has(r.id))});we(this,"addRule",t=>{var n;(n=this.modApiRef)==null||n.emit(fr.addRuleRequest,t)});we(this,"updateRule",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(fr.updateRuleRequest,{id:t,updates:n})});we(this,"deleteRule",t=>{var n;(n=this.modApiRef)==null||n.emit(fr.deleteRuleRequest,{id:t})});we(this,"addTag",t=>{var n;(n=this.modApiRef)==null||n.emit(fr.addTagRequest,t)});we(this,"updateTag",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(fr.updateTagRequest,{id:t,updates:n})});we(this,"deleteTag",t=>{var n;(n=this.modApiRef)==null||n.emit(fr.deleteTagRequest,{id:t})});we(this,"linkTagToRule",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(fr.linkTagToRuleRequest,{tagId:t,ruleId:n})});we(this,"unlinkTagFromRule",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(fr.unlinkTagFromRuleRequest,{tagId:t,ruleId:n})});we(this,"handleTriggerClick",()=>!this.hasRulesOrTags&&this.modApiRef?(this.modApiRef.emit(Rr.openModalRequest,{modalId:"settingsModal",initialTab:"rules-tags"}),!0):!1);we(this,"getIsStreaming",()=>this.isStreaming);we(this,"getHasRulesOrTags",()=>this.hasRulesOrTags);we(this,"getIsLoadingRules",()=>this.isLoadingRules);we(this,"getActiveTagIds",()=>this.transientActiveTagIds);we(this,"getActiveRuleIds",()=>this.transientActiveRuleIds);we(this,"setActiveTagIds",t=>{var n;this.transientActiveTagIds=t(this.transientActiveTagIds),(n=this.notifyComponentUpdate)==null||n.call(this)});we(this,"setActiveRuleIds",t=>{var n;this.transientActiveRuleIds=t(this.transientActiveRuleIds),(n=this.notifyComponentUpdate)==null||n.call(this)});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t});we(this,"setNotifySettingsCallback",t=>{this.notifySettingsComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.isStreaming=t.getContextSnapshot().isStreaming,t.emit(fr.loadRulesAndTagsRequest,void 0);const n=t.on(tr.statusChanged,i=>{var s;typeof i=="object"&&i&&"status"in i&&this.isStreaming!==(i.status==="streaming")&&(this.isStreaming=i.status==="streaming",(s=this.notifyComponentUpdate)==null||s.call(this))}),r=t.on(fr.dataLoaded,i=>{var s,a;i&&(this.allRules=i.rules||[],this.allTags=i.tags||[],this.tagRuleLinks=(i.links||[]).map(o=>({tagId:o.tagId,ruleId:o.ruleId}))),this.updateHasRulesOrTags(),this.isLoadingRules=!1,(s=this.notifyComponentUpdate)==null||s.call(this),(a=this.notifySettingsComponentUpdate)==null||a.call(this)});this.eventUnsubscribers.push(n,r)}updateHasRulesOrTags(){const t=this.allRules.length>0||this.allTags.length>0;this.hasRulesOrTags!==t&&(this.hasRulesOrTags=t)}register(t){this.modApiRef=t,this.unregisterPromptControlCallback||(this.unregisterPromptControlCallback=t.registerPromptControl({id:this.id,status:()=>this.isLoadingRules?"loading":"ready",triggerRenderer:()=>lt.createElement(Mrt,{module:this}),getMetadata:()=>{const n=Array.from(this.transientActiveTagIds),r=Array.from(this.transientActiveRuleIds),i=[],s=new Set(r);if(n.forEach(a=>{this.getRulesForTag(a).forEach(o=>s.add(o.id))}),s.forEach(a=>{const o=this.getRuleById(a);o&&i.push({type:o.type,content:o.content,sourceRuleId:o.id})}),n.length>0||r.length>0||i.length>0)return{activeTagIds:n,activeRuleIds:r,effectiveRulesContent:i}},clearOnSubmit:()=>{var r;let n=!1;this.transientActiveTagIds.size>0&&(this.transientActiveTagIds=new Set,n=!0),this.transientActiveRuleIds.size>0&&(this.transientActiveRuleIds=new Set,n=!0),n&&((r=this.notifyComponentUpdate)==null||r.call(this))}})),this.unregisterSettingsTabCallback||(this.unregisterSettingsTabCallback=t.registerSettingsTab({id:"rules-tags",title:"Rules & Tags",component:()=>lt.createElement(qrt,{module:this}),order:50}))}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterPromptControlCallback&&(this.unregisterPromptControlCallback(),this.unregisterPromptControlCallback=null),this.unregisterSettingsTabCallback&&(this.unregisterSettingsTabCallback(),this.unregisterSettingsTabCallback=null),this.notifyComponentUpdate=null,this.notifySettingsComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const Hrt=({module:e})=>{const[,t]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getTurnEnabled(),r=e.getIsStreaming(),i=e.getGlobalAutoTitleEnabled()&&e.getIsFirstInteraction(),s=T.useCallback(()=>{const a=!n;e.setTurnEnabled(a)},[n,e]);return i?p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:n?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:s,disabled:r,"aria-label":n?"Disable Auto-Title for this Chat":"Enable Auto-Title for this Chat",children:p.jsx(PH,{className:ft("h-4 w-4",n?"text-primary":"text-muted-foreground")})})}),p.jsx(wr,{side:"top",children:n?"Auto-Title Enabled (Click to Disable)":"Auto-Title Disabled (Click to Enable)"})]})}):null};class Wrt{constructor(){we(this,"id","core-auto-title");we(this,"unregisterCallback",null);we(this,"eventUnsubscribers",[]);we(this,"turnAutoTitleEnabled",!1);we(this,"isStreaming",!1);we(this,"isFirstInteraction",!1);we(this,"globalAutoTitleEnabled",!0);we(this,"notifyComponentUpdate",null);we(this,"getTurnEnabled",()=>this.turnAutoTitleEnabled);we(this,"getIsStreaming",()=>this.isStreaming);we(this,"getIsFirstInteraction",()=>this.isFirstInteraction);we(this,"getGlobalAutoTitleEnabled",()=>this.globalAutoTitleEnabled);we(this,"setTurnEnabled",t=>{var n;this.turnAutoTitleEnabled!==t&&(this.turnAutoTitleEnabled=t,(n=this.notifyComponentUpdate)==null||n.call(this))});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var a;this.turnAutoTitleEnabled=!1,this.isStreaming=Ln.getState().status==="streaming",this.globalAutoTitleEnabled=mr.getState().autoTitleEnabled,this.checkFirstInteraction(),(a=this.notifyComponentUpdate)==null||a.call(this);const n=t.on(tr.statusChanged,o=>{var l;typeof o=="object"&&o&&"status"in o&&this.isStreaming!==(o.status==="streaming")&&(this.isStreaming=o.status==="streaming",(l=this.notifyComponentUpdate)==null||l.call(this))}),r=t.on(Rr.contextChanged,()=>{var l;const o=this.isFirstInteraction;this.checkFirstInteraction(),o!==this.isFirstInteraction&&((l=this.notifyComponentUpdate)==null||l.call(this))}),i=t.on(tr.completed,()=>{var l;const o=this.isFirstInteraction;this.checkFirstInteraction(),o!==this.isFirstInteraction&&((l=this.notifyComponentUpdate)==null||l.call(this))}),s=t.on(sn.autoTitleEnabledChanged,o=>{var l;typeof o=="object"&&o&&"enabled"in o&&this.globalAutoTitleEnabled!==o.enabled&&(this.globalAutoTitleEnabled=o.enabled,(l=this.notifyComponentUpdate)==null||l.call(this))});this.eventUnsubscribers.push(n,r,i,s)}checkFirstInteraction(){const t=Ln.getState(),n=t.currentConversationId===null||t.interactions.filter(r=>r.conversationId===t.currentConversationId).length===0;this.isFirstInteraction!==n&&(this.isFirstInteraction=n,!n&&this.turnAutoTitleEnabled&&(this.turnAutoTitleEnabled=!1))}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=()=>lt.createElement(Hrt,{module:this});this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:n,getMetadata:()=>this.turnAutoTitleEnabled?{autoTitleEnabledForTurn:!0}:void 0,clearOnSubmit:()=>{var r;this.turnAutoTitleEnabled&&(this.turnAutoTitleEnabled=!1,(r=this.notifyComponentUpdate)==null||r.call(this))}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}function Grt(){const e=new URLSearchParams(window.location.search),t=e.get("q")??void 0,n=e.get("m")??void 0,r=e.getAll("vfs").filter(Boolean),i=e.get("s")??"1";return{query:t,modelId:n,vfsFiles:r.length>0?r:void 0,submit:i}}class Krt{constructor(){we(this,"id","core-url-parameters");we(this,"modApiRef",null)}async initialize(t){this.modApiRef=t,console.log(`[${this.id}] Initializing...`),t.on(Ih.initializationPhaseCompleted,n=>{n.phase==="all"&&this.processUrlParameters().catch(r=>{console.error(`[${this.id}] Error processing URL parameters:`,r),De.error("Failed to process URL parameters.")})}),console.log(`[${this.id}] Initialized, awaiting full app load.`)}register(t){}destroy(){this.modApiRef=null}async processUrlParameters(){var r,i;if(!this.modApiRef){console.warn(`[${this.id}] ModAPI not available, cannot process URL parameters.`);return}const t=this.modApiRef,n=Grt();if(!(!n.query&&!n.modelId&&!((r=n.vfsFiles)!=null&&r.length))){De.info("Processing parameters from URL...");try{const s=await new Promise((a,o)=>{const l=t.on(Wn.conversationAdded,c=>{c.conversation.title.startsWith("From URL:")&&(l(),a(c.conversation.id))});setTimeout(()=>{l(),o(new Error("Timeout waiting for conversation creation event."))},5e3),t.emit(Wn.addConversationRequest,{title:n.query?`From URL: ${n.query.substring(0,30)}...`:"From URL Parameters"})});if(t.emit(Wn.selectItemRequest,{id:s,type:"conversation"}),n.modelId){const a=Ir.getState().getAvailableModelListItems();let o=null;const l=n.modelId.toLowerCase();if(n.modelId.includes(":")){const c=a.find(u=>u.id===n.modelId);c&&(o=c.id)}if(!o){const c=a.find(u=>u.name.toLowerCase()===l);c&&(o=c.id)}if(!o){const c=a.find(u=>u.name.toLowerCase().startsWith(l));c&&(o=c.id)}if(!o){const c=a.find(u=>{const d=u.id.toLowerCase().split("/");return d.length>1&&d[1].startsWith(l)});c&&(o=c.id)}if(o){t.emit(Bn.setModelIdRequest,{id:o}),t.emit(lr.selectModelRequest,{modelId:o});const c=a.find(u=>u.id===o);De.success(`Model set to: ${c==null?void 0:c.name} (${c==null?void 0:c.providerName})`)}else De.warning(`Model matching "${n.modelId}" not found or not enabled. Using default.`)}if(n.vfsFiles&&n.vfsFiles.length>0){const a="orphan";let o;try{if(o=await t.getVfsInstance(a),!o)throw new Error("Failed to get VFS instance via ModAPI.")}catch(l){De.error(`Failed to initialize VFS for URL files: ${l instanceof Error?l.message:String(l)}`)}if(o)for(const l of n.vfsFiles)try{const c=await Sh(l,{fsInstance:o}),u=await o.promises.stat(l),d=cs(l),h="application/octet-stream",m=ix(d,h);let y={};if(m)y.contentText=new TextDecoder().decode(c);else{let b="";const v=c.byteLength;for(let x=0;x<v;x++)b+=String.fromCharCode(c[x]);y.contentBase64=window.btoa(b)}t.emit(wl.addAttachedFileRequest,{source:"vfs",name:d,type:h,size:u.size,path:l,...y}),De.success(`Attached VFS file: ${d}`)}catch(c){c.code==="ENOENT"?De.warning(`VFS file not found: ${l}`):De.warning(`Failed to attach VFS file "${l}": ${c.message}`),console.error(`Error processing VFS file ${l}:`,c)}}if(n.query)if(n.submit==="0")t.emit(Bn.inputChanged,{value:n.query}),De.info("Query from URL loaded into input area."),window.history.replaceState({},document.title,window.location.pathname);else{let a={},o={};const l=qf.getState().attachedFilesMetadata;l.length>0&&(o.attachedFiles=[...l]);let c={id:Xs(),content:n.query,parameters:a,metadata:o};t.emit(Bn.submitted,{turnData:c});const u=await eC(m0.PROMPT_TURN_FINALIZE,{turnData:c});if(u===!1){De.warning("Prompt submission from URL cancelled by middleware.");return}const d=u&&typeof u=="object"?u.turnData:c;await zv.submitPrompt(d),window.history.replaceState({},document.title,window.location.pathname)}else(n.modelId||(i=n.vfsFiles)!=null&&i.length)&&(De.info("Model and/or VFS files from URL applied. Type your message."),window.history.replaceState({},document.title,window.location.pathname))}catch(s){De.error(`Failed to process URL parameters: ${s instanceof Error?s.message:String(s)}`),console.error("Error processing URL parameters:",s)}}}}const Yrt=({module:e})=>{const[t,n]=T.useState(!1),[,r]=T.useState({});T.useEffect(()=>(e.setNotifyCallback(()=>r({})),()=>e.setNotifyCallback(null)),[e]),T.useEffect(()=>{const o=e.getImageGenerationEnabled();n(o===!0)},[e]);const i=e.getIsVisible(),s=e.getIsStreaming(),a=T.useCallback(()=>{const o=!t;e.setImageGenerationEnabled(o?!0:null),n(o)},[t,e]);return i?p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx(Tt,{variant:t?"secondary":"ghost",size:"icon",onClick:a,disabled:s,className:"h-8 w-8","aria-label":t?"Disable Image Generation for Next Turn":"Enable Image Generation for Next Turn",children:p.jsx(b2,{className:ft("h-4 w-4",t?"text-primary":"text-muted-foreground")})})}),p.jsx(wr,{side:"top",children:t?"Image Generation Enabled (Click to Disable)":"Image Generation Disabled (Click to Enable)"})]})}):null};class Zrt{constructor(){we(this,"id","core-image-generation");we(this,"modApiRef",null);we(this,"isImageGenerationEnabled",null);we(this,"unregisterCallback",null);we(this,"notifyComponentUpdate",null);we(this,"eventUnsubscribers",[]);we(this,"isVisible",!1);we(this,"isStreaming",!1);we(this,"getImageGenerationEnabled",()=>this.isImageGenerationEnabled);we(this,"getIsVisible",()=>this.isVisible);we(this,"getIsStreaming",()=>this.isStreaming);we(this,"setImageGenerationEnabled",t=>{var n,r;this.isImageGenerationEnabled=t,(n=this.modApiRef)==null||n.emit(Bn.setImageGenerationEnabledRequest,{enabled:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});we(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.isImageGenerationEnabled=null,this.isStreaming=Ln.getState().status==="streaming",this.updateVisibility();const n=t.on(lr.selectedModelChanged,()=>{var i;this.updateVisibility(),(i=this.notifyComponentUpdate)==null||i.call(this)}),r=t.on(tr.statusChanged,i=>{var s;typeof i=="object"&&i&&"status"in i&&this.isStreaming!==(i.status==="streaming")&&(this.isStreaming=i.status==="streaming",(s=this.notifyComponentUpdate)==null||s.call(this))});this.eventUnsubscribers.push(n,r),console.log(`[${this.id}] Initialized.`)}updateVisibility(){var s,a;const{getSelectedModel:t}=Ir.getState(),n=t(),i=(((a=(s=n==null?void 0:n.metadata)==null?void 0:s.architecture)==null?void 0:a.output_modalities)??[]).includes("image");this.isVisible!==i&&(this.isVisible=i)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>lt.createElement(Yrt,{module:this}),getMetadata:()=>this.isImageGenerationEnabled===!0?{imageGenerationEnabled:!0}:void 0,clearOnSubmit:()=>{var i;(i=this.modApiRef)==null||i.emit(Bn.setImageGenerationEnabledRequest,{enabled:null})}});const n=i=>{var s;i.enabled!==this.isImageGenerationEnabled&&(this.isImageGenerationEnabled=i.enabled,(s=this.notifyComponentUpdate)==null||s.call(this))},r=this.modApiRef.on(Bn.setImageGenerationEnabledRequest,n);this.eventUnsubscribers.push(r),console.log(`[${this.id}] Registered successfully`)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const Xrt=({module:e})=>{const[t,n]=T.useState(!1),[r,i]=T.useState([]),[s,a]=T.useState(250),[,o]=T.useState({}),{status:l}=Ln(Tn(b=>({status:b.status})));T.useEffect(()=>{if(e)return e.setNotifyCallback(()=>o({})),()=>e.setNotifyCallback(null)},[e]);const c=(b,v)=>{i(x=>v?[...x,b]:x.filter(_=>_!==b))},u=()=>{if(r.length<2){De.error("Please select at least 2 models to race");return}e.setRaceMode(!0,r,s),n(!1),De.info(`Race mode enabled! Send your prompt to race ${r.length} models.`),i([]),a(250)},d=()=>{e.setRaceMode(!1),De.info("Race mode disabled")},h=b=>{if(b.stopPropagation(),e.isRaceModeActive){d();return}if(l==="streaming"){De.info("Cannot start race while another response is streaming");return}if(e.globallyEnabledModels.length<2){De.info("Need at least 2 models enabled to race");return}n(!0)},m=l!=="streaming"&&e.globallyEnabledModels.length>=2,y=()=>e.isRaceModeActive?"Race mode active - click to cancel, or send your prompt to race models":l==="streaming"?"Cannot race while streaming":e.globallyEnabledModels.length<2?`Need at least 2 models enabled to race (currently have ${e.globallyEnabledModels.length})`:"Race multiple models with your prompt";return p.jsxs(p.Fragment,{children:[p.jsx(Mn,{tooltipText:y(),onClick:h,"aria-label":"Race Multiple Models Against Each Other",disabled:!m,icon:p.jsx(MH,{}),className:`h-5 w-5 md:h-6 md:w-6 ${e.isRaceModeActive?"bg-primary text-primary-foreground":""}`}),p.jsx(Iy,{open:t,onOpenChange:n,children:p.jsxs(Ny,{className:"max-w-md",children:[p.jsxs(My,{children:[p.jsx(Py,{children:"Race Models"}),p.jsx(w1,{children:'Select multiple models to race against each other. After clicking "Enable Race Mode", send your prompt and all selected models will respond.'})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(en,{htmlFor:"stagger-input",children:"Stagger Delay (ms)"}),p.jsx(pr,{id:"stagger-input",type:"number",min:"0",max:"5000",step:"50",value:s,onChange:b=>a(parseInt(b.target.value)||250),placeholder:"250",className:"w-full"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Delay between starting each model (0-5000ms)"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(en,{children:["Select Models to Race (",r.length," selected)"]}),p.jsx(Na,{className:"h-48 w-full border rounded-md p-3",children:p.jsx("div",{className:"space-y-2",children:e.globallyEnabledModels.map(b=>p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(mu,{id:`model-${b.id}`,checked:r.includes(b.id),onCheckedChange:v=>c(b.id,v===!0)}),p.jsx(en,{htmlFor:`model-${b.id}`,className:"text-sm cursor-pointer flex-1 min-w-0",children:p.jsxs("div",{className:"truncate",children:[p.jsx("span",{className:"font-medium",children:b.name}),p.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",b.providerName,")"]})]})})]},b.id))})}),e.globallyEnabledModels.length===0&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No models available"})]})]}),p.jsxs(jy,{children:[p.jsx(Tt,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),p.jsx(Tt,{onClick:u,disabled:r.length<2||e.isLoadingProviders,children:"Enable Race Mode"})]})]})})]})};class Jrt{constructor(){we(this,"id","race-prompt-control");we(this,"eventUnsubscribers",[]);we(this,"modApi",null);we(this,"notifyComponentUpdate",null);we(this,"isRaceMode",!1);we(this,"raceModelIds",[]);we(this,"raceStaggerMs",250);we(this,"globallyEnabledModels",[]);we(this,"isLoadingProviders",!1)}async initialize(t){this.modApi=t;const n=Ir.getState();this.globallyEnabledModels=n.getGloballyEnabledModelDefinitions(),this.isLoadingProviders=n.isLoading;const r=t.on(lr.globallyEnabledModelsUpdated,a=>{var o;this.globallyEnabledModels=a.models,(o=this.notifyComponentUpdate)==null||o.call(this)}),i=t.on(lr.initialDataLoaded,a=>{var o;a.globallyEnabledModels&&(this.globallyEnabledModels=a.globallyEnabledModels,this.isLoadingProviders=!1,(o=this.notifyComponentUpdate)==null||o.call(this))}),s=t.addMiddleware(m0.PROMPT_TURN_FINALIZE,async a=>this.isRaceMode?await this.handleRaceSubmission(a.turnData):a);this.eventUnsubscribers.push(r,i,s)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.notifyComponentUpdate=null,this.modApi=null}setNotifyCallback(t){this.notifyComponentUpdate=t}setRaceMode(t,n,r){var i;this.isRaceMode=t,t&&n&&r!==void 0?(this.raceModelIds=n,this.raceStaggerMs=r):(this.raceModelIds=[],this.raceStaggerMs=250),(i=this.notifyComponentUpdate)==null||i.call(this)}get isRaceModeActive(){return this.isRaceMode}async handleRaceSubmission(t){try{console.log(`[RacePromptControlModule] Starting race submission with ${this.raceModelIds.length} models:`,this.raceModelIds);const n=Ln.getState(),r=n.currentConversationId;if(!r)return De.error("No active conversation for racing"),!1;if(this.raceModelIds.length===0)return De.error("No models selected for racing"),this.setRaceMode(!1),!1;De.info(`Racing ${this.raceModelIds.length} models with your prompt...`);const s=n.interactions.filter(y=>y.conversationId===r).reduce((y,b)=>Math.max(y,b.index),-1)+1,a=await this.buildPromptObject(t,r,s),o=[...this.raceModelIds],l=this.raceStaggerMs,u=_o.getState().modelId;if(!u)return De.error("No model currently selected"),this.setRaceMode(!1),!1;this.setRaceMode(!1);const d={...a,metadata:{...a.metadata,modelId:u}},h=await Ap.startInteraction(d,r,t,"message.user_assistant");if(!h)throw new Error("Failed to create main race interaction");const m=o.map((y,b)=>new Promise(v=>{setTimeout(async()=>{try{const x={...a,metadata:{...a.metadata,modelId:y,raceTab:!0,raceParticipantIndex:b+1}},_=await Ap.startInteraction(x,r,t,"message.assistant_regen");if(_){const S={parentId:h.id,index:b+1};n._updateInteractionInState(_.id,S),await Nt.saveInteraction({..._,...S})}v()}catch(x){console.error(`[RacePromptControlModule] Race participant ${b+1} failed:`,x),v()}},(b+1)*l)}));return await Promise.all(m),De.success(`Race started! Current model + ${o.length} race models responding in tabs.`),!1}catch(n){return De.error(`Race failed: ${String(n)}`),console.error("[RacePromptControlModule] Error during race:",n),this.setRaceMode(!1),!1}}async buildPromptObject(t,n,r){var R,N,M;const i=Ln.getState(),s=ko.getState(),o=$n.getState().getConversationById(n),l=(o==null?void 0:o.projectId)??null,c=s.getEffectiveProjectSettings(l),u=i.interactions.filter(P=>P.conversationId===n&&P.index<r&&P.status==="COMPLETED"&&P.type==="message.user_assistant"&&P.parentId===null).sort((P,L)=>P.index-L.index),d=P3(u);let h=t.content;const m=[],y=((R=t.metadata)==null?void 0:R.effectiveRulesContent)??[],b=y.filter(P=>P.type==="system").map(P=>P.content),v=y.filter(P=>P.type==="before").map(P=>P.content),x=y.filter(P=>P.type==="after").map(P=>P.content);v.length>0&&(h=`${v.join(`
`)}

${h}`),x.length>0&&(h=`${h}

${x.join(`
`)}`),h&&m.push({type:"text",text:h});const _=((N=t.metadata)==null?void 0:N.attachedFiles)??[];_.length>0,m.length>0&&d.push({role:"user",content:m});let C=((M=t.metadata)==null?void 0:M.turnSystemPrompt)??c.systemPrompt??void 0;b.length>0&&(C=`${C?`${C}

`:""}${b.join(`
`)}`);const E=_o.getState(),A={temperature:E.temperature,max_tokens:E.maxTokens,top_p:E.topP,top_k:E.topK,presence_penalty:E.presencePenalty,frequency_penalty:E.frequencyPenalty,...t.parameters??{}};return Object.keys(A).forEach(P=>{(A[P]===null||A[P]===void 0)&&delete A[P]}),{system:C,messages:d,parameters:A,metadata:{...t.metadata??{},attachedFiles:_.map(({contentBase64:P,contentText:L,...O})=>O)}}}register(t){t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>lt.createElement(Xrt,{module:this})})}}const Qrt=Ze({enableStreamingMarkdown:kr(),enableStreamingCodeBlockParsing:kr(),foldStreamingCodeBlocks:kr(),foldUserMessagesOnCompletion:kr(),enableAutoScrollOnStream:kr(),streamingRenderFPS:At().min(3,"Min 3 FPS").max(60,"Max 60 FPS"),autoScrollInterval:At().min(50,"Min 50ms").max(5e3,"Max 5000ms")}),eit=()=>{const e=mr(Tn(i=>({setEnableStreamingMarkdown:i.setEnableStreamingMarkdown,setEnableStreamingCodeBlockParsing:i.setEnableStreamingCodeBlockParsing,setFoldStreamingCodeBlocks:i.setFoldStreamingCodeBlocks,setFoldUserMessagesOnCompletion:i.setFoldUserMessagesOnCompletion,setStreamingRenderFPS:i.setStreamingRenderFPS,setAutoScrollInterval:i.setAutoScrollInterval,setEnableAutoScrollOnStream:i.setEnableAutoScrollOnStream,resetGeneralSettings:i.resetGeneralSettings}))),t=mr(Tn(i=>({enableStreamingMarkdown:i.enableStreamingMarkdown,enableStreamingCodeBlockParsing:i.enableStreamingCodeBlockParsing,foldStreamingCodeBlocks:i.foldStreamingCodeBlocks,foldUserMessagesOnCompletion:i.foldUserMessagesOnCompletion,streamingRenderFPS:i.streamingRenderFPS,autoScrollInterval:i.autoScrollInterval,enableAutoScrollOnStream:i.enableAutoScrollOnStream}))),n=ea({defaultValues:{enableStreamingMarkdown:t.enableStreamingMarkdown??!0,enableStreamingCodeBlockParsing:t.enableStreamingCodeBlockParsing??!0,foldStreamingCodeBlocks:t.foldStreamingCodeBlocks??!1,foldUserMessagesOnCompletion:t.foldUserMessagesOnCompletion??!1,enableAutoScrollOnStream:t.enableAutoScrollOnStream??!0,streamingRenderFPS:t.streamingRenderFPS??15,autoScrollInterval:t.autoScrollInterval??1e3},validators:{onChangeAsync:Qrt,onChangeAsyncDebounceMs:500},onSubmit:async({value:i})=>{e.setEnableStreamingMarkdown(i.enableStreamingMarkdown),e.setEnableStreamingCodeBlockParsing(i.enableStreamingCodeBlockParsing),e.setFoldStreamingCodeBlocks(i.foldStreamingCodeBlocks),e.setFoldUserMessagesOnCompletion(i.foldUserMessagesOnCompletion),e.setEnableAutoScrollOnStream(i.enableAutoScrollOnStream),e.setStreamingRenderFPS(i.streamingRenderFPS),e.setAutoScrollInterval(i.autoScrollInterval)}});T.useEffect(()=>{n.reset({enableStreamingMarkdown:t.enableStreamingMarkdown??!0,enableStreamingCodeBlockParsing:t.enableStreamingCodeBlockParsing??!0,foldStreamingCodeBlocks:t.foldStreamingCodeBlocks??!1,foldUserMessagesOnCompletion:t.foldUserMessagesOnCompletion??!1,enableAutoScrollOnStream:t.enableAutoScrollOnStream??!0,streamingRenderFPS:t.streamingRenderFPS??15,autoScrollInterval:t.autoScrollInterval??1e3})},[t.enableStreamingMarkdown,t.enableStreamingCodeBlockParsing,t.foldStreamingCodeBlocks,t.foldUserMessagesOnCompletion,t.enableAutoScrollOnStream,t.streamingRenderFPS,t.autoScrollInterval,n]);const r=()=>{window.confirm("Are you sure you want to reset Streaming & Display settings to their defaults?")&&e.resetGeneralSettings()};return p.jsxs("form",{onSubmit:i=>{i.preventDefault(),i.stopPropagation(),n.handleSubmit()},className:"p-1 space-y-4",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Streaming & Display"}),p.jsx(pp,{form:n,name:"enableStreamingMarkdown",label:"Parse Markdown While Streaming",description:"Render Markdown formatting as the response arrives (may impact performance slightly)."}),p.jsx(pp,{form:n,name:"enableStreamingCodeBlockParsing",label:"Use Full Code Blocks While Streaming",description:"Use the syntax-highlighting component for code blocks during streaming."}),p.jsx(pp,{form:n,name:"foldStreamingCodeBlocks",label:"Fold Code Blocks by Default During Streaming",description:"Automatically collapse code blocks as they stream in. Useful for long code outputs."}),p.jsx(pp,{form:n,name:"foldUserMessagesOnCompletion",label:"Fold User Messages After Response",description:"Automatically collapse the user's prompt message once the assistant finishes responding."}),p.jsx(pp,{form:n,name:"enableAutoScrollOnStream",label:"Auto-Scroll While Streaming",description:"Automatically scroll to the bottom as new content arrives."}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsx(nc,{form:n,name:"streamingRenderFPS",label:"Streaming Update Rate",min:3,max:60,step:1,valueLabelSuffix:" FPS"}),p.jsx(W0,{form:n,name:"streamingRenderFPS",label:"FPS Input",min:3,max:60,step:1,className:"w-24 h-8 text-xs ml-auto","aria-label":"Streaming Render FPS Value"}),p.jsx("p",{className:ft("text-sm text-muted-foreground"),children:"Controls how frequently the UI updates during streaming (3-60 FPS)."})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsx(nc,{form:n,name:"autoScrollInterval",label:"Auto-Scroll Interval",min:50,max:5e3,step:50,valueLabelSuffix:" ms",disabled:!n.state.values.enableAutoScrollOnStream}),p.jsx(W0,{form:n,name:"autoScrollInterval",label:"Interval Input (ms)",min:50,max:5e3,step:50,className:"w-24 h-8 text-xs ml-auto",disabled:!n.state.values.enableAutoScrollOnStream,"aria-label":"Auto Scroll Interval Value"}),p.jsx("p",{className:ft("text-sm text-muted-foreground"),children:"How often to scroll to the bottom during streaming (50-5000 ms)."})]})]}),p.jsx(Ad,{}),p.jsx("div",{className:"flex items-center justify-between pt-3",children:p.jsx(n.Subscribe,{children:i=>{const s=i.canSubmit,a=i.isSubmitting,o=i.isValidating,l=i.isValid;return p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Tt,{type:"submit",size:"sm",disabled:!s||a||o||!l,children:a?"Saving...":o?"Validating...":"Save Changes"}),p.jsxs(Tt,{variant:"outline",size:"sm",onClick:r,type:"button",children:[p.jsx(aP,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})]})}})})]})},tit=lt.memo(eit);class nit{constructor(){we(this,"id","core-settings-general");we(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"general",title:"General",component:tit,order:10})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const rit=({label:e,colorKey:t,value:n,onChange:r})=>{const[i,s]=T.useState(n??"");T.useEffect(()=>{s(n??"")},[n]);const a=()=>{r(t,i.trim()||null)},o=l=>{s(l.target.value)};return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(en,{htmlFor:`color-${t}`,className:"text-xs w-28 shrink-0",children:e}),p.jsx(pr,{id:`color-${t}`,type:"text",value:i,onChange:o,onBlur:a,className:"h-8 text-xs flex-grow",placeholder:"e.g., #ffffff or oklch(0.5 0.2 180)"}),p.jsx(pr,{type:"color",value:i!=null&&i.startsWith("#")?i:"#000000",onChange:l=>{s(l.target.value),r(t,l.target.value)},className:"h-8 w-10 p-1 border-none cursor-pointer bg-transparent","aria-label":`Pick ${e} color`})]})},iit=[{label:"Default Light",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css"},{label:"A11y Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-a11y-dark.min.css"},{label:"Atom Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-atom-dark.min.css"},{label:"Atelier Sulphurpool Light",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-base16-ateliersulphurpool.light.min.css"},{label:"CB",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-cb.min.css"},{label:"Coldark Cold",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-cold.min.css"},{label:"Coldark Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css"},{label:"Coy (No Shadow)",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coy-without-shadows.min.css"},{label:"Darcula",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-darcula.min.css"},{label:"Dracula",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-dracula.min.css"},{label:"Duotone Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-dark.min.css"},{label:"Duotone Earth",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-earth.min.css"},{label:"Duotone Forest",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-forest.min.css"},{label:"Duotone Light",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-light.min.css"},{label:"Duotone Sea",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-sea.min.css"},{label:"Duotone Space",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-space.min.css"},{label:"GH Colors",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-ghcolors.min.css"},{label:"Gruvbox Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-dark.min.css"},{label:"Gruvbox Light",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-light.min.css"},{label:"Holi",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-holi-theme.min.css"},{label:"Hopscotch",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-hopscotch.min.css"},{label:"Lucario",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-lucario.min.css"},{label:"Material Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-dark.min.css"},{label:"Material Oceanic",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-oceanic.min.css"},{label:"Night Owl",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-night-owl.min.css"},{label:"Nord",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-nord.min.css"},{label:"One Dark",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-dark.min.css"},{label:"One Light",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-light.min.css"},{label:"Pojoaque",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-pojoaque.min.css"},{label:"Shades of Purple",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-shades-of-purple.min.css"},{label:"Solarized Dark Atom",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-solarized-dark-atom.min.css"},{label:"Synthwave '84",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-synthwave84.min.css"},{label:"VS",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vs.min.css"},{label:"VSC Dark Plus",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css"},{label:"Xonokai",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-xonokai.min.css"},{label:"Z-Touch",value:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-z-touch.min.css"}],sit=jl(["system","light","dark","TijuLight","TijuDark","custom"]),ait=Ze({theme:sit,prismThemeUrl:$e(),customFontFamily:$e(),customFontSize:At().min(12).max(20),chatMaxWidth:$e(),customThemeColors:Wf($e(),$e().nullable())}),oit=()=>{const e=mr(Tn(a=>({setTheme:a.setTheme,setPrismThemeUrl:a.setPrismThemeUrl,setCustomFontFamily:a.setCustomFontFamily,setCustomFontSize:a.setCustomFontSize,setChatMaxWidth:a.setChatMaxWidth,setCustomThemeColor:a.setCustomThemeColor,resetThemeSettings:a.resetThemeSettings}))),t=mr(Tn(a=>({theme:a.theme,prismThemeUrl:a.prismThemeUrl,customFontFamily:a.customFontFamily,customFontSize:a.customFontSize,chatMaxWidth:a.chatMaxWidth,_rawCustomThemeColors:a.customThemeColors}))),n=ea({defaultValues:{theme:t.theme??"system",prismThemeUrl:t.prismThemeUrl??"",customFontFamily:t.customFontFamily??"",customFontSize:t.customFontSize??16,chatMaxWidth:t.chatMaxWidth??"max-w-7xl",customThemeColors:t._rawCustomThemeColors??{}},onSubmit:async({value:a})=>{e.setTheme(a.theme),e.setPrismThemeUrl(a.prismThemeUrl||null),e.setCustomFontFamily(a.customFontFamily),e.setCustomFontSize(a.customFontSize),e.setChatMaxWidth(a.chatMaxWidth),a.customThemeColors&&Object.entries(a.customThemeColors).forEach(([o,l])=>{e.setCustomThemeColor(o,l)})},validators:{onChangeAsync:ait,onChangeAsyncDebounceMs:300}});T.useEffect(()=>{n.reset({theme:t.theme??"system",prismThemeUrl:t.prismThemeUrl??"",customFontFamily:t.customFontFamily??"",customFontSize:t.customFontSize??16,chatMaxWidth:t.chatMaxWidth??"max-w-7xl",customThemeColors:t._rawCustomThemeColors??{}})},[t.theme,t.prismThemeUrl,t.customFontFamily,t.customFontSize,t.chatMaxWidth,t._rawCustomThemeColors]);const r=()=>{window.confirm("Are you sure you want to reset all Theme settings to their defaults?")&&e.resetThemeSettings()},i=[{value:"max-w-3xl",label:"Very Small"},{value:"max-w-4xl",label:"Small"},{value:"max-w-5xl",label:"Medium"},{value:"max-w-6xl",label:"Large"},{value:"max-w-7xl",label:"Very Large"},{value:"max-w-full",label:"Full Width"}],s=[{key:"background",label:"Background"},{key:"foreground",label:"Foreground"},{key:"card",label:"Card BG"},{key:"cardForeground",label:"Card FG"},{key:"popover",label:"Popover BG"},{key:"popoverForeground",label:"Popover FG"},{key:"primary",label:"Primary"},{key:"primaryForeground",label:"Primary FG"},{key:"secondary",label:"Secondary"},{key:"secondaryForeground",label:"Secondary FG"},{key:"muted",label:"Muted BG"},{key:"mutedForeground",label:"Muted FG"},{key:"accent",label:"Accent"},{key:"accentForeground",label:"Accent FG"},{key:"destructive",label:"Destructive"},{key:"destructiveForeground",label:"Destructive FG"},{key:"border",label:"Border"},{key:"input",label:"Input BG"},{key:"ring",label:"Ring (Focus)"},{key:"sidebar",label:"Sidebar BG"},{key:"sidebarForeground",label:"Sidebar FG"},{key:"sidebarPrimary",label:"Sidebar Primary"},{key:"sidebarPrimaryForeground",label:"Sidebar Primary FG"},{key:"sidebarAccent",label:"Sidebar Accent"},{key:"sidebarAccentForeground",label:"Sidebar Accent FG"},{key:"sidebarBorder",label:"Sidebar Border"},{key:"sidebarRing",label:"Sidebar Ring"},{key:"chart1",label:"Chart 1"},{key:"chart2",label:"Chart 2"},{key:"chart3",label:"Chart 3"},{key:"chart4",label:"Chart 4"},{key:"chart5",label:"Chart 5"}];return p.jsxs("form",{onSubmit:a=>{a.preventDefault(),a.stopPropagation(),n.handleSubmit()},className:"space-y-4 p-1",children:[p.jsx(Nv,{title:"Base Theme",description:"Select the overall look and feel.",contentClassName:"rounded-lg border p-3 shadow-sm bg-card",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(en,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),p.jsx(Kv,{form:n,name:"theme",label:"Theme",options:[{value:"light",label:"Default Light"},{value:"dark",label:"Default Dark"},{value:"system",label:"System"},{value:"TijuLight",label:"Tiju Light"},{value:"TijuDark",label:"Tiju Dark"},{value:"custom",label:"User Custom"}],triggerClassName:"w-[180px]"})]})}),p.jsxs(Nv,{title:"Font & Layout",description:"Customize typography and content width.",contentClassName:"rounded-lg border p-3 shadow-sm bg-card space-y-3",children:[p.jsxs("div",{children:[p.jsx(cw,{form:n,name:"customFontFamily",label:"Custom Font Family",placeholder:"e.g., 'Inter', sans-serif (Leave blank for default)",className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applies only when 'User Custom' theme is selected. Ensure the font is available (system or web font)."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(nc,{form:n,name:"customFontSize",label:`Base Font Size (${n.getFieldValue("customFontSize")}px)`,min:12,max:20,step:1,className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies only when 'User Custom' theme is selected. Affects base text size (Default: 16px)."})]}),p.jsxs("div",{children:[p.jsx(Kv,{form:n,name:"chatMaxWidth",label:"Chat Content Max Width",options:i,triggerClassName:"w-full mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Controls the maximum width of the main chat message area."})]})]}),p.jsxs(Nv,{title:"Code Block Theme",description:"Customize syntax highlighting appearance.",contentClassName:"rounded-lg border p-3 shadow-sm bg-card space-y-3",children:[p.jsx(Kv,{form:n,name:"prismThemeUrl",label:"Code Block Theme",options:iit,triggerClassName:"w-full"}),p.jsx(cw,{form:n,name:"prismThemeUrl",label:"Or paste custom theme URL here...",placeholder:"Or paste custom theme URL here...",type:"url",className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a preset theme or paste a URL to a PrismJS CSS file. Leave blank or select 'Default' to use themes matching light/dark mode."})]}),n.getFieldValue("theme")==="custom"&&p.jsx(Nv,{title:"Custom Theme Colors",description:"Define custom colors. Use valid CSS color values (hex, rgb, oklch, etc.). Leave blank to use default light/dark theme colors.",contentClassName:"rounded-lg border p-3 shadow-sm bg-card",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:s.map(({key:a,label:o})=>{var l;return p.jsx(rit,{label:o,colorKey:a,value:(l=n.getFieldValue("customThemeColors"))==null?void 0:l[a],onChange:(c,u)=>n.setFieldValue(`customThemeColors.${c}`,u===null?"":u)},a)})})}),p.jsx(Ad,{}),p.jsxs("div",{className:"flex justify-between pt-3",children:[p.jsxs(Tt,{variant:"outline",size:"sm",onClick:r,type:"button",children:[p.jsx(aP,{className:"mr-2 h-4 w-4"}),"Reset Theme Settings"]}),p.jsx(Tt,{type:"submit",size:"sm",className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Apply Theme Settings"})]})]})},lit=lt.memo(oit);class cit{constructor(){we(this,"id","core-settings-theme");we(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"theme",title:"Theme",component:lit,order:20})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const uit=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:i,onUpdate:s,fetchStatus:a,isDeleting:o,allAvailableModelsForView:l})=>{var N,M;const[c,u]=T.useState(!0),d=p0(e.type),h=Q2(e.type),m=Ep(e.type),y=a==="fetching"||o,b=o||a==="fetching",v=o||a==="fetching",x=T.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),_=e.apiKeyId?t.some(P=>P.id===e.apiKeyId):!1,S=d&&!_,C=T.useCallback(async(P,L)=>{const O=new Set(e.enabledModels??[]);L?O.add(P):O.delete(P);const V=Array.from(O);try{await s(e.id,{enabledModels:V})}catch(F){De.error("Failed to update model status."),console.error("Failed to save model toggle:",F)}},[e.enabledModels,e.id,s]),E=()=>u(P=>!P),A=((N=e.enabledModels)==null?void 0:N.length)??0,R=l.length;return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{children:p.jsx("span",{className:ft("h-2.5 w-2.5 rounded-full flex-shrink-0 block",a==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),p.jsx(wr,{side:"top",children:a==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),p.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),p.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),S&&p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{children:p.jsx(lc,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),p.jsx(wr,{side:"top",children:p.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),p.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[p.jsx(Mn,{tooltipText:"Edit",onClick:n,disabled:b,"aria-label":"Edit provider",icon:p.jsx(xw,{}),className:"h-8 w-8"}),p.jsx(Mn,{tooltipText:"Delete",onClick:r,disabled:v,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:o?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ho,{})})]})]}),p.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[d&&p.jsxs("div",{children:["API Key:"," ",e.apiKeyId?_?p.jsx("span",{className:"text-green-400",children:((M=t.find(P=>P.id===e.apiKeyId))==null?void 0:M.name)||"Linked (Unnamed Key)"}):p.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):p.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),h&&p.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),p.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?p.jsx("span",{className:"text-green-400",children:"Enabled"}):p.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&p.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),m&&p.jsx("div",{className:"pt-1",children:p.jsxs(Tt,{variant:"outline",size:"sm",onClick:i,disabled:y,className:"text-xs h-7 px-2",children:[a==="fetching"&&p.jsx(Yn,{className:"h-3 w-3 mr-1 animate-spin"}),a==="success"&&p.jsx(Ka,{className:"h-3 w-3 mr-1 text-green-500"}),a==="error"&&p.jsx(lc,{className:"h-3 w-3 mr-1 text-destructive"}),a==="idle"&&p.jsx(jp,{className:"h-3 w-3 mr-1"}),a==="fetching"?"Fetching...":a==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),p.jsxs("div",{className:"space-y-1 pt-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",A," / ",R," enabled)"]}),p.jsx(Mn,{tooltipText:c?"Show Models":"Hide Models",onClick:E,"aria-label":c?"Show model list":"Hide model list",icon:c?p.jsx(yu,{}):p.jsx(hh,{}),className:"h-6 w-6"})]}),!c&&p.jsx(J6,{providerId:e.id,allAvailableModels:l,enabledModelIds:x,onToggleModel:C,isLoading:a==="fetching",disabled:o,listHeightClass:"h-[26rem]"})]})]})},dit=lt.memo(uit),fit=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:i,onCancel:s,onSave:a,onChange:o})=>{const l=T.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),c=T.useCallback((d,h)=>{const m=new Set(t.enabledModels??[]);h?m.add(d):m.delete(d);const y=Array.from(m);o("enabledModels",y)},[t.enabledModels,o]),u=T.useCallback((d,h)=>new Promise(m=>{o(d,h),m(void 0)}),[o]);return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),p.jsx(poe,{initialData:t,onChange:u,onSubmit:a,onCancel:s,apiKeys:n,disabled:i})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),p.jsx(J6,{providerId:e,allAvailableModels:r,enabledModelIds:l,onToggleModel:c,disabled:i,listHeightClass:"h-[calc(100%-8rem)]"})]})]})})},hit=lt.memo(fit),pit=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:i,fetchStatus:s,onSelectModelForDetails:a})=>{const[o,l]=T.useState(!1),[c,u]=T.useState(!1),[d,h]=T.useState(!1),[m,y]=T.useState({name:"placeholder"}),b=Ir(M=>M.getAllAvailableModelDefsForProvider),[v,x]=T.useState([]),_=T.useMemo(()=>[...b(e.id)].sort((P,L)=>(P.name||P.id).localeCompare(L.name||L.id)),[e.id,b]);T.useEffect(()=>{if(o){const M=b(e.id);x([...M].sort((P,L)=>(P.name||P.id).localeCompare(L.name||L.id))),y({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else x([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const S=()=>l(!0),C=()=>{l(!1),y({}),u(!1)},E=T.useCallback(async()=>{u(!0);try{const M=m.enabledModels&&m.enabledModels.length>0?m.enabledModels:null,P={name:m.name,type:m.type,isEnabled:m.isEnabled,apiKeyId:m.apiKeyId,baseURL:m.baseURL,autoFetchModels:m.autoFetchModels,enabledModels:M};Object.keys(P).forEach(L=>{P[L]===void 0&&delete P[L]}),await n(e.id,P),l(!1),y({}),De.success(`Provider "${P.name||e.name}" updated.`)}catch(M){console.error("Failed to save provider update:",M),De.error("Failed to save provider configuration.")}finally{u(!1)}},[m,n,e.id,e.name]),A=T.useCallback((M,P)=>{y(L=>({...L,[M]:P}))},[]),R=T.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){h(!0);try{await r(e.id)}catch(M){console.error("Failed to delete provider:",M),h(!1)}}},[r,e.id,e.name]),N=T.useCallback(async()=>{if(await i(e.id),o){const M=b(e.id);x([...M].sort((P,L)=>(P.name||P.id).localeCompare(L.name||L.id)))}},[i,e.id,o,b]);return p.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?p.jsx(hit,{providerId:e.id,editData:m,apiKeys:t,allAvailableModels:v,isSaving:c,onCancel:C,onSave:E,onChange:A}):p.jsx(dit,{provider:e,apiKeys:t,onEdit:S,onDelete:R,onFetchModels:N,onUpdate:n,fetchStatus:s,isDeleting:d,onSelectModelForDetails:a,allAvailableModelsForView:_})})},mit=lt.memo(pit);function git(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const FT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ly(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function x5(e){return"nodeType"in e}function Ao(e){var t,n;return e?Ly(e)?e:x5(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function w5(e){const{Document:t}=Ao(e);return e instanceof t}function E1(e){return Ly(e)?!1:e instanceof Ao(e).HTMLElement}function Mue(e){return e instanceof Ao(e).SVGElement}function By(e){return e?Ly(e)?e.document:x5(e)?w5(e)?e:E1(e)||Mue(e)?e.ownerDocument:document:document:document}const gu=FT?T.useLayoutEffect:T.useEffect;function _5(e){const t=T.useRef(e);return gu(()=>{t.current=e}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function yit(){const e=T.useRef(null),t=T.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=T.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function mw(e,t){t===void 0&&(t=[e]);const n=T.useRef(e);return gu(()=>{n.current!==e&&(n.current=e)},t),n}function T1(e,t){const n=T.useRef();return T.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Ak(e){const t=_5(e),n=T.useRef(null),r=T.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function Kj(e){const t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}let t3={};function A1(e,t){return T.useMemo(()=>{if(t)return t;const n=t3[e]==null?0:t3[e]+1;return t3[e]=n,e+"-"+n},[e,t])}function jue(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const o=Object.entries(a);for(const[l,c]of o){const u=s[l];u!=null&&(s[l]=u+e*c)}return s},{...t})}}const t0=jue(1),gw=jue(-1);function bit(e){return"clientX"in e&&"clientY"in e}function S5(e){if(!e)return!1;const{KeyboardEvent:t}=Ao(e.target);return t&&e instanceof t}function vit(e){if(!e)return!1;const{TouchEvent:t}=Ao(e.target);return t&&e instanceof t}function Yj(e){if(vit(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return bit(e)?{x:e.clientX,y:e.clientY}:null}const yw=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[yw.Translate.toString(e),yw.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),$V="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function xit(e){return e.matches($V)?e:e.querySelector($V)}const wit={display:"none"};function _it(e){let{id:t,value:n}=e;return lt.createElement("div",{id:t,style:wit},n)}function Sit(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return lt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Cit(){const[e,t]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Pue=T.createContext(null);function kit(e){const t=T.useContext(Pue);T.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Eit(){const[e]=T.useState(()=>new Set),t=T.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[T.useCallback(r=>{let{type:i,event:s}=r;e.forEach(a=>{var o;return(o=a[i])==null?void 0:o.call(a,s)})},[e]),t]}const Tit={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ait={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Rit(e){let{announcements:t=Ait,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Tit}=e;const{announce:s,announcement:a}=Cit(),o=A1("DndLiveRegion"),[l,c]=T.useState(!1);if(T.useEffect(()=>{c(!0)},[]),kit(T.useMemo(()=>({onDragStart(d){let{active:h}=d;s(t.onDragStart({active:h}))},onDragMove(d){let{active:h,over:m}=d;t.onDragMove&&s(t.onDragMove({active:h,over:m}))},onDragOver(d){let{active:h,over:m}=d;s(t.onDragOver({active:h,over:m}))},onDragEnd(d){let{active:h,over:m}=d;s(t.onDragEnd({active:h,over:m}))},onDragCancel(d){let{active:h,over:m}=d;s(t.onDragCancel({active:h,over:m}))}}),[s,t])),!l)return null;const u=lt.createElement(lt.Fragment,null,lt.createElement(_it,{id:r,value:i.draggable}),lt.createElement(Sit,{id:o,announcement:a}));return n?Vo.createPortal(u,n):u}var Is;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Is||(Is={}));function Rk(){}function zV(e,t){return T.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Iit(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const mc=Object.freeze({x:0,y:0});function Oue(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Due(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Nit(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function UV(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function Fue(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function qV(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Mit=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=qV(t,t.left,t.top),s=[];for(const a of r){const{id:o}=a,l=n.get(o);if(l){const c=Oue(qV(l),i);s.push({id:o,data:{droppableContainer:a,value:c}})}}return s.sort(Due)},jit=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=UV(t),s=[];for(const a of r){const{id:o}=a,l=n.get(o);if(l){const c=UV(l),u=i.reduce((h,m,y)=>h+Oue(c[y],m),0),d=Number((u/4).toFixed(4));s.push({id:o,data:{droppableContainer:a,value:d}})}}return s.sort(Due)};function Pit(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=i-r,o=s-n;if(r<i&&n<s){const l=t.width*t.height,c=e.width*e.height,u=a*o,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const Oit=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:a}=s,o=n.get(a);if(o){const l=Pit(o,t);l>0&&i.push({id:a,data:{droppableContainer:s,value:l}})}}return i.sort(Nit)};function Dit(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Lue(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:mc}function Fit(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,o)=>({...a,top:a.top+e*o.y,bottom:a.bottom+e*o.y,left:a.left+e*o.x,right:a.right+e*o.x}),{...n})}}const Lit=Fit(1);function Bit(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function $it(e,t,n){const r=Bit(t);if(!r)return e;const{scaleX:i,scaleY:s,x:a,y:o}=r,l=e.left-a-(1-i)*parseFloat(n),c=e.top-o-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?e.width/i:e.width,d=s?e.height/s:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const zit={ignoreTransform:!1};function $y(e,t){t===void 0&&(t=zit);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:u}=Ao(e).getComputedStyle(e);c&&(n=$it(n,c,u))}const{top:r,left:i,width:s,height:a,bottom:o,right:l}=n;return{top:r,left:i,width:s,height:a,bottom:o,right:l}}function VV(e){return $y(e,{ignoreTransform:!0})}function Uit(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function qit(e,t){return t===void 0&&(t=Ao(e).getComputedStyle(e)),t.position==="fixed"}function Vit(e,t){t===void 0&&(t=Ao(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function LT(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(w5(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!E1(i)||Mue(i)||n.includes(i))return n;const s=Ao(e).getComputedStyle(i);return i!==e&&Vit(i,s)&&n.push(i),qit(i,s)?n:r(i.parentNode)}return e?r(e):n}function Bue(e){const[t]=LT(e,1);return t??null}function n3(e){return!FT||!e?null:Ly(e)?e:x5(e)?w5(e)||e===By(e).scrollingElement?window:E1(e)?e:null:null}function $ue(e){return Ly(e)?e.scrollX:e.scrollLeft}function zue(e){return Ly(e)?e.scrollY:e.scrollTop}function Zj(e){return{x:$ue(e),y:zue(e)}}var Gs;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Gs||(Gs={}));function Uue(e){return!FT||!e?!1:e===document.scrollingElement}function que(e){const t={x:0,y:0},n=Uue(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:o,maxScroll:r,minScroll:t}}const Hit={x:.2,y:.2};function Wit(e,t,n,r,i){let{top:s,left:a,right:o,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=Hit);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=que(e),m={x:0,y:0},y={x:0,y:0},b={height:t.height*i.y,width:t.width*i.x};return!c&&s<=t.top+b.height?(m.y=Gs.Backward,y.y=r*Math.abs((t.top+b.height-s)/b.height)):!u&&l>=t.bottom-b.height&&(m.y=Gs.Forward,y.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!h&&o>=t.right-b.width?(m.x=Gs.Forward,y.x=r*Math.abs((t.right-b.width-o)/b.width)):!d&&a<=t.left+b.width&&(m.x=Gs.Backward,y.x=r*Math.abs((t.left+b.width-a)/b.width)),{direction:m,speed:y}}function Git(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Vue(e){return e.reduce((t,n)=>t0(t,Zj(n)),mc)}function Kit(e){return e.reduce((t,n)=>t+$ue(n),0)}function Yit(e){return e.reduce((t,n)=>t+zue(n),0)}function Zit(e,t){if(t===void 0&&(t=$y),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);Bue(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Xit=[["x",["left","right"],Kit],["y",["top","bottom"],Yit]];class C5{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=LT(n),i=Vue(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,o]of Xit)for(const l of a)Object.defineProperty(this,l,{get:()=>{const c=o(r),u=i[s]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Yv{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Jit(e){const{EventTarget:t}=Ao(e);return e instanceof t?e:By(e)}function r3(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var xl;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(xl||(xl={}));function HV(e){e.preventDefault()}function Qit(e){e.stopPropagation()}var Br;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Br||(Br={}));const Hue={start:[Br.Space,Br.Enter],cancel:[Br.Esc],end:[Br.Space,Br.Enter,Br.Tab]},est=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Br.Right:return{...n,x:n.x+25};case Br.Left:return{...n,x:n.x-25};case Br.Down:return{...n,y:n.y+25};case Br.Up:return{...n,y:n.y-25}}};class k5{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Yv(By(n)),this.windowListeners=new Yv(Ao(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xl.Resize,this.handleCancel),this.windowListeners.add(xl.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(xl.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Zit(r),n(mc)}handleKeyDown(t){if(S5(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=Hue,coordinateGetter:a=est,scrollBehavior:o="smooth"}=i,{code:l}=t;if(s.end.includes(l)){this.handleEnd(t);return}if(s.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:mc;this.referenceCoordinates||(this.referenceCoordinates=u);const d=a(t,{active:n,context:r.current,currentCoordinates:u});if(d){const h=gw(d,u),m={x:0,y:0},{scrollableAncestors:y}=r.current;for(const b of y){const v=t.code,{isTop:x,isRight:_,isLeft:S,isBottom:C,maxScroll:E,minScroll:A}=que(b),R=Git(b),N={x:Math.min(v===Br.Right?R.right-R.width/2:R.right,Math.max(v===Br.Right?R.left:R.left+R.width/2,d.x)),y:Math.min(v===Br.Down?R.bottom-R.height/2:R.bottom,Math.max(v===Br.Down?R.top:R.top+R.height/2,d.y))},M=v===Br.Right&&!_||v===Br.Left&&!S,P=v===Br.Down&&!C||v===Br.Up&&!x;if(M&&N.x!==d.x){const L=b.scrollLeft+h.x,O=v===Br.Right&&L<=E.x||v===Br.Left&&L>=A.x;if(O&&!h.y){b.scrollTo({left:L,behavior:o});return}O?m.x=b.scrollLeft-L:m.x=v===Br.Right?b.scrollLeft-E.x:b.scrollLeft-A.x,m.x&&b.scrollBy({left:-m.x,behavior:o});break}else if(P&&N.y!==d.y){const L=b.scrollTop+h.y,O=v===Br.Down&&L<=E.y||v===Br.Up&&L>=A.y;if(O&&!h.x){b.scrollTo({top:L,behavior:o});return}O?m.y=b.scrollTop-L:m.y=v===Br.Down?b.scrollTop-E.y:b.scrollTop-A.y,m.y&&b.scrollBy({top:-m.y,behavior:o});break}}this.handleMove(t,t0(gw(d,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}k5.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Hue,onActivation:i}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const o=s.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function WV(e){return!!(e&&"distance"in e)}function GV(e){return!!(e&&"delay"in e)}class E5{constructor(t,n,r){var i;r===void 0&&(r=Jit(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=By(a),this.documentListeners=new Yv(this.document),this.listeners=new Yv(r),this.windowListeners=new Yv(Ao(a)),this.initialCoordinates=(i=Yj(s))!=null?i:mc,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(xl.Resize,this.handleCancel),this.windowListeners.add(xl.DragStart,HV),this.windowListeners.add(xl.VisibilityChange,this.handleCancel),this.windowListeners.add(xl.ContextMenu,HV),this.documentListeners.add(xl.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(GV(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(WV(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(xl.Click,Qit,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xl.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:o}}=s;if(!i)return;const l=(n=Yj(t))!=null?n:mc,c=gw(i,l);if(!r&&o){if(WV(o)){if(o.tolerance!=null&&r3(c,o.tolerance))return this.handleCancel();if(r3(c,o.distance))return this.handleStart()}if(GV(o)&&r3(c,o.tolerance))return this.handleCancel();this.handlePending(o,c);return}t.cancelable&&t.preventDefault(),a(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Br.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const tst={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class T5 extends E5{constructor(t){const{event:n}=t,r=By(n.target);super(t,tst,r)}}T5.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const nst={move:{name:"mousemove"},end:{name:"mouseup"}};var Xj;(function(e){e[e.RightClick=2]="RightClick"})(Xj||(Xj={}));class rst extends E5{constructor(t){super(t,nst,By(t.event.target))}}rst.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Xj.RightClick?!1:(r==null||r({event:n}),!0)}}];const i3={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ist extends E5{constructor(t){super(t,i3)}static setup(){return window.addEventListener(i3.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(i3.move.name,t)};function t(){}}}ist.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Zv;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Zv||(Zv={}));var Ik;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ik||(Ik={}));function sst(e){let{acceleration:t,activator:n=Zv.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:o=Ik.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:h}=e;const m=ost({delta:d,disabled:!s}),[y,b]=yit(),v=T.useRef({x:0,y:0}),x=T.useRef({x:0,y:0}),_=T.useMemo(()=>{switch(n){case Zv.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Zv.DraggableRect:return i}},[n,i,l]),S=T.useRef(null),C=T.useCallback(()=>{const A=S.current;if(!A)return;const R=v.current.x*x.current.x,N=v.current.y*x.current.y;A.scrollBy(R,N)},[]),E=T.useMemo(()=>o===Ik.TreeOrder?[...c].reverse():c,[o,c]);T.useEffect(()=>{if(!s||!c.length||!_){b();return}for(const A of E){if((r==null?void 0:r(A))===!1)continue;const R=c.indexOf(A),N=u[R];if(!N)continue;const{direction:M,speed:P}=Wit(A,N,_,t,h);for(const L of["x","y"])m[L][M[L]]||(P[L]=0,M[L]=0);if(P.x>0||P.y>0){b(),S.current=A,y(C,a),v.current=P,x.current=M;return}}v.current={x:0,y:0},x.current={x:0,y:0},b()},[t,C,r,b,s,a,JSON.stringify(_),JSON.stringify(m),y,c,E,u,JSON.stringify(h)])}const ast={x:{[Gs.Backward]:!1,[Gs.Forward]:!1},y:{[Gs.Backward]:!1,[Gs.Forward]:!1}};function ost(e){let{delta:t,disabled:n}=e;const r=Kj(t);return T1(i=>{if(n||!r||!i)return ast;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Gs.Backward]:i.x[Gs.Backward]||s.x===-1,[Gs.Forward]:i.x[Gs.Forward]||s.x===1},y:{[Gs.Backward]:i.y[Gs.Backward]||s.y===-1,[Gs.Forward]:i.y[Gs.Forward]||s.y===1}}},[n,t,r])}function lst(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return T1(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function cst(e,t){return T.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var bw;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(bw||(bw={}));var Jj;(function(e){e.Optimized="optimized"})(Jj||(Jj={}));const KV=new Map;function ust(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,a]=T.useState(null),{frequency:o,measure:l,strategy:c}=i,u=T.useRef(e),d=v(),h=mw(d),m=T.useCallback(function(x){x===void 0&&(x=[]),!h.current&&a(_=>_===null?x:_.concat(x.filter(S=>!_.includes(S))))},[h]),y=T.useRef(null),b=T1(x=>{if(d&&!n)return KV;if(!x||x===KV||u.current!==e||s!=null){const _=new Map;for(let S of e){if(!S)continue;if(s&&s.length>0&&!s.includes(S.id)&&S.rect.current){_.set(S.id,S.rect.current);continue}const C=S.node.current,E=C?new C5(l(C),C):null;S.rect.current=E,E&&_.set(S.id,E)}return _}return x},[e,s,n,d,l]);return T.useEffect(()=>{u.current=e},[e]),T.useEffect(()=>{d||m()},[n,d]),T.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),T.useEffect(()=>{d||typeof o!="number"||y.current!==null||(y.current=setTimeout(()=>{m(),y.current=null},o))},[o,d,m,...r]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:s!=null};function v(){switch(c){case bw.Always:return!1;case bw.BeforeDragging:return n;default:return!n}}}function Wue(e,t){return T1(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function dst(e,t){return Wue(e,t)}function fst(e){let{callback:t,disabled:n}=e;const r=_5(t),i=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return T.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function BT(e){let{callback:t,disabled:n}=e;const r=_5(t),i=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return T.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function hst(e){return new C5($y(e),e)}function YV(e,t,n){t===void 0&&(t=hst);const[r,i]=T.useState(null);function s(){i(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=t(e);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const a=fst({callback(l){if(e)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(e)){s();break}}}}),o=BT({callback:s});return gu(()=>{s(),e?(o==null||o.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),a==null||a.disconnect())},[e]),r}function pst(e){const t=Wue(e);return Lue(e,t)}const ZV=[];function mst(e){const t=T.useRef(e),n=T1(r=>e?r&&r!==ZV&&e&&t.current&&e.parentNode===t.current.parentNode?r:LT(e):ZV,[e]);return T.useEffect(()=>{t.current=e},[e]),n}function gst(e){const[t,n]=T.useState(null),r=T.useRef(e),i=T.useCallback(s=>{const a=n3(s.target);a&&n(o=>o?(o.set(a,Zj(a)),new Map(o)):null)},[]);return T.useEffect(()=>{const s=r.current;if(e!==s){a(s);const o=e.map(l=>{const c=n3(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,Zj(c)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=e}return()=>{a(e),a(s)};function a(o){o.forEach(l=>{const c=n3(l);c==null||c.removeEventListener("scroll",i)})}},[i,e]),T.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>t0(s,a),mc):Vue(e):mc,[e,t])}function XV(e,t){t===void 0&&(t=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},t),T.useEffect(()=>{const r=e!==mc;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?gw(e,n.current):mc}function yst(e){T.useEffect(()=>{if(!FT)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function bst(e,t){return T.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,t)},n},{}),[e,t])}function Gue(e){return T.useMemo(()=>e?Uit(e):null,[e])}const JV=[];function vst(e,t){t===void 0&&(t=$y);const[n]=e,r=Gue(n?Ao(n):null),[i,s]=T.useState(JV);function a(){s(()=>e.length?e.map(l=>Uue(l)?r:new C5(t(l),l)):JV)}const o=BT({callback:a});return gu(()=>{o==null||o.disconnect(),a(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),i}function xst(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return E1(t)?t:e}function wst(e){let{measure:t}=e;const[n,r]=T.useState(null),i=T.useCallback(c=>{for(const{target:u}of c)if(E1(u)){r(d=>{const h=t(u);return d?{...d,width:h.width,height:h.height}:h});break}},[t]),s=BT({callback:i}),a=T.useCallback(c=>{const u=xst(c);s==null||s.disconnect(),u&&(s==null||s.observe(u)),r(u?t(u):null)},[t,s]),[o,l]=Ak(a);return T.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const _st=[{sensor:T5,options:{}},{sensor:k5,options:{}}],Sst={current:{}},y2={draggable:{measure:VV},droppable:{measure:VV,strategy:bw.WhileDragging,frequency:Jj.Optimized},dragOverlay:{measure:$y}};class Xv extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Cst={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xv,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Rk},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:y2,measureDroppableContainers:Rk,windowRect:null,measuringScheduled:!1},kst={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Rk,draggableNodes:new Map,over:null,measureDroppableContainers:Rk},$T=T.createContext(kst),Kue=T.createContext(Cst);function Est(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xv}}}function Tst(e,t){switch(t.type){case Is.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Is.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Is.DragEnd:case Is.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Is.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Xv(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Is.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Xv(e.droppable.containers);return a.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case Is.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Xv(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Ast(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=T.useContext($T),s=Kj(r),a=Kj(n==null?void 0:n.id);return T.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!S5(s)||document.activeElement===s.target)return;const o=i.get(a);if(!o)return;const{activatorNode:l,node:c}=o;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=xit(u);if(d){d.focus();break}}})}},[r,t,i,a,s]),null}function Rst(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function Ist(e){return T.useMemo(()=>({draggable:{...y2.draggable,...e==null?void 0:e.draggable},droppable:{...y2.droppable,...e==null?void 0:e.droppable},dragOverlay:{...y2.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Nst(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=T.useRef(!1),{x:a,y:o}=typeof i=="boolean"?{x:i,y:i}:i;gu(()=>{if(!a&&!o||!t){s.current=!1;return}if(s.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=Lue(u,r);if(a||(d.x=0),o||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=Bue(c);h&&h.scrollBy({top:d.y,left:d.x})}},[t,a,o,r,n])}const Yue=T.createContext({...mc,scaleX:1,scaleY:1});var jf;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(jf||(jf={}));const Mst=T.memo(function(t){var n,r,i,s;let{id:a,accessibility:o,autoScroll:l=!0,children:c,sensors:u=_st,collisionDetection:d=Oit,measuring:h,modifiers:m,...y}=t;const b=T.useReducer(Tst,void 0,Est),[v,x]=b,[_,S]=Eit(),[C,E]=T.useState(jf.Uninitialized),A=C===jf.Initialized,{draggable:{active:R,nodes:N,translate:M},droppable:{containers:P}}=v,L=R!=null?N.get(R):null,O=T.useRef({initial:null,translated:null}),V=T.useMemo(()=>{var it;return R!=null?{id:R,data:(it=L==null?void 0:L.data)!=null?it:Sst,rect:O}:null},[R,L]),F=T.useRef(null),[J,U]=T.useState(null),[G,$]=T.useState(null),ne=mw(y,Object.values(y)),H=A1("DndDescribedBy",a),te=T.useMemo(()=>P.getEnabled(),[P]),ee=Ist(h),{droppableRects:se,measureDroppableContainers:he,measuringScheduled:ce}=ust(te,{dragging:A,dependencies:[M.x,M.y],config:ee.droppable}),Me=lst(N,R),je=T.useMemo(()=>G?Yj(G):null,[G]),Ne=Ve(),Ce=dst(Me,ee.draggable.measure);Nst({activeNode:R!=null?N.get(R):null,config:Ne.layoutShiftCompensation,initialRect:Ce,measure:ee.draggable.measure});const Ue=YV(Me,ee.draggable.measure,Ce),et=YV(Me?Me.parentElement:null),qe=T.useRef({activatorEvent:null,active:null,activeNode:Me,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Re=P.getNodeFor((n=qe.current.over)==null?void 0:n.id),K=wst({measure:ee.dragOverlay.measure}),ge=(r=K.nodeRef.current)!=null?r:Me,Ae=A?(i=K.rect)!=null?i:Ue:null,le=!!(K.nodeRef.current&&K.rect),oe=pst(le?null:Ue),ie=Gue(ge?Ao(ge):null),Ee=mst(A?Re??Me:null),Be=vst(Ee),ke=Rst(m,{transform:{x:M.x-oe.x,y:M.y-oe.y,scaleX:1,scaleY:1},activatorEvent:G,active:V,activeNodeRect:Ue,containerNodeRect:et,draggingNodeRect:Ae,over:qe.current.over,overlayNodeRect:K.rect,scrollableAncestors:Ee,scrollableAncestorRects:Be,windowRect:ie}),ct=je?t0(je,M):null,It=gst(Ee),ht=XV(It),Ot=XV(It,[Ue]),zt=t0(ke,ht),Bt=Ae?Lit(Ae,ke):null,rn=V&&Bt?d({active:V,collisionRect:Bt,droppableRects:se,droppableContainers:te,pointerCoordinates:ct}):null,ve=Fue(rn,"id"),[D,Z]=T.useState(null),pe=le?ke:t0(ke,Ot),Oe=Dit(pe,(s=D==null?void 0:D.rect)!=null?s:null,Ue),xe=T.useRef(null),Ie=T.useCallback((it,be)=>{let{sensor:_e,options:ze}=be;if(F.current==null)return;const Rt=N.get(F.current);if(!Rt)return;const me=it.nativeEvent,Y=new _e({active:F.current,activeNode:Rt,event:me,options:ze,context:qe,onAbort(X){if(!N.get(X))return;const{onDragAbort:Pe}=ne.current,We={id:X};Pe==null||Pe(We),_({type:"onDragAbort",event:We})},onPending(X,ye,Pe,We){if(!N.get(X))return;const{onDragPending:Qt}=ne.current,Fn={id:X,constraint:ye,initialCoordinates:Pe,offset:We};Qt==null||Qt(Fn),_({type:"onDragPending",event:Fn})},onStart(X){const ye=F.current;if(ye==null)return;const Pe=N.get(ye);if(!Pe)return;const{onDragStart:We}=ne.current,xt={activatorEvent:me,active:{id:ye,data:Pe.data,rect:O}};Vo.unstable_batchedUpdates(()=>{We==null||We(xt),E(jf.Initializing),x({type:Is.DragStart,initialCoordinates:X,active:ye}),_({type:"onDragStart",event:xt}),U(xe.current),$(me)})},onMove(X){x({type:Is.DragMove,coordinates:X})},onEnd:W(Is.DragEnd),onCancel:W(Is.DragCancel)});xe.current=Y;function W(X){return async function(){const{active:Pe,collisions:We,over:xt,scrollAdjustedTranslate:Qt}=qe.current;let Fn=null;if(Pe&&Qt){const{cancelDrop:Zt}=ne.current;Fn={activatorEvent:me,active:Pe,collisions:We,delta:Qt,over:xt},X===Is.DragEnd&&typeof Zt=="function"&&await Promise.resolve(Zt(Fn))&&(X=Is.DragCancel)}F.current=null,Vo.unstable_batchedUpdates(()=>{x({type:X}),E(jf.Uninitialized),Z(null),U(null),$(null),xe.current=null;const Zt=X===Is.DragEnd?"onDragEnd":"onDragCancel";if(Fn){const tn=ne.current[Zt];tn==null||tn(Fn),_({type:Zt,event:Fn})}})}}},[N]),de=T.useCallback((it,be)=>(_e,ze)=>{const Rt=_e.nativeEvent,me=N.get(ze);if(F.current!==null||!me||Rt.dndKit||Rt.defaultPrevented)return;const Y={active:me};it(_e,be.options,Y)===!0&&(Rt.dndKit={capturedBy:be.sensor},F.current=ze,Ie(_e,be))},[N,Ie]),bt=cst(u,de);yst(u),gu(()=>{Ue&&C===jf.Initializing&&E(jf.Initialized)},[Ue,C]),T.useEffect(()=>{const{onDragMove:it}=ne.current,{active:be,activatorEvent:_e,collisions:ze,over:Rt}=qe.current;if(!be||!_e)return;const me={active:be,activatorEvent:_e,collisions:ze,delta:{x:zt.x,y:zt.y},over:Rt};Vo.unstable_batchedUpdates(()=>{it==null||it(me),_({type:"onDragMove",event:me})})},[zt.x,zt.y]),T.useEffect(()=>{const{active:it,activatorEvent:be,collisions:_e,droppableContainers:ze,scrollAdjustedTranslate:Rt}=qe.current;if(!it||F.current==null||!be||!Rt)return;const{onDragOver:me}=ne.current,Y=ze.get(ve),W=Y&&Y.rect.current?{id:Y.id,rect:Y.rect.current,data:Y.data,disabled:Y.disabled}:null,X={active:it,activatorEvent:be,collisions:_e,delta:{x:Rt.x,y:Rt.y},over:W};Vo.unstable_batchedUpdates(()=>{Z(W),me==null||me(X),_({type:"onDragOver",event:X})})},[ve]),gu(()=>{qe.current={activatorEvent:G,active:V,activeNode:Me,collisionRect:Bt,collisions:rn,droppableRects:se,draggableNodes:N,draggingNode:ge,draggingNodeRect:Ae,droppableContainers:P,over:D,scrollableAncestors:Ee,scrollAdjustedTranslate:zt},O.current={initial:Ae,translated:Bt}},[V,Me,rn,Bt,N,ge,Ae,se,P,D,Ee,zt]),sst({...Ne,delta:M,draggingRect:Bt,pointerCoordinates:ct,scrollableAncestors:Ee,scrollableAncestorRects:Be});const St=T.useMemo(()=>({active:V,activeNode:Me,activeNodeRect:Ue,activatorEvent:G,collisions:rn,containerNodeRect:et,dragOverlay:K,draggableNodes:N,droppableContainers:P,droppableRects:se,over:D,measureDroppableContainers:he,scrollableAncestors:Ee,scrollableAncestorRects:Be,measuringConfiguration:ee,measuringScheduled:ce,windowRect:ie}),[V,Me,Ue,G,rn,et,K,N,P,se,D,he,Ee,Be,ee,ce,ie]),z=T.useMemo(()=>({activatorEvent:G,activators:bt,active:V,activeNodeRect:Ue,ariaDescribedById:{draggable:H},dispatch:x,draggableNodes:N,over:D,measureDroppableContainers:he}),[G,bt,V,Ue,x,H,N,D,he]);return lt.createElement(Pue.Provider,{value:S},lt.createElement($T.Provider,{value:z},lt.createElement(Kue.Provider,{value:St},lt.createElement(Yue.Provider,{value:Oe},c)),lt.createElement(Ast,{disabled:(o==null?void 0:o.restoreFocus)===!1})),lt.createElement(Rit,{...o,hiddenTextDescribedById:H}));function Ve(){const it=(J==null?void 0:J.autoScrollEnabled)===!1,be=typeof l=="object"?l.enabled===!1:l===!1,_e=A&&!it&&!be;return typeof l=="object"?{...l,enabled:_e}:{enabled:_e}}}),jst=T.createContext(null),QV="button",Pst="Draggable";function Ost(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=A1(Pst),{activators:a,activatorEvent:o,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:h}=T.useContext($T),{role:m=QV,roleDescription:y="draggable",tabIndex:b=0}=i??{},v=(l==null?void 0:l.id)===t,x=T.useContext(v?Yue:jst),[_,S]=Ak(),[C,E]=Ak(),A=bst(a,t),R=mw(n);gu(()=>(d.set(t,{id:t,key:s,node:_,activatorNode:C,data:R}),()=>{const M=d.get(t);M&&M.key===s&&d.delete(t)}),[d,t]);const N=T.useMemo(()=>({role:m,tabIndex:b,"aria-disabled":r,"aria-pressed":v&&m===QV?!0:void 0,"aria-roledescription":y,"aria-describedby":u.draggable}),[r,m,b,v,y,u.draggable]);return{active:l,activatorEvent:o,activeNodeRect:c,attributes:N,isDragging:v,listeners:r?void 0:A,node:_,over:h,setNodeRef:S,setActivatorNodeRef:E,transform:x}}function Dst(){return T.useContext(Kue)}const Fst="Droppable",Lst={timeout:25};function Bst(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=A1(Fst),{active:a,dispatch:o,over:l,measureDroppableContainers:c}=T.useContext($T),u=T.useRef({disabled:n}),d=T.useRef(!1),h=T.useRef(null),m=T.useRef(null),{disabled:y,updateMeasurementsFor:b,timeout:v}={...Lst,...i},x=mw(b??r),_=T.useCallback(()=>{if(!d.current){d.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),m.current=null},v)},[v]),S=BT({callback:_,disabled:y||!a}),C=T.useCallback((N,M)=>{S&&(M&&(S.unobserve(M),d.current=!1),N&&S.observe(N))},[S]),[E,A]=Ak(C),R=mw(t);return T.useEffect(()=>{!S||!E.current||(S.disconnect(),d.current=!1,S.observe(E.current))},[E,S]),T.useEffect(()=>(o({type:Is.RegisterDroppable,element:{id:r,key:s,disabled:n,node:E,rect:h,data:R}}),()=>o({type:Is.UnregisterDroppable,key:s,id:r})),[r]),T.useEffect(()=>{n!==u.current.disabled&&(o({type:Is.SetDroppableDisabled,id:r,key:s,disabled:n}),u.current.disabled=n)},[r,s,n,o]),{active:a,rect:h,isOver:(l==null?void 0:l.id)===r,node:E,over:l,setNodeRef:A}}function Jv(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function $st(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function DS(e){return e!==null&&e>=0}function zst(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ust(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Zue=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=Jv(t,r,n),a=t[i],o=s[i];return!o||!a?null:{x:o.left-a.left,y:o.top-a.top,scaleX:o.width/a.width,scaleY:o.height/a.height}},FS={scaleX:1,scaleY:1},qst=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:a}=e;const o=(t=s[n])!=null?t:r;if(!o)return null;if(i===n){const c=s[a];return c?{x:0,y:n<a?c.top+c.height-(o.top+o.height):c.top-o.top,...FS}:null}const l=Vst(s,i,n);return i>n&&i<=a?{x:0,y:-o.height-l,...FS}:i<n&&i>=a?{x:0,y:o.height+l,...FS}:{x:0,y:0,...FS}};function Vst(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const Xue="Sortable",Jue=lt.createContext({activeIndex:-1,containerId:Xue,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Zue,disabled:{draggable:!1,droppable:!1}});function Hst(e){let{children:t,id:n,items:r,strategy:i=Zue,disabled:s=!1}=e;const{active:a,dragOverlay:o,droppableRects:l,over:c,measureDroppableContainers:u}=Dst(),d=A1(Xue,n),h=o.rect!==null,m=T.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),y=a!=null,b=a?m.indexOf(a.id):-1,v=c?m.indexOf(c.id):-1,x=T.useRef(m),_=!zst(m,x.current),S=v!==-1&&b===-1||_,C=Ust(s);gu(()=>{_&&y&&u(m)},[_,m,y,u]),T.useEffect(()=>{x.current=m},[m]);const E=T.useMemo(()=>({activeIndex:b,containerId:d,disabled:C,disableTransforms:S,items:m,overIndex:v,useDragOverlay:h,sortedRects:$st(m,l),strategy:i}),[b,d,C.draggable,C.droppable,S,m,v,l,h,i]);return lt.createElement(Jue.Provider,{value:E},t)}const Wst=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return Jv(n,r,i).indexOf(t)},Gst=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:a,previousItems:o,previousContainerId:l,transition:c}=e;return!c||!r||o!==s&&i===a?!1:n?!0:a!==i&&t===l},Kst={duration:200,easing:"ease"},Que="transform",Yst=yw.Transition.toString({property:Que,duration:0,easing:"linear"}),Zst={roleDescription:"sortable"};function Xst(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,a]=T.useState(null),o=T.useRef(n);return gu(()=>{if(!t&&n!==o.current&&r.current){const l=i.current;if(l){const c=$y(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&a(u)}}n!==o.current&&(o.current=n)},[t,n,r,i]),T.useEffect(()=>{s&&a(null)},[s]),s}function Jst(e){let{animateLayoutChanges:t=Gst,attributes:n,disabled:r,data:i,getNewIndex:s=Wst,id:a,strategy:o,resizeObserverConfig:l,transition:c=Kst}=e;const{items:u,containerId:d,activeIndex:h,disabled:m,disableTransforms:y,sortedRects:b,overIndex:v,useDragOverlay:x,strategy:_}=T.useContext(Jue),S=Qst(r,m),C=u.indexOf(a),E=T.useMemo(()=>({sortable:{containerId:d,index:C,items:u},...i}),[d,i,C,u]),A=T.useMemo(()=>u.slice(u.indexOf(a)),[u,a]),{rect:R,node:N,isOver:M,setNodeRef:P}=Bst({id:a,data:E,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...l}}),{active:L,activatorEvent:O,activeNodeRect:V,attributes:F,setNodeRef:J,listeners:U,isDragging:G,over:$,setActivatorNodeRef:ne,transform:H}=Ost({id:a,data:E,attributes:{...Zst,...n},disabled:S.draggable}),te=git(P,J),ee=!!L,se=ee&&!y&&DS(h)&&DS(v),he=!x&&G,ce=he&&se?H:null,je=se?ce??(o??_)({rects:b,activeNodeRect:V,activeIndex:h,overIndex:v,index:C}):null,Ne=DS(h)&&DS(v)?s({id:a,items:u,activeIndex:h,overIndex:v}):C,Ce=L==null?void 0:L.id,Ue=T.useRef({activeId:Ce,items:u,newIndex:Ne,containerId:d}),et=u!==Ue.current.items,qe=t({active:L,containerId:d,isDragging:G,isSorting:ee,id:a,index:C,items:u,newIndex:Ue.current.newIndex,previousItems:Ue.current.items,previousContainerId:Ue.current.containerId,transition:c,wasDragging:Ue.current.activeId!=null}),Re=Xst({disabled:!qe,index:C,node:N,rect:R});return T.useEffect(()=>{ee&&Ue.current.newIndex!==Ne&&(Ue.current.newIndex=Ne),d!==Ue.current.containerId&&(Ue.current.containerId=d),u!==Ue.current.items&&(Ue.current.items=u)},[ee,Ne,d,u]),T.useEffect(()=>{if(Ce===Ue.current.activeId)return;if(Ce!=null&&Ue.current.activeId==null){Ue.current.activeId=Ce;return}const ge=setTimeout(()=>{Ue.current.activeId=Ce},50);return()=>clearTimeout(ge)},[Ce]),{active:L,activeIndex:h,attributes:F,data:E,rect:R,index:C,newIndex:Ne,items:u,isOver:M,isSorting:ee,isDragging:G,listeners:U,node:N,overIndex:v,over:$,setNodeRef:te,setActivatorNodeRef:ne,setDroppableNodeRef:P,setDraggableNodeRef:J,transform:Re??je,transition:K()};function K(){if(Re||et&&Ue.current.newIndex===C)return Yst;if(!(he&&!S5(O)||!c)&&(ee||qe))return yw.Transition.toString({...c,property:Que})}}function Qst(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Nk(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const eat=[Br.Down,Br.Right,Br.Up,Br.Left],tat=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:a,scrollableAncestors:o}}=t;if(eat.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const h=i.get(d.id);if(h)switch(e.code){case Br.Down:r.top<h.top&&l.push(d);break;case Br.Up:r.top>h.top&&l.push(d);break;case Br.Left:r.left>h.left&&l.push(d);break;case Br.Right:r.left<h.left&&l.push(d);break}});const c=jit({collisionRect:r,droppableRects:i,droppableContainers:l});let u=Fue(c,"id");if(u===(a==null?void 0:a.id)&&c.length>1&&(u=c[1].id),u!=null){const d=s.get(n.id),h=s.get(u),m=h?i.get(h.id):null,y=h==null?void 0:h.node.current;if(y&&m&&d&&h){const v=LT(y).some((A,R)=>o[R]!==A),x=ede(d,h),_=nat(d,h),S=v||!x?{x:0,y:0}:{x:_?r.width-m.width:0,y:_?r.height-m.height:0},C={x:m.left,y:m.top};return S.x&&S.y?C:gw(C,S)}}}};function ede(e,t){return!Nk(e)||!Nk(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function nat(e,t){return!Nk(e)||!Nk(t)||!ede(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const rat=({id:e,modelDetails:t,buttonsDisabled:n,onMoveToTop:r,onMoveUp:i,onMoveDown:s,isFirst:a,isLast:o})=>{var E,A,R;const{attributes:l,listeners:c,setNodeRef:u,transform:d,transition:h,isDragging:m}=Jst({id:e,disabled:!1}),y={transform:yw.Transform.toString(d),transition:h,zIndex:m?10:void 0},b=new Set(((E=t.metadataSummary)==null?void 0:E.supported_parameters)??[]),v=new Set(((A=t.metadataSummary)==null?void 0:A.input_modalities)??[]),x=b.has("reasoning"),_=b.has("web_search")||b.has("web_search_options"),S=b.has("tools"),C=Array.from(v).some(N=>N!=="text");return p.jsxs("div",{ref:u,style:y,className:ft("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",m&&"shadow-lg border-primary bg-card","cursor-grab active:cursor-grabbing"),"aria-label":`Drag to reorder model ${t.name}`,children:[p.jsx("button",{...l,...c,type:"button",className:ft("p-1 flex-shrink-0","hover:text-foreground"),"aria-hidden":"true",tabIndex:-1,children:p.jsx(Fpe,{className:"h-5 w-5 text-muted-foreground"})}),p.jsxs("div",{className:"flex-grow min-w-0",children:[p.jsxs(en,{className:ft("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:[t.name," ",p.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.providerName,")"]})]}),p.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[x&&p.jsx(fh,{className:"h-3 w-3 text-blue-500"}),_&&p.jsx(Aa,{className:"h-3 w-3 text-green-500"}),S&&p.jsx(Pp,{className:"h-3 w-3 text-orange-500"}),C&&p.jsx(Mp,{className:"h-3 w-3 text-purple-500"})]})]}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto flex-shrink-0",children:[((R=t.metadataSummary)==null?void 0:R.description)&&p.jsx(yr,{delayDuration:100,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx("span",{className:"p-1 text-muted-foreground hover:text-foreground cursor-default","aria-label":"Model information",children:p.jsx(iP,{className:"h-4 w-4"})})}),p.jsx(wr,{side:"top",align:"end",className:"max-w-xs break-words",children:p.jsx("p",{children:t.metadataSummary.description})})]})}),p.jsx(Mn,{tooltipText:"Move to Top",onClick:()=>r(e),disabled:a||n,icon:p.jsx($he,{}),className:"h-6 w-6"}),p.jsx(Mn,{tooltipText:"Move Up",onClick:()=>i(e),disabled:a||n,icon:p.jsx(Ahe,{}),className:"h-6 w-6"}),p.jsx(Mn,{tooltipText:"Move Down",onClick:()=>s(e),disabled:o||n,icon:p.jsx(_H,{}),className:"h-6 w-6"})]})]})},iat=({setGlobalModelSortOrderFromModule:e})=>{const{dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAvailableModelListItems:i}=Ir(Tn(M=>({dbProviderConfigs:M.dbProviderConfigs,globalModelSortOrder:M.globalModelSortOrder,isLoading:M.isLoading,getAvailableModelListItems:M.getAvailableModelListItems}))),[s,a]=T.useState(""),[o,l]=T.useState(!1),[c,u]=T.useState(()=>new Set(t.map(M=>M.id))),[d,h]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1});T.useEffect(()=>{u(new Set(t.map(M=>M.id)))},[t]);const m=T.useMemo(()=>{const M=i(),P=new Map(M.map(J=>[J.id,J])),L=new Set;t.forEach(J=>{J.isEnabled&&J.enabledModels&&J.enabledModels.forEach(U=>{L.add(Mv(J.id,U))})});const O=M.filter(J=>L.has(J.id)),V=[],F=new Set;return n.forEach(J=>{if(L.has(J)){const U=P.get(J);U&&!F.has(J)&&(V.push(U),F.add(J))}}),O.forEach(J=>{F.has(J.id)||V.push(J)}),V},[t,n,i]),y=T.useMemo(()=>{let M=m;if(c.size!==t.length&&(M=M.filter(L=>c.has(L.providerId))),s.trim()){const L=s.toLowerCase();M=M.filter(O=>O.name.toLowerCase().includes(L)||O.providerName.toLowerCase().includes(L)||O.id.toLowerCase().includes(L))}const P=Object.entries(d).filter(([,L])=>L).map(([L])=>L);return P.length>0&&(M=M.filter(L=>{var F,J;const O=new Set(((F=L.metadataSummary)==null?void 0:F.supported_parameters)??[]),V=new Set(((J=L.metadataSummary)==null?void 0:J.input_modalities)??[]);return P.every(U=>{switch(U){case"reasoning":return O.has("reasoning");case"webSearch":return O.has("web_search")||O.has("web_search_options");case"tools":return O.has("tools");case"multimodal":return Array.from(V).some(G=>G!=="text");default:return!0}})})),M},[m,s,c,t.length,d]),b=s.trim().length>0||c.size!==t.length||Object.values(d).some(Boolean),v=T.useMemo(()=>y.map(M=>M.id),[y]),x=T.useCallback(M=>{const{active:P,over:L}=M;if(L&&P.id!==L.id){const O=m.map(G=>G.id),V=P.id,F=L.id,J=O.indexOf(V),U=O.indexOf(F);if(J!==-1&&U!==-1){const G=Jv(O,J,U);e(G)}else console.warn("DND: Could not find dragged items in the full model order. This might happen if the underlying list changed during drag or items are filtered out.")}},[m,e]),_=T.useCallback((M,P)=>{if(b)return;const L=m.map(F=>F.id),O=L.indexOf(M);if(O===-1)return;let V;if(P==="top"){if(O===0)return;const F=L.splice(O,1)[0];L.unshift(F),V=L}else if(P==="up"){if(O===0)return;V=Jv(L,O,O-1)}else{if(O===L.length-1)return;V=Jv(L,O,O+1)}e(V)},[m,e,b]),S=Iit(zV(T5),zV(k5,{coordinateGetter:tat})),C=T.useCallback((M,P)=>{u(L=>{const O=new Set(L);return P?O.add(M):O.delete(M),O})},[]),E=M=>{h(P=>({...P,[M]:!P[M]}))},A=c.size!==t.length?1:0,R=Object.values(d).filter(Boolean).length,N=A+R;return r?p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx($r,{className:"h-8 w-1/3"}),p.jsx($r,{className:"h-6 w-1/2"}),p.jsx($r,{className:"h-64 w-full"})]}):p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models to define their display order. Filtering affects the view below. Move buttons (up/down/top) are disabled when filters are active."}),p.jsx(Ad,{}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(en,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(Aa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(pr,{type:"search",placeholder:"Filter models by name or provider...",value:s,onChange:M=>a(M.target.value),className:"pl-8 w-full h-9",disabled:r})]}),p.jsxs(Ll,{open:o,onOpenChange:l,children:[p.jsx(Bl,{asChild:!0,children:p.jsxs(Tt,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:r||t.length===0,children:[p.jsx(tP,{className:"h-4 w-4 mr-1"}),"Filters",N>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:N})]})}),p.jsx($l,{className:"w-64 p-0",children:p.jsxs("div",{className:"p-2 space-y-3",children:[p.jsxs("div",{children:[p.jsx(en,{className:"text-xs px-2 font-semibold block mb-1",children:"Providers"}),p.jsx(Na,{className:"h-32 border rounded-md p-1",children:t.map(M=>p.jsxs("div",{className:"flex items-center space-x-2 p-1.5 rounded hover:bg-muted",children:[p.jsx(mu,{id:`organizer-provider-filter-${M.id}`,checked:c.has(M.id),onCheckedChange:P=>C(M.id,!!P)}),p.jsxs(en,{htmlFor:`organizer-provider-filter-${M.id}`,className:"text-sm font-normal cursor-pointer",children:[M.name," (",M.type,")"]})]},M.id))})]}),p.jsxs("div",{children:[p.jsx(en,{className:"text-xs px-2 font-semibold block mb-1",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1 p-1 border rounded-md",children:[p.jsx(Mn,{tooltipText:"Reasoning",icon:p.jsx(fh,{}),onClick:()=>E("reasoning"),variant:d.reasoning?"secondary":"outline",className:ft("h-7 w-auto px-2 text-xs",d.reasoning&&"text-primary"),children:"Reasoning"}),p.jsx(Mn,{tooltipText:"Web Search",icon:p.jsx(Aa,{}),onClick:()=>E("webSearch"),variant:d.webSearch?"secondary":"outline",className:ft("h-7 w-auto px-2 text-xs",d.webSearch&&"text-primary"),children:"Web"}),p.jsx(Mn,{tooltipText:"Tools",icon:p.jsx(Pp,{}),onClick:()=>E("tools"),variant:d.tools?"secondary":"outline",className:ft("h-7 w-auto px-2 text-xs",d.tools&&"text-primary"),children:"Tools"}),p.jsx(Mn,{tooltipText:"Multimodal",icon:p.jsx(Mp,{}),onClick:()=>E("multimodal"),variant:d.multimodal?"secondary":"outline",className:ft("h-7 w-auto px-2 text-xs",d.multimodal&&"text-primary"),children:"Multimodal"})]})]})]})})]})]}),p.jsx(Na,{className:"h-[calc(20*2.75rem+2px)] w-full rounded-md border border-border p-3 bg-background/50",children:y.length>0?p.jsx(Mst,{sensors:S,collisionDetection:Mit,onDragEnd:x,children:p.jsx(Hst,{items:v,strategy:qst,children:y.map(M=>p.jsx(rat,{id:M.id,modelDetails:M,onMoveToTop:()=>_(M.id,"top"),onMoveUp:()=>_(M.id,"up"),onMoveDown:()=>_(M.id,"down"),isFirst:m.findIndex(P=>P.id===M.id)===0,isLast:m.findIndex(P=>P.id===M.id)===m.length-1,buttonsDisabled:b},M.id))})}):p.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:b?"No models match your filters.":"No models enabled globally. Enable models within provider configurations."})})]})]})},LS=e=>{if(!e)return"N/A";const t=parseFloat(e);return isNaN(t)?"N/A":`$${(t/1e3).toFixed(4)} / 1K tokens`},gl=(e,t,n=!1,r="secondary")=>t==null||String(t).trim()===""?null:p.jsxs(Ui,{children:[p.jsx(hr,{className:"font-medium text-xs w-1/3 py-1.5 px-3",children:e}),p.jsx(hr,{className:"text-xs py-1.5 px-3 break-all",children:n?p.jsx($f,{variant:r,className:"text-xs",children:String(t)}):Array.isArray(t)?p.jsx("div",{className:"flex flex-wrap gap-1",children:t.map((i,s)=>p.jsx($f,{variant:"outline",className:"text-xs",children:String(i)},s))}):String(t)})]}),sat=({modelId:e})=>{var m,y,b,v,x,_,S,C,E,A,R,N;const{createAiModelConfig:t,dbProviderConfigs:n,dbApiKeys:r,updateProviderConfig:i,isLoading:s}=Ir(Tn(M=>({createAiModelConfig:M.createAiModelConfig,dbProviderConfigs:M.dbProviderConfigs,dbApiKeys:M.dbApiKeys,updateProviderConfig:M.updateProviderConfig,isLoading:M.isLoading}))),a=T.useMemo(()=>{if(!e)return;const{providerId:M,modelId:P}=rc(e);if(!M||!P)return;const L=n.find(V=>V.id===M);if(!L)return;const O=r.find(V=>V.id===L.apiKeyId);return t(L,P,O==null?void 0:O.value)},[e,n,r,t]),o=a==null?void 0:a.metadata,l=T.useCallback(async()=>{if(!a||!e)return;const{providerId:M,modelId:P}=rc(e);if(!M||!P)return;const L=n.find(J=>J.id===M);if(!L){De.error("Provider configuration not found.");return}const O=new Set(L.enabledModels??[]),V=O.has(P);V?O.delete(P):O.add(P);const F=Array.from(O);try{await i(L.id,{enabledModels:F}),De.success(`Model "${a.name}" ${V?"disabled":"enabled"}.`)}catch{De.error("Failed to update model status.")}},[a,e,n,i]);if(s)return p.jsxs("div",{className:"space-y-4 p-1 h-full flex flex-col",children:[p.jsx($r,{className:"h-8 w-3/4 flex-shrink-0"}),p.jsx($r,{className:"h-4 w-1/2 flex-shrink-0"}),p.jsxs("div",{className:"flex-grow space-y-2",children:[p.jsx($r,{className:"h-10 w-full"}),p.jsx($r,{className:"h-10 w-full"}),p.jsx($r,{className:"h-10 w-full"}),p.jsx($r,{className:"h-10 w-full"})]})]});if(!e)return p.jsxs("div",{className:"p-4 text-center text-muted-foreground h-full flex flex-col items-center justify-center",children:[p.jsx(lc,{className:"mx-auto h-10 w-10 mb-2 text-amber-500"}),p.jsx("p",{className:"text-sm",children:'No model selected. Click a model in the "Configuration" or "Browse Models" tab to view its details.'})]});if(!a||!o)return p.jsxs("div",{className:"p-4 text-center text-destructive h-full flex flex-col items-center justify-center",children:[p.jsx(lc,{className:"mx-auto h-10 w-10 mb-2"}),p.jsxs("p",{className:"text-sm",children:["Details not available for model: ",e,". It might be misconfigured or no longer available."]})]});const{providerId:c,modelId:u}=rc(e),d=n.find(M=>M.id===c),h=u!=null&&(d==null?void 0:d.isEnabled)&&((m=d==null?void 0:d.enabledModels)==null?void 0:m.includes(u))===!0;return p.jsxs("div",{className:"space-y-4 p-1 h-full flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between flex-shrink-0",children:[p.jsxs("h4",{className:"text-lg font-semibold text-card-foreground truncate",children:[a.name,p.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",a.providerName,")"]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(en,{htmlFor:`enable-details-${u}`,className:"text-xs",children:h?"Enabled":"Disabled"}),p.jsx(au,{id:`enable-details-${u}`,checked:h,onCheckedChange:l,disabled:!(d!=null&&d.isEnabled),"aria-label":`Enable model ${a.name}`})]})]}),o.description&&p.jsx("p",{className:"text-xs text-muted-foreground flex-shrink-0",children:o.description}),p.jsx(Na,{className:"flex-grow border rounded-md bg-background/30",children:p.jsxs(vm,{children:[p.jsxs(QQe,{className:"py-2 text-xs",children:["Model ID: ",o.id]}),p.jsxs(xm,{children:[gl("Context Length",((y=o.top_provider)==null?void 0:y.context_length)??o.context_length),gl("Max Completion Tokens",(b=o.top_provider)==null?void 0:b.max_completion_tokens),gl("Input Modalities",(v=o.architecture)==null?void 0:v.input_modalities),gl("Output Modalities",(x=o.architecture)==null?void 0:x.output_modalities),gl("Tokenizer",(_=o.architecture)==null?void 0:_.tokenizer,!0),gl("Instruct Type",(S=o.architecture)==null?void 0:S.instruct_type,!0),gl("Pricing (Prompt)",LS((C=o.pricing)==null?void 0:C.prompt)),gl("Pricing (Completion)",LS((E=o.pricing)==null?void 0:E.completion)),gl("Pricing (Image)",LS((A=o.pricing)==null?void 0:A.image)),gl("Pricing (Request)",LS((R=o.pricing)==null?void 0:R.request)),gl("Supported Parameters",o.supported_parameters),gl("Moderated",(N=o.top_provider)!=null&&N.is_moderated?p.jsx(jk,{className:"h-4 w-4 text-green-500"}):"No")]})]})})]})},aat=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=Ir(Tn(h=>({apiKeys:h.dbApiKeys,addApiKey:h.addApiKey,deleteApiKey:h.deleteApiKey,isLoading:h.isLoading}))),[i,s]=T.useState(!1),[a,o]=T.useState(!1),[l,c]=T.useState({}),u=T.useCallback(async(h,m,y)=>{o(!0);try{await t(h,m,y),s(!1)}catch(b){console.error("Failed to add API key (from component):",b)}finally{o(!1)}},[t]),d=T.useCallback(async(h,m)=>{if(window.confirm(`Are you sure you want to delete the API key "${m}"? This will unlink it from any providers using it.`)){c(y=>({...y,[h]:!0}));try{await n(h)}catch(y){console.error("Failed to delete API key (from component):",y)}finally{c(y=>({...y,[h]:!1}))}}},[n]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!i&&p.jsxs(Tt,{onClick:()=>s(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[p.jsx(Y0,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),i&&p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),p.jsx(ooe,{onSave:u,onCancel:()=>s(!1),disabled:a})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!i?p.jsxs("div",{className:"space-y-2",children:[p.jsx($r,{className:"h-10 w-full"}),p.jsx($r,{className:"h-10 w-full"})]}):(e||[]).length===0&&!i?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(vm,{children:[p.jsx(Dy,{children:p.jsxs(Ui,{children:[p.jsx(vi,{children:"Name"}),p.jsx(vi,{children:"Provider Type"}),p.jsx(vi,{children:"Created"}),p.jsx(vi,{className:"text-right",children:"Actions"})]})}),p.jsx(xm,{children:(e||[]).map(h=>{const m=l[h.id];return p.jsxs(Ui,{className:m?"opacity-50":"",children:[p.jsx(hr,{className:"font-medium",children:h.name||"Unnamed Key"}),p.jsx(hr,{children:h.providerId||"Unknown"}),p.jsx(hr,{className:"text-xs text-muted-foreground",children:t4(new Date(h.createdAt),"PPp")}),p.jsx(hr,{className:"text-right",children:p.jsx(Mn,{tooltipText:"Delete Key",onClick:()=>d(h.id,h.name||"Unnamed Key"),disabled:m,"aria-label":`Delete key ${h.name||"Unnamed Key"}`,icon:m?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ho,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},h.id)})})]})})]})]})},oat=lt.memo(aat),lat=({onSelectModelForDetails:e})=>{const[t,n]=T.useState(null),[r,i]=T.useState(null),s=T.useCallback(P=>{if(P){n(P);const L=P.querySelector("[data-radix-scroll-area-viewport]");if(L)i(L);else{const O=new MutationObserver(()=>{const V=P.querySelector("[data-radix-scroll-area-viewport]");V&&(i(V),O.disconnect())});return O.observe(P,{childList:!0,subtree:!0}),()=>O.disconnect()}}else n(null),i(null)},[]),{getAvailableModelListItems:a,isLoading:o,dbProviderConfigs:l}=Ir(Tn(P=>({getAvailableModelListItems:P.getAvailableModelListItems,isLoading:P.isLoading,dbProviderConfigs:P.dbProviderConfigs}))),[c,u]=T.useState(""),[d,h]=T.useState(!1),[m,y]=T.useState(()=>new Set(l.map(P=>P.id))),[b,v]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),x=T.useMemo(()=>a(),[a]);T.useEffect(()=>{y(new Set(l.map(P=>P.id)))},[l]);const _=T.useMemo(()=>{let P=x;if(m.size!==l.length&&(P=P.filter(O=>m.has(O.providerId))),c.trim()){const O=c.toLowerCase();P=P.filter(V=>V.name.toLowerCase().includes(O)||V.providerName.toLowerCase().includes(O)||V.id.toLowerCase().includes(O))}const L=Object.entries(b).filter(([,O])=>O).map(([O])=>O);return L.length>0&&(P=P.filter(O=>{var J,U;const V=new Set(((J=O.metadataSummary)==null?void 0:J.supported_parameters)??[]),F=new Set(((U=O.metadataSummary)==null?void 0:U.input_modalities)??[]);return L.every(G=>{switch(G){case"reasoning":return V.has("reasoning");case"webSearch":return V.has("web_search")||V.has("web_search_options");case"tools":return V.has("tools");case"multimodal":return Array.from(F).some($=>$!=="text");default:return!0}})})),P.sort((O,V)=>{const F=O.providerName.localeCompare(V.providerName);return F!==0?F:O.name.localeCompare(V.name)})},[x,c,m,l.length,b]),S=X6({count:_.length,getScrollElement:()=>r,estimateSize:()=>48,overscan:10}),C=T.useCallback((P,L)=>{y(O=>{const V=new Set(O);return L?V.add(P):V.delete(P),V})},[]),E=P=>{v(L=>({...L,[P]:!L[P]}))},A=P=>{e(P)},R=m.size!==l.length?1:0,N=Object.values(b).filter(Boolean).length,M=R+N;return o?p.jsxs("div",{className:"space-y-2 h-full flex flex-col",children:[p.jsx($r,{className:"h-9 w-full flex-shrink-0"}),p.jsx($r,{className:"h-full w-full flex-grow"})]}):p.jsxs("div",{className:"space-y-3 h-full flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(Aa,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(pr,{type:"search",placeholder:"Filter models by name or provider...",value:c,onChange:P=>u(P.target.value),className:"pl-8 w-full h-9",disabled:o})]}),p.jsxs(Ll,{open:d,onOpenChange:h,children:[p.jsx(Bl,{asChild:!0,children:p.jsxs(Tt,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:o||l.length===0,children:[p.jsx(tP,{className:"h-4 w-4 mr-1"}),"Filters",M>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:M})]})}),p.jsx($l,{className:"w-64 p-0",children:p.jsxs("div",{className:"p-2 space-y-3",children:[p.jsxs("div",{children:[p.jsx(en,{className:"text-xs px-2 font-semibold block mb-1",children:"Providers"}),p.jsx(Na,{className:"h-32 border rounded-md p-1",children:l.map(P=>p.jsxs("div",{className:"flex items-center space-x-2 p-1.5 rounded hover:bg-muted",children:[p.jsx(mu,{id:`model-browser-provider-filter-${P.id}`,checked:m.has(P.id),onCheckedChange:L=>C(P.id,!!L)}),p.jsxs(en,{htmlFor:`model-browser-provider-filter-${P.id}`,className:"text-sm font-normal cursor-pointer",children:[P.name," (",P.type,")"]})]},P.id))})]}),p.jsxs("div",{children:[p.jsx(en,{className:"text-xs px-2 font-semibold block mb-1",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1 p-1 border rounded-md",children:[p.jsx(Mn,{tooltipText:"Reasoning",icon:p.jsx(fh,{}),onClick:()=>E("reasoning"),variant:b.reasoning?"secondary":"outline",className:ft("h-7 w-auto px-2 text-xs",b.reasoning&&"text-primary"),children:"Reasoning"}),p.jsx(Mn,{tooltipText:"Web Search",icon:p.jsx(Aa,{}),onClick:()=>E("webSearch"),variant:b.webSearch?"secondary":"outline",className:ft("h-7 w-auto px-2 text-xs",b.webSearch&&"text-primary"),children:"Web"}),p.jsx(Mn,{tooltipText:"Tools",icon:p.jsx(Pp,{}),onClick:()=>E("tools"),variant:b.tools?"secondary":"outline",className:ft("h-7 w-auto px-2 text-xs",b.tools&&"text-primary"),children:"Tools"}),p.jsx(Mn,{tooltipText:"Multimodal",icon:p.jsx(Mp,{}),onClick:()=>E("multimodal"),variant:b.multimodal?"secondary":"outline",className:ft("h-7 w-auto px-2 text-xs",b.multimodal&&"text-primary"),children:"Multimodal"})]})]})]})})]})]}),p.jsxs(Na,{className:"flex-grow border rounded-md bg-background/50 h-[calc(15*2.5rem+2px)]",ref:s,children:[r&&p.jsx("div",{style:{height:`${S.getTotalSize()}px`,width:"100%",position:"relative"},children:_.length===0&&!o?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4 absolute inset-0 flex items-center justify-center",children:"No models match your filters."}):S.getVirtualItems().map(P=>{var O;const L=_[P.index];return L?p.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${P.size}px`,transform:`translateY(${P.start}px)`},className:"p-1",children:p.jsx(yr,{delayDuration:300,children:p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsxs("button",{className:"w-full text-left p-1.5 rounded hover:bg-muted/50 flex flex-col",onClick:()=>A(L.id),children:[p.jsx("span",{className:"text-sm font-medium truncate",children:L.name}),p.jsx("span",{className:"text-xs text-muted-foreground truncate",children:L.providerName})]})}),((O=L.metadataSummary)==null?void 0:O.description)&&p.jsx(wr,{side:"bottom",align:"start",className:"max-w-xs",children:p.jsx("p",{children:L.metadataSummary.description})})]})})},L.id):null})}),!r&&!o&&p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Initializing list..."})]})]})},cat=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:i,providerFetchStatus:s,dbProviderConfigs:a,apiKeys:o,isLoading:l}=Ir(Tn(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[c,u]=T.useState(!1),d=()=>u(!0),h=T.useCallback(()=>u(!1),[]),m=T.useCallback(async b=>{await i(b)},[i]),y=T.useMemo(()=>a||[],[a]);return p.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),p.jsx("div",{className:"flex-shrink-0",children:c?p.jsx(moe,{apiKeys:o||[],onAddProvider:t,onCancel:h}):p.jsxs(Tt,{onClick:d,variant:"outline",className:"w-full",disabled:l,children:[p.jsx(Y0,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),p.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:p.jsxs("div",{className:"space-y-2",children:[l&&!c?p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[p.jsx($r,{className:"h-24 w-full"}),p.jsx($r,{className:"h-24 w-full"}),p.jsx($r,{className:"h-24 w-full"})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:y.map(b=>p.jsx(mit,{provider:b,apiKeys:o||[],onUpdate:n,onDelete:r,onFetchModels:m,fetchStatus:s[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&y.length===0&&!c&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},uat=({setGlobalModelSortOrderFromModule:e})=>{const{selectedModelForDetails:t,setSelectedModelForDetails:n}=Ir(Tn(o=>({selectedModelForDetails:o._selectedModelForDetails,setSelectedModelForDetails:o.setSelectedModelForDetails}))),[r,i]=T.useState("providers-config"),s=T.useCallback(o=>{n(o),o&&i("providers-details-current")},[n,i]),a=T.useMemo(()=>[{value:"providers-config",label:"Configuration",content:p.jsx(cat,{onSelectModelForDetails:s})},{value:"providers-order",label:"Model Order",content:p.jsx(iat,{setGlobalModelSortOrderFromModule:e})},{value:"api-keys",label:"API Keys",content:p.jsx(oat,{})},{value:"providers-details-current",label:"Selected Model",content:p.jsx(sat,{modelId:t})},{value:"providers-browse-all",label:"Browse Models",content:p.jsx(lat,{onSelectModelForDetails:s})}],[t,s,e]);return p.jsx(Ld,{tabs:a,initialValue:r,onValueChange:i,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},dat=lt.memo(uat);class fat{constructor(){we(this,"id","core-provider-settings");we(this,"modApiRef",null);we(this,"eventUnsubscribers",[]);we(this,"setGlobalModelSortOrderFromModule",t=>{var n;(n=this.modApiRef)==null||n.emit(lr.setGlobalModelSortOrderRequest,{ids:t})})}async initialize(t){this.modApiRef=t}register(t){this.modApiRef=t,t.registerSettingsTab({id:"providers",title:"Providers & Models",order:20,component:()=>lt.createElement(dat,{setGlobalModelSortOrderFromModule:this.setGlobalModelSortOrderFromModule})})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.modApiRef=null}}const hat=Ze({globalSystemPrompt:$e()});function pat({field:e}){return p.jsx(p.Fragment,{children:e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:"text-xs text-destructive mt-1 block",children:e.state.meta.errors.join(", ")}):null})}const mat=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t}=mr(Tn(r=>({globalSystemPrompt:r.globalSystemPrompt,setGlobalSystemPrompt:r.setGlobalSystemPrompt}))),n=ea({defaultValues:{globalSystemPrompt:e??""},validators:{onChangeAsync:hat,onChangeAsyncDebounceMs:500},onSubmit:async({value:r})=>{try{t(r.globalSystemPrompt),De.success("Global system prompt updated!")}catch(i){De.error("Failed to update prompt. Please try again."),console.error("Error submitting assistant prompt form:",i)}}});return T.useEffect(()=>{n.state.values.globalSystemPrompt!==(e??"")&&n.reset({globalSystemPrompt:e??""})},[e,n]),p.jsxs("form",{onSubmit:r=>{r.preventDefault(),r.stopPropagation(),n.handleSubmit()},className:"space-y-3",children:[p.jsx("div",{children:p.jsx(n.Field,{name:"globalSystemPrompt",children:r=>p.jsxs(p.Fragment,{children:[p.jsx(en,{htmlFor:r.name,className:"text-sm mb-1 block",children:"Global System Prompt"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),p.jsx(Fd,{id:r.name,placeholder:"Enter default system instructions for the assistant...",value:r.state.value,onBlur:r.handleBlur,onChange:i=>r.handleChange(i.target.value),rows:6,className:r.state.meta.errors.length?"border-destructive":""}),p.jsx(pat,{field:r})]})})}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(n.Subscribe,{selector:r=>[r.canSubmit,r.isSubmitting,r.isValidating,r.isValid],children:([r,i,s,a])=>p.jsx(Tt,{type:"submit",size:"sm",disabled:!r||i||s||!a,children:i?"Saving...":s?"Validating...":"Save Prompt"})})})]})},gat=Ze({temperature:At().min(0).max(1),topP:At().min(0).max(1),maxTokens:At().min(1).nullable(),topK:At().min(1).nullable(),presencePenalty:At().min(-2).max(2),frequencyPenalty:At().min(-2).max(2)}),yat=()=>{const e=mr(Tn(n=>({temperature:n.temperature,setTemperature:n.setTemperature,topP:n.topP,setTopP:n.setTopP,maxTokens:n.maxTokens,setMaxTokens:n.setMaxTokens,topK:n.topK,setTopK:n.setTopK,presencePenalty:n.presencePenalty,setPresencePenalty:n.setPresencePenalty,frequencyPenalty:n.frequencyPenalty,setFrequencyPenalty:n.setFrequencyPenalty}))),t=ea({defaultValues:{temperature:e.temperature??.7,topP:e.topP??1,maxTokens:e.maxTokens??null,topK:e.topK??null,presencePenalty:e.presencePenalty??0,frequencyPenalty:e.frequencyPenalty??0},validators:{onChangeAsync:gat,onChangeAsyncDebounceMs:500},onSubmit:async({value:n})=>{try{e.setTemperature(n.temperature),e.setTopP(n.topP),e.setMaxTokens(n.maxTokens??null),e.setTopK(n.topK??null),e.setPresencePenalty(n.presencePenalty),e.setFrequencyPenalty(n.frequencyPenalty),De.success("Assistant parameters updated!")}catch(r){De.error("Failed to update parameters."),console.error("Error submitting parameters form:",r)}}});return T.useEffect(()=>{t.reset({temperature:e.temperature??.7,topP:e.topP??1,maxTokens:e.maxTokens??null,topK:e.topK??null,presencePenalty:e.presencePenalty??0,frequencyPenalty:e.frequencyPenalty??0})},[e.temperature,e.topP,e.maxTokens,e.topK,e.presencePenalty,e.frequencyPenalty,t]),p.jsxs("form",{onSubmit:n=>{n.preventDefault(),n.stopPropagation(),t.handleSubmit()},className:"space-y-4",children:[p.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),p.jsx(nc,{form:t,name:"temperature",label:"Temperature",min:0,max:1,step:.01,valueDisplayPrecision:2,wrapperClassName:"space-y-1.5"}),p.jsx(nc,{form:t,name:"topP",label:"Top P",min:0,max:1,step:.01,valueDisplayPrecision:2,wrapperClassName:"space-y-1.5"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsx(W0,{form:t,name:"maxTokens",label:"Max Tokens",placeholder:"Default (None)",min:1,className:"h-9 text-sm",allowNull:!0,wrapperClassName:"space-y-1.5"}),p.jsx(W0,{form:t,name:"topK",label:"Top K",placeholder:"Default (None)",min:1,className:"h-9 text-sm",allowNull:!0,wrapperClassName:"space-y-1.5"})]}),p.jsx(nc,{form:t,name:"presencePenalty",label:"Presence Penalty",min:-2,max:2,step:.01,valueDisplayPrecision:2,wrapperClassName:"space-y-1.5"}),p.jsx(nc,{form:t,name:"frequencyPenalty",label:"Frequency Penalty",min:-2,max:2,step:.01,valueDisplayPrecision:2,wrapperClassName:"space-y-1.5"}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx(Tt,{type:"button",variant:"ghost",onClick:()=>t.reset(),disabled:!t.state.isDirty,children:"Reset"}),p.jsx(t.Subscribe,{selector:n=>[n.canSubmit,n.isSubmitting],children:([n,r])=>p.jsx(Tt,{type:"submit",disabled:!n||r,children:r?"Saving...":"Save Changes"})})]})]})},bat=Ze({toolMaxSteps:At({required_error:"Max steps is required",invalid_type_error:"Max steps must be a number"}).min(1,"Must be at least 1").max(20,"Cannot exceed 20")});function vat({field:e}){return p.jsx(p.Fragment,{children:e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:"text-xs text-destructive mt-1 block",children:e.state.meta.errors.join(", ")}):null})}const xat=()=>{const{toolMaxSteps:e,setToolMaxSteps:t}=mr(Tn(r=>({toolMaxSteps:r.toolMaxSteps,setToolMaxSteps:r.setToolMaxSteps}))),n=ea({defaultValues:{toolMaxSteps:e??5},validators:{onChangeAsync:bat,onChangeAsyncDebounceMs:500},onSubmit:async({value:r})=>{try{t(r.toolMaxSteps),De.success("Tool settings updated!")}catch(i){De.error("Failed to update tool settings."),console.error("Error submitting tool settings form:",i)}}});return T.useEffect(()=>{n.state.values.toolMaxSteps!==(e??5)&&n.reset({toolMaxSteps:e??5})},[e,n]),p.jsxs("form",{onSubmit:r=>{r.preventDefault(),r.stopPropagation(),n.handleSubmit()},className:"space-y-3",children:[p.jsx(n.Field,{name:"toolMaxSteps",children:r=>p.jsxs("div",{children:[p.jsx(en,{htmlFor:r.name,className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),p.jsx(pr,{id:r.name,type:"number",min:1,max:20,step:1,value:r.state.value,onBlur:r.handleBlur,onChange:i=>{const s=i.target.valueAsNumber;isNaN(s)?i.target.value===""&&r.handleChange(void 0):r.handleChange(s)},className:`w-24 ${r.state.meta.errors.length?"border-destructive":""}`}),p.jsx(vat,{field:r})]})}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(n.Subscribe,{selector:r=>[r.canSubmit,r.isSubmitting,r.isValidating,r.isValid],children:([r,i,s,a])=>p.jsx(Tt,{type:"submit",size:"sm",disabled:!r||i||s||!a,children:i?"Saving...":s?"Validating...":"Save Tool Settings"})})})]})},wat=Ze({autoTitleEnabled:kr(),autoTitleModelId:$e().nullable(),autoTitlePromptMaxLength:At().min(100).max(4e3),autoTitleIncludeFiles:kr(),autoTitleIncludeRules:kr()});function mv({field:e}){return p.jsx(p.Fragment,{children:e.state.meta.isTouched&&e.state.meta.errors.length>0?p.jsx("em",{className:"text-xs text-destructive mt-1 block",children:e.state.meta.errors.join(", ")}):null})}const _at=()=>{const e=mr(Tn(n=>({autoTitleEnabled:n.autoTitleEnabled,setAutoTitleEnabled:n.setAutoTitleEnabled,autoTitleModelId:n.autoTitleModelId,setAutoTitleModelId:n.setAutoTitleModelId,autoTitlePromptMaxLength:n.autoTitlePromptMaxLength,setAutoTitlePromptMaxLength:n.setAutoTitlePromptMaxLength,autoTitleIncludeFiles:n.autoTitleIncludeFiles,setAutoTitleIncludeFiles:n.setAutoTitleIncludeFiles,autoTitleIncludeRules:n.autoTitleIncludeRules,setAutoTitleIncludeRules:n.setAutoTitleIncludeRules}))),t=ea({defaultValues:{autoTitleEnabled:e.autoTitleEnabled??!1,autoTitleModelId:e.autoTitleModelId??null,autoTitlePromptMaxLength:e.autoTitlePromptMaxLength??768,autoTitleIncludeFiles:e.autoTitleIncludeFiles??!1,autoTitleIncludeRules:e.autoTitleIncludeRules??!1},validators:{onChangeAsync:wat,onChangeAsyncDebounceMs:500},onSubmit:async({value:n})=>{try{e.setAutoTitleEnabled(n.autoTitleEnabled),e.setAutoTitleModelId(n.autoTitleModelId??null),e.setAutoTitlePromptMaxLength(n.autoTitlePromptMaxLength),e.setAutoTitleIncludeFiles(n.autoTitleIncludeFiles),e.setAutoTitleIncludeRules(n.autoTitleIncludeRules),De.success("Auto-title settings updated!")}catch(r){De.error("Failed to update auto-title settings."),console.error("Error submitting auto-title settings form:",r)}}});return T.useEffect(()=>{t.reset({autoTitleEnabled:e.autoTitleEnabled??!1,autoTitleModelId:e.autoTitleModelId??null,autoTitlePromptMaxLength:e.autoTitlePromptMaxLength??768,autoTitleIncludeFiles:e.autoTitleIncludeFiles??!1,autoTitleIncludeRules:e.autoTitleIncludeRules??!1})},[e.autoTitleEnabled,e.autoTitleModelId,e.autoTitlePromptMaxLength,e.autoTitleIncludeFiles,e.autoTitleIncludeRules,t]),p.jsxs("form",{onSubmit:n=>{n.preventDefault(),n.stopPropagation(),t.handleSubmit()},className:"space-y-3",children:[p.jsx(t.Field,{name:"autoTitleEnabled",children:n=>p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(au,{id:n.name,checked:n.state.value,onCheckedChange:n.handleChange,onBlur:n.handleBlur,"aria-labelledby":`${n.name}-label`}),p.jsx(en,{id:`${n.name}-label`,htmlFor:n.name,children:"Enable Auto-Title Generation"}),p.jsx(mv,{field:n})]})}),t.state.values.autoTitleEnabled&&p.jsxs("div",{className:"space-y-3 pl-6 border-l-2 border-muted",children:[p.jsx(t.Field,{name:"autoTitleModelId",children:n=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:n.name,children:"Model for Title Generation"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose which model to use for generating conversation titles. Uses global default model if not specified."}),p.jsx(v5,{value:n.state.value,onChange:r=>n.handleChange(r),className:"w-full"}),p.jsx(mv,{field:n})]})}),p.jsx(t.Field,{name:"autoTitlePromptMaxLength",children:n=>p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(en,{htmlFor:n.name,children:"Conversation Content Length Limit"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum characters from conversation to include in title generation prompt (100-4000)."}),p.jsx(pr,{id:n.name,type:"number",min:100,max:4e3,step:1,value:n.state.value,onBlur:n.handleBlur,onChange:r=>{const i=r.target.valueAsNumber;isNaN(i)||n.handleChange(i)},className:`w-32 ${n.state.meta.errors.length?"border-destructive":""}`}),p.jsx(mv,{field:n})]})}),p.jsx(t.Field,{name:"autoTitleIncludeFiles",children:n=>p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(au,{id:n.name,checked:n.state.value,onCheckedChange:n.handleChange,onBlur:n.handleBlur,"aria-labelledby":`${n.name}-label`}),p.jsx(en,{id:`${n.name}-label`,htmlFor:n.name,children:"Include file context in title prompt"}),p.jsx(mv,{field:n})]})}),p.jsx(t.Field,{name:"autoTitleIncludeRules",children:n=>p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(au,{id:n.name,checked:n.state.value,onCheckedChange:n.handleChange,onBlur:n.handleBlur,"aria-labelledby":`${n.name}-label`}),p.jsx(en,{id:`${n.name}-label`,htmlFor:n.name,children:"Include active rules in title prompt"}),p.jsx(mv,{field:n})]})})]}),p.jsx("div",{className:"flex justify-end pt-2",children:p.jsx(t.Subscribe,{selector:n=>[n.canSubmit,n.isSubmitting,n.isValidating,n.isValid],children:([n,r,i,s])=>p.jsx(Tt,{type:"submit",size:"sm",disabled:!n||r||i||!s,children:r?"Saving...":i?"Validating...":"Save Title Settings"})})})]})},Sat=()=>{const{resetAssistantSettings:e}=mr(Tn(r=>({resetAssistantSettings:r.resetAssistantSettings}))),t=()=>{window.confirm("Are you sure you want to reset all Assistant settings (Prompt, Parameters, Tools, Auto-Title) to their defaults?")&&e()},n=T.useMemo(()=>[{value:"prompt",label:"System Prompt",content:p.jsx(mat,{})},{value:"parameters",label:"Parameters",content:p.jsx(yat,{})},{value:"tools",label:"Tools",content:p.jsx(xat,{})},{value:"titles",label:"Auto-Titles",content:p.jsx(_at,{})}],[]);return p.jsxs("div",{className:"space-y-4 p-1 h-full flex flex-col",children:[p.jsx(Ld,{tabs:n,defaultValue:"prompt",className:"flex-grow",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-3 flex-grow overflow-y-auto",scrollable:!0}),p.jsx(Ad,{className:"mt-auto"}),p.jsx("div",{className:"flex justify-end pt-3 flex-shrink-0",children:p.jsxs(Tt,{variant:"outline",size:"sm",onClick:t,children:[p.jsx(aP,{className:"mr-2 h-4 w-4"}),"Reset All Assistant Settings"]})})]})},Cat=lt.memo(Sat);class kat{constructor(){we(this,"id","core-settings-assistant");we(this,"unregisterCallback",null);we(this,"modApiRef",null);we(this,"eventUnsubscribers",[]);we(this,"isVisible",!1)}async initialize(t){this.modApiRef=t,this.isVisible=mr.getState().enableAdvancedSettings;const n=t.on(sn.enableAdvancedSettingsChanged,r=>{typeof r=="object"&&r&&"enabled"in r&&this.isVisible!==r.enabled&&(this.isVisible=r.enabled,this.reregisterTab())});this.eventUnsubscribers.push(n)}reregisterTab(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.modApiRef&&this.register(this.modApiRef)}register(t){this.modApiRef=t,this.isVisible?this.unregisterCallback||(this.unregisterCallback=t.registerSettingsTab({id:"assistant",title:"Assistant",component:Cat,order:40})):this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const Eat=Ze({importSettings:kr(),importApiKeys:kr(),importProviderConfigs:kr(),importProjects:kr(),importConversations:kr(),importRulesAndTags:kr(),importMods:kr(),importSyncRepos:kr()}),Tat=Ze({importSettings:kr(),importApiKeys:kr(),importProviderConfigs:kr(),importProjects:kr(),importConversations:kr(),importRulesAndTags:kr(),importMods:kr(),importSyncRepos:kr()}),Aat=()=>{const{importConversation:e,exportAllConversations:t}=$n(Tn(N=>({importConversation:N.importConversation,exportAllConversations:N.exportAllConversations}))),n=T.useRef(null),r=T.useRef(null),[i,s]=T.useState(!1),[a,o]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1),[h,m]=T.useState(!1),y=ea({defaultValues:{importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0},validators:{onChange:Eat}}),b=ea({defaultValues:{importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0},validators:{onChange:Tat}}),v=()=>{var N;(N=n.current)==null||N.click()},x=()=>{var N;(N=r.current)==null||N.click()},_=T.useCallback(async N=>{var P;const M=(P=N.target.files)==null?void 0:P[0];if(M){s(!0);try{await e(M)}catch(L){console.error("Import failed (from component):",L)}finally{n.current&&(n.current.value=""),s(!1)}}},[e]),S=T.useCallback(async N=>{var P;const M=(P=N.target.files)==null?void 0:P[0];if(M){if(!window.confirm("Importing this file will OVERWRITE existing data for the selected categories. Are you sure you want to proceed?")){r.current&&(r.current.value="");return}m(!0);try{await Fg.importFullConfiguration(M,y.state.values)}catch(L){console.error("Full import failed (from component):",L)}finally{r.current&&(r.current.value=""),m(!1)}}},[y]),C=T.useCallback(async()=>{o(!0);try{await t()}catch(N){console.error("Export all failed (from component):",N)}finally{o(!1)}},[t]),E=T.useCallback(async()=>{d(!0);try{await Fg.exportFullConfiguration(b.state.values)}catch(N){console.error("Full export failed (from component):",N)}finally{d(!1)}},[b]),A=T.useCallback(async()=>{if(window.confirm(`🚨 ARE YOU ABSOLUTELY SURE? 🚨

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){c(!0);try{await Nt.clearAllData(),De.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(N){const M="Failed to clear all data";console.error(M,N),De.error(`${M}: ${N instanceof Error?N.message:String(N)}`),c(!1)}}},[]),R=(N,M,P,L,O,V)=>{const F=`${V}-${M}-checkbox`;return p.jsx(N.Field,{name:M,children:J=>p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(mu,{id:F,checked:J.state.value,onCheckedChange:U=>J.handleChange(!!U),disabled:O}),p.jsxs(en,{htmlFor:F,className:"text-sm font-normal flex items-center gap-1.5",children:[p.jsx(L,{className:"h-4 w-4 text-muted-foreground"})," ",P]})]})},M)};return p.jsxs("div",{className:"space-y-4 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Single Conversation"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-3 rounded-md space-y-2",children:[p.jsx(en,{className:"font-semibold",children:"Import Conversation"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import a previously exported single conversation (.json file)."}),p.jsx("input",{type:"file",ref:n,onChange:_,accept:".json",className:"hidden",id:"import-file-input",disabled:i}),p.jsxs(Tt,{onClick:v,variant:"outline",size:"sm",disabled:i,children:[i?p.jsx(Yn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(OH,{className:"mr-2 h-4 w-4"}),i?"Importing...":"Select File..."]})]}),p.jsxs("div",{className:"border p-3 rounded-md space-y-2",children:[p.jsx(en,{className:"font-semibold",children:"Export All Conversations"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all conversations and messages into a single JSON file."}),p.jsxs(Tt,{onClick:C,variant:"outline",size:"sm",disabled:a,children:[a?p.jsx(Yn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(Jc,{className:"mr-2 h-4 w-4"}),a?"Exporting...":"Export All Chats"]})]})]})]}),p.jsx(Ad,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Full Configuration Backup"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-3 rounded-md space-y-3",children:[p.jsx(en,{className:"font-semibold",children:"Import Full Configuration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import settings, providers, keys, projects, conversations, etc., from a backup file. Select which data types to restore."}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[R(y,"importSettings","Settings",f3,h,"import"),R(y,"importApiKeys","API Keys",Qv,h,"import"),R(y,"importProviderConfigs","Providers",v2,h,"import"),R(y,"importProjects","Projects",BL,h,"import"),R(y,"importConversations","Conversations",d3,h,"import"),R(y,"importRulesAndTags","Rules & Tags",h3,h,"import"),R(y,"importMods","Mods",UL,h,"import"),R(y,"importSyncRepos","Sync Repos",cc,h,"import")]}),p.jsx("input",{type:"file",ref:r,onChange:S,accept:".json",className:"hidden",id:"full-import-file-input",disabled:h}),p.jsxs(Tt,{onClick:x,variant:"outline",size:"sm",disabled:h,children:[h?p.jsx(Yn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(xpe,{className:"mr-2 h-4 w-4"}),h?"Importing...":"Select Backup File..."]})]}),p.jsxs("div",{className:"border p-3 rounded-md space-y-3",children:[p.jsx(en,{className:"font-semibold",children:"Export Full Configuration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all settings, providers, keys, projects, conversations, rules, tags, mods, etc., into a single backup file. Select which data types to include."}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[R(b,"importSettings","Settings",f3,u,"export"),R(b,"importApiKeys","API Keys",Qv,u,"export"),R(b,"importProviderConfigs","Providers",v2,u,"export"),R(b,"importProjects","Projects",BL,u,"export"),R(b,"importConversations","Conversations",d3,u,"export"),R(b,"importRulesAndTags","Rules & Tags",h3,u,"export"),R(b,"importMods","Mods",UL,u,"export"),R(b,"importSyncRepos","Sync Repos",cc,u,"export")]}),p.jsxs(Tt,{onClick:E,variant:"secondary",size:"sm",disabled:u,children:[u?p.jsx(Yn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(fpe,{className:"mr-2 h-4 w-4"}),u?"Exporting...":"Export Configuration"]})]})]})]}),p.jsx(Ad,{}),p.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[p.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),p.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),p.jsxs(Tt,{onClick:A,variant:"destructive",disabled:l,children:[l?p.jsx(Yn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(Ho,{className:"mr-2 h-4 w-4"}),l?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},Rat=lt.memo(Aat);class Iat{constructor(){we(this,"id","core-settings-data");we(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"data",title:"Data",component:Rat,order:70})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const Nat=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:i,isLoading:s}=uh(Tn(A=>({loadedMods:A.loadedMods,addDbMod:A.addDbMod,updateDbMod:A.updateDbMod,deleteDbMod:A.deleteDbMod,dbMods:A.dbMods,isLoading:A.isLoading}))),[a,o]=T.useState(""),[l,c]=T.useState(""),[u,d]=T.useState(""),[h,m]=T.useState(!1),[y,b]=T.useState({}),[v,x]=T.useState({}),_=T.useCallback(async()=>{if(!a.trim()){De.error("Mod name cannot be empty.");return}if(!l.trim()&&!u.trim()){De.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&u.trim()){De.error("Provide either a Mod URL or Script Content, not both.");return}m(!0);try{const A={name:a.trim(),sourceUrl:l.trim()||null,scriptContent:u.trim()||null,enabled:!0,loadOrder:((i==null?void 0:i.length)??1)*10};await t(A),o(""),c(""),d(""),De.info("Mod added. Reload required for changes to take effect.")}catch(A){console.error("Failed to add mod (from component):",A)}finally{m(!1)}},[a,l,u,t,i==null?void 0:i.length]),S=T.useCallback(async A=>{b(R=>({...R,[A.id]:!0}));try{await n(A.id,{enabled:!A.enabled}),De.info(`Mod "${A.name}" ${A.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(R){console.error("Failed to update mod (from component):",R)}finally{b(R=>({...R,[A.id]:!1}))}},[n]),C=T.useCallback(async A=>{if(window.confirm(`Are you sure you want to delete the mod "${A.name}"? This cannot be undone.`)){x(R=>({...R,[A.id]:!0}));try{await r(A.id),De.info("Mod deleted. Reload required for changes to take effect.")}catch(R){console.error("Failed to delete mod (from component):",R)}finally{x(R=>({...R,[A.id]:!1}))}}},[r]),E=T.useCallback(A=>{const R=e.find(M=>M.id===A);if(R)if(R.error){const M=R.error instanceof Error?R.error.message:String(R.error);return{status:"Error",error:R.error,tooltip:M}}else return{status:"Loaded"};const N=(i||[]).find(M=>M.id===A);return N?N.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,i]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs(hue,{variant:"destructive",className:"border-destructive/50",children:[p.jsx(oP,{className:"h-4 w-4"}),p.jsx(pue,{children:"Security Warning"}),p.jsx(mue,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),p.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(en,{htmlFor:"mod-name",children:"Mod Name"}),p.jsx(pr,{id:"mod-name",value:a,onChange:A=>o(A.target.value),placeholder:"My Awesome Mod",disabled:h})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(en,{htmlFor:"mod-url",children:"Source URL (Optional)"}),p.jsx(pr,{id:"mod-url",type:"url",value:l,onChange:A=>c(A.target.value),placeholder:"https://example.com/my-mod.js",disabled:h||!!u.trim()})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(en,{htmlFor:"mod-script",children:"Script Content (Optional)"}),p.jsx(Fd,{id:"mod-script",value:u,onChange:A=>d(A.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:h||!!l.trim()})]}),p.jsxs(Tt,{onClick:_,disabled:h,children:[h&&p.jsx(Yn,{className:"mr-2 h-4 w-4 animate-spin"}),h?"Adding...":"Add Mod"]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),p.jsx("div",{className:"rounded-md border",children:p.jsx(yr,{delayDuration:100,children:p.jsxs(vm,{children:[p.jsx(Dy,{children:p.jsxs(Ui,{children:[p.jsx(vi,{children:"Name"}),p.jsx(vi,{children:"Source"}),p.jsx(vi,{children:"Status"}),p.jsx(vi,{className:"text-center",children:"Enabled"}),p.jsx(vi,{className:"text-right",children:"Actions"})]})}),p.jsx(xm,{children:s?p.jsxs(p.Fragment,{children:[p.jsx(Ui,{children:p.jsx(hr,{colSpan:5,children:p.jsx($r,{className:"h-10 w-full"})})}),p.jsx(Ui,{children:p.jsx(hr,{colSpan:5,children:p.jsx($r,{className:"h-10 w-full"})})})]}):(i||[]).length===0?p.jsx(Ui,{children:p.jsx(hr,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(i||[]).map(A=>{const{status:R,error:N,tooltip:M}=E(A.id),P=A.sourceUrl?new URL(A.sourceUrl).hostname:"Direct Script",L=y[A.id],O=v[A.id],V=L||O,F=R==="Error";return p.jsxs(Ui,{children:[p.jsx(hr,{className:"font-medium",children:A.name}),p.jsx(hr,{className:"text-muted-foreground",children:P}),p.jsxs(hr,{children:[p.jsxs(vr,{children:[p.jsx(xr,{asChild:!0,children:p.jsx("span",{className:F?"text-destructive font-semibold cursor-help":"",children:R})}),M&&p.jsx(wr,{className:"max-w-xs break-words",children:p.jsx("p",{children:M})})]}),F&&N&&p.jsx("p",{className:"text-xs text-destructive truncate",children:N instanceof Error?N.message:String(N)})]}),p.jsxs(hr,{className:"text-center",children:[p.jsx(au,{checked:A.enabled??!1,onCheckedChange:()=>S(A),disabled:V,"aria-label":`Enable ${A.name}`}),L&&p.jsx(Yn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),p.jsx(hr,{className:"text-right",children:p.jsx(Tt,{variant:"ghost",size:"icon",onClick:()=>C(A),disabled:V,"aria-label":`Delete ${A.name}`,className:"text-destructive hover:text-destructive/80",children:O?p.jsx(Yn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ho,{className:"h-4 w-4"})})})]},A.id)})})]})})})]})]})},Mat=lt.memo(Nat);class jat{constructor(){we(this,"id","core-settings-mods");we(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"mods",title:"Mods",component:Mat,order:80})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const Pat=({interactionId:e,contentToCopy:t,disabled:n})=>{const[r]=T.useState(!1),i=T.useCallback(async s=>{if(s.stopPropagation(),n||!t){De.info("No content to copy or action disabled.");return}Le.emit(ec.copyInteractionResponseRequest,{interactionId:e})},[e,t,n]);return p.jsx(Mn,{tooltipText:"Copy",onClick:i,"aria-label":"Copy content",disabled:n||!t,icon:r?p.jsx(Ka,{className:"text-green-500"}):p.jsx(Pk,{}),className:"h-5 w-5"})};class Oat{constructor(){we(this,"id","core-canvas-copy-action")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"header-actions",renderer:n=>n.interactionId?lt.createElement(Pat,{interactionId:n.interactionId,contentToCopy:n.responseContent??"",disabled:!n.responseContent||n.responseContent.trim()===""}):(console.warn("CopyActionControlModule: interactionId is missing in context for an interaction control."),null)})}destroy(t){}}const Dat=({interactionId:e,disabled:t})=>{const n=r=>{if(r.stopPropagation(),t){De.info("Regeneration is currently disabled.");return}Le.emit(ec.regenerateInteractionRequest,{interactionId:e})};return p.jsx(Mn,{tooltipText:"Regenerate",onClick:n,"aria-label":"Regenerate Response",disabled:t,icon:p.jsx(jp,{}),className:"h-5 w-5 md:h-6 md:w-6"})};class Fat{constructor(){we(this,"id","core-canvas-regenerate-action")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"actions",renderer:n=>{if(!n.interactionId||!n.interaction)return null;const r=n.interaction,i=Ln.getState(),s=i.status,a=i.interactions.filter(u=>u.conversationId===r.conversationId&&u.parentId===null&&(u.type==="message.user_assistant"||u.type==="message.assistant_regen"));a.sort((u,d)=>u.index-d.index);const o=a.length>0?a[a.length-1]:null,c=(o==null?void 0:o.id)===r.id&&(r.status==="COMPLETED"||r.status==="ERROR")&&s!=="streaming";return lt.createElement(Dat,{interactionId:r.id,disabled:!c})}})}destroy(t){}}const Lat=({module:e,interactionId:t,disabled:n})=>{const[r,i]=T.useState(!1),[,s]=T.useState({});T.useEffect(()=>{if(e)return e.setNotifyCallback(()=>s({})),()=>e.setNotifyCallback(null)},[e]);const a=l=>{if(!l){i(!1);return}i(!1),Le.emit(ec.regenerateInteractionWithModelRequest,{interactionId:t,modelId:l})},o=l=>{if(l.stopPropagation(),n){De.info("Regeneration is currently disabled.");return}i(!r)};return r?p.jsx("div",{className:"relative",children:p.jsx(b5,{models:e.globallyEnabledModels,value:null,onChange:a,isLoading:e.isLoadingProviders})}):p.jsx(Mn,{tooltipText:"Regenerate with Model",onClick:o,"aria-label":"Regenerate Response with Model Selection",disabled:n,icon:p.jsx(Kpe,{}),className:"h-5 w-5 md:h-6 md:w-6"})};class Bat{constructor(){we(this,"id","core-canvas-regenerate-with-model-action");we(this,"eventUnsubscribers",[]);we(this,"notifyComponentUpdate",null);we(this,"globallyEnabledModels",[]);we(this,"isLoadingProviders",!0)}async initialize(t){const n=Ir.getState();this.isLoadingProviders=n.isLoading,this.globallyEnabledModels=n.getGloballyEnabledModelDefinitions();const r=t.on(lr.globallyEnabledModelsUpdated,a=>{var c;let o=!1;JSON.stringify(this.globallyEnabledModels)!==JSON.stringify(a.models)&&(this.globallyEnabledModels=a.models,o=!0);const l=Ir.getState().isLoading;this.isLoadingProviders!==l&&(this.isLoadingProviders=l,o=!0),o&&((c=this.notifyComponentUpdate)==null||c.call(this))}),i=t.on(lr.initialDataLoaded,()=>{var c;const a=Ir.getState();let o=!1;this.isLoadingProviders!==a.isLoading&&(this.isLoadingProviders=a.isLoading,o=!0);const l=a.getGloballyEnabledModelDefinitions();JSON.stringify(this.globallyEnabledModels)!==JSON.stringify(l)&&(this.globallyEnabledModels=l,o=!0),o&&((c=this.notifyComponentUpdate)==null||c.call(this))}),s=t.on(tr.statusChanged,()=>{var a;(a=this.notifyComponentUpdate)==null||a.call(this)});this.eventUnsubscribers.push(r,i,s)}setNotifyCallback(t){this.notifyComponentUpdate=t}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"actions",renderer:n=>{if(!n.interactionId||!n.interaction)return null;const r=n.interaction,i=Ln.getState(),s=i.status,a=i.interactions.filter(u=>u.conversationId===r.conversationId&&u.parentId===null&&(u.type==="message.user_assistant"||u.type==="message.assistant_regen"));a.sort((u,d)=>u.index-d.index);const o=a.length>0?a[a.length-1]:null,c=(o==null?void 0:o.id)===r.id&&(r.status==="COMPLETED"||r.status==="ERROR")&&s!=="streaming";return lt.createElement(Lat,{module:this,interactionId:r.id,disabled:!c})}})}async cleanup(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.notifyComponentUpdate=null}async destroy(){await this.cleanup()}}const $at=({interactionId:e,currentRating:t})=>{const n=i=>{const s=i===t?null:i;Le.emit(tr.rateInteractionRequest,{interactionId:e,rating:s})},r=Array.from({length:11},(i,s)=>s-5);return p.jsx("div",{className:"flex items-center gap-1",children:r.map(i=>{let s="";i===-5?s="Terrible":i===-4?s="Very Bad":i===-3?s="Bad":i===-2?s="Poor":i===-1?s="Below Average":i===0?s="Neutral":i===1?s="Above Average":i===2?s="Good":i===3?s="Very Good":i===4?s="Excellent":i===5&&(s="Perfect");let a="text-muted-foreground",o="hover:text-foreground",l="";i<0?(o="hover:text-red-500",t===i&&(a="text-red-500",l="fill-red-500")):i===0?(o="hover:text-gray-500",t===i&&(a="text-gray-500",l="fill-gray-500")):(o="hover:text-green-500",t===i&&(a="text-green-500",l="fill-green-500"));const c=t===i?"bg-muted":"";return p.jsx(Mn,{tooltipText:s,onClick:()=>n(i),"aria-label":`Rate response as ${s}`,icon:p.jsx(Bme,{className:ft(l,t===i?"fill-current":"fill-none")}),variant:"ghost",className:ft("h-4 w-4 md:h-5 md:w-5 p-0",a,o,c)},i)})})};class zat{constructor(){we(this,"id","core-canvas-rating-action")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"actions",renderer:n=>!n.interactionId||!n.interaction?null:lt.createElement($at,{interactionId:n.interactionId,currentRating:n.interaction.rating})})}destroy(t){}}const Uat=({interactionId:e,response:t,disabled:n})=>{const[r,i]=T.useState(!1),[s,a]=T.useState(""),o=u=>{if(u.stopPropagation(),n){De.info("Response editing is currently disabled.");return}a(t||""),i(!0)},l=()=>{if(s.trim()===""){De.error("Response cannot be empty");return}Le.emit(ec.editResponseRequest,{interactionId:e,newContent:s.trim()}),i(!1),De.success("Response edited successfully")},c=()=>{i(!1),a("")};return p.jsxs(p.Fragment,{children:[p.jsx(Mn,{tooltipText:"Edit Response",onClick:o,"aria-label":"Edit Assistant Response",disabled:n,icon:p.jsx(jH,{}),className:"h-5 max-w-7xl md:h-6 md:max-w-6xl"}),p.jsx(Iy,{open:r,onOpenChange:i,children:p.jsxs(Ny,{className:"!w-[80vw] !h-[85vh] !max-w-none flex flex-col",children:[p.jsx(My,{children:p.jsx(Py,{children:"Edit Assistant Response"})}),p.jsx("div",{className:"flex-1 space-y-4 overflow-hidden",children:p.jsxs("div",{className:"space-y-2 h-full",children:[p.jsx(en,{htmlFor:"response-edit",children:"Response Content"}),p.jsx(Fd,{id:"response-edit",value:s,onChange:u=>a(u.target.value),placeholder:"Edit the assistant's response...",className:"min-h-[60vh] h-full resize-none text-sm leading-relaxed"})]})}),p.jsxs(jy,{className:"flex-shrink-0",children:[p.jsx(Tt,{variant:"outline",onClick:c,children:"Cancel"}),p.jsx(Tt,{onClick:l,children:"Save Changes"})]})]})})]})};class qat{constructor(){we(this,"id","core-canvas-edit-response-action");we(this,"eventUnsubscribers",[])}async initialize(t){const n=t.on(ec.editResponseRequest,async r=>{await this.handleResponseEdit(r.interactionId,r.newContent)});this.eventUnsubscribers.push(n)}async handleResponseEdit(t,n){var r;try{const i=Ln.getState(),s=i.interactions.find(y=>y.id===t);if(!s)throw new Error("Original interaction not found");if(s.status!=="COMPLETED")throw new Error("Can only edit completed interactions");const a=Xs(),o={...s,id:a,response:n,parentId:null,index:s.index,metadata:{...s.metadata,editedResponse:!0,editedFromId:s.id},endedAt:new Date};i._addInteractionToState(o);const l=i.interactions.filter(y=>y.parentId===s.id),c=[];let u=s;for(;u;){c.push(u);const y=(r=u.metadata)==null?void 0:r.editedFromId;y?u=i.interactions.find(b=>b.id===y):u=void 0}const d=c.sort((y,b)=>{var _,S;const v=((_=y.startedAt)==null?void 0:_.getTime())??0,x=((S=b.startedAt)==null?void 0:S.getTime())??0;return v-x}),h=d.map(async(y,b)=>{const v={parentId:a,index:b,metadata:{...y.metadata,originalVersion:b===0}};return console.log(`[EditResponseControlModule] Updating version ${y.id} to be child of ${a} with childIndex ${b}`),i._updateInteractionInState(y.id,v),Nt.saveInteraction({...y,...v})}),m=l.map(async y=>{const b={parentId:a,index:d.length+y.index};return i._updateInteractionInState(y.id,b),Nt.saveInteraction({...y,...b})});await Promise.all([Nt.saveInteraction(o),...h,...m]),console.log(`[EditResponseControlModule] Response edited successfully. Original: ${t}, Edited: ${a}`)}catch(i){throw console.error("[EditResponseControlModule] Failed to edit response:",i),i}}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"actions",renderer:n=>{if(!n.interactionId||!n.interaction)return null;const r=n.interaction,s=Ln.getState().status,a=r.status==="COMPLETED"&&r.response&&typeof r.response=="string"&&s!=="streaming"&&(r.type==="message.user_assistant"||r.type==="message.assistant_regen");return a?lt.createElement(Uat,{interactionId:r.id,response:r.response,disabled:!a}):null}})}async cleanup(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[]}async destroy(){await this.cleanup()}}const Vat=({context:e})=>{const t=()=>{De.info(`Example Canvas Action Clicked! Interaction ID: ${e.interactionId}`)};return p.jsxs(Tt,{variant:"outline",size:"sm",onClick:t,className:"h-6 px-2 text-xs",children:[p.jsx(Mme,{className:"h-3 w-3 mr-1"})," Example Action"]})};class Hat{constructor(){we(this,"id","example-canvas-control-module")}async initialize(t){}register(t){t.registerCanvasControl({id:"example-canvas-action",type:"interaction",targetSlot:"actions",renderer:n=>lt.createElement(Vat,{context:n})})}destroy(t){}}const Wat=({isFolded:e,toggleFold:t,canFold:n})=>{if(!n)return null;const r=i=>{i.stopPropagation(),t()};return p.jsx(Mn,{tooltipText:e?"Unfold":"Fold",onClick:r,"aria-label":e?"Unfold response":"Fold response",icon:e?p.jsx(yu,{}):p.jsx(hh,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})};class Gat{constructor(){we(this,"id","core-canvas-fold-interaction")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"header-actions",renderer:n=>!n.toggleFold||n.isFolded===void 0?null:lt.createElement(Wat,{isFolded:n.isFolded,toggleFold:n.toggleFold,canFold:!0})})}destroy(t){}}const Kat=({context:e})=>{const t=jE(e.responseContent||""),n=T.useMemo(()=>{const i=[];return t.forEach(s=>{if(typeof s=="object"&&s.type==="code"){const a=s;a.filepath&&a.filepath.trim()&&i.push({filepath:a.filepath,code:a.code,lang:a.lang})}}),i},[t]),r=T.useCallback(async()=>{var i;if(n.length===0){De.info("No code blocks with filepaths found to download");return}try{const s=new xO,a=new Set;n.forEach(({filepath:h,code:m})=>{const y=h.replace(/^[\/\\]+/,"").replace(/\\/g,"/"),b=y.split("/");if(b.length>1)for(let _=1;_<b.length;_++){const S=b.slice(0,_).join("/");a.has(S)||(s.folder(S),a.add(S))}let v=y,x=1;for(;s.file(v);){const _=y.lastIndexOf(".");if(_>0){const S=y.substring(0,_),C=y.substring(_);v=`${S}_${x}${C}`}else v=`${y}_${x}`;x++}s.file(v,m)});const o=await s.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l;const u=new Date().toISOString().slice(0,19).replace(/[:.]/g,"-"),d=((i=e.interactionId)==null?void 0:i.slice(0,8))||"unknown";c.download=`codeblocks_${d}_${u}.zip`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l),De.success(`Downloaded ${n.length} code files as ZIP`)}catch(s){console.error("ZIP download failed:",s),De.error("Failed to create ZIP file")}},[n,e.interactionId]);return n.length===0?null:p.jsx(Mn,{tooltipText:`Download ${n.length} code files as ZIP`,onClick:r,"aria-label":"Download code blocks as ZIP file",icon:p.jsx(wH,{}),iconClassName:"h-4 w-4",className:"h-6 w-6 text-muted-foreground hover:text-foreground"})};class Yat{constructor(){we(this,"id","core-interaction-zip-download")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"interaction",targetSlot:"header-actions",renderer:n=>!n.interactionId||!n.responseContent?null:lt.createElement(Kat,{context:n})})}destroy(t){}}const Zat=({interactionId:e,codeBlockId:t,language:n,codeToCopy:r,disabled:i})=>{const[s,a]=T.useState(!1),o=T.useCallback(async l=>{l.stopPropagation(),!(i||!r)&&(Le.emit(ec.copyCodeBlockRequest,{interactionId:e,codeBlockId:t,language:n,content:r}),a(!0),setTimeout(()=>a(!1),1500))},[e,t,n,r,i]);return p.jsx(Mn,{tooltipText:"Copy Code",onClick:o,"aria-label":"Copy code block",disabled:i||!r,icon:s?p.jsx(Ka,{className:"text-green-500"}):p.jsx(Pk,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})};class Xat{constructor(){we(this,"id","core-codeblock-copy")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"codeblock",targetSlot:"codeblock-header-actions",renderer:n=>lt.createElement(Zat,{interactionId:n.interactionId,codeBlockId:n.codeBlockId,language:n.codeBlockLang,codeToCopy:n.codeBlockContent??"",disabled:!n.codeBlockContent||n.codeBlockContent.trim()===""})})}destroy(t){}}const Jat=({isFolded:e,toggleFold:t})=>{const n=r=>{r.stopPropagation(),t()};return p.jsx(Mn,{tooltipText:e?"Unfold Code":"Fold Code",onClick:n,"aria-label":e?"Unfold code block":"Fold code block",icon:p.jsx(Mk,{}),iconClassName:"h-3.5 w-3.5",className:"h-6 w-6 text-muted-foreground hover:text-foreground"})};class Qat{constructor(){we(this,"id","core-codeblock-fold")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"codeblock",targetSlot:"codeblock-header-actions",renderer:n=>n.toggleFold===void 0||n.isFolded===void 0?null:lt.createElement(Jat,{isFolded:n.isFolded,toggleFold:n.toggleFold})})}destroy(t){}}const eot=({interactionId:e,codeBlockId:t,language:n,codeToDownload:r,filepath:i,disabled:s})=>{const a=T.useCallback(l=>{if(l.stopPropagation(),!(s||!r))try{let c;if(i){const m=i.split("/");c=m[m.length-1]}else c=`code${tot(n)}`;const u=new Blob([r],{type:"text/plain"}),d=URL.createObjectURL(u),h=document.createElement("a");h.href=d,h.download=c,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(d),De.success(`Downloaded ${c}`)}catch(c){console.error("Download failed:",c),De.error("Failed to download file")}},[e,t,n,r,i,s]);return i||r&&r.trim().length>5e3?p.jsx(Mn,{tooltipText:"Download File",onClick:a,"aria-label":"Download code as file",disabled:s||!r,icon:p.jsx(Jc,{}),iconClassName:"h-3.5 w-3.5",className:"h-6 w-6 text-muted-foreground hover:text-foreground"}):null};function tot(e){return e&&{javascript:".js",js:".js",typescript:".ts",ts:".ts",tsx:".tsx",jsx:".jsx",python:".py",py:".py",java:".java",c:".c",cpp:".cpp",cxx:".cxx",cc:".cc","c++":".cpp",csharp:".cs",cs:".cs",php:".php",ruby:".rb",rb:".rb",go:".go",rust:".rs",rs:".rs",swift:".swift",kotlin:".kt",kt:".kt",scala:".scala",html:".html",css:".css",scss:".scss",sass:".sass",less:".less",json:".json",xml:".xml",yaml:".yaml",yml:".yml",toml:".toml",ini:".ini",conf:".conf",config:".config",sh:".sh",bash:".sh",zsh:".zsh",fish:".fish",powershell:".ps1",ps1:".ps1",bat:".bat",cmd:".cmd",sql:".sql",r:".r",matlab:".m",octave:".m",lua:".lua",perl:".pl",vim:".vim",dockerfile:"Dockerfile",makefile:"Makefile",markdown:".md",md:".md",tex:".tex",latex:".tex"}[e.toLowerCase()]||".txt"}class not{constructor(){we(this,"id","core-codeblock-download")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"codeblock",targetSlot:"codeblock-header-actions",renderer:n=>lt.createElement(eot,{interactionId:n.interactionId,codeBlockId:n.codeBlockId,language:n.codeBlockLang,codeToDownload:n.codeBlockContent??"",filepath:n.codeBlockFilepath,disabled:!n.codeBlockContent||n.codeBlockContent.trim()===""})})}destroy(t){}}const rot=({toolCall:e})=>{const[t,n]=T.useState(!0),r=()=>n(s=>!s),i=T.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return p.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Mn,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?p.jsx(yu,{}):p.jsx(hh,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(iy,{lang:"json",code:i})]})},iot=({toolResult:e})=>{const[t,n]=T.useState(!0),r=()=>n(a=>!a),i=T.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),s=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return p.jsxs("div",{className:ft("my-2 p-2 border rounded-md text-xs",s?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:ft("font-semibold",s?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Mn,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?p.jsx(yu,{}):p.jsx(hh,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(iy,{lang:s?"text":"json",code:i})]})},sot=({interactionId:e,toolCall:t,toolResult:n})=>p.jsxs("div",{className:"tool-call-step my-1","data-interaction-id":e,"data-tool-call-id":t.toolCallId,children:[p.jsx(rot,{toolCall:t}),n&&p.jsx(iot,{toolResult:n})]});class aot{constructor(){we(this,"id","core-tool-call-step-display")}async initialize(t){}register(t){t.registerCanvasControl({id:this.id,type:"tool-call-step",targetSlot:"tool-call-content",renderer:n=>!n.interactionId||!n.toolCall?(console.warn("[ToolCallStepControlModule] Missing interactionId or toolCall in context"),null):lt.createElement(sot,{interactionId:n.interactionId,toolCall:n.toolCall,toolResult:n.toolResult})})}destroy(t){}}const oot=[Krt,nit,cit,fat,kat,Iat,jat,wJe,CQe,_Qe,yrt,brt,Wrt,Ert,Art,Irt,Zrt,XQe,nnt,Vrt,xrt,Dnt,GQe,Srt,Jrt,bnt,xnt,Tnt,jnt,Oat,Gat,Yat,Fat,Bat,qat,zat,Xat,Qat,not,Hat,aot];function lot(){return p.jsxs(yJe,{children:[p.jsx(mJe,{}),p.jsx(pJe,{}),p.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:p.jsx("main",{className:"flex-grow overflow-hidden",children:p.jsx(lJe,{controls:oot})})})]})}pge();Mfe.createRoot(document.getElementById("root")).render(p.jsx(lt.StrictMode,{children:p.jsx(lot,{})}));export{EOe as $,Ov as A,PNe as B,EMe as C,CD as D,wo as E,dX as F,_5e as G,P8e as H,q7 as I,P3e as J,UNe as K,D0 as L,Lot as M,XE as N,qO as O,Pz as P,IOe as Q,r2 as R,w5e as S,n1 as T,pMe as U,t1 as V,xn as W,Dn as X,wX as Y,h5e as Z,re as _,xMe as a,sNe as a$,uD as a0,Vot as a1,Got as a2,bg as a3,o7 as a4,a7 as a5,Yot as a6,Kot as a7,Wot as a8,Uot as a9,c5e as aA,t6e as aB,n5e as aC,mD as aD,X7 as aE,hFe as aF,TOe as aG,ma as aH,$E as aI,i4e as aJ,r4e as aK,pm as aL,u5e as aM,dee as aN,WE as aO,ZE as aP,ZC as aQ,hee as aR,uee as aS,$6e as aT,yo as aU,Qje as aV,sD as aW,bQ as aX,s1 as aY,wQ as aZ,zot as a_,qot as aa,Xot as ab,Hot as ac,Zot as ad,$Fe as ae,mne as af,rlt as ag,D3e as ah,Os as ai,kh as aj,nD as ak,qee as al,ym as am,vee as an,ir as ao,hu as ap,Og as aq,N8e as ar,nlt as as,ilt as at,elt as au,An as av,tlt as aw,h8e as ax,c8e as ay,l8e as az,vMe as b,aD as b0,Mf as b1,e7 as b2,aPe as b3,Bx as b4,l5e as b5,t5e as b6,UDe as b7,gD as b8,D6e as b9,os as bA,Hr as bB,f5e as ba,o1 as bb,xy as bc,GC as bd,G6e as be,tLe as bf,a1 as bg,YC as bh,z6e as bi,iee as bj,HDe as bk,WDe as bl,up as bm,_7 as bn,GDe as bo,yD as bp,VDe as bq,ZDe as br,wy as bs,Ch as bt,y7 as bu,bD as bv,aee as bw,X4 as bx,d5e as by,YE as bz,ni as c,qr as d,xX as e,ha as f,_Me as g,kd as h,Vp as i,l4e as j,vy as k,$t as l,wee as m,Bot as n,alt as o,SMe as p,CMe as q,slt as r,wMe as s,O3e as t,Gc as u,s8e as v,k5e as w,Jot as x,bMe as y,$ot as z};
